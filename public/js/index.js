angular
    .module('VirtualBookshelf', ['blockUI', 'ngDialog', 'angularUtils.directives.dirPagination'])
    	.config(function (blockUIConfig, paginationTemplateProvider) {
    		blockUIConfig.delay = 0;
    		blockUIConfig.autoBlock = false;
			blockUIConfig.autoInjectBodyBlock = false;
			paginationTemplateProvider.setPath('/js/angular/dirPagination/dirPagination.tpl.html');
    	})
    	.run(function (main) {
			main.start();
    	});
angular.module('VirtualBookshelf')
.controller('AuthCtrl', function (authorization) {
	this.loginGoogle = function() {
		authorization.google();
	};
});
angular.module('VirtualBookshelf')
.controller('CreateLibraryCtrl', function (createLibrary) {
	this.list = createLibrary.list;
	this.model = createLibrary.model;
	this.getImg = createLibrary.getImg;
	this.create = createLibrary.create;
});
angular.module('VirtualBookshelf')
.controller('SelectLibraryCtrl', function (selectLibrary) {
	this.go = selectLibrary.go;

	this.getList = function() {
		return selectLibrary.list;
	};
});
angular.module('VirtualBookshelf')
.controller('ToolsCtrl', function (user, selector, tools, preview) {
    this.isShow = function() {
		return selector.isSelectedEditable() || preview.isActive();
	};

    this.isRotatable = function() {
		return selector.isSelectedSection() || preview.isActive();
	};

    this.isDeletable = function() {
		return selector.isSelectedEditable() && user.isAuthorized();
	};

    this.isWatchable = function() {
        return selector.isSelectedBook() && !preview.isActive();
    };

    this.watch = function()  {
        var obj = selector.getSelectedObject();
        preview.enable(obj);
    };

    this.unwatch = preview.disable;
    this.isWatchActive = preview.isActive;

    this.rotateLeft = tools.rotateLeft;
    this.rotateRight = tools.rotateRight;
    this.stop = tools.stop;

    this.delete = tools.delete;
});
angular.module('VirtualBookshelf')
.controller('TooltipCtrl', function (tooltip, BookObject) {
    this.isShow = function() {
        return tooltip.obj.type === BookObject.TYPE;
    };

    this.obj = tooltip.obj;
});
angular.module('VirtualBookshelf')
.controller('UiCtrl', function ($scope, mainMenu, selectLibrary, createLibrary, createSection, feedback, authorization, navigation, inventory, bookEdit, catalog) {
    $scope.mainMenu = mainMenu;

    $scope.selectLibrary = selectLibrary;
    $scope.createLibrary = createLibrary;
    $scope.createSection = createSection;
    $scope.feedback = feedback;
    $scope.authorization = authorization;

    $scope.inventory = inventory;
    $scope.bookEdit = bookEdit;
    $scope.catalog = catalog;

	$scope.navigation = {
		stop: navigation.goStop,
		forward: navigation.goForward,
		backward: navigation.goBackward,
		left: navigation.goLeft,
		right: navigation.goRight
	};
});
angular.module('VirtualBookshelf')
.controller('WelcomeCtrl', function (authorization, selectLibrary, createLibrary, environment) {
	var closed = false;

	this.isShowAuthorization = function() {
		return authorization.isShow();
	};
	
	this.isShowSelectLibrary = function() {
		return selectLibrary.isAvailable() && !selectLibrary.isUserLibrary();
	};

	this.isShowCreateLibrary = function() {
		return !this.isShowAuthorization() && !selectLibrary.isAvailable();
	};

	this.isShow = function() {
		return !closed && (this.isShowAuthorization() || this.isShowCreateLibrary() || this.isShowSelectLibrary());
	};

	this.isLoaded = function() {
		return environment.getLoaded();
	};

	this.showLoginDialog = function() {
		authorization.show();
	};

	this.showSelectLibraryDialog = function() {
		selectLibrary.show();
	};

	this.showCreateLibraryDialog = function() {
		createLibrary.show();
	};

	this.close = function() {
		closed = true;
	};
});
angular.module('VirtualBookshelf')
.directive('vbSelect', function() {
	return {
		require: 'ngModel',
		restrict: 'E',
    	transclude: true,
		templateUrl: '/ui/select.ejs',
		scope: {
			options: '=',
			value: '@',
			label: '@'
		},

		link: function(scope, element, attrs, controller) {
			scope.select = function(item) {
				controller.$setViewValue(item[scope.value]);
			};

			scope.isSelected = function(item) {
				return controller.$modelValue === item[scope.value];
			};
		}
	};
});

/**
 * @license
 * lodash 3.2.0 (Custom Build) lodash.com/license | Underscore.js 1.7.0 underscorejs.org/LICENSE
 * Build: `lodash modern -o ./lodash.js`
 */
;(function(){function n(n,t){if(n!==t){var r=n===n,e=t===t;if(n>t||!r||typeof n=="undefined"&&e)return 1;if(n<t||!e||typeof t=="undefined"&&r)return-1}return 0}function t(n,t,r){if(t!==t)return p(n,r);r=(r||0)-1;for(var e=n.length;++r<e;)if(n[r]===t)return r;return-1}function r(n,t){var r=n.length;for(n.sort(t);r--;)n[r]=n[r].c;return n}function e(n){return typeof n=="string"?n:null==n?"":n+""}function u(n){return n.charCodeAt(0)}function o(n,t){for(var r=-1,e=n.length;++r<e&&-1<t.indexOf(n.charAt(r)););return r
}function i(n,t){for(var r=n.length;r--&&-1<t.indexOf(n.charAt(r)););return r}function f(t,r){return n(t.a,r.a)||t.b-r.b}function a(t,r){for(var e=-1,u=t.a,o=r.a,i=u.length;++e<i;){var f=n(u[e],o[e]);if(f)return f}return t.b-r.b}function c(n){return Wt[n]}function l(n){return Nt[n]}function s(n){return"\\"+Lt[n]}function p(n,t,r){var e=n.length;for(t=r?t||e:(t||0)-1;r?t--:++t<e;){var u=n[t];if(u!==u)return t}return-1}function h(n){return n&&typeof n=="object"||false}function _(n){return 160>=n&&9<=n&&13>=n||32==n||160==n||5760==n||6158==n||8192<=n&&(8202>=n||8232==n||8233==n||8239==n||8287==n||12288==n||65279==n)
}function g(n,t){for(var r=-1,e=n.length,u=-1,o=[];++r<e;)n[r]===t&&(n[r]=B,o[++u]=r);return o}function v(n){for(var t=-1,r=n.length;++t<r&&_(n.charCodeAt(t)););return t}function y(n){for(var t=n.length;t--&&_(n.charCodeAt(t)););return t}function d(n){return Ut[n]}function m(_){function Wt(n){if(h(n)&&!(So(n)||n instanceof Ut)){if(n instanceof Nt)return n;if(Uu.call(n,"__chain__")&&Uu.call(n,"__wrapped__"))return he(n)}return new Nt(n)}function Nt(n,t,r){this.__wrapped__=n,this.__actions__=r||[],this.__chain__=!!t
}function Ut(n){this.__wrapped__=n,this.__actions__=null,this.__dir__=1,this.__dropCount__=0,this.__filtered__=false,this.__iteratees__=null,this.__takeCount__=so,this.__views__=null}function Ft(){this.__data__={}}function Lt(n){var t=n?n.length:0;for(this.data={hash:to(null),set:new Zu};t--;)this.push(n[t])}function Bt(n,t){var r=n.data;return(typeof t=="string"||Xe(t)?r.set.has(t):r.hash[t])?0:-1}function zt(n,t){var r=-1,e=n.length;for(t||(t=wu(e));++r<e;)t[r]=n[r];return t}function Mt(n,t){for(var r=-1,e=n.length;++r<e&&false!==t(n[r],r,n););return n
}function qt(n,t){for(var r=-1,e=n.length;++r<e;)if(!t(n[r],r,n))return false;return true}function Pt(n,t){for(var r=-1,e=n.length,u=-1,o=[];++r<e;){var i=n[r];t(i,r,n)&&(o[++u]=i)}return o}function Kt(n,t){for(var r=-1,e=n.length,u=wu(e);++r<e;)u[r]=t(n[r],r,n);return u}function Vt(n){for(var t=-1,r=n.length,e=lo;++t<r;){var u=n[t];u>e&&(e=u)}return e}function Yt(n,t,r,e){var u=-1,o=n.length;for(e&&o&&(r=n[++u]);++u<o;)r=t(r,n[u],u,n);return r}function Zt(n,t,r,e){var u=n.length;for(e&&u&&(r=n[--u]);u--;)r=t(r,n[u],u,n);
return r}function Gt(n,t){for(var r=-1,e=n.length;++r<e;)if(t(n[r],r,n))return true;return false}function Jt(n,t){return typeof n=="undefined"?t:n}function Xt(n,t,r,e){return typeof n!="undefined"&&Uu.call(e,r)?n:t}function Ht(n,t,r){var e=Fo(t);if(!r)return nr(t,n,e);for(var u=-1,o=e.length;++u<o;){var i=e[u],f=n[i],a=r(f,t[i],i,n,t);(a===a?a===f:f!==f)&&(typeof f!="undefined"||i in n)||(n[i]=a)}return n}function Qt(n,t){for(var r=-1,e=n.length,u=oe(e),o=t.length,i=wu(o);++r<o;){var f=t[r];u?(f=parseFloat(f),i[r]=ee(f,e)?n[f]:w):i[r]=n[f]
}return i}function nr(n,t,r){r||(r=t,t={});for(var e=-1,u=r.length;++e<u;){var o=r[e];t[o]=n[o]}return t}function tr(n,t,r){var e=typeof n;if("function"==e){if(e=typeof t!="undefined"){var e=Wt.support,u=!(e.funcNames?n.name:e.funcDecomp);if(!u){var o=Wu.call(n);e.funcNames||(u=!dt.test(o)),u||(u=kt.test(o)||He(n),bo(n,u))}e=u}n=e?Nr(n,t,r):n}else n=null==n?vu:"object"==e?br(n):typeof t=="undefined"?jr(n+""):xr(n+"",t);return n}function rr(n,t,r,e,u,o,i){var f;if(r&&(f=u?r(n,e,u):r(n)),typeof f!="undefined")return f;
if(!Xe(n))return n;if(e=So(n)){if(f=ne(n),!t)return zt(n,f)}else{var a=Lu.call(n),c=a==K;if(a!=Y&&a!=z&&(!c||u))return Tt[a]?re(n,a,t):u?n:{};if(f=te(c?{}:n),!t)return nr(n,f,Fo(n))}for(o||(o=[]),i||(i=[]),u=o.length;u--;)if(o[u]==n)return i[u];return o.push(n),i.push(f),(e?Mt:_r)(n,function(e,u){f[u]=rr(e,t,r,u,n,o,i)}),f}function er(n,t,r,e){if(typeof n!="function")throw new Ou($);return Gu(function(){n.apply(w,Rr(r,e))},t)}function ur(n,r){var e=n?n.length:0,u=[];if(!e)return u;var o=-1,i=Qr(),f=i==t,a=f&&200<=r.length&&xo(r),c=r.length;
a&&(i=Bt,f=false,r=a);n:for(;++o<e;)if(a=n[o],f&&a===a){for(var l=c;l--;)if(r[l]===a)continue n;u.push(a)}else 0>i(r,a)&&u.push(a);return u}function or(n,t){var r=n?n.length:0;if(!oe(r))return _r(n,t);for(var e=-1,u=pe(n);++e<r&&false!==t(u[e],e,u););return n}function ir(n,t){var r=n?n.length:0;if(!oe(r))return gr(n,t);for(var e=pe(n);r--&&false!==t(e[r],r,e););return n}function fr(n,t){var r=true;return or(n,function(n,e,u){return r=!!t(n,e,u)}),r}function ar(n,t){var r=[];return or(n,function(n,e,u){t(n,e,u)&&r.push(n)
}),r}function cr(n,t,r,e){var u;return r(n,function(n,r,o){return t(n,r,o)?(u=e?r:n,false):void 0}),u}function lr(n,t,r,e){e=(e||0)-1;for(var u=n.length,o=-1,i=[];++e<u;){var f=n[e];if(h(f)&&oe(f.length)&&(So(f)||Ye(f))){t&&(f=lr(f,t,r));var a=-1,c=f.length;for(i.length+=c;++a<c;)i[++o]=f[a]}else r||(i[++o]=f)}return i}function sr(n,t,r){var e=-1,u=pe(n);r=r(n);for(var o=r.length;++e<o;){var i=r[e];if(false===t(u[i],i,u))break}return n}function pr(n,t,r){var e=pe(n);r=r(n);for(var u=r.length;u--;){var o=r[u];
if(false===t(e[o],o,e))break}return n}function hr(n,t){sr(n,t,ou)}function _r(n,t){return sr(n,t,Fo)}function gr(n,t){return pr(n,t,Fo)}function vr(n,t){for(var r=-1,e=t.length,u=-1,o=[];++r<e;){var i=t[r];Je(n[i])&&(o[++u]=i)}return o}function yr(n,t,r){var e=-1,u=typeof t=="function",o=n?n.length:0,i=oe(o)?wu(o):[];return or(n,function(n){var o=u?t:null!=n&&n[t];i[++e]=o?o.apply(n,r):w}),i}function dr(n,t,r,e,u,o){if(n===t)return 0!==n||1/n==1/t;var i=typeof n,f=typeof t;if("function"!=i&&"object"!=i&&"function"!=f&&"object"!=f||null==n||null==t)n=n!==n&&t!==t;
else n:{var i=dr,f=So(n),a=So(t),c=D,l=D;f||(c=Lu.call(n),c==z?c=Y:c!=Y&&(f=ru(n))),a||(l=Lu.call(t),l==z?l=Y:l!=Y&&ru(t));var s=c==Y,a=l==Y,l=c==l;if(!l||f||s)if(c=s&&Uu.call(n,"__wrapped__"),a=a&&Uu.call(t,"__wrapped__"),c||a)n=i(c?n.value():n,a?t.value():t,r,e,u,o);else if(l){for(u||(u=[]),o||(o=[]),c=u.length;c--;)if(u[c]==n){n=o[c]==t;break n}u.push(n),o.push(t),n=(f?Zr:Jr)(n,t,i,r,e,u,o),u.pop(),o.pop()}else n=false;else n=Gr(n,t,c)}return n}function mr(n,t,r,e,u){var o=t.length;if(null==n)return!o;
for(var i=-1,f=!u;++i<o;)if(f&&e[i]?r[i]!==n[t[i]]:!Uu.call(n,t[i]))return false;for(i=-1;++i<o;){var a=t[i];if(f&&e[i])a=Uu.call(n,a);else{var c=n[a],l=r[i],a=u?u(c,l,a):w;typeof a=="undefined"&&(a=dr(l,c,u,true))}if(!a)return false}return true}function wr(n,t){var r=[];return or(n,function(n,e,u){r.push(t(n,e,u))}),r}function br(n){var t=Fo(n),r=t.length;if(1==r){var e=t[0],u=n[e];if(ie(u))return function(n){return null!=n&&n[e]===u&&Uu.call(n,e)}}for(var o=wu(r),i=wu(r);r--;)u=n[t[r]],o[r]=u,i[r]=ie(u);return function(n){return mr(n,t,o,i)
}}function xr(n,t){return ie(t)?function(r){return null!=r&&r[n]===t}:function(r){return null!=r&&dr(t,r[n],null,true)}}function Ar(n,t,r,e,u){var o=oe(t.length)&&(So(t)||ru(t));return(o?Mt:_r)(t,function(t,i,f){if(h(t)){e||(e=[]),u||(u=[]);n:{t=e;for(var a=u,c=t.length,l=f[i];c--;)if(t[c]==l){n[i]=a[c],i=void 0;break n}c=n[i],f=r?r(c,l,i,n,f):w;var s=typeof f=="undefined";s&&(f=l,oe(l.length)&&(So(l)||ru(l))?f=So(c)?c:c?zt(c):[]:No(l)||Ye(l)?f=Ye(c)?eu(c):No(c)?c:{}:s=false),t.push(l),a.push(f),s?n[i]=Ar(f,l,r,t,a):(f===f?f!==c:c===c)&&(n[i]=f),i=void 0
}return i}a=n[i],f=r?r(a,t,i,n,f):w,(l=typeof f=="undefined")&&(f=t),!o&&typeof f=="undefined"||!l&&(f===f?f===a:a!==a)||(n[i]=f)}),n}function jr(n){return function(t){return null==t?w:t[n]}}function kr(n,t){return n+Pu(co()*(t-n+1))}function Er(n,t,r,e,u){return u(n,function(n,u,o){r=e?(e=false,n):t(r,n,u,o)}),r}function Rr(n,t,r){var e=-1,u=n.length;for(t=null==t?0:+t||0,0>t&&(t=-t>u?0:u+t),r=typeof r=="undefined"||r>u?u:+r||0,0>r&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0,r=wu(u);++e<u;)r[e]=n[e+t];return r}function Ir(n,t){var r;
return or(n,function(n,e,u){return r=t(n,e,u),!r}),!!r}function Or(n,r){var e=-1,u=Qr(),o=n.length,i=u==t,f=i&&200<=o,a=f&&xo(),c=[];a?(u=Bt,i=false):(f=false,a=r?[]:c);n:for(;++e<o;){var l=n[e],s=r?r(l,e,n):l;if(i&&l===l){for(var p=a.length;p--;)if(a[p]===s)continue n;r&&a.push(s),c.push(l)}else 0>u(a,s)&&((r||f)&&a.push(s),c.push(l))}return c}function Cr(n,t){for(var r=-1,e=t.length,u=wu(e);++r<e;)u[r]=n[t[r]];return u}function Tr(n,t){var r=n;r instanceof Ut&&(r=r.value());for(var e=-1,u=t.length;++e<u;){var r=[r],o=t[e];
Vu.apply(r,o.args),r=o.func.apply(o.thisArg,r)}return r}function Sr(n,t,r){var e=0,u=n?n.length:e;if(typeof t=="number"&&t===t&&u<=_o){for(;e<u;){var o=e+u>>>1,i=n[o];(r?i<=t:i<t)?e=o+1:u=o}return u}return Wr(n,t,vu,r)}function Wr(n,t,r,e){t=r(t);for(var u=0,o=n?n.length:0,i=t!==t,f=typeof t=="undefined";u<o;){var a=Pu((u+o)/2),c=r(n[a]),l=c===c;(i?l||e:f?l&&(e||typeof c!="undefined"):e?c<=t:c<t)?u=a+1:o=a}return oo(o,ho)}function Nr(n,t,r){if(typeof n!="function")return vu;if(typeof t=="undefined")return n;
switch(r){case 1:return function(r){return n.call(t,r)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,o){return n.call(t,r,e,u,o)};case 5:return function(r,e,u,o,i){return n.call(t,r,e,u,o,i)}}return function(){return n.apply(t,arguments)}}function Ur(n){return Du.call(n,0)}function Fr(n,t,r){for(var e=r.length,u=-1,o=uo(n.length-e,0),i=-1,f=t.length,a=wu(o+f);++i<f;)a[i]=t[i];for(;++u<e;)a[r[u]]=n[u];for(;o--;)a[i++]=n[u++];return a}function Lr(n,t,r){for(var e=-1,u=r.length,o=-1,i=uo(n.length-u,0),f=-1,a=t.length,c=wu(i+a);++o<i;)c[o]=n[o];
for(i=o;++f<a;)c[i+f]=t[f];for(;++e<u;)c[i+r[e]]=n[o++];return c}function $r(n,t){return function(r,e,u){var o=t?t():{};if(e=Hr(e,u,3),So(r)){u=-1;for(var i=r.length;++u<i;){var f=r[u];n(o,f,e(f,u,r),r)}}else or(r,function(t,r,u){n(o,t,e(t,r,u),u)});return o}}function Br(n){return function(){var t=arguments.length,r=arguments[0];if(2>t||null==r)return r;if(3<t&&ue(arguments[1],arguments[2],arguments[3])&&(t=2),3<t&&"function"==typeof arguments[t-2])var e=Nr(arguments[--t-1],arguments[t--],5);else 2<t&&"function"==typeof arguments[t-1]&&(e=arguments[--t]);
for(var u=0;++u<t;){var o=arguments[u];o&&n(r,o,e)}return r}}function zr(n,t){function r(){return(this instanceof r?e:n).apply(t,arguments)}var e=Mr(n);return r}function Dr(n){return function(t){var r=-1;t=pu(fu(t));for(var e=t.length,u="";++r<e;)u=n(u,t[r],r);return u}}function Mr(n){return function(){var t=wo(n.prototype),r=n.apply(t,arguments);return Xe(r)?r:t}}function qr(n,t){return function(r,e,o){o&&ue(r,e,o)&&(e=null);var i=Hr(),f=null==e;if(i===tr&&f||(f=false,e=i(e,o,3)),f){if(e=So(r),e||!tu(r))return n(e?r:se(r));
e=u}return Xr(r,e,t)}}function Pr(n,t,r,e,u,o,i,f,a,c){function l(){for(var b=arguments.length,j=b,k=wu(b);j--;)k[j]=arguments[j];if(e&&(k=Fr(k,e,u)),o&&(k=Lr(k,o,i)),_||y){var j=l.placeholder,E=g(k,j),b=b-E.length;if(b<c){var O=f?zt(f):null,b=uo(c-b,0),C=_?E:null,E=_?null:E,T=_?k:null,k=_?null:k;return t|=_?R:I,t&=~(_?I:R),v||(t&=~(x|A)),k=Pr(n,t,r,T,C,k,E,O,a,b),k.placeholder=j,k}}if(j=p?r:this,h&&(n=j[m]),f)for(O=k.length,b=oo(f.length,O),C=zt(k);b--;)E=f[b],k[b]=ee(E,O)?C[E]:w;return s&&a<k.length&&(k.length=a),(this instanceof l?d||Mr(n):n).apply(j,k)
}var s=t&C,p=t&x,h=t&A,_=t&k,v=t&j,y=t&E,d=!h&&Mr(n),m=n;return l}function Kr(n,t,r){return n=n.length,t=+t,n<t&&ro(t)?(t-=n,r=null==r?" ":r+"",lu(r,Mu(t/r.length)).slice(0,t)):""}function Vr(n,t,r,e){function u(){for(var t=-1,f=arguments.length,a=-1,c=e.length,l=wu(f+c);++a<c;)l[a]=e[a];for(;f--;)l[a++]=arguments[++t];return(this instanceof u?i:n).apply(o?r:this,l)}var o=t&x,i=Mr(n);return u}function Yr(n,t,r,e,u,o,i,f){var a=t&A;if(!a&&typeof n!="function")throw new Ou($);var c=e?e.length:0;if(c||(t&=~(R|I),e=u=null),c-=u?u.length:0,t&I){var l=e,s=u;
e=u=null}var p=!a&&Ao(n);if(r=[n,t,r,e,u,l,s,o,i,f],p&&true!==p){e=r[1],t=p[1],f=e|t,o=C|O,u=x|A,i=o|u|j|E;var l=e&C&&!(t&C),s=e&O&&!(t&O),h=(s?r:p)[7],_=(l?r:p)[8];o=f>=o&&f<=i&&(e<O||(s||l)&&h.length<=_),(!(e>=O&&t>u||e>u&&t>=O)||o)&&(t&x&&(r[2]=p[2],f|=e&x?0:j),(e=p[3])&&(u=r[3],r[3]=u?Fr(u,e,p[4]):zt(e),r[4]=u?g(r[3],B):zt(p[4])),(e=p[5])&&(u=r[5],r[5]=u?Lr(u,e,p[6]):zt(e),r[6]=u?g(r[5],B):zt(p[6])),(e=p[7])&&(r[7]=zt(e)),t&C&&(r[8]=null==r[8]?p[8]:oo(r[8],p[8])),null==r[9]&&(r[9]=p[9]),r[0]=p[0],r[1]=f),t=r[1],f=r[9]
}return r[9]=null==f?a?0:n.length:uo(f-c,0)||0,(p?bo:jo)(t==x?zr(r[0],r[2]):t!=R&&t!=(x|R)||r[4].length?Pr.apply(w,r):Vr.apply(w,r),r)}function Zr(n,t,r,e,u,o,i){var f=-1,a=n.length,c=t.length,l=true;if(a!=c&&(!u||c<=a))return false;for(;l&&++f<a;){var s=n[f],p=t[f],l=w;if(e&&(l=u?e(p,s,f):e(s,p,f)),typeof l=="undefined")if(u)for(var h=c;h--&&(p=t[h],!(l=s&&s===p||r(s,p,e,u,o,i))););else l=s&&s===p||r(s,p,e,u,o,i)}return!!l}function Gr(n,t,r){switch(r){case M:case q:return+n==+t;case P:return n.name==t.name&&n.message==t.message;
case V:return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case Z:case G:return n==t+""}return false}function Jr(n,t,r,e,u,o,i){var f=Fo(n),a=f.length,c=Fo(t).length;if(a!=c&&!u)return false;for(var l,c=-1;++c<a;){var s=f[c],p=Uu.call(t,s);if(p){var h=n[s],_=t[s],p=w;e&&(p=u?e(_,h,s):e(h,_,s)),typeof p=="undefined"&&(p=h&&h===_||r(h,_,e,u,o,i))}if(!p)return false;l||(l="constructor"==s)}return l||(r=n.constructor,e=t.constructor,!(r!=e&&"constructor"in n&&"constructor"in t)||typeof r=="function"&&r instanceof r&&typeof e=="function"&&e instanceof e)?true:false
}function Xr(n,t,r){var e=r?so:lo,u=e,o=u;return or(n,function(n,i,f){i=t(n,i,f),((r?i<u:i>u)||i===e&&i===o)&&(u=i,o=n)}),o}function Hr(n,t,r){var e=Wt.callback||_u,e=e===_u?tr:e;return r?e(n,t,r):e}function Qr(n,r,e){var u=Wt.indexOf||de,u=u===de?t:u;return n?u(n,r,e):u}function ne(n){var t=n.length,r=new n.constructor(t);return t&&"string"==typeof n[0]&&Uu.call(n,"index")&&(r.index=n.index,r.input=n.input),r}function te(n){return n=n.constructor,typeof n=="function"&&n instanceof n||(n=Eu),new n
}function re(n,t,r){var e=n.constructor;switch(t){case J:return Ur(n);case M:case q:return new e(+n);case X:case H:case Q:case nt:case tt:case rt:case et:case ut:case ot:return t=n.buffer,new e(r?Ur(t):t,n.byteOffset,n.length);case V:case G:return new e(n);case Z:var u=new e(n.source,yt.exec(n));u.lastIndex=n.lastIndex}return u}function ee(n,t){return n=+n,t=null==t?vo:t,-1<n&&0==n%1&&n<t}function ue(n,t,r){if(!Xe(r))return false;var e=typeof t;return"number"==e?(e=r.length,e=oe(e)&&ee(t,e)):e="string"==e&&t in r,e&&r[t]===n
}function oe(n){return typeof n=="number"&&-1<n&&0==n%1&&n<=vo}function ie(n){return n===n&&(0===n?0<1/n:!Xe(n))}function fe(n,t){n=pe(n);for(var r=-1,e=t.length,u={};++r<e;){var o=t[r];o in n&&(u[o]=n[o])}return u}function ae(n,t){var r={};return hr(n,function(n,e,u){t(n,e,u)&&(r[e]=n)}),r}function ce(n){var t;if(!h(n)||Lu.call(n)!=Y||!(Uu.call(n,"constructor")||(t=n.constructor,typeof t!="function"||t instanceof t)))return false;var r;return hr(n,function(n,t){r=t}),typeof r=="undefined"||Uu.call(n,r)
}function le(n){for(var t=ou(n),r=t.length,e=r&&n.length,u=Wt.support,u=e&&oe(e)&&(So(n)||u.nonEnumArgs&&Ye(n)),o=-1,i=[];++o<r;){var f=t[o];(u&&ee(f,e)||Uu.call(n,f))&&i.push(f)}return i}function se(n){return null==n?[]:oe(n.length)?Xe(n)?n:Eu(n):iu(n)}function pe(n){return Xe(n)?n:Eu(n)}function he(n){return n instanceof Ut?n.clone():new Nt(n.__wrapped__,n.__chain__,zt(n.__actions__))}function _e(n,t,r){return n&&n.length?((r?ue(n,t,r):null==t)&&(t=1),Rr(n,0>t?0:t)):[]}function ge(n,t,r){var e=n?n.length:0;
return e?((r?ue(n,t,r):null==t)&&(t=1),t=e-(+t||0),Rr(n,0,0>t?0:t)):[]}function ve(n,t,r){var e=-1,u=n?n.length:0;for(t=Hr(t,r,3);++e<u;)if(t(n[e],e,n))return e;return-1}function ye(n){return n?n[0]:w}function de(n,r,e){var u=n?n.length:0;if(!u)return-1;if(typeof e=="number")e=0>e?uo(u+e,0):e||0;else if(e)return e=Sr(n,r),n=n[e],(r===r?r===n:n!==n)?e:-1;return t(n,r,e)}function me(n){return _e(n,1)}function we(n,r,e,u){if(!n||!n.length)return[];typeof r!="boolean"&&null!=r&&(u=e,e=ue(n,r,u)?null:r,r=false);
var o=Hr();if((o!==tr||null!=e)&&(e=o(e,u,3)),r&&Qr()==t){r=e;var i;e=-1,u=n.length;for(var o=-1,f=[];++e<u;){var a=n[e],c=r?r(a,e,n):a;e&&i===c||(i=c,f[++o]=a)}n=f}else n=Or(n,e);return n}function be(n){for(var t=-1,r=(n&&n.length&&Vt(Kt(n,Nu)))>>>0,e=wu(r);++t<r;)e[t]=Kt(n,jr(t));return e}function xe(n,t){var r=-1,e=n?n.length:0,u={};for(!e||t||So(n[0])||(t=[]);++r<e;){var o=n[r];t?u[o]=t[r]:o&&(u[o[0]]=o[1])}return u}function Ae(n){return n=Wt(n),n.__chain__=true,n}function je(n,t,r){return t.call(r,n)
}function ke(n,t,r){var e=n?n.length:0;return oe(e)||(n=iu(n),e=n.length),e?(r=typeof r=="number"?0>r?uo(e+r,0):r||0:0,typeof n=="string"||!So(n)&&tu(n)?r<e&&-1<n.indexOf(t,r):-1<Qr(n,t,r)):false}function Ee(n,t,r){var e=So(n)?qt:fr;return(typeof t!="function"||typeof r!="undefined")&&(t=Hr(t,r,3)),e(n,t)}function Re(n,t,r){var e=So(n)?Pt:ar;return t=Hr(t,r,3),e(n,t)}function Ie(n,t,r){return So(n)?(t=ve(n,t,r),-1<t?n[t]:w):(t=Hr(t,r,3),cr(n,t,or))}function Oe(n,t,r){return typeof t=="function"&&typeof r=="undefined"&&So(n)?Mt(n,t):or(n,Nr(t,r,3))
}function Ce(n,t,r){if(typeof t=="function"&&typeof r=="undefined"&&So(n))for(r=n.length;r--&&false!==t(n[r],r,n););else n=ir(n,Nr(t,r,3));return n}function Te(n,t,r){var e=So(n)?Kt:wr;return t=Hr(t,r,3),e(n,t)}function Se(n,t,r,e){return(So(n)?Yt:Er)(n,Hr(t,e,4),r,3>arguments.length,or)}function We(n,t,r,e){return(So(n)?Zt:Er)(n,Hr(t,e,4),r,3>arguments.length,ir)}function Ne(n,t,r){return(r?ue(n,t,r):null==t)?(n=se(n),t=n.length,0<t?n[kr(0,t-1)]:w):(n=Ue(n),n.length=oo(0>t?0:+t||0,n.length),n)}function Ue(n){n=se(n);
for(var t=-1,r=n.length,e=wu(r);++t<r;){var u=kr(0,t);t!=u&&(e[t]=e[u]),e[u]=n[t]}return e}function Fe(n,t,r){var e=So(n)?Gt:Ir;return(typeof t!="function"||typeof r!="undefined")&&(t=Hr(t,r,3)),e(n,t)}function Le(n,t){var r;if(typeof t!="function"){if(typeof n!="function")throw new Ou($);var e=n;n=t,t=e}return function(){return 0<--n?r=t.apply(this,arguments):t=null,r}}function $e(n,t){var r=x;if(2<arguments.length)var e=Rr(arguments,2),u=g(e,$e.placeholder),r=r|R;return Yr(n,r,t,e,u)}function Be(n,t){var r=x|A;
if(2<arguments.length)var e=Rr(arguments,2),u=g(e,Be.placeholder),r=r|R;return Yr(t,r,n,e,u)}function ze(n,t,r){return r&&ue(n,t,r)&&(t=null),n=Yr(n,k,null,null,null,null,null,t),n.placeholder=ze.placeholder,n}function De(n,t,r){return r&&ue(n,t,r)&&(t=null),n=Yr(n,E,null,null,null,null,null,t),n.placeholder=De.placeholder,n}function Me(n,t,r){function e(){var r=t-(To()-c);0>=r||r>t?(f&&qu(f),r=p,f=s=p=w,r&&(h=To(),a=n.apply(l,i),s||f||(i=l=null))):s=Gu(e,r)}function u(){s&&qu(s),f=s=p=w,(g||_!==t)&&(h=To(),a=n.apply(l,i),s||f||(i=l=null))
}function o(){if(i=arguments,c=To(),l=this,p=g&&(s||!v),false===_)var r=v&&!s;else{f||v||(h=c);var o=_-(c-h),y=0>=o||o>_;y?(f&&(f=qu(f)),h=c,a=n.apply(l,i)):f||(f=Gu(u,o))}return y&&s?s=qu(s):s||t===_||(s=Gu(e,t)),r&&(y=true,a=n.apply(l,i)),!y||s||f||(i=l=null),a}var i,f,a,c,l,s,p,h=0,_=false,g=true;if(typeof n!="function")throw new Ou($);if(t=0>t?0:t,true===r)var v=true,g=false;else Xe(r)&&(v=r.leading,_="maxWait"in r&&uo(+r.maxWait||0,t),g="trailing"in r?r.trailing:g);return o.cancel=function(){s&&qu(s),f&&qu(f),f=s=p=w
},o}function qe(){var n=arguments,t=n.length-1;if(0>t)return function(n){return n};if(!qt(n,Je))throw new Ou($);return function(){for(var r=t,e=n[r].apply(this,arguments);r--;)e=n[r].call(this,e);return e}}function Pe(n,t){function r(){var e=r.cache,u=t?t.apply(this,arguments):arguments[0];if(e.has(u))return e.get(u);var o=n.apply(this,arguments);return e.set(u,o),o}if(typeof n!="function"||t&&typeof t!="function")throw new Ou($);return r.cache=new Pe.Cache,r}function Ke(n){var t=Rr(arguments,1),r=g(t,Ke.placeholder);
return Yr(n,R,null,t,r)}function Ve(n){var t=Rr(arguments,1),r=g(t,Ve.placeholder);return Yr(n,I,null,t,r)}function Ye(n){return oe(h(n)?n.length:w)&&Lu.call(n)==z||false}function Ze(n){return n&&1===n.nodeType&&h(n)&&-1<Lu.call(n).indexOf("Element")||false}function Ge(n){return h(n)&&typeof n.message=="string"&&Lu.call(n)==P||false}function Je(n){return typeof n=="function"||false}function Xe(n){var t=typeof n;return"function"==t||n&&"object"==t||false}function He(n){return null==n?false:Lu.call(n)==K?Bu.test(Wu.call(n)):h(n)&&wt.test(n)||false
}function Qe(n){return typeof n=="number"||h(n)&&Lu.call(n)==V||false}function nu(n){return h(n)&&Lu.call(n)==Z||false}function tu(n){return typeof n=="string"||h(n)&&Lu.call(n)==G||false}function ru(n){return h(n)&&oe(n.length)&&Ct[Lu.call(n)]||false}function eu(n){return nr(n,ou(n))}function uu(n){return vr(n,ou(n))}function ou(n){if(null==n)return[];Xe(n)||(n=Eu(n));for(var t=n.length,t=t&&oe(t)&&(So(n)||mo.nonEnumArgs&&Ye(n))&&t||0,r=n.constructor,e=-1,r=typeof r=="function"&&r.prototype===n,u=wu(t),o=0<t;++e<t;)u[e]=e+"";
for(var i in n)o&&ee(i,t)||"constructor"==i&&(r||!Uu.call(n,i))||u.push(i);return u}function iu(n){return Cr(n,Fo(n))}function fu(n){return(n=e(n))&&n.replace(bt,c)}function au(n){return(n=e(n))&&jt.test(n)?n.replace(At,"\\$&"):n}function cu(n,t,r){return r&&ue(n,t,r)&&(t=0),ao(n,t)}function lu(n,t){var r="";if(n=e(n),t=+t,1>t||!n||!ro(t))return r;do t%2&&(r+=n),t=Pu(t/2),n+=n;while(t);return r}function su(n,t,r){var u=n;return(n=e(n))?(r?ue(u,t,r):null==t)?n.slice(v(n),y(n)+1):(t+="",n.slice(o(n,t),i(n,t)+1)):n
}function pu(n,t,r){return r&&ue(n,t,r)&&(t=null),n=e(n),n.match(t||Rt)||[]}function hu(n){try{return n.apply(w,Rr(arguments,1))}catch(t){return Ge(t)?t:new xu(t)}}function _u(n,t,r){return r&&ue(n,t,r)&&(t=null),h(n)?yu(n):tr(n,t)}function gu(n){return function(){return n}}function vu(n){return n}function yu(n){return br(rr(n,true))}function du(n,t,r){if(null==r){var e=Xe(t),u=e&&Fo(t);((u=u&&u.length&&vr(t,u))?u.length:e)||(u=false,r=t,t=n,n=this)}u||(u=vr(t,Fo(t)));var o=true,e=-1,i=Je(n),f=u.length;
!1===r?o=false:Xe(r)&&"chain"in r&&(o=r.chain);for(;++e<f;){r=u[e];var a=t[r];n[r]=a,i&&(n.prototype[r]=function(t){return function(){var r=this.__chain__;if(o||r){var e=n(this.__wrapped__);return(e.__actions__=zt(this.__actions__)).push({func:t,args:arguments,thisArg:n}),e.__chain__=r,e}return r=[this.value()],Vu.apply(r,arguments),t.apply(n,r)}}(a))}return n}function mu(){}_=_?Dt.defaults($t.Object(),_,Dt.pick($t,Ot)):$t;var wu=_.Array,bu=_.Date,xu=_.Error,Au=_.Function,ju=_.Math,ku=_.Number,Eu=_.Object,Ru=_.RegExp,Iu=_.String,Ou=_.TypeError,Cu=wu.prototype,Tu=Eu.prototype,Su=(Su=_.window)&&Su.document,Wu=Au.prototype.toString,Nu=jr("length"),Uu=Tu.hasOwnProperty,Fu=0,Lu=Tu.toString,$u=_._,Bu=Ru("^"+au(Lu).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zu=He(zu=_.ArrayBuffer)&&zu,Du=He(Du=zu&&new zu(0).slice)&&Du,Mu=ju.ceil,qu=_.clearTimeout,Pu=ju.floor,Ku=He(Ku=Eu.getPrototypeOf)&&Ku,Vu=Cu.push,Yu=Tu.propertyIsEnumerable,Zu=He(Zu=_.Set)&&Zu,Gu=_.setTimeout,Ju=Cu.splice,Xu=He(Xu=_.Uint8Array)&&Xu,Hu=He(Hu=_.WeakMap)&&Hu,Qu=function(){try{var n=He(n=_.Float64Array)&&n,t=new n(new zu(10),0,1)&&n
}catch(r){}return t}(),no=He(no=wu.isArray)&&no,to=He(to=Eu.create)&&to,ro=_.isFinite,eo=He(eo=Eu.keys)&&eo,uo=ju.max,oo=ju.min,io=He(io=bu.now)&&io,fo=He(fo=ku.isFinite)&&fo,ao=_.parseInt,co=ju.random,lo=ku.NEGATIVE_INFINITY,so=ku.POSITIVE_INFINITY,po=ju.pow(2,32)-1,ho=po-1,_o=po>>>1,go=Qu?Qu.BYTES_PER_ELEMENT:0,vo=ju.pow(2,53)-1,yo=Hu&&new Hu,mo=Wt.support={};!function(n){mo.funcDecomp=!He(_.WinRTError)&&kt.test(m),mo.funcNames=typeof Au.name=="string";try{mo.dom=11===Su.createDocumentFragment().nodeType
}catch(t){mo.dom=false}try{mo.nonEnumArgs=!Yu.call(arguments,1)}catch(r){mo.nonEnumArgs=true}}(0,0),Wt.templateSettings={escape:ht,evaluate:_t,interpolate:gt,variable:"",imports:{_:Wt}};var wo=function(){function n(){}return function(t){if(Xe(t)){n.prototype=t;var r=new n;n.prototype=null}return r||_.Object()}}(),bo=yo?function(n,t){return yo.set(n,t),n}:vu;Du||(Ur=zu&&Xu?function(n){var t=n.byteLength,r=Qu?Pu(t/go):0,e=r*go,u=new zu(t);if(r){var o=new Qu(u,0,r);o.set(new Qu(n,0,r))}return t!=e&&(o=new Xu(u,e),o.set(new Xu(n,e))),u
}:gu(null));var xo=to&&Zu?function(n){return new Lt(n)}:gu(null),Ao=yo?function(n){return yo.get(n)}:mu,jo=function(){var n=0,t=0;return function(r,e){var u=To(),o=N-(u-t);if(t=u,0<o){if(++n>=W)return r}else n=0;return bo(r,e)}}(),ko=$r(function(n,t,r){Uu.call(n,r)?++n[r]:n[r]=1}),Eo=$r(function(n,t,r){Uu.call(n,r)?n[r].push(t):n[r]=[t]}),Ro=$r(function(n,t,r){n[r]=t}),Io=qr(Vt),Oo=qr(function(n){for(var t=-1,r=n.length,e=so;++t<r;){var u=n[t];u<e&&(e=u)}return e},true),Co=$r(function(n,t,r){n[r?0:1].push(t)
},function(){return[[],[]]}),To=io||function(){return(new bu).getTime()},So=no||function(n){return h(n)&&oe(n.length)&&Lu.call(n)==D||false};mo.dom||(Ze=function(n){return n&&1===n.nodeType&&h(n)&&!No(n)||false});var Wo=fo||function(n){return typeof n=="number"&&ro(n)};(Je(/x/)||Xu&&!Je(Xu))&&(Je=function(n){return Lu.call(n)==K});var No=Ku?function(n){if(!n||Lu.call(n)!=Y)return false;var t=n.valueOf,r=He(t)&&(r=Ku(t))&&Ku(r);return r?n==r||Ku(n)==r:ce(n)}:ce,Uo=Br(Ht),Fo=eo?function(n){if(n)var t=n.constructor,r=n.length;
return typeof t=="function"&&t.prototype===n||typeof n!="function"&&r&&oe(r)?le(n):Xe(n)?eo(n):[]}:le,Lo=Br(Ar),$o=Dr(function(n,t,r){return t=t.toLowerCase(),n+(r?t.charAt(0).toUpperCase()+t.slice(1):t)}),Bo=Dr(function(n,t,r){return n+(r?"-":"")+t.toLowerCase()});8!=ao(It+"08")&&(cu=function(n,t,r){return(r?ue(n,t,r):null==t)?t=0:t&&(t=+t),n=su(n),ao(n,t||(mt.test(n)?16:10))});var zo=Dr(function(n,t,r){return n+(r?"_":"")+t.toLowerCase()}),Do=Dr(function(n,t,r){return n+(r?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))
});return Nt.prototype=wo(Wt.prototype),Ut.prototype=wo(Nt.prototype),Ut.prototype.constructor=Ut,Ft.prototype["delete"]=function(n){return this.has(n)&&delete this.__data__[n]},Ft.prototype.get=function(n){return"__proto__"==n?w:this.__data__[n]},Ft.prototype.has=function(n){return"__proto__"!=n&&Uu.call(this.__data__,n)},Ft.prototype.set=function(n,t){return"__proto__"!=n&&(this.__data__[n]=t),this},Lt.prototype.push=function(n){var t=this.data;typeof n=="string"||Xe(n)?t.set.add(n):t.hash[n]=true
},Pe.Cache=Ft,Wt.after=function(n,t){if(typeof t!="function"){if(typeof n!="function")throw new Ou($);var r=n;n=t,t=r}return n=ro(n=+n)?n:0,function(){return 1>--n?t.apply(this,arguments):void 0}},Wt.ary=function(n,t,r){return r&&ue(n,t,r)&&(t=null),t=n&&null==t?n.length:uo(+t||0,0),Yr(n,C,null,null,null,null,t)},Wt.assign=Uo,Wt.at=function(n){return oe(n?n.length:0)&&(n=se(n)),Qt(n,lr(arguments,false,false,1))},Wt.before=Le,Wt.bind=$e,Wt.bindAll=function(n){for(var t=n,r=1<arguments.length?lr(arguments,false,false,1):uu(n),e=-1,u=r.length;++e<u;){var o=r[e];
t[o]=Yr(t[o],x,t)}return t},Wt.bindKey=Be,Wt.callback=_u,Wt.chain=Ae,Wt.chunk=function(n,t,r){t=(r?ue(n,t,r):null==t)?1:uo(+t||1,1),r=0;for(var e=n?n.length:0,u=-1,o=wu(Mu(e/t));r<e;)o[++u]=Rr(n,r,r+=t);return o},Wt.compact=function(n){for(var t=-1,r=n?n.length:0,e=-1,u=[];++t<r;){var o=n[t];o&&(u[++e]=o)}return u},Wt.constant=gu,Wt.countBy=ko,Wt.create=function(n,t,r){var e=wo(n);return r&&ue(n,t,r)&&(t=null),t?nr(t,e,Fo(t)):e},Wt.curry=ze,Wt.curryRight=De,Wt.debounce=Me,Wt.defaults=function(n){if(null==n)return n;
var t=zt(arguments);return t.push(Jt),Uo.apply(w,t)},Wt.defer=function(n){return er(n,1,arguments,1)},Wt.delay=function(n,t){return er(n,t,arguments,2)},Wt.difference=function(){for(var n=-1,t=arguments.length;++n<t;){var r=arguments[n];if(So(r)||Ye(r))break}return ur(r,lr(arguments,false,true,++n))},Wt.drop=_e,Wt.dropRight=ge,Wt.dropRightWhile=function(n,t,r){var e=n?n.length:0;if(!e)return[];for(t=Hr(t,r,3);e--&&t(n[e],e,n););return Rr(n,0,e+1)},Wt.dropWhile=function(n,t,r){var e=n?n.length:0;if(!e)return[];
var u=-1;for(t=Hr(t,r,3);++u<e&&t(n[u],u,n););return Rr(n,u)},Wt.fill=function(n,t,r,e){var u=n?n.length:0;if(!u)return[];for(r&&typeof r!="number"&&ue(n,t,r)&&(r=0,e=u),u=n.length,r=null==r?0:+r||0,0>r&&(r=-r>u?0:u+r),e=typeof e=="undefined"||e>u?u:+e||0,0>e&&(e+=u),u=r>e?0:e>>>0,r>>>=0;r<u;)n[r++]=t;return n},Wt.filter=Re,Wt.flatten=function(n,t,r){var e=n?n.length:0;return r&&ue(n,t,r)&&(t=false),e?lr(n,t):[]},Wt.flattenDeep=function(n){return n&&n.length?lr(n,true):[]},Wt.flow=function(){var n=arguments,t=n.length;
if(!t)return function(n){return n};if(!qt(n,Je))throw new Ou($);return function(){for(var r=0,e=n[r].apply(this,arguments);++r<t;)e=n[r].call(this,e);return e}},Wt.flowRight=qe,Wt.forEach=Oe,Wt.forEachRight=Ce,Wt.forIn=function(n,t,r){return(typeof t!="function"||typeof r!="undefined")&&(t=Nr(t,r,3)),sr(n,t,ou)},Wt.forInRight=function(n,t,r){return t=Nr(t,r,3),pr(n,t,ou)},Wt.forOwn=function(n,t,r){return(typeof t!="function"||typeof r!="undefined")&&(t=Nr(t,r,3)),_r(n,t)},Wt.forOwnRight=function(n,t,r){return t=Nr(t,r,3),pr(n,t,Fo)
},Wt.functions=uu,Wt.groupBy=Eo,Wt.indexBy=Ro,Wt.initial=function(n){return ge(n,1)},Wt.intersection=function(){for(var n=[],r=-1,e=arguments.length,u=[],o=Qr(),i=o==t;++r<e;){var f=arguments[r];(So(f)||Ye(f))&&(n.push(f),u.push(i&&120<=f.length&&xo(r&&f)))}var e=n.length,i=n[0],a=-1,c=i?i.length:0,l=[],s=u[0];n:for(;++a<c;)if(f=i[a],0>(s?Bt(s,f):o(l,f))){for(r=e;--r;){var p=u[r];if(0>(p?Bt(p,f):o(n[r],f)))continue n}s&&s.push(f),l.push(f)}return l},Wt.invert=function(n,t,r){r&&ue(n,t,r)&&(t=null),r=-1;
for(var e=Fo(n),u=e.length,o={};++r<u;){var i=e[r],f=n[i];t?Uu.call(o,f)?o[f].push(i):o[f]=[i]:o[f]=i}return o},Wt.invoke=function(n,t){return yr(n,t,Rr(arguments,2))},Wt.keys=Fo,Wt.keysIn=ou,Wt.map=Te,Wt.mapValues=function(n,t,r){var e={};return t=Hr(t,r,3),_r(n,function(n,r,u){e[r]=t(n,r,u)}),e},Wt.matches=yu,Wt.matchesProperty=function(n,t){return xr(n+"",rr(t,true))},Wt.memoize=Pe,Wt.merge=Lo,Wt.mixin=du,Wt.negate=function(n){if(typeof n!="function")throw new Ou($);return function(){return!n.apply(this,arguments)
}},Wt.omit=function(n,t,r){if(null==n)return{};if(typeof t!="function"){var e=Kt(lr(arguments,false,false,1),Iu);return fe(n,ur(ou(n),e))}return t=Nr(t,r,3),ae(n,function(n,r,e){return!t(n,r,e)})},Wt.once=function(n){return Le(n,2)},Wt.pairs=function(n){for(var t=-1,r=Fo(n),e=r.length,u=wu(e);++t<e;){var o=r[t];u[t]=[o,n[o]]}return u},Wt.partial=Ke,Wt.partialRight=Ve,Wt.partition=Co,Wt.pick=function(n,t,r){return null==n?{}:typeof t=="function"?ae(n,Nr(t,r,3)):fe(n,lr(arguments,false,false,1))},Wt.pluck=function(n,t){return Te(n,jr(t))
},Wt.property=function(n){return jr(n+"")},Wt.propertyOf=function(n){return function(t){return null==n?w:n[t]}},Wt.pull=function(){var n=arguments[0];if(!n||!n.length)return n;for(var t=0,r=Qr(),e=arguments.length;++t<e;)for(var u=0,o=arguments[t];-1<(u=r(n,o,u));)Ju.call(n,u,1);return n},Wt.pullAt=function(t){var r=t||[],e=lr(arguments,false,false,1),u=e.length,o=Qt(r,e);for(e.sort(n);u--;){var i=parseFloat(e[u]);if(i!=f&&ee(i)){var f=i;Ju.call(r,i,1)}}return o},Wt.range=function(n,t,r){r&&ue(n,t,r)&&(t=r=null),n=+n||0,r=null==r?1:+r||0,null==t?(t=n,n=0):t=+t||0;
var e=-1;t=uo(Mu((t-n)/(r||1)),0);for(var u=wu(t);++e<t;)u[e]=n,n+=r;return u},Wt.rearg=function(n){var t=lr(arguments,false,false,1);return Yr(n,O,null,null,null,t)},Wt.reject=function(n,t,r){var e=So(n)?Pt:ar;return t=Hr(t,r,3),e(n,function(n,r,e){return!t(n,r,e)})},Wt.remove=function(n,t,r){var e=-1,u=n?n.length:0,o=[];for(t=Hr(t,r,3);++e<u;)r=n[e],t(r,e,n)&&(o.push(r),Ju.call(n,e--,1),u--);return o},Wt.rest=me,Wt.shuffle=Ue,Wt.slice=function(n,t,r){var e=n?n.length:0;return e?(r&&typeof r!="number"&&ue(n,t,r)&&(t=0,r=e),Rr(n,t,r)):[]
},Wt.sortBy=function(n,t,e){var u=-1,o=n?n.length:0,i=oe(o)?wu(o):[];return e&&ue(n,t,e)&&(t=null),t=Hr(t,e,3),or(n,function(n,r,e){i[++u]={a:t(n,r,e),b:u,c:n}}),r(i,f)},Wt.sortByAll=function(n){var t=arguments;3<t.length&&ue(t[1],t[2],t[3])&&(t=[n,t[1]]);var e=-1,u=n?n.length:0,o=lr(t,false,false,1),i=oe(u)?wu(u):[];return or(n,function(n){for(var t=o.length,r=wu(t);t--;)r[t]=null==n?w:n[o[t]];i[++e]={a:r,b:e,c:n}}),r(i,a)},Wt.spread=function(n){if(typeof n!="function")throw new Ou($);return function(t){return n.apply(this,t)
}},Wt.take=function(n,t,r){return n&&n.length?((r?ue(n,t,r):null==t)&&(t=1),Rr(n,0,0>t?0:t)):[]},Wt.takeRight=function(n,t,r){var e=n?n.length:0;return e?((r?ue(n,t,r):null==t)&&(t=1),t=e-(+t||0),Rr(n,0>t?0:t)):[]},Wt.takeRightWhile=function(n,t,r){var e=n?n.length:0;if(!e)return[];for(t=Hr(t,r,3);e--&&t(n[e],e,n););return Rr(n,e+1)},Wt.takeWhile=function(n,t,r){var e=n?n.length:0;if(!e)return[];var u=-1;for(t=Hr(t,r,3);++u<e&&t(n[u],u,n););return Rr(n,0,u)},Wt.tap=function(n,t,r){return t.call(r,n),n
},Wt.throttle=function(n,t,r){var e=true,u=true;if(typeof n!="function")throw new Ou($);return false===r?e=false:Xe(r)&&(e="leading"in r?!!r.leading:e,u="trailing"in r?!!r.trailing:u),St.leading=e,St.maxWait=+t,St.trailing=u,Me(n,t,St)},Wt.thru=je,Wt.times=function(n,t,r){if(n=+n,1>n||!ro(n))return[];var e=-1,u=wu(oo(n,po));for(t=Nr(t,r,1);++e<n;)e<po?u[e]=t(e):t(e);return u},Wt.toArray=function(n){var t=n?n.length:0;return oe(t)?t?zt(n):[]:iu(n)},Wt.toPlainObject=eu,Wt.transform=function(n,t,r,e){var u=So(n)||ru(n);
return t=Hr(t,e,4),null==r&&(u||Xe(n)?(e=n.constructor,r=u?So(n)?new e:[]:wo(Je(e)&&e.prototype)):r={}),(u?Mt:_r)(n,function(n,e,u){return t(r,n,e,u)}),r},Wt.union=function(){return Or(lr(arguments,false,true))},Wt.uniq=we,Wt.unzip=be,Wt.values=iu,Wt.valuesIn=function(n){return Cr(n,ou(n))},Wt.where=function(n,t){return Re(n,br(t))},Wt.without=function(n){return ur(n,Rr(arguments,1))},Wt.wrap=function(n,t){return t=null==t?vu:t,Yr(t,R,null,[n],[])},Wt.xor=function(){for(var n=-1,t=arguments.length;++n<t;){var r=arguments[n];
if(So(r)||Ye(r))var e=e?ur(e,r).concat(ur(r,e)):r}return e?Or(e):[]},Wt.zip=function(){for(var n=arguments.length,t=wu(n);n--;)t[n]=arguments[n];return be(t)},Wt.zipObject=xe,Wt.backflow=qe,Wt.collect=Te,Wt.compose=qe,Wt.each=Oe,Wt.eachRight=Ce,Wt.extend=Uo,Wt.iteratee=_u,Wt.methods=uu,Wt.object=xe,Wt.select=Re,Wt.tail=me,Wt.unique=we,du(Wt,Wt),Wt.attempt=hu,Wt.camelCase=$o,Wt.capitalize=function(n){return(n=e(n))&&n.charAt(0).toUpperCase()+n.slice(1)},Wt.clone=function(n,t,r,e){return typeof t!="boolean"&&null!=t&&(e=r,r=ue(n,t,e)?null:t,t=false),r=typeof r=="function"&&Nr(r,e,1),rr(n,t,r)
},Wt.cloneDeep=function(n,t,r){return t=typeof t=="function"&&Nr(t,r,1),rr(n,true,t)},Wt.deburr=fu,Wt.endsWith=function(n,t,r){n=e(n),t+="";var u=n.length;return r=(typeof r=="undefined"?u:oo(0>r?0:+r||0,u))-t.length,0<=r&&n.indexOf(t,r)==r},Wt.escape=function(n){return(n=e(n))&&pt.test(n)?n.replace(lt,l):n},Wt.escapeRegExp=au,Wt.every=Ee,Wt.find=Ie,Wt.findIndex=ve,Wt.findKey=function(n,t,r){return t=Hr(t,r,3),cr(n,t,_r,true)},Wt.findLast=function(n,t,r){return t=Hr(t,r,3),cr(n,t,ir)},Wt.findLastIndex=function(n,t,r){var e=n?n.length:0;
for(t=Hr(t,r,3);e--;)if(t(n[e],e,n))return e;return-1},Wt.findLastKey=function(n,t,r){return t=Hr(t,r,3),cr(n,t,gr,true)},Wt.findWhere=function(n,t){return Ie(n,br(t))},Wt.first=ye,Wt.has=function(n,t){return n?Uu.call(n,t):false},Wt.identity=vu,Wt.includes=ke,Wt.indexOf=de,Wt.isArguments=Ye,Wt.isArray=So,Wt.isBoolean=function(n){return true===n||false===n||h(n)&&Lu.call(n)==M||false},Wt.isDate=function(n){return h(n)&&Lu.call(n)==q||false},Wt.isElement=Ze,Wt.isEmpty=function(n){if(null==n)return true;var t=n.length;
return oe(t)&&(So(n)||tu(n)||Ye(n)||h(n)&&Je(n.splice))?!t:!Fo(n).length},Wt.isEqual=function(n,t,r,e){return r=typeof r=="function"&&Nr(r,e,3),!r&&ie(n)&&ie(t)?n===t:(e=r?r(n,t):w,typeof e=="undefined"?dr(n,t,r):!!e)},Wt.isError=Ge,Wt.isFinite=Wo,Wt.isFunction=Je,Wt.isMatch=function(n,t,r,e){var u=Fo(t),o=u.length;if(r=typeof r=="function"&&Nr(r,e,3),!r&&1==o){var i=u[0];if(e=t[i],ie(e))return null!=n&&e===n[i]&&Uu.call(n,i)}for(var i=wu(o),f=wu(o);o--;)e=i[o]=t[u[o]],f[o]=ie(e);return mr(n,u,i,f,r)
},Wt.isNaN=function(n){return Qe(n)&&n!=+n},Wt.isNative=He,Wt.isNull=function(n){return null===n},Wt.isNumber=Qe,Wt.isObject=Xe,Wt.isPlainObject=No,Wt.isRegExp=nu,Wt.isString=tu,Wt.isTypedArray=ru,Wt.isUndefined=function(n){return typeof n=="undefined"},Wt.kebabCase=Bo,Wt.last=function(n){var t=n?n.length:0;return t?n[t-1]:w},Wt.lastIndexOf=function(n,t,r){var e=n?n.length:0;if(!e)return-1;var u=e;if(typeof r=="number")u=(0>r?uo(e+r,0):oo(r||0,e-1))+1;else if(r)return u=Sr(n,t,true)-1,n=n[u],(t===t?t===n:n!==n)?u:-1;
if(t!==t)return p(n,u,true);for(;u--;)if(n[u]===t)return u;return-1},Wt.max=Io,Wt.min=Oo,Wt.noConflict=function(){return _._=$u,this},Wt.noop=mu,Wt.now=To,Wt.pad=function(n,t,r){n=e(n),t=+t;var u=n.length;return u<t&&ro(t)?(u=(t-u)/2,t=Pu(u),u=Mu(u),r=Kr("",u,r),r.slice(0,t)+n+r):n},Wt.padLeft=function(n,t,r){return(n=e(n))&&Kr(n,t,r)+n},Wt.padRight=function(n,t,r){return(n=e(n))&&n+Kr(n,t,r)},Wt.parseInt=cu,Wt.random=function(n,t,r){r&&ue(n,t,r)&&(t=r=null);var e=null==n,u=null==t;return null==r&&(u&&typeof n=="boolean"?(r=n,n=1):typeof t=="boolean"&&(r=t,u=true)),e&&u&&(t=1,u=false),n=+n||0,u?(t=n,n=0):t=+t||0,r||n%1||t%1?(r=co(),oo(n+r*(t-n+parseFloat("1e-"+((r+"").length-1))),t)):kr(n,t)
},Wt.reduce=Se,Wt.reduceRight=We,Wt.repeat=lu,Wt.result=function(n,t,r){return t=null==n?w:n[t],typeof t=="undefined"&&(t=r),Je(t)?t.call(n):t},Wt.runInContext=m,Wt.size=function(n){var t=n?n.length:0;return oe(t)?t:Fo(n).length},Wt.snakeCase=zo,Wt.some=Fe,Wt.sortedIndex=function(n,t,r,e){var u=Hr(r);return u===tr&&null==r?Sr(n,t):Wr(n,t,u(r,e,1))},Wt.sortedLastIndex=function(n,t,r,e){var u=Hr(r);return u===tr&&null==r?Sr(n,t,true):Wr(n,t,u(r,e,1),true)},Wt.startCase=Do,Wt.startsWith=function(n,t,r){return n=e(n),r=null==r?0:oo(0>r?0:+r||0,n.length),n.lastIndexOf(t,r)==r
},Wt.template=function(n,t,r){var u=Wt.templateSettings;r&&ue(n,t,r)&&(t=r=null),n=e(n),t=Ht(Ht({},r||t),u,Xt),r=Ht(Ht({},t.imports),u.imports,Xt);var o,i,f=Fo(r),a=Cr(r,f),c=0;r=t.interpolate||xt;var l="__p+='";r=Ru((t.escape||xt).source+"|"+r.source+"|"+(r===gt?vt:xt).source+"|"+(t.evaluate||xt).source+"|$","g");var p="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";if(n.replace(r,function(t,r,e,u,f,a){return e||(e=u),l+=n.slice(c,a).replace(Et,s),r&&(o=true,l+="'+__e("+r+")+'"),f&&(i=true,l+="';"+f+";\n__p+='"),e&&(l+="'+((__t=("+e+"))==null?'':__t)+'"),c=a+t.length,t
}),l+="';",(t=t.variable)||(l="with(obj){"+l+"}"),l=(i?l.replace(it,""):l).replace(ft,"$1").replace(at,"$1;"),l="function("+(t||"obj")+"){"+(t?"":"obj||(obj={});")+"var __t,__p=''"+(o?",__e=_.escape":"")+(i?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+l+"return __p}",t=hu(function(){return Au(f,p+"return "+l).apply(w,a)}),t.source=l,Ge(t))throw t;return t},Wt.trim=su,Wt.trimLeft=function(n,t,r){var u=n;return(n=e(n))?n.slice((r?ue(u,t,r):null==t)?v(n):o(n,t+"")):n
},Wt.trimRight=function(n,t,r){var u=n;return(n=e(n))?(r?ue(u,t,r):null==t)?n.slice(0,y(n)+1):n.slice(0,i(n,t+"")+1):n},Wt.trunc=function(n,t,r){r&&ue(n,t,r)&&(t=null);var u=T;if(r=S,null!=t)if(Xe(t)){var o="separator"in t?t.separator:o,u="length"in t?+t.length||0:u;r="omission"in t?e(t.omission):r}else u=+t||0;if(n=e(n),u>=n.length)return n;if(u-=r.length,1>u)return r;if(t=n.slice(0,u),null==o)return t+r;if(nu(o)){if(n.slice(u).search(o)){var i,f=n.slice(0,u);for(o.global||(o=Ru(o.source,(yt.exec(o)||"")+"g")),o.lastIndex=0;n=o.exec(f);)i=n.index;
t=t.slice(0,null==i?u:i)}}else n.indexOf(o,u)!=u&&(o=t.lastIndexOf(o),-1<o&&(t=t.slice(0,o)));return t+r},Wt.unescape=function(n){return(n=e(n))&&st.test(n)?n.replace(ct,d):n},Wt.uniqueId=function(n){var t=++Fu;return e(n)+t},Wt.words=pu,Wt.all=Ee,Wt.any=Fe,Wt.contains=ke,Wt.detect=Ie,Wt.foldl=Se,Wt.foldr=We,Wt.head=ye,Wt.include=ke,Wt.inject=Se,du(Wt,function(){var n={};return _r(Wt,function(t,r){Wt.prototype[r]||(n[r]=t)}),n}(),false),Wt.sample=Ne,Wt.prototype.sample=function(n){return this.__chain__||null!=n?this.thru(function(t){return Ne(t,n)
}):Ne(this.value())},Wt.VERSION=b,Mt("bind bindKey curry curryRight partial partialRight".split(" "),function(n){Wt[n].placeholder=Wt}),Mt(["filter","map","takeWhile"],function(n,t){var r=t==U,e=t==L;Ut.prototype[n]=function(n,u){var o=this.clone(),i=o.__filtered__,f=o.__iteratees__||(o.__iteratees__=[]);return o.__filtered__=i||r||e&&0>o.__dir__,f.push({iteratee:Hr(n,u,3),type:t}),o}}),Mt(["drop","take"],function(n,t){var r="__"+n+"Count__",e=n+"While";Ut.prototype[n]=function(e){e=null==e?1:uo(Pu(e)||0,0);
var u=this.clone();if(u.__filtered__){var o=u[r];u[r]=t?oo(o,e):o+e}else(u.__views__||(u.__views__=[])).push({size:e,type:n+(0>u.__dir__?"Right":"")});return u},Ut.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()},Ut.prototype[n+"RightWhile"]=function(n,t){return this.reverse()[e](n,t).reverse()}}),Mt(["first","last"],function(n,t){var r="take"+(t?"Right":"");Ut.prototype[n]=function(){return this[r](1).value()[0]}}),Mt(["initial","rest"],function(n,t){var r="drop"+(t?"":"Right");
Ut.prototype[n]=function(){return this[r](1)}}),Mt(["pluck","where"],function(n,t){var r=t?"filter":"map",e=t?br:jr;Ut.prototype[n]=function(n){return this[r](e(n))}}),Ut.prototype.compact=function(){return this.filter(vu)},Ut.prototype.dropWhile=function(n,t){var r;return n=Hr(n,t,3),this.filter(function(t,e,u){return r||(r=!n(t,e,u))})},Ut.prototype.reject=function(n,t){return n=Hr(n,t,3),this.filter(function(t,r,e){return!n(t,r,e)})},Ut.prototype.slice=function(n,t){n=null==n?0:+n||0;var r=0>n?this.takeRight(-n):this.drop(n);
return typeof t!="undefined"&&(t=+t||0,r=0>t?r.dropRight(-t):r.take(t-n)),r},Ut.prototype.toArray=function(){return this.drop(0)},_r(Ut.prototype,function(n,t){var r=Wt[t],e=/^(?:first|last)$/.test(t);Wt.prototype[t]=function(){function t(n){return n=[n],Vu.apply(n,o),r.apply(Wt,n)}var u=this.__wrapped__,o=arguments,i=this.__chain__,f=!!this.__actions__.length,a=u instanceof Ut,c=a&&!f;return e&&!i?c?n.call(u):r.call(Wt,this.value()):a||So(u)?(u=n.apply(c?u:new Ut(this),o),e||!f&&!u.__actions__||(u.__actions__||(u.__actions__=[])).push({func:je,args:[t],thisArg:Wt}),new Nt(u,i)):this.thru(t)
}}),Mt("concat join pop push shift sort splice unshift".split(" "),function(n){var t=Cu[n],r=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",e=/^(?:join|pop|shift)$/.test(n);Wt.prototype[n]=function(){var n=arguments;return e&&!this.__chain__?t.apply(this.value(),n):this[r](function(r){return t.apply(r,n)})}}),Ut.prototype.clone=function(){var n=this.__actions__,t=this.__iteratees__,r=this.__views__,e=new Ut(this.__wrapped__);return e.__actions__=n?zt(n):null,e.__dir__=this.__dir__,e.__dropCount__=this.__dropCount__,e.__filtered__=this.__filtered__,e.__iteratees__=t?zt(t):null,e.__takeCount__=this.__takeCount__,e.__views__=r?zt(r):null,e
},Ut.prototype.reverse=function(){if(this.__filtered__){var n=new Ut(this);n.__dir__=-1,n.__filtered__=true}else n=this.clone(),n.__dir__*=-1;return n},Ut.prototype.value=function(){var n=this.__wrapped__.value();if(!So(n))return Tr(n,this.__actions__);var t,r=this.__dir__,e=0>r;t=n.length;for(var u=this.__views__,o=0,i=-1,f=u?u.length:0;++i<f;){var a=u[i],c=a.size;switch(a.type){case"drop":o+=c;break;case"dropRight":t-=c;break;case"take":t=oo(t,o+c);break;case"takeRight":o=uo(o,t-c)}}t={start:o,end:t},i=t.start,f=t.end,t=f-i,u=this.__dropCount__,o=oo(t,this.__takeCount__),e=e?f:i-1,f=(i=this.__iteratees__)?i.length:0,a=0,c=[];
n:for(;t--&&a<o;){for(var e=e+r,l=-1,s=n[e];++l<f;){var p=i[l],h=p.iteratee(s,e,n),p=p.type;if(p==F)s=h;else if(!h){if(p==U)continue n;break n}}u?u--:c[a++]=s}return c},Wt.prototype.chain=function(){return Ae(this)},Wt.prototype.commit=function(){return new Nt(this.value(),this.__chain__)},Wt.prototype.plant=function(n){for(var t,r=this;r instanceof Nt;){var e=he(r);t?u.__wrapped__=e:t=e;var u=e,r=r.__wrapped__}return u.__wrapped__=n,t},Wt.prototype.reverse=function(){var n=this.__wrapped__;return n instanceof Ut?(this.__actions__.length&&(n=new Ut(this)),new Nt(n.reverse(),this.__chain__)):this.thru(function(n){return n.reverse()
})},Wt.prototype.toString=function(){return this.value()+""},Wt.prototype.run=Wt.prototype.toJSON=Wt.prototype.valueOf=Wt.prototype.value=function(){return Tr(this.__wrapped__,this.__actions__)},Wt.prototype.collect=Wt.prototype.map,Wt.prototype.head=Wt.prototype.first,Wt.prototype.select=Wt.prototype.filter,Wt.prototype.tail=Wt.prototype.rest,Wt}var w,b="3.2.0",x=1,A=2,j=4,k=8,E=16,R=32,I=64,O=128,C=256,T=30,S="...",W=150,N=16,U=0,F=1,L=2,$="Expected a function",B="__lodash_placeholder__",z="[object Arguments]",D="[object Array]",M="[object Boolean]",q="[object Date]",P="[object Error]",K="[object Function]",V="[object Number]",Y="[object Object]",Z="[object RegExp]",G="[object String]",J="[object ArrayBuffer]",X="[object Float32Array]",H="[object Float64Array]",Q="[object Int8Array]",nt="[object Int16Array]",tt="[object Int32Array]",rt="[object Uint8Array]",et="[object Uint8ClampedArray]",ut="[object Uint16Array]",ot="[object Uint32Array]",it=/\b__p\+='';/g,ft=/\b(__p\+=)''\+/g,at=/(__e\(.*?\)|\b__t\))\+'';/g,ct=/&(?:amp|lt|gt|quot|#39|#96);/g,lt=/[&<>"'`]/g,st=RegExp(ct.source),pt=RegExp(lt.source),ht=/<%-([\s\S]+?)%>/g,_t=/<%([\s\S]+?)%>/g,gt=/<%=([\s\S]+?)%>/g,vt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,yt=/\w*$/,dt=/^\s*function[ \n\r\t]+\w/,mt=/^0[xX]/,wt=/^\[object .+?Constructor\]$/,bt=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,xt=/($^)/,At=/[.*+?^${}()|[\]\/\\]/g,jt=RegExp(At.source),kt=/\bthis\b/,Et=/['\n\r\u2028\u2029\\]/g,Rt=RegExp("[A-Z\\xc0-\\xd6\\xd8-\\xde]{2,}(?=[A-Z\\xc0-\\xd6\\xd8-\\xde][a-z\\xdf-\\xf6\\xf8-\\xff]+)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+|[A-Z\\xc0-\\xd6\\xd8-\\xde]+|[0-9]+","g"),It=" \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000",Ot="Array ArrayBuffer Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Math Number Object RegExp Set String _ clearTimeout document isFinite parseInt setTimeout TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap window WinRTError".split(" "),Ct={};
Ct[X]=Ct[H]=Ct[Q]=Ct[nt]=Ct[tt]=Ct[rt]=Ct[et]=Ct[ut]=Ct[ot]=true,Ct[z]=Ct[D]=Ct[J]=Ct[M]=Ct[q]=Ct[P]=Ct[K]=Ct["[object Map]"]=Ct[V]=Ct[Y]=Ct[Z]=Ct["[object Set]"]=Ct[G]=Ct["[object WeakMap]"]=false;var Tt={};Tt[z]=Tt[D]=Tt[J]=Tt[M]=Tt[q]=Tt[X]=Tt[H]=Tt[Q]=Tt[nt]=Tt[tt]=Tt[V]=Tt[Y]=Tt[Z]=Tt[G]=Tt[rt]=Tt[et]=Tt[ut]=Tt[ot]=true,Tt[P]=Tt[K]=Tt["[object Map]"]=Tt["[object Set]"]=Tt["[object WeakMap]"]=false;var St={leading:false,maxWait:0,trailing:false},Wt={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss"},Nt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Ut={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Ft={"function":true,object:true},Lt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},$t=Ft[typeof window]&&window!==(this&&this.window)?window:this,Bt=Ft[typeof exports]&&exports&&!exports.nodeType&&exports,Ft=Ft[typeof module]&&module&&!module.nodeType&&module,zt=Bt&&Ft&&typeof global=="object"&&global;
!zt||zt.global!==zt&&zt.window!==zt&&zt.self!==zt||($t=zt);var zt=Ft&&Ft.exports===Bt&&Bt,Dt=m();typeof define=="function"&&typeof define.amd=="object"&&define.amd?($t._=Dt, define(function(){return Dt})):Bt&&Ft?zt?(Ft.exports=Dt)._=Dt:Bt._=Dt:$t._=Dt}).call(this);
angular.module('VirtualBookshelf')
.factory('archive', function (data) {
	var archive = {};

	archive.sendExternalURL = function(externalURL, tags) {
		return data.postCover(externalURL, tags);
	};

	return archive;
});
angular.module('VirtualBookshelf')
.factory('cache', function ($q, $log, data) {
	var cache = {};

	var library = null;
	var sections = {};
	var books = {};
	var images = {};

	cache.init = function(libraryModel, sectionModels, bookModels, covers) {
		var libraryLoad = loadLibraryData(libraryModel);
		var sectionsLoad = [];
		var booksLoad = [];
		var imagesLoad = [];
		var model, coverId; // iterators

		for (model in sectionModels) {
			sectionsLoad.push(addSection(model));
		}

		for (model in bookModels) {
			booksLoad.push(addBook(model));
		}

		for (coverId in covers) {
			imagesLoad.push(addImageByDto(covers[coverId]));
		}

		var promise = $q.all({
			libraryCache: libraryLoad, 
			sectionsLoad: $q.all(sectionsLoad), 
			booksLoad: $q.all(booksLoad),
			imagesLoad: $q.all(imagesLoad)
		}).then(function (results) {
			library = results.libraryCache;
		});

		return promise;
	};

	cache.getLibrary = function() {
		return library;
	};

	cache.getSection = function(model) {
		return commonGetter(sections, model, addSection);
	};

	cache.getBook = function(model) {
		return commonGetter(books, model, addBook);
	};

	cache.getImage = function(id) {
		return commonGetter(images, id, addImageById);
	};

	var addSection = function(model) {
		return commonAdder(sections, model, loadSectionData);
	};

	var addBook = function(model) {
		return commonAdder(books, model, loadBookData);
	};

	var addImageById = function(id) {
		return data.getCover(id).then(function (coverDto) {
			return data.loadImage(coverDto.url).then(function (image) {
				return addImage(coverDto, image);
			});
		}).catch(function () {
			$log.error('Error adding image by id:', id);
			return null;
		});
	};

	var addImageByDto = function(coverDto) {
		return data.loadImage(coverDto.url).then(function (image) {
			return addImage(coverDto, image);
		}).catch(function () {
			$log.error('Error adding image by dto:', coverDto.id);
			return null;
		});
	};

	var addImage = function(dto, image) {
		var loadedCache = {
			dto: dto,
			image: image
		};

		images[dto.id] = loadedCache;
		return loadedCache;
	};

	var commonGetter = function(from, key, addFunction) {
		var result = from[key];

		if(!result) {
			result = addFunction(key);
		}

		return $q.when(result);
	};

	var commonAdder = function(where, what, loader) {
		var promise = loader(what).then(function (loadedCache) {
			where[what] = loadedCache;

			return loadedCache;
		});

		return promise;
	};

	var loadLibraryData = function(model) {
		var path = '/obj/libraries/{model}/'.replace('{model}', model);
        var modelUrl = path + 'model.json';
        var mapUrl = path + 'map.jpg';

        var promise = $q.all({
        	geometry: data.loadGeometry(modelUrl), 
        	mapImage: data.loadImage(mapUrl)
        });

        return promise;
	};

	var loadSectionData = function(model) {
		var path = '/obj/sections/{model}/'.replace('{model}', model);
        var modelUrl = path + 'model.js';
        var mapUrl = path + 'map.jpg';
        var dataUrl = path + 'data.json';

        var promise = $q.all({
        	geometry: data.loadGeometry(modelUrl), 
        	mapImage: data.loadImage(mapUrl), 
        	data: data.getData(dataUrl)
        });

        return promise;
	};

	var loadBookData = function(model) {
		var path = '/obj/books/{model}/'.replace('{model}', model);
        var modelUrl = path + 'model.js';
        var mapUrl = path + 'map.jpg';
        var bumpMapUrl = path + 'bump_map.jpg';
        var specularMapUrl = path + 'specular_map.jpg';

        var promise = $q.all({
        	geometry: data.loadGeometry(modelUrl),
        	mapImage: data.loadImage(mapUrl).catch(function () {
        		$log.error('Cache: Error loading book map:', model);
        		return null;
        	}),
        	bumpMapImage: data.loadImage(bumpMapUrl).catch(function () {
        		$log.error('Cache: Error loading book bumpMap:', model);
        		return null;
        	}),
        	specularMapImage: data.loadImage(specularMapUrl).catch(function () {
        		$log.error('Cache: Error loading book specularMap:', model);
        		return null;
        	})
        });

        return promise;
	};

	return cache;
});
angular.module('VirtualBookshelf')
.factory('camera', function (CameraObject) {
	var camera = {
		HEIGTH: 1.5,
		object: new CameraObject(),
		setParent: function(parent) {
			parent.add(this.object);
		},
		getPosition: function() {
			return this.object.position;
		}
	};

	var init = function() {
		var width = window.innerWidth;
		var height = window.innerHeight;
		
		camera.camera = new THREE.PerspectiveCamera(45, width / height, 0.01, 50);
		camera.object.position = new THREE.Vector3(0, camera.HEIGTH, 0);
		camera.object.rotation.order = 'YXZ';

		var candle = new THREE.PointLight(0x665555, 1.6, 10);
		candle.position.set(0, 0, 0);
		camera.object.add(candle);

		camera.object.add(camera.camera);
	};

	camera.rotate = function(x, y) {
		var newX = this.object.rotation.x + y * 0.0001 || 0;
		var newY = this.object.rotation.y + x * 0.0001 || 0;

		if(newX < 1.57 && newX > -1.57) {	
			this.object.rotation.x = newX;
		}

		this.object.rotation.y = newY;
	};

	camera.go = function(speed) {
		var direction = this.getVector();
		var newPosition = this.object.position.clone();
		newPosition.add(direction.multiplyScalar(speed));

		this.object.move(newPosition);
	};

	camera.getVector = function() {
		var vector = new THREE.Vector3(0, 0, -1);

		return vector.applyEuler(this.object.rotation);
	};

	init();

	return camera;
});
angular.module('VirtualBookshelf')
/* 
 * controls.js is a service for processing not UI(menus) events 
 * like mouse, keyboard, touch or gestures.
 *
 * TODO: remove all busines logic from there and leave only
 * events functionality to make it more similar to usual controller
 */
.factory('controls', function ($q, $log, SelectorMeta, BookObject, ShelfObject, SectionObject, camera, navigation, environment, mouse, selector, preview, block) {
	var controls = {};

	controls.init = function() {
		controls.initListeners();
	};

	controls.initListeners = function() {
		document.addEventListener('mousedown', controls.onMouseDown, false);
		document.addEventListener('mouseup', controls.onMouseUp, false);
		document.addEventListener('mousemove', controls.onMouseMove, false);	
		document.oncontextmenu = function() {return false;};
	};

	controls.update = function() {
		if(!preview.isActive()) {
			if(mouse[3]) {
				camera.rotate(mouse.longX, mouse.longY);
			}
			if(mouse[1] && mouse[3]) {
				camera.go(navigation.BUTTONS_GO_SPEED);
			}
		}
	};

	controls.onMouseDown = function(event) {
		mouse.down(event); 

		if(mouse.isCanvas() && mouse[1] && !mouse[3] && !preview.isActive()) {
			controls.selectObject();
			selector.selectFocused();
		}
	};

	controls.onMouseUp = function(event) {
		mouse.up(event);
		
		if(event.which === 1 && !preview.isActive()) {
			if(selector.isSelectedEditable()) {
				var obj = selector.getSelectedObject();

				if(obj.changed) {
					block.global.start();
					obj.save().catch(function () {
						obj.rollback();
					}).finally(function () {
						block.global.stop();
					});
				}
			}
		}
	};

	controls.onMouseMove = function(event) {
		mouse.move(event);

		if(mouse.isCanvas() && !preview.isActive()) {
			event.preventDefault();

			if(mouse[1] && !mouse[3]) {		
				controls.moveObject();
			} else {
				controls.selectObject();
			}
		}
	};

	//****

	controls.selectObject = function() {
		var
			intersected,
			object;

		if(mouse.isCanvas() && environment.library) {
			//TODO: optimize
			intersected = mouse.getIntersected(environment.library.children, true, [BookObject]);
			if(!intersected) {
				intersected = mouse.getIntersected(environment.library.children, true, [ShelfObject]);
			}
			if(!intersected) {
				intersected = mouse.getIntersected(environment.library.children, true, [SectionObject]);
			}
			if(intersected) {
				object = intersected.object;
			}

			selector.focus(new SelectorMeta(object));
		}
	};

	controls.moveObject = function() {
		var mouseVector;
		var newPosition;
		var parent;
		var selectedObject;

		if(selector.isSelectedEditable()) {
			selectedObject = selector.getSelectedObject();
			mouseVector = camera.getVector();	
			newPosition = selectedObject.position.clone();
			parent = selectedObject.parent;
			parent.localToWorld(newPosition);

			newPosition.x -= (mouseVector.z * mouse.dX + mouseVector.x * mouse.dY) * 0.003;
			newPosition.z -= (-mouseVector.x * mouse.dX + mouseVector.z * mouse.dY) * 0.003;

			parent.worldToLocal(newPosition);
			selectedObject.move(newPosition);
		}
	};

	return controls;	
});
angular.module('VirtualBookshelf')
.factory('data', function ($http, $q) {
	var data = {};

	data.TEXTURE_RESOLUTION = 512;
	data.COVER_MAX_Y = 394;
	data.COVER_FACE_X = 296;

    data.loadImage = function(url) {
        var deffered = $q.defer();
        var img = new Image();
        
        img.crossOrigin = ''; 
        img.src = url;
        
        if(img.complete) {
            deffered.resolve(img);
        }

        img.onload = function () {
            deffered.resolve(img);
        };
        img.onerror = function (error) {
            deffered.reject(error);
        };

        return deffered.promise; 
    };

	data.getCover = function(id) {
		return $http.get('/cover/' + id).then(function (res) {
			return res.data;
		});
	};

    data.postCover = function(externalURL, tags) {
    	var data = {
    		url: externalURL,
    		tags: tags
    	};

    	return $http.post('/cover', data).then(function (res) {
    		return res.data;
    	});
    };

    data.logout = function() {
    	return $http.post('/auth/logout');
    };

	data.getUser = function() {
		return $http.get('/user');
	};

	data.getUserBooks = function(userId) {
		return $http.get('/freeBooks/' + userId).then(function (res) {
			return res.data;
		});
	};

	data.postBook = function(book) {
		return $http.post('/book', book).then(function (res) {
			return res.data;
		});
	};

	data.deleteBook = function(id) {
		return $http({
			method: 'DELETE',
			url: '/book/' + id
		});
	};

	data.getUIData = function() {
		return $http.get('/obj/data.json');
	};

	data.getLibraries = function() {
		return $http.get('/libraries');
	};

	data.getLibrary = function(libraryId) {
		return $http.get('/library/' + libraryId).then(function (res) {
			return res.data;
		});
	};

	data.postLibrary = function(libraryModel) {
        return $http.post('/library/' + libraryModel).then(function (res) {
            return res.data;
        });
	};

	data.getSections = function(libraryId) {
        return $http.get('/sections/' + libraryId).then(function (res) {
            return res.data;
        });
	};

	data.postSection = function(sectionData) {
        return $http.post('/section', sectionData).then(function (res) {
        	return res.data;
        });
	};

	data.deleteSection = function(id) {
		return $http({
			method: 'DELETE',
			url: '/sections/' + id
		});
	};

	data.loadGeometry = function(link) {
        var deffered = $q.defer();
		var jsonLoader = new THREE.JSONLoader();

        //TODO: found no way to reject
		jsonLoader.load(link, function (geometry) {
			geometry.computeBoundingBox();
			deffered.resolve(geometry);
		});

        return deffered.promise;
	};

	data.getData = function(url) {
        return $http.get(url).then(function (res) {
            return res.data;
        });
	};

	data.postFeedback = function(dto) {
        return $http.post('/feedback', dto);
	};

	return data;
});
angular.module('VirtualBookshelf')
.factory('dialog', function (ngDialog) {
	var dialog = {};

	var ERROR = 1;
	var CONFIRM = 2;
	var WARNING = 3;
	var INFO = 4;

	var iconClassMap = {};
	iconClassMap[ERROR] = 'fa-times-circle';
	iconClassMap[CONFIRM] = 'fa-question-circle';
	iconClassMap[WARNING] = 'fa-exclamation-triangle';
	iconClassMap[INFO] = 'fa-info-circle';

	dialog.openError = function(msg) {
		return openDialog(msg, ERROR);
	};

	dialog.openConfirm = function(msg) {
		return openDialog(msg, CONFIRM, true);
	};

	dialog.openWarning = function(msg) {
		return openDialog(msg, WARNING);
	};

	dialog.openInfo = function(msg) {
		return openDialog(msg, INFO);
	};

	var openDialog = function(msg, type, cancelButton) {
		return ngDialog.openConfirm({
			template: '/ui/confirmDialog',
			data: {
				msg: msg,
				iconClass: getIconClass(type),
				cancelButton: cancelButton
			}
		});
	};

	var getIconClass = function(type) {
		return iconClassMap[type];
	};

	return dialog;
});
angular.module('VirtualBookshelf')
.factory('environment', function ($q, $log, $window, LibraryObject, SectionObject, BookObject, BookMaterial, data, camera, cache) {
	var environment = {};

	environment.CLEARANCE = 0.001;
	environment.LIBRARY_CANVAS_ID = 'LIBRARY';
	 
	var libraryDto = null;
	var sections = null;
	var books = null;
	var loaded = false;

	environment.scene = null;
	environment.library = null;

	environment.loadLibrary = function(libraryId) {
		clearScene(); // inits some fields

		var promise = data.getLibrary(libraryId).then(function (dto) {
			var dict = parseLibraryDto(dto);
			
			sections = dict.sections;
			books = dict.books;
			libraryDto = dto;

			return initCache(libraryDto, dict.sections, dict.books);
		}).then(function () {
			createLibrary(libraryDto);
			return createSections(sections);
		}).then(function () {
			return createBooks(books);
		});

		return promise;
	};

	environment.goToLibrary = function(id) {
		if(id) {
			$window.location = '/' + id;
		}
	};

	environment.setLoaded = function(value) {
		loaded = value;
	};

	environment.getLoaded = function() {
		return loaded;
	};

	environment.getBook = function(bookId) {
		return getDictObject(books, bookId);
	};

	environment.getSection = function(sectionId) {
		return getDictObject(sections, sectionId);
	};

	environment.getShelf = function(sectionId, shelfId) {
		var section = environment.getSection(sectionId);
		var shelf = section && section.shelves[shelfId];

		return shelf;
	};

	var getDictObject = function(dict, objectId) {
		var dictItem = dict[objectId];
		var dictObject = dictItem && dictItem.obj;

		return dictObject;
	};

	environment.updateSection = function(dto) {
		if(dto.libraryId == environment.library.id) {
			environment.removeSection(dto.id);
			createSection(dto);
		} else {
			environment.removeSection(dto.id);
		}	
	};

	environment.updateBook = function(dto) {
		var shelf = getBookShelf(dto);

		if(shelf) {
			environment.removeBook(dto.id);
			createBook(dto);
		} else {
			environment.removeBook(dto.id);
		}
	};

	environment.removeBook = function(id) {
		removeObject(books, id);
	};

	environment.removeSection = function(id) {
		removeObject(sections, id);
	};

	var removeObject = function(dict, key) {
		var dictItem = dict[key];
		if(dictItem) {
			delete dict[key];
			
			if(dictItem.obj) {
				dictItem.obj.setParent(null);
			}
		}
	};

	var initCache = function(libraryDto, sectionsDict, booksDict) {
		var libraryModel = libraryDto.model;
		var sectionModels = {};
		var bookModels = {};
		var imageUrls = {};

		for (var sectionId in sectionsDict) {
			var sectionDto = sectionsDict[sectionId].dto;
			sectionModels[sectionDto.model] = true;
		}

		for (var bookId in booksDict) {
			var bookDto = booksDict[bookId].dto;
			bookModels[bookDto.model] = true;

			if(bookDto.cover) {
				imageUrls[bookDto.cover.id] = bookDto.cover;
			}
		}

		return cache.init(libraryModel, sectionModels, bookModels, imageUrls);
	};

	var clearScene = function() {
		environment.library = null;
		sections = {};
		books = {};

		while(environment.scene.children.length > 0) {
			if(environment.scene.children[0].dispose) {
				environment.scene.children[0].dispose();
			}
			environment.scene.remove(environment.scene.children[0]);
		}
	};

	var parseLibraryDto = function(libraryDto) {
		var result = {
			sections: {},
			books: {}
		};

		for(var sectionIndex = libraryDto.sections.length - 1; sectionIndex >= 0; sectionIndex--) {
			var sectionDto = libraryDto.sections[sectionIndex];
			result.sections[sectionDto.id] = {dto: sectionDto};

			for(var bookIndex = sectionDto.books.length - 1; bookIndex >= 0; bookIndex--) {
				var bookDto = sectionDto.books[bookIndex];
				result.books[bookDto.id] = {dto: bookDto};
			}

			delete sectionDto.books;
		}

		delete libraryDto.sections;

		return result;
	};

	var createLibrary = function(libraryDto) {
		var library = null;
		var libraryCache = cache.getLibrary();
        var texture = new THREE.Texture(libraryCache.mapImage);
        var material = new THREE.MeshPhongMaterial({map: texture});

        texture.needsUpdate = true;
		library = new LibraryObject(libraryDto, libraryCache.geometry, material);
		camera.setParent(library);

		environment.scene.add(library);
		environment.library = library;
	};

	var createSections = function(sectionsDict) {
		return createObjects(sectionsDict, createSection);
	};

	var createBooks = function(booksDict) {
		return createObjects(booksDict, createBook);
	};

	var createObjects = function(dict, factory) {
		var results = [];
		var key;

		for(key in dict) {
			results.push(factory(dict[key].dto));
		}

		return $q.all(results);
	};

	var createSection = function(sectionDto) {
		var promise = cache.getSection(sectionDto.model).then(function (sectionCache) {
	        var texture = new THREE.Texture(sectionCache.mapImage);
	        var material = new THREE.MeshPhongMaterial({map: texture});
	        var section;

	        texture.needsUpdate = true;
	        sectionDto.data = sectionCache.data;

	        section = new SectionObject(sectionDto, sectionCache.geometry, material);

			environment.library.add(section);
			addToDict(sections, section);
		});

		return promise;
	};

	var createBook = function(bookDto) {
		var promises = {};
		var promise;

		promises.bookCache = cache.getBook(bookDto.model);
		if(bookDto.coverId) {
			promises.coverCache = cache.getImage(bookDto.coverId);
		}

		promise = $q.all(promises).then(function (results) {
			var bookCache = results.bookCache;
			var coverMapImage = results.coverCache && results.coverCache.image;
			var material = new BookMaterial(bookCache.mapImage, bookCache.bumpMapImage, bookCache.specularMapImage, coverMapImage);
			var book = new BookObject(bookDto, bookCache.geometry, material);

			addToDict(books, book);
			placeBookOnShelf(book);
		});

		return promise;
	};

	var addToDict = function(dict, obj) {
		var dictItem = {
			dto: obj.dataObject,
			obj: obj
		};

		dict[obj.id] = dictItem;
	};

	var getBookShelf = function(bookDto) {
		return environment.getShelf(bookDto.sectionId, bookDto.shelfId);
	};

	var placeBookOnShelf = function(book) {
		var shelf = getBookShelf(book.dataObject);
		shelf.add(book);
	};

	return environment;
});
angular.module('VirtualBookshelf')
.factory('main', function ($log, $q, camera, controls, user, environment, tools, navigation, authorization, block) {	
	var canvas;
	var renderer;
	
	var main = {};

	main.start = function() {
		var winResize;

		if(!Detector.webgl) {
			Detector.addGetWebGLMessage();
		}

		init();
		controls.init();

		winResize = new THREEx.WindowResize(renderer, camera.camera);

		startRenderLoop();

		block.global.start();
		user.load().then(function () {
			return $q.all([environment.loadLibrary(user.getLibrary() || 1), authorization.loadUserData()]);
		}).catch(function (error) {
			$log.error(error);
			//TODO: show error message  
		}).finally(function () {
			environment.setLoaded(true);
			block.global.stop();
		});		
	};

	var init = function() {
		var width = window.innerWidth;
		var height = window.innerHeight;

		canvas = document.getElementById(environment.LIBRARY_CANVAS_ID);
		renderer = new THREE.WebGLRenderer({canvas: canvas, antialias: true});
		renderer.setSize(width, height);

		environment.scene = new THREE.Scene();
		environment.scene.fog = new THREE.Fog(0x000000, 4, 7);
	};

	var startRenderLoop = function() {
		requestAnimationFrame(startRenderLoop);

		controls.update();
		navigation.update();
		tools.update();
		
		renderer.render(environment.scene, camera.camera);
	};

	return main;
});
angular.module('VirtualBookshelf')
.factory('mouse', function (camera, environment) {
	var mouse = {};

	var getWidth = function() {
		return window.innerWidth;
	};

	var getHeight = function() {
		return window.innerHeight;
	};

	var x = null;
	var y = null;
	
	mouse.target = null;
	mouse.dX = null;
	mouse.dY = null;
	mouse.longX = null;
	mouse.longY = null;

	mouse.getTarget = function() {
		return this.target;
	};

	mouse.down = function(event) {
		if(event) {
			this[event.which] = true;
			this.target = event.target;
			x = event.clientX;
			y = event.clientY;
			mouse.longX = getWidth() * 0.5 - x;
			mouse.longY = getHeight() * 0.5 - y;
		}
	};

	mouse.up = function(event) {
		if(event) {
			this[event.which] = false;
			// linux chrome bug fix (when both keys release then both event.which equal 3)
			this[1] = false; 
		}
	};

	mouse.move = function(event) {
		if(event) {
			this.target = event.target;
			mouse.longX = getWidth() * 0.5 - x;
			mouse.longY = getHeight() * 0.5 - y;
			mouse.dX = event.clientX - x;
			mouse.dY = event.clientY - y;
			x = event.clientX;
			y = event.clientY;
		}
	};

	mouse.isCanvas = function() {
		return this.target.id === environment.LIBRARY_CANVAS_ID;
	};

	mouse.isPocketBook = function() {
		return false; //TODO: stub
		// return !!(this.target && this.target.parentNode == UI.menu.inventory.books);
	};

	mouse.getIntersected = function(objects, recursive, searchFor) {
		var
			vector,
			raycaster,
			intersects,
			intersected,
			result,
			i, j;

		result = null;
		vector = getVector();
		raycaster = new THREE.Raycaster(camera.getPosition(), vector);
		intersects = raycaster.intersectObjects(objects, recursive);

		if(searchFor) {
			if(intersects.length) {
				for(i = 0; i < intersects.length; i++) {
					intersected = intersects[i];
					
					for(j = searchFor.length - 1; j >= 0; j--) {
						if(intersected.object instanceof searchFor[j]) {
							result = intersected;
							break;
						}
					}

					if(result) {
						break;
					}
				}
			}		
		} else {
			result = intersects;
		}

		return result;
	};

	var getVector = function() {
		var projector = new THREE.Projector();
		var vector = new THREE.Vector3((x / getWidth()) * 2 - 1, - (y / getHeight()) * 2 + 1, 0.5);
		projector.unprojectVector(vector, camera.camera);
	
		return vector.sub(camera.getPosition()).normalize();
	};

	return mouse;
});
angular.module('VirtualBookshelf')
.factory('navigation', function (camera) {
	var navigation = {};

	navigation.BUTTONS_ROTATE_SPEED = 100;
	navigation.BUTTONS_GO_SPEED = 0.02;

	var state = {
		forward: false,
		backward: false,
		left: false,
		right: false			
	};

	navigation.goStop = function() {
		state.forward = false;
		state.backward = false;
		state.left = false;
		state.right = false;
	};

	navigation.goForward = function() {
		state.forward = true;
	};

	navigation.goBackward = function() {
		state.backward = true;
	};

	navigation.goLeft = function() {
		state.left = true;
	};

	navigation.goRight = function() {
		state.right = true;
	};

	navigation.update = function() {
		if(state.forward) {
			camera.go(navigation.BUTTONS_GO_SPEED);
		} else if(state.backward) {
			camera.go(-navigation.BUTTONS_GO_SPEED);
		} else if(state.left) {
			camera.rotate(navigation.BUTTONS_ROTATE_SPEED, 0);
		} else if(state.right) {
			camera.rotate(-navigation.BUTTONS_ROTATE_SPEED, 0);
		}
	};

	return navigation;
});
angular.module('VirtualBookshelf')
.factory('user', function ($log, data) {
	var user = {};

	var loaded = false;
	var _dataObject = null;
	var _library = null;

	user.load = function() {
		var scope = this;

		return data.getUser().then(function (res) {
			scope.setDataObject(res.data);
			scope.setLibrary();
			loaded = true;

			$log.log('user loaded');
		});
	};

	user.logout = function() {
		return data.logout().then(function () {
			return user.load();
		});
	};

	user.setDataObject = function(dataObject) {
		_dataObject = dataObject;
	};

	user.getLibrary = function() {
		return _library;
	};

	user.setLibrary = function(libraryId) {
		_library = libraryId || window.location.pathname.substring(1);
	};

	user.getId = function() {
		return _dataObject && _dataObject.id;
	};

	user.isAuthorized = function() {
		return Boolean(_dataObject);
	};

	user.isLoaded = function() {
		return loaded;
	};

	return user;
});

/**
 * @author alteredq / http://alteredqualia.com/
 * @author mr.doob / http://mrdoob.com/
 */

var Detector = {

	canvas: !! window.CanvasRenderingContext2D,
	webgl: ( function () { try { var canvas = document.createElement( 'canvas' ); return !! window.WebGLRenderingContext && ( canvas.getContext( 'webgl' ) || canvas.getContext( 'experimental-webgl' ) ); } catch( e ) { return false; } } )(),
	workers: !! window.Worker,
	fileapi: window.File && window.FileReader && window.FileList && window.Blob,

	getWebGLErrorMessage: function () {

		var element = document.createElement( 'div' );
		element.id = 'webgl-error-message';
		element.style.fontFamily = 'monospace';
		element.style.fontSize = '13px';
		element.style.fontWeight = 'normal';
		element.style.textAlign = 'center';
		element.style.background = '#fff';
		element.style.color = '#000';
		element.style.padding = '1.5em';
		element.style.width = '400px';
		element.style.margin = '5em auto 0';

		if ( ! this.webgl ) {

			element.innerHTML = window.WebGLRenderingContext ? [
				'Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />',
				'Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'
			].join( '\n' ) : [
				'Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>',
				'Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'
			].join( '\n' );

		}

		return element;

	},

	addGetWebGLMessage: function ( parameters ) {

		var parent, id, element;

		parameters = parameters || {};

		parent = parameters.parent !== undefined ? parameters.parent : document.body;
		id = parameters.id !== undefined ? parameters.id : 'oldie';

		element = Detector.getWebGLErrorMessage();
		element.id = id;

		parent.appendChild( element );

	}

};
// three.js - http://github.com/mrdoob/three.js
'use strict';var THREE={REVISION:"64"};self.console=self.console||{info:function(){},log:function(){},debug:function(){},warn:function(){},error:function(){}};String.prototype.trim=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")};THREE.extend=function(a,b){if(Object.keys)for(var c=Object.keys(b),d=0,e=c.length;d<e;d++){var f=c[d];Object.defineProperty(a,f,Object.getOwnPropertyDescriptor(b,f))}else for(f in c={}.hasOwnProperty,b)c.call(b,f)&&(a[f]=b[f]);return a};
(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!self.requestAnimationFrame;++c)self.requestAnimationFrame=self[b[c]+"RequestAnimationFrame"],self.cancelAnimationFrame=self[b[c]+"CancelAnimationFrame"]||self[b[c]+"CancelRequestAnimationFrame"];void 0===self.requestAnimationFrame&&void 0!==self.setTimeout&&(self.requestAnimationFrame=function(b){var c=Date.now(),f=Math.max(0,16-(c-a)),h=self.setTimeout(function(){b(c+f)},f);a=c+f;return h});void 0===self.cancelAnimationFrame&&void 0!==
self.clearTimeout&&(self.cancelAnimationFrame=function(a){self.clearTimeout(a)})})();THREE.CullFaceNone=0;THREE.CullFaceBack=1;THREE.CullFaceFront=2;THREE.CullFaceFrontBack=3;THREE.FrontFaceDirectionCW=0;THREE.FrontFaceDirectionCCW=1;THREE.BasicShadowMap=0;THREE.PCFShadowMap=1;THREE.PCFSoftShadowMap=2;THREE.FrontSide=0;THREE.BackSide=1;THREE.DoubleSide=2;THREE.NoShading=0;THREE.FlatShading=1;THREE.SmoothShading=2;THREE.NoColors=0;THREE.FaceColors=1;THREE.VertexColors=2;THREE.NoBlending=0;
THREE.NormalBlending=1;THREE.AdditiveBlending=2;THREE.SubtractiveBlending=3;THREE.MultiplyBlending=4;THREE.CustomBlending=5;THREE.AddEquation=100;THREE.SubtractEquation=101;THREE.ReverseSubtractEquation=102;THREE.ZeroFactor=200;THREE.OneFactor=201;THREE.SrcColorFactor=202;THREE.OneMinusSrcColorFactor=203;THREE.SrcAlphaFactor=204;THREE.OneMinusSrcAlphaFactor=205;THREE.DstAlphaFactor=206;THREE.OneMinusDstAlphaFactor=207;THREE.DstColorFactor=208;THREE.OneMinusDstColorFactor=209;
THREE.SrcAlphaSaturateFactor=210;THREE.MultiplyOperation=0;THREE.MixOperation=1;THREE.AddOperation=2;THREE.UVMapping=function(){};THREE.CubeReflectionMapping=function(){};THREE.CubeRefractionMapping=function(){};THREE.SphericalReflectionMapping=function(){};THREE.SphericalRefractionMapping=function(){};THREE.RepeatWrapping=1E3;THREE.ClampToEdgeWrapping=1001;THREE.MirroredRepeatWrapping=1002;THREE.NearestFilter=1003;THREE.NearestMipMapNearestFilter=1004;THREE.NearestMipMapLinearFilter=1005;
THREE.LinearFilter=1006;THREE.LinearMipMapNearestFilter=1007;THREE.LinearMipMapLinearFilter=1008;THREE.UnsignedByteType=1009;THREE.ByteType=1010;THREE.ShortType=1011;THREE.UnsignedShortType=1012;THREE.IntType=1013;THREE.UnsignedIntType=1014;THREE.FloatType=1015;THREE.UnsignedShort4444Type=1016;THREE.UnsignedShort5551Type=1017;THREE.UnsignedShort565Type=1018;THREE.AlphaFormat=1019;THREE.RGBFormat=1020;THREE.RGBAFormat=1021;THREE.LuminanceFormat=1022;THREE.LuminanceAlphaFormat=1023;
THREE.RGB_S3TC_DXT1_Format=2001;THREE.RGBA_S3TC_DXT1_Format=2002;THREE.RGBA_S3TC_DXT3_Format=2003;THREE.RGBA_S3TC_DXT5_Format=2004;THREE.Color=function(a){void 0!==a&&this.set(a);return this};
THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,set:function(a){a instanceof THREE.Color?this.copy(a):"number"===typeof a?this.setHex(a):"string"===typeof a&&this.setStyle(a);return this},setHex:function(a){a=Math.floor(a);this.r=(a>>16&255)/255;this.g=(a>>8&255)/255;this.b=(a&255)/255;return this},setRGB:function(a,b,c){this.r=a;this.g=b;this.b=c;return this},setHSL:function(a,b,c){if(0===b)this.r=this.g=this.b=c;else{var d=function(a,b,c){0>c&&(c+=1);1<c&&(c-=1);return c<1/6?a+6*(b-a)*
c:0.5>c?b:c<2/3?a+6*(b-a)*(2/3-c):a},b=0.5>=c?c*(1+b):c+b-c*b,c=2*c-b;this.r=d(c,b,a+1/3);this.g=d(c,b,a);this.b=d(c,b,a-1/3)}return this},setStyle:function(a){if(/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(a))return a=/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(a),this.r=Math.min(255,parseInt(a[1],10))/255,this.g=Math.min(255,parseInt(a[2],10))/255,this.b=Math.min(255,parseInt(a[3],10))/255,this;if(/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(a))return a=/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(a),this.r=
Math.min(100,parseInt(a[1],10))/100,this.g=Math.min(100,parseInt(a[2],10))/100,this.b=Math.min(100,parseInt(a[3],10))/100,this;if(/^\#([0-9a-f]{6})$/i.test(a))return a=/^\#([0-9a-f]{6})$/i.exec(a),this.setHex(parseInt(a[1],16)),this;if(/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(a))return a=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(a),this.setHex(parseInt(a[1]+a[1]+a[2]+a[2]+a[3]+a[3],16)),this;if(/^(\w+)$/i.test(a))return this.setHex(THREE.ColorKeywords[a]),this},copy:function(a){this.r=a.r;this.g=
a.g;this.b=a.b;return this},copyGammaToLinear:function(a){this.r=a.r*a.r;this.g=a.g*a.g;this.b=a.b*a.b;return this},copyLinearToGamma:function(a){this.r=Math.sqrt(a.r);this.g=Math.sqrt(a.g);this.b=Math.sqrt(a.b);return this},convertGammaToLinear:function(){var a=this.r,b=this.g,c=this.b;this.r=a*a;this.g=b*b;this.b=c*c;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this},getHex:function(){return 255*this.r<<16^255*this.g<<
8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(a){var a=a||{h:0,s:0,l:0},b=this.r,c=this.g,d=this.b,e=Math.max(b,c,d),f=Math.min(b,c,d),h,g=(f+e)/2;if(f===e)f=h=0;else{var i=e-f,f=0.5>=g?i/(e+f):i/(2-e-f);switch(e){case b:h=(c-d)/i+(c<d?6:0);break;case c:h=(d-b)/i+2;break;case d:h=(b-c)/i+4}h/=6}a.h=h;a.s=f;a.l=g;return a},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(a,
b,c){var d=this.getHSL();d.h+=a;d.s+=b;d.l+=c;this.setHSL(d.h,d.s,d.l);return this},add:function(a){this.r+=a.r;this.g+=a.g;this.b+=a.b;return this},addColors:function(a,b){this.r=a.r+b.r;this.g=a.g+b.g;this.b=a.b+b.b;return this},addScalar:function(a){this.r+=a;this.g+=a;this.b+=a;return this},multiply:function(a){this.r*=a.r;this.g*=a.g;this.b*=a.b;return this},multiplyScalar:function(a){this.r*=a;this.g*=a;this.b*=a;return this},lerp:function(a,b){this.r+=(a.r-this.r)*b;this.g+=(a.g-this.g)*b;
this.b+=(a.b-this.b)*b;return this},equals:function(a){return a.r===this.r&&a.g===this.g&&a.b===this.b},fromArray:function(a){this.r=a[0];this.g=a[1];this.b=a[2];return this},toArray:function(){return[this.r,this.g,this.b]},clone:function(){return(new THREE.Color).setRGB(this.r,this.g,this.b)}};
THREE.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,
darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,
grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,
lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,
palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,
tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};THREE.Quaternion=function(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._w=void 0!==d?d:1};
THREE.Quaternion.prototype={constructor:THREE.Quaternion,_x:0,_y:0,_z:0,_w:0,_euler:void 0,_updateEuler:function(){void 0!==this._euler&&this._euler.setFromQuaternion(this,void 0,!1)},get x(){return this._x},set x(a){this._x=a;this._updateEuler()},get y(){return this._y},set y(a){this._y=a;this._updateEuler()},get z(){return this._z},set z(a){this._z=a;this._updateEuler()},get w(){return this._w},set w(a){this._w=a;this._updateEuler()},set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._w=d;
this._updateEuler();return this},copy:function(a){this._x=a._x;this._y=a._y;this._z=a._z;this._w=a._w;this._updateEuler();return this},setFromEuler:function(a,b){if(!1===a instanceof THREE.Euler)throw Error("ERROR: Quaternion's .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code.");var c=Math.cos(a._x/2),d=Math.cos(a._y/2),e=Math.cos(a._z/2),f=Math.sin(a._x/2),h=Math.sin(a._y/2),g=Math.sin(a._z/2);"XYZ"===a.order?(this._x=f*d*e+c*h*g,this._y=c*h*
e-f*d*g,this._z=c*d*g+f*h*e,this._w=c*d*e-f*h*g):"YXZ"===a.order?(this._x=f*d*e+c*h*g,this._y=c*h*e-f*d*g,this._z=c*d*g-f*h*e,this._w=c*d*e+f*h*g):"ZXY"===a.order?(this._x=f*d*e-c*h*g,this._y=c*h*e+f*d*g,this._z=c*d*g+f*h*e,this._w=c*d*e-f*h*g):"ZYX"===a.order?(this._x=f*d*e-c*h*g,this._y=c*h*e+f*d*g,this._z=c*d*g-f*h*e,this._w=c*d*e+f*h*g):"YZX"===a.order?(this._x=f*d*e+c*h*g,this._y=c*h*e+f*d*g,this._z=c*d*g-f*h*e,this._w=c*d*e-f*h*g):"XZY"===a.order&&(this._x=f*d*e-c*h*g,this._y=c*h*e-f*d*g,this._z=
c*d*g+f*h*e,this._w=c*d*e+f*h*g);!1!==b&&this._updateEuler();return this},setFromAxisAngle:function(a,b){var c=b/2,d=Math.sin(c);this._x=a.x*d;this._y=a.y*d;this._z=a.z*d;this._w=Math.cos(c);this._updateEuler();return this},setFromRotationMatrix:function(a){var b=a.elements,c=b[0],a=b[4],d=b[8],e=b[1],f=b[5],h=b[9],g=b[2],i=b[6],b=b[10],k=c+f+b;0<k?(c=0.5/Math.sqrt(k+1),this._w=0.25/c,this._x=(i-h)*c,this._y=(d-g)*c,this._z=(e-a)*c):c>f&&c>b?(c=2*Math.sqrt(1+c-f-b),this._w=(i-h)/c,this._x=0.25*c,
this._y=(a+e)/c,this._z=(d+g)/c):f>b?(c=2*Math.sqrt(1+f-c-b),this._w=(d-g)/c,this._x=(a+e)/c,this._y=0.25*c,this._z=(h+i)/c):(c=2*Math.sqrt(1+b-c-f),this._w=(e-a)/c,this._x=(d+g)/c,this._y=(h+i)/c,this._z=0.25*c);this._updateEuler();return this},inverse:function(){this.conjugate().normalize();return this},conjugate:function(){this._x*=-1;this._y*=-1;this._z*=-1;this._updateEuler();return this},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*
this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a);return this},multiply:function(a,b){return void 0!==b?(console.warn("DEPRECATED: Quaternion's .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,b)):this.multiplyQuaternions(this,a)},multiplyQuaternions:function(a,b){var c=a._x,d=a._y,e=a._z,f=
a._w,h=b._x,g=b._y,i=b._z,k=b._w;this._x=c*k+f*h+d*i-e*g;this._y=d*k+f*g+e*h-c*i;this._z=e*k+f*i+c*g-d*h;this._w=f*k-c*h-d*g-e*i;this._updateEuler();return this},multiplyVector3:function(a){console.warn("DEPRECATED: Quaternion's .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return a.applyQuaternion(this)},slerp:function(a,b){var c=this._x,d=this._y,e=this._z,f=this._w,h=f*a._w+c*a._x+d*a._y+e*a._z;0>h?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=
-a._z,h=-h):this.copy(a);if(1<=h)return this._w=f,this._x=c,this._y=d,this._z=e,this;var g=Math.acos(h),i=Math.sqrt(1-h*h);if(0.001>Math.abs(i))return this._w=0.5*(f+this._w),this._x=0.5*(c+this._x),this._y=0.5*(d+this._y),this._z=0.5*(e+this._z),this;h=Math.sin((1-b)*g)/i;g=Math.sin(b*g)/i;this._w=f*h+this._w*g;this._x=c*h+this._x*g;this._y=d*h+this._y*g;this._z=e*h+this._z*g;this._updateEuler();return this},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},
fromArray:function(a){this._x=a[0];this._y=a[1];this._z=a[2];this._w=a[3];this._updateEuler();return this},toArray:function(){return[this._x,this._y,this._z,this._w]},clone:function(){return new THREE.Quaternion(this._x,this._y,this._z,this._w)}};THREE.Quaternion.slerp=function(a,b,c,d){return c.copy(a).slerp(b,d)};THREE.Vector2=function(a,b){this.x=a||0;this.y=b||0};
THREE.Vector2.prototype={constructor:THREE.Vector2,set:function(a,b){this.x=a;this.y=b;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+a);}},copy:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,
b){if(void 0!==b)return console.warn("DEPRECATED: Vector2's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},addScalar:function(a){this.x+=a;this.y+=a;return this},sub:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector2's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=
a.y;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a):this.y=this.x=0;return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);
return this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,a=this.y-a.y;return b*b+a*a},setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/
b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},equals:function(a){return a.x===this.x&&a.y===this.y},fromArray:function(a){this.x=a[0];this.y=a[1];return this},toArray:function(){return[this.x,this.y]},clone:function(){return new THREE.Vector2(this.x,this.y)}};THREE.Vector3=function(a,b,c){this.x=a||0;this.y=b||0;this.z=c||0};
THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(a,b,c){this.x=a;this.y=b;this.z=c;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+
a);}},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector3's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},sub:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector3's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},multiply:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector3's .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,b);this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;return this},multiplyVectors:function(a,b){this.x=a.x*
b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this},applyMatrix3:function(a){var b=this.x,c=this.y,d=this.z,a=a.elements;this.x=a[0]*b+a[3]*c+a[6]*d;this.y=a[1]*b+a[4]*c+a[7]*d;this.z=a[2]*b+a[5]*c+a[8]*d;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z,a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12];this.y=a[1]*b+a[5]*c+a[9]*d+a[13];this.z=a[2]*b+a[6]*c+a[10]*d+a[14];return this},applyProjection:function(a){var b=this.x,c=this.y,d=this.z,a=a.elements,e=1/(a[3]*b+a[7]*c+a[11]*d+a[15]);
this.x=(a[0]*b+a[4]*c+a[8]*d+a[12])*e;this.y=(a[1]*b+a[5]*c+a[9]*d+a[13])*e;this.z=(a[2]*b+a[6]*c+a[10]*d+a[14])*e;return this},applyQuaternion:function(a){var b=this.x,c=this.y,d=this.z,e=a.x,f=a.y,h=a.z,a=a.w,g=a*b+f*d-h*c,i=a*c+h*b-e*d,k=a*d+e*c-f*b,b=-e*b-f*c-h*d;this.x=g*a+b*-e+i*-h-k*-f;this.y=i*a+b*-f+k*-e-g*-h;this.z=k*a+b*-h+g*-f-i*-e;return this},transformDirection:function(a){var b=this.x,c=this.y,d=this.z,a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d;this.y=a[1]*b+a[5]*c+a[9]*d;this.z=a[2]*
b+a[6]*c+a[10]*d;this.normalize();return this},divide:function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a,this.z*=a):this.z=this.y=this.x=0;return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);this.z>a.z&&(this.z=a.z);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);this.z<a.z&&(this.z=a.z);return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<
a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);this.z<a.z?this.z=a.z:this.z>b.z&&(this.z=b.z);return this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},
setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},cross:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector3's .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,b);var c=this.x,d=this.y,e=this.z;this.x=d*a.z-e*a.y;this.y=e*a.x-c*a.z;this.z=c*a.y-d*a.x;return this},crossVectors:function(a,b){var c=
a.x,d=a.y,e=a.z,f=b.x,h=b.y,g=b.z;this.x=d*g-e*h;this.y=e*f-c*g;this.z=c*h-d*f;return this},angleTo:function(a){a=this.dot(a)/(this.length()*a.length());return Math.acos(THREE.Math.clamp(a,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,c=this.y-a.y,a=this.z-a.z;return b*b+c*c+a*a},setEulerFromRotationMatrix:function(){console.error("REMOVED: Vector3's setEulerFromRotationMatrix has been removed in favor of Euler.setFromRotationMatrix(), please update your code.")},
setEulerFromQuaternion:function(){console.error("REMOVED: Vector3's setEulerFromQuaternion: has been removed in favor of Euler.setFromQuaternion(), please update your code.")},getPositionFromMatrix:function(a){console.warn("DEPRECATED: Vector3's .getPositionFromMatrix() has been renamed to .setFromMatrixPosition(). Please update your code.");return this.setFromMatrixPosition(a)},getScaleFromMatrix:function(a){console.warn("DEPRECATED: Vector3's .getScaleFromMatrix() has been renamed to .setFromMatrixScale(). Please update your code.");
return this.setFromMatrixScale(a)},getColumnFromMatrix:function(a,b){console.warn("DEPRECATED: Vector3's .getColumnFromMatrix() has been renamed to .setFromMatrixColumn(). Please update your code.");return this.setFromMatrixColumn(a,b)},setFromMatrixPosition:function(a){this.x=a.elements[12];this.y=a.elements[13];this.z=a.elements[14];return this},setFromMatrixScale:function(a){var b=this.set(a.elements[0],a.elements[1],a.elements[2]).length(),c=this.set(a.elements[4],a.elements[5],a.elements[6]).length(),
a=this.set(a.elements[8],a.elements[9],a.elements[10]).length();this.x=b;this.y=c;this.z=a;return this},setFromMatrixColumn:function(a,b){var c=4*a,d=b.elements;this.x=d[c];this.y=d[c+1];this.z=d[c+2];return this},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a){this.x=a[0];this.y=a[1];this.z=a[2];return this},toArray:function(){return[this.x,this.y,this.z]},clone:function(){return new THREE.Vector3(this.x,this.y,this.z)}};
THREE.extend(THREE.Vector3.prototype,{applyEuler:function(){var a=new THREE.Quaternion;return function(b){!1===b instanceof THREE.Euler&&console.error("ERROR: Vector3's .applyEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code.");this.applyQuaternion(a.setFromEuler(b));return this}}(),applyAxisAngle:function(){var a=new THREE.Quaternion;return function(b,c){this.applyQuaternion(a.setFromAxisAngle(b,c));return this}}(),projectOnVector:function(){var a=new THREE.Vector3;
return function(b){a.copy(b).normalize();b=this.dot(a);return this.copy(a).multiplyScalar(b)}}(),projectOnPlane:function(){var a=new THREE.Vector3;return function(b){a.copy(this).projectOnVector(b);return this.sub(a)}}(),reflect:function(){var a=new THREE.Vector3;return function(b){a.copy(this).projectOnVector(b).multiplyScalar(2);return this.subVectors(a,this)}}()});THREE.Vector4=function(a,b,c,d){this.x=a||0;this.y=b||0;this.z=c||0;this.w=void 0!==d?d:1};
THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.w=d;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setW:function(a){this.w=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;
case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+a);}},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?a.w:1;return this},add:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector4's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;this.w+=a;return this},
addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this},sub:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector4's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;this.w*=a;return this},
applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z,e=this.w,a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12]*e;this.y=a[1]*b+a[5]*c+a[9]*d+a[13]*e;this.z=a[2]*b+a[6]*c+a[10]*d+a[14]*e;this.w=a[3]*b+a[7]*c+a[11]*d+a[15]*e;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a,this.z*=a,this.w*=a):(this.z=this.y=this.x=0,this.w=1);return this},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var b=Math.sqrt(1-a.w*a.w);1E-4>b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,
this.y=a.y/b,this.z=a.z/b);return this},setAxisAngleFromRotationMatrix:function(a){var b,c,d,a=a.elements,e=a[0];d=a[4];var f=a[8],h=a[1],g=a[5],i=a[9];c=a[2];b=a[6];var k=a[10];if(0.01>Math.abs(d-h)&&0.01>Math.abs(f-c)&&0.01>Math.abs(i-b)){if(0.1>Math.abs(d+h)&&0.1>Math.abs(f+c)&&0.1>Math.abs(i+b)&&0.1>Math.abs(e+g+k-3))return this.set(1,0,0,0),this;a=Math.PI;e=(e+1)/2;g=(g+1)/2;k=(k+1)/2;d=(d+h)/4;f=(f+c)/4;i=(i+b)/4;e>g&&e>k?0.01>e?(b=0,d=c=0.707106781):(b=Math.sqrt(e),c=d/b,d=f/b):g>k?0.01>g?
(b=0.707106781,c=0,d=0.707106781):(c=Math.sqrt(g),b=d/c,d=i/c):0.01>k?(c=b=0.707106781,d=0):(d=Math.sqrt(k),b=f/d,c=i/d);this.set(b,c,d,a);return this}a=Math.sqrt((b-i)*(b-i)+(f-c)*(f-c)+(h-d)*(h-d));0.001>Math.abs(a)&&(a=1);this.x=(b-i)/a;this.y=(f-c)/a;this.z=(h-d)/a;this.w=Math.acos((e+g+k-1)/2);return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);this.z>a.z&&(this.z=a.z);this.w>a.w&&(this.w=a.w);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=
a.y);this.z<a.z&&(this.z=a.z);this.w<a.w&&(this.w=a.w);return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);this.z<a.z?this.z=a.z:this.z>b.z&&(this.z=b.z);this.w<a.w?this.w=a.w:this.w>b.w&&(this.w=b.w);return this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*
this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&
a.w===this.w},fromArray:function(a){this.x=a[0];this.y=a[1];this.z=a[2];this.w=a[3];return this},toArray:function(){return[this.x,this.y,this.z,this.w]},clone:function(){return new THREE.Vector4(this.x,this.y,this.z,this.w)}};THREE.Euler=function(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._order=d||THREE.Euler.DefaultOrder};THREE.Euler.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");THREE.Euler.DefaultOrder="XYZ";
THREE.Euler.prototype={constructor:THREE.Euler,_x:0,_y:0,_z:0,_order:THREE.Euler.DefaultOrder,_quaternion:void 0,_updateQuaternion:function(){void 0!==this._quaternion&&this._quaternion.setFromEuler(this,!1)},get x(){return this._x},set x(a){this._x=a;this._updateQuaternion()},get y(){return this._y},set y(a){this._y=a;this._updateQuaternion()},get z(){return this._z},set z(a){this._z=a;this._updateQuaternion()},get order(){return this._order},set order(a){this._order=a;this._updateQuaternion()},
set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._order=d||this._order;this._updateQuaternion();return this},copy:function(a){this._x=a._x;this._y=a._y;this._z=a._z;this._order=a._order;this._updateQuaternion();return this},setFromRotationMatrix:function(a,b){function c(a){return Math.min(Math.max(a,-1),1)}var d=a.elements,e=d[0],f=d[4],h=d[8],g=d[1],i=d[5],k=d[9],m=d[2],l=d[6],d=d[10],b=b||this._order;"XYZ"===b?(this._y=Math.asin(c(h)),0.99999>Math.abs(h)?(this._x=Math.atan2(-k,d),this._z=
Math.atan2(-f,e)):(this._x=Math.atan2(l,i),this._z=0)):"YXZ"===b?(this._x=Math.asin(-c(k)),0.99999>Math.abs(k)?(this._y=Math.atan2(h,d),this._z=Math.atan2(g,i)):(this._y=Math.atan2(-m,e),this._z=0)):"ZXY"===b?(this._x=Math.asin(c(l)),0.99999>Math.abs(l)?(this._y=Math.atan2(-m,d),this._z=Math.atan2(-f,i)):(this._y=0,this._z=Math.atan2(g,e))):"ZYX"===b?(this._y=Math.asin(-c(m)),0.99999>Math.abs(m)?(this._x=Math.atan2(l,d),this._z=Math.atan2(g,e)):(this._x=0,this._z=Math.atan2(-f,i))):"YZX"===b?(this._z=
Math.asin(c(g)),0.99999>Math.abs(g)?(this._x=Math.atan2(-k,i),this._y=Math.atan2(-m,e)):(this._x=0,this._y=Math.atan2(h,d))):"XZY"===b?(this._z=Math.asin(-c(f)),0.99999>Math.abs(f)?(this._x=Math.atan2(l,i),this._y=Math.atan2(h,e)):(this._x=Math.atan2(-k,d),this._y=0)):console.warn("WARNING: Euler.setFromRotationMatrix() given unsupported order: "+b);this._order=b;this._updateQuaternion();return this},setFromQuaternion:function(a,b,c){function d(a){return Math.min(Math.max(a,-1),1)}var e=a.x*a.x,f=
a.y*a.y,h=a.z*a.z,g=a.w*a.w,b=b||this._order;"XYZ"===b?(this._x=Math.atan2(2*(a.x*a.w-a.y*a.z),g-e-f+h),this._y=Math.asin(d(2*(a.x*a.z+a.y*a.w))),this._z=Math.atan2(2*(a.z*a.w-a.x*a.y),g+e-f-h)):"YXZ"===b?(this._x=Math.asin(d(2*(a.x*a.w-a.y*a.z))),this._y=Math.atan2(2*(a.x*a.z+a.y*a.w),g-e-f+h),this._z=Math.atan2(2*(a.x*a.y+a.z*a.w),g-e+f-h)):"ZXY"===b?(this._x=Math.asin(d(2*(a.x*a.w+a.y*a.z))),this._y=Math.atan2(2*(a.y*a.w-a.z*a.x),g-e-f+h),this._z=Math.atan2(2*(a.z*a.w-a.x*a.y),g-e+f-h)):"ZYX"===
b?(this._x=Math.atan2(2*(a.x*a.w+a.z*a.y),g-e-f+h),this._y=Math.asin(d(2*(a.y*a.w-a.x*a.z))),this._z=Math.atan2(2*(a.x*a.y+a.z*a.w),g+e-f-h)):"YZX"===b?(this._x=Math.atan2(2*(a.x*a.w-a.z*a.y),g-e+f-h),this._y=Math.atan2(2*(a.y*a.w-a.x*a.z),g+e-f-h),this._z=Math.asin(d(2*(a.x*a.y+a.z*a.w)))):"XZY"===b?(this._x=Math.atan2(2*(a.x*a.w+a.y*a.z),g-e+f-h),this._y=Math.atan2(2*(a.x*a.z+a.y*a.w),g+e-f-h),this._z=Math.asin(d(2*(a.z*a.w-a.x*a.y)))):console.warn("WARNING: Euler.setFromQuaternion() given unsupported order: "+
b);this._order=b;!1!==c&&this._updateQuaternion();return this},reorder:function(){var a=new THREE.Quaternion;return function(b){a.setFromEuler(this);this.setFromQuaternion(a,b)}}(),fromArray:function(a){this._x=a[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]);this._updateQuaternion();return this},toArray:function(){return[this._x,this._y,this._z,this._order]},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},clone:function(){return new THREE.Euler(this._x,
this._y,this._z,this._order)}};THREE.Line3=function(a,b){this.start=void 0!==a?a:new THREE.Vector3;this.end=void 0!==b?b:new THREE.Vector3};
THREE.Line3.prototype={constructor:THREE.Line3,set:function(a,b){this.start.copy(a);this.end.copy(b);return this},copy:function(a){this.start.copy(a.start);this.end.copy(a.end);return this},center:function(a){return(a||new THREE.Vector3).addVectors(this.start,this.end).multiplyScalar(0.5)},delta:function(a){return(a||new THREE.Vector3).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(a,
b){var c=b||new THREE.Vector3;return this.delta(c).multiplyScalar(a).add(this.start)},closestPointToPointParameter:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,d){a.subVectors(c,this.start);b.subVectors(this.end,this.start);var e=b.dot(b),e=b.dot(a)/e;d&&(e=THREE.Math.clamp(e,0,1));return e}}(),closestPointToPoint:function(a,b,c){a=this.closestPointToPointParameter(a,b);c=c||new THREE.Vector3;return this.delta(c).multiplyScalar(a).add(this.start)},applyMatrix4:function(a){this.start.applyMatrix4(a);
this.end.applyMatrix4(a);return this},equals:function(a){return a.start.equals(this.start)&&a.end.equals(this.end)},clone:function(){return(new THREE.Line3).copy(this)}};THREE.Box2=function(a,b){this.min=void 0!==a?a:new THREE.Vector2(Infinity,Infinity);this.max=void 0!==b?b:new THREE.Vector2(-Infinity,-Infinity)};
THREE.Box2.prototype={constructor:THREE.Box2,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromPoints:function(a){if(0<a.length){var b=a[0];this.min.copy(b);this.max.copy(b);for(var c=1,d=a.length;c<d;c++)b=a[c],b.x<this.min.x?this.min.x=b.x:b.x>this.max.x&&(this.max.x=b.x),b.y<this.min.y?this.min.y=b.y:b.y>this.max.y&&(this.max.y=b.y)}else this.makeEmpty();return this},setFromCenterAndSize:function(){var a=new THREE.Vector2;return function(b,c){var d=a.copy(c).multiplyScalar(0.5);
this.min.copy(b).sub(d);this.max.copy(b).add(d);return this}}(),copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(a){return(a||new THREE.Vector2).addVectors(this.min,this.max).multiplyScalar(0.5)},size:function(a){return(a||new THREE.Vector2).subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);
this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y?!0:!1},getParameter:function(a,b){return(b||new THREE.Vector2).set((a.x-this.min.x)/(this.max.x-this.min.x),
(a.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y?!1:!0},clampPoint:function(a,b){return(b||new THREE.Vector2).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new THREE.Vector2;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);
return this},translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)},clone:function(){return(new THREE.Box2).copy(this)}};THREE.Box3=function(a,b){this.min=void 0!==a?a:new THREE.Vector3(Infinity,Infinity,Infinity);this.max=void 0!==b?b:new THREE.Vector3(-Infinity,-Infinity,-Infinity)};
THREE.Box3.prototype={constructor:THREE.Box3,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},addPoint:function(a){a.x<this.min.x?this.min.x=a.x:a.x>this.max.x&&(this.max.x=a.x);a.y<this.min.y?this.min.y=a.y:a.y>this.max.y&&(this.max.y=a.y);a.z<this.min.z?this.min.z=a.z:a.z>this.max.z&&(this.max.z=a.z)},setFromPoints:function(a){if(0<a.length){var b=a[0];this.min.copy(b);this.max.copy(b);for(var b=1,c=a.length;b<c;b++)this.addPoint(a[b])}else this.makeEmpty();return this},setFromCenterAndSize:function(){var a=
new THREE.Vector3;return function(b,c){var d=a.copy(c).multiplyScalar(0.5);this.min.copy(b).sub(d);this.max.copy(b).add(d);return this}}(),setFromObject:function(){var a=new THREE.Vector3;return function(b){var c=this;b.updateMatrixWorld(!0);this.makeEmpty();b.traverse(function(b){if(void 0!==b.geometry&&void 0!==b.geometry.vertices)for(var e=b.geometry.vertices,f=0,h=e.length;f<h;f++)a.copy(e[f]),a.applyMatrix4(b.matrixWorld),c.expandByPoint(a)});return this}}(),copy:function(a){this.min.copy(a.min);
this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(a){return(a||new THREE.Vector3).addVectors(this.min,this.max).multiplyScalar(0.5)},size:function(a){return(a||new THREE.Vector3).subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);
this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z?!0:!1},getParameter:function(a,b){return(b||new THREE.Vector3).set((a.x-this.min.x)/(this.max.x-
this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z?!1:!0},clampPoint:function(a,b){return(b||new THREE.Vector3).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new THREE.Vector3;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),getBoundingSphere:function(){var a=
new THREE.Vector3;return function(b){b=b||new THREE.Sphere;b.center=this.center();b.radius=0.5*this.size(a).length();return b}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},applyMatrix4:function(){var a=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];return function(b){a[0].set(this.min.x,this.min.y,
this.min.z).applyMatrix4(b);a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(b);a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(b);a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(b);a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(b);a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(b);a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(b);a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(b);this.makeEmpty();this.setFromPoints(a);return this}}(),translate:function(a){this.min.add(a);
this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)},clone:function(){return(new THREE.Box3).copy(this)}};THREE.Matrix3=function(a,b,c,d,e,f,h,g,i){this.elements=new Float32Array(9);this.set(void 0!==a?a:1,b||0,c||0,d||0,void 0!==e?e:1,f||0,h||0,g||0,void 0!==i?i:1)};
THREE.Matrix3.prototype={constructor:THREE.Matrix3,set:function(a,b,c,d,e,f,h,g,i){var k=this.elements;k[0]=a;k[3]=b;k[6]=c;k[1]=d;k[4]=e;k[7]=f;k[2]=h;k[5]=g;k[8]=i;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},copy:function(a){a=a.elements;this.set(a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8]);return this},multiplyVector3:function(a){console.warn("DEPRECATED: Matrix3's .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return a.applyMatrix3(this)},
multiplyVector3Array:function(){var a=new THREE.Vector3;return function(b){for(var c=0,d=b.length;c<d;c+=3)a.x=b[c],a.y=b[c+1],a.z=b[c+2],a.applyMatrix3(this),b[c]=a.x,b[c+1]=a.y,b[c+2]=a.z;return b}}(),multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[3]*=a;b[6]*=a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=a;return this},determinant:function(){var a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],h=a[5],g=a[6],i=a[7],a=a[8];return b*f*a-b*h*i-c*e*a+c*h*g+d*e*i-d*f*g},getInverse:function(a,
b){var c=a.elements,d=this.elements;d[0]=c[10]*c[5]-c[6]*c[9];d[1]=-c[10]*c[1]+c[2]*c[9];d[2]=c[6]*c[1]-c[2]*c[5];d[3]=-c[10]*c[4]+c[6]*c[8];d[4]=c[10]*c[0]-c[2]*c[8];d[5]=-c[6]*c[0]+c[2]*c[4];d[6]=c[9]*c[4]-c[5]*c[8];d[7]=-c[9]*c[0]+c[1]*c[8];d[8]=c[5]*c[0]-c[1]*c[4];c=c[0]*d[0]+c[1]*d[3]+c[2]*d[6];if(0===c){if(b)throw Error("Matrix3.getInverse(): can't invert matrix, determinant is 0");console.warn("Matrix3.getInverse(): can't invert matrix, determinant is 0");this.identity();return this}this.multiplyScalar(1/
c);return this},transpose:function(){var a,b=this.elements;a=b[1];b[1]=b[3];b[3]=a;a=b[2];b[2]=b[6];b[6]=a;a=b[5];b[5]=b[7];b[7]=a;return this},getNormalMatrix:function(a){this.getInverse(a).transpose();return this},transposeIntoArray:function(a){var b=this.elements;a[0]=b[0];a[1]=b[3];a[2]=b[6];a[3]=b[1];a[4]=b[4];a[5]=b[7];a[6]=b[2];a[7]=b[5];a[8]=b[8];return this},clone:function(){var a=this.elements;return new THREE.Matrix3(a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8])}};THREE.Matrix4=function(a,b,c,d,e,f,h,g,i,k,m,l,p,t,s,q){var n=this.elements=new Float32Array(16);n[0]=void 0!==a?a:1;n[4]=b||0;n[8]=c||0;n[12]=d||0;n[1]=e||0;n[5]=void 0!==f?f:1;n[9]=h||0;n[13]=g||0;n[2]=i||0;n[6]=k||0;n[10]=void 0!==m?m:1;n[14]=l||0;n[3]=p||0;n[7]=t||0;n[11]=s||0;n[15]=void 0!==q?q:1};
THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(a,b,c,d,e,f,h,g,i,k,m,l,p,t,s,q){var n=this.elements;n[0]=a;n[4]=b;n[8]=c;n[12]=d;n[1]=e;n[5]=f;n[9]=h;n[13]=g;n[2]=i;n[6]=k;n[10]=m;n[14]=l;n[3]=p;n[7]=t;n[11]=s;n[15]=q;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},copy:function(a){this.elements.set(a.elements);return this},extractPosition:function(a){console.warn("DEPRECATED: Matrix4's .extractPosition() has been renamed to .copyPosition().");
return this.copyPosition(a)},copyPosition:function(a){var b=this.elements,a=a.elements;b[12]=a[12];b[13]=a[13];b[14]=a[14];return this},extractRotation:function(){var a=new THREE.Vector3;return function(b){var c=this.elements,b=b.elements,d=1/a.set(b[0],b[1],b[2]).length(),e=1/a.set(b[4],b[5],b[6]).length(),f=1/a.set(b[8],b[9],b[10]).length();c[0]=b[0]*d;c[1]=b[1]*d;c[2]=b[2]*d;c[4]=b[4]*e;c[5]=b[5]*e;c[6]=b[6]*e;c[8]=b[8]*f;c[9]=b[9]*f;c[10]=b[10]*f;return this}}(),makeRotationFromEuler:function(a){!1===
a instanceof THREE.Euler&&console.error("ERROR: Matrix's .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code.");var b=this.elements,c=a.x,d=a.y,e=a.z,f=Math.cos(c),c=Math.sin(c),h=Math.cos(d),d=Math.sin(d),g=Math.cos(e),e=Math.sin(e);if("XYZ"===a.order){var a=f*g,i=f*e,k=c*g,m=c*e;b[0]=h*g;b[4]=-h*e;b[8]=d;b[1]=i+k*d;b[5]=a-m*d;b[9]=-c*h;b[2]=m-a*d;b[6]=k+i*d;b[10]=f*h}else"YXZ"===a.order?(a=h*g,i=h*e,k=d*g,m=d*e,b[0]=a+m*c,b[4]=k*c-i,b[8]=
f*d,b[1]=f*e,b[5]=f*g,b[9]=-c,b[2]=i*c-k,b[6]=m+a*c,b[10]=f*h):"ZXY"===a.order?(a=h*g,i=h*e,k=d*g,m=d*e,b[0]=a-m*c,b[4]=-f*e,b[8]=k+i*c,b[1]=i+k*c,b[5]=f*g,b[9]=m-a*c,b[2]=-f*d,b[6]=c,b[10]=f*h):"ZYX"===a.order?(a=f*g,i=f*e,k=c*g,m=c*e,b[0]=h*g,b[4]=k*d-i,b[8]=a*d+m,b[1]=h*e,b[5]=m*d+a,b[9]=i*d-k,b[2]=-d,b[6]=c*h,b[10]=f*h):"YZX"===a.order?(a=f*h,i=f*d,k=c*h,m=c*d,b[0]=h*g,b[4]=m-a*e,b[8]=k*e+i,b[1]=e,b[5]=f*g,b[9]=-c*g,b[2]=-d*g,b[6]=i*e+k,b[10]=a-m*e):"XZY"===a.order&&(a=f*h,i=f*d,k=c*h,m=c*d,b[0]=
h*g,b[4]=-e,b[8]=d*g,b[1]=a*e+m,b[5]=f*g,b[9]=i*e-k,b[2]=k*e-i,b[6]=c*g,b[10]=m*e+a);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},setRotationFromQuaternion:function(a){console.warn("DEPRECATED: Matrix4's .setRotationFromQuaternion() has been deprecated in favor of makeRotationFromQuaternion.  Please update your code.");return this.makeRotationFromQuaternion(a)},makeRotationFromQuaternion:function(a){var b=this.elements,c=a.x,d=a.y,e=a.z,f=a.w,h=c+c,g=d+d,i=e+e,a=c*h,k=c*g,c=
c*i,m=d*g,d=d*i,e=e*i,h=f*h,g=f*g,f=f*i;b[0]=1-(m+e);b[4]=k-f;b[8]=c+g;b[1]=k+f;b[5]=1-(a+e);b[9]=d-h;b[2]=c-g;b[6]=d+h;b[10]=1-(a+m);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},lookAt:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(d,e,f){var h=this.elements;c.subVectors(d,e).normalize();0===c.length()&&(c.z=1);a.crossVectors(f,c).normalize();0===a.length()&&(c.x+=1E-4,a.crossVectors(f,c).normalize());b.crossVectors(c,a);h[0]=a.x;
h[4]=b.x;h[8]=c.x;h[1]=a.y;h[5]=b.y;h[9]=c.y;h[2]=a.z;h[6]=b.z;h[10]=c.z;return this}}(),multiply:function(a,b){return void 0!==b?(console.warn("DEPRECATED: Matrix4's .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,b)):this.multiplyMatrices(this,a)},multiplyMatrices:function(a,b){var c=a.elements,d=b.elements,e=this.elements,f=c[0],h=c[4],g=c[8],i=c[12],k=c[1],m=c[5],l=c[9],p=c[13],t=c[2],s=c[6],q=c[10],n=c[14],u=c[3],r=c[7],v=c[11],c=c[15],
z=d[0],G=d[4],w=d[8],y=d[12],E=d[1],A=d[5],K=d[9],D=d[13],F=d[2],O=d[6],x=d[10],I=d[14],B=d[3],M=d[7],J=d[11],d=d[15];e[0]=f*z+h*E+g*F+i*B;e[4]=f*G+h*A+g*O+i*M;e[8]=f*w+h*K+g*x+i*J;e[12]=f*y+h*D+g*I+i*d;e[1]=k*z+m*E+l*F+p*B;e[5]=k*G+m*A+l*O+p*M;e[9]=k*w+m*K+l*x+p*J;e[13]=k*y+m*D+l*I+p*d;e[2]=t*z+s*E+q*F+n*B;e[6]=t*G+s*A+q*O+n*M;e[10]=t*w+s*K+q*x+n*J;e[14]=t*y+s*D+q*I+n*d;e[3]=u*z+r*E+v*F+c*B;e[7]=u*G+r*A+v*O+c*M;e[11]=u*w+r*K+v*x+c*J;e[15]=u*y+r*D+v*I+c*d;return this},multiplyToArray:function(a,b,
c){var d=this.elements;this.multiplyMatrices(a,b);c[0]=d[0];c[1]=d[1];c[2]=d[2];c[3]=d[3];c[4]=d[4];c[5]=d[5];c[6]=d[6];c[7]=d[7];c[8]=d[8];c[9]=d[9];c[10]=d[10];c[11]=d[11];c[12]=d[12];c[13]=d[13];c[14]=d[14];c[15]=d[15];return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},multiplyVector3:function(a){console.warn("DEPRECATED: Matrix4's .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.");
return a.applyProjection(this)},multiplyVector4:function(a){console.warn("DEPRECATED: Matrix4's .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},multiplyVector3Array:function(){var a=new THREE.Vector3;return function(b){for(var c=0,d=b.length;c<d;c+=3)a.x=b[c],a.y=b[c+1],a.z=b[c+2],a.applyProjection(this),b[c]=a.x,b[c+1]=a.y,b[c+2]=a.z;return b}}(),rotateAxis:function(a){console.warn("DEPRECATED: Matrix4's .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");
a.transformDirection(this)},crossVector:function(a){console.warn("DEPRECATED: Matrix4's .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},determinant:function(){var a=this.elements,b=a[0],c=a[4],d=a[8],e=a[12],f=a[1],h=a[5],g=a[9],i=a[13],k=a[2],m=a[6],l=a[10],p=a[14];return a[3]*(+e*g*m-d*i*m-e*h*l+c*i*l+d*h*p-c*g*p)+a[7]*(+b*g*p-b*i*l+e*f*l-d*f*p+d*i*k-e*g*k)+a[11]*(+b*i*m-b*h*p-e*f*m+c*f*p+e*h*k-c*i*k)+a[15]*(-d*h*k-b*g*m+b*h*l+d*f*m-c*f*
l+c*g*k)},transpose:function(){var a=this.elements,b;b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return this},flattenToArray:function(a){var b=this.elements;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a},flattenToArrayOffset:function(a,b){var c=this.elements;
a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];a[b+9]=c[9];a[b+10]=c[10];a[b+11]=c[11];a[b+12]=c[12];a[b+13]=c[13];a[b+14]=c[14];a[b+15]=c[15];return a},getPosition:function(){var a=new THREE.Vector3;return function(){console.warn("DEPRECATED: Matrix4's .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var b=this.elements;return a.set(b[12],b[13],b[14])}}(),setPosition:function(a){var b=this.elements;
b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},getInverse:function(a,b){var c=this.elements,d=a.elements,e=d[0],f=d[4],h=d[8],g=d[12],i=d[1],k=d[5],m=d[9],l=d[13],p=d[2],t=d[6],s=d[10],q=d[14],n=d[3],u=d[7],r=d[11],d=d[15];c[0]=m*q*u-l*s*u+l*t*r-k*q*r-m*t*d+k*s*d;c[4]=g*s*u-h*q*u-g*t*r+f*q*r+h*t*d-f*s*d;c[8]=h*l*u-g*m*u+g*k*r-f*l*r-h*k*d+f*m*d;c[12]=g*m*t-h*l*t-g*k*s+f*l*s+h*k*q-f*m*q;c[1]=l*s*n-m*q*n-l*p*r+i*q*r+m*p*d-i*s*d;c[5]=h*q*n-g*s*n+g*p*r-e*q*r-h*p*d+e*s*d;c[9]=g*m*n-h*l*n-g*i*r+e*l*r+h*i*d-
e*m*d;c[13]=h*l*p-g*m*p+g*i*s-e*l*s-h*i*q+e*m*q;c[2]=k*q*n-l*t*n+l*p*u-i*q*u-k*p*d+i*t*d;c[6]=g*t*n-f*q*n-g*p*u+e*q*u+f*p*d-e*t*d;c[10]=f*l*n-g*k*n+g*i*u-e*l*u-f*i*d+e*k*d;c[14]=g*k*p-f*l*p-g*i*t+e*l*t+f*i*q-e*k*q;c[3]=m*t*n-k*s*n-m*p*u+i*s*u+k*p*r-i*t*r;c[7]=f*s*n-h*t*n+h*p*u-e*s*u-f*p*r+e*t*r;c[11]=h*k*n-f*m*n-h*i*u+e*m*u+f*i*r-e*k*r;c[15]=f*m*p-h*k*p+h*i*t-e*m*t-f*i*s+e*k*s;c=e*c[0]+i*c[4]+p*c[8]+n*c[12];if(0==c){if(b)throw Error("Matrix4.getInverse(): can't invert matrix, determinant is 0");console.warn("Matrix4.getInverse(): can't invert matrix, determinant is 0");
this.identity();return this}this.multiplyScalar(1/c);return this},translate:function(){console.warn("DEPRECATED: Matrix4's .translate() has been removed.")},rotateX:function(){console.warn("DEPRECATED: Matrix4's .rotateX() has been removed.")},rotateY:function(){console.warn("DEPRECATED: Matrix4's .rotateY() has been removed.")},rotateZ:function(){console.warn("DEPRECATED: Matrix4's .rotateZ() has been removed.")},rotateByAxis:function(){console.warn("DEPRECATED: Matrix4's .rotateByAxis() has been removed.")},
scale:function(a){var b=this.elements,c=a.x,d=a.y,a=a.z;b[0]*=c;b[4]*=d;b[8]*=a;b[1]*=c;b[5]*=d;b[9]*=a;b[2]*=c;b[6]*=d;b[10]*=a;b[3]*=c;b[7]*=d;b[11]*=a;return this},getMaxScaleOnAxis:function(){var a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],Math.max(a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10])))},makeTranslation:function(a,b,c){this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1);return this},makeRotationX:function(a){var b=Math.cos(a),a=Math.sin(a);this.set(1,
0,0,0,0,b,-a,0,0,a,b,0,0,0,0,1);return this},makeRotationY:function(a){var b=Math.cos(a),a=Math.sin(a);this.set(b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1);return this},makeRotationZ:function(a){var b=Math.cos(a),a=Math.sin(a);this.set(b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(a,b){var c=Math.cos(b),d=Math.sin(b),e=1-c,f=a.x,h=a.y,g=a.z,i=e*f,k=e*h;this.set(i*f+c,i*h-d*g,i*g+d*h,0,i*h+d*g,k*h+c,k*g-d*f,0,i*g-d*h,k*g+d*f,e*g*g+c,0,0,0,0,1);return this},makeScale:function(a,b,c){this.set(a,
0,0,0,0,b,0,0,0,0,c,0,0,0,0,1);return this},compose:function(a,b,c){this.makeRotationFromQuaternion(b);this.scale(c);this.setPosition(a);return this},decompose:function(){var a=new THREE.Vector3,b=new THREE.Matrix4;return function(c,d,e){var f=this.elements,h=a.set(f[0],f[1],f[2]).length(),g=a.set(f[4],f[5],f[6]).length(),i=a.set(f[8],f[9],f[10]).length();c.x=f[12];c.y=f[13];c.z=f[14];b.elements.set(this.elements);var c=1/h,f=1/g,k=1/i;b.elements[0]*=c;b.elements[1]*=c;b.elements[2]*=c;b.elements[4]*=
f;b.elements[5]*=f;b.elements[6]*=f;b.elements[8]*=k;b.elements[9]*=k;b.elements[10]*=k;d.setFromRotationMatrix(b);e.x=h;e.y=g;e.z=i;return this}}(),makeFrustum:function(a,b,c,d,e,f){var h=this.elements;h[0]=2*e/(b-a);h[4]=0;h[8]=(b+a)/(b-a);h[12]=0;h[1]=0;h[5]=2*e/(d-c);h[9]=(d+c)/(d-c);h[13]=0;h[2]=0;h[6]=0;h[10]=-(f+e)/(f-e);h[14]=-2*f*e/(f-e);h[3]=0;h[7]=0;h[11]=-1;h[15]=0;return this},makePerspective:function(a,b,c,d){var a=c*Math.tan(THREE.Math.degToRad(0.5*a)),e=-a;return this.makeFrustum(e*
b,a*b,e,a,c,d)},makeOrthographic:function(a,b,c,d,e,f){var h=this.elements,g=b-a,i=c-d,k=f-e;h[0]=2/g;h[4]=0;h[8]=0;h[12]=-((b+a)/g);h[1]=0;h[5]=2/i;h[9]=0;h[13]=-((c+d)/i);h[2]=0;h[6]=0;h[10]=-2/k;h[14]=-((f+e)/k);h[3]=0;h[7]=0;h[11]=0;h[15]=1;return this},fromArray:function(a){this.elements.set(a);return this},toArray:function(){var a=this.elements;return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]]},clone:function(){var a=this.elements;return new THREE.Matrix4(a[0],
a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15])}};THREE.Ray=function(a,b){this.origin=void 0!==a?a:new THREE.Vector3;this.direction=void 0!==b?b:new THREE.Vector3};
THREE.Ray.prototype={constructor:THREE.Ray,set:function(a,b){this.origin.copy(a);this.direction.copy(b);return this},copy:function(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this},at:function(a,b){return(b||new THREE.Vector3).copy(this.direction).multiplyScalar(a).add(this.origin)},recast:function(){var a=new THREE.Vector3;return function(b){this.origin.copy(this.at(b,a));return this}}(),closestPointToPoint:function(a,b){var c=b||new THREE.Vector3;c.subVectors(a,this.origin);
var d=c.dot(this.direction);return 0>d?c.copy(this.origin):c.copy(this.direction).multiplyScalar(d).add(this.origin)},distanceToPoint:function(){var a=new THREE.Vector3;return function(b){var c=a.subVectors(b,this.origin).dot(this.direction);if(0>c)return this.origin.distanceTo(b);a.copy(this.direction).multiplyScalar(c).add(this.origin);return a.distanceTo(b)}}(),distanceSqToSegment:function(a,b,c,d){var e=a.clone().add(b).multiplyScalar(0.5),f=b.clone().sub(a).normalize(),h=0.5*a.distanceTo(b),
g=this.origin.clone().sub(e),a=-this.direction.dot(f),b=g.dot(this.direction),i=-g.dot(f),k=g.lengthSq(),m=Math.abs(1-a*a),l,p;0<=m?(g=a*i-b,l=a*b-i,p=h*m,0<=g?l>=-p?l<=p?(h=1/m,g*=h,l*=h,a=g*(g+a*l+2*b)+l*(a*g+l+2*i)+k):(l=h,g=Math.max(0,-(a*l+b)),a=-g*g+l*(l+2*i)+k):(l=-h,g=Math.max(0,-(a*l+b)),a=-g*g+l*(l+2*i)+k):l<=-p?(g=Math.max(0,-(-a*h+b)),l=0<g?-h:Math.min(Math.max(-h,-i),h),a=-g*g+l*(l+2*i)+k):l<=p?(g=0,l=Math.min(Math.max(-h,-i),h),a=l*(l+2*i)+k):(g=Math.max(0,-(a*h+b)),l=0<g?h:Math.min(Math.max(-h,
-i),h),a=-g*g+l*(l+2*i)+k)):(l=0<a?-h:h,g=Math.max(0,-(a*l+b)),a=-g*g+l*(l+2*i)+k);c&&c.copy(this.direction.clone().multiplyScalar(g).add(this.origin));d&&d.copy(f.clone().multiplyScalar(l).add(e));return a},isIntersectionSphere:function(a){return this.distanceToPoint(a.center)<=a.radius},isIntersectionPlane:function(a){var b=a.distanceToPoint(this.origin);return 0===b||0>a.normal.dot(this.direction)*b?!0:!1},distanceToPlane:function(a){var b=a.normal.dot(this.direction);if(0==b)return 0==a.distanceToPoint(this.origin)?
0:null;a=-(this.origin.dot(a.normal)+a.constant)/b;return 0<=a?a:null},intersectPlane:function(a,b){var c=this.distanceToPlane(a);return null===c?null:this.at(c,b)},isIntersectionBox:function(){var a=new THREE.Vector3;return function(b){return null!==this.intersectBox(b,a)}}(),intersectBox:function(a,b){var c,d,e,f,h;d=1/this.direction.x;f=1/this.direction.y;h=1/this.direction.z;var g=this.origin;0<=d?(c=(a.min.x-g.x)*d,d*=a.max.x-g.x):(c=(a.max.x-g.x)*d,d*=a.min.x-g.x);0<=f?(e=(a.min.y-g.y)*f,f*=
a.max.y-g.y):(e=(a.max.y-g.y)*f,f*=a.min.y-g.y);if(c>f||e>d)return null;if(e>c||c!==c)c=e;if(f<d||d!==d)d=f;0<=h?(e=(a.min.z-g.z)*h,h*=a.max.z-g.z):(e=(a.max.z-g.z)*h,h*=a.min.z-g.z);if(c>h||e>d)return null;if(e>c||c!==c)c=e;if(h<d||d!==d)d=h;return 0>d?null:this.at(0<=c?c:d,b)},intersectTriangle:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Vector3;return function(e,f,h,g,i){b.subVectors(f,e);c.subVectors(h,e);d.crossVectors(b,c);f=this.direction.dot(d);if(0<
f){if(g)return null;g=1}else if(0>f)g=-1,f=-f;else return null;a.subVectors(this.origin,e);e=g*this.direction.dot(c.crossVectors(a,c));if(0>e)return null;h=g*this.direction.dot(b.cross(a));if(0>h||e+h>f)return null;e=-g*a.dot(d);return 0>e?null:this.at(e/f,i)}}(),applyMatrix4:function(a){this.direction.add(this.origin).applyMatrix4(a);this.origin.applyMatrix4(a);this.direction.sub(this.origin);this.direction.normalize();return this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)},
clone:function(){return(new THREE.Ray).copy(this)}};THREE.Sphere=function(a,b){this.center=void 0!==a?a:new THREE.Vector3;this.radius=void 0!==b?b:0};
THREE.Sphere.prototype={constructor:THREE.Sphere,set:function(a,b){this.center.copy(a);this.radius=b;return this},setFromPoints:function(){var a=new THREE.Box3;return function(b,c){var d=this.center;void 0!==c?d.copy(c):a.setFromPoints(b).center(d);for(var e=0,f=0,h=b.length;f<h;f++)e=Math.max(e,d.distanceToSquared(b[f]));this.radius=Math.sqrt(e);return this}}(),copy:function(a){this.center.copy(a.center);this.radius=a.radius;return this},empty:function(){return 0>=this.radius},containsPoint:function(a){return a.distanceToSquared(this.center)<=
this.radius*this.radius},distanceToPoint:function(a){return a.distanceTo(this.center)-this.radius},intersectsSphere:function(a){var b=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=b*b},clampPoint:function(a,b){var c=this.center.distanceToSquared(a),d=b||new THREE.Vector3;d.copy(a);c>this.radius*this.radius&&(d.sub(this.center).normalize(),d.multiplyScalar(this.radius).add(this.center));return d},getBoundingBox:function(a){a=a||new THREE.Box3;a.set(this.center,this.center);a.expandByScalar(this.radius);
return a},applyMatrix4:function(a){this.center.applyMatrix4(a);this.radius*=a.getMaxScaleOnAxis();return this},translate:function(a){this.center.add(a);return this},equals:function(a){return a.center.equals(this.center)&&a.radius===this.radius},clone:function(){return(new THREE.Sphere).copy(this)}};THREE.Frustum=function(a,b,c,d,e,f){this.planes=[void 0!==a?a:new THREE.Plane,void 0!==b?b:new THREE.Plane,void 0!==c?c:new THREE.Plane,void 0!==d?d:new THREE.Plane,void 0!==e?e:new THREE.Plane,void 0!==f?f:new THREE.Plane]};
THREE.Frustum.prototype={constructor:THREE.Frustum,set:function(a,b,c,d,e,f){var h=this.planes;h[0].copy(a);h[1].copy(b);h[2].copy(c);h[3].copy(d);h[4].copy(e);h[5].copy(f);return this},copy:function(a){for(var b=this.planes,c=0;6>c;c++)b[c].copy(a.planes[c]);return this},setFromMatrix:function(a){var b=this.planes,c=a.elements,a=c[0],d=c[1],e=c[2],f=c[3],h=c[4],g=c[5],i=c[6],k=c[7],m=c[8],l=c[9],p=c[10],t=c[11],s=c[12],q=c[13],n=c[14],c=c[15];b[0].setComponents(f-a,k-h,t-m,c-s).normalize();b[1].setComponents(f+
a,k+h,t+m,c+s).normalize();b[2].setComponents(f+d,k+g,t+l,c+q).normalize();b[3].setComponents(f-d,k-g,t-l,c-q).normalize();b[4].setComponents(f-e,k-i,t-p,c-n).normalize();b[5].setComponents(f+e,k+i,t+p,c+n).normalize();return this},intersectsObject:function(){var a=new THREE.Sphere;return function(b){var c=b.geometry;null===c.boundingSphere&&c.computeBoundingSphere();a.copy(c.boundingSphere);a.applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),intersectsSphere:function(a){for(var b=this.planes,
c=a.center,a=-a.radius,d=0;6>d;d++)if(b[d].distanceToPoint(c)<a)return!1;return!0},intersectsBox:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c){for(var d=this.planes,e=0;6>e;e++){var f=d[e];a.x=0<f.normal.x?c.min.x:c.max.x;b.x=0<f.normal.x?c.max.x:c.min.x;a.y=0<f.normal.y?c.min.y:c.max.y;b.y=0<f.normal.y?c.max.y:c.min.y;a.z=0<f.normal.z?c.min.z:c.max.z;b.z=0<f.normal.z?c.max.z:c.min.z;var h=f.distanceToPoint(a),f=f.distanceToPoint(b);if(0>h&&0>f)return!1}return!0}}(),containsPoint:function(a){for(var b=
this.planes,c=0;6>c;c++)if(0>b[c].distanceToPoint(a))return!1;return!0},clone:function(){return(new THREE.Frustum).copy(this)}};THREE.Plane=function(a,b){this.normal=void 0!==a?a:new THREE.Vector3(1,0,0);this.constant=void 0!==b?b:0};
THREE.Plane.prototype={constructor:THREE.Plane,set:function(a,b){this.normal.copy(a);this.constant=b;return this},setComponents:function(a,b,c,d){this.normal.set(a,b,c);this.constant=d;return this},setFromNormalAndCoplanarPoint:function(a,b){this.normal.copy(a);this.constant=-b.dot(this.normal);return this},setFromCoplanarPoints:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,d,e){d=a.subVectors(e,d).cross(b.subVectors(c,d)).normalize();this.setFromNormalAndCoplanarPoint(d,
c);return this}}(),copy:function(a){this.normal.copy(a.normal);this.constant=a.constant;return this},normalize:function(){var a=1/this.normal.length();this.normal.multiplyScalar(a);this.constant*=a;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(a){return this.normal.dot(a)+this.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function(a,b){return this.orthoPoint(a,b).sub(a).negate()},orthoPoint:function(a,
b){var c=this.distanceToPoint(a);return(b||new THREE.Vector3).copy(this.normal).multiplyScalar(c)},isIntersectionLine:function(a){var b=this.distanceToPoint(a.start),a=this.distanceToPoint(a.end);return 0>b&&0<a||0>a&&0<b},intersectLine:function(){var a=new THREE.Vector3;return function(b,c){var d=c||new THREE.Vector3,e=b.delta(a),f=this.normal.dot(e);if(0==f){if(0==this.distanceToPoint(b.start))return d.copy(b.start)}else return f=-(b.start.dot(this.normal)+this.constant)/f,0>f||1<f?void 0:d.copy(e).multiplyScalar(f).add(b.start)}}(),
coplanarPoint:function(a){return(a||new THREE.Vector3).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Matrix3;return function(d,e){var f=e||c.getNormalMatrix(d),f=a.copy(this.normal).applyMatrix3(f),h=this.coplanarPoint(b);h.applyMatrix4(d);this.setFromNormalAndCoplanarPoint(f,h);return this}}(),translate:function(a){this.constant-=a.dot(this.normal);return this},equals:function(a){return a.normal.equals(this.normal)&&
a.constant==this.constant},clone:function(){return(new THREE.Plane).copy(this)}};THREE.Math={PI2:2*Math.PI,generateUUID:function(){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),b=Array(36),c=0,d;return function(){for(var e=0;36>e;e++)8==e||13==e||18==e||23==e?b[e]="-":14==e?b[e]="4":(2>=c&&(c=33554432+16777216*Math.random()|0),d=c&15,c>>=4,b[e]=a[19==e?d&3|8:d]);return b.join("")}}(),clamp:function(a,b,c){return a<b?b:a>c?c:a},clampBottom:function(a,b){return a<b?b:a},mapLinear:function(a,b,c,d,e){return d+(a-b)*(e-d)/(c-b)},smoothstep:function(a,
b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*(3-2*a)},smootherstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*a*(a*(6*a-15)+10)},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*(0.5-Math.random())},sign:function(a){return 0>a?-1:0<a?1:0},degToRad:function(){var a=Math.PI/
180;return function(b){return b*a}}(),radToDeg:function(){var a=180/Math.PI;return function(b){return b*a}}()};THREE.Spline=function(a){function b(a,b,c,d,e,f,h){a=0.5*(c-a);d=0.5*(d-b);return(2*(b-c)+a+d)*h+(-3*(b-c)-2*a-d)*f+a*e+b}this.points=a;var c=[],d={x:0,y:0,z:0},e,f,h,g,i,k,m,l,p;this.initFromArray=function(a){this.points=[];for(var b=0;b<a.length;b++)this.points[b]={x:a[b][0],y:a[b][1],z:a[b][2]}};this.getPoint=function(a){e=(this.points.length-1)*a;f=Math.floor(e);h=e-f;c[0]=0===f?f:f-1;c[1]=f;c[2]=f>this.points.length-2?this.points.length-1:f+1;c[3]=f>this.points.length-3?this.points.length-1:
f+2;k=this.points[c[0]];m=this.points[c[1]];l=this.points[c[2]];p=this.points[c[3]];g=h*h;i=h*g;d.x=b(k.x,m.x,l.x,p.x,h,g,i);d.y=b(k.y,m.y,l.y,p.y,h,g,i);d.z=b(k.z,m.z,l.z,p.z,h,g,i);return d};this.getControlPointsArray=function(){var a,b,c=this.points.length,d=[];for(a=0;a<c;a++)b=this.points[a],d[a]=[b.x,b.y,b.z];return d};this.getLength=function(a){var b,c,d,e=b=b=0,f=new THREE.Vector3,h=new THREE.Vector3,g=[],i=0;g[0]=0;a||(a=100);c=this.points.length*a;f.copy(this.points[0]);for(a=1;a<c;a++)b=
a/c,d=this.getPoint(b),h.copy(d),i+=h.distanceTo(f),f.copy(d),b*=this.points.length-1,b=Math.floor(b),b!=e&&(g[b]=i,e=b);g[g.length]=i;return{chunks:g,total:i}};this.reparametrizeByArcLength=function(a){var b,c,d,e,f,h,g=[],i=new THREE.Vector3,k=this.getLength();g.push(i.copy(this.points[0]).clone());for(b=1;b<this.points.length;b++){c=k.chunks[b]-k.chunks[b-1];h=Math.ceil(a*c/k.total);e=(b-1)/(this.points.length-1);f=b/(this.points.length-1);for(c=1;c<h-1;c++)d=e+c*(1/h)*(f-e),d=this.getPoint(d),
g.push(i.copy(d).clone());g.push(i.copy(this.points[b]).clone())}this.points=g}};THREE.Triangle=function(a,b,c){this.a=void 0!==a?a:new THREE.Vector3;this.b=void 0!==b?b:new THREE.Vector3;this.c=void 0!==c?c:new THREE.Vector3};THREE.Triangle.normal=function(){var a=new THREE.Vector3;return function(b,c,d,e){e=e||new THREE.Vector3;e.subVectors(d,c);a.subVectors(b,c);e.cross(a);b=e.lengthSq();return 0<b?e.multiplyScalar(1/Math.sqrt(b)):e.set(0,0,0)}}();
THREE.Triangle.barycoordFromPoint=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(d,e,f,h,g){a.subVectors(h,e);b.subVectors(f,e);c.subVectors(d,e);var d=a.dot(a),e=a.dot(b),f=a.dot(c),i=b.dot(b),h=b.dot(c),k=d*i-e*e,g=g||new THREE.Vector3;if(0==k)return g.set(-2,-1,-1);k=1/k;i=(i*f-e*h)*k;d=(d*h-e*f)*k;return g.set(1-i-d,d,i)}}();
THREE.Triangle.containsPoint=function(){var a=new THREE.Vector3;return function(b,c,d,e){b=THREE.Triangle.barycoordFromPoint(b,c,d,e,a);return 0<=b.x&&0<=b.y&&1>=b.x+b.y}}();
THREE.Triangle.prototype={constructor:THREE.Triangle,set:function(a,b,c){this.a.copy(a);this.b.copy(b);this.c.copy(c);return this},setFromPointsAndIndices:function(a,b,c,d){this.a.copy(a[b]);this.b.copy(a[c]);this.c.copy(a[d]);return this},copy:function(a){this.a.copy(a.a);this.b.copy(a.b);this.c.copy(a.c);return this},area:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(){a.subVectors(this.c,this.b);b.subVectors(this.a,this.b);return 0.5*a.cross(b).length()}}(),midpoint:function(a){return(a||
new THREE.Vector3).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(a){return THREE.Triangle.normal(this.a,this.b,this.c,a)},plane:function(a){return(a||new THREE.Plane).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(a,b){return THREE.Triangle.barycoordFromPoint(a,this.a,this.b,this.c,b)},containsPoint:function(a){return THREE.Triangle.containsPoint(a,this.a,this.b,this.c)},equals:function(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)},
clone:function(){return(new THREE.Triangle).copy(this)}};THREE.Vertex=function(a){console.warn("THREE.Vertex has been DEPRECATED. Use THREE.Vector3 instead.");return a};THREE.UV=function(a,b){console.warn("THREE.UV has been DEPRECATED. Use THREE.Vector2 instead.");return new THREE.Vector2(a,b)};THREE.Clock=function(a){this.autoStart=void 0!==a?a:!0;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1};
THREE.Clock.prototype={constructor:THREE.Clock,start:function(){this.oldTime=this.startTime=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now();this.running=!0},stop:function(){this.getElapsedTime();this.running=!1},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var a=0;this.autoStart&&!this.running&&this.start();if(this.running){var b=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now(),
a=0.001*(b-this.oldTime);this.oldTime=b;this.elapsedTime+=a}return a}};THREE.EventDispatcher=function(){};
THREE.EventDispatcher.prototype={constructor:THREE.EventDispatcher,apply:function(a){a.addEventListener=THREE.EventDispatcher.prototype.addEventListener;a.hasEventListener=THREE.EventDispatcher.prototype.hasEventListener;a.removeEventListener=THREE.EventDispatcher.prototype.removeEventListener;a.dispatchEvent=THREE.EventDispatcher.prototype.dispatchEvent},addEventListener:function(a,b){void 0===this._listeners&&(this._listeners={});var c=this._listeners;void 0===c[a]&&(c[a]=[]);-1===c[a].indexOf(b)&&
c[a].push(b)},hasEventListener:function(a,b){if(void 0===this._listeners)return!1;var c=this._listeners;return void 0!==c[a]&&-1!==c[a].indexOf(b)?!0:!1},removeEventListener:function(a,b){if(void 0!==this._listeners){var c=this._listeners[a];if(void 0!==c){var d=c.indexOf(b);-1!==d&&c.splice(d,1)}}},dispatchEvent:function(){var a=[];return function(b){if(void 0!==this._listeners){var c=this._listeners[b.type];if(void 0!==c){b.target=this;for(var d=c.length,e=0;e<d;e++)a[e]=c[e];for(e=0;e<d;e++)a[e].call(this,
b)}}}}()};(function(a){a.Raycaster=function(b,c,d,e){this.ray=new a.Ray(b,c);this.near=d||0;this.far=e||Infinity};var b=new a.Sphere,c=new a.Ray;new a.Plane;new a.Vector3;var d=new a.Vector3,e=new a.Matrix4,f=function(a,b){return a.distance-b.distance},h=new a.Vector3,g=new a.Vector3,i=new a.Vector3,k=function(f,m,t){if(f instanceof a.Sprite){d.setFromMatrixPosition(f.matrixWorld);var s=m.ray.distanceToPoint(d);if(s>f.scale.x)return t;t.push({distance:s,point:f.position,face:null,object:f})}else if(f instanceof
a.LOD)d.setFromMatrixPosition(f.matrixWorld),s=m.ray.origin.distanceTo(d),k(f.getObjectForDistance(s),m,t);else if(f instanceof a.Mesh){var q=f.geometry;null===q.boundingSphere&&q.computeBoundingSphere();b.copy(q.boundingSphere);b.applyMatrix4(f.matrixWorld);if(!1===m.ray.isIntersectionSphere(b))return t;e.getInverse(f.matrixWorld);c.copy(m.ray).applyMatrix4(e);if(null!==q.boundingBox&&!1===c.isIntersectionBox(q.boundingBox))return t;if(q instanceof a.BufferGeometry){var n=f.material;if(void 0===
n||!1===q.dynamic)return t;var u,r,v=m.precision;if(void 0!==q.attributes.index)for(var z=q.offsets,G=q.attributes.index.array,w=q.attributes.position.array,y=q.offsets.length,E=q.attributes.index.array.length/3,E=0;E<y;++E)for(var s=z[E].start,A=z[E].index,q=s,K=s+z[E].count;q<K;q+=3)s=A+G[q],u=A+G[q+1],r=A+G[q+2],h.set(w[3*s],w[3*s+1],w[3*s+2]),g.set(w[3*u],w[3*u+1],w[3*u+2]),i.set(w[3*r],w[3*r+1],w[3*r+2]),u=n.side===a.BackSide?c.intersectTriangle(i,g,h,!0):c.intersectTriangle(h,g,i,n.side!==a.DoubleSide),
null!==u&&(u.applyMatrix4(f.matrixWorld),s=m.ray.origin.distanceTo(u),s<v||(s<m.near||s>m.far)||t.push({distance:s,point:u,face:null,faceIndex:null,object:f}));else{w=q.attributes.position.array;E=q.attributes.position.array.length;for(q=0;q<E;q+=3)s=q,u=q+1,r=q+2,h.set(w[3*s],w[3*s+1],w[3*s+2]),g.set(w[3*u],w[3*u+1],w[3*u+2]),i.set(w[3*r],w[3*r+1],w[3*r+2]),u=n.side===a.BackSide?c.intersectTriangle(i,g,h,!0):c.intersectTriangle(h,g,i,n.side!==a.DoubleSide),null!==u&&(u.applyMatrix4(f.matrixWorld),
s=m.ray.origin.distanceTo(u),s<v||(s<m.near||s>m.far)||t.push({distance:s,point:u,face:null,faceIndex:null,object:f}))}}else if(q instanceof a.Geometry){G=f.material instanceof a.MeshFaceMaterial;w=!0===G?f.material.materials:null;v=m.precision;z=q.vertices;y=0;for(E=q.faces.length;y<E;y++)A=q.faces[y],n=!0===G?w[A.materialIndex]:f.material,void 0!==n&&(s=z[A.a],u=z[A.b],r=z[A.c],u=n.side===a.BackSide?c.intersectTriangle(r,u,s,!0):c.intersectTriangle(s,u,r,n.side!==a.DoubleSide),null!==u&&(u.applyMatrix4(f.matrixWorld),
s=m.ray.origin.distanceTo(u),s<v||(s<m.near||s>m.far)||t.push({distance:s,point:u,face:A,faceIndex:y,object:f})))}}else if(f instanceof a.Line){v=m.linePrecision;n=v*v;q=f.geometry;null===q.boundingSphere&&q.computeBoundingSphere();b.copy(q.boundingSphere);b.applyMatrix4(f.matrixWorld);if(!1===m.ray.isIntersectionSphere(b))return t;e.getInverse(f.matrixWorld);c.copy(m.ray).applyMatrix4(e);if(q instanceof a.Geometry){z=q.vertices;v=z.length;u=new a.Vector3;r=new a.Vector3;E=f.type===a.LineStrip?1:
2;for(q=0;q<v-1;q+=E)c.distanceSqToSegment(z[q],z[q+1],r,u)>n||(s=c.origin.distanceTo(r),s<m.near||s>m.far||t.push({distance:s,point:u.clone().applyMatrix4(f.matrixWorld),face:null,faceIndex:null,object:f}))}}},m=function(a,b,c){for(var a=a.getDescendants(),d=0,e=a.length;d<e;d++)k(a[d],b,c)};a.Raycaster.prototype.precision=1E-4;a.Raycaster.prototype.linePrecision=1;a.Raycaster.prototype.set=function(a,b){this.ray.set(a,b)};a.Raycaster.prototype.intersectObject=function(a,b){var c=[];!0===b&&m(a,
this,c);k(a,this,c);c.sort(f);return c};a.Raycaster.prototype.intersectObjects=function(a,b){for(var c=[],d=0,e=a.length;d<e;d++)k(a[d],this,c),!0===b&&m(a[d],this,c);c.sort(f);return c}})(THREE);THREE.Object3D=function(){this.id=THREE.Object3DIdCount++;this.uuid=THREE.Math.generateUUID();this.name="";this.parent=void 0;this.children=[];this.up=new THREE.Vector3(0,1,0);this.position=new THREE.Vector3;this._rotation=new THREE.Euler;this._quaternion=new THREE.Quaternion;this.scale=new THREE.Vector3(1,1,1);this._rotation._quaternion=this.quaternion;this._quaternion._euler=this.rotation;this.renderDepth=null;this.rotationAutoUpdate=!0;this.matrix=new THREE.Matrix4;this.matrixWorld=new THREE.Matrix4;
this.visible=this.matrixWorldNeedsUpdate=this.matrixAutoUpdate=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.userData={}};
THREE.Object3D.prototype={constructor:THREE.Object3D,get rotation(){return this._rotation},set rotation(a){this._rotation=a;this._rotation._quaternion=this._quaternion;this._quaternion._euler=this._rotation;this._rotation._updateQuaternion()},get quaternion(){return this._quaternion},set quaternion(a){this._quaternion=a;this._quaternion._euler=this._rotation;this._rotation._quaternion=this._quaternion;this._quaternion._updateEuler()},get eulerOrder(){console.warn("DEPRECATED: Object3D's .eulerOrder has been moved to Object3D's .rotation.order.");
return this.rotation.order},set eulerOrder(a){console.warn("DEPRECATED: Object3D's .eulerOrder has been moved to Object3D's .rotation.order.");this.rotation.order=a},get useQuaternion(){console.warn("DEPRECATED: Object3D's .useQuaternion has been removed. The library now uses quaternions by default.")},set useQuaternion(a){console.warn("DEPRECATED: Object3D's .useQuaternion has been removed. The library now uses quaternions by default.")},applyMatrix:function(){var a=new THREE.Matrix4;return function(b){this.matrix.multiplyMatrices(b,
this.matrix);this.position.setFromMatrixPosition(this.matrix);this.scale.setFromMatrixScale(this.matrix);a.extractRotation(this.matrix);this.quaternion.setFromRotationMatrix(a)}}(),setRotationFromAxisAngle:function(a,b){this.quaternion.setFromAxisAngle(a,b)},setRotationFromEuler:function(a){this.quaternion.setFromEuler(a,!0)},setRotationFromMatrix:function(a){this.quaternion.setFromRotationMatrix(a)},setRotationFromQuaternion:function(a){this.quaternion.copy(a)},rotateOnAxis:function(){var a=new THREE.Quaternion;
return function(b,c){a.setFromAxisAngle(b,c);this.quaternion.multiply(a);return this}}(),rotateX:function(){var a=new THREE.Vector3(1,0,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateY:function(){var a=new THREE.Vector3(0,1,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateZ:function(){var a=new THREE.Vector3(0,0,1);return function(b){return this.rotateOnAxis(a,b)}}(),translateOnAxis:function(){var a=new THREE.Vector3;return function(b,c){a.copy(b);a.applyQuaternion(this.quaternion);
this.position.add(a.multiplyScalar(c));return this}}(),translate:function(a,b){console.warn("DEPRECATED: Object3D's .translate() has been removed. Use .translateOnAxis( axis, distance ) instead. Note args have been changed.");return this.translateOnAxis(b,a)},translateX:function(){var a=new THREE.Vector3(1,0,0);return function(b){return this.translateOnAxis(a,b)}}(),translateY:function(){var a=new THREE.Vector3(0,1,0);return function(b){return this.translateOnAxis(a,b)}}(),translateZ:function(){var a=
new THREE.Vector3(0,0,1);return function(b){return this.translateOnAxis(a,b)}}(),localToWorld:function(a){return a.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var a=new THREE.Matrix4;return function(b){return b.applyMatrix4(a.getInverse(this.matrixWorld))}}(),lookAt:function(){var a=new THREE.Matrix4;return function(b){a.lookAt(b,this.position,this.up);this.quaternion.setFromRotationMatrix(a)}}(),add:function(a){if(a===this)console.warn("THREE.Object3D.add: An object can't be added as a child of itself.");
else if(a instanceof THREE.Object3D){void 0!==a.parent&&a.parent.remove(a);a.parent=this;a.dispatchEvent({type:"added"});this.children.push(a);for(var b=this;void 0!==b.parent;)b=b.parent;void 0!==b&&b instanceof THREE.Scene&&b.__addObject(a)}},remove:function(a){var b=this.children.indexOf(a);if(-1!==b){a.parent=void 0;a.dispatchEvent({type:"removed"});this.children.splice(b,1);for(b=this;void 0!==b.parent;)b=b.parent;void 0!==b&&b instanceof THREE.Scene&&b.__removeObject(a)}},traverse:function(a){a(this);
for(var b=0,c=this.children.length;b<c;b++)this.children[b].traverse(a)},getObjectById:function(a,b){for(var c=0,d=this.children.length;c<d;c++){var e=this.children[c];if(e.id===a||!0===b&&(e=e.getObjectById(a,b),void 0!==e))return e}},getObjectByName:function(a,b){for(var c=0,d=this.children.length;c<d;c++){var e=this.children[c];if(e.name===a||!0===b&&(e=e.getObjectByName(a,b),void 0!==e))return e}},getChildByName:function(a,b){console.warn("DEPRECATED: Object3D's .getChildByName() has been renamed to .getObjectByName().");
return this.getObjectByName(a,b)},getDescendants:function(a){void 0===a&&(a=[]);Array.prototype.push.apply(a,this.children);for(var b=0,c=this.children.length;b<c;b++)this.children[b].getDescendants(a);return a},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){!0===this.matrixAutoUpdate&&this.updateMatrix();if(!0===this.matrixWorldNeedsUpdate||!0===a)void 0===this.parent?this.matrixWorld.copy(this.matrix):
this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0;for(var b=0,c=this.children.length;b<c;b++)this.children[b].updateMatrixWorld(a)},clone:function(a,b){void 0===a&&(a=new THREE.Object3D);void 0===b&&(b=!0);a.name=this.name;a.up.copy(this.up);a.position.copy(this.position);a.quaternion.copy(this.quaternion);a.scale.copy(this.scale);a.renderDepth=this.renderDepth;a.rotationAutoUpdate=this.rotationAutoUpdate;a.matrix.copy(this.matrix);a.matrixWorld.copy(this.matrixWorld);
a.matrixAutoUpdate=this.matrixAutoUpdate;a.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate;a.visible=this.visible;a.castShadow=this.castShadow;a.receiveShadow=this.receiveShadow;a.frustumCulled=this.frustumCulled;a.userData=JSON.parse(JSON.stringify(this.userData));if(!0===b)for(var c=0;c<this.children.length;c++)a.add(this.children[c].clone());return a}};THREE.EventDispatcher.prototype.apply(THREE.Object3D.prototype);THREE.Object3DIdCount=0;THREE.Projector=function(){function a(){if(i===m){var a=new THREE.RenderableVertex;k.push(a);m++;i++;return a}return k[i++]}function b(a,b){return a.z!==b.z?b.z-a.z:a.id!==b.id?a.id-b.id:0}function c(a,b){var c=0,d=1,e=a.z+a.w,f=b.z+b.w,h=-a.z+a.w,g=-b.z+b.w;if(0<=e&&0<=f&&0<=h&&0<=g)return!0;if(0>e&&0>f||0>h&&0>g)return!1;0>e?c=Math.max(c,e/(e-f)):0>f&&(d=Math.min(d,e/(e-f)));0>h?c=Math.max(c,h/(h-g)):0>g&&(d=Math.min(d,h/(h-g)));if(d<c)return!1;a.lerp(b,c);b.lerp(a,1-d);return!0}var d,e,f=[],h=
0,g,i,k=[],m=0,l,p,t=[],s=0,q,n,u=[],r=0,v,z,G=[],w=0,y={objects:[],sprites:[],lights:[],elements:[]},E=new THREE.Vector3,A=new THREE.Vector4,K=new THREE.Box3(new THREE.Vector3(-1,-1,-1),new THREE.Vector3(1,1,1)),D=new THREE.Box3,F=Array(3),O=new THREE.Matrix4,x=new THREE.Matrix4,I,B=new THREE.Matrix4,M=new THREE.Matrix3,J=new THREE.Matrix3,ca=new THREE.Vector3,na=new THREE.Frustum,pa=new THREE.Vector4,C=new THREE.Vector4;this.projectVector=function(a,b){b.matrixWorldInverse.getInverse(b.matrixWorld);
x.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse);return a.applyProjection(x)};this.unprojectVector=function(a,b){b.projectionMatrixInverse.getInverse(b.projectionMatrix);x.multiplyMatrices(b.matrixWorld,b.projectionMatrixInverse);return a.applyProjection(x)};this.pickingRay=function(a,b){a.z=-1;var c=new THREE.Vector3(a.x,a.y,1);this.unprojectVector(a,b);this.unprojectVector(c,b);c.sub(a).normalize();return new THREE.Raycaster(a,c)};var Q=function(a){if(e===h){var b=new THREE.RenderableObject;
f.push(b);h++;e++;d=b}else d=f[e++];d.id=a.id;d.object=a;null!==a.renderDepth?d.z=a.renderDepth:(E.setFromMatrixPosition(a.matrixWorld),E.applyProjection(x),d.z=E.z);return d},R=function(a){if(!1!==a.visible){a instanceof THREE.Light?y.lights.push(a):a instanceof THREE.Mesh||a instanceof THREE.Line?(!1===a.frustumCulled||!0===na.intersectsObject(a))&&y.objects.push(Q(a)):a instanceof THREE.Sprite&&y.sprites.push(Q(a));for(var b=0,c=a.children.length;b<c;b++)R(a.children[b])}};this.projectScene=function(d,
f,h,m){var E=!1,Q,$,ea,V,P,Y,U,ja,sa,ha,Ka,Ga;z=n=p=0;y.elements.length=0;!0===d.autoUpdate&&d.updateMatrixWorld();void 0===f.parent&&f.updateMatrixWorld();O.copy(f.matrixWorldInverse.getInverse(f.matrixWorld));x.multiplyMatrices(f.projectionMatrix,O);J.getNormalMatrix(O);na.setFromMatrix(x);e=0;y.objects.length=0;y.sprites.length=0;y.lights.length=0;R(d);!0===h&&y.objects.sort(b);d=0;for(h=y.objects.length;d<h;d++)if(U=y.objects[d].object,I=U.matrixWorld,i=0,U instanceof THREE.Mesh){ja=U.geometry;
ea=ja.vertices;sa=ja.faces;ja=ja.faceVertexUvs;M.getNormalMatrix(I);Ka=U.material instanceof THREE.MeshFaceMaterial;Ga=!0===Ka?U.material:null;Q=0;for($=ea.length;Q<$;Q++){g=a();g.positionWorld.copy(ea[Q]).applyMatrix4(I);g.positionScreen.copy(g.positionWorld).applyMatrix4(x);var ka=1/g.positionScreen.w;g.positionScreen.x*=ka;g.positionScreen.y*=ka;g.positionScreen.z*=ka;g.visible=!(-1>g.positionScreen.x||1<g.positionScreen.x||-1>g.positionScreen.y||1<g.positionScreen.y||-1>g.positionScreen.z||1<
g.positionScreen.z)}ea=0;for(Q=sa.length;ea<Q;ea++)if($=sa[ea],ka=!0===Ka?Ga.materials[$.materialIndex]:U.material,void 0!==ka&&(Y=ka.side,V=k[$.a],P=k[$.b],ha=k[$.c],F[0]=V.positionScreen,F[1]=P.positionScreen,F[2]=ha.positionScreen,!0===V.visible||!0===P.visible||!0===ha.visible||K.isIntersectionBox(D.setFromPoints(F))))if(E=0>(ha.positionScreen.x-V.positionScreen.x)*(P.positionScreen.y-V.positionScreen.y)-(ha.positionScreen.y-V.positionScreen.y)*(P.positionScreen.x-V.positionScreen.x),Y===THREE.DoubleSide||
E===(Y===THREE.FrontSide)){if(p===s){var Da=new THREE.RenderableFace3;t.push(Da);s++;p++;l=Da}else l=t[p++];l.id=U.id;l.v1.copy(V);l.v2.copy(P);l.v3.copy(ha);l.normalModel.copy($.normal);!1===E&&(Y===THREE.BackSide||Y===THREE.DoubleSide)&&l.normalModel.negate();l.normalModel.applyMatrix3(M).normalize();l.normalModelView.copy(l.normalModel).applyMatrix3(J);l.centroidModel.copy($.centroid).applyMatrix4(I);ha=$.vertexNormals;V=0;for(P=Math.min(ha.length,3);V<P;V++)Da=l.vertexNormalsModel[V],Da.copy(ha[V]),
!1===E&&(Y===THREE.BackSide||Y===THREE.DoubleSide)&&Da.negate(),Da.applyMatrix3(M).normalize(),l.vertexNormalsModelView[V].copy(Da).applyMatrix3(J);l.vertexNormalsLength=ha.length;E=0;for(V=Math.min(ja.length,3);E<V;E++)if(ha=ja[E][ea],void 0!==ha){P=0;for(Y=ha.length;P<Y;P++)l.uvs[E][P]=ha[P]}l.color=$.color;l.material=ka;ca.copy(l.centroidModel).applyProjection(x);l.z=ca.z;y.elements.push(l)}}else if(U instanceof THREE.Line){B.multiplyMatrices(x,I);ea=U.geometry.vertices;V=a();V.positionScreen.copy(ea[0]).applyMatrix4(B);
sa=U.type===THREE.LinePieces?2:1;Q=1;for($=ea.length;Q<$;Q++)V=a(),V.positionScreen.copy(ea[Q]).applyMatrix4(B),0<(Q+1)%sa||(P=k[i-2],pa.copy(V.positionScreen),C.copy(P.positionScreen),!0===c(pa,C)&&(pa.multiplyScalar(1/pa.w),C.multiplyScalar(1/C.w),n===r?(ja=new THREE.RenderableLine,u.push(ja),r++,n++,q=ja):q=u[n++],q.id=U.id,q.v1.positionScreen.copy(pa),q.v2.positionScreen.copy(C),q.z=Math.max(pa.z,C.z),q.material=U.material,U.material.vertexColors===THREE.VertexColors&&(q.vertexColors[0].copy(U.geometry.colors[Q]),
q.vertexColors[1].copy(U.geometry.colors[Q-1])),y.elements.push(q)))}d=0;for(h=y.sprites.length;d<h;d++)U=y.sprites[d].object,I=U.matrixWorld,A.set(I.elements[12],I.elements[13],I.elements[14],1),A.applyMatrix4(x),ka=1/A.w,A.z*=ka,-1<=A.z&&1>=A.z&&(z===w?(sa=new THREE.RenderableSprite,G.push(sa),w++,z++,v=sa):v=G[z++],v.id=U.id,v.x=A.x*ka,v.y=A.y*ka,v.z=A.z,v.object=U,v.rotation=U.rotation,v.scale.x=U.scale.x*Math.abs(v.x-(A.x+f.projectionMatrix.elements[0])/(A.w+f.projectionMatrix.elements[12])),
v.scale.y=U.scale.y*Math.abs(v.y-(A.y+f.projectionMatrix.elements[5])/(A.w+f.projectionMatrix.elements[13])),v.material=U.material,y.elements.push(v));!0===m&&y.elements.sort(b);return y}};THREE.Face3=function(a,b,c,d,e,f){this.a=a;this.b=b;this.c=c;this.normal=d instanceof THREE.Vector3?d:new THREE.Vector3;this.vertexNormals=d instanceof Array?d:[];this.color=e instanceof THREE.Color?e:new THREE.Color;this.vertexColors=e instanceof Array?e:[];this.vertexTangents=[];this.materialIndex=void 0!==f?f:0;this.centroid=new THREE.Vector3};
THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){var a=new THREE.Face3(this.a,this.b,this.c);a.normal.copy(this.normal);a.color.copy(this.color);a.centroid.copy(this.centroid);a.materialIndex=this.materialIndex;var b,c;b=0;for(c=this.vertexNormals.length;b<c;b++)a.vertexNormals[b]=this.vertexNormals[b].clone();b=0;for(c=this.vertexColors.length;b<c;b++)a.vertexColors[b]=this.vertexColors[b].clone();b=0;for(c=this.vertexTangents.length;b<c;b++)a.vertexTangents[b]=this.vertexTangents[b].clone();
return a}};THREE.Face4=function(a,b,c,d,e,f,h){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new THREE.Face3(a,b,c,e,f,h)};THREE.Geometry=function(){this.id=THREE.GeometryIdCount++;this.uuid=THREE.Math.generateUUID();this.name="";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphColors=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.hasTangents=!1;this.dynamic=!0;this.buffersNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.tangentsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=
this.elementsNeedUpdate=this.verticesNeedUpdate=!1};
THREE.Geometry.prototype={constructor:THREE.Geometry,applyMatrix:function(a){for(var b=(new THREE.Matrix3).getNormalMatrix(a),c=0,d=this.vertices.length;c<d;c++)this.vertices[c].applyMatrix4(a);c=0;for(d=this.faces.length;c<d;c++){var e=this.faces[c];e.normal.applyMatrix3(b).normalize();for(var f=0,h=e.vertexNormals.length;f<h;f++)e.vertexNormals[f].applyMatrix3(b).normalize();e.centroid.applyMatrix4(a)}this.boundingBox instanceof THREE.Box3&&this.computeBoundingBox();this.boundingSphere instanceof
THREE.Sphere&&this.computeBoundingSphere()},computeCentroids:function(){var a,b,c;a=0;for(b=this.faces.length;a<b;a++)c=this.faces[a],c.centroid.set(0,0,0),c.centroid.add(this.vertices[c.a]),c.centroid.add(this.vertices[c.b]),c.centroid.add(this.vertices[c.c]),c.centroid.divideScalar(3)},computeFaceNormals:function(){for(var a=new THREE.Vector3,b=new THREE.Vector3,c=0,d=this.faces.length;c<d;c++){var e=this.faces[c],f=this.vertices[e.a],h=this.vertices[e.b];a.subVectors(this.vertices[e.c],h);b.subVectors(f,
h);a.cross(b);a.normalize();e.normal.copy(a)}},computeVertexNormals:function(a){var b,c,d,e;if(void 0===this.__tmpVertices){e=this.__tmpVertices=Array(this.vertices.length);b=0;for(c=this.vertices.length;b<c;b++)e[b]=new THREE.Vector3;b=0;for(c=this.faces.length;b<c;b++)d=this.faces[b],d.vertexNormals=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3]}else{e=this.__tmpVertices;b=0;for(c=this.vertices.length;b<c;b++)e[b].set(0,0,0)}if(a){var f,h,g=new THREE.Vector3,i=new THREE.Vector3;new THREE.Vector3;
new THREE.Vector3;new THREE.Vector3;b=0;for(c=this.faces.length;b<c;b++)d=this.faces[b],a=this.vertices[d.a],f=this.vertices[d.b],h=this.vertices[d.c],g.subVectors(h,f),i.subVectors(a,f),g.cross(i),e[d.a].add(g),e[d.b].add(g),e[d.c].add(g)}else{b=0;for(c=this.faces.length;b<c;b++)d=this.faces[b],e[d.a].add(d.normal),e[d.b].add(d.normal),e[d.c].add(d.normal)}b=0;for(c=this.vertices.length;b<c;b++)e[b].normalize();b=0;for(c=this.faces.length;b<c;b++)d=this.faces[b],d.vertexNormals[0].copy(e[d.a]),d.vertexNormals[1].copy(e[d.b]),
d.vertexNormals[2].copy(e[d.c])},computeMorphNormals:function(){var a,b,c,d,e;c=0;for(d=this.faces.length;c<d;c++){e=this.faces[c];e.__originalFaceNormal?e.__originalFaceNormal.copy(e.normal):e.__originalFaceNormal=e.normal.clone();e.__originalVertexNormals||(e.__originalVertexNormals=[]);a=0;for(b=e.vertexNormals.length;a<b;a++)e.__originalVertexNormals[a]?e.__originalVertexNormals[a].copy(e.vertexNormals[a]):e.__originalVertexNormals[a]=e.vertexNormals[a].clone()}var f=new THREE.Geometry;f.faces=
this.faces;a=0;for(b=this.morphTargets.length;a<b;a++){if(!this.morphNormals[a]){this.morphNormals[a]={};this.morphNormals[a].faceNormals=[];this.morphNormals[a].vertexNormals=[];e=this.morphNormals[a].faceNormals;var h=this.morphNormals[a].vertexNormals,g,i;c=0;for(d=this.faces.length;c<d;c++)g=new THREE.Vector3,i={a:new THREE.Vector3,b:new THREE.Vector3,c:new THREE.Vector3},e.push(g),h.push(i)}h=this.morphNormals[a];f.vertices=this.morphTargets[a].vertices;f.computeFaceNormals();f.computeVertexNormals();
c=0;for(d=this.faces.length;c<d;c++)e=this.faces[c],g=h.faceNormals[c],i=h.vertexNormals[c],g.copy(e.normal),i.a.copy(e.vertexNormals[0]),i.b.copy(e.vertexNormals[1]),i.c.copy(e.vertexNormals[2])}c=0;for(d=this.faces.length;c<d;c++)e=this.faces[c],e.normal=e.__originalFaceNormal,e.vertexNormals=e.__originalVertexNormals},computeTangents:function(){var a,b,c,d,e,f,h,g,i,k,m,l,p,t,s,q,n,u=[],r=[];c=new THREE.Vector3;var v=new THREE.Vector3,z=new THREE.Vector3,G=new THREE.Vector3,w=new THREE.Vector3;
a=0;for(b=this.vertices.length;a<b;a++)u[a]=new THREE.Vector3,r[a]=new THREE.Vector3;a=0;for(b=this.faces.length;a<b;a++)e=this.faces[a],f=this.faceVertexUvs[0][a],d=e.a,n=e.b,e=e.c,h=this.vertices[d],g=this.vertices[n],i=this.vertices[e],k=f[0],m=f[1],l=f[2],f=g.x-h.x,p=i.x-h.x,t=g.y-h.y,s=i.y-h.y,g=g.z-h.z,h=i.z-h.z,i=m.x-k.x,q=l.x-k.x,m=m.y-k.y,k=l.y-k.y,l=1/(i*k-q*m),c.set((k*f-m*p)*l,(k*t-m*s)*l,(k*g-m*h)*l),v.set((i*p-q*f)*l,(i*s-q*t)*l,(i*h-q*g)*l),u[d].add(c),u[n].add(c),u[e].add(c),r[d].add(v),
r[n].add(v),r[e].add(v);v=["a","b","c","d"];a=0;for(b=this.faces.length;a<b;a++){e=this.faces[a];for(c=0;c<Math.min(e.vertexNormals.length,3);c++)w.copy(e.vertexNormals[c]),d=e[v[c]],n=u[d],z.copy(n),z.sub(w.multiplyScalar(w.dot(n))).normalize(),G.crossVectors(e.vertexNormals[c],n),d=G.dot(r[d]),d=0>d?-1:1,e.vertexTangents[c]=new THREE.Vector4(z.x,z.y,z.z,d)}this.hasTangents=!0},computeLineDistances:function(){for(var a=0,b=this.vertices,c=0,d=b.length;c<d;c++)0<c&&(a+=b[c].distanceTo(b[c-1])),this.lineDistances[c]=
a},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);this.boundingSphere.setFromPoints(this.vertices)},mergeVertices:function(){var a={},b=[],c=[],d,e=Math.pow(10,4),f,h;this.__tmpVertices=void 0;f=0;for(h=this.vertices.length;f<h;f++)d=this.vertices[f],d=Math.round(d.x*e)+"_"+Math.round(d.y*e)+"_"+Math.round(d.z*
e),void 0===a[d]?(a[d]=f,b.push(this.vertices[f]),c[f]=b.length-1):c[f]=c[a[d]];a=[];f=0;for(h=this.faces.length;f<h;f++){e=this.faces[f];e.a=c[e.a];e.b=c[e.b];e.c=c[e.c];e=[e.a,e.b,e.c];for(d=0;3>d;d++)if(e[d]==e[(d+1)%3]){a.push(f);break}}for(f=a.length-1;0<=f;f--){e=a[f];this.faces.splice(e,1);c=0;for(h=this.faceVertexUvs.length;c<h;c++)this.faceVertexUvs[c].splice(e,1)}f=this.vertices.length-b.length;this.vertices=b;return f},clone:function(){for(var a=new THREE.Geometry,b=this.vertices,c=0,d=
b.length;c<d;c++)a.vertices.push(b[c].clone());b=this.faces;c=0;for(d=b.length;c<d;c++)a.faces.push(b[c].clone());b=this.faceVertexUvs[0];c=0;for(d=b.length;c<d;c++){for(var e=b[c],f=[],h=0,g=e.length;h<g;h++)f.push(new THREE.Vector2(e[h].x,e[h].y));a.faceVertexUvs[0].push(f)}return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.Geometry.prototype);THREE.GeometryIdCount=0;THREE.BufferGeometry=function(){this.id=THREE.GeometryIdCount++;this.uuid=THREE.Math.generateUUID();this.name="";this.attributes={};this.dynamic=!0;this.offsets=[];this.boundingSphere=this.boundingBox=null;this.hasTangents=!1;this.morphTargets=[]};
THREE.BufferGeometry.prototype={constructor:THREE.BufferGeometry,addAttribute:function(a,b,c,d){this.attributes[a]={itemSize:d,array:new b(c*d)}},applyMatrix:function(a){var b,c;this.attributes.position&&(b=this.attributes.position.array);this.attributes.normal&&(c=this.attributes.normal.array);void 0!==b&&(a.multiplyVector3Array(b),this.verticesNeedUpdate=!0);void 0!==c&&((new THREE.Matrix3).getNormalMatrix(a).multiplyVector3Array(c),this.normalizeNormals(),this.normalsNeedUpdate=!0)},computeBoundingBox:function(){null===
this.boundingBox&&(this.boundingBox=new THREE.Box3);var a=this.attributes.position.array;if(a){var b=this.boundingBox,c,d,e;3<=a.length&&(b.min.x=b.max.x=a[0],b.min.y=b.max.y=a[1],b.min.z=b.max.z=a[2]);for(var f=3,h=a.length;f<h;f+=3)c=a[f],d=a[f+1],e=a[f+2],c<b.min.x?b.min.x=c:c>b.max.x&&(b.max.x=c),d<b.min.y?b.min.y=d:d>b.max.y&&(b.max.y=d),e<b.min.z?b.min.z=e:e>b.max.z&&(b.max.z=e)}if(void 0===a||0===a.length)this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0)},computeBoundingSphere:function(){var a=
new THREE.Box3,b=new THREE.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var c=this.attributes.position.array;if(c){for(var d=this.boundingSphere.center,e=0,f=c.length;e<f;e+=3)b.set(c[e],c[e+1],c[e+2]),a.addPoint(b);a.center(d);for(var h=0,e=0,f=c.length;e<f;e+=3)b.set(c[e],c[e+1],c[e+2]),h=Math.max(h,d.distanceToSquared(b));this.boundingSphere.radius=Math.sqrt(h)}}}(),computeVertexNormals:function(){if(this.attributes.position){var a,b,c,d;a=this.attributes.position.array.length;
if(void 0===this.attributes.normal)this.attributes.normal={itemSize:3,array:new Float32Array(a)};else{a=0;for(b=this.attributes.normal.array.length;a<b;a++)this.attributes.normal.array[a]=0}var e=this.attributes.position.array,f=this.attributes.normal.array,h,g,i,k,m,l,p=new THREE.Vector3,t=new THREE.Vector3,s=new THREE.Vector3,q=new THREE.Vector3,n=new THREE.Vector3;if(this.attributes.index){var u=this.attributes.index.array,r=this.offsets;c=0;for(d=r.length;c<d;++c){b=r[c].start;h=r[c].count;var v=
r[c].index;a=b;for(b+=h;a<b;a+=3)h=v+u[a],g=v+u[a+1],i=v+u[a+2],k=e[3*h],m=e[3*h+1],l=e[3*h+2],p.set(k,m,l),k=e[3*g],m=e[3*g+1],l=e[3*g+2],t.set(k,m,l),k=e[3*i],m=e[3*i+1],l=e[3*i+2],s.set(k,m,l),q.subVectors(s,t),n.subVectors(p,t),q.cross(n),f[3*h]+=q.x,f[3*h+1]+=q.y,f[3*h+2]+=q.z,f[3*g]+=q.x,f[3*g+1]+=q.y,f[3*g+2]+=q.z,f[3*i]+=q.x,f[3*i+1]+=q.y,f[3*i+2]+=q.z}}else{a=0;for(b=e.length;a<b;a+=9)k=e[a],m=e[a+1],l=e[a+2],p.set(k,m,l),k=e[a+3],m=e[a+4],l=e[a+5],t.set(k,m,l),k=e[a+6],m=e[a+7],l=e[a+8],
s.set(k,m,l),q.subVectors(s,t),n.subVectors(p,t),q.cross(n),f[a]=q.x,f[a+1]=q.y,f[a+2]=q.z,f[a+3]=q.x,f[a+4]=q.y,f[a+5]=q.z,f[a+6]=q.x,f[a+7]=q.y,f[a+8]=q.z}this.normalizeNormals();this.normalsNeedUpdate=!0}},normalizeNormals:function(){for(var a=this.attributes.normal.array,b,c,d,e=0,f=a.length;e<f;e+=3)b=a[e],c=a[e+1],d=a[e+2],b=1/Math.sqrt(b*b+c*c+d*d),a[e]*=b,a[e+1]*=b,a[e+2]*=b},computeTangents:function(){function a(a){na.x=d[3*a];na.y=d[3*a+1];na.z=d[3*a+2];pa.copy(na);Q=g[a];J.copy(Q);J.sub(na.multiplyScalar(na.dot(Q))).normalize();
ca.crossVectors(pa,Q);R=ca.dot(i[a]);C=0>R?-1:1;h[4*a]=J.x;h[4*a+1]=J.y;h[4*a+2]=J.z;h[4*a+3]=C}if(void 0===this.attributes.index||void 0===this.attributes.position||void 0===this.attributes.normal||void 0===this.attributes.uv)console.warn("Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");else{var b=this.attributes.index.array,c=this.attributes.position.array,d=this.attributes.normal.array,e=this.attributes.uv.array,f=c.length/3;void 0===this.attributes.tangent&&
(this.attributes.tangent={itemSize:4,array:new Float32Array(4*f)});for(var h=this.attributes.tangent.array,g=[],i=[],k=0;k<f;k++)g[k]=new THREE.Vector3,i[k]=new THREE.Vector3;var m,l,p,t,s,q,n,u,r,v,z,G,w,y,E,f=new THREE.Vector3,k=new THREE.Vector3,A,K,D,F,O,x,I,B=this.offsets;D=0;for(F=B.length;D<F;++D){K=B[D].start;O=B[D].count;var M=B[D].index;A=K;for(K+=O;A<K;A+=3)O=M+b[A],x=M+b[A+1],I=M+b[A+2],m=c[3*O],l=c[3*O+1],p=c[3*O+2],t=c[3*x],s=c[3*x+1],q=c[3*x+2],n=c[3*I],u=c[3*I+1],r=c[3*I+2],v=e[2*
O],z=e[2*O+1],G=e[2*x],w=e[2*x+1],y=e[2*I],E=e[2*I+1],t-=m,m=n-m,s-=l,l=u-l,q-=p,p=r-p,G-=v,v=y-v,w-=z,z=E-z,E=1/(G*z-v*w),f.set((z*t-w*m)*E,(z*s-w*l)*E,(z*q-w*p)*E),k.set((G*m-v*t)*E,(G*l-v*s)*E,(G*p-v*q)*E),g[O].add(f),g[x].add(f),g[I].add(f),i[O].add(k),i[x].add(k),i[I].add(k)}var J=new THREE.Vector3,ca=new THREE.Vector3,na=new THREE.Vector3,pa=new THREE.Vector3,C,Q,R;D=0;for(F=B.length;D<F;++D){K=B[D].start;O=B[D].count;M=B[D].index;A=K;for(K+=O;A<K;A+=3)O=M+b[A],x=M+b[A+1],I=M+b[A+2],a(O),a(x),
a(I)}this.tangentsNeedUpdate=this.hasTangents=!0}},clone:function(){var a=new THREE.BufferGeometry,b=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],c;for(c in this.attributes){for(var d=this.attributes[c],e=d.array,f={itemSize:d.itemSize,numItems:d.numItems,array:null},d=0,h=b.length;d<h;d++){var g=b[d];if(e instanceof g){f.array=new g(e);break}}a.attributes[c]=f}d=0;for(h=this.offsets.length;d<h;d++)b=this.offsets[d],a.offsets.push({start:b.start,
index:b.index,count:b.count});return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.BufferGeometry.prototype);THREE.Camera=function(){THREE.Object3D.call(this);this.matrixWorldInverse=new THREE.Matrix4;this.projectionMatrix=new THREE.Matrix4;this.projectionMatrixInverse=new THREE.Matrix4};THREE.Camera.prototype=Object.create(THREE.Object3D.prototype);THREE.Camera.prototype.lookAt=function(){var a=new THREE.Matrix4;return function(b){a.lookAt(this.position,b,this.up);this.quaternion.setFromRotationMatrix(a)}}();
THREE.Camera.prototype.clone=function(a){void 0===a&&(a=new THREE.Camera);THREE.Object3D.prototype.clone.call(this,a);a.matrixWorldInverse.copy(this.matrixWorldInverse);a.projectionMatrix.copy(this.projectionMatrix);a.projectionMatrixInverse.copy(this.projectionMatrixInverse);return a};THREE.OrthographicCamera=function(a,b,c,d,e,f){THREE.Camera.call(this);this.left=a;this.right=b;this.top=c;this.bottom=d;this.near=void 0!==e?e:0.1;this.far=void 0!==f?f:2E3;this.updateProjectionMatrix()};THREE.OrthographicCamera.prototype=Object.create(THREE.Camera.prototype);THREE.OrthographicCamera.prototype.updateProjectionMatrix=function(){this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far)};
THREE.OrthographicCamera.prototype.clone=function(){var a=new THREE.OrthographicCamera;THREE.Camera.prototype.clone.call(this,a);a.left=this.left;a.right=this.right;a.top=this.top;a.bottom=this.bottom;a.near=this.near;a.far=this.far;return a};THREE.PerspectiveCamera=function(a,b,c,d){THREE.Camera.call(this);this.fov=void 0!==a?a:50;this.aspect=void 0!==b?b:1;this.near=void 0!==c?c:0.1;this.far=void 0!==d?d:2E3;this.updateProjectionMatrix()};THREE.PerspectiveCamera.prototype=Object.create(THREE.Camera.prototype);THREE.PerspectiveCamera.prototype.setLens=function(a,b){void 0===b&&(b=24);this.fov=2*THREE.Math.radToDeg(Math.atan(b/(2*a)));this.updateProjectionMatrix()};
THREE.PerspectiveCamera.prototype.setViewOffset=function(a,b,c,d,e,f){this.fullWidth=a;this.fullHeight=b;this.x=c;this.y=d;this.width=e;this.height=f;this.updateProjectionMatrix()};
THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){if(this.fullWidth){var a=this.fullWidth/this.fullHeight,b=Math.tan(THREE.Math.degToRad(0.5*this.fov))*this.near,c=-b,d=a*c,a=Math.abs(a*b-d),c=Math.abs(b-c);this.projectionMatrix.makeFrustum(d+this.x*a/this.fullWidth,d+(this.x+this.width)*a/this.fullWidth,b-(this.y+this.height)*c/this.fullHeight,b-this.y*c/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far)};
THREE.PerspectiveCamera.prototype.clone=function(){var a=new THREE.PerspectiveCamera;THREE.Camera.prototype.clone.call(this,a);a.fov=this.fov;a.aspect=this.aspect;a.near=this.near;a.far=this.far;return a};THREE.Light=function(a){THREE.Object3D.call(this);this.color=new THREE.Color(a)};THREE.Light.prototype=Object.create(THREE.Object3D.prototype);THREE.Light.prototype.clone=function(a){void 0===a&&(a=new THREE.Light);THREE.Object3D.prototype.clone.call(this,a);a.color.copy(this.color);return a};THREE.AmbientLight=function(a){THREE.Light.call(this,a)};THREE.AmbientLight.prototype=Object.create(THREE.Light.prototype);THREE.AmbientLight.prototype.clone=function(){var a=new THREE.AmbientLight;THREE.Light.prototype.clone.call(this,a);return a};THREE.AreaLight=function(a,b){THREE.Light.call(this,a);this.normal=new THREE.Vector3(0,-1,0);this.right=new THREE.Vector3(1,0,0);this.intensity=void 0!==b?b:1;this.height=this.width=1;this.constantAttenuation=1.5;this.linearAttenuation=0.5;this.quadraticAttenuation=0.1};THREE.AreaLight.prototype=Object.create(THREE.Light.prototype);THREE.DirectionalLight=function(a,b){THREE.Light.call(this,a);this.position.set(0,1,0);this.target=new THREE.Object3D;this.intensity=void 0!==b?b:1;this.onlyShadow=this.castShadow=!1;this.shadowCameraNear=50;this.shadowCameraFar=5E3;this.shadowCameraLeft=-500;this.shadowCameraTop=this.shadowCameraRight=500;this.shadowCameraBottom=-500;this.shadowCameraVisible=!1;this.shadowBias=0;this.shadowDarkness=0.5;this.shadowMapHeight=this.shadowMapWidth=512;this.shadowCascade=!1;this.shadowCascadeOffset=new THREE.Vector3(0,
0,-1E3);this.shadowCascadeCount=2;this.shadowCascadeBias=[0,0,0];this.shadowCascadeWidth=[512,512,512];this.shadowCascadeHeight=[512,512,512];this.shadowCascadeNearZ=[-1,0.99,0.998];this.shadowCascadeFarZ=[0.99,0.998,1];this.shadowCascadeArray=[];this.shadowMatrix=this.shadowCamera=this.shadowMapSize=this.shadowMap=null};THREE.DirectionalLight.prototype=Object.create(THREE.Light.prototype);
THREE.DirectionalLight.prototype.clone=function(){var a=new THREE.DirectionalLight;THREE.Light.prototype.clone.call(this,a);a.target=this.target.clone();a.intensity=this.intensity;a.castShadow=this.castShadow;a.onlyShadow=this.onlyShadow;return a};THREE.HemisphereLight=function(a,b,c){THREE.Light.call(this,a);this.position.set(0,100,0);this.groundColor=new THREE.Color(b);this.intensity=void 0!==c?c:1};THREE.HemisphereLight.prototype=Object.create(THREE.Light.prototype);THREE.HemisphereLight.prototype.clone=function(){var a=new THREE.HemisphereLight;THREE.Light.prototype.clone.call(this,a);a.groundColor.copy(this.groundColor);a.intensity=this.intensity;return a};THREE.PointLight=function(a,b,c){THREE.Light.call(this,a);this.intensity=void 0!==b?b:1;this.distance=void 0!==c?c:0};THREE.PointLight.prototype=Object.create(THREE.Light.prototype);THREE.PointLight.prototype.clone=function(){var a=new THREE.PointLight;THREE.Light.prototype.clone.call(this,a);a.intensity=this.intensity;a.distance=this.distance;return a};THREE.SpotLight=function(a,b,c,d,e){THREE.Light.call(this,a);this.position.set(0,1,0);this.target=new THREE.Object3D;this.intensity=void 0!==b?b:1;this.distance=void 0!==c?c:0;this.angle=void 0!==d?d:Math.PI/3;this.exponent=void 0!==e?e:10;this.onlyShadow=this.castShadow=!1;this.shadowCameraNear=50;this.shadowCameraFar=5E3;this.shadowCameraFov=50;this.shadowCameraVisible=!1;this.shadowBias=0;this.shadowDarkness=0.5;this.shadowMapHeight=this.shadowMapWidth=512;this.shadowMatrix=this.shadowCamera=this.shadowMapSize=
this.shadowMap=null};THREE.SpotLight.prototype=Object.create(THREE.Light.prototype);THREE.SpotLight.prototype.clone=function(){var a=new THREE.SpotLight;THREE.Light.prototype.clone.call(this,a);a.target=this.target.clone();a.intensity=this.intensity;a.distance=this.distance;a.angle=this.angle;a.exponent=this.exponent;a.castShadow=this.castShadow;a.onlyShadow=this.onlyShadow;return a};THREE.Loader=function(a){this.statusDomElement=(this.showStatus=a)?THREE.Loader.prototype.addStatusElement():null;this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){}};
THREE.Loader.prototype={constructor:THREE.Loader,crossOrigin:"anonymous",addStatusElement:function(){var a=document.createElement("div");a.style.position="absolute";a.style.right="0px";a.style.top="0px";a.style.fontSize="0.8em";a.style.textAlign="left";a.style.background="rgba(0,0,0,0.25)";a.style.color="#fff";a.style.width="120px";a.style.padding="0.5em 0.5em 0.5em 0.5em";a.style.zIndex=1E3;a.innerHTML="Loading ...";return a},updateProgress:function(a){var b="Loaded ",b=a.total?b+((100*a.loaded/
a.total).toFixed(0)+"%"):b+((a.loaded/1E3).toFixed(2)+" KB");this.statusDomElement.innerHTML=b},extractUrlBase:function(a){a=a.split("/");a.pop();return(1>a.length?".":a.join("/"))+"/"},initMaterials:function(a,b){for(var c=[],d=0;d<a.length;++d)c[d]=THREE.Loader.prototype.createMaterial(a[d],b);return c},needsTangents:function(a){for(var b=0,c=a.length;b<c;b++)if(a[b]instanceof THREE.ShaderMaterial)return!0;return!1},createMaterial:function(a,b){function c(a){a=Math.log(a)/Math.LN2;return Math.floor(a)==
a}function d(a){a=Math.log(a)/Math.LN2;return Math.pow(2,Math.round(a))}function e(a,e,f,g,i,k,n){var u=/\.dds$/i.test(f),r=b+"/"+f;if(u){var v=THREE.ImageUtils.loadCompressedTexture(r);a[e]=v}else v=document.createElement("canvas"),a[e]=new THREE.Texture(v);a[e].sourceFile=f;g&&(a[e].repeat.set(g[0],g[1]),1!==g[0]&&(a[e].wrapS=THREE.RepeatWrapping),1!==g[1]&&(a[e].wrapT=THREE.RepeatWrapping));i&&a[e].offset.set(i[0],i[1]);k&&(f={repeat:THREE.RepeatWrapping,mirror:THREE.MirroredRepeatWrapping},void 0!==
f[k[0]]&&(a[e].wrapS=f[k[0]]),void 0!==f[k[1]]&&(a[e].wrapT=f[k[1]]));n&&(a[e].anisotropy=n);if(!u){var z=a[e],a=new Image;a.onload=function(){if(!c(this.width)||!c(this.height)){var a=d(this.width),b=d(this.height);z.image.width=a;z.image.height=b;z.image.getContext("2d").drawImage(this,0,0,a,b)}else z.image=this;z.needsUpdate=!0};a.crossOrigin=h.crossOrigin;a.src=r}}function f(a){return(255*a[0]<<16)+(255*a[1]<<8)+255*a[2]}var h=this,g="MeshLambertMaterial",i={color:15658734,opacity:1,map:null,
lightMap:null,normalMap:null,bumpMap:null,wireframe:!1};if(a.shading){var k=a.shading.toLowerCase();"phong"===k?g="MeshPhongMaterial":"basic"===k&&(g="MeshBasicMaterial")}void 0!==a.blending&&void 0!==THREE[a.blending]&&(i.blending=THREE[a.blending]);if(void 0!==a.transparent||1>a.opacity)i.transparent=a.transparent;void 0!==a.depthTest&&(i.depthTest=a.depthTest);void 0!==a.depthWrite&&(i.depthWrite=a.depthWrite);void 0!==a.visible&&(i.visible=a.visible);void 0!==a.flipSided&&(i.side=THREE.BackSide);
void 0!==a.doubleSided&&(i.side=THREE.DoubleSide);void 0!==a.wireframe&&(i.wireframe=a.wireframe);void 0!==a.vertexColors&&("face"===a.vertexColors?i.vertexColors=THREE.FaceColors:a.vertexColors&&(i.vertexColors=THREE.VertexColors));a.colorDiffuse?i.color=f(a.colorDiffuse):a.DbgColor&&(i.color=a.DbgColor);a.colorSpecular&&(i.specular=f(a.colorSpecular));a.colorAmbient&&(i.ambient=f(a.colorAmbient));a.transparency&&(i.opacity=a.transparency);a.specularCoef&&(i.shininess=a.specularCoef);a.mapDiffuse&&
b&&e(i,"map",a.mapDiffuse,a.mapDiffuseRepeat,a.mapDiffuseOffset,a.mapDiffuseWrap,a.mapDiffuseAnisotropy);a.mapLight&&b&&e(i,"lightMap",a.mapLight,a.mapLightRepeat,a.mapLightOffset,a.mapLightWrap,a.mapLightAnisotropy);a.mapBump&&b&&e(i,"bumpMap",a.mapBump,a.mapBumpRepeat,a.mapBumpOffset,a.mapBumpWrap,a.mapBumpAnisotropy);a.mapNormal&&b&&e(i,"normalMap",a.mapNormal,a.mapNormalRepeat,a.mapNormalOffset,a.mapNormalWrap,a.mapNormalAnisotropy);a.mapSpecular&&b&&e(i,"specularMap",a.mapSpecular,a.mapSpecularRepeat,
a.mapSpecularOffset,a.mapSpecularWrap,a.mapSpecularAnisotropy);a.mapBumpScale&&(i.bumpScale=a.mapBumpScale);a.mapNormal?(g=THREE.ShaderLib.normalmap,k=THREE.UniformsUtils.clone(g.uniforms),k.tNormal.value=i.normalMap,a.mapNormalFactor&&k.uNormalScale.value.set(a.mapNormalFactor,a.mapNormalFactor),i.map&&(k.tDiffuse.value=i.map,k.enableDiffuse.value=!0),i.specularMap&&(k.tSpecular.value=i.specularMap,k.enableSpecular.value=!0),i.lightMap&&(k.tAO.value=i.lightMap,k.enableAO.value=!0),k.uDiffuseColor.value.setHex(i.color),
k.uSpecularColor.value.setHex(i.specular),k.uAmbientColor.value.setHex(i.ambient),k.uShininess.value=i.shininess,void 0!==i.opacity&&(k.uOpacity.value=i.opacity),g=new THREE.ShaderMaterial({fragmentShader:g.fragmentShader,vertexShader:g.vertexShader,uniforms:k,lights:!0,fog:!0}),i.transparent&&(g.transparent=!0)):g=new THREE[g](i);void 0!==a.DbgName&&(g.name=a.DbgName);return g}};THREE.XHRLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.XHRLoader.prototype={constructor:THREE.XHRLoader,load:function(a,b,c,d){var e=this,f=new XMLHttpRequest;void 0!==b&&f.addEventListener("load",function(c){b(c.target.responseText);e.manager.itemEnd(a)},!1);void 0!==c&&f.addEventListener("progress",function(a){c(a)},!1);void 0!==d&&f.addEventListener("error",function(a){d(a)},!1);void 0!==this.crossOrigin&&(f.crossOrigin=this.crossOrigin);f.open("GET",a,!0);f.send(null);e.manager.itemStart(a)},setCrossOrigin:function(a){this.crossOrigin=a}};THREE.ImageLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.ImageLoader.prototype={constructor:THREE.ImageLoader,load:function(a,b,c,d){var e=this,f=document.createElement("img");void 0!==b&&f.addEventListener("load",function(){e.manager.itemEnd(a);b(this)},!1);void 0!==c&&f.addEventListener("progress",function(a){c(a)},!1);void 0!==d&&f.addEventListener("error",function(a){d(a)},!1);void 0!==this.crossOrigin&&(f.crossOrigin=this.crossOrigin);f.src=a;e.manager.itemStart(a);return f},setCrossOrigin:function(a){this.crossOrigin=a}};THREE.JSONLoader=function(a){THREE.Loader.call(this,a);this.withCredentials=!1};THREE.JSONLoader.prototype=Object.create(THREE.Loader.prototype);THREE.JSONLoader.prototype.load=function(a,b,c){c=c&&"string"===typeof c?c:this.extractUrlBase(a);this.onLoadStart();this.loadAjaxJSON(this,a,b,c)};
THREE.JSONLoader.prototype.loadAjaxJSON=function(a,b,c,d,e){var f=new XMLHttpRequest,h=0;f.onreadystatechange=function(){if(f.readyState===f.DONE)if(200===f.status||0===f.status){if(f.responseText){var g=JSON.parse(f.responseText),g=a.parse(g,d);c(g.geometry,g.materials)}else console.warn("THREE.JSONLoader: ["+b+"] seems to be unreachable or file there is empty");a.onLoadComplete()}else console.error("THREE.JSONLoader: Couldn't load ["+b+"] ["+f.status+"]");else f.readyState===f.LOADING?e&&(0===h&&
(h=f.getResponseHeader("Content-Length")),e({total:h,loaded:f.responseText.length})):f.readyState===f.HEADERS_RECEIVED&&void 0!==e&&(h=f.getResponseHeader("Content-Length"))};f.open("GET",b,!0);f.withCredentials=this.withCredentials;f.send(null)};
THREE.JSONLoader.prototype.parse=function(a,b){var c=new THREE.Geometry,d=void 0!==a.scale?1/a.scale:1,e,f,h,g,i,k,m,l,p,t,s,q,n,u,r=a.faces;p=a.vertices;var v=a.normals,z=a.colors,G=0;if(void 0!==a.uvs){for(e=0;e<a.uvs.length;e++)a.uvs[e].length&&G++;for(e=0;e<G;e++)c.faceVertexUvs[e]=[]}g=0;for(i=p.length;g<i;)k=new THREE.Vector3,k.x=p[g++]*d,k.y=p[g++]*d,k.z=p[g++]*d,c.vertices.push(k);g=0;for(i=r.length;g<i;)if(p=r[g++],t=p&1,h=p&2,e=p&8,m=p&16,s=p&32,k=p&64,p&=128,t){t=new THREE.Face3;t.a=r[g];
t.b=r[g+1];t.c=r[g+3];q=new THREE.Face3;q.a=r[g+1];q.b=r[g+2];q.c=r[g+3];g+=4;h&&(h=r[g++],t.materialIndex=h,q.materialIndex=h);h=c.faces.length;if(e)for(e=0;e<G;e++){n=a.uvs[e];c.faceVertexUvs[e][h]=[];c.faceVertexUvs[e][h+1]=[];for(f=0;4>f;f++)l=r[g++],u=n[2*l],l=n[2*l+1],u=new THREE.Vector2(u,l),2!==f&&c.faceVertexUvs[e][h].push(u),0!==f&&c.faceVertexUvs[e][h+1].push(u)}m&&(m=3*r[g++],t.normal.set(v[m++],v[m++],v[m]),q.normal.copy(t.normal));if(s)for(e=0;4>e;e++)m=3*r[g++],s=new THREE.Vector3(v[m++],
v[m++],v[m]),2!==e&&t.vertexNormals.push(s),0!==e&&q.vertexNormals.push(s);k&&(k=r[g++],k=z[k],t.color.setHex(k),q.color.setHex(k));if(p)for(e=0;4>e;e++)k=r[g++],k=z[k],2!==e&&t.vertexColors.push(new THREE.Color(k)),0!==e&&q.vertexColors.push(new THREE.Color(k));c.faces.push(t);c.faces.push(q)}else{t=new THREE.Face3;t.a=r[g++];t.b=r[g++];t.c=r[g++];h&&(h=r[g++],t.materialIndex=h);h=c.faces.length;if(e)for(e=0;e<G;e++){n=a.uvs[e];c.faceVertexUvs[e][h]=[];for(f=0;3>f;f++)l=r[g++],u=n[2*l],l=n[2*l+1],
u=new THREE.Vector2(u,l),c.faceVertexUvs[e][h].push(u)}m&&(m=3*r[g++],t.normal.set(v[m++],v[m++],v[m]));if(s)for(e=0;3>e;e++)m=3*r[g++],s=new THREE.Vector3(v[m++],v[m++],v[m]),t.vertexNormals.push(s);k&&(k=r[g++],t.color.setHex(z[k]));if(p)for(e=0;3>e;e++)k=r[g++],t.vertexColors.push(new THREE.Color(z[k]));c.faces.push(t)}if(a.skinWeights){g=0;for(i=a.skinWeights.length;g<i;g+=2)r=a.skinWeights[g],v=a.skinWeights[g+1],c.skinWeights.push(new THREE.Vector4(r,v,0,0))}if(a.skinIndices){g=0;for(i=a.skinIndices.length;g<
i;g+=2)r=a.skinIndices[g],v=a.skinIndices[g+1],c.skinIndices.push(new THREE.Vector4(r,v,0,0))}c.bones=a.bones;c.animation=a.animation;c.animations=a.animations;if(void 0!==a.morphTargets){g=0;for(i=a.morphTargets.length;g<i;g++){c.morphTargets[g]={};c.morphTargets[g].name=a.morphTargets[g].name;c.morphTargets[g].vertices=[];z=c.morphTargets[g].vertices;G=a.morphTargets[g].vertices;r=0;for(v=G.length;r<v;r+=3)p=new THREE.Vector3,p.x=G[r]*d,p.y=G[r+1]*d,p.z=G[r+2]*d,z.push(p)}}if(void 0!==a.morphColors){g=
0;for(i=a.morphColors.length;g<i;g++){c.morphColors[g]={};c.morphColors[g].name=a.morphColors[g].name;c.morphColors[g].colors=[];v=c.morphColors[g].colors;z=a.morphColors[g].colors;d=0;for(r=z.length;d<r;d+=3)G=new THREE.Color(16755200),G.setRGB(z[d],z[d+1],z[d+2]),v.push(G)}}c.computeCentroids();c.computeFaceNormals();c.computeBoundingSphere();if(void 0===a.materials)return{geometry:c};d=this.initMaterials(a.materials,b);this.needsTangents(d)&&c.computeTangents();return{geometry:c,materials:d}};THREE.LoadingManager=function(a,b,c){var d=this,e=0,f=0;this.onLoad=a;this.onProgress=b;this.onError=c;this.itemStart=function(){f++};this.itemEnd=function(a){e++;if(void 0!==d.onProgress)d.onProgress(a,e,f);if(e===f&&void 0!==d.onLoad)d.onLoad()}};THREE.DefaultLoadingManager=new THREE.LoadingManager;THREE.BufferGeometryLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.BufferGeometryLoader.prototype={constructor:THREE.BufferGeometryLoader,load:function(a,b){var c=this,d=new THREE.XHRLoader;d.setCrossOrigin(this.crossOrigin);d.load(a,function(a){b(c.parse(JSON.parse(a)))})},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a){var b=new THREE.BufferGeometry,c=a.attributes,d=a.offsets,a=a.boundingSphere,e;for(e in c){var f=c[e];b.attributes[e]={itemSize:f.itemSize,array:new self[f.type](f.array)}}void 0!==d&&(b.offsets=JSON.parse(JSON.stringify(d)));
void 0!==a&&(b.boundingSphere=new THREE.Sphere((new THREE.Vector3).fromArray(void 0!==a.center?a.center:[0,0,0]),a.radius));return b}};THREE.GeometryLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};THREE.GeometryLoader.prototype={constructor:THREE.GeometryLoader,load:function(a,b){var c=this,d=new THREE.XHRLoader;d.setCrossOrigin(this.crossOrigin);d.load(a,function(a){b(c.parse(JSON.parse(a)))})},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(){}};THREE.MaterialLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.MaterialLoader.prototype={constructor:THREE.MaterialLoader,load:function(a,b){var c=this,d=new THREE.XHRLoader;d.setCrossOrigin(this.crossOrigin);d.load(a,function(a){b(c.parse(JSON.parse(a)))})},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a){var b=new THREE[a.type];void 0!==a.color&&b.color.setHex(a.color);void 0!==a.ambient&&b.ambient.setHex(a.ambient);void 0!==a.emissive&&b.emissive.setHex(a.emissive);void 0!==a.specular&&b.specular.setHex(a.specular);void 0!==a.shininess&&
(b.shininess=a.shininess);void 0!==a.vertexColors&&(b.vertexColors=a.vertexColors);void 0!==a.blending&&(b.blending=a.blending);void 0!==a.side&&(b.side=a.side);void 0!==a.opacity&&(b.opacity=a.opacity);void 0!==a.transparent&&(b.transparent=a.transparent);void 0!==a.wireframe&&(b.wireframe=a.wireframe);if(void 0!==a.materials)for(var c=0,d=a.materials.length;c<d;c++)b.materials.push(this.parse(a.materials[c]));return b}};THREE.ObjectLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.ObjectLoader.prototype={constructor:THREE.ObjectLoader,load:function(a,b){var c=this,d=new THREE.XHRLoader(c.manager);d.setCrossOrigin(this.crossOrigin);d.load(a,function(a){b(c.parse(JSON.parse(a)))})},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a){var b=this.parseGeometries(a.geometries),c=this.parseMaterials(a.materials);return this.parseObject(a.object,b,c)},parseGeometries:function(a){var b={};if(void 0!==a)for(var c=new THREE.JSONLoader,d=new THREE.BufferGeometryLoader,
e=0,f=a.length;e<f;e++){var h,g=a[e];switch(g.type){case "PlaneGeometry":h=new THREE.PlaneGeometry(g.width,g.height,g.widthSegments,g.heightSegments);break;case "CircleGeometry":h=new THREE.CircleGeometry(g.radius,g.segments);break;case "CubeGeometry":h=new THREE.CubeGeometry(g.width,g.height,g.depth,g.widthSegments,g.heightSegments,g.depthSegments);break;case "CylinderGeometry":h=new THREE.CylinderGeometry(g.radiusTop,g.radiusBottom,g.height,g.radialSegments,g.heightSegments,g.openEnded);break;case "SphereGeometry":h=
new THREE.SphereGeometry(g.radius,g.widthSegments,g.heightSegments,g.phiStart,g.phiLength,g.thetaStart,g.thetaLength);break;case "IcosahedronGeometry":h=new THREE.IcosahedronGeometry(g.radius,g.detail);break;case "TorusGeometry":h=new THREE.TorusGeometry(g.radius,g.tube,g.radialSegments,g.tubularSegments,g.arc);break;case "TorusKnotGeometry":h=new THREE.TorusKnotGeometry(g.radius,g.tube,g.radialSegments,g.tubularSegments,g.p,g.q,g.heightScale);break;case "BufferGeometry":h=d.parse(g.data);break;case "Geometry":h=
c.parse(g.data).geometry}h.uuid=g.uuid;void 0!==g.name&&(h.name=g.name);b[g.uuid]=h}return b},parseMaterials:function(a){var b={};if(void 0!==a)for(var c=new THREE.MaterialLoader,d=0,e=a.length;d<e;d++){var f=a[d],h=c.parse(f);h.uuid=f.uuid;void 0!==f.name&&(h.name=f.name);b[f.uuid]=h}return b},parseObject:function(){var a=new THREE.Matrix4;return function(b,c,d){var e;switch(b.type){case "Scene":e=new THREE.Scene;break;case "PerspectiveCamera":e=new THREE.PerspectiveCamera(b.fov,b.aspect,b.near,
b.far);break;case "OrthographicCamera":e=new THREE.OrthographicCamera(b.left,b.right,b.top,b.bottom,b.near,b.far);break;case "AmbientLight":e=new THREE.AmbientLight(b.color);break;case "DirectionalLight":e=new THREE.DirectionalLight(b.color,b.intensity);break;case "PointLight":e=new THREE.PointLight(b.color,b.intensity,b.distance);break;case "SpotLight":e=new THREE.SpotLight(b.color,b.intensity,b.distance,b.angle,b.exponent);break;case "HemisphereLight":e=new THREE.HemisphereLight(b.color,b.groundColor,
b.intensity);break;case "Mesh":e=c[b.geometry];var f=d[b.material];void 0===e&&console.error("THREE.ObjectLoader: Undefined geometry "+b.geometry);void 0===f&&console.error("THREE.ObjectLoader: Undefined material "+b.material);e=new THREE.Mesh(e,f);break;case "Sprite":f=d[b.material];void 0===f&&console.error("THREE.ObjectLoader: Undefined material "+b.material);e=new THREE.Sprite(f);break;default:e=new THREE.Object3D}e.uuid=b.uuid;void 0!==b.name&&(e.name=b.name);void 0!==b.matrix?(a.fromArray(b.matrix),
a.decompose(e.position,e.quaternion,e.scale)):(void 0!==b.position&&e.position.fromArray(b.position),void 0!==b.rotation&&e.rotation.fromArray(b.rotation),void 0!==b.scale&&e.scale.fromArray(b.scale));void 0!==b.visible&&(e.visible=b.visible);void 0!==b.userData&&(e.userData=b.userData);if(void 0!==b.children)for(var h in b.children)e.add(this.parseObject(b.children[h],c,d));return e}}()};THREE.SceneLoader=function(){this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){};this.callbackSync=function(){};this.callbackProgress=function(){};this.geometryHandlers={};this.hierarchyHandlers={};this.addGeometryHandler("ascii",THREE.JSONLoader)};
THREE.SceneLoader.prototype={constructor:THREE.SceneLoader,load:function(a,b){var c=this,d=new THREE.XHRLoader(c.manager);d.setCrossOrigin(this.crossOrigin);d.load(a,function(d){c.parse(JSON.parse(d),b,a)})},setCrossOrigin:function(a){this.crossOrigin=a},addGeometryHandler:function(a,b){this.geometryHandlers[a]={loaderClass:b}},addHierarchyHandler:function(a,b){this.hierarchyHandlers[a]={loaderClass:b}},parse:function(a,b,c){function d(a,b){return"relativeToHTML"==b?a:p+"/"+a}function e(){f(y.scene,
A.objects)}function f(a,b){var c,e,h,i,k,m;for(m in b){var p=y.objects[m],n=b[m];if(void 0===p){if(n.type&&n.type in l.hierarchyHandlers){if(void 0===n.loading){c={type:1,url:1,material:1,position:1,rotation:1,scale:1,visible:1,children:1,userData:1,skin:1,morph:1,mirroredLoop:1,duration:1};var u={},v;for(v in n)v in c||(u[v]=n[v]);s=y.materials[n.material];n.loading=!0;c=l.hierarchyHandlers[n.type].loaderObject;c.options?c.load(d(n.url,A.urlBaseType),g(m,a,s,n)):c.load(d(n.url,A.urlBaseType),g(m,
a,s,n),u)}}else if(void 0!==n.geometry){if(t=y.geometries[n.geometry]){p=!1;s=y.materials[n.material];p=s instanceof THREE.ShaderMaterial;e=n.position;h=n.rotation;i=n.scale;c=n.matrix;k=n.quaternion;n.material||(s=new THREE.MeshFaceMaterial(y.face_materials[n.geometry]));s instanceof THREE.MeshFaceMaterial&&0===s.materials.length&&(s=new THREE.MeshFaceMaterial(y.face_materials[n.geometry]));if(s instanceof THREE.MeshFaceMaterial)for(u=0;u<s.materials.length;u++)p=p||s.materials[u]instanceof THREE.ShaderMaterial;
p&&t.computeTangents();n.skin?p=new THREE.SkinnedMesh(t,s):n.morph?(p=new THREE.MorphAnimMesh(t,s),void 0!==n.duration&&(p.duration=n.duration),void 0!==n.time&&(p.time=n.time),void 0!==n.mirroredLoop&&(p.mirroredLoop=n.mirroredLoop),s.morphNormals&&t.computeMorphNormals()):p=new THREE.Mesh(t,s);p.name=m;c?(p.matrixAutoUpdate=!1,p.matrix.set(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15])):(p.position.fromArray(e),k?p.quaternion.fromArray(k):p.rotation.fromArray(h),
p.scale.fromArray(i));p.visible=n.visible;p.castShadow=n.castShadow;p.receiveShadow=n.receiveShadow;a.add(p);y.objects[m]=p}}else if("AmbientLight"===n.type||"PointLight"===n.type||"DirectionalLight"===n.type||"SpotLight"===n.type||"HemisphereLight"===n.type||"AreaLight"===n.type){u=n.color;c=n.intensity;e=n.distance;h=n.position;i=n.rotation;switch(n.type){case "AmbientLight":r=new THREE.AmbientLight(u);break;case "PointLight":r=new THREE.PointLight(u,c,e);r.position.fromArray(h);break;case "DirectionalLight":r=
new THREE.DirectionalLight(u,c);r.position.fromArray(n.direction);break;case "SpotLight":r=new THREE.SpotLight(u,c,e,1);r.angle=n.angle;r.position.fromArray(h);r.target.set(h[0],h[1]-e,h[2]);r.target.applyEuler(new THREE.Euler(i[0],i[1],i[2],"XYZ"));break;case "HemisphereLight":r=new THREE.DirectionalLight(u,c,e);r.target.set(h[0],h[1]-e,h[2]);r.target.applyEuler(new THREE.Euler(i[0],i[1],i[2],"XYZ"));break;case "AreaLight":r=new THREE.AreaLight(u,c),r.position.fromArray(h),r.width=n.size,r.height=
n.size_y}a.add(r);r.name=m;y.lights[m]=r;y.objects[m]=r}else"PerspectiveCamera"===n.type||"OrthographicCamera"===n.type?(e=n.position,h=n.rotation,k=n.quaternion,"PerspectiveCamera"===n.type?q=new THREE.PerspectiveCamera(n.fov,n.aspect,n.near,n.far):"OrthographicCamera"===n.type&&(q=new THREE.OrthographicCamera(n.left,n.right,n.top,n.bottom,n.near,n.far)),q.name=m,q.position.fromArray(e),void 0!==k?q.quaternion.fromArray(k):void 0!==h&&q.rotation.fromArray(h),a.add(q),y.cameras[m]=q,y.objects[m]=
q):(e=n.position,h=n.rotation,i=n.scale,k=n.quaternion,p=new THREE.Object3D,p.name=m,p.position.fromArray(e),k?p.quaternion.fromArray(k):p.rotation.fromArray(h),p.scale.fromArray(i),p.visible=void 0!==n.visible?n.visible:!1,a.add(p),y.objects[m]=p,y.empties[m]=p);if(p){if(void 0!==n.userData)for(var z in n.userData)p.userData[z]=n.userData[z];if(void 0!==n.groups)for(u=0;u<n.groups.length;u++)c=n.groups[u],void 0===y.groups[c]&&(y.groups[c]=[]),y.groups[c].push(m)}}void 0!==p&&void 0!==n.children&&
f(p,n.children)}}function h(a){return function(b,c){b.name=a;y.geometries[a]=b;y.face_materials[a]=c;e();v-=1;l.onLoadComplete();k()}}function g(a,b,c,d){return function(f){var f=f.content?f.content:f.dae?f.scene:f,h=d.rotation,g=d.quaternion,i=d.scale;f.position.fromArray(d.position);g?f.quaternion.fromArray(g):f.rotation.fromArray(h);f.scale.fromArray(i);c&&f.traverse(function(a){a.material=c});var m=void 0!==d.visible?d.visible:!0;f.traverse(function(a){a.visible=m});b.add(f);f.name=a;y.objects[a]=
f;e();v-=1;l.onLoadComplete();k()}}function i(a){return function(b,c){b.name=a;y.geometries[a]=b;y.face_materials[a]=c}}function k(){l.callbackProgress({totalModels:G,totalTextures:w,loadedModels:G-v,loadedTextures:w-z},y);l.onLoadProgress();if(0===v&&0===z){for(var a=0;a<E.length;a++){var c=E[a],d=y.objects[c.targetName];d?c.object.target=d:(c.object.target=new THREE.Object3D,y.scene.add(c.object.target));c.object.target.userData.targetInverse=c.object}b(y)}}function m(a,b){b(a);if(void 0!==a.children)for(var c in a.children)m(a.children[c],
b)}var l=this,p=THREE.Loader.prototype.extractUrlBase(c),t,s,q,n,u,r,v,z,G,w,y,E=[],A=a,K;for(K in this.geometryHandlers)a=this.geometryHandlers[K].loaderClass,this.geometryHandlers[K].loaderObject=new a;for(K in this.hierarchyHandlers)a=this.hierarchyHandlers[K].loaderClass,this.hierarchyHandlers[K].loaderObject=new a;z=v=0;y={scene:new THREE.Scene,geometries:{},face_materials:{},materials:{},textures:{},objects:{},cameras:{},lights:{},fogs:{},empties:{},groups:{}};if(A.transform&&(K=A.transform.position,
a=A.transform.rotation,c=A.transform.scale,K&&y.scene.position.fromArray(K),a&&y.scene.rotation.fromArray(a),c&&y.scene.scale.fromArray(c),K||a||c))y.scene.updateMatrix(),y.scene.updateMatrixWorld();K=function(a){return function(){z-=a;k();l.onLoadComplete()}};for(var D in A.fogs)a=A.fogs[D],"linear"===a.type?n=new THREE.Fog(0,a.near,a.far):"exp2"===a.type&&(n=new THREE.FogExp2(0,a.density)),a=a.color,n.color.setRGB(a[0],a[1],a[2]),y.fogs[D]=n;for(var F in A.geometries)n=A.geometries[F],n.type in
this.geometryHandlers&&(v+=1,l.onLoadStart());for(var O in A.objects)m(A.objects[O],function(a){a.type&&a.type in l.hierarchyHandlers&&(v+=1,l.onLoadStart())});G=v;for(F in A.geometries)if(n=A.geometries[F],"cube"===n.type)t=new THREE.CubeGeometry(n.width,n.height,n.depth,n.widthSegments,n.heightSegments,n.depthSegments),t.name=F,y.geometries[F]=t;else if("plane"===n.type)t=new THREE.PlaneGeometry(n.width,n.height,n.widthSegments,n.heightSegments),t.name=F,y.geometries[F]=t;else if("sphere"===n.type)t=
new THREE.SphereGeometry(n.radius,n.widthSegments,n.heightSegments),t.name=F,y.geometries[F]=t;else if("cylinder"===n.type)t=new THREE.CylinderGeometry(n.topRad,n.botRad,n.height,n.radSegs,n.heightSegs),t.name=F,y.geometries[F]=t;else if("torus"===n.type)t=new THREE.TorusGeometry(n.radius,n.tube,n.segmentsR,n.segmentsT),t.name=F,y.geometries[F]=t;else if("icosahedron"===n.type)t=new THREE.IcosahedronGeometry(n.radius,n.subdivisions),t.name=F,y.geometries[F]=t;else if(n.type in this.geometryHandlers){O=
{};for(u in n)"type"!==u&&"url"!==u&&(O[u]=n[u]);this.geometryHandlers[n.type].loaderObject.load(d(n.url,A.urlBaseType),h(F),O)}else"embedded"===n.type&&(O=A.embeds[n.id],O.metadata=A.metadata,O&&(O=this.geometryHandlers.ascii.loaderObject.parse(O,""),i(F)(O.geometry,O.materials)));for(var x in A.textures)if(F=A.textures[x],F.url instanceof Array){z+=F.url.length;for(u=0;u<F.url.length;u++)l.onLoadStart()}else z+=1,l.onLoadStart();w=z;for(x in A.textures){F=A.textures[x];void 0!==F.mapping&&void 0!==
THREE[F.mapping]&&(F.mapping=new THREE[F.mapping]);if(F.url instanceof Array){O=F.url.length;n=[];for(u=0;u<O;u++)n[u]=d(F.url[u],A.urlBaseType);u=(u=/\.dds$/i.test(n[0]))?THREE.ImageUtils.loadCompressedTextureCube(n,F.mapping,K(O)):THREE.ImageUtils.loadTextureCube(n,F.mapping,K(O))}else u=/\.dds$/i.test(F.url),O=d(F.url,A.urlBaseType),n=K(1),u=u?THREE.ImageUtils.loadCompressedTexture(O,F.mapping,n):THREE.ImageUtils.loadTexture(O,F.mapping,n),void 0!==THREE[F.minFilter]&&(u.minFilter=THREE[F.minFilter]),
void 0!==THREE[F.magFilter]&&(u.magFilter=THREE[F.magFilter]),F.anisotropy&&(u.anisotropy=F.anisotropy),F.repeat&&(u.repeat.set(F.repeat[0],F.repeat[1]),1!==F.repeat[0]&&(u.wrapS=THREE.RepeatWrapping),1!==F.repeat[1]&&(u.wrapT=THREE.RepeatWrapping)),F.offset&&u.offset.set(F.offset[0],F.offset[1]),F.wrap&&(O={repeat:THREE.RepeatWrapping,mirror:THREE.MirroredRepeatWrapping},void 0!==O[F.wrap[0]]&&(u.wrapS=O[F.wrap[0]]),void 0!==O[F.wrap[1]]&&(u.wrapT=O[F.wrap[1]]));y.textures[x]=u}var I,B;for(I in A.materials){x=
A.materials[I];for(B in x.parameters)"envMap"===B||"map"===B||"lightMap"===B||"bumpMap"===B?x.parameters[B]=y.textures[x.parameters[B]]:"shading"===B?x.parameters[B]="flat"===x.parameters[B]?THREE.FlatShading:THREE.SmoothShading:"side"===B?x.parameters[B]="double"==x.parameters[B]?THREE.DoubleSide:"back"==x.parameters[B]?THREE.BackSide:THREE.FrontSide:"blending"===B?x.parameters[B]=x.parameters[B]in THREE?THREE[x.parameters[B]]:THREE.NormalBlending:"combine"===B?x.parameters[B]=x.parameters[B]in THREE?
THREE[x.parameters[B]]:THREE.MultiplyOperation:"vertexColors"===B?"face"==x.parameters[B]?x.parameters[B]=THREE.FaceColors:x.parameters[B]&&(x.parameters[B]=THREE.VertexColors):"wrapRGB"===B&&(K=x.parameters[B],x.parameters[B]=new THREE.Vector3(K[0],K[1],K[2]));void 0!==x.parameters.opacity&&1>x.parameters.opacity&&(x.parameters.transparent=!0);x.parameters.normalMap?(K=THREE.ShaderLib.normalmap,F=THREE.UniformsUtils.clone(K.uniforms),u=x.parameters.color,O=x.parameters.specular,n=x.parameters.ambient,
D=x.parameters.shininess,F.tNormal.value=y.textures[x.parameters.normalMap],x.parameters.normalScale&&F.uNormalScale.value.set(x.parameters.normalScale[0],x.parameters.normalScale[1]),x.parameters.map&&(F.tDiffuse.value=x.parameters.map,F.enableDiffuse.value=!0),x.parameters.envMap&&(F.tCube.value=x.parameters.envMap,F.enableReflection.value=!0,F.uReflectivity.value=x.parameters.reflectivity),x.parameters.lightMap&&(F.tAO.value=x.parameters.lightMap,F.enableAO.value=!0),x.parameters.specularMap&&
(F.tSpecular.value=y.textures[x.parameters.specularMap],F.enableSpecular.value=!0),x.parameters.displacementMap&&(F.tDisplacement.value=y.textures[x.parameters.displacementMap],F.enableDisplacement.value=!0,F.uDisplacementBias.value=x.parameters.displacementBias,F.uDisplacementScale.value=x.parameters.displacementScale),F.uDiffuseColor.value.setHex(u),F.uSpecularColor.value.setHex(O),F.uAmbientColor.value.setHex(n),F.uShininess.value=D,x.parameters.opacity&&(F.uOpacity.value=x.parameters.opacity),
s=new THREE.ShaderMaterial({fragmentShader:K.fragmentShader,vertexShader:K.vertexShader,uniforms:F,lights:!0,fog:!0})):s=new THREE[x.type](x.parameters);s.name=I;y.materials[I]=s}for(I in A.materials)if(x=A.materials[I],x.parameters.materials){B=[];for(u=0;u<x.parameters.materials.length;u++)B.push(y.materials[x.parameters.materials[u]]);y.materials[I].materials=B}e();y.cameras&&A.defaults.camera&&(y.currentCamera=y.cameras[A.defaults.camera]);y.fogs&&A.defaults.fog&&(y.scene.fog=y.fogs[A.defaults.fog]);
l.callbackSync(y);k()}};THREE.TextureLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};THREE.TextureLoader.prototype={constructor:THREE.TextureLoader,load:function(a,b){var c=new THREE.ImageLoader(this.manager);c.setCrossOrigin(this.crossOrigin);c.load(a,function(a){a=new THREE.Texture(a);a.needsUpdate=!0;void 0!==b&&b(a)})},setCrossOrigin:function(a){this.crossOrigin=a}};THREE.Material=function(){this.id=THREE.MaterialIdCount++;this.uuid=THREE.Math.generateUUID();this.name="";this.side=THREE.FrontSide;this.opacity=1;this.transparent=!1;this.blending=THREE.NormalBlending;this.blendSrc=THREE.SrcAlphaFactor;this.blendDst=THREE.OneMinusSrcAlphaFactor;this.blendEquation=THREE.AddEquation;this.depthWrite=this.depthTest=!0;this.polygonOffset=!1;this.overdraw=this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.needsUpdate=this.visible=!0};
THREE.Material.prototype={constructor:THREE.Material,setValues:function(a){if(void 0!==a)for(var b in a){var c=a[b];if(void 0===c)console.warn("THREE.Material: '"+b+"' parameter is undefined.");else if(b in this){var d=this[b];d instanceof THREE.Color?d.set(c):d instanceof THREE.Vector3&&c instanceof THREE.Vector3?d.copy(c):this[b]="overdraw"==b?Number(c):c}}},clone:function(a){void 0===a&&(a=new THREE.Material);a.name=this.name;a.side=this.side;a.opacity=this.opacity;a.transparent=this.transparent;
a.blending=this.blending;a.blendSrc=this.blendSrc;a.blendDst=this.blendDst;a.blendEquation=this.blendEquation;a.depthTest=this.depthTest;a.depthWrite=this.depthWrite;a.polygonOffset=this.polygonOffset;a.polygonOffsetFactor=this.polygonOffsetFactor;a.polygonOffsetUnits=this.polygonOffsetUnits;a.alphaTest=this.alphaTest;a.overdraw=this.overdraw;a.visible=this.visible;return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.Material.prototype);
THREE.MaterialIdCount=0;THREE.LineBasicMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.linewidth=1;this.linejoin=this.linecap="round";this.vertexColors=!1;this.fog=!0;this.setValues(a)};THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.LineBasicMaterial.prototype.clone=function(){var a=new THREE.LineBasicMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.linewidth=this.linewidth;a.linecap=this.linecap;a.linejoin=this.linejoin;a.vertexColors=this.vertexColors;a.fog=this.fog;return a};THREE.LineDashedMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.scale=this.linewidth=1;this.dashSize=3;this.gapSize=1;this.vertexColors=!1;this.fog=!0;this.setValues(a)};THREE.LineDashedMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.LineDashedMaterial.prototype.clone=function(){var a=new THREE.LineDashedMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.linewidth=this.linewidth;a.scale=this.scale;a.dashSize=this.dashSize;a.gapSize=this.gapSize;a.vertexColors=this.vertexColors;a.fog=this.fog;return a};THREE.MeshBasicMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.envMap=this.specularMap=this.lightMap=this.map=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=0.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=THREE.NoColors;this.morphTargets=this.skinning=!1;this.setValues(a)};
THREE.MeshBasicMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.MeshBasicMaterial.prototype.clone=function(){var a=new THREE.MeshBasicMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.map=this.map;a.lightMap=this.lightMap;a.specularMap=this.specularMap;a.envMap=this.envMap;a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;a.wireframeLinejoin=
this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;return a};THREE.MeshLambertMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.ambient=new THREE.Color(16777215);this.emissive=new THREE.Color(0);this.wrapAround=!1;this.wrapRGB=new THREE.Vector3(1,1,1);this.envMap=this.specularMap=this.lightMap=this.map=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=0.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap=
"round";this.vertexColors=THREE.NoColors;this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};THREE.MeshLambertMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.MeshLambertMaterial.prototype.clone=function(){var a=new THREE.MeshLambertMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.ambient.copy(this.ambient);a.emissive.copy(this.emissive);a.wrapAround=this.wrapAround;a.wrapRGB.copy(this.wrapRGB);a.map=this.map;a.lightMap=this.lightMap;a.specularMap=this.specularMap;a.envMap=this.envMap;a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;a.shading=this.shading;
a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;a.wireframeLinejoin=this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;a.morphNormals=this.morphNormals;return a};THREE.MeshPhongMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.ambient=new THREE.Color(16777215);this.emissive=new THREE.Color(0);this.specular=new THREE.Color(1118481);this.shininess=30;this.metal=!1;this.perPixel=!0;this.wrapAround=!1;this.wrapRGB=new THREE.Vector3(1,1,1);this.bumpMap=this.lightMap=this.map=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new THREE.Vector2(1,1);this.envMap=this.specularMap=null;this.combine=THREE.MultiplyOperation;
this.reflectivity=1;this.refractionRatio=0.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=THREE.NoColors;this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};THREE.MeshPhongMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.MeshPhongMaterial.prototype.clone=function(){var a=new THREE.MeshPhongMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.ambient.copy(this.ambient);a.emissive.copy(this.emissive);a.specular.copy(this.specular);a.shininess=this.shininess;a.metal=this.metal;a.perPixel=this.perPixel;a.wrapAround=this.wrapAround;a.wrapRGB.copy(this.wrapRGB);a.map=this.map;a.lightMap=this.lightMap;a.bumpMap=this.bumpMap;a.bumpScale=this.bumpScale;a.normalMap=this.normalMap;a.normalScale.copy(this.normalScale);
a.specularMap=this.specularMap;a.envMap=this.envMap;a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;a.wireframeLinejoin=this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;a.morphNormals=this.morphNormals;return a};THREE.MeshDepthMaterial=function(a){THREE.Material.call(this);this.wireframe=!1;this.wireframeLinewidth=1;this.setValues(a)};THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshDepthMaterial.prototype.clone=function(){var a=new THREE.MeshDepthMaterial;THREE.Material.prototype.clone.call(this,a);a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;return a};THREE.MeshNormalMaterial=function(a){THREE.Material.call(this,a);this.shading=THREE.FlatShading;this.wireframe=!1;this.wireframeLinewidth=1;this.morphTargets=!1;this.setValues(a)};THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshNormalMaterial.prototype.clone=function(){var a=new THREE.MeshNormalMaterial;THREE.Material.prototype.clone.call(this,a);a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;return a};THREE.MeshFaceMaterial=function(a){this.materials=a instanceof Array?a:[]};THREE.MeshFaceMaterial.prototype.clone=function(){for(var a=new THREE.MeshFaceMaterial,b=0;b<this.materials.length;b++)a.materials.push(this.materials[b].clone());return a};THREE.ParticleSystemMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.map=null;this.size=1;this.sizeAttenuation=!0;this.vertexColors=!1;this.fog=!0;this.setValues(a)};THREE.ParticleSystemMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.ParticleSystemMaterial.prototype.clone=function(){var a=new THREE.ParticleSystemMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.map=this.map;a.size=this.size;a.sizeAttenuation=this.sizeAttenuation;a.vertexColors=this.vertexColors;a.fog=this.fog;return a};THREE.ParticleBasicMaterial=THREE.ParticleSystemMaterial;THREE.ShaderMaterial=function(a){THREE.Material.call(this);this.vertexShader=this.fragmentShader="void main() {}";this.uniforms={};this.defines={};this.attributes=null;this.shading=THREE.SmoothShading;this.linewidth=1;this.wireframe=!1;this.wireframeLinewidth=1;this.lights=this.fog=!1;this.vertexColors=THREE.NoColors;this.morphNormals=this.morphTargets=this.skinning=!1;this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName="position";this.setValues(a)};
THREE.ShaderMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.ShaderMaterial.prototype.clone=function(){var a=new THREE.ShaderMaterial;THREE.Material.prototype.clone.call(this,a);a.fragmentShader=this.fragmentShader;a.vertexShader=this.vertexShader;a.uniforms=THREE.UniformsUtils.clone(this.uniforms);a.attributes=this.attributes;a.defines=this.defines;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.fog=this.fog;a.lights=this.lights;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=
this.morphTargets;a.morphNormals=this.morphNormals;return a};THREE.SpriteMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.map=null;this.rotation=0;this.fog=!1;this.uvOffset=new THREE.Vector2(0,0);this.uvScale=new THREE.Vector2(1,1);this.setValues(a)};THREE.SpriteMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.SpriteMaterial.prototype.clone=function(){var a=new THREE.SpriteMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.map=this.map;a.rotation=this.rotation;a.uvOffset.copy(this.uvOffset);a.uvScale.copy(this.uvScale);a.fog=this.fog;return a};THREE.SpriteCanvasMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.program=function(){};this.setValues(a)};THREE.SpriteCanvasMaterial.prototype=Object.create(THREE.Material.prototype);THREE.SpriteCanvasMaterial.prototype.clone=function(){var a=new THREE.SpriteCanvasMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.program=this.program;return a};THREE.ParticleCanvasMaterial=THREE.SpriteCanvasMaterial;THREE.Texture=function(a,b,c,d,e,f,h,g,i){this.id=THREE.TextureIdCount++;this.uuid=THREE.Math.generateUUID();this.name="";this.image=a;this.mipmaps=[];this.mapping=void 0!==b?b:new THREE.UVMapping;this.wrapS=void 0!==c?c:THREE.ClampToEdgeWrapping;this.wrapT=void 0!==d?d:THREE.ClampToEdgeWrapping;this.magFilter=void 0!==e?e:THREE.LinearFilter;this.minFilter=void 0!==f?f:THREE.LinearMipMapLinearFilter;this.anisotropy=void 0!==i?i:1;this.format=void 0!==h?h:THREE.RGBAFormat;this.type=void 0!==g?g:THREE.UnsignedByteType;
this.offset=new THREE.Vector2(0,0);this.repeat=new THREE.Vector2(1,1);this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.needsUpdate=!1;this.onUpdate=null};
THREE.Texture.prototype={constructor:THREE.Texture,clone:function(a){void 0===a&&(a=new THREE.Texture);a.image=this.image;a.mipmaps=this.mipmaps.slice(0);a.mapping=this.mapping;a.wrapS=this.wrapS;a.wrapT=this.wrapT;a.magFilter=this.magFilter;a.minFilter=this.minFilter;a.anisotropy=this.anisotropy;a.format=this.format;a.type=this.type;a.offset.copy(this.offset);a.repeat.copy(this.repeat);a.generateMipmaps=this.generateMipmaps;a.premultiplyAlpha=this.premultiplyAlpha;a.flipY=this.flipY;a.unpackAlignment=
this.unpackAlignment;return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.Texture.prototype);THREE.TextureIdCount=0;THREE.CompressedTexture=function(a,b,c,d,e,f,h,g,i,k,m){THREE.Texture.call(this,null,f,h,g,i,k,d,e,m);this.image={width:b,height:c};this.mipmaps=a;this.generateMipmaps=!1};THREE.CompressedTexture.prototype=Object.create(THREE.Texture.prototype);THREE.CompressedTexture.prototype.clone=function(){var a=new THREE.CompressedTexture;THREE.Texture.prototype.clone.call(this,a);return a};THREE.DataTexture=function(a,b,c,d,e,f,h,g,i,k,m){THREE.Texture.call(this,null,f,h,g,i,k,d,e,m);this.image={data:a,width:b,height:c}};THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype);THREE.DataTexture.prototype.clone=function(){var a=new THREE.DataTexture;THREE.Texture.prototype.clone.call(this,a);return a};THREE.ParticleSystem=function(a,b){THREE.Object3D.call(this);this.geometry=void 0!==a?a:new THREE.Geometry;this.material=void 0!==b?b:new THREE.ParticleSystemMaterial({color:16777215*Math.random()});this.frustumCulled=this.sortParticles=!1};THREE.ParticleSystem.prototype=Object.create(THREE.Object3D.prototype);
THREE.ParticleSystem.prototype.clone=function(a){void 0===a&&(a=new THREE.ParticleSystem(this.geometry,this.material));a.sortParticles=this.sortParticles;THREE.Object3D.prototype.clone.call(this,a);return a};THREE.Line=function(a,b,c){THREE.Object3D.call(this);this.geometry=void 0!==a?a:new THREE.Geometry;this.material=void 0!==b?b:new THREE.LineBasicMaterial({color:16777215*Math.random()});this.type=void 0!==c?c:THREE.LineStrip};THREE.LineStrip=0;THREE.LinePieces=1;THREE.Line.prototype=Object.create(THREE.Object3D.prototype);THREE.Line.prototype.clone=function(a){void 0===a&&(a=new THREE.Line(this.geometry,this.material,this.type));THREE.Object3D.prototype.clone.call(this,a);return a};THREE.Mesh=function(a,b){THREE.Object3D.call(this);this.geometry=void 0!==a?a:new THREE.Geometry;this.material=void 0!==b?b:new THREE.MeshBasicMaterial({color:16777215*Math.random()});this.updateMorphTargets()};THREE.Mesh.prototype=Object.create(THREE.Object3D.prototype);
THREE.Mesh.prototype.updateMorphTargets=function(){if(0<this.geometry.morphTargets.length){this.morphTargetBase=-1;this.morphTargetForcedOrder=[];this.morphTargetInfluences=[];this.morphTargetDictionary={};for(var a=0,b=this.geometry.morphTargets.length;a<b;a++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[a].name]=a}};
THREE.Mesh.prototype.getMorphTargetIndexByName=function(a){if(void 0!==this.morphTargetDictionary[a])return this.morphTargetDictionary[a];console.log("THREE.Mesh.getMorphTargetIndexByName: morph target "+a+" does not exist. Returning 0.");return 0};THREE.Mesh.prototype.clone=function(a){void 0===a&&(a=new THREE.Mesh(this.geometry,this.material));THREE.Object3D.prototype.clone.call(this,a);return a};THREE.Bone=function(a){THREE.Object3D.call(this);this.skin=a;this.skinMatrix=new THREE.Matrix4};THREE.Bone.prototype=Object.create(THREE.Object3D.prototype);THREE.Bone.prototype.update=function(a,b){this.matrixAutoUpdate&&(b|=this.updateMatrix());if(b||this.matrixWorldNeedsUpdate)a?this.skinMatrix.multiplyMatrices(a,this.matrix):this.skinMatrix.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,b=!0;var c,d=this.children.length;for(c=0;c<d;c++)this.children[c].update(this.skinMatrix,b)};THREE.SkinnedMesh=function(a,b,c){THREE.Mesh.call(this,a,b);this.useVertexTexture=void 0!==c?c:!0;this.identityMatrix=new THREE.Matrix4;this.bones=[];this.boneMatrices=[];var d,e,f;if(this.geometry&&void 0!==this.geometry.bones){for(a=0;a<this.geometry.bones.length;a++)c=this.geometry.bones[a],d=c.pos,e=c.rotq,f=c.scl,b=this.addBone(),b.name=c.name,b.position.set(d[0],d[1],d[2]),b.quaternion.set(e[0],e[1],e[2],e[3]),void 0!==f?b.scale.set(f[0],f[1],f[2]):b.scale.set(1,1,1);for(a=0;a<this.bones.length;a++)c=
this.geometry.bones[a],b=this.bones[a],-1===c.parent?this.add(b):this.bones[c.parent].add(b);a=this.bones.length;this.useVertexTexture?(this.boneTextureHeight=this.boneTextureWidth=a=256<a?64:64<a?32:16<a?16:8,this.boneMatrices=new Float32Array(4*this.boneTextureWidth*this.boneTextureHeight),this.boneTexture=new THREE.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,THREE.RGBAFormat,THREE.FloatType),this.boneTexture.minFilter=THREE.NearestFilter,this.boneTexture.magFilter=
THREE.NearestFilter,this.boneTexture.generateMipmaps=!1,this.boneTexture.flipY=!1):this.boneMatrices=new Float32Array(16*a);this.pose()}};THREE.SkinnedMesh.prototype=Object.create(THREE.Mesh.prototype);THREE.SkinnedMesh.prototype.addBone=function(a){void 0===a&&(a=new THREE.Bone(this));this.bones.push(a);return a};
THREE.SkinnedMesh.prototype.updateMatrixWorld=function(){var a=new THREE.Matrix4;return function(b){this.matrixAutoUpdate&&this.updateMatrix();if(this.matrixWorldNeedsUpdate||b)this.parent?this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix):this.matrixWorld.copy(this.matrix),this.matrixWorldNeedsUpdate=!1;for(var b=0,c=this.children.length;b<c;b++){var d=this.children[b];d instanceof THREE.Bone?d.update(this.identityMatrix,!1):d.updateMatrixWorld(!0)}if(void 0==this.boneInverses){this.boneInverses=
[];b=0;for(c=this.bones.length;b<c;b++)d=new THREE.Matrix4,d.getInverse(this.bones[b].skinMatrix),this.boneInverses.push(d)}b=0;for(c=this.bones.length;b<c;b++)a.multiplyMatrices(this.bones[b].skinMatrix,this.boneInverses[b]),a.flattenToArrayOffset(this.boneMatrices,16*b);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}();THREE.SkinnedMesh.prototype.pose=function(){this.updateMatrixWorld(!0);this.normalizeSkinWeights()};
THREE.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof THREE.Geometry)for(var a=0;a<this.geometry.skinIndices.length;a++){var b=this.geometry.skinWeights[a],c=1/b.lengthManhattan();Infinity!==c?b.multiplyScalar(c):b.set(1)}};THREE.SkinnedMesh.prototype.clone=function(a){void 0===a&&(a=new THREE.SkinnedMesh(this.geometry,this.material,this.useVertexTexture));THREE.Mesh.prototype.clone.call(this,a);return a};THREE.MorphAnimMesh=function(a,b){THREE.Mesh.call(this,a,b);this.duration=1E3;this.mirroredLoop=!1;this.currentKeyframe=this.lastKeyframe=this.time=0;this.direction=1;this.directionBackwards=!1;this.setFrameRange(0,this.geometry.morphTargets.length-1)};THREE.MorphAnimMesh.prototype=Object.create(THREE.Mesh.prototype);THREE.MorphAnimMesh.prototype.setFrameRange=function(a,b){this.startKeyframe=a;this.endKeyframe=b;this.length=this.endKeyframe-this.startKeyframe+1};
THREE.MorphAnimMesh.prototype.setDirectionForward=function(){this.direction=1;this.directionBackwards=!1};THREE.MorphAnimMesh.prototype.setDirectionBackward=function(){this.direction=-1;this.directionBackwards=!0};
THREE.MorphAnimMesh.prototype.parseAnimations=function(){var a=this.geometry;a.animations||(a.animations={});for(var b,c=a.animations,d=/([a-z]+)(\d+)/,e=0,f=a.morphTargets.length;e<f;e++){var h=a.morphTargets[e].name.match(d);if(h&&1<h.length){h=h[1];c[h]||(c[h]={start:Infinity,end:-Infinity});var g=c[h];e<g.start&&(g.start=e);e>g.end&&(g.end=e);b||(b=h)}}a.firstAnimation=b};
THREE.MorphAnimMesh.prototype.setAnimationLabel=function(a,b,c){this.geometry.animations||(this.geometry.animations={});this.geometry.animations[a]={start:b,end:c}};THREE.MorphAnimMesh.prototype.playAnimation=function(a,b){var c=this.geometry.animations[a];c?(this.setFrameRange(c.start,c.end),this.duration=1E3*((c.end-c.start)/b),this.time=0):console.warn("animation["+a+"] undefined")};
THREE.MorphAnimMesh.prototype.updateAnimation=function(a){var b=this.duration/this.length;this.time+=this.direction*a;if(this.mirroredLoop){if(this.time>this.duration||0>this.time)this.direction*=-1,this.time>this.duration&&(this.time=this.duration,this.directionBackwards=!0),0>this.time&&(this.time=0,this.directionBackwards=!1)}else this.time%=this.duration,0>this.time&&(this.time+=this.duration);a=this.startKeyframe+THREE.Math.clamp(Math.floor(this.time/b),0,this.length-1);a!==this.currentKeyframe&&
(this.morphTargetInfluences[this.lastKeyframe]=0,this.morphTargetInfluences[this.currentKeyframe]=1,this.morphTargetInfluences[a]=0,this.lastKeyframe=this.currentKeyframe,this.currentKeyframe=a);b=this.time%b/b;this.directionBackwards&&(b=1-b);this.morphTargetInfluences[this.currentKeyframe]=b;this.morphTargetInfluences[this.lastKeyframe]=1-b};
THREE.MorphAnimMesh.prototype.clone=function(a){void 0===a&&(a=new THREE.MorphAnimMesh(this.geometry,this.material));a.duration=this.duration;a.mirroredLoop=this.mirroredLoop;a.time=this.time;a.lastKeyframe=this.lastKeyframe;a.currentKeyframe=this.currentKeyframe;a.direction=this.direction;a.directionBackwards=this.directionBackwards;THREE.Mesh.prototype.clone.call(this,a);return a};THREE.LOD=function(){THREE.Object3D.call(this);this.objects=[]};THREE.LOD.prototype=Object.create(THREE.Object3D.prototype);THREE.LOD.prototype.addLevel=function(a,b){void 0===b&&(b=0);for(var b=Math.abs(b),c=0;c<this.objects.length&&!(b<this.objects[c].distance);c++);this.objects.splice(c,0,{distance:b,object:a});this.add(a)};THREE.LOD.prototype.getObjectForDistance=function(a){for(var b=1,c=this.objects.length;b<c&&!(a<this.objects[b].distance);b++);return this.objects[b-1].object};
THREE.LOD.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c){if(1<this.objects.length){a.setFromMatrixPosition(c.matrixWorld);b.setFromMatrixPosition(this.matrixWorld);c=a.distanceTo(b);this.objects[0].object.visible=!0;for(var d=1,e=this.objects.length;d<e;d++)if(c>=this.objects[d].distance)this.objects[d-1].object.visible=!1,this.objects[d].object.visible=!0;else break;for(;d<e;d++)this.objects[d].object.visible=!1}}}();THREE.LOD.prototype.clone=function(){};THREE.Sprite=function(a){THREE.Object3D.call(this);this.material=void 0!==a?a:new THREE.SpriteMaterial};THREE.Sprite.prototype=Object.create(THREE.Object3D.prototype);THREE.Sprite.prototype.updateMatrix=function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0};THREE.Sprite.prototype.clone=function(a){void 0===a&&(a=new THREE.Sprite(this.material));THREE.Object3D.prototype.clone.call(this,a);return a};THREE.Particle=THREE.Sprite;THREE.Scene=function(){THREE.Object3D.call(this);this.overrideMaterial=this.fog=null;this.autoUpdate=!0;this.matrixAutoUpdate=!1;this.__lights=[];this.__objectsAdded=[];this.__objectsRemoved=[]};THREE.Scene.prototype=Object.create(THREE.Object3D.prototype);
THREE.Scene.prototype.__addObject=function(a){if(a instanceof THREE.Light)-1===this.__lights.indexOf(a)&&this.__lights.push(a),a.target&&void 0===a.target.parent&&this.add(a.target);else if(!(a instanceof THREE.Camera||a instanceof THREE.Bone)){this.__objectsAdded.push(a);var b=this.__objectsRemoved.indexOf(a);-1!==b&&this.__objectsRemoved.splice(b,1)}for(b=0;b<a.children.length;b++)this.__addObject(a.children[b])};
THREE.Scene.prototype.__removeObject=function(a){if(a instanceof THREE.Light){var b=this.__lights.indexOf(a);-1!==b&&this.__lights.splice(b,1);if(a.shadowCascadeArray)for(b=0;b<a.shadowCascadeArray.length;b++)this.__removeObject(a.shadowCascadeArray[b])}else a instanceof THREE.Camera||(this.__objectsRemoved.push(a),b=this.__objectsAdded.indexOf(a),-1!==b&&this.__objectsAdded.splice(b,1));for(b=0;b<a.children.length;b++)this.__removeObject(a.children[b])};
THREE.Scene.prototype.clone=function(a){void 0===a&&(a=new THREE.Scene);THREE.Object3D.prototype.clone.call(this,a);null!==this.fog&&(a.fog=this.fog.clone());null!==this.overrideMaterial&&(a.overrideMaterial=this.overrideMaterial.clone());a.autoUpdate=this.autoUpdate;a.matrixAutoUpdate=this.matrixAutoUpdate;return a};THREE.Fog=function(a,b,c){this.name="";this.color=new THREE.Color(a);this.near=void 0!==b?b:1;this.far=void 0!==c?c:1E3};THREE.Fog.prototype.clone=function(){return new THREE.Fog(this.color.getHex(),this.near,this.far)};THREE.FogExp2=function(a,b){this.name="";this.color=new THREE.Color(a);this.density=void 0!==b?b:2.5E-4};THREE.FogExp2.prototype.clone=function(){return new THREE.FogExp2(this.color.getHex(),this.density)};THREE.CanvasRenderer=function(a){function b(a,b,c){for(var d=0,e=z.length;d<e;d++){var f=z[d];Ka.copy(f.color);if(f instanceof THREE.DirectionalLight){var h=ta.setFromMatrixPosition(f.matrixWorld).normalize(),g=b.dot(h);0>=g||(g*=f.intensity,c.add(Ka.multiplyScalar(g)))}else f instanceof THREE.PointLight&&(h=ta.setFromMatrixPosition(f.matrixWorld),g=b.dot(ta.subVectors(h,a).normalize()),0>=g||(g*=0==f.distance?1:1-Math.min(a.distanceTo(h)/f.distance,1),0!=g&&(g*=f.intensity,c.add(Ka.multiplyScalar(g)))))}}
function c(a,b,c,d){m(b);l(c);p(d);t(a.getStyle());D.stroke();Ea.expandByScalar(2*b)}function d(a){s(a.getStyle());D.fill()}function e(a,b,c,e,f,h,g,j,i,k,m,l,n){if(!(n instanceof THREE.DataTexture||void 0===n.image||0===n.image.width)){if(!0===n.needsUpdate){var p=n.wrapS===THREE.RepeatWrapping,q=n.wrapT===THREE.RepeatWrapping;Ga[n.id]=D.createPattern(n.image,!0===p&&!0===q?"repeat":!0===p&&!1===q?"repeat-x":!1===p&&!0===q?"repeat-y":"no-repeat");n.needsUpdate=!1}void 0===Ga[n.id]?s("rgba(0,0,0,1)"):
s(Ga[n.id]);var p=n.offset.x/n.repeat.x,q=n.offset.y/n.repeat.y,t=n.image.width*n.repeat.x,r=n.image.height*n.repeat.y,g=(g+p)*t,j=(1-j+q)*r,c=c-a,e=e-b,f=f-a,h=h-b,i=(i+p)*t-g,k=(1-k+q)*r-j,m=(m+p)*t-g,l=(1-l+q)*r-j,p=i*l-m*k;0===p?(void 0===ka[n.id]&&(b=document.createElement("canvas"),b.width=n.image.width,b.height=n.image.height,b=b.getContext("2d"),b.drawImage(n.image,0,0),ka[n.id]=b.getImageData(0,0,n.image.width,n.image.height).data),b=ka[n.id],g=4*(Math.floor(g)+Math.floor(j)*n.image.width),
V.setRGB(b[g]/255,b[g+1]/255,b[g+2]/255),d(V)):(p=1/p,n=(l*c-k*f)*p,k=(l*e-k*h)*p,c=(i*f-m*c)*p,e=(i*h-m*e)*p,a=a-n*g-c*j,g=b-k*g-e*j,D.save(),D.transform(n,k,c,e,a,g),D.fill(),D.restore())}}function f(a,b,c,d,e,f,h,g,j,i,k,m,n){var l,p;l=n.width-1;p=n.height-1;h*=l;g*=p;c-=a;d-=b;e-=a;f-=b;j=j*l-h;i=i*p-g;k=k*l-h;m=m*p-g;p=1/(j*m-k*i);l=(m*c-i*e)*p;i=(m*d-i*f)*p;c=(j*e-k*c)*p;d=(j*f-k*d)*p;a=a-l*h-c*g;b=b-i*h-d*g;D.save();D.transform(l,i,c,d,a,b);D.clip();D.drawImage(n,0,0);D.restore()}function h(a,
b,c,d){ua[0]=255*a.r|0;ua[1]=255*a.g|0;ua[2]=255*a.b|0;ua[4]=255*b.r|0;ua[5]=255*b.g|0;ua[6]=255*b.b|0;ua[8]=255*c.r|0;ua[9]=255*c.g|0;ua[10]=255*c.b|0;ua[12]=255*d.r|0;ua[13]=255*d.g|0;ua[14]=255*d.b|0;j.putImageData(Oa,0,0);Fa.drawImage(Pa,0,0);return La}function g(a,b,c){var d=b.x-a.x,e=b.y-a.y,f=d*d+e*e;0!==f&&(c/=Math.sqrt(f),d*=c,e*=c,b.x+=d,b.y+=e,a.x-=d,a.y-=e)}function i(a){x!==a&&(x=D.globalAlpha=a)}function k(a){I!==a&&(a===THREE.NormalBlending?D.globalCompositeOperation="source-over":
a===THREE.AdditiveBlending?D.globalCompositeOperation="lighter":a===THREE.SubtractiveBlending&&(D.globalCompositeOperation="darker"),I=a)}function m(a){J!==a&&(J=D.lineWidth=a)}function l(a){ca!==a&&(ca=D.lineCap=a)}function p(a){na!==a&&(na=D.lineJoin=a)}function t(a){B!==a&&(B=D.strokeStyle=a)}function s(a){M!==a&&(M=D.fillStyle=a)}function q(a,b){if(pa!==a||C!==b)D.setLineDash([a,b]),pa=a,C=b}console.log("THREE.CanvasRenderer",THREE.REVISION);var n=THREE.Math.smoothstep,a=a||{},u=this,r,v,z,G=
new THREE.Projector,w=void 0!==a.canvas?a.canvas:document.createElement("canvas"),y=w.width,E=w.height,A=Math.floor(y/2),K=Math.floor(E/2),D=w.getContext("2d"),F=new THREE.Color(0),O=0,x=1,I=0,B=null,M=null,J=null,ca=null,na=null,pa=null,C=0,Q,R,L,da;new THREE.RenderableVertex;new THREE.RenderableVertex;var za,Ba,ba,Aa,$,ea,V=new THREE.Color,P=new THREE.Color,Y=new THREE.Color,U=new THREE.Color,ja=new THREE.Color,sa=new THREE.Color,ha=new THREE.Color,Ka=new THREE.Color,Ga={},ka={},Da,Ua,Qa,wa,bb,
cb,Ma,fb,sb,pb,va=new THREE.Box2,la=new THREE.Box2,Ea=new THREE.Box2,gb=new THREE.Color,ra=new THREE.Color,fa=new THREE.Color,ta=new THREE.Vector3,Pa,j,Oa,ua,La,Fa,Ra=16;Pa=document.createElement("canvas");Pa.width=Pa.height=2;j=Pa.getContext("2d");j.fillStyle="rgba(0,0,0,1)";j.fillRect(0,0,2,2);Oa=j.getImageData(0,0,2,2);ua=Oa.data;La=document.createElement("canvas");La.width=La.height=Ra;Fa=La.getContext("2d");Fa.translate(-Ra/2,-Ra/2);Fa.scale(Ra,Ra);Ra--;void 0===D.setLineDash&&(D.setLineDash=
void 0!==D.mozDash?function(a){D.mozDash=null!==a[0]?a:null}:function(){});this.domElement=w;this.devicePixelRatio=void 0!==a.devicePixelRatio?a.devicePixelRatio:void 0!==self.devicePixelRatio?self.devicePixelRatio:1;this.sortElements=this.sortObjects=this.autoClear=!0;this.info={render:{vertices:0,faces:0}};this.supportsVertexTextures=function(){};this.setFaceCulling=function(){};this.setSize=function(a,b,c){y=a*this.devicePixelRatio;E=b*this.devicePixelRatio;A=Math.floor(y/2);K=Math.floor(E/2);
w.width=y;w.height=E;1!==this.devicePixelRatio&&!1!==c&&(w.style.width=a+"px",w.style.height=b+"px");va.set(new THREE.Vector2(-A,-K),new THREE.Vector2(A,K));la.set(new THREE.Vector2(-A,-K),new THREE.Vector2(A,K));x=1;I=0;na=ca=J=M=B=null};this.setClearColor=function(a,b){F.set(a);O=void 0!==b?b:1;la.set(new THREE.Vector2(-A,-K),new THREE.Vector2(A,K))};this.setClearColorHex=function(a,b){console.warn("DEPRECATED: .setClearColorHex() is being removed. Use .setClearColor() instead.");this.setClearColor(a,
b)};this.getMaxAnisotropy=function(){return 0};this.clear=function(){D.setTransform(1,0,0,-1,A,K);!1===la.empty()&&(la.intersect(va),la.expandByScalar(2),1>O&&D.clearRect(la.min.x|0,la.min.y|0,la.max.x-la.min.x|0,la.max.y-la.min.y|0),0<O&&(k(THREE.NormalBlending),i(1),s("rgba("+Math.floor(255*F.r)+","+Math.floor(255*F.g)+","+Math.floor(255*F.b)+","+O+")"),D.fillRect(la.min.x|0,la.min.y|0,la.max.x-la.min.x|0,la.max.y-la.min.y|0)),la.makeEmpty())};this.clearColor=function(){};this.clearDepth=function(){};
this.clearStencil=function(){};this.render=function(a,j){if(!1===j instanceof THREE.Camera)console.error("THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera.");else{!0===this.autoClear&&this.clear();D.setTransform(1,0,0,-1,A,K);u.info.render.vertices=0;u.info.render.faces=0;r=G.projectScene(a,j,this.sortObjects,this.sortElements);v=r.elements;z=r.lights;Q=j;gb.setRGB(0,0,0);ra.setRGB(0,0,0);fa.setRGB(0,0,0);for(var y=0,F=z.length;y<F;y++){var B=z[y],E=B.color;B instanceof THREE.AmbientLight?
gb.add(E):B instanceof THREE.DirectionalLight?ra.add(E):B instanceof THREE.PointLight&&fa.add(E)}y=0;for(F=v.length;y<F;y++){var x=v[y],w=x.material;if(!(void 0===w||!1===w.visible)){Ea.makeEmpty();if(x instanceof THREE.RenderableSprite){R=x;R.x*=A;R.y*=K;var B=R,E=x,I=w;i(I.opacity);k(I.blending);var x=E.scale.x*A,w=E.scale.y*K,O=0.5*Math.sqrt(x*x+w*w);Ea.min.set(B.x-O,B.y-O);Ea.max.set(B.x+O,B.y+O);!1===va.isIntersectionBox(Ea)?Ea.makeEmpty():I instanceof THREE.SpriteMaterial||I instanceof THREE.ParticleSystemMaterial?
(null!==I.map?(E=I.map.image,D.save(),D.translate(B.x,B.y),D.rotate(I.rotation),D.scale(x,-w),D.drawImage(E,0,0,E.width,E.height,-0.5,-0.5,1,1)):(s(I.color.getStyle()),D.save(),D.translate(B.x,B.y),D.rotate(I.rotation),D.scale(x,-w),D.fillRect(-0.5,-0.5,1,1)),D.restore()):I instanceof THREE.SpriteCanvasMaterial&&(t(I.color.getStyle()),s(I.color.getStyle()),D.save(),D.translate(B.x,B.y),D.rotate(-E.rotation),D.scale(x,w),I.program(D),D.restore())}else if(x instanceof THREE.RenderableLine){if(R=x.v1,
L=x.v2,R.positionScreen.x*=A,R.positionScreen.y*=K,L.positionScreen.x*=A,L.positionScreen.y*=K,Ea.setFromPoints([R.positionScreen,L.positionScreen]),!0===va.isIntersectionBox(Ea))if(B=R,E=L,I=x,x=w,i(x.opacity),k(x.blending),D.beginPath(),D.moveTo(B.positionScreen.x,B.positionScreen.y),D.lineTo(E.positionScreen.x,E.positionScreen.y),x instanceof THREE.LineBasicMaterial){m(x.linewidth);l(x.linecap);p(x.linejoin);if(x.vertexColors!==THREE.VertexColors)t(x.color.getStyle());else if(w=I.vertexColors[0].getStyle(),
I=I.vertexColors[1].getStyle(),w===I)t(w);else{try{var C=D.createLinearGradient(B.positionScreen.x,B.positionScreen.y,E.positionScreen.x,E.positionScreen.y);C.addColorStop(0,w);C.addColorStop(1,I)}catch(J){C=w}t(C)}D.stroke();Ea.expandByScalar(2*x.linewidth)}else x instanceof THREE.LineDashedMaterial&&(m(x.linewidth),l(x.linecap),p(x.linejoin),t(x.color.getStyle()),q(x.dashSize,x.gapSize),D.stroke(),Ea.expandByScalar(2*x.linewidth),q(null,null))}else if(x instanceof THREE.RenderableFace3){R=x.v1;
L=x.v2;da=x.v3;if(-1>R.positionScreen.z||1<R.positionScreen.z)continue;if(-1>L.positionScreen.z||1<L.positionScreen.z)continue;if(-1>da.positionScreen.z||1<da.positionScreen.z)continue;R.positionScreen.x*=A;R.positionScreen.y*=K;L.positionScreen.x*=A;L.positionScreen.y*=K;da.positionScreen.x*=A;da.positionScreen.y*=K;0<w.overdraw&&(g(R.positionScreen,L.positionScreen,w.overdraw),g(L.positionScreen,da.positionScreen,w.overdraw),g(da.positionScreen,R.positionScreen,w.overdraw));Ea.setFromPoints([R.positionScreen,
L.positionScreen,da.positionScreen]);if(!0===va.isIntersectionBox(Ea)){B=R;E=L;I=da;u.info.render.vertices+=3;u.info.render.faces++;i(w.opacity);k(w.blending);za=B.positionScreen.x;Ba=B.positionScreen.y;ba=E.positionScreen.x;Aa=E.positionScreen.y;$=I.positionScreen.x;ea=I.positionScreen.y;var O=za,M=Ba,ca=ba,ka=Aa,na=$,pa=ea;D.beginPath();D.moveTo(O,M);D.lineTo(ca,ka);D.lineTo(na,pa);D.closePath();(w instanceof THREE.MeshLambertMaterial||w instanceof THREE.MeshPhongMaterial)&&null===w.map?(sa.copy(w.color),
ha.copy(w.emissive),w.vertexColors===THREE.FaceColors&&sa.multiply(x.color),!1===w.wireframe&&w.shading===THREE.SmoothShading&&3===x.vertexNormalsLength?(P.copy(gb),Y.copy(gb),U.copy(gb),b(x.v1.positionWorld,x.vertexNormalsModel[0],P),b(x.v2.positionWorld,x.vertexNormalsModel[1],Y),b(x.v3.positionWorld,x.vertexNormalsModel[2],U),P.multiply(sa).add(ha),Y.multiply(sa).add(ha),U.multiply(sa).add(ha),ja.addColors(Y,U).multiplyScalar(0.5),Qa=h(P,Y,U,ja),f(za,Ba,ba,Aa,$,ea,0,0,1,0,0,1,Qa)):(V.copy(gb),
b(x.centroidModel,x.normalModel,V),V.multiply(sa).add(ha),!0===w.wireframe?c(V,w.wireframeLinewidth,w.wireframeLinecap,w.wireframeLinejoin):d(V))):w instanceof THREE.MeshBasicMaterial||w instanceof THREE.MeshLambertMaterial||w instanceof THREE.MeshPhongMaterial?null!==w.map?w.map.mapping instanceof THREE.UVMapping&&(wa=x.uvs[0],e(za,Ba,ba,Aa,$,ea,wa[0].x,wa[0].y,wa[1].x,wa[1].y,wa[2].x,wa[2].y,w.map)):null!==w.envMap?w.envMap.mapping instanceof THREE.SphericalReflectionMapping&&(ta.copy(x.vertexNormalsModelView[0]),
bb=0.5*ta.x+0.5,cb=0.5*ta.y+0.5,ta.copy(x.vertexNormalsModelView[1]),Ma=0.5*ta.x+0.5,fb=0.5*ta.y+0.5,ta.copy(x.vertexNormalsModelView[2]),sb=0.5*ta.x+0.5,pb=0.5*ta.y+0.5,e(za,Ba,ba,Aa,$,ea,bb,cb,Ma,fb,sb,pb,w.envMap)):(V.copy(w.color),w.vertexColors===THREE.FaceColors&&V.multiply(x.color),!0===w.wireframe?c(V,w.wireframeLinewidth,w.wireframeLinecap,w.wireframeLinejoin):d(V)):w instanceof THREE.MeshDepthMaterial?(Da=Q.near,Ua=Q.far,P.r=P.g=P.b=1-n(B.positionScreen.z*B.positionScreen.w,Da,Ua),Y.r=Y.g=
Y.b=1-n(E.positionScreen.z*E.positionScreen.w,Da,Ua),U.r=U.g=U.b=1-n(I.positionScreen.z*I.positionScreen.w,Da,Ua),ja.addColors(Y,U).multiplyScalar(0.5),Qa=h(P,Y,U,ja),f(za,Ba,ba,Aa,$,ea,0,0,1,0,0,1,Qa)):w instanceof THREE.MeshNormalMaterial&&(B=void 0,w.shading===THREE.FlatShading?(B=x.normalModelView,V.setRGB(B.x,B.y,B.z).multiplyScalar(0.5).addScalar(0.5),!0===w.wireframe?c(V,w.wireframeLinewidth,w.wireframeLinecap,w.wireframeLinejoin):d(V)):w.shading===THREE.SmoothShading&&(B=x.vertexNormalsModelView[0],
P.setRGB(B.x,B.y,B.z).multiplyScalar(0.5).addScalar(0.5),B=x.vertexNormalsModelView[1],Y.setRGB(B.x,B.y,B.z).multiplyScalar(0.5).addScalar(0.5),B=x.vertexNormalsModelView[2],U.setRGB(B.x,B.y,B.z).multiplyScalar(0.5).addScalar(0.5),ja.addColors(Y,U).multiplyScalar(0.5),Qa=h(P,Y,U,ja),f(za,Ba,ba,Aa,$,ea,0,0,1,0,0,1,Qa)))}}la.union(Ea)}}D.setTransform(1,0,0,1,0,0)}}};THREE.ShaderChunk={fog_pars_fragment:"#ifdef USE_FOG\nuniform vec3 fogColor;\n#ifdef FOG_EXP2\nuniform float fogDensity;\n#else\nuniform float fogNear;\nuniform float fogFar;\n#endif\n#endif",fog_fragment:"#ifdef USE_FOG\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n#ifdef FOG_EXP2\nconst float LOG2 = 1.442695;\nfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n#else\nfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n#endif\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n#endif",
envmap_pars_fragment:"#ifdef USE_ENVMAP\nuniform float reflectivity;\nuniform samplerCube envMap;\nuniform float flipEnvMap;\nuniform int combine;\n#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\nuniform bool useRefract;\nuniform float refractionRatio;\n#else\nvarying vec3 vReflect;\n#endif\n#endif",envmap_fragment:"#ifdef USE_ENVMAP\nvec3 reflectVec;\n#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\nvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\nif ( useRefract ) {\nreflectVec = refract( cameraToVertex, normal, refractionRatio );\n} else { \nreflectVec = reflect( cameraToVertex, normal );\n}\n#else\nreflectVec = vReflect;\n#endif\n#ifdef DOUBLE_SIDED\nfloat flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\nvec4 cubeColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n#else\nvec4 cubeColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n#endif\n#ifdef GAMMA_INPUT\ncubeColor.xyz *= cubeColor.xyz;\n#endif\nif ( combine == 1 ) {\ngl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularStrength * reflectivity );\n} else if ( combine == 2 ) {\ngl_FragColor.xyz += cubeColor.xyz * specularStrength * reflectivity;\n} else {\ngl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * cubeColor.xyz, specularStrength * reflectivity );\n}\n#endif",
envmap_pars_vertex:"#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )\nvarying vec3 vReflect;\nuniform float refractionRatio;\nuniform bool useRefract;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n#ifdef USE_SKINNING\nvec4 worldPosition = modelMatrix * skinned;\n#endif\n#if defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\nvec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\n#endif\n#if ! defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\nvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n#endif\n#endif",
envmap_vertex:"#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )\nvec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;\nworldNormal = normalize( worldNormal );\nvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\nif ( useRefract ) {\nvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n} else {\nvReflect = reflect( cameraToVertex, worldNormal );\n}\n#endif",map_particle_pars_fragment:"#ifdef USE_MAP\nuniform sampler2D map;\n#endif",
map_particle_fragment:"#ifdef USE_MAP\ngl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );\n#endif",map_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )\nvarying vec2 vUv;\nuniform vec4 offsetRepeat;\n#endif",map_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )\nvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\nuniform sampler2D map;\n#endif",
map_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )\nvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",map_fragment:"#ifdef USE_MAP\nvec4 texelColor = texture2D( map, vUv );\n#ifdef GAMMA_INPUT\ntexelColor.xyz *= texelColor.xyz;\n#endif\ngl_FragColor = gl_FragColor * texelColor;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\nvarying vec2 vUv2;\nuniform sampler2D lightMap;\n#endif",lightmap_pars_vertex:"#ifdef USE_LIGHTMAP\nvarying vec2 vUv2;\n#endif",
lightmap_fragment:"#ifdef USE_LIGHTMAP\ngl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );\n#endif",lightmap_vertex:"#ifdef USE_LIGHTMAP\nvUv2 = uv2;\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\nuniform sampler2D bumpMap;\nuniform float bumpScale;\nvec2 dHdxy_fwd() {\nvec2 dSTdx = dFdx( vUv );\nvec2 dSTdy = dFdy( vUv );\nfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\nfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\nfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\nreturn vec2( dBx, dBy );\n}\nvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\nvec3 vSigmaX = dFdx( surf_pos );\nvec3 vSigmaY = dFdy( surf_pos );\nvec3 vN = surf_norm;\nvec3 R1 = cross( vSigmaY, vN );\nvec3 R2 = cross( vN, vSigmaX );\nfloat fDet = dot( vSigmaX, R1 );\nvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\nreturn normalize( abs( fDet ) * surf_norm - vGrad );\n}\n#endif",
normalmap_pars_fragment:"#ifdef USE_NORMALMAP\nuniform sampler2D normalMap;\nuniform vec2 normalScale;\nvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\nvec3 q0 = dFdx( eye_pos.xyz );\nvec3 q1 = dFdy( eye_pos.xyz );\nvec2 st0 = dFdx( vUv.st );\nvec2 st1 = dFdy( vUv.st );\nvec3 S = normalize(  q0 * st1.t - q1 * st0.t );\nvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\nvec3 N = normalize( surf_norm );\nvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\nmapN.xy = normalScale * mapN.xy;\nmat3 tsn = mat3( S, T, N );\nreturn normalize( tsn * mapN );\n}\n#endif",
specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\nuniform sampler2D specularMap;\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\nvec4 texelSpecular = texture2D( specularMap, vUv );\nspecularStrength = texelSpecular.r;\n#else\nspecularStrength = 1.0;\n#endif",lights_lambert_pars_vertex:"uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_HEMI_LIGHTS > 0\nuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\nuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\nuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n#endif\n#ifdef WRAP_AROUND\nuniform vec3 wrapRGB;\n#endif",
lights_lambert_vertex:"vLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\nvLightBack = vec3( 0.0 );\n#endif\ntransformedNormal = normalize( transformedNormal );\n#if MAX_DIR_LIGHTS > 0\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\nvec3 dirVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( transformedNormal, dirVector );\nvec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n#ifdef DOUBLE_SIDED\nvec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n#ifdef WRAP_AROUND\nvec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n#endif\n#endif\n#ifdef WRAP_AROUND\nvec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\ndirectionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\n#ifdef DOUBLE_SIDED\ndirectionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\n#endif\n#endif\nvLightFront += directionalLightColor[ i ] * directionalLightWeighting;\n#ifdef DOUBLE_SIDED\nvLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\n#endif\n}\n#endif\n#if MAX_POINT_LIGHTS > 0\nfor( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\nfloat dotProduct = dot( transformedNormal, lVector );\nvec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\n#ifdef DOUBLE_SIDED\nvec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n#ifdef WRAP_AROUND\nvec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n#endif\n#endif\n#ifdef WRAP_AROUND\nvec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\npointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\n#ifdef DOUBLE_SIDED\npointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\n#endif\n#endif\nvLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;\n#ifdef DOUBLE_SIDED\nvLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;\n#endif\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nfor( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\nif ( spotEffect > spotLightAngleCos[ i ] ) {\nspotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );\nfloat lDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\nfloat dotProduct = dot( transformedNormal, lVector );\nvec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\n#ifdef DOUBLE_SIDED\nvec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n#ifdef WRAP_AROUND\nvec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n#endif\n#endif\n#ifdef WRAP_AROUND\nvec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\nspotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\n#ifdef DOUBLE_SIDED\nspotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\n#endif\n#endif\nvLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;\n#ifdef DOUBLE_SIDED\nvLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;\n#endif\n}\n}\n#endif\n#if MAX_HEMI_LIGHTS > 0\nfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\nvec3 lVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( transformedNormal, lVector );\nfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\nfloat hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\nvLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n#ifdef DOUBLE_SIDED\nvLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n#endif\n}\n#endif\nvLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;\n#ifdef DOUBLE_SIDED\nvLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;\n#endif",
lights_phong_pars_vertex:"#ifndef PHONG_PER_PIXEL\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\nvarying vec4 vPointLight[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\nvarying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )\nvarying vec3 vWorldPosition;\n#endif",
lights_phong_vertex:"#ifndef PHONG_PER_PIXEL\n#if MAX_POINT_LIGHTS > 0\nfor( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nvPointLight[ i ] = vec4( lVector, lDistance );\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nfor( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat lDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\nvSpotLight[ i ] = vec4( lVector, lDistance );\n}\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )\nvWorldPosition = worldPosition.xyz;\n#endif",
lights_phong_pars_fragment:"uniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_HEMI_LIGHTS > 0\nuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n#ifdef PHONG_PER_PIXEL\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#else\nvarying vec4 vPointLight[ MAX_POINT_LIGHTS ];\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\nuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\nuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n#ifdef PHONG_PER_PIXEL\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n#else\nvarying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )\nvarying vec3 vWorldPosition;\n#endif\n#ifdef WRAP_AROUND\nuniform vec3 wrapRGB;\n#endif\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",
lights_phong_fragment:"vec3 normal = normalize( vNormal );\nvec3 viewPosition = normalize( vViewPosition );\n#ifdef DOUBLE_SIDED\nnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n#endif\n#ifdef USE_NORMALMAP\nnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\nnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n#if MAX_POINT_LIGHTS > 0\nvec3 pointDiffuse  = vec3( 0.0 );\nvec3 pointSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n#ifdef PHONG_PER_PIXEL\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz + vViewPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\n#else\nvec3 lVector = normalize( vPointLight[ i ].xyz );\nfloat lDistance = vPointLight[ i ].w;\n#endif\nfloat dotProduct = dot( normal, lVector );\n#ifdef WRAP_AROUND\nfloat pointDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n#else\nfloat pointDiffuseWeight = max( dotProduct, 0.0 );\n#endif\npointDiffuse  += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;\nvec3 pointHalfVector = normalize( lVector + viewPosition );\nfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\nfloat pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, pointHalfVector ), 5.0 );\npointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;\n#else\npointSpecular += specular * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance;\n#endif\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nvec3 spotDiffuse  = vec3( 0.0 );\nvec3 spotSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n#ifdef PHONG_PER_PIXEL\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz + vViewPosition.xyz;\nfloat lDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\n#else\nvec3 lVector = normalize( vSpotLight[ i ].xyz );\nfloat lDistance = vSpotLight[ i ].w;\n#endif\nfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\nif ( spotEffect > spotLightAngleCos[ i ] ) {\nspotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );\nfloat dotProduct = dot( normal, lVector );\n#ifdef WRAP_AROUND\nfloat spotDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 spotDiffuseWeight = mix( vec3 ( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n#else\nfloat spotDiffuseWeight = max( dotProduct, 0.0 );\n#endif\nspotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;\nvec3 spotHalfVector = normalize( lVector + viewPosition );\nfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\nfloat spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, spotHalfVector ), 5.0 );\nspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\n#else\nspotSpecular += specular * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * spotEffect;\n#endif\n}\n}\n#endif\n#if MAX_DIR_LIGHTS > 0\nvec3 dirDiffuse  = vec3( 0.0 );\nvec3 dirSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\nvec3 dirVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( normal, dirVector );\n#ifdef WRAP_AROUND\nfloat dirDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n#else\nfloat dirDiffuseWeight = max( dotProduct, 0.0 );\n#endif\ndirDiffuse  += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;\nvec3 dirHalfVector = normalize( dirVector + viewPosition );\nfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\nfloat dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );\ndirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n#else\ndirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight;\n#endif\n}\n#endif\n#if MAX_HEMI_LIGHTS > 0\nvec3 hemiDiffuse  = vec3( 0.0 );\nvec3 hemiSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\nvec3 lVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( normal, lVector );\nfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\nvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\nhemiDiffuse += diffuse * hemiColor;\nvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\nfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\nfloat hemiSpecularWeightSky = specularStrength * max( pow( hemiDotNormalHalfSky, shininess ), 0.0 );\nvec3 lVectorGround = -lVector;\nvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\nfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\nfloat hemiSpecularWeightGround = specularStrength * max( pow( hemiDotNormalHalfGround, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat dotProductGround = dot( normal, lVectorGround );\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, hemiHalfVectorSky ), 5.0 );\nvec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 5.0 );\nhemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n#else\nhemiSpecular += specular * hemiColor * ( hemiSpecularWeightSky + hemiSpecularWeightGround ) * hemiDiffuseWeight;\n#endif\n}\n#endif\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n#if MAX_DIR_LIGHTS > 0\ntotalDiffuse += dirDiffuse;\ntotalSpecular += dirSpecular;\n#endif\n#if MAX_HEMI_LIGHTS > 0\ntotalDiffuse += hemiDiffuse;\ntotalSpecular += hemiSpecular;\n#endif\n#if MAX_POINT_LIGHTS > 0\ntotalDiffuse += pointDiffuse;\ntotalSpecular += pointSpecular;\n#endif\n#if MAX_SPOT_LIGHTS > 0\ntotalDiffuse += spotDiffuse;\ntotalSpecular += spotSpecular;\n#endif\n#ifdef METAL\ngl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );\n#else\ngl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n#endif",
color_pars_fragment:"#ifdef USE_COLOR\nvarying vec3 vColor;\n#endif",color_fragment:"#ifdef USE_COLOR\ngl_FragColor = gl_FragColor * vec4( vColor, 1.0 );\n#endif",color_pars_vertex:"#ifdef USE_COLOR\nvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n#ifdef GAMMA_INPUT\nvColor = color * color;\n#else\nvColor = color;\n#endif\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n#ifdef BONE_TEXTURE\nuniform sampler2D boneTexture;\nuniform int boneTextureWidth;\nuniform int boneTextureHeight;\nmat4 getBoneMatrix( const in float i ) {\nfloat j = i * 4.0;\nfloat x = mod( j, float( boneTextureWidth ) );\nfloat y = floor( j / float( boneTextureWidth ) );\nfloat dx = 1.0 / float( boneTextureWidth );\nfloat dy = 1.0 / float( boneTextureHeight );\ny = dy * ( y + 0.5 );\nvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\nvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\nvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\nvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\nmat4 bone = mat4( v1, v2, v3, v4 );\nreturn bone;\n}\n#else\nuniform mat4 boneGlobalMatrices[ MAX_BONES ];\nmat4 getBoneMatrix( const in float i ) {\nmat4 bone = boneGlobalMatrices[ int(i) ];\nreturn bone;\n}\n#endif\n#endif",
skinbase_vertex:"#ifdef USE_SKINNING\nmat4 boneMatX = getBoneMatrix( skinIndex.x );\nmat4 boneMatY = getBoneMatrix( skinIndex.y );\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n#ifdef USE_MORPHTARGETS\nvec4 skinVertex = vec4( morphed, 1.0 );\n#else\nvec4 skinVertex = vec4( position, 1.0 );\n#endif\nvec4 skinned  = boneMatX * skinVertex * skinWeight.x;\nskinned \t  += boneMatY * skinVertex * skinWeight.y;\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n#ifndef USE_MORPHNORMALS\nuniform float morphTargetInfluences[ 8 ];\n#else\nuniform float morphTargetInfluences[ 4 ];\n#endif\n#endif",
morphtarget_vertex:"#ifdef USE_MORPHTARGETS\nvec3 morphed = vec3( 0.0 );\nmorphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\nmorphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\nmorphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\nmorphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n#ifndef USE_MORPHNORMALS\nmorphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\nmorphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\nmorphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\nmorphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n#endif\nmorphed += position;\n#endif",
default_vertex:"vec4 mvPosition;\n#ifdef USE_SKINNING\nmvPosition = modelViewMatrix * skinned;\n#endif\n#if !defined( USE_SKINNING ) && defined( USE_MORPHTARGETS )\nmvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n#endif\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHTARGETS )\nmvPosition = modelViewMatrix * vec4( position, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\nvec3 morphedNormal = vec3( 0.0 );\nmorphedNormal +=  ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\nmorphedNormal +=  ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\nmorphedNormal +=  ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\nmorphedNormal +=  ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\nmorphedNormal += normal;\n#endif",
skinnormal_vertex:"#ifdef USE_SKINNING\nmat4 skinMatrix = skinWeight.x * boneMatX;\nskinMatrix \t+= skinWeight.y * boneMatY;\n#ifdef USE_MORPHNORMALS\nvec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\n#else\nvec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\n#endif\n#endif",defaultnormal_vertex:"vec3 objectNormal;\n#ifdef USE_SKINNING\nobjectNormal = skinnedNormal.xyz;\n#endif\n#if !defined( USE_SKINNING ) && defined( USE_MORPHNORMALS )\nobjectNormal = morphedNormal;\n#endif\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHNORMALS )\nobjectNormal = normal;\n#endif\n#ifdef FLIP_SIDED\nobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;",
shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\nuniform sampler2D shadowMap[ MAX_SHADOWS ];\nuniform vec2 shadowMapSize[ MAX_SHADOWS ];\nuniform float shadowDarkness[ MAX_SHADOWS ];\nuniform float shadowBias[ MAX_SHADOWS ];\nvarying vec4 vShadowCoord[ MAX_SHADOWS ];\nfloat unpackDepth( const in vec4 rgba_depth ) {\nconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\nfloat depth = dot( rgba_depth, bit_shift );\nreturn depth;\n}\n#endif",shadowmap_fragment:"#ifdef USE_SHADOWMAP\n#ifdef SHADOWMAP_DEBUG\nvec3 frustumColors[3];\nfrustumColors[0] = vec3( 1.0, 0.5, 0.0 );\nfrustumColors[1] = vec3( 0.0, 1.0, 0.8 );\nfrustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n#endif\n#ifdef SHADOWMAP_CASCADE\nint inFrustumCount = 0;\n#endif\nfloat fDepth;\nvec3 shadowColor = vec3( 1.0 );\nfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\nvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\nbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\nbool inFrustum = all( inFrustumVec );\n#ifdef SHADOWMAP_CASCADE\ninFrustumCount += int( inFrustum );\nbvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n#else\nbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n#endif\nbool frustumTest = all( frustumTestVec );\nif ( frustumTest ) {\nshadowCoord.z += shadowBias[ i ];\n#if defined( SHADOWMAP_TYPE_PCF )\nfloat shadow = 0.0;\nconst float shadowDelta = 1.0 / 9.0;\nfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\nfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\nfloat dx0 = -1.25 * xPixelOffset;\nfloat dy0 = -1.25 * yPixelOffset;\nfloat dx1 = 1.25 * xPixelOffset;\nfloat dy1 = 1.25 * yPixelOffset;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\nfloat shadow = 0.0;\nfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\nfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\nfloat dx0 = -1.0 * xPixelOffset;\nfloat dy0 = -1.0 * yPixelOffset;\nfloat dx1 = 1.0 * xPixelOffset;\nfloat dy1 = 1.0 * yPixelOffset;\nmat3 shadowKernel;\nmat3 depthKernel;\ndepthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\ndepthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\ndepthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\ndepthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\ndepthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\ndepthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\ndepthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\ndepthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\ndepthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\nvec3 shadowZ = vec3( shadowCoord.z );\nshadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\nshadowKernel[0] *= vec3(0.25);\nshadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\nshadowKernel[1] *= vec3(0.25);\nshadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\nshadowKernel[2] *= vec3(0.25);\nvec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\nshadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\nshadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\nvec4 shadowValues;\nshadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\nshadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\nshadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\nshadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\nshadow = dot( shadowValues, vec4( 1.0 ) );\nshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n#else\nvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\nfloat fDepth = unpackDepth( rgbaDepth );\nif ( fDepth < shadowCoord.z )\nshadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n#endif\n}\n#ifdef SHADOWMAP_DEBUG\n#ifdef SHADOWMAP_CASCADE\nif ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];\n#else\nif ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];\n#endif\n#endif\n}\n#ifdef GAMMA_OUTPUT\nshadowColor *= shadowColor;\n#endif\ngl_FragColor.xyz = gl_FragColor.xyz * shadowColor;\n#endif",
shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\nvarying vec4 vShadowCoord[ MAX_SHADOWS ];\nuniform mat4 shadowMatrix[ MAX_SHADOWS ];\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\nfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\nvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n}\n#endif",alphatest_fragment:"#ifdef ALPHATEST\nif ( gl_FragColor.a < ALPHATEST ) discard;\n#endif",linear_to_gamma_fragment:"#ifdef GAMMA_OUTPUT\ngl_FragColor.xyz = sqrt( gl_FragColor.xyz );\n#endif"};THREE.UniformsUtils={merge:function(a){var b,c,d,e={};for(b=0;b<a.length;b++)for(c in d=this.clone(a[b]),d)e[c]=d[c];return e},clone:function(a){var b,c,d,e={};for(b in a)for(c in e[b]={},a[b])d=a[b][c],e[b][c]=d instanceof THREE.Color||d instanceof THREE.Vector2||d instanceof THREE.Vector3||d instanceof THREE.Vector4||d instanceof THREE.Matrix4||d instanceof THREE.Texture?d.clone():d instanceof Array?d.slice():d;return e}};THREE.UniformsLib={common:{diffuse:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},lightMap:{type:"t",value:null},specularMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},useRefract:{type:"i",value:0},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:0.98},combine:{type:"i",value:0},morphTargetInfluences:{type:"f",value:0}},bump:{bumpMap:{type:"t",
value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new THREE.Vector2(1,1)}},fog:{fogDensity:{type:"f",value:2.5E-4},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},fogColor:{type:"c",value:new THREE.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},hemisphereLightDirection:{type:"fv",value:[]},hemisphereLightSkyColor:{type:"fv",
value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]}},particle:{psColor:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",
value:1},scale:{type:"f",value:1},map:{type:"t",value:null},fogDensity:{type:"f",value:2.5E-4},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},fogColor:{type:"c",value:new THREE.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}};THREE.ShaderLib={basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.shadowmap]),vertexShader:[THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,
THREE.ShaderChunk.skinbase_vertex,"#ifdef USE_ENVMAP",THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"#endif",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,
THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,"void main() {\ngl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,
THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},lambert:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\nvarying vec3 vLightBack;\n#endif",
THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_lambert_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,
THREE.ShaderChunk.defaultnormal_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_lambert_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\nvarying vec3 vLightBack;\n#endif",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,
THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,"void main() {\ngl_FragColor = vec4( vec3 ( 1.0 ), opacity );",THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,"#ifdef DOUBLE_SIDED\nif ( gl_FrontFacing )\ngl_FragColor.xyz *= vLightFront;\nelse\ngl_FragColor.xyz *= vLightBack;\n#else\ngl_FragColor.xyz *= vLightFront;\n#endif",THREE.ShaderChunk.lightmap_fragment,
THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},phong:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.bump,THREE.UniformsLib.normalmap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},specular:{type:"c",
value:new THREE.Color(1118481)},shininess:{type:"f",value:30},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define PHONG\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_phong_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,
"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"vNormal = normalize( transformedNormal );",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,"vViewPosition = -mvPosition.xyz;",THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,
THREE.ShaderChunk.lights_phong_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;\nuniform vec3 ambient;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.lights_phong_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,
THREE.ShaderChunk.bumpmap_pars_fragment,THREE.ShaderChunk.normalmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,"void main() {\ngl_FragColor = vec4( vec3 ( 1.0 ), opacity );",THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lights_phong_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,
THREE.ShaderChunk.fog_fragment,"}"].join("\n")},particle_basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.particle,THREE.UniformsLib.shadowmap]),vertexShader:["uniform float size;\nuniform float scale;",THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n#ifdef USE_SIZEATTENUATION\ngl_PointSize = size * ( scale / length( mvPosition.xyz ) );\n#else\ngl_PointSize = size;\n#endif\ngl_Position = projectionMatrix * mvPosition;",
THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;\nuniform float opacity;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_particle_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,"void main() {\ngl_FragColor = vec4( psColor, opacity );",THREE.ShaderChunk.map_particle_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.shadowmap_fragment,
THREE.ShaderChunk.fog_fragment,"}"].join("\n")},dashed:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;",THREE.ShaderChunk.color_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"vLineDistance = scale * lineDistance;\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n}"].join("\n"),
fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,"void main() {\nif ( mod( vLineDistance, totalSize ) > dashSize ) {\ndiscard;\n}\ngl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2E3},opacity:{type:"f",
value:1}},vertexShader:"void main() {\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform float mNear;\nuniform float mFar;\nuniform float opacity;\nvoid main() {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat color = 1.0 - smoothstep( mNear, mFar, depth );\ngl_FragColor = vec4( vec3( color ), opacity );\n}"},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",THREE.ShaderChunk.morphtarget_pars_vertex,"void main() {\nvNormal = normalize( normalMatrix * normal );",
THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,"}"].join("\n"),fragmentShader:"uniform float opacity;\nvarying vec3 vNormal;\nvoid main() {\ngl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );\n}"},normalmap:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{enableAO:{type:"i",value:0},enableDiffuse:{type:"i",value:0},enableSpecular:{type:"i",value:0},enableReflection:{type:"i",value:0},enableDisplacement:{type:"i",
value:0},tDisplacement:{type:"t",value:null},tDiffuse:{type:"t",value:null},tCube:{type:"t",value:null},tNormal:{type:"t",value:null},tSpecular:{type:"t",value:null},tAO:{type:"t",value:null},uNormalScale:{type:"v2",value:new THREE.Vector2(1,1)},uDisplacementBias:{type:"f",value:0},uDisplacementScale:{type:"f",value:1},uDiffuseColor:{type:"c",value:new THREE.Color(16777215)},uSpecularColor:{type:"c",value:new THREE.Color(1118481)},uAmbientColor:{type:"c",value:new THREE.Color(16777215)},uShininess:{type:"f",
value:30},uOpacity:{type:"f",value:1},useRefract:{type:"i",value:0},uRefractionRatio:{type:"f",value:0.98},uReflectivity:{type:"f",value:0.5},uOffset:{type:"v2",value:new THREE.Vector2(0,0)},uRepeat:{type:"v2",value:new THREE.Vector2(1,1)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),fragmentShader:["uniform vec3 uAmbientColor;\nuniform vec3 uDiffuseColor;\nuniform vec3 uSpecularColor;\nuniform float uShininess;\nuniform float uOpacity;\nuniform bool enableDiffuse;\nuniform bool enableSpecular;\nuniform bool enableAO;\nuniform bool enableReflection;\nuniform sampler2D tDiffuse;\nuniform sampler2D tNormal;\nuniform sampler2D tSpecular;\nuniform sampler2D tAO;\nuniform samplerCube tCube;\nuniform vec2 uNormalScale;\nuniform bool useRefract;\nuniform float uRefractionRatio;\nuniform float uReflectivity;\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nuniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_HEMI_LIGHTS > 0\nuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\nuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\nuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n#endif\n#ifdef WRAP_AROUND\nuniform vec3 wrapRGB;\n#endif\nvarying vec3 vWorldPosition;\nvarying vec3 vViewPosition;",
THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,"void main() {\ngl_FragColor = vec4( vec3( 1.0 ), uOpacity );\nvec3 specularTex = vec3( 1.0 );\nvec3 normalTex = texture2D( tNormal, vUv ).xyz * 2.0 - 1.0;\nnormalTex.xy *= uNormalScale;\nnormalTex = normalize( normalTex );\nif( enableDiffuse ) {\n#ifdef GAMMA_INPUT\nvec4 texelColor = texture2D( tDiffuse, vUv );\ntexelColor.xyz *= texelColor.xyz;\ngl_FragColor = gl_FragColor * texelColor;\n#else\ngl_FragColor = gl_FragColor * texture2D( tDiffuse, vUv );\n#endif\n}\nif( enableAO ) {\n#ifdef GAMMA_INPUT\nvec4 aoColor = texture2D( tAO, vUv );\naoColor.xyz *= aoColor.xyz;\ngl_FragColor.xyz = gl_FragColor.xyz * aoColor.xyz;\n#else\ngl_FragColor.xyz = gl_FragColor.xyz * texture2D( tAO, vUv ).xyz;\n#endif\n}\nif( enableSpecular )\nspecularTex = texture2D( tSpecular, vUv ).xyz;\nmat3 tsb = mat3( normalize( vTangent ), normalize( vBinormal ), normalize( vNormal ) );\nvec3 finalNormal = tsb * normalTex;\n#ifdef FLIP_SIDED\nfinalNormal = -finalNormal;\n#endif\nvec3 normal = normalize( finalNormal );\nvec3 viewPosition = normalize( vViewPosition );\n#if MAX_POINT_LIGHTS > 0\nvec3 pointDiffuse = vec3( 0.0 );\nvec3 pointSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 pointVector = lPosition.xyz + vViewPosition.xyz;\nfloat pointDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\npointDistance = 1.0 - min( ( length( pointVector ) / pointLightDistance[ i ] ), 1.0 );\npointVector = normalize( pointVector );\n#ifdef WRAP_AROUND\nfloat pointDiffuseWeightFull = max( dot( normal, pointVector ), 0.0 );\nfloat pointDiffuseWeightHalf = max( 0.5 * dot( normal, pointVector ) + 0.5, 0.0 );\nvec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n#else\nfloat pointDiffuseWeight = max( dot( normal, pointVector ), 0.0 );\n#endif\npointDiffuse += pointDistance * pointLightColor[ i ] * uDiffuseColor * pointDiffuseWeight;\nvec3 pointHalfVector = normalize( pointVector + viewPosition );\nfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\nfloat pointSpecularWeight = specularTex.r * max( pow( pointDotNormalHalf, uShininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( uShininess + 2.0001 ) / 8.0;\nvec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( pointVector, pointHalfVector ), 5.0 );\npointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * pointDistance * specularNormalization;\n#else\npointSpecular += pointDistance * pointLightColor[ i ] * uSpecularColor * pointSpecularWeight * pointDiffuseWeight;\n#endif\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nvec3 spotDiffuse = vec3( 0.0 );\nvec3 spotSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 spotVector = lPosition.xyz + vViewPosition.xyz;\nfloat spotDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nspotDistance = 1.0 - min( ( length( spotVector ) / spotLightDistance[ i ] ), 1.0 );\nspotVector = normalize( spotVector );\nfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\nif ( spotEffect > spotLightAngleCos[ i ] ) {\nspotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );\n#ifdef WRAP_AROUND\nfloat spotDiffuseWeightFull = max( dot( normal, spotVector ), 0.0 );\nfloat spotDiffuseWeightHalf = max( 0.5 * dot( normal, spotVector ) + 0.5, 0.0 );\nvec3 spotDiffuseWeight = mix( vec3 ( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n#else\nfloat spotDiffuseWeight = max( dot( normal, spotVector ), 0.0 );\n#endif\nspotDiffuse += spotDistance * spotLightColor[ i ] * uDiffuseColor * spotDiffuseWeight * spotEffect;\nvec3 spotHalfVector = normalize( spotVector + viewPosition );\nfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\nfloat spotSpecularWeight = specularTex.r * max( pow( spotDotNormalHalf, uShininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( uShininess + 2.0001 ) / 8.0;\nvec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( spotVector, spotHalfVector ), 5.0 );\nspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * spotDistance * specularNormalization * spotEffect;\n#else\nspotSpecular += spotDistance * spotLightColor[ i ] * uSpecularColor * spotSpecularWeight * spotDiffuseWeight * spotEffect;\n#endif\n}\n}\n#endif\n#if MAX_DIR_LIGHTS > 0\nvec3 dirDiffuse = vec3( 0.0 );\nvec3 dirSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_DIR_LIGHTS; i++ ) {\nvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\nvec3 dirVector = normalize( lDirection.xyz );\n#ifdef WRAP_AROUND\nfloat directionalLightWeightingFull = max( dot( normal, dirVector ), 0.0 );\nfloat directionalLightWeightingHalf = max( 0.5 * dot( normal, dirVector ) + 0.5, 0.0 );\nvec3 dirDiffuseWeight = mix( vec3( directionalLightWeightingFull ), vec3( directionalLightWeightingHalf ), wrapRGB );\n#else\nfloat dirDiffuseWeight = max( dot( normal, dirVector ), 0.0 );\n#endif\ndirDiffuse += directionalLightColor[ i ] * uDiffuseColor * dirDiffuseWeight;\nvec3 dirHalfVector = normalize( dirVector + viewPosition );\nfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\nfloat dirSpecularWeight = specularTex.r * max( pow( dirDotNormalHalf, uShininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( uShininess + 2.0001 ) / 8.0;\nvec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );\ndirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n#else\ndirSpecular += directionalLightColor[ i ] * uSpecularColor * dirSpecularWeight * dirDiffuseWeight;\n#endif\n}\n#endif\n#if MAX_HEMI_LIGHTS > 0\nvec3 hemiDiffuse  = vec3( 0.0 );\nvec3 hemiSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\nvec3 lVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( normal, lVector );\nfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\nvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\nhemiDiffuse += uDiffuseColor * hemiColor;\nvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\nfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\nfloat hemiSpecularWeightSky = specularTex.r * max( pow( hemiDotNormalHalfSky, uShininess ), 0.0 );\nvec3 lVectorGround = -lVector;\nvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\nfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\nfloat hemiSpecularWeightGround = specularTex.r * max( pow( hemiDotNormalHalfGround, uShininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat dotProductGround = dot( normal, lVectorGround );\nfloat specularNormalization = ( uShininess + 2.0001 ) / 8.0;\nvec3 schlickSky = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( lVector, hemiHalfVectorSky ), 5.0 );\nvec3 schlickGround = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 5.0 );\nhemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n#else\nhemiSpecular += uSpecularColor * hemiColor * ( hemiSpecularWeightSky + hemiSpecularWeightGround ) * hemiDiffuseWeight;\n#endif\n}\n#endif\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n#if MAX_DIR_LIGHTS > 0\ntotalDiffuse += dirDiffuse;\ntotalSpecular += dirSpecular;\n#endif\n#if MAX_HEMI_LIGHTS > 0\ntotalDiffuse += hemiDiffuse;\ntotalSpecular += hemiSpecular;\n#endif\n#if MAX_POINT_LIGHTS > 0\ntotalDiffuse += pointDiffuse;\ntotalSpecular += pointSpecular;\n#endif\n#if MAX_SPOT_LIGHTS > 0\ntotalDiffuse += spotDiffuse;\ntotalSpecular += spotSpecular;\n#endif\n#ifdef METAL\ngl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * uAmbientColor + totalSpecular );\n#else\ngl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * uAmbientColor ) + totalSpecular;\n#endif\nif ( enableReflection ) {\nvec3 vReflect;\nvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\nif ( useRefract ) {\nvReflect = refract( cameraToVertex, normal, uRefractionRatio );\n} else {\nvReflect = reflect( cameraToVertex, normal );\n}\nvec4 cubeColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );\n#ifdef GAMMA_INPUT\ncubeColor.xyz *= cubeColor.xyz;\n#endif\ngl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularTex.r * uReflectivity );\n}",
THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n"),vertexShader:["attribute vec4 tangent;\nuniform vec2 uOffset;\nuniform vec2 uRepeat;\nuniform bool enableDisplacement;\n#ifdef VERTEX_TEXTURES\nuniform sampler2D tDisplacement;\nuniform float uDisplacementScale;\nuniform float uDisplacementBias;\n#endif\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vWorldPosition;\nvarying vec3 vViewPosition;",
THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,"#ifdef USE_SKINNING\nvNormal = normalize( normalMatrix * skinnedNormal.xyz );\nvec4 skinnedTangent = skinMatrix * vec4( tangent.xyz, 0.0 );\nvTangent = normalize( normalMatrix * skinnedTangent.xyz );\n#else\nvNormal = normalize( normalMatrix * normal );\nvTangent = normalize( normalMatrix * tangent.xyz );\n#endif\nvBinormal = normalize( cross( vNormal, vTangent ) * tangent.w );\nvUv = uv * uRepeat + uOffset;\nvec3 displacedPosition;\n#ifdef VERTEX_TEXTURES\nif ( enableDisplacement ) {\nvec3 dv = texture2D( tDisplacement, uv ).xyz;\nfloat df = uDisplacementScale * dv.x + uDisplacementBias;\ndisplacedPosition = position + normalize( normal ) * df;\n} else {\n#ifdef USE_SKINNING\nvec4 skinVertex = vec4( position, 1.0 );\nvec4 skinned  = boneMatX * skinVertex * skinWeight.x;\nskinned \t  += boneMatY * skinVertex * skinWeight.y;\ndisplacedPosition  = skinned.xyz;\n#else\ndisplacedPosition = position;\n#endif\n}\n#else\n#ifdef USE_SKINNING\nvec4 skinVertex = vec4( position, 1.0 );\nvec4 skinned  = boneMatX * skinVertex * skinWeight.x;\nskinned \t  += boneMatY * skinVertex * skinWeight.y;\ndisplacedPosition  = skinned.xyz;\n#else\ndisplacedPosition = position;\n#endif\n#endif\nvec4 mvPosition = modelViewMatrix * vec4( displacedPosition, 1.0 );\nvec4 worldPosition = modelMatrix * vec4( displacedPosition, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\nvWorldPosition = worldPosition.xyz;\nvViewPosition = -mvPosition.xyz;\n#ifdef USE_SHADOWMAP\nfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\nvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n}\n#endif\n}"].join("\n")},
cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:"varying vec3 vWorldPosition;\nvoid main() {\nvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\nvWorldPosition = worldPosition.xyz;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform samplerCube tCube;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\nvoid main() {\ngl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n}"},
depthRGBA:{uniforms:{},vertexShader:[THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,"}"].join("\n"),fragmentShader:"vec4 pack_depth( const in float depth ) {\nconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\nconst vec4 bit_mask  = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\nvec4 res = fract( depth * bit_shift );\nres -= res.xxyz * bit_mask;\nreturn res;\n}\nvoid main() {\ngl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\n}"}};THREE.WebGLRenderer=function(a){function b(a,b){var c=a.vertices.length,d=b.material;if(d.attributes){void 0===a.__webglCustomAttributesList&&(a.__webglCustomAttributesList=[]);for(var e in d.attributes){var f=d.attributes[e];if(!f.__webglInitialized||f.createUniqueBuffers){f.__webglInitialized=!0;var h=1;"v2"===f.type?h=2:"v3"===f.type?h=3:"v4"===f.type?h=4:"c"===f.type&&(h=3);f.size=h;f.array=new Float32Array(c*h);f.buffer=j.createBuffer();f.buffer.belongsToAttribute=e;f.needsUpdate=!0}a.__webglCustomAttributesList.push(f)}}}
function c(a,b){var c=b.geometry,h=a.faces3,g=3*h.length,i=1*h.length,k=3*h.length,h=d(b,a),m=f(h),l=e(h),n=h.vertexColors?h.vertexColors:!1;a.__vertexArray=new Float32Array(3*g);l&&(a.__normalArray=new Float32Array(3*g));c.hasTangents&&(a.__tangentArray=new Float32Array(4*g));n&&(a.__colorArray=new Float32Array(3*g));m&&(0<c.faceVertexUvs.length&&(a.__uvArray=new Float32Array(2*g)),1<c.faceVertexUvs.length&&(a.__uv2Array=new Float32Array(2*g)));b.geometry.skinWeights.length&&b.geometry.skinIndices.length&&
(a.__skinIndexArray=new Float32Array(4*g),a.__skinWeightArray=new Float32Array(4*g));a.__faceArray=new Uint16Array(3*i);a.__lineArray=new Uint16Array(2*k);if(a.numMorphTargets){a.__morphTargetsArrays=[];c=0;for(m=a.numMorphTargets;c<m;c++)a.__morphTargetsArrays.push(new Float32Array(3*g))}if(a.numMorphNormals){a.__morphNormalsArrays=[];c=0;for(m=a.numMorphNormals;c<m;c++)a.__morphNormalsArrays.push(new Float32Array(3*g))}a.__webglFaceCount=3*i;a.__webglLineCount=2*k;if(h.attributes){void 0===a.__webglCustomAttributesList&&
(a.__webglCustomAttributesList=[]);for(var p in h.attributes){var i=h.attributes[p],k={},q;for(q in i)k[q]=i[q];if(!k.__webglInitialized||k.createUniqueBuffers)k.__webglInitialized=!0,c=1,"v2"===k.type?c=2:"v3"===k.type?c=3:"v4"===k.type?c=4:"c"===k.type&&(c=3),k.size=c,k.array=new Float32Array(g*c),k.buffer=j.createBuffer(),k.buffer.belongsToAttribute=p,i.needsUpdate=!0,k.__original=i;a.__webglCustomAttributesList.push(k)}}a.__inittedArrays=!0}function d(a,b){return a.material instanceof THREE.MeshFaceMaterial?
a.material.materials[b.materialIndex]:a.material}function e(a){return a instanceof THREE.MeshBasicMaterial&&!a.envMap||a instanceof THREE.MeshDepthMaterial?!1:a&&void 0!==a.shading&&a.shading===THREE.SmoothShading?THREE.SmoothShading:THREE.FlatShading}function f(a){return a.map||a.lightMap||a.bumpMap||a.normalMap||a.specularMap||a instanceof THREE.ShaderMaterial?!0:!1}function h(a){va[a]||(j.enableVertexAttribArray(a),va[a]=!0)}function g(){for(var a in va)va[a]&&(j.disableVertexAttribArray(a),va[a]=
!1)}function i(a,b){return a.z!==b.z?b.z-a.z:a.id-b.id}function k(a,b){return b[0]-a[0]}function m(a,b,c){if(a.length)for(var d=0,e=a.length;d<e;d++)ea=Ba=null,Aa=$=U=Y=ka=Ga=ja=-1,ta=!0,a[d].render(b,c,sb,pb),ea=Ba=null,Aa=$=U=Y=ka=Ga=ja=-1,ta=!0}function l(a,b,c,d,e,f,h,g){var j,i,k,m;b?(i=a.length-1,m=b=-1):(i=0,b=a.length,m=1);for(var l=i;l!==b;l+=m)if(j=a[l],j.render){i=j.object;k=j.buffer;if(g)j=g;else{j=j[c];if(!j)continue;h&&L.setBlending(j.blending,j.blendEquation,j.blendSrc,j.blendDst);
L.setDepthTest(j.depthTest);L.setDepthWrite(j.depthWrite);A(j.polygonOffset,j.polygonOffsetFactor,j.polygonOffsetUnits)}L.setMaterialFaces(j);k instanceof THREE.BufferGeometry?L.renderBufferDirect(d,e,f,j,k,i):L.renderBuffer(d,e,f,j,k,i)}}function p(a,b,c,d,e,f,h){for(var g,j,i=0,k=a.length;i<k;i++)if(g=a[i],j=g.object,j.visible){if(h)g=h;else{g=g[b];if(!g)continue;f&&L.setBlending(g.blending,g.blendEquation,g.blendSrc,g.blendDst);L.setDepthTest(g.depthTest);L.setDepthWrite(g.depthWrite);A(g.polygonOffset,
g.polygonOffsetFactor,g.polygonOffsetUnits)}L.renderImmediateObject(c,d,e,g,j)}}function t(a,d){var e,f,h,g;if(void 0===a.__webglInit&&(a.__webglInit=!0,a._modelViewMatrix=new THREE.Matrix4,a._normalMatrix=new THREE.Matrix3,void 0!==a.geometry&&void 0===a.geometry.__webglInit&&(a.geometry.__webglInit=!0,a.geometry.addEventListener("dispose",Cb)),f=a.geometry,void 0!==f))if(f instanceof THREE.BufferGeometry){var i,k;for(i in f.attributes)k="index"===i?j.ELEMENT_ARRAY_BUFFER:j.ARRAY_BUFFER,g=f.attributes[i],
void 0===g.numItems&&(g.numItems=g.array.length),g.buffer=j.createBuffer(),j.bindBuffer(k,g.buffer),j.bufferData(k,g.array,j.STATIC_DRAW)}else if(a instanceof THREE.Mesh){h=a.material;if(void 0===f.geometryGroups){i=f;var m,l,n;k={};var p=i.morphTargets.length,q=i.morphNormals.length,t=h instanceof THREE.MeshFaceMaterial;i.geometryGroups={};h=0;for(m=i.faces.length;h<m;h++)l=i.faces[h],l=t?l.materialIndex:0,void 0===k[l]&&(k[l]={hash:l,counter:0}),n=k[l].hash+"_"+k[l].counter,void 0===i.geometryGroups[n]&&
(i.geometryGroups[n]={faces3:[],materialIndex:l,vertices:0,numMorphTargets:p,numMorphNormals:q}),65535<i.geometryGroups[n].vertices+3&&(k[l].counter+=1,n=k[l].hash+"_"+k[l].counter,void 0===i.geometryGroups[n]&&(i.geometryGroups[n]={faces3:[],materialIndex:l,vertices:0,numMorphTargets:p,numMorphNormals:q})),i.geometryGroups[n].faces3.push(h),i.geometryGroups[n].vertices+=3;i.geometryGroupsList=[];for(g in i.geometryGroups)i.geometryGroups[g].id=V++,i.geometryGroupsList.push(i.geometryGroups[g])}for(e in f.geometryGroups)if(g=
f.geometryGroups[e],!g.__webglVertexBuffer){i=g;i.__webglVertexBuffer=j.createBuffer();i.__webglNormalBuffer=j.createBuffer();i.__webglTangentBuffer=j.createBuffer();i.__webglColorBuffer=j.createBuffer();i.__webglUVBuffer=j.createBuffer();i.__webglUV2Buffer=j.createBuffer();i.__webglSkinIndicesBuffer=j.createBuffer();i.__webglSkinWeightsBuffer=j.createBuffer();i.__webglFaceBuffer=j.createBuffer();i.__webglLineBuffer=j.createBuffer();p=k=void 0;if(i.numMorphTargets){i.__webglMorphTargetsBuffers=[];
k=0;for(p=i.numMorphTargets;k<p;k++)i.__webglMorphTargetsBuffers.push(j.createBuffer())}if(i.numMorphNormals){i.__webglMorphNormalsBuffers=[];k=0;for(p=i.numMorphNormals;k<p;k++)i.__webglMorphNormalsBuffers.push(j.createBuffer())}L.info.memory.geometries++;c(g,a);f.verticesNeedUpdate=!0;f.morphTargetsNeedUpdate=!0;f.elementsNeedUpdate=!0;f.uvsNeedUpdate=!0;f.normalsNeedUpdate=!0;f.tangentsNeedUpdate=!0;f.colorsNeedUpdate=!0}}else a instanceof THREE.Line?f.__webglVertexBuffer||(g=f,g.__webglVertexBuffer=
j.createBuffer(),g.__webglColorBuffer=j.createBuffer(),g.__webglLineDistanceBuffer=j.createBuffer(),L.info.memory.geometries++,g=f,i=g.vertices.length,g.__vertexArray=new Float32Array(3*i),g.__colorArray=new Float32Array(3*i),g.__lineDistanceArray=new Float32Array(1*i),g.__webglLineCount=i,b(g,a),f.verticesNeedUpdate=!0,f.colorsNeedUpdate=!0,f.lineDistancesNeedUpdate=!0):a instanceof THREE.ParticleSystem&&!f.__webglVertexBuffer&&(g=f,g.__webglVertexBuffer=j.createBuffer(),g.__webglColorBuffer=j.createBuffer(),
L.info.memory.geometries++,g=f,i=g.vertices.length,g.__vertexArray=new Float32Array(3*i),g.__colorArray=new Float32Array(3*i),g.__sortArray=[],g.__webglParticleCount=i,b(g,a),f.verticesNeedUpdate=!0,f.colorsNeedUpdate=!0);if(void 0===a.__webglActive){if(a instanceof THREE.Mesh)if(f=a.geometry,f instanceof THREE.BufferGeometry)s(d.__webglObjects,f,a);else{if(f instanceof THREE.Geometry)for(e in f.geometryGroups)g=f.geometryGroups[e],s(d.__webglObjects,g,a)}else a instanceof THREE.Line||a instanceof
THREE.ParticleSystem?(f=a.geometry,s(d.__webglObjects,f,a)):a instanceof THREE.ImmediateRenderObject||a.immediateRenderCallback?d.__webglObjectsImmediate.push({id:null,object:a,opaque:null,transparent:null,z:0}):a instanceof THREE.Sprite?d.__webglSprites.push(a):a instanceof THREE.LensFlare&&d.__webglFlares.push(a);a.__webglActive=!0}}function s(a,b,c){a.push({id:null,buffer:b,object:c,opaque:null,transparent:null,z:0})}function q(a){for(var b in a.attributes)if(a.attributes[b].needsUpdate)return!0;
return!1}function n(a){for(var b in a.attributes)a.attributes[b].needsUpdate=!1}function u(a,b){a instanceof THREE.Mesh||a instanceof THREE.ParticleSystem||a instanceof THREE.Line?r(b.__webglObjects,a):a instanceof THREE.Sprite?v(b.__webglSprites,a):a instanceof THREE.LensFlare?v(b.__webglFlares,a):(a instanceof THREE.ImmediateRenderObject||a.immediateRenderCallback)&&r(b.__webglObjectsImmediate,a);delete a.__webglActive}function r(a,b){for(var c=a.length-1;0<=c;c--)a[c].object===b&&a.splice(c,1)}
function v(a,b){for(var c=a.length-1;0<=c;c--)a[c]===b&&a.splice(c,1)}function z(a,b,c,d,e){P=0;d.needsUpdate&&(d.program&&Gb(d),L.initMaterial(d,b,c,e),d.needsUpdate=!1);d.morphTargets&&!e.__webglMorphTargetInfluences&&(e.__webglMorphTargetInfluences=new Float32Array(L.maxMorphTargets));var f=!1,h=d.program,g=h.uniforms,i=d.uniforms;h!==Ba&&(j.useProgram(h),Ba=h,f=!0);d.id!==Aa&&(Aa=d.id,f=!0);if(f||a!==ea)j.uniformMatrix4fv(g.projectionMatrix,!1,a.projectionMatrix.elements),a!==ea&&(ea=a);if(d.skinning)if(yb&&
e.useVertexTexture){if(null!==g.boneTexture){var k=G();j.uniform1i(g.boneTexture,k);L.setTexture(e.boneTexture,k)}null!==g.boneTextureWidth&&j.uniform1i(g.boneTextureWidth,e.boneTextureWidth);null!==g.boneTextureHeight&&j.uniform1i(g.boneTextureHeight,e.boneTextureHeight)}else null!==g.boneGlobalMatrices&&j.uniformMatrix4fv(g.boneGlobalMatrices,!1,e.boneMatrices);if(f){c&&d.fog&&(i.fogColor.value=c.color,c instanceof THREE.Fog?(i.fogNear.value=c.near,i.fogFar.value=c.far):c instanceof THREE.FogExp2&&
(i.fogDensity.value=c.density));if(d instanceof THREE.MeshPhongMaterial||d instanceof THREE.MeshLambertMaterial||d.lights){if(ta){for(var m,l=k=0,n=0,p,q,t,r=Pa,s=r.directional.colors,u=r.directional.positions,v=r.point.colors,z=r.point.positions,x=r.point.distances,A=r.spot.colors,E=r.spot.positions,D=r.spot.distances,K=r.spot.directions,O=r.spot.anglesCos,C=r.spot.exponents,J=r.hemi.skyColors,V=r.hemi.groundColors,M=r.hemi.positions,Q=0,U=0,Y=0,za=0,$=0,dc=0,X=0,W=0,R=m=0,c=t=R=0,f=b.length;c<f;c++)m=
b[c],m.onlyShadow||(p=m.color,q=m.intensity,t=m.distance,m instanceof THREE.AmbientLight?m.visible&&(L.gammaInput?(k+=p.r*p.r,l+=p.g*p.g,n+=p.b*p.b):(k+=p.r,l+=p.g,n+=p.b)):m instanceof THREE.DirectionalLight?($+=1,m.visible&&(fa.setFromMatrixPosition(m.matrixWorld),ra.setFromMatrixPosition(m.target.matrixWorld),fa.sub(ra),fa.normalize(),0===fa.x&&0===fa.y&&0===fa.z||(m=3*Q,u[m]=fa.x,u[m+1]=fa.y,u[m+2]=fa.z,L.gammaInput?w(s,m,p,q*q):y(s,m,p,q),Q+=1))):m instanceof THREE.PointLight?(dc+=1,m.visible&&
(R=3*U,L.gammaInput?w(v,R,p,q*q):y(v,R,p,q),ra.setFromMatrixPosition(m.matrixWorld),z[R]=ra.x,z[R+1]=ra.y,z[R+2]=ra.z,x[U]=t,U+=1)):m instanceof THREE.SpotLight?(X+=1,m.visible&&(R=3*Y,L.gammaInput?w(A,R,p,q*q):y(A,R,p,q),ra.setFromMatrixPosition(m.matrixWorld),E[R]=ra.x,E[R+1]=ra.y,E[R+2]=ra.z,D[Y]=t,fa.copy(ra),ra.setFromMatrixPosition(m.target.matrixWorld),fa.sub(ra),fa.normalize(),K[R]=fa.x,K[R+1]=fa.y,K[R+2]=fa.z,O[Y]=Math.cos(m.angle),C[Y]=m.exponent,Y+=1)):m instanceof THREE.HemisphereLight&&
(W+=1,m.visible&&(fa.setFromMatrixPosition(m.matrixWorld),fa.normalize(),0===fa.x&&0===fa.y&&0===fa.z||(t=3*za,M[t]=fa.x,M[t+1]=fa.y,M[t+2]=fa.z,p=m.color,m=m.groundColor,L.gammaInput?(q*=q,w(J,t,p,q),w(V,t,m,q)):(y(J,t,p,q),y(V,t,m,q)),za+=1))));c=3*Q;for(f=Math.max(s.length,3*$);c<f;c++)s[c]=0;c=3*U;for(f=Math.max(v.length,3*dc);c<f;c++)v[c]=0;c=3*Y;for(f=Math.max(A.length,3*X);c<f;c++)A[c]=0;c=3*za;for(f=Math.max(J.length,3*W);c<f;c++)J[c]=0;c=3*za;for(f=Math.max(V.length,3*W);c<f;c++)V[c]=0;r.directional.length=
Q;r.point.length=U;r.spot.length=Y;r.hemi.length=za;r.ambient[0]=k;r.ambient[1]=l;r.ambient[2]=n;ta=!1}c=Pa;i.ambientLightColor.value=c.ambient;i.directionalLightColor.value=c.directional.colors;i.directionalLightDirection.value=c.directional.positions;i.pointLightColor.value=c.point.colors;i.pointLightPosition.value=c.point.positions;i.pointLightDistance.value=c.point.distances;i.spotLightColor.value=c.spot.colors;i.spotLightPosition.value=c.spot.positions;i.spotLightDistance.value=c.spot.distances;
i.spotLightDirection.value=c.spot.directions;i.spotLightAngleCos.value=c.spot.anglesCos;i.spotLightExponent.value=c.spot.exponents;i.hemisphereLightSkyColor.value=c.hemi.skyColors;i.hemisphereLightGroundColor.value=c.hemi.groundColors;i.hemisphereLightDirection.value=c.hemi.positions}if(d instanceof THREE.MeshBasicMaterial||d instanceof THREE.MeshLambertMaterial||d instanceof THREE.MeshPhongMaterial){i.opacity.value=d.opacity;L.gammaInput?i.diffuse.value.copyGammaToLinear(d.color):i.diffuse.value=
d.color;i.map.value=d.map;i.lightMap.value=d.lightMap;i.specularMap.value=d.specularMap;d.bumpMap&&(i.bumpMap.value=d.bumpMap,i.bumpScale.value=d.bumpScale);d.normalMap&&(i.normalMap.value=d.normalMap,i.normalScale.value.copy(d.normalScale));var ba;d.map?ba=d.map:d.specularMap?ba=d.specularMap:d.normalMap?ba=d.normalMap:d.bumpMap&&(ba=d.bumpMap);void 0!==ba&&(c=ba.offset,ba=ba.repeat,i.offsetRepeat.value.set(c.x,c.y,ba.x,ba.y));i.envMap.value=d.envMap;i.flipEnvMap.value=d.envMap instanceof THREE.WebGLRenderTargetCube?
1:-1;i.reflectivity.value=d.reflectivity;i.refractionRatio.value=d.refractionRatio;i.combine.value=d.combine;i.useRefract.value=d.envMap&&d.envMap.mapping instanceof THREE.CubeRefractionMapping}d instanceof THREE.LineBasicMaterial?(i.diffuse.value=d.color,i.opacity.value=d.opacity):d instanceof THREE.LineDashedMaterial?(i.diffuse.value=d.color,i.opacity.value=d.opacity,i.dashSize.value=d.dashSize,i.totalSize.value=d.dashSize+d.gapSize,i.scale.value=d.scale):d instanceof THREE.ParticleSystemMaterial?
(i.psColor.value=d.color,i.opacity.value=d.opacity,i.size.value=d.size,i.scale.value=B.height/2,i.map.value=d.map):d instanceof THREE.MeshPhongMaterial?(i.shininess.value=d.shininess,L.gammaInput?(i.ambient.value.copyGammaToLinear(d.ambient),i.emissive.value.copyGammaToLinear(d.emissive),i.specular.value.copyGammaToLinear(d.specular)):(i.ambient.value=d.ambient,i.emissive.value=d.emissive,i.specular.value=d.specular),d.wrapAround&&i.wrapRGB.value.copy(d.wrapRGB)):d instanceof THREE.MeshLambertMaterial?
(L.gammaInput?(i.ambient.value.copyGammaToLinear(d.ambient),i.emissive.value.copyGammaToLinear(d.emissive)):(i.ambient.value=d.ambient,i.emissive.value=d.emissive),d.wrapAround&&i.wrapRGB.value.copy(d.wrapRGB)):d instanceof THREE.MeshDepthMaterial?(i.mNear.value=a.near,i.mFar.value=a.far,i.opacity.value=d.opacity):d instanceof THREE.MeshNormalMaterial&&(i.opacity.value=d.opacity);if(e.receiveShadow&&!d._shadowPass&&i.shadowMatrix){c=ba=0;for(f=b.length;c<f;c++)if(k=b[c],k.castShadow&&(k instanceof
THREE.SpotLight||k instanceof THREE.DirectionalLight&&!k.shadowCascade))i.shadowMap.value[ba]=k.shadowMap,i.shadowMapSize.value[ba]=k.shadowMapSize,i.shadowMatrix.value[ba]=k.shadowMatrix,i.shadowDarkness.value[ba]=k.shadowDarkness,i.shadowBias.value[ba]=k.shadowBias,ba++}b=d.uniformsList;i=0;for(ba=b.length;i<ba;i++)if(f=h.uniforms[b[i][1]])if(c=b[i][0],l=c.type,k=c.value,"i"===l)j.uniform1i(f,k);else if("f"===l)j.uniform1f(f,k);else if("v2"===l)j.uniform2f(f,k.x,k.y);else if("v3"===l)j.uniform3f(f,
k.x,k.y,k.z);else if("v4"===l)j.uniform4f(f,k.x,k.y,k.z,k.w);else if("c"===l)j.uniform3f(f,k.r,k.g,k.b);else if("iv1"===l)j.uniform1iv(f,k);else if("iv"===l)j.uniform3iv(f,k);else if("fv1"===l)j.uniform1fv(f,k);else if("fv"===l)j.uniform3fv(f,k);else if("v2v"===l){void 0===c._array&&(c._array=new Float32Array(2*k.length));l=0;for(n=k.length;l<n;l++)r=2*l,c._array[r]=k[l].x,c._array[r+1]=k[l].y;j.uniform2fv(f,c._array)}else if("v3v"===l){void 0===c._array&&(c._array=new Float32Array(3*k.length));l=
0;for(n=k.length;l<n;l++)r=3*l,c._array[r]=k[l].x,c._array[r+1]=k[l].y,c._array[r+2]=k[l].z;j.uniform3fv(f,c._array)}else if("v4v"===l){void 0===c._array&&(c._array=new Float32Array(4*k.length));l=0;for(n=k.length;l<n;l++)r=4*l,c._array[r]=k[l].x,c._array[r+1]=k[l].y,c._array[r+2]=k[l].z,c._array[r+3]=k[l].w;j.uniform4fv(f,c._array)}else if("m4"===l)void 0===c._array&&(c._array=new Float32Array(16)),k.flattenToArray(c._array),j.uniformMatrix4fv(f,!1,c._array);else if("m4v"===l){void 0===c._array&&
(c._array=new Float32Array(16*k.length));l=0;for(n=k.length;l<n;l++)k[l].flattenToArrayOffset(c._array,16*l);j.uniformMatrix4fv(f,!1,c._array)}else if("t"===l){if(r=k,k=G(),j.uniform1i(f,k),r)if(r.image instanceof Array&&6===r.image.length){if(c=r,f=k,6===c.image.length)if(c.needsUpdate){c.image.__webglTextureCube||(c.addEventListener("dispose",Db),c.image.__webglTextureCube=j.createTexture(),L.info.memory.textures++);j.activeTexture(j.TEXTURE0+f);j.bindTexture(j.TEXTURE_CUBE_MAP,c.image.__webglTextureCube);
j.pixelStorei(j.UNPACK_FLIP_Y_WEBGL,c.flipY);f=c instanceof THREE.CompressedTexture;k=[];for(l=0;6>l;l++)L.autoScaleCubemaps&&!f?(n=k,r=l,s=c.image[l],v=ac,s.width<=v&&s.height<=v||(z=Math.max(s.width,s.height),u=Math.floor(s.width*v/z),v=Math.floor(s.height*v/z),z=document.createElement("canvas"),z.width=u,z.height=v,z.getContext("2d").drawImage(s,0,0,s.width,s.height,0,0,u,v),s=z),n[r]=s):k[l]=c.image[l];l=k[0];n=0===(l.width&l.width-1)&&0===(l.height&l.height-1);r=I(c.format);s=I(c.type);F(j.TEXTURE_CUBE_MAP,
c,n);for(l=0;6>l;l++)if(f){v=k[l].mipmaps;z=0;for(x=v.length;z<x;z++)u=v[z],c.format!==THREE.RGBAFormat?j.compressedTexImage2D(j.TEXTURE_CUBE_MAP_POSITIVE_X+l,z,r,u.width,u.height,0,u.data):j.texImage2D(j.TEXTURE_CUBE_MAP_POSITIVE_X+l,z,r,u.width,u.height,0,r,s,u.data)}else j.texImage2D(j.TEXTURE_CUBE_MAP_POSITIVE_X+l,0,r,r,s,k[l]);c.generateMipmaps&&n&&j.generateMipmap(j.TEXTURE_CUBE_MAP);c.needsUpdate=!1;if(c.onUpdate)c.onUpdate()}else j.activeTexture(j.TEXTURE0+f),j.bindTexture(j.TEXTURE_CUBE_MAP,
c.image.__webglTextureCube)}else r instanceof THREE.WebGLRenderTargetCube?(c=r,j.activeTexture(j.TEXTURE0+k),j.bindTexture(j.TEXTURE_CUBE_MAP,c.__webglTexture)):L.setTexture(r,k)}else if("tv"===l){void 0===c._array&&(c._array=[]);l=0;for(n=c.value.length;l<n;l++)c._array[l]=G();j.uniform1iv(f,c._array);l=0;for(n=c.value.length;l<n;l++)r=c.value[l],k=c._array[l],r&&L.setTexture(r,k)}else console.warn("THREE.WebGLRenderer: Unknown uniform type: "+l);if((d instanceof THREE.ShaderMaterial||d instanceof
THREE.MeshPhongMaterial||d.envMap)&&null!==g.cameraPosition)ra.setFromMatrixPosition(a.matrixWorld),j.uniform3f(g.cameraPosition,ra.x,ra.y,ra.z);(d instanceof THREE.MeshPhongMaterial||d instanceof THREE.MeshLambertMaterial||d instanceof THREE.ShaderMaterial||d.skinning)&&null!==g.viewMatrix&&j.uniformMatrix4fv(g.viewMatrix,!1,a.matrixWorldInverse.elements)}j.uniformMatrix4fv(g.modelViewMatrix,!1,e._modelViewMatrix.elements);g.normalMatrix&&j.uniformMatrix3fv(g.normalMatrix,!1,e._normalMatrix.elements);
null!==g.modelMatrix&&j.uniformMatrix4fv(g.modelMatrix,!1,e.matrixWorld.elements);return h}function G(){var a=P;a>=Mb&&console.warn("WebGLRenderer: trying to use "+a+" texture units while this GPU supports only "+Mb);P+=1;return a}function w(a,b,c,d){a[b]=c.r*c.r*d;a[b+1]=c.g*c.g*d;a[b+2]=c.b*c.b*d}function y(a,b,c,d){a[b]=c.r*d;a[b+1]=c.g*d;a[b+2]=c.b*d}function E(a){a!==wa&&(j.lineWidth(a),wa=a)}function A(a,b,c){Da!==a&&(a?j.enable(j.POLYGON_OFFSET_FILL):j.disable(j.POLYGON_OFFSET_FILL),Da=a);
if(a&&(Ua!==b||Qa!==c))j.polygonOffset(b,c),Ua=b,Qa=c}function K(a){for(var a=a.split("\n"),b=0,c=a.length;b<c;b++)a[b]=b+1+": "+a[b];return a.join("\n")}function D(a,b){var c;"fragment"===a?c=j.createShader(j.FRAGMENT_SHADER):"vertex"===a&&(c=j.createShader(j.VERTEX_SHADER));j.shaderSource(c,b);j.compileShader(c);return!j.getShaderParameter(c,j.COMPILE_STATUS)?(console.error(j.getShaderInfoLog(c)),console.error(K(b)),null):c}function F(a,b,c){c?(j.texParameteri(a,j.TEXTURE_WRAP_S,I(b.wrapS)),j.texParameteri(a,
j.TEXTURE_WRAP_T,I(b.wrapT)),j.texParameteri(a,j.TEXTURE_MAG_FILTER,I(b.magFilter)),j.texParameteri(a,j.TEXTURE_MIN_FILTER,I(b.minFilter))):(j.texParameteri(a,j.TEXTURE_WRAP_S,j.CLAMP_TO_EDGE),j.texParameteri(a,j.TEXTURE_WRAP_T,j.CLAMP_TO_EDGE),j.texParameteri(a,j.TEXTURE_MAG_FILTER,x(b.magFilter)),j.texParameteri(a,j.TEXTURE_MIN_FILTER,x(b.minFilter)));if(La&&b.type!==THREE.FloatType&&(1<b.anisotropy||b.__oldAnisotropy))j.texParameterf(a,La.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(b.anisotropy,Nb)),b.__oldAnisotropy=
b.anisotropy}function O(a,b){j.bindRenderbuffer(j.RENDERBUFFER,a);b.depthBuffer&&!b.stencilBuffer?(j.renderbufferStorage(j.RENDERBUFFER,j.DEPTH_COMPONENT16,b.width,b.height),j.framebufferRenderbuffer(j.FRAMEBUFFER,j.DEPTH_ATTACHMENT,j.RENDERBUFFER,a)):b.depthBuffer&&b.stencilBuffer?(j.renderbufferStorage(j.RENDERBUFFER,j.DEPTH_STENCIL,b.width,b.height),j.framebufferRenderbuffer(j.FRAMEBUFFER,j.DEPTH_STENCIL_ATTACHMENT,j.RENDERBUFFER,a)):j.renderbufferStorage(j.RENDERBUFFER,j.RGBA4,b.width,b.height)}
function x(a){return a===THREE.NearestFilter||a===THREE.NearestMipMapNearestFilter||a===THREE.NearestMipMapLinearFilter?j.NEAREST:j.LINEAR}function I(a){if(a===THREE.RepeatWrapping)return j.REPEAT;if(a===THREE.ClampToEdgeWrapping)return j.CLAMP_TO_EDGE;if(a===THREE.MirroredRepeatWrapping)return j.MIRRORED_REPEAT;if(a===THREE.NearestFilter)return j.NEAREST;if(a===THREE.NearestMipMapNearestFilter)return j.NEAREST_MIPMAP_NEAREST;if(a===THREE.NearestMipMapLinearFilter)return j.NEAREST_MIPMAP_LINEAR;if(a===
THREE.LinearFilter)return j.LINEAR;if(a===THREE.LinearMipMapNearestFilter)return j.LINEAR_MIPMAP_NEAREST;if(a===THREE.LinearMipMapLinearFilter)return j.LINEAR_MIPMAP_LINEAR;if(a===THREE.UnsignedByteType)return j.UNSIGNED_BYTE;if(a===THREE.UnsignedShort4444Type)return j.UNSIGNED_SHORT_4_4_4_4;if(a===THREE.UnsignedShort5551Type)return j.UNSIGNED_SHORT_5_5_5_1;if(a===THREE.UnsignedShort565Type)return j.UNSIGNED_SHORT_5_6_5;if(a===THREE.ByteType)return j.BYTE;if(a===THREE.ShortType)return j.SHORT;if(a===
THREE.UnsignedShortType)return j.UNSIGNED_SHORT;if(a===THREE.IntType)return j.INT;if(a===THREE.UnsignedIntType)return j.UNSIGNED_INT;if(a===THREE.FloatType)return j.FLOAT;if(a===THREE.AlphaFormat)return j.ALPHA;if(a===THREE.RGBFormat)return j.RGB;if(a===THREE.RGBAFormat)return j.RGBA;if(a===THREE.LuminanceFormat)return j.LUMINANCE;if(a===THREE.LuminanceAlphaFormat)return j.LUMINANCE_ALPHA;if(a===THREE.AddEquation)return j.FUNC_ADD;if(a===THREE.SubtractEquation)return j.FUNC_SUBTRACT;if(a===THREE.ReverseSubtractEquation)return j.FUNC_REVERSE_SUBTRACT;
if(a===THREE.ZeroFactor)return j.ZERO;if(a===THREE.OneFactor)return j.ONE;if(a===THREE.SrcColorFactor)return j.SRC_COLOR;if(a===THREE.OneMinusSrcColorFactor)return j.ONE_MINUS_SRC_COLOR;if(a===THREE.SrcAlphaFactor)return j.SRC_ALPHA;if(a===THREE.OneMinusSrcAlphaFactor)return j.ONE_MINUS_SRC_ALPHA;if(a===THREE.DstAlphaFactor)return j.DST_ALPHA;if(a===THREE.OneMinusDstAlphaFactor)return j.ONE_MINUS_DST_ALPHA;if(a===THREE.DstColorFactor)return j.DST_COLOR;if(a===THREE.OneMinusDstColorFactor)return j.ONE_MINUS_DST_COLOR;
if(a===THREE.SrcAlphaSaturateFactor)return j.SRC_ALPHA_SATURATE;if(void 0!==Fa){if(a===THREE.RGB_S3TC_DXT1_Format)return Fa.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===THREE.RGBA_S3TC_DXT1_Format)return Fa.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===THREE.RGBA_S3TC_DXT3_Format)return Fa.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===THREE.RGBA_S3TC_DXT5_Format)return Fa.COMPRESSED_RGBA_S3TC_DXT5_EXT}return 0}console.log("THREE.WebGLRenderer",THREE.REVISION);var a=a||{},B=void 0!==a.canvas?a.canvas:document.createElement("canvas"),
M=void 0!==a.precision?a.precision:"highp",J=void 0!==a.alpha?a.alpha:!1,ca=void 0!==a.premultipliedAlpha?a.premultipliedAlpha:!0,na=void 0!==a.antialias?a.antialias:!1,pa=void 0!==a.stencil?a.stencil:!0,C=void 0!==a.preserveDrawingBuffer?a.preserveDrawingBuffer:!1,Q=new THREE.Color(0),R=0;this.domElement=B;this.context=null;this.devicePixelRatio=void 0!==a.devicePixelRatio?a.devicePixelRatio:void 0!==self.devicePixelRatio?self.devicePixelRatio:1;this.autoUpdateObjects=this.sortObjects=this.autoClearStencil=
this.autoClearDepth=this.autoClearColor=this.autoClear=!0;this.shadowMapEnabled=this.physicallyBasedShading=this.gammaOutput=this.gammaInput=!1;this.shadowMapAutoUpdate=!0;this.shadowMapType=THREE.PCFShadowMap;this.shadowMapCullFace=THREE.CullFaceFront;this.shadowMapCascade=this.shadowMapDebug=!1;this.maxMorphTargets=8;this.maxMorphNormals=4;this.autoScaleCubemaps=!0;this.renderPluginsPre=[];this.renderPluginsPost=[];this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,
faces:0,points:0}};var L=this,da=[],za=0,Ba=null,ba=null,Aa=-1,$=null,ea=null,V=0,P=0,Y=-1,U=-1,ja=-1,sa=-1,ha=-1,Ka=-1,Ga=-1,ka=-1,Da=null,Ua=null,Qa=null,wa=null,bb=0,cb=0,Ma=B.width,fb=B.height,sb=0,pb=0,va={},la=new THREE.Frustum,Ea=new THREE.Matrix4,gb=new THREE.Matrix4,ra=new THREE.Vector3,fa=new THREE.Vector3,ta=!0,Pa={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],
anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},j,Oa,ua,La,Fa;try{var Ra={alpha:J,premultipliedAlpha:ca,antialias:na,stencil:pa,preserveDrawingBuffer:C};j=B.getContext("webgl",Ra)||B.getContext("experimental-webgl",Ra);if(null===j)throw"Error creating WebGL context.";}catch(Zb){console.error(Zb)}Oa=j.getExtension("OES_texture_float");j.getExtension("OES_texture_float_linear");ua=j.getExtension("OES_standard_derivatives");La=j.getExtension("EXT_texture_filter_anisotropic")||
j.getExtension("MOZ_EXT_texture_filter_anisotropic")||j.getExtension("WEBKIT_EXT_texture_filter_anisotropic");Fa=j.getExtension("WEBGL_compressed_texture_s3tc")||j.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||j.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");Oa||console.log("THREE.WebGLRenderer: Float textures not supported.");ua||console.log("THREE.WebGLRenderer: Standard derivatives not supported.");La||console.log("THREE.WebGLRenderer: Anisotropic texture filtering not supported.");
Fa||console.log("THREE.WebGLRenderer: S3TC compressed textures not supported.");void 0===j.getShaderPrecisionFormat&&(j.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}});j.clearColor(0,0,0,1);j.clearDepth(1);j.clearStencil(0);j.enable(j.DEPTH_TEST);j.depthFunc(j.LEQUAL);j.frontFace(j.CCW);j.cullFace(j.BACK);j.enable(j.CULL_FACE);j.enable(j.BLEND);j.blendEquation(j.FUNC_ADD);j.blendFunc(j.SRC_ALPHA,j.ONE_MINUS_SRC_ALPHA);j.viewport(bb,cb,Ma,fb);j.clearColor(Q.r,Q.g,Q.b,
R);this.context=j;var Mb=j.getParameter(j.MAX_TEXTURE_IMAGE_UNITS),$b=j.getParameter(j.MAX_VERTEX_TEXTURE_IMAGE_UNITS);j.getParameter(j.MAX_TEXTURE_SIZE);var ac=j.getParameter(j.MAX_CUBE_MAP_TEXTURE_SIZE),Nb=La?j.getParameter(La.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,Bb=0<$b,yb=Bb&&Oa;Fa&&j.getParameter(j.COMPRESSED_TEXTURE_FORMATS);var bc=j.getShaderPrecisionFormat(j.VERTEX_SHADER,j.HIGH_FLOAT),cc=j.getShaderPrecisionFormat(j.VERTEX_SHADER,j.MEDIUM_FLOAT);j.getShaderPrecisionFormat(j.VERTEX_SHADER,j.LOW_FLOAT);
var qc=j.getShaderPrecisionFormat(j.FRAGMENT_SHADER,j.HIGH_FLOAT),rc=j.getShaderPrecisionFormat(j.FRAGMENT_SHADER,j.MEDIUM_FLOAT);j.getShaderPrecisionFormat(j.FRAGMENT_SHADER,j.LOW_FLOAT);j.getShaderPrecisionFormat(j.VERTEX_SHADER,j.HIGH_INT);j.getShaderPrecisionFormat(j.VERTEX_SHADER,j.MEDIUM_INT);j.getShaderPrecisionFormat(j.VERTEX_SHADER,j.LOW_INT);j.getShaderPrecisionFormat(j.FRAGMENT_SHADER,j.HIGH_INT);j.getShaderPrecisionFormat(j.FRAGMENT_SHADER,j.MEDIUM_INT);j.getShaderPrecisionFormat(j.FRAGMENT_SHADER,
j.LOW_INT);var sc=0<bc.precision&&0<qc.precision,Ob=0<cc.precision&&0<rc.precision;"highp"===M&&!sc&&(Ob?(M="mediump",console.warn("WebGLRenderer: highp not supported, using mediump")):(M="lowp",console.warn("WebGLRenderer: highp and mediump not supported, using lowp")));"mediump"===M&&!Ob&&(M="lowp",console.warn("WebGLRenderer: mediump not supported, using lowp"));this.getContext=function(){return j};this.supportsVertexTextures=function(){return Bb};this.supportsFloatTextures=function(){return Oa};
this.supportsStandardDerivatives=function(){return ua};this.supportsCompressedTextureS3TC=function(){return Fa};this.getMaxAnisotropy=function(){return Nb};this.getPrecision=function(){return M};this.setSize=function(a,b,c){B.width=a*this.devicePixelRatio;B.height=b*this.devicePixelRatio;1!==this.devicePixelRatio&&!1!==c&&(B.style.width=a+"px",B.style.height=b+"px");this.setViewport(0,0,B.width,B.height)};this.setViewport=function(a,b,c,d){bb=void 0!==a?a:0;cb=void 0!==b?b:0;Ma=void 0!==c?c:B.width;
fb=void 0!==d?d:B.height;j.viewport(bb,cb,Ma,fb)};this.setScissor=function(a,b,c,d){j.scissor(a,b,c,d)};this.enableScissorTest=function(a){a?j.enable(j.SCISSOR_TEST):j.disable(j.SCISSOR_TEST)};this.setClearColor=function(a,b){Q.set(a);R=void 0!==b?b:1;j.clearColor(Q.r,Q.g,Q.b,R)};this.setClearColorHex=function(a,b){console.warn("DEPRECATED: .setClearColorHex() is being removed. Use .setClearColor() instead.");this.setClearColor(a,b)};this.getClearColor=function(){return Q};this.getClearAlpha=function(){return R};
this.clear=function(a,b,c){var d=0;if(void 0===a||a)d|=j.COLOR_BUFFER_BIT;if(void 0===b||b)d|=j.DEPTH_BUFFER_BIT;if(void 0===c||c)d|=j.STENCIL_BUFFER_BIT;j.clear(d)};this.clearColor=function(){j.clear(j.COLOR_BUFFER_BIT)};this.clearDepth=function(){j.clear(j.DEPTH_BUFFER_BIT)};this.clearStencil=function(){j.clear(j.STENCIL_BUFFER_BIT)};this.clearTarget=function(a,b,c,d){this.setRenderTarget(a);this.clear(b,c,d)};this.addPostPlugin=function(a){a.init(this);this.renderPluginsPost.push(a)};this.addPrePlugin=
function(a){a.init(this);this.renderPluginsPre.push(a)};this.updateShadowMap=function(a,b){Ba=null;Aa=$=ka=Ga=ja=-1;ta=!0;U=Y=-1;this.shadowMapPlugin.update(a,b)};var Cb=function(a){a=a.target;a.removeEventListener("dispose",Cb);a.__webglInit=void 0;if(a instanceof THREE.BufferGeometry){var b=a.attributes,c;for(c in b)void 0!==b[c].buffer&&j.deleteBuffer(b[c].buffer);L.info.memory.geometries--}else if(void 0!==a.geometryGroups)for(b in a.geometryGroups){c=a.geometryGroups[b];if(void 0!==c.numMorphTargets)for(var d=
0,e=c.numMorphTargets;d<e;d++)j.deleteBuffer(c.__webglMorphTargetsBuffers[d]);if(void 0!==c.numMorphNormals){d=0;for(e=c.numMorphNormals;d<e;d++)j.deleteBuffer(c.__webglMorphNormalsBuffers[d])}Hb(c)}else Hb(a)},Db=function(a){a=a.target;a.removeEventListener("dispose",Db);a.image&&a.image.__webglTextureCube?j.deleteTexture(a.image.__webglTextureCube):a.__webglInit&&(a.__webglInit=!1,j.deleteTexture(a.__webglTexture));L.info.memory.textures--},Eb=function(a){a=a.target;a.removeEventListener("dispose",
Eb);if(a&&a.__webglTexture)if(j.deleteTexture(a.__webglTexture),a instanceof THREE.WebGLRenderTargetCube)for(var b=0;6>b;b++)j.deleteFramebuffer(a.__webglFramebuffer[b]),j.deleteRenderbuffer(a.__webglRenderbuffer[b]);else j.deleteFramebuffer(a.__webglFramebuffer),j.deleteRenderbuffer(a.__webglRenderbuffer);L.info.memory.textures--},Fb=function(a){a=a.target;a.removeEventListener("dispose",Fb);Gb(a)},Hb=function(a){void 0!==a.__webglVertexBuffer&&j.deleteBuffer(a.__webglVertexBuffer);void 0!==a.__webglNormalBuffer&&
j.deleteBuffer(a.__webglNormalBuffer);void 0!==a.__webglTangentBuffer&&j.deleteBuffer(a.__webglTangentBuffer);void 0!==a.__webglColorBuffer&&j.deleteBuffer(a.__webglColorBuffer);void 0!==a.__webglUVBuffer&&j.deleteBuffer(a.__webglUVBuffer);void 0!==a.__webglUV2Buffer&&j.deleteBuffer(a.__webglUV2Buffer);void 0!==a.__webglSkinIndicesBuffer&&j.deleteBuffer(a.__webglSkinIndicesBuffer);void 0!==a.__webglSkinWeightsBuffer&&j.deleteBuffer(a.__webglSkinWeightsBuffer);void 0!==a.__webglFaceBuffer&&j.deleteBuffer(a.__webglFaceBuffer);
void 0!==a.__webglLineBuffer&&j.deleteBuffer(a.__webglLineBuffer);void 0!==a.__webglLineDistanceBuffer&&j.deleteBuffer(a.__webglLineDistanceBuffer);if(void 0!==a.__webglCustomAttributesList)for(var b in a.__webglCustomAttributesList)j.deleteBuffer(a.__webglCustomAttributesList[b].buffer);L.info.memory.geometries--},Gb=function(a){var b=a.program;if(void 0!==b){a.program=void 0;var c,d,e=!1,a=0;for(c=da.length;a<c;a++)if(d=da[a],d.program===b){d.usedTimes--;0===d.usedTimes&&(e=!0);break}if(!0===e){e=
[];a=0;for(c=da.length;a<c;a++)d=da[a],d.program!==b&&e.push(d);da=e;j.deleteProgram(b);L.info.memory.programs--}}};this.renderBufferImmediate=function(a,b,c){a.hasPositions&&!a.__webglVertexBuffer&&(a.__webglVertexBuffer=j.createBuffer());a.hasNormals&&!a.__webglNormalBuffer&&(a.__webglNormalBuffer=j.createBuffer());a.hasUvs&&!a.__webglUvBuffer&&(a.__webglUvBuffer=j.createBuffer());a.hasColors&&!a.__webglColorBuffer&&(a.__webglColorBuffer=j.createBuffer());a.hasPositions&&(j.bindBuffer(j.ARRAY_BUFFER,
a.__webglVertexBuffer),j.bufferData(j.ARRAY_BUFFER,a.positionArray,j.DYNAMIC_DRAW),j.enableVertexAttribArray(b.attributes.position),j.vertexAttribPointer(b.attributes.position,3,j.FLOAT,!1,0,0));if(a.hasNormals){j.bindBuffer(j.ARRAY_BUFFER,a.__webglNormalBuffer);if(c.shading===THREE.FlatShading){var d,e,f,g,h,i,k,l,m,n,p,q=3*a.count;for(p=0;p<q;p+=9)n=a.normalArray,d=n[p],e=n[p+1],f=n[p+2],g=n[p+3],i=n[p+4],l=n[p+5],h=n[p+6],k=n[p+7],m=n[p+8],d=(d+g+h)/3,e=(e+i+k)/3,f=(f+l+m)/3,n[p]=d,n[p+1]=e,n[p+
2]=f,n[p+3]=d,n[p+4]=e,n[p+5]=f,n[p+6]=d,n[p+7]=e,n[p+8]=f}j.bufferData(j.ARRAY_BUFFER,a.normalArray,j.DYNAMIC_DRAW);j.enableVertexAttribArray(b.attributes.normal);j.vertexAttribPointer(b.attributes.normal,3,j.FLOAT,!1,0,0)}a.hasUvs&&c.map&&(j.bindBuffer(j.ARRAY_BUFFER,a.__webglUvBuffer),j.bufferData(j.ARRAY_BUFFER,a.uvArray,j.DYNAMIC_DRAW),j.enableVertexAttribArray(b.attributes.uv),j.vertexAttribPointer(b.attributes.uv,2,j.FLOAT,!1,0,0));a.hasColors&&c.vertexColors!==THREE.NoColors&&(j.bindBuffer(j.ARRAY_BUFFER,
a.__webglColorBuffer),j.bufferData(j.ARRAY_BUFFER,a.colorArray,j.DYNAMIC_DRAW),j.enableVertexAttribArray(b.attributes.color),j.vertexAttribPointer(b.attributes.color,3,j.FLOAT,!1,0,0));j.drawArrays(j.TRIANGLES,0,a.count);a.count=0};this.renderBufferDirect=function(a,b,c,d,e,f){if(!1!==d.visible){var i,k,l,m;i=z(a,b,c,d,f);b=i.attributes;a=e.attributes;c=!1;i=16777215*e.id+2*i.id+(d.wireframe?1:0);i!==$&&($=i,c=!0);c&&g();if(f instanceof THREE.Mesh)if(f=a.index){e=e.offsets;1<e.length&&(c=!0);for(var n=
0,p=e.length;n<p;n++){var q=e[n].index;if(c){for(k in b)l=b[k],i=a[k],0<=l&&(i?(m=i.itemSize,j.bindBuffer(j.ARRAY_BUFFER,i.buffer),h(l),j.vertexAttribPointer(l,m,j.FLOAT,!1,0,4*q*m)):d.defaultAttributeValues&&(2===d.defaultAttributeValues[k].length?j.vertexAttrib2fv(l,d.defaultAttributeValues[k]):3===d.defaultAttributeValues[k].length&&j.vertexAttrib3fv(l,d.defaultAttributeValues[k])));j.bindBuffer(j.ELEMENT_ARRAY_BUFFER,f.buffer)}j.drawElements(j.TRIANGLES,e[n].count,j.UNSIGNED_SHORT,2*e[n].start);
L.info.render.calls++;L.info.render.vertices+=e[n].count;L.info.render.faces+=e[n].count/3}}else{if(c)for(k in b)"index"!==k&&(l=b[k],i=a[k],0<=l&&(i?(m=i.itemSize,j.bindBuffer(j.ARRAY_BUFFER,i.buffer),h(l),j.vertexAttribPointer(l,m,j.FLOAT,!1,0,0)):d.defaultAttributeValues&&d.defaultAttributeValues[k]&&(2===d.defaultAttributeValues[k].length?j.vertexAttrib2fv(l,d.defaultAttributeValues[k]):3===d.defaultAttributeValues[k].length&&j.vertexAttrib3fv(l,d.defaultAttributeValues[k]))));d=e.attributes.position;
j.drawArrays(j.TRIANGLES,0,d.numItems/3);L.info.render.calls++;L.info.render.vertices+=d.numItems/3;L.info.render.faces+=d.numItems/3/3}else if(f instanceof THREE.ParticleSystem){if(c){for(k in b)l=b[k],i=a[k],0<=l&&(i?(m=i.itemSize,j.bindBuffer(j.ARRAY_BUFFER,i.buffer),h(l),j.vertexAttribPointer(l,m,j.FLOAT,!1,0,0)):d.defaultAttributeValues&&d.defaultAttributeValues[k]&&(2===d.defaultAttributeValues[k].length?j.vertexAttrib2fv(l,d.defaultAttributeValues[k]):3===d.defaultAttributeValues[k].length&&
j.vertexAttrib3fv(l,d.defaultAttributeValues[k])));d=a.position;j.drawArrays(j.POINTS,0,d.numItems/3);L.info.render.calls++;L.info.render.points+=d.numItems/3}}else if(f instanceof THREE.Line&&c){for(k in b)l=b[k],i=a[k],0<=l&&(i?(m=i.itemSize,j.bindBuffer(j.ARRAY_BUFFER,i.buffer),h(l),j.vertexAttribPointer(l,m,j.FLOAT,!1,0,0)):d.defaultAttributeValues&&d.defaultAttributeValues[k]&&(2===d.defaultAttributeValues[k].length?j.vertexAttrib2fv(l,d.defaultAttributeValues[k]):3===d.defaultAttributeValues[k].length&&
j.vertexAttrib3fv(l,d.defaultAttributeValues[k])));k=f.type===THREE.LineStrip?j.LINE_STRIP:j.LINES;E(d.linewidth);d=a.position;j.drawArrays(k,0,d.numItems/3);L.info.render.calls++;L.info.render.points+=d.numItems}}};this.renderBuffer=function(a,b,c,d,e,f){if(!1!==d.visible){var i,l,c=z(a,b,c,d,f),a=c.attributes,b=!1,c=16777215*e.id+2*c.id+(d.wireframe?1:0);c!==$&&($=c,b=!0);b&&g();if(!d.morphTargets&&0<=a.position)b&&(j.bindBuffer(j.ARRAY_BUFFER,e.__webglVertexBuffer),h(a.position),j.vertexAttribPointer(a.position,
3,j.FLOAT,!1,0,0));else if(f.morphTargetBase){c=d.program.attributes;-1!==f.morphTargetBase&&0<=c.position?(j.bindBuffer(j.ARRAY_BUFFER,e.__webglMorphTargetsBuffers[f.morphTargetBase]),h(c.position),j.vertexAttribPointer(c.position,3,j.FLOAT,!1,0,0)):0<=c.position&&(j.bindBuffer(j.ARRAY_BUFFER,e.__webglVertexBuffer),h(c.position),j.vertexAttribPointer(c.position,3,j.FLOAT,!1,0,0));if(f.morphTargetForcedOrder.length){var m=0;l=f.morphTargetForcedOrder;for(i=f.morphTargetInfluences;m<d.numSupportedMorphTargets&&
m<l.length;)0<=c["morphTarget"+m]&&(j.bindBuffer(j.ARRAY_BUFFER,e.__webglMorphTargetsBuffers[l[m]]),h(c["morphTarget"+m]),j.vertexAttribPointer(c["morphTarget"+m],3,j.FLOAT,!1,0,0)),0<=c["morphNormal"+m]&&d.morphNormals&&(j.bindBuffer(j.ARRAY_BUFFER,e.__webglMorphNormalsBuffers[l[m]]),h(c["morphNormal"+m]),j.vertexAttribPointer(c["morphNormal"+m],3,j.FLOAT,!1,0,0)),f.__webglMorphTargetInfluences[m]=i[l[m]],m++}else{l=[];i=f.morphTargetInfluences;var n,p=i.length;for(n=0;n<p;n++)m=i[n],0<m&&l.push([m,
n]);l.length>d.numSupportedMorphTargets?(l.sort(k),l.length=d.numSupportedMorphTargets):l.length>d.numSupportedMorphNormals?l.sort(k):0===l.length&&l.push([0,0]);for(m=0;m<d.numSupportedMorphTargets;)l[m]?(n=l[m][1],0<=c["morphTarget"+m]&&(j.bindBuffer(j.ARRAY_BUFFER,e.__webglMorphTargetsBuffers[n]),h(c["morphTarget"+m]),j.vertexAttribPointer(c["morphTarget"+m],3,j.FLOAT,!1,0,0)),0<=c["morphNormal"+m]&&d.morphNormals&&(j.bindBuffer(j.ARRAY_BUFFER,e.__webglMorphNormalsBuffers[n]),h(c["morphNormal"+
m]),j.vertexAttribPointer(c["morphNormal"+m],3,j.FLOAT,!1,0,0)),f.__webglMorphTargetInfluences[m]=i[n]):f.__webglMorphTargetInfluences[m]=0,m++}null!==d.program.uniforms.morphTargetInfluences&&j.uniform1fv(d.program.uniforms.morphTargetInfluences,f.__webglMorphTargetInfluences)}if(b){if(e.__webglCustomAttributesList){i=0;for(l=e.__webglCustomAttributesList.length;i<l;i++)c=e.__webglCustomAttributesList[i],0<=a[c.buffer.belongsToAttribute]&&(j.bindBuffer(j.ARRAY_BUFFER,c.buffer),h(a[c.buffer.belongsToAttribute]),
j.vertexAttribPointer(a[c.buffer.belongsToAttribute],c.size,j.FLOAT,!1,0,0))}0<=a.color&&(0<f.geometry.colors.length||0<f.geometry.faces.length?(j.bindBuffer(j.ARRAY_BUFFER,e.__webglColorBuffer),h(a.color),j.vertexAttribPointer(a.color,3,j.FLOAT,!1,0,0)):d.defaultAttributeValues&&j.vertexAttrib3fv(a.color,d.defaultAttributeValues.color));0<=a.normal&&(j.bindBuffer(j.ARRAY_BUFFER,e.__webglNormalBuffer),h(a.normal),j.vertexAttribPointer(a.normal,3,j.FLOAT,!1,0,0));0<=a.tangent&&(j.bindBuffer(j.ARRAY_BUFFER,
e.__webglTangentBuffer),h(a.tangent),j.vertexAttribPointer(a.tangent,4,j.FLOAT,!1,0,0));0<=a.uv&&(f.geometry.faceVertexUvs[0]?(j.bindBuffer(j.ARRAY_BUFFER,e.__webglUVBuffer),h(a.uv),j.vertexAttribPointer(a.uv,2,j.FLOAT,!1,0,0)):d.defaultAttributeValues&&j.vertexAttrib2fv(a.uv,d.defaultAttributeValues.uv));0<=a.uv2&&(f.geometry.faceVertexUvs[1]?(j.bindBuffer(j.ARRAY_BUFFER,e.__webglUV2Buffer),h(a.uv2),j.vertexAttribPointer(a.uv2,2,j.FLOAT,!1,0,0)):d.defaultAttributeValues&&j.vertexAttrib2fv(a.uv2,
d.defaultAttributeValues.uv2));d.skinning&&(0<=a.skinIndex&&0<=a.skinWeight)&&(j.bindBuffer(j.ARRAY_BUFFER,e.__webglSkinIndicesBuffer),h(a.skinIndex),j.vertexAttribPointer(a.skinIndex,4,j.FLOAT,!1,0,0),j.bindBuffer(j.ARRAY_BUFFER,e.__webglSkinWeightsBuffer),h(a.skinWeight),j.vertexAttribPointer(a.skinWeight,4,j.FLOAT,!1,0,0));0<=a.lineDistance&&(j.bindBuffer(j.ARRAY_BUFFER,e.__webglLineDistanceBuffer),h(a.lineDistance),j.vertexAttribPointer(a.lineDistance,1,j.FLOAT,!1,0,0))}f instanceof THREE.Mesh?
(d.wireframe?(E(d.wireframeLinewidth),b&&j.bindBuffer(j.ELEMENT_ARRAY_BUFFER,e.__webglLineBuffer),j.drawElements(j.LINES,e.__webglLineCount,j.UNSIGNED_SHORT,0)):(b&&j.bindBuffer(j.ELEMENT_ARRAY_BUFFER,e.__webglFaceBuffer),j.drawElements(j.TRIANGLES,e.__webglFaceCount,j.UNSIGNED_SHORT,0)),L.info.render.calls++,L.info.render.vertices+=e.__webglFaceCount,L.info.render.faces+=e.__webglFaceCount/3):f instanceof THREE.Line?(f=f.type===THREE.LineStrip?j.LINE_STRIP:j.LINES,E(d.linewidth),j.drawArrays(f,0,
e.__webglLineCount),L.info.render.calls++):f instanceof THREE.ParticleSystem&&(j.drawArrays(j.POINTS,0,e.__webglParticleCount),L.info.render.calls++,L.info.render.points+=e.__webglParticleCount)}};this.render=function(a,b,c,d){if(!1===b instanceof THREE.Camera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else{var e,f,g,h,k=a.__lights,n=a.fog;Aa=-1;ta=!0;!0===a.autoUpdate&&a.updateMatrixWorld();void 0===b.parent&&b.updateMatrixWorld();b.matrixWorldInverse.getInverse(b.matrixWorld);
Ea.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse);la.setFromMatrix(Ea);this.autoUpdateObjects&&this.initWebGLObjects(a);m(this.renderPluginsPre,a,b);L.info.render.calls=0;L.info.render.vertices=0;L.info.render.faces=0;L.info.render.points=0;this.setRenderTarget(c);(this.autoClear||d)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil);h=a.__webglObjects;d=0;for(e=h.length;d<e;d++)if(f=h[d],g=f.object,f.id=d,f.render=!1,g.visible&&(!(g instanceof THREE.Mesh||g instanceof
THREE.ParticleSystem)||!g.frustumCulled||la.intersectsObject(g))){var q=g;q._modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,q.matrixWorld);q._normalMatrix.getNormalMatrix(q._modelViewMatrix);var q=f,r=q.buffer,t=void 0,s=t=void 0,s=q.object.material;if(s instanceof THREE.MeshFaceMaterial)t=r.materialIndex,t=s.materials[t],t.transparent?(q.transparent=t,q.opaque=null):(q.opaque=t,q.transparent=null);else if(t=s)t.transparent?(q.transparent=t,q.opaque=null):(q.opaque=t,q.transparent=null);f.render=
!0;!0===this.sortObjects&&(null!==g.renderDepth?f.z=g.renderDepth:(ra.setFromMatrixPosition(g.matrixWorld),ra.applyProjection(Ea),f.z=ra.z))}this.sortObjects&&h.sort(i);h=a.__webglObjectsImmediate;d=0;for(e=h.length;d<e;d++)f=h[d],g=f.object,g.visible&&(g._modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,g.matrixWorld),g._normalMatrix.getNormalMatrix(g._modelViewMatrix),g=f.object.material,g.transparent?(f.transparent=g,f.opaque=null):(f.opaque=g,f.transparent=null));a.overrideMaterial?(d=a.overrideMaterial,
this.setBlending(d.blending,d.blendEquation,d.blendSrc,d.blendDst),this.setDepthTest(d.depthTest),this.setDepthWrite(d.depthWrite),A(d.polygonOffset,d.polygonOffsetFactor,d.polygonOffsetUnits),l(a.__webglObjects,!1,"",b,k,n,!0,d),p(a.__webglObjectsImmediate,"",b,k,n,!1,d)):(d=null,this.setBlending(THREE.NoBlending),l(a.__webglObjects,!0,"opaque",b,k,n,!1,d),p(a.__webglObjectsImmediate,"opaque",b,k,n,!1,d),l(a.__webglObjects,!1,"transparent",b,k,n,!0,d),p(a.__webglObjectsImmediate,"transparent",b,
k,n,!0,d));m(this.renderPluginsPost,a,b);c&&(c.generateMipmaps&&c.minFilter!==THREE.NearestFilter&&c.minFilter!==THREE.LinearFilter)&&(c instanceof THREE.WebGLRenderTargetCube?(j.bindTexture(j.TEXTURE_CUBE_MAP,c.__webglTexture),j.generateMipmap(j.TEXTURE_CUBE_MAP),j.bindTexture(j.TEXTURE_CUBE_MAP,null)):(j.bindTexture(j.TEXTURE_2D,c.__webglTexture),j.generateMipmap(j.TEXTURE_2D),j.bindTexture(j.TEXTURE_2D,null)));this.setDepthTest(!0);this.setDepthWrite(!0)}};this.renderImmediateObject=function(a,
b,c,d,e){var f=z(a,b,c,d,e);$=-1;L.setMaterialFaces(d);e.immediateRenderCallback?e.immediateRenderCallback(f,j,la):e.render(function(a){L.renderBufferImmediate(a,f,d)})};this.initWebGLObjects=function(a){a.__webglObjects||(a.__webglObjects=[],a.__webglObjectsImmediate=[],a.__webglSprites=[],a.__webglFlares=[]);for(;a.__objectsAdded.length;)t(a.__objectsAdded[0],a),a.__objectsAdded.splice(0,1);for(;a.__objectsRemoved.length;)u(a.__objectsRemoved[0],a),a.__objectsRemoved.splice(0,1);for(var b=0,g=a.__webglObjects.length;b<
g;b++){var h=a.__webglObjects[b].object;void 0===h.__webglInit&&(void 0!==h.__webglActive&&u(h,a),t(h,a));var i=h,l=i.geometry,m=void 0,p=void 0,r=void 0;if(l instanceof THREE.BufferGeometry){var s=j.DYNAMIC_DRAW,v=!l.dynamic,z=l.attributes,y=void 0,x=void 0;for(y in z)x=z[y],x.needsUpdate&&("index"===y?(j.bindBuffer(j.ELEMENT_ARRAY_BUFFER,x.buffer),j.bufferData(j.ELEMENT_ARRAY_BUFFER,x.array,s)):(j.bindBuffer(j.ARRAY_BUFFER,x.buffer),j.bufferData(j.ARRAY_BUFFER,x.array,s)),x.needsUpdate=!1),v&&!x.dynamic&&
(x.array=null)}else if(i instanceof THREE.Mesh){for(var A=0,B=l.geometryGroupsList.length;A<B;A++)if(m=l.geometryGroupsList[A],r=d(i,m),l.buffersNeedUpdate&&c(m,i),p=r.attributes&&q(r),l.verticesNeedUpdate||l.morphTargetsNeedUpdate||l.elementsNeedUpdate||l.uvsNeedUpdate||l.normalsNeedUpdate||l.colorsNeedUpdate||l.tangentsNeedUpdate||p){var w=m,E=i,D=j.DYNAMIC_DRAW,G=!l.dynamic,F=r;if(w.__inittedArrays){var K=e(F),I=F.vertexColors?F.vertexColors:!1,L=f(F),O=K===THREE.SmoothShading,C=void 0,J=void 0,
V=void 0,M=void 0,Q=void 0,ba=void 0,R=void 0,U=void 0,Y=void 0,za=void 0,$=void 0,P=void 0,X=void 0,W=void 0,Ba=void 0,ea=void 0,Aa=void 0,ca=void 0,da=void 0,ha=void 0,fa=void 0,ja=void 0,ka=void 0,la=void 0,na=void 0,pa=void 0,sa=void 0,ta=void 0,ua=void 0,Ca=void 0,Da=void 0,Ga=void 0,Fa=void 0,Ka=void 0,Sa=void 0,La=void 0,va=void 0,wa=void 0,Qa=void 0,Ra=void 0,db=0,eb=0,Oa=0,Pa=0,Ua=0,hb=0,Ta=0,tb=0,Za=0,qa=0,xa=0,N=0,Na=void 0,ib=w.__vertexArray,bb=w.__uvArray,cb=w.__uv2Array,Ma=w.__normalArray,
Va=w.__tangentArray,jb=w.__colorArray,Wa=w.__skinIndexArray,Xa=w.__skinWeightArray,fb=w.__morphTargetsArrays,sb=w.__morphNormalsArrays,pb=w.__webglCustomAttributesList,H=void 0,Pb=w.__faceArray,vb=w.__lineArray,Ha=E.geometry,Bb=Ha.elementsNeedUpdate,yb=Ha.uvsNeedUpdate,Db=Ha.normalsNeedUpdate,Mb=Ha.tangentsNeedUpdate,Nb=Ha.colorsNeedUpdate,Ob=Ha.morphTargetsNeedUpdate,ec=Ha.vertices,aa=w.faces3,kb=Ha.faces,Cb=Ha.faceVertexUvs[0],Eb=Ha.faceVertexUvs[1],fc=Ha.skinIndices,Qb=Ha.skinWeights,Rb=Ha.morphTargets,
Fb=Ha.morphNormals;if(Ha.verticesNeedUpdate){C=0;for(J=aa.length;C<J;C++)M=kb[aa[C]],P=ec[M.a],X=ec[M.b],W=ec[M.c],ib[eb]=P.x,ib[eb+1]=P.y,ib[eb+2]=P.z,ib[eb+3]=X.x,ib[eb+4]=X.y,ib[eb+5]=X.z,ib[eb+6]=W.x,ib[eb+7]=W.y,ib[eb+8]=W.z,eb+=9;j.bindBuffer(j.ARRAY_BUFFER,w.__webglVertexBuffer);j.bufferData(j.ARRAY_BUFFER,ib,D)}if(Ob){Sa=0;for(La=Rb.length;Sa<La;Sa++){C=xa=0;for(J=aa.length;C<J;C++)Qa=aa[C],M=kb[Qa],P=Rb[Sa].vertices[M.a],X=Rb[Sa].vertices[M.b],W=Rb[Sa].vertices[M.c],va=fb[Sa],va[xa]=P.x,
va[xa+1]=P.y,va[xa+2]=P.z,va[xa+3]=X.x,va[xa+4]=X.y,va[xa+5]=X.z,va[xa+6]=W.x,va[xa+7]=W.y,va[xa+8]=W.z,F.morphNormals&&(O?(Ra=Fb[Sa].vertexNormals[Qa],ca=Ra.a,da=Ra.b,ha=Ra.c):ha=da=ca=Fb[Sa].faceNormals[Qa],wa=sb[Sa],wa[xa]=ca.x,wa[xa+1]=ca.y,wa[xa+2]=ca.z,wa[xa+3]=da.x,wa[xa+4]=da.y,wa[xa+5]=da.z,wa[xa+6]=ha.x,wa[xa+7]=ha.y,wa[xa+8]=ha.z),xa+=9;j.bindBuffer(j.ARRAY_BUFFER,w.__webglMorphTargetsBuffers[Sa]);j.bufferData(j.ARRAY_BUFFER,fb[Sa],D);F.morphNormals&&(j.bindBuffer(j.ARRAY_BUFFER,w.__webglMorphNormalsBuffers[Sa]),
j.bufferData(j.ARRAY_BUFFER,sb[Sa],D))}}if(Qb.length){C=0;for(J=aa.length;C<J;C++)M=kb[aa[C]],la=Qb[M.a],na=Qb[M.b],pa=Qb[M.c],Xa[qa]=la.x,Xa[qa+1]=la.y,Xa[qa+2]=la.z,Xa[qa+3]=la.w,Xa[qa+4]=na.x,Xa[qa+5]=na.y,Xa[qa+6]=na.z,Xa[qa+7]=na.w,Xa[qa+8]=pa.x,Xa[qa+9]=pa.y,Xa[qa+10]=pa.z,Xa[qa+11]=pa.w,sa=fc[M.a],ta=fc[M.b],ua=fc[M.c],Wa[qa]=sa.x,Wa[qa+1]=sa.y,Wa[qa+2]=sa.z,Wa[qa+3]=sa.w,Wa[qa+4]=ta.x,Wa[qa+5]=ta.y,Wa[qa+6]=ta.z,Wa[qa+7]=ta.w,Wa[qa+8]=ua.x,Wa[qa+9]=ua.y,Wa[qa+10]=ua.z,Wa[qa+11]=ua.w,qa+=12;
0<qa&&(j.bindBuffer(j.ARRAY_BUFFER,w.__webglSkinIndicesBuffer),j.bufferData(j.ARRAY_BUFFER,Wa,D),j.bindBuffer(j.ARRAY_BUFFER,w.__webglSkinWeightsBuffer),j.bufferData(j.ARRAY_BUFFER,Xa,D))}if(Nb&&I){C=0;for(J=aa.length;C<J;C++)M=kb[aa[C]],R=M.vertexColors,U=M.color,3===R.length&&I===THREE.VertexColors?(fa=R[0],ja=R[1],ka=R[2]):ka=ja=fa=U,jb[Za]=fa.r,jb[Za+1]=fa.g,jb[Za+2]=fa.b,jb[Za+3]=ja.r,jb[Za+4]=ja.g,jb[Za+5]=ja.b,jb[Za+6]=ka.r,jb[Za+7]=ka.g,jb[Za+8]=ka.b,Za+=9;0<Za&&(j.bindBuffer(j.ARRAY_BUFFER,
w.__webglColorBuffer),j.bufferData(j.ARRAY_BUFFER,jb,D))}if(Mb&&Ha.hasTangents){C=0;for(J=aa.length;C<J;C++)M=kb[aa[C]],Y=M.vertexTangents,Ba=Y[0],ea=Y[1],Aa=Y[2],Va[Ta]=Ba.x,Va[Ta+1]=Ba.y,Va[Ta+2]=Ba.z,Va[Ta+3]=Ba.w,Va[Ta+4]=ea.x,Va[Ta+5]=ea.y,Va[Ta+6]=ea.z,Va[Ta+7]=ea.w,Va[Ta+8]=Aa.x,Va[Ta+9]=Aa.y,Va[Ta+10]=Aa.z,Va[Ta+11]=Aa.w,Ta+=12;j.bindBuffer(j.ARRAY_BUFFER,w.__webglTangentBuffer);j.bufferData(j.ARRAY_BUFFER,Va,D)}if(Db&&K){C=0;for(J=aa.length;C<J;C++)if(M=kb[aa[C]],Q=M.vertexNormals,ba=M.normal,
3===Q.length&&O)for(Ca=0;3>Ca;Ca++)Ga=Q[Ca],Ma[hb]=Ga.x,Ma[hb+1]=Ga.y,Ma[hb+2]=Ga.z,hb+=3;else for(Ca=0;3>Ca;Ca++)Ma[hb]=ba.x,Ma[hb+1]=ba.y,Ma[hb+2]=ba.z,hb+=3;j.bindBuffer(j.ARRAY_BUFFER,w.__webglNormalBuffer);j.bufferData(j.ARRAY_BUFFER,Ma,D)}if(yb&&Cb&&L){C=0;for(J=aa.length;C<J;C++)if(V=aa[C],za=Cb[V],void 0!==za)for(Ca=0;3>Ca;Ca++)Fa=za[Ca],bb[Oa]=Fa.x,bb[Oa+1]=Fa.y,Oa+=2;0<Oa&&(j.bindBuffer(j.ARRAY_BUFFER,w.__webglUVBuffer),j.bufferData(j.ARRAY_BUFFER,bb,D))}if(yb&&Eb&&L){C=0;for(J=aa.length;C<
J;C++)if(V=aa[C],$=Eb[V],void 0!==$)for(Ca=0;3>Ca;Ca++)Ka=$[Ca],cb[Pa]=Ka.x,cb[Pa+1]=Ka.y,Pa+=2;0<Pa&&(j.bindBuffer(j.ARRAY_BUFFER,w.__webglUV2Buffer),j.bufferData(j.ARRAY_BUFFER,cb,D))}if(Bb){C=0;for(J=aa.length;C<J;C++)Pb[Ua]=db,Pb[Ua+1]=db+1,Pb[Ua+2]=db+2,Ua+=3,vb[tb]=db,vb[tb+1]=db+1,vb[tb+2]=db,vb[tb+3]=db+2,vb[tb+4]=db+1,vb[tb+5]=db+2,tb+=6,db+=3;j.bindBuffer(j.ELEMENT_ARRAY_BUFFER,w.__webglFaceBuffer);j.bufferData(j.ELEMENT_ARRAY_BUFFER,Pb,D);j.bindBuffer(j.ELEMENT_ARRAY_BUFFER,w.__webglLineBuffer);
j.bufferData(j.ELEMENT_ARRAY_BUFFER,vb,D)}if(pb){Ca=0;for(Da=pb.length;Ca<Da;Ca++)if(H=pb[Ca],H.__original.needsUpdate){N=0;if(1===H.size)if(void 0===H.boundTo||"vertices"===H.boundTo){C=0;for(J=aa.length;C<J;C++)M=kb[aa[C]],H.array[N]=H.value[M.a],H.array[N+1]=H.value[M.b],H.array[N+2]=H.value[M.c],N+=3}else{if("faces"===H.boundTo){C=0;for(J=aa.length;C<J;C++)Na=H.value[aa[C]],H.array[N]=Na,H.array[N+1]=Na,H.array[N+2]=Na,N+=3}}else if(2===H.size)if(void 0===H.boundTo||"vertices"===H.boundTo){C=
0;for(J=aa.length;C<J;C++)M=kb[aa[C]],P=H.value[M.a],X=H.value[M.b],W=H.value[M.c],H.array[N]=P.x,H.array[N+1]=P.y,H.array[N+2]=X.x,H.array[N+3]=X.y,H.array[N+4]=W.x,H.array[N+5]=W.y,N+=6}else{if("faces"===H.boundTo){C=0;for(J=aa.length;C<J;C++)W=X=P=Na=H.value[aa[C]],H.array[N]=P.x,H.array[N+1]=P.y,H.array[N+2]=X.x,H.array[N+3]=X.y,H.array[N+4]=W.x,H.array[N+5]=W.y,N+=6}}else if(3===H.size){var oa;oa="c"===H.type?["r","g","b"]:["x","y","z"];if(void 0===H.boundTo||"vertices"===H.boundTo){C=0;for(J=
aa.length;C<J;C++)M=kb[aa[C]],P=H.value[M.a],X=H.value[M.b],W=H.value[M.c],H.array[N]=P[oa[0]],H.array[N+1]=P[oa[1]],H.array[N+2]=P[oa[2]],H.array[N+3]=X[oa[0]],H.array[N+4]=X[oa[1]],H.array[N+5]=X[oa[2]],H.array[N+6]=W[oa[0]],H.array[N+7]=W[oa[1]],H.array[N+8]=W[oa[2]],N+=9}else if("faces"===H.boundTo){C=0;for(J=aa.length;C<J;C++)W=X=P=Na=H.value[aa[C]],H.array[N]=P[oa[0]],H.array[N+1]=P[oa[1]],H.array[N+2]=P[oa[2]],H.array[N+3]=X[oa[0]],H.array[N+4]=X[oa[1]],H.array[N+5]=X[oa[2]],H.array[N+6]=W[oa[0]],
H.array[N+7]=W[oa[1]],H.array[N+8]=W[oa[2]],N+=9}else if("faceVertices"===H.boundTo){C=0;for(J=aa.length;C<J;C++)Na=H.value[aa[C]],P=Na[0],X=Na[1],W=Na[2],H.array[N]=P[oa[0]],H.array[N+1]=P[oa[1]],H.array[N+2]=P[oa[2]],H.array[N+3]=X[oa[0]],H.array[N+4]=X[oa[1]],H.array[N+5]=X[oa[2]],H.array[N+6]=W[oa[0]],H.array[N+7]=W[oa[1]],H.array[N+8]=W[oa[2]],N+=9}}else if(4===H.size)if(void 0===H.boundTo||"vertices"===H.boundTo){C=0;for(J=aa.length;C<J;C++)M=kb[aa[C]],P=H.value[M.a],X=H.value[M.b],W=H.value[M.c],
H.array[N]=P.x,H.array[N+1]=P.y,H.array[N+2]=P.z,H.array[N+3]=P.w,H.array[N+4]=X.x,H.array[N+5]=X.y,H.array[N+6]=X.z,H.array[N+7]=X.w,H.array[N+8]=W.x,H.array[N+9]=W.y,H.array[N+10]=W.z,H.array[N+11]=W.w,N+=12}else if("faces"===H.boundTo){C=0;for(J=aa.length;C<J;C++)W=X=P=Na=H.value[aa[C]],H.array[N]=P.x,H.array[N+1]=P.y,H.array[N+2]=P.z,H.array[N+3]=P.w,H.array[N+4]=X.x,H.array[N+5]=X.y,H.array[N+6]=X.z,H.array[N+7]=X.w,H.array[N+8]=W.x,H.array[N+9]=W.y,H.array[N+10]=W.z,H.array[N+11]=W.w,N+=12}else if("faceVertices"===
H.boundTo){C=0;for(J=aa.length;C<J;C++)Na=H.value[aa[C]],P=Na[0],X=Na[1],W=Na[2],H.array[N]=P.x,H.array[N+1]=P.y,H.array[N+2]=P.z,H.array[N+3]=P.w,H.array[N+4]=X.x,H.array[N+5]=X.y,H.array[N+6]=X.z,H.array[N+7]=X.w,H.array[N+8]=W.x,H.array[N+9]=W.y,H.array[N+10]=W.z,H.array[N+11]=W.w,N+=12}j.bindBuffer(j.ARRAY_BUFFER,H.buffer);j.bufferData(j.ARRAY_BUFFER,H.array,D)}}G&&(delete w.__inittedArrays,delete w.__colorArray,delete w.__normalArray,delete w.__tangentArray,delete w.__uvArray,delete w.__uv2Array,
delete w.__faceArray,delete w.__vertexArray,delete w.__lineArray,delete w.__skinIndexArray,delete w.__skinWeightArray)}}l.verticesNeedUpdate=!1;l.morphTargetsNeedUpdate=!1;l.elementsNeedUpdate=!1;l.uvsNeedUpdate=!1;l.normalsNeedUpdate=!1;l.colorsNeedUpdate=!1;l.tangentsNeedUpdate=!1;l.buffersNeedUpdate=!1;r.attributes&&n(r)}else if(i instanceof THREE.Line){r=d(i,l);p=r.attributes&&q(r);if(l.verticesNeedUpdate||l.colorsNeedUpdate||l.lineDistancesNeedUpdate||p){var Ya=l,Sb=j.DYNAMIC_DRAW,Ib=void 0,
Jb=void 0,Kb=void 0,Tb=void 0,ma=void 0,Ub=void 0,Gb=Ya.vertices,Hb=Ya.colors,kc=Ya.lineDistances,Zb=Gb.length,$b=Hb.length,ac=kc.length,Vb=Ya.__vertexArray,Wb=Ya.__colorArray,lc=Ya.__lineDistanceArray,bc=Ya.colorsNeedUpdate,cc=Ya.lineDistancesNeedUpdate,gc=Ya.__webglCustomAttributesList,Xb=void 0,mc=void 0,ya=void 0,zb=void 0,Ia=void 0,ia=void 0;if(Ya.verticesNeedUpdate){for(Ib=0;Ib<Zb;Ib++)Tb=Gb[Ib],ma=3*Ib,Vb[ma]=Tb.x,Vb[ma+1]=Tb.y,Vb[ma+2]=Tb.z;j.bindBuffer(j.ARRAY_BUFFER,Ya.__webglVertexBuffer);
j.bufferData(j.ARRAY_BUFFER,Vb,Sb)}if(bc){for(Jb=0;Jb<$b;Jb++)Ub=Hb[Jb],ma=3*Jb,Wb[ma]=Ub.r,Wb[ma+1]=Ub.g,Wb[ma+2]=Ub.b;j.bindBuffer(j.ARRAY_BUFFER,Ya.__webglColorBuffer);j.bufferData(j.ARRAY_BUFFER,Wb,Sb)}if(cc){for(Kb=0;Kb<ac;Kb++)lc[Kb]=kc[Kb];j.bindBuffer(j.ARRAY_BUFFER,Ya.__webglLineDistanceBuffer);j.bufferData(j.ARRAY_BUFFER,lc,Sb)}if(gc){Xb=0;for(mc=gc.length;Xb<mc;Xb++)if(ia=gc[Xb],ia.needsUpdate&&(void 0===ia.boundTo||"vertices"===ia.boundTo)){ma=0;zb=ia.value.length;if(1===ia.size)for(ya=
0;ya<zb;ya++)ia.array[ya]=ia.value[ya];else if(2===ia.size)for(ya=0;ya<zb;ya++)Ia=ia.value[ya],ia.array[ma]=Ia.x,ia.array[ma+1]=Ia.y,ma+=2;else if(3===ia.size)if("c"===ia.type)for(ya=0;ya<zb;ya++)Ia=ia.value[ya],ia.array[ma]=Ia.r,ia.array[ma+1]=Ia.g,ia.array[ma+2]=Ia.b,ma+=3;else for(ya=0;ya<zb;ya++)Ia=ia.value[ya],ia.array[ma]=Ia.x,ia.array[ma+1]=Ia.y,ia.array[ma+2]=Ia.z,ma+=3;else if(4===ia.size)for(ya=0;ya<zb;ya++)Ia=ia.value[ya],ia.array[ma]=Ia.x,ia.array[ma+1]=Ia.y,ia.array[ma+2]=Ia.z,ia.array[ma+
3]=Ia.w,ma+=4;j.bindBuffer(j.ARRAY_BUFFER,ia.buffer);j.bufferData(j.ARRAY_BUFFER,ia.array,Sb)}}}l.verticesNeedUpdate=!1;l.colorsNeedUpdate=!1;l.lineDistancesNeedUpdate=!1;r.attributes&&n(r)}else if(i instanceof THREE.ParticleSystem){r=d(i,l);p=r.attributes&&q(r);if(l.verticesNeedUpdate||l.colorsNeedUpdate||i.sortParticles||p){var lb=l,hc=j.DYNAMIC_DRAW,Lb=i,Ja=void 0,mb=void 0,nb=void 0,T=void 0,ob=void 0,ub=void 0,Yb=lb.vertices,ic=Yb.length,jc=lb.colors,nc=jc.length,wb=lb.__vertexArray,xb=lb.__colorArray,
qb=lb.__sortArray,oc=lb.verticesNeedUpdate,pc=lb.colorsNeedUpdate,rb=lb.__webglCustomAttributesList,$a=void 0,Ab=void 0,Z=void 0,ab=void 0,ga=void 0,S=void 0;if(Lb.sortParticles){gb.copy(Ea);gb.multiply(Lb.matrixWorld);for(Ja=0;Ja<ic;Ja++)nb=Yb[Ja],ra.copy(nb),ra.applyProjection(gb),qb[Ja]=[ra.z,Ja];qb.sort(k);for(Ja=0;Ja<ic;Ja++)nb=Yb[qb[Ja][1]],T=3*Ja,wb[T]=nb.x,wb[T+1]=nb.y,wb[T+2]=nb.z;for(mb=0;mb<nc;mb++)T=3*mb,ub=jc[qb[mb][1]],xb[T]=ub.r,xb[T+1]=ub.g,xb[T+2]=ub.b;if(rb){$a=0;for(Ab=rb.length;$a<
Ab;$a++)if(S=rb[$a],void 0===S.boundTo||"vertices"===S.boundTo)if(T=0,ab=S.value.length,1===S.size)for(Z=0;Z<ab;Z++)ob=qb[Z][1],S.array[Z]=S.value[ob];else if(2===S.size)for(Z=0;Z<ab;Z++)ob=qb[Z][1],ga=S.value[ob],S.array[T]=ga.x,S.array[T+1]=ga.y,T+=2;else if(3===S.size)if("c"===S.type)for(Z=0;Z<ab;Z++)ob=qb[Z][1],ga=S.value[ob],S.array[T]=ga.r,S.array[T+1]=ga.g,S.array[T+2]=ga.b,T+=3;else for(Z=0;Z<ab;Z++)ob=qb[Z][1],ga=S.value[ob],S.array[T]=ga.x,S.array[T+1]=ga.y,S.array[T+2]=ga.z,T+=3;else if(4===
S.size)for(Z=0;Z<ab;Z++)ob=qb[Z][1],ga=S.value[ob],S.array[T]=ga.x,S.array[T+1]=ga.y,S.array[T+2]=ga.z,S.array[T+3]=ga.w,T+=4}}else{if(oc)for(Ja=0;Ja<ic;Ja++)nb=Yb[Ja],T=3*Ja,wb[T]=nb.x,wb[T+1]=nb.y,wb[T+2]=nb.z;if(pc)for(mb=0;mb<nc;mb++)ub=jc[mb],T=3*mb,xb[T]=ub.r,xb[T+1]=ub.g,xb[T+2]=ub.b;if(rb){$a=0;for(Ab=rb.length;$a<Ab;$a++)if(S=rb[$a],S.needsUpdate&&(void 0===S.boundTo||"vertices"===S.boundTo))if(ab=S.value.length,T=0,1===S.size)for(Z=0;Z<ab;Z++)S.array[Z]=S.value[Z];else if(2===S.size)for(Z=
0;Z<ab;Z++)ga=S.value[Z],S.array[T]=ga.x,S.array[T+1]=ga.y,T+=2;else if(3===S.size)if("c"===S.type)for(Z=0;Z<ab;Z++)ga=S.value[Z],S.array[T]=ga.r,S.array[T+1]=ga.g,S.array[T+2]=ga.b,T+=3;else for(Z=0;Z<ab;Z++)ga=S.value[Z],S.array[T]=ga.x,S.array[T+1]=ga.y,S.array[T+2]=ga.z,T+=3;else if(4===S.size)for(Z=0;Z<ab;Z++)ga=S.value[Z],S.array[T]=ga.x,S.array[T+1]=ga.y,S.array[T+2]=ga.z,S.array[T+3]=ga.w,T+=4}}if(oc||Lb.sortParticles)j.bindBuffer(j.ARRAY_BUFFER,lb.__webglVertexBuffer),j.bufferData(j.ARRAY_BUFFER,
wb,hc);if(pc||Lb.sortParticles)j.bindBuffer(j.ARRAY_BUFFER,lb.__webglColorBuffer),j.bufferData(j.ARRAY_BUFFER,xb,hc);if(rb){$a=0;for(Ab=rb.length;$a<Ab;$a++)if(S=rb[$a],S.needsUpdate||Lb.sortParticles)j.bindBuffer(j.ARRAY_BUFFER,S.buffer),j.bufferData(j.ARRAY_BUFFER,S.array,hc)}}l.verticesNeedUpdate=!1;l.colorsNeedUpdate=!1;r.attributes&&n(r)}}};this.initMaterial=function(a,b,c,d){var e,f,g,h;a.addEventListener("dispose",Fb);var i,k,l,m,n;a instanceof THREE.MeshDepthMaterial?n="depth":a instanceof
THREE.MeshNormalMaterial?n="normal":a instanceof THREE.MeshBasicMaterial?n="basic":a instanceof THREE.MeshLambertMaterial?n="lambert":a instanceof THREE.MeshPhongMaterial?n="phong":a instanceof THREE.LineBasicMaterial?n="basic":a instanceof THREE.LineDashedMaterial?n="dashed":a instanceof THREE.ParticleSystemMaterial&&(n="particle_basic");if(n){var p=THREE.ShaderLib[n];a.uniforms=THREE.UniformsUtils.clone(p.uniforms);a.vertexShader=p.vertexShader;a.fragmentShader=p.fragmentShader}var q=e=0,r=0,t=
p=0;for(f=b.length;t<f;t++)g=b[t],g.onlyShadow||(g instanceof THREE.DirectionalLight&&e++,g instanceof THREE.PointLight&&q++,g instanceof THREE.SpotLight&&r++,g instanceof THREE.HemisphereLight&&p++);f=q;g=r;h=p;r=p=0;for(q=b.length;r<q;r++)t=b[r],t.castShadow&&(t instanceof THREE.SpotLight&&p++,t instanceof THREE.DirectionalLight&&!t.shadowCascade&&p++);m=p;yb&&d&&d.useVertexTexture?l=1024:(b=j.getParameter(j.MAX_VERTEX_UNIFORM_VECTORS),b=Math.floor((b-20)/4),void 0!==d&&d instanceof THREE.SkinnedMesh&&
(b=Math.min(d.bones.length,b),b<d.bones.length&&console.warn("WebGLRenderer: too many bones - "+d.bones.length+", this GPU supports just "+b+" (try OpenGL instead of ANGLE)")),l=b);a:{var r=a.fragmentShader,q=a.vertexShader,p=a.uniforms,b=a.attributes,t=a.defines,c={map:!!a.map,envMap:!!a.envMap,lightMap:!!a.lightMap,bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,specularMap:!!a.specularMap,vertexColors:a.vertexColors,fog:c,useFog:a.fog,fogExp:c instanceof THREE.FogExp2,sizeAttenuation:a.sizeAttenuation,
skinning:a.skinning,maxBones:l,useVertexTexture:yb&&d&&d.useVertexTexture,morphTargets:a.morphTargets,morphNormals:a.morphNormals,maxMorphTargets:this.maxMorphTargets,maxMorphNormals:this.maxMorphNormals,maxDirLights:e,maxPointLights:f,maxSpotLights:g,maxHemiLights:h,maxShadows:m,shadowMapEnabled:this.shadowMapEnabled&&d.receiveShadow,shadowMapType:this.shadowMapType,shadowMapDebug:this.shadowMapDebug,shadowMapCascade:this.shadowMapCascade,alphaTest:a.alphaTest,metal:a.metal,perPixel:a.perPixel,wrapAround:a.wrapAround,
doubleSided:a.side===THREE.DoubleSide,flipSided:a.side===THREE.BackSide},d=a.index0AttributeName,s,u,v;e=[];n?e.push(n):(e.push(r),e.push(q));for(u in t)e.push(u),e.push(t[u]);for(s in c)e.push(s),e.push(c[s]);n=e.join();s=0;for(u=da.length;s<u;s++)if(e=da[s],e.code===n){e.usedTimes++;k=e.program;break a}s="SHADOWMAP_TYPE_BASIC";c.shadowMapType===THREE.PCFShadowMap?s="SHADOWMAP_TYPE_PCF":c.shadowMapType===THREE.PCFSoftShadowMap&&(s="SHADOWMAP_TYPE_PCF_SOFT");u=[];for(v in t)e=t[v],!1!==e&&(e="#define "+
v+" "+e,u.push(e));e=u.join("\n");v=j.createProgram();u=["precision "+M+" float;","precision "+M+" int;",e,Bb?"#define VERTEX_TEXTURES":"",L.gammaInput?"#define GAMMA_INPUT":"",L.gammaOutput?"#define GAMMA_OUTPUT":"",L.physicallyBasedShading?"#define PHYSICALLY_BASED_SHADING":"","#define MAX_DIR_LIGHTS "+c.maxDirLights,"#define MAX_POINT_LIGHTS "+c.maxPointLights,"#define MAX_SPOT_LIGHTS "+c.maxSpotLights,"#define MAX_HEMI_LIGHTS "+c.maxHemiLights,"#define MAX_SHADOWS "+c.maxShadows,"#define MAX_BONES "+
c.maxBones,c.map?"#define USE_MAP":"",c.envMap?"#define USE_ENVMAP":"",c.lightMap?"#define USE_LIGHTMAP":"",c.bumpMap?"#define USE_BUMPMAP":"",c.normalMap?"#define USE_NORMALMAP":"",c.specularMap?"#define USE_SPECULARMAP":"",c.vertexColors?"#define USE_COLOR":"",c.skinning?"#define USE_SKINNING":"",c.useVertexTexture?"#define BONE_TEXTURE":"",c.morphTargets?"#define USE_MORPHTARGETS":"",c.morphNormals?"#define USE_MORPHNORMALS":"",c.perPixel?"#define PHONG_PER_PIXEL":"",c.wrapAround?"#define WRAP_AROUND":
"",c.doubleSided?"#define DOUBLE_SIDED":"",c.flipSided?"#define FLIP_SIDED":"",c.shadowMapEnabled?"#define USE_SHADOWMAP":"",c.shadowMapEnabled?"#define "+s:"",c.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",c.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",c.sizeAttenuation?"#define USE_SIZEATTENUATION":"","uniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\n#ifdef USE_COLOR\nattribute vec3 color;\n#endif\n#ifdef USE_MORPHTARGETS\nattribute vec3 morphTarget0;\nattribute vec3 morphTarget1;\nattribute vec3 morphTarget2;\nattribute vec3 morphTarget3;\n#ifdef USE_MORPHNORMALS\nattribute vec3 morphNormal0;\nattribute vec3 morphNormal1;\nattribute vec3 morphNormal2;\nattribute vec3 morphNormal3;\n#else\nattribute vec3 morphTarget4;\nattribute vec3 morphTarget5;\nattribute vec3 morphTarget6;\nattribute vec3 morphTarget7;\n#endif\n#endif\n#ifdef USE_SKINNING\nattribute vec4 skinIndex;\nattribute vec4 skinWeight;\n#endif\n"].join("\n");
s=["precision "+M+" float;","precision "+M+" int;",c.bumpMap||c.normalMap?"#extension GL_OES_standard_derivatives : enable":"",e,"#define MAX_DIR_LIGHTS "+c.maxDirLights,"#define MAX_POINT_LIGHTS "+c.maxPointLights,"#define MAX_SPOT_LIGHTS "+c.maxSpotLights,"#define MAX_HEMI_LIGHTS "+c.maxHemiLights,"#define MAX_SHADOWS "+c.maxShadows,c.alphaTest?"#define ALPHATEST "+c.alphaTest:"",L.gammaInput?"#define GAMMA_INPUT":"",L.gammaOutput?"#define GAMMA_OUTPUT":"",L.physicallyBasedShading?"#define PHYSICALLY_BASED_SHADING":
"",c.useFog&&c.fog?"#define USE_FOG":"",c.useFog&&c.fogExp?"#define FOG_EXP2":"",c.map?"#define USE_MAP":"",c.envMap?"#define USE_ENVMAP":"",c.lightMap?"#define USE_LIGHTMAP":"",c.bumpMap?"#define USE_BUMPMAP":"",c.normalMap?"#define USE_NORMALMAP":"",c.specularMap?"#define USE_SPECULARMAP":"",c.vertexColors?"#define USE_COLOR":"",c.metal?"#define METAL":"",c.perPixel?"#define PHONG_PER_PIXEL":"",c.wrapAround?"#define WRAP_AROUND":"",c.doubleSided?"#define DOUBLE_SIDED":"",c.flipSided?"#define FLIP_SIDED":
"",c.shadowMapEnabled?"#define USE_SHADOWMAP":"",c.shadowMapEnabled?"#define "+s:"",c.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",c.shadowMapCascade?"#define SHADOWMAP_CASCADE":"","uniform mat4 viewMatrix;\nuniform vec3 cameraPosition;\n"].join("\n");u=D("vertex",u+q);s=D("fragment",s+r);j.attachShader(v,u);j.attachShader(v,s);d&&j.bindAttribLocation(v,0,d);j.linkProgram(v);j.getProgramParameter(v,j.LINK_STATUS)||(console.error("Could not initialise shader\nVALIDATE_STATUS: "+j.getProgramParameter(v,
j.VALIDATE_STATUS)+", gl error ["+j.getError()+"]"),console.error("Program Info Log: "+j.getProgramInfoLog(v)));j.deleteShader(s);j.deleteShader(u);v.uniforms={};v.attributes={};var w;s="viewMatrix modelViewMatrix projectionMatrix normalMatrix modelMatrix cameraPosition morphTargetInfluences".split(" ");c.useVertexTexture?(s.push("boneTexture"),s.push("boneTextureWidth"),s.push("boneTextureHeight")):s.push("boneGlobalMatrices");for(w in p)s.push(w);w=s;s=0;for(u=w.length;s<u;s++)p=w[s],v.uniforms[p]=
j.getUniformLocation(v,p);s="position normal uv uv2 tangent color skinIndex skinWeight lineDistance".split(" ");for(w=0;w<c.maxMorphTargets;w++)s.push("morphTarget"+w);for(w=0;w<c.maxMorphNormals;w++)s.push("morphNormal"+w);for(k in b)s.push(k);k=s;w=0;for(b=k.length;w<b;w++)s=k[w],v.attributes[s]=j.getAttribLocation(v,s);v.id=za++;da.push({program:v,code:n,usedTimes:1});L.info.memory.programs=da.length;k=v}a.program=k;w=a.program.attributes;if(a.morphTargets){a.numSupportedMorphTargets=0;b="morphTarget";
for(k=0;k<this.maxMorphTargets;k++)v=b+k,0<=w[v]&&a.numSupportedMorphTargets++}if(a.morphNormals){a.numSupportedMorphNormals=0;b="morphNormal";for(k=0;k<this.maxMorphNormals;k++)v=b+k,0<=w[v]&&a.numSupportedMorphNormals++}a.uniformsList=[];for(i in a.uniforms)a.uniformsList.push([a.uniforms[i],i])};this.setFaceCulling=function(a,b){a===THREE.CullFaceNone?j.disable(j.CULL_FACE):(b===THREE.FrontFaceDirectionCW?j.frontFace(j.CW):j.frontFace(j.CCW),a===THREE.CullFaceBack?j.cullFace(j.BACK):a===THREE.CullFaceFront?
j.cullFace(j.FRONT):j.cullFace(j.FRONT_AND_BACK),j.enable(j.CULL_FACE))};this.setMaterialFaces=function(a){var b=a.side===THREE.DoubleSide,a=a.side===THREE.BackSide;Y!==b&&(b?j.disable(j.CULL_FACE):j.enable(j.CULL_FACE),Y=b);U!==a&&(a?j.frontFace(j.CW):j.frontFace(j.CCW),U=a)};this.setDepthTest=function(a){Ga!==a&&(a?j.enable(j.DEPTH_TEST):j.disable(j.DEPTH_TEST),Ga=a)};this.setDepthWrite=function(a){ka!==a&&(j.depthMask(a),ka=a)};this.setBlending=function(a,b,c,d){a!==ja&&(a===THREE.NoBlending?j.disable(j.BLEND):
a===THREE.AdditiveBlending?(j.enable(j.BLEND),j.blendEquation(j.FUNC_ADD),j.blendFunc(j.SRC_ALPHA,j.ONE)):a===THREE.SubtractiveBlending?(j.enable(j.BLEND),j.blendEquation(j.FUNC_ADD),j.blendFunc(j.ZERO,j.ONE_MINUS_SRC_COLOR)):a===THREE.MultiplyBlending?(j.enable(j.BLEND),j.blendEquation(j.FUNC_ADD),j.blendFunc(j.ZERO,j.SRC_COLOR)):a===THREE.CustomBlending?j.enable(j.BLEND):(j.enable(j.BLEND),j.blendEquationSeparate(j.FUNC_ADD,j.FUNC_ADD),j.blendFuncSeparate(j.SRC_ALPHA,j.ONE_MINUS_SRC_ALPHA,j.ONE,
j.ONE_MINUS_SRC_ALPHA)),ja=a);if(a===THREE.CustomBlending){if(b!==sa&&(j.blendEquation(I(b)),sa=b),c!==ha||d!==Ka)j.blendFunc(I(c),I(d)),ha=c,Ka=d}else Ka=ha=sa=null};this.setTexture=function(a,b){if(a.needsUpdate){a.__webglInit||(a.__webglInit=!0,a.addEventListener("dispose",Db),a.__webglTexture=j.createTexture(),L.info.memory.textures++);j.activeTexture(j.TEXTURE0+b);j.bindTexture(j.TEXTURE_2D,a.__webglTexture);j.pixelStorei(j.UNPACK_FLIP_Y_WEBGL,a.flipY);j.pixelStorei(j.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
a.premultiplyAlpha);j.pixelStorei(j.UNPACK_ALIGNMENT,a.unpackAlignment);var c=a.image,d=0===(c.width&c.width-1)&&0===(c.height&c.height-1),e=I(a.format),f=I(a.type);F(j.TEXTURE_2D,a,d);var g=a.mipmaps;if(a instanceof THREE.DataTexture)if(0<g.length&&d){for(var h=0,i=g.length;h<i;h++)c=g[h],j.texImage2D(j.TEXTURE_2D,h,e,c.width,c.height,0,e,f,c.data);a.generateMipmaps=!1}else j.texImage2D(j.TEXTURE_2D,0,e,c.width,c.height,0,e,f,c.data);else if(a instanceof THREE.CompressedTexture){h=0;for(i=g.length;h<
i;h++)c=g[h],a.format!==THREE.RGBAFormat?j.compressedTexImage2D(j.TEXTURE_2D,h,e,c.width,c.height,0,c.data):j.texImage2D(j.TEXTURE_2D,h,e,c.width,c.height,0,e,f,c.data)}else if(0<g.length&&d){h=0;for(i=g.length;h<i;h++)c=g[h],j.texImage2D(j.TEXTURE_2D,h,e,e,f,c);a.generateMipmaps=!1}else j.texImage2D(j.TEXTURE_2D,0,e,e,f,a.image);a.generateMipmaps&&d&&j.generateMipmap(j.TEXTURE_2D);a.needsUpdate=!1;if(a.onUpdate)a.onUpdate()}else j.activeTexture(j.TEXTURE0+b),j.bindTexture(j.TEXTURE_2D,a.__webglTexture)};
this.setRenderTarget=function(a){var b=a instanceof THREE.WebGLRenderTargetCube;if(a&&!a.__webglFramebuffer){void 0===a.depthBuffer&&(a.depthBuffer=!0);void 0===a.stencilBuffer&&(a.stencilBuffer=!0);a.addEventListener("dispose",Eb);a.__webglTexture=j.createTexture();L.info.memory.textures++;var c=0===(a.width&a.width-1)&&0===(a.height&a.height-1),d=I(a.format),e=I(a.type);if(b){a.__webglFramebuffer=[];a.__webglRenderbuffer=[];j.bindTexture(j.TEXTURE_CUBE_MAP,a.__webglTexture);F(j.TEXTURE_CUBE_MAP,
a,c);for(var f=0;6>f;f++){a.__webglFramebuffer[f]=j.createFramebuffer();a.__webglRenderbuffer[f]=j.createRenderbuffer();j.texImage2D(j.TEXTURE_CUBE_MAP_POSITIVE_X+f,0,d,a.width,a.height,0,d,e,null);var g=a,h=j.TEXTURE_CUBE_MAP_POSITIVE_X+f;j.bindFramebuffer(j.FRAMEBUFFER,a.__webglFramebuffer[f]);j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,h,g.__webglTexture,0);O(a.__webglRenderbuffer[f],a)}c&&j.generateMipmap(j.TEXTURE_CUBE_MAP)}else a.__webglFramebuffer=j.createFramebuffer(),a.__webglRenderbuffer=
a.shareDepthFrom?a.shareDepthFrom.__webglRenderbuffer:j.createRenderbuffer(),j.bindTexture(j.TEXTURE_2D,a.__webglTexture),F(j.TEXTURE_2D,a,c),j.texImage2D(j.TEXTURE_2D,0,d,a.width,a.height,0,d,e,null),d=j.TEXTURE_2D,j.bindFramebuffer(j.FRAMEBUFFER,a.__webglFramebuffer),j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,d,a.__webglTexture,0),a.shareDepthFrom?a.depthBuffer&&!a.stencilBuffer?j.framebufferRenderbuffer(j.FRAMEBUFFER,j.DEPTH_ATTACHMENT,j.RENDERBUFFER,a.__webglRenderbuffer):a.depthBuffer&&
a.stencilBuffer&&j.framebufferRenderbuffer(j.FRAMEBUFFER,j.DEPTH_STENCIL_ATTACHMENT,j.RENDERBUFFER,a.__webglRenderbuffer):O(a.__webglRenderbuffer,a),c&&j.generateMipmap(j.TEXTURE_2D);b?j.bindTexture(j.TEXTURE_CUBE_MAP,null):j.bindTexture(j.TEXTURE_2D,null);j.bindRenderbuffer(j.RENDERBUFFER,null);j.bindFramebuffer(j.FRAMEBUFFER,null)}a?(b=b?a.__webglFramebuffer[a.activeCubeFace]:a.__webglFramebuffer,c=a.width,a=a.height,e=d=0):(b=null,c=Ma,a=fb,d=bb,e=cb);b!==ba&&(j.bindFramebuffer(j.FRAMEBUFFER,b),
j.viewport(d,e,c,a),ba=b);sb=c;pb=a};this.shadowMapPlugin=new THREE.ShadowMapPlugin;this.addPrePlugin(this.shadowMapPlugin);this.addPostPlugin(new THREE.SpritePlugin);this.addPostPlugin(new THREE.LensFlarePlugin)};THREE.WebGLRenderTarget=function(a,b,c){this.width=a;this.height=b;c=c||{};this.wrapS=void 0!==c.wrapS?c.wrapS:THREE.ClampToEdgeWrapping;this.wrapT=void 0!==c.wrapT?c.wrapT:THREE.ClampToEdgeWrapping;this.magFilter=void 0!==c.magFilter?c.magFilter:THREE.LinearFilter;this.minFilter=void 0!==c.minFilter?c.minFilter:THREE.LinearMipMapLinearFilter;this.anisotropy=void 0!==c.anisotropy?c.anisotropy:1;this.offset=new THREE.Vector2(0,0);this.repeat=new THREE.Vector2(1,1);this.format=void 0!==c.format?c.format:
THREE.RGBAFormat;this.type=void 0!==c.type?c.type:THREE.UnsignedByteType;this.depthBuffer=void 0!==c.depthBuffer?c.depthBuffer:!0;this.stencilBuffer=void 0!==c.stencilBuffer?c.stencilBuffer:!0;this.generateMipmaps=!0;this.shareDepthFrom=null};
THREE.WebGLRenderTarget.prototype={constructor:THREE.WebGLRenderTarget,clone:function(){var a=new THREE.WebGLRenderTarget(this.width,this.height);a.wrapS=this.wrapS;a.wrapT=this.wrapT;a.magFilter=this.magFilter;a.minFilter=this.minFilter;a.anisotropy=this.anisotropy;a.offset.copy(this.offset);a.repeat.copy(this.repeat);a.format=this.format;a.type=this.type;a.depthBuffer=this.depthBuffer;a.stencilBuffer=this.stencilBuffer;a.generateMipmaps=this.generateMipmaps;a.shareDepthFrom=this.shareDepthFrom;
return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.WebGLRenderTarget.prototype);THREE.WebGLRenderTargetCube=function(a,b,c){THREE.WebGLRenderTarget.call(this,a,b,c);this.activeCubeFace=0};THREE.WebGLRenderTargetCube.prototype=Object.create(THREE.WebGLRenderTarget.prototype);THREE.RenderableVertex=function(){this.positionWorld=new THREE.Vector3;this.positionScreen=new THREE.Vector4;this.visible=!0};THREE.RenderableVertex.prototype.copy=function(a){this.positionWorld.copy(a.positionWorld);this.positionScreen.copy(a.positionScreen)};THREE.RenderableFace3=function(){this.id=0;this.v1=new THREE.RenderableVertex;this.v2=new THREE.RenderableVertex;this.v3=new THREE.RenderableVertex;this.centroidModel=new THREE.Vector3;this.normalModel=new THREE.Vector3;this.normalModelView=new THREE.Vector3;this.vertexNormalsLength=0;this.vertexNormalsModel=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];this.vertexNormalsModelView=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];this.material=this.color=null;this.uvs=[[]];this.z=
0};THREE.RenderableObject=function(){this.id=0;this.object=null;this.z=0};THREE.RenderableSprite=function(){this.id=0;this.object=null;this.rotation=this.z=this.y=this.x=0;this.scale=new THREE.Vector2;this.material=null};THREE.RenderableLine=function(){this.id=0;this.v1=new THREE.RenderableVertex;this.v2=new THREE.RenderableVertex;this.vertexColors=[new THREE.Color,new THREE.Color];this.material=null;this.z=0};THREE.GeometryUtils={merge:function(a,b,c){var d,e,f=a.vertices.length,h=b instanceof THREE.Mesh?b.geometry:b,g=a.vertices,i=h.vertices,k=a.faces,m=h.faces,a=a.faceVertexUvs[0],h=h.faceVertexUvs[0];void 0===c&&(c=0);b instanceof THREE.Mesh&&(b.matrixAutoUpdate&&b.updateMatrix(),d=b.matrix,e=(new THREE.Matrix3).getNormalMatrix(d));for(var b=0,l=i.length;b<l;b++){var p=i[b].clone();d&&p.applyMatrix4(d);g.push(p)}b=0;for(l=m.length;b<l;b++){var p=m[b],t,s,q=p.vertexNormals,n=p.vertexColors;t=new THREE.Face3(p.a+
f,p.b+f,p.c+f);t.normal.copy(p.normal);e&&t.normal.applyMatrix3(e).normalize();g=0;for(i=q.length;g<i;g++)s=q[g].clone(),e&&s.applyMatrix3(e).normalize(),t.vertexNormals.push(s);t.color.copy(p.color);g=0;for(i=n.length;g<i;g++)s=n[g],t.vertexColors.push(s.clone());t.materialIndex=p.materialIndex+c;t.centroid.copy(p.centroid);d&&t.centroid.applyMatrix4(d);k.push(t)}b=0;for(l=h.length;b<l;b++){c=h[b];d=[];g=0;for(i=c.length;g<i;g++)d.push(new THREE.Vector2(c[g].x,c[g].y));a.push(d)}},randomPointInTriangle:function(){var a=
new THREE.Vector3;return function(b,c,d){var e=new THREE.Vector3,f=THREE.Math.random16(),h=THREE.Math.random16();1<f+h&&(f=1-f,h=1-h);var g=1-f-h;e.copy(b);e.multiplyScalar(f);a.copy(c);a.multiplyScalar(h);e.add(a);a.copy(d);a.multiplyScalar(g);e.add(a);return e}}(),randomPointInFace:function(a,b){return THREE.GeometryUtils.randomPointInTriangle(b.vertices[a.a],b.vertices[a.b],b.vertices[a.c])},randomPointsInGeometry:function(a,b){function c(a){function b(c,d){if(d<c)return c;var e=c+Math.floor((d-
c)/2);return k[e]>a?b(c,e-1):k[e]<a?b(e+1,d):e}return b(0,k.length-1)}var d,e,f=a.faces,h=a.vertices,g=f.length,i=0,k=[],m,l,p;for(e=0;e<g;e++)d=f[e],m=h[d.a],l=h[d.b],p=h[d.c],d._area=THREE.GeometryUtils.triangleArea(m,l,p),i+=d._area,k[e]=i;d=[];for(e=0;e<b;e++)h=THREE.Math.random16()*i,h=c(h),d[e]=THREE.GeometryUtils.randomPointInFace(f[h],a,!0);return d},triangleArea:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,d,e){a.subVectors(d,c);b.subVectors(e,c);a.cross(b);return 0.5*
a.length()}}(),center:function(a){a.computeBoundingBox();var b=a.boundingBox,c=new THREE.Vector3;c.addVectors(b.min,b.max);c.multiplyScalar(-0.5);a.applyMatrix((new THREE.Matrix4).makeTranslation(c.x,c.y,c.z));a.computeBoundingBox();return c},triangulateQuads:function(a){var b,c,d,e,f=[],h=[];b=0;for(c=a.faceVertexUvs.length;b<c;b++)h[b]=[];b=0;for(c=a.faces.length;b<c;b++){f.push(a.faces[b]);d=0;for(e=a.faceVertexUvs.length;d<e;d++)h[d].push(a.faceVertexUvs[d][b])}a.faces=f;a.faceVertexUvs=h;a.computeCentroids();
a.computeFaceNormals();a.computeVertexNormals();a.hasTangents&&a.computeTangents()}};THREE.ImageUtils={crossOrigin:"anonymous",loadTexture:function(a,b,c){var d=new THREE.ImageLoader;d.crossOrigin=this.crossOrigin;var e=new THREE.Texture(void 0,b),b=d.load(a,function(){e.needsUpdate=!0;c&&c(e)});e.image=b;e.sourceFile=a;return e},loadCompressedTexture:function(a,b,c,d){var e=new THREE.CompressedTexture;e.mapping=b;var f=new XMLHttpRequest;f.onload=function(){var a=THREE.ImageUtils.parseDDS(f.response,!0);e.format=a.format;e.mipmaps=a.mipmaps;e.image.width=a.width;e.image.height=a.height;
e.generateMipmaps=!1;e.needsUpdate=!0;c&&c(e)};f.onerror=d;f.open("GET",a,!0);f.responseType="arraybuffer";f.send(null);return e},loadTextureCube:function(a,b,c,d){var e=[];e.loadCount=0;var f=new THREE.Texture;f.image=e;void 0!==b&&(f.mapping=b);f.flipY=!1;for(var b=0,h=a.length;b<h;++b){var g=new Image;e[b]=g;g.onload=function(){e.loadCount+=1;6===e.loadCount&&(f.needsUpdate=!0,c&&c(f))};g.onerror=d;g.crossOrigin=this.crossOrigin;g.src=a[b]}return f},loadCompressedTextureCube:function(a,b,c,d){var e=
[];e.loadCount=0;var f=new THREE.CompressedTexture;f.image=e;void 0!==b&&(f.mapping=b);f.flipY=!1;f.generateMipmaps=!1;b=function(a,b){return function(){var d=THREE.ImageUtils.parseDDS(a.response,!0);b.format=d.format;b.mipmaps=d.mipmaps;b.width=d.width;b.height=d.height;e.loadCount+=1;6===e.loadCount&&(f.format=d.format,f.needsUpdate=!0,c&&c(f))}};if(a instanceof Array)for(var h=0,g=a.length;h<g;++h){var i={};e[h]=i;var k=new XMLHttpRequest;k.onload=b(k,i);k.onerror=d;i=a[h];k.open("GET",i,!0);k.responseType=
"arraybuffer";k.send(null)}else k=new XMLHttpRequest,k.onload=function(){var a=THREE.ImageUtils.parseDDS(k.response,!0);if(a.isCubemap){for(var b=a.mipmaps.length/a.mipmapCount,d=0;d<b;d++){e[d]={mipmaps:[]};for(var g=0;g<a.mipmapCount;g++)e[d].mipmaps.push(a.mipmaps[d*a.mipmapCount+g]),e[d].format=a.format,e[d].width=a.width,e[d].height=a.height}f.format=a.format;f.needsUpdate=!0;c&&c(f)}},k.onerror=d,k.open("GET",a,!0),k.responseType="arraybuffer",k.send(null);return f},loadDDSTexture:function(a,
b,c,d){var e=[];e.loadCount=0;var f=new THREE.CompressedTexture;f.image=e;void 0!==b&&(f.mapping=b);f.flipY=!1;f.generateMipmaps=!1;var h=new XMLHttpRequest;h.onload=function(){var a=THREE.ImageUtils.parseDDS(h.response,!0);if(a.isCubemap)for(var b=a.mipmaps.length/a.mipmapCount,d=0;d<b;d++){e[d]={mipmaps:[]};for(var m=0;m<a.mipmapCount;m++)e[d].mipmaps.push(a.mipmaps[d*a.mipmapCount+m]),e[d].format=a.format,e[d].width=a.width,e[d].height=a.height}else f.image.width=a.width,f.image.height=a.height,
f.mipmaps=a.mipmaps;f.format=a.format;f.needsUpdate=!0;c&&c(f)};h.onerror=d;h.open("GET",a,!0);h.responseType="arraybuffer";h.send(null);return f},parseDDS:function(a,b){function c(a){return a.charCodeAt(0)+(a.charCodeAt(1)<<8)+(a.charCodeAt(2)<<16)+(a.charCodeAt(3)<<24)}var d={mipmaps:[],width:0,height:0,format:null,mipmapCount:1},e=c("DXT1"),f=c("DXT3"),h=c("DXT5"),g=new Int32Array(a,0,31);if(542327876!==g[0])return console.error("ImageUtils.parseDDS(): Invalid magic number in DDS header"),d;if(!g[20]&
4)return console.error("ImageUtils.parseDDS(): Unsupported format, must contain a FourCC code"),d;var i=g[21],k=!1;switch(i){case e:e=8;d.format=THREE.RGB_S3TC_DXT1_Format;break;case f:e=16;d.format=THREE.RGBA_S3TC_DXT3_Format;break;case h:e=16;d.format=THREE.RGBA_S3TC_DXT5_Format;break;default:if(32==g[22]&&g[23]&16711680&&g[24]&65280&&g[25]&255&&g[26]&4278190080)k=!0,e=64,d.format=THREE.RGBAFormat;else return console.error("ImageUtils.parseDDS(): Unsupported FourCC code: ",String.fromCharCode(i&
255,i>>8&255,i>>16&255,i>>24&255)),d}d.mipmapCount=1;g[2]&131072&&!1!==b&&(d.mipmapCount=Math.max(1,g[7]));d.isCubemap=g[28]&512?!0:!1;d.width=g[4];d.height=g[3];for(var g=g[1]+4,f=d.width,h=d.height,i=d.isCubemap?6:1,m=0;m<i;m++){for(var l=0;l<d.mipmapCount;l++){if(k){var p;p=f;for(var t=h,s=4*p*t,q=new Uint8Array(a,g,s),s=new Uint8Array(s),n=0,u=0,r=0;r<t;r++)for(var v=0;v<p;v++){var z=q[u];u++;var G=q[u];u++;var w=q[u];u++;var y=q[u];u++;s[n]=w;n++;s[n]=G;n++;s[n]=z;n++;s[n]=y;n++}p=s;t=p.length}else t=
Math.max(4,f)/4*Math.max(4,h)/4*e,p=new Uint8Array(a,g,t);d.mipmaps.push({data:p,width:f,height:h});g+=t;f=Math.max(0.5*f,1);h=Math.max(0.5*h,1)}f=d.width;h=d.height}return d},getNormalMap:function(a,b){var c=function(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);return[a[0]/b,a[1]/b,a[2]/b]},b=b|1,d=a.width,e=a.height,f=document.createElement("canvas");f.width=d;f.height=e;var h=f.getContext("2d");h.drawImage(a,0,0);for(var g=h.getImageData(0,0,d,e).data,i=h.createImageData(d,e),k=i.data,m=0;m<
d;m++)for(var l=0;l<e;l++){var p=0>l-1?0:l-1,t=l+1>e-1?e-1:l+1,s=0>m-1?0:m-1,q=m+1>d-1?d-1:m+1,n=[],u=[0,0,g[4*(l*d+m)]/255*b];n.push([-1,0,g[4*(l*d+s)]/255*b]);n.push([-1,-1,g[4*(p*d+s)]/255*b]);n.push([0,-1,g[4*(p*d+m)]/255*b]);n.push([1,-1,g[4*(p*d+q)]/255*b]);n.push([1,0,g[4*(l*d+q)]/255*b]);n.push([1,1,g[4*(t*d+q)]/255*b]);n.push([0,1,g[4*(t*d+m)]/255*b]);n.push([-1,1,g[4*(t*d+s)]/255*b]);p=[];s=n.length;for(t=0;t<s;t++){var q=n[t],r=n[(t+1)%s],q=[q[0]-u[0],q[1]-u[1],q[2]-u[2]],r=[r[0]-u[0],
r[1]-u[1],r[2]-u[2]];p.push(c([q[1]*r[2]-q[2]*r[1],q[2]*r[0]-q[0]*r[2],q[0]*r[1]-q[1]*r[0]]))}n=[0,0,0];for(t=0;t<p.length;t++)n[0]+=p[t][0],n[1]+=p[t][1],n[2]+=p[t][2];n[0]/=p.length;n[1]/=p.length;n[2]/=p.length;u=4*(l*d+m);k[u]=255*((n[0]+1)/2)|0;k[u+1]=255*((n[1]+1)/2)|0;k[u+2]=255*n[2]|0;k[u+3]=255}h.putImageData(i,0,0);return f},generateDataTexture:function(a,b,c){for(var d=a*b,e=new Uint8Array(3*d),f=Math.floor(255*c.r),h=Math.floor(255*c.g),c=Math.floor(255*c.b),g=0;g<d;g++)e[3*g]=f,e[3*g+
1]=h,e[3*g+2]=c;a=new THREE.DataTexture(e,a,b,THREE.RGBFormat);a.needsUpdate=!0;return a}};THREE.SceneUtils={createMultiMaterialObject:function(a,b){for(var c=new THREE.Object3D,d=0,e=b.length;d<e;d++)c.add(new THREE.Mesh(a,b[d]));return c},detach:function(a,b,c){a.applyMatrix(b.matrixWorld);b.remove(a);c.add(a)},attach:function(a,b,c){var d=new THREE.Matrix4;d.getInverse(c.matrixWorld);a.applyMatrix(d);b.remove(a);c.add(a)}};THREE.FontUtils={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){return this.faces[this.face][this.weight][this.style]},loadFace:function(a){var b=a.familyName.toLowerCase();this.faces[b]=this.faces[b]||{};this.faces[b][a.cssFontWeight]=this.faces[b][a.cssFontWeight]||{};this.faces[b][a.cssFontWeight][a.cssFontStyle]=a;return this.faces[b][a.cssFontWeight][a.cssFontStyle]=a},drawText:function(a){for(var b=this.getFace(),c=this.size/b.resolution,d=
0,e=String(a).split(""),f=e.length,h=[],a=0;a<f;a++){var g=new THREE.Path,g=this.extractGlyphPoints(e[a],b,c,d,g),d=d+g.offset;h.push(g.path)}return{paths:h,offset:d/2}},extractGlyphPoints:function(a,b,c,d,e){var f=[],h,g,i,k,m,l,p,t,s,q,n,u=b.glyphs[a]||b.glyphs["?"];if(u){if(u.o){b=u._cachedOutline||(u._cachedOutline=u.o.split(" "));k=b.length;for(a=0;a<k;)switch(i=b[a++],i){case "m":i=b[a++]*c+d;m=b[a++]*c;e.moveTo(i,m);break;case "l":i=b[a++]*c+d;m=b[a++]*c;e.lineTo(i,m);break;case "q":i=b[a++]*
c+d;m=b[a++]*c;t=b[a++]*c+d;s=b[a++]*c;e.quadraticCurveTo(t,s,i,m);if(h=f[f.length-1]){l=h.x;p=h.y;h=1;for(g=this.divisions;h<=g;h++){var r=h/g;THREE.Shape.Utils.b2(r,l,t,i);THREE.Shape.Utils.b2(r,p,s,m)}}break;case "b":if(i=b[a++]*c+d,m=b[a++]*c,t=b[a++]*c+d,s=b[a++]*-c,q=b[a++]*c+d,n=b[a++]*-c,e.bezierCurveTo(i,m,t,s,q,n),h=f[f.length-1]){l=h.x;p=h.y;h=1;for(g=this.divisions;h<=g;h++)r=h/g,THREE.Shape.Utils.b3(r,l,t,q,i),THREE.Shape.Utils.b3(r,p,s,n,m)}}}return{offset:u.ha*c,path:e}}}};
THREE.FontUtils.generateShapes=function(a,b){var b=b||{},c=void 0!==b.curveSegments?b.curveSegments:4,d=void 0!==b.font?b.font:"helvetiker",e=void 0!==b.weight?b.weight:"normal",f=void 0!==b.style?b.style:"normal";THREE.FontUtils.size=void 0!==b.size?b.size:100;THREE.FontUtils.divisions=c;THREE.FontUtils.face=d;THREE.FontUtils.weight=e;THREE.FontUtils.style=f;c=THREE.FontUtils.drawText(a).paths;d=[];e=0;for(f=c.length;e<f;e++)Array.prototype.push.apply(d,c[e].toShapes());return d};
(function(a){var b=function(a){for(var b=a.length,e=0,f=b-1,h=0;h<b;f=h++)e+=a[f].x*a[h].y-a[h].x*a[f].y;return 0.5*e};a.Triangulate=function(a,d){var e=a.length;if(3>e)return null;var f=[],h=[],g=[],i,k,m;if(0<b(a))for(k=0;k<e;k++)h[k]=k;else for(k=0;k<e;k++)h[k]=e-1-k;var l=2*e;for(k=e-1;2<e;){if(0>=l--){console.log("Warning, unable to triangulate polygon!");break}i=k;e<=i&&(i=0);k=i+1;e<=k&&(k=0);m=k+1;e<=m&&(m=0);var p;a:{var t=p=void 0,s=void 0,q=void 0,n=void 0,u=void 0,r=void 0,v=void 0,z=
void 0,t=a[h[i]].x,s=a[h[i]].y,q=a[h[k]].x,n=a[h[k]].y,u=a[h[m]].x,r=a[h[m]].y;if(1E-10>(q-t)*(r-s)-(n-s)*(u-t))p=!1;else{var G=void 0,w=void 0,y=void 0,E=void 0,A=void 0,K=void 0,D=void 0,F=void 0,O=void 0,x=void 0,O=F=D=z=v=void 0,G=u-q,w=r-n,y=t-u,E=s-r,A=q-t,K=n-s;for(p=0;p<e;p++)if(!(p===i||p===k||p===m))if(v=a[h[p]].x,z=a[h[p]].y,D=v-t,F=z-s,O=v-q,x=z-n,v-=u,z-=r,O=G*x-w*O,D=A*F-K*D,F=y*z-E*v,-1E-10<=O&&-1E-10<=F&&-1E-10<=D){p=!1;break a}p=!0}}if(p){f.push([a[h[i]],a[h[k]],a[h[m]]]);g.push([h[i],
h[k],h[m]]);i=k;for(m=k+1;m<e;i++,m++)h[i]=h[m];e--;l=2*e}}return d?g:f};a.Triangulate.area=b;return a})(THREE.FontUtils);self._typeface_js={faces:THREE.FontUtils.faces,loadFace:THREE.FontUtils.loadFace};THREE.typeface_js=self._typeface_js;THREE.Curve=function(){};THREE.Curve.prototype.getPoint=function(){console.log("Warning, getPoint() not implemented!");return null};THREE.Curve.prototype.getPointAt=function(a){a=this.getUtoTmapping(a);return this.getPoint(a)};THREE.Curve.prototype.getPoints=function(a){a||(a=5);var b,c=[];for(b=0;b<=a;b++)c.push(this.getPoint(b/a));return c};THREE.Curve.prototype.getSpacedPoints=function(a){a||(a=5);var b,c=[];for(b=0;b<=a;b++)c.push(this.getPointAt(b/a));return c};
THREE.Curve.prototype.getLength=function(){var a=this.getLengths();return a[a.length-1]};THREE.Curve.prototype.getLengths=function(a){a||(a=this.__arcLengthDivisions?this.__arcLengthDivisions:200);if(this.cacheArcLengths&&this.cacheArcLengths.length==a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var b=[],c,d=this.getPoint(0),e,f=0;b.push(0);for(e=1;e<=a;e++)c=this.getPoint(e/a),f+=c.distanceTo(d),b.push(f),d=c;return this.cacheArcLengths=b};
THREE.Curve.prototype.updateArcLengths=function(){this.needsUpdate=!0;this.getLengths()};THREE.Curve.prototype.getUtoTmapping=function(a,b){var c=this.getLengths(),d=0,e=c.length,f;f=b?b:a*c[e-1];for(var h=0,g=e-1,i;h<=g;)if(d=Math.floor(h+(g-h)/2),i=c[d]-f,0>i)h=d+1;else if(0<i)g=d-1;else{g=d;break}d=g;if(c[d]==f)return d/(e-1);h=c[d];return c=(d+(f-h)/(c[d+1]-h))/(e-1)};THREE.Curve.prototype.getTangent=function(a){var b=a-1E-4,a=a+1E-4;0>b&&(b=0);1<a&&(a=1);b=this.getPoint(b);return this.getPoint(a).clone().sub(b).normalize()};
THREE.Curve.prototype.getTangentAt=function(a){a=this.getUtoTmapping(a);return this.getTangent(a)};
THREE.Curve.Utils={tangentQuadraticBezier:function(a,b,c,d){return 2*(1-a)*(c-b)+2*a*(d-c)},tangentCubicBezier:function(a,b,c,d,e){return-3*b*(1-a)*(1-a)+3*c*(1-a)*(1-a)-6*a*c*(1-a)+6*a*d*(1-a)-3*a*a*d+3*a*a*e},tangentSpline:function(a){return 6*a*a-6*a+(3*a*a-4*a+1)+(-6*a*a+6*a)+(3*a*a-2*a)},interpolate:function(a,b,c,d,e){var a=0.5*(c-a),d=0.5*(d-b),f=e*e;return(2*b-2*c+a+d)*e*f+(-3*b+3*c-2*a-d)*f+a*e+b}};
THREE.Curve.create=function(a,b){a.prototype=Object.create(THREE.Curve.prototype);a.prototype.getPoint=b;return a};THREE.CurvePath=function(){this.curves=[];this.bends=[];this.autoClose=!1};THREE.CurvePath.prototype=Object.create(THREE.Curve.prototype);THREE.CurvePath.prototype.add=function(a){this.curves.push(a)};THREE.CurvePath.prototype.checkConnection=function(){};THREE.CurvePath.prototype.closePath=function(){var a=this.curves[0].getPoint(0),b=this.curves[this.curves.length-1].getPoint(1);a.equals(b)||this.curves.push(new THREE.LineCurve(b,a))};
THREE.CurvePath.prototype.getPoint=function(a){for(var b=a*this.getLength(),c=this.getCurveLengths(),a=0;a<c.length;){if(c[a]>=b)return b=c[a]-b,a=this.curves[a],b=1-b/a.getLength(),a.getPointAt(b);a++}return null};THREE.CurvePath.prototype.getLength=function(){var a=this.getCurveLengths();return a[a.length-1]};
THREE.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var a=[],b=0,c,d=this.curves.length;for(c=0;c<d;c++)b+=this.curves[c].getLength(),a.push(b);return this.cacheLengths=a};
THREE.CurvePath.prototype.getBoundingBox=function(){var a=this.getPoints(),b,c,d,e,f,h;b=c=Number.NEGATIVE_INFINITY;e=f=Number.POSITIVE_INFINITY;var g,i,k,m,l=a[0]instanceof THREE.Vector3;m=l?new THREE.Vector3:new THREE.Vector2;i=0;for(k=a.length;i<k;i++)g=a[i],g.x>b?b=g.x:g.x<e&&(e=g.x),g.y>c?c=g.y:g.y<f&&(f=g.y),l&&(g.z>d?d=g.z:g.z<h&&(h=g.z)),m.add(g);a={minX:e,minY:f,maxX:b,maxY:c,centroid:m.divideScalar(k)};l&&(a.maxZ=d,a.minZ=h);return a};
THREE.CurvePath.prototype.createPointsGeometry=function(a){a=this.getPoints(a,!0);return this.createGeometry(a)};THREE.CurvePath.prototype.createSpacedPointsGeometry=function(a){a=this.getSpacedPoints(a,!0);return this.createGeometry(a)};THREE.CurvePath.prototype.createGeometry=function(a){for(var b=new THREE.Geometry,c=0;c<a.length;c++)b.vertices.push(new THREE.Vector3(a[c].x,a[c].y,a[c].z||0));return b};THREE.CurvePath.prototype.addWrapPath=function(a){this.bends.push(a)};
THREE.CurvePath.prototype.getTransformedPoints=function(a,b){var c=this.getPoints(a),d,e;b||(b=this.bends);d=0;for(e=b.length;d<e;d++)c=this.getWrapPoints(c,b[d]);return c};THREE.CurvePath.prototype.getTransformedSpacedPoints=function(a,b){var c=this.getSpacedPoints(a),d,e;b||(b=this.bends);d=0;for(e=b.length;d<e;d++)c=this.getWrapPoints(c,b[d]);return c};
THREE.CurvePath.prototype.getWrapPoints=function(a,b){var c=this.getBoundingBox(),d,e,f,h,g,i;d=0;for(e=a.length;d<e;d++)f=a[d],h=f.x,g=f.y,i=h/c.maxX,i=b.getUtoTmapping(i,h),h=b.getPoint(i),i=b.getTangent(i),i.set(-i.y,i.x).multiplyScalar(g),f.x=h.x+i.x,f.y=h.y+i.y;return a};THREE.Gyroscope=function(){THREE.Object3D.call(this)};THREE.Gyroscope.prototype=Object.create(THREE.Object3D.prototype);
THREE.Gyroscope.prototype.updateMatrixWorld=function(a){this.matrixAutoUpdate&&this.updateMatrix();if(this.matrixWorldNeedsUpdate||a)this.parent?(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorld.decompose(this.translationWorld,this.quaternionWorld,this.scaleWorld),this.matrix.decompose(this.translationObject,this.quaternionObject,this.scaleObject),this.matrixWorld.compose(this.translationWorld,this.quaternionObject,this.scaleWorld)):this.matrixWorld.copy(this.matrix),
this.matrixWorldNeedsUpdate=!1,a=!0;for(var b=0,c=this.children.length;b<c;b++)this.children[b].updateMatrixWorld(a)};THREE.Gyroscope.prototype.translationWorld=new THREE.Vector3;THREE.Gyroscope.prototype.translationObject=new THREE.Vector3;THREE.Gyroscope.prototype.quaternionWorld=new THREE.Quaternion;THREE.Gyroscope.prototype.quaternionObject=new THREE.Quaternion;THREE.Gyroscope.prototype.scaleWorld=new THREE.Vector3;THREE.Gyroscope.prototype.scaleObject=new THREE.Vector3;THREE.Path=function(a){THREE.CurvePath.call(this);this.actions=[];a&&this.fromPoints(a)};THREE.Path.prototype=Object.create(THREE.CurvePath.prototype);THREE.PathActions={MOVE_TO:"moveTo",LINE_TO:"lineTo",QUADRATIC_CURVE_TO:"quadraticCurveTo",BEZIER_CURVE_TO:"bezierCurveTo",CSPLINE_THRU:"splineThru",ARC:"arc",ELLIPSE:"ellipse"};THREE.Path.prototype.fromPoints=function(a){this.moveTo(a[0].x,a[0].y);for(var b=1,c=a.length;b<c;b++)this.lineTo(a[b].x,a[b].y)};
THREE.Path.prototype.moveTo=function(a,b){var c=Array.prototype.slice.call(arguments);this.actions.push({action:THREE.PathActions.MOVE_TO,args:c})};THREE.Path.prototype.lineTo=function(a,b){var c=Array.prototype.slice.call(arguments),d=this.actions[this.actions.length-1].args,d=new THREE.LineCurve(new THREE.Vector2(d[d.length-2],d[d.length-1]),new THREE.Vector2(a,b));this.curves.push(d);this.actions.push({action:THREE.PathActions.LINE_TO,args:c})};
THREE.Path.prototype.quadraticCurveTo=function(a,b,c,d){var e=Array.prototype.slice.call(arguments),f=this.actions[this.actions.length-1].args,f=new THREE.QuadraticBezierCurve(new THREE.Vector2(f[f.length-2],f[f.length-1]),new THREE.Vector2(a,b),new THREE.Vector2(c,d));this.curves.push(f);this.actions.push({action:THREE.PathActions.QUADRATIC_CURVE_TO,args:e})};
THREE.Path.prototype.bezierCurveTo=function(a,b,c,d,e,f){var h=Array.prototype.slice.call(arguments),g=this.actions[this.actions.length-1].args,g=new THREE.CubicBezierCurve(new THREE.Vector2(g[g.length-2],g[g.length-1]),new THREE.Vector2(a,b),new THREE.Vector2(c,d),new THREE.Vector2(e,f));this.curves.push(g);this.actions.push({action:THREE.PathActions.BEZIER_CURVE_TO,args:h})};
THREE.Path.prototype.splineThru=function(a){var b=Array.prototype.slice.call(arguments),c=this.actions[this.actions.length-1].args,c=[new THREE.Vector2(c[c.length-2],c[c.length-1])];Array.prototype.push.apply(c,a);c=new THREE.SplineCurve(c);this.curves.push(c);this.actions.push({action:THREE.PathActions.CSPLINE_THRU,args:b})};THREE.Path.prototype.arc=function(a,b,c,d,e,f){var h=this.actions[this.actions.length-1].args;this.absarc(a+h[h.length-2],b+h[h.length-1],c,d,e,f)};
THREE.Path.prototype.absarc=function(a,b,c,d,e,f){this.absellipse(a,b,c,c,d,e,f)};THREE.Path.prototype.ellipse=function(a,b,c,d,e,f,h){var g=this.actions[this.actions.length-1].args;this.absellipse(a+g[g.length-2],b+g[g.length-1],c,d,e,f,h)};THREE.Path.prototype.absellipse=function(a,b,c,d,e,f,h){var g=Array.prototype.slice.call(arguments),i=new THREE.EllipseCurve(a,b,c,d,e,f,h);this.curves.push(i);i=i.getPoint(1);g.push(i.x);g.push(i.y);this.actions.push({action:THREE.PathActions.ELLIPSE,args:g})};
THREE.Path.prototype.getSpacedPoints=function(a){a||(a=40);for(var b=[],c=0;c<a;c++)b.push(this.getPoint(c/a));return b};
THREE.Path.prototype.getPoints=function(a,b){if(this.useSpacedPoints)return console.log("tata"),this.getSpacedPoints(a,b);var a=a||12,c=[],d,e,f,h,g,i,k,m,l,p,t,s,q;d=0;for(e=this.actions.length;d<e;d++)switch(f=this.actions[d],h=f.action,f=f.args,h){case THREE.PathActions.MOVE_TO:c.push(new THREE.Vector2(f[0],f[1]));break;case THREE.PathActions.LINE_TO:c.push(new THREE.Vector2(f[0],f[1]));break;case THREE.PathActions.QUADRATIC_CURVE_TO:g=f[2];i=f[3];l=f[0];p=f[1];0<c.length?(h=c[c.length-1],t=h.x,
s=h.y):(h=this.actions[d-1].args,t=h[h.length-2],s=h[h.length-1]);for(f=1;f<=a;f++)q=f/a,h=THREE.Shape.Utils.b2(q,t,l,g),q=THREE.Shape.Utils.b2(q,s,p,i),c.push(new THREE.Vector2(h,q));break;case THREE.PathActions.BEZIER_CURVE_TO:g=f[4];i=f[5];l=f[0];p=f[1];k=f[2];m=f[3];0<c.length?(h=c[c.length-1],t=h.x,s=h.y):(h=this.actions[d-1].args,t=h[h.length-2],s=h[h.length-1]);for(f=1;f<=a;f++)q=f/a,h=THREE.Shape.Utils.b3(q,t,l,k,g),q=THREE.Shape.Utils.b3(q,s,p,m,i),c.push(new THREE.Vector2(h,q));break;case THREE.PathActions.CSPLINE_THRU:h=
this.actions[d-1].args;q=[new THREE.Vector2(h[h.length-2],h[h.length-1])];h=a*f[0].length;q=q.concat(f[0]);q=new THREE.SplineCurve(q);for(f=1;f<=h;f++)c.push(q.getPointAt(f/h));break;case THREE.PathActions.ARC:g=f[0];i=f[1];p=f[2];k=f[3];h=f[4];l=!!f[5];t=h-k;s=2*a;for(f=1;f<=s;f++)q=f/s,l||(q=1-q),q=k+q*t,h=g+p*Math.cos(q),q=i+p*Math.sin(q),c.push(new THREE.Vector2(h,q));break;case THREE.PathActions.ELLIPSE:g=f[0];i=f[1];p=f[2];m=f[3];k=f[4];h=f[5];l=!!f[6];t=h-k;s=2*a;for(f=1;f<=s;f++)q=f/s,l||
(q=1-q),q=k+q*t,h=g+p*Math.cos(q),q=i+m*Math.sin(q),c.push(new THREE.Vector2(h,q))}d=c[c.length-1];1E-10>Math.abs(d.x-c[0].x)&&1E-10>Math.abs(d.y-c[0].y)&&c.splice(c.length-1,1);b&&c.push(c[0]);return c};
THREE.Path.prototype.toShapes=function(a){var b,c,d,e,f=[],h=new THREE.Path;b=0;for(c=this.actions.length;b<c;b++)d=this.actions[b],e=d.args,d=d.action,d==THREE.PathActions.MOVE_TO&&0!=h.actions.length&&(f.push(h),h=new THREE.Path),h[d].apply(h,e);0!=h.actions.length&&f.push(h);if(0==f.length)return[];var g;e=[];if(1==f.length)return d=f[0],g=new THREE.Shape,g.actions=d.actions,g.curves=d.curves,e.push(g),e;b=!THREE.Shape.Utils.isClockWise(f[0].getPoints());if(a?!b:b){g=new THREE.Shape;b=0;for(c=
f.length;b<c;b++)d=f[b],h=THREE.Shape.Utils.isClockWise(d.getPoints()),(h=a?!h:h)?(g.actions=d.actions,g.curves=d.curves,e.push(g),g=new THREE.Shape):g.holes.push(d)}else{g=void 0;b=0;for(c=f.length;b<c;b++)d=f[b],h=THREE.Shape.Utils.isClockWise(d.getPoints()),(h=a?!h:h)?(g&&e.push(g),g=new THREE.Shape,g.actions=d.actions,g.curves=d.curves):g.holes.push(d);e.push(g)}return e};THREE.Shape=function(){THREE.Path.apply(this,arguments);this.holes=[]};THREE.Shape.prototype=Object.create(THREE.Path.prototype);THREE.Shape.prototype.extrude=function(a){return new THREE.ExtrudeGeometry(this,a)};THREE.Shape.prototype.makeGeometry=function(a){return new THREE.ShapeGeometry(this,a)};THREE.Shape.prototype.getPointsHoles=function(a){var b,c=this.holes.length,d=[];for(b=0;b<c;b++)d[b]=this.holes[b].getTransformedPoints(a,this.bends);return d};
THREE.Shape.prototype.getSpacedPointsHoles=function(a){var b,c=this.holes.length,d=[];for(b=0;b<c;b++)d[b]=this.holes[b].getTransformedSpacedPoints(a,this.bends);return d};THREE.Shape.prototype.extractAllPoints=function(a){return{shape:this.getTransformedPoints(a),holes:this.getPointsHoles(a)}};THREE.Shape.prototype.extractPoints=function(a){return this.useSpacedPoints?this.extractAllSpacedPoints(a):this.extractAllPoints(a)};
THREE.Shape.prototype.extractAllSpacedPoints=function(a){return{shape:this.getTransformedSpacedPoints(a),holes:this.getSpacedPointsHoles(a)}};
THREE.Shape.Utils={removeHoles:function(a,b){var c=a.concat(),d=c.concat(),e,f,h,g,i,k,m,l,p,t,s=[];for(i=0;i<b.length;i++){k=b[i];Array.prototype.push.apply(d,k);f=Number.POSITIVE_INFINITY;for(e=0;e<k.length;e++){p=k[e];t=[];for(l=0;l<c.length;l++)m=c[l],m=p.distanceToSquared(m),t.push(m),m<f&&(f=m,h=e,g=l)}e=0<=g-1?g-1:c.length-1;f=0<=h-1?h-1:k.length-1;var q=[k[h],c[g],c[e]];l=THREE.FontUtils.Triangulate.area(q);var n=[k[h],k[f],c[g]];p=THREE.FontUtils.Triangulate.area(n);t=g;m=h;g+=1;h+=-1;0>
g&&(g+=c.length);g%=c.length;0>h&&(h+=k.length);h%=k.length;e=0<=g-1?g-1:c.length-1;f=0<=h-1?h-1:k.length-1;q=[k[h],c[g],c[e]];q=THREE.FontUtils.Triangulate.area(q);n=[k[h],k[f],c[g]];n=THREE.FontUtils.Triangulate.area(n);l+p>q+n&&(g=t,h=m,0>g&&(g+=c.length),g%=c.length,0>h&&(h+=k.length),h%=k.length,e=0<=g-1?g-1:c.length-1,f=0<=h-1?h-1:k.length-1);l=c.slice(0,g);p=c.slice(g);t=k.slice(h);m=k.slice(0,h);f=[k[h],k[f],c[g]];s.push([k[h],c[g],c[e]]);s.push(f);c=l.concat(t).concat(m).concat(p)}return{shape:c,
isolatedPts:s,allpoints:d}},triangulateShape:function(a,b){var c=THREE.Shape.Utils.removeHoles(a,b),d=c.allpoints,e=c.isolatedPts,c=THREE.FontUtils.Triangulate(c.shape,!1),f,h,g,i,k={};f=0;for(h=d.length;f<h;f++)i=d[f].x+":"+d[f].y,void 0!==k[i]&&console.log("Duplicate point",i),k[i]=f;f=0;for(h=c.length;f<h;f++){g=c[f];for(d=0;3>d;d++)i=g[d].x+":"+g[d].y,i=k[i],void 0!==i&&(g[d]=i)}f=0;for(h=e.length;f<h;f++){g=e[f];for(d=0;3>d;d++)i=g[d].x+":"+g[d].y,i=k[i],void 0!==i&&(g[d]=i)}return c.concat(e)},
isClockWise:function(a){return 0>THREE.FontUtils.Triangulate.area(a)},b2p0:function(a,b){var c=1-a;return c*c*b},b2p1:function(a,b){return 2*(1-a)*a*b},b2p2:function(a,b){return a*a*b},b2:function(a,b,c,d){return this.b2p0(a,b)+this.b2p1(a,c)+this.b2p2(a,d)},b3p0:function(a,b){var c=1-a;return c*c*c*b},b3p1:function(a,b){var c=1-a;return 3*c*c*a*b},b3p2:function(a,b){return 3*(1-a)*a*a*b},b3p3:function(a,b){return a*a*a*b},b3:function(a,b,c,d,e){return this.b3p0(a,b)+this.b3p1(a,c)+this.b3p2(a,d)+
this.b3p3(a,e)}};THREE.LineCurve=function(a,b){this.v1=a;this.v2=b};THREE.LineCurve.prototype=Object.create(THREE.Curve.prototype);THREE.LineCurve.prototype.getPoint=function(a){var b=this.v2.clone().sub(this.v1);b.multiplyScalar(a).add(this.v1);return b};THREE.LineCurve.prototype.getPointAt=function(a){return this.getPoint(a)};THREE.LineCurve.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()};THREE.QuadraticBezierCurve=function(a,b,c){this.v0=a;this.v1=b;this.v2=c};THREE.QuadraticBezierCurve.prototype=Object.create(THREE.Curve.prototype);THREE.QuadraticBezierCurve.prototype.getPoint=function(a){var b;b=THREE.Shape.Utils.b2(a,this.v0.x,this.v1.x,this.v2.x);a=THREE.Shape.Utils.b2(a,this.v0.y,this.v1.y,this.v2.y);return new THREE.Vector2(b,a)};
THREE.QuadraticBezierCurve.prototype.getTangent=function(a){var b;b=THREE.Curve.Utils.tangentQuadraticBezier(a,this.v0.x,this.v1.x,this.v2.x);a=THREE.Curve.Utils.tangentQuadraticBezier(a,this.v0.y,this.v1.y,this.v2.y);b=new THREE.Vector2(b,a);b.normalize();return b};THREE.CubicBezierCurve=function(a,b,c,d){this.v0=a;this.v1=b;this.v2=c;this.v3=d};THREE.CubicBezierCurve.prototype=Object.create(THREE.Curve.prototype);THREE.CubicBezierCurve.prototype.getPoint=function(a){var b;b=THREE.Shape.Utils.b3(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x);a=THREE.Shape.Utils.b3(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y);return new THREE.Vector2(b,a)};
THREE.CubicBezierCurve.prototype.getTangent=function(a){var b;b=THREE.Curve.Utils.tangentCubicBezier(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x);a=THREE.Curve.Utils.tangentCubicBezier(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y);b=new THREE.Vector2(b,a);b.normalize();return b};THREE.SplineCurve=function(a){this.points=void 0==a?[]:a};THREE.SplineCurve.prototype=Object.create(THREE.Curve.prototype);THREE.SplineCurve.prototype.getPoint=function(a){var b=new THREE.Vector2,c=[],d=this.points,e;e=(d.length-1)*a;a=Math.floor(e);e-=a;c[0]=0==a?a:a-1;c[1]=a;c[2]=a>d.length-2?d.length-1:a+1;c[3]=a>d.length-3?d.length-1:a+2;b.x=THREE.Curve.Utils.interpolate(d[c[0]].x,d[c[1]].x,d[c[2]].x,d[c[3]].x,e);b.y=THREE.Curve.Utils.interpolate(d[c[0]].y,d[c[1]].y,d[c[2]].y,d[c[3]].y,e);return b};THREE.EllipseCurve=function(a,b,c,d,e,f,h){this.aX=a;this.aY=b;this.xRadius=c;this.yRadius=d;this.aStartAngle=e;this.aEndAngle=f;this.aClockwise=h};THREE.EllipseCurve.prototype=Object.create(THREE.Curve.prototype);
THREE.EllipseCurve.prototype.getPoint=function(a){var b;b=this.aEndAngle-this.aStartAngle;0>b&&(b+=2*Math.PI);b>2*Math.PI&&(b-=2*Math.PI);b=!0===this.aClockwise?this.aEndAngle+(1-a)*(2*Math.PI-b):this.aStartAngle+a*b;a=this.aX+this.xRadius*Math.cos(b);b=this.aY+this.yRadius*Math.sin(b);return new THREE.Vector2(a,b)};THREE.ArcCurve=function(a,b,c,d,e,f){THREE.EllipseCurve.call(this,a,b,c,c,d,e,f)};THREE.ArcCurve.prototype=Object.create(THREE.EllipseCurve.prototype);THREE.LineCurve3=THREE.Curve.create(function(a,b){this.v1=a;this.v2=b},function(a){var b=new THREE.Vector3;b.subVectors(this.v2,this.v1);b.multiplyScalar(a);b.add(this.v1);return b});THREE.QuadraticBezierCurve3=THREE.Curve.create(function(a,b,c){this.v0=a;this.v1=b;this.v2=c},function(a){var b,c;b=THREE.Shape.Utils.b2(a,this.v0.x,this.v1.x,this.v2.x);c=THREE.Shape.Utils.b2(a,this.v0.y,this.v1.y,this.v2.y);a=THREE.Shape.Utils.b2(a,this.v0.z,this.v1.z,this.v2.z);return new THREE.Vector3(b,c,a)});THREE.CubicBezierCurve3=THREE.Curve.create(function(a,b,c,d){this.v0=a;this.v1=b;this.v2=c;this.v3=d},function(a){var b,c;b=THREE.Shape.Utils.b3(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x);c=THREE.Shape.Utils.b3(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y);a=THREE.Shape.Utils.b3(a,this.v0.z,this.v1.z,this.v2.z,this.v3.z);return new THREE.Vector3(b,c,a)});THREE.SplineCurve3=THREE.Curve.create(function(a){this.points=void 0==a?[]:a},function(a){var b=new THREE.Vector3,c=[],d=this.points,e,a=(d.length-1)*a;e=Math.floor(a);a-=e;c[0]=0==e?e:e-1;c[1]=e;c[2]=e>d.length-2?d.length-1:e+1;c[3]=e>d.length-3?d.length-1:e+2;e=d[c[0]];var f=d[c[1]],h=d[c[2]],c=d[c[3]];b.x=THREE.Curve.Utils.interpolate(e.x,f.x,h.x,c.x,a);b.y=THREE.Curve.Utils.interpolate(e.y,f.y,h.y,c.y,a);b.z=THREE.Curve.Utils.interpolate(e.z,f.z,h.z,c.z,a);return b});THREE.ClosedSplineCurve3=THREE.Curve.create(function(a){this.points=void 0==a?[]:a},function(a){var b=new THREE.Vector3,c=[],d=this.points,e;e=(d.length-0)*a;a=Math.floor(e);e-=a;a+=0<a?0:(Math.floor(Math.abs(a)/d.length)+1)*d.length;c[0]=(a-1)%d.length;c[1]=a%d.length;c[2]=(a+1)%d.length;c[3]=(a+2)%d.length;b.x=THREE.Curve.Utils.interpolate(d[c[0]].x,d[c[1]].x,d[c[2]].x,d[c[3]].x,e);b.y=THREE.Curve.Utils.interpolate(d[c[0]].y,d[c[1]].y,d[c[2]].y,d[c[3]].y,e);b.z=THREE.Curve.Utils.interpolate(d[c[0]].z,
d[c[1]].z,d[c[2]].z,d[c[3]].z,e);return b});THREE.AnimationHandler=function(){var a=[],b={},c={update:function(b){for(var c=0;c<a.length;c++)a[c].update(b)},addToUpdate:function(b){-1===a.indexOf(b)&&a.push(b)},removeFromUpdate:function(b){b=a.indexOf(b);-1!==b&&a.splice(b,1)},add:function(a){void 0!==b[a.name]&&console.log("THREE.AnimationHandler.add: Warning! "+a.name+" already exists in library. Overwriting.");b[a.name]=a;if(!0!==a.initialized){for(var c=0;c<a.hierarchy.length;c++){for(var d=0;d<a.hierarchy[c].keys.length;d++)if(0>a.hierarchy[c].keys[d].time&&
(a.hierarchy[c].keys[d].time=0),void 0!==a.hierarchy[c].keys[d].rot&&!(a.hierarchy[c].keys[d].rot instanceof THREE.Quaternion)){var g=a.hierarchy[c].keys[d].rot;a.hierarchy[c].keys[d].rot=new THREE.Quaternion(g[0],g[1],g[2],g[3])}if(a.hierarchy[c].keys.length&&void 0!==a.hierarchy[c].keys[0].morphTargets){g={};for(d=0;d<a.hierarchy[c].keys.length;d++)for(var i=0;i<a.hierarchy[c].keys[d].morphTargets.length;i++){var k=a.hierarchy[c].keys[d].morphTargets[i];g[k]=-1}a.hierarchy[c].usedMorphTargets=g;
for(d=0;d<a.hierarchy[c].keys.length;d++){var m={};for(k in g){for(i=0;i<a.hierarchy[c].keys[d].morphTargets.length;i++)if(a.hierarchy[c].keys[d].morphTargets[i]===k){m[k]=a.hierarchy[c].keys[d].morphTargetsInfluences[i];break}i===a.hierarchy[c].keys[d].morphTargets.length&&(m[k]=0)}a.hierarchy[c].keys[d].morphTargetsInfluences=m}}for(d=1;d<a.hierarchy[c].keys.length;d++)a.hierarchy[c].keys[d].time===a.hierarchy[c].keys[d-1].time&&(a.hierarchy[c].keys.splice(d,1),d--);for(d=0;d<a.hierarchy[c].keys.length;d++)a.hierarchy[c].keys[d].index=
d}d=parseInt(a.length*a.fps,10);a.JIT={};a.JIT.hierarchy=[];for(c=0;c<a.hierarchy.length;c++)a.JIT.hierarchy.push(Array(d));a.initialized=!0}},get:function(a){if("string"===typeof a){if(b[a])return b[a];console.log("THREE.AnimationHandler.get: Couldn't find animation "+a);return null}},parse:function(a){var b=[];if(a instanceof THREE.SkinnedMesh)for(var c=0;c<a.bones.length;c++)b.push(a.bones[c]);else d(a,b);return b}},d=function(a,b){b.push(a);for(var c=0;c<a.children.length;c++)d(a.children[c],
b)};c.LINEAR=0;c.CATMULLROM=1;c.CATMULLROM_FORWARD=2;return c}();THREE.Animation=function(a,b,c){this.root=a;this.data=THREE.AnimationHandler.get(b);this.hierarchy=THREE.AnimationHandler.parse(a);this.currentTime=0;this.timeScale=1;this.isPlaying=!1;this.loop=this.isPaused=!0;this.interpolationType=void 0!==c?c:THREE.AnimationHandler.LINEAR;this.points=[];this.target=new THREE.Vector3};
THREE.Animation.prototype.play=function(a,b){if(!1===this.isPlaying){this.isPlaying=!0;this.loop=void 0!==a?a:!0;this.currentTime=void 0!==b?b:0;var c,d=this.hierarchy.length,e;for(c=0;c<d;c++){e=this.hierarchy[c];e.matrixAutoUpdate=!0;void 0===e.animationCache&&(e.animationCache={},e.animationCache.prevKey={pos:0,rot:0,scl:0},e.animationCache.nextKey={pos:0,rot:0,scl:0},e.animationCache.originalMatrix=e instanceof THREE.Bone?e.skinMatrix:e.matrix);var f=e.animationCache.prevKey;e=e.animationCache.nextKey;
f.pos=this.data.hierarchy[c].keys[0];f.rot=this.data.hierarchy[c].keys[0];f.scl=this.data.hierarchy[c].keys[0];e.pos=this.getNextKeyWith("pos",c,1);e.rot=this.getNextKeyWith("rot",c,1);e.scl=this.getNextKeyWith("scl",c,1)}this.update(0)}this.isPaused=!1;THREE.AnimationHandler.addToUpdate(this)};THREE.Animation.prototype.pause=function(){!0===this.isPaused?THREE.AnimationHandler.addToUpdate(this):THREE.AnimationHandler.removeFromUpdate(this);this.isPaused=!this.isPaused};
THREE.Animation.prototype.stop=function(){this.isPaused=this.isPlaying=!1;THREE.AnimationHandler.removeFromUpdate(this)};
THREE.Animation.prototype.update=function(a){if(!1!==this.isPlaying){var b=["pos","rot","scl"],c,d,e,f,h,g,i,k,m;for(m=this.currentTime+=a*this.timeScale;this.currentTime>this.data.length;)this.currentTime-=this.data.length;k=this.currentTime%=this.data.length;parseInt(Math.min(k*this.data.fps,this.data.length*this.data.fps),10);for(var l=0,p=this.hierarchy.length;l<p;l++){a=this.hierarchy[l];i=a.animationCache;for(var t=0;3>t;t++){c=b[t];h=i.prevKey[c];g=i.nextKey[c];if(g.time<=m){if(k<=m)if(this.loop){h=
this.data.hierarchy[l].keys[0];for(g=this.getNextKeyWith(c,l,1);null!==g&&g.time<k&&g.index>h.index;)h=g,g=this.getNextKeyWith(c,l,g.index+1)}else{this.stop();return}else{do h=g,g=this.getNextKeyWith(c,l,g.index+1);while(null!==g&&g.time<k&&g.index>h.index)}i.prevKey[c]=h;i.nextKey[c]=g}a.matrixAutoUpdate=!0;a.matrixWorldNeedsUpdate=!0;d=(k-h.time)/(g.time-h.time);e=h[c];f=g[c];if(0>d||1<d)console.log("THREE.Animation.update: Warning! Scale out of bounds:"+d+" on bone "+l),d=0>d?0:1;if("pos"===c)if(c=
a.position,this.interpolationType===THREE.AnimationHandler.LINEAR)c.x=e[0]+(f[0]-e[0])*d,c.y=e[1]+(f[1]-e[1])*d,c.z=e[2]+(f[2]-e[2])*d;else{if(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD)this.points[0]=this.getPrevKeyWith("pos",l,h.index-1).pos,this.points[1]=e,this.points[2]=f,this.points[3]=this.getNextKeyWith("pos",l,g.index+1).pos,d=0.33*d+0.33,e=this.interpolateCatmullRom(this.points,d),c.x=e[0],c.y=e[1],c.z=e[2],
this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD&&(d=this.interpolateCatmullRom(this.points,1.01*d),this.target.set(d[0],d[1],d[2]),this.target.sub(c),this.target.y=0,this.target.normalize(),d=Math.atan2(this.target.x,this.target.z),a.rotation.set(0,d,0))}else"rot"===c?THREE.Quaternion.slerp(e,f,a.quaternion,d):"scl"===c&&(c=a.scale,c.x=e[0]+(f[0]-e[0])*d,c.y=e[1]+(f[1]-e[1])*d,c.z=e[2]+(f[2]-e[2])*d)}}}};
THREE.Animation.prototype.interpolateCatmullRom=function(a,b){var c=[],d=[],e,f,h,g,i,k;e=(a.length-1)*b;f=Math.floor(e);e-=f;c[0]=0===f?f:f-1;c[1]=f;c[2]=f>a.length-2?f:f+1;c[3]=f>a.length-3?f:f+2;f=a[c[0]];g=a[c[1]];i=a[c[2]];k=a[c[3]];c=e*e;h=e*c;d[0]=this.interpolate(f[0],g[0],i[0],k[0],e,c,h);d[1]=this.interpolate(f[1],g[1],i[1],k[1],e,c,h);d[2]=this.interpolate(f[2],g[2],i[2],k[2],e,c,h);return d};
THREE.Animation.prototype.interpolate=function(a,b,c,d,e,f,h){a=0.5*(c-a);d=0.5*(d-b);return(2*(b-c)+a+d)*h+(-3*(b-c)-2*a-d)*f+a*e+b};THREE.Animation.prototype.getNextKeyWith=function(a,b,c){for(var d=this.data.hierarchy[b].keys,c=this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?c<d.length-1?c:d.length-1:c%d.length;c<d.length;c++)if(void 0!==d[c][a])return d[c];return this.data.hierarchy[b].keys[0]};
THREE.Animation.prototype.getPrevKeyWith=function(a,b,c){for(var d=this.data.hierarchy[b].keys,c=this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?0<c?c:0:0<=c?c:c+d.length;0<=c;c--)if(void 0!==d[c][a])return d[c];return this.data.hierarchy[b].keys[d.length-1]};THREE.KeyFrameAnimation=function(a,b,c){this.root=a;this.data=THREE.AnimationHandler.get(b);this.hierarchy=THREE.AnimationHandler.parse(a);this.currentTime=0;this.timeScale=0.001;this.isPlaying=!1;this.loop=this.isPaused=!0;this.JITCompile=void 0!==c?c:!0;a=0;for(b=this.hierarchy.length;a<b;a++){var c=this.data.hierarchy[a].sids,d=this.hierarchy[a];if(this.data.hierarchy[a].keys.length&&c){for(var e=0;e<c.length;e++){var f=c[e],h=this.getNextKeyWith(f,a,0);h&&h.apply(f)}d.matrixAutoUpdate=!1;this.data.hierarchy[a].node.updateMatrix();
d.matrixWorldNeedsUpdate=!0}}};
THREE.KeyFrameAnimation.prototype.play=function(a,b){if(!this.isPlaying){this.isPlaying=!0;this.loop=void 0!==a?a:!0;this.currentTime=void 0!==b?b:0;this.startTimeMs=b;this.startTime=1E7;this.endTime=-this.startTime;var c,d=this.hierarchy.length,e,f;for(c=0;c<d;c++)e=this.hierarchy[c],f=this.data.hierarchy[c],void 0===f.animationCache&&(f.animationCache={},f.animationCache.prevKey=null,f.animationCache.nextKey=null,f.animationCache.originalMatrix=e instanceof THREE.Bone?e.skinMatrix:e.matrix),e=this.data.hierarchy[c].keys,
e.length&&(f.animationCache.prevKey=e[0],f.animationCache.nextKey=e[1],this.startTime=Math.min(e[0].time,this.startTime),this.endTime=Math.max(e[e.length-1].time,this.endTime));this.update(0)}this.isPaused=!1;THREE.AnimationHandler.addToUpdate(this)};THREE.KeyFrameAnimation.prototype.pause=function(){this.isPaused?THREE.AnimationHandler.addToUpdate(this):THREE.AnimationHandler.removeFromUpdate(this);this.isPaused=!this.isPaused};
THREE.KeyFrameAnimation.prototype.stop=function(){this.isPaused=this.isPlaying=!1;THREE.AnimationHandler.removeFromUpdate(this);for(var a=0;a<this.data.hierarchy.length;a++){var b=this.hierarchy[a],c=this.data.hierarchy[a];if(void 0!==c.animationCache){var d=c.animationCache.originalMatrix;b instanceof THREE.Bone?(d.copy(b.skinMatrix),b.skinMatrix=d):(d.copy(b.matrix),b.matrix=d);delete c.animationCache}}};
THREE.KeyFrameAnimation.prototype.update=function(a){if(this.isPlaying){var b,c,d,e,f=this.data.JIT.hierarchy,h,g,i;g=this.currentTime+=a*this.timeScale;h=this.currentTime%=this.data.length;h<this.startTimeMs&&(h=this.currentTime=this.startTimeMs+h);e=parseInt(Math.min(h*this.data.fps,this.data.length*this.data.fps),10);if((i=h<g)&&!this.loop){for(var a=0,k=this.hierarchy.length;a<k;a++){var m=this.data.hierarchy[a].keys,f=this.data.hierarchy[a].sids;d=m.length-1;e=this.hierarchy[a];if(m.length){for(m=
0;m<f.length;m++)h=f[m],(g=this.getPrevKeyWith(h,a,d))&&g.apply(h);this.data.hierarchy[a].node.updateMatrix();e.matrixWorldNeedsUpdate=!0}}this.stop()}else if(!(h<this.startTime)){a=0;for(k=this.hierarchy.length;a<k;a++){d=this.hierarchy[a];b=this.data.hierarchy[a];var m=b.keys,l=b.animationCache;if(this.JITCompile&&void 0!==f[a][e])d instanceof THREE.Bone?(d.skinMatrix=f[a][e],d.matrixWorldNeedsUpdate=!1):(d.matrix=f[a][e],d.matrixWorldNeedsUpdate=!0);else if(m.length){this.JITCompile&&l&&(d instanceof
THREE.Bone?d.skinMatrix=l.originalMatrix:d.matrix=l.originalMatrix);b=l.prevKey;c=l.nextKey;if(b&&c){if(c.time<=g){if(i&&this.loop){b=m[0];for(c=m[1];c.time<h;)b=c,c=m[b.index+1]}else if(!i)for(var p=m.length-1;c.time<h&&c.index!==p;)b=c,c=m[b.index+1];l.prevKey=b;l.nextKey=c}c.time>=h?b.interpolate(c,h):b.interpolate(c,c.time)}this.data.hierarchy[a].node.updateMatrix();d.matrixWorldNeedsUpdate=!0}}if(this.JITCompile&&void 0===f[0][e]){this.hierarchy[0].updateMatrixWorld(!0);for(a=0;a<this.hierarchy.length;a++)f[a][e]=
this.hierarchy[a]instanceof THREE.Bone?this.hierarchy[a].skinMatrix.clone():this.hierarchy[a].matrix.clone()}}}};THREE.KeyFrameAnimation.prototype.getNextKeyWith=function(a,b,c){b=this.data.hierarchy[b].keys;for(c%=b.length;c<b.length;c++)if(b[c].hasTarget(a))return b[c];return b[0]};THREE.KeyFrameAnimation.prototype.getPrevKeyWith=function(a,b,c){b=this.data.hierarchy[b].keys;for(c=0<=c?c:c+b.length;0<=c;c--)if(b[c].hasTarget(a))return b[c];return b[b.length-1]};THREE.CubeCamera=function(a,b,c){THREE.Object3D.call(this);var d=new THREE.PerspectiveCamera(90,1,a,b);d.up.set(0,-1,0);d.lookAt(new THREE.Vector3(1,0,0));this.add(d);var e=new THREE.PerspectiveCamera(90,1,a,b);e.up.set(0,-1,0);e.lookAt(new THREE.Vector3(-1,0,0));this.add(e);var f=new THREE.PerspectiveCamera(90,1,a,b);f.up.set(0,0,1);f.lookAt(new THREE.Vector3(0,1,0));this.add(f);var h=new THREE.PerspectiveCamera(90,1,a,b);h.up.set(0,0,-1);h.lookAt(new THREE.Vector3(0,-1,0));this.add(h);var g=new THREE.PerspectiveCamera(90,
1,a,b);g.up.set(0,-1,0);g.lookAt(new THREE.Vector3(0,0,1));this.add(g);var i=new THREE.PerspectiveCamera(90,1,a,b);i.up.set(0,-1,0);i.lookAt(new THREE.Vector3(0,0,-1));this.add(i);this.renderTarget=new THREE.WebGLRenderTargetCube(c,c,{format:THREE.RGBFormat,magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter});this.updateCubeMap=function(a,b){var c=this.renderTarget,p=c.generateMipmaps;c.generateMipmaps=!1;c.activeCubeFace=0;a.render(b,d,c);c.activeCubeFace=1;a.render(b,e,c);c.activeCubeFace=
2;a.render(b,f,c);c.activeCubeFace=3;a.render(b,h,c);c.activeCubeFace=4;a.render(b,g,c);c.generateMipmaps=p;c.activeCubeFace=5;a.render(b,i,c)}};THREE.CubeCamera.prototype=Object.create(THREE.Object3D.prototype);THREE.CombinedCamera=function(a,b,c,d,e,f,h){THREE.Camera.call(this);this.fov=c;this.left=-a/2;this.right=a/2;this.top=b/2;this.bottom=-b/2;this.cameraO=new THREE.OrthographicCamera(a/-2,a/2,b/2,b/-2,f,h);this.cameraP=new THREE.PerspectiveCamera(c,a/b,d,e);this.zoom=1;this.toPerspective()};THREE.CombinedCamera.prototype=Object.create(THREE.Camera.prototype);
THREE.CombinedCamera.prototype.toPerspective=function(){this.near=this.cameraP.near;this.far=this.cameraP.far;this.cameraP.fov=this.fov/this.zoom;this.cameraP.updateProjectionMatrix();this.projectionMatrix=this.cameraP.projectionMatrix;this.inPerspectiveMode=!0;this.inOrthographicMode=!1};
THREE.CombinedCamera.prototype.toOrthographic=function(){var a=this.cameraP.aspect,b=(this.cameraP.near+this.cameraP.far)/2,b=Math.tan(this.fov/2)*b,a=2*b*a/2,b=b/this.zoom,a=a/this.zoom;this.cameraO.left=-a;this.cameraO.right=a;this.cameraO.top=b;this.cameraO.bottom=-b;this.cameraO.updateProjectionMatrix();this.near=this.cameraO.near;this.far=this.cameraO.far;this.projectionMatrix=this.cameraO.projectionMatrix;this.inPerspectiveMode=!1;this.inOrthographicMode=!0};
THREE.CombinedCamera.prototype.setSize=function(a,b){this.cameraP.aspect=a/b;this.left=-a/2;this.right=a/2;this.top=b/2;this.bottom=-b/2};THREE.CombinedCamera.prototype.setFov=function(a){this.fov=a;this.inPerspectiveMode?this.toPerspective():this.toOrthographic()};THREE.CombinedCamera.prototype.updateProjectionMatrix=function(){this.inPerspectiveMode?this.toPerspective():(this.toPerspective(),this.toOrthographic())};
THREE.CombinedCamera.prototype.setLens=function(a,b){void 0===b&&(b=24);var c=2*THREE.Math.radToDeg(Math.atan(b/(2*a)));this.setFov(c);return c};THREE.CombinedCamera.prototype.setZoom=function(a){this.zoom=a;this.inPerspectiveMode?this.toPerspective():this.toOrthographic()};THREE.CombinedCamera.prototype.toFrontView=function(){this.rotation.x=0;this.rotation.y=0;this.rotation.z=0;this.rotationAutoUpdate=!1};
THREE.CombinedCamera.prototype.toBackView=function(){this.rotation.x=0;this.rotation.y=Math.PI;this.rotation.z=0;this.rotationAutoUpdate=!1};THREE.CombinedCamera.prototype.toLeftView=function(){this.rotation.x=0;this.rotation.y=-Math.PI/2;this.rotation.z=0;this.rotationAutoUpdate=!1};THREE.CombinedCamera.prototype.toRightView=function(){this.rotation.x=0;this.rotation.y=Math.PI/2;this.rotation.z=0;this.rotationAutoUpdate=!1};
THREE.CombinedCamera.prototype.toTopView=function(){this.rotation.x=-Math.PI/2;this.rotation.y=0;this.rotation.z=0;this.rotationAutoUpdate=!1};THREE.CombinedCamera.prototype.toBottomView=function(){this.rotation.x=Math.PI/2;this.rotation.y=0;this.rotation.z=0;this.rotationAutoUpdate=!1};THREE.CircleGeometry=function(a,b,c,d){THREE.Geometry.call(this);this.radius=a=a||50;this.segments=b=void 0!==b?Math.max(3,b):8;this.thetaStart=c=void 0!==c?c:0;this.thetaLength=d=void 0!==d?d:2*Math.PI;var e,f=[];e=new THREE.Vector3;var h=new THREE.Vector2(0.5,0.5);this.vertices.push(e);f.push(h);for(e=0;e<=b;e++){var g=new THREE.Vector3,i=c+e/b*d;g.x=a*Math.cos(i);g.y=a*Math.sin(i);this.vertices.push(g);f.push(new THREE.Vector2((g.x/a+1)/2,(g.y/a+1)/2))}c=new THREE.Vector3(0,0,1);for(e=1;e<=b;e++)this.faces.push(new THREE.Face3(e,
e+1,0,[c.clone(),c.clone(),c.clone()])),this.faceVertexUvs[0].push([f[e].clone(),f[e+1].clone(),h.clone()]);this.computeCentroids();this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,a)};THREE.CircleGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.CubeGeometry=function(a,b,c,d,e,f){function h(a,b,c,d,e,f,h,q){var n,u=g.widthSegments,r=g.heightSegments,v=e/2,z=f/2,G=g.vertices.length;if("x"===a&&"y"===b||"y"===a&&"x"===b)n="z";else if("x"===a&&"z"===b||"z"===a&&"x"===b)n="y",r=g.depthSegments;else if("z"===a&&"y"===b||"y"===a&&"z"===b)n="x",u=g.depthSegments;var w=u+1,y=r+1,E=e/u,A=f/r,K=new THREE.Vector3;K[n]=0<h?1:-1;for(e=0;e<y;e++)for(f=0;f<w;f++){var D=new THREE.Vector3;D[a]=(f*E-v)*c;D[b]=(e*A-z)*d;D[n]=h;g.vertices.push(D)}for(e=
0;e<r;e++)for(f=0;f<u;f++)z=f+w*e,a=f+w*(e+1),b=f+1+w*(e+1),c=f+1+w*e,d=new THREE.Vector2(f/u,1-e/r),h=new THREE.Vector2(f/u,1-(e+1)/r),n=new THREE.Vector2((f+1)/u,1-(e+1)/r),v=new THREE.Vector2((f+1)/u,1-e/r),z=new THREE.Face3(z+G,a+G,c+G),z.normal.copy(K),z.vertexNormals.push(K.clone(),K.clone(),K.clone()),z.materialIndex=q,g.faces.push(z),g.faceVertexUvs[0].push([d,h,v]),z=new THREE.Face3(a+G,b+G,c+G),z.normal.copy(K),z.vertexNormals.push(K.clone(),K.clone(),K.clone()),z.materialIndex=q,g.faces.push(z),
g.faceVertexUvs[0].push([h.clone(),n,v.clone()])}THREE.Geometry.call(this);var g=this;this.width=a;this.height=b;this.depth=c;this.widthSegments=d||1;this.heightSegments=e||1;this.depthSegments=f||1;a=this.width/2;b=this.height/2;c=this.depth/2;h("z","y",-1,-1,this.depth,this.height,a,0);h("z","y",1,-1,this.depth,this.height,-a,1);h("x","z",1,1,this.width,this.depth,b,2);h("x","z",1,-1,this.width,this.depth,-b,3);h("x","y",1,-1,this.width,this.height,c,4);h("x","y",-1,-1,this.width,this.height,-c,
5);this.computeCentroids();this.mergeVertices()};THREE.CubeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.CylinderGeometry=function(a,b,c,d,e,f){THREE.Geometry.call(this);this.radiusTop=a=void 0!==a?a:20;this.radiusBottom=b=void 0!==b?b:20;this.height=c=void 0!==c?c:100;this.radialSegments=d=d||8;this.heightSegments=e=e||1;this.openEnded=f=void 0!==f?f:!1;var h=c/2,g,i,k=[],m=[];for(i=0;i<=e;i++){var l=[],p=[],t=i/e,s=t*(b-a)+a;for(g=0;g<=d;g++){var q=g/d,n=new THREE.Vector3;n.x=s*Math.sin(2*q*Math.PI);n.y=-t*c+h;n.z=s*Math.cos(2*q*Math.PI);this.vertices.push(n);l.push(this.vertices.length-1);p.push(new THREE.Vector2(q,
1-t))}k.push(l);m.push(p)}c=(b-a)/c;for(g=0;g<d;g++){0!==a?(l=this.vertices[k[0][g]].clone(),p=this.vertices[k[0][g+1]].clone()):(l=this.vertices[k[1][g]].clone(),p=this.vertices[k[1][g+1]].clone());l.setY(Math.sqrt(l.x*l.x+l.z*l.z)*c).normalize();p.setY(Math.sqrt(p.x*p.x+p.z*p.z)*c).normalize();for(i=0;i<e;i++){var t=k[i][g],s=k[i+1][g],q=k[i+1][g+1],n=k[i][g+1],u=l.clone(),r=l.clone(),v=p.clone(),z=p.clone(),G=m[i][g].clone(),w=m[i+1][g].clone(),y=m[i+1][g+1].clone(),E=m[i][g+1].clone();this.faces.push(new THREE.Face3(t,
s,n,[u,r,z]));this.faceVertexUvs[0].push([G,w,E]);this.faces.push(new THREE.Face3(s,q,n,[r.clone(),v,z.clone()]));this.faceVertexUvs[0].push([w.clone(),y,E.clone()])}}if(!1===f&&0<a){this.vertices.push(new THREE.Vector3(0,h,0));for(g=0;g<d;g++)t=k[0][g],s=k[0][g+1],q=this.vertices.length-1,u=new THREE.Vector3(0,1,0),r=new THREE.Vector3(0,1,0),v=new THREE.Vector3(0,1,0),G=m[0][g].clone(),w=m[0][g+1].clone(),y=new THREE.Vector2(w.x,0),this.faces.push(new THREE.Face3(t,s,q,[u,r,v])),this.faceVertexUvs[0].push([G,
w,y])}if(!1===f&&0<b){this.vertices.push(new THREE.Vector3(0,-h,0));for(g=0;g<d;g++)t=k[i][g+1],s=k[i][g],q=this.vertices.length-1,u=new THREE.Vector3(0,-1,0),r=new THREE.Vector3(0,-1,0),v=new THREE.Vector3(0,-1,0),G=m[i][g+1].clone(),w=m[i][g].clone(),y=new THREE.Vector2(w.x,1),this.faces.push(new THREE.Face3(t,s,q,[u,r,v])),this.faceVertexUvs[0].push([G,w,y])}this.computeCentroids();this.computeFaceNormals()};THREE.CylinderGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ExtrudeGeometry=function(a,b){"undefined"!==typeof a&&(THREE.Geometry.call(this),a=a instanceof Array?a:[a],this.shapebb=a[a.length-1].getBoundingBox(),this.addShapeList(a,b),this.computeCentroids(),this.computeFaceNormals())};THREE.ExtrudeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ExtrudeGeometry.prototype.addShapeList=function(a,b){for(var c=a.length,d=0;d<c;d++)this.addShape(a[d],b)};
THREE.ExtrudeGeometry.prototype.addShape=function(a,b){function c(a,b,c){b||console.log("die");return b.clone().multiplyScalar(c).add(a)}function d(a,b,c){var d=THREE.ExtrudeGeometry.__v1,e=THREE.ExtrudeGeometry.__v2,f=THREE.ExtrudeGeometry.__v3,g=THREE.ExtrudeGeometry.__v4,h=THREE.ExtrudeGeometry.__v5,i=THREE.ExtrudeGeometry.__v6;d.set(a.x-b.x,a.y-b.y);e.set(a.x-c.x,a.y-c.y);d=d.normalize();e=e.normalize();f.set(-d.y,d.x);g.set(e.y,-e.x);h.copy(a).add(f);i.copy(a).add(g);if(h.equals(i))return g.clone();
h.copy(b).add(f);i.copy(c).add(g);f=d.dot(g);g=i.sub(h).dot(g);0===f&&(console.log("Either infinite or no solutions!"),0===g?console.log("Its finite solutions."):console.log("Too bad, no solutions."));g/=f;return 0>g?(b=Math.atan2(b.y-a.y,b.x-a.x),a=Math.atan2(c.y-a.y,c.x-a.x),b>a&&(a+=2*Math.PI),c=(b+a)/2,a=-Math.cos(c),c=-Math.sin(c),new THREE.Vector2(a,c)):d.multiplyScalar(g).add(h).sub(a).clone()}function e(c,d){var e,f;for(C=c.length;0<=--C;){e=C;f=C-1;0>f&&(f=c.length-1);for(var g=0,h=t+2*m,
g=0;g<h;g++){var i=ca*g,k=ca*(g+1),l=d+e+i,i=d+f+i,n=d+f+k,k=d+e+k,p=c,q=g,s=h,u=e,w=f,l=l+F,i=i+F,n=n+F,k=k+F;D.faces.push(new THREE.Face3(l,i,k,null,null,r));D.faces.push(new THREE.Face3(i,n,k,null,null,r));l=v.generateSideWallUV(D,a,p,b,l,i,n,k,q,s,u,w);D.faceVertexUvs[0].push([l[0],l[1],l[3]]);D.faceVertexUvs[0].push([l[1],l[2],l[3]])}}}function f(a,b,c){D.vertices.push(new THREE.Vector3(a,b,c))}function h(c,d,e,f){c+=F;d+=F;e+=F;D.faces.push(new THREE.Face3(c,d,e,null,null,u));c=f?v.generateBottomUV(D,
a,b,c,d,e):v.generateTopUV(D,a,b,c,d,e);D.faceVertexUvs[0].push(c)}var g=void 0!==b.amount?b.amount:100,i=void 0!==b.bevelThickness?b.bevelThickness:6,k=void 0!==b.bevelSize?b.bevelSize:i-2,m=void 0!==b.bevelSegments?b.bevelSegments:3,l=void 0!==b.bevelEnabled?b.bevelEnabled:!0,p=void 0!==b.curveSegments?b.curveSegments:12,t=void 0!==b.steps?b.steps:1,s=b.extrudePath,q,n=!1,u=b.material,r=b.extrudeMaterial,v=void 0!==b.UVGenerator?b.UVGenerator:THREE.ExtrudeGeometry.WorldUVGenerator,z,G,w,y;s&&(q=
s.getSpacedPoints(t),n=!0,l=!1,z=void 0!==b.frames?b.frames:new THREE.TubeGeometry.FrenetFrames(s,t,!1),G=new THREE.Vector3,w=new THREE.Vector3,y=new THREE.Vector3);l||(k=i=m=0);var E,A,K,D=this,F=this.vertices.length,p=a.extractPoints(p),O=p.shape,p=p.holes;if(s=!THREE.Shape.Utils.isClockWise(O)){O=O.reverse();A=0;for(K=p.length;A<K;A++)E=p[A],THREE.Shape.Utils.isClockWise(E)&&(p[A]=E.reverse());s=!1}var x=THREE.Shape.Utils.triangulateShape(O,p),s=O;A=0;for(K=p.length;A<K;A++)E=p[A],O=O.concat(E);
var I,B,M,J,ca=O.length,na=x.length,pa=[],C=0,Q=s.length;I=Q-1;for(B=C+1;C<Q;C++,I++,B++)I===Q&&(I=0),B===Q&&(B=0),pa[C]=d(s[C],s[I],s[B]);var R=[],L,da=pa.concat();A=0;for(K=p.length;A<K;A++){E=p[A];L=[];C=0;Q=E.length;I=Q-1;for(B=C+1;C<Q;C++,I++,B++)I===Q&&(I=0),B===Q&&(B=0),L[C]=d(E[C],E[I],E[B]);R.push(L);da=da.concat(L)}for(I=0;I<m;I++){E=I/m;M=i*(1-E);B=k*Math.sin(E*Math.PI/2);C=0;for(Q=s.length;C<Q;C++)J=c(s[C],pa[C],B),f(J.x,J.y,-M);A=0;for(K=p.length;A<K;A++){E=p[A];L=R[A];C=0;for(Q=E.length;C<
Q;C++)J=c(E[C],L[C],B),f(J.x,J.y,-M)}}B=k;for(C=0;C<ca;C++)J=l?c(O[C],da[C],B):O[C],n?(w.copy(z.normals[0]).multiplyScalar(J.x),G.copy(z.binormals[0]).multiplyScalar(J.y),y.copy(q[0]).add(w).add(G),f(y.x,y.y,y.z)):f(J.x,J.y,0);for(E=1;E<=t;E++)for(C=0;C<ca;C++)J=l?c(O[C],da[C],B):O[C],n?(w.copy(z.normals[E]).multiplyScalar(J.x),G.copy(z.binormals[E]).multiplyScalar(J.y),y.copy(q[E]).add(w).add(G),f(y.x,y.y,y.z)):f(J.x,J.y,g/t*E);for(I=m-1;0<=I;I--){E=I/m;M=i*(1-E);B=k*Math.sin(E*Math.PI/2);C=0;for(Q=
s.length;C<Q;C++)J=c(s[C],pa[C],B),f(J.x,J.y,g+M);A=0;for(K=p.length;A<K;A++){E=p[A];L=R[A];C=0;for(Q=E.length;C<Q;C++)J=c(E[C],L[C],B),n?f(J.x,J.y+q[t-1].y,q[t-1].x+M):f(J.x,J.y,g+M)}}if(l){i=0*ca;for(C=0;C<na;C++)g=x[C],h(g[2]+i,g[1]+i,g[0]+i,!0);i=ca*(t+2*m);for(C=0;C<na;C++)g=x[C],h(g[0]+i,g[1]+i,g[2]+i,!1)}else{for(C=0;C<na;C++)g=x[C],h(g[2],g[1],g[0],!0);for(C=0;C<na;C++)g=x[C],h(g[0]+ca*t,g[1]+ca*t,g[2]+ca*t,!1)}g=0;e(s,g);g+=s.length;A=0;for(K=p.length;A<K;A++)E=p[A],e(E,g),g+=E.length};
THREE.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(a,b,c,d,e,f){b=a.vertices[e].x;e=a.vertices[e].y;c=a.vertices[f].x;f=a.vertices[f].y;return[new THREE.Vector2(a.vertices[d].x,a.vertices[d].y),new THREE.Vector2(b,e),new THREE.Vector2(c,f)]},generateBottomUV:function(a,b,c,d,e,f){return this.generateTopUV(a,b,c,d,e,f)},generateSideWallUV:function(a,b,c,d,e,f,h,g){var b=a.vertices[e].x,c=a.vertices[e].y,e=a.vertices[e].z,d=a.vertices[f].x,i=a.vertices[f].y,f=a.vertices[f].z,k=a.vertices[h].x,
m=a.vertices[h].y,h=a.vertices[h].z,l=a.vertices[g].x,p=a.vertices[g].y,a=a.vertices[g].z;return 0.01>Math.abs(c-i)?[new THREE.Vector2(b,1-e),new THREE.Vector2(d,1-f),new THREE.Vector2(k,1-h),new THREE.Vector2(l,1-a)]:[new THREE.Vector2(c,1-e),new THREE.Vector2(i,1-f),new THREE.Vector2(m,1-h),new THREE.Vector2(p,1-a)]}};THREE.ExtrudeGeometry.__v1=new THREE.Vector2;THREE.ExtrudeGeometry.__v2=new THREE.Vector2;THREE.ExtrudeGeometry.__v3=new THREE.Vector2;THREE.ExtrudeGeometry.__v4=new THREE.Vector2;
THREE.ExtrudeGeometry.__v5=new THREE.Vector2;THREE.ExtrudeGeometry.__v6=new THREE.Vector2;THREE.ShapeGeometry=function(a,b){THREE.Geometry.call(this);!1===a instanceof Array&&(a=[a]);this.shapebb=a[a.length-1].getBoundingBox();this.addShapeList(a,b);this.computeCentroids();this.computeFaceNormals()};THREE.ShapeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ShapeGeometry.prototype.addShapeList=function(a,b){for(var c=0,d=a.length;c<d;c++)this.addShape(a[c],b);return this};
THREE.ShapeGeometry.prototype.addShape=function(a,b){void 0===b&&(b={});var c=b.material,d=void 0===b.UVGenerator?THREE.ExtrudeGeometry.WorldUVGenerator:b.UVGenerator,e,f,h,g=this.vertices.length;e=a.extractPoints(void 0!==b.curveSegments?b.curveSegments:12);var i=e.shape,k=e.holes;if(!THREE.Shape.Utils.isClockWise(i)){i=i.reverse();e=0;for(f=k.length;e<f;e++)h=k[e],THREE.Shape.Utils.isClockWise(h)&&(k[e]=h.reverse())}var m=THREE.Shape.Utils.triangulateShape(i,k);e=0;for(f=k.length;e<f;e++)h=k[e],
i=i.concat(h);k=i.length;f=m.length;for(e=0;e<k;e++)h=i[e],this.vertices.push(new THREE.Vector3(h.x,h.y,0));for(e=0;e<f;e++)k=m[e],i=k[0]+g,h=k[1]+g,k=k[2]+g,this.faces.push(new THREE.Face3(i,h,k,null,null,c)),this.faceVertexUvs[0].push(d.generateBottomUV(this,a,b,i,h,k))};THREE.LatheGeometry=function(a,b,c,d){THREE.Geometry.call(this);for(var b=b||12,c=c||0,d=d||2*Math.PI,e=1/(a.length-1),f=1/b,h=0,g=b;h<=g;h++)for(var i=c+h*f*d,k=Math.cos(i),m=Math.sin(i),i=0,l=a.length;i<l;i++){var p=a[i],t=new THREE.Vector3;t.x=k*p.x-m*p.y;t.y=m*p.x+k*p.y;t.z=p.z;this.vertices.push(t)}c=a.length;h=0;for(g=b;h<g;h++){i=0;for(l=a.length-1;i<l;i++){var b=m=i+c*h,d=m+c,k=m+1+c,m=m+1,p=h*f,t=i*e,s=p+f,q=t+e;this.faces.push(new THREE.Face3(b,d,m));this.faceVertexUvs[0].push([new THREE.Vector2(p,
t),new THREE.Vector2(s,t),new THREE.Vector2(p,q)]);this.faces.push(new THREE.Face3(d,k,m));this.faceVertexUvs[0].push([new THREE.Vector2(s,t),new THREE.Vector2(s,q),new THREE.Vector2(p,q)])}}this.mergeVertices();this.computeCentroids();this.computeFaceNormals();this.computeVertexNormals()};THREE.LatheGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.PlaneGeometry=function(a,b,c,d){THREE.Geometry.call(this);this.width=a;this.height=b;this.widthSegments=c||1;this.heightSegments=d||1;for(var e=a/2,f=b/2,c=this.widthSegments,d=this.heightSegments,h=c+1,g=d+1,i=this.width/c,k=this.height/d,m=new THREE.Vector3(0,0,1),a=0;a<g;a++)for(b=0;b<h;b++)this.vertices.push(new THREE.Vector3(b*i-e,-(a*k-f),0));for(a=0;a<d;a++)for(b=0;b<c;b++){var l=b+h*a,e=b+h*(a+1),f=b+1+h*(a+1),g=b+1+h*a,i=new THREE.Vector2(b/c,1-a/d),k=new THREE.Vector2(b/c,1-(a+1)/
d),p=new THREE.Vector2((b+1)/c,1-(a+1)/d),t=new THREE.Vector2((b+1)/c,1-a/d),l=new THREE.Face3(l,e,g);l.normal.copy(m);l.vertexNormals.push(m.clone(),m.clone(),m.clone());this.faces.push(l);this.faceVertexUvs[0].push([i,k,t]);l=new THREE.Face3(e,f,g);l.normal.copy(m);l.vertexNormals.push(m.clone(),m.clone(),m.clone());this.faces.push(l);this.faceVertexUvs[0].push([k.clone(),p,t.clone()])}this.computeCentroids()};THREE.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.RingGeometry=function(a,b,c,d,e,f){THREE.Geometry.call(this);for(var a=a||0,b=b||50,e=void 0!==e?e:0,f=void 0!==f?f:2*Math.PI,c=void 0!==c?Math.max(3,c):8,d=void 0!==d?Math.max(3,d):8,h,g=[],i=a,k=(b-a)/d,a=0;a<=d;a++){for(h=0;h<=c;h++){var m=new THREE.Vector3,l=e+h/c*f;m.x=i*Math.cos(l);m.y=i*Math.sin(l);this.vertices.push(m);g.push(new THREE.Vector2((m.x/b+1)/2,(m.y/b+1)/2))}i+=k}b=new THREE.Vector3(0,0,1);for(a=0;a<d;a++){e=a*c;for(h=0;h<=c;h++)l=h+e,f=l+a,k=l+c+a,m=l+c+1+a,this.faces.push(new THREE.Face3(f,
k,m,[b.clone(),b.clone(),b.clone()])),this.faceVertexUvs[0].push([g[f].clone(),g[k].clone(),g[m].clone()]),f=l+a,k=l+c+1+a,m=l+1+a,this.faces.push(new THREE.Face3(f,k,m,[b.clone(),b.clone(),b.clone()])),this.faceVertexUvs[0].push([g[f].clone(),g[k].clone(),g[m].clone()])}this.computeCentroids();this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,i)};THREE.RingGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.SphereGeometry=function(a,b,c,d,e,f,h){THREE.Geometry.call(this);this.radius=a=a||50;this.widthSegments=b=Math.max(3,Math.floor(b)||8);this.heightSegments=c=Math.max(2,Math.floor(c)||6);this.phiStart=d=void 0!==d?d:0;this.phiLength=e=void 0!==e?e:2*Math.PI;this.thetaStart=f=void 0!==f?f:0;this.thetaLength=h=void 0!==h?h:Math.PI;var g,i,k=[],m=[];for(i=0;i<=c;i++){var l=[],p=[];for(g=0;g<=b;g++){var t=g/b,s=i/c,q=new THREE.Vector3;q.x=-a*Math.cos(d+t*e)*Math.sin(f+s*h);q.y=a*Math.cos(f+s*h);
q.z=a*Math.sin(d+t*e)*Math.sin(f+s*h);this.vertices.push(q);l.push(this.vertices.length-1);p.push(new THREE.Vector2(t,1-s))}k.push(l);m.push(p)}for(i=0;i<this.heightSegments;i++)for(g=0;g<this.widthSegments;g++){var b=k[i][g+1],c=k[i][g],d=k[i+1][g],e=k[i+1][g+1],f=this.vertices[b].clone().normalize(),h=this.vertices[c].clone().normalize(),l=this.vertices[d].clone().normalize(),p=this.vertices[e].clone().normalize(),t=m[i][g+1].clone(),s=m[i][g].clone(),q=m[i+1][g].clone(),n=m[i+1][g+1].clone();Math.abs(this.vertices[b].y)===
this.radius?(t.x=(t.x+s.x)/2,this.faces.push(new THREE.Face3(b,d,e,[f,l,p])),this.faceVertexUvs[0].push([t,q,n])):Math.abs(this.vertices[d].y)===this.radius?(q.x=(q.x+n.x)/2,this.faces.push(new THREE.Face3(b,c,d,[f,h,l])),this.faceVertexUvs[0].push([t,s,q])):(this.faces.push(new THREE.Face3(b,c,e,[f,h,p])),this.faceVertexUvs[0].push([t,s,n]),this.faces.push(new THREE.Face3(c,d,e,[h.clone(),l,p.clone()])),this.faceVertexUvs[0].push([s.clone(),q,n.clone()]))}this.computeCentroids();this.computeFaceNormals();
this.boundingSphere=new THREE.Sphere(new THREE.Vector3,a)};THREE.SphereGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TextGeometry=function(a,b){var b=b||{},c=THREE.FontUtils.generateShapes(a,b);b.amount=void 0!==b.height?b.height:50;void 0===b.bevelThickness&&(b.bevelThickness=10);void 0===b.bevelSize&&(b.bevelSize=8);void 0===b.bevelEnabled&&(b.bevelEnabled=!1);THREE.ExtrudeGeometry.call(this,c,b)};THREE.TextGeometry.prototype=Object.create(THREE.ExtrudeGeometry.prototype);THREE.TorusGeometry=function(a,b,c,d,e){THREE.Geometry.call(this);this.radius=a||100;this.tube=b||40;this.radialSegments=c||8;this.tubularSegments=d||6;this.arc=e||2*Math.PI;e=new THREE.Vector3;a=[];b=[];for(c=0;c<=this.radialSegments;c++)for(d=0;d<=this.tubularSegments;d++){var f=d/this.tubularSegments*this.arc,h=2*c/this.radialSegments*Math.PI;e.x=this.radius*Math.cos(f);e.y=this.radius*Math.sin(f);var g=new THREE.Vector3;g.x=(this.radius+this.tube*Math.cos(h))*Math.cos(f);g.y=(this.radius+this.tube*
Math.cos(h))*Math.sin(f);g.z=this.tube*Math.sin(h);this.vertices.push(g);a.push(new THREE.Vector2(d/this.tubularSegments,c/this.radialSegments));b.push(g.clone().sub(e).normalize())}for(c=1;c<=this.radialSegments;c++)for(d=1;d<=this.tubularSegments;d++){var e=(this.tubularSegments+1)*c+d-1,f=(this.tubularSegments+1)*(c-1)+d-1,h=(this.tubularSegments+1)*(c-1)+d,g=(this.tubularSegments+1)*c+d,i=new THREE.Face3(e,f,g,[b[e],b[f],b[g]]);i.normal.add(b[e]);i.normal.add(b[f]);i.normal.add(b[g]);i.normal.normalize();
this.faces.push(i);this.faceVertexUvs[0].push([a[e].clone(),a[f].clone(),a[g].clone()]);i=new THREE.Face3(f,h,g,[b[f],b[h],b[g]]);i.normal.add(b[f]);i.normal.add(b[h]);i.normal.add(b[g]);i.normal.normalize();this.faces.push(i);this.faceVertexUvs[0].push([a[f].clone(),a[h].clone(),a[g].clone()])}this.computeCentroids()};THREE.TorusGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TorusKnotGeometry=function(a,b,c,d,e,f,h){function g(a,b,c,d,e){var f=Math.cos(a),g=Math.sin(a),a=b/c*a,b=Math.cos(a),f=0.5*(d*(2+b))*f,g=0.5*d*(2+b)*g,d=0.5*e*d*Math.sin(a);return new THREE.Vector3(f,g,d)}THREE.Geometry.call(this);this.radius=a||100;this.tube=b||40;this.radialSegments=c||64;this.tubularSegments=d||8;this.p=e||2;this.q=f||3;this.heightScale=h||1;this.grid=Array(this.radialSegments);c=new THREE.Vector3;d=new THREE.Vector3;e=new THREE.Vector3;for(a=0;a<this.radialSegments;++a){this.grid[a]=
Array(this.tubularSegments);b=2*(a/this.radialSegments)*this.p*Math.PI;f=g(b,this.q,this.p,this.radius,this.heightScale);b=g(b+0.01,this.q,this.p,this.radius,this.heightScale);c.subVectors(b,f);d.addVectors(b,f);e.crossVectors(c,d);d.crossVectors(e,c);e.normalize();d.normalize();for(b=0;b<this.tubularSegments;++b){var i=2*(b/this.tubularSegments)*Math.PI,h=-this.tube*Math.cos(i),i=this.tube*Math.sin(i),k=new THREE.Vector3;k.x=f.x+h*d.x+i*e.x;k.y=f.y+h*d.y+i*e.y;k.z=f.z+h*d.z+i*e.z;this.grid[a][b]=
this.vertices.push(k)-1}}for(a=0;a<this.radialSegments;++a)for(b=0;b<this.tubularSegments;++b){var e=(a+1)%this.radialSegments,f=(b+1)%this.tubularSegments,c=this.grid[a][b],d=this.grid[e][b],e=this.grid[e][f],f=this.grid[a][f],h=new THREE.Vector2(a/this.radialSegments,b/this.tubularSegments),i=new THREE.Vector2((a+1)/this.radialSegments,b/this.tubularSegments),k=new THREE.Vector2((a+1)/this.radialSegments,(b+1)/this.tubularSegments),m=new THREE.Vector2(a/this.radialSegments,(b+1)/this.tubularSegments);
this.faces.push(new THREE.Face3(c,d,f));this.faceVertexUvs[0].push([h,i,m]);this.faces.push(new THREE.Face3(d,e,f));this.faceVertexUvs[0].push([i.clone(),k,m.clone()])}this.computeCentroids();this.computeFaceNormals();this.computeVertexNormals()};THREE.TorusKnotGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TubeGeometry=function(a,b,c,d,e){THREE.Geometry.call(this);this.path=a;this.segments=b||64;this.radius=c||1;this.radialSegments=d||8;this.closed=e||!1;this.grid=[];var f,h,d=this.segments+1,g,i,k,e=new THREE.Vector3,m,l,b=new THREE.TubeGeometry.FrenetFrames(this.path,this.segments,this.closed);m=b.normals;l=b.binormals;this.tangents=b.tangents;this.normals=m;this.binormals=l;for(b=0;b<d;b++){this.grid[b]=[];c=b/(d-1);k=a.getPointAt(c);f=m[b];h=l[b];for(c=0;c<this.radialSegments;c++)g=2*(c/this.radialSegments)*
Math.PI,i=-this.radius*Math.cos(g),g=this.radius*Math.sin(g),e.copy(k),e.x+=i*f.x+g*h.x,e.y+=i*f.y+g*h.y,e.z+=i*f.z+g*h.z,this.grid[b][c]=this.vertices.push(new THREE.Vector3(e.x,e.y,e.z))-1}for(b=0;b<this.segments;b++)for(c=0;c<this.radialSegments;c++)e=this.closed?(b+1)%this.segments:b+1,m=(c+1)%this.radialSegments,a=this.grid[b][c],d=this.grid[e][c],e=this.grid[e][m],m=this.grid[b][m],l=new THREE.Vector2(b/this.segments,c/this.radialSegments),f=new THREE.Vector2((b+1)/this.segments,c/this.radialSegments),
h=new THREE.Vector2((b+1)/this.segments,(c+1)/this.radialSegments),i=new THREE.Vector2(b/this.segments,(c+1)/this.radialSegments),this.faces.push(new THREE.Face3(a,d,m)),this.faceVertexUvs[0].push([l,f,i]),this.faces.push(new THREE.Face3(d,e,m)),this.faceVertexUvs[0].push([f.clone(),h,i.clone()]);this.computeCentroids();this.computeFaceNormals();this.computeVertexNormals()};THREE.TubeGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.TubeGeometry.FrenetFrames=function(a,b,c){new THREE.Vector3;var d=new THREE.Vector3;new THREE.Vector3;var e=[],f=[],h=[],g=new THREE.Vector3,i=new THREE.Matrix4,b=b+1,k,m,l;this.tangents=e;this.normals=f;this.binormals=h;for(k=0;k<b;k++)m=k/(b-1),e[k]=a.getTangentAt(m),e[k].normalize();f[0]=new THREE.Vector3;h[0]=new THREE.Vector3;a=Number.MAX_VALUE;k=Math.abs(e[0].x);m=Math.abs(e[0].y);l=Math.abs(e[0].z);k<=a&&(a=k,d.set(1,0,0));m<=a&&(a=m,d.set(0,1,0));l<=a&&d.set(0,0,1);g.crossVectors(e[0],
d).normalize();f[0].crossVectors(e[0],g);h[0].crossVectors(e[0],f[0]);for(k=1;k<b;k++)f[k]=f[k-1].clone(),h[k]=h[k-1].clone(),g.crossVectors(e[k-1],e[k]),1E-4<g.length()&&(g.normalize(),d=Math.acos(THREE.Math.clamp(e[k-1].dot(e[k]),-1,1)),f[k].applyMatrix4(i.makeRotationAxis(g,d))),h[k].crossVectors(e[k],f[k]);if(c){d=Math.acos(THREE.Math.clamp(f[0].dot(f[b-1]),-1,1));d/=b-1;0<e[0].dot(g.crossVectors(f[0],f[b-1]))&&(d=-d);for(k=1;k<b;k++)f[k].applyMatrix4(i.makeRotationAxis(e[k],d*k)),h[k].crossVectors(e[k],
f[k])}};THREE.PolyhedronGeometry=function(a,b,c,d){function e(a){var b=a.normalize().clone();b.index=g.vertices.push(b)-1;var c=Math.atan2(a.z,-a.x)/2/Math.PI+0.5,a=Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+0.5;b.uv=new THREE.Vector2(c,1-a);return b}function f(a,b,c){var d=new THREE.Face3(a.index,b.index,c.index,[a.clone(),b.clone(),c.clone()]);d.centroid.add(a).add(b).add(c).divideScalar(3);g.faces.push(d);d=Math.atan2(d.centroid.z,-d.centroid.x);g.faceVertexUvs[0].push([h(a.uv,a,d),h(b.uv,b,d),
h(c.uv,c,d)])}function h(a,b,c){0>c&&1===a.x&&(a=new THREE.Vector2(a.x-1,a.y));0===b.x&&0===b.z&&(a=new THREE.Vector2(c/2/Math.PI+0.5,a.y));return a.clone()}THREE.Geometry.call(this);for(var c=c||1,d=d||0,g=this,i=0,k=a.length;i<k;i++)e(new THREE.Vector3(a[i][0],a[i][1],a[i][2]));for(var m=this.vertices,a=[],i=0,k=b.length;i<k;i++){var l=m[b[i][0]],p=m[b[i][1]],t=m[b[i][2]];a[i]=new THREE.Face3(l.index,p.index,t.index,[l.clone(),p.clone(),t.clone()])}i=0;for(k=a.length;i<k;i++){p=a[i];m=d;b=Math.pow(2,
m);Math.pow(4,m);for(var m=e(g.vertices[p.a]),l=e(g.vertices[p.b]),s=e(g.vertices[p.c]),p=[],t=0;t<=b;t++){p[t]=[];for(var q=e(m.clone().lerp(s,t/b)),n=e(l.clone().lerp(s,t/b)),u=b-t,r=0;r<=u;r++)p[t][r]=0==r&&t==b?q:e(q.clone().lerp(n,r/u))}for(t=0;t<b;t++)for(r=0;r<2*(b-t)-1;r++)m=Math.floor(r/2),0==r%2?f(p[t][m+1],p[t+1][m],p[t][m]):f(p[t][m+1],p[t+1][m+1],p[t+1][m])}i=0;for(k=this.faceVertexUvs[0].length;i<k;i++)d=this.faceVertexUvs[0][i],a=d[0].x,b=d[1].x,m=d[2].x,l=Math.max(a,Math.max(b,m)),
p=Math.min(a,Math.min(b,m)),0.9<l&&0.1>p&&(0.2>a&&(d[0].x+=1),0.2>b&&(d[1].x+=1),0.2>m&&(d[2].x+=1));i=0;for(k=this.vertices.length;i<k;i++)this.vertices[i].multiplyScalar(c);this.mergeVertices();this.computeCentroids();this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,c)};THREE.PolyhedronGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.IcosahedronGeometry=function(a,b){this.radius=a;this.detail=b;var c=(1+Math.sqrt(5))/2;THREE.PolyhedronGeometry.call(this,[[-1,c,0],[1,c,0],[-1,-c,0],[1,-c,0],[0,-1,c],[0,1,c],[0,-1,-c],[0,1,-c],[c,0,-1],[c,0,1],[-c,0,-1],[-c,0,1]],[[0,11,5],[0,5,1],[0,1,7],[0,7,10],[0,10,11],[1,5,9],[5,11,4],[11,10,2],[10,7,6],[7,1,8],[3,9,4],[3,4,2],[3,2,6],[3,6,8],[3,8,9],[4,9,5],[2,4,11],[6,2,10],[8,6,7],[9,8,1]],a,b)};THREE.IcosahedronGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.OctahedronGeometry=function(a,b){THREE.PolyhedronGeometry.call(this,[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],[[0,2,4],[0,4,3],[0,3,5],[0,5,2],[1,2,5],[1,5,3],[1,3,4],[1,4,2]],a,b)};THREE.OctahedronGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TetrahedronGeometry=function(a,b){THREE.PolyhedronGeometry.call(this,[[1,1,1],[-1,-1,1],[-1,1,-1],[1,-1,-1]],[[2,1,0],[0,3,2],[1,3,0],[2,3,1]],a,b)};THREE.TetrahedronGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ParametricGeometry=function(a,b,c){THREE.Geometry.call(this);var d=this.vertices,e=this.faces,f=this.faceVertexUvs[0],h,g,i,k,m=b+1;for(h=0;h<=c;h++){k=h/c;for(g=0;g<=b;g++)i=g/b,i=a(i,k),d.push(i)}var l,p,t,s;for(h=0;h<c;h++)for(g=0;g<b;g++)a=h*m+g,d=h*m+g+1,k=(h+1)*m+g+1,i=(h+1)*m+g,l=new THREE.Vector2(g/b,h/c),p=new THREE.Vector2((g+1)/b,h/c),t=new THREE.Vector2((g+1)/b,(h+1)/c),s=new THREE.Vector2(g/b,(h+1)/c),e.push(new THREE.Face3(a,d,i)),f.push([l,p,s]),e.push(new THREE.Face3(d,k,i)),
f.push([p.clone(),t,s.clone()]);this.computeCentroids();this.computeFaceNormals();this.computeVertexNormals()};THREE.ParametricGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.AxisHelper=function(a){var a=a||1,b=new THREE.Geometry;b.vertices.push(new THREE.Vector3,new THREE.Vector3(a,0,0),new THREE.Vector3,new THREE.Vector3(0,a,0),new THREE.Vector3,new THREE.Vector3(0,0,a));b.colors.push(new THREE.Color(16711680),new THREE.Color(16755200),new THREE.Color(65280),new THREE.Color(11206400),new THREE.Color(255),new THREE.Color(43775));a=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});THREE.Line.call(this,b,a,THREE.LinePieces)};
THREE.AxisHelper.prototype=Object.create(THREE.Line.prototype);THREE.ArrowHelper=function(a,b,c,d,e,f){THREE.Object3D.call(this);void 0===d&&(d=16776960);void 0===c&&(c=1);void 0===e&&(e=0.2*c);void 0===f&&(f=0.2*e);this.position=b;b=new THREE.Geometry;b.vertices.push(new THREE.Vector3(0,0,0));b.vertices.push(new THREE.Vector3(0,1,0));this.line=new THREE.Line(b,new THREE.LineBasicMaterial({color:d}));this.line.matrixAutoUpdate=!1;this.add(this.line);b=new THREE.CylinderGeometry(0,0.5,1,5,1);b.applyMatrix((new THREE.Matrix4).makeTranslation(0,-0.5,0));this.cone=
new THREE.Mesh(b,new THREE.MeshBasicMaterial({color:d}));this.cone.matrixAutoUpdate=!1;this.add(this.cone);this.setDirection(a);this.setLength(c,e,f)};THREE.ArrowHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.ArrowHelper.prototype.setDirection=function(){var a=new THREE.Vector3,b;return function(c){0.99999<c.y?this.quaternion.set(0,0,0,1):-0.99999>c.y?this.quaternion.set(1,0,0,0):(a.set(c.z,0,-c.x).normalize(),b=Math.acos(c.y),this.quaternion.setFromAxisAngle(a,b))}}();
THREE.ArrowHelper.prototype.setLength=function(a,b,c){void 0===b&&(b=0.2*a);void 0===c&&(c=0.2*b);this.line.scale.set(1,a,1);this.line.updateMatrix();this.cone.scale.set(c,b,c);this.cone.position.y=a;this.cone.updateMatrix()};THREE.ArrowHelper.prototype.setColor=function(a){this.line.material.color.setHex(a);this.cone.material.color.setHex(a)};THREE.BoxHelper=function(a){var b=[new THREE.Vector3(1,1,1),new THREE.Vector3(-1,1,1),new THREE.Vector3(-1,-1,1),new THREE.Vector3(1,-1,1),new THREE.Vector3(1,1,-1),new THREE.Vector3(-1,1,-1),new THREE.Vector3(-1,-1,-1),new THREE.Vector3(1,-1,-1)];this.vertices=b;var c=new THREE.Geometry;c.vertices.push(b[0],b[1],b[1],b[2],b[2],b[3],b[3],b[0],b[4],b[5],b[5],b[6],b[6],b[7],b[7],b[4],b[0],b[4],b[1],b[5],b[2],b[6],b[3],b[7]);THREE.Line.call(this,c,new THREE.LineBasicMaterial({color:16776960}),THREE.LinePieces);
void 0!==a&&this.update(a)};THREE.BoxHelper.prototype=Object.create(THREE.Line.prototype);
THREE.BoxHelper.prototype.update=function(a){var b=a.geometry;null===b.boundingBox&&b.computeBoundingBox();var c=b.boundingBox.min,b=b.boundingBox.max,d=this.vertices;d[0].set(b.x,b.y,b.z);d[1].set(c.x,b.y,b.z);d[2].set(c.x,c.y,b.z);d[3].set(b.x,c.y,b.z);d[4].set(b.x,b.y,c.z);d[5].set(c.x,b.y,c.z);d[6].set(c.x,c.y,c.z);d[7].set(b.x,c.y,c.z);this.geometry.computeBoundingSphere();this.geometry.verticesNeedUpdate=!0;this.matrixAutoUpdate=!1;this.matrixWorld=a.matrixWorld};THREE.BoundingBoxHelper=function(a,b){var c=b||8947848;this.object=a;this.box=new THREE.Box3;THREE.Mesh.call(this,new THREE.CubeGeometry(1,1,1),new THREE.MeshBasicMaterial({color:c,wireframe:!0}))};THREE.BoundingBoxHelper.prototype=Object.create(THREE.Mesh.prototype);THREE.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object);this.box.size(this.scale);this.box.center(this.position)};THREE.CameraHelper=function(a){function b(a,b,d){c(a,d);c(b,d)}function c(a,b){d.vertices.push(new THREE.Vector3);d.colors.push(new THREE.Color(b));void 0===f[a]&&(f[a]=[]);f[a].push(d.vertices.length-1)}var d=new THREE.Geometry,e=new THREE.LineBasicMaterial({color:16777215,vertexColors:THREE.FaceColors}),f={};b("n1","n2",16755200);b("n2","n4",16755200);b("n4","n3",16755200);b("n3","n1",16755200);b("f1","f2",16755200);b("f2","f4",16755200);b("f4","f3",16755200);b("f3","f1",16755200);b("n1","f1",16755200);
b("n2","f2",16755200);b("n3","f3",16755200);b("n4","f4",16755200);b("p","n1",16711680);b("p","n2",16711680);b("p","n3",16711680);b("p","n4",16711680);b("u1","u2",43775);b("u2","u3",43775);b("u3","u1",43775);b("c","t",16777215);b("p","c",3355443);b("cn1","cn2",3355443);b("cn3","cn4",3355443);b("cf1","cf2",3355443);b("cf3","cf4",3355443);THREE.Line.call(this,d,e,THREE.LinePieces);this.camera=a;this.matrixWorld=a.matrixWorld;this.matrixAutoUpdate=!1;this.pointMap=f;this.update()};
THREE.CameraHelper.prototype=Object.create(THREE.Line.prototype);
THREE.CameraHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Camera,c=new THREE.Projector;return function(){function d(d,h,g,i){a.set(h,g,i);c.unprojectVector(a,b);d=e.pointMap[d];if(void 0!==d){h=0;for(g=d.length;h<g;h++)e.geometry.vertices[d[h]].copy(a)}}var e=this;b.projectionMatrix.copy(this.camera.projectionMatrix);d("c",0,0,-1);d("t",0,0,1);d("n1",-1,-1,-1);d("n2",1,-1,-1);d("n3",-1,1,-1);d("n4",1,1,-1);d("f1",-1,-1,1);d("f2",1,-1,1);d("f3",-1,1,1);d("f4",1,1,1);d("u1",
0.7,1.1,-1);d("u2",-0.7,1.1,-1);d("u3",0,2,-1);d("cf1",-1,0,1);d("cf2",1,0,1);d("cf3",0,-1,1);d("cf4",0,1,1);d("cn1",-1,0,-1);d("cn2",1,0,-1);d("cn3",0,-1,-1);d("cn4",0,1,-1);this.geometry.verticesNeedUpdate=!0}}();THREE.DirectionalLightHelper=function(a,b){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrixWorld=a.matrixWorld;this.matrixAutoUpdate=!1;var b=b||1,c=new THREE.PlaneGeometry(b,b),d=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});d.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.lightPlane=new THREE.Mesh(c,d);this.add(this.lightPlane);c=new THREE.Geometry;c.vertices.push(new THREE.Vector3);c.vertices.push(new THREE.Vector3);d=new THREE.LineBasicMaterial({fog:!1});
d.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.targetLine=new THREE.Line(c,d);this.add(this.targetLine);this.update()};THREE.DirectionalLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();this.targetLine.geometry.dispose();this.targetLine.material.dispose()};
THREE.DirectionalLightHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(){a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);c.subVectors(b,a);this.lightPlane.lookAt(c);this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.targetLine.geometry.vertices[1].copy(c);this.targetLine.geometry.verticesNeedUpdate=!0;this.targetLine.material.color.copy(this.lightPlane.material.color)}}();THREE.FaceNormalsHelper=function(a,b,c,d){this.object=a;this.size=b||1;for(var a=c||16776960,d=d||1,b=new THREE.Geometry,c=0,e=this.object.geometry.faces.length;c<e;c++)b.vertices.push(new THREE.Vector3),b.vertices.push(new THREE.Vector3);THREE.Line.call(this,b,new THREE.LineBasicMaterial({color:a,linewidth:d}),THREE.LinePieces);this.matrixAutoUpdate=!1;this.normalMatrix=new THREE.Matrix3;this.update()};THREE.FaceNormalsHelper.prototype=Object.create(THREE.Line.prototype);
THREE.FaceNormalsHelper.prototype.update=function(){var a=new THREE.Vector3;return function(){this.object.updateMatrixWorld(!0);this.normalMatrix.getNormalMatrix(this.object.matrixWorld);for(var b=this.geometry.vertices,c=this.object.geometry.faces,d=this.object.matrixWorld,e=0,f=c.length;e<f;e++){var h=c[e];a.copy(h.normal).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size);var g=2*e;b[g].copy(h.centroid).applyMatrix4(d);b[g+1].addVectors(b[g],a)}this.geometry.verticesNeedUpdate=
!0;return this}}();THREE.GridHelper=function(a,b){var c=new THREE.Geometry,d=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});this.color1=new THREE.Color(4473924);this.color2=new THREE.Color(8947848);for(var e=-a;e<=a;e+=b){c.vertices.push(new THREE.Vector3(-a,0,e),new THREE.Vector3(a,0,e),new THREE.Vector3(e,0,-a),new THREE.Vector3(e,0,a));var f=0===e?this.color1:this.color2;c.colors.push(f,f,f,f)}THREE.Line.call(this,c,d,THREE.LinePieces)};THREE.GridHelper.prototype=Object.create(THREE.Line.prototype);
THREE.GridHelper.prototype.setColors=function(a,b){this.color1.set(a);this.color2.set(b);this.geometry.colorsNeedUpdate=!0};THREE.HemisphereLightHelper=function(a,b){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrixWorld=a.matrixWorld;this.matrixAutoUpdate=!1;this.colors=[new THREE.Color,new THREE.Color];var c=new THREE.SphereGeometry(b,4,2);c.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));for(var d=0;8>d;d++)c.faces[d].color=this.colors[4>d?0:1];d=new THREE.MeshBasicMaterial({vertexColors:THREE.FaceColors,wireframe:!0});this.lightSphere=new THREE.Mesh(c,d);this.add(this.lightSphere);
this.update()};THREE.HemisphereLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose();this.lightSphere.material.dispose()};
THREE.HemisphereLightHelper.prototype.update=function(){var a=new THREE.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity);this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity);this.lightSphere.lookAt(a.setFromMatrixPosition(this.light.matrixWorld).negate());this.lightSphere.geometry.colorsNeedUpdate=!0}}();THREE.PointLightHelper=function(a,b){this.light=a;this.light.updateMatrixWorld();var c=new THREE.SphereGeometry(b,4,2),d=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});d.color.copy(this.light.color).multiplyScalar(this.light.intensity);THREE.Mesh.call(this,c,d);this.matrixWorld=this.light.matrixWorld;this.matrixAutoUpdate=!1};THREE.PointLightHelper.prototype=Object.create(THREE.Mesh.prototype);THREE.PointLightHelper.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};
THREE.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)};THREE.SpotLightHelper=function(a){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrixWorld=a.matrixWorld;this.matrixAutoUpdate=!1;a=new THREE.CylinderGeometry(0,1,1,8,1,!0);a.applyMatrix((new THREE.Matrix4).makeTranslation(0,-0.5,0));a.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));var b=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});this.cone=new THREE.Mesh(a,b);this.add(this.cone);this.update()};THREE.SpotLightHelper.prototype=Object.create(THREE.Object3D.prototype);
THREE.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};THREE.SpotLightHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(){var c=this.light.distance?this.light.distance:1E4,d=c*Math.tan(this.light.angle);this.cone.scale.set(d,d,c);a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(b.sub(a));this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}();THREE.VertexNormalsHelper=function(a,b,c,d){this.object=a;this.size=b||1;for(var b=c||16711680,d=d||1,c=new THREE.Geometry,a=a.geometry.faces,e=0,f=a.length;e<f;e++)for(var h=0,g=a[e].vertexNormals.length;h<g;h++)c.vertices.push(new THREE.Vector3),c.vertices.push(new THREE.Vector3);THREE.Line.call(this,c,new THREE.LineBasicMaterial({color:b,linewidth:d}),THREE.LinePieces);this.matrixAutoUpdate=!1;this.normalMatrix=new THREE.Matrix3;this.update()};THREE.VertexNormalsHelper.prototype=Object.create(THREE.Line.prototype);
THREE.VertexNormalsHelper.prototype.update=function(){var a=new THREE.Vector3;return function(){var b=["a","b","c","d"];this.object.updateMatrixWorld(!0);this.normalMatrix.getNormalMatrix(this.object.matrixWorld);for(var c=this.geometry.vertices,d=this.object.geometry.vertices,e=this.object.geometry.faces,f=this.object.matrixWorld,h=0,g=0,i=e.length;g<i;g++)for(var k=e[g],m=0,l=k.vertexNormals.length;m<l;m++){var p=k.vertexNormals[m];c[h].copy(d[k[b[m]]]).applyMatrix4(f);a.copy(p).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size);
a.add(c[h]);h+=1;c[h].copy(a);h+=1}this.geometry.verticesNeedUpdate=!0;return this}}();THREE.VertexTangentsHelper=function(a,b,c,d){this.object=a;this.size=b||1;for(var b=c||255,d=d||1,c=new THREE.Geometry,a=a.geometry.faces,e=0,f=a.length;e<f;e++)for(var h=0,g=a[e].vertexTangents.length;h<g;h++)c.vertices.push(new THREE.Vector3),c.vertices.push(new THREE.Vector3);THREE.Line.call(this,c,new THREE.LineBasicMaterial({color:b,linewidth:d}),THREE.LinePieces);this.matrixAutoUpdate=!1;this.update()};THREE.VertexTangentsHelper.prototype=Object.create(THREE.Line.prototype);
THREE.VertexTangentsHelper.prototype.update=function(){var a=new THREE.Vector3;return function(){var b=["a","b","c","d"];this.object.updateMatrixWorld(!0);for(var c=this.geometry.vertices,d=this.object.geometry.vertices,e=this.object.geometry.faces,f=this.object.matrixWorld,h=0,g=0,i=e.length;g<i;g++)for(var k=e[g],m=0,l=k.vertexTangents.length;m<l;m++){var p=k.vertexTangents[m];c[h].copy(d[k[b[m]]]).applyMatrix4(f);a.copy(p).transformDirection(f).multiplyScalar(this.size);a.add(c[h]);h+=1;c[h].copy(a);
h+=1}this.geometry.verticesNeedUpdate=!0;return this}}();THREE.WireframeHelper=function(a){var b=[0,0],c={},d=function(a,b){return a-b},e=["a","b","c","d"],f=new THREE.BufferGeometry,h=0;if(a.geometry instanceof THREE.Geometry){for(var g=a.geometry.vertices,i=a.geometry.faces,k=new Uint32Array(6*i.length),m=0,l=i.length;m<l;m++)for(var p=i[m],t=0;3>t;t++){b[0]=p[e[t]];b[1]=p[e[(t+1)%3]];b.sort(d);var s=b.toString();void 0===c[s]&&(k[2*h]=b[0],k[2*h+1]=b[1],c[s]=!0,h++)}f.addAttribute("position",Float32Array,2*h,3);b=f.attributes.position.array;m=0;for(l=
h;m<l;m++)for(t=0;2>t;t++)h=g[k[2*m+t]],e=6*m+3*t,b[e+0]=h.x,b[e+1]=h.y,b[e+2]=h.z}else{g=a.geometry.attributes.position.array;i=a.geometry.attributes.index.array;k=new Uint32Array(2*i.length);m=0;for(l=i.length/3;m<l;m++)for(t=0;3>t;t++)e=3*m,b[0]=i[e+t],b[1]=i[e+(t+1)%3],b.sort(d),s=b.toString(),void 0===c[s]&&(k[2*h]=b[0],k[2*h+1]=b[1],c[s]=!0,h++);f.addAttribute("position",Float32Array,2*h,3);b=f.attributes.position.array;m=0;for(l=h;m<l;m++)for(t=0;2>t;t++)e=6*m+3*t,h=3*k[2*m+t],b[e+0]=g[h],
b[e+1]=g[h+1],b[e+2]=g[h+2]}THREE.Line.call(this,f,new THREE.LineBasicMaterial({color:16777215}),THREE.LinePieces);this.matrixAutoUpdate=!1;this.matrixWorld=a.matrixWorld};THREE.WireframeHelper.prototype=Object.create(THREE.Line.prototype);THREE.ImmediateRenderObject=function(){THREE.Object3D.call(this);this.render=function(){}};THREE.ImmediateRenderObject.prototype=Object.create(THREE.Object3D.prototype);THREE.LensFlare=function(a,b,c,d,e){THREE.Object3D.call(this);this.lensFlares=[];this.positionScreen=new THREE.Vector3;this.customUpdateCallback=void 0;void 0!==a&&this.add(a,b,c,d,e)};THREE.LensFlare.prototype=Object.create(THREE.Object3D.prototype);
THREE.LensFlare.prototype.add=function(a,b,c,d,e,f){void 0===b&&(b=-1);void 0===c&&(c=0);void 0===f&&(f=1);void 0===e&&(e=new THREE.Color(16777215));void 0===d&&(d=THREE.NormalBlending);c=Math.min(c,Math.max(0,c));this.lensFlares.push({texture:a,size:b,distance:c,x:0,y:0,z:0,scale:1,rotation:1,opacity:f,color:e,blending:d})};
THREE.LensFlare.prototype.updateLensFlares=function(){var a,b=this.lensFlares.length,c,d=2*-this.positionScreen.x,e=2*-this.positionScreen.y;for(a=0;a<b;a++)c=this.lensFlares[a],c.x=this.positionScreen.x+d*c.distance,c.y=this.positionScreen.y+e*c.distance,c.wantedRotation=0.25*c.x*Math.PI,c.rotation+=0.25*(c.wantedRotation-c.rotation)};THREE.MorphBlendMesh=function(a,b){THREE.Mesh.call(this,a,b);this.animationsMap={};this.animationsList=[];var c=this.geometry.morphTargets.length;this.createAnimation("__default",0,c-1,c/1);this.setAnimationWeight("__default",1)};THREE.MorphBlendMesh.prototype=Object.create(THREE.Mesh.prototype);
THREE.MorphBlendMesh.prototype.createAnimation=function(a,b,c,d){b={startFrame:b,endFrame:c,length:c-b+1,fps:d,duration:(c-b)/d,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[a]=b;this.animationsList.push(b)};
THREE.MorphBlendMesh.prototype.autoCreateAnimations=function(a){for(var b=/([a-z]+)(\d+)/,c,d={},e=this.geometry,f=0,h=e.morphTargets.length;f<h;f++){var g=e.morphTargets[f].name.match(b);if(g&&1<g.length){var i=g[1];d[i]||(d[i]={start:Infinity,end:-Infinity});g=d[i];f<g.start&&(g.start=f);f>g.end&&(g.end=f);c||(c=i)}}for(i in d)g=d[i],this.createAnimation(i,g.start,g.end,a);this.firstAnimation=c};
THREE.MorphBlendMesh.prototype.setAnimationDirectionForward=function(a){if(a=this.animationsMap[a])a.direction=1,a.directionBackwards=!1};THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(a){if(a=this.animationsMap[a])a.direction=-1,a.directionBackwards=!0};THREE.MorphBlendMesh.prototype.setAnimationFPS=function(a,b){var c=this.animationsMap[a];c&&(c.fps=b,c.duration=(c.end-c.start)/c.fps)};
THREE.MorphBlendMesh.prototype.setAnimationDuration=function(a,b){var c=this.animationsMap[a];c&&(c.duration=b,c.fps=(c.end-c.start)/c.duration)};THREE.MorphBlendMesh.prototype.setAnimationWeight=function(a,b){var c=this.animationsMap[a];c&&(c.weight=b)};THREE.MorphBlendMesh.prototype.setAnimationTime=function(a,b){var c=this.animationsMap[a];c&&(c.time=b)};THREE.MorphBlendMesh.prototype.getAnimationTime=function(a){var b=0;if(a=this.animationsMap[a])b=a.time;return b};
THREE.MorphBlendMesh.prototype.getAnimationDuration=function(a){var b=-1;if(a=this.animationsMap[a])b=a.duration;return b};THREE.MorphBlendMesh.prototype.playAnimation=function(a){var b=this.animationsMap[a];b?(b.time=0,b.active=!0):console.warn("animation["+a+"] undefined")};THREE.MorphBlendMesh.prototype.stopAnimation=function(a){if(a=this.animationsMap[a])a.active=!1};
THREE.MorphBlendMesh.prototype.update=function(a){for(var b=0,c=this.animationsList.length;b<c;b++){var d=this.animationsList[b];if(d.active){var e=d.duration/d.length;d.time+=d.direction*a;if(d.mirroredLoop){if(d.time>d.duration||0>d.time)d.direction*=-1,d.time>d.duration&&(d.time=d.duration,d.directionBackwards=!0),0>d.time&&(d.time=0,d.directionBackwards=!1)}else d.time%=d.duration,0>d.time&&(d.time+=d.duration);var f=d.startFrame+THREE.Math.clamp(Math.floor(d.time/e),0,d.length-1),h=d.weight;
f!==d.currentFrame&&(this.morphTargetInfluences[d.lastFrame]=0,this.morphTargetInfluences[d.currentFrame]=1*h,this.morphTargetInfluences[f]=0,d.lastFrame=d.currentFrame,d.currentFrame=f);e=d.time%e/e;d.directionBackwards&&(e=1-e);this.morphTargetInfluences[d.currentFrame]=e*h;this.morphTargetInfluences[d.lastFrame]=(1-e)*h}}};THREE.LensFlarePlugin=function(){function a(a,c){var d=b.createProgram(),e=b.createShader(b.FRAGMENT_SHADER),f=b.createShader(b.VERTEX_SHADER),g="precision "+c+" float;\n";b.shaderSource(e,g+a.fragmentShader);b.shaderSource(f,g+a.vertexShader);b.compileShader(e);b.compileShader(f);b.attachShader(d,e);b.attachShader(d,f);b.linkProgram(d);return d}var b,c,d,e,f,h,g,i,k,m,l,p,t;this.init=function(s){b=s.context;c=s;d=s.getPrecision();e=new Float32Array(16);f=new Uint16Array(6);s=0;e[s++]=-1;e[s++]=-1;
e[s++]=0;e[s++]=0;e[s++]=1;e[s++]=-1;e[s++]=1;e[s++]=0;e[s++]=1;e[s++]=1;e[s++]=1;e[s++]=1;e[s++]=-1;e[s++]=1;e[s++]=0;e[s++]=1;s=0;f[s++]=0;f[s++]=1;f[s++]=2;f[s++]=0;f[s++]=2;f[s++]=3;h=b.createBuffer();g=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,h);b.bufferData(b.ARRAY_BUFFER,e,b.STATIC_DRAW);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,g);b.bufferData(b.ELEMENT_ARRAY_BUFFER,f,b.STATIC_DRAW);i=b.createTexture();k=b.createTexture();b.bindTexture(b.TEXTURE_2D,i);b.texImage2D(b.TEXTURE_2D,0,b.RGB,16,16,
0,b.RGB,b.UNSIGNED_BYTE,null);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.bindTexture(b.TEXTURE_2D,k);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,16,16,0,b.RGBA,b.UNSIGNED_BYTE,null);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);
b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);0>=b.getParameter(b.MAX_VERTEX_TEXTURE_IMAGE_UNITS)?(m=!1,l=a(THREE.ShaderFlares.lensFlare,d)):(m=!0,l=a(THREE.ShaderFlares.lensFlareVertexTexture,d));p={};t={};p.vertex=b.getAttribLocation(l,"position");p.uv=b.getAttribLocation(l,"uv");t.renderType=b.getUniformLocation(l,"renderType");t.map=b.getUniformLocation(l,"map");t.occlusionMap=b.getUniformLocation(l,"occlusionMap");t.opacity=
b.getUniformLocation(l,"opacity");t.color=b.getUniformLocation(l,"color");t.scale=b.getUniformLocation(l,"scale");t.rotation=b.getUniformLocation(l,"rotation");t.screenPosition=b.getUniformLocation(l,"screenPosition")};this.render=function(a,d,e,f){var a=a.__webglFlares,r=a.length;if(r){var v=new THREE.Vector3,z=f/e,G=0.5*e,w=0.5*f,y=16/f,E=new THREE.Vector2(y*z,y),A=new THREE.Vector3(1,1,0),K=new THREE.Vector2(1,1),D=t,y=p;b.useProgram(l);b.enableVertexAttribArray(p.vertex);b.enableVertexAttribArray(p.uv);
b.uniform1i(D.occlusionMap,0);b.uniform1i(D.map,1);b.bindBuffer(b.ARRAY_BUFFER,h);b.vertexAttribPointer(y.vertex,2,b.FLOAT,!1,16,0);b.vertexAttribPointer(y.uv,2,b.FLOAT,!1,16,8);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,g);b.disable(b.CULL_FACE);b.depthMask(!1);var F,O,x,I,B;for(F=0;F<r;F++)if(y=16/f,E.set(y*z,y),I=a[F],v.set(I.matrixWorld.elements[12],I.matrixWorld.elements[13],I.matrixWorld.elements[14]),v.applyMatrix4(d.matrixWorldInverse),v.applyProjection(d.projectionMatrix),A.copy(v),K.x=A.x*G+G,
K.y=A.y*w+w,m||0<K.x&&K.x<e&&0<K.y&&K.y<f){b.activeTexture(b.TEXTURE1);b.bindTexture(b.TEXTURE_2D,i);b.copyTexImage2D(b.TEXTURE_2D,0,b.RGB,K.x-8,K.y-8,16,16,0);b.uniform1i(D.renderType,0);b.uniform2f(D.scale,E.x,E.y);b.uniform3f(D.screenPosition,A.x,A.y,A.z);b.disable(b.BLEND);b.enable(b.DEPTH_TEST);b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0);b.activeTexture(b.TEXTURE0);b.bindTexture(b.TEXTURE_2D,k);b.copyTexImage2D(b.TEXTURE_2D,0,b.RGBA,K.x-8,K.y-8,16,16,0);b.uniform1i(D.renderType,1);b.disable(b.DEPTH_TEST);
b.activeTexture(b.TEXTURE1);b.bindTexture(b.TEXTURE_2D,i);b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0);I.positionScreen.copy(A);I.customUpdateCallback?I.customUpdateCallback(I):I.updateLensFlares();b.uniform1i(D.renderType,2);b.enable(b.BLEND);O=0;for(x=I.lensFlares.length;O<x;O++)B=I.lensFlares[O],0.001<B.opacity&&0.001<B.scale&&(A.x=B.x,A.y=B.y,A.z=B.z,y=B.size*B.scale/f,E.x=y*z,E.y=y,b.uniform3f(D.screenPosition,A.x,A.y,A.z),b.uniform2f(D.scale,E.x,E.y),b.uniform1f(D.rotation,B.rotation),b.uniform1f(D.opacity,
B.opacity),b.uniform3f(D.color,B.color.r,B.color.g,B.color.b),c.setBlending(B.blending,B.blendEquation,B.blendSrc,B.blendDst),c.setTexture(B.texture,1),b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0))}b.enable(b.CULL_FACE);b.enable(b.DEPTH_TEST);b.depthMask(!0)}}};THREE.ShadowMapPlugin=function(){var a,b,c,d,e,f,h=new THREE.Frustum,g=new THREE.Matrix4,i=new THREE.Vector3,k=new THREE.Vector3,m=new THREE.Vector3;this.init=function(g){a=g.context;b=g;var g=THREE.ShaderLib.depthRGBA,h=THREE.UniformsUtils.clone(g.uniforms);c=new THREE.ShaderMaterial({fragmentShader:g.fragmentShader,vertexShader:g.vertexShader,uniforms:h});d=new THREE.ShaderMaterial({fragmentShader:g.fragmentShader,vertexShader:g.vertexShader,uniforms:h,morphTargets:!0});e=new THREE.ShaderMaterial({fragmentShader:g.fragmentShader,
vertexShader:g.vertexShader,uniforms:h,skinning:!0});f=new THREE.ShaderMaterial({fragmentShader:g.fragmentShader,vertexShader:g.vertexShader,uniforms:h,morphTargets:!0,skinning:!0});c._shadowPass=!0;d._shadowPass=!0;e._shadowPass=!0;f._shadowPass=!0};this.render=function(a,c){b.shadowMapEnabled&&b.shadowMapAutoUpdate&&this.update(a,c)};this.update=function(l,p){var t,s,q,n,u,r,v,z,G,w=[];n=0;a.clearColor(1,1,1,1);a.disable(a.BLEND);a.enable(a.CULL_FACE);a.frontFace(a.CCW);b.shadowMapCullFace===THREE.CullFaceFront?
a.cullFace(a.FRONT):a.cullFace(a.BACK);b.setDepthTest(!0);t=0;for(s=l.__lights.length;t<s;t++)if(q=l.__lights[t],q.castShadow)if(q instanceof THREE.DirectionalLight&&q.shadowCascade)for(u=0;u<q.shadowCascadeCount;u++){var y;if(q.shadowCascadeArray[u])y=q.shadowCascadeArray[u];else{G=q;v=u;y=new THREE.DirectionalLight;y.isVirtual=!0;y.onlyShadow=!0;y.castShadow=!0;y.shadowCameraNear=G.shadowCameraNear;y.shadowCameraFar=G.shadowCameraFar;y.shadowCameraLeft=G.shadowCameraLeft;y.shadowCameraRight=G.shadowCameraRight;
y.shadowCameraBottom=G.shadowCameraBottom;y.shadowCameraTop=G.shadowCameraTop;y.shadowCameraVisible=G.shadowCameraVisible;y.shadowDarkness=G.shadowDarkness;y.shadowBias=G.shadowCascadeBias[v];y.shadowMapWidth=G.shadowCascadeWidth[v];y.shadowMapHeight=G.shadowCascadeHeight[v];y.pointsWorld=[];y.pointsFrustum=[];z=y.pointsWorld;r=y.pointsFrustum;for(var E=0;8>E;E++)z[E]=new THREE.Vector3,r[E]=new THREE.Vector3;z=G.shadowCascadeNearZ[v];G=G.shadowCascadeFarZ[v];r[0].set(-1,-1,z);r[1].set(1,-1,z);r[2].set(-1,
1,z);r[3].set(1,1,z);r[4].set(-1,-1,G);r[5].set(1,-1,G);r[6].set(-1,1,G);r[7].set(1,1,G);y.originalCamera=p;r=new THREE.Gyroscope;r.position=q.shadowCascadeOffset;r.add(y);r.add(y.target);p.add(r);q.shadowCascadeArray[u]=y;console.log("Created virtualLight",y)}v=q;z=u;G=v.shadowCascadeArray[z];G.position.copy(v.position);G.target.position.copy(v.target.position);G.lookAt(G.target);G.shadowCameraVisible=v.shadowCameraVisible;G.shadowDarkness=v.shadowDarkness;G.shadowBias=v.shadowCascadeBias[z];r=v.shadowCascadeNearZ[z];
v=v.shadowCascadeFarZ[z];G=G.pointsFrustum;G[0].z=r;G[1].z=r;G[2].z=r;G[3].z=r;G[4].z=v;G[5].z=v;G[6].z=v;G[7].z=v;w[n]=y;n++}else w[n]=q,n++;t=0;for(s=w.length;t<s;t++){q=w[t];q.shadowMap||(u=THREE.LinearFilter,b.shadowMapType===THREE.PCFSoftShadowMap&&(u=THREE.NearestFilter),q.shadowMap=new THREE.WebGLRenderTarget(q.shadowMapWidth,q.shadowMapHeight,{minFilter:u,magFilter:u,format:THREE.RGBAFormat}),q.shadowMapSize=new THREE.Vector2(q.shadowMapWidth,q.shadowMapHeight),q.shadowMatrix=new THREE.Matrix4);
if(!q.shadowCamera){if(q instanceof THREE.SpotLight)q.shadowCamera=new THREE.PerspectiveCamera(q.shadowCameraFov,q.shadowMapWidth/q.shadowMapHeight,q.shadowCameraNear,q.shadowCameraFar);else if(q instanceof THREE.DirectionalLight)q.shadowCamera=new THREE.OrthographicCamera(q.shadowCameraLeft,q.shadowCameraRight,q.shadowCameraTop,q.shadowCameraBottom,q.shadowCameraNear,q.shadowCameraFar);else{console.error("Unsupported light type for shadow");continue}l.add(q.shadowCamera);!0===l.autoUpdate&&l.updateMatrixWorld()}q.shadowCameraVisible&&
!q.cameraHelper&&(q.cameraHelper=new THREE.CameraHelper(q.shadowCamera),q.shadowCamera.add(q.cameraHelper));if(q.isVirtual&&y.originalCamera==p){u=p;n=q.shadowCamera;r=q.pointsFrustum;G=q.pointsWorld;i.set(Infinity,Infinity,Infinity);k.set(-Infinity,-Infinity,-Infinity);for(v=0;8>v;v++)z=G[v],z.copy(r[v]),THREE.ShadowMapPlugin.__projector.unprojectVector(z,u),z.applyMatrix4(n.matrixWorldInverse),z.x<i.x&&(i.x=z.x),z.x>k.x&&(k.x=z.x),z.y<i.y&&(i.y=z.y),z.y>k.y&&(k.y=z.y),z.z<i.z&&(i.z=z.z),z.z>k.z&&
(k.z=z.z);n.left=i.x;n.right=k.x;n.top=k.y;n.bottom=i.y;n.updateProjectionMatrix()}n=q.shadowMap;r=q.shadowMatrix;u=q.shadowCamera;u.position.setFromMatrixPosition(q.matrixWorld);m.setFromMatrixPosition(q.target.matrixWorld);u.lookAt(m);u.updateMatrixWorld();u.matrixWorldInverse.getInverse(u.matrixWorld);q.cameraHelper&&(q.cameraHelper.visible=q.shadowCameraVisible);q.shadowCameraVisible&&q.cameraHelper.update();r.set(0.5,0,0,0.5,0,0.5,0,0.5,0,0,0.5,0.5,0,0,0,1);r.multiply(u.projectionMatrix);r.multiply(u.matrixWorldInverse);
g.multiplyMatrices(u.projectionMatrix,u.matrixWorldInverse);h.setFromMatrix(g);b.setRenderTarget(n);b.clear();G=l.__webglObjects;q=0;for(n=G.length;q<n;q++)if(v=G[q],r=v.object,v.render=!1,r.visible&&r.castShadow&&(!(r instanceof THREE.Mesh||r instanceof THREE.ParticleSystem)||!r.frustumCulled||h.intersectsObject(r)))r._modelViewMatrix.multiplyMatrices(u.matrixWorldInverse,r.matrixWorld),v.render=!0;q=0;for(n=G.length;q<n;q++)v=G[q],v.render&&(r=v.object,v=v.buffer,E=r.material instanceof THREE.MeshFaceMaterial?
r.material.materials[0]:r.material,z=0<r.geometry.morphTargets.length&&E.morphTargets,E=r instanceof THREE.SkinnedMesh&&E.skinning,z=r.customDepthMaterial?r.customDepthMaterial:E?z?f:e:z?d:c,v instanceof THREE.BufferGeometry?b.renderBufferDirect(u,l.__lights,null,z,v,r):b.renderBuffer(u,l.__lights,null,z,v,r));G=l.__webglObjectsImmediate;q=0;for(n=G.length;q<n;q++)v=G[q],r=v.object,r.visible&&r.castShadow&&(r._modelViewMatrix.multiplyMatrices(u.matrixWorldInverse,r.matrixWorld),b.renderImmediateObject(u,
l.__lights,null,c,r))}t=b.getClearColor();s=b.getClearAlpha();a.clearColor(t.r,t.g,t.b,s);a.enable(a.BLEND);b.shadowMapCullFace===THREE.CullFaceFront&&a.cullFace(a.BACK)}};THREE.ShadowMapPlugin.__projector=new THREE.Projector;THREE.SpritePlugin=function(){var a,b,c,d,e,f,h,g,i,k,m,l,p,t,s,q,n;function u(a,b){return a.z!==b.z?b.z-a.z:b.id-a.id}var r,v,z,G,w,y,E,A;this.init=function(u){r=u.context;v=u;G=new Float32Array([-0.5,-0.5,0,0,0.5,-0.5,1,0,0.5,0.5,1,1,-0.5,0.5,0,1]);w=new Uint16Array([0,1,2,0,2,3]);y=r.createBuffer();E=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,y);r.bufferData(r.ARRAY_BUFFER,G,r.STATIC_DRAW);r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,E);r.bufferData(r.ELEMENT_ARRAY_BUFFER,w,r.STATIC_DRAW);var u=r.createProgram(),
D=r.createShader(r.VERTEX_SHADER),F=r.createShader(r.FRAGMENT_SHADER);r.shaderSource(D,["precision "+v.getPrecision()+" float;","uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uvOffset + uv * uvScale;\nvec2 alignedPosition = position * scale;\nvec2 rotatedPosition;\nrotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\nrotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\nvec4 finalPosition;\nfinalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\nfinalPosition.xy += rotatedPosition;\nfinalPosition = projectionMatrix * finalPosition;\ngl_Position = finalPosition;\n}"].join("\n"));
r.shaderSource(F,["precision "+v.getPrecision()+" float;","uniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvoid main() {\nvec4 texture = texture2D( map, vUV );\nif ( texture.a < alphaTest ) discard;\ngl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\nif ( fogType > 0 ) {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat fogFactor = 0.0;\nif ( fogType == 1 ) {\nfogFactor = smoothstep( fogNear, fogFar, depth );\n} else {\nconst float LOG2 = 1.442695;\nfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n}\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}\n}"].join("\n"));
r.compileShader(D);r.compileShader(F);r.attachShader(u,D);r.attachShader(u,F);r.linkProgram(u);A=u;q=r.getAttribLocation(A,"position");n=r.getAttribLocation(A,"uv");a=r.getUniformLocation(A,"uvOffset");b=r.getUniformLocation(A,"uvScale");c=r.getUniformLocation(A,"rotation");d=r.getUniformLocation(A,"scale");e=r.getUniformLocation(A,"color");f=r.getUniformLocation(A,"map");h=r.getUniformLocation(A,"opacity");g=r.getUniformLocation(A,"modelViewMatrix");i=r.getUniformLocation(A,"projectionMatrix");k=
r.getUniformLocation(A,"fogType");m=r.getUniformLocation(A,"fogDensity");l=r.getUniformLocation(A,"fogNear");p=r.getUniformLocation(A,"fogFar");t=r.getUniformLocation(A,"fogColor");s=r.getUniformLocation(A,"alphaTest");u=document.createElement("canvas");u.width=8;u.height=8;D=u.getContext("2d");D.fillStyle="#ffffff";D.fillRect(0,0,u.width,u.height);z=new THREE.Texture(u);z.needsUpdate=!0};this.render=function(w,D){var F=w.__webglSprites,G=F.length;if(G){r.useProgram(A);r.enableVertexAttribArray(q);
r.enableVertexAttribArray(n);r.disable(r.CULL_FACE);r.enable(r.BLEND);r.bindBuffer(r.ARRAY_BUFFER,y);r.vertexAttribPointer(q,2,r.FLOAT,!1,16,0);r.vertexAttribPointer(n,2,r.FLOAT,!1,16,8);r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,E);r.uniformMatrix4fv(i,!1,D.projectionMatrix.elements);r.activeTexture(r.TEXTURE0);r.uniform1i(f,0);var x=0,I=0,B=w.fog;B?(r.uniform3f(t,B.color.r,B.color.g,B.color.b),B instanceof THREE.Fog?(r.uniform1f(l,B.near),r.uniform1f(p,B.far),r.uniform1i(k,1),I=x=1):B instanceof THREE.FogExp2&&
(r.uniform1f(m,B.density),r.uniform1i(k,2),I=x=2)):(r.uniform1i(k,0),I=x=0);for(var M,J,ca=[],B=0;B<G;B++)M=F[B],!1!==M.visible&&(M._modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,M.matrixWorld),M.z=-M._modelViewMatrix.elements[14]);F.sort(u);for(B=0;B<G;B++)M=F[B],!1!==M.visible&&(J=M.material,r.uniform1f(s,J.alphaTest),r.uniformMatrix4fv(g,!1,M._modelViewMatrix.elements),ca[0]=M.scale.x,ca[1]=M.scale.y,M=w.fog&&J.fog?I:0,x!==M&&(r.uniform1i(k,M),x=M),r.uniform2f(b,J.uvScale.x,J.uvScale.y),
r.uniform2f(a,J.uvOffset.x,J.uvOffset.y),r.uniform1f(h,J.opacity),r.uniform3f(e,J.color.r,J.color.g,J.color.b),r.uniform1f(c,J.rotation),r.uniform2fv(d,ca),v.setBlending(J.blending,J.blendEquation,J.blendSrc,J.blendDst),v.setDepthTest(J.depthTest),v.setDepthWrite(J.depthWrite),J.map&&J.map.image&&J.map.image.width?v.setTexture(J.map,0):v.setTexture(z,0),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0));r.enable(r.CULL_FACE)}}};THREE.DepthPassPlugin=function(){this.enabled=!1;this.renderTarget=null;var a,b,c,d,e,f,h=new THREE.Frustum,g=new THREE.Matrix4;this.init=function(g){a=g.context;b=g;var g=THREE.ShaderLib.depthRGBA,h=THREE.UniformsUtils.clone(g.uniforms);c=new THREE.ShaderMaterial({fragmentShader:g.fragmentShader,vertexShader:g.vertexShader,uniforms:h});d=new THREE.ShaderMaterial({fragmentShader:g.fragmentShader,vertexShader:g.vertexShader,uniforms:h,morphTargets:!0});e=new THREE.ShaderMaterial({fragmentShader:g.fragmentShader,
vertexShader:g.vertexShader,uniforms:h,skinning:!0});f=new THREE.ShaderMaterial({fragmentShader:g.fragmentShader,vertexShader:g.vertexShader,uniforms:h,morphTargets:!0,skinning:!0});c._shadowPass=!0;d._shadowPass=!0;e._shadowPass=!0;f._shadowPass=!0};this.render=function(a,b){this.enabled&&this.update(a,b)};this.update=function(i,k){var m,l,p,t,s,q;a.clearColor(1,1,1,1);a.disable(a.BLEND);b.setDepthTest(!0);!0===i.autoUpdate&&i.updateMatrixWorld();k.matrixWorldInverse.getInverse(k.matrixWorld);g.multiplyMatrices(k.projectionMatrix,
k.matrixWorldInverse);h.setFromMatrix(g);b.setRenderTarget(this.renderTarget);b.clear();q=i.__webglObjects;m=0;for(l=q.length;m<l;m++)if(p=q[m],s=p.object,p.render=!1,s.visible&&(!(s instanceof THREE.Mesh||s instanceof THREE.ParticleSystem)||!s.frustumCulled||h.intersectsObject(s)))s._modelViewMatrix.multiplyMatrices(k.matrixWorldInverse,s.matrixWorld),p.render=!0;var n;m=0;for(l=q.length;m<l;m++)if(p=q[m],p.render&&(s=p.object,p=p.buffer,!(s instanceof THREE.ParticleSystem)||s.customDepthMaterial))(n=
s.material instanceof THREE.MeshFaceMaterial?s.material.materials[0]:s.material)&&b.setMaterialFaces(s.material),t=0<s.geometry.morphTargets.length&&n.morphTargets,n=s instanceof THREE.SkinnedMesh&&n.skinning,t=s.customDepthMaterial?s.customDepthMaterial:n?t?f:e:t?d:c,p instanceof THREE.BufferGeometry?b.renderBufferDirect(k,i.__lights,null,t,p,s):b.renderBuffer(k,i.__lights,null,t,p,s);q=i.__webglObjectsImmediate;m=0;for(l=q.length;m<l;m++)p=q[m],s=p.object,s.visible&&(s._modelViewMatrix.multiplyMatrices(k.matrixWorldInverse,
s.matrixWorld),b.renderImmediateObject(k,i.__lights,null,c,s));m=b.getClearColor();l=b.getClearAlpha();a.clearColor(m.r,m.g,m.b,l);a.enable(a.BLEND)}};THREE.ShaderFlares={lensFlareVertexTexture:{vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility =        visibility.r / 9.0;\nvVisibility *= 1.0 - visibility.g / 9.0;\nvVisibility *=       visibility.b / 9.0;\nvVisibility *= 1.0 - visibility.a / 9.0;\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",
fragmentShader:"uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"},lensFlare:{vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",
fragmentShader:"precision mediump float;\nuniform lowp int renderType;\nuniform sampler2D map;\nuniform sampler2D occlusionMap;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nfloat visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;\nvisibility = ( 1.0 - visibility / 4.0 );\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * visibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"}};

// This THREEx helper makes it easy to handle window resize.
// It will update renderer and camera when window is resized.
//
// # Usage
//
// **Step 1**: Start updating renderer and camera
//
// ```var windowResize = new THREEx.WindowResize(aRenderer, aCamera)```
//    
// **Step 2**: stop updating renderer and camera
//
// ```windowResize.destroy()```
// # Code

//

/** @namespace */
var THREEx	= THREEx || {}

/**
 * Update renderer and camera when the window is resized
 * 
 * @param {Object} renderer the renderer to update
 * @param {Object} Camera the camera to update
 * @param {Function} dimension callback for renderer size
*/
THREEx.WindowResize	= function(renderer, camera, dimension){
	dimension 	= dimension || function(){ return { width: window.innerWidth, height: window.innerHeight } }
	var callback	= function(){
		// fetch target renderer size
		var rendererSize = dimension();
		// notify the renderer of the size change
		renderer.setSize( rendererSize.width, rendererSize.height )
		// update the camera
		camera.aspect	= rendererSize.width / rendererSize.height
		camera.updateProjectionMatrix()
	}
	// bind the resize event
	window.addEventListener('resize', callback, false)
	// return .stop() the function to stop watching window resize
	return {
		trigger	: function(){
			callback()
		},
		/**
		 * Stop watching window resize
		*/
		destroy	: function(){
			window.removeEventListener('resize', callback)
		}
	}
}

angular.module('VirtualBookshelf')
.factory('BookMaterial', function () {
	var BookMaterial = function(mapImage, bumpMapImage, specularMapImage, coverMapImage) {
		var defines = {};
		var uniforms;
		var parameters;

        var map;
        var bumpMap;
        var specularMap;
        var coverMap;
		
		uniforms = THREE.UniformsUtils.merge([
			THREE.UniformsLib.common,
			THREE.UniformsLib.bump,
			THREE.UniformsLib.fog,
			THREE.UniformsLib.lights
		]);

		uniforms.shininess = {type: 'f', value: 30};
		defines.PHONG = true;

		if(mapImage) {
			map = new THREE.Texture(mapImage);
			map.needsUpdate = true;
			uniforms.map = {type: 't', value: map};
			this.map = true;
		}
		if(bumpMapImage) {
			bumpMap = new THREE.Texture(bumpMapImage);
			bumpMap.needsUpdate = true;
			uniforms.bumpMap = {type: 't', value: bumpMap};
			uniforms.bumpScale.value = 0.005;
			this.bumpMap = true;
		}
		if(specularMapImage) {
			specularMap = new THREE.Texture(specularMapImage);
			specularMap.needsUpdate = true;
			uniforms.specular = {type: 'c', value: new THREE.Color(0x555555)};
			uniforms.specularMap = {type: 't', value: specularMap};
			this.specularMap = true;
		}
        if(coverMapImage) {
			coverMap = new THREE.Texture(coverMapImage);
			coverMap.needsUpdate = true;
			uniforms.coverMap = {type: 't', value: coverMap};
			defines.USE_COVER = true;
        }

		parameters = {
			vertexShader: vertexShader,	
			fragmentShader: fragmentShader,
			uniforms: uniforms,
			defines: defines,
			lights: true,
			fog: true
		};

		THREE.ShaderMaterial.call(this, parameters);
	};

	BookMaterial.prototype = Object.create(THREE.ShaderMaterial.prototype);

	BookMaterial.prototype.constructor = THREE.BookMaterial;

	var vertexShader = [
		'varying vec3 vViewPosition;',
		'varying vec3 vNormal;',

		THREE.ShaderChunk.map_pars_vertex,
		THREE.ShaderChunk.lights_phong_pars_vertex,
		THREE.ShaderChunk.color_pars_vertex,

		'void main() {',
			THREE.ShaderChunk.map_vertex,
			THREE.ShaderChunk.color_vertex,
			THREE.ShaderChunk.defaultnormal_vertex,
			'vNormal = normalize(transformedNormal);',
			THREE.ShaderChunk.default_vertex,
			'vViewPosition = -mvPosition.xyz;',
			THREE.ShaderChunk.worldpos_vertex,
			THREE.ShaderChunk.lights_phong_vertex,
		'}'
	].join('\n');

	var fragmentShader = [
		'uniform vec3 diffuse;',
		'uniform float opacity;',

		'uniform vec3 ambient;',
		'uniform vec3 emissive;',
		'uniform vec3 specular;',
		'uniform float shininess;',

		'uniform sampler2D coverMap;',

		THREE.ShaderChunk.color_pars_fragment,
		THREE.ShaderChunk.map_pars_fragment,
		THREE.ShaderChunk.fog_pars_fragment,
		THREE.ShaderChunk.lights_phong_pars_fragment,
		THREE.ShaderChunk.bumpmap_pars_fragment,
		THREE.ShaderChunk.specularmap_pars_fragment,

		'void main() {',
			'vec4 testcolor = vec4(1.0, 1.0, 1.0, 1.0);',
			'float eps = 0.004;',
			'vec4 baseColor  = texture2D(map, vUv);',

			'#ifdef USE_COVER',
		    	'vec4 coverColor = texture2D(coverMap, vUv * vec2(2.3, 1.3) - vec2(1.3, 0.3));',
			    'if(vUv.y > 0.23 && (vUv.x > 0.57 || (all(greaterThanEqual(baseColor,testcolor-eps)) && all(lessThanEqual(baseColor,testcolor+eps)))))',
			    	'gl_FragColor = coverColor;',
			    'else',
			    	'gl_FragColor = baseColor;',
			'#else',
		    	'gl_FragColor = baseColor;',
			'#endif',

			THREE.ShaderChunk.specularmap_fragment,
			THREE.ShaderChunk.lights_phong_fragment,
			THREE.ShaderChunk.color_fragment,
			THREE.ShaderChunk.fog_fragment,
		'}'		
	].join('\n');

	return BookMaterial;
});
angular.module('VirtualBookshelf')
.factory('BaseObject', function (subclassOf) {
	var BaseObject = function(dataObject, geometry, material) {
		THREE.Mesh.call(this, geometry, material);

		this.dataObject = dataObject || {};
		this.dataObject.rotation = this.dataObject.rotation || [0, 0, 0];
		
		this.id = this.dataObject.id;
		this.position = new THREE.Vector3(this.dataObject.pos_x, this.dataObject.pos_y, this.dataObject.pos_z);
		this.rotation.order = 'XYZ';
		this.rotation.fromArray(this.dataObject.rotation.map(Number));

		this.updateBoundingBox();		
	};
	
	BaseObject.prototype = subclassOf(THREE.Mesh);

	BaseObject.prototype.getType = function() {
		return this.type;
	};

	BaseObject.prototype.isOutOfParrent = function() {
		return Math.abs(this.boundingBox.center.x - this.parent.boundingBox.center.x) > (this.parent.boundingBox.radius.x - this.boundingBox.radius.x) ||
				Math.abs(this.boundingBox.center.z - this.parent.boundingBox.center.z) > (this.parent.boundingBox.radius.z - this.boundingBox.radius.z);
	};

	BaseObject.prototype.isCollided = function() {
		var
			result,
			targets,
			target,
			i;

		this.updateBoundingBox();

		result = this.isOutOfParrent();
		targets = this.parent.children;

		if(!result) {
			for(i = targets.length - 1; i >= 0; i--) {
				target = targets[i].boundingBox;

				if(targets[i] === this ||
					!target || // children without BB
					(Math.abs(this.boundingBox.center.x - target.center.x) > (this.boundingBox.radius.x + target.radius.x)) ||
					(Math.abs(this.boundingBox.center.y - target.center.y) > (this.boundingBox.radius.y + target.radius.y)) ||
					(Math.abs(this.boundingBox.center.z - target.center.z) > (this.boundingBox.radius.z + target.radius.z))) {	
					continue;
				}

		    	result = true;		
		    	break;
			}
		}

		return result;
	};

	BaseObject.prototype.move = function(newPosition) {
		var 
			currentPosition,
			result;

		result = false;
		currentPosition = this.position.clone();
		
		if(newPosition.x) {
			this.position.setX(newPosition.x);

			if(this.isCollided()) {
				this.position.setX(currentPosition.x);
			} else {
				result = true;
			}
		}

		if(newPosition.z) {
			this.position.setZ(newPosition.z);

			if(this.isCollided()) {
				this.position.setZ(currentPosition.z);
			} else {
				result = true;
			}
		}

		this.changed = this.changed || result;
		this.updateBoundingBox();

		return result;
	};

	BaseObject.prototype.rotate = function(dX, dY, isDemo) {
		var 
			currentRotation = this.rotation.clone(),
			result = false; 
		
		if(dX) {
			this.rotation.y += dX * 0.01;

			if(!isDemo && this.isCollided()) {
				this.rotation.y = currentRotation.y;
			} else {
				result = true;
			}
		}

		if(dY) {
			this.rotation.x += dY * 0.01;

			if(!isDemo && this.isCollided()) {
				this.rotation.x = currentRotation.x;
			} else {
				result = true;
			}
		}

		this.changed = this.changed || (!isDemo && result);
		this.updateBoundingBox();
	};

	BaseObject.prototype.updateBoundingBox = function() {
		var
			boundingBox,
			radius,
			center;

		this.updateMatrix();
		boundingBox = this.geometry.boundingBox.clone().applyMatrix4(this.matrix);
		
		radius = {
			x: (boundingBox.max.x - boundingBox.min.x) * 0.5,
			y: (boundingBox.max.y - boundingBox.min.y) * 0.5,
			z: (boundingBox.max.z - boundingBox.min.z) * 0.5
		};

		center = new THREE.Vector3();
		center.addVectors(boundingBox.min, boundingBox.max);
		center.multiplyScalar(0.5);

		this.boundingBox = {
			radius: radius,
			center: center
		};
	};

	BaseObject.prototype.rollback = function() {
		this.position.x = this.dataObject.pos_x;
		this.position.y = this.dataObject.pos_y;
		this.position.z = this.dataObject.pos_z;

		this.rotation.x = this.dataObject.rotation[0];
		this.rotation.y = this.dataObject.rotation[1];
		this.rotation.z = this.dataObject.rotation[2];
		
		this.updateBoundingBox();
	};

	return BaseObject;	
});
angular.module('VirtualBookshelf')
.factory('BookObject', function ($log, BaseObject, data, subclassOf) {	
	var BookObject = function(dataObject, geometry, material) {
		BaseObject.call(this, dataObject, geometry, material);
	};

	BookObject.TYPE = 'BookObject';

	BookObject.prototype = subclassOf(BaseObject);
	BookObject.prototype.type = BookObject.TYPE;

	BookObject.prototype.save = function() {
		var scope = this;
		var dto = {
			id: this.dataObject.id,
			userId: this.dataObject.userId,
			pos_x: this.position.x,
			pos_y: this.position.y,
			pos_z: this.position.z
		};

		return data.postBook(dto).then(function (responseDto) {
			scope.dataObject = responseDto;
			scope.changed = false;
		});
	};

	BookObject.prototype.setParent = function(parent) {
		if(this.parent != parent) {
			if(parent) {
				parent.add(this);
				this.dataObject.shelfId = parent.id;
				this.dataObject.sectionId = parent.parent.id;
			} else {
				this.parent.remove(this);
				this.dataObject.shelfId = null;
				this.dataObject.sectionId = null;
			}
		}
	};

	return BookObject;
});
angular.module('VirtualBookshelf')
.factory('CameraObject', function (BaseObject, subclassOf) {
	var CameraObject = function() {
		BaseObject.call(this);
	};

	CameraObject.prototype = subclassOf(BaseObject);
	
	CameraObject.prototype.updateBoundingBox = function() {
		var radius = {x: 0.1, y: 1, z: 0.1};

		this.boundingBox = {
			radius: radius,
			center: this.position //TODO: needs center of section in parent or world coordinates
		};
	};

	return CameraObject;
});
angular.module('VirtualBookshelf')
.factory('LibraryObject', function (BaseObject, subclassOf) {
	var LibraryObject = function(params, geometry, material) {
		BaseObject.call(this, params, geometry, material);
	};

	LibraryObject.prototype = subclassOf(BaseObject);

	return LibraryObject;	
});
angular.module('VirtualBookshelf')
.factory('SectionObject', function (BaseObject, ShelfObject, data, subclassOf) {
	var SectionObject = function(params, geometry, material) {
		BaseObject.call(this, params, geometry, material);

		this.shelves = {};
		for(var key in params.data.shelves) {
			this.shelves[key] = new ShelfObject(params.data.shelves[key]); 
			this.add(this.shelves[key]);
		}
	};

	SectionObject.TYPE = 'SectionObject';

	SectionObject.prototype = subclassOf(BaseObject);
	SectionObject.prototype.type = SectionObject.TYPE;

	SectionObject.prototype.save = function() {
		var scope = this;
		var dto = {
			id: this.dataObject.id,
			userId: this.dataObject.userId,
			pos_x: this.position.x,
			pos_y: this.position.y,
			pos_z: this.position.z,
			rotation: [this.rotation.x, this.rotation.y, this.rotation.z]
		};

		return data.postSection(dto).then(function (responseDto) {
			scope.dataObject = responseDto;
			scope.changed = false;
		});
	};

	SectionObject.prototype.setParent = function(parent) {
		if(this.parent != parent) {
			if(parent) {
				parent.add(this);
				this.dataObject.libraryId = parent.id;
			} else {
				this.parent.remove(this);
				this.dataObject.libraryId = null;
			}
		}
	};

	return SectionObject;
});
angular.module('VirtualBookshelf')
.factory('SelectorMeta', function () {
	var SelectorMeta = function(selectedObject) {
		if(selectedObject) {
			this.id = selectedObject.id;
			this.parentId = selectedObject.parent.id;
			this.type = selectedObject.getType();
		}
	};

	SelectorMeta.prototype.isEmpty = function() {
		return !this.id;
	};

	SelectorMeta.prototype.equals = function(meta) {
		return !(!meta
				|| meta.id !== this.id
				|| meta.parentId !== this.parentId
				|| meta.type !== this.type);
	};
	
	return SelectorMeta;
});
angular.module('VirtualBookshelf')
.factory('ShelfObject', function (BaseObject, subclassOf) {
	var ShelfObject = function(params) {
		var size = params.size;	
		var geometry = new THREE.CubeGeometry(size[0], size[1], size[2]);

		geometry.computeBoundingBox();
		BaseObject.call(this, params, geometry);

		this.position = new THREE.Vector3(params.position[0], params.position[1], params.position[2]);
		this.size = new THREE.Vector3(size[0], size[1], size[2]);
		this.visible = false;
	};

	ShelfObject.TYPE = 'ShelfObject';

	ShelfObject.prototype = subclassOf(BaseObject);
	ShelfObject.prototype.type = ShelfObject.TYPE;

	return ShelfObject;
});
angular.module('VirtualBookshelf')
.factory('subclassOf', function () {
	function _subclassOf() {}

	function subclassOf(base) {
	    _subclassOf.prototype = base.prototype;
	    return new _subclassOf();
	}

	return subclassOf;
});
angular.module('VirtualBookshelf')
.factory('highlight', function (environment) {
	var highlight = {};

	var PLANE_ROTATION = Math.PI * 0.5;
	var PLANE_MULTIPLIER = 2;
	var COLOR_SELECT = 0x005533;
	var COLOR_FOCUS = 0x003355;

	var select;
	var focus;

	var init = function() {
		var materialProperties = {
			map: new THREE.ImageUtils.loadTexture( 'img/glow.png' ),
			transparent: true, 
			side: THREE.DoubleSide,
			blending: THREE.AdditiveBlending,
			depthTest: false
		};

		materialProperties.color = COLOR_SELECT;
		var materialSelect = new THREE.MeshBasicMaterial(materialProperties);

		materialProperties.color = COLOR_FOCUS;
		var materialFocus = new THREE.MeshBasicMaterial(materialProperties);

		var geometry = new THREE.PlaneGeometry(1, 1, 1);

		select = new THREE.Mesh(geometry, materialSelect);
		select.rotation.x = PLANE_ROTATION;

		focus = new THREE.Mesh(geometry, materialFocus);
		focus.rotation.x = PLANE_ROTATION;
	};

	var commonHighlight = function(which, obj) {
		if(obj) {
			var width = obj.geometry.boundingBox.max.x * PLANE_MULTIPLIER;
			var height = obj.geometry.boundingBox.max.z * PLANE_MULTIPLIER;
			var bottom = obj.geometry.boundingBox.min.y + environment.CLEARANCE;
			
			which.position.y = bottom;
			which.scale.set(width, height, 1);
			obj.add(which);

			which.visible = true;
		} else {
			which.visible = false;
		}
	};

	highlight.enable = function(enable) {
		focus.visible = select.visible = enable;
	};

	highlight.focus = function(obj) {
		commonHighlight(focus, obj);
	};

	highlight.select = function(obj) {
		commonHighlight(select, obj);
	};

	init();

	return highlight;
});
angular.module('VirtualBookshelf')
.factory('locator', function ($q, $log, BaseObject, data, selector, environment, cache) {
	var locator = {};

	var debugEnabled = false;

	locator.placeSection = function(sectionDto) {
		var promise = cache.getSection(sectionDto.model).then(function (sectionCache) {
			var sectionBB = sectionCache.geometry.boundingBox;
			var libraryBB = environment.library.geometry.boundingBox;
			var freePlace = getFreePlace(environment.library.children, libraryBB, sectionBB);

			return freePlace ?
				saveSection(sectionDto, freePlace) :
				$q.reject('there is no free space');
		}).then(function (newDto) {
			return environment.updateSection(newDto);
		});

		return promise;
	};

	var saveSection = function(dto, position) {
		dto.libraryId = environment.library.id;
		dto.pos_x = position.x;
		dto.pos_y = position.y;
		dto.pos_z = position.z;

		return data.postSection(dto);
	};

	locator.placeBook = function(bookDto) {
		var promise;
		var shelf = selector.isSelectedShelf() && selector.getSelectedObject();

		if(shelf) {
			promise = cache.getBook(bookDto.model).then(function (bookCache) {
				var shelfBB = shelf.geometry.boundingBox;
				var bookBB = bookCache.geometry.boundingBox;
				var freePlace = getFreePlace(shelf.children, shelfBB, bookBB);

				return freePlace ? 
					saveBook(bookDto, freePlace, shelf) : 
					$q.reject('there is no free space');
			}).then(function (newDto) {
				return environment.updateBook(newDto);
			});
		} else {
			promise = $q.reject('shelf is not selected');
		}

		return promise;
	};

	var saveBook = function(dto, position, shelf) {
		dto.shelfId = shelf.id;
		dto.sectionId = shelf.parent.id;
		dto.pos_x = position.x;
		dto.pos_y = position.y;
		dto.pos_z = position.z;

		return data.postBook(dto);
	};

	locator.unplaceBook = function(bookDto) {
		var promise;
		bookDto.sectionId = null;

		promise = data.postBook(bookDto).then(function () {
			return environment.updateBook(bookDto);
		});

		return promise;
	};

	var getFreePlace = function(objects, spaceBB, targetBB) {
		var matrixPrecision = new THREE.Vector3(targetBB.max.x - targetBB.min.x + 0.01, 0, targetBB.max.z - targetBB.min.z + 0.01);
		var occupiedMatrix = getOccupiedMatrix(objects, matrixPrecision);
		var freePosition = getFreeMatrixCells(occupiedMatrix, spaceBB, targetBB, matrixPrecision);
		
		if (debugEnabled) {
			debugShowFree(freePosition, matrixPrecision, environment.library);
		}

		return freePosition;
	};

	var getFreeMatrixCells = function(occupiedMatrix, spaceBB, targetBB, matrixPrecision) {
		var targetCellsSize = 1;
		var freeCellsCount = 0;
		var freeCellsStart;
		var xIndex;
		var zIndex;
		var cells;

		var minXCell = Math.floor(spaceBB.min.x / matrixPrecision.x) + 1;
		var maxXCell = Math.floor(spaceBB.max.x / matrixPrecision.x);
		var minZCell = Math.floor(spaceBB.min.z / matrixPrecision.z) + 1;
		var maxZCell = Math.floor(spaceBB.max.z / matrixPrecision.z);

		for (zIndex = minZCell; zIndex <= maxZCell; zIndex++) {
			for (xIndex = minXCell; xIndex <= maxXCell; xIndex++) {
				if (!occupiedMatrix[zIndex] || !occupiedMatrix[zIndex][xIndex]) {
					freeCellsStart = freeCellsStart || xIndex;
					freeCellsCount++;

					if (freeCellsCount === targetCellsSize) {
						cells = _.range(freeCellsStart, freeCellsStart + freeCellsCount);
						return getPositionFromCells(cells, zIndex, matrixPrecision, spaceBB, targetBB);
					}
				} else {
					freeCellsCount = 0;
				}
			}
		}

		return null;
	};

	var getPositionFromCells = function(cells, zIndex, matrixPrecision, spaceBB, targetBB) {
		var freeX = cells[0] * matrixPrecision.x;
		var freeZ =	zIndex * matrixPrecision.z;

		var offset = new THREE.Vector3();
		offset.addVectors(targetBB.min, targetBB.max);
		offset.multiplyScalar(-0.5);

		return new THREE.Vector3(freeX + offset.x, getBottomY(spaceBB, targetBB), freeZ + offset.z);
	};

	var getBottomY = function(spaceBB, targetBB) {
		return spaceBB.min.y - targetBB.min.y + environment.CLEARANCE;
	};

	var getOccupiedMatrix = function(objects, matrixPrecision) {
		var result = {};
		var objectBB;
		var minKeyX;
		var maxKeyX;
		var minKeyZ;
		var maxKeyZ;		
		var z;

		objects.forEach(function (obj) {
			if(obj instanceof BaseObject) {
				objectBB = obj.boundingBox;

				minKeyX = Math.round((objectBB.center.x - objectBB.radius.x) / matrixPrecision.x);
				maxKeyX = Math.round((objectBB.center.x + objectBB.radius.x) / matrixPrecision.x);
				minKeyZ = Math.round((objectBB.center.z - objectBB.radius.z) / matrixPrecision.z);
				maxKeyZ = Math.round((objectBB.center.z + objectBB.radius.z) / matrixPrecision.z);

				for(z = minKeyZ; z <= maxKeyZ; z++) {
					result[z] = result[z] || {};
					result[z][minKeyX] = true;
					result[z][maxKeyX] = true;

					if(debugEnabled) {
						debugShowBB(obj);
						debugAddOccupied([minKeyX, maxKeyX], matrixPrecision, obj, z);
					}
				}
			}
		});

		return result;
	};

	locator.debug = function() {
		cache.getSection('bookshelf_0001').then(function (sectionCache) {
			debugEnabled = true;
			var sectionBB = sectionCache.geometry.boundingBox;
			var libraryBB = environment.library.geometry.boundingBox;
			var freePlace = getFreePlace(environment.library.children, libraryBB, sectionBB);
			debugEnabled = false;
		});
	};

	var debugShowBB = function(obj) {
		var objectBB = obj.boundingBox;
		var objBox = new THREE.Mesh(
			new THREE.CubeGeometry(
				objectBB.radius.x * 2, 
				objectBB.radius.y * 2 + 0.1, 
				objectBB.radius.z * 2
			), 
			new THREE.MeshLambertMaterial({
				color: 0xbbbbff,
				opacity: 0.2,
				transparent: true
			})
		);
		
		objBox.position.x = objectBB.center.x;
		objBox.position.y = objectBB.center.y;
		objBox.position.z = objectBB.center.z;

		obj.parent.add(objBox);
	};

	var debugAddOccupied = function(cells, matrixPrecision, obj, zKey) {
		cells.forEach(function (cell) {
			obj.geometry.computeBoundingBox();
			var pos = getPositionFromCells([cell], zKey, matrixPrecision, obj.parent.geometry.boundingBox, obj.geometry.boundingBox);
			var cellBox = new THREE.Mesh(new THREE.CubeGeometry(matrixPrecision.x - 0.01, 0.01, matrixPrecision.z - 0.01), new THREE.MeshLambertMaterial({color: 0xff0000}));
			
			cellBox.position = pos;
			obj.parent.add(cellBox);
		});
	};

	var debugShowFree = function(position, matrixPrecision, obj) {
		if (position) {
			var cellBox = new THREE.Mesh(new THREE.CubeGeometry(matrixPrecision.x, 0.5, matrixPrecision.z), new THREE.MeshLambertMaterial({color: 0x00ff00}));
			cellBox.position = position;
			obj.parent.add(cellBox);
		}
	};

	return locator;	
});
angular.module('VirtualBookshelf')
.factory('preview', function (camera, highlight) {
	var preview = {};

	var active = false;
	var container;

	var init = function() {
		container = new THREE.Object3D();
		container.position.set(0, 0, -0.5);
		container.rotation.y = -2;
		camera.camera.add(container);
	};

	var activate = function(value) {
		active = value;
		highlight.enable(!active);
	};

	preview.isActive = function() {
		return active;
	};

	preview.enable = function(obj) {
		var objClone;

		if(obj) {
			activate(true);

			objClone = obj.clone();
			objClone.position.set(0, 0, 0);
			container.add(objClone);
		}
	};

	preview.disable = function () {
		clearContainer();
		activate(false);
	};

	var clearContainer = function() {
		container.children.forEach(function (child) {
			container.remove(child);
		});
	};

	preview.rotate = function(dX) {
		container.rotation.y += dX ? dX * 0.05 : 0;
	};

	init();

	return preview;
});
angular.module('VirtualBookshelf')
.factory('selector', function ($rootScope, SelectorMeta, BookObject, ShelfObject, SectionObject, environment, highlight, preview, tooltip) {
	var selector = {};
	
	var selected = new SelectorMeta();
	var focused = new SelectorMeta();

	selector.focus = function(meta) {
		var obj;

		if(!meta.equals(focused)) {
			focused = meta;

			if(!focused.isEmpty()) {
				obj = getObject(focused);
				highlight.focus(obj);
			}

			tooltip.set(obj);
			$rootScope.$apply();
		}
	};

	selector.selectFocused = function() {
		var meta = focused;

		selector.select(meta);
		$rootScope.$apply();
	};

	selector.select = function(meta) {
		if(!meta.equals(selected)) {
			selector.unselect();
			selected = meta;

			var obj = getObject(selected);
			highlight.select(obj);
			highlight.focus(null);
		}
	};

	selector.unselect = function() {
		if(!selected.isEmpty()) {
			highlight.select(null);
			selected = new SelectorMeta();
		}

		preview.disable();
	};

	selector.getSelectedObject = function() {
		return getObject(selected);
	};

	var getObject = function(meta) {
		var object;

		if(!meta.isEmpty()) {
			object = isShelf(meta) ? environment.getShelf(meta.parentId, meta.id)
				: isBook(meta) ? environment.getBook(meta.id)
				: isSection(meta) ? environment.getSection(meta.id)
				: null;
		}

		return object;	
	};

	selector.isSelectedEditable = function() {
		return selector.isSelectedBook() || selector.isSelectedSection();
	};

	selector.isBookSelected = function(id) {
		return isBook(selected) && selected.id === id;
	};

	selector.isSelectedShelf = function() {
		return isShelf(selected);
	};

	selector.isSelectedBook = function() {
		return isBook(selected);
	};

	selector.isSelectedSection = function() {
		return isSection(selected);
	};

	var isShelf = function(meta) {
		return meta.type === ShelfObject.TYPE;
	};

	var isBook = function(meta) {
		return meta.type === BookObject.TYPE;
	};

	var isSection = function(meta) {
		return meta.type === SectionObject.TYPE;
	};

	return selector;
});
angular.module('VirtualBookshelf')
.factory('authorization', function ($log, $q, $window, $interval, user, selectLibrary, catalog, environment, ngDialog) {
	var authorization = {};

	authorization.show = function() {
		ngDialog.openConfirm({
			template: '/ui/loginDialog'
		});
	};

	authorization.isShow = function() {
		return !user.isAuthorized() && user.isLoaded();
	};

	authorization.google = function() {
		var win = $window.open('/auth/google', '', 'width=800,height=600,modal=yes,alwaysRaised=yes');
	    var checkAuthWindow = $interval(function () {
	        if (win && win.closed) {
	        	$interval.cancel(checkAuthWindow);

	        	environment.setLoaded(false);
	        	user.load().then(function () {
	        		return authorization.loadUserData();
	        	}).finally(function () {
	        		environment.setLoaded(true);
	        	}).catch(function () {
	        		$log.log('User loadind error');
					//TODO: show error message  
	        	});
	        }
	    }, 100);
	};

	authorization.logout = function() {
    	environment.setLoaded(false);
		user.logout().finally(function () {
    		return authorization.loadUserData();
		}).finally(function () {
        	environment.setLoaded(true);
		}).catch(function () {
			$log.error('Logout error');
			//TODO: show an error
		});
	};

	authorization.loadUserData = function() {
		return $q.all([
			selectLibrary.updateList(), 
			catalog.loadBooks()
		]);
	};
	
	return authorization;
});
angular.module('VirtualBookshelf')
.factory('block', function (blockUI) {
	var block = {};

	var INVENTORY = 'inventory';
	var MAIN_MENU = 'main_menu';
	var GLOBAL = 'global';

	block.inventory = blockUI.instances.get(INVENTORY);
	
	block.mainMenu = blockUI.instances.get(MAIN_MENU);

	block.global = blockUI.instances.get(GLOBAL);

	return block;
});
angular.module('VirtualBookshelf')
.factory('bookEdit', function ($log, data, environment, block, dialog, archive, catalog, selector) {
	var bookEdit = {};

	var BOOK_IMAGE_URL = '/obj/books/{model}/img.jpg';
	var EMPTY_IMAGE_URL = '/img/empty_cover.jpg';
	
	bookEdit.list = [];
	bookEdit.book = {};
	bookEdit.coverInputURL = null;

	bookEdit.setBook = function(book) {
		this.book = {}; // create new object for unbind from scope
		if(book) {
			this.book.id = book.id;
			this.book.userId = book.userId;
			this.book.model = book.model;
			this.book.cover = book.cover;
			this.book.coverId = book.coverId;
			this.book.title = book.title;
			this.book.author = book.author;

			this.coverInputURL = null;
		}
	};

	bookEdit.getImg = function() {
		return this.book.model ? BOOK_IMAGE_URL.replace('{model}', this.book.model) : EMPTY_IMAGE_URL;
	};

	bookEdit.getCoverImg = function() {
		return this.isCoverShow() ? this.book.cover.url : EMPTY_IMAGE_URL;
	};

	bookEdit.isCoverDisabled = function() {
		return this.coverInputURL && (this.form.title.$invalid || this.form.author.$invalid);
	};

	bookEdit.isCoverShow = function() {
		return Boolean(this.book.cover);
	};

	bookEdit.isShow = function() {
		return !!this.book.userId;
	};

	bookEdit.submit = function() {
		if(this.form.$valid) {
			this.save();
		} else {
			dialog.openError('Fill all required fields, please.');
		}
	};

	bookEdit.applyCover = function() {
		if(!this.isCoverDisabled()) {
			if(this.coverInputURL) {
				block.inventory.start();
				archive.sendExternalURL(this.coverInputURL, [this.book.title, this.book.author]).then(function (result) {
					bookEdit.book.cover = result;
					bookEdit.book.coverId = result.id;
				}).catch(function () {
					bookEdit.book.coverId = null;
					bookEdit.book.cover = null;
					
					dialog.openError('Can not apply this cover. Try another one, please.');
				}).finally(function () {
					bookEdit.coverInputURL = null;
					block.inventory.stop();
				});
			} else {
				bookEdit.book.coverId = null;
				bookEdit.book.cover = null;
			}
		} else {
			dialog.openError('Fill author and title fields, please.');
		}
	};

	bookEdit.save = function() {
		var scope = this;
		
		block.inventory.start();
		data.postBook(this.book).then(function (dto) {
			if(selector.isBookSelected(dto.id)) {
				selector.unselect();
			}

			environment.updateBook(dto);
			scope.cancel();
			return catalog.loadBooks();
		}).catch(function () {
			$log.error('Book save error');
			//TODO: show error
		}).finally(function () {
			block.inventory.stop();
		});
	};

	bookEdit.cancel = function() {
		this.setBook();
	};

	return bookEdit;
});
angular.module('VirtualBookshelf')
.factory('catalog', function ($q, data, user, block) {
	var catalog = {};

	catalog.books = null;

	catalog.loadBooks = function() {
		var promise;
		var userId = user.getId();

		if(userId) {
			block.inventory.start();
			promise = $q.when(userId ? data.getUserBooks(userId) : null).then(function (result) {
				catalog.books = result;
			}).finally(function () {
				block.inventory.stop();	
			});
		}

		return promise;
	};

	return catalog;
});
angular.module('VirtualBookshelf')
.factory('createLibrary', function (data, environment, ngDialog) {
	var createLibrary = {};
	
	var EMPTY_IMAGE_URL = '/img/empty_cover.jpg';
	
	createLibrary.list = [];
	createLibrary.model = null;

	createLibrary.show = function() {
		ngDialog.openConfirm({
			template: '/ui/createLibrary'
		});
	};

	createLibrary.getImg = function() {
		return this.model ? '/obj/libraries/{model}/img.jpg'.replace('{model}', this.model) : EMPTY_IMAGE_URL;
	};

	createLibrary.create = function() {
		if(this.model) {
			data.postLibrary(this.model).then(function (result) {
				environment.goToLibrary(result.id);
			}).catch(function () {
				//TODO: show an error
			});
		}
	};

	return createLibrary;
});
angular.module('VirtualBookshelf')
.factory('createSection', function ($log, user, environment, locator) {
	var createSection = {};
	
	var EMPTY_IMAGE_URL = '/img/empty_cover.jpg';

	createSection.list = [];
	createSection.model = null;
	createSection.visible = false;

	createSection.isShow = function() {
		return this.visible;
	};

	createSection.show = function() {
		this.visible = true;
	};

	createSection.hide = function() {
		this.visible = false;
	};
	
	createSection.getImg = function() {
		return this.model ? '/obj/sections/{model}/img.jpg'.replace('{model}', this.model) : EMPTY_IMAGE_URL;
	};

	createSection.create = function() {
		if(this.model) {
			var sectionData = {
				model: this.model,
				libraryId: environment.library.id,
				userId: user.getId()
			};

			this.place(sectionData);
		}
	};

	createSection.place = function(dto) {
		//TODO: block
		locator.placeSection(dto).catch(function (error) {
			//TODO: show an error
			$log.error(error);
		});	
	};

	return createSection;
});
angular.module('VirtualBookshelf')
.factory('feedback', function (user, data, dialog) {
	var feedback = {};
	var show = false;

	feedback.message = null;

	feedback.isShow = function() {
		return show;
	};

	feedback.show = function() {
		show = true;
	};

	feedback.hide = function() {
		show = false;
	};

	feedback.submit = function() {
		var dataObject;
		
		if(this.form.message.$valid) {
			dialog.openConfirm('Send feedback?').then(function () {
				dataObject = {
					message: this.message,
					userId: user.getId()
				};

				return data.postFeedback(dataObject).then(function () {
					this.message = null;
					feedback.hide();
				}, function () {
					dialog.openError('Can not send feedback because of an error.');
				});
			});
		} else {
			dialog.openError('Feedback field is required.');
		}
	};

	return feedback;
});
angular.module('VirtualBookshelf')
.factory('inventory', function ($log, SelectorMeta, user, data, bookEdit, selector, environment, dialog, locator, catalog, block) {
	var inventory = {};

	inventory.search = null;

	inventory.expand = function(book) {
		bookEdit.setBook(book);
	};

	inventory.isShow = function() {
		return user.isAuthorized();
	};

	inventory.isBookSelected = function(id) {
		return selector.isBookSelected(id);
	};

	inventory.select = function(dto) {
		var book = environment.getBook(dto.id);
		var meta = new SelectorMeta(book);

		selector.select(meta);
	};

	inventory.addBook = function() {
		this.expand({userId: user.getId()});
	};

	inventory.delete = function(book) {
		dialog.openConfirm('Delete book?').then(function () {
			block.inventory.start();

			data.deleteBook(book.id).then(function () {
				if(selector.isBookSelected(book.id)) {
					selector.unselect();
				}

				environment.removeBook(book.id);
				return catalog.loadBooks();
			}).catch(function () {
				dialog.openError('Delete book error.');
			}).finally(function () {
				block.inventory.stop();
			});
		});
	};

	inventory.place = function(book, event) {
		var promise;
		var isBookPlaced = !!book.sectionId;

		event.stopPropagation();
		
		block.inventory.start();
		promise = isBookPlaced ? locator.unplaceBook(book) : locator.placeBook(book);
		promise.then(function () {
			return catalog.loadBooks();
		}).catch(function (error) {
			//TODO: show an error
			$log.error(error);
		}).finally(function () {
			block.inventory.stop();
		});
	};

	return inventory;
});
angular.module('VirtualBookshelf')
.factory('mainMenu', function ($log, data, bookEdit, feedback, selectLibrary, createLibrary, createSection) {
	var mainMenu = {};
	
	var show = false;
	var createListShow = false;

	mainMenu.isShow = function() {
		return show;
	};

	mainMenu.show = function() {
		mainMenu.hideAll();
		show = true;
	};

	mainMenu.hide = function() {
		show = false;
	};

	mainMenu.isCreateListShow = function() {
		return createListShow;
	};

	mainMenu.createListShow = function() {
		mainMenu.hideAll();
		createListShow = true;
	};

	mainMenu.createListHide = function() {
		createListShow = false;
	};

	mainMenu.hideAll = function() {
		mainMenu.hide();
		mainMenu.createListHide();
		createSection.hide();

		feedback.hide();
	};

	mainMenu.trigger = function() {
		if(mainMenu.isShow()) {
			mainMenu.hide();
		} else {
			mainMenu.show();
		}
	};

	mainMenu.showFeedback = function() {
		mainMenu.hideAll();
		feedback.show();
	};

	mainMenu.showSelectLibrary = function() {
		mainMenu.hideAll();
		selectLibrary.show();
	};

	mainMenu.showCreateLibrary = function() {
		mainMenu.hideAll();
		createLibrary.show();
	};

	mainMenu.showCreateSection = function() {
		mainMenu.hideAll();
		createSection.show();
	};

	var init = function() {
		//TODO: move to menu models
		data.getUIData().then(function (res) {
			createLibrary.list = res.data.libraries;
			createSection.list = res.data.bookshelves;
			bookEdit.list = res.data.books;
		}).catch(function () {
			$log.log('UI init error');
			//TODO: show an error
		});
	};

	init();

	return mainMenu;
});
angular.module('VirtualBookshelf')
.factory('selectLibrary', function (data, environment, user, ngDialog) {
	var selectLibrary = {};

	selectLibrary.list = [];

	selectLibrary.show = function() {
		ngDialog.openConfirm({
			template: '/ui/selectLibrary'
		});
	};

	selectLibrary.isAvailable = function() {
		return selectLibrary.list.length > 0;
	};

	selectLibrary.isUserLibrary = function() {
		return environment.library && environment.library.dataObject.userId === user.getId();
	};

	selectLibrary.updateList = function() {
		var scope = this;

	    var promise = data.getLibraries().then(function (res) {
            scope.list = res.data;
    	});

    	return promise;
	};

	selectLibrary.go = environment.goToLibrary;

	return selectLibrary;
});
angular.module('VirtualBookshelf')
.factory('tools', function ($q, BookObject, SectionObject, data, selector, dialog, block, catalog, environment, preview) {
	var tools = {};

	var ROTATION_SCALE = 1;

	var states = {
		rotateLeft: false,
		rotateRight: false
	};

	tools.delete = function() {
		var obj = selector.getSelectedObject();

		if(obj && selector.isSelectedEditable()) {
			dialog.openConfirm('Delete selected object?').then(function () {
				block.global.start();

				deleteObject(obj).then(function () {
					selector.unselect();
					return catalog.loadBooks();
				}).catch(function () {
					dialog.openError('Error deleting object.');
				}).finally(function () {
					block.global.stop();
				});
			});			
		}
	};

	var deleteObject = function(obj) {
		return $q.when(
			obj instanceof BookObject ? 
				deleteBook(obj.id) :
				obj instanceof SectionObject ?
					deleteSection(obj.id) :
					$q.reject('Can not delete selected object.')//TODO: test
		);
	};

	var deleteBook = function(id) {
		return data.deleteBook(id).then(function () {
			environment.removeBook(id);
		});
	};

	var deleteSection = function(id) {
		return data.deleteSection(id).then(function () {
			environment.removeSection(id);
		});
	};

	tools.rotateLeft = function() {
		states.rotateLeft = true;
	};

	tools.rotateRight = function() {
		states.rotateRight = true;
	};

	tools.stop = function() {
		states.rotateLeft = false;
		states.rotateRight = false;
	};

	tools.update = function() {
		if(states.rotateLeft) {
			rotate(ROTATION_SCALE);
		} else if(states.rotateRight) {
			rotate(-ROTATION_SCALE);
		}
	};

	var rotate = function(scale) {
		if(preview.isActive()) {
			preview.rotate(scale);
		} else {
			var obj = selector.getSelectedObject();
			obj.rotate(scale);
		}
	};

	return tools;
});
angular.module('VirtualBookshelf')
.factory('tooltip', function () {
	var tooltip = {};

	tooltip.obj = {};

	tooltip.set = function(obj) {
		if(obj) {
			this.obj.type = obj.type;
			this.obj.title = obj.dataObject.title;
			this.obj.author = obj.dataObject.author;
		} else {
			this.obj.type = null;
		}
	};

	return tooltip;
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbnRyb2xsZXJzL0F1dGhDdHJsLmpzIiwiY29udHJvbGxlcnMvQ3JlYXRlTGlicmFyeUN0cmwuanMiLCJjb250cm9sbGVycy9TZWxlY3RMaWJyYXJ5Q3RybC5qcyIsImNvbnRyb2xsZXJzL1Rvb2xzQ3RybC5qcyIsImNvbnRyb2xsZXJzL1Rvb2x0aXBDdHJsLmpzIiwiY29udHJvbGxlcnMvVWlDdHJsLmpzIiwiY29udHJvbGxlcnMvV2VsY29tZUN0cmwuanMiLCJkaXJlY3RpdmVzL3NlbGVjdC5qcyIsImxpYnMvbG9kYXNoLm1pbi5qcyIsInNlcnZpY2VzL2FyY2hpdmUuanMiLCJzZXJ2aWNlcy9jYWNoZS5qcyIsInNlcnZpY2VzL2NhbWVyYS5qcyIsInNlcnZpY2VzL2NvbnRyb2xzLmpzIiwic2VydmljZXMvZGF0YS5qcyIsInNlcnZpY2VzL2RpYWxvZy5qcyIsInNlcnZpY2VzL2Vudmlyb25tZW50LmpzIiwic2VydmljZXMvbWFpbi5qcyIsInNlcnZpY2VzL21vdXNlLmpzIiwic2VydmljZXMvbmF2aWdhdGlvbi5qcyIsInNlcnZpY2VzL3VzZXIuanMiLCJsaWJzL3RocmVlLmpzL0RldGVjdG9yLmpzIiwibGlicy90aHJlZS5qcy90aHJlZS5taW4uanMiLCJsaWJzL3RocmVlLmpzL3RocmVleC53aW5kb3dyZXNpemUuanMiLCJzZXJ2aWNlcy9tYXRlcmlhbHMvQm9va01hdGVyaWFsLmpzIiwic2VydmljZXMvbW9kZWxzL0Jhc2VPYmplY3QuanMiLCJzZXJ2aWNlcy9tb2RlbHMvQm9va09iamVjdC5qcyIsInNlcnZpY2VzL21vZGVscy9DYW1lcmFPYmplY3QuanMiLCJzZXJ2aWNlcy9tb2RlbHMvTGlicmFyeU9iamVjdC5qcyIsInNlcnZpY2VzL21vZGVscy9TZWN0aW9uT2JqZWN0LmpzIiwic2VydmljZXMvbW9kZWxzL1NlbGVjdG9yTWV0YS5qcyIsInNlcnZpY2VzL21vZGVscy9TaGVsZk9iamVjdC5qcyIsInNlcnZpY2VzL21vZGVscy9zdWJjbGFzc09mLmpzIiwic2VydmljZXMvc2NlbmUvaGlnaGxpZ2h0LmpzIiwic2VydmljZXMvc2NlbmUvbG9jYXRvci5qcyIsInNlcnZpY2VzL3NjZW5lL3ByZXZpZXcuanMiLCJzZXJ2aWNlcy9zY2VuZS9zZWxlY3Rvci5qcyIsInNlcnZpY2VzL3VpL2F1dGhvcml6YXRpb24uanMiLCJzZXJ2aWNlcy91aS9ibG9jay5qcyIsInNlcnZpY2VzL3VpL2Jvb2tFZGl0LmpzIiwic2VydmljZXMvdWkvY2F0YWxvZy5qcyIsInNlcnZpY2VzL3VpL2NyZWF0ZUxpYnJhcnkuanMiLCJzZXJ2aWNlcy91aS9jcmVhdGVTZWN0aW9uLmpzIiwic2VydmljZXMvdWkvZmVlZGJhY2suanMiLCJzZXJ2aWNlcy91aS9pbnZlbnRvcnkuanMiLCJzZXJ2aWNlcy91aS9tYWluTWVudS5qcyIsInNlcnZpY2VzL3VpL3NlbGVjdExpYnJhcnkuanMiLCJzZXJ2aWNlcy91aS90b29scy5qcyIsInNlcnZpY2VzL3VpL3Rvb2x0aXAuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMvQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDckJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDdkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDeEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDdkZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3pLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN4REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3pIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDeElBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQy9DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDdFFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3hEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDaEhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2xEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDcERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMxREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM5ckJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNwREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM5SEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2hLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2xCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQy9DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3BCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ25FQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDNU5BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3JEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDcEdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3JEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3hHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN2QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDL0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDMUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNuRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNwRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNqQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbkZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXJcbiAgICAubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJywgWydibG9ja1VJJywgJ25nRGlhbG9nJywgJ2FuZ3VsYXJVdGlscy5kaXJlY3RpdmVzLmRpclBhZ2luYXRpb24nXSlcbiAgICBcdC5jb25maWcoZnVuY3Rpb24gKGJsb2NrVUlDb25maWcsIHBhZ2luYXRpb25UZW1wbGF0ZVByb3ZpZGVyKSB7XG4gICAgXHRcdGJsb2NrVUlDb25maWcuZGVsYXkgPSAwO1xuICAgIFx0XHRibG9ja1VJQ29uZmlnLmF1dG9CbG9jayA9IGZhbHNlO1xuXHRcdFx0YmxvY2tVSUNvbmZpZy5hdXRvSW5qZWN0Qm9keUJsb2NrID0gZmFsc2U7XG5cdFx0XHRwYWdpbmF0aW9uVGVtcGxhdGVQcm92aWRlci5zZXRQYXRoKCcvanMvYW5ndWxhci9kaXJQYWdpbmF0aW9uL2RpclBhZ2luYXRpb24udHBsLmh0bWwnKTtcbiAgICBcdH0pXG4gICAgXHQucnVuKGZ1bmN0aW9uIChtYWluKSB7XG5cdFx0XHRtYWluLnN0YXJ0KCk7XG4gICAgXHR9KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uY29udHJvbGxlcignQXV0aEN0cmwnLCBmdW5jdGlvbiAoYXV0aG9yaXphdGlvbikge1xuXHR0aGlzLmxvZ2luR29vZ2xlID0gZnVuY3Rpb24oKSB7XG5cdFx0YXV0aG9yaXphdGlvbi5nb29nbGUoKTtcblx0fTtcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5jb250cm9sbGVyKCdDcmVhdGVMaWJyYXJ5Q3RybCcsIGZ1bmN0aW9uIChjcmVhdGVMaWJyYXJ5KSB7XG5cdHRoaXMubGlzdCA9IGNyZWF0ZUxpYnJhcnkubGlzdDtcblx0dGhpcy5tb2RlbCA9IGNyZWF0ZUxpYnJhcnkubW9kZWw7XG5cdHRoaXMuZ2V0SW1nID0gY3JlYXRlTGlicmFyeS5nZXRJbWc7XG5cdHRoaXMuY3JlYXRlID0gY3JlYXRlTGlicmFyeS5jcmVhdGU7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uY29udHJvbGxlcignU2VsZWN0TGlicmFyeUN0cmwnLCBmdW5jdGlvbiAoc2VsZWN0TGlicmFyeSkge1xuXHR0aGlzLmdvID0gc2VsZWN0TGlicmFyeS5nbztcblxuXHR0aGlzLmdldExpc3QgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gc2VsZWN0TGlicmFyeS5saXN0O1xuXHR9O1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ1ZpcnR1YWxCb29rc2hlbGYnKVxuLmNvbnRyb2xsZXIoJ1Rvb2xzQ3RybCcsIGZ1bmN0aW9uICh1c2VyLCBzZWxlY3RvciwgdG9vbHMsIHByZXZpZXcpIHtcbiAgICB0aGlzLmlzU2hvdyA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBzZWxlY3Rvci5pc1NlbGVjdGVkRWRpdGFibGUoKSB8fCBwcmV2aWV3LmlzQWN0aXZlKCk7XG5cdH07XG5cbiAgICB0aGlzLmlzUm90YXRhYmxlID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHNlbGVjdG9yLmlzU2VsZWN0ZWRTZWN0aW9uKCkgfHwgcHJldmlldy5pc0FjdGl2ZSgpO1xuXHR9O1xuXG4gICAgdGhpcy5pc0RlbGV0YWJsZSA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBzZWxlY3Rvci5pc1NlbGVjdGVkRWRpdGFibGUoKSAmJiB1c2VyLmlzQXV0aG9yaXplZCgpO1xuXHR9O1xuXG4gICAgdGhpcy5pc1dhdGNoYWJsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gc2VsZWN0b3IuaXNTZWxlY3RlZEJvb2soKSAmJiAhcHJldmlldy5pc0FjdGl2ZSgpO1xuICAgIH07XG5cbiAgICB0aGlzLndhdGNoID0gZnVuY3Rpb24oKSAge1xuICAgICAgICB2YXIgb2JqID0gc2VsZWN0b3IuZ2V0U2VsZWN0ZWRPYmplY3QoKTtcbiAgICAgICAgcHJldmlldy5lbmFibGUob2JqKTtcbiAgICB9O1xuXG4gICAgdGhpcy51bndhdGNoID0gcHJldmlldy5kaXNhYmxlO1xuICAgIHRoaXMuaXNXYXRjaEFjdGl2ZSA9IHByZXZpZXcuaXNBY3RpdmU7XG5cbiAgICB0aGlzLnJvdGF0ZUxlZnQgPSB0b29scy5yb3RhdGVMZWZ0O1xuICAgIHRoaXMucm90YXRlUmlnaHQgPSB0b29scy5yb3RhdGVSaWdodDtcbiAgICB0aGlzLnN0b3AgPSB0b29scy5zdG9wO1xuXG4gICAgdGhpcy5kZWxldGUgPSB0b29scy5kZWxldGU7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uY29udHJvbGxlcignVG9vbHRpcEN0cmwnLCBmdW5jdGlvbiAodG9vbHRpcCwgQm9va09iamVjdCkge1xuICAgIHRoaXMuaXNTaG93ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0b29sdGlwLm9iai50eXBlID09PSBCb29rT2JqZWN0LlRZUEU7XG4gICAgfTtcblxuICAgIHRoaXMub2JqID0gdG9vbHRpcC5vYmo7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uY29udHJvbGxlcignVWlDdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgbWFpbk1lbnUsIHNlbGVjdExpYnJhcnksIGNyZWF0ZUxpYnJhcnksIGNyZWF0ZVNlY3Rpb24sIGZlZWRiYWNrLCBhdXRob3JpemF0aW9uLCBuYXZpZ2F0aW9uLCBpbnZlbnRvcnksIGJvb2tFZGl0LCBjYXRhbG9nKSB7XG4gICAgJHNjb3BlLm1haW5NZW51ID0gbWFpbk1lbnU7XG5cbiAgICAkc2NvcGUuc2VsZWN0TGlicmFyeSA9IHNlbGVjdExpYnJhcnk7XG4gICAgJHNjb3BlLmNyZWF0ZUxpYnJhcnkgPSBjcmVhdGVMaWJyYXJ5O1xuICAgICRzY29wZS5jcmVhdGVTZWN0aW9uID0gY3JlYXRlU2VjdGlvbjtcbiAgICAkc2NvcGUuZmVlZGJhY2sgPSBmZWVkYmFjaztcbiAgICAkc2NvcGUuYXV0aG9yaXphdGlvbiA9IGF1dGhvcml6YXRpb247XG5cbiAgICAkc2NvcGUuaW52ZW50b3J5ID0gaW52ZW50b3J5O1xuICAgICRzY29wZS5ib29rRWRpdCA9IGJvb2tFZGl0O1xuICAgICRzY29wZS5jYXRhbG9nID0gY2F0YWxvZztcblxuXHQkc2NvcGUubmF2aWdhdGlvbiA9IHtcblx0XHRzdG9wOiBuYXZpZ2F0aW9uLmdvU3RvcCxcblx0XHRmb3J3YXJkOiBuYXZpZ2F0aW9uLmdvRm9yd2FyZCxcblx0XHRiYWNrd2FyZDogbmF2aWdhdGlvbi5nb0JhY2t3YXJkLFxuXHRcdGxlZnQ6IG5hdmlnYXRpb24uZ29MZWZ0LFxuXHRcdHJpZ2h0OiBuYXZpZ2F0aW9uLmdvUmlnaHRcblx0fTtcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5jb250cm9sbGVyKCdXZWxjb21lQ3RybCcsIGZ1bmN0aW9uIChhdXRob3JpemF0aW9uLCBzZWxlY3RMaWJyYXJ5LCBjcmVhdGVMaWJyYXJ5LCBlbnZpcm9ubWVudCkge1xuXHR2YXIgY2xvc2VkID0gZmFsc2U7XG5cblx0dGhpcy5pc1Nob3dBdXRob3JpemF0aW9uID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGF1dGhvcml6YXRpb24uaXNTaG93KCk7XG5cdH07XG5cdFxuXHR0aGlzLmlzU2hvd1NlbGVjdExpYnJhcnkgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gc2VsZWN0TGlicmFyeS5pc0F2YWlsYWJsZSgpICYmICFzZWxlY3RMaWJyYXJ5LmlzVXNlckxpYnJhcnkoKTtcblx0fTtcblxuXHR0aGlzLmlzU2hvd0NyZWF0ZUxpYnJhcnkgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gIXRoaXMuaXNTaG93QXV0aG9yaXphdGlvbigpICYmICFzZWxlY3RMaWJyYXJ5LmlzQXZhaWxhYmxlKCk7XG5cdH07XG5cblx0dGhpcy5pc1Nob3cgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gIWNsb3NlZCAmJiAodGhpcy5pc1Nob3dBdXRob3JpemF0aW9uKCkgfHwgdGhpcy5pc1Nob3dDcmVhdGVMaWJyYXJ5KCkgfHwgdGhpcy5pc1Nob3dTZWxlY3RMaWJyYXJ5KCkpO1xuXHR9O1xuXG5cdHRoaXMuaXNMb2FkZWQgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gZW52aXJvbm1lbnQuZ2V0TG9hZGVkKCk7XG5cdH07XG5cblx0dGhpcy5zaG93TG9naW5EaWFsb2cgPSBmdW5jdGlvbigpIHtcblx0XHRhdXRob3JpemF0aW9uLnNob3coKTtcblx0fTtcblxuXHR0aGlzLnNob3dTZWxlY3RMaWJyYXJ5RGlhbG9nID0gZnVuY3Rpb24oKSB7XG5cdFx0c2VsZWN0TGlicmFyeS5zaG93KCk7XG5cdH07XG5cblx0dGhpcy5zaG93Q3JlYXRlTGlicmFyeURpYWxvZyA9IGZ1bmN0aW9uKCkge1xuXHRcdGNyZWF0ZUxpYnJhcnkuc2hvdygpO1xuXHR9O1xuXG5cdHRoaXMuY2xvc2UgPSBmdW5jdGlvbigpIHtcblx0XHRjbG9zZWQgPSB0cnVlO1xuXHR9O1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ1ZpcnR1YWxCb29rc2hlbGYnKVxuLmRpcmVjdGl2ZSgndmJTZWxlY3QnLCBmdW5jdGlvbigpIHtcblx0cmV0dXJuIHtcblx0XHRyZXF1aXJlOiAnbmdNb2RlbCcsXG5cdFx0cmVzdHJpY3Q6ICdFJyxcbiAgICBcdHRyYW5zY2x1ZGU6IHRydWUsXG5cdFx0dGVtcGxhdGVVcmw6ICcvdWkvc2VsZWN0LmVqcycsXG5cdFx0c2NvcGU6IHtcblx0XHRcdG9wdGlvbnM6ICc9Jyxcblx0XHRcdHZhbHVlOiAnQCcsXG5cdFx0XHRsYWJlbDogJ0AnXG5cdFx0fSxcblxuXHRcdGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY29udHJvbGxlcikge1xuXHRcdFx0c2NvcGUuc2VsZWN0ID0gZnVuY3Rpb24oaXRlbSkge1xuXHRcdFx0XHRjb250cm9sbGVyLiRzZXRWaWV3VmFsdWUoaXRlbVtzY29wZS52YWx1ZV0pO1xuXHRcdFx0fTtcblxuXHRcdFx0c2NvcGUuaXNTZWxlY3RlZCA9IGZ1bmN0aW9uKGl0ZW0pIHtcblx0XHRcdFx0cmV0dXJuIGNvbnRyb2xsZXIuJG1vZGVsVmFsdWUgPT09IGl0ZW1bc2NvcGUudmFsdWVdO1xuXHRcdFx0fTtcblx0XHR9XG5cdH07XG59KTtcbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIGxvZGFzaCAzLjIuMCAoQ3VzdG9tIEJ1aWxkKSBsb2Rhc2guY29tL2xpY2Vuc2UgfCBVbmRlcnNjb3JlLmpzIDEuNy4wIHVuZGVyc2NvcmVqcy5vcmcvTElDRU5TRVxuICogQnVpbGQ6IGBsb2Rhc2ggbW9kZXJuIC1vIC4vbG9kYXNoLmpzYFxuICovXG47KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gbihuLHQpe2lmKG4hPT10KXt2YXIgcj1uPT09bixlPXQ9PT10O2lmKG4+dHx8IXJ8fHR5cGVvZiBuPT1cInVuZGVmaW5lZFwiJiZlKXJldHVybiAxO2lmKG48dHx8IWV8fHR5cGVvZiB0PT1cInVuZGVmaW5lZFwiJiZyKXJldHVybi0xfXJldHVybiAwfWZ1bmN0aW9uIHQobix0LHIpe2lmKHQhPT10KXJldHVybiBwKG4scik7cj0ocnx8MCktMTtmb3IodmFyIGU9bi5sZW5ndGg7KytyPGU7KWlmKG5bcl09PT10KXJldHVybiByO3JldHVybi0xfWZ1bmN0aW9uIHIobix0KXt2YXIgcj1uLmxlbmd0aDtmb3Iobi5zb3J0KHQpO3ItLTspbltyXT1uW3JdLmM7cmV0dXJuIG59ZnVuY3Rpb24gZShuKXtyZXR1cm4gdHlwZW9mIG49PVwic3RyaW5nXCI/bjpudWxsPT1uP1wiXCI6bitcIlwifWZ1bmN0aW9uIHUobil7cmV0dXJuIG4uY2hhckNvZGVBdCgwKX1mdW5jdGlvbiBvKG4sdCl7Zm9yKHZhciByPS0xLGU9bi5sZW5ndGg7KytyPGUmJi0xPHQuaW5kZXhPZihuLmNoYXJBdChyKSk7KTtyZXR1cm4gclxufWZ1bmN0aW9uIGkobix0KXtmb3IodmFyIHI9bi5sZW5ndGg7ci0tJiYtMTx0LmluZGV4T2Yobi5jaGFyQXQocikpOyk7cmV0dXJuIHJ9ZnVuY3Rpb24gZih0LHIpe3JldHVybiBuKHQuYSxyLmEpfHx0LmItci5ifWZ1bmN0aW9uIGEodCxyKXtmb3IodmFyIGU9LTEsdT10LmEsbz1yLmEsaT11Lmxlbmd0aDsrK2U8aTspe3ZhciBmPW4odVtlXSxvW2VdKTtpZihmKXJldHVybiBmfXJldHVybiB0LmItci5ifWZ1bmN0aW9uIGMobil7cmV0dXJuIFd0W25dfWZ1bmN0aW9uIGwobil7cmV0dXJuIE50W25dfWZ1bmN0aW9uIHMobil7cmV0dXJuXCJcXFxcXCIrTHRbbl19ZnVuY3Rpb24gcChuLHQscil7dmFyIGU9bi5sZW5ndGg7Zm9yKHQ9cj90fHxlOih0fHwwKS0xO3I/dC0tOisrdDxlOyl7dmFyIHU9blt0XTtpZih1IT09dSlyZXR1cm4gdH1yZXR1cm4tMX1mdW5jdGlvbiBoKG4pe3JldHVybiBuJiZ0eXBlb2Ygbj09XCJvYmplY3RcInx8ZmFsc2V9ZnVuY3Rpb24gXyhuKXtyZXR1cm4gMTYwPj1uJiY5PD1uJiYxMz49bnx8MzI9PW58fDE2MD09bnx8NTc2MD09bnx8NjE1OD09bnx8ODE5Mjw9biYmKDgyMDI+PW58fDgyMzI9PW58fDgyMzM9PW58fDgyMzk9PW58fDgyODc9PW58fDEyMjg4PT1ufHw2NTI3OT09bilcbn1mdW5jdGlvbiBnKG4sdCl7Zm9yKHZhciByPS0xLGU9bi5sZW5ndGgsdT0tMSxvPVtdOysrcjxlOyluW3JdPT09dCYmKG5bcl09QixvWysrdV09cik7cmV0dXJuIG99ZnVuY3Rpb24gdihuKXtmb3IodmFyIHQ9LTEscj1uLmxlbmd0aDsrK3Q8ciYmXyhuLmNoYXJDb2RlQXQodCkpOyk7cmV0dXJuIHR9ZnVuY3Rpb24geShuKXtmb3IodmFyIHQ9bi5sZW5ndGg7dC0tJiZfKG4uY2hhckNvZGVBdCh0KSk7KTtyZXR1cm4gdH1mdW5jdGlvbiBkKG4pe3JldHVybiBVdFtuXX1mdW5jdGlvbiBtKF8pe2Z1bmN0aW9uIFd0KG4pe2lmKGgobikmJiEoU28obil8fG4gaW5zdGFuY2VvZiBVdCkpe2lmKG4gaW5zdGFuY2VvZiBOdClyZXR1cm4gbjtpZihVdS5jYWxsKG4sXCJfX2NoYWluX19cIikmJlV1LmNhbGwobixcIl9fd3JhcHBlZF9fXCIpKXJldHVybiBoZShuKX1yZXR1cm4gbmV3IE50KG4pfWZ1bmN0aW9uIE50KG4sdCxyKXt0aGlzLl9fd3JhcHBlZF9fPW4sdGhpcy5fX2FjdGlvbnNfXz1yfHxbXSx0aGlzLl9fY2hhaW5fXz0hIXRcbn1mdW5jdGlvbiBVdChuKXt0aGlzLl9fd3JhcHBlZF9fPW4sdGhpcy5fX2FjdGlvbnNfXz1udWxsLHRoaXMuX19kaXJfXz0xLHRoaXMuX19kcm9wQ291bnRfXz0wLHRoaXMuX19maWx0ZXJlZF9fPWZhbHNlLHRoaXMuX19pdGVyYXRlZXNfXz1udWxsLHRoaXMuX190YWtlQ291bnRfXz1zbyx0aGlzLl9fdmlld3NfXz1udWxsfWZ1bmN0aW9uIEZ0KCl7dGhpcy5fX2RhdGFfXz17fX1mdW5jdGlvbiBMdChuKXt2YXIgdD1uP24ubGVuZ3RoOjA7Zm9yKHRoaXMuZGF0YT17aGFzaDp0byhudWxsKSxzZXQ6bmV3IFp1fTt0LS07KXRoaXMucHVzaChuW3RdKX1mdW5jdGlvbiBCdChuLHQpe3ZhciByPW4uZGF0YTtyZXR1cm4odHlwZW9mIHQ9PVwic3RyaW5nXCJ8fFhlKHQpP3Iuc2V0Lmhhcyh0KTpyLmhhc2hbdF0pPzA6LTF9ZnVuY3Rpb24genQobix0KXt2YXIgcj0tMSxlPW4ubGVuZ3RoO2Zvcih0fHwodD13dShlKSk7KytyPGU7KXRbcl09bltyXTtyZXR1cm4gdH1mdW5jdGlvbiBNdChuLHQpe2Zvcih2YXIgcj0tMSxlPW4ubGVuZ3RoOysrcjxlJiZmYWxzZSE9PXQobltyXSxyLG4pOyk7cmV0dXJuIG5cbn1mdW5jdGlvbiBxdChuLHQpe2Zvcih2YXIgcj0tMSxlPW4ubGVuZ3RoOysrcjxlOylpZighdChuW3JdLHIsbikpcmV0dXJuIGZhbHNlO3JldHVybiB0cnVlfWZ1bmN0aW9uIFB0KG4sdCl7Zm9yKHZhciByPS0xLGU9bi5sZW5ndGgsdT0tMSxvPVtdOysrcjxlOyl7dmFyIGk9bltyXTt0KGkscixuKSYmKG9bKyt1XT1pKX1yZXR1cm4gb31mdW5jdGlvbiBLdChuLHQpe2Zvcih2YXIgcj0tMSxlPW4ubGVuZ3RoLHU9d3UoZSk7KytyPGU7KXVbcl09dChuW3JdLHIsbik7cmV0dXJuIHV9ZnVuY3Rpb24gVnQobil7Zm9yKHZhciB0PS0xLHI9bi5sZW5ndGgsZT1sbzsrK3Q8cjspe3ZhciB1PW5bdF07dT5lJiYoZT11KX1yZXR1cm4gZX1mdW5jdGlvbiBZdChuLHQscixlKXt2YXIgdT0tMSxvPW4ubGVuZ3RoO2ZvcihlJiZvJiYocj1uWysrdV0pOysrdTxvOylyPXQocixuW3VdLHUsbik7cmV0dXJuIHJ9ZnVuY3Rpb24gWnQobix0LHIsZSl7dmFyIHU9bi5sZW5ndGg7Zm9yKGUmJnUmJihyPW5bLS11XSk7dS0tOylyPXQocixuW3VdLHUsbik7XG5yZXR1cm4gcn1mdW5jdGlvbiBHdChuLHQpe2Zvcih2YXIgcj0tMSxlPW4ubGVuZ3RoOysrcjxlOylpZih0KG5bcl0scixuKSlyZXR1cm4gdHJ1ZTtyZXR1cm4gZmFsc2V9ZnVuY3Rpb24gSnQobix0KXtyZXR1cm4gdHlwZW9mIG49PVwidW5kZWZpbmVkXCI/dDpufWZ1bmN0aW9uIFh0KG4sdCxyLGUpe3JldHVybiB0eXBlb2YgbiE9XCJ1bmRlZmluZWRcIiYmVXUuY2FsbChlLHIpP246dH1mdW5jdGlvbiBIdChuLHQscil7dmFyIGU9Rm8odCk7aWYoIXIpcmV0dXJuIG5yKHQsbixlKTtmb3IodmFyIHU9LTEsbz1lLmxlbmd0aDsrK3U8bzspe3ZhciBpPWVbdV0sZj1uW2ldLGE9cihmLHRbaV0saSxuLHQpOyhhPT09YT9hPT09ZjpmIT09ZikmJih0eXBlb2YgZiE9XCJ1bmRlZmluZWRcInx8aSBpbiBuKXx8KG5baV09YSl9cmV0dXJuIG59ZnVuY3Rpb24gUXQobix0KXtmb3IodmFyIHI9LTEsZT1uLmxlbmd0aCx1PW9lKGUpLG89dC5sZW5ndGgsaT13dShvKTsrK3I8bzspe3ZhciBmPXRbcl07dT8oZj1wYXJzZUZsb2F0KGYpLGlbcl09ZWUoZixlKT9uW2ZdOncpOmlbcl09bltmXVxufXJldHVybiBpfWZ1bmN0aW9uIG5yKG4sdCxyKXtyfHwocj10LHQ9e30pO2Zvcih2YXIgZT0tMSx1PXIubGVuZ3RoOysrZTx1Oyl7dmFyIG89cltlXTt0W29dPW5bb119cmV0dXJuIHR9ZnVuY3Rpb24gdHIobix0LHIpe3ZhciBlPXR5cGVvZiBuO2lmKFwiZnVuY3Rpb25cIj09ZSl7aWYoZT10eXBlb2YgdCE9XCJ1bmRlZmluZWRcIil7dmFyIGU9V3Quc3VwcG9ydCx1PSEoZS5mdW5jTmFtZXM/bi5uYW1lOmUuZnVuY0RlY29tcCk7aWYoIXUpe3ZhciBvPVd1LmNhbGwobik7ZS5mdW5jTmFtZXN8fCh1PSFkdC50ZXN0KG8pKSx1fHwodT1rdC50ZXN0KG8pfHxIZShuKSxibyhuLHUpKX1lPXV9bj1lP05yKG4sdCxyKTpufWVsc2Ugbj1udWxsPT1uP3Z1Olwib2JqZWN0XCI9PWU/YnIobik6dHlwZW9mIHQ9PVwidW5kZWZpbmVkXCI/anIobitcIlwiKTp4cihuK1wiXCIsdCk7cmV0dXJuIG59ZnVuY3Rpb24gcnIobix0LHIsZSx1LG8saSl7dmFyIGY7aWYociYmKGY9dT9yKG4sZSx1KTpyKG4pKSx0eXBlb2YgZiE9XCJ1bmRlZmluZWRcIilyZXR1cm4gZjtcbmlmKCFYZShuKSlyZXR1cm4gbjtpZihlPVNvKG4pKXtpZihmPW5lKG4pLCF0KXJldHVybiB6dChuLGYpfWVsc2V7dmFyIGE9THUuY2FsbChuKSxjPWE9PUs7aWYoYSE9WSYmYSE9eiYmKCFjfHx1KSlyZXR1cm4gVHRbYV0/cmUobixhLHQpOnU/bjp7fTtpZihmPXRlKGM/e306biksIXQpcmV0dXJuIG5yKG4sZixGbyhuKSl9Zm9yKG98fChvPVtdKSxpfHwoaT1bXSksdT1vLmxlbmd0aDt1LS07KWlmKG9bdV09PW4pcmV0dXJuIGlbdV07cmV0dXJuIG8ucHVzaChuKSxpLnB1c2goZiksKGU/TXQ6X3IpKG4sZnVuY3Rpb24oZSx1KXtmW3VdPXJyKGUsdCxyLHUsbixvLGkpfSksZn1mdW5jdGlvbiBlcihuLHQscixlKXtpZih0eXBlb2YgbiE9XCJmdW5jdGlvblwiKXRocm93IG5ldyBPdSgkKTtyZXR1cm4gR3UoZnVuY3Rpb24oKXtuLmFwcGx5KHcsUnIocixlKSl9LHQpfWZ1bmN0aW9uIHVyKG4scil7dmFyIGU9bj9uLmxlbmd0aDowLHU9W107aWYoIWUpcmV0dXJuIHU7dmFyIG89LTEsaT1RcigpLGY9aT09dCxhPWYmJjIwMDw9ci5sZW5ndGgmJnhvKHIpLGM9ci5sZW5ndGg7XG5hJiYoaT1CdCxmPWZhbHNlLHI9YSk7bjpmb3IoOysrbzxlOylpZihhPW5bb10sZiYmYT09PWEpe2Zvcih2YXIgbD1jO2wtLTspaWYocltsXT09PWEpY29udGludWUgbjt1LnB1c2goYSl9ZWxzZSAwPmkocixhKSYmdS5wdXNoKGEpO3JldHVybiB1fWZ1bmN0aW9uIG9yKG4sdCl7dmFyIHI9bj9uLmxlbmd0aDowO2lmKCFvZShyKSlyZXR1cm4gX3Iobix0KTtmb3IodmFyIGU9LTEsdT1wZShuKTsrK2U8ciYmZmFsc2UhPT10KHVbZV0sZSx1KTspO3JldHVybiBufWZ1bmN0aW9uIGlyKG4sdCl7dmFyIHI9bj9uLmxlbmd0aDowO2lmKCFvZShyKSlyZXR1cm4gZ3Iobix0KTtmb3IodmFyIGU9cGUobik7ci0tJiZmYWxzZSE9PXQoZVtyXSxyLGUpOyk7cmV0dXJuIG59ZnVuY3Rpb24gZnIobix0KXt2YXIgcj10cnVlO3JldHVybiBvcihuLGZ1bmN0aW9uKG4sZSx1KXtyZXR1cm4gcj0hIXQobixlLHUpfSkscn1mdW5jdGlvbiBhcihuLHQpe3ZhciByPVtdO3JldHVybiBvcihuLGZ1bmN0aW9uKG4sZSx1KXt0KG4sZSx1KSYmci5wdXNoKG4pXG59KSxyfWZ1bmN0aW9uIGNyKG4sdCxyLGUpe3ZhciB1O3JldHVybiByKG4sZnVuY3Rpb24obixyLG8pe3JldHVybiB0KG4scixvKT8odT1lP3I6bixmYWxzZSk6dm9pZCAwfSksdX1mdW5jdGlvbiBscihuLHQscixlKXtlPShlfHwwKS0xO2Zvcih2YXIgdT1uLmxlbmd0aCxvPS0xLGk9W107KytlPHU7KXt2YXIgZj1uW2VdO2lmKGgoZikmJm9lKGYubGVuZ3RoKSYmKFNvKGYpfHxZZShmKSkpe3QmJihmPWxyKGYsdCxyKSk7dmFyIGE9LTEsYz1mLmxlbmd0aDtmb3IoaS5sZW5ndGgrPWM7KythPGM7KWlbKytvXT1mW2FdfWVsc2Ugcnx8KGlbKytvXT1mKX1yZXR1cm4gaX1mdW5jdGlvbiBzcihuLHQscil7dmFyIGU9LTEsdT1wZShuKTtyPXIobik7Zm9yKHZhciBvPXIubGVuZ3RoOysrZTxvOyl7dmFyIGk9cltlXTtpZihmYWxzZT09PXQodVtpXSxpLHUpKWJyZWFrfXJldHVybiBufWZ1bmN0aW9uIHByKG4sdCxyKXt2YXIgZT1wZShuKTtyPXIobik7Zm9yKHZhciB1PXIubGVuZ3RoO3UtLTspe3ZhciBvPXJbdV07XG5pZihmYWxzZT09PXQoZVtvXSxvLGUpKWJyZWFrfXJldHVybiBufWZ1bmN0aW9uIGhyKG4sdCl7c3Iobix0LG91KX1mdW5jdGlvbiBfcihuLHQpe3JldHVybiBzcihuLHQsRm8pfWZ1bmN0aW9uIGdyKG4sdCl7cmV0dXJuIHByKG4sdCxGbyl9ZnVuY3Rpb24gdnIobix0KXtmb3IodmFyIHI9LTEsZT10Lmxlbmd0aCx1PS0xLG89W107KytyPGU7KXt2YXIgaT10W3JdO0plKG5baV0pJiYob1srK3VdPWkpfXJldHVybiBvfWZ1bmN0aW9uIHlyKG4sdCxyKXt2YXIgZT0tMSx1PXR5cGVvZiB0PT1cImZ1bmN0aW9uXCIsbz1uP24ubGVuZ3RoOjAsaT1vZShvKT93dShvKTpbXTtyZXR1cm4gb3IobixmdW5jdGlvbihuKXt2YXIgbz11P3Q6bnVsbCE9biYmblt0XTtpWysrZV09bz9vLmFwcGx5KG4scik6d30pLGl9ZnVuY3Rpb24gZHIobix0LHIsZSx1LG8pe2lmKG49PT10KXJldHVybiAwIT09bnx8MS9uPT0xL3Q7dmFyIGk9dHlwZW9mIG4sZj10eXBlb2YgdDtpZihcImZ1bmN0aW9uXCIhPWkmJlwib2JqZWN0XCIhPWkmJlwiZnVuY3Rpb25cIiE9ZiYmXCJvYmplY3RcIiE9Znx8bnVsbD09bnx8bnVsbD09dCluPW4hPT1uJiZ0IT09dDtcbmVsc2Ugbjp7dmFyIGk9ZHIsZj1TbyhuKSxhPVNvKHQpLGM9RCxsPUQ7Znx8KGM9THUuY2FsbChuKSxjPT16P2M9WTpjIT1ZJiYoZj1ydShuKSkpLGF8fChsPUx1LmNhbGwodCksbD09ej9sPVk6bCE9WSYmcnUodCkpO3ZhciBzPWM9PVksYT1sPT1ZLGw9Yz09bDtpZighbHx8Znx8cylpZihjPXMmJlV1LmNhbGwobixcIl9fd3JhcHBlZF9fXCIpLGE9YSYmVXUuY2FsbCh0LFwiX193cmFwcGVkX19cIiksY3x8YSluPWkoYz9uLnZhbHVlKCk6bixhP3QudmFsdWUoKTp0LHIsZSx1LG8pO2Vsc2UgaWYobCl7Zm9yKHV8fCh1PVtdKSxvfHwobz1bXSksYz11Lmxlbmd0aDtjLS07KWlmKHVbY109PW4pe249b1tjXT09dDticmVhayBufXUucHVzaChuKSxvLnB1c2godCksbj0oZj9acjpKcikobix0LGkscixlLHUsbyksdS5wb3AoKSxvLnBvcCgpfWVsc2Ugbj1mYWxzZTtlbHNlIG49R3Iobix0LGMpfXJldHVybiBufWZ1bmN0aW9uIG1yKG4sdCxyLGUsdSl7dmFyIG89dC5sZW5ndGg7aWYobnVsbD09bilyZXR1cm4hbztcbmZvcih2YXIgaT0tMSxmPSF1OysraTxvOylpZihmJiZlW2ldP3JbaV0hPT1uW3RbaV1dOiFVdS5jYWxsKG4sdFtpXSkpcmV0dXJuIGZhbHNlO2ZvcihpPS0xOysraTxvOyl7dmFyIGE9dFtpXTtpZihmJiZlW2ldKWE9VXUuY2FsbChuLGEpO2Vsc2V7dmFyIGM9blthXSxsPXJbaV0sYT11P3UoYyxsLGEpOnc7dHlwZW9mIGE9PVwidW5kZWZpbmVkXCImJihhPWRyKGwsYyx1LHRydWUpKX1pZighYSlyZXR1cm4gZmFsc2V9cmV0dXJuIHRydWV9ZnVuY3Rpb24gd3Iobix0KXt2YXIgcj1bXTtyZXR1cm4gb3IobixmdW5jdGlvbihuLGUsdSl7ci5wdXNoKHQobixlLHUpKX0pLHJ9ZnVuY3Rpb24gYnIobil7dmFyIHQ9Rm8obikscj10Lmxlbmd0aDtpZigxPT1yKXt2YXIgZT10WzBdLHU9bltlXTtpZihpZSh1KSlyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIG51bGwhPW4mJm5bZV09PT11JiZVdS5jYWxsKG4sZSl9fWZvcih2YXIgbz13dShyKSxpPXd1KHIpO3ItLTspdT1uW3Rbcl1dLG9bcl09dSxpW3JdPWllKHUpO3JldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gbXIobix0LG8saSlcbn19ZnVuY3Rpb24geHIobix0KXtyZXR1cm4gaWUodCk/ZnVuY3Rpb24ocil7cmV0dXJuIG51bGwhPXImJnJbbl09PT10fTpmdW5jdGlvbihyKXtyZXR1cm4gbnVsbCE9ciYmZHIodCxyW25dLG51bGwsdHJ1ZSl9fWZ1bmN0aW9uIEFyKG4sdCxyLGUsdSl7dmFyIG89b2UodC5sZW5ndGgpJiYoU28odCl8fHJ1KHQpKTtyZXR1cm4obz9NdDpfcikodCxmdW5jdGlvbih0LGksZil7aWYoaCh0KSl7ZXx8KGU9W10pLHV8fCh1PVtdKTtuOnt0PWU7Zm9yKHZhciBhPXUsYz10Lmxlbmd0aCxsPWZbaV07Yy0tOylpZih0W2NdPT1sKXtuW2ldPWFbY10saT12b2lkIDA7YnJlYWsgbn1jPW5baV0sZj1yP3IoYyxsLGksbixmKTp3O3ZhciBzPXR5cGVvZiBmPT1cInVuZGVmaW5lZFwiO3MmJihmPWwsb2UobC5sZW5ndGgpJiYoU28obCl8fHJ1KGwpKT9mPVNvKGMpP2M6Yz96dChjKTpbXTpObyhsKXx8WWUobCk/Zj1ZZShjKT9ldShjKTpObyhjKT9jOnt9OnM9ZmFsc2UpLHQucHVzaChsKSxhLnB1c2goZikscz9uW2ldPUFyKGYsbCxyLHQsYSk6KGY9PT1mP2YhPT1jOmM9PT1jKSYmKG5baV09ZiksaT12b2lkIDBcbn1yZXR1cm4gaX1hPW5baV0sZj1yP3IoYSx0LGksbixmKTp3LChsPXR5cGVvZiBmPT1cInVuZGVmaW5lZFwiKSYmKGY9dCksIW8mJnR5cGVvZiBmPT1cInVuZGVmaW5lZFwifHwhbCYmKGY9PT1mP2Y9PT1hOmEhPT1hKXx8KG5baV09Zil9KSxufWZ1bmN0aW9uIGpyKG4pe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dD93OnRbbl19fWZ1bmN0aW9uIGtyKG4sdCl7cmV0dXJuIG4rUHUoY28oKSoodC1uKzEpKX1mdW5jdGlvbiBFcihuLHQscixlLHUpe3JldHVybiB1KG4sZnVuY3Rpb24obix1LG8pe3I9ZT8oZT1mYWxzZSxuKTp0KHIsbix1LG8pfSkscn1mdW5jdGlvbiBScihuLHQscil7dmFyIGU9LTEsdT1uLmxlbmd0aDtmb3IodD1udWxsPT10PzA6K3R8fDAsMD50JiYodD0tdD51PzA6dSt0KSxyPXR5cGVvZiByPT1cInVuZGVmaW5lZFwifHxyPnU/dTorcnx8MCwwPnImJihyKz11KSx1PXQ+cj8wOnItdD4+PjAsdD4+Pj0wLHI9d3UodSk7KytlPHU7KXJbZV09bltlK3RdO3JldHVybiByfWZ1bmN0aW9uIElyKG4sdCl7dmFyIHI7XG5yZXR1cm4gb3IobixmdW5jdGlvbihuLGUsdSl7cmV0dXJuIHI9dChuLGUsdSksIXJ9KSwhIXJ9ZnVuY3Rpb24gT3IobixyKXt2YXIgZT0tMSx1PVFyKCksbz1uLmxlbmd0aCxpPXU9PXQsZj1pJiYyMDA8PW8sYT1mJiZ4bygpLGM9W107YT8odT1CdCxpPWZhbHNlKTooZj1mYWxzZSxhPXI/W106Yyk7bjpmb3IoOysrZTxvOyl7dmFyIGw9bltlXSxzPXI/cihsLGUsbik6bDtpZihpJiZsPT09bCl7Zm9yKHZhciBwPWEubGVuZ3RoO3AtLTspaWYoYVtwXT09PXMpY29udGludWUgbjtyJiZhLnB1c2gocyksYy5wdXNoKGwpfWVsc2UgMD51KGEscykmJigocnx8ZikmJmEucHVzaChzKSxjLnB1c2gobCkpfXJldHVybiBjfWZ1bmN0aW9uIENyKG4sdCl7Zm9yKHZhciByPS0xLGU9dC5sZW5ndGgsdT13dShlKTsrK3I8ZTspdVtyXT1uW3Rbcl1dO3JldHVybiB1fWZ1bmN0aW9uIFRyKG4sdCl7dmFyIHI9bjtyIGluc3RhbmNlb2YgVXQmJihyPXIudmFsdWUoKSk7Zm9yKHZhciBlPS0xLHU9dC5sZW5ndGg7KytlPHU7KXt2YXIgcj1bcl0sbz10W2VdO1xuVnUuYXBwbHkocixvLmFyZ3MpLHI9by5mdW5jLmFwcGx5KG8udGhpc0FyZyxyKX1yZXR1cm4gcn1mdW5jdGlvbiBTcihuLHQscil7dmFyIGU9MCx1PW4/bi5sZW5ndGg6ZTtpZih0eXBlb2YgdD09XCJudW1iZXJcIiYmdD09PXQmJnU8PV9vKXtmb3IoO2U8dTspe3ZhciBvPWUrdT4+PjEsaT1uW29dOyhyP2k8PXQ6aTx0KT9lPW8rMTp1PW99cmV0dXJuIHV9cmV0dXJuIFdyKG4sdCx2dSxyKX1mdW5jdGlvbiBXcihuLHQscixlKXt0PXIodCk7Zm9yKHZhciB1PTAsbz1uP24ubGVuZ3RoOjAsaT10IT09dCxmPXR5cGVvZiB0PT1cInVuZGVmaW5lZFwiO3U8bzspe3ZhciBhPVB1KCh1K28pLzIpLGM9cihuW2FdKSxsPWM9PT1jOyhpP2x8fGU6Zj9sJiYoZXx8dHlwZW9mIGMhPVwidW5kZWZpbmVkXCIpOmU/Yzw9dDpjPHQpP3U9YSsxOm89YX1yZXR1cm4gb28obyxobyl9ZnVuY3Rpb24gTnIobix0LHIpe2lmKHR5cGVvZiBuIT1cImZ1bmN0aW9uXCIpcmV0dXJuIHZ1O2lmKHR5cGVvZiB0PT1cInVuZGVmaW5lZFwiKXJldHVybiBuO1xuc3dpdGNoKHIpe2Nhc2UgMTpyZXR1cm4gZnVuY3Rpb24ocil7cmV0dXJuIG4uY2FsbCh0LHIpfTtjYXNlIDM6cmV0dXJuIGZ1bmN0aW9uKHIsZSx1KXtyZXR1cm4gbi5jYWxsKHQscixlLHUpfTtjYXNlIDQ6cmV0dXJuIGZ1bmN0aW9uKHIsZSx1LG8pe3JldHVybiBuLmNhbGwodCxyLGUsdSxvKX07Y2FzZSA1OnJldHVybiBmdW5jdGlvbihyLGUsdSxvLGkpe3JldHVybiBuLmNhbGwodCxyLGUsdSxvLGkpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbi5hcHBseSh0LGFyZ3VtZW50cyl9fWZ1bmN0aW9uIFVyKG4pe3JldHVybiBEdS5jYWxsKG4sMCl9ZnVuY3Rpb24gRnIobix0LHIpe2Zvcih2YXIgZT1yLmxlbmd0aCx1PS0xLG89dW8obi5sZW5ndGgtZSwwKSxpPS0xLGY9dC5sZW5ndGgsYT13dShvK2YpOysraTxmOylhW2ldPXRbaV07Zm9yKDsrK3U8ZTspYVtyW3VdXT1uW3VdO2Zvcig7by0tOylhW2krK109blt1KytdO3JldHVybiBhfWZ1bmN0aW9uIExyKG4sdCxyKXtmb3IodmFyIGU9LTEsdT1yLmxlbmd0aCxvPS0xLGk9dW8obi5sZW5ndGgtdSwwKSxmPS0xLGE9dC5sZW5ndGgsYz13dShpK2EpOysrbzxpOyljW29dPW5bb107XG5mb3IoaT1vOysrZjxhOyljW2krZl09dFtmXTtmb3IoOysrZTx1OyljW2krcltlXV09bltvKytdO3JldHVybiBjfWZ1bmN0aW9uICRyKG4sdCl7cmV0dXJuIGZ1bmN0aW9uKHIsZSx1KXt2YXIgbz10P3QoKTp7fTtpZihlPUhyKGUsdSwzKSxTbyhyKSl7dT0tMTtmb3IodmFyIGk9ci5sZW5ndGg7Kyt1PGk7KXt2YXIgZj1yW3VdO24obyxmLGUoZix1LHIpLHIpfX1lbHNlIG9yKHIsZnVuY3Rpb24odCxyLHUpe24obyx0LGUodCxyLHUpLHUpfSk7cmV0dXJuIG99fWZ1bmN0aW9uIEJyKG4pe3JldHVybiBmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGgscj1hcmd1bWVudHNbMF07aWYoMj50fHxudWxsPT1yKXJldHVybiByO2lmKDM8dCYmdWUoYXJndW1lbnRzWzFdLGFyZ3VtZW50c1syXSxhcmd1bWVudHNbM10pJiYodD0yKSwzPHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGFyZ3VtZW50c1t0LTJdKXZhciBlPU5yKGFyZ3VtZW50c1stLXQtMV0sYXJndW1lbnRzW3QtLV0sNSk7ZWxzZSAyPHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGFyZ3VtZW50c1t0LTFdJiYoZT1hcmd1bWVudHNbLS10XSk7XG5mb3IodmFyIHU9MDsrK3U8dDspe3ZhciBvPWFyZ3VtZW50c1t1XTtvJiZuKHIsbyxlKX1yZXR1cm4gcn19ZnVuY3Rpb24genIobix0KXtmdW5jdGlvbiByKCl7cmV0dXJuKHRoaXMgaW5zdGFuY2VvZiByP2U6bikuYXBwbHkodCxhcmd1bWVudHMpfXZhciBlPU1yKG4pO3JldHVybiByfWZ1bmN0aW9uIERyKG4pe3JldHVybiBmdW5jdGlvbih0KXt2YXIgcj0tMTt0PXB1KGZ1KHQpKTtmb3IodmFyIGU9dC5sZW5ndGgsdT1cIlwiOysrcjxlOyl1PW4odSx0W3JdLHIpO3JldHVybiB1fX1mdW5jdGlvbiBNcihuKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgdD13byhuLnByb3RvdHlwZSkscj1uLmFwcGx5KHQsYXJndW1lbnRzKTtyZXR1cm4gWGUocik/cjp0fX1mdW5jdGlvbiBxcihuLHQpe3JldHVybiBmdW5jdGlvbihyLGUsbyl7byYmdWUocixlLG8pJiYoZT1udWxsKTt2YXIgaT1IcigpLGY9bnVsbD09ZTtpZihpPT09dHImJmZ8fChmPWZhbHNlLGU9aShlLG8sMykpLGYpe2lmKGU9U28ociksZXx8IXR1KHIpKXJldHVybiBuKGU/cjpzZShyKSk7XG5lPXV9cmV0dXJuIFhyKHIsZSx0KX19ZnVuY3Rpb24gUHIobix0LHIsZSx1LG8saSxmLGEsYyl7ZnVuY3Rpb24gbCgpe2Zvcih2YXIgYj1hcmd1bWVudHMubGVuZ3RoLGo9YixrPXd1KGIpO2otLTspa1tqXT1hcmd1bWVudHNbal07aWYoZSYmKGs9RnIoayxlLHUpKSxvJiYoaz1McihrLG8saSkpLF98fHkpe3ZhciBqPWwucGxhY2Vob2xkZXIsRT1nKGssaiksYj1iLUUubGVuZ3RoO2lmKGI8Yyl7dmFyIE89Zj96dChmKTpudWxsLGI9dW8oYy1iLDApLEM9Xz9FOm51bGwsRT1fP251bGw6RSxUPV8/azpudWxsLGs9Xz9udWxsOms7cmV0dXJuIHR8PV8/UjpJLHQmPX4oXz9JOlIpLHZ8fCh0Jj1+KHh8QSkpLGs9UHIobix0LHIsVCxDLGssRSxPLGEsYiksay5wbGFjZWhvbGRlcj1qLGt9fWlmKGo9cD9yOnRoaXMsaCYmKG49alttXSksZilmb3IoTz1rLmxlbmd0aCxiPW9vKGYubGVuZ3RoLE8pLEM9enQoayk7Yi0tOylFPWZbYl0sa1tiXT1lZShFLE8pP0NbRV06dztyZXR1cm4gcyYmYTxrLmxlbmd0aCYmKGsubGVuZ3RoPWEpLCh0aGlzIGluc3RhbmNlb2YgbD9kfHxNcihuKTpuKS5hcHBseShqLGspXG59dmFyIHM9dCZDLHA9dCZ4LGg9dCZBLF89dCZrLHY9dCZqLHk9dCZFLGQ9IWgmJk1yKG4pLG09bjtyZXR1cm4gbH1mdW5jdGlvbiBLcihuLHQscil7cmV0dXJuIG49bi5sZW5ndGgsdD0rdCxuPHQmJnJvKHQpPyh0LT1uLHI9bnVsbD09cj9cIiBcIjpyK1wiXCIsbHUocixNdSh0L3IubGVuZ3RoKSkuc2xpY2UoMCx0KSk6XCJcIn1mdW5jdGlvbiBWcihuLHQscixlKXtmdW5jdGlvbiB1KCl7Zm9yKHZhciB0PS0xLGY9YXJndW1lbnRzLmxlbmd0aCxhPS0xLGM9ZS5sZW5ndGgsbD13dShmK2MpOysrYTxjOylsW2FdPWVbYV07Zm9yKDtmLS07KWxbYSsrXT1hcmd1bWVudHNbKyt0XTtyZXR1cm4odGhpcyBpbnN0YW5jZW9mIHU/aTpuKS5hcHBseShvP3I6dGhpcyxsKX12YXIgbz10JngsaT1NcihuKTtyZXR1cm4gdX1mdW5jdGlvbiBZcihuLHQscixlLHUsbyxpLGYpe3ZhciBhPXQmQTtpZighYSYmdHlwZW9mIG4hPVwiZnVuY3Rpb25cIil0aHJvdyBuZXcgT3UoJCk7dmFyIGM9ZT9lLmxlbmd0aDowO2lmKGN8fCh0Jj1+KFJ8SSksZT11PW51bGwpLGMtPXU/dS5sZW5ndGg6MCx0Jkkpe3ZhciBsPWUscz11O1xuZT11PW51bGx9dmFyIHA9IWEmJkFvKG4pO2lmKHI9W24sdCxyLGUsdSxsLHMsbyxpLGZdLHAmJnRydWUhPT1wKXtlPXJbMV0sdD1wWzFdLGY9ZXx0LG89Q3xPLHU9eHxBLGk9b3x1fGp8RTt2YXIgbD1lJkMmJiEodCZDKSxzPWUmTyYmISh0Jk8pLGg9KHM/cjpwKVs3XSxfPShsP3I6cClbOF07bz1mPj1vJiZmPD1pJiYoZTxPfHwoc3x8bCkmJmgubGVuZ3RoPD1fKSwoIShlPj1PJiZ0PnV8fGU+dSYmdD49Tyl8fG8pJiYodCZ4JiYoclsyXT1wWzJdLGZ8PWUmeD8wOmopLChlPXBbM10pJiYodT1yWzNdLHJbM109dT9Gcih1LGUscFs0XSk6enQoZSkscls0XT11P2coclszXSxCKTp6dChwWzRdKSksKGU9cFs1XSkmJih1PXJbNV0scls1XT11P0xyKHUsZSxwWzZdKTp6dChlKSxyWzZdPXU/ZyhyWzVdLEIpOnp0KHBbNl0pKSwoZT1wWzddKSYmKHJbN109enQoZSkpLHQmQyYmKHJbOF09bnVsbD09cls4XT9wWzhdOm9vKHJbOF0scFs4XSkpLG51bGw9PXJbOV0mJihyWzldPXBbOV0pLHJbMF09cFswXSxyWzFdPWYpLHQ9clsxXSxmPXJbOV1cbn1yZXR1cm4gcls5XT1udWxsPT1mP2E/MDpuLmxlbmd0aDp1byhmLWMsMCl8fDAsKHA/Ym86am8pKHQ9PXg/enIoclswXSxyWzJdKTp0IT1SJiZ0IT0oeHxSKXx8cls0XS5sZW5ndGg/UHIuYXBwbHkodyxyKTpWci5hcHBseSh3LHIpLHIpfWZ1bmN0aW9uIFpyKG4sdCxyLGUsdSxvLGkpe3ZhciBmPS0xLGE9bi5sZW5ndGgsYz10Lmxlbmd0aCxsPXRydWU7aWYoYSE9YyYmKCF1fHxjPD1hKSlyZXR1cm4gZmFsc2U7Zm9yKDtsJiYrK2Y8YTspe3ZhciBzPW5bZl0scD10W2ZdLGw9dztpZihlJiYobD11P2UocCxzLGYpOmUocyxwLGYpKSx0eXBlb2YgbD09XCJ1bmRlZmluZWRcIilpZih1KWZvcih2YXIgaD1jO2gtLSYmKHA9dFtoXSwhKGw9cyYmcz09PXB8fHIocyxwLGUsdSxvLGkpKSk7KTtlbHNlIGw9cyYmcz09PXB8fHIocyxwLGUsdSxvLGkpfXJldHVybiEhbH1mdW5jdGlvbiBHcihuLHQscil7c3dpdGNoKHIpe2Nhc2UgTTpjYXNlIHE6cmV0dXJuK249PSt0O2Nhc2UgUDpyZXR1cm4gbi5uYW1lPT10Lm5hbWUmJm4ubWVzc2FnZT09dC5tZXNzYWdlO1xuY2FzZSBWOnJldHVybiBuIT0rbj90IT0rdDowPT1uPzEvbj09MS90Om49PSt0O2Nhc2UgWjpjYXNlIEc6cmV0dXJuIG49PXQrXCJcIn1yZXR1cm4gZmFsc2V9ZnVuY3Rpb24gSnIobix0LHIsZSx1LG8saSl7dmFyIGY9Rm8obiksYT1mLmxlbmd0aCxjPUZvKHQpLmxlbmd0aDtpZihhIT1jJiYhdSlyZXR1cm4gZmFsc2U7Zm9yKHZhciBsLGM9LTE7KytjPGE7KXt2YXIgcz1mW2NdLHA9VXUuY2FsbCh0LHMpO2lmKHApe3ZhciBoPW5bc10sXz10W3NdLHA9dztlJiYocD11P2UoXyxoLHMpOmUoaCxfLHMpKSx0eXBlb2YgcD09XCJ1bmRlZmluZWRcIiYmKHA9aCYmaD09PV98fHIoaCxfLGUsdSxvLGkpKX1pZighcClyZXR1cm4gZmFsc2U7bHx8KGw9XCJjb25zdHJ1Y3RvclwiPT1zKX1yZXR1cm4gbHx8KHI9bi5jb25zdHJ1Y3RvcixlPXQuY29uc3RydWN0b3IsIShyIT1lJiZcImNvbnN0cnVjdG9yXCJpbiBuJiZcImNvbnN0cnVjdG9yXCJpbiB0KXx8dHlwZW9mIHI9PVwiZnVuY3Rpb25cIiYmciBpbnN0YW5jZW9mIHImJnR5cGVvZiBlPT1cImZ1bmN0aW9uXCImJmUgaW5zdGFuY2VvZiBlKT90cnVlOmZhbHNlXG59ZnVuY3Rpb24gWHIobix0LHIpe3ZhciBlPXI/c286bG8sdT1lLG89dTtyZXR1cm4gb3IobixmdW5jdGlvbihuLGksZil7aT10KG4saSxmKSwoKHI/aTx1Omk+dSl8fGk9PT1lJiZpPT09bykmJih1PWksbz1uKX0pLG99ZnVuY3Rpb24gSHIobix0LHIpe3ZhciBlPVd0LmNhbGxiYWNrfHxfdSxlPWU9PT1fdT90cjplO3JldHVybiByP2Uobix0LHIpOmV9ZnVuY3Rpb24gUXIobixyLGUpe3ZhciB1PVd0LmluZGV4T2Z8fGRlLHU9dT09PWRlP3Q6dTtyZXR1cm4gbj91KG4scixlKTp1fWZ1bmN0aW9uIG5lKG4pe3ZhciB0PW4ubGVuZ3RoLHI9bmV3IG4uY29uc3RydWN0b3IodCk7cmV0dXJuIHQmJlwic3RyaW5nXCI9PXR5cGVvZiBuWzBdJiZVdS5jYWxsKG4sXCJpbmRleFwiKSYmKHIuaW5kZXg9bi5pbmRleCxyLmlucHV0PW4uaW5wdXQpLHJ9ZnVuY3Rpb24gdGUobil7cmV0dXJuIG49bi5jb25zdHJ1Y3Rvcix0eXBlb2Ygbj09XCJmdW5jdGlvblwiJiZuIGluc3RhbmNlb2Ygbnx8KG49RXUpLG5ldyBuXG59ZnVuY3Rpb24gcmUobix0LHIpe3ZhciBlPW4uY29uc3RydWN0b3I7c3dpdGNoKHQpe2Nhc2UgSjpyZXR1cm4gVXIobik7Y2FzZSBNOmNhc2UgcTpyZXR1cm4gbmV3IGUoK24pO2Nhc2UgWDpjYXNlIEg6Y2FzZSBROmNhc2UgbnQ6Y2FzZSB0dDpjYXNlIHJ0OmNhc2UgZXQ6Y2FzZSB1dDpjYXNlIG90OnJldHVybiB0PW4uYnVmZmVyLG5ldyBlKHI/VXIodCk6dCxuLmJ5dGVPZmZzZXQsbi5sZW5ndGgpO2Nhc2UgVjpjYXNlIEc6cmV0dXJuIG5ldyBlKG4pO2Nhc2UgWjp2YXIgdT1uZXcgZShuLnNvdXJjZSx5dC5leGVjKG4pKTt1Lmxhc3RJbmRleD1uLmxhc3RJbmRleH1yZXR1cm4gdX1mdW5jdGlvbiBlZShuLHQpe3JldHVybiBuPStuLHQ9bnVsbD09dD92bzp0LC0xPG4mJjA9PW4lMSYmbjx0fWZ1bmN0aW9uIHVlKG4sdCxyKXtpZighWGUocikpcmV0dXJuIGZhbHNlO3ZhciBlPXR5cGVvZiB0O3JldHVyblwibnVtYmVyXCI9PWU/KGU9ci5sZW5ndGgsZT1vZShlKSYmZWUodCxlKSk6ZT1cInN0cmluZ1wiPT1lJiZ0IGluIHIsZSYmclt0XT09PW5cbn1mdW5jdGlvbiBvZShuKXtyZXR1cm4gdHlwZW9mIG49PVwibnVtYmVyXCImJi0xPG4mJjA9PW4lMSYmbjw9dm99ZnVuY3Rpb24gaWUobil7cmV0dXJuIG49PT1uJiYoMD09PW4/MDwxL246IVhlKG4pKX1mdW5jdGlvbiBmZShuLHQpe249cGUobik7Zm9yKHZhciByPS0xLGU9dC5sZW5ndGgsdT17fTsrK3I8ZTspe3ZhciBvPXRbcl07byBpbiBuJiYodVtvXT1uW29dKX1yZXR1cm4gdX1mdW5jdGlvbiBhZShuLHQpe3ZhciByPXt9O3JldHVybiBocihuLGZ1bmN0aW9uKG4sZSx1KXt0KG4sZSx1KSYmKHJbZV09bil9KSxyfWZ1bmN0aW9uIGNlKG4pe3ZhciB0O2lmKCFoKG4pfHxMdS5jYWxsKG4pIT1ZfHwhKFV1LmNhbGwobixcImNvbnN0cnVjdG9yXCIpfHwodD1uLmNvbnN0cnVjdG9yLHR5cGVvZiB0IT1cImZ1bmN0aW9uXCJ8fHQgaW5zdGFuY2VvZiB0KSkpcmV0dXJuIGZhbHNlO3ZhciByO3JldHVybiBocihuLGZ1bmN0aW9uKG4sdCl7cj10fSksdHlwZW9mIHI9PVwidW5kZWZpbmVkXCJ8fFV1LmNhbGwobixyKVxufWZ1bmN0aW9uIGxlKG4pe2Zvcih2YXIgdD1vdShuKSxyPXQubGVuZ3RoLGU9ciYmbi5sZW5ndGgsdT1XdC5zdXBwb3J0LHU9ZSYmb2UoZSkmJihTbyhuKXx8dS5ub25FbnVtQXJncyYmWWUobikpLG89LTEsaT1bXTsrK288cjspe3ZhciBmPXRbb107KHUmJmVlKGYsZSl8fFV1LmNhbGwobixmKSkmJmkucHVzaChmKX1yZXR1cm4gaX1mdW5jdGlvbiBzZShuKXtyZXR1cm4gbnVsbD09bj9bXTpvZShuLmxlbmd0aCk/WGUobik/bjpFdShuKTppdShuKX1mdW5jdGlvbiBwZShuKXtyZXR1cm4gWGUobik/bjpFdShuKX1mdW5jdGlvbiBoZShuKXtyZXR1cm4gbiBpbnN0YW5jZW9mIFV0P24uY2xvbmUoKTpuZXcgTnQobi5fX3dyYXBwZWRfXyxuLl9fY2hhaW5fXyx6dChuLl9fYWN0aW9uc19fKSl9ZnVuY3Rpb24gX2Uobix0LHIpe3JldHVybiBuJiZuLmxlbmd0aD8oKHI/dWUobix0LHIpOm51bGw9PXQpJiYodD0xKSxScihuLDA+dD8wOnQpKTpbXX1mdW5jdGlvbiBnZShuLHQscil7dmFyIGU9bj9uLmxlbmd0aDowO1xucmV0dXJuIGU/KChyP3VlKG4sdCxyKTpudWxsPT10KSYmKHQ9MSksdD1lLSgrdHx8MCksUnIobiwwLDA+dD8wOnQpKTpbXX1mdW5jdGlvbiB2ZShuLHQscil7dmFyIGU9LTEsdT1uP24ubGVuZ3RoOjA7Zm9yKHQ9SHIodCxyLDMpOysrZTx1OylpZih0KG5bZV0sZSxuKSlyZXR1cm4gZTtyZXR1cm4tMX1mdW5jdGlvbiB5ZShuKXtyZXR1cm4gbj9uWzBdOnd9ZnVuY3Rpb24gZGUobixyLGUpe3ZhciB1PW4/bi5sZW5ndGg6MDtpZighdSlyZXR1cm4tMTtpZih0eXBlb2YgZT09XCJudW1iZXJcIillPTA+ZT91byh1K2UsMCk6ZXx8MDtlbHNlIGlmKGUpcmV0dXJuIGU9U3IobixyKSxuPW5bZV0sKHI9PT1yP3I9PT1uOm4hPT1uKT9lOi0xO3JldHVybiB0KG4scixlKX1mdW5jdGlvbiBtZShuKXtyZXR1cm4gX2UobiwxKX1mdW5jdGlvbiB3ZShuLHIsZSx1KXtpZighbnx8IW4ubGVuZ3RoKXJldHVybltdO3R5cGVvZiByIT1cImJvb2xlYW5cIiYmbnVsbCE9ciYmKHU9ZSxlPXVlKG4scix1KT9udWxsOnIscj1mYWxzZSk7XG52YXIgbz1IcigpO2lmKChvIT09dHJ8fG51bGwhPWUpJiYoZT1vKGUsdSwzKSksciYmUXIoKT09dCl7cj1lO3ZhciBpO2U9LTEsdT1uLmxlbmd0aDtmb3IodmFyIG89LTEsZj1bXTsrK2U8dTspe3ZhciBhPW5bZV0sYz1yP3IoYSxlLG4pOmE7ZSYmaT09PWN8fChpPWMsZlsrK29dPWEpfW49Zn1lbHNlIG49T3IobixlKTtyZXR1cm4gbn1mdW5jdGlvbiBiZShuKXtmb3IodmFyIHQ9LTEscj0obiYmbi5sZW5ndGgmJlZ0KEt0KG4sTnUpKSk+Pj4wLGU9d3Uocik7Kyt0PHI7KWVbdF09S3Qobixqcih0KSk7cmV0dXJuIGV9ZnVuY3Rpb24geGUobix0KXt2YXIgcj0tMSxlPW4/bi5sZW5ndGg6MCx1PXt9O2ZvcighZXx8dHx8U28oblswXSl8fCh0PVtdKTsrK3I8ZTspe3ZhciBvPW5bcl07dD91W29dPXRbcl06byYmKHVbb1swXV09b1sxXSl9cmV0dXJuIHV9ZnVuY3Rpb24gQWUobil7cmV0dXJuIG49V3Qobiksbi5fX2NoYWluX189dHJ1ZSxufWZ1bmN0aW9uIGplKG4sdCxyKXtyZXR1cm4gdC5jYWxsKHIsbilcbn1mdW5jdGlvbiBrZShuLHQscil7dmFyIGU9bj9uLmxlbmd0aDowO3JldHVybiBvZShlKXx8KG49aXUobiksZT1uLmxlbmd0aCksZT8ocj10eXBlb2Ygcj09XCJudW1iZXJcIj8wPnI/dW8oZStyLDApOnJ8fDA6MCx0eXBlb2Ygbj09XCJzdHJpbmdcInx8IVNvKG4pJiZ0dShuKT9yPGUmJi0xPG4uaW5kZXhPZih0LHIpOi0xPFFyKG4sdCxyKSk6ZmFsc2V9ZnVuY3Rpb24gRWUobix0LHIpe3ZhciBlPVNvKG4pP3F0OmZyO3JldHVybih0eXBlb2YgdCE9XCJmdW5jdGlvblwifHx0eXBlb2YgciE9XCJ1bmRlZmluZWRcIikmJih0PUhyKHQsciwzKSksZShuLHQpfWZ1bmN0aW9uIFJlKG4sdCxyKXt2YXIgZT1TbyhuKT9QdDphcjtyZXR1cm4gdD1Icih0LHIsMyksZShuLHQpfWZ1bmN0aW9uIEllKG4sdCxyKXtyZXR1cm4gU28obik/KHQ9dmUobix0LHIpLC0xPHQ/blt0XTp3KToodD1Icih0LHIsMyksY3Iobix0LG9yKSl9ZnVuY3Rpb24gT2Uobix0LHIpe3JldHVybiB0eXBlb2YgdD09XCJmdW5jdGlvblwiJiZ0eXBlb2Ygcj09XCJ1bmRlZmluZWRcIiYmU28obik/TXQobix0KTpvcihuLE5yKHQsciwzKSlcbn1mdW5jdGlvbiBDZShuLHQscil7aWYodHlwZW9mIHQ9PVwiZnVuY3Rpb25cIiYmdHlwZW9mIHI9PVwidW5kZWZpbmVkXCImJlNvKG4pKWZvcihyPW4ubGVuZ3RoO3ItLSYmZmFsc2UhPT10KG5bcl0scixuKTspO2Vsc2Ugbj1pcihuLE5yKHQsciwzKSk7cmV0dXJuIG59ZnVuY3Rpb24gVGUobix0LHIpe3ZhciBlPVNvKG4pP0t0OndyO3JldHVybiB0PUhyKHQsciwzKSxlKG4sdCl9ZnVuY3Rpb24gU2Uobix0LHIsZSl7cmV0dXJuKFNvKG4pP1l0OkVyKShuLEhyKHQsZSw0KSxyLDM+YXJndW1lbnRzLmxlbmd0aCxvcil9ZnVuY3Rpb24gV2Uobix0LHIsZSl7cmV0dXJuKFNvKG4pP1p0OkVyKShuLEhyKHQsZSw0KSxyLDM+YXJndW1lbnRzLmxlbmd0aCxpcil9ZnVuY3Rpb24gTmUobix0LHIpe3JldHVybihyP3VlKG4sdCxyKTpudWxsPT10KT8obj1zZShuKSx0PW4ubGVuZ3RoLDA8dD9uW2tyKDAsdC0xKV06dyk6KG49VWUobiksbi5sZW5ndGg9b28oMD50PzA6K3R8fDAsbi5sZW5ndGgpLG4pfWZ1bmN0aW9uIFVlKG4pe249c2Uobik7XG5mb3IodmFyIHQ9LTEscj1uLmxlbmd0aCxlPXd1KHIpOysrdDxyOyl7dmFyIHU9a3IoMCx0KTt0IT11JiYoZVt0XT1lW3VdKSxlW3VdPW5bdF19cmV0dXJuIGV9ZnVuY3Rpb24gRmUobix0LHIpe3ZhciBlPVNvKG4pP0d0OklyO3JldHVybih0eXBlb2YgdCE9XCJmdW5jdGlvblwifHx0eXBlb2YgciE9XCJ1bmRlZmluZWRcIikmJih0PUhyKHQsciwzKSksZShuLHQpfWZ1bmN0aW9uIExlKG4sdCl7dmFyIHI7aWYodHlwZW9mIHQhPVwiZnVuY3Rpb25cIil7aWYodHlwZW9mIG4hPVwiZnVuY3Rpb25cIil0aHJvdyBuZXcgT3UoJCk7dmFyIGU9bjtuPXQsdD1lfXJldHVybiBmdW5jdGlvbigpe3JldHVybiAwPC0tbj9yPXQuYXBwbHkodGhpcyxhcmd1bWVudHMpOnQ9bnVsbCxyfX1mdW5jdGlvbiAkZShuLHQpe3ZhciByPXg7aWYoMjxhcmd1bWVudHMubGVuZ3RoKXZhciBlPVJyKGFyZ3VtZW50cywyKSx1PWcoZSwkZS5wbGFjZWhvbGRlcikscj1yfFI7cmV0dXJuIFlyKG4scix0LGUsdSl9ZnVuY3Rpb24gQmUobix0KXt2YXIgcj14fEE7XG5pZigyPGFyZ3VtZW50cy5sZW5ndGgpdmFyIGU9UnIoYXJndW1lbnRzLDIpLHU9ZyhlLEJlLnBsYWNlaG9sZGVyKSxyPXJ8UjtyZXR1cm4gWXIodCxyLG4sZSx1KX1mdW5jdGlvbiB6ZShuLHQscil7cmV0dXJuIHImJnVlKG4sdCxyKSYmKHQ9bnVsbCksbj1ZcihuLGssbnVsbCxudWxsLG51bGwsbnVsbCxudWxsLHQpLG4ucGxhY2Vob2xkZXI9emUucGxhY2Vob2xkZXIsbn1mdW5jdGlvbiBEZShuLHQscil7cmV0dXJuIHImJnVlKG4sdCxyKSYmKHQ9bnVsbCksbj1ZcihuLEUsbnVsbCxudWxsLG51bGwsbnVsbCxudWxsLHQpLG4ucGxhY2Vob2xkZXI9RGUucGxhY2Vob2xkZXIsbn1mdW5jdGlvbiBNZShuLHQscil7ZnVuY3Rpb24gZSgpe3ZhciByPXQtKFRvKCktYyk7MD49cnx8cj50PyhmJiZxdShmKSxyPXAsZj1zPXA9dyxyJiYoaD1UbygpLGE9bi5hcHBseShsLGkpLHN8fGZ8fChpPWw9bnVsbCkpKTpzPUd1KGUscil9ZnVuY3Rpb24gdSgpe3MmJnF1KHMpLGY9cz1wPXcsKGd8fF8hPT10KSYmKGg9VG8oKSxhPW4uYXBwbHkobCxpKSxzfHxmfHwoaT1sPW51bGwpKVxufWZ1bmN0aW9uIG8oKXtpZihpPWFyZ3VtZW50cyxjPVRvKCksbD10aGlzLHA9ZyYmKHN8fCF2KSxmYWxzZT09PV8pdmFyIHI9diYmIXM7ZWxzZXtmfHx2fHwoaD1jKTt2YXIgbz1fLShjLWgpLHk9MD49b3x8bz5fO3k/KGYmJihmPXF1KGYpKSxoPWMsYT1uLmFwcGx5KGwsaSkpOmZ8fChmPUd1KHUsbykpfXJldHVybiB5JiZzP3M9cXUocyk6c3x8dD09PV98fChzPUd1KGUsdCkpLHImJih5PXRydWUsYT1uLmFwcGx5KGwsaSkpLCF5fHxzfHxmfHwoaT1sPW51bGwpLGF9dmFyIGksZixhLGMsbCxzLHAsaD0wLF89ZmFsc2UsZz10cnVlO2lmKHR5cGVvZiBuIT1cImZ1bmN0aW9uXCIpdGhyb3cgbmV3IE91KCQpO2lmKHQ9MD50PzA6dCx0cnVlPT09cil2YXIgdj10cnVlLGc9ZmFsc2U7ZWxzZSBYZShyKSYmKHY9ci5sZWFkaW5nLF89XCJtYXhXYWl0XCJpbiByJiZ1bygrci5tYXhXYWl0fHwwLHQpLGc9XCJ0cmFpbGluZ1wiaW4gcj9yLnRyYWlsaW5nOmcpO3JldHVybiBvLmNhbmNlbD1mdW5jdGlvbigpe3MmJnF1KHMpLGYmJnF1KGYpLGY9cz1wPXdcbn0sb31mdW5jdGlvbiBxZSgpe3ZhciBuPWFyZ3VtZW50cyx0PW4ubGVuZ3RoLTE7aWYoMD50KXJldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gbn07aWYoIXF0KG4sSmUpKXRocm93IG5ldyBPdSgkKTtyZXR1cm4gZnVuY3Rpb24oKXtmb3IodmFyIHI9dCxlPW5bcl0uYXBwbHkodGhpcyxhcmd1bWVudHMpO3ItLTspZT1uW3JdLmNhbGwodGhpcyxlKTtyZXR1cm4gZX19ZnVuY3Rpb24gUGUobix0KXtmdW5jdGlvbiByKCl7dmFyIGU9ci5jYWNoZSx1PXQ/dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk6YXJndW1lbnRzWzBdO2lmKGUuaGFzKHUpKXJldHVybiBlLmdldCh1KTt2YXIgbz1uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gZS5zZXQodSxvKSxvfWlmKHR5cGVvZiBuIT1cImZ1bmN0aW9uXCJ8fHQmJnR5cGVvZiB0IT1cImZ1bmN0aW9uXCIpdGhyb3cgbmV3IE91KCQpO3JldHVybiByLmNhY2hlPW5ldyBQZS5DYWNoZSxyfWZ1bmN0aW9uIEtlKG4pe3ZhciB0PVJyKGFyZ3VtZW50cywxKSxyPWcodCxLZS5wbGFjZWhvbGRlcik7XG5yZXR1cm4gWXIobixSLG51bGwsdCxyKX1mdW5jdGlvbiBWZShuKXt2YXIgdD1Scihhcmd1bWVudHMsMSkscj1nKHQsVmUucGxhY2Vob2xkZXIpO3JldHVybiBZcihuLEksbnVsbCx0LHIpfWZ1bmN0aW9uIFllKG4pe3JldHVybiBvZShoKG4pP24ubGVuZ3RoOncpJiZMdS5jYWxsKG4pPT16fHxmYWxzZX1mdW5jdGlvbiBaZShuKXtyZXR1cm4gbiYmMT09PW4ubm9kZVR5cGUmJmgobikmJi0xPEx1LmNhbGwobikuaW5kZXhPZihcIkVsZW1lbnRcIil8fGZhbHNlfWZ1bmN0aW9uIEdlKG4pe3JldHVybiBoKG4pJiZ0eXBlb2Ygbi5tZXNzYWdlPT1cInN0cmluZ1wiJiZMdS5jYWxsKG4pPT1QfHxmYWxzZX1mdW5jdGlvbiBKZShuKXtyZXR1cm4gdHlwZW9mIG49PVwiZnVuY3Rpb25cInx8ZmFsc2V9ZnVuY3Rpb24gWGUobil7dmFyIHQ9dHlwZW9mIG47cmV0dXJuXCJmdW5jdGlvblwiPT10fHxuJiZcIm9iamVjdFwiPT10fHxmYWxzZX1mdW5jdGlvbiBIZShuKXtyZXR1cm4gbnVsbD09bj9mYWxzZTpMdS5jYWxsKG4pPT1LP0J1LnRlc3QoV3UuY2FsbChuKSk6aChuKSYmd3QudGVzdChuKXx8ZmFsc2Vcbn1mdW5jdGlvbiBRZShuKXtyZXR1cm4gdHlwZW9mIG49PVwibnVtYmVyXCJ8fGgobikmJkx1LmNhbGwobik9PVZ8fGZhbHNlfWZ1bmN0aW9uIG51KG4pe3JldHVybiBoKG4pJiZMdS5jYWxsKG4pPT1afHxmYWxzZX1mdW5jdGlvbiB0dShuKXtyZXR1cm4gdHlwZW9mIG49PVwic3RyaW5nXCJ8fGgobikmJkx1LmNhbGwobik9PUd8fGZhbHNlfWZ1bmN0aW9uIHJ1KG4pe3JldHVybiBoKG4pJiZvZShuLmxlbmd0aCkmJkN0W0x1LmNhbGwobildfHxmYWxzZX1mdW5jdGlvbiBldShuKXtyZXR1cm4gbnIobixvdShuKSl9ZnVuY3Rpb24gdXUobil7cmV0dXJuIHZyKG4sb3UobikpfWZ1bmN0aW9uIG91KG4pe2lmKG51bGw9PW4pcmV0dXJuW107WGUobil8fChuPUV1KG4pKTtmb3IodmFyIHQ9bi5sZW5ndGgsdD10JiZvZSh0KSYmKFNvKG4pfHxtby5ub25FbnVtQXJncyYmWWUobikpJiZ0fHwwLHI9bi5jb25zdHJ1Y3RvcixlPS0xLHI9dHlwZW9mIHI9PVwiZnVuY3Rpb25cIiYmci5wcm90b3R5cGU9PT1uLHU9d3UodCksbz0wPHQ7KytlPHQ7KXVbZV09ZStcIlwiO1xuZm9yKHZhciBpIGluIG4pbyYmZWUoaSx0KXx8XCJjb25zdHJ1Y3RvclwiPT1pJiYocnx8IVV1LmNhbGwobixpKSl8fHUucHVzaChpKTtyZXR1cm4gdX1mdW5jdGlvbiBpdShuKXtyZXR1cm4gQ3IobixGbyhuKSl9ZnVuY3Rpb24gZnUobil7cmV0dXJuKG49ZShuKSkmJm4ucmVwbGFjZShidCxjKX1mdW5jdGlvbiBhdShuKXtyZXR1cm4obj1lKG4pKSYmanQudGVzdChuKT9uLnJlcGxhY2UoQXQsXCJcXFxcJCZcIik6bn1mdW5jdGlvbiBjdShuLHQscil7cmV0dXJuIHImJnVlKG4sdCxyKSYmKHQ9MCksYW8obix0KX1mdW5jdGlvbiBsdShuLHQpe3ZhciByPVwiXCI7aWYobj1lKG4pLHQ9K3QsMT50fHwhbnx8IXJvKHQpKXJldHVybiByO2RvIHQlMiYmKHIrPW4pLHQ9UHUodC8yKSxuKz1uO3doaWxlKHQpO3JldHVybiByfWZ1bmN0aW9uIHN1KG4sdCxyKXt2YXIgdT1uO3JldHVybihuPWUobikpPyhyP3VlKHUsdCxyKTpudWxsPT10KT9uLnNsaWNlKHYobikseShuKSsxKToodCs9XCJcIixuLnNsaWNlKG8obix0KSxpKG4sdCkrMSkpOm5cbn1mdW5jdGlvbiBwdShuLHQscil7cmV0dXJuIHImJnVlKG4sdCxyKSYmKHQ9bnVsbCksbj1lKG4pLG4ubWF0Y2godHx8UnQpfHxbXX1mdW5jdGlvbiBodShuKXt0cnl7cmV0dXJuIG4uYXBwbHkodyxScihhcmd1bWVudHMsMSkpfWNhdGNoKHQpe3JldHVybiBHZSh0KT90Om5ldyB4dSh0KX19ZnVuY3Rpb24gX3Uobix0LHIpe3JldHVybiByJiZ1ZShuLHQscikmJih0PW51bGwpLGgobik/eXUobik6dHIobix0KX1mdW5jdGlvbiBndShuKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbn19ZnVuY3Rpb24gdnUobil7cmV0dXJuIG59ZnVuY3Rpb24geXUobil7cmV0dXJuIGJyKHJyKG4sdHJ1ZSkpfWZ1bmN0aW9uIGR1KG4sdCxyKXtpZihudWxsPT1yKXt2YXIgZT1YZSh0KSx1PWUmJkZvKHQpOygodT11JiZ1Lmxlbmd0aCYmdnIodCx1KSk/dS5sZW5ndGg6ZSl8fCh1PWZhbHNlLHI9dCx0PW4sbj10aGlzKX11fHwodT12cih0LEZvKHQpKSk7dmFyIG89dHJ1ZSxlPS0xLGk9SmUobiksZj11Lmxlbmd0aDtcbiExPT09cj9vPWZhbHNlOlhlKHIpJiZcImNoYWluXCJpbiByJiYobz1yLmNoYWluKTtmb3IoOysrZTxmOyl7cj11W2VdO3ZhciBhPXRbcl07bltyXT1hLGkmJihuLnByb3RvdHlwZVtyXT1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgcj10aGlzLl9fY2hhaW5fXztpZihvfHxyKXt2YXIgZT1uKHRoaXMuX193cmFwcGVkX18pO3JldHVybihlLl9fYWN0aW9uc19fPXp0KHRoaXMuX19hY3Rpb25zX18pKS5wdXNoKHtmdW5jOnQsYXJnczphcmd1bWVudHMsdGhpc0FyZzpufSksZS5fX2NoYWluX189cixlfXJldHVybiByPVt0aGlzLnZhbHVlKCldLFZ1LmFwcGx5KHIsYXJndW1lbnRzKSx0LmFwcGx5KG4scil9fShhKSl9cmV0dXJuIG59ZnVuY3Rpb24gbXUoKXt9Xz1fP0R0LmRlZmF1bHRzKCR0Lk9iamVjdCgpLF8sRHQucGljaygkdCxPdCkpOiR0O3ZhciB3dT1fLkFycmF5LGJ1PV8uRGF0ZSx4dT1fLkVycm9yLEF1PV8uRnVuY3Rpb24sanU9Xy5NYXRoLGt1PV8uTnVtYmVyLEV1PV8uT2JqZWN0LFJ1PV8uUmVnRXhwLEl1PV8uU3RyaW5nLE91PV8uVHlwZUVycm9yLEN1PXd1LnByb3RvdHlwZSxUdT1FdS5wcm90b3R5cGUsU3U9KFN1PV8ud2luZG93KSYmU3UuZG9jdW1lbnQsV3U9QXUucHJvdG90eXBlLnRvU3RyaW5nLE51PWpyKFwibGVuZ3RoXCIpLFV1PVR1Lmhhc093blByb3BlcnR5LEZ1PTAsTHU9VHUudG9TdHJpbmcsJHU9Xy5fLEJ1PVJ1KFwiXlwiK2F1KEx1KS5yZXBsYWNlKC90b1N0cmluZ3woZnVuY3Rpb24pLio/KD89XFxcXFxcKCl8IGZvciAuKz8oPz1cXFxcXFxdKS9nLFwiJDEuKj9cIikrXCIkXCIpLHp1PUhlKHp1PV8uQXJyYXlCdWZmZXIpJiZ6dSxEdT1IZShEdT16dSYmbmV3IHp1KDApLnNsaWNlKSYmRHUsTXU9anUuY2VpbCxxdT1fLmNsZWFyVGltZW91dCxQdT1qdS5mbG9vcixLdT1IZShLdT1FdS5nZXRQcm90b3R5cGVPZikmJkt1LFZ1PUN1LnB1c2gsWXU9VHUucHJvcGVydHlJc0VudW1lcmFibGUsWnU9SGUoWnU9Xy5TZXQpJiZadSxHdT1fLnNldFRpbWVvdXQsSnU9Q3Uuc3BsaWNlLFh1PUhlKFh1PV8uVWludDhBcnJheSkmJlh1LEh1PUhlKEh1PV8uV2Vha01hcCkmJkh1LFF1PWZ1bmN0aW9uKCl7dHJ5e3ZhciBuPUhlKG49Xy5GbG9hdDY0QXJyYXkpJiZuLHQ9bmV3IG4obmV3IHp1KDEwKSwwLDEpJiZuXG59Y2F0Y2gocil7fXJldHVybiB0fSgpLG5vPUhlKG5vPXd1LmlzQXJyYXkpJiZubyx0bz1IZSh0bz1FdS5jcmVhdGUpJiZ0byxybz1fLmlzRmluaXRlLGVvPUhlKGVvPUV1LmtleXMpJiZlbyx1bz1qdS5tYXgsb289anUubWluLGlvPUhlKGlvPWJ1Lm5vdykmJmlvLGZvPUhlKGZvPWt1LmlzRmluaXRlKSYmZm8sYW89Xy5wYXJzZUludCxjbz1qdS5yYW5kb20sbG89a3UuTkVHQVRJVkVfSU5GSU5JVFksc289a3UuUE9TSVRJVkVfSU5GSU5JVFkscG89anUucG93KDIsMzIpLTEsaG89cG8tMSxfbz1wbz4+PjEsZ289UXU/UXUuQllURVNfUEVSX0VMRU1FTlQ6MCx2bz1qdS5wb3coMiw1MyktMSx5bz1IdSYmbmV3IEh1LG1vPVd0LnN1cHBvcnQ9e307IWZ1bmN0aW9uKG4pe21vLmZ1bmNEZWNvbXA9IUhlKF8uV2luUlRFcnJvcikmJmt0LnRlc3QobSksbW8uZnVuY05hbWVzPXR5cGVvZiBBdS5uYW1lPT1cInN0cmluZ1wiO3RyeXttby5kb209MTE9PT1TdS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkubm9kZVR5cGVcbn1jYXRjaCh0KXttby5kb209ZmFsc2V9dHJ5e21vLm5vbkVudW1BcmdzPSFZdS5jYWxsKGFyZ3VtZW50cywxKX1jYXRjaChyKXttby5ub25FbnVtQXJncz10cnVlfX0oMCwwKSxXdC50ZW1wbGF0ZVNldHRpbmdzPXtlc2NhcGU6aHQsZXZhbHVhdGU6X3QsaW50ZXJwb2xhdGU6Z3QsdmFyaWFibGU6XCJcIixpbXBvcnRzOntfOld0fX07dmFyIHdvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbigpe31yZXR1cm4gZnVuY3Rpb24odCl7aWYoWGUodCkpe24ucHJvdG90eXBlPXQ7dmFyIHI9bmV3IG47bi5wcm90b3R5cGU9bnVsbH1yZXR1cm4gcnx8Xy5PYmplY3QoKX19KCksYm89eW8/ZnVuY3Rpb24obix0KXtyZXR1cm4geW8uc2V0KG4sdCksbn06dnU7RHV8fChVcj16dSYmWHU/ZnVuY3Rpb24obil7dmFyIHQ9bi5ieXRlTGVuZ3RoLHI9UXU/UHUodC9nbyk6MCxlPXIqZ28sdT1uZXcgenUodCk7aWYocil7dmFyIG89bmV3IFF1KHUsMCxyKTtvLnNldChuZXcgUXUobiwwLHIpKX1yZXR1cm4gdCE9ZSYmKG89bmV3IFh1KHUsZSksby5zZXQobmV3IFh1KG4sZSkpKSx1XG59Omd1KG51bGwpKTt2YXIgeG89dG8mJlp1P2Z1bmN0aW9uKG4pe3JldHVybiBuZXcgTHQobil9Omd1KG51bGwpLEFvPXlvP2Z1bmN0aW9uKG4pe3JldHVybiB5by5nZXQobil9Om11LGpvPWZ1bmN0aW9uKCl7dmFyIG49MCx0PTA7cmV0dXJuIGZ1bmN0aW9uKHIsZSl7dmFyIHU9VG8oKSxvPU4tKHUtdCk7aWYodD11LDA8byl7aWYoKytuPj1XKXJldHVybiByfWVsc2Ugbj0wO3JldHVybiBibyhyLGUpfX0oKSxrbz0kcihmdW5jdGlvbihuLHQscil7VXUuY2FsbChuLHIpPysrbltyXTpuW3JdPTF9KSxFbz0kcihmdW5jdGlvbihuLHQscil7VXUuY2FsbChuLHIpP25bcl0ucHVzaCh0KTpuW3JdPVt0XX0pLFJvPSRyKGZ1bmN0aW9uKG4sdCxyKXtuW3JdPXR9KSxJbz1xcihWdCksT289cXIoZnVuY3Rpb24obil7Zm9yKHZhciB0PS0xLHI9bi5sZW5ndGgsZT1zbzsrK3Q8cjspe3ZhciB1PW5bdF07dTxlJiYoZT11KX1yZXR1cm4gZX0sdHJ1ZSksQ289JHIoZnVuY3Rpb24obix0LHIpe25bcj8wOjFdLnB1c2godClcbn0sZnVuY3Rpb24oKXtyZXR1cm5bW10sW11dfSksVG89aW98fGZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBidSkuZ2V0VGltZSgpfSxTbz1ub3x8ZnVuY3Rpb24obil7cmV0dXJuIGgobikmJm9lKG4ubGVuZ3RoKSYmTHUuY2FsbChuKT09RHx8ZmFsc2V9O21vLmRvbXx8KFplPWZ1bmN0aW9uKG4pe3JldHVybiBuJiYxPT09bi5ub2RlVHlwZSYmaChuKSYmIU5vKG4pfHxmYWxzZX0pO3ZhciBXbz1mb3x8ZnVuY3Rpb24obil7cmV0dXJuIHR5cGVvZiBuPT1cIm51bWJlclwiJiZybyhuKX07KEplKC94Lyl8fFh1JiYhSmUoWHUpKSYmKEplPWZ1bmN0aW9uKG4pe3JldHVybiBMdS5jYWxsKG4pPT1LfSk7dmFyIE5vPUt1P2Z1bmN0aW9uKG4pe2lmKCFufHxMdS5jYWxsKG4pIT1ZKXJldHVybiBmYWxzZTt2YXIgdD1uLnZhbHVlT2Yscj1IZSh0KSYmKHI9S3UodCkpJiZLdShyKTtyZXR1cm4gcj9uPT1yfHxLdShuKT09cjpjZShuKX06Y2UsVW89QnIoSHQpLEZvPWVvP2Z1bmN0aW9uKG4pe2lmKG4pdmFyIHQ9bi5jb25zdHJ1Y3RvcixyPW4ubGVuZ3RoO1xucmV0dXJuIHR5cGVvZiB0PT1cImZ1bmN0aW9uXCImJnQucHJvdG90eXBlPT09bnx8dHlwZW9mIG4hPVwiZnVuY3Rpb25cIiYmciYmb2Uocik/bGUobik6WGUobik/ZW8obik6W119OmxlLExvPUJyKEFyKSwkbz1EcihmdW5jdGlvbihuLHQscil7cmV0dXJuIHQ9dC50b0xvd2VyQ2FzZSgpLG4rKHI/dC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpOnQpfSksQm89RHIoZnVuY3Rpb24obix0LHIpe3JldHVybiBuKyhyP1wiLVwiOlwiXCIpK3QudG9Mb3dlckNhc2UoKX0pOzghPWFvKEl0K1wiMDhcIikmJihjdT1mdW5jdGlvbihuLHQscil7cmV0dXJuKHI/dWUobix0LHIpOm51bGw9PXQpP3Q9MDp0JiYodD0rdCksbj1zdShuKSxhbyhuLHR8fChtdC50ZXN0KG4pPzE2OjEwKSl9KTt2YXIgem89RHIoZnVuY3Rpb24obix0LHIpe3JldHVybiBuKyhyP1wiX1wiOlwiXCIpK3QudG9Mb3dlckNhc2UoKX0pLERvPURyKGZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gbisocj9cIiBcIjpcIlwiKSsodC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpKVxufSk7cmV0dXJuIE50LnByb3RvdHlwZT13byhXdC5wcm90b3R5cGUpLFV0LnByb3RvdHlwZT13byhOdC5wcm90b3R5cGUpLFV0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1VdCxGdC5wcm90b3R5cGVbXCJkZWxldGVcIl09ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMuaGFzKG4pJiZkZWxldGUgdGhpcy5fX2RhdGFfX1tuXX0sRnQucHJvdG90eXBlLmdldD1mdW5jdGlvbihuKXtyZXR1cm5cIl9fcHJvdG9fX1wiPT1uP3c6dGhpcy5fX2RhdGFfX1tuXX0sRnQucHJvdG90eXBlLmhhcz1mdW5jdGlvbihuKXtyZXR1cm5cIl9fcHJvdG9fX1wiIT1uJiZVdS5jYWxsKHRoaXMuX19kYXRhX18sbil9LEZ0LnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24obix0KXtyZXR1cm5cIl9fcHJvdG9fX1wiIT1uJiYodGhpcy5fX2RhdGFfX1tuXT10KSx0aGlzfSxMdC5wcm90b3R5cGUucHVzaD1mdW5jdGlvbihuKXt2YXIgdD10aGlzLmRhdGE7dHlwZW9mIG49PVwic3RyaW5nXCJ8fFhlKG4pP3Quc2V0LmFkZChuKTp0Lmhhc2hbbl09dHJ1ZVxufSxQZS5DYWNoZT1GdCxXdC5hZnRlcj1mdW5jdGlvbihuLHQpe2lmKHR5cGVvZiB0IT1cImZ1bmN0aW9uXCIpe2lmKHR5cGVvZiBuIT1cImZ1bmN0aW9uXCIpdGhyb3cgbmV3IE91KCQpO3ZhciByPW47bj10LHQ9cn1yZXR1cm4gbj1ybyhuPStuKT9uOjAsZnVuY3Rpb24oKXtyZXR1cm4gMT4tLW4/dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dm9pZCAwfX0sV3QuYXJ5PWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gciYmdWUobix0LHIpJiYodD1udWxsKSx0PW4mJm51bGw9PXQ/bi5sZW5ndGg6dW8oK3R8fDAsMCksWXIobixDLG51bGwsbnVsbCxudWxsLG51bGwsdCl9LFd0LmFzc2lnbj1VbyxXdC5hdD1mdW5jdGlvbihuKXtyZXR1cm4gb2Uobj9uLmxlbmd0aDowKSYmKG49c2UobikpLFF0KG4sbHIoYXJndW1lbnRzLGZhbHNlLGZhbHNlLDEpKX0sV3QuYmVmb3JlPUxlLFd0LmJpbmQ9JGUsV3QuYmluZEFsbD1mdW5jdGlvbihuKXtmb3IodmFyIHQ9bixyPTE8YXJndW1lbnRzLmxlbmd0aD9scihhcmd1bWVudHMsZmFsc2UsZmFsc2UsMSk6dXUobiksZT0tMSx1PXIubGVuZ3RoOysrZTx1Oyl7dmFyIG89cltlXTtcbnRbb109WXIodFtvXSx4LHQpfXJldHVybiB0fSxXdC5iaW5kS2V5PUJlLFd0LmNhbGxiYWNrPV91LFd0LmNoYWluPUFlLFd0LmNodW5rPWZ1bmN0aW9uKG4sdCxyKXt0PShyP3VlKG4sdCxyKTpudWxsPT10KT8xOnVvKCt0fHwxLDEpLHI9MDtmb3IodmFyIGU9bj9uLmxlbmd0aDowLHU9LTEsbz13dShNdShlL3QpKTtyPGU7KW9bKyt1XT1ScihuLHIscis9dCk7cmV0dXJuIG99LFd0LmNvbXBhY3Q9ZnVuY3Rpb24obil7Zm9yKHZhciB0PS0xLHI9bj9uLmxlbmd0aDowLGU9LTEsdT1bXTsrK3Q8cjspe3ZhciBvPW5bdF07byYmKHVbKytlXT1vKX1yZXR1cm4gdX0sV3QuY29uc3RhbnQ9Z3UsV3QuY291bnRCeT1rbyxXdC5jcmVhdGU9ZnVuY3Rpb24obix0LHIpe3ZhciBlPXdvKG4pO3JldHVybiByJiZ1ZShuLHQscikmJih0PW51bGwpLHQ/bnIodCxlLEZvKHQpKTplfSxXdC5jdXJyeT16ZSxXdC5jdXJyeVJpZ2h0PURlLFd0LmRlYm91bmNlPU1lLFd0LmRlZmF1bHRzPWZ1bmN0aW9uKG4pe2lmKG51bGw9PW4pcmV0dXJuIG47XG52YXIgdD16dChhcmd1bWVudHMpO3JldHVybiB0LnB1c2goSnQpLFVvLmFwcGx5KHcsdCl9LFd0LmRlZmVyPWZ1bmN0aW9uKG4pe3JldHVybiBlcihuLDEsYXJndW1lbnRzLDEpfSxXdC5kZWxheT1mdW5jdGlvbihuLHQpe3JldHVybiBlcihuLHQsYXJndW1lbnRzLDIpfSxXdC5kaWZmZXJlbmNlPWZ1bmN0aW9uKCl7Zm9yKHZhciBuPS0xLHQ9YXJndW1lbnRzLmxlbmd0aDsrK248dDspe3ZhciByPWFyZ3VtZW50c1tuXTtpZihTbyhyKXx8WWUocikpYnJlYWt9cmV0dXJuIHVyKHIsbHIoYXJndW1lbnRzLGZhbHNlLHRydWUsKytuKSl9LFd0LmRyb3A9X2UsV3QuZHJvcFJpZ2h0PWdlLFd0LmRyb3BSaWdodFdoaWxlPWZ1bmN0aW9uKG4sdCxyKXt2YXIgZT1uP24ubGVuZ3RoOjA7aWYoIWUpcmV0dXJuW107Zm9yKHQ9SHIodCxyLDMpO2UtLSYmdChuW2VdLGUsbik7KTtyZXR1cm4gUnIobiwwLGUrMSl9LFd0LmRyb3BXaGlsZT1mdW5jdGlvbihuLHQscil7dmFyIGU9bj9uLmxlbmd0aDowO2lmKCFlKXJldHVybltdO1xudmFyIHU9LTE7Zm9yKHQ9SHIodCxyLDMpOysrdTxlJiZ0KG5bdV0sdSxuKTspO3JldHVybiBScihuLHUpfSxXdC5maWxsPWZ1bmN0aW9uKG4sdCxyLGUpe3ZhciB1PW4/bi5sZW5ndGg6MDtpZighdSlyZXR1cm5bXTtmb3IociYmdHlwZW9mIHIhPVwibnVtYmVyXCImJnVlKG4sdCxyKSYmKHI9MCxlPXUpLHU9bi5sZW5ndGgscj1udWxsPT1yPzA6K3J8fDAsMD5yJiYocj0tcj51PzA6dStyKSxlPXR5cGVvZiBlPT1cInVuZGVmaW5lZFwifHxlPnU/dTorZXx8MCwwPmUmJihlKz11KSx1PXI+ZT8wOmU+Pj4wLHI+Pj49MDtyPHU7KW5bcisrXT10O3JldHVybiBufSxXdC5maWx0ZXI9UmUsV3QuZmxhdHRlbj1mdW5jdGlvbihuLHQscil7dmFyIGU9bj9uLmxlbmd0aDowO3JldHVybiByJiZ1ZShuLHQscikmJih0PWZhbHNlKSxlP2xyKG4sdCk6W119LFd0LmZsYXR0ZW5EZWVwPWZ1bmN0aW9uKG4pe3JldHVybiBuJiZuLmxlbmd0aD9scihuLHRydWUpOltdfSxXdC5mbG93PWZ1bmN0aW9uKCl7dmFyIG49YXJndW1lbnRzLHQ9bi5sZW5ndGg7XG5pZighdClyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIG59O2lmKCFxdChuLEplKSl0aHJvdyBuZXcgT3UoJCk7cmV0dXJuIGZ1bmN0aW9uKCl7Zm9yKHZhciByPTAsZT1uW3JdLmFwcGx5KHRoaXMsYXJndW1lbnRzKTsrK3I8dDspZT1uW3JdLmNhbGwodGhpcyxlKTtyZXR1cm4gZX19LFd0LmZsb3dSaWdodD1xZSxXdC5mb3JFYWNoPU9lLFd0LmZvckVhY2hSaWdodD1DZSxXdC5mb3JJbj1mdW5jdGlvbihuLHQscil7cmV0dXJuKHR5cGVvZiB0IT1cImZ1bmN0aW9uXCJ8fHR5cGVvZiByIT1cInVuZGVmaW5lZFwiKSYmKHQ9TnIodCxyLDMpKSxzcihuLHQsb3UpfSxXdC5mb3JJblJpZ2h0PWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gdD1Ocih0LHIsMykscHIobix0LG91KX0sV3QuZm9yT3duPWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4odHlwZW9mIHQhPVwiZnVuY3Rpb25cInx8dHlwZW9mIHIhPVwidW5kZWZpbmVkXCIpJiYodD1Ocih0LHIsMykpLF9yKG4sdCl9LFd0LmZvck93blJpZ2h0PWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gdD1Ocih0LHIsMykscHIobix0LEZvKVxufSxXdC5mdW5jdGlvbnM9dXUsV3QuZ3JvdXBCeT1FbyxXdC5pbmRleEJ5PVJvLFd0LmluaXRpYWw9ZnVuY3Rpb24obil7cmV0dXJuIGdlKG4sMSl9LFd0LmludGVyc2VjdGlvbj1mdW5jdGlvbigpe2Zvcih2YXIgbj1bXSxyPS0xLGU9YXJndW1lbnRzLmxlbmd0aCx1PVtdLG89UXIoKSxpPW89PXQ7KytyPGU7KXt2YXIgZj1hcmd1bWVudHNbcl07KFNvKGYpfHxZZShmKSkmJihuLnB1c2goZiksdS5wdXNoKGkmJjEyMDw9Zi5sZW5ndGgmJnhvKHImJmYpKSl9dmFyIGU9bi5sZW5ndGgsaT1uWzBdLGE9LTEsYz1pP2kubGVuZ3RoOjAsbD1bXSxzPXVbMF07bjpmb3IoOysrYTxjOylpZihmPWlbYV0sMD4ocz9CdChzLGYpOm8obCxmKSkpe2ZvcihyPWU7LS1yOyl7dmFyIHA9dVtyXTtpZigwPihwP0J0KHAsZik6byhuW3JdLGYpKSljb250aW51ZSBufXMmJnMucHVzaChmKSxsLnB1c2goZil9cmV0dXJuIGx9LFd0LmludmVydD1mdW5jdGlvbihuLHQscil7ciYmdWUobix0LHIpJiYodD1udWxsKSxyPS0xO1xuZm9yKHZhciBlPUZvKG4pLHU9ZS5sZW5ndGgsbz17fTsrK3I8dTspe3ZhciBpPWVbcl0sZj1uW2ldO3Q/VXUuY2FsbChvLGYpP29bZl0ucHVzaChpKTpvW2ZdPVtpXTpvW2ZdPWl9cmV0dXJuIG99LFd0Lmludm9rZT1mdW5jdGlvbihuLHQpe3JldHVybiB5cihuLHQsUnIoYXJndW1lbnRzLDIpKX0sV3Qua2V5cz1GbyxXdC5rZXlzSW49b3UsV3QubWFwPVRlLFd0Lm1hcFZhbHVlcz1mdW5jdGlvbihuLHQscil7dmFyIGU9e307cmV0dXJuIHQ9SHIodCxyLDMpLF9yKG4sZnVuY3Rpb24obixyLHUpe2Vbcl09dChuLHIsdSl9KSxlfSxXdC5tYXRjaGVzPXl1LFd0Lm1hdGNoZXNQcm9wZXJ0eT1mdW5jdGlvbihuLHQpe3JldHVybiB4cihuK1wiXCIscnIodCx0cnVlKSl9LFd0Lm1lbW9pemU9UGUsV3QubWVyZ2U9TG8sV3QubWl4aW49ZHUsV3QubmVnYXRlPWZ1bmN0aW9uKG4pe2lmKHR5cGVvZiBuIT1cImZ1bmN0aW9uXCIpdGhyb3cgbmV3IE91KCQpO3JldHVybiBmdW5jdGlvbigpe3JldHVybiFuLmFwcGx5KHRoaXMsYXJndW1lbnRzKVxufX0sV3Qub21pdD1mdW5jdGlvbihuLHQscil7aWYobnVsbD09bilyZXR1cm57fTtpZih0eXBlb2YgdCE9XCJmdW5jdGlvblwiKXt2YXIgZT1LdChscihhcmd1bWVudHMsZmFsc2UsZmFsc2UsMSksSXUpO3JldHVybiBmZShuLHVyKG91KG4pLGUpKX1yZXR1cm4gdD1Ocih0LHIsMyksYWUobixmdW5jdGlvbihuLHIsZSl7cmV0dXJuIXQobixyLGUpfSl9LFd0Lm9uY2U9ZnVuY3Rpb24obil7cmV0dXJuIExlKG4sMil9LFd0LnBhaXJzPWZ1bmN0aW9uKG4pe2Zvcih2YXIgdD0tMSxyPUZvKG4pLGU9ci5sZW5ndGgsdT13dShlKTsrK3Q8ZTspe3ZhciBvPXJbdF07dVt0XT1bbyxuW29dXX1yZXR1cm4gdX0sV3QucGFydGlhbD1LZSxXdC5wYXJ0aWFsUmlnaHQ9VmUsV3QucGFydGl0aW9uPUNvLFd0LnBpY2s9ZnVuY3Rpb24obix0LHIpe3JldHVybiBudWxsPT1uP3t9OnR5cGVvZiB0PT1cImZ1bmN0aW9uXCI/YWUobixOcih0LHIsMykpOmZlKG4sbHIoYXJndW1lbnRzLGZhbHNlLGZhbHNlLDEpKX0sV3QucGx1Y2s9ZnVuY3Rpb24obix0KXtyZXR1cm4gVGUobixqcih0KSlcbn0sV3QucHJvcGVydHk9ZnVuY3Rpb24obil7cmV0dXJuIGpyKG4rXCJcIil9LFd0LnByb3BlcnR5T2Y9ZnVuY3Rpb24obil7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT1uP3c6blt0XX19LFd0LnB1bGw9ZnVuY3Rpb24oKXt2YXIgbj1hcmd1bWVudHNbMF07aWYoIW58fCFuLmxlbmd0aClyZXR1cm4gbjtmb3IodmFyIHQ9MCxyPVFyKCksZT1hcmd1bWVudHMubGVuZ3RoOysrdDxlOylmb3IodmFyIHU9MCxvPWFyZ3VtZW50c1t0XTstMTwodT1yKG4sbyx1KSk7KUp1LmNhbGwobix1LDEpO3JldHVybiBufSxXdC5wdWxsQXQ9ZnVuY3Rpb24odCl7dmFyIHI9dHx8W10sZT1scihhcmd1bWVudHMsZmFsc2UsZmFsc2UsMSksdT1lLmxlbmd0aCxvPVF0KHIsZSk7Zm9yKGUuc29ydChuKTt1LS07KXt2YXIgaT1wYXJzZUZsb2F0KGVbdV0pO2lmKGkhPWYmJmVlKGkpKXt2YXIgZj1pO0p1LmNhbGwocixpLDEpfX1yZXR1cm4gb30sV3QucmFuZ2U9ZnVuY3Rpb24obix0LHIpe3ImJnVlKG4sdCxyKSYmKHQ9cj1udWxsKSxuPStufHwwLHI9bnVsbD09cj8xOityfHwwLG51bGw9PXQ/KHQ9bixuPTApOnQ9K3R8fDA7XG52YXIgZT0tMTt0PXVvKE11KCh0LW4pLyhyfHwxKSksMCk7Zm9yKHZhciB1PXd1KHQpOysrZTx0Oyl1W2VdPW4sbis9cjtyZXR1cm4gdX0sV3QucmVhcmc9ZnVuY3Rpb24obil7dmFyIHQ9bHIoYXJndW1lbnRzLGZhbHNlLGZhbHNlLDEpO3JldHVybiBZcihuLE8sbnVsbCxudWxsLG51bGwsdCl9LFd0LnJlamVjdD1mdW5jdGlvbihuLHQscil7dmFyIGU9U28obik/UHQ6YXI7cmV0dXJuIHQ9SHIodCxyLDMpLGUobixmdW5jdGlvbihuLHIsZSl7cmV0dXJuIXQobixyLGUpfSl9LFd0LnJlbW92ZT1mdW5jdGlvbihuLHQscil7dmFyIGU9LTEsdT1uP24ubGVuZ3RoOjAsbz1bXTtmb3IodD1Icih0LHIsMyk7KytlPHU7KXI9bltlXSx0KHIsZSxuKSYmKG8ucHVzaChyKSxKdS5jYWxsKG4sZS0tLDEpLHUtLSk7cmV0dXJuIG99LFd0LnJlc3Q9bWUsV3Quc2h1ZmZsZT1VZSxXdC5zbGljZT1mdW5jdGlvbihuLHQscil7dmFyIGU9bj9uLmxlbmd0aDowO3JldHVybiBlPyhyJiZ0eXBlb2YgciE9XCJudW1iZXJcIiYmdWUobix0LHIpJiYodD0wLHI9ZSksUnIobix0LHIpKTpbXVxufSxXdC5zb3J0Qnk9ZnVuY3Rpb24obix0LGUpe3ZhciB1PS0xLG89bj9uLmxlbmd0aDowLGk9b2Uobyk/d3Uobyk6W107cmV0dXJuIGUmJnVlKG4sdCxlKSYmKHQ9bnVsbCksdD1Icih0LGUsMyksb3IobixmdW5jdGlvbihuLHIsZSl7aVsrK3VdPXthOnQobixyLGUpLGI6dSxjOm59fSkscihpLGYpfSxXdC5zb3J0QnlBbGw9ZnVuY3Rpb24obil7dmFyIHQ9YXJndW1lbnRzOzM8dC5sZW5ndGgmJnVlKHRbMV0sdFsyXSx0WzNdKSYmKHQ9W24sdFsxXV0pO3ZhciBlPS0xLHU9bj9uLmxlbmd0aDowLG89bHIodCxmYWxzZSxmYWxzZSwxKSxpPW9lKHUpP3d1KHUpOltdO3JldHVybiBvcihuLGZ1bmN0aW9uKG4pe2Zvcih2YXIgdD1vLmxlbmd0aCxyPXd1KHQpO3QtLTspclt0XT1udWxsPT1uP3c6bltvW3RdXTtpWysrZV09e2E6cixiOmUsYzpufX0pLHIoaSxhKX0sV3Quc3ByZWFkPWZ1bmN0aW9uKG4pe2lmKHR5cGVvZiBuIT1cImZ1bmN0aW9uXCIpdGhyb3cgbmV3IE91KCQpO3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gbi5hcHBseSh0aGlzLHQpXG59fSxXdC50YWtlPWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gbiYmbi5sZW5ndGg/KChyP3VlKG4sdCxyKTpudWxsPT10KSYmKHQ9MSksUnIobiwwLDA+dD8wOnQpKTpbXX0sV3QudGFrZVJpZ2h0PWZ1bmN0aW9uKG4sdCxyKXt2YXIgZT1uP24ubGVuZ3RoOjA7cmV0dXJuIGU/KChyP3VlKG4sdCxyKTpudWxsPT10KSYmKHQ9MSksdD1lLSgrdHx8MCksUnIobiwwPnQ/MDp0KSk6W119LFd0LnRha2VSaWdodFdoaWxlPWZ1bmN0aW9uKG4sdCxyKXt2YXIgZT1uP24ubGVuZ3RoOjA7aWYoIWUpcmV0dXJuW107Zm9yKHQ9SHIodCxyLDMpO2UtLSYmdChuW2VdLGUsbik7KTtyZXR1cm4gUnIobixlKzEpfSxXdC50YWtlV2hpbGU9ZnVuY3Rpb24obix0LHIpe3ZhciBlPW4/bi5sZW5ndGg6MDtpZighZSlyZXR1cm5bXTt2YXIgdT0tMTtmb3IodD1Icih0LHIsMyk7Kyt1PGUmJnQoblt1XSx1LG4pOyk7cmV0dXJuIFJyKG4sMCx1KX0sV3QudGFwPWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gdC5jYWxsKHIsbiksblxufSxXdC50aHJvdHRsZT1mdW5jdGlvbihuLHQscil7dmFyIGU9dHJ1ZSx1PXRydWU7aWYodHlwZW9mIG4hPVwiZnVuY3Rpb25cIil0aHJvdyBuZXcgT3UoJCk7cmV0dXJuIGZhbHNlPT09cj9lPWZhbHNlOlhlKHIpJiYoZT1cImxlYWRpbmdcImluIHI/ISFyLmxlYWRpbmc6ZSx1PVwidHJhaWxpbmdcImluIHI/ISFyLnRyYWlsaW5nOnUpLFN0LmxlYWRpbmc9ZSxTdC5tYXhXYWl0PSt0LFN0LnRyYWlsaW5nPXUsTWUobix0LFN0KX0sV3QudGhydT1qZSxXdC50aW1lcz1mdW5jdGlvbihuLHQscil7aWYobj0rbiwxPm58fCFybyhuKSlyZXR1cm5bXTt2YXIgZT0tMSx1PXd1KG9vKG4scG8pKTtmb3IodD1Ocih0LHIsMSk7KytlPG47KWU8cG8/dVtlXT10KGUpOnQoZSk7cmV0dXJuIHV9LFd0LnRvQXJyYXk9ZnVuY3Rpb24obil7dmFyIHQ9bj9uLmxlbmd0aDowO3JldHVybiBvZSh0KT90P3p0KG4pOltdOml1KG4pfSxXdC50b1BsYWluT2JqZWN0PWV1LFd0LnRyYW5zZm9ybT1mdW5jdGlvbihuLHQscixlKXt2YXIgdT1TbyhuKXx8cnUobik7XG5yZXR1cm4gdD1Icih0LGUsNCksbnVsbD09ciYmKHV8fFhlKG4pPyhlPW4uY29uc3RydWN0b3Iscj11P1NvKG4pP25ldyBlOltdOndvKEplKGUpJiZlLnByb3RvdHlwZSkpOnI9e30pLCh1P010Ol9yKShuLGZ1bmN0aW9uKG4sZSx1KXtyZXR1cm4gdChyLG4sZSx1KX0pLHJ9LFd0LnVuaW9uPWZ1bmN0aW9uKCl7cmV0dXJuIE9yKGxyKGFyZ3VtZW50cyxmYWxzZSx0cnVlKSl9LFd0LnVuaXE9d2UsV3QudW56aXA9YmUsV3QudmFsdWVzPWl1LFd0LnZhbHVlc0luPWZ1bmN0aW9uKG4pe3JldHVybiBDcihuLG91KG4pKX0sV3Qud2hlcmU9ZnVuY3Rpb24obix0KXtyZXR1cm4gUmUobixicih0KSl9LFd0LndpdGhvdXQ9ZnVuY3Rpb24obil7cmV0dXJuIHVyKG4sUnIoYXJndW1lbnRzLDEpKX0sV3Qud3JhcD1mdW5jdGlvbihuLHQpe3JldHVybiB0PW51bGw9PXQ/dnU6dCxZcih0LFIsbnVsbCxbbl0sW10pfSxXdC54b3I9ZnVuY3Rpb24oKXtmb3IodmFyIG49LTEsdD1hcmd1bWVudHMubGVuZ3RoOysrbjx0Oyl7dmFyIHI9YXJndW1lbnRzW25dO1xuaWYoU28ocil8fFllKHIpKXZhciBlPWU/dXIoZSxyKS5jb25jYXQodXIocixlKSk6cn1yZXR1cm4gZT9PcihlKTpbXX0sV3QuemlwPWZ1bmN0aW9uKCl7Zm9yKHZhciBuPWFyZ3VtZW50cy5sZW5ndGgsdD13dShuKTtuLS07KXRbbl09YXJndW1lbnRzW25dO3JldHVybiBiZSh0KX0sV3QuemlwT2JqZWN0PXhlLFd0LmJhY2tmbG93PXFlLFd0LmNvbGxlY3Q9VGUsV3QuY29tcG9zZT1xZSxXdC5lYWNoPU9lLFd0LmVhY2hSaWdodD1DZSxXdC5leHRlbmQ9VW8sV3QuaXRlcmF0ZWU9X3UsV3QubWV0aG9kcz11dSxXdC5vYmplY3Q9eGUsV3Quc2VsZWN0PVJlLFd0LnRhaWw9bWUsV3QudW5pcXVlPXdlLGR1KFd0LFd0KSxXdC5hdHRlbXB0PWh1LFd0LmNhbWVsQ2FzZT0kbyxXdC5jYXBpdGFsaXplPWZ1bmN0aW9uKG4pe3JldHVybihuPWUobikpJiZuLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK24uc2xpY2UoMSl9LFd0LmNsb25lPWZ1bmN0aW9uKG4sdCxyLGUpe3JldHVybiB0eXBlb2YgdCE9XCJib29sZWFuXCImJm51bGwhPXQmJihlPXIscj11ZShuLHQsZSk/bnVsbDp0LHQ9ZmFsc2UpLHI9dHlwZW9mIHI9PVwiZnVuY3Rpb25cIiYmTnIocixlLDEpLHJyKG4sdCxyKVxufSxXdC5jbG9uZURlZXA9ZnVuY3Rpb24obix0LHIpe3JldHVybiB0PXR5cGVvZiB0PT1cImZ1bmN0aW9uXCImJk5yKHQsciwxKSxycihuLHRydWUsdCl9LFd0LmRlYnVycj1mdSxXdC5lbmRzV2l0aD1mdW5jdGlvbihuLHQscil7bj1lKG4pLHQrPVwiXCI7dmFyIHU9bi5sZW5ndGg7cmV0dXJuIHI9KHR5cGVvZiByPT1cInVuZGVmaW5lZFwiP3U6b28oMD5yPzA6K3J8fDAsdSkpLXQubGVuZ3RoLDA8PXImJm4uaW5kZXhPZih0LHIpPT1yfSxXdC5lc2NhcGU9ZnVuY3Rpb24obil7cmV0dXJuKG49ZShuKSkmJnB0LnRlc3Qobik/bi5yZXBsYWNlKGx0LGwpOm59LFd0LmVzY2FwZVJlZ0V4cD1hdSxXdC5ldmVyeT1FZSxXdC5maW5kPUllLFd0LmZpbmRJbmRleD12ZSxXdC5maW5kS2V5PWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gdD1Icih0LHIsMyksY3Iobix0LF9yLHRydWUpfSxXdC5maW5kTGFzdD1mdW5jdGlvbihuLHQscil7cmV0dXJuIHQ9SHIodCxyLDMpLGNyKG4sdCxpcil9LFd0LmZpbmRMYXN0SW5kZXg9ZnVuY3Rpb24obix0LHIpe3ZhciBlPW4/bi5sZW5ndGg6MDtcbmZvcih0PUhyKHQsciwzKTtlLS07KWlmKHQobltlXSxlLG4pKXJldHVybiBlO3JldHVybi0xfSxXdC5maW5kTGFzdEtleT1mdW5jdGlvbihuLHQscil7cmV0dXJuIHQ9SHIodCxyLDMpLGNyKG4sdCxncix0cnVlKX0sV3QuZmluZFdoZXJlPWZ1bmN0aW9uKG4sdCl7cmV0dXJuIEllKG4sYnIodCkpfSxXdC5maXJzdD15ZSxXdC5oYXM9ZnVuY3Rpb24obix0KXtyZXR1cm4gbj9VdS5jYWxsKG4sdCk6ZmFsc2V9LFd0LmlkZW50aXR5PXZ1LFd0LmluY2x1ZGVzPWtlLFd0LmluZGV4T2Y9ZGUsV3QuaXNBcmd1bWVudHM9WWUsV3QuaXNBcnJheT1TbyxXdC5pc0Jvb2xlYW49ZnVuY3Rpb24obil7cmV0dXJuIHRydWU9PT1ufHxmYWxzZT09PW58fGgobikmJkx1LmNhbGwobik9PU18fGZhbHNlfSxXdC5pc0RhdGU9ZnVuY3Rpb24obil7cmV0dXJuIGgobikmJkx1LmNhbGwobik9PXF8fGZhbHNlfSxXdC5pc0VsZW1lbnQ9WmUsV3QuaXNFbXB0eT1mdW5jdGlvbihuKXtpZihudWxsPT1uKXJldHVybiB0cnVlO3ZhciB0PW4ubGVuZ3RoO1xucmV0dXJuIG9lKHQpJiYoU28obil8fHR1KG4pfHxZZShuKXx8aChuKSYmSmUobi5zcGxpY2UpKT8hdDohRm8obikubGVuZ3RofSxXdC5pc0VxdWFsPWZ1bmN0aW9uKG4sdCxyLGUpe3JldHVybiByPXR5cGVvZiByPT1cImZ1bmN0aW9uXCImJk5yKHIsZSwzKSwhciYmaWUobikmJmllKHQpP249PT10OihlPXI/cihuLHQpOncsdHlwZW9mIGU9PVwidW5kZWZpbmVkXCI/ZHIobix0LHIpOiEhZSl9LFd0LmlzRXJyb3I9R2UsV3QuaXNGaW5pdGU9V28sV3QuaXNGdW5jdGlvbj1KZSxXdC5pc01hdGNoPWZ1bmN0aW9uKG4sdCxyLGUpe3ZhciB1PUZvKHQpLG89dS5sZW5ndGg7aWYocj10eXBlb2Ygcj09XCJmdW5jdGlvblwiJiZOcihyLGUsMyksIXImJjE9PW8pe3ZhciBpPXVbMF07aWYoZT10W2ldLGllKGUpKXJldHVybiBudWxsIT1uJiZlPT09bltpXSYmVXUuY2FsbChuLGkpfWZvcih2YXIgaT13dShvKSxmPXd1KG8pO28tLTspZT1pW29dPXRbdVtvXV0sZltvXT1pZShlKTtyZXR1cm4gbXIobix1LGksZixyKVxufSxXdC5pc05hTj1mdW5jdGlvbihuKXtyZXR1cm4gUWUobikmJm4hPStufSxXdC5pc05hdGl2ZT1IZSxXdC5pc051bGw9ZnVuY3Rpb24obil7cmV0dXJuIG51bGw9PT1ufSxXdC5pc051bWJlcj1RZSxXdC5pc09iamVjdD1YZSxXdC5pc1BsYWluT2JqZWN0PU5vLFd0LmlzUmVnRXhwPW51LFd0LmlzU3RyaW5nPXR1LFd0LmlzVHlwZWRBcnJheT1ydSxXdC5pc1VuZGVmaW5lZD1mdW5jdGlvbihuKXtyZXR1cm4gdHlwZW9mIG49PVwidW5kZWZpbmVkXCJ9LFd0LmtlYmFiQ2FzZT1CbyxXdC5sYXN0PWZ1bmN0aW9uKG4pe3ZhciB0PW4/bi5sZW5ndGg6MDtyZXR1cm4gdD9uW3QtMV06d30sV3QubGFzdEluZGV4T2Y9ZnVuY3Rpb24obix0LHIpe3ZhciBlPW4/bi5sZW5ndGg6MDtpZighZSlyZXR1cm4tMTt2YXIgdT1lO2lmKHR5cGVvZiByPT1cIm51bWJlclwiKXU9KDA+cj91byhlK3IsMCk6b28ocnx8MCxlLTEpKSsxO2Vsc2UgaWYocilyZXR1cm4gdT1TcihuLHQsdHJ1ZSktMSxuPW5bdV0sKHQ9PT10P3Q9PT1uOm4hPT1uKT91Oi0xO1xuaWYodCE9PXQpcmV0dXJuIHAobix1LHRydWUpO2Zvcig7dS0tOylpZihuW3VdPT09dClyZXR1cm4gdTtyZXR1cm4tMX0sV3QubWF4PUlvLFd0Lm1pbj1PbyxXdC5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIF8uXz0kdSx0aGlzfSxXdC5ub29wPW11LFd0Lm5vdz1UbyxXdC5wYWQ9ZnVuY3Rpb24obix0LHIpe249ZShuKSx0PSt0O3ZhciB1PW4ubGVuZ3RoO3JldHVybiB1PHQmJnJvKHQpPyh1PSh0LXUpLzIsdD1QdSh1KSx1PU11KHUpLHI9S3IoXCJcIix1LHIpLHIuc2xpY2UoMCx0KStuK3IpOm59LFd0LnBhZExlZnQ9ZnVuY3Rpb24obix0LHIpe3JldHVybihuPWUobikpJiZLcihuLHQscikrbn0sV3QucGFkUmlnaHQ9ZnVuY3Rpb24obix0LHIpe3JldHVybihuPWUobikpJiZuK0tyKG4sdCxyKX0sV3QucGFyc2VJbnQ9Y3UsV3QucmFuZG9tPWZ1bmN0aW9uKG4sdCxyKXtyJiZ1ZShuLHQscikmJih0PXI9bnVsbCk7dmFyIGU9bnVsbD09bix1PW51bGw9PXQ7cmV0dXJuIG51bGw9PXImJih1JiZ0eXBlb2Ygbj09XCJib29sZWFuXCI/KHI9bixuPTEpOnR5cGVvZiB0PT1cImJvb2xlYW5cIiYmKHI9dCx1PXRydWUpKSxlJiZ1JiYodD0xLHU9ZmFsc2UpLG49K258fDAsdT8odD1uLG49MCk6dD0rdHx8MCxyfHxuJTF8fHQlMT8ocj1jbygpLG9vKG4rcioodC1uK3BhcnNlRmxvYXQoXCIxZS1cIisoKHIrXCJcIikubGVuZ3RoLTEpKSksdCkpOmtyKG4sdClcbn0sV3QucmVkdWNlPVNlLFd0LnJlZHVjZVJpZ2h0PVdlLFd0LnJlcGVhdD1sdSxXdC5yZXN1bHQ9ZnVuY3Rpb24obix0LHIpe3JldHVybiB0PW51bGw9PW4/dzpuW3RdLHR5cGVvZiB0PT1cInVuZGVmaW5lZFwiJiYodD1yKSxKZSh0KT90LmNhbGwobik6dH0sV3QucnVuSW5Db250ZXh0PW0sV3Quc2l6ZT1mdW5jdGlvbihuKXt2YXIgdD1uP24ubGVuZ3RoOjA7cmV0dXJuIG9lKHQpP3Q6Rm8obikubGVuZ3RofSxXdC5zbmFrZUNhc2U9em8sV3Quc29tZT1GZSxXdC5zb3J0ZWRJbmRleD1mdW5jdGlvbihuLHQscixlKXt2YXIgdT1IcihyKTtyZXR1cm4gdT09PXRyJiZudWxsPT1yP1NyKG4sdCk6V3Iobix0LHUocixlLDEpKX0sV3Quc29ydGVkTGFzdEluZGV4PWZ1bmN0aW9uKG4sdCxyLGUpe3ZhciB1PUhyKHIpO3JldHVybiB1PT09dHImJm51bGw9PXI/U3Iobix0LHRydWUpOldyKG4sdCx1KHIsZSwxKSx0cnVlKX0sV3Quc3RhcnRDYXNlPURvLFd0LnN0YXJ0c1dpdGg9ZnVuY3Rpb24obix0LHIpe3JldHVybiBuPWUobikscj1udWxsPT1yPzA6b28oMD5yPzA6K3J8fDAsbi5sZW5ndGgpLG4ubGFzdEluZGV4T2YodCxyKT09clxufSxXdC50ZW1wbGF0ZT1mdW5jdGlvbihuLHQscil7dmFyIHU9V3QudGVtcGxhdGVTZXR0aW5ncztyJiZ1ZShuLHQscikmJih0PXI9bnVsbCksbj1lKG4pLHQ9SHQoSHQoe30scnx8dCksdSxYdCkscj1IdChIdCh7fSx0LmltcG9ydHMpLHUuaW1wb3J0cyxYdCk7dmFyIG8saSxmPUZvKHIpLGE9Q3IocixmKSxjPTA7cj10LmludGVycG9sYXRlfHx4dDt2YXIgbD1cIl9fcCs9J1wiO3I9UnUoKHQuZXNjYXBlfHx4dCkuc291cmNlK1wifFwiK3Iuc291cmNlK1wifFwiKyhyPT09Z3Q/dnQ6eHQpLnNvdXJjZStcInxcIisodC5ldmFsdWF0ZXx8eHQpLnNvdXJjZStcInwkXCIsXCJnXCIpO3ZhciBwPVwic291cmNlVVJMXCJpbiB0P1wiLy8jIHNvdXJjZVVSTD1cIit0LnNvdXJjZVVSTCtcIlxcblwiOlwiXCI7aWYobi5yZXBsYWNlKHIsZnVuY3Rpb24odCxyLGUsdSxmLGEpe3JldHVybiBlfHwoZT11KSxsKz1uLnNsaWNlKGMsYSkucmVwbGFjZShFdCxzKSxyJiYobz10cnVlLGwrPVwiJytfX2UoXCIrcitcIikrJ1wiKSxmJiYoaT10cnVlLGwrPVwiJztcIitmK1wiO1xcbl9fcCs9J1wiKSxlJiYobCs9XCInKygoX190PShcIitlK1wiKSk9PW51bGw/Jyc6X190KSsnXCIpLGM9YSt0Lmxlbmd0aCx0XG59KSxsKz1cIic7XCIsKHQ9dC52YXJpYWJsZSl8fChsPVwid2l0aChvYmope1wiK2wrXCJ9XCIpLGw9KGk/bC5yZXBsYWNlKGl0LFwiXCIpOmwpLnJlcGxhY2UoZnQsXCIkMVwiKS5yZXBsYWNlKGF0LFwiJDE7XCIpLGw9XCJmdW5jdGlvbihcIisodHx8XCJvYmpcIikrXCIpe1wiKyh0P1wiXCI6XCJvYmp8fChvYmo9e30pO1wiKStcInZhciBfX3QsX19wPScnXCIrKG8/XCIsX19lPV8uZXNjYXBlXCI6XCJcIikrKGk/XCIsX19qPUFycmF5LnByb3RvdHlwZS5qb2luO2Z1bmN0aW9uIHByaW50KCl7X19wKz1fX2ouY2FsbChhcmd1bWVudHMsJycpfVwiOlwiO1wiKStsK1wicmV0dXJuIF9fcH1cIix0PWh1KGZ1bmN0aW9uKCl7cmV0dXJuIEF1KGYscCtcInJldHVybiBcIitsKS5hcHBseSh3LGEpfSksdC5zb3VyY2U9bCxHZSh0KSl0aHJvdyB0O3JldHVybiB0fSxXdC50cmltPXN1LFd0LnRyaW1MZWZ0PWZ1bmN0aW9uKG4sdCxyKXt2YXIgdT1uO3JldHVybihuPWUobikpP24uc2xpY2UoKHI/dWUodSx0LHIpOm51bGw9PXQpP3Yobik6byhuLHQrXCJcIikpOm5cbn0sV3QudHJpbVJpZ2h0PWZ1bmN0aW9uKG4sdCxyKXt2YXIgdT1uO3JldHVybihuPWUobikpPyhyP3VlKHUsdCxyKTpudWxsPT10KT9uLnNsaWNlKDAseShuKSsxKTpuLnNsaWNlKDAsaShuLHQrXCJcIikrMSk6bn0sV3QudHJ1bmM9ZnVuY3Rpb24obix0LHIpe3ImJnVlKG4sdCxyKSYmKHQ9bnVsbCk7dmFyIHU9VDtpZihyPVMsbnVsbCE9dClpZihYZSh0KSl7dmFyIG89XCJzZXBhcmF0b3JcImluIHQ/dC5zZXBhcmF0b3I6byx1PVwibGVuZ3RoXCJpbiB0Pyt0Lmxlbmd0aHx8MDp1O3I9XCJvbWlzc2lvblwiaW4gdD9lKHQub21pc3Npb24pOnJ9ZWxzZSB1PSt0fHwwO2lmKG49ZShuKSx1Pj1uLmxlbmd0aClyZXR1cm4gbjtpZih1LT1yLmxlbmd0aCwxPnUpcmV0dXJuIHI7aWYodD1uLnNsaWNlKDAsdSksbnVsbD09bylyZXR1cm4gdCtyO2lmKG51KG8pKXtpZihuLnNsaWNlKHUpLnNlYXJjaChvKSl7dmFyIGksZj1uLnNsaWNlKDAsdSk7Zm9yKG8uZ2xvYmFsfHwobz1SdShvLnNvdXJjZSwoeXQuZXhlYyhvKXx8XCJcIikrXCJnXCIpKSxvLmxhc3RJbmRleD0wO249by5leGVjKGYpOylpPW4uaW5kZXg7XG50PXQuc2xpY2UoMCxudWxsPT1pP3U6aSl9fWVsc2Ugbi5pbmRleE9mKG8sdSkhPXUmJihvPXQubGFzdEluZGV4T2YobyksLTE8byYmKHQ9dC5zbGljZSgwLG8pKSk7cmV0dXJuIHQrcn0sV3QudW5lc2NhcGU9ZnVuY3Rpb24obil7cmV0dXJuKG49ZShuKSkmJnN0LnRlc3Qobik/bi5yZXBsYWNlKGN0LGQpOm59LFd0LnVuaXF1ZUlkPWZ1bmN0aW9uKG4pe3ZhciB0PSsrRnU7cmV0dXJuIGUobikrdH0sV3Qud29yZHM9cHUsV3QuYWxsPUVlLFd0LmFueT1GZSxXdC5jb250YWlucz1rZSxXdC5kZXRlY3Q9SWUsV3QuZm9sZGw9U2UsV3QuZm9sZHI9V2UsV3QuaGVhZD15ZSxXdC5pbmNsdWRlPWtlLFd0LmluamVjdD1TZSxkdShXdCxmdW5jdGlvbigpe3ZhciBuPXt9O3JldHVybiBfcihXdCxmdW5jdGlvbih0LHIpe1d0LnByb3RvdHlwZVtyXXx8KG5bcl09dCl9KSxufSgpLGZhbHNlKSxXdC5zYW1wbGU9TmUsV3QucHJvdG90eXBlLnNhbXBsZT1mdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5fX2NoYWluX198fG51bGwhPW4/dGhpcy50aHJ1KGZ1bmN0aW9uKHQpe3JldHVybiBOZSh0LG4pXG59KTpOZSh0aGlzLnZhbHVlKCkpfSxXdC5WRVJTSU9OPWIsTXQoXCJiaW5kIGJpbmRLZXkgY3VycnkgY3VycnlSaWdodCBwYXJ0aWFsIHBhcnRpYWxSaWdodFwiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihuKXtXdFtuXS5wbGFjZWhvbGRlcj1XdH0pLE10KFtcImZpbHRlclwiLFwibWFwXCIsXCJ0YWtlV2hpbGVcIl0sZnVuY3Rpb24obix0KXt2YXIgcj10PT1VLGU9dD09TDtVdC5wcm90b3R5cGVbbl09ZnVuY3Rpb24obix1KXt2YXIgbz10aGlzLmNsb25lKCksaT1vLl9fZmlsdGVyZWRfXyxmPW8uX19pdGVyYXRlZXNfX3x8KG8uX19pdGVyYXRlZXNfXz1bXSk7cmV0dXJuIG8uX19maWx0ZXJlZF9fPWl8fHJ8fGUmJjA+by5fX2Rpcl9fLGYucHVzaCh7aXRlcmF0ZWU6SHIobix1LDMpLHR5cGU6dH0pLG99fSksTXQoW1wiZHJvcFwiLFwidGFrZVwiXSxmdW5jdGlvbihuLHQpe3ZhciByPVwiX19cIituK1wiQ291bnRfX1wiLGU9bitcIldoaWxlXCI7VXQucHJvdG90eXBlW25dPWZ1bmN0aW9uKGUpe2U9bnVsbD09ZT8xOnVvKFB1KGUpfHwwLDApO1xudmFyIHU9dGhpcy5jbG9uZSgpO2lmKHUuX19maWx0ZXJlZF9fKXt2YXIgbz11W3JdO3Vbcl09dD9vbyhvLGUpOm8rZX1lbHNlKHUuX192aWV3c19ffHwodS5fX3ZpZXdzX189W10pKS5wdXNoKHtzaXplOmUsdHlwZTpuKygwPnUuX19kaXJfXz9cIlJpZ2h0XCI6XCJcIil9KTtyZXR1cm4gdX0sVXQucHJvdG90eXBlW24rXCJSaWdodFwiXT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5yZXZlcnNlKClbbl0odCkucmV2ZXJzZSgpfSxVdC5wcm90b3R5cGVbbitcIlJpZ2h0V2hpbGVcIl09ZnVuY3Rpb24obix0KXtyZXR1cm4gdGhpcy5yZXZlcnNlKClbZV0obix0KS5yZXZlcnNlKCl9fSksTXQoW1wiZmlyc3RcIixcImxhc3RcIl0sZnVuY3Rpb24obix0KXt2YXIgcj1cInRha2VcIisodD9cIlJpZ2h0XCI6XCJcIik7VXQucHJvdG90eXBlW25dPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbcl0oMSkudmFsdWUoKVswXX19KSxNdChbXCJpbml0aWFsXCIsXCJyZXN0XCJdLGZ1bmN0aW9uKG4sdCl7dmFyIHI9XCJkcm9wXCIrKHQ/XCJcIjpcIlJpZ2h0XCIpO1xuVXQucHJvdG90eXBlW25dPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbcl0oMSl9fSksTXQoW1wicGx1Y2tcIixcIndoZXJlXCJdLGZ1bmN0aW9uKG4sdCl7dmFyIHI9dD9cImZpbHRlclwiOlwibWFwXCIsZT10P2JyOmpyO1V0LnByb3RvdHlwZVtuXT1mdW5jdGlvbihuKXtyZXR1cm4gdGhpc1tyXShlKG4pKX19KSxVdC5wcm90b3R5cGUuY29tcGFjdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmZpbHRlcih2dSl9LFV0LnByb3RvdHlwZS5kcm9wV2hpbGU9ZnVuY3Rpb24obix0KXt2YXIgcjtyZXR1cm4gbj1IcihuLHQsMyksdGhpcy5maWx0ZXIoZnVuY3Rpb24odCxlLHUpe3JldHVybiByfHwocj0hbih0LGUsdSkpfSl9LFV0LnByb3RvdHlwZS5yZWplY3Q9ZnVuY3Rpb24obix0KXtyZXR1cm4gbj1IcihuLHQsMyksdGhpcy5maWx0ZXIoZnVuY3Rpb24odCxyLGUpe3JldHVybiFuKHQscixlKX0pfSxVdC5wcm90b3R5cGUuc2xpY2U9ZnVuY3Rpb24obix0KXtuPW51bGw9PW4/MDorbnx8MDt2YXIgcj0wPm4/dGhpcy50YWtlUmlnaHQoLW4pOnRoaXMuZHJvcChuKTtcbnJldHVybiB0eXBlb2YgdCE9XCJ1bmRlZmluZWRcIiYmKHQ9K3R8fDAscj0wPnQ/ci5kcm9wUmlnaHQoLXQpOnIudGFrZSh0LW4pKSxyfSxVdC5wcm90b3R5cGUudG9BcnJheT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRyb3AoMCl9LF9yKFV0LnByb3RvdHlwZSxmdW5jdGlvbihuLHQpe3ZhciByPVd0W3RdLGU9L14oPzpmaXJzdHxsYXN0KSQvLnRlc3QodCk7V3QucHJvdG90eXBlW3RdPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChuKXtyZXR1cm4gbj1bbl0sVnUuYXBwbHkobixvKSxyLmFwcGx5KFd0LG4pfXZhciB1PXRoaXMuX193cmFwcGVkX18sbz1hcmd1bWVudHMsaT10aGlzLl9fY2hhaW5fXyxmPSEhdGhpcy5fX2FjdGlvbnNfXy5sZW5ndGgsYT11IGluc3RhbmNlb2YgVXQsYz1hJiYhZjtyZXR1cm4gZSYmIWk/Yz9uLmNhbGwodSk6ci5jYWxsKFd0LHRoaXMudmFsdWUoKSk6YXx8U28odSk/KHU9bi5hcHBseShjP3U6bmV3IFV0KHRoaXMpLG8pLGV8fCFmJiYhdS5fX2FjdGlvbnNfX3x8KHUuX19hY3Rpb25zX198fCh1Ll9fYWN0aW9uc19fPVtdKSkucHVzaCh7ZnVuYzpqZSxhcmdzOlt0XSx0aGlzQXJnOld0fSksbmV3IE50KHUsaSkpOnRoaXMudGhydSh0KVxufX0pLE10KFwiY29uY2F0IGpvaW4gcG9wIHB1c2ggc2hpZnQgc29ydCBzcGxpY2UgdW5zaGlmdFwiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihuKXt2YXIgdD1DdVtuXSxyPS9eKD86cHVzaHxzb3J0fHVuc2hpZnQpJC8udGVzdChuKT9cInRhcFwiOlwidGhydVwiLGU9L14oPzpqb2lufHBvcHxzaGlmdCkkLy50ZXN0KG4pO1d0LnByb3RvdHlwZVtuXT1mdW5jdGlvbigpe3ZhciBuPWFyZ3VtZW50cztyZXR1cm4gZSYmIXRoaXMuX19jaGFpbl9fP3QuYXBwbHkodGhpcy52YWx1ZSgpLG4pOnRoaXNbcl0oZnVuY3Rpb24ocil7cmV0dXJuIHQuYXBwbHkocixuKX0pfX0pLFV0LnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciBuPXRoaXMuX19hY3Rpb25zX18sdD10aGlzLl9faXRlcmF0ZWVzX18scj10aGlzLl9fdmlld3NfXyxlPW5ldyBVdCh0aGlzLl9fd3JhcHBlZF9fKTtyZXR1cm4gZS5fX2FjdGlvbnNfXz1uP3p0KG4pOm51bGwsZS5fX2Rpcl9fPXRoaXMuX19kaXJfXyxlLl9fZHJvcENvdW50X189dGhpcy5fX2Ryb3BDb3VudF9fLGUuX19maWx0ZXJlZF9fPXRoaXMuX19maWx0ZXJlZF9fLGUuX19pdGVyYXRlZXNfXz10P3p0KHQpOm51bGwsZS5fX3Rha2VDb3VudF9fPXRoaXMuX190YWtlQ291bnRfXyxlLl9fdmlld3NfXz1yP3p0KHIpOm51bGwsZVxufSxVdC5wcm90b3R5cGUucmV2ZXJzZT1mdW5jdGlvbigpe2lmKHRoaXMuX19maWx0ZXJlZF9fKXt2YXIgbj1uZXcgVXQodGhpcyk7bi5fX2Rpcl9fPS0xLG4uX19maWx0ZXJlZF9fPXRydWV9ZWxzZSBuPXRoaXMuY2xvbmUoKSxuLl9fZGlyX18qPS0xO3JldHVybiBufSxVdC5wcm90b3R5cGUudmFsdWU9ZnVuY3Rpb24oKXt2YXIgbj10aGlzLl9fd3JhcHBlZF9fLnZhbHVlKCk7aWYoIVNvKG4pKXJldHVybiBUcihuLHRoaXMuX19hY3Rpb25zX18pO3ZhciB0LHI9dGhpcy5fX2Rpcl9fLGU9MD5yO3Q9bi5sZW5ndGg7Zm9yKHZhciB1PXRoaXMuX192aWV3c19fLG89MCxpPS0xLGY9dT91Lmxlbmd0aDowOysraTxmOyl7dmFyIGE9dVtpXSxjPWEuc2l6ZTtzd2l0Y2goYS50eXBlKXtjYXNlXCJkcm9wXCI6bys9YzticmVhaztjYXNlXCJkcm9wUmlnaHRcIjp0LT1jO2JyZWFrO2Nhc2VcInRha2VcIjp0PW9vKHQsbytjKTticmVhaztjYXNlXCJ0YWtlUmlnaHRcIjpvPXVvKG8sdC1jKX19dD17c3RhcnQ6byxlbmQ6dH0saT10LnN0YXJ0LGY9dC5lbmQsdD1mLWksdT10aGlzLl9fZHJvcENvdW50X18sbz1vbyh0LHRoaXMuX190YWtlQ291bnRfXyksZT1lP2Y6aS0xLGY9KGk9dGhpcy5fX2l0ZXJhdGVlc19fKT9pLmxlbmd0aDowLGE9MCxjPVtdO1xubjpmb3IoO3QtLSYmYTxvOyl7Zm9yKHZhciBlPWUrcixsPS0xLHM9bltlXTsrK2w8Zjspe3ZhciBwPWlbbF0saD1wLml0ZXJhdGVlKHMsZSxuKSxwPXAudHlwZTtpZihwPT1GKXM9aDtlbHNlIGlmKCFoKXtpZihwPT1VKWNvbnRpbnVlIG47YnJlYWsgbn19dT91LS06Y1thKytdPXN9cmV0dXJuIGN9LFd0LnByb3RvdHlwZS5jaGFpbj1mdW5jdGlvbigpe3JldHVybiBBZSh0aGlzKX0sV3QucHJvdG90eXBlLmNvbW1pdD1mdW5jdGlvbigpe3JldHVybiBuZXcgTnQodGhpcy52YWx1ZSgpLHRoaXMuX19jaGFpbl9fKX0sV3QucHJvdG90eXBlLnBsYW50PWZ1bmN0aW9uKG4pe2Zvcih2YXIgdCxyPXRoaXM7ciBpbnN0YW5jZW9mIE50Oyl7dmFyIGU9aGUocik7dD91Ll9fd3JhcHBlZF9fPWU6dD1lO3ZhciB1PWUscj1yLl9fd3JhcHBlZF9ffXJldHVybiB1Ll9fd3JhcHBlZF9fPW4sdH0sV3QucHJvdG90eXBlLnJldmVyc2U9ZnVuY3Rpb24oKXt2YXIgbj10aGlzLl9fd3JhcHBlZF9fO3JldHVybiBuIGluc3RhbmNlb2YgVXQ/KHRoaXMuX19hY3Rpb25zX18ubGVuZ3RoJiYobj1uZXcgVXQodGhpcykpLG5ldyBOdChuLnJldmVyc2UoKSx0aGlzLl9fY2hhaW5fXykpOnRoaXMudGhydShmdW5jdGlvbihuKXtyZXR1cm4gbi5yZXZlcnNlKClcbn0pfSxXdC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZSgpK1wiXCJ9LFd0LnByb3RvdHlwZS5ydW49V3QucHJvdG90eXBlLnRvSlNPTj1XdC5wcm90b3R5cGUudmFsdWVPZj1XdC5wcm90b3R5cGUudmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4gVHIodGhpcy5fX3dyYXBwZWRfXyx0aGlzLl9fYWN0aW9uc19fKX0sV3QucHJvdG90eXBlLmNvbGxlY3Q9V3QucHJvdG90eXBlLm1hcCxXdC5wcm90b3R5cGUuaGVhZD1XdC5wcm90b3R5cGUuZmlyc3QsV3QucHJvdG90eXBlLnNlbGVjdD1XdC5wcm90b3R5cGUuZmlsdGVyLFd0LnByb3RvdHlwZS50YWlsPVd0LnByb3RvdHlwZS5yZXN0LFd0fXZhciB3LGI9XCIzLjIuMFwiLHg9MSxBPTIsaj00LGs9OCxFPTE2LFI9MzIsST02NCxPPTEyOCxDPTI1NixUPTMwLFM9XCIuLi5cIixXPTE1MCxOPTE2LFU9MCxGPTEsTD0yLCQ9XCJFeHBlY3RlZCBhIGZ1bmN0aW9uXCIsQj1cIl9fbG9kYXNoX3BsYWNlaG9sZGVyX19cIix6PVwiW29iamVjdCBBcmd1bWVudHNdXCIsRD1cIltvYmplY3QgQXJyYXldXCIsTT1cIltvYmplY3QgQm9vbGVhbl1cIixxPVwiW29iamVjdCBEYXRlXVwiLFA9XCJbb2JqZWN0IEVycm9yXVwiLEs9XCJbb2JqZWN0IEZ1bmN0aW9uXVwiLFY9XCJbb2JqZWN0IE51bWJlcl1cIixZPVwiW29iamVjdCBPYmplY3RdXCIsWj1cIltvYmplY3QgUmVnRXhwXVwiLEc9XCJbb2JqZWN0IFN0cmluZ11cIixKPVwiW29iamVjdCBBcnJheUJ1ZmZlcl1cIixYPVwiW29iamVjdCBGbG9hdDMyQXJyYXldXCIsSD1cIltvYmplY3QgRmxvYXQ2NEFycmF5XVwiLFE9XCJbb2JqZWN0IEludDhBcnJheV1cIixudD1cIltvYmplY3QgSW50MTZBcnJheV1cIix0dD1cIltvYmplY3QgSW50MzJBcnJheV1cIixydD1cIltvYmplY3QgVWludDhBcnJheV1cIixldD1cIltvYmplY3QgVWludDhDbGFtcGVkQXJyYXldXCIsdXQ9XCJbb2JqZWN0IFVpbnQxNkFycmF5XVwiLG90PVwiW29iamVjdCBVaW50MzJBcnJheV1cIixpdD0vXFxiX19wXFwrPScnOy9nLGZ0PS9cXGIoX19wXFwrPSknJ1xcKy9nLGF0PS8oX19lXFwoLio/XFwpfFxcYl9fdFxcKSlcXCsnJzsvZyxjdD0vJig/OmFtcHxsdHxndHxxdW90fCMzOXwjOTYpOy9nLGx0PS9bJjw+XCInYF0vZyxzdD1SZWdFeHAoY3Quc291cmNlKSxwdD1SZWdFeHAobHQuc291cmNlKSxodD0vPCUtKFtcXHNcXFNdKz8pJT4vZyxfdD0vPCUoW1xcc1xcU10rPyklPi9nLGd0PS88JT0oW1xcc1xcU10rPyklPi9nLHZ0PS9cXCRcXHsoW15cXFxcfV0qKD86XFxcXC5bXlxcXFx9XSopKilcXH0vZyx5dD0vXFx3KiQvLGR0PS9eXFxzKmZ1bmN0aW9uWyBcXG5cXHJcXHRdK1xcdy8sbXQ9L14wW3hYXS8sd3Q9L15cXFtvYmplY3QgLis/Q29uc3RydWN0b3JcXF0kLyxidD0vW1xceGMwLVxceGQ2XFx4ZDgtXFx4ZGVcXHhkZi1cXHhmNlxceGY4LVxceGZmXS9nLHh0PS8oJF4pLyxBdD0vWy4qKz9eJHt9KCl8W1xcXVxcL1xcXFxdL2csanQ9UmVnRXhwKEF0LnNvdXJjZSksa3Q9L1xcYnRoaXNcXGIvLEV0PS9bJ1xcblxcclxcdTIwMjhcXHUyMDI5XFxcXF0vZyxSdD1SZWdFeHAoXCJbQS1aXFxcXHhjMC1cXFxceGQ2XFxcXHhkOC1cXFxceGRlXXsyLH0oPz1bQS1aXFxcXHhjMC1cXFxceGQ2XFxcXHhkOC1cXFxceGRlXVthLXpcXFxceGRmLVxcXFx4ZjZcXFxceGY4LVxcXFx4ZmZdKyl8W0EtWlxcXFx4YzAtXFxcXHhkNlxcXFx4ZDgtXFxcXHhkZV0/W2EtelxcXFx4ZGYtXFxcXHhmNlxcXFx4ZjgtXFxcXHhmZl0rfFtBLVpcXFxceGMwLVxcXFx4ZDZcXFxceGQ4LVxcXFx4ZGVdK3xbMC05XStcIixcImdcIiksSXQ9XCIgXFx0XFx4MGJcXGZcXHhhMFxcdWZlZmZcXG5cXHJcXHUyMDI4XFx1MjAyOVxcdTE2ODBcXHUxODBlXFx1MjAwMFxcdTIwMDFcXHUyMDAyXFx1MjAwM1xcdTIwMDRcXHUyMDA1XFx1MjAwNlxcdTIwMDdcXHUyMDA4XFx1MjAwOVxcdTIwMGFcXHUyMDJmXFx1MjA1ZlxcdTMwMDBcIixPdD1cIkFycmF5IEFycmF5QnVmZmVyIERhdGUgRXJyb3IgRmxvYXQzMkFycmF5IEZsb2F0NjRBcnJheSBGdW5jdGlvbiBJbnQ4QXJyYXkgSW50MTZBcnJheSBJbnQzMkFycmF5IE1hdGggTnVtYmVyIE9iamVjdCBSZWdFeHAgU2V0IFN0cmluZyBfIGNsZWFyVGltZW91dCBkb2N1bWVudCBpc0Zpbml0ZSBwYXJzZUludCBzZXRUaW1lb3V0IFR5cGVFcnJvciBVaW50OEFycmF5IFVpbnQ4Q2xhbXBlZEFycmF5IFVpbnQxNkFycmF5IFVpbnQzMkFycmF5IFdlYWtNYXAgd2luZG93IFdpblJURXJyb3JcIi5zcGxpdChcIiBcIiksQ3Q9e307XG5DdFtYXT1DdFtIXT1DdFtRXT1DdFtudF09Q3RbdHRdPUN0W3J0XT1DdFtldF09Q3RbdXRdPUN0W290XT10cnVlLEN0W3pdPUN0W0RdPUN0W0pdPUN0W01dPUN0W3FdPUN0W1BdPUN0W0tdPUN0W1wiW29iamVjdCBNYXBdXCJdPUN0W1ZdPUN0W1ldPUN0W1pdPUN0W1wiW29iamVjdCBTZXRdXCJdPUN0W0ddPUN0W1wiW29iamVjdCBXZWFrTWFwXVwiXT1mYWxzZTt2YXIgVHQ9e307VHRbel09VHRbRF09VHRbSl09VHRbTV09VHRbcV09VHRbWF09VHRbSF09VHRbUV09VHRbbnRdPVR0W3R0XT1UdFtWXT1UdFtZXT1UdFtaXT1UdFtHXT1UdFtydF09VHRbZXRdPVR0W3V0XT1UdFtvdF09dHJ1ZSxUdFtQXT1UdFtLXT1UdFtcIltvYmplY3QgTWFwXVwiXT1UdFtcIltvYmplY3QgU2V0XVwiXT1UdFtcIltvYmplY3QgV2Vha01hcF1cIl09ZmFsc2U7dmFyIFN0PXtsZWFkaW5nOmZhbHNlLG1heFdhaXQ6MCx0cmFpbGluZzpmYWxzZX0sV3Q9e1wiXFx4YzBcIjpcIkFcIixcIlxceGMxXCI6XCJBXCIsXCJcXHhjMlwiOlwiQVwiLFwiXFx4YzNcIjpcIkFcIixcIlxceGM0XCI6XCJBXCIsXCJcXHhjNVwiOlwiQVwiLFwiXFx4ZTBcIjpcImFcIixcIlxceGUxXCI6XCJhXCIsXCJcXHhlMlwiOlwiYVwiLFwiXFx4ZTNcIjpcImFcIixcIlxceGU0XCI6XCJhXCIsXCJcXHhlNVwiOlwiYVwiLFwiXFx4YzdcIjpcIkNcIixcIlxceGU3XCI6XCJjXCIsXCJcXHhkMFwiOlwiRFwiLFwiXFx4ZjBcIjpcImRcIixcIlxceGM4XCI6XCJFXCIsXCJcXHhjOVwiOlwiRVwiLFwiXFx4Y2FcIjpcIkVcIixcIlxceGNiXCI6XCJFXCIsXCJcXHhlOFwiOlwiZVwiLFwiXFx4ZTlcIjpcImVcIixcIlxceGVhXCI6XCJlXCIsXCJcXHhlYlwiOlwiZVwiLFwiXFx4Y2NcIjpcIklcIixcIlxceGNkXCI6XCJJXCIsXCJcXHhjZVwiOlwiSVwiLFwiXFx4Y2ZcIjpcIklcIixcIlxceGVjXCI6XCJpXCIsXCJcXHhlZFwiOlwiaVwiLFwiXFx4ZWVcIjpcImlcIixcIlxceGVmXCI6XCJpXCIsXCJcXHhkMVwiOlwiTlwiLFwiXFx4ZjFcIjpcIm5cIixcIlxceGQyXCI6XCJPXCIsXCJcXHhkM1wiOlwiT1wiLFwiXFx4ZDRcIjpcIk9cIixcIlxceGQ1XCI6XCJPXCIsXCJcXHhkNlwiOlwiT1wiLFwiXFx4ZDhcIjpcIk9cIixcIlxceGYyXCI6XCJvXCIsXCJcXHhmM1wiOlwib1wiLFwiXFx4ZjRcIjpcIm9cIixcIlxceGY1XCI6XCJvXCIsXCJcXHhmNlwiOlwib1wiLFwiXFx4ZjhcIjpcIm9cIixcIlxceGQ5XCI6XCJVXCIsXCJcXHhkYVwiOlwiVVwiLFwiXFx4ZGJcIjpcIlVcIixcIlxceGRjXCI6XCJVXCIsXCJcXHhmOVwiOlwidVwiLFwiXFx4ZmFcIjpcInVcIixcIlxceGZiXCI6XCJ1XCIsXCJcXHhmY1wiOlwidVwiLFwiXFx4ZGRcIjpcIllcIixcIlxceGZkXCI6XCJ5XCIsXCJcXHhmZlwiOlwieVwiLFwiXFx4YzZcIjpcIkFlXCIsXCJcXHhlNlwiOlwiYWVcIixcIlxceGRlXCI6XCJUaFwiLFwiXFx4ZmVcIjpcInRoXCIsXCJcXHhkZlwiOlwic3NcIn0sTnQ9e1wiJlwiOlwiJmFtcDtcIixcIjxcIjpcIiZsdDtcIixcIj5cIjpcIiZndDtcIiwnXCInOlwiJnF1b3Q7XCIsXCInXCI6XCImIzM5O1wiLFwiYFwiOlwiJiM5NjtcIn0sVXQ9e1wiJmFtcDtcIjpcIiZcIixcIiZsdDtcIjpcIjxcIixcIiZndDtcIjpcIj5cIixcIiZxdW90O1wiOidcIicsXCImIzM5O1wiOlwiJ1wiLFwiJiM5NjtcIjpcImBcIn0sRnQ9e1wiZnVuY3Rpb25cIjp0cnVlLG9iamVjdDp0cnVlfSxMdD17XCJcXFxcXCI6XCJcXFxcXCIsXCInXCI6XCInXCIsXCJcXG5cIjpcIm5cIixcIlxcclwiOlwiclwiLFwiXFx1MjAyOFwiOlwidTIwMjhcIixcIlxcdTIwMjlcIjpcInUyMDI5XCJ9LCR0PUZ0W3R5cGVvZiB3aW5kb3ddJiZ3aW5kb3chPT0odGhpcyYmdGhpcy53aW5kb3cpP3dpbmRvdzp0aGlzLEJ0PUZ0W3R5cGVvZiBleHBvcnRzXSYmZXhwb3J0cyYmIWV4cG9ydHMubm9kZVR5cGUmJmV4cG9ydHMsRnQ9RnRbdHlwZW9mIG1vZHVsZV0mJm1vZHVsZSYmIW1vZHVsZS5ub2RlVHlwZSYmbW9kdWxlLHp0PUJ0JiZGdCYmdHlwZW9mIGdsb2JhbD09XCJvYmplY3RcIiYmZ2xvYmFsO1xuIXp0fHx6dC5nbG9iYWwhPT16dCYmenQud2luZG93IT09enQmJnp0LnNlbGYhPT16dHx8KCR0PXp0KTt2YXIgenQ9RnQmJkZ0LmV4cG9ydHM9PT1CdCYmQnQsRHQ9bSgpO3R5cGVvZiBkZWZpbmU9PVwiZnVuY3Rpb25cIiYmdHlwZW9mIGRlZmluZS5hbWQ9PVwib2JqZWN0XCImJmRlZmluZS5hbWQ/KCR0Ll89RHQsIGRlZmluZShmdW5jdGlvbigpe3JldHVybiBEdH0pKTpCdCYmRnQ/enQ/KEZ0LmV4cG9ydHM9RHQpLl89RHQ6QnQuXz1EdDokdC5fPUR0fSkuY2FsbCh0aGlzKTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgnYXJjaGl2ZScsIGZ1bmN0aW9uIChkYXRhKSB7XG5cdHZhciBhcmNoaXZlID0ge307XG5cblx0YXJjaGl2ZS5zZW5kRXh0ZXJuYWxVUkwgPSBmdW5jdGlvbihleHRlcm5hbFVSTCwgdGFncykge1xuXHRcdHJldHVybiBkYXRhLnBvc3RDb3ZlcihleHRlcm5hbFVSTCwgdGFncyk7XG5cdH07XG5cblx0cmV0dXJuIGFyY2hpdmU7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgnY2FjaGUnLCBmdW5jdGlvbiAoJHEsICRsb2csIGRhdGEpIHtcblx0dmFyIGNhY2hlID0ge307XG5cblx0dmFyIGxpYnJhcnkgPSBudWxsO1xuXHR2YXIgc2VjdGlvbnMgPSB7fTtcblx0dmFyIGJvb2tzID0ge307XG5cdHZhciBpbWFnZXMgPSB7fTtcblxuXHRjYWNoZS5pbml0ID0gZnVuY3Rpb24obGlicmFyeU1vZGVsLCBzZWN0aW9uTW9kZWxzLCBib29rTW9kZWxzLCBjb3ZlcnMpIHtcblx0XHR2YXIgbGlicmFyeUxvYWQgPSBsb2FkTGlicmFyeURhdGEobGlicmFyeU1vZGVsKTtcblx0XHR2YXIgc2VjdGlvbnNMb2FkID0gW107XG5cdFx0dmFyIGJvb2tzTG9hZCA9IFtdO1xuXHRcdHZhciBpbWFnZXNMb2FkID0gW107XG5cdFx0dmFyIG1vZGVsLCBjb3ZlcklkOyAvLyBpdGVyYXRvcnNcblxuXHRcdGZvciAobW9kZWwgaW4gc2VjdGlvbk1vZGVscykge1xuXHRcdFx0c2VjdGlvbnNMb2FkLnB1c2goYWRkU2VjdGlvbihtb2RlbCkpO1xuXHRcdH1cblxuXHRcdGZvciAobW9kZWwgaW4gYm9va01vZGVscykge1xuXHRcdFx0Ym9va3NMb2FkLnB1c2goYWRkQm9vayhtb2RlbCkpO1xuXHRcdH1cblxuXHRcdGZvciAoY292ZXJJZCBpbiBjb3ZlcnMpIHtcblx0XHRcdGltYWdlc0xvYWQucHVzaChhZGRJbWFnZUJ5RHRvKGNvdmVyc1tjb3ZlcklkXSkpO1xuXHRcdH1cblxuXHRcdHZhciBwcm9taXNlID0gJHEuYWxsKHtcblx0XHRcdGxpYnJhcnlDYWNoZTogbGlicmFyeUxvYWQsIFxuXHRcdFx0c2VjdGlvbnNMb2FkOiAkcS5hbGwoc2VjdGlvbnNMb2FkKSwgXG5cdFx0XHRib29rc0xvYWQ6ICRxLmFsbChib29rc0xvYWQpLFxuXHRcdFx0aW1hZ2VzTG9hZDogJHEuYWxsKGltYWdlc0xvYWQpXG5cdFx0fSkudGhlbihmdW5jdGlvbiAocmVzdWx0cykge1xuXHRcdFx0bGlicmFyeSA9IHJlc3VsdHMubGlicmFyeUNhY2hlO1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIHByb21pc2U7XG5cdH07XG5cblx0Y2FjaGUuZ2V0TGlicmFyeSA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBsaWJyYXJ5O1xuXHR9O1xuXG5cdGNhY2hlLmdldFNlY3Rpb24gPSBmdW5jdGlvbihtb2RlbCkge1xuXHRcdHJldHVybiBjb21tb25HZXR0ZXIoc2VjdGlvbnMsIG1vZGVsLCBhZGRTZWN0aW9uKTtcblx0fTtcblxuXHRjYWNoZS5nZXRCb29rID0gZnVuY3Rpb24obW9kZWwpIHtcblx0XHRyZXR1cm4gY29tbW9uR2V0dGVyKGJvb2tzLCBtb2RlbCwgYWRkQm9vayk7XG5cdH07XG5cblx0Y2FjaGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbihpZCkge1xuXHRcdHJldHVybiBjb21tb25HZXR0ZXIoaW1hZ2VzLCBpZCwgYWRkSW1hZ2VCeUlkKTtcblx0fTtcblxuXHR2YXIgYWRkU2VjdGlvbiA9IGZ1bmN0aW9uKG1vZGVsKSB7XG5cdFx0cmV0dXJuIGNvbW1vbkFkZGVyKHNlY3Rpb25zLCBtb2RlbCwgbG9hZFNlY3Rpb25EYXRhKTtcblx0fTtcblxuXHR2YXIgYWRkQm9vayA9IGZ1bmN0aW9uKG1vZGVsKSB7XG5cdFx0cmV0dXJuIGNvbW1vbkFkZGVyKGJvb2tzLCBtb2RlbCwgbG9hZEJvb2tEYXRhKTtcblx0fTtcblxuXHR2YXIgYWRkSW1hZ2VCeUlkID0gZnVuY3Rpb24oaWQpIHtcblx0XHRyZXR1cm4gZGF0YS5nZXRDb3ZlcihpZCkudGhlbihmdW5jdGlvbiAoY292ZXJEdG8pIHtcblx0XHRcdHJldHVybiBkYXRhLmxvYWRJbWFnZShjb3ZlckR0by51cmwpLnRoZW4oZnVuY3Rpb24gKGltYWdlKSB7XG5cdFx0XHRcdHJldHVybiBhZGRJbWFnZShjb3ZlckR0bywgaW1hZ2UpO1xuXHRcdFx0fSk7XG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24gKCkge1xuXHRcdFx0JGxvZy5lcnJvcignRXJyb3IgYWRkaW5nIGltYWdlIGJ5IGlkOicsIGlkKTtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH0pO1xuXHR9O1xuXG5cdHZhciBhZGRJbWFnZUJ5RHRvID0gZnVuY3Rpb24oY292ZXJEdG8pIHtcblx0XHRyZXR1cm4gZGF0YS5sb2FkSW1hZ2UoY292ZXJEdG8udXJsKS50aGVuKGZ1bmN0aW9uIChpbWFnZSkge1xuXHRcdFx0cmV0dXJuIGFkZEltYWdlKGNvdmVyRHRvLCBpbWFnZSk7XG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24gKCkge1xuXHRcdFx0JGxvZy5lcnJvcignRXJyb3IgYWRkaW5nIGltYWdlIGJ5IGR0bzonLCBjb3ZlckR0by5pZCk7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9KTtcblx0fTtcblxuXHR2YXIgYWRkSW1hZ2UgPSBmdW5jdGlvbihkdG8sIGltYWdlKSB7XG5cdFx0dmFyIGxvYWRlZENhY2hlID0ge1xuXHRcdFx0ZHRvOiBkdG8sXG5cdFx0XHRpbWFnZTogaW1hZ2Vcblx0XHR9O1xuXG5cdFx0aW1hZ2VzW2R0by5pZF0gPSBsb2FkZWRDYWNoZTtcblx0XHRyZXR1cm4gbG9hZGVkQ2FjaGU7XG5cdH07XG5cblx0dmFyIGNvbW1vbkdldHRlciA9IGZ1bmN0aW9uKGZyb20sIGtleSwgYWRkRnVuY3Rpb24pIHtcblx0XHR2YXIgcmVzdWx0ID0gZnJvbVtrZXldO1xuXG5cdFx0aWYoIXJlc3VsdCkge1xuXHRcdFx0cmVzdWx0ID0gYWRkRnVuY3Rpb24oa2V5KTtcblx0XHR9XG5cblx0XHRyZXR1cm4gJHEud2hlbihyZXN1bHQpO1xuXHR9O1xuXG5cdHZhciBjb21tb25BZGRlciA9IGZ1bmN0aW9uKHdoZXJlLCB3aGF0LCBsb2FkZXIpIHtcblx0XHR2YXIgcHJvbWlzZSA9IGxvYWRlcih3aGF0KS50aGVuKGZ1bmN0aW9uIChsb2FkZWRDYWNoZSkge1xuXHRcdFx0d2hlcmVbd2hhdF0gPSBsb2FkZWRDYWNoZTtcblxuXHRcdFx0cmV0dXJuIGxvYWRlZENhY2hlO1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIHByb21pc2U7XG5cdH07XG5cblx0dmFyIGxvYWRMaWJyYXJ5RGF0YSA9IGZ1bmN0aW9uKG1vZGVsKSB7XG5cdFx0dmFyIHBhdGggPSAnL29iai9saWJyYXJpZXMve21vZGVsfS8nLnJlcGxhY2UoJ3ttb2RlbH0nLCBtb2RlbCk7XG4gICAgICAgIHZhciBtb2RlbFVybCA9IHBhdGggKyAnbW9kZWwuanNvbic7XG4gICAgICAgIHZhciBtYXBVcmwgPSBwYXRoICsgJ21hcC5qcGcnO1xuXG4gICAgICAgIHZhciBwcm9taXNlID0gJHEuYWxsKHtcbiAgICAgICAgXHRnZW9tZXRyeTogZGF0YS5sb2FkR2VvbWV0cnkobW9kZWxVcmwpLCBcbiAgICAgICAgXHRtYXBJbWFnZTogZGF0YS5sb2FkSW1hZ2UobWFwVXJsKVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcblx0fTtcblxuXHR2YXIgbG9hZFNlY3Rpb25EYXRhID0gZnVuY3Rpb24obW9kZWwpIHtcblx0XHR2YXIgcGF0aCA9ICcvb2JqL3NlY3Rpb25zL3ttb2RlbH0vJy5yZXBsYWNlKCd7bW9kZWx9JywgbW9kZWwpO1xuICAgICAgICB2YXIgbW9kZWxVcmwgPSBwYXRoICsgJ21vZGVsLmpzJztcbiAgICAgICAgdmFyIG1hcFVybCA9IHBhdGggKyAnbWFwLmpwZyc7XG4gICAgICAgIHZhciBkYXRhVXJsID0gcGF0aCArICdkYXRhLmpzb24nO1xuXG4gICAgICAgIHZhciBwcm9taXNlID0gJHEuYWxsKHtcbiAgICAgICAgXHRnZW9tZXRyeTogZGF0YS5sb2FkR2VvbWV0cnkobW9kZWxVcmwpLCBcbiAgICAgICAgXHRtYXBJbWFnZTogZGF0YS5sb2FkSW1hZ2UobWFwVXJsKSwgXG4gICAgICAgIFx0ZGF0YTogZGF0YS5nZXREYXRhKGRhdGFVcmwpXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuXHR9O1xuXG5cdHZhciBsb2FkQm9va0RhdGEgPSBmdW5jdGlvbihtb2RlbCkge1xuXHRcdHZhciBwYXRoID0gJy9vYmovYm9va3Mve21vZGVsfS8nLnJlcGxhY2UoJ3ttb2RlbH0nLCBtb2RlbCk7XG4gICAgICAgIHZhciBtb2RlbFVybCA9IHBhdGggKyAnbW9kZWwuanMnO1xuICAgICAgICB2YXIgbWFwVXJsID0gcGF0aCArICdtYXAuanBnJztcbiAgICAgICAgdmFyIGJ1bXBNYXBVcmwgPSBwYXRoICsgJ2J1bXBfbWFwLmpwZyc7XG4gICAgICAgIHZhciBzcGVjdWxhck1hcFVybCA9IHBhdGggKyAnc3BlY3VsYXJfbWFwLmpwZyc7XG5cbiAgICAgICAgdmFyIHByb21pc2UgPSAkcS5hbGwoe1xuICAgICAgICBcdGdlb21ldHJ5OiBkYXRhLmxvYWRHZW9tZXRyeShtb2RlbFVybCksXG4gICAgICAgIFx0bWFwSW1hZ2U6IGRhdGEubG9hZEltYWdlKG1hcFVybCkuY2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICBcdFx0JGxvZy5lcnJvcignQ2FjaGU6IEVycm9yIGxvYWRpbmcgYm9vayBtYXA6JywgbW9kZWwpO1xuICAgICAgICBcdFx0cmV0dXJuIG51bGw7XG4gICAgICAgIFx0fSksXG4gICAgICAgIFx0YnVtcE1hcEltYWdlOiBkYXRhLmxvYWRJbWFnZShidW1wTWFwVXJsKS5jYXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIFx0XHQkbG9nLmVycm9yKCdDYWNoZTogRXJyb3IgbG9hZGluZyBib29rIGJ1bXBNYXA6JywgbW9kZWwpO1xuICAgICAgICBcdFx0cmV0dXJuIG51bGw7XG4gICAgICAgIFx0fSksXG4gICAgICAgIFx0c3BlY3VsYXJNYXBJbWFnZTogZGF0YS5sb2FkSW1hZ2Uoc3BlY3VsYXJNYXBVcmwpLmNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgXHRcdCRsb2cuZXJyb3IoJ0NhY2hlOiBFcnJvciBsb2FkaW5nIGJvb2sgc3BlY3VsYXJNYXA6JywgbW9kZWwpO1xuICAgICAgICBcdFx0cmV0dXJuIG51bGw7XG4gICAgICAgIFx0fSlcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG5cdH07XG5cblx0cmV0dXJuIGNhY2hlO1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ1ZpcnR1YWxCb29rc2hlbGYnKVxuLmZhY3RvcnkoJ2NhbWVyYScsIGZ1bmN0aW9uIChDYW1lcmFPYmplY3QpIHtcblx0dmFyIGNhbWVyYSA9IHtcblx0XHRIRUlHVEg6IDEuNSxcblx0XHRvYmplY3Q6IG5ldyBDYW1lcmFPYmplY3QoKSxcblx0XHRzZXRQYXJlbnQ6IGZ1bmN0aW9uKHBhcmVudCkge1xuXHRcdFx0cGFyZW50LmFkZCh0aGlzLm9iamVjdCk7XG5cdFx0fSxcblx0XHRnZXRQb3NpdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5vYmplY3QucG9zaXRpb247XG5cdFx0fVxuXHR9O1xuXG5cdHZhciBpbml0ID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG5cdFx0dmFyIGhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcblx0XHRcblx0XHRjYW1lcmEuY2FtZXJhID0gbmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKDQ1LCB3aWR0aCAvIGhlaWdodCwgMC4wMSwgNTApO1xuXHRcdGNhbWVyYS5vYmplY3QucG9zaXRpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygwLCBjYW1lcmEuSEVJR1RILCAwKTtcblx0XHRjYW1lcmEub2JqZWN0LnJvdGF0aW9uLm9yZGVyID0gJ1lYWic7XG5cblx0XHR2YXIgY2FuZGxlID0gbmV3IFRIUkVFLlBvaW50TGlnaHQoMHg2NjU1NTUsIDEuNiwgMTApO1xuXHRcdGNhbmRsZS5wb3NpdGlvbi5zZXQoMCwgMCwgMCk7XG5cdFx0Y2FtZXJhLm9iamVjdC5hZGQoY2FuZGxlKTtcblxuXHRcdGNhbWVyYS5vYmplY3QuYWRkKGNhbWVyYS5jYW1lcmEpO1xuXHR9O1xuXG5cdGNhbWVyYS5yb3RhdGUgPSBmdW5jdGlvbih4LCB5KSB7XG5cdFx0dmFyIG5ld1ggPSB0aGlzLm9iamVjdC5yb3RhdGlvbi54ICsgeSAqIDAuMDAwMSB8fCAwO1xuXHRcdHZhciBuZXdZID0gdGhpcy5vYmplY3Qucm90YXRpb24ueSArIHggKiAwLjAwMDEgfHwgMDtcblxuXHRcdGlmKG5ld1ggPCAxLjU3ICYmIG5ld1ggPiAtMS41Nykge1x0XG5cdFx0XHR0aGlzLm9iamVjdC5yb3RhdGlvbi54ID0gbmV3WDtcblx0XHR9XG5cblx0XHR0aGlzLm9iamVjdC5yb3RhdGlvbi55ID0gbmV3WTtcblx0fTtcblxuXHRjYW1lcmEuZ28gPSBmdW5jdGlvbihzcGVlZCkge1xuXHRcdHZhciBkaXJlY3Rpb24gPSB0aGlzLmdldFZlY3RvcigpO1xuXHRcdHZhciBuZXdQb3NpdGlvbiA9IHRoaXMub2JqZWN0LnBvc2l0aW9uLmNsb25lKCk7XG5cdFx0bmV3UG9zaXRpb24uYWRkKGRpcmVjdGlvbi5tdWx0aXBseVNjYWxhcihzcGVlZCkpO1xuXG5cdFx0dGhpcy5vYmplY3QubW92ZShuZXdQb3NpdGlvbik7XG5cdH07XG5cblx0Y2FtZXJhLmdldFZlY3RvciA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciB2ZWN0b3IgPSBuZXcgVEhSRUUuVmVjdG9yMygwLCAwLCAtMSk7XG5cblx0XHRyZXR1cm4gdmVjdG9yLmFwcGx5RXVsZXIodGhpcy5vYmplY3Qucm90YXRpb24pO1xuXHR9O1xuXG5cdGluaXQoKTtcblxuXHRyZXR1cm4gY2FtZXJhO1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ1ZpcnR1YWxCb29rc2hlbGYnKVxuLyogXG4gKiBjb250cm9scy5qcyBpcyBhIHNlcnZpY2UgZm9yIHByb2Nlc3Npbmcgbm90IFVJKG1lbnVzKSBldmVudHMgXG4gKiBsaWtlIG1vdXNlLCBrZXlib2FyZCwgdG91Y2ggb3IgZ2VzdHVyZXMuXG4gKlxuICogVE9ETzogcmVtb3ZlIGFsbCBidXNpbmVzIGxvZ2ljIGZyb20gdGhlcmUgYW5kIGxlYXZlIG9ubHlcbiAqIGV2ZW50cyBmdW5jdGlvbmFsaXR5IHRvIG1ha2UgaXQgbW9yZSBzaW1pbGFyIHRvIHVzdWFsIGNvbnRyb2xsZXJcbiAqL1xuLmZhY3RvcnkoJ2NvbnRyb2xzJywgZnVuY3Rpb24gKCRxLCAkbG9nLCBTZWxlY3Rvck1ldGEsIEJvb2tPYmplY3QsIFNoZWxmT2JqZWN0LCBTZWN0aW9uT2JqZWN0LCBjYW1lcmEsIG5hdmlnYXRpb24sIGVudmlyb25tZW50LCBtb3VzZSwgc2VsZWN0b3IsIHByZXZpZXcsIGJsb2NrKSB7XG5cdHZhciBjb250cm9scyA9IHt9O1xuXG5cdGNvbnRyb2xzLmluaXQgPSBmdW5jdGlvbigpIHtcblx0XHRjb250cm9scy5pbml0TGlzdGVuZXJzKCk7XG5cdH07XG5cblx0Y29udHJvbHMuaW5pdExpc3RlbmVycyA9IGZ1bmN0aW9uKCkge1xuXHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGNvbnRyb2xzLm9uTW91c2VEb3duLCBmYWxzZSk7XG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGNvbnRyb2xzLm9uTW91c2VVcCwgZmFsc2UpO1xuXHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGNvbnRyb2xzLm9uTW91c2VNb3ZlLCBmYWxzZSk7XHRcblx0XHRkb2N1bWVudC5vbmNvbnRleHRtZW51ID0gZnVuY3Rpb24oKSB7cmV0dXJuIGZhbHNlO307XG5cdH07XG5cblx0Y29udHJvbHMudXBkYXRlID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYoIXByZXZpZXcuaXNBY3RpdmUoKSkge1xuXHRcdFx0aWYobW91c2VbM10pIHtcblx0XHRcdFx0Y2FtZXJhLnJvdGF0ZShtb3VzZS5sb25nWCwgbW91c2UubG9uZ1kpO1xuXHRcdFx0fVxuXHRcdFx0aWYobW91c2VbMV0gJiYgbW91c2VbM10pIHtcblx0XHRcdFx0Y2FtZXJhLmdvKG5hdmlnYXRpb24uQlVUVE9OU19HT19TUEVFRCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdGNvbnRyb2xzLm9uTW91c2VEb3duID0gZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRtb3VzZS5kb3duKGV2ZW50KTsgXG5cblx0XHRpZihtb3VzZS5pc0NhbnZhcygpICYmIG1vdXNlWzFdICYmICFtb3VzZVszXSAmJiAhcHJldmlldy5pc0FjdGl2ZSgpKSB7XG5cdFx0XHRjb250cm9scy5zZWxlY3RPYmplY3QoKTtcblx0XHRcdHNlbGVjdG9yLnNlbGVjdEZvY3VzZWQoKTtcblx0XHR9XG5cdH07XG5cblx0Y29udHJvbHMub25Nb3VzZVVwID0gZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRtb3VzZS51cChldmVudCk7XG5cdFx0XG5cdFx0aWYoZXZlbnQud2hpY2ggPT09IDEgJiYgIXByZXZpZXcuaXNBY3RpdmUoKSkge1xuXHRcdFx0aWYoc2VsZWN0b3IuaXNTZWxlY3RlZEVkaXRhYmxlKCkpIHtcblx0XHRcdFx0dmFyIG9iaiA9IHNlbGVjdG9yLmdldFNlbGVjdGVkT2JqZWN0KCk7XG5cblx0XHRcdFx0aWYob2JqLmNoYW5nZWQpIHtcblx0XHRcdFx0XHRibG9jay5nbG9iYWwuc3RhcnQoKTtcblx0XHRcdFx0XHRvYmouc2F2ZSgpLmNhdGNoKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdG9iai5yb2xsYmFjaygpO1xuXHRcdFx0XHRcdH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0YmxvY2suZ2xvYmFsLnN0b3AoKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fTtcblxuXHRjb250cm9scy5vbk1vdXNlTW92ZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0bW91c2UubW92ZShldmVudCk7XG5cblx0XHRpZihtb3VzZS5pc0NhbnZhcygpICYmICFwcmV2aWV3LmlzQWN0aXZlKCkpIHtcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHRcdGlmKG1vdXNlWzFdICYmICFtb3VzZVszXSkge1x0XHRcblx0XHRcdFx0Y29udHJvbHMubW92ZU9iamVjdCgpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29udHJvbHMuc2VsZWN0T2JqZWN0KCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdC8vKioqKlxuXG5cdGNvbnRyb2xzLnNlbGVjdE9iamVjdCA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhclxuXHRcdFx0aW50ZXJzZWN0ZWQsXG5cdFx0XHRvYmplY3Q7XG5cblx0XHRpZihtb3VzZS5pc0NhbnZhcygpICYmIGVudmlyb25tZW50LmxpYnJhcnkpIHtcblx0XHRcdC8vVE9ETzogb3B0aW1pemVcblx0XHRcdGludGVyc2VjdGVkID0gbW91c2UuZ2V0SW50ZXJzZWN0ZWQoZW52aXJvbm1lbnQubGlicmFyeS5jaGlsZHJlbiwgdHJ1ZSwgW0Jvb2tPYmplY3RdKTtcblx0XHRcdGlmKCFpbnRlcnNlY3RlZCkge1xuXHRcdFx0XHRpbnRlcnNlY3RlZCA9IG1vdXNlLmdldEludGVyc2VjdGVkKGVudmlyb25tZW50LmxpYnJhcnkuY2hpbGRyZW4sIHRydWUsIFtTaGVsZk9iamVjdF0pO1xuXHRcdFx0fVxuXHRcdFx0aWYoIWludGVyc2VjdGVkKSB7XG5cdFx0XHRcdGludGVyc2VjdGVkID0gbW91c2UuZ2V0SW50ZXJzZWN0ZWQoZW52aXJvbm1lbnQubGlicmFyeS5jaGlsZHJlbiwgdHJ1ZSwgW1NlY3Rpb25PYmplY3RdKTtcblx0XHRcdH1cblx0XHRcdGlmKGludGVyc2VjdGVkKSB7XG5cdFx0XHRcdG9iamVjdCA9IGludGVyc2VjdGVkLm9iamVjdDtcblx0XHRcdH1cblxuXHRcdFx0c2VsZWN0b3IuZm9jdXMobmV3IFNlbGVjdG9yTWV0YShvYmplY3QpKTtcblx0XHR9XG5cdH07XG5cblx0Y29udHJvbHMubW92ZU9iamVjdCA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBtb3VzZVZlY3Rvcjtcblx0XHR2YXIgbmV3UG9zaXRpb247XG5cdFx0dmFyIHBhcmVudDtcblx0XHR2YXIgc2VsZWN0ZWRPYmplY3Q7XG5cblx0XHRpZihzZWxlY3Rvci5pc1NlbGVjdGVkRWRpdGFibGUoKSkge1xuXHRcdFx0c2VsZWN0ZWRPYmplY3QgPSBzZWxlY3Rvci5nZXRTZWxlY3RlZE9iamVjdCgpO1xuXHRcdFx0bW91c2VWZWN0b3IgPSBjYW1lcmEuZ2V0VmVjdG9yKCk7XHRcblx0XHRcdG5ld1Bvc2l0aW9uID0gc2VsZWN0ZWRPYmplY3QucG9zaXRpb24uY2xvbmUoKTtcblx0XHRcdHBhcmVudCA9IHNlbGVjdGVkT2JqZWN0LnBhcmVudDtcblx0XHRcdHBhcmVudC5sb2NhbFRvV29ybGQobmV3UG9zaXRpb24pO1xuXG5cdFx0XHRuZXdQb3NpdGlvbi54IC09IChtb3VzZVZlY3Rvci56ICogbW91c2UuZFggKyBtb3VzZVZlY3Rvci54ICogbW91c2UuZFkpICogMC4wMDM7XG5cdFx0XHRuZXdQb3NpdGlvbi56IC09ICgtbW91c2VWZWN0b3IueCAqIG1vdXNlLmRYICsgbW91c2VWZWN0b3IueiAqIG1vdXNlLmRZKSAqIDAuMDAzO1xuXG5cdFx0XHRwYXJlbnQud29ybGRUb0xvY2FsKG5ld1Bvc2l0aW9uKTtcblx0XHRcdHNlbGVjdGVkT2JqZWN0Lm1vdmUobmV3UG9zaXRpb24pO1xuXHRcdH1cblx0fTtcblxuXHRyZXR1cm4gY29udHJvbHM7XHRcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5mYWN0b3J5KCdkYXRhJywgZnVuY3Rpb24gKCRodHRwLCAkcSkge1xuXHR2YXIgZGF0YSA9IHt9O1xuXG5cdGRhdGEuVEVYVFVSRV9SRVNPTFVUSU9OID0gNTEyO1xuXHRkYXRhLkNPVkVSX01BWF9ZID0gMzk0O1xuXHRkYXRhLkNPVkVSX0ZBQ0VfWCA9IDI5NjtcblxuICAgIGRhdGEubG9hZEltYWdlID0gZnVuY3Rpb24odXJsKSB7XG4gICAgICAgIHZhciBkZWZmZXJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgIHZhciBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgXG4gICAgICAgIGltZy5jcm9zc09yaWdpbiA9ICcnOyBcbiAgICAgICAgaW1nLnNyYyA9IHVybDtcbiAgICAgICAgXG4gICAgICAgIGlmKGltZy5jb21wbGV0ZSkge1xuICAgICAgICAgICAgZGVmZmVyZWQucmVzb2x2ZShpbWcpO1xuICAgICAgICB9XG5cbiAgICAgICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGRlZmZlcmVkLnJlc29sdmUoaW1nKTtcbiAgICAgICAgfTtcbiAgICAgICAgaW1nLm9uZXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGRlZmZlcmVkLnJlamVjdChlcnJvcik7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGRlZmZlcmVkLnByb21pc2U7IFxuICAgIH07XG5cblx0ZGF0YS5nZXRDb3ZlciA9IGZ1bmN0aW9uKGlkKSB7XG5cdFx0cmV0dXJuICRodHRwLmdldCgnL2NvdmVyLycgKyBpZCkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdFx0XHRyZXR1cm4gcmVzLmRhdGE7XG5cdFx0fSk7XG5cdH07XG5cbiAgICBkYXRhLnBvc3RDb3ZlciA9IGZ1bmN0aW9uKGV4dGVybmFsVVJMLCB0YWdzKSB7XG4gICAgXHR2YXIgZGF0YSA9IHtcbiAgICBcdFx0dXJsOiBleHRlcm5hbFVSTCxcbiAgICBcdFx0dGFnczogdGFnc1xuICAgIFx0fTtcblxuICAgIFx0cmV0dXJuICRodHRwLnBvc3QoJy9jb3ZlcicsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgIFx0XHRyZXR1cm4gcmVzLmRhdGE7XG4gICAgXHR9KTtcbiAgICB9O1xuXG4gICAgZGF0YS5sb2dvdXQgPSBmdW5jdGlvbigpIHtcbiAgICBcdHJldHVybiAkaHR0cC5wb3N0KCcvYXV0aC9sb2dvdXQnKTtcbiAgICB9O1xuXG5cdGRhdGEuZ2V0VXNlciA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiAkaHR0cC5nZXQoJy91c2VyJyk7XG5cdH07XG5cblx0ZGF0YS5nZXRVc2VyQm9va3MgPSBmdW5jdGlvbih1c2VySWQpIHtcblx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvZnJlZUJvb2tzLycgKyB1c2VySWQpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHRcdFx0cmV0dXJuIHJlcy5kYXRhO1xuXHRcdH0pO1xuXHR9O1xuXG5cdGRhdGEucG9zdEJvb2sgPSBmdW5jdGlvbihib29rKSB7XG5cdFx0cmV0dXJuICRodHRwLnBvc3QoJy9ib29rJywgYm9vaykudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdFx0XHRyZXR1cm4gcmVzLmRhdGE7XG5cdFx0fSk7XG5cdH07XG5cblx0ZGF0YS5kZWxldGVCb29rID0gZnVuY3Rpb24oaWQpIHtcblx0XHRyZXR1cm4gJGh0dHAoe1xuXHRcdFx0bWV0aG9kOiAnREVMRVRFJyxcblx0XHRcdHVybDogJy9ib29rLycgKyBpZFxuXHRcdH0pO1xuXHR9O1xuXG5cdGRhdGEuZ2V0VUlEYXRhID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuICRodHRwLmdldCgnL29iai9kYXRhLmpzb24nKTtcblx0fTtcblxuXHRkYXRhLmdldExpYnJhcmllcyA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiAkaHR0cC5nZXQoJy9saWJyYXJpZXMnKTtcblx0fTtcblxuXHRkYXRhLmdldExpYnJhcnkgPSBmdW5jdGlvbihsaWJyYXJ5SWQpIHtcblx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvbGlicmFyeS8nICsgbGlicmFyeUlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcblx0XHRcdHJldHVybiByZXMuZGF0YTtcblx0XHR9KTtcblx0fTtcblxuXHRkYXRhLnBvc3RMaWJyYXJ5ID0gZnVuY3Rpb24obGlicmFyeU1vZGVsKSB7XG4gICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvbGlicmFyeS8nICsgbGlicmFyeU1vZGVsKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuZGF0YTtcbiAgICAgICAgfSk7XG5cdH07XG5cblx0ZGF0YS5nZXRTZWN0aW9ucyA9IGZ1bmN0aW9uKGxpYnJhcnlJZCkge1xuICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvc2VjdGlvbnMvJyArIGxpYnJhcnlJZCkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmRhdGE7XG4gICAgICAgIH0pO1xuXHR9O1xuXG5cdGRhdGEucG9zdFNlY3Rpb24gPSBmdW5jdGlvbihzZWN0aW9uRGF0YSkge1xuICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnL3NlY3Rpb24nLCBzZWN0aW9uRGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgIFx0cmV0dXJuIHJlcy5kYXRhO1xuICAgICAgICB9KTtcblx0fTtcblxuXHRkYXRhLmRlbGV0ZVNlY3Rpb24gPSBmdW5jdGlvbihpZCkge1xuXHRcdHJldHVybiAkaHR0cCh7XG5cdFx0XHRtZXRob2Q6ICdERUxFVEUnLFxuXHRcdFx0dXJsOiAnL3NlY3Rpb25zLycgKyBpZFxuXHRcdH0pO1xuXHR9O1xuXG5cdGRhdGEubG9hZEdlb21ldHJ5ID0gZnVuY3Rpb24obGluaykge1xuICAgICAgICB2YXIgZGVmZmVyZWQgPSAkcS5kZWZlcigpO1xuXHRcdHZhciBqc29uTG9hZGVyID0gbmV3IFRIUkVFLkpTT05Mb2FkZXIoKTtcblxuICAgICAgICAvL1RPRE86IGZvdW5kIG5vIHdheSB0byByZWplY3Rcblx0XHRqc29uTG9hZGVyLmxvYWQobGluaywgZnVuY3Rpb24gKGdlb21ldHJ5KSB7XG5cdFx0XHRnZW9tZXRyeS5jb21wdXRlQm91bmRpbmdCb3goKTtcblx0XHRcdGRlZmZlcmVkLnJlc29sdmUoZ2VvbWV0cnkpO1xuXHRcdH0pO1xuXG4gICAgICAgIHJldHVybiBkZWZmZXJlZC5wcm9taXNlO1xuXHR9O1xuXG5cdGRhdGEuZ2V0RGF0YSA9IGZ1bmN0aW9uKHVybCkge1xuICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmRhdGE7XG4gICAgICAgIH0pO1xuXHR9O1xuXG5cdGRhdGEucG9zdEZlZWRiYWNrID0gZnVuY3Rpb24oZHRvKSB7XG4gICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvZmVlZGJhY2snLCBkdG8pO1xuXHR9O1xuXG5cdHJldHVybiBkYXRhO1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ1ZpcnR1YWxCb29rc2hlbGYnKVxuLmZhY3RvcnkoJ2RpYWxvZycsIGZ1bmN0aW9uIChuZ0RpYWxvZykge1xuXHR2YXIgZGlhbG9nID0ge307XG5cblx0dmFyIEVSUk9SID0gMTtcblx0dmFyIENPTkZJUk0gPSAyO1xuXHR2YXIgV0FSTklORyA9IDM7XG5cdHZhciBJTkZPID0gNDtcblxuXHR2YXIgaWNvbkNsYXNzTWFwID0ge307XG5cdGljb25DbGFzc01hcFtFUlJPUl0gPSAnZmEtdGltZXMtY2lyY2xlJztcblx0aWNvbkNsYXNzTWFwW0NPTkZJUk1dID0gJ2ZhLXF1ZXN0aW9uLWNpcmNsZSc7XG5cdGljb25DbGFzc01hcFtXQVJOSU5HXSA9ICdmYS1leGNsYW1hdGlvbi10cmlhbmdsZSc7XG5cdGljb25DbGFzc01hcFtJTkZPXSA9ICdmYS1pbmZvLWNpcmNsZSc7XG5cblx0ZGlhbG9nLm9wZW5FcnJvciA9IGZ1bmN0aW9uKG1zZykge1xuXHRcdHJldHVybiBvcGVuRGlhbG9nKG1zZywgRVJST1IpO1xuXHR9O1xuXG5cdGRpYWxvZy5vcGVuQ29uZmlybSA9IGZ1bmN0aW9uKG1zZykge1xuXHRcdHJldHVybiBvcGVuRGlhbG9nKG1zZywgQ09ORklSTSwgdHJ1ZSk7XG5cdH07XG5cblx0ZGlhbG9nLm9wZW5XYXJuaW5nID0gZnVuY3Rpb24obXNnKSB7XG5cdFx0cmV0dXJuIG9wZW5EaWFsb2cobXNnLCBXQVJOSU5HKTtcblx0fTtcblxuXHRkaWFsb2cub3BlbkluZm8gPSBmdW5jdGlvbihtc2cpIHtcblx0XHRyZXR1cm4gb3BlbkRpYWxvZyhtc2csIElORk8pO1xuXHR9O1xuXG5cdHZhciBvcGVuRGlhbG9nID0gZnVuY3Rpb24obXNnLCB0eXBlLCBjYW5jZWxCdXR0b24pIHtcblx0XHRyZXR1cm4gbmdEaWFsb2cub3BlbkNvbmZpcm0oe1xuXHRcdFx0dGVtcGxhdGU6ICcvdWkvY29uZmlybURpYWxvZycsXG5cdFx0XHRkYXRhOiB7XG5cdFx0XHRcdG1zZzogbXNnLFxuXHRcdFx0XHRpY29uQ2xhc3M6IGdldEljb25DbGFzcyh0eXBlKSxcblx0XHRcdFx0Y2FuY2VsQnV0dG9uOiBjYW5jZWxCdXR0b25cblx0XHRcdH1cblx0XHR9KTtcblx0fTtcblxuXHR2YXIgZ2V0SWNvbkNsYXNzID0gZnVuY3Rpb24odHlwZSkge1xuXHRcdHJldHVybiBpY29uQ2xhc3NNYXBbdHlwZV07XG5cdH07XG5cblx0cmV0dXJuIGRpYWxvZztcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5mYWN0b3J5KCdlbnZpcm9ubWVudCcsIGZ1bmN0aW9uICgkcSwgJGxvZywgJHdpbmRvdywgTGlicmFyeU9iamVjdCwgU2VjdGlvbk9iamVjdCwgQm9va09iamVjdCwgQm9va01hdGVyaWFsLCBkYXRhLCBjYW1lcmEsIGNhY2hlKSB7XG5cdHZhciBlbnZpcm9ubWVudCA9IHt9O1xuXG5cdGVudmlyb25tZW50LkNMRUFSQU5DRSA9IDAuMDAxO1xuXHRlbnZpcm9ubWVudC5MSUJSQVJZX0NBTlZBU19JRCA9ICdMSUJSQVJZJztcblx0IFxuXHR2YXIgbGlicmFyeUR0byA9IG51bGw7XG5cdHZhciBzZWN0aW9ucyA9IG51bGw7XG5cdHZhciBib29rcyA9IG51bGw7XG5cdHZhciBsb2FkZWQgPSBmYWxzZTtcblxuXHRlbnZpcm9ubWVudC5zY2VuZSA9IG51bGw7XG5cdGVudmlyb25tZW50LmxpYnJhcnkgPSBudWxsO1xuXG5cdGVudmlyb25tZW50LmxvYWRMaWJyYXJ5ID0gZnVuY3Rpb24obGlicmFyeUlkKSB7XG5cdFx0Y2xlYXJTY2VuZSgpOyAvLyBpbml0cyBzb21lIGZpZWxkc1xuXG5cdFx0dmFyIHByb21pc2UgPSBkYXRhLmdldExpYnJhcnkobGlicmFyeUlkKS50aGVuKGZ1bmN0aW9uIChkdG8pIHtcblx0XHRcdHZhciBkaWN0ID0gcGFyc2VMaWJyYXJ5RHRvKGR0byk7XG5cdFx0XHRcblx0XHRcdHNlY3Rpb25zID0gZGljdC5zZWN0aW9ucztcblx0XHRcdGJvb2tzID0gZGljdC5ib29rcztcblx0XHRcdGxpYnJhcnlEdG8gPSBkdG87XG5cblx0XHRcdHJldHVybiBpbml0Q2FjaGUobGlicmFyeUR0bywgZGljdC5zZWN0aW9ucywgZGljdC5ib29rcyk7XG5cdFx0fSkudGhlbihmdW5jdGlvbiAoKSB7XG5cdFx0XHRjcmVhdGVMaWJyYXJ5KGxpYnJhcnlEdG8pO1xuXHRcdFx0cmV0dXJuIGNyZWF0ZVNlY3Rpb25zKHNlY3Rpb25zKTtcblx0XHR9KS50aGVuKGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBjcmVhdGVCb29rcyhib29rcyk7XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gcHJvbWlzZTtcblx0fTtcblxuXHRlbnZpcm9ubWVudC5nb1RvTGlicmFyeSA9IGZ1bmN0aW9uKGlkKSB7XG5cdFx0aWYoaWQpIHtcblx0XHRcdCR3aW5kb3cubG9jYXRpb24gPSAnLycgKyBpZDtcblx0XHR9XG5cdH07XG5cblx0ZW52aXJvbm1lbnQuc2V0TG9hZGVkID0gZnVuY3Rpb24odmFsdWUpIHtcblx0XHRsb2FkZWQgPSB2YWx1ZTtcblx0fTtcblxuXHRlbnZpcm9ubWVudC5nZXRMb2FkZWQgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gbG9hZGVkO1xuXHR9O1xuXG5cdGVudmlyb25tZW50LmdldEJvb2sgPSBmdW5jdGlvbihib29rSWQpIHtcblx0XHRyZXR1cm4gZ2V0RGljdE9iamVjdChib29rcywgYm9va0lkKTtcblx0fTtcblxuXHRlbnZpcm9ubWVudC5nZXRTZWN0aW9uID0gZnVuY3Rpb24oc2VjdGlvbklkKSB7XG5cdFx0cmV0dXJuIGdldERpY3RPYmplY3Qoc2VjdGlvbnMsIHNlY3Rpb25JZCk7XG5cdH07XG5cblx0ZW52aXJvbm1lbnQuZ2V0U2hlbGYgPSBmdW5jdGlvbihzZWN0aW9uSWQsIHNoZWxmSWQpIHtcblx0XHR2YXIgc2VjdGlvbiA9IGVudmlyb25tZW50LmdldFNlY3Rpb24oc2VjdGlvbklkKTtcblx0XHR2YXIgc2hlbGYgPSBzZWN0aW9uICYmIHNlY3Rpb24uc2hlbHZlc1tzaGVsZklkXTtcblxuXHRcdHJldHVybiBzaGVsZjtcblx0fTtcblxuXHR2YXIgZ2V0RGljdE9iamVjdCA9IGZ1bmN0aW9uKGRpY3QsIG9iamVjdElkKSB7XG5cdFx0dmFyIGRpY3RJdGVtID0gZGljdFtvYmplY3RJZF07XG5cdFx0dmFyIGRpY3RPYmplY3QgPSBkaWN0SXRlbSAmJiBkaWN0SXRlbS5vYmo7XG5cblx0XHRyZXR1cm4gZGljdE9iamVjdDtcblx0fTtcblxuXHRlbnZpcm9ubWVudC51cGRhdGVTZWN0aW9uID0gZnVuY3Rpb24oZHRvKSB7XG5cdFx0aWYoZHRvLmxpYnJhcnlJZCA9PSBlbnZpcm9ubWVudC5saWJyYXJ5LmlkKSB7XG5cdFx0XHRlbnZpcm9ubWVudC5yZW1vdmVTZWN0aW9uKGR0by5pZCk7XG5cdFx0XHRjcmVhdGVTZWN0aW9uKGR0byk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGVudmlyb25tZW50LnJlbW92ZVNlY3Rpb24oZHRvLmlkKTtcblx0XHR9XHRcblx0fTtcblxuXHRlbnZpcm9ubWVudC51cGRhdGVCb29rID0gZnVuY3Rpb24oZHRvKSB7XG5cdFx0dmFyIHNoZWxmID0gZ2V0Qm9va1NoZWxmKGR0byk7XG5cblx0XHRpZihzaGVsZikge1xuXHRcdFx0ZW52aXJvbm1lbnQucmVtb3ZlQm9vayhkdG8uaWQpO1xuXHRcdFx0Y3JlYXRlQm9vayhkdG8pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRlbnZpcm9ubWVudC5yZW1vdmVCb29rKGR0by5pZCk7XG5cdFx0fVxuXHR9O1xuXG5cdGVudmlyb25tZW50LnJlbW92ZUJvb2sgPSBmdW5jdGlvbihpZCkge1xuXHRcdHJlbW92ZU9iamVjdChib29rcywgaWQpO1xuXHR9O1xuXG5cdGVudmlyb25tZW50LnJlbW92ZVNlY3Rpb24gPSBmdW5jdGlvbihpZCkge1xuXHRcdHJlbW92ZU9iamVjdChzZWN0aW9ucywgaWQpO1xuXHR9O1xuXG5cdHZhciByZW1vdmVPYmplY3QgPSBmdW5jdGlvbihkaWN0LCBrZXkpIHtcblx0XHR2YXIgZGljdEl0ZW0gPSBkaWN0W2tleV07XG5cdFx0aWYoZGljdEl0ZW0pIHtcblx0XHRcdGRlbGV0ZSBkaWN0W2tleV07XG5cdFx0XHRcblx0XHRcdGlmKGRpY3RJdGVtLm9iaikge1xuXHRcdFx0XHRkaWN0SXRlbS5vYmouc2V0UGFyZW50KG51bGwpO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcblxuXHR2YXIgaW5pdENhY2hlID0gZnVuY3Rpb24obGlicmFyeUR0bywgc2VjdGlvbnNEaWN0LCBib29rc0RpY3QpIHtcblx0XHR2YXIgbGlicmFyeU1vZGVsID0gbGlicmFyeUR0by5tb2RlbDtcblx0XHR2YXIgc2VjdGlvbk1vZGVscyA9IHt9O1xuXHRcdHZhciBib29rTW9kZWxzID0ge307XG5cdFx0dmFyIGltYWdlVXJscyA9IHt9O1xuXG5cdFx0Zm9yICh2YXIgc2VjdGlvbklkIGluIHNlY3Rpb25zRGljdCkge1xuXHRcdFx0dmFyIHNlY3Rpb25EdG8gPSBzZWN0aW9uc0RpY3Rbc2VjdGlvbklkXS5kdG87XG5cdFx0XHRzZWN0aW9uTW9kZWxzW3NlY3Rpb25EdG8ubW9kZWxdID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRmb3IgKHZhciBib29rSWQgaW4gYm9va3NEaWN0KSB7XG5cdFx0XHR2YXIgYm9va0R0byA9IGJvb2tzRGljdFtib29rSWRdLmR0bztcblx0XHRcdGJvb2tNb2RlbHNbYm9va0R0by5tb2RlbF0gPSB0cnVlO1xuXG5cdFx0XHRpZihib29rRHRvLmNvdmVyKSB7XG5cdFx0XHRcdGltYWdlVXJsc1tib29rRHRvLmNvdmVyLmlkXSA9IGJvb2tEdG8uY292ZXI7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNhY2hlLmluaXQobGlicmFyeU1vZGVsLCBzZWN0aW9uTW9kZWxzLCBib29rTW9kZWxzLCBpbWFnZVVybHMpO1xuXHR9O1xuXG5cdHZhciBjbGVhclNjZW5lID0gZnVuY3Rpb24oKSB7XG5cdFx0ZW52aXJvbm1lbnQubGlicmFyeSA9IG51bGw7XG5cdFx0c2VjdGlvbnMgPSB7fTtcblx0XHRib29rcyA9IHt9O1xuXG5cdFx0d2hpbGUoZW52aXJvbm1lbnQuc2NlbmUuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuXHRcdFx0aWYoZW52aXJvbm1lbnQuc2NlbmUuY2hpbGRyZW5bMF0uZGlzcG9zZSkge1xuXHRcdFx0XHRlbnZpcm9ubWVudC5zY2VuZS5jaGlsZHJlblswXS5kaXNwb3NlKCk7XG5cdFx0XHR9XG5cdFx0XHRlbnZpcm9ubWVudC5zY2VuZS5yZW1vdmUoZW52aXJvbm1lbnQuc2NlbmUuY2hpbGRyZW5bMF0pO1xuXHRcdH1cblx0fTtcblxuXHR2YXIgcGFyc2VMaWJyYXJ5RHRvID0gZnVuY3Rpb24obGlicmFyeUR0bykge1xuXHRcdHZhciByZXN1bHQgPSB7XG5cdFx0XHRzZWN0aW9uczoge30sXG5cdFx0XHRib29rczoge31cblx0XHR9O1xuXG5cdFx0Zm9yKHZhciBzZWN0aW9uSW5kZXggPSBsaWJyYXJ5RHRvLnNlY3Rpb25zLmxlbmd0aCAtIDE7IHNlY3Rpb25JbmRleCA+PSAwOyBzZWN0aW9uSW5kZXgtLSkge1xuXHRcdFx0dmFyIHNlY3Rpb25EdG8gPSBsaWJyYXJ5RHRvLnNlY3Rpb25zW3NlY3Rpb25JbmRleF07XG5cdFx0XHRyZXN1bHQuc2VjdGlvbnNbc2VjdGlvbkR0by5pZF0gPSB7ZHRvOiBzZWN0aW9uRHRvfTtcblxuXHRcdFx0Zm9yKHZhciBib29rSW5kZXggPSBzZWN0aW9uRHRvLmJvb2tzLmxlbmd0aCAtIDE7IGJvb2tJbmRleCA+PSAwOyBib29rSW5kZXgtLSkge1xuXHRcdFx0XHR2YXIgYm9va0R0byA9IHNlY3Rpb25EdG8uYm9va3NbYm9va0luZGV4XTtcblx0XHRcdFx0cmVzdWx0LmJvb2tzW2Jvb2tEdG8uaWRdID0ge2R0bzogYm9va0R0b307XG5cdFx0XHR9XG5cblx0XHRcdGRlbGV0ZSBzZWN0aW9uRHRvLmJvb2tzO1xuXHRcdH1cblxuXHRcdGRlbGV0ZSBsaWJyYXJ5RHRvLnNlY3Rpb25zO1xuXG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fTtcblxuXHR2YXIgY3JlYXRlTGlicmFyeSA9IGZ1bmN0aW9uKGxpYnJhcnlEdG8pIHtcblx0XHR2YXIgbGlicmFyeSA9IG51bGw7XG5cdFx0dmFyIGxpYnJhcnlDYWNoZSA9IGNhY2hlLmdldExpYnJhcnkoKTtcbiAgICAgICAgdmFyIHRleHR1cmUgPSBuZXcgVEhSRUUuVGV4dHVyZShsaWJyYXJ5Q2FjaGUubWFwSW1hZ2UpO1xuICAgICAgICB2YXIgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoe21hcDogdGV4dHVyZX0pO1xuXG4gICAgICAgIHRleHR1cmUubmVlZHNVcGRhdGUgPSB0cnVlO1xuXHRcdGxpYnJhcnkgPSBuZXcgTGlicmFyeU9iamVjdChsaWJyYXJ5RHRvLCBsaWJyYXJ5Q2FjaGUuZ2VvbWV0cnksIG1hdGVyaWFsKTtcblx0XHRjYW1lcmEuc2V0UGFyZW50KGxpYnJhcnkpO1xuXG5cdFx0ZW52aXJvbm1lbnQuc2NlbmUuYWRkKGxpYnJhcnkpO1xuXHRcdGVudmlyb25tZW50LmxpYnJhcnkgPSBsaWJyYXJ5O1xuXHR9O1xuXG5cdHZhciBjcmVhdGVTZWN0aW9ucyA9IGZ1bmN0aW9uKHNlY3Rpb25zRGljdCkge1xuXHRcdHJldHVybiBjcmVhdGVPYmplY3RzKHNlY3Rpb25zRGljdCwgY3JlYXRlU2VjdGlvbik7XG5cdH07XG5cblx0dmFyIGNyZWF0ZUJvb2tzID0gZnVuY3Rpb24oYm9va3NEaWN0KSB7XG5cdFx0cmV0dXJuIGNyZWF0ZU9iamVjdHMoYm9va3NEaWN0LCBjcmVhdGVCb29rKTtcblx0fTtcblxuXHR2YXIgY3JlYXRlT2JqZWN0cyA9IGZ1bmN0aW9uKGRpY3QsIGZhY3RvcnkpIHtcblx0XHR2YXIgcmVzdWx0cyA9IFtdO1xuXHRcdHZhciBrZXk7XG5cblx0XHRmb3Ioa2V5IGluIGRpY3QpIHtcblx0XHRcdHJlc3VsdHMucHVzaChmYWN0b3J5KGRpY3Rba2V5XS5kdG8pKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gJHEuYWxsKHJlc3VsdHMpO1xuXHR9O1xuXG5cdHZhciBjcmVhdGVTZWN0aW9uID0gZnVuY3Rpb24oc2VjdGlvbkR0bykge1xuXHRcdHZhciBwcm9taXNlID0gY2FjaGUuZ2V0U2VjdGlvbihzZWN0aW9uRHRvLm1vZGVsKS50aGVuKGZ1bmN0aW9uIChzZWN0aW9uQ2FjaGUpIHtcblx0ICAgICAgICB2YXIgdGV4dHVyZSA9IG5ldyBUSFJFRS5UZXh0dXJlKHNlY3Rpb25DYWNoZS5tYXBJbWFnZSk7XG5cdCAgICAgICAgdmFyIG1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKHttYXA6IHRleHR1cmV9KTtcblx0ICAgICAgICB2YXIgc2VjdGlvbjtcblxuXHQgICAgICAgIHRleHR1cmUubmVlZHNVcGRhdGUgPSB0cnVlO1xuXHQgICAgICAgIHNlY3Rpb25EdG8uZGF0YSA9IHNlY3Rpb25DYWNoZS5kYXRhO1xuXG5cdCAgICAgICAgc2VjdGlvbiA9IG5ldyBTZWN0aW9uT2JqZWN0KHNlY3Rpb25EdG8sIHNlY3Rpb25DYWNoZS5nZW9tZXRyeSwgbWF0ZXJpYWwpO1xuXG5cdFx0XHRlbnZpcm9ubWVudC5saWJyYXJ5LmFkZChzZWN0aW9uKTtcblx0XHRcdGFkZFRvRGljdChzZWN0aW9ucywgc2VjdGlvbik7XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gcHJvbWlzZTtcblx0fTtcblxuXHR2YXIgY3JlYXRlQm9vayA9IGZ1bmN0aW9uKGJvb2tEdG8pIHtcblx0XHR2YXIgcHJvbWlzZXMgPSB7fTtcblx0XHR2YXIgcHJvbWlzZTtcblxuXHRcdHByb21pc2VzLmJvb2tDYWNoZSA9IGNhY2hlLmdldEJvb2soYm9va0R0by5tb2RlbCk7XG5cdFx0aWYoYm9va0R0by5jb3ZlcklkKSB7XG5cdFx0XHRwcm9taXNlcy5jb3ZlckNhY2hlID0gY2FjaGUuZ2V0SW1hZ2UoYm9va0R0by5jb3ZlcklkKTtcblx0XHR9XG5cblx0XHRwcm9taXNlID0gJHEuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uIChyZXN1bHRzKSB7XG5cdFx0XHR2YXIgYm9va0NhY2hlID0gcmVzdWx0cy5ib29rQ2FjaGU7XG5cdFx0XHR2YXIgY292ZXJNYXBJbWFnZSA9IHJlc3VsdHMuY292ZXJDYWNoZSAmJiByZXN1bHRzLmNvdmVyQ2FjaGUuaW1hZ2U7XG5cdFx0XHR2YXIgbWF0ZXJpYWwgPSBuZXcgQm9va01hdGVyaWFsKGJvb2tDYWNoZS5tYXBJbWFnZSwgYm9va0NhY2hlLmJ1bXBNYXBJbWFnZSwgYm9va0NhY2hlLnNwZWN1bGFyTWFwSW1hZ2UsIGNvdmVyTWFwSW1hZ2UpO1xuXHRcdFx0dmFyIGJvb2sgPSBuZXcgQm9va09iamVjdChib29rRHRvLCBib29rQ2FjaGUuZ2VvbWV0cnksIG1hdGVyaWFsKTtcblxuXHRcdFx0YWRkVG9EaWN0KGJvb2tzLCBib29rKTtcblx0XHRcdHBsYWNlQm9va09uU2hlbGYoYm9vayk7XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gcHJvbWlzZTtcblx0fTtcblxuXHR2YXIgYWRkVG9EaWN0ID0gZnVuY3Rpb24oZGljdCwgb2JqKSB7XG5cdFx0dmFyIGRpY3RJdGVtID0ge1xuXHRcdFx0ZHRvOiBvYmouZGF0YU9iamVjdCxcblx0XHRcdG9iajogb2JqXG5cdFx0fTtcblxuXHRcdGRpY3Rbb2JqLmlkXSA9IGRpY3RJdGVtO1xuXHR9O1xuXG5cdHZhciBnZXRCb29rU2hlbGYgPSBmdW5jdGlvbihib29rRHRvKSB7XG5cdFx0cmV0dXJuIGVudmlyb25tZW50LmdldFNoZWxmKGJvb2tEdG8uc2VjdGlvbklkLCBib29rRHRvLnNoZWxmSWQpO1xuXHR9O1xuXG5cdHZhciBwbGFjZUJvb2tPblNoZWxmID0gZnVuY3Rpb24oYm9vaykge1xuXHRcdHZhciBzaGVsZiA9IGdldEJvb2tTaGVsZihib29rLmRhdGFPYmplY3QpO1xuXHRcdHNoZWxmLmFkZChib29rKTtcblx0fTtcblxuXHRyZXR1cm4gZW52aXJvbm1lbnQ7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgnbWFpbicsIGZ1bmN0aW9uICgkbG9nLCAkcSwgY2FtZXJhLCBjb250cm9scywgdXNlciwgZW52aXJvbm1lbnQsIHRvb2xzLCBuYXZpZ2F0aW9uLCBhdXRob3JpemF0aW9uLCBibG9jaykge1x0XG5cdHZhciBjYW52YXM7XG5cdHZhciByZW5kZXJlcjtcblx0XG5cdHZhciBtYWluID0ge307XG5cblx0bWFpbi5zdGFydCA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciB3aW5SZXNpemU7XG5cblx0XHRpZighRGV0ZWN0b3Iud2ViZ2wpIHtcblx0XHRcdERldGVjdG9yLmFkZEdldFdlYkdMTWVzc2FnZSgpO1xuXHRcdH1cblxuXHRcdGluaXQoKTtcblx0XHRjb250cm9scy5pbml0KCk7XG5cblx0XHR3aW5SZXNpemUgPSBuZXcgVEhSRUV4LldpbmRvd1Jlc2l6ZShyZW5kZXJlciwgY2FtZXJhLmNhbWVyYSk7XG5cblx0XHRzdGFydFJlbmRlckxvb3AoKTtcblxuXHRcdGJsb2NrLmdsb2JhbC5zdGFydCgpO1xuXHRcdHVzZXIubG9hZCgpLnRoZW4oZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuICRxLmFsbChbZW52aXJvbm1lbnQubG9hZExpYnJhcnkodXNlci5nZXRMaWJyYXJ5KCkgfHwgMSksIGF1dGhvcml6YXRpb24ubG9hZFVzZXJEYXRhKCldKTtcblx0XHR9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcblx0XHRcdCRsb2cuZXJyb3IoZXJyb3IpO1xuXHRcdFx0Ly9UT0RPOiBzaG93IGVycm9yIG1lc3NhZ2UgIFxuXHRcdH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuXHRcdFx0ZW52aXJvbm1lbnQuc2V0TG9hZGVkKHRydWUpO1xuXHRcdFx0YmxvY2suZ2xvYmFsLnN0b3AoKTtcblx0XHR9KTtcdFx0XG5cdH07XG5cblx0dmFyIGluaXQgPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgd2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcblx0XHR2YXIgaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuXG5cdFx0Y2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZW52aXJvbm1lbnQuTElCUkFSWV9DQU5WQVNfSUQpO1xuXHRcdHJlbmRlcmVyID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyZXIoe2NhbnZhczogY2FudmFzLCBhbnRpYWxpYXM6IHRydWV9KTtcblx0XHRyZW5kZXJlci5zZXRTaXplKHdpZHRoLCBoZWlnaHQpO1xuXG5cdFx0ZW52aXJvbm1lbnQuc2NlbmUgPSBuZXcgVEhSRUUuU2NlbmUoKTtcblx0XHRlbnZpcm9ubWVudC5zY2VuZS5mb2cgPSBuZXcgVEhSRUUuRm9nKDB4MDAwMDAwLCA0LCA3KTtcblx0fTtcblxuXHR2YXIgc3RhcnRSZW5kZXJMb29wID0gZnVuY3Rpb24oKSB7XG5cdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0YXJ0UmVuZGVyTG9vcCk7XG5cblx0XHRjb250cm9scy51cGRhdGUoKTtcblx0XHRuYXZpZ2F0aW9uLnVwZGF0ZSgpO1xuXHRcdHRvb2xzLnVwZGF0ZSgpO1xuXHRcdFxuXHRcdHJlbmRlcmVyLnJlbmRlcihlbnZpcm9ubWVudC5zY2VuZSwgY2FtZXJhLmNhbWVyYSk7XG5cdH07XG5cblx0cmV0dXJuIG1haW47XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgnbW91c2UnLCBmdW5jdGlvbiAoY2FtZXJhLCBlbnZpcm9ubWVudCkge1xuXHR2YXIgbW91c2UgPSB7fTtcblxuXHR2YXIgZ2V0V2lkdGggPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gd2luZG93LmlubmVyV2lkdGg7XG5cdH07XG5cblx0dmFyIGdldEhlaWdodCA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB3aW5kb3cuaW5uZXJIZWlnaHQ7XG5cdH07XG5cblx0dmFyIHggPSBudWxsO1xuXHR2YXIgeSA9IG51bGw7XG5cdFxuXHRtb3VzZS50YXJnZXQgPSBudWxsO1xuXHRtb3VzZS5kWCA9IG51bGw7XG5cdG1vdXNlLmRZID0gbnVsbDtcblx0bW91c2UubG9uZ1ggPSBudWxsO1xuXHRtb3VzZS5sb25nWSA9IG51bGw7XG5cblx0bW91c2UuZ2V0VGFyZ2V0ID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMudGFyZ2V0O1xuXHR9O1xuXG5cdG1vdXNlLmRvd24gPSBmdW5jdGlvbihldmVudCkge1xuXHRcdGlmKGV2ZW50KSB7XG5cdFx0XHR0aGlzW2V2ZW50LndoaWNoXSA9IHRydWU7XG5cdFx0XHR0aGlzLnRhcmdldCA9IGV2ZW50LnRhcmdldDtcblx0XHRcdHggPSBldmVudC5jbGllbnRYO1xuXHRcdFx0eSA9IGV2ZW50LmNsaWVudFk7XG5cdFx0XHRtb3VzZS5sb25nWCA9IGdldFdpZHRoKCkgKiAwLjUgLSB4O1xuXHRcdFx0bW91c2UubG9uZ1kgPSBnZXRIZWlnaHQoKSAqIDAuNSAtIHk7XG5cdFx0fVxuXHR9O1xuXG5cdG1vdXNlLnVwID0gZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRpZihldmVudCkge1xuXHRcdFx0dGhpc1tldmVudC53aGljaF0gPSBmYWxzZTtcblx0XHRcdC8vIGxpbnV4IGNocm9tZSBidWcgZml4ICh3aGVuIGJvdGgga2V5cyByZWxlYXNlIHRoZW4gYm90aCBldmVudC53aGljaCBlcXVhbCAzKVxuXHRcdFx0dGhpc1sxXSA9IGZhbHNlOyBcblx0XHR9XG5cdH07XG5cblx0bW91c2UubW92ZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0aWYoZXZlbnQpIHtcblx0XHRcdHRoaXMudGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xuXHRcdFx0bW91c2UubG9uZ1ggPSBnZXRXaWR0aCgpICogMC41IC0geDtcblx0XHRcdG1vdXNlLmxvbmdZID0gZ2V0SGVpZ2h0KCkgKiAwLjUgLSB5O1xuXHRcdFx0bW91c2UuZFggPSBldmVudC5jbGllbnRYIC0geDtcblx0XHRcdG1vdXNlLmRZID0gZXZlbnQuY2xpZW50WSAtIHk7XG5cdFx0XHR4ID0gZXZlbnQuY2xpZW50WDtcblx0XHRcdHkgPSBldmVudC5jbGllbnRZO1xuXHRcdH1cblx0fTtcblxuXHRtb3VzZS5pc0NhbnZhcyA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLnRhcmdldC5pZCA9PT0gZW52aXJvbm1lbnQuTElCUkFSWV9DQU5WQVNfSUQ7XG5cdH07XG5cblx0bW91c2UuaXNQb2NrZXRCb29rID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGZhbHNlOyAvL1RPRE86IHN0dWJcblx0XHQvLyByZXR1cm4gISEodGhpcy50YXJnZXQgJiYgdGhpcy50YXJnZXQucGFyZW50Tm9kZSA9PSBVSS5tZW51LmludmVudG9yeS5ib29rcyk7XG5cdH07XG5cblx0bW91c2UuZ2V0SW50ZXJzZWN0ZWQgPSBmdW5jdGlvbihvYmplY3RzLCByZWN1cnNpdmUsIHNlYXJjaEZvcikge1xuXHRcdHZhclxuXHRcdFx0dmVjdG9yLFxuXHRcdFx0cmF5Y2FzdGVyLFxuXHRcdFx0aW50ZXJzZWN0cyxcblx0XHRcdGludGVyc2VjdGVkLFxuXHRcdFx0cmVzdWx0LFxuXHRcdFx0aSwgajtcblxuXHRcdHJlc3VsdCA9IG51bGw7XG5cdFx0dmVjdG9yID0gZ2V0VmVjdG9yKCk7XG5cdFx0cmF5Y2FzdGVyID0gbmV3IFRIUkVFLlJheWNhc3RlcihjYW1lcmEuZ2V0UG9zaXRpb24oKSwgdmVjdG9yKTtcblx0XHRpbnRlcnNlY3RzID0gcmF5Y2FzdGVyLmludGVyc2VjdE9iamVjdHMob2JqZWN0cywgcmVjdXJzaXZlKTtcblxuXHRcdGlmKHNlYXJjaEZvcikge1xuXHRcdFx0aWYoaW50ZXJzZWN0cy5sZW5ndGgpIHtcblx0XHRcdFx0Zm9yKGkgPSAwOyBpIDwgaW50ZXJzZWN0cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdGludGVyc2VjdGVkID0gaW50ZXJzZWN0c1tpXTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRmb3IoaiA9IHNlYXJjaEZvci5sZW5ndGggLSAxOyBqID49IDA7IGotLSkge1xuXHRcdFx0XHRcdFx0aWYoaW50ZXJzZWN0ZWQub2JqZWN0IGluc3RhbmNlb2Ygc2VhcmNoRm9yW2pdKSB7XG5cdFx0XHRcdFx0XHRcdHJlc3VsdCA9IGludGVyc2VjdGVkO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZihyZXN1bHQpIHtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVx0XHRcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmVzdWx0ID0gaW50ZXJzZWN0cztcblx0XHR9XG5cblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9O1xuXG5cdHZhciBnZXRWZWN0b3IgPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgcHJvamVjdG9yID0gbmV3IFRIUkVFLlByb2plY3RvcigpO1xuXHRcdHZhciB2ZWN0b3IgPSBuZXcgVEhSRUUuVmVjdG9yMygoeCAvIGdldFdpZHRoKCkpICogMiAtIDEsIC0gKHkgLyBnZXRIZWlnaHQoKSkgKiAyICsgMSwgMC41KTtcblx0XHRwcm9qZWN0b3IudW5wcm9qZWN0VmVjdG9yKHZlY3RvciwgY2FtZXJhLmNhbWVyYSk7XG5cdFxuXHRcdHJldHVybiB2ZWN0b3Iuc3ViKGNhbWVyYS5nZXRQb3NpdGlvbigpKS5ub3JtYWxpemUoKTtcblx0fTtcblxuXHRyZXR1cm4gbW91c2U7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgnbmF2aWdhdGlvbicsIGZ1bmN0aW9uIChjYW1lcmEpIHtcblx0dmFyIG5hdmlnYXRpb24gPSB7fTtcblxuXHRuYXZpZ2F0aW9uLkJVVFRPTlNfUk9UQVRFX1NQRUVEID0gMTAwO1xuXHRuYXZpZ2F0aW9uLkJVVFRPTlNfR09fU1BFRUQgPSAwLjAyO1xuXG5cdHZhciBzdGF0ZSA9IHtcblx0XHRmb3J3YXJkOiBmYWxzZSxcblx0XHRiYWNrd2FyZDogZmFsc2UsXG5cdFx0bGVmdDogZmFsc2UsXG5cdFx0cmlnaHQ6IGZhbHNlXHRcdFx0XG5cdH07XG5cblx0bmF2aWdhdGlvbi5nb1N0b3AgPSBmdW5jdGlvbigpIHtcblx0XHRzdGF0ZS5mb3J3YXJkID0gZmFsc2U7XG5cdFx0c3RhdGUuYmFja3dhcmQgPSBmYWxzZTtcblx0XHRzdGF0ZS5sZWZ0ID0gZmFsc2U7XG5cdFx0c3RhdGUucmlnaHQgPSBmYWxzZTtcblx0fTtcblxuXHRuYXZpZ2F0aW9uLmdvRm9yd2FyZCA9IGZ1bmN0aW9uKCkge1xuXHRcdHN0YXRlLmZvcndhcmQgPSB0cnVlO1xuXHR9O1xuXG5cdG5hdmlnYXRpb24uZ29CYWNrd2FyZCA9IGZ1bmN0aW9uKCkge1xuXHRcdHN0YXRlLmJhY2t3YXJkID0gdHJ1ZTtcblx0fTtcblxuXHRuYXZpZ2F0aW9uLmdvTGVmdCA9IGZ1bmN0aW9uKCkge1xuXHRcdHN0YXRlLmxlZnQgPSB0cnVlO1xuXHR9O1xuXG5cdG5hdmlnYXRpb24uZ29SaWdodCA9IGZ1bmN0aW9uKCkge1xuXHRcdHN0YXRlLnJpZ2h0ID0gdHJ1ZTtcblx0fTtcblxuXHRuYXZpZ2F0aW9uLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHN0YXRlLmZvcndhcmQpIHtcblx0XHRcdGNhbWVyYS5nbyhuYXZpZ2F0aW9uLkJVVFRPTlNfR09fU1BFRUQpO1xuXHRcdH0gZWxzZSBpZihzdGF0ZS5iYWNrd2FyZCkge1xuXHRcdFx0Y2FtZXJhLmdvKC1uYXZpZ2F0aW9uLkJVVFRPTlNfR09fU1BFRUQpO1xuXHRcdH0gZWxzZSBpZihzdGF0ZS5sZWZ0KSB7XG5cdFx0XHRjYW1lcmEucm90YXRlKG5hdmlnYXRpb24uQlVUVE9OU19ST1RBVEVfU1BFRUQsIDApO1xuXHRcdH0gZWxzZSBpZihzdGF0ZS5yaWdodCkge1xuXHRcdFx0Y2FtZXJhLnJvdGF0ZSgtbmF2aWdhdGlvbi5CVVRUT05TX1JPVEFURV9TUEVFRCwgMCk7XG5cdFx0fVxuXHR9O1xuXG5cdHJldHVybiBuYXZpZ2F0aW9uO1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ1ZpcnR1YWxCb29rc2hlbGYnKVxuLmZhY3RvcnkoJ3VzZXInLCBmdW5jdGlvbiAoJGxvZywgZGF0YSkge1xuXHR2YXIgdXNlciA9IHt9O1xuXG5cdHZhciBsb2FkZWQgPSBmYWxzZTtcblx0dmFyIF9kYXRhT2JqZWN0ID0gbnVsbDtcblx0dmFyIF9saWJyYXJ5ID0gbnVsbDtcblxuXHR1c2VyLmxvYWQgPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgc2NvcGUgPSB0aGlzO1xuXG5cdFx0cmV0dXJuIGRhdGEuZ2V0VXNlcigpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHRcdFx0c2NvcGUuc2V0RGF0YU9iamVjdChyZXMuZGF0YSk7XG5cdFx0XHRzY29wZS5zZXRMaWJyYXJ5KCk7XG5cdFx0XHRsb2FkZWQgPSB0cnVlO1xuXG5cdFx0XHQkbG9nLmxvZygndXNlciBsb2FkZWQnKTtcblx0XHR9KTtcblx0fTtcblxuXHR1c2VyLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBkYXRhLmxvZ291dCgpLnRoZW4oZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIHVzZXIubG9hZCgpO1xuXHRcdH0pO1xuXHR9O1xuXG5cdHVzZXIuc2V0RGF0YU9iamVjdCA9IGZ1bmN0aW9uKGRhdGFPYmplY3QpIHtcblx0XHRfZGF0YU9iamVjdCA9IGRhdGFPYmplY3Q7XG5cdH07XG5cblx0dXNlci5nZXRMaWJyYXJ5ID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIF9saWJyYXJ5O1xuXHR9O1xuXG5cdHVzZXIuc2V0TGlicmFyeSA9IGZ1bmN0aW9uKGxpYnJhcnlJZCkge1xuXHRcdF9saWJyYXJ5ID0gbGlicmFyeUlkIHx8IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5zdWJzdHJpbmcoMSk7XG5cdH07XG5cblx0dXNlci5nZXRJZCA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBfZGF0YU9iamVjdCAmJiBfZGF0YU9iamVjdC5pZDtcblx0fTtcblxuXHR1c2VyLmlzQXV0aG9yaXplZCA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBCb29sZWFuKF9kYXRhT2JqZWN0KTtcblx0fTtcblxuXHR1c2VyLmlzTG9hZGVkID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGxvYWRlZDtcblx0fTtcblxuXHRyZXR1cm4gdXNlcjtcbn0pO1xuIiwiLyoqXG4gKiBAYXV0aG9yIGFsdGVyZWRxIC8gaHR0cDovL2FsdGVyZWRxdWFsaWEuY29tL1xuICogQGF1dGhvciBtci5kb29iIC8gaHR0cDovL21yZG9vYi5jb20vXG4gKi9cblxudmFyIERldGVjdG9yID0ge1xuXG5cdGNhbnZhczogISEgd2luZG93LkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcblx0d2ViZ2w6ICggZnVuY3Rpb24gKCkgeyB0cnkgeyB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2NhbnZhcycgKTsgcmV0dXJuICEhIHdpbmRvdy5XZWJHTFJlbmRlcmluZ0NvbnRleHQgJiYgKCBjYW52YXMuZ2V0Q29udGV4dCggJ3dlYmdsJyApIHx8IGNhbnZhcy5nZXRDb250ZXh0KCAnZXhwZXJpbWVudGFsLXdlYmdsJyApICk7IH0gY2F0Y2goIGUgKSB7IHJldHVybiBmYWxzZTsgfSB9ICkoKSxcblx0d29ya2VyczogISEgd2luZG93Lldvcmtlcixcblx0ZmlsZWFwaTogd2luZG93LkZpbGUgJiYgd2luZG93LkZpbGVSZWFkZXIgJiYgd2luZG93LkZpbGVMaXN0ICYmIHdpbmRvdy5CbG9iLFxuXG5cdGdldFdlYkdMRXJyb3JNZXNzYWdlOiBmdW5jdGlvbiAoKSB7XG5cblx0XHR2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnICk7XG5cdFx0ZWxlbWVudC5pZCA9ICd3ZWJnbC1lcnJvci1tZXNzYWdlJztcblx0XHRlbGVtZW50LnN0eWxlLmZvbnRGYW1pbHkgPSAnbW9ub3NwYWNlJztcblx0XHRlbGVtZW50LnN0eWxlLmZvbnRTaXplID0gJzEzcHgnO1xuXHRcdGVsZW1lbnQuc3R5bGUuZm9udFdlaWdodCA9ICdub3JtYWwnO1xuXHRcdGVsZW1lbnQuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XG5cdFx0ZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kID0gJyNmZmYnO1xuXHRcdGVsZW1lbnQuc3R5bGUuY29sb3IgPSAnIzAwMCc7XG5cdFx0ZWxlbWVudC5zdHlsZS5wYWRkaW5nID0gJzEuNWVtJztcblx0XHRlbGVtZW50LnN0eWxlLndpZHRoID0gJzQwMHB4Jztcblx0XHRlbGVtZW50LnN0eWxlLm1hcmdpbiA9ICc1ZW0gYXV0byAwJztcblxuXHRcdGlmICggISB0aGlzLndlYmdsICkge1xuXG5cdFx0XHRlbGVtZW50LmlubmVySFRNTCA9IHdpbmRvdy5XZWJHTFJlbmRlcmluZ0NvbnRleHQgPyBbXG5cdFx0XHRcdCdZb3VyIGdyYXBoaWNzIGNhcmQgZG9lcyBub3Qgc2VlbSB0byBzdXBwb3J0IDxhIGhyZWY9XCJodHRwOi8va2hyb25vcy5vcmcvd2ViZ2wvd2lraS9HZXR0aW5nX2FfV2ViR0xfSW1wbGVtZW50YXRpb25cIiBzdHlsZT1cImNvbG9yOiMwMDBcIj5XZWJHTDwvYT4uPGJyIC8+Jyxcblx0XHRcdFx0J0ZpbmQgb3V0IGhvdyB0byBnZXQgaXQgPGEgaHJlZj1cImh0dHA6Ly9nZXQud2ViZ2wub3JnL1wiIHN0eWxlPVwiY29sb3I6IzAwMFwiPmhlcmU8L2E+Lidcblx0XHRcdF0uam9pbiggJ1xcbicgKSA6IFtcblx0XHRcdFx0J1lvdXIgYnJvd3NlciBkb2VzIG5vdCBzZWVtIHRvIHN1cHBvcnQgPGEgaHJlZj1cImh0dHA6Ly9raHJvbm9zLm9yZy93ZWJnbC93aWtpL0dldHRpbmdfYV9XZWJHTF9JbXBsZW1lbnRhdGlvblwiIHN0eWxlPVwiY29sb3I6IzAwMFwiPldlYkdMPC9hPi48YnIvPicsXG5cdFx0XHRcdCdGaW5kIG91dCBob3cgdG8gZ2V0IGl0IDxhIGhyZWY9XCJodHRwOi8vZ2V0LndlYmdsLm9yZy9cIiBzdHlsZT1cImNvbG9yOiMwMDBcIj5oZXJlPC9hPi4nXG5cdFx0XHRdLmpvaW4oICdcXG4nICk7XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gZWxlbWVudDtcblxuXHR9LFxuXG5cdGFkZEdldFdlYkdMTWVzc2FnZTogZnVuY3Rpb24gKCBwYXJhbWV0ZXJzICkge1xuXG5cdFx0dmFyIHBhcmVudCwgaWQsIGVsZW1lbnQ7XG5cblx0XHRwYXJhbWV0ZXJzID0gcGFyYW1ldGVycyB8fCB7fTtcblxuXHRcdHBhcmVudCA9IHBhcmFtZXRlcnMucGFyZW50ICE9PSB1bmRlZmluZWQgPyBwYXJhbWV0ZXJzLnBhcmVudCA6IGRvY3VtZW50LmJvZHk7XG5cdFx0aWQgPSBwYXJhbWV0ZXJzLmlkICE9PSB1bmRlZmluZWQgPyBwYXJhbWV0ZXJzLmlkIDogJ29sZGllJztcblxuXHRcdGVsZW1lbnQgPSBEZXRlY3Rvci5nZXRXZWJHTEVycm9yTWVzc2FnZSgpO1xuXHRcdGVsZW1lbnQuaWQgPSBpZDtcblxuXHRcdHBhcmVudC5hcHBlbmRDaGlsZCggZWxlbWVudCApO1xuXG5cdH1cblxufTsiLCIvLyB0aHJlZS5qcyAtIGh0dHA6Ly9naXRodWIuY29tL21yZG9vYi90aHJlZS5qc1xuJ3VzZSBzdHJpY3QnO3ZhciBUSFJFRT17UkVWSVNJT046XCI2NFwifTtzZWxmLmNvbnNvbGU9c2VsZi5jb25zb2xlfHx7aW5mbzpmdW5jdGlvbigpe30sbG9nOmZ1bmN0aW9uKCl7fSxkZWJ1ZzpmdW5jdGlvbigpe30sd2FybjpmdW5jdGlvbigpe30sZXJyb3I6ZnVuY3Rpb24oKXt9fTtTdHJpbmcucHJvdG90eXBlLnRyaW09U3RyaW5nLnByb3RvdHlwZS50cmltfHxmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlcGxhY2UoL15cXHMrfFxccyskL2csXCJcIil9O1RIUkVFLmV4dGVuZD1mdW5jdGlvbihhLGIpe2lmKE9iamVjdC5rZXlzKWZvcih2YXIgYz1PYmplY3Qua2V5cyhiKSxkPTAsZT1jLmxlbmd0aDtkPGU7ZCsrKXt2YXIgZj1jW2RdO09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGYsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihiLGYpKX1lbHNlIGZvcihmIGluIGM9e30uaGFzT3duUHJvcGVydHksYiljLmNhbGwoYixmKSYmKGFbZl09YltmXSk7cmV0dXJuIGF9O1xuKGZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYj1bXCJtc1wiLFwibW96XCIsXCJ3ZWJraXRcIixcIm9cIl0sYz0wO2M8Yi5sZW5ndGgmJiFzZWxmLnJlcXVlc3RBbmltYXRpb25GcmFtZTsrK2Mpc2VsZi5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU9c2VsZltiW2NdK1wiUmVxdWVzdEFuaW1hdGlvbkZyYW1lXCJdLHNlbGYuY2FuY2VsQW5pbWF0aW9uRnJhbWU9c2VsZltiW2NdK1wiQ2FuY2VsQW5pbWF0aW9uRnJhbWVcIl18fHNlbGZbYltjXStcIkNhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZVwiXTt2b2lkIDA9PT1zZWxmLnJlcXVlc3RBbmltYXRpb25GcmFtZSYmdm9pZCAwIT09c2VsZi5zZXRUaW1lb3V0JiYoc2VsZi5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU9ZnVuY3Rpb24oYil7dmFyIGM9RGF0ZS5ub3coKSxmPU1hdGgubWF4KDAsMTYtKGMtYSkpLGg9c2VsZi5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YihjK2YpfSxmKTthPWMrZjtyZXR1cm4gaH0pO3ZvaWQgMD09PXNlbGYuY2FuY2VsQW5pbWF0aW9uRnJhbWUmJnZvaWQgMCE9PVxuc2VsZi5jbGVhclRpbWVvdXQmJihzZWxmLmNhbmNlbEFuaW1hdGlvbkZyYW1lPWZ1bmN0aW9uKGEpe3NlbGYuY2xlYXJUaW1lb3V0KGEpfSl9KSgpO1RIUkVFLkN1bGxGYWNlTm9uZT0wO1RIUkVFLkN1bGxGYWNlQmFjaz0xO1RIUkVFLkN1bGxGYWNlRnJvbnQ9MjtUSFJFRS5DdWxsRmFjZUZyb250QmFjaz0zO1RIUkVFLkZyb250RmFjZURpcmVjdGlvbkNXPTA7VEhSRUUuRnJvbnRGYWNlRGlyZWN0aW9uQ0NXPTE7VEhSRUUuQmFzaWNTaGFkb3dNYXA9MDtUSFJFRS5QQ0ZTaGFkb3dNYXA9MTtUSFJFRS5QQ0ZTb2Z0U2hhZG93TWFwPTI7VEhSRUUuRnJvbnRTaWRlPTA7VEhSRUUuQmFja1NpZGU9MTtUSFJFRS5Eb3VibGVTaWRlPTI7VEhSRUUuTm9TaGFkaW5nPTA7VEhSRUUuRmxhdFNoYWRpbmc9MTtUSFJFRS5TbW9vdGhTaGFkaW5nPTI7VEhSRUUuTm9Db2xvcnM9MDtUSFJFRS5GYWNlQ29sb3JzPTE7VEhSRUUuVmVydGV4Q29sb3JzPTI7VEhSRUUuTm9CbGVuZGluZz0wO1xuVEhSRUUuTm9ybWFsQmxlbmRpbmc9MTtUSFJFRS5BZGRpdGl2ZUJsZW5kaW5nPTI7VEhSRUUuU3VidHJhY3RpdmVCbGVuZGluZz0zO1RIUkVFLk11bHRpcGx5QmxlbmRpbmc9NDtUSFJFRS5DdXN0b21CbGVuZGluZz01O1RIUkVFLkFkZEVxdWF0aW9uPTEwMDtUSFJFRS5TdWJ0cmFjdEVxdWF0aW9uPTEwMTtUSFJFRS5SZXZlcnNlU3VidHJhY3RFcXVhdGlvbj0xMDI7VEhSRUUuWmVyb0ZhY3Rvcj0yMDA7VEhSRUUuT25lRmFjdG9yPTIwMTtUSFJFRS5TcmNDb2xvckZhY3Rvcj0yMDI7VEhSRUUuT25lTWludXNTcmNDb2xvckZhY3Rvcj0yMDM7VEhSRUUuU3JjQWxwaGFGYWN0b3I9MjA0O1RIUkVFLk9uZU1pbnVzU3JjQWxwaGFGYWN0b3I9MjA1O1RIUkVFLkRzdEFscGhhRmFjdG9yPTIwNjtUSFJFRS5PbmVNaW51c0RzdEFscGhhRmFjdG9yPTIwNztUSFJFRS5Ec3RDb2xvckZhY3Rvcj0yMDg7VEhSRUUuT25lTWludXNEc3RDb2xvckZhY3Rvcj0yMDk7XG5USFJFRS5TcmNBbHBoYVNhdHVyYXRlRmFjdG9yPTIxMDtUSFJFRS5NdWx0aXBseU9wZXJhdGlvbj0wO1RIUkVFLk1peE9wZXJhdGlvbj0xO1RIUkVFLkFkZE9wZXJhdGlvbj0yO1RIUkVFLlVWTWFwcGluZz1mdW5jdGlvbigpe307VEhSRUUuQ3ViZVJlZmxlY3Rpb25NYXBwaW5nPWZ1bmN0aW9uKCl7fTtUSFJFRS5DdWJlUmVmcmFjdGlvbk1hcHBpbmc9ZnVuY3Rpb24oKXt9O1RIUkVFLlNwaGVyaWNhbFJlZmxlY3Rpb25NYXBwaW5nPWZ1bmN0aW9uKCl7fTtUSFJFRS5TcGhlcmljYWxSZWZyYWN0aW9uTWFwcGluZz1mdW5jdGlvbigpe307VEhSRUUuUmVwZWF0V3JhcHBpbmc9MUUzO1RIUkVFLkNsYW1wVG9FZGdlV3JhcHBpbmc9MTAwMTtUSFJFRS5NaXJyb3JlZFJlcGVhdFdyYXBwaW5nPTEwMDI7VEhSRUUuTmVhcmVzdEZpbHRlcj0xMDAzO1RIUkVFLk5lYXJlc3RNaXBNYXBOZWFyZXN0RmlsdGVyPTEwMDQ7VEhSRUUuTmVhcmVzdE1pcE1hcExpbmVhckZpbHRlcj0xMDA1O1xuVEhSRUUuTGluZWFyRmlsdGVyPTEwMDY7VEhSRUUuTGluZWFyTWlwTWFwTmVhcmVzdEZpbHRlcj0xMDA3O1RIUkVFLkxpbmVhck1pcE1hcExpbmVhckZpbHRlcj0xMDA4O1RIUkVFLlVuc2lnbmVkQnl0ZVR5cGU9MTAwOTtUSFJFRS5CeXRlVHlwZT0xMDEwO1RIUkVFLlNob3J0VHlwZT0xMDExO1RIUkVFLlVuc2lnbmVkU2hvcnRUeXBlPTEwMTI7VEhSRUUuSW50VHlwZT0xMDEzO1RIUkVFLlVuc2lnbmVkSW50VHlwZT0xMDE0O1RIUkVFLkZsb2F0VHlwZT0xMDE1O1RIUkVFLlVuc2lnbmVkU2hvcnQ0NDQ0VHlwZT0xMDE2O1RIUkVFLlVuc2lnbmVkU2hvcnQ1NTUxVHlwZT0xMDE3O1RIUkVFLlVuc2lnbmVkU2hvcnQ1NjVUeXBlPTEwMTg7VEhSRUUuQWxwaGFGb3JtYXQ9MTAxOTtUSFJFRS5SR0JGb3JtYXQ9MTAyMDtUSFJFRS5SR0JBRm9ybWF0PTEwMjE7VEhSRUUuTHVtaW5hbmNlRm9ybWF0PTEwMjI7VEhSRUUuTHVtaW5hbmNlQWxwaGFGb3JtYXQ9MTAyMztcblRIUkVFLlJHQl9TM1RDX0RYVDFfRm9ybWF0PTIwMDE7VEhSRUUuUkdCQV9TM1RDX0RYVDFfRm9ybWF0PTIwMDI7VEhSRUUuUkdCQV9TM1RDX0RYVDNfRm9ybWF0PTIwMDM7VEhSRUUuUkdCQV9TM1RDX0RYVDVfRm9ybWF0PTIwMDQ7VEhSRUUuQ29sb3I9ZnVuY3Rpb24oYSl7dm9pZCAwIT09YSYmdGhpcy5zZXQoYSk7cmV0dXJuIHRoaXN9O1xuVEhSRUUuQ29sb3IucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5Db2xvcixyOjEsZzoxLGI6MSxzZXQ6ZnVuY3Rpb24oYSl7YSBpbnN0YW5jZW9mIFRIUkVFLkNvbG9yP3RoaXMuY29weShhKTpcIm51bWJlclwiPT09dHlwZW9mIGE/dGhpcy5zZXRIZXgoYSk6XCJzdHJpbmdcIj09PXR5cGVvZiBhJiZ0aGlzLnNldFN0eWxlKGEpO3JldHVybiB0aGlzfSxzZXRIZXg6ZnVuY3Rpb24oYSl7YT1NYXRoLmZsb29yKGEpO3RoaXMucj0oYT4+MTYmMjU1KS8yNTU7dGhpcy5nPShhPj44JjI1NSkvMjU1O3RoaXMuYj0oYSYyNTUpLzI1NTtyZXR1cm4gdGhpc30sc2V0UkdCOmZ1bmN0aW9uKGEsYixjKXt0aGlzLnI9YTt0aGlzLmc9Yjt0aGlzLmI9YztyZXR1cm4gdGhpc30sc2V0SFNMOmZ1bmN0aW9uKGEsYixjKXtpZigwPT09Yil0aGlzLnI9dGhpcy5nPXRoaXMuYj1jO2Vsc2V7dmFyIGQ9ZnVuY3Rpb24oYSxiLGMpezA+YyYmKGMrPTEpOzE8YyYmKGMtPTEpO3JldHVybiBjPDEvNj9hKzYqKGItYSkqXG5jOjAuNT5jP2I6YzwyLzM/YSs2KihiLWEpKigyLzMtYyk6YX0sYj0wLjU+PWM/YyooMStiKTpjK2ItYypiLGM9MipjLWI7dGhpcy5yPWQoYyxiLGErMS8zKTt0aGlzLmc9ZChjLGIsYSk7dGhpcy5iPWQoYyxiLGEtMS8zKX1yZXR1cm4gdGhpc30sc2V0U3R5bGU6ZnVuY3Rpb24oYSl7aWYoL15yZ2JcXCgoXFxkKyksID8oXFxkKyksID8oXFxkKylcXCkkL2kudGVzdChhKSlyZXR1cm4gYT0vXnJnYlxcKChcXGQrKSwgPyhcXGQrKSwgPyhcXGQrKVxcKSQvaS5leGVjKGEpLHRoaXMucj1NYXRoLm1pbigyNTUscGFyc2VJbnQoYVsxXSwxMCkpLzI1NSx0aGlzLmc9TWF0aC5taW4oMjU1LHBhcnNlSW50KGFbMl0sMTApKS8yNTUsdGhpcy5iPU1hdGgubWluKDI1NSxwYXJzZUludChhWzNdLDEwKSkvMjU1LHRoaXM7aWYoL15yZ2JcXCgoXFxkKylcXCUsID8oXFxkKylcXCUsID8oXFxkKylcXCVcXCkkL2kudGVzdChhKSlyZXR1cm4gYT0vXnJnYlxcKChcXGQrKVxcJSwgPyhcXGQrKVxcJSwgPyhcXGQrKVxcJVxcKSQvaS5leGVjKGEpLHRoaXMucj1cbk1hdGgubWluKDEwMCxwYXJzZUludChhWzFdLDEwKSkvMTAwLHRoaXMuZz1NYXRoLm1pbigxMDAscGFyc2VJbnQoYVsyXSwxMCkpLzEwMCx0aGlzLmI9TWF0aC5taW4oMTAwLHBhcnNlSW50KGFbM10sMTApKS8xMDAsdGhpcztpZigvXlxcIyhbMC05YS1mXXs2fSkkL2kudGVzdChhKSlyZXR1cm4gYT0vXlxcIyhbMC05YS1mXXs2fSkkL2kuZXhlYyhhKSx0aGlzLnNldEhleChwYXJzZUludChhWzFdLDE2KSksdGhpcztpZigvXlxcIyhbMC05YS1mXSkoWzAtOWEtZl0pKFswLTlhLWZdKSQvaS50ZXN0KGEpKXJldHVybiBhPS9eXFwjKFswLTlhLWZdKShbMC05YS1mXSkoWzAtOWEtZl0pJC9pLmV4ZWMoYSksdGhpcy5zZXRIZXgocGFyc2VJbnQoYVsxXSthWzFdK2FbMl0rYVsyXSthWzNdK2FbM10sMTYpKSx0aGlzO2lmKC9eKFxcdyspJC9pLnRlc3QoYSkpcmV0dXJuIHRoaXMuc2V0SGV4KFRIUkVFLkNvbG9yS2V5d29yZHNbYV0pLHRoaXN9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5yPWEucjt0aGlzLmc9XG5hLmc7dGhpcy5iPWEuYjtyZXR1cm4gdGhpc30sY29weUdhbW1hVG9MaW5lYXI6ZnVuY3Rpb24oYSl7dGhpcy5yPWEuciphLnI7dGhpcy5nPWEuZyphLmc7dGhpcy5iPWEuYiphLmI7cmV0dXJuIHRoaXN9LGNvcHlMaW5lYXJUb0dhbW1hOmZ1bmN0aW9uKGEpe3RoaXMucj1NYXRoLnNxcnQoYS5yKTt0aGlzLmc9TWF0aC5zcXJ0KGEuZyk7dGhpcy5iPU1hdGguc3FydChhLmIpO3JldHVybiB0aGlzfSxjb252ZXJ0R2FtbWFUb0xpbmVhcjpmdW5jdGlvbigpe3ZhciBhPXRoaXMucixiPXRoaXMuZyxjPXRoaXMuYjt0aGlzLnI9YSphO3RoaXMuZz1iKmI7dGhpcy5iPWMqYztyZXR1cm4gdGhpc30sY29udmVydExpbmVhclRvR2FtbWE6ZnVuY3Rpb24oKXt0aGlzLnI9TWF0aC5zcXJ0KHRoaXMucik7dGhpcy5nPU1hdGguc3FydCh0aGlzLmcpO3RoaXMuYj1NYXRoLnNxcnQodGhpcy5iKTtyZXR1cm4gdGhpc30sZ2V0SGV4OmZ1bmN0aW9uKCl7cmV0dXJuIDI1NSp0aGlzLnI8PDE2XjI1NSp0aGlzLmc8PFxuOF4yNTUqdGhpcy5iPDwwfSxnZXRIZXhTdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4oXCIwMDAwMDBcIit0aGlzLmdldEhleCgpLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTYpfSxnZXRIU0w6ZnVuY3Rpb24oYSl7dmFyIGE9YXx8e2g6MCxzOjAsbDowfSxiPXRoaXMucixjPXRoaXMuZyxkPXRoaXMuYixlPU1hdGgubWF4KGIsYyxkKSxmPU1hdGgubWluKGIsYyxkKSxoLGc9KGYrZSkvMjtpZihmPT09ZSlmPWg9MDtlbHNle3ZhciBpPWUtZixmPTAuNT49Zz9pLyhlK2YpOmkvKDItZS1mKTtzd2l0Y2goZSl7Y2FzZSBiOmg9KGMtZCkvaSsoYzxkPzY6MCk7YnJlYWs7Y2FzZSBjOmg9KGQtYikvaSsyO2JyZWFrO2Nhc2UgZDpoPShiLWMpL2krNH1oLz02fWEuaD1oO2Eucz1mO2EubD1nO3JldHVybiBhfSxnZXRTdHlsZTpmdW5jdGlvbigpe3JldHVyblwicmdiKFwiKygyNTUqdGhpcy5yfDApK1wiLFwiKygyNTUqdGhpcy5nfDApK1wiLFwiKygyNTUqdGhpcy5ifDApK1wiKVwifSxvZmZzZXRIU0w6ZnVuY3Rpb24oYSxcbmIsYyl7dmFyIGQ9dGhpcy5nZXRIU0woKTtkLmgrPWE7ZC5zKz1iO2QubCs9Yzt0aGlzLnNldEhTTChkLmgsZC5zLGQubCk7cmV0dXJuIHRoaXN9LGFkZDpmdW5jdGlvbihhKXt0aGlzLnIrPWEucjt0aGlzLmcrPWEuZzt0aGlzLmIrPWEuYjtyZXR1cm4gdGhpc30sYWRkQ29sb3JzOmZ1bmN0aW9uKGEsYil7dGhpcy5yPWEucitiLnI7dGhpcy5nPWEuZytiLmc7dGhpcy5iPWEuYitiLmI7cmV0dXJuIHRoaXN9LGFkZFNjYWxhcjpmdW5jdGlvbihhKXt0aGlzLnIrPWE7dGhpcy5nKz1hO3RoaXMuYis9YTtyZXR1cm4gdGhpc30sbXVsdGlwbHk6ZnVuY3Rpb24oYSl7dGhpcy5yKj1hLnI7dGhpcy5nKj1hLmc7dGhpcy5iKj1hLmI7cmV0dXJuIHRoaXN9LG11bHRpcGx5U2NhbGFyOmZ1bmN0aW9uKGEpe3RoaXMucio9YTt0aGlzLmcqPWE7dGhpcy5iKj1hO3JldHVybiB0aGlzfSxsZXJwOmZ1bmN0aW9uKGEsYil7dGhpcy5yKz0oYS5yLXRoaXMucikqYjt0aGlzLmcrPShhLmctdGhpcy5nKSpiO1xudGhpcy5iKz0oYS5iLXRoaXMuYikqYjtyZXR1cm4gdGhpc30sZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiBhLnI9PT10aGlzLnImJmEuZz09PXRoaXMuZyYmYS5iPT09dGhpcy5ifSxmcm9tQXJyYXk6ZnVuY3Rpb24oYSl7dGhpcy5yPWFbMF07dGhpcy5nPWFbMV07dGhpcy5iPWFbMl07cmV0dXJuIHRoaXN9LHRvQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm5bdGhpcy5yLHRoaXMuZyx0aGlzLmJdfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgVEhSRUUuQ29sb3IpLnNldFJHQih0aGlzLnIsdGhpcy5nLHRoaXMuYil9fTtcblRIUkVFLkNvbG9yS2V5d29yZHM9e2FsaWNlYmx1ZToxNTc5MjM4MyxhbnRpcXVld2hpdGU6MTY0NDQzNzUsYXF1YTo2NTUzNSxhcXVhbWFyaW5lOjgzODg1NjQsYXp1cmU6MTU3OTQxNzUsYmVpZ2U6MTYxMTkyNjAsYmlzcXVlOjE2NzcwMjQ0LGJsYWNrOjAsYmxhbmNoZWRhbG1vbmQ6MTY3NzIwNDUsYmx1ZToyNTUsYmx1ZXZpb2xldDo5MDU1MjAyLGJyb3duOjEwODI0MjM0LGJ1cmx5d29vZDoxNDU5NjIzMSxjYWRldGJsdWU6NjI2NjUyOCxjaGFydHJldXNlOjgzODgzNTIsY2hvY29sYXRlOjEzNzg5NDcwLGNvcmFsOjE2NzQ0MjcyLGNvcm5mbG93ZXJibHVlOjY1OTE5ODEsY29ybnNpbGs6MTY3NzUzODgsY3JpbXNvbjoxNDQyMzEwMCxjeWFuOjY1NTM1LGRhcmtibHVlOjEzOSxkYXJrY3lhbjozNTcyMyxkYXJrZ29sZGVucm9kOjEyMDkyOTM5LGRhcmtncmF5OjExMTE5MDE3LGRhcmtncmVlbjoyNTYwMCxkYXJrZ3JleToxMTExOTAxNyxkYXJra2hha2k6MTI0MzMyNTksZGFya21hZ2VudGE6OTEwOTY0MyxcbmRhcmtvbGl2ZWdyZWVuOjU1OTc5OTksZGFya29yYW5nZToxNjc0NzUyMCxkYXJrb3JjaGlkOjEwMDQwMDEyLGRhcmtyZWQ6OTEwOTUwNCxkYXJrc2FsbW9uOjE1MzA4NDEwLGRhcmtzZWFncmVlbjo5NDE5OTE5LGRhcmtzbGF0ZWJsdWU6NDczNDM0NyxkYXJrc2xhdGVncmF5OjMxMDA0OTUsZGFya3NsYXRlZ3JleTozMTAwNDk1LGRhcmt0dXJxdW9pc2U6NTI5NDUsZGFya3Zpb2xldDo5Njk5NTM5LGRlZXBwaW5rOjE2NzE2OTQ3LGRlZXBza3libHVlOjQ5MTUxLGRpbWdyYXk6NjkwODI2NSxkaW1ncmV5OjY5MDgyNjUsZG9kZ2VyYmx1ZToyMDAzMTk5LGZpcmVicmljazoxMTY3NDE0NixmbG9yYWx3aGl0ZToxNjc3NTkyMCxmb3Jlc3RncmVlbjoyMjYzODQyLGZ1Y2hzaWE6MTY3MTE5MzUsZ2FpbnNib3JvOjE0NDc0NDYwLGdob3N0d2hpdGU6MTYzMTY2NzEsZ29sZDoxNjc2NjcyMCxnb2xkZW5yb2Q6MTQzMjkxMjAsZ3JheTo4NDIxNTA0LGdyZWVuOjMyNzY4LGdyZWVueWVsbG93OjExNDAzMDU1LFxuZ3JleTo4NDIxNTA0LGhvbmV5ZGV3OjE1Nzk0MTYwLGhvdHBpbms6MTY3Mzg3NDAsaW5kaWFucmVkOjEzNDU4NTI0LGluZGlnbzo0OTE1MzMwLGl2b3J5OjE2Nzc3MjAwLGtoYWtpOjE1Nzg3NjYwLGxhdmVuZGVyOjE1MTMyNDEwLGxhdmVuZGVyYmx1c2g6MTY3NzMzNjUsbGF3bmdyZWVuOjgxOTA5NzYsbGVtb25jaGlmZm9uOjE2Nzc1ODg1LGxpZ2h0Ymx1ZToxMTM5MzI1NCxsaWdodGNvcmFsOjE1NzYxNTM2LGxpZ2h0Y3lhbjoxNDc0NTU5OSxsaWdodGdvbGRlbnJvZHllbGxvdzoxNjQ0ODIxMCxsaWdodGdyYXk6MTM4ODIzMjMsbGlnaHRncmVlbjo5NDk4MjU2LGxpZ2h0Z3JleToxMzg4MjMyMyxsaWdodHBpbms6MTY3NTg0NjUsbGlnaHRzYWxtb246MTY3NTI3NjIsbGlnaHRzZWFncmVlbjoyMTQyODkwLGxpZ2h0c2t5Ymx1ZTo4OTAwMzQ2LGxpZ2h0c2xhdGVncmF5Ojc4MzM3NTMsbGlnaHRzbGF0ZWdyZXk6NzgzMzc1MyxsaWdodHN0ZWVsYmx1ZToxMTU4NDczNCxsaWdodHllbGxvdzoxNjc3NzE4NCxcbmxpbWU6NjUyODAsbGltZWdyZWVuOjMzMjkzMzAsbGluZW46MTY0NDU2NzAsbWFnZW50YToxNjcxMTkzNSxtYXJvb246ODM4ODYwOCxtZWRpdW1hcXVhbWFyaW5lOjY3MzczMjIsbWVkaXVtYmx1ZToyMDUsbWVkaXVtb3JjaGlkOjEyMjExNjY3LG1lZGl1bXB1cnBsZTo5NjYyNjgzLG1lZGl1bXNlYWdyZWVuOjM5NzgwOTcsbWVkaXVtc2xhdGVibHVlOjgwODc3OTAsbWVkaXVtc3ByaW5nZ3JlZW46NjQxNTQsbWVkaXVtdHVycXVvaXNlOjQ3NzIzMDAsbWVkaXVtdmlvbGV0cmVkOjEzMDQ3MTczLG1pZG5pZ2h0Ymx1ZToxNjQ0OTEyLG1pbnRjcmVhbToxNjEyMTg1MCxtaXN0eXJvc2U6MTY3NzAyNzMsbW9jY2FzaW46MTY3NzAyMjksbmF2YWpvd2hpdGU6MTY3Njg2ODUsbmF2eToxMjgsb2xkbGFjZToxNjY0MzU1OCxvbGl2ZTo4NDIxMzc2LG9saXZlZHJhYjo3MDQ4NzM5LG9yYW5nZToxNjc1MzkyMCxvcmFuZ2VyZWQ6MTY3MjkzNDQsb3JjaGlkOjE0MzE1NzM0LHBhbGVnb2xkZW5yb2Q6MTU2NTcxMzAsXG5wYWxlZ3JlZW46MTAwMjU4ODAscGFsZXR1cnF1b2lzZToxMTUyOTk2NixwYWxldmlvbGV0cmVkOjE0MzgxMjAzLHBhcGF5YXdoaXA6MTY3NzMwNzcscGVhY2hwdWZmOjE2NzY3NjczLHBlcnU6MTM0Njg5OTEscGluazoxNjc2MTAzNSxwbHVtOjE0NTI0NjM3LHBvd2RlcmJsdWU6MTE1OTE5MTAscHVycGxlOjgzODg3MzYscmVkOjE2NzExNjgwLHJvc3licm93bjoxMjM1NzUxOSxyb3lhbGJsdWU6NDI4Njk0NSxzYWRkbGVicm93bjo5MTI3MTg3LHNhbG1vbjoxNjQxNjg4MixzYW5keWJyb3duOjE2MDMyODY0LHNlYWdyZWVuOjMwNTAzMjcsc2Vhc2hlbGw6MTY3NzQ2Mzgsc2llbm5hOjEwNTA2Nzk3LHNpbHZlcjoxMjYzMjI1Nixza3libHVlOjg5MDAzMzEsc2xhdGVibHVlOjY5NzAwNjEsc2xhdGVncmF5OjczNzI5NDQsc2xhdGVncmV5OjczNzI5NDQsc25vdzoxNjc3NTkzMCxzcHJpbmdncmVlbjo2NTQwNyxzdGVlbGJsdWU6NDYyMDk4MCx0YW46MTM4MDg3ODAsdGVhbDozMjg5Nix0aGlzdGxlOjE0MjA0ODg4LFxudG9tYXRvOjE2NzM3MDk1LHR1cnF1b2lzZTo0MjUxODU2LHZpb2xldDoxNTYzMTA4Nix3aGVhdDoxNjExMzMzMSx3aGl0ZToxNjc3NzIxNSx3aGl0ZXNtb2tlOjE2MTE5Mjg1LHllbGxvdzoxNjc3Njk2MCx5ZWxsb3dncmVlbjoxMDE0NTA3NH07VEhSRUUuUXVhdGVybmlvbj1mdW5jdGlvbihhLGIsYyxkKXt0aGlzLl94PWF8fDA7dGhpcy5feT1ifHwwO3RoaXMuX3o9Y3x8MDt0aGlzLl93PXZvaWQgMCE9PWQ/ZDoxfTtcblRIUkVFLlF1YXRlcm5pb24ucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5RdWF0ZXJuaW9uLF94OjAsX3k6MCxfejowLF93OjAsX2V1bGVyOnZvaWQgMCxfdXBkYXRlRXVsZXI6ZnVuY3Rpb24oKXt2b2lkIDAhPT10aGlzLl9ldWxlciYmdGhpcy5fZXVsZXIuc2V0RnJvbVF1YXRlcm5pb24odGhpcyx2b2lkIDAsITEpfSxnZXQgeCgpe3JldHVybiB0aGlzLl94fSxzZXQgeChhKXt0aGlzLl94PWE7dGhpcy5fdXBkYXRlRXVsZXIoKX0sZ2V0IHkoKXtyZXR1cm4gdGhpcy5feX0sc2V0IHkoYSl7dGhpcy5feT1hO3RoaXMuX3VwZGF0ZUV1bGVyKCl9LGdldCB6KCl7cmV0dXJuIHRoaXMuX3p9LHNldCB6KGEpe3RoaXMuX3o9YTt0aGlzLl91cGRhdGVFdWxlcigpfSxnZXQgdygpe3JldHVybiB0aGlzLl93fSxzZXQgdyhhKXt0aGlzLl93PWE7dGhpcy5fdXBkYXRlRXVsZXIoKX0sc2V0OmZ1bmN0aW9uKGEsYixjLGQpe3RoaXMuX3g9YTt0aGlzLl95PWI7dGhpcy5fej1jO3RoaXMuX3c9ZDtcbnRoaXMuX3VwZGF0ZUV1bGVyKCk7cmV0dXJuIHRoaXN9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5feD1hLl94O3RoaXMuX3k9YS5feTt0aGlzLl96PWEuX3o7dGhpcy5fdz1hLl93O3RoaXMuX3VwZGF0ZUV1bGVyKCk7cmV0dXJuIHRoaXN9LHNldEZyb21FdWxlcjpmdW5jdGlvbihhLGIpe2lmKCExPT09YSBpbnN0YW5jZW9mIFRIUkVFLkV1bGVyKXRocm93IEVycm9yKFwiRVJST1I6IFF1YXRlcm5pb24ncyAuc2V0RnJvbUV1bGVyKCkgbm93IGV4cGVjdHMgYSBFdWxlciByb3RhdGlvbiByYXRoZXIgdGhhbiBhIFZlY3RvcjMgYW5kIG9yZGVyLiAgUGxlYXNlIHVwZGF0ZSB5b3VyIGNvZGUuXCIpO3ZhciBjPU1hdGguY29zKGEuX3gvMiksZD1NYXRoLmNvcyhhLl95LzIpLGU9TWF0aC5jb3MoYS5fei8yKSxmPU1hdGguc2luKGEuX3gvMiksaD1NYXRoLnNpbihhLl95LzIpLGc9TWF0aC5zaW4oYS5fei8yKTtcIlhZWlwiPT09YS5vcmRlcj8odGhpcy5feD1mKmQqZStjKmgqZyx0aGlzLl95PWMqaCpcbmUtZipkKmcsdGhpcy5fej1jKmQqZytmKmgqZSx0aGlzLl93PWMqZCplLWYqaCpnKTpcIllYWlwiPT09YS5vcmRlcj8odGhpcy5feD1mKmQqZStjKmgqZyx0aGlzLl95PWMqaCplLWYqZCpnLHRoaXMuX3o9YypkKmctZipoKmUsdGhpcy5fdz1jKmQqZStmKmgqZyk6XCJaWFlcIj09PWEub3JkZXI/KHRoaXMuX3g9ZipkKmUtYypoKmcsdGhpcy5feT1jKmgqZStmKmQqZyx0aGlzLl96PWMqZCpnK2YqaCplLHRoaXMuX3c9YypkKmUtZipoKmcpOlwiWllYXCI9PT1hLm9yZGVyPyh0aGlzLl94PWYqZCplLWMqaCpnLHRoaXMuX3k9YypoKmUrZipkKmcsdGhpcy5fej1jKmQqZy1mKmgqZSx0aGlzLl93PWMqZCplK2YqaCpnKTpcIllaWFwiPT09YS5vcmRlcj8odGhpcy5feD1mKmQqZStjKmgqZyx0aGlzLl95PWMqaCplK2YqZCpnLHRoaXMuX3o9YypkKmctZipoKmUsdGhpcy5fdz1jKmQqZS1mKmgqZyk6XCJYWllcIj09PWEub3JkZXImJih0aGlzLl94PWYqZCplLWMqaCpnLHRoaXMuX3k9YypoKmUtZipkKmcsdGhpcy5fej1cbmMqZCpnK2YqaCplLHRoaXMuX3c9YypkKmUrZipoKmcpOyExIT09YiYmdGhpcy5fdXBkYXRlRXVsZXIoKTtyZXR1cm4gdGhpc30sc2V0RnJvbUF4aXNBbmdsZTpmdW5jdGlvbihhLGIpe3ZhciBjPWIvMixkPU1hdGguc2luKGMpO3RoaXMuX3g9YS54KmQ7dGhpcy5feT1hLnkqZDt0aGlzLl96PWEueipkO3RoaXMuX3c9TWF0aC5jb3MoYyk7dGhpcy5fdXBkYXRlRXVsZXIoKTtyZXR1cm4gdGhpc30sc2V0RnJvbVJvdGF0aW9uTWF0cml4OmZ1bmN0aW9uKGEpe3ZhciBiPWEuZWxlbWVudHMsYz1iWzBdLGE9Yls0XSxkPWJbOF0sZT1iWzFdLGY9Yls1XSxoPWJbOV0sZz1iWzJdLGk9Yls2XSxiPWJbMTBdLGs9YytmK2I7MDxrPyhjPTAuNS9NYXRoLnNxcnQoaysxKSx0aGlzLl93PTAuMjUvYyx0aGlzLl94PShpLWgpKmMsdGhpcy5feT0oZC1nKSpjLHRoaXMuX3o9KGUtYSkqYyk6Yz5mJiZjPmI/KGM9MipNYXRoLnNxcnQoMStjLWYtYiksdGhpcy5fdz0oaS1oKS9jLHRoaXMuX3g9MC4yNSpjLFxudGhpcy5feT0oYStlKS9jLHRoaXMuX3o9KGQrZykvYyk6Zj5iPyhjPTIqTWF0aC5zcXJ0KDErZi1jLWIpLHRoaXMuX3c9KGQtZykvYyx0aGlzLl94PShhK2UpL2MsdGhpcy5feT0wLjI1KmMsdGhpcy5fej0oaCtpKS9jKTooYz0yKk1hdGguc3FydCgxK2ItYy1mKSx0aGlzLl93PShlLWEpL2MsdGhpcy5feD0oZCtnKS9jLHRoaXMuX3k9KGgraSkvYyx0aGlzLl96PTAuMjUqYyk7dGhpcy5fdXBkYXRlRXVsZXIoKTtyZXR1cm4gdGhpc30saW52ZXJzZTpmdW5jdGlvbigpe3RoaXMuY29uanVnYXRlKCkubm9ybWFsaXplKCk7cmV0dXJuIHRoaXN9LGNvbmp1Z2F0ZTpmdW5jdGlvbigpe3RoaXMuX3gqPS0xO3RoaXMuX3kqPS0xO3RoaXMuX3oqPS0xO3RoaXMuX3VwZGF0ZUV1bGVyKCk7cmV0dXJuIHRoaXN9LGxlbmd0aFNxOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3gqdGhpcy5feCt0aGlzLl95KnRoaXMuX3krdGhpcy5feip0aGlzLl96K3RoaXMuX3cqdGhpcy5fd30sbGVuZ3RoOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguc3FydCh0aGlzLl94KlxudGhpcy5feCt0aGlzLl95KnRoaXMuX3krdGhpcy5feip0aGlzLl96K3RoaXMuX3cqdGhpcy5fdyl9LG5vcm1hbGl6ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMubGVuZ3RoKCk7MD09PWE/KHRoaXMuX3o9dGhpcy5feT10aGlzLl94PTAsdGhpcy5fdz0xKTooYT0xL2EsdGhpcy5feCo9YSx0aGlzLl95Kj1hLHRoaXMuX3oqPWEsdGhpcy5fdyo9YSk7cmV0dXJuIHRoaXN9LG11bHRpcGx5OmZ1bmN0aW9uKGEsYil7cmV0dXJuIHZvaWQgMCE9PWI/KGNvbnNvbGUud2FybihcIkRFUFJFQ0FURUQ6IFF1YXRlcm5pb24ncyAubXVsdGlwbHkoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5tdWx0aXBseVF1YXRlcm5pb25zKCBhLCBiICkgaW5zdGVhZC5cIiksdGhpcy5tdWx0aXBseVF1YXRlcm5pb25zKGEsYikpOnRoaXMubXVsdGlwbHlRdWF0ZXJuaW9ucyh0aGlzLGEpfSxtdWx0aXBseVF1YXRlcm5pb25zOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5feCxkPWEuX3ksZT1hLl96LGY9XG5hLl93LGg9Yi5feCxnPWIuX3ksaT1iLl96LGs9Yi5fdzt0aGlzLl94PWMqaytmKmgrZCppLWUqZzt0aGlzLl95PWQqaytmKmcrZSpoLWMqaTt0aGlzLl96PWUqaytmKmkrYypnLWQqaDt0aGlzLl93PWYqay1jKmgtZCpnLWUqaTt0aGlzLl91cGRhdGVFdWxlcigpO3JldHVybiB0aGlzfSxtdWx0aXBseVZlY3RvcjM6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiREVQUkVDQVRFRDogUXVhdGVybmlvbidzIC5tdWx0aXBseVZlY3RvcjMoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgaXMgbm93IHZlY3Rvci5hcHBseVF1YXRlcm5pb24oIHF1YXRlcm5pb24gKSBpbnN0ZWFkLlwiKTtyZXR1cm4gYS5hcHBseVF1YXRlcm5pb24odGhpcyl9LHNsZXJwOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5feCxkPXRoaXMuX3ksZT10aGlzLl96LGY9dGhpcy5fdyxoPWYqYS5fdytjKmEuX3grZCphLl95K2UqYS5fejswPmg/KHRoaXMuX3c9LWEuX3csdGhpcy5feD0tYS5feCx0aGlzLl95PS1hLl95LHRoaXMuX3o9XG4tYS5feixoPS1oKTp0aGlzLmNvcHkoYSk7aWYoMTw9aClyZXR1cm4gdGhpcy5fdz1mLHRoaXMuX3g9Yyx0aGlzLl95PWQsdGhpcy5fej1lLHRoaXM7dmFyIGc9TWF0aC5hY29zKGgpLGk9TWF0aC5zcXJ0KDEtaCpoKTtpZigwLjAwMT5NYXRoLmFicyhpKSlyZXR1cm4gdGhpcy5fdz0wLjUqKGYrdGhpcy5fdyksdGhpcy5feD0wLjUqKGMrdGhpcy5feCksdGhpcy5feT0wLjUqKGQrdGhpcy5feSksdGhpcy5fej0wLjUqKGUrdGhpcy5feiksdGhpcztoPU1hdGguc2luKCgxLWIpKmcpL2k7Zz1NYXRoLnNpbihiKmcpL2k7dGhpcy5fdz1mKmgrdGhpcy5fdypnO3RoaXMuX3g9YypoK3RoaXMuX3gqZzt0aGlzLl95PWQqaCt0aGlzLl95Kmc7dGhpcy5fej1lKmgrdGhpcy5feipnO3RoaXMuX3VwZGF0ZUV1bGVyKCk7cmV0dXJuIHRoaXN9LGVxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gYS5feD09PXRoaXMuX3gmJmEuX3k9PT10aGlzLl95JiZhLl96PT09dGhpcy5feiYmYS5fdz09PXRoaXMuX3d9LFxuZnJvbUFycmF5OmZ1bmN0aW9uKGEpe3RoaXMuX3g9YVswXTt0aGlzLl95PWFbMV07dGhpcy5fej1hWzJdO3RoaXMuX3c9YVszXTt0aGlzLl91cGRhdGVFdWxlcigpO3JldHVybiB0aGlzfSx0b0FycmF5OmZ1bmN0aW9uKCl7cmV0dXJuW3RoaXMuX3gsdGhpcy5feSx0aGlzLl96LHRoaXMuX3ddfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgVEhSRUUuUXVhdGVybmlvbih0aGlzLl94LHRoaXMuX3ksdGhpcy5feix0aGlzLl93KX19O1RIUkVFLlF1YXRlcm5pb24uc2xlcnA9ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIGMuY29weShhKS5zbGVycChiLGQpfTtUSFJFRS5WZWN0b3IyPWZ1bmN0aW9uKGEsYil7dGhpcy54PWF8fDA7dGhpcy55PWJ8fDB9O1xuVEhSRUUuVmVjdG9yMi5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLlZlY3RvcjIsc2V0OmZ1bmN0aW9uKGEsYil7dGhpcy54PWE7dGhpcy55PWI7cmV0dXJuIHRoaXN9LHNldFg6ZnVuY3Rpb24oYSl7dGhpcy54PWE7cmV0dXJuIHRoaXN9LHNldFk6ZnVuY3Rpb24oYSl7dGhpcy55PWE7cmV0dXJuIHRoaXN9LHNldENvbXBvbmVudDpmdW5jdGlvbihhLGIpe3N3aXRjaChhKXtjYXNlIDA6dGhpcy54PWI7YnJlYWs7Y2FzZSAxOnRoaXMueT1iO2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJpbmRleCBpcyBvdXQgb2YgcmFuZ2U6IFwiK2EpO319LGdldENvbXBvbmVudDpmdW5jdGlvbihhKXtzd2l0Y2goYSl7Y2FzZSAwOnJldHVybiB0aGlzLng7Y2FzZSAxOnJldHVybiB0aGlzLnk7ZGVmYXVsdDp0aHJvdyBFcnJvcihcImluZGV4IGlzIG91dCBvZiByYW5nZTogXCIrYSk7fX0sY29weTpmdW5jdGlvbihhKXt0aGlzLng9YS54O3RoaXMueT1hLnk7cmV0dXJuIHRoaXN9LGFkZDpmdW5jdGlvbihhLFxuYil7aWYodm9pZCAwIT09YilyZXR1cm4gY29uc29sZS53YXJuKFwiREVQUkVDQVRFRDogVmVjdG9yMidzIC5hZGQoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5hZGRWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC5cIiksdGhpcy5hZGRWZWN0b3JzKGEsYik7dGhpcy54Kz1hLng7dGhpcy55Kz1hLnk7cmV0dXJuIHRoaXN9LGFkZFZlY3RvcnM6ZnVuY3Rpb24oYSxiKXt0aGlzLng9YS54K2IueDt0aGlzLnk9YS55K2IueTtyZXR1cm4gdGhpc30sYWRkU2NhbGFyOmZ1bmN0aW9uKGEpe3RoaXMueCs9YTt0aGlzLnkrPWE7cmV0dXJuIHRoaXN9LHN1YjpmdW5jdGlvbihhLGIpe2lmKHZvaWQgMCE9PWIpcmV0dXJuIGNvbnNvbGUud2FybihcIkRFUFJFQ0FURUQ6IFZlY3RvcjIncyAuc3ViKCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAuc3ViVmVjdG9ycyggYSwgYiApIGluc3RlYWQuXCIpLHRoaXMuc3ViVmVjdG9ycyhhLGIpO3RoaXMueC09YS54O3RoaXMueS09XG5hLnk7cmV0dXJuIHRoaXN9LHN1YlZlY3RvcnM6ZnVuY3Rpb24oYSxiKXt0aGlzLng9YS54LWIueDt0aGlzLnk9YS55LWIueTtyZXR1cm4gdGhpc30sbXVsdGlwbHlTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy54Kj1hO3RoaXMueSo9YTtyZXR1cm4gdGhpc30sZGl2aWRlU2NhbGFyOmZ1bmN0aW9uKGEpezAhPT1hPyhhPTEvYSx0aGlzLngqPWEsdGhpcy55Kj1hKTp0aGlzLnk9dGhpcy54PTA7cmV0dXJuIHRoaXN9LG1pbjpmdW5jdGlvbihhKXt0aGlzLng+YS54JiYodGhpcy54PWEueCk7dGhpcy55PmEueSYmKHRoaXMueT1hLnkpO3JldHVybiB0aGlzfSxtYXg6ZnVuY3Rpb24oYSl7dGhpcy54PGEueCYmKHRoaXMueD1hLngpO3RoaXMueTxhLnkmJih0aGlzLnk9YS55KTtyZXR1cm4gdGhpc30sY2xhbXA6ZnVuY3Rpb24oYSxiKXt0aGlzLng8YS54P3RoaXMueD1hLng6dGhpcy54PmIueCYmKHRoaXMueD1iLngpO3RoaXMueTxhLnk/dGhpcy55PWEueTp0aGlzLnk+Yi55JiYodGhpcy55PWIueSk7XG5yZXR1cm4gdGhpc30sbmVnYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubXVsdGlwbHlTY2FsYXIoLTEpfSxkb3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMueCphLngrdGhpcy55KmEueX0sbGVuZ3RoU3E6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54KnRoaXMueCt0aGlzLnkqdGhpcy55fSxsZW5ndGg6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMueCp0aGlzLngrdGhpcy55KnRoaXMueSl9LG5vcm1hbGl6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpdmlkZVNjYWxhcih0aGlzLmxlbmd0aCgpKX0sZGlzdGFuY2VUbzpmdW5jdGlvbihhKXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMuZGlzdGFuY2VUb1NxdWFyZWQoYSkpfSxkaXN0YW5jZVRvU3F1YXJlZDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLngtYS54LGE9dGhpcy55LWEueTtyZXR1cm4gYipiK2EqYX0sc2V0TGVuZ3RoOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMubGVuZ3RoKCk7MCE9PWImJmEhPT1iJiZ0aGlzLm11bHRpcGx5U2NhbGFyKGEvXG5iKTtyZXR1cm4gdGhpc30sbGVycDpmdW5jdGlvbihhLGIpe3RoaXMueCs9KGEueC10aGlzLngpKmI7dGhpcy55Kz0oYS55LXRoaXMueSkqYjtyZXR1cm4gdGhpc30sZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiBhLng9PT10aGlzLngmJmEueT09PXRoaXMueX0sZnJvbUFycmF5OmZ1bmN0aW9uKGEpe3RoaXMueD1hWzBdO3RoaXMueT1hWzFdO3JldHVybiB0aGlzfSx0b0FycmF5OmZ1bmN0aW9uKCl7cmV0dXJuW3RoaXMueCx0aGlzLnldfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgVEhSRUUuVmVjdG9yMih0aGlzLngsdGhpcy55KX19O1RIUkVFLlZlY3RvcjM9ZnVuY3Rpb24oYSxiLGMpe3RoaXMueD1hfHwwO3RoaXMueT1ifHwwO3RoaXMuej1jfHwwfTtcblRIUkVFLlZlY3RvcjMucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5WZWN0b3IzLHNldDpmdW5jdGlvbihhLGIsYyl7dGhpcy54PWE7dGhpcy55PWI7dGhpcy56PWM7cmV0dXJuIHRoaXN9LHNldFg6ZnVuY3Rpb24oYSl7dGhpcy54PWE7cmV0dXJuIHRoaXN9LHNldFk6ZnVuY3Rpb24oYSl7dGhpcy55PWE7cmV0dXJuIHRoaXN9LHNldFo6ZnVuY3Rpb24oYSl7dGhpcy56PWE7cmV0dXJuIHRoaXN9LHNldENvbXBvbmVudDpmdW5jdGlvbihhLGIpe3N3aXRjaChhKXtjYXNlIDA6dGhpcy54PWI7YnJlYWs7Y2FzZSAxOnRoaXMueT1iO2JyZWFrO2Nhc2UgMjp0aGlzLno9YjticmVhaztkZWZhdWx0OnRocm93IEVycm9yKFwiaW5kZXggaXMgb3V0IG9mIHJhbmdlOiBcIithKTt9fSxnZXRDb21wb25lbnQ6ZnVuY3Rpb24oYSl7c3dpdGNoKGEpe2Nhc2UgMDpyZXR1cm4gdGhpcy54O2Nhc2UgMTpyZXR1cm4gdGhpcy55O2Nhc2UgMjpyZXR1cm4gdGhpcy56O2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJpbmRleCBpcyBvdXQgb2YgcmFuZ2U6IFwiK1xuYSk7fX0sY29weTpmdW5jdGlvbihhKXt0aGlzLng9YS54O3RoaXMueT1hLnk7dGhpcy56PWEuejtyZXR1cm4gdGhpc30sYWRkOmZ1bmN0aW9uKGEsYil7aWYodm9pZCAwIT09YilyZXR1cm4gY29uc29sZS53YXJuKFwiREVQUkVDQVRFRDogVmVjdG9yMydzIC5hZGQoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5hZGRWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC5cIiksdGhpcy5hZGRWZWN0b3JzKGEsYik7dGhpcy54Kz1hLng7dGhpcy55Kz1hLnk7dGhpcy56Kz1hLno7cmV0dXJuIHRoaXN9LGFkZFNjYWxhcjpmdW5jdGlvbihhKXt0aGlzLngrPWE7dGhpcy55Kz1hO3RoaXMueis9YTtyZXR1cm4gdGhpc30sYWRkVmVjdG9yczpmdW5jdGlvbihhLGIpe3RoaXMueD1hLngrYi54O3RoaXMueT1hLnkrYi55O3RoaXMuej1hLnorYi56O3JldHVybiB0aGlzfSxzdWI6ZnVuY3Rpb24oYSxiKXtpZih2b2lkIDAhPT1iKXJldHVybiBjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEOiBWZWN0b3IzJ3MgLnN1YigpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLnN1YlZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSxcbnRoaXMuc3ViVmVjdG9ycyhhLGIpO3RoaXMueC09YS54O3RoaXMueS09YS55O3RoaXMuei09YS56O3JldHVybiB0aGlzfSxzdWJWZWN0b3JzOmZ1bmN0aW9uKGEsYil7dGhpcy54PWEueC1iLng7dGhpcy55PWEueS1iLnk7dGhpcy56PWEuei1iLno7cmV0dXJuIHRoaXN9LG11bHRpcGx5OmZ1bmN0aW9uKGEsYil7aWYodm9pZCAwIT09YilyZXR1cm4gY29uc29sZS53YXJuKFwiREVQUkVDQVRFRDogVmVjdG9yMydzIC5tdWx0aXBseSgpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLm11bHRpcGx5VmVjdG9ycyggYSwgYiApIGluc3RlYWQuXCIpLHRoaXMubXVsdGlwbHlWZWN0b3JzKGEsYik7dGhpcy54Kj1hLng7dGhpcy55Kj1hLnk7dGhpcy56Kj1hLno7cmV0dXJuIHRoaXN9LG11bHRpcGx5U2NhbGFyOmZ1bmN0aW9uKGEpe3RoaXMueCo9YTt0aGlzLnkqPWE7dGhpcy56Kj1hO3JldHVybiB0aGlzfSxtdWx0aXBseVZlY3RvcnM6ZnVuY3Rpb24oYSxiKXt0aGlzLng9YS54KlxuYi54O3RoaXMueT1hLnkqYi55O3RoaXMuej1hLnoqYi56O3JldHVybiB0aGlzfSxhcHBseU1hdHJpeDM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy54LGM9dGhpcy55LGQ9dGhpcy56LGE9YS5lbGVtZW50czt0aGlzLng9YVswXSpiK2FbM10qYythWzZdKmQ7dGhpcy55PWFbMV0qYithWzRdKmMrYVs3XSpkO3RoaXMuej1hWzJdKmIrYVs1XSpjK2FbOF0qZDtyZXR1cm4gdGhpc30sYXBwbHlNYXRyaXg0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMueCxjPXRoaXMueSxkPXRoaXMueixhPWEuZWxlbWVudHM7dGhpcy54PWFbMF0qYithWzRdKmMrYVs4XSpkK2FbMTJdO3RoaXMueT1hWzFdKmIrYVs1XSpjK2FbOV0qZCthWzEzXTt0aGlzLno9YVsyXSpiK2FbNl0qYythWzEwXSpkK2FbMTRdO3JldHVybiB0aGlzfSxhcHBseVByb2plY3Rpb246ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy54LGM9dGhpcy55LGQ9dGhpcy56LGE9YS5lbGVtZW50cyxlPTEvKGFbM10qYithWzddKmMrYVsxMV0qZCthWzE1XSk7XG50aGlzLng9KGFbMF0qYithWzRdKmMrYVs4XSpkK2FbMTJdKSplO3RoaXMueT0oYVsxXSpiK2FbNV0qYythWzldKmQrYVsxM10pKmU7dGhpcy56PShhWzJdKmIrYVs2XSpjK2FbMTBdKmQrYVsxNF0pKmU7cmV0dXJuIHRoaXN9LGFwcGx5UXVhdGVybmlvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLngsYz10aGlzLnksZD10aGlzLnosZT1hLngsZj1hLnksaD1hLnosYT1hLncsZz1hKmIrZipkLWgqYyxpPWEqYytoKmItZSpkLGs9YSpkK2UqYy1mKmIsYj0tZSpiLWYqYy1oKmQ7dGhpcy54PWcqYStiKi1lK2kqLWgtayotZjt0aGlzLnk9aSphK2IqLWYrayotZS1nKi1oO3RoaXMuej1rKmErYiotaCtnKi1mLWkqLWU7cmV0dXJuIHRoaXN9LHRyYW5zZm9ybURpcmVjdGlvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLngsYz10aGlzLnksZD10aGlzLnosYT1hLmVsZW1lbnRzO3RoaXMueD1hWzBdKmIrYVs0XSpjK2FbOF0qZDt0aGlzLnk9YVsxXSpiK2FbNV0qYythWzldKmQ7dGhpcy56PWFbMl0qXG5iK2FbNl0qYythWzEwXSpkO3RoaXMubm9ybWFsaXplKCk7cmV0dXJuIHRoaXN9LGRpdmlkZTpmdW5jdGlvbihhKXt0aGlzLngvPWEueDt0aGlzLnkvPWEueTt0aGlzLnovPWEuejtyZXR1cm4gdGhpc30sZGl2aWRlU2NhbGFyOmZ1bmN0aW9uKGEpezAhPT1hPyhhPTEvYSx0aGlzLngqPWEsdGhpcy55Kj1hLHRoaXMueio9YSk6dGhpcy56PXRoaXMueT10aGlzLng9MDtyZXR1cm4gdGhpc30sbWluOmZ1bmN0aW9uKGEpe3RoaXMueD5hLngmJih0aGlzLng9YS54KTt0aGlzLnk+YS55JiYodGhpcy55PWEueSk7dGhpcy56PmEueiYmKHRoaXMuej1hLnopO3JldHVybiB0aGlzfSxtYXg6ZnVuY3Rpb24oYSl7dGhpcy54PGEueCYmKHRoaXMueD1hLngpO3RoaXMueTxhLnkmJih0aGlzLnk9YS55KTt0aGlzLno8YS56JiYodGhpcy56PWEueik7cmV0dXJuIHRoaXN9LGNsYW1wOmZ1bmN0aW9uKGEsYil7dGhpcy54PGEueD90aGlzLng9YS54OnRoaXMueD5iLngmJih0aGlzLng9Yi54KTt0aGlzLnk8XG5hLnk/dGhpcy55PWEueTp0aGlzLnk+Yi55JiYodGhpcy55PWIueSk7dGhpcy56PGEuej90aGlzLno9YS56OnRoaXMuej5iLnomJih0aGlzLno9Yi56KTtyZXR1cm4gdGhpc30sbmVnYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubXVsdGlwbHlTY2FsYXIoLTEpfSxkb3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMueCphLngrdGhpcy55KmEueSt0aGlzLnoqYS56fSxsZW5ndGhTcTpmdW5jdGlvbigpe3JldHVybiB0aGlzLngqdGhpcy54K3RoaXMueSp0aGlzLnkrdGhpcy56KnRoaXMuen0sbGVuZ3RoOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguc3FydCh0aGlzLngqdGhpcy54K3RoaXMueSp0aGlzLnkrdGhpcy56KnRoaXMueil9LGxlbmd0aE1hbmhhdHRhbjpmdW5jdGlvbigpe3JldHVybiBNYXRoLmFicyh0aGlzLngpK01hdGguYWJzKHRoaXMueSkrTWF0aC5hYnModGhpcy56KX0sbm9ybWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGl2aWRlU2NhbGFyKHRoaXMubGVuZ3RoKCkpfSxcbnNldExlbmd0aDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmxlbmd0aCgpOzAhPT1iJiZhIT09YiYmdGhpcy5tdWx0aXBseVNjYWxhcihhL2IpO3JldHVybiB0aGlzfSxsZXJwOmZ1bmN0aW9uKGEsYil7dGhpcy54Kz0oYS54LXRoaXMueCkqYjt0aGlzLnkrPShhLnktdGhpcy55KSpiO3RoaXMueis9KGEuei10aGlzLnopKmI7cmV0dXJuIHRoaXN9LGNyb3NzOmZ1bmN0aW9uKGEsYil7aWYodm9pZCAwIT09YilyZXR1cm4gY29uc29sZS53YXJuKFwiREVQUkVDQVRFRDogVmVjdG9yMydzIC5jcm9zcygpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLmNyb3NzVmVjdG9ycyggYSwgYiApIGluc3RlYWQuXCIpLHRoaXMuY3Jvc3NWZWN0b3JzKGEsYik7dmFyIGM9dGhpcy54LGQ9dGhpcy55LGU9dGhpcy56O3RoaXMueD1kKmEuei1lKmEueTt0aGlzLnk9ZSphLngtYyphLno7dGhpcy56PWMqYS55LWQqYS54O3JldHVybiB0aGlzfSxjcm9zc1ZlY3RvcnM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1cbmEueCxkPWEueSxlPWEueixmPWIueCxoPWIueSxnPWIuejt0aGlzLng9ZCpnLWUqaDt0aGlzLnk9ZSpmLWMqZzt0aGlzLno9YypoLWQqZjtyZXR1cm4gdGhpc30sYW5nbGVUbzpmdW5jdGlvbihhKXthPXRoaXMuZG90KGEpLyh0aGlzLmxlbmd0aCgpKmEubGVuZ3RoKCkpO3JldHVybiBNYXRoLmFjb3MoVEhSRUUuTWF0aC5jbGFtcChhLC0xLDEpKX0sZGlzdGFuY2VUbzpmdW5jdGlvbihhKXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMuZGlzdGFuY2VUb1NxdWFyZWQoYSkpfSxkaXN0YW5jZVRvU3F1YXJlZDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLngtYS54LGM9dGhpcy55LWEueSxhPXRoaXMuei1hLno7cmV0dXJuIGIqYitjKmMrYSphfSxzZXRFdWxlckZyb21Sb3RhdGlvbk1hdHJpeDpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJSRU1PVkVEOiBWZWN0b3IzJ3Mgc2V0RXVsZXJGcm9tUm90YXRpb25NYXRyaXggaGFzIGJlZW4gcmVtb3ZlZCBpbiBmYXZvciBvZiBFdWxlci5zZXRGcm9tUm90YXRpb25NYXRyaXgoKSwgcGxlYXNlIHVwZGF0ZSB5b3VyIGNvZGUuXCIpfSxcbnNldEV1bGVyRnJvbVF1YXRlcm5pb246ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiUkVNT1ZFRDogVmVjdG9yMydzIHNldEV1bGVyRnJvbVF1YXRlcm5pb246IGhhcyBiZWVuIHJlbW92ZWQgaW4gZmF2b3Igb2YgRXVsZXIuc2V0RnJvbVF1YXRlcm5pb24oKSwgcGxlYXNlIHVwZGF0ZSB5b3VyIGNvZGUuXCIpfSxnZXRQb3NpdGlvbkZyb21NYXRyaXg6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiREVQUkVDQVRFRDogVmVjdG9yMydzIC5nZXRQb3NpdGlvbkZyb21NYXRyaXgoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5zZXRGcm9tTWF0cml4UG9zaXRpb24oKS4gUGxlYXNlIHVwZGF0ZSB5b3VyIGNvZGUuXCIpO3JldHVybiB0aGlzLnNldEZyb21NYXRyaXhQb3NpdGlvbihhKX0sZ2V0U2NhbGVGcm9tTWF0cml4OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIkRFUFJFQ0FURUQ6IFZlY3RvcjMncyAuZ2V0U2NhbGVGcm9tTWF0cml4KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuc2V0RnJvbU1hdHJpeFNjYWxlKCkuIFBsZWFzZSB1cGRhdGUgeW91ciBjb2RlLlwiKTtcbnJldHVybiB0aGlzLnNldEZyb21NYXRyaXhTY2FsZShhKX0sZ2V0Q29sdW1uRnJvbU1hdHJpeDpmdW5jdGlvbihhLGIpe2NvbnNvbGUud2FybihcIkRFUFJFQ0FURUQ6IFZlY3RvcjMncyAuZ2V0Q29sdW1uRnJvbU1hdHJpeCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLnNldEZyb21NYXRyaXhDb2x1bW4oKS4gUGxlYXNlIHVwZGF0ZSB5b3VyIGNvZGUuXCIpO3JldHVybiB0aGlzLnNldEZyb21NYXRyaXhDb2x1bW4oYSxiKX0sc2V0RnJvbU1hdHJpeFBvc2l0aW9uOmZ1bmN0aW9uKGEpe3RoaXMueD1hLmVsZW1lbnRzWzEyXTt0aGlzLnk9YS5lbGVtZW50c1sxM107dGhpcy56PWEuZWxlbWVudHNbMTRdO3JldHVybiB0aGlzfSxzZXRGcm9tTWF0cml4U2NhbGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5zZXQoYS5lbGVtZW50c1swXSxhLmVsZW1lbnRzWzFdLGEuZWxlbWVudHNbMl0pLmxlbmd0aCgpLGM9dGhpcy5zZXQoYS5lbGVtZW50c1s0XSxhLmVsZW1lbnRzWzVdLGEuZWxlbWVudHNbNl0pLmxlbmd0aCgpLFxuYT10aGlzLnNldChhLmVsZW1lbnRzWzhdLGEuZWxlbWVudHNbOV0sYS5lbGVtZW50c1sxMF0pLmxlbmd0aCgpO3RoaXMueD1iO3RoaXMueT1jO3RoaXMuej1hO3JldHVybiB0aGlzfSxzZXRGcm9tTWF0cml4Q29sdW1uOmZ1bmN0aW9uKGEsYil7dmFyIGM9NCphLGQ9Yi5lbGVtZW50czt0aGlzLng9ZFtjXTt0aGlzLnk9ZFtjKzFdO3RoaXMuej1kW2MrMl07cmV0dXJuIHRoaXN9LGVxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gYS54PT09dGhpcy54JiZhLnk9PT10aGlzLnkmJmEuej09PXRoaXMuen0sZnJvbUFycmF5OmZ1bmN0aW9uKGEpe3RoaXMueD1hWzBdO3RoaXMueT1hWzFdO3RoaXMuej1hWzJdO3JldHVybiB0aGlzfSx0b0FycmF5OmZ1bmN0aW9uKCl7cmV0dXJuW3RoaXMueCx0aGlzLnksdGhpcy56XX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFRIUkVFLlZlY3RvcjModGhpcy54LHRoaXMueSx0aGlzLnopfX07XG5USFJFRS5leHRlbmQoVEhSRUUuVmVjdG9yMy5wcm90b3R5cGUse2FwcGx5RXVsZXI6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuUXVhdGVybmlvbjtyZXR1cm4gZnVuY3Rpb24oYil7ITE9PT1iIGluc3RhbmNlb2YgVEhSRUUuRXVsZXImJmNvbnNvbGUuZXJyb3IoXCJFUlJPUjogVmVjdG9yMydzIC5hcHBseUV1bGVyKCkgbm93IGV4cGVjdHMgYSBFdWxlciByb3RhdGlvbiByYXRoZXIgdGhhbiBhIFZlY3RvcjMgYW5kIG9yZGVyLiAgUGxlYXNlIHVwZGF0ZSB5b3VyIGNvZGUuXCIpO3RoaXMuYXBwbHlRdWF0ZXJuaW9uKGEuc2V0RnJvbUV1bGVyKGIpKTtyZXR1cm4gdGhpc319KCksYXBwbHlBeGlzQW5nbGU6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuUXVhdGVybmlvbjtyZXR1cm4gZnVuY3Rpb24oYixjKXt0aGlzLmFwcGx5UXVhdGVybmlvbihhLnNldEZyb21BeGlzQW5nbGUoYixjKSk7cmV0dXJuIHRoaXN9fSgpLHByb2plY3RPblZlY3RvcjpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzO1xucmV0dXJuIGZ1bmN0aW9uKGIpe2EuY29weShiKS5ub3JtYWxpemUoKTtiPXRoaXMuZG90KGEpO3JldHVybiB0aGlzLmNvcHkoYSkubXVsdGlwbHlTY2FsYXIoYil9fSgpLHByb2plY3RPblBsYW5lOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGIpe2EuY29weSh0aGlzKS5wcm9qZWN0T25WZWN0b3IoYik7cmV0dXJuIHRoaXMuc3ViKGEpfX0oKSxyZWZsZWN0OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGIpe2EuY29weSh0aGlzKS5wcm9qZWN0T25WZWN0b3IoYikubXVsdGlwbHlTY2FsYXIoMik7cmV0dXJuIHRoaXMuc3ViVmVjdG9ycyhhLHRoaXMpfX0oKX0pO1RIUkVFLlZlY3RvcjQ9ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy54PWF8fDA7dGhpcy55PWJ8fDA7dGhpcy56PWN8fDA7dGhpcy53PXZvaWQgMCE9PWQ/ZDoxfTtcblRIUkVFLlZlY3RvcjQucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5WZWN0b3I0LHNldDpmdW5jdGlvbihhLGIsYyxkKXt0aGlzLng9YTt0aGlzLnk9Yjt0aGlzLno9Yzt0aGlzLnc9ZDtyZXR1cm4gdGhpc30sc2V0WDpmdW5jdGlvbihhKXt0aGlzLng9YTtyZXR1cm4gdGhpc30sc2V0WTpmdW5jdGlvbihhKXt0aGlzLnk9YTtyZXR1cm4gdGhpc30sc2V0WjpmdW5jdGlvbihhKXt0aGlzLno9YTtyZXR1cm4gdGhpc30sc2V0VzpmdW5jdGlvbihhKXt0aGlzLnc9YTtyZXR1cm4gdGhpc30sc2V0Q29tcG9uZW50OmZ1bmN0aW9uKGEsYil7c3dpdGNoKGEpe2Nhc2UgMDp0aGlzLng9YjticmVhaztjYXNlIDE6dGhpcy55PWI7YnJlYWs7Y2FzZSAyOnRoaXMuej1iO2JyZWFrO2Nhc2UgMzp0aGlzLnc9YjticmVhaztkZWZhdWx0OnRocm93IEVycm9yKFwiaW5kZXggaXMgb3V0IG9mIHJhbmdlOiBcIithKTt9fSxnZXRDb21wb25lbnQ6ZnVuY3Rpb24oYSl7c3dpdGNoKGEpe2Nhc2UgMDpyZXR1cm4gdGhpcy54O1xuY2FzZSAxOnJldHVybiB0aGlzLnk7Y2FzZSAyOnJldHVybiB0aGlzLno7Y2FzZSAzOnJldHVybiB0aGlzLnc7ZGVmYXVsdDp0aHJvdyBFcnJvcihcImluZGV4IGlzIG91dCBvZiByYW5nZTogXCIrYSk7fX0sY29weTpmdW5jdGlvbihhKXt0aGlzLng9YS54O3RoaXMueT1hLnk7dGhpcy56PWEuejt0aGlzLnc9dm9pZCAwIT09YS53P2EudzoxO3JldHVybiB0aGlzfSxhZGQ6ZnVuY3Rpb24oYSxiKXtpZih2b2lkIDAhPT1iKXJldHVybiBjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEOiBWZWN0b3I0J3MgLmFkZCgpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLmFkZFZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLmFkZFZlY3RvcnMoYSxiKTt0aGlzLngrPWEueDt0aGlzLnkrPWEueTt0aGlzLnorPWEuejt0aGlzLncrPWEudztyZXR1cm4gdGhpc30sYWRkU2NhbGFyOmZ1bmN0aW9uKGEpe3RoaXMueCs9YTt0aGlzLnkrPWE7dGhpcy56Kz1hO3RoaXMudys9YTtyZXR1cm4gdGhpc30sXG5hZGRWZWN0b3JzOmZ1bmN0aW9uKGEsYil7dGhpcy54PWEueCtiLng7dGhpcy55PWEueStiLnk7dGhpcy56PWEueitiLno7dGhpcy53PWEudytiLnc7cmV0dXJuIHRoaXN9LHN1YjpmdW5jdGlvbihhLGIpe2lmKHZvaWQgMCE9PWIpcmV0dXJuIGNvbnNvbGUud2FybihcIkRFUFJFQ0FURUQ6IFZlY3RvcjQncyAuc3ViKCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAuc3ViVmVjdG9ycyggYSwgYiApIGluc3RlYWQuXCIpLHRoaXMuc3ViVmVjdG9ycyhhLGIpO3RoaXMueC09YS54O3RoaXMueS09YS55O3RoaXMuei09YS56O3RoaXMudy09YS53O3JldHVybiB0aGlzfSxzdWJWZWN0b3JzOmZ1bmN0aW9uKGEsYil7dGhpcy54PWEueC1iLng7dGhpcy55PWEueS1iLnk7dGhpcy56PWEuei1iLno7dGhpcy53PWEudy1iLnc7cmV0dXJuIHRoaXN9LG11bHRpcGx5U2NhbGFyOmZ1bmN0aW9uKGEpe3RoaXMueCo9YTt0aGlzLnkqPWE7dGhpcy56Kj1hO3RoaXMudyo9YTtyZXR1cm4gdGhpc30sXG5hcHBseU1hdHJpeDQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy54LGM9dGhpcy55LGQ9dGhpcy56LGU9dGhpcy53LGE9YS5lbGVtZW50czt0aGlzLng9YVswXSpiK2FbNF0qYythWzhdKmQrYVsxMl0qZTt0aGlzLnk9YVsxXSpiK2FbNV0qYythWzldKmQrYVsxM10qZTt0aGlzLno9YVsyXSpiK2FbNl0qYythWzEwXSpkK2FbMTRdKmU7dGhpcy53PWFbM10qYithWzddKmMrYVsxMV0qZCthWzE1XSplO3JldHVybiB0aGlzfSxkaXZpZGVTY2FsYXI6ZnVuY3Rpb24oYSl7MCE9PWE/KGE9MS9hLHRoaXMueCo9YSx0aGlzLnkqPWEsdGhpcy56Kj1hLHRoaXMudyo9YSk6KHRoaXMuej10aGlzLnk9dGhpcy54PTAsdGhpcy53PTEpO3JldHVybiB0aGlzfSxzZXRBeGlzQW5nbGVGcm9tUXVhdGVybmlvbjpmdW5jdGlvbihhKXt0aGlzLnc9MipNYXRoLmFjb3MoYS53KTt2YXIgYj1NYXRoLnNxcnQoMS1hLncqYS53KTsxRS00PmI/KHRoaXMueD0xLHRoaXMuej10aGlzLnk9MCk6KHRoaXMueD1hLngvYixcbnRoaXMueT1hLnkvYix0aGlzLno9YS56L2IpO3JldHVybiB0aGlzfSxzZXRBeGlzQW5nbGVGcm9tUm90YXRpb25NYXRyaXg6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGE9YS5lbGVtZW50cyxlPWFbMF07ZD1hWzRdO3ZhciBmPWFbOF0saD1hWzFdLGc9YVs1XSxpPWFbOV07Yz1hWzJdO2I9YVs2XTt2YXIgaz1hWzEwXTtpZigwLjAxPk1hdGguYWJzKGQtaCkmJjAuMDE+TWF0aC5hYnMoZi1jKSYmMC4wMT5NYXRoLmFicyhpLWIpKXtpZigwLjE+TWF0aC5hYnMoZCtoKSYmMC4xPk1hdGguYWJzKGYrYykmJjAuMT5NYXRoLmFicyhpK2IpJiYwLjE+TWF0aC5hYnMoZStnK2stMykpcmV0dXJuIHRoaXMuc2V0KDEsMCwwLDApLHRoaXM7YT1NYXRoLlBJO2U9KGUrMSkvMjtnPShnKzEpLzI7az0oaysxKS8yO2Q9KGQraCkvNDtmPShmK2MpLzQ7aT0oaStiKS80O2U+ZyYmZT5rPzAuMDE+ZT8oYj0wLGQ9Yz0wLjcwNzEwNjc4MSk6KGI9TWF0aC5zcXJ0KGUpLGM9ZC9iLGQ9Zi9iKTpnPms/MC4wMT5nP1xuKGI9MC43MDcxMDY3ODEsYz0wLGQ9MC43MDcxMDY3ODEpOihjPU1hdGguc3FydChnKSxiPWQvYyxkPWkvYyk6MC4wMT5rPyhjPWI9MC43MDcxMDY3ODEsZD0wKTooZD1NYXRoLnNxcnQoayksYj1mL2QsYz1pL2QpO3RoaXMuc2V0KGIsYyxkLGEpO3JldHVybiB0aGlzfWE9TWF0aC5zcXJ0KChiLWkpKihiLWkpKyhmLWMpKihmLWMpKyhoLWQpKihoLWQpKTswLjAwMT5NYXRoLmFicyhhKSYmKGE9MSk7dGhpcy54PShiLWkpL2E7dGhpcy55PShmLWMpL2E7dGhpcy56PShoLWQpL2E7dGhpcy53PU1hdGguYWNvcygoZStnK2stMSkvMik7cmV0dXJuIHRoaXN9LG1pbjpmdW5jdGlvbihhKXt0aGlzLng+YS54JiYodGhpcy54PWEueCk7dGhpcy55PmEueSYmKHRoaXMueT1hLnkpO3RoaXMuej5hLnomJih0aGlzLno9YS56KTt0aGlzLnc+YS53JiYodGhpcy53PWEudyk7cmV0dXJuIHRoaXN9LG1heDpmdW5jdGlvbihhKXt0aGlzLng8YS54JiYodGhpcy54PWEueCk7dGhpcy55PGEueSYmKHRoaXMueT1cbmEueSk7dGhpcy56PGEueiYmKHRoaXMuej1hLnopO3RoaXMudzxhLncmJih0aGlzLnc9YS53KTtyZXR1cm4gdGhpc30sY2xhbXA6ZnVuY3Rpb24oYSxiKXt0aGlzLng8YS54P3RoaXMueD1hLng6dGhpcy54PmIueCYmKHRoaXMueD1iLngpO3RoaXMueTxhLnk/dGhpcy55PWEueTp0aGlzLnk+Yi55JiYodGhpcy55PWIueSk7dGhpcy56PGEuej90aGlzLno9YS56OnRoaXMuej5iLnomJih0aGlzLno9Yi56KTt0aGlzLnc8YS53P3RoaXMudz1hLnc6dGhpcy53PmIudyYmKHRoaXMudz1iLncpO3JldHVybiB0aGlzfSxuZWdhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tdWx0aXBseVNjYWxhcigtMSl9LGRvdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy54KmEueCt0aGlzLnkqYS55K3RoaXMueiphLnordGhpcy53KmEud30sbGVuZ3RoU3E6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54KnRoaXMueCt0aGlzLnkqdGhpcy55K3RoaXMueip0aGlzLnordGhpcy53KnRoaXMud30sbGVuZ3RoOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguc3FydCh0aGlzLngqXG50aGlzLngrdGhpcy55KnRoaXMueSt0aGlzLnoqdGhpcy56K3RoaXMudyp0aGlzLncpfSxsZW5ndGhNYW5oYXR0YW46ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5hYnModGhpcy54KStNYXRoLmFicyh0aGlzLnkpK01hdGguYWJzKHRoaXMueikrTWF0aC5hYnModGhpcy53KX0sbm9ybWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGl2aWRlU2NhbGFyKHRoaXMubGVuZ3RoKCkpfSxzZXRMZW5ndGg6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5sZW5ndGgoKTswIT09YiYmYSE9PWImJnRoaXMubXVsdGlwbHlTY2FsYXIoYS9iKTtyZXR1cm4gdGhpc30sbGVycDpmdW5jdGlvbihhLGIpe3RoaXMueCs9KGEueC10aGlzLngpKmI7dGhpcy55Kz0oYS55LXRoaXMueSkqYjt0aGlzLnorPShhLnotdGhpcy56KSpiO3RoaXMudys9KGEudy10aGlzLncpKmI7cmV0dXJuIHRoaXN9LGVxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gYS54PT09dGhpcy54JiZhLnk9PT10aGlzLnkmJmEuej09PXRoaXMueiYmXG5hLnc9PT10aGlzLnd9LGZyb21BcnJheTpmdW5jdGlvbihhKXt0aGlzLng9YVswXTt0aGlzLnk9YVsxXTt0aGlzLno9YVsyXTt0aGlzLnc9YVszXTtyZXR1cm4gdGhpc30sdG9BcnJheTpmdW5jdGlvbigpe3JldHVyblt0aGlzLngsdGhpcy55LHRoaXMueix0aGlzLnddfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgVEhSRUUuVmVjdG9yNCh0aGlzLngsdGhpcy55LHRoaXMueix0aGlzLncpfX07VEhSRUUuRXVsZXI9ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy5feD1hfHwwO3RoaXMuX3k9Ynx8MDt0aGlzLl96PWN8fDA7dGhpcy5fb3JkZXI9ZHx8VEhSRUUuRXVsZXIuRGVmYXVsdE9yZGVyfTtUSFJFRS5FdWxlci5Sb3RhdGlvbk9yZGVycz1cIlhZWiBZWlggWlhZIFhaWSBZWFogWllYXCIuc3BsaXQoXCIgXCIpO1RIUkVFLkV1bGVyLkRlZmF1bHRPcmRlcj1cIlhZWlwiO1xuVEhSRUUuRXVsZXIucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5FdWxlcixfeDowLF95OjAsX3o6MCxfb3JkZXI6VEhSRUUuRXVsZXIuRGVmYXVsdE9yZGVyLF9xdWF0ZXJuaW9uOnZvaWQgMCxfdXBkYXRlUXVhdGVybmlvbjpmdW5jdGlvbigpe3ZvaWQgMCE9PXRoaXMuX3F1YXRlcm5pb24mJnRoaXMuX3F1YXRlcm5pb24uc2V0RnJvbUV1bGVyKHRoaXMsITEpfSxnZXQgeCgpe3JldHVybiB0aGlzLl94fSxzZXQgeChhKXt0aGlzLl94PWE7dGhpcy5fdXBkYXRlUXVhdGVybmlvbigpfSxnZXQgeSgpe3JldHVybiB0aGlzLl95fSxzZXQgeShhKXt0aGlzLl95PWE7dGhpcy5fdXBkYXRlUXVhdGVybmlvbigpfSxnZXQgeigpe3JldHVybiB0aGlzLl96fSxzZXQgeihhKXt0aGlzLl96PWE7dGhpcy5fdXBkYXRlUXVhdGVybmlvbigpfSxnZXQgb3JkZXIoKXtyZXR1cm4gdGhpcy5fb3JkZXJ9LHNldCBvcmRlcihhKXt0aGlzLl9vcmRlcj1hO3RoaXMuX3VwZGF0ZVF1YXRlcm5pb24oKX0sXG5zZXQ6ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy5feD1hO3RoaXMuX3k9Yjt0aGlzLl96PWM7dGhpcy5fb3JkZXI9ZHx8dGhpcy5fb3JkZXI7dGhpcy5fdXBkYXRlUXVhdGVybmlvbigpO3JldHVybiB0aGlzfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMuX3g9YS5feDt0aGlzLl95PWEuX3k7dGhpcy5fej1hLl96O3RoaXMuX29yZGVyPWEuX29yZGVyO3RoaXMuX3VwZGF0ZVF1YXRlcm5pb24oKTtyZXR1cm4gdGhpc30sc2V0RnJvbVJvdGF0aW9uTWF0cml4OmZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhKXtyZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgoYSwtMSksMSl9dmFyIGQ9YS5lbGVtZW50cyxlPWRbMF0sZj1kWzRdLGg9ZFs4XSxnPWRbMV0saT1kWzVdLGs9ZFs5XSxtPWRbMl0sbD1kWzZdLGQ9ZFsxMF0sYj1ifHx0aGlzLl9vcmRlcjtcIlhZWlwiPT09Yj8odGhpcy5feT1NYXRoLmFzaW4oYyhoKSksMC45OTk5OT5NYXRoLmFicyhoKT8odGhpcy5feD1NYXRoLmF0YW4yKC1rLGQpLHRoaXMuX3o9XG5NYXRoLmF0YW4yKC1mLGUpKToodGhpcy5feD1NYXRoLmF0YW4yKGwsaSksdGhpcy5fej0wKSk6XCJZWFpcIj09PWI/KHRoaXMuX3g9TWF0aC5hc2luKC1jKGspKSwwLjk5OTk5Pk1hdGguYWJzKGspPyh0aGlzLl95PU1hdGguYXRhbjIoaCxkKSx0aGlzLl96PU1hdGguYXRhbjIoZyxpKSk6KHRoaXMuX3k9TWF0aC5hdGFuMigtbSxlKSx0aGlzLl96PTApKTpcIlpYWVwiPT09Yj8odGhpcy5feD1NYXRoLmFzaW4oYyhsKSksMC45OTk5OT5NYXRoLmFicyhsKT8odGhpcy5feT1NYXRoLmF0YW4yKC1tLGQpLHRoaXMuX3o9TWF0aC5hdGFuMigtZixpKSk6KHRoaXMuX3k9MCx0aGlzLl96PU1hdGguYXRhbjIoZyxlKSkpOlwiWllYXCI9PT1iPyh0aGlzLl95PU1hdGguYXNpbigtYyhtKSksMC45OTk5OT5NYXRoLmFicyhtKT8odGhpcy5feD1NYXRoLmF0YW4yKGwsZCksdGhpcy5fej1NYXRoLmF0YW4yKGcsZSkpOih0aGlzLl94PTAsdGhpcy5fej1NYXRoLmF0YW4yKC1mLGkpKSk6XCJZWlhcIj09PWI/KHRoaXMuX3o9XG5NYXRoLmFzaW4oYyhnKSksMC45OTk5OT5NYXRoLmFicyhnKT8odGhpcy5feD1NYXRoLmF0YW4yKC1rLGkpLHRoaXMuX3k9TWF0aC5hdGFuMigtbSxlKSk6KHRoaXMuX3g9MCx0aGlzLl95PU1hdGguYXRhbjIoaCxkKSkpOlwiWFpZXCI9PT1iPyh0aGlzLl96PU1hdGguYXNpbigtYyhmKSksMC45OTk5OT5NYXRoLmFicyhmKT8odGhpcy5feD1NYXRoLmF0YW4yKGwsaSksdGhpcy5feT1NYXRoLmF0YW4yKGgsZSkpOih0aGlzLl94PU1hdGguYXRhbjIoLWssZCksdGhpcy5feT0wKSk6Y29uc29sZS53YXJuKFwiV0FSTklORzogRXVsZXIuc2V0RnJvbVJvdGF0aW9uTWF0cml4KCkgZ2l2ZW4gdW5zdXBwb3J0ZWQgb3JkZXI6IFwiK2IpO3RoaXMuX29yZGVyPWI7dGhpcy5fdXBkYXRlUXVhdGVybmlvbigpO3JldHVybiB0aGlzfSxzZXRGcm9tUXVhdGVybmlvbjpmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhKXtyZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgoYSwtMSksMSl9dmFyIGU9YS54KmEueCxmPVxuYS55KmEueSxoPWEueiphLnosZz1hLncqYS53LGI9Ynx8dGhpcy5fb3JkZXI7XCJYWVpcIj09PWI/KHRoaXMuX3g9TWF0aC5hdGFuMigyKihhLngqYS53LWEueSphLnopLGctZS1mK2gpLHRoaXMuX3k9TWF0aC5hc2luKGQoMiooYS54KmEueithLnkqYS53KSkpLHRoaXMuX3o9TWF0aC5hdGFuMigyKihhLnoqYS53LWEueCphLnkpLGcrZS1mLWgpKTpcIllYWlwiPT09Yj8odGhpcy5feD1NYXRoLmFzaW4oZCgyKihhLngqYS53LWEueSphLnopKSksdGhpcy5feT1NYXRoLmF0YW4yKDIqKGEueCphLnorYS55KmEudyksZy1lLWYraCksdGhpcy5fej1NYXRoLmF0YW4yKDIqKGEueCphLnkrYS56KmEudyksZy1lK2YtaCkpOlwiWlhZXCI9PT1iPyh0aGlzLl94PU1hdGguYXNpbihkKDIqKGEueCphLncrYS55KmEueikpKSx0aGlzLl95PU1hdGguYXRhbjIoMiooYS55KmEudy1hLnoqYS54KSxnLWUtZitoKSx0aGlzLl96PU1hdGguYXRhbjIoMiooYS56KmEudy1hLngqYS55KSxnLWUrZi1oKSk6XCJaWVhcIj09PVxuYj8odGhpcy5feD1NYXRoLmF0YW4yKDIqKGEueCphLncrYS56KmEueSksZy1lLWYraCksdGhpcy5feT1NYXRoLmFzaW4oZCgyKihhLnkqYS53LWEueCphLnopKSksdGhpcy5fej1NYXRoLmF0YW4yKDIqKGEueCphLnkrYS56KmEudyksZytlLWYtaCkpOlwiWVpYXCI9PT1iPyh0aGlzLl94PU1hdGguYXRhbjIoMiooYS54KmEudy1hLnoqYS55KSxnLWUrZi1oKSx0aGlzLl95PU1hdGguYXRhbjIoMiooYS55KmEudy1hLngqYS56KSxnK2UtZi1oKSx0aGlzLl96PU1hdGguYXNpbihkKDIqKGEueCphLnkrYS56KmEudykpKSk6XCJYWllcIj09PWI/KHRoaXMuX3g9TWF0aC5hdGFuMigyKihhLngqYS53K2EueSphLnopLGctZStmLWgpLHRoaXMuX3k9TWF0aC5hdGFuMigyKihhLngqYS56K2EueSphLncpLGcrZS1mLWgpLHRoaXMuX3o9TWF0aC5hc2luKGQoMiooYS56KmEudy1hLngqYS55KSkpKTpjb25zb2xlLndhcm4oXCJXQVJOSU5HOiBFdWxlci5zZXRGcm9tUXVhdGVybmlvbigpIGdpdmVuIHVuc3VwcG9ydGVkIG9yZGVyOiBcIitcbmIpO3RoaXMuX29yZGVyPWI7ITEhPT1jJiZ0aGlzLl91cGRhdGVRdWF0ZXJuaW9uKCk7cmV0dXJuIHRoaXN9LHJlb3JkZXI6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuUXVhdGVybmlvbjtyZXR1cm4gZnVuY3Rpb24oYil7YS5zZXRGcm9tRXVsZXIodGhpcyk7dGhpcy5zZXRGcm9tUXVhdGVybmlvbihhLGIpfX0oKSxmcm9tQXJyYXk6ZnVuY3Rpb24oYSl7dGhpcy5feD1hWzBdO3RoaXMuX3k9YVsxXTt0aGlzLl96PWFbMl07dm9pZCAwIT09YVszXSYmKHRoaXMuX29yZGVyPWFbM10pO3RoaXMuX3VwZGF0ZVF1YXRlcm5pb24oKTtyZXR1cm4gdGhpc30sdG9BcnJheTpmdW5jdGlvbigpe3JldHVyblt0aGlzLl94LHRoaXMuX3ksdGhpcy5feix0aGlzLl9vcmRlcl19LGVxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gYS5feD09PXRoaXMuX3gmJmEuX3k9PT10aGlzLl95JiZhLl96PT09dGhpcy5feiYmYS5fb3JkZXI9PT10aGlzLl9vcmRlcn0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFRIUkVFLkV1bGVyKHRoaXMuX3gsXG50aGlzLl95LHRoaXMuX3osdGhpcy5fb3JkZXIpfX07VEhSRUUuTGluZTM9ZnVuY3Rpb24oYSxiKXt0aGlzLnN0YXJ0PXZvaWQgMCE9PWE/YTpuZXcgVEhSRUUuVmVjdG9yMzt0aGlzLmVuZD12b2lkIDAhPT1iP2I6bmV3IFRIUkVFLlZlY3RvcjN9O1xuVEhSRUUuTGluZTMucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5MaW5lMyxzZXQ6ZnVuY3Rpb24oYSxiKXt0aGlzLnN0YXJ0LmNvcHkoYSk7dGhpcy5lbmQuY29weShiKTtyZXR1cm4gdGhpc30sY29weTpmdW5jdGlvbihhKXt0aGlzLnN0YXJ0LmNvcHkoYS5zdGFydCk7dGhpcy5lbmQuY29weShhLmVuZCk7cmV0dXJuIHRoaXN9LGNlbnRlcjpmdW5jdGlvbihhKXtyZXR1cm4oYXx8bmV3IFRIUkVFLlZlY3RvcjMpLmFkZFZlY3RvcnModGhpcy5zdGFydCx0aGlzLmVuZCkubXVsdGlwbHlTY2FsYXIoMC41KX0sZGVsdGE6ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fG5ldyBUSFJFRS5WZWN0b3IzKS5zdWJWZWN0b3JzKHRoaXMuZW5kLHRoaXMuc3RhcnQpfSxkaXN0YW5jZVNxOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhcnQuZGlzdGFuY2VUb1NxdWFyZWQodGhpcy5lbmQpfSxkaXN0YW5jZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXJ0LmRpc3RhbmNlVG8odGhpcy5lbmQpfSxhdDpmdW5jdGlvbihhLFxuYil7dmFyIGM9Ynx8bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIHRoaXMuZGVsdGEoYykubXVsdGlwbHlTY2FsYXIoYSkuYWRkKHRoaXMuc3RhcnQpfSxjbG9zZXN0UG9pbnRUb1BvaW50UGFyYW1ldGVyOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjMsYj1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oYyxkKXthLnN1YlZlY3RvcnMoYyx0aGlzLnN0YXJ0KTtiLnN1YlZlY3RvcnModGhpcy5lbmQsdGhpcy5zdGFydCk7dmFyIGU9Yi5kb3QoYiksZT1iLmRvdChhKS9lO2QmJihlPVRIUkVFLk1hdGguY2xhbXAoZSwwLDEpKTtyZXR1cm4gZX19KCksY2xvc2VzdFBvaW50VG9Qb2ludDpmdW5jdGlvbihhLGIsYyl7YT10aGlzLmNsb3Nlc3RQb2ludFRvUG9pbnRQYXJhbWV0ZXIoYSxiKTtjPWN8fG5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiB0aGlzLmRlbHRhKGMpLm11bHRpcGx5U2NhbGFyKGEpLmFkZCh0aGlzLnN0YXJ0KX0sYXBwbHlNYXRyaXg0OmZ1bmN0aW9uKGEpe3RoaXMuc3RhcnQuYXBwbHlNYXRyaXg0KGEpO1xudGhpcy5lbmQuYXBwbHlNYXRyaXg0KGEpO3JldHVybiB0aGlzfSxlcXVhbHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuc3RhcnQuZXF1YWxzKHRoaXMuc3RhcnQpJiZhLmVuZC5lcXVhbHModGhpcy5lbmQpfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgVEhSRUUuTGluZTMpLmNvcHkodGhpcyl9fTtUSFJFRS5Cb3gyPWZ1bmN0aW9uKGEsYil7dGhpcy5taW49dm9pZCAwIT09YT9hOm5ldyBUSFJFRS5WZWN0b3IyKEluZmluaXR5LEluZmluaXR5KTt0aGlzLm1heD12b2lkIDAhPT1iP2I6bmV3IFRIUkVFLlZlY3RvcjIoLUluZmluaXR5LC1JbmZpbml0eSl9O1xuVEhSRUUuQm94Mi5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLkJveDIsc2V0OmZ1bmN0aW9uKGEsYil7dGhpcy5taW4uY29weShhKTt0aGlzLm1heC5jb3B5KGIpO3JldHVybiB0aGlzfSxzZXRGcm9tUG9pbnRzOmZ1bmN0aW9uKGEpe2lmKDA8YS5sZW5ndGgpe3ZhciBiPWFbMF07dGhpcy5taW4uY29weShiKTt0aGlzLm1heC5jb3B5KGIpO2Zvcih2YXIgYz0xLGQ9YS5sZW5ndGg7YzxkO2MrKyliPWFbY10sYi54PHRoaXMubWluLng/dGhpcy5taW4ueD1iLng6Yi54PnRoaXMubWF4LngmJih0aGlzLm1heC54PWIueCksYi55PHRoaXMubWluLnk/dGhpcy5taW4ueT1iLnk6Yi55PnRoaXMubWF4LnkmJih0aGlzLm1heC55PWIueSl9ZWxzZSB0aGlzLm1ha2VFbXB0eSgpO3JldHVybiB0aGlzfSxzZXRGcm9tQ2VudGVyQW5kU2l6ZTpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IyO3JldHVybiBmdW5jdGlvbihiLGMpe3ZhciBkPWEuY29weShjKS5tdWx0aXBseVNjYWxhcigwLjUpO1xudGhpcy5taW4uY29weShiKS5zdWIoZCk7dGhpcy5tYXguY29weShiKS5hZGQoZCk7cmV0dXJuIHRoaXN9fSgpLGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5taW4uY29weShhLm1pbik7dGhpcy5tYXguY29weShhLm1heCk7cmV0dXJuIHRoaXN9LG1ha2VFbXB0eTpmdW5jdGlvbigpe3RoaXMubWluLng9dGhpcy5taW4ueT1JbmZpbml0eTt0aGlzLm1heC54PXRoaXMubWF4Lnk9LUluZmluaXR5O3JldHVybiB0aGlzfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1heC54PHRoaXMubWluLnh8fHRoaXMubWF4Lnk8dGhpcy5taW4ueX0sY2VudGVyOmZ1bmN0aW9uKGEpe3JldHVybihhfHxuZXcgVEhSRUUuVmVjdG9yMikuYWRkVmVjdG9ycyh0aGlzLm1pbix0aGlzLm1heCkubXVsdGlwbHlTY2FsYXIoMC41KX0sc2l6ZTpmdW5jdGlvbihhKXtyZXR1cm4oYXx8bmV3IFRIUkVFLlZlY3RvcjIpLnN1YlZlY3RvcnModGhpcy5tYXgsdGhpcy5taW4pfSxleHBhbmRCeVBvaW50OmZ1bmN0aW9uKGEpe3RoaXMubWluLm1pbihhKTtcbnRoaXMubWF4Lm1heChhKTtyZXR1cm4gdGhpc30sZXhwYW5kQnlWZWN0b3I6ZnVuY3Rpb24oYSl7dGhpcy5taW4uc3ViKGEpO3RoaXMubWF4LmFkZChhKTtyZXR1cm4gdGhpc30sZXhwYW5kQnlTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy5taW4uYWRkU2NhbGFyKC1hKTt0aGlzLm1heC5hZGRTY2FsYXIoYSk7cmV0dXJuIHRoaXN9LGNvbnRhaW5zUG9pbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEueDx0aGlzLm1pbi54fHxhLng+dGhpcy5tYXgueHx8YS55PHRoaXMubWluLnl8fGEueT50aGlzLm1heC55PyExOiEwfSxjb250YWluc0JveDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5taW4ueDw9YS5taW4ueCYmYS5tYXgueDw9dGhpcy5tYXgueCYmdGhpcy5taW4ueTw9YS5taW4ueSYmYS5tYXgueTw9dGhpcy5tYXgueT8hMDohMX0sZ2V0UGFyYW1ldGVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuKGJ8fG5ldyBUSFJFRS5WZWN0b3IyKS5zZXQoKGEueC10aGlzLm1pbi54KS8odGhpcy5tYXgueC10aGlzLm1pbi54KSxcbihhLnktdGhpcy5taW4ueSkvKHRoaXMubWF4LnktdGhpcy5taW4ueSkpfSxpc0ludGVyc2VjdGlvbkJveDpmdW5jdGlvbihhKXtyZXR1cm4gYS5tYXgueDx0aGlzLm1pbi54fHxhLm1pbi54PnRoaXMubWF4Lnh8fGEubWF4Lnk8dGhpcy5taW4ueXx8YS5taW4ueT50aGlzLm1heC55PyExOiEwfSxjbGFtcFBvaW50OmZ1bmN0aW9uKGEsYil7cmV0dXJuKGJ8fG5ldyBUSFJFRS5WZWN0b3IyKS5jb3B5KGEpLmNsYW1wKHRoaXMubWluLHRoaXMubWF4KX0sZGlzdGFuY2VUb1BvaW50OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjI7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBhLmNvcHkoYikuY2xhbXAodGhpcy5taW4sdGhpcy5tYXgpLnN1YihiKS5sZW5ndGgoKX19KCksaW50ZXJzZWN0OmZ1bmN0aW9uKGEpe3RoaXMubWluLm1heChhLm1pbik7dGhpcy5tYXgubWluKGEubWF4KTtyZXR1cm4gdGhpc30sdW5pb246ZnVuY3Rpb24oYSl7dGhpcy5taW4ubWluKGEubWluKTt0aGlzLm1heC5tYXgoYS5tYXgpO1xucmV0dXJuIHRoaXN9LHRyYW5zbGF0ZTpmdW5jdGlvbihhKXt0aGlzLm1pbi5hZGQoYSk7dGhpcy5tYXguYWRkKGEpO3JldHVybiB0aGlzfSxlcXVhbHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEubWluLmVxdWFscyh0aGlzLm1pbikmJmEubWF4LmVxdWFscyh0aGlzLm1heCl9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBUSFJFRS5Cb3gyKS5jb3B5KHRoaXMpfX07VEhSRUUuQm94Mz1mdW5jdGlvbihhLGIpe3RoaXMubWluPXZvaWQgMCE9PWE/YTpuZXcgVEhSRUUuVmVjdG9yMyhJbmZpbml0eSxJbmZpbml0eSxJbmZpbml0eSk7dGhpcy5tYXg9dm9pZCAwIT09Yj9iOm5ldyBUSFJFRS5WZWN0b3IzKC1JbmZpbml0eSwtSW5maW5pdHksLUluZmluaXR5KX07XG5USFJFRS5Cb3gzLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuQm94MyxzZXQ6ZnVuY3Rpb24oYSxiKXt0aGlzLm1pbi5jb3B5KGEpO3RoaXMubWF4LmNvcHkoYik7cmV0dXJuIHRoaXN9LGFkZFBvaW50OmZ1bmN0aW9uKGEpe2EueDx0aGlzLm1pbi54P3RoaXMubWluLng9YS54OmEueD50aGlzLm1heC54JiYodGhpcy5tYXgueD1hLngpO2EueTx0aGlzLm1pbi55P3RoaXMubWluLnk9YS55OmEueT50aGlzLm1heC55JiYodGhpcy5tYXgueT1hLnkpO2Euejx0aGlzLm1pbi56P3RoaXMubWluLno9YS56OmEuej50aGlzLm1heC56JiYodGhpcy5tYXguej1hLnopfSxzZXRGcm9tUG9pbnRzOmZ1bmN0aW9uKGEpe2lmKDA8YS5sZW5ndGgpe3ZhciBiPWFbMF07dGhpcy5taW4uY29weShiKTt0aGlzLm1heC5jb3B5KGIpO2Zvcih2YXIgYj0xLGM9YS5sZW5ndGg7YjxjO2IrKyl0aGlzLmFkZFBvaW50KGFbYl0pfWVsc2UgdGhpcy5tYWtlRW1wdHkoKTtyZXR1cm4gdGhpc30sc2V0RnJvbUNlbnRlckFuZFNpemU6ZnVuY3Rpb24oKXt2YXIgYT1cbm5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihiLGMpe3ZhciBkPWEuY29weShjKS5tdWx0aXBseVNjYWxhcigwLjUpO3RoaXMubWluLmNvcHkoYikuc3ViKGQpO3RoaXMubWF4LmNvcHkoYikuYWRkKGQpO3JldHVybiB0aGlzfX0oKSxzZXRGcm9tT2JqZWN0OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPXRoaXM7Yi51cGRhdGVNYXRyaXhXb3JsZCghMCk7dGhpcy5tYWtlRW1wdHkoKTtiLnRyYXZlcnNlKGZ1bmN0aW9uKGIpe2lmKHZvaWQgMCE9PWIuZ2VvbWV0cnkmJnZvaWQgMCE9PWIuZ2VvbWV0cnkudmVydGljZXMpZm9yKHZhciBlPWIuZ2VvbWV0cnkudmVydGljZXMsZj0wLGg9ZS5sZW5ndGg7ZjxoO2YrKylhLmNvcHkoZVtmXSksYS5hcHBseU1hdHJpeDQoYi5tYXRyaXhXb3JsZCksYy5leHBhbmRCeVBvaW50KGEpfSk7cmV0dXJuIHRoaXN9fSgpLGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5taW4uY29weShhLm1pbik7XG50aGlzLm1heC5jb3B5KGEubWF4KTtyZXR1cm4gdGhpc30sbWFrZUVtcHR5OmZ1bmN0aW9uKCl7dGhpcy5taW4ueD10aGlzLm1pbi55PXRoaXMubWluLno9SW5maW5pdHk7dGhpcy5tYXgueD10aGlzLm1heC55PXRoaXMubWF4Lno9LUluZmluaXR5O3JldHVybiB0aGlzfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1heC54PHRoaXMubWluLnh8fHRoaXMubWF4Lnk8dGhpcy5taW4ueXx8dGhpcy5tYXguejx0aGlzLm1pbi56fSxjZW50ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fG5ldyBUSFJFRS5WZWN0b3IzKS5hZGRWZWN0b3JzKHRoaXMubWluLHRoaXMubWF4KS5tdWx0aXBseVNjYWxhcigwLjUpfSxzaXplOmZ1bmN0aW9uKGEpe3JldHVybihhfHxuZXcgVEhSRUUuVmVjdG9yMykuc3ViVmVjdG9ycyh0aGlzLm1heCx0aGlzLm1pbil9LGV4cGFuZEJ5UG9pbnQ6ZnVuY3Rpb24oYSl7dGhpcy5taW4ubWluKGEpO3RoaXMubWF4Lm1heChhKTtyZXR1cm4gdGhpc30sZXhwYW5kQnlWZWN0b3I6ZnVuY3Rpb24oYSl7dGhpcy5taW4uc3ViKGEpO1xudGhpcy5tYXguYWRkKGEpO3JldHVybiB0aGlzfSxleHBhbmRCeVNjYWxhcjpmdW5jdGlvbihhKXt0aGlzLm1pbi5hZGRTY2FsYXIoLWEpO3RoaXMubWF4LmFkZFNjYWxhcihhKTtyZXR1cm4gdGhpc30sY29udGFpbnNQb2ludDpmdW5jdGlvbihhKXtyZXR1cm4gYS54PHRoaXMubWluLnh8fGEueD50aGlzLm1heC54fHxhLnk8dGhpcy5taW4ueXx8YS55PnRoaXMubWF4Lnl8fGEuejx0aGlzLm1pbi56fHxhLno+dGhpcy5tYXguej8hMTohMH0sY29udGFpbnNCb3g6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubWluLng8PWEubWluLngmJmEubWF4Lng8PXRoaXMubWF4LngmJnRoaXMubWluLnk8PWEubWluLnkmJmEubWF4Lnk8PXRoaXMubWF4LnkmJnRoaXMubWluLno8PWEubWluLnomJmEubWF4Lno8PXRoaXMubWF4Lno/ITA6ITF9LGdldFBhcmFtZXRlcjpmdW5jdGlvbihhLGIpe3JldHVybihifHxuZXcgVEhSRUUuVmVjdG9yMykuc2V0KChhLngtdGhpcy5taW4ueCkvKHRoaXMubWF4LngtXG50aGlzLm1pbi54KSwoYS55LXRoaXMubWluLnkpLyh0aGlzLm1heC55LXRoaXMubWluLnkpLChhLnotdGhpcy5taW4ueikvKHRoaXMubWF4LnotdGhpcy5taW4ueikpfSxpc0ludGVyc2VjdGlvbkJveDpmdW5jdGlvbihhKXtyZXR1cm4gYS5tYXgueDx0aGlzLm1pbi54fHxhLm1pbi54PnRoaXMubWF4Lnh8fGEubWF4Lnk8dGhpcy5taW4ueXx8YS5taW4ueT50aGlzLm1heC55fHxhLm1heC56PHRoaXMubWluLnp8fGEubWluLno+dGhpcy5tYXguej8hMTohMH0sY2xhbXBQb2ludDpmdW5jdGlvbihhLGIpe3JldHVybihifHxuZXcgVEhSRUUuVmVjdG9yMykuY29weShhKS5jbGFtcCh0aGlzLm1pbix0aGlzLm1heCl9LGRpc3RhbmNlVG9Qb2ludDpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gYS5jb3B5KGIpLmNsYW1wKHRoaXMubWluLHRoaXMubWF4KS5zdWIoYikubGVuZ3RoKCl9fSgpLGdldEJvdW5kaW5nU3BoZXJlOmZ1bmN0aW9uKCl7dmFyIGE9XG5uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oYil7Yj1ifHxuZXcgVEhSRUUuU3BoZXJlO2IuY2VudGVyPXRoaXMuY2VudGVyKCk7Yi5yYWRpdXM9MC41KnRoaXMuc2l6ZShhKS5sZW5ndGgoKTtyZXR1cm4gYn19KCksaW50ZXJzZWN0OmZ1bmN0aW9uKGEpe3RoaXMubWluLm1heChhLm1pbik7dGhpcy5tYXgubWluKGEubWF4KTtyZXR1cm4gdGhpc30sdW5pb246ZnVuY3Rpb24oYSl7dGhpcy5taW4ubWluKGEubWluKTt0aGlzLm1heC5tYXgoYS5tYXgpO3JldHVybiB0aGlzfSxhcHBseU1hdHJpeDQ6ZnVuY3Rpb24oKXt2YXIgYT1bbmV3IFRIUkVFLlZlY3RvcjMsbmV3IFRIUkVFLlZlY3RvcjMsbmV3IFRIUkVFLlZlY3RvcjMsbmV3IFRIUkVFLlZlY3RvcjMsbmV3IFRIUkVFLlZlY3RvcjMsbmV3IFRIUkVFLlZlY3RvcjMsbmV3IFRIUkVFLlZlY3RvcjMsbmV3IFRIUkVFLlZlY3RvcjNdO3JldHVybiBmdW5jdGlvbihiKXthWzBdLnNldCh0aGlzLm1pbi54LHRoaXMubWluLnksXG50aGlzLm1pbi56KS5hcHBseU1hdHJpeDQoYik7YVsxXS5zZXQodGhpcy5taW4ueCx0aGlzLm1pbi55LHRoaXMubWF4LnopLmFwcGx5TWF0cml4NChiKTthWzJdLnNldCh0aGlzLm1pbi54LHRoaXMubWF4LnksdGhpcy5taW4ueikuYXBwbHlNYXRyaXg0KGIpO2FbM10uc2V0KHRoaXMubWluLngsdGhpcy5tYXgueSx0aGlzLm1heC56KS5hcHBseU1hdHJpeDQoYik7YVs0XS5zZXQodGhpcy5tYXgueCx0aGlzLm1pbi55LHRoaXMubWluLnopLmFwcGx5TWF0cml4NChiKTthWzVdLnNldCh0aGlzLm1heC54LHRoaXMubWluLnksdGhpcy5tYXgueikuYXBwbHlNYXRyaXg0KGIpO2FbNl0uc2V0KHRoaXMubWF4LngsdGhpcy5tYXgueSx0aGlzLm1pbi56KS5hcHBseU1hdHJpeDQoYik7YVs3XS5zZXQodGhpcy5tYXgueCx0aGlzLm1heC55LHRoaXMubWF4LnopLmFwcGx5TWF0cml4NChiKTt0aGlzLm1ha2VFbXB0eSgpO3RoaXMuc2V0RnJvbVBvaW50cyhhKTtyZXR1cm4gdGhpc319KCksdHJhbnNsYXRlOmZ1bmN0aW9uKGEpe3RoaXMubWluLmFkZChhKTtcbnRoaXMubWF4LmFkZChhKTtyZXR1cm4gdGhpc30sZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiBhLm1pbi5lcXVhbHModGhpcy5taW4pJiZhLm1heC5lcXVhbHModGhpcy5tYXgpfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgVEhSRUUuQm94MykuY29weSh0aGlzKX19O1RIUkVFLk1hdHJpeDM9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsaCxnLGkpe3RoaXMuZWxlbWVudHM9bmV3IEZsb2F0MzJBcnJheSg5KTt0aGlzLnNldCh2b2lkIDAhPT1hP2E6MSxifHwwLGN8fDAsZHx8MCx2b2lkIDAhPT1lP2U6MSxmfHwwLGh8fDAsZ3x8MCx2b2lkIDAhPT1pP2k6MSl9O1xuVEhSRUUuTWF0cml4My5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLk1hdHJpeDMsc2V0OmZ1bmN0aW9uKGEsYixjLGQsZSxmLGgsZyxpKXt2YXIgaz10aGlzLmVsZW1lbnRzO2tbMF09YTtrWzNdPWI7a1s2XT1jO2tbMV09ZDtrWzRdPWU7a1s3XT1mO2tbMl09aDtrWzVdPWc7a1s4XT1pO3JldHVybiB0aGlzfSxpZGVudGl0eTpmdW5jdGlvbigpe3RoaXMuc2V0KDEsMCwwLDAsMSwwLDAsMCwxKTtyZXR1cm4gdGhpc30sY29weTpmdW5jdGlvbihhKXthPWEuZWxlbWVudHM7dGhpcy5zZXQoYVswXSxhWzNdLGFbNl0sYVsxXSxhWzRdLGFbN10sYVsyXSxhWzVdLGFbOF0pO3JldHVybiB0aGlzfSxtdWx0aXBseVZlY3RvcjM6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiREVQUkVDQVRFRDogTWF0cml4MydzIC5tdWx0aXBseVZlY3RvcjMoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgdmVjdG9yLmFwcGx5TWF0cml4MyggbWF0cml4ICkgaW5zdGVhZC5cIik7cmV0dXJuIGEuYXBwbHlNYXRyaXgzKHRoaXMpfSxcbm11bHRpcGx5VmVjdG9yM0FycmF5OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGIpe2Zvcih2YXIgYz0wLGQ9Yi5sZW5ndGg7YzxkO2MrPTMpYS54PWJbY10sYS55PWJbYysxXSxhLno9YltjKzJdLGEuYXBwbHlNYXRyaXgzKHRoaXMpLGJbY109YS54LGJbYysxXT1hLnksYltjKzJdPWEuejtyZXR1cm4gYn19KCksbXVsdGlwbHlTY2FsYXI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5lbGVtZW50cztiWzBdKj1hO2JbM10qPWE7Yls2XSo9YTtiWzFdKj1hO2JbNF0qPWE7Yls3XSo9YTtiWzJdKj1hO2JbNV0qPWE7Yls4XSo9YTtyZXR1cm4gdGhpc30sZGV0ZXJtaW5hbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVsZW1lbnRzLGI9YVswXSxjPWFbMV0sZD1hWzJdLGU9YVszXSxmPWFbNF0saD1hWzVdLGc9YVs2XSxpPWFbN10sYT1hWzhdO3JldHVybiBiKmYqYS1iKmgqaS1jKmUqYStjKmgqZytkKmUqaS1kKmYqZ30sZ2V0SW52ZXJzZTpmdW5jdGlvbihhLFxuYil7dmFyIGM9YS5lbGVtZW50cyxkPXRoaXMuZWxlbWVudHM7ZFswXT1jWzEwXSpjWzVdLWNbNl0qY1s5XTtkWzFdPS1jWzEwXSpjWzFdK2NbMl0qY1s5XTtkWzJdPWNbNl0qY1sxXS1jWzJdKmNbNV07ZFszXT0tY1sxMF0qY1s0XStjWzZdKmNbOF07ZFs0XT1jWzEwXSpjWzBdLWNbMl0qY1s4XTtkWzVdPS1jWzZdKmNbMF0rY1syXSpjWzRdO2RbNl09Y1s5XSpjWzRdLWNbNV0qY1s4XTtkWzddPS1jWzldKmNbMF0rY1sxXSpjWzhdO2RbOF09Y1s1XSpjWzBdLWNbMV0qY1s0XTtjPWNbMF0qZFswXStjWzFdKmRbM10rY1syXSpkWzZdO2lmKDA9PT1jKXtpZihiKXRocm93IEVycm9yKFwiTWF0cml4My5nZXRJbnZlcnNlKCk6IGNhbid0IGludmVydCBtYXRyaXgsIGRldGVybWluYW50IGlzIDBcIik7Y29uc29sZS53YXJuKFwiTWF0cml4My5nZXRJbnZlcnNlKCk6IGNhbid0IGludmVydCBtYXRyaXgsIGRldGVybWluYW50IGlzIDBcIik7dGhpcy5pZGVudGl0eSgpO3JldHVybiB0aGlzfXRoaXMubXVsdGlwbHlTY2FsYXIoMS9cbmMpO3JldHVybiB0aGlzfSx0cmFuc3Bvc2U6ZnVuY3Rpb24oKXt2YXIgYSxiPXRoaXMuZWxlbWVudHM7YT1iWzFdO2JbMV09YlszXTtiWzNdPWE7YT1iWzJdO2JbMl09Yls2XTtiWzZdPWE7YT1iWzVdO2JbNV09Yls3XTtiWzddPWE7cmV0dXJuIHRoaXN9LGdldE5vcm1hbE1hdHJpeDpmdW5jdGlvbihhKXt0aGlzLmdldEludmVyc2UoYSkudHJhbnNwb3NlKCk7cmV0dXJuIHRoaXN9LHRyYW5zcG9zZUludG9BcnJheTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmVsZW1lbnRzO2FbMF09YlswXTthWzFdPWJbM107YVsyXT1iWzZdO2FbM109YlsxXTthWzRdPWJbNF07YVs1XT1iWzddO2FbNl09YlsyXTthWzddPWJbNV07YVs4XT1iWzhdO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZWxlbWVudHM7cmV0dXJuIG5ldyBUSFJFRS5NYXRyaXgzKGFbMF0sYVszXSxhWzZdLGFbMV0sYVs0XSxhWzddLGFbMl0sYVs1XSxhWzhdKX19O1RIUkVFLk1hdHJpeDQ9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsaCxnLGksayxtLGwscCx0LHMscSl7dmFyIG49dGhpcy5lbGVtZW50cz1uZXcgRmxvYXQzMkFycmF5KDE2KTtuWzBdPXZvaWQgMCE9PWE/YToxO25bNF09Ynx8MDtuWzhdPWN8fDA7blsxMl09ZHx8MDtuWzFdPWV8fDA7bls1XT12b2lkIDAhPT1mP2Y6MTtuWzldPWh8fDA7blsxM109Z3x8MDtuWzJdPWl8fDA7bls2XT1rfHwwO25bMTBdPXZvaWQgMCE9PW0/bToxO25bMTRdPWx8fDA7blszXT1wfHwwO25bN109dHx8MDtuWzExXT1zfHwwO25bMTVdPXZvaWQgMCE9PXE/cToxfTtcblRIUkVFLk1hdHJpeDQucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5NYXRyaXg0LHNldDpmdW5jdGlvbihhLGIsYyxkLGUsZixoLGcsaSxrLG0sbCxwLHQscyxxKXt2YXIgbj10aGlzLmVsZW1lbnRzO25bMF09YTtuWzRdPWI7bls4XT1jO25bMTJdPWQ7blsxXT1lO25bNV09ZjtuWzldPWg7blsxM109ZztuWzJdPWk7bls2XT1rO25bMTBdPW07blsxNF09bDtuWzNdPXA7bls3XT10O25bMTFdPXM7blsxNV09cTtyZXR1cm4gdGhpc30saWRlbnRpdHk6ZnVuY3Rpb24oKXt0aGlzLnNldCgxLDAsMCwwLDAsMSwwLDAsMCwwLDEsMCwwLDAsMCwxKTtyZXR1cm4gdGhpc30sY29weTpmdW5jdGlvbihhKXt0aGlzLmVsZW1lbnRzLnNldChhLmVsZW1lbnRzKTtyZXR1cm4gdGhpc30sZXh0cmFjdFBvc2l0aW9uOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIkRFUFJFQ0FURUQ6IE1hdHJpeDQncyAuZXh0cmFjdFBvc2l0aW9uKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuY29weVBvc2l0aW9uKCkuXCIpO1xucmV0dXJuIHRoaXMuY29weVBvc2l0aW9uKGEpfSxjb3B5UG9zaXRpb246ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5lbGVtZW50cyxhPWEuZWxlbWVudHM7YlsxMl09YVsxMl07YlsxM109YVsxM107YlsxNF09YVsxNF07cmV0dXJuIHRoaXN9LGV4dHJhY3RSb3RhdGlvbjpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihiKXt2YXIgYz10aGlzLmVsZW1lbnRzLGI9Yi5lbGVtZW50cyxkPTEvYS5zZXQoYlswXSxiWzFdLGJbMl0pLmxlbmd0aCgpLGU9MS9hLnNldChiWzRdLGJbNV0sYls2XSkubGVuZ3RoKCksZj0xL2Euc2V0KGJbOF0sYls5XSxiWzEwXSkubGVuZ3RoKCk7Y1swXT1iWzBdKmQ7Y1sxXT1iWzFdKmQ7Y1syXT1iWzJdKmQ7Y1s0XT1iWzRdKmU7Y1s1XT1iWzVdKmU7Y1s2XT1iWzZdKmU7Y1s4XT1iWzhdKmY7Y1s5XT1iWzldKmY7Y1sxMF09YlsxMF0qZjtyZXR1cm4gdGhpc319KCksbWFrZVJvdGF0aW9uRnJvbUV1bGVyOmZ1bmN0aW9uKGEpeyExPT09XG5hIGluc3RhbmNlb2YgVEhSRUUuRXVsZXImJmNvbnNvbGUuZXJyb3IoXCJFUlJPUjogTWF0cml4J3MgLm1ha2VSb3RhdGlvbkZyb21FdWxlcigpIG5vdyBleHBlY3RzIGEgRXVsZXIgcm90YXRpb24gcmF0aGVyIHRoYW4gYSBWZWN0b3IzIGFuZCBvcmRlci4gIFBsZWFzZSB1cGRhdGUgeW91ciBjb2RlLlwiKTt2YXIgYj10aGlzLmVsZW1lbnRzLGM9YS54LGQ9YS55LGU9YS56LGY9TWF0aC5jb3MoYyksYz1NYXRoLnNpbihjKSxoPU1hdGguY29zKGQpLGQ9TWF0aC5zaW4oZCksZz1NYXRoLmNvcyhlKSxlPU1hdGguc2luKGUpO2lmKFwiWFlaXCI9PT1hLm9yZGVyKXt2YXIgYT1mKmcsaT1mKmUsaz1jKmcsbT1jKmU7YlswXT1oKmc7Yls0XT0taCplO2JbOF09ZDtiWzFdPWkraypkO2JbNV09YS1tKmQ7Yls5XT0tYypoO2JbMl09bS1hKmQ7Yls2XT1rK2kqZDtiWzEwXT1mKmh9ZWxzZVwiWVhaXCI9PT1hLm9yZGVyPyhhPWgqZyxpPWgqZSxrPWQqZyxtPWQqZSxiWzBdPWErbSpjLGJbNF09aypjLWksYls4XT1cbmYqZCxiWzFdPWYqZSxiWzVdPWYqZyxiWzldPS1jLGJbMl09aSpjLWssYls2XT1tK2EqYyxiWzEwXT1mKmgpOlwiWlhZXCI9PT1hLm9yZGVyPyhhPWgqZyxpPWgqZSxrPWQqZyxtPWQqZSxiWzBdPWEtbSpjLGJbNF09LWYqZSxiWzhdPWsraSpjLGJbMV09aStrKmMsYls1XT1mKmcsYls5XT1tLWEqYyxiWzJdPS1mKmQsYls2XT1jLGJbMTBdPWYqaCk6XCJaWVhcIj09PWEub3JkZXI/KGE9ZipnLGk9ZiplLGs9YypnLG09YyplLGJbMF09aCpnLGJbNF09aypkLWksYls4XT1hKmQrbSxiWzFdPWgqZSxiWzVdPW0qZCthLGJbOV09aSpkLWssYlsyXT0tZCxiWzZdPWMqaCxiWzEwXT1mKmgpOlwiWVpYXCI9PT1hLm9yZGVyPyhhPWYqaCxpPWYqZCxrPWMqaCxtPWMqZCxiWzBdPWgqZyxiWzRdPW0tYSplLGJbOF09ayplK2ksYlsxXT1lLGJbNV09ZipnLGJbOV09LWMqZyxiWzJdPS1kKmcsYls2XT1pKmUrayxiWzEwXT1hLW0qZSk6XCJYWllcIj09PWEub3JkZXImJihhPWYqaCxpPWYqZCxrPWMqaCxtPWMqZCxiWzBdPVxuaCpnLGJbNF09LWUsYls4XT1kKmcsYlsxXT1hKmUrbSxiWzVdPWYqZyxiWzldPWkqZS1rLGJbMl09ayplLWksYls2XT1jKmcsYlsxMF09bSplK2EpO2JbM109MDtiWzddPTA7YlsxMV09MDtiWzEyXT0wO2JbMTNdPTA7YlsxNF09MDtiWzE1XT0xO3JldHVybiB0aGlzfSxzZXRSb3RhdGlvbkZyb21RdWF0ZXJuaW9uOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIkRFUFJFQ0FURUQ6IE1hdHJpeDQncyAuc2V0Um90YXRpb25Gcm9tUXVhdGVybmlvbigpIGhhcyBiZWVuIGRlcHJlY2F0ZWQgaW4gZmF2b3Igb2YgbWFrZVJvdGF0aW9uRnJvbVF1YXRlcm5pb24uICBQbGVhc2UgdXBkYXRlIHlvdXIgY29kZS5cIik7cmV0dXJuIHRoaXMubWFrZVJvdGF0aW9uRnJvbVF1YXRlcm5pb24oYSl9LG1ha2VSb3RhdGlvbkZyb21RdWF0ZXJuaW9uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZWxlbWVudHMsYz1hLngsZD1hLnksZT1hLnosZj1hLncsaD1jK2MsZz1kK2QsaT1lK2UsYT1jKmgsaz1jKmcsYz1cbmMqaSxtPWQqZyxkPWQqaSxlPWUqaSxoPWYqaCxnPWYqZyxmPWYqaTtiWzBdPTEtKG0rZSk7Yls0XT1rLWY7Yls4XT1jK2c7YlsxXT1rK2Y7Yls1XT0xLShhK2UpO2JbOV09ZC1oO2JbMl09Yy1nO2JbNl09ZCtoO2JbMTBdPTEtKGErbSk7YlszXT0wO2JbN109MDtiWzExXT0wO2JbMTJdPTA7YlsxM109MDtiWzE0XT0wO2JbMTVdPTE7cmV0dXJuIHRoaXN9LGxvb2tBdDpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzLGI9bmV3IFRIUkVFLlZlY3RvcjMsYz1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oZCxlLGYpe3ZhciBoPXRoaXMuZWxlbWVudHM7Yy5zdWJWZWN0b3JzKGQsZSkubm9ybWFsaXplKCk7MD09PWMubGVuZ3RoKCkmJihjLno9MSk7YS5jcm9zc1ZlY3RvcnMoZixjKS5ub3JtYWxpemUoKTswPT09YS5sZW5ndGgoKSYmKGMueCs9MUUtNCxhLmNyb3NzVmVjdG9ycyhmLGMpLm5vcm1hbGl6ZSgpKTtiLmNyb3NzVmVjdG9ycyhjLGEpO2hbMF09YS54O1xuaFs0XT1iLng7aFs4XT1jLng7aFsxXT1hLnk7aFs1XT1iLnk7aFs5XT1jLnk7aFsyXT1hLno7aFs2XT1iLno7aFsxMF09Yy56O3JldHVybiB0aGlzfX0oKSxtdWx0aXBseTpmdW5jdGlvbihhLGIpe3JldHVybiB2b2lkIDAhPT1iPyhjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEOiBNYXRyaXg0J3MgLm11bHRpcGx5KCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAubXVsdGlwbHlNYXRyaWNlcyggYSwgYiApIGluc3RlYWQuXCIpLHRoaXMubXVsdGlwbHlNYXRyaWNlcyhhLGIpKTp0aGlzLm11bHRpcGx5TWF0cmljZXModGhpcyxhKX0sbXVsdGlwbHlNYXRyaWNlczpmdW5jdGlvbihhLGIpe3ZhciBjPWEuZWxlbWVudHMsZD1iLmVsZW1lbnRzLGU9dGhpcy5lbGVtZW50cyxmPWNbMF0saD1jWzRdLGc9Y1s4XSxpPWNbMTJdLGs9Y1sxXSxtPWNbNV0sbD1jWzldLHA9Y1sxM10sdD1jWzJdLHM9Y1s2XSxxPWNbMTBdLG49Y1sxNF0sdT1jWzNdLHI9Y1s3XSx2PWNbMTFdLGM9Y1sxNV0sXG56PWRbMF0sRz1kWzRdLHc9ZFs4XSx5PWRbMTJdLEU9ZFsxXSxBPWRbNV0sSz1kWzldLEQ9ZFsxM10sRj1kWzJdLE89ZFs2XSx4PWRbMTBdLEk9ZFsxNF0sQj1kWzNdLE09ZFs3XSxKPWRbMTFdLGQ9ZFsxNV07ZVswXT1mKnoraCpFK2cqRitpKkI7ZVs0XT1mKkcraCpBK2cqTytpKk07ZVs4XT1mKncraCpLK2cqeCtpKko7ZVsxMl09Zip5K2gqRCtnKkkraSpkO2VbMV09ayp6K20qRStsKkYrcCpCO2VbNV09aypHK20qQStsKk8rcCpNO2VbOV09ayp3K20qSytsKngrcCpKO2VbMTNdPWsqeSttKkQrbCpJK3AqZDtlWzJdPXQqeitzKkUrcSpGK24qQjtlWzZdPXQqRytzKkErcSpPK24qTTtlWzEwXT10KncrcypLK3EqeCtuKko7ZVsxNF09dCp5K3MqRCtxKkkrbipkO2VbM109dSp6K3IqRSt2KkYrYypCO2VbN109dSpHK3IqQSt2Kk8rYypNO2VbMTFdPXUqdytyKksrdip4K2MqSjtlWzE1XT11KnkrcipEK3YqSStjKmQ7cmV0dXJuIHRoaXN9LG11bHRpcGx5VG9BcnJheTpmdW5jdGlvbihhLGIsXG5jKXt2YXIgZD10aGlzLmVsZW1lbnRzO3RoaXMubXVsdGlwbHlNYXRyaWNlcyhhLGIpO2NbMF09ZFswXTtjWzFdPWRbMV07Y1syXT1kWzJdO2NbM109ZFszXTtjWzRdPWRbNF07Y1s1XT1kWzVdO2NbNl09ZFs2XTtjWzddPWRbN107Y1s4XT1kWzhdO2NbOV09ZFs5XTtjWzEwXT1kWzEwXTtjWzExXT1kWzExXTtjWzEyXT1kWzEyXTtjWzEzXT1kWzEzXTtjWzE0XT1kWzE0XTtjWzE1XT1kWzE1XTtyZXR1cm4gdGhpc30sbXVsdGlwbHlTY2FsYXI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5lbGVtZW50cztiWzBdKj1hO2JbNF0qPWE7Yls4XSo9YTtiWzEyXSo9YTtiWzFdKj1hO2JbNV0qPWE7Yls5XSo9YTtiWzEzXSo9YTtiWzJdKj1hO2JbNl0qPWE7YlsxMF0qPWE7YlsxNF0qPWE7YlszXSo9YTtiWzddKj1hO2JbMTFdKj1hO2JbMTVdKj1hO3JldHVybiB0aGlzfSxtdWx0aXBseVZlY3RvcjM6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiREVQUkVDQVRFRDogTWF0cml4NCdzIC5tdWx0aXBseVZlY3RvcjMoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgdmVjdG9yLmFwcGx5TWF0cml4NCggbWF0cml4ICkgb3IgdmVjdG9yLmFwcGx5UHJvamVjdGlvbiggbWF0cml4ICkgaW5zdGVhZC5cIik7XG5yZXR1cm4gYS5hcHBseVByb2plY3Rpb24odGhpcyl9LG11bHRpcGx5VmVjdG9yNDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEOiBNYXRyaXg0J3MgLm11bHRpcGx5VmVjdG9yNCgpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSB2ZWN0b3IuYXBwbHlNYXRyaXg0KCBtYXRyaXggKSBpbnN0ZWFkLlwiKTtyZXR1cm4gYS5hcHBseU1hdHJpeDQodGhpcyl9LG11bHRpcGx5VmVjdG9yM0FycmF5OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGIpe2Zvcih2YXIgYz0wLGQ9Yi5sZW5ndGg7YzxkO2MrPTMpYS54PWJbY10sYS55PWJbYysxXSxhLno9YltjKzJdLGEuYXBwbHlQcm9qZWN0aW9uKHRoaXMpLGJbY109YS54LGJbYysxXT1hLnksYltjKzJdPWEuejtyZXR1cm4gYn19KCkscm90YXRlQXhpczpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEOiBNYXRyaXg0J3MgLnJvdGF0ZUF4aXMoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgVmVjdG9yMy50cmFuc2Zvcm1EaXJlY3Rpb24oIG1hdHJpeCApIGluc3RlYWQuXCIpO1xuYS50cmFuc2Zvcm1EaXJlY3Rpb24odGhpcyl9LGNyb3NzVmVjdG9yOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIkRFUFJFQ0FURUQ6IE1hdHJpeDQncyAuY3Jvc3NWZWN0b3IoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgdmVjdG9yLmFwcGx5TWF0cml4NCggbWF0cml4ICkgaW5zdGVhZC5cIik7cmV0dXJuIGEuYXBwbHlNYXRyaXg0KHRoaXMpfSxkZXRlcm1pbmFudDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZWxlbWVudHMsYj1hWzBdLGM9YVs0XSxkPWFbOF0sZT1hWzEyXSxmPWFbMV0saD1hWzVdLGc9YVs5XSxpPWFbMTNdLGs9YVsyXSxtPWFbNl0sbD1hWzEwXSxwPWFbMTRdO3JldHVybiBhWzNdKigrZSpnKm0tZCppKm0tZSpoKmwrYyppKmwrZCpoKnAtYypnKnApK2FbN10qKCtiKmcqcC1iKmkqbCtlKmYqbC1kKmYqcCtkKmkqay1lKmcqaykrYVsxMV0qKCtiKmkqbS1iKmgqcC1lKmYqbStjKmYqcCtlKmgqay1jKmkqaykrYVsxNV0qKC1kKmgqay1iKmcqbStiKmgqbCtkKmYqbS1jKmYqXG5sK2MqZyprKX0sdHJhbnNwb3NlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5lbGVtZW50cyxiO2I9YVsxXTthWzFdPWFbNF07YVs0XT1iO2I9YVsyXTthWzJdPWFbOF07YVs4XT1iO2I9YVs2XTthWzZdPWFbOV07YVs5XT1iO2I9YVszXTthWzNdPWFbMTJdO2FbMTJdPWI7Yj1hWzddO2FbN109YVsxM107YVsxM109YjtiPWFbMTFdO2FbMTFdPWFbMTRdO2FbMTRdPWI7cmV0dXJuIHRoaXN9LGZsYXR0ZW5Ub0FycmF5OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZWxlbWVudHM7YVswXT1iWzBdO2FbMV09YlsxXTthWzJdPWJbMl07YVszXT1iWzNdO2FbNF09Yls0XTthWzVdPWJbNV07YVs2XT1iWzZdO2FbN109Yls3XTthWzhdPWJbOF07YVs5XT1iWzldO2FbMTBdPWJbMTBdO2FbMTFdPWJbMTFdO2FbMTJdPWJbMTJdO2FbMTNdPWJbMTNdO2FbMTRdPWJbMTRdO2FbMTVdPWJbMTVdO3JldHVybiBhfSxmbGF0dGVuVG9BcnJheU9mZnNldDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZWxlbWVudHM7XG5hW2JdPWNbMF07YVtiKzFdPWNbMV07YVtiKzJdPWNbMl07YVtiKzNdPWNbM107YVtiKzRdPWNbNF07YVtiKzVdPWNbNV07YVtiKzZdPWNbNl07YVtiKzddPWNbN107YVtiKzhdPWNbOF07YVtiKzldPWNbOV07YVtiKzEwXT1jWzEwXTthW2IrMTFdPWNbMTFdO2FbYisxMl09Y1sxMl07YVtiKzEzXT1jWzEzXTthW2IrMTRdPWNbMTRdO2FbYisxNV09Y1sxNV07cmV0dXJuIGF9LGdldFBvc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiREVQUkVDQVRFRDogTWF0cml4NCdzIC5nZXRQb3NpdGlvbigpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBWZWN0b3IzLnNldEZyb21NYXRyaXhQb3NpdGlvbiggbWF0cml4ICkgaW5zdGVhZC5cIik7dmFyIGI9dGhpcy5lbGVtZW50cztyZXR1cm4gYS5zZXQoYlsxMl0sYlsxM10sYlsxNF0pfX0oKSxzZXRQb3NpdGlvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmVsZW1lbnRzO1xuYlsxMl09YS54O2JbMTNdPWEueTtiWzE0XT1hLno7cmV0dXJuIHRoaXN9LGdldEludmVyc2U6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmVsZW1lbnRzLGQ9YS5lbGVtZW50cyxlPWRbMF0sZj1kWzRdLGg9ZFs4XSxnPWRbMTJdLGk9ZFsxXSxrPWRbNV0sbT1kWzldLGw9ZFsxM10scD1kWzJdLHQ9ZFs2XSxzPWRbMTBdLHE9ZFsxNF0sbj1kWzNdLHU9ZFs3XSxyPWRbMTFdLGQ9ZFsxNV07Y1swXT1tKnEqdS1sKnMqdStsKnQqci1rKnEqci1tKnQqZCtrKnMqZDtjWzRdPWcqcyp1LWgqcSp1LWcqdCpyK2YqcSpyK2gqdCpkLWYqcypkO2NbOF09aCpsKnUtZyptKnUrZyprKnItZipsKnItaCprKmQrZiptKmQ7Y1sxMl09ZyptKnQtaCpsKnQtZyprKnMrZipsKnMraCprKnEtZiptKnE7Y1sxXT1sKnMqbi1tKnEqbi1sKnAqcitpKnEqcittKnAqZC1pKnMqZDtjWzVdPWgqcSpuLWcqcypuK2cqcCpyLWUqcSpyLWgqcCpkK2UqcypkO2NbOV09ZyptKm4taCpsKm4tZyppKnIrZSpsKnIraCppKmQtXG5lKm0qZDtjWzEzXT1oKmwqcC1nKm0qcCtnKmkqcy1lKmwqcy1oKmkqcStlKm0qcTtjWzJdPWsqcSpuLWwqdCpuK2wqcCp1LWkqcSp1LWsqcCpkK2kqdCpkO2NbNl09Zyp0Km4tZipxKm4tZypwKnUrZSpxKnUrZipwKmQtZSp0KmQ7Y1sxMF09ZipsKm4tZyprKm4rZyppKnUtZSpsKnUtZippKmQrZSprKmQ7Y1sxNF09ZyprKnAtZipsKnAtZyppKnQrZSpsKnQrZippKnEtZSprKnE7Y1szXT1tKnQqbi1rKnMqbi1tKnAqdStpKnMqdStrKnAqci1pKnQqcjtjWzddPWYqcypuLWgqdCpuK2gqcCp1LWUqcyp1LWYqcCpyK2UqdCpyO2NbMTFdPWgqaypuLWYqbSpuLWgqaSp1K2UqbSp1K2YqaSpyLWUqaypyO2NbMTVdPWYqbSpwLWgqaypwK2gqaSp0LWUqbSp0LWYqaSpzK2UqaypzO2M9ZSpjWzBdK2kqY1s0XStwKmNbOF0rbipjWzEyXTtpZigwPT1jKXtpZihiKXRocm93IEVycm9yKFwiTWF0cml4NC5nZXRJbnZlcnNlKCk6IGNhbid0IGludmVydCBtYXRyaXgsIGRldGVybWluYW50IGlzIDBcIik7Y29uc29sZS53YXJuKFwiTWF0cml4NC5nZXRJbnZlcnNlKCk6IGNhbid0IGludmVydCBtYXRyaXgsIGRldGVybWluYW50IGlzIDBcIik7XG50aGlzLmlkZW50aXR5KCk7cmV0dXJuIHRoaXN9dGhpcy5tdWx0aXBseVNjYWxhcigxL2MpO3JldHVybiB0aGlzfSx0cmFuc2xhdGU6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEOiBNYXRyaXg0J3MgLnRyYW5zbGF0ZSgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxyb3RhdGVYOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiREVQUkVDQVRFRDogTWF0cml4NCdzIC5yb3RhdGVYKCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LHJvdGF0ZVk6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEOiBNYXRyaXg0J3MgLnJvdGF0ZVkoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0scm90YXRlWjpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIkRFUFJFQ0FURUQ6IE1hdHJpeDQncyAucm90YXRlWigpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxyb3RhdGVCeUF4aXM6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEOiBNYXRyaXg0J3MgLnJvdGF0ZUJ5QXhpcygpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxcbnNjYWxlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZWxlbWVudHMsYz1hLngsZD1hLnksYT1hLno7YlswXSo9YztiWzRdKj1kO2JbOF0qPWE7YlsxXSo9YztiWzVdKj1kO2JbOV0qPWE7YlsyXSo9YztiWzZdKj1kO2JbMTBdKj1hO2JbM10qPWM7Yls3XSo9ZDtiWzExXSo9YTtyZXR1cm4gdGhpc30sZ2V0TWF4U2NhbGVPbkF4aXM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVsZW1lbnRzO3JldHVybiBNYXRoLnNxcnQoTWF0aC5tYXgoYVswXSphWzBdK2FbMV0qYVsxXSthWzJdKmFbMl0sTWF0aC5tYXgoYVs0XSphWzRdK2FbNV0qYVs1XSthWzZdKmFbNl0sYVs4XSphWzhdK2FbOV0qYVs5XSthWzEwXSphWzEwXSkpKX0sbWFrZVRyYW5zbGF0aW9uOmZ1bmN0aW9uKGEsYixjKXt0aGlzLnNldCgxLDAsMCxhLDAsMSwwLGIsMCwwLDEsYywwLDAsMCwxKTtyZXR1cm4gdGhpc30sbWFrZVJvdGF0aW9uWDpmdW5jdGlvbihhKXt2YXIgYj1NYXRoLmNvcyhhKSxhPU1hdGguc2luKGEpO3RoaXMuc2V0KDEsXG4wLDAsMCwwLGIsLWEsMCwwLGEsYiwwLDAsMCwwLDEpO3JldHVybiB0aGlzfSxtYWtlUm90YXRpb25ZOmZ1bmN0aW9uKGEpe3ZhciBiPU1hdGguY29zKGEpLGE9TWF0aC5zaW4oYSk7dGhpcy5zZXQoYiwwLGEsMCwwLDEsMCwwLC1hLDAsYiwwLDAsMCwwLDEpO3JldHVybiB0aGlzfSxtYWtlUm90YXRpb25aOmZ1bmN0aW9uKGEpe3ZhciBiPU1hdGguY29zKGEpLGE9TWF0aC5zaW4oYSk7dGhpcy5zZXQoYiwtYSwwLDAsYSxiLDAsMCwwLDAsMSwwLDAsMCwwLDEpO3JldHVybiB0aGlzfSxtYWtlUm90YXRpb25BeGlzOmZ1bmN0aW9uKGEsYil7dmFyIGM9TWF0aC5jb3MoYiksZD1NYXRoLnNpbihiKSxlPTEtYyxmPWEueCxoPWEueSxnPWEueixpPWUqZixrPWUqaDt0aGlzLnNldChpKmYrYyxpKmgtZCpnLGkqZytkKmgsMCxpKmgrZCpnLGsqaCtjLGsqZy1kKmYsMCxpKmctZCpoLGsqZytkKmYsZSpnKmcrYywwLDAsMCwwLDEpO3JldHVybiB0aGlzfSxtYWtlU2NhbGU6ZnVuY3Rpb24oYSxiLGMpe3RoaXMuc2V0KGEsXG4wLDAsMCwwLGIsMCwwLDAsMCxjLDAsMCwwLDAsMSk7cmV0dXJuIHRoaXN9LGNvbXBvc2U6ZnVuY3Rpb24oYSxiLGMpe3RoaXMubWFrZVJvdGF0aW9uRnJvbVF1YXRlcm5pb24oYik7dGhpcy5zY2FsZShjKTt0aGlzLnNldFBvc2l0aW9uKGEpO3JldHVybiB0aGlzfSxkZWNvbXBvc2U6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMyxiPW5ldyBUSFJFRS5NYXRyaXg0O3JldHVybiBmdW5jdGlvbihjLGQsZSl7dmFyIGY9dGhpcy5lbGVtZW50cyxoPWEuc2V0KGZbMF0sZlsxXSxmWzJdKS5sZW5ndGgoKSxnPWEuc2V0KGZbNF0sZls1XSxmWzZdKS5sZW5ndGgoKSxpPWEuc2V0KGZbOF0sZls5XSxmWzEwXSkubGVuZ3RoKCk7Yy54PWZbMTJdO2MueT1mWzEzXTtjLno9ZlsxNF07Yi5lbGVtZW50cy5zZXQodGhpcy5lbGVtZW50cyk7dmFyIGM9MS9oLGY9MS9nLGs9MS9pO2IuZWxlbWVudHNbMF0qPWM7Yi5lbGVtZW50c1sxXSo9YztiLmVsZW1lbnRzWzJdKj1jO2IuZWxlbWVudHNbNF0qPVxuZjtiLmVsZW1lbnRzWzVdKj1mO2IuZWxlbWVudHNbNl0qPWY7Yi5lbGVtZW50c1s4XSo9aztiLmVsZW1lbnRzWzldKj1rO2IuZWxlbWVudHNbMTBdKj1rO2Quc2V0RnJvbVJvdGF0aW9uTWF0cml4KGIpO2UueD1oO2UueT1nO2Uuej1pO3JldHVybiB0aGlzfX0oKSxtYWtlRnJ1c3R1bTpmdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGg9dGhpcy5lbGVtZW50cztoWzBdPTIqZS8oYi1hKTtoWzRdPTA7aFs4XT0oYithKS8oYi1hKTtoWzEyXT0wO2hbMV09MDtoWzVdPTIqZS8oZC1jKTtoWzldPShkK2MpLyhkLWMpO2hbMTNdPTA7aFsyXT0wO2hbNl09MDtoWzEwXT0tKGYrZSkvKGYtZSk7aFsxNF09LTIqZiplLyhmLWUpO2hbM109MDtoWzddPTA7aFsxMV09LTE7aFsxNV09MDtyZXR1cm4gdGhpc30sbWFrZVBlcnNwZWN0aXZlOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBhPWMqTWF0aC50YW4oVEhSRUUuTWF0aC5kZWdUb1JhZCgwLjUqYSkpLGU9LWE7cmV0dXJuIHRoaXMubWFrZUZydXN0dW0oZSpcbmIsYSpiLGUsYSxjLGQpfSxtYWtlT3J0aG9ncmFwaGljOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2YXIgaD10aGlzLmVsZW1lbnRzLGc9Yi1hLGk9Yy1kLGs9Zi1lO2hbMF09Mi9nO2hbNF09MDtoWzhdPTA7aFsxMl09LSgoYithKS9nKTtoWzFdPTA7aFs1XT0yL2k7aFs5XT0wO2hbMTNdPS0oKGMrZCkvaSk7aFsyXT0wO2hbNl09MDtoWzEwXT0tMi9rO2hbMTRdPS0oKGYrZSkvayk7aFszXT0wO2hbN109MDtoWzExXT0wO2hbMTVdPTE7cmV0dXJuIHRoaXN9LGZyb21BcnJheTpmdW5jdGlvbihhKXt0aGlzLmVsZW1lbnRzLnNldChhKTtyZXR1cm4gdGhpc30sdG9BcnJheTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZWxlbWVudHM7cmV0dXJuW2FbMF0sYVsxXSxhWzJdLGFbM10sYVs0XSxhWzVdLGFbNl0sYVs3XSxhWzhdLGFbOV0sYVsxMF0sYVsxMV0sYVsxMl0sYVsxM10sYVsxNF0sYVsxNV1dfSxjbG9uZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZWxlbWVudHM7cmV0dXJuIG5ldyBUSFJFRS5NYXRyaXg0KGFbMF0sXG5hWzRdLGFbOF0sYVsxMl0sYVsxXSxhWzVdLGFbOV0sYVsxM10sYVsyXSxhWzZdLGFbMTBdLGFbMTRdLGFbM10sYVs3XSxhWzExXSxhWzE1XSl9fTtUSFJFRS5SYXk9ZnVuY3Rpb24oYSxiKXt0aGlzLm9yaWdpbj12b2lkIDAhPT1hP2E6bmV3IFRIUkVFLlZlY3RvcjM7dGhpcy5kaXJlY3Rpb249dm9pZCAwIT09Yj9iOm5ldyBUSFJFRS5WZWN0b3IzfTtcblRIUkVFLlJheS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLlJheSxzZXQ6ZnVuY3Rpb24oYSxiKXt0aGlzLm9yaWdpbi5jb3B5KGEpO3RoaXMuZGlyZWN0aW9uLmNvcHkoYik7cmV0dXJuIHRoaXN9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5vcmlnaW4uY29weShhLm9yaWdpbik7dGhpcy5kaXJlY3Rpb24uY29weShhLmRpcmVjdGlvbik7cmV0dXJuIHRoaXN9LGF0OmZ1bmN0aW9uKGEsYil7cmV0dXJuKGJ8fG5ldyBUSFJFRS5WZWN0b3IzKS5jb3B5KHRoaXMuZGlyZWN0aW9uKS5tdWx0aXBseVNjYWxhcihhKS5hZGQodGhpcy5vcmlnaW4pfSxyZWNhc3Q6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oYil7dGhpcy5vcmlnaW4uY29weSh0aGlzLmF0KGIsYSkpO3JldHVybiB0aGlzfX0oKSxjbG9zZXN0UG9pbnRUb1BvaW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8bmV3IFRIUkVFLlZlY3RvcjM7Yy5zdWJWZWN0b3JzKGEsdGhpcy5vcmlnaW4pO1xudmFyIGQ9Yy5kb3QodGhpcy5kaXJlY3Rpb24pO3JldHVybiAwPmQ/Yy5jb3B5KHRoaXMub3JpZ2luKTpjLmNvcHkodGhpcy5kaXJlY3Rpb24pLm11bHRpcGx5U2NhbGFyKGQpLmFkZCh0aGlzLm9yaWdpbil9LGRpc3RhbmNlVG9Qb2ludDpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihiKXt2YXIgYz1hLnN1YlZlY3RvcnMoYix0aGlzLm9yaWdpbikuZG90KHRoaXMuZGlyZWN0aW9uKTtpZigwPmMpcmV0dXJuIHRoaXMub3JpZ2luLmRpc3RhbmNlVG8oYik7YS5jb3B5KHRoaXMuZGlyZWN0aW9uKS5tdWx0aXBseVNjYWxhcihjKS5hZGQodGhpcy5vcmlnaW4pO3JldHVybiBhLmRpc3RhbmNlVG8oYil9fSgpLGRpc3RhbmNlU3FUb1NlZ21lbnQ6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9YS5jbG9uZSgpLmFkZChiKS5tdWx0aXBseVNjYWxhcigwLjUpLGY9Yi5jbG9uZSgpLnN1YihhKS5ub3JtYWxpemUoKSxoPTAuNSphLmRpc3RhbmNlVG8oYiksXG5nPXRoaXMub3JpZ2luLmNsb25lKCkuc3ViKGUpLGE9LXRoaXMuZGlyZWN0aW9uLmRvdChmKSxiPWcuZG90KHRoaXMuZGlyZWN0aW9uKSxpPS1nLmRvdChmKSxrPWcubGVuZ3RoU3EoKSxtPU1hdGguYWJzKDEtYSphKSxsLHA7MDw9bT8oZz1hKmktYixsPWEqYi1pLHA9aCptLDA8PWc/bD49LXA/bDw9cD8oaD0xL20sZyo9aCxsKj1oLGE9ZyooZythKmwrMipiKStsKihhKmcrbCsyKmkpK2spOihsPWgsZz1NYXRoLm1heCgwLC0oYSpsK2IpKSxhPS1nKmcrbCoobCsyKmkpK2spOihsPS1oLGc9TWF0aC5tYXgoMCwtKGEqbCtiKSksYT0tZypnK2wqKGwrMippKStrKTpsPD0tcD8oZz1NYXRoLm1heCgwLC0oLWEqaCtiKSksbD0wPGc/LWg6TWF0aC5taW4oTWF0aC5tYXgoLWgsLWkpLGgpLGE9LWcqZytsKihsKzIqaSkrayk6bDw9cD8oZz0wLGw9TWF0aC5taW4oTWF0aC5tYXgoLWgsLWkpLGgpLGE9bCoobCsyKmkpK2spOihnPU1hdGgubWF4KDAsLShhKmgrYikpLGw9MDxnP2g6TWF0aC5taW4oTWF0aC5tYXgoLWgsXG4taSksaCksYT0tZypnK2wqKGwrMippKStrKSk6KGw9MDxhPy1oOmgsZz1NYXRoLm1heCgwLC0oYSpsK2IpKSxhPS1nKmcrbCoobCsyKmkpK2spO2MmJmMuY29weSh0aGlzLmRpcmVjdGlvbi5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKGcpLmFkZCh0aGlzLm9yaWdpbikpO2QmJmQuY29weShmLmNsb25lKCkubXVsdGlwbHlTY2FsYXIobCkuYWRkKGUpKTtyZXR1cm4gYX0saXNJbnRlcnNlY3Rpb25TcGhlcmU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZGlzdGFuY2VUb1BvaW50KGEuY2VudGVyKTw9YS5yYWRpdXN9LGlzSW50ZXJzZWN0aW9uUGxhbmU6ZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXN0YW5jZVRvUG9pbnQodGhpcy5vcmlnaW4pO3JldHVybiAwPT09Ynx8MD5hLm5vcm1hbC5kb3QodGhpcy5kaXJlY3Rpb24pKmI/ITA6ITF9LGRpc3RhbmNlVG9QbGFuZTpmdW5jdGlvbihhKXt2YXIgYj1hLm5vcm1hbC5kb3QodGhpcy5kaXJlY3Rpb24pO2lmKDA9PWIpcmV0dXJuIDA9PWEuZGlzdGFuY2VUb1BvaW50KHRoaXMub3JpZ2luKT9cbjA6bnVsbDthPS0odGhpcy5vcmlnaW4uZG90KGEubm9ybWFsKSthLmNvbnN0YW50KS9iO3JldHVybiAwPD1hP2E6bnVsbH0saW50ZXJzZWN0UGxhbmU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmRpc3RhbmNlVG9QbGFuZShhKTtyZXR1cm4gbnVsbD09PWM/bnVsbDp0aGlzLmF0KGMsYil9LGlzSW50ZXJzZWN0aW9uQm94OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBudWxsIT09dGhpcy5pbnRlcnNlY3RCb3goYixhKX19KCksaW50ZXJzZWN0Qm94OmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGYsaDtkPTEvdGhpcy5kaXJlY3Rpb24ueDtmPTEvdGhpcy5kaXJlY3Rpb24ueTtoPTEvdGhpcy5kaXJlY3Rpb24uejt2YXIgZz10aGlzLm9yaWdpbjswPD1kPyhjPShhLm1pbi54LWcueCkqZCxkKj1hLm1heC54LWcueCk6KGM9KGEubWF4LngtZy54KSpkLGQqPWEubWluLngtZy54KTswPD1mPyhlPShhLm1pbi55LWcueSkqZixmKj1cbmEubWF4LnktZy55KTooZT0oYS5tYXgueS1nLnkpKmYsZio9YS5taW4ueS1nLnkpO2lmKGM+Znx8ZT5kKXJldHVybiBudWxsO2lmKGU+Y3x8YyE9PWMpYz1lO2lmKGY8ZHx8ZCE9PWQpZD1mOzA8PWg/KGU9KGEubWluLnotZy56KSpoLGgqPWEubWF4LnotZy56KTooZT0oYS5tYXguei1nLnopKmgsaCo9YS5taW4uei1nLnopO2lmKGM+aHx8ZT5kKXJldHVybiBudWxsO2lmKGU+Y3x8YyE9PWMpYz1lO2lmKGg8ZHx8ZCE9PWQpZD1oO3JldHVybiAwPmQ/bnVsbDp0aGlzLmF0KDA8PWM/YzpkLGIpfSxpbnRlcnNlY3RUcmlhbmdsZTpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzLGI9bmV3IFRIUkVFLlZlY3RvcjMsYz1uZXcgVEhSRUUuVmVjdG9yMyxkPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihlLGYsaCxnLGkpe2Iuc3ViVmVjdG9ycyhmLGUpO2Muc3ViVmVjdG9ycyhoLGUpO2QuY3Jvc3NWZWN0b3JzKGIsYyk7Zj10aGlzLmRpcmVjdGlvbi5kb3QoZCk7aWYoMDxcbmYpe2lmKGcpcmV0dXJuIG51bGw7Zz0xfWVsc2UgaWYoMD5mKWc9LTEsZj0tZjtlbHNlIHJldHVybiBudWxsO2Euc3ViVmVjdG9ycyh0aGlzLm9yaWdpbixlKTtlPWcqdGhpcy5kaXJlY3Rpb24uZG90KGMuY3Jvc3NWZWN0b3JzKGEsYykpO2lmKDA+ZSlyZXR1cm4gbnVsbDtoPWcqdGhpcy5kaXJlY3Rpb24uZG90KGIuY3Jvc3MoYSkpO2lmKDA+aHx8ZStoPmYpcmV0dXJuIG51bGw7ZT0tZyphLmRvdChkKTtyZXR1cm4gMD5lP251bGw6dGhpcy5hdChlL2YsaSl9fSgpLGFwcGx5TWF0cml4NDpmdW5jdGlvbihhKXt0aGlzLmRpcmVjdGlvbi5hZGQodGhpcy5vcmlnaW4pLmFwcGx5TWF0cml4NChhKTt0aGlzLm9yaWdpbi5hcHBseU1hdHJpeDQoYSk7dGhpcy5kaXJlY3Rpb24uc3ViKHRoaXMub3JpZ2luKTt0aGlzLmRpcmVjdGlvbi5ub3JtYWxpemUoKTtyZXR1cm4gdGhpc30sZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiBhLm9yaWdpbi5lcXVhbHModGhpcy5vcmlnaW4pJiZhLmRpcmVjdGlvbi5lcXVhbHModGhpcy5kaXJlY3Rpb24pfSxcbmNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBUSFJFRS5SYXkpLmNvcHkodGhpcyl9fTtUSFJFRS5TcGhlcmU9ZnVuY3Rpb24oYSxiKXt0aGlzLmNlbnRlcj12b2lkIDAhPT1hP2E6bmV3IFRIUkVFLlZlY3RvcjM7dGhpcy5yYWRpdXM9dm9pZCAwIT09Yj9iOjB9O1xuVEhSRUUuU3BoZXJlLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuU3BoZXJlLHNldDpmdW5jdGlvbihhLGIpe3RoaXMuY2VudGVyLmNvcHkoYSk7dGhpcy5yYWRpdXM9YjtyZXR1cm4gdGhpc30sc2V0RnJvbVBvaW50czpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5Cb3gzO3JldHVybiBmdW5jdGlvbihiLGMpe3ZhciBkPXRoaXMuY2VudGVyO3ZvaWQgMCE9PWM/ZC5jb3B5KGMpOmEuc2V0RnJvbVBvaW50cyhiKS5jZW50ZXIoZCk7Zm9yKHZhciBlPTAsZj0wLGg9Yi5sZW5ndGg7ZjxoO2YrKyllPU1hdGgubWF4KGUsZC5kaXN0YW5jZVRvU3F1YXJlZChiW2ZdKSk7dGhpcy5yYWRpdXM9TWF0aC5zcXJ0KGUpO3JldHVybiB0aGlzfX0oKSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMuY2VudGVyLmNvcHkoYS5jZW50ZXIpO3RoaXMucmFkaXVzPWEucmFkaXVzO3JldHVybiB0aGlzfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiAwPj10aGlzLnJhZGl1c30sY29udGFpbnNQb2ludDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXN0YW5jZVRvU3F1YXJlZCh0aGlzLmNlbnRlcik8PVxudGhpcy5yYWRpdXMqdGhpcy5yYWRpdXN9LGRpc3RhbmNlVG9Qb2ludDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXN0YW5jZVRvKHRoaXMuY2VudGVyKS10aGlzLnJhZGl1c30saW50ZXJzZWN0c1NwaGVyZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnJhZGl1cythLnJhZGl1cztyZXR1cm4gYS5jZW50ZXIuZGlzdGFuY2VUb1NxdWFyZWQodGhpcy5jZW50ZXIpPD1iKmJ9LGNsYW1wUG9pbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmNlbnRlci5kaXN0YW5jZVRvU3F1YXJlZChhKSxkPWJ8fG5ldyBUSFJFRS5WZWN0b3IzO2QuY29weShhKTtjPnRoaXMucmFkaXVzKnRoaXMucmFkaXVzJiYoZC5zdWIodGhpcy5jZW50ZXIpLm5vcm1hbGl6ZSgpLGQubXVsdGlwbHlTY2FsYXIodGhpcy5yYWRpdXMpLmFkZCh0aGlzLmNlbnRlcikpO3JldHVybiBkfSxnZXRCb3VuZGluZ0JveDpmdW5jdGlvbihhKXthPWF8fG5ldyBUSFJFRS5Cb3gzO2Euc2V0KHRoaXMuY2VudGVyLHRoaXMuY2VudGVyKTthLmV4cGFuZEJ5U2NhbGFyKHRoaXMucmFkaXVzKTtcbnJldHVybiBhfSxhcHBseU1hdHJpeDQ6ZnVuY3Rpb24oYSl7dGhpcy5jZW50ZXIuYXBwbHlNYXRyaXg0KGEpO3RoaXMucmFkaXVzKj1hLmdldE1heFNjYWxlT25BeGlzKCk7cmV0dXJuIHRoaXN9LHRyYW5zbGF0ZTpmdW5jdGlvbihhKXt0aGlzLmNlbnRlci5hZGQoYSk7cmV0dXJuIHRoaXN9LGVxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gYS5jZW50ZXIuZXF1YWxzKHRoaXMuY2VudGVyKSYmYS5yYWRpdXM9PT10aGlzLnJhZGl1c30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IFRIUkVFLlNwaGVyZSkuY29weSh0aGlzKX19O1RIUkVFLkZydXN0dW09ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3RoaXMucGxhbmVzPVt2b2lkIDAhPT1hP2E6bmV3IFRIUkVFLlBsYW5lLHZvaWQgMCE9PWI/YjpuZXcgVEhSRUUuUGxhbmUsdm9pZCAwIT09Yz9jOm5ldyBUSFJFRS5QbGFuZSx2b2lkIDAhPT1kP2Q6bmV3IFRIUkVFLlBsYW5lLHZvaWQgMCE9PWU/ZTpuZXcgVEhSRUUuUGxhbmUsdm9pZCAwIT09Zj9mOm5ldyBUSFJFRS5QbGFuZV19O1xuVEhSRUUuRnJ1c3R1bS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLkZydXN0dW0sc2V0OmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2YXIgaD10aGlzLnBsYW5lcztoWzBdLmNvcHkoYSk7aFsxXS5jb3B5KGIpO2hbMl0uY29weShjKTtoWzNdLmNvcHkoZCk7aFs0XS5jb3B5KGUpO2hbNV0uY29weShmKTtyZXR1cm4gdGhpc30sY29weTpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5wbGFuZXMsYz0wOzY+YztjKyspYltjXS5jb3B5KGEucGxhbmVzW2NdKTtyZXR1cm4gdGhpc30sc2V0RnJvbU1hdHJpeDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnBsYW5lcyxjPWEuZWxlbWVudHMsYT1jWzBdLGQ9Y1sxXSxlPWNbMl0sZj1jWzNdLGg9Y1s0XSxnPWNbNV0saT1jWzZdLGs9Y1s3XSxtPWNbOF0sbD1jWzldLHA9Y1sxMF0sdD1jWzExXSxzPWNbMTJdLHE9Y1sxM10sbj1jWzE0XSxjPWNbMTVdO2JbMF0uc2V0Q29tcG9uZW50cyhmLWEsay1oLHQtbSxjLXMpLm5vcm1hbGl6ZSgpO2JbMV0uc2V0Q29tcG9uZW50cyhmK1xuYSxrK2gsdCttLGMrcykubm9ybWFsaXplKCk7YlsyXS5zZXRDb21wb25lbnRzKGYrZCxrK2csdCtsLGMrcSkubm9ybWFsaXplKCk7YlszXS5zZXRDb21wb25lbnRzKGYtZCxrLWcsdC1sLGMtcSkubm9ybWFsaXplKCk7Yls0XS5zZXRDb21wb25lbnRzKGYtZSxrLWksdC1wLGMtbikubm9ybWFsaXplKCk7Yls1XS5zZXRDb21wb25lbnRzKGYrZSxrK2ksdCtwLGMrbikubm9ybWFsaXplKCk7cmV0dXJuIHRoaXN9LGludGVyc2VjdHNPYmplY3Q6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuU3BoZXJlO3JldHVybiBmdW5jdGlvbihiKXt2YXIgYz1iLmdlb21ldHJ5O251bGw9PT1jLmJvdW5kaW5nU3BoZXJlJiZjLmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpO2EuY29weShjLmJvdW5kaW5nU3BoZXJlKTthLmFwcGx5TWF0cml4NChiLm1hdHJpeFdvcmxkKTtyZXR1cm4gdGhpcy5pbnRlcnNlY3RzU3BoZXJlKGEpfX0oKSxpbnRlcnNlY3RzU3BoZXJlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLnBsYW5lcyxcbmM9YS5jZW50ZXIsYT0tYS5yYWRpdXMsZD0wOzY+ZDtkKyspaWYoYltkXS5kaXN0YW5jZVRvUG9pbnQoYyk8YSlyZXR1cm4hMTtyZXR1cm4hMH0saW50ZXJzZWN0c0JveDpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzLGI9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGMpe2Zvcih2YXIgZD10aGlzLnBsYW5lcyxlPTA7Nj5lO2UrKyl7dmFyIGY9ZFtlXTthLng9MDxmLm5vcm1hbC54P2MubWluLng6Yy5tYXgueDtiLng9MDxmLm5vcm1hbC54P2MubWF4Lng6Yy5taW4ueDthLnk9MDxmLm5vcm1hbC55P2MubWluLnk6Yy5tYXgueTtiLnk9MDxmLm5vcm1hbC55P2MubWF4Lnk6Yy5taW4ueTthLno9MDxmLm5vcm1hbC56P2MubWluLno6Yy5tYXguejtiLno9MDxmLm5vcm1hbC56P2MubWF4Lno6Yy5taW4uejt2YXIgaD1mLmRpc3RhbmNlVG9Qb2ludChhKSxmPWYuZGlzdGFuY2VUb1BvaW50KGIpO2lmKDA+aCYmMD5mKXJldHVybiExfXJldHVybiEwfX0oKSxjb250YWluc1BvaW50OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1cbnRoaXMucGxhbmVzLGM9MDs2PmM7YysrKWlmKDA+YltjXS5kaXN0YW5jZVRvUG9pbnQoYSkpcmV0dXJuITE7cmV0dXJuITB9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBUSFJFRS5GcnVzdHVtKS5jb3B5KHRoaXMpfX07VEhSRUUuUGxhbmU9ZnVuY3Rpb24oYSxiKXt0aGlzLm5vcm1hbD12b2lkIDAhPT1hP2E6bmV3IFRIUkVFLlZlY3RvcjMoMSwwLDApO3RoaXMuY29uc3RhbnQ9dm9pZCAwIT09Yj9iOjB9O1xuVEhSRUUuUGxhbmUucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5QbGFuZSxzZXQ6ZnVuY3Rpb24oYSxiKXt0aGlzLm5vcm1hbC5jb3B5KGEpO3RoaXMuY29uc3RhbnQ9YjtyZXR1cm4gdGhpc30sc2V0Q29tcG9uZW50czpmdW5jdGlvbihhLGIsYyxkKXt0aGlzLm5vcm1hbC5zZXQoYSxiLGMpO3RoaXMuY29uc3RhbnQ9ZDtyZXR1cm4gdGhpc30sc2V0RnJvbU5vcm1hbEFuZENvcGxhbmFyUG9pbnQ6ZnVuY3Rpb24oYSxiKXt0aGlzLm5vcm1hbC5jb3B5KGEpO3RoaXMuY29uc3RhbnQ9LWIuZG90KHRoaXMubm9ybWFsKTtyZXR1cm4gdGhpc30sc2V0RnJvbUNvcGxhbmFyUG9pbnRzOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjMsYj1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oYyxkLGUpe2Q9YS5zdWJWZWN0b3JzKGUsZCkuY3Jvc3MoYi5zdWJWZWN0b3JzKGMsZCkpLm5vcm1hbGl6ZSgpO3RoaXMuc2V0RnJvbU5vcm1hbEFuZENvcGxhbmFyUG9pbnQoZCxcbmMpO3JldHVybiB0aGlzfX0oKSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMubm9ybWFsLmNvcHkoYS5ub3JtYWwpO3RoaXMuY29uc3RhbnQ9YS5jb25zdGFudDtyZXR1cm4gdGhpc30sbm9ybWFsaXplOmZ1bmN0aW9uKCl7dmFyIGE9MS90aGlzLm5vcm1hbC5sZW5ndGgoKTt0aGlzLm5vcm1hbC5tdWx0aXBseVNjYWxhcihhKTt0aGlzLmNvbnN0YW50Kj1hO3JldHVybiB0aGlzfSxuZWdhdGU6ZnVuY3Rpb24oKXt0aGlzLmNvbnN0YW50Kj0tMTt0aGlzLm5vcm1hbC5uZWdhdGUoKTtyZXR1cm4gdGhpc30sZGlzdGFuY2VUb1BvaW50OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm5vcm1hbC5kb3QoYSkrdGhpcy5jb25zdGFudH0sZGlzdGFuY2VUb1NwaGVyZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5kaXN0YW5jZVRvUG9pbnQoYS5jZW50ZXIpLWEucmFkaXVzfSxwcm9qZWN0UG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5vcnRob1BvaW50KGEsYikuc3ViKGEpLm5lZ2F0ZSgpfSxvcnRob1BvaW50OmZ1bmN0aW9uKGEsXG5iKXt2YXIgYz10aGlzLmRpc3RhbmNlVG9Qb2ludChhKTtyZXR1cm4oYnx8bmV3IFRIUkVFLlZlY3RvcjMpLmNvcHkodGhpcy5ub3JtYWwpLm11bHRpcGx5U2NhbGFyKGMpfSxpc0ludGVyc2VjdGlvbkxpbmU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5kaXN0YW5jZVRvUG9pbnQoYS5zdGFydCksYT10aGlzLmRpc3RhbmNlVG9Qb2ludChhLmVuZCk7cmV0dXJuIDA+YiYmMDxhfHwwPmEmJjA8Yn0saW50ZXJzZWN0TGluZTpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihiLGMpe3ZhciBkPWN8fG5ldyBUSFJFRS5WZWN0b3IzLGU9Yi5kZWx0YShhKSxmPXRoaXMubm9ybWFsLmRvdChlKTtpZigwPT1mKXtpZigwPT10aGlzLmRpc3RhbmNlVG9Qb2ludChiLnN0YXJ0KSlyZXR1cm4gZC5jb3B5KGIuc3RhcnQpfWVsc2UgcmV0dXJuIGY9LShiLnN0YXJ0LmRvdCh0aGlzLm5vcm1hbCkrdGhpcy5jb25zdGFudCkvZiwwPmZ8fDE8Zj92b2lkIDA6ZC5jb3B5KGUpLm11bHRpcGx5U2NhbGFyKGYpLmFkZChiLnN0YXJ0KX19KCksXG5jb3BsYW5hclBvaW50OmZ1bmN0aW9uKGEpe3JldHVybihhfHxuZXcgVEhSRUUuVmVjdG9yMykuY29weSh0aGlzLm5vcm1hbCkubXVsdGlwbHlTY2FsYXIoLXRoaXMuY29uc3RhbnQpfSxhcHBseU1hdHJpeDQ6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMyxiPW5ldyBUSFJFRS5WZWN0b3IzLGM9bmV3IFRIUkVFLk1hdHJpeDM7cmV0dXJuIGZ1bmN0aW9uKGQsZSl7dmFyIGY9ZXx8Yy5nZXROb3JtYWxNYXRyaXgoZCksZj1hLmNvcHkodGhpcy5ub3JtYWwpLmFwcGx5TWF0cml4MyhmKSxoPXRoaXMuY29wbGFuYXJQb2ludChiKTtoLmFwcGx5TWF0cml4NChkKTt0aGlzLnNldEZyb21Ob3JtYWxBbmRDb3BsYW5hclBvaW50KGYsaCk7cmV0dXJuIHRoaXN9fSgpLHRyYW5zbGF0ZTpmdW5jdGlvbihhKXt0aGlzLmNvbnN0YW50LT1hLmRvdCh0aGlzLm5vcm1hbCk7cmV0dXJuIHRoaXN9LGVxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gYS5ub3JtYWwuZXF1YWxzKHRoaXMubm9ybWFsKSYmXG5hLmNvbnN0YW50PT10aGlzLmNvbnN0YW50fSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgVEhSRUUuUGxhbmUpLmNvcHkodGhpcyl9fTtUSFJFRS5NYXRoPXtQSTI6MipNYXRoLlBJLGdlbmVyYXRlVVVJRDpmdW5jdGlvbigpe3ZhciBhPVwiMDEyMzQ1Njc4OUFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpcIi5zcGxpdChcIlwiKSxiPUFycmF5KDM2KSxjPTAsZDtyZXR1cm4gZnVuY3Rpb24oKXtmb3IodmFyIGU9MDszNj5lO2UrKyk4PT1lfHwxMz09ZXx8MTg9PWV8fDIzPT1lP2JbZV09XCItXCI6MTQ9PWU/YltlXT1cIjRcIjooMj49YyYmKGM9MzM1NTQ0MzIrMTY3NzcyMTYqTWF0aC5yYW5kb20oKXwwKSxkPWMmMTUsYz4+PTQsYltlXT1hWzE5PT1lP2QmM3w4OmRdKTtyZXR1cm4gYi5qb2luKFwiXCIpfX0oKSxjbGFtcDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGE8Yj9iOmE+Yz9jOmF9LGNsYW1wQm90dG9tOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE8Yj9iOmF9LG1hcExpbmVhcjpmdW5jdGlvbihhLGIsYyxkLGUpe3JldHVybiBkKyhhLWIpKihlLWQpLyhjLWIpfSxzbW9vdGhzdGVwOmZ1bmN0aW9uKGEsXG5iLGMpe2lmKGE8PWIpcmV0dXJuIDA7aWYoYT49YylyZXR1cm4gMTthPShhLWIpLyhjLWIpO3JldHVybiBhKmEqKDMtMiphKX0sc21vb3RoZXJzdGVwOmZ1bmN0aW9uKGEsYixjKXtpZihhPD1iKXJldHVybiAwO2lmKGE+PWMpcmV0dXJuIDE7YT0oYS1iKS8oYy1iKTtyZXR1cm4gYSphKmEqKGEqKDYqYS0xNSkrMTApfSxyYW5kb20xNjpmdW5jdGlvbigpe3JldHVybig2NTI4MCpNYXRoLnJhbmRvbSgpKzI1NSpNYXRoLnJhbmRvbSgpKS82NTUzNX0scmFuZEludDpmdW5jdGlvbihhLGIpe3JldHVybiBhK01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSooYi1hKzEpKX0scmFuZEZsb2F0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGErTWF0aC5yYW5kb20oKSooYi1hKX0scmFuZEZsb2F0U3ByZWFkOmZ1bmN0aW9uKGEpe3JldHVybiBhKigwLjUtTWF0aC5yYW5kb20oKSl9LHNpZ246ZnVuY3Rpb24oYSl7cmV0dXJuIDA+YT8tMTowPGE/MTowfSxkZWdUb1JhZDpmdW5jdGlvbigpe3ZhciBhPU1hdGguUEkvXG4xODA7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBiKmF9fSgpLHJhZFRvRGVnOmZ1bmN0aW9uKCl7dmFyIGE9MTgwL01hdGguUEk7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBiKmF9fSgpfTtUSFJFRS5TcGxpbmU9ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIsYyxkLGUsZixoKXthPTAuNSooYy1hKTtkPTAuNSooZC1iKTtyZXR1cm4oMiooYi1jKSthK2QpKmgrKC0zKihiLWMpLTIqYS1kKSpmK2EqZStifXRoaXMucG9pbnRzPWE7dmFyIGM9W10sZD17eDowLHk6MCx6OjB9LGUsZixoLGcsaSxrLG0sbCxwO3RoaXMuaW5pdEZyb21BcnJheT1mdW5jdGlvbihhKXt0aGlzLnBvaW50cz1bXTtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKyl0aGlzLnBvaW50c1tiXT17eDphW2JdWzBdLHk6YVtiXVsxXSx6OmFbYl1bMl19fTt0aGlzLmdldFBvaW50PWZ1bmN0aW9uKGEpe2U9KHRoaXMucG9pbnRzLmxlbmd0aC0xKSphO2Y9TWF0aC5mbG9vcihlKTtoPWUtZjtjWzBdPTA9PT1mP2Y6Zi0xO2NbMV09ZjtjWzJdPWY+dGhpcy5wb2ludHMubGVuZ3RoLTI/dGhpcy5wb2ludHMubGVuZ3RoLTE6ZisxO2NbM109Zj50aGlzLnBvaW50cy5sZW5ndGgtMz90aGlzLnBvaW50cy5sZW5ndGgtMTpcbmYrMjtrPXRoaXMucG9pbnRzW2NbMF1dO209dGhpcy5wb2ludHNbY1sxXV07bD10aGlzLnBvaW50c1tjWzJdXTtwPXRoaXMucG9pbnRzW2NbM11dO2c9aCpoO2k9aCpnO2QueD1iKGsueCxtLngsbC54LHAueCxoLGcsaSk7ZC55PWIoay55LG0ueSxsLnkscC55LGgsZyxpKTtkLno9YihrLnosbS56LGwueixwLnosaCxnLGkpO3JldHVybiBkfTt0aGlzLmdldENvbnRyb2xQb2ludHNBcnJheT1mdW5jdGlvbigpe3ZhciBhLGIsYz10aGlzLnBvaW50cy5sZW5ndGgsZD1bXTtmb3IoYT0wO2E8YzthKyspYj10aGlzLnBvaW50c1thXSxkW2FdPVtiLngsYi55LGIuel07cmV0dXJuIGR9O3RoaXMuZ2V0TGVuZ3RoPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlPWI9Yj0wLGY9bmV3IFRIUkVFLlZlY3RvcjMsaD1uZXcgVEhSRUUuVmVjdG9yMyxnPVtdLGk9MDtnWzBdPTA7YXx8KGE9MTAwKTtjPXRoaXMucG9pbnRzLmxlbmd0aCphO2YuY29weSh0aGlzLnBvaW50c1swXSk7Zm9yKGE9MTthPGM7YSsrKWI9XG5hL2MsZD10aGlzLmdldFBvaW50KGIpLGguY29weShkKSxpKz1oLmRpc3RhbmNlVG8oZiksZi5jb3B5KGQpLGIqPXRoaXMucG9pbnRzLmxlbmd0aC0xLGI9TWF0aC5mbG9vcihiKSxiIT1lJiYoZ1tiXT1pLGU9Yik7Z1tnLmxlbmd0aF09aTtyZXR1cm57Y2h1bmtzOmcsdG90YWw6aX19O3RoaXMucmVwYXJhbWV0cml6ZUJ5QXJjTGVuZ3RoPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsaCxnPVtdLGk9bmV3IFRIUkVFLlZlY3RvcjMsaz10aGlzLmdldExlbmd0aCgpO2cucHVzaChpLmNvcHkodGhpcy5wb2ludHNbMF0pLmNsb25lKCkpO2ZvcihiPTE7Yjx0aGlzLnBvaW50cy5sZW5ndGg7YisrKXtjPWsuY2h1bmtzW2JdLWsuY2h1bmtzW2ItMV07aD1NYXRoLmNlaWwoYSpjL2sudG90YWwpO2U9KGItMSkvKHRoaXMucG9pbnRzLmxlbmd0aC0xKTtmPWIvKHRoaXMucG9pbnRzLmxlbmd0aC0xKTtmb3IoYz0xO2M8aC0xO2MrKylkPWUrYyooMS9oKSooZi1lKSxkPXRoaXMuZ2V0UG9pbnQoZCksXG5nLnB1c2goaS5jb3B5KGQpLmNsb25lKCkpO2cucHVzaChpLmNvcHkodGhpcy5wb2ludHNbYl0pLmNsb25lKCkpfXRoaXMucG9pbnRzPWd9fTtUSFJFRS5UcmlhbmdsZT1mdW5jdGlvbihhLGIsYyl7dGhpcy5hPXZvaWQgMCE9PWE/YTpuZXcgVEhSRUUuVmVjdG9yMzt0aGlzLmI9dm9pZCAwIT09Yj9iOm5ldyBUSFJFRS5WZWN0b3IzO3RoaXMuYz12b2lkIDAhPT1jP2M6bmV3IFRIUkVFLlZlY3RvcjN9O1RIUkVFLlRyaWFuZ2xlLm5vcm1hbD1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihiLGMsZCxlKXtlPWV8fG5ldyBUSFJFRS5WZWN0b3IzO2Uuc3ViVmVjdG9ycyhkLGMpO2Euc3ViVmVjdG9ycyhiLGMpO2UuY3Jvc3MoYSk7Yj1lLmxlbmd0aFNxKCk7cmV0dXJuIDA8Yj9lLm11bHRpcGx5U2NhbGFyKDEvTWF0aC5zcXJ0KGIpKTplLnNldCgwLDAsMCl9fSgpO1xuVEhSRUUuVHJpYW5nbGUuYmFyeWNvb3JkRnJvbVBvaW50PWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjMsYj1uZXcgVEhSRUUuVmVjdG9yMyxjPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihkLGUsZixoLGcpe2Euc3ViVmVjdG9ycyhoLGUpO2Iuc3ViVmVjdG9ycyhmLGUpO2Muc3ViVmVjdG9ycyhkLGUpO3ZhciBkPWEuZG90KGEpLGU9YS5kb3QoYiksZj1hLmRvdChjKSxpPWIuZG90KGIpLGg9Yi5kb3QoYyksaz1kKmktZSplLGc9Z3x8bmV3IFRIUkVFLlZlY3RvcjM7aWYoMD09aylyZXR1cm4gZy5zZXQoLTIsLTEsLTEpO2s9MS9rO2k9KGkqZi1lKmgpKms7ZD0oZCpoLWUqZikqaztyZXR1cm4gZy5zZXQoMS1pLWQsZCxpKX19KCk7XG5USFJFRS5UcmlhbmdsZS5jb250YWluc1BvaW50PWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGIsYyxkLGUpe2I9VEhSRUUuVHJpYW5nbGUuYmFyeWNvb3JkRnJvbVBvaW50KGIsYyxkLGUsYSk7cmV0dXJuIDA8PWIueCYmMDw9Yi55JiYxPj1iLngrYi55fX0oKTtcblRIUkVFLlRyaWFuZ2xlLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuVHJpYW5nbGUsc2V0OmZ1bmN0aW9uKGEsYixjKXt0aGlzLmEuY29weShhKTt0aGlzLmIuY29weShiKTt0aGlzLmMuY29weShjKTtyZXR1cm4gdGhpc30sc2V0RnJvbVBvaW50c0FuZEluZGljZXM6ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy5hLmNvcHkoYVtiXSk7dGhpcy5iLmNvcHkoYVtjXSk7dGhpcy5jLmNvcHkoYVtkXSk7cmV0dXJuIHRoaXN9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5hLmNvcHkoYS5hKTt0aGlzLmIuY29weShhLmIpO3RoaXMuYy5jb3B5KGEuYyk7cmV0dXJuIHRoaXN9LGFyZWE6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMyxiPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbigpe2Euc3ViVmVjdG9ycyh0aGlzLmMsdGhpcy5iKTtiLnN1YlZlY3RvcnModGhpcy5hLHRoaXMuYik7cmV0dXJuIDAuNSphLmNyb3NzKGIpLmxlbmd0aCgpfX0oKSxtaWRwb2ludDpmdW5jdGlvbihhKXtyZXR1cm4oYXx8XG5uZXcgVEhSRUUuVmVjdG9yMykuYWRkVmVjdG9ycyh0aGlzLmEsdGhpcy5iKS5hZGQodGhpcy5jKS5tdWx0aXBseVNjYWxhcigxLzMpfSxub3JtYWw6ZnVuY3Rpb24oYSl7cmV0dXJuIFRIUkVFLlRyaWFuZ2xlLm5vcm1hbCh0aGlzLmEsdGhpcy5iLHRoaXMuYyxhKX0scGxhbmU6ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fG5ldyBUSFJFRS5QbGFuZSkuc2V0RnJvbUNvcGxhbmFyUG9pbnRzKHRoaXMuYSx0aGlzLmIsdGhpcy5jKX0sYmFyeWNvb3JkRnJvbVBvaW50OmZ1bmN0aW9uKGEsYil7cmV0dXJuIFRIUkVFLlRyaWFuZ2xlLmJhcnljb29yZEZyb21Qb2ludChhLHRoaXMuYSx0aGlzLmIsdGhpcy5jLGIpfSxjb250YWluc1BvaW50OmZ1bmN0aW9uKGEpe3JldHVybiBUSFJFRS5UcmlhbmdsZS5jb250YWluc1BvaW50KGEsdGhpcy5hLHRoaXMuYix0aGlzLmMpfSxlcXVhbHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuYS5lcXVhbHModGhpcy5hKSYmYS5iLmVxdWFscyh0aGlzLmIpJiZhLmMuZXF1YWxzKHRoaXMuYyl9LFxuY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IFRIUkVFLlRyaWFuZ2xlKS5jb3B5KHRoaXMpfX07VEhSRUUuVmVydGV4PWZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLlZlcnRleCBoYXMgYmVlbiBERVBSRUNBVEVELiBVc2UgVEhSRUUuVmVjdG9yMyBpbnN0ZWFkLlwiKTtyZXR1cm4gYX07VEhSRUUuVVY9ZnVuY3Rpb24oYSxiKXtjb25zb2xlLndhcm4oXCJUSFJFRS5VViBoYXMgYmVlbiBERVBSRUNBVEVELiBVc2UgVEhSRUUuVmVjdG9yMiBpbnN0ZWFkLlwiKTtyZXR1cm4gbmV3IFRIUkVFLlZlY3RvcjIoYSxiKX07VEhSRUUuQ2xvY2s9ZnVuY3Rpb24oYSl7dGhpcy5hdXRvU3RhcnQ9dm9pZCAwIT09YT9hOiEwO3RoaXMuZWxhcHNlZFRpbWU9dGhpcy5vbGRUaW1lPXRoaXMuc3RhcnRUaW1lPTA7dGhpcy5ydW5uaW5nPSExfTtcblRIUkVFLkNsb2NrLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuQ2xvY2ssc3RhcnQ6ZnVuY3Rpb24oKXt0aGlzLm9sZFRpbWU9dGhpcy5zdGFydFRpbWU9dm9pZCAwIT09c2VsZi5wZXJmb3JtYW5jZSYmdm9pZCAwIT09c2VsZi5wZXJmb3JtYW5jZS5ub3c/c2VsZi5wZXJmb3JtYW5jZS5ub3coKTpEYXRlLm5vdygpO3RoaXMucnVubmluZz0hMH0sc3RvcDpmdW5jdGlvbigpe3RoaXMuZ2V0RWxhcHNlZFRpbWUoKTt0aGlzLnJ1bm5pbmc9ITF9LGdldEVsYXBzZWRUaW1lOmZ1bmN0aW9uKCl7dGhpcy5nZXREZWx0YSgpO3JldHVybiB0aGlzLmVsYXBzZWRUaW1lfSxnZXREZWx0YTpmdW5jdGlvbigpe3ZhciBhPTA7dGhpcy5hdXRvU3RhcnQmJiF0aGlzLnJ1bm5pbmcmJnRoaXMuc3RhcnQoKTtpZih0aGlzLnJ1bm5pbmcpe3ZhciBiPXZvaWQgMCE9PXNlbGYucGVyZm9ybWFuY2UmJnZvaWQgMCE9PXNlbGYucGVyZm9ybWFuY2Uubm93P3NlbGYucGVyZm9ybWFuY2Uubm93KCk6RGF0ZS5ub3coKSxcbmE9MC4wMDEqKGItdGhpcy5vbGRUaW1lKTt0aGlzLm9sZFRpbWU9Yjt0aGlzLmVsYXBzZWRUaW1lKz1hfXJldHVybiBhfX07VEhSRUUuRXZlbnREaXNwYXRjaGVyPWZ1bmN0aW9uKCl7fTtcblRIUkVFLkV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLkV2ZW50RGlzcGF0Y2hlcixhcHBseTpmdW5jdGlvbihhKXthLmFkZEV2ZW50TGlzdGVuZXI9VEhSRUUuRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyO2EuaGFzRXZlbnRMaXN0ZW5lcj1USFJFRS5FdmVudERpc3BhdGNoZXIucHJvdG90eXBlLmhhc0V2ZW50TGlzdGVuZXI7YS5yZW1vdmVFdmVudExpc3RlbmVyPVRIUkVFLkV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lcjthLmRpc3BhdGNoRXZlbnQ9VEhSRUUuRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZS5kaXNwYXRjaEV2ZW50fSxhZGRFdmVudExpc3RlbmVyOmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09dGhpcy5fbGlzdGVuZXJzJiYodGhpcy5fbGlzdGVuZXJzPXt9KTt2YXIgYz10aGlzLl9saXN0ZW5lcnM7dm9pZCAwPT09Y1thXSYmKGNbYV09W10pOy0xPT09Y1thXS5pbmRleE9mKGIpJiZcbmNbYV0ucHVzaChiKX0saGFzRXZlbnRMaXN0ZW5lcjpmdW5jdGlvbihhLGIpe2lmKHZvaWQgMD09PXRoaXMuX2xpc3RlbmVycylyZXR1cm4hMTt2YXIgYz10aGlzLl9saXN0ZW5lcnM7cmV0dXJuIHZvaWQgMCE9PWNbYV0mJi0xIT09Y1thXS5pbmRleE9mKGIpPyEwOiExfSxyZW1vdmVFdmVudExpc3RlbmVyOmZ1bmN0aW9uKGEsYil7aWYodm9pZCAwIT09dGhpcy5fbGlzdGVuZXJzKXt2YXIgYz10aGlzLl9saXN0ZW5lcnNbYV07aWYodm9pZCAwIT09Yyl7dmFyIGQ9Yy5pbmRleE9mKGIpOy0xIT09ZCYmYy5zcGxpY2UoZCwxKX19fSxkaXNwYXRjaEV2ZW50OmZ1bmN0aW9uKCl7dmFyIGE9W107cmV0dXJuIGZ1bmN0aW9uKGIpe2lmKHZvaWQgMCE9PXRoaXMuX2xpc3RlbmVycyl7dmFyIGM9dGhpcy5fbGlzdGVuZXJzW2IudHlwZV07aWYodm9pZCAwIT09Yyl7Yi50YXJnZXQ9dGhpcztmb3IodmFyIGQ9Yy5sZW5ndGgsZT0wO2U8ZDtlKyspYVtlXT1jW2VdO2ZvcihlPTA7ZTxkO2UrKylhW2VdLmNhbGwodGhpcyxcbmIpfX19fSgpfTsoZnVuY3Rpb24oYSl7YS5SYXljYXN0ZXI9ZnVuY3Rpb24oYixjLGQsZSl7dGhpcy5yYXk9bmV3IGEuUmF5KGIsYyk7dGhpcy5uZWFyPWR8fDA7dGhpcy5mYXI9ZXx8SW5maW5pdHl9O3ZhciBiPW5ldyBhLlNwaGVyZSxjPW5ldyBhLlJheTtuZXcgYS5QbGFuZTtuZXcgYS5WZWN0b3IzO3ZhciBkPW5ldyBhLlZlY3RvcjMsZT1uZXcgYS5NYXRyaXg0LGY9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5kaXN0YW5jZS1iLmRpc3RhbmNlfSxoPW5ldyBhLlZlY3RvcjMsZz1uZXcgYS5WZWN0b3IzLGk9bmV3IGEuVmVjdG9yMyxrPWZ1bmN0aW9uKGYsbSx0KXtpZihmIGluc3RhbmNlb2YgYS5TcHJpdGUpe2Quc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGYubWF0cml4V29ybGQpO3ZhciBzPW0ucmF5LmRpc3RhbmNlVG9Qb2ludChkKTtpZihzPmYuc2NhbGUueClyZXR1cm4gdDt0LnB1c2goe2Rpc3RhbmNlOnMscG9pbnQ6Zi5wb3NpdGlvbixmYWNlOm51bGwsb2JqZWN0OmZ9KX1lbHNlIGlmKGYgaW5zdGFuY2VvZlxuYS5MT0QpZC5zZXRGcm9tTWF0cml4UG9zaXRpb24oZi5tYXRyaXhXb3JsZCkscz1tLnJheS5vcmlnaW4uZGlzdGFuY2VUbyhkKSxrKGYuZ2V0T2JqZWN0Rm9yRGlzdGFuY2UocyksbSx0KTtlbHNlIGlmKGYgaW5zdGFuY2VvZiBhLk1lc2gpe3ZhciBxPWYuZ2VvbWV0cnk7bnVsbD09PXEuYm91bmRpbmdTcGhlcmUmJnEuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk7Yi5jb3B5KHEuYm91bmRpbmdTcGhlcmUpO2IuYXBwbHlNYXRyaXg0KGYubWF0cml4V29ybGQpO2lmKCExPT09bS5yYXkuaXNJbnRlcnNlY3Rpb25TcGhlcmUoYikpcmV0dXJuIHQ7ZS5nZXRJbnZlcnNlKGYubWF0cml4V29ybGQpO2MuY29weShtLnJheSkuYXBwbHlNYXRyaXg0KGUpO2lmKG51bGwhPT1xLmJvdW5kaW5nQm94JiYhMT09PWMuaXNJbnRlcnNlY3Rpb25Cb3gocS5ib3VuZGluZ0JveCkpcmV0dXJuIHQ7aWYocSBpbnN0YW5jZW9mIGEuQnVmZmVyR2VvbWV0cnkpe3ZhciBuPWYubWF0ZXJpYWw7aWYodm9pZCAwPT09XG5ufHwhMT09PXEuZHluYW1pYylyZXR1cm4gdDt2YXIgdSxyLHY9bS5wcmVjaXNpb247aWYodm9pZCAwIT09cS5hdHRyaWJ1dGVzLmluZGV4KWZvcih2YXIgej1xLm9mZnNldHMsRz1xLmF0dHJpYnV0ZXMuaW5kZXguYXJyYXksdz1xLmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXkseT1xLm9mZnNldHMubGVuZ3RoLEU9cS5hdHRyaWJ1dGVzLmluZGV4LmFycmF5Lmxlbmd0aC8zLEU9MDtFPHk7KytFKWZvcih2YXIgcz16W0VdLnN0YXJ0LEE9eltFXS5pbmRleCxxPXMsSz1zK3pbRV0uY291bnQ7cTxLO3ErPTMpcz1BK0dbcV0sdT1BK0dbcSsxXSxyPUErR1txKzJdLGguc2V0KHdbMypzXSx3WzMqcysxXSx3WzMqcysyXSksZy5zZXQod1szKnVdLHdbMyp1KzFdLHdbMyp1KzJdKSxpLnNldCh3WzMqcl0sd1szKnIrMV0sd1szKnIrMl0pLHU9bi5zaWRlPT09YS5CYWNrU2lkZT9jLmludGVyc2VjdFRyaWFuZ2xlKGksZyxoLCEwKTpjLmludGVyc2VjdFRyaWFuZ2xlKGgsZyxpLG4uc2lkZSE9PWEuRG91YmxlU2lkZSksXG5udWxsIT09dSYmKHUuYXBwbHlNYXRyaXg0KGYubWF0cml4V29ybGQpLHM9bS5yYXkub3JpZ2luLmRpc3RhbmNlVG8odSksczx2fHwoczxtLm5lYXJ8fHM+bS5mYXIpfHx0LnB1c2goe2Rpc3RhbmNlOnMscG9pbnQ6dSxmYWNlOm51bGwsZmFjZUluZGV4Om51bGwsb2JqZWN0OmZ9KSk7ZWxzZXt3PXEuYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheTtFPXEuYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheS5sZW5ndGg7Zm9yKHE9MDtxPEU7cSs9MylzPXEsdT1xKzEscj1xKzIsaC5zZXQod1szKnNdLHdbMypzKzFdLHdbMypzKzJdKSxnLnNldCh3WzMqdV0sd1szKnUrMV0sd1szKnUrMl0pLGkuc2V0KHdbMypyXSx3WzMqcisxXSx3WzMqcisyXSksdT1uLnNpZGU9PT1hLkJhY2tTaWRlP2MuaW50ZXJzZWN0VHJpYW5nbGUoaSxnLGgsITApOmMuaW50ZXJzZWN0VHJpYW5nbGUoaCxnLGksbi5zaWRlIT09YS5Eb3VibGVTaWRlKSxudWxsIT09dSYmKHUuYXBwbHlNYXRyaXg0KGYubWF0cml4V29ybGQpLFxucz1tLnJheS5vcmlnaW4uZGlzdGFuY2VUbyh1KSxzPHZ8fChzPG0ubmVhcnx8cz5tLmZhcil8fHQucHVzaCh7ZGlzdGFuY2U6cyxwb2ludDp1LGZhY2U6bnVsbCxmYWNlSW5kZXg6bnVsbCxvYmplY3Q6Zn0pKX19ZWxzZSBpZihxIGluc3RhbmNlb2YgYS5HZW9tZXRyeSl7Rz1mLm1hdGVyaWFsIGluc3RhbmNlb2YgYS5NZXNoRmFjZU1hdGVyaWFsO3c9ITA9PT1HP2YubWF0ZXJpYWwubWF0ZXJpYWxzOm51bGw7dj1tLnByZWNpc2lvbjt6PXEudmVydGljZXM7eT0wO2ZvcihFPXEuZmFjZXMubGVuZ3RoO3k8RTt5KyspQT1xLmZhY2VzW3ldLG49ITA9PT1HP3dbQS5tYXRlcmlhbEluZGV4XTpmLm1hdGVyaWFsLHZvaWQgMCE9PW4mJihzPXpbQS5hXSx1PXpbQS5iXSxyPXpbQS5jXSx1PW4uc2lkZT09PWEuQmFja1NpZGU/Yy5pbnRlcnNlY3RUcmlhbmdsZShyLHUscywhMCk6Yy5pbnRlcnNlY3RUcmlhbmdsZShzLHUscixuLnNpZGUhPT1hLkRvdWJsZVNpZGUpLG51bGwhPT11JiYodS5hcHBseU1hdHJpeDQoZi5tYXRyaXhXb3JsZCksXG5zPW0ucmF5Lm9yaWdpbi5kaXN0YW5jZVRvKHUpLHM8dnx8KHM8bS5uZWFyfHxzPm0uZmFyKXx8dC5wdXNoKHtkaXN0YW5jZTpzLHBvaW50OnUsZmFjZTpBLGZhY2VJbmRleDp5LG9iamVjdDpmfSkpKX19ZWxzZSBpZihmIGluc3RhbmNlb2YgYS5MaW5lKXt2PW0ubGluZVByZWNpc2lvbjtuPXYqdjtxPWYuZ2VvbWV0cnk7bnVsbD09PXEuYm91bmRpbmdTcGhlcmUmJnEuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk7Yi5jb3B5KHEuYm91bmRpbmdTcGhlcmUpO2IuYXBwbHlNYXRyaXg0KGYubWF0cml4V29ybGQpO2lmKCExPT09bS5yYXkuaXNJbnRlcnNlY3Rpb25TcGhlcmUoYikpcmV0dXJuIHQ7ZS5nZXRJbnZlcnNlKGYubWF0cml4V29ybGQpO2MuY29weShtLnJheSkuYXBwbHlNYXRyaXg0KGUpO2lmKHEgaW5zdGFuY2VvZiBhLkdlb21ldHJ5KXt6PXEudmVydGljZXM7dj16Lmxlbmd0aDt1PW5ldyBhLlZlY3RvcjM7cj1uZXcgYS5WZWN0b3IzO0U9Zi50eXBlPT09YS5MaW5lU3RyaXA/MTpcbjI7Zm9yKHE9MDtxPHYtMTtxKz1FKWMuZGlzdGFuY2VTcVRvU2VnbWVudCh6W3FdLHpbcSsxXSxyLHUpPm58fChzPWMub3JpZ2luLmRpc3RhbmNlVG8ociksczxtLm5lYXJ8fHM+bS5mYXJ8fHQucHVzaCh7ZGlzdGFuY2U6cyxwb2ludDp1LmNsb25lKCkuYXBwbHlNYXRyaXg0KGYubWF0cml4V29ybGQpLGZhY2U6bnVsbCxmYWNlSW5kZXg6bnVsbCxvYmplY3Q6Zn0pKX19fSxtPWZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGE9YS5nZXREZXNjZW5kYW50cygpLGQ9MCxlPWEubGVuZ3RoO2Q8ZTtkKyspayhhW2RdLGIsYyl9O2EuUmF5Y2FzdGVyLnByb3RvdHlwZS5wcmVjaXNpb249MUUtNDthLlJheWNhc3Rlci5wcm90b3R5cGUubGluZVByZWNpc2lvbj0xO2EuUmF5Y2FzdGVyLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oYSxiKXt0aGlzLnJheS5zZXQoYSxiKX07YS5SYXljYXN0ZXIucHJvdG90eXBlLmludGVyc2VjdE9iamVjdD1mdW5jdGlvbihhLGIpe3ZhciBjPVtdOyEwPT09YiYmbShhLFxudGhpcyxjKTtrKGEsdGhpcyxjKTtjLnNvcnQoZik7cmV0dXJuIGN9O2EuUmF5Y2FzdGVyLnByb3RvdHlwZS5pbnRlcnNlY3RPYmplY3RzPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPVtdLGQ9MCxlPWEubGVuZ3RoO2Q8ZTtkKyspayhhW2RdLHRoaXMsYyksITA9PT1iJiZtKGFbZF0sdGhpcyxjKTtjLnNvcnQoZik7cmV0dXJuIGN9fSkoVEhSRUUpO1RIUkVFLk9iamVjdDNEPWZ1bmN0aW9uKCl7dGhpcy5pZD1USFJFRS5PYmplY3QzRElkQ291bnQrKzt0aGlzLnV1aWQ9VEhSRUUuTWF0aC5nZW5lcmF0ZVVVSUQoKTt0aGlzLm5hbWU9XCJcIjt0aGlzLnBhcmVudD12b2lkIDA7dGhpcy5jaGlsZHJlbj1bXTt0aGlzLnVwPW5ldyBUSFJFRS5WZWN0b3IzKDAsMSwwKTt0aGlzLnBvc2l0aW9uPW5ldyBUSFJFRS5WZWN0b3IzO3RoaXMuX3JvdGF0aW9uPW5ldyBUSFJFRS5FdWxlcjt0aGlzLl9xdWF0ZXJuaW9uPW5ldyBUSFJFRS5RdWF0ZXJuaW9uO3RoaXMuc2NhbGU9bmV3IFRIUkVFLlZlY3RvcjMoMSwxLDEpO3RoaXMuX3JvdGF0aW9uLl9xdWF0ZXJuaW9uPXRoaXMucXVhdGVybmlvbjt0aGlzLl9xdWF0ZXJuaW9uLl9ldWxlcj10aGlzLnJvdGF0aW9uO3RoaXMucmVuZGVyRGVwdGg9bnVsbDt0aGlzLnJvdGF0aW9uQXV0b1VwZGF0ZT0hMDt0aGlzLm1hdHJpeD1uZXcgVEhSRUUuTWF0cml4NDt0aGlzLm1hdHJpeFdvcmxkPW5ldyBUSFJFRS5NYXRyaXg0O1xudGhpcy52aXNpYmxlPXRoaXMubWF0cml4V29ybGROZWVkc1VwZGF0ZT10aGlzLm1hdHJpeEF1dG9VcGRhdGU9ITA7dGhpcy5yZWNlaXZlU2hhZG93PXRoaXMuY2FzdFNoYWRvdz0hMTt0aGlzLmZydXN0dW1DdWxsZWQ9ITA7dGhpcy51c2VyRGF0YT17fX07XG5USFJFRS5PYmplY3QzRC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLk9iamVjdDNELGdldCByb3RhdGlvbigpe3JldHVybiB0aGlzLl9yb3RhdGlvbn0sc2V0IHJvdGF0aW9uKGEpe3RoaXMuX3JvdGF0aW9uPWE7dGhpcy5fcm90YXRpb24uX3F1YXRlcm5pb249dGhpcy5fcXVhdGVybmlvbjt0aGlzLl9xdWF0ZXJuaW9uLl9ldWxlcj10aGlzLl9yb3RhdGlvbjt0aGlzLl9yb3RhdGlvbi5fdXBkYXRlUXVhdGVybmlvbigpfSxnZXQgcXVhdGVybmlvbigpe3JldHVybiB0aGlzLl9xdWF0ZXJuaW9ufSxzZXQgcXVhdGVybmlvbihhKXt0aGlzLl9xdWF0ZXJuaW9uPWE7dGhpcy5fcXVhdGVybmlvbi5fZXVsZXI9dGhpcy5fcm90YXRpb247dGhpcy5fcm90YXRpb24uX3F1YXRlcm5pb249dGhpcy5fcXVhdGVybmlvbjt0aGlzLl9xdWF0ZXJuaW9uLl91cGRhdGVFdWxlcigpfSxnZXQgZXVsZXJPcmRlcigpe2NvbnNvbGUud2FybihcIkRFUFJFQ0FURUQ6IE9iamVjdDNEJ3MgLmV1bGVyT3JkZXIgaGFzIGJlZW4gbW92ZWQgdG8gT2JqZWN0M0QncyAucm90YXRpb24ub3JkZXIuXCIpO1xucmV0dXJuIHRoaXMucm90YXRpb24ub3JkZXJ9LHNldCBldWxlck9yZGVyKGEpe2NvbnNvbGUud2FybihcIkRFUFJFQ0FURUQ6IE9iamVjdDNEJ3MgLmV1bGVyT3JkZXIgaGFzIGJlZW4gbW92ZWQgdG8gT2JqZWN0M0QncyAucm90YXRpb24ub3JkZXIuXCIpO3RoaXMucm90YXRpb24ub3JkZXI9YX0sZ2V0IHVzZVF1YXRlcm5pb24oKXtjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEOiBPYmplY3QzRCdzIC51c2VRdWF0ZXJuaW9uIGhhcyBiZWVuIHJlbW92ZWQuIFRoZSBsaWJyYXJ5IG5vdyB1c2VzIHF1YXRlcm5pb25zIGJ5IGRlZmF1bHQuXCIpfSxzZXQgdXNlUXVhdGVybmlvbihhKXtjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEOiBPYmplY3QzRCdzIC51c2VRdWF0ZXJuaW9uIGhhcyBiZWVuIHJlbW92ZWQuIFRoZSBsaWJyYXJ5IG5vdyB1c2VzIHF1YXRlcm5pb25zIGJ5IGRlZmF1bHQuXCIpfSxhcHBseU1hdHJpeDpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5NYXRyaXg0O3JldHVybiBmdW5jdGlvbihiKXt0aGlzLm1hdHJpeC5tdWx0aXBseU1hdHJpY2VzKGIsXG50aGlzLm1hdHJpeCk7dGhpcy5wb3NpdGlvbi5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5tYXRyaXgpO3RoaXMuc2NhbGUuc2V0RnJvbU1hdHJpeFNjYWxlKHRoaXMubWF0cml4KTthLmV4dHJhY3RSb3RhdGlvbih0aGlzLm1hdHJpeCk7dGhpcy5xdWF0ZXJuaW9uLnNldEZyb21Sb3RhdGlvbk1hdHJpeChhKX19KCksc2V0Um90YXRpb25Gcm9tQXhpc0FuZ2xlOmZ1bmN0aW9uKGEsYil7dGhpcy5xdWF0ZXJuaW9uLnNldEZyb21BeGlzQW5nbGUoYSxiKX0sc2V0Um90YXRpb25Gcm9tRXVsZXI6ZnVuY3Rpb24oYSl7dGhpcy5xdWF0ZXJuaW9uLnNldEZyb21FdWxlcihhLCEwKX0sc2V0Um90YXRpb25Gcm9tTWF0cml4OmZ1bmN0aW9uKGEpe3RoaXMucXVhdGVybmlvbi5zZXRGcm9tUm90YXRpb25NYXRyaXgoYSl9LHNldFJvdGF0aW9uRnJvbVF1YXRlcm5pb246ZnVuY3Rpb24oYSl7dGhpcy5xdWF0ZXJuaW9uLmNvcHkoYSl9LHJvdGF0ZU9uQXhpczpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5RdWF0ZXJuaW9uO1xucmV0dXJuIGZ1bmN0aW9uKGIsYyl7YS5zZXRGcm9tQXhpc0FuZ2xlKGIsYyk7dGhpcy5xdWF0ZXJuaW9uLm11bHRpcGx5KGEpO3JldHVybiB0aGlzfX0oKSxyb3RhdGVYOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjMoMSwwLDApO3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gdGhpcy5yb3RhdGVPbkF4aXMoYSxiKX19KCkscm90YXRlWTpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzKDAsMSwwKTtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMucm90YXRlT25BeGlzKGEsYil9fSgpLHJvdGF0ZVo6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMygwLDAsMSk7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLnJvdGF0ZU9uQXhpcyhhLGIpfX0oKSx0cmFuc2xhdGVPbkF4aXM6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oYixjKXthLmNvcHkoYik7YS5hcHBseVF1YXRlcm5pb24odGhpcy5xdWF0ZXJuaW9uKTtcbnRoaXMucG9zaXRpb24uYWRkKGEubXVsdGlwbHlTY2FsYXIoYykpO3JldHVybiB0aGlzfX0oKSx0cmFuc2xhdGU6ZnVuY3Rpb24oYSxiKXtjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEOiBPYmplY3QzRCdzIC50cmFuc2xhdGUoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgLnRyYW5zbGF0ZU9uQXhpcyggYXhpcywgZGlzdGFuY2UgKSBpbnN0ZWFkLiBOb3RlIGFyZ3MgaGF2ZSBiZWVuIGNoYW5nZWQuXCIpO3JldHVybiB0aGlzLnRyYW5zbGF0ZU9uQXhpcyhiLGEpfSx0cmFuc2xhdGVYOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjMoMSwwLDApO3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gdGhpcy50cmFuc2xhdGVPbkF4aXMoYSxiKX19KCksdHJhbnNsYXRlWTpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzKDAsMSwwKTtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMudHJhbnNsYXRlT25BeGlzKGEsYil9fSgpLHRyYW5zbGF0ZVo6ZnVuY3Rpb24oKXt2YXIgYT1cbm5ldyBUSFJFRS5WZWN0b3IzKDAsMCwxKTtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMudHJhbnNsYXRlT25BeGlzKGEsYil9fSgpLGxvY2FsVG9Xb3JsZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5hcHBseU1hdHJpeDQodGhpcy5tYXRyaXhXb3JsZCl9LHdvcmxkVG9Mb2NhbDpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5NYXRyaXg0O3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gYi5hcHBseU1hdHJpeDQoYS5nZXRJbnZlcnNlKHRoaXMubWF0cml4V29ybGQpKX19KCksbG9va0F0OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLk1hdHJpeDQ7cmV0dXJuIGZ1bmN0aW9uKGIpe2EubG9va0F0KGIsdGhpcy5wb3NpdGlvbix0aGlzLnVwKTt0aGlzLnF1YXRlcm5pb24uc2V0RnJvbVJvdGF0aW9uTWF0cml4KGEpfX0oKSxhZGQ6ZnVuY3Rpb24oYSl7aWYoYT09PXRoaXMpY29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0M0QuYWRkOiBBbiBvYmplY3QgY2FuJ3QgYmUgYWRkZWQgYXMgYSBjaGlsZCBvZiBpdHNlbGYuXCIpO1xuZWxzZSBpZihhIGluc3RhbmNlb2YgVEhSRUUuT2JqZWN0M0Qpe3ZvaWQgMCE9PWEucGFyZW50JiZhLnBhcmVudC5yZW1vdmUoYSk7YS5wYXJlbnQ9dGhpczthLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJhZGRlZFwifSk7dGhpcy5jaGlsZHJlbi5wdXNoKGEpO2Zvcih2YXIgYj10aGlzO3ZvaWQgMCE9PWIucGFyZW50OyliPWIucGFyZW50O3ZvaWQgMCE9PWImJmIgaW5zdGFuY2VvZiBUSFJFRS5TY2VuZSYmYi5fX2FkZE9iamVjdChhKX19LHJlbW92ZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNoaWxkcmVuLmluZGV4T2YoYSk7aWYoLTEhPT1iKXthLnBhcmVudD12b2lkIDA7YS5kaXNwYXRjaEV2ZW50KHt0eXBlOlwicmVtb3ZlZFwifSk7dGhpcy5jaGlsZHJlbi5zcGxpY2UoYiwxKTtmb3IoYj10aGlzO3ZvaWQgMCE9PWIucGFyZW50OyliPWIucGFyZW50O3ZvaWQgMCE9PWImJmIgaW5zdGFuY2VvZiBUSFJFRS5TY2VuZSYmYi5fX3JlbW92ZU9iamVjdChhKX19LHRyYXZlcnNlOmZ1bmN0aW9uKGEpe2EodGhpcyk7XG5mb3IodmFyIGI9MCxjPXRoaXMuY2hpbGRyZW4ubGVuZ3RoO2I8YztiKyspdGhpcy5jaGlsZHJlbltiXS50cmF2ZXJzZShhKX0sZ2V0T2JqZWN0QnlJZDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wLGQ9dGhpcy5jaGlsZHJlbi5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9dGhpcy5jaGlsZHJlbltjXTtpZihlLmlkPT09YXx8ITA9PT1iJiYoZT1lLmdldE9iamVjdEJ5SWQoYSxiKSx2b2lkIDAhPT1lKSlyZXR1cm4gZX19LGdldE9iamVjdEJ5TmFtZTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wLGQ9dGhpcy5jaGlsZHJlbi5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9dGhpcy5jaGlsZHJlbltjXTtpZihlLm5hbWU9PT1hfHwhMD09PWImJihlPWUuZ2V0T2JqZWN0QnlOYW1lKGEsYiksdm9pZCAwIT09ZSkpcmV0dXJuIGV9fSxnZXRDaGlsZEJ5TmFtZTpmdW5jdGlvbihhLGIpe2NvbnNvbGUud2FybihcIkRFUFJFQ0FURUQ6IE9iamVjdDNEJ3MgLmdldENoaWxkQnlOYW1lKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuZ2V0T2JqZWN0QnlOYW1lKCkuXCIpO1xucmV0dXJuIHRoaXMuZ2V0T2JqZWN0QnlOYW1lKGEsYil9LGdldERlc2NlbmRhbnRzOmZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEmJihhPVtdKTtBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShhLHRoaXMuY2hpbGRyZW4pO2Zvcih2YXIgYj0wLGM9dGhpcy5jaGlsZHJlbi5sZW5ndGg7YjxjO2IrKyl0aGlzLmNoaWxkcmVuW2JdLmdldERlc2NlbmRhbnRzKGEpO3JldHVybiBhfSx1cGRhdGVNYXRyaXg6ZnVuY3Rpb24oKXt0aGlzLm1hdHJpeC5jb21wb3NlKHRoaXMucG9zaXRpb24sdGhpcy5xdWF0ZXJuaW9uLHRoaXMuc2NhbGUpO3RoaXMubWF0cml4V29ybGROZWVkc1VwZGF0ZT0hMH0sdXBkYXRlTWF0cml4V29ybGQ6ZnVuY3Rpb24oYSl7ITA9PT10aGlzLm1hdHJpeEF1dG9VcGRhdGUmJnRoaXMudXBkYXRlTWF0cml4KCk7aWYoITA9PT10aGlzLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGV8fCEwPT09YSl2b2lkIDA9PT10aGlzLnBhcmVudD90aGlzLm1hdHJpeFdvcmxkLmNvcHkodGhpcy5tYXRyaXgpOlxudGhpcy5tYXRyaXhXb3JsZC5tdWx0aXBseU1hdHJpY2VzKHRoaXMucGFyZW50Lm1hdHJpeFdvcmxkLHRoaXMubWF0cml4KSx0aGlzLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9ITEsYT0hMDtmb3IodmFyIGI9MCxjPXRoaXMuY2hpbGRyZW4ubGVuZ3RoO2I8YztiKyspdGhpcy5jaGlsZHJlbltiXS51cGRhdGVNYXRyaXhXb3JsZChhKX0sY2xvbmU6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1hJiYoYT1uZXcgVEhSRUUuT2JqZWN0M0QpO3ZvaWQgMD09PWImJihiPSEwKTthLm5hbWU9dGhpcy5uYW1lO2EudXAuY29weSh0aGlzLnVwKTthLnBvc2l0aW9uLmNvcHkodGhpcy5wb3NpdGlvbik7YS5xdWF0ZXJuaW9uLmNvcHkodGhpcy5xdWF0ZXJuaW9uKTthLnNjYWxlLmNvcHkodGhpcy5zY2FsZSk7YS5yZW5kZXJEZXB0aD10aGlzLnJlbmRlckRlcHRoO2Eucm90YXRpb25BdXRvVXBkYXRlPXRoaXMucm90YXRpb25BdXRvVXBkYXRlO2EubWF0cml4LmNvcHkodGhpcy5tYXRyaXgpO2EubWF0cml4V29ybGQuY29weSh0aGlzLm1hdHJpeFdvcmxkKTtcbmEubWF0cml4QXV0b1VwZGF0ZT10aGlzLm1hdHJpeEF1dG9VcGRhdGU7YS5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPXRoaXMubWF0cml4V29ybGROZWVkc1VwZGF0ZTthLnZpc2libGU9dGhpcy52aXNpYmxlO2EuY2FzdFNoYWRvdz10aGlzLmNhc3RTaGFkb3c7YS5yZWNlaXZlU2hhZG93PXRoaXMucmVjZWl2ZVNoYWRvdzthLmZydXN0dW1DdWxsZWQ9dGhpcy5mcnVzdHVtQ3VsbGVkO2EudXNlckRhdGE9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLnVzZXJEYXRhKSk7aWYoITA9PT1iKWZvcih2YXIgYz0wO2M8dGhpcy5jaGlsZHJlbi5sZW5ndGg7YysrKWEuYWRkKHRoaXMuY2hpbGRyZW5bY10uY2xvbmUoKSk7cmV0dXJuIGF9fTtUSFJFRS5FdmVudERpc3BhdGNoZXIucHJvdG90eXBlLmFwcGx5KFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSk7VEhSRUUuT2JqZWN0M0RJZENvdW50PTA7VEhSRUUuUHJvamVjdG9yPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe2lmKGk9PT1tKXt2YXIgYT1uZXcgVEhSRUUuUmVuZGVyYWJsZVZlcnRleDtrLnB1c2goYSk7bSsrO2krKztyZXR1cm4gYX1yZXR1cm4ga1tpKytdfWZ1bmN0aW9uIGIoYSxiKXtyZXR1cm4gYS56IT09Yi56P2Iuei1hLno6YS5pZCE9PWIuaWQ/YS5pZC1iLmlkOjB9ZnVuY3Rpb24gYyhhLGIpe3ZhciBjPTAsZD0xLGU9YS56K2EudyxmPWIueitiLncsaD0tYS56K2EudyxnPS1iLnorYi53O2lmKDA8PWUmJjA8PWYmJjA8PWgmJjA8PWcpcmV0dXJuITA7aWYoMD5lJiYwPmZ8fDA+aCYmMD5nKXJldHVybiExOzA+ZT9jPU1hdGgubWF4KGMsZS8oZS1mKSk6MD5mJiYoZD1NYXRoLm1pbihkLGUvKGUtZikpKTswPmg/Yz1NYXRoLm1heChjLGgvKGgtZykpOjA+ZyYmKGQ9TWF0aC5taW4oZCxoLyhoLWcpKSk7aWYoZDxjKXJldHVybiExO2EubGVycChiLGMpO2IubGVycChhLDEtZCk7cmV0dXJuITB9dmFyIGQsZSxmPVtdLGg9XG4wLGcsaSxrPVtdLG09MCxsLHAsdD1bXSxzPTAscSxuLHU9W10scj0wLHYseixHPVtdLHc9MCx5PXtvYmplY3RzOltdLHNwcml0ZXM6W10sbGlnaHRzOltdLGVsZW1lbnRzOltdfSxFPW5ldyBUSFJFRS5WZWN0b3IzLEE9bmV3IFRIUkVFLlZlY3RvcjQsSz1uZXcgVEhSRUUuQm94MyhuZXcgVEhSRUUuVmVjdG9yMygtMSwtMSwtMSksbmV3IFRIUkVFLlZlY3RvcjMoMSwxLDEpKSxEPW5ldyBUSFJFRS5Cb3gzLEY9QXJyYXkoMyksTz1uZXcgVEhSRUUuTWF0cml4NCx4PW5ldyBUSFJFRS5NYXRyaXg0LEksQj1uZXcgVEhSRUUuTWF0cml4NCxNPW5ldyBUSFJFRS5NYXRyaXgzLEo9bmV3IFRIUkVFLk1hdHJpeDMsY2E9bmV3IFRIUkVFLlZlY3RvcjMsbmE9bmV3IFRIUkVFLkZydXN0dW0scGE9bmV3IFRIUkVFLlZlY3RvcjQsQz1uZXcgVEhSRUUuVmVjdG9yNDt0aGlzLnByb2plY3RWZWN0b3I9ZnVuY3Rpb24oYSxiKXtiLm1hdHJpeFdvcmxkSW52ZXJzZS5nZXRJbnZlcnNlKGIubWF0cml4V29ybGQpO1xueC5tdWx0aXBseU1hdHJpY2VzKGIucHJvamVjdGlvbk1hdHJpeCxiLm1hdHJpeFdvcmxkSW52ZXJzZSk7cmV0dXJuIGEuYXBwbHlQcm9qZWN0aW9uKHgpfTt0aGlzLnVucHJvamVjdFZlY3Rvcj1mdW5jdGlvbihhLGIpe2IucHJvamVjdGlvbk1hdHJpeEludmVyc2UuZ2V0SW52ZXJzZShiLnByb2plY3Rpb25NYXRyaXgpO3gubXVsdGlwbHlNYXRyaWNlcyhiLm1hdHJpeFdvcmxkLGIucHJvamVjdGlvbk1hdHJpeEludmVyc2UpO3JldHVybiBhLmFwcGx5UHJvamVjdGlvbih4KX07dGhpcy5waWNraW5nUmF5PWZ1bmN0aW9uKGEsYil7YS56PS0xO3ZhciBjPW5ldyBUSFJFRS5WZWN0b3IzKGEueCxhLnksMSk7dGhpcy51bnByb2plY3RWZWN0b3IoYSxiKTt0aGlzLnVucHJvamVjdFZlY3RvcihjLGIpO2Muc3ViKGEpLm5vcm1hbGl6ZSgpO3JldHVybiBuZXcgVEhSRUUuUmF5Y2FzdGVyKGEsYyl9O3ZhciBRPWZ1bmN0aW9uKGEpe2lmKGU9PT1oKXt2YXIgYj1uZXcgVEhSRUUuUmVuZGVyYWJsZU9iamVjdDtcbmYucHVzaChiKTtoKys7ZSsrO2Q9Yn1lbHNlIGQ9ZltlKytdO2QuaWQ9YS5pZDtkLm9iamVjdD1hO251bGwhPT1hLnJlbmRlckRlcHRoP2Quej1hLnJlbmRlckRlcHRoOihFLnNldEZyb21NYXRyaXhQb3NpdGlvbihhLm1hdHJpeFdvcmxkKSxFLmFwcGx5UHJvamVjdGlvbih4KSxkLno9RS56KTtyZXR1cm4gZH0sUj1mdW5jdGlvbihhKXtpZighMSE9PWEudmlzaWJsZSl7YSBpbnN0YW5jZW9mIFRIUkVFLkxpZ2h0P3kubGlnaHRzLnB1c2goYSk6YSBpbnN0YW5jZW9mIFRIUkVFLk1lc2h8fGEgaW5zdGFuY2VvZiBUSFJFRS5MaW5lPyghMT09PWEuZnJ1c3R1bUN1bGxlZHx8ITA9PT1uYS5pbnRlcnNlY3RzT2JqZWN0KGEpKSYmeS5vYmplY3RzLnB1c2goUShhKSk6YSBpbnN0YW5jZW9mIFRIUkVFLlNwcml0ZSYmeS5zcHJpdGVzLnB1c2goUShhKSk7Zm9yKHZhciBiPTAsYz1hLmNoaWxkcmVuLmxlbmd0aDtiPGM7YisrKVIoYS5jaGlsZHJlbltiXSl9fTt0aGlzLnByb2plY3RTY2VuZT1mdW5jdGlvbihkLFxuZixoLG0pe3ZhciBFPSExLFEsJCxlYSxWLFAsWSxVLGphLHNhLGhhLEthLEdhO3o9bj1wPTA7eS5lbGVtZW50cy5sZW5ndGg9MDshMD09PWQuYXV0b1VwZGF0ZSYmZC51cGRhdGVNYXRyaXhXb3JsZCgpO3ZvaWQgMD09PWYucGFyZW50JiZmLnVwZGF0ZU1hdHJpeFdvcmxkKCk7Ty5jb3B5KGYubWF0cml4V29ybGRJbnZlcnNlLmdldEludmVyc2UoZi5tYXRyaXhXb3JsZCkpO3gubXVsdGlwbHlNYXRyaWNlcyhmLnByb2plY3Rpb25NYXRyaXgsTyk7Si5nZXROb3JtYWxNYXRyaXgoTyk7bmEuc2V0RnJvbU1hdHJpeCh4KTtlPTA7eS5vYmplY3RzLmxlbmd0aD0wO3kuc3ByaXRlcy5sZW5ndGg9MDt5LmxpZ2h0cy5sZW5ndGg9MDtSKGQpOyEwPT09aCYmeS5vYmplY3RzLnNvcnQoYik7ZD0wO2ZvcihoPXkub2JqZWN0cy5sZW5ndGg7ZDxoO2QrKylpZihVPXkub2JqZWN0c1tkXS5vYmplY3QsST1VLm1hdHJpeFdvcmxkLGk9MCxVIGluc3RhbmNlb2YgVEhSRUUuTWVzaCl7amE9VS5nZW9tZXRyeTtcbmVhPWphLnZlcnRpY2VzO3NhPWphLmZhY2VzO2phPWphLmZhY2VWZXJ0ZXhVdnM7TS5nZXROb3JtYWxNYXRyaXgoSSk7S2E9VS5tYXRlcmlhbCBpbnN0YW5jZW9mIFRIUkVFLk1lc2hGYWNlTWF0ZXJpYWw7R2E9ITA9PT1LYT9VLm1hdGVyaWFsOm51bGw7UT0wO2ZvcigkPWVhLmxlbmd0aDtRPCQ7USsrKXtnPWEoKTtnLnBvc2l0aW9uV29ybGQuY29weShlYVtRXSkuYXBwbHlNYXRyaXg0KEkpO2cucG9zaXRpb25TY3JlZW4uY29weShnLnBvc2l0aW9uV29ybGQpLmFwcGx5TWF0cml4NCh4KTt2YXIga2E9MS9nLnBvc2l0aW9uU2NyZWVuLnc7Zy5wb3NpdGlvblNjcmVlbi54Kj1rYTtnLnBvc2l0aW9uU2NyZWVuLnkqPWthO2cucG9zaXRpb25TY3JlZW4ueio9a2E7Zy52aXNpYmxlPSEoLTE+Zy5wb3NpdGlvblNjcmVlbi54fHwxPGcucG9zaXRpb25TY3JlZW4ueHx8LTE+Zy5wb3NpdGlvblNjcmVlbi55fHwxPGcucG9zaXRpb25TY3JlZW4ueXx8LTE+Zy5wb3NpdGlvblNjcmVlbi56fHwxPFxuZy5wb3NpdGlvblNjcmVlbi56KX1lYT0wO2ZvcihRPXNhLmxlbmd0aDtlYTxRO2VhKyspaWYoJD1zYVtlYV0sa2E9ITA9PT1LYT9HYS5tYXRlcmlhbHNbJC5tYXRlcmlhbEluZGV4XTpVLm1hdGVyaWFsLHZvaWQgMCE9PWthJiYoWT1rYS5zaWRlLFY9a1skLmFdLFA9a1skLmJdLGhhPWtbJC5jXSxGWzBdPVYucG9zaXRpb25TY3JlZW4sRlsxXT1QLnBvc2l0aW9uU2NyZWVuLEZbMl09aGEucG9zaXRpb25TY3JlZW4sITA9PT1WLnZpc2libGV8fCEwPT09UC52aXNpYmxlfHwhMD09PWhhLnZpc2libGV8fEsuaXNJbnRlcnNlY3Rpb25Cb3goRC5zZXRGcm9tUG9pbnRzKEYpKSkpaWYoRT0wPihoYS5wb3NpdGlvblNjcmVlbi54LVYucG9zaXRpb25TY3JlZW4ueCkqKFAucG9zaXRpb25TY3JlZW4ueS1WLnBvc2l0aW9uU2NyZWVuLnkpLShoYS5wb3NpdGlvblNjcmVlbi55LVYucG9zaXRpb25TY3JlZW4ueSkqKFAucG9zaXRpb25TY3JlZW4ueC1WLnBvc2l0aW9uU2NyZWVuLngpLFk9PT1USFJFRS5Eb3VibGVTaWRlfHxcbkU9PT0oWT09PVRIUkVFLkZyb250U2lkZSkpe2lmKHA9PT1zKXt2YXIgRGE9bmV3IFRIUkVFLlJlbmRlcmFibGVGYWNlMzt0LnB1c2goRGEpO3MrKztwKys7bD1EYX1lbHNlIGw9dFtwKytdO2wuaWQ9VS5pZDtsLnYxLmNvcHkoVik7bC52Mi5jb3B5KFApO2wudjMuY29weShoYSk7bC5ub3JtYWxNb2RlbC5jb3B5KCQubm9ybWFsKTshMT09PUUmJihZPT09VEhSRUUuQmFja1NpZGV8fFk9PT1USFJFRS5Eb3VibGVTaWRlKSYmbC5ub3JtYWxNb2RlbC5uZWdhdGUoKTtsLm5vcm1hbE1vZGVsLmFwcGx5TWF0cml4MyhNKS5ub3JtYWxpemUoKTtsLm5vcm1hbE1vZGVsVmlldy5jb3B5KGwubm9ybWFsTW9kZWwpLmFwcGx5TWF0cml4MyhKKTtsLmNlbnRyb2lkTW9kZWwuY29weSgkLmNlbnRyb2lkKS5hcHBseU1hdHJpeDQoSSk7aGE9JC52ZXJ0ZXhOb3JtYWxzO1Y9MDtmb3IoUD1NYXRoLm1pbihoYS5sZW5ndGgsMyk7VjxQO1YrKylEYT1sLnZlcnRleE5vcm1hbHNNb2RlbFtWXSxEYS5jb3B5KGhhW1ZdKSxcbiExPT09RSYmKFk9PT1USFJFRS5CYWNrU2lkZXx8WT09PVRIUkVFLkRvdWJsZVNpZGUpJiZEYS5uZWdhdGUoKSxEYS5hcHBseU1hdHJpeDMoTSkubm9ybWFsaXplKCksbC52ZXJ0ZXhOb3JtYWxzTW9kZWxWaWV3W1ZdLmNvcHkoRGEpLmFwcGx5TWF0cml4MyhKKTtsLnZlcnRleE5vcm1hbHNMZW5ndGg9aGEubGVuZ3RoO0U9MDtmb3IoVj1NYXRoLm1pbihqYS5sZW5ndGgsMyk7RTxWO0UrKylpZihoYT1qYVtFXVtlYV0sdm9pZCAwIT09aGEpe1A9MDtmb3IoWT1oYS5sZW5ndGg7UDxZO1ArKylsLnV2c1tFXVtQXT1oYVtQXX1sLmNvbG9yPSQuY29sb3I7bC5tYXRlcmlhbD1rYTtjYS5jb3B5KGwuY2VudHJvaWRNb2RlbCkuYXBwbHlQcm9qZWN0aW9uKHgpO2wuej1jYS56O3kuZWxlbWVudHMucHVzaChsKX19ZWxzZSBpZihVIGluc3RhbmNlb2YgVEhSRUUuTGluZSl7Qi5tdWx0aXBseU1hdHJpY2VzKHgsSSk7ZWE9VS5nZW9tZXRyeS52ZXJ0aWNlcztWPWEoKTtWLnBvc2l0aW9uU2NyZWVuLmNvcHkoZWFbMF0pLmFwcGx5TWF0cml4NChCKTtcbnNhPVUudHlwZT09PVRIUkVFLkxpbmVQaWVjZXM/MjoxO1E9MTtmb3IoJD1lYS5sZW5ndGg7UTwkO1ErKylWPWEoKSxWLnBvc2l0aW9uU2NyZWVuLmNvcHkoZWFbUV0pLmFwcGx5TWF0cml4NChCKSwwPChRKzEpJXNhfHwoUD1rW2ktMl0scGEuY29weShWLnBvc2l0aW9uU2NyZWVuKSxDLmNvcHkoUC5wb3NpdGlvblNjcmVlbiksITA9PT1jKHBhLEMpJiYocGEubXVsdGlwbHlTY2FsYXIoMS9wYS53KSxDLm11bHRpcGx5U2NhbGFyKDEvQy53KSxuPT09cj8oamE9bmV3IFRIUkVFLlJlbmRlcmFibGVMaW5lLHUucHVzaChqYSkscisrLG4rKyxxPWphKTpxPXVbbisrXSxxLmlkPVUuaWQscS52MS5wb3NpdGlvblNjcmVlbi5jb3B5KHBhKSxxLnYyLnBvc2l0aW9uU2NyZWVuLmNvcHkoQykscS56PU1hdGgubWF4KHBhLnosQy56KSxxLm1hdGVyaWFsPVUubWF0ZXJpYWwsVS5tYXRlcmlhbC52ZXJ0ZXhDb2xvcnM9PT1USFJFRS5WZXJ0ZXhDb2xvcnMmJihxLnZlcnRleENvbG9yc1swXS5jb3B5KFUuZ2VvbWV0cnkuY29sb3JzW1FdKSxcbnEudmVydGV4Q29sb3JzWzFdLmNvcHkoVS5nZW9tZXRyeS5jb2xvcnNbUS0xXSkpLHkuZWxlbWVudHMucHVzaChxKSkpfWQ9MDtmb3IoaD15LnNwcml0ZXMubGVuZ3RoO2Q8aDtkKyspVT15LnNwcml0ZXNbZF0ub2JqZWN0LEk9VS5tYXRyaXhXb3JsZCxBLnNldChJLmVsZW1lbnRzWzEyXSxJLmVsZW1lbnRzWzEzXSxJLmVsZW1lbnRzWzE0XSwxKSxBLmFwcGx5TWF0cml4NCh4KSxrYT0xL0EudyxBLnoqPWthLC0xPD1BLnomJjE+PUEueiYmKHo9PT13PyhzYT1uZXcgVEhSRUUuUmVuZGVyYWJsZVNwcml0ZSxHLnB1c2goc2EpLHcrKyx6Kyssdj1zYSk6dj1HW3orK10sdi5pZD1VLmlkLHYueD1BLngqa2Esdi55PUEueSprYSx2Lno9QS56LHYub2JqZWN0PVUsdi5yb3RhdGlvbj1VLnJvdGF0aW9uLHYuc2NhbGUueD1VLnNjYWxlLngqTWF0aC5hYnModi54LShBLngrZi5wcm9qZWN0aW9uTWF0cml4LmVsZW1lbnRzWzBdKS8oQS53K2YucHJvamVjdGlvbk1hdHJpeC5lbGVtZW50c1sxMl0pKSxcbnYuc2NhbGUueT1VLnNjYWxlLnkqTWF0aC5hYnModi55LShBLnkrZi5wcm9qZWN0aW9uTWF0cml4LmVsZW1lbnRzWzVdKS8oQS53K2YucHJvamVjdGlvbk1hdHJpeC5lbGVtZW50c1sxM10pKSx2Lm1hdGVyaWFsPVUubWF0ZXJpYWwseS5lbGVtZW50cy5wdXNoKHYpKTshMD09PW0mJnkuZWxlbWVudHMuc29ydChiKTtyZXR1cm4geX19O1RIUkVFLkZhY2UzPWZ1bmN0aW9uKGEsYixjLGQsZSxmKXt0aGlzLmE9YTt0aGlzLmI9Yjt0aGlzLmM9Yzt0aGlzLm5vcm1hbD1kIGluc3RhbmNlb2YgVEhSRUUuVmVjdG9yMz9kOm5ldyBUSFJFRS5WZWN0b3IzO3RoaXMudmVydGV4Tm9ybWFscz1kIGluc3RhbmNlb2YgQXJyYXk/ZDpbXTt0aGlzLmNvbG9yPWUgaW5zdGFuY2VvZiBUSFJFRS5Db2xvcj9lOm5ldyBUSFJFRS5Db2xvcjt0aGlzLnZlcnRleENvbG9ycz1lIGluc3RhbmNlb2YgQXJyYXk/ZTpbXTt0aGlzLnZlcnRleFRhbmdlbnRzPVtdO3RoaXMubWF0ZXJpYWxJbmRleD12b2lkIDAhPT1mP2Y6MDt0aGlzLmNlbnRyb2lkPW5ldyBUSFJFRS5WZWN0b3IzfTtcblRIUkVFLkZhY2UzLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuRmFjZTMsY2xvbmU6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuRmFjZTModGhpcy5hLHRoaXMuYix0aGlzLmMpO2Eubm9ybWFsLmNvcHkodGhpcy5ub3JtYWwpO2EuY29sb3IuY29weSh0aGlzLmNvbG9yKTthLmNlbnRyb2lkLmNvcHkodGhpcy5jZW50cm9pZCk7YS5tYXRlcmlhbEluZGV4PXRoaXMubWF0ZXJpYWxJbmRleDt2YXIgYixjO2I9MDtmb3IoYz10aGlzLnZlcnRleE5vcm1hbHMubGVuZ3RoO2I8YztiKyspYS52ZXJ0ZXhOb3JtYWxzW2JdPXRoaXMudmVydGV4Tm9ybWFsc1tiXS5jbG9uZSgpO2I9MDtmb3IoYz10aGlzLnZlcnRleENvbG9ycy5sZW5ndGg7YjxjO2IrKylhLnZlcnRleENvbG9yc1tiXT10aGlzLnZlcnRleENvbG9yc1tiXS5jbG9uZSgpO2I9MDtmb3IoYz10aGlzLnZlcnRleFRhbmdlbnRzLmxlbmd0aDtiPGM7YisrKWEudmVydGV4VGFuZ2VudHNbYl09dGhpcy52ZXJ0ZXhUYW5nZW50c1tiXS5jbG9uZSgpO1xucmV0dXJuIGF9fTtUSFJFRS5GYWNlND1mdW5jdGlvbihhLGIsYyxkLGUsZixoKXtjb25zb2xlLndhcm4oXCJUSFJFRS5GYWNlNCBoYXMgYmVlbiByZW1vdmVkLiBBIFRIUkVFLkZhY2UzIHdpbGwgYmUgY3JlYXRlZCBpbnN0ZWFkLlwiKTtyZXR1cm4gbmV3IFRIUkVFLkZhY2UzKGEsYixjLGUsZixoKX07VEhSRUUuR2VvbWV0cnk9ZnVuY3Rpb24oKXt0aGlzLmlkPVRIUkVFLkdlb21ldHJ5SWRDb3VudCsrO3RoaXMudXVpZD1USFJFRS5NYXRoLmdlbmVyYXRlVVVJRCgpO3RoaXMubmFtZT1cIlwiO3RoaXMudmVydGljZXM9W107dGhpcy5jb2xvcnM9W107dGhpcy5mYWNlcz1bXTt0aGlzLmZhY2VWZXJ0ZXhVdnM9W1tdXTt0aGlzLm1vcnBoVGFyZ2V0cz1bXTt0aGlzLm1vcnBoQ29sb3JzPVtdO3RoaXMubW9ycGhOb3JtYWxzPVtdO3RoaXMuc2tpbldlaWdodHM9W107dGhpcy5za2luSW5kaWNlcz1bXTt0aGlzLmxpbmVEaXN0YW5jZXM9W107dGhpcy5ib3VuZGluZ1NwaGVyZT10aGlzLmJvdW5kaW5nQm94PW51bGw7dGhpcy5oYXNUYW5nZW50cz0hMTt0aGlzLmR5bmFtaWM9ITA7dGhpcy5idWZmZXJzTmVlZFVwZGF0ZT10aGlzLmxpbmVEaXN0YW5jZXNOZWVkVXBkYXRlPXRoaXMuY29sb3JzTmVlZFVwZGF0ZT10aGlzLnRhbmdlbnRzTmVlZFVwZGF0ZT10aGlzLm5vcm1hbHNOZWVkVXBkYXRlPXRoaXMudXZzTmVlZFVwZGF0ZT1cbnRoaXMuZWxlbWVudHNOZWVkVXBkYXRlPXRoaXMudmVydGljZXNOZWVkVXBkYXRlPSExfTtcblRIUkVFLkdlb21ldHJ5LnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuR2VvbWV0cnksYXBwbHlNYXRyaXg6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPShuZXcgVEhSRUUuTWF0cml4MykuZ2V0Tm9ybWFsTWF0cml4KGEpLGM9MCxkPXRoaXMudmVydGljZXMubGVuZ3RoO2M8ZDtjKyspdGhpcy52ZXJ0aWNlc1tjXS5hcHBseU1hdHJpeDQoYSk7Yz0wO2ZvcihkPXRoaXMuZmFjZXMubGVuZ3RoO2M8ZDtjKyspe3ZhciBlPXRoaXMuZmFjZXNbY107ZS5ub3JtYWwuYXBwbHlNYXRyaXgzKGIpLm5vcm1hbGl6ZSgpO2Zvcih2YXIgZj0wLGg9ZS52ZXJ0ZXhOb3JtYWxzLmxlbmd0aDtmPGg7ZisrKWUudmVydGV4Tm9ybWFsc1tmXS5hcHBseU1hdHJpeDMoYikubm9ybWFsaXplKCk7ZS5jZW50cm9pZC5hcHBseU1hdHJpeDQoYSl9dGhpcy5ib3VuZGluZ0JveCBpbnN0YW5jZW9mIFRIUkVFLkJveDMmJnRoaXMuY29tcHV0ZUJvdW5kaW5nQm94KCk7dGhpcy5ib3VuZGluZ1NwaGVyZSBpbnN0YW5jZW9mXG5USFJFRS5TcGhlcmUmJnRoaXMuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCl9LGNvbXB1dGVDZW50cm9pZHM6ZnVuY3Rpb24oKXt2YXIgYSxiLGM7YT0wO2ZvcihiPXRoaXMuZmFjZXMubGVuZ3RoO2E8YjthKyspYz10aGlzLmZhY2VzW2FdLGMuY2VudHJvaWQuc2V0KDAsMCwwKSxjLmNlbnRyb2lkLmFkZCh0aGlzLnZlcnRpY2VzW2MuYV0pLGMuY2VudHJvaWQuYWRkKHRoaXMudmVydGljZXNbYy5iXSksYy5jZW50cm9pZC5hZGQodGhpcy52ZXJ0aWNlc1tjLmNdKSxjLmNlbnRyb2lkLmRpdmlkZVNjYWxhcigzKX0sY29tcHV0ZUZhY2VOb3JtYWxzOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPW5ldyBUSFJFRS5WZWN0b3IzLGI9bmV3IFRIUkVFLlZlY3RvcjMsYz0wLGQ9dGhpcy5mYWNlcy5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9dGhpcy5mYWNlc1tjXSxmPXRoaXMudmVydGljZXNbZS5hXSxoPXRoaXMudmVydGljZXNbZS5iXTthLnN1YlZlY3RvcnModGhpcy52ZXJ0aWNlc1tlLmNdLGgpO2Iuc3ViVmVjdG9ycyhmLFxuaCk7YS5jcm9zcyhiKTthLm5vcm1hbGl6ZSgpO2Uubm9ybWFsLmNvcHkoYSl9fSxjb21wdXRlVmVydGV4Tm9ybWFsczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZTtpZih2b2lkIDA9PT10aGlzLl9fdG1wVmVydGljZXMpe2U9dGhpcy5fX3RtcFZlcnRpY2VzPUFycmF5KHRoaXMudmVydGljZXMubGVuZ3RoKTtiPTA7Zm9yKGM9dGhpcy52ZXJ0aWNlcy5sZW5ndGg7YjxjO2IrKyllW2JdPW5ldyBUSFJFRS5WZWN0b3IzO2I9MDtmb3IoYz10aGlzLmZhY2VzLmxlbmd0aDtiPGM7YisrKWQ9dGhpcy5mYWNlc1tiXSxkLnZlcnRleE5vcm1hbHM9W25ldyBUSFJFRS5WZWN0b3IzLG5ldyBUSFJFRS5WZWN0b3IzLG5ldyBUSFJFRS5WZWN0b3IzXX1lbHNle2U9dGhpcy5fX3RtcFZlcnRpY2VzO2I9MDtmb3IoYz10aGlzLnZlcnRpY2VzLmxlbmd0aDtiPGM7YisrKWVbYl0uc2V0KDAsMCwwKX1pZihhKXt2YXIgZixoLGc9bmV3IFRIUkVFLlZlY3RvcjMsaT1uZXcgVEhSRUUuVmVjdG9yMztuZXcgVEhSRUUuVmVjdG9yMztcbm5ldyBUSFJFRS5WZWN0b3IzO25ldyBUSFJFRS5WZWN0b3IzO2I9MDtmb3IoYz10aGlzLmZhY2VzLmxlbmd0aDtiPGM7YisrKWQ9dGhpcy5mYWNlc1tiXSxhPXRoaXMudmVydGljZXNbZC5hXSxmPXRoaXMudmVydGljZXNbZC5iXSxoPXRoaXMudmVydGljZXNbZC5jXSxnLnN1YlZlY3RvcnMoaCxmKSxpLnN1YlZlY3RvcnMoYSxmKSxnLmNyb3NzKGkpLGVbZC5hXS5hZGQoZyksZVtkLmJdLmFkZChnKSxlW2QuY10uYWRkKGcpfWVsc2V7Yj0wO2ZvcihjPXRoaXMuZmFjZXMubGVuZ3RoO2I8YztiKyspZD10aGlzLmZhY2VzW2JdLGVbZC5hXS5hZGQoZC5ub3JtYWwpLGVbZC5iXS5hZGQoZC5ub3JtYWwpLGVbZC5jXS5hZGQoZC5ub3JtYWwpfWI9MDtmb3IoYz10aGlzLnZlcnRpY2VzLmxlbmd0aDtiPGM7YisrKWVbYl0ubm9ybWFsaXplKCk7Yj0wO2ZvcihjPXRoaXMuZmFjZXMubGVuZ3RoO2I8YztiKyspZD10aGlzLmZhY2VzW2JdLGQudmVydGV4Tm9ybWFsc1swXS5jb3B5KGVbZC5hXSksZC52ZXJ0ZXhOb3JtYWxzWzFdLmNvcHkoZVtkLmJdKSxcbmQudmVydGV4Tm9ybWFsc1syXS5jb3B5KGVbZC5jXSl9LGNvbXB1dGVNb3JwaE5vcm1hbHM6ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZCxlO2M9MDtmb3IoZD10aGlzLmZhY2VzLmxlbmd0aDtjPGQ7YysrKXtlPXRoaXMuZmFjZXNbY107ZS5fX29yaWdpbmFsRmFjZU5vcm1hbD9lLl9fb3JpZ2luYWxGYWNlTm9ybWFsLmNvcHkoZS5ub3JtYWwpOmUuX19vcmlnaW5hbEZhY2VOb3JtYWw9ZS5ub3JtYWwuY2xvbmUoKTtlLl9fb3JpZ2luYWxWZXJ0ZXhOb3JtYWxzfHwoZS5fX29yaWdpbmFsVmVydGV4Tm9ybWFscz1bXSk7YT0wO2ZvcihiPWUudmVydGV4Tm9ybWFscy5sZW5ndGg7YTxiO2ErKyllLl9fb3JpZ2luYWxWZXJ0ZXhOb3JtYWxzW2FdP2UuX19vcmlnaW5hbFZlcnRleE5vcm1hbHNbYV0uY29weShlLnZlcnRleE5vcm1hbHNbYV0pOmUuX19vcmlnaW5hbFZlcnRleE5vcm1hbHNbYV09ZS52ZXJ0ZXhOb3JtYWxzW2FdLmNsb25lKCl9dmFyIGY9bmV3IFRIUkVFLkdlb21ldHJ5O2YuZmFjZXM9XG50aGlzLmZhY2VzO2E9MDtmb3IoYj10aGlzLm1vcnBoVGFyZ2V0cy5sZW5ndGg7YTxiO2ErKyl7aWYoIXRoaXMubW9ycGhOb3JtYWxzW2FdKXt0aGlzLm1vcnBoTm9ybWFsc1thXT17fTt0aGlzLm1vcnBoTm9ybWFsc1thXS5mYWNlTm9ybWFscz1bXTt0aGlzLm1vcnBoTm9ybWFsc1thXS52ZXJ0ZXhOb3JtYWxzPVtdO2U9dGhpcy5tb3JwaE5vcm1hbHNbYV0uZmFjZU5vcm1hbHM7dmFyIGg9dGhpcy5tb3JwaE5vcm1hbHNbYV0udmVydGV4Tm9ybWFscyxnLGk7Yz0wO2ZvcihkPXRoaXMuZmFjZXMubGVuZ3RoO2M8ZDtjKyspZz1uZXcgVEhSRUUuVmVjdG9yMyxpPXthOm5ldyBUSFJFRS5WZWN0b3IzLGI6bmV3IFRIUkVFLlZlY3RvcjMsYzpuZXcgVEhSRUUuVmVjdG9yM30sZS5wdXNoKGcpLGgucHVzaChpKX1oPXRoaXMubW9ycGhOb3JtYWxzW2FdO2YudmVydGljZXM9dGhpcy5tb3JwaFRhcmdldHNbYV0udmVydGljZXM7Zi5jb21wdXRlRmFjZU5vcm1hbHMoKTtmLmNvbXB1dGVWZXJ0ZXhOb3JtYWxzKCk7XG5jPTA7Zm9yKGQ9dGhpcy5mYWNlcy5sZW5ndGg7YzxkO2MrKyllPXRoaXMuZmFjZXNbY10sZz1oLmZhY2VOb3JtYWxzW2NdLGk9aC52ZXJ0ZXhOb3JtYWxzW2NdLGcuY29weShlLm5vcm1hbCksaS5hLmNvcHkoZS52ZXJ0ZXhOb3JtYWxzWzBdKSxpLmIuY29weShlLnZlcnRleE5vcm1hbHNbMV0pLGkuYy5jb3B5KGUudmVydGV4Tm9ybWFsc1syXSl9Yz0wO2ZvcihkPXRoaXMuZmFjZXMubGVuZ3RoO2M8ZDtjKyspZT10aGlzLmZhY2VzW2NdLGUubm9ybWFsPWUuX19vcmlnaW5hbEZhY2VOb3JtYWwsZS52ZXJ0ZXhOb3JtYWxzPWUuX19vcmlnaW5hbFZlcnRleE5vcm1hbHN9LGNvbXB1dGVUYW5nZW50czpmdW5jdGlvbigpe3ZhciBhLGIsYyxkLGUsZixoLGcsaSxrLG0sbCxwLHQscyxxLG4sdT1bXSxyPVtdO2M9bmV3IFRIUkVFLlZlY3RvcjM7dmFyIHY9bmV3IFRIUkVFLlZlY3RvcjMsej1uZXcgVEhSRUUuVmVjdG9yMyxHPW5ldyBUSFJFRS5WZWN0b3IzLHc9bmV3IFRIUkVFLlZlY3RvcjM7XG5hPTA7Zm9yKGI9dGhpcy52ZXJ0aWNlcy5sZW5ndGg7YTxiO2ErKyl1W2FdPW5ldyBUSFJFRS5WZWN0b3IzLHJbYV09bmV3IFRIUkVFLlZlY3RvcjM7YT0wO2ZvcihiPXRoaXMuZmFjZXMubGVuZ3RoO2E8YjthKyspZT10aGlzLmZhY2VzW2FdLGY9dGhpcy5mYWNlVmVydGV4VXZzWzBdW2FdLGQ9ZS5hLG49ZS5iLGU9ZS5jLGg9dGhpcy52ZXJ0aWNlc1tkXSxnPXRoaXMudmVydGljZXNbbl0saT10aGlzLnZlcnRpY2VzW2VdLGs9ZlswXSxtPWZbMV0sbD1mWzJdLGY9Zy54LWgueCxwPWkueC1oLngsdD1nLnktaC55LHM9aS55LWgueSxnPWcuei1oLnosaD1pLnotaC56LGk9bS54LWsueCxxPWwueC1rLngsbT1tLnktay55LGs9bC55LWsueSxsPTEvKGkqay1xKm0pLGMuc2V0KChrKmYtbSpwKSpsLChrKnQtbSpzKSpsLChrKmctbSpoKSpsKSx2LnNldCgoaSpwLXEqZikqbCwoaSpzLXEqdCkqbCwoaSpoLXEqZykqbCksdVtkXS5hZGQoYyksdVtuXS5hZGQoYyksdVtlXS5hZGQoYykscltkXS5hZGQodiksXG5yW25dLmFkZCh2KSxyW2VdLmFkZCh2KTt2PVtcImFcIixcImJcIixcImNcIixcImRcIl07YT0wO2ZvcihiPXRoaXMuZmFjZXMubGVuZ3RoO2E8YjthKyspe2U9dGhpcy5mYWNlc1thXTtmb3IoYz0wO2M8TWF0aC5taW4oZS52ZXJ0ZXhOb3JtYWxzLmxlbmd0aCwzKTtjKyspdy5jb3B5KGUudmVydGV4Tm9ybWFsc1tjXSksZD1lW3ZbY11dLG49dVtkXSx6LmNvcHkobiksei5zdWIody5tdWx0aXBseVNjYWxhcih3LmRvdChuKSkpLm5vcm1hbGl6ZSgpLEcuY3Jvc3NWZWN0b3JzKGUudmVydGV4Tm9ybWFsc1tjXSxuKSxkPUcuZG90KHJbZF0pLGQ9MD5kPy0xOjEsZS52ZXJ0ZXhUYW5nZW50c1tjXT1uZXcgVEhSRUUuVmVjdG9yNCh6Lngsei55LHoueixkKX10aGlzLmhhc1RhbmdlbnRzPSEwfSxjb21wdXRlTGluZURpc3RhbmNlczpmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI9dGhpcy52ZXJ0aWNlcyxjPTAsZD1iLmxlbmd0aDtjPGQ7YysrKTA8YyYmKGErPWJbY10uZGlzdGFuY2VUbyhiW2MtMV0pKSx0aGlzLmxpbmVEaXN0YW5jZXNbY109XG5hfSxjb21wdXRlQm91bmRpbmdCb3g6ZnVuY3Rpb24oKXtudWxsPT09dGhpcy5ib3VuZGluZ0JveCYmKHRoaXMuYm91bmRpbmdCb3g9bmV3IFRIUkVFLkJveDMpO3RoaXMuYm91bmRpbmdCb3guc2V0RnJvbVBvaW50cyh0aGlzLnZlcnRpY2VzKX0sY29tcHV0ZUJvdW5kaW5nU3BoZXJlOmZ1bmN0aW9uKCl7bnVsbD09PXRoaXMuYm91bmRpbmdTcGhlcmUmJih0aGlzLmJvdW5kaW5nU3BoZXJlPW5ldyBUSFJFRS5TcGhlcmUpO3RoaXMuYm91bmRpbmdTcGhlcmUuc2V0RnJvbVBvaW50cyh0aGlzLnZlcnRpY2VzKX0sbWVyZ2VWZXJ0aWNlczpmdW5jdGlvbigpe3ZhciBhPXt9LGI9W10sYz1bXSxkLGU9TWF0aC5wb3coMTAsNCksZixoO3RoaXMuX190bXBWZXJ0aWNlcz12b2lkIDA7Zj0wO2ZvcihoPXRoaXMudmVydGljZXMubGVuZ3RoO2Y8aDtmKyspZD10aGlzLnZlcnRpY2VzW2ZdLGQ9TWF0aC5yb3VuZChkLngqZSkrXCJfXCIrTWF0aC5yb3VuZChkLnkqZSkrXCJfXCIrTWF0aC5yb3VuZChkLnoqXG5lKSx2b2lkIDA9PT1hW2RdPyhhW2RdPWYsYi5wdXNoKHRoaXMudmVydGljZXNbZl0pLGNbZl09Yi5sZW5ndGgtMSk6Y1tmXT1jW2FbZF1dO2E9W107Zj0wO2ZvcihoPXRoaXMuZmFjZXMubGVuZ3RoO2Y8aDtmKyspe2U9dGhpcy5mYWNlc1tmXTtlLmE9Y1tlLmFdO2UuYj1jW2UuYl07ZS5jPWNbZS5jXTtlPVtlLmEsZS5iLGUuY107Zm9yKGQ9MDszPmQ7ZCsrKWlmKGVbZF09PWVbKGQrMSklM10pe2EucHVzaChmKTticmVha319Zm9yKGY9YS5sZW5ndGgtMTswPD1mO2YtLSl7ZT1hW2ZdO3RoaXMuZmFjZXMuc3BsaWNlKGUsMSk7Yz0wO2ZvcihoPXRoaXMuZmFjZVZlcnRleFV2cy5sZW5ndGg7YzxoO2MrKyl0aGlzLmZhY2VWZXJ0ZXhVdnNbY10uc3BsaWNlKGUsMSl9Zj10aGlzLnZlcnRpY2VzLmxlbmd0aC1iLmxlbmd0aDt0aGlzLnZlcnRpY2VzPWI7cmV0dXJuIGZ9LGNsb25lOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPW5ldyBUSFJFRS5HZW9tZXRyeSxiPXRoaXMudmVydGljZXMsYz0wLGQ9XG5iLmxlbmd0aDtjPGQ7YysrKWEudmVydGljZXMucHVzaChiW2NdLmNsb25lKCkpO2I9dGhpcy5mYWNlcztjPTA7Zm9yKGQ9Yi5sZW5ndGg7YzxkO2MrKylhLmZhY2VzLnB1c2goYltjXS5jbG9uZSgpKTtiPXRoaXMuZmFjZVZlcnRleFV2c1swXTtjPTA7Zm9yKGQ9Yi5sZW5ndGg7YzxkO2MrKyl7Zm9yKHZhciBlPWJbY10sZj1bXSxoPTAsZz1lLmxlbmd0aDtoPGc7aCsrKWYucHVzaChuZXcgVEhSRUUuVmVjdG9yMihlW2hdLngsZVtoXS55KSk7YS5mYWNlVmVydGV4VXZzWzBdLnB1c2goZil9cmV0dXJuIGF9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJkaXNwb3NlXCJ9KX19O1RIUkVFLkV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUuYXBwbHkoVEhSRUUuR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5HZW9tZXRyeUlkQ291bnQ9MDtUSFJFRS5CdWZmZXJHZW9tZXRyeT1mdW5jdGlvbigpe3RoaXMuaWQ9VEhSRUUuR2VvbWV0cnlJZENvdW50Kys7dGhpcy51dWlkPVRIUkVFLk1hdGguZ2VuZXJhdGVVVUlEKCk7dGhpcy5uYW1lPVwiXCI7dGhpcy5hdHRyaWJ1dGVzPXt9O3RoaXMuZHluYW1pYz0hMDt0aGlzLm9mZnNldHM9W107dGhpcy5ib3VuZGluZ1NwaGVyZT10aGlzLmJvdW5kaW5nQm94PW51bGw7dGhpcy5oYXNUYW5nZW50cz0hMTt0aGlzLm1vcnBoVGFyZ2V0cz1bXX07XG5USFJFRS5CdWZmZXJHZW9tZXRyeS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLkJ1ZmZlckdlb21ldHJ5LGFkZEF0dHJpYnV0ZTpmdW5jdGlvbihhLGIsYyxkKXt0aGlzLmF0dHJpYnV0ZXNbYV09e2l0ZW1TaXplOmQsYXJyYXk6bmV3IGIoYypkKX19LGFwcGx5TWF0cml4OmZ1bmN0aW9uKGEpe3ZhciBiLGM7dGhpcy5hdHRyaWJ1dGVzLnBvc2l0aW9uJiYoYj10aGlzLmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXkpO3RoaXMuYXR0cmlidXRlcy5ub3JtYWwmJihjPXRoaXMuYXR0cmlidXRlcy5ub3JtYWwuYXJyYXkpO3ZvaWQgMCE9PWImJihhLm11bHRpcGx5VmVjdG9yM0FycmF5KGIpLHRoaXMudmVydGljZXNOZWVkVXBkYXRlPSEwKTt2b2lkIDAhPT1jJiYoKG5ldyBUSFJFRS5NYXRyaXgzKS5nZXROb3JtYWxNYXRyaXgoYSkubXVsdGlwbHlWZWN0b3IzQXJyYXkoYyksdGhpcy5ub3JtYWxpemVOb3JtYWxzKCksdGhpcy5ub3JtYWxzTmVlZFVwZGF0ZT0hMCl9LGNvbXB1dGVCb3VuZGluZ0JveDpmdW5jdGlvbigpe251bGw9PT1cbnRoaXMuYm91bmRpbmdCb3gmJih0aGlzLmJvdW5kaW5nQm94PW5ldyBUSFJFRS5Cb3gzKTt2YXIgYT10aGlzLmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXk7aWYoYSl7dmFyIGI9dGhpcy5ib3VuZGluZ0JveCxjLGQsZTszPD1hLmxlbmd0aCYmKGIubWluLng9Yi5tYXgueD1hWzBdLGIubWluLnk9Yi5tYXgueT1hWzFdLGIubWluLno9Yi5tYXguej1hWzJdKTtmb3IodmFyIGY9MyxoPWEubGVuZ3RoO2Y8aDtmKz0zKWM9YVtmXSxkPWFbZisxXSxlPWFbZisyXSxjPGIubWluLng/Yi5taW4ueD1jOmM+Yi5tYXgueCYmKGIubWF4Lng9YyksZDxiLm1pbi55P2IubWluLnk9ZDpkPmIubWF4LnkmJihiLm1heC55PWQpLGU8Yi5taW4uej9iLm1pbi56PWU6ZT5iLm1heC56JiYoYi5tYXguej1lKX1pZih2b2lkIDA9PT1hfHwwPT09YS5sZW5ndGgpdGhpcy5ib3VuZGluZ0JveC5taW4uc2V0KDAsMCwwKSx0aGlzLmJvdW5kaW5nQm94Lm1heC5zZXQoMCwwLDApfSxjb21wdXRlQm91bmRpbmdTcGhlcmU6ZnVuY3Rpb24oKXt2YXIgYT1cbm5ldyBUSFJFRS5Cb3gzLGI9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKCl7bnVsbD09PXRoaXMuYm91bmRpbmdTcGhlcmUmJih0aGlzLmJvdW5kaW5nU3BoZXJlPW5ldyBUSFJFRS5TcGhlcmUpO3ZhciBjPXRoaXMuYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheTtpZihjKXtmb3IodmFyIGQ9dGhpcy5ib3VuZGluZ1NwaGVyZS5jZW50ZXIsZT0wLGY9Yy5sZW5ndGg7ZTxmO2UrPTMpYi5zZXQoY1tlXSxjW2UrMV0sY1tlKzJdKSxhLmFkZFBvaW50KGIpO2EuY2VudGVyKGQpO2Zvcih2YXIgaD0wLGU9MCxmPWMubGVuZ3RoO2U8ZjtlKz0zKWIuc2V0KGNbZV0sY1tlKzFdLGNbZSsyXSksaD1NYXRoLm1heChoLGQuZGlzdGFuY2VUb1NxdWFyZWQoYikpO3RoaXMuYm91bmRpbmdTcGhlcmUucmFkaXVzPU1hdGguc3FydChoKX19fSgpLGNvbXB1dGVWZXJ0ZXhOb3JtYWxzOmZ1bmN0aW9uKCl7aWYodGhpcy5hdHRyaWJ1dGVzLnBvc2l0aW9uKXt2YXIgYSxiLGMsZDthPXRoaXMuYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheS5sZW5ndGg7XG5pZih2b2lkIDA9PT10aGlzLmF0dHJpYnV0ZXMubm9ybWFsKXRoaXMuYXR0cmlidXRlcy5ub3JtYWw9e2l0ZW1TaXplOjMsYXJyYXk6bmV3IEZsb2F0MzJBcnJheShhKX07ZWxzZXthPTA7Zm9yKGI9dGhpcy5hdHRyaWJ1dGVzLm5vcm1hbC5hcnJheS5sZW5ndGg7YTxiO2ErKyl0aGlzLmF0dHJpYnV0ZXMubm9ybWFsLmFycmF5W2FdPTB9dmFyIGU9dGhpcy5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5LGY9dGhpcy5hdHRyaWJ1dGVzLm5vcm1hbC5hcnJheSxoLGcsaSxrLG0sbCxwPW5ldyBUSFJFRS5WZWN0b3IzLHQ9bmV3IFRIUkVFLlZlY3RvcjMscz1uZXcgVEhSRUUuVmVjdG9yMyxxPW5ldyBUSFJFRS5WZWN0b3IzLG49bmV3IFRIUkVFLlZlY3RvcjM7aWYodGhpcy5hdHRyaWJ1dGVzLmluZGV4KXt2YXIgdT10aGlzLmF0dHJpYnV0ZXMuaW5kZXguYXJyYXkscj10aGlzLm9mZnNldHM7Yz0wO2ZvcihkPXIubGVuZ3RoO2M8ZDsrK2Mpe2I9cltjXS5zdGFydDtoPXJbY10uY291bnQ7dmFyIHY9XG5yW2NdLmluZGV4O2E9Yjtmb3IoYis9aDthPGI7YSs9MyloPXYrdVthXSxnPXYrdVthKzFdLGk9dit1W2ErMl0saz1lWzMqaF0sbT1lWzMqaCsxXSxsPWVbMypoKzJdLHAuc2V0KGssbSxsKSxrPWVbMypnXSxtPWVbMypnKzFdLGw9ZVszKmcrMl0sdC5zZXQoayxtLGwpLGs9ZVszKmldLG09ZVszKmkrMV0sbD1lWzMqaSsyXSxzLnNldChrLG0sbCkscS5zdWJWZWN0b3JzKHMsdCksbi5zdWJWZWN0b3JzKHAsdCkscS5jcm9zcyhuKSxmWzMqaF0rPXEueCxmWzMqaCsxXSs9cS55LGZbMypoKzJdKz1xLnosZlszKmddKz1xLngsZlszKmcrMV0rPXEueSxmWzMqZysyXSs9cS56LGZbMyppXSs9cS54LGZbMyppKzFdKz1xLnksZlszKmkrMl0rPXEuen19ZWxzZXthPTA7Zm9yKGI9ZS5sZW5ndGg7YTxiO2ErPTkpaz1lW2FdLG09ZVthKzFdLGw9ZVthKzJdLHAuc2V0KGssbSxsKSxrPWVbYSszXSxtPWVbYSs0XSxsPWVbYSs1XSx0LnNldChrLG0sbCksaz1lW2ErNl0sbT1lW2ErN10sbD1lW2ErOF0sXG5zLnNldChrLG0sbCkscS5zdWJWZWN0b3JzKHMsdCksbi5zdWJWZWN0b3JzKHAsdCkscS5jcm9zcyhuKSxmW2FdPXEueCxmW2ErMV09cS55LGZbYSsyXT1xLnosZlthKzNdPXEueCxmW2ErNF09cS55LGZbYSs1XT1xLnosZlthKzZdPXEueCxmW2ErN109cS55LGZbYSs4XT1xLnp9dGhpcy5ub3JtYWxpemVOb3JtYWxzKCk7dGhpcy5ub3JtYWxzTmVlZFVwZGF0ZT0hMH19LG5vcm1hbGl6ZU5vcm1hbHM6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5hdHRyaWJ1dGVzLm5vcm1hbC5hcnJheSxiLGMsZCxlPTAsZj1hLmxlbmd0aDtlPGY7ZSs9MyliPWFbZV0sYz1hW2UrMV0sZD1hW2UrMl0sYj0xL01hdGguc3FydChiKmIrYypjK2QqZCksYVtlXSo9YixhW2UrMV0qPWIsYVtlKzJdKj1ifSxjb21wdXRlVGFuZ2VudHM6ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe25hLng9ZFszKmFdO25hLnk9ZFszKmErMV07bmEuej1kWzMqYSsyXTtwYS5jb3B5KG5hKTtRPWdbYV07Si5jb3B5KFEpO0ouc3ViKG5hLm11bHRpcGx5U2NhbGFyKG5hLmRvdChRKSkpLm5vcm1hbGl6ZSgpO1xuY2EuY3Jvc3NWZWN0b3JzKHBhLFEpO1I9Y2EuZG90KGlbYV0pO0M9MD5SPy0xOjE7aFs0KmFdPUoueDtoWzQqYSsxXT1KLnk7aFs0KmErMl09Si56O2hbNCphKzNdPUN9aWYodm9pZCAwPT09dGhpcy5hdHRyaWJ1dGVzLmluZGV4fHx2b2lkIDA9PT10aGlzLmF0dHJpYnV0ZXMucG9zaXRpb258fHZvaWQgMD09PXRoaXMuYXR0cmlidXRlcy5ub3JtYWx8fHZvaWQgMD09PXRoaXMuYXR0cmlidXRlcy51diljb25zb2xlLndhcm4oXCJNaXNzaW5nIHJlcXVpcmVkIGF0dHJpYnV0ZXMgKGluZGV4LCBwb3NpdGlvbiwgbm9ybWFsIG9yIHV2KSBpbiBCdWZmZXJHZW9tZXRyeS5jb21wdXRlVGFuZ2VudHMoKVwiKTtlbHNle3ZhciBiPXRoaXMuYXR0cmlidXRlcy5pbmRleC5hcnJheSxjPXRoaXMuYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheSxkPXRoaXMuYXR0cmlidXRlcy5ub3JtYWwuYXJyYXksZT10aGlzLmF0dHJpYnV0ZXMudXYuYXJyYXksZj1jLmxlbmd0aC8zO3ZvaWQgMD09PXRoaXMuYXR0cmlidXRlcy50YW5nZW50JiZcbih0aGlzLmF0dHJpYnV0ZXMudGFuZ2VudD17aXRlbVNpemU6NCxhcnJheTpuZXcgRmxvYXQzMkFycmF5KDQqZil9KTtmb3IodmFyIGg9dGhpcy5hdHRyaWJ1dGVzLnRhbmdlbnQuYXJyYXksZz1bXSxpPVtdLGs9MDtrPGY7aysrKWdba109bmV3IFRIUkVFLlZlY3RvcjMsaVtrXT1uZXcgVEhSRUUuVmVjdG9yMzt2YXIgbSxsLHAsdCxzLHEsbix1LHIsdix6LEcsdyx5LEUsZj1uZXcgVEhSRUUuVmVjdG9yMyxrPW5ldyBUSFJFRS5WZWN0b3IzLEEsSyxELEYsTyx4LEksQj10aGlzLm9mZnNldHM7RD0wO2ZvcihGPUIubGVuZ3RoO0Q8RjsrK0Qpe0s9QltEXS5zdGFydDtPPUJbRF0uY291bnQ7dmFyIE09QltEXS5pbmRleDtBPUs7Zm9yKEsrPU87QTxLO0ErPTMpTz1NK2JbQV0seD1NK2JbQSsxXSxJPU0rYltBKzJdLG09Y1szKk9dLGw9Y1szKk8rMV0scD1jWzMqTysyXSx0PWNbMyp4XSxzPWNbMyp4KzFdLHE9Y1szKngrMl0sbj1jWzMqSV0sdT1jWzMqSSsxXSxyPWNbMypJKzJdLHY9ZVsyKlxuT10sej1lWzIqTysxXSxHPWVbMip4XSx3PWVbMip4KzFdLHk9ZVsyKkldLEU9ZVsyKkkrMV0sdC09bSxtPW4tbSxzLT1sLGw9dS1sLHEtPXAscD1yLXAsRy09dix2PXktdix3LT16LHo9RS16LEU9MS8oRyp6LXYqdyksZi5zZXQoKHoqdC13Km0pKkUsKHoqcy13KmwpKkUsKHoqcS13KnApKkUpLGsuc2V0KChHKm0tdip0KSpFLChHKmwtdipzKSpFLChHKnAtdipxKSpFKSxnW09dLmFkZChmKSxnW3hdLmFkZChmKSxnW0ldLmFkZChmKSxpW09dLmFkZChrKSxpW3hdLmFkZChrKSxpW0ldLmFkZChrKX12YXIgSj1uZXcgVEhSRUUuVmVjdG9yMyxjYT1uZXcgVEhSRUUuVmVjdG9yMyxuYT1uZXcgVEhSRUUuVmVjdG9yMyxwYT1uZXcgVEhSRUUuVmVjdG9yMyxDLFEsUjtEPTA7Zm9yKEY9Qi5sZW5ndGg7RDxGOysrRCl7Sz1CW0RdLnN0YXJ0O089QltEXS5jb3VudDtNPUJbRF0uaW5kZXg7QT1LO2ZvcihLKz1PO0E8SztBKz0zKU89TStiW0FdLHg9TStiW0ErMV0sST1NK2JbQSsyXSxhKE8pLGEoeCksXG5hKEkpfXRoaXMudGFuZ2VudHNOZWVkVXBkYXRlPXRoaXMuaGFzVGFuZ2VudHM9ITB9fSxjbG9uZTpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeSxiPVtJbnQ4QXJyYXksVWludDhBcnJheSxVaW50OENsYW1wZWRBcnJheSxJbnQxNkFycmF5LFVpbnQxNkFycmF5LEludDMyQXJyYXksVWludDMyQXJyYXksRmxvYXQzMkFycmF5LEZsb2F0NjRBcnJheV0sYztmb3IoYyBpbiB0aGlzLmF0dHJpYnV0ZXMpe2Zvcih2YXIgZD10aGlzLmF0dHJpYnV0ZXNbY10sZT1kLmFycmF5LGY9e2l0ZW1TaXplOmQuaXRlbVNpemUsbnVtSXRlbXM6ZC5udW1JdGVtcyxhcnJheTpudWxsfSxkPTAsaD1iLmxlbmd0aDtkPGg7ZCsrKXt2YXIgZz1iW2RdO2lmKGUgaW5zdGFuY2VvZiBnKXtmLmFycmF5PW5ldyBnKGUpO2JyZWFrfX1hLmF0dHJpYnV0ZXNbY109Zn1kPTA7Zm9yKGg9dGhpcy5vZmZzZXRzLmxlbmd0aDtkPGg7ZCsrKWI9dGhpcy5vZmZzZXRzW2RdLGEub2Zmc2V0cy5wdXNoKHtzdGFydDpiLnN0YXJ0LFxuaW5kZXg6Yi5pbmRleCxjb3VudDpiLmNvdW50fSk7cmV0dXJuIGF9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJkaXNwb3NlXCJ9KX19O1RIUkVFLkV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUuYXBwbHkoVEhSRUUuQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5DYW1lcmE9ZnVuY3Rpb24oKXtUSFJFRS5PYmplY3QzRC5jYWxsKHRoaXMpO3RoaXMubWF0cml4V29ybGRJbnZlcnNlPW5ldyBUSFJFRS5NYXRyaXg0O3RoaXMucHJvamVjdGlvbk1hdHJpeD1uZXcgVEhSRUUuTWF0cml4NDt0aGlzLnByb2plY3Rpb25NYXRyaXhJbnZlcnNlPW5ldyBUSFJFRS5NYXRyaXg0fTtUSFJFRS5DYW1lcmEucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlKTtUSFJFRS5DYW1lcmEucHJvdG90eXBlLmxvb2tBdD1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5NYXRyaXg0O3JldHVybiBmdW5jdGlvbihiKXthLmxvb2tBdCh0aGlzLnBvc2l0aW9uLGIsdGhpcy51cCk7dGhpcy5xdWF0ZXJuaW9uLnNldEZyb21Sb3RhdGlvbk1hdHJpeChhKX19KCk7XG5USFJFRS5DYW1lcmEucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEmJihhPW5ldyBUSFJFRS5DYW1lcmEpO1RIUkVFLk9iamVjdDNELnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMsYSk7YS5tYXRyaXhXb3JsZEludmVyc2UuY29weSh0aGlzLm1hdHJpeFdvcmxkSW52ZXJzZSk7YS5wcm9qZWN0aW9uTWF0cml4LmNvcHkodGhpcy5wcm9qZWN0aW9uTWF0cml4KTthLnByb2plY3Rpb25NYXRyaXhJbnZlcnNlLmNvcHkodGhpcy5wcm9qZWN0aW9uTWF0cml4SW52ZXJzZSk7cmV0dXJuIGF9O1RIUkVFLk9ydGhvZ3JhcGhpY0NhbWVyYT1mdW5jdGlvbihhLGIsYyxkLGUsZil7VEhSRUUuQ2FtZXJhLmNhbGwodGhpcyk7dGhpcy5sZWZ0PWE7dGhpcy5yaWdodD1iO3RoaXMudG9wPWM7dGhpcy5ib3R0b209ZDt0aGlzLm5lYXI9dm9pZCAwIT09ZT9lOjAuMTt0aGlzLmZhcj12b2lkIDAhPT1mP2Y6MkUzO3RoaXMudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpfTtUSFJFRS5PcnRob2dyYXBoaWNDYW1lcmEucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuQ2FtZXJhLnByb3RvdHlwZSk7VEhSRUUuT3J0aG9ncmFwaGljQ2FtZXJhLnByb3RvdHlwZS51cGRhdGVQcm9qZWN0aW9uTWF0cml4PWZ1bmN0aW9uKCl7dGhpcy5wcm9qZWN0aW9uTWF0cml4Lm1ha2VPcnRob2dyYXBoaWModGhpcy5sZWZ0LHRoaXMucmlnaHQsdGhpcy50b3AsdGhpcy5ib3R0b20sdGhpcy5uZWFyLHRoaXMuZmFyKX07XG5USFJFRS5PcnRob2dyYXBoaWNDYW1lcmEucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLk9ydGhvZ3JhcGhpY0NhbWVyYTtUSFJFRS5DYW1lcmEucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyxhKTthLmxlZnQ9dGhpcy5sZWZ0O2EucmlnaHQ9dGhpcy5yaWdodDthLnRvcD10aGlzLnRvcDthLmJvdHRvbT10aGlzLmJvdHRvbTthLm5lYXI9dGhpcy5uZWFyO2EuZmFyPXRoaXMuZmFyO3JldHVybiBhfTtUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYT1mdW5jdGlvbihhLGIsYyxkKXtUSFJFRS5DYW1lcmEuY2FsbCh0aGlzKTt0aGlzLmZvdj12b2lkIDAhPT1hP2E6NTA7dGhpcy5hc3BlY3Q9dm9pZCAwIT09Yj9iOjE7dGhpcy5uZWFyPXZvaWQgMCE9PWM/YzowLjE7dGhpcy5mYXI9dm9pZCAwIT09ZD9kOjJFMzt0aGlzLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKX07VEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuQ2FtZXJhLnByb3RvdHlwZSk7VEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEucHJvdG90eXBlLnNldExlbnM9ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1iJiYoYj0yNCk7dGhpcy5mb3Y9MipUSFJFRS5NYXRoLnJhZFRvRGVnKE1hdGguYXRhbihiLygyKmEpKSk7dGhpcy51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCl9O1xuVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEucHJvdG90eXBlLnNldFZpZXdPZmZzZXQ9ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3RoaXMuZnVsbFdpZHRoPWE7dGhpcy5mdWxsSGVpZ2h0PWI7dGhpcy54PWM7dGhpcy55PWQ7dGhpcy53aWR0aD1lO3RoaXMuaGVpZ2h0PWY7dGhpcy51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCl9O1xuVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEucHJvdG90eXBlLnVwZGF0ZVByb2plY3Rpb25NYXRyaXg9ZnVuY3Rpb24oKXtpZih0aGlzLmZ1bGxXaWR0aCl7dmFyIGE9dGhpcy5mdWxsV2lkdGgvdGhpcy5mdWxsSGVpZ2h0LGI9TWF0aC50YW4oVEhSRUUuTWF0aC5kZWdUb1JhZCgwLjUqdGhpcy5mb3YpKSp0aGlzLm5lYXIsYz0tYixkPWEqYyxhPU1hdGguYWJzKGEqYi1kKSxjPU1hdGguYWJzKGItYyk7dGhpcy5wcm9qZWN0aW9uTWF0cml4Lm1ha2VGcnVzdHVtKGQrdGhpcy54KmEvdGhpcy5mdWxsV2lkdGgsZCsodGhpcy54K3RoaXMud2lkdGgpKmEvdGhpcy5mdWxsV2lkdGgsYi0odGhpcy55K3RoaXMuaGVpZ2h0KSpjL3RoaXMuZnVsbEhlaWdodCxiLXRoaXMueSpjL3RoaXMuZnVsbEhlaWdodCx0aGlzLm5lYXIsdGhpcy5mYXIpfWVsc2UgdGhpcy5wcm9qZWN0aW9uTWF0cml4Lm1ha2VQZXJzcGVjdGl2ZSh0aGlzLmZvdix0aGlzLmFzcGVjdCx0aGlzLm5lYXIsdGhpcy5mYXIpfTtcblRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYTtUSFJFRS5DYW1lcmEucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyxhKTthLmZvdj10aGlzLmZvdjthLmFzcGVjdD10aGlzLmFzcGVjdDthLm5lYXI9dGhpcy5uZWFyO2EuZmFyPXRoaXMuZmFyO3JldHVybiBhfTtUSFJFRS5MaWdodD1mdW5jdGlvbihhKXtUSFJFRS5PYmplY3QzRC5jYWxsKHRoaXMpO3RoaXMuY29sb3I9bmV3IFRIUkVFLkNvbG9yKGEpfTtUSFJFRS5MaWdodC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUpO1RIUkVFLkxpZ2h0LnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbihhKXt2b2lkIDA9PT1hJiYoYT1uZXcgVEhSRUUuTGlnaHQpO1RIUkVFLk9iamVjdDNELnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMsYSk7YS5jb2xvci5jb3B5KHRoaXMuY29sb3IpO3JldHVybiBhfTtUSFJFRS5BbWJpZW50TGlnaHQ9ZnVuY3Rpb24oYSl7VEhSRUUuTGlnaHQuY2FsbCh0aGlzLGEpfTtUSFJFRS5BbWJpZW50TGlnaHQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTGlnaHQucHJvdG90eXBlKTtUSFJFRS5BbWJpZW50TGlnaHQucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLkFtYmllbnRMaWdodDtUSFJFRS5MaWdodC5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzLGEpO3JldHVybiBhfTtUSFJFRS5BcmVhTGlnaHQ9ZnVuY3Rpb24oYSxiKXtUSFJFRS5MaWdodC5jYWxsKHRoaXMsYSk7dGhpcy5ub3JtYWw9bmV3IFRIUkVFLlZlY3RvcjMoMCwtMSwwKTt0aGlzLnJpZ2h0PW5ldyBUSFJFRS5WZWN0b3IzKDEsMCwwKTt0aGlzLmludGVuc2l0eT12b2lkIDAhPT1iP2I6MTt0aGlzLmhlaWdodD10aGlzLndpZHRoPTE7dGhpcy5jb25zdGFudEF0dGVudWF0aW9uPTEuNTt0aGlzLmxpbmVhckF0dGVudWF0aW9uPTAuNTt0aGlzLnF1YWRyYXRpY0F0dGVudWF0aW9uPTAuMX07VEhSRUUuQXJlYUxpZ2h0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkxpZ2h0LnByb3RvdHlwZSk7VEhSRUUuRGlyZWN0aW9uYWxMaWdodD1mdW5jdGlvbihhLGIpe1RIUkVFLkxpZ2h0LmNhbGwodGhpcyxhKTt0aGlzLnBvc2l0aW9uLnNldCgwLDEsMCk7dGhpcy50YXJnZXQ9bmV3IFRIUkVFLk9iamVjdDNEO3RoaXMuaW50ZW5zaXR5PXZvaWQgMCE9PWI/YjoxO3RoaXMub25seVNoYWRvdz10aGlzLmNhc3RTaGFkb3c9ITE7dGhpcy5zaGFkb3dDYW1lcmFOZWFyPTUwO3RoaXMuc2hhZG93Q2FtZXJhRmFyPTVFMzt0aGlzLnNoYWRvd0NhbWVyYUxlZnQ9LTUwMDt0aGlzLnNoYWRvd0NhbWVyYVRvcD10aGlzLnNoYWRvd0NhbWVyYVJpZ2h0PTUwMDt0aGlzLnNoYWRvd0NhbWVyYUJvdHRvbT0tNTAwO3RoaXMuc2hhZG93Q2FtZXJhVmlzaWJsZT0hMTt0aGlzLnNoYWRvd0JpYXM9MDt0aGlzLnNoYWRvd0RhcmtuZXNzPTAuNTt0aGlzLnNoYWRvd01hcEhlaWdodD10aGlzLnNoYWRvd01hcFdpZHRoPTUxMjt0aGlzLnNoYWRvd0Nhc2NhZGU9ITE7dGhpcy5zaGFkb3dDYXNjYWRlT2Zmc2V0PW5ldyBUSFJFRS5WZWN0b3IzKDAsXG4wLC0xRTMpO3RoaXMuc2hhZG93Q2FzY2FkZUNvdW50PTI7dGhpcy5zaGFkb3dDYXNjYWRlQmlhcz1bMCwwLDBdO3RoaXMuc2hhZG93Q2FzY2FkZVdpZHRoPVs1MTIsNTEyLDUxMl07dGhpcy5zaGFkb3dDYXNjYWRlSGVpZ2h0PVs1MTIsNTEyLDUxMl07dGhpcy5zaGFkb3dDYXNjYWRlTmVhclo9Wy0xLDAuOTksMC45OThdO3RoaXMuc2hhZG93Q2FzY2FkZUZhclo9WzAuOTksMC45OTgsMV07dGhpcy5zaGFkb3dDYXNjYWRlQXJyYXk9W107dGhpcy5zaGFkb3dNYXRyaXg9dGhpcy5zaGFkb3dDYW1lcmE9dGhpcy5zaGFkb3dNYXBTaXplPXRoaXMuc2hhZG93TWFwPW51bGx9O1RIUkVFLkRpcmVjdGlvbmFsTGlnaHQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTGlnaHQucHJvdG90eXBlKTtcblRIUkVFLkRpcmVjdGlvbmFsTGlnaHQucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQ7VEhSRUUuTGlnaHQucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyxhKTthLnRhcmdldD10aGlzLnRhcmdldC5jbG9uZSgpO2EuaW50ZW5zaXR5PXRoaXMuaW50ZW5zaXR5O2EuY2FzdFNoYWRvdz10aGlzLmNhc3RTaGFkb3c7YS5vbmx5U2hhZG93PXRoaXMub25seVNoYWRvdztyZXR1cm4gYX07VEhSRUUuSGVtaXNwaGVyZUxpZ2h0PWZ1bmN0aW9uKGEsYixjKXtUSFJFRS5MaWdodC5jYWxsKHRoaXMsYSk7dGhpcy5wb3NpdGlvbi5zZXQoMCwxMDAsMCk7dGhpcy5ncm91bmRDb2xvcj1uZXcgVEhSRUUuQ29sb3IoYik7dGhpcy5pbnRlbnNpdHk9dm9pZCAwIT09Yz9jOjF9O1RIUkVFLkhlbWlzcGhlcmVMaWdodC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5MaWdodC5wcm90b3R5cGUpO1RIUkVFLkhlbWlzcGhlcmVMaWdodC5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuSGVtaXNwaGVyZUxpZ2h0O1RIUkVFLkxpZ2h0LnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMsYSk7YS5ncm91bmRDb2xvci5jb3B5KHRoaXMuZ3JvdW5kQ29sb3IpO2EuaW50ZW5zaXR5PXRoaXMuaW50ZW5zaXR5O3JldHVybiBhfTtUSFJFRS5Qb2ludExpZ2h0PWZ1bmN0aW9uKGEsYixjKXtUSFJFRS5MaWdodC5jYWxsKHRoaXMsYSk7dGhpcy5pbnRlbnNpdHk9dm9pZCAwIT09Yj9iOjE7dGhpcy5kaXN0YW5jZT12b2lkIDAhPT1jP2M6MH07VEhSRUUuUG9pbnRMaWdodC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5MaWdodC5wcm90b3R5cGUpO1RIUkVFLlBvaW50TGlnaHQucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlBvaW50TGlnaHQ7VEhSRUUuTGlnaHQucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyxhKTthLmludGVuc2l0eT10aGlzLmludGVuc2l0eTthLmRpc3RhbmNlPXRoaXMuZGlzdGFuY2U7cmV0dXJuIGF9O1RIUkVFLlNwb3RMaWdodD1mdW5jdGlvbihhLGIsYyxkLGUpe1RIUkVFLkxpZ2h0LmNhbGwodGhpcyxhKTt0aGlzLnBvc2l0aW9uLnNldCgwLDEsMCk7dGhpcy50YXJnZXQ9bmV3IFRIUkVFLk9iamVjdDNEO3RoaXMuaW50ZW5zaXR5PXZvaWQgMCE9PWI/YjoxO3RoaXMuZGlzdGFuY2U9dm9pZCAwIT09Yz9jOjA7dGhpcy5hbmdsZT12b2lkIDAhPT1kP2Q6TWF0aC5QSS8zO3RoaXMuZXhwb25lbnQ9dm9pZCAwIT09ZT9lOjEwO3RoaXMub25seVNoYWRvdz10aGlzLmNhc3RTaGFkb3c9ITE7dGhpcy5zaGFkb3dDYW1lcmFOZWFyPTUwO3RoaXMuc2hhZG93Q2FtZXJhRmFyPTVFMzt0aGlzLnNoYWRvd0NhbWVyYUZvdj01MDt0aGlzLnNoYWRvd0NhbWVyYVZpc2libGU9ITE7dGhpcy5zaGFkb3dCaWFzPTA7dGhpcy5zaGFkb3dEYXJrbmVzcz0wLjU7dGhpcy5zaGFkb3dNYXBIZWlnaHQ9dGhpcy5zaGFkb3dNYXBXaWR0aD01MTI7dGhpcy5zaGFkb3dNYXRyaXg9dGhpcy5zaGFkb3dDYW1lcmE9dGhpcy5zaGFkb3dNYXBTaXplPVxudGhpcy5zaGFkb3dNYXA9bnVsbH07VEhSRUUuU3BvdExpZ2h0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkxpZ2h0LnByb3RvdHlwZSk7VEhSRUUuU3BvdExpZ2h0LnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5TcG90TGlnaHQ7VEhSRUUuTGlnaHQucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyxhKTthLnRhcmdldD10aGlzLnRhcmdldC5jbG9uZSgpO2EuaW50ZW5zaXR5PXRoaXMuaW50ZW5zaXR5O2EuZGlzdGFuY2U9dGhpcy5kaXN0YW5jZTthLmFuZ2xlPXRoaXMuYW5nbGU7YS5leHBvbmVudD10aGlzLmV4cG9uZW50O2EuY2FzdFNoYWRvdz10aGlzLmNhc3RTaGFkb3c7YS5vbmx5U2hhZG93PXRoaXMub25seVNoYWRvdztyZXR1cm4gYX07VEhSRUUuTG9hZGVyPWZ1bmN0aW9uKGEpe3RoaXMuc3RhdHVzRG9tRWxlbWVudD0odGhpcy5zaG93U3RhdHVzPWEpP1RIUkVFLkxvYWRlci5wcm90b3R5cGUuYWRkU3RhdHVzRWxlbWVudCgpOm51bGw7dGhpcy5vbkxvYWRTdGFydD1mdW5jdGlvbigpe307dGhpcy5vbkxvYWRQcm9ncmVzcz1mdW5jdGlvbigpe307dGhpcy5vbkxvYWRDb21wbGV0ZT1mdW5jdGlvbigpe319O1xuVEhSRUUuTG9hZGVyLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuTG9hZGVyLGNyb3NzT3JpZ2luOlwiYW5vbnltb3VzXCIsYWRkU3RhdHVzRWxlbWVudDpmdW5jdGlvbigpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7YS5zdHlsZS5wb3NpdGlvbj1cImFic29sdXRlXCI7YS5zdHlsZS5yaWdodD1cIjBweFwiO2Euc3R5bGUudG9wPVwiMHB4XCI7YS5zdHlsZS5mb250U2l6ZT1cIjAuOGVtXCI7YS5zdHlsZS50ZXh0QWxpZ249XCJsZWZ0XCI7YS5zdHlsZS5iYWNrZ3JvdW5kPVwicmdiYSgwLDAsMCwwLjI1KVwiO2Euc3R5bGUuY29sb3I9XCIjZmZmXCI7YS5zdHlsZS53aWR0aD1cIjEyMHB4XCI7YS5zdHlsZS5wYWRkaW5nPVwiMC41ZW0gMC41ZW0gMC41ZW0gMC41ZW1cIjthLnN0eWxlLnpJbmRleD0xRTM7YS5pbm5lckhUTUw9XCJMb2FkaW5nIC4uLlwiO3JldHVybiBhfSx1cGRhdGVQcm9ncmVzczpmdW5jdGlvbihhKXt2YXIgYj1cIkxvYWRlZCBcIixiPWEudG90YWw/YisoKDEwMCphLmxvYWRlZC9cbmEudG90YWwpLnRvRml4ZWQoMCkrXCIlXCIpOmIrKChhLmxvYWRlZC8xRTMpLnRvRml4ZWQoMikrXCIgS0JcIik7dGhpcy5zdGF0dXNEb21FbGVtZW50LmlubmVySFRNTD1ifSxleHRyYWN0VXJsQmFzZTpmdW5jdGlvbihhKXthPWEuc3BsaXQoXCIvXCIpO2EucG9wKCk7cmV0dXJuKDE+YS5sZW5ndGg/XCIuXCI6YS5qb2luKFwiL1wiKSkrXCIvXCJ9LGluaXRNYXRlcmlhbHM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9W10sZD0wO2Q8YS5sZW5ndGg7KytkKWNbZF09VEhSRUUuTG9hZGVyLnByb3RvdHlwZS5jcmVhdGVNYXRlcmlhbChhW2RdLGIpO3JldHVybiBjfSxuZWVkc1RhbmdlbnRzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9YS5sZW5ndGg7YjxjO2IrKylpZihhW2JdaW5zdGFuY2VvZiBUSFJFRS5TaGFkZXJNYXRlcmlhbClyZXR1cm4hMDtyZXR1cm4hMX0sY3JlYXRlTWF0ZXJpYWw6ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEpe2E9TWF0aC5sb2coYSkvTWF0aC5MTjI7cmV0dXJuIE1hdGguZmxvb3IoYSk9PVxuYX1mdW5jdGlvbiBkKGEpe2E9TWF0aC5sb2coYSkvTWF0aC5MTjI7cmV0dXJuIE1hdGgucG93KDIsTWF0aC5yb3VuZChhKSl9ZnVuY3Rpb24gZShhLGUsZixnLGksayxuKXt2YXIgdT0vXFwuZGRzJC9pLnRlc3QoZikscj1iK1wiL1wiK2Y7aWYodSl7dmFyIHY9VEhSRUUuSW1hZ2VVdGlscy5sb2FkQ29tcHJlc3NlZFRleHR1cmUocik7YVtlXT12fWVsc2Ugdj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLGFbZV09bmV3IFRIUkVFLlRleHR1cmUodik7YVtlXS5zb3VyY2VGaWxlPWY7ZyYmKGFbZV0ucmVwZWF0LnNldChnWzBdLGdbMV0pLDEhPT1nWzBdJiYoYVtlXS53cmFwUz1USFJFRS5SZXBlYXRXcmFwcGluZyksMSE9PWdbMV0mJihhW2VdLndyYXBUPVRIUkVFLlJlcGVhdFdyYXBwaW5nKSk7aSYmYVtlXS5vZmZzZXQuc2V0KGlbMF0saVsxXSk7ayYmKGY9e3JlcGVhdDpUSFJFRS5SZXBlYXRXcmFwcGluZyxtaXJyb3I6VEhSRUUuTWlycm9yZWRSZXBlYXRXcmFwcGluZ30sdm9pZCAwIT09XG5mW2tbMF1dJiYoYVtlXS53cmFwUz1mW2tbMF1dKSx2b2lkIDAhPT1mW2tbMV1dJiYoYVtlXS53cmFwVD1mW2tbMV1dKSk7biYmKGFbZV0uYW5pc290cm9weT1uKTtpZighdSl7dmFyIHo9YVtlXSxhPW5ldyBJbWFnZTthLm9ubG9hZD1mdW5jdGlvbigpe2lmKCFjKHRoaXMud2lkdGgpfHwhYyh0aGlzLmhlaWdodCkpe3ZhciBhPWQodGhpcy53aWR0aCksYj1kKHRoaXMuaGVpZ2h0KTt6LmltYWdlLndpZHRoPWE7ei5pbWFnZS5oZWlnaHQ9Yjt6LmltYWdlLmdldENvbnRleHQoXCIyZFwiKS5kcmF3SW1hZ2UodGhpcywwLDAsYSxiKX1lbHNlIHouaW1hZ2U9dGhpczt6Lm5lZWRzVXBkYXRlPSEwfTthLmNyb3NzT3JpZ2luPWguY3Jvc3NPcmlnaW47YS5zcmM9cn19ZnVuY3Rpb24gZihhKXtyZXR1cm4oMjU1KmFbMF08PDE2KSsoMjU1KmFbMV08PDgpKzI1NSphWzJdfXZhciBoPXRoaXMsZz1cIk1lc2hMYW1iZXJ0TWF0ZXJpYWxcIixpPXtjb2xvcjoxNTY1ODczNCxvcGFjaXR5OjEsbWFwOm51bGwsXG5saWdodE1hcDpudWxsLG5vcm1hbE1hcDpudWxsLGJ1bXBNYXA6bnVsbCx3aXJlZnJhbWU6ITF9O2lmKGEuc2hhZGluZyl7dmFyIGs9YS5zaGFkaW5nLnRvTG93ZXJDYXNlKCk7XCJwaG9uZ1wiPT09az9nPVwiTWVzaFBob25nTWF0ZXJpYWxcIjpcImJhc2ljXCI9PT1rJiYoZz1cIk1lc2hCYXNpY01hdGVyaWFsXCIpfXZvaWQgMCE9PWEuYmxlbmRpbmcmJnZvaWQgMCE9PVRIUkVFW2EuYmxlbmRpbmddJiYoaS5ibGVuZGluZz1USFJFRVthLmJsZW5kaW5nXSk7aWYodm9pZCAwIT09YS50cmFuc3BhcmVudHx8MT5hLm9wYWNpdHkpaS50cmFuc3BhcmVudD1hLnRyYW5zcGFyZW50O3ZvaWQgMCE9PWEuZGVwdGhUZXN0JiYoaS5kZXB0aFRlc3Q9YS5kZXB0aFRlc3QpO3ZvaWQgMCE9PWEuZGVwdGhXcml0ZSYmKGkuZGVwdGhXcml0ZT1hLmRlcHRoV3JpdGUpO3ZvaWQgMCE9PWEudmlzaWJsZSYmKGkudmlzaWJsZT1hLnZpc2libGUpO3ZvaWQgMCE9PWEuZmxpcFNpZGVkJiYoaS5zaWRlPVRIUkVFLkJhY2tTaWRlKTtcbnZvaWQgMCE9PWEuZG91YmxlU2lkZWQmJihpLnNpZGU9VEhSRUUuRG91YmxlU2lkZSk7dm9pZCAwIT09YS53aXJlZnJhbWUmJihpLndpcmVmcmFtZT1hLndpcmVmcmFtZSk7dm9pZCAwIT09YS52ZXJ0ZXhDb2xvcnMmJihcImZhY2VcIj09PWEudmVydGV4Q29sb3JzP2kudmVydGV4Q29sb3JzPVRIUkVFLkZhY2VDb2xvcnM6YS52ZXJ0ZXhDb2xvcnMmJihpLnZlcnRleENvbG9ycz1USFJFRS5WZXJ0ZXhDb2xvcnMpKTthLmNvbG9yRGlmZnVzZT9pLmNvbG9yPWYoYS5jb2xvckRpZmZ1c2UpOmEuRGJnQ29sb3ImJihpLmNvbG9yPWEuRGJnQ29sb3IpO2EuY29sb3JTcGVjdWxhciYmKGkuc3BlY3VsYXI9ZihhLmNvbG9yU3BlY3VsYXIpKTthLmNvbG9yQW1iaWVudCYmKGkuYW1iaWVudD1mKGEuY29sb3JBbWJpZW50KSk7YS50cmFuc3BhcmVuY3kmJihpLm9wYWNpdHk9YS50cmFuc3BhcmVuY3kpO2Euc3BlY3VsYXJDb2VmJiYoaS5zaGluaW5lc3M9YS5zcGVjdWxhckNvZWYpO2EubWFwRGlmZnVzZSYmXG5iJiZlKGksXCJtYXBcIixhLm1hcERpZmZ1c2UsYS5tYXBEaWZmdXNlUmVwZWF0LGEubWFwRGlmZnVzZU9mZnNldCxhLm1hcERpZmZ1c2VXcmFwLGEubWFwRGlmZnVzZUFuaXNvdHJvcHkpO2EubWFwTGlnaHQmJmImJmUoaSxcImxpZ2h0TWFwXCIsYS5tYXBMaWdodCxhLm1hcExpZ2h0UmVwZWF0LGEubWFwTGlnaHRPZmZzZXQsYS5tYXBMaWdodFdyYXAsYS5tYXBMaWdodEFuaXNvdHJvcHkpO2EubWFwQnVtcCYmYiYmZShpLFwiYnVtcE1hcFwiLGEubWFwQnVtcCxhLm1hcEJ1bXBSZXBlYXQsYS5tYXBCdW1wT2Zmc2V0LGEubWFwQnVtcFdyYXAsYS5tYXBCdW1wQW5pc290cm9weSk7YS5tYXBOb3JtYWwmJmImJmUoaSxcIm5vcm1hbE1hcFwiLGEubWFwTm9ybWFsLGEubWFwTm9ybWFsUmVwZWF0LGEubWFwTm9ybWFsT2Zmc2V0LGEubWFwTm9ybWFsV3JhcCxhLm1hcE5vcm1hbEFuaXNvdHJvcHkpO2EubWFwU3BlY3VsYXImJmImJmUoaSxcInNwZWN1bGFyTWFwXCIsYS5tYXBTcGVjdWxhcixhLm1hcFNwZWN1bGFyUmVwZWF0LFxuYS5tYXBTcGVjdWxhck9mZnNldCxhLm1hcFNwZWN1bGFyV3JhcCxhLm1hcFNwZWN1bGFyQW5pc290cm9weSk7YS5tYXBCdW1wU2NhbGUmJihpLmJ1bXBTY2FsZT1hLm1hcEJ1bXBTY2FsZSk7YS5tYXBOb3JtYWw/KGc9VEhSRUUuU2hhZGVyTGliLm5vcm1hbG1hcCxrPVRIUkVFLlVuaWZvcm1zVXRpbHMuY2xvbmUoZy51bmlmb3Jtcyksay50Tm9ybWFsLnZhbHVlPWkubm9ybWFsTWFwLGEubWFwTm9ybWFsRmFjdG9yJiZrLnVOb3JtYWxTY2FsZS52YWx1ZS5zZXQoYS5tYXBOb3JtYWxGYWN0b3IsYS5tYXBOb3JtYWxGYWN0b3IpLGkubWFwJiYoay50RGlmZnVzZS52YWx1ZT1pLm1hcCxrLmVuYWJsZURpZmZ1c2UudmFsdWU9ITApLGkuc3BlY3VsYXJNYXAmJihrLnRTcGVjdWxhci52YWx1ZT1pLnNwZWN1bGFyTWFwLGsuZW5hYmxlU3BlY3VsYXIudmFsdWU9ITApLGkubGlnaHRNYXAmJihrLnRBTy52YWx1ZT1pLmxpZ2h0TWFwLGsuZW5hYmxlQU8udmFsdWU9ITApLGsudURpZmZ1c2VDb2xvci52YWx1ZS5zZXRIZXgoaS5jb2xvciksXG5rLnVTcGVjdWxhckNvbG9yLnZhbHVlLnNldEhleChpLnNwZWN1bGFyKSxrLnVBbWJpZW50Q29sb3IudmFsdWUuc2V0SGV4KGkuYW1iaWVudCksay51U2hpbmluZXNzLnZhbHVlPWkuc2hpbmluZXNzLHZvaWQgMCE9PWkub3BhY2l0eSYmKGsudU9wYWNpdHkudmFsdWU9aS5vcGFjaXR5KSxnPW5ldyBUSFJFRS5TaGFkZXJNYXRlcmlhbCh7ZnJhZ21lbnRTaGFkZXI6Zy5mcmFnbWVudFNoYWRlcix2ZXJ0ZXhTaGFkZXI6Zy52ZXJ0ZXhTaGFkZXIsdW5pZm9ybXM6ayxsaWdodHM6ITAsZm9nOiEwfSksaS50cmFuc3BhcmVudCYmKGcudHJhbnNwYXJlbnQ9ITApKTpnPW5ldyBUSFJFRVtnXShpKTt2b2lkIDAhPT1hLkRiZ05hbWUmJihnLm5hbWU9YS5EYmdOYW1lKTtyZXR1cm4gZ319O1RIUkVFLlhIUkxvYWRlcj1mdW5jdGlvbihhKXt0aGlzLm1hbmFnZXI9dm9pZCAwIT09YT9hOlRIUkVFLkRlZmF1bHRMb2FkaW5nTWFuYWdlcn07XG5USFJFRS5YSFJMb2FkZXIucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5YSFJMb2FkZXIsbG9hZDpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzLGY9bmV3IFhNTEh0dHBSZXF1ZXN0O3ZvaWQgMCE9PWImJmYuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixmdW5jdGlvbihjKXtiKGMudGFyZ2V0LnJlc3BvbnNlVGV4dCk7ZS5tYW5hZ2VyLml0ZW1FbmQoYSl9LCExKTt2b2lkIDAhPT1jJiZmLmFkZEV2ZW50TGlzdGVuZXIoXCJwcm9ncmVzc1wiLGZ1bmN0aW9uKGEpe2MoYSl9LCExKTt2b2lkIDAhPT1kJiZmLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLGZ1bmN0aW9uKGEpe2QoYSl9LCExKTt2b2lkIDAhPT10aGlzLmNyb3NzT3JpZ2luJiYoZi5jcm9zc09yaWdpbj10aGlzLmNyb3NzT3JpZ2luKTtmLm9wZW4oXCJHRVRcIixhLCEwKTtmLnNlbmQobnVsbCk7ZS5tYW5hZ2VyLml0ZW1TdGFydChhKX0sc2V0Q3Jvc3NPcmlnaW46ZnVuY3Rpb24oYSl7dGhpcy5jcm9zc09yaWdpbj1hfX07VEhSRUUuSW1hZ2VMb2FkZXI9ZnVuY3Rpb24oYSl7dGhpcy5tYW5hZ2VyPXZvaWQgMCE9PWE/YTpUSFJFRS5EZWZhdWx0TG9hZGluZ01hbmFnZXJ9O1xuVEhSRUUuSW1hZ2VMb2FkZXIucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5JbWFnZUxvYWRlcixsb2FkOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXRoaXMsZj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO3ZvaWQgMCE9PWImJmYuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixmdW5jdGlvbigpe2UubWFuYWdlci5pdGVtRW5kKGEpO2IodGhpcyl9LCExKTt2b2lkIDAhPT1jJiZmLmFkZEV2ZW50TGlzdGVuZXIoXCJwcm9ncmVzc1wiLGZ1bmN0aW9uKGEpe2MoYSl9LCExKTt2b2lkIDAhPT1kJiZmLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLGZ1bmN0aW9uKGEpe2QoYSl9LCExKTt2b2lkIDAhPT10aGlzLmNyb3NzT3JpZ2luJiYoZi5jcm9zc09yaWdpbj10aGlzLmNyb3NzT3JpZ2luKTtmLnNyYz1hO2UubWFuYWdlci5pdGVtU3RhcnQoYSk7cmV0dXJuIGZ9LHNldENyb3NzT3JpZ2luOmZ1bmN0aW9uKGEpe3RoaXMuY3Jvc3NPcmlnaW49YX19O1RIUkVFLkpTT05Mb2FkZXI9ZnVuY3Rpb24oYSl7VEhSRUUuTG9hZGVyLmNhbGwodGhpcyxhKTt0aGlzLndpdGhDcmVkZW50aWFscz0hMX07VEhSRUUuSlNPTkxvYWRlci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5Mb2FkZXIucHJvdG90eXBlKTtUSFJFRS5KU09OTG9hZGVyLnByb3RvdHlwZS5sb2FkPWZ1bmN0aW9uKGEsYixjKXtjPWMmJlwic3RyaW5nXCI9PT10eXBlb2YgYz9jOnRoaXMuZXh0cmFjdFVybEJhc2UoYSk7dGhpcy5vbkxvYWRTdGFydCgpO3RoaXMubG9hZEFqYXhKU09OKHRoaXMsYSxiLGMpfTtcblRIUkVFLkpTT05Mb2FkZXIucHJvdG90eXBlLmxvYWRBamF4SlNPTj1mdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPW5ldyBYTUxIdHRwUmVxdWVzdCxoPTA7Zi5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtpZihmLnJlYWR5U3RhdGU9PT1mLkRPTkUpaWYoMjAwPT09Zi5zdGF0dXN8fDA9PT1mLnN0YXR1cyl7aWYoZi5yZXNwb25zZVRleHQpe3ZhciBnPUpTT04ucGFyc2UoZi5yZXNwb25zZVRleHQpLGc9YS5wYXJzZShnLGQpO2MoZy5nZW9tZXRyeSxnLm1hdGVyaWFscyl9ZWxzZSBjb25zb2xlLndhcm4oXCJUSFJFRS5KU09OTG9hZGVyOiBbXCIrYitcIl0gc2VlbXMgdG8gYmUgdW5yZWFjaGFibGUgb3IgZmlsZSB0aGVyZSBpcyBlbXB0eVwiKTthLm9uTG9hZENvbXBsZXRlKCl9ZWxzZSBjb25zb2xlLmVycm9yKFwiVEhSRUUuSlNPTkxvYWRlcjogQ291bGRuJ3QgbG9hZCBbXCIrYitcIl0gW1wiK2Yuc3RhdHVzK1wiXVwiKTtlbHNlIGYucmVhZHlTdGF0ZT09PWYuTE9BRElORz9lJiYoMD09PWgmJlxuKGg9Zi5nZXRSZXNwb25zZUhlYWRlcihcIkNvbnRlbnQtTGVuZ3RoXCIpKSxlKHt0b3RhbDpoLGxvYWRlZDpmLnJlc3BvbnNlVGV4dC5sZW5ndGh9KSk6Zi5yZWFkeVN0YXRlPT09Zi5IRUFERVJTX1JFQ0VJVkVEJiZ2b2lkIDAhPT1lJiYoaD1mLmdldFJlc3BvbnNlSGVhZGVyKFwiQ29udGVudC1MZW5ndGhcIikpfTtmLm9wZW4oXCJHRVRcIixiLCEwKTtmLndpdGhDcmVkZW50aWFscz10aGlzLndpdGhDcmVkZW50aWFscztmLnNlbmQobnVsbCl9O1xuVEhSRUUuSlNPTkxvYWRlci5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgVEhSRUUuR2VvbWV0cnksZD12b2lkIDAhPT1hLnNjYWxlPzEvYS5zY2FsZToxLGUsZixoLGcsaSxrLG0sbCxwLHQscyxxLG4sdSxyPWEuZmFjZXM7cD1hLnZlcnRpY2VzO3ZhciB2PWEubm9ybWFscyx6PWEuY29sb3JzLEc9MDtpZih2b2lkIDAhPT1hLnV2cyl7Zm9yKGU9MDtlPGEudXZzLmxlbmd0aDtlKyspYS51dnNbZV0ubGVuZ3RoJiZHKys7Zm9yKGU9MDtlPEc7ZSsrKWMuZmFjZVZlcnRleFV2c1tlXT1bXX1nPTA7Zm9yKGk9cC5sZW5ndGg7ZzxpOylrPW5ldyBUSFJFRS5WZWN0b3IzLGsueD1wW2crK10qZCxrLnk9cFtnKytdKmQsay56PXBbZysrXSpkLGMudmVydGljZXMucHVzaChrKTtnPTA7Zm9yKGk9ci5sZW5ndGg7ZzxpOylpZihwPXJbZysrXSx0PXAmMSxoPXAmMixlPXAmOCxtPXAmMTYscz1wJjMyLGs9cCY2NCxwJj0xMjgsdCl7dD1uZXcgVEhSRUUuRmFjZTM7dC5hPXJbZ107XG50LmI9cltnKzFdO3QuYz1yW2crM107cT1uZXcgVEhSRUUuRmFjZTM7cS5hPXJbZysxXTtxLmI9cltnKzJdO3EuYz1yW2crM107Zys9NDtoJiYoaD1yW2crK10sdC5tYXRlcmlhbEluZGV4PWgscS5tYXRlcmlhbEluZGV4PWgpO2g9Yy5mYWNlcy5sZW5ndGg7aWYoZSlmb3IoZT0wO2U8RztlKyspe249YS51dnNbZV07Yy5mYWNlVmVydGV4VXZzW2VdW2hdPVtdO2MuZmFjZVZlcnRleFV2c1tlXVtoKzFdPVtdO2ZvcihmPTA7ND5mO2YrKylsPXJbZysrXSx1PW5bMipsXSxsPW5bMipsKzFdLHU9bmV3IFRIUkVFLlZlY3RvcjIodSxsKSwyIT09ZiYmYy5mYWNlVmVydGV4VXZzW2VdW2hdLnB1c2godSksMCE9PWYmJmMuZmFjZVZlcnRleFV2c1tlXVtoKzFdLnB1c2godSl9bSYmKG09MypyW2crK10sdC5ub3JtYWwuc2V0KHZbbSsrXSx2W20rK10sdlttXSkscS5ub3JtYWwuY29weSh0Lm5vcm1hbCkpO2lmKHMpZm9yKGU9MDs0PmU7ZSsrKW09MypyW2crK10scz1uZXcgVEhSRUUuVmVjdG9yMyh2W20rK10sXG52W20rK10sdlttXSksMiE9PWUmJnQudmVydGV4Tm9ybWFscy5wdXNoKHMpLDAhPT1lJiZxLnZlcnRleE5vcm1hbHMucHVzaChzKTtrJiYoaz1yW2crK10saz16W2tdLHQuY29sb3Iuc2V0SGV4KGspLHEuY29sb3Iuc2V0SGV4KGspKTtpZihwKWZvcihlPTA7ND5lO2UrKylrPXJbZysrXSxrPXpba10sMiE9PWUmJnQudmVydGV4Q29sb3JzLnB1c2gobmV3IFRIUkVFLkNvbG9yKGspKSwwIT09ZSYmcS52ZXJ0ZXhDb2xvcnMucHVzaChuZXcgVEhSRUUuQ29sb3IoaykpO2MuZmFjZXMucHVzaCh0KTtjLmZhY2VzLnB1c2gocSl9ZWxzZXt0PW5ldyBUSFJFRS5GYWNlMzt0LmE9cltnKytdO3QuYj1yW2crK107dC5jPXJbZysrXTtoJiYoaD1yW2crK10sdC5tYXRlcmlhbEluZGV4PWgpO2g9Yy5mYWNlcy5sZW5ndGg7aWYoZSlmb3IoZT0wO2U8RztlKyspe249YS51dnNbZV07Yy5mYWNlVmVydGV4VXZzW2VdW2hdPVtdO2ZvcihmPTA7Mz5mO2YrKylsPXJbZysrXSx1PW5bMipsXSxsPW5bMipsKzFdLFxudT1uZXcgVEhSRUUuVmVjdG9yMih1LGwpLGMuZmFjZVZlcnRleFV2c1tlXVtoXS5wdXNoKHUpfW0mJihtPTMqcltnKytdLHQubm9ybWFsLnNldCh2W20rK10sdlttKytdLHZbbV0pKTtpZihzKWZvcihlPTA7Mz5lO2UrKyltPTMqcltnKytdLHM9bmV3IFRIUkVFLlZlY3RvcjModlttKytdLHZbbSsrXSx2W21dKSx0LnZlcnRleE5vcm1hbHMucHVzaChzKTtrJiYoaz1yW2crK10sdC5jb2xvci5zZXRIZXgoeltrXSkpO2lmKHApZm9yKGU9MDszPmU7ZSsrKWs9cltnKytdLHQudmVydGV4Q29sb3JzLnB1c2gobmV3IFRIUkVFLkNvbG9yKHpba10pKTtjLmZhY2VzLnB1c2godCl9aWYoYS5za2luV2VpZ2h0cyl7Zz0wO2ZvcihpPWEuc2tpbldlaWdodHMubGVuZ3RoO2c8aTtnKz0yKXI9YS5za2luV2VpZ2h0c1tnXSx2PWEuc2tpbldlaWdodHNbZysxXSxjLnNraW5XZWlnaHRzLnB1c2gobmV3IFRIUkVFLlZlY3RvcjQocix2LDAsMCkpfWlmKGEuc2tpbkluZGljZXMpe2c9MDtmb3IoaT1hLnNraW5JbmRpY2VzLmxlbmd0aDtnPFxuaTtnKz0yKXI9YS5za2luSW5kaWNlc1tnXSx2PWEuc2tpbkluZGljZXNbZysxXSxjLnNraW5JbmRpY2VzLnB1c2gobmV3IFRIUkVFLlZlY3RvcjQocix2LDAsMCkpfWMuYm9uZXM9YS5ib25lcztjLmFuaW1hdGlvbj1hLmFuaW1hdGlvbjtjLmFuaW1hdGlvbnM9YS5hbmltYXRpb25zO2lmKHZvaWQgMCE9PWEubW9ycGhUYXJnZXRzKXtnPTA7Zm9yKGk9YS5tb3JwaFRhcmdldHMubGVuZ3RoO2c8aTtnKyspe2MubW9ycGhUYXJnZXRzW2ddPXt9O2MubW9ycGhUYXJnZXRzW2ddLm5hbWU9YS5tb3JwaFRhcmdldHNbZ10ubmFtZTtjLm1vcnBoVGFyZ2V0c1tnXS52ZXJ0aWNlcz1bXTt6PWMubW9ycGhUYXJnZXRzW2ddLnZlcnRpY2VzO0c9YS5tb3JwaFRhcmdldHNbZ10udmVydGljZXM7cj0wO2Zvcih2PUcubGVuZ3RoO3I8djtyKz0zKXA9bmV3IFRIUkVFLlZlY3RvcjMscC54PUdbcl0qZCxwLnk9R1tyKzFdKmQscC56PUdbcisyXSpkLHoucHVzaChwKX19aWYodm9pZCAwIT09YS5tb3JwaENvbG9ycyl7Zz1cbjA7Zm9yKGk9YS5tb3JwaENvbG9ycy5sZW5ndGg7ZzxpO2crKyl7Yy5tb3JwaENvbG9yc1tnXT17fTtjLm1vcnBoQ29sb3JzW2ddLm5hbWU9YS5tb3JwaENvbG9yc1tnXS5uYW1lO2MubW9ycGhDb2xvcnNbZ10uY29sb3JzPVtdO3Y9Yy5tb3JwaENvbG9yc1tnXS5jb2xvcnM7ej1hLm1vcnBoQ29sb3JzW2ddLmNvbG9ycztkPTA7Zm9yKHI9ei5sZW5ndGg7ZDxyO2QrPTMpRz1uZXcgVEhSRUUuQ29sb3IoMTY3NTUyMDApLEcuc2V0UkdCKHpbZF0seltkKzFdLHpbZCsyXSksdi5wdXNoKEcpfX1jLmNvbXB1dGVDZW50cm9pZHMoKTtjLmNvbXB1dGVGYWNlTm9ybWFscygpO2MuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk7aWYodm9pZCAwPT09YS5tYXRlcmlhbHMpcmV0dXJue2dlb21ldHJ5OmN9O2Q9dGhpcy5pbml0TWF0ZXJpYWxzKGEubWF0ZXJpYWxzLGIpO3RoaXMubmVlZHNUYW5nZW50cyhkKSYmYy5jb21wdXRlVGFuZ2VudHMoKTtyZXR1cm57Z2VvbWV0cnk6YyxtYXRlcmlhbHM6ZH19O1RIUkVFLkxvYWRpbmdNYW5hZ2VyPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLGU9MCxmPTA7dGhpcy5vbkxvYWQ9YTt0aGlzLm9uUHJvZ3Jlc3M9Yjt0aGlzLm9uRXJyb3I9Yzt0aGlzLml0ZW1TdGFydD1mdW5jdGlvbigpe2YrK307dGhpcy5pdGVtRW5kPWZ1bmN0aW9uKGEpe2UrKztpZih2b2lkIDAhPT1kLm9uUHJvZ3Jlc3MpZC5vblByb2dyZXNzKGEsZSxmKTtpZihlPT09ZiYmdm9pZCAwIT09ZC5vbkxvYWQpZC5vbkxvYWQoKX19O1RIUkVFLkRlZmF1bHRMb2FkaW5nTWFuYWdlcj1uZXcgVEhSRUUuTG9hZGluZ01hbmFnZXI7VEhSRUUuQnVmZmVyR2VvbWV0cnlMb2FkZXI9ZnVuY3Rpb24oYSl7dGhpcy5tYW5hZ2VyPXZvaWQgMCE9PWE/YTpUSFJFRS5EZWZhdWx0TG9hZGluZ01hbmFnZXJ9O1xuVEhSRUUuQnVmZmVyR2VvbWV0cnlMb2FkZXIucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5CdWZmZXJHZW9tZXRyeUxvYWRlcixsb2FkOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcyxkPW5ldyBUSFJFRS5YSFJMb2FkZXI7ZC5zZXRDcm9zc09yaWdpbih0aGlzLmNyb3NzT3JpZ2luKTtkLmxvYWQoYSxmdW5jdGlvbihhKXtiKGMucGFyc2UoSlNPTi5wYXJzZShhKSkpfSl9LHNldENyb3NzT3JpZ2luOmZ1bmN0aW9uKGEpe3RoaXMuY3Jvc3NPcmlnaW49YX0scGFyc2U6ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5LGM9YS5hdHRyaWJ1dGVzLGQ9YS5vZmZzZXRzLGE9YS5ib3VuZGluZ1NwaGVyZSxlO2ZvcihlIGluIGMpe3ZhciBmPWNbZV07Yi5hdHRyaWJ1dGVzW2VdPXtpdGVtU2l6ZTpmLml0ZW1TaXplLGFycmF5Om5ldyBzZWxmW2YudHlwZV0oZi5hcnJheSl9fXZvaWQgMCE9PWQmJihiLm9mZnNldHM9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShkKSkpO1xudm9pZCAwIT09YSYmKGIuYm91bmRpbmdTcGhlcmU9bmV3IFRIUkVFLlNwaGVyZSgobmV3IFRIUkVFLlZlY3RvcjMpLmZyb21BcnJheSh2b2lkIDAhPT1hLmNlbnRlcj9hLmNlbnRlcjpbMCwwLDBdKSxhLnJhZGl1cykpO3JldHVybiBifX07VEhSRUUuR2VvbWV0cnlMb2FkZXI9ZnVuY3Rpb24oYSl7dGhpcy5tYW5hZ2VyPXZvaWQgMCE9PWE/YTpUSFJFRS5EZWZhdWx0TG9hZGluZ01hbmFnZXJ9O1RIUkVFLkdlb21ldHJ5TG9hZGVyLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuR2VvbWV0cnlMb2FkZXIsbG9hZDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD1uZXcgVEhSRUUuWEhSTG9hZGVyO2Quc2V0Q3Jvc3NPcmlnaW4odGhpcy5jcm9zc09yaWdpbik7ZC5sb2FkKGEsZnVuY3Rpb24oYSl7YihjLnBhcnNlKEpTT04ucGFyc2UoYSkpKX0pfSxzZXRDcm9zc09yaWdpbjpmdW5jdGlvbihhKXt0aGlzLmNyb3NzT3JpZ2luPWF9LHBhcnNlOmZ1bmN0aW9uKCl7fX07VEhSRUUuTWF0ZXJpYWxMb2FkZXI9ZnVuY3Rpb24oYSl7dGhpcy5tYW5hZ2VyPXZvaWQgMCE9PWE/YTpUSFJFRS5EZWZhdWx0TG9hZGluZ01hbmFnZXJ9O1xuVEhSRUUuTWF0ZXJpYWxMb2FkZXIucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5NYXRlcmlhbExvYWRlcixsb2FkOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcyxkPW5ldyBUSFJFRS5YSFJMb2FkZXI7ZC5zZXRDcm9zc09yaWdpbih0aGlzLmNyb3NzT3JpZ2luKTtkLmxvYWQoYSxmdW5jdGlvbihhKXtiKGMucGFyc2UoSlNPTi5wYXJzZShhKSkpfSl9LHNldENyb3NzT3JpZ2luOmZ1bmN0aW9uKGEpe3RoaXMuY3Jvc3NPcmlnaW49YX0scGFyc2U6ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IFRIUkVFW2EudHlwZV07dm9pZCAwIT09YS5jb2xvciYmYi5jb2xvci5zZXRIZXgoYS5jb2xvcik7dm9pZCAwIT09YS5hbWJpZW50JiZiLmFtYmllbnQuc2V0SGV4KGEuYW1iaWVudCk7dm9pZCAwIT09YS5lbWlzc2l2ZSYmYi5lbWlzc2l2ZS5zZXRIZXgoYS5lbWlzc2l2ZSk7dm9pZCAwIT09YS5zcGVjdWxhciYmYi5zcGVjdWxhci5zZXRIZXgoYS5zcGVjdWxhcik7dm9pZCAwIT09YS5zaGluaW5lc3MmJlxuKGIuc2hpbmluZXNzPWEuc2hpbmluZXNzKTt2b2lkIDAhPT1hLnZlcnRleENvbG9ycyYmKGIudmVydGV4Q29sb3JzPWEudmVydGV4Q29sb3JzKTt2b2lkIDAhPT1hLmJsZW5kaW5nJiYoYi5ibGVuZGluZz1hLmJsZW5kaW5nKTt2b2lkIDAhPT1hLnNpZGUmJihiLnNpZGU9YS5zaWRlKTt2b2lkIDAhPT1hLm9wYWNpdHkmJihiLm9wYWNpdHk9YS5vcGFjaXR5KTt2b2lkIDAhPT1hLnRyYW5zcGFyZW50JiYoYi50cmFuc3BhcmVudD1hLnRyYW5zcGFyZW50KTt2b2lkIDAhPT1hLndpcmVmcmFtZSYmKGIud2lyZWZyYW1lPWEud2lyZWZyYW1lKTtpZih2b2lkIDAhPT1hLm1hdGVyaWFscylmb3IodmFyIGM9MCxkPWEubWF0ZXJpYWxzLmxlbmd0aDtjPGQ7YysrKWIubWF0ZXJpYWxzLnB1c2godGhpcy5wYXJzZShhLm1hdGVyaWFsc1tjXSkpO3JldHVybiBifX07VEhSRUUuT2JqZWN0TG9hZGVyPWZ1bmN0aW9uKGEpe3RoaXMubWFuYWdlcj12b2lkIDAhPT1hP2E6VEhSRUUuRGVmYXVsdExvYWRpbmdNYW5hZ2VyfTtcblRIUkVFLk9iamVjdExvYWRlci5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLk9iamVjdExvYWRlcixsb2FkOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcyxkPW5ldyBUSFJFRS5YSFJMb2FkZXIoYy5tYW5hZ2VyKTtkLnNldENyb3NzT3JpZ2luKHRoaXMuY3Jvc3NPcmlnaW4pO2QubG9hZChhLGZ1bmN0aW9uKGEpe2IoYy5wYXJzZShKU09OLnBhcnNlKGEpKSl9KX0sc2V0Q3Jvc3NPcmlnaW46ZnVuY3Rpb24oYSl7dGhpcy5jcm9zc09yaWdpbj1hfSxwYXJzZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnBhcnNlR2VvbWV0cmllcyhhLmdlb21ldHJpZXMpLGM9dGhpcy5wYXJzZU1hdGVyaWFscyhhLm1hdGVyaWFscyk7cmV0dXJuIHRoaXMucGFyc2VPYmplY3QoYS5vYmplY3QsYixjKX0scGFyc2VHZW9tZXRyaWVzOmZ1bmN0aW9uKGEpe3ZhciBiPXt9O2lmKHZvaWQgMCE9PWEpZm9yKHZhciBjPW5ldyBUSFJFRS5KU09OTG9hZGVyLGQ9bmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5TG9hZGVyLFxuZT0wLGY9YS5sZW5ndGg7ZTxmO2UrKyl7dmFyIGgsZz1hW2VdO3N3aXRjaChnLnR5cGUpe2Nhc2UgXCJQbGFuZUdlb21ldHJ5XCI6aD1uZXcgVEhSRUUuUGxhbmVHZW9tZXRyeShnLndpZHRoLGcuaGVpZ2h0LGcud2lkdGhTZWdtZW50cyxnLmhlaWdodFNlZ21lbnRzKTticmVhaztjYXNlIFwiQ2lyY2xlR2VvbWV0cnlcIjpoPW5ldyBUSFJFRS5DaXJjbGVHZW9tZXRyeShnLnJhZGl1cyxnLnNlZ21lbnRzKTticmVhaztjYXNlIFwiQ3ViZUdlb21ldHJ5XCI6aD1uZXcgVEhSRUUuQ3ViZUdlb21ldHJ5KGcud2lkdGgsZy5oZWlnaHQsZy5kZXB0aCxnLndpZHRoU2VnbWVudHMsZy5oZWlnaHRTZWdtZW50cyxnLmRlcHRoU2VnbWVudHMpO2JyZWFrO2Nhc2UgXCJDeWxpbmRlckdlb21ldHJ5XCI6aD1uZXcgVEhSRUUuQ3lsaW5kZXJHZW9tZXRyeShnLnJhZGl1c1RvcCxnLnJhZGl1c0JvdHRvbSxnLmhlaWdodCxnLnJhZGlhbFNlZ21lbnRzLGcuaGVpZ2h0U2VnbWVudHMsZy5vcGVuRW5kZWQpO2JyZWFrO2Nhc2UgXCJTcGhlcmVHZW9tZXRyeVwiOmg9XG5uZXcgVEhSRUUuU3BoZXJlR2VvbWV0cnkoZy5yYWRpdXMsZy53aWR0aFNlZ21lbnRzLGcuaGVpZ2h0U2VnbWVudHMsZy5waGlTdGFydCxnLnBoaUxlbmd0aCxnLnRoZXRhU3RhcnQsZy50aGV0YUxlbmd0aCk7YnJlYWs7Y2FzZSBcIkljb3NhaGVkcm9uR2VvbWV0cnlcIjpoPW5ldyBUSFJFRS5JY29zYWhlZHJvbkdlb21ldHJ5KGcucmFkaXVzLGcuZGV0YWlsKTticmVhaztjYXNlIFwiVG9ydXNHZW9tZXRyeVwiOmg9bmV3IFRIUkVFLlRvcnVzR2VvbWV0cnkoZy5yYWRpdXMsZy50dWJlLGcucmFkaWFsU2VnbWVudHMsZy50dWJ1bGFyU2VnbWVudHMsZy5hcmMpO2JyZWFrO2Nhc2UgXCJUb3J1c0tub3RHZW9tZXRyeVwiOmg9bmV3IFRIUkVFLlRvcnVzS25vdEdlb21ldHJ5KGcucmFkaXVzLGcudHViZSxnLnJhZGlhbFNlZ21lbnRzLGcudHVidWxhclNlZ21lbnRzLGcucCxnLnEsZy5oZWlnaHRTY2FsZSk7YnJlYWs7Y2FzZSBcIkJ1ZmZlckdlb21ldHJ5XCI6aD1kLnBhcnNlKGcuZGF0YSk7YnJlYWs7Y2FzZSBcIkdlb21ldHJ5XCI6aD1cbmMucGFyc2UoZy5kYXRhKS5nZW9tZXRyeX1oLnV1aWQ9Zy51dWlkO3ZvaWQgMCE9PWcubmFtZSYmKGgubmFtZT1nLm5hbWUpO2JbZy51dWlkXT1ofXJldHVybiBifSxwYXJzZU1hdGVyaWFsczpmdW5jdGlvbihhKXt2YXIgYj17fTtpZih2b2lkIDAhPT1hKWZvcih2YXIgYz1uZXcgVEhSRUUuTWF0ZXJpYWxMb2FkZXIsZD0wLGU9YS5sZW5ndGg7ZDxlO2QrKyl7dmFyIGY9YVtkXSxoPWMucGFyc2UoZik7aC51dWlkPWYudXVpZDt2b2lkIDAhPT1mLm5hbWUmJihoLm5hbWU9Zi5uYW1lKTtiW2YudXVpZF09aH1yZXR1cm4gYn0scGFyc2VPYmplY3Q6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuTWF0cml4NDtyZXR1cm4gZnVuY3Rpb24oYixjLGQpe3ZhciBlO3N3aXRjaChiLnR5cGUpe2Nhc2UgXCJTY2VuZVwiOmU9bmV3IFRIUkVFLlNjZW5lO2JyZWFrO2Nhc2UgXCJQZXJzcGVjdGl2ZUNhbWVyYVwiOmU9bmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKGIuZm92LGIuYXNwZWN0LGIubmVhcixcbmIuZmFyKTticmVhaztjYXNlIFwiT3J0aG9ncmFwaGljQ2FtZXJhXCI6ZT1uZXcgVEhSRUUuT3J0aG9ncmFwaGljQ2FtZXJhKGIubGVmdCxiLnJpZ2h0LGIudG9wLGIuYm90dG9tLGIubmVhcixiLmZhcik7YnJlYWs7Y2FzZSBcIkFtYmllbnRMaWdodFwiOmU9bmV3IFRIUkVFLkFtYmllbnRMaWdodChiLmNvbG9yKTticmVhaztjYXNlIFwiRGlyZWN0aW9uYWxMaWdodFwiOmU9bmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQoYi5jb2xvcixiLmludGVuc2l0eSk7YnJlYWs7Y2FzZSBcIlBvaW50TGlnaHRcIjplPW5ldyBUSFJFRS5Qb2ludExpZ2h0KGIuY29sb3IsYi5pbnRlbnNpdHksYi5kaXN0YW5jZSk7YnJlYWs7Y2FzZSBcIlNwb3RMaWdodFwiOmU9bmV3IFRIUkVFLlNwb3RMaWdodChiLmNvbG9yLGIuaW50ZW5zaXR5LGIuZGlzdGFuY2UsYi5hbmdsZSxiLmV4cG9uZW50KTticmVhaztjYXNlIFwiSGVtaXNwaGVyZUxpZ2h0XCI6ZT1uZXcgVEhSRUUuSGVtaXNwaGVyZUxpZ2h0KGIuY29sb3IsYi5ncm91bmRDb2xvcixcbmIuaW50ZW5zaXR5KTticmVhaztjYXNlIFwiTWVzaFwiOmU9Y1tiLmdlb21ldHJ5XTt2YXIgZj1kW2IubWF0ZXJpYWxdO3ZvaWQgMD09PWUmJmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5PYmplY3RMb2FkZXI6IFVuZGVmaW5lZCBnZW9tZXRyeSBcIitiLmdlb21ldHJ5KTt2b2lkIDA9PT1mJiZjb25zb2xlLmVycm9yKFwiVEhSRUUuT2JqZWN0TG9hZGVyOiBVbmRlZmluZWQgbWF0ZXJpYWwgXCIrYi5tYXRlcmlhbCk7ZT1uZXcgVEhSRUUuTWVzaChlLGYpO2JyZWFrO2Nhc2UgXCJTcHJpdGVcIjpmPWRbYi5tYXRlcmlhbF07dm9pZCAwPT09ZiYmY29uc29sZS5lcnJvcihcIlRIUkVFLk9iamVjdExvYWRlcjogVW5kZWZpbmVkIG1hdGVyaWFsIFwiK2IubWF0ZXJpYWwpO2U9bmV3IFRIUkVFLlNwcml0ZShmKTticmVhaztkZWZhdWx0OmU9bmV3IFRIUkVFLk9iamVjdDNEfWUudXVpZD1iLnV1aWQ7dm9pZCAwIT09Yi5uYW1lJiYoZS5uYW1lPWIubmFtZSk7dm9pZCAwIT09Yi5tYXRyaXg/KGEuZnJvbUFycmF5KGIubWF0cml4KSxcbmEuZGVjb21wb3NlKGUucG9zaXRpb24sZS5xdWF0ZXJuaW9uLGUuc2NhbGUpKToodm9pZCAwIT09Yi5wb3NpdGlvbiYmZS5wb3NpdGlvbi5mcm9tQXJyYXkoYi5wb3NpdGlvbiksdm9pZCAwIT09Yi5yb3RhdGlvbiYmZS5yb3RhdGlvbi5mcm9tQXJyYXkoYi5yb3RhdGlvbiksdm9pZCAwIT09Yi5zY2FsZSYmZS5zY2FsZS5mcm9tQXJyYXkoYi5zY2FsZSkpO3ZvaWQgMCE9PWIudmlzaWJsZSYmKGUudmlzaWJsZT1iLnZpc2libGUpO3ZvaWQgMCE9PWIudXNlckRhdGEmJihlLnVzZXJEYXRhPWIudXNlckRhdGEpO2lmKHZvaWQgMCE9PWIuY2hpbGRyZW4pZm9yKHZhciBoIGluIGIuY2hpbGRyZW4pZS5hZGQodGhpcy5wYXJzZU9iamVjdChiLmNoaWxkcmVuW2hdLGMsZCkpO3JldHVybiBlfX0oKX07VEhSRUUuU2NlbmVMb2FkZXI9ZnVuY3Rpb24oKXt0aGlzLm9uTG9hZFN0YXJ0PWZ1bmN0aW9uKCl7fTt0aGlzLm9uTG9hZFByb2dyZXNzPWZ1bmN0aW9uKCl7fTt0aGlzLm9uTG9hZENvbXBsZXRlPWZ1bmN0aW9uKCl7fTt0aGlzLmNhbGxiYWNrU3luYz1mdW5jdGlvbigpe307dGhpcy5jYWxsYmFja1Byb2dyZXNzPWZ1bmN0aW9uKCl7fTt0aGlzLmdlb21ldHJ5SGFuZGxlcnM9e307dGhpcy5oaWVyYXJjaHlIYW5kbGVycz17fTt0aGlzLmFkZEdlb21ldHJ5SGFuZGxlcihcImFzY2lpXCIsVEhSRUUuSlNPTkxvYWRlcil9O1xuVEhSRUUuU2NlbmVMb2FkZXIucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5TY2VuZUxvYWRlcixsb2FkOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcyxkPW5ldyBUSFJFRS5YSFJMb2FkZXIoYy5tYW5hZ2VyKTtkLnNldENyb3NzT3JpZ2luKHRoaXMuY3Jvc3NPcmlnaW4pO2QubG9hZChhLGZ1bmN0aW9uKGQpe2MucGFyc2UoSlNPTi5wYXJzZShkKSxiLGEpfSl9LHNldENyb3NzT3JpZ2luOmZ1bmN0aW9uKGEpe3RoaXMuY3Jvc3NPcmlnaW49YX0sYWRkR2VvbWV0cnlIYW5kbGVyOmZ1bmN0aW9uKGEsYil7dGhpcy5nZW9tZXRyeUhhbmRsZXJzW2FdPXtsb2FkZXJDbGFzczpifX0sYWRkSGllcmFyY2h5SGFuZGxlcjpmdW5jdGlvbihhLGIpe3RoaXMuaGllcmFyY2h5SGFuZGxlcnNbYV09e2xvYWRlckNsYXNzOmJ9fSxwYXJzZTpmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhLGIpe3JldHVyblwicmVsYXRpdmVUb0hUTUxcIj09Yj9hOnArXCIvXCIrYX1mdW5jdGlvbiBlKCl7Zih5LnNjZW5lLFxuQS5vYmplY3RzKX1mdW5jdGlvbiBmKGEsYil7dmFyIGMsZSxoLGksayxtO2ZvcihtIGluIGIpe3ZhciBwPXkub2JqZWN0c1ttXSxuPWJbbV07aWYodm9pZCAwPT09cCl7aWYobi50eXBlJiZuLnR5cGUgaW4gbC5oaWVyYXJjaHlIYW5kbGVycyl7aWYodm9pZCAwPT09bi5sb2FkaW5nKXtjPXt0eXBlOjEsdXJsOjEsbWF0ZXJpYWw6MSxwb3NpdGlvbjoxLHJvdGF0aW9uOjEsc2NhbGU6MSx2aXNpYmxlOjEsY2hpbGRyZW46MSx1c2VyRGF0YToxLHNraW46MSxtb3JwaDoxLG1pcnJvcmVkTG9vcDoxLGR1cmF0aW9uOjF9O3ZhciB1PXt9LHY7Zm9yKHYgaW4gbil2IGluIGN8fCh1W3ZdPW5bdl0pO3M9eS5tYXRlcmlhbHNbbi5tYXRlcmlhbF07bi5sb2FkaW5nPSEwO2M9bC5oaWVyYXJjaHlIYW5kbGVyc1tuLnR5cGVdLmxvYWRlck9iamVjdDtjLm9wdGlvbnM/Yy5sb2FkKGQobi51cmwsQS51cmxCYXNlVHlwZSksZyhtLGEscyxuKSk6Yy5sb2FkKGQobi51cmwsQS51cmxCYXNlVHlwZSksZyhtLFxuYSxzLG4pLHUpfX1lbHNlIGlmKHZvaWQgMCE9PW4uZ2VvbWV0cnkpe2lmKHQ9eS5nZW9tZXRyaWVzW24uZ2VvbWV0cnldKXtwPSExO3M9eS5tYXRlcmlhbHNbbi5tYXRlcmlhbF07cD1zIGluc3RhbmNlb2YgVEhSRUUuU2hhZGVyTWF0ZXJpYWw7ZT1uLnBvc2l0aW9uO2g9bi5yb3RhdGlvbjtpPW4uc2NhbGU7Yz1uLm1hdHJpeDtrPW4ucXVhdGVybmlvbjtuLm1hdGVyaWFsfHwocz1uZXcgVEhSRUUuTWVzaEZhY2VNYXRlcmlhbCh5LmZhY2VfbWF0ZXJpYWxzW24uZ2VvbWV0cnldKSk7cyBpbnN0YW5jZW9mIFRIUkVFLk1lc2hGYWNlTWF0ZXJpYWwmJjA9PT1zLm1hdGVyaWFscy5sZW5ndGgmJihzPW5ldyBUSFJFRS5NZXNoRmFjZU1hdGVyaWFsKHkuZmFjZV9tYXRlcmlhbHNbbi5nZW9tZXRyeV0pKTtpZihzIGluc3RhbmNlb2YgVEhSRUUuTWVzaEZhY2VNYXRlcmlhbClmb3IodT0wO3U8cy5tYXRlcmlhbHMubGVuZ3RoO3UrKylwPXB8fHMubWF0ZXJpYWxzW3VdaW5zdGFuY2VvZiBUSFJFRS5TaGFkZXJNYXRlcmlhbDtcbnAmJnQuY29tcHV0ZVRhbmdlbnRzKCk7bi5za2luP3A9bmV3IFRIUkVFLlNraW5uZWRNZXNoKHQscyk6bi5tb3JwaD8ocD1uZXcgVEhSRUUuTW9ycGhBbmltTWVzaCh0LHMpLHZvaWQgMCE9PW4uZHVyYXRpb24mJihwLmR1cmF0aW9uPW4uZHVyYXRpb24pLHZvaWQgMCE9PW4udGltZSYmKHAudGltZT1uLnRpbWUpLHZvaWQgMCE9PW4ubWlycm9yZWRMb29wJiYocC5taXJyb3JlZExvb3A9bi5taXJyb3JlZExvb3ApLHMubW9ycGhOb3JtYWxzJiZ0LmNvbXB1dGVNb3JwaE5vcm1hbHMoKSk6cD1uZXcgVEhSRUUuTWVzaCh0LHMpO3AubmFtZT1tO2M/KHAubWF0cml4QXV0b1VwZGF0ZT0hMSxwLm1hdHJpeC5zZXQoY1swXSxjWzFdLGNbMl0sY1szXSxjWzRdLGNbNV0sY1s2XSxjWzddLGNbOF0sY1s5XSxjWzEwXSxjWzExXSxjWzEyXSxjWzEzXSxjWzE0XSxjWzE1XSkpOihwLnBvc2l0aW9uLmZyb21BcnJheShlKSxrP3AucXVhdGVybmlvbi5mcm9tQXJyYXkoayk6cC5yb3RhdGlvbi5mcm9tQXJyYXkoaCksXG5wLnNjYWxlLmZyb21BcnJheShpKSk7cC52aXNpYmxlPW4udmlzaWJsZTtwLmNhc3RTaGFkb3c9bi5jYXN0U2hhZG93O3AucmVjZWl2ZVNoYWRvdz1uLnJlY2VpdmVTaGFkb3c7YS5hZGQocCk7eS5vYmplY3RzW21dPXB9fWVsc2UgaWYoXCJBbWJpZW50TGlnaHRcIj09PW4udHlwZXx8XCJQb2ludExpZ2h0XCI9PT1uLnR5cGV8fFwiRGlyZWN0aW9uYWxMaWdodFwiPT09bi50eXBlfHxcIlNwb3RMaWdodFwiPT09bi50eXBlfHxcIkhlbWlzcGhlcmVMaWdodFwiPT09bi50eXBlfHxcIkFyZWFMaWdodFwiPT09bi50eXBlKXt1PW4uY29sb3I7Yz1uLmludGVuc2l0eTtlPW4uZGlzdGFuY2U7aD1uLnBvc2l0aW9uO2k9bi5yb3RhdGlvbjtzd2l0Y2gobi50eXBlKXtjYXNlIFwiQW1iaWVudExpZ2h0XCI6cj1uZXcgVEhSRUUuQW1iaWVudExpZ2h0KHUpO2JyZWFrO2Nhc2UgXCJQb2ludExpZ2h0XCI6cj1uZXcgVEhSRUUuUG9pbnRMaWdodCh1LGMsZSk7ci5wb3NpdGlvbi5mcm9tQXJyYXkoaCk7YnJlYWs7Y2FzZSBcIkRpcmVjdGlvbmFsTGlnaHRcIjpyPVxubmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQodSxjKTtyLnBvc2l0aW9uLmZyb21BcnJheShuLmRpcmVjdGlvbik7YnJlYWs7Y2FzZSBcIlNwb3RMaWdodFwiOnI9bmV3IFRIUkVFLlNwb3RMaWdodCh1LGMsZSwxKTtyLmFuZ2xlPW4uYW5nbGU7ci5wb3NpdGlvbi5mcm9tQXJyYXkoaCk7ci50YXJnZXQuc2V0KGhbMF0saFsxXS1lLGhbMl0pO3IudGFyZ2V0LmFwcGx5RXVsZXIobmV3IFRIUkVFLkV1bGVyKGlbMF0saVsxXSxpWzJdLFwiWFlaXCIpKTticmVhaztjYXNlIFwiSGVtaXNwaGVyZUxpZ2h0XCI6cj1uZXcgVEhSRUUuRGlyZWN0aW9uYWxMaWdodCh1LGMsZSk7ci50YXJnZXQuc2V0KGhbMF0saFsxXS1lLGhbMl0pO3IudGFyZ2V0LmFwcGx5RXVsZXIobmV3IFRIUkVFLkV1bGVyKGlbMF0saVsxXSxpWzJdLFwiWFlaXCIpKTticmVhaztjYXNlIFwiQXJlYUxpZ2h0XCI6cj1uZXcgVEhSRUUuQXJlYUxpZ2h0KHUsYyksci5wb3NpdGlvbi5mcm9tQXJyYXkoaCksci53aWR0aD1uLnNpemUsci5oZWlnaHQ9XG5uLnNpemVfeX1hLmFkZChyKTtyLm5hbWU9bTt5LmxpZ2h0c1ttXT1yO3kub2JqZWN0c1ttXT1yfWVsc2VcIlBlcnNwZWN0aXZlQ2FtZXJhXCI9PT1uLnR5cGV8fFwiT3J0aG9ncmFwaGljQ2FtZXJhXCI9PT1uLnR5cGU/KGU9bi5wb3NpdGlvbixoPW4ucm90YXRpb24saz1uLnF1YXRlcm5pb24sXCJQZXJzcGVjdGl2ZUNhbWVyYVwiPT09bi50eXBlP3E9bmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKG4uZm92LG4uYXNwZWN0LG4ubmVhcixuLmZhcik6XCJPcnRob2dyYXBoaWNDYW1lcmFcIj09PW4udHlwZSYmKHE9bmV3IFRIUkVFLk9ydGhvZ3JhcGhpY0NhbWVyYShuLmxlZnQsbi5yaWdodCxuLnRvcCxuLmJvdHRvbSxuLm5lYXIsbi5mYXIpKSxxLm5hbWU9bSxxLnBvc2l0aW9uLmZyb21BcnJheShlKSx2b2lkIDAhPT1rP3EucXVhdGVybmlvbi5mcm9tQXJyYXkoayk6dm9pZCAwIT09aCYmcS5yb3RhdGlvbi5mcm9tQXJyYXkoaCksYS5hZGQocSkseS5jYW1lcmFzW21dPXEseS5vYmplY3RzW21dPVxucSk6KGU9bi5wb3NpdGlvbixoPW4ucm90YXRpb24saT1uLnNjYWxlLGs9bi5xdWF0ZXJuaW9uLHA9bmV3IFRIUkVFLk9iamVjdDNELHAubmFtZT1tLHAucG9zaXRpb24uZnJvbUFycmF5KGUpLGs/cC5xdWF0ZXJuaW9uLmZyb21BcnJheShrKTpwLnJvdGF0aW9uLmZyb21BcnJheShoKSxwLnNjYWxlLmZyb21BcnJheShpKSxwLnZpc2libGU9dm9pZCAwIT09bi52aXNpYmxlP24udmlzaWJsZTohMSxhLmFkZChwKSx5Lm9iamVjdHNbbV09cCx5LmVtcHRpZXNbbV09cCk7aWYocCl7aWYodm9pZCAwIT09bi51c2VyRGF0YSlmb3IodmFyIHogaW4gbi51c2VyRGF0YSlwLnVzZXJEYXRhW3pdPW4udXNlckRhdGFbel07aWYodm9pZCAwIT09bi5ncm91cHMpZm9yKHU9MDt1PG4uZ3JvdXBzLmxlbmd0aDt1KyspYz1uLmdyb3Vwc1t1XSx2b2lkIDA9PT15Lmdyb3Vwc1tjXSYmKHkuZ3JvdXBzW2NdPVtdKSx5Lmdyb3Vwc1tjXS5wdXNoKG0pfX12b2lkIDAhPT1wJiZ2b2lkIDAhPT1uLmNoaWxkcmVuJiZcbmYocCxuLmNoaWxkcmVuKX19ZnVuY3Rpb24gaChhKXtyZXR1cm4gZnVuY3Rpb24oYixjKXtiLm5hbWU9YTt5Lmdlb21ldHJpZXNbYV09Yjt5LmZhY2VfbWF0ZXJpYWxzW2FdPWM7ZSgpO3YtPTE7bC5vbkxvYWRDb21wbGV0ZSgpO2soKX19ZnVuY3Rpb24gZyhhLGIsYyxkKXtyZXR1cm4gZnVuY3Rpb24oZil7dmFyIGY9Zi5jb250ZW50P2YuY29udGVudDpmLmRhZT9mLnNjZW5lOmYsaD1kLnJvdGF0aW9uLGc9ZC5xdWF0ZXJuaW9uLGk9ZC5zY2FsZTtmLnBvc2l0aW9uLmZyb21BcnJheShkLnBvc2l0aW9uKTtnP2YucXVhdGVybmlvbi5mcm9tQXJyYXkoZyk6Zi5yb3RhdGlvbi5mcm9tQXJyYXkoaCk7Zi5zY2FsZS5mcm9tQXJyYXkoaSk7YyYmZi50cmF2ZXJzZShmdW5jdGlvbihhKXthLm1hdGVyaWFsPWN9KTt2YXIgbT12b2lkIDAhPT1kLnZpc2libGU/ZC52aXNpYmxlOiEwO2YudHJhdmVyc2UoZnVuY3Rpb24oYSl7YS52aXNpYmxlPW19KTtiLmFkZChmKTtmLm5hbWU9YTt5Lm9iamVjdHNbYV09XG5mO2UoKTt2LT0xO2wub25Mb2FkQ29tcGxldGUoKTtrKCl9fWZ1bmN0aW9uIGkoYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7Yi5uYW1lPWE7eS5nZW9tZXRyaWVzW2FdPWI7eS5mYWNlX21hdGVyaWFsc1thXT1jfX1mdW5jdGlvbiBrKCl7bC5jYWxsYmFja1Byb2dyZXNzKHt0b3RhbE1vZGVsczpHLHRvdGFsVGV4dHVyZXM6dyxsb2FkZWRNb2RlbHM6Ry12LGxvYWRlZFRleHR1cmVzOncten0seSk7bC5vbkxvYWRQcm9ncmVzcygpO2lmKDA9PT12JiYwPT09eil7Zm9yKHZhciBhPTA7YTxFLmxlbmd0aDthKyspe3ZhciBjPUVbYV0sZD15Lm9iamVjdHNbYy50YXJnZXROYW1lXTtkP2Mub2JqZWN0LnRhcmdldD1kOihjLm9iamVjdC50YXJnZXQ9bmV3IFRIUkVFLk9iamVjdDNELHkuc2NlbmUuYWRkKGMub2JqZWN0LnRhcmdldCkpO2Mub2JqZWN0LnRhcmdldC51c2VyRGF0YS50YXJnZXRJbnZlcnNlPWMub2JqZWN0fWIoeSl9fWZ1bmN0aW9uIG0oYSxiKXtiKGEpO2lmKHZvaWQgMCE9PWEuY2hpbGRyZW4pZm9yKHZhciBjIGluIGEuY2hpbGRyZW4pbShhLmNoaWxkcmVuW2NdLFxuYil9dmFyIGw9dGhpcyxwPVRIUkVFLkxvYWRlci5wcm90b3R5cGUuZXh0cmFjdFVybEJhc2UoYyksdCxzLHEsbix1LHIsdix6LEcsdyx5LEU9W10sQT1hLEs7Zm9yKEsgaW4gdGhpcy5nZW9tZXRyeUhhbmRsZXJzKWE9dGhpcy5nZW9tZXRyeUhhbmRsZXJzW0tdLmxvYWRlckNsYXNzLHRoaXMuZ2VvbWV0cnlIYW5kbGVyc1tLXS5sb2FkZXJPYmplY3Q9bmV3IGE7Zm9yKEsgaW4gdGhpcy5oaWVyYXJjaHlIYW5kbGVycylhPXRoaXMuaGllcmFyY2h5SGFuZGxlcnNbS10ubG9hZGVyQ2xhc3MsdGhpcy5oaWVyYXJjaHlIYW5kbGVyc1tLXS5sb2FkZXJPYmplY3Q9bmV3IGE7ej12PTA7eT17c2NlbmU6bmV3IFRIUkVFLlNjZW5lLGdlb21ldHJpZXM6e30sZmFjZV9tYXRlcmlhbHM6e30sbWF0ZXJpYWxzOnt9LHRleHR1cmVzOnt9LG9iamVjdHM6e30sY2FtZXJhczp7fSxsaWdodHM6e30sZm9nczp7fSxlbXB0aWVzOnt9LGdyb3Vwczp7fX07aWYoQS50cmFuc2Zvcm0mJihLPUEudHJhbnNmb3JtLnBvc2l0aW9uLFxuYT1BLnRyYW5zZm9ybS5yb3RhdGlvbixjPUEudHJhbnNmb3JtLnNjYWxlLEsmJnkuc2NlbmUucG9zaXRpb24uZnJvbUFycmF5KEspLGEmJnkuc2NlbmUucm90YXRpb24uZnJvbUFycmF5KGEpLGMmJnkuc2NlbmUuc2NhbGUuZnJvbUFycmF5KGMpLEt8fGF8fGMpKXkuc2NlbmUudXBkYXRlTWF0cml4KCkseS5zY2VuZS51cGRhdGVNYXRyaXhXb3JsZCgpO0s9ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7ei09YTtrKCk7bC5vbkxvYWRDb21wbGV0ZSgpfX07Zm9yKHZhciBEIGluIEEuZm9ncylhPUEuZm9nc1tEXSxcImxpbmVhclwiPT09YS50eXBlP249bmV3IFRIUkVFLkZvZygwLGEubmVhcixhLmZhcik6XCJleHAyXCI9PT1hLnR5cGUmJihuPW5ldyBUSFJFRS5Gb2dFeHAyKDAsYS5kZW5zaXR5KSksYT1hLmNvbG9yLG4uY29sb3Iuc2V0UkdCKGFbMF0sYVsxXSxhWzJdKSx5LmZvZ3NbRF09bjtmb3IodmFyIEYgaW4gQS5nZW9tZXRyaWVzKW49QS5nZW9tZXRyaWVzW0ZdLG4udHlwZSBpblxudGhpcy5nZW9tZXRyeUhhbmRsZXJzJiYodis9MSxsLm9uTG9hZFN0YXJ0KCkpO2Zvcih2YXIgTyBpbiBBLm9iamVjdHMpbShBLm9iamVjdHNbT10sZnVuY3Rpb24oYSl7YS50eXBlJiZhLnR5cGUgaW4gbC5oaWVyYXJjaHlIYW5kbGVycyYmKHYrPTEsbC5vbkxvYWRTdGFydCgpKX0pO0c9djtmb3IoRiBpbiBBLmdlb21ldHJpZXMpaWYobj1BLmdlb21ldHJpZXNbRl0sXCJjdWJlXCI9PT1uLnR5cGUpdD1uZXcgVEhSRUUuQ3ViZUdlb21ldHJ5KG4ud2lkdGgsbi5oZWlnaHQsbi5kZXB0aCxuLndpZHRoU2VnbWVudHMsbi5oZWlnaHRTZWdtZW50cyxuLmRlcHRoU2VnbWVudHMpLHQubmFtZT1GLHkuZ2VvbWV0cmllc1tGXT10O2Vsc2UgaWYoXCJwbGFuZVwiPT09bi50eXBlKXQ9bmV3IFRIUkVFLlBsYW5lR2VvbWV0cnkobi53aWR0aCxuLmhlaWdodCxuLndpZHRoU2VnbWVudHMsbi5oZWlnaHRTZWdtZW50cyksdC5uYW1lPUYseS5nZW9tZXRyaWVzW0ZdPXQ7ZWxzZSBpZihcInNwaGVyZVwiPT09bi50eXBlKXQ9XG5uZXcgVEhSRUUuU3BoZXJlR2VvbWV0cnkobi5yYWRpdXMsbi53aWR0aFNlZ21lbnRzLG4uaGVpZ2h0U2VnbWVudHMpLHQubmFtZT1GLHkuZ2VvbWV0cmllc1tGXT10O2Vsc2UgaWYoXCJjeWxpbmRlclwiPT09bi50eXBlKXQ9bmV3IFRIUkVFLkN5bGluZGVyR2VvbWV0cnkobi50b3BSYWQsbi5ib3RSYWQsbi5oZWlnaHQsbi5yYWRTZWdzLG4uaGVpZ2h0U2VncyksdC5uYW1lPUYseS5nZW9tZXRyaWVzW0ZdPXQ7ZWxzZSBpZihcInRvcnVzXCI9PT1uLnR5cGUpdD1uZXcgVEhSRUUuVG9ydXNHZW9tZXRyeShuLnJhZGl1cyxuLnR1YmUsbi5zZWdtZW50c1Isbi5zZWdtZW50c1QpLHQubmFtZT1GLHkuZ2VvbWV0cmllc1tGXT10O2Vsc2UgaWYoXCJpY29zYWhlZHJvblwiPT09bi50eXBlKXQ9bmV3IFRIUkVFLkljb3NhaGVkcm9uR2VvbWV0cnkobi5yYWRpdXMsbi5zdWJkaXZpc2lvbnMpLHQubmFtZT1GLHkuZ2VvbWV0cmllc1tGXT10O2Vsc2UgaWYobi50eXBlIGluIHRoaXMuZ2VvbWV0cnlIYW5kbGVycyl7Tz1cbnt9O2Zvcih1IGluIG4pXCJ0eXBlXCIhPT11JiZcInVybFwiIT09dSYmKE9bdV09blt1XSk7dGhpcy5nZW9tZXRyeUhhbmRsZXJzW24udHlwZV0ubG9hZGVyT2JqZWN0LmxvYWQoZChuLnVybCxBLnVybEJhc2VUeXBlKSxoKEYpLE8pfWVsc2VcImVtYmVkZGVkXCI9PT1uLnR5cGUmJihPPUEuZW1iZWRzW24uaWRdLE8ubWV0YWRhdGE9QS5tZXRhZGF0YSxPJiYoTz10aGlzLmdlb21ldHJ5SGFuZGxlcnMuYXNjaWkubG9hZGVyT2JqZWN0LnBhcnNlKE8sXCJcIiksaShGKShPLmdlb21ldHJ5LE8ubWF0ZXJpYWxzKSkpO2Zvcih2YXIgeCBpbiBBLnRleHR1cmVzKWlmKEY9QS50ZXh0dXJlc1t4XSxGLnVybCBpbnN0YW5jZW9mIEFycmF5KXt6Kz1GLnVybC5sZW5ndGg7Zm9yKHU9MDt1PEYudXJsLmxlbmd0aDt1KyspbC5vbkxvYWRTdGFydCgpfWVsc2Ugeis9MSxsLm9uTG9hZFN0YXJ0KCk7dz16O2Zvcih4IGluIEEudGV4dHVyZXMpe0Y9QS50ZXh0dXJlc1t4XTt2b2lkIDAhPT1GLm1hcHBpbmcmJnZvaWQgMCE9PVxuVEhSRUVbRi5tYXBwaW5nXSYmKEYubWFwcGluZz1uZXcgVEhSRUVbRi5tYXBwaW5nXSk7aWYoRi51cmwgaW5zdGFuY2VvZiBBcnJheSl7Tz1GLnVybC5sZW5ndGg7bj1bXTtmb3IodT0wO3U8Tzt1Kyspblt1XT1kKEYudXJsW3VdLEEudXJsQmFzZVR5cGUpO3U9KHU9L1xcLmRkcyQvaS50ZXN0KG5bMF0pKT9USFJFRS5JbWFnZVV0aWxzLmxvYWRDb21wcmVzc2VkVGV4dHVyZUN1YmUobixGLm1hcHBpbmcsSyhPKSk6VEhSRUUuSW1hZ2VVdGlscy5sb2FkVGV4dHVyZUN1YmUobixGLm1hcHBpbmcsSyhPKSl9ZWxzZSB1PS9cXC5kZHMkL2kudGVzdChGLnVybCksTz1kKEYudXJsLEEudXJsQmFzZVR5cGUpLG49SygxKSx1PXU/VEhSRUUuSW1hZ2VVdGlscy5sb2FkQ29tcHJlc3NlZFRleHR1cmUoTyxGLm1hcHBpbmcsbik6VEhSRUUuSW1hZ2VVdGlscy5sb2FkVGV4dHVyZShPLEYubWFwcGluZyxuKSx2b2lkIDAhPT1USFJFRVtGLm1pbkZpbHRlcl0mJih1Lm1pbkZpbHRlcj1USFJFRVtGLm1pbkZpbHRlcl0pLFxudm9pZCAwIT09VEhSRUVbRi5tYWdGaWx0ZXJdJiYodS5tYWdGaWx0ZXI9VEhSRUVbRi5tYWdGaWx0ZXJdKSxGLmFuaXNvdHJvcHkmJih1LmFuaXNvdHJvcHk9Ri5hbmlzb3Ryb3B5KSxGLnJlcGVhdCYmKHUucmVwZWF0LnNldChGLnJlcGVhdFswXSxGLnJlcGVhdFsxXSksMSE9PUYucmVwZWF0WzBdJiYodS53cmFwUz1USFJFRS5SZXBlYXRXcmFwcGluZyksMSE9PUYucmVwZWF0WzFdJiYodS53cmFwVD1USFJFRS5SZXBlYXRXcmFwcGluZykpLEYub2Zmc2V0JiZ1Lm9mZnNldC5zZXQoRi5vZmZzZXRbMF0sRi5vZmZzZXRbMV0pLEYud3JhcCYmKE89e3JlcGVhdDpUSFJFRS5SZXBlYXRXcmFwcGluZyxtaXJyb3I6VEhSRUUuTWlycm9yZWRSZXBlYXRXcmFwcGluZ30sdm9pZCAwIT09T1tGLndyYXBbMF1dJiYodS53cmFwUz1PW0Yud3JhcFswXV0pLHZvaWQgMCE9PU9bRi53cmFwWzFdXSYmKHUud3JhcFQ9T1tGLndyYXBbMV1dKSk7eS50ZXh0dXJlc1t4XT11fXZhciBJLEI7Zm9yKEkgaW4gQS5tYXRlcmlhbHMpe3g9XG5BLm1hdGVyaWFsc1tJXTtmb3IoQiBpbiB4LnBhcmFtZXRlcnMpXCJlbnZNYXBcIj09PUJ8fFwibWFwXCI9PT1CfHxcImxpZ2h0TWFwXCI9PT1CfHxcImJ1bXBNYXBcIj09PUI/eC5wYXJhbWV0ZXJzW0JdPXkudGV4dHVyZXNbeC5wYXJhbWV0ZXJzW0JdXTpcInNoYWRpbmdcIj09PUI/eC5wYXJhbWV0ZXJzW0JdPVwiZmxhdFwiPT09eC5wYXJhbWV0ZXJzW0JdP1RIUkVFLkZsYXRTaGFkaW5nOlRIUkVFLlNtb290aFNoYWRpbmc6XCJzaWRlXCI9PT1CP3gucGFyYW1ldGVyc1tCXT1cImRvdWJsZVwiPT14LnBhcmFtZXRlcnNbQl0/VEhSRUUuRG91YmxlU2lkZTpcImJhY2tcIj09eC5wYXJhbWV0ZXJzW0JdP1RIUkVFLkJhY2tTaWRlOlRIUkVFLkZyb250U2lkZTpcImJsZW5kaW5nXCI9PT1CP3gucGFyYW1ldGVyc1tCXT14LnBhcmFtZXRlcnNbQl1pbiBUSFJFRT9USFJFRVt4LnBhcmFtZXRlcnNbQl1dOlRIUkVFLk5vcm1hbEJsZW5kaW5nOlwiY29tYmluZVwiPT09Qj94LnBhcmFtZXRlcnNbQl09eC5wYXJhbWV0ZXJzW0JdaW4gVEhSRUU/XG5USFJFRVt4LnBhcmFtZXRlcnNbQl1dOlRIUkVFLk11bHRpcGx5T3BlcmF0aW9uOlwidmVydGV4Q29sb3JzXCI9PT1CP1wiZmFjZVwiPT14LnBhcmFtZXRlcnNbQl0/eC5wYXJhbWV0ZXJzW0JdPVRIUkVFLkZhY2VDb2xvcnM6eC5wYXJhbWV0ZXJzW0JdJiYoeC5wYXJhbWV0ZXJzW0JdPVRIUkVFLlZlcnRleENvbG9ycyk6XCJ3cmFwUkdCXCI9PT1CJiYoSz14LnBhcmFtZXRlcnNbQl0seC5wYXJhbWV0ZXJzW0JdPW5ldyBUSFJFRS5WZWN0b3IzKEtbMF0sS1sxXSxLWzJdKSk7dm9pZCAwIT09eC5wYXJhbWV0ZXJzLm9wYWNpdHkmJjE+eC5wYXJhbWV0ZXJzLm9wYWNpdHkmJih4LnBhcmFtZXRlcnMudHJhbnNwYXJlbnQ9ITApO3gucGFyYW1ldGVycy5ub3JtYWxNYXA/KEs9VEhSRUUuU2hhZGVyTGliLm5vcm1hbG1hcCxGPVRIUkVFLlVuaWZvcm1zVXRpbHMuY2xvbmUoSy51bmlmb3JtcyksdT14LnBhcmFtZXRlcnMuY29sb3IsTz14LnBhcmFtZXRlcnMuc3BlY3VsYXIsbj14LnBhcmFtZXRlcnMuYW1iaWVudCxcbkQ9eC5wYXJhbWV0ZXJzLnNoaW5pbmVzcyxGLnROb3JtYWwudmFsdWU9eS50ZXh0dXJlc1t4LnBhcmFtZXRlcnMubm9ybWFsTWFwXSx4LnBhcmFtZXRlcnMubm9ybWFsU2NhbGUmJkYudU5vcm1hbFNjYWxlLnZhbHVlLnNldCh4LnBhcmFtZXRlcnMubm9ybWFsU2NhbGVbMF0seC5wYXJhbWV0ZXJzLm5vcm1hbFNjYWxlWzFdKSx4LnBhcmFtZXRlcnMubWFwJiYoRi50RGlmZnVzZS52YWx1ZT14LnBhcmFtZXRlcnMubWFwLEYuZW5hYmxlRGlmZnVzZS52YWx1ZT0hMCkseC5wYXJhbWV0ZXJzLmVudk1hcCYmKEYudEN1YmUudmFsdWU9eC5wYXJhbWV0ZXJzLmVudk1hcCxGLmVuYWJsZVJlZmxlY3Rpb24udmFsdWU9ITAsRi51UmVmbGVjdGl2aXR5LnZhbHVlPXgucGFyYW1ldGVycy5yZWZsZWN0aXZpdHkpLHgucGFyYW1ldGVycy5saWdodE1hcCYmKEYudEFPLnZhbHVlPXgucGFyYW1ldGVycy5saWdodE1hcCxGLmVuYWJsZUFPLnZhbHVlPSEwKSx4LnBhcmFtZXRlcnMuc3BlY3VsYXJNYXAmJlxuKEYudFNwZWN1bGFyLnZhbHVlPXkudGV4dHVyZXNbeC5wYXJhbWV0ZXJzLnNwZWN1bGFyTWFwXSxGLmVuYWJsZVNwZWN1bGFyLnZhbHVlPSEwKSx4LnBhcmFtZXRlcnMuZGlzcGxhY2VtZW50TWFwJiYoRi50RGlzcGxhY2VtZW50LnZhbHVlPXkudGV4dHVyZXNbeC5wYXJhbWV0ZXJzLmRpc3BsYWNlbWVudE1hcF0sRi5lbmFibGVEaXNwbGFjZW1lbnQudmFsdWU9ITAsRi51RGlzcGxhY2VtZW50Qmlhcy52YWx1ZT14LnBhcmFtZXRlcnMuZGlzcGxhY2VtZW50QmlhcyxGLnVEaXNwbGFjZW1lbnRTY2FsZS52YWx1ZT14LnBhcmFtZXRlcnMuZGlzcGxhY2VtZW50U2NhbGUpLEYudURpZmZ1c2VDb2xvci52YWx1ZS5zZXRIZXgodSksRi51U3BlY3VsYXJDb2xvci52YWx1ZS5zZXRIZXgoTyksRi51QW1iaWVudENvbG9yLnZhbHVlLnNldEhleChuKSxGLnVTaGluaW5lc3MudmFsdWU9RCx4LnBhcmFtZXRlcnMub3BhY2l0eSYmKEYudU9wYWNpdHkudmFsdWU9eC5wYXJhbWV0ZXJzLm9wYWNpdHkpLFxucz1uZXcgVEhSRUUuU2hhZGVyTWF0ZXJpYWwoe2ZyYWdtZW50U2hhZGVyOksuZnJhZ21lbnRTaGFkZXIsdmVydGV4U2hhZGVyOksudmVydGV4U2hhZGVyLHVuaWZvcm1zOkYsbGlnaHRzOiEwLGZvZzohMH0pKTpzPW5ldyBUSFJFRVt4LnR5cGVdKHgucGFyYW1ldGVycyk7cy5uYW1lPUk7eS5tYXRlcmlhbHNbSV09c31mb3IoSSBpbiBBLm1hdGVyaWFscylpZih4PUEubWF0ZXJpYWxzW0ldLHgucGFyYW1ldGVycy5tYXRlcmlhbHMpe0I9W107Zm9yKHU9MDt1PHgucGFyYW1ldGVycy5tYXRlcmlhbHMubGVuZ3RoO3UrKylCLnB1c2goeS5tYXRlcmlhbHNbeC5wYXJhbWV0ZXJzLm1hdGVyaWFsc1t1XV0pO3kubWF0ZXJpYWxzW0ldLm1hdGVyaWFscz1CfWUoKTt5LmNhbWVyYXMmJkEuZGVmYXVsdHMuY2FtZXJhJiYoeS5jdXJyZW50Q2FtZXJhPXkuY2FtZXJhc1tBLmRlZmF1bHRzLmNhbWVyYV0pO3kuZm9ncyYmQS5kZWZhdWx0cy5mb2cmJih5LnNjZW5lLmZvZz15LmZvZ3NbQS5kZWZhdWx0cy5mb2ddKTtcbmwuY2FsbGJhY2tTeW5jKHkpO2soKX19O1RIUkVFLlRleHR1cmVMb2FkZXI9ZnVuY3Rpb24oYSl7dGhpcy5tYW5hZ2VyPXZvaWQgMCE9PWE/YTpUSFJFRS5EZWZhdWx0TG9hZGluZ01hbmFnZXJ9O1RIUkVFLlRleHR1cmVMb2FkZXIucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5UZXh0dXJlTG9hZGVyLGxvYWQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgVEhSRUUuSW1hZ2VMb2FkZXIodGhpcy5tYW5hZ2VyKTtjLnNldENyb3NzT3JpZ2luKHRoaXMuY3Jvc3NPcmlnaW4pO2MubG9hZChhLGZ1bmN0aW9uKGEpe2E9bmV3IFRIUkVFLlRleHR1cmUoYSk7YS5uZWVkc1VwZGF0ZT0hMDt2b2lkIDAhPT1iJiZiKGEpfSl9LHNldENyb3NzT3JpZ2luOmZ1bmN0aW9uKGEpe3RoaXMuY3Jvc3NPcmlnaW49YX19O1RIUkVFLk1hdGVyaWFsPWZ1bmN0aW9uKCl7dGhpcy5pZD1USFJFRS5NYXRlcmlhbElkQ291bnQrKzt0aGlzLnV1aWQ9VEhSRUUuTWF0aC5nZW5lcmF0ZVVVSUQoKTt0aGlzLm5hbWU9XCJcIjt0aGlzLnNpZGU9VEhSRUUuRnJvbnRTaWRlO3RoaXMub3BhY2l0eT0xO3RoaXMudHJhbnNwYXJlbnQ9ITE7dGhpcy5ibGVuZGluZz1USFJFRS5Ob3JtYWxCbGVuZGluZzt0aGlzLmJsZW5kU3JjPVRIUkVFLlNyY0FscGhhRmFjdG9yO3RoaXMuYmxlbmREc3Q9VEhSRUUuT25lTWludXNTcmNBbHBoYUZhY3Rvcjt0aGlzLmJsZW5kRXF1YXRpb249VEhSRUUuQWRkRXF1YXRpb247dGhpcy5kZXB0aFdyaXRlPXRoaXMuZGVwdGhUZXN0PSEwO3RoaXMucG9seWdvbk9mZnNldD0hMTt0aGlzLm92ZXJkcmF3PXRoaXMuYWxwaGFUZXN0PXRoaXMucG9seWdvbk9mZnNldFVuaXRzPXRoaXMucG9seWdvbk9mZnNldEZhY3Rvcj0wO3RoaXMubmVlZHNVcGRhdGU9dGhpcy52aXNpYmxlPSEwfTtcblRIUkVFLk1hdGVyaWFsLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuTWF0ZXJpYWwsc2V0VmFsdWVzOmZ1bmN0aW9uKGEpe2lmKHZvaWQgMCE9PWEpZm9yKHZhciBiIGluIGEpe3ZhciBjPWFbYl07aWYodm9pZCAwPT09Yyljb25zb2xlLndhcm4oXCJUSFJFRS5NYXRlcmlhbDogJ1wiK2IrXCInIHBhcmFtZXRlciBpcyB1bmRlZmluZWQuXCIpO2Vsc2UgaWYoYiBpbiB0aGlzKXt2YXIgZD10aGlzW2JdO2QgaW5zdGFuY2VvZiBUSFJFRS5Db2xvcj9kLnNldChjKTpkIGluc3RhbmNlb2YgVEhSRUUuVmVjdG9yMyYmYyBpbnN0YW5jZW9mIFRIUkVFLlZlY3RvcjM/ZC5jb3B5KGMpOnRoaXNbYl09XCJvdmVyZHJhd1wiPT1iP051bWJlcihjKTpjfX19LGNsb25lOmZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEmJihhPW5ldyBUSFJFRS5NYXRlcmlhbCk7YS5uYW1lPXRoaXMubmFtZTthLnNpZGU9dGhpcy5zaWRlO2Eub3BhY2l0eT10aGlzLm9wYWNpdHk7YS50cmFuc3BhcmVudD10aGlzLnRyYW5zcGFyZW50O1xuYS5ibGVuZGluZz10aGlzLmJsZW5kaW5nO2EuYmxlbmRTcmM9dGhpcy5ibGVuZFNyYzthLmJsZW5kRHN0PXRoaXMuYmxlbmREc3Q7YS5ibGVuZEVxdWF0aW9uPXRoaXMuYmxlbmRFcXVhdGlvbjthLmRlcHRoVGVzdD10aGlzLmRlcHRoVGVzdDthLmRlcHRoV3JpdGU9dGhpcy5kZXB0aFdyaXRlO2EucG9seWdvbk9mZnNldD10aGlzLnBvbHlnb25PZmZzZXQ7YS5wb2x5Z29uT2Zmc2V0RmFjdG9yPXRoaXMucG9seWdvbk9mZnNldEZhY3RvcjthLnBvbHlnb25PZmZzZXRVbml0cz10aGlzLnBvbHlnb25PZmZzZXRVbml0czthLmFscGhhVGVzdD10aGlzLmFscGhhVGVzdDthLm92ZXJkcmF3PXRoaXMub3ZlcmRyYXc7YS52aXNpYmxlPXRoaXMudmlzaWJsZTtyZXR1cm4gYX0sZGlzcG9zZTpmdW5jdGlvbigpe3RoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImRpc3Bvc2VcIn0pfX07VEhSRUUuRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZS5hcHBseShUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUpO1xuVEhSRUUuTWF0ZXJpYWxJZENvdW50PTA7VEhSRUUuTGluZUJhc2ljTWF0ZXJpYWw9ZnVuY3Rpb24oYSl7VEhSRUUuTWF0ZXJpYWwuY2FsbCh0aGlzKTt0aGlzLmNvbG9yPW5ldyBUSFJFRS5Db2xvcigxNjc3NzIxNSk7dGhpcy5saW5ld2lkdGg9MTt0aGlzLmxpbmVqb2luPXRoaXMubGluZWNhcD1cInJvdW5kXCI7dGhpcy52ZXJ0ZXhDb2xvcnM9ITE7dGhpcy5mb2c9ITA7dGhpcy5zZXRWYWx1ZXMoYSl9O1RIUkVFLkxpbmVCYXNpY01hdGVyaWFsLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk1hdGVyaWFsLnByb3RvdHlwZSk7XG5USFJFRS5MaW5lQmFzaWNNYXRlcmlhbC5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWw7VEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyxhKTthLmNvbG9yLmNvcHkodGhpcy5jb2xvcik7YS5saW5ld2lkdGg9dGhpcy5saW5ld2lkdGg7YS5saW5lY2FwPXRoaXMubGluZWNhcDthLmxpbmVqb2luPXRoaXMubGluZWpvaW47YS52ZXJ0ZXhDb2xvcnM9dGhpcy52ZXJ0ZXhDb2xvcnM7YS5mb2c9dGhpcy5mb2c7cmV0dXJuIGF9O1RIUkVFLkxpbmVEYXNoZWRNYXRlcmlhbD1mdW5jdGlvbihhKXtUSFJFRS5NYXRlcmlhbC5jYWxsKHRoaXMpO3RoaXMuY29sb3I9bmV3IFRIUkVFLkNvbG9yKDE2Nzc3MjE1KTt0aGlzLnNjYWxlPXRoaXMubGluZXdpZHRoPTE7dGhpcy5kYXNoU2l6ZT0zO3RoaXMuZ2FwU2l6ZT0xO3RoaXMudmVydGV4Q29sb3JzPSExO3RoaXMuZm9nPSEwO3RoaXMuc2V0VmFsdWVzKGEpfTtUSFJFRS5MaW5lRGFzaGVkTWF0ZXJpYWwucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlKTtcblRIUkVFLkxpbmVEYXNoZWRNYXRlcmlhbC5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuTGluZURhc2hlZE1hdGVyaWFsO1RIUkVFLk1hdGVyaWFsLnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMsYSk7YS5jb2xvci5jb3B5KHRoaXMuY29sb3IpO2EubGluZXdpZHRoPXRoaXMubGluZXdpZHRoO2Euc2NhbGU9dGhpcy5zY2FsZTthLmRhc2hTaXplPXRoaXMuZGFzaFNpemU7YS5nYXBTaXplPXRoaXMuZ2FwU2l6ZTthLnZlcnRleENvbG9ycz10aGlzLnZlcnRleENvbG9yczthLmZvZz10aGlzLmZvZztyZXR1cm4gYX07VEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWw9ZnVuY3Rpb24oYSl7VEhSRUUuTWF0ZXJpYWwuY2FsbCh0aGlzKTt0aGlzLmNvbG9yPW5ldyBUSFJFRS5Db2xvcigxNjc3NzIxNSk7dGhpcy5lbnZNYXA9dGhpcy5zcGVjdWxhck1hcD10aGlzLmxpZ2h0TWFwPXRoaXMubWFwPW51bGw7dGhpcy5jb21iaW5lPVRIUkVFLk11bHRpcGx5T3BlcmF0aW9uO3RoaXMucmVmbGVjdGl2aXR5PTE7dGhpcy5yZWZyYWN0aW9uUmF0aW89MC45ODt0aGlzLmZvZz0hMDt0aGlzLnNoYWRpbmc9VEhSRUUuU21vb3RoU2hhZGluZzt0aGlzLndpcmVmcmFtZT0hMTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD0xO3RoaXMud2lyZWZyYW1lTGluZWpvaW49dGhpcy53aXJlZnJhbWVMaW5lY2FwPVwicm91bmRcIjt0aGlzLnZlcnRleENvbG9ycz1USFJFRS5Ob0NvbG9yczt0aGlzLm1vcnBoVGFyZ2V0cz10aGlzLnNraW5uaW5nPSExO3RoaXMuc2V0VmFsdWVzKGEpfTtcblRIUkVFLk1lc2hCYXNpY01hdGVyaWFsLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk1hdGVyaWFsLnByb3RvdHlwZSk7XG5USFJFRS5NZXNoQmFzaWNNYXRlcmlhbC5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWw7VEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyxhKTthLmNvbG9yLmNvcHkodGhpcy5jb2xvcik7YS5tYXA9dGhpcy5tYXA7YS5saWdodE1hcD10aGlzLmxpZ2h0TWFwO2Euc3BlY3VsYXJNYXA9dGhpcy5zcGVjdWxhck1hcDthLmVudk1hcD10aGlzLmVudk1hcDthLmNvbWJpbmU9dGhpcy5jb21iaW5lO2EucmVmbGVjdGl2aXR5PXRoaXMucmVmbGVjdGl2aXR5O2EucmVmcmFjdGlvblJhdGlvPXRoaXMucmVmcmFjdGlvblJhdGlvO2EuZm9nPXRoaXMuZm9nO2Euc2hhZGluZz10aGlzLnNoYWRpbmc7YS53aXJlZnJhbWU9dGhpcy53aXJlZnJhbWU7YS53aXJlZnJhbWVMaW5ld2lkdGg9dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg7YS53aXJlZnJhbWVMaW5lY2FwPXRoaXMud2lyZWZyYW1lTGluZWNhcDthLndpcmVmcmFtZUxpbmVqb2luPVxudGhpcy53aXJlZnJhbWVMaW5lam9pbjthLnZlcnRleENvbG9ycz10aGlzLnZlcnRleENvbG9yczthLnNraW5uaW5nPXRoaXMuc2tpbm5pbmc7YS5tb3JwaFRhcmdldHM9dGhpcy5tb3JwaFRhcmdldHM7cmV0dXJuIGF9O1RIUkVFLk1lc2hMYW1iZXJ0TWF0ZXJpYWw9ZnVuY3Rpb24oYSl7VEhSRUUuTWF0ZXJpYWwuY2FsbCh0aGlzKTt0aGlzLmNvbG9yPW5ldyBUSFJFRS5Db2xvcigxNjc3NzIxNSk7dGhpcy5hbWJpZW50PW5ldyBUSFJFRS5Db2xvcigxNjc3NzIxNSk7dGhpcy5lbWlzc2l2ZT1uZXcgVEhSRUUuQ29sb3IoMCk7dGhpcy53cmFwQXJvdW5kPSExO3RoaXMud3JhcFJHQj1uZXcgVEhSRUUuVmVjdG9yMygxLDEsMSk7dGhpcy5lbnZNYXA9dGhpcy5zcGVjdWxhck1hcD10aGlzLmxpZ2h0TWFwPXRoaXMubWFwPW51bGw7dGhpcy5jb21iaW5lPVRIUkVFLk11bHRpcGx5T3BlcmF0aW9uO3RoaXMucmVmbGVjdGl2aXR5PTE7dGhpcy5yZWZyYWN0aW9uUmF0aW89MC45ODt0aGlzLmZvZz0hMDt0aGlzLnNoYWRpbmc9VEhSRUUuU21vb3RoU2hhZGluZzt0aGlzLndpcmVmcmFtZT0hMTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD0xO3RoaXMud2lyZWZyYW1lTGluZWpvaW49dGhpcy53aXJlZnJhbWVMaW5lY2FwPVxuXCJyb3VuZFwiO3RoaXMudmVydGV4Q29sb3JzPVRIUkVFLk5vQ29sb3JzO3RoaXMubW9ycGhOb3JtYWxzPXRoaXMubW9ycGhUYXJnZXRzPXRoaXMuc2tpbm5pbmc9ITE7dGhpcy5zZXRWYWx1ZXMoYSl9O1RIUkVFLk1lc2hMYW1iZXJ0TWF0ZXJpYWwucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlKTtcblRIUkVFLk1lc2hMYW1iZXJ0TWF0ZXJpYWwucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLk1lc2hMYW1iZXJ0TWF0ZXJpYWw7VEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyxhKTthLmNvbG9yLmNvcHkodGhpcy5jb2xvcik7YS5hbWJpZW50LmNvcHkodGhpcy5hbWJpZW50KTthLmVtaXNzaXZlLmNvcHkodGhpcy5lbWlzc2l2ZSk7YS53cmFwQXJvdW5kPXRoaXMud3JhcEFyb3VuZDthLndyYXBSR0IuY29weSh0aGlzLndyYXBSR0IpO2EubWFwPXRoaXMubWFwO2EubGlnaHRNYXA9dGhpcy5saWdodE1hcDthLnNwZWN1bGFyTWFwPXRoaXMuc3BlY3VsYXJNYXA7YS5lbnZNYXA9dGhpcy5lbnZNYXA7YS5jb21iaW5lPXRoaXMuY29tYmluZTthLnJlZmxlY3Rpdml0eT10aGlzLnJlZmxlY3Rpdml0eTthLnJlZnJhY3Rpb25SYXRpbz10aGlzLnJlZnJhY3Rpb25SYXRpbzthLmZvZz10aGlzLmZvZzthLnNoYWRpbmc9dGhpcy5zaGFkaW5nO1xuYS53aXJlZnJhbWU9dGhpcy53aXJlZnJhbWU7YS53aXJlZnJhbWVMaW5ld2lkdGg9dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg7YS53aXJlZnJhbWVMaW5lY2FwPXRoaXMud2lyZWZyYW1lTGluZWNhcDthLndpcmVmcmFtZUxpbmVqb2luPXRoaXMud2lyZWZyYW1lTGluZWpvaW47YS52ZXJ0ZXhDb2xvcnM9dGhpcy52ZXJ0ZXhDb2xvcnM7YS5za2lubmluZz10aGlzLnNraW5uaW5nO2EubW9ycGhUYXJnZXRzPXRoaXMubW9ycGhUYXJnZXRzO2EubW9ycGhOb3JtYWxzPXRoaXMubW9ycGhOb3JtYWxzO3JldHVybiBhfTtUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbD1mdW5jdGlvbihhKXtUSFJFRS5NYXRlcmlhbC5jYWxsKHRoaXMpO3RoaXMuY29sb3I9bmV3IFRIUkVFLkNvbG9yKDE2Nzc3MjE1KTt0aGlzLmFtYmllbnQ9bmV3IFRIUkVFLkNvbG9yKDE2Nzc3MjE1KTt0aGlzLmVtaXNzaXZlPW5ldyBUSFJFRS5Db2xvcigwKTt0aGlzLnNwZWN1bGFyPW5ldyBUSFJFRS5Db2xvcigxMTE4NDgxKTt0aGlzLnNoaW5pbmVzcz0zMDt0aGlzLm1ldGFsPSExO3RoaXMucGVyUGl4ZWw9ITA7dGhpcy53cmFwQXJvdW5kPSExO3RoaXMud3JhcFJHQj1uZXcgVEhSRUUuVmVjdG9yMygxLDEsMSk7dGhpcy5idW1wTWFwPXRoaXMubGlnaHRNYXA9dGhpcy5tYXA9bnVsbDt0aGlzLmJ1bXBTY2FsZT0xO3RoaXMubm9ybWFsTWFwPW51bGw7dGhpcy5ub3JtYWxTY2FsZT1uZXcgVEhSRUUuVmVjdG9yMigxLDEpO3RoaXMuZW52TWFwPXRoaXMuc3BlY3VsYXJNYXA9bnVsbDt0aGlzLmNvbWJpbmU9VEhSRUUuTXVsdGlwbHlPcGVyYXRpb247XG50aGlzLnJlZmxlY3Rpdml0eT0xO3RoaXMucmVmcmFjdGlvblJhdGlvPTAuOTg7dGhpcy5mb2c9ITA7dGhpcy5zaGFkaW5nPVRIUkVFLlNtb290aFNoYWRpbmc7dGhpcy53aXJlZnJhbWU9ITE7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9MTt0aGlzLndpcmVmcmFtZUxpbmVqb2luPXRoaXMud2lyZWZyYW1lTGluZWNhcD1cInJvdW5kXCI7dGhpcy52ZXJ0ZXhDb2xvcnM9VEhSRUUuTm9Db2xvcnM7dGhpcy5tb3JwaE5vcm1hbHM9dGhpcy5tb3JwaFRhcmdldHM9dGhpcy5za2lubmluZz0hMTt0aGlzLnNldFZhbHVlcyhhKX07VEhSRUUuTWVzaFBob25nTWF0ZXJpYWwucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlKTtcblRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbDtUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzLGEpO2EuY29sb3IuY29weSh0aGlzLmNvbG9yKTthLmFtYmllbnQuY29weSh0aGlzLmFtYmllbnQpO2EuZW1pc3NpdmUuY29weSh0aGlzLmVtaXNzaXZlKTthLnNwZWN1bGFyLmNvcHkodGhpcy5zcGVjdWxhcik7YS5zaGluaW5lc3M9dGhpcy5zaGluaW5lc3M7YS5tZXRhbD10aGlzLm1ldGFsO2EucGVyUGl4ZWw9dGhpcy5wZXJQaXhlbDthLndyYXBBcm91bmQ9dGhpcy53cmFwQXJvdW5kO2Eud3JhcFJHQi5jb3B5KHRoaXMud3JhcFJHQik7YS5tYXA9dGhpcy5tYXA7YS5saWdodE1hcD10aGlzLmxpZ2h0TWFwO2EuYnVtcE1hcD10aGlzLmJ1bXBNYXA7YS5idW1wU2NhbGU9dGhpcy5idW1wU2NhbGU7YS5ub3JtYWxNYXA9dGhpcy5ub3JtYWxNYXA7YS5ub3JtYWxTY2FsZS5jb3B5KHRoaXMubm9ybWFsU2NhbGUpO1xuYS5zcGVjdWxhck1hcD10aGlzLnNwZWN1bGFyTWFwO2EuZW52TWFwPXRoaXMuZW52TWFwO2EuY29tYmluZT10aGlzLmNvbWJpbmU7YS5yZWZsZWN0aXZpdHk9dGhpcy5yZWZsZWN0aXZpdHk7YS5yZWZyYWN0aW9uUmF0aW89dGhpcy5yZWZyYWN0aW9uUmF0aW87YS5mb2c9dGhpcy5mb2c7YS5zaGFkaW5nPXRoaXMuc2hhZGluZzthLndpcmVmcmFtZT10aGlzLndpcmVmcmFtZTthLndpcmVmcmFtZUxpbmV3aWR0aD10aGlzLndpcmVmcmFtZUxpbmV3aWR0aDthLndpcmVmcmFtZUxpbmVjYXA9dGhpcy53aXJlZnJhbWVMaW5lY2FwO2Eud2lyZWZyYW1lTGluZWpvaW49dGhpcy53aXJlZnJhbWVMaW5lam9pbjthLnZlcnRleENvbG9ycz10aGlzLnZlcnRleENvbG9yczthLnNraW5uaW5nPXRoaXMuc2tpbm5pbmc7YS5tb3JwaFRhcmdldHM9dGhpcy5tb3JwaFRhcmdldHM7YS5tb3JwaE5vcm1hbHM9dGhpcy5tb3JwaE5vcm1hbHM7cmV0dXJuIGF9O1RIUkVFLk1lc2hEZXB0aE1hdGVyaWFsPWZ1bmN0aW9uKGEpe1RIUkVFLk1hdGVyaWFsLmNhbGwodGhpcyk7dGhpcy53aXJlZnJhbWU9ITE7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9MTt0aGlzLnNldFZhbHVlcyhhKX07VEhSRUUuTWVzaERlcHRoTWF0ZXJpYWwucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlKTtUSFJFRS5NZXNoRGVwdGhNYXRlcmlhbC5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuTWVzaERlcHRoTWF0ZXJpYWw7VEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyxhKTthLndpcmVmcmFtZT10aGlzLndpcmVmcmFtZTthLndpcmVmcmFtZUxpbmV3aWR0aD10aGlzLndpcmVmcmFtZUxpbmV3aWR0aDtyZXR1cm4gYX07VEhSRUUuTWVzaE5vcm1hbE1hdGVyaWFsPWZ1bmN0aW9uKGEpe1RIUkVFLk1hdGVyaWFsLmNhbGwodGhpcyxhKTt0aGlzLnNoYWRpbmc9VEhSRUUuRmxhdFNoYWRpbmc7dGhpcy53aXJlZnJhbWU9ITE7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9MTt0aGlzLm1vcnBoVGFyZ2V0cz0hMTt0aGlzLnNldFZhbHVlcyhhKX07VEhSRUUuTWVzaE5vcm1hbE1hdGVyaWFsLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk1hdGVyaWFsLnByb3RvdHlwZSk7VEhSRUUuTWVzaE5vcm1hbE1hdGVyaWFsLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5NZXNoTm9ybWFsTWF0ZXJpYWw7VEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyxhKTthLnNoYWRpbmc9dGhpcy5zaGFkaW5nO2Eud2lyZWZyYW1lPXRoaXMud2lyZWZyYW1lO2Eud2lyZWZyYW1lTGluZXdpZHRoPXRoaXMud2lyZWZyYW1lTGluZXdpZHRoO3JldHVybiBhfTtUSFJFRS5NZXNoRmFjZU1hdGVyaWFsPWZ1bmN0aW9uKGEpe3RoaXMubWF0ZXJpYWxzPWEgaW5zdGFuY2VvZiBBcnJheT9hOltdfTtUSFJFRS5NZXNoRmFjZU1hdGVyaWFsLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe2Zvcih2YXIgYT1uZXcgVEhSRUUuTWVzaEZhY2VNYXRlcmlhbCxiPTA7Yjx0aGlzLm1hdGVyaWFscy5sZW5ndGg7YisrKWEubWF0ZXJpYWxzLnB1c2godGhpcy5tYXRlcmlhbHNbYl0uY2xvbmUoKSk7cmV0dXJuIGF9O1RIUkVFLlBhcnRpY2xlU3lzdGVtTWF0ZXJpYWw9ZnVuY3Rpb24oYSl7VEhSRUUuTWF0ZXJpYWwuY2FsbCh0aGlzKTt0aGlzLmNvbG9yPW5ldyBUSFJFRS5Db2xvcigxNjc3NzIxNSk7dGhpcy5tYXA9bnVsbDt0aGlzLnNpemU9MTt0aGlzLnNpemVBdHRlbnVhdGlvbj0hMDt0aGlzLnZlcnRleENvbG9ycz0hMTt0aGlzLmZvZz0hMDt0aGlzLnNldFZhbHVlcyhhKX07VEhSRUUuUGFydGljbGVTeXN0ZW1NYXRlcmlhbC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUpO1xuVEhSRUUuUGFydGljbGVTeXN0ZW1NYXRlcmlhbC5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuUGFydGljbGVTeXN0ZW1NYXRlcmlhbDtUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzLGEpO2EuY29sb3IuY29weSh0aGlzLmNvbG9yKTthLm1hcD10aGlzLm1hcDthLnNpemU9dGhpcy5zaXplO2Euc2l6ZUF0dGVudWF0aW9uPXRoaXMuc2l6ZUF0dGVudWF0aW9uO2EudmVydGV4Q29sb3JzPXRoaXMudmVydGV4Q29sb3JzO2EuZm9nPXRoaXMuZm9nO3JldHVybiBhfTtUSFJFRS5QYXJ0aWNsZUJhc2ljTWF0ZXJpYWw9VEhSRUUuUGFydGljbGVTeXN0ZW1NYXRlcmlhbDtUSFJFRS5TaGFkZXJNYXRlcmlhbD1mdW5jdGlvbihhKXtUSFJFRS5NYXRlcmlhbC5jYWxsKHRoaXMpO3RoaXMudmVydGV4U2hhZGVyPXRoaXMuZnJhZ21lbnRTaGFkZXI9XCJ2b2lkIG1haW4oKSB7fVwiO3RoaXMudW5pZm9ybXM9e307dGhpcy5kZWZpbmVzPXt9O3RoaXMuYXR0cmlidXRlcz1udWxsO3RoaXMuc2hhZGluZz1USFJFRS5TbW9vdGhTaGFkaW5nO3RoaXMubGluZXdpZHRoPTE7dGhpcy53aXJlZnJhbWU9ITE7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9MTt0aGlzLmxpZ2h0cz10aGlzLmZvZz0hMTt0aGlzLnZlcnRleENvbG9ycz1USFJFRS5Ob0NvbG9yczt0aGlzLm1vcnBoTm9ybWFscz10aGlzLm1vcnBoVGFyZ2V0cz10aGlzLnNraW5uaW5nPSExO3RoaXMuZGVmYXVsdEF0dHJpYnV0ZVZhbHVlcz17Y29sb3I6WzEsMSwxXSx1djpbMCwwXSx1djI6WzAsMF19O3RoaXMuaW5kZXgwQXR0cmlidXRlTmFtZT1cInBvc2l0aW9uXCI7dGhpcy5zZXRWYWx1ZXMoYSl9O1xuVEhSRUUuU2hhZGVyTWF0ZXJpYWwucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlKTtcblRIUkVFLlNoYWRlck1hdGVyaWFsLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5TaGFkZXJNYXRlcmlhbDtUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzLGEpO2EuZnJhZ21lbnRTaGFkZXI9dGhpcy5mcmFnbWVudFNoYWRlcjthLnZlcnRleFNoYWRlcj10aGlzLnZlcnRleFNoYWRlcjthLnVuaWZvcm1zPVRIUkVFLlVuaWZvcm1zVXRpbHMuY2xvbmUodGhpcy51bmlmb3Jtcyk7YS5hdHRyaWJ1dGVzPXRoaXMuYXR0cmlidXRlczthLmRlZmluZXM9dGhpcy5kZWZpbmVzO2Euc2hhZGluZz10aGlzLnNoYWRpbmc7YS53aXJlZnJhbWU9dGhpcy53aXJlZnJhbWU7YS53aXJlZnJhbWVMaW5ld2lkdGg9dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg7YS5mb2c9dGhpcy5mb2c7YS5saWdodHM9dGhpcy5saWdodHM7YS52ZXJ0ZXhDb2xvcnM9dGhpcy52ZXJ0ZXhDb2xvcnM7YS5za2lubmluZz10aGlzLnNraW5uaW5nO2EubW9ycGhUYXJnZXRzPVxudGhpcy5tb3JwaFRhcmdldHM7YS5tb3JwaE5vcm1hbHM9dGhpcy5tb3JwaE5vcm1hbHM7cmV0dXJuIGF9O1RIUkVFLlNwcml0ZU1hdGVyaWFsPWZ1bmN0aW9uKGEpe1RIUkVFLk1hdGVyaWFsLmNhbGwodGhpcyk7dGhpcy5jb2xvcj1uZXcgVEhSRUUuQ29sb3IoMTY3NzcyMTUpO3RoaXMubWFwPW51bGw7dGhpcy5yb3RhdGlvbj0wO3RoaXMuZm9nPSExO3RoaXMudXZPZmZzZXQ9bmV3IFRIUkVFLlZlY3RvcjIoMCwwKTt0aGlzLnV2U2NhbGU9bmV3IFRIUkVFLlZlY3RvcjIoMSwxKTt0aGlzLnNldFZhbHVlcyhhKX07VEhSRUUuU3ByaXRlTWF0ZXJpYWwucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlKTtcblRIUkVFLlNwcml0ZU1hdGVyaWFsLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5TcHJpdGVNYXRlcmlhbDtUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzLGEpO2EuY29sb3IuY29weSh0aGlzLmNvbG9yKTthLm1hcD10aGlzLm1hcDthLnJvdGF0aW9uPXRoaXMucm90YXRpb247YS51dk9mZnNldC5jb3B5KHRoaXMudXZPZmZzZXQpO2EudXZTY2FsZS5jb3B5KHRoaXMudXZTY2FsZSk7YS5mb2c9dGhpcy5mb2c7cmV0dXJuIGF9O1RIUkVFLlNwcml0ZUNhbnZhc01hdGVyaWFsPWZ1bmN0aW9uKGEpe1RIUkVFLk1hdGVyaWFsLmNhbGwodGhpcyk7dGhpcy5jb2xvcj1uZXcgVEhSRUUuQ29sb3IoMTY3NzcyMTUpO3RoaXMucHJvZ3JhbT1mdW5jdGlvbigpe307dGhpcy5zZXRWYWx1ZXMoYSl9O1RIUkVFLlNwcml0ZUNhbnZhc01hdGVyaWFsLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk1hdGVyaWFsLnByb3RvdHlwZSk7VEhSRUUuU3ByaXRlQ2FudmFzTWF0ZXJpYWwucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlNwcml0ZUNhbnZhc01hdGVyaWFsO1RIUkVFLk1hdGVyaWFsLnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMsYSk7YS5jb2xvci5jb3B5KHRoaXMuY29sb3IpO2EucHJvZ3JhbT10aGlzLnByb2dyYW07cmV0dXJuIGF9O1RIUkVFLlBhcnRpY2xlQ2FudmFzTWF0ZXJpYWw9VEhSRUUuU3ByaXRlQ2FudmFzTWF0ZXJpYWw7VEhSRUUuVGV4dHVyZT1mdW5jdGlvbihhLGIsYyxkLGUsZixoLGcsaSl7dGhpcy5pZD1USFJFRS5UZXh0dXJlSWRDb3VudCsrO3RoaXMudXVpZD1USFJFRS5NYXRoLmdlbmVyYXRlVVVJRCgpO3RoaXMubmFtZT1cIlwiO3RoaXMuaW1hZ2U9YTt0aGlzLm1pcG1hcHM9W107dGhpcy5tYXBwaW5nPXZvaWQgMCE9PWI/YjpuZXcgVEhSRUUuVVZNYXBwaW5nO3RoaXMud3JhcFM9dm9pZCAwIT09Yz9jOlRIUkVFLkNsYW1wVG9FZGdlV3JhcHBpbmc7dGhpcy53cmFwVD12b2lkIDAhPT1kP2Q6VEhSRUUuQ2xhbXBUb0VkZ2VXcmFwcGluZzt0aGlzLm1hZ0ZpbHRlcj12b2lkIDAhPT1lP2U6VEhSRUUuTGluZWFyRmlsdGVyO3RoaXMubWluRmlsdGVyPXZvaWQgMCE9PWY/ZjpUSFJFRS5MaW5lYXJNaXBNYXBMaW5lYXJGaWx0ZXI7dGhpcy5hbmlzb3Ryb3B5PXZvaWQgMCE9PWk/aToxO3RoaXMuZm9ybWF0PXZvaWQgMCE9PWg/aDpUSFJFRS5SR0JBRm9ybWF0O3RoaXMudHlwZT12b2lkIDAhPT1nP2c6VEhSRUUuVW5zaWduZWRCeXRlVHlwZTtcbnRoaXMub2Zmc2V0PW5ldyBUSFJFRS5WZWN0b3IyKDAsMCk7dGhpcy5yZXBlYXQ9bmV3IFRIUkVFLlZlY3RvcjIoMSwxKTt0aGlzLmdlbmVyYXRlTWlwbWFwcz0hMDt0aGlzLnByZW11bHRpcGx5QWxwaGE9ITE7dGhpcy5mbGlwWT0hMDt0aGlzLnVucGFja0FsaWdubWVudD00O3RoaXMubmVlZHNVcGRhdGU9ITE7dGhpcy5vblVwZGF0ZT1udWxsfTtcblRIUkVFLlRleHR1cmUucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5UZXh0dXJlLGNsb25lOmZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEmJihhPW5ldyBUSFJFRS5UZXh0dXJlKTthLmltYWdlPXRoaXMuaW1hZ2U7YS5taXBtYXBzPXRoaXMubWlwbWFwcy5zbGljZSgwKTthLm1hcHBpbmc9dGhpcy5tYXBwaW5nO2Eud3JhcFM9dGhpcy53cmFwUzthLndyYXBUPXRoaXMud3JhcFQ7YS5tYWdGaWx0ZXI9dGhpcy5tYWdGaWx0ZXI7YS5taW5GaWx0ZXI9dGhpcy5taW5GaWx0ZXI7YS5hbmlzb3Ryb3B5PXRoaXMuYW5pc290cm9weTthLmZvcm1hdD10aGlzLmZvcm1hdDthLnR5cGU9dGhpcy50eXBlO2Eub2Zmc2V0LmNvcHkodGhpcy5vZmZzZXQpO2EucmVwZWF0LmNvcHkodGhpcy5yZXBlYXQpO2EuZ2VuZXJhdGVNaXBtYXBzPXRoaXMuZ2VuZXJhdGVNaXBtYXBzO2EucHJlbXVsdGlwbHlBbHBoYT10aGlzLnByZW11bHRpcGx5QWxwaGE7YS5mbGlwWT10aGlzLmZsaXBZO2EudW5wYWNrQWxpZ25tZW50PVxudGhpcy51bnBhY2tBbGlnbm1lbnQ7cmV0dXJuIGF9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJkaXNwb3NlXCJ9KX19O1RIUkVFLkV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUuYXBwbHkoVEhSRUUuVGV4dHVyZS5wcm90b3R5cGUpO1RIUkVFLlRleHR1cmVJZENvdW50PTA7VEhSRUUuQ29tcHJlc3NlZFRleHR1cmU9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsaCxnLGksayxtKXtUSFJFRS5UZXh0dXJlLmNhbGwodGhpcyxudWxsLGYsaCxnLGksayxkLGUsbSk7dGhpcy5pbWFnZT17d2lkdGg6YixoZWlnaHQ6Y307dGhpcy5taXBtYXBzPWE7dGhpcy5nZW5lcmF0ZU1pcG1hcHM9ITF9O1RIUkVFLkNvbXByZXNzZWRUZXh0dXJlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLlRleHR1cmUucHJvdG90eXBlKTtUSFJFRS5Db21wcmVzc2VkVGV4dHVyZS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuQ29tcHJlc3NlZFRleHR1cmU7VEhSRUUuVGV4dHVyZS5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzLGEpO3JldHVybiBhfTtUSFJFRS5EYXRhVGV4dHVyZT1mdW5jdGlvbihhLGIsYyxkLGUsZixoLGcsaSxrLG0pe1RIUkVFLlRleHR1cmUuY2FsbCh0aGlzLG51bGwsZixoLGcsaSxrLGQsZSxtKTt0aGlzLmltYWdlPXtkYXRhOmEsd2lkdGg6YixoZWlnaHQ6Y319O1RIUkVFLkRhdGFUZXh0dXJlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLlRleHR1cmUucHJvdG90eXBlKTtUSFJFRS5EYXRhVGV4dHVyZS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuRGF0YVRleHR1cmU7VEhSRUUuVGV4dHVyZS5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzLGEpO3JldHVybiBhfTtUSFJFRS5QYXJ0aWNsZVN5c3RlbT1mdW5jdGlvbihhLGIpe1RIUkVFLk9iamVjdDNELmNhbGwodGhpcyk7dGhpcy5nZW9tZXRyeT12b2lkIDAhPT1hP2E6bmV3IFRIUkVFLkdlb21ldHJ5O3RoaXMubWF0ZXJpYWw9dm9pZCAwIT09Yj9iOm5ldyBUSFJFRS5QYXJ0aWNsZVN5c3RlbU1hdGVyaWFsKHtjb2xvcjoxNjc3NzIxNSpNYXRoLnJhbmRvbSgpfSk7dGhpcy5mcnVzdHVtQ3VsbGVkPXRoaXMuc29ydFBhcnRpY2xlcz0hMX07VEhSRUUuUGFydGljbGVTeXN0ZW0ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlKTtcblRIUkVFLlBhcnRpY2xlU3lzdGVtLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbihhKXt2b2lkIDA9PT1hJiYoYT1uZXcgVEhSRUUuUGFydGljbGVTeXN0ZW0odGhpcy5nZW9tZXRyeSx0aGlzLm1hdGVyaWFsKSk7YS5zb3J0UGFydGljbGVzPXRoaXMuc29ydFBhcnRpY2xlcztUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzLGEpO3JldHVybiBhfTtUSFJFRS5MaW5lPWZ1bmN0aW9uKGEsYixjKXtUSFJFRS5PYmplY3QzRC5jYWxsKHRoaXMpO3RoaXMuZ2VvbWV0cnk9dm9pZCAwIT09YT9hOm5ldyBUSFJFRS5HZW9tZXRyeTt0aGlzLm1hdGVyaWFsPXZvaWQgMCE9PWI/YjpuZXcgVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWwoe2NvbG9yOjE2Nzc3MjE1Kk1hdGgucmFuZG9tKCl9KTt0aGlzLnR5cGU9dm9pZCAwIT09Yz9jOlRIUkVFLkxpbmVTdHJpcH07VEhSRUUuTGluZVN0cmlwPTA7VEhSRUUuTGluZVBpZWNlcz0xO1RIUkVFLkxpbmUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlKTtUSFJFRS5MaW5lLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbihhKXt2b2lkIDA9PT1hJiYoYT1uZXcgVEhSRUUuTGluZSh0aGlzLmdlb21ldHJ5LHRoaXMubWF0ZXJpYWwsdGhpcy50eXBlKSk7VEhSRUUuT2JqZWN0M0QucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyxhKTtyZXR1cm4gYX07VEhSRUUuTWVzaD1mdW5jdGlvbihhLGIpe1RIUkVFLk9iamVjdDNELmNhbGwodGhpcyk7dGhpcy5nZW9tZXRyeT12b2lkIDAhPT1hP2E6bmV3IFRIUkVFLkdlb21ldHJ5O3RoaXMubWF0ZXJpYWw9dm9pZCAwIT09Yj9iOm5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7Y29sb3I6MTY3NzcyMTUqTWF0aC5yYW5kb20oKX0pO3RoaXMudXBkYXRlTW9ycGhUYXJnZXRzKCl9O1RIUkVFLk1lc2gucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlKTtcblRIUkVFLk1lc2gucHJvdG90eXBlLnVwZGF0ZU1vcnBoVGFyZ2V0cz1mdW5jdGlvbigpe2lmKDA8dGhpcy5nZW9tZXRyeS5tb3JwaFRhcmdldHMubGVuZ3RoKXt0aGlzLm1vcnBoVGFyZ2V0QmFzZT0tMTt0aGlzLm1vcnBoVGFyZ2V0Rm9yY2VkT3JkZXI9W107dGhpcy5tb3JwaFRhcmdldEluZmx1ZW5jZXM9W107dGhpcy5tb3JwaFRhcmdldERpY3Rpb25hcnk9e307Zm9yKHZhciBhPTAsYj10aGlzLmdlb21ldHJ5Lm1vcnBoVGFyZ2V0cy5sZW5ndGg7YTxiO2ErKyl0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcy5wdXNoKDApLHRoaXMubW9ycGhUYXJnZXREaWN0aW9uYXJ5W3RoaXMuZ2VvbWV0cnkubW9ycGhUYXJnZXRzW2FdLm5hbWVdPWF9fTtcblRIUkVFLk1lc2gucHJvdG90eXBlLmdldE1vcnBoVGFyZ2V0SW5kZXhCeU5hbWU9ZnVuY3Rpb24oYSl7aWYodm9pZCAwIT09dGhpcy5tb3JwaFRhcmdldERpY3Rpb25hcnlbYV0pcmV0dXJuIHRoaXMubW9ycGhUYXJnZXREaWN0aW9uYXJ5W2FdO2NvbnNvbGUubG9nKFwiVEhSRUUuTWVzaC5nZXRNb3JwaFRhcmdldEluZGV4QnlOYW1lOiBtb3JwaCB0YXJnZXQgXCIrYStcIiBkb2VzIG5vdCBleGlzdC4gUmV0dXJuaW5nIDAuXCIpO3JldHVybiAwfTtUSFJFRS5NZXNoLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbihhKXt2b2lkIDA9PT1hJiYoYT1uZXcgVEhSRUUuTWVzaCh0aGlzLmdlb21ldHJ5LHRoaXMubWF0ZXJpYWwpKTtUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzLGEpO3JldHVybiBhfTtUSFJFRS5Cb25lPWZ1bmN0aW9uKGEpe1RIUkVFLk9iamVjdDNELmNhbGwodGhpcyk7dGhpcy5za2luPWE7dGhpcy5za2luTWF0cml4PW5ldyBUSFJFRS5NYXRyaXg0fTtUSFJFRS5Cb25lLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSk7VEhSRUUuQm9uZS5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKGEsYil7dGhpcy5tYXRyaXhBdXRvVXBkYXRlJiYoYnw9dGhpcy51cGRhdGVNYXRyaXgoKSk7aWYoYnx8dGhpcy5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlKWE/dGhpcy5za2luTWF0cml4Lm11bHRpcGx5TWF0cmljZXMoYSx0aGlzLm1hdHJpeCk6dGhpcy5za2luTWF0cml4LmNvcHkodGhpcy5tYXRyaXgpLHRoaXMubWF0cml4V29ybGROZWVkc1VwZGF0ZT0hMSxiPSEwO3ZhciBjLGQ9dGhpcy5jaGlsZHJlbi5sZW5ndGg7Zm9yKGM9MDtjPGQ7YysrKXRoaXMuY2hpbGRyZW5bY10udXBkYXRlKHRoaXMuc2tpbk1hdHJpeCxiKX07VEhSRUUuU2tpbm5lZE1lc2g9ZnVuY3Rpb24oYSxiLGMpe1RIUkVFLk1lc2guY2FsbCh0aGlzLGEsYik7dGhpcy51c2VWZXJ0ZXhUZXh0dXJlPXZvaWQgMCE9PWM/YzohMDt0aGlzLmlkZW50aXR5TWF0cml4PW5ldyBUSFJFRS5NYXRyaXg0O3RoaXMuYm9uZXM9W107dGhpcy5ib25lTWF0cmljZXM9W107dmFyIGQsZSxmO2lmKHRoaXMuZ2VvbWV0cnkmJnZvaWQgMCE9PXRoaXMuZ2VvbWV0cnkuYm9uZXMpe2ZvcihhPTA7YTx0aGlzLmdlb21ldHJ5LmJvbmVzLmxlbmd0aDthKyspYz10aGlzLmdlb21ldHJ5LmJvbmVzW2FdLGQ9Yy5wb3MsZT1jLnJvdHEsZj1jLnNjbCxiPXRoaXMuYWRkQm9uZSgpLGIubmFtZT1jLm5hbWUsYi5wb3NpdGlvbi5zZXQoZFswXSxkWzFdLGRbMl0pLGIucXVhdGVybmlvbi5zZXQoZVswXSxlWzFdLGVbMl0sZVszXSksdm9pZCAwIT09Zj9iLnNjYWxlLnNldChmWzBdLGZbMV0sZlsyXSk6Yi5zY2FsZS5zZXQoMSwxLDEpO2ZvcihhPTA7YTx0aGlzLmJvbmVzLmxlbmd0aDthKyspYz1cbnRoaXMuZ2VvbWV0cnkuYm9uZXNbYV0sYj10aGlzLmJvbmVzW2FdLC0xPT09Yy5wYXJlbnQ/dGhpcy5hZGQoYik6dGhpcy5ib25lc1tjLnBhcmVudF0uYWRkKGIpO2E9dGhpcy5ib25lcy5sZW5ndGg7dGhpcy51c2VWZXJ0ZXhUZXh0dXJlPyh0aGlzLmJvbmVUZXh0dXJlSGVpZ2h0PXRoaXMuYm9uZVRleHR1cmVXaWR0aD1hPTI1NjxhPzY0OjY0PGE/MzI6MTY8YT8xNjo4LHRoaXMuYm9uZU1hdHJpY2VzPW5ldyBGbG9hdDMyQXJyYXkoNCp0aGlzLmJvbmVUZXh0dXJlV2lkdGgqdGhpcy5ib25lVGV4dHVyZUhlaWdodCksdGhpcy5ib25lVGV4dHVyZT1uZXcgVEhSRUUuRGF0YVRleHR1cmUodGhpcy5ib25lTWF0cmljZXMsdGhpcy5ib25lVGV4dHVyZVdpZHRoLHRoaXMuYm9uZVRleHR1cmVIZWlnaHQsVEhSRUUuUkdCQUZvcm1hdCxUSFJFRS5GbG9hdFR5cGUpLHRoaXMuYm9uZVRleHR1cmUubWluRmlsdGVyPVRIUkVFLk5lYXJlc3RGaWx0ZXIsdGhpcy5ib25lVGV4dHVyZS5tYWdGaWx0ZXI9XG5USFJFRS5OZWFyZXN0RmlsdGVyLHRoaXMuYm9uZVRleHR1cmUuZ2VuZXJhdGVNaXBtYXBzPSExLHRoaXMuYm9uZVRleHR1cmUuZmxpcFk9ITEpOnRoaXMuYm9uZU1hdHJpY2VzPW5ldyBGbG9hdDMyQXJyYXkoMTYqYSk7dGhpcy5wb3NlKCl9fTtUSFJFRS5Ta2lubmVkTWVzaC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5NZXNoLnByb3RvdHlwZSk7VEhSRUUuU2tpbm5lZE1lc2gucHJvdG90eXBlLmFkZEJvbmU9ZnVuY3Rpb24oYSl7dm9pZCAwPT09YSYmKGE9bmV3IFRIUkVFLkJvbmUodGhpcykpO3RoaXMuYm9uZXMucHVzaChhKTtyZXR1cm4gYX07XG5USFJFRS5Ta2lubmVkTWVzaC5wcm90b3R5cGUudXBkYXRlTWF0cml4V29ybGQ9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuTWF0cml4NDtyZXR1cm4gZnVuY3Rpb24oYil7dGhpcy5tYXRyaXhBdXRvVXBkYXRlJiZ0aGlzLnVwZGF0ZU1hdHJpeCgpO2lmKHRoaXMubWF0cml4V29ybGROZWVkc1VwZGF0ZXx8Yil0aGlzLnBhcmVudD90aGlzLm1hdHJpeFdvcmxkLm11bHRpcGx5TWF0cmljZXModGhpcy5wYXJlbnQubWF0cml4V29ybGQsdGhpcy5tYXRyaXgpOnRoaXMubWF0cml4V29ybGQuY29weSh0aGlzLm1hdHJpeCksdGhpcy5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPSExO2Zvcih2YXIgYj0wLGM9dGhpcy5jaGlsZHJlbi5sZW5ndGg7YjxjO2IrKyl7dmFyIGQ9dGhpcy5jaGlsZHJlbltiXTtkIGluc3RhbmNlb2YgVEhSRUUuQm9uZT9kLnVwZGF0ZSh0aGlzLmlkZW50aXR5TWF0cml4LCExKTpkLnVwZGF0ZU1hdHJpeFdvcmxkKCEwKX1pZih2b2lkIDA9PXRoaXMuYm9uZUludmVyc2VzKXt0aGlzLmJvbmVJbnZlcnNlcz1cbltdO2I9MDtmb3IoYz10aGlzLmJvbmVzLmxlbmd0aDtiPGM7YisrKWQ9bmV3IFRIUkVFLk1hdHJpeDQsZC5nZXRJbnZlcnNlKHRoaXMuYm9uZXNbYl0uc2tpbk1hdHJpeCksdGhpcy5ib25lSW52ZXJzZXMucHVzaChkKX1iPTA7Zm9yKGM9dGhpcy5ib25lcy5sZW5ndGg7YjxjO2IrKylhLm11bHRpcGx5TWF0cmljZXModGhpcy5ib25lc1tiXS5za2luTWF0cml4LHRoaXMuYm9uZUludmVyc2VzW2JdKSxhLmZsYXR0ZW5Ub0FycmF5T2Zmc2V0KHRoaXMuYm9uZU1hdHJpY2VzLDE2KmIpO3RoaXMudXNlVmVydGV4VGV4dHVyZSYmKHRoaXMuYm9uZVRleHR1cmUubmVlZHNVcGRhdGU9ITApfX0oKTtUSFJFRS5Ta2lubmVkTWVzaC5wcm90b3R5cGUucG9zZT1mdW5jdGlvbigpe3RoaXMudXBkYXRlTWF0cml4V29ybGQoITApO3RoaXMubm9ybWFsaXplU2tpbldlaWdodHMoKX07XG5USFJFRS5Ta2lubmVkTWVzaC5wcm90b3R5cGUubm9ybWFsaXplU2tpbldlaWdodHM9ZnVuY3Rpb24oKXtpZih0aGlzLmdlb21ldHJ5IGluc3RhbmNlb2YgVEhSRUUuR2VvbWV0cnkpZm9yKHZhciBhPTA7YTx0aGlzLmdlb21ldHJ5LnNraW5JbmRpY2VzLmxlbmd0aDthKyspe3ZhciBiPXRoaXMuZ2VvbWV0cnkuc2tpbldlaWdodHNbYV0sYz0xL2IubGVuZ3RoTWFuaGF0dGFuKCk7SW5maW5pdHkhPT1jP2IubXVsdGlwbHlTY2FsYXIoYyk6Yi5zZXQoMSl9fTtUSFJFRS5Ta2lubmVkTWVzaC5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oYSl7dm9pZCAwPT09YSYmKGE9bmV3IFRIUkVFLlNraW5uZWRNZXNoKHRoaXMuZ2VvbWV0cnksdGhpcy5tYXRlcmlhbCx0aGlzLnVzZVZlcnRleFRleHR1cmUpKTtUSFJFRS5NZXNoLnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMsYSk7cmV0dXJuIGF9O1RIUkVFLk1vcnBoQW5pbU1lc2g9ZnVuY3Rpb24oYSxiKXtUSFJFRS5NZXNoLmNhbGwodGhpcyxhLGIpO3RoaXMuZHVyYXRpb249MUUzO3RoaXMubWlycm9yZWRMb29wPSExO3RoaXMuY3VycmVudEtleWZyYW1lPXRoaXMubGFzdEtleWZyYW1lPXRoaXMudGltZT0wO3RoaXMuZGlyZWN0aW9uPTE7dGhpcy5kaXJlY3Rpb25CYWNrd2FyZHM9ITE7dGhpcy5zZXRGcmFtZVJhbmdlKDAsdGhpcy5nZW9tZXRyeS5tb3JwaFRhcmdldHMubGVuZ3RoLTEpfTtUSFJFRS5Nb3JwaEFuaW1NZXNoLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk1lc2gucHJvdG90eXBlKTtUSFJFRS5Nb3JwaEFuaW1NZXNoLnByb3RvdHlwZS5zZXRGcmFtZVJhbmdlPWZ1bmN0aW9uKGEsYil7dGhpcy5zdGFydEtleWZyYW1lPWE7dGhpcy5lbmRLZXlmcmFtZT1iO3RoaXMubGVuZ3RoPXRoaXMuZW5kS2V5ZnJhbWUtdGhpcy5zdGFydEtleWZyYW1lKzF9O1xuVEhSRUUuTW9ycGhBbmltTWVzaC5wcm90b3R5cGUuc2V0RGlyZWN0aW9uRm9yd2FyZD1mdW5jdGlvbigpe3RoaXMuZGlyZWN0aW9uPTE7dGhpcy5kaXJlY3Rpb25CYWNrd2FyZHM9ITF9O1RIUkVFLk1vcnBoQW5pbU1lc2gucHJvdG90eXBlLnNldERpcmVjdGlvbkJhY2t3YXJkPWZ1bmN0aW9uKCl7dGhpcy5kaXJlY3Rpb249LTE7dGhpcy5kaXJlY3Rpb25CYWNrd2FyZHM9ITB9O1xuVEhSRUUuTW9ycGhBbmltTWVzaC5wcm90b3R5cGUucGFyc2VBbmltYXRpb25zPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZW9tZXRyeTthLmFuaW1hdGlvbnN8fChhLmFuaW1hdGlvbnM9e30pO2Zvcih2YXIgYixjPWEuYW5pbWF0aW9ucyxkPS8oW2Etel0rKShcXGQrKS8sZT0wLGY9YS5tb3JwaFRhcmdldHMubGVuZ3RoO2U8ZjtlKyspe3ZhciBoPWEubW9ycGhUYXJnZXRzW2VdLm5hbWUubWF0Y2goZCk7aWYoaCYmMTxoLmxlbmd0aCl7aD1oWzFdO2NbaF18fChjW2hdPXtzdGFydDpJbmZpbml0eSxlbmQ6LUluZmluaXR5fSk7dmFyIGc9Y1toXTtlPGcuc3RhcnQmJihnLnN0YXJ0PWUpO2U+Zy5lbmQmJihnLmVuZD1lKTtifHwoYj1oKX19YS5maXJzdEFuaW1hdGlvbj1ifTtcblRIUkVFLk1vcnBoQW5pbU1lc2gucHJvdG90eXBlLnNldEFuaW1hdGlvbkxhYmVsPWZ1bmN0aW9uKGEsYixjKXt0aGlzLmdlb21ldHJ5LmFuaW1hdGlvbnN8fCh0aGlzLmdlb21ldHJ5LmFuaW1hdGlvbnM9e30pO3RoaXMuZ2VvbWV0cnkuYW5pbWF0aW9uc1thXT17c3RhcnQ6YixlbmQ6Y319O1RIUkVFLk1vcnBoQW5pbU1lc2gucHJvdG90eXBlLnBsYXlBbmltYXRpb249ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdlb21ldHJ5LmFuaW1hdGlvbnNbYV07Yz8odGhpcy5zZXRGcmFtZVJhbmdlKGMuc3RhcnQsYy5lbmQpLHRoaXMuZHVyYXRpb249MUUzKigoYy5lbmQtYy5zdGFydCkvYiksdGhpcy50aW1lPTApOmNvbnNvbGUud2FybihcImFuaW1hdGlvbltcIithK1wiXSB1bmRlZmluZWRcIil9O1xuVEhSRUUuTW9ycGhBbmltTWVzaC5wcm90b3R5cGUudXBkYXRlQW5pbWF0aW9uPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZHVyYXRpb24vdGhpcy5sZW5ndGg7dGhpcy50aW1lKz10aGlzLmRpcmVjdGlvbiphO2lmKHRoaXMubWlycm9yZWRMb29wKXtpZih0aGlzLnRpbWU+dGhpcy5kdXJhdGlvbnx8MD50aGlzLnRpbWUpdGhpcy5kaXJlY3Rpb24qPS0xLHRoaXMudGltZT50aGlzLmR1cmF0aW9uJiYodGhpcy50aW1lPXRoaXMuZHVyYXRpb24sdGhpcy5kaXJlY3Rpb25CYWNrd2FyZHM9ITApLDA+dGhpcy50aW1lJiYodGhpcy50aW1lPTAsdGhpcy5kaXJlY3Rpb25CYWNrd2FyZHM9ITEpfWVsc2UgdGhpcy50aW1lJT10aGlzLmR1cmF0aW9uLDA+dGhpcy50aW1lJiYodGhpcy50aW1lKz10aGlzLmR1cmF0aW9uKTthPXRoaXMuc3RhcnRLZXlmcmFtZStUSFJFRS5NYXRoLmNsYW1wKE1hdGguZmxvb3IodGhpcy50aW1lL2IpLDAsdGhpcy5sZW5ndGgtMSk7YSE9PXRoaXMuY3VycmVudEtleWZyYW1lJiZcbih0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1t0aGlzLmxhc3RLZXlmcmFtZV09MCx0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1t0aGlzLmN1cnJlbnRLZXlmcmFtZV09MSx0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1thXT0wLHRoaXMubGFzdEtleWZyYW1lPXRoaXMuY3VycmVudEtleWZyYW1lLHRoaXMuY3VycmVudEtleWZyYW1lPWEpO2I9dGhpcy50aW1lJWIvYjt0aGlzLmRpcmVjdGlvbkJhY2t3YXJkcyYmKGI9MS1iKTt0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1t0aGlzLmN1cnJlbnRLZXlmcmFtZV09Yjt0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1t0aGlzLmxhc3RLZXlmcmFtZV09MS1ifTtcblRIUkVFLk1vcnBoQW5pbU1lc2gucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEmJihhPW5ldyBUSFJFRS5Nb3JwaEFuaW1NZXNoKHRoaXMuZ2VvbWV0cnksdGhpcy5tYXRlcmlhbCkpO2EuZHVyYXRpb249dGhpcy5kdXJhdGlvbjthLm1pcnJvcmVkTG9vcD10aGlzLm1pcnJvcmVkTG9vcDthLnRpbWU9dGhpcy50aW1lO2EubGFzdEtleWZyYW1lPXRoaXMubGFzdEtleWZyYW1lO2EuY3VycmVudEtleWZyYW1lPXRoaXMuY3VycmVudEtleWZyYW1lO2EuZGlyZWN0aW9uPXRoaXMuZGlyZWN0aW9uO2EuZGlyZWN0aW9uQmFja3dhcmRzPXRoaXMuZGlyZWN0aW9uQmFja3dhcmRzO1RIUkVFLk1lc2gucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyxhKTtyZXR1cm4gYX07VEhSRUUuTE9EPWZ1bmN0aW9uKCl7VEhSRUUuT2JqZWN0M0QuY2FsbCh0aGlzKTt0aGlzLm9iamVjdHM9W119O1RIUkVFLkxPRC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUpO1RIUkVFLkxPRC5wcm90b3R5cGUuYWRkTGV2ZWw9ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1iJiYoYj0wKTtmb3IodmFyIGI9TWF0aC5hYnMoYiksYz0wO2M8dGhpcy5vYmplY3RzLmxlbmd0aCYmIShiPHRoaXMub2JqZWN0c1tjXS5kaXN0YW5jZSk7YysrKTt0aGlzLm9iamVjdHMuc3BsaWNlKGMsMCx7ZGlzdGFuY2U6YixvYmplY3Q6YX0pO3RoaXMuYWRkKGEpfTtUSFJFRS5MT0QucHJvdG90eXBlLmdldE9iamVjdEZvckRpc3RhbmNlPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0xLGM9dGhpcy5vYmplY3RzLmxlbmd0aDtiPGMmJiEoYTx0aGlzLm9iamVjdHNbYl0uZGlzdGFuY2UpO2IrKyk7cmV0dXJuIHRoaXMub2JqZWN0c1tiLTFdLm9iamVjdH07XG5USFJFRS5MT0QucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzLGI9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGMpe2lmKDE8dGhpcy5vYmplY3RzLmxlbmd0aCl7YS5zZXRGcm9tTWF0cml4UG9zaXRpb24oYy5tYXRyaXhXb3JsZCk7Yi5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5tYXRyaXhXb3JsZCk7Yz1hLmRpc3RhbmNlVG8oYik7dGhpcy5vYmplY3RzWzBdLm9iamVjdC52aXNpYmxlPSEwO2Zvcih2YXIgZD0xLGU9dGhpcy5vYmplY3RzLmxlbmd0aDtkPGU7ZCsrKWlmKGM+PXRoaXMub2JqZWN0c1tkXS5kaXN0YW5jZSl0aGlzLm9iamVjdHNbZC0xXS5vYmplY3QudmlzaWJsZT0hMSx0aGlzLm9iamVjdHNbZF0ub2JqZWN0LnZpc2libGU9ITA7ZWxzZSBicmVhaztmb3IoO2Q8ZTtkKyspdGhpcy5vYmplY3RzW2RdLm9iamVjdC52aXNpYmxlPSExfX19KCk7VEhSRUUuTE9ELnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe307VEhSRUUuU3ByaXRlPWZ1bmN0aW9uKGEpe1RIUkVFLk9iamVjdDNELmNhbGwodGhpcyk7dGhpcy5tYXRlcmlhbD12b2lkIDAhPT1hP2E6bmV3IFRIUkVFLlNwcml0ZU1hdGVyaWFsfTtUSFJFRS5TcHJpdGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlKTtUSFJFRS5TcHJpdGUucHJvdG90eXBlLnVwZGF0ZU1hdHJpeD1mdW5jdGlvbigpe3RoaXMubWF0cml4LmNvbXBvc2UodGhpcy5wb3NpdGlvbix0aGlzLnF1YXRlcm5pb24sdGhpcy5zY2FsZSk7dGhpcy5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPSEwfTtUSFJFRS5TcHJpdGUucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEmJihhPW5ldyBUSFJFRS5TcHJpdGUodGhpcy5tYXRlcmlhbCkpO1RIUkVFLk9iamVjdDNELnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMsYSk7cmV0dXJuIGF9O1RIUkVFLlBhcnRpY2xlPVRIUkVFLlNwcml0ZTtUSFJFRS5TY2VuZT1mdW5jdGlvbigpe1RIUkVFLk9iamVjdDNELmNhbGwodGhpcyk7dGhpcy5vdmVycmlkZU1hdGVyaWFsPXRoaXMuZm9nPW51bGw7dGhpcy5hdXRvVXBkYXRlPSEwO3RoaXMubWF0cml4QXV0b1VwZGF0ZT0hMTt0aGlzLl9fbGlnaHRzPVtdO3RoaXMuX19vYmplY3RzQWRkZWQ9W107dGhpcy5fX29iamVjdHNSZW1vdmVkPVtdfTtUSFJFRS5TY2VuZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUpO1xuVEhSRUUuU2NlbmUucHJvdG90eXBlLl9fYWRkT2JqZWN0PWZ1bmN0aW9uKGEpe2lmKGEgaW5zdGFuY2VvZiBUSFJFRS5MaWdodCktMT09PXRoaXMuX19saWdodHMuaW5kZXhPZihhKSYmdGhpcy5fX2xpZ2h0cy5wdXNoKGEpLGEudGFyZ2V0JiZ2b2lkIDA9PT1hLnRhcmdldC5wYXJlbnQmJnRoaXMuYWRkKGEudGFyZ2V0KTtlbHNlIGlmKCEoYSBpbnN0YW5jZW9mIFRIUkVFLkNhbWVyYXx8YSBpbnN0YW5jZW9mIFRIUkVFLkJvbmUpKXt0aGlzLl9fb2JqZWN0c0FkZGVkLnB1c2goYSk7dmFyIGI9dGhpcy5fX29iamVjdHNSZW1vdmVkLmluZGV4T2YoYSk7LTEhPT1iJiZ0aGlzLl9fb2JqZWN0c1JlbW92ZWQuc3BsaWNlKGIsMSl9Zm9yKGI9MDtiPGEuY2hpbGRyZW4ubGVuZ3RoO2IrKyl0aGlzLl9fYWRkT2JqZWN0KGEuY2hpbGRyZW5bYl0pfTtcblRIUkVFLlNjZW5lLnByb3RvdHlwZS5fX3JlbW92ZU9iamVjdD1mdW5jdGlvbihhKXtpZihhIGluc3RhbmNlb2YgVEhSRUUuTGlnaHQpe3ZhciBiPXRoaXMuX19saWdodHMuaW5kZXhPZihhKTstMSE9PWImJnRoaXMuX19saWdodHMuc3BsaWNlKGIsMSk7aWYoYS5zaGFkb3dDYXNjYWRlQXJyYXkpZm9yKGI9MDtiPGEuc2hhZG93Q2FzY2FkZUFycmF5Lmxlbmd0aDtiKyspdGhpcy5fX3JlbW92ZU9iamVjdChhLnNoYWRvd0Nhc2NhZGVBcnJheVtiXSl9ZWxzZSBhIGluc3RhbmNlb2YgVEhSRUUuQ2FtZXJhfHwodGhpcy5fX29iamVjdHNSZW1vdmVkLnB1c2goYSksYj10aGlzLl9fb2JqZWN0c0FkZGVkLmluZGV4T2YoYSksLTEhPT1iJiZ0aGlzLl9fb2JqZWN0c0FkZGVkLnNwbGljZShiLDEpKTtmb3IoYj0wO2I8YS5jaGlsZHJlbi5sZW5ndGg7YisrKXRoaXMuX19yZW1vdmVPYmplY3QoYS5jaGlsZHJlbltiXSl9O1xuVEhSRUUuU2NlbmUucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEmJihhPW5ldyBUSFJFRS5TY2VuZSk7VEhSRUUuT2JqZWN0M0QucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyxhKTtudWxsIT09dGhpcy5mb2cmJihhLmZvZz10aGlzLmZvZy5jbG9uZSgpKTtudWxsIT09dGhpcy5vdmVycmlkZU1hdGVyaWFsJiYoYS5vdmVycmlkZU1hdGVyaWFsPXRoaXMub3ZlcnJpZGVNYXRlcmlhbC5jbG9uZSgpKTthLmF1dG9VcGRhdGU9dGhpcy5hdXRvVXBkYXRlO2EubWF0cml4QXV0b1VwZGF0ZT10aGlzLm1hdHJpeEF1dG9VcGRhdGU7cmV0dXJuIGF9O1RIUkVFLkZvZz1mdW5jdGlvbihhLGIsYyl7dGhpcy5uYW1lPVwiXCI7dGhpcy5jb2xvcj1uZXcgVEhSRUUuQ29sb3IoYSk7dGhpcy5uZWFyPXZvaWQgMCE9PWI/YjoxO3RoaXMuZmFyPXZvaWQgMCE9PWM/YzoxRTN9O1RIUkVFLkZvZy5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFRIUkVFLkZvZyh0aGlzLmNvbG9yLmdldEhleCgpLHRoaXMubmVhcix0aGlzLmZhcil9O1RIUkVFLkZvZ0V4cDI9ZnVuY3Rpb24oYSxiKXt0aGlzLm5hbWU9XCJcIjt0aGlzLmNvbG9yPW5ldyBUSFJFRS5Db2xvcihhKTt0aGlzLmRlbnNpdHk9dm9pZCAwIT09Yj9iOjIuNUUtNH07VEhSRUUuRm9nRXhwMi5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFRIUkVFLkZvZ0V4cDIodGhpcy5jb2xvci5nZXRIZXgoKSx0aGlzLmRlbnNpdHkpfTtUSFJFRS5DYW52YXNSZW5kZXJlcj1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYixjKXtmb3IodmFyIGQ9MCxlPXoubGVuZ3RoO2Q8ZTtkKyspe3ZhciBmPXpbZF07S2EuY29weShmLmNvbG9yKTtpZihmIGluc3RhbmNlb2YgVEhSRUUuRGlyZWN0aW9uYWxMaWdodCl7dmFyIGg9dGEuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGYubWF0cml4V29ybGQpLm5vcm1hbGl6ZSgpLGc9Yi5kb3QoaCk7MD49Z3x8KGcqPWYuaW50ZW5zaXR5LGMuYWRkKEthLm11bHRpcGx5U2NhbGFyKGcpKSl9ZWxzZSBmIGluc3RhbmNlb2YgVEhSRUUuUG9pbnRMaWdodCYmKGg9dGEuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGYubWF0cml4V29ybGQpLGc9Yi5kb3QodGEuc3ViVmVjdG9ycyhoLGEpLm5vcm1hbGl6ZSgpKSwwPj1nfHwoZyo9MD09Zi5kaXN0YW5jZT8xOjEtTWF0aC5taW4oYS5kaXN0YW5jZVRvKGgpL2YuZGlzdGFuY2UsMSksMCE9ZyYmKGcqPWYuaW50ZW5zaXR5LGMuYWRkKEthLm11bHRpcGx5U2NhbGFyKGcpKSkpKX19XG5mdW5jdGlvbiBjKGEsYixjLGQpe20oYik7bChjKTtwKGQpO3QoYS5nZXRTdHlsZSgpKTtELnN0cm9rZSgpO0VhLmV4cGFuZEJ5U2NhbGFyKDIqYil9ZnVuY3Rpb24gZChhKXtzKGEuZ2V0U3R5bGUoKSk7RC5maWxsKCl9ZnVuY3Rpb24gZShhLGIsYyxlLGYsaCxnLGosaSxrLG0sbCxuKXtpZighKG4gaW5zdGFuY2VvZiBUSFJFRS5EYXRhVGV4dHVyZXx8dm9pZCAwPT09bi5pbWFnZXx8MD09PW4uaW1hZ2Uud2lkdGgpKXtpZighMD09PW4ubmVlZHNVcGRhdGUpe3ZhciBwPW4ud3JhcFM9PT1USFJFRS5SZXBlYXRXcmFwcGluZyxxPW4ud3JhcFQ9PT1USFJFRS5SZXBlYXRXcmFwcGluZztHYVtuLmlkXT1ELmNyZWF0ZVBhdHRlcm4obi5pbWFnZSwhMD09PXAmJiEwPT09cT9cInJlcGVhdFwiOiEwPT09cCYmITE9PT1xP1wicmVwZWF0LXhcIjohMT09PXAmJiEwPT09cT9cInJlcGVhdC15XCI6XCJuby1yZXBlYXRcIik7bi5uZWVkc1VwZGF0ZT0hMX12b2lkIDA9PT1HYVtuLmlkXT9zKFwicmdiYSgwLDAsMCwxKVwiKTpcbnMoR2Fbbi5pZF0pO3ZhciBwPW4ub2Zmc2V0Lngvbi5yZXBlYXQueCxxPW4ub2Zmc2V0Lnkvbi5yZXBlYXQueSx0PW4uaW1hZ2Uud2lkdGgqbi5yZXBlYXQueCxyPW4uaW1hZ2UuaGVpZ2h0Km4ucmVwZWF0LnksZz0oZytwKSp0LGo9KDEtaitxKSpyLGM9Yy1hLGU9ZS1iLGY9Zi1hLGg9aC1iLGk9KGkrcCkqdC1nLGs9KDEtaytxKSpyLWosbT0obStwKSp0LWcsbD0oMS1sK3EpKnItaixwPWkqbC1tKms7MD09PXA/KHZvaWQgMD09PWthW24uaWRdJiYoYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLGIud2lkdGg9bi5pbWFnZS53aWR0aCxiLmhlaWdodD1uLmltYWdlLmhlaWdodCxiPWIuZ2V0Q29udGV4dChcIjJkXCIpLGIuZHJhd0ltYWdlKG4uaW1hZ2UsMCwwKSxrYVtuLmlkXT1iLmdldEltYWdlRGF0YSgwLDAsbi5pbWFnZS53aWR0aCxuLmltYWdlLmhlaWdodCkuZGF0YSksYj1rYVtuLmlkXSxnPTQqKE1hdGguZmxvb3IoZykrTWF0aC5mbG9vcihqKSpuLmltYWdlLndpZHRoKSxcblYuc2V0UkdCKGJbZ10vMjU1LGJbZysxXS8yNTUsYltnKzJdLzI1NSksZChWKSk6KHA9MS9wLG49KGwqYy1rKmYpKnAsaz0obCplLWsqaCkqcCxjPShpKmYtbSpjKSpwLGU9KGkqaC1tKmUpKnAsYT1hLW4qZy1jKmosZz1iLWsqZy1lKmosRC5zYXZlKCksRC50cmFuc2Zvcm0obixrLGMsZSxhLGcpLEQuZmlsbCgpLEQucmVzdG9yZSgpKX19ZnVuY3Rpb24gZihhLGIsYyxkLGUsZixoLGcsaixpLGssbSxuKXt2YXIgbCxwO2w9bi53aWR0aC0xO3A9bi5oZWlnaHQtMTtoKj1sO2cqPXA7Yy09YTtkLT1iO2UtPWE7Zi09YjtqPWoqbC1oO2k9aSpwLWc7az1rKmwtaDttPW0qcC1nO3A9MS8oaiptLWsqaSk7bD0obSpjLWkqZSkqcDtpPShtKmQtaSpmKSpwO2M9KGoqZS1rKmMpKnA7ZD0oaipmLWsqZCkqcDthPWEtbCpoLWMqZztiPWItaSpoLWQqZztELnNhdmUoKTtELnRyYW5zZm9ybShsLGksYyxkLGEsYik7RC5jbGlwKCk7RC5kcmF3SW1hZ2UobiwwLDApO0QucmVzdG9yZSgpfWZ1bmN0aW9uIGgoYSxcbmIsYyxkKXt1YVswXT0yNTUqYS5yfDA7dWFbMV09MjU1KmEuZ3wwO3VhWzJdPTI1NSphLmJ8MDt1YVs0XT0yNTUqYi5yfDA7dWFbNV09MjU1KmIuZ3wwO3VhWzZdPTI1NSpiLmJ8MDt1YVs4XT0yNTUqYy5yfDA7dWFbOV09MjU1KmMuZ3wwO3VhWzEwXT0yNTUqYy5ifDA7dWFbMTJdPTI1NSpkLnJ8MDt1YVsxM109MjU1KmQuZ3wwO3VhWzE0XT0yNTUqZC5ifDA7ai5wdXRJbWFnZURhdGEoT2EsMCwwKTtGYS5kcmF3SW1hZ2UoUGEsMCwwKTtyZXR1cm4gTGF9ZnVuY3Rpb24gZyhhLGIsYyl7dmFyIGQ9Yi54LWEueCxlPWIueS1hLnksZj1kKmQrZSplOzAhPT1mJiYoYy89TWF0aC5zcXJ0KGYpLGQqPWMsZSo9YyxiLngrPWQsYi55Kz1lLGEueC09ZCxhLnktPWUpfWZ1bmN0aW9uIGkoYSl7eCE9PWEmJih4PUQuZ2xvYmFsQWxwaGE9YSl9ZnVuY3Rpb24gayhhKXtJIT09YSYmKGE9PT1USFJFRS5Ob3JtYWxCbGVuZGluZz9ELmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbj1cInNvdXJjZS1vdmVyXCI6XG5hPT09VEhSRUUuQWRkaXRpdmVCbGVuZGluZz9ELmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbj1cImxpZ2h0ZXJcIjphPT09VEhSRUUuU3VidHJhY3RpdmVCbGVuZGluZyYmKEQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPVwiZGFya2VyXCIpLEk9YSl9ZnVuY3Rpb24gbShhKXtKIT09YSYmKEo9RC5saW5lV2lkdGg9YSl9ZnVuY3Rpb24gbChhKXtjYSE9PWEmJihjYT1ELmxpbmVDYXA9YSl9ZnVuY3Rpb24gcChhKXtuYSE9PWEmJihuYT1ELmxpbmVKb2luPWEpfWZ1bmN0aW9uIHQoYSl7QiE9PWEmJihCPUQuc3Ryb2tlU3R5bGU9YSl9ZnVuY3Rpb24gcyhhKXtNIT09YSYmKE09RC5maWxsU3R5bGU9YSl9ZnVuY3Rpb24gcShhLGIpe2lmKHBhIT09YXx8QyE9PWIpRC5zZXRMaW5lRGFzaChbYSxiXSkscGE9YSxDPWJ9Y29uc29sZS5sb2coXCJUSFJFRS5DYW52YXNSZW5kZXJlclwiLFRIUkVFLlJFVklTSU9OKTt2YXIgbj1USFJFRS5NYXRoLnNtb290aHN0ZXAsYT1hfHx7fSx1PXRoaXMscix2LHosRz1cbm5ldyBUSFJFRS5Qcm9qZWN0b3Isdz12b2lkIDAhPT1hLmNhbnZhcz9hLmNhbnZhczpkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLHk9dy53aWR0aCxFPXcuaGVpZ2h0LEE9TWF0aC5mbG9vcih5LzIpLEs9TWF0aC5mbG9vcihFLzIpLEQ9dy5nZXRDb250ZXh0KFwiMmRcIiksRj1uZXcgVEhSRUUuQ29sb3IoMCksTz0wLHg9MSxJPTAsQj1udWxsLE09bnVsbCxKPW51bGwsY2E9bnVsbCxuYT1udWxsLHBhPW51bGwsQz0wLFEsUixMLGRhO25ldyBUSFJFRS5SZW5kZXJhYmxlVmVydGV4O25ldyBUSFJFRS5SZW5kZXJhYmxlVmVydGV4O3ZhciB6YSxCYSxiYSxBYSwkLGVhLFY9bmV3IFRIUkVFLkNvbG9yLFA9bmV3IFRIUkVFLkNvbG9yLFk9bmV3IFRIUkVFLkNvbG9yLFU9bmV3IFRIUkVFLkNvbG9yLGphPW5ldyBUSFJFRS5Db2xvcixzYT1uZXcgVEhSRUUuQ29sb3IsaGE9bmV3IFRIUkVFLkNvbG9yLEthPW5ldyBUSFJFRS5Db2xvcixHYT17fSxrYT17fSxEYSxVYSxRYSx3YSxiYixcbmNiLE1hLGZiLHNiLHBiLHZhPW5ldyBUSFJFRS5Cb3gyLGxhPW5ldyBUSFJFRS5Cb3gyLEVhPW5ldyBUSFJFRS5Cb3gyLGdiPW5ldyBUSFJFRS5Db2xvcixyYT1uZXcgVEhSRUUuQ29sb3IsZmE9bmV3IFRIUkVFLkNvbG9yLHRhPW5ldyBUSFJFRS5WZWN0b3IzLFBhLGosT2EsdWEsTGEsRmEsUmE9MTY7UGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtQYS53aWR0aD1QYS5oZWlnaHQ9MjtqPVBhLmdldENvbnRleHQoXCIyZFwiKTtqLmZpbGxTdHlsZT1cInJnYmEoMCwwLDAsMSlcIjtqLmZpbGxSZWN0KDAsMCwyLDIpO09hPWouZ2V0SW1hZ2VEYXRhKDAsMCwyLDIpO3VhPU9hLmRhdGE7TGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtMYS53aWR0aD1MYS5oZWlnaHQ9UmE7RmE9TGEuZ2V0Q29udGV4dChcIjJkXCIpO0ZhLnRyYW5zbGF0ZSgtUmEvMiwtUmEvMik7RmEuc2NhbGUoUmEsUmEpO1JhLS07dm9pZCAwPT09RC5zZXRMaW5lRGFzaCYmKEQuc2V0TGluZURhc2g9XG52b2lkIDAhPT1ELm1vekRhc2g/ZnVuY3Rpb24oYSl7RC5tb3pEYXNoPW51bGwhPT1hWzBdP2E6bnVsbH06ZnVuY3Rpb24oKXt9KTt0aGlzLmRvbUVsZW1lbnQ9dzt0aGlzLmRldmljZVBpeGVsUmF0aW89dm9pZCAwIT09YS5kZXZpY2VQaXhlbFJhdGlvP2EuZGV2aWNlUGl4ZWxSYXRpbzp2b2lkIDAhPT1zZWxmLmRldmljZVBpeGVsUmF0aW8/c2VsZi5kZXZpY2VQaXhlbFJhdGlvOjE7dGhpcy5zb3J0RWxlbWVudHM9dGhpcy5zb3J0T2JqZWN0cz10aGlzLmF1dG9DbGVhcj0hMDt0aGlzLmluZm89e3JlbmRlcjp7dmVydGljZXM6MCxmYWNlczowfX07dGhpcy5zdXBwb3J0c1ZlcnRleFRleHR1cmVzPWZ1bmN0aW9uKCl7fTt0aGlzLnNldEZhY2VDdWxsaW5nPWZ1bmN0aW9uKCl7fTt0aGlzLnNldFNpemU9ZnVuY3Rpb24oYSxiLGMpe3k9YSp0aGlzLmRldmljZVBpeGVsUmF0aW87RT1iKnRoaXMuZGV2aWNlUGl4ZWxSYXRpbztBPU1hdGguZmxvb3IoeS8yKTtLPU1hdGguZmxvb3IoRS8yKTtcbncud2lkdGg9eTt3LmhlaWdodD1FOzEhPT10aGlzLmRldmljZVBpeGVsUmF0aW8mJiExIT09YyYmKHcuc3R5bGUud2lkdGg9YStcInB4XCIsdy5zdHlsZS5oZWlnaHQ9YitcInB4XCIpO3ZhLnNldChuZXcgVEhSRUUuVmVjdG9yMigtQSwtSyksbmV3IFRIUkVFLlZlY3RvcjIoQSxLKSk7bGEuc2V0KG5ldyBUSFJFRS5WZWN0b3IyKC1BLC1LKSxuZXcgVEhSRUUuVmVjdG9yMihBLEspKTt4PTE7ST0wO25hPWNhPUo9TT1CPW51bGx9O3RoaXMuc2V0Q2xlYXJDb2xvcj1mdW5jdGlvbihhLGIpe0Yuc2V0KGEpO089dm9pZCAwIT09Yj9iOjE7bGEuc2V0KG5ldyBUSFJFRS5WZWN0b3IyKC1BLC1LKSxuZXcgVEhSRUUuVmVjdG9yMihBLEspKX07dGhpcy5zZXRDbGVhckNvbG9ySGV4PWZ1bmN0aW9uKGEsYil7Y29uc29sZS53YXJuKFwiREVQUkVDQVRFRDogLnNldENsZWFyQ29sb3JIZXgoKSBpcyBiZWluZyByZW1vdmVkLiBVc2UgLnNldENsZWFyQ29sb3IoKSBpbnN0ZWFkLlwiKTt0aGlzLnNldENsZWFyQ29sb3IoYSxcbmIpfTt0aGlzLmdldE1heEFuaXNvdHJvcHk9ZnVuY3Rpb24oKXtyZXR1cm4gMH07dGhpcy5jbGVhcj1mdW5jdGlvbigpe0Quc2V0VHJhbnNmb3JtKDEsMCwwLC0xLEEsSyk7ITE9PT1sYS5lbXB0eSgpJiYobGEuaW50ZXJzZWN0KHZhKSxsYS5leHBhbmRCeVNjYWxhcigyKSwxPk8mJkQuY2xlYXJSZWN0KGxhLm1pbi54fDAsbGEubWluLnl8MCxsYS5tYXgueC1sYS5taW4ueHwwLGxhLm1heC55LWxhLm1pbi55fDApLDA8TyYmKGsoVEhSRUUuTm9ybWFsQmxlbmRpbmcpLGkoMSkscyhcInJnYmEoXCIrTWF0aC5mbG9vcigyNTUqRi5yKStcIixcIitNYXRoLmZsb29yKDI1NSpGLmcpK1wiLFwiK01hdGguZmxvb3IoMjU1KkYuYikrXCIsXCIrTytcIilcIiksRC5maWxsUmVjdChsYS5taW4ueHwwLGxhLm1pbi55fDAsbGEubWF4LngtbGEubWluLnh8MCxsYS5tYXgueS1sYS5taW4ueXwwKSksbGEubWFrZUVtcHR5KCkpfTt0aGlzLmNsZWFyQ29sb3I9ZnVuY3Rpb24oKXt9O3RoaXMuY2xlYXJEZXB0aD1mdW5jdGlvbigpe307XG50aGlzLmNsZWFyU3RlbmNpbD1mdW5jdGlvbigpe307dGhpcy5yZW5kZXI9ZnVuY3Rpb24oYSxqKXtpZighMT09PWogaW5zdGFuY2VvZiBUSFJFRS5DYW1lcmEpY29uc29sZS5lcnJvcihcIlRIUkVFLkNhbnZhc1JlbmRlcmVyLnJlbmRlcjogY2FtZXJhIGlzIG5vdCBhbiBpbnN0YW5jZSBvZiBUSFJFRS5DYW1lcmEuXCIpO2Vsc2V7ITA9PT10aGlzLmF1dG9DbGVhciYmdGhpcy5jbGVhcigpO0Quc2V0VHJhbnNmb3JtKDEsMCwwLC0xLEEsSyk7dS5pbmZvLnJlbmRlci52ZXJ0aWNlcz0wO3UuaW5mby5yZW5kZXIuZmFjZXM9MDtyPUcucHJvamVjdFNjZW5lKGEsaix0aGlzLnNvcnRPYmplY3RzLHRoaXMuc29ydEVsZW1lbnRzKTt2PXIuZWxlbWVudHM7ej1yLmxpZ2h0cztRPWo7Z2Iuc2V0UkdCKDAsMCwwKTtyYS5zZXRSR0IoMCwwLDApO2ZhLnNldFJHQigwLDAsMCk7Zm9yKHZhciB5PTAsRj16Lmxlbmd0aDt5PEY7eSsrKXt2YXIgQj16W3ldLEU9Qi5jb2xvcjtCIGluc3RhbmNlb2YgVEhSRUUuQW1iaWVudExpZ2h0P1xuZ2IuYWRkKEUpOkIgaW5zdGFuY2VvZiBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0P3JhLmFkZChFKTpCIGluc3RhbmNlb2YgVEhSRUUuUG9pbnRMaWdodCYmZmEuYWRkKEUpfXk9MDtmb3IoRj12Lmxlbmd0aDt5PEY7eSsrKXt2YXIgeD12W3ldLHc9eC5tYXRlcmlhbDtpZighKHZvaWQgMD09PXd8fCExPT09dy52aXNpYmxlKSl7RWEubWFrZUVtcHR5KCk7aWYoeCBpbnN0YW5jZW9mIFRIUkVFLlJlbmRlcmFibGVTcHJpdGUpe1I9eDtSLngqPUE7Ui55Kj1LO3ZhciBCPVIsRT14LEk9dztpKEkub3BhY2l0eSk7ayhJLmJsZW5kaW5nKTt2YXIgeD1FLnNjYWxlLngqQSx3PUUuc2NhbGUueSpLLE89MC41Kk1hdGguc3FydCh4Kngrdyp3KTtFYS5taW4uc2V0KEIueC1PLEIueS1PKTtFYS5tYXguc2V0KEIueCtPLEIueStPKTshMT09PXZhLmlzSW50ZXJzZWN0aW9uQm94KEVhKT9FYS5tYWtlRW1wdHkoKTpJIGluc3RhbmNlb2YgVEhSRUUuU3ByaXRlTWF0ZXJpYWx8fEkgaW5zdGFuY2VvZiBUSFJFRS5QYXJ0aWNsZVN5c3RlbU1hdGVyaWFsP1xuKG51bGwhPT1JLm1hcD8oRT1JLm1hcC5pbWFnZSxELnNhdmUoKSxELnRyYW5zbGF0ZShCLngsQi55KSxELnJvdGF0ZShJLnJvdGF0aW9uKSxELnNjYWxlKHgsLXcpLEQuZHJhd0ltYWdlKEUsMCwwLEUud2lkdGgsRS5oZWlnaHQsLTAuNSwtMC41LDEsMSkpOihzKEkuY29sb3IuZ2V0U3R5bGUoKSksRC5zYXZlKCksRC50cmFuc2xhdGUoQi54LEIueSksRC5yb3RhdGUoSS5yb3RhdGlvbiksRC5zY2FsZSh4LC13KSxELmZpbGxSZWN0KC0wLjUsLTAuNSwxLDEpKSxELnJlc3RvcmUoKSk6SSBpbnN0YW5jZW9mIFRIUkVFLlNwcml0ZUNhbnZhc01hdGVyaWFsJiYodChJLmNvbG9yLmdldFN0eWxlKCkpLHMoSS5jb2xvci5nZXRTdHlsZSgpKSxELnNhdmUoKSxELnRyYW5zbGF0ZShCLngsQi55KSxELnJvdGF0ZSgtRS5yb3RhdGlvbiksRC5zY2FsZSh4LHcpLEkucHJvZ3JhbShEKSxELnJlc3RvcmUoKSl9ZWxzZSBpZih4IGluc3RhbmNlb2YgVEhSRUUuUmVuZGVyYWJsZUxpbmUpe2lmKFI9eC52MSxcbkw9eC52MixSLnBvc2l0aW9uU2NyZWVuLngqPUEsUi5wb3NpdGlvblNjcmVlbi55Kj1LLEwucG9zaXRpb25TY3JlZW4ueCo9QSxMLnBvc2l0aW9uU2NyZWVuLnkqPUssRWEuc2V0RnJvbVBvaW50cyhbUi5wb3NpdGlvblNjcmVlbixMLnBvc2l0aW9uU2NyZWVuXSksITA9PT12YS5pc0ludGVyc2VjdGlvbkJveChFYSkpaWYoQj1SLEU9TCxJPXgseD13LGkoeC5vcGFjaXR5KSxrKHguYmxlbmRpbmcpLEQuYmVnaW5QYXRoKCksRC5tb3ZlVG8oQi5wb3NpdGlvblNjcmVlbi54LEIucG9zaXRpb25TY3JlZW4ueSksRC5saW5lVG8oRS5wb3NpdGlvblNjcmVlbi54LEUucG9zaXRpb25TY3JlZW4ueSkseCBpbnN0YW5jZW9mIFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKXttKHgubGluZXdpZHRoKTtsKHgubGluZWNhcCk7cCh4LmxpbmVqb2luKTtpZih4LnZlcnRleENvbG9ycyE9PVRIUkVFLlZlcnRleENvbG9ycyl0KHguY29sb3IuZ2V0U3R5bGUoKSk7ZWxzZSBpZih3PUkudmVydGV4Q29sb3JzWzBdLmdldFN0eWxlKCksXG5JPUkudmVydGV4Q29sb3JzWzFdLmdldFN0eWxlKCksdz09PUkpdCh3KTtlbHNle3RyeXt2YXIgQz1ELmNyZWF0ZUxpbmVhckdyYWRpZW50KEIucG9zaXRpb25TY3JlZW4ueCxCLnBvc2l0aW9uU2NyZWVuLnksRS5wb3NpdGlvblNjcmVlbi54LEUucG9zaXRpb25TY3JlZW4ueSk7Qy5hZGRDb2xvclN0b3AoMCx3KTtDLmFkZENvbG9yU3RvcCgxLEkpfWNhdGNoKEope0M9d310KEMpfUQuc3Ryb2tlKCk7RWEuZXhwYW5kQnlTY2FsYXIoMip4LmxpbmV3aWR0aCl9ZWxzZSB4IGluc3RhbmNlb2YgVEhSRUUuTGluZURhc2hlZE1hdGVyaWFsJiYobSh4LmxpbmV3aWR0aCksbCh4LmxpbmVjYXApLHAoeC5saW5lam9pbiksdCh4LmNvbG9yLmdldFN0eWxlKCkpLHEoeC5kYXNoU2l6ZSx4LmdhcFNpemUpLEQuc3Ryb2tlKCksRWEuZXhwYW5kQnlTY2FsYXIoMip4LmxpbmV3aWR0aCkscShudWxsLG51bGwpKX1lbHNlIGlmKHggaW5zdGFuY2VvZiBUSFJFRS5SZW5kZXJhYmxlRmFjZTMpe1I9eC52MTtcbkw9eC52MjtkYT14LnYzO2lmKC0xPlIucG9zaXRpb25TY3JlZW4uenx8MTxSLnBvc2l0aW9uU2NyZWVuLnopY29udGludWU7aWYoLTE+TC5wb3NpdGlvblNjcmVlbi56fHwxPEwucG9zaXRpb25TY3JlZW4ueiljb250aW51ZTtpZigtMT5kYS5wb3NpdGlvblNjcmVlbi56fHwxPGRhLnBvc2l0aW9uU2NyZWVuLnopY29udGludWU7Ui5wb3NpdGlvblNjcmVlbi54Kj1BO1IucG9zaXRpb25TY3JlZW4ueSo9SztMLnBvc2l0aW9uU2NyZWVuLngqPUE7TC5wb3NpdGlvblNjcmVlbi55Kj1LO2RhLnBvc2l0aW9uU2NyZWVuLngqPUE7ZGEucG9zaXRpb25TY3JlZW4ueSo9SzswPHcub3ZlcmRyYXcmJihnKFIucG9zaXRpb25TY3JlZW4sTC5wb3NpdGlvblNjcmVlbix3Lm92ZXJkcmF3KSxnKEwucG9zaXRpb25TY3JlZW4sZGEucG9zaXRpb25TY3JlZW4sdy5vdmVyZHJhdyksZyhkYS5wb3NpdGlvblNjcmVlbixSLnBvc2l0aW9uU2NyZWVuLHcub3ZlcmRyYXcpKTtFYS5zZXRGcm9tUG9pbnRzKFtSLnBvc2l0aW9uU2NyZWVuLFxuTC5wb3NpdGlvblNjcmVlbixkYS5wb3NpdGlvblNjcmVlbl0pO2lmKCEwPT09dmEuaXNJbnRlcnNlY3Rpb25Cb3goRWEpKXtCPVI7RT1MO0k9ZGE7dS5pbmZvLnJlbmRlci52ZXJ0aWNlcys9Mzt1LmluZm8ucmVuZGVyLmZhY2VzKys7aSh3Lm9wYWNpdHkpO2sody5ibGVuZGluZyk7emE9Qi5wb3NpdGlvblNjcmVlbi54O0JhPUIucG9zaXRpb25TY3JlZW4ueTtiYT1FLnBvc2l0aW9uU2NyZWVuLng7QWE9RS5wb3NpdGlvblNjcmVlbi55OyQ9SS5wb3NpdGlvblNjcmVlbi54O2VhPUkucG9zaXRpb25TY3JlZW4ueTt2YXIgTz16YSxNPUJhLGNhPWJhLGthPUFhLG5hPSQscGE9ZWE7RC5iZWdpblBhdGgoKTtELm1vdmVUbyhPLE0pO0QubGluZVRvKGNhLGthKTtELmxpbmVUbyhuYSxwYSk7RC5jbG9zZVBhdGgoKTsodyBpbnN0YW5jZW9mIFRIUkVFLk1lc2hMYW1iZXJ0TWF0ZXJpYWx8fHcgaW5zdGFuY2VvZiBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbCkmJm51bGw9PT13Lm1hcD8oc2EuY29weSh3LmNvbG9yKSxcbmhhLmNvcHkody5lbWlzc2l2ZSksdy52ZXJ0ZXhDb2xvcnM9PT1USFJFRS5GYWNlQ29sb3JzJiZzYS5tdWx0aXBseSh4LmNvbG9yKSwhMT09PXcud2lyZWZyYW1lJiZ3LnNoYWRpbmc9PT1USFJFRS5TbW9vdGhTaGFkaW5nJiYzPT09eC52ZXJ0ZXhOb3JtYWxzTGVuZ3RoPyhQLmNvcHkoZ2IpLFkuY29weShnYiksVS5jb3B5KGdiKSxiKHgudjEucG9zaXRpb25Xb3JsZCx4LnZlcnRleE5vcm1hbHNNb2RlbFswXSxQKSxiKHgudjIucG9zaXRpb25Xb3JsZCx4LnZlcnRleE5vcm1hbHNNb2RlbFsxXSxZKSxiKHgudjMucG9zaXRpb25Xb3JsZCx4LnZlcnRleE5vcm1hbHNNb2RlbFsyXSxVKSxQLm11bHRpcGx5KHNhKS5hZGQoaGEpLFkubXVsdGlwbHkoc2EpLmFkZChoYSksVS5tdWx0aXBseShzYSkuYWRkKGhhKSxqYS5hZGRDb2xvcnMoWSxVKS5tdWx0aXBseVNjYWxhcigwLjUpLFFhPWgoUCxZLFUsamEpLGYoemEsQmEsYmEsQWEsJCxlYSwwLDAsMSwwLDAsMSxRYSkpOihWLmNvcHkoZ2IpLFxuYih4LmNlbnRyb2lkTW9kZWwseC5ub3JtYWxNb2RlbCxWKSxWLm11bHRpcGx5KHNhKS5hZGQoaGEpLCEwPT09dy53aXJlZnJhbWU/YyhWLHcud2lyZWZyYW1lTGluZXdpZHRoLHcud2lyZWZyYW1lTGluZWNhcCx3LndpcmVmcmFtZUxpbmVqb2luKTpkKFYpKSk6dyBpbnN0YW5jZW9mIFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsfHx3IGluc3RhbmNlb2YgVEhSRUUuTWVzaExhbWJlcnRNYXRlcmlhbHx8dyBpbnN0YW5jZW9mIFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsP251bGwhPT13Lm1hcD93Lm1hcC5tYXBwaW5nIGluc3RhbmNlb2YgVEhSRUUuVVZNYXBwaW5nJiYod2E9eC51dnNbMF0sZSh6YSxCYSxiYSxBYSwkLGVhLHdhWzBdLngsd2FbMF0ueSx3YVsxXS54LHdhWzFdLnksd2FbMl0ueCx3YVsyXS55LHcubWFwKSk6bnVsbCE9PXcuZW52TWFwP3cuZW52TWFwLm1hcHBpbmcgaW5zdGFuY2VvZiBUSFJFRS5TcGhlcmljYWxSZWZsZWN0aW9uTWFwcGluZyYmKHRhLmNvcHkoeC52ZXJ0ZXhOb3JtYWxzTW9kZWxWaWV3WzBdKSxcbmJiPTAuNSp0YS54KzAuNSxjYj0wLjUqdGEueSswLjUsdGEuY29weSh4LnZlcnRleE5vcm1hbHNNb2RlbFZpZXdbMV0pLE1hPTAuNSp0YS54KzAuNSxmYj0wLjUqdGEueSswLjUsdGEuY29weSh4LnZlcnRleE5vcm1hbHNNb2RlbFZpZXdbMl0pLHNiPTAuNSp0YS54KzAuNSxwYj0wLjUqdGEueSswLjUsZSh6YSxCYSxiYSxBYSwkLGVhLGJiLGNiLE1hLGZiLHNiLHBiLHcuZW52TWFwKSk6KFYuY29weSh3LmNvbG9yKSx3LnZlcnRleENvbG9ycz09PVRIUkVFLkZhY2VDb2xvcnMmJlYubXVsdGlwbHkoeC5jb2xvciksITA9PT13LndpcmVmcmFtZT9jKFYsdy53aXJlZnJhbWVMaW5ld2lkdGgsdy53aXJlZnJhbWVMaW5lY2FwLHcud2lyZWZyYW1lTGluZWpvaW4pOmQoVikpOncgaW5zdGFuY2VvZiBUSFJFRS5NZXNoRGVwdGhNYXRlcmlhbD8oRGE9US5uZWFyLFVhPVEuZmFyLFAucj1QLmc9UC5iPTEtbihCLnBvc2l0aW9uU2NyZWVuLnoqQi5wb3NpdGlvblNjcmVlbi53LERhLFVhKSxZLnI9WS5nPVxuWS5iPTEtbihFLnBvc2l0aW9uU2NyZWVuLnoqRS5wb3NpdGlvblNjcmVlbi53LERhLFVhKSxVLnI9VS5nPVUuYj0xLW4oSS5wb3NpdGlvblNjcmVlbi56KkkucG9zaXRpb25TY3JlZW4udyxEYSxVYSksamEuYWRkQ29sb3JzKFksVSkubXVsdGlwbHlTY2FsYXIoMC41KSxRYT1oKFAsWSxVLGphKSxmKHphLEJhLGJhLEFhLCQsZWEsMCwwLDEsMCwwLDEsUWEpKTp3IGluc3RhbmNlb2YgVEhSRUUuTWVzaE5vcm1hbE1hdGVyaWFsJiYoQj12b2lkIDAsdy5zaGFkaW5nPT09VEhSRUUuRmxhdFNoYWRpbmc/KEI9eC5ub3JtYWxNb2RlbFZpZXcsVi5zZXRSR0IoQi54LEIueSxCLnopLm11bHRpcGx5U2NhbGFyKDAuNSkuYWRkU2NhbGFyKDAuNSksITA9PT13LndpcmVmcmFtZT9jKFYsdy53aXJlZnJhbWVMaW5ld2lkdGgsdy53aXJlZnJhbWVMaW5lY2FwLHcud2lyZWZyYW1lTGluZWpvaW4pOmQoVikpOncuc2hhZGluZz09PVRIUkVFLlNtb290aFNoYWRpbmcmJihCPXgudmVydGV4Tm9ybWFsc01vZGVsVmlld1swXSxcblAuc2V0UkdCKEIueCxCLnksQi56KS5tdWx0aXBseVNjYWxhcigwLjUpLmFkZFNjYWxhcigwLjUpLEI9eC52ZXJ0ZXhOb3JtYWxzTW9kZWxWaWV3WzFdLFkuc2V0UkdCKEIueCxCLnksQi56KS5tdWx0aXBseVNjYWxhcigwLjUpLmFkZFNjYWxhcigwLjUpLEI9eC52ZXJ0ZXhOb3JtYWxzTW9kZWxWaWV3WzJdLFUuc2V0UkdCKEIueCxCLnksQi56KS5tdWx0aXBseVNjYWxhcigwLjUpLmFkZFNjYWxhcigwLjUpLGphLmFkZENvbG9ycyhZLFUpLm11bHRpcGx5U2NhbGFyKDAuNSksUWE9aChQLFksVSxqYSksZih6YSxCYSxiYSxBYSwkLGVhLDAsMCwxLDAsMCwxLFFhKSkpfX1sYS51bmlvbihFYSl9fUQuc2V0VHJhbnNmb3JtKDEsMCwwLDEsMCwwKX19fTtUSFJFRS5TaGFkZXJDaHVuaz17Zm9nX3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX0ZPR1xcbnVuaWZvcm0gdmVjMyBmb2dDb2xvcjtcXG4jaWZkZWYgRk9HX0VYUDJcXG51bmlmb3JtIGZsb2F0IGZvZ0RlbnNpdHk7XFxuI2Vsc2VcXG51bmlmb3JtIGZsb2F0IGZvZ05lYXI7XFxudW5pZm9ybSBmbG9hdCBmb2dGYXI7XFxuI2VuZGlmXFxuI2VuZGlmXCIsZm9nX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9GT0dcXG5mbG9hdCBkZXB0aCA9IGdsX0ZyYWdDb29yZC56IC8gZ2xfRnJhZ0Nvb3JkLnc7XFxuI2lmZGVmIEZPR19FWFAyXFxuY29uc3QgZmxvYXQgTE9HMiA9IDEuNDQyNjk1O1xcbmZsb2F0IGZvZ0ZhY3RvciA9IGV4cDIoIC0gZm9nRGVuc2l0eSAqIGZvZ0RlbnNpdHkgKiBkZXB0aCAqIGRlcHRoICogTE9HMiApO1xcbmZvZ0ZhY3RvciA9IDEuMCAtIGNsYW1wKCBmb2dGYWN0b3IsIDAuMCwgMS4wICk7XFxuI2Vsc2VcXG5mbG9hdCBmb2dGYWN0b3IgPSBzbW9vdGhzdGVwKCBmb2dOZWFyLCBmb2dGYXIsIGRlcHRoICk7XFxuI2VuZGlmXFxuZ2xfRnJhZ0NvbG9yID0gbWl4KCBnbF9GcmFnQ29sb3IsIHZlYzQoIGZvZ0NvbG9yLCBnbF9GcmFnQ29sb3IudyApLCBmb2dGYWN0b3IgKTtcXG4jZW5kaWZcIixcbmVudm1hcF9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9FTlZNQVBcXG51bmlmb3JtIGZsb2F0IHJlZmxlY3Rpdml0eTtcXG51bmlmb3JtIHNhbXBsZXJDdWJlIGVudk1hcDtcXG51bmlmb3JtIGZsb2F0IGZsaXBFbnZNYXA7XFxudW5pZm9ybSBpbnQgY29tYmluZTtcXG4jaWYgZGVmaW5lZCggVVNFX0JVTVBNQVAgKSB8fCBkZWZpbmVkKCBVU0VfTk9STUFMTUFQIClcXG51bmlmb3JtIGJvb2wgdXNlUmVmcmFjdDtcXG51bmlmb3JtIGZsb2F0IHJlZnJhY3Rpb25SYXRpbztcXG4jZWxzZVxcbnZhcnlpbmcgdmVjMyB2UmVmbGVjdDtcXG4jZW5kaWZcXG4jZW5kaWZcIixlbnZtYXBfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX0VOVk1BUFxcbnZlYzMgcmVmbGVjdFZlYztcXG4jaWYgZGVmaW5lZCggVVNFX0JVTVBNQVAgKSB8fCBkZWZpbmVkKCBVU0VfTk9STUFMTUFQIClcXG52ZWMzIGNhbWVyYVRvVmVydGV4ID0gbm9ybWFsaXplKCB2V29ybGRQb3NpdGlvbiAtIGNhbWVyYVBvc2l0aW9uICk7XFxuaWYgKCB1c2VSZWZyYWN0ICkge1xcbnJlZmxlY3RWZWMgPSByZWZyYWN0KCBjYW1lcmFUb1ZlcnRleCwgbm9ybWFsLCByZWZyYWN0aW9uUmF0aW8gKTtcXG59IGVsc2UgeyBcXG5yZWZsZWN0VmVjID0gcmVmbGVjdCggY2FtZXJhVG9WZXJ0ZXgsIG5vcm1hbCApO1xcbn1cXG4jZWxzZVxcbnJlZmxlY3RWZWMgPSB2UmVmbGVjdDtcXG4jZW5kaWZcXG4jaWZkZWYgRE9VQkxFX1NJREVEXFxuZmxvYXQgZmxpcE5vcm1hbCA9ICggLTEuMCArIDIuMCAqIGZsb2F0KCBnbF9Gcm9udEZhY2luZyApICk7XFxudmVjNCBjdWJlQ29sb3IgPSB0ZXh0dXJlQ3ViZSggZW52TWFwLCBmbGlwTm9ybWFsICogdmVjMyggZmxpcEVudk1hcCAqIHJlZmxlY3RWZWMueCwgcmVmbGVjdFZlYy55eiApICk7XFxuI2Vsc2VcXG52ZWM0IGN1YmVDb2xvciA9IHRleHR1cmVDdWJlKCBlbnZNYXAsIHZlYzMoIGZsaXBFbnZNYXAgKiByZWZsZWN0VmVjLngsIHJlZmxlY3RWZWMueXogKSApO1xcbiNlbmRpZlxcbiNpZmRlZiBHQU1NQV9JTlBVVFxcbmN1YmVDb2xvci54eXogKj0gY3ViZUNvbG9yLnh5ejtcXG4jZW5kaWZcXG5pZiAoIGNvbWJpbmUgPT0gMSApIHtcXG5nbF9GcmFnQ29sb3IueHl6ID0gbWl4KCBnbF9GcmFnQ29sb3IueHl6LCBjdWJlQ29sb3IueHl6LCBzcGVjdWxhclN0cmVuZ3RoICogcmVmbGVjdGl2aXR5ICk7XFxufSBlbHNlIGlmICggY29tYmluZSA9PSAyICkge1xcbmdsX0ZyYWdDb2xvci54eXogKz0gY3ViZUNvbG9yLnh5eiAqIHNwZWN1bGFyU3RyZW5ndGggKiByZWZsZWN0aXZpdHk7XFxufSBlbHNlIHtcXG5nbF9GcmFnQ29sb3IueHl6ID0gbWl4KCBnbF9GcmFnQ29sb3IueHl6LCBnbF9GcmFnQ29sb3IueHl6ICogY3ViZUNvbG9yLnh5eiwgc3BlY3VsYXJTdHJlbmd0aCAqIHJlZmxlY3Rpdml0eSApO1xcbn1cXG4jZW5kaWZcIixcbmVudm1hcF9wYXJzX3ZlcnRleDpcIiNpZiBkZWZpbmVkKCBVU0VfRU5WTUFQICkgJiYgISBkZWZpbmVkKCBVU0VfQlVNUE1BUCApICYmICEgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApXFxudmFyeWluZyB2ZWMzIHZSZWZsZWN0O1xcbnVuaWZvcm0gZmxvYXQgcmVmcmFjdGlvblJhdGlvO1xcbnVuaWZvcm0gYm9vbCB1c2VSZWZyYWN0O1xcbiNlbmRpZlwiLHdvcmxkcG9zX3ZlcnRleDpcIiNpZiBkZWZpbmVkKCBVU0VfRU5WTUFQICkgfHwgZGVmaW5lZCggUEhPTkcgKSB8fCBkZWZpbmVkKCBMQU1CRVJUICkgfHwgZGVmaW5lZCAoIFVTRV9TSEFET1dNQVAgKVxcbiNpZmRlZiBVU0VfU0tJTk5JTkdcXG52ZWM0IHdvcmxkUG9zaXRpb24gPSBtb2RlbE1hdHJpeCAqIHNraW5uZWQ7XFxuI2VuZGlmXFxuI2lmIGRlZmluZWQoIFVTRV9NT1JQSFRBUkdFVFMgKSAmJiAhIGRlZmluZWQoIFVTRV9TS0lOTklORyApXFxudmVjNCB3b3JsZFBvc2l0aW9uID0gbW9kZWxNYXRyaXggKiB2ZWM0KCBtb3JwaGVkLCAxLjAgKTtcXG4jZW5kaWZcXG4jaWYgISBkZWZpbmVkKCBVU0VfTU9SUEhUQVJHRVRTICkgJiYgISBkZWZpbmVkKCBVU0VfU0tJTk5JTkcgKVxcbnZlYzQgd29ybGRQb3NpdGlvbiA9IG1vZGVsTWF0cml4ICogdmVjNCggcG9zaXRpb24sIDEuMCApO1xcbiNlbmRpZlxcbiNlbmRpZlwiLFxuZW52bWFwX3ZlcnRleDpcIiNpZiBkZWZpbmVkKCBVU0VfRU5WTUFQICkgJiYgISBkZWZpbmVkKCBVU0VfQlVNUE1BUCApICYmICEgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApXFxudmVjMyB3b3JsZE5vcm1hbCA9IG1hdDMoIG1vZGVsTWF0cml4WyAwIF0ueHl6LCBtb2RlbE1hdHJpeFsgMSBdLnh5eiwgbW9kZWxNYXRyaXhbIDIgXS54eXogKSAqIG9iamVjdE5vcm1hbDtcXG53b3JsZE5vcm1hbCA9IG5vcm1hbGl6ZSggd29ybGROb3JtYWwgKTtcXG52ZWMzIGNhbWVyYVRvVmVydGV4ID0gbm9ybWFsaXplKCB3b3JsZFBvc2l0aW9uLnh5eiAtIGNhbWVyYVBvc2l0aW9uICk7XFxuaWYgKCB1c2VSZWZyYWN0ICkge1xcbnZSZWZsZWN0ID0gcmVmcmFjdCggY2FtZXJhVG9WZXJ0ZXgsIHdvcmxkTm9ybWFsLCByZWZyYWN0aW9uUmF0aW8gKTtcXG59IGVsc2Uge1xcbnZSZWZsZWN0ID0gcmVmbGVjdCggY2FtZXJhVG9WZXJ0ZXgsIHdvcmxkTm9ybWFsICk7XFxufVxcbiNlbmRpZlwiLG1hcF9wYXJ0aWNsZV9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9NQVBcXG51bmlmb3JtIHNhbXBsZXIyRCBtYXA7XFxuI2VuZGlmXCIsXG5tYXBfcGFydGljbGVfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX01BUFxcbmdsX0ZyYWdDb2xvciA9IGdsX0ZyYWdDb2xvciAqIHRleHR1cmUyRCggbWFwLCB2ZWMyKCBnbF9Qb2ludENvb3JkLngsIDEuMCAtIGdsX1BvaW50Q29vcmQueSApICk7XFxuI2VuZGlmXCIsbWFwX3BhcnNfdmVydGV4OlwiI2lmIGRlZmluZWQoIFVTRV9NQVAgKSB8fCBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKSB8fCBkZWZpbmVkKCBVU0VfU1BFQ1VMQVJNQVAgKVxcbnZhcnlpbmcgdmVjMiB2VXY7XFxudW5pZm9ybSB2ZWM0IG9mZnNldFJlcGVhdDtcXG4jZW5kaWZcIixtYXBfcGFyc19mcmFnbWVudDpcIiNpZiBkZWZpbmVkKCBVU0VfTUFQICkgfHwgZGVmaW5lZCggVVNFX0JVTVBNQVAgKSB8fCBkZWZpbmVkKCBVU0VfTk9STUFMTUFQICkgfHwgZGVmaW5lZCggVVNFX1NQRUNVTEFSTUFQIClcXG52YXJ5aW5nIHZlYzIgdlV2O1xcbiNlbmRpZlxcbiNpZmRlZiBVU0VfTUFQXFxudW5pZm9ybSBzYW1wbGVyMkQgbWFwO1xcbiNlbmRpZlwiLFxubWFwX3ZlcnRleDpcIiNpZiBkZWZpbmVkKCBVU0VfTUFQICkgfHwgZGVmaW5lZCggVVNFX0JVTVBNQVAgKSB8fCBkZWZpbmVkKCBVU0VfTk9STUFMTUFQICkgfHwgZGVmaW5lZCggVVNFX1NQRUNVTEFSTUFQIClcXG52VXYgPSB1diAqIG9mZnNldFJlcGVhdC56dyArIG9mZnNldFJlcGVhdC54eTtcXG4jZW5kaWZcIixtYXBfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX01BUFxcbnZlYzQgdGV4ZWxDb2xvciA9IHRleHR1cmUyRCggbWFwLCB2VXYgKTtcXG4jaWZkZWYgR0FNTUFfSU5QVVRcXG50ZXhlbENvbG9yLnh5eiAqPSB0ZXhlbENvbG9yLnh5ejtcXG4jZW5kaWZcXG5nbF9GcmFnQ29sb3IgPSBnbF9GcmFnQ29sb3IgKiB0ZXhlbENvbG9yO1xcbiNlbmRpZlwiLGxpZ2h0bWFwX3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX0xJR0hUTUFQXFxudmFyeWluZyB2ZWMyIHZVdjI7XFxudW5pZm9ybSBzYW1wbGVyMkQgbGlnaHRNYXA7XFxuI2VuZGlmXCIsbGlnaHRtYXBfcGFyc192ZXJ0ZXg6XCIjaWZkZWYgVVNFX0xJR0hUTUFQXFxudmFyeWluZyB2ZWMyIHZVdjI7XFxuI2VuZGlmXCIsXG5saWdodG1hcF9mcmFnbWVudDpcIiNpZmRlZiBVU0VfTElHSFRNQVBcXG5nbF9GcmFnQ29sb3IgPSBnbF9GcmFnQ29sb3IgKiB0ZXh0dXJlMkQoIGxpZ2h0TWFwLCB2VXYyICk7XFxuI2VuZGlmXCIsbGlnaHRtYXBfdmVydGV4OlwiI2lmZGVmIFVTRV9MSUdIVE1BUFxcbnZVdjIgPSB1djI7XFxuI2VuZGlmXCIsYnVtcG1hcF9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9CVU1QTUFQXFxudW5pZm9ybSBzYW1wbGVyMkQgYnVtcE1hcDtcXG51bmlmb3JtIGZsb2F0IGJ1bXBTY2FsZTtcXG52ZWMyIGRIZHh5X2Z3ZCgpIHtcXG52ZWMyIGRTVGR4ID0gZEZkeCggdlV2ICk7XFxudmVjMiBkU1RkeSA9IGRGZHkoIHZVdiApO1xcbmZsb2F0IEhsbCA9IGJ1bXBTY2FsZSAqIHRleHR1cmUyRCggYnVtcE1hcCwgdlV2ICkueDtcXG5mbG9hdCBkQnggPSBidW1wU2NhbGUgKiB0ZXh0dXJlMkQoIGJ1bXBNYXAsIHZVdiArIGRTVGR4ICkueCAtIEhsbDtcXG5mbG9hdCBkQnkgPSBidW1wU2NhbGUgKiB0ZXh0dXJlMkQoIGJ1bXBNYXAsIHZVdiArIGRTVGR5ICkueCAtIEhsbDtcXG5yZXR1cm4gdmVjMiggZEJ4LCBkQnkgKTtcXG59XFxudmVjMyBwZXJ0dXJiTm9ybWFsQXJiKCB2ZWMzIHN1cmZfcG9zLCB2ZWMzIHN1cmZfbm9ybSwgdmVjMiBkSGR4eSApIHtcXG52ZWMzIHZTaWdtYVggPSBkRmR4KCBzdXJmX3BvcyApO1xcbnZlYzMgdlNpZ21hWSA9IGRGZHkoIHN1cmZfcG9zICk7XFxudmVjMyB2TiA9IHN1cmZfbm9ybTtcXG52ZWMzIFIxID0gY3Jvc3MoIHZTaWdtYVksIHZOICk7XFxudmVjMyBSMiA9IGNyb3NzKCB2TiwgdlNpZ21hWCApO1xcbmZsb2F0IGZEZXQgPSBkb3QoIHZTaWdtYVgsIFIxICk7XFxudmVjMyB2R3JhZCA9IHNpZ24oIGZEZXQgKSAqICggZEhkeHkueCAqIFIxICsgZEhkeHkueSAqIFIyICk7XFxucmV0dXJuIG5vcm1hbGl6ZSggYWJzKCBmRGV0ICkgKiBzdXJmX25vcm0gLSB2R3JhZCApO1xcbn1cXG4jZW5kaWZcIixcbm5vcm1hbG1hcF9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9OT1JNQUxNQVBcXG51bmlmb3JtIHNhbXBsZXIyRCBub3JtYWxNYXA7XFxudW5pZm9ybSB2ZWMyIG5vcm1hbFNjYWxlO1xcbnZlYzMgcGVydHVyYk5vcm1hbDJBcmIoIHZlYzMgZXllX3BvcywgdmVjMyBzdXJmX25vcm0gKSB7XFxudmVjMyBxMCA9IGRGZHgoIGV5ZV9wb3MueHl6ICk7XFxudmVjMyBxMSA9IGRGZHkoIGV5ZV9wb3MueHl6ICk7XFxudmVjMiBzdDAgPSBkRmR4KCB2VXYuc3QgKTtcXG52ZWMyIHN0MSA9IGRGZHkoIHZVdi5zdCApO1xcbnZlYzMgUyA9IG5vcm1hbGl6ZSggIHEwICogc3QxLnQgLSBxMSAqIHN0MC50ICk7XFxudmVjMyBUID0gbm9ybWFsaXplKCAtcTAgKiBzdDEucyArIHExICogc3QwLnMgKTtcXG52ZWMzIE4gPSBub3JtYWxpemUoIHN1cmZfbm9ybSApO1xcbnZlYzMgbWFwTiA9IHRleHR1cmUyRCggbm9ybWFsTWFwLCB2VXYgKS54eXogKiAyLjAgLSAxLjA7XFxubWFwTi54eSA9IG5vcm1hbFNjYWxlICogbWFwTi54eTtcXG5tYXQzIHRzbiA9IG1hdDMoIFMsIFQsIE4gKTtcXG5yZXR1cm4gbm9ybWFsaXplKCB0c24gKiBtYXBOICk7XFxufVxcbiNlbmRpZlwiLFxuc3BlY3VsYXJtYXBfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfU1BFQ1VMQVJNQVBcXG51bmlmb3JtIHNhbXBsZXIyRCBzcGVjdWxhck1hcDtcXG4jZW5kaWZcIixzcGVjdWxhcm1hcF9mcmFnbWVudDpcImZsb2F0IHNwZWN1bGFyU3RyZW5ndGg7XFxuI2lmZGVmIFVTRV9TUEVDVUxBUk1BUFxcbnZlYzQgdGV4ZWxTcGVjdWxhciA9IHRleHR1cmUyRCggc3BlY3VsYXJNYXAsIHZVdiApO1xcbnNwZWN1bGFyU3RyZW5ndGggPSB0ZXhlbFNwZWN1bGFyLnI7XFxuI2Vsc2VcXG5zcGVjdWxhclN0cmVuZ3RoID0gMS4wO1xcbiNlbmRpZlwiLGxpZ2h0c19sYW1iZXJ0X3BhcnNfdmVydGV4OlwidW5pZm9ybSB2ZWMzIGFtYmllbnQ7XFxudW5pZm9ybSB2ZWMzIGRpZmZ1c2U7XFxudW5pZm9ybSB2ZWMzIGVtaXNzaXZlO1xcbnVuaWZvcm0gdmVjMyBhbWJpZW50TGlnaHRDb2xvcjtcXG4jaWYgTUFYX0RJUl9MSUdIVFMgPiAwXFxudW5pZm9ybSB2ZWMzIGRpcmVjdGlvbmFsTGlnaHRDb2xvclsgTUFYX0RJUl9MSUdIVFMgXTtcXG51bmlmb3JtIHZlYzMgZGlyZWN0aW9uYWxMaWdodERpcmVjdGlvblsgTUFYX0RJUl9MSUdIVFMgXTtcXG4jZW5kaWZcXG4jaWYgTUFYX0hFTUlfTElHSFRTID4gMFxcbnVuaWZvcm0gdmVjMyBoZW1pc3BoZXJlTGlnaHRTa3lDb2xvclsgTUFYX0hFTUlfTElHSFRTIF07XFxudW5pZm9ybSB2ZWMzIGhlbWlzcGhlcmVMaWdodEdyb3VuZENvbG9yWyBNQVhfSEVNSV9MSUdIVFMgXTtcXG51bmlmb3JtIHZlYzMgaGVtaXNwaGVyZUxpZ2h0RGlyZWN0aW9uWyBNQVhfSEVNSV9MSUdIVFMgXTtcXG4jZW5kaWZcXG4jaWYgTUFYX1BPSU5UX0xJR0hUUyA+IDBcXG51bmlmb3JtIHZlYzMgcG9pbnRMaWdodENvbG9yWyBNQVhfUE9JTlRfTElHSFRTIF07XFxudW5pZm9ybSB2ZWMzIHBvaW50TGlnaHRQb3NpdGlvblsgTUFYX1BPSU5UX0xJR0hUUyBdO1xcbnVuaWZvcm0gZmxvYXQgcG9pbnRMaWdodERpc3RhbmNlWyBNQVhfUE9JTlRfTElHSFRTIF07XFxuI2VuZGlmXFxuI2lmIE1BWF9TUE9UX0xJR0hUUyA+IDBcXG51bmlmb3JtIHZlYzMgc3BvdExpZ2h0Q29sb3JbIE1BWF9TUE9UX0xJR0hUUyBdO1xcbnVuaWZvcm0gdmVjMyBzcG90TGlnaHRQb3NpdGlvblsgTUFYX1NQT1RfTElHSFRTIF07XFxudW5pZm9ybSB2ZWMzIHNwb3RMaWdodERpcmVjdGlvblsgTUFYX1NQT1RfTElHSFRTIF07XFxudW5pZm9ybSBmbG9hdCBzcG90TGlnaHREaXN0YW5jZVsgTUFYX1NQT1RfTElHSFRTIF07XFxudW5pZm9ybSBmbG9hdCBzcG90TGlnaHRBbmdsZUNvc1sgTUFYX1NQT1RfTElHSFRTIF07XFxudW5pZm9ybSBmbG9hdCBzcG90TGlnaHRFeHBvbmVudFsgTUFYX1NQT1RfTElHSFRTIF07XFxuI2VuZGlmXFxuI2lmZGVmIFdSQVBfQVJPVU5EXFxudW5pZm9ybSB2ZWMzIHdyYXBSR0I7XFxuI2VuZGlmXCIsXG5saWdodHNfbGFtYmVydF92ZXJ0ZXg6XCJ2TGlnaHRGcm9udCA9IHZlYzMoIDAuMCApO1xcbiNpZmRlZiBET1VCTEVfU0lERURcXG52TGlnaHRCYWNrID0gdmVjMyggMC4wICk7XFxuI2VuZGlmXFxudHJhbnNmb3JtZWROb3JtYWwgPSBub3JtYWxpemUoIHRyYW5zZm9ybWVkTm9ybWFsICk7XFxuI2lmIE1BWF9ESVJfTElHSFRTID4gMFxcbmZvciggaW50IGkgPSAwOyBpIDwgTUFYX0RJUl9MSUdIVFM7IGkgKysgKSB7XFxudmVjNCBsRGlyZWN0aW9uID0gdmlld01hdHJpeCAqIHZlYzQoIGRpcmVjdGlvbmFsTGlnaHREaXJlY3Rpb25bIGkgXSwgMC4wICk7XFxudmVjMyBkaXJWZWN0b3IgPSBub3JtYWxpemUoIGxEaXJlY3Rpb24ueHl6ICk7XFxuZmxvYXQgZG90UHJvZHVjdCA9IGRvdCggdHJhbnNmb3JtZWROb3JtYWwsIGRpclZlY3RvciApO1xcbnZlYzMgZGlyZWN0aW9uYWxMaWdodFdlaWdodGluZyA9IHZlYzMoIG1heCggZG90UHJvZHVjdCwgMC4wICkgKTtcXG4jaWZkZWYgRE9VQkxFX1NJREVEXFxudmVjMyBkaXJlY3Rpb25hbExpZ2h0V2VpZ2h0aW5nQmFjayA9IHZlYzMoIG1heCggLWRvdFByb2R1Y3QsIDAuMCApICk7XFxuI2lmZGVmIFdSQVBfQVJPVU5EXFxudmVjMyBkaXJlY3Rpb25hbExpZ2h0V2VpZ2h0aW5nSGFsZkJhY2sgPSB2ZWMzKCBtYXgoIC0wLjUgKiBkb3RQcm9kdWN0ICsgMC41LCAwLjAgKSApO1xcbiNlbmRpZlxcbiNlbmRpZlxcbiNpZmRlZiBXUkFQX0FST1VORFxcbnZlYzMgZGlyZWN0aW9uYWxMaWdodFdlaWdodGluZ0hhbGYgPSB2ZWMzKCBtYXgoIDAuNSAqIGRvdFByb2R1Y3QgKyAwLjUsIDAuMCApICk7XFxuZGlyZWN0aW9uYWxMaWdodFdlaWdodGluZyA9IG1peCggZGlyZWN0aW9uYWxMaWdodFdlaWdodGluZywgZGlyZWN0aW9uYWxMaWdodFdlaWdodGluZ0hhbGYsIHdyYXBSR0IgKTtcXG4jaWZkZWYgRE9VQkxFX1NJREVEXFxuZGlyZWN0aW9uYWxMaWdodFdlaWdodGluZ0JhY2sgPSBtaXgoIGRpcmVjdGlvbmFsTGlnaHRXZWlnaHRpbmdCYWNrLCBkaXJlY3Rpb25hbExpZ2h0V2VpZ2h0aW5nSGFsZkJhY2ssIHdyYXBSR0IgKTtcXG4jZW5kaWZcXG4jZW5kaWZcXG52TGlnaHRGcm9udCArPSBkaXJlY3Rpb25hbExpZ2h0Q29sb3JbIGkgXSAqIGRpcmVjdGlvbmFsTGlnaHRXZWlnaHRpbmc7XFxuI2lmZGVmIERPVUJMRV9TSURFRFxcbnZMaWdodEJhY2sgKz0gZGlyZWN0aW9uYWxMaWdodENvbG9yWyBpIF0gKiBkaXJlY3Rpb25hbExpZ2h0V2VpZ2h0aW5nQmFjaztcXG4jZW5kaWZcXG59XFxuI2VuZGlmXFxuI2lmIE1BWF9QT0lOVF9MSUdIVFMgPiAwXFxuZm9yKCBpbnQgaSA9IDA7IGkgPCBNQVhfUE9JTlRfTElHSFRTOyBpICsrICkge1xcbnZlYzQgbFBvc2l0aW9uID0gdmlld01hdHJpeCAqIHZlYzQoIHBvaW50TGlnaHRQb3NpdGlvblsgaSBdLCAxLjAgKTtcXG52ZWMzIGxWZWN0b3IgPSBsUG9zaXRpb24ueHl6IC0gbXZQb3NpdGlvbi54eXo7XFxuZmxvYXQgbERpc3RhbmNlID0gMS4wO1xcbmlmICggcG9pbnRMaWdodERpc3RhbmNlWyBpIF0gPiAwLjAgKVxcbmxEaXN0YW5jZSA9IDEuMCAtIG1pbiggKCBsZW5ndGgoIGxWZWN0b3IgKSAvIHBvaW50TGlnaHREaXN0YW5jZVsgaSBdICksIDEuMCApO1xcbmxWZWN0b3IgPSBub3JtYWxpemUoIGxWZWN0b3IgKTtcXG5mbG9hdCBkb3RQcm9kdWN0ID0gZG90KCB0cmFuc2Zvcm1lZE5vcm1hbCwgbFZlY3RvciApO1xcbnZlYzMgcG9pbnRMaWdodFdlaWdodGluZyA9IHZlYzMoIG1heCggZG90UHJvZHVjdCwgMC4wICkgKTtcXG4jaWZkZWYgRE9VQkxFX1NJREVEXFxudmVjMyBwb2ludExpZ2h0V2VpZ2h0aW5nQmFjayA9IHZlYzMoIG1heCggLWRvdFByb2R1Y3QsIDAuMCApICk7XFxuI2lmZGVmIFdSQVBfQVJPVU5EXFxudmVjMyBwb2ludExpZ2h0V2VpZ2h0aW5nSGFsZkJhY2sgPSB2ZWMzKCBtYXgoIC0wLjUgKiBkb3RQcm9kdWN0ICsgMC41LCAwLjAgKSApO1xcbiNlbmRpZlxcbiNlbmRpZlxcbiNpZmRlZiBXUkFQX0FST1VORFxcbnZlYzMgcG9pbnRMaWdodFdlaWdodGluZ0hhbGYgPSB2ZWMzKCBtYXgoIDAuNSAqIGRvdFByb2R1Y3QgKyAwLjUsIDAuMCApICk7XFxucG9pbnRMaWdodFdlaWdodGluZyA9IG1peCggcG9pbnRMaWdodFdlaWdodGluZywgcG9pbnRMaWdodFdlaWdodGluZ0hhbGYsIHdyYXBSR0IgKTtcXG4jaWZkZWYgRE9VQkxFX1NJREVEXFxucG9pbnRMaWdodFdlaWdodGluZ0JhY2sgPSBtaXgoIHBvaW50TGlnaHRXZWlnaHRpbmdCYWNrLCBwb2ludExpZ2h0V2VpZ2h0aW5nSGFsZkJhY2ssIHdyYXBSR0IgKTtcXG4jZW5kaWZcXG4jZW5kaWZcXG52TGlnaHRGcm9udCArPSBwb2ludExpZ2h0Q29sb3JbIGkgXSAqIHBvaW50TGlnaHRXZWlnaHRpbmcgKiBsRGlzdGFuY2U7XFxuI2lmZGVmIERPVUJMRV9TSURFRFxcbnZMaWdodEJhY2sgKz0gcG9pbnRMaWdodENvbG9yWyBpIF0gKiBwb2ludExpZ2h0V2VpZ2h0aW5nQmFjayAqIGxEaXN0YW5jZTtcXG4jZW5kaWZcXG59XFxuI2VuZGlmXFxuI2lmIE1BWF9TUE9UX0xJR0hUUyA+IDBcXG5mb3IoIGludCBpID0gMDsgaSA8IE1BWF9TUE9UX0xJR0hUUzsgaSArKyApIHtcXG52ZWM0IGxQb3NpdGlvbiA9IHZpZXdNYXRyaXggKiB2ZWM0KCBzcG90TGlnaHRQb3NpdGlvblsgaSBdLCAxLjAgKTtcXG52ZWMzIGxWZWN0b3IgPSBsUG9zaXRpb24ueHl6IC0gbXZQb3NpdGlvbi54eXo7XFxuZmxvYXQgc3BvdEVmZmVjdCA9IGRvdCggc3BvdExpZ2h0RGlyZWN0aW9uWyBpIF0sIG5vcm1hbGl6ZSggc3BvdExpZ2h0UG9zaXRpb25bIGkgXSAtIHdvcmxkUG9zaXRpb24ueHl6ICkgKTtcXG5pZiAoIHNwb3RFZmZlY3QgPiBzcG90TGlnaHRBbmdsZUNvc1sgaSBdICkge1xcbnNwb3RFZmZlY3QgPSBtYXgoIHBvdyggc3BvdEVmZmVjdCwgc3BvdExpZ2h0RXhwb25lbnRbIGkgXSApLCAwLjAgKTtcXG5mbG9hdCBsRGlzdGFuY2UgPSAxLjA7XFxuaWYgKCBzcG90TGlnaHREaXN0YW5jZVsgaSBdID4gMC4wIClcXG5sRGlzdGFuY2UgPSAxLjAgLSBtaW4oICggbGVuZ3RoKCBsVmVjdG9yICkgLyBzcG90TGlnaHREaXN0YW5jZVsgaSBdICksIDEuMCApO1xcbmxWZWN0b3IgPSBub3JtYWxpemUoIGxWZWN0b3IgKTtcXG5mbG9hdCBkb3RQcm9kdWN0ID0gZG90KCB0cmFuc2Zvcm1lZE5vcm1hbCwgbFZlY3RvciApO1xcbnZlYzMgc3BvdExpZ2h0V2VpZ2h0aW5nID0gdmVjMyggbWF4KCBkb3RQcm9kdWN0LCAwLjAgKSApO1xcbiNpZmRlZiBET1VCTEVfU0lERURcXG52ZWMzIHNwb3RMaWdodFdlaWdodGluZ0JhY2sgPSB2ZWMzKCBtYXgoIC1kb3RQcm9kdWN0LCAwLjAgKSApO1xcbiNpZmRlZiBXUkFQX0FST1VORFxcbnZlYzMgc3BvdExpZ2h0V2VpZ2h0aW5nSGFsZkJhY2sgPSB2ZWMzKCBtYXgoIC0wLjUgKiBkb3RQcm9kdWN0ICsgMC41LCAwLjAgKSApO1xcbiNlbmRpZlxcbiNlbmRpZlxcbiNpZmRlZiBXUkFQX0FST1VORFxcbnZlYzMgc3BvdExpZ2h0V2VpZ2h0aW5nSGFsZiA9IHZlYzMoIG1heCggMC41ICogZG90UHJvZHVjdCArIDAuNSwgMC4wICkgKTtcXG5zcG90TGlnaHRXZWlnaHRpbmcgPSBtaXgoIHNwb3RMaWdodFdlaWdodGluZywgc3BvdExpZ2h0V2VpZ2h0aW5nSGFsZiwgd3JhcFJHQiApO1xcbiNpZmRlZiBET1VCTEVfU0lERURcXG5zcG90TGlnaHRXZWlnaHRpbmdCYWNrID0gbWl4KCBzcG90TGlnaHRXZWlnaHRpbmdCYWNrLCBzcG90TGlnaHRXZWlnaHRpbmdIYWxmQmFjaywgd3JhcFJHQiApO1xcbiNlbmRpZlxcbiNlbmRpZlxcbnZMaWdodEZyb250ICs9IHNwb3RMaWdodENvbG9yWyBpIF0gKiBzcG90TGlnaHRXZWlnaHRpbmcgKiBsRGlzdGFuY2UgKiBzcG90RWZmZWN0O1xcbiNpZmRlZiBET1VCTEVfU0lERURcXG52TGlnaHRCYWNrICs9IHNwb3RMaWdodENvbG9yWyBpIF0gKiBzcG90TGlnaHRXZWlnaHRpbmdCYWNrICogbERpc3RhbmNlICogc3BvdEVmZmVjdDtcXG4jZW5kaWZcXG59XFxufVxcbiNlbmRpZlxcbiNpZiBNQVhfSEVNSV9MSUdIVFMgPiAwXFxuZm9yKCBpbnQgaSA9IDA7IGkgPCBNQVhfSEVNSV9MSUdIVFM7IGkgKysgKSB7XFxudmVjNCBsRGlyZWN0aW9uID0gdmlld01hdHJpeCAqIHZlYzQoIGhlbWlzcGhlcmVMaWdodERpcmVjdGlvblsgaSBdLCAwLjAgKTtcXG52ZWMzIGxWZWN0b3IgPSBub3JtYWxpemUoIGxEaXJlY3Rpb24ueHl6ICk7XFxuZmxvYXQgZG90UHJvZHVjdCA9IGRvdCggdHJhbnNmb3JtZWROb3JtYWwsIGxWZWN0b3IgKTtcXG5mbG9hdCBoZW1pRGlmZnVzZVdlaWdodCA9IDAuNSAqIGRvdFByb2R1Y3QgKyAwLjU7XFxuZmxvYXQgaGVtaURpZmZ1c2VXZWlnaHRCYWNrID0gLTAuNSAqIGRvdFByb2R1Y3QgKyAwLjU7XFxudkxpZ2h0RnJvbnQgKz0gbWl4KCBoZW1pc3BoZXJlTGlnaHRHcm91bmRDb2xvclsgaSBdLCBoZW1pc3BoZXJlTGlnaHRTa3lDb2xvclsgaSBdLCBoZW1pRGlmZnVzZVdlaWdodCApO1xcbiNpZmRlZiBET1VCTEVfU0lERURcXG52TGlnaHRCYWNrICs9IG1peCggaGVtaXNwaGVyZUxpZ2h0R3JvdW5kQ29sb3JbIGkgXSwgaGVtaXNwaGVyZUxpZ2h0U2t5Q29sb3JbIGkgXSwgaGVtaURpZmZ1c2VXZWlnaHRCYWNrICk7XFxuI2VuZGlmXFxufVxcbiNlbmRpZlxcbnZMaWdodEZyb250ID0gdkxpZ2h0RnJvbnQgKiBkaWZmdXNlICsgYW1iaWVudCAqIGFtYmllbnRMaWdodENvbG9yICsgZW1pc3NpdmU7XFxuI2lmZGVmIERPVUJMRV9TSURFRFxcbnZMaWdodEJhY2sgPSB2TGlnaHRCYWNrICogZGlmZnVzZSArIGFtYmllbnQgKiBhbWJpZW50TGlnaHRDb2xvciArIGVtaXNzaXZlO1xcbiNlbmRpZlwiLFxubGlnaHRzX3Bob25nX3BhcnNfdmVydGV4OlwiI2lmbmRlZiBQSE9OR19QRVJfUElYRUxcXG4jaWYgTUFYX1BPSU5UX0xJR0hUUyA+IDBcXG51bmlmb3JtIHZlYzMgcG9pbnRMaWdodFBvc2l0aW9uWyBNQVhfUE9JTlRfTElHSFRTIF07XFxudW5pZm9ybSBmbG9hdCBwb2ludExpZ2h0RGlzdGFuY2VbIE1BWF9QT0lOVF9MSUdIVFMgXTtcXG52YXJ5aW5nIHZlYzQgdlBvaW50TGlnaHRbIE1BWF9QT0lOVF9MSUdIVFMgXTtcXG4jZW5kaWZcXG4jaWYgTUFYX1NQT1RfTElHSFRTID4gMFxcbnVuaWZvcm0gdmVjMyBzcG90TGlnaHRQb3NpdGlvblsgTUFYX1NQT1RfTElHSFRTIF07XFxudW5pZm9ybSBmbG9hdCBzcG90TGlnaHREaXN0YW5jZVsgTUFYX1NQT1RfTElHSFRTIF07XFxudmFyeWluZyB2ZWM0IHZTcG90TGlnaHRbIE1BWF9TUE9UX0xJR0hUUyBdO1xcbiNlbmRpZlxcbiNlbmRpZlxcbiNpZiBNQVhfU1BPVF9MSUdIVFMgPiAwIHx8IGRlZmluZWQoIFVTRV9CVU1QTUFQIClcXG52YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XFxuI2VuZGlmXCIsXG5saWdodHNfcGhvbmdfdmVydGV4OlwiI2lmbmRlZiBQSE9OR19QRVJfUElYRUxcXG4jaWYgTUFYX1BPSU5UX0xJR0hUUyA+IDBcXG5mb3IoIGludCBpID0gMDsgaSA8IE1BWF9QT0lOVF9MSUdIVFM7IGkgKysgKSB7XFxudmVjNCBsUG9zaXRpb24gPSB2aWV3TWF0cml4ICogdmVjNCggcG9pbnRMaWdodFBvc2l0aW9uWyBpIF0sIDEuMCApO1xcbnZlYzMgbFZlY3RvciA9IGxQb3NpdGlvbi54eXogLSBtdlBvc2l0aW9uLnh5ejtcXG5mbG9hdCBsRGlzdGFuY2UgPSAxLjA7XFxuaWYgKCBwb2ludExpZ2h0RGlzdGFuY2VbIGkgXSA+IDAuMCApXFxubERpc3RhbmNlID0gMS4wIC0gbWluKCAoIGxlbmd0aCggbFZlY3RvciApIC8gcG9pbnRMaWdodERpc3RhbmNlWyBpIF0gKSwgMS4wICk7XFxudlBvaW50TGlnaHRbIGkgXSA9IHZlYzQoIGxWZWN0b3IsIGxEaXN0YW5jZSApO1xcbn1cXG4jZW5kaWZcXG4jaWYgTUFYX1NQT1RfTElHSFRTID4gMFxcbmZvciggaW50IGkgPSAwOyBpIDwgTUFYX1NQT1RfTElHSFRTOyBpICsrICkge1xcbnZlYzQgbFBvc2l0aW9uID0gdmlld01hdHJpeCAqIHZlYzQoIHNwb3RMaWdodFBvc2l0aW9uWyBpIF0sIDEuMCApO1xcbnZlYzMgbFZlY3RvciA9IGxQb3NpdGlvbi54eXogLSBtdlBvc2l0aW9uLnh5ejtcXG5mbG9hdCBsRGlzdGFuY2UgPSAxLjA7XFxuaWYgKCBzcG90TGlnaHREaXN0YW5jZVsgaSBdID4gMC4wIClcXG5sRGlzdGFuY2UgPSAxLjAgLSBtaW4oICggbGVuZ3RoKCBsVmVjdG9yICkgLyBzcG90TGlnaHREaXN0YW5jZVsgaSBdICksIDEuMCApO1xcbnZTcG90TGlnaHRbIGkgXSA9IHZlYzQoIGxWZWN0b3IsIGxEaXN0YW5jZSApO1xcbn1cXG4jZW5kaWZcXG4jZW5kaWZcXG4jaWYgTUFYX1NQT1RfTElHSFRTID4gMCB8fCBkZWZpbmVkKCBVU0VfQlVNUE1BUCApXFxudldvcmxkUG9zaXRpb24gPSB3b3JsZFBvc2l0aW9uLnh5ejtcXG4jZW5kaWZcIixcbmxpZ2h0c19waG9uZ19wYXJzX2ZyYWdtZW50OlwidW5pZm9ybSB2ZWMzIGFtYmllbnRMaWdodENvbG9yO1xcbiNpZiBNQVhfRElSX0xJR0hUUyA+IDBcXG51bmlmb3JtIHZlYzMgZGlyZWN0aW9uYWxMaWdodENvbG9yWyBNQVhfRElSX0xJR0hUUyBdO1xcbnVuaWZvcm0gdmVjMyBkaXJlY3Rpb25hbExpZ2h0RGlyZWN0aW9uWyBNQVhfRElSX0xJR0hUUyBdO1xcbiNlbmRpZlxcbiNpZiBNQVhfSEVNSV9MSUdIVFMgPiAwXFxudW5pZm9ybSB2ZWMzIGhlbWlzcGhlcmVMaWdodFNreUNvbG9yWyBNQVhfSEVNSV9MSUdIVFMgXTtcXG51bmlmb3JtIHZlYzMgaGVtaXNwaGVyZUxpZ2h0R3JvdW5kQ29sb3JbIE1BWF9IRU1JX0xJR0hUUyBdO1xcbnVuaWZvcm0gdmVjMyBoZW1pc3BoZXJlTGlnaHREaXJlY3Rpb25bIE1BWF9IRU1JX0xJR0hUUyBdO1xcbiNlbmRpZlxcbiNpZiBNQVhfUE9JTlRfTElHSFRTID4gMFxcbnVuaWZvcm0gdmVjMyBwb2ludExpZ2h0Q29sb3JbIE1BWF9QT0lOVF9MSUdIVFMgXTtcXG4jaWZkZWYgUEhPTkdfUEVSX1BJWEVMXFxudW5pZm9ybSB2ZWMzIHBvaW50TGlnaHRQb3NpdGlvblsgTUFYX1BPSU5UX0xJR0hUUyBdO1xcbnVuaWZvcm0gZmxvYXQgcG9pbnRMaWdodERpc3RhbmNlWyBNQVhfUE9JTlRfTElHSFRTIF07XFxuI2Vsc2VcXG52YXJ5aW5nIHZlYzQgdlBvaW50TGlnaHRbIE1BWF9QT0lOVF9MSUdIVFMgXTtcXG4jZW5kaWZcXG4jZW5kaWZcXG4jaWYgTUFYX1NQT1RfTElHSFRTID4gMFxcbnVuaWZvcm0gdmVjMyBzcG90TGlnaHRDb2xvclsgTUFYX1NQT1RfTElHSFRTIF07XFxudW5pZm9ybSB2ZWMzIHNwb3RMaWdodFBvc2l0aW9uWyBNQVhfU1BPVF9MSUdIVFMgXTtcXG51bmlmb3JtIHZlYzMgc3BvdExpZ2h0RGlyZWN0aW9uWyBNQVhfU1BPVF9MSUdIVFMgXTtcXG51bmlmb3JtIGZsb2F0IHNwb3RMaWdodEFuZ2xlQ29zWyBNQVhfU1BPVF9MSUdIVFMgXTtcXG51bmlmb3JtIGZsb2F0IHNwb3RMaWdodEV4cG9uZW50WyBNQVhfU1BPVF9MSUdIVFMgXTtcXG4jaWZkZWYgUEhPTkdfUEVSX1BJWEVMXFxudW5pZm9ybSBmbG9hdCBzcG90TGlnaHREaXN0YW5jZVsgTUFYX1NQT1RfTElHSFRTIF07XFxuI2Vsc2VcXG52YXJ5aW5nIHZlYzQgdlNwb3RMaWdodFsgTUFYX1NQT1RfTElHSFRTIF07XFxuI2VuZGlmXFxuI2VuZGlmXFxuI2lmIE1BWF9TUE9UX0xJR0hUUyA+IDAgfHwgZGVmaW5lZCggVVNFX0JVTVBNQVAgKVxcbnZhcnlpbmcgdmVjMyB2V29ybGRQb3NpdGlvbjtcXG4jZW5kaWZcXG4jaWZkZWYgV1JBUF9BUk9VTkRcXG51bmlmb3JtIHZlYzMgd3JhcFJHQjtcXG4jZW5kaWZcXG52YXJ5aW5nIHZlYzMgdlZpZXdQb3NpdGlvbjtcXG52YXJ5aW5nIHZlYzMgdk5vcm1hbDtcIixcbmxpZ2h0c19waG9uZ19mcmFnbWVudDpcInZlYzMgbm9ybWFsID0gbm9ybWFsaXplKCB2Tm9ybWFsICk7XFxudmVjMyB2aWV3UG9zaXRpb24gPSBub3JtYWxpemUoIHZWaWV3UG9zaXRpb24gKTtcXG4jaWZkZWYgRE9VQkxFX1NJREVEXFxubm9ybWFsID0gbm9ybWFsICogKCAtMS4wICsgMi4wICogZmxvYXQoIGdsX0Zyb250RmFjaW5nICkgKTtcXG4jZW5kaWZcXG4jaWZkZWYgVVNFX05PUk1BTE1BUFxcbm5vcm1hbCA9IHBlcnR1cmJOb3JtYWwyQXJiKCAtdlZpZXdQb3NpdGlvbiwgbm9ybWFsICk7XFxuI2VsaWYgZGVmaW5lZCggVVNFX0JVTVBNQVAgKVxcbm5vcm1hbCA9IHBlcnR1cmJOb3JtYWxBcmIoIC12Vmlld1Bvc2l0aW9uLCBub3JtYWwsIGRIZHh5X2Z3ZCgpICk7XFxuI2VuZGlmXFxuI2lmIE1BWF9QT0lOVF9MSUdIVFMgPiAwXFxudmVjMyBwb2ludERpZmZ1c2UgID0gdmVjMyggMC4wICk7XFxudmVjMyBwb2ludFNwZWN1bGFyID0gdmVjMyggMC4wICk7XFxuZm9yICggaW50IGkgPSAwOyBpIDwgTUFYX1BPSU5UX0xJR0hUUzsgaSArKyApIHtcXG4jaWZkZWYgUEhPTkdfUEVSX1BJWEVMXFxudmVjNCBsUG9zaXRpb24gPSB2aWV3TWF0cml4ICogdmVjNCggcG9pbnRMaWdodFBvc2l0aW9uWyBpIF0sIDEuMCApO1xcbnZlYzMgbFZlY3RvciA9IGxQb3NpdGlvbi54eXogKyB2Vmlld1Bvc2l0aW9uLnh5ejtcXG5mbG9hdCBsRGlzdGFuY2UgPSAxLjA7XFxuaWYgKCBwb2ludExpZ2h0RGlzdGFuY2VbIGkgXSA+IDAuMCApXFxubERpc3RhbmNlID0gMS4wIC0gbWluKCAoIGxlbmd0aCggbFZlY3RvciApIC8gcG9pbnRMaWdodERpc3RhbmNlWyBpIF0gKSwgMS4wICk7XFxubFZlY3RvciA9IG5vcm1hbGl6ZSggbFZlY3RvciApO1xcbiNlbHNlXFxudmVjMyBsVmVjdG9yID0gbm9ybWFsaXplKCB2UG9pbnRMaWdodFsgaSBdLnh5eiApO1xcbmZsb2F0IGxEaXN0YW5jZSA9IHZQb2ludExpZ2h0WyBpIF0udztcXG4jZW5kaWZcXG5mbG9hdCBkb3RQcm9kdWN0ID0gZG90KCBub3JtYWwsIGxWZWN0b3IgKTtcXG4jaWZkZWYgV1JBUF9BUk9VTkRcXG5mbG9hdCBwb2ludERpZmZ1c2VXZWlnaHRGdWxsID0gbWF4KCBkb3RQcm9kdWN0LCAwLjAgKTtcXG5mbG9hdCBwb2ludERpZmZ1c2VXZWlnaHRIYWxmID0gbWF4KCAwLjUgKiBkb3RQcm9kdWN0ICsgMC41LCAwLjAgKTtcXG52ZWMzIHBvaW50RGlmZnVzZVdlaWdodCA9IG1peCggdmVjMyAoIHBvaW50RGlmZnVzZVdlaWdodEZ1bGwgKSwgdmVjMyggcG9pbnREaWZmdXNlV2VpZ2h0SGFsZiApLCB3cmFwUkdCICk7XFxuI2Vsc2VcXG5mbG9hdCBwb2ludERpZmZ1c2VXZWlnaHQgPSBtYXgoIGRvdFByb2R1Y3QsIDAuMCApO1xcbiNlbmRpZlxcbnBvaW50RGlmZnVzZSAgKz0gZGlmZnVzZSAqIHBvaW50TGlnaHRDb2xvclsgaSBdICogcG9pbnREaWZmdXNlV2VpZ2h0ICogbERpc3RhbmNlO1xcbnZlYzMgcG9pbnRIYWxmVmVjdG9yID0gbm9ybWFsaXplKCBsVmVjdG9yICsgdmlld1Bvc2l0aW9uICk7XFxuZmxvYXQgcG9pbnREb3ROb3JtYWxIYWxmID0gbWF4KCBkb3QoIG5vcm1hbCwgcG9pbnRIYWxmVmVjdG9yICksIDAuMCApO1xcbmZsb2F0IHBvaW50U3BlY3VsYXJXZWlnaHQgPSBzcGVjdWxhclN0cmVuZ3RoICogbWF4KCBwb3coIHBvaW50RG90Tm9ybWFsSGFsZiwgc2hpbmluZXNzICksIDAuMCApO1xcbiNpZmRlZiBQSFlTSUNBTExZX0JBU0VEX1NIQURJTkdcXG5mbG9hdCBzcGVjdWxhck5vcm1hbGl6YXRpb24gPSAoIHNoaW5pbmVzcyArIDIuMDAwMSApIC8gOC4wO1xcbnZlYzMgc2NobGljayA9IHNwZWN1bGFyICsgdmVjMyggMS4wIC0gc3BlY3VsYXIgKSAqIHBvdyggMS4wIC0gZG90KCBsVmVjdG9yLCBwb2ludEhhbGZWZWN0b3IgKSwgNS4wICk7XFxucG9pbnRTcGVjdWxhciArPSBzY2hsaWNrICogcG9pbnRMaWdodENvbG9yWyBpIF0gKiBwb2ludFNwZWN1bGFyV2VpZ2h0ICogcG9pbnREaWZmdXNlV2VpZ2h0ICogbERpc3RhbmNlICogc3BlY3VsYXJOb3JtYWxpemF0aW9uO1xcbiNlbHNlXFxucG9pbnRTcGVjdWxhciArPSBzcGVjdWxhciAqIHBvaW50TGlnaHRDb2xvclsgaSBdICogcG9pbnRTcGVjdWxhcldlaWdodCAqIHBvaW50RGlmZnVzZVdlaWdodCAqIGxEaXN0YW5jZTtcXG4jZW5kaWZcXG59XFxuI2VuZGlmXFxuI2lmIE1BWF9TUE9UX0xJR0hUUyA+IDBcXG52ZWMzIHNwb3REaWZmdXNlICA9IHZlYzMoIDAuMCApO1xcbnZlYzMgc3BvdFNwZWN1bGFyID0gdmVjMyggMC4wICk7XFxuZm9yICggaW50IGkgPSAwOyBpIDwgTUFYX1NQT1RfTElHSFRTOyBpICsrICkge1xcbiNpZmRlZiBQSE9OR19QRVJfUElYRUxcXG52ZWM0IGxQb3NpdGlvbiA9IHZpZXdNYXRyaXggKiB2ZWM0KCBzcG90TGlnaHRQb3NpdGlvblsgaSBdLCAxLjAgKTtcXG52ZWMzIGxWZWN0b3IgPSBsUG9zaXRpb24ueHl6ICsgdlZpZXdQb3NpdGlvbi54eXo7XFxuZmxvYXQgbERpc3RhbmNlID0gMS4wO1xcbmlmICggc3BvdExpZ2h0RGlzdGFuY2VbIGkgXSA+IDAuMCApXFxubERpc3RhbmNlID0gMS4wIC0gbWluKCAoIGxlbmd0aCggbFZlY3RvciApIC8gc3BvdExpZ2h0RGlzdGFuY2VbIGkgXSApLCAxLjAgKTtcXG5sVmVjdG9yID0gbm9ybWFsaXplKCBsVmVjdG9yICk7XFxuI2Vsc2VcXG52ZWMzIGxWZWN0b3IgPSBub3JtYWxpemUoIHZTcG90TGlnaHRbIGkgXS54eXogKTtcXG5mbG9hdCBsRGlzdGFuY2UgPSB2U3BvdExpZ2h0WyBpIF0udztcXG4jZW5kaWZcXG5mbG9hdCBzcG90RWZmZWN0ID0gZG90KCBzcG90TGlnaHREaXJlY3Rpb25bIGkgXSwgbm9ybWFsaXplKCBzcG90TGlnaHRQb3NpdGlvblsgaSBdIC0gdldvcmxkUG9zaXRpb24gKSApO1xcbmlmICggc3BvdEVmZmVjdCA+IHNwb3RMaWdodEFuZ2xlQ29zWyBpIF0gKSB7XFxuc3BvdEVmZmVjdCA9IG1heCggcG93KCBzcG90RWZmZWN0LCBzcG90TGlnaHRFeHBvbmVudFsgaSBdICksIDAuMCApO1xcbmZsb2F0IGRvdFByb2R1Y3QgPSBkb3QoIG5vcm1hbCwgbFZlY3RvciApO1xcbiNpZmRlZiBXUkFQX0FST1VORFxcbmZsb2F0IHNwb3REaWZmdXNlV2VpZ2h0RnVsbCA9IG1heCggZG90UHJvZHVjdCwgMC4wICk7XFxuZmxvYXQgc3BvdERpZmZ1c2VXZWlnaHRIYWxmID0gbWF4KCAwLjUgKiBkb3RQcm9kdWN0ICsgMC41LCAwLjAgKTtcXG52ZWMzIHNwb3REaWZmdXNlV2VpZ2h0ID0gbWl4KCB2ZWMzICggc3BvdERpZmZ1c2VXZWlnaHRGdWxsICksIHZlYzMoIHNwb3REaWZmdXNlV2VpZ2h0SGFsZiApLCB3cmFwUkdCICk7XFxuI2Vsc2VcXG5mbG9hdCBzcG90RGlmZnVzZVdlaWdodCA9IG1heCggZG90UHJvZHVjdCwgMC4wICk7XFxuI2VuZGlmXFxuc3BvdERpZmZ1c2UgKz0gZGlmZnVzZSAqIHNwb3RMaWdodENvbG9yWyBpIF0gKiBzcG90RGlmZnVzZVdlaWdodCAqIGxEaXN0YW5jZSAqIHNwb3RFZmZlY3Q7XFxudmVjMyBzcG90SGFsZlZlY3RvciA9IG5vcm1hbGl6ZSggbFZlY3RvciArIHZpZXdQb3NpdGlvbiApO1xcbmZsb2F0IHNwb3REb3ROb3JtYWxIYWxmID0gbWF4KCBkb3QoIG5vcm1hbCwgc3BvdEhhbGZWZWN0b3IgKSwgMC4wICk7XFxuZmxvYXQgc3BvdFNwZWN1bGFyV2VpZ2h0ID0gc3BlY3VsYXJTdHJlbmd0aCAqIG1heCggcG93KCBzcG90RG90Tm9ybWFsSGFsZiwgc2hpbmluZXNzICksIDAuMCApO1xcbiNpZmRlZiBQSFlTSUNBTExZX0JBU0VEX1NIQURJTkdcXG5mbG9hdCBzcGVjdWxhck5vcm1hbGl6YXRpb24gPSAoIHNoaW5pbmVzcyArIDIuMDAwMSApIC8gOC4wO1xcbnZlYzMgc2NobGljayA9IHNwZWN1bGFyICsgdmVjMyggMS4wIC0gc3BlY3VsYXIgKSAqIHBvdyggMS4wIC0gZG90KCBsVmVjdG9yLCBzcG90SGFsZlZlY3RvciApLCA1LjAgKTtcXG5zcG90U3BlY3VsYXIgKz0gc2NobGljayAqIHNwb3RMaWdodENvbG9yWyBpIF0gKiBzcG90U3BlY3VsYXJXZWlnaHQgKiBzcG90RGlmZnVzZVdlaWdodCAqIGxEaXN0YW5jZSAqIHNwZWN1bGFyTm9ybWFsaXphdGlvbiAqIHNwb3RFZmZlY3Q7XFxuI2Vsc2VcXG5zcG90U3BlY3VsYXIgKz0gc3BlY3VsYXIgKiBzcG90TGlnaHRDb2xvclsgaSBdICogc3BvdFNwZWN1bGFyV2VpZ2h0ICogc3BvdERpZmZ1c2VXZWlnaHQgKiBsRGlzdGFuY2UgKiBzcG90RWZmZWN0O1xcbiNlbmRpZlxcbn1cXG59XFxuI2VuZGlmXFxuI2lmIE1BWF9ESVJfTElHSFRTID4gMFxcbnZlYzMgZGlyRGlmZnVzZSAgPSB2ZWMzKCAwLjAgKTtcXG52ZWMzIGRpclNwZWN1bGFyID0gdmVjMyggMC4wICk7XFxuZm9yKCBpbnQgaSA9IDA7IGkgPCBNQVhfRElSX0xJR0hUUzsgaSArKyApIHtcXG52ZWM0IGxEaXJlY3Rpb24gPSB2aWV3TWF0cml4ICogdmVjNCggZGlyZWN0aW9uYWxMaWdodERpcmVjdGlvblsgaSBdLCAwLjAgKTtcXG52ZWMzIGRpclZlY3RvciA9IG5vcm1hbGl6ZSggbERpcmVjdGlvbi54eXogKTtcXG5mbG9hdCBkb3RQcm9kdWN0ID0gZG90KCBub3JtYWwsIGRpclZlY3RvciApO1xcbiNpZmRlZiBXUkFQX0FST1VORFxcbmZsb2F0IGRpckRpZmZ1c2VXZWlnaHRGdWxsID0gbWF4KCBkb3RQcm9kdWN0LCAwLjAgKTtcXG5mbG9hdCBkaXJEaWZmdXNlV2VpZ2h0SGFsZiA9IG1heCggMC41ICogZG90UHJvZHVjdCArIDAuNSwgMC4wICk7XFxudmVjMyBkaXJEaWZmdXNlV2VpZ2h0ID0gbWl4KCB2ZWMzKCBkaXJEaWZmdXNlV2VpZ2h0RnVsbCApLCB2ZWMzKCBkaXJEaWZmdXNlV2VpZ2h0SGFsZiApLCB3cmFwUkdCICk7XFxuI2Vsc2VcXG5mbG9hdCBkaXJEaWZmdXNlV2VpZ2h0ID0gbWF4KCBkb3RQcm9kdWN0LCAwLjAgKTtcXG4jZW5kaWZcXG5kaXJEaWZmdXNlICArPSBkaWZmdXNlICogZGlyZWN0aW9uYWxMaWdodENvbG9yWyBpIF0gKiBkaXJEaWZmdXNlV2VpZ2h0O1xcbnZlYzMgZGlySGFsZlZlY3RvciA9IG5vcm1hbGl6ZSggZGlyVmVjdG9yICsgdmlld1Bvc2l0aW9uICk7XFxuZmxvYXQgZGlyRG90Tm9ybWFsSGFsZiA9IG1heCggZG90KCBub3JtYWwsIGRpckhhbGZWZWN0b3IgKSwgMC4wICk7XFxuZmxvYXQgZGlyU3BlY3VsYXJXZWlnaHQgPSBzcGVjdWxhclN0cmVuZ3RoICogbWF4KCBwb3coIGRpckRvdE5vcm1hbEhhbGYsIHNoaW5pbmVzcyApLCAwLjAgKTtcXG4jaWZkZWYgUEhZU0lDQUxMWV9CQVNFRF9TSEFESU5HXFxuZmxvYXQgc3BlY3VsYXJOb3JtYWxpemF0aW9uID0gKCBzaGluaW5lc3MgKyAyLjAwMDEgKSAvIDguMDtcXG52ZWMzIHNjaGxpY2sgPSBzcGVjdWxhciArIHZlYzMoIDEuMCAtIHNwZWN1bGFyICkgKiBwb3coIDEuMCAtIGRvdCggZGlyVmVjdG9yLCBkaXJIYWxmVmVjdG9yICksIDUuMCApO1xcbmRpclNwZWN1bGFyICs9IHNjaGxpY2sgKiBkaXJlY3Rpb25hbExpZ2h0Q29sb3JbIGkgXSAqIGRpclNwZWN1bGFyV2VpZ2h0ICogZGlyRGlmZnVzZVdlaWdodCAqIHNwZWN1bGFyTm9ybWFsaXphdGlvbjtcXG4jZWxzZVxcbmRpclNwZWN1bGFyICs9IHNwZWN1bGFyICogZGlyZWN0aW9uYWxMaWdodENvbG9yWyBpIF0gKiBkaXJTcGVjdWxhcldlaWdodCAqIGRpckRpZmZ1c2VXZWlnaHQ7XFxuI2VuZGlmXFxufVxcbiNlbmRpZlxcbiNpZiBNQVhfSEVNSV9MSUdIVFMgPiAwXFxudmVjMyBoZW1pRGlmZnVzZSAgPSB2ZWMzKCAwLjAgKTtcXG52ZWMzIGhlbWlTcGVjdWxhciA9IHZlYzMoIDAuMCApO1xcbmZvciggaW50IGkgPSAwOyBpIDwgTUFYX0hFTUlfTElHSFRTOyBpICsrICkge1xcbnZlYzQgbERpcmVjdGlvbiA9IHZpZXdNYXRyaXggKiB2ZWM0KCBoZW1pc3BoZXJlTGlnaHREaXJlY3Rpb25bIGkgXSwgMC4wICk7XFxudmVjMyBsVmVjdG9yID0gbm9ybWFsaXplKCBsRGlyZWN0aW9uLnh5eiApO1xcbmZsb2F0IGRvdFByb2R1Y3QgPSBkb3QoIG5vcm1hbCwgbFZlY3RvciApO1xcbmZsb2F0IGhlbWlEaWZmdXNlV2VpZ2h0ID0gMC41ICogZG90UHJvZHVjdCArIDAuNTtcXG52ZWMzIGhlbWlDb2xvciA9IG1peCggaGVtaXNwaGVyZUxpZ2h0R3JvdW5kQ29sb3JbIGkgXSwgaGVtaXNwaGVyZUxpZ2h0U2t5Q29sb3JbIGkgXSwgaGVtaURpZmZ1c2VXZWlnaHQgKTtcXG5oZW1pRGlmZnVzZSArPSBkaWZmdXNlICogaGVtaUNvbG9yO1xcbnZlYzMgaGVtaUhhbGZWZWN0b3JTa3kgPSBub3JtYWxpemUoIGxWZWN0b3IgKyB2aWV3UG9zaXRpb24gKTtcXG5mbG9hdCBoZW1pRG90Tm9ybWFsSGFsZlNreSA9IDAuNSAqIGRvdCggbm9ybWFsLCBoZW1pSGFsZlZlY3RvclNreSApICsgMC41O1xcbmZsb2F0IGhlbWlTcGVjdWxhcldlaWdodFNreSA9IHNwZWN1bGFyU3RyZW5ndGggKiBtYXgoIHBvdyggaGVtaURvdE5vcm1hbEhhbGZTa3ksIHNoaW5pbmVzcyApLCAwLjAgKTtcXG52ZWMzIGxWZWN0b3JHcm91bmQgPSAtbFZlY3RvcjtcXG52ZWMzIGhlbWlIYWxmVmVjdG9yR3JvdW5kID0gbm9ybWFsaXplKCBsVmVjdG9yR3JvdW5kICsgdmlld1Bvc2l0aW9uICk7XFxuZmxvYXQgaGVtaURvdE5vcm1hbEhhbGZHcm91bmQgPSAwLjUgKiBkb3QoIG5vcm1hbCwgaGVtaUhhbGZWZWN0b3JHcm91bmQgKSArIDAuNTtcXG5mbG9hdCBoZW1pU3BlY3VsYXJXZWlnaHRHcm91bmQgPSBzcGVjdWxhclN0cmVuZ3RoICogbWF4KCBwb3coIGhlbWlEb3ROb3JtYWxIYWxmR3JvdW5kLCBzaGluaW5lc3MgKSwgMC4wICk7XFxuI2lmZGVmIFBIWVNJQ0FMTFlfQkFTRURfU0hBRElOR1xcbmZsb2F0IGRvdFByb2R1Y3RHcm91bmQgPSBkb3QoIG5vcm1hbCwgbFZlY3Rvckdyb3VuZCApO1xcbmZsb2F0IHNwZWN1bGFyTm9ybWFsaXphdGlvbiA9ICggc2hpbmluZXNzICsgMi4wMDAxICkgLyA4LjA7XFxudmVjMyBzY2hsaWNrU2t5ID0gc3BlY3VsYXIgKyB2ZWMzKCAxLjAgLSBzcGVjdWxhciApICogcG93KCAxLjAgLSBkb3QoIGxWZWN0b3IsIGhlbWlIYWxmVmVjdG9yU2t5ICksIDUuMCApO1xcbnZlYzMgc2NobGlja0dyb3VuZCA9IHNwZWN1bGFyICsgdmVjMyggMS4wIC0gc3BlY3VsYXIgKSAqIHBvdyggMS4wIC0gZG90KCBsVmVjdG9yR3JvdW5kLCBoZW1pSGFsZlZlY3Rvckdyb3VuZCApLCA1LjAgKTtcXG5oZW1pU3BlY3VsYXIgKz0gaGVtaUNvbG9yICogc3BlY3VsYXJOb3JtYWxpemF0aW9uICogKCBzY2hsaWNrU2t5ICogaGVtaVNwZWN1bGFyV2VpZ2h0U2t5ICogbWF4KCBkb3RQcm9kdWN0LCAwLjAgKSArIHNjaGxpY2tHcm91bmQgKiBoZW1pU3BlY3VsYXJXZWlnaHRHcm91bmQgKiBtYXgoIGRvdFByb2R1Y3RHcm91bmQsIDAuMCApICk7XFxuI2Vsc2VcXG5oZW1pU3BlY3VsYXIgKz0gc3BlY3VsYXIgKiBoZW1pQ29sb3IgKiAoIGhlbWlTcGVjdWxhcldlaWdodFNreSArIGhlbWlTcGVjdWxhcldlaWdodEdyb3VuZCApICogaGVtaURpZmZ1c2VXZWlnaHQ7XFxuI2VuZGlmXFxufVxcbiNlbmRpZlxcbnZlYzMgdG90YWxEaWZmdXNlID0gdmVjMyggMC4wICk7XFxudmVjMyB0b3RhbFNwZWN1bGFyID0gdmVjMyggMC4wICk7XFxuI2lmIE1BWF9ESVJfTElHSFRTID4gMFxcbnRvdGFsRGlmZnVzZSArPSBkaXJEaWZmdXNlO1xcbnRvdGFsU3BlY3VsYXIgKz0gZGlyU3BlY3VsYXI7XFxuI2VuZGlmXFxuI2lmIE1BWF9IRU1JX0xJR0hUUyA+IDBcXG50b3RhbERpZmZ1c2UgKz0gaGVtaURpZmZ1c2U7XFxudG90YWxTcGVjdWxhciArPSBoZW1pU3BlY3VsYXI7XFxuI2VuZGlmXFxuI2lmIE1BWF9QT0lOVF9MSUdIVFMgPiAwXFxudG90YWxEaWZmdXNlICs9IHBvaW50RGlmZnVzZTtcXG50b3RhbFNwZWN1bGFyICs9IHBvaW50U3BlY3VsYXI7XFxuI2VuZGlmXFxuI2lmIE1BWF9TUE9UX0xJR0hUUyA+IDBcXG50b3RhbERpZmZ1c2UgKz0gc3BvdERpZmZ1c2U7XFxudG90YWxTcGVjdWxhciArPSBzcG90U3BlY3VsYXI7XFxuI2VuZGlmXFxuI2lmZGVmIE1FVEFMXFxuZ2xfRnJhZ0NvbG9yLnh5eiA9IGdsX0ZyYWdDb2xvci54eXogKiAoIGVtaXNzaXZlICsgdG90YWxEaWZmdXNlICsgYW1iaWVudExpZ2h0Q29sb3IgKiBhbWJpZW50ICsgdG90YWxTcGVjdWxhciApO1xcbiNlbHNlXFxuZ2xfRnJhZ0NvbG9yLnh5eiA9IGdsX0ZyYWdDb2xvci54eXogKiAoIGVtaXNzaXZlICsgdG90YWxEaWZmdXNlICsgYW1iaWVudExpZ2h0Q29sb3IgKiBhbWJpZW50ICkgKyB0b3RhbFNwZWN1bGFyO1xcbiNlbmRpZlwiLFxuY29sb3JfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfQ09MT1JcXG52YXJ5aW5nIHZlYzMgdkNvbG9yO1xcbiNlbmRpZlwiLGNvbG9yX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9DT0xPUlxcbmdsX0ZyYWdDb2xvciA9IGdsX0ZyYWdDb2xvciAqIHZlYzQoIHZDb2xvciwgMS4wICk7XFxuI2VuZGlmXCIsY29sb3JfcGFyc192ZXJ0ZXg6XCIjaWZkZWYgVVNFX0NPTE9SXFxudmFyeWluZyB2ZWMzIHZDb2xvcjtcXG4jZW5kaWZcIixjb2xvcl92ZXJ0ZXg6XCIjaWZkZWYgVVNFX0NPTE9SXFxuI2lmZGVmIEdBTU1BX0lOUFVUXFxudkNvbG9yID0gY29sb3IgKiBjb2xvcjtcXG4jZWxzZVxcbnZDb2xvciA9IGNvbG9yO1xcbiNlbmRpZlxcbiNlbmRpZlwiLHNraW5uaW5nX3BhcnNfdmVydGV4OlwiI2lmZGVmIFVTRV9TS0lOTklOR1xcbiNpZmRlZiBCT05FX1RFWFRVUkVcXG51bmlmb3JtIHNhbXBsZXIyRCBib25lVGV4dHVyZTtcXG51bmlmb3JtIGludCBib25lVGV4dHVyZVdpZHRoO1xcbnVuaWZvcm0gaW50IGJvbmVUZXh0dXJlSGVpZ2h0O1xcbm1hdDQgZ2V0Qm9uZU1hdHJpeCggY29uc3QgaW4gZmxvYXQgaSApIHtcXG5mbG9hdCBqID0gaSAqIDQuMDtcXG5mbG9hdCB4ID0gbW9kKCBqLCBmbG9hdCggYm9uZVRleHR1cmVXaWR0aCApICk7XFxuZmxvYXQgeSA9IGZsb29yKCBqIC8gZmxvYXQoIGJvbmVUZXh0dXJlV2lkdGggKSApO1xcbmZsb2F0IGR4ID0gMS4wIC8gZmxvYXQoIGJvbmVUZXh0dXJlV2lkdGggKTtcXG5mbG9hdCBkeSA9IDEuMCAvIGZsb2F0KCBib25lVGV4dHVyZUhlaWdodCApO1xcbnkgPSBkeSAqICggeSArIDAuNSApO1xcbnZlYzQgdjEgPSB0ZXh0dXJlMkQoIGJvbmVUZXh0dXJlLCB2ZWMyKCBkeCAqICggeCArIDAuNSApLCB5ICkgKTtcXG52ZWM0IHYyID0gdGV4dHVyZTJEKCBib25lVGV4dHVyZSwgdmVjMiggZHggKiAoIHggKyAxLjUgKSwgeSApICk7XFxudmVjNCB2MyA9IHRleHR1cmUyRCggYm9uZVRleHR1cmUsIHZlYzIoIGR4ICogKCB4ICsgMi41ICksIHkgKSApO1xcbnZlYzQgdjQgPSB0ZXh0dXJlMkQoIGJvbmVUZXh0dXJlLCB2ZWMyKCBkeCAqICggeCArIDMuNSApLCB5ICkgKTtcXG5tYXQ0IGJvbmUgPSBtYXQ0KCB2MSwgdjIsIHYzLCB2NCApO1xcbnJldHVybiBib25lO1xcbn1cXG4jZWxzZVxcbnVuaWZvcm0gbWF0NCBib25lR2xvYmFsTWF0cmljZXNbIE1BWF9CT05FUyBdO1xcbm1hdDQgZ2V0Qm9uZU1hdHJpeCggY29uc3QgaW4gZmxvYXQgaSApIHtcXG5tYXQ0IGJvbmUgPSBib25lR2xvYmFsTWF0cmljZXNbIGludChpKSBdO1xcbnJldHVybiBib25lO1xcbn1cXG4jZW5kaWZcXG4jZW5kaWZcIixcbnNraW5iYXNlX3ZlcnRleDpcIiNpZmRlZiBVU0VfU0tJTk5JTkdcXG5tYXQ0IGJvbmVNYXRYID0gZ2V0Qm9uZU1hdHJpeCggc2tpbkluZGV4LnggKTtcXG5tYXQ0IGJvbmVNYXRZID0gZ2V0Qm9uZU1hdHJpeCggc2tpbkluZGV4LnkgKTtcXG4jZW5kaWZcIixza2lubmluZ192ZXJ0ZXg6XCIjaWZkZWYgVVNFX1NLSU5OSU5HXFxuI2lmZGVmIFVTRV9NT1JQSFRBUkdFVFNcXG52ZWM0IHNraW5WZXJ0ZXggPSB2ZWM0KCBtb3JwaGVkLCAxLjAgKTtcXG4jZWxzZVxcbnZlYzQgc2tpblZlcnRleCA9IHZlYzQoIHBvc2l0aW9uLCAxLjAgKTtcXG4jZW5kaWZcXG52ZWM0IHNraW5uZWQgID0gYm9uZU1hdFggKiBza2luVmVydGV4ICogc2tpbldlaWdodC54O1xcbnNraW5uZWQgXFx0ICArPSBib25lTWF0WSAqIHNraW5WZXJ0ZXggKiBza2luV2VpZ2h0Lnk7XFxuI2VuZGlmXCIsbW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXg6XCIjaWZkZWYgVVNFX01PUlBIVEFSR0VUU1xcbiNpZm5kZWYgVVNFX01PUlBITk9STUFMU1xcbnVuaWZvcm0gZmxvYXQgbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyA4IF07XFxuI2Vsc2VcXG51bmlmb3JtIGZsb2F0IG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgNCBdO1xcbiNlbmRpZlxcbiNlbmRpZlwiLFxubW9ycGh0YXJnZXRfdmVydGV4OlwiI2lmZGVmIFVTRV9NT1JQSFRBUkdFVFNcXG52ZWMzIG1vcnBoZWQgPSB2ZWMzKCAwLjAgKTtcXG5tb3JwaGVkICs9ICggbW9ycGhUYXJnZXQwIC0gcG9zaXRpb24gKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgMCBdO1xcbm1vcnBoZWQgKz0gKCBtb3JwaFRhcmdldDEgLSBwb3NpdGlvbiApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAxIF07XFxubW9ycGhlZCArPSAoIG1vcnBoVGFyZ2V0MiAtIHBvc2l0aW9uICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDIgXTtcXG5tb3JwaGVkICs9ICggbW9ycGhUYXJnZXQzIC0gcG9zaXRpb24gKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgMyBdO1xcbiNpZm5kZWYgVVNFX01PUlBITk9STUFMU1xcbm1vcnBoZWQgKz0gKCBtb3JwaFRhcmdldDQgLSBwb3NpdGlvbiApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyA0IF07XFxubW9ycGhlZCArPSAoIG1vcnBoVGFyZ2V0NSAtIHBvc2l0aW9uICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDUgXTtcXG5tb3JwaGVkICs9ICggbW9ycGhUYXJnZXQ2IC0gcG9zaXRpb24gKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgNiBdO1xcbm1vcnBoZWQgKz0gKCBtb3JwaFRhcmdldDcgLSBwb3NpdGlvbiApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyA3IF07XFxuI2VuZGlmXFxubW9ycGhlZCArPSBwb3NpdGlvbjtcXG4jZW5kaWZcIixcbmRlZmF1bHRfdmVydGV4OlwidmVjNCBtdlBvc2l0aW9uO1xcbiNpZmRlZiBVU0VfU0tJTk5JTkdcXG5tdlBvc2l0aW9uID0gbW9kZWxWaWV3TWF0cml4ICogc2tpbm5lZDtcXG4jZW5kaWZcXG4jaWYgIWRlZmluZWQoIFVTRV9TS0lOTklORyApICYmIGRlZmluZWQoIFVTRV9NT1JQSFRBUkdFVFMgKVxcbm12UG9zaXRpb24gPSBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KCBtb3JwaGVkLCAxLjAgKTtcXG4jZW5kaWZcXG4jaWYgIWRlZmluZWQoIFVTRV9TS0lOTklORyApICYmICEgZGVmaW5lZCggVVNFX01PUlBIVEFSR0VUUyApXFxubXZQb3NpdGlvbiA9IG1vZGVsVmlld01hdHJpeCAqIHZlYzQoIHBvc2l0aW9uLCAxLjAgKTtcXG4jZW5kaWZcXG5nbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtdlBvc2l0aW9uO1wiLG1vcnBobm9ybWFsX3ZlcnRleDpcIiNpZmRlZiBVU0VfTU9SUEhOT1JNQUxTXFxudmVjMyBtb3JwaGVkTm9ybWFsID0gdmVjMyggMC4wICk7XFxubW9ycGhlZE5vcm1hbCArPSAgKCBtb3JwaE5vcm1hbDAgLSBub3JtYWwgKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgMCBdO1xcbm1vcnBoZWROb3JtYWwgKz0gICggbW9ycGhOb3JtYWwxIC0gbm9ybWFsICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDEgXTtcXG5tb3JwaGVkTm9ybWFsICs9ICAoIG1vcnBoTm9ybWFsMiAtIG5vcm1hbCApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAyIF07XFxubW9ycGhlZE5vcm1hbCArPSAgKCBtb3JwaE5vcm1hbDMgLSBub3JtYWwgKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgMyBdO1xcbm1vcnBoZWROb3JtYWwgKz0gbm9ybWFsO1xcbiNlbmRpZlwiLFxuc2tpbm5vcm1hbF92ZXJ0ZXg6XCIjaWZkZWYgVVNFX1NLSU5OSU5HXFxubWF0NCBza2luTWF0cml4ID0gc2tpbldlaWdodC54ICogYm9uZU1hdFg7XFxuc2tpbk1hdHJpeCBcXHQrPSBza2luV2VpZ2h0LnkgKiBib25lTWF0WTtcXG4jaWZkZWYgVVNFX01PUlBITk9STUFMU1xcbnZlYzQgc2tpbm5lZE5vcm1hbCA9IHNraW5NYXRyaXggKiB2ZWM0KCBtb3JwaGVkTm9ybWFsLCAwLjAgKTtcXG4jZWxzZVxcbnZlYzQgc2tpbm5lZE5vcm1hbCA9IHNraW5NYXRyaXggKiB2ZWM0KCBub3JtYWwsIDAuMCApO1xcbiNlbmRpZlxcbiNlbmRpZlwiLGRlZmF1bHRub3JtYWxfdmVydGV4OlwidmVjMyBvYmplY3ROb3JtYWw7XFxuI2lmZGVmIFVTRV9TS0lOTklOR1xcbm9iamVjdE5vcm1hbCA9IHNraW5uZWROb3JtYWwueHl6O1xcbiNlbmRpZlxcbiNpZiAhZGVmaW5lZCggVVNFX1NLSU5OSU5HICkgJiYgZGVmaW5lZCggVVNFX01PUlBITk9STUFMUyApXFxub2JqZWN0Tm9ybWFsID0gbW9ycGhlZE5vcm1hbDtcXG4jZW5kaWZcXG4jaWYgIWRlZmluZWQoIFVTRV9TS0lOTklORyApICYmICEgZGVmaW5lZCggVVNFX01PUlBITk9STUFMUyApXFxub2JqZWN0Tm9ybWFsID0gbm9ybWFsO1xcbiNlbmRpZlxcbiNpZmRlZiBGTElQX1NJREVEXFxub2JqZWN0Tm9ybWFsID0gLW9iamVjdE5vcm1hbDtcXG4jZW5kaWZcXG52ZWMzIHRyYW5zZm9ybWVkTm9ybWFsID0gbm9ybWFsTWF0cml4ICogb2JqZWN0Tm9ybWFsO1wiLFxuc2hhZG93bWFwX3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX1NIQURPV01BUFxcbnVuaWZvcm0gc2FtcGxlcjJEIHNoYWRvd01hcFsgTUFYX1NIQURPV1MgXTtcXG51bmlmb3JtIHZlYzIgc2hhZG93TWFwU2l6ZVsgTUFYX1NIQURPV1MgXTtcXG51bmlmb3JtIGZsb2F0IHNoYWRvd0RhcmtuZXNzWyBNQVhfU0hBRE9XUyBdO1xcbnVuaWZvcm0gZmxvYXQgc2hhZG93Qmlhc1sgTUFYX1NIQURPV1MgXTtcXG52YXJ5aW5nIHZlYzQgdlNoYWRvd0Nvb3JkWyBNQVhfU0hBRE9XUyBdO1xcbmZsb2F0IHVucGFja0RlcHRoKCBjb25zdCBpbiB2ZWM0IHJnYmFfZGVwdGggKSB7XFxuY29uc3QgdmVjNCBiaXRfc2hpZnQgPSB2ZWM0KCAxLjAgLyAoIDI1Ni4wICogMjU2LjAgKiAyNTYuMCApLCAxLjAgLyAoIDI1Ni4wICogMjU2LjAgKSwgMS4wIC8gMjU2LjAsIDEuMCApO1xcbmZsb2F0IGRlcHRoID0gZG90KCByZ2JhX2RlcHRoLCBiaXRfc2hpZnQgKTtcXG5yZXR1cm4gZGVwdGg7XFxufVxcbiNlbmRpZlwiLHNoYWRvd21hcF9mcmFnbWVudDpcIiNpZmRlZiBVU0VfU0hBRE9XTUFQXFxuI2lmZGVmIFNIQURPV01BUF9ERUJVR1xcbnZlYzMgZnJ1c3R1bUNvbG9yc1szXTtcXG5mcnVzdHVtQ29sb3JzWzBdID0gdmVjMyggMS4wLCAwLjUsIDAuMCApO1xcbmZydXN0dW1Db2xvcnNbMV0gPSB2ZWMzKCAwLjAsIDEuMCwgMC44ICk7XFxuZnJ1c3R1bUNvbG9yc1syXSA9IHZlYzMoIDAuMCwgMC41LCAxLjAgKTtcXG4jZW5kaWZcXG4jaWZkZWYgU0hBRE9XTUFQX0NBU0NBREVcXG5pbnQgaW5GcnVzdHVtQ291bnQgPSAwO1xcbiNlbmRpZlxcbmZsb2F0IGZEZXB0aDtcXG52ZWMzIHNoYWRvd0NvbG9yID0gdmVjMyggMS4wICk7XFxuZm9yKCBpbnQgaSA9IDA7IGkgPCBNQVhfU0hBRE9XUzsgaSArKyApIHtcXG52ZWMzIHNoYWRvd0Nvb3JkID0gdlNoYWRvd0Nvb3JkWyBpIF0ueHl6IC8gdlNoYWRvd0Nvb3JkWyBpIF0udztcXG5idmVjNCBpbkZydXN0dW1WZWMgPSBidmVjNCAoIHNoYWRvd0Nvb3JkLnggPj0gMC4wLCBzaGFkb3dDb29yZC54IDw9IDEuMCwgc2hhZG93Q29vcmQueSA+PSAwLjAsIHNoYWRvd0Nvb3JkLnkgPD0gMS4wICk7XFxuYm9vbCBpbkZydXN0dW0gPSBhbGwoIGluRnJ1c3R1bVZlYyApO1xcbiNpZmRlZiBTSEFET1dNQVBfQ0FTQ0FERVxcbmluRnJ1c3R1bUNvdW50ICs9IGludCggaW5GcnVzdHVtICk7XFxuYnZlYzMgZnJ1c3R1bVRlc3RWZWMgPSBidmVjMyggaW5GcnVzdHVtLCBpbkZydXN0dW1Db3VudCA9PSAxLCBzaGFkb3dDb29yZC56IDw9IDEuMCApO1xcbiNlbHNlXFxuYnZlYzIgZnJ1c3R1bVRlc3RWZWMgPSBidmVjMiggaW5GcnVzdHVtLCBzaGFkb3dDb29yZC56IDw9IDEuMCApO1xcbiNlbmRpZlxcbmJvb2wgZnJ1c3R1bVRlc3QgPSBhbGwoIGZydXN0dW1UZXN0VmVjICk7XFxuaWYgKCBmcnVzdHVtVGVzdCApIHtcXG5zaGFkb3dDb29yZC56ICs9IHNoYWRvd0JpYXNbIGkgXTtcXG4jaWYgZGVmaW5lZCggU0hBRE9XTUFQX1RZUEVfUENGIClcXG5mbG9hdCBzaGFkb3cgPSAwLjA7XFxuY29uc3QgZmxvYXQgc2hhZG93RGVsdGEgPSAxLjAgLyA5LjA7XFxuZmxvYXQgeFBpeGVsT2Zmc2V0ID0gMS4wIC8gc2hhZG93TWFwU2l6ZVsgaSBdLng7XFxuZmxvYXQgeVBpeGVsT2Zmc2V0ID0gMS4wIC8gc2hhZG93TWFwU2l6ZVsgaSBdLnk7XFxuZmxvYXQgZHgwID0gLTEuMjUgKiB4UGl4ZWxPZmZzZXQ7XFxuZmxvYXQgZHkwID0gLTEuMjUgKiB5UGl4ZWxPZmZzZXQ7XFxuZmxvYXQgZHgxID0gMS4yNSAqIHhQaXhlbE9mZnNldDtcXG5mbG9hdCBkeTEgPSAxLjI1ICogeVBpeGVsT2Zmc2V0O1xcbmZEZXB0aCA9IHVucGFja0RlcHRoKCB0ZXh0dXJlMkQoIHNoYWRvd01hcFsgaSBdLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MCwgZHkwICkgKSApO1xcbmlmICggZkRlcHRoIDwgc2hhZG93Q29vcmQueiApIHNoYWRvdyArPSBzaGFkb3dEZWx0YTtcXG5mRGVwdGggPSB1bnBhY2tEZXB0aCggdGV4dHVyZTJEKCBzaGFkb3dNYXBbIGkgXSwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCAwLjAsIGR5MCApICkgKTtcXG5pZiAoIGZEZXB0aCA8IHNoYWRvd0Nvb3JkLnogKSBzaGFkb3cgKz0gc2hhZG93RGVsdGE7XFxuZkRlcHRoID0gdW5wYWNrRGVwdGgoIHRleHR1cmUyRCggc2hhZG93TWFwWyBpIF0sIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgxLCBkeTAgKSApICk7XFxuaWYgKCBmRGVwdGggPCBzaGFkb3dDb29yZC56ICkgc2hhZG93ICs9IHNoYWRvd0RlbHRhO1xcbmZEZXB0aCA9IHVucGFja0RlcHRoKCB0ZXh0dXJlMkQoIHNoYWRvd01hcFsgaSBdLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MCwgMC4wICkgKSApO1xcbmlmICggZkRlcHRoIDwgc2hhZG93Q29vcmQueiApIHNoYWRvdyArPSBzaGFkb3dEZWx0YTtcXG5mRGVwdGggPSB1bnBhY2tEZXB0aCggdGV4dHVyZTJEKCBzaGFkb3dNYXBbIGkgXSwgc2hhZG93Q29vcmQueHkgKSApO1xcbmlmICggZkRlcHRoIDwgc2hhZG93Q29vcmQueiApIHNoYWRvdyArPSBzaGFkb3dEZWx0YTtcXG5mRGVwdGggPSB1bnBhY2tEZXB0aCggdGV4dHVyZTJEKCBzaGFkb3dNYXBbIGkgXSwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDEsIDAuMCApICkgKTtcXG5pZiAoIGZEZXB0aCA8IHNoYWRvd0Nvb3JkLnogKSBzaGFkb3cgKz0gc2hhZG93RGVsdGE7XFxuZkRlcHRoID0gdW5wYWNrRGVwdGgoIHRleHR1cmUyRCggc2hhZG93TWFwWyBpIF0sIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgwLCBkeTEgKSApICk7XFxuaWYgKCBmRGVwdGggPCBzaGFkb3dDb29yZC56ICkgc2hhZG93ICs9IHNoYWRvd0RlbHRhO1xcbmZEZXB0aCA9IHVucGFja0RlcHRoKCB0ZXh0dXJlMkQoIHNoYWRvd01hcFsgaSBdLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIDAuMCwgZHkxICkgKSApO1xcbmlmICggZkRlcHRoIDwgc2hhZG93Q29vcmQueiApIHNoYWRvdyArPSBzaGFkb3dEZWx0YTtcXG5mRGVwdGggPSB1bnBhY2tEZXB0aCggdGV4dHVyZTJEKCBzaGFkb3dNYXBbIGkgXSwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDEsIGR5MSApICkgKTtcXG5pZiAoIGZEZXB0aCA8IHNoYWRvd0Nvb3JkLnogKSBzaGFkb3cgKz0gc2hhZG93RGVsdGE7XFxuc2hhZG93Q29sb3IgPSBzaGFkb3dDb2xvciAqIHZlYzMoICggMS4wIC0gc2hhZG93RGFya25lc3NbIGkgXSAqIHNoYWRvdyApICk7XFxuI2VsaWYgZGVmaW5lZCggU0hBRE9XTUFQX1RZUEVfUENGX1NPRlQgKVxcbmZsb2F0IHNoYWRvdyA9IDAuMDtcXG5mbG9hdCB4UGl4ZWxPZmZzZXQgPSAxLjAgLyBzaGFkb3dNYXBTaXplWyBpIF0ueDtcXG5mbG9hdCB5UGl4ZWxPZmZzZXQgPSAxLjAgLyBzaGFkb3dNYXBTaXplWyBpIF0ueTtcXG5mbG9hdCBkeDAgPSAtMS4wICogeFBpeGVsT2Zmc2V0O1xcbmZsb2F0IGR5MCA9IC0xLjAgKiB5UGl4ZWxPZmZzZXQ7XFxuZmxvYXQgZHgxID0gMS4wICogeFBpeGVsT2Zmc2V0O1xcbmZsb2F0IGR5MSA9IDEuMCAqIHlQaXhlbE9mZnNldDtcXG5tYXQzIHNoYWRvd0tlcm5lbDtcXG5tYXQzIGRlcHRoS2VybmVsO1xcbmRlcHRoS2VybmVsWzBdWzBdID0gdW5wYWNrRGVwdGgoIHRleHR1cmUyRCggc2hhZG93TWFwWyBpIF0sIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgwLCBkeTAgKSApICk7XFxuZGVwdGhLZXJuZWxbMF1bMV0gPSB1bnBhY2tEZXB0aCggdGV4dHVyZTJEKCBzaGFkb3dNYXBbIGkgXSwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDAsIDAuMCApICkgKTtcXG5kZXB0aEtlcm5lbFswXVsyXSA9IHVucGFja0RlcHRoKCB0ZXh0dXJlMkQoIHNoYWRvd01hcFsgaSBdLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MCwgZHkxICkgKSApO1xcbmRlcHRoS2VybmVsWzFdWzBdID0gdW5wYWNrRGVwdGgoIHRleHR1cmUyRCggc2hhZG93TWFwWyBpIF0sIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggMC4wLCBkeTAgKSApICk7XFxuZGVwdGhLZXJuZWxbMV1bMV0gPSB1bnBhY2tEZXB0aCggdGV4dHVyZTJEKCBzaGFkb3dNYXBbIGkgXSwgc2hhZG93Q29vcmQueHkgKSApO1xcbmRlcHRoS2VybmVsWzFdWzJdID0gdW5wYWNrRGVwdGgoIHRleHR1cmUyRCggc2hhZG93TWFwWyBpIF0sIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggMC4wLCBkeTEgKSApICk7XFxuZGVwdGhLZXJuZWxbMl1bMF0gPSB1bnBhY2tEZXB0aCggdGV4dHVyZTJEKCBzaGFkb3dNYXBbIGkgXSwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDEsIGR5MCApICkgKTtcXG5kZXB0aEtlcm5lbFsyXVsxXSA9IHVucGFja0RlcHRoKCB0ZXh0dXJlMkQoIHNoYWRvd01hcFsgaSBdLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MSwgMC4wICkgKSApO1xcbmRlcHRoS2VybmVsWzJdWzJdID0gdW5wYWNrRGVwdGgoIHRleHR1cmUyRCggc2hhZG93TWFwWyBpIF0sIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgxLCBkeTEgKSApICk7XFxudmVjMyBzaGFkb3daID0gdmVjMyggc2hhZG93Q29vcmQueiApO1xcbnNoYWRvd0tlcm5lbFswXSA9IHZlYzMobGVzc1RoYW4oZGVwdGhLZXJuZWxbMF0sIHNoYWRvd1ogKSk7XFxuc2hhZG93S2VybmVsWzBdICo9IHZlYzMoMC4yNSk7XFxuc2hhZG93S2VybmVsWzFdID0gdmVjMyhsZXNzVGhhbihkZXB0aEtlcm5lbFsxXSwgc2hhZG93WiApKTtcXG5zaGFkb3dLZXJuZWxbMV0gKj0gdmVjMygwLjI1KTtcXG5zaGFkb3dLZXJuZWxbMl0gPSB2ZWMzKGxlc3NUaGFuKGRlcHRoS2VybmVsWzJdLCBzaGFkb3daICkpO1xcbnNoYWRvd0tlcm5lbFsyXSAqPSB2ZWMzKDAuMjUpO1xcbnZlYzIgZnJhY3Rpb25hbENvb3JkID0gMS4wIC0gZnJhY3QoIHNoYWRvd0Nvb3JkLnh5ICogc2hhZG93TWFwU2l6ZVtpXS54eSApO1xcbnNoYWRvd0tlcm5lbFswXSA9IG1peCggc2hhZG93S2VybmVsWzFdLCBzaGFkb3dLZXJuZWxbMF0sIGZyYWN0aW9uYWxDb29yZC54ICk7XFxuc2hhZG93S2VybmVsWzFdID0gbWl4KCBzaGFkb3dLZXJuZWxbMl0sIHNoYWRvd0tlcm5lbFsxXSwgZnJhY3Rpb25hbENvb3JkLnggKTtcXG52ZWM0IHNoYWRvd1ZhbHVlcztcXG5zaGFkb3dWYWx1ZXMueCA9IG1peCggc2hhZG93S2VybmVsWzBdWzFdLCBzaGFkb3dLZXJuZWxbMF1bMF0sIGZyYWN0aW9uYWxDb29yZC55ICk7XFxuc2hhZG93VmFsdWVzLnkgPSBtaXgoIHNoYWRvd0tlcm5lbFswXVsyXSwgc2hhZG93S2VybmVsWzBdWzFdLCBmcmFjdGlvbmFsQ29vcmQueSApO1xcbnNoYWRvd1ZhbHVlcy56ID0gbWl4KCBzaGFkb3dLZXJuZWxbMV1bMV0sIHNoYWRvd0tlcm5lbFsxXVswXSwgZnJhY3Rpb25hbENvb3JkLnkgKTtcXG5zaGFkb3dWYWx1ZXMudyA9IG1peCggc2hhZG93S2VybmVsWzFdWzJdLCBzaGFkb3dLZXJuZWxbMV1bMV0sIGZyYWN0aW9uYWxDb29yZC55ICk7XFxuc2hhZG93ID0gZG90KCBzaGFkb3dWYWx1ZXMsIHZlYzQoIDEuMCApICk7XFxuc2hhZG93Q29sb3IgPSBzaGFkb3dDb2xvciAqIHZlYzMoICggMS4wIC0gc2hhZG93RGFya25lc3NbIGkgXSAqIHNoYWRvdyApICk7XFxuI2Vsc2VcXG52ZWM0IHJnYmFEZXB0aCA9IHRleHR1cmUyRCggc2hhZG93TWFwWyBpIF0sIHNoYWRvd0Nvb3JkLnh5ICk7XFxuZmxvYXQgZkRlcHRoID0gdW5wYWNrRGVwdGgoIHJnYmFEZXB0aCApO1xcbmlmICggZkRlcHRoIDwgc2hhZG93Q29vcmQueiApXFxuc2hhZG93Q29sb3IgPSBzaGFkb3dDb2xvciAqIHZlYzMoIDEuMCAtIHNoYWRvd0RhcmtuZXNzWyBpIF0gKTtcXG4jZW5kaWZcXG59XFxuI2lmZGVmIFNIQURPV01BUF9ERUJVR1xcbiNpZmRlZiBTSEFET1dNQVBfQ0FTQ0FERVxcbmlmICggaW5GcnVzdHVtICYmIGluRnJ1c3R1bUNvdW50ID09IDEgKSBnbF9GcmFnQ29sb3IueHl6ICo9IGZydXN0dW1Db2xvcnNbIGkgXTtcXG4jZWxzZVxcbmlmICggaW5GcnVzdHVtICkgZ2xfRnJhZ0NvbG9yLnh5eiAqPSBmcnVzdHVtQ29sb3JzWyBpIF07XFxuI2VuZGlmXFxuI2VuZGlmXFxufVxcbiNpZmRlZiBHQU1NQV9PVVRQVVRcXG5zaGFkb3dDb2xvciAqPSBzaGFkb3dDb2xvcjtcXG4jZW5kaWZcXG5nbF9GcmFnQ29sb3IueHl6ID0gZ2xfRnJhZ0NvbG9yLnh5eiAqIHNoYWRvd0NvbG9yO1xcbiNlbmRpZlwiLFxuc2hhZG93bWFwX3BhcnNfdmVydGV4OlwiI2lmZGVmIFVTRV9TSEFET1dNQVBcXG52YXJ5aW5nIHZlYzQgdlNoYWRvd0Nvb3JkWyBNQVhfU0hBRE9XUyBdO1xcbnVuaWZvcm0gbWF0NCBzaGFkb3dNYXRyaXhbIE1BWF9TSEFET1dTIF07XFxuI2VuZGlmXCIsc2hhZG93bWFwX3ZlcnRleDpcIiNpZmRlZiBVU0VfU0hBRE9XTUFQXFxuZm9yKCBpbnQgaSA9IDA7IGkgPCBNQVhfU0hBRE9XUzsgaSArKyApIHtcXG52U2hhZG93Q29vcmRbIGkgXSA9IHNoYWRvd01hdHJpeFsgaSBdICogd29ybGRQb3NpdGlvbjtcXG59XFxuI2VuZGlmXCIsYWxwaGF0ZXN0X2ZyYWdtZW50OlwiI2lmZGVmIEFMUEhBVEVTVFxcbmlmICggZ2xfRnJhZ0NvbG9yLmEgPCBBTFBIQVRFU1QgKSBkaXNjYXJkO1xcbiNlbmRpZlwiLGxpbmVhcl90b19nYW1tYV9mcmFnbWVudDpcIiNpZmRlZiBHQU1NQV9PVVRQVVRcXG5nbF9GcmFnQ29sb3IueHl6ID0gc3FydCggZ2xfRnJhZ0NvbG9yLnh5eiApO1xcbiNlbmRpZlwifTtUSFJFRS5Vbmlmb3Jtc1V0aWxzPXttZXJnZTpmdW5jdGlvbihhKXt2YXIgYixjLGQsZT17fTtmb3IoYj0wO2I8YS5sZW5ndGg7YisrKWZvcihjIGluIGQ9dGhpcy5jbG9uZShhW2JdKSxkKWVbY109ZFtjXTtyZXR1cm4gZX0sY2xvbmU6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGU9e307Zm9yKGIgaW4gYSlmb3IoYyBpbiBlW2JdPXt9LGFbYl0pZD1hW2JdW2NdLGVbYl1bY109ZCBpbnN0YW5jZW9mIFRIUkVFLkNvbG9yfHxkIGluc3RhbmNlb2YgVEhSRUUuVmVjdG9yMnx8ZCBpbnN0YW5jZW9mIFRIUkVFLlZlY3RvcjN8fGQgaW5zdGFuY2VvZiBUSFJFRS5WZWN0b3I0fHxkIGluc3RhbmNlb2YgVEhSRUUuTWF0cml4NHx8ZCBpbnN0YW5jZW9mIFRIUkVFLlRleHR1cmU/ZC5jbG9uZSgpOmQgaW5zdGFuY2VvZiBBcnJheT9kLnNsaWNlKCk6ZDtyZXR1cm4gZX19O1RIUkVFLlVuaWZvcm1zTGliPXtjb21tb246e2RpZmZ1c2U6e3R5cGU6XCJjXCIsdmFsdWU6bmV3IFRIUkVFLkNvbG9yKDE1NjU4NzM0KX0sb3BhY2l0eTp7dHlwZTpcImZcIix2YWx1ZToxfSxtYXA6e3R5cGU6XCJ0XCIsdmFsdWU6bnVsbH0sb2Zmc2V0UmVwZWF0Ont0eXBlOlwidjRcIix2YWx1ZTpuZXcgVEhSRUUuVmVjdG9yNCgwLDAsMSwxKX0sbGlnaHRNYXA6e3R5cGU6XCJ0XCIsdmFsdWU6bnVsbH0sc3BlY3VsYXJNYXA6e3R5cGU6XCJ0XCIsdmFsdWU6bnVsbH0sZW52TWFwOnt0eXBlOlwidFwiLHZhbHVlOm51bGx9LGZsaXBFbnZNYXA6e3R5cGU6XCJmXCIsdmFsdWU6LTF9LHVzZVJlZnJhY3Q6e3R5cGU6XCJpXCIsdmFsdWU6MH0scmVmbGVjdGl2aXR5Ont0eXBlOlwiZlwiLHZhbHVlOjF9LHJlZnJhY3Rpb25SYXRpbzp7dHlwZTpcImZcIix2YWx1ZTowLjk4fSxjb21iaW5lOnt0eXBlOlwiaVwiLHZhbHVlOjB9LG1vcnBoVGFyZ2V0SW5mbHVlbmNlczp7dHlwZTpcImZcIix2YWx1ZTowfX0sYnVtcDp7YnVtcE1hcDp7dHlwZTpcInRcIixcbnZhbHVlOm51bGx9LGJ1bXBTY2FsZTp7dHlwZTpcImZcIix2YWx1ZToxfX0sbm9ybWFsbWFwOntub3JtYWxNYXA6e3R5cGU6XCJ0XCIsdmFsdWU6bnVsbH0sbm9ybWFsU2NhbGU6e3R5cGU6XCJ2MlwiLHZhbHVlOm5ldyBUSFJFRS5WZWN0b3IyKDEsMSl9fSxmb2c6e2ZvZ0RlbnNpdHk6e3R5cGU6XCJmXCIsdmFsdWU6Mi41RS00fSxmb2dOZWFyOnt0eXBlOlwiZlwiLHZhbHVlOjF9LGZvZ0Zhcjp7dHlwZTpcImZcIix2YWx1ZToyRTN9LGZvZ0NvbG9yOnt0eXBlOlwiY1wiLHZhbHVlOm5ldyBUSFJFRS5Db2xvcigxNjc3NzIxNSl9fSxsaWdodHM6e2FtYmllbnRMaWdodENvbG9yOnt0eXBlOlwiZnZcIix2YWx1ZTpbXX0sZGlyZWN0aW9uYWxMaWdodERpcmVjdGlvbjp7dHlwZTpcImZ2XCIsdmFsdWU6W119LGRpcmVjdGlvbmFsTGlnaHRDb2xvcjp7dHlwZTpcImZ2XCIsdmFsdWU6W119LGhlbWlzcGhlcmVMaWdodERpcmVjdGlvbjp7dHlwZTpcImZ2XCIsdmFsdWU6W119LGhlbWlzcGhlcmVMaWdodFNreUNvbG9yOnt0eXBlOlwiZnZcIixcbnZhbHVlOltdfSxoZW1pc3BoZXJlTGlnaHRHcm91bmRDb2xvcjp7dHlwZTpcImZ2XCIsdmFsdWU6W119LHBvaW50TGlnaHRDb2xvcjp7dHlwZTpcImZ2XCIsdmFsdWU6W119LHBvaW50TGlnaHRQb3NpdGlvbjp7dHlwZTpcImZ2XCIsdmFsdWU6W119LHBvaW50TGlnaHREaXN0YW5jZTp7dHlwZTpcImZ2MVwiLHZhbHVlOltdfSxzcG90TGlnaHRDb2xvcjp7dHlwZTpcImZ2XCIsdmFsdWU6W119LHNwb3RMaWdodFBvc2l0aW9uOnt0eXBlOlwiZnZcIix2YWx1ZTpbXX0sc3BvdExpZ2h0RGlyZWN0aW9uOnt0eXBlOlwiZnZcIix2YWx1ZTpbXX0sc3BvdExpZ2h0RGlzdGFuY2U6e3R5cGU6XCJmdjFcIix2YWx1ZTpbXX0sc3BvdExpZ2h0QW5nbGVDb3M6e3R5cGU6XCJmdjFcIix2YWx1ZTpbXX0sc3BvdExpZ2h0RXhwb25lbnQ6e3R5cGU6XCJmdjFcIix2YWx1ZTpbXX19LHBhcnRpY2xlOntwc0NvbG9yOnt0eXBlOlwiY1wiLHZhbHVlOm5ldyBUSFJFRS5Db2xvcigxNTY1ODczNCl9LG9wYWNpdHk6e3R5cGU6XCJmXCIsdmFsdWU6MX0sc2l6ZTp7dHlwZTpcImZcIixcbnZhbHVlOjF9LHNjYWxlOnt0eXBlOlwiZlwiLHZhbHVlOjF9LG1hcDp7dHlwZTpcInRcIix2YWx1ZTpudWxsfSxmb2dEZW5zaXR5Ont0eXBlOlwiZlwiLHZhbHVlOjIuNUUtNH0sZm9nTmVhcjp7dHlwZTpcImZcIix2YWx1ZToxfSxmb2dGYXI6e3R5cGU6XCJmXCIsdmFsdWU6MkUzfSxmb2dDb2xvcjp7dHlwZTpcImNcIix2YWx1ZTpuZXcgVEhSRUUuQ29sb3IoMTY3NzcyMTUpfX0sc2hhZG93bWFwOntzaGFkb3dNYXA6e3R5cGU6XCJ0dlwiLHZhbHVlOltdfSxzaGFkb3dNYXBTaXplOnt0eXBlOlwidjJ2XCIsdmFsdWU6W119LHNoYWRvd0JpYXM6e3R5cGU6XCJmdjFcIix2YWx1ZTpbXX0sc2hhZG93RGFya25lc3M6e3R5cGU6XCJmdjFcIix2YWx1ZTpbXX0sc2hhZG93TWF0cml4Ont0eXBlOlwibTR2XCIsdmFsdWU6W119fX07VEhSRUUuU2hhZGVyTGliPXtiYXNpYzp7dW5pZm9ybXM6VEhSRUUuVW5pZm9ybXNVdGlscy5tZXJnZShbVEhSRUUuVW5pZm9ybXNMaWIuY29tbW9uLFRIUkVFLlVuaWZvcm1zTGliLmZvZyxUSFJFRS5Vbmlmb3Jtc0xpYi5zaGFkb3dtYXBdKSx2ZXJ0ZXhTaGFkZXI6W1RIUkVFLlNoYWRlckNodW5rLm1hcF9wYXJzX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5saWdodG1hcF9wYXJzX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5lbnZtYXBfcGFyc192ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuY29sb3JfcGFyc192ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsubW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuc2tpbm5pbmdfcGFyc192ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuc2hhZG93bWFwX3BhcnNfdmVydGV4LFwidm9pZCBtYWluKCkge1wiLFRIUkVFLlNoYWRlckNodW5rLm1hcF92ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsubGlnaHRtYXBfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLmNvbG9yX3ZlcnRleCxcblRIUkVFLlNoYWRlckNodW5rLnNraW5iYXNlX3ZlcnRleCxcIiNpZmRlZiBVU0VfRU5WTUFQXCIsVEhSRUUuU2hhZGVyQ2h1bmsubW9ycGhub3JtYWxfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLnNraW5ub3JtYWxfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLmRlZmF1bHRub3JtYWxfdmVydGV4LFwiI2VuZGlmXCIsVEhSRUUuU2hhZGVyQ2h1bmsubW9ycGh0YXJnZXRfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLnNraW5uaW5nX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5kZWZhdWx0X3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay53b3JsZHBvc192ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuZW52bWFwX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5zaGFkb3dtYXBfdmVydGV4LFwifVwiXS5qb2luKFwiXFxuXCIpLGZyYWdtZW50U2hhZGVyOltcInVuaWZvcm0gdmVjMyBkaWZmdXNlO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcIixUSFJFRS5TaGFkZXJDaHVuay5jb2xvcl9wYXJzX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLm1hcF9wYXJzX2ZyYWdtZW50LFxuVEhSRUUuU2hhZGVyQ2h1bmsubGlnaHRtYXBfcGFyc19mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5lbnZtYXBfcGFyc19mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5mb2dfcGFyc19mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5zaGFkb3dtYXBfcGFyc19mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5zcGVjdWxhcm1hcF9wYXJzX2ZyYWdtZW50LFwidm9pZCBtYWluKCkge1xcbmdsX0ZyYWdDb2xvciA9IHZlYzQoIGRpZmZ1c2UsIG9wYWNpdHkgKTtcIixUSFJFRS5TaGFkZXJDaHVuay5tYXBfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsuYWxwaGF0ZXN0X2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLnNwZWN1bGFybWFwX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLmxpZ2h0bWFwX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLmNvbG9yX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLmVudm1hcF9mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5zaGFkb3dtYXBfZnJhZ21lbnQsXG5USFJFRS5TaGFkZXJDaHVuay5saW5lYXJfdG9fZ2FtbWFfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsuZm9nX2ZyYWdtZW50LFwifVwiXS5qb2luKFwiXFxuXCIpfSxsYW1iZXJ0Ont1bmlmb3JtczpUSFJFRS5Vbmlmb3Jtc1V0aWxzLm1lcmdlKFtUSFJFRS5Vbmlmb3Jtc0xpYi5jb21tb24sVEhSRUUuVW5pZm9ybXNMaWIuZm9nLFRIUkVFLlVuaWZvcm1zTGliLmxpZ2h0cyxUSFJFRS5Vbmlmb3Jtc0xpYi5zaGFkb3dtYXAse2FtYmllbnQ6e3R5cGU6XCJjXCIsdmFsdWU6bmV3IFRIUkVFLkNvbG9yKDE2Nzc3MjE1KX0sZW1pc3NpdmU6e3R5cGU6XCJjXCIsdmFsdWU6bmV3IFRIUkVFLkNvbG9yKDApfSx3cmFwUkdCOnt0eXBlOlwidjNcIix2YWx1ZTpuZXcgVEhSRUUuVmVjdG9yMygxLDEsMSl9fV0pLHZlcnRleFNoYWRlcjpbXCIjZGVmaW5lIExBTUJFUlRcXG52YXJ5aW5nIHZlYzMgdkxpZ2h0RnJvbnQ7XFxuI2lmZGVmIERPVUJMRV9TSURFRFxcbnZhcnlpbmcgdmVjMyB2TGlnaHRCYWNrO1xcbiNlbmRpZlwiLFxuVEhSRUUuU2hhZGVyQ2h1bmsubWFwX3BhcnNfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLmxpZ2h0bWFwX3BhcnNfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLmVudm1hcF9wYXJzX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5saWdodHNfbGFtYmVydF9wYXJzX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5jb2xvcl9wYXJzX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5tb3JwaHRhcmdldF9wYXJzX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5za2lubmluZ19wYXJzX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5zaGFkb3dtYXBfcGFyc192ZXJ0ZXgsXCJ2b2lkIG1haW4oKSB7XCIsVEhSRUUuU2hhZGVyQ2h1bmsubWFwX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5saWdodG1hcF92ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuY29sb3JfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLm1vcnBobm9ybWFsX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5za2luYmFzZV92ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuc2tpbm5vcm1hbF92ZXJ0ZXgsXG5USFJFRS5TaGFkZXJDaHVuay5kZWZhdWx0bm9ybWFsX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5tb3JwaHRhcmdldF92ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuc2tpbm5pbmdfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLmRlZmF1bHRfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLndvcmxkcG9zX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5lbnZtYXBfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLmxpZ2h0c19sYW1iZXJ0X3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5zaGFkb3dtYXBfdmVydGV4LFwifVwiXS5qb2luKFwiXFxuXCIpLGZyYWdtZW50U2hhZGVyOltcInVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG52YXJ5aW5nIHZlYzMgdkxpZ2h0RnJvbnQ7XFxuI2lmZGVmIERPVUJMRV9TSURFRFxcbnZhcnlpbmcgdmVjMyB2TGlnaHRCYWNrO1xcbiNlbmRpZlwiLFRIUkVFLlNoYWRlckNodW5rLmNvbG9yX3BhcnNfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsubWFwX3BhcnNfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsubGlnaHRtYXBfcGFyc19mcmFnbWVudCxcblRIUkVFLlNoYWRlckNodW5rLmVudm1hcF9wYXJzX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLmZvZ19wYXJzX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLnNoYWRvd21hcF9wYXJzX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLnNwZWN1bGFybWFwX3BhcnNfZnJhZ21lbnQsXCJ2b2lkIG1haW4oKSB7XFxuZ2xfRnJhZ0NvbG9yID0gdmVjNCggdmVjMyAoIDEuMCApLCBvcGFjaXR5ICk7XCIsVEhSRUUuU2hhZGVyQ2h1bmsubWFwX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLmFscGhhdGVzdF9mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5zcGVjdWxhcm1hcF9mcmFnbWVudCxcIiNpZmRlZiBET1VCTEVfU0lERURcXG5pZiAoIGdsX0Zyb250RmFjaW5nIClcXG5nbF9GcmFnQ29sb3IueHl6ICo9IHZMaWdodEZyb250O1xcbmVsc2VcXG5nbF9GcmFnQ29sb3IueHl6ICo9IHZMaWdodEJhY2s7XFxuI2Vsc2VcXG5nbF9GcmFnQ29sb3IueHl6ICo9IHZMaWdodEZyb250O1xcbiNlbmRpZlwiLFRIUkVFLlNoYWRlckNodW5rLmxpZ2h0bWFwX2ZyYWdtZW50LFxuVEhSRUUuU2hhZGVyQ2h1bmsuY29sb3JfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsuZW52bWFwX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLnNoYWRvd21hcF9mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5saW5lYXJfdG9fZ2FtbWFfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsuZm9nX2ZyYWdtZW50LFwifVwiXS5qb2luKFwiXFxuXCIpfSxwaG9uZzp7dW5pZm9ybXM6VEhSRUUuVW5pZm9ybXNVdGlscy5tZXJnZShbVEhSRUUuVW5pZm9ybXNMaWIuY29tbW9uLFRIUkVFLlVuaWZvcm1zTGliLmJ1bXAsVEhSRUUuVW5pZm9ybXNMaWIubm9ybWFsbWFwLFRIUkVFLlVuaWZvcm1zTGliLmZvZyxUSFJFRS5Vbmlmb3Jtc0xpYi5saWdodHMsVEhSRUUuVW5pZm9ybXNMaWIuc2hhZG93bWFwLHthbWJpZW50Ont0eXBlOlwiY1wiLHZhbHVlOm5ldyBUSFJFRS5Db2xvcigxNjc3NzIxNSl9LGVtaXNzaXZlOnt0eXBlOlwiY1wiLHZhbHVlOm5ldyBUSFJFRS5Db2xvcigwKX0sc3BlY3VsYXI6e3R5cGU6XCJjXCIsXG52YWx1ZTpuZXcgVEhSRUUuQ29sb3IoMTExODQ4MSl9LHNoaW5pbmVzczp7dHlwZTpcImZcIix2YWx1ZTozMH0sd3JhcFJHQjp7dHlwZTpcInYzXCIsdmFsdWU6bmV3IFRIUkVFLlZlY3RvcjMoMSwxLDEpfX1dKSx2ZXJ0ZXhTaGFkZXI6W1wiI2RlZmluZSBQSE9OR1xcbnZhcnlpbmcgdmVjMyB2Vmlld1Bvc2l0aW9uO1xcbnZhcnlpbmcgdmVjMyB2Tm9ybWFsO1wiLFRIUkVFLlNoYWRlckNodW5rLm1hcF9wYXJzX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5saWdodG1hcF9wYXJzX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5lbnZtYXBfcGFyc192ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsubGlnaHRzX3Bob25nX3BhcnNfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLmNvbG9yX3BhcnNfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLm1vcnBodGFyZ2V0X3BhcnNfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLnNraW5uaW5nX3BhcnNfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLnNoYWRvd21hcF9wYXJzX3ZlcnRleCxcblwidm9pZCBtYWluKCkge1wiLFRIUkVFLlNoYWRlckNodW5rLm1hcF92ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsubGlnaHRtYXBfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLmNvbG9yX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5tb3JwaG5vcm1hbF92ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuc2tpbmJhc2VfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLnNraW5ub3JtYWxfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLmRlZmF1bHRub3JtYWxfdmVydGV4LFwidk5vcm1hbCA9IG5vcm1hbGl6ZSggdHJhbnNmb3JtZWROb3JtYWwgKTtcIixUSFJFRS5TaGFkZXJDaHVuay5tb3JwaHRhcmdldF92ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuc2tpbm5pbmdfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLmRlZmF1bHRfdmVydGV4LFwidlZpZXdQb3NpdGlvbiA9IC1tdlBvc2l0aW9uLnh5ejtcIixUSFJFRS5TaGFkZXJDaHVuay53b3JsZHBvc192ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuZW52bWFwX3ZlcnRleCxcblRIUkVFLlNoYWRlckNodW5rLmxpZ2h0c19waG9uZ192ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuc2hhZG93bWFwX3ZlcnRleCxcIn1cIl0uam9pbihcIlxcblwiKSxmcmFnbWVudFNoYWRlcjpbXCJ1bmlmb3JtIHZlYzMgZGlmZnVzZTtcXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxudW5pZm9ybSB2ZWMzIGFtYmllbnQ7XFxudW5pZm9ybSB2ZWMzIGVtaXNzaXZlO1xcbnVuaWZvcm0gdmVjMyBzcGVjdWxhcjtcXG51bmlmb3JtIGZsb2F0IHNoaW5pbmVzcztcIixUSFJFRS5TaGFkZXJDaHVuay5jb2xvcl9wYXJzX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLm1hcF9wYXJzX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLmxpZ2h0bWFwX3BhcnNfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsuZW52bWFwX3BhcnNfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsuZm9nX3BhcnNfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsubGlnaHRzX3Bob25nX3BhcnNfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsuc2hhZG93bWFwX3BhcnNfZnJhZ21lbnQsXG5USFJFRS5TaGFkZXJDaHVuay5idW1wbWFwX3BhcnNfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsubm9ybWFsbWFwX3BhcnNfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsuc3BlY3VsYXJtYXBfcGFyc19mcmFnbWVudCxcInZvaWQgbWFpbigpIHtcXG5nbF9GcmFnQ29sb3IgPSB2ZWM0KCB2ZWMzICggMS4wICksIG9wYWNpdHkgKTtcIixUSFJFRS5TaGFkZXJDaHVuay5tYXBfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsuYWxwaGF0ZXN0X2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLnNwZWN1bGFybWFwX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLmxpZ2h0c19waG9uZ19mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5saWdodG1hcF9mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5jb2xvcl9mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5lbnZtYXBfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsuc2hhZG93bWFwX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLmxpbmVhcl90b19nYW1tYV9mcmFnbWVudCxcblRIUkVFLlNoYWRlckNodW5rLmZvZ19mcmFnbWVudCxcIn1cIl0uam9pbihcIlxcblwiKX0scGFydGljbGVfYmFzaWM6e3VuaWZvcm1zOlRIUkVFLlVuaWZvcm1zVXRpbHMubWVyZ2UoW1RIUkVFLlVuaWZvcm1zTGliLnBhcnRpY2xlLFRIUkVFLlVuaWZvcm1zTGliLnNoYWRvd21hcF0pLHZlcnRleFNoYWRlcjpbXCJ1bmlmb3JtIGZsb2F0IHNpemU7XFxudW5pZm9ybSBmbG9hdCBzY2FsZTtcIixUSFJFRS5TaGFkZXJDaHVuay5jb2xvcl9wYXJzX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5zaGFkb3dtYXBfcGFyc192ZXJ0ZXgsXCJ2b2lkIG1haW4oKSB7XCIsVEhSRUUuU2hhZGVyQ2h1bmsuY29sb3JfdmVydGV4LFwidmVjNCBtdlBvc2l0aW9uID0gbW9kZWxWaWV3TWF0cml4ICogdmVjNCggcG9zaXRpb24sIDEuMCApO1xcbiNpZmRlZiBVU0VfU0laRUFUVEVOVUFUSU9OXFxuZ2xfUG9pbnRTaXplID0gc2l6ZSAqICggc2NhbGUgLyBsZW5ndGgoIG12UG9zaXRpb24ueHl6ICkgKTtcXG4jZWxzZVxcbmdsX1BvaW50U2l6ZSA9IHNpemU7XFxuI2VuZGlmXFxuZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbXZQb3NpdGlvbjtcIixcblRIUkVFLlNoYWRlckNodW5rLndvcmxkcG9zX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5zaGFkb3dtYXBfdmVydGV4LFwifVwiXS5qb2luKFwiXFxuXCIpLGZyYWdtZW50U2hhZGVyOltcInVuaWZvcm0gdmVjMyBwc0NvbG9yO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcIixUSFJFRS5TaGFkZXJDaHVuay5jb2xvcl9wYXJzX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLm1hcF9wYXJ0aWNsZV9wYXJzX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLmZvZ19wYXJzX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLnNoYWRvd21hcF9wYXJzX2ZyYWdtZW50LFwidm9pZCBtYWluKCkge1xcbmdsX0ZyYWdDb2xvciA9IHZlYzQoIHBzQ29sb3IsIG9wYWNpdHkgKTtcIixUSFJFRS5TaGFkZXJDaHVuay5tYXBfcGFydGljbGVfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsuYWxwaGF0ZXN0X2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLmNvbG9yX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLnNoYWRvd21hcF9mcmFnbWVudCxcblRIUkVFLlNoYWRlckNodW5rLmZvZ19mcmFnbWVudCxcIn1cIl0uam9pbihcIlxcblwiKX0sZGFzaGVkOnt1bmlmb3JtczpUSFJFRS5Vbmlmb3Jtc1V0aWxzLm1lcmdlKFtUSFJFRS5Vbmlmb3Jtc0xpYi5jb21tb24sVEhSRUUuVW5pZm9ybXNMaWIuZm9nLHtzY2FsZTp7dHlwZTpcImZcIix2YWx1ZToxfSxkYXNoU2l6ZTp7dHlwZTpcImZcIix2YWx1ZToxfSx0b3RhbFNpemU6e3R5cGU6XCJmXCIsdmFsdWU6Mn19XSksdmVydGV4U2hhZGVyOltcInVuaWZvcm0gZmxvYXQgc2NhbGU7XFxuYXR0cmlidXRlIGZsb2F0IGxpbmVEaXN0YW5jZTtcXG52YXJ5aW5nIGZsb2F0IHZMaW5lRGlzdGFuY2U7XCIsVEhSRUUuU2hhZGVyQ2h1bmsuY29sb3JfcGFyc192ZXJ0ZXgsXCJ2b2lkIG1haW4oKSB7XCIsVEhSRUUuU2hhZGVyQ2h1bmsuY29sb3JfdmVydGV4LFwidkxpbmVEaXN0YW5jZSA9IHNjYWxlICogbGluZURpc3RhbmNlO1xcbnZlYzQgbXZQb3NpdGlvbiA9IG1vZGVsVmlld01hdHJpeCAqIHZlYzQoIHBvc2l0aW9uLCAxLjAgKTtcXG5nbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtdlBvc2l0aW9uO1xcbn1cIl0uam9pbihcIlxcblwiKSxcbmZyYWdtZW50U2hhZGVyOltcInVuaWZvcm0gdmVjMyBkaWZmdXNlO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG51bmlmb3JtIGZsb2F0IGRhc2hTaXplO1xcbnVuaWZvcm0gZmxvYXQgdG90YWxTaXplO1xcbnZhcnlpbmcgZmxvYXQgdkxpbmVEaXN0YW5jZTtcIixUSFJFRS5TaGFkZXJDaHVuay5jb2xvcl9wYXJzX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLmZvZ19wYXJzX2ZyYWdtZW50LFwidm9pZCBtYWluKCkge1xcbmlmICggbW9kKCB2TGluZURpc3RhbmNlLCB0b3RhbFNpemUgKSA+IGRhc2hTaXplICkge1xcbmRpc2NhcmQ7XFxufVxcbmdsX0ZyYWdDb2xvciA9IHZlYzQoIGRpZmZ1c2UsIG9wYWNpdHkgKTtcIixUSFJFRS5TaGFkZXJDaHVuay5jb2xvcl9mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5mb2dfZnJhZ21lbnQsXCJ9XCJdLmpvaW4oXCJcXG5cIil9LGRlcHRoOnt1bmlmb3Jtczp7bU5lYXI6e3R5cGU6XCJmXCIsdmFsdWU6MX0sbUZhcjp7dHlwZTpcImZcIix2YWx1ZToyRTN9LG9wYWNpdHk6e3R5cGU6XCJmXCIsXG52YWx1ZToxfX0sdmVydGV4U2hhZGVyOlwidm9pZCBtYWluKCkge1xcbmdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIG1vZGVsVmlld01hdHJpeCAqIHZlYzQoIHBvc2l0aW9uLCAxLjAgKTtcXG59XCIsZnJhZ21lbnRTaGFkZXI6XCJ1bmlmb3JtIGZsb2F0IG1OZWFyO1xcbnVuaWZvcm0gZmxvYXQgbUZhcjtcXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxudm9pZCBtYWluKCkge1xcbmZsb2F0IGRlcHRoID0gZ2xfRnJhZ0Nvb3JkLnogLyBnbF9GcmFnQ29vcmQudztcXG5mbG9hdCBjb2xvciA9IDEuMCAtIHNtb290aHN0ZXAoIG1OZWFyLCBtRmFyLCBkZXB0aCApO1xcbmdsX0ZyYWdDb2xvciA9IHZlYzQoIHZlYzMoIGNvbG9yICksIG9wYWNpdHkgKTtcXG59XCJ9LG5vcm1hbDp7dW5pZm9ybXM6e29wYWNpdHk6e3R5cGU6XCJmXCIsdmFsdWU6MX19LHZlcnRleFNoYWRlcjpbXCJ2YXJ5aW5nIHZlYzMgdk5vcm1hbDtcIixUSFJFRS5TaGFkZXJDaHVuay5tb3JwaHRhcmdldF9wYXJzX3ZlcnRleCxcInZvaWQgbWFpbigpIHtcXG52Tm9ybWFsID0gbm9ybWFsaXplKCBub3JtYWxNYXRyaXggKiBub3JtYWwgKTtcIixcblRIUkVFLlNoYWRlckNodW5rLm1vcnBodGFyZ2V0X3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5kZWZhdWx0X3ZlcnRleCxcIn1cIl0uam9pbihcIlxcblwiKSxmcmFnbWVudFNoYWRlcjpcInVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG52YXJ5aW5nIHZlYzMgdk5vcm1hbDtcXG52b2lkIG1haW4oKSB7XFxuZ2xfRnJhZ0NvbG9yID0gdmVjNCggMC41ICogbm9ybWFsaXplKCB2Tm9ybWFsICkgKyAwLjUsIG9wYWNpdHkgKTtcXG59XCJ9LG5vcm1hbG1hcDp7dW5pZm9ybXM6VEhSRUUuVW5pZm9ybXNVdGlscy5tZXJnZShbVEhSRUUuVW5pZm9ybXNMaWIuZm9nLFRIUkVFLlVuaWZvcm1zTGliLmxpZ2h0cyxUSFJFRS5Vbmlmb3Jtc0xpYi5zaGFkb3dtYXAse2VuYWJsZUFPOnt0eXBlOlwiaVwiLHZhbHVlOjB9LGVuYWJsZURpZmZ1c2U6e3R5cGU6XCJpXCIsdmFsdWU6MH0sZW5hYmxlU3BlY3VsYXI6e3R5cGU6XCJpXCIsdmFsdWU6MH0sZW5hYmxlUmVmbGVjdGlvbjp7dHlwZTpcImlcIix2YWx1ZTowfSxlbmFibGVEaXNwbGFjZW1lbnQ6e3R5cGU6XCJpXCIsXG52YWx1ZTowfSx0RGlzcGxhY2VtZW50Ont0eXBlOlwidFwiLHZhbHVlOm51bGx9LHREaWZmdXNlOnt0eXBlOlwidFwiLHZhbHVlOm51bGx9LHRDdWJlOnt0eXBlOlwidFwiLHZhbHVlOm51bGx9LHROb3JtYWw6e3R5cGU6XCJ0XCIsdmFsdWU6bnVsbH0sdFNwZWN1bGFyOnt0eXBlOlwidFwiLHZhbHVlOm51bGx9LHRBTzp7dHlwZTpcInRcIix2YWx1ZTpudWxsfSx1Tm9ybWFsU2NhbGU6e3R5cGU6XCJ2MlwiLHZhbHVlOm5ldyBUSFJFRS5WZWN0b3IyKDEsMSl9LHVEaXNwbGFjZW1lbnRCaWFzOnt0eXBlOlwiZlwiLHZhbHVlOjB9LHVEaXNwbGFjZW1lbnRTY2FsZTp7dHlwZTpcImZcIix2YWx1ZToxfSx1RGlmZnVzZUNvbG9yOnt0eXBlOlwiY1wiLHZhbHVlOm5ldyBUSFJFRS5Db2xvcigxNjc3NzIxNSl9LHVTcGVjdWxhckNvbG9yOnt0eXBlOlwiY1wiLHZhbHVlOm5ldyBUSFJFRS5Db2xvcigxMTE4NDgxKX0sdUFtYmllbnRDb2xvcjp7dHlwZTpcImNcIix2YWx1ZTpuZXcgVEhSRUUuQ29sb3IoMTY3NzcyMTUpfSx1U2hpbmluZXNzOnt0eXBlOlwiZlwiLFxudmFsdWU6MzB9LHVPcGFjaXR5Ont0eXBlOlwiZlwiLHZhbHVlOjF9LHVzZVJlZnJhY3Q6e3R5cGU6XCJpXCIsdmFsdWU6MH0sdVJlZnJhY3Rpb25SYXRpbzp7dHlwZTpcImZcIix2YWx1ZTowLjk4fSx1UmVmbGVjdGl2aXR5Ont0eXBlOlwiZlwiLHZhbHVlOjAuNX0sdU9mZnNldDp7dHlwZTpcInYyXCIsdmFsdWU6bmV3IFRIUkVFLlZlY3RvcjIoMCwwKX0sdVJlcGVhdDp7dHlwZTpcInYyXCIsdmFsdWU6bmV3IFRIUkVFLlZlY3RvcjIoMSwxKX0sd3JhcFJHQjp7dHlwZTpcInYzXCIsdmFsdWU6bmV3IFRIUkVFLlZlY3RvcjMoMSwxLDEpfX1dKSxmcmFnbWVudFNoYWRlcjpbXCJ1bmlmb3JtIHZlYzMgdUFtYmllbnRDb2xvcjtcXG51bmlmb3JtIHZlYzMgdURpZmZ1c2VDb2xvcjtcXG51bmlmb3JtIHZlYzMgdVNwZWN1bGFyQ29sb3I7XFxudW5pZm9ybSBmbG9hdCB1U2hpbmluZXNzO1xcbnVuaWZvcm0gZmxvYXQgdU9wYWNpdHk7XFxudW5pZm9ybSBib29sIGVuYWJsZURpZmZ1c2U7XFxudW5pZm9ybSBib29sIGVuYWJsZVNwZWN1bGFyO1xcbnVuaWZvcm0gYm9vbCBlbmFibGVBTztcXG51bmlmb3JtIGJvb2wgZW5hYmxlUmVmbGVjdGlvbjtcXG51bmlmb3JtIHNhbXBsZXIyRCB0RGlmZnVzZTtcXG51bmlmb3JtIHNhbXBsZXIyRCB0Tm9ybWFsO1xcbnVuaWZvcm0gc2FtcGxlcjJEIHRTcGVjdWxhcjtcXG51bmlmb3JtIHNhbXBsZXIyRCB0QU87XFxudW5pZm9ybSBzYW1wbGVyQ3ViZSB0Q3ViZTtcXG51bmlmb3JtIHZlYzIgdU5vcm1hbFNjYWxlO1xcbnVuaWZvcm0gYm9vbCB1c2VSZWZyYWN0O1xcbnVuaWZvcm0gZmxvYXQgdVJlZnJhY3Rpb25SYXRpbztcXG51bmlmb3JtIGZsb2F0IHVSZWZsZWN0aXZpdHk7XFxudmFyeWluZyB2ZWMzIHZUYW5nZW50O1xcbnZhcnlpbmcgdmVjMyB2Qmlub3JtYWw7XFxudmFyeWluZyB2ZWMzIHZOb3JtYWw7XFxudmFyeWluZyB2ZWMyIHZVdjtcXG51bmlmb3JtIHZlYzMgYW1iaWVudExpZ2h0Q29sb3I7XFxuI2lmIE1BWF9ESVJfTElHSFRTID4gMFxcbnVuaWZvcm0gdmVjMyBkaXJlY3Rpb25hbExpZ2h0Q29sb3JbIE1BWF9ESVJfTElHSFRTIF07XFxudW5pZm9ybSB2ZWMzIGRpcmVjdGlvbmFsTGlnaHREaXJlY3Rpb25bIE1BWF9ESVJfTElHSFRTIF07XFxuI2VuZGlmXFxuI2lmIE1BWF9IRU1JX0xJR0hUUyA+IDBcXG51bmlmb3JtIHZlYzMgaGVtaXNwaGVyZUxpZ2h0U2t5Q29sb3JbIE1BWF9IRU1JX0xJR0hUUyBdO1xcbnVuaWZvcm0gdmVjMyBoZW1pc3BoZXJlTGlnaHRHcm91bmRDb2xvclsgTUFYX0hFTUlfTElHSFRTIF07XFxudW5pZm9ybSB2ZWMzIGhlbWlzcGhlcmVMaWdodERpcmVjdGlvblsgTUFYX0hFTUlfTElHSFRTIF07XFxuI2VuZGlmXFxuI2lmIE1BWF9QT0lOVF9MSUdIVFMgPiAwXFxudW5pZm9ybSB2ZWMzIHBvaW50TGlnaHRDb2xvclsgTUFYX1BPSU5UX0xJR0hUUyBdO1xcbnVuaWZvcm0gdmVjMyBwb2ludExpZ2h0UG9zaXRpb25bIE1BWF9QT0lOVF9MSUdIVFMgXTtcXG51bmlmb3JtIGZsb2F0IHBvaW50TGlnaHREaXN0YW5jZVsgTUFYX1BPSU5UX0xJR0hUUyBdO1xcbiNlbmRpZlxcbiNpZiBNQVhfU1BPVF9MSUdIVFMgPiAwXFxudW5pZm9ybSB2ZWMzIHNwb3RMaWdodENvbG9yWyBNQVhfU1BPVF9MSUdIVFMgXTtcXG51bmlmb3JtIHZlYzMgc3BvdExpZ2h0UG9zaXRpb25bIE1BWF9TUE9UX0xJR0hUUyBdO1xcbnVuaWZvcm0gdmVjMyBzcG90TGlnaHREaXJlY3Rpb25bIE1BWF9TUE9UX0xJR0hUUyBdO1xcbnVuaWZvcm0gZmxvYXQgc3BvdExpZ2h0QW5nbGVDb3NbIE1BWF9TUE9UX0xJR0hUUyBdO1xcbnVuaWZvcm0gZmxvYXQgc3BvdExpZ2h0RXhwb25lbnRbIE1BWF9TUE9UX0xJR0hUUyBdO1xcbnVuaWZvcm0gZmxvYXQgc3BvdExpZ2h0RGlzdGFuY2VbIE1BWF9TUE9UX0xJR0hUUyBdO1xcbiNlbmRpZlxcbiNpZmRlZiBXUkFQX0FST1VORFxcbnVuaWZvcm0gdmVjMyB3cmFwUkdCO1xcbiNlbmRpZlxcbnZhcnlpbmcgdmVjMyB2V29ybGRQb3NpdGlvbjtcXG52YXJ5aW5nIHZlYzMgdlZpZXdQb3NpdGlvbjtcIixcblRIUkVFLlNoYWRlckNodW5rLnNoYWRvd21hcF9wYXJzX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLmZvZ19wYXJzX2ZyYWdtZW50LFwidm9pZCBtYWluKCkge1xcbmdsX0ZyYWdDb2xvciA9IHZlYzQoIHZlYzMoIDEuMCApLCB1T3BhY2l0eSApO1xcbnZlYzMgc3BlY3VsYXJUZXggPSB2ZWMzKCAxLjAgKTtcXG52ZWMzIG5vcm1hbFRleCA9IHRleHR1cmUyRCggdE5vcm1hbCwgdlV2ICkueHl6ICogMi4wIC0gMS4wO1xcbm5vcm1hbFRleC54eSAqPSB1Tm9ybWFsU2NhbGU7XFxubm9ybWFsVGV4ID0gbm9ybWFsaXplKCBub3JtYWxUZXggKTtcXG5pZiggZW5hYmxlRGlmZnVzZSApIHtcXG4jaWZkZWYgR0FNTUFfSU5QVVRcXG52ZWM0IHRleGVsQ29sb3IgPSB0ZXh0dXJlMkQoIHREaWZmdXNlLCB2VXYgKTtcXG50ZXhlbENvbG9yLnh5eiAqPSB0ZXhlbENvbG9yLnh5ejtcXG5nbF9GcmFnQ29sb3IgPSBnbF9GcmFnQ29sb3IgKiB0ZXhlbENvbG9yO1xcbiNlbHNlXFxuZ2xfRnJhZ0NvbG9yID0gZ2xfRnJhZ0NvbG9yICogdGV4dHVyZTJEKCB0RGlmZnVzZSwgdlV2ICk7XFxuI2VuZGlmXFxufVxcbmlmKCBlbmFibGVBTyApIHtcXG4jaWZkZWYgR0FNTUFfSU5QVVRcXG52ZWM0IGFvQ29sb3IgPSB0ZXh0dXJlMkQoIHRBTywgdlV2ICk7XFxuYW9Db2xvci54eXogKj0gYW9Db2xvci54eXo7XFxuZ2xfRnJhZ0NvbG9yLnh5eiA9IGdsX0ZyYWdDb2xvci54eXogKiBhb0NvbG9yLnh5ejtcXG4jZWxzZVxcbmdsX0ZyYWdDb2xvci54eXogPSBnbF9GcmFnQ29sb3IueHl6ICogdGV4dHVyZTJEKCB0QU8sIHZVdiApLnh5ejtcXG4jZW5kaWZcXG59XFxuaWYoIGVuYWJsZVNwZWN1bGFyIClcXG5zcGVjdWxhclRleCA9IHRleHR1cmUyRCggdFNwZWN1bGFyLCB2VXYgKS54eXo7XFxubWF0MyB0c2IgPSBtYXQzKCBub3JtYWxpemUoIHZUYW5nZW50ICksIG5vcm1hbGl6ZSggdkJpbm9ybWFsICksIG5vcm1hbGl6ZSggdk5vcm1hbCApICk7XFxudmVjMyBmaW5hbE5vcm1hbCA9IHRzYiAqIG5vcm1hbFRleDtcXG4jaWZkZWYgRkxJUF9TSURFRFxcbmZpbmFsTm9ybWFsID0gLWZpbmFsTm9ybWFsO1xcbiNlbmRpZlxcbnZlYzMgbm9ybWFsID0gbm9ybWFsaXplKCBmaW5hbE5vcm1hbCApO1xcbnZlYzMgdmlld1Bvc2l0aW9uID0gbm9ybWFsaXplKCB2Vmlld1Bvc2l0aW9uICk7XFxuI2lmIE1BWF9QT0lOVF9MSUdIVFMgPiAwXFxudmVjMyBwb2ludERpZmZ1c2UgPSB2ZWMzKCAwLjAgKTtcXG52ZWMzIHBvaW50U3BlY3VsYXIgPSB2ZWMzKCAwLjAgKTtcXG5mb3IgKCBpbnQgaSA9IDA7IGkgPCBNQVhfUE9JTlRfTElHSFRTOyBpICsrICkge1xcbnZlYzQgbFBvc2l0aW9uID0gdmlld01hdHJpeCAqIHZlYzQoIHBvaW50TGlnaHRQb3NpdGlvblsgaSBdLCAxLjAgKTtcXG52ZWMzIHBvaW50VmVjdG9yID0gbFBvc2l0aW9uLnh5eiArIHZWaWV3UG9zaXRpb24ueHl6O1xcbmZsb2F0IHBvaW50RGlzdGFuY2UgPSAxLjA7XFxuaWYgKCBwb2ludExpZ2h0RGlzdGFuY2VbIGkgXSA+IDAuMCApXFxucG9pbnREaXN0YW5jZSA9IDEuMCAtIG1pbiggKCBsZW5ndGgoIHBvaW50VmVjdG9yICkgLyBwb2ludExpZ2h0RGlzdGFuY2VbIGkgXSApLCAxLjAgKTtcXG5wb2ludFZlY3RvciA9IG5vcm1hbGl6ZSggcG9pbnRWZWN0b3IgKTtcXG4jaWZkZWYgV1JBUF9BUk9VTkRcXG5mbG9hdCBwb2ludERpZmZ1c2VXZWlnaHRGdWxsID0gbWF4KCBkb3QoIG5vcm1hbCwgcG9pbnRWZWN0b3IgKSwgMC4wICk7XFxuZmxvYXQgcG9pbnREaWZmdXNlV2VpZ2h0SGFsZiA9IG1heCggMC41ICogZG90KCBub3JtYWwsIHBvaW50VmVjdG9yICkgKyAwLjUsIDAuMCApO1xcbnZlYzMgcG9pbnREaWZmdXNlV2VpZ2h0ID0gbWl4KCB2ZWMzICggcG9pbnREaWZmdXNlV2VpZ2h0RnVsbCApLCB2ZWMzKCBwb2ludERpZmZ1c2VXZWlnaHRIYWxmICksIHdyYXBSR0IgKTtcXG4jZWxzZVxcbmZsb2F0IHBvaW50RGlmZnVzZVdlaWdodCA9IG1heCggZG90KCBub3JtYWwsIHBvaW50VmVjdG9yICksIDAuMCApO1xcbiNlbmRpZlxcbnBvaW50RGlmZnVzZSArPSBwb2ludERpc3RhbmNlICogcG9pbnRMaWdodENvbG9yWyBpIF0gKiB1RGlmZnVzZUNvbG9yICogcG9pbnREaWZmdXNlV2VpZ2h0O1xcbnZlYzMgcG9pbnRIYWxmVmVjdG9yID0gbm9ybWFsaXplKCBwb2ludFZlY3RvciArIHZpZXdQb3NpdGlvbiApO1xcbmZsb2F0IHBvaW50RG90Tm9ybWFsSGFsZiA9IG1heCggZG90KCBub3JtYWwsIHBvaW50SGFsZlZlY3RvciApLCAwLjAgKTtcXG5mbG9hdCBwb2ludFNwZWN1bGFyV2VpZ2h0ID0gc3BlY3VsYXJUZXguciAqIG1heCggcG93KCBwb2ludERvdE5vcm1hbEhhbGYsIHVTaGluaW5lc3MgKSwgMC4wICk7XFxuI2lmZGVmIFBIWVNJQ0FMTFlfQkFTRURfU0hBRElOR1xcbmZsb2F0IHNwZWN1bGFyTm9ybWFsaXphdGlvbiA9ICggdVNoaW5pbmVzcyArIDIuMDAwMSApIC8gOC4wO1xcbnZlYzMgc2NobGljayA9IHVTcGVjdWxhckNvbG9yICsgdmVjMyggMS4wIC0gdVNwZWN1bGFyQ29sb3IgKSAqIHBvdyggMS4wIC0gZG90KCBwb2ludFZlY3RvciwgcG9pbnRIYWxmVmVjdG9yICksIDUuMCApO1xcbnBvaW50U3BlY3VsYXIgKz0gc2NobGljayAqIHBvaW50TGlnaHRDb2xvclsgaSBdICogcG9pbnRTcGVjdWxhcldlaWdodCAqIHBvaW50RGlmZnVzZVdlaWdodCAqIHBvaW50RGlzdGFuY2UgKiBzcGVjdWxhck5vcm1hbGl6YXRpb247XFxuI2Vsc2VcXG5wb2ludFNwZWN1bGFyICs9IHBvaW50RGlzdGFuY2UgKiBwb2ludExpZ2h0Q29sb3JbIGkgXSAqIHVTcGVjdWxhckNvbG9yICogcG9pbnRTcGVjdWxhcldlaWdodCAqIHBvaW50RGlmZnVzZVdlaWdodDtcXG4jZW5kaWZcXG59XFxuI2VuZGlmXFxuI2lmIE1BWF9TUE9UX0xJR0hUUyA+IDBcXG52ZWMzIHNwb3REaWZmdXNlID0gdmVjMyggMC4wICk7XFxudmVjMyBzcG90U3BlY3VsYXIgPSB2ZWMzKCAwLjAgKTtcXG5mb3IgKCBpbnQgaSA9IDA7IGkgPCBNQVhfU1BPVF9MSUdIVFM7IGkgKysgKSB7XFxudmVjNCBsUG9zaXRpb24gPSB2aWV3TWF0cml4ICogdmVjNCggc3BvdExpZ2h0UG9zaXRpb25bIGkgXSwgMS4wICk7XFxudmVjMyBzcG90VmVjdG9yID0gbFBvc2l0aW9uLnh5eiArIHZWaWV3UG9zaXRpb24ueHl6O1xcbmZsb2F0IHNwb3REaXN0YW5jZSA9IDEuMDtcXG5pZiAoIHNwb3RMaWdodERpc3RhbmNlWyBpIF0gPiAwLjAgKVxcbnNwb3REaXN0YW5jZSA9IDEuMCAtIG1pbiggKCBsZW5ndGgoIHNwb3RWZWN0b3IgKSAvIHNwb3RMaWdodERpc3RhbmNlWyBpIF0gKSwgMS4wICk7XFxuc3BvdFZlY3RvciA9IG5vcm1hbGl6ZSggc3BvdFZlY3RvciApO1xcbmZsb2F0IHNwb3RFZmZlY3QgPSBkb3QoIHNwb3RMaWdodERpcmVjdGlvblsgaSBdLCBub3JtYWxpemUoIHNwb3RMaWdodFBvc2l0aW9uWyBpIF0gLSB2V29ybGRQb3NpdGlvbiApICk7XFxuaWYgKCBzcG90RWZmZWN0ID4gc3BvdExpZ2h0QW5nbGVDb3NbIGkgXSApIHtcXG5zcG90RWZmZWN0ID0gbWF4KCBwb3coIHNwb3RFZmZlY3QsIHNwb3RMaWdodEV4cG9uZW50WyBpIF0gKSwgMC4wICk7XFxuI2lmZGVmIFdSQVBfQVJPVU5EXFxuZmxvYXQgc3BvdERpZmZ1c2VXZWlnaHRGdWxsID0gbWF4KCBkb3QoIG5vcm1hbCwgc3BvdFZlY3RvciApLCAwLjAgKTtcXG5mbG9hdCBzcG90RGlmZnVzZVdlaWdodEhhbGYgPSBtYXgoIDAuNSAqIGRvdCggbm9ybWFsLCBzcG90VmVjdG9yICkgKyAwLjUsIDAuMCApO1xcbnZlYzMgc3BvdERpZmZ1c2VXZWlnaHQgPSBtaXgoIHZlYzMgKCBzcG90RGlmZnVzZVdlaWdodEZ1bGwgKSwgdmVjMyggc3BvdERpZmZ1c2VXZWlnaHRIYWxmICksIHdyYXBSR0IgKTtcXG4jZWxzZVxcbmZsb2F0IHNwb3REaWZmdXNlV2VpZ2h0ID0gbWF4KCBkb3QoIG5vcm1hbCwgc3BvdFZlY3RvciApLCAwLjAgKTtcXG4jZW5kaWZcXG5zcG90RGlmZnVzZSArPSBzcG90RGlzdGFuY2UgKiBzcG90TGlnaHRDb2xvclsgaSBdICogdURpZmZ1c2VDb2xvciAqIHNwb3REaWZmdXNlV2VpZ2h0ICogc3BvdEVmZmVjdDtcXG52ZWMzIHNwb3RIYWxmVmVjdG9yID0gbm9ybWFsaXplKCBzcG90VmVjdG9yICsgdmlld1Bvc2l0aW9uICk7XFxuZmxvYXQgc3BvdERvdE5vcm1hbEhhbGYgPSBtYXgoIGRvdCggbm9ybWFsLCBzcG90SGFsZlZlY3RvciApLCAwLjAgKTtcXG5mbG9hdCBzcG90U3BlY3VsYXJXZWlnaHQgPSBzcGVjdWxhclRleC5yICogbWF4KCBwb3coIHNwb3REb3ROb3JtYWxIYWxmLCB1U2hpbmluZXNzICksIDAuMCApO1xcbiNpZmRlZiBQSFlTSUNBTExZX0JBU0VEX1NIQURJTkdcXG5mbG9hdCBzcGVjdWxhck5vcm1hbGl6YXRpb24gPSAoIHVTaGluaW5lc3MgKyAyLjAwMDEgKSAvIDguMDtcXG52ZWMzIHNjaGxpY2sgPSB1U3BlY3VsYXJDb2xvciArIHZlYzMoIDEuMCAtIHVTcGVjdWxhckNvbG9yICkgKiBwb3coIDEuMCAtIGRvdCggc3BvdFZlY3Rvciwgc3BvdEhhbGZWZWN0b3IgKSwgNS4wICk7XFxuc3BvdFNwZWN1bGFyICs9IHNjaGxpY2sgKiBzcG90TGlnaHRDb2xvclsgaSBdICogc3BvdFNwZWN1bGFyV2VpZ2h0ICogc3BvdERpZmZ1c2VXZWlnaHQgKiBzcG90RGlzdGFuY2UgKiBzcGVjdWxhck5vcm1hbGl6YXRpb24gKiBzcG90RWZmZWN0O1xcbiNlbHNlXFxuc3BvdFNwZWN1bGFyICs9IHNwb3REaXN0YW5jZSAqIHNwb3RMaWdodENvbG9yWyBpIF0gKiB1U3BlY3VsYXJDb2xvciAqIHNwb3RTcGVjdWxhcldlaWdodCAqIHNwb3REaWZmdXNlV2VpZ2h0ICogc3BvdEVmZmVjdDtcXG4jZW5kaWZcXG59XFxufVxcbiNlbmRpZlxcbiNpZiBNQVhfRElSX0xJR0hUUyA+IDBcXG52ZWMzIGRpckRpZmZ1c2UgPSB2ZWMzKCAwLjAgKTtcXG52ZWMzIGRpclNwZWN1bGFyID0gdmVjMyggMC4wICk7XFxuZm9yKCBpbnQgaSA9IDA7IGkgPCBNQVhfRElSX0xJR0hUUzsgaSsrICkge1xcbnZlYzQgbERpcmVjdGlvbiA9IHZpZXdNYXRyaXggKiB2ZWM0KCBkaXJlY3Rpb25hbExpZ2h0RGlyZWN0aW9uWyBpIF0sIDAuMCApO1xcbnZlYzMgZGlyVmVjdG9yID0gbm9ybWFsaXplKCBsRGlyZWN0aW9uLnh5eiApO1xcbiNpZmRlZiBXUkFQX0FST1VORFxcbmZsb2F0IGRpcmVjdGlvbmFsTGlnaHRXZWlnaHRpbmdGdWxsID0gbWF4KCBkb3QoIG5vcm1hbCwgZGlyVmVjdG9yICksIDAuMCApO1xcbmZsb2F0IGRpcmVjdGlvbmFsTGlnaHRXZWlnaHRpbmdIYWxmID0gbWF4KCAwLjUgKiBkb3QoIG5vcm1hbCwgZGlyVmVjdG9yICkgKyAwLjUsIDAuMCApO1xcbnZlYzMgZGlyRGlmZnVzZVdlaWdodCA9IG1peCggdmVjMyggZGlyZWN0aW9uYWxMaWdodFdlaWdodGluZ0Z1bGwgKSwgdmVjMyggZGlyZWN0aW9uYWxMaWdodFdlaWdodGluZ0hhbGYgKSwgd3JhcFJHQiApO1xcbiNlbHNlXFxuZmxvYXQgZGlyRGlmZnVzZVdlaWdodCA9IG1heCggZG90KCBub3JtYWwsIGRpclZlY3RvciApLCAwLjAgKTtcXG4jZW5kaWZcXG5kaXJEaWZmdXNlICs9IGRpcmVjdGlvbmFsTGlnaHRDb2xvclsgaSBdICogdURpZmZ1c2VDb2xvciAqIGRpckRpZmZ1c2VXZWlnaHQ7XFxudmVjMyBkaXJIYWxmVmVjdG9yID0gbm9ybWFsaXplKCBkaXJWZWN0b3IgKyB2aWV3UG9zaXRpb24gKTtcXG5mbG9hdCBkaXJEb3ROb3JtYWxIYWxmID0gbWF4KCBkb3QoIG5vcm1hbCwgZGlySGFsZlZlY3RvciApLCAwLjAgKTtcXG5mbG9hdCBkaXJTcGVjdWxhcldlaWdodCA9IHNwZWN1bGFyVGV4LnIgKiBtYXgoIHBvdyggZGlyRG90Tm9ybWFsSGFsZiwgdVNoaW5pbmVzcyApLCAwLjAgKTtcXG4jaWZkZWYgUEhZU0lDQUxMWV9CQVNFRF9TSEFESU5HXFxuZmxvYXQgc3BlY3VsYXJOb3JtYWxpemF0aW9uID0gKCB1U2hpbmluZXNzICsgMi4wMDAxICkgLyA4LjA7XFxudmVjMyBzY2hsaWNrID0gdVNwZWN1bGFyQ29sb3IgKyB2ZWMzKCAxLjAgLSB1U3BlY3VsYXJDb2xvciApICogcG93KCAxLjAgLSBkb3QoIGRpclZlY3RvciwgZGlySGFsZlZlY3RvciApLCA1LjAgKTtcXG5kaXJTcGVjdWxhciArPSBzY2hsaWNrICogZGlyZWN0aW9uYWxMaWdodENvbG9yWyBpIF0gKiBkaXJTcGVjdWxhcldlaWdodCAqIGRpckRpZmZ1c2VXZWlnaHQgKiBzcGVjdWxhck5vcm1hbGl6YXRpb247XFxuI2Vsc2VcXG5kaXJTcGVjdWxhciArPSBkaXJlY3Rpb25hbExpZ2h0Q29sb3JbIGkgXSAqIHVTcGVjdWxhckNvbG9yICogZGlyU3BlY3VsYXJXZWlnaHQgKiBkaXJEaWZmdXNlV2VpZ2h0O1xcbiNlbmRpZlxcbn1cXG4jZW5kaWZcXG4jaWYgTUFYX0hFTUlfTElHSFRTID4gMFxcbnZlYzMgaGVtaURpZmZ1c2UgID0gdmVjMyggMC4wICk7XFxudmVjMyBoZW1pU3BlY3VsYXIgPSB2ZWMzKCAwLjAgKTtcXG5mb3IoIGludCBpID0gMDsgaSA8IE1BWF9IRU1JX0xJR0hUUzsgaSArKyApIHtcXG52ZWM0IGxEaXJlY3Rpb24gPSB2aWV3TWF0cml4ICogdmVjNCggaGVtaXNwaGVyZUxpZ2h0RGlyZWN0aW9uWyBpIF0sIDAuMCApO1xcbnZlYzMgbFZlY3RvciA9IG5vcm1hbGl6ZSggbERpcmVjdGlvbi54eXogKTtcXG5mbG9hdCBkb3RQcm9kdWN0ID0gZG90KCBub3JtYWwsIGxWZWN0b3IgKTtcXG5mbG9hdCBoZW1pRGlmZnVzZVdlaWdodCA9IDAuNSAqIGRvdFByb2R1Y3QgKyAwLjU7XFxudmVjMyBoZW1pQ29sb3IgPSBtaXgoIGhlbWlzcGhlcmVMaWdodEdyb3VuZENvbG9yWyBpIF0sIGhlbWlzcGhlcmVMaWdodFNreUNvbG9yWyBpIF0sIGhlbWlEaWZmdXNlV2VpZ2h0ICk7XFxuaGVtaURpZmZ1c2UgKz0gdURpZmZ1c2VDb2xvciAqIGhlbWlDb2xvcjtcXG52ZWMzIGhlbWlIYWxmVmVjdG9yU2t5ID0gbm9ybWFsaXplKCBsVmVjdG9yICsgdmlld1Bvc2l0aW9uICk7XFxuZmxvYXQgaGVtaURvdE5vcm1hbEhhbGZTa3kgPSAwLjUgKiBkb3QoIG5vcm1hbCwgaGVtaUhhbGZWZWN0b3JTa3kgKSArIDAuNTtcXG5mbG9hdCBoZW1pU3BlY3VsYXJXZWlnaHRTa3kgPSBzcGVjdWxhclRleC5yICogbWF4KCBwb3coIGhlbWlEb3ROb3JtYWxIYWxmU2t5LCB1U2hpbmluZXNzICksIDAuMCApO1xcbnZlYzMgbFZlY3Rvckdyb3VuZCA9IC1sVmVjdG9yO1xcbnZlYzMgaGVtaUhhbGZWZWN0b3JHcm91bmQgPSBub3JtYWxpemUoIGxWZWN0b3JHcm91bmQgKyB2aWV3UG9zaXRpb24gKTtcXG5mbG9hdCBoZW1pRG90Tm9ybWFsSGFsZkdyb3VuZCA9IDAuNSAqIGRvdCggbm9ybWFsLCBoZW1pSGFsZlZlY3Rvckdyb3VuZCApICsgMC41O1xcbmZsb2F0IGhlbWlTcGVjdWxhcldlaWdodEdyb3VuZCA9IHNwZWN1bGFyVGV4LnIgKiBtYXgoIHBvdyggaGVtaURvdE5vcm1hbEhhbGZHcm91bmQsIHVTaGluaW5lc3MgKSwgMC4wICk7XFxuI2lmZGVmIFBIWVNJQ0FMTFlfQkFTRURfU0hBRElOR1xcbmZsb2F0IGRvdFByb2R1Y3RHcm91bmQgPSBkb3QoIG5vcm1hbCwgbFZlY3Rvckdyb3VuZCApO1xcbmZsb2F0IHNwZWN1bGFyTm9ybWFsaXphdGlvbiA9ICggdVNoaW5pbmVzcyArIDIuMDAwMSApIC8gOC4wO1xcbnZlYzMgc2NobGlja1NreSA9IHVTcGVjdWxhckNvbG9yICsgdmVjMyggMS4wIC0gdVNwZWN1bGFyQ29sb3IgKSAqIHBvdyggMS4wIC0gZG90KCBsVmVjdG9yLCBoZW1pSGFsZlZlY3RvclNreSApLCA1LjAgKTtcXG52ZWMzIHNjaGxpY2tHcm91bmQgPSB1U3BlY3VsYXJDb2xvciArIHZlYzMoIDEuMCAtIHVTcGVjdWxhckNvbG9yICkgKiBwb3coIDEuMCAtIGRvdCggbFZlY3Rvckdyb3VuZCwgaGVtaUhhbGZWZWN0b3JHcm91bmQgKSwgNS4wICk7XFxuaGVtaVNwZWN1bGFyICs9IGhlbWlDb2xvciAqIHNwZWN1bGFyTm9ybWFsaXphdGlvbiAqICggc2NobGlja1NreSAqIGhlbWlTcGVjdWxhcldlaWdodFNreSAqIG1heCggZG90UHJvZHVjdCwgMC4wICkgKyBzY2hsaWNrR3JvdW5kICogaGVtaVNwZWN1bGFyV2VpZ2h0R3JvdW5kICogbWF4KCBkb3RQcm9kdWN0R3JvdW5kLCAwLjAgKSApO1xcbiNlbHNlXFxuaGVtaVNwZWN1bGFyICs9IHVTcGVjdWxhckNvbG9yICogaGVtaUNvbG9yICogKCBoZW1pU3BlY3VsYXJXZWlnaHRTa3kgKyBoZW1pU3BlY3VsYXJXZWlnaHRHcm91bmQgKSAqIGhlbWlEaWZmdXNlV2VpZ2h0O1xcbiNlbmRpZlxcbn1cXG4jZW5kaWZcXG52ZWMzIHRvdGFsRGlmZnVzZSA9IHZlYzMoIDAuMCApO1xcbnZlYzMgdG90YWxTcGVjdWxhciA9IHZlYzMoIDAuMCApO1xcbiNpZiBNQVhfRElSX0xJR0hUUyA+IDBcXG50b3RhbERpZmZ1c2UgKz0gZGlyRGlmZnVzZTtcXG50b3RhbFNwZWN1bGFyICs9IGRpclNwZWN1bGFyO1xcbiNlbmRpZlxcbiNpZiBNQVhfSEVNSV9MSUdIVFMgPiAwXFxudG90YWxEaWZmdXNlICs9IGhlbWlEaWZmdXNlO1xcbnRvdGFsU3BlY3VsYXIgKz0gaGVtaVNwZWN1bGFyO1xcbiNlbmRpZlxcbiNpZiBNQVhfUE9JTlRfTElHSFRTID4gMFxcbnRvdGFsRGlmZnVzZSArPSBwb2ludERpZmZ1c2U7XFxudG90YWxTcGVjdWxhciArPSBwb2ludFNwZWN1bGFyO1xcbiNlbmRpZlxcbiNpZiBNQVhfU1BPVF9MSUdIVFMgPiAwXFxudG90YWxEaWZmdXNlICs9IHNwb3REaWZmdXNlO1xcbnRvdGFsU3BlY3VsYXIgKz0gc3BvdFNwZWN1bGFyO1xcbiNlbmRpZlxcbiNpZmRlZiBNRVRBTFxcbmdsX0ZyYWdDb2xvci54eXogPSBnbF9GcmFnQ29sb3IueHl6ICogKCB0b3RhbERpZmZ1c2UgKyBhbWJpZW50TGlnaHRDb2xvciAqIHVBbWJpZW50Q29sb3IgKyB0b3RhbFNwZWN1bGFyICk7XFxuI2Vsc2VcXG5nbF9GcmFnQ29sb3IueHl6ID0gZ2xfRnJhZ0NvbG9yLnh5eiAqICggdG90YWxEaWZmdXNlICsgYW1iaWVudExpZ2h0Q29sb3IgKiB1QW1iaWVudENvbG9yICkgKyB0b3RhbFNwZWN1bGFyO1xcbiNlbmRpZlxcbmlmICggZW5hYmxlUmVmbGVjdGlvbiApIHtcXG52ZWMzIHZSZWZsZWN0O1xcbnZlYzMgY2FtZXJhVG9WZXJ0ZXggPSBub3JtYWxpemUoIHZXb3JsZFBvc2l0aW9uIC0gY2FtZXJhUG9zaXRpb24gKTtcXG5pZiAoIHVzZVJlZnJhY3QgKSB7XFxudlJlZmxlY3QgPSByZWZyYWN0KCBjYW1lcmFUb1ZlcnRleCwgbm9ybWFsLCB1UmVmcmFjdGlvblJhdGlvICk7XFxufSBlbHNlIHtcXG52UmVmbGVjdCA9IHJlZmxlY3QoIGNhbWVyYVRvVmVydGV4LCBub3JtYWwgKTtcXG59XFxudmVjNCBjdWJlQ29sb3IgPSB0ZXh0dXJlQ3ViZSggdEN1YmUsIHZlYzMoIC12UmVmbGVjdC54LCB2UmVmbGVjdC55eiApICk7XFxuI2lmZGVmIEdBTU1BX0lOUFVUXFxuY3ViZUNvbG9yLnh5eiAqPSBjdWJlQ29sb3IueHl6O1xcbiNlbmRpZlxcbmdsX0ZyYWdDb2xvci54eXogPSBtaXgoIGdsX0ZyYWdDb2xvci54eXosIGN1YmVDb2xvci54eXosIHNwZWN1bGFyVGV4LnIgKiB1UmVmbGVjdGl2aXR5ICk7XFxufVwiLFxuVEhSRUUuU2hhZGVyQ2h1bmsuc2hhZG93bWFwX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLmxpbmVhcl90b19nYW1tYV9mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5mb2dfZnJhZ21lbnQsXCJ9XCJdLmpvaW4oXCJcXG5cIiksdmVydGV4U2hhZGVyOltcImF0dHJpYnV0ZSB2ZWM0IHRhbmdlbnQ7XFxudW5pZm9ybSB2ZWMyIHVPZmZzZXQ7XFxudW5pZm9ybSB2ZWMyIHVSZXBlYXQ7XFxudW5pZm9ybSBib29sIGVuYWJsZURpc3BsYWNlbWVudDtcXG4jaWZkZWYgVkVSVEVYX1RFWFRVUkVTXFxudW5pZm9ybSBzYW1wbGVyMkQgdERpc3BsYWNlbWVudDtcXG51bmlmb3JtIGZsb2F0IHVEaXNwbGFjZW1lbnRTY2FsZTtcXG51bmlmb3JtIGZsb2F0IHVEaXNwbGFjZW1lbnRCaWFzO1xcbiNlbmRpZlxcbnZhcnlpbmcgdmVjMyB2VGFuZ2VudDtcXG52YXJ5aW5nIHZlYzMgdkJpbm9ybWFsO1xcbnZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xcbnZhcnlpbmcgdmVjMiB2VXY7XFxudmFyeWluZyB2ZWMzIHZXb3JsZFBvc2l0aW9uO1xcbnZhcnlpbmcgdmVjMyB2Vmlld1Bvc2l0aW9uO1wiLFxuVEhSRUUuU2hhZGVyQ2h1bmsuc2tpbm5pbmdfcGFyc192ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuc2hhZG93bWFwX3BhcnNfdmVydGV4LFwidm9pZCBtYWluKCkge1wiLFRIUkVFLlNoYWRlckNodW5rLnNraW5iYXNlX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5za2lubm9ybWFsX3ZlcnRleCxcIiNpZmRlZiBVU0VfU0tJTk5JTkdcXG52Tm9ybWFsID0gbm9ybWFsaXplKCBub3JtYWxNYXRyaXggKiBza2lubmVkTm9ybWFsLnh5eiApO1xcbnZlYzQgc2tpbm5lZFRhbmdlbnQgPSBza2luTWF0cml4ICogdmVjNCggdGFuZ2VudC54eXosIDAuMCApO1xcbnZUYW5nZW50ID0gbm9ybWFsaXplKCBub3JtYWxNYXRyaXggKiBza2lubmVkVGFuZ2VudC54eXogKTtcXG4jZWxzZVxcbnZOb3JtYWwgPSBub3JtYWxpemUoIG5vcm1hbE1hdHJpeCAqIG5vcm1hbCApO1xcbnZUYW5nZW50ID0gbm9ybWFsaXplKCBub3JtYWxNYXRyaXggKiB0YW5nZW50Lnh5eiApO1xcbiNlbmRpZlxcbnZCaW5vcm1hbCA9IG5vcm1hbGl6ZSggY3Jvc3MoIHZOb3JtYWwsIHZUYW5nZW50ICkgKiB0YW5nZW50LncgKTtcXG52VXYgPSB1diAqIHVSZXBlYXQgKyB1T2Zmc2V0O1xcbnZlYzMgZGlzcGxhY2VkUG9zaXRpb247XFxuI2lmZGVmIFZFUlRFWF9URVhUVVJFU1xcbmlmICggZW5hYmxlRGlzcGxhY2VtZW50ICkge1xcbnZlYzMgZHYgPSB0ZXh0dXJlMkQoIHREaXNwbGFjZW1lbnQsIHV2ICkueHl6O1xcbmZsb2F0IGRmID0gdURpc3BsYWNlbWVudFNjYWxlICogZHYueCArIHVEaXNwbGFjZW1lbnRCaWFzO1xcbmRpc3BsYWNlZFBvc2l0aW9uID0gcG9zaXRpb24gKyBub3JtYWxpemUoIG5vcm1hbCApICogZGY7XFxufSBlbHNlIHtcXG4jaWZkZWYgVVNFX1NLSU5OSU5HXFxudmVjNCBza2luVmVydGV4ID0gdmVjNCggcG9zaXRpb24sIDEuMCApO1xcbnZlYzQgc2tpbm5lZCAgPSBib25lTWF0WCAqIHNraW5WZXJ0ZXggKiBza2luV2VpZ2h0Lng7XFxuc2tpbm5lZCBcXHQgICs9IGJvbmVNYXRZICogc2tpblZlcnRleCAqIHNraW5XZWlnaHQueTtcXG5kaXNwbGFjZWRQb3NpdGlvbiAgPSBza2lubmVkLnh5ejtcXG4jZWxzZVxcbmRpc3BsYWNlZFBvc2l0aW9uID0gcG9zaXRpb247XFxuI2VuZGlmXFxufVxcbiNlbHNlXFxuI2lmZGVmIFVTRV9TS0lOTklOR1xcbnZlYzQgc2tpblZlcnRleCA9IHZlYzQoIHBvc2l0aW9uLCAxLjAgKTtcXG52ZWM0IHNraW5uZWQgID0gYm9uZU1hdFggKiBza2luVmVydGV4ICogc2tpbldlaWdodC54O1xcbnNraW5uZWQgXFx0ICArPSBib25lTWF0WSAqIHNraW5WZXJ0ZXggKiBza2luV2VpZ2h0Lnk7XFxuZGlzcGxhY2VkUG9zaXRpb24gID0gc2tpbm5lZC54eXo7XFxuI2Vsc2VcXG5kaXNwbGFjZWRQb3NpdGlvbiA9IHBvc2l0aW9uO1xcbiNlbmRpZlxcbiNlbmRpZlxcbnZlYzQgbXZQb3NpdGlvbiA9IG1vZGVsVmlld01hdHJpeCAqIHZlYzQoIGRpc3BsYWNlZFBvc2l0aW9uLCAxLjAgKTtcXG52ZWM0IHdvcmxkUG9zaXRpb24gPSBtb2RlbE1hdHJpeCAqIHZlYzQoIGRpc3BsYWNlZFBvc2l0aW9uLCAxLjAgKTtcXG5nbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtdlBvc2l0aW9uO1xcbnZXb3JsZFBvc2l0aW9uID0gd29ybGRQb3NpdGlvbi54eXo7XFxudlZpZXdQb3NpdGlvbiA9IC1tdlBvc2l0aW9uLnh5ejtcXG4jaWZkZWYgVVNFX1NIQURPV01BUFxcbmZvciggaW50IGkgPSAwOyBpIDwgTUFYX1NIQURPV1M7IGkgKysgKSB7XFxudlNoYWRvd0Nvb3JkWyBpIF0gPSBzaGFkb3dNYXRyaXhbIGkgXSAqIHdvcmxkUG9zaXRpb247XFxufVxcbiNlbmRpZlxcbn1cIl0uam9pbihcIlxcblwiKX0sXG5jdWJlOnt1bmlmb3Jtczp7dEN1YmU6e3R5cGU6XCJ0XCIsdmFsdWU6bnVsbH0sdEZsaXA6e3R5cGU6XCJmXCIsdmFsdWU6LTF9fSx2ZXJ0ZXhTaGFkZXI6XCJ2YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XFxudm9pZCBtYWluKCkge1xcbnZlYzQgd29ybGRQb3NpdGlvbiA9IG1vZGVsTWF0cml4ICogdmVjNCggcG9zaXRpb24sIDEuMCApO1xcbnZXb3JsZFBvc2l0aW9uID0gd29ybGRQb3NpdGlvbi54eXo7XFxuZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbW9kZWxWaWV3TWF0cml4ICogdmVjNCggcG9zaXRpb24sIDEuMCApO1xcbn1cIixmcmFnbWVudFNoYWRlcjpcInVuaWZvcm0gc2FtcGxlckN1YmUgdEN1YmU7XFxudW5pZm9ybSBmbG9hdCB0RmxpcDtcXG52YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XFxudm9pZCBtYWluKCkge1xcbmdsX0ZyYWdDb2xvciA9IHRleHR1cmVDdWJlKCB0Q3ViZSwgdmVjMyggdEZsaXAgKiB2V29ybGRQb3NpdGlvbi54LCB2V29ybGRQb3NpdGlvbi55eiApICk7XFxufVwifSxcbmRlcHRoUkdCQTp7dW5pZm9ybXM6e30sdmVydGV4U2hhZGVyOltUSFJFRS5TaGFkZXJDaHVuay5tb3JwaHRhcmdldF9wYXJzX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5za2lubmluZ19wYXJzX3ZlcnRleCxcInZvaWQgbWFpbigpIHtcIixUSFJFRS5TaGFkZXJDaHVuay5za2luYmFzZV92ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsubW9ycGh0YXJnZXRfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLnNraW5uaW5nX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5kZWZhdWx0X3ZlcnRleCxcIn1cIl0uam9pbihcIlxcblwiKSxmcmFnbWVudFNoYWRlcjpcInZlYzQgcGFja19kZXB0aCggY29uc3QgaW4gZmxvYXQgZGVwdGggKSB7XFxuY29uc3QgdmVjNCBiaXRfc2hpZnQgPSB2ZWM0KCAyNTYuMCAqIDI1Ni4wICogMjU2LjAsIDI1Ni4wICogMjU2LjAsIDI1Ni4wLCAxLjAgKTtcXG5jb25zdCB2ZWM0IGJpdF9tYXNrICA9IHZlYzQoIDAuMCwgMS4wIC8gMjU2LjAsIDEuMCAvIDI1Ni4wLCAxLjAgLyAyNTYuMCApO1xcbnZlYzQgcmVzID0gZnJhY3QoIGRlcHRoICogYml0X3NoaWZ0ICk7XFxucmVzIC09IHJlcy54eHl6ICogYml0X21hc2s7XFxucmV0dXJuIHJlcztcXG59XFxudm9pZCBtYWluKCkge1xcbmdsX0ZyYWdEYXRhWyAwIF0gPSBwYWNrX2RlcHRoKCBnbF9GcmFnQ29vcmQueiApO1xcbn1cIn19O1RIUkVFLldlYkdMUmVuZGVyZXI9ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3ZhciBjPWEudmVydGljZXMubGVuZ3RoLGQ9Yi5tYXRlcmlhbDtpZihkLmF0dHJpYnV0ZXMpe3ZvaWQgMD09PWEuX193ZWJnbEN1c3RvbUF0dHJpYnV0ZXNMaXN0JiYoYS5fX3dlYmdsQ3VzdG9tQXR0cmlidXRlc0xpc3Q9W10pO2Zvcih2YXIgZSBpbiBkLmF0dHJpYnV0ZXMpe3ZhciBmPWQuYXR0cmlidXRlc1tlXTtpZighZi5fX3dlYmdsSW5pdGlhbGl6ZWR8fGYuY3JlYXRlVW5pcXVlQnVmZmVycyl7Zi5fX3dlYmdsSW5pdGlhbGl6ZWQ9ITA7dmFyIGg9MTtcInYyXCI9PT1mLnR5cGU/aD0yOlwidjNcIj09PWYudHlwZT9oPTM6XCJ2NFwiPT09Zi50eXBlP2g9NDpcImNcIj09PWYudHlwZSYmKGg9Myk7Zi5zaXplPWg7Zi5hcnJheT1uZXcgRmxvYXQzMkFycmF5KGMqaCk7Zi5idWZmZXI9ai5jcmVhdGVCdWZmZXIoKTtmLmJ1ZmZlci5iZWxvbmdzVG9BdHRyaWJ1dGU9ZTtmLm5lZWRzVXBkYXRlPSEwfWEuX193ZWJnbEN1c3RvbUF0dHJpYnV0ZXNMaXN0LnB1c2goZil9fX1cbmZ1bmN0aW9uIGMoYSxiKXt2YXIgYz1iLmdlb21ldHJ5LGg9YS5mYWNlczMsZz0zKmgubGVuZ3RoLGk9MSpoLmxlbmd0aCxrPTMqaC5sZW5ndGgsaD1kKGIsYSksbT1mKGgpLGw9ZShoKSxuPWgudmVydGV4Q29sb3JzP2gudmVydGV4Q29sb3JzOiExO2EuX192ZXJ0ZXhBcnJheT1uZXcgRmxvYXQzMkFycmF5KDMqZyk7bCYmKGEuX19ub3JtYWxBcnJheT1uZXcgRmxvYXQzMkFycmF5KDMqZykpO2MuaGFzVGFuZ2VudHMmJihhLl9fdGFuZ2VudEFycmF5PW5ldyBGbG9hdDMyQXJyYXkoNCpnKSk7biYmKGEuX19jb2xvckFycmF5PW5ldyBGbG9hdDMyQXJyYXkoMypnKSk7bSYmKDA8Yy5mYWNlVmVydGV4VXZzLmxlbmd0aCYmKGEuX191dkFycmF5PW5ldyBGbG9hdDMyQXJyYXkoMipnKSksMTxjLmZhY2VWZXJ0ZXhVdnMubGVuZ3RoJiYoYS5fX3V2MkFycmF5PW5ldyBGbG9hdDMyQXJyYXkoMipnKSkpO2IuZ2VvbWV0cnkuc2tpbldlaWdodHMubGVuZ3RoJiZiLmdlb21ldHJ5LnNraW5JbmRpY2VzLmxlbmd0aCYmXG4oYS5fX3NraW5JbmRleEFycmF5PW5ldyBGbG9hdDMyQXJyYXkoNCpnKSxhLl9fc2tpbldlaWdodEFycmF5PW5ldyBGbG9hdDMyQXJyYXkoNCpnKSk7YS5fX2ZhY2VBcnJheT1uZXcgVWludDE2QXJyYXkoMyppKTthLl9fbGluZUFycmF5PW5ldyBVaW50MTZBcnJheSgyKmspO2lmKGEubnVtTW9ycGhUYXJnZXRzKXthLl9fbW9ycGhUYXJnZXRzQXJyYXlzPVtdO2M9MDtmb3IobT1hLm51bU1vcnBoVGFyZ2V0cztjPG07YysrKWEuX19tb3JwaFRhcmdldHNBcnJheXMucHVzaChuZXcgRmxvYXQzMkFycmF5KDMqZykpfWlmKGEubnVtTW9ycGhOb3JtYWxzKXthLl9fbW9ycGhOb3JtYWxzQXJyYXlzPVtdO2M9MDtmb3IobT1hLm51bU1vcnBoTm9ybWFscztjPG07YysrKWEuX19tb3JwaE5vcm1hbHNBcnJheXMucHVzaChuZXcgRmxvYXQzMkFycmF5KDMqZykpfWEuX193ZWJnbEZhY2VDb3VudD0zKmk7YS5fX3dlYmdsTGluZUNvdW50PTIqaztpZihoLmF0dHJpYnV0ZXMpe3ZvaWQgMD09PWEuX193ZWJnbEN1c3RvbUF0dHJpYnV0ZXNMaXN0JiZcbihhLl9fd2ViZ2xDdXN0b21BdHRyaWJ1dGVzTGlzdD1bXSk7Zm9yKHZhciBwIGluIGguYXR0cmlidXRlcyl7dmFyIGk9aC5hdHRyaWJ1dGVzW3BdLGs9e30scTtmb3IocSBpbiBpKWtbcV09aVtxXTtpZighay5fX3dlYmdsSW5pdGlhbGl6ZWR8fGsuY3JlYXRlVW5pcXVlQnVmZmVycylrLl9fd2ViZ2xJbml0aWFsaXplZD0hMCxjPTEsXCJ2MlwiPT09ay50eXBlP2M9MjpcInYzXCI9PT1rLnR5cGU/Yz0zOlwidjRcIj09PWsudHlwZT9jPTQ6XCJjXCI9PT1rLnR5cGUmJihjPTMpLGsuc2l6ZT1jLGsuYXJyYXk9bmV3IEZsb2F0MzJBcnJheShnKmMpLGsuYnVmZmVyPWouY3JlYXRlQnVmZmVyKCksay5idWZmZXIuYmVsb25nc1RvQXR0cmlidXRlPXAsaS5uZWVkc1VwZGF0ZT0hMCxrLl9fb3JpZ2luYWw9aTthLl9fd2ViZ2xDdXN0b21BdHRyaWJ1dGVzTGlzdC5wdXNoKGspfX1hLl9faW5pdHRlZEFycmF5cz0hMH1mdW5jdGlvbiBkKGEsYil7cmV0dXJuIGEubWF0ZXJpYWwgaW5zdGFuY2VvZiBUSFJFRS5NZXNoRmFjZU1hdGVyaWFsP1xuYS5tYXRlcmlhbC5tYXRlcmlhbHNbYi5tYXRlcmlhbEluZGV4XTphLm1hdGVyaWFsfWZ1bmN0aW9uIGUoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCYmIWEuZW52TWFwfHxhIGluc3RhbmNlb2YgVEhSRUUuTWVzaERlcHRoTWF0ZXJpYWw/ITE6YSYmdm9pZCAwIT09YS5zaGFkaW5nJiZhLnNoYWRpbmc9PT1USFJFRS5TbW9vdGhTaGFkaW5nP1RIUkVFLlNtb290aFNoYWRpbmc6VEhSRUUuRmxhdFNoYWRpbmd9ZnVuY3Rpb24gZihhKXtyZXR1cm4gYS5tYXB8fGEubGlnaHRNYXB8fGEuYnVtcE1hcHx8YS5ub3JtYWxNYXB8fGEuc3BlY3VsYXJNYXB8fGEgaW5zdGFuY2VvZiBUSFJFRS5TaGFkZXJNYXRlcmlhbD8hMDohMX1mdW5jdGlvbiBoKGEpe3ZhW2FdfHwoai5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShhKSx2YVthXT0hMCl9ZnVuY3Rpb24gZygpe2Zvcih2YXIgYSBpbiB2YSl2YVthXSYmKGouZGlzYWJsZVZlcnRleEF0dHJpYkFycmF5KGEpLHZhW2FdPVxuITEpfWZ1bmN0aW9uIGkoYSxiKXtyZXR1cm4gYS56IT09Yi56P2Iuei1hLno6YS5pZC1iLmlkfWZ1bmN0aW9uIGsoYSxiKXtyZXR1cm4gYlswXS1hWzBdfWZ1bmN0aW9uIG0oYSxiLGMpe2lmKGEubGVuZ3RoKWZvcih2YXIgZD0wLGU9YS5sZW5ndGg7ZDxlO2QrKyllYT1CYT1udWxsLEFhPSQ9VT1ZPWthPUdhPWphPS0xLHRhPSEwLGFbZF0ucmVuZGVyKGIsYyxzYixwYiksZWE9QmE9bnVsbCxBYT0kPVU9WT1rYT1HYT1qYT0tMSx0YT0hMH1mdW5jdGlvbiBsKGEsYixjLGQsZSxmLGgsZyl7dmFyIGosaSxrLG07Yj8oaT1hLmxlbmd0aC0xLG09Yj0tMSk6KGk9MCxiPWEubGVuZ3RoLG09MSk7Zm9yKHZhciBsPWk7bCE9PWI7bCs9bSlpZihqPWFbbF0sai5yZW5kZXIpe2k9ai5vYmplY3Q7az1qLmJ1ZmZlcjtpZihnKWo9ZztlbHNle2o9altjXTtpZighailjb250aW51ZTtoJiZMLnNldEJsZW5kaW5nKGouYmxlbmRpbmcsai5ibGVuZEVxdWF0aW9uLGouYmxlbmRTcmMsai5ibGVuZERzdCk7XG5MLnNldERlcHRoVGVzdChqLmRlcHRoVGVzdCk7TC5zZXREZXB0aFdyaXRlKGouZGVwdGhXcml0ZSk7QShqLnBvbHlnb25PZmZzZXQsai5wb2x5Z29uT2Zmc2V0RmFjdG9yLGoucG9seWdvbk9mZnNldFVuaXRzKX1MLnNldE1hdGVyaWFsRmFjZXMoaik7ayBpbnN0YW5jZW9mIFRIUkVFLkJ1ZmZlckdlb21ldHJ5P0wucmVuZGVyQnVmZmVyRGlyZWN0KGQsZSxmLGosayxpKTpMLnJlbmRlckJ1ZmZlcihkLGUsZixqLGssaSl9fWZ1bmN0aW9uIHAoYSxiLGMsZCxlLGYsaCl7Zm9yKHZhciBnLGosaT0wLGs9YS5sZW5ndGg7aTxrO2krKylpZihnPWFbaV0saj1nLm9iamVjdCxqLnZpc2libGUpe2lmKGgpZz1oO2Vsc2V7Zz1nW2JdO2lmKCFnKWNvbnRpbnVlO2YmJkwuc2V0QmxlbmRpbmcoZy5ibGVuZGluZyxnLmJsZW5kRXF1YXRpb24sZy5ibGVuZFNyYyxnLmJsZW5kRHN0KTtMLnNldERlcHRoVGVzdChnLmRlcHRoVGVzdCk7TC5zZXREZXB0aFdyaXRlKGcuZGVwdGhXcml0ZSk7QShnLnBvbHlnb25PZmZzZXQsXG5nLnBvbHlnb25PZmZzZXRGYWN0b3IsZy5wb2x5Z29uT2Zmc2V0VW5pdHMpfUwucmVuZGVySW1tZWRpYXRlT2JqZWN0KGMsZCxlLGcsail9fWZ1bmN0aW9uIHQoYSxkKXt2YXIgZSxmLGgsZztpZih2b2lkIDA9PT1hLl9fd2ViZ2xJbml0JiYoYS5fX3dlYmdsSW5pdD0hMCxhLl9tb2RlbFZpZXdNYXRyaXg9bmV3IFRIUkVFLk1hdHJpeDQsYS5fbm9ybWFsTWF0cml4PW5ldyBUSFJFRS5NYXRyaXgzLHZvaWQgMCE9PWEuZ2VvbWV0cnkmJnZvaWQgMD09PWEuZ2VvbWV0cnkuX193ZWJnbEluaXQmJihhLmdlb21ldHJ5Ll9fd2ViZ2xJbml0PSEwLGEuZ2VvbWV0cnkuYWRkRXZlbnRMaXN0ZW5lcihcImRpc3Bvc2VcIixDYikpLGY9YS5nZW9tZXRyeSx2b2lkIDAhPT1mKSlpZihmIGluc3RhbmNlb2YgVEhSRUUuQnVmZmVyR2VvbWV0cnkpe3ZhciBpLGs7Zm9yKGkgaW4gZi5hdHRyaWJ1dGVzKWs9XCJpbmRleFwiPT09aT9qLkVMRU1FTlRfQVJSQVlfQlVGRkVSOmouQVJSQVlfQlVGRkVSLGc9Zi5hdHRyaWJ1dGVzW2ldLFxudm9pZCAwPT09Zy5udW1JdGVtcyYmKGcubnVtSXRlbXM9Zy5hcnJheS5sZW5ndGgpLGcuYnVmZmVyPWouY3JlYXRlQnVmZmVyKCksai5iaW5kQnVmZmVyKGssZy5idWZmZXIpLGouYnVmZmVyRGF0YShrLGcuYXJyYXksai5TVEFUSUNfRFJBVyl9ZWxzZSBpZihhIGluc3RhbmNlb2YgVEhSRUUuTWVzaCl7aD1hLm1hdGVyaWFsO2lmKHZvaWQgMD09PWYuZ2VvbWV0cnlHcm91cHMpe2k9Zjt2YXIgbSxsLG47az17fTt2YXIgcD1pLm1vcnBoVGFyZ2V0cy5sZW5ndGgscT1pLm1vcnBoTm9ybWFscy5sZW5ndGgsdD1oIGluc3RhbmNlb2YgVEhSRUUuTWVzaEZhY2VNYXRlcmlhbDtpLmdlb21ldHJ5R3JvdXBzPXt9O2g9MDtmb3IobT1pLmZhY2VzLmxlbmd0aDtoPG07aCsrKWw9aS5mYWNlc1toXSxsPXQ/bC5tYXRlcmlhbEluZGV4OjAsdm9pZCAwPT09a1tsXSYmKGtbbF09e2hhc2g6bCxjb3VudGVyOjB9KSxuPWtbbF0uaGFzaCtcIl9cIitrW2xdLmNvdW50ZXIsdm9pZCAwPT09aS5nZW9tZXRyeUdyb3Vwc1tuXSYmXG4oaS5nZW9tZXRyeUdyb3Vwc1tuXT17ZmFjZXMzOltdLG1hdGVyaWFsSW5kZXg6bCx2ZXJ0aWNlczowLG51bU1vcnBoVGFyZ2V0czpwLG51bU1vcnBoTm9ybWFsczpxfSksNjU1MzU8aS5nZW9tZXRyeUdyb3Vwc1tuXS52ZXJ0aWNlcyszJiYoa1tsXS5jb3VudGVyKz0xLG49a1tsXS5oYXNoK1wiX1wiK2tbbF0uY291bnRlcix2b2lkIDA9PT1pLmdlb21ldHJ5R3JvdXBzW25dJiYoaS5nZW9tZXRyeUdyb3Vwc1tuXT17ZmFjZXMzOltdLG1hdGVyaWFsSW5kZXg6bCx2ZXJ0aWNlczowLG51bU1vcnBoVGFyZ2V0czpwLG51bU1vcnBoTm9ybWFsczpxfSkpLGkuZ2VvbWV0cnlHcm91cHNbbl0uZmFjZXMzLnB1c2goaCksaS5nZW9tZXRyeUdyb3Vwc1tuXS52ZXJ0aWNlcys9MztpLmdlb21ldHJ5R3JvdXBzTGlzdD1bXTtmb3IoZyBpbiBpLmdlb21ldHJ5R3JvdXBzKWkuZ2VvbWV0cnlHcm91cHNbZ10uaWQ9VisrLGkuZ2VvbWV0cnlHcm91cHNMaXN0LnB1c2goaS5nZW9tZXRyeUdyb3Vwc1tnXSl9Zm9yKGUgaW4gZi5nZW9tZXRyeUdyb3VwcylpZihnPVxuZi5nZW9tZXRyeUdyb3Vwc1tlXSwhZy5fX3dlYmdsVmVydGV4QnVmZmVyKXtpPWc7aS5fX3dlYmdsVmVydGV4QnVmZmVyPWouY3JlYXRlQnVmZmVyKCk7aS5fX3dlYmdsTm9ybWFsQnVmZmVyPWouY3JlYXRlQnVmZmVyKCk7aS5fX3dlYmdsVGFuZ2VudEJ1ZmZlcj1qLmNyZWF0ZUJ1ZmZlcigpO2kuX193ZWJnbENvbG9yQnVmZmVyPWouY3JlYXRlQnVmZmVyKCk7aS5fX3dlYmdsVVZCdWZmZXI9ai5jcmVhdGVCdWZmZXIoKTtpLl9fd2ViZ2xVVjJCdWZmZXI9ai5jcmVhdGVCdWZmZXIoKTtpLl9fd2ViZ2xTa2luSW5kaWNlc0J1ZmZlcj1qLmNyZWF0ZUJ1ZmZlcigpO2kuX193ZWJnbFNraW5XZWlnaHRzQnVmZmVyPWouY3JlYXRlQnVmZmVyKCk7aS5fX3dlYmdsRmFjZUJ1ZmZlcj1qLmNyZWF0ZUJ1ZmZlcigpO2kuX193ZWJnbExpbmVCdWZmZXI9ai5jcmVhdGVCdWZmZXIoKTtwPWs9dm9pZCAwO2lmKGkubnVtTW9ycGhUYXJnZXRzKXtpLl9fd2ViZ2xNb3JwaFRhcmdldHNCdWZmZXJzPVtdO1xuaz0wO2ZvcihwPWkubnVtTW9ycGhUYXJnZXRzO2s8cDtrKyspaS5fX3dlYmdsTW9ycGhUYXJnZXRzQnVmZmVycy5wdXNoKGouY3JlYXRlQnVmZmVyKCkpfWlmKGkubnVtTW9ycGhOb3JtYWxzKXtpLl9fd2ViZ2xNb3JwaE5vcm1hbHNCdWZmZXJzPVtdO2s9MDtmb3IocD1pLm51bU1vcnBoTm9ybWFscztrPHA7aysrKWkuX193ZWJnbE1vcnBoTm9ybWFsc0J1ZmZlcnMucHVzaChqLmNyZWF0ZUJ1ZmZlcigpKX1MLmluZm8ubWVtb3J5Lmdlb21ldHJpZXMrKztjKGcsYSk7Zi52ZXJ0aWNlc05lZWRVcGRhdGU9ITA7Zi5tb3JwaFRhcmdldHNOZWVkVXBkYXRlPSEwO2YuZWxlbWVudHNOZWVkVXBkYXRlPSEwO2YudXZzTmVlZFVwZGF0ZT0hMDtmLm5vcm1hbHNOZWVkVXBkYXRlPSEwO2YudGFuZ2VudHNOZWVkVXBkYXRlPSEwO2YuY29sb3JzTmVlZFVwZGF0ZT0hMH19ZWxzZSBhIGluc3RhbmNlb2YgVEhSRUUuTGluZT9mLl9fd2ViZ2xWZXJ0ZXhCdWZmZXJ8fChnPWYsZy5fX3dlYmdsVmVydGV4QnVmZmVyPVxuai5jcmVhdGVCdWZmZXIoKSxnLl9fd2ViZ2xDb2xvckJ1ZmZlcj1qLmNyZWF0ZUJ1ZmZlcigpLGcuX193ZWJnbExpbmVEaXN0YW5jZUJ1ZmZlcj1qLmNyZWF0ZUJ1ZmZlcigpLEwuaW5mby5tZW1vcnkuZ2VvbWV0cmllcysrLGc9ZixpPWcudmVydGljZXMubGVuZ3RoLGcuX192ZXJ0ZXhBcnJheT1uZXcgRmxvYXQzMkFycmF5KDMqaSksZy5fX2NvbG9yQXJyYXk9bmV3IEZsb2F0MzJBcnJheSgzKmkpLGcuX19saW5lRGlzdGFuY2VBcnJheT1uZXcgRmxvYXQzMkFycmF5KDEqaSksZy5fX3dlYmdsTGluZUNvdW50PWksYihnLGEpLGYudmVydGljZXNOZWVkVXBkYXRlPSEwLGYuY29sb3JzTmVlZFVwZGF0ZT0hMCxmLmxpbmVEaXN0YW5jZXNOZWVkVXBkYXRlPSEwKTphIGluc3RhbmNlb2YgVEhSRUUuUGFydGljbGVTeXN0ZW0mJiFmLl9fd2ViZ2xWZXJ0ZXhCdWZmZXImJihnPWYsZy5fX3dlYmdsVmVydGV4QnVmZmVyPWouY3JlYXRlQnVmZmVyKCksZy5fX3dlYmdsQ29sb3JCdWZmZXI9ai5jcmVhdGVCdWZmZXIoKSxcbkwuaW5mby5tZW1vcnkuZ2VvbWV0cmllcysrLGc9ZixpPWcudmVydGljZXMubGVuZ3RoLGcuX192ZXJ0ZXhBcnJheT1uZXcgRmxvYXQzMkFycmF5KDMqaSksZy5fX2NvbG9yQXJyYXk9bmV3IEZsb2F0MzJBcnJheSgzKmkpLGcuX19zb3J0QXJyYXk9W10sZy5fX3dlYmdsUGFydGljbGVDb3VudD1pLGIoZyxhKSxmLnZlcnRpY2VzTmVlZFVwZGF0ZT0hMCxmLmNvbG9yc05lZWRVcGRhdGU9ITApO2lmKHZvaWQgMD09PWEuX193ZWJnbEFjdGl2ZSl7aWYoYSBpbnN0YW5jZW9mIFRIUkVFLk1lc2gpaWYoZj1hLmdlb21ldHJ5LGYgaW5zdGFuY2VvZiBUSFJFRS5CdWZmZXJHZW9tZXRyeSlzKGQuX193ZWJnbE9iamVjdHMsZixhKTtlbHNle2lmKGYgaW5zdGFuY2VvZiBUSFJFRS5HZW9tZXRyeSlmb3IoZSBpbiBmLmdlb21ldHJ5R3JvdXBzKWc9Zi5nZW9tZXRyeUdyb3Vwc1tlXSxzKGQuX193ZWJnbE9iamVjdHMsZyxhKX1lbHNlIGEgaW5zdGFuY2VvZiBUSFJFRS5MaW5lfHxhIGluc3RhbmNlb2ZcblRIUkVFLlBhcnRpY2xlU3lzdGVtPyhmPWEuZ2VvbWV0cnkscyhkLl9fd2ViZ2xPYmplY3RzLGYsYSkpOmEgaW5zdGFuY2VvZiBUSFJFRS5JbW1lZGlhdGVSZW5kZXJPYmplY3R8fGEuaW1tZWRpYXRlUmVuZGVyQ2FsbGJhY2s/ZC5fX3dlYmdsT2JqZWN0c0ltbWVkaWF0ZS5wdXNoKHtpZDpudWxsLG9iamVjdDphLG9wYXF1ZTpudWxsLHRyYW5zcGFyZW50Om51bGwsejowfSk6YSBpbnN0YW5jZW9mIFRIUkVFLlNwcml0ZT9kLl9fd2ViZ2xTcHJpdGVzLnB1c2goYSk6YSBpbnN0YW5jZW9mIFRIUkVFLkxlbnNGbGFyZSYmZC5fX3dlYmdsRmxhcmVzLnB1c2goYSk7YS5fX3dlYmdsQWN0aXZlPSEwfX1mdW5jdGlvbiBzKGEsYixjKXthLnB1c2goe2lkOm51bGwsYnVmZmVyOmIsb2JqZWN0OmMsb3BhcXVlOm51bGwsdHJhbnNwYXJlbnQ6bnVsbCx6OjB9KX1mdW5jdGlvbiBxKGEpe2Zvcih2YXIgYiBpbiBhLmF0dHJpYnV0ZXMpaWYoYS5hdHRyaWJ1dGVzW2JdLm5lZWRzVXBkYXRlKXJldHVybiEwO1xucmV0dXJuITF9ZnVuY3Rpb24gbihhKXtmb3IodmFyIGIgaW4gYS5hdHRyaWJ1dGVzKWEuYXR0cmlidXRlc1tiXS5uZWVkc1VwZGF0ZT0hMX1mdW5jdGlvbiB1KGEsYil7YSBpbnN0YW5jZW9mIFRIUkVFLk1lc2h8fGEgaW5zdGFuY2VvZiBUSFJFRS5QYXJ0aWNsZVN5c3RlbXx8YSBpbnN0YW5jZW9mIFRIUkVFLkxpbmU/cihiLl9fd2ViZ2xPYmplY3RzLGEpOmEgaW5zdGFuY2VvZiBUSFJFRS5TcHJpdGU/dihiLl9fd2ViZ2xTcHJpdGVzLGEpOmEgaW5zdGFuY2VvZiBUSFJFRS5MZW5zRmxhcmU/dihiLl9fd2ViZ2xGbGFyZXMsYSk6KGEgaW5zdGFuY2VvZiBUSFJFRS5JbW1lZGlhdGVSZW5kZXJPYmplY3R8fGEuaW1tZWRpYXRlUmVuZGVyQ2FsbGJhY2spJiZyKGIuX193ZWJnbE9iamVjdHNJbW1lZGlhdGUsYSk7ZGVsZXRlIGEuX193ZWJnbEFjdGl2ZX1mdW5jdGlvbiByKGEsYil7Zm9yKHZhciBjPWEubGVuZ3RoLTE7MDw9YztjLS0pYVtjXS5vYmplY3Q9PT1iJiZhLnNwbGljZShjLDEpfVxuZnVuY3Rpb24gdihhLGIpe2Zvcih2YXIgYz1hLmxlbmd0aC0xOzA8PWM7Yy0tKWFbY109PT1iJiZhLnNwbGljZShjLDEpfWZ1bmN0aW9uIHooYSxiLGMsZCxlKXtQPTA7ZC5uZWVkc1VwZGF0ZSYmKGQucHJvZ3JhbSYmR2IoZCksTC5pbml0TWF0ZXJpYWwoZCxiLGMsZSksZC5uZWVkc1VwZGF0ZT0hMSk7ZC5tb3JwaFRhcmdldHMmJiFlLl9fd2ViZ2xNb3JwaFRhcmdldEluZmx1ZW5jZXMmJihlLl9fd2ViZ2xNb3JwaFRhcmdldEluZmx1ZW5jZXM9bmV3IEZsb2F0MzJBcnJheShMLm1heE1vcnBoVGFyZ2V0cykpO3ZhciBmPSExLGg9ZC5wcm9ncmFtLGc9aC51bmlmb3JtcyxpPWQudW5pZm9ybXM7aCE9PUJhJiYoai51c2VQcm9ncmFtKGgpLEJhPWgsZj0hMCk7ZC5pZCE9PUFhJiYoQWE9ZC5pZCxmPSEwKTtpZihmfHxhIT09ZWEpai51bmlmb3JtTWF0cml4NGZ2KGcucHJvamVjdGlvbk1hdHJpeCwhMSxhLnByb2plY3Rpb25NYXRyaXguZWxlbWVudHMpLGEhPT1lYSYmKGVhPWEpO2lmKGQuc2tpbm5pbmcpaWYoeWImJlxuZS51c2VWZXJ0ZXhUZXh0dXJlKXtpZihudWxsIT09Zy5ib25lVGV4dHVyZSl7dmFyIGs9RygpO2oudW5pZm9ybTFpKGcuYm9uZVRleHR1cmUsayk7TC5zZXRUZXh0dXJlKGUuYm9uZVRleHR1cmUsayl9bnVsbCE9PWcuYm9uZVRleHR1cmVXaWR0aCYmai51bmlmb3JtMWkoZy5ib25lVGV4dHVyZVdpZHRoLGUuYm9uZVRleHR1cmVXaWR0aCk7bnVsbCE9PWcuYm9uZVRleHR1cmVIZWlnaHQmJmoudW5pZm9ybTFpKGcuYm9uZVRleHR1cmVIZWlnaHQsZS5ib25lVGV4dHVyZUhlaWdodCl9ZWxzZSBudWxsIT09Zy5ib25lR2xvYmFsTWF0cmljZXMmJmoudW5pZm9ybU1hdHJpeDRmdihnLmJvbmVHbG9iYWxNYXRyaWNlcywhMSxlLmJvbmVNYXRyaWNlcyk7aWYoZil7YyYmZC5mb2cmJihpLmZvZ0NvbG9yLnZhbHVlPWMuY29sb3IsYyBpbnN0YW5jZW9mIFRIUkVFLkZvZz8oaS5mb2dOZWFyLnZhbHVlPWMubmVhcixpLmZvZ0Zhci52YWx1ZT1jLmZhcik6YyBpbnN0YW5jZW9mIFRIUkVFLkZvZ0V4cDImJlxuKGkuZm9nRGVuc2l0eS52YWx1ZT1jLmRlbnNpdHkpKTtpZihkIGluc3RhbmNlb2YgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWx8fGQgaW5zdGFuY2VvZiBUSFJFRS5NZXNoTGFtYmVydE1hdGVyaWFsfHxkLmxpZ2h0cyl7aWYodGEpe2Zvcih2YXIgbSxsPWs9MCxuPTAscCxxLHQscj1QYSxzPXIuZGlyZWN0aW9uYWwuY29sb3JzLHU9ci5kaXJlY3Rpb25hbC5wb3NpdGlvbnMsdj1yLnBvaW50LmNvbG9ycyx6PXIucG9pbnQucG9zaXRpb25zLHg9ci5wb2ludC5kaXN0YW5jZXMsQT1yLnNwb3QuY29sb3JzLEU9ci5zcG90LnBvc2l0aW9ucyxEPXIuc3BvdC5kaXN0YW5jZXMsSz1yLnNwb3QuZGlyZWN0aW9ucyxPPXIuc3BvdC5hbmdsZXNDb3MsQz1yLnNwb3QuZXhwb25lbnRzLEo9ci5oZW1pLnNreUNvbG9ycyxWPXIuaGVtaS5ncm91bmRDb2xvcnMsTT1yLmhlbWkucG9zaXRpb25zLFE9MCxVPTAsWT0wLHphPTAsJD0wLGRjPTAsWD0wLFc9MCxSPW09MCxjPXQ9Uj0wLGY9Yi5sZW5ndGg7YzxmO2MrKyltPVxuYltjXSxtLm9ubHlTaGFkb3d8fChwPW0uY29sb3IscT1tLmludGVuc2l0eSx0PW0uZGlzdGFuY2UsbSBpbnN0YW5jZW9mIFRIUkVFLkFtYmllbnRMaWdodD9tLnZpc2libGUmJihMLmdhbW1hSW5wdXQ/KGsrPXAucipwLnIsbCs9cC5nKnAuZyxuKz1wLmIqcC5iKTooays9cC5yLGwrPXAuZyxuKz1wLmIpKTptIGluc3RhbmNlb2YgVEhSRUUuRGlyZWN0aW9uYWxMaWdodD8oJCs9MSxtLnZpc2libGUmJihmYS5zZXRGcm9tTWF0cml4UG9zaXRpb24obS5tYXRyaXhXb3JsZCkscmEuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKG0udGFyZ2V0Lm1hdHJpeFdvcmxkKSxmYS5zdWIocmEpLGZhLm5vcm1hbGl6ZSgpLDA9PT1mYS54JiYwPT09ZmEueSYmMD09PWZhLnp8fChtPTMqUSx1W21dPWZhLngsdVttKzFdPWZhLnksdVttKzJdPWZhLnosTC5nYW1tYUlucHV0P3cocyxtLHAscSpxKTp5KHMsbSxwLHEpLFErPTEpKSk6bSBpbnN0YW5jZW9mIFRIUkVFLlBvaW50TGlnaHQ/KGRjKz0xLG0udmlzaWJsZSYmXG4oUj0zKlUsTC5nYW1tYUlucHV0P3codixSLHAscSpxKTp5KHYsUixwLHEpLHJhLnNldEZyb21NYXRyaXhQb3NpdGlvbihtLm1hdHJpeFdvcmxkKSx6W1JdPXJhLngseltSKzFdPXJhLnkseltSKzJdPXJhLnoseFtVXT10LFUrPTEpKTptIGluc3RhbmNlb2YgVEhSRUUuU3BvdExpZ2h0PyhYKz0xLG0udmlzaWJsZSYmKFI9MypZLEwuZ2FtbWFJbnB1dD93KEEsUixwLHEqcSk6eShBLFIscCxxKSxyYS5zZXRGcm9tTWF0cml4UG9zaXRpb24obS5tYXRyaXhXb3JsZCksRVtSXT1yYS54LEVbUisxXT1yYS55LEVbUisyXT1yYS56LERbWV09dCxmYS5jb3B5KHJhKSxyYS5zZXRGcm9tTWF0cml4UG9zaXRpb24obS50YXJnZXQubWF0cml4V29ybGQpLGZhLnN1YihyYSksZmEubm9ybWFsaXplKCksS1tSXT1mYS54LEtbUisxXT1mYS55LEtbUisyXT1mYS56LE9bWV09TWF0aC5jb3MobS5hbmdsZSksQ1tZXT1tLmV4cG9uZW50LFkrPTEpKTptIGluc3RhbmNlb2YgVEhSRUUuSGVtaXNwaGVyZUxpZ2h0JiZcbihXKz0xLG0udmlzaWJsZSYmKGZhLnNldEZyb21NYXRyaXhQb3NpdGlvbihtLm1hdHJpeFdvcmxkKSxmYS5ub3JtYWxpemUoKSwwPT09ZmEueCYmMD09PWZhLnkmJjA9PT1mYS56fHwodD0zKnphLE1bdF09ZmEueCxNW3QrMV09ZmEueSxNW3QrMl09ZmEueixwPW0uY29sb3IsbT1tLmdyb3VuZENvbG9yLEwuZ2FtbWFJbnB1dD8ocSo9cSx3KEosdCxwLHEpLHcoVix0LG0scSkpOih5KEosdCxwLHEpLHkoVix0LG0scSkpLHphKz0xKSkpKTtjPTMqUTtmb3IoZj1NYXRoLm1heChzLmxlbmd0aCwzKiQpO2M8ZjtjKyspc1tjXT0wO2M9MypVO2ZvcihmPU1hdGgubWF4KHYubGVuZ3RoLDMqZGMpO2M8ZjtjKyspdltjXT0wO2M9MypZO2ZvcihmPU1hdGgubWF4KEEubGVuZ3RoLDMqWCk7YzxmO2MrKylBW2NdPTA7Yz0zKnphO2ZvcihmPU1hdGgubWF4KEoubGVuZ3RoLDMqVyk7YzxmO2MrKylKW2NdPTA7Yz0zKnphO2ZvcihmPU1hdGgubWF4KFYubGVuZ3RoLDMqVyk7YzxmO2MrKylWW2NdPTA7ci5kaXJlY3Rpb25hbC5sZW5ndGg9XG5RO3IucG9pbnQubGVuZ3RoPVU7ci5zcG90Lmxlbmd0aD1ZO3IuaGVtaS5sZW5ndGg9emE7ci5hbWJpZW50WzBdPWs7ci5hbWJpZW50WzFdPWw7ci5hbWJpZW50WzJdPW47dGE9ITF9Yz1QYTtpLmFtYmllbnRMaWdodENvbG9yLnZhbHVlPWMuYW1iaWVudDtpLmRpcmVjdGlvbmFsTGlnaHRDb2xvci52YWx1ZT1jLmRpcmVjdGlvbmFsLmNvbG9ycztpLmRpcmVjdGlvbmFsTGlnaHREaXJlY3Rpb24udmFsdWU9Yy5kaXJlY3Rpb25hbC5wb3NpdGlvbnM7aS5wb2ludExpZ2h0Q29sb3IudmFsdWU9Yy5wb2ludC5jb2xvcnM7aS5wb2ludExpZ2h0UG9zaXRpb24udmFsdWU9Yy5wb2ludC5wb3NpdGlvbnM7aS5wb2ludExpZ2h0RGlzdGFuY2UudmFsdWU9Yy5wb2ludC5kaXN0YW5jZXM7aS5zcG90TGlnaHRDb2xvci52YWx1ZT1jLnNwb3QuY29sb3JzO2kuc3BvdExpZ2h0UG9zaXRpb24udmFsdWU9Yy5zcG90LnBvc2l0aW9ucztpLnNwb3RMaWdodERpc3RhbmNlLnZhbHVlPWMuc3BvdC5kaXN0YW5jZXM7XG5pLnNwb3RMaWdodERpcmVjdGlvbi52YWx1ZT1jLnNwb3QuZGlyZWN0aW9ucztpLnNwb3RMaWdodEFuZ2xlQ29zLnZhbHVlPWMuc3BvdC5hbmdsZXNDb3M7aS5zcG90TGlnaHRFeHBvbmVudC52YWx1ZT1jLnNwb3QuZXhwb25lbnRzO2kuaGVtaXNwaGVyZUxpZ2h0U2t5Q29sb3IudmFsdWU9Yy5oZW1pLnNreUNvbG9ycztpLmhlbWlzcGhlcmVMaWdodEdyb3VuZENvbG9yLnZhbHVlPWMuaGVtaS5ncm91bmRDb2xvcnM7aS5oZW1pc3BoZXJlTGlnaHREaXJlY3Rpb24udmFsdWU9Yy5oZW1pLnBvc2l0aW9uc31pZihkIGluc3RhbmNlb2YgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWx8fGQgaW5zdGFuY2VvZiBUSFJFRS5NZXNoTGFtYmVydE1hdGVyaWFsfHxkIGluc3RhbmNlb2YgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwpe2kub3BhY2l0eS52YWx1ZT1kLm9wYWNpdHk7TC5nYW1tYUlucHV0P2kuZGlmZnVzZS52YWx1ZS5jb3B5R2FtbWFUb0xpbmVhcihkLmNvbG9yKTppLmRpZmZ1c2UudmFsdWU9XG5kLmNvbG9yO2kubWFwLnZhbHVlPWQubWFwO2kubGlnaHRNYXAudmFsdWU9ZC5saWdodE1hcDtpLnNwZWN1bGFyTWFwLnZhbHVlPWQuc3BlY3VsYXJNYXA7ZC5idW1wTWFwJiYoaS5idW1wTWFwLnZhbHVlPWQuYnVtcE1hcCxpLmJ1bXBTY2FsZS52YWx1ZT1kLmJ1bXBTY2FsZSk7ZC5ub3JtYWxNYXAmJihpLm5vcm1hbE1hcC52YWx1ZT1kLm5vcm1hbE1hcCxpLm5vcm1hbFNjYWxlLnZhbHVlLmNvcHkoZC5ub3JtYWxTY2FsZSkpO3ZhciBiYTtkLm1hcD9iYT1kLm1hcDpkLnNwZWN1bGFyTWFwP2JhPWQuc3BlY3VsYXJNYXA6ZC5ub3JtYWxNYXA/YmE9ZC5ub3JtYWxNYXA6ZC5idW1wTWFwJiYoYmE9ZC5idW1wTWFwKTt2b2lkIDAhPT1iYSYmKGM9YmEub2Zmc2V0LGJhPWJhLnJlcGVhdCxpLm9mZnNldFJlcGVhdC52YWx1ZS5zZXQoYy54LGMueSxiYS54LGJhLnkpKTtpLmVudk1hcC52YWx1ZT1kLmVudk1hcDtpLmZsaXBFbnZNYXAudmFsdWU9ZC5lbnZNYXAgaW5zdGFuY2VvZiBUSFJFRS5XZWJHTFJlbmRlclRhcmdldEN1YmU/XG4xOi0xO2kucmVmbGVjdGl2aXR5LnZhbHVlPWQucmVmbGVjdGl2aXR5O2kucmVmcmFjdGlvblJhdGlvLnZhbHVlPWQucmVmcmFjdGlvblJhdGlvO2kuY29tYmluZS52YWx1ZT1kLmNvbWJpbmU7aS51c2VSZWZyYWN0LnZhbHVlPWQuZW52TWFwJiZkLmVudk1hcC5tYXBwaW5nIGluc3RhbmNlb2YgVEhSRUUuQ3ViZVJlZnJhY3Rpb25NYXBwaW5nfWQgaW5zdGFuY2VvZiBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbD8oaS5kaWZmdXNlLnZhbHVlPWQuY29sb3IsaS5vcGFjaXR5LnZhbHVlPWQub3BhY2l0eSk6ZCBpbnN0YW5jZW9mIFRIUkVFLkxpbmVEYXNoZWRNYXRlcmlhbD8oaS5kaWZmdXNlLnZhbHVlPWQuY29sb3IsaS5vcGFjaXR5LnZhbHVlPWQub3BhY2l0eSxpLmRhc2hTaXplLnZhbHVlPWQuZGFzaFNpemUsaS50b3RhbFNpemUudmFsdWU9ZC5kYXNoU2l6ZStkLmdhcFNpemUsaS5zY2FsZS52YWx1ZT1kLnNjYWxlKTpkIGluc3RhbmNlb2YgVEhSRUUuUGFydGljbGVTeXN0ZW1NYXRlcmlhbD9cbihpLnBzQ29sb3IudmFsdWU9ZC5jb2xvcixpLm9wYWNpdHkudmFsdWU9ZC5vcGFjaXR5LGkuc2l6ZS52YWx1ZT1kLnNpemUsaS5zY2FsZS52YWx1ZT1CLmhlaWdodC8yLGkubWFwLnZhbHVlPWQubWFwKTpkIGluc3RhbmNlb2YgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWw/KGkuc2hpbmluZXNzLnZhbHVlPWQuc2hpbmluZXNzLEwuZ2FtbWFJbnB1dD8oaS5hbWJpZW50LnZhbHVlLmNvcHlHYW1tYVRvTGluZWFyKGQuYW1iaWVudCksaS5lbWlzc2l2ZS52YWx1ZS5jb3B5R2FtbWFUb0xpbmVhcihkLmVtaXNzaXZlKSxpLnNwZWN1bGFyLnZhbHVlLmNvcHlHYW1tYVRvTGluZWFyKGQuc3BlY3VsYXIpKTooaS5hbWJpZW50LnZhbHVlPWQuYW1iaWVudCxpLmVtaXNzaXZlLnZhbHVlPWQuZW1pc3NpdmUsaS5zcGVjdWxhci52YWx1ZT1kLnNwZWN1bGFyKSxkLndyYXBBcm91bmQmJmkud3JhcFJHQi52YWx1ZS5jb3B5KGQud3JhcFJHQikpOmQgaW5zdGFuY2VvZiBUSFJFRS5NZXNoTGFtYmVydE1hdGVyaWFsP1xuKEwuZ2FtbWFJbnB1dD8oaS5hbWJpZW50LnZhbHVlLmNvcHlHYW1tYVRvTGluZWFyKGQuYW1iaWVudCksaS5lbWlzc2l2ZS52YWx1ZS5jb3B5R2FtbWFUb0xpbmVhcihkLmVtaXNzaXZlKSk6KGkuYW1iaWVudC52YWx1ZT1kLmFtYmllbnQsaS5lbWlzc2l2ZS52YWx1ZT1kLmVtaXNzaXZlKSxkLndyYXBBcm91bmQmJmkud3JhcFJHQi52YWx1ZS5jb3B5KGQud3JhcFJHQikpOmQgaW5zdGFuY2VvZiBUSFJFRS5NZXNoRGVwdGhNYXRlcmlhbD8oaS5tTmVhci52YWx1ZT1hLm5lYXIsaS5tRmFyLnZhbHVlPWEuZmFyLGkub3BhY2l0eS52YWx1ZT1kLm9wYWNpdHkpOmQgaW5zdGFuY2VvZiBUSFJFRS5NZXNoTm9ybWFsTWF0ZXJpYWwmJihpLm9wYWNpdHkudmFsdWU9ZC5vcGFjaXR5KTtpZihlLnJlY2VpdmVTaGFkb3cmJiFkLl9zaGFkb3dQYXNzJiZpLnNoYWRvd01hdHJpeCl7Yz1iYT0wO2ZvcihmPWIubGVuZ3RoO2M8ZjtjKyspaWYoaz1iW2NdLGsuY2FzdFNoYWRvdyYmKGsgaW5zdGFuY2VvZlxuVEhSRUUuU3BvdExpZ2h0fHxrIGluc3RhbmNlb2YgVEhSRUUuRGlyZWN0aW9uYWxMaWdodCYmIWsuc2hhZG93Q2FzY2FkZSkpaS5zaGFkb3dNYXAudmFsdWVbYmFdPWsuc2hhZG93TWFwLGkuc2hhZG93TWFwU2l6ZS52YWx1ZVtiYV09ay5zaGFkb3dNYXBTaXplLGkuc2hhZG93TWF0cml4LnZhbHVlW2JhXT1rLnNoYWRvd01hdHJpeCxpLnNoYWRvd0RhcmtuZXNzLnZhbHVlW2JhXT1rLnNoYWRvd0RhcmtuZXNzLGkuc2hhZG93Qmlhcy52YWx1ZVtiYV09ay5zaGFkb3dCaWFzLGJhKyt9Yj1kLnVuaWZvcm1zTGlzdDtpPTA7Zm9yKGJhPWIubGVuZ3RoO2k8YmE7aSsrKWlmKGY9aC51bmlmb3Jtc1tiW2ldWzFdXSlpZihjPWJbaV1bMF0sbD1jLnR5cGUsaz1jLnZhbHVlLFwiaVwiPT09bClqLnVuaWZvcm0xaShmLGspO2Vsc2UgaWYoXCJmXCI9PT1sKWoudW5pZm9ybTFmKGYsayk7ZWxzZSBpZihcInYyXCI9PT1sKWoudW5pZm9ybTJmKGYsay54LGsueSk7ZWxzZSBpZihcInYzXCI9PT1sKWoudW5pZm9ybTNmKGYsXG5rLngsay55LGsueik7ZWxzZSBpZihcInY0XCI9PT1sKWoudW5pZm9ybTRmKGYsay54LGsueSxrLnosay53KTtlbHNlIGlmKFwiY1wiPT09bClqLnVuaWZvcm0zZihmLGsucixrLmcsay5iKTtlbHNlIGlmKFwiaXYxXCI9PT1sKWoudW5pZm9ybTFpdihmLGspO2Vsc2UgaWYoXCJpdlwiPT09bClqLnVuaWZvcm0zaXYoZixrKTtlbHNlIGlmKFwiZnYxXCI9PT1sKWoudW5pZm9ybTFmdihmLGspO2Vsc2UgaWYoXCJmdlwiPT09bClqLnVuaWZvcm0zZnYoZixrKTtlbHNlIGlmKFwidjJ2XCI9PT1sKXt2b2lkIDA9PT1jLl9hcnJheSYmKGMuX2FycmF5PW5ldyBGbG9hdDMyQXJyYXkoMiprLmxlbmd0aCkpO2w9MDtmb3Iobj1rLmxlbmd0aDtsPG47bCsrKXI9MipsLGMuX2FycmF5W3JdPWtbbF0ueCxjLl9hcnJheVtyKzFdPWtbbF0ueTtqLnVuaWZvcm0yZnYoZixjLl9hcnJheSl9ZWxzZSBpZihcInYzdlwiPT09bCl7dm9pZCAwPT09Yy5fYXJyYXkmJihjLl9hcnJheT1uZXcgRmxvYXQzMkFycmF5KDMqay5sZW5ndGgpKTtsPVxuMDtmb3Iobj1rLmxlbmd0aDtsPG47bCsrKXI9MypsLGMuX2FycmF5W3JdPWtbbF0ueCxjLl9hcnJheVtyKzFdPWtbbF0ueSxjLl9hcnJheVtyKzJdPWtbbF0uejtqLnVuaWZvcm0zZnYoZixjLl9hcnJheSl9ZWxzZSBpZihcInY0dlwiPT09bCl7dm9pZCAwPT09Yy5fYXJyYXkmJihjLl9hcnJheT1uZXcgRmxvYXQzMkFycmF5KDQqay5sZW5ndGgpKTtsPTA7Zm9yKG49ay5sZW5ndGg7bDxuO2wrKylyPTQqbCxjLl9hcnJheVtyXT1rW2xdLngsYy5fYXJyYXlbcisxXT1rW2xdLnksYy5fYXJyYXlbcisyXT1rW2xdLnosYy5fYXJyYXlbciszXT1rW2xdLnc7ai51bmlmb3JtNGZ2KGYsYy5fYXJyYXkpfWVsc2UgaWYoXCJtNFwiPT09bCl2b2lkIDA9PT1jLl9hcnJheSYmKGMuX2FycmF5PW5ldyBGbG9hdDMyQXJyYXkoMTYpKSxrLmZsYXR0ZW5Ub0FycmF5KGMuX2FycmF5KSxqLnVuaWZvcm1NYXRyaXg0ZnYoZiwhMSxjLl9hcnJheSk7ZWxzZSBpZihcIm00dlwiPT09bCl7dm9pZCAwPT09Yy5fYXJyYXkmJlxuKGMuX2FycmF5PW5ldyBGbG9hdDMyQXJyYXkoMTYqay5sZW5ndGgpKTtsPTA7Zm9yKG49ay5sZW5ndGg7bDxuO2wrKylrW2xdLmZsYXR0ZW5Ub0FycmF5T2Zmc2V0KGMuX2FycmF5LDE2KmwpO2oudW5pZm9ybU1hdHJpeDRmdihmLCExLGMuX2FycmF5KX1lbHNlIGlmKFwidFwiPT09bCl7aWYocj1rLGs9RygpLGoudW5pZm9ybTFpKGYsaykscilpZihyLmltYWdlIGluc3RhbmNlb2YgQXJyYXkmJjY9PT1yLmltYWdlLmxlbmd0aCl7aWYoYz1yLGY9ayw2PT09Yy5pbWFnZS5sZW5ndGgpaWYoYy5uZWVkc1VwZGF0ZSl7Yy5pbWFnZS5fX3dlYmdsVGV4dHVyZUN1YmV8fChjLmFkZEV2ZW50TGlzdGVuZXIoXCJkaXNwb3NlXCIsRGIpLGMuaW1hZ2UuX193ZWJnbFRleHR1cmVDdWJlPWouY3JlYXRlVGV4dHVyZSgpLEwuaW5mby5tZW1vcnkudGV4dHVyZXMrKyk7ai5hY3RpdmVUZXh0dXJlKGouVEVYVFVSRTArZik7ai5iaW5kVGV4dHVyZShqLlRFWFRVUkVfQ1VCRV9NQVAsYy5pbWFnZS5fX3dlYmdsVGV4dHVyZUN1YmUpO1xuai5waXhlbFN0b3JlaShqLlVOUEFDS19GTElQX1lfV0VCR0wsYy5mbGlwWSk7Zj1jIGluc3RhbmNlb2YgVEhSRUUuQ29tcHJlc3NlZFRleHR1cmU7az1bXTtmb3IobD0wOzY+bDtsKyspTC5hdXRvU2NhbGVDdWJlbWFwcyYmIWY/KG49ayxyPWwscz1jLmltYWdlW2xdLHY9YWMscy53aWR0aDw9diYmcy5oZWlnaHQ8PXZ8fCh6PU1hdGgubWF4KHMud2lkdGgscy5oZWlnaHQpLHU9TWF0aC5mbG9vcihzLndpZHRoKnYveiksdj1NYXRoLmZsb29yKHMuaGVpZ2h0KnYveiksej1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLHoud2lkdGg9dSx6LmhlaWdodD12LHouZ2V0Q29udGV4dChcIjJkXCIpLmRyYXdJbWFnZShzLDAsMCxzLndpZHRoLHMuaGVpZ2h0LDAsMCx1LHYpLHM9eiksbltyXT1zKTprW2xdPWMuaW1hZ2VbbF07bD1rWzBdO249MD09PShsLndpZHRoJmwud2lkdGgtMSkmJjA9PT0obC5oZWlnaHQmbC5oZWlnaHQtMSk7cj1JKGMuZm9ybWF0KTtzPUkoYy50eXBlKTtGKGouVEVYVFVSRV9DVUJFX01BUCxcbmMsbik7Zm9yKGw9MDs2Pmw7bCsrKWlmKGYpe3Y9a1tsXS5taXBtYXBzO3o9MDtmb3IoeD12Lmxlbmd0aDt6PHg7eisrKXU9dlt6XSxjLmZvcm1hdCE9PVRIUkVFLlJHQkFGb3JtYXQ/ai5jb21wcmVzc2VkVGV4SW1hZ2UyRChqLlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCtsLHoscix1LndpZHRoLHUuaGVpZ2h0LDAsdS5kYXRhKTpqLnRleEltYWdlMkQoai5URVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1grbCx6LHIsdS53aWR0aCx1LmhlaWdodCwwLHIscyx1LmRhdGEpfWVsc2Ugai50ZXhJbWFnZTJEKGouVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9YK2wsMCxyLHIscyxrW2xdKTtjLmdlbmVyYXRlTWlwbWFwcyYmbiYmai5nZW5lcmF0ZU1pcG1hcChqLlRFWFRVUkVfQ1VCRV9NQVApO2MubmVlZHNVcGRhdGU9ITE7aWYoYy5vblVwZGF0ZSljLm9uVXBkYXRlKCl9ZWxzZSBqLmFjdGl2ZVRleHR1cmUoai5URVhUVVJFMCtmKSxqLmJpbmRUZXh0dXJlKGouVEVYVFVSRV9DVUJFX01BUCxcbmMuaW1hZ2UuX193ZWJnbFRleHR1cmVDdWJlKX1lbHNlIHIgaW5zdGFuY2VvZiBUSFJFRS5XZWJHTFJlbmRlclRhcmdldEN1YmU/KGM9cixqLmFjdGl2ZVRleHR1cmUoai5URVhUVVJFMCtrKSxqLmJpbmRUZXh0dXJlKGouVEVYVFVSRV9DVUJFX01BUCxjLl9fd2ViZ2xUZXh0dXJlKSk6TC5zZXRUZXh0dXJlKHIsayl9ZWxzZSBpZihcInR2XCI9PT1sKXt2b2lkIDA9PT1jLl9hcnJheSYmKGMuX2FycmF5PVtdKTtsPTA7Zm9yKG49Yy52YWx1ZS5sZW5ndGg7bDxuO2wrKyljLl9hcnJheVtsXT1HKCk7ai51bmlmb3JtMWl2KGYsYy5fYXJyYXkpO2w9MDtmb3Iobj1jLnZhbHVlLmxlbmd0aDtsPG47bCsrKXI9Yy52YWx1ZVtsXSxrPWMuX2FycmF5W2xdLHImJkwuc2V0VGV4dHVyZShyLGspfWVsc2UgY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogVW5rbm93biB1bmlmb3JtIHR5cGU6IFwiK2wpO2lmKChkIGluc3RhbmNlb2YgVEhSRUUuU2hhZGVyTWF0ZXJpYWx8fGQgaW5zdGFuY2VvZlxuVEhSRUUuTWVzaFBob25nTWF0ZXJpYWx8fGQuZW52TWFwKSYmbnVsbCE9PWcuY2FtZXJhUG9zaXRpb24pcmEuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGEubWF0cml4V29ybGQpLGoudW5pZm9ybTNmKGcuY2FtZXJhUG9zaXRpb24scmEueCxyYS55LHJhLnopOyhkIGluc3RhbmNlb2YgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWx8fGQgaW5zdGFuY2VvZiBUSFJFRS5NZXNoTGFtYmVydE1hdGVyaWFsfHxkIGluc3RhbmNlb2YgVEhSRUUuU2hhZGVyTWF0ZXJpYWx8fGQuc2tpbm5pbmcpJiZudWxsIT09Zy52aWV3TWF0cml4JiZqLnVuaWZvcm1NYXRyaXg0ZnYoZy52aWV3TWF0cml4LCExLGEubWF0cml4V29ybGRJbnZlcnNlLmVsZW1lbnRzKX1qLnVuaWZvcm1NYXRyaXg0ZnYoZy5tb2RlbFZpZXdNYXRyaXgsITEsZS5fbW9kZWxWaWV3TWF0cml4LmVsZW1lbnRzKTtnLm5vcm1hbE1hdHJpeCYmai51bmlmb3JtTWF0cml4M2Z2KGcubm9ybWFsTWF0cml4LCExLGUuX25vcm1hbE1hdHJpeC5lbGVtZW50cyk7XG5udWxsIT09Zy5tb2RlbE1hdHJpeCYmai51bmlmb3JtTWF0cml4NGZ2KGcubW9kZWxNYXRyaXgsITEsZS5tYXRyaXhXb3JsZC5lbGVtZW50cyk7cmV0dXJuIGh9ZnVuY3Rpb24gRygpe3ZhciBhPVA7YT49TWImJmNvbnNvbGUud2FybihcIldlYkdMUmVuZGVyZXI6IHRyeWluZyB0byB1c2UgXCIrYStcIiB0ZXh0dXJlIHVuaXRzIHdoaWxlIHRoaXMgR1BVIHN1cHBvcnRzIG9ubHkgXCIrTWIpO1ArPTE7cmV0dXJuIGF9ZnVuY3Rpb24gdyhhLGIsYyxkKXthW2JdPWMucipjLnIqZDthW2IrMV09Yy5nKmMuZypkO2FbYisyXT1jLmIqYy5iKmR9ZnVuY3Rpb24geShhLGIsYyxkKXthW2JdPWMucipkO2FbYisxXT1jLmcqZDthW2IrMl09Yy5iKmR9ZnVuY3Rpb24gRShhKXthIT09d2EmJihqLmxpbmVXaWR0aChhKSx3YT1hKX1mdW5jdGlvbiBBKGEsYixjKXtEYSE9PWEmJihhP2ouZW5hYmxlKGouUE9MWUdPTl9PRkZTRVRfRklMTCk6ai5kaXNhYmxlKGouUE9MWUdPTl9PRkZTRVRfRklMTCksRGE9YSk7XG5pZihhJiYoVWEhPT1ifHxRYSE9PWMpKWoucG9seWdvbk9mZnNldChiLGMpLFVhPWIsUWE9Y31mdW5jdGlvbiBLKGEpe2Zvcih2YXIgYT1hLnNwbGl0KFwiXFxuXCIpLGI9MCxjPWEubGVuZ3RoO2I8YztiKyspYVtiXT1iKzErXCI6IFwiK2FbYl07cmV0dXJuIGEuam9pbihcIlxcblwiKX1mdW5jdGlvbiBEKGEsYil7dmFyIGM7XCJmcmFnbWVudFwiPT09YT9jPWouY3JlYXRlU2hhZGVyKGouRlJBR01FTlRfU0hBREVSKTpcInZlcnRleFwiPT09YSYmKGM9ai5jcmVhdGVTaGFkZXIoai5WRVJURVhfU0hBREVSKSk7ai5zaGFkZXJTb3VyY2UoYyxiKTtqLmNvbXBpbGVTaGFkZXIoYyk7cmV0dXJuIWouZ2V0U2hhZGVyUGFyYW1ldGVyKGMsai5DT01QSUxFX1NUQVRVUyk/KGNvbnNvbGUuZXJyb3Ioai5nZXRTaGFkZXJJbmZvTG9nKGMpKSxjb25zb2xlLmVycm9yKEsoYikpLG51bGwpOmN9ZnVuY3Rpb24gRihhLGIsYyl7Yz8oai50ZXhQYXJhbWV0ZXJpKGEsai5URVhUVVJFX1dSQVBfUyxJKGIud3JhcFMpKSxqLnRleFBhcmFtZXRlcmkoYSxcbmouVEVYVFVSRV9XUkFQX1QsSShiLndyYXBUKSksai50ZXhQYXJhbWV0ZXJpKGEsai5URVhUVVJFX01BR19GSUxURVIsSShiLm1hZ0ZpbHRlcikpLGoudGV4UGFyYW1ldGVyaShhLGouVEVYVFVSRV9NSU5fRklMVEVSLEkoYi5taW5GaWx0ZXIpKSk6KGoudGV4UGFyYW1ldGVyaShhLGouVEVYVFVSRV9XUkFQX1Msai5DTEFNUF9UT19FREdFKSxqLnRleFBhcmFtZXRlcmkoYSxqLlRFWFRVUkVfV1JBUF9ULGouQ0xBTVBfVE9fRURHRSksai50ZXhQYXJhbWV0ZXJpKGEsai5URVhUVVJFX01BR19GSUxURVIseChiLm1hZ0ZpbHRlcikpLGoudGV4UGFyYW1ldGVyaShhLGouVEVYVFVSRV9NSU5fRklMVEVSLHgoYi5taW5GaWx0ZXIpKSk7aWYoTGEmJmIudHlwZSE9PVRIUkVFLkZsb2F0VHlwZSYmKDE8Yi5hbmlzb3Ryb3B5fHxiLl9fb2xkQW5pc290cm9weSkpai50ZXhQYXJhbWV0ZXJmKGEsTGEuVEVYVFVSRV9NQVhfQU5JU09UUk9QWV9FWFQsTWF0aC5taW4oYi5hbmlzb3Ryb3B5LE5iKSksYi5fX29sZEFuaXNvdHJvcHk9XG5iLmFuaXNvdHJvcHl9ZnVuY3Rpb24gTyhhLGIpe2ouYmluZFJlbmRlcmJ1ZmZlcihqLlJFTkRFUkJVRkZFUixhKTtiLmRlcHRoQnVmZmVyJiYhYi5zdGVuY2lsQnVmZmVyPyhqLnJlbmRlcmJ1ZmZlclN0b3JhZ2Uoai5SRU5ERVJCVUZGRVIsai5ERVBUSF9DT01QT05FTlQxNixiLndpZHRoLGIuaGVpZ2h0KSxqLmZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyKGouRlJBTUVCVUZGRVIsai5ERVBUSF9BVFRBQ0hNRU5ULGouUkVOREVSQlVGRkVSLGEpKTpiLmRlcHRoQnVmZmVyJiZiLnN0ZW5jaWxCdWZmZXI/KGoucmVuZGVyYnVmZmVyU3RvcmFnZShqLlJFTkRFUkJVRkZFUixqLkRFUFRIX1NURU5DSUwsYi53aWR0aCxiLmhlaWdodCksai5mcmFtZWJ1ZmZlclJlbmRlcmJ1ZmZlcihqLkZSQU1FQlVGRkVSLGouREVQVEhfU1RFTkNJTF9BVFRBQ0hNRU5ULGouUkVOREVSQlVGRkVSLGEpKTpqLnJlbmRlcmJ1ZmZlclN0b3JhZ2Uoai5SRU5ERVJCVUZGRVIsai5SR0JBNCxiLndpZHRoLGIuaGVpZ2h0KX1cbmZ1bmN0aW9uIHgoYSl7cmV0dXJuIGE9PT1USFJFRS5OZWFyZXN0RmlsdGVyfHxhPT09VEhSRUUuTmVhcmVzdE1pcE1hcE5lYXJlc3RGaWx0ZXJ8fGE9PT1USFJFRS5OZWFyZXN0TWlwTWFwTGluZWFyRmlsdGVyP2ouTkVBUkVTVDpqLkxJTkVBUn1mdW5jdGlvbiBJKGEpe2lmKGE9PT1USFJFRS5SZXBlYXRXcmFwcGluZylyZXR1cm4gai5SRVBFQVQ7aWYoYT09PVRIUkVFLkNsYW1wVG9FZGdlV3JhcHBpbmcpcmV0dXJuIGouQ0xBTVBfVE9fRURHRTtpZihhPT09VEhSRUUuTWlycm9yZWRSZXBlYXRXcmFwcGluZylyZXR1cm4gai5NSVJST1JFRF9SRVBFQVQ7aWYoYT09PVRIUkVFLk5lYXJlc3RGaWx0ZXIpcmV0dXJuIGouTkVBUkVTVDtpZihhPT09VEhSRUUuTmVhcmVzdE1pcE1hcE5lYXJlc3RGaWx0ZXIpcmV0dXJuIGouTkVBUkVTVF9NSVBNQVBfTkVBUkVTVDtpZihhPT09VEhSRUUuTmVhcmVzdE1pcE1hcExpbmVhckZpbHRlcilyZXR1cm4gai5ORUFSRVNUX01JUE1BUF9MSU5FQVI7aWYoYT09PVxuVEhSRUUuTGluZWFyRmlsdGVyKXJldHVybiBqLkxJTkVBUjtpZihhPT09VEhSRUUuTGluZWFyTWlwTWFwTmVhcmVzdEZpbHRlcilyZXR1cm4gai5MSU5FQVJfTUlQTUFQX05FQVJFU1Q7aWYoYT09PVRIUkVFLkxpbmVhck1pcE1hcExpbmVhckZpbHRlcilyZXR1cm4gai5MSU5FQVJfTUlQTUFQX0xJTkVBUjtpZihhPT09VEhSRUUuVW5zaWduZWRCeXRlVHlwZSlyZXR1cm4gai5VTlNJR05FRF9CWVRFO2lmKGE9PT1USFJFRS5VbnNpZ25lZFNob3J0NDQ0NFR5cGUpcmV0dXJuIGouVU5TSUdORURfU0hPUlRfNF80XzRfNDtpZihhPT09VEhSRUUuVW5zaWduZWRTaG9ydDU1NTFUeXBlKXJldHVybiBqLlVOU0lHTkVEX1NIT1JUXzVfNV81XzE7aWYoYT09PVRIUkVFLlVuc2lnbmVkU2hvcnQ1NjVUeXBlKXJldHVybiBqLlVOU0lHTkVEX1NIT1JUXzVfNl81O2lmKGE9PT1USFJFRS5CeXRlVHlwZSlyZXR1cm4gai5CWVRFO2lmKGE9PT1USFJFRS5TaG9ydFR5cGUpcmV0dXJuIGouU0hPUlQ7aWYoYT09PVxuVEhSRUUuVW5zaWduZWRTaG9ydFR5cGUpcmV0dXJuIGouVU5TSUdORURfU0hPUlQ7aWYoYT09PVRIUkVFLkludFR5cGUpcmV0dXJuIGouSU5UO2lmKGE9PT1USFJFRS5VbnNpZ25lZEludFR5cGUpcmV0dXJuIGouVU5TSUdORURfSU5UO2lmKGE9PT1USFJFRS5GbG9hdFR5cGUpcmV0dXJuIGouRkxPQVQ7aWYoYT09PVRIUkVFLkFscGhhRm9ybWF0KXJldHVybiBqLkFMUEhBO2lmKGE9PT1USFJFRS5SR0JGb3JtYXQpcmV0dXJuIGouUkdCO2lmKGE9PT1USFJFRS5SR0JBRm9ybWF0KXJldHVybiBqLlJHQkE7aWYoYT09PVRIUkVFLkx1bWluYW5jZUZvcm1hdClyZXR1cm4gai5MVU1JTkFOQ0U7aWYoYT09PVRIUkVFLkx1bWluYW5jZUFscGhhRm9ybWF0KXJldHVybiBqLkxVTUlOQU5DRV9BTFBIQTtpZihhPT09VEhSRUUuQWRkRXF1YXRpb24pcmV0dXJuIGouRlVOQ19BREQ7aWYoYT09PVRIUkVFLlN1YnRyYWN0RXF1YXRpb24pcmV0dXJuIGouRlVOQ19TVUJUUkFDVDtpZihhPT09VEhSRUUuUmV2ZXJzZVN1YnRyYWN0RXF1YXRpb24pcmV0dXJuIGouRlVOQ19SRVZFUlNFX1NVQlRSQUNUO1xuaWYoYT09PVRIUkVFLlplcm9GYWN0b3IpcmV0dXJuIGouWkVSTztpZihhPT09VEhSRUUuT25lRmFjdG9yKXJldHVybiBqLk9ORTtpZihhPT09VEhSRUUuU3JjQ29sb3JGYWN0b3IpcmV0dXJuIGouU1JDX0NPTE9SO2lmKGE9PT1USFJFRS5PbmVNaW51c1NyY0NvbG9yRmFjdG9yKXJldHVybiBqLk9ORV9NSU5VU19TUkNfQ09MT1I7aWYoYT09PVRIUkVFLlNyY0FscGhhRmFjdG9yKXJldHVybiBqLlNSQ19BTFBIQTtpZihhPT09VEhSRUUuT25lTWludXNTcmNBbHBoYUZhY3RvcilyZXR1cm4gai5PTkVfTUlOVVNfU1JDX0FMUEhBO2lmKGE9PT1USFJFRS5Ec3RBbHBoYUZhY3RvcilyZXR1cm4gai5EU1RfQUxQSEE7aWYoYT09PVRIUkVFLk9uZU1pbnVzRHN0QWxwaGFGYWN0b3IpcmV0dXJuIGouT05FX01JTlVTX0RTVF9BTFBIQTtpZihhPT09VEhSRUUuRHN0Q29sb3JGYWN0b3IpcmV0dXJuIGouRFNUX0NPTE9SO2lmKGE9PT1USFJFRS5PbmVNaW51c0RzdENvbG9yRmFjdG9yKXJldHVybiBqLk9ORV9NSU5VU19EU1RfQ09MT1I7XG5pZihhPT09VEhSRUUuU3JjQWxwaGFTYXR1cmF0ZUZhY3RvcilyZXR1cm4gai5TUkNfQUxQSEFfU0FUVVJBVEU7aWYodm9pZCAwIT09RmEpe2lmKGE9PT1USFJFRS5SR0JfUzNUQ19EWFQxX0Zvcm1hdClyZXR1cm4gRmEuQ09NUFJFU1NFRF9SR0JfUzNUQ19EWFQxX0VYVDtpZihhPT09VEhSRUUuUkdCQV9TM1RDX0RYVDFfRm9ybWF0KXJldHVybiBGYS5DT01QUkVTU0VEX1JHQkFfUzNUQ19EWFQxX0VYVDtpZihhPT09VEhSRUUuUkdCQV9TM1RDX0RYVDNfRm9ybWF0KXJldHVybiBGYS5DT01QUkVTU0VEX1JHQkFfUzNUQ19EWFQzX0VYVDtpZihhPT09VEhSRUUuUkdCQV9TM1RDX0RYVDVfRm9ybWF0KXJldHVybiBGYS5DT01QUkVTU0VEX1JHQkFfUzNUQ19EWFQ1X0VYVH1yZXR1cm4gMH1jb25zb2xlLmxvZyhcIlRIUkVFLldlYkdMUmVuZGVyZXJcIixUSFJFRS5SRVZJU0lPTik7dmFyIGE9YXx8e30sQj12b2lkIDAhPT1hLmNhbnZhcz9hLmNhbnZhczpkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLFxuTT12b2lkIDAhPT1hLnByZWNpc2lvbj9hLnByZWNpc2lvbjpcImhpZ2hwXCIsSj12b2lkIDAhPT1hLmFscGhhP2EuYWxwaGE6ITEsY2E9dm9pZCAwIT09YS5wcmVtdWx0aXBsaWVkQWxwaGE/YS5wcmVtdWx0aXBsaWVkQWxwaGE6ITAsbmE9dm9pZCAwIT09YS5hbnRpYWxpYXM/YS5hbnRpYWxpYXM6ITEscGE9dm9pZCAwIT09YS5zdGVuY2lsP2Euc3RlbmNpbDohMCxDPXZvaWQgMCE9PWEucHJlc2VydmVEcmF3aW5nQnVmZmVyP2EucHJlc2VydmVEcmF3aW5nQnVmZmVyOiExLFE9bmV3IFRIUkVFLkNvbG9yKDApLFI9MDt0aGlzLmRvbUVsZW1lbnQ9Qjt0aGlzLmNvbnRleHQ9bnVsbDt0aGlzLmRldmljZVBpeGVsUmF0aW89dm9pZCAwIT09YS5kZXZpY2VQaXhlbFJhdGlvP2EuZGV2aWNlUGl4ZWxSYXRpbzp2b2lkIDAhPT1zZWxmLmRldmljZVBpeGVsUmF0aW8/c2VsZi5kZXZpY2VQaXhlbFJhdGlvOjE7dGhpcy5hdXRvVXBkYXRlT2JqZWN0cz10aGlzLnNvcnRPYmplY3RzPXRoaXMuYXV0b0NsZWFyU3RlbmNpbD1cbnRoaXMuYXV0b0NsZWFyRGVwdGg9dGhpcy5hdXRvQ2xlYXJDb2xvcj10aGlzLmF1dG9DbGVhcj0hMDt0aGlzLnNoYWRvd01hcEVuYWJsZWQ9dGhpcy5waHlzaWNhbGx5QmFzZWRTaGFkaW5nPXRoaXMuZ2FtbWFPdXRwdXQ9dGhpcy5nYW1tYUlucHV0PSExO3RoaXMuc2hhZG93TWFwQXV0b1VwZGF0ZT0hMDt0aGlzLnNoYWRvd01hcFR5cGU9VEhSRUUuUENGU2hhZG93TWFwO3RoaXMuc2hhZG93TWFwQ3VsbEZhY2U9VEhSRUUuQ3VsbEZhY2VGcm9udDt0aGlzLnNoYWRvd01hcENhc2NhZGU9dGhpcy5zaGFkb3dNYXBEZWJ1Zz0hMTt0aGlzLm1heE1vcnBoVGFyZ2V0cz04O3RoaXMubWF4TW9ycGhOb3JtYWxzPTQ7dGhpcy5hdXRvU2NhbGVDdWJlbWFwcz0hMDt0aGlzLnJlbmRlclBsdWdpbnNQcmU9W107dGhpcy5yZW5kZXJQbHVnaW5zUG9zdD1bXTt0aGlzLmluZm89e21lbW9yeTp7cHJvZ3JhbXM6MCxnZW9tZXRyaWVzOjAsdGV4dHVyZXM6MH0scmVuZGVyOntjYWxsczowLHZlcnRpY2VzOjAsXG5mYWNlczowLHBvaW50czowfX07dmFyIEw9dGhpcyxkYT1bXSx6YT0wLEJhPW51bGwsYmE9bnVsbCxBYT0tMSwkPW51bGwsZWE9bnVsbCxWPTAsUD0wLFk9LTEsVT0tMSxqYT0tMSxzYT0tMSxoYT0tMSxLYT0tMSxHYT0tMSxrYT0tMSxEYT1udWxsLFVhPW51bGwsUWE9bnVsbCx3YT1udWxsLGJiPTAsY2I9MCxNYT1CLndpZHRoLGZiPUIuaGVpZ2h0LHNiPTAscGI9MCx2YT17fSxsYT1uZXcgVEhSRUUuRnJ1c3R1bSxFYT1uZXcgVEhSRUUuTWF0cml4NCxnYj1uZXcgVEhSRUUuTWF0cml4NCxyYT1uZXcgVEhSRUUuVmVjdG9yMyxmYT1uZXcgVEhSRUUuVmVjdG9yMyx0YT0hMCxQYT17YW1iaWVudDpbMCwwLDBdLGRpcmVjdGlvbmFsOntsZW5ndGg6MCxjb2xvcnM6W10scG9zaXRpb25zOltdfSxwb2ludDp7bGVuZ3RoOjAsY29sb3JzOltdLHBvc2l0aW9uczpbXSxkaXN0YW5jZXM6W119LHNwb3Q6e2xlbmd0aDowLGNvbG9yczpbXSxwb3NpdGlvbnM6W10sZGlzdGFuY2VzOltdLGRpcmVjdGlvbnM6W10sXG5hbmdsZXNDb3M6W10sZXhwb25lbnRzOltdfSxoZW1pOntsZW5ndGg6MCxza3lDb2xvcnM6W10sZ3JvdW5kQ29sb3JzOltdLHBvc2l0aW9uczpbXX19LGosT2EsdWEsTGEsRmE7dHJ5e3ZhciBSYT17YWxwaGE6SixwcmVtdWx0aXBsaWVkQWxwaGE6Y2EsYW50aWFsaWFzOm5hLHN0ZW5jaWw6cGEscHJlc2VydmVEcmF3aW5nQnVmZmVyOkN9O2o9Qi5nZXRDb250ZXh0KFwid2ViZ2xcIixSYSl8fEIuZ2V0Q29udGV4dChcImV4cGVyaW1lbnRhbC13ZWJnbFwiLFJhKTtpZihudWxsPT09ail0aHJvd1wiRXJyb3IgY3JlYXRpbmcgV2ViR0wgY29udGV4dC5cIjt9Y2F0Y2goWmIpe2NvbnNvbGUuZXJyb3IoWmIpfU9hPWouZ2V0RXh0ZW5zaW9uKFwiT0VTX3RleHR1cmVfZmxvYXRcIik7ai5nZXRFeHRlbnNpb24oXCJPRVNfdGV4dHVyZV9mbG9hdF9saW5lYXJcIik7dWE9ai5nZXRFeHRlbnNpb24oXCJPRVNfc3RhbmRhcmRfZGVyaXZhdGl2ZXNcIik7TGE9ai5nZXRFeHRlbnNpb24oXCJFWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWNcIil8fFxuai5nZXRFeHRlbnNpb24oXCJNT1pfRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljXCIpfHxqLmdldEV4dGVuc2lvbihcIldFQktJVF9FWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWNcIik7RmE9ai5nZXRFeHRlbnNpb24oXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y1wiKXx8ai5nZXRFeHRlbnNpb24oXCJNT1pfV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGNcIil8fGouZ2V0RXh0ZW5zaW9uKFwiV0VCS0lUX1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjXCIpO09hfHxjb25zb2xlLmxvZyhcIlRIUkVFLldlYkdMUmVuZGVyZXI6IEZsb2F0IHRleHR1cmVzIG5vdCBzdXBwb3J0ZWQuXCIpO3VhfHxjb25zb2xlLmxvZyhcIlRIUkVFLldlYkdMUmVuZGVyZXI6IFN0YW5kYXJkIGRlcml2YXRpdmVzIG5vdCBzdXBwb3J0ZWQuXCIpO0xhfHxjb25zb2xlLmxvZyhcIlRIUkVFLldlYkdMUmVuZGVyZXI6IEFuaXNvdHJvcGljIHRleHR1cmUgZmlsdGVyaW5nIG5vdCBzdXBwb3J0ZWQuXCIpO1xuRmF8fGNvbnNvbGUubG9nKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogUzNUQyBjb21wcmVzc2VkIHRleHR1cmVzIG5vdCBzdXBwb3J0ZWQuXCIpO3ZvaWQgMD09PWouZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0JiYoai5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQ9ZnVuY3Rpb24oKXtyZXR1cm57cmFuZ2VNaW46MSxyYW5nZU1heDoxLHByZWNpc2lvbjoxfX0pO2ouY2xlYXJDb2xvcigwLDAsMCwxKTtqLmNsZWFyRGVwdGgoMSk7ai5jbGVhclN0ZW5jaWwoMCk7ai5lbmFibGUoai5ERVBUSF9URVNUKTtqLmRlcHRoRnVuYyhqLkxFUVVBTCk7ai5mcm9udEZhY2Uoai5DQ1cpO2ouY3VsbEZhY2Uoai5CQUNLKTtqLmVuYWJsZShqLkNVTExfRkFDRSk7ai5lbmFibGUoai5CTEVORCk7ai5ibGVuZEVxdWF0aW9uKGouRlVOQ19BREQpO2ouYmxlbmRGdW5jKGouU1JDX0FMUEhBLGouT05FX01JTlVTX1NSQ19BTFBIQSk7ai52aWV3cG9ydChiYixjYixNYSxmYik7ai5jbGVhckNvbG9yKFEucixRLmcsUS5iLFxuUik7dGhpcy5jb250ZXh0PWo7dmFyIE1iPWouZ2V0UGFyYW1ldGVyKGouTUFYX1RFWFRVUkVfSU1BR0VfVU5JVFMpLCRiPWouZ2V0UGFyYW1ldGVyKGouTUFYX1ZFUlRFWF9URVhUVVJFX0lNQUdFX1VOSVRTKTtqLmdldFBhcmFtZXRlcihqLk1BWF9URVhUVVJFX1NJWkUpO3ZhciBhYz1qLmdldFBhcmFtZXRlcihqLk1BWF9DVUJFX01BUF9URVhUVVJFX1NJWkUpLE5iPUxhP2ouZ2V0UGFyYW1ldGVyKExhLk1BWF9URVhUVVJFX01BWF9BTklTT1RST1BZX0VYVCk6MCxCYj0wPCRiLHliPUJiJiZPYTtGYSYmai5nZXRQYXJhbWV0ZXIoai5DT01QUkVTU0VEX1RFWFRVUkVfRk9STUFUUyk7dmFyIGJjPWouZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0KGouVkVSVEVYX1NIQURFUixqLkhJR0hfRkxPQVQpLGNjPWouZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0KGouVkVSVEVYX1NIQURFUixqLk1FRElVTV9GTE9BVCk7ai5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoai5WRVJURVhfU0hBREVSLGouTE9XX0ZMT0FUKTtcbnZhciBxYz1qLmdldFNoYWRlclByZWNpc2lvbkZvcm1hdChqLkZSQUdNRU5UX1NIQURFUixqLkhJR0hfRkxPQVQpLHJjPWouZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0KGouRlJBR01FTlRfU0hBREVSLGouTUVESVVNX0ZMT0FUKTtqLmdldFNoYWRlclByZWNpc2lvbkZvcm1hdChqLkZSQUdNRU5UX1NIQURFUixqLkxPV19GTE9BVCk7ai5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoai5WRVJURVhfU0hBREVSLGouSElHSF9JTlQpO2ouZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0KGouVkVSVEVYX1NIQURFUixqLk1FRElVTV9JTlQpO2ouZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0KGouVkVSVEVYX1NIQURFUixqLkxPV19JTlQpO2ouZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0KGouRlJBR01FTlRfU0hBREVSLGouSElHSF9JTlQpO2ouZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0KGouRlJBR01FTlRfU0hBREVSLGouTUVESVVNX0lOVCk7ai5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoai5GUkFHTUVOVF9TSEFERVIsXG5qLkxPV19JTlQpO3ZhciBzYz0wPGJjLnByZWNpc2lvbiYmMDxxYy5wcmVjaXNpb24sT2I9MDxjYy5wcmVjaXNpb24mJjA8cmMucHJlY2lzaW9uO1wiaGlnaHBcIj09PU0mJiFzYyYmKE9iPyhNPVwibWVkaXVtcFwiLGNvbnNvbGUud2FybihcIldlYkdMUmVuZGVyZXI6IGhpZ2hwIG5vdCBzdXBwb3J0ZWQsIHVzaW5nIG1lZGl1bXBcIikpOihNPVwibG93cFwiLGNvbnNvbGUud2FybihcIldlYkdMUmVuZGVyZXI6IGhpZ2hwIGFuZCBtZWRpdW1wIG5vdCBzdXBwb3J0ZWQsIHVzaW5nIGxvd3BcIikpKTtcIm1lZGl1bXBcIj09PU0mJiFPYiYmKE09XCJsb3dwXCIsY29uc29sZS53YXJuKFwiV2ViR0xSZW5kZXJlcjogbWVkaXVtcCBub3Qgc3VwcG9ydGVkLCB1c2luZyBsb3dwXCIpKTt0aGlzLmdldENvbnRleHQ9ZnVuY3Rpb24oKXtyZXR1cm4gan07dGhpcy5zdXBwb3J0c1ZlcnRleFRleHR1cmVzPWZ1bmN0aW9uKCl7cmV0dXJuIEJifTt0aGlzLnN1cHBvcnRzRmxvYXRUZXh0dXJlcz1mdW5jdGlvbigpe3JldHVybiBPYX07XG50aGlzLnN1cHBvcnRzU3RhbmRhcmREZXJpdmF0aXZlcz1mdW5jdGlvbigpe3JldHVybiB1YX07dGhpcy5zdXBwb3J0c0NvbXByZXNzZWRUZXh0dXJlUzNUQz1mdW5jdGlvbigpe3JldHVybiBGYX07dGhpcy5nZXRNYXhBbmlzb3Ryb3B5PWZ1bmN0aW9uKCl7cmV0dXJuIE5ifTt0aGlzLmdldFByZWNpc2lvbj1mdW5jdGlvbigpe3JldHVybiBNfTt0aGlzLnNldFNpemU9ZnVuY3Rpb24oYSxiLGMpe0Iud2lkdGg9YSp0aGlzLmRldmljZVBpeGVsUmF0aW87Qi5oZWlnaHQ9Yip0aGlzLmRldmljZVBpeGVsUmF0aW87MSE9PXRoaXMuZGV2aWNlUGl4ZWxSYXRpbyYmITEhPT1jJiYoQi5zdHlsZS53aWR0aD1hK1wicHhcIixCLnN0eWxlLmhlaWdodD1iK1wicHhcIik7dGhpcy5zZXRWaWV3cG9ydCgwLDAsQi53aWR0aCxCLmhlaWdodCl9O3RoaXMuc2V0Vmlld3BvcnQ9ZnVuY3Rpb24oYSxiLGMsZCl7YmI9dm9pZCAwIT09YT9hOjA7Y2I9dm9pZCAwIT09Yj9iOjA7TWE9dm9pZCAwIT09Yz9jOkIud2lkdGg7XG5mYj12b2lkIDAhPT1kP2Q6Qi5oZWlnaHQ7ai52aWV3cG9ydChiYixjYixNYSxmYil9O3RoaXMuc2V0U2Npc3Nvcj1mdW5jdGlvbihhLGIsYyxkKXtqLnNjaXNzb3IoYSxiLGMsZCl9O3RoaXMuZW5hYmxlU2Npc3NvclRlc3Q9ZnVuY3Rpb24oYSl7YT9qLmVuYWJsZShqLlNDSVNTT1JfVEVTVCk6ai5kaXNhYmxlKGouU0NJU1NPUl9URVNUKX07dGhpcy5zZXRDbGVhckNvbG9yPWZ1bmN0aW9uKGEsYil7US5zZXQoYSk7Uj12b2lkIDAhPT1iP2I6MTtqLmNsZWFyQ29sb3IoUS5yLFEuZyxRLmIsUil9O3RoaXMuc2V0Q2xlYXJDb2xvckhleD1mdW5jdGlvbihhLGIpe2NvbnNvbGUud2FybihcIkRFUFJFQ0FURUQ6IC5zZXRDbGVhckNvbG9ySGV4KCkgaXMgYmVpbmcgcmVtb3ZlZC4gVXNlIC5zZXRDbGVhckNvbG9yKCkgaW5zdGVhZC5cIik7dGhpcy5zZXRDbGVhckNvbG9yKGEsYil9O3RoaXMuZ2V0Q2xlYXJDb2xvcj1mdW5jdGlvbigpe3JldHVybiBRfTt0aGlzLmdldENsZWFyQWxwaGE9ZnVuY3Rpb24oKXtyZXR1cm4gUn07XG50aGlzLmNsZWFyPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD0wO2lmKHZvaWQgMD09PWF8fGEpZHw9ai5DT0xPUl9CVUZGRVJfQklUO2lmKHZvaWQgMD09PWJ8fGIpZHw9ai5ERVBUSF9CVUZGRVJfQklUO2lmKHZvaWQgMD09PWN8fGMpZHw9ai5TVEVOQ0lMX0JVRkZFUl9CSVQ7ai5jbGVhcihkKX07dGhpcy5jbGVhckNvbG9yPWZ1bmN0aW9uKCl7ai5jbGVhcihqLkNPTE9SX0JVRkZFUl9CSVQpfTt0aGlzLmNsZWFyRGVwdGg9ZnVuY3Rpb24oKXtqLmNsZWFyKGouREVQVEhfQlVGRkVSX0JJVCl9O3RoaXMuY2xlYXJTdGVuY2lsPWZ1bmN0aW9uKCl7ai5jbGVhcihqLlNURU5DSUxfQlVGRkVSX0JJVCl9O3RoaXMuY2xlYXJUYXJnZXQ9ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy5zZXRSZW5kZXJUYXJnZXQoYSk7dGhpcy5jbGVhcihiLGMsZCl9O3RoaXMuYWRkUG9zdFBsdWdpbj1mdW5jdGlvbihhKXthLmluaXQodGhpcyk7dGhpcy5yZW5kZXJQbHVnaW5zUG9zdC5wdXNoKGEpfTt0aGlzLmFkZFByZVBsdWdpbj1cbmZ1bmN0aW9uKGEpe2EuaW5pdCh0aGlzKTt0aGlzLnJlbmRlclBsdWdpbnNQcmUucHVzaChhKX07dGhpcy51cGRhdGVTaGFkb3dNYXA9ZnVuY3Rpb24oYSxiKXtCYT1udWxsO0FhPSQ9a2E9R2E9amE9LTE7dGE9ITA7VT1ZPS0xO3RoaXMuc2hhZG93TWFwUGx1Z2luLnVwZGF0ZShhLGIpfTt2YXIgQ2I9ZnVuY3Rpb24oYSl7YT1hLnRhcmdldDthLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkaXNwb3NlXCIsQ2IpO2EuX193ZWJnbEluaXQ9dm9pZCAwO2lmKGEgaW5zdGFuY2VvZiBUSFJFRS5CdWZmZXJHZW9tZXRyeSl7dmFyIGI9YS5hdHRyaWJ1dGVzLGM7Zm9yKGMgaW4gYil2b2lkIDAhPT1iW2NdLmJ1ZmZlciYmai5kZWxldGVCdWZmZXIoYltjXS5idWZmZXIpO0wuaW5mby5tZW1vcnkuZ2VvbWV0cmllcy0tfWVsc2UgaWYodm9pZCAwIT09YS5nZW9tZXRyeUdyb3Vwcylmb3IoYiBpbiBhLmdlb21ldHJ5R3JvdXBzKXtjPWEuZ2VvbWV0cnlHcm91cHNbYl07aWYodm9pZCAwIT09Yy5udW1Nb3JwaFRhcmdldHMpZm9yKHZhciBkPVxuMCxlPWMubnVtTW9ycGhUYXJnZXRzO2Q8ZTtkKyspai5kZWxldGVCdWZmZXIoYy5fX3dlYmdsTW9ycGhUYXJnZXRzQnVmZmVyc1tkXSk7aWYodm9pZCAwIT09Yy5udW1Nb3JwaE5vcm1hbHMpe2Q9MDtmb3IoZT1jLm51bU1vcnBoTm9ybWFscztkPGU7ZCsrKWouZGVsZXRlQnVmZmVyKGMuX193ZWJnbE1vcnBoTm9ybWFsc0J1ZmZlcnNbZF0pfUhiKGMpfWVsc2UgSGIoYSl9LERiPWZ1bmN0aW9uKGEpe2E9YS50YXJnZXQ7YS5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLERiKTthLmltYWdlJiZhLmltYWdlLl9fd2ViZ2xUZXh0dXJlQ3ViZT9qLmRlbGV0ZVRleHR1cmUoYS5pbWFnZS5fX3dlYmdsVGV4dHVyZUN1YmUpOmEuX193ZWJnbEluaXQmJihhLl9fd2ViZ2xJbml0PSExLGouZGVsZXRlVGV4dHVyZShhLl9fd2ViZ2xUZXh0dXJlKSk7TC5pbmZvLm1lbW9yeS50ZXh0dXJlcy0tfSxFYj1mdW5jdGlvbihhKXthPWEudGFyZ2V0O2EucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRpc3Bvc2VcIixcbkViKTtpZihhJiZhLl9fd2ViZ2xUZXh0dXJlKWlmKGouZGVsZXRlVGV4dHVyZShhLl9fd2ViZ2xUZXh0dXJlKSxhIGluc3RhbmNlb2YgVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXRDdWJlKWZvcih2YXIgYj0wOzY+YjtiKyspai5kZWxldGVGcmFtZWJ1ZmZlcihhLl9fd2ViZ2xGcmFtZWJ1ZmZlcltiXSksai5kZWxldGVSZW5kZXJidWZmZXIoYS5fX3dlYmdsUmVuZGVyYnVmZmVyW2JdKTtlbHNlIGouZGVsZXRlRnJhbWVidWZmZXIoYS5fX3dlYmdsRnJhbWVidWZmZXIpLGouZGVsZXRlUmVuZGVyYnVmZmVyKGEuX193ZWJnbFJlbmRlcmJ1ZmZlcik7TC5pbmZvLm1lbW9yeS50ZXh0dXJlcy0tfSxGYj1mdW5jdGlvbihhKXthPWEudGFyZ2V0O2EucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRpc3Bvc2VcIixGYik7R2IoYSl9LEhiPWZ1bmN0aW9uKGEpe3ZvaWQgMCE9PWEuX193ZWJnbFZlcnRleEJ1ZmZlciYmai5kZWxldGVCdWZmZXIoYS5fX3dlYmdsVmVydGV4QnVmZmVyKTt2b2lkIDAhPT1hLl9fd2ViZ2xOb3JtYWxCdWZmZXImJlxuai5kZWxldGVCdWZmZXIoYS5fX3dlYmdsTm9ybWFsQnVmZmVyKTt2b2lkIDAhPT1hLl9fd2ViZ2xUYW5nZW50QnVmZmVyJiZqLmRlbGV0ZUJ1ZmZlcihhLl9fd2ViZ2xUYW5nZW50QnVmZmVyKTt2b2lkIDAhPT1hLl9fd2ViZ2xDb2xvckJ1ZmZlciYmai5kZWxldGVCdWZmZXIoYS5fX3dlYmdsQ29sb3JCdWZmZXIpO3ZvaWQgMCE9PWEuX193ZWJnbFVWQnVmZmVyJiZqLmRlbGV0ZUJ1ZmZlcihhLl9fd2ViZ2xVVkJ1ZmZlcik7dm9pZCAwIT09YS5fX3dlYmdsVVYyQnVmZmVyJiZqLmRlbGV0ZUJ1ZmZlcihhLl9fd2ViZ2xVVjJCdWZmZXIpO3ZvaWQgMCE9PWEuX193ZWJnbFNraW5JbmRpY2VzQnVmZmVyJiZqLmRlbGV0ZUJ1ZmZlcihhLl9fd2ViZ2xTa2luSW5kaWNlc0J1ZmZlcik7dm9pZCAwIT09YS5fX3dlYmdsU2tpbldlaWdodHNCdWZmZXImJmouZGVsZXRlQnVmZmVyKGEuX193ZWJnbFNraW5XZWlnaHRzQnVmZmVyKTt2b2lkIDAhPT1hLl9fd2ViZ2xGYWNlQnVmZmVyJiZqLmRlbGV0ZUJ1ZmZlcihhLl9fd2ViZ2xGYWNlQnVmZmVyKTtcbnZvaWQgMCE9PWEuX193ZWJnbExpbmVCdWZmZXImJmouZGVsZXRlQnVmZmVyKGEuX193ZWJnbExpbmVCdWZmZXIpO3ZvaWQgMCE9PWEuX193ZWJnbExpbmVEaXN0YW5jZUJ1ZmZlciYmai5kZWxldGVCdWZmZXIoYS5fX3dlYmdsTGluZURpc3RhbmNlQnVmZmVyKTtpZih2b2lkIDAhPT1hLl9fd2ViZ2xDdXN0b21BdHRyaWJ1dGVzTGlzdClmb3IodmFyIGIgaW4gYS5fX3dlYmdsQ3VzdG9tQXR0cmlidXRlc0xpc3Qpai5kZWxldGVCdWZmZXIoYS5fX3dlYmdsQ3VzdG9tQXR0cmlidXRlc0xpc3RbYl0uYnVmZmVyKTtMLmluZm8ubWVtb3J5Lmdlb21ldHJpZXMtLX0sR2I9ZnVuY3Rpb24oYSl7dmFyIGI9YS5wcm9ncmFtO2lmKHZvaWQgMCE9PWIpe2EucHJvZ3JhbT12b2lkIDA7dmFyIGMsZCxlPSExLGE9MDtmb3IoYz1kYS5sZW5ndGg7YTxjO2ErKylpZihkPWRhW2FdLGQucHJvZ3JhbT09PWIpe2QudXNlZFRpbWVzLS07MD09PWQudXNlZFRpbWVzJiYoZT0hMCk7YnJlYWt9aWYoITA9PT1lKXtlPVxuW107YT0wO2ZvcihjPWRhLmxlbmd0aDthPGM7YSsrKWQ9ZGFbYV0sZC5wcm9ncmFtIT09YiYmZS5wdXNoKGQpO2RhPWU7ai5kZWxldGVQcm9ncmFtKGIpO0wuaW5mby5tZW1vcnkucHJvZ3JhbXMtLX19fTt0aGlzLnJlbmRlckJ1ZmZlckltbWVkaWF0ZT1mdW5jdGlvbihhLGIsYyl7YS5oYXNQb3NpdGlvbnMmJiFhLl9fd2ViZ2xWZXJ0ZXhCdWZmZXImJihhLl9fd2ViZ2xWZXJ0ZXhCdWZmZXI9ai5jcmVhdGVCdWZmZXIoKSk7YS5oYXNOb3JtYWxzJiYhYS5fX3dlYmdsTm9ybWFsQnVmZmVyJiYoYS5fX3dlYmdsTm9ybWFsQnVmZmVyPWouY3JlYXRlQnVmZmVyKCkpO2EuaGFzVXZzJiYhYS5fX3dlYmdsVXZCdWZmZXImJihhLl9fd2ViZ2xVdkJ1ZmZlcj1qLmNyZWF0ZUJ1ZmZlcigpKTthLmhhc0NvbG9ycyYmIWEuX193ZWJnbENvbG9yQnVmZmVyJiYoYS5fX3dlYmdsQ29sb3JCdWZmZXI9ai5jcmVhdGVCdWZmZXIoKSk7YS5oYXNQb3NpdGlvbnMmJihqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsXG5hLl9fd2ViZ2xWZXJ0ZXhCdWZmZXIpLGouYnVmZmVyRGF0YShqLkFSUkFZX0JVRkZFUixhLnBvc2l0aW9uQXJyYXksai5EWU5BTUlDX0RSQVcpLGouZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoYi5hdHRyaWJ1dGVzLnBvc2l0aW9uKSxqLnZlcnRleEF0dHJpYlBvaW50ZXIoYi5hdHRyaWJ1dGVzLnBvc2l0aW9uLDMsai5GTE9BVCwhMSwwLDApKTtpZihhLmhhc05vcm1hbHMpe2ouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUixhLl9fd2ViZ2xOb3JtYWxCdWZmZXIpO2lmKGMuc2hhZGluZz09PVRIUkVFLkZsYXRTaGFkaW5nKXt2YXIgZCxlLGYsZyxoLGksayxsLG0sbixwLHE9MyphLmNvdW50O2ZvcihwPTA7cDxxO3ArPTkpbj1hLm5vcm1hbEFycmF5LGQ9bltwXSxlPW5bcCsxXSxmPW5bcCsyXSxnPW5bcCszXSxpPW5bcCs0XSxsPW5bcCs1XSxoPW5bcCs2XSxrPW5bcCs3XSxtPW5bcCs4XSxkPShkK2craCkvMyxlPShlK2kraykvMyxmPShmK2wrbSkvMyxuW3BdPWQsbltwKzFdPWUsbltwK1xuMl09ZixuW3ArM109ZCxuW3ArNF09ZSxuW3ArNV09ZixuW3ArNl09ZCxuW3ArN109ZSxuW3ArOF09Zn1qLmJ1ZmZlckRhdGEoai5BUlJBWV9CVUZGRVIsYS5ub3JtYWxBcnJheSxqLkRZTkFNSUNfRFJBVyk7ai5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShiLmF0dHJpYnV0ZXMubm9ybWFsKTtqLnZlcnRleEF0dHJpYlBvaW50ZXIoYi5hdHRyaWJ1dGVzLm5vcm1hbCwzLGouRkxPQVQsITEsMCwwKX1hLmhhc1V2cyYmYy5tYXAmJihqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsYS5fX3dlYmdsVXZCdWZmZXIpLGouYnVmZmVyRGF0YShqLkFSUkFZX0JVRkZFUixhLnV2QXJyYXksai5EWU5BTUlDX0RSQVcpLGouZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoYi5hdHRyaWJ1dGVzLnV2KSxqLnZlcnRleEF0dHJpYlBvaW50ZXIoYi5hdHRyaWJ1dGVzLnV2LDIsai5GTE9BVCwhMSwwLDApKTthLmhhc0NvbG9ycyYmYy52ZXJ0ZXhDb2xvcnMhPT1USFJFRS5Ob0NvbG9ycyYmKGouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUixcbmEuX193ZWJnbENvbG9yQnVmZmVyKSxqLmJ1ZmZlckRhdGEoai5BUlJBWV9CVUZGRVIsYS5jb2xvckFycmF5LGouRFlOQU1JQ19EUkFXKSxqLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGIuYXR0cmlidXRlcy5jb2xvciksai52ZXJ0ZXhBdHRyaWJQb2ludGVyKGIuYXR0cmlidXRlcy5jb2xvciwzLGouRkxPQVQsITEsMCwwKSk7ai5kcmF3QXJyYXlzKGouVFJJQU5HTEVTLDAsYS5jb3VudCk7YS5jb3VudD0wfTt0aGlzLnJlbmRlckJ1ZmZlckRpcmVjdD1mdW5jdGlvbihhLGIsYyxkLGUsZil7aWYoITEhPT1kLnZpc2libGUpe3ZhciBpLGssbCxtO2k9eihhLGIsYyxkLGYpO2I9aS5hdHRyaWJ1dGVzO2E9ZS5hdHRyaWJ1dGVzO2M9ITE7aT0xNjc3NzIxNSplLmlkKzIqaS5pZCsoZC53aXJlZnJhbWU/MTowKTtpIT09JCYmKCQ9aSxjPSEwKTtjJiZnKCk7aWYoZiBpbnN0YW5jZW9mIFRIUkVFLk1lc2gpaWYoZj1hLmluZGV4KXtlPWUub2Zmc2V0czsxPGUubGVuZ3RoJiYoYz0hMCk7Zm9yKHZhciBuPVxuMCxwPWUubGVuZ3RoO248cDtuKyspe3ZhciBxPWVbbl0uaW5kZXg7aWYoYyl7Zm9yKGsgaW4gYilsPWJba10saT1hW2tdLDA8PWwmJihpPyhtPWkuaXRlbVNpemUsai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLGkuYnVmZmVyKSxoKGwpLGoudmVydGV4QXR0cmliUG9pbnRlcihsLG0sai5GTE9BVCwhMSwwLDQqcSptKSk6ZC5kZWZhdWx0QXR0cmlidXRlVmFsdWVzJiYoMj09PWQuZGVmYXVsdEF0dHJpYnV0ZVZhbHVlc1trXS5sZW5ndGg/ai52ZXJ0ZXhBdHRyaWIyZnYobCxkLmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXNba10pOjM9PT1kLmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXNba10ubGVuZ3RoJiZqLnZlcnRleEF0dHJpYjNmdihsLGQuZGVmYXVsdEF0dHJpYnV0ZVZhbHVlc1trXSkpKTtqLmJpbmRCdWZmZXIoai5FTEVNRU5UX0FSUkFZX0JVRkZFUixmLmJ1ZmZlcil9ai5kcmF3RWxlbWVudHMoai5UUklBTkdMRVMsZVtuXS5jb3VudCxqLlVOU0lHTkVEX1NIT1JULDIqZVtuXS5zdGFydCk7XG5MLmluZm8ucmVuZGVyLmNhbGxzKys7TC5pbmZvLnJlbmRlci52ZXJ0aWNlcys9ZVtuXS5jb3VudDtMLmluZm8ucmVuZGVyLmZhY2VzKz1lW25dLmNvdW50LzN9fWVsc2V7aWYoYylmb3IoayBpbiBiKVwiaW5kZXhcIiE9PWsmJihsPWJba10saT1hW2tdLDA8PWwmJihpPyhtPWkuaXRlbVNpemUsai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLGkuYnVmZmVyKSxoKGwpLGoudmVydGV4QXR0cmliUG9pbnRlcihsLG0sai5GTE9BVCwhMSwwLDApKTpkLmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXMmJmQuZGVmYXVsdEF0dHJpYnV0ZVZhbHVlc1trXSYmKDI9PT1kLmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXNba10ubGVuZ3RoP2oudmVydGV4QXR0cmliMmZ2KGwsZC5kZWZhdWx0QXR0cmlidXRlVmFsdWVzW2tdKTozPT09ZC5kZWZhdWx0QXR0cmlidXRlVmFsdWVzW2tdLmxlbmd0aCYmai52ZXJ0ZXhBdHRyaWIzZnYobCxkLmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXNba10pKSkpO2Q9ZS5hdHRyaWJ1dGVzLnBvc2l0aW9uO1xuai5kcmF3QXJyYXlzKGouVFJJQU5HTEVTLDAsZC5udW1JdGVtcy8zKTtMLmluZm8ucmVuZGVyLmNhbGxzKys7TC5pbmZvLnJlbmRlci52ZXJ0aWNlcys9ZC5udW1JdGVtcy8zO0wuaW5mby5yZW5kZXIuZmFjZXMrPWQubnVtSXRlbXMvMy8zfWVsc2UgaWYoZiBpbnN0YW5jZW9mIFRIUkVFLlBhcnRpY2xlU3lzdGVtKXtpZihjKXtmb3IoayBpbiBiKWw9YltrXSxpPWFba10sMDw9bCYmKGk/KG09aS5pdGVtU2l6ZSxqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsaS5idWZmZXIpLGgobCksai52ZXJ0ZXhBdHRyaWJQb2ludGVyKGwsbSxqLkZMT0FULCExLDAsMCkpOmQuZGVmYXVsdEF0dHJpYnV0ZVZhbHVlcyYmZC5kZWZhdWx0QXR0cmlidXRlVmFsdWVzW2tdJiYoMj09PWQuZGVmYXVsdEF0dHJpYnV0ZVZhbHVlc1trXS5sZW5ndGg/ai52ZXJ0ZXhBdHRyaWIyZnYobCxkLmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXNba10pOjM9PT1kLmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXNba10ubGVuZ3RoJiZcbmoudmVydGV4QXR0cmliM2Z2KGwsZC5kZWZhdWx0QXR0cmlidXRlVmFsdWVzW2tdKSkpO2Q9YS5wb3NpdGlvbjtqLmRyYXdBcnJheXMoai5QT0lOVFMsMCxkLm51bUl0ZW1zLzMpO0wuaW5mby5yZW5kZXIuY2FsbHMrKztMLmluZm8ucmVuZGVyLnBvaW50cys9ZC5udW1JdGVtcy8zfX1lbHNlIGlmKGYgaW5zdGFuY2VvZiBUSFJFRS5MaW5lJiZjKXtmb3IoayBpbiBiKWw9YltrXSxpPWFba10sMDw9bCYmKGk/KG09aS5pdGVtU2l6ZSxqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsaS5idWZmZXIpLGgobCksai52ZXJ0ZXhBdHRyaWJQb2ludGVyKGwsbSxqLkZMT0FULCExLDAsMCkpOmQuZGVmYXVsdEF0dHJpYnV0ZVZhbHVlcyYmZC5kZWZhdWx0QXR0cmlidXRlVmFsdWVzW2tdJiYoMj09PWQuZGVmYXVsdEF0dHJpYnV0ZVZhbHVlc1trXS5sZW5ndGg/ai52ZXJ0ZXhBdHRyaWIyZnYobCxkLmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXNba10pOjM9PT1kLmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXNba10ubGVuZ3RoJiZcbmoudmVydGV4QXR0cmliM2Z2KGwsZC5kZWZhdWx0QXR0cmlidXRlVmFsdWVzW2tdKSkpO2s9Zi50eXBlPT09VEhSRUUuTGluZVN0cmlwP2ouTElORV9TVFJJUDpqLkxJTkVTO0UoZC5saW5ld2lkdGgpO2Q9YS5wb3NpdGlvbjtqLmRyYXdBcnJheXMoaywwLGQubnVtSXRlbXMvMyk7TC5pbmZvLnJlbmRlci5jYWxscysrO0wuaW5mby5yZW5kZXIucG9pbnRzKz1kLm51bUl0ZW1zfX19O3RoaXMucmVuZGVyQnVmZmVyPWZ1bmN0aW9uKGEsYixjLGQsZSxmKXtpZighMSE9PWQudmlzaWJsZSl7dmFyIGksbCxjPXooYSxiLGMsZCxmKSxhPWMuYXR0cmlidXRlcyxiPSExLGM9MTY3NzcyMTUqZS5pZCsyKmMuaWQrKGQud2lyZWZyYW1lPzE6MCk7YyE9PSQmJigkPWMsYj0hMCk7YiYmZygpO2lmKCFkLm1vcnBoVGFyZ2V0cyYmMDw9YS5wb3NpdGlvbiliJiYoai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLGUuX193ZWJnbFZlcnRleEJ1ZmZlciksaChhLnBvc2l0aW9uKSxqLnZlcnRleEF0dHJpYlBvaW50ZXIoYS5wb3NpdGlvbixcbjMsai5GTE9BVCwhMSwwLDApKTtlbHNlIGlmKGYubW9ycGhUYXJnZXRCYXNlKXtjPWQucHJvZ3JhbS5hdHRyaWJ1dGVzOy0xIT09Zi5tb3JwaFRhcmdldEJhc2UmJjA8PWMucG9zaXRpb24/KGouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUixlLl9fd2ViZ2xNb3JwaFRhcmdldHNCdWZmZXJzW2YubW9ycGhUYXJnZXRCYXNlXSksaChjLnBvc2l0aW9uKSxqLnZlcnRleEF0dHJpYlBvaW50ZXIoYy5wb3NpdGlvbiwzLGouRkxPQVQsITEsMCwwKSk6MDw9Yy5wb3NpdGlvbiYmKGouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUixlLl9fd2ViZ2xWZXJ0ZXhCdWZmZXIpLGgoYy5wb3NpdGlvbiksai52ZXJ0ZXhBdHRyaWJQb2ludGVyKGMucG9zaXRpb24sMyxqLkZMT0FULCExLDAsMCkpO2lmKGYubW9ycGhUYXJnZXRGb3JjZWRPcmRlci5sZW5ndGgpe3ZhciBtPTA7bD1mLm1vcnBoVGFyZ2V0Rm9yY2VkT3JkZXI7Zm9yKGk9Zi5tb3JwaFRhcmdldEluZmx1ZW5jZXM7bTxkLm51bVN1cHBvcnRlZE1vcnBoVGFyZ2V0cyYmXG5tPGwubGVuZ3RoOykwPD1jW1wibW9ycGhUYXJnZXRcIittXSYmKGouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUixlLl9fd2ViZ2xNb3JwaFRhcmdldHNCdWZmZXJzW2xbbV1dKSxoKGNbXCJtb3JwaFRhcmdldFwiK21dKSxqLnZlcnRleEF0dHJpYlBvaW50ZXIoY1tcIm1vcnBoVGFyZ2V0XCIrbV0sMyxqLkZMT0FULCExLDAsMCkpLDA8PWNbXCJtb3JwaE5vcm1hbFwiK21dJiZkLm1vcnBoTm9ybWFscyYmKGouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUixlLl9fd2ViZ2xNb3JwaE5vcm1hbHNCdWZmZXJzW2xbbV1dKSxoKGNbXCJtb3JwaE5vcm1hbFwiK21dKSxqLnZlcnRleEF0dHJpYlBvaW50ZXIoY1tcIm1vcnBoTm9ybWFsXCIrbV0sMyxqLkZMT0FULCExLDAsMCkpLGYuX193ZWJnbE1vcnBoVGFyZ2V0SW5mbHVlbmNlc1ttXT1pW2xbbV1dLG0rK31lbHNle2w9W107aT1mLm1vcnBoVGFyZ2V0SW5mbHVlbmNlczt2YXIgbixwPWkubGVuZ3RoO2ZvcihuPTA7bjxwO24rKyltPWlbbl0sMDxtJiZsLnB1c2goW20sXG5uXSk7bC5sZW5ndGg+ZC5udW1TdXBwb3J0ZWRNb3JwaFRhcmdldHM/KGwuc29ydChrKSxsLmxlbmd0aD1kLm51bVN1cHBvcnRlZE1vcnBoVGFyZ2V0cyk6bC5sZW5ndGg+ZC5udW1TdXBwb3J0ZWRNb3JwaE5vcm1hbHM/bC5zb3J0KGspOjA9PT1sLmxlbmd0aCYmbC5wdXNoKFswLDBdKTtmb3IobT0wO208ZC5udW1TdXBwb3J0ZWRNb3JwaFRhcmdldHM7KWxbbV0/KG49bFttXVsxXSwwPD1jW1wibW9ycGhUYXJnZXRcIittXSYmKGouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUixlLl9fd2ViZ2xNb3JwaFRhcmdldHNCdWZmZXJzW25dKSxoKGNbXCJtb3JwaFRhcmdldFwiK21dKSxqLnZlcnRleEF0dHJpYlBvaW50ZXIoY1tcIm1vcnBoVGFyZ2V0XCIrbV0sMyxqLkZMT0FULCExLDAsMCkpLDA8PWNbXCJtb3JwaE5vcm1hbFwiK21dJiZkLm1vcnBoTm9ybWFscyYmKGouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUixlLl9fd2ViZ2xNb3JwaE5vcm1hbHNCdWZmZXJzW25dKSxoKGNbXCJtb3JwaE5vcm1hbFwiK1xubV0pLGoudmVydGV4QXR0cmliUG9pbnRlcihjW1wibW9ycGhOb3JtYWxcIittXSwzLGouRkxPQVQsITEsMCwwKSksZi5fX3dlYmdsTW9ycGhUYXJnZXRJbmZsdWVuY2VzW21dPWlbbl0pOmYuX193ZWJnbE1vcnBoVGFyZ2V0SW5mbHVlbmNlc1ttXT0wLG0rK31udWxsIT09ZC5wcm9ncmFtLnVuaWZvcm1zLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcyYmai51bmlmb3JtMWZ2KGQucHJvZ3JhbS51bmlmb3Jtcy5tb3JwaFRhcmdldEluZmx1ZW5jZXMsZi5fX3dlYmdsTW9ycGhUYXJnZXRJbmZsdWVuY2VzKX1pZihiKXtpZihlLl9fd2ViZ2xDdXN0b21BdHRyaWJ1dGVzTGlzdCl7aT0wO2ZvcihsPWUuX193ZWJnbEN1c3RvbUF0dHJpYnV0ZXNMaXN0Lmxlbmd0aDtpPGw7aSsrKWM9ZS5fX3dlYmdsQ3VzdG9tQXR0cmlidXRlc0xpc3RbaV0sMDw9YVtjLmJ1ZmZlci5iZWxvbmdzVG9BdHRyaWJ1dGVdJiYoai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLGMuYnVmZmVyKSxoKGFbYy5idWZmZXIuYmVsb25nc1RvQXR0cmlidXRlXSksXG5qLnZlcnRleEF0dHJpYlBvaW50ZXIoYVtjLmJ1ZmZlci5iZWxvbmdzVG9BdHRyaWJ1dGVdLGMuc2l6ZSxqLkZMT0FULCExLDAsMCkpfTA8PWEuY29sb3ImJigwPGYuZ2VvbWV0cnkuY29sb3JzLmxlbmd0aHx8MDxmLmdlb21ldHJ5LmZhY2VzLmxlbmd0aD8oai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLGUuX193ZWJnbENvbG9yQnVmZmVyKSxoKGEuY29sb3IpLGoudmVydGV4QXR0cmliUG9pbnRlcihhLmNvbG9yLDMsai5GTE9BVCwhMSwwLDApKTpkLmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXMmJmoudmVydGV4QXR0cmliM2Z2KGEuY29sb3IsZC5kZWZhdWx0QXR0cmlidXRlVmFsdWVzLmNvbG9yKSk7MDw9YS5ub3JtYWwmJihqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsZS5fX3dlYmdsTm9ybWFsQnVmZmVyKSxoKGEubm9ybWFsKSxqLnZlcnRleEF0dHJpYlBvaW50ZXIoYS5ub3JtYWwsMyxqLkZMT0FULCExLDAsMCkpOzA8PWEudGFuZ2VudCYmKGouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUixcbmUuX193ZWJnbFRhbmdlbnRCdWZmZXIpLGgoYS50YW5nZW50KSxqLnZlcnRleEF0dHJpYlBvaW50ZXIoYS50YW5nZW50LDQsai5GTE9BVCwhMSwwLDApKTswPD1hLnV2JiYoZi5nZW9tZXRyeS5mYWNlVmVydGV4VXZzWzBdPyhqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsZS5fX3dlYmdsVVZCdWZmZXIpLGgoYS51diksai52ZXJ0ZXhBdHRyaWJQb2ludGVyKGEudXYsMixqLkZMT0FULCExLDAsMCkpOmQuZGVmYXVsdEF0dHJpYnV0ZVZhbHVlcyYmai52ZXJ0ZXhBdHRyaWIyZnYoYS51dixkLmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXMudXYpKTswPD1hLnV2MiYmKGYuZ2VvbWV0cnkuZmFjZVZlcnRleFV2c1sxXT8oai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLGUuX193ZWJnbFVWMkJ1ZmZlciksaChhLnV2Miksai52ZXJ0ZXhBdHRyaWJQb2ludGVyKGEudXYyLDIsai5GTE9BVCwhMSwwLDApKTpkLmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXMmJmoudmVydGV4QXR0cmliMmZ2KGEudXYyLFxuZC5kZWZhdWx0QXR0cmlidXRlVmFsdWVzLnV2MikpO2Quc2tpbm5pbmcmJigwPD1hLnNraW5JbmRleCYmMDw9YS5za2luV2VpZ2h0KSYmKGouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUixlLl9fd2ViZ2xTa2luSW5kaWNlc0J1ZmZlciksaChhLnNraW5JbmRleCksai52ZXJ0ZXhBdHRyaWJQb2ludGVyKGEuc2tpbkluZGV4LDQsai5GTE9BVCwhMSwwLDApLGouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUixlLl9fd2ViZ2xTa2luV2VpZ2h0c0J1ZmZlciksaChhLnNraW5XZWlnaHQpLGoudmVydGV4QXR0cmliUG9pbnRlcihhLnNraW5XZWlnaHQsNCxqLkZMT0FULCExLDAsMCkpOzA8PWEubGluZURpc3RhbmNlJiYoai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLGUuX193ZWJnbExpbmVEaXN0YW5jZUJ1ZmZlciksaChhLmxpbmVEaXN0YW5jZSksai52ZXJ0ZXhBdHRyaWJQb2ludGVyKGEubGluZURpc3RhbmNlLDEsai5GTE9BVCwhMSwwLDApKX1mIGluc3RhbmNlb2YgVEhSRUUuTWVzaD9cbihkLndpcmVmcmFtZT8oRShkLndpcmVmcmFtZUxpbmV3aWR0aCksYiYmai5iaW5kQnVmZmVyKGouRUxFTUVOVF9BUlJBWV9CVUZGRVIsZS5fX3dlYmdsTGluZUJ1ZmZlciksai5kcmF3RWxlbWVudHMoai5MSU5FUyxlLl9fd2ViZ2xMaW5lQ291bnQsai5VTlNJR05FRF9TSE9SVCwwKSk6KGImJmouYmluZEJ1ZmZlcihqLkVMRU1FTlRfQVJSQVlfQlVGRkVSLGUuX193ZWJnbEZhY2VCdWZmZXIpLGouZHJhd0VsZW1lbnRzKGouVFJJQU5HTEVTLGUuX193ZWJnbEZhY2VDb3VudCxqLlVOU0lHTkVEX1NIT1JULDApKSxMLmluZm8ucmVuZGVyLmNhbGxzKyssTC5pbmZvLnJlbmRlci52ZXJ0aWNlcys9ZS5fX3dlYmdsRmFjZUNvdW50LEwuaW5mby5yZW5kZXIuZmFjZXMrPWUuX193ZWJnbEZhY2VDb3VudC8zKTpmIGluc3RhbmNlb2YgVEhSRUUuTGluZT8oZj1mLnR5cGU9PT1USFJFRS5MaW5lU3RyaXA/ai5MSU5FX1NUUklQOmouTElORVMsRShkLmxpbmV3aWR0aCksai5kcmF3QXJyYXlzKGYsMCxcbmUuX193ZWJnbExpbmVDb3VudCksTC5pbmZvLnJlbmRlci5jYWxscysrKTpmIGluc3RhbmNlb2YgVEhSRUUuUGFydGljbGVTeXN0ZW0mJihqLmRyYXdBcnJheXMoai5QT0lOVFMsMCxlLl9fd2ViZ2xQYXJ0aWNsZUNvdW50KSxMLmluZm8ucmVuZGVyLmNhbGxzKyssTC5pbmZvLnJlbmRlci5wb2ludHMrPWUuX193ZWJnbFBhcnRpY2xlQ291bnQpfX07dGhpcy5yZW5kZXI9ZnVuY3Rpb24oYSxiLGMsZCl7aWYoITE9PT1iIGluc3RhbmNlb2YgVEhSRUUuQ2FtZXJhKWNvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFJlbmRlcmVyLnJlbmRlcjogY2FtZXJhIGlzIG5vdCBhbiBpbnN0YW5jZSBvZiBUSFJFRS5DYW1lcmEuXCIpO2Vsc2V7dmFyIGUsZixnLGgsaz1hLl9fbGlnaHRzLG49YS5mb2c7QWE9LTE7dGE9ITA7ITA9PT1hLmF1dG9VcGRhdGUmJmEudXBkYXRlTWF0cml4V29ybGQoKTt2b2lkIDA9PT1iLnBhcmVudCYmYi51cGRhdGVNYXRyaXhXb3JsZCgpO2IubWF0cml4V29ybGRJbnZlcnNlLmdldEludmVyc2UoYi5tYXRyaXhXb3JsZCk7XG5FYS5tdWx0aXBseU1hdHJpY2VzKGIucHJvamVjdGlvbk1hdHJpeCxiLm1hdHJpeFdvcmxkSW52ZXJzZSk7bGEuc2V0RnJvbU1hdHJpeChFYSk7dGhpcy5hdXRvVXBkYXRlT2JqZWN0cyYmdGhpcy5pbml0V2ViR0xPYmplY3RzKGEpO20odGhpcy5yZW5kZXJQbHVnaW5zUHJlLGEsYik7TC5pbmZvLnJlbmRlci5jYWxscz0wO0wuaW5mby5yZW5kZXIudmVydGljZXM9MDtMLmluZm8ucmVuZGVyLmZhY2VzPTA7TC5pbmZvLnJlbmRlci5wb2ludHM9MDt0aGlzLnNldFJlbmRlclRhcmdldChjKTsodGhpcy5hdXRvQ2xlYXJ8fGQpJiZ0aGlzLmNsZWFyKHRoaXMuYXV0b0NsZWFyQ29sb3IsdGhpcy5hdXRvQ2xlYXJEZXB0aCx0aGlzLmF1dG9DbGVhclN0ZW5jaWwpO2g9YS5fX3dlYmdsT2JqZWN0cztkPTA7Zm9yKGU9aC5sZW5ndGg7ZDxlO2QrKylpZihmPWhbZF0sZz1mLm9iamVjdCxmLmlkPWQsZi5yZW5kZXI9ITEsZy52aXNpYmxlJiYoIShnIGluc3RhbmNlb2YgVEhSRUUuTWVzaHx8ZyBpbnN0YW5jZW9mXG5USFJFRS5QYXJ0aWNsZVN5c3RlbSl8fCFnLmZydXN0dW1DdWxsZWR8fGxhLmludGVyc2VjdHNPYmplY3QoZykpKXt2YXIgcT1nO3EuX21vZGVsVmlld01hdHJpeC5tdWx0aXBseU1hdHJpY2VzKGIubWF0cml4V29ybGRJbnZlcnNlLHEubWF0cml4V29ybGQpO3EuX25vcm1hbE1hdHJpeC5nZXROb3JtYWxNYXRyaXgocS5fbW9kZWxWaWV3TWF0cml4KTt2YXIgcT1mLHI9cS5idWZmZXIsdD12b2lkIDAscz10PXZvaWQgMCxzPXEub2JqZWN0Lm1hdGVyaWFsO2lmKHMgaW5zdGFuY2VvZiBUSFJFRS5NZXNoRmFjZU1hdGVyaWFsKXQ9ci5tYXRlcmlhbEluZGV4LHQ9cy5tYXRlcmlhbHNbdF0sdC50cmFuc3BhcmVudD8ocS50cmFuc3BhcmVudD10LHEub3BhcXVlPW51bGwpOihxLm9wYXF1ZT10LHEudHJhbnNwYXJlbnQ9bnVsbCk7ZWxzZSBpZih0PXMpdC50cmFuc3BhcmVudD8ocS50cmFuc3BhcmVudD10LHEub3BhcXVlPW51bGwpOihxLm9wYXF1ZT10LHEudHJhbnNwYXJlbnQ9bnVsbCk7Zi5yZW5kZXI9XG4hMDshMD09PXRoaXMuc29ydE9iamVjdHMmJihudWxsIT09Zy5yZW5kZXJEZXB0aD9mLno9Zy5yZW5kZXJEZXB0aDoocmEuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGcubWF0cml4V29ybGQpLHJhLmFwcGx5UHJvamVjdGlvbihFYSksZi56PXJhLnopKX10aGlzLnNvcnRPYmplY3RzJiZoLnNvcnQoaSk7aD1hLl9fd2ViZ2xPYmplY3RzSW1tZWRpYXRlO2Q9MDtmb3IoZT1oLmxlbmd0aDtkPGU7ZCsrKWY9aFtkXSxnPWYub2JqZWN0LGcudmlzaWJsZSYmKGcuX21vZGVsVmlld01hdHJpeC5tdWx0aXBseU1hdHJpY2VzKGIubWF0cml4V29ybGRJbnZlcnNlLGcubWF0cml4V29ybGQpLGcuX25vcm1hbE1hdHJpeC5nZXROb3JtYWxNYXRyaXgoZy5fbW9kZWxWaWV3TWF0cml4KSxnPWYub2JqZWN0Lm1hdGVyaWFsLGcudHJhbnNwYXJlbnQ/KGYudHJhbnNwYXJlbnQ9ZyxmLm9wYXF1ZT1udWxsKTooZi5vcGFxdWU9ZyxmLnRyYW5zcGFyZW50PW51bGwpKTthLm92ZXJyaWRlTWF0ZXJpYWw/KGQ9YS5vdmVycmlkZU1hdGVyaWFsLFxudGhpcy5zZXRCbGVuZGluZyhkLmJsZW5kaW5nLGQuYmxlbmRFcXVhdGlvbixkLmJsZW5kU3JjLGQuYmxlbmREc3QpLHRoaXMuc2V0RGVwdGhUZXN0KGQuZGVwdGhUZXN0KSx0aGlzLnNldERlcHRoV3JpdGUoZC5kZXB0aFdyaXRlKSxBKGQucG9seWdvbk9mZnNldCxkLnBvbHlnb25PZmZzZXRGYWN0b3IsZC5wb2x5Z29uT2Zmc2V0VW5pdHMpLGwoYS5fX3dlYmdsT2JqZWN0cywhMSxcIlwiLGIsayxuLCEwLGQpLHAoYS5fX3dlYmdsT2JqZWN0c0ltbWVkaWF0ZSxcIlwiLGIsayxuLCExLGQpKTooZD1udWxsLHRoaXMuc2V0QmxlbmRpbmcoVEhSRUUuTm9CbGVuZGluZyksbChhLl9fd2ViZ2xPYmplY3RzLCEwLFwib3BhcXVlXCIsYixrLG4sITEsZCkscChhLl9fd2ViZ2xPYmplY3RzSW1tZWRpYXRlLFwib3BhcXVlXCIsYixrLG4sITEsZCksbChhLl9fd2ViZ2xPYmplY3RzLCExLFwidHJhbnNwYXJlbnRcIixiLGssbiwhMCxkKSxwKGEuX193ZWJnbE9iamVjdHNJbW1lZGlhdGUsXCJ0cmFuc3BhcmVudFwiLGIsXG5rLG4sITAsZCkpO20odGhpcy5yZW5kZXJQbHVnaW5zUG9zdCxhLGIpO2MmJihjLmdlbmVyYXRlTWlwbWFwcyYmYy5taW5GaWx0ZXIhPT1USFJFRS5OZWFyZXN0RmlsdGVyJiZjLm1pbkZpbHRlciE9PVRIUkVFLkxpbmVhckZpbHRlcikmJihjIGluc3RhbmNlb2YgVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXRDdWJlPyhqLmJpbmRUZXh0dXJlKGouVEVYVFVSRV9DVUJFX01BUCxjLl9fd2ViZ2xUZXh0dXJlKSxqLmdlbmVyYXRlTWlwbWFwKGouVEVYVFVSRV9DVUJFX01BUCksai5iaW5kVGV4dHVyZShqLlRFWFRVUkVfQ1VCRV9NQVAsbnVsbCkpOihqLmJpbmRUZXh0dXJlKGouVEVYVFVSRV8yRCxjLl9fd2ViZ2xUZXh0dXJlKSxqLmdlbmVyYXRlTWlwbWFwKGouVEVYVFVSRV8yRCksai5iaW5kVGV4dHVyZShqLlRFWFRVUkVfMkQsbnVsbCkpKTt0aGlzLnNldERlcHRoVGVzdCghMCk7dGhpcy5zZXREZXB0aFdyaXRlKCEwKX19O3RoaXMucmVuZGVySW1tZWRpYXRlT2JqZWN0PWZ1bmN0aW9uKGEsXG5iLGMsZCxlKXt2YXIgZj16KGEsYixjLGQsZSk7JD0tMTtMLnNldE1hdGVyaWFsRmFjZXMoZCk7ZS5pbW1lZGlhdGVSZW5kZXJDYWxsYmFjaz9lLmltbWVkaWF0ZVJlbmRlckNhbGxiYWNrKGYsaixsYSk6ZS5yZW5kZXIoZnVuY3Rpb24oYSl7TC5yZW5kZXJCdWZmZXJJbW1lZGlhdGUoYSxmLGQpfSl9O3RoaXMuaW5pdFdlYkdMT2JqZWN0cz1mdW5jdGlvbihhKXthLl9fd2ViZ2xPYmplY3RzfHwoYS5fX3dlYmdsT2JqZWN0cz1bXSxhLl9fd2ViZ2xPYmplY3RzSW1tZWRpYXRlPVtdLGEuX193ZWJnbFNwcml0ZXM9W10sYS5fX3dlYmdsRmxhcmVzPVtdKTtmb3IoO2EuX19vYmplY3RzQWRkZWQubGVuZ3RoOyl0KGEuX19vYmplY3RzQWRkZWRbMF0sYSksYS5fX29iamVjdHNBZGRlZC5zcGxpY2UoMCwxKTtmb3IoO2EuX19vYmplY3RzUmVtb3ZlZC5sZW5ndGg7KXUoYS5fX29iamVjdHNSZW1vdmVkWzBdLGEpLGEuX19vYmplY3RzUmVtb3ZlZC5zcGxpY2UoMCwxKTtmb3IodmFyIGI9MCxnPWEuX193ZWJnbE9iamVjdHMubGVuZ3RoO2I8XG5nO2IrKyl7dmFyIGg9YS5fX3dlYmdsT2JqZWN0c1tiXS5vYmplY3Q7dm9pZCAwPT09aC5fX3dlYmdsSW5pdCYmKHZvaWQgMCE9PWguX193ZWJnbEFjdGl2ZSYmdShoLGEpLHQoaCxhKSk7dmFyIGk9aCxsPWkuZ2VvbWV0cnksbT12b2lkIDAscD12b2lkIDAscj12b2lkIDA7aWYobCBpbnN0YW5jZW9mIFRIUkVFLkJ1ZmZlckdlb21ldHJ5KXt2YXIgcz1qLkRZTkFNSUNfRFJBVyx2PSFsLmR5bmFtaWMsej1sLmF0dHJpYnV0ZXMseT12b2lkIDAseD12b2lkIDA7Zm9yKHkgaW4geil4PXpbeV0seC5uZWVkc1VwZGF0ZSYmKFwiaW5kZXhcIj09PXk/KGouYmluZEJ1ZmZlcihqLkVMRU1FTlRfQVJSQVlfQlVGRkVSLHguYnVmZmVyKSxqLmJ1ZmZlckRhdGEoai5FTEVNRU5UX0FSUkFZX0JVRkZFUix4LmFycmF5LHMpKTooai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLHguYnVmZmVyKSxqLmJ1ZmZlckRhdGEoai5BUlJBWV9CVUZGRVIseC5hcnJheSxzKSkseC5uZWVkc1VwZGF0ZT0hMSksdiYmIXguZHluYW1pYyYmXG4oeC5hcnJheT1udWxsKX1lbHNlIGlmKGkgaW5zdGFuY2VvZiBUSFJFRS5NZXNoKXtmb3IodmFyIEE9MCxCPWwuZ2VvbWV0cnlHcm91cHNMaXN0Lmxlbmd0aDtBPEI7QSsrKWlmKG09bC5nZW9tZXRyeUdyb3Vwc0xpc3RbQV0scj1kKGksbSksbC5idWZmZXJzTmVlZFVwZGF0ZSYmYyhtLGkpLHA9ci5hdHRyaWJ1dGVzJiZxKHIpLGwudmVydGljZXNOZWVkVXBkYXRlfHxsLm1vcnBoVGFyZ2V0c05lZWRVcGRhdGV8fGwuZWxlbWVudHNOZWVkVXBkYXRlfHxsLnV2c05lZWRVcGRhdGV8fGwubm9ybWFsc05lZWRVcGRhdGV8fGwuY29sb3JzTmVlZFVwZGF0ZXx8bC50YW5nZW50c05lZWRVcGRhdGV8fHApe3ZhciB3PW0sRT1pLEQ9ai5EWU5BTUlDX0RSQVcsRz0hbC5keW5hbWljLEY9cjtpZih3Ll9faW5pdHRlZEFycmF5cyl7dmFyIEs9ZShGKSxJPUYudmVydGV4Q29sb3JzP0YudmVydGV4Q29sb3JzOiExLEw9ZihGKSxPPUs9PT1USFJFRS5TbW9vdGhTaGFkaW5nLEM9dm9pZCAwLEo9dm9pZCAwLFxuVj12b2lkIDAsTT12b2lkIDAsUT12b2lkIDAsYmE9dm9pZCAwLFI9dm9pZCAwLFU9dm9pZCAwLFk9dm9pZCAwLHphPXZvaWQgMCwkPXZvaWQgMCxQPXZvaWQgMCxYPXZvaWQgMCxXPXZvaWQgMCxCYT12b2lkIDAsZWE9dm9pZCAwLEFhPXZvaWQgMCxjYT12b2lkIDAsZGE9dm9pZCAwLGhhPXZvaWQgMCxmYT12b2lkIDAsamE9dm9pZCAwLGthPXZvaWQgMCxsYT12b2lkIDAsbmE9dm9pZCAwLHBhPXZvaWQgMCxzYT12b2lkIDAsdGE9dm9pZCAwLHVhPXZvaWQgMCxDYT12b2lkIDAsRGE9dm9pZCAwLEdhPXZvaWQgMCxGYT12b2lkIDAsS2E9dm9pZCAwLFNhPXZvaWQgMCxMYT12b2lkIDAsdmE9dm9pZCAwLHdhPXZvaWQgMCxRYT12b2lkIDAsUmE9dm9pZCAwLGRiPTAsZWI9MCxPYT0wLFBhPTAsVWE9MCxoYj0wLFRhPTAsdGI9MCxaYT0wLHFhPTAseGE9MCxOPTAsTmE9dm9pZCAwLGliPXcuX192ZXJ0ZXhBcnJheSxiYj13Ll9fdXZBcnJheSxjYj13Ll9fdXYyQXJyYXksTWE9dy5fX25vcm1hbEFycmF5LFxuVmE9dy5fX3RhbmdlbnRBcnJheSxqYj13Ll9fY29sb3JBcnJheSxXYT13Ll9fc2tpbkluZGV4QXJyYXksWGE9dy5fX3NraW5XZWlnaHRBcnJheSxmYj13Ll9fbW9ycGhUYXJnZXRzQXJyYXlzLHNiPXcuX19tb3JwaE5vcm1hbHNBcnJheXMscGI9dy5fX3dlYmdsQ3VzdG9tQXR0cmlidXRlc0xpc3QsSD12b2lkIDAsUGI9dy5fX2ZhY2VBcnJheSx2Yj13Ll9fbGluZUFycmF5LEhhPUUuZ2VvbWV0cnksQmI9SGEuZWxlbWVudHNOZWVkVXBkYXRlLHliPUhhLnV2c05lZWRVcGRhdGUsRGI9SGEubm9ybWFsc05lZWRVcGRhdGUsTWI9SGEudGFuZ2VudHNOZWVkVXBkYXRlLE5iPUhhLmNvbG9yc05lZWRVcGRhdGUsT2I9SGEubW9ycGhUYXJnZXRzTmVlZFVwZGF0ZSxlYz1IYS52ZXJ0aWNlcyxhYT13LmZhY2VzMyxrYj1IYS5mYWNlcyxDYj1IYS5mYWNlVmVydGV4VXZzWzBdLEViPUhhLmZhY2VWZXJ0ZXhVdnNbMV0sZmM9SGEuc2tpbkluZGljZXMsUWI9SGEuc2tpbldlaWdodHMsUmI9SGEubW9ycGhUYXJnZXRzLFxuRmI9SGEubW9ycGhOb3JtYWxzO2lmKEhhLnZlcnRpY2VzTmVlZFVwZGF0ZSl7Qz0wO2ZvcihKPWFhLmxlbmd0aDtDPEo7QysrKU09a2JbYWFbQ11dLFA9ZWNbTS5hXSxYPWVjW00uYl0sVz1lY1tNLmNdLGliW2ViXT1QLngsaWJbZWIrMV09UC55LGliW2ViKzJdPVAueixpYltlYiszXT1YLngsaWJbZWIrNF09WC55LGliW2ViKzVdPVgueixpYltlYis2XT1XLngsaWJbZWIrN109Vy55LGliW2ViKzhdPVcueixlYis9OTtqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsdy5fX3dlYmdsVmVydGV4QnVmZmVyKTtqLmJ1ZmZlckRhdGEoai5BUlJBWV9CVUZGRVIsaWIsRCl9aWYoT2Ipe1NhPTA7Zm9yKExhPVJiLmxlbmd0aDtTYTxMYTtTYSsrKXtDPXhhPTA7Zm9yKEo9YWEubGVuZ3RoO0M8SjtDKyspUWE9YWFbQ10sTT1rYltRYV0sUD1SYltTYV0udmVydGljZXNbTS5hXSxYPVJiW1NhXS52ZXJ0aWNlc1tNLmJdLFc9UmJbU2FdLnZlcnRpY2VzW00uY10sdmE9ZmJbU2FdLHZhW3hhXT1QLngsXG52YVt4YSsxXT1QLnksdmFbeGErMl09UC56LHZhW3hhKzNdPVgueCx2YVt4YSs0XT1YLnksdmFbeGErNV09WC56LHZhW3hhKzZdPVcueCx2YVt4YSs3XT1XLnksdmFbeGErOF09Vy56LEYubW9ycGhOb3JtYWxzJiYoTz8oUmE9RmJbU2FdLnZlcnRleE5vcm1hbHNbUWFdLGNhPVJhLmEsZGE9UmEuYixoYT1SYS5jKTpoYT1kYT1jYT1GYltTYV0uZmFjZU5vcm1hbHNbUWFdLHdhPXNiW1NhXSx3YVt4YV09Y2EueCx3YVt4YSsxXT1jYS55LHdhW3hhKzJdPWNhLnosd2FbeGErM109ZGEueCx3YVt4YSs0XT1kYS55LHdhW3hhKzVdPWRhLnosd2FbeGErNl09aGEueCx3YVt4YSs3XT1oYS55LHdhW3hhKzhdPWhhLnopLHhhKz05O2ouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUix3Ll9fd2ViZ2xNb3JwaFRhcmdldHNCdWZmZXJzW1NhXSk7ai5idWZmZXJEYXRhKGouQVJSQVlfQlVGRkVSLGZiW1NhXSxEKTtGLm1vcnBoTm9ybWFscyYmKGouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUix3Ll9fd2ViZ2xNb3JwaE5vcm1hbHNCdWZmZXJzW1NhXSksXG5qLmJ1ZmZlckRhdGEoai5BUlJBWV9CVUZGRVIsc2JbU2FdLEQpKX19aWYoUWIubGVuZ3RoKXtDPTA7Zm9yKEo9YWEubGVuZ3RoO0M8SjtDKyspTT1rYlthYVtDXV0sbGE9UWJbTS5hXSxuYT1RYltNLmJdLHBhPVFiW00uY10sWGFbcWFdPWxhLngsWGFbcWErMV09bGEueSxYYVtxYSsyXT1sYS56LFhhW3FhKzNdPWxhLncsWGFbcWErNF09bmEueCxYYVtxYSs1XT1uYS55LFhhW3FhKzZdPW5hLnosWGFbcWErN109bmEudyxYYVtxYSs4XT1wYS54LFhhW3FhKzldPXBhLnksWGFbcWErMTBdPXBhLnosWGFbcWErMTFdPXBhLncsc2E9ZmNbTS5hXSx0YT1mY1tNLmJdLHVhPWZjW00uY10sV2FbcWFdPXNhLngsV2FbcWErMV09c2EueSxXYVtxYSsyXT1zYS56LFdhW3FhKzNdPXNhLncsV2FbcWErNF09dGEueCxXYVtxYSs1XT10YS55LFdhW3FhKzZdPXRhLnosV2FbcWErN109dGEudyxXYVtxYSs4XT11YS54LFdhW3FhKzldPXVhLnksV2FbcWErMTBdPXVhLnosV2FbcWErMTFdPXVhLncscWErPTEyO1xuMDxxYSYmKGouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUix3Ll9fd2ViZ2xTa2luSW5kaWNlc0J1ZmZlciksai5idWZmZXJEYXRhKGouQVJSQVlfQlVGRkVSLFdhLEQpLGouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUix3Ll9fd2ViZ2xTa2luV2VpZ2h0c0J1ZmZlciksai5idWZmZXJEYXRhKGouQVJSQVlfQlVGRkVSLFhhLEQpKX1pZihOYiYmSSl7Qz0wO2ZvcihKPWFhLmxlbmd0aDtDPEo7QysrKU09a2JbYWFbQ11dLFI9TS52ZXJ0ZXhDb2xvcnMsVT1NLmNvbG9yLDM9PT1SLmxlbmd0aCYmST09PVRIUkVFLlZlcnRleENvbG9ycz8oZmE9UlswXSxqYT1SWzFdLGthPVJbMl0pOmthPWphPWZhPVUsamJbWmFdPWZhLnIsamJbWmErMV09ZmEuZyxqYltaYSsyXT1mYS5iLGpiW1phKzNdPWphLnIsamJbWmErNF09amEuZyxqYltaYSs1XT1qYS5iLGpiW1phKzZdPWthLnIsamJbWmErN109a2EuZyxqYltaYSs4XT1rYS5iLFphKz05OzA8WmEmJihqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsXG53Ll9fd2ViZ2xDb2xvckJ1ZmZlciksai5idWZmZXJEYXRhKGouQVJSQVlfQlVGRkVSLGpiLEQpKX1pZihNYiYmSGEuaGFzVGFuZ2VudHMpe0M9MDtmb3IoSj1hYS5sZW5ndGg7QzxKO0MrKylNPWtiW2FhW0NdXSxZPU0udmVydGV4VGFuZ2VudHMsQmE9WVswXSxlYT1ZWzFdLEFhPVlbMl0sVmFbVGFdPUJhLngsVmFbVGErMV09QmEueSxWYVtUYSsyXT1CYS56LFZhW1RhKzNdPUJhLncsVmFbVGErNF09ZWEueCxWYVtUYSs1XT1lYS55LFZhW1RhKzZdPWVhLnosVmFbVGErN109ZWEudyxWYVtUYSs4XT1BYS54LFZhW1RhKzldPUFhLnksVmFbVGErMTBdPUFhLnosVmFbVGErMTFdPUFhLncsVGErPTEyO2ouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUix3Ll9fd2ViZ2xUYW5nZW50QnVmZmVyKTtqLmJ1ZmZlckRhdGEoai5BUlJBWV9CVUZGRVIsVmEsRCl9aWYoRGImJkspe0M9MDtmb3IoSj1hYS5sZW5ndGg7QzxKO0MrKylpZihNPWtiW2FhW0NdXSxRPU0udmVydGV4Tm9ybWFscyxiYT1NLm5vcm1hbCxcbjM9PT1RLmxlbmd0aCYmTylmb3IoQ2E9MDszPkNhO0NhKyspR2E9UVtDYV0sTWFbaGJdPUdhLngsTWFbaGIrMV09R2EueSxNYVtoYisyXT1HYS56LGhiKz0zO2Vsc2UgZm9yKENhPTA7Mz5DYTtDYSsrKU1hW2hiXT1iYS54LE1hW2hiKzFdPWJhLnksTWFbaGIrMl09YmEueixoYis9MztqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsdy5fX3dlYmdsTm9ybWFsQnVmZmVyKTtqLmJ1ZmZlckRhdGEoai5BUlJBWV9CVUZGRVIsTWEsRCl9aWYoeWImJkNiJiZMKXtDPTA7Zm9yKEo9YWEubGVuZ3RoO0M8SjtDKyspaWYoVj1hYVtDXSx6YT1DYltWXSx2b2lkIDAhPT16YSlmb3IoQ2E9MDszPkNhO0NhKyspRmE9emFbQ2FdLGJiW09hXT1GYS54LGJiW09hKzFdPUZhLnksT2ErPTI7MDxPYSYmKGouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUix3Ll9fd2ViZ2xVVkJ1ZmZlciksai5idWZmZXJEYXRhKGouQVJSQVlfQlVGRkVSLGJiLEQpKX1pZih5YiYmRWImJkwpe0M9MDtmb3IoSj1hYS5sZW5ndGg7Qzxcbko7QysrKWlmKFY9YWFbQ10sJD1FYltWXSx2b2lkIDAhPT0kKWZvcihDYT0wOzM+Q2E7Q2ErKylLYT0kW0NhXSxjYltQYV09S2EueCxjYltQYSsxXT1LYS55LFBhKz0yOzA8UGEmJihqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsdy5fX3dlYmdsVVYyQnVmZmVyKSxqLmJ1ZmZlckRhdGEoai5BUlJBWV9CVUZGRVIsY2IsRCkpfWlmKEJiKXtDPTA7Zm9yKEo9YWEubGVuZ3RoO0M8SjtDKyspUGJbVWFdPWRiLFBiW1VhKzFdPWRiKzEsUGJbVWErMl09ZGIrMixVYSs9Myx2Ylt0Yl09ZGIsdmJbdGIrMV09ZGIrMSx2Ylt0YisyXT1kYix2Ylt0YiszXT1kYisyLHZiW3RiKzRdPWRiKzEsdmJbdGIrNV09ZGIrMix0Yis9NixkYis9MztqLmJpbmRCdWZmZXIoai5FTEVNRU5UX0FSUkFZX0JVRkZFUix3Ll9fd2ViZ2xGYWNlQnVmZmVyKTtqLmJ1ZmZlckRhdGEoai5FTEVNRU5UX0FSUkFZX0JVRkZFUixQYixEKTtqLmJpbmRCdWZmZXIoai5FTEVNRU5UX0FSUkFZX0JVRkZFUix3Ll9fd2ViZ2xMaW5lQnVmZmVyKTtcbmouYnVmZmVyRGF0YShqLkVMRU1FTlRfQVJSQVlfQlVGRkVSLHZiLEQpfWlmKHBiKXtDYT0wO2ZvcihEYT1wYi5sZW5ndGg7Q2E8RGE7Q2ErKylpZihIPXBiW0NhXSxILl9fb3JpZ2luYWwubmVlZHNVcGRhdGUpe049MDtpZigxPT09SC5zaXplKWlmKHZvaWQgMD09PUguYm91bmRUb3x8XCJ2ZXJ0aWNlc1wiPT09SC5ib3VuZFRvKXtDPTA7Zm9yKEo9YWEubGVuZ3RoO0M8SjtDKyspTT1rYlthYVtDXV0sSC5hcnJheVtOXT1ILnZhbHVlW00uYV0sSC5hcnJheVtOKzFdPUgudmFsdWVbTS5iXSxILmFycmF5W04rMl09SC52YWx1ZVtNLmNdLE4rPTN9ZWxzZXtpZihcImZhY2VzXCI9PT1ILmJvdW5kVG8pe0M9MDtmb3IoSj1hYS5sZW5ndGg7QzxKO0MrKylOYT1ILnZhbHVlW2FhW0NdXSxILmFycmF5W05dPU5hLEguYXJyYXlbTisxXT1OYSxILmFycmF5W04rMl09TmEsTis9M319ZWxzZSBpZigyPT09SC5zaXplKWlmKHZvaWQgMD09PUguYm91bmRUb3x8XCJ2ZXJ0aWNlc1wiPT09SC5ib3VuZFRvKXtDPVxuMDtmb3IoSj1hYS5sZW5ndGg7QzxKO0MrKylNPWtiW2FhW0NdXSxQPUgudmFsdWVbTS5hXSxYPUgudmFsdWVbTS5iXSxXPUgudmFsdWVbTS5jXSxILmFycmF5W05dPVAueCxILmFycmF5W04rMV09UC55LEguYXJyYXlbTisyXT1YLngsSC5hcnJheVtOKzNdPVgueSxILmFycmF5W04rNF09Vy54LEguYXJyYXlbTis1XT1XLnksTis9Nn1lbHNle2lmKFwiZmFjZXNcIj09PUguYm91bmRUbyl7Qz0wO2ZvcihKPWFhLmxlbmd0aDtDPEo7QysrKVc9WD1QPU5hPUgudmFsdWVbYWFbQ11dLEguYXJyYXlbTl09UC54LEguYXJyYXlbTisxXT1QLnksSC5hcnJheVtOKzJdPVgueCxILmFycmF5W04rM109WC55LEguYXJyYXlbTis0XT1XLngsSC5hcnJheVtOKzVdPVcueSxOKz02fX1lbHNlIGlmKDM9PT1ILnNpemUpe3ZhciBvYTtvYT1cImNcIj09PUgudHlwZT9bXCJyXCIsXCJnXCIsXCJiXCJdOltcInhcIixcInlcIixcInpcIl07aWYodm9pZCAwPT09SC5ib3VuZFRvfHxcInZlcnRpY2VzXCI9PT1ILmJvdW5kVG8pe0M9MDtmb3IoSj1cbmFhLmxlbmd0aDtDPEo7QysrKU09a2JbYWFbQ11dLFA9SC52YWx1ZVtNLmFdLFg9SC52YWx1ZVtNLmJdLFc9SC52YWx1ZVtNLmNdLEguYXJyYXlbTl09UFtvYVswXV0sSC5hcnJheVtOKzFdPVBbb2FbMV1dLEguYXJyYXlbTisyXT1QW29hWzJdXSxILmFycmF5W04rM109WFtvYVswXV0sSC5hcnJheVtOKzRdPVhbb2FbMV1dLEguYXJyYXlbTis1XT1YW29hWzJdXSxILmFycmF5W04rNl09V1tvYVswXV0sSC5hcnJheVtOKzddPVdbb2FbMV1dLEguYXJyYXlbTis4XT1XW29hWzJdXSxOKz05fWVsc2UgaWYoXCJmYWNlc1wiPT09SC5ib3VuZFRvKXtDPTA7Zm9yKEo9YWEubGVuZ3RoO0M8SjtDKyspVz1YPVA9TmE9SC52YWx1ZVthYVtDXV0sSC5hcnJheVtOXT1QW29hWzBdXSxILmFycmF5W04rMV09UFtvYVsxXV0sSC5hcnJheVtOKzJdPVBbb2FbMl1dLEguYXJyYXlbTiszXT1YW29hWzBdXSxILmFycmF5W04rNF09WFtvYVsxXV0sSC5hcnJheVtOKzVdPVhbb2FbMl1dLEguYXJyYXlbTis2XT1XW29hWzBdXSxcbkguYXJyYXlbTis3XT1XW29hWzFdXSxILmFycmF5W04rOF09V1tvYVsyXV0sTis9OX1lbHNlIGlmKFwiZmFjZVZlcnRpY2VzXCI9PT1ILmJvdW5kVG8pe0M9MDtmb3IoSj1hYS5sZW5ndGg7QzxKO0MrKylOYT1ILnZhbHVlW2FhW0NdXSxQPU5hWzBdLFg9TmFbMV0sVz1OYVsyXSxILmFycmF5W05dPVBbb2FbMF1dLEguYXJyYXlbTisxXT1QW29hWzFdXSxILmFycmF5W04rMl09UFtvYVsyXV0sSC5hcnJheVtOKzNdPVhbb2FbMF1dLEguYXJyYXlbTis0XT1YW29hWzFdXSxILmFycmF5W04rNV09WFtvYVsyXV0sSC5hcnJheVtOKzZdPVdbb2FbMF1dLEguYXJyYXlbTis3XT1XW29hWzFdXSxILmFycmF5W04rOF09V1tvYVsyXV0sTis9OX19ZWxzZSBpZig0PT09SC5zaXplKWlmKHZvaWQgMD09PUguYm91bmRUb3x8XCJ2ZXJ0aWNlc1wiPT09SC5ib3VuZFRvKXtDPTA7Zm9yKEo9YWEubGVuZ3RoO0M8SjtDKyspTT1rYlthYVtDXV0sUD1ILnZhbHVlW00uYV0sWD1ILnZhbHVlW00uYl0sVz1ILnZhbHVlW00uY10sXG5ILmFycmF5W05dPVAueCxILmFycmF5W04rMV09UC55LEguYXJyYXlbTisyXT1QLnosSC5hcnJheVtOKzNdPVAudyxILmFycmF5W04rNF09WC54LEguYXJyYXlbTis1XT1YLnksSC5hcnJheVtOKzZdPVgueixILmFycmF5W04rN109WC53LEguYXJyYXlbTis4XT1XLngsSC5hcnJheVtOKzldPVcueSxILmFycmF5W04rMTBdPVcueixILmFycmF5W04rMTFdPVcudyxOKz0xMn1lbHNlIGlmKFwiZmFjZXNcIj09PUguYm91bmRUbyl7Qz0wO2ZvcihKPWFhLmxlbmd0aDtDPEo7QysrKVc9WD1QPU5hPUgudmFsdWVbYWFbQ11dLEguYXJyYXlbTl09UC54LEguYXJyYXlbTisxXT1QLnksSC5hcnJheVtOKzJdPVAueixILmFycmF5W04rM109UC53LEguYXJyYXlbTis0XT1YLngsSC5hcnJheVtOKzVdPVgueSxILmFycmF5W04rNl09WC56LEguYXJyYXlbTis3XT1YLncsSC5hcnJheVtOKzhdPVcueCxILmFycmF5W04rOV09Vy55LEguYXJyYXlbTisxMF09Vy56LEguYXJyYXlbTisxMV09Vy53LE4rPTEyfWVsc2UgaWYoXCJmYWNlVmVydGljZXNcIj09PVxuSC5ib3VuZFRvKXtDPTA7Zm9yKEo9YWEubGVuZ3RoO0M8SjtDKyspTmE9SC52YWx1ZVthYVtDXV0sUD1OYVswXSxYPU5hWzFdLFc9TmFbMl0sSC5hcnJheVtOXT1QLngsSC5hcnJheVtOKzFdPVAueSxILmFycmF5W04rMl09UC56LEguYXJyYXlbTiszXT1QLncsSC5hcnJheVtOKzRdPVgueCxILmFycmF5W04rNV09WC55LEguYXJyYXlbTis2XT1YLnosSC5hcnJheVtOKzddPVgudyxILmFycmF5W04rOF09Vy54LEguYXJyYXlbTis5XT1XLnksSC5hcnJheVtOKzEwXT1XLnosSC5hcnJheVtOKzExXT1XLncsTis9MTJ9ai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLEguYnVmZmVyKTtqLmJ1ZmZlckRhdGEoai5BUlJBWV9CVUZGRVIsSC5hcnJheSxEKX19RyYmKGRlbGV0ZSB3Ll9faW5pdHRlZEFycmF5cyxkZWxldGUgdy5fX2NvbG9yQXJyYXksZGVsZXRlIHcuX19ub3JtYWxBcnJheSxkZWxldGUgdy5fX3RhbmdlbnRBcnJheSxkZWxldGUgdy5fX3V2QXJyYXksZGVsZXRlIHcuX191djJBcnJheSxcbmRlbGV0ZSB3Ll9fZmFjZUFycmF5LGRlbGV0ZSB3Ll9fdmVydGV4QXJyYXksZGVsZXRlIHcuX19saW5lQXJyYXksZGVsZXRlIHcuX19za2luSW5kZXhBcnJheSxkZWxldGUgdy5fX3NraW5XZWlnaHRBcnJheSl9fWwudmVydGljZXNOZWVkVXBkYXRlPSExO2wubW9ycGhUYXJnZXRzTmVlZFVwZGF0ZT0hMTtsLmVsZW1lbnRzTmVlZFVwZGF0ZT0hMTtsLnV2c05lZWRVcGRhdGU9ITE7bC5ub3JtYWxzTmVlZFVwZGF0ZT0hMTtsLmNvbG9yc05lZWRVcGRhdGU9ITE7bC50YW5nZW50c05lZWRVcGRhdGU9ITE7bC5idWZmZXJzTmVlZFVwZGF0ZT0hMTtyLmF0dHJpYnV0ZXMmJm4ocil9ZWxzZSBpZihpIGluc3RhbmNlb2YgVEhSRUUuTGluZSl7cj1kKGksbCk7cD1yLmF0dHJpYnV0ZXMmJnEocik7aWYobC52ZXJ0aWNlc05lZWRVcGRhdGV8fGwuY29sb3JzTmVlZFVwZGF0ZXx8bC5saW5lRGlzdGFuY2VzTmVlZFVwZGF0ZXx8cCl7dmFyIFlhPWwsU2I9ai5EWU5BTUlDX0RSQVcsSWI9dm9pZCAwLFxuSmI9dm9pZCAwLEtiPXZvaWQgMCxUYj12b2lkIDAsbWE9dm9pZCAwLFViPXZvaWQgMCxHYj1ZYS52ZXJ0aWNlcyxIYj1ZYS5jb2xvcnMsa2M9WWEubGluZURpc3RhbmNlcyxaYj1HYi5sZW5ndGgsJGI9SGIubGVuZ3RoLGFjPWtjLmxlbmd0aCxWYj1ZYS5fX3ZlcnRleEFycmF5LFdiPVlhLl9fY29sb3JBcnJheSxsYz1ZYS5fX2xpbmVEaXN0YW5jZUFycmF5LGJjPVlhLmNvbG9yc05lZWRVcGRhdGUsY2M9WWEubGluZURpc3RhbmNlc05lZWRVcGRhdGUsZ2M9WWEuX193ZWJnbEN1c3RvbUF0dHJpYnV0ZXNMaXN0LFhiPXZvaWQgMCxtYz12b2lkIDAseWE9dm9pZCAwLHpiPXZvaWQgMCxJYT12b2lkIDAsaWE9dm9pZCAwO2lmKFlhLnZlcnRpY2VzTmVlZFVwZGF0ZSl7Zm9yKEliPTA7SWI8WmI7SWIrKylUYj1HYltJYl0sbWE9MypJYixWYlttYV09VGIueCxWYlttYSsxXT1UYi55LFZiW21hKzJdPVRiLno7ai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLFlhLl9fd2ViZ2xWZXJ0ZXhCdWZmZXIpO1xuai5idWZmZXJEYXRhKGouQVJSQVlfQlVGRkVSLFZiLFNiKX1pZihiYyl7Zm9yKEpiPTA7SmI8JGI7SmIrKylVYj1IYltKYl0sbWE9MypKYixXYlttYV09VWIucixXYlttYSsxXT1VYi5nLFdiW21hKzJdPVViLmI7ai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLFlhLl9fd2ViZ2xDb2xvckJ1ZmZlcik7ai5idWZmZXJEYXRhKGouQVJSQVlfQlVGRkVSLFdiLFNiKX1pZihjYyl7Zm9yKEtiPTA7S2I8YWM7S2IrKylsY1tLYl09a2NbS2JdO2ouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUixZYS5fX3dlYmdsTGluZURpc3RhbmNlQnVmZmVyKTtqLmJ1ZmZlckRhdGEoai5BUlJBWV9CVUZGRVIsbGMsU2IpfWlmKGdjKXtYYj0wO2ZvcihtYz1nYy5sZW5ndGg7WGI8bWM7WGIrKylpZihpYT1nY1tYYl0saWEubmVlZHNVcGRhdGUmJih2b2lkIDA9PT1pYS5ib3VuZFRvfHxcInZlcnRpY2VzXCI9PT1pYS5ib3VuZFRvKSl7bWE9MDt6Yj1pYS52YWx1ZS5sZW5ndGg7aWYoMT09PWlhLnNpemUpZm9yKHlhPVxuMDt5YTx6Yjt5YSsrKWlhLmFycmF5W3lhXT1pYS52YWx1ZVt5YV07ZWxzZSBpZigyPT09aWEuc2l6ZSlmb3IoeWE9MDt5YTx6Yjt5YSsrKUlhPWlhLnZhbHVlW3lhXSxpYS5hcnJheVttYV09SWEueCxpYS5hcnJheVttYSsxXT1JYS55LG1hKz0yO2Vsc2UgaWYoMz09PWlhLnNpemUpaWYoXCJjXCI9PT1pYS50eXBlKWZvcih5YT0wO3lhPHpiO3lhKyspSWE9aWEudmFsdWVbeWFdLGlhLmFycmF5W21hXT1JYS5yLGlhLmFycmF5W21hKzFdPUlhLmcsaWEuYXJyYXlbbWErMl09SWEuYixtYSs9MztlbHNlIGZvcih5YT0wO3lhPHpiO3lhKyspSWE9aWEudmFsdWVbeWFdLGlhLmFycmF5W21hXT1JYS54LGlhLmFycmF5W21hKzFdPUlhLnksaWEuYXJyYXlbbWErMl09SWEueixtYSs9MztlbHNlIGlmKDQ9PT1pYS5zaXplKWZvcih5YT0wO3lhPHpiO3lhKyspSWE9aWEudmFsdWVbeWFdLGlhLmFycmF5W21hXT1JYS54LGlhLmFycmF5W21hKzFdPUlhLnksaWEuYXJyYXlbbWErMl09SWEueixpYS5hcnJheVttYStcbjNdPUlhLncsbWErPTQ7ai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLGlhLmJ1ZmZlcik7ai5idWZmZXJEYXRhKGouQVJSQVlfQlVGRkVSLGlhLmFycmF5LFNiKX19fWwudmVydGljZXNOZWVkVXBkYXRlPSExO2wuY29sb3JzTmVlZFVwZGF0ZT0hMTtsLmxpbmVEaXN0YW5jZXNOZWVkVXBkYXRlPSExO3IuYXR0cmlidXRlcyYmbihyKX1lbHNlIGlmKGkgaW5zdGFuY2VvZiBUSFJFRS5QYXJ0aWNsZVN5c3RlbSl7cj1kKGksbCk7cD1yLmF0dHJpYnV0ZXMmJnEocik7aWYobC52ZXJ0aWNlc05lZWRVcGRhdGV8fGwuY29sb3JzTmVlZFVwZGF0ZXx8aS5zb3J0UGFydGljbGVzfHxwKXt2YXIgbGI9bCxoYz1qLkRZTkFNSUNfRFJBVyxMYj1pLEphPXZvaWQgMCxtYj12b2lkIDAsbmI9dm9pZCAwLFQ9dm9pZCAwLG9iPXZvaWQgMCx1Yj12b2lkIDAsWWI9bGIudmVydGljZXMsaWM9WWIubGVuZ3RoLGpjPWxiLmNvbG9ycyxuYz1qYy5sZW5ndGgsd2I9bGIuX192ZXJ0ZXhBcnJheSx4Yj1sYi5fX2NvbG9yQXJyYXksXG5xYj1sYi5fX3NvcnRBcnJheSxvYz1sYi52ZXJ0aWNlc05lZWRVcGRhdGUscGM9bGIuY29sb3JzTmVlZFVwZGF0ZSxyYj1sYi5fX3dlYmdsQ3VzdG9tQXR0cmlidXRlc0xpc3QsJGE9dm9pZCAwLEFiPXZvaWQgMCxaPXZvaWQgMCxhYj12b2lkIDAsZ2E9dm9pZCAwLFM9dm9pZCAwO2lmKExiLnNvcnRQYXJ0aWNsZXMpe2diLmNvcHkoRWEpO2diLm11bHRpcGx5KExiLm1hdHJpeFdvcmxkKTtmb3IoSmE9MDtKYTxpYztKYSsrKW5iPVliW0phXSxyYS5jb3B5KG5iKSxyYS5hcHBseVByb2plY3Rpb24oZ2IpLHFiW0phXT1bcmEueixKYV07cWIuc29ydChrKTtmb3IoSmE9MDtKYTxpYztKYSsrKW5iPVliW3FiW0phXVsxXV0sVD0zKkphLHdiW1RdPW5iLngsd2JbVCsxXT1uYi55LHdiW1QrMl09bmIuejtmb3IobWI9MDttYjxuYzttYisrKVQ9MyptYix1Yj1qY1txYlttYl1bMV1dLHhiW1RdPXViLnIseGJbVCsxXT11Yi5nLHhiW1QrMl09dWIuYjtpZihyYil7JGE9MDtmb3IoQWI9cmIubGVuZ3RoOyRhPFxuQWI7JGErKylpZihTPXJiWyRhXSx2b2lkIDA9PT1TLmJvdW5kVG98fFwidmVydGljZXNcIj09PVMuYm91bmRUbylpZihUPTAsYWI9Uy52YWx1ZS5sZW5ndGgsMT09PVMuc2l6ZSlmb3IoWj0wO1o8YWI7WisrKW9iPXFiW1pdWzFdLFMuYXJyYXlbWl09Uy52YWx1ZVtvYl07ZWxzZSBpZigyPT09Uy5zaXplKWZvcihaPTA7WjxhYjtaKyspb2I9cWJbWl1bMV0sZ2E9Uy52YWx1ZVtvYl0sUy5hcnJheVtUXT1nYS54LFMuYXJyYXlbVCsxXT1nYS55LFQrPTI7ZWxzZSBpZigzPT09Uy5zaXplKWlmKFwiY1wiPT09Uy50eXBlKWZvcihaPTA7WjxhYjtaKyspb2I9cWJbWl1bMV0sZ2E9Uy52YWx1ZVtvYl0sUy5hcnJheVtUXT1nYS5yLFMuYXJyYXlbVCsxXT1nYS5nLFMuYXJyYXlbVCsyXT1nYS5iLFQrPTM7ZWxzZSBmb3IoWj0wO1o8YWI7WisrKW9iPXFiW1pdWzFdLGdhPVMudmFsdWVbb2JdLFMuYXJyYXlbVF09Z2EueCxTLmFycmF5W1QrMV09Z2EueSxTLmFycmF5W1QrMl09Z2EueixUKz0zO2Vsc2UgaWYoND09PVxuUy5zaXplKWZvcihaPTA7WjxhYjtaKyspb2I9cWJbWl1bMV0sZ2E9Uy52YWx1ZVtvYl0sUy5hcnJheVtUXT1nYS54LFMuYXJyYXlbVCsxXT1nYS55LFMuYXJyYXlbVCsyXT1nYS56LFMuYXJyYXlbVCszXT1nYS53LFQrPTR9fWVsc2V7aWYob2MpZm9yKEphPTA7SmE8aWM7SmErKyluYj1ZYltKYV0sVD0zKkphLHdiW1RdPW5iLngsd2JbVCsxXT1uYi55LHdiW1QrMl09bmIuejtpZihwYylmb3IobWI9MDttYjxuYzttYisrKXViPWpjW21iXSxUPTMqbWIseGJbVF09dWIucix4YltUKzFdPXViLmcseGJbVCsyXT11Yi5iO2lmKHJiKXskYT0wO2ZvcihBYj1yYi5sZW5ndGg7JGE8QWI7JGErKylpZihTPXJiWyRhXSxTLm5lZWRzVXBkYXRlJiYodm9pZCAwPT09Uy5ib3VuZFRvfHxcInZlcnRpY2VzXCI9PT1TLmJvdW5kVG8pKWlmKGFiPVMudmFsdWUubGVuZ3RoLFQ9MCwxPT09Uy5zaXplKWZvcihaPTA7WjxhYjtaKyspUy5hcnJheVtaXT1TLnZhbHVlW1pdO2Vsc2UgaWYoMj09PVMuc2l6ZSlmb3IoWj1cbjA7WjxhYjtaKyspZ2E9Uy52YWx1ZVtaXSxTLmFycmF5W1RdPWdhLngsUy5hcnJheVtUKzFdPWdhLnksVCs9MjtlbHNlIGlmKDM9PT1TLnNpemUpaWYoXCJjXCI9PT1TLnR5cGUpZm9yKFo9MDtaPGFiO1orKylnYT1TLnZhbHVlW1pdLFMuYXJyYXlbVF09Z2EucixTLmFycmF5W1QrMV09Z2EuZyxTLmFycmF5W1QrMl09Z2EuYixUKz0zO2Vsc2UgZm9yKFo9MDtaPGFiO1orKylnYT1TLnZhbHVlW1pdLFMuYXJyYXlbVF09Z2EueCxTLmFycmF5W1QrMV09Z2EueSxTLmFycmF5W1QrMl09Z2EueixUKz0zO2Vsc2UgaWYoND09PVMuc2l6ZSlmb3IoWj0wO1o8YWI7WisrKWdhPVMudmFsdWVbWl0sUy5hcnJheVtUXT1nYS54LFMuYXJyYXlbVCsxXT1nYS55LFMuYXJyYXlbVCsyXT1nYS56LFMuYXJyYXlbVCszXT1nYS53LFQrPTR9fWlmKG9jfHxMYi5zb3J0UGFydGljbGVzKWouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUixsYi5fX3dlYmdsVmVydGV4QnVmZmVyKSxqLmJ1ZmZlckRhdGEoai5BUlJBWV9CVUZGRVIsXG53YixoYyk7aWYocGN8fExiLnNvcnRQYXJ0aWNsZXMpai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLGxiLl9fd2ViZ2xDb2xvckJ1ZmZlciksai5idWZmZXJEYXRhKGouQVJSQVlfQlVGRkVSLHhiLGhjKTtpZihyYil7JGE9MDtmb3IoQWI9cmIubGVuZ3RoOyRhPEFiOyRhKyspaWYoUz1yYlskYV0sUy5uZWVkc1VwZGF0ZXx8TGIuc29ydFBhcnRpY2xlcylqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsUy5idWZmZXIpLGouYnVmZmVyRGF0YShqLkFSUkFZX0JVRkZFUixTLmFycmF5LGhjKX19bC52ZXJ0aWNlc05lZWRVcGRhdGU9ITE7bC5jb2xvcnNOZWVkVXBkYXRlPSExO3IuYXR0cmlidXRlcyYmbihyKX19fTt0aGlzLmluaXRNYXRlcmlhbD1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZSxmLGcsaDthLmFkZEV2ZW50TGlzdGVuZXIoXCJkaXNwb3NlXCIsRmIpO3ZhciBpLGssbCxtLG47YSBpbnN0YW5jZW9mIFRIUkVFLk1lc2hEZXB0aE1hdGVyaWFsP249XCJkZXB0aFwiOmEgaW5zdGFuY2VvZlxuVEhSRUUuTWVzaE5vcm1hbE1hdGVyaWFsP249XCJub3JtYWxcIjphIGluc3RhbmNlb2YgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWw/bj1cImJhc2ljXCI6YSBpbnN0YW5jZW9mIFRIUkVFLk1lc2hMYW1iZXJ0TWF0ZXJpYWw/bj1cImxhbWJlcnRcIjphIGluc3RhbmNlb2YgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWw/bj1cInBob25nXCI6YSBpbnN0YW5jZW9mIFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsP249XCJiYXNpY1wiOmEgaW5zdGFuY2VvZiBUSFJFRS5MaW5lRGFzaGVkTWF0ZXJpYWw/bj1cImRhc2hlZFwiOmEgaW5zdGFuY2VvZiBUSFJFRS5QYXJ0aWNsZVN5c3RlbU1hdGVyaWFsJiYobj1cInBhcnRpY2xlX2Jhc2ljXCIpO2lmKG4pe3ZhciBwPVRIUkVFLlNoYWRlckxpYltuXTthLnVuaWZvcm1zPVRIUkVFLlVuaWZvcm1zVXRpbHMuY2xvbmUocC51bmlmb3Jtcyk7YS52ZXJ0ZXhTaGFkZXI9cC52ZXJ0ZXhTaGFkZXI7YS5mcmFnbWVudFNoYWRlcj1wLmZyYWdtZW50U2hhZGVyfXZhciBxPWU9MCxyPTAsdD1cbnA9MDtmb3IoZj1iLmxlbmd0aDt0PGY7dCsrKWc9Ylt0XSxnLm9ubHlTaGFkb3d8fChnIGluc3RhbmNlb2YgVEhSRUUuRGlyZWN0aW9uYWxMaWdodCYmZSsrLGcgaW5zdGFuY2VvZiBUSFJFRS5Qb2ludExpZ2h0JiZxKyssZyBpbnN0YW5jZW9mIFRIUkVFLlNwb3RMaWdodCYmcisrLGcgaW5zdGFuY2VvZiBUSFJFRS5IZW1pc3BoZXJlTGlnaHQmJnArKyk7Zj1xO2c9cjtoPXA7cj1wPTA7Zm9yKHE9Yi5sZW5ndGg7cjxxO3IrKyl0PWJbcl0sdC5jYXN0U2hhZG93JiYodCBpbnN0YW5jZW9mIFRIUkVFLlNwb3RMaWdodCYmcCsrLHQgaW5zdGFuY2VvZiBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0JiYhdC5zaGFkb3dDYXNjYWRlJiZwKyspO209cDt5YiYmZCYmZC51c2VWZXJ0ZXhUZXh0dXJlP2w9MTAyNDooYj1qLmdldFBhcmFtZXRlcihqLk1BWF9WRVJURVhfVU5JRk9STV9WRUNUT1JTKSxiPU1hdGguZmxvb3IoKGItMjApLzQpLHZvaWQgMCE9PWQmJmQgaW5zdGFuY2VvZiBUSFJFRS5Ta2lubmVkTWVzaCYmXG4oYj1NYXRoLm1pbihkLmJvbmVzLmxlbmd0aCxiKSxiPGQuYm9uZXMubGVuZ3RoJiZjb25zb2xlLndhcm4oXCJXZWJHTFJlbmRlcmVyOiB0b28gbWFueSBib25lcyAtIFwiK2QuYm9uZXMubGVuZ3RoK1wiLCB0aGlzIEdQVSBzdXBwb3J0cyBqdXN0IFwiK2IrXCIgKHRyeSBPcGVuR0wgaW5zdGVhZCBvZiBBTkdMRSlcIikpLGw9Yik7YTp7dmFyIHI9YS5mcmFnbWVudFNoYWRlcixxPWEudmVydGV4U2hhZGVyLHA9YS51bmlmb3JtcyxiPWEuYXR0cmlidXRlcyx0PWEuZGVmaW5lcyxjPXttYXA6ISFhLm1hcCxlbnZNYXA6ISFhLmVudk1hcCxsaWdodE1hcDohIWEubGlnaHRNYXAsYnVtcE1hcDohIWEuYnVtcE1hcCxub3JtYWxNYXA6ISFhLm5vcm1hbE1hcCxzcGVjdWxhck1hcDohIWEuc3BlY3VsYXJNYXAsdmVydGV4Q29sb3JzOmEudmVydGV4Q29sb3JzLGZvZzpjLHVzZUZvZzphLmZvZyxmb2dFeHA6YyBpbnN0YW5jZW9mIFRIUkVFLkZvZ0V4cDIsc2l6ZUF0dGVudWF0aW9uOmEuc2l6ZUF0dGVudWF0aW9uLFxuc2tpbm5pbmc6YS5za2lubmluZyxtYXhCb25lczpsLHVzZVZlcnRleFRleHR1cmU6eWImJmQmJmQudXNlVmVydGV4VGV4dHVyZSxtb3JwaFRhcmdldHM6YS5tb3JwaFRhcmdldHMsbW9ycGhOb3JtYWxzOmEubW9ycGhOb3JtYWxzLG1heE1vcnBoVGFyZ2V0czp0aGlzLm1heE1vcnBoVGFyZ2V0cyxtYXhNb3JwaE5vcm1hbHM6dGhpcy5tYXhNb3JwaE5vcm1hbHMsbWF4RGlyTGlnaHRzOmUsbWF4UG9pbnRMaWdodHM6ZixtYXhTcG90TGlnaHRzOmcsbWF4SGVtaUxpZ2h0czpoLG1heFNoYWRvd3M6bSxzaGFkb3dNYXBFbmFibGVkOnRoaXMuc2hhZG93TWFwRW5hYmxlZCYmZC5yZWNlaXZlU2hhZG93LHNoYWRvd01hcFR5cGU6dGhpcy5zaGFkb3dNYXBUeXBlLHNoYWRvd01hcERlYnVnOnRoaXMuc2hhZG93TWFwRGVidWcsc2hhZG93TWFwQ2FzY2FkZTp0aGlzLnNoYWRvd01hcENhc2NhZGUsYWxwaGFUZXN0OmEuYWxwaGFUZXN0LG1ldGFsOmEubWV0YWwscGVyUGl4ZWw6YS5wZXJQaXhlbCx3cmFwQXJvdW5kOmEud3JhcEFyb3VuZCxcbmRvdWJsZVNpZGVkOmEuc2lkZT09PVRIUkVFLkRvdWJsZVNpZGUsZmxpcFNpZGVkOmEuc2lkZT09PVRIUkVFLkJhY2tTaWRlfSxkPWEuaW5kZXgwQXR0cmlidXRlTmFtZSxzLHUsdjtlPVtdO24/ZS5wdXNoKG4pOihlLnB1c2gociksZS5wdXNoKHEpKTtmb3IodSBpbiB0KWUucHVzaCh1KSxlLnB1c2godFt1XSk7Zm9yKHMgaW4gYyllLnB1c2gocyksZS5wdXNoKGNbc10pO249ZS5qb2luKCk7cz0wO2Zvcih1PWRhLmxlbmd0aDtzPHU7cysrKWlmKGU9ZGFbc10sZS5jb2RlPT09bil7ZS51c2VkVGltZXMrKztrPWUucHJvZ3JhbTticmVhayBhfXM9XCJTSEFET1dNQVBfVFlQRV9CQVNJQ1wiO2Muc2hhZG93TWFwVHlwZT09PVRIUkVFLlBDRlNoYWRvd01hcD9zPVwiU0hBRE9XTUFQX1RZUEVfUENGXCI6Yy5zaGFkb3dNYXBUeXBlPT09VEhSRUUuUENGU29mdFNoYWRvd01hcCYmKHM9XCJTSEFET1dNQVBfVFlQRV9QQ0ZfU09GVFwiKTt1PVtdO2Zvcih2IGluIHQpZT10W3ZdLCExIT09ZSYmKGU9XCIjZGVmaW5lIFwiK1xuditcIiBcIitlLHUucHVzaChlKSk7ZT11LmpvaW4oXCJcXG5cIik7dj1qLmNyZWF0ZVByb2dyYW0oKTt1PVtcInByZWNpc2lvbiBcIitNK1wiIGZsb2F0O1wiLFwicHJlY2lzaW9uIFwiK00rXCIgaW50O1wiLGUsQmI/XCIjZGVmaW5lIFZFUlRFWF9URVhUVVJFU1wiOlwiXCIsTC5nYW1tYUlucHV0P1wiI2RlZmluZSBHQU1NQV9JTlBVVFwiOlwiXCIsTC5nYW1tYU91dHB1dD9cIiNkZWZpbmUgR0FNTUFfT1VUUFVUXCI6XCJcIixMLnBoeXNpY2FsbHlCYXNlZFNoYWRpbmc/XCIjZGVmaW5lIFBIWVNJQ0FMTFlfQkFTRURfU0hBRElOR1wiOlwiXCIsXCIjZGVmaW5lIE1BWF9ESVJfTElHSFRTIFwiK2MubWF4RGlyTGlnaHRzLFwiI2RlZmluZSBNQVhfUE9JTlRfTElHSFRTIFwiK2MubWF4UG9pbnRMaWdodHMsXCIjZGVmaW5lIE1BWF9TUE9UX0xJR0hUUyBcIitjLm1heFNwb3RMaWdodHMsXCIjZGVmaW5lIE1BWF9IRU1JX0xJR0hUUyBcIitjLm1heEhlbWlMaWdodHMsXCIjZGVmaW5lIE1BWF9TSEFET1dTIFwiK2MubWF4U2hhZG93cyxcIiNkZWZpbmUgTUFYX0JPTkVTIFwiK1xuYy5tYXhCb25lcyxjLm1hcD9cIiNkZWZpbmUgVVNFX01BUFwiOlwiXCIsYy5lbnZNYXA/XCIjZGVmaW5lIFVTRV9FTlZNQVBcIjpcIlwiLGMubGlnaHRNYXA/XCIjZGVmaW5lIFVTRV9MSUdIVE1BUFwiOlwiXCIsYy5idW1wTWFwP1wiI2RlZmluZSBVU0VfQlVNUE1BUFwiOlwiXCIsYy5ub3JtYWxNYXA/XCIjZGVmaW5lIFVTRV9OT1JNQUxNQVBcIjpcIlwiLGMuc3BlY3VsYXJNYXA/XCIjZGVmaW5lIFVTRV9TUEVDVUxBUk1BUFwiOlwiXCIsYy52ZXJ0ZXhDb2xvcnM/XCIjZGVmaW5lIFVTRV9DT0xPUlwiOlwiXCIsYy5za2lubmluZz9cIiNkZWZpbmUgVVNFX1NLSU5OSU5HXCI6XCJcIixjLnVzZVZlcnRleFRleHR1cmU/XCIjZGVmaW5lIEJPTkVfVEVYVFVSRVwiOlwiXCIsYy5tb3JwaFRhcmdldHM/XCIjZGVmaW5lIFVTRV9NT1JQSFRBUkdFVFNcIjpcIlwiLGMubW9ycGhOb3JtYWxzP1wiI2RlZmluZSBVU0VfTU9SUEhOT1JNQUxTXCI6XCJcIixjLnBlclBpeGVsP1wiI2RlZmluZSBQSE9OR19QRVJfUElYRUxcIjpcIlwiLGMud3JhcEFyb3VuZD9cIiNkZWZpbmUgV1JBUF9BUk9VTkRcIjpcblwiXCIsYy5kb3VibGVTaWRlZD9cIiNkZWZpbmUgRE9VQkxFX1NJREVEXCI6XCJcIixjLmZsaXBTaWRlZD9cIiNkZWZpbmUgRkxJUF9TSURFRFwiOlwiXCIsYy5zaGFkb3dNYXBFbmFibGVkP1wiI2RlZmluZSBVU0VfU0hBRE9XTUFQXCI6XCJcIixjLnNoYWRvd01hcEVuYWJsZWQ/XCIjZGVmaW5lIFwiK3M6XCJcIixjLnNoYWRvd01hcERlYnVnP1wiI2RlZmluZSBTSEFET1dNQVBfREVCVUdcIjpcIlwiLGMuc2hhZG93TWFwQ2FzY2FkZT9cIiNkZWZpbmUgU0hBRE9XTUFQX0NBU0NBREVcIjpcIlwiLGMuc2l6ZUF0dGVudWF0aW9uP1wiI2RlZmluZSBVU0VfU0laRUFUVEVOVUFUSU9OXCI6XCJcIixcInVuaWZvcm0gbWF0NCBtb2RlbE1hdHJpeDtcXG51bmlmb3JtIG1hdDQgbW9kZWxWaWV3TWF0cml4O1xcbnVuaWZvcm0gbWF0NCBwcm9qZWN0aW9uTWF0cml4O1xcbnVuaWZvcm0gbWF0NCB2aWV3TWF0cml4O1xcbnVuaWZvcm0gbWF0MyBub3JtYWxNYXRyaXg7XFxudW5pZm9ybSB2ZWMzIGNhbWVyYVBvc2l0aW9uO1xcbmF0dHJpYnV0ZSB2ZWMzIHBvc2l0aW9uO1xcbmF0dHJpYnV0ZSB2ZWMzIG5vcm1hbDtcXG5hdHRyaWJ1dGUgdmVjMiB1djtcXG5hdHRyaWJ1dGUgdmVjMiB1djI7XFxuI2lmZGVmIFVTRV9DT0xPUlxcbmF0dHJpYnV0ZSB2ZWMzIGNvbG9yO1xcbiNlbmRpZlxcbiNpZmRlZiBVU0VfTU9SUEhUQVJHRVRTXFxuYXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQwO1xcbmF0dHJpYnV0ZSB2ZWMzIG1vcnBoVGFyZ2V0MTtcXG5hdHRyaWJ1dGUgdmVjMyBtb3JwaFRhcmdldDI7XFxuYXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQzO1xcbiNpZmRlZiBVU0VfTU9SUEhOT1JNQUxTXFxuYXR0cmlidXRlIHZlYzMgbW9ycGhOb3JtYWwwO1xcbmF0dHJpYnV0ZSB2ZWMzIG1vcnBoTm9ybWFsMTtcXG5hdHRyaWJ1dGUgdmVjMyBtb3JwaE5vcm1hbDI7XFxuYXR0cmlidXRlIHZlYzMgbW9ycGhOb3JtYWwzO1xcbiNlbHNlXFxuYXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQ0O1xcbmF0dHJpYnV0ZSB2ZWMzIG1vcnBoVGFyZ2V0NTtcXG5hdHRyaWJ1dGUgdmVjMyBtb3JwaFRhcmdldDY7XFxuYXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQ3O1xcbiNlbmRpZlxcbiNlbmRpZlxcbiNpZmRlZiBVU0VfU0tJTk5JTkdcXG5hdHRyaWJ1dGUgdmVjNCBza2luSW5kZXg7XFxuYXR0cmlidXRlIHZlYzQgc2tpbldlaWdodDtcXG4jZW5kaWZcXG5cIl0uam9pbihcIlxcblwiKTtcbnM9W1wicHJlY2lzaW9uIFwiK00rXCIgZmxvYXQ7XCIsXCJwcmVjaXNpb24gXCIrTStcIiBpbnQ7XCIsYy5idW1wTWFwfHxjLm5vcm1hbE1hcD9cIiNleHRlbnNpb24gR0xfT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzIDogZW5hYmxlXCI6XCJcIixlLFwiI2RlZmluZSBNQVhfRElSX0xJR0hUUyBcIitjLm1heERpckxpZ2h0cyxcIiNkZWZpbmUgTUFYX1BPSU5UX0xJR0hUUyBcIitjLm1heFBvaW50TGlnaHRzLFwiI2RlZmluZSBNQVhfU1BPVF9MSUdIVFMgXCIrYy5tYXhTcG90TGlnaHRzLFwiI2RlZmluZSBNQVhfSEVNSV9MSUdIVFMgXCIrYy5tYXhIZW1pTGlnaHRzLFwiI2RlZmluZSBNQVhfU0hBRE9XUyBcIitjLm1heFNoYWRvd3MsYy5hbHBoYVRlc3Q/XCIjZGVmaW5lIEFMUEhBVEVTVCBcIitjLmFscGhhVGVzdDpcIlwiLEwuZ2FtbWFJbnB1dD9cIiNkZWZpbmUgR0FNTUFfSU5QVVRcIjpcIlwiLEwuZ2FtbWFPdXRwdXQ/XCIjZGVmaW5lIEdBTU1BX09VVFBVVFwiOlwiXCIsTC5waHlzaWNhbGx5QmFzZWRTaGFkaW5nP1wiI2RlZmluZSBQSFlTSUNBTExZX0JBU0VEX1NIQURJTkdcIjpcblwiXCIsYy51c2VGb2cmJmMuZm9nP1wiI2RlZmluZSBVU0VfRk9HXCI6XCJcIixjLnVzZUZvZyYmYy5mb2dFeHA/XCIjZGVmaW5lIEZPR19FWFAyXCI6XCJcIixjLm1hcD9cIiNkZWZpbmUgVVNFX01BUFwiOlwiXCIsYy5lbnZNYXA/XCIjZGVmaW5lIFVTRV9FTlZNQVBcIjpcIlwiLGMubGlnaHRNYXA/XCIjZGVmaW5lIFVTRV9MSUdIVE1BUFwiOlwiXCIsYy5idW1wTWFwP1wiI2RlZmluZSBVU0VfQlVNUE1BUFwiOlwiXCIsYy5ub3JtYWxNYXA/XCIjZGVmaW5lIFVTRV9OT1JNQUxNQVBcIjpcIlwiLGMuc3BlY3VsYXJNYXA/XCIjZGVmaW5lIFVTRV9TUEVDVUxBUk1BUFwiOlwiXCIsYy52ZXJ0ZXhDb2xvcnM/XCIjZGVmaW5lIFVTRV9DT0xPUlwiOlwiXCIsYy5tZXRhbD9cIiNkZWZpbmUgTUVUQUxcIjpcIlwiLGMucGVyUGl4ZWw/XCIjZGVmaW5lIFBIT05HX1BFUl9QSVhFTFwiOlwiXCIsYy53cmFwQXJvdW5kP1wiI2RlZmluZSBXUkFQX0FST1VORFwiOlwiXCIsYy5kb3VibGVTaWRlZD9cIiNkZWZpbmUgRE9VQkxFX1NJREVEXCI6XCJcIixjLmZsaXBTaWRlZD9cIiNkZWZpbmUgRkxJUF9TSURFRFwiOlxuXCJcIixjLnNoYWRvd01hcEVuYWJsZWQ/XCIjZGVmaW5lIFVTRV9TSEFET1dNQVBcIjpcIlwiLGMuc2hhZG93TWFwRW5hYmxlZD9cIiNkZWZpbmUgXCIrczpcIlwiLGMuc2hhZG93TWFwRGVidWc/XCIjZGVmaW5lIFNIQURPV01BUF9ERUJVR1wiOlwiXCIsYy5zaGFkb3dNYXBDYXNjYWRlP1wiI2RlZmluZSBTSEFET1dNQVBfQ0FTQ0FERVwiOlwiXCIsXCJ1bmlmb3JtIG1hdDQgdmlld01hdHJpeDtcXG51bmlmb3JtIHZlYzMgY2FtZXJhUG9zaXRpb247XFxuXCJdLmpvaW4oXCJcXG5cIik7dT1EKFwidmVydGV4XCIsdStxKTtzPUQoXCJmcmFnbWVudFwiLHMrcik7ai5hdHRhY2hTaGFkZXIodix1KTtqLmF0dGFjaFNoYWRlcih2LHMpO2QmJmouYmluZEF0dHJpYkxvY2F0aW9uKHYsMCxkKTtqLmxpbmtQcm9ncmFtKHYpO2ouZ2V0UHJvZ3JhbVBhcmFtZXRlcih2LGouTElOS19TVEFUVVMpfHwoY29uc29sZS5lcnJvcihcIkNvdWxkIG5vdCBpbml0aWFsaXNlIHNoYWRlclxcblZBTElEQVRFX1NUQVRVUzogXCIrai5nZXRQcm9ncmFtUGFyYW1ldGVyKHYsXG5qLlZBTElEQVRFX1NUQVRVUykrXCIsIGdsIGVycm9yIFtcIitqLmdldEVycm9yKCkrXCJdXCIpLGNvbnNvbGUuZXJyb3IoXCJQcm9ncmFtIEluZm8gTG9nOiBcIitqLmdldFByb2dyYW1JbmZvTG9nKHYpKSk7ai5kZWxldGVTaGFkZXIocyk7ai5kZWxldGVTaGFkZXIodSk7di51bmlmb3Jtcz17fTt2LmF0dHJpYnV0ZXM9e307dmFyIHc7cz1cInZpZXdNYXRyaXggbW9kZWxWaWV3TWF0cml4IHByb2plY3Rpb25NYXRyaXggbm9ybWFsTWF0cml4IG1vZGVsTWF0cml4IGNhbWVyYVBvc2l0aW9uIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1wiLnNwbGl0KFwiIFwiKTtjLnVzZVZlcnRleFRleHR1cmU/KHMucHVzaChcImJvbmVUZXh0dXJlXCIpLHMucHVzaChcImJvbmVUZXh0dXJlV2lkdGhcIikscy5wdXNoKFwiYm9uZVRleHR1cmVIZWlnaHRcIikpOnMucHVzaChcImJvbmVHbG9iYWxNYXRyaWNlc1wiKTtmb3IodyBpbiBwKXMucHVzaCh3KTt3PXM7cz0wO2Zvcih1PXcubGVuZ3RoO3M8dTtzKyspcD13W3NdLHYudW5pZm9ybXNbcF09XG5qLmdldFVuaWZvcm1Mb2NhdGlvbih2LHApO3M9XCJwb3NpdGlvbiBub3JtYWwgdXYgdXYyIHRhbmdlbnQgY29sb3Igc2tpbkluZGV4IHNraW5XZWlnaHQgbGluZURpc3RhbmNlXCIuc3BsaXQoXCIgXCIpO2Zvcih3PTA7dzxjLm1heE1vcnBoVGFyZ2V0czt3Kyspcy5wdXNoKFwibW9ycGhUYXJnZXRcIit3KTtmb3Iodz0wO3c8Yy5tYXhNb3JwaE5vcm1hbHM7dysrKXMucHVzaChcIm1vcnBoTm9ybWFsXCIrdyk7Zm9yKGsgaW4gYilzLnB1c2goayk7az1zO3c9MDtmb3IoYj1rLmxlbmd0aDt3PGI7dysrKXM9a1t3XSx2LmF0dHJpYnV0ZXNbc109ai5nZXRBdHRyaWJMb2NhdGlvbih2LHMpO3YuaWQ9emErKztkYS5wdXNoKHtwcm9ncmFtOnYsY29kZTpuLHVzZWRUaW1lczoxfSk7TC5pbmZvLm1lbW9yeS5wcm9ncmFtcz1kYS5sZW5ndGg7az12fWEucHJvZ3JhbT1rO3c9YS5wcm9ncmFtLmF0dHJpYnV0ZXM7aWYoYS5tb3JwaFRhcmdldHMpe2EubnVtU3VwcG9ydGVkTW9ycGhUYXJnZXRzPTA7Yj1cIm1vcnBoVGFyZ2V0XCI7XG5mb3Ioaz0wO2s8dGhpcy5tYXhNb3JwaFRhcmdldHM7aysrKXY9YitrLDA8PXdbdl0mJmEubnVtU3VwcG9ydGVkTW9ycGhUYXJnZXRzKyt9aWYoYS5tb3JwaE5vcm1hbHMpe2EubnVtU3VwcG9ydGVkTW9ycGhOb3JtYWxzPTA7Yj1cIm1vcnBoTm9ybWFsXCI7Zm9yKGs9MDtrPHRoaXMubWF4TW9ycGhOb3JtYWxzO2srKyl2PWIraywwPD13W3ZdJiZhLm51bVN1cHBvcnRlZE1vcnBoTm9ybWFscysrfWEudW5pZm9ybXNMaXN0PVtdO2ZvcihpIGluIGEudW5pZm9ybXMpYS51bmlmb3Jtc0xpc3QucHVzaChbYS51bmlmb3Jtc1tpXSxpXSl9O3RoaXMuc2V0RmFjZUN1bGxpbmc9ZnVuY3Rpb24oYSxiKXthPT09VEhSRUUuQ3VsbEZhY2VOb25lP2ouZGlzYWJsZShqLkNVTExfRkFDRSk6KGI9PT1USFJFRS5Gcm9udEZhY2VEaXJlY3Rpb25DVz9qLmZyb250RmFjZShqLkNXKTpqLmZyb250RmFjZShqLkNDVyksYT09PVRIUkVFLkN1bGxGYWNlQmFjaz9qLmN1bGxGYWNlKGouQkFDSyk6YT09PVRIUkVFLkN1bGxGYWNlRnJvbnQ/XG5qLmN1bGxGYWNlKGouRlJPTlQpOmouY3VsbEZhY2Uoai5GUk9OVF9BTkRfQkFDSyksai5lbmFibGUoai5DVUxMX0ZBQ0UpKX07dGhpcy5zZXRNYXRlcmlhbEZhY2VzPWZ1bmN0aW9uKGEpe3ZhciBiPWEuc2lkZT09PVRIUkVFLkRvdWJsZVNpZGUsYT1hLnNpZGU9PT1USFJFRS5CYWNrU2lkZTtZIT09YiYmKGI/ai5kaXNhYmxlKGouQ1VMTF9GQUNFKTpqLmVuYWJsZShqLkNVTExfRkFDRSksWT1iKTtVIT09YSYmKGE/ai5mcm9udEZhY2Uoai5DVyk6ai5mcm9udEZhY2Uoai5DQ1cpLFU9YSl9O3RoaXMuc2V0RGVwdGhUZXN0PWZ1bmN0aW9uKGEpe0dhIT09YSYmKGE/ai5lbmFibGUoai5ERVBUSF9URVNUKTpqLmRpc2FibGUoai5ERVBUSF9URVNUKSxHYT1hKX07dGhpcy5zZXREZXB0aFdyaXRlPWZ1bmN0aW9uKGEpe2thIT09YSYmKGouZGVwdGhNYXNrKGEpLGthPWEpfTt0aGlzLnNldEJsZW5kaW5nPWZ1bmN0aW9uKGEsYixjLGQpe2EhPT1qYSYmKGE9PT1USFJFRS5Ob0JsZW5kaW5nP2ouZGlzYWJsZShqLkJMRU5EKTpcbmE9PT1USFJFRS5BZGRpdGl2ZUJsZW5kaW5nPyhqLmVuYWJsZShqLkJMRU5EKSxqLmJsZW5kRXF1YXRpb24oai5GVU5DX0FERCksai5ibGVuZEZ1bmMoai5TUkNfQUxQSEEsai5PTkUpKTphPT09VEhSRUUuU3VidHJhY3RpdmVCbGVuZGluZz8oai5lbmFibGUoai5CTEVORCksai5ibGVuZEVxdWF0aW9uKGouRlVOQ19BREQpLGouYmxlbmRGdW5jKGouWkVSTyxqLk9ORV9NSU5VU19TUkNfQ09MT1IpKTphPT09VEhSRUUuTXVsdGlwbHlCbGVuZGluZz8oai5lbmFibGUoai5CTEVORCksai5ibGVuZEVxdWF0aW9uKGouRlVOQ19BREQpLGouYmxlbmRGdW5jKGouWkVSTyxqLlNSQ19DT0xPUikpOmE9PT1USFJFRS5DdXN0b21CbGVuZGluZz9qLmVuYWJsZShqLkJMRU5EKTooai5lbmFibGUoai5CTEVORCksai5ibGVuZEVxdWF0aW9uU2VwYXJhdGUoai5GVU5DX0FERCxqLkZVTkNfQUREKSxqLmJsZW5kRnVuY1NlcGFyYXRlKGouU1JDX0FMUEhBLGouT05FX01JTlVTX1NSQ19BTFBIQSxqLk9ORSxcbmouT05FX01JTlVTX1NSQ19BTFBIQSkpLGphPWEpO2lmKGE9PT1USFJFRS5DdXN0b21CbGVuZGluZyl7aWYoYiE9PXNhJiYoai5ibGVuZEVxdWF0aW9uKEkoYikpLHNhPWIpLGMhPT1oYXx8ZCE9PUthKWouYmxlbmRGdW5jKEkoYyksSShkKSksaGE9YyxLYT1kfWVsc2UgS2E9aGE9c2E9bnVsbH07dGhpcy5zZXRUZXh0dXJlPWZ1bmN0aW9uKGEsYil7aWYoYS5uZWVkc1VwZGF0ZSl7YS5fX3dlYmdsSW5pdHx8KGEuX193ZWJnbEluaXQ9ITAsYS5hZGRFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLERiKSxhLl9fd2ViZ2xUZXh0dXJlPWouY3JlYXRlVGV4dHVyZSgpLEwuaW5mby5tZW1vcnkudGV4dHVyZXMrKyk7ai5hY3RpdmVUZXh0dXJlKGouVEVYVFVSRTArYik7ai5iaW5kVGV4dHVyZShqLlRFWFRVUkVfMkQsYS5fX3dlYmdsVGV4dHVyZSk7ai5waXhlbFN0b3JlaShqLlVOUEFDS19GTElQX1lfV0VCR0wsYS5mbGlwWSk7ai5waXhlbFN0b3JlaShqLlVOUEFDS19QUkVNVUxUSVBMWV9BTFBIQV9XRUJHTCxcbmEucHJlbXVsdGlwbHlBbHBoYSk7ai5waXhlbFN0b3JlaShqLlVOUEFDS19BTElHTk1FTlQsYS51bnBhY2tBbGlnbm1lbnQpO3ZhciBjPWEuaW1hZ2UsZD0wPT09KGMud2lkdGgmYy53aWR0aC0xKSYmMD09PShjLmhlaWdodCZjLmhlaWdodC0xKSxlPUkoYS5mb3JtYXQpLGY9SShhLnR5cGUpO0Yoai5URVhUVVJFXzJELGEsZCk7dmFyIGc9YS5taXBtYXBzO2lmKGEgaW5zdGFuY2VvZiBUSFJFRS5EYXRhVGV4dHVyZSlpZigwPGcubGVuZ3RoJiZkKXtmb3IodmFyIGg9MCxpPWcubGVuZ3RoO2g8aTtoKyspYz1nW2hdLGoudGV4SW1hZ2UyRChqLlRFWFRVUkVfMkQsaCxlLGMud2lkdGgsYy5oZWlnaHQsMCxlLGYsYy5kYXRhKTthLmdlbmVyYXRlTWlwbWFwcz0hMX1lbHNlIGoudGV4SW1hZ2UyRChqLlRFWFRVUkVfMkQsMCxlLGMud2lkdGgsYy5oZWlnaHQsMCxlLGYsYy5kYXRhKTtlbHNlIGlmKGEgaW5zdGFuY2VvZiBUSFJFRS5Db21wcmVzc2VkVGV4dHVyZSl7aD0wO2ZvcihpPWcubGVuZ3RoO2g8XG5pO2grKyljPWdbaF0sYS5mb3JtYXQhPT1USFJFRS5SR0JBRm9ybWF0P2ouY29tcHJlc3NlZFRleEltYWdlMkQoai5URVhUVVJFXzJELGgsZSxjLndpZHRoLGMuaGVpZ2h0LDAsYy5kYXRhKTpqLnRleEltYWdlMkQoai5URVhUVVJFXzJELGgsZSxjLndpZHRoLGMuaGVpZ2h0LDAsZSxmLGMuZGF0YSl9ZWxzZSBpZigwPGcubGVuZ3RoJiZkKXtoPTA7Zm9yKGk9Zy5sZW5ndGg7aDxpO2grKyljPWdbaF0sai50ZXhJbWFnZTJEKGouVEVYVFVSRV8yRCxoLGUsZSxmLGMpO2EuZ2VuZXJhdGVNaXBtYXBzPSExfWVsc2Ugai50ZXhJbWFnZTJEKGouVEVYVFVSRV8yRCwwLGUsZSxmLGEuaW1hZ2UpO2EuZ2VuZXJhdGVNaXBtYXBzJiZkJiZqLmdlbmVyYXRlTWlwbWFwKGouVEVYVFVSRV8yRCk7YS5uZWVkc1VwZGF0ZT0hMTtpZihhLm9uVXBkYXRlKWEub25VcGRhdGUoKX1lbHNlIGouYWN0aXZlVGV4dHVyZShqLlRFWFRVUkUwK2IpLGouYmluZFRleHR1cmUoai5URVhUVVJFXzJELGEuX193ZWJnbFRleHR1cmUpfTtcbnRoaXMuc2V0UmVuZGVyVGFyZ2V0PWZ1bmN0aW9uKGEpe3ZhciBiPWEgaW5zdGFuY2VvZiBUSFJFRS5XZWJHTFJlbmRlclRhcmdldEN1YmU7aWYoYSYmIWEuX193ZWJnbEZyYW1lYnVmZmVyKXt2b2lkIDA9PT1hLmRlcHRoQnVmZmVyJiYoYS5kZXB0aEJ1ZmZlcj0hMCk7dm9pZCAwPT09YS5zdGVuY2lsQnVmZmVyJiYoYS5zdGVuY2lsQnVmZmVyPSEwKTthLmFkZEV2ZW50TGlzdGVuZXIoXCJkaXNwb3NlXCIsRWIpO2EuX193ZWJnbFRleHR1cmU9ai5jcmVhdGVUZXh0dXJlKCk7TC5pbmZvLm1lbW9yeS50ZXh0dXJlcysrO3ZhciBjPTA9PT0oYS53aWR0aCZhLndpZHRoLTEpJiYwPT09KGEuaGVpZ2h0JmEuaGVpZ2h0LTEpLGQ9SShhLmZvcm1hdCksZT1JKGEudHlwZSk7aWYoYil7YS5fX3dlYmdsRnJhbWVidWZmZXI9W107YS5fX3dlYmdsUmVuZGVyYnVmZmVyPVtdO2ouYmluZFRleHR1cmUoai5URVhUVVJFX0NVQkVfTUFQLGEuX193ZWJnbFRleHR1cmUpO0Yoai5URVhUVVJFX0NVQkVfTUFQLFxuYSxjKTtmb3IodmFyIGY9MDs2PmY7ZisrKXthLl9fd2ViZ2xGcmFtZWJ1ZmZlcltmXT1qLmNyZWF0ZUZyYW1lYnVmZmVyKCk7YS5fX3dlYmdsUmVuZGVyYnVmZmVyW2ZdPWouY3JlYXRlUmVuZGVyYnVmZmVyKCk7ai50ZXhJbWFnZTJEKGouVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9YK2YsMCxkLGEud2lkdGgsYS5oZWlnaHQsMCxkLGUsbnVsbCk7dmFyIGc9YSxoPWouVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9YK2Y7ai5iaW5kRnJhbWVidWZmZXIoai5GUkFNRUJVRkZFUixhLl9fd2ViZ2xGcmFtZWJ1ZmZlcltmXSk7ai5mcmFtZWJ1ZmZlclRleHR1cmUyRChqLkZSQU1FQlVGRkVSLGouQ09MT1JfQVRUQUNITUVOVDAsaCxnLl9fd2ViZ2xUZXh0dXJlLDApO08oYS5fX3dlYmdsUmVuZGVyYnVmZmVyW2ZdLGEpfWMmJmouZ2VuZXJhdGVNaXBtYXAoai5URVhUVVJFX0NVQkVfTUFQKX1lbHNlIGEuX193ZWJnbEZyYW1lYnVmZmVyPWouY3JlYXRlRnJhbWVidWZmZXIoKSxhLl9fd2ViZ2xSZW5kZXJidWZmZXI9XG5hLnNoYXJlRGVwdGhGcm9tP2Euc2hhcmVEZXB0aEZyb20uX193ZWJnbFJlbmRlcmJ1ZmZlcjpqLmNyZWF0ZVJlbmRlcmJ1ZmZlcigpLGouYmluZFRleHR1cmUoai5URVhUVVJFXzJELGEuX193ZWJnbFRleHR1cmUpLEYoai5URVhUVVJFXzJELGEsYyksai50ZXhJbWFnZTJEKGouVEVYVFVSRV8yRCwwLGQsYS53aWR0aCxhLmhlaWdodCwwLGQsZSxudWxsKSxkPWouVEVYVFVSRV8yRCxqLmJpbmRGcmFtZWJ1ZmZlcihqLkZSQU1FQlVGRkVSLGEuX193ZWJnbEZyYW1lYnVmZmVyKSxqLmZyYW1lYnVmZmVyVGV4dHVyZTJEKGouRlJBTUVCVUZGRVIsai5DT0xPUl9BVFRBQ0hNRU5UMCxkLGEuX193ZWJnbFRleHR1cmUsMCksYS5zaGFyZURlcHRoRnJvbT9hLmRlcHRoQnVmZmVyJiYhYS5zdGVuY2lsQnVmZmVyP2ouZnJhbWVidWZmZXJSZW5kZXJidWZmZXIoai5GUkFNRUJVRkZFUixqLkRFUFRIX0FUVEFDSE1FTlQsai5SRU5ERVJCVUZGRVIsYS5fX3dlYmdsUmVuZGVyYnVmZmVyKTphLmRlcHRoQnVmZmVyJiZcbmEuc3RlbmNpbEJ1ZmZlciYmai5mcmFtZWJ1ZmZlclJlbmRlcmJ1ZmZlcihqLkZSQU1FQlVGRkVSLGouREVQVEhfU1RFTkNJTF9BVFRBQ0hNRU5ULGouUkVOREVSQlVGRkVSLGEuX193ZWJnbFJlbmRlcmJ1ZmZlcik6TyhhLl9fd2ViZ2xSZW5kZXJidWZmZXIsYSksYyYmai5nZW5lcmF0ZU1pcG1hcChqLlRFWFRVUkVfMkQpO2I/ai5iaW5kVGV4dHVyZShqLlRFWFRVUkVfQ1VCRV9NQVAsbnVsbCk6ai5iaW5kVGV4dHVyZShqLlRFWFRVUkVfMkQsbnVsbCk7ai5iaW5kUmVuZGVyYnVmZmVyKGouUkVOREVSQlVGRkVSLG51bGwpO2ouYmluZEZyYW1lYnVmZmVyKGouRlJBTUVCVUZGRVIsbnVsbCl9YT8oYj1iP2EuX193ZWJnbEZyYW1lYnVmZmVyW2EuYWN0aXZlQ3ViZUZhY2VdOmEuX193ZWJnbEZyYW1lYnVmZmVyLGM9YS53aWR0aCxhPWEuaGVpZ2h0LGU9ZD0wKTooYj1udWxsLGM9TWEsYT1mYixkPWJiLGU9Y2IpO2IhPT1iYSYmKGouYmluZEZyYW1lYnVmZmVyKGouRlJBTUVCVUZGRVIsYiksXG5qLnZpZXdwb3J0KGQsZSxjLGEpLGJhPWIpO3NiPWM7cGI9YX07dGhpcy5zaGFkb3dNYXBQbHVnaW49bmV3IFRIUkVFLlNoYWRvd01hcFBsdWdpbjt0aGlzLmFkZFByZVBsdWdpbih0aGlzLnNoYWRvd01hcFBsdWdpbik7dGhpcy5hZGRQb3N0UGx1Z2luKG5ldyBUSFJFRS5TcHJpdGVQbHVnaW4pO3RoaXMuYWRkUG9zdFBsdWdpbihuZXcgVEhSRUUuTGVuc0ZsYXJlUGx1Z2luKX07VEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ9ZnVuY3Rpb24oYSxiLGMpe3RoaXMud2lkdGg9YTt0aGlzLmhlaWdodD1iO2M9Y3x8e307dGhpcy53cmFwUz12b2lkIDAhPT1jLndyYXBTP2Mud3JhcFM6VEhSRUUuQ2xhbXBUb0VkZ2VXcmFwcGluZzt0aGlzLndyYXBUPXZvaWQgMCE9PWMud3JhcFQ/Yy53cmFwVDpUSFJFRS5DbGFtcFRvRWRnZVdyYXBwaW5nO3RoaXMubWFnRmlsdGVyPXZvaWQgMCE9PWMubWFnRmlsdGVyP2MubWFnRmlsdGVyOlRIUkVFLkxpbmVhckZpbHRlcjt0aGlzLm1pbkZpbHRlcj12b2lkIDAhPT1jLm1pbkZpbHRlcj9jLm1pbkZpbHRlcjpUSFJFRS5MaW5lYXJNaXBNYXBMaW5lYXJGaWx0ZXI7dGhpcy5hbmlzb3Ryb3B5PXZvaWQgMCE9PWMuYW5pc290cm9weT9jLmFuaXNvdHJvcHk6MTt0aGlzLm9mZnNldD1uZXcgVEhSRUUuVmVjdG9yMigwLDApO3RoaXMucmVwZWF0PW5ldyBUSFJFRS5WZWN0b3IyKDEsMSk7dGhpcy5mb3JtYXQ9dm9pZCAwIT09Yy5mb3JtYXQ/Yy5mb3JtYXQ6XG5USFJFRS5SR0JBRm9ybWF0O3RoaXMudHlwZT12b2lkIDAhPT1jLnR5cGU/Yy50eXBlOlRIUkVFLlVuc2lnbmVkQnl0ZVR5cGU7dGhpcy5kZXB0aEJ1ZmZlcj12b2lkIDAhPT1jLmRlcHRoQnVmZmVyP2MuZGVwdGhCdWZmZXI6ITA7dGhpcy5zdGVuY2lsQnVmZmVyPXZvaWQgMCE9PWMuc3RlbmNpbEJ1ZmZlcj9jLnN0ZW5jaWxCdWZmZXI6ITA7dGhpcy5nZW5lcmF0ZU1pcG1hcHM9ITA7dGhpcy5zaGFyZURlcHRoRnJvbT1udWxsfTtcblRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0LnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQsY2xvbmU6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQodGhpcy53aWR0aCx0aGlzLmhlaWdodCk7YS53cmFwUz10aGlzLndyYXBTO2Eud3JhcFQ9dGhpcy53cmFwVDthLm1hZ0ZpbHRlcj10aGlzLm1hZ0ZpbHRlcjthLm1pbkZpbHRlcj10aGlzLm1pbkZpbHRlcjthLmFuaXNvdHJvcHk9dGhpcy5hbmlzb3Ryb3B5O2Eub2Zmc2V0LmNvcHkodGhpcy5vZmZzZXQpO2EucmVwZWF0LmNvcHkodGhpcy5yZXBlYXQpO2EuZm9ybWF0PXRoaXMuZm9ybWF0O2EudHlwZT10aGlzLnR5cGU7YS5kZXB0aEJ1ZmZlcj10aGlzLmRlcHRoQnVmZmVyO2Euc3RlbmNpbEJ1ZmZlcj10aGlzLnN0ZW5jaWxCdWZmZXI7YS5nZW5lcmF0ZU1pcG1hcHM9dGhpcy5nZW5lcmF0ZU1pcG1hcHM7YS5zaGFyZURlcHRoRnJvbT10aGlzLnNoYXJlRGVwdGhGcm9tO1xucmV0dXJuIGF9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJkaXNwb3NlXCJ9KX19O1RIUkVFLkV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUuYXBwbHkoVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQucHJvdG90eXBlKTtUSFJFRS5XZWJHTFJlbmRlclRhcmdldEN1YmU9ZnVuY3Rpb24oYSxiLGMpe1RIUkVFLldlYkdMUmVuZGVyVGFyZ2V0LmNhbGwodGhpcyxhLGIsYyk7dGhpcy5hY3RpdmVDdWJlRmFjZT0wfTtUSFJFRS5XZWJHTFJlbmRlclRhcmdldEN1YmUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQucHJvdG90eXBlKTtUSFJFRS5SZW5kZXJhYmxlVmVydGV4PWZ1bmN0aW9uKCl7dGhpcy5wb3NpdGlvbldvcmxkPW5ldyBUSFJFRS5WZWN0b3IzO3RoaXMucG9zaXRpb25TY3JlZW49bmV3IFRIUkVFLlZlY3RvcjQ7dGhpcy52aXNpYmxlPSEwfTtUSFJFRS5SZW5kZXJhYmxlVmVydGV4LnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGEpe3RoaXMucG9zaXRpb25Xb3JsZC5jb3B5KGEucG9zaXRpb25Xb3JsZCk7dGhpcy5wb3NpdGlvblNjcmVlbi5jb3B5KGEucG9zaXRpb25TY3JlZW4pfTtUSFJFRS5SZW5kZXJhYmxlRmFjZTM9ZnVuY3Rpb24oKXt0aGlzLmlkPTA7dGhpcy52MT1uZXcgVEhSRUUuUmVuZGVyYWJsZVZlcnRleDt0aGlzLnYyPW5ldyBUSFJFRS5SZW5kZXJhYmxlVmVydGV4O3RoaXMudjM9bmV3IFRIUkVFLlJlbmRlcmFibGVWZXJ0ZXg7dGhpcy5jZW50cm9pZE1vZGVsPW5ldyBUSFJFRS5WZWN0b3IzO3RoaXMubm9ybWFsTW9kZWw9bmV3IFRIUkVFLlZlY3RvcjM7dGhpcy5ub3JtYWxNb2RlbFZpZXc9bmV3IFRIUkVFLlZlY3RvcjM7dGhpcy52ZXJ0ZXhOb3JtYWxzTGVuZ3RoPTA7dGhpcy52ZXJ0ZXhOb3JtYWxzTW9kZWw9W25ldyBUSFJFRS5WZWN0b3IzLG5ldyBUSFJFRS5WZWN0b3IzLG5ldyBUSFJFRS5WZWN0b3IzXTt0aGlzLnZlcnRleE5vcm1hbHNNb2RlbFZpZXc9W25ldyBUSFJFRS5WZWN0b3IzLG5ldyBUSFJFRS5WZWN0b3IzLG5ldyBUSFJFRS5WZWN0b3IzXTt0aGlzLm1hdGVyaWFsPXRoaXMuY29sb3I9bnVsbDt0aGlzLnV2cz1bW11dO3RoaXMuej1cbjB9O1RIUkVFLlJlbmRlcmFibGVPYmplY3Q9ZnVuY3Rpb24oKXt0aGlzLmlkPTA7dGhpcy5vYmplY3Q9bnVsbDt0aGlzLno9MH07VEhSRUUuUmVuZGVyYWJsZVNwcml0ZT1mdW5jdGlvbigpe3RoaXMuaWQ9MDt0aGlzLm9iamVjdD1udWxsO3RoaXMucm90YXRpb249dGhpcy56PXRoaXMueT10aGlzLng9MDt0aGlzLnNjYWxlPW5ldyBUSFJFRS5WZWN0b3IyO3RoaXMubWF0ZXJpYWw9bnVsbH07VEhSRUUuUmVuZGVyYWJsZUxpbmU9ZnVuY3Rpb24oKXt0aGlzLmlkPTA7dGhpcy52MT1uZXcgVEhSRUUuUmVuZGVyYWJsZVZlcnRleDt0aGlzLnYyPW5ldyBUSFJFRS5SZW5kZXJhYmxlVmVydGV4O3RoaXMudmVydGV4Q29sb3JzPVtuZXcgVEhSRUUuQ29sb3IsbmV3IFRIUkVFLkNvbG9yXTt0aGlzLm1hdGVyaWFsPW51bGw7dGhpcy56PTB9O1RIUkVFLkdlb21ldHJ5VXRpbHM9e21lcmdlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9YS52ZXJ0aWNlcy5sZW5ndGgsaD1iIGluc3RhbmNlb2YgVEhSRUUuTWVzaD9iLmdlb21ldHJ5OmIsZz1hLnZlcnRpY2VzLGk9aC52ZXJ0aWNlcyxrPWEuZmFjZXMsbT1oLmZhY2VzLGE9YS5mYWNlVmVydGV4VXZzWzBdLGg9aC5mYWNlVmVydGV4VXZzWzBdO3ZvaWQgMD09PWMmJihjPTApO2IgaW5zdGFuY2VvZiBUSFJFRS5NZXNoJiYoYi5tYXRyaXhBdXRvVXBkYXRlJiZiLnVwZGF0ZU1hdHJpeCgpLGQ9Yi5tYXRyaXgsZT0obmV3IFRIUkVFLk1hdHJpeDMpLmdldE5vcm1hbE1hdHJpeChkKSk7Zm9yKHZhciBiPTAsbD1pLmxlbmd0aDtiPGw7YisrKXt2YXIgcD1pW2JdLmNsb25lKCk7ZCYmcC5hcHBseU1hdHJpeDQoZCk7Zy5wdXNoKHApfWI9MDtmb3IobD1tLmxlbmd0aDtiPGw7YisrKXt2YXIgcD1tW2JdLHQscyxxPXAudmVydGV4Tm9ybWFscyxuPXAudmVydGV4Q29sb3JzO3Q9bmV3IFRIUkVFLkZhY2UzKHAuYStcbmYscC5iK2YscC5jK2YpO3Qubm9ybWFsLmNvcHkocC5ub3JtYWwpO2UmJnQubm9ybWFsLmFwcGx5TWF0cml4MyhlKS5ub3JtYWxpemUoKTtnPTA7Zm9yKGk9cS5sZW5ndGg7ZzxpO2crKylzPXFbZ10uY2xvbmUoKSxlJiZzLmFwcGx5TWF0cml4MyhlKS5ub3JtYWxpemUoKSx0LnZlcnRleE5vcm1hbHMucHVzaChzKTt0LmNvbG9yLmNvcHkocC5jb2xvcik7Zz0wO2ZvcihpPW4ubGVuZ3RoO2c8aTtnKyspcz1uW2ddLHQudmVydGV4Q29sb3JzLnB1c2gocy5jbG9uZSgpKTt0Lm1hdGVyaWFsSW5kZXg9cC5tYXRlcmlhbEluZGV4K2M7dC5jZW50cm9pZC5jb3B5KHAuY2VudHJvaWQpO2QmJnQuY2VudHJvaWQuYXBwbHlNYXRyaXg0KGQpO2sucHVzaCh0KX1iPTA7Zm9yKGw9aC5sZW5ndGg7YjxsO2IrKyl7Yz1oW2JdO2Q9W107Zz0wO2ZvcihpPWMubGVuZ3RoO2c8aTtnKyspZC5wdXNoKG5ldyBUSFJFRS5WZWN0b3IyKGNbZ10ueCxjW2ddLnkpKTthLnB1c2goZCl9fSxyYW5kb21Qb2ludEluVHJpYW5nbGU6ZnVuY3Rpb24oKXt2YXIgYT1cbm5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihiLGMsZCl7dmFyIGU9bmV3IFRIUkVFLlZlY3RvcjMsZj1USFJFRS5NYXRoLnJhbmRvbTE2KCksaD1USFJFRS5NYXRoLnJhbmRvbTE2KCk7MTxmK2gmJihmPTEtZixoPTEtaCk7dmFyIGc9MS1mLWg7ZS5jb3B5KGIpO2UubXVsdGlwbHlTY2FsYXIoZik7YS5jb3B5KGMpO2EubXVsdGlwbHlTY2FsYXIoaCk7ZS5hZGQoYSk7YS5jb3B5KGQpO2EubXVsdGlwbHlTY2FsYXIoZyk7ZS5hZGQoYSk7cmV0dXJuIGV9fSgpLHJhbmRvbVBvaW50SW5GYWNlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIFRIUkVFLkdlb21ldHJ5VXRpbHMucmFuZG9tUG9pbnRJblRyaWFuZ2xlKGIudmVydGljZXNbYS5hXSxiLnZlcnRpY2VzW2EuYl0sYi52ZXJ0aWNlc1thLmNdKX0scmFuZG9tUG9pbnRzSW5HZW9tZXRyeTpmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSl7ZnVuY3Rpb24gYihjLGQpe2lmKGQ8YylyZXR1cm4gYzt2YXIgZT1jK01hdGguZmxvb3IoKGQtXG5jKS8yKTtyZXR1cm4ga1tlXT5hP2IoYyxlLTEpOmtbZV08YT9iKGUrMSxkKTplfXJldHVybiBiKDAsay5sZW5ndGgtMSl9dmFyIGQsZSxmPWEuZmFjZXMsaD1hLnZlcnRpY2VzLGc9Zi5sZW5ndGgsaT0wLGs9W10sbSxsLHA7Zm9yKGU9MDtlPGc7ZSsrKWQ9ZltlXSxtPWhbZC5hXSxsPWhbZC5iXSxwPWhbZC5jXSxkLl9hcmVhPVRIUkVFLkdlb21ldHJ5VXRpbHMudHJpYW5nbGVBcmVhKG0sbCxwKSxpKz1kLl9hcmVhLGtbZV09aTtkPVtdO2ZvcihlPTA7ZTxiO2UrKyloPVRIUkVFLk1hdGgucmFuZG9tMTYoKSppLGg9YyhoKSxkW2VdPVRIUkVFLkdlb21ldHJ5VXRpbHMucmFuZG9tUG9pbnRJbkZhY2UoZltoXSxhLCEwKTtyZXR1cm4gZH0sdHJpYW5nbGVBcmVhOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjMsYj1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oYyxkLGUpe2Euc3ViVmVjdG9ycyhkLGMpO2Iuc3ViVmVjdG9ycyhlLGMpO2EuY3Jvc3MoYik7cmV0dXJuIDAuNSpcbmEubGVuZ3RoKCl9fSgpLGNlbnRlcjpmdW5jdGlvbihhKXthLmNvbXB1dGVCb3VuZGluZ0JveCgpO3ZhciBiPWEuYm91bmRpbmdCb3gsYz1uZXcgVEhSRUUuVmVjdG9yMztjLmFkZFZlY3RvcnMoYi5taW4sYi5tYXgpO2MubXVsdGlwbHlTY2FsYXIoLTAuNSk7YS5hcHBseU1hdHJpeCgobmV3IFRIUkVFLk1hdHJpeDQpLm1ha2VUcmFuc2xhdGlvbihjLngsYy55LGMueikpO2EuY29tcHV0ZUJvdW5kaW5nQm94KCk7cmV0dXJuIGN9LHRyaWFuZ3VsYXRlUXVhZHM6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZj1bXSxoPVtdO2I9MDtmb3IoYz1hLmZhY2VWZXJ0ZXhVdnMubGVuZ3RoO2I8YztiKyspaFtiXT1bXTtiPTA7Zm9yKGM9YS5mYWNlcy5sZW5ndGg7YjxjO2IrKyl7Zi5wdXNoKGEuZmFjZXNbYl0pO2Q9MDtmb3IoZT1hLmZhY2VWZXJ0ZXhVdnMubGVuZ3RoO2Q8ZTtkKyspaFtkXS5wdXNoKGEuZmFjZVZlcnRleFV2c1tkXVtiXSl9YS5mYWNlcz1mO2EuZmFjZVZlcnRleFV2cz1oO2EuY29tcHV0ZUNlbnRyb2lkcygpO1xuYS5jb21wdXRlRmFjZU5vcm1hbHMoKTthLmNvbXB1dGVWZXJ0ZXhOb3JtYWxzKCk7YS5oYXNUYW5nZW50cyYmYS5jb21wdXRlVGFuZ2VudHMoKX19O1RIUkVFLkltYWdlVXRpbHM9e2Nyb3NzT3JpZ2luOlwiYW5vbnltb3VzXCIsbG9hZFRleHR1cmU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPW5ldyBUSFJFRS5JbWFnZUxvYWRlcjtkLmNyb3NzT3JpZ2luPXRoaXMuY3Jvc3NPcmlnaW47dmFyIGU9bmV3IFRIUkVFLlRleHR1cmUodm9pZCAwLGIpLGI9ZC5sb2FkKGEsZnVuY3Rpb24oKXtlLm5lZWRzVXBkYXRlPSEwO2MmJmMoZSl9KTtlLmltYWdlPWI7ZS5zb3VyY2VGaWxlPWE7cmV0dXJuIGV9LGxvYWRDb21wcmVzc2VkVGV4dHVyZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1uZXcgVEhSRUUuQ29tcHJlc3NlZFRleHR1cmU7ZS5tYXBwaW5nPWI7dmFyIGY9bmV3IFhNTEh0dHBSZXF1ZXN0O2Yub25sb2FkPWZ1bmN0aW9uKCl7dmFyIGE9VEhSRUUuSW1hZ2VVdGlscy5wYXJzZUREUyhmLnJlc3BvbnNlLCEwKTtlLmZvcm1hdD1hLmZvcm1hdDtlLm1pcG1hcHM9YS5taXBtYXBzO2UuaW1hZ2Uud2lkdGg9YS53aWR0aDtlLmltYWdlLmhlaWdodD1hLmhlaWdodDtcbmUuZ2VuZXJhdGVNaXBtYXBzPSExO2UubmVlZHNVcGRhdGU9ITA7YyYmYyhlKX07Zi5vbmVycm9yPWQ7Zi5vcGVuKFwiR0VUXCIsYSwhMCk7Zi5yZXNwb25zZVR5cGU9XCJhcnJheWJ1ZmZlclwiO2Yuc2VuZChudWxsKTtyZXR1cm4gZX0sbG9hZFRleHR1cmVDdWJlOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPVtdO2UubG9hZENvdW50PTA7dmFyIGY9bmV3IFRIUkVFLlRleHR1cmU7Zi5pbWFnZT1lO3ZvaWQgMCE9PWImJihmLm1hcHBpbmc9Yik7Zi5mbGlwWT0hMTtmb3IodmFyIGI9MCxoPWEubGVuZ3RoO2I8aDsrK2Ipe3ZhciBnPW5ldyBJbWFnZTtlW2JdPWc7Zy5vbmxvYWQ9ZnVuY3Rpb24oKXtlLmxvYWRDb3VudCs9MTs2PT09ZS5sb2FkQ291bnQmJihmLm5lZWRzVXBkYXRlPSEwLGMmJmMoZikpfTtnLm9uZXJyb3I9ZDtnLmNyb3NzT3JpZ2luPXRoaXMuY3Jvc3NPcmlnaW47Zy5zcmM9YVtiXX1yZXR1cm4gZn0sbG9hZENvbXByZXNzZWRUZXh0dXJlQ3ViZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1cbltdO2UubG9hZENvdW50PTA7dmFyIGY9bmV3IFRIUkVFLkNvbXByZXNzZWRUZXh0dXJlO2YuaW1hZ2U9ZTt2b2lkIDAhPT1iJiYoZi5tYXBwaW5nPWIpO2YuZmxpcFk9ITE7Zi5nZW5lcmF0ZU1pcG1hcHM9ITE7Yj1mdW5jdGlvbihhLGIpe3JldHVybiBmdW5jdGlvbigpe3ZhciBkPVRIUkVFLkltYWdlVXRpbHMucGFyc2VERFMoYS5yZXNwb25zZSwhMCk7Yi5mb3JtYXQ9ZC5mb3JtYXQ7Yi5taXBtYXBzPWQubWlwbWFwcztiLndpZHRoPWQud2lkdGg7Yi5oZWlnaHQ9ZC5oZWlnaHQ7ZS5sb2FkQ291bnQrPTE7Nj09PWUubG9hZENvdW50JiYoZi5mb3JtYXQ9ZC5mb3JtYXQsZi5uZWVkc1VwZGF0ZT0hMCxjJiZjKGYpKX19O2lmKGEgaW5zdGFuY2VvZiBBcnJheSlmb3IodmFyIGg9MCxnPWEubGVuZ3RoO2g8ZzsrK2gpe3ZhciBpPXt9O2VbaF09aTt2YXIgaz1uZXcgWE1MSHR0cFJlcXVlc3Q7ay5vbmxvYWQ9YihrLGkpO2sub25lcnJvcj1kO2k9YVtoXTtrLm9wZW4oXCJHRVRcIixpLCEwKTtrLnJlc3BvbnNlVHlwZT1cblwiYXJyYXlidWZmZXJcIjtrLnNlbmQobnVsbCl9ZWxzZSBrPW5ldyBYTUxIdHRwUmVxdWVzdCxrLm9ubG9hZD1mdW5jdGlvbigpe3ZhciBhPVRIUkVFLkltYWdlVXRpbHMucGFyc2VERFMoay5yZXNwb25zZSwhMCk7aWYoYS5pc0N1YmVtYXApe2Zvcih2YXIgYj1hLm1pcG1hcHMubGVuZ3RoL2EubWlwbWFwQ291bnQsZD0wO2Q8YjtkKyspe2VbZF09e21pcG1hcHM6W119O2Zvcih2YXIgZz0wO2c8YS5taXBtYXBDb3VudDtnKyspZVtkXS5taXBtYXBzLnB1c2goYS5taXBtYXBzW2QqYS5taXBtYXBDb3VudCtnXSksZVtkXS5mb3JtYXQ9YS5mb3JtYXQsZVtkXS53aWR0aD1hLndpZHRoLGVbZF0uaGVpZ2h0PWEuaGVpZ2h0fWYuZm9ybWF0PWEuZm9ybWF0O2YubmVlZHNVcGRhdGU9ITA7YyYmYyhmKX19LGsub25lcnJvcj1kLGsub3BlbihcIkdFVFwiLGEsITApLGsucmVzcG9uc2VUeXBlPVwiYXJyYXlidWZmZXJcIixrLnNlbmQobnVsbCk7cmV0dXJuIGZ9LGxvYWRERFNUZXh0dXJlOmZ1bmN0aW9uKGEsXG5iLGMsZCl7dmFyIGU9W107ZS5sb2FkQ291bnQ9MDt2YXIgZj1uZXcgVEhSRUUuQ29tcHJlc3NlZFRleHR1cmU7Zi5pbWFnZT1lO3ZvaWQgMCE9PWImJihmLm1hcHBpbmc9Yik7Zi5mbGlwWT0hMTtmLmdlbmVyYXRlTWlwbWFwcz0hMTt2YXIgaD1uZXcgWE1MSHR0cFJlcXVlc3Q7aC5vbmxvYWQ9ZnVuY3Rpb24oKXt2YXIgYT1USFJFRS5JbWFnZVV0aWxzLnBhcnNlRERTKGgucmVzcG9uc2UsITApO2lmKGEuaXNDdWJlbWFwKWZvcih2YXIgYj1hLm1pcG1hcHMubGVuZ3RoL2EubWlwbWFwQ291bnQsZD0wO2Q8YjtkKyspe2VbZF09e21pcG1hcHM6W119O2Zvcih2YXIgbT0wO208YS5taXBtYXBDb3VudDttKyspZVtkXS5taXBtYXBzLnB1c2goYS5taXBtYXBzW2QqYS5taXBtYXBDb3VudCttXSksZVtkXS5mb3JtYXQ9YS5mb3JtYXQsZVtkXS53aWR0aD1hLndpZHRoLGVbZF0uaGVpZ2h0PWEuaGVpZ2h0fWVsc2UgZi5pbWFnZS53aWR0aD1hLndpZHRoLGYuaW1hZ2UuaGVpZ2h0PWEuaGVpZ2h0LFxuZi5taXBtYXBzPWEubWlwbWFwcztmLmZvcm1hdD1hLmZvcm1hdDtmLm5lZWRzVXBkYXRlPSEwO2MmJmMoZil9O2gub25lcnJvcj1kO2gub3BlbihcIkdFVFwiLGEsITApO2gucmVzcG9uc2VUeXBlPVwiYXJyYXlidWZmZXJcIjtoLnNlbmQobnVsbCk7cmV0dXJuIGZ9LHBhcnNlRERTOmZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhKXtyZXR1cm4gYS5jaGFyQ29kZUF0KDApKyhhLmNoYXJDb2RlQXQoMSk8PDgpKyhhLmNoYXJDb2RlQXQoMik8PDE2KSsoYS5jaGFyQ29kZUF0KDMpPDwyNCl9dmFyIGQ9e21pcG1hcHM6W10sd2lkdGg6MCxoZWlnaHQ6MCxmb3JtYXQ6bnVsbCxtaXBtYXBDb3VudDoxfSxlPWMoXCJEWFQxXCIpLGY9YyhcIkRYVDNcIiksaD1jKFwiRFhUNVwiKSxnPW5ldyBJbnQzMkFycmF5KGEsMCwzMSk7aWYoNTQyMzI3ODc2IT09Z1swXSlyZXR1cm4gY29uc29sZS5lcnJvcihcIkltYWdlVXRpbHMucGFyc2VERFMoKTogSW52YWxpZCBtYWdpYyBudW1iZXIgaW4gRERTIGhlYWRlclwiKSxkO2lmKCFnWzIwXSZcbjQpcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJJbWFnZVV0aWxzLnBhcnNlRERTKCk6IFVuc3VwcG9ydGVkIGZvcm1hdCwgbXVzdCBjb250YWluIGEgRm91ckNDIGNvZGVcIiksZDt2YXIgaT1nWzIxXSxrPSExO3N3aXRjaChpKXtjYXNlIGU6ZT04O2QuZm9ybWF0PVRIUkVFLlJHQl9TM1RDX0RYVDFfRm9ybWF0O2JyZWFrO2Nhc2UgZjplPTE2O2QuZm9ybWF0PVRIUkVFLlJHQkFfUzNUQ19EWFQzX0Zvcm1hdDticmVhaztjYXNlIGg6ZT0xNjtkLmZvcm1hdD1USFJFRS5SR0JBX1MzVENfRFhUNV9Gb3JtYXQ7YnJlYWs7ZGVmYXVsdDppZigzMj09Z1syMl0mJmdbMjNdJjE2NzExNjgwJiZnWzI0XSY2NTI4MCYmZ1syNV0mMjU1JiZnWzI2XSY0Mjc4MTkwMDgwKWs9ITAsZT02NCxkLmZvcm1hdD1USFJFRS5SR0JBRm9ybWF0O2Vsc2UgcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJJbWFnZVV0aWxzLnBhcnNlRERTKCk6IFVuc3VwcG9ydGVkIEZvdXJDQyBjb2RlOiBcIixTdHJpbmcuZnJvbUNoYXJDb2RlKGkmXG4yNTUsaT4+OCYyNTUsaT4+MTYmMjU1LGk+PjI0JjI1NSkpLGR9ZC5taXBtYXBDb3VudD0xO2dbMl0mMTMxMDcyJiYhMSE9PWImJihkLm1pcG1hcENvdW50PU1hdGgubWF4KDEsZ1s3XSkpO2QuaXNDdWJlbWFwPWdbMjhdJjUxMj8hMDohMTtkLndpZHRoPWdbNF07ZC5oZWlnaHQ9Z1szXTtmb3IodmFyIGc9Z1sxXSs0LGY9ZC53aWR0aCxoPWQuaGVpZ2h0LGk9ZC5pc0N1YmVtYXA/NjoxLG09MDttPGk7bSsrKXtmb3IodmFyIGw9MDtsPGQubWlwbWFwQ291bnQ7bCsrKXtpZihrKXt2YXIgcDtwPWY7Zm9yKHZhciB0PWgscz00KnAqdCxxPW5ldyBVaW50OEFycmF5KGEsZyxzKSxzPW5ldyBVaW50OEFycmF5KHMpLG49MCx1PTAscj0wO3I8dDtyKyspZm9yKHZhciB2PTA7djxwO3YrKyl7dmFyIHo9cVt1XTt1Kys7dmFyIEc9cVt1XTt1Kys7dmFyIHc9cVt1XTt1Kys7dmFyIHk9cVt1XTt1Kys7c1tuXT13O24rKztzW25dPUc7bisrO3Nbbl09ejtuKys7c1tuXT15O24rK31wPXM7dD1wLmxlbmd0aH1lbHNlIHQ9XG5NYXRoLm1heCg0LGYpLzQqTWF0aC5tYXgoNCxoKS80KmUscD1uZXcgVWludDhBcnJheShhLGcsdCk7ZC5taXBtYXBzLnB1c2goe2RhdGE6cCx3aWR0aDpmLGhlaWdodDpofSk7Zys9dDtmPU1hdGgubWF4KDAuNSpmLDEpO2g9TWF0aC5tYXgoMC41KmgsMSl9Zj1kLndpZHRoO2g9ZC5oZWlnaHR9cmV0dXJuIGR9LGdldE5vcm1hbE1hcDpmdW5jdGlvbihhLGIpe3ZhciBjPWZ1bmN0aW9uKGEpe3ZhciBiPU1hdGguc3FydChhWzBdKmFbMF0rYVsxXSphWzFdK2FbMl0qYVsyXSk7cmV0dXJuW2FbMF0vYixhWzFdL2IsYVsyXS9iXX0sYj1ifDEsZD1hLndpZHRoLGU9YS5oZWlnaHQsZj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO2Yud2lkdGg9ZDtmLmhlaWdodD1lO3ZhciBoPWYuZ2V0Q29udGV4dChcIjJkXCIpO2guZHJhd0ltYWdlKGEsMCwwKTtmb3IodmFyIGc9aC5nZXRJbWFnZURhdGEoMCwwLGQsZSkuZGF0YSxpPWguY3JlYXRlSW1hZ2VEYXRhKGQsZSksaz1pLmRhdGEsbT0wO208XG5kO20rKylmb3IodmFyIGw9MDtsPGU7bCsrKXt2YXIgcD0wPmwtMT8wOmwtMSx0PWwrMT5lLTE/ZS0xOmwrMSxzPTA+bS0xPzA6bS0xLHE9bSsxPmQtMT9kLTE6bSsxLG49W10sdT1bMCwwLGdbNCoobCpkK20pXS8yNTUqYl07bi5wdXNoKFstMSwwLGdbNCoobCpkK3MpXS8yNTUqYl0pO24ucHVzaChbLTEsLTEsZ1s0KihwKmQrcyldLzI1NSpiXSk7bi5wdXNoKFswLC0xLGdbNCoocCpkK20pXS8yNTUqYl0pO24ucHVzaChbMSwtMSxnWzQqKHAqZCtxKV0vMjU1KmJdKTtuLnB1c2goWzEsMCxnWzQqKGwqZCtxKV0vMjU1KmJdKTtuLnB1c2goWzEsMSxnWzQqKHQqZCtxKV0vMjU1KmJdKTtuLnB1c2goWzAsMSxnWzQqKHQqZCttKV0vMjU1KmJdKTtuLnB1c2goWy0xLDEsZ1s0Kih0KmQrcyldLzI1NSpiXSk7cD1bXTtzPW4ubGVuZ3RoO2Zvcih0PTA7dDxzO3QrKyl7dmFyIHE9blt0XSxyPW5bKHQrMSklc10scT1bcVswXS11WzBdLHFbMV0tdVsxXSxxWzJdLXVbMl1dLHI9W3JbMF0tdVswXSxcbnJbMV0tdVsxXSxyWzJdLXVbMl1dO3AucHVzaChjKFtxWzFdKnJbMl0tcVsyXSpyWzFdLHFbMl0qclswXS1xWzBdKnJbMl0scVswXSpyWzFdLXFbMV0qclswXV0pKX1uPVswLDAsMF07Zm9yKHQ9MDt0PHAubGVuZ3RoO3QrKyluWzBdKz1wW3RdWzBdLG5bMV0rPXBbdF1bMV0sblsyXSs9cFt0XVsyXTtuWzBdLz1wLmxlbmd0aDtuWzFdLz1wLmxlbmd0aDtuWzJdLz1wLmxlbmd0aDt1PTQqKGwqZCttKTtrW3VdPTI1NSooKG5bMF0rMSkvMil8MDtrW3UrMV09MjU1KigoblsxXSsxKS8yKXwwO2tbdSsyXT0yNTUqblsyXXwwO2tbdSszXT0yNTV9aC5wdXRJbWFnZURhdGEoaSwwLDApO3JldHVybiBmfSxnZW5lcmF0ZURhdGFUZXh0dXJlOmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9YSpiLGU9bmV3IFVpbnQ4QXJyYXkoMypkKSxmPU1hdGguZmxvb3IoMjU1KmMuciksaD1NYXRoLmZsb29yKDI1NSpjLmcpLGM9TWF0aC5mbG9vcigyNTUqYy5iKSxnPTA7ZzxkO2crKyllWzMqZ109ZixlWzMqZytcbjFdPWgsZVszKmcrMl09YzthPW5ldyBUSFJFRS5EYXRhVGV4dHVyZShlLGEsYixUSFJFRS5SR0JGb3JtYXQpO2EubmVlZHNVcGRhdGU9ITA7cmV0dXJuIGF9fTtUSFJFRS5TY2VuZVV0aWxzPXtjcmVhdGVNdWx0aU1hdGVyaWFsT2JqZWN0OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPW5ldyBUSFJFRS5PYmplY3QzRCxkPTAsZT1iLmxlbmd0aDtkPGU7ZCsrKWMuYWRkKG5ldyBUSFJFRS5NZXNoKGEsYltkXSkpO3JldHVybiBjfSxkZXRhY2g6ZnVuY3Rpb24oYSxiLGMpe2EuYXBwbHlNYXRyaXgoYi5tYXRyaXhXb3JsZCk7Yi5yZW1vdmUoYSk7Yy5hZGQoYSl9LGF0dGFjaDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9bmV3IFRIUkVFLk1hdHJpeDQ7ZC5nZXRJbnZlcnNlKGMubWF0cml4V29ybGQpO2EuYXBwbHlNYXRyaXgoZCk7Yi5yZW1vdmUoYSk7Yy5hZGQoYSl9fTtUSFJFRS5Gb250VXRpbHM9e2ZhY2VzOnt9LGZhY2U6XCJoZWx2ZXRpa2VyXCIsd2VpZ2h0Olwibm9ybWFsXCIsc3R5bGU6XCJub3JtYWxcIixzaXplOjE1MCxkaXZpc2lvbnM6MTAsZ2V0RmFjZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZhY2VzW3RoaXMuZmFjZV1bdGhpcy53ZWlnaHRdW3RoaXMuc3R5bGVdfSxsb2FkRmFjZTpmdW5jdGlvbihhKXt2YXIgYj1hLmZhbWlseU5hbWUudG9Mb3dlckNhc2UoKTt0aGlzLmZhY2VzW2JdPXRoaXMuZmFjZXNbYl18fHt9O3RoaXMuZmFjZXNbYl1bYS5jc3NGb250V2VpZ2h0XT10aGlzLmZhY2VzW2JdW2EuY3NzRm9udFdlaWdodF18fHt9O3RoaXMuZmFjZXNbYl1bYS5jc3NGb250V2VpZ2h0XVthLmNzc0ZvbnRTdHlsZV09YTtyZXR1cm4gdGhpcy5mYWNlc1tiXVthLmNzc0ZvbnRXZWlnaHRdW2EuY3NzRm9udFN0eWxlXT1hfSxkcmF3VGV4dDpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5nZXRGYWNlKCksYz10aGlzLnNpemUvYi5yZXNvbHV0aW9uLGQ9XG4wLGU9U3RyaW5nKGEpLnNwbGl0KFwiXCIpLGY9ZS5sZW5ndGgsaD1bXSxhPTA7YTxmO2ErKyl7dmFyIGc9bmV3IFRIUkVFLlBhdGgsZz10aGlzLmV4dHJhY3RHbHlwaFBvaW50cyhlW2FdLGIsYyxkLGcpLGQ9ZCtnLm9mZnNldDtoLnB1c2goZy5wYXRoKX1yZXR1cm57cGF0aHM6aCxvZmZzZXQ6ZC8yfX0sZXh0cmFjdEdseXBoUG9pbnRzOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9W10saCxnLGksayxtLGwscCx0LHMscSxuLHU9Yi5nbHlwaHNbYV18fGIuZ2x5cGhzW1wiP1wiXTtpZih1KXtpZih1Lm8pe2I9dS5fY2FjaGVkT3V0bGluZXx8KHUuX2NhY2hlZE91dGxpbmU9dS5vLnNwbGl0KFwiIFwiKSk7az1iLmxlbmd0aDtmb3IoYT0wO2E8azspc3dpdGNoKGk9YlthKytdLGkpe2Nhc2UgXCJtXCI6aT1iW2ErK10qYytkO209YlthKytdKmM7ZS5tb3ZlVG8oaSxtKTticmVhaztjYXNlIFwibFwiOmk9YlthKytdKmMrZDttPWJbYSsrXSpjO2UubGluZVRvKGksbSk7YnJlYWs7Y2FzZSBcInFcIjppPWJbYSsrXSpcbmMrZDttPWJbYSsrXSpjO3Q9YlthKytdKmMrZDtzPWJbYSsrXSpjO2UucXVhZHJhdGljQ3VydmVUbyh0LHMsaSxtKTtpZihoPWZbZi5sZW5ndGgtMV0pe2w9aC54O3A9aC55O2g9MTtmb3IoZz10aGlzLmRpdmlzaW9ucztoPD1nO2grKyl7dmFyIHI9aC9nO1RIUkVFLlNoYXBlLlV0aWxzLmIyKHIsbCx0LGkpO1RIUkVFLlNoYXBlLlV0aWxzLmIyKHIscCxzLG0pfX1icmVhaztjYXNlIFwiYlwiOmlmKGk9YlthKytdKmMrZCxtPWJbYSsrXSpjLHQ9YlthKytdKmMrZCxzPWJbYSsrXSotYyxxPWJbYSsrXSpjK2Qsbj1iW2ErK10qLWMsZS5iZXppZXJDdXJ2ZVRvKGksbSx0LHMscSxuKSxoPWZbZi5sZW5ndGgtMV0pe2w9aC54O3A9aC55O2g9MTtmb3IoZz10aGlzLmRpdmlzaW9ucztoPD1nO2grKylyPWgvZyxUSFJFRS5TaGFwZS5VdGlscy5iMyhyLGwsdCxxLGkpLFRIUkVFLlNoYXBlLlV0aWxzLmIzKHIscCxzLG4sbSl9fX1yZXR1cm57b2Zmc2V0OnUuaGEqYyxwYXRoOmV9fX19O1xuVEhSRUUuRm9udFV0aWxzLmdlbmVyYXRlU2hhcGVzPWZ1bmN0aW9uKGEsYil7dmFyIGI9Ynx8e30sYz12b2lkIDAhPT1iLmN1cnZlU2VnbWVudHM/Yi5jdXJ2ZVNlZ21lbnRzOjQsZD12b2lkIDAhPT1iLmZvbnQ/Yi5mb250OlwiaGVsdmV0aWtlclwiLGU9dm9pZCAwIT09Yi53ZWlnaHQ/Yi53ZWlnaHQ6XCJub3JtYWxcIixmPXZvaWQgMCE9PWIuc3R5bGU/Yi5zdHlsZTpcIm5vcm1hbFwiO1RIUkVFLkZvbnRVdGlscy5zaXplPXZvaWQgMCE9PWIuc2l6ZT9iLnNpemU6MTAwO1RIUkVFLkZvbnRVdGlscy5kaXZpc2lvbnM9YztUSFJFRS5Gb250VXRpbHMuZmFjZT1kO1RIUkVFLkZvbnRVdGlscy53ZWlnaHQ9ZTtUSFJFRS5Gb250VXRpbHMuc3R5bGU9ZjtjPVRIUkVFLkZvbnRVdGlscy5kcmF3VGV4dChhKS5wYXRocztkPVtdO2U9MDtmb3IoZj1jLmxlbmd0aDtlPGY7ZSsrKUFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGQsY1tlXS50b1NoYXBlcygpKTtyZXR1cm4gZH07XG4oZnVuY3Rpb24oYSl7dmFyIGI9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPWEubGVuZ3RoLGU9MCxmPWItMSxoPTA7aDxiO2Y9aCsrKWUrPWFbZl0ueCphW2hdLnktYVtoXS54KmFbZl0ueTtyZXR1cm4gMC41KmV9O2EuVHJpYW5ndWxhdGU9ZnVuY3Rpb24oYSxkKXt2YXIgZT1hLmxlbmd0aDtpZigzPmUpcmV0dXJuIG51bGw7dmFyIGY9W10saD1bXSxnPVtdLGksayxtO2lmKDA8YihhKSlmb3Ioaz0wO2s8ZTtrKyspaFtrXT1rO2Vsc2UgZm9yKGs9MDtrPGU7aysrKWhba109ZS0xLWs7dmFyIGw9MiplO2ZvcihrPWUtMTsyPGU7KXtpZigwPj1sLS0pe2NvbnNvbGUubG9nKFwiV2FybmluZywgdW5hYmxlIHRvIHRyaWFuZ3VsYXRlIHBvbHlnb24hXCIpO2JyZWFrfWk9aztlPD1pJiYoaT0wKTtrPWkrMTtlPD1rJiYoaz0wKTttPWsrMTtlPD1tJiYobT0wKTt2YXIgcDthOnt2YXIgdD1wPXZvaWQgMCxzPXZvaWQgMCxxPXZvaWQgMCxuPXZvaWQgMCx1PXZvaWQgMCxyPXZvaWQgMCx2PXZvaWQgMCx6PVxudm9pZCAwLHQ9YVtoW2ldXS54LHM9YVtoW2ldXS55LHE9YVtoW2tdXS54LG49YVtoW2tdXS55LHU9YVtoW21dXS54LHI9YVtoW21dXS55O2lmKDFFLTEwPihxLXQpKihyLXMpLShuLXMpKih1LXQpKXA9ITE7ZWxzZXt2YXIgRz12b2lkIDAsdz12b2lkIDAseT12b2lkIDAsRT12b2lkIDAsQT12b2lkIDAsSz12b2lkIDAsRD12b2lkIDAsRj12b2lkIDAsTz12b2lkIDAseD12b2lkIDAsTz1GPUQ9ej12PXZvaWQgMCxHPXUtcSx3PXItbix5PXQtdSxFPXMtcixBPXEtdCxLPW4tcztmb3IocD0wO3A8ZTtwKyspaWYoIShwPT09aXx8cD09PWt8fHA9PT1tKSlpZih2PWFbaFtwXV0ueCx6PWFbaFtwXV0ueSxEPXYtdCxGPXotcyxPPXYtcSx4PXotbix2LT11LHotPXIsTz1HKngtdypPLEQ9QSpGLUsqRCxGPXkqei1FKnYsLTFFLTEwPD1PJiYtMUUtMTA8PUYmJi0xRS0xMDw9RCl7cD0hMTticmVhayBhfXA9ITB9fWlmKHApe2YucHVzaChbYVtoW2ldXSxhW2hba11dLGFbaFttXV1dKTtnLnB1c2goW2hbaV0sXG5oW2tdLGhbbV1dKTtpPWs7Zm9yKG09aysxO208ZTtpKyssbSsrKWhbaV09aFttXTtlLS07bD0yKmV9fXJldHVybiBkP2c6Zn07YS5Ucmlhbmd1bGF0ZS5hcmVhPWI7cmV0dXJuIGF9KShUSFJFRS5Gb250VXRpbHMpO3NlbGYuX3R5cGVmYWNlX2pzPXtmYWNlczpUSFJFRS5Gb250VXRpbHMuZmFjZXMsbG9hZEZhY2U6VEhSRUUuRm9udFV0aWxzLmxvYWRGYWNlfTtUSFJFRS50eXBlZmFjZV9qcz1zZWxmLl90eXBlZmFjZV9qcztUSFJFRS5DdXJ2ZT1mdW5jdGlvbigpe307VEhSRUUuQ3VydmUucHJvdG90eXBlLmdldFBvaW50PWZ1bmN0aW9uKCl7Y29uc29sZS5sb2coXCJXYXJuaW5nLCBnZXRQb2ludCgpIG5vdCBpbXBsZW1lbnRlZCFcIik7cmV0dXJuIG51bGx9O1RIUkVFLkN1cnZlLnByb3RvdHlwZS5nZXRQb2ludEF0PWZ1bmN0aW9uKGEpe2E9dGhpcy5nZXRVdG9UbWFwcGluZyhhKTtyZXR1cm4gdGhpcy5nZXRQb2ludChhKX07VEhSRUUuQ3VydmUucHJvdG90eXBlLmdldFBvaW50cz1mdW5jdGlvbihhKXthfHwoYT01KTt2YXIgYixjPVtdO2ZvcihiPTA7Yjw9YTtiKyspYy5wdXNoKHRoaXMuZ2V0UG9pbnQoYi9hKSk7cmV0dXJuIGN9O1RIUkVFLkN1cnZlLnByb3RvdHlwZS5nZXRTcGFjZWRQb2ludHM9ZnVuY3Rpb24oYSl7YXx8KGE9NSk7dmFyIGIsYz1bXTtmb3IoYj0wO2I8PWE7YisrKWMucHVzaCh0aGlzLmdldFBvaW50QXQoYi9hKSk7cmV0dXJuIGN9O1xuVEhSRUUuQ3VydmUucHJvdG90eXBlLmdldExlbmd0aD1mdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0TGVuZ3RocygpO3JldHVybiBhW2EubGVuZ3RoLTFdfTtUSFJFRS5DdXJ2ZS5wcm90b3R5cGUuZ2V0TGVuZ3Rocz1mdW5jdGlvbihhKXthfHwoYT10aGlzLl9fYXJjTGVuZ3RoRGl2aXNpb25zP3RoaXMuX19hcmNMZW5ndGhEaXZpc2lvbnM6MjAwKTtpZih0aGlzLmNhY2hlQXJjTGVuZ3RocyYmdGhpcy5jYWNoZUFyY0xlbmd0aHMubGVuZ3RoPT1hKzEmJiF0aGlzLm5lZWRzVXBkYXRlKXJldHVybiB0aGlzLmNhY2hlQXJjTGVuZ3Roczt0aGlzLm5lZWRzVXBkYXRlPSExO3ZhciBiPVtdLGMsZD10aGlzLmdldFBvaW50KDApLGUsZj0wO2IucHVzaCgwKTtmb3IoZT0xO2U8PWE7ZSsrKWM9dGhpcy5nZXRQb2ludChlL2EpLGYrPWMuZGlzdGFuY2VUbyhkKSxiLnB1c2goZiksZD1jO3JldHVybiB0aGlzLmNhY2hlQXJjTGVuZ3Rocz1ifTtcblRIUkVFLkN1cnZlLnByb3RvdHlwZS51cGRhdGVBcmNMZW5ndGhzPWZ1bmN0aW9uKCl7dGhpcy5uZWVkc1VwZGF0ZT0hMDt0aGlzLmdldExlbmd0aHMoKX07VEhSRUUuQ3VydmUucHJvdG90eXBlLmdldFV0b1RtYXBwaW5nPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRMZW5ndGhzKCksZD0wLGU9Yy5sZW5ndGgsZjtmPWI/YjphKmNbZS0xXTtmb3IodmFyIGg9MCxnPWUtMSxpO2g8PWc7KWlmKGQ9TWF0aC5mbG9vcihoKyhnLWgpLzIpLGk9Y1tkXS1mLDA+aSloPWQrMTtlbHNlIGlmKDA8aSlnPWQtMTtlbHNle2c9ZDticmVha31kPWc7aWYoY1tkXT09ZilyZXR1cm4gZC8oZS0xKTtoPWNbZF07cmV0dXJuIGM9KGQrKGYtaCkvKGNbZCsxXS1oKSkvKGUtMSl9O1RIUkVFLkN1cnZlLnByb3RvdHlwZS5nZXRUYW5nZW50PWZ1bmN0aW9uKGEpe3ZhciBiPWEtMUUtNCxhPWErMUUtNDswPmImJihiPTApOzE8YSYmKGE9MSk7Yj10aGlzLmdldFBvaW50KGIpO3JldHVybiB0aGlzLmdldFBvaW50KGEpLmNsb25lKCkuc3ViKGIpLm5vcm1hbGl6ZSgpfTtcblRIUkVFLkN1cnZlLnByb3RvdHlwZS5nZXRUYW5nZW50QXQ9ZnVuY3Rpb24oYSl7YT10aGlzLmdldFV0b1RtYXBwaW5nKGEpO3JldHVybiB0aGlzLmdldFRhbmdlbnQoYSl9O1xuVEhSRUUuQ3VydmUuVXRpbHM9e3RhbmdlbnRRdWFkcmF0aWNCZXppZXI6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIDIqKDEtYSkqKGMtYikrMiphKihkLWMpfSx0YW5nZW50Q3ViaWNCZXppZXI6ZnVuY3Rpb24oYSxiLGMsZCxlKXtyZXR1cm4tMypiKigxLWEpKigxLWEpKzMqYyooMS1hKSooMS1hKS02KmEqYyooMS1hKSs2KmEqZCooMS1hKS0zKmEqYSpkKzMqYSphKmV9LHRhbmdlbnRTcGxpbmU6ZnVuY3Rpb24oYSl7cmV0dXJuIDYqYSphLTYqYSsoMyphKmEtNCphKzEpKygtNiphKmErNiphKSsoMyphKmEtMiphKX0saW50ZXJwb2xhdGU6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgYT0wLjUqKGMtYSksZD0wLjUqKGQtYiksZj1lKmU7cmV0dXJuKDIqYi0yKmMrYStkKSplKmYrKC0zKmIrMypjLTIqYS1kKSpmK2EqZStifX07XG5USFJFRS5DdXJ2ZS5jcmVhdGU9ZnVuY3Rpb24oYSxiKXthLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkN1cnZlLnByb3RvdHlwZSk7YS5wcm90b3R5cGUuZ2V0UG9pbnQ9YjtyZXR1cm4gYX07VEhSRUUuQ3VydmVQYXRoPWZ1bmN0aW9uKCl7dGhpcy5jdXJ2ZXM9W107dGhpcy5iZW5kcz1bXTt0aGlzLmF1dG9DbG9zZT0hMX07VEhSRUUuQ3VydmVQYXRoLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkN1cnZlLnByb3RvdHlwZSk7VEhSRUUuQ3VydmVQYXRoLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oYSl7dGhpcy5jdXJ2ZXMucHVzaChhKX07VEhSRUUuQ3VydmVQYXRoLnByb3RvdHlwZS5jaGVja0Nvbm5lY3Rpb249ZnVuY3Rpb24oKXt9O1RIUkVFLkN1cnZlUGF0aC5wcm90b3R5cGUuY2xvc2VQYXRoPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jdXJ2ZXNbMF0uZ2V0UG9pbnQoMCksYj10aGlzLmN1cnZlc1t0aGlzLmN1cnZlcy5sZW5ndGgtMV0uZ2V0UG9pbnQoMSk7YS5lcXVhbHMoYil8fHRoaXMuY3VydmVzLnB1c2gobmV3IFRIUkVFLkxpbmVDdXJ2ZShiLGEpKX07XG5USFJFRS5DdXJ2ZVBhdGgucHJvdG90eXBlLmdldFBvaW50PWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hKnRoaXMuZ2V0TGVuZ3RoKCksYz10aGlzLmdldEN1cnZlTGVuZ3RocygpLGE9MDthPGMubGVuZ3RoOyl7aWYoY1thXT49YilyZXR1cm4gYj1jW2FdLWIsYT10aGlzLmN1cnZlc1thXSxiPTEtYi9hLmdldExlbmd0aCgpLGEuZ2V0UG9pbnRBdChiKTthKyt9cmV0dXJuIG51bGx9O1RIUkVFLkN1cnZlUGF0aC5wcm90b3R5cGUuZ2V0TGVuZ3RoPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRDdXJ2ZUxlbmd0aHMoKTtyZXR1cm4gYVthLmxlbmd0aC0xXX07XG5USFJFRS5DdXJ2ZVBhdGgucHJvdG90eXBlLmdldEN1cnZlTGVuZ3Rocz1mdW5jdGlvbigpe2lmKHRoaXMuY2FjaGVMZW5ndGhzJiZ0aGlzLmNhY2hlTGVuZ3Rocy5sZW5ndGg9PXRoaXMuY3VydmVzLmxlbmd0aClyZXR1cm4gdGhpcy5jYWNoZUxlbmd0aHM7dmFyIGE9W10sYj0wLGMsZD10aGlzLmN1cnZlcy5sZW5ndGg7Zm9yKGM9MDtjPGQ7YysrKWIrPXRoaXMuY3VydmVzW2NdLmdldExlbmd0aCgpLGEucHVzaChiKTtyZXR1cm4gdGhpcy5jYWNoZUxlbmd0aHM9YX07XG5USFJFRS5DdXJ2ZVBhdGgucHJvdG90eXBlLmdldEJvdW5kaW5nQm94PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRQb2ludHMoKSxiLGMsZCxlLGYsaDtiPWM9TnVtYmVyLk5FR0FUSVZFX0lORklOSVRZO2U9Zj1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7dmFyIGcsaSxrLG0sbD1hWzBdaW5zdGFuY2VvZiBUSFJFRS5WZWN0b3IzO209bD9uZXcgVEhSRUUuVmVjdG9yMzpuZXcgVEhSRUUuVmVjdG9yMjtpPTA7Zm9yKGs9YS5sZW5ndGg7aTxrO2krKylnPWFbaV0sZy54PmI/Yj1nLng6Zy54PGUmJihlPWcueCksZy55PmM/Yz1nLnk6Zy55PGYmJihmPWcueSksbCYmKGcuej5kP2Q9Zy56OmcuejxoJiYoaD1nLnopKSxtLmFkZChnKTthPXttaW5YOmUsbWluWTpmLG1heFg6YixtYXhZOmMsY2VudHJvaWQ6bS5kaXZpZGVTY2FsYXIoayl9O2wmJihhLm1heFo9ZCxhLm1pblo9aCk7cmV0dXJuIGF9O1xuVEhSRUUuQ3VydmVQYXRoLnByb3RvdHlwZS5jcmVhdGVQb2ludHNHZW9tZXRyeT1mdW5jdGlvbihhKXthPXRoaXMuZ2V0UG9pbnRzKGEsITApO3JldHVybiB0aGlzLmNyZWF0ZUdlb21ldHJ5KGEpfTtUSFJFRS5DdXJ2ZVBhdGgucHJvdG90eXBlLmNyZWF0ZVNwYWNlZFBvaW50c0dlb21ldHJ5PWZ1bmN0aW9uKGEpe2E9dGhpcy5nZXRTcGFjZWRQb2ludHMoYSwhMCk7cmV0dXJuIHRoaXMuY3JlYXRlR2VvbWV0cnkoYSl9O1RIUkVFLkN1cnZlUGF0aC5wcm90b3R5cGUuY3JlYXRlR2VvbWV0cnk9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPW5ldyBUSFJFRS5HZW9tZXRyeSxjPTA7YzxhLmxlbmd0aDtjKyspYi52ZXJ0aWNlcy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IzKGFbY10ueCxhW2NdLnksYVtjXS56fHwwKSk7cmV0dXJuIGJ9O1RIUkVFLkN1cnZlUGF0aC5wcm90b3R5cGUuYWRkV3JhcFBhdGg9ZnVuY3Rpb24oYSl7dGhpcy5iZW5kcy5wdXNoKGEpfTtcblRIUkVFLkN1cnZlUGF0aC5wcm90b3R5cGUuZ2V0VHJhbnNmb3JtZWRQb2ludHM9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldFBvaW50cyhhKSxkLGU7Ynx8KGI9dGhpcy5iZW5kcyk7ZD0wO2ZvcihlPWIubGVuZ3RoO2Q8ZTtkKyspYz10aGlzLmdldFdyYXBQb2ludHMoYyxiW2RdKTtyZXR1cm4gY307VEhSRUUuQ3VydmVQYXRoLnByb3RvdHlwZS5nZXRUcmFuc2Zvcm1lZFNwYWNlZFBvaW50cz1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0U3BhY2VkUG9pbnRzKGEpLGQsZTtifHwoYj10aGlzLmJlbmRzKTtkPTA7Zm9yKGU9Yi5sZW5ndGg7ZDxlO2QrKyljPXRoaXMuZ2V0V3JhcFBvaW50cyhjLGJbZF0pO3JldHVybiBjfTtcblRIUkVFLkN1cnZlUGF0aC5wcm90b3R5cGUuZ2V0V3JhcFBvaW50cz1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0Qm91bmRpbmdCb3goKSxkLGUsZixoLGcsaTtkPTA7Zm9yKGU9YS5sZW5ndGg7ZDxlO2QrKylmPWFbZF0saD1mLngsZz1mLnksaT1oL2MubWF4WCxpPWIuZ2V0VXRvVG1hcHBpbmcoaSxoKSxoPWIuZ2V0UG9pbnQoaSksaT1iLmdldFRhbmdlbnQoaSksaS5zZXQoLWkueSxpLngpLm11bHRpcGx5U2NhbGFyKGcpLGYueD1oLngraS54LGYueT1oLnkraS55O3JldHVybiBhfTtUSFJFRS5HeXJvc2NvcGU9ZnVuY3Rpb24oKXtUSFJFRS5PYmplY3QzRC5jYWxsKHRoaXMpfTtUSFJFRS5HeXJvc2NvcGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlKTtcblRIUkVFLkd5cm9zY29wZS5wcm90b3R5cGUudXBkYXRlTWF0cml4V29ybGQ9ZnVuY3Rpb24oYSl7dGhpcy5tYXRyaXhBdXRvVXBkYXRlJiZ0aGlzLnVwZGF0ZU1hdHJpeCgpO2lmKHRoaXMubWF0cml4V29ybGROZWVkc1VwZGF0ZXx8YSl0aGlzLnBhcmVudD8odGhpcy5tYXRyaXhXb3JsZC5tdWx0aXBseU1hdHJpY2VzKHRoaXMucGFyZW50Lm1hdHJpeFdvcmxkLHRoaXMubWF0cml4KSx0aGlzLm1hdHJpeFdvcmxkLmRlY29tcG9zZSh0aGlzLnRyYW5zbGF0aW9uV29ybGQsdGhpcy5xdWF0ZXJuaW9uV29ybGQsdGhpcy5zY2FsZVdvcmxkKSx0aGlzLm1hdHJpeC5kZWNvbXBvc2UodGhpcy50cmFuc2xhdGlvbk9iamVjdCx0aGlzLnF1YXRlcm5pb25PYmplY3QsdGhpcy5zY2FsZU9iamVjdCksdGhpcy5tYXRyaXhXb3JsZC5jb21wb3NlKHRoaXMudHJhbnNsYXRpb25Xb3JsZCx0aGlzLnF1YXRlcm5pb25PYmplY3QsdGhpcy5zY2FsZVdvcmxkKSk6dGhpcy5tYXRyaXhXb3JsZC5jb3B5KHRoaXMubWF0cml4KSxcbnRoaXMubWF0cml4V29ybGROZWVkc1VwZGF0ZT0hMSxhPSEwO2Zvcih2YXIgYj0wLGM9dGhpcy5jaGlsZHJlbi5sZW5ndGg7YjxjO2IrKyl0aGlzLmNoaWxkcmVuW2JdLnVwZGF0ZU1hdHJpeFdvcmxkKGEpfTtUSFJFRS5HeXJvc2NvcGUucHJvdG90eXBlLnRyYW5zbGF0aW9uV29ybGQ9bmV3IFRIUkVFLlZlY3RvcjM7VEhSRUUuR3lyb3Njb3BlLnByb3RvdHlwZS50cmFuc2xhdGlvbk9iamVjdD1uZXcgVEhSRUUuVmVjdG9yMztUSFJFRS5HeXJvc2NvcGUucHJvdG90eXBlLnF1YXRlcm5pb25Xb3JsZD1uZXcgVEhSRUUuUXVhdGVybmlvbjtUSFJFRS5HeXJvc2NvcGUucHJvdG90eXBlLnF1YXRlcm5pb25PYmplY3Q9bmV3IFRIUkVFLlF1YXRlcm5pb247VEhSRUUuR3lyb3Njb3BlLnByb3RvdHlwZS5zY2FsZVdvcmxkPW5ldyBUSFJFRS5WZWN0b3IzO1RIUkVFLkd5cm9zY29wZS5wcm90b3R5cGUuc2NhbGVPYmplY3Q9bmV3IFRIUkVFLlZlY3RvcjM7VEhSRUUuUGF0aD1mdW5jdGlvbihhKXtUSFJFRS5DdXJ2ZVBhdGguY2FsbCh0aGlzKTt0aGlzLmFjdGlvbnM9W107YSYmdGhpcy5mcm9tUG9pbnRzKGEpfTtUSFJFRS5QYXRoLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkN1cnZlUGF0aC5wcm90b3R5cGUpO1RIUkVFLlBhdGhBY3Rpb25zPXtNT1ZFX1RPOlwibW92ZVRvXCIsTElORV9UTzpcImxpbmVUb1wiLFFVQURSQVRJQ19DVVJWRV9UTzpcInF1YWRyYXRpY0N1cnZlVG9cIixCRVpJRVJfQ1VSVkVfVE86XCJiZXppZXJDdXJ2ZVRvXCIsQ1NQTElORV9USFJVOlwic3BsaW5lVGhydVwiLEFSQzpcImFyY1wiLEVMTElQU0U6XCJlbGxpcHNlXCJ9O1RIUkVFLlBhdGgucHJvdG90eXBlLmZyb21Qb2ludHM9ZnVuY3Rpb24oYSl7dGhpcy5tb3ZlVG8oYVswXS54LGFbMF0ueSk7Zm9yKHZhciBiPTEsYz1hLmxlbmd0aDtiPGM7YisrKXRoaXMubGluZVRvKGFbYl0ueCxhW2JdLnkpfTtcblRIUkVFLlBhdGgucHJvdG90eXBlLm1vdmVUbz1mdW5jdGlvbihhLGIpe3ZhciBjPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7dGhpcy5hY3Rpb25zLnB1c2goe2FjdGlvbjpUSFJFRS5QYXRoQWN0aW9ucy5NT1ZFX1RPLGFyZ3M6Y30pfTtUSFJFRS5QYXRoLnByb3RvdHlwZS5saW5lVG89ZnVuY3Rpb24oYSxiKXt2YXIgYz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpLGQ9dGhpcy5hY3Rpb25zW3RoaXMuYWN0aW9ucy5sZW5ndGgtMV0uYXJncyxkPW5ldyBUSFJFRS5MaW5lQ3VydmUobmV3IFRIUkVFLlZlY3RvcjIoZFtkLmxlbmd0aC0yXSxkW2QubGVuZ3RoLTFdKSxuZXcgVEhSRUUuVmVjdG9yMihhLGIpKTt0aGlzLmN1cnZlcy5wdXNoKGQpO3RoaXMuYWN0aW9ucy5wdXNoKHthY3Rpb246VEhSRUUuUGF0aEFjdGlvbnMuTElORV9UTyxhcmdzOmN9KX07XG5USFJFRS5QYXRoLnByb3RvdHlwZS5xdWFkcmF0aWNDdXJ2ZVRvPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyksZj10aGlzLmFjdGlvbnNbdGhpcy5hY3Rpb25zLmxlbmd0aC0xXS5hcmdzLGY9bmV3IFRIUkVFLlF1YWRyYXRpY0JlemllckN1cnZlKG5ldyBUSFJFRS5WZWN0b3IyKGZbZi5sZW5ndGgtMl0sZltmLmxlbmd0aC0xXSksbmV3IFRIUkVFLlZlY3RvcjIoYSxiKSxuZXcgVEhSRUUuVmVjdG9yMihjLGQpKTt0aGlzLmN1cnZlcy5wdXNoKGYpO3RoaXMuYWN0aW9ucy5wdXNoKHthY3Rpb246VEhSRUUuUGF0aEFjdGlvbnMuUVVBRFJBVElDX0NVUlZFX1RPLGFyZ3M6ZX0pfTtcblRIUkVFLlBhdGgucHJvdG90eXBlLmJlemllckN1cnZlVG89ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3ZhciBoPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyksZz10aGlzLmFjdGlvbnNbdGhpcy5hY3Rpb25zLmxlbmd0aC0xXS5hcmdzLGc9bmV3IFRIUkVFLkN1YmljQmV6aWVyQ3VydmUobmV3IFRIUkVFLlZlY3RvcjIoZ1tnLmxlbmd0aC0yXSxnW2cubGVuZ3RoLTFdKSxuZXcgVEhSRUUuVmVjdG9yMihhLGIpLG5ldyBUSFJFRS5WZWN0b3IyKGMsZCksbmV3IFRIUkVFLlZlY3RvcjIoZSxmKSk7dGhpcy5jdXJ2ZXMucHVzaChnKTt0aGlzLmFjdGlvbnMucHVzaCh7YWN0aW9uOlRIUkVFLlBhdGhBY3Rpb25zLkJFWklFUl9DVVJWRV9UTyxhcmdzOmh9KX07XG5USFJFRS5QYXRoLnByb3RvdHlwZS5zcGxpbmVUaHJ1PWZ1bmN0aW9uKGEpe3ZhciBiPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyksYz10aGlzLmFjdGlvbnNbdGhpcy5hY3Rpb25zLmxlbmd0aC0xXS5hcmdzLGM9W25ldyBUSFJFRS5WZWN0b3IyKGNbYy5sZW5ndGgtMl0sY1tjLmxlbmd0aC0xXSldO0FycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGMsYSk7Yz1uZXcgVEhSRUUuU3BsaW5lQ3VydmUoYyk7dGhpcy5jdXJ2ZXMucHVzaChjKTt0aGlzLmFjdGlvbnMucHVzaCh7YWN0aW9uOlRIUkVFLlBhdGhBY3Rpb25zLkNTUExJTkVfVEhSVSxhcmdzOmJ9KX07VEhSRUUuUGF0aC5wcm90b3R5cGUuYXJjPWZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2YXIgaD10aGlzLmFjdGlvbnNbdGhpcy5hY3Rpb25zLmxlbmd0aC0xXS5hcmdzO3RoaXMuYWJzYXJjKGEraFtoLmxlbmd0aC0yXSxiK2hbaC5sZW5ndGgtMV0sYyxkLGUsZil9O1xuVEhSRUUuUGF0aC5wcm90b3R5cGUuYWJzYXJjPWZ1bmN0aW9uKGEsYixjLGQsZSxmKXt0aGlzLmFic2VsbGlwc2UoYSxiLGMsYyxkLGUsZil9O1RIUkVFLlBhdGgucHJvdG90eXBlLmVsbGlwc2U9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsaCl7dmFyIGc9dGhpcy5hY3Rpb25zW3RoaXMuYWN0aW9ucy5sZW5ndGgtMV0uYXJnczt0aGlzLmFic2VsbGlwc2UoYStnW2cubGVuZ3RoLTJdLGIrZ1tnLmxlbmd0aC0xXSxjLGQsZSxmLGgpfTtUSFJFRS5QYXRoLnByb3RvdHlwZS5hYnNlbGxpcHNlPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGgpe3ZhciBnPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyksaT1uZXcgVEhSRUUuRWxsaXBzZUN1cnZlKGEsYixjLGQsZSxmLGgpO3RoaXMuY3VydmVzLnB1c2goaSk7aT1pLmdldFBvaW50KDEpO2cucHVzaChpLngpO2cucHVzaChpLnkpO3RoaXMuYWN0aW9ucy5wdXNoKHthY3Rpb246VEhSRUUuUGF0aEFjdGlvbnMuRUxMSVBTRSxhcmdzOmd9KX07XG5USFJFRS5QYXRoLnByb3RvdHlwZS5nZXRTcGFjZWRQb2ludHM9ZnVuY3Rpb24oYSl7YXx8KGE9NDApO2Zvcih2YXIgYj1bXSxjPTA7YzxhO2MrKyliLnB1c2godGhpcy5nZXRQb2ludChjL2EpKTtyZXR1cm4gYn07XG5USFJFRS5QYXRoLnByb3RvdHlwZS5nZXRQb2ludHM9ZnVuY3Rpb24oYSxiKXtpZih0aGlzLnVzZVNwYWNlZFBvaW50cylyZXR1cm4gY29uc29sZS5sb2coXCJ0YXRhXCIpLHRoaXMuZ2V0U3BhY2VkUG9pbnRzKGEsYik7dmFyIGE9YXx8MTIsYz1bXSxkLGUsZixoLGcsaSxrLG0sbCxwLHQscyxxO2Q9MDtmb3IoZT10aGlzLmFjdGlvbnMubGVuZ3RoO2Q8ZTtkKyspc3dpdGNoKGY9dGhpcy5hY3Rpb25zW2RdLGg9Zi5hY3Rpb24sZj1mLmFyZ3MsaCl7Y2FzZSBUSFJFRS5QYXRoQWN0aW9ucy5NT1ZFX1RPOmMucHVzaChuZXcgVEhSRUUuVmVjdG9yMihmWzBdLGZbMV0pKTticmVhaztjYXNlIFRIUkVFLlBhdGhBY3Rpb25zLkxJTkVfVE86Yy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IyKGZbMF0sZlsxXSkpO2JyZWFrO2Nhc2UgVEhSRUUuUGF0aEFjdGlvbnMuUVVBRFJBVElDX0NVUlZFX1RPOmc9ZlsyXTtpPWZbM107bD1mWzBdO3A9ZlsxXTswPGMubGVuZ3RoPyhoPWNbYy5sZW5ndGgtMV0sdD1oLngsXG5zPWgueSk6KGg9dGhpcy5hY3Rpb25zW2QtMV0uYXJncyx0PWhbaC5sZW5ndGgtMl0scz1oW2gubGVuZ3RoLTFdKTtmb3IoZj0xO2Y8PWE7ZisrKXE9Zi9hLGg9VEhSRUUuU2hhcGUuVXRpbHMuYjIocSx0LGwsZykscT1USFJFRS5TaGFwZS5VdGlscy5iMihxLHMscCxpKSxjLnB1c2gobmV3IFRIUkVFLlZlY3RvcjIoaCxxKSk7YnJlYWs7Y2FzZSBUSFJFRS5QYXRoQWN0aW9ucy5CRVpJRVJfQ1VSVkVfVE86Zz1mWzRdO2k9Zls1XTtsPWZbMF07cD1mWzFdO2s9ZlsyXTttPWZbM107MDxjLmxlbmd0aD8oaD1jW2MubGVuZ3RoLTFdLHQ9aC54LHM9aC55KTooaD10aGlzLmFjdGlvbnNbZC0xXS5hcmdzLHQ9aFtoLmxlbmd0aC0yXSxzPWhbaC5sZW5ndGgtMV0pO2ZvcihmPTE7Zjw9YTtmKyspcT1mL2EsaD1USFJFRS5TaGFwZS5VdGlscy5iMyhxLHQsbCxrLGcpLHE9VEhSRUUuU2hhcGUuVXRpbHMuYjMocSxzLHAsbSxpKSxjLnB1c2gobmV3IFRIUkVFLlZlY3RvcjIoaCxxKSk7YnJlYWs7Y2FzZSBUSFJFRS5QYXRoQWN0aW9ucy5DU1BMSU5FX1RIUlU6aD1cbnRoaXMuYWN0aW9uc1tkLTFdLmFyZ3M7cT1bbmV3IFRIUkVFLlZlY3RvcjIoaFtoLmxlbmd0aC0yXSxoW2gubGVuZ3RoLTFdKV07aD1hKmZbMF0ubGVuZ3RoO3E9cS5jb25jYXQoZlswXSk7cT1uZXcgVEhSRUUuU3BsaW5lQ3VydmUocSk7Zm9yKGY9MTtmPD1oO2YrKyljLnB1c2gocS5nZXRQb2ludEF0KGYvaCkpO2JyZWFrO2Nhc2UgVEhSRUUuUGF0aEFjdGlvbnMuQVJDOmc9ZlswXTtpPWZbMV07cD1mWzJdO2s9ZlszXTtoPWZbNF07bD0hIWZbNV07dD1oLWs7cz0yKmE7Zm9yKGY9MTtmPD1zO2YrKylxPWYvcyxsfHwocT0xLXEpLHE9aytxKnQsaD1nK3AqTWF0aC5jb3MocSkscT1pK3AqTWF0aC5zaW4ocSksYy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IyKGgscSkpO2JyZWFrO2Nhc2UgVEhSRUUuUGF0aEFjdGlvbnMuRUxMSVBTRTpnPWZbMF07aT1mWzFdO3A9ZlsyXTttPWZbM107az1mWzRdO2g9Zls1XTtsPSEhZls2XTt0PWgtaztzPTIqYTtmb3IoZj0xO2Y8PXM7ZisrKXE9Zi9zLGx8fFxuKHE9MS1xKSxxPWsrcSp0LGg9ZytwKk1hdGguY29zKHEpLHE9aSttKk1hdGguc2luKHEpLGMucHVzaChuZXcgVEhSRUUuVmVjdG9yMihoLHEpKX1kPWNbYy5sZW5ndGgtMV07MUUtMTA+TWF0aC5hYnMoZC54LWNbMF0ueCkmJjFFLTEwPk1hdGguYWJzKGQueS1jWzBdLnkpJiZjLnNwbGljZShjLmxlbmd0aC0xLDEpO2ImJmMucHVzaChjWzBdKTtyZXR1cm4gY307XG5USFJFRS5QYXRoLnByb3RvdHlwZS50b1NoYXBlcz1mdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmPVtdLGg9bmV3IFRIUkVFLlBhdGg7Yj0wO2ZvcihjPXRoaXMuYWN0aW9ucy5sZW5ndGg7YjxjO2IrKylkPXRoaXMuYWN0aW9uc1tiXSxlPWQuYXJncyxkPWQuYWN0aW9uLGQ9PVRIUkVFLlBhdGhBY3Rpb25zLk1PVkVfVE8mJjAhPWguYWN0aW9ucy5sZW5ndGgmJihmLnB1c2goaCksaD1uZXcgVEhSRUUuUGF0aCksaFtkXS5hcHBseShoLGUpOzAhPWguYWN0aW9ucy5sZW5ndGgmJmYucHVzaChoKTtpZigwPT1mLmxlbmd0aClyZXR1cm5bXTt2YXIgZztlPVtdO2lmKDE9PWYubGVuZ3RoKXJldHVybiBkPWZbMF0sZz1uZXcgVEhSRUUuU2hhcGUsZy5hY3Rpb25zPWQuYWN0aW9ucyxnLmN1cnZlcz1kLmN1cnZlcyxlLnB1c2goZyksZTtiPSFUSFJFRS5TaGFwZS5VdGlscy5pc0Nsb2NrV2lzZShmWzBdLmdldFBvaW50cygpKTtpZihhPyFiOmIpe2c9bmV3IFRIUkVFLlNoYXBlO2I9MDtmb3IoYz1cbmYubGVuZ3RoO2I8YztiKyspZD1mW2JdLGg9VEhSRUUuU2hhcGUuVXRpbHMuaXNDbG9ja1dpc2UoZC5nZXRQb2ludHMoKSksKGg9YT8haDpoKT8oZy5hY3Rpb25zPWQuYWN0aW9ucyxnLmN1cnZlcz1kLmN1cnZlcyxlLnB1c2goZyksZz1uZXcgVEhSRUUuU2hhcGUpOmcuaG9sZXMucHVzaChkKX1lbHNle2c9dm9pZCAwO2I9MDtmb3IoYz1mLmxlbmd0aDtiPGM7YisrKWQ9ZltiXSxoPVRIUkVFLlNoYXBlLlV0aWxzLmlzQ2xvY2tXaXNlKGQuZ2V0UG9pbnRzKCkpLChoPWE/IWg6aCk/KGcmJmUucHVzaChnKSxnPW5ldyBUSFJFRS5TaGFwZSxnLmFjdGlvbnM9ZC5hY3Rpb25zLGcuY3VydmVzPWQuY3VydmVzKTpnLmhvbGVzLnB1c2goZCk7ZS5wdXNoKGcpfXJldHVybiBlfTtUSFJFRS5TaGFwZT1mdW5jdGlvbigpe1RIUkVFLlBhdGguYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuaG9sZXM9W119O1RIUkVFLlNoYXBlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLlBhdGgucHJvdG90eXBlKTtUSFJFRS5TaGFwZS5wcm90b3R5cGUuZXh0cnVkZT1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IFRIUkVFLkV4dHJ1ZGVHZW9tZXRyeSh0aGlzLGEpfTtUSFJFRS5TaGFwZS5wcm90b3R5cGUubWFrZUdlb21ldHJ5PWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgVEhSRUUuU2hhcGVHZW9tZXRyeSh0aGlzLGEpfTtUSFJFRS5TaGFwZS5wcm90b3R5cGUuZ2V0UG9pbnRzSG9sZXM9ZnVuY3Rpb24oYSl7dmFyIGIsYz10aGlzLmhvbGVzLmxlbmd0aCxkPVtdO2ZvcihiPTA7YjxjO2IrKylkW2JdPXRoaXMuaG9sZXNbYl0uZ2V0VHJhbnNmb3JtZWRQb2ludHMoYSx0aGlzLmJlbmRzKTtyZXR1cm4gZH07XG5USFJFRS5TaGFwZS5wcm90b3R5cGUuZ2V0U3BhY2VkUG9pbnRzSG9sZXM9ZnVuY3Rpb24oYSl7dmFyIGIsYz10aGlzLmhvbGVzLmxlbmd0aCxkPVtdO2ZvcihiPTA7YjxjO2IrKylkW2JdPXRoaXMuaG9sZXNbYl0uZ2V0VHJhbnNmb3JtZWRTcGFjZWRQb2ludHMoYSx0aGlzLmJlbmRzKTtyZXR1cm4gZH07VEhSRUUuU2hhcGUucHJvdG90eXBlLmV4dHJhY3RBbGxQb2ludHM9ZnVuY3Rpb24oYSl7cmV0dXJue3NoYXBlOnRoaXMuZ2V0VHJhbnNmb3JtZWRQb2ludHMoYSksaG9sZXM6dGhpcy5nZXRQb2ludHNIb2xlcyhhKX19O1RIUkVFLlNoYXBlLnByb3RvdHlwZS5leHRyYWN0UG9pbnRzPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnVzZVNwYWNlZFBvaW50cz90aGlzLmV4dHJhY3RBbGxTcGFjZWRQb2ludHMoYSk6dGhpcy5leHRyYWN0QWxsUG9pbnRzKGEpfTtcblRIUkVFLlNoYXBlLnByb3RvdHlwZS5leHRyYWN0QWxsU3BhY2VkUG9pbnRzPWZ1bmN0aW9uKGEpe3JldHVybntzaGFwZTp0aGlzLmdldFRyYW5zZm9ybWVkU3BhY2VkUG9pbnRzKGEpLGhvbGVzOnRoaXMuZ2V0U3BhY2VkUG9pbnRzSG9sZXMoYSl9fTtcblRIUkVFLlNoYXBlLlV0aWxzPXtyZW1vdmVIb2xlczpmdW5jdGlvbihhLGIpe3ZhciBjPWEuY29uY2F0KCksZD1jLmNvbmNhdCgpLGUsZixoLGcsaSxrLG0sbCxwLHQscz1bXTtmb3IoaT0wO2k8Yi5sZW5ndGg7aSsrKXtrPWJbaV07QXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoZCxrKTtmPU51bWJlci5QT1NJVElWRV9JTkZJTklUWTtmb3IoZT0wO2U8ay5sZW5ndGg7ZSsrKXtwPWtbZV07dD1bXTtmb3IobD0wO2w8Yy5sZW5ndGg7bCsrKW09Y1tsXSxtPXAuZGlzdGFuY2VUb1NxdWFyZWQobSksdC5wdXNoKG0pLG08ZiYmKGY9bSxoPWUsZz1sKX1lPTA8PWctMT9nLTE6Yy5sZW5ndGgtMTtmPTA8PWgtMT9oLTE6ay5sZW5ndGgtMTt2YXIgcT1ba1toXSxjW2ddLGNbZV1dO2w9VEhSRUUuRm9udFV0aWxzLlRyaWFuZ3VsYXRlLmFyZWEocSk7dmFyIG49W2tbaF0sa1tmXSxjW2ddXTtwPVRIUkVFLkZvbnRVdGlscy5Ucmlhbmd1bGF0ZS5hcmVhKG4pO3Q9ZzttPWg7Zys9MTtoKz0tMTswPlxuZyYmKGcrPWMubGVuZ3RoKTtnJT1jLmxlbmd0aDswPmgmJihoKz1rLmxlbmd0aCk7aCU9ay5sZW5ndGg7ZT0wPD1nLTE/Zy0xOmMubGVuZ3RoLTE7Zj0wPD1oLTE/aC0xOmsubGVuZ3RoLTE7cT1ba1toXSxjW2ddLGNbZV1dO3E9VEhSRUUuRm9udFV0aWxzLlRyaWFuZ3VsYXRlLmFyZWEocSk7bj1ba1toXSxrW2ZdLGNbZ11dO249VEhSRUUuRm9udFV0aWxzLlRyaWFuZ3VsYXRlLmFyZWEobik7bCtwPnErbiYmKGc9dCxoPW0sMD5nJiYoZys9Yy5sZW5ndGgpLGclPWMubGVuZ3RoLDA+aCYmKGgrPWsubGVuZ3RoKSxoJT1rLmxlbmd0aCxlPTA8PWctMT9nLTE6Yy5sZW5ndGgtMSxmPTA8PWgtMT9oLTE6ay5sZW5ndGgtMSk7bD1jLnNsaWNlKDAsZyk7cD1jLnNsaWNlKGcpO3Q9ay5zbGljZShoKTttPWsuc2xpY2UoMCxoKTtmPVtrW2hdLGtbZl0sY1tnXV07cy5wdXNoKFtrW2hdLGNbZ10sY1tlXV0pO3MucHVzaChmKTtjPWwuY29uY2F0KHQpLmNvbmNhdChtKS5jb25jYXQocCl9cmV0dXJue3NoYXBlOmMsXG5pc29sYXRlZFB0czpzLGFsbHBvaW50czpkfX0sdHJpYW5ndWxhdGVTaGFwZTpmdW5jdGlvbihhLGIpe3ZhciBjPVRIUkVFLlNoYXBlLlV0aWxzLnJlbW92ZUhvbGVzKGEsYiksZD1jLmFsbHBvaW50cyxlPWMuaXNvbGF0ZWRQdHMsYz1USFJFRS5Gb250VXRpbHMuVHJpYW5ndWxhdGUoYy5zaGFwZSwhMSksZixoLGcsaSxrPXt9O2Y9MDtmb3IoaD1kLmxlbmd0aDtmPGg7ZisrKWk9ZFtmXS54K1wiOlwiK2RbZl0ueSx2b2lkIDAhPT1rW2ldJiZjb25zb2xlLmxvZyhcIkR1cGxpY2F0ZSBwb2ludFwiLGkpLGtbaV09ZjtmPTA7Zm9yKGg9Yy5sZW5ndGg7ZjxoO2YrKyl7Zz1jW2ZdO2ZvcihkPTA7Mz5kO2QrKylpPWdbZF0ueCtcIjpcIitnW2RdLnksaT1rW2ldLHZvaWQgMCE9PWkmJihnW2RdPWkpfWY9MDtmb3IoaD1lLmxlbmd0aDtmPGg7ZisrKXtnPWVbZl07Zm9yKGQ9MDszPmQ7ZCsrKWk9Z1tkXS54K1wiOlwiK2dbZF0ueSxpPWtbaV0sdm9pZCAwIT09aSYmKGdbZF09aSl9cmV0dXJuIGMuY29uY2F0KGUpfSxcbmlzQ2xvY2tXaXNlOmZ1bmN0aW9uKGEpe3JldHVybiAwPlRIUkVFLkZvbnRVdGlscy5Ucmlhbmd1bGF0ZS5hcmVhKGEpfSxiMnAwOmZ1bmN0aW9uKGEsYil7dmFyIGM9MS1hO3JldHVybiBjKmMqYn0sYjJwMTpmdW5jdGlvbihhLGIpe3JldHVybiAyKigxLWEpKmEqYn0sYjJwMjpmdW5jdGlvbihhLGIpe3JldHVybiBhKmEqYn0sYjI6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMuYjJwMChhLGIpK3RoaXMuYjJwMShhLGMpK3RoaXMuYjJwMihhLGQpfSxiM3AwOmZ1bmN0aW9uKGEsYil7dmFyIGM9MS1hO3JldHVybiBjKmMqYypifSxiM3AxOmZ1bmN0aW9uKGEsYil7dmFyIGM9MS1hO3JldHVybiAzKmMqYyphKmJ9LGIzcDI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gMyooMS1hKSphKmEqYn0sYjNwMzpmdW5jdGlvbihhLGIpe3JldHVybiBhKmEqYSpifSxiMzpmdW5jdGlvbihhLGIsYyxkLGUpe3JldHVybiB0aGlzLmIzcDAoYSxiKSt0aGlzLmIzcDEoYSxjKSt0aGlzLmIzcDIoYSxkKStcbnRoaXMuYjNwMyhhLGUpfX07VEhSRUUuTGluZUN1cnZlPWZ1bmN0aW9uKGEsYil7dGhpcy52MT1hO3RoaXMudjI9Yn07VEhSRUUuTGluZUN1cnZlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkN1cnZlLnByb3RvdHlwZSk7VEhSRUUuTGluZUN1cnZlLnByb3RvdHlwZS5nZXRQb2ludD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLnYyLmNsb25lKCkuc3ViKHRoaXMudjEpO2IubXVsdGlwbHlTY2FsYXIoYSkuYWRkKHRoaXMudjEpO3JldHVybiBifTtUSFJFRS5MaW5lQ3VydmUucHJvdG90eXBlLmdldFBvaW50QXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0UG9pbnQoYSl9O1RIUkVFLkxpbmVDdXJ2ZS5wcm90b3R5cGUuZ2V0VGFuZ2VudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnYyLmNsb25lKCkuc3ViKHRoaXMudjEpLm5vcm1hbGl6ZSgpfTtUSFJFRS5RdWFkcmF0aWNCZXppZXJDdXJ2ZT1mdW5jdGlvbihhLGIsYyl7dGhpcy52MD1hO3RoaXMudjE9Yjt0aGlzLnYyPWN9O1RIUkVFLlF1YWRyYXRpY0JlemllckN1cnZlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkN1cnZlLnByb3RvdHlwZSk7VEhSRUUuUXVhZHJhdGljQmV6aWVyQ3VydmUucHJvdG90eXBlLmdldFBvaW50PWZ1bmN0aW9uKGEpe3ZhciBiO2I9VEhSRUUuU2hhcGUuVXRpbHMuYjIoYSx0aGlzLnYwLngsdGhpcy52MS54LHRoaXMudjIueCk7YT1USFJFRS5TaGFwZS5VdGlscy5iMihhLHRoaXMudjAueSx0aGlzLnYxLnksdGhpcy52Mi55KTtyZXR1cm4gbmV3IFRIUkVFLlZlY3RvcjIoYixhKX07XG5USFJFRS5RdWFkcmF0aWNCZXppZXJDdXJ2ZS5wcm90b3R5cGUuZ2V0VGFuZ2VudD1mdW5jdGlvbihhKXt2YXIgYjtiPVRIUkVFLkN1cnZlLlV0aWxzLnRhbmdlbnRRdWFkcmF0aWNCZXppZXIoYSx0aGlzLnYwLngsdGhpcy52MS54LHRoaXMudjIueCk7YT1USFJFRS5DdXJ2ZS5VdGlscy50YW5nZW50UXVhZHJhdGljQmV6aWVyKGEsdGhpcy52MC55LHRoaXMudjEueSx0aGlzLnYyLnkpO2I9bmV3IFRIUkVFLlZlY3RvcjIoYixhKTtiLm5vcm1hbGl6ZSgpO3JldHVybiBifTtUSFJFRS5DdWJpY0JlemllckN1cnZlPWZ1bmN0aW9uKGEsYixjLGQpe3RoaXMudjA9YTt0aGlzLnYxPWI7dGhpcy52Mj1jO3RoaXMudjM9ZH07VEhSRUUuQ3ViaWNCZXppZXJDdXJ2ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5DdXJ2ZS5wcm90b3R5cGUpO1RIUkVFLkN1YmljQmV6aWVyQ3VydmUucHJvdG90eXBlLmdldFBvaW50PWZ1bmN0aW9uKGEpe3ZhciBiO2I9VEhSRUUuU2hhcGUuVXRpbHMuYjMoYSx0aGlzLnYwLngsdGhpcy52MS54LHRoaXMudjIueCx0aGlzLnYzLngpO2E9VEhSRUUuU2hhcGUuVXRpbHMuYjMoYSx0aGlzLnYwLnksdGhpcy52MS55LHRoaXMudjIueSx0aGlzLnYzLnkpO3JldHVybiBuZXcgVEhSRUUuVmVjdG9yMihiLGEpfTtcblRIUkVFLkN1YmljQmV6aWVyQ3VydmUucHJvdG90eXBlLmdldFRhbmdlbnQ9ZnVuY3Rpb24oYSl7dmFyIGI7Yj1USFJFRS5DdXJ2ZS5VdGlscy50YW5nZW50Q3ViaWNCZXppZXIoYSx0aGlzLnYwLngsdGhpcy52MS54LHRoaXMudjIueCx0aGlzLnYzLngpO2E9VEhSRUUuQ3VydmUuVXRpbHMudGFuZ2VudEN1YmljQmV6aWVyKGEsdGhpcy52MC55LHRoaXMudjEueSx0aGlzLnYyLnksdGhpcy52My55KTtiPW5ldyBUSFJFRS5WZWN0b3IyKGIsYSk7Yi5ub3JtYWxpemUoKTtyZXR1cm4gYn07VEhSRUUuU3BsaW5lQ3VydmU9ZnVuY3Rpb24oYSl7dGhpcy5wb2ludHM9dm9pZCAwPT1hP1tdOmF9O1RIUkVFLlNwbGluZUN1cnZlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkN1cnZlLnByb3RvdHlwZSk7VEhSRUUuU3BsaW5lQ3VydmUucHJvdG90eXBlLmdldFBvaW50PWZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBUSFJFRS5WZWN0b3IyLGM9W10sZD10aGlzLnBvaW50cyxlO2U9KGQubGVuZ3RoLTEpKmE7YT1NYXRoLmZsb29yKGUpO2UtPWE7Y1swXT0wPT1hP2E6YS0xO2NbMV09YTtjWzJdPWE+ZC5sZW5ndGgtMj9kLmxlbmd0aC0xOmErMTtjWzNdPWE+ZC5sZW5ndGgtMz9kLmxlbmd0aC0xOmErMjtiLng9VEhSRUUuQ3VydmUuVXRpbHMuaW50ZXJwb2xhdGUoZFtjWzBdXS54LGRbY1sxXV0ueCxkW2NbMl1dLngsZFtjWzNdXS54LGUpO2IueT1USFJFRS5DdXJ2ZS5VdGlscy5pbnRlcnBvbGF0ZShkW2NbMF1dLnksZFtjWzFdXS55LGRbY1syXV0ueSxkW2NbM11dLnksZSk7cmV0dXJuIGJ9O1RIUkVFLkVsbGlwc2VDdXJ2ZT1mdW5jdGlvbihhLGIsYyxkLGUsZixoKXt0aGlzLmFYPWE7dGhpcy5hWT1iO3RoaXMueFJhZGl1cz1jO3RoaXMueVJhZGl1cz1kO3RoaXMuYVN0YXJ0QW5nbGU9ZTt0aGlzLmFFbmRBbmdsZT1mO3RoaXMuYUNsb2Nrd2lzZT1ofTtUSFJFRS5FbGxpcHNlQ3VydmUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuQ3VydmUucHJvdG90eXBlKTtcblRIUkVFLkVsbGlwc2VDdXJ2ZS5wcm90b3R5cGUuZ2V0UG9pbnQ9ZnVuY3Rpb24oYSl7dmFyIGI7Yj10aGlzLmFFbmRBbmdsZS10aGlzLmFTdGFydEFuZ2xlOzA+YiYmKGIrPTIqTWF0aC5QSSk7Yj4yKk1hdGguUEkmJihiLT0yKk1hdGguUEkpO2I9ITA9PT10aGlzLmFDbG9ja3dpc2U/dGhpcy5hRW5kQW5nbGUrKDEtYSkqKDIqTWF0aC5QSS1iKTp0aGlzLmFTdGFydEFuZ2xlK2EqYjthPXRoaXMuYVgrdGhpcy54UmFkaXVzKk1hdGguY29zKGIpO2I9dGhpcy5hWSt0aGlzLnlSYWRpdXMqTWF0aC5zaW4oYik7cmV0dXJuIG5ldyBUSFJFRS5WZWN0b3IyKGEsYil9O1RIUkVFLkFyY0N1cnZlPWZ1bmN0aW9uKGEsYixjLGQsZSxmKXtUSFJFRS5FbGxpcHNlQ3VydmUuY2FsbCh0aGlzLGEsYixjLGMsZCxlLGYpfTtUSFJFRS5BcmNDdXJ2ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5FbGxpcHNlQ3VydmUucHJvdG90eXBlKTtUSFJFRS5MaW5lQ3VydmUzPVRIUkVFLkN1cnZlLmNyZWF0ZShmdW5jdGlvbihhLGIpe3RoaXMudjE9YTt0aGlzLnYyPWJ9LGZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBUSFJFRS5WZWN0b3IzO2Iuc3ViVmVjdG9ycyh0aGlzLnYyLHRoaXMudjEpO2IubXVsdGlwbHlTY2FsYXIoYSk7Yi5hZGQodGhpcy52MSk7cmV0dXJuIGJ9KTtUSFJFRS5RdWFkcmF0aWNCZXppZXJDdXJ2ZTM9VEhSRUUuQ3VydmUuY3JlYXRlKGZ1bmN0aW9uKGEsYixjKXt0aGlzLnYwPWE7dGhpcy52MT1iO3RoaXMudjI9Y30sZnVuY3Rpb24oYSl7dmFyIGIsYztiPVRIUkVFLlNoYXBlLlV0aWxzLmIyKGEsdGhpcy52MC54LHRoaXMudjEueCx0aGlzLnYyLngpO2M9VEhSRUUuU2hhcGUuVXRpbHMuYjIoYSx0aGlzLnYwLnksdGhpcy52MS55LHRoaXMudjIueSk7YT1USFJFRS5TaGFwZS5VdGlscy5iMihhLHRoaXMudjAueix0aGlzLnYxLnosdGhpcy52Mi56KTtyZXR1cm4gbmV3IFRIUkVFLlZlY3RvcjMoYixjLGEpfSk7VEhSRUUuQ3ViaWNCZXppZXJDdXJ2ZTM9VEhSRUUuQ3VydmUuY3JlYXRlKGZ1bmN0aW9uKGEsYixjLGQpe3RoaXMudjA9YTt0aGlzLnYxPWI7dGhpcy52Mj1jO3RoaXMudjM9ZH0sZnVuY3Rpb24oYSl7dmFyIGIsYztiPVRIUkVFLlNoYXBlLlV0aWxzLmIzKGEsdGhpcy52MC54LHRoaXMudjEueCx0aGlzLnYyLngsdGhpcy52My54KTtjPVRIUkVFLlNoYXBlLlV0aWxzLmIzKGEsdGhpcy52MC55LHRoaXMudjEueSx0aGlzLnYyLnksdGhpcy52My55KTthPVRIUkVFLlNoYXBlLlV0aWxzLmIzKGEsdGhpcy52MC56LHRoaXMudjEueix0aGlzLnYyLnosdGhpcy52My56KTtyZXR1cm4gbmV3IFRIUkVFLlZlY3RvcjMoYixjLGEpfSk7VEhSRUUuU3BsaW5lQ3VydmUzPVRIUkVFLkN1cnZlLmNyZWF0ZShmdW5jdGlvbihhKXt0aGlzLnBvaW50cz12b2lkIDA9PWE/W106YX0sZnVuY3Rpb24oYSl7dmFyIGI9bmV3IFRIUkVFLlZlY3RvcjMsYz1bXSxkPXRoaXMucG9pbnRzLGUsYT0oZC5sZW5ndGgtMSkqYTtlPU1hdGguZmxvb3IoYSk7YS09ZTtjWzBdPTA9PWU/ZTplLTE7Y1sxXT1lO2NbMl09ZT5kLmxlbmd0aC0yP2QubGVuZ3RoLTE6ZSsxO2NbM109ZT5kLmxlbmd0aC0zP2QubGVuZ3RoLTE6ZSsyO2U9ZFtjWzBdXTt2YXIgZj1kW2NbMV1dLGg9ZFtjWzJdXSxjPWRbY1szXV07Yi54PVRIUkVFLkN1cnZlLlV0aWxzLmludGVycG9sYXRlKGUueCxmLngsaC54LGMueCxhKTtiLnk9VEhSRUUuQ3VydmUuVXRpbHMuaW50ZXJwb2xhdGUoZS55LGYueSxoLnksYy55LGEpO2Iuej1USFJFRS5DdXJ2ZS5VdGlscy5pbnRlcnBvbGF0ZShlLnosZi56LGgueixjLnosYSk7cmV0dXJuIGJ9KTtUSFJFRS5DbG9zZWRTcGxpbmVDdXJ2ZTM9VEhSRUUuQ3VydmUuY3JlYXRlKGZ1bmN0aW9uKGEpe3RoaXMucG9pbnRzPXZvaWQgMD09YT9bXTphfSxmdW5jdGlvbihhKXt2YXIgYj1uZXcgVEhSRUUuVmVjdG9yMyxjPVtdLGQ9dGhpcy5wb2ludHMsZTtlPShkLmxlbmd0aC0wKSphO2E9TWF0aC5mbG9vcihlKTtlLT1hO2ErPTA8YT8wOihNYXRoLmZsb29yKE1hdGguYWJzKGEpL2QubGVuZ3RoKSsxKSpkLmxlbmd0aDtjWzBdPShhLTEpJWQubGVuZ3RoO2NbMV09YSVkLmxlbmd0aDtjWzJdPShhKzEpJWQubGVuZ3RoO2NbM109KGErMiklZC5sZW5ndGg7Yi54PVRIUkVFLkN1cnZlLlV0aWxzLmludGVycG9sYXRlKGRbY1swXV0ueCxkW2NbMV1dLngsZFtjWzJdXS54LGRbY1szXV0ueCxlKTtiLnk9VEhSRUUuQ3VydmUuVXRpbHMuaW50ZXJwb2xhdGUoZFtjWzBdXS55LGRbY1sxXV0ueSxkW2NbMl1dLnksZFtjWzNdXS55LGUpO2Iuej1USFJFRS5DdXJ2ZS5VdGlscy5pbnRlcnBvbGF0ZShkW2NbMF1dLnosXG5kW2NbMV1dLnosZFtjWzJdXS56LGRbY1szXV0ueixlKTtyZXR1cm4gYn0pO1RIUkVFLkFuaW1hdGlvbkhhbmRsZXI9ZnVuY3Rpb24oKXt2YXIgYT1bXSxiPXt9LGM9e3VwZGF0ZTpmdW5jdGlvbihiKXtmb3IodmFyIGM9MDtjPGEubGVuZ3RoO2MrKylhW2NdLnVwZGF0ZShiKX0sYWRkVG9VcGRhdGU6ZnVuY3Rpb24oYil7LTE9PT1hLmluZGV4T2YoYikmJmEucHVzaChiKX0scmVtb3ZlRnJvbVVwZGF0ZTpmdW5jdGlvbihiKXtiPWEuaW5kZXhPZihiKTstMSE9PWImJmEuc3BsaWNlKGIsMSl9LGFkZDpmdW5jdGlvbihhKXt2b2lkIDAhPT1iW2EubmFtZV0mJmNvbnNvbGUubG9nKFwiVEhSRUUuQW5pbWF0aW9uSGFuZGxlci5hZGQ6IFdhcm5pbmchIFwiK2EubmFtZStcIiBhbHJlYWR5IGV4aXN0cyBpbiBsaWJyYXJ5LiBPdmVyd3JpdGluZy5cIik7YlthLm5hbWVdPWE7aWYoITAhPT1hLmluaXRpYWxpemVkKXtmb3IodmFyIGM9MDtjPGEuaGllcmFyY2h5Lmxlbmd0aDtjKyspe2Zvcih2YXIgZD0wO2Q8YS5oaWVyYXJjaHlbY10ua2V5cy5sZW5ndGg7ZCsrKWlmKDA+YS5oaWVyYXJjaHlbY10ua2V5c1tkXS50aW1lJiZcbihhLmhpZXJhcmNoeVtjXS5rZXlzW2RdLnRpbWU9MCksdm9pZCAwIT09YS5oaWVyYXJjaHlbY10ua2V5c1tkXS5yb3QmJiEoYS5oaWVyYXJjaHlbY10ua2V5c1tkXS5yb3QgaW5zdGFuY2VvZiBUSFJFRS5RdWF0ZXJuaW9uKSl7dmFyIGc9YS5oaWVyYXJjaHlbY10ua2V5c1tkXS5yb3Q7YS5oaWVyYXJjaHlbY10ua2V5c1tkXS5yb3Q9bmV3IFRIUkVFLlF1YXRlcm5pb24oZ1swXSxnWzFdLGdbMl0sZ1szXSl9aWYoYS5oaWVyYXJjaHlbY10ua2V5cy5sZW5ndGgmJnZvaWQgMCE9PWEuaGllcmFyY2h5W2NdLmtleXNbMF0ubW9ycGhUYXJnZXRzKXtnPXt9O2ZvcihkPTA7ZDxhLmhpZXJhcmNoeVtjXS5rZXlzLmxlbmd0aDtkKyspZm9yKHZhciBpPTA7aTxhLmhpZXJhcmNoeVtjXS5rZXlzW2RdLm1vcnBoVGFyZ2V0cy5sZW5ndGg7aSsrKXt2YXIgaz1hLmhpZXJhcmNoeVtjXS5rZXlzW2RdLm1vcnBoVGFyZ2V0c1tpXTtnW2tdPS0xfWEuaGllcmFyY2h5W2NdLnVzZWRNb3JwaFRhcmdldHM9ZztcbmZvcihkPTA7ZDxhLmhpZXJhcmNoeVtjXS5rZXlzLmxlbmd0aDtkKyspe3ZhciBtPXt9O2ZvcihrIGluIGcpe2ZvcihpPTA7aTxhLmhpZXJhcmNoeVtjXS5rZXlzW2RdLm1vcnBoVGFyZ2V0cy5sZW5ndGg7aSsrKWlmKGEuaGllcmFyY2h5W2NdLmtleXNbZF0ubW9ycGhUYXJnZXRzW2ldPT09ayl7bVtrXT1hLmhpZXJhcmNoeVtjXS5rZXlzW2RdLm1vcnBoVGFyZ2V0c0luZmx1ZW5jZXNbaV07YnJlYWt9aT09PWEuaGllcmFyY2h5W2NdLmtleXNbZF0ubW9ycGhUYXJnZXRzLmxlbmd0aCYmKG1ba109MCl9YS5oaWVyYXJjaHlbY10ua2V5c1tkXS5tb3JwaFRhcmdldHNJbmZsdWVuY2VzPW19fWZvcihkPTE7ZDxhLmhpZXJhcmNoeVtjXS5rZXlzLmxlbmd0aDtkKyspYS5oaWVyYXJjaHlbY10ua2V5c1tkXS50aW1lPT09YS5oaWVyYXJjaHlbY10ua2V5c1tkLTFdLnRpbWUmJihhLmhpZXJhcmNoeVtjXS5rZXlzLnNwbGljZShkLDEpLGQtLSk7Zm9yKGQ9MDtkPGEuaGllcmFyY2h5W2NdLmtleXMubGVuZ3RoO2QrKylhLmhpZXJhcmNoeVtjXS5rZXlzW2RdLmluZGV4PVxuZH1kPXBhcnNlSW50KGEubGVuZ3RoKmEuZnBzLDEwKTthLkpJVD17fTthLkpJVC5oaWVyYXJjaHk9W107Zm9yKGM9MDtjPGEuaGllcmFyY2h5Lmxlbmd0aDtjKyspYS5KSVQuaGllcmFyY2h5LnB1c2goQXJyYXkoZCkpO2EuaW5pdGlhbGl6ZWQ9ITB9fSxnZXQ6ZnVuY3Rpb24oYSl7aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBhKXtpZihiW2FdKXJldHVybiBiW2FdO2NvbnNvbGUubG9nKFwiVEhSRUUuQW5pbWF0aW9uSGFuZGxlci5nZXQ6IENvdWxkbid0IGZpbmQgYW5pbWF0aW9uIFwiK2EpO3JldHVybiBudWxsfX0scGFyc2U6ZnVuY3Rpb24oYSl7dmFyIGI9W107aWYoYSBpbnN0YW5jZW9mIFRIUkVFLlNraW5uZWRNZXNoKWZvcih2YXIgYz0wO2M8YS5ib25lcy5sZW5ndGg7YysrKWIucHVzaChhLmJvbmVzW2NdKTtlbHNlIGQoYSxiKTtyZXR1cm4gYn19LGQ9ZnVuY3Rpb24oYSxiKXtiLnB1c2goYSk7Zm9yKHZhciBjPTA7YzxhLmNoaWxkcmVuLmxlbmd0aDtjKyspZChhLmNoaWxkcmVuW2NdLFxuYil9O2MuTElORUFSPTA7Yy5DQVRNVUxMUk9NPTE7Yy5DQVRNVUxMUk9NX0ZPUldBUkQ9MjtyZXR1cm4gY30oKTtUSFJFRS5BbmltYXRpb249ZnVuY3Rpb24oYSxiLGMpe3RoaXMucm9vdD1hO3RoaXMuZGF0YT1USFJFRS5BbmltYXRpb25IYW5kbGVyLmdldChiKTt0aGlzLmhpZXJhcmNoeT1USFJFRS5BbmltYXRpb25IYW5kbGVyLnBhcnNlKGEpO3RoaXMuY3VycmVudFRpbWU9MDt0aGlzLnRpbWVTY2FsZT0xO3RoaXMuaXNQbGF5aW5nPSExO3RoaXMubG9vcD10aGlzLmlzUGF1c2VkPSEwO3RoaXMuaW50ZXJwb2xhdGlvblR5cGU9dm9pZCAwIT09Yz9jOlRIUkVFLkFuaW1hdGlvbkhhbmRsZXIuTElORUFSO3RoaXMucG9pbnRzPVtdO3RoaXMudGFyZ2V0PW5ldyBUSFJFRS5WZWN0b3IzfTtcblRIUkVFLkFuaW1hdGlvbi5wcm90b3R5cGUucGxheT1mdW5jdGlvbihhLGIpe2lmKCExPT09dGhpcy5pc1BsYXlpbmcpe3RoaXMuaXNQbGF5aW5nPSEwO3RoaXMubG9vcD12b2lkIDAhPT1hP2E6ITA7dGhpcy5jdXJyZW50VGltZT12b2lkIDAhPT1iP2I6MDt2YXIgYyxkPXRoaXMuaGllcmFyY2h5Lmxlbmd0aCxlO2ZvcihjPTA7YzxkO2MrKyl7ZT10aGlzLmhpZXJhcmNoeVtjXTtlLm1hdHJpeEF1dG9VcGRhdGU9ITA7dm9pZCAwPT09ZS5hbmltYXRpb25DYWNoZSYmKGUuYW5pbWF0aW9uQ2FjaGU9e30sZS5hbmltYXRpb25DYWNoZS5wcmV2S2V5PXtwb3M6MCxyb3Q6MCxzY2w6MH0sZS5hbmltYXRpb25DYWNoZS5uZXh0S2V5PXtwb3M6MCxyb3Q6MCxzY2w6MH0sZS5hbmltYXRpb25DYWNoZS5vcmlnaW5hbE1hdHJpeD1lIGluc3RhbmNlb2YgVEhSRUUuQm9uZT9lLnNraW5NYXRyaXg6ZS5tYXRyaXgpO3ZhciBmPWUuYW5pbWF0aW9uQ2FjaGUucHJldktleTtlPWUuYW5pbWF0aW9uQ2FjaGUubmV4dEtleTtcbmYucG9zPXRoaXMuZGF0YS5oaWVyYXJjaHlbY10ua2V5c1swXTtmLnJvdD10aGlzLmRhdGEuaGllcmFyY2h5W2NdLmtleXNbMF07Zi5zY2w9dGhpcy5kYXRhLmhpZXJhcmNoeVtjXS5rZXlzWzBdO2UucG9zPXRoaXMuZ2V0TmV4dEtleVdpdGgoXCJwb3NcIixjLDEpO2Uucm90PXRoaXMuZ2V0TmV4dEtleVdpdGgoXCJyb3RcIixjLDEpO2Uuc2NsPXRoaXMuZ2V0TmV4dEtleVdpdGgoXCJzY2xcIixjLDEpfXRoaXMudXBkYXRlKDApfXRoaXMuaXNQYXVzZWQ9ITE7VEhSRUUuQW5pbWF0aW9uSGFuZGxlci5hZGRUb1VwZGF0ZSh0aGlzKX07VEhSRUUuQW5pbWF0aW9uLnByb3RvdHlwZS5wYXVzZT1mdW5jdGlvbigpeyEwPT09dGhpcy5pc1BhdXNlZD9USFJFRS5BbmltYXRpb25IYW5kbGVyLmFkZFRvVXBkYXRlKHRoaXMpOlRIUkVFLkFuaW1hdGlvbkhhbmRsZXIucmVtb3ZlRnJvbVVwZGF0ZSh0aGlzKTt0aGlzLmlzUGF1c2VkPSF0aGlzLmlzUGF1c2VkfTtcblRIUkVFLkFuaW1hdGlvbi5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3RoaXMuaXNQYXVzZWQ9dGhpcy5pc1BsYXlpbmc9ITE7VEhSRUUuQW5pbWF0aW9uSGFuZGxlci5yZW1vdmVGcm9tVXBkYXRlKHRoaXMpfTtcblRIUkVFLkFuaW1hdGlvbi5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKGEpe2lmKCExIT09dGhpcy5pc1BsYXlpbmcpe3ZhciBiPVtcInBvc1wiLFwicm90XCIsXCJzY2xcIl0sYyxkLGUsZixoLGcsaSxrLG07Zm9yKG09dGhpcy5jdXJyZW50VGltZSs9YSp0aGlzLnRpbWVTY2FsZTt0aGlzLmN1cnJlbnRUaW1lPnRoaXMuZGF0YS5sZW5ndGg7KXRoaXMuY3VycmVudFRpbWUtPXRoaXMuZGF0YS5sZW5ndGg7az10aGlzLmN1cnJlbnRUaW1lJT10aGlzLmRhdGEubGVuZ3RoO3BhcnNlSW50KE1hdGgubWluKGsqdGhpcy5kYXRhLmZwcyx0aGlzLmRhdGEubGVuZ3RoKnRoaXMuZGF0YS5mcHMpLDEwKTtmb3IodmFyIGw9MCxwPXRoaXMuaGllcmFyY2h5Lmxlbmd0aDtsPHA7bCsrKXthPXRoaXMuaGllcmFyY2h5W2xdO2k9YS5hbmltYXRpb25DYWNoZTtmb3IodmFyIHQ9MDszPnQ7dCsrKXtjPWJbdF07aD1pLnByZXZLZXlbY107Zz1pLm5leHRLZXlbY107aWYoZy50aW1lPD1tKXtpZihrPD1tKWlmKHRoaXMubG9vcCl7aD1cbnRoaXMuZGF0YS5oaWVyYXJjaHlbbF0ua2V5c1swXTtmb3IoZz10aGlzLmdldE5leHRLZXlXaXRoKGMsbCwxKTtudWxsIT09ZyYmZy50aW1lPGsmJmcuaW5kZXg+aC5pbmRleDspaD1nLGc9dGhpcy5nZXROZXh0S2V5V2l0aChjLGwsZy5pbmRleCsxKX1lbHNle3RoaXMuc3RvcCgpO3JldHVybn1lbHNle2RvIGg9ZyxnPXRoaXMuZ2V0TmV4dEtleVdpdGgoYyxsLGcuaW5kZXgrMSk7d2hpbGUobnVsbCE9PWcmJmcudGltZTxrJiZnLmluZGV4PmguaW5kZXgpfWkucHJldktleVtjXT1oO2kubmV4dEtleVtjXT1nfWEubWF0cml4QXV0b1VwZGF0ZT0hMDthLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9ITA7ZD0oay1oLnRpbWUpLyhnLnRpbWUtaC50aW1lKTtlPWhbY107Zj1nW2NdO2lmKDA+ZHx8MTxkKWNvbnNvbGUubG9nKFwiVEhSRUUuQW5pbWF0aW9uLnVwZGF0ZTogV2FybmluZyEgU2NhbGUgb3V0IG9mIGJvdW5kczpcIitkK1wiIG9uIGJvbmUgXCIrbCksZD0wPmQ/MDoxO2lmKFwicG9zXCI9PT1jKWlmKGM9XG5hLnBvc2l0aW9uLHRoaXMuaW50ZXJwb2xhdGlvblR5cGU9PT1USFJFRS5BbmltYXRpb25IYW5kbGVyLkxJTkVBUiljLng9ZVswXSsoZlswXS1lWzBdKSpkLGMueT1lWzFdKyhmWzFdLWVbMV0pKmQsYy56PWVbMl0rKGZbMl0tZVsyXSkqZDtlbHNle2lmKHRoaXMuaW50ZXJwb2xhdGlvblR5cGU9PT1USFJFRS5BbmltYXRpb25IYW5kbGVyLkNBVE1VTExST018fHRoaXMuaW50ZXJwb2xhdGlvblR5cGU9PT1USFJFRS5BbmltYXRpb25IYW5kbGVyLkNBVE1VTExST01fRk9SV0FSRCl0aGlzLnBvaW50c1swXT10aGlzLmdldFByZXZLZXlXaXRoKFwicG9zXCIsbCxoLmluZGV4LTEpLnBvcyx0aGlzLnBvaW50c1sxXT1lLHRoaXMucG9pbnRzWzJdPWYsdGhpcy5wb2ludHNbM109dGhpcy5nZXROZXh0S2V5V2l0aChcInBvc1wiLGwsZy5pbmRleCsxKS5wb3MsZD0wLjMzKmQrMC4zMyxlPXRoaXMuaW50ZXJwb2xhdGVDYXRtdWxsUm9tKHRoaXMucG9pbnRzLGQpLGMueD1lWzBdLGMueT1lWzFdLGMuej1lWzJdLFxudGhpcy5pbnRlcnBvbGF0aW9uVHlwZT09PVRIUkVFLkFuaW1hdGlvbkhhbmRsZXIuQ0FUTVVMTFJPTV9GT1JXQVJEJiYoZD10aGlzLmludGVycG9sYXRlQ2F0bXVsbFJvbSh0aGlzLnBvaW50cywxLjAxKmQpLHRoaXMudGFyZ2V0LnNldChkWzBdLGRbMV0sZFsyXSksdGhpcy50YXJnZXQuc3ViKGMpLHRoaXMudGFyZ2V0Lnk9MCx0aGlzLnRhcmdldC5ub3JtYWxpemUoKSxkPU1hdGguYXRhbjIodGhpcy50YXJnZXQueCx0aGlzLnRhcmdldC56KSxhLnJvdGF0aW9uLnNldCgwLGQsMCkpfWVsc2VcInJvdFwiPT09Yz9USFJFRS5RdWF0ZXJuaW9uLnNsZXJwKGUsZixhLnF1YXRlcm5pb24sZCk6XCJzY2xcIj09PWMmJihjPWEuc2NhbGUsYy54PWVbMF0rKGZbMF0tZVswXSkqZCxjLnk9ZVsxXSsoZlsxXS1lWzFdKSpkLGMuej1lWzJdKyhmWzJdLWVbMl0pKmQpfX19fTtcblRIUkVFLkFuaW1hdGlvbi5wcm90b3R5cGUuaW50ZXJwb2xhdGVDYXRtdWxsUm9tPWZ1bmN0aW9uKGEsYil7dmFyIGM9W10sZD1bXSxlLGYsaCxnLGksaztlPShhLmxlbmd0aC0xKSpiO2Y9TWF0aC5mbG9vcihlKTtlLT1mO2NbMF09MD09PWY/ZjpmLTE7Y1sxXT1mO2NbMl09Zj5hLmxlbmd0aC0yP2Y6ZisxO2NbM109Zj5hLmxlbmd0aC0zP2Y6ZisyO2Y9YVtjWzBdXTtnPWFbY1sxXV07aT1hW2NbMl1dO2s9YVtjWzNdXTtjPWUqZTtoPWUqYztkWzBdPXRoaXMuaW50ZXJwb2xhdGUoZlswXSxnWzBdLGlbMF0sa1swXSxlLGMsaCk7ZFsxXT10aGlzLmludGVycG9sYXRlKGZbMV0sZ1sxXSxpWzFdLGtbMV0sZSxjLGgpO2RbMl09dGhpcy5pbnRlcnBvbGF0ZShmWzJdLGdbMl0saVsyXSxrWzJdLGUsYyxoKTtyZXR1cm4gZH07XG5USFJFRS5BbmltYXRpb24ucHJvdG90eXBlLmludGVycG9sYXRlPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGgpe2E9MC41KihjLWEpO2Q9MC41KihkLWIpO3JldHVybigyKihiLWMpK2ErZCkqaCsoLTMqKGItYyktMiphLWQpKmYrYSplK2J9O1RIUkVFLkFuaW1hdGlvbi5wcm90b3R5cGUuZ2V0TmV4dEtleVdpdGg9ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD10aGlzLmRhdGEuaGllcmFyY2h5W2JdLmtleXMsYz10aGlzLmludGVycG9sYXRpb25UeXBlPT09VEhSRUUuQW5pbWF0aW9uSGFuZGxlci5DQVRNVUxMUk9NfHx0aGlzLmludGVycG9sYXRpb25UeXBlPT09VEhSRUUuQW5pbWF0aW9uSGFuZGxlci5DQVRNVUxMUk9NX0ZPUldBUkQ/YzxkLmxlbmd0aC0xP2M6ZC5sZW5ndGgtMTpjJWQubGVuZ3RoO2M8ZC5sZW5ndGg7YysrKWlmKHZvaWQgMCE9PWRbY11bYV0pcmV0dXJuIGRbY107cmV0dXJuIHRoaXMuZGF0YS5oaWVyYXJjaHlbYl0ua2V5c1swXX07XG5USFJFRS5BbmltYXRpb24ucHJvdG90eXBlLmdldFByZXZLZXlXaXRoPWZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9dGhpcy5kYXRhLmhpZXJhcmNoeVtiXS5rZXlzLGM9dGhpcy5pbnRlcnBvbGF0aW9uVHlwZT09PVRIUkVFLkFuaW1hdGlvbkhhbmRsZXIuQ0FUTVVMTFJPTXx8dGhpcy5pbnRlcnBvbGF0aW9uVHlwZT09PVRIUkVFLkFuaW1hdGlvbkhhbmRsZXIuQ0FUTVVMTFJPTV9GT1JXQVJEPzA8Yz9jOjA6MDw9Yz9jOmMrZC5sZW5ndGg7MDw9YztjLS0paWYodm9pZCAwIT09ZFtjXVthXSlyZXR1cm4gZFtjXTtyZXR1cm4gdGhpcy5kYXRhLmhpZXJhcmNoeVtiXS5rZXlzW2QubGVuZ3RoLTFdfTtUSFJFRS5LZXlGcmFtZUFuaW1hdGlvbj1mdW5jdGlvbihhLGIsYyl7dGhpcy5yb290PWE7dGhpcy5kYXRhPVRIUkVFLkFuaW1hdGlvbkhhbmRsZXIuZ2V0KGIpO3RoaXMuaGllcmFyY2h5PVRIUkVFLkFuaW1hdGlvbkhhbmRsZXIucGFyc2UoYSk7dGhpcy5jdXJyZW50VGltZT0wO3RoaXMudGltZVNjYWxlPTAuMDAxO3RoaXMuaXNQbGF5aW5nPSExO3RoaXMubG9vcD10aGlzLmlzUGF1c2VkPSEwO3RoaXMuSklUQ29tcGlsZT12b2lkIDAhPT1jP2M6ITA7YT0wO2ZvcihiPXRoaXMuaGllcmFyY2h5Lmxlbmd0aDthPGI7YSsrKXt2YXIgYz10aGlzLmRhdGEuaGllcmFyY2h5W2FdLnNpZHMsZD10aGlzLmhpZXJhcmNoeVthXTtpZih0aGlzLmRhdGEuaGllcmFyY2h5W2FdLmtleXMubGVuZ3RoJiZjKXtmb3IodmFyIGU9MDtlPGMubGVuZ3RoO2UrKyl7dmFyIGY9Y1tlXSxoPXRoaXMuZ2V0TmV4dEtleVdpdGgoZixhLDApO2gmJmguYXBwbHkoZil9ZC5tYXRyaXhBdXRvVXBkYXRlPSExO3RoaXMuZGF0YS5oaWVyYXJjaHlbYV0ubm9kZS51cGRhdGVNYXRyaXgoKTtcbmQubWF0cml4V29ybGROZWVkc1VwZGF0ZT0hMH19fTtcblRIUkVFLktleUZyYW1lQW5pbWF0aW9uLnByb3RvdHlwZS5wbGF5PWZ1bmN0aW9uKGEsYil7aWYoIXRoaXMuaXNQbGF5aW5nKXt0aGlzLmlzUGxheWluZz0hMDt0aGlzLmxvb3A9dm9pZCAwIT09YT9hOiEwO3RoaXMuY3VycmVudFRpbWU9dm9pZCAwIT09Yj9iOjA7dGhpcy5zdGFydFRpbWVNcz1iO3RoaXMuc3RhcnRUaW1lPTFFNzt0aGlzLmVuZFRpbWU9LXRoaXMuc3RhcnRUaW1lO3ZhciBjLGQ9dGhpcy5oaWVyYXJjaHkubGVuZ3RoLGUsZjtmb3IoYz0wO2M8ZDtjKyspZT10aGlzLmhpZXJhcmNoeVtjXSxmPXRoaXMuZGF0YS5oaWVyYXJjaHlbY10sdm9pZCAwPT09Zi5hbmltYXRpb25DYWNoZSYmKGYuYW5pbWF0aW9uQ2FjaGU9e30sZi5hbmltYXRpb25DYWNoZS5wcmV2S2V5PW51bGwsZi5hbmltYXRpb25DYWNoZS5uZXh0S2V5PW51bGwsZi5hbmltYXRpb25DYWNoZS5vcmlnaW5hbE1hdHJpeD1lIGluc3RhbmNlb2YgVEhSRUUuQm9uZT9lLnNraW5NYXRyaXg6ZS5tYXRyaXgpLGU9dGhpcy5kYXRhLmhpZXJhcmNoeVtjXS5rZXlzLFxuZS5sZW5ndGgmJihmLmFuaW1hdGlvbkNhY2hlLnByZXZLZXk9ZVswXSxmLmFuaW1hdGlvbkNhY2hlLm5leHRLZXk9ZVsxXSx0aGlzLnN0YXJ0VGltZT1NYXRoLm1pbihlWzBdLnRpbWUsdGhpcy5zdGFydFRpbWUpLHRoaXMuZW5kVGltZT1NYXRoLm1heChlW2UubGVuZ3RoLTFdLnRpbWUsdGhpcy5lbmRUaW1lKSk7dGhpcy51cGRhdGUoMCl9dGhpcy5pc1BhdXNlZD0hMTtUSFJFRS5BbmltYXRpb25IYW5kbGVyLmFkZFRvVXBkYXRlKHRoaXMpfTtUSFJFRS5LZXlGcmFtZUFuaW1hdGlvbi5wcm90b3R5cGUucGF1c2U9ZnVuY3Rpb24oKXt0aGlzLmlzUGF1c2VkP1RIUkVFLkFuaW1hdGlvbkhhbmRsZXIuYWRkVG9VcGRhdGUodGhpcyk6VEhSRUUuQW5pbWF0aW9uSGFuZGxlci5yZW1vdmVGcm9tVXBkYXRlKHRoaXMpO3RoaXMuaXNQYXVzZWQ9IXRoaXMuaXNQYXVzZWR9O1xuVEhSRUUuS2V5RnJhbWVBbmltYXRpb24ucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXt0aGlzLmlzUGF1c2VkPXRoaXMuaXNQbGF5aW5nPSExO1RIUkVFLkFuaW1hdGlvbkhhbmRsZXIucmVtb3ZlRnJvbVVwZGF0ZSh0aGlzKTtmb3IodmFyIGE9MDthPHRoaXMuZGF0YS5oaWVyYXJjaHkubGVuZ3RoO2ErKyl7dmFyIGI9dGhpcy5oaWVyYXJjaHlbYV0sYz10aGlzLmRhdGEuaGllcmFyY2h5W2FdO2lmKHZvaWQgMCE9PWMuYW5pbWF0aW9uQ2FjaGUpe3ZhciBkPWMuYW5pbWF0aW9uQ2FjaGUub3JpZ2luYWxNYXRyaXg7YiBpbnN0YW5jZW9mIFRIUkVFLkJvbmU/KGQuY29weShiLnNraW5NYXRyaXgpLGIuc2tpbk1hdHJpeD1kKTooZC5jb3B5KGIubWF0cml4KSxiLm1hdHJpeD1kKTtkZWxldGUgYy5hbmltYXRpb25DYWNoZX19fTtcblRIUkVFLktleUZyYW1lQW5pbWF0aW9uLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oYSl7aWYodGhpcy5pc1BsYXlpbmcpe3ZhciBiLGMsZCxlLGY9dGhpcy5kYXRhLkpJVC5oaWVyYXJjaHksaCxnLGk7Zz10aGlzLmN1cnJlbnRUaW1lKz1hKnRoaXMudGltZVNjYWxlO2g9dGhpcy5jdXJyZW50VGltZSU9dGhpcy5kYXRhLmxlbmd0aDtoPHRoaXMuc3RhcnRUaW1lTXMmJihoPXRoaXMuY3VycmVudFRpbWU9dGhpcy5zdGFydFRpbWVNcytoKTtlPXBhcnNlSW50KE1hdGgubWluKGgqdGhpcy5kYXRhLmZwcyx0aGlzLmRhdGEubGVuZ3RoKnRoaXMuZGF0YS5mcHMpLDEwKTtpZigoaT1oPGcpJiYhdGhpcy5sb29wKXtmb3IodmFyIGE9MCxrPXRoaXMuaGllcmFyY2h5Lmxlbmd0aDthPGs7YSsrKXt2YXIgbT10aGlzLmRhdGEuaGllcmFyY2h5W2FdLmtleXMsZj10aGlzLmRhdGEuaGllcmFyY2h5W2FdLnNpZHM7ZD1tLmxlbmd0aC0xO2U9dGhpcy5oaWVyYXJjaHlbYV07aWYobS5sZW5ndGgpe2ZvcihtPVxuMDttPGYubGVuZ3RoO20rKyloPWZbbV0sKGc9dGhpcy5nZXRQcmV2S2V5V2l0aChoLGEsZCkpJiZnLmFwcGx5KGgpO3RoaXMuZGF0YS5oaWVyYXJjaHlbYV0ubm9kZS51cGRhdGVNYXRyaXgoKTtlLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9ITB9fXRoaXMuc3RvcCgpfWVsc2UgaWYoIShoPHRoaXMuc3RhcnRUaW1lKSl7YT0wO2ZvcihrPXRoaXMuaGllcmFyY2h5Lmxlbmd0aDthPGs7YSsrKXtkPXRoaXMuaGllcmFyY2h5W2FdO2I9dGhpcy5kYXRhLmhpZXJhcmNoeVthXTt2YXIgbT1iLmtleXMsbD1iLmFuaW1hdGlvbkNhY2hlO2lmKHRoaXMuSklUQ29tcGlsZSYmdm9pZCAwIT09ZlthXVtlXSlkIGluc3RhbmNlb2YgVEhSRUUuQm9uZT8oZC5za2luTWF0cml4PWZbYV1bZV0sZC5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPSExKTooZC5tYXRyaXg9ZlthXVtlXSxkLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9ITApO2Vsc2UgaWYobS5sZW5ndGgpe3RoaXMuSklUQ29tcGlsZSYmbCYmKGQgaW5zdGFuY2VvZlxuVEhSRUUuQm9uZT9kLnNraW5NYXRyaXg9bC5vcmlnaW5hbE1hdHJpeDpkLm1hdHJpeD1sLm9yaWdpbmFsTWF0cml4KTtiPWwucHJldktleTtjPWwubmV4dEtleTtpZihiJiZjKXtpZihjLnRpbWU8PWcpe2lmKGkmJnRoaXMubG9vcCl7Yj1tWzBdO2ZvcihjPW1bMV07Yy50aW1lPGg7KWI9YyxjPW1bYi5pbmRleCsxXX1lbHNlIGlmKCFpKWZvcih2YXIgcD1tLmxlbmd0aC0xO2MudGltZTxoJiZjLmluZGV4IT09cDspYj1jLGM9bVtiLmluZGV4KzFdO2wucHJldktleT1iO2wubmV4dEtleT1jfWMudGltZT49aD9iLmludGVycG9sYXRlKGMsaCk6Yi5pbnRlcnBvbGF0ZShjLGMudGltZSl9dGhpcy5kYXRhLmhpZXJhcmNoeVthXS5ub2RlLnVwZGF0ZU1hdHJpeCgpO2QubWF0cml4V29ybGROZWVkc1VwZGF0ZT0hMH19aWYodGhpcy5KSVRDb21waWxlJiZ2b2lkIDA9PT1mWzBdW2VdKXt0aGlzLmhpZXJhcmNoeVswXS51cGRhdGVNYXRyaXhXb3JsZCghMCk7Zm9yKGE9MDthPHRoaXMuaGllcmFyY2h5Lmxlbmd0aDthKyspZlthXVtlXT1cbnRoaXMuaGllcmFyY2h5W2FdaW5zdGFuY2VvZiBUSFJFRS5Cb25lP3RoaXMuaGllcmFyY2h5W2FdLnNraW5NYXRyaXguY2xvbmUoKTp0aGlzLmhpZXJhcmNoeVthXS5tYXRyaXguY2xvbmUoKX19fX07VEhSRUUuS2V5RnJhbWVBbmltYXRpb24ucHJvdG90eXBlLmdldE5leHRLZXlXaXRoPWZ1bmN0aW9uKGEsYixjKXtiPXRoaXMuZGF0YS5oaWVyYXJjaHlbYl0ua2V5cztmb3IoYyU9Yi5sZW5ndGg7YzxiLmxlbmd0aDtjKyspaWYoYltjXS5oYXNUYXJnZXQoYSkpcmV0dXJuIGJbY107cmV0dXJuIGJbMF19O1RIUkVFLktleUZyYW1lQW5pbWF0aW9uLnByb3RvdHlwZS5nZXRQcmV2S2V5V2l0aD1mdW5jdGlvbihhLGIsYyl7Yj10aGlzLmRhdGEuaGllcmFyY2h5W2JdLmtleXM7Zm9yKGM9MDw9Yz9jOmMrYi5sZW5ndGg7MDw9YztjLS0paWYoYltjXS5oYXNUYXJnZXQoYSkpcmV0dXJuIGJbY107cmV0dXJuIGJbYi5sZW5ndGgtMV19O1RIUkVFLkN1YmVDYW1lcmE9ZnVuY3Rpb24oYSxiLGMpe1RIUkVFLk9iamVjdDNELmNhbGwodGhpcyk7dmFyIGQ9bmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKDkwLDEsYSxiKTtkLnVwLnNldCgwLC0xLDApO2QubG9va0F0KG5ldyBUSFJFRS5WZWN0b3IzKDEsMCwwKSk7dGhpcy5hZGQoZCk7dmFyIGU9bmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKDkwLDEsYSxiKTtlLnVwLnNldCgwLC0xLDApO2UubG9va0F0KG5ldyBUSFJFRS5WZWN0b3IzKC0xLDAsMCkpO3RoaXMuYWRkKGUpO3ZhciBmPW5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSg5MCwxLGEsYik7Zi51cC5zZXQoMCwwLDEpO2YubG9va0F0KG5ldyBUSFJFRS5WZWN0b3IzKDAsMSwwKSk7dGhpcy5hZGQoZik7dmFyIGg9bmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKDkwLDEsYSxiKTtoLnVwLnNldCgwLDAsLTEpO2gubG9va0F0KG5ldyBUSFJFRS5WZWN0b3IzKDAsLTEsMCkpO3RoaXMuYWRkKGgpO3ZhciBnPW5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSg5MCxcbjEsYSxiKTtnLnVwLnNldCgwLC0xLDApO2cubG9va0F0KG5ldyBUSFJFRS5WZWN0b3IzKDAsMCwxKSk7dGhpcy5hZGQoZyk7dmFyIGk9bmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKDkwLDEsYSxiKTtpLnVwLnNldCgwLC0xLDApO2kubG9va0F0KG5ldyBUSFJFRS5WZWN0b3IzKDAsMCwtMSkpO3RoaXMuYWRkKGkpO3RoaXMucmVuZGVyVGFyZ2V0PW5ldyBUSFJFRS5XZWJHTFJlbmRlclRhcmdldEN1YmUoYyxjLHtmb3JtYXQ6VEhSRUUuUkdCRm9ybWF0LG1hZ0ZpbHRlcjpUSFJFRS5MaW5lYXJGaWx0ZXIsbWluRmlsdGVyOlRIUkVFLkxpbmVhckZpbHRlcn0pO3RoaXMudXBkYXRlQ3ViZU1hcD1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMucmVuZGVyVGFyZ2V0LHA9Yy5nZW5lcmF0ZU1pcG1hcHM7Yy5nZW5lcmF0ZU1pcG1hcHM9ITE7Yy5hY3RpdmVDdWJlRmFjZT0wO2EucmVuZGVyKGIsZCxjKTtjLmFjdGl2ZUN1YmVGYWNlPTE7YS5yZW5kZXIoYixlLGMpO2MuYWN0aXZlQ3ViZUZhY2U9XG4yO2EucmVuZGVyKGIsZixjKTtjLmFjdGl2ZUN1YmVGYWNlPTM7YS5yZW5kZXIoYixoLGMpO2MuYWN0aXZlQ3ViZUZhY2U9NDthLnJlbmRlcihiLGcsYyk7Yy5nZW5lcmF0ZU1pcG1hcHM9cDtjLmFjdGl2ZUN1YmVGYWNlPTU7YS5yZW5kZXIoYixpLGMpfX07VEhSRUUuQ3ViZUNhbWVyYS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUpO1RIUkVFLkNvbWJpbmVkQ2FtZXJhPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGgpe1RIUkVFLkNhbWVyYS5jYWxsKHRoaXMpO3RoaXMuZm92PWM7dGhpcy5sZWZ0PS1hLzI7dGhpcy5yaWdodD1hLzI7dGhpcy50b3A9Yi8yO3RoaXMuYm90dG9tPS1iLzI7dGhpcy5jYW1lcmFPPW5ldyBUSFJFRS5PcnRob2dyYXBoaWNDYW1lcmEoYS8tMixhLzIsYi8yLGIvLTIsZixoKTt0aGlzLmNhbWVyYVA9bmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKGMsYS9iLGQsZSk7dGhpcy56b29tPTE7dGhpcy50b1BlcnNwZWN0aXZlKCl9O1RIUkVFLkNvbWJpbmVkQ2FtZXJhLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkNhbWVyYS5wcm90b3R5cGUpO1xuVEhSRUUuQ29tYmluZWRDYW1lcmEucHJvdG90eXBlLnRvUGVyc3BlY3RpdmU9ZnVuY3Rpb24oKXt0aGlzLm5lYXI9dGhpcy5jYW1lcmFQLm5lYXI7dGhpcy5mYXI9dGhpcy5jYW1lcmFQLmZhcjt0aGlzLmNhbWVyYVAuZm92PXRoaXMuZm92L3RoaXMuem9vbTt0aGlzLmNhbWVyYVAudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO3RoaXMucHJvamVjdGlvbk1hdHJpeD10aGlzLmNhbWVyYVAucHJvamVjdGlvbk1hdHJpeDt0aGlzLmluUGVyc3BlY3RpdmVNb2RlPSEwO3RoaXMuaW5PcnRob2dyYXBoaWNNb2RlPSExfTtcblRIUkVFLkNvbWJpbmVkQ2FtZXJhLnByb3RvdHlwZS50b09ydGhvZ3JhcGhpYz1mdW5jdGlvbigpe3ZhciBhPXRoaXMuY2FtZXJhUC5hc3BlY3QsYj0odGhpcy5jYW1lcmFQLm5lYXIrdGhpcy5jYW1lcmFQLmZhcikvMixiPU1hdGgudGFuKHRoaXMuZm92LzIpKmIsYT0yKmIqYS8yLGI9Yi90aGlzLnpvb20sYT1hL3RoaXMuem9vbTt0aGlzLmNhbWVyYU8ubGVmdD0tYTt0aGlzLmNhbWVyYU8ucmlnaHQ9YTt0aGlzLmNhbWVyYU8udG9wPWI7dGhpcy5jYW1lcmFPLmJvdHRvbT0tYjt0aGlzLmNhbWVyYU8udXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO3RoaXMubmVhcj10aGlzLmNhbWVyYU8ubmVhcjt0aGlzLmZhcj10aGlzLmNhbWVyYU8uZmFyO3RoaXMucHJvamVjdGlvbk1hdHJpeD10aGlzLmNhbWVyYU8ucHJvamVjdGlvbk1hdHJpeDt0aGlzLmluUGVyc3BlY3RpdmVNb2RlPSExO3RoaXMuaW5PcnRob2dyYXBoaWNNb2RlPSEwfTtcblRIUkVFLkNvbWJpbmVkQ2FtZXJhLnByb3RvdHlwZS5zZXRTaXplPWZ1bmN0aW9uKGEsYil7dGhpcy5jYW1lcmFQLmFzcGVjdD1hL2I7dGhpcy5sZWZ0PS1hLzI7dGhpcy5yaWdodD1hLzI7dGhpcy50b3A9Yi8yO3RoaXMuYm90dG9tPS1iLzJ9O1RIUkVFLkNvbWJpbmVkQ2FtZXJhLnByb3RvdHlwZS5zZXRGb3Y9ZnVuY3Rpb24oYSl7dGhpcy5mb3Y9YTt0aGlzLmluUGVyc3BlY3RpdmVNb2RlP3RoaXMudG9QZXJzcGVjdGl2ZSgpOnRoaXMudG9PcnRob2dyYXBoaWMoKX07VEhSRUUuQ29tYmluZWRDYW1lcmEucHJvdG90eXBlLnVwZGF0ZVByb2plY3Rpb25NYXRyaXg9ZnVuY3Rpb24oKXt0aGlzLmluUGVyc3BlY3RpdmVNb2RlP3RoaXMudG9QZXJzcGVjdGl2ZSgpOih0aGlzLnRvUGVyc3BlY3RpdmUoKSx0aGlzLnRvT3J0aG9ncmFwaGljKCkpfTtcblRIUkVFLkNvbWJpbmVkQ2FtZXJhLnByb3RvdHlwZS5zZXRMZW5zPWZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9MjQpO3ZhciBjPTIqVEhSRUUuTWF0aC5yYWRUb0RlZyhNYXRoLmF0YW4oYi8oMiphKSkpO3RoaXMuc2V0Rm92KGMpO3JldHVybiBjfTtUSFJFRS5Db21iaW5lZENhbWVyYS5wcm90b3R5cGUuc2V0Wm9vbT1mdW5jdGlvbihhKXt0aGlzLnpvb209YTt0aGlzLmluUGVyc3BlY3RpdmVNb2RlP3RoaXMudG9QZXJzcGVjdGl2ZSgpOnRoaXMudG9PcnRob2dyYXBoaWMoKX07VEhSRUUuQ29tYmluZWRDYW1lcmEucHJvdG90eXBlLnRvRnJvbnRWaWV3PWZ1bmN0aW9uKCl7dGhpcy5yb3RhdGlvbi54PTA7dGhpcy5yb3RhdGlvbi55PTA7dGhpcy5yb3RhdGlvbi56PTA7dGhpcy5yb3RhdGlvbkF1dG9VcGRhdGU9ITF9O1xuVEhSRUUuQ29tYmluZWRDYW1lcmEucHJvdG90eXBlLnRvQmFja1ZpZXc9ZnVuY3Rpb24oKXt0aGlzLnJvdGF0aW9uLng9MDt0aGlzLnJvdGF0aW9uLnk9TWF0aC5QSTt0aGlzLnJvdGF0aW9uLno9MDt0aGlzLnJvdGF0aW9uQXV0b1VwZGF0ZT0hMX07VEhSRUUuQ29tYmluZWRDYW1lcmEucHJvdG90eXBlLnRvTGVmdFZpZXc9ZnVuY3Rpb24oKXt0aGlzLnJvdGF0aW9uLng9MDt0aGlzLnJvdGF0aW9uLnk9LU1hdGguUEkvMjt0aGlzLnJvdGF0aW9uLno9MDt0aGlzLnJvdGF0aW9uQXV0b1VwZGF0ZT0hMX07VEhSRUUuQ29tYmluZWRDYW1lcmEucHJvdG90eXBlLnRvUmlnaHRWaWV3PWZ1bmN0aW9uKCl7dGhpcy5yb3RhdGlvbi54PTA7dGhpcy5yb3RhdGlvbi55PU1hdGguUEkvMjt0aGlzLnJvdGF0aW9uLno9MDt0aGlzLnJvdGF0aW9uQXV0b1VwZGF0ZT0hMX07XG5USFJFRS5Db21iaW5lZENhbWVyYS5wcm90b3R5cGUudG9Ub3BWaWV3PWZ1bmN0aW9uKCl7dGhpcy5yb3RhdGlvbi54PS1NYXRoLlBJLzI7dGhpcy5yb3RhdGlvbi55PTA7dGhpcy5yb3RhdGlvbi56PTA7dGhpcy5yb3RhdGlvbkF1dG9VcGRhdGU9ITF9O1RIUkVFLkNvbWJpbmVkQ2FtZXJhLnByb3RvdHlwZS50b0JvdHRvbVZpZXc9ZnVuY3Rpb24oKXt0aGlzLnJvdGF0aW9uLng9TWF0aC5QSS8yO3RoaXMucm90YXRpb24ueT0wO3RoaXMucm90YXRpb24uej0wO3RoaXMucm90YXRpb25BdXRvVXBkYXRlPSExfTtUSFJFRS5DaXJjbGVHZW9tZXRyeT1mdW5jdGlvbihhLGIsYyxkKXtUSFJFRS5HZW9tZXRyeS5jYWxsKHRoaXMpO3RoaXMucmFkaXVzPWE9YXx8NTA7dGhpcy5zZWdtZW50cz1iPXZvaWQgMCE9PWI/TWF0aC5tYXgoMyxiKTo4O3RoaXMudGhldGFTdGFydD1jPXZvaWQgMCE9PWM/YzowO3RoaXMudGhldGFMZW5ndGg9ZD12b2lkIDAhPT1kP2Q6MipNYXRoLlBJO3ZhciBlLGY9W107ZT1uZXcgVEhSRUUuVmVjdG9yMzt2YXIgaD1uZXcgVEhSRUUuVmVjdG9yMigwLjUsMC41KTt0aGlzLnZlcnRpY2VzLnB1c2goZSk7Zi5wdXNoKGgpO2ZvcihlPTA7ZTw9YjtlKyspe3ZhciBnPW5ldyBUSFJFRS5WZWN0b3IzLGk9YytlL2IqZDtnLng9YSpNYXRoLmNvcyhpKTtnLnk9YSpNYXRoLnNpbihpKTt0aGlzLnZlcnRpY2VzLnB1c2goZyk7Zi5wdXNoKG5ldyBUSFJFRS5WZWN0b3IyKChnLngvYSsxKS8yLChnLnkvYSsxKS8yKSl9Yz1uZXcgVEhSRUUuVmVjdG9yMygwLDAsMSk7Zm9yKGU9MTtlPD1iO2UrKyl0aGlzLmZhY2VzLnB1c2gobmV3IFRIUkVFLkZhY2UzKGUsXG5lKzEsMCxbYy5jbG9uZSgpLGMuY2xvbmUoKSxjLmNsb25lKCldKSksdGhpcy5mYWNlVmVydGV4VXZzWzBdLnB1c2goW2ZbZV0uY2xvbmUoKSxmW2UrMV0uY2xvbmUoKSxoLmNsb25lKCldKTt0aGlzLmNvbXB1dGVDZW50cm9pZHMoKTt0aGlzLmNvbXB1dGVGYWNlTm9ybWFscygpO3RoaXMuYm91bmRpbmdTcGhlcmU9bmV3IFRIUkVFLlNwaGVyZShuZXcgVEhSRUUuVmVjdG9yMyxhKX07VEhSRUUuQ2lyY2xlR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5DdWJlR2VvbWV0cnk9ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe2Z1bmN0aW9uIGgoYSxiLGMsZCxlLGYsaCxxKXt2YXIgbix1PWcud2lkdGhTZWdtZW50cyxyPWcuaGVpZ2h0U2VnbWVudHMsdj1lLzIsej1mLzIsRz1nLnZlcnRpY2VzLmxlbmd0aDtpZihcInhcIj09PWEmJlwieVwiPT09Ynx8XCJ5XCI9PT1hJiZcInhcIj09PWIpbj1cInpcIjtlbHNlIGlmKFwieFwiPT09YSYmXCJ6XCI9PT1ifHxcInpcIj09PWEmJlwieFwiPT09YiluPVwieVwiLHI9Zy5kZXB0aFNlZ21lbnRzO2Vsc2UgaWYoXCJ6XCI9PT1hJiZcInlcIj09PWJ8fFwieVwiPT09YSYmXCJ6XCI9PT1iKW49XCJ4XCIsdT1nLmRlcHRoU2VnbWVudHM7dmFyIHc9dSsxLHk9cisxLEU9ZS91LEE9Zi9yLEs9bmV3IFRIUkVFLlZlY3RvcjM7S1tuXT0wPGg/MTotMTtmb3IoZT0wO2U8eTtlKyspZm9yKGY9MDtmPHc7ZisrKXt2YXIgRD1uZXcgVEhSRUUuVmVjdG9yMztEW2FdPShmKkUtdikqYztEW2JdPShlKkEteikqZDtEW25dPWg7Zy52ZXJ0aWNlcy5wdXNoKEQpfWZvcihlPVxuMDtlPHI7ZSsrKWZvcihmPTA7Zjx1O2YrKyl6PWYrdyplLGE9Zit3KihlKzEpLGI9ZisxK3cqKGUrMSksYz1mKzErdyplLGQ9bmV3IFRIUkVFLlZlY3RvcjIoZi91LDEtZS9yKSxoPW5ldyBUSFJFRS5WZWN0b3IyKGYvdSwxLShlKzEpL3IpLG49bmV3IFRIUkVFLlZlY3RvcjIoKGYrMSkvdSwxLShlKzEpL3IpLHY9bmV3IFRIUkVFLlZlY3RvcjIoKGYrMSkvdSwxLWUvciksej1uZXcgVEhSRUUuRmFjZTMoeitHLGErRyxjK0cpLHoubm9ybWFsLmNvcHkoSyksei52ZXJ0ZXhOb3JtYWxzLnB1c2goSy5jbG9uZSgpLEsuY2xvbmUoKSxLLmNsb25lKCkpLHoubWF0ZXJpYWxJbmRleD1xLGcuZmFjZXMucHVzaCh6KSxnLmZhY2VWZXJ0ZXhVdnNbMF0ucHVzaChbZCxoLHZdKSx6PW5ldyBUSFJFRS5GYWNlMyhhK0csYitHLGMrRyksei5ub3JtYWwuY29weShLKSx6LnZlcnRleE5vcm1hbHMucHVzaChLLmNsb25lKCksSy5jbG9uZSgpLEsuY2xvbmUoKSksei5tYXRlcmlhbEluZGV4PXEsZy5mYWNlcy5wdXNoKHopLFxuZy5mYWNlVmVydGV4VXZzWzBdLnB1c2goW2guY2xvbmUoKSxuLHYuY2xvbmUoKV0pfVRIUkVFLkdlb21ldHJ5LmNhbGwodGhpcyk7dmFyIGc9dGhpczt0aGlzLndpZHRoPWE7dGhpcy5oZWlnaHQ9Yjt0aGlzLmRlcHRoPWM7dGhpcy53aWR0aFNlZ21lbnRzPWR8fDE7dGhpcy5oZWlnaHRTZWdtZW50cz1lfHwxO3RoaXMuZGVwdGhTZWdtZW50cz1mfHwxO2E9dGhpcy53aWR0aC8yO2I9dGhpcy5oZWlnaHQvMjtjPXRoaXMuZGVwdGgvMjtoKFwielwiLFwieVwiLC0xLC0xLHRoaXMuZGVwdGgsdGhpcy5oZWlnaHQsYSwwKTtoKFwielwiLFwieVwiLDEsLTEsdGhpcy5kZXB0aCx0aGlzLmhlaWdodCwtYSwxKTtoKFwieFwiLFwielwiLDEsMSx0aGlzLndpZHRoLHRoaXMuZGVwdGgsYiwyKTtoKFwieFwiLFwielwiLDEsLTEsdGhpcy53aWR0aCx0aGlzLmRlcHRoLC1iLDMpO2goXCJ4XCIsXCJ5XCIsMSwtMSx0aGlzLndpZHRoLHRoaXMuaGVpZ2h0LGMsNCk7aChcInhcIixcInlcIiwtMSwtMSx0aGlzLndpZHRoLHRoaXMuaGVpZ2h0LC1jLFxuNSk7dGhpcy5jb21wdXRlQ2VudHJvaWRzKCk7dGhpcy5tZXJnZVZlcnRpY2VzKCl9O1RIUkVFLkN1YmVHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5HZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLkN5bGluZGVyR2VvbWV0cnk9ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe1RIUkVFLkdlb21ldHJ5LmNhbGwodGhpcyk7dGhpcy5yYWRpdXNUb3A9YT12b2lkIDAhPT1hP2E6MjA7dGhpcy5yYWRpdXNCb3R0b209Yj12b2lkIDAhPT1iP2I6MjA7dGhpcy5oZWlnaHQ9Yz12b2lkIDAhPT1jP2M6MTAwO3RoaXMucmFkaWFsU2VnbWVudHM9ZD1kfHw4O3RoaXMuaGVpZ2h0U2VnbWVudHM9ZT1lfHwxO3RoaXMub3BlbkVuZGVkPWY9dm9pZCAwIT09Zj9mOiExO3ZhciBoPWMvMixnLGksaz1bXSxtPVtdO2ZvcihpPTA7aTw9ZTtpKyspe3ZhciBsPVtdLHA9W10sdD1pL2Uscz10KihiLWEpK2E7Zm9yKGc9MDtnPD1kO2crKyl7dmFyIHE9Zy9kLG49bmV3IFRIUkVFLlZlY3RvcjM7bi54PXMqTWF0aC5zaW4oMipxKk1hdGguUEkpO24ueT0tdCpjK2g7bi56PXMqTWF0aC5jb3MoMipxKk1hdGguUEkpO3RoaXMudmVydGljZXMucHVzaChuKTtsLnB1c2godGhpcy52ZXJ0aWNlcy5sZW5ndGgtMSk7cC5wdXNoKG5ldyBUSFJFRS5WZWN0b3IyKHEsXG4xLXQpKX1rLnB1c2gobCk7bS5wdXNoKHApfWM9KGItYSkvYztmb3IoZz0wO2c8ZDtnKyspezAhPT1hPyhsPXRoaXMudmVydGljZXNba1swXVtnXV0uY2xvbmUoKSxwPXRoaXMudmVydGljZXNba1swXVtnKzFdXS5jbG9uZSgpKToobD10aGlzLnZlcnRpY2VzW2tbMV1bZ11dLmNsb25lKCkscD10aGlzLnZlcnRpY2VzW2tbMV1bZysxXV0uY2xvbmUoKSk7bC5zZXRZKE1hdGguc3FydChsLngqbC54K2wueipsLnopKmMpLm5vcm1hbGl6ZSgpO3Auc2V0WShNYXRoLnNxcnQocC54KnAueCtwLnoqcC56KSpjKS5ub3JtYWxpemUoKTtmb3IoaT0wO2k8ZTtpKyspe3ZhciB0PWtbaV1bZ10scz1rW2krMV1bZ10scT1rW2krMV1bZysxXSxuPWtbaV1bZysxXSx1PWwuY2xvbmUoKSxyPWwuY2xvbmUoKSx2PXAuY2xvbmUoKSx6PXAuY2xvbmUoKSxHPW1baV1bZ10uY2xvbmUoKSx3PW1baSsxXVtnXS5jbG9uZSgpLHk9bVtpKzFdW2crMV0uY2xvbmUoKSxFPW1baV1bZysxXS5jbG9uZSgpO3RoaXMuZmFjZXMucHVzaChuZXcgVEhSRUUuRmFjZTModCxcbnMsbixbdSxyLHpdKSk7dGhpcy5mYWNlVmVydGV4VXZzWzBdLnB1c2goW0csdyxFXSk7dGhpcy5mYWNlcy5wdXNoKG5ldyBUSFJFRS5GYWNlMyhzLHEsbixbci5jbG9uZSgpLHYsei5jbG9uZSgpXSkpO3RoaXMuZmFjZVZlcnRleFV2c1swXS5wdXNoKFt3LmNsb25lKCkseSxFLmNsb25lKCldKX19aWYoITE9PT1mJiYwPGEpe3RoaXMudmVydGljZXMucHVzaChuZXcgVEhSRUUuVmVjdG9yMygwLGgsMCkpO2ZvcihnPTA7ZzxkO2crKyl0PWtbMF1bZ10scz1rWzBdW2crMV0scT10aGlzLnZlcnRpY2VzLmxlbmd0aC0xLHU9bmV3IFRIUkVFLlZlY3RvcjMoMCwxLDApLHI9bmV3IFRIUkVFLlZlY3RvcjMoMCwxLDApLHY9bmV3IFRIUkVFLlZlY3RvcjMoMCwxLDApLEc9bVswXVtnXS5jbG9uZSgpLHc9bVswXVtnKzFdLmNsb25lKCkseT1uZXcgVEhSRUUuVmVjdG9yMih3LngsMCksdGhpcy5mYWNlcy5wdXNoKG5ldyBUSFJFRS5GYWNlMyh0LHMscSxbdSxyLHZdKSksdGhpcy5mYWNlVmVydGV4VXZzWzBdLnB1c2goW0csXG53LHldKX1pZighMT09PWYmJjA8Yil7dGhpcy52ZXJ0aWNlcy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IzKDAsLWgsMCkpO2ZvcihnPTA7ZzxkO2crKyl0PWtbaV1bZysxXSxzPWtbaV1bZ10scT10aGlzLnZlcnRpY2VzLmxlbmd0aC0xLHU9bmV3IFRIUkVFLlZlY3RvcjMoMCwtMSwwKSxyPW5ldyBUSFJFRS5WZWN0b3IzKDAsLTEsMCksdj1uZXcgVEhSRUUuVmVjdG9yMygwLC0xLDApLEc9bVtpXVtnKzFdLmNsb25lKCksdz1tW2ldW2ddLmNsb25lKCkseT1uZXcgVEhSRUUuVmVjdG9yMih3LngsMSksdGhpcy5mYWNlcy5wdXNoKG5ldyBUSFJFRS5GYWNlMyh0LHMscSxbdSxyLHZdKSksdGhpcy5mYWNlVmVydGV4VXZzWzBdLnB1c2goW0csdyx5XSl9dGhpcy5jb21wdXRlQ2VudHJvaWRzKCk7dGhpcy5jb21wdXRlRmFjZU5vcm1hbHMoKX07VEhSRUUuQ3lsaW5kZXJHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5HZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLkV4dHJ1ZGVHZW9tZXRyeT1mdW5jdGlvbihhLGIpe1widW5kZWZpbmVkXCIhPT10eXBlb2YgYSYmKFRIUkVFLkdlb21ldHJ5LmNhbGwodGhpcyksYT1hIGluc3RhbmNlb2YgQXJyYXk/YTpbYV0sdGhpcy5zaGFwZWJiPWFbYS5sZW5ndGgtMV0uZ2V0Qm91bmRpbmdCb3goKSx0aGlzLmFkZFNoYXBlTGlzdChhLGIpLHRoaXMuY29tcHV0ZUNlbnRyb2lkcygpLHRoaXMuY29tcHV0ZUZhY2VOb3JtYWxzKCkpfTtUSFJFRS5FeHRydWRlR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5FeHRydWRlR2VvbWV0cnkucHJvdG90eXBlLmFkZFNoYXBlTGlzdD1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1hLmxlbmd0aCxkPTA7ZDxjO2QrKyl0aGlzLmFkZFNoYXBlKGFbZF0sYil9O1xuVEhSRUUuRXh0cnVkZUdlb21ldHJ5LnByb3RvdHlwZS5hZGRTaGFwZT1mdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSxiLGMpe2J8fGNvbnNvbGUubG9nKFwiZGllXCIpO3JldHVybiBiLmNsb25lKCkubXVsdGlwbHlTY2FsYXIoYykuYWRkKGEpfWZ1bmN0aW9uIGQoYSxiLGMpe3ZhciBkPVRIUkVFLkV4dHJ1ZGVHZW9tZXRyeS5fX3YxLGU9VEhSRUUuRXh0cnVkZUdlb21ldHJ5Ll9fdjIsZj1USFJFRS5FeHRydWRlR2VvbWV0cnkuX192MyxnPVRIUkVFLkV4dHJ1ZGVHZW9tZXRyeS5fX3Y0LGg9VEhSRUUuRXh0cnVkZUdlb21ldHJ5Ll9fdjUsaT1USFJFRS5FeHRydWRlR2VvbWV0cnkuX192NjtkLnNldChhLngtYi54LGEueS1iLnkpO2Uuc2V0KGEueC1jLngsYS55LWMueSk7ZD1kLm5vcm1hbGl6ZSgpO2U9ZS5ub3JtYWxpemUoKTtmLnNldCgtZC55LGQueCk7Zy5zZXQoZS55LC1lLngpO2guY29weShhKS5hZGQoZik7aS5jb3B5KGEpLmFkZChnKTtpZihoLmVxdWFscyhpKSlyZXR1cm4gZy5jbG9uZSgpO1xuaC5jb3B5KGIpLmFkZChmKTtpLmNvcHkoYykuYWRkKGcpO2Y9ZC5kb3QoZyk7Zz1pLnN1YihoKS5kb3QoZyk7MD09PWYmJihjb25zb2xlLmxvZyhcIkVpdGhlciBpbmZpbml0ZSBvciBubyBzb2x1dGlvbnMhXCIpLDA9PT1nP2NvbnNvbGUubG9nKFwiSXRzIGZpbml0ZSBzb2x1dGlvbnMuXCIpOmNvbnNvbGUubG9nKFwiVG9vIGJhZCwgbm8gc29sdXRpb25zLlwiKSk7Zy89ZjtyZXR1cm4gMD5nPyhiPU1hdGguYXRhbjIoYi55LWEueSxiLngtYS54KSxhPU1hdGguYXRhbjIoYy55LWEueSxjLngtYS54KSxiPmEmJihhKz0yKk1hdGguUEkpLGM9KGIrYSkvMixhPS1NYXRoLmNvcyhjKSxjPS1NYXRoLnNpbihjKSxuZXcgVEhSRUUuVmVjdG9yMihhLGMpKTpkLm11bHRpcGx5U2NhbGFyKGcpLmFkZChoKS5zdWIoYSkuY2xvbmUoKX1mdW5jdGlvbiBlKGMsZCl7dmFyIGUsZjtmb3IoQz1jLmxlbmd0aDswPD0tLUM7KXtlPUM7Zj1DLTE7MD5mJiYoZj1jLmxlbmd0aC0xKTtmb3IodmFyIGc9MCxoPXQrMiptLFxuZz0wO2c8aDtnKyspe3ZhciBpPWNhKmcsaz1jYSooZysxKSxsPWQrZStpLGk9ZCtmK2ksbj1kK2YrayxrPWQrZStrLHA9YyxxPWcscz1oLHU9ZSx3PWYsbD1sK0YsaT1pK0Ysbj1uK0Ysaz1rK0Y7RC5mYWNlcy5wdXNoKG5ldyBUSFJFRS5GYWNlMyhsLGksayxudWxsLG51bGwscikpO0QuZmFjZXMucHVzaChuZXcgVEhSRUUuRmFjZTMoaSxuLGssbnVsbCxudWxsLHIpKTtsPXYuZ2VuZXJhdGVTaWRlV2FsbFVWKEQsYSxwLGIsbCxpLG4sayxxLHMsdSx3KTtELmZhY2VWZXJ0ZXhVdnNbMF0ucHVzaChbbFswXSxsWzFdLGxbM11dKTtELmZhY2VWZXJ0ZXhVdnNbMF0ucHVzaChbbFsxXSxsWzJdLGxbM11dKX19fWZ1bmN0aW9uIGYoYSxiLGMpe0QudmVydGljZXMucHVzaChuZXcgVEhSRUUuVmVjdG9yMyhhLGIsYykpfWZ1bmN0aW9uIGgoYyxkLGUsZil7Yys9RjtkKz1GO2UrPUY7RC5mYWNlcy5wdXNoKG5ldyBUSFJFRS5GYWNlMyhjLGQsZSxudWxsLG51bGwsdSkpO2M9Zj92LmdlbmVyYXRlQm90dG9tVVYoRCxcbmEsYixjLGQsZSk6di5nZW5lcmF0ZVRvcFVWKEQsYSxiLGMsZCxlKTtELmZhY2VWZXJ0ZXhVdnNbMF0ucHVzaChjKX12YXIgZz12b2lkIDAhPT1iLmFtb3VudD9iLmFtb3VudDoxMDAsaT12b2lkIDAhPT1iLmJldmVsVGhpY2tuZXNzP2IuYmV2ZWxUaGlja25lc3M6NixrPXZvaWQgMCE9PWIuYmV2ZWxTaXplP2IuYmV2ZWxTaXplOmktMixtPXZvaWQgMCE9PWIuYmV2ZWxTZWdtZW50cz9iLmJldmVsU2VnbWVudHM6MyxsPXZvaWQgMCE9PWIuYmV2ZWxFbmFibGVkP2IuYmV2ZWxFbmFibGVkOiEwLHA9dm9pZCAwIT09Yi5jdXJ2ZVNlZ21lbnRzP2IuY3VydmVTZWdtZW50czoxMix0PXZvaWQgMCE9PWIuc3RlcHM/Yi5zdGVwczoxLHM9Yi5leHRydWRlUGF0aCxxLG49ITEsdT1iLm1hdGVyaWFsLHI9Yi5leHRydWRlTWF0ZXJpYWwsdj12b2lkIDAhPT1iLlVWR2VuZXJhdG9yP2IuVVZHZW5lcmF0b3I6VEhSRUUuRXh0cnVkZUdlb21ldHJ5LldvcmxkVVZHZW5lcmF0b3IseixHLHcseTtzJiYocT1cbnMuZ2V0U3BhY2VkUG9pbnRzKHQpLG49ITAsbD0hMSx6PXZvaWQgMCE9PWIuZnJhbWVzP2IuZnJhbWVzOm5ldyBUSFJFRS5UdWJlR2VvbWV0cnkuRnJlbmV0RnJhbWVzKHMsdCwhMSksRz1uZXcgVEhSRUUuVmVjdG9yMyx3PW5ldyBUSFJFRS5WZWN0b3IzLHk9bmV3IFRIUkVFLlZlY3RvcjMpO2x8fChrPWk9bT0wKTt2YXIgRSxBLEssRD10aGlzLEY9dGhpcy52ZXJ0aWNlcy5sZW5ndGgscD1hLmV4dHJhY3RQb2ludHMocCksTz1wLnNoYXBlLHA9cC5ob2xlcztpZihzPSFUSFJFRS5TaGFwZS5VdGlscy5pc0Nsb2NrV2lzZShPKSl7Tz1PLnJldmVyc2UoKTtBPTA7Zm9yKEs9cC5sZW5ndGg7QTxLO0ErKylFPXBbQV0sVEhSRUUuU2hhcGUuVXRpbHMuaXNDbG9ja1dpc2UoRSkmJihwW0FdPUUucmV2ZXJzZSgpKTtzPSExfXZhciB4PVRIUkVFLlNoYXBlLlV0aWxzLnRyaWFuZ3VsYXRlU2hhcGUoTyxwKSxzPU87QT0wO2ZvcihLPXAubGVuZ3RoO0E8SztBKyspRT1wW0FdLE89Ty5jb25jYXQoRSk7XG52YXIgSSxCLE0sSixjYT1PLmxlbmd0aCxuYT14Lmxlbmd0aCxwYT1bXSxDPTAsUT1zLmxlbmd0aDtJPVEtMTtmb3IoQj1DKzE7QzxRO0MrKyxJKyssQisrKUk9PT1RJiYoST0wKSxCPT09USYmKEI9MCkscGFbQ109ZChzW0NdLHNbSV0sc1tCXSk7dmFyIFI9W10sTCxkYT1wYS5jb25jYXQoKTtBPTA7Zm9yKEs9cC5sZW5ndGg7QTxLO0ErKyl7RT1wW0FdO0w9W107Qz0wO1E9RS5sZW5ndGg7ST1RLTE7Zm9yKEI9QysxO0M8UTtDKyssSSsrLEIrKylJPT09USYmKEk9MCksQj09PVEmJihCPTApLExbQ109ZChFW0NdLEVbSV0sRVtCXSk7Ui5wdXNoKEwpO2RhPWRhLmNvbmNhdChMKX1mb3IoST0wO0k8bTtJKyspe0U9SS9tO009aSooMS1FKTtCPWsqTWF0aC5zaW4oRSpNYXRoLlBJLzIpO0M9MDtmb3IoUT1zLmxlbmd0aDtDPFE7QysrKUo9YyhzW0NdLHBhW0NdLEIpLGYoSi54LEoueSwtTSk7QT0wO2ZvcihLPXAubGVuZ3RoO0E8SztBKyspe0U9cFtBXTtMPVJbQV07Qz0wO2ZvcihRPUUubGVuZ3RoO0M8XG5RO0MrKylKPWMoRVtDXSxMW0NdLEIpLGYoSi54LEoueSwtTSl9fUI9aztmb3IoQz0wO0M8Y2E7QysrKUo9bD9jKE9bQ10sZGFbQ10sQik6T1tDXSxuPyh3LmNvcHkoei5ub3JtYWxzWzBdKS5tdWx0aXBseVNjYWxhcihKLngpLEcuY29weSh6LmJpbm9ybWFsc1swXSkubXVsdGlwbHlTY2FsYXIoSi55KSx5LmNvcHkocVswXSkuYWRkKHcpLmFkZChHKSxmKHkueCx5LnkseS56KSk6ZihKLngsSi55LDApO2ZvcihFPTE7RTw9dDtFKyspZm9yKEM9MDtDPGNhO0MrKylKPWw/YyhPW0NdLGRhW0NdLEIpOk9bQ10sbj8ody5jb3B5KHoubm9ybWFsc1tFXSkubXVsdGlwbHlTY2FsYXIoSi54KSxHLmNvcHkoei5iaW5vcm1hbHNbRV0pLm11bHRpcGx5U2NhbGFyKEoueSkseS5jb3B5KHFbRV0pLmFkZCh3KS5hZGQoRyksZih5LngseS55LHkueikpOmYoSi54LEoueSxnL3QqRSk7Zm9yKEk9bS0xOzA8PUk7SS0tKXtFPUkvbTtNPWkqKDEtRSk7Qj1rKk1hdGguc2luKEUqTWF0aC5QSS8yKTtDPTA7Zm9yKFE9XG5zLmxlbmd0aDtDPFE7QysrKUo9YyhzW0NdLHBhW0NdLEIpLGYoSi54LEoueSxnK00pO0E9MDtmb3IoSz1wLmxlbmd0aDtBPEs7QSsrKXtFPXBbQV07TD1SW0FdO0M9MDtmb3IoUT1FLmxlbmd0aDtDPFE7QysrKUo9YyhFW0NdLExbQ10sQiksbj9mKEoueCxKLnkrcVt0LTFdLnkscVt0LTFdLngrTSk6ZihKLngsSi55LGcrTSl9fWlmKGwpe2k9MCpjYTtmb3IoQz0wO0M8bmE7QysrKWc9eFtDXSxoKGdbMl0raSxnWzFdK2ksZ1swXStpLCEwKTtpPWNhKih0KzIqbSk7Zm9yKEM9MDtDPG5hO0MrKylnPXhbQ10saChnWzBdK2ksZ1sxXStpLGdbMl0raSwhMSl9ZWxzZXtmb3IoQz0wO0M8bmE7QysrKWc9eFtDXSxoKGdbMl0sZ1sxXSxnWzBdLCEwKTtmb3IoQz0wO0M8bmE7QysrKWc9eFtDXSxoKGdbMF0rY2EqdCxnWzFdK2NhKnQsZ1syXStjYSp0LCExKX1nPTA7ZShzLGcpO2crPXMubGVuZ3RoO0E9MDtmb3IoSz1wLmxlbmd0aDtBPEs7QSsrKUU9cFtBXSxlKEUsZyksZys9RS5sZW5ndGh9O1xuVEhSRUUuRXh0cnVkZUdlb21ldHJ5LldvcmxkVVZHZW5lcmF0b3I9e2dlbmVyYXRlVG9wVVY6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe2I9YS52ZXJ0aWNlc1tlXS54O2U9YS52ZXJ0aWNlc1tlXS55O2M9YS52ZXJ0aWNlc1tmXS54O2Y9YS52ZXJ0aWNlc1tmXS55O3JldHVybltuZXcgVEhSRUUuVmVjdG9yMihhLnZlcnRpY2VzW2RdLngsYS52ZXJ0aWNlc1tkXS55KSxuZXcgVEhSRUUuVmVjdG9yMihiLGUpLG5ldyBUSFJFRS5WZWN0b3IyKGMsZildfSxnZW5lcmF0ZUJvdHRvbVVWOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXtyZXR1cm4gdGhpcy5nZW5lcmF0ZVRvcFVWKGEsYixjLGQsZSxmKX0sZ2VuZXJhdGVTaWRlV2FsbFVWOmZ1bmN0aW9uKGEsYixjLGQsZSxmLGgsZyl7dmFyIGI9YS52ZXJ0aWNlc1tlXS54LGM9YS52ZXJ0aWNlc1tlXS55LGU9YS52ZXJ0aWNlc1tlXS56LGQ9YS52ZXJ0aWNlc1tmXS54LGk9YS52ZXJ0aWNlc1tmXS55LGY9YS52ZXJ0aWNlc1tmXS56LGs9YS52ZXJ0aWNlc1toXS54LFxubT1hLnZlcnRpY2VzW2hdLnksaD1hLnZlcnRpY2VzW2hdLnosbD1hLnZlcnRpY2VzW2ddLngscD1hLnZlcnRpY2VzW2ddLnksYT1hLnZlcnRpY2VzW2ddLno7cmV0dXJuIDAuMDE+TWF0aC5hYnMoYy1pKT9bbmV3IFRIUkVFLlZlY3RvcjIoYiwxLWUpLG5ldyBUSFJFRS5WZWN0b3IyKGQsMS1mKSxuZXcgVEhSRUUuVmVjdG9yMihrLDEtaCksbmV3IFRIUkVFLlZlY3RvcjIobCwxLWEpXTpbbmV3IFRIUkVFLlZlY3RvcjIoYywxLWUpLG5ldyBUSFJFRS5WZWN0b3IyKGksMS1mKSxuZXcgVEhSRUUuVmVjdG9yMihtLDEtaCksbmV3IFRIUkVFLlZlY3RvcjIocCwxLWEpXX19O1RIUkVFLkV4dHJ1ZGVHZW9tZXRyeS5fX3YxPW5ldyBUSFJFRS5WZWN0b3IyO1RIUkVFLkV4dHJ1ZGVHZW9tZXRyeS5fX3YyPW5ldyBUSFJFRS5WZWN0b3IyO1RIUkVFLkV4dHJ1ZGVHZW9tZXRyeS5fX3YzPW5ldyBUSFJFRS5WZWN0b3IyO1RIUkVFLkV4dHJ1ZGVHZW9tZXRyeS5fX3Y0PW5ldyBUSFJFRS5WZWN0b3IyO1xuVEhSRUUuRXh0cnVkZUdlb21ldHJ5Ll9fdjU9bmV3IFRIUkVFLlZlY3RvcjI7VEhSRUUuRXh0cnVkZUdlb21ldHJ5Ll9fdjY9bmV3IFRIUkVFLlZlY3RvcjI7VEhSRUUuU2hhcGVHZW9tZXRyeT1mdW5jdGlvbihhLGIpe1RIUkVFLkdlb21ldHJ5LmNhbGwodGhpcyk7ITE9PT1hIGluc3RhbmNlb2YgQXJyYXkmJihhPVthXSk7dGhpcy5zaGFwZWJiPWFbYS5sZW5ndGgtMV0uZ2V0Qm91bmRpbmdCb3goKTt0aGlzLmFkZFNoYXBlTGlzdChhLGIpO3RoaXMuY29tcHV0ZUNlbnRyb2lkcygpO3RoaXMuY29tcHV0ZUZhY2VOb3JtYWxzKCl9O1RIUkVFLlNoYXBlR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5TaGFwZUdlb21ldHJ5LnByb3RvdHlwZS5hZGRTaGFwZUxpc3Q9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2M8ZDtjKyspdGhpcy5hZGRTaGFwZShhW2NdLGIpO3JldHVybiB0aGlzfTtcblRIUkVFLlNoYXBlR2VvbWV0cnkucHJvdG90eXBlLmFkZFNoYXBlPWZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9e30pO3ZhciBjPWIubWF0ZXJpYWwsZD12b2lkIDA9PT1iLlVWR2VuZXJhdG9yP1RIUkVFLkV4dHJ1ZGVHZW9tZXRyeS5Xb3JsZFVWR2VuZXJhdG9yOmIuVVZHZW5lcmF0b3IsZSxmLGgsZz10aGlzLnZlcnRpY2VzLmxlbmd0aDtlPWEuZXh0cmFjdFBvaW50cyh2b2lkIDAhPT1iLmN1cnZlU2VnbWVudHM/Yi5jdXJ2ZVNlZ21lbnRzOjEyKTt2YXIgaT1lLnNoYXBlLGs9ZS5ob2xlcztpZighVEhSRUUuU2hhcGUuVXRpbHMuaXNDbG9ja1dpc2UoaSkpe2k9aS5yZXZlcnNlKCk7ZT0wO2ZvcihmPWsubGVuZ3RoO2U8ZjtlKyspaD1rW2VdLFRIUkVFLlNoYXBlLlV0aWxzLmlzQ2xvY2tXaXNlKGgpJiYoa1tlXT1oLnJldmVyc2UoKSl9dmFyIG09VEhSRUUuU2hhcGUuVXRpbHMudHJpYW5ndWxhdGVTaGFwZShpLGspO2U9MDtmb3IoZj1rLmxlbmd0aDtlPGY7ZSsrKWg9a1tlXSxcbmk9aS5jb25jYXQoaCk7az1pLmxlbmd0aDtmPW0ubGVuZ3RoO2ZvcihlPTA7ZTxrO2UrKyloPWlbZV0sdGhpcy52ZXJ0aWNlcy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IzKGgueCxoLnksMCkpO2ZvcihlPTA7ZTxmO2UrKylrPW1bZV0saT1rWzBdK2csaD1rWzFdK2csaz1rWzJdK2csdGhpcy5mYWNlcy5wdXNoKG5ldyBUSFJFRS5GYWNlMyhpLGgsayxudWxsLG51bGwsYykpLHRoaXMuZmFjZVZlcnRleFV2c1swXS5wdXNoKGQuZ2VuZXJhdGVCb3R0b21VVih0aGlzLGEsYixpLGgsaykpfTtUSFJFRS5MYXRoZUdlb21ldHJ5PWZ1bmN0aW9uKGEsYixjLGQpe1RIUkVFLkdlb21ldHJ5LmNhbGwodGhpcyk7Zm9yKHZhciBiPWJ8fDEyLGM9Y3x8MCxkPWR8fDIqTWF0aC5QSSxlPTEvKGEubGVuZ3RoLTEpLGY9MS9iLGg9MCxnPWI7aDw9ZztoKyspZm9yKHZhciBpPWMraCpmKmQsaz1NYXRoLmNvcyhpKSxtPU1hdGguc2luKGkpLGk9MCxsPWEubGVuZ3RoO2k8bDtpKyspe3ZhciBwPWFbaV0sdD1uZXcgVEhSRUUuVmVjdG9yMzt0Lng9aypwLngtbSpwLnk7dC55PW0qcC54K2sqcC55O3Quej1wLno7dGhpcy52ZXJ0aWNlcy5wdXNoKHQpfWM9YS5sZW5ndGg7aD0wO2ZvcihnPWI7aDxnO2grKyl7aT0wO2ZvcihsPWEubGVuZ3RoLTE7aTxsO2krKyl7dmFyIGI9bT1pK2MqaCxkPW0rYyxrPW0rMStjLG09bSsxLHA9aCpmLHQ9aSplLHM9cCtmLHE9dCtlO3RoaXMuZmFjZXMucHVzaChuZXcgVEhSRUUuRmFjZTMoYixkLG0pKTt0aGlzLmZhY2VWZXJ0ZXhVdnNbMF0ucHVzaChbbmV3IFRIUkVFLlZlY3RvcjIocCxcbnQpLG5ldyBUSFJFRS5WZWN0b3IyKHMsdCksbmV3IFRIUkVFLlZlY3RvcjIocCxxKV0pO3RoaXMuZmFjZXMucHVzaChuZXcgVEhSRUUuRmFjZTMoZCxrLG0pKTt0aGlzLmZhY2VWZXJ0ZXhVdnNbMF0ucHVzaChbbmV3IFRIUkVFLlZlY3RvcjIocyx0KSxuZXcgVEhSRUUuVmVjdG9yMihzLHEpLG5ldyBUSFJFRS5WZWN0b3IyKHAscSldKX19dGhpcy5tZXJnZVZlcnRpY2VzKCk7dGhpcy5jb21wdXRlQ2VudHJvaWRzKCk7dGhpcy5jb21wdXRlRmFjZU5vcm1hbHMoKTt0aGlzLmNvbXB1dGVWZXJ0ZXhOb3JtYWxzKCl9O1RIUkVFLkxhdGhlR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5QbGFuZUdlb21ldHJ5PWZ1bmN0aW9uKGEsYixjLGQpe1RIUkVFLkdlb21ldHJ5LmNhbGwodGhpcyk7dGhpcy53aWR0aD1hO3RoaXMuaGVpZ2h0PWI7dGhpcy53aWR0aFNlZ21lbnRzPWN8fDE7dGhpcy5oZWlnaHRTZWdtZW50cz1kfHwxO2Zvcih2YXIgZT1hLzIsZj1iLzIsYz10aGlzLndpZHRoU2VnbWVudHMsZD10aGlzLmhlaWdodFNlZ21lbnRzLGg9YysxLGc9ZCsxLGk9dGhpcy53aWR0aC9jLGs9dGhpcy5oZWlnaHQvZCxtPW5ldyBUSFJFRS5WZWN0b3IzKDAsMCwxKSxhPTA7YTxnO2ErKylmb3IoYj0wO2I8aDtiKyspdGhpcy52ZXJ0aWNlcy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IzKGIqaS1lLC0oYSprLWYpLDApKTtmb3IoYT0wO2E8ZDthKyspZm9yKGI9MDtiPGM7YisrKXt2YXIgbD1iK2gqYSxlPWIraCooYSsxKSxmPWIrMStoKihhKzEpLGc9YisxK2gqYSxpPW5ldyBUSFJFRS5WZWN0b3IyKGIvYywxLWEvZCksaz1uZXcgVEhSRUUuVmVjdG9yMihiL2MsMS0oYSsxKS9cbmQpLHA9bmV3IFRIUkVFLlZlY3RvcjIoKGIrMSkvYywxLShhKzEpL2QpLHQ9bmV3IFRIUkVFLlZlY3RvcjIoKGIrMSkvYywxLWEvZCksbD1uZXcgVEhSRUUuRmFjZTMobCxlLGcpO2wubm9ybWFsLmNvcHkobSk7bC52ZXJ0ZXhOb3JtYWxzLnB1c2gobS5jbG9uZSgpLG0uY2xvbmUoKSxtLmNsb25lKCkpO3RoaXMuZmFjZXMucHVzaChsKTt0aGlzLmZhY2VWZXJ0ZXhVdnNbMF0ucHVzaChbaSxrLHRdKTtsPW5ldyBUSFJFRS5GYWNlMyhlLGYsZyk7bC5ub3JtYWwuY29weShtKTtsLnZlcnRleE5vcm1hbHMucHVzaChtLmNsb25lKCksbS5jbG9uZSgpLG0uY2xvbmUoKSk7dGhpcy5mYWNlcy5wdXNoKGwpO3RoaXMuZmFjZVZlcnRleFV2c1swXS5wdXNoKFtrLmNsb25lKCkscCx0LmNsb25lKCldKX10aGlzLmNvbXB1dGVDZW50cm9pZHMoKX07VEhSRUUuUGxhbmVHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5HZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLlJpbmdHZW9tZXRyeT1mdW5jdGlvbihhLGIsYyxkLGUsZil7VEhSRUUuR2VvbWV0cnkuY2FsbCh0aGlzKTtmb3IodmFyIGE9YXx8MCxiPWJ8fDUwLGU9dm9pZCAwIT09ZT9lOjAsZj12b2lkIDAhPT1mP2Y6MipNYXRoLlBJLGM9dm9pZCAwIT09Yz9NYXRoLm1heCgzLGMpOjgsZD12b2lkIDAhPT1kP01hdGgubWF4KDMsZCk6OCxoLGc9W10saT1hLGs9KGItYSkvZCxhPTA7YTw9ZDthKyspe2ZvcihoPTA7aDw9YztoKyspe3ZhciBtPW5ldyBUSFJFRS5WZWN0b3IzLGw9ZStoL2MqZjttLng9aSpNYXRoLmNvcyhsKTttLnk9aSpNYXRoLnNpbihsKTt0aGlzLnZlcnRpY2VzLnB1c2gobSk7Zy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IyKChtLngvYisxKS8yLChtLnkvYisxKS8yKSl9aSs9a31iPW5ldyBUSFJFRS5WZWN0b3IzKDAsMCwxKTtmb3IoYT0wO2E8ZDthKyspe2U9YSpjO2ZvcihoPTA7aDw9YztoKyspbD1oK2UsZj1sK2Esaz1sK2MrYSxtPWwrYysxK2EsdGhpcy5mYWNlcy5wdXNoKG5ldyBUSFJFRS5GYWNlMyhmLFxuayxtLFtiLmNsb25lKCksYi5jbG9uZSgpLGIuY2xvbmUoKV0pKSx0aGlzLmZhY2VWZXJ0ZXhVdnNbMF0ucHVzaChbZ1tmXS5jbG9uZSgpLGdba10uY2xvbmUoKSxnW21dLmNsb25lKCldKSxmPWwrYSxrPWwrYysxK2EsbT1sKzErYSx0aGlzLmZhY2VzLnB1c2gobmV3IFRIUkVFLkZhY2UzKGYsayxtLFtiLmNsb25lKCksYi5jbG9uZSgpLGIuY2xvbmUoKV0pKSx0aGlzLmZhY2VWZXJ0ZXhVdnNbMF0ucHVzaChbZ1tmXS5jbG9uZSgpLGdba10uY2xvbmUoKSxnW21dLmNsb25lKCldKX10aGlzLmNvbXB1dGVDZW50cm9pZHMoKTt0aGlzLmNvbXB1dGVGYWNlTm9ybWFscygpO3RoaXMuYm91bmRpbmdTcGhlcmU9bmV3IFRIUkVFLlNwaGVyZShuZXcgVEhSRUUuVmVjdG9yMyxpKX07VEhSRUUuUmluZ0dlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuU3BoZXJlR2VvbWV0cnk9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsaCl7VEhSRUUuR2VvbWV0cnkuY2FsbCh0aGlzKTt0aGlzLnJhZGl1cz1hPWF8fDUwO3RoaXMud2lkdGhTZWdtZW50cz1iPU1hdGgubWF4KDMsTWF0aC5mbG9vcihiKXx8OCk7dGhpcy5oZWlnaHRTZWdtZW50cz1jPU1hdGgubWF4KDIsTWF0aC5mbG9vcihjKXx8Nik7dGhpcy5waGlTdGFydD1kPXZvaWQgMCE9PWQ/ZDowO3RoaXMucGhpTGVuZ3RoPWU9dm9pZCAwIT09ZT9lOjIqTWF0aC5QSTt0aGlzLnRoZXRhU3RhcnQ9Zj12b2lkIDAhPT1mP2Y6MDt0aGlzLnRoZXRhTGVuZ3RoPWg9dm9pZCAwIT09aD9oOk1hdGguUEk7dmFyIGcsaSxrPVtdLG09W107Zm9yKGk9MDtpPD1jO2krKyl7dmFyIGw9W10scD1bXTtmb3IoZz0wO2c8PWI7ZysrKXt2YXIgdD1nL2Iscz1pL2MscT1uZXcgVEhSRUUuVmVjdG9yMztxLng9LWEqTWF0aC5jb3MoZCt0KmUpKk1hdGguc2luKGYrcypoKTtxLnk9YSpNYXRoLmNvcyhmK3MqaCk7XG5xLno9YSpNYXRoLnNpbihkK3QqZSkqTWF0aC5zaW4oZitzKmgpO3RoaXMudmVydGljZXMucHVzaChxKTtsLnB1c2godGhpcy52ZXJ0aWNlcy5sZW5ndGgtMSk7cC5wdXNoKG5ldyBUSFJFRS5WZWN0b3IyKHQsMS1zKSl9ay5wdXNoKGwpO20ucHVzaChwKX1mb3IoaT0wO2k8dGhpcy5oZWlnaHRTZWdtZW50cztpKyspZm9yKGc9MDtnPHRoaXMud2lkdGhTZWdtZW50cztnKyspe3ZhciBiPWtbaV1bZysxXSxjPWtbaV1bZ10sZD1rW2krMV1bZ10sZT1rW2krMV1bZysxXSxmPXRoaXMudmVydGljZXNbYl0uY2xvbmUoKS5ub3JtYWxpemUoKSxoPXRoaXMudmVydGljZXNbY10uY2xvbmUoKS5ub3JtYWxpemUoKSxsPXRoaXMudmVydGljZXNbZF0uY2xvbmUoKS5ub3JtYWxpemUoKSxwPXRoaXMudmVydGljZXNbZV0uY2xvbmUoKS5ub3JtYWxpemUoKSx0PW1baV1bZysxXS5jbG9uZSgpLHM9bVtpXVtnXS5jbG9uZSgpLHE9bVtpKzFdW2ddLmNsb25lKCksbj1tW2krMV1bZysxXS5jbG9uZSgpO01hdGguYWJzKHRoaXMudmVydGljZXNbYl0ueSk9PT1cbnRoaXMucmFkaXVzPyh0Lng9KHQueCtzLngpLzIsdGhpcy5mYWNlcy5wdXNoKG5ldyBUSFJFRS5GYWNlMyhiLGQsZSxbZixsLHBdKSksdGhpcy5mYWNlVmVydGV4VXZzWzBdLnB1c2goW3QscSxuXSkpOk1hdGguYWJzKHRoaXMudmVydGljZXNbZF0ueSk9PT10aGlzLnJhZGl1cz8ocS54PShxLngrbi54KS8yLHRoaXMuZmFjZXMucHVzaChuZXcgVEhSRUUuRmFjZTMoYixjLGQsW2YsaCxsXSkpLHRoaXMuZmFjZVZlcnRleFV2c1swXS5wdXNoKFt0LHMscV0pKToodGhpcy5mYWNlcy5wdXNoKG5ldyBUSFJFRS5GYWNlMyhiLGMsZSxbZixoLHBdKSksdGhpcy5mYWNlVmVydGV4VXZzWzBdLnB1c2goW3QscyxuXSksdGhpcy5mYWNlcy5wdXNoKG5ldyBUSFJFRS5GYWNlMyhjLGQsZSxbaC5jbG9uZSgpLGwscC5jbG9uZSgpXSkpLHRoaXMuZmFjZVZlcnRleFV2c1swXS5wdXNoKFtzLmNsb25lKCkscSxuLmNsb25lKCldKSl9dGhpcy5jb21wdXRlQ2VudHJvaWRzKCk7dGhpcy5jb21wdXRlRmFjZU5vcm1hbHMoKTtcbnRoaXMuYm91bmRpbmdTcGhlcmU9bmV3IFRIUkVFLlNwaGVyZShuZXcgVEhSRUUuVmVjdG9yMyxhKX07VEhSRUUuU3BoZXJlR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5UZXh0R2VvbWV0cnk9ZnVuY3Rpb24oYSxiKXt2YXIgYj1ifHx7fSxjPVRIUkVFLkZvbnRVdGlscy5nZW5lcmF0ZVNoYXBlcyhhLGIpO2IuYW1vdW50PXZvaWQgMCE9PWIuaGVpZ2h0P2IuaGVpZ2h0OjUwO3ZvaWQgMD09PWIuYmV2ZWxUaGlja25lc3MmJihiLmJldmVsVGhpY2tuZXNzPTEwKTt2b2lkIDA9PT1iLmJldmVsU2l6ZSYmKGIuYmV2ZWxTaXplPTgpO3ZvaWQgMD09PWIuYmV2ZWxFbmFibGVkJiYoYi5iZXZlbEVuYWJsZWQ9ITEpO1RIUkVFLkV4dHJ1ZGVHZW9tZXRyeS5jYWxsKHRoaXMsYyxiKX07VEhSRUUuVGV4dEdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkV4dHJ1ZGVHZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLlRvcnVzR2VvbWV0cnk9ZnVuY3Rpb24oYSxiLGMsZCxlKXtUSFJFRS5HZW9tZXRyeS5jYWxsKHRoaXMpO3RoaXMucmFkaXVzPWF8fDEwMDt0aGlzLnR1YmU9Ynx8NDA7dGhpcy5yYWRpYWxTZWdtZW50cz1jfHw4O3RoaXMudHVidWxhclNlZ21lbnRzPWR8fDY7dGhpcy5hcmM9ZXx8MipNYXRoLlBJO2U9bmV3IFRIUkVFLlZlY3RvcjM7YT1bXTtiPVtdO2ZvcihjPTA7Yzw9dGhpcy5yYWRpYWxTZWdtZW50cztjKyspZm9yKGQ9MDtkPD10aGlzLnR1YnVsYXJTZWdtZW50cztkKyspe3ZhciBmPWQvdGhpcy50dWJ1bGFyU2VnbWVudHMqdGhpcy5hcmMsaD0yKmMvdGhpcy5yYWRpYWxTZWdtZW50cypNYXRoLlBJO2UueD10aGlzLnJhZGl1cypNYXRoLmNvcyhmKTtlLnk9dGhpcy5yYWRpdXMqTWF0aC5zaW4oZik7dmFyIGc9bmV3IFRIUkVFLlZlY3RvcjM7Zy54PSh0aGlzLnJhZGl1cyt0aGlzLnR1YmUqTWF0aC5jb3MoaCkpKk1hdGguY29zKGYpO2cueT0odGhpcy5yYWRpdXMrdGhpcy50dWJlKlxuTWF0aC5jb3MoaCkpKk1hdGguc2luKGYpO2cuej10aGlzLnR1YmUqTWF0aC5zaW4oaCk7dGhpcy52ZXJ0aWNlcy5wdXNoKGcpO2EucHVzaChuZXcgVEhSRUUuVmVjdG9yMihkL3RoaXMudHVidWxhclNlZ21lbnRzLGMvdGhpcy5yYWRpYWxTZWdtZW50cykpO2IucHVzaChnLmNsb25lKCkuc3ViKGUpLm5vcm1hbGl6ZSgpKX1mb3IoYz0xO2M8PXRoaXMucmFkaWFsU2VnbWVudHM7YysrKWZvcihkPTE7ZDw9dGhpcy50dWJ1bGFyU2VnbWVudHM7ZCsrKXt2YXIgZT0odGhpcy50dWJ1bGFyU2VnbWVudHMrMSkqYytkLTEsZj0odGhpcy50dWJ1bGFyU2VnbWVudHMrMSkqKGMtMSkrZC0xLGg9KHRoaXMudHVidWxhclNlZ21lbnRzKzEpKihjLTEpK2QsZz0odGhpcy50dWJ1bGFyU2VnbWVudHMrMSkqYytkLGk9bmV3IFRIUkVFLkZhY2UzKGUsZixnLFtiW2VdLGJbZl0sYltnXV0pO2kubm9ybWFsLmFkZChiW2VdKTtpLm5vcm1hbC5hZGQoYltmXSk7aS5ub3JtYWwuYWRkKGJbZ10pO2kubm9ybWFsLm5vcm1hbGl6ZSgpO1xudGhpcy5mYWNlcy5wdXNoKGkpO3RoaXMuZmFjZVZlcnRleFV2c1swXS5wdXNoKFthW2VdLmNsb25lKCksYVtmXS5jbG9uZSgpLGFbZ10uY2xvbmUoKV0pO2k9bmV3IFRIUkVFLkZhY2UzKGYsaCxnLFtiW2ZdLGJbaF0sYltnXV0pO2kubm9ybWFsLmFkZChiW2ZdKTtpLm5vcm1hbC5hZGQoYltoXSk7aS5ub3JtYWwuYWRkKGJbZ10pO2kubm9ybWFsLm5vcm1hbGl6ZSgpO3RoaXMuZmFjZXMucHVzaChpKTt0aGlzLmZhY2VWZXJ0ZXhVdnNbMF0ucHVzaChbYVtmXS5jbG9uZSgpLGFbaF0uY2xvbmUoKSxhW2ddLmNsb25lKCldKX10aGlzLmNvbXB1dGVDZW50cm9pZHMoKX07VEhSRUUuVG9ydXNHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5HZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLlRvcnVzS25vdEdlb21ldHJ5PWZ1bmN0aW9uKGEsYixjLGQsZSxmLGgpe2Z1bmN0aW9uIGcoYSxiLGMsZCxlKXt2YXIgZj1NYXRoLmNvcyhhKSxnPU1hdGguc2luKGEpLGE9Yi9jKmEsYj1NYXRoLmNvcyhhKSxmPTAuNSooZCooMitiKSkqZixnPTAuNSpkKigyK2IpKmcsZD0wLjUqZSpkKk1hdGguc2luKGEpO3JldHVybiBuZXcgVEhSRUUuVmVjdG9yMyhmLGcsZCl9VEhSRUUuR2VvbWV0cnkuY2FsbCh0aGlzKTt0aGlzLnJhZGl1cz1hfHwxMDA7dGhpcy50dWJlPWJ8fDQwO3RoaXMucmFkaWFsU2VnbWVudHM9Y3x8NjQ7dGhpcy50dWJ1bGFyU2VnbWVudHM9ZHx8ODt0aGlzLnA9ZXx8Mjt0aGlzLnE9Znx8Mzt0aGlzLmhlaWdodFNjYWxlPWh8fDE7dGhpcy5ncmlkPUFycmF5KHRoaXMucmFkaWFsU2VnbWVudHMpO2M9bmV3IFRIUkVFLlZlY3RvcjM7ZD1uZXcgVEhSRUUuVmVjdG9yMztlPW5ldyBUSFJFRS5WZWN0b3IzO2ZvcihhPTA7YTx0aGlzLnJhZGlhbFNlZ21lbnRzOysrYSl7dGhpcy5ncmlkW2FdPVxuQXJyYXkodGhpcy50dWJ1bGFyU2VnbWVudHMpO2I9MiooYS90aGlzLnJhZGlhbFNlZ21lbnRzKSp0aGlzLnAqTWF0aC5QSTtmPWcoYix0aGlzLnEsdGhpcy5wLHRoaXMucmFkaXVzLHRoaXMuaGVpZ2h0U2NhbGUpO2I9ZyhiKzAuMDEsdGhpcy5xLHRoaXMucCx0aGlzLnJhZGl1cyx0aGlzLmhlaWdodFNjYWxlKTtjLnN1YlZlY3RvcnMoYixmKTtkLmFkZFZlY3RvcnMoYixmKTtlLmNyb3NzVmVjdG9ycyhjLGQpO2QuY3Jvc3NWZWN0b3JzKGUsYyk7ZS5ub3JtYWxpemUoKTtkLm5vcm1hbGl6ZSgpO2ZvcihiPTA7Yjx0aGlzLnR1YnVsYXJTZWdtZW50czsrK2Ipe3ZhciBpPTIqKGIvdGhpcy50dWJ1bGFyU2VnbWVudHMpKk1hdGguUEksaD0tdGhpcy50dWJlKk1hdGguY29zKGkpLGk9dGhpcy50dWJlKk1hdGguc2luKGkpLGs9bmV3IFRIUkVFLlZlY3RvcjM7ay54PWYueCtoKmQueCtpKmUueDtrLnk9Zi55K2gqZC55K2kqZS55O2suej1mLnoraCpkLnoraSplLno7dGhpcy5ncmlkW2FdW2JdPVxudGhpcy52ZXJ0aWNlcy5wdXNoKGspLTF9fWZvcihhPTA7YTx0aGlzLnJhZGlhbFNlZ21lbnRzOysrYSlmb3IoYj0wO2I8dGhpcy50dWJ1bGFyU2VnbWVudHM7KytiKXt2YXIgZT0oYSsxKSV0aGlzLnJhZGlhbFNlZ21lbnRzLGY9KGIrMSkldGhpcy50dWJ1bGFyU2VnbWVudHMsYz10aGlzLmdyaWRbYV1bYl0sZD10aGlzLmdyaWRbZV1bYl0sZT10aGlzLmdyaWRbZV1bZl0sZj10aGlzLmdyaWRbYV1bZl0saD1uZXcgVEhSRUUuVmVjdG9yMihhL3RoaXMucmFkaWFsU2VnbWVudHMsYi90aGlzLnR1YnVsYXJTZWdtZW50cyksaT1uZXcgVEhSRUUuVmVjdG9yMigoYSsxKS90aGlzLnJhZGlhbFNlZ21lbnRzLGIvdGhpcy50dWJ1bGFyU2VnbWVudHMpLGs9bmV3IFRIUkVFLlZlY3RvcjIoKGErMSkvdGhpcy5yYWRpYWxTZWdtZW50cywoYisxKS90aGlzLnR1YnVsYXJTZWdtZW50cyksbT1uZXcgVEhSRUUuVmVjdG9yMihhL3RoaXMucmFkaWFsU2VnbWVudHMsKGIrMSkvdGhpcy50dWJ1bGFyU2VnbWVudHMpO1xudGhpcy5mYWNlcy5wdXNoKG5ldyBUSFJFRS5GYWNlMyhjLGQsZikpO3RoaXMuZmFjZVZlcnRleFV2c1swXS5wdXNoKFtoLGksbV0pO3RoaXMuZmFjZXMucHVzaChuZXcgVEhSRUUuRmFjZTMoZCxlLGYpKTt0aGlzLmZhY2VWZXJ0ZXhVdnNbMF0ucHVzaChbaS5jbG9uZSgpLGssbS5jbG9uZSgpXSl9dGhpcy5jb21wdXRlQ2VudHJvaWRzKCk7dGhpcy5jb21wdXRlRmFjZU5vcm1hbHMoKTt0aGlzLmNvbXB1dGVWZXJ0ZXhOb3JtYWxzKCl9O1RIUkVFLlRvcnVzS25vdEdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuVHViZUdlb21ldHJ5PWZ1bmN0aW9uKGEsYixjLGQsZSl7VEhSRUUuR2VvbWV0cnkuY2FsbCh0aGlzKTt0aGlzLnBhdGg9YTt0aGlzLnNlZ21lbnRzPWJ8fDY0O3RoaXMucmFkaXVzPWN8fDE7dGhpcy5yYWRpYWxTZWdtZW50cz1kfHw4O3RoaXMuY2xvc2VkPWV8fCExO3RoaXMuZ3JpZD1bXTt2YXIgZixoLGQ9dGhpcy5zZWdtZW50cysxLGcsaSxrLGU9bmV3IFRIUkVFLlZlY3RvcjMsbSxsLGI9bmV3IFRIUkVFLlR1YmVHZW9tZXRyeS5GcmVuZXRGcmFtZXModGhpcy5wYXRoLHRoaXMuc2VnbWVudHMsdGhpcy5jbG9zZWQpO209Yi5ub3JtYWxzO2w9Yi5iaW5vcm1hbHM7dGhpcy50YW5nZW50cz1iLnRhbmdlbnRzO3RoaXMubm9ybWFscz1tO3RoaXMuYmlub3JtYWxzPWw7Zm9yKGI9MDtiPGQ7YisrKXt0aGlzLmdyaWRbYl09W107Yz1iLyhkLTEpO2s9YS5nZXRQb2ludEF0KGMpO2Y9bVtiXTtoPWxbYl07Zm9yKGM9MDtjPHRoaXMucmFkaWFsU2VnbWVudHM7YysrKWc9MiooYy90aGlzLnJhZGlhbFNlZ21lbnRzKSpcbk1hdGguUEksaT0tdGhpcy5yYWRpdXMqTWF0aC5jb3MoZyksZz10aGlzLnJhZGl1cypNYXRoLnNpbihnKSxlLmNvcHkoayksZS54Kz1pKmYueCtnKmgueCxlLnkrPWkqZi55K2cqaC55LGUueis9aSpmLnorZypoLnosdGhpcy5ncmlkW2JdW2NdPXRoaXMudmVydGljZXMucHVzaChuZXcgVEhSRUUuVmVjdG9yMyhlLngsZS55LGUueikpLTF9Zm9yKGI9MDtiPHRoaXMuc2VnbWVudHM7YisrKWZvcihjPTA7Yzx0aGlzLnJhZGlhbFNlZ21lbnRzO2MrKyllPXRoaXMuY2xvc2VkPyhiKzEpJXRoaXMuc2VnbWVudHM6YisxLG09KGMrMSkldGhpcy5yYWRpYWxTZWdtZW50cyxhPXRoaXMuZ3JpZFtiXVtjXSxkPXRoaXMuZ3JpZFtlXVtjXSxlPXRoaXMuZ3JpZFtlXVttXSxtPXRoaXMuZ3JpZFtiXVttXSxsPW5ldyBUSFJFRS5WZWN0b3IyKGIvdGhpcy5zZWdtZW50cyxjL3RoaXMucmFkaWFsU2VnbWVudHMpLGY9bmV3IFRIUkVFLlZlY3RvcjIoKGIrMSkvdGhpcy5zZWdtZW50cyxjL3RoaXMucmFkaWFsU2VnbWVudHMpLFxuaD1uZXcgVEhSRUUuVmVjdG9yMigoYisxKS90aGlzLnNlZ21lbnRzLChjKzEpL3RoaXMucmFkaWFsU2VnbWVudHMpLGk9bmV3IFRIUkVFLlZlY3RvcjIoYi90aGlzLnNlZ21lbnRzLChjKzEpL3RoaXMucmFkaWFsU2VnbWVudHMpLHRoaXMuZmFjZXMucHVzaChuZXcgVEhSRUUuRmFjZTMoYSxkLG0pKSx0aGlzLmZhY2VWZXJ0ZXhVdnNbMF0ucHVzaChbbCxmLGldKSx0aGlzLmZhY2VzLnB1c2gobmV3IFRIUkVFLkZhY2UzKGQsZSxtKSksdGhpcy5mYWNlVmVydGV4VXZzWzBdLnB1c2goW2YuY2xvbmUoKSxoLGkuY2xvbmUoKV0pO3RoaXMuY29tcHV0ZUNlbnRyb2lkcygpO3RoaXMuY29tcHV0ZUZhY2VOb3JtYWxzKCk7dGhpcy5jb21wdXRlVmVydGV4Tm9ybWFscygpfTtUSFJFRS5UdWJlR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuR2VvbWV0cnkucHJvdG90eXBlKTtcblRIUkVFLlR1YmVHZW9tZXRyeS5GcmVuZXRGcmFtZXM9ZnVuY3Rpb24oYSxiLGMpe25ldyBUSFJFRS5WZWN0b3IzO3ZhciBkPW5ldyBUSFJFRS5WZWN0b3IzO25ldyBUSFJFRS5WZWN0b3IzO3ZhciBlPVtdLGY9W10saD1bXSxnPW5ldyBUSFJFRS5WZWN0b3IzLGk9bmV3IFRIUkVFLk1hdHJpeDQsYj1iKzEsayxtLGw7dGhpcy50YW5nZW50cz1lO3RoaXMubm9ybWFscz1mO3RoaXMuYmlub3JtYWxzPWg7Zm9yKGs9MDtrPGI7aysrKW09ay8oYi0xKSxlW2tdPWEuZ2V0VGFuZ2VudEF0KG0pLGVba10ubm9ybWFsaXplKCk7ZlswXT1uZXcgVEhSRUUuVmVjdG9yMztoWzBdPW5ldyBUSFJFRS5WZWN0b3IzO2E9TnVtYmVyLk1BWF9WQUxVRTtrPU1hdGguYWJzKGVbMF0ueCk7bT1NYXRoLmFicyhlWzBdLnkpO2w9TWF0aC5hYnMoZVswXS56KTtrPD1hJiYoYT1rLGQuc2V0KDEsMCwwKSk7bTw9YSYmKGE9bSxkLnNldCgwLDEsMCkpO2w8PWEmJmQuc2V0KDAsMCwxKTtnLmNyb3NzVmVjdG9ycyhlWzBdLFxuZCkubm9ybWFsaXplKCk7ZlswXS5jcm9zc1ZlY3RvcnMoZVswXSxnKTtoWzBdLmNyb3NzVmVjdG9ycyhlWzBdLGZbMF0pO2ZvcihrPTE7azxiO2srKylmW2tdPWZbay0xXS5jbG9uZSgpLGhba109aFtrLTFdLmNsb25lKCksZy5jcm9zc1ZlY3RvcnMoZVtrLTFdLGVba10pLDFFLTQ8Zy5sZW5ndGgoKSYmKGcubm9ybWFsaXplKCksZD1NYXRoLmFjb3MoVEhSRUUuTWF0aC5jbGFtcChlW2stMV0uZG90KGVba10pLC0xLDEpKSxmW2tdLmFwcGx5TWF0cml4NChpLm1ha2VSb3RhdGlvbkF4aXMoZyxkKSkpLGhba10uY3Jvc3NWZWN0b3JzKGVba10sZltrXSk7aWYoYyl7ZD1NYXRoLmFjb3MoVEhSRUUuTWF0aC5jbGFtcChmWzBdLmRvdChmW2ItMV0pLC0xLDEpKTtkLz1iLTE7MDxlWzBdLmRvdChnLmNyb3NzVmVjdG9ycyhmWzBdLGZbYi0xXSkpJiYoZD0tZCk7Zm9yKGs9MTtrPGI7aysrKWZba10uYXBwbHlNYXRyaXg0KGkubWFrZVJvdGF0aW9uQXhpcyhlW2tdLGQqaykpLGhba10uY3Jvc3NWZWN0b3JzKGVba10sXG5mW2tdKX19O1RIUkVFLlBvbHloZWRyb25HZW9tZXRyeT1mdW5jdGlvbihhLGIsYyxkKXtmdW5jdGlvbiBlKGEpe3ZhciBiPWEubm9ybWFsaXplKCkuY2xvbmUoKTtiLmluZGV4PWcudmVydGljZXMucHVzaChiKS0xO3ZhciBjPU1hdGguYXRhbjIoYS56LC1hLngpLzIvTWF0aC5QSSswLjUsYT1NYXRoLmF0YW4yKC1hLnksTWF0aC5zcXJ0KGEueCphLngrYS56KmEueikpL01hdGguUEkrMC41O2IudXY9bmV3IFRIUkVFLlZlY3RvcjIoYywxLWEpO3JldHVybiBifWZ1bmN0aW9uIGYoYSxiLGMpe3ZhciBkPW5ldyBUSFJFRS5GYWNlMyhhLmluZGV4LGIuaW5kZXgsYy5pbmRleCxbYS5jbG9uZSgpLGIuY2xvbmUoKSxjLmNsb25lKCldKTtkLmNlbnRyb2lkLmFkZChhKS5hZGQoYikuYWRkKGMpLmRpdmlkZVNjYWxhcigzKTtnLmZhY2VzLnB1c2goZCk7ZD1NYXRoLmF0YW4yKGQuY2VudHJvaWQueiwtZC5jZW50cm9pZC54KTtnLmZhY2VWZXJ0ZXhVdnNbMF0ucHVzaChbaChhLnV2LGEsZCksaChiLnV2LGIsZCksXG5oKGMudXYsYyxkKV0pfWZ1bmN0aW9uIGgoYSxiLGMpezA+YyYmMT09PWEueCYmKGE9bmV3IFRIUkVFLlZlY3RvcjIoYS54LTEsYS55KSk7MD09PWIueCYmMD09PWIueiYmKGE9bmV3IFRIUkVFLlZlY3RvcjIoYy8yL01hdGguUEkrMC41LGEueSkpO3JldHVybiBhLmNsb25lKCl9VEhSRUUuR2VvbWV0cnkuY2FsbCh0aGlzKTtmb3IodmFyIGM9Y3x8MSxkPWR8fDAsZz10aGlzLGk9MCxrPWEubGVuZ3RoO2k8aztpKyspZShuZXcgVEhSRUUuVmVjdG9yMyhhW2ldWzBdLGFbaV1bMV0sYVtpXVsyXSkpO2Zvcih2YXIgbT10aGlzLnZlcnRpY2VzLGE9W10saT0wLGs9Yi5sZW5ndGg7aTxrO2krKyl7dmFyIGw9bVtiW2ldWzBdXSxwPW1bYltpXVsxXV0sdD1tW2JbaV1bMl1dO2FbaV09bmV3IFRIUkVFLkZhY2UzKGwuaW5kZXgscC5pbmRleCx0LmluZGV4LFtsLmNsb25lKCkscC5jbG9uZSgpLHQuY2xvbmUoKV0pfWk9MDtmb3Ioaz1hLmxlbmd0aDtpPGs7aSsrKXtwPWFbaV07bT1kO2I9TWF0aC5wb3coMixcbm0pO01hdGgucG93KDQsbSk7Zm9yKHZhciBtPWUoZy52ZXJ0aWNlc1twLmFdKSxsPWUoZy52ZXJ0aWNlc1twLmJdKSxzPWUoZy52ZXJ0aWNlc1twLmNdKSxwPVtdLHQ9MDt0PD1iO3QrKyl7cFt0XT1bXTtmb3IodmFyIHE9ZShtLmNsb25lKCkubGVycChzLHQvYikpLG49ZShsLmNsb25lKCkubGVycChzLHQvYikpLHU9Yi10LHI9MDtyPD11O3IrKylwW3RdW3JdPTA9PXImJnQ9PWI/cTplKHEuY2xvbmUoKS5sZXJwKG4sci91KSl9Zm9yKHQ9MDt0PGI7dCsrKWZvcihyPTA7cjwyKihiLXQpLTE7cisrKW09TWF0aC5mbG9vcihyLzIpLDA9PXIlMj9mKHBbdF1bbSsxXSxwW3QrMV1bbV0scFt0XVttXSk6ZihwW3RdW20rMV0scFt0KzFdW20rMV0scFt0KzFdW21dKX1pPTA7Zm9yKGs9dGhpcy5mYWNlVmVydGV4VXZzWzBdLmxlbmd0aDtpPGs7aSsrKWQ9dGhpcy5mYWNlVmVydGV4VXZzWzBdW2ldLGE9ZFswXS54LGI9ZFsxXS54LG09ZFsyXS54LGw9TWF0aC5tYXgoYSxNYXRoLm1heChiLG0pKSxcbnA9TWF0aC5taW4oYSxNYXRoLm1pbihiLG0pKSwwLjk8bCYmMC4xPnAmJigwLjI+YSYmKGRbMF0ueCs9MSksMC4yPmImJihkWzFdLngrPTEpLDAuMj5tJiYoZFsyXS54Kz0xKSk7aT0wO2ZvcihrPXRoaXMudmVydGljZXMubGVuZ3RoO2k8aztpKyspdGhpcy52ZXJ0aWNlc1tpXS5tdWx0aXBseVNjYWxhcihjKTt0aGlzLm1lcmdlVmVydGljZXMoKTt0aGlzLmNvbXB1dGVDZW50cm9pZHMoKTt0aGlzLmNvbXB1dGVGYWNlTm9ybWFscygpO3RoaXMuYm91bmRpbmdTcGhlcmU9bmV3IFRIUkVFLlNwaGVyZShuZXcgVEhSRUUuVmVjdG9yMyxjKX07VEhSRUUuUG9seWhlZHJvbkdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuSWNvc2FoZWRyb25HZW9tZXRyeT1mdW5jdGlvbihhLGIpe3RoaXMucmFkaXVzPWE7dGhpcy5kZXRhaWw9Yjt2YXIgYz0oMStNYXRoLnNxcnQoNSkpLzI7VEhSRUUuUG9seWhlZHJvbkdlb21ldHJ5LmNhbGwodGhpcyxbWy0xLGMsMF0sWzEsYywwXSxbLTEsLWMsMF0sWzEsLWMsMF0sWzAsLTEsY10sWzAsMSxjXSxbMCwtMSwtY10sWzAsMSwtY10sW2MsMCwtMV0sW2MsMCwxXSxbLWMsMCwtMV0sWy1jLDAsMV1dLFtbMCwxMSw1XSxbMCw1LDFdLFswLDEsN10sWzAsNywxMF0sWzAsMTAsMTFdLFsxLDUsOV0sWzUsMTEsNF0sWzExLDEwLDJdLFsxMCw3LDZdLFs3LDEsOF0sWzMsOSw0XSxbMyw0LDJdLFszLDIsNl0sWzMsNiw4XSxbMyw4LDldLFs0LDksNV0sWzIsNCwxMV0sWzYsMiwxMF0sWzgsNiw3XSxbOSw4LDFdXSxhLGIpfTtUSFJFRS5JY29zYWhlZHJvbkdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuT2N0YWhlZHJvbkdlb21ldHJ5PWZ1bmN0aW9uKGEsYil7VEhSRUUuUG9seWhlZHJvbkdlb21ldHJ5LmNhbGwodGhpcyxbWzEsMCwwXSxbLTEsMCwwXSxbMCwxLDBdLFswLC0xLDBdLFswLDAsMV0sWzAsMCwtMV1dLFtbMCwyLDRdLFswLDQsM10sWzAsMyw1XSxbMCw1LDJdLFsxLDIsNV0sWzEsNSwzXSxbMSwzLDRdLFsxLDQsMl1dLGEsYil9O1RIUkVFLk9jdGFoZWRyb25HZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5HZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLlRldHJhaGVkcm9uR2VvbWV0cnk9ZnVuY3Rpb24oYSxiKXtUSFJFRS5Qb2x5aGVkcm9uR2VvbWV0cnkuY2FsbCh0aGlzLFtbMSwxLDFdLFstMSwtMSwxXSxbLTEsMSwtMV0sWzEsLTEsLTFdXSxbWzIsMSwwXSxbMCwzLDJdLFsxLDMsMF0sWzIsMywxXV0sYSxiKX07VEhSRUUuVGV0cmFoZWRyb25HZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5HZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLlBhcmFtZXRyaWNHZW9tZXRyeT1mdW5jdGlvbihhLGIsYyl7VEhSRUUuR2VvbWV0cnkuY2FsbCh0aGlzKTt2YXIgZD10aGlzLnZlcnRpY2VzLGU9dGhpcy5mYWNlcyxmPXRoaXMuZmFjZVZlcnRleFV2c1swXSxoLGcsaSxrLG09YisxO2ZvcihoPTA7aDw9YztoKyspe2s9aC9jO2ZvcihnPTA7Zzw9YjtnKyspaT1nL2IsaT1hKGksayksZC5wdXNoKGkpfXZhciBsLHAsdCxzO2ZvcihoPTA7aDxjO2grKylmb3IoZz0wO2c8YjtnKyspYT1oKm0rZyxkPWgqbStnKzEsaz0oaCsxKSptK2crMSxpPShoKzEpKm0rZyxsPW5ldyBUSFJFRS5WZWN0b3IyKGcvYixoL2MpLHA9bmV3IFRIUkVFLlZlY3RvcjIoKGcrMSkvYixoL2MpLHQ9bmV3IFRIUkVFLlZlY3RvcjIoKGcrMSkvYiwoaCsxKS9jKSxzPW5ldyBUSFJFRS5WZWN0b3IyKGcvYiwoaCsxKS9jKSxlLnB1c2gobmV3IFRIUkVFLkZhY2UzKGEsZCxpKSksZi5wdXNoKFtsLHAsc10pLGUucHVzaChuZXcgVEhSRUUuRmFjZTMoZCxrLGkpKSxcbmYucHVzaChbcC5jbG9uZSgpLHQscy5jbG9uZSgpXSk7dGhpcy5jb21wdXRlQ2VudHJvaWRzKCk7dGhpcy5jb21wdXRlRmFjZU5vcm1hbHMoKTt0aGlzLmNvbXB1dGVWZXJ0ZXhOb3JtYWxzKCl9O1RIUkVFLlBhcmFtZXRyaWNHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5HZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLkF4aXNIZWxwZXI9ZnVuY3Rpb24oYSl7dmFyIGE9YXx8MSxiPW5ldyBUSFJFRS5HZW9tZXRyeTtiLnZlcnRpY2VzLnB1c2gobmV3IFRIUkVFLlZlY3RvcjMsbmV3IFRIUkVFLlZlY3RvcjMoYSwwLDApLG5ldyBUSFJFRS5WZWN0b3IzLG5ldyBUSFJFRS5WZWN0b3IzKDAsYSwwKSxuZXcgVEhSRUUuVmVjdG9yMyxuZXcgVEhSRUUuVmVjdG9yMygwLDAsYSkpO2IuY29sb3JzLnB1c2gobmV3IFRIUkVFLkNvbG9yKDE2NzExNjgwKSxuZXcgVEhSRUUuQ29sb3IoMTY3NTUyMDApLG5ldyBUSFJFRS5Db2xvcig2NTI4MCksbmV3IFRIUkVFLkNvbG9yKDExMjA2NDAwKSxuZXcgVEhSRUUuQ29sb3IoMjU1KSxuZXcgVEhSRUUuQ29sb3IoNDM3NzUpKTthPW5ldyBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCh7dmVydGV4Q29sb3JzOlRIUkVFLlZlcnRleENvbG9yc30pO1RIUkVFLkxpbmUuY2FsbCh0aGlzLGIsYSxUSFJFRS5MaW5lUGllY2VzKX07XG5USFJFRS5BeGlzSGVscGVyLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkxpbmUucHJvdG90eXBlKTtUSFJFRS5BcnJvd0hlbHBlcj1mdW5jdGlvbihhLGIsYyxkLGUsZil7VEhSRUUuT2JqZWN0M0QuY2FsbCh0aGlzKTt2b2lkIDA9PT1kJiYoZD0xNjc3Njk2MCk7dm9pZCAwPT09YyYmKGM9MSk7dm9pZCAwPT09ZSYmKGU9MC4yKmMpO3ZvaWQgMD09PWYmJihmPTAuMiplKTt0aGlzLnBvc2l0aW9uPWI7Yj1uZXcgVEhSRUUuR2VvbWV0cnk7Yi52ZXJ0aWNlcy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IzKDAsMCwwKSk7Yi52ZXJ0aWNlcy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IzKDAsMSwwKSk7dGhpcy5saW5lPW5ldyBUSFJFRS5MaW5lKGIsbmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKHtjb2xvcjpkfSkpO3RoaXMubGluZS5tYXRyaXhBdXRvVXBkYXRlPSExO3RoaXMuYWRkKHRoaXMubGluZSk7Yj1uZXcgVEhSRUUuQ3lsaW5kZXJHZW9tZXRyeSgwLDAuNSwxLDUsMSk7Yi5hcHBseU1hdHJpeCgobmV3IFRIUkVFLk1hdHJpeDQpLm1ha2VUcmFuc2xhdGlvbigwLC0wLjUsMCkpO3RoaXMuY29uZT1cbm5ldyBUSFJFRS5NZXNoKGIsbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtjb2xvcjpkfSkpO3RoaXMuY29uZS5tYXRyaXhBdXRvVXBkYXRlPSExO3RoaXMuYWRkKHRoaXMuY29uZSk7dGhpcy5zZXREaXJlY3Rpb24oYSk7dGhpcy5zZXRMZW5ndGgoYyxlLGYpfTtUSFJFRS5BcnJvd0hlbHBlci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUpO1RIUkVFLkFycm93SGVscGVyLnByb3RvdHlwZS5zZXREaXJlY3Rpb249ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMyxiO3JldHVybiBmdW5jdGlvbihjKXswLjk5OTk5PGMueT90aGlzLnF1YXRlcm5pb24uc2V0KDAsMCwwLDEpOi0wLjk5OTk5PmMueT90aGlzLnF1YXRlcm5pb24uc2V0KDEsMCwwLDApOihhLnNldChjLnosMCwtYy54KS5ub3JtYWxpemUoKSxiPU1hdGguYWNvcyhjLnkpLHRoaXMucXVhdGVybmlvbi5zZXRGcm9tQXhpc0FuZ2xlKGEsYikpfX0oKTtcblRIUkVFLkFycm93SGVscGVyLnByb3RvdHlwZS5zZXRMZW5ndGg9ZnVuY3Rpb24oYSxiLGMpe3ZvaWQgMD09PWImJihiPTAuMiphKTt2b2lkIDA9PT1jJiYoYz0wLjIqYik7dGhpcy5saW5lLnNjYWxlLnNldCgxLGEsMSk7dGhpcy5saW5lLnVwZGF0ZU1hdHJpeCgpO3RoaXMuY29uZS5zY2FsZS5zZXQoYyxiLGMpO3RoaXMuY29uZS5wb3NpdGlvbi55PWE7dGhpcy5jb25lLnVwZGF0ZU1hdHJpeCgpfTtUSFJFRS5BcnJvd0hlbHBlci5wcm90b3R5cGUuc2V0Q29sb3I9ZnVuY3Rpb24oYSl7dGhpcy5saW5lLm1hdGVyaWFsLmNvbG9yLnNldEhleChhKTt0aGlzLmNvbmUubWF0ZXJpYWwuY29sb3Iuc2V0SGV4KGEpfTtUSFJFRS5Cb3hIZWxwZXI9ZnVuY3Rpb24oYSl7dmFyIGI9W25ldyBUSFJFRS5WZWN0b3IzKDEsMSwxKSxuZXcgVEhSRUUuVmVjdG9yMygtMSwxLDEpLG5ldyBUSFJFRS5WZWN0b3IzKC0xLC0xLDEpLG5ldyBUSFJFRS5WZWN0b3IzKDEsLTEsMSksbmV3IFRIUkVFLlZlY3RvcjMoMSwxLC0xKSxuZXcgVEhSRUUuVmVjdG9yMygtMSwxLC0xKSxuZXcgVEhSRUUuVmVjdG9yMygtMSwtMSwtMSksbmV3IFRIUkVFLlZlY3RvcjMoMSwtMSwtMSldO3RoaXMudmVydGljZXM9Yjt2YXIgYz1uZXcgVEhSRUUuR2VvbWV0cnk7Yy52ZXJ0aWNlcy5wdXNoKGJbMF0sYlsxXSxiWzFdLGJbMl0sYlsyXSxiWzNdLGJbM10sYlswXSxiWzRdLGJbNV0sYls1XSxiWzZdLGJbNl0sYls3XSxiWzddLGJbNF0sYlswXSxiWzRdLGJbMV0sYls1XSxiWzJdLGJbNl0sYlszXSxiWzddKTtUSFJFRS5MaW5lLmNhbGwodGhpcyxjLG5ldyBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCh7Y29sb3I6MTY3NzY5NjB9KSxUSFJFRS5MaW5lUGllY2VzKTtcbnZvaWQgMCE9PWEmJnRoaXMudXBkYXRlKGEpfTtUSFJFRS5Cb3hIZWxwZXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTGluZS5wcm90b3R5cGUpO1xuVEhSRUUuQm94SGVscGVyLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oYSl7dmFyIGI9YS5nZW9tZXRyeTtudWxsPT09Yi5ib3VuZGluZ0JveCYmYi5jb21wdXRlQm91bmRpbmdCb3goKTt2YXIgYz1iLmJvdW5kaW5nQm94Lm1pbixiPWIuYm91bmRpbmdCb3gubWF4LGQ9dGhpcy52ZXJ0aWNlcztkWzBdLnNldChiLngsYi55LGIueik7ZFsxXS5zZXQoYy54LGIueSxiLnopO2RbMl0uc2V0KGMueCxjLnksYi56KTtkWzNdLnNldChiLngsYy55LGIueik7ZFs0XS5zZXQoYi54LGIueSxjLnopO2RbNV0uc2V0KGMueCxiLnksYy56KTtkWzZdLnNldChjLngsYy55LGMueik7ZFs3XS5zZXQoYi54LGMueSxjLnopO3RoaXMuZ2VvbWV0cnkuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk7dGhpcy5nZW9tZXRyeS52ZXJ0aWNlc05lZWRVcGRhdGU9ITA7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPSExO3RoaXMubWF0cml4V29ybGQ9YS5tYXRyaXhXb3JsZH07VEhSRUUuQm91bmRpbmdCb3hIZWxwZXI9ZnVuY3Rpb24oYSxiKXt2YXIgYz1ifHw4OTQ3ODQ4O3RoaXMub2JqZWN0PWE7dGhpcy5ib3g9bmV3IFRIUkVFLkJveDM7VEhSRUUuTWVzaC5jYWxsKHRoaXMsbmV3IFRIUkVFLkN1YmVHZW9tZXRyeSgxLDEsMSksbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtjb2xvcjpjLHdpcmVmcmFtZTohMH0pKX07VEhSRUUuQm91bmRpbmdCb3hIZWxwZXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTWVzaC5wcm90b3R5cGUpO1RIUkVFLkJvdW5kaW5nQm94SGVscGVyLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt0aGlzLmJveC5zZXRGcm9tT2JqZWN0KHRoaXMub2JqZWN0KTt0aGlzLmJveC5zaXplKHRoaXMuc2NhbGUpO3RoaXMuYm94LmNlbnRlcih0aGlzLnBvc2l0aW9uKX07VEhSRUUuQ2FtZXJhSGVscGVyPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiLGQpe2MoYSxkKTtjKGIsZCl9ZnVuY3Rpb24gYyhhLGIpe2QudmVydGljZXMucHVzaChuZXcgVEhSRUUuVmVjdG9yMyk7ZC5jb2xvcnMucHVzaChuZXcgVEhSRUUuQ29sb3IoYikpO3ZvaWQgMD09PWZbYV0mJihmW2FdPVtdKTtmW2FdLnB1c2goZC52ZXJ0aWNlcy5sZW5ndGgtMSl9dmFyIGQ9bmV3IFRIUkVFLkdlb21ldHJ5LGU9bmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKHtjb2xvcjoxNjc3NzIxNSx2ZXJ0ZXhDb2xvcnM6VEhSRUUuRmFjZUNvbG9yc30pLGY9e307YihcIm4xXCIsXCJuMlwiLDE2NzU1MjAwKTtiKFwibjJcIixcIm40XCIsMTY3NTUyMDApO2IoXCJuNFwiLFwibjNcIiwxNjc1NTIwMCk7YihcIm4zXCIsXCJuMVwiLDE2NzU1MjAwKTtiKFwiZjFcIixcImYyXCIsMTY3NTUyMDApO2IoXCJmMlwiLFwiZjRcIiwxNjc1NTIwMCk7YihcImY0XCIsXCJmM1wiLDE2NzU1MjAwKTtiKFwiZjNcIixcImYxXCIsMTY3NTUyMDApO2IoXCJuMVwiLFwiZjFcIiwxNjc1NTIwMCk7XG5iKFwibjJcIixcImYyXCIsMTY3NTUyMDApO2IoXCJuM1wiLFwiZjNcIiwxNjc1NTIwMCk7YihcIm40XCIsXCJmNFwiLDE2NzU1MjAwKTtiKFwicFwiLFwibjFcIiwxNjcxMTY4MCk7YihcInBcIixcIm4yXCIsMTY3MTE2ODApO2IoXCJwXCIsXCJuM1wiLDE2NzExNjgwKTtiKFwicFwiLFwibjRcIiwxNjcxMTY4MCk7YihcInUxXCIsXCJ1MlwiLDQzNzc1KTtiKFwidTJcIixcInUzXCIsNDM3NzUpO2IoXCJ1M1wiLFwidTFcIiw0Mzc3NSk7YihcImNcIixcInRcIiwxNjc3NzIxNSk7YihcInBcIixcImNcIiwzMzU1NDQzKTtiKFwiY24xXCIsXCJjbjJcIiwzMzU1NDQzKTtiKFwiY24zXCIsXCJjbjRcIiwzMzU1NDQzKTtiKFwiY2YxXCIsXCJjZjJcIiwzMzU1NDQzKTtiKFwiY2YzXCIsXCJjZjRcIiwzMzU1NDQzKTtUSFJFRS5MaW5lLmNhbGwodGhpcyxkLGUsVEhSRUUuTGluZVBpZWNlcyk7dGhpcy5jYW1lcmE9YTt0aGlzLm1hdHJpeFdvcmxkPWEubWF0cml4V29ybGQ7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPSExO3RoaXMucG9pbnRNYXA9Zjt0aGlzLnVwZGF0ZSgpfTtcblRIUkVFLkNhbWVyYUhlbHBlci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5MaW5lLnByb3RvdHlwZSk7XG5USFJFRS5DYW1lcmFIZWxwZXIucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzLGI9bmV3IFRIUkVFLkNhbWVyYSxjPW5ldyBUSFJFRS5Qcm9qZWN0b3I7cmV0dXJuIGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZChkLGgsZyxpKXthLnNldChoLGcsaSk7Yy51bnByb2plY3RWZWN0b3IoYSxiKTtkPWUucG9pbnRNYXBbZF07aWYodm9pZCAwIT09ZCl7aD0wO2ZvcihnPWQubGVuZ3RoO2g8ZztoKyspZS5nZW9tZXRyeS52ZXJ0aWNlc1tkW2hdXS5jb3B5KGEpfX12YXIgZT10aGlzO2IucHJvamVjdGlvbk1hdHJpeC5jb3B5KHRoaXMuY2FtZXJhLnByb2plY3Rpb25NYXRyaXgpO2QoXCJjXCIsMCwwLC0xKTtkKFwidFwiLDAsMCwxKTtkKFwibjFcIiwtMSwtMSwtMSk7ZChcIm4yXCIsMSwtMSwtMSk7ZChcIm4zXCIsLTEsMSwtMSk7ZChcIm40XCIsMSwxLC0xKTtkKFwiZjFcIiwtMSwtMSwxKTtkKFwiZjJcIiwxLC0xLDEpO2QoXCJmM1wiLC0xLDEsMSk7ZChcImY0XCIsMSwxLDEpO2QoXCJ1MVwiLFxuMC43LDEuMSwtMSk7ZChcInUyXCIsLTAuNywxLjEsLTEpO2QoXCJ1M1wiLDAsMiwtMSk7ZChcImNmMVwiLC0xLDAsMSk7ZChcImNmMlwiLDEsMCwxKTtkKFwiY2YzXCIsMCwtMSwxKTtkKFwiY2Y0XCIsMCwxLDEpO2QoXCJjbjFcIiwtMSwwLC0xKTtkKFwiY24yXCIsMSwwLC0xKTtkKFwiY24zXCIsMCwtMSwtMSk7ZChcImNuNFwiLDAsMSwtMSk7dGhpcy5nZW9tZXRyeS52ZXJ0aWNlc05lZWRVcGRhdGU9ITB9fSgpO1RIUkVFLkRpcmVjdGlvbmFsTGlnaHRIZWxwZXI9ZnVuY3Rpb24oYSxiKXtUSFJFRS5PYmplY3QzRC5jYWxsKHRoaXMpO3RoaXMubGlnaHQ9YTt0aGlzLmxpZ2h0LnVwZGF0ZU1hdHJpeFdvcmxkKCk7dGhpcy5tYXRyaXhXb3JsZD1hLm1hdHJpeFdvcmxkO3RoaXMubWF0cml4QXV0b1VwZGF0ZT0hMTt2YXIgYj1ifHwxLGM9bmV3IFRIUkVFLlBsYW5lR2VvbWV0cnkoYixiKSxkPW5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7d2lyZWZyYW1lOiEwLGZvZzohMX0pO2QuY29sb3IuY29weSh0aGlzLmxpZ2h0LmNvbG9yKS5tdWx0aXBseVNjYWxhcih0aGlzLmxpZ2h0LmludGVuc2l0eSk7dGhpcy5saWdodFBsYW5lPW5ldyBUSFJFRS5NZXNoKGMsZCk7dGhpcy5hZGQodGhpcy5saWdodFBsYW5lKTtjPW5ldyBUSFJFRS5HZW9tZXRyeTtjLnZlcnRpY2VzLnB1c2gobmV3IFRIUkVFLlZlY3RvcjMpO2MudmVydGljZXMucHVzaChuZXcgVEhSRUUuVmVjdG9yMyk7ZD1uZXcgVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWwoe2ZvZzohMX0pO1xuZC5jb2xvci5jb3B5KHRoaXMubGlnaHQuY29sb3IpLm11bHRpcGx5U2NhbGFyKHRoaXMubGlnaHQuaW50ZW5zaXR5KTt0aGlzLnRhcmdldExpbmU9bmV3IFRIUkVFLkxpbmUoYyxkKTt0aGlzLmFkZCh0aGlzLnRhcmdldExpbmUpO3RoaXMudXBkYXRlKCl9O1RIUkVFLkRpcmVjdGlvbmFsTGlnaHRIZWxwZXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlKTtUSFJFRS5EaXJlY3Rpb25hbExpZ2h0SGVscGVyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5saWdodFBsYW5lLmdlb21ldHJ5LmRpc3Bvc2UoKTt0aGlzLmxpZ2h0UGxhbmUubWF0ZXJpYWwuZGlzcG9zZSgpO3RoaXMudGFyZ2V0TGluZS5nZW9tZXRyeS5kaXNwb3NlKCk7dGhpcy50YXJnZXRMaW5lLm1hdGVyaWFsLmRpc3Bvc2UoKX07XG5USFJFRS5EaXJlY3Rpb25hbExpZ2h0SGVscGVyLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMyxiPW5ldyBUSFJFRS5WZWN0b3IzLGM9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKCl7YS5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5saWdodC5tYXRyaXhXb3JsZCk7Yi5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5saWdodC50YXJnZXQubWF0cml4V29ybGQpO2Muc3ViVmVjdG9ycyhiLGEpO3RoaXMubGlnaHRQbGFuZS5sb29rQXQoYyk7dGhpcy5saWdodFBsYW5lLm1hdGVyaWFsLmNvbG9yLmNvcHkodGhpcy5saWdodC5jb2xvcikubXVsdGlwbHlTY2FsYXIodGhpcy5saWdodC5pbnRlbnNpdHkpO3RoaXMudGFyZ2V0TGluZS5nZW9tZXRyeS52ZXJ0aWNlc1sxXS5jb3B5KGMpO3RoaXMudGFyZ2V0TGluZS5nZW9tZXRyeS52ZXJ0aWNlc05lZWRVcGRhdGU9ITA7dGhpcy50YXJnZXRMaW5lLm1hdGVyaWFsLmNvbG9yLmNvcHkodGhpcy5saWdodFBsYW5lLm1hdGVyaWFsLmNvbG9yKX19KCk7VEhSRUUuRmFjZU5vcm1hbHNIZWxwZXI9ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy5vYmplY3Q9YTt0aGlzLnNpemU9Ynx8MTtmb3IodmFyIGE9Y3x8MTY3NzY5NjAsZD1kfHwxLGI9bmV3IFRIUkVFLkdlb21ldHJ5LGM9MCxlPXRoaXMub2JqZWN0Lmdlb21ldHJ5LmZhY2VzLmxlbmd0aDtjPGU7YysrKWIudmVydGljZXMucHVzaChuZXcgVEhSRUUuVmVjdG9yMyksYi52ZXJ0aWNlcy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IzKTtUSFJFRS5MaW5lLmNhbGwodGhpcyxiLG5ldyBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCh7Y29sb3I6YSxsaW5ld2lkdGg6ZH0pLFRIUkVFLkxpbmVQaWVjZXMpO3RoaXMubWF0cml4QXV0b1VwZGF0ZT0hMTt0aGlzLm5vcm1hbE1hdHJpeD1uZXcgVEhSRUUuTWF0cml4Mzt0aGlzLnVwZGF0ZSgpfTtUSFJFRS5GYWNlTm9ybWFsc0hlbHBlci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5MaW5lLnByb3RvdHlwZSk7XG5USFJFRS5GYWNlTm9ybWFsc0hlbHBlci5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKCl7dGhpcy5vYmplY3QudXBkYXRlTWF0cml4V29ybGQoITApO3RoaXMubm9ybWFsTWF0cml4LmdldE5vcm1hbE1hdHJpeCh0aGlzLm9iamVjdC5tYXRyaXhXb3JsZCk7Zm9yKHZhciBiPXRoaXMuZ2VvbWV0cnkudmVydGljZXMsYz10aGlzLm9iamVjdC5nZW9tZXRyeS5mYWNlcyxkPXRoaXMub2JqZWN0Lm1hdHJpeFdvcmxkLGU9MCxmPWMubGVuZ3RoO2U8ZjtlKyspe3ZhciBoPWNbZV07YS5jb3B5KGgubm9ybWFsKS5hcHBseU1hdHJpeDModGhpcy5ub3JtYWxNYXRyaXgpLm5vcm1hbGl6ZSgpLm11bHRpcGx5U2NhbGFyKHRoaXMuc2l6ZSk7dmFyIGc9MiplO2JbZ10uY29weShoLmNlbnRyb2lkKS5hcHBseU1hdHJpeDQoZCk7YltnKzFdLmFkZFZlY3RvcnMoYltnXSxhKX10aGlzLmdlb21ldHJ5LnZlcnRpY2VzTmVlZFVwZGF0ZT1cbiEwO3JldHVybiB0aGlzfX0oKTtUSFJFRS5HcmlkSGVscGVyPWZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IFRIUkVFLkdlb21ldHJ5LGQ9bmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKHt2ZXJ0ZXhDb2xvcnM6VEhSRUUuVmVydGV4Q29sb3JzfSk7dGhpcy5jb2xvcjE9bmV3IFRIUkVFLkNvbG9yKDQ0NzM5MjQpO3RoaXMuY29sb3IyPW5ldyBUSFJFRS5Db2xvcig4OTQ3ODQ4KTtmb3IodmFyIGU9LWE7ZTw9YTtlKz1iKXtjLnZlcnRpY2VzLnB1c2gobmV3IFRIUkVFLlZlY3RvcjMoLWEsMCxlKSxuZXcgVEhSRUUuVmVjdG9yMyhhLDAsZSksbmV3IFRIUkVFLlZlY3RvcjMoZSwwLC1hKSxuZXcgVEhSRUUuVmVjdG9yMyhlLDAsYSkpO3ZhciBmPTA9PT1lP3RoaXMuY29sb3IxOnRoaXMuY29sb3IyO2MuY29sb3JzLnB1c2goZixmLGYsZil9VEhSRUUuTGluZS5jYWxsKHRoaXMsYyxkLFRIUkVFLkxpbmVQaWVjZXMpfTtUSFJFRS5HcmlkSGVscGVyLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkxpbmUucHJvdG90eXBlKTtcblRIUkVFLkdyaWRIZWxwZXIucHJvdG90eXBlLnNldENvbG9ycz1mdW5jdGlvbihhLGIpe3RoaXMuY29sb3IxLnNldChhKTt0aGlzLmNvbG9yMi5zZXQoYik7dGhpcy5nZW9tZXRyeS5jb2xvcnNOZWVkVXBkYXRlPSEwfTtUSFJFRS5IZW1pc3BoZXJlTGlnaHRIZWxwZXI9ZnVuY3Rpb24oYSxiKXtUSFJFRS5PYmplY3QzRC5jYWxsKHRoaXMpO3RoaXMubGlnaHQ9YTt0aGlzLmxpZ2h0LnVwZGF0ZU1hdHJpeFdvcmxkKCk7dGhpcy5tYXRyaXhXb3JsZD1hLm1hdHJpeFdvcmxkO3RoaXMubWF0cml4QXV0b1VwZGF0ZT0hMTt0aGlzLmNvbG9ycz1bbmV3IFRIUkVFLkNvbG9yLG5ldyBUSFJFRS5Db2xvcl07dmFyIGM9bmV3IFRIUkVFLlNwaGVyZUdlb21ldHJ5KGIsNCwyKTtjLmFwcGx5TWF0cml4KChuZXcgVEhSRUUuTWF0cml4NCkubWFrZVJvdGF0aW9uWCgtTWF0aC5QSS8yKSk7Zm9yKHZhciBkPTA7OD5kO2QrKyljLmZhY2VzW2RdLmNvbG9yPXRoaXMuY29sb3JzWzQ+ZD8wOjFdO2Q9bmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHt2ZXJ0ZXhDb2xvcnM6VEhSRUUuRmFjZUNvbG9ycyx3aXJlZnJhbWU6ITB9KTt0aGlzLmxpZ2h0U3BoZXJlPW5ldyBUSFJFRS5NZXNoKGMsZCk7dGhpcy5hZGQodGhpcy5saWdodFNwaGVyZSk7XG50aGlzLnVwZGF0ZSgpfTtUSFJFRS5IZW1pc3BoZXJlTGlnaHRIZWxwZXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlKTtUSFJFRS5IZW1pc3BoZXJlTGlnaHRIZWxwZXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLmxpZ2h0U3BoZXJlLmdlb21ldHJ5LmRpc3Bvc2UoKTt0aGlzLmxpZ2h0U3BoZXJlLm1hdGVyaWFsLmRpc3Bvc2UoKX07XG5USFJFRS5IZW1pc3BoZXJlTGlnaHRIZWxwZXIucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbigpe3RoaXMuY29sb3JzWzBdLmNvcHkodGhpcy5saWdodC5jb2xvcikubXVsdGlwbHlTY2FsYXIodGhpcy5saWdodC5pbnRlbnNpdHkpO3RoaXMuY29sb3JzWzFdLmNvcHkodGhpcy5saWdodC5ncm91bmRDb2xvcikubXVsdGlwbHlTY2FsYXIodGhpcy5saWdodC5pbnRlbnNpdHkpO3RoaXMubGlnaHRTcGhlcmUubG9va0F0KGEuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHRoaXMubGlnaHQubWF0cml4V29ybGQpLm5lZ2F0ZSgpKTt0aGlzLmxpZ2h0U3BoZXJlLmdlb21ldHJ5LmNvbG9yc05lZWRVcGRhdGU9ITB9fSgpO1RIUkVFLlBvaW50TGlnaHRIZWxwZXI9ZnVuY3Rpb24oYSxiKXt0aGlzLmxpZ2h0PWE7dGhpcy5saWdodC51cGRhdGVNYXRyaXhXb3JsZCgpO3ZhciBjPW5ldyBUSFJFRS5TcGhlcmVHZW9tZXRyeShiLDQsMiksZD1uZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe3dpcmVmcmFtZTohMCxmb2c6ITF9KTtkLmNvbG9yLmNvcHkodGhpcy5saWdodC5jb2xvcikubXVsdGlwbHlTY2FsYXIodGhpcy5saWdodC5pbnRlbnNpdHkpO1RIUkVFLk1lc2guY2FsbCh0aGlzLGMsZCk7dGhpcy5tYXRyaXhXb3JsZD10aGlzLmxpZ2h0Lm1hdHJpeFdvcmxkO3RoaXMubWF0cml4QXV0b1VwZGF0ZT0hMX07VEhSRUUuUG9pbnRMaWdodEhlbHBlci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5NZXNoLnByb3RvdHlwZSk7VEhSRUUuUG9pbnRMaWdodEhlbHBlci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuZ2VvbWV0cnkuZGlzcG9zZSgpO3RoaXMubWF0ZXJpYWwuZGlzcG9zZSgpfTtcblRIUkVFLlBvaW50TGlnaHRIZWxwZXIucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3RoaXMubWF0ZXJpYWwuY29sb3IuY29weSh0aGlzLmxpZ2h0LmNvbG9yKS5tdWx0aXBseVNjYWxhcih0aGlzLmxpZ2h0LmludGVuc2l0eSl9O1RIUkVFLlNwb3RMaWdodEhlbHBlcj1mdW5jdGlvbihhKXtUSFJFRS5PYmplY3QzRC5jYWxsKHRoaXMpO3RoaXMubGlnaHQ9YTt0aGlzLmxpZ2h0LnVwZGF0ZU1hdHJpeFdvcmxkKCk7dGhpcy5tYXRyaXhXb3JsZD1hLm1hdHJpeFdvcmxkO3RoaXMubWF0cml4QXV0b1VwZGF0ZT0hMTthPW5ldyBUSFJFRS5DeWxpbmRlckdlb21ldHJ5KDAsMSwxLDgsMSwhMCk7YS5hcHBseU1hdHJpeCgobmV3IFRIUkVFLk1hdHJpeDQpLm1ha2VUcmFuc2xhdGlvbigwLC0wLjUsMCkpO2EuYXBwbHlNYXRyaXgoKG5ldyBUSFJFRS5NYXRyaXg0KS5tYWtlUm90YXRpb25YKC1NYXRoLlBJLzIpKTt2YXIgYj1uZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe3dpcmVmcmFtZTohMCxmb2c6ITF9KTt0aGlzLmNvbmU9bmV3IFRIUkVFLk1lc2goYSxiKTt0aGlzLmFkZCh0aGlzLmNvbmUpO3RoaXMudXBkYXRlKCl9O1RIUkVFLlNwb3RMaWdodEhlbHBlci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUpO1xuVEhSRUUuU3BvdExpZ2h0SGVscGVyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5jb25lLmdlb21ldHJ5LmRpc3Bvc2UoKTt0aGlzLmNvbmUubWF0ZXJpYWwuZGlzcG9zZSgpfTtUSFJFRS5TcG90TGlnaHRIZWxwZXIucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzLGI9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5saWdodC5kaXN0YW5jZT90aGlzLmxpZ2h0LmRpc3RhbmNlOjFFNCxkPWMqTWF0aC50YW4odGhpcy5saWdodC5hbmdsZSk7dGhpcy5jb25lLnNjYWxlLnNldChkLGQsYyk7YS5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5saWdodC5tYXRyaXhXb3JsZCk7Yi5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5saWdodC50YXJnZXQubWF0cml4V29ybGQpO3RoaXMuY29uZS5sb29rQXQoYi5zdWIoYSkpO3RoaXMuY29uZS5tYXRlcmlhbC5jb2xvci5jb3B5KHRoaXMubGlnaHQuY29sb3IpLm11bHRpcGx5U2NhbGFyKHRoaXMubGlnaHQuaW50ZW5zaXR5KX19KCk7VEhSRUUuVmVydGV4Tm9ybWFsc0hlbHBlcj1mdW5jdGlvbihhLGIsYyxkKXt0aGlzLm9iamVjdD1hO3RoaXMuc2l6ZT1ifHwxO2Zvcih2YXIgYj1jfHwxNjcxMTY4MCxkPWR8fDEsYz1uZXcgVEhSRUUuR2VvbWV0cnksYT1hLmdlb21ldHJ5LmZhY2VzLGU9MCxmPWEubGVuZ3RoO2U8ZjtlKyspZm9yKHZhciBoPTAsZz1hW2VdLnZlcnRleE5vcm1hbHMubGVuZ3RoO2g8ZztoKyspYy52ZXJ0aWNlcy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IzKSxjLnZlcnRpY2VzLnB1c2gobmV3IFRIUkVFLlZlY3RvcjMpO1RIUkVFLkxpbmUuY2FsbCh0aGlzLGMsbmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKHtjb2xvcjpiLGxpbmV3aWR0aDpkfSksVEhSRUUuTGluZVBpZWNlcyk7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPSExO3RoaXMubm9ybWFsTWF0cml4PW5ldyBUSFJFRS5NYXRyaXgzO3RoaXMudXBkYXRlKCl9O1RIUkVFLlZlcnRleE5vcm1hbHNIZWxwZXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTGluZS5wcm90b3R5cGUpO1xuVEhSRUUuVmVydGV4Tm9ybWFsc0hlbHBlci5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGI9W1wiYVwiLFwiYlwiLFwiY1wiLFwiZFwiXTt0aGlzLm9iamVjdC51cGRhdGVNYXRyaXhXb3JsZCghMCk7dGhpcy5ub3JtYWxNYXRyaXguZ2V0Tm9ybWFsTWF0cml4KHRoaXMub2JqZWN0Lm1hdHJpeFdvcmxkKTtmb3IodmFyIGM9dGhpcy5nZW9tZXRyeS52ZXJ0aWNlcyxkPXRoaXMub2JqZWN0Lmdlb21ldHJ5LnZlcnRpY2VzLGU9dGhpcy5vYmplY3QuZ2VvbWV0cnkuZmFjZXMsZj10aGlzLm9iamVjdC5tYXRyaXhXb3JsZCxoPTAsZz0wLGk9ZS5sZW5ndGg7ZzxpO2crKylmb3IodmFyIGs9ZVtnXSxtPTAsbD1rLnZlcnRleE5vcm1hbHMubGVuZ3RoO208bDttKyspe3ZhciBwPWsudmVydGV4Tm9ybWFsc1ttXTtjW2hdLmNvcHkoZFtrW2JbbV1dXSkuYXBwbHlNYXRyaXg0KGYpO2EuY29weShwKS5hcHBseU1hdHJpeDModGhpcy5ub3JtYWxNYXRyaXgpLm5vcm1hbGl6ZSgpLm11bHRpcGx5U2NhbGFyKHRoaXMuc2l6ZSk7XG5hLmFkZChjW2hdKTtoKz0xO2NbaF0uY29weShhKTtoKz0xfXRoaXMuZ2VvbWV0cnkudmVydGljZXNOZWVkVXBkYXRlPSEwO3JldHVybiB0aGlzfX0oKTtUSFJFRS5WZXJ0ZXhUYW5nZW50c0hlbHBlcj1mdW5jdGlvbihhLGIsYyxkKXt0aGlzLm9iamVjdD1hO3RoaXMuc2l6ZT1ifHwxO2Zvcih2YXIgYj1jfHwyNTUsZD1kfHwxLGM9bmV3IFRIUkVFLkdlb21ldHJ5LGE9YS5nZW9tZXRyeS5mYWNlcyxlPTAsZj1hLmxlbmd0aDtlPGY7ZSsrKWZvcih2YXIgaD0wLGc9YVtlXS52ZXJ0ZXhUYW5nZW50cy5sZW5ndGg7aDxnO2grKyljLnZlcnRpY2VzLnB1c2gobmV3IFRIUkVFLlZlY3RvcjMpLGMudmVydGljZXMucHVzaChuZXcgVEhSRUUuVmVjdG9yMyk7VEhSRUUuTGluZS5jYWxsKHRoaXMsYyxuZXcgVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWwoe2NvbG9yOmIsbGluZXdpZHRoOmR9KSxUSFJFRS5MaW5lUGllY2VzKTt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ITE7dGhpcy51cGRhdGUoKX07VEhSRUUuVmVydGV4VGFuZ2VudHNIZWxwZXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTGluZS5wcm90b3R5cGUpO1xuVEhSRUUuVmVydGV4VGFuZ2VudHNIZWxwZXIucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbigpe3ZhciBiPVtcImFcIixcImJcIixcImNcIixcImRcIl07dGhpcy5vYmplY3QudXBkYXRlTWF0cml4V29ybGQoITApO2Zvcih2YXIgYz10aGlzLmdlb21ldHJ5LnZlcnRpY2VzLGQ9dGhpcy5vYmplY3QuZ2VvbWV0cnkudmVydGljZXMsZT10aGlzLm9iamVjdC5nZW9tZXRyeS5mYWNlcyxmPXRoaXMub2JqZWN0Lm1hdHJpeFdvcmxkLGg9MCxnPTAsaT1lLmxlbmd0aDtnPGk7ZysrKWZvcih2YXIgaz1lW2ddLG09MCxsPWsudmVydGV4VGFuZ2VudHMubGVuZ3RoO208bDttKyspe3ZhciBwPWsudmVydGV4VGFuZ2VudHNbbV07Y1toXS5jb3B5KGRba1tiW21dXV0pLmFwcGx5TWF0cml4NChmKTthLmNvcHkocCkudHJhbnNmb3JtRGlyZWN0aW9uKGYpLm11bHRpcGx5U2NhbGFyKHRoaXMuc2l6ZSk7YS5hZGQoY1toXSk7aCs9MTtjW2hdLmNvcHkoYSk7XG5oKz0xfXRoaXMuZ2VvbWV0cnkudmVydGljZXNOZWVkVXBkYXRlPSEwO3JldHVybiB0aGlzfX0oKTtUSFJFRS5XaXJlZnJhbWVIZWxwZXI9ZnVuY3Rpb24oYSl7dmFyIGI9WzAsMF0sYz17fSxkPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGEtYn0sZT1bXCJhXCIsXCJiXCIsXCJjXCIsXCJkXCJdLGY9bmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5LGg9MDtpZihhLmdlb21ldHJ5IGluc3RhbmNlb2YgVEhSRUUuR2VvbWV0cnkpe2Zvcih2YXIgZz1hLmdlb21ldHJ5LnZlcnRpY2VzLGk9YS5nZW9tZXRyeS5mYWNlcyxrPW5ldyBVaW50MzJBcnJheSg2KmkubGVuZ3RoKSxtPTAsbD1pLmxlbmd0aDttPGw7bSsrKWZvcih2YXIgcD1pW21dLHQ9MDszPnQ7dCsrKXtiWzBdPXBbZVt0XV07YlsxXT1wW2VbKHQrMSklM11dO2Iuc29ydChkKTt2YXIgcz1iLnRvU3RyaW5nKCk7dm9pZCAwPT09Y1tzXSYmKGtbMipoXT1iWzBdLGtbMipoKzFdPWJbMV0sY1tzXT0hMCxoKyspfWYuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixGbG9hdDMyQXJyYXksMipoLDMpO2I9Zi5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5O209MDtmb3IobD1cbmg7bTxsO20rKylmb3IodD0wOzI+dDt0KyspaD1nW2tbMiptK3RdXSxlPTYqbSszKnQsYltlKzBdPWgueCxiW2UrMV09aC55LGJbZSsyXT1oLnp9ZWxzZXtnPWEuZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheTtpPWEuZ2VvbWV0cnkuYXR0cmlidXRlcy5pbmRleC5hcnJheTtrPW5ldyBVaW50MzJBcnJheSgyKmkubGVuZ3RoKTttPTA7Zm9yKGw9aS5sZW5ndGgvMzttPGw7bSsrKWZvcih0PTA7Mz50O3QrKyllPTMqbSxiWzBdPWlbZSt0XSxiWzFdPWlbZSsodCsxKSUzXSxiLnNvcnQoZCkscz1iLnRvU3RyaW5nKCksdm9pZCAwPT09Y1tzXSYmKGtbMipoXT1iWzBdLGtbMipoKzFdPWJbMV0sY1tzXT0hMCxoKyspO2YuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixGbG9hdDMyQXJyYXksMipoLDMpO2I9Zi5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5O209MDtmb3IobD1oO208bDttKyspZm9yKHQ9MDsyPnQ7dCsrKWU9NiptKzMqdCxoPTMqa1syKm0rdF0sYltlKzBdPWdbaF0sXG5iW2UrMV09Z1toKzFdLGJbZSsyXT1nW2grMl19VEhSRUUuTGluZS5jYWxsKHRoaXMsZixuZXcgVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWwoe2NvbG9yOjE2Nzc3MjE1fSksVEhSRUUuTGluZVBpZWNlcyk7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPSExO3RoaXMubWF0cml4V29ybGQ9YS5tYXRyaXhXb3JsZH07VEhSRUUuV2lyZWZyYW1lSGVscGVyLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkxpbmUucHJvdG90eXBlKTtUSFJFRS5JbW1lZGlhdGVSZW5kZXJPYmplY3Q9ZnVuY3Rpb24oKXtUSFJFRS5PYmplY3QzRC5jYWxsKHRoaXMpO3RoaXMucmVuZGVyPWZ1bmN0aW9uKCl7fX07VEhSRUUuSW1tZWRpYXRlUmVuZGVyT2JqZWN0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSk7VEhSRUUuTGVuc0ZsYXJlPWZ1bmN0aW9uKGEsYixjLGQsZSl7VEhSRUUuT2JqZWN0M0QuY2FsbCh0aGlzKTt0aGlzLmxlbnNGbGFyZXM9W107dGhpcy5wb3NpdGlvblNjcmVlbj1uZXcgVEhSRUUuVmVjdG9yMzt0aGlzLmN1c3RvbVVwZGF0ZUNhbGxiYWNrPXZvaWQgMDt2b2lkIDAhPT1hJiZ0aGlzLmFkZChhLGIsYyxkLGUpfTtUSFJFRS5MZW5zRmxhcmUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlKTtcblRIUkVFLkxlbnNGbGFyZS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2b2lkIDA9PT1iJiYoYj0tMSk7dm9pZCAwPT09YyYmKGM9MCk7dm9pZCAwPT09ZiYmKGY9MSk7dm9pZCAwPT09ZSYmKGU9bmV3IFRIUkVFLkNvbG9yKDE2Nzc3MjE1KSk7dm9pZCAwPT09ZCYmKGQ9VEhSRUUuTm9ybWFsQmxlbmRpbmcpO2M9TWF0aC5taW4oYyxNYXRoLm1heCgwLGMpKTt0aGlzLmxlbnNGbGFyZXMucHVzaCh7dGV4dHVyZTphLHNpemU6YixkaXN0YW5jZTpjLHg6MCx5OjAsejowLHNjYWxlOjEscm90YXRpb246MSxvcGFjaXR5OmYsY29sb3I6ZSxibGVuZGluZzpkfSl9O1xuVEhSRUUuTGVuc0ZsYXJlLnByb3RvdHlwZS51cGRhdGVMZW5zRmxhcmVzPWZ1bmN0aW9uKCl7dmFyIGEsYj10aGlzLmxlbnNGbGFyZXMubGVuZ3RoLGMsZD0yKi10aGlzLnBvc2l0aW9uU2NyZWVuLngsZT0yKi10aGlzLnBvc2l0aW9uU2NyZWVuLnk7Zm9yKGE9MDthPGI7YSsrKWM9dGhpcy5sZW5zRmxhcmVzW2FdLGMueD10aGlzLnBvc2l0aW9uU2NyZWVuLngrZCpjLmRpc3RhbmNlLGMueT10aGlzLnBvc2l0aW9uU2NyZWVuLnkrZSpjLmRpc3RhbmNlLGMud2FudGVkUm90YXRpb249MC4yNSpjLngqTWF0aC5QSSxjLnJvdGF0aW9uKz0wLjI1KihjLndhbnRlZFJvdGF0aW9uLWMucm90YXRpb24pfTtUSFJFRS5Nb3JwaEJsZW5kTWVzaD1mdW5jdGlvbihhLGIpe1RIUkVFLk1lc2guY2FsbCh0aGlzLGEsYik7dGhpcy5hbmltYXRpb25zTWFwPXt9O3RoaXMuYW5pbWF0aW9uc0xpc3Q9W107dmFyIGM9dGhpcy5nZW9tZXRyeS5tb3JwaFRhcmdldHMubGVuZ3RoO3RoaXMuY3JlYXRlQW5pbWF0aW9uKFwiX19kZWZhdWx0XCIsMCxjLTEsYy8xKTt0aGlzLnNldEFuaW1hdGlvbldlaWdodChcIl9fZGVmYXVsdFwiLDEpfTtUSFJFRS5Nb3JwaEJsZW5kTWVzaC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5NZXNoLnByb3RvdHlwZSk7XG5USFJFRS5Nb3JwaEJsZW5kTWVzaC5wcm90b3R5cGUuY3JlYXRlQW5pbWF0aW9uPWZ1bmN0aW9uKGEsYixjLGQpe2I9e3N0YXJ0RnJhbWU6YixlbmRGcmFtZTpjLGxlbmd0aDpjLWIrMSxmcHM6ZCxkdXJhdGlvbjooYy1iKS9kLGxhc3RGcmFtZTowLGN1cnJlbnRGcmFtZTowLGFjdGl2ZTohMSx0aW1lOjAsZGlyZWN0aW9uOjEsd2VpZ2h0OjEsZGlyZWN0aW9uQmFja3dhcmRzOiExLG1pcnJvcmVkTG9vcDohMX07dGhpcy5hbmltYXRpb25zTWFwW2FdPWI7dGhpcy5hbmltYXRpb25zTGlzdC5wdXNoKGIpfTtcblRIUkVFLk1vcnBoQmxlbmRNZXNoLnByb3RvdHlwZS5hdXRvQ3JlYXRlQW5pbWF0aW9ucz1mdW5jdGlvbihhKXtmb3IodmFyIGI9LyhbYS16XSspKFxcZCspLyxjLGQ9e30sZT10aGlzLmdlb21ldHJ5LGY9MCxoPWUubW9ycGhUYXJnZXRzLmxlbmd0aDtmPGg7ZisrKXt2YXIgZz1lLm1vcnBoVGFyZ2V0c1tmXS5uYW1lLm1hdGNoKGIpO2lmKGcmJjE8Zy5sZW5ndGgpe3ZhciBpPWdbMV07ZFtpXXx8KGRbaV09e3N0YXJ0OkluZmluaXR5LGVuZDotSW5maW5pdHl9KTtnPWRbaV07ZjxnLnN0YXJ0JiYoZy5zdGFydD1mKTtmPmcuZW5kJiYoZy5lbmQ9Zik7Y3x8KGM9aSl9fWZvcihpIGluIGQpZz1kW2ldLHRoaXMuY3JlYXRlQW5pbWF0aW9uKGksZy5zdGFydCxnLmVuZCxhKTt0aGlzLmZpcnN0QW5pbWF0aW9uPWN9O1xuVEhSRUUuTW9ycGhCbGVuZE1lc2gucHJvdG90eXBlLnNldEFuaW1hdGlvbkRpcmVjdGlvbkZvcndhcmQ9ZnVuY3Rpb24oYSl7aWYoYT10aGlzLmFuaW1hdGlvbnNNYXBbYV0pYS5kaXJlY3Rpb249MSxhLmRpcmVjdGlvbkJhY2t3YXJkcz0hMX07VEhSRUUuTW9ycGhCbGVuZE1lc2gucHJvdG90eXBlLnNldEFuaW1hdGlvbkRpcmVjdGlvbkJhY2t3YXJkPWZ1bmN0aW9uKGEpe2lmKGE9dGhpcy5hbmltYXRpb25zTWFwW2FdKWEuZGlyZWN0aW9uPS0xLGEuZGlyZWN0aW9uQmFja3dhcmRzPSEwfTtUSFJFRS5Nb3JwaEJsZW5kTWVzaC5wcm90b3R5cGUuc2V0QW5pbWF0aW9uRlBTPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5hbmltYXRpb25zTWFwW2FdO2MmJihjLmZwcz1iLGMuZHVyYXRpb249KGMuZW5kLWMuc3RhcnQpL2MuZnBzKX07XG5USFJFRS5Nb3JwaEJsZW5kTWVzaC5wcm90b3R5cGUuc2V0QW5pbWF0aW9uRHVyYXRpb249ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmFuaW1hdGlvbnNNYXBbYV07YyYmKGMuZHVyYXRpb249YixjLmZwcz0oYy5lbmQtYy5zdGFydCkvYy5kdXJhdGlvbil9O1RIUkVFLk1vcnBoQmxlbmRNZXNoLnByb3RvdHlwZS5zZXRBbmltYXRpb25XZWlnaHQ9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmFuaW1hdGlvbnNNYXBbYV07YyYmKGMud2VpZ2h0PWIpfTtUSFJFRS5Nb3JwaEJsZW5kTWVzaC5wcm90b3R5cGUuc2V0QW5pbWF0aW9uVGltZT1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuYW5pbWF0aW9uc01hcFthXTtjJiYoYy50aW1lPWIpfTtUSFJFRS5Nb3JwaEJsZW5kTWVzaC5wcm90b3R5cGUuZ2V0QW5pbWF0aW9uVGltZT1mdW5jdGlvbihhKXt2YXIgYj0wO2lmKGE9dGhpcy5hbmltYXRpb25zTWFwW2FdKWI9YS50aW1lO3JldHVybiBifTtcblRIUkVFLk1vcnBoQmxlbmRNZXNoLnByb3RvdHlwZS5nZXRBbmltYXRpb25EdXJhdGlvbj1mdW5jdGlvbihhKXt2YXIgYj0tMTtpZihhPXRoaXMuYW5pbWF0aW9uc01hcFthXSliPWEuZHVyYXRpb247cmV0dXJuIGJ9O1RIUkVFLk1vcnBoQmxlbmRNZXNoLnByb3RvdHlwZS5wbGF5QW5pbWF0aW9uPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuYW5pbWF0aW9uc01hcFthXTtiPyhiLnRpbWU9MCxiLmFjdGl2ZT0hMCk6Y29uc29sZS53YXJuKFwiYW5pbWF0aW9uW1wiK2ErXCJdIHVuZGVmaW5lZFwiKX07VEhSRUUuTW9ycGhCbGVuZE1lc2gucHJvdG90eXBlLnN0b3BBbmltYXRpb249ZnVuY3Rpb24oYSl7aWYoYT10aGlzLmFuaW1hdGlvbnNNYXBbYV0pYS5hY3RpdmU9ITF9O1xuVEhSRUUuTW9ycGhCbGVuZE1lc2gucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPXRoaXMuYW5pbWF0aW9uc0xpc3QubGVuZ3RoO2I8YztiKyspe3ZhciBkPXRoaXMuYW5pbWF0aW9uc0xpc3RbYl07aWYoZC5hY3RpdmUpe3ZhciBlPWQuZHVyYXRpb24vZC5sZW5ndGg7ZC50aW1lKz1kLmRpcmVjdGlvbiphO2lmKGQubWlycm9yZWRMb29wKXtpZihkLnRpbWU+ZC5kdXJhdGlvbnx8MD5kLnRpbWUpZC5kaXJlY3Rpb24qPS0xLGQudGltZT5kLmR1cmF0aW9uJiYoZC50aW1lPWQuZHVyYXRpb24sZC5kaXJlY3Rpb25CYWNrd2FyZHM9ITApLDA+ZC50aW1lJiYoZC50aW1lPTAsZC5kaXJlY3Rpb25CYWNrd2FyZHM9ITEpfWVsc2UgZC50aW1lJT1kLmR1cmF0aW9uLDA+ZC50aW1lJiYoZC50aW1lKz1kLmR1cmF0aW9uKTt2YXIgZj1kLnN0YXJ0RnJhbWUrVEhSRUUuTWF0aC5jbGFtcChNYXRoLmZsb29yKGQudGltZS9lKSwwLGQubGVuZ3RoLTEpLGg9ZC53ZWlnaHQ7XG5mIT09ZC5jdXJyZW50RnJhbWUmJih0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1tkLmxhc3RGcmFtZV09MCx0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1tkLmN1cnJlbnRGcmFtZV09MSpoLHRoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzW2ZdPTAsZC5sYXN0RnJhbWU9ZC5jdXJyZW50RnJhbWUsZC5jdXJyZW50RnJhbWU9Zik7ZT1kLnRpbWUlZS9lO2QuZGlyZWN0aW9uQmFja3dhcmRzJiYoZT0xLWUpO3RoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzW2QuY3VycmVudEZyYW1lXT1lKmg7dGhpcy5tb3JwaFRhcmdldEluZmx1ZW5jZXNbZC5sYXN0RnJhbWVdPSgxLWUpKmh9fX07VEhSRUUuTGVuc0ZsYXJlUGx1Z2luPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGMpe3ZhciBkPWIuY3JlYXRlUHJvZ3JhbSgpLGU9Yi5jcmVhdGVTaGFkZXIoYi5GUkFHTUVOVF9TSEFERVIpLGY9Yi5jcmVhdGVTaGFkZXIoYi5WRVJURVhfU0hBREVSKSxnPVwicHJlY2lzaW9uIFwiK2MrXCIgZmxvYXQ7XFxuXCI7Yi5zaGFkZXJTb3VyY2UoZSxnK2EuZnJhZ21lbnRTaGFkZXIpO2Iuc2hhZGVyU291cmNlKGYsZythLnZlcnRleFNoYWRlcik7Yi5jb21waWxlU2hhZGVyKGUpO2IuY29tcGlsZVNoYWRlcihmKTtiLmF0dGFjaFNoYWRlcihkLGUpO2IuYXR0YWNoU2hhZGVyKGQsZik7Yi5saW5rUHJvZ3JhbShkKTtyZXR1cm4gZH12YXIgYixjLGQsZSxmLGgsZyxpLGssbSxsLHAsdDt0aGlzLmluaXQ9ZnVuY3Rpb24ocyl7Yj1zLmNvbnRleHQ7Yz1zO2Q9cy5nZXRQcmVjaXNpb24oKTtlPW5ldyBGbG9hdDMyQXJyYXkoMTYpO2Y9bmV3IFVpbnQxNkFycmF5KDYpO3M9MDtlW3MrK109LTE7ZVtzKytdPS0xO1xuZVtzKytdPTA7ZVtzKytdPTA7ZVtzKytdPTE7ZVtzKytdPS0xO2VbcysrXT0xO2VbcysrXT0wO2VbcysrXT0xO2VbcysrXT0xO2VbcysrXT0xO2VbcysrXT0xO2VbcysrXT0tMTtlW3MrK109MTtlW3MrK109MDtlW3MrK109MTtzPTA7ZltzKytdPTA7ZltzKytdPTE7ZltzKytdPTI7ZltzKytdPTA7ZltzKytdPTI7ZltzKytdPTM7aD1iLmNyZWF0ZUJ1ZmZlcigpO2c9Yi5jcmVhdGVCdWZmZXIoKTtiLmJpbmRCdWZmZXIoYi5BUlJBWV9CVUZGRVIsaCk7Yi5idWZmZXJEYXRhKGIuQVJSQVlfQlVGRkVSLGUsYi5TVEFUSUNfRFJBVyk7Yi5iaW5kQnVmZmVyKGIuRUxFTUVOVF9BUlJBWV9CVUZGRVIsZyk7Yi5idWZmZXJEYXRhKGIuRUxFTUVOVF9BUlJBWV9CVUZGRVIsZixiLlNUQVRJQ19EUkFXKTtpPWIuY3JlYXRlVGV4dHVyZSgpO2s9Yi5jcmVhdGVUZXh0dXJlKCk7Yi5iaW5kVGV4dHVyZShiLlRFWFRVUkVfMkQsaSk7Yi50ZXhJbWFnZTJEKGIuVEVYVFVSRV8yRCwwLGIuUkdCLDE2LDE2LFxuMCxiLlJHQixiLlVOU0lHTkVEX0JZVEUsbnVsbCk7Yi50ZXhQYXJhbWV0ZXJpKGIuVEVYVFVSRV8yRCxiLlRFWFRVUkVfV1JBUF9TLGIuQ0xBTVBfVE9fRURHRSk7Yi50ZXhQYXJhbWV0ZXJpKGIuVEVYVFVSRV8yRCxiLlRFWFRVUkVfV1JBUF9ULGIuQ0xBTVBfVE9fRURHRSk7Yi50ZXhQYXJhbWV0ZXJpKGIuVEVYVFVSRV8yRCxiLlRFWFRVUkVfTUFHX0ZJTFRFUixiLk5FQVJFU1QpO2IudGV4UGFyYW1ldGVyaShiLlRFWFRVUkVfMkQsYi5URVhUVVJFX01JTl9GSUxURVIsYi5ORUFSRVNUKTtiLmJpbmRUZXh0dXJlKGIuVEVYVFVSRV8yRCxrKTtiLnRleEltYWdlMkQoYi5URVhUVVJFXzJELDAsYi5SR0JBLDE2LDE2LDAsYi5SR0JBLGIuVU5TSUdORURfQllURSxudWxsKTtiLnRleFBhcmFtZXRlcmkoYi5URVhUVVJFXzJELGIuVEVYVFVSRV9XUkFQX1MsYi5DTEFNUF9UT19FREdFKTtiLnRleFBhcmFtZXRlcmkoYi5URVhUVVJFXzJELGIuVEVYVFVSRV9XUkFQX1QsYi5DTEFNUF9UT19FREdFKTtcbmIudGV4UGFyYW1ldGVyaShiLlRFWFRVUkVfMkQsYi5URVhUVVJFX01BR19GSUxURVIsYi5ORUFSRVNUKTtiLnRleFBhcmFtZXRlcmkoYi5URVhUVVJFXzJELGIuVEVYVFVSRV9NSU5fRklMVEVSLGIuTkVBUkVTVCk7MD49Yi5nZXRQYXJhbWV0ZXIoYi5NQVhfVkVSVEVYX1RFWFRVUkVfSU1BR0VfVU5JVFMpPyhtPSExLGw9YShUSFJFRS5TaGFkZXJGbGFyZXMubGVuc0ZsYXJlLGQpKToobT0hMCxsPWEoVEhSRUUuU2hhZGVyRmxhcmVzLmxlbnNGbGFyZVZlcnRleFRleHR1cmUsZCkpO3A9e307dD17fTtwLnZlcnRleD1iLmdldEF0dHJpYkxvY2F0aW9uKGwsXCJwb3NpdGlvblwiKTtwLnV2PWIuZ2V0QXR0cmliTG9jYXRpb24obCxcInV2XCIpO3QucmVuZGVyVHlwZT1iLmdldFVuaWZvcm1Mb2NhdGlvbihsLFwicmVuZGVyVHlwZVwiKTt0Lm1hcD1iLmdldFVuaWZvcm1Mb2NhdGlvbihsLFwibWFwXCIpO3Qub2NjbHVzaW9uTWFwPWIuZ2V0VW5pZm9ybUxvY2F0aW9uKGwsXCJvY2NsdXNpb25NYXBcIik7dC5vcGFjaXR5PVxuYi5nZXRVbmlmb3JtTG9jYXRpb24obCxcIm9wYWNpdHlcIik7dC5jb2xvcj1iLmdldFVuaWZvcm1Mb2NhdGlvbihsLFwiY29sb3JcIik7dC5zY2FsZT1iLmdldFVuaWZvcm1Mb2NhdGlvbihsLFwic2NhbGVcIik7dC5yb3RhdGlvbj1iLmdldFVuaWZvcm1Mb2NhdGlvbihsLFwicm90YXRpb25cIik7dC5zY3JlZW5Qb3NpdGlvbj1iLmdldFVuaWZvcm1Mb2NhdGlvbihsLFwic2NyZWVuUG9zaXRpb25cIil9O3RoaXMucmVuZGVyPWZ1bmN0aW9uKGEsZCxlLGYpe3ZhciBhPWEuX193ZWJnbEZsYXJlcyxyPWEubGVuZ3RoO2lmKHIpe3ZhciB2PW5ldyBUSFJFRS5WZWN0b3IzLHo9Zi9lLEc9MC41KmUsdz0wLjUqZix5PTE2L2YsRT1uZXcgVEhSRUUuVmVjdG9yMih5KnoseSksQT1uZXcgVEhSRUUuVmVjdG9yMygxLDEsMCksSz1uZXcgVEhSRUUuVmVjdG9yMigxLDEpLEQ9dCx5PXA7Yi51c2VQcm9ncmFtKGwpO2IuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkocC52ZXJ0ZXgpO2IuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkocC51dik7XG5iLnVuaWZvcm0xaShELm9jY2x1c2lvbk1hcCwwKTtiLnVuaWZvcm0xaShELm1hcCwxKTtiLmJpbmRCdWZmZXIoYi5BUlJBWV9CVUZGRVIsaCk7Yi52ZXJ0ZXhBdHRyaWJQb2ludGVyKHkudmVydGV4LDIsYi5GTE9BVCwhMSwxNiwwKTtiLnZlcnRleEF0dHJpYlBvaW50ZXIoeS51diwyLGIuRkxPQVQsITEsMTYsOCk7Yi5iaW5kQnVmZmVyKGIuRUxFTUVOVF9BUlJBWV9CVUZGRVIsZyk7Yi5kaXNhYmxlKGIuQ1VMTF9GQUNFKTtiLmRlcHRoTWFzayghMSk7dmFyIEYsTyx4LEksQjtmb3IoRj0wO0Y8cjtGKyspaWYoeT0xNi9mLEUuc2V0KHkqeix5KSxJPWFbRl0sdi5zZXQoSS5tYXRyaXhXb3JsZC5lbGVtZW50c1sxMl0sSS5tYXRyaXhXb3JsZC5lbGVtZW50c1sxM10sSS5tYXRyaXhXb3JsZC5lbGVtZW50c1sxNF0pLHYuYXBwbHlNYXRyaXg0KGQubWF0cml4V29ybGRJbnZlcnNlKSx2LmFwcGx5UHJvamVjdGlvbihkLnByb2plY3Rpb25NYXRyaXgpLEEuY29weSh2KSxLLng9QS54KkcrRyxcbksueT1BLnkqdyt3LG18fDA8Sy54JiZLLng8ZSYmMDxLLnkmJksueTxmKXtiLmFjdGl2ZVRleHR1cmUoYi5URVhUVVJFMSk7Yi5iaW5kVGV4dHVyZShiLlRFWFRVUkVfMkQsaSk7Yi5jb3B5VGV4SW1hZ2UyRChiLlRFWFRVUkVfMkQsMCxiLlJHQixLLngtOCxLLnktOCwxNiwxNiwwKTtiLnVuaWZvcm0xaShELnJlbmRlclR5cGUsMCk7Yi51bmlmb3JtMmYoRC5zY2FsZSxFLngsRS55KTtiLnVuaWZvcm0zZihELnNjcmVlblBvc2l0aW9uLEEueCxBLnksQS56KTtiLmRpc2FibGUoYi5CTEVORCk7Yi5lbmFibGUoYi5ERVBUSF9URVNUKTtiLmRyYXdFbGVtZW50cyhiLlRSSUFOR0xFUyw2LGIuVU5TSUdORURfU0hPUlQsMCk7Yi5hY3RpdmVUZXh0dXJlKGIuVEVYVFVSRTApO2IuYmluZFRleHR1cmUoYi5URVhUVVJFXzJELGspO2IuY29weVRleEltYWdlMkQoYi5URVhUVVJFXzJELDAsYi5SR0JBLEsueC04LEsueS04LDE2LDE2LDApO2IudW5pZm9ybTFpKEQucmVuZGVyVHlwZSwxKTtiLmRpc2FibGUoYi5ERVBUSF9URVNUKTtcbmIuYWN0aXZlVGV4dHVyZShiLlRFWFRVUkUxKTtiLmJpbmRUZXh0dXJlKGIuVEVYVFVSRV8yRCxpKTtiLmRyYXdFbGVtZW50cyhiLlRSSUFOR0xFUyw2LGIuVU5TSUdORURfU0hPUlQsMCk7SS5wb3NpdGlvblNjcmVlbi5jb3B5KEEpO0kuY3VzdG9tVXBkYXRlQ2FsbGJhY2s/SS5jdXN0b21VcGRhdGVDYWxsYmFjayhJKTpJLnVwZGF0ZUxlbnNGbGFyZXMoKTtiLnVuaWZvcm0xaShELnJlbmRlclR5cGUsMik7Yi5lbmFibGUoYi5CTEVORCk7Tz0wO2Zvcih4PUkubGVuc0ZsYXJlcy5sZW5ndGg7Tzx4O08rKylCPUkubGVuc0ZsYXJlc1tPXSwwLjAwMTxCLm9wYWNpdHkmJjAuMDAxPEIuc2NhbGUmJihBLng9Qi54LEEueT1CLnksQS56PUIueix5PUIuc2l6ZSpCLnNjYWxlL2YsRS54PXkqeixFLnk9eSxiLnVuaWZvcm0zZihELnNjcmVlblBvc2l0aW9uLEEueCxBLnksQS56KSxiLnVuaWZvcm0yZihELnNjYWxlLEUueCxFLnkpLGIudW5pZm9ybTFmKEQucm90YXRpb24sQi5yb3RhdGlvbiksYi51bmlmb3JtMWYoRC5vcGFjaXR5LFxuQi5vcGFjaXR5KSxiLnVuaWZvcm0zZihELmNvbG9yLEIuY29sb3IucixCLmNvbG9yLmcsQi5jb2xvci5iKSxjLnNldEJsZW5kaW5nKEIuYmxlbmRpbmcsQi5ibGVuZEVxdWF0aW9uLEIuYmxlbmRTcmMsQi5ibGVuZERzdCksYy5zZXRUZXh0dXJlKEIudGV4dHVyZSwxKSxiLmRyYXdFbGVtZW50cyhiLlRSSUFOR0xFUyw2LGIuVU5TSUdORURfU0hPUlQsMCkpfWIuZW5hYmxlKGIuQ1VMTF9GQUNFKTtiLmVuYWJsZShiLkRFUFRIX1RFU1QpO2IuZGVwdGhNYXNrKCEwKX19fTtUSFJFRS5TaGFkb3dNYXBQbHVnaW49ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZCxlLGYsaD1uZXcgVEhSRUUuRnJ1c3R1bSxnPW5ldyBUSFJFRS5NYXRyaXg0LGk9bmV3IFRIUkVFLlZlY3RvcjMsaz1uZXcgVEhSRUUuVmVjdG9yMyxtPW5ldyBUSFJFRS5WZWN0b3IzO3RoaXMuaW5pdD1mdW5jdGlvbihnKXthPWcuY29udGV4dDtiPWc7dmFyIGc9VEhSRUUuU2hhZGVyTGliLmRlcHRoUkdCQSxoPVRIUkVFLlVuaWZvcm1zVXRpbHMuY2xvbmUoZy51bmlmb3Jtcyk7Yz1uZXcgVEhSRUUuU2hhZGVyTWF0ZXJpYWwoe2ZyYWdtZW50U2hhZGVyOmcuZnJhZ21lbnRTaGFkZXIsdmVydGV4U2hhZGVyOmcudmVydGV4U2hhZGVyLHVuaWZvcm1zOmh9KTtkPW5ldyBUSFJFRS5TaGFkZXJNYXRlcmlhbCh7ZnJhZ21lbnRTaGFkZXI6Zy5mcmFnbWVudFNoYWRlcix2ZXJ0ZXhTaGFkZXI6Zy52ZXJ0ZXhTaGFkZXIsdW5pZm9ybXM6aCxtb3JwaFRhcmdldHM6ITB9KTtlPW5ldyBUSFJFRS5TaGFkZXJNYXRlcmlhbCh7ZnJhZ21lbnRTaGFkZXI6Zy5mcmFnbWVudFNoYWRlcixcbnZlcnRleFNoYWRlcjpnLnZlcnRleFNoYWRlcix1bmlmb3JtczpoLHNraW5uaW5nOiEwfSk7Zj1uZXcgVEhSRUUuU2hhZGVyTWF0ZXJpYWwoe2ZyYWdtZW50U2hhZGVyOmcuZnJhZ21lbnRTaGFkZXIsdmVydGV4U2hhZGVyOmcudmVydGV4U2hhZGVyLHVuaWZvcm1zOmgsbW9ycGhUYXJnZXRzOiEwLHNraW5uaW5nOiEwfSk7Yy5fc2hhZG93UGFzcz0hMDtkLl9zaGFkb3dQYXNzPSEwO2UuX3NoYWRvd1Bhc3M9ITA7Zi5fc2hhZG93UGFzcz0hMH07dGhpcy5yZW5kZXI9ZnVuY3Rpb24oYSxjKXtiLnNoYWRvd01hcEVuYWJsZWQmJmIuc2hhZG93TWFwQXV0b1VwZGF0ZSYmdGhpcy51cGRhdGUoYSxjKX07dGhpcy51cGRhdGU9ZnVuY3Rpb24obCxwKXt2YXIgdCxzLHEsbix1LHIsdix6LEcsdz1bXTtuPTA7YS5jbGVhckNvbG9yKDEsMSwxLDEpO2EuZGlzYWJsZShhLkJMRU5EKTthLmVuYWJsZShhLkNVTExfRkFDRSk7YS5mcm9udEZhY2UoYS5DQ1cpO2Iuc2hhZG93TWFwQ3VsbEZhY2U9PT1USFJFRS5DdWxsRmFjZUZyb250P1xuYS5jdWxsRmFjZShhLkZST05UKTphLmN1bGxGYWNlKGEuQkFDSyk7Yi5zZXREZXB0aFRlc3QoITApO3Q9MDtmb3Iocz1sLl9fbGlnaHRzLmxlbmd0aDt0PHM7dCsrKWlmKHE9bC5fX2xpZ2h0c1t0XSxxLmNhc3RTaGFkb3cpaWYocSBpbnN0YW5jZW9mIFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQmJnEuc2hhZG93Q2FzY2FkZSlmb3IodT0wO3U8cS5zaGFkb3dDYXNjYWRlQ291bnQ7dSsrKXt2YXIgeTtpZihxLnNoYWRvd0Nhc2NhZGVBcnJheVt1XSl5PXEuc2hhZG93Q2FzY2FkZUFycmF5W3VdO2Vsc2V7Rz1xO3Y9dTt5PW5ldyBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0O3kuaXNWaXJ0dWFsPSEwO3kub25seVNoYWRvdz0hMDt5LmNhc3RTaGFkb3c9ITA7eS5zaGFkb3dDYW1lcmFOZWFyPUcuc2hhZG93Q2FtZXJhTmVhcjt5LnNoYWRvd0NhbWVyYUZhcj1HLnNoYWRvd0NhbWVyYUZhcjt5LnNoYWRvd0NhbWVyYUxlZnQ9Ry5zaGFkb3dDYW1lcmFMZWZ0O3kuc2hhZG93Q2FtZXJhUmlnaHQ9Ry5zaGFkb3dDYW1lcmFSaWdodDtcbnkuc2hhZG93Q2FtZXJhQm90dG9tPUcuc2hhZG93Q2FtZXJhQm90dG9tO3kuc2hhZG93Q2FtZXJhVG9wPUcuc2hhZG93Q2FtZXJhVG9wO3kuc2hhZG93Q2FtZXJhVmlzaWJsZT1HLnNoYWRvd0NhbWVyYVZpc2libGU7eS5zaGFkb3dEYXJrbmVzcz1HLnNoYWRvd0RhcmtuZXNzO3kuc2hhZG93Qmlhcz1HLnNoYWRvd0Nhc2NhZGVCaWFzW3ZdO3kuc2hhZG93TWFwV2lkdGg9Ry5zaGFkb3dDYXNjYWRlV2lkdGhbdl07eS5zaGFkb3dNYXBIZWlnaHQ9Ry5zaGFkb3dDYXNjYWRlSGVpZ2h0W3ZdO3kucG9pbnRzV29ybGQ9W107eS5wb2ludHNGcnVzdHVtPVtdO3o9eS5wb2ludHNXb3JsZDtyPXkucG9pbnRzRnJ1c3R1bTtmb3IodmFyIEU9MDs4PkU7RSsrKXpbRV09bmV3IFRIUkVFLlZlY3RvcjMscltFXT1uZXcgVEhSRUUuVmVjdG9yMzt6PUcuc2hhZG93Q2FzY2FkZU5lYXJaW3ZdO0c9Ry5zaGFkb3dDYXNjYWRlRmFyWlt2XTtyWzBdLnNldCgtMSwtMSx6KTtyWzFdLnNldCgxLC0xLHopO3JbMl0uc2V0KC0xLFxuMSx6KTtyWzNdLnNldCgxLDEseik7cls0XS5zZXQoLTEsLTEsRyk7cls1XS5zZXQoMSwtMSxHKTtyWzZdLnNldCgtMSwxLEcpO3JbN10uc2V0KDEsMSxHKTt5Lm9yaWdpbmFsQ2FtZXJhPXA7cj1uZXcgVEhSRUUuR3lyb3Njb3BlO3IucG9zaXRpb249cS5zaGFkb3dDYXNjYWRlT2Zmc2V0O3IuYWRkKHkpO3IuYWRkKHkudGFyZ2V0KTtwLmFkZChyKTtxLnNoYWRvd0Nhc2NhZGVBcnJheVt1XT15O2NvbnNvbGUubG9nKFwiQ3JlYXRlZCB2aXJ0dWFsTGlnaHRcIix5KX12PXE7ej11O0c9di5zaGFkb3dDYXNjYWRlQXJyYXlbel07Ry5wb3NpdGlvbi5jb3B5KHYucG9zaXRpb24pO0cudGFyZ2V0LnBvc2l0aW9uLmNvcHkodi50YXJnZXQucG9zaXRpb24pO0cubG9va0F0KEcudGFyZ2V0KTtHLnNoYWRvd0NhbWVyYVZpc2libGU9di5zaGFkb3dDYW1lcmFWaXNpYmxlO0cuc2hhZG93RGFya25lc3M9di5zaGFkb3dEYXJrbmVzcztHLnNoYWRvd0JpYXM9di5zaGFkb3dDYXNjYWRlQmlhc1t6XTtyPXYuc2hhZG93Q2FzY2FkZU5lYXJaW3pdO1xudj12LnNoYWRvd0Nhc2NhZGVGYXJaW3pdO0c9Ry5wb2ludHNGcnVzdHVtO0dbMF0uej1yO0dbMV0uej1yO0dbMl0uej1yO0dbM10uej1yO0dbNF0uej12O0dbNV0uej12O0dbNl0uej12O0dbN10uej12O3dbbl09eTtuKyt9ZWxzZSB3W25dPXEsbisrO3Q9MDtmb3Iocz13Lmxlbmd0aDt0PHM7dCsrKXtxPXdbdF07cS5zaGFkb3dNYXB8fCh1PVRIUkVFLkxpbmVhckZpbHRlcixiLnNoYWRvd01hcFR5cGU9PT1USFJFRS5QQ0ZTb2Z0U2hhZG93TWFwJiYodT1USFJFRS5OZWFyZXN0RmlsdGVyKSxxLnNoYWRvd01hcD1uZXcgVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQocS5zaGFkb3dNYXBXaWR0aCxxLnNoYWRvd01hcEhlaWdodCx7bWluRmlsdGVyOnUsbWFnRmlsdGVyOnUsZm9ybWF0OlRIUkVFLlJHQkFGb3JtYXR9KSxxLnNoYWRvd01hcFNpemU9bmV3IFRIUkVFLlZlY3RvcjIocS5zaGFkb3dNYXBXaWR0aCxxLnNoYWRvd01hcEhlaWdodCkscS5zaGFkb3dNYXRyaXg9bmV3IFRIUkVFLk1hdHJpeDQpO1xuaWYoIXEuc2hhZG93Q2FtZXJhKXtpZihxIGluc3RhbmNlb2YgVEhSRUUuU3BvdExpZ2h0KXEuc2hhZG93Q2FtZXJhPW5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYShxLnNoYWRvd0NhbWVyYUZvdixxLnNoYWRvd01hcFdpZHRoL3Euc2hhZG93TWFwSGVpZ2h0LHEuc2hhZG93Q2FtZXJhTmVhcixxLnNoYWRvd0NhbWVyYUZhcik7ZWxzZSBpZihxIGluc3RhbmNlb2YgVEhSRUUuRGlyZWN0aW9uYWxMaWdodClxLnNoYWRvd0NhbWVyYT1uZXcgVEhSRUUuT3J0aG9ncmFwaGljQ2FtZXJhKHEuc2hhZG93Q2FtZXJhTGVmdCxxLnNoYWRvd0NhbWVyYVJpZ2h0LHEuc2hhZG93Q2FtZXJhVG9wLHEuc2hhZG93Q2FtZXJhQm90dG9tLHEuc2hhZG93Q2FtZXJhTmVhcixxLnNoYWRvd0NhbWVyYUZhcik7ZWxzZXtjb25zb2xlLmVycm9yKFwiVW5zdXBwb3J0ZWQgbGlnaHQgdHlwZSBmb3Igc2hhZG93XCIpO2NvbnRpbnVlfWwuYWRkKHEuc2hhZG93Q2FtZXJhKTshMD09PWwuYXV0b1VwZGF0ZSYmbC51cGRhdGVNYXRyaXhXb3JsZCgpfXEuc2hhZG93Q2FtZXJhVmlzaWJsZSYmXG4hcS5jYW1lcmFIZWxwZXImJihxLmNhbWVyYUhlbHBlcj1uZXcgVEhSRUUuQ2FtZXJhSGVscGVyKHEuc2hhZG93Q2FtZXJhKSxxLnNoYWRvd0NhbWVyYS5hZGQocS5jYW1lcmFIZWxwZXIpKTtpZihxLmlzVmlydHVhbCYmeS5vcmlnaW5hbENhbWVyYT09cCl7dT1wO249cS5zaGFkb3dDYW1lcmE7cj1xLnBvaW50c0ZydXN0dW07Rz1xLnBvaW50c1dvcmxkO2kuc2V0KEluZmluaXR5LEluZmluaXR5LEluZmluaXR5KTtrLnNldCgtSW5maW5pdHksLUluZmluaXR5LC1JbmZpbml0eSk7Zm9yKHY9MDs4PnY7disrKXo9R1t2XSx6LmNvcHkoclt2XSksVEhSRUUuU2hhZG93TWFwUGx1Z2luLl9fcHJvamVjdG9yLnVucHJvamVjdFZlY3Rvcih6LHUpLHouYXBwbHlNYXRyaXg0KG4ubWF0cml4V29ybGRJbnZlcnNlKSx6Lng8aS54JiYoaS54PXoueCksei54PmsueCYmKGsueD16LngpLHoueTxpLnkmJihpLnk9ei55KSx6Lnk+ay55JiYoay55PXoueSksei56PGkueiYmKGkuej16LnopLHouej5rLnomJlxuKGsuej16LnopO24ubGVmdD1pLng7bi5yaWdodD1rLng7bi50b3A9ay55O24uYm90dG9tPWkueTtuLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKX1uPXEuc2hhZG93TWFwO3I9cS5zaGFkb3dNYXRyaXg7dT1xLnNoYWRvd0NhbWVyYTt1LnBvc2l0aW9uLnNldEZyb21NYXRyaXhQb3NpdGlvbihxLm1hdHJpeFdvcmxkKTttLnNldEZyb21NYXRyaXhQb3NpdGlvbihxLnRhcmdldC5tYXRyaXhXb3JsZCk7dS5sb29rQXQobSk7dS51cGRhdGVNYXRyaXhXb3JsZCgpO3UubWF0cml4V29ybGRJbnZlcnNlLmdldEludmVyc2UodS5tYXRyaXhXb3JsZCk7cS5jYW1lcmFIZWxwZXImJihxLmNhbWVyYUhlbHBlci52aXNpYmxlPXEuc2hhZG93Q2FtZXJhVmlzaWJsZSk7cS5zaGFkb3dDYW1lcmFWaXNpYmxlJiZxLmNhbWVyYUhlbHBlci51cGRhdGUoKTtyLnNldCgwLjUsMCwwLDAuNSwwLDAuNSwwLDAuNSwwLDAsMC41LDAuNSwwLDAsMCwxKTtyLm11bHRpcGx5KHUucHJvamVjdGlvbk1hdHJpeCk7ci5tdWx0aXBseSh1Lm1hdHJpeFdvcmxkSW52ZXJzZSk7XG5nLm11bHRpcGx5TWF0cmljZXModS5wcm9qZWN0aW9uTWF0cml4LHUubWF0cml4V29ybGRJbnZlcnNlKTtoLnNldEZyb21NYXRyaXgoZyk7Yi5zZXRSZW5kZXJUYXJnZXQobik7Yi5jbGVhcigpO0c9bC5fX3dlYmdsT2JqZWN0cztxPTA7Zm9yKG49Ry5sZW5ndGg7cTxuO3ErKylpZih2PUdbcV0scj12Lm9iamVjdCx2LnJlbmRlcj0hMSxyLnZpc2libGUmJnIuY2FzdFNoYWRvdyYmKCEociBpbnN0YW5jZW9mIFRIUkVFLk1lc2h8fHIgaW5zdGFuY2VvZiBUSFJFRS5QYXJ0aWNsZVN5c3RlbSl8fCFyLmZydXN0dW1DdWxsZWR8fGguaW50ZXJzZWN0c09iamVjdChyKSkpci5fbW9kZWxWaWV3TWF0cml4Lm11bHRpcGx5TWF0cmljZXModS5tYXRyaXhXb3JsZEludmVyc2Usci5tYXRyaXhXb3JsZCksdi5yZW5kZXI9ITA7cT0wO2ZvcihuPUcubGVuZ3RoO3E8bjtxKyspdj1HW3FdLHYucmVuZGVyJiYocj12Lm9iamVjdCx2PXYuYnVmZmVyLEU9ci5tYXRlcmlhbCBpbnN0YW5jZW9mIFRIUkVFLk1lc2hGYWNlTWF0ZXJpYWw/XG5yLm1hdGVyaWFsLm1hdGVyaWFsc1swXTpyLm1hdGVyaWFsLHo9MDxyLmdlb21ldHJ5Lm1vcnBoVGFyZ2V0cy5sZW5ndGgmJkUubW9ycGhUYXJnZXRzLEU9ciBpbnN0YW5jZW9mIFRIUkVFLlNraW5uZWRNZXNoJiZFLnNraW5uaW5nLHo9ci5jdXN0b21EZXB0aE1hdGVyaWFsP3IuY3VzdG9tRGVwdGhNYXRlcmlhbDpFP3o/ZjplOno/ZDpjLHYgaW5zdGFuY2VvZiBUSFJFRS5CdWZmZXJHZW9tZXRyeT9iLnJlbmRlckJ1ZmZlckRpcmVjdCh1LGwuX19saWdodHMsbnVsbCx6LHYscik6Yi5yZW5kZXJCdWZmZXIodSxsLl9fbGlnaHRzLG51bGwseix2LHIpKTtHPWwuX193ZWJnbE9iamVjdHNJbW1lZGlhdGU7cT0wO2ZvcihuPUcubGVuZ3RoO3E8bjtxKyspdj1HW3FdLHI9di5vYmplY3Qsci52aXNpYmxlJiZyLmNhc3RTaGFkb3cmJihyLl9tb2RlbFZpZXdNYXRyaXgubXVsdGlwbHlNYXRyaWNlcyh1Lm1hdHJpeFdvcmxkSW52ZXJzZSxyLm1hdHJpeFdvcmxkKSxiLnJlbmRlckltbWVkaWF0ZU9iamVjdCh1LFxubC5fX2xpZ2h0cyxudWxsLGMscikpfXQ9Yi5nZXRDbGVhckNvbG9yKCk7cz1iLmdldENsZWFyQWxwaGEoKTthLmNsZWFyQ29sb3IodC5yLHQuZyx0LmIscyk7YS5lbmFibGUoYS5CTEVORCk7Yi5zaGFkb3dNYXBDdWxsRmFjZT09PVRIUkVFLkN1bGxGYWNlRnJvbnQmJmEuY3VsbEZhY2UoYS5CQUNLKX19O1RIUkVFLlNoYWRvd01hcFBsdWdpbi5fX3Byb2plY3Rvcj1uZXcgVEhSRUUuUHJvamVjdG9yO1RIUkVFLlNwcml0ZVBsdWdpbj1mdW5jdGlvbigpe3ZhciBhLGIsYyxkLGUsZixoLGcsaSxrLG0sbCxwLHQscyxxLG47ZnVuY3Rpb24gdShhLGIpe3JldHVybiBhLnohPT1iLno/Yi56LWEuejpiLmlkLWEuaWR9dmFyIHIsdix6LEcsdyx5LEUsQTt0aGlzLmluaXQ9ZnVuY3Rpb24odSl7cj11LmNvbnRleHQ7dj11O0c9bmV3IEZsb2F0MzJBcnJheShbLTAuNSwtMC41LDAsMCwwLjUsLTAuNSwxLDAsMC41LDAuNSwxLDEsLTAuNSwwLjUsMCwxXSk7dz1uZXcgVWludDE2QXJyYXkoWzAsMSwyLDAsMiwzXSk7eT1yLmNyZWF0ZUJ1ZmZlcigpO0U9ci5jcmVhdGVCdWZmZXIoKTtyLmJpbmRCdWZmZXIoci5BUlJBWV9CVUZGRVIseSk7ci5idWZmZXJEYXRhKHIuQVJSQVlfQlVGRkVSLEcsci5TVEFUSUNfRFJBVyk7ci5iaW5kQnVmZmVyKHIuRUxFTUVOVF9BUlJBWV9CVUZGRVIsRSk7ci5idWZmZXJEYXRhKHIuRUxFTUVOVF9BUlJBWV9CVUZGRVIsdyxyLlNUQVRJQ19EUkFXKTt2YXIgdT1yLmNyZWF0ZVByb2dyYW0oKSxcbkQ9ci5jcmVhdGVTaGFkZXIoci5WRVJURVhfU0hBREVSKSxGPXIuY3JlYXRlU2hhZGVyKHIuRlJBR01FTlRfU0hBREVSKTtyLnNoYWRlclNvdXJjZShELFtcInByZWNpc2lvbiBcIit2LmdldFByZWNpc2lvbigpK1wiIGZsb2F0O1wiLFwidW5pZm9ybSBtYXQ0IG1vZGVsVmlld01hdHJpeDtcXG51bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDtcXG51bmlmb3JtIGZsb2F0IHJvdGF0aW9uO1xcbnVuaWZvcm0gdmVjMiBzY2FsZTtcXG51bmlmb3JtIHZlYzIgdXZPZmZzZXQ7XFxudW5pZm9ybSB2ZWMyIHV2U2NhbGU7XFxuYXR0cmlidXRlIHZlYzIgcG9zaXRpb247XFxuYXR0cmlidXRlIHZlYzIgdXY7XFxudmFyeWluZyB2ZWMyIHZVVjtcXG52b2lkIG1haW4oKSB7XFxudlVWID0gdXZPZmZzZXQgKyB1diAqIHV2U2NhbGU7XFxudmVjMiBhbGlnbmVkUG9zaXRpb24gPSBwb3NpdGlvbiAqIHNjYWxlO1xcbnZlYzIgcm90YXRlZFBvc2l0aW9uO1xcbnJvdGF0ZWRQb3NpdGlvbi54ID0gY29zKCByb3RhdGlvbiApICogYWxpZ25lZFBvc2l0aW9uLnggLSBzaW4oIHJvdGF0aW9uICkgKiBhbGlnbmVkUG9zaXRpb24ueTtcXG5yb3RhdGVkUG9zaXRpb24ueSA9IHNpbiggcm90YXRpb24gKSAqIGFsaWduZWRQb3NpdGlvbi54ICsgY29zKCByb3RhdGlvbiApICogYWxpZ25lZFBvc2l0aW9uLnk7XFxudmVjNCBmaW5hbFBvc2l0aW9uO1xcbmZpbmFsUG9zaXRpb24gPSBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KCAwLjAsIDAuMCwgMC4wLCAxLjAgKTtcXG5maW5hbFBvc2l0aW9uLnh5ICs9IHJvdGF0ZWRQb3NpdGlvbjtcXG5maW5hbFBvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIGZpbmFsUG9zaXRpb247XFxuZ2xfUG9zaXRpb24gPSBmaW5hbFBvc2l0aW9uO1xcbn1cIl0uam9pbihcIlxcblwiKSk7XG5yLnNoYWRlclNvdXJjZShGLFtcInByZWNpc2lvbiBcIit2LmdldFByZWNpc2lvbigpK1wiIGZsb2F0O1wiLFwidW5pZm9ybSB2ZWMzIGNvbG9yO1xcbnVuaWZvcm0gc2FtcGxlcjJEIG1hcDtcXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxudW5pZm9ybSBpbnQgZm9nVHlwZTtcXG51bmlmb3JtIHZlYzMgZm9nQ29sb3I7XFxudW5pZm9ybSBmbG9hdCBmb2dEZW5zaXR5O1xcbnVuaWZvcm0gZmxvYXQgZm9nTmVhcjtcXG51bmlmb3JtIGZsb2F0IGZvZ0ZhcjtcXG51bmlmb3JtIGZsb2F0IGFscGhhVGVzdDtcXG52YXJ5aW5nIHZlYzIgdlVWO1xcbnZvaWQgbWFpbigpIHtcXG52ZWM0IHRleHR1cmUgPSB0ZXh0dXJlMkQoIG1hcCwgdlVWICk7XFxuaWYgKCB0ZXh0dXJlLmEgPCBhbHBoYVRlc3QgKSBkaXNjYXJkO1xcbmdsX0ZyYWdDb2xvciA9IHZlYzQoIGNvbG9yICogdGV4dHVyZS54eXosIHRleHR1cmUuYSAqIG9wYWNpdHkgKTtcXG5pZiAoIGZvZ1R5cGUgPiAwICkge1xcbmZsb2F0IGRlcHRoID0gZ2xfRnJhZ0Nvb3JkLnogLyBnbF9GcmFnQ29vcmQudztcXG5mbG9hdCBmb2dGYWN0b3IgPSAwLjA7XFxuaWYgKCBmb2dUeXBlID09IDEgKSB7XFxuZm9nRmFjdG9yID0gc21vb3Roc3RlcCggZm9nTmVhciwgZm9nRmFyLCBkZXB0aCApO1xcbn0gZWxzZSB7XFxuY29uc3QgZmxvYXQgTE9HMiA9IDEuNDQyNjk1O1xcbmZsb2F0IGZvZ0ZhY3RvciA9IGV4cDIoIC0gZm9nRGVuc2l0eSAqIGZvZ0RlbnNpdHkgKiBkZXB0aCAqIGRlcHRoICogTE9HMiApO1xcbmZvZ0ZhY3RvciA9IDEuMCAtIGNsYW1wKCBmb2dGYWN0b3IsIDAuMCwgMS4wICk7XFxufVxcbmdsX0ZyYWdDb2xvciA9IG1peCggZ2xfRnJhZ0NvbG9yLCB2ZWM0KCBmb2dDb2xvciwgZ2xfRnJhZ0NvbG9yLncgKSwgZm9nRmFjdG9yICk7XFxufVxcbn1cIl0uam9pbihcIlxcblwiKSk7XG5yLmNvbXBpbGVTaGFkZXIoRCk7ci5jb21waWxlU2hhZGVyKEYpO3IuYXR0YWNoU2hhZGVyKHUsRCk7ci5hdHRhY2hTaGFkZXIodSxGKTtyLmxpbmtQcm9ncmFtKHUpO0E9dTtxPXIuZ2V0QXR0cmliTG9jYXRpb24oQSxcInBvc2l0aW9uXCIpO249ci5nZXRBdHRyaWJMb2NhdGlvbihBLFwidXZcIik7YT1yLmdldFVuaWZvcm1Mb2NhdGlvbihBLFwidXZPZmZzZXRcIik7Yj1yLmdldFVuaWZvcm1Mb2NhdGlvbihBLFwidXZTY2FsZVwiKTtjPXIuZ2V0VW5pZm9ybUxvY2F0aW9uKEEsXCJyb3RhdGlvblwiKTtkPXIuZ2V0VW5pZm9ybUxvY2F0aW9uKEEsXCJzY2FsZVwiKTtlPXIuZ2V0VW5pZm9ybUxvY2F0aW9uKEEsXCJjb2xvclwiKTtmPXIuZ2V0VW5pZm9ybUxvY2F0aW9uKEEsXCJtYXBcIik7aD1yLmdldFVuaWZvcm1Mb2NhdGlvbihBLFwib3BhY2l0eVwiKTtnPXIuZ2V0VW5pZm9ybUxvY2F0aW9uKEEsXCJtb2RlbFZpZXdNYXRyaXhcIik7aT1yLmdldFVuaWZvcm1Mb2NhdGlvbihBLFwicHJvamVjdGlvbk1hdHJpeFwiKTtrPVxuci5nZXRVbmlmb3JtTG9jYXRpb24oQSxcImZvZ1R5cGVcIik7bT1yLmdldFVuaWZvcm1Mb2NhdGlvbihBLFwiZm9nRGVuc2l0eVwiKTtsPXIuZ2V0VW5pZm9ybUxvY2F0aW9uKEEsXCJmb2dOZWFyXCIpO3A9ci5nZXRVbmlmb3JtTG9jYXRpb24oQSxcImZvZ0ZhclwiKTt0PXIuZ2V0VW5pZm9ybUxvY2F0aW9uKEEsXCJmb2dDb2xvclwiKTtzPXIuZ2V0VW5pZm9ybUxvY2F0aW9uKEEsXCJhbHBoYVRlc3RcIik7dT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO3Uud2lkdGg9ODt1LmhlaWdodD04O0Q9dS5nZXRDb250ZXh0KFwiMmRcIik7RC5maWxsU3R5bGU9XCIjZmZmZmZmXCI7RC5maWxsUmVjdCgwLDAsdS53aWR0aCx1LmhlaWdodCk7ej1uZXcgVEhSRUUuVGV4dHVyZSh1KTt6Lm5lZWRzVXBkYXRlPSEwfTt0aGlzLnJlbmRlcj1mdW5jdGlvbih3LEQpe3ZhciBGPXcuX193ZWJnbFNwcml0ZXMsRz1GLmxlbmd0aDtpZihHKXtyLnVzZVByb2dyYW0oQSk7ci5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShxKTtcbnIuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkobik7ci5kaXNhYmxlKHIuQ1VMTF9GQUNFKTtyLmVuYWJsZShyLkJMRU5EKTtyLmJpbmRCdWZmZXIoci5BUlJBWV9CVUZGRVIseSk7ci52ZXJ0ZXhBdHRyaWJQb2ludGVyKHEsMixyLkZMT0FULCExLDE2LDApO3IudmVydGV4QXR0cmliUG9pbnRlcihuLDIsci5GTE9BVCwhMSwxNiw4KTtyLmJpbmRCdWZmZXIoci5FTEVNRU5UX0FSUkFZX0JVRkZFUixFKTtyLnVuaWZvcm1NYXRyaXg0ZnYoaSwhMSxELnByb2plY3Rpb25NYXRyaXguZWxlbWVudHMpO3IuYWN0aXZlVGV4dHVyZShyLlRFWFRVUkUwKTtyLnVuaWZvcm0xaShmLDApO3ZhciB4PTAsST0wLEI9dy5mb2c7Qj8oci51bmlmb3JtM2YodCxCLmNvbG9yLnIsQi5jb2xvci5nLEIuY29sb3IuYiksQiBpbnN0YW5jZW9mIFRIUkVFLkZvZz8oci51bmlmb3JtMWYobCxCLm5lYXIpLHIudW5pZm9ybTFmKHAsQi5mYXIpLHIudW5pZm9ybTFpKGssMSksST14PTEpOkIgaW5zdGFuY2VvZiBUSFJFRS5Gb2dFeHAyJiZcbihyLnVuaWZvcm0xZihtLEIuZGVuc2l0eSksci51bmlmb3JtMWkoaywyKSxJPXg9MikpOihyLnVuaWZvcm0xaShrLDApLEk9eD0wKTtmb3IodmFyIE0sSixjYT1bXSxCPTA7QjxHO0IrKylNPUZbQl0sITEhPT1NLnZpc2libGUmJihNLl9tb2RlbFZpZXdNYXRyaXgubXVsdGlwbHlNYXRyaWNlcyhELm1hdHJpeFdvcmxkSW52ZXJzZSxNLm1hdHJpeFdvcmxkKSxNLno9LU0uX21vZGVsVmlld01hdHJpeC5lbGVtZW50c1sxNF0pO0Yuc29ydCh1KTtmb3IoQj0wO0I8RztCKyspTT1GW0JdLCExIT09TS52aXNpYmxlJiYoSj1NLm1hdGVyaWFsLHIudW5pZm9ybTFmKHMsSi5hbHBoYVRlc3QpLHIudW5pZm9ybU1hdHJpeDRmdihnLCExLE0uX21vZGVsVmlld01hdHJpeC5lbGVtZW50cyksY2FbMF09TS5zY2FsZS54LGNhWzFdPU0uc2NhbGUueSxNPXcuZm9nJiZKLmZvZz9JOjAseCE9PU0mJihyLnVuaWZvcm0xaShrLE0pLHg9TSksci51bmlmb3JtMmYoYixKLnV2U2NhbGUueCxKLnV2U2NhbGUueSksXG5yLnVuaWZvcm0yZihhLEoudXZPZmZzZXQueCxKLnV2T2Zmc2V0LnkpLHIudW5pZm9ybTFmKGgsSi5vcGFjaXR5KSxyLnVuaWZvcm0zZihlLEouY29sb3IucixKLmNvbG9yLmcsSi5jb2xvci5iKSxyLnVuaWZvcm0xZihjLEoucm90YXRpb24pLHIudW5pZm9ybTJmdihkLGNhKSx2LnNldEJsZW5kaW5nKEouYmxlbmRpbmcsSi5ibGVuZEVxdWF0aW9uLEouYmxlbmRTcmMsSi5ibGVuZERzdCksdi5zZXREZXB0aFRlc3QoSi5kZXB0aFRlc3QpLHYuc2V0RGVwdGhXcml0ZShKLmRlcHRoV3JpdGUpLEoubWFwJiZKLm1hcC5pbWFnZSYmSi5tYXAuaW1hZ2Uud2lkdGg/di5zZXRUZXh0dXJlKEoubWFwLDApOnYuc2V0VGV4dHVyZSh6LDApLHIuZHJhd0VsZW1lbnRzKHIuVFJJQU5HTEVTLDYsci5VTlNJR05FRF9TSE9SVCwwKSk7ci5lbmFibGUoci5DVUxMX0ZBQ0UpfX19O1RIUkVFLkRlcHRoUGFzc1BsdWdpbj1mdW5jdGlvbigpe3RoaXMuZW5hYmxlZD0hMTt0aGlzLnJlbmRlclRhcmdldD1udWxsO3ZhciBhLGIsYyxkLGUsZixoPW5ldyBUSFJFRS5GcnVzdHVtLGc9bmV3IFRIUkVFLk1hdHJpeDQ7dGhpcy5pbml0PWZ1bmN0aW9uKGcpe2E9Zy5jb250ZXh0O2I9Zzt2YXIgZz1USFJFRS5TaGFkZXJMaWIuZGVwdGhSR0JBLGg9VEhSRUUuVW5pZm9ybXNVdGlscy5jbG9uZShnLnVuaWZvcm1zKTtjPW5ldyBUSFJFRS5TaGFkZXJNYXRlcmlhbCh7ZnJhZ21lbnRTaGFkZXI6Zy5mcmFnbWVudFNoYWRlcix2ZXJ0ZXhTaGFkZXI6Zy52ZXJ0ZXhTaGFkZXIsdW5pZm9ybXM6aH0pO2Q9bmV3IFRIUkVFLlNoYWRlck1hdGVyaWFsKHtmcmFnbWVudFNoYWRlcjpnLmZyYWdtZW50U2hhZGVyLHZlcnRleFNoYWRlcjpnLnZlcnRleFNoYWRlcix1bmlmb3JtczpoLG1vcnBoVGFyZ2V0czohMH0pO2U9bmV3IFRIUkVFLlNoYWRlck1hdGVyaWFsKHtmcmFnbWVudFNoYWRlcjpnLmZyYWdtZW50U2hhZGVyLFxudmVydGV4U2hhZGVyOmcudmVydGV4U2hhZGVyLHVuaWZvcm1zOmgsc2tpbm5pbmc6ITB9KTtmPW5ldyBUSFJFRS5TaGFkZXJNYXRlcmlhbCh7ZnJhZ21lbnRTaGFkZXI6Zy5mcmFnbWVudFNoYWRlcix2ZXJ0ZXhTaGFkZXI6Zy52ZXJ0ZXhTaGFkZXIsdW5pZm9ybXM6aCxtb3JwaFRhcmdldHM6ITAsc2tpbm5pbmc6ITB9KTtjLl9zaGFkb3dQYXNzPSEwO2QuX3NoYWRvd1Bhc3M9ITA7ZS5fc2hhZG93UGFzcz0hMDtmLl9zaGFkb3dQYXNzPSEwfTt0aGlzLnJlbmRlcj1mdW5jdGlvbihhLGIpe3RoaXMuZW5hYmxlZCYmdGhpcy51cGRhdGUoYSxiKX07dGhpcy51cGRhdGU9ZnVuY3Rpb24oaSxrKXt2YXIgbSxsLHAsdCxzLHE7YS5jbGVhckNvbG9yKDEsMSwxLDEpO2EuZGlzYWJsZShhLkJMRU5EKTtiLnNldERlcHRoVGVzdCghMCk7ITA9PT1pLmF1dG9VcGRhdGUmJmkudXBkYXRlTWF0cml4V29ybGQoKTtrLm1hdHJpeFdvcmxkSW52ZXJzZS5nZXRJbnZlcnNlKGsubWF0cml4V29ybGQpO2cubXVsdGlwbHlNYXRyaWNlcyhrLnByb2plY3Rpb25NYXRyaXgsXG5rLm1hdHJpeFdvcmxkSW52ZXJzZSk7aC5zZXRGcm9tTWF0cml4KGcpO2Iuc2V0UmVuZGVyVGFyZ2V0KHRoaXMucmVuZGVyVGFyZ2V0KTtiLmNsZWFyKCk7cT1pLl9fd2ViZ2xPYmplY3RzO209MDtmb3IobD1xLmxlbmd0aDttPGw7bSsrKWlmKHA9cVttXSxzPXAub2JqZWN0LHAucmVuZGVyPSExLHMudmlzaWJsZSYmKCEocyBpbnN0YW5jZW9mIFRIUkVFLk1lc2h8fHMgaW5zdGFuY2VvZiBUSFJFRS5QYXJ0aWNsZVN5c3RlbSl8fCFzLmZydXN0dW1DdWxsZWR8fGguaW50ZXJzZWN0c09iamVjdChzKSkpcy5fbW9kZWxWaWV3TWF0cml4Lm11bHRpcGx5TWF0cmljZXMoay5tYXRyaXhXb3JsZEludmVyc2Uscy5tYXRyaXhXb3JsZCkscC5yZW5kZXI9ITA7dmFyIG47bT0wO2ZvcihsPXEubGVuZ3RoO208bDttKyspaWYocD1xW21dLHAucmVuZGVyJiYocz1wLm9iamVjdCxwPXAuYnVmZmVyLCEocyBpbnN0YW5jZW9mIFRIUkVFLlBhcnRpY2xlU3lzdGVtKXx8cy5jdXN0b21EZXB0aE1hdGVyaWFsKSkobj1cbnMubWF0ZXJpYWwgaW5zdGFuY2VvZiBUSFJFRS5NZXNoRmFjZU1hdGVyaWFsP3MubWF0ZXJpYWwubWF0ZXJpYWxzWzBdOnMubWF0ZXJpYWwpJiZiLnNldE1hdGVyaWFsRmFjZXMocy5tYXRlcmlhbCksdD0wPHMuZ2VvbWV0cnkubW9ycGhUYXJnZXRzLmxlbmd0aCYmbi5tb3JwaFRhcmdldHMsbj1zIGluc3RhbmNlb2YgVEhSRUUuU2tpbm5lZE1lc2gmJm4uc2tpbm5pbmcsdD1zLmN1c3RvbURlcHRoTWF0ZXJpYWw/cy5jdXN0b21EZXB0aE1hdGVyaWFsOm4/dD9mOmU6dD9kOmMscCBpbnN0YW5jZW9mIFRIUkVFLkJ1ZmZlckdlb21ldHJ5P2IucmVuZGVyQnVmZmVyRGlyZWN0KGssaS5fX2xpZ2h0cyxudWxsLHQscCxzKTpiLnJlbmRlckJ1ZmZlcihrLGkuX19saWdodHMsbnVsbCx0LHAscyk7cT1pLl9fd2ViZ2xPYmplY3RzSW1tZWRpYXRlO209MDtmb3IobD1xLmxlbmd0aDttPGw7bSsrKXA9cVttXSxzPXAub2JqZWN0LHMudmlzaWJsZSYmKHMuX21vZGVsVmlld01hdHJpeC5tdWx0aXBseU1hdHJpY2VzKGsubWF0cml4V29ybGRJbnZlcnNlLFxucy5tYXRyaXhXb3JsZCksYi5yZW5kZXJJbW1lZGlhdGVPYmplY3QoayxpLl9fbGlnaHRzLG51bGwsYyxzKSk7bT1iLmdldENsZWFyQ29sb3IoKTtsPWIuZ2V0Q2xlYXJBbHBoYSgpO2EuY2xlYXJDb2xvcihtLnIsbS5nLG0uYixsKTthLmVuYWJsZShhLkJMRU5EKX19O1RIUkVFLlNoYWRlckZsYXJlcz17bGVuc0ZsYXJlVmVydGV4VGV4dHVyZTp7dmVydGV4U2hhZGVyOlwidW5pZm9ybSBsb3dwIGludCByZW5kZXJUeXBlO1xcbnVuaWZvcm0gdmVjMyBzY3JlZW5Qb3NpdGlvbjtcXG51bmlmb3JtIHZlYzIgc2NhbGU7XFxudW5pZm9ybSBmbG9hdCByb3RhdGlvbjtcXG51bmlmb3JtIHNhbXBsZXIyRCBvY2NsdXNpb25NYXA7XFxuYXR0cmlidXRlIHZlYzIgcG9zaXRpb247XFxuYXR0cmlidXRlIHZlYzIgdXY7XFxudmFyeWluZyB2ZWMyIHZVVjtcXG52YXJ5aW5nIGZsb2F0IHZWaXNpYmlsaXR5O1xcbnZvaWQgbWFpbigpIHtcXG52VVYgPSB1djtcXG52ZWMyIHBvcyA9IHBvc2l0aW9uO1xcbmlmKCByZW5kZXJUeXBlID09IDIgKSB7XFxudmVjNCB2aXNpYmlsaXR5ID0gdGV4dHVyZTJEKCBvY2NsdXNpb25NYXAsIHZlYzIoIDAuMSwgMC4xICkgKTtcXG52aXNpYmlsaXR5ICs9IHRleHR1cmUyRCggb2NjbHVzaW9uTWFwLCB2ZWMyKCAwLjUsIDAuMSApICk7XFxudmlzaWJpbGl0eSArPSB0ZXh0dXJlMkQoIG9jY2x1c2lvbk1hcCwgdmVjMiggMC45LCAwLjEgKSApO1xcbnZpc2liaWxpdHkgKz0gdGV4dHVyZTJEKCBvY2NsdXNpb25NYXAsIHZlYzIoIDAuOSwgMC41ICkgKTtcXG52aXNpYmlsaXR5ICs9IHRleHR1cmUyRCggb2NjbHVzaW9uTWFwLCB2ZWMyKCAwLjksIDAuOSApICk7XFxudmlzaWJpbGl0eSArPSB0ZXh0dXJlMkQoIG9jY2x1c2lvbk1hcCwgdmVjMiggMC41LCAwLjkgKSApO1xcbnZpc2liaWxpdHkgKz0gdGV4dHVyZTJEKCBvY2NsdXNpb25NYXAsIHZlYzIoIDAuMSwgMC45ICkgKTtcXG52aXNpYmlsaXR5ICs9IHRleHR1cmUyRCggb2NjbHVzaW9uTWFwLCB2ZWMyKCAwLjEsIDAuNSApICk7XFxudmlzaWJpbGl0eSArPSB0ZXh0dXJlMkQoIG9jY2x1c2lvbk1hcCwgdmVjMiggMC41LCAwLjUgKSApO1xcbnZWaXNpYmlsaXR5ID0gICAgICAgIHZpc2liaWxpdHkuciAvIDkuMDtcXG52VmlzaWJpbGl0eSAqPSAxLjAgLSB2aXNpYmlsaXR5LmcgLyA5LjA7XFxudlZpc2liaWxpdHkgKj0gICAgICAgdmlzaWJpbGl0eS5iIC8gOS4wO1xcbnZWaXNpYmlsaXR5ICo9IDEuMCAtIHZpc2liaWxpdHkuYSAvIDkuMDtcXG5wb3MueCA9IGNvcyggcm90YXRpb24gKSAqIHBvc2l0aW9uLnggLSBzaW4oIHJvdGF0aW9uICkgKiBwb3NpdGlvbi55O1xcbnBvcy55ID0gc2luKCByb3RhdGlvbiApICogcG9zaXRpb24ueCArIGNvcyggcm90YXRpb24gKSAqIHBvc2l0aW9uLnk7XFxufVxcbmdsX1Bvc2l0aW9uID0gdmVjNCggKCBwb3MgKiBzY2FsZSArIHNjcmVlblBvc2l0aW9uLnh5ICkueHksIHNjcmVlblBvc2l0aW9uLnosIDEuMCApO1xcbn1cIixcbmZyYWdtZW50U2hhZGVyOlwidW5pZm9ybSBsb3dwIGludCByZW5kZXJUeXBlO1xcbnVuaWZvcm0gc2FtcGxlcjJEIG1hcDtcXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxudW5pZm9ybSB2ZWMzIGNvbG9yO1xcbnZhcnlpbmcgdmVjMiB2VVY7XFxudmFyeWluZyBmbG9hdCB2VmlzaWJpbGl0eTtcXG52b2lkIG1haW4oKSB7XFxuaWYoIHJlbmRlclR5cGUgPT0gMCApIHtcXG5nbF9GcmFnQ29sb3IgPSB2ZWM0KCAxLjAsIDAuMCwgMS4wLCAwLjAgKTtcXG59IGVsc2UgaWYoIHJlbmRlclR5cGUgPT0gMSApIHtcXG5nbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQoIG1hcCwgdlVWICk7XFxufSBlbHNlIHtcXG52ZWM0IHRleHR1cmUgPSB0ZXh0dXJlMkQoIG1hcCwgdlVWICk7XFxudGV4dHVyZS5hICo9IG9wYWNpdHkgKiB2VmlzaWJpbGl0eTtcXG5nbF9GcmFnQ29sb3IgPSB0ZXh0dXJlO1xcbmdsX0ZyYWdDb2xvci5yZ2IgKj0gY29sb3I7XFxufVxcbn1cIn0sbGVuc0ZsYXJlOnt2ZXJ0ZXhTaGFkZXI6XCJ1bmlmb3JtIGxvd3AgaW50IHJlbmRlclR5cGU7XFxudW5pZm9ybSB2ZWMzIHNjcmVlblBvc2l0aW9uO1xcbnVuaWZvcm0gdmVjMiBzY2FsZTtcXG51bmlmb3JtIGZsb2F0IHJvdGF0aW9uO1xcbmF0dHJpYnV0ZSB2ZWMyIHBvc2l0aW9uO1xcbmF0dHJpYnV0ZSB2ZWMyIHV2O1xcbnZhcnlpbmcgdmVjMiB2VVY7XFxudm9pZCBtYWluKCkge1xcbnZVViA9IHV2O1xcbnZlYzIgcG9zID0gcG9zaXRpb247XFxuaWYoIHJlbmRlclR5cGUgPT0gMiApIHtcXG5wb3MueCA9IGNvcyggcm90YXRpb24gKSAqIHBvc2l0aW9uLnggLSBzaW4oIHJvdGF0aW9uICkgKiBwb3NpdGlvbi55O1xcbnBvcy55ID0gc2luKCByb3RhdGlvbiApICogcG9zaXRpb24ueCArIGNvcyggcm90YXRpb24gKSAqIHBvc2l0aW9uLnk7XFxufVxcbmdsX1Bvc2l0aW9uID0gdmVjNCggKCBwb3MgKiBzY2FsZSArIHNjcmVlblBvc2l0aW9uLnh5ICkueHksIHNjcmVlblBvc2l0aW9uLnosIDEuMCApO1xcbn1cIixcbmZyYWdtZW50U2hhZGVyOlwicHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XFxudW5pZm9ybSBsb3dwIGludCByZW5kZXJUeXBlO1xcbnVuaWZvcm0gc2FtcGxlcjJEIG1hcDtcXG51bmlmb3JtIHNhbXBsZXIyRCBvY2NsdXNpb25NYXA7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbnVuaWZvcm0gdmVjMyBjb2xvcjtcXG52YXJ5aW5nIHZlYzIgdlVWO1xcbnZvaWQgbWFpbigpIHtcXG5pZiggcmVuZGVyVHlwZSA9PSAwICkge1xcbmdsX0ZyYWdDb2xvciA9IHZlYzQoIHRleHR1cmUyRCggbWFwLCB2VVYgKS5yZ2IsIDAuMCApO1xcbn0gZWxzZSBpZiggcmVuZGVyVHlwZSA9PSAxICkge1xcbmdsX0ZyYWdDb2xvciA9IHRleHR1cmUyRCggbWFwLCB2VVYgKTtcXG59IGVsc2Uge1xcbmZsb2F0IHZpc2liaWxpdHkgPSB0ZXh0dXJlMkQoIG9jY2x1c2lvbk1hcCwgdmVjMiggMC41LCAwLjEgKSApLmE7XFxudmlzaWJpbGl0eSArPSB0ZXh0dXJlMkQoIG9jY2x1c2lvbk1hcCwgdmVjMiggMC45LCAwLjUgKSApLmE7XFxudmlzaWJpbGl0eSArPSB0ZXh0dXJlMkQoIG9jY2x1c2lvbk1hcCwgdmVjMiggMC41LCAwLjkgKSApLmE7XFxudmlzaWJpbGl0eSArPSB0ZXh0dXJlMkQoIG9jY2x1c2lvbk1hcCwgdmVjMiggMC4xLCAwLjUgKSApLmE7XFxudmlzaWJpbGl0eSA9ICggMS4wIC0gdmlzaWJpbGl0eSAvIDQuMCApO1xcbnZlYzQgdGV4dHVyZSA9IHRleHR1cmUyRCggbWFwLCB2VVYgKTtcXG50ZXh0dXJlLmEgKj0gb3BhY2l0eSAqIHZpc2liaWxpdHk7XFxuZ2xfRnJhZ0NvbG9yID0gdGV4dHVyZTtcXG5nbF9GcmFnQ29sb3IucmdiICo9IGNvbG9yO1xcbn1cXG59XCJ9fTtcbiIsIi8vIFRoaXMgVEhSRUV4IGhlbHBlciBtYWtlcyBpdCBlYXN5IHRvIGhhbmRsZSB3aW5kb3cgcmVzaXplLlxuLy8gSXQgd2lsbCB1cGRhdGUgcmVuZGVyZXIgYW5kIGNhbWVyYSB3aGVuIHdpbmRvdyBpcyByZXNpemVkLlxuLy9cbi8vICMgVXNhZ2Vcbi8vXG4vLyAqKlN0ZXAgMSoqOiBTdGFydCB1cGRhdGluZyByZW5kZXJlciBhbmQgY2FtZXJhXG4vL1xuLy8gYGBgdmFyIHdpbmRvd1Jlc2l6ZSA9IG5ldyBUSFJFRXguV2luZG93UmVzaXplKGFSZW5kZXJlciwgYUNhbWVyYSlgYGBcbi8vICAgIFxuLy8gKipTdGVwIDIqKjogc3RvcCB1cGRhdGluZyByZW5kZXJlciBhbmQgY2FtZXJhXG4vL1xuLy8gYGBgd2luZG93UmVzaXplLmRlc3Ryb3koKWBgYFxuLy8gIyBDb2RlXG5cbi8vXG5cbi8qKiBAbmFtZXNwYWNlICovXG52YXIgVEhSRUV4XHQ9IFRIUkVFeCB8fCB7fVxuXG4vKipcbiAqIFVwZGF0ZSByZW5kZXJlciBhbmQgY2FtZXJhIHdoZW4gdGhlIHdpbmRvdyBpcyByZXNpemVkXG4gKiBcbiAqIEBwYXJhbSB7T2JqZWN0fSByZW5kZXJlciB0aGUgcmVuZGVyZXIgdG8gdXBkYXRlXG4gKiBAcGFyYW0ge09iamVjdH0gQ2FtZXJhIHRoZSBjYW1lcmEgdG8gdXBkYXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBkaW1lbnNpb24gY2FsbGJhY2sgZm9yIHJlbmRlcmVyIHNpemVcbiovXG5USFJFRXguV2luZG93UmVzaXplXHQ9IGZ1bmN0aW9uKHJlbmRlcmVyLCBjYW1lcmEsIGRpbWVuc2lvbil7XG5cdGRpbWVuc2lvbiBcdD0gZGltZW5zaW9uIHx8IGZ1bmN0aW9uKCl7IHJldHVybiB7IHdpZHRoOiB3aW5kb3cuaW5uZXJXaWR0aCwgaGVpZ2h0OiB3aW5kb3cuaW5uZXJIZWlnaHQgfSB9XG5cdHZhciBjYWxsYmFja1x0PSBmdW5jdGlvbigpe1xuXHRcdC8vIGZldGNoIHRhcmdldCByZW5kZXJlciBzaXplXG5cdFx0dmFyIHJlbmRlcmVyU2l6ZSA9IGRpbWVuc2lvbigpO1xuXHRcdC8vIG5vdGlmeSB0aGUgcmVuZGVyZXIgb2YgdGhlIHNpemUgY2hhbmdlXG5cdFx0cmVuZGVyZXIuc2V0U2l6ZSggcmVuZGVyZXJTaXplLndpZHRoLCByZW5kZXJlclNpemUuaGVpZ2h0IClcblx0XHQvLyB1cGRhdGUgdGhlIGNhbWVyYVxuXHRcdGNhbWVyYS5hc3BlY3RcdD0gcmVuZGVyZXJTaXplLndpZHRoIC8gcmVuZGVyZXJTaXplLmhlaWdodFxuXHRcdGNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KClcblx0fVxuXHQvLyBiaW5kIHRoZSByZXNpemUgZXZlbnRcblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGNhbGxiYWNrLCBmYWxzZSlcblx0Ly8gcmV0dXJuIC5zdG9wKCkgdGhlIGZ1bmN0aW9uIHRvIHN0b3Agd2F0Y2hpbmcgd2luZG93IHJlc2l6ZVxuXHRyZXR1cm4ge1xuXHRcdHRyaWdnZXJcdDogZnVuY3Rpb24oKXtcblx0XHRcdGNhbGxiYWNrKClcblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIFN0b3Agd2F0Y2hpbmcgd2luZG93IHJlc2l6ZVxuXHRcdCovXG5cdFx0ZGVzdHJveVx0OiBmdW5jdGlvbigpe1xuXHRcdFx0d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGNhbGxiYWNrKVxuXHRcdH1cblx0fVxufVxuIiwiYW5ndWxhci5tb2R1bGUoJ1ZpcnR1YWxCb29rc2hlbGYnKVxuLmZhY3RvcnkoJ0Jvb2tNYXRlcmlhbCcsIGZ1bmN0aW9uICgpIHtcblx0dmFyIEJvb2tNYXRlcmlhbCA9IGZ1bmN0aW9uKG1hcEltYWdlLCBidW1wTWFwSW1hZ2UsIHNwZWN1bGFyTWFwSW1hZ2UsIGNvdmVyTWFwSW1hZ2UpIHtcblx0XHR2YXIgZGVmaW5lcyA9IHt9O1xuXHRcdHZhciB1bmlmb3Jtcztcblx0XHR2YXIgcGFyYW1ldGVycztcblxuICAgICAgICB2YXIgbWFwO1xuICAgICAgICB2YXIgYnVtcE1hcDtcbiAgICAgICAgdmFyIHNwZWN1bGFyTWFwO1xuICAgICAgICB2YXIgY292ZXJNYXA7XG5cdFx0XG5cdFx0dW5pZm9ybXMgPSBUSFJFRS5Vbmlmb3Jtc1V0aWxzLm1lcmdlKFtcblx0XHRcdFRIUkVFLlVuaWZvcm1zTGliLmNvbW1vbixcblx0XHRcdFRIUkVFLlVuaWZvcm1zTGliLmJ1bXAsXG5cdFx0XHRUSFJFRS5Vbmlmb3Jtc0xpYi5mb2csXG5cdFx0XHRUSFJFRS5Vbmlmb3Jtc0xpYi5saWdodHNcblx0XHRdKTtcblxuXHRcdHVuaWZvcm1zLnNoaW5pbmVzcyA9IHt0eXBlOiAnZicsIHZhbHVlOiAzMH07XG5cdFx0ZGVmaW5lcy5QSE9ORyA9IHRydWU7XG5cblx0XHRpZihtYXBJbWFnZSkge1xuXHRcdFx0bWFwID0gbmV3IFRIUkVFLlRleHR1cmUobWFwSW1hZ2UpO1xuXHRcdFx0bWFwLm5lZWRzVXBkYXRlID0gdHJ1ZTtcblx0XHRcdHVuaWZvcm1zLm1hcCA9IHt0eXBlOiAndCcsIHZhbHVlOiBtYXB9O1xuXHRcdFx0dGhpcy5tYXAgPSB0cnVlO1xuXHRcdH1cblx0XHRpZihidW1wTWFwSW1hZ2UpIHtcblx0XHRcdGJ1bXBNYXAgPSBuZXcgVEhSRUUuVGV4dHVyZShidW1wTWFwSW1hZ2UpO1xuXHRcdFx0YnVtcE1hcC5uZWVkc1VwZGF0ZSA9IHRydWU7XG5cdFx0XHR1bmlmb3Jtcy5idW1wTWFwID0ge3R5cGU6ICd0JywgdmFsdWU6IGJ1bXBNYXB9O1xuXHRcdFx0dW5pZm9ybXMuYnVtcFNjYWxlLnZhbHVlID0gMC4wMDU7XG5cdFx0XHR0aGlzLmJ1bXBNYXAgPSB0cnVlO1xuXHRcdH1cblx0XHRpZihzcGVjdWxhck1hcEltYWdlKSB7XG5cdFx0XHRzcGVjdWxhck1hcCA9IG5ldyBUSFJFRS5UZXh0dXJlKHNwZWN1bGFyTWFwSW1hZ2UpO1xuXHRcdFx0c3BlY3VsYXJNYXAubmVlZHNVcGRhdGUgPSB0cnVlO1xuXHRcdFx0dW5pZm9ybXMuc3BlY3VsYXIgPSB7dHlwZTogJ2MnLCB2YWx1ZTogbmV3IFRIUkVFLkNvbG9yKDB4NTU1NTU1KX07XG5cdFx0XHR1bmlmb3Jtcy5zcGVjdWxhck1hcCA9IHt0eXBlOiAndCcsIHZhbHVlOiBzcGVjdWxhck1hcH07XG5cdFx0XHR0aGlzLnNwZWN1bGFyTWFwID0gdHJ1ZTtcblx0XHR9XG4gICAgICAgIGlmKGNvdmVyTWFwSW1hZ2UpIHtcblx0XHRcdGNvdmVyTWFwID0gbmV3IFRIUkVFLlRleHR1cmUoY292ZXJNYXBJbWFnZSk7XG5cdFx0XHRjb3Zlck1hcC5uZWVkc1VwZGF0ZSA9IHRydWU7XG5cdFx0XHR1bmlmb3Jtcy5jb3Zlck1hcCA9IHt0eXBlOiAndCcsIHZhbHVlOiBjb3Zlck1hcH07XG5cdFx0XHRkZWZpbmVzLlVTRV9DT1ZFUiA9IHRydWU7XG4gICAgICAgIH1cblxuXHRcdHBhcmFtZXRlcnMgPSB7XG5cdFx0XHR2ZXJ0ZXhTaGFkZXI6IHZlcnRleFNoYWRlcixcdFxuXHRcdFx0ZnJhZ21lbnRTaGFkZXI6IGZyYWdtZW50U2hhZGVyLFxuXHRcdFx0dW5pZm9ybXM6IHVuaWZvcm1zLFxuXHRcdFx0ZGVmaW5lczogZGVmaW5lcyxcblx0XHRcdGxpZ2h0czogdHJ1ZSxcblx0XHRcdGZvZzogdHJ1ZVxuXHRcdH07XG5cblx0XHRUSFJFRS5TaGFkZXJNYXRlcmlhbC5jYWxsKHRoaXMsIHBhcmFtZXRlcnMpO1xuXHR9O1xuXG5cdEJvb2tNYXRlcmlhbC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFRIUkVFLlNoYWRlck1hdGVyaWFsLnByb3RvdHlwZSk7XG5cblx0Qm9va01hdGVyaWFsLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFRIUkVFLkJvb2tNYXRlcmlhbDtcblxuXHR2YXIgdmVydGV4U2hhZGVyID0gW1xuXHRcdCd2YXJ5aW5nIHZlYzMgdlZpZXdQb3NpdGlvbjsnLFxuXHRcdCd2YXJ5aW5nIHZlYzMgdk5vcm1hbDsnLFxuXG5cdFx0VEhSRUUuU2hhZGVyQ2h1bmsubWFwX3BhcnNfdmVydGV4LFxuXHRcdFRIUkVFLlNoYWRlckNodW5rLmxpZ2h0c19waG9uZ19wYXJzX3ZlcnRleCxcblx0XHRUSFJFRS5TaGFkZXJDaHVuay5jb2xvcl9wYXJzX3ZlcnRleCxcblxuXHRcdCd2b2lkIG1haW4oKSB7Jyxcblx0XHRcdFRIUkVFLlNoYWRlckNodW5rLm1hcF92ZXJ0ZXgsXG5cdFx0XHRUSFJFRS5TaGFkZXJDaHVuay5jb2xvcl92ZXJ0ZXgsXG5cdFx0XHRUSFJFRS5TaGFkZXJDaHVuay5kZWZhdWx0bm9ybWFsX3ZlcnRleCxcblx0XHRcdCd2Tm9ybWFsID0gbm9ybWFsaXplKHRyYW5zZm9ybWVkTm9ybWFsKTsnLFxuXHRcdFx0VEhSRUUuU2hhZGVyQ2h1bmsuZGVmYXVsdF92ZXJ0ZXgsXG5cdFx0XHQndlZpZXdQb3NpdGlvbiA9IC1tdlBvc2l0aW9uLnh5ejsnLFxuXHRcdFx0VEhSRUUuU2hhZGVyQ2h1bmsud29ybGRwb3NfdmVydGV4LFxuXHRcdFx0VEhSRUUuU2hhZGVyQ2h1bmsubGlnaHRzX3Bob25nX3ZlcnRleCxcblx0XHQnfSdcblx0XS5qb2luKCdcXG4nKTtcblxuXHR2YXIgZnJhZ21lbnRTaGFkZXIgPSBbXG5cdFx0J3VuaWZvcm0gdmVjMyBkaWZmdXNlOycsXG5cdFx0J3VuaWZvcm0gZmxvYXQgb3BhY2l0eTsnLFxuXG5cdFx0J3VuaWZvcm0gdmVjMyBhbWJpZW50OycsXG5cdFx0J3VuaWZvcm0gdmVjMyBlbWlzc2l2ZTsnLFxuXHRcdCd1bmlmb3JtIHZlYzMgc3BlY3VsYXI7Jyxcblx0XHQndW5pZm9ybSBmbG9hdCBzaGluaW5lc3M7JyxcblxuXHRcdCd1bmlmb3JtIHNhbXBsZXIyRCBjb3Zlck1hcDsnLFxuXG5cdFx0VEhSRUUuU2hhZGVyQ2h1bmsuY29sb3JfcGFyc19mcmFnbWVudCxcblx0XHRUSFJFRS5TaGFkZXJDaHVuay5tYXBfcGFyc19mcmFnbWVudCxcblx0XHRUSFJFRS5TaGFkZXJDaHVuay5mb2dfcGFyc19mcmFnbWVudCxcblx0XHRUSFJFRS5TaGFkZXJDaHVuay5saWdodHNfcGhvbmdfcGFyc19mcmFnbWVudCxcblx0XHRUSFJFRS5TaGFkZXJDaHVuay5idW1wbWFwX3BhcnNfZnJhZ21lbnQsXG5cdFx0VEhSRUUuU2hhZGVyQ2h1bmsuc3BlY3VsYXJtYXBfcGFyc19mcmFnbWVudCxcblxuXHRcdCd2b2lkIG1haW4oKSB7Jyxcblx0XHRcdCd2ZWM0IHRlc3Rjb2xvciA9IHZlYzQoMS4wLCAxLjAsIDEuMCwgMS4wKTsnLFxuXHRcdFx0J2Zsb2F0IGVwcyA9IDAuMDA0OycsXG5cdFx0XHQndmVjNCBiYXNlQ29sb3IgID0gdGV4dHVyZTJEKG1hcCwgdlV2KTsnLFxuXG5cdFx0XHQnI2lmZGVmIFVTRV9DT1ZFUicsXG5cdFx0ICAgIFx0J3ZlYzQgY292ZXJDb2xvciA9IHRleHR1cmUyRChjb3Zlck1hcCwgdlV2ICogdmVjMigyLjMsIDEuMykgLSB2ZWMyKDEuMywgMC4zKSk7Jyxcblx0XHRcdCAgICAnaWYodlV2LnkgPiAwLjIzICYmICh2VXYueCA+IDAuNTcgfHwgKGFsbChncmVhdGVyVGhhbkVxdWFsKGJhc2VDb2xvcix0ZXN0Y29sb3ItZXBzKSkgJiYgYWxsKGxlc3NUaGFuRXF1YWwoYmFzZUNvbG9yLHRlc3Rjb2xvcitlcHMpKSkpKScsXG5cdFx0XHQgICAgXHQnZ2xfRnJhZ0NvbG9yID0gY292ZXJDb2xvcjsnLFxuXHRcdFx0ICAgICdlbHNlJyxcblx0XHRcdCAgICBcdCdnbF9GcmFnQ29sb3IgPSBiYXNlQ29sb3I7Jyxcblx0XHRcdCcjZWxzZScsXG5cdFx0ICAgIFx0J2dsX0ZyYWdDb2xvciA9IGJhc2VDb2xvcjsnLFxuXHRcdFx0JyNlbmRpZicsXG5cblx0XHRcdFRIUkVFLlNoYWRlckNodW5rLnNwZWN1bGFybWFwX2ZyYWdtZW50LFxuXHRcdFx0VEhSRUUuU2hhZGVyQ2h1bmsubGlnaHRzX3Bob25nX2ZyYWdtZW50LFxuXHRcdFx0VEhSRUUuU2hhZGVyQ2h1bmsuY29sb3JfZnJhZ21lbnQsXG5cdFx0XHRUSFJFRS5TaGFkZXJDaHVuay5mb2dfZnJhZ21lbnQsXG5cdFx0J30nXHRcdFxuXHRdLmpvaW4oJ1xcbicpO1xuXG5cdHJldHVybiBCb29rTWF0ZXJpYWw7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgnQmFzZU9iamVjdCcsIGZ1bmN0aW9uIChzdWJjbGFzc09mKSB7XG5cdHZhciBCYXNlT2JqZWN0ID0gZnVuY3Rpb24oZGF0YU9iamVjdCwgZ2VvbWV0cnksIG1hdGVyaWFsKSB7XG5cdFx0VEhSRUUuTWVzaC5jYWxsKHRoaXMsIGdlb21ldHJ5LCBtYXRlcmlhbCk7XG5cblx0XHR0aGlzLmRhdGFPYmplY3QgPSBkYXRhT2JqZWN0IHx8IHt9O1xuXHRcdHRoaXMuZGF0YU9iamVjdC5yb3RhdGlvbiA9IHRoaXMuZGF0YU9iamVjdC5yb3RhdGlvbiB8fCBbMCwgMCwgMF07XG5cdFx0XG5cdFx0dGhpcy5pZCA9IHRoaXMuZGF0YU9iamVjdC5pZDtcblx0XHR0aGlzLnBvc2l0aW9uID0gbmV3IFRIUkVFLlZlY3RvcjModGhpcy5kYXRhT2JqZWN0LnBvc194LCB0aGlzLmRhdGFPYmplY3QucG9zX3ksIHRoaXMuZGF0YU9iamVjdC5wb3Nfeik7XG5cdFx0dGhpcy5yb3RhdGlvbi5vcmRlciA9ICdYWVonO1xuXHRcdHRoaXMucm90YXRpb24uZnJvbUFycmF5KHRoaXMuZGF0YU9iamVjdC5yb3RhdGlvbi5tYXAoTnVtYmVyKSk7XG5cblx0XHR0aGlzLnVwZGF0ZUJvdW5kaW5nQm94KCk7XHRcdFxuXHR9O1xuXHRcblx0QmFzZU9iamVjdC5wcm90b3R5cGUgPSBzdWJjbGFzc09mKFRIUkVFLk1lc2gpO1xuXG5cdEJhc2VPYmplY3QucHJvdG90eXBlLmdldFR5cGUgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy50eXBlO1xuXHR9O1xuXG5cdEJhc2VPYmplY3QucHJvdG90eXBlLmlzT3V0T2ZQYXJyZW50ID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIE1hdGguYWJzKHRoaXMuYm91bmRpbmdCb3guY2VudGVyLnggLSB0aGlzLnBhcmVudC5ib3VuZGluZ0JveC5jZW50ZXIueCkgPiAodGhpcy5wYXJlbnQuYm91bmRpbmdCb3gucmFkaXVzLnggLSB0aGlzLmJvdW5kaW5nQm94LnJhZGl1cy54KSB8fFxuXHRcdFx0XHRNYXRoLmFicyh0aGlzLmJvdW5kaW5nQm94LmNlbnRlci56IC0gdGhpcy5wYXJlbnQuYm91bmRpbmdCb3guY2VudGVyLnopID4gKHRoaXMucGFyZW50LmJvdW5kaW5nQm94LnJhZGl1cy56IC0gdGhpcy5ib3VuZGluZ0JveC5yYWRpdXMueik7XG5cdH07XG5cblx0QmFzZU9iamVjdC5wcm90b3R5cGUuaXNDb2xsaWRlZCA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhclxuXHRcdFx0cmVzdWx0LFxuXHRcdFx0dGFyZ2V0cyxcblx0XHRcdHRhcmdldCxcblx0XHRcdGk7XG5cblx0XHR0aGlzLnVwZGF0ZUJvdW5kaW5nQm94KCk7XG5cblx0XHRyZXN1bHQgPSB0aGlzLmlzT3V0T2ZQYXJyZW50KCk7XG5cdFx0dGFyZ2V0cyA9IHRoaXMucGFyZW50LmNoaWxkcmVuO1xuXG5cdFx0aWYoIXJlc3VsdCkge1xuXHRcdFx0Zm9yKGkgPSB0YXJnZXRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0XHRcdHRhcmdldCA9IHRhcmdldHNbaV0uYm91bmRpbmdCb3g7XG5cblx0XHRcdFx0aWYodGFyZ2V0c1tpXSA9PT0gdGhpcyB8fFxuXHRcdFx0XHRcdCF0YXJnZXQgfHwgLy8gY2hpbGRyZW4gd2l0aG91dCBCQlxuXHRcdFx0XHRcdChNYXRoLmFicyh0aGlzLmJvdW5kaW5nQm94LmNlbnRlci54IC0gdGFyZ2V0LmNlbnRlci54KSA+ICh0aGlzLmJvdW5kaW5nQm94LnJhZGl1cy54ICsgdGFyZ2V0LnJhZGl1cy54KSkgfHxcblx0XHRcdFx0XHQoTWF0aC5hYnModGhpcy5ib3VuZGluZ0JveC5jZW50ZXIueSAtIHRhcmdldC5jZW50ZXIueSkgPiAodGhpcy5ib3VuZGluZ0JveC5yYWRpdXMueSArIHRhcmdldC5yYWRpdXMueSkpIHx8XG5cdFx0XHRcdFx0KE1hdGguYWJzKHRoaXMuYm91bmRpbmdCb3guY2VudGVyLnogLSB0YXJnZXQuY2VudGVyLnopID4gKHRoaXMuYm91bmRpbmdCb3gucmFkaXVzLnogKyB0YXJnZXQucmFkaXVzLnopKSkge1x0XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblxuXHRcdCAgICBcdHJlc3VsdCA9IHRydWU7XHRcdFxuXHRcdCAgICBcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH07XG5cblx0QmFzZU9iamVjdC5wcm90b3R5cGUubW92ZSA9IGZ1bmN0aW9uKG5ld1Bvc2l0aW9uKSB7XG5cdFx0dmFyIFxuXHRcdFx0Y3VycmVudFBvc2l0aW9uLFxuXHRcdFx0cmVzdWx0O1xuXG5cdFx0cmVzdWx0ID0gZmFsc2U7XG5cdFx0Y3VycmVudFBvc2l0aW9uID0gdGhpcy5wb3NpdGlvbi5jbG9uZSgpO1xuXHRcdFxuXHRcdGlmKG5ld1Bvc2l0aW9uLngpIHtcblx0XHRcdHRoaXMucG9zaXRpb24uc2V0WChuZXdQb3NpdGlvbi54KTtcblxuXHRcdFx0aWYodGhpcy5pc0NvbGxpZGVkKCkpIHtcblx0XHRcdFx0dGhpcy5wb3NpdGlvbi5zZXRYKGN1cnJlbnRQb3NpdGlvbi54KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJlc3VsdCA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYobmV3UG9zaXRpb24ueikge1xuXHRcdFx0dGhpcy5wb3NpdGlvbi5zZXRaKG5ld1Bvc2l0aW9uLnopO1xuXG5cdFx0XHRpZih0aGlzLmlzQ29sbGlkZWQoKSkge1xuXHRcdFx0XHR0aGlzLnBvc2l0aW9uLnNldFooY3VycmVudFBvc2l0aW9uLnopO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmVzdWx0ID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR0aGlzLmNoYW5nZWQgPSB0aGlzLmNoYW5nZWQgfHwgcmVzdWx0O1xuXHRcdHRoaXMudXBkYXRlQm91bmRpbmdCb3goKTtcblxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH07XG5cblx0QmFzZU9iamVjdC5wcm90b3R5cGUucm90YXRlID0gZnVuY3Rpb24oZFgsIGRZLCBpc0RlbW8pIHtcblx0XHR2YXIgXG5cdFx0XHRjdXJyZW50Um90YXRpb24gPSB0aGlzLnJvdGF0aW9uLmNsb25lKCksXG5cdFx0XHRyZXN1bHQgPSBmYWxzZTsgXG5cdFx0XG5cdFx0aWYoZFgpIHtcblx0XHRcdHRoaXMucm90YXRpb24ueSArPSBkWCAqIDAuMDE7XG5cblx0XHRcdGlmKCFpc0RlbW8gJiYgdGhpcy5pc0NvbGxpZGVkKCkpIHtcblx0XHRcdFx0dGhpcy5yb3RhdGlvbi55ID0gY3VycmVudFJvdGF0aW9uLnk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXN1bHQgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmKGRZKSB7XG5cdFx0XHR0aGlzLnJvdGF0aW9uLnggKz0gZFkgKiAwLjAxO1xuXG5cdFx0XHRpZighaXNEZW1vICYmIHRoaXMuaXNDb2xsaWRlZCgpKSB7XG5cdFx0XHRcdHRoaXMucm90YXRpb24ueCA9IGN1cnJlbnRSb3RhdGlvbi54O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmVzdWx0ID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR0aGlzLmNoYW5nZWQgPSB0aGlzLmNoYW5nZWQgfHwgKCFpc0RlbW8gJiYgcmVzdWx0KTtcblx0XHR0aGlzLnVwZGF0ZUJvdW5kaW5nQm94KCk7XG5cdH07XG5cblx0QmFzZU9iamVjdC5wcm90b3R5cGUudXBkYXRlQm91bmRpbmdCb3ggPSBmdW5jdGlvbigpIHtcblx0XHR2YXJcblx0XHRcdGJvdW5kaW5nQm94LFxuXHRcdFx0cmFkaXVzLFxuXHRcdFx0Y2VudGVyO1xuXG5cdFx0dGhpcy51cGRhdGVNYXRyaXgoKTtcblx0XHRib3VuZGluZ0JveCA9IHRoaXMuZ2VvbWV0cnkuYm91bmRpbmdCb3guY2xvbmUoKS5hcHBseU1hdHJpeDQodGhpcy5tYXRyaXgpO1xuXHRcdFxuXHRcdHJhZGl1cyA9IHtcblx0XHRcdHg6IChib3VuZGluZ0JveC5tYXgueCAtIGJvdW5kaW5nQm94Lm1pbi54KSAqIDAuNSxcblx0XHRcdHk6IChib3VuZGluZ0JveC5tYXgueSAtIGJvdW5kaW5nQm94Lm1pbi55KSAqIDAuNSxcblx0XHRcdHo6IChib3VuZGluZ0JveC5tYXgueiAtIGJvdW5kaW5nQm94Lm1pbi56KSAqIDAuNVxuXHRcdH07XG5cblx0XHRjZW50ZXIgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuXHRcdGNlbnRlci5hZGRWZWN0b3JzKGJvdW5kaW5nQm94Lm1pbiwgYm91bmRpbmdCb3gubWF4KTtcblx0XHRjZW50ZXIubXVsdGlwbHlTY2FsYXIoMC41KTtcblxuXHRcdHRoaXMuYm91bmRpbmdCb3ggPSB7XG5cdFx0XHRyYWRpdXM6IHJhZGl1cyxcblx0XHRcdGNlbnRlcjogY2VudGVyXG5cdFx0fTtcblx0fTtcblxuXHRCYXNlT2JqZWN0LnByb3RvdHlwZS5yb2xsYmFjayA9IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMucG9zaXRpb24ueCA9IHRoaXMuZGF0YU9iamVjdC5wb3NfeDtcblx0XHR0aGlzLnBvc2l0aW9uLnkgPSB0aGlzLmRhdGFPYmplY3QucG9zX3k7XG5cdFx0dGhpcy5wb3NpdGlvbi56ID0gdGhpcy5kYXRhT2JqZWN0LnBvc196O1xuXG5cdFx0dGhpcy5yb3RhdGlvbi54ID0gdGhpcy5kYXRhT2JqZWN0LnJvdGF0aW9uWzBdO1xuXHRcdHRoaXMucm90YXRpb24ueSA9IHRoaXMuZGF0YU9iamVjdC5yb3RhdGlvblsxXTtcblx0XHR0aGlzLnJvdGF0aW9uLnogPSB0aGlzLmRhdGFPYmplY3Qucm90YXRpb25bMl07XG5cdFx0XG5cdFx0dGhpcy51cGRhdGVCb3VuZGluZ0JveCgpO1xuXHR9O1xuXG5cdHJldHVybiBCYXNlT2JqZWN0O1x0XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgnQm9va09iamVjdCcsIGZ1bmN0aW9uICgkbG9nLCBCYXNlT2JqZWN0LCBkYXRhLCBzdWJjbGFzc09mKSB7XHRcblx0dmFyIEJvb2tPYmplY3QgPSBmdW5jdGlvbihkYXRhT2JqZWN0LCBnZW9tZXRyeSwgbWF0ZXJpYWwpIHtcblx0XHRCYXNlT2JqZWN0LmNhbGwodGhpcywgZGF0YU9iamVjdCwgZ2VvbWV0cnksIG1hdGVyaWFsKTtcblx0fTtcblxuXHRCb29rT2JqZWN0LlRZUEUgPSAnQm9va09iamVjdCc7XG5cblx0Qm9va09iamVjdC5wcm90b3R5cGUgPSBzdWJjbGFzc09mKEJhc2VPYmplY3QpO1xuXHRCb29rT2JqZWN0LnByb3RvdHlwZS50eXBlID0gQm9va09iamVjdC5UWVBFO1xuXG5cdEJvb2tPYmplY3QucHJvdG90eXBlLnNhdmUgPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgc2NvcGUgPSB0aGlzO1xuXHRcdHZhciBkdG8gPSB7XG5cdFx0XHRpZDogdGhpcy5kYXRhT2JqZWN0LmlkLFxuXHRcdFx0dXNlcklkOiB0aGlzLmRhdGFPYmplY3QudXNlcklkLFxuXHRcdFx0cG9zX3g6IHRoaXMucG9zaXRpb24ueCxcblx0XHRcdHBvc195OiB0aGlzLnBvc2l0aW9uLnksXG5cdFx0XHRwb3NfejogdGhpcy5wb3NpdGlvbi56XG5cdFx0fTtcblxuXHRcdHJldHVybiBkYXRhLnBvc3RCb29rKGR0bykudGhlbihmdW5jdGlvbiAocmVzcG9uc2VEdG8pIHtcblx0XHRcdHNjb3BlLmRhdGFPYmplY3QgPSByZXNwb25zZUR0bztcblx0XHRcdHNjb3BlLmNoYW5nZWQgPSBmYWxzZTtcblx0XHR9KTtcblx0fTtcblxuXHRCb29rT2JqZWN0LnByb3RvdHlwZS5zZXRQYXJlbnQgPSBmdW5jdGlvbihwYXJlbnQpIHtcblx0XHRpZih0aGlzLnBhcmVudCAhPSBwYXJlbnQpIHtcblx0XHRcdGlmKHBhcmVudCkge1xuXHRcdFx0XHRwYXJlbnQuYWRkKHRoaXMpO1xuXHRcdFx0XHR0aGlzLmRhdGFPYmplY3Quc2hlbGZJZCA9IHBhcmVudC5pZDtcblx0XHRcdFx0dGhpcy5kYXRhT2JqZWN0LnNlY3Rpb25JZCA9IHBhcmVudC5wYXJlbnQuaWQ7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLnBhcmVudC5yZW1vdmUodGhpcyk7XG5cdFx0XHRcdHRoaXMuZGF0YU9iamVjdC5zaGVsZklkID0gbnVsbDtcblx0XHRcdFx0dGhpcy5kYXRhT2JqZWN0LnNlY3Rpb25JZCA9IG51bGw7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdHJldHVybiBCb29rT2JqZWN0O1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ1ZpcnR1YWxCb29rc2hlbGYnKVxuLmZhY3RvcnkoJ0NhbWVyYU9iamVjdCcsIGZ1bmN0aW9uIChCYXNlT2JqZWN0LCBzdWJjbGFzc09mKSB7XG5cdHZhciBDYW1lcmFPYmplY3QgPSBmdW5jdGlvbigpIHtcblx0XHRCYXNlT2JqZWN0LmNhbGwodGhpcyk7XG5cdH07XG5cblx0Q2FtZXJhT2JqZWN0LnByb3RvdHlwZSA9IHN1YmNsYXNzT2YoQmFzZU9iamVjdCk7XG5cdFxuXHRDYW1lcmFPYmplY3QucHJvdG90eXBlLnVwZGF0ZUJvdW5kaW5nQm94ID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHJhZGl1cyA9IHt4OiAwLjEsIHk6IDEsIHo6IDAuMX07XG5cblx0XHR0aGlzLmJvdW5kaW5nQm94ID0ge1xuXHRcdFx0cmFkaXVzOiByYWRpdXMsXG5cdFx0XHRjZW50ZXI6IHRoaXMucG9zaXRpb24gLy9UT0RPOiBuZWVkcyBjZW50ZXIgb2Ygc2VjdGlvbiBpbiBwYXJlbnQgb3Igd29ybGQgY29vcmRpbmF0ZXNcblx0XHR9O1xuXHR9O1xuXG5cdHJldHVybiBDYW1lcmFPYmplY3Q7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgnTGlicmFyeU9iamVjdCcsIGZ1bmN0aW9uIChCYXNlT2JqZWN0LCBzdWJjbGFzc09mKSB7XG5cdHZhciBMaWJyYXJ5T2JqZWN0ID0gZnVuY3Rpb24ocGFyYW1zLCBnZW9tZXRyeSwgbWF0ZXJpYWwpIHtcblx0XHRCYXNlT2JqZWN0LmNhbGwodGhpcywgcGFyYW1zLCBnZW9tZXRyeSwgbWF0ZXJpYWwpO1xuXHR9O1xuXG5cdExpYnJhcnlPYmplY3QucHJvdG90eXBlID0gc3ViY2xhc3NPZihCYXNlT2JqZWN0KTtcblxuXHRyZXR1cm4gTGlicmFyeU9iamVjdDtcdFxufSk7IiwiYW5ndWxhci5tb2R1bGUoJ1ZpcnR1YWxCb29rc2hlbGYnKVxuLmZhY3RvcnkoJ1NlY3Rpb25PYmplY3QnLCBmdW5jdGlvbiAoQmFzZU9iamVjdCwgU2hlbGZPYmplY3QsIGRhdGEsIHN1YmNsYXNzT2YpIHtcblx0dmFyIFNlY3Rpb25PYmplY3QgPSBmdW5jdGlvbihwYXJhbXMsIGdlb21ldHJ5LCBtYXRlcmlhbCkge1xuXHRcdEJhc2VPYmplY3QuY2FsbCh0aGlzLCBwYXJhbXMsIGdlb21ldHJ5LCBtYXRlcmlhbCk7XG5cblx0XHR0aGlzLnNoZWx2ZXMgPSB7fTtcblx0XHRmb3IodmFyIGtleSBpbiBwYXJhbXMuZGF0YS5zaGVsdmVzKSB7XG5cdFx0XHR0aGlzLnNoZWx2ZXNba2V5XSA9IG5ldyBTaGVsZk9iamVjdChwYXJhbXMuZGF0YS5zaGVsdmVzW2tleV0pOyBcblx0XHRcdHRoaXMuYWRkKHRoaXMuc2hlbHZlc1trZXldKTtcblx0XHR9XG5cdH07XG5cblx0U2VjdGlvbk9iamVjdC5UWVBFID0gJ1NlY3Rpb25PYmplY3QnO1xuXG5cdFNlY3Rpb25PYmplY3QucHJvdG90eXBlID0gc3ViY2xhc3NPZihCYXNlT2JqZWN0KTtcblx0U2VjdGlvbk9iamVjdC5wcm90b3R5cGUudHlwZSA9IFNlY3Rpb25PYmplY3QuVFlQRTtcblxuXHRTZWN0aW9uT2JqZWN0LnByb3RvdHlwZS5zYXZlID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHNjb3BlID0gdGhpcztcblx0XHR2YXIgZHRvID0ge1xuXHRcdFx0aWQ6IHRoaXMuZGF0YU9iamVjdC5pZCxcblx0XHRcdHVzZXJJZDogdGhpcy5kYXRhT2JqZWN0LnVzZXJJZCxcblx0XHRcdHBvc194OiB0aGlzLnBvc2l0aW9uLngsXG5cdFx0XHRwb3NfeTogdGhpcy5wb3NpdGlvbi55LFxuXHRcdFx0cG9zX3o6IHRoaXMucG9zaXRpb24ueixcblx0XHRcdHJvdGF0aW9uOiBbdGhpcy5yb3RhdGlvbi54LCB0aGlzLnJvdGF0aW9uLnksIHRoaXMucm90YXRpb24uel1cblx0XHR9O1xuXG5cdFx0cmV0dXJuIGRhdGEucG9zdFNlY3Rpb24oZHRvKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZUR0bykge1xuXHRcdFx0c2NvcGUuZGF0YU9iamVjdCA9IHJlc3BvbnNlRHRvO1xuXHRcdFx0c2NvcGUuY2hhbmdlZCA9IGZhbHNlO1xuXHRcdH0pO1xuXHR9O1xuXG5cdFNlY3Rpb25PYmplY3QucHJvdG90eXBlLnNldFBhcmVudCA9IGZ1bmN0aW9uKHBhcmVudCkge1xuXHRcdGlmKHRoaXMucGFyZW50ICE9IHBhcmVudCkge1xuXHRcdFx0aWYocGFyZW50KSB7XG5cdFx0XHRcdHBhcmVudC5hZGQodGhpcyk7XG5cdFx0XHRcdHRoaXMuZGF0YU9iamVjdC5saWJyYXJ5SWQgPSBwYXJlbnQuaWQ7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLnBhcmVudC5yZW1vdmUodGhpcyk7XG5cdFx0XHRcdHRoaXMuZGF0YU9iamVjdC5saWJyYXJ5SWQgPSBudWxsO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcblxuXHRyZXR1cm4gU2VjdGlvbk9iamVjdDtcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5mYWN0b3J5KCdTZWxlY3Rvck1ldGEnLCBmdW5jdGlvbiAoKSB7XG5cdHZhciBTZWxlY3Rvck1ldGEgPSBmdW5jdGlvbihzZWxlY3RlZE9iamVjdCkge1xuXHRcdGlmKHNlbGVjdGVkT2JqZWN0KSB7XG5cdFx0XHR0aGlzLmlkID0gc2VsZWN0ZWRPYmplY3QuaWQ7XG5cdFx0XHR0aGlzLnBhcmVudElkID0gc2VsZWN0ZWRPYmplY3QucGFyZW50LmlkO1xuXHRcdFx0dGhpcy50eXBlID0gc2VsZWN0ZWRPYmplY3QuZ2V0VHlwZSgpO1xuXHRcdH1cblx0fTtcblxuXHRTZWxlY3Rvck1ldGEucHJvdG90eXBlLmlzRW1wdHkgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gIXRoaXMuaWQ7XG5cdH07XG5cblx0U2VsZWN0b3JNZXRhLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbihtZXRhKSB7XG5cdFx0cmV0dXJuICEoIW1ldGFcblx0XHRcdFx0fHwgbWV0YS5pZCAhPT0gdGhpcy5pZFxuXHRcdFx0XHR8fCBtZXRhLnBhcmVudElkICE9PSB0aGlzLnBhcmVudElkXG5cdFx0XHRcdHx8IG1ldGEudHlwZSAhPT0gdGhpcy50eXBlKTtcblx0fTtcblx0XG5cdHJldHVybiBTZWxlY3Rvck1ldGE7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgnU2hlbGZPYmplY3QnLCBmdW5jdGlvbiAoQmFzZU9iamVjdCwgc3ViY2xhc3NPZikge1xuXHR2YXIgU2hlbGZPYmplY3QgPSBmdW5jdGlvbihwYXJhbXMpIHtcblx0XHR2YXIgc2l6ZSA9IHBhcmFtcy5zaXplO1x0XG5cdFx0dmFyIGdlb21ldHJ5ID0gbmV3IFRIUkVFLkN1YmVHZW9tZXRyeShzaXplWzBdLCBzaXplWzFdLCBzaXplWzJdKTtcblxuXHRcdGdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ0JveCgpO1xuXHRcdEJhc2VPYmplY3QuY2FsbCh0aGlzLCBwYXJhbXMsIGdlb21ldHJ5KTtcblxuXHRcdHRoaXMucG9zaXRpb24gPSBuZXcgVEhSRUUuVmVjdG9yMyhwYXJhbXMucG9zaXRpb25bMF0sIHBhcmFtcy5wb3NpdGlvblsxXSwgcGFyYW1zLnBvc2l0aW9uWzJdKTtcblx0XHR0aGlzLnNpemUgPSBuZXcgVEhSRUUuVmVjdG9yMyhzaXplWzBdLCBzaXplWzFdLCBzaXplWzJdKTtcblx0XHR0aGlzLnZpc2libGUgPSBmYWxzZTtcblx0fTtcblxuXHRTaGVsZk9iamVjdC5UWVBFID0gJ1NoZWxmT2JqZWN0JztcblxuXHRTaGVsZk9iamVjdC5wcm90b3R5cGUgPSBzdWJjbGFzc09mKEJhc2VPYmplY3QpO1xuXHRTaGVsZk9iamVjdC5wcm90b3R5cGUudHlwZSA9IFNoZWxmT2JqZWN0LlRZUEU7XG5cblx0cmV0dXJuIFNoZWxmT2JqZWN0O1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ1ZpcnR1YWxCb29rc2hlbGYnKVxuLmZhY3RvcnkoJ3N1YmNsYXNzT2YnLCBmdW5jdGlvbiAoKSB7XG5cdGZ1bmN0aW9uIF9zdWJjbGFzc09mKCkge31cblxuXHRmdW5jdGlvbiBzdWJjbGFzc09mKGJhc2UpIHtcblx0ICAgIF9zdWJjbGFzc09mLnByb3RvdHlwZSA9IGJhc2UucHJvdG90eXBlO1xuXHQgICAgcmV0dXJuIG5ldyBfc3ViY2xhc3NPZigpO1xuXHR9XG5cblx0cmV0dXJuIHN1YmNsYXNzT2Y7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgnaGlnaGxpZ2h0JywgZnVuY3Rpb24gKGVudmlyb25tZW50KSB7XG5cdHZhciBoaWdobGlnaHQgPSB7fTtcblxuXHR2YXIgUExBTkVfUk9UQVRJT04gPSBNYXRoLlBJICogMC41O1xuXHR2YXIgUExBTkVfTVVMVElQTElFUiA9IDI7XG5cdHZhciBDT0xPUl9TRUxFQ1QgPSAweDAwNTUzMztcblx0dmFyIENPTE9SX0ZPQ1VTID0gMHgwMDMzNTU7XG5cblx0dmFyIHNlbGVjdDtcblx0dmFyIGZvY3VzO1xuXG5cdHZhciBpbml0ID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG1hdGVyaWFsUHJvcGVydGllcyA9IHtcblx0XHRcdG1hcDogbmV3IFRIUkVFLkltYWdlVXRpbHMubG9hZFRleHR1cmUoICdpbWcvZ2xvdy5wbmcnICksXG5cdFx0XHR0cmFuc3BhcmVudDogdHJ1ZSwgXG5cdFx0XHRzaWRlOiBUSFJFRS5Eb3VibGVTaWRlLFxuXHRcdFx0YmxlbmRpbmc6IFRIUkVFLkFkZGl0aXZlQmxlbmRpbmcsXG5cdFx0XHRkZXB0aFRlc3Q6IGZhbHNlXG5cdFx0fTtcblxuXHRcdG1hdGVyaWFsUHJvcGVydGllcy5jb2xvciA9IENPTE9SX1NFTEVDVDtcblx0XHR2YXIgbWF0ZXJpYWxTZWxlY3QgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwobWF0ZXJpYWxQcm9wZXJ0aWVzKTtcblxuXHRcdG1hdGVyaWFsUHJvcGVydGllcy5jb2xvciA9IENPTE9SX0ZPQ1VTO1xuXHRcdHZhciBtYXRlcmlhbEZvY3VzID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKG1hdGVyaWFsUHJvcGVydGllcyk7XG5cblx0XHR2YXIgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeSgxLCAxLCAxKTtcblxuXHRcdHNlbGVjdCA9IG5ldyBUSFJFRS5NZXNoKGdlb21ldHJ5LCBtYXRlcmlhbFNlbGVjdCk7XG5cdFx0c2VsZWN0LnJvdGF0aW9uLnggPSBQTEFORV9ST1RBVElPTjtcblxuXHRcdGZvY3VzID0gbmV3IFRIUkVFLk1lc2goZ2VvbWV0cnksIG1hdGVyaWFsRm9jdXMpO1xuXHRcdGZvY3VzLnJvdGF0aW9uLnggPSBQTEFORV9ST1RBVElPTjtcblx0fTtcblxuXHR2YXIgY29tbW9uSGlnaGxpZ2h0ID0gZnVuY3Rpb24od2hpY2gsIG9iaikge1xuXHRcdGlmKG9iaikge1xuXHRcdFx0dmFyIHdpZHRoID0gb2JqLmdlb21ldHJ5LmJvdW5kaW5nQm94Lm1heC54ICogUExBTkVfTVVMVElQTElFUjtcblx0XHRcdHZhciBoZWlnaHQgPSBvYmouZ2VvbWV0cnkuYm91bmRpbmdCb3gubWF4LnogKiBQTEFORV9NVUxUSVBMSUVSO1xuXHRcdFx0dmFyIGJvdHRvbSA9IG9iai5nZW9tZXRyeS5ib3VuZGluZ0JveC5taW4ueSArIGVudmlyb25tZW50LkNMRUFSQU5DRTtcblx0XHRcdFxuXHRcdFx0d2hpY2gucG9zaXRpb24ueSA9IGJvdHRvbTtcblx0XHRcdHdoaWNoLnNjYWxlLnNldCh3aWR0aCwgaGVpZ2h0LCAxKTtcblx0XHRcdG9iai5hZGQod2hpY2gpO1xuXG5cdFx0XHR3aGljaC52aXNpYmxlID0gdHJ1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0d2hpY2gudmlzaWJsZSA9IGZhbHNlO1xuXHRcdH1cblx0fTtcblxuXHRoaWdobGlnaHQuZW5hYmxlID0gZnVuY3Rpb24oZW5hYmxlKSB7XG5cdFx0Zm9jdXMudmlzaWJsZSA9IHNlbGVjdC52aXNpYmxlID0gZW5hYmxlO1xuXHR9O1xuXG5cdGhpZ2hsaWdodC5mb2N1cyA9IGZ1bmN0aW9uKG9iaikge1xuXHRcdGNvbW1vbkhpZ2hsaWdodChmb2N1cywgb2JqKTtcblx0fTtcblxuXHRoaWdobGlnaHQuc2VsZWN0ID0gZnVuY3Rpb24ob2JqKSB7XG5cdFx0Y29tbW9uSGlnaGxpZ2h0KHNlbGVjdCwgb2JqKTtcblx0fTtcblxuXHRpbml0KCk7XG5cblx0cmV0dXJuIGhpZ2hsaWdodDtcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5mYWN0b3J5KCdsb2NhdG9yJywgZnVuY3Rpb24gKCRxLCAkbG9nLCBCYXNlT2JqZWN0LCBkYXRhLCBzZWxlY3RvciwgZW52aXJvbm1lbnQsIGNhY2hlKSB7XG5cdHZhciBsb2NhdG9yID0ge307XG5cblx0dmFyIGRlYnVnRW5hYmxlZCA9IGZhbHNlO1xuXG5cdGxvY2F0b3IucGxhY2VTZWN0aW9uID0gZnVuY3Rpb24oc2VjdGlvbkR0bykge1xuXHRcdHZhciBwcm9taXNlID0gY2FjaGUuZ2V0U2VjdGlvbihzZWN0aW9uRHRvLm1vZGVsKS50aGVuKGZ1bmN0aW9uIChzZWN0aW9uQ2FjaGUpIHtcblx0XHRcdHZhciBzZWN0aW9uQkIgPSBzZWN0aW9uQ2FjaGUuZ2VvbWV0cnkuYm91bmRpbmdCb3g7XG5cdFx0XHR2YXIgbGlicmFyeUJCID0gZW52aXJvbm1lbnQubGlicmFyeS5nZW9tZXRyeS5ib3VuZGluZ0JveDtcblx0XHRcdHZhciBmcmVlUGxhY2UgPSBnZXRGcmVlUGxhY2UoZW52aXJvbm1lbnQubGlicmFyeS5jaGlsZHJlbiwgbGlicmFyeUJCLCBzZWN0aW9uQkIpO1xuXG5cdFx0XHRyZXR1cm4gZnJlZVBsYWNlID9cblx0XHRcdFx0c2F2ZVNlY3Rpb24oc2VjdGlvbkR0bywgZnJlZVBsYWNlKSA6XG5cdFx0XHRcdCRxLnJlamVjdCgndGhlcmUgaXMgbm8gZnJlZSBzcGFjZScpO1xuXHRcdH0pLnRoZW4oZnVuY3Rpb24gKG5ld0R0bykge1xuXHRcdFx0cmV0dXJuIGVudmlyb25tZW50LnVwZGF0ZVNlY3Rpb24obmV3RHRvKTtcblx0XHR9KTtcblxuXHRcdHJldHVybiBwcm9taXNlO1xuXHR9O1xuXG5cdHZhciBzYXZlU2VjdGlvbiA9IGZ1bmN0aW9uKGR0bywgcG9zaXRpb24pIHtcblx0XHRkdG8ubGlicmFyeUlkID0gZW52aXJvbm1lbnQubGlicmFyeS5pZDtcblx0XHRkdG8ucG9zX3ggPSBwb3NpdGlvbi54O1xuXHRcdGR0by5wb3NfeSA9IHBvc2l0aW9uLnk7XG5cdFx0ZHRvLnBvc196ID0gcG9zaXRpb24uejtcblxuXHRcdHJldHVybiBkYXRhLnBvc3RTZWN0aW9uKGR0byk7XG5cdH07XG5cblx0bG9jYXRvci5wbGFjZUJvb2sgPSBmdW5jdGlvbihib29rRHRvKSB7XG5cdFx0dmFyIHByb21pc2U7XG5cdFx0dmFyIHNoZWxmID0gc2VsZWN0b3IuaXNTZWxlY3RlZFNoZWxmKCkgJiYgc2VsZWN0b3IuZ2V0U2VsZWN0ZWRPYmplY3QoKTtcblxuXHRcdGlmKHNoZWxmKSB7XG5cdFx0XHRwcm9taXNlID0gY2FjaGUuZ2V0Qm9vayhib29rRHRvLm1vZGVsKS50aGVuKGZ1bmN0aW9uIChib29rQ2FjaGUpIHtcblx0XHRcdFx0dmFyIHNoZWxmQkIgPSBzaGVsZi5nZW9tZXRyeS5ib3VuZGluZ0JveDtcblx0XHRcdFx0dmFyIGJvb2tCQiA9IGJvb2tDYWNoZS5nZW9tZXRyeS5ib3VuZGluZ0JveDtcblx0XHRcdFx0dmFyIGZyZWVQbGFjZSA9IGdldEZyZWVQbGFjZShzaGVsZi5jaGlsZHJlbiwgc2hlbGZCQiwgYm9va0JCKTtcblxuXHRcdFx0XHRyZXR1cm4gZnJlZVBsYWNlID8gXG5cdFx0XHRcdFx0c2F2ZUJvb2soYm9va0R0bywgZnJlZVBsYWNlLCBzaGVsZikgOiBcblx0XHRcdFx0XHQkcS5yZWplY3QoJ3RoZXJlIGlzIG5vIGZyZWUgc3BhY2UnKTtcblx0XHRcdH0pLnRoZW4oZnVuY3Rpb24gKG5ld0R0bykge1xuXHRcdFx0XHRyZXR1cm4gZW52aXJvbm1lbnQudXBkYXRlQm9vayhuZXdEdG8pO1xuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHByb21pc2UgPSAkcS5yZWplY3QoJ3NoZWxmIGlzIG5vdCBzZWxlY3RlZCcpO1xuXHRcdH1cblxuXHRcdHJldHVybiBwcm9taXNlO1xuXHR9O1xuXG5cdHZhciBzYXZlQm9vayA9IGZ1bmN0aW9uKGR0bywgcG9zaXRpb24sIHNoZWxmKSB7XG5cdFx0ZHRvLnNoZWxmSWQgPSBzaGVsZi5pZDtcblx0XHRkdG8uc2VjdGlvbklkID0gc2hlbGYucGFyZW50LmlkO1xuXHRcdGR0by5wb3NfeCA9IHBvc2l0aW9uLng7XG5cdFx0ZHRvLnBvc195ID0gcG9zaXRpb24ueTtcblx0XHRkdG8ucG9zX3ogPSBwb3NpdGlvbi56O1xuXG5cdFx0cmV0dXJuIGRhdGEucG9zdEJvb2soZHRvKTtcblx0fTtcblxuXHRsb2NhdG9yLnVucGxhY2VCb29rID0gZnVuY3Rpb24oYm9va0R0bykge1xuXHRcdHZhciBwcm9taXNlO1xuXHRcdGJvb2tEdG8uc2VjdGlvbklkID0gbnVsbDtcblxuXHRcdHByb21pc2UgPSBkYXRhLnBvc3RCb29rKGJvb2tEdG8pLnRoZW4oZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIGVudmlyb25tZW50LnVwZGF0ZUJvb2soYm9va0R0byk7XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gcHJvbWlzZTtcblx0fTtcblxuXHR2YXIgZ2V0RnJlZVBsYWNlID0gZnVuY3Rpb24ob2JqZWN0cywgc3BhY2VCQiwgdGFyZ2V0QkIpIHtcblx0XHR2YXIgbWF0cml4UHJlY2lzaW9uID0gbmV3IFRIUkVFLlZlY3RvcjModGFyZ2V0QkIubWF4LnggLSB0YXJnZXRCQi5taW4ueCArIDAuMDEsIDAsIHRhcmdldEJCLm1heC56IC0gdGFyZ2V0QkIubWluLnogKyAwLjAxKTtcblx0XHR2YXIgb2NjdXBpZWRNYXRyaXggPSBnZXRPY2N1cGllZE1hdHJpeChvYmplY3RzLCBtYXRyaXhQcmVjaXNpb24pO1xuXHRcdHZhciBmcmVlUG9zaXRpb24gPSBnZXRGcmVlTWF0cml4Q2VsbHMob2NjdXBpZWRNYXRyaXgsIHNwYWNlQkIsIHRhcmdldEJCLCBtYXRyaXhQcmVjaXNpb24pO1xuXHRcdFxuXHRcdGlmIChkZWJ1Z0VuYWJsZWQpIHtcblx0XHRcdGRlYnVnU2hvd0ZyZWUoZnJlZVBvc2l0aW9uLCBtYXRyaXhQcmVjaXNpb24sIGVudmlyb25tZW50LmxpYnJhcnkpO1xuXHRcdH1cblxuXHRcdHJldHVybiBmcmVlUG9zaXRpb247XG5cdH07XG5cblx0dmFyIGdldEZyZWVNYXRyaXhDZWxscyA9IGZ1bmN0aW9uKG9jY3VwaWVkTWF0cml4LCBzcGFjZUJCLCB0YXJnZXRCQiwgbWF0cml4UHJlY2lzaW9uKSB7XG5cdFx0dmFyIHRhcmdldENlbGxzU2l6ZSA9IDE7XG5cdFx0dmFyIGZyZWVDZWxsc0NvdW50ID0gMDtcblx0XHR2YXIgZnJlZUNlbGxzU3RhcnQ7XG5cdFx0dmFyIHhJbmRleDtcblx0XHR2YXIgekluZGV4O1xuXHRcdHZhciBjZWxscztcblxuXHRcdHZhciBtaW5YQ2VsbCA9IE1hdGguZmxvb3Ioc3BhY2VCQi5taW4ueCAvIG1hdHJpeFByZWNpc2lvbi54KSArIDE7XG5cdFx0dmFyIG1heFhDZWxsID0gTWF0aC5mbG9vcihzcGFjZUJCLm1heC54IC8gbWF0cml4UHJlY2lzaW9uLngpO1xuXHRcdHZhciBtaW5aQ2VsbCA9IE1hdGguZmxvb3Ioc3BhY2VCQi5taW4ueiAvIG1hdHJpeFByZWNpc2lvbi56KSArIDE7XG5cdFx0dmFyIG1heFpDZWxsID0gTWF0aC5mbG9vcihzcGFjZUJCLm1heC56IC8gbWF0cml4UHJlY2lzaW9uLnopO1xuXG5cdFx0Zm9yICh6SW5kZXggPSBtaW5aQ2VsbDsgekluZGV4IDw9IG1heFpDZWxsOyB6SW5kZXgrKykge1xuXHRcdFx0Zm9yICh4SW5kZXggPSBtaW5YQ2VsbDsgeEluZGV4IDw9IG1heFhDZWxsOyB4SW5kZXgrKykge1xuXHRcdFx0XHRpZiAoIW9jY3VwaWVkTWF0cml4W3pJbmRleF0gfHwgIW9jY3VwaWVkTWF0cml4W3pJbmRleF1beEluZGV4XSkge1xuXHRcdFx0XHRcdGZyZWVDZWxsc1N0YXJ0ID0gZnJlZUNlbGxzU3RhcnQgfHwgeEluZGV4O1xuXHRcdFx0XHRcdGZyZWVDZWxsc0NvdW50Kys7XG5cblx0XHRcdFx0XHRpZiAoZnJlZUNlbGxzQ291bnQgPT09IHRhcmdldENlbGxzU2l6ZSkge1xuXHRcdFx0XHRcdFx0Y2VsbHMgPSBfLnJhbmdlKGZyZWVDZWxsc1N0YXJ0LCBmcmVlQ2VsbHNTdGFydCArIGZyZWVDZWxsc0NvdW50KTtcblx0XHRcdFx0XHRcdHJldHVybiBnZXRQb3NpdGlvbkZyb21DZWxscyhjZWxscywgekluZGV4LCBtYXRyaXhQcmVjaXNpb24sIHNwYWNlQkIsIHRhcmdldEJCKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0ZnJlZUNlbGxzQ291bnQgPSAwO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG51bGw7XG5cdH07XG5cblx0dmFyIGdldFBvc2l0aW9uRnJvbUNlbGxzID0gZnVuY3Rpb24oY2VsbHMsIHpJbmRleCwgbWF0cml4UHJlY2lzaW9uLCBzcGFjZUJCLCB0YXJnZXRCQikge1xuXHRcdHZhciBmcmVlWCA9IGNlbGxzWzBdICogbWF0cml4UHJlY2lzaW9uLng7XG5cdFx0dmFyIGZyZWVaID1cdHpJbmRleCAqIG1hdHJpeFByZWNpc2lvbi56O1xuXG5cdFx0dmFyIG9mZnNldCA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG5cdFx0b2Zmc2V0LmFkZFZlY3RvcnModGFyZ2V0QkIubWluLCB0YXJnZXRCQi5tYXgpO1xuXHRcdG9mZnNldC5tdWx0aXBseVNjYWxhcigtMC41KTtcblxuXHRcdHJldHVybiBuZXcgVEhSRUUuVmVjdG9yMyhmcmVlWCArIG9mZnNldC54LCBnZXRCb3R0b21ZKHNwYWNlQkIsIHRhcmdldEJCKSwgZnJlZVogKyBvZmZzZXQueik7XG5cdH07XG5cblx0dmFyIGdldEJvdHRvbVkgPSBmdW5jdGlvbihzcGFjZUJCLCB0YXJnZXRCQikge1xuXHRcdHJldHVybiBzcGFjZUJCLm1pbi55IC0gdGFyZ2V0QkIubWluLnkgKyBlbnZpcm9ubWVudC5DTEVBUkFOQ0U7XG5cdH07XG5cblx0dmFyIGdldE9jY3VwaWVkTWF0cml4ID0gZnVuY3Rpb24ob2JqZWN0cywgbWF0cml4UHJlY2lzaW9uKSB7XG5cdFx0dmFyIHJlc3VsdCA9IHt9O1xuXHRcdHZhciBvYmplY3RCQjtcblx0XHR2YXIgbWluS2V5WDtcblx0XHR2YXIgbWF4S2V5WDtcblx0XHR2YXIgbWluS2V5Wjtcblx0XHR2YXIgbWF4S2V5WjtcdFx0XG5cdFx0dmFyIHo7XG5cblx0XHRvYmplY3RzLmZvckVhY2goZnVuY3Rpb24gKG9iaikge1xuXHRcdFx0aWYob2JqIGluc3RhbmNlb2YgQmFzZU9iamVjdCkge1xuXHRcdFx0XHRvYmplY3RCQiA9IG9iai5ib3VuZGluZ0JveDtcblxuXHRcdFx0XHRtaW5LZXlYID0gTWF0aC5yb3VuZCgob2JqZWN0QkIuY2VudGVyLnggLSBvYmplY3RCQi5yYWRpdXMueCkgLyBtYXRyaXhQcmVjaXNpb24ueCk7XG5cdFx0XHRcdG1heEtleVggPSBNYXRoLnJvdW5kKChvYmplY3RCQi5jZW50ZXIueCArIG9iamVjdEJCLnJhZGl1cy54KSAvIG1hdHJpeFByZWNpc2lvbi54KTtcblx0XHRcdFx0bWluS2V5WiA9IE1hdGgucm91bmQoKG9iamVjdEJCLmNlbnRlci56IC0gb2JqZWN0QkIucmFkaXVzLnopIC8gbWF0cml4UHJlY2lzaW9uLnopO1xuXHRcdFx0XHRtYXhLZXlaID0gTWF0aC5yb3VuZCgob2JqZWN0QkIuY2VudGVyLnogKyBvYmplY3RCQi5yYWRpdXMueikgLyBtYXRyaXhQcmVjaXNpb24ueik7XG5cblx0XHRcdFx0Zm9yKHogPSBtaW5LZXlaOyB6IDw9IG1heEtleVo7IHorKykge1xuXHRcdFx0XHRcdHJlc3VsdFt6XSA9IHJlc3VsdFt6XSB8fCB7fTtcblx0XHRcdFx0XHRyZXN1bHRbel1bbWluS2V5WF0gPSB0cnVlO1xuXHRcdFx0XHRcdHJlc3VsdFt6XVttYXhLZXlYXSA9IHRydWU7XG5cblx0XHRcdFx0XHRpZihkZWJ1Z0VuYWJsZWQpIHtcblx0XHRcdFx0XHRcdGRlYnVnU2hvd0JCKG9iaik7XG5cdFx0XHRcdFx0XHRkZWJ1Z0FkZE9jY3VwaWVkKFttaW5LZXlYLCBtYXhLZXlYXSwgbWF0cml4UHJlY2lzaW9uLCBvYmosIHopO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fTtcblxuXHRsb2NhdG9yLmRlYnVnID0gZnVuY3Rpb24oKSB7XG5cdFx0Y2FjaGUuZ2V0U2VjdGlvbignYm9va3NoZWxmXzAwMDEnKS50aGVuKGZ1bmN0aW9uIChzZWN0aW9uQ2FjaGUpIHtcblx0XHRcdGRlYnVnRW5hYmxlZCA9IHRydWU7XG5cdFx0XHR2YXIgc2VjdGlvbkJCID0gc2VjdGlvbkNhY2hlLmdlb21ldHJ5LmJvdW5kaW5nQm94O1xuXHRcdFx0dmFyIGxpYnJhcnlCQiA9IGVudmlyb25tZW50LmxpYnJhcnkuZ2VvbWV0cnkuYm91bmRpbmdCb3g7XG5cdFx0XHR2YXIgZnJlZVBsYWNlID0gZ2V0RnJlZVBsYWNlKGVudmlyb25tZW50LmxpYnJhcnkuY2hpbGRyZW4sIGxpYnJhcnlCQiwgc2VjdGlvbkJCKTtcblx0XHRcdGRlYnVnRW5hYmxlZCA9IGZhbHNlO1xuXHRcdH0pO1xuXHR9O1xuXG5cdHZhciBkZWJ1Z1Nob3dCQiA9IGZ1bmN0aW9uKG9iaikge1xuXHRcdHZhciBvYmplY3RCQiA9IG9iai5ib3VuZGluZ0JveDtcblx0XHR2YXIgb2JqQm94ID0gbmV3IFRIUkVFLk1lc2goXG5cdFx0XHRuZXcgVEhSRUUuQ3ViZUdlb21ldHJ5KFxuXHRcdFx0XHRvYmplY3RCQi5yYWRpdXMueCAqIDIsIFxuXHRcdFx0XHRvYmplY3RCQi5yYWRpdXMueSAqIDIgKyAwLjEsIFxuXHRcdFx0XHRvYmplY3RCQi5yYWRpdXMueiAqIDJcblx0XHRcdCksIFxuXHRcdFx0bmV3IFRIUkVFLk1lc2hMYW1iZXJ0TWF0ZXJpYWwoe1xuXHRcdFx0XHRjb2xvcjogMHhiYmJiZmYsXG5cdFx0XHRcdG9wYWNpdHk6IDAuMixcblx0XHRcdFx0dHJhbnNwYXJlbnQ6IHRydWVcblx0XHRcdH0pXG5cdFx0KTtcblx0XHRcblx0XHRvYmpCb3gucG9zaXRpb24ueCA9IG9iamVjdEJCLmNlbnRlci54O1xuXHRcdG9iakJveC5wb3NpdGlvbi55ID0gb2JqZWN0QkIuY2VudGVyLnk7XG5cdFx0b2JqQm94LnBvc2l0aW9uLnogPSBvYmplY3RCQi5jZW50ZXIuejtcblxuXHRcdG9iai5wYXJlbnQuYWRkKG9iakJveCk7XG5cdH07XG5cblx0dmFyIGRlYnVnQWRkT2NjdXBpZWQgPSBmdW5jdGlvbihjZWxscywgbWF0cml4UHJlY2lzaW9uLCBvYmosIHpLZXkpIHtcblx0XHRjZWxscy5mb3JFYWNoKGZ1bmN0aW9uIChjZWxsKSB7XG5cdFx0XHRvYmouZ2VvbWV0cnkuY29tcHV0ZUJvdW5kaW5nQm94KCk7XG5cdFx0XHR2YXIgcG9zID0gZ2V0UG9zaXRpb25Gcm9tQ2VsbHMoW2NlbGxdLCB6S2V5LCBtYXRyaXhQcmVjaXNpb24sIG9iai5wYXJlbnQuZ2VvbWV0cnkuYm91bmRpbmdCb3gsIG9iai5nZW9tZXRyeS5ib3VuZGluZ0JveCk7XG5cdFx0XHR2YXIgY2VsbEJveCA9IG5ldyBUSFJFRS5NZXNoKG5ldyBUSFJFRS5DdWJlR2VvbWV0cnkobWF0cml4UHJlY2lzaW9uLnggLSAwLjAxLCAwLjAxLCBtYXRyaXhQcmVjaXNpb24ueiAtIDAuMDEpLCBuZXcgVEhSRUUuTWVzaExhbWJlcnRNYXRlcmlhbCh7Y29sb3I6IDB4ZmYwMDAwfSkpO1xuXHRcdFx0XG5cdFx0XHRjZWxsQm94LnBvc2l0aW9uID0gcG9zO1xuXHRcdFx0b2JqLnBhcmVudC5hZGQoY2VsbEJveCk7XG5cdFx0fSk7XG5cdH07XG5cblx0dmFyIGRlYnVnU2hvd0ZyZWUgPSBmdW5jdGlvbihwb3NpdGlvbiwgbWF0cml4UHJlY2lzaW9uLCBvYmopIHtcblx0XHRpZiAocG9zaXRpb24pIHtcblx0XHRcdHZhciBjZWxsQm94ID0gbmV3IFRIUkVFLk1lc2gobmV3IFRIUkVFLkN1YmVHZW9tZXRyeShtYXRyaXhQcmVjaXNpb24ueCwgMC41LCBtYXRyaXhQcmVjaXNpb24ueiksIG5ldyBUSFJFRS5NZXNoTGFtYmVydE1hdGVyaWFsKHtjb2xvcjogMHgwMGZmMDB9KSk7XG5cdFx0XHRjZWxsQm94LnBvc2l0aW9uID0gcG9zaXRpb247XG5cdFx0XHRvYmoucGFyZW50LmFkZChjZWxsQm94KTtcblx0XHR9XG5cdH07XG5cblx0cmV0dXJuIGxvY2F0b3I7XHRcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5mYWN0b3J5KCdwcmV2aWV3JywgZnVuY3Rpb24gKGNhbWVyYSwgaGlnaGxpZ2h0KSB7XG5cdHZhciBwcmV2aWV3ID0ge307XG5cblx0dmFyIGFjdGl2ZSA9IGZhbHNlO1xuXHR2YXIgY29udGFpbmVyO1xuXG5cdHZhciBpbml0ID0gZnVuY3Rpb24oKSB7XG5cdFx0Y29udGFpbmVyID0gbmV3IFRIUkVFLk9iamVjdDNEKCk7XG5cdFx0Y29udGFpbmVyLnBvc2l0aW9uLnNldCgwLCAwLCAtMC41KTtcblx0XHRjb250YWluZXIucm90YXRpb24ueSA9IC0yO1xuXHRcdGNhbWVyYS5jYW1lcmEuYWRkKGNvbnRhaW5lcik7XG5cdH07XG5cblx0dmFyIGFjdGl2YXRlID0gZnVuY3Rpb24odmFsdWUpIHtcblx0XHRhY3RpdmUgPSB2YWx1ZTtcblx0XHRoaWdobGlnaHQuZW5hYmxlKCFhY3RpdmUpO1xuXHR9O1xuXG5cdHByZXZpZXcuaXNBY3RpdmUgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gYWN0aXZlO1xuXHR9O1xuXG5cdHByZXZpZXcuZW5hYmxlID0gZnVuY3Rpb24ob2JqKSB7XG5cdFx0dmFyIG9iakNsb25lO1xuXG5cdFx0aWYob2JqKSB7XG5cdFx0XHRhY3RpdmF0ZSh0cnVlKTtcblxuXHRcdFx0b2JqQ2xvbmUgPSBvYmouY2xvbmUoKTtcblx0XHRcdG9iakNsb25lLnBvc2l0aW9uLnNldCgwLCAwLCAwKTtcblx0XHRcdGNvbnRhaW5lci5hZGQob2JqQ2xvbmUpO1xuXHRcdH1cblx0fTtcblxuXHRwcmV2aWV3LmRpc2FibGUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0Y2xlYXJDb250YWluZXIoKTtcblx0XHRhY3RpdmF0ZShmYWxzZSk7XG5cdH07XG5cblx0dmFyIGNsZWFyQ29udGFpbmVyID0gZnVuY3Rpb24oKSB7XG5cdFx0Y29udGFpbmVyLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkKSB7XG5cdFx0XHRjb250YWluZXIucmVtb3ZlKGNoaWxkKTtcblx0XHR9KTtcblx0fTtcblxuXHRwcmV2aWV3LnJvdGF0ZSA9IGZ1bmN0aW9uKGRYKSB7XG5cdFx0Y29udGFpbmVyLnJvdGF0aW9uLnkgKz0gZFggPyBkWCAqIDAuMDUgOiAwO1xuXHR9O1xuXG5cdGluaXQoKTtcblxuXHRyZXR1cm4gcHJldmlldztcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5mYWN0b3J5KCdzZWxlY3RvcicsIGZ1bmN0aW9uICgkcm9vdFNjb3BlLCBTZWxlY3Rvck1ldGEsIEJvb2tPYmplY3QsIFNoZWxmT2JqZWN0LCBTZWN0aW9uT2JqZWN0LCBlbnZpcm9ubWVudCwgaGlnaGxpZ2h0LCBwcmV2aWV3LCB0b29sdGlwKSB7XG5cdHZhciBzZWxlY3RvciA9IHt9O1xuXHRcblx0dmFyIHNlbGVjdGVkID0gbmV3IFNlbGVjdG9yTWV0YSgpO1xuXHR2YXIgZm9jdXNlZCA9IG5ldyBTZWxlY3Rvck1ldGEoKTtcblxuXHRzZWxlY3Rvci5mb2N1cyA9IGZ1bmN0aW9uKG1ldGEpIHtcblx0XHR2YXIgb2JqO1xuXG5cdFx0aWYoIW1ldGEuZXF1YWxzKGZvY3VzZWQpKSB7XG5cdFx0XHRmb2N1c2VkID0gbWV0YTtcblxuXHRcdFx0aWYoIWZvY3VzZWQuaXNFbXB0eSgpKSB7XG5cdFx0XHRcdG9iaiA9IGdldE9iamVjdChmb2N1c2VkKTtcblx0XHRcdFx0aGlnaGxpZ2h0LmZvY3VzKG9iaik7XG5cdFx0XHR9XG5cblx0XHRcdHRvb2x0aXAuc2V0KG9iaik7XG5cdFx0XHQkcm9vdFNjb3BlLiRhcHBseSgpO1xuXHRcdH1cblx0fTtcblxuXHRzZWxlY3Rvci5zZWxlY3RGb2N1c2VkID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG1ldGEgPSBmb2N1c2VkO1xuXG5cdFx0c2VsZWN0b3Iuc2VsZWN0KG1ldGEpO1xuXHRcdCRyb290U2NvcGUuJGFwcGx5KCk7XG5cdH07XG5cblx0c2VsZWN0b3Iuc2VsZWN0ID0gZnVuY3Rpb24obWV0YSkge1xuXHRcdGlmKCFtZXRhLmVxdWFscyhzZWxlY3RlZCkpIHtcblx0XHRcdHNlbGVjdG9yLnVuc2VsZWN0KCk7XG5cdFx0XHRzZWxlY3RlZCA9IG1ldGE7XG5cblx0XHRcdHZhciBvYmogPSBnZXRPYmplY3Qoc2VsZWN0ZWQpO1xuXHRcdFx0aGlnaGxpZ2h0LnNlbGVjdChvYmopO1xuXHRcdFx0aGlnaGxpZ2h0LmZvY3VzKG51bGwpO1xuXHRcdH1cblx0fTtcblxuXHRzZWxlY3Rvci51bnNlbGVjdCA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKCFzZWxlY3RlZC5pc0VtcHR5KCkpIHtcblx0XHRcdGhpZ2hsaWdodC5zZWxlY3QobnVsbCk7XG5cdFx0XHRzZWxlY3RlZCA9IG5ldyBTZWxlY3Rvck1ldGEoKTtcblx0XHR9XG5cblx0XHRwcmV2aWV3LmRpc2FibGUoKTtcblx0fTtcblxuXHRzZWxlY3Rvci5nZXRTZWxlY3RlZE9iamVjdCA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBnZXRPYmplY3Qoc2VsZWN0ZWQpO1xuXHR9O1xuXG5cdHZhciBnZXRPYmplY3QgPSBmdW5jdGlvbihtZXRhKSB7XG5cdFx0dmFyIG9iamVjdDtcblxuXHRcdGlmKCFtZXRhLmlzRW1wdHkoKSkge1xuXHRcdFx0b2JqZWN0ID0gaXNTaGVsZihtZXRhKSA/IGVudmlyb25tZW50LmdldFNoZWxmKG1ldGEucGFyZW50SWQsIG1ldGEuaWQpXG5cdFx0XHRcdDogaXNCb29rKG1ldGEpID8gZW52aXJvbm1lbnQuZ2V0Qm9vayhtZXRhLmlkKVxuXHRcdFx0XHQ6IGlzU2VjdGlvbihtZXRhKSA/IGVudmlyb25tZW50LmdldFNlY3Rpb24obWV0YS5pZClcblx0XHRcdFx0OiBudWxsO1xuXHRcdH1cblxuXHRcdHJldHVybiBvYmplY3Q7XHRcblx0fTtcblxuXHRzZWxlY3Rvci5pc1NlbGVjdGVkRWRpdGFibGUgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gc2VsZWN0b3IuaXNTZWxlY3RlZEJvb2soKSB8fCBzZWxlY3Rvci5pc1NlbGVjdGVkU2VjdGlvbigpO1xuXHR9O1xuXG5cdHNlbGVjdG9yLmlzQm9va1NlbGVjdGVkID0gZnVuY3Rpb24oaWQpIHtcblx0XHRyZXR1cm4gaXNCb29rKHNlbGVjdGVkKSAmJiBzZWxlY3RlZC5pZCA9PT0gaWQ7XG5cdH07XG5cblx0c2VsZWN0b3IuaXNTZWxlY3RlZFNoZWxmID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGlzU2hlbGYoc2VsZWN0ZWQpO1xuXHR9O1xuXG5cdHNlbGVjdG9yLmlzU2VsZWN0ZWRCb29rID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGlzQm9vayhzZWxlY3RlZCk7XG5cdH07XG5cblx0c2VsZWN0b3IuaXNTZWxlY3RlZFNlY3Rpb24gPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gaXNTZWN0aW9uKHNlbGVjdGVkKTtcblx0fTtcblxuXHR2YXIgaXNTaGVsZiA9IGZ1bmN0aW9uKG1ldGEpIHtcblx0XHRyZXR1cm4gbWV0YS50eXBlID09PSBTaGVsZk9iamVjdC5UWVBFO1xuXHR9O1xuXG5cdHZhciBpc0Jvb2sgPSBmdW5jdGlvbihtZXRhKSB7XG5cdFx0cmV0dXJuIG1ldGEudHlwZSA9PT0gQm9va09iamVjdC5UWVBFO1xuXHR9O1xuXG5cdHZhciBpc1NlY3Rpb24gPSBmdW5jdGlvbihtZXRhKSB7XG5cdFx0cmV0dXJuIG1ldGEudHlwZSA9PT0gU2VjdGlvbk9iamVjdC5UWVBFO1xuXHR9O1xuXG5cdHJldHVybiBzZWxlY3Rvcjtcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5mYWN0b3J5KCdhdXRob3JpemF0aW9uJywgZnVuY3Rpb24gKCRsb2csICRxLCAkd2luZG93LCAkaW50ZXJ2YWwsIHVzZXIsIHNlbGVjdExpYnJhcnksIGNhdGFsb2csIGVudmlyb25tZW50LCBuZ0RpYWxvZykge1xuXHR2YXIgYXV0aG9yaXphdGlvbiA9IHt9O1xuXG5cdGF1dGhvcml6YXRpb24uc2hvdyA9IGZ1bmN0aW9uKCkge1xuXHRcdG5nRGlhbG9nLm9wZW5Db25maXJtKHtcblx0XHRcdHRlbXBsYXRlOiAnL3VpL2xvZ2luRGlhbG9nJ1xuXHRcdH0pO1xuXHR9O1xuXG5cdGF1dGhvcml6YXRpb24uaXNTaG93ID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuICF1c2VyLmlzQXV0aG9yaXplZCgpICYmIHVzZXIuaXNMb2FkZWQoKTtcblx0fTtcblxuXHRhdXRob3JpemF0aW9uLmdvb2dsZSA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciB3aW4gPSAkd2luZG93Lm9wZW4oJy9hdXRoL2dvb2dsZScsICcnLCAnd2lkdGg9ODAwLGhlaWdodD02MDAsbW9kYWw9eWVzLGFsd2F5c1JhaXNlZD15ZXMnKTtcblx0ICAgIHZhciBjaGVja0F1dGhXaW5kb3cgPSAkaW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmICh3aW4gJiYgd2luLmNsb3NlZCkge1xuXHQgICAgICAgIFx0JGludGVydmFsLmNhbmNlbChjaGVja0F1dGhXaW5kb3cpO1xuXG5cdCAgICAgICAgXHRlbnZpcm9ubWVudC5zZXRMb2FkZWQoZmFsc2UpO1xuXHQgICAgICAgIFx0dXNlci5sb2FkKCkudGhlbihmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgXHRcdHJldHVybiBhdXRob3JpemF0aW9uLmxvYWRVc2VyRGF0YSgpO1xuXHQgICAgICAgIFx0fSkuZmluYWxseShmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgXHRcdGVudmlyb25tZW50LnNldExvYWRlZCh0cnVlKTtcblx0ICAgICAgICBcdH0pLmNhdGNoKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBcdFx0JGxvZy5sb2coJ1VzZXIgbG9hZGluZCBlcnJvcicpO1xuXHRcdFx0XHRcdC8vVE9ETzogc2hvdyBlcnJvciBtZXNzYWdlICBcblx0ICAgICAgICBcdH0pO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIDEwMCk7XG5cdH07XG5cblx0YXV0aG9yaXphdGlvbi5sb2dvdXQgPSBmdW5jdGlvbigpIHtcbiAgICBcdGVudmlyb25tZW50LnNldExvYWRlZChmYWxzZSk7XG5cdFx0dXNlci5sb2dvdXQoKS5maW5hbGx5KGZ1bmN0aW9uICgpIHtcbiAgICBcdFx0cmV0dXJuIGF1dGhvcml6YXRpb24ubG9hZFVzZXJEYXRhKCk7XG5cdFx0fSkuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICAgIFx0ZW52aXJvbm1lbnQuc2V0TG9hZGVkKHRydWUpO1xuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uICgpIHtcblx0XHRcdCRsb2cuZXJyb3IoJ0xvZ291dCBlcnJvcicpO1xuXHRcdFx0Ly9UT0RPOiBzaG93IGFuIGVycm9yXG5cdFx0fSk7XG5cdH07XG5cblx0YXV0aG9yaXphdGlvbi5sb2FkVXNlckRhdGEgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gJHEuYWxsKFtcblx0XHRcdHNlbGVjdExpYnJhcnkudXBkYXRlTGlzdCgpLCBcblx0XHRcdGNhdGFsb2cubG9hZEJvb2tzKClcblx0XHRdKTtcblx0fTtcblx0XG5cdHJldHVybiBhdXRob3JpemF0aW9uO1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ1ZpcnR1YWxCb29rc2hlbGYnKVxuLmZhY3RvcnkoJ2Jsb2NrJywgZnVuY3Rpb24gKGJsb2NrVUkpIHtcblx0dmFyIGJsb2NrID0ge307XG5cblx0dmFyIElOVkVOVE9SWSA9ICdpbnZlbnRvcnknO1xuXHR2YXIgTUFJTl9NRU5VID0gJ21haW5fbWVudSc7XG5cdHZhciBHTE9CQUwgPSAnZ2xvYmFsJztcblxuXHRibG9jay5pbnZlbnRvcnkgPSBibG9ja1VJLmluc3RhbmNlcy5nZXQoSU5WRU5UT1JZKTtcblx0XG5cdGJsb2NrLm1haW5NZW51ID0gYmxvY2tVSS5pbnN0YW5jZXMuZ2V0KE1BSU5fTUVOVSk7XG5cblx0YmxvY2suZ2xvYmFsID0gYmxvY2tVSS5pbnN0YW5jZXMuZ2V0KEdMT0JBTCk7XG5cblx0cmV0dXJuIGJsb2NrO1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ1ZpcnR1YWxCb29rc2hlbGYnKVxuLmZhY3RvcnkoJ2Jvb2tFZGl0JywgZnVuY3Rpb24gKCRsb2csIGRhdGEsIGVudmlyb25tZW50LCBibG9jaywgZGlhbG9nLCBhcmNoaXZlLCBjYXRhbG9nLCBzZWxlY3Rvcikge1xuXHR2YXIgYm9va0VkaXQgPSB7fTtcblxuXHR2YXIgQk9PS19JTUFHRV9VUkwgPSAnL29iai9ib29rcy97bW9kZWx9L2ltZy5qcGcnO1xuXHR2YXIgRU1QVFlfSU1BR0VfVVJMID0gJy9pbWcvZW1wdHlfY292ZXIuanBnJztcblx0XG5cdGJvb2tFZGl0Lmxpc3QgPSBbXTtcblx0Ym9va0VkaXQuYm9vayA9IHt9O1xuXHRib29rRWRpdC5jb3ZlcklucHV0VVJMID0gbnVsbDtcblxuXHRib29rRWRpdC5zZXRCb29rID0gZnVuY3Rpb24oYm9vaykge1xuXHRcdHRoaXMuYm9vayA9IHt9OyAvLyBjcmVhdGUgbmV3IG9iamVjdCBmb3IgdW5iaW5kIGZyb20gc2NvcGVcblx0XHRpZihib29rKSB7XG5cdFx0XHR0aGlzLmJvb2suaWQgPSBib29rLmlkO1xuXHRcdFx0dGhpcy5ib29rLnVzZXJJZCA9IGJvb2sudXNlcklkO1xuXHRcdFx0dGhpcy5ib29rLm1vZGVsID0gYm9vay5tb2RlbDtcblx0XHRcdHRoaXMuYm9vay5jb3ZlciA9IGJvb2suY292ZXI7XG5cdFx0XHR0aGlzLmJvb2suY292ZXJJZCA9IGJvb2suY292ZXJJZDtcblx0XHRcdHRoaXMuYm9vay50aXRsZSA9IGJvb2sudGl0bGU7XG5cdFx0XHR0aGlzLmJvb2suYXV0aG9yID0gYm9vay5hdXRob3I7XG5cblx0XHRcdHRoaXMuY292ZXJJbnB1dFVSTCA9IG51bGw7XG5cdFx0fVxuXHR9O1xuXG5cdGJvb2tFZGl0LmdldEltZyA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLmJvb2subW9kZWwgPyBCT09LX0lNQUdFX1VSTC5yZXBsYWNlKCd7bW9kZWx9JywgdGhpcy5ib29rLm1vZGVsKSA6IEVNUFRZX0lNQUdFX1VSTDtcblx0fTtcblxuXHRib29rRWRpdC5nZXRDb3ZlckltZyA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLmlzQ292ZXJTaG93KCkgPyB0aGlzLmJvb2suY292ZXIudXJsIDogRU1QVFlfSU1BR0VfVVJMO1xuXHR9O1xuXG5cdGJvb2tFZGl0LmlzQ292ZXJEaXNhYmxlZCA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLmNvdmVySW5wdXRVUkwgJiYgKHRoaXMuZm9ybS50aXRsZS4kaW52YWxpZCB8fCB0aGlzLmZvcm0uYXV0aG9yLiRpbnZhbGlkKTtcblx0fTtcblxuXHRib29rRWRpdC5pc0NvdmVyU2hvdyA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBCb29sZWFuKHRoaXMuYm9vay5jb3Zlcik7XG5cdH07XG5cblx0Ym9va0VkaXQuaXNTaG93ID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuICEhdGhpcy5ib29rLnVzZXJJZDtcblx0fTtcblxuXHRib29rRWRpdC5zdWJtaXQgPSBmdW5jdGlvbigpIHtcblx0XHRpZih0aGlzLmZvcm0uJHZhbGlkKSB7XG5cdFx0XHR0aGlzLnNhdmUoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZGlhbG9nLm9wZW5FcnJvcignRmlsbCBhbGwgcmVxdWlyZWQgZmllbGRzLCBwbGVhc2UuJyk7XG5cdFx0fVxuXHR9O1xuXG5cdGJvb2tFZGl0LmFwcGx5Q292ZXIgPSBmdW5jdGlvbigpIHtcblx0XHRpZighdGhpcy5pc0NvdmVyRGlzYWJsZWQoKSkge1xuXHRcdFx0aWYodGhpcy5jb3ZlcklucHV0VVJMKSB7XG5cdFx0XHRcdGJsb2NrLmludmVudG9yeS5zdGFydCgpO1xuXHRcdFx0XHRhcmNoaXZlLnNlbmRFeHRlcm5hbFVSTCh0aGlzLmNvdmVySW5wdXRVUkwsIFt0aGlzLmJvb2sudGl0bGUsIHRoaXMuYm9vay5hdXRob3JdKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcblx0XHRcdFx0XHRib29rRWRpdC5ib29rLmNvdmVyID0gcmVzdWx0O1xuXHRcdFx0XHRcdGJvb2tFZGl0LmJvb2suY292ZXJJZCA9IHJlc3VsdC5pZDtcblx0XHRcdFx0fSkuY2F0Y2goZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdGJvb2tFZGl0LmJvb2suY292ZXJJZCA9IG51bGw7XG5cdFx0XHRcdFx0Ym9va0VkaXQuYm9vay5jb3ZlciA9IG51bGw7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0ZGlhbG9nLm9wZW5FcnJvcignQ2FuIG5vdCBhcHBseSB0aGlzIGNvdmVyLiBUcnkgYW5vdGhlciBvbmUsIHBsZWFzZS4nKTtcblx0XHRcdFx0fSkuZmluYWxseShmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0Ym9va0VkaXQuY292ZXJJbnB1dFVSTCA9IG51bGw7XG5cdFx0XHRcdFx0YmxvY2suaW52ZW50b3J5LnN0b3AoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRib29rRWRpdC5ib29rLmNvdmVySWQgPSBudWxsO1xuXHRcdFx0XHRib29rRWRpdC5ib29rLmNvdmVyID0gbnVsbDtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0ZGlhbG9nLm9wZW5FcnJvcignRmlsbCBhdXRob3IgYW5kIHRpdGxlIGZpZWxkcywgcGxlYXNlLicpO1xuXHRcdH1cblx0fTtcblxuXHRib29rRWRpdC5zYXZlID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHNjb3BlID0gdGhpcztcblx0XHRcblx0XHRibG9jay5pbnZlbnRvcnkuc3RhcnQoKTtcblx0XHRkYXRhLnBvc3RCb29rKHRoaXMuYm9vaykudGhlbihmdW5jdGlvbiAoZHRvKSB7XG5cdFx0XHRpZihzZWxlY3Rvci5pc0Jvb2tTZWxlY3RlZChkdG8uaWQpKSB7XG5cdFx0XHRcdHNlbGVjdG9yLnVuc2VsZWN0KCk7XG5cdFx0XHR9XG5cblx0XHRcdGVudmlyb25tZW50LnVwZGF0ZUJvb2soZHRvKTtcblx0XHRcdHNjb3BlLmNhbmNlbCgpO1xuXHRcdFx0cmV0dXJuIGNhdGFsb2cubG9hZEJvb2tzKCk7XG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24gKCkge1xuXHRcdFx0JGxvZy5lcnJvcignQm9vayBzYXZlIGVycm9yJyk7XG5cdFx0XHQvL1RPRE86IHNob3cgZXJyb3Jcblx0XHR9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHtcblx0XHRcdGJsb2NrLmludmVudG9yeS5zdG9wKCk7XG5cdFx0fSk7XG5cdH07XG5cblx0Ym9va0VkaXQuY2FuY2VsID0gZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5zZXRCb29rKCk7XG5cdH07XG5cblx0cmV0dXJuIGJvb2tFZGl0O1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ1ZpcnR1YWxCb29rc2hlbGYnKVxuLmZhY3RvcnkoJ2NhdGFsb2cnLCBmdW5jdGlvbiAoJHEsIGRhdGEsIHVzZXIsIGJsb2NrKSB7XG5cdHZhciBjYXRhbG9nID0ge307XG5cblx0Y2F0YWxvZy5ib29rcyA9IG51bGw7XG5cblx0Y2F0YWxvZy5sb2FkQm9va3MgPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgcHJvbWlzZTtcblx0XHR2YXIgdXNlcklkID0gdXNlci5nZXRJZCgpO1xuXG5cdFx0aWYodXNlcklkKSB7XG5cdFx0XHRibG9jay5pbnZlbnRvcnkuc3RhcnQoKTtcblx0XHRcdHByb21pc2UgPSAkcS53aGVuKHVzZXJJZCA/IGRhdGEuZ2V0VXNlckJvb2tzKHVzZXJJZCkgOiBudWxsKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcblx0XHRcdFx0Y2F0YWxvZy5ib29rcyA9IHJlc3VsdDtcblx0XHRcdH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRibG9jay5pbnZlbnRvcnkuc3RvcCgpO1x0XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRyZXR1cm4gcHJvbWlzZTtcblx0fTtcblxuXHRyZXR1cm4gY2F0YWxvZztcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5mYWN0b3J5KCdjcmVhdGVMaWJyYXJ5JywgZnVuY3Rpb24gKGRhdGEsIGVudmlyb25tZW50LCBuZ0RpYWxvZykge1xuXHR2YXIgY3JlYXRlTGlicmFyeSA9IHt9O1xuXHRcblx0dmFyIEVNUFRZX0lNQUdFX1VSTCA9ICcvaW1nL2VtcHR5X2NvdmVyLmpwZyc7XG5cdFxuXHRjcmVhdGVMaWJyYXJ5Lmxpc3QgPSBbXTtcblx0Y3JlYXRlTGlicmFyeS5tb2RlbCA9IG51bGw7XG5cblx0Y3JlYXRlTGlicmFyeS5zaG93ID0gZnVuY3Rpb24oKSB7XG5cdFx0bmdEaWFsb2cub3BlbkNvbmZpcm0oe1xuXHRcdFx0dGVtcGxhdGU6ICcvdWkvY3JlYXRlTGlicmFyeSdcblx0XHR9KTtcblx0fTtcblxuXHRjcmVhdGVMaWJyYXJ5LmdldEltZyA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLm1vZGVsID8gJy9vYmovbGlicmFyaWVzL3ttb2RlbH0vaW1nLmpwZycucmVwbGFjZSgne21vZGVsfScsIHRoaXMubW9kZWwpIDogRU1QVFlfSU1BR0VfVVJMO1xuXHR9O1xuXG5cdGNyZWF0ZUxpYnJhcnkuY3JlYXRlID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodGhpcy5tb2RlbCkge1xuXHRcdFx0ZGF0YS5wb3N0TGlicmFyeSh0aGlzLm1vZGVsKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcblx0XHRcdFx0ZW52aXJvbm1lbnQuZ29Ub0xpYnJhcnkocmVzdWx0LmlkKTtcblx0XHRcdH0pLmNhdGNoKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0Ly9UT0RPOiBzaG93IGFuIGVycm9yXG5cdFx0XHR9KTtcblx0XHR9XG5cdH07XG5cblx0cmV0dXJuIGNyZWF0ZUxpYnJhcnk7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgnY3JlYXRlU2VjdGlvbicsIGZ1bmN0aW9uICgkbG9nLCB1c2VyLCBlbnZpcm9ubWVudCwgbG9jYXRvcikge1xuXHR2YXIgY3JlYXRlU2VjdGlvbiA9IHt9O1xuXHRcblx0dmFyIEVNUFRZX0lNQUdFX1VSTCA9ICcvaW1nL2VtcHR5X2NvdmVyLmpwZyc7XG5cblx0Y3JlYXRlU2VjdGlvbi5saXN0ID0gW107XG5cdGNyZWF0ZVNlY3Rpb24ubW9kZWwgPSBudWxsO1xuXHRjcmVhdGVTZWN0aW9uLnZpc2libGUgPSBmYWxzZTtcblxuXHRjcmVhdGVTZWN0aW9uLmlzU2hvdyA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLnZpc2libGU7XG5cdH07XG5cblx0Y3JlYXRlU2VjdGlvbi5zaG93ID0gZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy52aXNpYmxlID0gdHJ1ZTtcblx0fTtcblxuXHRjcmVhdGVTZWN0aW9uLmhpZGUgPSBmdW5jdGlvbigpIHtcblx0XHR0aGlzLnZpc2libGUgPSBmYWxzZTtcblx0fTtcblx0XG5cdGNyZWF0ZVNlY3Rpb24uZ2V0SW1nID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMubW9kZWwgPyAnL29iai9zZWN0aW9ucy97bW9kZWx9L2ltZy5qcGcnLnJlcGxhY2UoJ3ttb2RlbH0nLCB0aGlzLm1vZGVsKSA6IEVNUFRZX0lNQUdFX1VSTDtcblx0fTtcblxuXHRjcmVhdGVTZWN0aW9uLmNyZWF0ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHRoaXMubW9kZWwpIHtcblx0XHRcdHZhciBzZWN0aW9uRGF0YSA9IHtcblx0XHRcdFx0bW9kZWw6IHRoaXMubW9kZWwsXG5cdFx0XHRcdGxpYnJhcnlJZDogZW52aXJvbm1lbnQubGlicmFyeS5pZCxcblx0XHRcdFx0dXNlcklkOiB1c2VyLmdldElkKClcblx0XHRcdH07XG5cblx0XHRcdHRoaXMucGxhY2Uoc2VjdGlvbkRhdGEpO1xuXHRcdH1cblx0fTtcblxuXHRjcmVhdGVTZWN0aW9uLnBsYWNlID0gZnVuY3Rpb24oZHRvKSB7XG5cdFx0Ly9UT0RPOiBibG9ja1xuXHRcdGxvY2F0b3IucGxhY2VTZWN0aW9uKGR0bykuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG5cdFx0XHQvL1RPRE86IHNob3cgYW4gZXJyb3Jcblx0XHRcdCRsb2cuZXJyb3IoZXJyb3IpO1xuXHRcdH0pO1x0XG5cdH07XG5cblx0cmV0dXJuIGNyZWF0ZVNlY3Rpb247XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgnZmVlZGJhY2snLCBmdW5jdGlvbiAodXNlciwgZGF0YSwgZGlhbG9nKSB7XG5cdHZhciBmZWVkYmFjayA9IHt9O1xuXHR2YXIgc2hvdyA9IGZhbHNlO1xuXG5cdGZlZWRiYWNrLm1lc3NhZ2UgPSBudWxsO1xuXG5cdGZlZWRiYWNrLmlzU2hvdyA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBzaG93O1xuXHR9O1xuXG5cdGZlZWRiYWNrLnNob3cgPSBmdW5jdGlvbigpIHtcblx0XHRzaG93ID0gdHJ1ZTtcblx0fTtcblxuXHRmZWVkYmFjay5oaWRlID0gZnVuY3Rpb24oKSB7XG5cdFx0c2hvdyA9IGZhbHNlO1xuXHR9O1xuXG5cdGZlZWRiYWNrLnN1Ym1pdCA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBkYXRhT2JqZWN0O1xuXHRcdFxuXHRcdGlmKHRoaXMuZm9ybS5tZXNzYWdlLiR2YWxpZCkge1xuXHRcdFx0ZGlhbG9nLm9wZW5Db25maXJtKCdTZW5kIGZlZWRiYWNrPycpLnRoZW4oZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRkYXRhT2JqZWN0ID0ge1xuXHRcdFx0XHRcdG1lc3NhZ2U6IHRoaXMubWVzc2FnZSxcblx0XHRcdFx0XHR1c2VySWQ6IHVzZXIuZ2V0SWQoKVxuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdHJldHVybiBkYXRhLnBvc3RGZWVkYmFjayhkYXRhT2JqZWN0KS50aGVuKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHR0aGlzLm1lc3NhZ2UgPSBudWxsO1xuXHRcdFx0XHRcdGZlZWRiYWNrLmhpZGUoKTtcblx0XHRcdFx0fSwgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdGRpYWxvZy5vcGVuRXJyb3IoJ0NhbiBub3Qgc2VuZCBmZWVkYmFjayBiZWNhdXNlIG9mIGFuIGVycm9yLicpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRkaWFsb2cub3BlbkVycm9yKCdGZWVkYmFjayBmaWVsZCBpcyByZXF1aXJlZC4nKTtcblx0XHR9XG5cdH07XG5cblx0cmV0dXJuIGZlZWRiYWNrO1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ1ZpcnR1YWxCb29rc2hlbGYnKVxuLmZhY3RvcnkoJ2ludmVudG9yeScsIGZ1bmN0aW9uICgkbG9nLCBTZWxlY3Rvck1ldGEsIHVzZXIsIGRhdGEsIGJvb2tFZGl0LCBzZWxlY3RvciwgZW52aXJvbm1lbnQsIGRpYWxvZywgbG9jYXRvciwgY2F0YWxvZywgYmxvY2spIHtcblx0dmFyIGludmVudG9yeSA9IHt9O1xuXG5cdGludmVudG9yeS5zZWFyY2ggPSBudWxsO1xuXG5cdGludmVudG9yeS5leHBhbmQgPSBmdW5jdGlvbihib29rKSB7XG5cdFx0Ym9va0VkaXQuc2V0Qm9vayhib29rKTtcblx0fTtcblxuXHRpbnZlbnRvcnkuaXNTaG93ID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHVzZXIuaXNBdXRob3JpemVkKCk7XG5cdH07XG5cblx0aW52ZW50b3J5LmlzQm9va1NlbGVjdGVkID0gZnVuY3Rpb24oaWQpIHtcblx0XHRyZXR1cm4gc2VsZWN0b3IuaXNCb29rU2VsZWN0ZWQoaWQpO1xuXHR9O1xuXG5cdGludmVudG9yeS5zZWxlY3QgPSBmdW5jdGlvbihkdG8pIHtcblx0XHR2YXIgYm9vayA9IGVudmlyb25tZW50LmdldEJvb2soZHRvLmlkKTtcblx0XHR2YXIgbWV0YSA9IG5ldyBTZWxlY3Rvck1ldGEoYm9vayk7XG5cblx0XHRzZWxlY3Rvci5zZWxlY3QobWV0YSk7XG5cdH07XG5cblx0aW52ZW50b3J5LmFkZEJvb2sgPSBmdW5jdGlvbigpIHtcblx0XHR0aGlzLmV4cGFuZCh7dXNlcklkOiB1c2VyLmdldElkKCl9KTtcblx0fTtcblxuXHRpbnZlbnRvcnkuZGVsZXRlID0gZnVuY3Rpb24oYm9vaykge1xuXHRcdGRpYWxvZy5vcGVuQ29uZmlybSgnRGVsZXRlIGJvb2s/JykudGhlbihmdW5jdGlvbiAoKSB7XG5cdFx0XHRibG9jay5pbnZlbnRvcnkuc3RhcnQoKTtcblxuXHRcdFx0ZGF0YS5kZWxldGVCb29rKGJvb2suaWQpLnRoZW4oZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRpZihzZWxlY3Rvci5pc0Jvb2tTZWxlY3RlZChib29rLmlkKSkge1xuXHRcdFx0XHRcdHNlbGVjdG9yLnVuc2VsZWN0KCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRlbnZpcm9ubWVudC5yZW1vdmVCb29rKGJvb2suaWQpO1xuXHRcdFx0XHRyZXR1cm4gY2F0YWxvZy5sb2FkQm9va3MoKTtcblx0XHRcdH0pLmNhdGNoKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0ZGlhbG9nLm9wZW5FcnJvcignRGVsZXRlIGJvb2sgZXJyb3IuJyk7XG5cdFx0XHR9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0YmxvY2suaW52ZW50b3J5LnN0b3AoKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9O1xuXG5cdGludmVudG9yeS5wbGFjZSA9IGZ1bmN0aW9uKGJvb2ssIGV2ZW50KSB7XG5cdFx0dmFyIHByb21pc2U7XG5cdFx0dmFyIGlzQm9va1BsYWNlZCA9ICEhYm9vay5zZWN0aW9uSWQ7XG5cblx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcblx0XHRibG9jay5pbnZlbnRvcnkuc3RhcnQoKTtcblx0XHRwcm9taXNlID0gaXNCb29rUGxhY2VkID8gbG9jYXRvci51bnBsYWNlQm9vayhib29rKSA6IGxvY2F0b3IucGxhY2VCb29rKGJvb2spO1xuXHRcdHByb21pc2UudGhlbihmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gY2F0YWxvZy5sb2FkQm9va3MoKTtcblx0XHR9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcblx0XHRcdC8vVE9ETzogc2hvdyBhbiBlcnJvclxuXHRcdFx0JGxvZy5lcnJvcihlcnJvcik7XG5cdFx0fSkuZmluYWxseShmdW5jdGlvbiAoKSB7XG5cdFx0XHRibG9jay5pbnZlbnRvcnkuc3RvcCgpO1xuXHRcdH0pO1xuXHR9O1xuXG5cdHJldHVybiBpbnZlbnRvcnk7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgnbWFpbk1lbnUnLCBmdW5jdGlvbiAoJGxvZywgZGF0YSwgYm9va0VkaXQsIGZlZWRiYWNrLCBzZWxlY3RMaWJyYXJ5LCBjcmVhdGVMaWJyYXJ5LCBjcmVhdGVTZWN0aW9uKSB7XG5cdHZhciBtYWluTWVudSA9IHt9O1xuXHRcblx0dmFyIHNob3cgPSBmYWxzZTtcblx0dmFyIGNyZWF0ZUxpc3RTaG93ID0gZmFsc2U7XG5cblx0bWFpbk1lbnUuaXNTaG93ID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHNob3c7XG5cdH07XG5cblx0bWFpbk1lbnUuc2hvdyA9IGZ1bmN0aW9uKCkge1xuXHRcdG1haW5NZW51LmhpZGVBbGwoKTtcblx0XHRzaG93ID0gdHJ1ZTtcblx0fTtcblxuXHRtYWluTWVudS5oaWRlID0gZnVuY3Rpb24oKSB7XG5cdFx0c2hvdyA9IGZhbHNlO1xuXHR9O1xuXG5cdG1haW5NZW51LmlzQ3JlYXRlTGlzdFNob3cgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gY3JlYXRlTGlzdFNob3c7XG5cdH07XG5cblx0bWFpbk1lbnUuY3JlYXRlTGlzdFNob3cgPSBmdW5jdGlvbigpIHtcblx0XHRtYWluTWVudS5oaWRlQWxsKCk7XG5cdFx0Y3JlYXRlTGlzdFNob3cgPSB0cnVlO1xuXHR9O1xuXG5cdG1haW5NZW51LmNyZWF0ZUxpc3RIaWRlID0gZnVuY3Rpb24oKSB7XG5cdFx0Y3JlYXRlTGlzdFNob3cgPSBmYWxzZTtcblx0fTtcblxuXHRtYWluTWVudS5oaWRlQWxsID0gZnVuY3Rpb24oKSB7XG5cdFx0bWFpbk1lbnUuaGlkZSgpO1xuXHRcdG1haW5NZW51LmNyZWF0ZUxpc3RIaWRlKCk7XG5cdFx0Y3JlYXRlU2VjdGlvbi5oaWRlKCk7XG5cblx0XHRmZWVkYmFjay5oaWRlKCk7XG5cdH07XG5cblx0bWFpbk1lbnUudHJpZ2dlciA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKG1haW5NZW51LmlzU2hvdygpKSB7XG5cdFx0XHRtYWluTWVudS5oaWRlKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdG1haW5NZW51LnNob3coKTtcblx0XHR9XG5cdH07XG5cblx0bWFpbk1lbnUuc2hvd0ZlZWRiYWNrID0gZnVuY3Rpb24oKSB7XG5cdFx0bWFpbk1lbnUuaGlkZUFsbCgpO1xuXHRcdGZlZWRiYWNrLnNob3coKTtcblx0fTtcblxuXHRtYWluTWVudS5zaG93U2VsZWN0TGlicmFyeSA9IGZ1bmN0aW9uKCkge1xuXHRcdG1haW5NZW51LmhpZGVBbGwoKTtcblx0XHRzZWxlY3RMaWJyYXJ5LnNob3coKTtcblx0fTtcblxuXHRtYWluTWVudS5zaG93Q3JlYXRlTGlicmFyeSA9IGZ1bmN0aW9uKCkge1xuXHRcdG1haW5NZW51LmhpZGVBbGwoKTtcblx0XHRjcmVhdGVMaWJyYXJ5LnNob3coKTtcblx0fTtcblxuXHRtYWluTWVudS5zaG93Q3JlYXRlU2VjdGlvbiA9IGZ1bmN0aW9uKCkge1xuXHRcdG1haW5NZW51LmhpZGVBbGwoKTtcblx0XHRjcmVhdGVTZWN0aW9uLnNob3coKTtcblx0fTtcblxuXHR2YXIgaW5pdCA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vVE9ETzogbW92ZSB0byBtZW51IG1vZGVsc1xuXHRcdGRhdGEuZ2V0VUlEYXRhKCkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdFx0XHRjcmVhdGVMaWJyYXJ5Lmxpc3QgPSByZXMuZGF0YS5saWJyYXJpZXM7XG5cdFx0XHRjcmVhdGVTZWN0aW9uLmxpc3QgPSByZXMuZGF0YS5ib29rc2hlbHZlcztcblx0XHRcdGJvb2tFZGl0Lmxpc3QgPSByZXMuZGF0YS5ib29rcztcblx0XHR9KS5jYXRjaChmdW5jdGlvbiAoKSB7XG5cdFx0XHQkbG9nLmxvZygnVUkgaW5pdCBlcnJvcicpO1xuXHRcdFx0Ly9UT0RPOiBzaG93IGFuIGVycm9yXG5cdFx0fSk7XG5cdH07XG5cblx0aW5pdCgpO1xuXG5cdHJldHVybiBtYWluTWVudTtcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5mYWN0b3J5KCdzZWxlY3RMaWJyYXJ5JywgZnVuY3Rpb24gKGRhdGEsIGVudmlyb25tZW50LCB1c2VyLCBuZ0RpYWxvZykge1xuXHR2YXIgc2VsZWN0TGlicmFyeSA9IHt9O1xuXG5cdHNlbGVjdExpYnJhcnkubGlzdCA9IFtdO1xuXG5cdHNlbGVjdExpYnJhcnkuc2hvdyA9IGZ1bmN0aW9uKCkge1xuXHRcdG5nRGlhbG9nLm9wZW5Db25maXJtKHtcblx0XHRcdHRlbXBsYXRlOiAnL3VpL3NlbGVjdExpYnJhcnknXG5cdFx0fSk7XG5cdH07XG5cblx0c2VsZWN0TGlicmFyeS5pc0F2YWlsYWJsZSA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBzZWxlY3RMaWJyYXJ5Lmxpc3QubGVuZ3RoID4gMDtcblx0fTtcblxuXHRzZWxlY3RMaWJyYXJ5LmlzVXNlckxpYnJhcnkgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gZW52aXJvbm1lbnQubGlicmFyeSAmJiBlbnZpcm9ubWVudC5saWJyYXJ5LmRhdGFPYmplY3QudXNlcklkID09PSB1c2VyLmdldElkKCk7XG5cdH07XG5cblx0c2VsZWN0TGlicmFyeS51cGRhdGVMaXN0ID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHNjb3BlID0gdGhpcztcblxuXHQgICAgdmFyIHByb21pc2UgPSBkYXRhLmdldExpYnJhcmllcygpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgc2NvcGUubGlzdCA9IHJlcy5kYXRhO1xuICAgIFx0fSk7XG5cbiAgICBcdHJldHVybiBwcm9taXNlO1xuXHR9O1xuXG5cdHNlbGVjdExpYnJhcnkuZ28gPSBlbnZpcm9ubWVudC5nb1RvTGlicmFyeTtcblxuXHRyZXR1cm4gc2VsZWN0TGlicmFyeTtcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5mYWN0b3J5KCd0b29scycsIGZ1bmN0aW9uICgkcSwgQm9va09iamVjdCwgU2VjdGlvbk9iamVjdCwgZGF0YSwgc2VsZWN0b3IsIGRpYWxvZywgYmxvY2ssIGNhdGFsb2csIGVudmlyb25tZW50LCBwcmV2aWV3KSB7XG5cdHZhciB0b29scyA9IHt9O1xuXG5cdHZhciBST1RBVElPTl9TQ0FMRSA9IDE7XG5cblx0dmFyIHN0YXRlcyA9IHtcblx0XHRyb3RhdGVMZWZ0OiBmYWxzZSxcblx0XHRyb3RhdGVSaWdodDogZmFsc2Vcblx0fTtcblxuXHR0b29scy5kZWxldGUgPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgb2JqID0gc2VsZWN0b3IuZ2V0U2VsZWN0ZWRPYmplY3QoKTtcblxuXHRcdGlmKG9iaiAmJiBzZWxlY3Rvci5pc1NlbGVjdGVkRWRpdGFibGUoKSkge1xuXHRcdFx0ZGlhbG9nLm9wZW5Db25maXJtKCdEZWxldGUgc2VsZWN0ZWQgb2JqZWN0PycpLnRoZW4oZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRibG9jay5nbG9iYWwuc3RhcnQoKTtcblxuXHRcdFx0XHRkZWxldGVPYmplY3Qob2JqKS50aGVuKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRzZWxlY3Rvci51bnNlbGVjdCgpO1xuXHRcdFx0XHRcdHJldHVybiBjYXRhbG9nLmxvYWRCb29rcygpO1xuXHRcdFx0XHR9KS5jYXRjaChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0ZGlhbG9nLm9wZW5FcnJvcignRXJyb3IgZGVsZXRpbmcgb2JqZWN0LicpO1xuXHRcdFx0XHR9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRibG9jay5nbG9iYWwuc3RvcCgpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1x0XHRcdFxuXHRcdH1cblx0fTtcblxuXHR2YXIgZGVsZXRlT2JqZWN0ID0gZnVuY3Rpb24ob2JqKSB7XG5cdFx0cmV0dXJuICRxLndoZW4oXG5cdFx0XHRvYmogaW5zdGFuY2VvZiBCb29rT2JqZWN0ID8gXG5cdFx0XHRcdGRlbGV0ZUJvb2sob2JqLmlkKSA6XG5cdFx0XHRcdG9iaiBpbnN0YW5jZW9mIFNlY3Rpb25PYmplY3QgP1xuXHRcdFx0XHRcdGRlbGV0ZVNlY3Rpb24ob2JqLmlkKSA6XG5cdFx0XHRcdFx0JHEucmVqZWN0KCdDYW4gbm90IGRlbGV0ZSBzZWxlY3RlZCBvYmplY3QuJykvL1RPRE86IHRlc3Rcblx0XHQpO1xuXHR9O1xuXG5cdHZhciBkZWxldGVCb29rID0gZnVuY3Rpb24oaWQpIHtcblx0XHRyZXR1cm4gZGF0YS5kZWxldGVCb29rKGlkKS50aGVuKGZ1bmN0aW9uICgpIHtcblx0XHRcdGVudmlyb25tZW50LnJlbW92ZUJvb2soaWQpO1xuXHRcdH0pO1xuXHR9O1xuXG5cdHZhciBkZWxldGVTZWN0aW9uID0gZnVuY3Rpb24oaWQpIHtcblx0XHRyZXR1cm4gZGF0YS5kZWxldGVTZWN0aW9uKGlkKS50aGVuKGZ1bmN0aW9uICgpIHtcblx0XHRcdGVudmlyb25tZW50LnJlbW92ZVNlY3Rpb24oaWQpO1xuXHRcdH0pO1xuXHR9O1xuXG5cdHRvb2xzLnJvdGF0ZUxlZnQgPSBmdW5jdGlvbigpIHtcblx0XHRzdGF0ZXMucm90YXRlTGVmdCA9IHRydWU7XG5cdH07XG5cblx0dG9vbHMucm90YXRlUmlnaHQgPSBmdW5jdGlvbigpIHtcblx0XHRzdGF0ZXMucm90YXRlUmlnaHQgPSB0cnVlO1xuXHR9O1xuXG5cdHRvb2xzLnN0b3AgPSBmdW5jdGlvbigpIHtcblx0XHRzdGF0ZXMucm90YXRlTGVmdCA9IGZhbHNlO1xuXHRcdHN0YXRlcy5yb3RhdGVSaWdodCA9IGZhbHNlO1xuXHR9O1xuXG5cdHRvb2xzLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHN0YXRlcy5yb3RhdGVMZWZ0KSB7XG5cdFx0XHRyb3RhdGUoUk9UQVRJT05fU0NBTEUpO1xuXHRcdH0gZWxzZSBpZihzdGF0ZXMucm90YXRlUmlnaHQpIHtcblx0XHRcdHJvdGF0ZSgtUk9UQVRJT05fU0NBTEUpO1xuXHRcdH1cblx0fTtcblxuXHR2YXIgcm90YXRlID0gZnVuY3Rpb24oc2NhbGUpIHtcblx0XHRpZihwcmV2aWV3LmlzQWN0aXZlKCkpIHtcblx0XHRcdHByZXZpZXcucm90YXRlKHNjYWxlKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dmFyIG9iaiA9IHNlbGVjdG9yLmdldFNlbGVjdGVkT2JqZWN0KCk7XG5cdFx0XHRvYmoucm90YXRlKHNjYWxlKTtcblx0XHR9XG5cdH07XG5cblx0cmV0dXJuIHRvb2xzO1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ1ZpcnR1YWxCb29rc2hlbGYnKVxuLmZhY3RvcnkoJ3Rvb2x0aXAnLCBmdW5jdGlvbiAoKSB7XG5cdHZhciB0b29sdGlwID0ge307XG5cblx0dG9vbHRpcC5vYmogPSB7fTtcblxuXHR0b29sdGlwLnNldCA9IGZ1bmN0aW9uKG9iaikge1xuXHRcdGlmKG9iaikge1xuXHRcdFx0dGhpcy5vYmoudHlwZSA9IG9iai50eXBlO1xuXHRcdFx0dGhpcy5vYmoudGl0bGUgPSBvYmouZGF0YU9iamVjdC50aXRsZTtcblx0XHRcdHRoaXMub2JqLmF1dGhvciA9IG9iai5kYXRhT2JqZWN0LmF1dGhvcjtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5vYmoudHlwZSA9IG51bGw7XG5cdFx0fVxuXHR9O1xuXG5cdHJldHVybiB0b29sdGlwO1xufSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9