angular
    .module('VirtualBookshelf', ['blockUI', 'ngDialog', 'angularUtils.directives.dirPagination'])
    	.config(function (blockUIConfig, paginationTemplateProvider) {
    		blockUIConfig.delay = 0;
    		blockUIConfig.autoBlock = false;
			blockUIConfig.autoInjectBodyBlock = false;
			paginationTemplateProvider.setPath('/js/angular/dirPagination/dirPagination.tpl.html');
    	})
    	.run(function (Main) {
			Main.start();
    	});
angular.module('VirtualBookshelf')
.controller('ToolsCtrl', function (uiTools) {
    this.isShow = uiTools.isShow;
    this.isRotatable = uiTools.isRotatable;
    this.rotateLeft = uiTools.rotateLeft;
    this.rotateRight = uiTools.rotateRight;
    this.stop = uiTools.stop;
});
angular.module('VirtualBookshelf')
.controller('UiCtrl', function ($scope, mainMenu, selectLibrary, createLibrary, createSection, feedback, authorization, navigation, inventory, bookEdit, catalog) {
    $scope.mainMenu = mainMenu;

    $scope.selectLibrary = selectLibrary;
    $scope.createLibrary = createLibrary;
    $scope.createSection = createSection;
    $scope.feedback = feedback;
    $scope.authorization = authorization;

    $scope.inventory = inventory;
    $scope.bookEdit = bookEdit;
    $scope.catalog = catalog;

	$scope.navigation = {
		stop: navigation.goStop,
		forward: navigation.goForward,
		backward: navigation.goBackward,
		left: navigation.goLeft,
		right: navigation.goRight
	};
});
angular.module('VirtualBookshelf')
.directive('vbSelect', function() {
	return {
		require: 'ngModel',
		restrict: 'E',
    	transclude: true,
		templateUrl: '/ui/select.ejs',
		scope: {
			options: '=',
			value: '@',
			label: '@'
		},

		link: function(scope, element, attrs, controller) {
			scope.select = function(item) {
				controller.$setViewValue(item[scope.value]);
			};

			scope.isSelected = function(item) {
				return controller.$modelValue === item[scope.value];
			};
		}
	};
});

/**
 * @license
 * lodash 3.2.0 (Custom Build) lodash.com/license | Underscore.js 1.7.0 underscorejs.org/LICENSE
 * Build: `lodash modern -o ./lodash.js`
 */
;(function(){function n(n,t){if(n!==t){var r=n===n,e=t===t;if(n>t||!r||typeof n=="undefined"&&e)return 1;if(n<t||!e||typeof t=="undefined"&&r)return-1}return 0}function t(n,t,r){if(t!==t)return p(n,r);r=(r||0)-1;for(var e=n.length;++r<e;)if(n[r]===t)return r;return-1}function r(n,t){var r=n.length;for(n.sort(t);r--;)n[r]=n[r].c;return n}function e(n){return typeof n=="string"?n:null==n?"":n+""}function u(n){return n.charCodeAt(0)}function o(n,t){for(var r=-1,e=n.length;++r<e&&-1<t.indexOf(n.charAt(r)););return r
}function i(n,t){for(var r=n.length;r--&&-1<t.indexOf(n.charAt(r)););return r}function f(t,r){return n(t.a,r.a)||t.b-r.b}function a(t,r){for(var e=-1,u=t.a,o=r.a,i=u.length;++e<i;){var f=n(u[e],o[e]);if(f)return f}return t.b-r.b}function c(n){return Wt[n]}function l(n){return Nt[n]}function s(n){return"\\"+Lt[n]}function p(n,t,r){var e=n.length;for(t=r?t||e:(t||0)-1;r?t--:++t<e;){var u=n[t];if(u!==u)return t}return-1}function h(n){return n&&typeof n=="object"||false}function _(n){return 160>=n&&9<=n&&13>=n||32==n||160==n||5760==n||6158==n||8192<=n&&(8202>=n||8232==n||8233==n||8239==n||8287==n||12288==n||65279==n)
}function g(n,t){for(var r=-1,e=n.length,u=-1,o=[];++r<e;)n[r]===t&&(n[r]=B,o[++u]=r);return o}function v(n){for(var t=-1,r=n.length;++t<r&&_(n.charCodeAt(t)););return t}function y(n){for(var t=n.length;t--&&_(n.charCodeAt(t)););return t}function d(n){return Ut[n]}function m(_){function Wt(n){if(h(n)&&!(So(n)||n instanceof Ut)){if(n instanceof Nt)return n;if(Uu.call(n,"__chain__")&&Uu.call(n,"__wrapped__"))return he(n)}return new Nt(n)}function Nt(n,t,r){this.__wrapped__=n,this.__actions__=r||[],this.__chain__=!!t
}function Ut(n){this.__wrapped__=n,this.__actions__=null,this.__dir__=1,this.__dropCount__=0,this.__filtered__=false,this.__iteratees__=null,this.__takeCount__=so,this.__views__=null}function Ft(){this.__data__={}}function Lt(n){var t=n?n.length:0;for(this.data={hash:to(null),set:new Zu};t--;)this.push(n[t])}function Bt(n,t){var r=n.data;return(typeof t=="string"||Xe(t)?r.set.has(t):r.hash[t])?0:-1}function zt(n,t){var r=-1,e=n.length;for(t||(t=wu(e));++r<e;)t[r]=n[r];return t}function Mt(n,t){for(var r=-1,e=n.length;++r<e&&false!==t(n[r],r,n););return n
}function qt(n,t){for(var r=-1,e=n.length;++r<e;)if(!t(n[r],r,n))return false;return true}function Pt(n,t){for(var r=-1,e=n.length,u=-1,o=[];++r<e;){var i=n[r];t(i,r,n)&&(o[++u]=i)}return o}function Kt(n,t){for(var r=-1,e=n.length,u=wu(e);++r<e;)u[r]=t(n[r],r,n);return u}function Vt(n){for(var t=-1,r=n.length,e=lo;++t<r;){var u=n[t];u>e&&(e=u)}return e}function Yt(n,t,r,e){var u=-1,o=n.length;for(e&&o&&(r=n[++u]);++u<o;)r=t(r,n[u],u,n);return r}function Zt(n,t,r,e){var u=n.length;for(e&&u&&(r=n[--u]);u--;)r=t(r,n[u],u,n);
return r}function Gt(n,t){for(var r=-1,e=n.length;++r<e;)if(t(n[r],r,n))return true;return false}function Jt(n,t){return typeof n=="undefined"?t:n}function Xt(n,t,r,e){return typeof n!="undefined"&&Uu.call(e,r)?n:t}function Ht(n,t,r){var e=Fo(t);if(!r)return nr(t,n,e);for(var u=-1,o=e.length;++u<o;){var i=e[u],f=n[i],a=r(f,t[i],i,n,t);(a===a?a===f:f!==f)&&(typeof f!="undefined"||i in n)||(n[i]=a)}return n}function Qt(n,t){for(var r=-1,e=n.length,u=oe(e),o=t.length,i=wu(o);++r<o;){var f=t[r];u?(f=parseFloat(f),i[r]=ee(f,e)?n[f]:w):i[r]=n[f]
}return i}function nr(n,t,r){r||(r=t,t={});for(var e=-1,u=r.length;++e<u;){var o=r[e];t[o]=n[o]}return t}function tr(n,t,r){var e=typeof n;if("function"==e){if(e=typeof t!="undefined"){var e=Wt.support,u=!(e.funcNames?n.name:e.funcDecomp);if(!u){var o=Wu.call(n);e.funcNames||(u=!dt.test(o)),u||(u=kt.test(o)||He(n),bo(n,u))}e=u}n=e?Nr(n,t,r):n}else n=null==n?vu:"object"==e?br(n):typeof t=="undefined"?jr(n+""):xr(n+"",t);return n}function rr(n,t,r,e,u,o,i){var f;if(r&&(f=u?r(n,e,u):r(n)),typeof f!="undefined")return f;
if(!Xe(n))return n;if(e=So(n)){if(f=ne(n),!t)return zt(n,f)}else{var a=Lu.call(n),c=a==K;if(a!=Y&&a!=z&&(!c||u))return Tt[a]?re(n,a,t):u?n:{};if(f=te(c?{}:n),!t)return nr(n,f,Fo(n))}for(o||(o=[]),i||(i=[]),u=o.length;u--;)if(o[u]==n)return i[u];return o.push(n),i.push(f),(e?Mt:_r)(n,function(e,u){f[u]=rr(e,t,r,u,n,o,i)}),f}function er(n,t,r,e){if(typeof n!="function")throw new Ou($);return Gu(function(){n.apply(w,Rr(r,e))},t)}function ur(n,r){var e=n?n.length:0,u=[];if(!e)return u;var o=-1,i=Qr(),f=i==t,a=f&&200<=r.length&&xo(r),c=r.length;
a&&(i=Bt,f=false,r=a);n:for(;++o<e;)if(a=n[o],f&&a===a){for(var l=c;l--;)if(r[l]===a)continue n;u.push(a)}else 0>i(r,a)&&u.push(a);return u}function or(n,t){var r=n?n.length:0;if(!oe(r))return _r(n,t);for(var e=-1,u=pe(n);++e<r&&false!==t(u[e],e,u););return n}function ir(n,t){var r=n?n.length:0;if(!oe(r))return gr(n,t);for(var e=pe(n);r--&&false!==t(e[r],r,e););return n}function fr(n,t){var r=true;return or(n,function(n,e,u){return r=!!t(n,e,u)}),r}function ar(n,t){var r=[];return or(n,function(n,e,u){t(n,e,u)&&r.push(n)
}),r}function cr(n,t,r,e){var u;return r(n,function(n,r,o){return t(n,r,o)?(u=e?r:n,false):void 0}),u}function lr(n,t,r,e){e=(e||0)-1;for(var u=n.length,o=-1,i=[];++e<u;){var f=n[e];if(h(f)&&oe(f.length)&&(So(f)||Ye(f))){t&&(f=lr(f,t,r));var a=-1,c=f.length;for(i.length+=c;++a<c;)i[++o]=f[a]}else r||(i[++o]=f)}return i}function sr(n,t,r){var e=-1,u=pe(n);r=r(n);for(var o=r.length;++e<o;){var i=r[e];if(false===t(u[i],i,u))break}return n}function pr(n,t,r){var e=pe(n);r=r(n);for(var u=r.length;u--;){var o=r[u];
if(false===t(e[o],o,e))break}return n}function hr(n,t){sr(n,t,ou)}function _r(n,t){return sr(n,t,Fo)}function gr(n,t){return pr(n,t,Fo)}function vr(n,t){for(var r=-1,e=t.length,u=-1,o=[];++r<e;){var i=t[r];Je(n[i])&&(o[++u]=i)}return o}function yr(n,t,r){var e=-1,u=typeof t=="function",o=n?n.length:0,i=oe(o)?wu(o):[];return or(n,function(n){var o=u?t:null!=n&&n[t];i[++e]=o?o.apply(n,r):w}),i}function dr(n,t,r,e,u,o){if(n===t)return 0!==n||1/n==1/t;var i=typeof n,f=typeof t;if("function"!=i&&"object"!=i&&"function"!=f&&"object"!=f||null==n||null==t)n=n!==n&&t!==t;
else n:{var i=dr,f=So(n),a=So(t),c=D,l=D;f||(c=Lu.call(n),c==z?c=Y:c!=Y&&(f=ru(n))),a||(l=Lu.call(t),l==z?l=Y:l!=Y&&ru(t));var s=c==Y,a=l==Y,l=c==l;if(!l||f||s)if(c=s&&Uu.call(n,"__wrapped__"),a=a&&Uu.call(t,"__wrapped__"),c||a)n=i(c?n.value():n,a?t.value():t,r,e,u,o);else if(l){for(u||(u=[]),o||(o=[]),c=u.length;c--;)if(u[c]==n){n=o[c]==t;break n}u.push(n),o.push(t),n=(f?Zr:Jr)(n,t,i,r,e,u,o),u.pop(),o.pop()}else n=false;else n=Gr(n,t,c)}return n}function mr(n,t,r,e,u){var o=t.length;if(null==n)return!o;
for(var i=-1,f=!u;++i<o;)if(f&&e[i]?r[i]!==n[t[i]]:!Uu.call(n,t[i]))return false;for(i=-1;++i<o;){var a=t[i];if(f&&e[i])a=Uu.call(n,a);else{var c=n[a],l=r[i],a=u?u(c,l,a):w;typeof a=="undefined"&&(a=dr(l,c,u,true))}if(!a)return false}return true}function wr(n,t){var r=[];return or(n,function(n,e,u){r.push(t(n,e,u))}),r}function br(n){var t=Fo(n),r=t.length;if(1==r){var e=t[0],u=n[e];if(ie(u))return function(n){return null!=n&&n[e]===u&&Uu.call(n,e)}}for(var o=wu(r),i=wu(r);r--;)u=n[t[r]],o[r]=u,i[r]=ie(u);return function(n){return mr(n,t,o,i)
}}function xr(n,t){return ie(t)?function(r){return null!=r&&r[n]===t}:function(r){return null!=r&&dr(t,r[n],null,true)}}function Ar(n,t,r,e,u){var o=oe(t.length)&&(So(t)||ru(t));return(o?Mt:_r)(t,function(t,i,f){if(h(t)){e||(e=[]),u||(u=[]);n:{t=e;for(var a=u,c=t.length,l=f[i];c--;)if(t[c]==l){n[i]=a[c],i=void 0;break n}c=n[i],f=r?r(c,l,i,n,f):w;var s=typeof f=="undefined";s&&(f=l,oe(l.length)&&(So(l)||ru(l))?f=So(c)?c:c?zt(c):[]:No(l)||Ye(l)?f=Ye(c)?eu(c):No(c)?c:{}:s=false),t.push(l),a.push(f),s?n[i]=Ar(f,l,r,t,a):(f===f?f!==c:c===c)&&(n[i]=f),i=void 0
}return i}a=n[i],f=r?r(a,t,i,n,f):w,(l=typeof f=="undefined")&&(f=t),!o&&typeof f=="undefined"||!l&&(f===f?f===a:a!==a)||(n[i]=f)}),n}function jr(n){return function(t){return null==t?w:t[n]}}function kr(n,t){return n+Pu(co()*(t-n+1))}function Er(n,t,r,e,u){return u(n,function(n,u,o){r=e?(e=false,n):t(r,n,u,o)}),r}function Rr(n,t,r){var e=-1,u=n.length;for(t=null==t?0:+t||0,0>t&&(t=-t>u?0:u+t),r=typeof r=="undefined"||r>u?u:+r||0,0>r&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0,r=wu(u);++e<u;)r[e]=n[e+t];return r}function Ir(n,t){var r;
return or(n,function(n,e,u){return r=t(n,e,u),!r}),!!r}function Or(n,r){var e=-1,u=Qr(),o=n.length,i=u==t,f=i&&200<=o,a=f&&xo(),c=[];a?(u=Bt,i=false):(f=false,a=r?[]:c);n:for(;++e<o;){var l=n[e],s=r?r(l,e,n):l;if(i&&l===l){for(var p=a.length;p--;)if(a[p]===s)continue n;r&&a.push(s),c.push(l)}else 0>u(a,s)&&((r||f)&&a.push(s),c.push(l))}return c}function Cr(n,t){for(var r=-1,e=t.length,u=wu(e);++r<e;)u[r]=n[t[r]];return u}function Tr(n,t){var r=n;r instanceof Ut&&(r=r.value());for(var e=-1,u=t.length;++e<u;){var r=[r],o=t[e];
Vu.apply(r,o.args),r=o.func.apply(o.thisArg,r)}return r}function Sr(n,t,r){var e=0,u=n?n.length:e;if(typeof t=="number"&&t===t&&u<=_o){for(;e<u;){var o=e+u>>>1,i=n[o];(r?i<=t:i<t)?e=o+1:u=o}return u}return Wr(n,t,vu,r)}function Wr(n,t,r,e){t=r(t);for(var u=0,o=n?n.length:0,i=t!==t,f=typeof t=="undefined";u<o;){var a=Pu((u+o)/2),c=r(n[a]),l=c===c;(i?l||e:f?l&&(e||typeof c!="undefined"):e?c<=t:c<t)?u=a+1:o=a}return oo(o,ho)}function Nr(n,t,r){if(typeof n!="function")return vu;if(typeof t=="undefined")return n;
switch(r){case 1:return function(r){return n.call(t,r)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,o){return n.call(t,r,e,u,o)};case 5:return function(r,e,u,o,i){return n.call(t,r,e,u,o,i)}}return function(){return n.apply(t,arguments)}}function Ur(n){return Du.call(n,0)}function Fr(n,t,r){for(var e=r.length,u=-1,o=uo(n.length-e,0),i=-1,f=t.length,a=wu(o+f);++i<f;)a[i]=t[i];for(;++u<e;)a[r[u]]=n[u];for(;o--;)a[i++]=n[u++];return a}function Lr(n,t,r){for(var e=-1,u=r.length,o=-1,i=uo(n.length-u,0),f=-1,a=t.length,c=wu(i+a);++o<i;)c[o]=n[o];
for(i=o;++f<a;)c[i+f]=t[f];for(;++e<u;)c[i+r[e]]=n[o++];return c}function $r(n,t){return function(r,e,u){var o=t?t():{};if(e=Hr(e,u,3),So(r)){u=-1;for(var i=r.length;++u<i;){var f=r[u];n(o,f,e(f,u,r),r)}}else or(r,function(t,r,u){n(o,t,e(t,r,u),u)});return o}}function Br(n){return function(){var t=arguments.length,r=arguments[0];if(2>t||null==r)return r;if(3<t&&ue(arguments[1],arguments[2],arguments[3])&&(t=2),3<t&&"function"==typeof arguments[t-2])var e=Nr(arguments[--t-1],arguments[t--],5);else 2<t&&"function"==typeof arguments[t-1]&&(e=arguments[--t]);
for(var u=0;++u<t;){var o=arguments[u];o&&n(r,o,e)}return r}}function zr(n,t){function r(){return(this instanceof r?e:n).apply(t,arguments)}var e=Mr(n);return r}function Dr(n){return function(t){var r=-1;t=pu(fu(t));for(var e=t.length,u="";++r<e;)u=n(u,t[r],r);return u}}function Mr(n){return function(){var t=wo(n.prototype),r=n.apply(t,arguments);return Xe(r)?r:t}}function qr(n,t){return function(r,e,o){o&&ue(r,e,o)&&(e=null);var i=Hr(),f=null==e;if(i===tr&&f||(f=false,e=i(e,o,3)),f){if(e=So(r),e||!tu(r))return n(e?r:se(r));
e=u}return Xr(r,e,t)}}function Pr(n,t,r,e,u,o,i,f,a,c){function l(){for(var b=arguments.length,j=b,k=wu(b);j--;)k[j]=arguments[j];if(e&&(k=Fr(k,e,u)),o&&(k=Lr(k,o,i)),_||y){var j=l.placeholder,E=g(k,j),b=b-E.length;if(b<c){var O=f?zt(f):null,b=uo(c-b,0),C=_?E:null,E=_?null:E,T=_?k:null,k=_?null:k;return t|=_?R:I,t&=~(_?I:R),v||(t&=~(x|A)),k=Pr(n,t,r,T,C,k,E,O,a,b),k.placeholder=j,k}}if(j=p?r:this,h&&(n=j[m]),f)for(O=k.length,b=oo(f.length,O),C=zt(k);b--;)E=f[b],k[b]=ee(E,O)?C[E]:w;return s&&a<k.length&&(k.length=a),(this instanceof l?d||Mr(n):n).apply(j,k)
}var s=t&C,p=t&x,h=t&A,_=t&k,v=t&j,y=t&E,d=!h&&Mr(n),m=n;return l}function Kr(n,t,r){return n=n.length,t=+t,n<t&&ro(t)?(t-=n,r=null==r?" ":r+"",lu(r,Mu(t/r.length)).slice(0,t)):""}function Vr(n,t,r,e){function u(){for(var t=-1,f=arguments.length,a=-1,c=e.length,l=wu(f+c);++a<c;)l[a]=e[a];for(;f--;)l[a++]=arguments[++t];return(this instanceof u?i:n).apply(o?r:this,l)}var o=t&x,i=Mr(n);return u}function Yr(n,t,r,e,u,o,i,f){var a=t&A;if(!a&&typeof n!="function")throw new Ou($);var c=e?e.length:0;if(c||(t&=~(R|I),e=u=null),c-=u?u.length:0,t&I){var l=e,s=u;
e=u=null}var p=!a&&Ao(n);if(r=[n,t,r,e,u,l,s,o,i,f],p&&true!==p){e=r[1],t=p[1],f=e|t,o=C|O,u=x|A,i=o|u|j|E;var l=e&C&&!(t&C),s=e&O&&!(t&O),h=(s?r:p)[7],_=(l?r:p)[8];o=f>=o&&f<=i&&(e<O||(s||l)&&h.length<=_),(!(e>=O&&t>u||e>u&&t>=O)||o)&&(t&x&&(r[2]=p[2],f|=e&x?0:j),(e=p[3])&&(u=r[3],r[3]=u?Fr(u,e,p[4]):zt(e),r[4]=u?g(r[3],B):zt(p[4])),(e=p[5])&&(u=r[5],r[5]=u?Lr(u,e,p[6]):zt(e),r[6]=u?g(r[5],B):zt(p[6])),(e=p[7])&&(r[7]=zt(e)),t&C&&(r[8]=null==r[8]?p[8]:oo(r[8],p[8])),null==r[9]&&(r[9]=p[9]),r[0]=p[0],r[1]=f),t=r[1],f=r[9]
}return r[9]=null==f?a?0:n.length:uo(f-c,0)||0,(p?bo:jo)(t==x?zr(r[0],r[2]):t!=R&&t!=(x|R)||r[4].length?Pr.apply(w,r):Vr.apply(w,r),r)}function Zr(n,t,r,e,u,o,i){var f=-1,a=n.length,c=t.length,l=true;if(a!=c&&(!u||c<=a))return false;for(;l&&++f<a;){var s=n[f],p=t[f],l=w;if(e&&(l=u?e(p,s,f):e(s,p,f)),typeof l=="undefined")if(u)for(var h=c;h--&&(p=t[h],!(l=s&&s===p||r(s,p,e,u,o,i))););else l=s&&s===p||r(s,p,e,u,o,i)}return!!l}function Gr(n,t,r){switch(r){case M:case q:return+n==+t;case P:return n.name==t.name&&n.message==t.message;
case V:return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case Z:case G:return n==t+""}return false}function Jr(n,t,r,e,u,o,i){var f=Fo(n),a=f.length,c=Fo(t).length;if(a!=c&&!u)return false;for(var l,c=-1;++c<a;){var s=f[c],p=Uu.call(t,s);if(p){var h=n[s],_=t[s],p=w;e&&(p=u?e(_,h,s):e(h,_,s)),typeof p=="undefined"&&(p=h&&h===_||r(h,_,e,u,o,i))}if(!p)return false;l||(l="constructor"==s)}return l||(r=n.constructor,e=t.constructor,!(r!=e&&"constructor"in n&&"constructor"in t)||typeof r=="function"&&r instanceof r&&typeof e=="function"&&e instanceof e)?true:false
}function Xr(n,t,r){var e=r?so:lo,u=e,o=u;return or(n,function(n,i,f){i=t(n,i,f),((r?i<u:i>u)||i===e&&i===o)&&(u=i,o=n)}),o}function Hr(n,t,r){var e=Wt.callback||_u,e=e===_u?tr:e;return r?e(n,t,r):e}function Qr(n,r,e){var u=Wt.indexOf||de,u=u===de?t:u;return n?u(n,r,e):u}function ne(n){var t=n.length,r=new n.constructor(t);return t&&"string"==typeof n[0]&&Uu.call(n,"index")&&(r.index=n.index,r.input=n.input),r}function te(n){return n=n.constructor,typeof n=="function"&&n instanceof n||(n=Eu),new n
}function re(n,t,r){var e=n.constructor;switch(t){case J:return Ur(n);case M:case q:return new e(+n);case X:case H:case Q:case nt:case tt:case rt:case et:case ut:case ot:return t=n.buffer,new e(r?Ur(t):t,n.byteOffset,n.length);case V:case G:return new e(n);case Z:var u=new e(n.source,yt.exec(n));u.lastIndex=n.lastIndex}return u}function ee(n,t){return n=+n,t=null==t?vo:t,-1<n&&0==n%1&&n<t}function ue(n,t,r){if(!Xe(r))return false;var e=typeof t;return"number"==e?(e=r.length,e=oe(e)&&ee(t,e)):e="string"==e&&t in r,e&&r[t]===n
}function oe(n){return typeof n=="number"&&-1<n&&0==n%1&&n<=vo}function ie(n){return n===n&&(0===n?0<1/n:!Xe(n))}function fe(n,t){n=pe(n);for(var r=-1,e=t.length,u={};++r<e;){var o=t[r];o in n&&(u[o]=n[o])}return u}function ae(n,t){var r={};return hr(n,function(n,e,u){t(n,e,u)&&(r[e]=n)}),r}function ce(n){var t;if(!h(n)||Lu.call(n)!=Y||!(Uu.call(n,"constructor")||(t=n.constructor,typeof t!="function"||t instanceof t)))return false;var r;return hr(n,function(n,t){r=t}),typeof r=="undefined"||Uu.call(n,r)
}function le(n){for(var t=ou(n),r=t.length,e=r&&n.length,u=Wt.support,u=e&&oe(e)&&(So(n)||u.nonEnumArgs&&Ye(n)),o=-1,i=[];++o<r;){var f=t[o];(u&&ee(f,e)||Uu.call(n,f))&&i.push(f)}return i}function se(n){return null==n?[]:oe(n.length)?Xe(n)?n:Eu(n):iu(n)}function pe(n){return Xe(n)?n:Eu(n)}function he(n){return n instanceof Ut?n.clone():new Nt(n.__wrapped__,n.__chain__,zt(n.__actions__))}function _e(n,t,r){return n&&n.length?((r?ue(n,t,r):null==t)&&(t=1),Rr(n,0>t?0:t)):[]}function ge(n,t,r){var e=n?n.length:0;
return e?((r?ue(n,t,r):null==t)&&(t=1),t=e-(+t||0),Rr(n,0,0>t?0:t)):[]}function ve(n,t,r){var e=-1,u=n?n.length:0;for(t=Hr(t,r,3);++e<u;)if(t(n[e],e,n))return e;return-1}function ye(n){return n?n[0]:w}function de(n,r,e){var u=n?n.length:0;if(!u)return-1;if(typeof e=="number")e=0>e?uo(u+e,0):e||0;else if(e)return e=Sr(n,r),n=n[e],(r===r?r===n:n!==n)?e:-1;return t(n,r,e)}function me(n){return _e(n,1)}function we(n,r,e,u){if(!n||!n.length)return[];typeof r!="boolean"&&null!=r&&(u=e,e=ue(n,r,u)?null:r,r=false);
var o=Hr();if((o!==tr||null!=e)&&(e=o(e,u,3)),r&&Qr()==t){r=e;var i;e=-1,u=n.length;for(var o=-1,f=[];++e<u;){var a=n[e],c=r?r(a,e,n):a;e&&i===c||(i=c,f[++o]=a)}n=f}else n=Or(n,e);return n}function be(n){for(var t=-1,r=(n&&n.length&&Vt(Kt(n,Nu)))>>>0,e=wu(r);++t<r;)e[t]=Kt(n,jr(t));return e}function xe(n,t){var r=-1,e=n?n.length:0,u={};for(!e||t||So(n[0])||(t=[]);++r<e;){var o=n[r];t?u[o]=t[r]:o&&(u[o[0]]=o[1])}return u}function Ae(n){return n=Wt(n),n.__chain__=true,n}function je(n,t,r){return t.call(r,n)
}function ke(n,t,r){var e=n?n.length:0;return oe(e)||(n=iu(n),e=n.length),e?(r=typeof r=="number"?0>r?uo(e+r,0):r||0:0,typeof n=="string"||!So(n)&&tu(n)?r<e&&-1<n.indexOf(t,r):-1<Qr(n,t,r)):false}function Ee(n,t,r){var e=So(n)?qt:fr;return(typeof t!="function"||typeof r!="undefined")&&(t=Hr(t,r,3)),e(n,t)}function Re(n,t,r){var e=So(n)?Pt:ar;return t=Hr(t,r,3),e(n,t)}function Ie(n,t,r){return So(n)?(t=ve(n,t,r),-1<t?n[t]:w):(t=Hr(t,r,3),cr(n,t,or))}function Oe(n,t,r){return typeof t=="function"&&typeof r=="undefined"&&So(n)?Mt(n,t):or(n,Nr(t,r,3))
}function Ce(n,t,r){if(typeof t=="function"&&typeof r=="undefined"&&So(n))for(r=n.length;r--&&false!==t(n[r],r,n););else n=ir(n,Nr(t,r,3));return n}function Te(n,t,r){var e=So(n)?Kt:wr;return t=Hr(t,r,3),e(n,t)}function Se(n,t,r,e){return(So(n)?Yt:Er)(n,Hr(t,e,4),r,3>arguments.length,or)}function We(n,t,r,e){return(So(n)?Zt:Er)(n,Hr(t,e,4),r,3>arguments.length,ir)}function Ne(n,t,r){return(r?ue(n,t,r):null==t)?(n=se(n),t=n.length,0<t?n[kr(0,t-1)]:w):(n=Ue(n),n.length=oo(0>t?0:+t||0,n.length),n)}function Ue(n){n=se(n);
for(var t=-1,r=n.length,e=wu(r);++t<r;){var u=kr(0,t);t!=u&&(e[t]=e[u]),e[u]=n[t]}return e}function Fe(n,t,r){var e=So(n)?Gt:Ir;return(typeof t!="function"||typeof r!="undefined")&&(t=Hr(t,r,3)),e(n,t)}function Le(n,t){var r;if(typeof t!="function"){if(typeof n!="function")throw new Ou($);var e=n;n=t,t=e}return function(){return 0<--n?r=t.apply(this,arguments):t=null,r}}function $e(n,t){var r=x;if(2<arguments.length)var e=Rr(arguments,2),u=g(e,$e.placeholder),r=r|R;return Yr(n,r,t,e,u)}function Be(n,t){var r=x|A;
if(2<arguments.length)var e=Rr(arguments,2),u=g(e,Be.placeholder),r=r|R;return Yr(t,r,n,e,u)}function ze(n,t,r){return r&&ue(n,t,r)&&(t=null),n=Yr(n,k,null,null,null,null,null,t),n.placeholder=ze.placeholder,n}function De(n,t,r){return r&&ue(n,t,r)&&(t=null),n=Yr(n,E,null,null,null,null,null,t),n.placeholder=De.placeholder,n}function Me(n,t,r){function e(){var r=t-(To()-c);0>=r||r>t?(f&&qu(f),r=p,f=s=p=w,r&&(h=To(),a=n.apply(l,i),s||f||(i=l=null))):s=Gu(e,r)}function u(){s&&qu(s),f=s=p=w,(g||_!==t)&&(h=To(),a=n.apply(l,i),s||f||(i=l=null))
}function o(){if(i=arguments,c=To(),l=this,p=g&&(s||!v),false===_)var r=v&&!s;else{f||v||(h=c);var o=_-(c-h),y=0>=o||o>_;y?(f&&(f=qu(f)),h=c,a=n.apply(l,i)):f||(f=Gu(u,o))}return y&&s?s=qu(s):s||t===_||(s=Gu(e,t)),r&&(y=true,a=n.apply(l,i)),!y||s||f||(i=l=null),a}var i,f,a,c,l,s,p,h=0,_=false,g=true;if(typeof n!="function")throw new Ou($);if(t=0>t?0:t,true===r)var v=true,g=false;else Xe(r)&&(v=r.leading,_="maxWait"in r&&uo(+r.maxWait||0,t),g="trailing"in r?r.trailing:g);return o.cancel=function(){s&&qu(s),f&&qu(f),f=s=p=w
},o}function qe(){var n=arguments,t=n.length-1;if(0>t)return function(n){return n};if(!qt(n,Je))throw new Ou($);return function(){for(var r=t,e=n[r].apply(this,arguments);r--;)e=n[r].call(this,e);return e}}function Pe(n,t){function r(){var e=r.cache,u=t?t.apply(this,arguments):arguments[0];if(e.has(u))return e.get(u);var o=n.apply(this,arguments);return e.set(u,o),o}if(typeof n!="function"||t&&typeof t!="function")throw new Ou($);return r.cache=new Pe.Cache,r}function Ke(n){var t=Rr(arguments,1),r=g(t,Ke.placeholder);
return Yr(n,R,null,t,r)}function Ve(n){var t=Rr(arguments,1),r=g(t,Ve.placeholder);return Yr(n,I,null,t,r)}function Ye(n){return oe(h(n)?n.length:w)&&Lu.call(n)==z||false}function Ze(n){return n&&1===n.nodeType&&h(n)&&-1<Lu.call(n).indexOf("Element")||false}function Ge(n){return h(n)&&typeof n.message=="string"&&Lu.call(n)==P||false}function Je(n){return typeof n=="function"||false}function Xe(n){var t=typeof n;return"function"==t||n&&"object"==t||false}function He(n){return null==n?false:Lu.call(n)==K?Bu.test(Wu.call(n)):h(n)&&wt.test(n)||false
}function Qe(n){return typeof n=="number"||h(n)&&Lu.call(n)==V||false}function nu(n){return h(n)&&Lu.call(n)==Z||false}function tu(n){return typeof n=="string"||h(n)&&Lu.call(n)==G||false}function ru(n){return h(n)&&oe(n.length)&&Ct[Lu.call(n)]||false}function eu(n){return nr(n,ou(n))}function uu(n){return vr(n,ou(n))}function ou(n){if(null==n)return[];Xe(n)||(n=Eu(n));for(var t=n.length,t=t&&oe(t)&&(So(n)||mo.nonEnumArgs&&Ye(n))&&t||0,r=n.constructor,e=-1,r=typeof r=="function"&&r.prototype===n,u=wu(t),o=0<t;++e<t;)u[e]=e+"";
for(var i in n)o&&ee(i,t)||"constructor"==i&&(r||!Uu.call(n,i))||u.push(i);return u}function iu(n){return Cr(n,Fo(n))}function fu(n){return(n=e(n))&&n.replace(bt,c)}function au(n){return(n=e(n))&&jt.test(n)?n.replace(At,"\\$&"):n}function cu(n,t,r){return r&&ue(n,t,r)&&(t=0),ao(n,t)}function lu(n,t){var r="";if(n=e(n),t=+t,1>t||!n||!ro(t))return r;do t%2&&(r+=n),t=Pu(t/2),n+=n;while(t);return r}function su(n,t,r){var u=n;return(n=e(n))?(r?ue(u,t,r):null==t)?n.slice(v(n),y(n)+1):(t+="",n.slice(o(n,t),i(n,t)+1)):n
}function pu(n,t,r){return r&&ue(n,t,r)&&(t=null),n=e(n),n.match(t||Rt)||[]}function hu(n){try{return n.apply(w,Rr(arguments,1))}catch(t){return Ge(t)?t:new xu(t)}}function _u(n,t,r){return r&&ue(n,t,r)&&(t=null),h(n)?yu(n):tr(n,t)}function gu(n){return function(){return n}}function vu(n){return n}function yu(n){return br(rr(n,true))}function du(n,t,r){if(null==r){var e=Xe(t),u=e&&Fo(t);((u=u&&u.length&&vr(t,u))?u.length:e)||(u=false,r=t,t=n,n=this)}u||(u=vr(t,Fo(t)));var o=true,e=-1,i=Je(n),f=u.length;
!1===r?o=false:Xe(r)&&"chain"in r&&(o=r.chain);for(;++e<f;){r=u[e];var a=t[r];n[r]=a,i&&(n.prototype[r]=function(t){return function(){var r=this.__chain__;if(o||r){var e=n(this.__wrapped__);return(e.__actions__=zt(this.__actions__)).push({func:t,args:arguments,thisArg:n}),e.__chain__=r,e}return r=[this.value()],Vu.apply(r,arguments),t.apply(n,r)}}(a))}return n}function mu(){}_=_?Dt.defaults($t.Object(),_,Dt.pick($t,Ot)):$t;var wu=_.Array,bu=_.Date,xu=_.Error,Au=_.Function,ju=_.Math,ku=_.Number,Eu=_.Object,Ru=_.RegExp,Iu=_.String,Ou=_.TypeError,Cu=wu.prototype,Tu=Eu.prototype,Su=(Su=_.window)&&Su.document,Wu=Au.prototype.toString,Nu=jr("length"),Uu=Tu.hasOwnProperty,Fu=0,Lu=Tu.toString,$u=_._,Bu=Ru("^"+au(Lu).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zu=He(zu=_.ArrayBuffer)&&zu,Du=He(Du=zu&&new zu(0).slice)&&Du,Mu=ju.ceil,qu=_.clearTimeout,Pu=ju.floor,Ku=He(Ku=Eu.getPrototypeOf)&&Ku,Vu=Cu.push,Yu=Tu.propertyIsEnumerable,Zu=He(Zu=_.Set)&&Zu,Gu=_.setTimeout,Ju=Cu.splice,Xu=He(Xu=_.Uint8Array)&&Xu,Hu=He(Hu=_.WeakMap)&&Hu,Qu=function(){try{var n=He(n=_.Float64Array)&&n,t=new n(new zu(10),0,1)&&n
}catch(r){}return t}(),no=He(no=wu.isArray)&&no,to=He(to=Eu.create)&&to,ro=_.isFinite,eo=He(eo=Eu.keys)&&eo,uo=ju.max,oo=ju.min,io=He(io=bu.now)&&io,fo=He(fo=ku.isFinite)&&fo,ao=_.parseInt,co=ju.random,lo=ku.NEGATIVE_INFINITY,so=ku.POSITIVE_INFINITY,po=ju.pow(2,32)-1,ho=po-1,_o=po>>>1,go=Qu?Qu.BYTES_PER_ELEMENT:0,vo=ju.pow(2,53)-1,yo=Hu&&new Hu,mo=Wt.support={};!function(n){mo.funcDecomp=!He(_.WinRTError)&&kt.test(m),mo.funcNames=typeof Au.name=="string";try{mo.dom=11===Su.createDocumentFragment().nodeType
}catch(t){mo.dom=false}try{mo.nonEnumArgs=!Yu.call(arguments,1)}catch(r){mo.nonEnumArgs=true}}(0,0),Wt.templateSettings={escape:ht,evaluate:_t,interpolate:gt,variable:"",imports:{_:Wt}};var wo=function(){function n(){}return function(t){if(Xe(t)){n.prototype=t;var r=new n;n.prototype=null}return r||_.Object()}}(),bo=yo?function(n,t){return yo.set(n,t),n}:vu;Du||(Ur=zu&&Xu?function(n){var t=n.byteLength,r=Qu?Pu(t/go):0,e=r*go,u=new zu(t);if(r){var o=new Qu(u,0,r);o.set(new Qu(n,0,r))}return t!=e&&(o=new Xu(u,e),o.set(new Xu(n,e))),u
}:gu(null));var xo=to&&Zu?function(n){return new Lt(n)}:gu(null),Ao=yo?function(n){return yo.get(n)}:mu,jo=function(){var n=0,t=0;return function(r,e){var u=To(),o=N-(u-t);if(t=u,0<o){if(++n>=W)return r}else n=0;return bo(r,e)}}(),ko=$r(function(n,t,r){Uu.call(n,r)?++n[r]:n[r]=1}),Eo=$r(function(n,t,r){Uu.call(n,r)?n[r].push(t):n[r]=[t]}),Ro=$r(function(n,t,r){n[r]=t}),Io=qr(Vt),Oo=qr(function(n){for(var t=-1,r=n.length,e=so;++t<r;){var u=n[t];u<e&&(e=u)}return e},true),Co=$r(function(n,t,r){n[r?0:1].push(t)
},function(){return[[],[]]}),To=io||function(){return(new bu).getTime()},So=no||function(n){return h(n)&&oe(n.length)&&Lu.call(n)==D||false};mo.dom||(Ze=function(n){return n&&1===n.nodeType&&h(n)&&!No(n)||false});var Wo=fo||function(n){return typeof n=="number"&&ro(n)};(Je(/x/)||Xu&&!Je(Xu))&&(Je=function(n){return Lu.call(n)==K});var No=Ku?function(n){if(!n||Lu.call(n)!=Y)return false;var t=n.valueOf,r=He(t)&&(r=Ku(t))&&Ku(r);return r?n==r||Ku(n)==r:ce(n)}:ce,Uo=Br(Ht),Fo=eo?function(n){if(n)var t=n.constructor,r=n.length;
return typeof t=="function"&&t.prototype===n||typeof n!="function"&&r&&oe(r)?le(n):Xe(n)?eo(n):[]}:le,Lo=Br(Ar),$o=Dr(function(n,t,r){return t=t.toLowerCase(),n+(r?t.charAt(0).toUpperCase()+t.slice(1):t)}),Bo=Dr(function(n,t,r){return n+(r?"-":"")+t.toLowerCase()});8!=ao(It+"08")&&(cu=function(n,t,r){return(r?ue(n,t,r):null==t)?t=0:t&&(t=+t),n=su(n),ao(n,t||(mt.test(n)?16:10))});var zo=Dr(function(n,t,r){return n+(r?"_":"")+t.toLowerCase()}),Do=Dr(function(n,t,r){return n+(r?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))
});return Nt.prototype=wo(Wt.prototype),Ut.prototype=wo(Nt.prototype),Ut.prototype.constructor=Ut,Ft.prototype["delete"]=function(n){return this.has(n)&&delete this.__data__[n]},Ft.prototype.get=function(n){return"__proto__"==n?w:this.__data__[n]},Ft.prototype.has=function(n){return"__proto__"!=n&&Uu.call(this.__data__,n)},Ft.prototype.set=function(n,t){return"__proto__"!=n&&(this.__data__[n]=t),this},Lt.prototype.push=function(n){var t=this.data;typeof n=="string"||Xe(n)?t.set.add(n):t.hash[n]=true
},Pe.Cache=Ft,Wt.after=function(n,t){if(typeof t!="function"){if(typeof n!="function")throw new Ou($);var r=n;n=t,t=r}return n=ro(n=+n)?n:0,function(){return 1>--n?t.apply(this,arguments):void 0}},Wt.ary=function(n,t,r){return r&&ue(n,t,r)&&(t=null),t=n&&null==t?n.length:uo(+t||0,0),Yr(n,C,null,null,null,null,t)},Wt.assign=Uo,Wt.at=function(n){return oe(n?n.length:0)&&(n=se(n)),Qt(n,lr(arguments,false,false,1))},Wt.before=Le,Wt.bind=$e,Wt.bindAll=function(n){for(var t=n,r=1<arguments.length?lr(arguments,false,false,1):uu(n),e=-1,u=r.length;++e<u;){var o=r[e];
t[o]=Yr(t[o],x,t)}return t},Wt.bindKey=Be,Wt.callback=_u,Wt.chain=Ae,Wt.chunk=function(n,t,r){t=(r?ue(n,t,r):null==t)?1:uo(+t||1,1),r=0;for(var e=n?n.length:0,u=-1,o=wu(Mu(e/t));r<e;)o[++u]=Rr(n,r,r+=t);return o},Wt.compact=function(n){for(var t=-1,r=n?n.length:0,e=-1,u=[];++t<r;){var o=n[t];o&&(u[++e]=o)}return u},Wt.constant=gu,Wt.countBy=ko,Wt.create=function(n,t,r){var e=wo(n);return r&&ue(n,t,r)&&(t=null),t?nr(t,e,Fo(t)):e},Wt.curry=ze,Wt.curryRight=De,Wt.debounce=Me,Wt.defaults=function(n){if(null==n)return n;
var t=zt(arguments);return t.push(Jt),Uo.apply(w,t)},Wt.defer=function(n){return er(n,1,arguments,1)},Wt.delay=function(n,t){return er(n,t,arguments,2)},Wt.difference=function(){for(var n=-1,t=arguments.length;++n<t;){var r=arguments[n];if(So(r)||Ye(r))break}return ur(r,lr(arguments,false,true,++n))},Wt.drop=_e,Wt.dropRight=ge,Wt.dropRightWhile=function(n,t,r){var e=n?n.length:0;if(!e)return[];for(t=Hr(t,r,3);e--&&t(n[e],e,n););return Rr(n,0,e+1)},Wt.dropWhile=function(n,t,r){var e=n?n.length:0;if(!e)return[];
var u=-1;for(t=Hr(t,r,3);++u<e&&t(n[u],u,n););return Rr(n,u)},Wt.fill=function(n,t,r,e){var u=n?n.length:0;if(!u)return[];for(r&&typeof r!="number"&&ue(n,t,r)&&(r=0,e=u),u=n.length,r=null==r?0:+r||0,0>r&&(r=-r>u?0:u+r),e=typeof e=="undefined"||e>u?u:+e||0,0>e&&(e+=u),u=r>e?0:e>>>0,r>>>=0;r<u;)n[r++]=t;return n},Wt.filter=Re,Wt.flatten=function(n,t,r){var e=n?n.length:0;return r&&ue(n,t,r)&&(t=false),e?lr(n,t):[]},Wt.flattenDeep=function(n){return n&&n.length?lr(n,true):[]},Wt.flow=function(){var n=arguments,t=n.length;
if(!t)return function(n){return n};if(!qt(n,Je))throw new Ou($);return function(){for(var r=0,e=n[r].apply(this,arguments);++r<t;)e=n[r].call(this,e);return e}},Wt.flowRight=qe,Wt.forEach=Oe,Wt.forEachRight=Ce,Wt.forIn=function(n,t,r){return(typeof t!="function"||typeof r!="undefined")&&(t=Nr(t,r,3)),sr(n,t,ou)},Wt.forInRight=function(n,t,r){return t=Nr(t,r,3),pr(n,t,ou)},Wt.forOwn=function(n,t,r){return(typeof t!="function"||typeof r!="undefined")&&(t=Nr(t,r,3)),_r(n,t)},Wt.forOwnRight=function(n,t,r){return t=Nr(t,r,3),pr(n,t,Fo)
},Wt.functions=uu,Wt.groupBy=Eo,Wt.indexBy=Ro,Wt.initial=function(n){return ge(n,1)},Wt.intersection=function(){for(var n=[],r=-1,e=arguments.length,u=[],o=Qr(),i=o==t;++r<e;){var f=arguments[r];(So(f)||Ye(f))&&(n.push(f),u.push(i&&120<=f.length&&xo(r&&f)))}var e=n.length,i=n[0],a=-1,c=i?i.length:0,l=[],s=u[0];n:for(;++a<c;)if(f=i[a],0>(s?Bt(s,f):o(l,f))){for(r=e;--r;){var p=u[r];if(0>(p?Bt(p,f):o(n[r],f)))continue n}s&&s.push(f),l.push(f)}return l},Wt.invert=function(n,t,r){r&&ue(n,t,r)&&(t=null),r=-1;
for(var e=Fo(n),u=e.length,o={};++r<u;){var i=e[r],f=n[i];t?Uu.call(o,f)?o[f].push(i):o[f]=[i]:o[f]=i}return o},Wt.invoke=function(n,t){return yr(n,t,Rr(arguments,2))},Wt.keys=Fo,Wt.keysIn=ou,Wt.map=Te,Wt.mapValues=function(n,t,r){var e={};return t=Hr(t,r,3),_r(n,function(n,r,u){e[r]=t(n,r,u)}),e},Wt.matches=yu,Wt.matchesProperty=function(n,t){return xr(n+"",rr(t,true))},Wt.memoize=Pe,Wt.merge=Lo,Wt.mixin=du,Wt.negate=function(n){if(typeof n!="function")throw new Ou($);return function(){return!n.apply(this,arguments)
}},Wt.omit=function(n,t,r){if(null==n)return{};if(typeof t!="function"){var e=Kt(lr(arguments,false,false,1),Iu);return fe(n,ur(ou(n),e))}return t=Nr(t,r,3),ae(n,function(n,r,e){return!t(n,r,e)})},Wt.once=function(n){return Le(n,2)},Wt.pairs=function(n){for(var t=-1,r=Fo(n),e=r.length,u=wu(e);++t<e;){var o=r[t];u[t]=[o,n[o]]}return u},Wt.partial=Ke,Wt.partialRight=Ve,Wt.partition=Co,Wt.pick=function(n,t,r){return null==n?{}:typeof t=="function"?ae(n,Nr(t,r,3)):fe(n,lr(arguments,false,false,1))},Wt.pluck=function(n,t){return Te(n,jr(t))
},Wt.property=function(n){return jr(n+"")},Wt.propertyOf=function(n){return function(t){return null==n?w:n[t]}},Wt.pull=function(){var n=arguments[0];if(!n||!n.length)return n;for(var t=0,r=Qr(),e=arguments.length;++t<e;)for(var u=0,o=arguments[t];-1<(u=r(n,o,u));)Ju.call(n,u,1);return n},Wt.pullAt=function(t){var r=t||[],e=lr(arguments,false,false,1),u=e.length,o=Qt(r,e);for(e.sort(n);u--;){var i=parseFloat(e[u]);if(i!=f&&ee(i)){var f=i;Ju.call(r,i,1)}}return o},Wt.range=function(n,t,r){r&&ue(n,t,r)&&(t=r=null),n=+n||0,r=null==r?1:+r||0,null==t?(t=n,n=0):t=+t||0;
var e=-1;t=uo(Mu((t-n)/(r||1)),0);for(var u=wu(t);++e<t;)u[e]=n,n+=r;return u},Wt.rearg=function(n){var t=lr(arguments,false,false,1);return Yr(n,O,null,null,null,t)},Wt.reject=function(n,t,r){var e=So(n)?Pt:ar;return t=Hr(t,r,3),e(n,function(n,r,e){return!t(n,r,e)})},Wt.remove=function(n,t,r){var e=-1,u=n?n.length:0,o=[];for(t=Hr(t,r,3);++e<u;)r=n[e],t(r,e,n)&&(o.push(r),Ju.call(n,e--,1),u--);return o},Wt.rest=me,Wt.shuffle=Ue,Wt.slice=function(n,t,r){var e=n?n.length:0;return e?(r&&typeof r!="number"&&ue(n,t,r)&&(t=0,r=e),Rr(n,t,r)):[]
},Wt.sortBy=function(n,t,e){var u=-1,o=n?n.length:0,i=oe(o)?wu(o):[];return e&&ue(n,t,e)&&(t=null),t=Hr(t,e,3),or(n,function(n,r,e){i[++u]={a:t(n,r,e),b:u,c:n}}),r(i,f)},Wt.sortByAll=function(n){var t=arguments;3<t.length&&ue(t[1],t[2],t[3])&&(t=[n,t[1]]);var e=-1,u=n?n.length:0,o=lr(t,false,false,1),i=oe(u)?wu(u):[];return or(n,function(n){for(var t=o.length,r=wu(t);t--;)r[t]=null==n?w:n[o[t]];i[++e]={a:r,b:e,c:n}}),r(i,a)},Wt.spread=function(n){if(typeof n!="function")throw new Ou($);return function(t){return n.apply(this,t)
}},Wt.take=function(n,t,r){return n&&n.length?((r?ue(n,t,r):null==t)&&(t=1),Rr(n,0,0>t?0:t)):[]},Wt.takeRight=function(n,t,r){var e=n?n.length:0;return e?((r?ue(n,t,r):null==t)&&(t=1),t=e-(+t||0),Rr(n,0>t?0:t)):[]},Wt.takeRightWhile=function(n,t,r){var e=n?n.length:0;if(!e)return[];for(t=Hr(t,r,3);e--&&t(n[e],e,n););return Rr(n,e+1)},Wt.takeWhile=function(n,t,r){var e=n?n.length:0;if(!e)return[];var u=-1;for(t=Hr(t,r,3);++u<e&&t(n[u],u,n););return Rr(n,0,u)},Wt.tap=function(n,t,r){return t.call(r,n),n
},Wt.throttle=function(n,t,r){var e=true,u=true;if(typeof n!="function")throw new Ou($);return false===r?e=false:Xe(r)&&(e="leading"in r?!!r.leading:e,u="trailing"in r?!!r.trailing:u),St.leading=e,St.maxWait=+t,St.trailing=u,Me(n,t,St)},Wt.thru=je,Wt.times=function(n,t,r){if(n=+n,1>n||!ro(n))return[];var e=-1,u=wu(oo(n,po));for(t=Nr(t,r,1);++e<n;)e<po?u[e]=t(e):t(e);return u},Wt.toArray=function(n){var t=n?n.length:0;return oe(t)?t?zt(n):[]:iu(n)},Wt.toPlainObject=eu,Wt.transform=function(n,t,r,e){var u=So(n)||ru(n);
return t=Hr(t,e,4),null==r&&(u||Xe(n)?(e=n.constructor,r=u?So(n)?new e:[]:wo(Je(e)&&e.prototype)):r={}),(u?Mt:_r)(n,function(n,e,u){return t(r,n,e,u)}),r},Wt.union=function(){return Or(lr(arguments,false,true))},Wt.uniq=we,Wt.unzip=be,Wt.values=iu,Wt.valuesIn=function(n){return Cr(n,ou(n))},Wt.where=function(n,t){return Re(n,br(t))},Wt.without=function(n){return ur(n,Rr(arguments,1))},Wt.wrap=function(n,t){return t=null==t?vu:t,Yr(t,R,null,[n],[])},Wt.xor=function(){for(var n=-1,t=arguments.length;++n<t;){var r=arguments[n];
if(So(r)||Ye(r))var e=e?ur(e,r).concat(ur(r,e)):r}return e?Or(e):[]},Wt.zip=function(){for(var n=arguments.length,t=wu(n);n--;)t[n]=arguments[n];return be(t)},Wt.zipObject=xe,Wt.backflow=qe,Wt.collect=Te,Wt.compose=qe,Wt.each=Oe,Wt.eachRight=Ce,Wt.extend=Uo,Wt.iteratee=_u,Wt.methods=uu,Wt.object=xe,Wt.select=Re,Wt.tail=me,Wt.unique=we,du(Wt,Wt),Wt.attempt=hu,Wt.camelCase=$o,Wt.capitalize=function(n){return(n=e(n))&&n.charAt(0).toUpperCase()+n.slice(1)},Wt.clone=function(n,t,r,e){return typeof t!="boolean"&&null!=t&&(e=r,r=ue(n,t,e)?null:t,t=false),r=typeof r=="function"&&Nr(r,e,1),rr(n,t,r)
},Wt.cloneDeep=function(n,t,r){return t=typeof t=="function"&&Nr(t,r,1),rr(n,true,t)},Wt.deburr=fu,Wt.endsWith=function(n,t,r){n=e(n),t+="";var u=n.length;return r=(typeof r=="undefined"?u:oo(0>r?0:+r||0,u))-t.length,0<=r&&n.indexOf(t,r)==r},Wt.escape=function(n){return(n=e(n))&&pt.test(n)?n.replace(lt,l):n},Wt.escapeRegExp=au,Wt.every=Ee,Wt.find=Ie,Wt.findIndex=ve,Wt.findKey=function(n,t,r){return t=Hr(t,r,3),cr(n,t,_r,true)},Wt.findLast=function(n,t,r){return t=Hr(t,r,3),cr(n,t,ir)},Wt.findLastIndex=function(n,t,r){var e=n?n.length:0;
for(t=Hr(t,r,3);e--;)if(t(n[e],e,n))return e;return-1},Wt.findLastKey=function(n,t,r){return t=Hr(t,r,3),cr(n,t,gr,true)},Wt.findWhere=function(n,t){return Ie(n,br(t))},Wt.first=ye,Wt.has=function(n,t){return n?Uu.call(n,t):false},Wt.identity=vu,Wt.includes=ke,Wt.indexOf=de,Wt.isArguments=Ye,Wt.isArray=So,Wt.isBoolean=function(n){return true===n||false===n||h(n)&&Lu.call(n)==M||false},Wt.isDate=function(n){return h(n)&&Lu.call(n)==q||false},Wt.isElement=Ze,Wt.isEmpty=function(n){if(null==n)return true;var t=n.length;
return oe(t)&&(So(n)||tu(n)||Ye(n)||h(n)&&Je(n.splice))?!t:!Fo(n).length},Wt.isEqual=function(n,t,r,e){return r=typeof r=="function"&&Nr(r,e,3),!r&&ie(n)&&ie(t)?n===t:(e=r?r(n,t):w,typeof e=="undefined"?dr(n,t,r):!!e)},Wt.isError=Ge,Wt.isFinite=Wo,Wt.isFunction=Je,Wt.isMatch=function(n,t,r,e){var u=Fo(t),o=u.length;if(r=typeof r=="function"&&Nr(r,e,3),!r&&1==o){var i=u[0];if(e=t[i],ie(e))return null!=n&&e===n[i]&&Uu.call(n,i)}for(var i=wu(o),f=wu(o);o--;)e=i[o]=t[u[o]],f[o]=ie(e);return mr(n,u,i,f,r)
},Wt.isNaN=function(n){return Qe(n)&&n!=+n},Wt.isNative=He,Wt.isNull=function(n){return null===n},Wt.isNumber=Qe,Wt.isObject=Xe,Wt.isPlainObject=No,Wt.isRegExp=nu,Wt.isString=tu,Wt.isTypedArray=ru,Wt.isUndefined=function(n){return typeof n=="undefined"},Wt.kebabCase=Bo,Wt.last=function(n){var t=n?n.length:0;return t?n[t-1]:w},Wt.lastIndexOf=function(n,t,r){var e=n?n.length:0;if(!e)return-1;var u=e;if(typeof r=="number")u=(0>r?uo(e+r,0):oo(r||0,e-1))+1;else if(r)return u=Sr(n,t,true)-1,n=n[u],(t===t?t===n:n!==n)?u:-1;
if(t!==t)return p(n,u,true);for(;u--;)if(n[u]===t)return u;return-1},Wt.max=Io,Wt.min=Oo,Wt.noConflict=function(){return _._=$u,this},Wt.noop=mu,Wt.now=To,Wt.pad=function(n,t,r){n=e(n),t=+t;var u=n.length;return u<t&&ro(t)?(u=(t-u)/2,t=Pu(u),u=Mu(u),r=Kr("",u,r),r.slice(0,t)+n+r):n},Wt.padLeft=function(n,t,r){return(n=e(n))&&Kr(n,t,r)+n},Wt.padRight=function(n,t,r){return(n=e(n))&&n+Kr(n,t,r)},Wt.parseInt=cu,Wt.random=function(n,t,r){r&&ue(n,t,r)&&(t=r=null);var e=null==n,u=null==t;return null==r&&(u&&typeof n=="boolean"?(r=n,n=1):typeof t=="boolean"&&(r=t,u=true)),e&&u&&(t=1,u=false),n=+n||0,u?(t=n,n=0):t=+t||0,r||n%1||t%1?(r=co(),oo(n+r*(t-n+parseFloat("1e-"+((r+"").length-1))),t)):kr(n,t)
},Wt.reduce=Se,Wt.reduceRight=We,Wt.repeat=lu,Wt.result=function(n,t,r){return t=null==n?w:n[t],typeof t=="undefined"&&(t=r),Je(t)?t.call(n):t},Wt.runInContext=m,Wt.size=function(n){var t=n?n.length:0;return oe(t)?t:Fo(n).length},Wt.snakeCase=zo,Wt.some=Fe,Wt.sortedIndex=function(n,t,r,e){var u=Hr(r);return u===tr&&null==r?Sr(n,t):Wr(n,t,u(r,e,1))},Wt.sortedLastIndex=function(n,t,r,e){var u=Hr(r);return u===tr&&null==r?Sr(n,t,true):Wr(n,t,u(r,e,1),true)},Wt.startCase=Do,Wt.startsWith=function(n,t,r){return n=e(n),r=null==r?0:oo(0>r?0:+r||0,n.length),n.lastIndexOf(t,r)==r
},Wt.template=function(n,t,r){var u=Wt.templateSettings;r&&ue(n,t,r)&&(t=r=null),n=e(n),t=Ht(Ht({},r||t),u,Xt),r=Ht(Ht({},t.imports),u.imports,Xt);var o,i,f=Fo(r),a=Cr(r,f),c=0;r=t.interpolate||xt;var l="__p+='";r=Ru((t.escape||xt).source+"|"+r.source+"|"+(r===gt?vt:xt).source+"|"+(t.evaluate||xt).source+"|$","g");var p="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";if(n.replace(r,function(t,r,e,u,f,a){return e||(e=u),l+=n.slice(c,a).replace(Et,s),r&&(o=true,l+="'+__e("+r+")+'"),f&&(i=true,l+="';"+f+";\n__p+='"),e&&(l+="'+((__t=("+e+"))==null?'':__t)+'"),c=a+t.length,t
}),l+="';",(t=t.variable)||(l="with(obj){"+l+"}"),l=(i?l.replace(it,""):l).replace(ft,"$1").replace(at,"$1;"),l="function("+(t||"obj")+"){"+(t?"":"obj||(obj={});")+"var __t,__p=''"+(o?",__e=_.escape":"")+(i?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+l+"return __p}",t=hu(function(){return Au(f,p+"return "+l).apply(w,a)}),t.source=l,Ge(t))throw t;return t},Wt.trim=su,Wt.trimLeft=function(n,t,r){var u=n;return(n=e(n))?n.slice((r?ue(u,t,r):null==t)?v(n):o(n,t+"")):n
},Wt.trimRight=function(n,t,r){var u=n;return(n=e(n))?(r?ue(u,t,r):null==t)?n.slice(0,y(n)+1):n.slice(0,i(n,t+"")+1):n},Wt.trunc=function(n,t,r){r&&ue(n,t,r)&&(t=null);var u=T;if(r=S,null!=t)if(Xe(t)){var o="separator"in t?t.separator:o,u="length"in t?+t.length||0:u;r="omission"in t?e(t.omission):r}else u=+t||0;if(n=e(n),u>=n.length)return n;if(u-=r.length,1>u)return r;if(t=n.slice(0,u),null==o)return t+r;if(nu(o)){if(n.slice(u).search(o)){var i,f=n.slice(0,u);for(o.global||(o=Ru(o.source,(yt.exec(o)||"")+"g")),o.lastIndex=0;n=o.exec(f);)i=n.index;
t=t.slice(0,null==i?u:i)}}else n.indexOf(o,u)!=u&&(o=t.lastIndexOf(o),-1<o&&(t=t.slice(0,o)));return t+r},Wt.unescape=function(n){return(n=e(n))&&st.test(n)?n.replace(ct,d):n},Wt.uniqueId=function(n){var t=++Fu;return e(n)+t},Wt.words=pu,Wt.all=Ee,Wt.any=Fe,Wt.contains=ke,Wt.detect=Ie,Wt.foldl=Se,Wt.foldr=We,Wt.head=ye,Wt.include=ke,Wt.inject=Se,du(Wt,function(){var n={};return _r(Wt,function(t,r){Wt.prototype[r]||(n[r]=t)}),n}(),false),Wt.sample=Ne,Wt.prototype.sample=function(n){return this.__chain__||null!=n?this.thru(function(t){return Ne(t,n)
}):Ne(this.value())},Wt.VERSION=b,Mt("bind bindKey curry curryRight partial partialRight".split(" "),function(n){Wt[n].placeholder=Wt}),Mt(["filter","map","takeWhile"],function(n,t){var r=t==U,e=t==L;Ut.prototype[n]=function(n,u){var o=this.clone(),i=o.__filtered__,f=o.__iteratees__||(o.__iteratees__=[]);return o.__filtered__=i||r||e&&0>o.__dir__,f.push({iteratee:Hr(n,u,3),type:t}),o}}),Mt(["drop","take"],function(n,t){var r="__"+n+"Count__",e=n+"While";Ut.prototype[n]=function(e){e=null==e?1:uo(Pu(e)||0,0);
var u=this.clone();if(u.__filtered__){var o=u[r];u[r]=t?oo(o,e):o+e}else(u.__views__||(u.__views__=[])).push({size:e,type:n+(0>u.__dir__?"Right":"")});return u},Ut.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()},Ut.prototype[n+"RightWhile"]=function(n,t){return this.reverse()[e](n,t).reverse()}}),Mt(["first","last"],function(n,t){var r="take"+(t?"Right":"");Ut.prototype[n]=function(){return this[r](1).value()[0]}}),Mt(["initial","rest"],function(n,t){var r="drop"+(t?"":"Right");
Ut.prototype[n]=function(){return this[r](1)}}),Mt(["pluck","where"],function(n,t){var r=t?"filter":"map",e=t?br:jr;Ut.prototype[n]=function(n){return this[r](e(n))}}),Ut.prototype.compact=function(){return this.filter(vu)},Ut.prototype.dropWhile=function(n,t){var r;return n=Hr(n,t,3),this.filter(function(t,e,u){return r||(r=!n(t,e,u))})},Ut.prototype.reject=function(n,t){return n=Hr(n,t,3),this.filter(function(t,r,e){return!n(t,r,e)})},Ut.prototype.slice=function(n,t){n=null==n?0:+n||0;var r=0>n?this.takeRight(-n):this.drop(n);
return typeof t!="undefined"&&(t=+t||0,r=0>t?r.dropRight(-t):r.take(t-n)),r},Ut.prototype.toArray=function(){return this.drop(0)},_r(Ut.prototype,function(n,t){var r=Wt[t],e=/^(?:first|last)$/.test(t);Wt.prototype[t]=function(){function t(n){return n=[n],Vu.apply(n,o),r.apply(Wt,n)}var u=this.__wrapped__,o=arguments,i=this.__chain__,f=!!this.__actions__.length,a=u instanceof Ut,c=a&&!f;return e&&!i?c?n.call(u):r.call(Wt,this.value()):a||So(u)?(u=n.apply(c?u:new Ut(this),o),e||!f&&!u.__actions__||(u.__actions__||(u.__actions__=[])).push({func:je,args:[t],thisArg:Wt}),new Nt(u,i)):this.thru(t)
}}),Mt("concat join pop push shift sort splice unshift".split(" "),function(n){var t=Cu[n],r=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",e=/^(?:join|pop|shift)$/.test(n);Wt.prototype[n]=function(){var n=arguments;return e&&!this.__chain__?t.apply(this.value(),n):this[r](function(r){return t.apply(r,n)})}}),Ut.prototype.clone=function(){var n=this.__actions__,t=this.__iteratees__,r=this.__views__,e=new Ut(this.__wrapped__);return e.__actions__=n?zt(n):null,e.__dir__=this.__dir__,e.__dropCount__=this.__dropCount__,e.__filtered__=this.__filtered__,e.__iteratees__=t?zt(t):null,e.__takeCount__=this.__takeCount__,e.__views__=r?zt(r):null,e
},Ut.prototype.reverse=function(){if(this.__filtered__){var n=new Ut(this);n.__dir__=-1,n.__filtered__=true}else n=this.clone(),n.__dir__*=-1;return n},Ut.prototype.value=function(){var n=this.__wrapped__.value();if(!So(n))return Tr(n,this.__actions__);var t,r=this.__dir__,e=0>r;t=n.length;for(var u=this.__views__,o=0,i=-1,f=u?u.length:0;++i<f;){var a=u[i],c=a.size;switch(a.type){case"drop":o+=c;break;case"dropRight":t-=c;break;case"take":t=oo(t,o+c);break;case"takeRight":o=uo(o,t-c)}}t={start:o,end:t},i=t.start,f=t.end,t=f-i,u=this.__dropCount__,o=oo(t,this.__takeCount__),e=e?f:i-1,f=(i=this.__iteratees__)?i.length:0,a=0,c=[];
n:for(;t--&&a<o;){for(var e=e+r,l=-1,s=n[e];++l<f;){var p=i[l],h=p.iteratee(s,e,n),p=p.type;if(p==F)s=h;else if(!h){if(p==U)continue n;break n}}u?u--:c[a++]=s}return c},Wt.prototype.chain=function(){return Ae(this)},Wt.prototype.commit=function(){return new Nt(this.value(),this.__chain__)},Wt.prototype.plant=function(n){for(var t,r=this;r instanceof Nt;){var e=he(r);t?u.__wrapped__=e:t=e;var u=e,r=r.__wrapped__}return u.__wrapped__=n,t},Wt.prototype.reverse=function(){var n=this.__wrapped__;return n instanceof Ut?(this.__actions__.length&&(n=new Ut(this)),new Nt(n.reverse(),this.__chain__)):this.thru(function(n){return n.reverse()
})},Wt.prototype.toString=function(){return this.value()+""},Wt.prototype.run=Wt.prototype.toJSON=Wt.prototype.valueOf=Wt.prototype.value=function(){return Tr(this.__wrapped__,this.__actions__)},Wt.prototype.collect=Wt.prototype.map,Wt.prototype.head=Wt.prototype.first,Wt.prototype.select=Wt.prototype.filter,Wt.prototype.tail=Wt.prototype.rest,Wt}var w,b="3.2.0",x=1,A=2,j=4,k=8,E=16,R=32,I=64,O=128,C=256,T=30,S="...",W=150,N=16,U=0,F=1,L=2,$="Expected a function",B="__lodash_placeholder__",z="[object Arguments]",D="[object Array]",M="[object Boolean]",q="[object Date]",P="[object Error]",K="[object Function]",V="[object Number]",Y="[object Object]",Z="[object RegExp]",G="[object String]",J="[object ArrayBuffer]",X="[object Float32Array]",H="[object Float64Array]",Q="[object Int8Array]",nt="[object Int16Array]",tt="[object Int32Array]",rt="[object Uint8Array]",et="[object Uint8ClampedArray]",ut="[object Uint16Array]",ot="[object Uint32Array]",it=/\b__p\+='';/g,ft=/\b(__p\+=)''\+/g,at=/(__e\(.*?\)|\b__t\))\+'';/g,ct=/&(?:amp|lt|gt|quot|#39|#96);/g,lt=/[&<>"'`]/g,st=RegExp(ct.source),pt=RegExp(lt.source),ht=/<%-([\s\S]+?)%>/g,_t=/<%([\s\S]+?)%>/g,gt=/<%=([\s\S]+?)%>/g,vt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,yt=/\w*$/,dt=/^\s*function[ \n\r\t]+\w/,mt=/^0[xX]/,wt=/^\[object .+?Constructor\]$/,bt=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,xt=/($^)/,At=/[.*+?^${}()|[\]\/\\]/g,jt=RegExp(At.source),kt=/\bthis\b/,Et=/['\n\r\u2028\u2029\\]/g,Rt=RegExp("[A-Z\\xc0-\\xd6\\xd8-\\xde]{2,}(?=[A-Z\\xc0-\\xd6\\xd8-\\xde][a-z\\xdf-\\xf6\\xf8-\\xff]+)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+|[A-Z\\xc0-\\xd6\\xd8-\\xde]+|[0-9]+","g"),It=" \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000",Ot="Array ArrayBuffer Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Math Number Object RegExp Set String _ clearTimeout document isFinite parseInt setTimeout TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap window WinRTError".split(" "),Ct={};
Ct[X]=Ct[H]=Ct[Q]=Ct[nt]=Ct[tt]=Ct[rt]=Ct[et]=Ct[ut]=Ct[ot]=true,Ct[z]=Ct[D]=Ct[J]=Ct[M]=Ct[q]=Ct[P]=Ct[K]=Ct["[object Map]"]=Ct[V]=Ct[Y]=Ct[Z]=Ct["[object Set]"]=Ct[G]=Ct["[object WeakMap]"]=false;var Tt={};Tt[z]=Tt[D]=Tt[J]=Tt[M]=Tt[q]=Tt[X]=Tt[H]=Tt[Q]=Tt[nt]=Tt[tt]=Tt[V]=Tt[Y]=Tt[Z]=Tt[G]=Tt[rt]=Tt[et]=Tt[ut]=Tt[ot]=true,Tt[P]=Tt[K]=Tt["[object Map]"]=Tt["[object Set]"]=Tt["[object WeakMap]"]=false;var St={leading:false,maxWait:0,trailing:false},Wt={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss"},Nt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Ut={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Ft={"function":true,object:true},Lt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},$t=Ft[typeof window]&&window!==(this&&this.window)?window:this,Bt=Ft[typeof exports]&&exports&&!exports.nodeType&&exports,Ft=Ft[typeof module]&&module&&!module.nodeType&&module,zt=Bt&&Ft&&typeof global=="object"&&global;
!zt||zt.global!==zt&&zt.window!==zt&&zt.self!==zt||($t=zt);var zt=Ft&&Ft.exports===Bt&&Bt,Dt=m();typeof define=="function"&&typeof define.amd=="object"&&define.amd?($t._=Dt, define(function(){return Dt})):Bt&&Ft?zt?(Ft.exports=Dt)._=Dt:Bt._=Dt:$t._=Dt}).call(this);
angular.module('VirtualBookshelf')
.factory('archive', function (Data) {
	var archive = {};

	archive.sendExternalURL = function(externalURL, tags) {
		return Data.postCover(externalURL, tags);
	};

	return archive;
});
angular.module('VirtualBookshelf')
.factory('cache', function ($q, $log, Data) {
	var cache = {};

	var library = null;
	var sections = {};
	var books = {};
	var images = {};

	cache.init = function(libraryModel, sectionModels, bookModels, imageUrls) {
		var libraryLoad = loadLibraryData(libraryModel);
		var sectionsLoad = [];
		var booksLoad = [];
		var imagesLoad = [];
		var model, url; // iterators

		for (model in sectionModels) {
			sectionsLoad.push(addSection(model));
		}

		for (model in bookModels) {
			booksLoad.push(addBook(model));
		}

		for (url in imageUrls) {
			imagesLoad.push(addImage(url));
		}

		var promise = $q.all({
			libraryCache: libraryLoad, 
			sectionsLoad: $q.all(sectionsLoad), 
			booksLoad: $q.all(booksLoad),
			imagesLoad: $q.all(imagesLoad)
		}).then(function (results) {
			library = results.libraryCache;
		});

		return promise;
	};

	cache.getLibrary = function() {
		return library;
	};

	cache.getSection = function(model) {
		return commonGetter(sections, model, addSection);
	};

	cache.getBook = function(model) {
		return commonGetter(books, model, addBook);
	};

	cache.getImage = function(url) {
		return commonGetter(images, url, addImage);
	};

	var addSection = function(model) {
		return commonAdder(sections, model, loadSectionData);
	};

	var addBook = function(model) {
		return commonAdder(books, model, loadBookData);
	};

	var addImage = function(url) {
		return commonAdder(images, url, Data.loadImage).catch(function () {
			$log.error('Error adding image:', url);
			return null;
		});
	};

	var commonGetter = function(from, key, addFunction) {
		var result = from[key];

		if(!result) {
			result = addFunction(key);
		}

		return $q.when(result);
	};

	var commonAdder = function(where, what, loader) {
		var promise = loader(what).then(function (loadedCache) {
			where[what] = loadedCache;

			return loadedCache;
		});

		return promise;
	};

	var loadLibraryData = function(model) {
		var path = '/obj/libraries/{model}/'.replace('{model}', model);
        var modelUrl = path + 'model.json';
        var mapUrl = path + 'map.jpg';

        var promise = $q.all({
        	geometry: Data.loadGeometry(modelUrl), 
        	mapImage: Data.loadImage(mapUrl)
        });

        return promise;
	};

	var loadSectionData = function(model) {
		var path = '/obj/sections/{model}/'.replace('{model}', model);
        var modelUrl = path + 'model.js';
        var mapUrl = path + 'map.jpg';
        var dataUrl = path + 'data.json';

        var promise = $q.all({
        	geometry: Data.loadGeometry(modelUrl), 
        	mapImage: Data.loadImage(mapUrl), 
        	data: Data.getData(dataUrl)
        });

        return promise;
	};

	var loadBookData = function(model) {
		var path = '/obj/books/{model}/'.replace('{model}', model);
        var modelUrl = path + 'model.js';
        var mapUrl = path + 'map.jpg';

        var promise = $q.all({
        	geometry: Data.loadGeometry(modelUrl),
        	mapImage: Data.loadImage(mapUrl) 
        });

        return promise;
	};

	return cache;
});
angular.module('VirtualBookshelf')
.factory('Camera', function (CameraObject) {
	var Camera = {
		HEIGTH: 1.5,
		object: new CameraObject(),
		setParent: function(parent) {
			parent.add(this.object);
		},
		getPosition: function() {
			return this.object.position;
		}
	};

	Camera.init = function(width, height) {
		Camera.camera = new THREE.PerspectiveCamera(45, width / height, 0.01, 50);
		this.object.position = new THREE.Vector3(0, Camera.HEIGTH, 0);
		this.object.rotation.order = 'YXZ';

		var candle = new THREE.PointLight(0x665555, 1.6, 10);
		candle.position.set(0, 0, 0);
		this.object.add(candle);

		this.object.add(Camera.camera);
	};

	Camera.rotate = function(x, y) {
		var newX = this.object.rotation.x + y * 0.0001 || 0;
		var newY = this.object.rotation.y + x * 0.0001 || 0;

		if(newX < 1.57 && newX > -1.57) {	
			this.object.rotation.x = newX;
		}

		this.object.rotation.y = newY;
	};

	Camera.go = function(speed) {
		var direction = this.getVector();
		var newPosition = this.object.position.clone();
		newPosition.add(direction.multiplyScalar(speed));

		this.object.move(newPosition);
	};

	Camera.getVector = function() {
		var vector = new THREE.Vector3(0, 0, -1);

		return vector.applyEuler(this.object.rotation);
	};

	return Camera;
});
angular.module('VirtualBookshelf')
/* 
 * controls.js is a service for processing not UI(menus) events 
 * like mouse, keyboard, touch or gestures.
 *
 * TODO: remove all busines logic from there and leave only
 * events functionality to make it more similar to usual controller
 */
.factory('Controls', function ($q, $log, SelectorMeta, BookObject, ShelfObject, SectionObject, Camera, navigation, environment, mouse, selector) {
	var Controls = {};

	Controls.init = function() {
		Controls.initListeners();
	};

	Controls.initListeners = function() {
		document.addEventListener('mousedown', Controls.onMouseDown, false);
		document.addEventListener('mouseup', Controls.onMouseUp, false);
		document.addEventListener('mousemove', Controls.onMouseMove, false);	
		document.oncontextmenu = function() {return false;};
	};

	Controls.update = function() {
		if(mouse[3]) {
			Camera.rotate(mouse.longX, mouse.longY);
		}
		if(mouse[1] && mouse[3]) {
			Camera.go(navigation.BUTTONS_GO_SPEED);
		}
	};

	Controls.onMouseDown = function(event) {
		mouse.down(event); 

		if(mouse.isCanvas() && mouse[1] && !mouse[3]) {
			Controls.selectObject();
			selector.selectFocused();
		}
	};

	Controls.onMouseUp = function(event) {
		mouse.up(event);
		
		if(event.which === 1) {
			if(selector.isSelectedEditable()) {
				var obj = selector.getSelectedObject();

				if(obj.changed) {
					obj.save();
				}
			}
		}
	};

	Controls.onMouseMove = function(event) {
		mouse.move(event);

		if(mouse.isCanvas()) {
			event.preventDefault();

			if(mouse[1] && !mouse[3]) {		
				Controls.moveObject();
			} else {
				Controls.selectObject();
			}
		}
	};

	//****

	Controls.selectObject = function() {
		var
			intersected,
			object;

		if(mouse.isCanvas() && environment.library) {
			//TODO: optimize
			intersected = mouse.getIntersected(environment.library.children, true, [BookObject]);
			if(!intersected) {
				intersected = mouse.getIntersected(environment.library.children, true, [ShelfObject]);
			}
			if(!intersected) {
				intersected = mouse.getIntersected(environment.library.children, true, [SectionObject]);
			}
			if(intersected) {
				object = intersected.object;
			}

			selector.focus(new SelectorMeta(object));
		}
	};

	Controls.moveObject = function() {
		var mouseVector;
		var newPosition;
		var intersected;
		var parent;
		var oldParent;
		var selectedObject;

		if(selector.isSelectedEditable()) {
			selectedObject = selector.getSelectedObject();
			mouseVector = Camera.getVector();	

			newPosition = selectedObject.position.clone();
			oldParent = selectedObject.parent;

			if(selector.isSelectedBook()) {
				intersected = mouse.getIntersected(environment.library.children, true, [ShelfObject]);
				selectedObject.setParent(intersected ? intersected.object : null);
			}

			parent = selectedObject.parent;
			if(parent) {
				parent.localToWorld(newPosition);

				newPosition.x -= (mouseVector.z * mouse.dX + mouseVector.x * mouse.dY) * 0.003;
				newPosition.z -= (-mouseVector.x * mouse.dX + mouseVector.z * mouse.dY) * 0.003;

				parent.worldToLocal(newPosition);
				if(!selectedObject.move(newPosition) && selector.isSelectedBook()) {
					if(parent !== oldParent) {
						selectedObject.setParent(oldParent);
					}
				}
			}
		}
	};

	return Controls;	
});
angular.module('VirtualBookshelf')
.factory('Data', function ($http, $q) {
	var Data = {};

	Data.TEXTURE_RESOLUTION = 512;
	Data.COVER_MAX_Y = 394;
	Data.COVER_FACE_X = 296;

    Data.loadImage = function(url) {
        var deffered = $q.defer();
        var img = new Image();
        
        img.crossOrigin = ''; 
        img.src = url;
        
        if(img.complete) {
            deffered.resolve(img);
        }

        img.onload = function () {
            deffered.resolve(img);
        };
        img.onerror = function (error) {
            deffered.reject(error);
        };

        return deffered.promise; 
    };

    Data.postCover = function(externalURL, tags) {
    	var data = {
    		url: externalURL,
    		tags: tags
    	};

    	return $http.post('/cover', data).then(function (res) {
    		return res.data;
    	});
    };

    Data.logout = function() {
    	return $http.post('/auth/logout');
    };

	Data.getUser = function() {
		return $http.get('/user');
	};

	Data.getUserBooks = function(userId) {
		return $http.get('/freeBooks/' + userId).then(function (res) {
			return res.data;
		});
	};

	Data.postBook = function(book) {
		return $http.post('/book', book).then(function (res) {
			return res.data;
		});
	};

	Data.deleteBook = function(book) {
		return $http({
			method: 'DELETE',
			url: '/book',
			data: book,
			headers: {'Content-Type': 'application/json;charset=utf-8'}
		});
	};

	Data.getUIData = function() {
		return $http.get('/obj/data.json');
	};

	Data.getLibraries = function() {
		return $http.get('/libraries');
	};

	Data.getLibrary = function(libraryId) {
		return $http.get('/library/' + libraryId).then(function (res) {
			return res.data;
		});
	};

	Data.postLibrary = function(libraryModel) {
        return $http.post('/library/' + libraryModel).then(function (res) {
            return res.data;
        });
	};

	Data.getSections = function(libraryId) {
        return $http.get('/sections/' + libraryId).then(function (res) {
            return res.data;
        });
	};

	Data.postSection = function(sectionData) {
        return $http.post('/section', sectionData).then(function (res) {
        	return res.data;
        });
	};

	Data.getBooks = function(sectionId) {
		//TODO: userId
        return $http.get('/books/' + sectionId).then(function (res) {
            return res.data;
        });
	};

	Data.loadGeometry = function(link) {
        var deffered = $q.defer();
		var jsonLoader = new THREE.JSONLoader();

        //TODO: found no way to reject
		jsonLoader.load(link, function (geometry) {
			geometry.computeBoundingBox();
			deffered.resolve(geometry);
		});

        return deffered.promise;
	};

	Data.getData = function(url) {
        return $http.get(url).then(function (res) {
            return res.data;
        });
	};

	Data.postFeedback = function(dto) {
        return $http.post('/feedback', dto);
	};

	return Data;
});
angular.module('VirtualBookshelf')
.factory('dialog', function (ngDialog) {
	var dialog = {};

	var ERROR = 1;
	var CONFIRM = 2;
	var WARNING = 3;
	var INFO = 4;

	var iconClassMap = {};
	iconClassMap[ERROR] = 'fa-times-circle ';
	iconClassMap[CONFIRM] = 'fa-question-circle';
	iconClassMap[WARNING] = 'fa-exclamation-triangle';
	iconClassMap[INFO] = 'fa-info-circle';

	dialog.openError = function(msg) {
		return openDialog(msg, ERROR);
	};

	dialog.openConfirm = function(msg) {
		return openDialog(msg, CONFIRM, true);
	};

	dialog.openWarning = function(msg) {
		return openDialog(msg, WARNING);
	};

	dialog.openInfo = function(msg) {
		return openDialog(msg, INFO);
	};

	var openDialog = function(msg, type, cancelButton) {
		return ngDialog.openConfirm({
			template: '/ui/confirmDialog',
			data: {
				msg: msg,
				iconClass: getIconClass(type),
				cancelButton: cancelButton
			}
		});
	};

	var getIconClass = function(type) {
		return iconClassMap[type];
	};

	return dialog;
});
angular.module('VirtualBookshelf')
.factory('environment', function ($q, $log, $window, LibraryObject, SectionObject, BookObject, Data, Camera, cache) {
	var environment = {};

	environment.CLEARANCE = 0.001;
	environment.LIBRARY_CANVAS_ID = 'LIBRARY';
	 
	var libraryDto = null;
	var sections = null;
	var books = null;

	environment.scene = null;
	environment.library = null;

	environment.loadLibrary = function(libraryId) {
		clearScene(); // inits some fields

		var promise = Data.getLibrary(libraryId).then(function (dto) {
			var dict = parseLibraryDto(dto);
			
			sections = dict.sections;
			books = dict.books;
			libraryDto = dto;

			return initCache(libraryDto, dict.sections, dict.books);
		}).then(function () {
			createLibrary(libraryDto);
			return createSections(sections);
		}).then(function () {
			return createBooks(books);
		});

		return promise;
	};

	environment.goToLibrary = function(id) {
		if(id) {
			$window.location = '/' + id;
		}
	};

	environment.getBook = function(bookId) {
		return getDictObject(books, bookId);
	};

	environment.getSection = function(sectionId) {
		return getDictObject(sections, sectionId);
	};

	environment.getShelf = function(sectionId, shelfId) {
		var section = environment.getSection(sectionId);
		var shelf = section && section.shelves[shelfId];

		return shelf;
	};

	var getDictObject = function(dict, objectId) {
		var dictItem = dict[objectId];
		var dictObject = dictItem && dictItem.obj;

		return dictObject;
	};

	environment.updateSection = function(dto) {
		if(dto.libraryId == environment.library.id) {
			removeObject(sections, dto.id);
			createSection(dto);
		} else {
			removeObject(sections, dto.id);
		}	
	};

	environment.updateBook = function(dto) {
		var shelf = getBookShelf(dto);

		if(shelf) {
			environment.removeBook(dto);
			createBook(dto);
		} else {
			environment.removeBook(dto);
		}
	};

	environment.removeBook = function(bookDto) {
		removeObject(books, bookDto.id);
	};

	var removeObject = function(dict, key) {
		var dictItem = dict[key];
		if(dictItem) {
			delete dict[key];
			
			if(dictItem.obj) {
				dictItem.obj.setParent(null);
			}
		}
	};

	var initCache = function(libraryDto, sectionsDict, booksDict) {
		var libraryModel = libraryDto.model;
		var sectionModels = {};
		var bookModels = {};
		var imageUrls = {};

		for (var sectionId in sectionsDict) {
			var sectionDto = sectionsDict[sectionId].dto;
			sectionModels[sectionDto.model] = true;
		}

		for (var bookId in booksDict) {
			var bookDto = booksDict[bookId].dto;
			bookModels[bookDto.model] = true;

			if(bookDto.cover) {
				imageUrls[bookDto.cover] = true;
			}
		}

		return cache.init(libraryModel, sectionModels, bookModels, imageUrls);
	};

	var clearScene = function() {
		environment.library = null;
		sections = {};
		books = {};

		while(environment.scene.children.length > 0) {
			if(environment.scene.children[0].dispose) {
				environment.scene.children[0].dispose();
			}
			environment.scene.remove(environment.scene.children[0]);
		}
	};

	var parseLibraryDto = function(libraryDto) {
		var result = {
			sections: {},
			books: {}
		};

		for(var sectionIndex = libraryDto.sections.length - 1; sectionIndex >= 0; sectionIndex--) {
			var sectionDto = libraryDto.sections[sectionIndex];
			result.sections[sectionDto.id] = {dto: sectionDto};

			for(var bookIndex = sectionDto.books.length - 1; bookIndex >= 0; bookIndex--) {
				var bookDto = sectionDto.books[bookIndex];
				result.books[bookDto.id] = {dto: bookDto};
			}

			delete sectionDto.books;
		}

		delete libraryDto.sections;

		return result;
	};

	var createLibrary = function(libraryDto) {
		var library = null;
		var libraryCache = cache.getLibrary();
        var texture = new THREE.Texture(libraryCache.mapImage);
        var material = new THREE.MeshPhongMaterial({map: texture});

        texture.needsUpdate = true;
		library = new LibraryObject(libraryDto, libraryCache.geometry, material);
		Camera.setParent(library);

		environment.scene.add(library);
		environment.library = library;
	};

	var createSections = function(sectionsDict) {
		var results = [];
		var key;

		for(key in sectionsDict) {
			results.push(createSection(sectionsDict[key].dto));		
		}

		return $q.all(results);
	};

	var createSection = function(sectionDto) {
		var promise = cache.getSection(sectionDto.model).then(function (sectionCache) {
	        var texture = new THREE.Texture(sectionCache.mapImage);
	        var material = new THREE.MeshPhongMaterial({map: texture});
	        var section;

	        texture.needsUpdate = true;
	        sectionDto.data = sectionCache.data;

	        section = new SectionObject(sectionDto, sectionCache.geometry, material);

			environment.library.add(section);
			addToDict(sections, section);
		});

		return promise;
	};

	// TODO: merge with createSections
	var createBooks = function(booksDict) {
		var results = [];
		var key;

		for(key in booksDict) {
			results.push(createBook(booksDict[key].dto));
		}

		return $q.all(results);
	};

	var createBook = function(bookDto) {
		var promises = {};
		var promise;

		promises.bookCache = cache.getBook(bookDto.model);
		if(bookDto.cover) {
			promises.coverCache = cache.getImage(bookDto.cover);
		}

		promise = $q.all(promises).then(function (results) {
			var bookCache = results.bookCache;
			var coverImage = results.coverCache;
			var canvas = document.createElement('canvas');

			canvas.width = canvas.height = Data.TEXTURE_RESOLUTION;
			var texture = new THREE.Texture(canvas);
		    var material = new THREE.MeshPhongMaterial({map: texture});

			var book = new BookObject(bookDto, bookCache.geometry, material, bookCache.mapImage, coverImage);

			addToDict(books, book);
			placeBookOnShelf(book);
		});

		return promise;
	};

	var addToDict = function(dict, obj) {
		var dictItem = {
			dto: obj.dataObject,
			obj: obj
		};

		dict[obj.id] = dictItem;
	};

	var getBookShelf = function(bookDto) {
		return environment.getShelf(bookDto.sectionId, bookDto.shelfId);
	};

	var placeBookOnShelf = function(book) {
		var shelf = getBookShelf(book.dataObject);
		shelf.add(book);
	};

	return environment;
});
angular.module('VirtualBookshelf')
.factory('Main', function ($log, Camera, Controls, User, environment, uiTools, navigation, authorization, block) {	
	var canvas;
	var renderer;
	
	var Main = {};

	Main.start = function() {
		var winResize;
		var width = window.innerWidth;
		var height = window.innerHeight;

		if(!Detector.webgl) {
			Detector.addGetWebGLMessage();
		}

		init(width, height);
		Camera.init(width, height);
		Controls.init();

		winResize = new THREEx.WindowResize(renderer, Camera.camera);

		startRenderLoop();

		block.global.start();
		User.load().then(function () {
			return environment.loadLibrary(User.getLibrary() || 1).then(function () {
				//TODO: $q.all(environment.loadLibrary(User.getLibrary() || 1), authorization.loadUserData())
				return authorization.loadUserData();
			});
		}).catch(function (error) {
			$log.error(error);
			//TODO: show error message  
		}).finally(function () {
			block.global.stop();
		});		
	};

	var init = function(width, height) {
		canvas = document.getElementById(environment.LIBRARY_CANVAS_ID);
		renderer = new THREE.WebGLRenderer({canvas: canvas});
		renderer.setSize(width, height);

		environment.scene = new THREE.Scene();
		environment.scene.fog = new THREE.Fog(0x000000, 4, 7);
	};

	var startRenderLoop = function() {
		requestAnimationFrame(startRenderLoop);

		Controls.update();
		navigation.update();
		uiTools.update();
		
		renderer.render(environment.scene, Camera.camera);
	};

	return Main;
});
angular.module('VirtualBookshelf')
.factory('mouse', function (Camera, environment) {
	var mouse = {};

	var getWidth = function() {
		return window.innerWidth;
	};

	var getHeight = function() {
		return window.innerHeight;
	};

	var x = null;
	var y = null;
	
	mouse.target = null;
	mouse.dX = null;
	mouse.dY = null;
	mouse.longX = null;
	mouse.longY = null;

	mouse.getTarget = function() {
		return this.target;
	};

	mouse.down = function(event) {
		if(event) {
			this[event.which] = true;
			this.target = event.target;
			x = event.clientX;
			y = event.clientY;
			mouse.longX = getWidth() * 0.5 - x;
			mouse.longY = getHeight() * 0.5 - y;
		}
	};

	mouse.up = function(event) {
		if(event) {
			this[event.which] = false;
			// linux chrome bug fix (when both keys release then both event.which equal 3)
			this[1] = false; 
		}
	};

	mouse.move = function(event) {
		if(event) {
			this.target = event.target;
			mouse.longX = getWidth() * 0.5 - x;
			mouse.longY = getHeight() * 0.5 - y;
			mouse.dX = event.clientX - x;
			mouse.dY = event.clientY - y;
			x = event.clientX;
			y = event.clientY;
		}
	};

	mouse.isCanvas = function() {
		return this.target.id === environment.LIBRARY_CANVAS_ID;
	};

	mouse.isPocketBook = function() {
		return false; //TODO: stub
		// return !!(this.target && this.target.parentNode == UI.menu.inventory.books);
	};

	mouse.getIntersected = function(objects, recursive, searchFor) {
		var
			vector,
			raycaster,
			intersects,
			intersected,
			result,
			i, j;

		result = null;
		vector = getVector();
		raycaster = new THREE.Raycaster(Camera.getPosition(), vector);
		intersects = raycaster.intersectObjects(objects, recursive);

		if(searchFor) {
			if(intersects.length) {
				for(i = 0; i < intersects.length; i++) {
					intersected = intersects[i];
					
					for(j = searchFor.length - 1; j >= 0; j--) {
						if(intersected.object instanceof searchFor[j]) {
							result = intersected;
							break;
						}
					}

					if(result) {
						break;
					}
				}
			}		
		} else {
			result = intersects;
		}

		return result;
	};

	var getVector = function() {
		var projector = new THREE.Projector();
		var vector = new THREE.Vector3((x / getWidth()) * 2 - 1, - (y / getHeight()) * 2 + 1, 0.5);
		projector.unprojectVector(vector, Camera.camera);
	
		return vector.sub(Camera.getPosition()).normalize();
	};

	return mouse;
});
angular.module('VirtualBookshelf')
.factory('navigation', function (Camera) {
	var navigation = {};

	navigation.BUTTONS_ROTATE_SPEED = 100;
	navigation.BUTTONS_GO_SPEED = 0.02;

	var state = {
		forward: false,
		backward: false,
		left: false,
		right: false			
	};

	navigation.goStop = function() {
		state.forward = false;
		state.backward = false;
		state.left = false;
		state.right = false;
	};

	navigation.goForward = function() {
		state.forward = true;
	};

	navigation.goBackward = function() {
		state.backward = true;
	};

	navigation.goLeft = function() {
		state.left = true;
	};

	navigation.goRight = function() {
		state.right = true;
	};

	navigation.update = function() {
		if(state.forward) {
			Camera.go(navigation.BUTTONS_GO_SPEED);
		} else if(state.backward) {
			Camera.go(-navigation.BUTTONS_GO_SPEED);
		} else if(state.left) {
			Camera.rotate(navigation.BUTTONS_ROTATE_SPEED, 0);
		} else if(state.right) {
			Camera.rotate(-navigation.BUTTONS_ROTATE_SPEED, 0);
		}
	};

	return navigation;
});
angular.module('VirtualBookshelf')
.factory('User', function ($log, Data) {
	var user = {};

	var loaded = false;
	var _dataObject = null;
	var _position = null;
	var _library = null;

	user.load = function() {
		var scope = this;

		return Data.getUser().then(function (res) {
			scope.setDataObject(res.data);
			scope.setLibrary();
			loaded = true;

			$log.log('user loaded');
		});
	};

	user.logout = function() {
		return Data.logout().then(function () {
			return user.load();
		});
	};

	user.setDataObject = function(dataObject) {
		_dataObject = dataObject;
	};

	user.getLibrary = function() {
		return _library;
	};

	user.setLibrary = function(libraryId) {
		_library = libraryId || window.location.pathname.substring(1);
	};

	user.getId = function() {
		return _dataObject && _dataObject.id;
	};

	user.isAuthorized = function() {
		return Boolean(_dataObject);
	};

	user.isLoaded = function() {
		return loaded;
	}

	return user;
});

/**
 * @author alteredq / http://alteredqualia.com/
 * @author mr.doob / http://mrdoob.com/
 */

var Detector = {

	canvas: !! window.CanvasRenderingContext2D,
	webgl: ( function () { try { var canvas = document.createElement( 'canvas' ); return !! window.WebGLRenderingContext && ( canvas.getContext( 'webgl' ) || canvas.getContext( 'experimental-webgl' ) ); } catch( e ) { return false; } } )(),
	workers: !! window.Worker,
	fileapi: window.File && window.FileReader && window.FileList && window.Blob,

	getWebGLErrorMessage: function () {

		var element = document.createElement( 'div' );
		element.id = 'webgl-error-message';
		element.style.fontFamily = 'monospace';
		element.style.fontSize = '13px';
		element.style.fontWeight = 'normal';
		element.style.textAlign = 'center';
		element.style.background = '#fff';
		element.style.color = '#000';
		element.style.padding = '1.5em';
		element.style.width = '400px';
		element.style.margin = '5em auto 0';

		if ( ! this.webgl ) {

			element.innerHTML = window.WebGLRenderingContext ? [
				'Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />',
				'Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'
			].join( '\n' ) : [
				'Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>',
				'Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'
			].join( '\n' );

		}

		return element;

	},

	addGetWebGLMessage: function ( parameters ) {

		var parent, id, element;

		parameters = parameters || {};

		parent = parameters.parent !== undefined ? parameters.parent : document.body;
		id = parameters.id !== undefined ? parameters.id : 'oldie';

		element = Detector.getWebGLErrorMessage();
		element.id = id;

		parent.appendChild( element );

	}

};
// three.js - http://github.com/mrdoob/three.js
'use strict';var THREE={REVISION:"64"};self.console=self.console||{info:function(){},log:function(){},debug:function(){},warn:function(){},error:function(){}};String.prototype.trim=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")};THREE.extend=function(a,b){if(Object.keys)for(var c=Object.keys(b),d=0,e=c.length;d<e;d++){var f=c[d];Object.defineProperty(a,f,Object.getOwnPropertyDescriptor(b,f))}else for(f in c={}.hasOwnProperty,b)c.call(b,f)&&(a[f]=b[f]);return a};
(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!self.requestAnimationFrame;++c)self.requestAnimationFrame=self[b[c]+"RequestAnimationFrame"],self.cancelAnimationFrame=self[b[c]+"CancelAnimationFrame"]||self[b[c]+"CancelRequestAnimationFrame"];void 0===self.requestAnimationFrame&&void 0!==self.setTimeout&&(self.requestAnimationFrame=function(b){var c=Date.now(),f=Math.max(0,16-(c-a)),h=self.setTimeout(function(){b(c+f)},f);a=c+f;return h});void 0===self.cancelAnimationFrame&&void 0!==
self.clearTimeout&&(self.cancelAnimationFrame=function(a){self.clearTimeout(a)})})();THREE.CullFaceNone=0;THREE.CullFaceBack=1;THREE.CullFaceFront=2;THREE.CullFaceFrontBack=3;THREE.FrontFaceDirectionCW=0;THREE.FrontFaceDirectionCCW=1;THREE.BasicShadowMap=0;THREE.PCFShadowMap=1;THREE.PCFSoftShadowMap=2;THREE.FrontSide=0;THREE.BackSide=1;THREE.DoubleSide=2;THREE.NoShading=0;THREE.FlatShading=1;THREE.SmoothShading=2;THREE.NoColors=0;THREE.FaceColors=1;THREE.VertexColors=2;THREE.NoBlending=0;
THREE.NormalBlending=1;THREE.AdditiveBlending=2;THREE.SubtractiveBlending=3;THREE.MultiplyBlending=4;THREE.CustomBlending=5;THREE.AddEquation=100;THREE.SubtractEquation=101;THREE.ReverseSubtractEquation=102;THREE.ZeroFactor=200;THREE.OneFactor=201;THREE.SrcColorFactor=202;THREE.OneMinusSrcColorFactor=203;THREE.SrcAlphaFactor=204;THREE.OneMinusSrcAlphaFactor=205;THREE.DstAlphaFactor=206;THREE.OneMinusDstAlphaFactor=207;THREE.DstColorFactor=208;THREE.OneMinusDstColorFactor=209;
THREE.SrcAlphaSaturateFactor=210;THREE.MultiplyOperation=0;THREE.MixOperation=1;THREE.AddOperation=2;THREE.UVMapping=function(){};THREE.CubeReflectionMapping=function(){};THREE.CubeRefractionMapping=function(){};THREE.SphericalReflectionMapping=function(){};THREE.SphericalRefractionMapping=function(){};THREE.RepeatWrapping=1E3;THREE.ClampToEdgeWrapping=1001;THREE.MirroredRepeatWrapping=1002;THREE.NearestFilter=1003;THREE.NearestMipMapNearestFilter=1004;THREE.NearestMipMapLinearFilter=1005;
THREE.LinearFilter=1006;THREE.LinearMipMapNearestFilter=1007;THREE.LinearMipMapLinearFilter=1008;THREE.UnsignedByteType=1009;THREE.ByteType=1010;THREE.ShortType=1011;THREE.UnsignedShortType=1012;THREE.IntType=1013;THREE.UnsignedIntType=1014;THREE.FloatType=1015;THREE.UnsignedShort4444Type=1016;THREE.UnsignedShort5551Type=1017;THREE.UnsignedShort565Type=1018;THREE.AlphaFormat=1019;THREE.RGBFormat=1020;THREE.RGBAFormat=1021;THREE.LuminanceFormat=1022;THREE.LuminanceAlphaFormat=1023;
THREE.RGB_S3TC_DXT1_Format=2001;THREE.RGBA_S3TC_DXT1_Format=2002;THREE.RGBA_S3TC_DXT3_Format=2003;THREE.RGBA_S3TC_DXT5_Format=2004;THREE.Color=function(a){void 0!==a&&this.set(a);return this};
THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,set:function(a){a instanceof THREE.Color?this.copy(a):"number"===typeof a?this.setHex(a):"string"===typeof a&&this.setStyle(a);return this},setHex:function(a){a=Math.floor(a);this.r=(a>>16&255)/255;this.g=(a>>8&255)/255;this.b=(a&255)/255;return this},setRGB:function(a,b,c){this.r=a;this.g=b;this.b=c;return this},setHSL:function(a,b,c){if(0===b)this.r=this.g=this.b=c;else{var d=function(a,b,c){0>c&&(c+=1);1<c&&(c-=1);return c<1/6?a+6*(b-a)*
c:0.5>c?b:c<2/3?a+6*(b-a)*(2/3-c):a},b=0.5>=c?c*(1+b):c+b-c*b,c=2*c-b;this.r=d(c,b,a+1/3);this.g=d(c,b,a);this.b=d(c,b,a-1/3)}return this},setStyle:function(a){if(/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(a))return a=/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(a),this.r=Math.min(255,parseInt(a[1],10))/255,this.g=Math.min(255,parseInt(a[2],10))/255,this.b=Math.min(255,parseInt(a[3],10))/255,this;if(/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(a))return a=/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(a),this.r=
Math.min(100,parseInt(a[1],10))/100,this.g=Math.min(100,parseInt(a[2],10))/100,this.b=Math.min(100,parseInt(a[3],10))/100,this;if(/^\#([0-9a-f]{6})$/i.test(a))return a=/^\#([0-9a-f]{6})$/i.exec(a),this.setHex(parseInt(a[1],16)),this;if(/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(a))return a=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(a),this.setHex(parseInt(a[1]+a[1]+a[2]+a[2]+a[3]+a[3],16)),this;if(/^(\w+)$/i.test(a))return this.setHex(THREE.ColorKeywords[a]),this},copy:function(a){this.r=a.r;this.g=
a.g;this.b=a.b;return this},copyGammaToLinear:function(a){this.r=a.r*a.r;this.g=a.g*a.g;this.b=a.b*a.b;return this},copyLinearToGamma:function(a){this.r=Math.sqrt(a.r);this.g=Math.sqrt(a.g);this.b=Math.sqrt(a.b);return this},convertGammaToLinear:function(){var a=this.r,b=this.g,c=this.b;this.r=a*a;this.g=b*b;this.b=c*c;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this},getHex:function(){return 255*this.r<<16^255*this.g<<
8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(a){var a=a||{h:0,s:0,l:0},b=this.r,c=this.g,d=this.b,e=Math.max(b,c,d),f=Math.min(b,c,d),h,g=(f+e)/2;if(f===e)f=h=0;else{var i=e-f,f=0.5>=g?i/(e+f):i/(2-e-f);switch(e){case b:h=(c-d)/i+(c<d?6:0);break;case c:h=(d-b)/i+2;break;case d:h=(b-c)/i+4}h/=6}a.h=h;a.s=f;a.l=g;return a},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(a,
b,c){var d=this.getHSL();d.h+=a;d.s+=b;d.l+=c;this.setHSL(d.h,d.s,d.l);return this},add:function(a){this.r+=a.r;this.g+=a.g;this.b+=a.b;return this},addColors:function(a,b){this.r=a.r+b.r;this.g=a.g+b.g;this.b=a.b+b.b;return this},addScalar:function(a){this.r+=a;this.g+=a;this.b+=a;return this},multiply:function(a){this.r*=a.r;this.g*=a.g;this.b*=a.b;return this},multiplyScalar:function(a){this.r*=a;this.g*=a;this.b*=a;return this},lerp:function(a,b){this.r+=(a.r-this.r)*b;this.g+=(a.g-this.g)*b;
this.b+=(a.b-this.b)*b;return this},equals:function(a){return a.r===this.r&&a.g===this.g&&a.b===this.b},fromArray:function(a){this.r=a[0];this.g=a[1];this.b=a[2];return this},toArray:function(){return[this.r,this.g,this.b]},clone:function(){return(new THREE.Color).setRGB(this.r,this.g,this.b)}};
THREE.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,
darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,
grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,
lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,
palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,
tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};THREE.Quaternion=function(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._w=void 0!==d?d:1};
THREE.Quaternion.prototype={constructor:THREE.Quaternion,_x:0,_y:0,_z:0,_w:0,_euler:void 0,_updateEuler:function(){void 0!==this._euler&&this._euler.setFromQuaternion(this,void 0,!1)},get x(){return this._x},set x(a){this._x=a;this._updateEuler()},get y(){return this._y},set y(a){this._y=a;this._updateEuler()},get z(){return this._z},set z(a){this._z=a;this._updateEuler()},get w(){return this._w},set w(a){this._w=a;this._updateEuler()},set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._w=d;
this._updateEuler();return this},copy:function(a){this._x=a._x;this._y=a._y;this._z=a._z;this._w=a._w;this._updateEuler();return this},setFromEuler:function(a,b){if(!1===a instanceof THREE.Euler)throw Error("ERROR: Quaternion's .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code.");var c=Math.cos(a._x/2),d=Math.cos(a._y/2),e=Math.cos(a._z/2),f=Math.sin(a._x/2),h=Math.sin(a._y/2),g=Math.sin(a._z/2);"XYZ"===a.order?(this._x=f*d*e+c*h*g,this._y=c*h*
e-f*d*g,this._z=c*d*g+f*h*e,this._w=c*d*e-f*h*g):"YXZ"===a.order?(this._x=f*d*e+c*h*g,this._y=c*h*e-f*d*g,this._z=c*d*g-f*h*e,this._w=c*d*e+f*h*g):"ZXY"===a.order?(this._x=f*d*e-c*h*g,this._y=c*h*e+f*d*g,this._z=c*d*g+f*h*e,this._w=c*d*e-f*h*g):"ZYX"===a.order?(this._x=f*d*e-c*h*g,this._y=c*h*e+f*d*g,this._z=c*d*g-f*h*e,this._w=c*d*e+f*h*g):"YZX"===a.order?(this._x=f*d*e+c*h*g,this._y=c*h*e+f*d*g,this._z=c*d*g-f*h*e,this._w=c*d*e-f*h*g):"XZY"===a.order&&(this._x=f*d*e-c*h*g,this._y=c*h*e-f*d*g,this._z=
c*d*g+f*h*e,this._w=c*d*e+f*h*g);!1!==b&&this._updateEuler();return this},setFromAxisAngle:function(a,b){var c=b/2,d=Math.sin(c);this._x=a.x*d;this._y=a.y*d;this._z=a.z*d;this._w=Math.cos(c);this._updateEuler();return this},setFromRotationMatrix:function(a){var b=a.elements,c=b[0],a=b[4],d=b[8],e=b[1],f=b[5],h=b[9],g=b[2],i=b[6],b=b[10],k=c+f+b;0<k?(c=0.5/Math.sqrt(k+1),this._w=0.25/c,this._x=(i-h)*c,this._y=(d-g)*c,this._z=(e-a)*c):c>f&&c>b?(c=2*Math.sqrt(1+c-f-b),this._w=(i-h)/c,this._x=0.25*c,
this._y=(a+e)/c,this._z=(d+g)/c):f>b?(c=2*Math.sqrt(1+f-c-b),this._w=(d-g)/c,this._x=(a+e)/c,this._y=0.25*c,this._z=(h+i)/c):(c=2*Math.sqrt(1+b-c-f),this._w=(e-a)/c,this._x=(d+g)/c,this._y=(h+i)/c,this._z=0.25*c);this._updateEuler();return this},inverse:function(){this.conjugate().normalize();return this},conjugate:function(){this._x*=-1;this._y*=-1;this._z*=-1;this._updateEuler();return this},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*
this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a);return this},multiply:function(a,b){return void 0!==b?(console.warn("DEPRECATED: Quaternion's .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,b)):this.multiplyQuaternions(this,a)},multiplyQuaternions:function(a,b){var c=a._x,d=a._y,e=a._z,f=
a._w,h=b._x,g=b._y,i=b._z,k=b._w;this._x=c*k+f*h+d*i-e*g;this._y=d*k+f*g+e*h-c*i;this._z=e*k+f*i+c*g-d*h;this._w=f*k-c*h-d*g-e*i;this._updateEuler();return this},multiplyVector3:function(a){console.warn("DEPRECATED: Quaternion's .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return a.applyQuaternion(this)},slerp:function(a,b){var c=this._x,d=this._y,e=this._z,f=this._w,h=f*a._w+c*a._x+d*a._y+e*a._z;0>h?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=
-a._z,h=-h):this.copy(a);if(1<=h)return this._w=f,this._x=c,this._y=d,this._z=e,this;var g=Math.acos(h),i=Math.sqrt(1-h*h);if(0.001>Math.abs(i))return this._w=0.5*(f+this._w),this._x=0.5*(c+this._x),this._y=0.5*(d+this._y),this._z=0.5*(e+this._z),this;h=Math.sin((1-b)*g)/i;g=Math.sin(b*g)/i;this._w=f*h+this._w*g;this._x=c*h+this._x*g;this._y=d*h+this._y*g;this._z=e*h+this._z*g;this._updateEuler();return this},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},
fromArray:function(a){this._x=a[0];this._y=a[1];this._z=a[2];this._w=a[3];this._updateEuler();return this},toArray:function(){return[this._x,this._y,this._z,this._w]},clone:function(){return new THREE.Quaternion(this._x,this._y,this._z,this._w)}};THREE.Quaternion.slerp=function(a,b,c,d){return c.copy(a).slerp(b,d)};THREE.Vector2=function(a,b){this.x=a||0;this.y=b||0};
THREE.Vector2.prototype={constructor:THREE.Vector2,set:function(a,b){this.x=a;this.y=b;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+a);}},copy:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,
b){if(void 0!==b)return console.warn("DEPRECATED: Vector2's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},addScalar:function(a){this.x+=a;this.y+=a;return this},sub:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector2's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=
a.y;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a):this.y=this.x=0;return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);
return this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,a=this.y-a.y;return b*b+a*a},setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/
b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},equals:function(a){return a.x===this.x&&a.y===this.y},fromArray:function(a){this.x=a[0];this.y=a[1];return this},toArray:function(){return[this.x,this.y]},clone:function(){return new THREE.Vector2(this.x,this.y)}};THREE.Vector3=function(a,b,c){this.x=a||0;this.y=b||0;this.z=c||0};
THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(a,b,c){this.x=a;this.y=b;this.z=c;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+
a);}},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector3's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},sub:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector3's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},multiply:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector3's .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,b);this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;return this},multiplyVectors:function(a,b){this.x=a.x*
b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this},applyMatrix3:function(a){var b=this.x,c=this.y,d=this.z,a=a.elements;this.x=a[0]*b+a[3]*c+a[6]*d;this.y=a[1]*b+a[4]*c+a[7]*d;this.z=a[2]*b+a[5]*c+a[8]*d;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z,a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12];this.y=a[1]*b+a[5]*c+a[9]*d+a[13];this.z=a[2]*b+a[6]*c+a[10]*d+a[14];return this},applyProjection:function(a){var b=this.x,c=this.y,d=this.z,a=a.elements,e=1/(a[3]*b+a[7]*c+a[11]*d+a[15]);
this.x=(a[0]*b+a[4]*c+a[8]*d+a[12])*e;this.y=(a[1]*b+a[5]*c+a[9]*d+a[13])*e;this.z=(a[2]*b+a[6]*c+a[10]*d+a[14])*e;return this},applyQuaternion:function(a){var b=this.x,c=this.y,d=this.z,e=a.x,f=a.y,h=a.z,a=a.w,g=a*b+f*d-h*c,i=a*c+h*b-e*d,k=a*d+e*c-f*b,b=-e*b-f*c-h*d;this.x=g*a+b*-e+i*-h-k*-f;this.y=i*a+b*-f+k*-e-g*-h;this.z=k*a+b*-h+g*-f-i*-e;return this},transformDirection:function(a){var b=this.x,c=this.y,d=this.z,a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d;this.y=a[1]*b+a[5]*c+a[9]*d;this.z=a[2]*
b+a[6]*c+a[10]*d;this.normalize();return this},divide:function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a,this.z*=a):this.z=this.y=this.x=0;return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);this.z>a.z&&(this.z=a.z);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);this.z<a.z&&(this.z=a.z);return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<
a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);this.z<a.z?this.z=a.z:this.z>b.z&&(this.z=b.z);return this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},
setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},cross:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector3's .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,b);var c=this.x,d=this.y,e=this.z;this.x=d*a.z-e*a.y;this.y=e*a.x-c*a.z;this.z=c*a.y-d*a.x;return this},crossVectors:function(a,b){var c=
a.x,d=a.y,e=a.z,f=b.x,h=b.y,g=b.z;this.x=d*g-e*h;this.y=e*f-c*g;this.z=c*h-d*f;return this},angleTo:function(a){a=this.dot(a)/(this.length()*a.length());return Math.acos(THREE.Math.clamp(a,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,c=this.y-a.y,a=this.z-a.z;return b*b+c*c+a*a},setEulerFromRotationMatrix:function(){console.error("REMOVED: Vector3's setEulerFromRotationMatrix has been removed in favor of Euler.setFromRotationMatrix(), please update your code.")},
setEulerFromQuaternion:function(){console.error("REMOVED: Vector3's setEulerFromQuaternion: has been removed in favor of Euler.setFromQuaternion(), please update your code.")},getPositionFromMatrix:function(a){console.warn("DEPRECATED: Vector3's .getPositionFromMatrix() has been renamed to .setFromMatrixPosition(). Please update your code.");return this.setFromMatrixPosition(a)},getScaleFromMatrix:function(a){console.warn("DEPRECATED: Vector3's .getScaleFromMatrix() has been renamed to .setFromMatrixScale(). Please update your code.");
return this.setFromMatrixScale(a)},getColumnFromMatrix:function(a,b){console.warn("DEPRECATED: Vector3's .getColumnFromMatrix() has been renamed to .setFromMatrixColumn(). Please update your code.");return this.setFromMatrixColumn(a,b)},setFromMatrixPosition:function(a){this.x=a.elements[12];this.y=a.elements[13];this.z=a.elements[14];return this},setFromMatrixScale:function(a){var b=this.set(a.elements[0],a.elements[1],a.elements[2]).length(),c=this.set(a.elements[4],a.elements[5],a.elements[6]).length(),
a=this.set(a.elements[8],a.elements[9],a.elements[10]).length();this.x=b;this.y=c;this.z=a;return this},setFromMatrixColumn:function(a,b){var c=4*a,d=b.elements;this.x=d[c];this.y=d[c+1];this.z=d[c+2];return this},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a){this.x=a[0];this.y=a[1];this.z=a[2];return this},toArray:function(){return[this.x,this.y,this.z]},clone:function(){return new THREE.Vector3(this.x,this.y,this.z)}};
THREE.extend(THREE.Vector3.prototype,{applyEuler:function(){var a=new THREE.Quaternion;return function(b){!1===b instanceof THREE.Euler&&console.error("ERROR: Vector3's .applyEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code.");this.applyQuaternion(a.setFromEuler(b));return this}}(),applyAxisAngle:function(){var a=new THREE.Quaternion;return function(b,c){this.applyQuaternion(a.setFromAxisAngle(b,c));return this}}(),projectOnVector:function(){var a=new THREE.Vector3;
return function(b){a.copy(b).normalize();b=this.dot(a);return this.copy(a).multiplyScalar(b)}}(),projectOnPlane:function(){var a=new THREE.Vector3;return function(b){a.copy(this).projectOnVector(b);return this.sub(a)}}(),reflect:function(){var a=new THREE.Vector3;return function(b){a.copy(this).projectOnVector(b).multiplyScalar(2);return this.subVectors(a,this)}}()});THREE.Vector4=function(a,b,c,d){this.x=a||0;this.y=b||0;this.z=c||0;this.w=void 0!==d?d:1};
THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.w=d;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setW:function(a){this.w=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;
case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+a);}},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?a.w:1;return this},add:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector4's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;this.w+=a;return this},
addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this},sub:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector4's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;this.w*=a;return this},
applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z,e=this.w,a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12]*e;this.y=a[1]*b+a[5]*c+a[9]*d+a[13]*e;this.z=a[2]*b+a[6]*c+a[10]*d+a[14]*e;this.w=a[3]*b+a[7]*c+a[11]*d+a[15]*e;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a,this.z*=a,this.w*=a):(this.z=this.y=this.x=0,this.w=1);return this},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var b=Math.sqrt(1-a.w*a.w);1E-4>b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,
this.y=a.y/b,this.z=a.z/b);return this},setAxisAngleFromRotationMatrix:function(a){var b,c,d,a=a.elements,e=a[0];d=a[4];var f=a[8],h=a[1],g=a[5],i=a[9];c=a[2];b=a[6];var k=a[10];if(0.01>Math.abs(d-h)&&0.01>Math.abs(f-c)&&0.01>Math.abs(i-b)){if(0.1>Math.abs(d+h)&&0.1>Math.abs(f+c)&&0.1>Math.abs(i+b)&&0.1>Math.abs(e+g+k-3))return this.set(1,0,0,0),this;a=Math.PI;e=(e+1)/2;g=(g+1)/2;k=(k+1)/2;d=(d+h)/4;f=(f+c)/4;i=(i+b)/4;e>g&&e>k?0.01>e?(b=0,d=c=0.707106781):(b=Math.sqrt(e),c=d/b,d=f/b):g>k?0.01>g?
(b=0.707106781,c=0,d=0.707106781):(c=Math.sqrt(g),b=d/c,d=i/c):0.01>k?(c=b=0.707106781,d=0):(d=Math.sqrt(k),b=f/d,c=i/d);this.set(b,c,d,a);return this}a=Math.sqrt((b-i)*(b-i)+(f-c)*(f-c)+(h-d)*(h-d));0.001>Math.abs(a)&&(a=1);this.x=(b-i)/a;this.y=(f-c)/a;this.z=(h-d)/a;this.w=Math.acos((e+g+k-1)/2);return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);this.z>a.z&&(this.z=a.z);this.w>a.w&&(this.w=a.w);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=
a.y);this.z<a.z&&(this.z=a.z);this.w<a.w&&(this.w=a.w);return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);this.z<a.z?this.z=a.z:this.z>b.z&&(this.z=b.z);this.w<a.w?this.w=a.w:this.w>b.w&&(this.w=b.w);return this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*
this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&
a.w===this.w},fromArray:function(a){this.x=a[0];this.y=a[1];this.z=a[2];this.w=a[3];return this},toArray:function(){return[this.x,this.y,this.z,this.w]},clone:function(){return new THREE.Vector4(this.x,this.y,this.z,this.w)}};THREE.Euler=function(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._order=d||THREE.Euler.DefaultOrder};THREE.Euler.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");THREE.Euler.DefaultOrder="XYZ";
THREE.Euler.prototype={constructor:THREE.Euler,_x:0,_y:0,_z:0,_order:THREE.Euler.DefaultOrder,_quaternion:void 0,_updateQuaternion:function(){void 0!==this._quaternion&&this._quaternion.setFromEuler(this,!1)},get x(){return this._x},set x(a){this._x=a;this._updateQuaternion()},get y(){return this._y},set y(a){this._y=a;this._updateQuaternion()},get z(){return this._z},set z(a){this._z=a;this._updateQuaternion()},get order(){return this._order},set order(a){this._order=a;this._updateQuaternion()},
set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._order=d||this._order;this._updateQuaternion();return this},copy:function(a){this._x=a._x;this._y=a._y;this._z=a._z;this._order=a._order;this._updateQuaternion();return this},setFromRotationMatrix:function(a,b){function c(a){return Math.min(Math.max(a,-1),1)}var d=a.elements,e=d[0],f=d[4],h=d[8],g=d[1],i=d[5],k=d[9],m=d[2],l=d[6],d=d[10],b=b||this._order;"XYZ"===b?(this._y=Math.asin(c(h)),0.99999>Math.abs(h)?(this._x=Math.atan2(-k,d),this._z=
Math.atan2(-f,e)):(this._x=Math.atan2(l,i),this._z=0)):"YXZ"===b?(this._x=Math.asin(-c(k)),0.99999>Math.abs(k)?(this._y=Math.atan2(h,d),this._z=Math.atan2(g,i)):(this._y=Math.atan2(-m,e),this._z=0)):"ZXY"===b?(this._x=Math.asin(c(l)),0.99999>Math.abs(l)?(this._y=Math.atan2(-m,d),this._z=Math.atan2(-f,i)):(this._y=0,this._z=Math.atan2(g,e))):"ZYX"===b?(this._y=Math.asin(-c(m)),0.99999>Math.abs(m)?(this._x=Math.atan2(l,d),this._z=Math.atan2(g,e)):(this._x=0,this._z=Math.atan2(-f,i))):"YZX"===b?(this._z=
Math.asin(c(g)),0.99999>Math.abs(g)?(this._x=Math.atan2(-k,i),this._y=Math.atan2(-m,e)):(this._x=0,this._y=Math.atan2(h,d))):"XZY"===b?(this._z=Math.asin(-c(f)),0.99999>Math.abs(f)?(this._x=Math.atan2(l,i),this._y=Math.atan2(h,e)):(this._x=Math.atan2(-k,d),this._y=0)):console.warn("WARNING: Euler.setFromRotationMatrix() given unsupported order: "+b);this._order=b;this._updateQuaternion();return this},setFromQuaternion:function(a,b,c){function d(a){return Math.min(Math.max(a,-1),1)}var e=a.x*a.x,f=
a.y*a.y,h=a.z*a.z,g=a.w*a.w,b=b||this._order;"XYZ"===b?(this._x=Math.atan2(2*(a.x*a.w-a.y*a.z),g-e-f+h),this._y=Math.asin(d(2*(a.x*a.z+a.y*a.w))),this._z=Math.atan2(2*(a.z*a.w-a.x*a.y),g+e-f-h)):"YXZ"===b?(this._x=Math.asin(d(2*(a.x*a.w-a.y*a.z))),this._y=Math.atan2(2*(a.x*a.z+a.y*a.w),g-e-f+h),this._z=Math.atan2(2*(a.x*a.y+a.z*a.w),g-e+f-h)):"ZXY"===b?(this._x=Math.asin(d(2*(a.x*a.w+a.y*a.z))),this._y=Math.atan2(2*(a.y*a.w-a.z*a.x),g-e-f+h),this._z=Math.atan2(2*(a.z*a.w-a.x*a.y),g-e+f-h)):"ZYX"===
b?(this._x=Math.atan2(2*(a.x*a.w+a.z*a.y),g-e-f+h),this._y=Math.asin(d(2*(a.y*a.w-a.x*a.z))),this._z=Math.atan2(2*(a.x*a.y+a.z*a.w),g+e-f-h)):"YZX"===b?(this._x=Math.atan2(2*(a.x*a.w-a.z*a.y),g-e+f-h),this._y=Math.atan2(2*(a.y*a.w-a.x*a.z),g+e-f-h),this._z=Math.asin(d(2*(a.x*a.y+a.z*a.w)))):"XZY"===b?(this._x=Math.atan2(2*(a.x*a.w+a.y*a.z),g-e+f-h),this._y=Math.atan2(2*(a.x*a.z+a.y*a.w),g+e-f-h),this._z=Math.asin(d(2*(a.z*a.w-a.x*a.y)))):console.warn("WARNING: Euler.setFromQuaternion() given unsupported order: "+
b);this._order=b;!1!==c&&this._updateQuaternion();return this},reorder:function(){var a=new THREE.Quaternion;return function(b){a.setFromEuler(this);this.setFromQuaternion(a,b)}}(),fromArray:function(a){this._x=a[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]);this._updateQuaternion();return this},toArray:function(){return[this._x,this._y,this._z,this._order]},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},clone:function(){return new THREE.Euler(this._x,
this._y,this._z,this._order)}};THREE.Line3=function(a,b){this.start=void 0!==a?a:new THREE.Vector3;this.end=void 0!==b?b:new THREE.Vector3};
THREE.Line3.prototype={constructor:THREE.Line3,set:function(a,b){this.start.copy(a);this.end.copy(b);return this},copy:function(a){this.start.copy(a.start);this.end.copy(a.end);return this},center:function(a){return(a||new THREE.Vector3).addVectors(this.start,this.end).multiplyScalar(0.5)},delta:function(a){return(a||new THREE.Vector3).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(a,
b){var c=b||new THREE.Vector3;return this.delta(c).multiplyScalar(a).add(this.start)},closestPointToPointParameter:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,d){a.subVectors(c,this.start);b.subVectors(this.end,this.start);var e=b.dot(b),e=b.dot(a)/e;d&&(e=THREE.Math.clamp(e,0,1));return e}}(),closestPointToPoint:function(a,b,c){a=this.closestPointToPointParameter(a,b);c=c||new THREE.Vector3;return this.delta(c).multiplyScalar(a).add(this.start)},applyMatrix4:function(a){this.start.applyMatrix4(a);
this.end.applyMatrix4(a);return this},equals:function(a){return a.start.equals(this.start)&&a.end.equals(this.end)},clone:function(){return(new THREE.Line3).copy(this)}};THREE.Box2=function(a,b){this.min=void 0!==a?a:new THREE.Vector2(Infinity,Infinity);this.max=void 0!==b?b:new THREE.Vector2(-Infinity,-Infinity)};
THREE.Box2.prototype={constructor:THREE.Box2,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromPoints:function(a){if(0<a.length){var b=a[0];this.min.copy(b);this.max.copy(b);for(var c=1,d=a.length;c<d;c++)b=a[c],b.x<this.min.x?this.min.x=b.x:b.x>this.max.x&&(this.max.x=b.x),b.y<this.min.y?this.min.y=b.y:b.y>this.max.y&&(this.max.y=b.y)}else this.makeEmpty();return this},setFromCenterAndSize:function(){var a=new THREE.Vector2;return function(b,c){var d=a.copy(c).multiplyScalar(0.5);
this.min.copy(b).sub(d);this.max.copy(b).add(d);return this}}(),copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(a){return(a||new THREE.Vector2).addVectors(this.min,this.max).multiplyScalar(0.5)},size:function(a){return(a||new THREE.Vector2).subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);
this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y?!0:!1},getParameter:function(a,b){return(b||new THREE.Vector2).set((a.x-this.min.x)/(this.max.x-this.min.x),
(a.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y?!1:!0},clampPoint:function(a,b){return(b||new THREE.Vector2).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new THREE.Vector2;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);
return this},translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)},clone:function(){return(new THREE.Box2).copy(this)}};THREE.Box3=function(a,b){this.min=void 0!==a?a:new THREE.Vector3(Infinity,Infinity,Infinity);this.max=void 0!==b?b:new THREE.Vector3(-Infinity,-Infinity,-Infinity)};
THREE.Box3.prototype={constructor:THREE.Box3,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},addPoint:function(a){a.x<this.min.x?this.min.x=a.x:a.x>this.max.x&&(this.max.x=a.x);a.y<this.min.y?this.min.y=a.y:a.y>this.max.y&&(this.max.y=a.y);a.z<this.min.z?this.min.z=a.z:a.z>this.max.z&&(this.max.z=a.z)},setFromPoints:function(a){if(0<a.length){var b=a[0];this.min.copy(b);this.max.copy(b);for(var b=1,c=a.length;b<c;b++)this.addPoint(a[b])}else this.makeEmpty();return this},setFromCenterAndSize:function(){var a=
new THREE.Vector3;return function(b,c){var d=a.copy(c).multiplyScalar(0.5);this.min.copy(b).sub(d);this.max.copy(b).add(d);return this}}(),setFromObject:function(){var a=new THREE.Vector3;return function(b){var c=this;b.updateMatrixWorld(!0);this.makeEmpty();b.traverse(function(b){if(void 0!==b.geometry&&void 0!==b.geometry.vertices)for(var e=b.geometry.vertices,f=0,h=e.length;f<h;f++)a.copy(e[f]),a.applyMatrix4(b.matrixWorld),c.expandByPoint(a)});return this}}(),copy:function(a){this.min.copy(a.min);
this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(a){return(a||new THREE.Vector3).addVectors(this.min,this.max).multiplyScalar(0.5)},size:function(a){return(a||new THREE.Vector3).subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);
this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z?!0:!1},getParameter:function(a,b){return(b||new THREE.Vector3).set((a.x-this.min.x)/(this.max.x-
this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z?!1:!0},clampPoint:function(a,b){return(b||new THREE.Vector3).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new THREE.Vector3;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),getBoundingSphere:function(){var a=
new THREE.Vector3;return function(b){b=b||new THREE.Sphere;b.center=this.center();b.radius=0.5*this.size(a).length();return b}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},applyMatrix4:function(){var a=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];return function(b){a[0].set(this.min.x,this.min.y,
this.min.z).applyMatrix4(b);a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(b);a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(b);a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(b);a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(b);a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(b);a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(b);a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(b);this.makeEmpty();this.setFromPoints(a);return this}}(),translate:function(a){this.min.add(a);
this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)},clone:function(){return(new THREE.Box3).copy(this)}};THREE.Matrix3=function(a,b,c,d,e,f,h,g,i){this.elements=new Float32Array(9);this.set(void 0!==a?a:1,b||0,c||0,d||0,void 0!==e?e:1,f||0,h||0,g||0,void 0!==i?i:1)};
THREE.Matrix3.prototype={constructor:THREE.Matrix3,set:function(a,b,c,d,e,f,h,g,i){var k=this.elements;k[0]=a;k[3]=b;k[6]=c;k[1]=d;k[4]=e;k[7]=f;k[2]=h;k[5]=g;k[8]=i;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},copy:function(a){a=a.elements;this.set(a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8]);return this},multiplyVector3:function(a){console.warn("DEPRECATED: Matrix3's .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return a.applyMatrix3(this)},
multiplyVector3Array:function(){var a=new THREE.Vector3;return function(b){for(var c=0,d=b.length;c<d;c+=3)a.x=b[c],a.y=b[c+1],a.z=b[c+2],a.applyMatrix3(this),b[c]=a.x,b[c+1]=a.y,b[c+2]=a.z;return b}}(),multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[3]*=a;b[6]*=a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=a;return this},determinant:function(){var a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],h=a[5],g=a[6],i=a[7],a=a[8];return b*f*a-b*h*i-c*e*a+c*h*g+d*e*i-d*f*g},getInverse:function(a,
b){var c=a.elements,d=this.elements;d[0]=c[10]*c[5]-c[6]*c[9];d[1]=-c[10]*c[1]+c[2]*c[9];d[2]=c[6]*c[1]-c[2]*c[5];d[3]=-c[10]*c[4]+c[6]*c[8];d[4]=c[10]*c[0]-c[2]*c[8];d[5]=-c[6]*c[0]+c[2]*c[4];d[6]=c[9]*c[4]-c[5]*c[8];d[7]=-c[9]*c[0]+c[1]*c[8];d[8]=c[5]*c[0]-c[1]*c[4];c=c[0]*d[0]+c[1]*d[3]+c[2]*d[6];if(0===c){if(b)throw Error("Matrix3.getInverse(): can't invert matrix, determinant is 0");console.warn("Matrix3.getInverse(): can't invert matrix, determinant is 0");this.identity();return this}this.multiplyScalar(1/
c);return this},transpose:function(){var a,b=this.elements;a=b[1];b[1]=b[3];b[3]=a;a=b[2];b[2]=b[6];b[6]=a;a=b[5];b[5]=b[7];b[7]=a;return this},getNormalMatrix:function(a){this.getInverse(a).transpose();return this},transposeIntoArray:function(a){var b=this.elements;a[0]=b[0];a[1]=b[3];a[2]=b[6];a[3]=b[1];a[4]=b[4];a[5]=b[7];a[6]=b[2];a[7]=b[5];a[8]=b[8];return this},clone:function(){var a=this.elements;return new THREE.Matrix3(a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8])}};THREE.Matrix4=function(a,b,c,d,e,f,h,g,i,k,m,l,p,t,s,q){var n=this.elements=new Float32Array(16);n[0]=void 0!==a?a:1;n[4]=b||0;n[8]=c||0;n[12]=d||0;n[1]=e||0;n[5]=void 0!==f?f:1;n[9]=h||0;n[13]=g||0;n[2]=i||0;n[6]=k||0;n[10]=void 0!==m?m:1;n[14]=l||0;n[3]=p||0;n[7]=t||0;n[11]=s||0;n[15]=void 0!==q?q:1};
THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(a,b,c,d,e,f,h,g,i,k,m,l,p,t,s,q){var n=this.elements;n[0]=a;n[4]=b;n[8]=c;n[12]=d;n[1]=e;n[5]=f;n[9]=h;n[13]=g;n[2]=i;n[6]=k;n[10]=m;n[14]=l;n[3]=p;n[7]=t;n[11]=s;n[15]=q;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},copy:function(a){this.elements.set(a.elements);return this},extractPosition:function(a){console.warn("DEPRECATED: Matrix4's .extractPosition() has been renamed to .copyPosition().");
return this.copyPosition(a)},copyPosition:function(a){var b=this.elements,a=a.elements;b[12]=a[12];b[13]=a[13];b[14]=a[14];return this},extractRotation:function(){var a=new THREE.Vector3;return function(b){var c=this.elements,b=b.elements,d=1/a.set(b[0],b[1],b[2]).length(),e=1/a.set(b[4],b[5],b[6]).length(),f=1/a.set(b[8],b[9],b[10]).length();c[0]=b[0]*d;c[1]=b[1]*d;c[2]=b[2]*d;c[4]=b[4]*e;c[5]=b[5]*e;c[6]=b[6]*e;c[8]=b[8]*f;c[9]=b[9]*f;c[10]=b[10]*f;return this}}(),makeRotationFromEuler:function(a){!1===
a instanceof THREE.Euler&&console.error("ERROR: Matrix's .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code.");var b=this.elements,c=a.x,d=a.y,e=a.z,f=Math.cos(c),c=Math.sin(c),h=Math.cos(d),d=Math.sin(d),g=Math.cos(e),e=Math.sin(e);if("XYZ"===a.order){var a=f*g,i=f*e,k=c*g,m=c*e;b[0]=h*g;b[4]=-h*e;b[8]=d;b[1]=i+k*d;b[5]=a-m*d;b[9]=-c*h;b[2]=m-a*d;b[6]=k+i*d;b[10]=f*h}else"YXZ"===a.order?(a=h*g,i=h*e,k=d*g,m=d*e,b[0]=a+m*c,b[4]=k*c-i,b[8]=
f*d,b[1]=f*e,b[5]=f*g,b[9]=-c,b[2]=i*c-k,b[6]=m+a*c,b[10]=f*h):"ZXY"===a.order?(a=h*g,i=h*e,k=d*g,m=d*e,b[0]=a-m*c,b[4]=-f*e,b[8]=k+i*c,b[1]=i+k*c,b[5]=f*g,b[9]=m-a*c,b[2]=-f*d,b[6]=c,b[10]=f*h):"ZYX"===a.order?(a=f*g,i=f*e,k=c*g,m=c*e,b[0]=h*g,b[4]=k*d-i,b[8]=a*d+m,b[1]=h*e,b[5]=m*d+a,b[9]=i*d-k,b[2]=-d,b[6]=c*h,b[10]=f*h):"YZX"===a.order?(a=f*h,i=f*d,k=c*h,m=c*d,b[0]=h*g,b[4]=m-a*e,b[8]=k*e+i,b[1]=e,b[5]=f*g,b[9]=-c*g,b[2]=-d*g,b[6]=i*e+k,b[10]=a-m*e):"XZY"===a.order&&(a=f*h,i=f*d,k=c*h,m=c*d,b[0]=
h*g,b[4]=-e,b[8]=d*g,b[1]=a*e+m,b[5]=f*g,b[9]=i*e-k,b[2]=k*e-i,b[6]=c*g,b[10]=m*e+a);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},setRotationFromQuaternion:function(a){console.warn("DEPRECATED: Matrix4's .setRotationFromQuaternion() has been deprecated in favor of makeRotationFromQuaternion.  Please update your code.");return this.makeRotationFromQuaternion(a)},makeRotationFromQuaternion:function(a){var b=this.elements,c=a.x,d=a.y,e=a.z,f=a.w,h=c+c,g=d+d,i=e+e,a=c*h,k=c*g,c=
c*i,m=d*g,d=d*i,e=e*i,h=f*h,g=f*g,f=f*i;b[0]=1-(m+e);b[4]=k-f;b[8]=c+g;b[1]=k+f;b[5]=1-(a+e);b[9]=d-h;b[2]=c-g;b[6]=d+h;b[10]=1-(a+m);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},lookAt:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(d,e,f){var h=this.elements;c.subVectors(d,e).normalize();0===c.length()&&(c.z=1);a.crossVectors(f,c).normalize();0===a.length()&&(c.x+=1E-4,a.crossVectors(f,c).normalize());b.crossVectors(c,a);h[0]=a.x;
h[4]=b.x;h[8]=c.x;h[1]=a.y;h[5]=b.y;h[9]=c.y;h[2]=a.z;h[6]=b.z;h[10]=c.z;return this}}(),multiply:function(a,b){return void 0!==b?(console.warn("DEPRECATED: Matrix4's .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,b)):this.multiplyMatrices(this,a)},multiplyMatrices:function(a,b){var c=a.elements,d=b.elements,e=this.elements,f=c[0],h=c[4],g=c[8],i=c[12],k=c[1],m=c[5],l=c[9],p=c[13],t=c[2],s=c[6],q=c[10],n=c[14],u=c[3],r=c[7],v=c[11],c=c[15],
z=d[0],G=d[4],w=d[8],y=d[12],E=d[1],A=d[5],K=d[9],D=d[13],F=d[2],O=d[6],x=d[10],I=d[14],B=d[3],M=d[7],J=d[11],d=d[15];e[0]=f*z+h*E+g*F+i*B;e[4]=f*G+h*A+g*O+i*M;e[8]=f*w+h*K+g*x+i*J;e[12]=f*y+h*D+g*I+i*d;e[1]=k*z+m*E+l*F+p*B;e[5]=k*G+m*A+l*O+p*M;e[9]=k*w+m*K+l*x+p*J;e[13]=k*y+m*D+l*I+p*d;e[2]=t*z+s*E+q*F+n*B;e[6]=t*G+s*A+q*O+n*M;e[10]=t*w+s*K+q*x+n*J;e[14]=t*y+s*D+q*I+n*d;e[3]=u*z+r*E+v*F+c*B;e[7]=u*G+r*A+v*O+c*M;e[11]=u*w+r*K+v*x+c*J;e[15]=u*y+r*D+v*I+c*d;return this},multiplyToArray:function(a,b,
c){var d=this.elements;this.multiplyMatrices(a,b);c[0]=d[0];c[1]=d[1];c[2]=d[2];c[3]=d[3];c[4]=d[4];c[5]=d[5];c[6]=d[6];c[7]=d[7];c[8]=d[8];c[9]=d[9];c[10]=d[10];c[11]=d[11];c[12]=d[12];c[13]=d[13];c[14]=d[14];c[15]=d[15];return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},multiplyVector3:function(a){console.warn("DEPRECATED: Matrix4's .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.");
return a.applyProjection(this)},multiplyVector4:function(a){console.warn("DEPRECATED: Matrix4's .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},multiplyVector3Array:function(){var a=new THREE.Vector3;return function(b){for(var c=0,d=b.length;c<d;c+=3)a.x=b[c],a.y=b[c+1],a.z=b[c+2],a.applyProjection(this),b[c]=a.x,b[c+1]=a.y,b[c+2]=a.z;return b}}(),rotateAxis:function(a){console.warn("DEPRECATED: Matrix4's .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");
a.transformDirection(this)},crossVector:function(a){console.warn("DEPRECATED: Matrix4's .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},determinant:function(){var a=this.elements,b=a[0],c=a[4],d=a[8],e=a[12],f=a[1],h=a[5],g=a[9],i=a[13],k=a[2],m=a[6],l=a[10],p=a[14];return a[3]*(+e*g*m-d*i*m-e*h*l+c*i*l+d*h*p-c*g*p)+a[7]*(+b*g*p-b*i*l+e*f*l-d*f*p+d*i*k-e*g*k)+a[11]*(+b*i*m-b*h*p-e*f*m+c*f*p+e*h*k-c*i*k)+a[15]*(-d*h*k-b*g*m+b*h*l+d*f*m-c*f*
l+c*g*k)},transpose:function(){var a=this.elements,b;b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return this},flattenToArray:function(a){var b=this.elements;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a},flattenToArrayOffset:function(a,b){var c=this.elements;
a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];a[b+9]=c[9];a[b+10]=c[10];a[b+11]=c[11];a[b+12]=c[12];a[b+13]=c[13];a[b+14]=c[14];a[b+15]=c[15];return a},getPosition:function(){var a=new THREE.Vector3;return function(){console.warn("DEPRECATED: Matrix4's .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var b=this.elements;return a.set(b[12],b[13],b[14])}}(),setPosition:function(a){var b=this.elements;
b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},getInverse:function(a,b){var c=this.elements,d=a.elements,e=d[0],f=d[4],h=d[8],g=d[12],i=d[1],k=d[5],m=d[9],l=d[13],p=d[2],t=d[6],s=d[10],q=d[14],n=d[3],u=d[7],r=d[11],d=d[15];c[0]=m*q*u-l*s*u+l*t*r-k*q*r-m*t*d+k*s*d;c[4]=g*s*u-h*q*u-g*t*r+f*q*r+h*t*d-f*s*d;c[8]=h*l*u-g*m*u+g*k*r-f*l*r-h*k*d+f*m*d;c[12]=g*m*t-h*l*t-g*k*s+f*l*s+h*k*q-f*m*q;c[1]=l*s*n-m*q*n-l*p*r+i*q*r+m*p*d-i*s*d;c[5]=h*q*n-g*s*n+g*p*r-e*q*r-h*p*d+e*s*d;c[9]=g*m*n-h*l*n-g*i*r+e*l*r+h*i*d-
e*m*d;c[13]=h*l*p-g*m*p+g*i*s-e*l*s-h*i*q+e*m*q;c[2]=k*q*n-l*t*n+l*p*u-i*q*u-k*p*d+i*t*d;c[6]=g*t*n-f*q*n-g*p*u+e*q*u+f*p*d-e*t*d;c[10]=f*l*n-g*k*n+g*i*u-e*l*u-f*i*d+e*k*d;c[14]=g*k*p-f*l*p-g*i*t+e*l*t+f*i*q-e*k*q;c[3]=m*t*n-k*s*n-m*p*u+i*s*u+k*p*r-i*t*r;c[7]=f*s*n-h*t*n+h*p*u-e*s*u-f*p*r+e*t*r;c[11]=h*k*n-f*m*n-h*i*u+e*m*u+f*i*r-e*k*r;c[15]=f*m*p-h*k*p+h*i*t-e*m*t-f*i*s+e*k*s;c=e*c[0]+i*c[4]+p*c[8]+n*c[12];if(0==c){if(b)throw Error("Matrix4.getInverse(): can't invert matrix, determinant is 0");console.warn("Matrix4.getInverse(): can't invert matrix, determinant is 0");
this.identity();return this}this.multiplyScalar(1/c);return this},translate:function(){console.warn("DEPRECATED: Matrix4's .translate() has been removed.")},rotateX:function(){console.warn("DEPRECATED: Matrix4's .rotateX() has been removed.")},rotateY:function(){console.warn("DEPRECATED: Matrix4's .rotateY() has been removed.")},rotateZ:function(){console.warn("DEPRECATED: Matrix4's .rotateZ() has been removed.")},rotateByAxis:function(){console.warn("DEPRECATED: Matrix4's .rotateByAxis() has been removed.")},
scale:function(a){var b=this.elements,c=a.x,d=a.y,a=a.z;b[0]*=c;b[4]*=d;b[8]*=a;b[1]*=c;b[5]*=d;b[9]*=a;b[2]*=c;b[6]*=d;b[10]*=a;b[3]*=c;b[7]*=d;b[11]*=a;return this},getMaxScaleOnAxis:function(){var a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],Math.max(a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10])))},makeTranslation:function(a,b,c){this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1);return this},makeRotationX:function(a){var b=Math.cos(a),a=Math.sin(a);this.set(1,
0,0,0,0,b,-a,0,0,a,b,0,0,0,0,1);return this},makeRotationY:function(a){var b=Math.cos(a),a=Math.sin(a);this.set(b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1);return this},makeRotationZ:function(a){var b=Math.cos(a),a=Math.sin(a);this.set(b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(a,b){var c=Math.cos(b),d=Math.sin(b),e=1-c,f=a.x,h=a.y,g=a.z,i=e*f,k=e*h;this.set(i*f+c,i*h-d*g,i*g+d*h,0,i*h+d*g,k*h+c,k*g-d*f,0,i*g-d*h,k*g+d*f,e*g*g+c,0,0,0,0,1);return this},makeScale:function(a,b,c){this.set(a,
0,0,0,0,b,0,0,0,0,c,0,0,0,0,1);return this},compose:function(a,b,c){this.makeRotationFromQuaternion(b);this.scale(c);this.setPosition(a);return this},decompose:function(){var a=new THREE.Vector3,b=new THREE.Matrix4;return function(c,d,e){var f=this.elements,h=a.set(f[0],f[1],f[2]).length(),g=a.set(f[4],f[5],f[6]).length(),i=a.set(f[8],f[9],f[10]).length();c.x=f[12];c.y=f[13];c.z=f[14];b.elements.set(this.elements);var c=1/h,f=1/g,k=1/i;b.elements[0]*=c;b.elements[1]*=c;b.elements[2]*=c;b.elements[4]*=
f;b.elements[5]*=f;b.elements[6]*=f;b.elements[8]*=k;b.elements[9]*=k;b.elements[10]*=k;d.setFromRotationMatrix(b);e.x=h;e.y=g;e.z=i;return this}}(),makeFrustum:function(a,b,c,d,e,f){var h=this.elements;h[0]=2*e/(b-a);h[4]=0;h[8]=(b+a)/(b-a);h[12]=0;h[1]=0;h[5]=2*e/(d-c);h[9]=(d+c)/(d-c);h[13]=0;h[2]=0;h[6]=0;h[10]=-(f+e)/(f-e);h[14]=-2*f*e/(f-e);h[3]=0;h[7]=0;h[11]=-1;h[15]=0;return this},makePerspective:function(a,b,c,d){var a=c*Math.tan(THREE.Math.degToRad(0.5*a)),e=-a;return this.makeFrustum(e*
b,a*b,e,a,c,d)},makeOrthographic:function(a,b,c,d,e,f){var h=this.elements,g=b-a,i=c-d,k=f-e;h[0]=2/g;h[4]=0;h[8]=0;h[12]=-((b+a)/g);h[1]=0;h[5]=2/i;h[9]=0;h[13]=-((c+d)/i);h[2]=0;h[6]=0;h[10]=-2/k;h[14]=-((f+e)/k);h[3]=0;h[7]=0;h[11]=0;h[15]=1;return this},fromArray:function(a){this.elements.set(a);return this},toArray:function(){var a=this.elements;return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]]},clone:function(){var a=this.elements;return new THREE.Matrix4(a[0],
a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15])}};THREE.Ray=function(a,b){this.origin=void 0!==a?a:new THREE.Vector3;this.direction=void 0!==b?b:new THREE.Vector3};
THREE.Ray.prototype={constructor:THREE.Ray,set:function(a,b){this.origin.copy(a);this.direction.copy(b);return this},copy:function(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this},at:function(a,b){return(b||new THREE.Vector3).copy(this.direction).multiplyScalar(a).add(this.origin)},recast:function(){var a=new THREE.Vector3;return function(b){this.origin.copy(this.at(b,a));return this}}(),closestPointToPoint:function(a,b){var c=b||new THREE.Vector3;c.subVectors(a,this.origin);
var d=c.dot(this.direction);return 0>d?c.copy(this.origin):c.copy(this.direction).multiplyScalar(d).add(this.origin)},distanceToPoint:function(){var a=new THREE.Vector3;return function(b){var c=a.subVectors(b,this.origin).dot(this.direction);if(0>c)return this.origin.distanceTo(b);a.copy(this.direction).multiplyScalar(c).add(this.origin);return a.distanceTo(b)}}(),distanceSqToSegment:function(a,b,c,d){var e=a.clone().add(b).multiplyScalar(0.5),f=b.clone().sub(a).normalize(),h=0.5*a.distanceTo(b),
g=this.origin.clone().sub(e),a=-this.direction.dot(f),b=g.dot(this.direction),i=-g.dot(f),k=g.lengthSq(),m=Math.abs(1-a*a),l,p;0<=m?(g=a*i-b,l=a*b-i,p=h*m,0<=g?l>=-p?l<=p?(h=1/m,g*=h,l*=h,a=g*(g+a*l+2*b)+l*(a*g+l+2*i)+k):(l=h,g=Math.max(0,-(a*l+b)),a=-g*g+l*(l+2*i)+k):(l=-h,g=Math.max(0,-(a*l+b)),a=-g*g+l*(l+2*i)+k):l<=-p?(g=Math.max(0,-(-a*h+b)),l=0<g?-h:Math.min(Math.max(-h,-i),h),a=-g*g+l*(l+2*i)+k):l<=p?(g=0,l=Math.min(Math.max(-h,-i),h),a=l*(l+2*i)+k):(g=Math.max(0,-(a*h+b)),l=0<g?h:Math.min(Math.max(-h,
-i),h),a=-g*g+l*(l+2*i)+k)):(l=0<a?-h:h,g=Math.max(0,-(a*l+b)),a=-g*g+l*(l+2*i)+k);c&&c.copy(this.direction.clone().multiplyScalar(g).add(this.origin));d&&d.copy(f.clone().multiplyScalar(l).add(e));return a},isIntersectionSphere:function(a){return this.distanceToPoint(a.center)<=a.radius},isIntersectionPlane:function(a){var b=a.distanceToPoint(this.origin);return 0===b||0>a.normal.dot(this.direction)*b?!0:!1},distanceToPlane:function(a){var b=a.normal.dot(this.direction);if(0==b)return 0==a.distanceToPoint(this.origin)?
0:null;a=-(this.origin.dot(a.normal)+a.constant)/b;return 0<=a?a:null},intersectPlane:function(a,b){var c=this.distanceToPlane(a);return null===c?null:this.at(c,b)},isIntersectionBox:function(){var a=new THREE.Vector3;return function(b){return null!==this.intersectBox(b,a)}}(),intersectBox:function(a,b){var c,d,e,f,h;d=1/this.direction.x;f=1/this.direction.y;h=1/this.direction.z;var g=this.origin;0<=d?(c=(a.min.x-g.x)*d,d*=a.max.x-g.x):(c=(a.max.x-g.x)*d,d*=a.min.x-g.x);0<=f?(e=(a.min.y-g.y)*f,f*=
a.max.y-g.y):(e=(a.max.y-g.y)*f,f*=a.min.y-g.y);if(c>f||e>d)return null;if(e>c||c!==c)c=e;if(f<d||d!==d)d=f;0<=h?(e=(a.min.z-g.z)*h,h*=a.max.z-g.z):(e=(a.max.z-g.z)*h,h*=a.min.z-g.z);if(c>h||e>d)return null;if(e>c||c!==c)c=e;if(h<d||d!==d)d=h;return 0>d?null:this.at(0<=c?c:d,b)},intersectTriangle:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Vector3;return function(e,f,h,g,i){b.subVectors(f,e);c.subVectors(h,e);d.crossVectors(b,c);f=this.direction.dot(d);if(0<
f){if(g)return null;g=1}else if(0>f)g=-1,f=-f;else return null;a.subVectors(this.origin,e);e=g*this.direction.dot(c.crossVectors(a,c));if(0>e)return null;h=g*this.direction.dot(b.cross(a));if(0>h||e+h>f)return null;e=-g*a.dot(d);return 0>e?null:this.at(e/f,i)}}(),applyMatrix4:function(a){this.direction.add(this.origin).applyMatrix4(a);this.origin.applyMatrix4(a);this.direction.sub(this.origin);this.direction.normalize();return this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)},
clone:function(){return(new THREE.Ray).copy(this)}};THREE.Sphere=function(a,b){this.center=void 0!==a?a:new THREE.Vector3;this.radius=void 0!==b?b:0};
THREE.Sphere.prototype={constructor:THREE.Sphere,set:function(a,b){this.center.copy(a);this.radius=b;return this},setFromPoints:function(){var a=new THREE.Box3;return function(b,c){var d=this.center;void 0!==c?d.copy(c):a.setFromPoints(b).center(d);for(var e=0,f=0,h=b.length;f<h;f++)e=Math.max(e,d.distanceToSquared(b[f]));this.radius=Math.sqrt(e);return this}}(),copy:function(a){this.center.copy(a.center);this.radius=a.radius;return this},empty:function(){return 0>=this.radius},containsPoint:function(a){return a.distanceToSquared(this.center)<=
this.radius*this.radius},distanceToPoint:function(a){return a.distanceTo(this.center)-this.radius},intersectsSphere:function(a){var b=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=b*b},clampPoint:function(a,b){var c=this.center.distanceToSquared(a),d=b||new THREE.Vector3;d.copy(a);c>this.radius*this.radius&&(d.sub(this.center).normalize(),d.multiplyScalar(this.radius).add(this.center));return d},getBoundingBox:function(a){a=a||new THREE.Box3;a.set(this.center,this.center);a.expandByScalar(this.radius);
return a},applyMatrix4:function(a){this.center.applyMatrix4(a);this.radius*=a.getMaxScaleOnAxis();return this},translate:function(a){this.center.add(a);return this},equals:function(a){return a.center.equals(this.center)&&a.radius===this.radius},clone:function(){return(new THREE.Sphere).copy(this)}};THREE.Frustum=function(a,b,c,d,e,f){this.planes=[void 0!==a?a:new THREE.Plane,void 0!==b?b:new THREE.Plane,void 0!==c?c:new THREE.Plane,void 0!==d?d:new THREE.Plane,void 0!==e?e:new THREE.Plane,void 0!==f?f:new THREE.Plane]};
THREE.Frustum.prototype={constructor:THREE.Frustum,set:function(a,b,c,d,e,f){var h=this.planes;h[0].copy(a);h[1].copy(b);h[2].copy(c);h[3].copy(d);h[4].copy(e);h[5].copy(f);return this},copy:function(a){for(var b=this.planes,c=0;6>c;c++)b[c].copy(a.planes[c]);return this},setFromMatrix:function(a){var b=this.planes,c=a.elements,a=c[0],d=c[1],e=c[2],f=c[3],h=c[4],g=c[5],i=c[6],k=c[7],m=c[8],l=c[9],p=c[10],t=c[11],s=c[12],q=c[13],n=c[14],c=c[15];b[0].setComponents(f-a,k-h,t-m,c-s).normalize();b[1].setComponents(f+
a,k+h,t+m,c+s).normalize();b[2].setComponents(f+d,k+g,t+l,c+q).normalize();b[3].setComponents(f-d,k-g,t-l,c-q).normalize();b[4].setComponents(f-e,k-i,t-p,c-n).normalize();b[5].setComponents(f+e,k+i,t+p,c+n).normalize();return this},intersectsObject:function(){var a=new THREE.Sphere;return function(b){var c=b.geometry;null===c.boundingSphere&&c.computeBoundingSphere();a.copy(c.boundingSphere);a.applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),intersectsSphere:function(a){for(var b=this.planes,
c=a.center,a=-a.radius,d=0;6>d;d++)if(b[d].distanceToPoint(c)<a)return!1;return!0},intersectsBox:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c){for(var d=this.planes,e=0;6>e;e++){var f=d[e];a.x=0<f.normal.x?c.min.x:c.max.x;b.x=0<f.normal.x?c.max.x:c.min.x;a.y=0<f.normal.y?c.min.y:c.max.y;b.y=0<f.normal.y?c.max.y:c.min.y;a.z=0<f.normal.z?c.min.z:c.max.z;b.z=0<f.normal.z?c.max.z:c.min.z;var h=f.distanceToPoint(a),f=f.distanceToPoint(b);if(0>h&&0>f)return!1}return!0}}(),containsPoint:function(a){for(var b=
this.planes,c=0;6>c;c++)if(0>b[c].distanceToPoint(a))return!1;return!0},clone:function(){return(new THREE.Frustum).copy(this)}};THREE.Plane=function(a,b){this.normal=void 0!==a?a:new THREE.Vector3(1,0,0);this.constant=void 0!==b?b:0};
THREE.Plane.prototype={constructor:THREE.Plane,set:function(a,b){this.normal.copy(a);this.constant=b;return this},setComponents:function(a,b,c,d){this.normal.set(a,b,c);this.constant=d;return this},setFromNormalAndCoplanarPoint:function(a,b){this.normal.copy(a);this.constant=-b.dot(this.normal);return this},setFromCoplanarPoints:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,d,e){d=a.subVectors(e,d).cross(b.subVectors(c,d)).normalize();this.setFromNormalAndCoplanarPoint(d,
c);return this}}(),copy:function(a){this.normal.copy(a.normal);this.constant=a.constant;return this},normalize:function(){var a=1/this.normal.length();this.normal.multiplyScalar(a);this.constant*=a;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(a){return this.normal.dot(a)+this.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function(a,b){return this.orthoPoint(a,b).sub(a).negate()},orthoPoint:function(a,
b){var c=this.distanceToPoint(a);return(b||new THREE.Vector3).copy(this.normal).multiplyScalar(c)},isIntersectionLine:function(a){var b=this.distanceToPoint(a.start),a=this.distanceToPoint(a.end);return 0>b&&0<a||0>a&&0<b},intersectLine:function(){var a=new THREE.Vector3;return function(b,c){var d=c||new THREE.Vector3,e=b.delta(a),f=this.normal.dot(e);if(0==f){if(0==this.distanceToPoint(b.start))return d.copy(b.start)}else return f=-(b.start.dot(this.normal)+this.constant)/f,0>f||1<f?void 0:d.copy(e).multiplyScalar(f).add(b.start)}}(),
coplanarPoint:function(a){return(a||new THREE.Vector3).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Matrix3;return function(d,e){var f=e||c.getNormalMatrix(d),f=a.copy(this.normal).applyMatrix3(f),h=this.coplanarPoint(b);h.applyMatrix4(d);this.setFromNormalAndCoplanarPoint(f,h);return this}}(),translate:function(a){this.constant-=a.dot(this.normal);return this},equals:function(a){return a.normal.equals(this.normal)&&
a.constant==this.constant},clone:function(){return(new THREE.Plane).copy(this)}};THREE.Math={PI2:2*Math.PI,generateUUID:function(){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),b=Array(36),c=0,d;return function(){for(var e=0;36>e;e++)8==e||13==e||18==e||23==e?b[e]="-":14==e?b[e]="4":(2>=c&&(c=33554432+16777216*Math.random()|0),d=c&15,c>>=4,b[e]=a[19==e?d&3|8:d]);return b.join("")}}(),clamp:function(a,b,c){return a<b?b:a>c?c:a},clampBottom:function(a,b){return a<b?b:a},mapLinear:function(a,b,c,d,e){return d+(a-b)*(e-d)/(c-b)},smoothstep:function(a,
b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*(3-2*a)},smootherstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*a*(a*(6*a-15)+10)},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*(0.5-Math.random())},sign:function(a){return 0>a?-1:0<a?1:0},degToRad:function(){var a=Math.PI/
180;return function(b){return b*a}}(),radToDeg:function(){var a=180/Math.PI;return function(b){return b*a}}()};THREE.Spline=function(a){function b(a,b,c,d,e,f,h){a=0.5*(c-a);d=0.5*(d-b);return(2*(b-c)+a+d)*h+(-3*(b-c)-2*a-d)*f+a*e+b}this.points=a;var c=[],d={x:0,y:0,z:0},e,f,h,g,i,k,m,l,p;this.initFromArray=function(a){this.points=[];for(var b=0;b<a.length;b++)this.points[b]={x:a[b][0],y:a[b][1],z:a[b][2]}};this.getPoint=function(a){e=(this.points.length-1)*a;f=Math.floor(e);h=e-f;c[0]=0===f?f:f-1;c[1]=f;c[2]=f>this.points.length-2?this.points.length-1:f+1;c[3]=f>this.points.length-3?this.points.length-1:
f+2;k=this.points[c[0]];m=this.points[c[1]];l=this.points[c[2]];p=this.points[c[3]];g=h*h;i=h*g;d.x=b(k.x,m.x,l.x,p.x,h,g,i);d.y=b(k.y,m.y,l.y,p.y,h,g,i);d.z=b(k.z,m.z,l.z,p.z,h,g,i);return d};this.getControlPointsArray=function(){var a,b,c=this.points.length,d=[];for(a=0;a<c;a++)b=this.points[a],d[a]=[b.x,b.y,b.z];return d};this.getLength=function(a){var b,c,d,e=b=b=0,f=new THREE.Vector3,h=new THREE.Vector3,g=[],i=0;g[0]=0;a||(a=100);c=this.points.length*a;f.copy(this.points[0]);for(a=1;a<c;a++)b=
a/c,d=this.getPoint(b),h.copy(d),i+=h.distanceTo(f),f.copy(d),b*=this.points.length-1,b=Math.floor(b),b!=e&&(g[b]=i,e=b);g[g.length]=i;return{chunks:g,total:i}};this.reparametrizeByArcLength=function(a){var b,c,d,e,f,h,g=[],i=new THREE.Vector3,k=this.getLength();g.push(i.copy(this.points[0]).clone());for(b=1;b<this.points.length;b++){c=k.chunks[b]-k.chunks[b-1];h=Math.ceil(a*c/k.total);e=(b-1)/(this.points.length-1);f=b/(this.points.length-1);for(c=1;c<h-1;c++)d=e+c*(1/h)*(f-e),d=this.getPoint(d),
g.push(i.copy(d).clone());g.push(i.copy(this.points[b]).clone())}this.points=g}};THREE.Triangle=function(a,b,c){this.a=void 0!==a?a:new THREE.Vector3;this.b=void 0!==b?b:new THREE.Vector3;this.c=void 0!==c?c:new THREE.Vector3};THREE.Triangle.normal=function(){var a=new THREE.Vector3;return function(b,c,d,e){e=e||new THREE.Vector3;e.subVectors(d,c);a.subVectors(b,c);e.cross(a);b=e.lengthSq();return 0<b?e.multiplyScalar(1/Math.sqrt(b)):e.set(0,0,0)}}();
THREE.Triangle.barycoordFromPoint=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(d,e,f,h,g){a.subVectors(h,e);b.subVectors(f,e);c.subVectors(d,e);var d=a.dot(a),e=a.dot(b),f=a.dot(c),i=b.dot(b),h=b.dot(c),k=d*i-e*e,g=g||new THREE.Vector3;if(0==k)return g.set(-2,-1,-1);k=1/k;i=(i*f-e*h)*k;d=(d*h-e*f)*k;return g.set(1-i-d,d,i)}}();
THREE.Triangle.containsPoint=function(){var a=new THREE.Vector3;return function(b,c,d,e){b=THREE.Triangle.barycoordFromPoint(b,c,d,e,a);return 0<=b.x&&0<=b.y&&1>=b.x+b.y}}();
THREE.Triangle.prototype={constructor:THREE.Triangle,set:function(a,b,c){this.a.copy(a);this.b.copy(b);this.c.copy(c);return this},setFromPointsAndIndices:function(a,b,c,d){this.a.copy(a[b]);this.b.copy(a[c]);this.c.copy(a[d]);return this},copy:function(a){this.a.copy(a.a);this.b.copy(a.b);this.c.copy(a.c);return this},area:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(){a.subVectors(this.c,this.b);b.subVectors(this.a,this.b);return 0.5*a.cross(b).length()}}(),midpoint:function(a){return(a||
new THREE.Vector3).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(a){return THREE.Triangle.normal(this.a,this.b,this.c,a)},plane:function(a){return(a||new THREE.Plane).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(a,b){return THREE.Triangle.barycoordFromPoint(a,this.a,this.b,this.c,b)},containsPoint:function(a){return THREE.Triangle.containsPoint(a,this.a,this.b,this.c)},equals:function(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)},
clone:function(){return(new THREE.Triangle).copy(this)}};THREE.Vertex=function(a){console.warn("THREE.Vertex has been DEPRECATED. Use THREE.Vector3 instead.");return a};THREE.UV=function(a,b){console.warn("THREE.UV has been DEPRECATED. Use THREE.Vector2 instead.");return new THREE.Vector2(a,b)};THREE.Clock=function(a){this.autoStart=void 0!==a?a:!0;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1};
THREE.Clock.prototype={constructor:THREE.Clock,start:function(){this.oldTime=this.startTime=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now();this.running=!0},stop:function(){this.getElapsedTime();this.running=!1},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var a=0;this.autoStart&&!this.running&&this.start();if(this.running){var b=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now(),
a=0.001*(b-this.oldTime);this.oldTime=b;this.elapsedTime+=a}return a}};THREE.EventDispatcher=function(){};
THREE.EventDispatcher.prototype={constructor:THREE.EventDispatcher,apply:function(a){a.addEventListener=THREE.EventDispatcher.prototype.addEventListener;a.hasEventListener=THREE.EventDispatcher.prototype.hasEventListener;a.removeEventListener=THREE.EventDispatcher.prototype.removeEventListener;a.dispatchEvent=THREE.EventDispatcher.prototype.dispatchEvent},addEventListener:function(a,b){void 0===this._listeners&&(this._listeners={});var c=this._listeners;void 0===c[a]&&(c[a]=[]);-1===c[a].indexOf(b)&&
c[a].push(b)},hasEventListener:function(a,b){if(void 0===this._listeners)return!1;var c=this._listeners;return void 0!==c[a]&&-1!==c[a].indexOf(b)?!0:!1},removeEventListener:function(a,b){if(void 0!==this._listeners){var c=this._listeners[a];if(void 0!==c){var d=c.indexOf(b);-1!==d&&c.splice(d,1)}}},dispatchEvent:function(){var a=[];return function(b){if(void 0!==this._listeners){var c=this._listeners[b.type];if(void 0!==c){b.target=this;for(var d=c.length,e=0;e<d;e++)a[e]=c[e];for(e=0;e<d;e++)a[e].call(this,
b)}}}}()};(function(a){a.Raycaster=function(b,c,d,e){this.ray=new a.Ray(b,c);this.near=d||0;this.far=e||Infinity};var b=new a.Sphere,c=new a.Ray;new a.Plane;new a.Vector3;var d=new a.Vector3,e=new a.Matrix4,f=function(a,b){return a.distance-b.distance},h=new a.Vector3,g=new a.Vector3,i=new a.Vector3,k=function(f,m,t){if(f instanceof a.Sprite){d.setFromMatrixPosition(f.matrixWorld);var s=m.ray.distanceToPoint(d);if(s>f.scale.x)return t;t.push({distance:s,point:f.position,face:null,object:f})}else if(f instanceof
a.LOD)d.setFromMatrixPosition(f.matrixWorld),s=m.ray.origin.distanceTo(d),k(f.getObjectForDistance(s),m,t);else if(f instanceof a.Mesh){var q=f.geometry;null===q.boundingSphere&&q.computeBoundingSphere();b.copy(q.boundingSphere);b.applyMatrix4(f.matrixWorld);if(!1===m.ray.isIntersectionSphere(b))return t;e.getInverse(f.matrixWorld);c.copy(m.ray).applyMatrix4(e);if(null!==q.boundingBox&&!1===c.isIntersectionBox(q.boundingBox))return t;if(q instanceof a.BufferGeometry){var n=f.material;if(void 0===
n||!1===q.dynamic)return t;var u,r,v=m.precision;if(void 0!==q.attributes.index)for(var z=q.offsets,G=q.attributes.index.array,w=q.attributes.position.array,y=q.offsets.length,E=q.attributes.index.array.length/3,E=0;E<y;++E)for(var s=z[E].start,A=z[E].index,q=s,K=s+z[E].count;q<K;q+=3)s=A+G[q],u=A+G[q+1],r=A+G[q+2],h.set(w[3*s],w[3*s+1],w[3*s+2]),g.set(w[3*u],w[3*u+1],w[3*u+2]),i.set(w[3*r],w[3*r+1],w[3*r+2]),u=n.side===a.BackSide?c.intersectTriangle(i,g,h,!0):c.intersectTriangle(h,g,i,n.side!==a.DoubleSide),
null!==u&&(u.applyMatrix4(f.matrixWorld),s=m.ray.origin.distanceTo(u),s<v||(s<m.near||s>m.far)||t.push({distance:s,point:u,face:null,faceIndex:null,object:f}));else{w=q.attributes.position.array;E=q.attributes.position.array.length;for(q=0;q<E;q+=3)s=q,u=q+1,r=q+2,h.set(w[3*s],w[3*s+1],w[3*s+2]),g.set(w[3*u],w[3*u+1],w[3*u+2]),i.set(w[3*r],w[3*r+1],w[3*r+2]),u=n.side===a.BackSide?c.intersectTriangle(i,g,h,!0):c.intersectTriangle(h,g,i,n.side!==a.DoubleSide),null!==u&&(u.applyMatrix4(f.matrixWorld),
s=m.ray.origin.distanceTo(u),s<v||(s<m.near||s>m.far)||t.push({distance:s,point:u,face:null,faceIndex:null,object:f}))}}else if(q instanceof a.Geometry){G=f.material instanceof a.MeshFaceMaterial;w=!0===G?f.material.materials:null;v=m.precision;z=q.vertices;y=0;for(E=q.faces.length;y<E;y++)A=q.faces[y],n=!0===G?w[A.materialIndex]:f.material,void 0!==n&&(s=z[A.a],u=z[A.b],r=z[A.c],u=n.side===a.BackSide?c.intersectTriangle(r,u,s,!0):c.intersectTriangle(s,u,r,n.side!==a.DoubleSide),null!==u&&(u.applyMatrix4(f.matrixWorld),
s=m.ray.origin.distanceTo(u),s<v||(s<m.near||s>m.far)||t.push({distance:s,point:u,face:A,faceIndex:y,object:f})))}}else if(f instanceof a.Line){v=m.linePrecision;n=v*v;q=f.geometry;null===q.boundingSphere&&q.computeBoundingSphere();b.copy(q.boundingSphere);b.applyMatrix4(f.matrixWorld);if(!1===m.ray.isIntersectionSphere(b))return t;e.getInverse(f.matrixWorld);c.copy(m.ray).applyMatrix4(e);if(q instanceof a.Geometry){z=q.vertices;v=z.length;u=new a.Vector3;r=new a.Vector3;E=f.type===a.LineStrip?1:
2;for(q=0;q<v-1;q+=E)c.distanceSqToSegment(z[q],z[q+1],r,u)>n||(s=c.origin.distanceTo(r),s<m.near||s>m.far||t.push({distance:s,point:u.clone().applyMatrix4(f.matrixWorld),face:null,faceIndex:null,object:f}))}}},m=function(a,b,c){for(var a=a.getDescendants(),d=0,e=a.length;d<e;d++)k(a[d],b,c)};a.Raycaster.prototype.precision=1E-4;a.Raycaster.prototype.linePrecision=1;a.Raycaster.prototype.set=function(a,b){this.ray.set(a,b)};a.Raycaster.prototype.intersectObject=function(a,b){var c=[];!0===b&&m(a,
this,c);k(a,this,c);c.sort(f);return c};a.Raycaster.prototype.intersectObjects=function(a,b){for(var c=[],d=0,e=a.length;d<e;d++)k(a[d],this,c),!0===b&&m(a[d],this,c);c.sort(f);return c}})(THREE);THREE.Object3D=function(){this.id=THREE.Object3DIdCount++;this.uuid=THREE.Math.generateUUID();this.name="";this.parent=void 0;this.children=[];this.up=new THREE.Vector3(0,1,0);this.position=new THREE.Vector3;this._rotation=new THREE.Euler;this._quaternion=new THREE.Quaternion;this.scale=new THREE.Vector3(1,1,1);this._rotation._quaternion=this.quaternion;this._quaternion._euler=this.rotation;this.renderDepth=null;this.rotationAutoUpdate=!0;this.matrix=new THREE.Matrix4;this.matrixWorld=new THREE.Matrix4;
this.visible=this.matrixWorldNeedsUpdate=this.matrixAutoUpdate=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.userData={}};
THREE.Object3D.prototype={constructor:THREE.Object3D,get rotation(){return this._rotation},set rotation(a){this._rotation=a;this._rotation._quaternion=this._quaternion;this._quaternion._euler=this._rotation;this._rotation._updateQuaternion()},get quaternion(){return this._quaternion},set quaternion(a){this._quaternion=a;this._quaternion._euler=this._rotation;this._rotation._quaternion=this._quaternion;this._quaternion._updateEuler()},get eulerOrder(){console.warn("DEPRECATED: Object3D's .eulerOrder has been moved to Object3D's .rotation.order.");
return this.rotation.order},set eulerOrder(a){console.warn("DEPRECATED: Object3D's .eulerOrder has been moved to Object3D's .rotation.order.");this.rotation.order=a},get useQuaternion(){console.warn("DEPRECATED: Object3D's .useQuaternion has been removed. The library now uses quaternions by default.")},set useQuaternion(a){console.warn("DEPRECATED: Object3D's .useQuaternion has been removed. The library now uses quaternions by default.")},applyMatrix:function(){var a=new THREE.Matrix4;return function(b){this.matrix.multiplyMatrices(b,
this.matrix);this.position.setFromMatrixPosition(this.matrix);this.scale.setFromMatrixScale(this.matrix);a.extractRotation(this.matrix);this.quaternion.setFromRotationMatrix(a)}}(),setRotationFromAxisAngle:function(a,b){this.quaternion.setFromAxisAngle(a,b)},setRotationFromEuler:function(a){this.quaternion.setFromEuler(a,!0)},setRotationFromMatrix:function(a){this.quaternion.setFromRotationMatrix(a)},setRotationFromQuaternion:function(a){this.quaternion.copy(a)},rotateOnAxis:function(){var a=new THREE.Quaternion;
return function(b,c){a.setFromAxisAngle(b,c);this.quaternion.multiply(a);return this}}(),rotateX:function(){var a=new THREE.Vector3(1,0,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateY:function(){var a=new THREE.Vector3(0,1,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateZ:function(){var a=new THREE.Vector3(0,0,1);return function(b){return this.rotateOnAxis(a,b)}}(),translateOnAxis:function(){var a=new THREE.Vector3;return function(b,c){a.copy(b);a.applyQuaternion(this.quaternion);
this.position.add(a.multiplyScalar(c));return this}}(),translate:function(a,b){console.warn("DEPRECATED: Object3D's .translate() has been removed. Use .translateOnAxis( axis, distance ) instead. Note args have been changed.");return this.translateOnAxis(b,a)},translateX:function(){var a=new THREE.Vector3(1,0,0);return function(b){return this.translateOnAxis(a,b)}}(),translateY:function(){var a=new THREE.Vector3(0,1,0);return function(b){return this.translateOnAxis(a,b)}}(),translateZ:function(){var a=
new THREE.Vector3(0,0,1);return function(b){return this.translateOnAxis(a,b)}}(),localToWorld:function(a){return a.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var a=new THREE.Matrix4;return function(b){return b.applyMatrix4(a.getInverse(this.matrixWorld))}}(),lookAt:function(){var a=new THREE.Matrix4;return function(b){a.lookAt(b,this.position,this.up);this.quaternion.setFromRotationMatrix(a)}}(),add:function(a){if(a===this)console.warn("THREE.Object3D.add: An object can't be added as a child of itself.");
else if(a instanceof THREE.Object3D){void 0!==a.parent&&a.parent.remove(a);a.parent=this;a.dispatchEvent({type:"added"});this.children.push(a);for(var b=this;void 0!==b.parent;)b=b.parent;void 0!==b&&b instanceof THREE.Scene&&b.__addObject(a)}},remove:function(a){var b=this.children.indexOf(a);if(-1!==b){a.parent=void 0;a.dispatchEvent({type:"removed"});this.children.splice(b,1);for(b=this;void 0!==b.parent;)b=b.parent;void 0!==b&&b instanceof THREE.Scene&&b.__removeObject(a)}},traverse:function(a){a(this);
for(var b=0,c=this.children.length;b<c;b++)this.children[b].traverse(a)},getObjectById:function(a,b){for(var c=0,d=this.children.length;c<d;c++){var e=this.children[c];if(e.id===a||!0===b&&(e=e.getObjectById(a,b),void 0!==e))return e}},getObjectByName:function(a,b){for(var c=0,d=this.children.length;c<d;c++){var e=this.children[c];if(e.name===a||!0===b&&(e=e.getObjectByName(a,b),void 0!==e))return e}},getChildByName:function(a,b){console.warn("DEPRECATED: Object3D's .getChildByName() has been renamed to .getObjectByName().");
return this.getObjectByName(a,b)},getDescendants:function(a){void 0===a&&(a=[]);Array.prototype.push.apply(a,this.children);for(var b=0,c=this.children.length;b<c;b++)this.children[b].getDescendants(a);return a},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){!0===this.matrixAutoUpdate&&this.updateMatrix();if(!0===this.matrixWorldNeedsUpdate||!0===a)void 0===this.parent?this.matrixWorld.copy(this.matrix):
this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0;for(var b=0,c=this.children.length;b<c;b++)this.children[b].updateMatrixWorld(a)},clone:function(a,b){void 0===a&&(a=new THREE.Object3D);void 0===b&&(b=!0);a.name=this.name;a.up.copy(this.up);a.position.copy(this.position);a.quaternion.copy(this.quaternion);a.scale.copy(this.scale);a.renderDepth=this.renderDepth;a.rotationAutoUpdate=this.rotationAutoUpdate;a.matrix.copy(this.matrix);a.matrixWorld.copy(this.matrixWorld);
a.matrixAutoUpdate=this.matrixAutoUpdate;a.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate;a.visible=this.visible;a.castShadow=this.castShadow;a.receiveShadow=this.receiveShadow;a.frustumCulled=this.frustumCulled;a.userData=JSON.parse(JSON.stringify(this.userData));if(!0===b)for(var c=0;c<this.children.length;c++)a.add(this.children[c].clone());return a}};THREE.EventDispatcher.prototype.apply(THREE.Object3D.prototype);THREE.Object3DIdCount=0;THREE.Projector=function(){function a(){if(i===m){var a=new THREE.RenderableVertex;k.push(a);m++;i++;return a}return k[i++]}function b(a,b){return a.z!==b.z?b.z-a.z:a.id!==b.id?a.id-b.id:0}function c(a,b){var c=0,d=1,e=a.z+a.w,f=b.z+b.w,h=-a.z+a.w,g=-b.z+b.w;if(0<=e&&0<=f&&0<=h&&0<=g)return!0;if(0>e&&0>f||0>h&&0>g)return!1;0>e?c=Math.max(c,e/(e-f)):0>f&&(d=Math.min(d,e/(e-f)));0>h?c=Math.max(c,h/(h-g)):0>g&&(d=Math.min(d,h/(h-g)));if(d<c)return!1;a.lerp(b,c);b.lerp(a,1-d);return!0}var d,e,f=[],h=
0,g,i,k=[],m=0,l,p,t=[],s=0,q,n,u=[],r=0,v,z,G=[],w=0,y={objects:[],sprites:[],lights:[],elements:[]},E=new THREE.Vector3,A=new THREE.Vector4,K=new THREE.Box3(new THREE.Vector3(-1,-1,-1),new THREE.Vector3(1,1,1)),D=new THREE.Box3,F=Array(3),O=new THREE.Matrix4,x=new THREE.Matrix4,I,B=new THREE.Matrix4,M=new THREE.Matrix3,J=new THREE.Matrix3,ca=new THREE.Vector3,na=new THREE.Frustum,pa=new THREE.Vector4,C=new THREE.Vector4;this.projectVector=function(a,b){b.matrixWorldInverse.getInverse(b.matrixWorld);
x.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse);return a.applyProjection(x)};this.unprojectVector=function(a,b){b.projectionMatrixInverse.getInverse(b.projectionMatrix);x.multiplyMatrices(b.matrixWorld,b.projectionMatrixInverse);return a.applyProjection(x)};this.pickingRay=function(a,b){a.z=-1;var c=new THREE.Vector3(a.x,a.y,1);this.unprojectVector(a,b);this.unprojectVector(c,b);c.sub(a).normalize();return new THREE.Raycaster(a,c)};var Q=function(a){if(e===h){var b=new THREE.RenderableObject;
f.push(b);h++;e++;d=b}else d=f[e++];d.id=a.id;d.object=a;null!==a.renderDepth?d.z=a.renderDepth:(E.setFromMatrixPosition(a.matrixWorld),E.applyProjection(x),d.z=E.z);return d},R=function(a){if(!1!==a.visible){a instanceof THREE.Light?y.lights.push(a):a instanceof THREE.Mesh||a instanceof THREE.Line?(!1===a.frustumCulled||!0===na.intersectsObject(a))&&y.objects.push(Q(a)):a instanceof THREE.Sprite&&y.sprites.push(Q(a));for(var b=0,c=a.children.length;b<c;b++)R(a.children[b])}};this.projectScene=function(d,
f,h,m){var E=!1,Q,$,ea,V,P,Y,U,ja,sa,ha,Ka,Ga;z=n=p=0;y.elements.length=0;!0===d.autoUpdate&&d.updateMatrixWorld();void 0===f.parent&&f.updateMatrixWorld();O.copy(f.matrixWorldInverse.getInverse(f.matrixWorld));x.multiplyMatrices(f.projectionMatrix,O);J.getNormalMatrix(O);na.setFromMatrix(x);e=0;y.objects.length=0;y.sprites.length=0;y.lights.length=0;R(d);!0===h&&y.objects.sort(b);d=0;for(h=y.objects.length;d<h;d++)if(U=y.objects[d].object,I=U.matrixWorld,i=0,U instanceof THREE.Mesh){ja=U.geometry;
ea=ja.vertices;sa=ja.faces;ja=ja.faceVertexUvs;M.getNormalMatrix(I);Ka=U.material instanceof THREE.MeshFaceMaterial;Ga=!0===Ka?U.material:null;Q=0;for($=ea.length;Q<$;Q++){g=a();g.positionWorld.copy(ea[Q]).applyMatrix4(I);g.positionScreen.copy(g.positionWorld).applyMatrix4(x);var ka=1/g.positionScreen.w;g.positionScreen.x*=ka;g.positionScreen.y*=ka;g.positionScreen.z*=ka;g.visible=!(-1>g.positionScreen.x||1<g.positionScreen.x||-1>g.positionScreen.y||1<g.positionScreen.y||-1>g.positionScreen.z||1<
g.positionScreen.z)}ea=0;for(Q=sa.length;ea<Q;ea++)if($=sa[ea],ka=!0===Ka?Ga.materials[$.materialIndex]:U.material,void 0!==ka&&(Y=ka.side,V=k[$.a],P=k[$.b],ha=k[$.c],F[0]=V.positionScreen,F[1]=P.positionScreen,F[2]=ha.positionScreen,!0===V.visible||!0===P.visible||!0===ha.visible||K.isIntersectionBox(D.setFromPoints(F))))if(E=0>(ha.positionScreen.x-V.positionScreen.x)*(P.positionScreen.y-V.positionScreen.y)-(ha.positionScreen.y-V.positionScreen.y)*(P.positionScreen.x-V.positionScreen.x),Y===THREE.DoubleSide||
E===(Y===THREE.FrontSide)){if(p===s){var Da=new THREE.RenderableFace3;t.push(Da);s++;p++;l=Da}else l=t[p++];l.id=U.id;l.v1.copy(V);l.v2.copy(P);l.v3.copy(ha);l.normalModel.copy($.normal);!1===E&&(Y===THREE.BackSide||Y===THREE.DoubleSide)&&l.normalModel.negate();l.normalModel.applyMatrix3(M).normalize();l.normalModelView.copy(l.normalModel).applyMatrix3(J);l.centroidModel.copy($.centroid).applyMatrix4(I);ha=$.vertexNormals;V=0;for(P=Math.min(ha.length,3);V<P;V++)Da=l.vertexNormalsModel[V],Da.copy(ha[V]),
!1===E&&(Y===THREE.BackSide||Y===THREE.DoubleSide)&&Da.negate(),Da.applyMatrix3(M).normalize(),l.vertexNormalsModelView[V].copy(Da).applyMatrix3(J);l.vertexNormalsLength=ha.length;E=0;for(V=Math.min(ja.length,3);E<V;E++)if(ha=ja[E][ea],void 0!==ha){P=0;for(Y=ha.length;P<Y;P++)l.uvs[E][P]=ha[P]}l.color=$.color;l.material=ka;ca.copy(l.centroidModel).applyProjection(x);l.z=ca.z;y.elements.push(l)}}else if(U instanceof THREE.Line){B.multiplyMatrices(x,I);ea=U.geometry.vertices;V=a();V.positionScreen.copy(ea[0]).applyMatrix4(B);
sa=U.type===THREE.LinePieces?2:1;Q=1;for($=ea.length;Q<$;Q++)V=a(),V.positionScreen.copy(ea[Q]).applyMatrix4(B),0<(Q+1)%sa||(P=k[i-2],pa.copy(V.positionScreen),C.copy(P.positionScreen),!0===c(pa,C)&&(pa.multiplyScalar(1/pa.w),C.multiplyScalar(1/C.w),n===r?(ja=new THREE.RenderableLine,u.push(ja),r++,n++,q=ja):q=u[n++],q.id=U.id,q.v1.positionScreen.copy(pa),q.v2.positionScreen.copy(C),q.z=Math.max(pa.z,C.z),q.material=U.material,U.material.vertexColors===THREE.VertexColors&&(q.vertexColors[0].copy(U.geometry.colors[Q]),
q.vertexColors[1].copy(U.geometry.colors[Q-1])),y.elements.push(q)))}d=0;for(h=y.sprites.length;d<h;d++)U=y.sprites[d].object,I=U.matrixWorld,A.set(I.elements[12],I.elements[13],I.elements[14],1),A.applyMatrix4(x),ka=1/A.w,A.z*=ka,-1<=A.z&&1>=A.z&&(z===w?(sa=new THREE.RenderableSprite,G.push(sa),w++,z++,v=sa):v=G[z++],v.id=U.id,v.x=A.x*ka,v.y=A.y*ka,v.z=A.z,v.object=U,v.rotation=U.rotation,v.scale.x=U.scale.x*Math.abs(v.x-(A.x+f.projectionMatrix.elements[0])/(A.w+f.projectionMatrix.elements[12])),
v.scale.y=U.scale.y*Math.abs(v.y-(A.y+f.projectionMatrix.elements[5])/(A.w+f.projectionMatrix.elements[13])),v.material=U.material,y.elements.push(v));!0===m&&y.elements.sort(b);return y}};THREE.Face3=function(a,b,c,d,e,f){this.a=a;this.b=b;this.c=c;this.normal=d instanceof THREE.Vector3?d:new THREE.Vector3;this.vertexNormals=d instanceof Array?d:[];this.color=e instanceof THREE.Color?e:new THREE.Color;this.vertexColors=e instanceof Array?e:[];this.vertexTangents=[];this.materialIndex=void 0!==f?f:0;this.centroid=new THREE.Vector3};
THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){var a=new THREE.Face3(this.a,this.b,this.c);a.normal.copy(this.normal);a.color.copy(this.color);a.centroid.copy(this.centroid);a.materialIndex=this.materialIndex;var b,c;b=0;for(c=this.vertexNormals.length;b<c;b++)a.vertexNormals[b]=this.vertexNormals[b].clone();b=0;for(c=this.vertexColors.length;b<c;b++)a.vertexColors[b]=this.vertexColors[b].clone();b=0;for(c=this.vertexTangents.length;b<c;b++)a.vertexTangents[b]=this.vertexTangents[b].clone();
return a}};THREE.Face4=function(a,b,c,d,e,f,h){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new THREE.Face3(a,b,c,e,f,h)};THREE.Geometry=function(){this.id=THREE.GeometryIdCount++;this.uuid=THREE.Math.generateUUID();this.name="";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphColors=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.hasTangents=!1;this.dynamic=!0;this.buffersNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.tangentsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=
this.elementsNeedUpdate=this.verticesNeedUpdate=!1};
THREE.Geometry.prototype={constructor:THREE.Geometry,applyMatrix:function(a){for(var b=(new THREE.Matrix3).getNormalMatrix(a),c=0,d=this.vertices.length;c<d;c++)this.vertices[c].applyMatrix4(a);c=0;for(d=this.faces.length;c<d;c++){var e=this.faces[c];e.normal.applyMatrix3(b).normalize();for(var f=0,h=e.vertexNormals.length;f<h;f++)e.vertexNormals[f].applyMatrix3(b).normalize();e.centroid.applyMatrix4(a)}this.boundingBox instanceof THREE.Box3&&this.computeBoundingBox();this.boundingSphere instanceof
THREE.Sphere&&this.computeBoundingSphere()},computeCentroids:function(){var a,b,c;a=0;for(b=this.faces.length;a<b;a++)c=this.faces[a],c.centroid.set(0,0,0),c.centroid.add(this.vertices[c.a]),c.centroid.add(this.vertices[c.b]),c.centroid.add(this.vertices[c.c]),c.centroid.divideScalar(3)},computeFaceNormals:function(){for(var a=new THREE.Vector3,b=new THREE.Vector3,c=0,d=this.faces.length;c<d;c++){var e=this.faces[c],f=this.vertices[e.a],h=this.vertices[e.b];a.subVectors(this.vertices[e.c],h);b.subVectors(f,
h);a.cross(b);a.normalize();e.normal.copy(a)}},computeVertexNormals:function(a){var b,c,d,e;if(void 0===this.__tmpVertices){e=this.__tmpVertices=Array(this.vertices.length);b=0;for(c=this.vertices.length;b<c;b++)e[b]=new THREE.Vector3;b=0;for(c=this.faces.length;b<c;b++)d=this.faces[b],d.vertexNormals=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3]}else{e=this.__tmpVertices;b=0;for(c=this.vertices.length;b<c;b++)e[b].set(0,0,0)}if(a){var f,h,g=new THREE.Vector3,i=new THREE.Vector3;new THREE.Vector3;
new THREE.Vector3;new THREE.Vector3;b=0;for(c=this.faces.length;b<c;b++)d=this.faces[b],a=this.vertices[d.a],f=this.vertices[d.b],h=this.vertices[d.c],g.subVectors(h,f),i.subVectors(a,f),g.cross(i),e[d.a].add(g),e[d.b].add(g),e[d.c].add(g)}else{b=0;for(c=this.faces.length;b<c;b++)d=this.faces[b],e[d.a].add(d.normal),e[d.b].add(d.normal),e[d.c].add(d.normal)}b=0;for(c=this.vertices.length;b<c;b++)e[b].normalize();b=0;for(c=this.faces.length;b<c;b++)d=this.faces[b],d.vertexNormals[0].copy(e[d.a]),d.vertexNormals[1].copy(e[d.b]),
d.vertexNormals[2].copy(e[d.c])},computeMorphNormals:function(){var a,b,c,d,e;c=0;for(d=this.faces.length;c<d;c++){e=this.faces[c];e.__originalFaceNormal?e.__originalFaceNormal.copy(e.normal):e.__originalFaceNormal=e.normal.clone();e.__originalVertexNormals||(e.__originalVertexNormals=[]);a=0;for(b=e.vertexNormals.length;a<b;a++)e.__originalVertexNormals[a]?e.__originalVertexNormals[a].copy(e.vertexNormals[a]):e.__originalVertexNormals[a]=e.vertexNormals[a].clone()}var f=new THREE.Geometry;f.faces=
this.faces;a=0;for(b=this.morphTargets.length;a<b;a++){if(!this.morphNormals[a]){this.morphNormals[a]={};this.morphNormals[a].faceNormals=[];this.morphNormals[a].vertexNormals=[];e=this.morphNormals[a].faceNormals;var h=this.morphNormals[a].vertexNormals,g,i;c=0;for(d=this.faces.length;c<d;c++)g=new THREE.Vector3,i={a:new THREE.Vector3,b:new THREE.Vector3,c:new THREE.Vector3},e.push(g),h.push(i)}h=this.morphNormals[a];f.vertices=this.morphTargets[a].vertices;f.computeFaceNormals();f.computeVertexNormals();
c=0;for(d=this.faces.length;c<d;c++)e=this.faces[c],g=h.faceNormals[c],i=h.vertexNormals[c],g.copy(e.normal),i.a.copy(e.vertexNormals[0]),i.b.copy(e.vertexNormals[1]),i.c.copy(e.vertexNormals[2])}c=0;for(d=this.faces.length;c<d;c++)e=this.faces[c],e.normal=e.__originalFaceNormal,e.vertexNormals=e.__originalVertexNormals},computeTangents:function(){var a,b,c,d,e,f,h,g,i,k,m,l,p,t,s,q,n,u=[],r=[];c=new THREE.Vector3;var v=new THREE.Vector3,z=new THREE.Vector3,G=new THREE.Vector3,w=new THREE.Vector3;
a=0;for(b=this.vertices.length;a<b;a++)u[a]=new THREE.Vector3,r[a]=new THREE.Vector3;a=0;for(b=this.faces.length;a<b;a++)e=this.faces[a],f=this.faceVertexUvs[0][a],d=e.a,n=e.b,e=e.c,h=this.vertices[d],g=this.vertices[n],i=this.vertices[e],k=f[0],m=f[1],l=f[2],f=g.x-h.x,p=i.x-h.x,t=g.y-h.y,s=i.y-h.y,g=g.z-h.z,h=i.z-h.z,i=m.x-k.x,q=l.x-k.x,m=m.y-k.y,k=l.y-k.y,l=1/(i*k-q*m),c.set((k*f-m*p)*l,(k*t-m*s)*l,(k*g-m*h)*l),v.set((i*p-q*f)*l,(i*s-q*t)*l,(i*h-q*g)*l),u[d].add(c),u[n].add(c),u[e].add(c),r[d].add(v),
r[n].add(v),r[e].add(v);v=["a","b","c","d"];a=0;for(b=this.faces.length;a<b;a++){e=this.faces[a];for(c=0;c<Math.min(e.vertexNormals.length,3);c++)w.copy(e.vertexNormals[c]),d=e[v[c]],n=u[d],z.copy(n),z.sub(w.multiplyScalar(w.dot(n))).normalize(),G.crossVectors(e.vertexNormals[c],n),d=G.dot(r[d]),d=0>d?-1:1,e.vertexTangents[c]=new THREE.Vector4(z.x,z.y,z.z,d)}this.hasTangents=!0},computeLineDistances:function(){for(var a=0,b=this.vertices,c=0,d=b.length;c<d;c++)0<c&&(a+=b[c].distanceTo(b[c-1])),this.lineDistances[c]=
a},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);this.boundingSphere.setFromPoints(this.vertices)},mergeVertices:function(){var a={},b=[],c=[],d,e=Math.pow(10,4),f,h;this.__tmpVertices=void 0;f=0;for(h=this.vertices.length;f<h;f++)d=this.vertices[f],d=Math.round(d.x*e)+"_"+Math.round(d.y*e)+"_"+Math.round(d.z*
e),void 0===a[d]?(a[d]=f,b.push(this.vertices[f]),c[f]=b.length-1):c[f]=c[a[d]];a=[];f=0;for(h=this.faces.length;f<h;f++){e=this.faces[f];e.a=c[e.a];e.b=c[e.b];e.c=c[e.c];e=[e.a,e.b,e.c];for(d=0;3>d;d++)if(e[d]==e[(d+1)%3]){a.push(f);break}}for(f=a.length-1;0<=f;f--){e=a[f];this.faces.splice(e,1);c=0;for(h=this.faceVertexUvs.length;c<h;c++)this.faceVertexUvs[c].splice(e,1)}f=this.vertices.length-b.length;this.vertices=b;return f},clone:function(){for(var a=new THREE.Geometry,b=this.vertices,c=0,d=
b.length;c<d;c++)a.vertices.push(b[c].clone());b=this.faces;c=0;for(d=b.length;c<d;c++)a.faces.push(b[c].clone());b=this.faceVertexUvs[0];c=0;for(d=b.length;c<d;c++){for(var e=b[c],f=[],h=0,g=e.length;h<g;h++)f.push(new THREE.Vector2(e[h].x,e[h].y));a.faceVertexUvs[0].push(f)}return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.Geometry.prototype);THREE.GeometryIdCount=0;THREE.BufferGeometry=function(){this.id=THREE.GeometryIdCount++;this.uuid=THREE.Math.generateUUID();this.name="";this.attributes={};this.dynamic=!0;this.offsets=[];this.boundingSphere=this.boundingBox=null;this.hasTangents=!1;this.morphTargets=[]};
THREE.BufferGeometry.prototype={constructor:THREE.BufferGeometry,addAttribute:function(a,b,c,d){this.attributes[a]={itemSize:d,array:new b(c*d)}},applyMatrix:function(a){var b,c;this.attributes.position&&(b=this.attributes.position.array);this.attributes.normal&&(c=this.attributes.normal.array);void 0!==b&&(a.multiplyVector3Array(b),this.verticesNeedUpdate=!0);void 0!==c&&((new THREE.Matrix3).getNormalMatrix(a).multiplyVector3Array(c),this.normalizeNormals(),this.normalsNeedUpdate=!0)},computeBoundingBox:function(){null===
this.boundingBox&&(this.boundingBox=new THREE.Box3);var a=this.attributes.position.array;if(a){var b=this.boundingBox,c,d,e;3<=a.length&&(b.min.x=b.max.x=a[0],b.min.y=b.max.y=a[1],b.min.z=b.max.z=a[2]);for(var f=3,h=a.length;f<h;f+=3)c=a[f],d=a[f+1],e=a[f+2],c<b.min.x?b.min.x=c:c>b.max.x&&(b.max.x=c),d<b.min.y?b.min.y=d:d>b.max.y&&(b.max.y=d),e<b.min.z?b.min.z=e:e>b.max.z&&(b.max.z=e)}if(void 0===a||0===a.length)this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0)},computeBoundingSphere:function(){var a=
new THREE.Box3,b=new THREE.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var c=this.attributes.position.array;if(c){for(var d=this.boundingSphere.center,e=0,f=c.length;e<f;e+=3)b.set(c[e],c[e+1],c[e+2]),a.addPoint(b);a.center(d);for(var h=0,e=0,f=c.length;e<f;e+=3)b.set(c[e],c[e+1],c[e+2]),h=Math.max(h,d.distanceToSquared(b));this.boundingSphere.radius=Math.sqrt(h)}}}(),computeVertexNormals:function(){if(this.attributes.position){var a,b,c,d;a=this.attributes.position.array.length;
if(void 0===this.attributes.normal)this.attributes.normal={itemSize:3,array:new Float32Array(a)};else{a=0;for(b=this.attributes.normal.array.length;a<b;a++)this.attributes.normal.array[a]=0}var e=this.attributes.position.array,f=this.attributes.normal.array,h,g,i,k,m,l,p=new THREE.Vector3,t=new THREE.Vector3,s=new THREE.Vector3,q=new THREE.Vector3,n=new THREE.Vector3;if(this.attributes.index){var u=this.attributes.index.array,r=this.offsets;c=0;for(d=r.length;c<d;++c){b=r[c].start;h=r[c].count;var v=
r[c].index;a=b;for(b+=h;a<b;a+=3)h=v+u[a],g=v+u[a+1],i=v+u[a+2],k=e[3*h],m=e[3*h+1],l=e[3*h+2],p.set(k,m,l),k=e[3*g],m=e[3*g+1],l=e[3*g+2],t.set(k,m,l),k=e[3*i],m=e[3*i+1],l=e[3*i+2],s.set(k,m,l),q.subVectors(s,t),n.subVectors(p,t),q.cross(n),f[3*h]+=q.x,f[3*h+1]+=q.y,f[3*h+2]+=q.z,f[3*g]+=q.x,f[3*g+1]+=q.y,f[3*g+2]+=q.z,f[3*i]+=q.x,f[3*i+1]+=q.y,f[3*i+2]+=q.z}}else{a=0;for(b=e.length;a<b;a+=9)k=e[a],m=e[a+1],l=e[a+2],p.set(k,m,l),k=e[a+3],m=e[a+4],l=e[a+5],t.set(k,m,l),k=e[a+6],m=e[a+7],l=e[a+8],
s.set(k,m,l),q.subVectors(s,t),n.subVectors(p,t),q.cross(n),f[a]=q.x,f[a+1]=q.y,f[a+2]=q.z,f[a+3]=q.x,f[a+4]=q.y,f[a+5]=q.z,f[a+6]=q.x,f[a+7]=q.y,f[a+8]=q.z}this.normalizeNormals();this.normalsNeedUpdate=!0}},normalizeNormals:function(){for(var a=this.attributes.normal.array,b,c,d,e=0,f=a.length;e<f;e+=3)b=a[e],c=a[e+1],d=a[e+2],b=1/Math.sqrt(b*b+c*c+d*d),a[e]*=b,a[e+1]*=b,a[e+2]*=b},computeTangents:function(){function a(a){na.x=d[3*a];na.y=d[3*a+1];na.z=d[3*a+2];pa.copy(na);Q=g[a];J.copy(Q);J.sub(na.multiplyScalar(na.dot(Q))).normalize();
ca.crossVectors(pa,Q);R=ca.dot(i[a]);C=0>R?-1:1;h[4*a]=J.x;h[4*a+1]=J.y;h[4*a+2]=J.z;h[4*a+3]=C}if(void 0===this.attributes.index||void 0===this.attributes.position||void 0===this.attributes.normal||void 0===this.attributes.uv)console.warn("Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");else{var b=this.attributes.index.array,c=this.attributes.position.array,d=this.attributes.normal.array,e=this.attributes.uv.array,f=c.length/3;void 0===this.attributes.tangent&&
(this.attributes.tangent={itemSize:4,array:new Float32Array(4*f)});for(var h=this.attributes.tangent.array,g=[],i=[],k=0;k<f;k++)g[k]=new THREE.Vector3,i[k]=new THREE.Vector3;var m,l,p,t,s,q,n,u,r,v,z,G,w,y,E,f=new THREE.Vector3,k=new THREE.Vector3,A,K,D,F,O,x,I,B=this.offsets;D=0;for(F=B.length;D<F;++D){K=B[D].start;O=B[D].count;var M=B[D].index;A=K;for(K+=O;A<K;A+=3)O=M+b[A],x=M+b[A+1],I=M+b[A+2],m=c[3*O],l=c[3*O+1],p=c[3*O+2],t=c[3*x],s=c[3*x+1],q=c[3*x+2],n=c[3*I],u=c[3*I+1],r=c[3*I+2],v=e[2*
O],z=e[2*O+1],G=e[2*x],w=e[2*x+1],y=e[2*I],E=e[2*I+1],t-=m,m=n-m,s-=l,l=u-l,q-=p,p=r-p,G-=v,v=y-v,w-=z,z=E-z,E=1/(G*z-v*w),f.set((z*t-w*m)*E,(z*s-w*l)*E,(z*q-w*p)*E),k.set((G*m-v*t)*E,(G*l-v*s)*E,(G*p-v*q)*E),g[O].add(f),g[x].add(f),g[I].add(f),i[O].add(k),i[x].add(k),i[I].add(k)}var J=new THREE.Vector3,ca=new THREE.Vector3,na=new THREE.Vector3,pa=new THREE.Vector3,C,Q,R;D=0;for(F=B.length;D<F;++D){K=B[D].start;O=B[D].count;M=B[D].index;A=K;for(K+=O;A<K;A+=3)O=M+b[A],x=M+b[A+1],I=M+b[A+2],a(O),a(x),
a(I)}this.tangentsNeedUpdate=this.hasTangents=!0}},clone:function(){var a=new THREE.BufferGeometry,b=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],c;for(c in this.attributes){for(var d=this.attributes[c],e=d.array,f={itemSize:d.itemSize,numItems:d.numItems,array:null},d=0,h=b.length;d<h;d++){var g=b[d];if(e instanceof g){f.array=new g(e);break}}a.attributes[c]=f}d=0;for(h=this.offsets.length;d<h;d++)b=this.offsets[d],a.offsets.push({start:b.start,
index:b.index,count:b.count});return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.BufferGeometry.prototype);THREE.Camera=function(){THREE.Object3D.call(this);this.matrixWorldInverse=new THREE.Matrix4;this.projectionMatrix=new THREE.Matrix4;this.projectionMatrixInverse=new THREE.Matrix4};THREE.Camera.prototype=Object.create(THREE.Object3D.prototype);THREE.Camera.prototype.lookAt=function(){var a=new THREE.Matrix4;return function(b){a.lookAt(this.position,b,this.up);this.quaternion.setFromRotationMatrix(a)}}();
THREE.Camera.prototype.clone=function(a){void 0===a&&(a=new THREE.Camera);THREE.Object3D.prototype.clone.call(this,a);a.matrixWorldInverse.copy(this.matrixWorldInverse);a.projectionMatrix.copy(this.projectionMatrix);a.projectionMatrixInverse.copy(this.projectionMatrixInverse);return a};THREE.OrthographicCamera=function(a,b,c,d,e,f){THREE.Camera.call(this);this.left=a;this.right=b;this.top=c;this.bottom=d;this.near=void 0!==e?e:0.1;this.far=void 0!==f?f:2E3;this.updateProjectionMatrix()};THREE.OrthographicCamera.prototype=Object.create(THREE.Camera.prototype);THREE.OrthographicCamera.prototype.updateProjectionMatrix=function(){this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far)};
THREE.OrthographicCamera.prototype.clone=function(){var a=new THREE.OrthographicCamera;THREE.Camera.prototype.clone.call(this,a);a.left=this.left;a.right=this.right;a.top=this.top;a.bottom=this.bottom;a.near=this.near;a.far=this.far;return a};THREE.PerspectiveCamera=function(a,b,c,d){THREE.Camera.call(this);this.fov=void 0!==a?a:50;this.aspect=void 0!==b?b:1;this.near=void 0!==c?c:0.1;this.far=void 0!==d?d:2E3;this.updateProjectionMatrix()};THREE.PerspectiveCamera.prototype=Object.create(THREE.Camera.prototype);THREE.PerspectiveCamera.prototype.setLens=function(a,b){void 0===b&&(b=24);this.fov=2*THREE.Math.radToDeg(Math.atan(b/(2*a)));this.updateProjectionMatrix()};
THREE.PerspectiveCamera.prototype.setViewOffset=function(a,b,c,d,e,f){this.fullWidth=a;this.fullHeight=b;this.x=c;this.y=d;this.width=e;this.height=f;this.updateProjectionMatrix()};
THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){if(this.fullWidth){var a=this.fullWidth/this.fullHeight,b=Math.tan(THREE.Math.degToRad(0.5*this.fov))*this.near,c=-b,d=a*c,a=Math.abs(a*b-d),c=Math.abs(b-c);this.projectionMatrix.makeFrustum(d+this.x*a/this.fullWidth,d+(this.x+this.width)*a/this.fullWidth,b-(this.y+this.height)*c/this.fullHeight,b-this.y*c/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far)};
THREE.PerspectiveCamera.prototype.clone=function(){var a=new THREE.PerspectiveCamera;THREE.Camera.prototype.clone.call(this,a);a.fov=this.fov;a.aspect=this.aspect;a.near=this.near;a.far=this.far;return a};THREE.Light=function(a){THREE.Object3D.call(this);this.color=new THREE.Color(a)};THREE.Light.prototype=Object.create(THREE.Object3D.prototype);THREE.Light.prototype.clone=function(a){void 0===a&&(a=new THREE.Light);THREE.Object3D.prototype.clone.call(this,a);a.color.copy(this.color);return a};THREE.AmbientLight=function(a){THREE.Light.call(this,a)};THREE.AmbientLight.prototype=Object.create(THREE.Light.prototype);THREE.AmbientLight.prototype.clone=function(){var a=new THREE.AmbientLight;THREE.Light.prototype.clone.call(this,a);return a};THREE.AreaLight=function(a,b){THREE.Light.call(this,a);this.normal=new THREE.Vector3(0,-1,0);this.right=new THREE.Vector3(1,0,0);this.intensity=void 0!==b?b:1;this.height=this.width=1;this.constantAttenuation=1.5;this.linearAttenuation=0.5;this.quadraticAttenuation=0.1};THREE.AreaLight.prototype=Object.create(THREE.Light.prototype);THREE.DirectionalLight=function(a,b){THREE.Light.call(this,a);this.position.set(0,1,0);this.target=new THREE.Object3D;this.intensity=void 0!==b?b:1;this.onlyShadow=this.castShadow=!1;this.shadowCameraNear=50;this.shadowCameraFar=5E3;this.shadowCameraLeft=-500;this.shadowCameraTop=this.shadowCameraRight=500;this.shadowCameraBottom=-500;this.shadowCameraVisible=!1;this.shadowBias=0;this.shadowDarkness=0.5;this.shadowMapHeight=this.shadowMapWidth=512;this.shadowCascade=!1;this.shadowCascadeOffset=new THREE.Vector3(0,
0,-1E3);this.shadowCascadeCount=2;this.shadowCascadeBias=[0,0,0];this.shadowCascadeWidth=[512,512,512];this.shadowCascadeHeight=[512,512,512];this.shadowCascadeNearZ=[-1,0.99,0.998];this.shadowCascadeFarZ=[0.99,0.998,1];this.shadowCascadeArray=[];this.shadowMatrix=this.shadowCamera=this.shadowMapSize=this.shadowMap=null};THREE.DirectionalLight.prototype=Object.create(THREE.Light.prototype);
THREE.DirectionalLight.prototype.clone=function(){var a=new THREE.DirectionalLight;THREE.Light.prototype.clone.call(this,a);a.target=this.target.clone();a.intensity=this.intensity;a.castShadow=this.castShadow;a.onlyShadow=this.onlyShadow;return a};THREE.HemisphereLight=function(a,b,c){THREE.Light.call(this,a);this.position.set(0,100,0);this.groundColor=new THREE.Color(b);this.intensity=void 0!==c?c:1};THREE.HemisphereLight.prototype=Object.create(THREE.Light.prototype);THREE.HemisphereLight.prototype.clone=function(){var a=new THREE.HemisphereLight;THREE.Light.prototype.clone.call(this,a);a.groundColor.copy(this.groundColor);a.intensity=this.intensity;return a};THREE.PointLight=function(a,b,c){THREE.Light.call(this,a);this.intensity=void 0!==b?b:1;this.distance=void 0!==c?c:0};THREE.PointLight.prototype=Object.create(THREE.Light.prototype);THREE.PointLight.prototype.clone=function(){var a=new THREE.PointLight;THREE.Light.prototype.clone.call(this,a);a.intensity=this.intensity;a.distance=this.distance;return a};THREE.SpotLight=function(a,b,c,d,e){THREE.Light.call(this,a);this.position.set(0,1,0);this.target=new THREE.Object3D;this.intensity=void 0!==b?b:1;this.distance=void 0!==c?c:0;this.angle=void 0!==d?d:Math.PI/3;this.exponent=void 0!==e?e:10;this.onlyShadow=this.castShadow=!1;this.shadowCameraNear=50;this.shadowCameraFar=5E3;this.shadowCameraFov=50;this.shadowCameraVisible=!1;this.shadowBias=0;this.shadowDarkness=0.5;this.shadowMapHeight=this.shadowMapWidth=512;this.shadowMatrix=this.shadowCamera=this.shadowMapSize=
this.shadowMap=null};THREE.SpotLight.prototype=Object.create(THREE.Light.prototype);THREE.SpotLight.prototype.clone=function(){var a=new THREE.SpotLight;THREE.Light.prototype.clone.call(this,a);a.target=this.target.clone();a.intensity=this.intensity;a.distance=this.distance;a.angle=this.angle;a.exponent=this.exponent;a.castShadow=this.castShadow;a.onlyShadow=this.onlyShadow;return a};THREE.Loader=function(a){this.statusDomElement=(this.showStatus=a)?THREE.Loader.prototype.addStatusElement():null;this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){}};
THREE.Loader.prototype={constructor:THREE.Loader,crossOrigin:"anonymous",addStatusElement:function(){var a=document.createElement("div");a.style.position="absolute";a.style.right="0px";a.style.top="0px";a.style.fontSize="0.8em";a.style.textAlign="left";a.style.background="rgba(0,0,0,0.25)";a.style.color="#fff";a.style.width="120px";a.style.padding="0.5em 0.5em 0.5em 0.5em";a.style.zIndex=1E3;a.innerHTML="Loading ...";return a},updateProgress:function(a){var b="Loaded ",b=a.total?b+((100*a.loaded/
a.total).toFixed(0)+"%"):b+((a.loaded/1E3).toFixed(2)+" KB");this.statusDomElement.innerHTML=b},extractUrlBase:function(a){a=a.split("/");a.pop();return(1>a.length?".":a.join("/"))+"/"},initMaterials:function(a,b){for(var c=[],d=0;d<a.length;++d)c[d]=THREE.Loader.prototype.createMaterial(a[d],b);return c},needsTangents:function(a){for(var b=0,c=a.length;b<c;b++)if(a[b]instanceof THREE.ShaderMaterial)return!0;return!1},createMaterial:function(a,b){function c(a){a=Math.log(a)/Math.LN2;return Math.floor(a)==
a}function d(a){a=Math.log(a)/Math.LN2;return Math.pow(2,Math.round(a))}function e(a,e,f,g,i,k,n){var u=/\.dds$/i.test(f),r=b+"/"+f;if(u){var v=THREE.ImageUtils.loadCompressedTexture(r);a[e]=v}else v=document.createElement("canvas"),a[e]=new THREE.Texture(v);a[e].sourceFile=f;g&&(a[e].repeat.set(g[0],g[1]),1!==g[0]&&(a[e].wrapS=THREE.RepeatWrapping),1!==g[1]&&(a[e].wrapT=THREE.RepeatWrapping));i&&a[e].offset.set(i[0],i[1]);k&&(f={repeat:THREE.RepeatWrapping,mirror:THREE.MirroredRepeatWrapping},void 0!==
f[k[0]]&&(a[e].wrapS=f[k[0]]),void 0!==f[k[1]]&&(a[e].wrapT=f[k[1]]));n&&(a[e].anisotropy=n);if(!u){var z=a[e],a=new Image;a.onload=function(){if(!c(this.width)||!c(this.height)){var a=d(this.width),b=d(this.height);z.image.width=a;z.image.height=b;z.image.getContext("2d").drawImage(this,0,0,a,b)}else z.image=this;z.needsUpdate=!0};a.crossOrigin=h.crossOrigin;a.src=r}}function f(a){return(255*a[0]<<16)+(255*a[1]<<8)+255*a[2]}var h=this,g="MeshLambertMaterial",i={color:15658734,opacity:1,map:null,
lightMap:null,normalMap:null,bumpMap:null,wireframe:!1};if(a.shading){var k=a.shading.toLowerCase();"phong"===k?g="MeshPhongMaterial":"basic"===k&&(g="MeshBasicMaterial")}void 0!==a.blending&&void 0!==THREE[a.blending]&&(i.blending=THREE[a.blending]);if(void 0!==a.transparent||1>a.opacity)i.transparent=a.transparent;void 0!==a.depthTest&&(i.depthTest=a.depthTest);void 0!==a.depthWrite&&(i.depthWrite=a.depthWrite);void 0!==a.visible&&(i.visible=a.visible);void 0!==a.flipSided&&(i.side=THREE.BackSide);
void 0!==a.doubleSided&&(i.side=THREE.DoubleSide);void 0!==a.wireframe&&(i.wireframe=a.wireframe);void 0!==a.vertexColors&&("face"===a.vertexColors?i.vertexColors=THREE.FaceColors:a.vertexColors&&(i.vertexColors=THREE.VertexColors));a.colorDiffuse?i.color=f(a.colorDiffuse):a.DbgColor&&(i.color=a.DbgColor);a.colorSpecular&&(i.specular=f(a.colorSpecular));a.colorAmbient&&(i.ambient=f(a.colorAmbient));a.transparency&&(i.opacity=a.transparency);a.specularCoef&&(i.shininess=a.specularCoef);a.mapDiffuse&&
b&&e(i,"map",a.mapDiffuse,a.mapDiffuseRepeat,a.mapDiffuseOffset,a.mapDiffuseWrap,a.mapDiffuseAnisotropy);a.mapLight&&b&&e(i,"lightMap",a.mapLight,a.mapLightRepeat,a.mapLightOffset,a.mapLightWrap,a.mapLightAnisotropy);a.mapBump&&b&&e(i,"bumpMap",a.mapBump,a.mapBumpRepeat,a.mapBumpOffset,a.mapBumpWrap,a.mapBumpAnisotropy);a.mapNormal&&b&&e(i,"normalMap",a.mapNormal,a.mapNormalRepeat,a.mapNormalOffset,a.mapNormalWrap,a.mapNormalAnisotropy);a.mapSpecular&&b&&e(i,"specularMap",a.mapSpecular,a.mapSpecularRepeat,
a.mapSpecularOffset,a.mapSpecularWrap,a.mapSpecularAnisotropy);a.mapBumpScale&&(i.bumpScale=a.mapBumpScale);a.mapNormal?(g=THREE.ShaderLib.normalmap,k=THREE.UniformsUtils.clone(g.uniforms),k.tNormal.value=i.normalMap,a.mapNormalFactor&&k.uNormalScale.value.set(a.mapNormalFactor,a.mapNormalFactor),i.map&&(k.tDiffuse.value=i.map,k.enableDiffuse.value=!0),i.specularMap&&(k.tSpecular.value=i.specularMap,k.enableSpecular.value=!0),i.lightMap&&(k.tAO.value=i.lightMap,k.enableAO.value=!0),k.uDiffuseColor.value.setHex(i.color),
k.uSpecularColor.value.setHex(i.specular),k.uAmbientColor.value.setHex(i.ambient),k.uShininess.value=i.shininess,void 0!==i.opacity&&(k.uOpacity.value=i.opacity),g=new THREE.ShaderMaterial({fragmentShader:g.fragmentShader,vertexShader:g.vertexShader,uniforms:k,lights:!0,fog:!0}),i.transparent&&(g.transparent=!0)):g=new THREE[g](i);void 0!==a.DbgName&&(g.name=a.DbgName);return g}};THREE.XHRLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.XHRLoader.prototype={constructor:THREE.XHRLoader,load:function(a,b,c,d){var e=this,f=new XMLHttpRequest;void 0!==b&&f.addEventListener("load",function(c){b(c.target.responseText);e.manager.itemEnd(a)},!1);void 0!==c&&f.addEventListener("progress",function(a){c(a)},!1);void 0!==d&&f.addEventListener("error",function(a){d(a)},!1);void 0!==this.crossOrigin&&(f.crossOrigin=this.crossOrigin);f.open("GET",a,!0);f.send(null);e.manager.itemStart(a)},setCrossOrigin:function(a){this.crossOrigin=a}};THREE.ImageLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.ImageLoader.prototype={constructor:THREE.ImageLoader,load:function(a,b,c,d){var e=this,f=document.createElement("img");void 0!==b&&f.addEventListener("load",function(){e.manager.itemEnd(a);b(this)},!1);void 0!==c&&f.addEventListener("progress",function(a){c(a)},!1);void 0!==d&&f.addEventListener("error",function(a){d(a)},!1);void 0!==this.crossOrigin&&(f.crossOrigin=this.crossOrigin);f.src=a;e.manager.itemStart(a);return f},setCrossOrigin:function(a){this.crossOrigin=a}};THREE.JSONLoader=function(a){THREE.Loader.call(this,a);this.withCredentials=!1};THREE.JSONLoader.prototype=Object.create(THREE.Loader.prototype);THREE.JSONLoader.prototype.load=function(a,b,c){c=c&&"string"===typeof c?c:this.extractUrlBase(a);this.onLoadStart();this.loadAjaxJSON(this,a,b,c)};
THREE.JSONLoader.prototype.loadAjaxJSON=function(a,b,c,d,e){var f=new XMLHttpRequest,h=0;f.onreadystatechange=function(){if(f.readyState===f.DONE)if(200===f.status||0===f.status){if(f.responseText){var g=JSON.parse(f.responseText),g=a.parse(g,d);c(g.geometry,g.materials)}else console.warn("THREE.JSONLoader: ["+b+"] seems to be unreachable or file there is empty");a.onLoadComplete()}else console.error("THREE.JSONLoader: Couldn't load ["+b+"] ["+f.status+"]");else f.readyState===f.LOADING?e&&(0===h&&
(h=f.getResponseHeader("Content-Length")),e({total:h,loaded:f.responseText.length})):f.readyState===f.HEADERS_RECEIVED&&void 0!==e&&(h=f.getResponseHeader("Content-Length"))};f.open("GET",b,!0);f.withCredentials=this.withCredentials;f.send(null)};
THREE.JSONLoader.prototype.parse=function(a,b){var c=new THREE.Geometry,d=void 0!==a.scale?1/a.scale:1,e,f,h,g,i,k,m,l,p,t,s,q,n,u,r=a.faces;p=a.vertices;var v=a.normals,z=a.colors,G=0;if(void 0!==a.uvs){for(e=0;e<a.uvs.length;e++)a.uvs[e].length&&G++;for(e=0;e<G;e++)c.faceVertexUvs[e]=[]}g=0;for(i=p.length;g<i;)k=new THREE.Vector3,k.x=p[g++]*d,k.y=p[g++]*d,k.z=p[g++]*d,c.vertices.push(k);g=0;for(i=r.length;g<i;)if(p=r[g++],t=p&1,h=p&2,e=p&8,m=p&16,s=p&32,k=p&64,p&=128,t){t=new THREE.Face3;t.a=r[g];
t.b=r[g+1];t.c=r[g+3];q=new THREE.Face3;q.a=r[g+1];q.b=r[g+2];q.c=r[g+3];g+=4;h&&(h=r[g++],t.materialIndex=h,q.materialIndex=h);h=c.faces.length;if(e)for(e=0;e<G;e++){n=a.uvs[e];c.faceVertexUvs[e][h]=[];c.faceVertexUvs[e][h+1]=[];for(f=0;4>f;f++)l=r[g++],u=n[2*l],l=n[2*l+1],u=new THREE.Vector2(u,l),2!==f&&c.faceVertexUvs[e][h].push(u),0!==f&&c.faceVertexUvs[e][h+1].push(u)}m&&(m=3*r[g++],t.normal.set(v[m++],v[m++],v[m]),q.normal.copy(t.normal));if(s)for(e=0;4>e;e++)m=3*r[g++],s=new THREE.Vector3(v[m++],
v[m++],v[m]),2!==e&&t.vertexNormals.push(s),0!==e&&q.vertexNormals.push(s);k&&(k=r[g++],k=z[k],t.color.setHex(k),q.color.setHex(k));if(p)for(e=0;4>e;e++)k=r[g++],k=z[k],2!==e&&t.vertexColors.push(new THREE.Color(k)),0!==e&&q.vertexColors.push(new THREE.Color(k));c.faces.push(t);c.faces.push(q)}else{t=new THREE.Face3;t.a=r[g++];t.b=r[g++];t.c=r[g++];h&&(h=r[g++],t.materialIndex=h);h=c.faces.length;if(e)for(e=0;e<G;e++){n=a.uvs[e];c.faceVertexUvs[e][h]=[];for(f=0;3>f;f++)l=r[g++],u=n[2*l],l=n[2*l+1],
u=new THREE.Vector2(u,l),c.faceVertexUvs[e][h].push(u)}m&&(m=3*r[g++],t.normal.set(v[m++],v[m++],v[m]));if(s)for(e=0;3>e;e++)m=3*r[g++],s=new THREE.Vector3(v[m++],v[m++],v[m]),t.vertexNormals.push(s);k&&(k=r[g++],t.color.setHex(z[k]));if(p)for(e=0;3>e;e++)k=r[g++],t.vertexColors.push(new THREE.Color(z[k]));c.faces.push(t)}if(a.skinWeights){g=0;for(i=a.skinWeights.length;g<i;g+=2)r=a.skinWeights[g],v=a.skinWeights[g+1],c.skinWeights.push(new THREE.Vector4(r,v,0,0))}if(a.skinIndices){g=0;for(i=a.skinIndices.length;g<
i;g+=2)r=a.skinIndices[g],v=a.skinIndices[g+1],c.skinIndices.push(new THREE.Vector4(r,v,0,0))}c.bones=a.bones;c.animation=a.animation;c.animations=a.animations;if(void 0!==a.morphTargets){g=0;for(i=a.morphTargets.length;g<i;g++){c.morphTargets[g]={};c.morphTargets[g].name=a.morphTargets[g].name;c.morphTargets[g].vertices=[];z=c.morphTargets[g].vertices;G=a.morphTargets[g].vertices;r=0;for(v=G.length;r<v;r+=3)p=new THREE.Vector3,p.x=G[r]*d,p.y=G[r+1]*d,p.z=G[r+2]*d,z.push(p)}}if(void 0!==a.morphColors){g=
0;for(i=a.morphColors.length;g<i;g++){c.morphColors[g]={};c.morphColors[g].name=a.morphColors[g].name;c.morphColors[g].colors=[];v=c.morphColors[g].colors;z=a.morphColors[g].colors;d=0;for(r=z.length;d<r;d+=3)G=new THREE.Color(16755200),G.setRGB(z[d],z[d+1],z[d+2]),v.push(G)}}c.computeCentroids();c.computeFaceNormals();c.computeBoundingSphere();if(void 0===a.materials)return{geometry:c};d=this.initMaterials(a.materials,b);this.needsTangents(d)&&c.computeTangents();return{geometry:c,materials:d}};THREE.LoadingManager=function(a,b,c){var d=this,e=0,f=0;this.onLoad=a;this.onProgress=b;this.onError=c;this.itemStart=function(){f++};this.itemEnd=function(a){e++;if(void 0!==d.onProgress)d.onProgress(a,e,f);if(e===f&&void 0!==d.onLoad)d.onLoad()}};THREE.DefaultLoadingManager=new THREE.LoadingManager;THREE.BufferGeometryLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.BufferGeometryLoader.prototype={constructor:THREE.BufferGeometryLoader,load:function(a,b){var c=this,d=new THREE.XHRLoader;d.setCrossOrigin(this.crossOrigin);d.load(a,function(a){b(c.parse(JSON.parse(a)))})},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a){var b=new THREE.BufferGeometry,c=a.attributes,d=a.offsets,a=a.boundingSphere,e;for(e in c){var f=c[e];b.attributes[e]={itemSize:f.itemSize,array:new self[f.type](f.array)}}void 0!==d&&(b.offsets=JSON.parse(JSON.stringify(d)));
void 0!==a&&(b.boundingSphere=new THREE.Sphere((new THREE.Vector3).fromArray(void 0!==a.center?a.center:[0,0,0]),a.radius));return b}};THREE.GeometryLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};THREE.GeometryLoader.prototype={constructor:THREE.GeometryLoader,load:function(a,b){var c=this,d=new THREE.XHRLoader;d.setCrossOrigin(this.crossOrigin);d.load(a,function(a){b(c.parse(JSON.parse(a)))})},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(){}};THREE.MaterialLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.MaterialLoader.prototype={constructor:THREE.MaterialLoader,load:function(a,b){var c=this,d=new THREE.XHRLoader;d.setCrossOrigin(this.crossOrigin);d.load(a,function(a){b(c.parse(JSON.parse(a)))})},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a){var b=new THREE[a.type];void 0!==a.color&&b.color.setHex(a.color);void 0!==a.ambient&&b.ambient.setHex(a.ambient);void 0!==a.emissive&&b.emissive.setHex(a.emissive);void 0!==a.specular&&b.specular.setHex(a.specular);void 0!==a.shininess&&
(b.shininess=a.shininess);void 0!==a.vertexColors&&(b.vertexColors=a.vertexColors);void 0!==a.blending&&(b.blending=a.blending);void 0!==a.side&&(b.side=a.side);void 0!==a.opacity&&(b.opacity=a.opacity);void 0!==a.transparent&&(b.transparent=a.transparent);void 0!==a.wireframe&&(b.wireframe=a.wireframe);if(void 0!==a.materials)for(var c=0,d=a.materials.length;c<d;c++)b.materials.push(this.parse(a.materials[c]));return b}};THREE.ObjectLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.ObjectLoader.prototype={constructor:THREE.ObjectLoader,load:function(a,b){var c=this,d=new THREE.XHRLoader(c.manager);d.setCrossOrigin(this.crossOrigin);d.load(a,function(a){b(c.parse(JSON.parse(a)))})},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a){var b=this.parseGeometries(a.geometries),c=this.parseMaterials(a.materials);return this.parseObject(a.object,b,c)},parseGeometries:function(a){var b={};if(void 0!==a)for(var c=new THREE.JSONLoader,d=new THREE.BufferGeometryLoader,
e=0,f=a.length;e<f;e++){var h,g=a[e];switch(g.type){case "PlaneGeometry":h=new THREE.PlaneGeometry(g.width,g.height,g.widthSegments,g.heightSegments);break;case "CircleGeometry":h=new THREE.CircleGeometry(g.radius,g.segments);break;case "CubeGeometry":h=new THREE.CubeGeometry(g.width,g.height,g.depth,g.widthSegments,g.heightSegments,g.depthSegments);break;case "CylinderGeometry":h=new THREE.CylinderGeometry(g.radiusTop,g.radiusBottom,g.height,g.radialSegments,g.heightSegments,g.openEnded);break;case "SphereGeometry":h=
new THREE.SphereGeometry(g.radius,g.widthSegments,g.heightSegments,g.phiStart,g.phiLength,g.thetaStart,g.thetaLength);break;case "IcosahedronGeometry":h=new THREE.IcosahedronGeometry(g.radius,g.detail);break;case "TorusGeometry":h=new THREE.TorusGeometry(g.radius,g.tube,g.radialSegments,g.tubularSegments,g.arc);break;case "TorusKnotGeometry":h=new THREE.TorusKnotGeometry(g.radius,g.tube,g.radialSegments,g.tubularSegments,g.p,g.q,g.heightScale);break;case "BufferGeometry":h=d.parse(g.data);break;case "Geometry":h=
c.parse(g.data).geometry}h.uuid=g.uuid;void 0!==g.name&&(h.name=g.name);b[g.uuid]=h}return b},parseMaterials:function(a){var b={};if(void 0!==a)for(var c=new THREE.MaterialLoader,d=0,e=a.length;d<e;d++){var f=a[d],h=c.parse(f);h.uuid=f.uuid;void 0!==f.name&&(h.name=f.name);b[f.uuid]=h}return b},parseObject:function(){var a=new THREE.Matrix4;return function(b,c,d){var e;switch(b.type){case "Scene":e=new THREE.Scene;break;case "PerspectiveCamera":e=new THREE.PerspectiveCamera(b.fov,b.aspect,b.near,
b.far);break;case "OrthographicCamera":e=new THREE.OrthographicCamera(b.left,b.right,b.top,b.bottom,b.near,b.far);break;case "AmbientLight":e=new THREE.AmbientLight(b.color);break;case "DirectionalLight":e=new THREE.DirectionalLight(b.color,b.intensity);break;case "PointLight":e=new THREE.PointLight(b.color,b.intensity,b.distance);break;case "SpotLight":e=new THREE.SpotLight(b.color,b.intensity,b.distance,b.angle,b.exponent);break;case "HemisphereLight":e=new THREE.HemisphereLight(b.color,b.groundColor,
b.intensity);break;case "Mesh":e=c[b.geometry];var f=d[b.material];void 0===e&&console.error("THREE.ObjectLoader: Undefined geometry "+b.geometry);void 0===f&&console.error("THREE.ObjectLoader: Undefined material "+b.material);e=new THREE.Mesh(e,f);break;case "Sprite":f=d[b.material];void 0===f&&console.error("THREE.ObjectLoader: Undefined material "+b.material);e=new THREE.Sprite(f);break;default:e=new THREE.Object3D}e.uuid=b.uuid;void 0!==b.name&&(e.name=b.name);void 0!==b.matrix?(a.fromArray(b.matrix),
a.decompose(e.position,e.quaternion,e.scale)):(void 0!==b.position&&e.position.fromArray(b.position),void 0!==b.rotation&&e.rotation.fromArray(b.rotation),void 0!==b.scale&&e.scale.fromArray(b.scale));void 0!==b.visible&&(e.visible=b.visible);void 0!==b.userData&&(e.userData=b.userData);if(void 0!==b.children)for(var h in b.children)e.add(this.parseObject(b.children[h],c,d));return e}}()};THREE.SceneLoader=function(){this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){};this.callbackSync=function(){};this.callbackProgress=function(){};this.geometryHandlers={};this.hierarchyHandlers={};this.addGeometryHandler("ascii",THREE.JSONLoader)};
THREE.SceneLoader.prototype={constructor:THREE.SceneLoader,load:function(a,b){var c=this,d=new THREE.XHRLoader(c.manager);d.setCrossOrigin(this.crossOrigin);d.load(a,function(d){c.parse(JSON.parse(d),b,a)})},setCrossOrigin:function(a){this.crossOrigin=a},addGeometryHandler:function(a,b){this.geometryHandlers[a]={loaderClass:b}},addHierarchyHandler:function(a,b){this.hierarchyHandlers[a]={loaderClass:b}},parse:function(a,b,c){function d(a,b){return"relativeToHTML"==b?a:p+"/"+a}function e(){f(y.scene,
A.objects)}function f(a,b){var c,e,h,i,k,m;for(m in b){var p=y.objects[m],n=b[m];if(void 0===p){if(n.type&&n.type in l.hierarchyHandlers){if(void 0===n.loading){c={type:1,url:1,material:1,position:1,rotation:1,scale:1,visible:1,children:1,userData:1,skin:1,morph:1,mirroredLoop:1,duration:1};var u={},v;for(v in n)v in c||(u[v]=n[v]);s=y.materials[n.material];n.loading=!0;c=l.hierarchyHandlers[n.type].loaderObject;c.options?c.load(d(n.url,A.urlBaseType),g(m,a,s,n)):c.load(d(n.url,A.urlBaseType),g(m,
a,s,n),u)}}else if(void 0!==n.geometry){if(t=y.geometries[n.geometry]){p=!1;s=y.materials[n.material];p=s instanceof THREE.ShaderMaterial;e=n.position;h=n.rotation;i=n.scale;c=n.matrix;k=n.quaternion;n.material||(s=new THREE.MeshFaceMaterial(y.face_materials[n.geometry]));s instanceof THREE.MeshFaceMaterial&&0===s.materials.length&&(s=new THREE.MeshFaceMaterial(y.face_materials[n.geometry]));if(s instanceof THREE.MeshFaceMaterial)for(u=0;u<s.materials.length;u++)p=p||s.materials[u]instanceof THREE.ShaderMaterial;
p&&t.computeTangents();n.skin?p=new THREE.SkinnedMesh(t,s):n.morph?(p=new THREE.MorphAnimMesh(t,s),void 0!==n.duration&&(p.duration=n.duration),void 0!==n.time&&(p.time=n.time),void 0!==n.mirroredLoop&&(p.mirroredLoop=n.mirroredLoop),s.morphNormals&&t.computeMorphNormals()):p=new THREE.Mesh(t,s);p.name=m;c?(p.matrixAutoUpdate=!1,p.matrix.set(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15])):(p.position.fromArray(e),k?p.quaternion.fromArray(k):p.rotation.fromArray(h),
p.scale.fromArray(i));p.visible=n.visible;p.castShadow=n.castShadow;p.receiveShadow=n.receiveShadow;a.add(p);y.objects[m]=p}}else if("AmbientLight"===n.type||"PointLight"===n.type||"DirectionalLight"===n.type||"SpotLight"===n.type||"HemisphereLight"===n.type||"AreaLight"===n.type){u=n.color;c=n.intensity;e=n.distance;h=n.position;i=n.rotation;switch(n.type){case "AmbientLight":r=new THREE.AmbientLight(u);break;case "PointLight":r=new THREE.PointLight(u,c,e);r.position.fromArray(h);break;case "DirectionalLight":r=
new THREE.DirectionalLight(u,c);r.position.fromArray(n.direction);break;case "SpotLight":r=new THREE.SpotLight(u,c,e,1);r.angle=n.angle;r.position.fromArray(h);r.target.set(h[0],h[1]-e,h[2]);r.target.applyEuler(new THREE.Euler(i[0],i[1],i[2],"XYZ"));break;case "HemisphereLight":r=new THREE.DirectionalLight(u,c,e);r.target.set(h[0],h[1]-e,h[2]);r.target.applyEuler(new THREE.Euler(i[0],i[1],i[2],"XYZ"));break;case "AreaLight":r=new THREE.AreaLight(u,c),r.position.fromArray(h),r.width=n.size,r.height=
n.size_y}a.add(r);r.name=m;y.lights[m]=r;y.objects[m]=r}else"PerspectiveCamera"===n.type||"OrthographicCamera"===n.type?(e=n.position,h=n.rotation,k=n.quaternion,"PerspectiveCamera"===n.type?q=new THREE.PerspectiveCamera(n.fov,n.aspect,n.near,n.far):"OrthographicCamera"===n.type&&(q=new THREE.OrthographicCamera(n.left,n.right,n.top,n.bottom,n.near,n.far)),q.name=m,q.position.fromArray(e),void 0!==k?q.quaternion.fromArray(k):void 0!==h&&q.rotation.fromArray(h),a.add(q),y.cameras[m]=q,y.objects[m]=
q):(e=n.position,h=n.rotation,i=n.scale,k=n.quaternion,p=new THREE.Object3D,p.name=m,p.position.fromArray(e),k?p.quaternion.fromArray(k):p.rotation.fromArray(h),p.scale.fromArray(i),p.visible=void 0!==n.visible?n.visible:!1,a.add(p),y.objects[m]=p,y.empties[m]=p);if(p){if(void 0!==n.userData)for(var z in n.userData)p.userData[z]=n.userData[z];if(void 0!==n.groups)for(u=0;u<n.groups.length;u++)c=n.groups[u],void 0===y.groups[c]&&(y.groups[c]=[]),y.groups[c].push(m)}}void 0!==p&&void 0!==n.children&&
f(p,n.children)}}function h(a){return function(b,c){b.name=a;y.geometries[a]=b;y.face_materials[a]=c;e();v-=1;l.onLoadComplete();k()}}function g(a,b,c,d){return function(f){var f=f.content?f.content:f.dae?f.scene:f,h=d.rotation,g=d.quaternion,i=d.scale;f.position.fromArray(d.position);g?f.quaternion.fromArray(g):f.rotation.fromArray(h);f.scale.fromArray(i);c&&f.traverse(function(a){a.material=c});var m=void 0!==d.visible?d.visible:!0;f.traverse(function(a){a.visible=m});b.add(f);f.name=a;y.objects[a]=
f;e();v-=1;l.onLoadComplete();k()}}function i(a){return function(b,c){b.name=a;y.geometries[a]=b;y.face_materials[a]=c}}function k(){l.callbackProgress({totalModels:G,totalTextures:w,loadedModels:G-v,loadedTextures:w-z},y);l.onLoadProgress();if(0===v&&0===z){for(var a=0;a<E.length;a++){var c=E[a],d=y.objects[c.targetName];d?c.object.target=d:(c.object.target=new THREE.Object3D,y.scene.add(c.object.target));c.object.target.userData.targetInverse=c.object}b(y)}}function m(a,b){b(a);if(void 0!==a.children)for(var c in a.children)m(a.children[c],
b)}var l=this,p=THREE.Loader.prototype.extractUrlBase(c),t,s,q,n,u,r,v,z,G,w,y,E=[],A=a,K;for(K in this.geometryHandlers)a=this.geometryHandlers[K].loaderClass,this.geometryHandlers[K].loaderObject=new a;for(K in this.hierarchyHandlers)a=this.hierarchyHandlers[K].loaderClass,this.hierarchyHandlers[K].loaderObject=new a;z=v=0;y={scene:new THREE.Scene,geometries:{},face_materials:{},materials:{},textures:{},objects:{},cameras:{},lights:{},fogs:{},empties:{},groups:{}};if(A.transform&&(K=A.transform.position,
a=A.transform.rotation,c=A.transform.scale,K&&y.scene.position.fromArray(K),a&&y.scene.rotation.fromArray(a),c&&y.scene.scale.fromArray(c),K||a||c))y.scene.updateMatrix(),y.scene.updateMatrixWorld();K=function(a){return function(){z-=a;k();l.onLoadComplete()}};for(var D in A.fogs)a=A.fogs[D],"linear"===a.type?n=new THREE.Fog(0,a.near,a.far):"exp2"===a.type&&(n=new THREE.FogExp2(0,a.density)),a=a.color,n.color.setRGB(a[0],a[1],a[2]),y.fogs[D]=n;for(var F in A.geometries)n=A.geometries[F],n.type in
this.geometryHandlers&&(v+=1,l.onLoadStart());for(var O in A.objects)m(A.objects[O],function(a){a.type&&a.type in l.hierarchyHandlers&&(v+=1,l.onLoadStart())});G=v;for(F in A.geometries)if(n=A.geometries[F],"cube"===n.type)t=new THREE.CubeGeometry(n.width,n.height,n.depth,n.widthSegments,n.heightSegments,n.depthSegments),t.name=F,y.geometries[F]=t;else if("plane"===n.type)t=new THREE.PlaneGeometry(n.width,n.height,n.widthSegments,n.heightSegments),t.name=F,y.geometries[F]=t;else if("sphere"===n.type)t=
new THREE.SphereGeometry(n.radius,n.widthSegments,n.heightSegments),t.name=F,y.geometries[F]=t;else if("cylinder"===n.type)t=new THREE.CylinderGeometry(n.topRad,n.botRad,n.height,n.radSegs,n.heightSegs),t.name=F,y.geometries[F]=t;else if("torus"===n.type)t=new THREE.TorusGeometry(n.radius,n.tube,n.segmentsR,n.segmentsT),t.name=F,y.geometries[F]=t;else if("icosahedron"===n.type)t=new THREE.IcosahedronGeometry(n.radius,n.subdivisions),t.name=F,y.geometries[F]=t;else if(n.type in this.geometryHandlers){O=
{};for(u in n)"type"!==u&&"url"!==u&&(O[u]=n[u]);this.geometryHandlers[n.type].loaderObject.load(d(n.url,A.urlBaseType),h(F),O)}else"embedded"===n.type&&(O=A.embeds[n.id],O.metadata=A.metadata,O&&(O=this.geometryHandlers.ascii.loaderObject.parse(O,""),i(F)(O.geometry,O.materials)));for(var x in A.textures)if(F=A.textures[x],F.url instanceof Array){z+=F.url.length;for(u=0;u<F.url.length;u++)l.onLoadStart()}else z+=1,l.onLoadStart();w=z;for(x in A.textures){F=A.textures[x];void 0!==F.mapping&&void 0!==
THREE[F.mapping]&&(F.mapping=new THREE[F.mapping]);if(F.url instanceof Array){O=F.url.length;n=[];for(u=0;u<O;u++)n[u]=d(F.url[u],A.urlBaseType);u=(u=/\.dds$/i.test(n[0]))?THREE.ImageUtils.loadCompressedTextureCube(n,F.mapping,K(O)):THREE.ImageUtils.loadTextureCube(n,F.mapping,K(O))}else u=/\.dds$/i.test(F.url),O=d(F.url,A.urlBaseType),n=K(1),u=u?THREE.ImageUtils.loadCompressedTexture(O,F.mapping,n):THREE.ImageUtils.loadTexture(O,F.mapping,n),void 0!==THREE[F.minFilter]&&(u.minFilter=THREE[F.minFilter]),
void 0!==THREE[F.magFilter]&&(u.magFilter=THREE[F.magFilter]),F.anisotropy&&(u.anisotropy=F.anisotropy),F.repeat&&(u.repeat.set(F.repeat[0],F.repeat[1]),1!==F.repeat[0]&&(u.wrapS=THREE.RepeatWrapping),1!==F.repeat[1]&&(u.wrapT=THREE.RepeatWrapping)),F.offset&&u.offset.set(F.offset[0],F.offset[1]),F.wrap&&(O={repeat:THREE.RepeatWrapping,mirror:THREE.MirroredRepeatWrapping},void 0!==O[F.wrap[0]]&&(u.wrapS=O[F.wrap[0]]),void 0!==O[F.wrap[1]]&&(u.wrapT=O[F.wrap[1]]));y.textures[x]=u}var I,B;for(I in A.materials){x=
A.materials[I];for(B in x.parameters)"envMap"===B||"map"===B||"lightMap"===B||"bumpMap"===B?x.parameters[B]=y.textures[x.parameters[B]]:"shading"===B?x.parameters[B]="flat"===x.parameters[B]?THREE.FlatShading:THREE.SmoothShading:"side"===B?x.parameters[B]="double"==x.parameters[B]?THREE.DoubleSide:"back"==x.parameters[B]?THREE.BackSide:THREE.FrontSide:"blending"===B?x.parameters[B]=x.parameters[B]in THREE?THREE[x.parameters[B]]:THREE.NormalBlending:"combine"===B?x.parameters[B]=x.parameters[B]in THREE?
THREE[x.parameters[B]]:THREE.MultiplyOperation:"vertexColors"===B?"face"==x.parameters[B]?x.parameters[B]=THREE.FaceColors:x.parameters[B]&&(x.parameters[B]=THREE.VertexColors):"wrapRGB"===B&&(K=x.parameters[B],x.parameters[B]=new THREE.Vector3(K[0],K[1],K[2]));void 0!==x.parameters.opacity&&1>x.parameters.opacity&&(x.parameters.transparent=!0);x.parameters.normalMap?(K=THREE.ShaderLib.normalmap,F=THREE.UniformsUtils.clone(K.uniforms),u=x.parameters.color,O=x.parameters.specular,n=x.parameters.ambient,
D=x.parameters.shininess,F.tNormal.value=y.textures[x.parameters.normalMap],x.parameters.normalScale&&F.uNormalScale.value.set(x.parameters.normalScale[0],x.parameters.normalScale[1]),x.parameters.map&&(F.tDiffuse.value=x.parameters.map,F.enableDiffuse.value=!0),x.parameters.envMap&&(F.tCube.value=x.parameters.envMap,F.enableReflection.value=!0,F.uReflectivity.value=x.parameters.reflectivity),x.parameters.lightMap&&(F.tAO.value=x.parameters.lightMap,F.enableAO.value=!0),x.parameters.specularMap&&
(F.tSpecular.value=y.textures[x.parameters.specularMap],F.enableSpecular.value=!0),x.parameters.displacementMap&&(F.tDisplacement.value=y.textures[x.parameters.displacementMap],F.enableDisplacement.value=!0,F.uDisplacementBias.value=x.parameters.displacementBias,F.uDisplacementScale.value=x.parameters.displacementScale),F.uDiffuseColor.value.setHex(u),F.uSpecularColor.value.setHex(O),F.uAmbientColor.value.setHex(n),F.uShininess.value=D,x.parameters.opacity&&(F.uOpacity.value=x.parameters.opacity),
s=new THREE.ShaderMaterial({fragmentShader:K.fragmentShader,vertexShader:K.vertexShader,uniforms:F,lights:!0,fog:!0})):s=new THREE[x.type](x.parameters);s.name=I;y.materials[I]=s}for(I in A.materials)if(x=A.materials[I],x.parameters.materials){B=[];for(u=0;u<x.parameters.materials.length;u++)B.push(y.materials[x.parameters.materials[u]]);y.materials[I].materials=B}e();y.cameras&&A.defaults.camera&&(y.currentCamera=y.cameras[A.defaults.camera]);y.fogs&&A.defaults.fog&&(y.scene.fog=y.fogs[A.defaults.fog]);
l.callbackSync(y);k()}};THREE.TextureLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};THREE.TextureLoader.prototype={constructor:THREE.TextureLoader,load:function(a,b){var c=new THREE.ImageLoader(this.manager);c.setCrossOrigin(this.crossOrigin);c.load(a,function(a){a=new THREE.Texture(a);a.needsUpdate=!0;void 0!==b&&b(a)})},setCrossOrigin:function(a){this.crossOrigin=a}};THREE.Material=function(){this.id=THREE.MaterialIdCount++;this.uuid=THREE.Math.generateUUID();this.name="";this.side=THREE.FrontSide;this.opacity=1;this.transparent=!1;this.blending=THREE.NormalBlending;this.blendSrc=THREE.SrcAlphaFactor;this.blendDst=THREE.OneMinusSrcAlphaFactor;this.blendEquation=THREE.AddEquation;this.depthWrite=this.depthTest=!0;this.polygonOffset=!1;this.overdraw=this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.needsUpdate=this.visible=!0};
THREE.Material.prototype={constructor:THREE.Material,setValues:function(a){if(void 0!==a)for(var b in a){var c=a[b];if(void 0===c)console.warn("THREE.Material: '"+b+"' parameter is undefined.");else if(b in this){var d=this[b];d instanceof THREE.Color?d.set(c):d instanceof THREE.Vector3&&c instanceof THREE.Vector3?d.copy(c):this[b]="overdraw"==b?Number(c):c}}},clone:function(a){void 0===a&&(a=new THREE.Material);a.name=this.name;a.side=this.side;a.opacity=this.opacity;a.transparent=this.transparent;
a.blending=this.blending;a.blendSrc=this.blendSrc;a.blendDst=this.blendDst;a.blendEquation=this.blendEquation;a.depthTest=this.depthTest;a.depthWrite=this.depthWrite;a.polygonOffset=this.polygonOffset;a.polygonOffsetFactor=this.polygonOffsetFactor;a.polygonOffsetUnits=this.polygonOffsetUnits;a.alphaTest=this.alphaTest;a.overdraw=this.overdraw;a.visible=this.visible;return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.Material.prototype);
THREE.MaterialIdCount=0;THREE.LineBasicMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.linewidth=1;this.linejoin=this.linecap="round";this.vertexColors=!1;this.fog=!0;this.setValues(a)};THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.LineBasicMaterial.prototype.clone=function(){var a=new THREE.LineBasicMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.linewidth=this.linewidth;a.linecap=this.linecap;a.linejoin=this.linejoin;a.vertexColors=this.vertexColors;a.fog=this.fog;return a};THREE.LineDashedMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.scale=this.linewidth=1;this.dashSize=3;this.gapSize=1;this.vertexColors=!1;this.fog=!0;this.setValues(a)};THREE.LineDashedMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.LineDashedMaterial.prototype.clone=function(){var a=new THREE.LineDashedMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.linewidth=this.linewidth;a.scale=this.scale;a.dashSize=this.dashSize;a.gapSize=this.gapSize;a.vertexColors=this.vertexColors;a.fog=this.fog;return a};THREE.MeshBasicMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.envMap=this.specularMap=this.lightMap=this.map=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=0.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=THREE.NoColors;this.morphTargets=this.skinning=!1;this.setValues(a)};
THREE.MeshBasicMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.MeshBasicMaterial.prototype.clone=function(){var a=new THREE.MeshBasicMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.map=this.map;a.lightMap=this.lightMap;a.specularMap=this.specularMap;a.envMap=this.envMap;a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;a.wireframeLinejoin=
this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;return a};THREE.MeshLambertMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.ambient=new THREE.Color(16777215);this.emissive=new THREE.Color(0);this.wrapAround=!1;this.wrapRGB=new THREE.Vector3(1,1,1);this.envMap=this.specularMap=this.lightMap=this.map=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=0.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap=
"round";this.vertexColors=THREE.NoColors;this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};THREE.MeshLambertMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.MeshLambertMaterial.prototype.clone=function(){var a=new THREE.MeshLambertMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.ambient.copy(this.ambient);a.emissive.copy(this.emissive);a.wrapAround=this.wrapAround;a.wrapRGB.copy(this.wrapRGB);a.map=this.map;a.lightMap=this.lightMap;a.specularMap=this.specularMap;a.envMap=this.envMap;a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;a.shading=this.shading;
a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;a.wireframeLinejoin=this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;a.morphNormals=this.morphNormals;return a};THREE.MeshPhongMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.ambient=new THREE.Color(16777215);this.emissive=new THREE.Color(0);this.specular=new THREE.Color(1118481);this.shininess=30;this.metal=!1;this.perPixel=!0;this.wrapAround=!1;this.wrapRGB=new THREE.Vector3(1,1,1);this.bumpMap=this.lightMap=this.map=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new THREE.Vector2(1,1);this.envMap=this.specularMap=null;this.combine=THREE.MultiplyOperation;
this.reflectivity=1;this.refractionRatio=0.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=THREE.NoColors;this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};THREE.MeshPhongMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.MeshPhongMaterial.prototype.clone=function(){var a=new THREE.MeshPhongMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.ambient.copy(this.ambient);a.emissive.copy(this.emissive);a.specular.copy(this.specular);a.shininess=this.shininess;a.metal=this.metal;a.perPixel=this.perPixel;a.wrapAround=this.wrapAround;a.wrapRGB.copy(this.wrapRGB);a.map=this.map;a.lightMap=this.lightMap;a.bumpMap=this.bumpMap;a.bumpScale=this.bumpScale;a.normalMap=this.normalMap;a.normalScale.copy(this.normalScale);
a.specularMap=this.specularMap;a.envMap=this.envMap;a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;a.wireframeLinejoin=this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;a.morphNormals=this.morphNormals;return a};THREE.MeshDepthMaterial=function(a){THREE.Material.call(this);this.wireframe=!1;this.wireframeLinewidth=1;this.setValues(a)};THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshDepthMaterial.prototype.clone=function(){var a=new THREE.MeshDepthMaterial;THREE.Material.prototype.clone.call(this,a);a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;return a};THREE.MeshNormalMaterial=function(a){THREE.Material.call(this,a);this.shading=THREE.FlatShading;this.wireframe=!1;this.wireframeLinewidth=1;this.morphTargets=!1;this.setValues(a)};THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshNormalMaterial.prototype.clone=function(){var a=new THREE.MeshNormalMaterial;THREE.Material.prototype.clone.call(this,a);a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;return a};THREE.MeshFaceMaterial=function(a){this.materials=a instanceof Array?a:[]};THREE.MeshFaceMaterial.prototype.clone=function(){for(var a=new THREE.MeshFaceMaterial,b=0;b<this.materials.length;b++)a.materials.push(this.materials[b].clone());return a};THREE.ParticleSystemMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.map=null;this.size=1;this.sizeAttenuation=!0;this.vertexColors=!1;this.fog=!0;this.setValues(a)};THREE.ParticleSystemMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.ParticleSystemMaterial.prototype.clone=function(){var a=new THREE.ParticleSystemMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.map=this.map;a.size=this.size;a.sizeAttenuation=this.sizeAttenuation;a.vertexColors=this.vertexColors;a.fog=this.fog;return a};THREE.ParticleBasicMaterial=THREE.ParticleSystemMaterial;THREE.ShaderMaterial=function(a){THREE.Material.call(this);this.vertexShader=this.fragmentShader="void main() {}";this.uniforms={};this.defines={};this.attributes=null;this.shading=THREE.SmoothShading;this.linewidth=1;this.wireframe=!1;this.wireframeLinewidth=1;this.lights=this.fog=!1;this.vertexColors=THREE.NoColors;this.morphNormals=this.morphTargets=this.skinning=!1;this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName="position";this.setValues(a)};
THREE.ShaderMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.ShaderMaterial.prototype.clone=function(){var a=new THREE.ShaderMaterial;THREE.Material.prototype.clone.call(this,a);a.fragmentShader=this.fragmentShader;a.vertexShader=this.vertexShader;a.uniforms=THREE.UniformsUtils.clone(this.uniforms);a.attributes=this.attributes;a.defines=this.defines;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.fog=this.fog;a.lights=this.lights;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=
this.morphTargets;a.morphNormals=this.morphNormals;return a};THREE.SpriteMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.map=null;this.rotation=0;this.fog=!1;this.uvOffset=new THREE.Vector2(0,0);this.uvScale=new THREE.Vector2(1,1);this.setValues(a)};THREE.SpriteMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.SpriteMaterial.prototype.clone=function(){var a=new THREE.SpriteMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.map=this.map;a.rotation=this.rotation;a.uvOffset.copy(this.uvOffset);a.uvScale.copy(this.uvScale);a.fog=this.fog;return a};THREE.SpriteCanvasMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.program=function(){};this.setValues(a)};THREE.SpriteCanvasMaterial.prototype=Object.create(THREE.Material.prototype);THREE.SpriteCanvasMaterial.prototype.clone=function(){var a=new THREE.SpriteCanvasMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.program=this.program;return a};THREE.ParticleCanvasMaterial=THREE.SpriteCanvasMaterial;THREE.Texture=function(a,b,c,d,e,f,h,g,i){this.id=THREE.TextureIdCount++;this.uuid=THREE.Math.generateUUID();this.name="";this.image=a;this.mipmaps=[];this.mapping=void 0!==b?b:new THREE.UVMapping;this.wrapS=void 0!==c?c:THREE.ClampToEdgeWrapping;this.wrapT=void 0!==d?d:THREE.ClampToEdgeWrapping;this.magFilter=void 0!==e?e:THREE.LinearFilter;this.minFilter=void 0!==f?f:THREE.LinearMipMapLinearFilter;this.anisotropy=void 0!==i?i:1;this.format=void 0!==h?h:THREE.RGBAFormat;this.type=void 0!==g?g:THREE.UnsignedByteType;
this.offset=new THREE.Vector2(0,0);this.repeat=new THREE.Vector2(1,1);this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.needsUpdate=!1;this.onUpdate=null};
THREE.Texture.prototype={constructor:THREE.Texture,clone:function(a){void 0===a&&(a=new THREE.Texture);a.image=this.image;a.mipmaps=this.mipmaps.slice(0);a.mapping=this.mapping;a.wrapS=this.wrapS;a.wrapT=this.wrapT;a.magFilter=this.magFilter;a.minFilter=this.minFilter;a.anisotropy=this.anisotropy;a.format=this.format;a.type=this.type;a.offset.copy(this.offset);a.repeat.copy(this.repeat);a.generateMipmaps=this.generateMipmaps;a.premultiplyAlpha=this.premultiplyAlpha;a.flipY=this.flipY;a.unpackAlignment=
this.unpackAlignment;return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.Texture.prototype);THREE.TextureIdCount=0;THREE.CompressedTexture=function(a,b,c,d,e,f,h,g,i,k,m){THREE.Texture.call(this,null,f,h,g,i,k,d,e,m);this.image={width:b,height:c};this.mipmaps=a;this.generateMipmaps=!1};THREE.CompressedTexture.prototype=Object.create(THREE.Texture.prototype);THREE.CompressedTexture.prototype.clone=function(){var a=new THREE.CompressedTexture;THREE.Texture.prototype.clone.call(this,a);return a};THREE.DataTexture=function(a,b,c,d,e,f,h,g,i,k,m){THREE.Texture.call(this,null,f,h,g,i,k,d,e,m);this.image={data:a,width:b,height:c}};THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype);THREE.DataTexture.prototype.clone=function(){var a=new THREE.DataTexture;THREE.Texture.prototype.clone.call(this,a);return a};THREE.ParticleSystem=function(a,b){THREE.Object3D.call(this);this.geometry=void 0!==a?a:new THREE.Geometry;this.material=void 0!==b?b:new THREE.ParticleSystemMaterial({color:16777215*Math.random()});this.frustumCulled=this.sortParticles=!1};THREE.ParticleSystem.prototype=Object.create(THREE.Object3D.prototype);
THREE.ParticleSystem.prototype.clone=function(a){void 0===a&&(a=new THREE.ParticleSystem(this.geometry,this.material));a.sortParticles=this.sortParticles;THREE.Object3D.prototype.clone.call(this,a);return a};THREE.Line=function(a,b,c){THREE.Object3D.call(this);this.geometry=void 0!==a?a:new THREE.Geometry;this.material=void 0!==b?b:new THREE.LineBasicMaterial({color:16777215*Math.random()});this.type=void 0!==c?c:THREE.LineStrip};THREE.LineStrip=0;THREE.LinePieces=1;THREE.Line.prototype=Object.create(THREE.Object3D.prototype);THREE.Line.prototype.clone=function(a){void 0===a&&(a=new THREE.Line(this.geometry,this.material,this.type));THREE.Object3D.prototype.clone.call(this,a);return a};THREE.Mesh=function(a,b){THREE.Object3D.call(this);this.geometry=void 0!==a?a:new THREE.Geometry;this.material=void 0!==b?b:new THREE.MeshBasicMaterial({color:16777215*Math.random()});this.updateMorphTargets()};THREE.Mesh.prototype=Object.create(THREE.Object3D.prototype);
THREE.Mesh.prototype.updateMorphTargets=function(){if(0<this.geometry.morphTargets.length){this.morphTargetBase=-1;this.morphTargetForcedOrder=[];this.morphTargetInfluences=[];this.morphTargetDictionary={};for(var a=0,b=this.geometry.morphTargets.length;a<b;a++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[a].name]=a}};
THREE.Mesh.prototype.getMorphTargetIndexByName=function(a){if(void 0!==this.morphTargetDictionary[a])return this.morphTargetDictionary[a];console.log("THREE.Mesh.getMorphTargetIndexByName: morph target "+a+" does not exist. Returning 0.");return 0};THREE.Mesh.prototype.clone=function(a){void 0===a&&(a=new THREE.Mesh(this.geometry,this.material));THREE.Object3D.prototype.clone.call(this,a);return a};THREE.Bone=function(a){THREE.Object3D.call(this);this.skin=a;this.skinMatrix=new THREE.Matrix4};THREE.Bone.prototype=Object.create(THREE.Object3D.prototype);THREE.Bone.prototype.update=function(a,b){this.matrixAutoUpdate&&(b|=this.updateMatrix());if(b||this.matrixWorldNeedsUpdate)a?this.skinMatrix.multiplyMatrices(a,this.matrix):this.skinMatrix.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,b=!0;var c,d=this.children.length;for(c=0;c<d;c++)this.children[c].update(this.skinMatrix,b)};THREE.SkinnedMesh=function(a,b,c){THREE.Mesh.call(this,a,b);this.useVertexTexture=void 0!==c?c:!0;this.identityMatrix=new THREE.Matrix4;this.bones=[];this.boneMatrices=[];var d,e,f;if(this.geometry&&void 0!==this.geometry.bones){for(a=0;a<this.geometry.bones.length;a++)c=this.geometry.bones[a],d=c.pos,e=c.rotq,f=c.scl,b=this.addBone(),b.name=c.name,b.position.set(d[0],d[1],d[2]),b.quaternion.set(e[0],e[1],e[2],e[3]),void 0!==f?b.scale.set(f[0],f[1],f[2]):b.scale.set(1,1,1);for(a=0;a<this.bones.length;a++)c=
this.geometry.bones[a],b=this.bones[a],-1===c.parent?this.add(b):this.bones[c.parent].add(b);a=this.bones.length;this.useVertexTexture?(this.boneTextureHeight=this.boneTextureWidth=a=256<a?64:64<a?32:16<a?16:8,this.boneMatrices=new Float32Array(4*this.boneTextureWidth*this.boneTextureHeight),this.boneTexture=new THREE.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,THREE.RGBAFormat,THREE.FloatType),this.boneTexture.minFilter=THREE.NearestFilter,this.boneTexture.magFilter=
THREE.NearestFilter,this.boneTexture.generateMipmaps=!1,this.boneTexture.flipY=!1):this.boneMatrices=new Float32Array(16*a);this.pose()}};THREE.SkinnedMesh.prototype=Object.create(THREE.Mesh.prototype);THREE.SkinnedMesh.prototype.addBone=function(a){void 0===a&&(a=new THREE.Bone(this));this.bones.push(a);return a};
THREE.SkinnedMesh.prototype.updateMatrixWorld=function(){var a=new THREE.Matrix4;return function(b){this.matrixAutoUpdate&&this.updateMatrix();if(this.matrixWorldNeedsUpdate||b)this.parent?this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix):this.matrixWorld.copy(this.matrix),this.matrixWorldNeedsUpdate=!1;for(var b=0,c=this.children.length;b<c;b++){var d=this.children[b];d instanceof THREE.Bone?d.update(this.identityMatrix,!1):d.updateMatrixWorld(!0)}if(void 0==this.boneInverses){this.boneInverses=
[];b=0;for(c=this.bones.length;b<c;b++)d=new THREE.Matrix4,d.getInverse(this.bones[b].skinMatrix),this.boneInverses.push(d)}b=0;for(c=this.bones.length;b<c;b++)a.multiplyMatrices(this.bones[b].skinMatrix,this.boneInverses[b]),a.flattenToArrayOffset(this.boneMatrices,16*b);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}();THREE.SkinnedMesh.prototype.pose=function(){this.updateMatrixWorld(!0);this.normalizeSkinWeights()};
THREE.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof THREE.Geometry)for(var a=0;a<this.geometry.skinIndices.length;a++){var b=this.geometry.skinWeights[a],c=1/b.lengthManhattan();Infinity!==c?b.multiplyScalar(c):b.set(1)}};THREE.SkinnedMesh.prototype.clone=function(a){void 0===a&&(a=new THREE.SkinnedMesh(this.geometry,this.material,this.useVertexTexture));THREE.Mesh.prototype.clone.call(this,a);return a};THREE.MorphAnimMesh=function(a,b){THREE.Mesh.call(this,a,b);this.duration=1E3;this.mirroredLoop=!1;this.currentKeyframe=this.lastKeyframe=this.time=0;this.direction=1;this.directionBackwards=!1;this.setFrameRange(0,this.geometry.morphTargets.length-1)};THREE.MorphAnimMesh.prototype=Object.create(THREE.Mesh.prototype);THREE.MorphAnimMesh.prototype.setFrameRange=function(a,b){this.startKeyframe=a;this.endKeyframe=b;this.length=this.endKeyframe-this.startKeyframe+1};
THREE.MorphAnimMesh.prototype.setDirectionForward=function(){this.direction=1;this.directionBackwards=!1};THREE.MorphAnimMesh.prototype.setDirectionBackward=function(){this.direction=-1;this.directionBackwards=!0};
THREE.MorphAnimMesh.prototype.parseAnimations=function(){var a=this.geometry;a.animations||(a.animations={});for(var b,c=a.animations,d=/([a-z]+)(\d+)/,e=0,f=a.morphTargets.length;e<f;e++){var h=a.morphTargets[e].name.match(d);if(h&&1<h.length){h=h[1];c[h]||(c[h]={start:Infinity,end:-Infinity});var g=c[h];e<g.start&&(g.start=e);e>g.end&&(g.end=e);b||(b=h)}}a.firstAnimation=b};
THREE.MorphAnimMesh.prototype.setAnimationLabel=function(a,b,c){this.geometry.animations||(this.geometry.animations={});this.geometry.animations[a]={start:b,end:c}};THREE.MorphAnimMesh.prototype.playAnimation=function(a,b){var c=this.geometry.animations[a];c?(this.setFrameRange(c.start,c.end),this.duration=1E3*((c.end-c.start)/b),this.time=0):console.warn("animation["+a+"] undefined")};
THREE.MorphAnimMesh.prototype.updateAnimation=function(a){var b=this.duration/this.length;this.time+=this.direction*a;if(this.mirroredLoop){if(this.time>this.duration||0>this.time)this.direction*=-1,this.time>this.duration&&(this.time=this.duration,this.directionBackwards=!0),0>this.time&&(this.time=0,this.directionBackwards=!1)}else this.time%=this.duration,0>this.time&&(this.time+=this.duration);a=this.startKeyframe+THREE.Math.clamp(Math.floor(this.time/b),0,this.length-1);a!==this.currentKeyframe&&
(this.morphTargetInfluences[this.lastKeyframe]=0,this.morphTargetInfluences[this.currentKeyframe]=1,this.morphTargetInfluences[a]=0,this.lastKeyframe=this.currentKeyframe,this.currentKeyframe=a);b=this.time%b/b;this.directionBackwards&&(b=1-b);this.morphTargetInfluences[this.currentKeyframe]=b;this.morphTargetInfluences[this.lastKeyframe]=1-b};
THREE.MorphAnimMesh.prototype.clone=function(a){void 0===a&&(a=new THREE.MorphAnimMesh(this.geometry,this.material));a.duration=this.duration;a.mirroredLoop=this.mirroredLoop;a.time=this.time;a.lastKeyframe=this.lastKeyframe;a.currentKeyframe=this.currentKeyframe;a.direction=this.direction;a.directionBackwards=this.directionBackwards;THREE.Mesh.prototype.clone.call(this,a);return a};THREE.LOD=function(){THREE.Object3D.call(this);this.objects=[]};THREE.LOD.prototype=Object.create(THREE.Object3D.prototype);THREE.LOD.prototype.addLevel=function(a,b){void 0===b&&(b=0);for(var b=Math.abs(b),c=0;c<this.objects.length&&!(b<this.objects[c].distance);c++);this.objects.splice(c,0,{distance:b,object:a});this.add(a)};THREE.LOD.prototype.getObjectForDistance=function(a){for(var b=1,c=this.objects.length;b<c&&!(a<this.objects[b].distance);b++);return this.objects[b-1].object};
THREE.LOD.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c){if(1<this.objects.length){a.setFromMatrixPosition(c.matrixWorld);b.setFromMatrixPosition(this.matrixWorld);c=a.distanceTo(b);this.objects[0].object.visible=!0;for(var d=1,e=this.objects.length;d<e;d++)if(c>=this.objects[d].distance)this.objects[d-1].object.visible=!1,this.objects[d].object.visible=!0;else break;for(;d<e;d++)this.objects[d].object.visible=!1}}}();THREE.LOD.prototype.clone=function(){};THREE.Sprite=function(a){THREE.Object3D.call(this);this.material=void 0!==a?a:new THREE.SpriteMaterial};THREE.Sprite.prototype=Object.create(THREE.Object3D.prototype);THREE.Sprite.prototype.updateMatrix=function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0};THREE.Sprite.prototype.clone=function(a){void 0===a&&(a=new THREE.Sprite(this.material));THREE.Object3D.prototype.clone.call(this,a);return a};THREE.Particle=THREE.Sprite;THREE.Scene=function(){THREE.Object3D.call(this);this.overrideMaterial=this.fog=null;this.autoUpdate=!0;this.matrixAutoUpdate=!1;this.__lights=[];this.__objectsAdded=[];this.__objectsRemoved=[]};THREE.Scene.prototype=Object.create(THREE.Object3D.prototype);
THREE.Scene.prototype.__addObject=function(a){if(a instanceof THREE.Light)-1===this.__lights.indexOf(a)&&this.__lights.push(a),a.target&&void 0===a.target.parent&&this.add(a.target);else if(!(a instanceof THREE.Camera||a instanceof THREE.Bone)){this.__objectsAdded.push(a);var b=this.__objectsRemoved.indexOf(a);-1!==b&&this.__objectsRemoved.splice(b,1)}for(b=0;b<a.children.length;b++)this.__addObject(a.children[b])};
THREE.Scene.prototype.__removeObject=function(a){if(a instanceof THREE.Light){var b=this.__lights.indexOf(a);-1!==b&&this.__lights.splice(b,1);if(a.shadowCascadeArray)for(b=0;b<a.shadowCascadeArray.length;b++)this.__removeObject(a.shadowCascadeArray[b])}else a instanceof THREE.Camera||(this.__objectsRemoved.push(a),b=this.__objectsAdded.indexOf(a),-1!==b&&this.__objectsAdded.splice(b,1));for(b=0;b<a.children.length;b++)this.__removeObject(a.children[b])};
THREE.Scene.prototype.clone=function(a){void 0===a&&(a=new THREE.Scene);THREE.Object3D.prototype.clone.call(this,a);null!==this.fog&&(a.fog=this.fog.clone());null!==this.overrideMaterial&&(a.overrideMaterial=this.overrideMaterial.clone());a.autoUpdate=this.autoUpdate;a.matrixAutoUpdate=this.matrixAutoUpdate;return a};THREE.Fog=function(a,b,c){this.name="";this.color=new THREE.Color(a);this.near=void 0!==b?b:1;this.far=void 0!==c?c:1E3};THREE.Fog.prototype.clone=function(){return new THREE.Fog(this.color.getHex(),this.near,this.far)};THREE.FogExp2=function(a,b){this.name="";this.color=new THREE.Color(a);this.density=void 0!==b?b:2.5E-4};THREE.FogExp2.prototype.clone=function(){return new THREE.FogExp2(this.color.getHex(),this.density)};THREE.CanvasRenderer=function(a){function b(a,b,c){for(var d=0,e=z.length;d<e;d++){var f=z[d];Ka.copy(f.color);if(f instanceof THREE.DirectionalLight){var h=ta.setFromMatrixPosition(f.matrixWorld).normalize(),g=b.dot(h);0>=g||(g*=f.intensity,c.add(Ka.multiplyScalar(g)))}else f instanceof THREE.PointLight&&(h=ta.setFromMatrixPosition(f.matrixWorld),g=b.dot(ta.subVectors(h,a).normalize()),0>=g||(g*=0==f.distance?1:1-Math.min(a.distanceTo(h)/f.distance,1),0!=g&&(g*=f.intensity,c.add(Ka.multiplyScalar(g)))))}}
function c(a,b,c,d){m(b);l(c);p(d);t(a.getStyle());D.stroke();Ea.expandByScalar(2*b)}function d(a){s(a.getStyle());D.fill()}function e(a,b,c,e,f,h,g,j,i,k,m,l,n){if(!(n instanceof THREE.DataTexture||void 0===n.image||0===n.image.width)){if(!0===n.needsUpdate){var p=n.wrapS===THREE.RepeatWrapping,q=n.wrapT===THREE.RepeatWrapping;Ga[n.id]=D.createPattern(n.image,!0===p&&!0===q?"repeat":!0===p&&!1===q?"repeat-x":!1===p&&!0===q?"repeat-y":"no-repeat");n.needsUpdate=!1}void 0===Ga[n.id]?s("rgba(0,0,0,1)"):
s(Ga[n.id]);var p=n.offset.x/n.repeat.x,q=n.offset.y/n.repeat.y,t=n.image.width*n.repeat.x,r=n.image.height*n.repeat.y,g=(g+p)*t,j=(1-j+q)*r,c=c-a,e=e-b,f=f-a,h=h-b,i=(i+p)*t-g,k=(1-k+q)*r-j,m=(m+p)*t-g,l=(1-l+q)*r-j,p=i*l-m*k;0===p?(void 0===ka[n.id]&&(b=document.createElement("canvas"),b.width=n.image.width,b.height=n.image.height,b=b.getContext("2d"),b.drawImage(n.image,0,0),ka[n.id]=b.getImageData(0,0,n.image.width,n.image.height).data),b=ka[n.id],g=4*(Math.floor(g)+Math.floor(j)*n.image.width),
V.setRGB(b[g]/255,b[g+1]/255,b[g+2]/255),d(V)):(p=1/p,n=(l*c-k*f)*p,k=(l*e-k*h)*p,c=(i*f-m*c)*p,e=(i*h-m*e)*p,a=a-n*g-c*j,g=b-k*g-e*j,D.save(),D.transform(n,k,c,e,a,g),D.fill(),D.restore())}}function f(a,b,c,d,e,f,h,g,j,i,k,m,n){var l,p;l=n.width-1;p=n.height-1;h*=l;g*=p;c-=a;d-=b;e-=a;f-=b;j=j*l-h;i=i*p-g;k=k*l-h;m=m*p-g;p=1/(j*m-k*i);l=(m*c-i*e)*p;i=(m*d-i*f)*p;c=(j*e-k*c)*p;d=(j*f-k*d)*p;a=a-l*h-c*g;b=b-i*h-d*g;D.save();D.transform(l,i,c,d,a,b);D.clip();D.drawImage(n,0,0);D.restore()}function h(a,
b,c,d){ua[0]=255*a.r|0;ua[1]=255*a.g|0;ua[2]=255*a.b|0;ua[4]=255*b.r|0;ua[5]=255*b.g|0;ua[6]=255*b.b|0;ua[8]=255*c.r|0;ua[9]=255*c.g|0;ua[10]=255*c.b|0;ua[12]=255*d.r|0;ua[13]=255*d.g|0;ua[14]=255*d.b|0;j.putImageData(Oa,0,0);Fa.drawImage(Pa,0,0);return La}function g(a,b,c){var d=b.x-a.x,e=b.y-a.y,f=d*d+e*e;0!==f&&(c/=Math.sqrt(f),d*=c,e*=c,b.x+=d,b.y+=e,a.x-=d,a.y-=e)}function i(a){x!==a&&(x=D.globalAlpha=a)}function k(a){I!==a&&(a===THREE.NormalBlending?D.globalCompositeOperation="source-over":
a===THREE.AdditiveBlending?D.globalCompositeOperation="lighter":a===THREE.SubtractiveBlending&&(D.globalCompositeOperation="darker"),I=a)}function m(a){J!==a&&(J=D.lineWidth=a)}function l(a){ca!==a&&(ca=D.lineCap=a)}function p(a){na!==a&&(na=D.lineJoin=a)}function t(a){B!==a&&(B=D.strokeStyle=a)}function s(a){M!==a&&(M=D.fillStyle=a)}function q(a,b){if(pa!==a||C!==b)D.setLineDash([a,b]),pa=a,C=b}console.log("THREE.CanvasRenderer",THREE.REVISION);var n=THREE.Math.smoothstep,a=a||{},u=this,r,v,z,G=
new THREE.Projector,w=void 0!==a.canvas?a.canvas:document.createElement("canvas"),y=w.width,E=w.height,A=Math.floor(y/2),K=Math.floor(E/2),D=w.getContext("2d"),F=new THREE.Color(0),O=0,x=1,I=0,B=null,M=null,J=null,ca=null,na=null,pa=null,C=0,Q,R,L,da;new THREE.RenderableVertex;new THREE.RenderableVertex;var za,Ba,ba,Aa,$,ea,V=new THREE.Color,P=new THREE.Color,Y=new THREE.Color,U=new THREE.Color,ja=new THREE.Color,sa=new THREE.Color,ha=new THREE.Color,Ka=new THREE.Color,Ga={},ka={},Da,Ua,Qa,wa,bb,
cb,Ma,fb,sb,pb,va=new THREE.Box2,la=new THREE.Box2,Ea=new THREE.Box2,gb=new THREE.Color,ra=new THREE.Color,fa=new THREE.Color,ta=new THREE.Vector3,Pa,j,Oa,ua,La,Fa,Ra=16;Pa=document.createElement("canvas");Pa.width=Pa.height=2;j=Pa.getContext("2d");j.fillStyle="rgba(0,0,0,1)";j.fillRect(0,0,2,2);Oa=j.getImageData(0,0,2,2);ua=Oa.data;La=document.createElement("canvas");La.width=La.height=Ra;Fa=La.getContext("2d");Fa.translate(-Ra/2,-Ra/2);Fa.scale(Ra,Ra);Ra--;void 0===D.setLineDash&&(D.setLineDash=
void 0!==D.mozDash?function(a){D.mozDash=null!==a[0]?a:null}:function(){});this.domElement=w;this.devicePixelRatio=void 0!==a.devicePixelRatio?a.devicePixelRatio:void 0!==self.devicePixelRatio?self.devicePixelRatio:1;this.sortElements=this.sortObjects=this.autoClear=!0;this.info={render:{vertices:0,faces:0}};this.supportsVertexTextures=function(){};this.setFaceCulling=function(){};this.setSize=function(a,b,c){y=a*this.devicePixelRatio;E=b*this.devicePixelRatio;A=Math.floor(y/2);K=Math.floor(E/2);
w.width=y;w.height=E;1!==this.devicePixelRatio&&!1!==c&&(w.style.width=a+"px",w.style.height=b+"px");va.set(new THREE.Vector2(-A,-K),new THREE.Vector2(A,K));la.set(new THREE.Vector2(-A,-K),new THREE.Vector2(A,K));x=1;I=0;na=ca=J=M=B=null};this.setClearColor=function(a,b){F.set(a);O=void 0!==b?b:1;la.set(new THREE.Vector2(-A,-K),new THREE.Vector2(A,K))};this.setClearColorHex=function(a,b){console.warn("DEPRECATED: .setClearColorHex() is being removed. Use .setClearColor() instead.");this.setClearColor(a,
b)};this.getMaxAnisotropy=function(){return 0};this.clear=function(){D.setTransform(1,0,0,-1,A,K);!1===la.empty()&&(la.intersect(va),la.expandByScalar(2),1>O&&D.clearRect(la.min.x|0,la.min.y|0,la.max.x-la.min.x|0,la.max.y-la.min.y|0),0<O&&(k(THREE.NormalBlending),i(1),s("rgba("+Math.floor(255*F.r)+","+Math.floor(255*F.g)+","+Math.floor(255*F.b)+","+O+")"),D.fillRect(la.min.x|0,la.min.y|0,la.max.x-la.min.x|0,la.max.y-la.min.y|0)),la.makeEmpty())};this.clearColor=function(){};this.clearDepth=function(){};
this.clearStencil=function(){};this.render=function(a,j){if(!1===j instanceof THREE.Camera)console.error("THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera.");else{!0===this.autoClear&&this.clear();D.setTransform(1,0,0,-1,A,K);u.info.render.vertices=0;u.info.render.faces=0;r=G.projectScene(a,j,this.sortObjects,this.sortElements);v=r.elements;z=r.lights;Q=j;gb.setRGB(0,0,0);ra.setRGB(0,0,0);fa.setRGB(0,0,0);for(var y=0,F=z.length;y<F;y++){var B=z[y],E=B.color;B instanceof THREE.AmbientLight?
gb.add(E):B instanceof THREE.DirectionalLight?ra.add(E):B instanceof THREE.PointLight&&fa.add(E)}y=0;for(F=v.length;y<F;y++){var x=v[y],w=x.material;if(!(void 0===w||!1===w.visible)){Ea.makeEmpty();if(x instanceof THREE.RenderableSprite){R=x;R.x*=A;R.y*=K;var B=R,E=x,I=w;i(I.opacity);k(I.blending);var x=E.scale.x*A,w=E.scale.y*K,O=0.5*Math.sqrt(x*x+w*w);Ea.min.set(B.x-O,B.y-O);Ea.max.set(B.x+O,B.y+O);!1===va.isIntersectionBox(Ea)?Ea.makeEmpty():I instanceof THREE.SpriteMaterial||I instanceof THREE.ParticleSystemMaterial?
(null!==I.map?(E=I.map.image,D.save(),D.translate(B.x,B.y),D.rotate(I.rotation),D.scale(x,-w),D.drawImage(E,0,0,E.width,E.height,-0.5,-0.5,1,1)):(s(I.color.getStyle()),D.save(),D.translate(B.x,B.y),D.rotate(I.rotation),D.scale(x,-w),D.fillRect(-0.5,-0.5,1,1)),D.restore()):I instanceof THREE.SpriteCanvasMaterial&&(t(I.color.getStyle()),s(I.color.getStyle()),D.save(),D.translate(B.x,B.y),D.rotate(-E.rotation),D.scale(x,w),I.program(D),D.restore())}else if(x instanceof THREE.RenderableLine){if(R=x.v1,
L=x.v2,R.positionScreen.x*=A,R.positionScreen.y*=K,L.positionScreen.x*=A,L.positionScreen.y*=K,Ea.setFromPoints([R.positionScreen,L.positionScreen]),!0===va.isIntersectionBox(Ea))if(B=R,E=L,I=x,x=w,i(x.opacity),k(x.blending),D.beginPath(),D.moveTo(B.positionScreen.x,B.positionScreen.y),D.lineTo(E.positionScreen.x,E.positionScreen.y),x instanceof THREE.LineBasicMaterial){m(x.linewidth);l(x.linecap);p(x.linejoin);if(x.vertexColors!==THREE.VertexColors)t(x.color.getStyle());else if(w=I.vertexColors[0].getStyle(),
I=I.vertexColors[1].getStyle(),w===I)t(w);else{try{var C=D.createLinearGradient(B.positionScreen.x,B.positionScreen.y,E.positionScreen.x,E.positionScreen.y);C.addColorStop(0,w);C.addColorStop(1,I)}catch(J){C=w}t(C)}D.stroke();Ea.expandByScalar(2*x.linewidth)}else x instanceof THREE.LineDashedMaterial&&(m(x.linewidth),l(x.linecap),p(x.linejoin),t(x.color.getStyle()),q(x.dashSize,x.gapSize),D.stroke(),Ea.expandByScalar(2*x.linewidth),q(null,null))}else if(x instanceof THREE.RenderableFace3){R=x.v1;
L=x.v2;da=x.v3;if(-1>R.positionScreen.z||1<R.positionScreen.z)continue;if(-1>L.positionScreen.z||1<L.positionScreen.z)continue;if(-1>da.positionScreen.z||1<da.positionScreen.z)continue;R.positionScreen.x*=A;R.positionScreen.y*=K;L.positionScreen.x*=A;L.positionScreen.y*=K;da.positionScreen.x*=A;da.positionScreen.y*=K;0<w.overdraw&&(g(R.positionScreen,L.positionScreen,w.overdraw),g(L.positionScreen,da.positionScreen,w.overdraw),g(da.positionScreen,R.positionScreen,w.overdraw));Ea.setFromPoints([R.positionScreen,
L.positionScreen,da.positionScreen]);if(!0===va.isIntersectionBox(Ea)){B=R;E=L;I=da;u.info.render.vertices+=3;u.info.render.faces++;i(w.opacity);k(w.blending);za=B.positionScreen.x;Ba=B.positionScreen.y;ba=E.positionScreen.x;Aa=E.positionScreen.y;$=I.positionScreen.x;ea=I.positionScreen.y;var O=za,M=Ba,ca=ba,ka=Aa,na=$,pa=ea;D.beginPath();D.moveTo(O,M);D.lineTo(ca,ka);D.lineTo(na,pa);D.closePath();(w instanceof THREE.MeshLambertMaterial||w instanceof THREE.MeshPhongMaterial)&&null===w.map?(sa.copy(w.color),
ha.copy(w.emissive),w.vertexColors===THREE.FaceColors&&sa.multiply(x.color),!1===w.wireframe&&w.shading===THREE.SmoothShading&&3===x.vertexNormalsLength?(P.copy(gb),Y.copy(gb),U.copy(gb),b(x.v1.positionWorld,x.vertexNormalsModel[0],P),b(x.v2.positionWorld,x.vertexNormalsModel[1],Y),b(x.v3.positionWorld,x.vertexNormalsModel[2],U),P.multiply(sa).add(ha),Y.multiply(sa).add(ha),U.multiply(sa).add(ha),ja.addColors(Y,U).multiplyScalar(0.5),Qa=h(P,Y,U,ja),f(za,Ba,ba,Aa,$,ea,0,0,1,0,0,1,Qa)):(V.copy(gb),
b(x.centroidModel,x.normalModel,V),V.multiply(sa).add(ha),!0===w.wireframe?c(V,w.wireframeLinewidth,w.wireframeLinecap,w.wireframeLinejoin):d(V))):w instanceof THREE.MeshBasicMaterial||w instanceof THREE.MeshLambertMaterial||w instanceof THREE.MeshPhongMaterial?null!==w.map?w.map.mapping instanceof THREE.UVMapping&&(wa=x.uvs[0],e(za,Ba,ba,Aa,$,ea,wa[0].x,wa[0].y,wa[1].x,wa[1].y,wa[2].x,wa[2].y,w.map)):null!==w.envMap?w.envMap.mapping instanceof THREE.SphericalReflectionMapping&&(ta.copy(x.vertexNormalsModelView[0]),
bb=0.5*ta.x+0.5,cb=0.5*ta.y+0.5,ta.copy(x.vertexNormalsModelView[1]),Ma=0.5*ta.x+0.5,fb=0.5*ta.y+0.5,ta.copy(x.vertexNormalsModelView[2]),sb=0.5*ta.x+0.5,pb=0.5*ta.y+0.5,e(za,Ba,ba,Aa,$,ea,bb,cb,Ma,fb,sb,pb,w.envMap)):(V.copy(w.color),w.vertexColors===THREE.FaceColors&&V.multiply(x.color),!0===w.wireframe?c(V,w.wireframeLinewidth,w.wireframeLinecap,w.wireframeLinejoin):d(V)):w instanceof THREE.MeshDepthMaterial?(Da=Q.near,Ua=Q.far,P.r=P.g=P.b=1-n(B.positionScreen.z*B.positionScreen.w,Da,Ua),Y.r=Y.g=
Y.b=1-n(E.positionScreen.z*E.positionScreen.w,Da,Ua),U.r=U.g=U.b=1-n(I.positionScreen.z*I.positionScreen.w,Da,Ua),ja.addColors(Y,U).multiplyScalar(0.5),Qa=h(P,Y,U,ja),f(za,Ba,ba,Aa,$,ea,0,0,1,0,0,1,Qa)):w instanceof THREE.MeshNormalMaterial&&(B=void 0,w.shading===THREE.FlatShading?(B=x.normalModelView,V.setRGB(B.x,B.y,B.z).multiplyScalar(0.5).addScalar(0.5),!0===w.wireframe?c(V,w.wireframeLinewidth,w.wireframeLinecap,w.wireframeLinejoin):d(V)):w.shading===THREE.SmoothShading&&(B=x.vertexNormalsModelView[0],
P.setRGB(B.x,B.y,B.z).multiplyScalar(0.5).addScalar(0.5),B=x.vertexNormalsModelView[1],Y.setRGB(B.x,B.y,B.z).multiplyScalar(0.5).addScalar(0.5),B=x.vertexNormalsModelView[2],U.setRGB(B.x,B.y,B.z).multiplyScalar(0.5).addScalar(0.5),ja.addColors(Y,U).multiplyScalar(0.5),Qa=h(P,Y,U,ja),f(za,Ba,ba,Aa,$,ea,0,0,1,0,0,1,Qa)))}}la.union(Ea)}}D.setTransform(1,0,0,1,0,0)}}};THREE.ShaderChunk={fog_pars_fragment:"#ifdef USE_FOG\nuniform vec3 fogColor;\n#ifdef FOG_EXP2\nuniform float fogDensity;\n#else\nuniform float fogNear;\nuniform float fogFar;\n#endif\n#endif",fog_fragment:"#ifdef USE_FOG\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n#ifdef FOG_EXP2\nconst float LOG2 = 1.442695;\nfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n#else\nfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n#endif\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n#endif",
envmap_pars_fragment:"#ifdef USE_ENVMAP\nuniform float reflectivity;\nuniform samplerCube envMap;\nuniform float flipEnvMap;\nuniform int combine;\n#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\nuniform bool useRefract;\nuniform float refractionRatio;\n#else\nvarying vec3 vReflect;\n#endif\n#endif",envmap_fragment:"#ifdef USE_ENVMAP\nvec3 reflectVec;\n#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\nvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\nif ( useRefract ) {\nreflectVec = refract( cameraToVertex, normal, refractionRatio );\n} else { \nreflectVec = reflect( cameraToVertex, normal );\n}\n#else\nreflectVec = vReflect;\n#endif\n#ifdef DOUBLE_SIDED\nfloat flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\nvec4 cubeColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n#else\nvec4 cubeColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n#endif\n#ifdef GAMMA_INPUT\ncubeColor.xyz *= cubeColor.xyz;\n#endif\nif ( combine == 1 ) {\ngl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularStrength * reflectivity );\n} else if ( combine == 2 ) {\ngl_FragColor.xyz += cubeColor.xyz * specularStrength * reflectivity;\n} else {\ngl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * cubeColor.xyz, specularStrength * reflectivity );\n}\n#endif",
envmap_pars_vertex:"#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )\nvarying vec3 vReflect;\nuniform float refractionRatio;\nuniform bool useRefract;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n#ifdef USE_SKINNING\nvec4 worldPosition = modelMatrix * skinned;\n#endif\n#if defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\nvec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\n#endif\n#if ! defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\nvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n#endif\n#endif",
envmap_vertex:"#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )\nvec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;\nworldNormal = normalize( worldNormal );\nvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\nif ( useRefract ) {\nvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n} else {\nvReflect = reflect( cameraToVertex, worldNormal );\n}\n#endif",map_particle_pars_fragment:"#ifdef USE_MAP\nuniform sampler2D map;\n#endif",
map_particle_fragment:"#ifdef USE_MAP\ngl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );\n#endif",map_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )\nvarying vec2 vUv;\nuniform vec4 offsetRepeat;\n#endif",map_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )\nvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\nuniform sampler2D map;\n#endif",
map_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )\nvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",map_fragment:"#ifdef USE_MAP\nvec4 texelColor = texture2D( map, vUv );\n#ifdef GAMMA_INPUT\ntexelColor.xyz *= texelColor.xyz;\n#endif\ngl_FragColor = gl_FragColor * texelColor;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\nvarying vec2 vUv2;\nuniform sampler2D lightMap;\n#endif",lightmap_pars_vertex:"#ifdef USE_LIGHTMAP\nvarying vec2 vUv2;\n#endif",
lightmap_fragment:"#ifdef USE_LIGHTMAP\ngl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );\n#endif",lightmap_vertex:"#ifdef USE_LIGHTMAP\nvUv2 = uv2;\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\nuniform sampler2D bumpMap;\nuniform float bumpScale;\nvec2 dHdxy_fwd() {\nvec2 dSTdx = dFdx( vUv );\nvec2 dSTdy = dFdy( vUv );\nfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\nfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\nfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\nreturn vec2( dBx, dBy );\n}\nvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\nvec3 vSigmaX = dFdx( surf_pos );\nvec3 vSigmaY = dFdy( surf_pos );\nvec3 vN = surf_norm;\nvec3 R1 = cross( vSigmaY, vN );\nvec3 R2 = cross( vN, vSigmaX );\nfloat fDet = dot( vSigmaX, R1 );\nvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\nreturn normalize( abs( fDet ) * surf_norm - vGrad );\n}\n#endif",
normalmap_pars_fragment:"#ifdef USE_NORMALMAP\nuniform sampler2D normalMap;\nuniform vec2 normalScale;\nvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\nvec3 q0 = dFdx( eye_pos.xyz );\nvec3 q1 = dFdy( eye_pos.xyz );\nvec2 st0 = dFdx( vUv.st );\nvec2 st1 = dFdy( vUv.st );\nvec3 S = normalize(  q0 * st1.t - q1 * st0.t );\nvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\nvec3 N = normalize( surf_norm );\nvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\nmapN.xy = normalScale * mapN.xy;\nmat3 tsn = mat3( S, T, N );\nreturn normalize( tsn * mapN );\n}\n#endif",
specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\nuniform sampler2D specularMap;\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\nvec4 texelSpecular = texture2D( specularMap, vUv );\nspecularStrength = texelSpecular.r;\n#else\nspecularStrength = 1.0;\n#endif",lights_lambert_pars_vertex:"uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_HEMI_LIGHTS > 0\nuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\nuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\nuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n#endif\n#ifdef WRAP_AROUND\nuniform vec3 wrapRGB;\n#endif",
lights_lambert_vertex:"vLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\nvLightBack = vec3( 0.0 );\n#endif\ntransformedNormal = normalize( transformedNormal );\n#if MAX_DIR_LIGHTS > 0\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\nvec3 dirVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( transformedNormal, dirVector );\nvec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n#ifdef DOUBLE_SIDED\nvec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n#ifdef WRAP_AROUND\nvec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n#endif\n#endif\n#ifdef WRAP_AROUND\nvec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\ndirectionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\n#ifdef DOUBLE_SIDED\ndirectionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\n#endif\n#endif\nvLightFront += directionalLightColor[ i ] * directionalLightWeighting;\n#ifdef DOUBLE_SIDED\nvLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\n#endif\n}\n#endif\n#if MAX_POINT_LIGHTS > 0\nfor( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\nfloat dotProduct = dot( transformedNormal, lVector );\nvec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\n#ifdef DOUBLE_SIDED\nvec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n#ifdef WRAP_AROUND\nvec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n#endif\n#endif\n#ifdef WRAP_AROUND\nvec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\npointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\n#ifdef DOUBLE_SIDED\npointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\n#endif\n#endif\nvLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;\n#ifdef DOUBLE_SIDED\nvLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;\n#endif\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nfor( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\nif ( spotEffect > spotLightAngleCos[ i ] ) {\nspotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );\nfloat lDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\nfloat dotProduct = dot( transformedNormal, lVector );\nvec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\n#ifdef DOUBLE_SIDED\nvec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n#ifdef WRAP_AROUND\nvec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n#endif\n#endif\n#ifdef WRAP_AROUND\nvec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\nspotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\n#ifdef DOUBLE_SIDED\nspotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\n#endif\n#endif\nvLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;\n#ifdef DOUBLE_SIDED\nvLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;\n#endif\n}\n}\n#endif\n#if MAX_HEMI_LIGHTS > 0\nfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\nvec3 lVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( transformedNormal, lVector );\nfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\nfloat hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\nvLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n#ifdef DOUBLE_SIDED\nvLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n#endif\n}\n#endif\nvLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;\n#ifdef DOUBLE_SIDED\nvLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;\n#endif",
lights_phong_pars_vertex:"#ifndef PHONG_PER_PIXEL\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\nvarying vec4 vPointLight[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\nvarying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )\nvarying vec3 vWorldPosition;\n#endif",
lights_phong_vertex:"#ifndef PHONG_PER_PIXEL\n#if MAX_POINT_LIGHTS > 0\nfor( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nvPointLight[ i ] = vec4( lVector, lDistance );\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nfor( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat lDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\nvSpotLight[ i ] = vec4( lVector, lDistance );\n}\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )\nvWorldPosition = worldPosition.xyz;\n#endif",
lights_phong_pars_fragment:"uniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_HEMI_LIGHTS > 0\nuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n#ifdef PHONG_PER_PIXEL\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#else\nvarying vec4 vPointLight[ MAX_POINT_LIGHTS ];\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\nuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\nuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n#ifdef PHONG_PER_PIXEL\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n#else\nvarying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )\nvarying vec3 vWorldPosition;\n#endif\n#ifdef WRAP_AROUND\nuniform vec3 wrapRGB;\n#endif\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",
lights_phong_fragment:"vec3 normal = normalize( vNormal );\nvec3 viewPosition = normalize( vViewPosition );\n#ifdef DOUBLE_SIDED\nnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n#endif\n#ifdef USE_NORMALMAP\nnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\nnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n#if MAX_POINT_LIGHTS > 0\nvec3 pointDiffuse  = vec3( 0.0 );\nvec3 pointSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n#ifdef PHONG_PER_PIXEL\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz + vViewPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\n#else\nvec3 lVector = normalize( vPointLight[ i ].xyz );\nfloat lDistance = vPointLight[ i ].w;\n#endif\nfloat dotProduct = dot( normal, lVector );\n#ifdef WRAP_AROUND\nfloat pointDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n#else\nfloat pointDiffuseWeight = max( dotProduct, 0.0 );\n#endif\npointDiffuse  += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;\nvec3 pointHalfVector = normalize( lVector + viewPosition );\nfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\nfloat pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, pointHalfVector ), 5.0 );\npointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;\n#else\npointSpecular += specular * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance;\n#endif\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nvec3 spotDiffuse  = vec3( 0.0 );\nvec3 spotSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n#ifdef PHONG_PER_PIXEL\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz + vViewPosition.xyz;\nfloat lDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\n#else\nvec3 lVector = normalize( vSpotLight[ i ].xyz );\nfloat lDistance = vSpotLight[ i ].w;\n#endif\nfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\nif ( spotEffect > spotLightAngleCos[ i ] ) {\nspotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );\nfloat dotProduct = dot( normal, lVector );\n#ifdef WRAP_AROUND\nfloat spotDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 spotDiffuseWeight = mix( vec3 ( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n#else\nfloat spotDiffuseWeight = max( dotProduct, 0.0 );\n#endif\nspotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;\nvec3 spotHalfVector = normalize( lVector + viewPosition );\nfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\nfloat spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, spotHalfVector ), 5.0 );\nspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\n#else\nspotSpecular += specular * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * spotEffect;\n#endif\n}\n}\n#endif\n#if MAX_DIR_LIGHTS > 0\nvec3 dirDiffuse  = vec3( 0.0 );\nvec3 dirSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\nvec3 dirVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( normal, dirVector );\n#ifdef WRAP_AROUND\nfloat dirDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n#else\nfloat dirDiffuseWeight = max( dotProduct, 0.0 );\n#endif\ndirDiffuse  += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;\nvec3 dirHalfVector = normalize( dirVector + viewPosition );\nfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\nfloat dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );\ndirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n#else\ndirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight;\n#endif\n}\n#endif\n#if MAX_HEMI_LIGHTS > 0\nvec3 hemiDiffuse  = vec3( 0.0 );\nvec3 hemiSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\nvec3 lVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( normal, lVector );\nfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\nvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\nhemiDiffuse += diffuse * hemiColor;\nvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\nfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\nfloat hemiSpecularWeightSky = specularStrength * max( pow( hemiDotNormalHalfSky, shininess ), 0.0 );\nvec3 lVectorGround = -lVector;\nvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\nfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\nfloat hemiSpecularWeightGround = specularStrength * max( pow( hemiDotNormalHalfGround, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat dotProductGround = dot( normal, lVectorGround );\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, hemiHalfVectorSky ), 5.0 );\nvec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 5.0 );\nhemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n#else\nhemiSpecular += specular * hemiColor * ( hemiSpecularWeightSky + hemiSpecularWeightGround ) * hemiDiffuseWeight;\n#endif\n}\n#endif\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n#if MAX_DIR_LIGHTS > 0\ntotalDiffuse += dirDiffuse;\ntotalSpecular += dirSpecular;\n#endif\n#if MAX_HEMI_LIGHTS > 0\ntotalDiffuse += hemiDiffuse;\ntotalSpecular += hemiSpecular;\n#endif\n#if MAX_POINT_LIGHTS > 0\ntotalDiffuse += pointDiffuse;\ntotalSpecular += pointSpecular;\n#endif\n#if MAX_SPOT_LIGHTS > 0\ntotalDiffuse += spotDiffuse;\ntotalSpecular += spotSpecular;\n#endif\n#ifdef METAL\ngl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );\n#else\ngl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n#endif",
color_pars_fragment:"#ifdef USE_COLOR\nvarying vec3 vColor;\n#endif",color_fragment:"#ifdef USE_COLOR\ngl_FragColor = gl_FragColor * vec4( vColor, 1.0 );\n#endif",color_pars_vertex:"#ifdef USE_COLOR\nvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n#ifdef GAMMA_INPUT\nvColor = color * color;\n#else\nvColor = color;\n#endif\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n#ifdef BONE_TEXTURE\nuniform sampler2D boneTexture;\nuniform int boneTextureWidth;\nuniform int boneTextureHeight;\nmat4 getBoneMatrix( const in float i ) {\nfloat j = i * 4.0;\nfloat x = mod( j, float( boneTextureWidth ) );\nfloat y = floor( j / float( boneTextureWidth ) );\nfloat dx = 1.0 / float( boneTextureWidth );\nfloat dy = 1.0 / float( boneTextureHeight );\ny = dy * ( y + 0.5 );\nvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\nvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\nvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\nvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\nmat4 bone = mat4( v1, v2, v3, v4 );\nreturn bone;\n}\n#else\nuniform mat4 boneGlobalMatrices[ MAX_BONES ];\nmat4 getBoneMatrix( const in float i ) {\nmat4 bone = boneGlobalMatrices[ int(i) ];\nreturn bone;\n}\n#endif\n#endif",
skinbase_vertex:"#ifdef USE_SKINNING\nmat4 boneMatX = getBoneMatrix( skinIndex.x );\nmat4 boneMatY = getBoneMatrix( skinIndex.y );\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n#ifdef USE_MORPHTARGETS\nvec4 skinVertex = vec4( morphed, 1.0 );\n#else\nvec4 skinVertex = vec4( position, 1.0 );\n#endif\nvec4 skinned  = boneMatX * skinVertex * skinWeight.x;\nskinned \t  += boneMatY * skinVertex * skinWeight.y;\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n#ifndef USE_MORPHNORMALS\nuniform float morphTargetInfluences[ 8 ];\n#else\nuniform float morphTargetInfluences[ 4 ];\n#endif\n#endif",
morphtarget_vertex:"#ifdef USE_MORPHTARGETS\nvec3 morphed = vec3( 0.0 );\nmorphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\nmorphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\nmorphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\nmorphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n#ifndef USE_MORPHNORMALS\nmorphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\nmorphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\nmorphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\nmorphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n#endif\nmorphed += position;\n#endif",
default_vertex:"vec4 mvPosition;\n#ifdef USE_SKINNING\nmvPosition = modelViewMatrix * skinned;\n#endif\n#if !defined( USE_SKINNING ) && defined( USE_MORPHTARGETS )\nmvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n#endif\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHTARGETS )\nmvPosition = modelViewMatrix * vec4( position, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\nvec3 morphedNormal = vec3( 0.0 );\nmorphedNormal +=  ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\nmorphedNormal +=  ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\nmorphedNormal +=  ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\nmorphedNormal +=  ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\nmorphedNormal += normal;\n#endif",
skinnormal_vertex:"#ifdef USE_SKINNING\nmat4 skinMatrix = skinWeight.x * boneMatX;\nskinMatrix \t+= skinWeight.y * boneMatY;\n#ifdef USE_MORPHNORMALS\nvec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\n#else\nvec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\n#endif\n#endif",defaultnormal_vertex:"vec3 objectNormal;\n#ifdef USE_SKINNING\nobjectNormal = skinnedNormal.xyz;\n#endif\n#if !defined( USE_SKINNING ) && defined( USE_MORPHNORMALS )\nobjectNormal = morphedNormal;\n#endif\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHNORMALS )\nobjectNormal = normal;\n#endif\n#ifdef FLIP_SIDED\nobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;",
shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\nuniform sampler2D shadowMap[ MAX_SHADOWS ];\nuniform vec2 shadowMapSize[ MAX_SHADOWS ];\nuniform float shadowDarkness[ MAX_SHADOWS ];\nuniform float shadowBias[ MAX_SHADOWS ];\nvarying vec4 vShadowCoord[ MAX_SHADOWS ];\nfloat unpackDepth( const in vec4 rgba_depth ) {\nconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\nfloat depth = dot( rgba_depth, bit_shift );\nreturn depth;\n}\n#endif",shadowmap_fragment:"#ifdef USE_SHADOWMAP\n#ifdef SHADOWMAP_DEBUG\nvec3 frustumColors[3];\nfrustumColors[0] = vec3( 1.0, 0.5, 0.0 );\nfrustumColors[1] = vec3( 0.0, 1.0, 0.8 );\nfrustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n#endif\n#ifdef SHADOWMAP_CASCADE\nint inFrustumCount = 0;\n#endif\nfloat fDepth;\nvec3 shadowColor = vec3( 1.0 );\nfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\nvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\nbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\nbool inFrustum = all( inFrustumVec );\n#ifdef SHADOWMAP_CASCADE\ninFrustumCount += int( inFrustum );\nbvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n#else\nbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n#endif\nbool frustumTest = all( frustumTestVec );\nif ( frustumTest ) {\nshadowCoord.z += shadowBias[ i ];\n#if defined( SHADOWMAP_TYPE_PCF )\nfloat shadow = 0.0;\nconst float shadowDelta = 1.0 / 9.0;\nfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\nfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\nfloat dx0 = -1.25 * xPixelOffset;\nfloat dy0 = -1.25 * yPixelOffset;\nfloat dx1 = 1.25 * xPixelOffset;\nfloat dy1 = 1.25 * yPixelOffset;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\nfloat shadow = 0.0;\nfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\nfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\nfloat dx0 = -1.0 * xPixelOffset;\nfloat dy0 = -1.0 * yPixelOffset;\nfloat dx1 = 1.0 * xPixelOffset;\nfloat dy1 = 1.0 * yPixelOffset;\nmat3 shadowKernel;\nmat3 depthKernel;\ndepthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\ndepthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\ndepthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\ndepthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\ndepthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\ndepthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\ndepthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\ndepthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\ndepthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\nvec3 shadowZ = vec3( shadowCoord.z );\nshadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\nshadowKernel[0] *= vec3(0.25);\nshadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\nshadowKernel[1] *= vec3(0.25);\nshadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\nshadowKernel[2] *= vec3(0.25);\nvec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\nshadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\nshadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\nvec4 shadowValues;\nshadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\nshadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\nshadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\nshadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\nshadow = dot( shadowValues, vec4( 1.0 ) );\nshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n#else\nvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\nfloat fDepth = unpackDepth( rgbaDepth );\nif ( fDepth < shadowCoord.z )\nshadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n#endif\n}\n#ifdef SHADOWMAP_DEBUG\n#ifdef SHADOWMAP_CASCADE\nif ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];\n#else\nif ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];\n#endif\n#endif\n}\n#ifdef GAMMA_OUTPUT\nshadowColor *= shadowColor;\n#endif\ngl_FragColor.xyz = gl_FragColor.xyz * shadowColor;\n#endif",
shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\nvarying vec4 vShadowCoord[ MAX_SHADOWS ];\nuniform mat4 shadowMatrix[ MAX_SHADOWS ];\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\nfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\nvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n}\n#endif",alphatest_fragment:"#ifdef ALPHATEST\nif ( gl_FragColor.a < ALPHATEST ) discard;\n#endif",linear_to_gamma_fragment:"#ifdef GAMMA_OUTPUT\ngl_FragColor.xyz = sqrt( gl_FragColor.xyz );\n#endif"};THREE.UniformsUtils={merge:function(a){var b,c,d,e={};for(b=0;b<a.length;b++)for(c in d=this.clone(a[b]),d)e[c]=d[c];return e},clone:function(a){var b,c,d,e={};for(b in a)for(c in e[b]={},a[b])d=a[b][c],e[b][c]=d instanceof THREE.Color||d instanceof THREE.Vector2||d instanceof THREE.Vector3||d instanceof THREE.Vector4||d instanceof THREE.Matrix4||d instanceof THREE.Texture?d.clone():d instanceof Array?d.slice():d;return e}};THREE.UniformsLib={common:{diffuse:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},lightMap:{type:"t",value:null},specularMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},useRefract:{type:"i",value:0},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:0.98},combine:{type:"i",value:0},morphTargetInfluences:{type:"f",value:0}},bump:{bumpMap:{type:"t",
value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new THREE.Vector2(1,1)}},fog:{fogDensity:{type:"f",value:2.5E-4},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},fogColor:{type:"c",value:new THREE.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},hemisphereLightDirection:{type:"fv",value:[]},hemisphereLightSkyColor:{type:"fv",
value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]}},particle:{psColor:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",
value:1},scale:{type:"f",value:1},map:{type:"t",value:null},fogDensity:{type:"f",value:2.5E-4},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},fogColor:{type:"c",value:new THREE.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}};THREE.ShaderLib={basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.shadowmap]),vertexShader:[THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,
THREE.ShaderChunk.skinbase_vertex,"#ifdef USE_ENVMAP",THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"#endif",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,
THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,"void main() {\ngl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,
THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},lambert:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\nvarying vec3 vLightBack;\n#endif",
THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_lambert_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,
THREE.ShaderChunk.defaultnormal_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_lambert_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\nvarying vec3 vLightBack;\n#endif",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,
THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,"void main() {\ngl_FragColor = vec4( vec3 ( 1.0 ), opacity );",THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,"#ifdef DOUBLE_SIDED\nif ( gl_FrontFacing )\ngl_FragColor.xyz *= vLightFront;\nelse\ngl_FragColor.xyz *= vLightBack;\n#else\ngl_FragColor.xyz *= vLightFront;\n#endif",THREE.ShaderChunk.lightmap_fragment,
THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},phong:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.bump,THREE.UniformsLib.normalmap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},specular:{type:"c",
value:new THREE.Color(1118481)},shininess:{type:"f",value:30},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define PHONG\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_phong_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,
"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"vNormal = normalize( transformedNormal );",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,"vViewPosition = -mvPosition.xyz;",THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,
THREE.ShaderChunk.lights_phong_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;\nuniform vec3 ambient;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.lights_phong_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,
THREE.ShaderChunk.bumpmap_pars_fragment,THREE.ShaderChunk.normalmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,"void main() {\ngl_FragColor = vec4( vec3 ( 1.0 ), opacity );",THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lights_phong_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,
THREE.ShaderChunk.fog_fragment,"}"].join("\n")},particle_basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.particle,THREE.UniformsLib.shadowmap]),vertexShader:["uniform float size;\nuniform float scale;",THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n#ifdef USE_SIZEATTENUATION\ngl_PointSize = size * ( scale / length( mvPosition.xyz ) );\n#else\ngl_PointSize = size;\n#endif\ngl_Position = projectionMatrix * mvPosition;",
THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;\nuniform float opacity;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_particle_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,"void main() {\ngl_FragColor = vec4( psColor, opacity );",THREE.ShaderChunk.map_particle_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.shadowmap_fragment,
THREE.ShaderChunk.fog_fragment,"}"].join("\n")},dashed:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;",THREE.ShaderChunk.color_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"vLineDistance = scale * lineDistance;\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n}"].join("\n"),
fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,"void main() {\nif ( mod( vLineDistance, totalSize ) > dashSize ) {\ndiscard;\n}\ngl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2E3},opacity:{type:"f",
value:1}},vertexShader:"void main() {\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform float mNear;\nuniform float mFar;\nuniform float opacity;\nvoid main() {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat color = 1.0 - smoothstep( mNear, mFar, depth );\ngl_FragColor = vec4( vec3( color ), opacity );\n}"},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",THREE.ShaderChunk.morphtarget_pars_vertex,"void main() {\nvNormal = normalize( normalMatrix * normal );",
THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,"}"].join("\n"),fragmentShader:"uniform float opacity;\nvarying vec3 vNormal;\nvoid main() {\ngl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );\n}"},normalmap:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{enableAO:{type:"i",value:0},enableDiffuse:{type:"i",value:0},enableSpecular:{type:"i",value:0},enableReflection:{type:"i",value:0},enableDisplacement:{type:"i",
value:0},tDisplacement:{type:"t",value:null},tDiffuse:{type:"t",value:null},tCube:{type:"t",value:null},tNormal:{type:"t",value:null},tSpecular:{type:"t",value:null},tAO:{type:"t",value:null},uNormalScale:{type:"v2",value:new THREE.Vector2(1,1)},uDisplacementBias:{type:"f",value:0},uDisplacementScale:{type:"f",value:1},uDiffuseColor:{type:"c",value:new THREE.Color(16777215)},uSpecularColor:{type:"c",value:new THREE.Color(1118481)},uAmbientColor:{type:"c",value:new THREE.Color(16777215)},uShininess:{type:"f",
value:30},uOpacity:{type:"f",value:1},useRefract:{type:"i",value:0},uRefractionRatio:{type:"f",value:0.98},uReflectivity:{type:"f",value:0.5},uOffset:{type:"v2",value:new THREE.Vector2(0,0)},uRepeat:{type:"v2",value:new THREE.Vector2(1,1)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),fragmentShader:["uniform vec3 uAmbientColor;\nuniform vec3 uDiffuseColor;\nuniform vec3 uSpecularColor;\nuniform float uShininess;\nuniform float uOpacity;\nuniform bool enableDiffuse;\nuniform bool enableSpecular;\nuniform bool enableAO;\nuniform bool enableReflection;\nuniform sampler2D tDiffuse;\nuniform sampler2D tNormal;\nuniform sampler2D tSpecular;\nuniform sampler2D tAO;\nuniform samplerCube tCube;\nuniform vec2 uNormalScale;\nuniform bool useRefract;\nuniform float uRefractionRatio;\nuniform float uReflectivity;\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nuniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_HEMI_LIGHTS > 0\nuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\nuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\nuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n#endif\n#ifdef WRAP_AROUND\nuniform vec3 wrapRGB;\n#endif\nvarying vec3 vWorldPosition;\nvarying vec3 vViewPosition;",
THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,"void main() {\ngl_FragColor = vec4( vec3( 1.0 ), uOpacity );\nvec3 specularTex = vec3( 1.0 );\nvec3 normalTex = texture2D( tNormal, vUv ).xyz * 2.0 - 1.0;\nnormalTex.xy *= uNormalScale;\nnormalTex = normalize( normalTex );\nif( enableDiffuse ) {\n#ifdef GAMMA_INPUT\nvec4 texelColor = texture2D( tDiffuse, vUv );\ntexelColor.xyz *= texelColor.xyz;\ngl_FragColor = gl_FragColor * texelColor;\n#else\ngl_FragColor = gl_FragColor * texture2D( tDiffuse, vUv );\n#endif\n}\nif( enableAO ) {\n#ifdef GAMMA_INPUT\nvec4 aoColor = texture2D( tAO, vUv );\naoColor.xyz *= aoColor.xyz;\ngl_FragColor.xyz = gl_FragColor.xyz * aoColor.xyz;\n#else\ngl_FragColor.xyz = gl_FragColor.xyz * texture2D( tAO, vUv ).xyz;\n#endif\n}\nif( enableSpecular )\nspecularTex = texture2D( tSpecular, vUv ).xyz;\nmat3 tsb = mat3( normalize( vTangent ), normalize( vBinormal ), normalize( vNormal ) );\nvec3 finalNormal = tsb * normalTex;\n#ifdef FLIP_SIDED\nfinalNormal = -finalNormal;\n#endif\nvec3 normal = normalize( finalNormal );\nvec3 viewPosition = normalize( vViewPosition );\n#if MAX_POINT_LIGHTS > 0\nvec3 pointDiffuse = vec3( 0.0 );\nvec3 pointSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 pointVector = lPosition.xyz + vViewPosition.xyz;\nfloat pointDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\npointDistance = 1.0 - min( ( length( pointVector ) / pointLightDistance[ i ] ), 1.0 );\npointVector = normalize( pointVector );\n#ifdef WRAP_AROUND\nfloat pointDiffuseWeightFull = max( dot( normal, pointVector ), 0.0 );\nfloat pointDiffuseWeightHalf = max( 0.5 * dot( normal, pointVector ) + 0.5, 0.0 );\nvec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n#else\nfloat pointDiffuseWeight = max( dot( normal, pointVector ), 0.0 );\n#endif\npointDiffuse += pointDistance * pointLightColor[ i ] * uDiffuseColor * pointDiffuseWeight;\nvec3 pointHalfVector = normalize( pointVector + viewPosition );\nfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\nfloat pointSpecularWeight = specularTex.r * max( pow( pointDotNormalHalf, uShininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( uShininess + 2.0001 ) / 8.0;\nvec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( pointVector, pointHalfVector ), 5.0 );\npointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * pointDistance * specularNormalization;\n#else\npointSpecular += pointDistance * pointLightColor[ i ] * uSpecularColor * pointSpecularWeight * pointDiffuseWeight;\n#endif\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nvec3 spotDiffuse = vec3( 0.0 );\nvec3 spotSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 spotVector = lPosition.xyz + vViewPosition.xyz;\nfloat spotDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nspotDistance = 1.0 - min( ( length( spotVector ) / spotLightDistance[ i ] ), 1.0 );\nspotVector = normalize( spotVector );\nfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\nif ( spotEffect > spotLightAngleCos[ i ] ) {\nspotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );\n#ifdef WRAP_AROUND\nfloat spotDiffuseWeightFull = max( dot( normal, spotVector ), 0.0 );\nfloat spotDiffuseWeightHalf = max( 0.5 * dot( normal, spotVector ) + 0.5, 0.0 );\nvec3 spotDiffuseWeight = mix( vec3 ( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n#else\nfloat spotDiffuseWeight = max( dot( normal, spotVector ), 0.0 );\n#endif\nspotDiffuse += spotDistance * spotLightColor[ i ] * uDiffuseColor * spotDiffuseWeight * spotEffect;\nvec3 spotHalfVector = normalize( spotVector + viewPosition );\nfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\nfloat spotSpecularWeight = specularTex.r * max( pow( spotDotNormalHalf, uShininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( uShininess + 2.0001 ) / 8.0;\nvec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( spotVector, spotHalfVector ), 5.0 );\nspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * spotDistance * specularNormalization * spotEffect;\n#else\nspotSpecular += spotDistance * spotLightColor[ i ] * uSpecularColor * spotSpecularWeight * spotDiffuseWeight * spotEffect;\n#endif\n}\n}\n#endif\n#if MAX_DIR_LIGHTS > 0\nvec3 dirDiffuse = vec3( 0.0 );\nvec3 dirSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_DIR_LIGHTS; i++ ) {\nvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\nvec3 dirVector = normalize( lDirection.xyz );\n#ifdef WRAP_AROUND\nfloat directionalLightWeightingFull = max( dot( normal, dirVector ), 0.0 );\nfloat directionalLightWeightingHalf = max( 0.5 * dot( normal, dirVector ) + 0.5, 0.0 );\nvec3 dirDiffuseWeight = mix( vec3( directionalLightWeightingFull ), vec3( directionalLightWeightingHalf ), wrapRGB );\n#else\nfloat dirDiffuseWeight = max( dot( normal, dirVector ), 0.0 );\n#endif\ndirDiffuse += directionalLightColor[ i ] * uDiffuseColor * dirDiffuseWeight;\nvec3 dirHalfVector = normalize( dirVector + viewPosition );\nfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\nfloat dirSpecularWeight = specularTex.r * max( pow( dirDotNormalHalf, uShininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( uShininess + 2.0001 ) / 8.0;\nvec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );\ndirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n#else\ndirSpecular += directionalLightColor[ i ] * uSpecularColor * dirSpecularWeight * dirDiffuseWeight;\n#endif\n}\n#endif\n#if MAX_HEMI_LIGHTS > 0\nvec3 hemiDiffuse  = vec3( 0.0 );\nvec3 hemiSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\nvec3 lVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( normal, lVector );\nfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\nvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\nhemiDiffuse += uDiffuseColor * hemiColor;\nvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\nfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\nfloat hemiSpecularWeightSky = specularTex.r * max( pow( hemiDotNormalHalfSky, uShininess ), 0.0 );\nvec3 lVectorGround = -lVector;\nvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\nfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\nfloat hemiSpecularWeightGround = specularTex.r * max( pow( hemiDotNormalHalfGround, uShininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat dotProductGround = dot( normal, lVectorGround );\nfloat specularNormalization = ( uShininess + 2.0001 ) / 8.0;\nvec3 schlickSky = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( lVector, hemiHalfVectorSky ), 5.0 );\nvec3 schlickGround = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 5.0 );\nhemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n#else\nhemiSpecular += uSpecularColor * hemiColor * ( hemiSpecularWeightSky + hemiSpecularWeightGround ) * hemiDiffuseWeight;\n#endif\n}\n#endif\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n#if MAX_DIR_LIGHTS > 0\ntotalDiffuse += dirDiffuse;\ntotalSpecular += dirSpecular;\n#endif\n#if MAX_HEMI_LIGHTS > 0\ntotalDiffuse += hemiDiffuse;\ntotalSpecular += hemiSpecular;\n#endif\n#if MAX_POINT_LIGHTS > 0\ntotalDiffuse += pointDiffuse;\ntotalSpecular += pointSpecular;\n#endif\n#if MAX_SPOT_LIGHTS > 0\ntotalDiffuse += spotDiffuse;\ntotalSpecular += spotSpecular;\n#endif\n#ifdef METAL\ngl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * uAmbientColor + totalSpecular );\n#else\ngl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * uAmbientColor ) + totalSpecular;\n#endif\nif ( enableReflection ) {\nvec3 vReflect;\nvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\nif ( useRefract ) {\nvReflect = refract( cameraToVertex, normal, uRefractionRatio );\n} else {\nvReflect = reflect( cameraToVertex, normal );\n}\nvec4 cubeColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );\n#ifdef GAMMA_INPUT\ncubeColor.xyz *= cubeColor.xyz;\n#endif\ngl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularTex.r * uReflectivity );\n}",
THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n"),vertexShader:["attribute vec4 tangent;\nuniform vec2 uOffset;\nuniform vec2 uRepeat;\nuniform bool enableDisplacement;\n#ifdef VERTEX_TEXTURES\nuniform sampler2D tDisplacement;\nuniform float uDisplacementScale;\nuniform float uDisplacementBias;\n#endif\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vWorldPosition;\nvarying vec3 vViewPosition;",
THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,"#ifdef USE_SKINNING\nvNormal = normalize( normalMatrix * skinnedNormal.xyz );\nvec4 skinnedTangent = skinMatrix * vec4( tangent.xyz, 0.0 );\nvTangent = normalize( normalMatrix * skinnedTangent.xyz );\n#else\nvNormal = normalize( normalMatrix * normal );\nvTangent = normalize( normalMatrix * tangent.xyz );\n#endif\nvBinormal = normalize( cross( vNormal, vTangent ) * tangent.w );\nvUv = uv * uRepeat + uOffset;\nvec3 displacedPosition;\n#ifdef VERTEX_TEXTURES\nif ( enableDisplacement ) {\nvec3 dv = texture2D( tDisplacement, uv ).xyz;\nfloat df = uDisplacementScale * dv.x + uDisplacementBias;\ndisplacedPosition = position + normalize( normal ) * df;\n} else {\n#ifdef USE_SKINNING\nvec4 skinVertex = vec4( position, 1.0 );\nvec4 skinned  = boneMatX * skinVertex * skinWeight.x;\nskinned \t  += boneMatY * skinVertex * skinWeight.y;\ndisplacedPosition  = skinned.xyz;\n#else\ndisplacedPosition = position;\n#endif\n}\n#else\n#ifdef USE_SKINNING\nvec4 skinVertex = vec4( position, 1.0 );\nvec4 skinned  = boneMatX * skinVertex * skinWeight.x;\nskinned \t  += boneMatY * skinVertex * skinWeight.y;\ndisplacedPosition  = skinned.xyz;\n#else\ndisplacedPosition = position;\n#endif\n#endif\nvec4 mvPosition = modelViewMatrix * vec4( displacedPosition, 1.0 );\nvec4 worldPosition = modelMatrix * vec4( displacedPosition, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\nvWorldPosition = worldPosition.xyz;\nvViewPosition = -mvPosition.xyz;\n#ifdef USE_SHADOWMAP\nfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\nvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n}\n#endif\n}"].join("\n")},
cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:"varying vec3 vWorldPosition;\nvoid main() {\nvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\nvWorldPosition = worldPosition.xyz;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform samplerCube tCube;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\nvoid main() {\ngl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n}"},
depthRGBA:{uniforms:{},vertexShader:[THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,"}"].join("\n"),fragmentShader:"vec4 pack_depth( const in float depth ) {\nconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\nconst vec4 bit_mask  = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\nvec4 res = fract( depth * bit_shift );\nres -= res.xxyz * bit_mask;\nreturn res;\n}\nvoid main() {\ngl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\n}"}};THREE.WebGLRenderer=function(a){function b(a,b){var c=a.vertices.length,d=b.material;if(d.attributes){void 0===a.__webglCustomAttributesList&&(a.__webglCustomAttributesList=[]);for(var e in d.attributes){var f=d.attributes[e];if(!f.__webglInitialized||f.createUniqueBuffers){f.__webglInitialized=!0;var h=1;"v2"===f.type?h=2:"v3"===f.type?h=3:"v4"===f.type?h=4:"c"===f.type&&(h=3);f.size=h;f.array=new Float32Array(c*h);f.buffer=j.createBuffer();f.buffer.belongsToAttribute=e;f.needsUpdate=!0}a.__webglCustomAttributesList.push(f)}}}
function c(a,b){var c=b.geometry,h=a.faces3,g=3*h.length,i=1*h.length,k=3*h.length,h=d(b,a),m=f(h),l=e(h),n=h.vertexColors?h.vertexColors:!1;a.__vertexArray=new Float32Array(3*g);l&&(a.__normalArray=new Float32Array(3*g));c.hasTangents&&(a.__tangentArray=new Float32Array(4*g));n&&(a.__colorArray=new Float32Array(3*g));m&&(0<c.faceVertexUvs.length&&(a.__uvArray=new Float32Array(2*g)),1<c.faceVertexUvs.length&&(a.__uv2Array=new Float32Array(2*g)));b.geometry.skinWeights.length&&b.geometry.skinIndices.length&&
(a.__skinIndexArray=new Float32Array(4*g),a.__skinWeightArray=new Float32Array(4*g));a.__faceArray=new Uint16Array(3*i);a.__lineArray=new Uint16Array(2*k);if(a.numMorphTargets){a.__morphTargetsArrays=[];c=0;for(m=a.numMorphTargets;c<m;c++)a.__morphTargetsArrays.push(new Float32Array(3*g))}if(a.numMorphNormals){a.__morphNormalsArrays=[];c=0;for(m=a.numMorphNormals;c<m;c++)a.__morphNormalsArrays.push(new Float32Array(3*g))}a.__webglFaceCount=3*i;a.__webglLineCount=2*k;if(h.attributes){void 0===a.__webglCustomAttributesList&&
(a.__webglCustomAttributesList=[]);for(var p in h.attributes){var i=h.attributes[p],k={},q;for(q in i)k[q]=i[q];if(!k.__webglInitialized||k.createUniqueBuffers)k.__webglInitialized=!0,c=1,"v2"===k.type?c=2:"v3"===k.type?c=3:"v4"===k.type?c=4:"c"===k.type&&(c=3),k.size=c,k.array=new Float32Array(g*c),k.buffer=j.createBuffer(),k.buffer.belongsToAttribute=p,i.needsUpdate=!0,k.__original=i;a.__webglCustomAttributesList.push(k)}}a.__inittedArrays=!0}function d(a,b){return a.material instanceof THREE.MeshFaceMaterial?
a.material.materials[b.materialIndex]:a.material}function e(a){return a instanceof THREE.MeshBasicMaterial&&!a.envMap||a instanceof THREE.MeshDepthMaterial?!1:a&&void 0!==a.shading&&a.shading===THREE.SmoothShading?THREE.SmoothShading:THREE.FlatShading}function f(a){return a.map||a.lightMap||a.bumpMap||a.normalMap||a.specularMap||a instanceof THREE.ShaderMaterial?!0:!1}function h(a){va[a]||(j.enableVertexAttribArray(a),va[a]=!0)}function g(){for(var a in va)va[a]&&(j.disableVertexAttribArray(a),va[a]=
!1)}function i(a,b){return a.z!==b.z?b.z-a.z:a.id-b.id}function k(a,b){return b[0]-a[0]}function m(a,b,c){if(a.length)for(var d=0,e=a.length;d<e;d++)ea=Ba=null,Aa=$=U=Y=ka=Ga=ja=-1,ta=!0,a[d].render(b,c,sb,pb),ea=Ba=null,Aa=$=U=Y=ka=Ga=ja=-1,ta=!0}function l(a,b,c,d,e,f,h,g){var j,i,k,m;b?(i=a.length-1,m=b=-1):(i=0,b=a.length,m=1);for(var l=i;l!==b;l+=m)if(j=a[l],j.render){i=j.object;k=j.buffer;if(g)j=g;else{j=j[c];if(!j)continue;h&&L.setBlending(j.blending,j.blendEquation,j.blendSrc,j.blendDst);
L.setDepthTest(j.depthTest);L.setDepthWrite(j.depthWrite);A(j.polygonOffset,j.polygonOffsetFactor,j.polygonOffsetUnits)}L.setMaterialFaces(j);k instanceof THREE.BufferGeometry?L.renderBufferDirect(d,e,f,j,k,i):L.renderBuffer(d,e,f,j,k,i)}}function p(a,b,c,d,e,f,h){for(var g,j,i=0,k=a.length;i<k;i++)if(g=a[i],j=g.object,j.visible){if(h)g=h;else{g=g[b];if(!g)continue;f&&L.setBlending(g.blending,g.blendEquation,g.blendSrc,g.blendDst);L.setDepthTest(g.depthTest);L.setDepthWrite(g.depthWrite);A(g.polygonOffset,
g.polygonOffsetFactor,g.polygonOffsetUnits)}L.renderImmediateObject(c,d,e,g,j)}}function t(a,d){var e,f,h,g;if(void 0===a.__webglInit&&(a.__webglInit=!0,a._modelViewMatrix=new THREE.Matrix4,a._normalMatrix=new THREE.Matrix3,void 0!==a.geometry&&void 0===a.geometry.__webglInit&&(a.geometry.__webglInit=!0,a.geometry.addEventListener("dispose",Cb)),f=a.geometry,void 0!==f))if(f instanceof THREE.BufferGeometry){var i,k;for(i in f.attributes)k="index"===i?j.ELEMENT_ARRAY_BUFFER:j.ARRAY_BUFFER,g=f.attributes[i],
void 0===g.numItems&&(g.numItems=g.array.length),g.buffer=j.createBuffer(),j.bindBuffer(k,g.buffer),j.bufferData(k,g.array,j.STATIC_DRAW)}else if(a instanceof THREE.Mesh){h=a.material;if(void 0===f.geometryGroups){i=f;var m,l,n;k={};var p=i.morphTargets.length,q=i.morphNormals.length,t=h instanceof THREE.MeshFaceMaterial;i.geometryGroups={};h=0;for(m=i.faces.length;h<m;h++)l=i.faces[h],l=t?l.materialIndex:0,void 0===k[l]&&(k[l]={hash:l,counter:0}),n=k[l].hash+"_"+k[l].counter,void 0===i.geometryGroups[n]&&
(i.geometryGroups[n]={faces3:[],materialIndex:l,vertices:0,numMorphTargets:p,numMorphNormals:q}),65535<i.geometryGroups[n].vertices+3&&(k[l].counter+=1,n=k[l].hash+"_"+k[l].counter,void 0===i.geometryGroups[n]&&(i.geometryGroups[n]={faces3:[],materialIndex:l,vertices:0,numMorphTargets:p,numMorphNormals:q})),i.geometryGroups[n].faces3.push(h),i.geometryGroups[n].vertices+=3;i.geometryGroupsList=[];for(g in i.geometryGroups)i.geometryGroups[g].id=V++,i.geometryGroupsList.push(i.geometryGroups[g])}for(e in f.geometryGroups)if(g=
f.geometryGroups[e],!g.__webglVertexBuffer){i=g;i.__webglVertexBuffer=j.createBuffer();i.__webglNormalBuffer=j.createBuffer();i.__webglTangentBuffer=j.createBuffer();i.__webglColorBuffer=j.createBuffer();i.__webglUVBuffer=j.createBuffer();i.__webglUV2Buffer=j.createBuffer();i.__webglSkinIndicesBuffer=j.createBuffer();i.__webglSkinWeightsBuffer=j.createBuffer();i.__webglFaceBuffer=j.createBuffer();i.__webglLineBuffer=j.createBuffer();p=k=void 0;if(i.numMorphTargets){i.__webglMorphTargetsBuffers=[];
k=0;for(p=i.numMorphTargets;k<p;k++)i.__webglMorphTargetsBuffers.push(j.createBuffer())}if(i.numMorphNormals){i.__webglMorphNormalsBuffers=[];k=0;for(p=i.numMorphNormals;k<p;k++)i.__webglMorphNormalsBuffers.push(j.createBuffer())}L.info.memory.geometries++;c(g,a);f.verticesNeedUpdate=!0;f.morphTargetsNeedUpdate=!0;f.elementsNeedUpdate=!0;f.uvsNeedUpdate=!0;f.normalsNeedUpdate=!0;f.tangentsNeedUpdate=!0;f.colorsNeedUpdate=!0}}else a instanceof THREE.Line?f.__webglVertexBuffer||(g=f,g.__webglVertexBuffer=
j.createBuffer(),g.__webglColorBuffer=j.createBuffer(),g.__webglLineDistanceBuffer=j.createBuffer(),L.info.memory.geometries++,g=f,i=g.vertices.length,g.__vertexArray=new Float32Array(3*i),g.__colorArray=new Float32Array(3*i),g.__lineDistanceArray=new Float32Array(1*i),g.__webglLineCount=i,b(g,a),f.verticesNeedUpdate=!0,f.colorsNeedUpdate=!0,f.lineDistancesNeedUpdate=!0):a instanceof THREE.ParticleSystem&&!f.__webglVertexBuffer&&(g=f,g.__webglVertexBuffer=j.createBuffer(),g.__webglColorBuffer=j.createBuffer(),
L.info.memory.geometries++,g=f,i=g.vertices.length,g.__vertexArray=new Float32Array(3*i),g.__colorArray=new Float32Array(3*i),g.__sortArray=[],g.__webglParticleCount=i,b(g,a),f.verticesNeedUpdate=!0,f.colorsNeedUpdate=!0);if(void 0===a.__webglActive){if(a instanceof THREE.Mesh)if(f=a.geometry,f instanceof THREE.BufferGeometry)s(d.__webglObjects,f,a);else{if(f instanceof THREE.Geometry)for(e in f.geometryGroups)g=f.geometryGroups[e],s(d.__webglObjects,g,a)}else a instanceof THREE.Line||a instanceof
THREE.ParticleSystem?(f=a.geometry,s(d.__webglObjects,f,a)):a instanceof THREE.ImmediateRenderObject||a.immediateRenderCallback?d.__webglObjectsImmediate.push({id:null,object:a,opaque:null,transparent:null,z:0}):a instanceof THREE.Sprite?d.__webglSprites.push(a):a instanceof THREE.LensFlare&&d.__webglFlares.push(a);a.__webglActive=!0}}function s(a,b,c){a.push({id:null,buffer:b,object:c,opaque:null,transparent:null,z:0})}function q(a){for(var b in a.attributes)if(a.attributes[b].needsUpdate)return!0;
return!1}function n(a){for(var b in a.attributes)a.attributes[b].needsUpdate=!1}function u(a,b){a instanceof THREE.Mesh||a instanceof THREE.ParticleSystem||a instanceof THREE.Line?r(b.__webglObjects,a):a instanceof THREE.Sprite?v(b.__webglSprites,a):a instanceof THREE.LensFlare?v(b.__webglFlares,a):(a instanceof THREE.ImmediateRenderObject||a.immediateRenderCallback)&&r(b.__webglObjectsImmediate,a);delete a.__webglActive}function r(a,b){for(var c=a.length-1;0<=c;c--)a[c].object===b&&a.splice(c,1)}
function v(a,b){for(var c=a.length-1;0<=c;c--)a[c]===b&&a.splice(c,1)}function z(a,b,c,d,e){P=0;d.needsUpdate&&(d.program&&Gb(d),L.initMaterial(d,b,c,e),d.needsUpdate=!1);d.morphTargets&&!e.__webglMorphTargetInfluences&&(e.__webglMorphTargetInfluences=new Float32Array(L.maxMorphTargets));var f=!1,h=d.program,g=h.uniforms,i=d.uniforms;h!==Ba&&(j.useProgram(h),Ba=h,f=!0);d.id!==Aa&&(Aa=d.id,f=!0);if(f||a!==ea)j.uniformMatrix4fv(g.projectionMatrix,!1,a.projectionMatrix.elements),a!==ea&&(ea=a);if(d.skinning)if(yb&&
e.useVertexTexture){if(null!==g.boneTexture){var k=G();j.uniform1i(g.boneTexture,k);L.setTexture(e.boneTexture,k)}null!==g.boneTextureWidth&&j.uniform1i(g.boneTextureWidth,e.boneTextureWidth);null!==g.boneTextureHeight&&j.uniform1i(g.boneTextureHeight,e.boneTextureHeight)}else null!==g.boneGlobalMatrices&&j.uniformMatrix4fv(g.boneGlobalMatrices,!1,e.boneMatrices);if(f){c&&d.fog&&(i.fogColor.value=c.color,c instanceof THREE.Fog?(i.fogNear.value=c.near,i.fogFar.value=c.far):c instanceof THREE.FogExp2&&
(i.fogDensity.value=c.density));if(d instanceof THREE.MeshPhongMaterial||d instanceof THREE.MeshLambertMaterial||d.lights){if(ta){for(var m,l=k=0,n=0,p,q,t,r=Pa,s=r.directional.colors,u=r.directional.positions,v=r.point.colors,z=r.point.positions,x=r.point.distances,A=r.spot.colors,E=r.spot.positions,D=r.spot.distances,K=r.spot.directions,O=r.spot.anglesCos,C=r.spot.exponents,J=r.hemi.skyColors,V=r.hemi.groundColors,M=r.hemi.positions,Q=0,U=0,Y=0,za=0,$=0,dc=0,X=0,W=0,R=m=0,c=t=R=0,f=b.length;c<f;c++)m=
b[c],m.onlyShadow||(p=m.color,q=m.intensity,t=m.distance,m instanceof THREE.AmbientLight?m.visible&&(L.gammaInput?(k+=p.r*p.r,l+=p.g*p.g,n+=p.b*p.b):(k+=p.r,l+=p.g,n+=p.b)):m instanceof THREE.DirectionalLight?($+=1,m.visible&&(fa.setFromMatrixPosition(m.matrixWorld),ra.setFromMatrixPosition(m.target.matrixWorld),fa.sub(ra),fa.normalize(),0===fa.x&&0===fa.y&&0===fa.z||(m=3*Q,u[m]=fa.x,u[m+1]=fa.y,u[m+2]=fa.z,L.gammaInput?w(s,m,p,q*q):y(s,m,p,q),Q+=1))):m instanceof THREE.PointLight?(dc+=1,m.visible&&
(R=3*U,L.gammaInput?w(v,R,p,q*q):y(v,R,p,q),ra.setFromMatrixPosition(m.matrixWorld),z[R]=ra.x,z[R+1]=ra.y,z[R+2]=ra.z,x[U]=t,U+=1)):m instanceof THREE.SpotLight?(X+=1,m.visible&&(R=3*Y,L.gammaInput?w(A,R,p,q*q):y(A,R,p,q),ra.setFromMatrixPosition(m.matrixWorld),E[R]=ra.x,E[R+1]=ra.y,E[R+2]=ra.z,D[Y]=t,fa.copy(ra),ra.setFromMatrixPosition(m.target.matrixWorld),fa.sub(ra),fa.normalize(),K[R]=fa.x,K[R+1]=fa.y,K[R+2]=fa.z,O[Y]=Math.cos(m.angle),C[Y]=m.exponent,Y+=1)):m instanceof THREE.HemisphereLight&&
(W+=1,m.visible&&(fa.setFromMatrixPosition(m.matrixWorld),fa.normalize(),0===fa.x&&0===fa.y&&0===fa.z||(t=3*za,M[t]=fa.x,M[t+1]=fa.y,M[t+2]=fa.z,p=m.color,m=m.groundColor,L.gammaInput?(q*=q,w(J,t,p,q),w(V,t,m,q)):(y(J,t,p,q),y(V,t,m,q)),za+=1))));c=3*Q;for(f=Math.max(s.length,3*$);c<f;c++)s[c]=0;c=3*U;for(f=Math.max(v.length,3*dc);c<f;c++)v[c]=0;c=3*Y;for(f=Math.max(A.length,3*X);c<f;c++)A[c]=0;c=3*za;for(f=Math.max(J.length,3*W);c<f;c++)J[c]=0;c=3*za;for(f=Math.max(V.length,3*W);c<f;c++)V[c]=0;r.directional.length=
Q;r.point.length=U;r.spot.length=Y;r.hemi.length=za;r.ambient[0]=k;r.ambient[1]=l;r.ambient[2]=n;ta=!1}c=Pa;i.ambientLightColor.value=c.ambient;i.directionalLightColor.value=c.directional.colors;i.directionalLightDirection.value=c.directional.positions;i.pointLightColor.value=c.point.colors;i.pointLightPosition.value=c.point.positions;i.pointLightDistance.value=c.point.distances;i.spotLightColor.value=c.spot.colors;i.spotLightPosition.value=c.spot.positions;i.spotLightDistance.value=c.spot.distances;
i.spotLightDirection.value=c.spot.directions;i.spotLightAngleCos.value=c.spot.anglesCos;i.spotLightExponent.value=c.spot.exponents;i.hemisphereLightSkyColor.value=c.hemi.skyColors;i.hemisphereLightGroundColor.value=c.hemi.groundColors;i.hemisphereLightDirection.value=c.hemi.positions}if(d instanceof THREE.MeshBasicMaterial||d instanceof THREE.MeshLambertMaterial||d instanceof THREE.MeshPhongMaterial){i.opacity.value=d.opacity;L.gammaInput?i.diffuse.value.copyGammaToLinear(d.color):i.diffuse.value=
d.color;i.map.value=d.map;i.lightMap.value=d.lightMap;i.specularMap.value=d.specularMap;d.bumpMap&&(i.bumpMap.value=d.bumpMap,i.bumpScale.value=d.bumpScale);d.normalMap&&(i.normalMap.value=d.normalMap,i.normalScale.value.copy(d.normalScale));var ba;d.map?ba=d.map:d.specularMap?ba=d.specularMap:d.normalMap?ba=d.normalMap:d.bumpMap&&(ba=d.bumpMap);void 0!==ba&&(c=ba.offset,ba=ba.repeat,i.offsetRepeat.value.set(c.x,c.y,ba.x,ba.y));i.envMap.value=d.envMap;i.flipEnvMap.value=d.envMap instanceof THREE.WebGLRenderTargetCube?
1:-1;i.reflectivity.value=d.reflectivity;i.refractionRatio.value=d.refractionRatio;i.combine.value=d.combine;i.useRefract.value=d.envMap&&d.envMap.mapping instanceof THREE.CubeRefractionMapping}d instanceof THREE.LineBasicMaterial?(i.diffuse.value=d.color,i.opacity.value=d.opacity):d instanceof THREE.LineDashedMaterial?(i.diffuse.value=d.color,i.opacity.value=d.opacity,i.dashSize.value=d.dashSize,i.totalSize.value=d.dashSize+d.gapSize,i.scale.value=d.scale):d instanceof THREE.ParticleSystemMaterial?
(i.psColor.value=d.color,i.opacity.value=d.opacity,i.size.value=d.size,i.scale.value=B.height/2,i.map.value=d.map):d instanceof THREE.MeshPhongMaterial?(i.shininess.value=d.shininess,L.gammaInput?(i.ambient.value.copyGammaToLinear(d.ambient),i.emissive.value.copyGammaToLinear(d.emissive),i.specular.value.copyGammaToLinear(d.specular)):(i.ambient.value=d.ambient,i.emissive.value=d.emissive,i.specular.value=d.specular),d.wrapAround&&i.wrapRGB.value.copy(d.wrapRGB)):d instanceof THREE.MeshLambertMaterial?
(L.gammaInput?(i.ambient.value.copyGammaToLinear(d.ambient),i.emissive.value.copyGammaToLinear(d.emissive)):(i.ambient.value=d.ambient,i.emissive.value=d.emissive),d.wrapAround&&i.wrapRGB.value.copy(d.wrapRGB)):d instanceof THREE.MeshDepthMaterial?(i.mNear.value=a.near,i.mFar.value=a.far,i.opacity.value=d.opacity):d instanceof THREE.MeshNormalMaterial&&(i.opacity.value=d.opacity);if(e.receiveShadow&&!d._shadowPass&&i.shadowMatrix){c=ba=0;for(f=b.length;c<f;c++)if(k=b[c],k.castShadow&&(k instanceof
THREE.SpotLight||k instanceof THREE.DirectionalLight&&!k.shadowCascade))i.shadowMap.value[ba]=k.shadowMap,i.shadowMapSize.value[ba]=k.shadowMapSize,i.shadowMatrix.value[ba]=k.shadowMatrix,i.shadowDarkness.value[ba]=k.shadowDarkness,i.shadowBias.value[ba]=k.shadowBias,ba++}b=d.uniformsList;i=0;for(ba=b.length;i<ba;i++)if(f=h.uniforms[b[i][1]])if(c=b[i][0],l=c.type,k=c.value,"i"===l)j.uniform1i(f,k);else if("f"===l)j.uniform1f(f,k);else if("v2"===l)j.uniform2f(f,k.x,k.y);else if("v3"===l)j.uniform3f(f,
k.x,k.y,k.z);else if("v4"===l)j.uniform4f(f,k.x,k.y,k.z,k.w);else if("c"===l)j.uniform3f(f,k.r,k.g,k.b);else if("iv1"===l)j.uniform1iv(f,k);else if("iv"===l)j.uniform3iv(f,k);else if("fv1"===l)j.uniform1fv(f,k);else if("fv"===l)j.uniform3fv(f,k);else if("v2v"===l){void 0===c._array&&(c._array=new Float32Array(2*k.length));l=0;for(n=k.length;l<n;l++)r=2*l,c._array[r]=k[l].x,c._array[r+1]=k[l].y;j.uniform2fv(f,c._array)}else if("v3v"===l){void 0===c._array&&(c._array=new Float32Array(3*k.length));l=
0;for(n=k.length;l<n;l++)r=3*l,c._array[r]=k[l].x,c._array[r+1]=k[l].y,c._array[r+2]=k[l].z;j.uniform3fv(f,c._array)}else if("v4v"===l){void 0===c._array&&(c._array=new Float32Array(4*k.length));l=0;for(n=k.length;l<n;l++)r=4*l,c._array[r]=k[l].x,c._array[r+1]=k[l].y,c._array[r+2]=k[l].z,c._array[r+3]=k[l].w;j.uniform4fv(f,c._array)}else if("m4"===l)void 0===c._array&&(c._array=new Float32Array(16)),k.flattenToArray(c._array),j.uniformMatrix4fv(f,!1,c._array);else if("m4v"===l){void 0===c._array&&
(c._array=new Float32Array(16*k.length));l=0;for(n=k.length;l<n;l++)k[l].flattenToArrayOffset(c._array,16*l);j.uniformMatrix4fv(f,!1,c._array)}else if("t"===l){if(r=k,k=G(),j.uniform1i(f,k),r)if(r.image instanceof Array&&6===r.image.length){if(c=r,f=k,6===c.image.length)if(c.needsUpdate){c.image.__webglTextureCube||(c.addEventListener("dispose",Db),c.image.__webglTextureCube=j.createTexture(),L.info.memory.textures++);j.activeTexture(j.TEXTURE0+f);j.bindTexture(j.TEXTURE_CUBE_MAP,c.image.__webglTextureCube);
j.pixelStorei(j.UNPACK_FLIP_Y_WEBGL,c.flipY);f=c instanceof THREE.CompressedTexture;k=[];for(l=0;6>l;l++)L.autoScaleCubemaps&&!f?(n=k,r=l,s=c.image[l],v=ac,s.width<=v&&s.height<=v||(z=Math.max(s.width,s.height),u=Math.floor(s.width*v/z),v=Math.floor(s.height*v/z),z=document.createElement("canvas"),z.width=u,z.height=v,z.getContext("2d").drawImage(s,0,0,s.width,s.height,0,0,u,v),s=z),n[r]=s):k[l]=c.image[l];l=k[0];n=0===(l.width&l.width-1)&&0===(l.height&l.height-1);r=I(c.format);s=I(c.type);F(j.TEXTURE_CUBE_MAP,
c,n);for(l=0;6>l;l++)if(f){v=k[l].mipmaps;z=0;for(x=v.length;z<x;z++)u=v[z],c.format!==THREE.RGBAFormat?j.compressedTexImage2D(j.TEXTURE_CUBE_MAP_POSITIVE_X+l,z,r,u.width,u.height,0,u.data):j.texImage2D(j.TEXTURE_CUBE_MAP_POSITIVE_X+l,z,r,u.width,u.height,0,r,s,u.data)}else j.texImage2D(j.TEXTURE_CUBE_MAP_POSITIVE_X+l,0,r,r,s,k[l]);c.generateMipmaps&&n&&j.generateMipmap(j.TEXTURE_CUBE_MAP);c.needsUpdate=!1;if(c.onUpdate)c.onUpdate()}else j.activeTexture(j.TEXTURE0+f),j.bindTexture(j.TEXTURE_CUBE_MAP,
c.image.__webglTextureCube)}else r instanceof THREE.WebGLRenderTargetCube?(c=r,j.activeTexture(j.TEXTURE0+k),j.bindTexture(j.TEXTURE_CUBE_MAP,c.__webglTexture)):L.setTexture(r,k)}else if("tv"===l){void 0===c._array&&(c._array=[]);l=0;for(n=c.value.length;l<n;l++)c._array[l]=G();j.uniform1iv(f,c._array);l=0;for(n=c.value.length;l<n;l++)r=c.value[l],k=c._array[l],r&&L.setTexture(r,k)}else console.warn("THREE.WebGLRenderer: Unknown uniform type: "+l);if((d instanceof THREE.ShaderMaterial||d instanceof
THREE.MeshPhongMaterial||d.envMap)&&null!==g.cameraPosition)ra.setFromMatrixPosition(a.matrixWorld),j.uniform3f(g.cameraPosition,ra.x,ra.y,ra.z);(d instanceof THREE.MeshPhongMaterial||d instanceof THREE.MeshLambertMaterial||d instanceof THREE.ShaderMaterial||d.skinning)&&null!==g.viewMatrix&&j.uniformMatrix4fv(g.viewMatrix,!1,a.matrixWorldInverse.elements)}j.uniformMatrix4fv(g.modelViewMatrix,!1,e._modelViewMatrix.elements);g.normalMatrix&&j.uniformMatrix3fv(g.normalMatrix,!1,e._normalMatrix.elements);
null!==g.modelMatrix&&j.uniformMatrix4fv(g.modelMatrix,!1,e.matrixWorld.elements);return h}function G(){var a=P;a>=Mb&&console.warn("WebGLRenderer: trying to use "+a+" texture units while this GPU supports only "+Mb);P+=1;return a}function w(a,b,c,d){a[b]=c.r*c.r*d;a[b+1]=c.g*c.g*d;a[b+2]=c.b*c.b*d}function y(a,b,c,d){a[b]=c.r*d;a[b+1]=c.g*d;a[b+2]=c.b*d}function E(a){a!==wa&&(j.lineWidth(a),wa=a)}function A(a,b,c){Da!==a&&(a?j.enable(j.POLYGON_OFFSET_FILL):j.disable(j.POLYGON_OFFSET_FILL),Da=a);
if(a&&(Ua!==b||Qa!==c))j.polygonOffset(b,c),Ua=b,Qa=c}function K(a){for(var a=a.split("\n"),b=0,c=a.length;b<c;b++)a[b]=b+1+": "+a[b];return a.join("\n")}function D(a,b){var c;"fragment"===a?c=j.createShader(j.FRAGMENT_SHADER):"vertex"===a&&(c=j.createShader(j.VERTEX_SHADER));j.shaderSource(c,b);j.compileShader(c);return!j.getShaderParameter(c,j.COMPILE_STATUS)?(console.error(j.getShaderInfoLog(c)),console.error(K(b)),null):c}function F(a,b,c){c?(j.texParameteri(a,j.TEXTURE_WRAP_S,I(b.wrapS)),j.texParameteri(a,
j.TEXTURE_WRAP_T,I(b.wrapT)),j.texParameteri(a,j.TEXTURE_MAG_FILTER,I(b.magFilter)),j.texParameteri(a,j.TEXTURE_MIN_FILTER,I(b.minFilter))):(j.texParameteri(a,j.TEXTURE_WRAP_S,j.CLAMP_TO_EDGE),j.texParameteri(a,j.TEXTURE_WRAP_T,j.CLAMP_TO_EDGE),j.texParameteri(a,j.TEXTURE_MAG_FILTER,x(b.magFilter)),j.texParameteri(a,j.TEXTURE_MIN_FILTER,x(b.minFilter)));if(La&&b.type!==THREE.FloatType&&(1<b.anisotropy||b.__oldAnisotropy))j.texParameterf(a,La.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(b.anisotropy,Nb)),b.__oldAnisotropy=
b.anisotropy}function O(a,b){j.bindRenderbuffer(j.RENDERBUFFER,a);b.depthBuffer&&!b.stencilBuffer?(j.renderbufferStorage(j.RENDERBUFFER,j.DEPTH_COMPONENT16,b.width,b.height),j.framebufferRenderbuffer(j.FRAMEBUFFER,j.DEPTH_ATTACHMENT,j.RENDERBUFFER,a)):b.depthBuffer&&b.stencilBuffer?(j.renderbufferStorage(j.RENDERBUFFER,j.DEPTH_STENCIL,b.width,b.height),j.framebufferRenderbuffer(j.FRAMEBUFFER,j.DEPTH_STENCIL_ATTACHMENT,j.RENDERBUFFER,a)):j.renderbufferStorage(j.RENDERBUFFER,j.RGBA4,b.width,b.height)}
function x(a){return a===THREE.NearestFilter||a===THREE.NearestMipMapNearestFilter||a===THREE.NearestMipMapLinearFilter?j.NEAREST:j.LINEAR}function I(a){if(a===THREE.RepeatWrapping)return j.REPEAT;if(a===THREE.ClampToEdgeWrapping)return j.CLAMP_TO_EDGE;if(a===THREE.MirroredRepeatWrapping)return j.MIRRORED_REPEAT;if(a===THREE.NearestFilter)return j.NEAREST;if(a===THREE.NearestMipMapNearestFilter)return j.NEAREST_MIPMAP_NEAREST;if(a===THREE.NearestMipMapLinearFilter)return j.NEAREST_MIPMAP_LINEAR;if(a===
THREE.LinearFilter)return j.LINEAR;if(a===THREE.LinearMipMapNearestFilter)return j.LINEAR_MIPMAP_NEAREST;if(a===THREE.LinearMipMapLinearFilter)return j.LINEAR_MIPMAP_LINEAR;if(a===THREE.UnsignedByteType)return j.UNSIGNED_BYTE;if(a===THREE.UnsignedShort4444Type)return j.UNSIGNED_SHORT_4_4_4_4;if(a===THREE.UnsignedShort5551Type)return j.UNSIGNED_SHORT_5_5_5_1;if(a===THREE.UnsignedShort565Type)return j.UNSIGNED_SHORT_5_6_5;if(a===THREE.ByteType)return j.BYTE;if(a===THREE.ShortType)return j.SHORT;if(a===
THREE.UnsignedShortType)return j.UNSIGNED_SHORT;if(a===THREE.IntType)return j.INT;if(a===THREE.UnsignedIntType)return j.UNSIGNED_INT;if(a===THREE.FloatType)return j.FLOAT;if(a===THREE.AlphaFormat)return j.ALPHA;if(a===THREE.RGBFormat)return j.RGB;if(a===THREE.RGBAFormat)return j.RGBA;if(a===THREE.LuminanceFormat)return j.LUMINANCE;if(a===THREE.LuminanceAlphaFormat)return j.LUMINANCE_ALPHA;if(a===THREE.AddEquation)return j.FUNC_ADD;if(a===THREE.SubtractEquation)return j.FUNC_SUBTRACT;if(a===THREE.ReverseSubtractEquation)return j.FUNC_REVERSE_SUBTRACT;
if(a===THREE.ZeroFactor)return j.ZERO;if(a===THREE.OneFactor)return j.ONE;if(a===THREE.SrcColorFactor)return j.SRC_COLOR;if(a===THREE.OneMinusSrcColorFactor)return j.ONE_MINUS_SRC_COLOR;if(a===THREE.SrcAlphaFactor)return j.SRC_ALPHA;if(a===THREE.OneMinusSrcAlphaFactor)return j.ONE_MINUS_SRC_ALPHA;if(a===THREE.DstAlphaFactor)return j.DST_ALPHA;if(a===THREE.OneMinusDstAlphaFactor)return j.ONE_MINUS_DST_ALPHA;if(a===THREE.DstColorFactor)return j.DST_COLOR;if(a===THREE.OneMinusDstColorFactor)return j.ONE_MINUS_DST_COLOR;
if(a===THREE.SrcAlphaSaturateFactor)return j.SRC_ALPHA_SATURATE;if(void 0!==Fa){if(a===THREE.RGB_S3TC_DXT1_Format)return Fa.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===THREE.RGBA_S3TC_DXT1_Format)return Fa.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===THREE.RGBA_S3TC_DXT3_Format)return Fa.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===THREE.RGBA_S3TC_DXT5_Format)return Fa.COMPRESSED_RGBA_S3TC_DXT5_EXT}return 0}console.log("THREE.WebGLRenderer",THREE.REVISION);var a=a||{},B=void 0!==a.canvas?a.canvas:document.createElement("canvas"),
M=void 0!==a.precision?a.precision:"highp",J=void 0!==a.alpha?a.alpha:!1,ca=void 0!==a.premultipliedAlpha?a.premultipliedAlpha:!0,na=void 0!==a.antialias?a.antialias:!1,pa=void 0!==a.stencil?a.stencil:!0,C=void 0!==a.preserveDrawingBuffer?a.preserveDrawingBuffer:!1,Q=new THREE.Color(0),R=0;this.domElement=B;this.context=null;this.devicePixelRatio=void 0!==a.devicePixelRatio?a.devicePixelRatio:void 0!==self.devicePixelRatio?self.devicePixelRatio:1;this.autoUpdateObjects=this.sortObjects=this.autoClearStencil=
this.autoClearDepth=this.autoClearColor=this.autoClear=!0;this.shadowMapEnabled=this.physicallyBasedShading=this.gammaOutput=this.gammaInput=!1;this.shadowMapAutoUpdate=!0;this.shadowMapType=THREE.PCFShadowMap;this.shadowMapCullFace=THREE.CullFaceFront;this.shadowMapCascade=this.shadowMapDebug=!1;this.maxMorphTargets=8;this.maxMorphNormals=4;this.autoScaleCubemaps=!0;this.renderPluginsPre=[];this.renderPluginsPost=[];this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,
faces:0,points:0}};var L=this,da=[],za=0,Ba=null,ba=null,Aa=-1,$=null,ea=null,V=0,P=0,Y=-1,U=-1,ja=-1,sa=-1,ha=-1,Ka=-1,Ga=-1,ka=-1,Da=null,Ua=null,Qa=null,wa=null,bb=0,cb=0,Ma=B.width,fb=B.height,sb=0,pb=0,va={},la=new THREE.Frustum,Ea=new THREE.Matrix4,gb=new THREE.Matrix4,ra=new THREE.Vector3,fa=new THREE.Vector3,ta=!0,Pa={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],
anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},j,Oa,ua,La,Fa;try{var Ra={alpha:J,premultipliedAlpha:ca,antialias:na,stencil:pa,preserveDrawingBuffer:C};j=B.getContext("webgl",Ra)||B.getContext("experimental-webgl",Ra);if(null===j)throw"Error creating WebGL context.";}catch(Zb){console.error(Zb)}Oa=j.getExtension("OES_texture_float");j.getExtension("OES_texture_float_linear");ua=j.getExtension("OES_standard_derivatives");La=j.getExtension("EXT_texture_filter_anisotropic")||
j.getExtension("MOZ_EXT_texture_filter_anisotropic")||j.getExtension("WEBKIT_EXT_texture_filter_anisotropic");Fa=j.getExtension("WEBGL_compressed_texture_s3tc")||j.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||j.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");Oa||console.log("THREE.WebGLRenderer: Float textures not supported.");ua||console.log("THREE.WebGLRenderer: Standard derivatives not supported.");La||console.log("THREE.WebGLRenderer: Anisotropic texture filtering not supported.");
Fa||console.log("THREE.WebGLRenderer: S3TC compressed textures not supported.");void 0===j.getShaderPrecisionFormat&&(j.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}});j.clearColor(0,0,0,1);j.clearDepth(1);j.clearStencil(0);j.enable(j.DEPTH_TEST);j.depthFunc(j.LEQUAL);j.frontFace(j.CCW);j.cullFace(j.BACK);j.enable(j.CULL_FACE);j.enable(j.BLEND);j.blendEquation(j.FUNC_ADD);j.blendFunc(j.SRC_ALPHA,j.ONE_MINUS_SRC_ALPHA);j.viewport(bb,cb,Ma,fb);j.clearColor(Q.r,Q.g,Q.b,
R);this.context=j;var Mb=j.getParameter(j.MAX_TEXTURE_IMAGE_UNITS),$b=j.getParameter(j.MAX_VERTEX_TEXTURE_IMAGE_UNITS);j.getParameter(j.MAX_TEXTURE_SIZE);var ac=j.getParameter(j.MAX_CUBE_MAP_TEXTURE_SIZE),Nb=La?j.getParameter(La.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,Bb=0<$b,yb=Bb&&Oa;Fa&&j.getParameter(j.COMPRESSED_TEXTURE_FORMATS);var bc=j.getShaderPrecisionFormat(j.VERTEX_SHADER,j.HIGH_FLOAT),cc=j.getShaderPrecisionFormat(j.VERTEX_SHADER,j.MEDIUM_FLOAT);j.getShaderPrecisionFormat(j.VERTEX_SHADER,j.LOW_FLOAT);
var qc=j.getShaderPrecisionFormat(j.FRAGMENT_SHADER,j.HIGH_FLOAT),rc=j.getShaderPrecisionFormat(j.FRAGMENT_SHADER,j.MEDIUM_FLOAT);j.getShaderPrecisionFormat(j.FRAGMENT_SHADER,j.LOW_FLOAT);j.getShaderPrecisionFormat(j.VERTEX_SHADER,j.HIGH_INT);j.getShaderPrecisionFormat(j.VERTEX_SHADER,j.MEDIUM_INT);j.getShaderPrecisionFormat(j.VERTEX_SHADER,j.LOW_INT);j.getShaderPrecisionFormat(j.FRAGMENT_SHADER,j.HIGH_INT);j.getShaderPrecisionFormat(j.FRAGMENT_SHADER,j.MEDIUM_INT);j.getShaderPrecisionFormat(j.FRAGMENT_SHADER,
j.LOW_INT);var sc=0<bc.precision&&0<qc.precision,Ob=0<cc.precision&&0<rc.precision;"highp"===M&&!sc&&(Ob?(M="mediump",console.warn("WebGLRenderer: highp not supported, using mediump")):(M="lowp",console.warn("WebGLRenderer: highp and mediump not supported, using lowp")));"mediump"===M&&!Ob&&(M="lowp",console.warn("WebGLRenderer: mediump not supported, using lowp"));this.getContext=function(){return j};this.supportsVertexTextures=function(){return Bb};this.supportsFloatTextures=function(){return Oa};
this.supportsStandardDerivatives=function(){return ua};this.supportsCompressedTextureS3TC=function(){return Fa};this.getMaxAnisotropy=function(){return Nb};this.getPrecision=function(){return M};this.setSize=function(a,b,c){B.width=a*this.devicePixelRatio;B.height=b*this.devicePixelRatio;1!==this.devicePixelRatio&&!1!==c&&(B.style.width=a+"px",B.style.height=b+"px");this.setViewport(0,0,B.width,B.height)};this.setViewport=function(a,b,c,d){bb=void 0!==a?a:0;cb=void 0!==b?b:0;Ma=void 0!==c?c:B.width;
fb=void 0!==d?d:B.height;j.viewport(bb,cb,Ma,fb)};this.setScissor=function(a,b,c,d){j.scissor(a,b,c,d)};this.enableScissorTest=function(a){a?j.enable(j.SCISSOR_TEST):j.disable(j.SCISSOR_TEST)};this.setClearColor=function(a,b){Q.set(a);R=void 0!==b?b:1;j.clearColor(Q.r,Q.g,Q.b,R)};this.setClearColorHex=function(a,b){console.warn("DEPRECATED: .setClearColorHex() is being removed. Use .setClearColor() instead.");this.setClearColor(a,b)};this.getClearColor=function(){return Q};this.getClearAlpha=function(){return R};
this.clear=function(a,b,c){var d=0;if(void 0===a||a)d|=j.COLOR_BUFFER_BIT;if(void 0===b||b)d|=j.DEPTH_BUFFER_BIT;if(void 0===c||c)d|=j.STENCIL_BUFFER_BIT;j.clear(d)};this.clearColor=function(){j.clear(j.COLOR_BUFFER_BIT)};this.clearDepth=function(){j.clear(j.DEPTH_BUFFER_BIT)};this.clearStencil=function(){j.clear(j.STENCIL_BUFFER_BIT)};this.clearTarget=function(a,b,c,d){this.setRenderTarget(a);this.clear(b,c,d)};this.addPostPlugin=function(a){a.init(this);this.renderPluginsPost.push(a)};this.addPrePlugin=
function(a){a.init(this);this.renderPluginsPre.push(a)};this.updateShadowMap=function(a,b){Ba=null;Aa=$=ka=Ga=ja=-1;ta=!0;U=Y=-1;this.shadowMapPlugin.update(a,b)};var Cb=function(a){a=a.target;a.removeEventListener("dispose",Cb);a.__webglInit=void 0;if(a instanceof THREE.BufferGeometry){var b=a.attributes,c;for(c in b)void 0!==b[c].buffer&&j.deleteBuffer(b[c].buffer);L.info.memory.geometries--}else if(void 0!==a.geometryGroups)for(b in a.geometryGroups){c=a.geometryGroups[b];if(void 0!==c.numMorphTargets)for(var d=
0,e=c.numMorphTargets;d<e;d++)j.deleteBuffer(c.__webglMorphTargetsBuffers[d]);if(void 0!==c.numMorphNormals){d=0;for(e=c.numMorphNormals;d<e;d++)j.deleteBuffer(c.__webglMorphNormalsBuffers[d])}Hb(c)}else Hb(a)},Db=function(a){a=a.target;a.removeEventListener("dispose",Db);a.image&&a.image.__webglTextureCube?j.deleteTexture(a.image.__webglTextureCube):a.__webglInit&&(a.__webglInit=!1,j.deleteTexture(a.__webglTexture));L.info.memory.textures--},Eb=function(a){a=a.target;a.removeEventListener("dispose",
Eb);if(a&&a.__webglTexture)if(j.deleteTexture(a.__webglTexture),a instanceof THREE.WebGLRenderTargetCube)for(var b=0;6>b;b++)j.deleteFramebuffer(a.__webglFramebuffer[b]),j.deleteRenderbuffer(a.__webglRenderbuffer[b]);else j.deleteFramebuffer(a.__webglFramebuffer),j.deleteRenderbuffer(a.__webglRenderbuffer);L.info.memory.textures--},Fb=function(a){a=a.target;a.removeEventListener("dispose",Fb);Gb(a)},Hb=function(a){void 0!==a.__webglVertexBuffer&&j.deleteBuffer(a.__webglVertexBuffer);void 0!==a.__webglNormalBuffer&&
j.deleteBuffer(a.__webglNormalBuffer);void 0!==a.__webglTangentBuffer&&j.deleteBuffer(a.__webglTangentBuffer);void 0!==a.__webglColorBuffer&&j.deleteBuffer(a.__webglColorBuffer);void 0!==a.__webglUVBuffer&&j.deleteBuffer(a.__webglUVBuffer);void 0!==a.__webglUV2Buffer&&j.deleteBuffer(a.__webglUV2Buffer);void 0!==a.__webglSkinIndicesBuffer&&j.deleteBuffer(a.__webglSkinIndicesBuffer);void 0!==a.__webglSkinWeightsBuffer&&j.deleteBuffer(a.__webglSkinWeightsBuffer);void 0!==a.__webglFaceBuffer&&j.deleteBuffer(a.__webglFaceBuffer);
void 0!==a.__webglLineBuffer&&j.deleteBuffer(a.__webglLineBuffer);void 0!==a.__webglLineDistanceBuffer&&j.deleteBuffer(a.__webglLineDistanceBuffer);if(void 0!==a.__webglCustomAttributesList)for(var b in a.__webglCustomAttributesList)j.deleteBuffer(a.__webglCustomAttributesList[b].buffer);L.info.memory.geometries--},Gb=function(a){var b=a.program;if(void 0!==b){a.program=void 0;var c,d,e=!1,a=0;for(c=da.length;a<c;a++)if(d=da[a],d.program===b){d.usedTimes--;0===d.usedTimes&&(e=!0);break}if(!0===e){e=
[];a=0;for(c=da.length;a<c;a++)d=da[a],d.program!==b&&e.push(d);da=e;j.deleteProgram(b);L.info.memory.programs--}}};this.renderBufferImmediate=function(a,b,c){a.hasPositions&&!a.__webglVertexBuffer&&(a.__webglVertexBuffer=j.createBuffer());a.hasNormals&&!a.__webglNormalBuffer&&(a.__webglNormalBuffer=j.createBuffer());a.hasUvs&&!a.__webglUvBuffer&&(a.__webglUvBuffer=j.createBuffer());a.hasColors&&!a.__webglColorBuffer&&(a.__webglColorBuffer=j.createBuffer());a.hasPositions&&(j.bindBuffer(j.ARRAY_BUFFER,
a.__webglVertexBuffer),j.bufferData(j.ARRAY_BUFFER,a.positionArray,j.DYNAMIC_DRAW),j.enableVertexAttribArray(b.attributes.position),j.vertexAttribPointer(b.attributes.position,3,j.FLOAT,!1,0,0));if(a.hasNormals){j.bindBuffer(j.ARRAY_BUFFER,a.__webglNormalBuffer);if(c.shading===THREE.FlatShading){var d,e,f,g,h,i,k,l,m,n,p,q=3*a.count;for(p=0;p<q;p+=9)n=a.normalArray,d=n[p],e=n[p+1],f=n[p+2],g=n[p+3],i=n[p+4],l=n[p+5],h=n[p+6],k=n[p+7],m=n[p+8],d=(d+g+h)/3,e=(e+i+k)/3,f=(f+l+m)/3,n[p]=d,n[p+1]=e,n[p+
2]=f,n[p+3]=d,n[p+4]=e,n[p+5]=f,n[p+6]=d,n[p+7]=e,n[p+8]=f}j.bufferData(j.ARRAY_BUFFER,a.normalArray,j.DYNAMIC_DRAW);j.enableVertexAttribArray(b.attributes.normal);j.vertexAttribPointer(b.attributes.normal,3,j.FLOAT,!1,0,0)}a.hasUvs&&c.map&&(j.bindBuffer(j.ARRAY_BUFFER,a.__webglUvBuffer),j.bufferData(j.ARRAY_BUFFER,a.uvArray,j.DYNAMIC_DRAW),j.enableVertexAttribArray(b.attributes.uv),j.vertexAttribPointer(b.attributes.uv,2,j.FLOAT,!1,0,0));a.hasColors&&c.vertexColors!==THREE.NoColors&&(j.bindBuffer(j.ARRAY_BUFFER,
a.__webglColorBuffer),j.bufferData(j.ARRAY_BUFFER,a.colorArray,j.DYNAMIC_DRAW),j.enableVertexAttribArray(b.attributes.color),j.vertexAttribPointer(b.attributes.color,3,j.FLOAT,!1,0,0));j.drawArrays(j.TRIANGLES,0,a.count);a.count=0};this.renderBufferDirect=function(a,b,c,d,e,f){if(!1!==d.visible){var i,k,l,m;i=z(a,b,c,d,f);b=i.attributes;a=e.attributes;c=!1;i=16777215*e.id+2*i.id+(d.wireframe?1:0);i!==$&&($=i,c=!0);c&&g();if(f instanceof THREE.Mesh)if(f=a.index){e=e.offsets;1<e.length&&(c=!0);for(var n=
0,p=e.length;n<p;n++){var q=e[n].index;if(c){for(k in b)l=b[k],i=a[k],0<=l&&(i?(m=i.itemSize,j.bindBuffer(j.ARRAY_BUFFER,i.buffer),h(l),j.vertexAttribPointer(l,m,j.FLOAT,!1,0,4*q*m)):d.defaultAttributeValues&&(2===d.defaultAttributeValues[k].length?j.vertexAttrib2fv(l,d.defaultAttributeValues[k]):3===d.defaultAttributeValues[k].length&&j.vertexAttrib3fv(l,d.defaultAttributeValues[k])));j.bindBuffer(j.ELEMENT_ARRAY_BUFFER,f.buffer)}j.drawElements(j.TRIANGLES,e[n].count,j.UNSIGNED_SHORT,2*e[n].start);
L.info.render.calls++;L.info.render.vertices+=e[n].count;L.info.render.faces+=e[n].count/3}}else{if(c)for(k in b)"index"!==k&&(l=b[k],i=a[k],0<=l&&(i?(m=i.itemSize,j.bindBuffer(j.ARRAY_BUFFER,i.buffer),h(l),j.vertexAttribPointer(l,m,j.FLOAT,!1,0,0)):d.defaultAttributeValues&&d.defaultAttributeValues[k]&&(2===d.defaultAttributeValues[k].length?j.vertexAttrib2fv(l,d.defaultAttributeValues[k]):3===d.defaultAttributeValues[k].length&&j.vertexAttrib3fv(l,d.defaultAttributeValues[k]))));d=e.attributes.position;
j.drawArrays(j.TRIANGLES,0,d.numItems/3);L.info.render.calls++;L.info.render.vertices+=d.numItems/3;L.info.render.faces+=d.numItems/3/3}else if(f instanceof THREE.ParticleSystem){if(c){for(k in b)l=b[k],i=a[k],0<=l&&(i?(m=i.itemSize,j.bindBuffer(j.ARRAY_BUFFER,i.buffer),h(l),j.vertexAttribPointer(l,m,j.FLOAT,!1,0,0)):d.defaultAttributeValues&&d.defaultAttributeValues[k]&&(2===d.defaultAttributeValues[k].length?j.vertexAttrib2fv(l,d.defaultAttributeValues[k]):3===d.defaultAttributeValues[k].length&&
j.vertexAttrib3fv(l,d.defaultAttributeValues[k])));d=a.position;j.drawArrays(j.POINTS,0,d.numItems/3);L.info.render.calls++;L.info.render.points+=d.numItems/3}}else if(f instanceof THREE.Line&&c){for(k in b)l=b[k],i=a[k],0<=l&&(i?(m=i.itemSize,j.bindBuffer(j.ARRAY_BUFFER,i.buffer),h(l),j.vertexAttribPointer(l,m,j.FLOAT,!1,0,0)):d.defaultAttributeValues&&d.defaultAttributeValues[k]&&(2===d.defaultAttributeValues[k].length?j.vertexAttrib2fv(l,d.defaultAttributeValues[k]):3===d.defaultAttributeValues[k].length&&
j.vertexAttrib3fv(l,d.defaultAttributeValues[k])));k=f.type===THREE.LineStrip?j.LINE_STRIP:j.LINES;E(d.linewidth);d=a.position;j.drawArrays(k,0,d.numItems/3);L.info.render.calls++;L.info.render.points+=d.numItems}}};this.renderBuffer=function(a,b,c,d,e,f){if(!1!==d.visible){var i,l,c=z(a,b,c,d,f),a=c.attributes,b=!1,c=16777215*e.id+2*c.id+(d.wireframe?1:0);c!==$&&($=c,b=!0);b&&g();if(!d.morphTargets&&0<=a.position)b&&(j.bindBuffer(j.ARRAY_BUFFER,e.__webglVertexBuffer),h(a.position),j.vertexAttribPointer(a.position,
3,j.FLOAT,!1,0,0));else if(f.morphTargetBase){c=d.program.attributes;-1!==f.morphTargetBase&&0<=c.position?(j.bindBuffer(j.ARRAY_BUFFER,e.__webglMorphTargetsBuffers[f.morphTargetBase]),h(c.position),j.vertexAttribPointer(c.position,3,j.FLOAT,!1,0,0)):0<=c.position&&(j.bindBuffer(j.ARRAY_BUFFER,e.__webglVertexBuffer),h(c.position),j.vertexAttribPointer(c.position,3,j.FLOAT,!1,0,0));if(f.morphTargetForcedOrder.length){var m=0;l=f.morphTargetForcedOrder;for(i=f.morphTargetInfluences;m<d.numSupportedMorphTargets&&
m<l.length;)0<=c["morphTarget"+m]&&(j.bindBuffer(j.ARRAY_BUFFER,e.__webglMorphTargetsBuffers[l[m]]),h(c["morphTarget"+m]),j.vertexAttribPointer(c["morphTarget"+m],3,j.FLOAT,!1,0,0)),0<=c["morphNormal"+m]&&d.morphNormals&&(j.bindBuffer(j.ARRAY_BUFFER,e.__webglMorphNormalsBuffers[l[m]]),h(c["morphNormal"+m]),j.vertexAttribPointer(c["morphNormal"+m],3,j.FLOAT,!1,0,0)),f.__webglMorphTargetInfluences[m]=i[l[m]],m++}else{l=[];i=f.morphTargetInfluences;var n,p=i.length;for(n=0;n<p;n++)m=i[n],0<m&&l.push([m,
n]);l.length>d.numSupportedMorphTargets?(l.sort(k),l.length=d.numSupportedMorphTargets):l.length>d.numSupportedMorphNormals?l.sort(k):0===l.length&&l.push([0,0]);for(m=0;m<d.numSupportedMorphTargets;)l[m]?(n=l[m][1],0<=c["morphTarget"+m]&&(j.bindBuffer(j.ARRAY_BUFFER,e.__webglMorphTargetsBuffers[n]),h(c["morphTarget"+m]),j.vertexAttribPointer(c["morphTarget"+m],3,j.FLOAT,!1,0,0)),0<=c["morphNormal"+m]&&d.morphNormals&&(j.bindBuffer(j.ARRAY_BUFFER,e.__webglMorphNormalsBuffers[n]),h(c["morphNormal"+
m]),j.vertexAttribPointer(c["morphNormal"+m],3,j.FLOAT,!1,0,0)),f.__webglMorphTargetInfluences[m]=i[n]):f.__webglMorphTargetInfluences[m]=0,m++}null!==d.program.uniforms.morphTargetInfluences&&j.uniform1fv(d.program.uniforms.morphTargetInfluences,f.__webglMorphTargetInfluences)}if(b){if(e.__webglCustomAttributesList){i=0;for(l=e.__webglCustomAttributesList.length;i<l;i++)c=e.__webglCustomAttributesList[i],0<=a[c.buffer.belongsToAttribute]&&(j.bindBuffer(j.ARRAY_BUFFER,c.buffer),h(a[c.buffer.belongsToAttribute]),
j.vertexAttribPointer(a[c.buffer.belongsToAttribute],c.size,j.FLOAT,!1,0,0))}0<=a.color&&(0<f.geometry.colors.length||0<f.geometry.faces.length?(j.bindBuffer(j.ARRAY_BUFFER,e.__webglColorBuffer),h(a.color),j.vertexAttribPointer(a.color,3,j.FLOAT,!1,0,0)):d.defaultAttributeValues&&j.vertexAttrib3fv(a.color,d.defaultAttributeValues.color));0<=a.normal&&(j.bindBuffer(j.ARRAY_BUFFER,e.__webglNormalBuffer),h(a.normal),j.vertexAttribPointer(a.normal,3,j.FLOAT,!1,0,0));0<=a.tangent&&(j.bindBuffer(j.ARRAY_BUFFER,
e.__webglTangentBuffer),h(a.tangent),j.vertexAttribPointer(a.tangent,4,j.FLOAT,!1,0,0));0<=a.uv&&(f.geometry.faceVertexUvs[0]?(j.bindBuffer(j.ARRAY_BUFFER,e.__webglUVBuffer),h(a.uv),j.vertexAttribPointer(a.uv,2,j.FLOAT,!1,0,0)):d.defaultAttributeValues&&j.vertexAttrib2fv(a.uv,d.defaultAttributeValues.uv));0<=a.uv2&&(f.geometry.faceVertexUvs[1]?(j.bindBuffer(j.ARRAY_BUFFER,e.__webglUV2Buffer),h(a.uv2),j.vertexAttribPointer(a.uv2,2,j.FLOAT,!1,0,0)):d.defaultAttributeValues&&j.vertexAttrib2fv(a.uv2,
d.defaultAttributeValues.uv2));d.skinning&&(0<=a.skinIndex&&0<=a.skinWeight)&&(j.bindBuffer(j.ARRAY_BUFFER,e.__webglSkinIndicesBuffer),h(a.skinIndex),j.vertexAttribPointer(a.skinIndex,4,j.FLOAT,!1,0,0),j.bindBuffer(j.ARRAY_BUFFER,e.__webglSkinWeightsBuffer),h(a.skinWeight),j.vertexAttribPointer(a.skinWeight,4,j.FLOAT,!1,0,0));0<=a.lineDistance&&(j.bindBuffer(j.ARRAY_BUFFER,e.__webglLineDistanceBuffer),h(a.lineDistance),j.vertexAttribPointer(a.lineDistance,1,j.FLOAT,!1,0,0))}f instanceof THREE.Mesh?
(d.wireframe?(E(d.wireframeLinewidth),b&&j.bindBuffer(j.ELEMENT_ARRAY_BUFFER,e.__webglLineBuffer),j.drawElements(j.LINES,e.__webglLineCount,j.UNSIGNED_SHORT,0)):(b&&j.bindBuffer(j.ELEMENT_ARRAY_BUFFER,e.__webglFaceBuffer),j.drawElements(j.TRIANGLES,e.__webglFaceCount,j.UNSIGNED_SHORT,0)),L.info.render.calls++,L.info.render.vertices+=e.__webglFaceCount,L.info.render.faces+=e.__webglFaceCount/3):f instanceof THREE.Line?(f=f.type===THREE.LineStrip?j.LINE_STRIP:j.LINES,E(d.linewidth),j.drawArrays(f,0,
e.__webglLineCount),L.info.render.calls++):f instanceof THREE.ParticleSystem&&(j.drawArrays(j.POINTS,0,e.__webglParticleCount),L.info.render.calls++,L.info.render.points+=e.__webglParticleCount)}};this.render=function(a,b,c,d){if(!1===b instanceof THREE.Camera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else{var e,f,g,h,k=a.__lights,n=a.fog;Aa=-1;ta=!0;!0===a.autoUpdate&&a.updateMatrixWorld();void 0===b.parent&&b.updateMatrixWorld();b.matrixWorldInverse.getInverse(b.matrixWorld);
Ea.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse);la.setFromMatrix(Ea);this.autoUpdateObjects&&this.initWebGLObjects(a);m(this.renderPluginsPre,a,b);L.info.render.calls=0;L.info.render.vertices=0;L.info.render.faces=0;L.info.render.points=0;this.setRenderTarget(c);(this.autoClear||d)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil);h=a.__webglObjects;d=0;for(e=h.length;d<e;d++)if(f=h[d],g=f.object,f.id=d,f.render=!1,g.visible&&(!(g instanceof THREE.Mesh||g instanceof
THREE.ParticleSystem)||!g.frustumCulled||la.intersectsObject(g))){var q=g;q._modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,q.matrixWorld);q._normalMatrix.getNormalMatrix(q._modelViewMatrix);var q=f,r=q.buffer,t=void 0,s=t=void 0,s=q.object.material;if(s instanceof THREE.MeshFaceMaterial)t=r.materialIndex,t=s.materials[t],t.transparent?(q.transparent=t,q.opaque=null):(q.opaque=t,q.transparent=null);else if(t=s)t.transparent?(q.transparent=t,q.opaque=null):(q.opaque=t,q.transparent=null);f.render=
!0;!0===this.sortObjects&&(null!==g.renderDepth?f.z=g.renderDepth:(ra.setFromMatrixPosition(g.matrixWorld),ra.applyProjection(Ea),f.z=ra.z))}this.sortObjects&&h.sort(i);h=a.__webglObjectsImmediate;d=0;for(e=h.length;d<e;d++)f=h[d],g=f.object,g.visible&&(g._modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,g.matrixWorld),g._normalMatrix.getNormalMatrix(g._modelViewMatrix),g=f.object.material,g.transparent?(f.transparent=g,f.opaque=null):(f.opaque=g,f.transparent=null));a.overrideMaterial?(d=a.overrideMaterial,
this.setBlending(d.blending,d.blendEquation,d.blendSrc,d.blendDst),this.setDepthTest(d.depthTest),this.setDepthWrite(d.depthWrite),A(d.polygonOffset,d.polygonOffsetFactor,d.polygonOffsetUnits),l(a.__webglObjects,!1,"",b,k,n,!0,d),p(a.__webglObjectsImmediate,"",b,k,n,!1,d)):(d=null,this.setBlending(THREE.NoBlending),l(a.__webglObjects,!0,"opaque",b,k,n,!1,d),p(a.__webglObjectsImmediate,"opaque",b,k,n,!1,d),l(a.__webglObjects,!1,"transparent",b,k,n,!0,d),p(a.__webglObjectsImmediate,"transparent",b,
k,n,!0,d));m(this.renderPluginsPost,a,b);c&&(c.generateMipmaps&&c.minFilter!==THREE.NearestFilter&&c.minFilter!==THREE.LinearFilter)&&(c instanceof THREE.WebGLRenderTargetCube?(j.bindTexture(j.TEXTURE_CUBE_MAP,c.__webglTexture),j.generateMipmap(j.TEXTURE_CUBE_MAP),j.bindTexture(j.TEXTURE_CUBE_MAP,null)):(j.bindTexture(j.TEXTURE_2D,c.__webglTexture),j.generateMipmap(j.TEXTURE_2D),j.bindTexture(j.TEXTURE_2D,null)));this.setDepthTest(!0);this.setDepthWrite(!0)}};this.renderImmediateObject=function(a,
b,c,d,e){var f=z(a,b,c,d,e);$=-1;L.setMaterialFaces(d);e.immediateRenderCallback?e.immediateRenderCallback(f,j,la):e.render(function(a){L.renderBufferImmediate(a,f,d)})};this.initWebGLObjects=function(a){a.__webglObjects||(a.__webglObjects=[],a.__webglObjectsImmediate=[],a.__webglSprites=[],a.__webglFlares=[]);for(;a.__objectsAdded.length;)t(a.__objectsAdded[0],a),a.__objectsAdded.splice(0,1);for(;a.__objectsRemoved.length;)u(a.__objectsRemoved[0],a),a.__objectsRemoved.splice(0,1);for(var b=0,g=a.__webglObjects.length;b<
g;b++){var h=a.__webglObjects[b].object;void 0===h.__webglInit&&(void 0!==h.__webglActive&&u(h,a),t(h,a));var i=h,l=i.geometry,m=void 0,p=void 0,r=void 0;if(l instanceof THREE.BufferGeometry){var s=j.DYNAMIC_DRAW,v=!l.dynamic,z=l.attributes,y=void 0,x=void 0;for(y in z)x=z[y],x.needsUpdate&&("index"===y?(j.bindBuffer(j.ELEMENT_ARRAY_BUFFER,x.buffer),j.bufferData(j.ELEMENT_ARRAY_BUFFER,x.array,s)):(j.bindBuffer(j.ARRAY_BUFFER,x.buffer),j.bufferData(j.ARRAY_BUFFER,x.array,s)),x.needsUpdate=!1),v&&!x.dynamic&&
(x.array=null)}else if(i instanceof THREE.Mesh){for(var A=0,B=l.geometryGroupsList.length;A<B;A++)if(m=l.geometryGroupsList[A],r=d(i,m),l.buffersNeedUpdate&&c(m,i),p=r.attributes&&q(r),l.verticesNeedUpdate||l.morphTargetsNeedUpdate||l.elementsNeedUpdate||l.uvsNeedUpdate||l.normalsNeedUpdate||l.colorsNeedUpdate||l.tangentsNeedUpdate||p){var w=m,E=i,D=j.DYNAMIC_DRAW,G=!l.dynamic,F=r;if(w.__inittedArrays){var K=e(F),I=F.vertexColors?F.vertexColors:!1,L=f(F),O=K===THREE.SmoothShading,C=void 0,J=void 0,
V=void 0,M=void 0,Q=void 0,ba=void 0,R=void 0,U=void 0,Y=void 0,za=void 0,$=void 0,P=void 0,X=void 0,W=void 0,Ba=void 0,ea=void 0,Aa=void 0,ca=void 0,da=void 0,ha=void 0,fa=void 0,ja=void 0,ka=void 0,la=void 0,na=void 0,pa=void 0,sa=void 0,ta=void 0,ua=void 0,Ca=void 0,Da=void 0,Ga=void 0,Fa=void 0,Ka=void 0,Sa=void 0,La=void 0,va=void 0,wa=void 0,Qa=void 0,Ra=void 0,db=0,eb=0,Oa=0,Pa=0,Ua=0,hb=0,Ta=0,tb=0,Za=0,qa=0,xa=0,N=0,Na=void 0,ib=w.__vertexArray,bb=w.__uvArray,cb=w.__uv2Array,Ma=w.__normalArray,
Va=w.__tangentArray,jb=w.__colorArray,Wa=w.__skinIndexArray,Xa=w.__skinWeightArray,fb=w.__morphTargetsArrays,sb=w.__morphNormalsArrays,pb=w.__webglCustomAttributesList,H=void 0,Pb=w.__faceArray,vb=w.__lineArray,Ha=E.geometry,Bb=Ha.elementsNeedUpdate,yb=Ha.uvsNeedUpdate,Db=Ha.normalsNeedUpdate,Mb=Ha.tangentsNeedUpdate,Nb=Ha.colorsNeedUpdate,Ob=Ha.morphTargetsNeedUpdate,ec=Ha.vertices,aa=w.faces3,kb=Ha.faces,Cb=Ha.faceVertexUvs[0],Eb=Ha.faceVertexUvs[1],fc=Ha.skinIndices,Qb=Ha.skinWeights,Rb=Ha.morphTargets,
Fb=Ha.morphNormals;if(Ha.verticesNeedUpdate){C=0;for(J=aa.length;C<J;C++)M=kb[aa[C]],P=ec[M.a],X=ec[M.b],W=ec[M.c],ib[eb]=P.x,ib[eb+1]=P.y,ib[eb+2]=P.z,ib[eb+3]=X.x,ib[eb+4]=X.y,ib[eb+5]=X.z,ib[eb+6]=W.x,ib[eb+7]=W.y,ib[eb+8]=W.z,eb+=9;j.bindBuffer(j.ARRAY_BUFFER,w.__webglVertexBuffer);j.bufferData(j.ARRAY_BUFFER,ib,D)}if(Ob){Sa=0;for(La=Rb.length;Sa<La;Sa++){C=xa=0;for(J=aa.length;C<J;C++)Qa=aa[C],M=kb[Qa],P=Rb[Sa].vertices[M.a],X=Rb[Sa].vertices[M.b],W=Rb[Sa].vertices[M.c],va=fb[Sa],va[xa]=P.x,
va[xa+1]=P.y,va[xa+2]=P.z,va[xa+3]=X.x,va[xa+4]=X.y,va[xa+5]=X.z,va[xa+6]=W.x,va[xa+7]=W.y,va[xa+8]=W.z,F.morphNormals&&(O?(Ra=Fb[Sa].vertexNormals[Qa],ca=Ra.a,da=Ra.b,ha=Ra.c):ha=da=ca=Fb[Sa].faceNormals[Qa],wa=sb[Sa],wa[xa]=ca.x,wa[xa+1]=ca.y,wa[xa+2]=ca.z,wa[xa+3]=da.x,wa[xa+4]=da.y,wa[xa+5]=da.z,wa[xa+6]=ha.x,wa[xa+7]=ha.y,wa[xa+8]=ha.z),xa+=9;j.bindBuffer(j.ARRAY_BUFFER,w.__webglMorphTargetsBuffers[Sa]);j.bufferData(j.ARRAY_BUFFER,fb[Sa],D);F.morphNormals&&(j.bindBuffer(j.ARRAY_BUFFER,w.__webglMorphNormalsBuffers[Sa]),
j.bufferData(j.ARRAY_BUFFER,sb[Sa],D))}}if(Qb.length){C=0;for(J=aa.length;C<J;C++)M=kb[aa[C]],la=Qb[M.a],na=Qb[M.b],pa=Qb[M.c],Xa[qa]=la.x,Xa[qa+1]=la.y,Xa[qa+2]=la.z,Xa[qa+3]=la.w,Xa[qa+4]=na.x,Xa[qa+5]=na.y,Xa[qa+6]=na.z,Xa[qa+7]=na.w,Xa[qa+8]=pa.x,Xa[qa+9]=pa.y,Xa[qa+10]=pa.z,Xa[qa+11]=pa.w,sa=fc[M.a],ta=fc[M.b],ua=fc[M.c],Wa[qa]=sa.x,Wa[qa+1]=sa.y,Wa[qa+2]=sa.z,Wa[qa+3]=sa.w,Wa[qa+4]=ta.x,Wa[qa+5]=ta.y,Wa[qa+6]=ta.z,Wa[qa+7]=ta.w,Wa[qa+8]=ua.x,Wa[qa+9]=ua.y,Wa[qa+10]=ua.z,Wa[qa+11]=ua.w,qa+=12;
0<qa&&(j.bindBuffer(j.ARRAY_BUFFER,w.__webglSkinIndicesBuffer),j.bufferData(j.ARRAY_BUFFER,Wa,D),j.bindBuffer(j.ARRAY_BUFFER,w.__webglSkinWeightsBuffer),j.bufferData(j.ARRAY_BUFFER,Xa,D))}if(Nb&&I){C=0;for(J=aa.length;C<J;C++)M=kb[aa[C]],R=M.vertexColors,U=M.color,3===R.length&&I===THREE.VertexColors?(fa=R[0],ja=R[1],ka=R[2]):ka=ja=fa=U,jb[Za]=fa.r,jb[Za+1]=fa.g,jb[Za+2]=fa.b,jb[Za+3]=ja.r,jb[Za+4]=ja.g,jb[Za+5]=ja.b,jb[Za+6]=ka.r,jb[Za+7]=ka.g,jb[Za+8]=ka.b,Za+=9;0<Za&&(j.bindBuffer(j.ARRAY_BUFFER,
w.__webglColorBuffer),j.bufferData(j.ARRAY_BUFFER,jb,D))}if(Mb&&Ha.hasTangents){C=0;for(J=aa.length;C<J;C++)M=kb[aa[C]],Y=M.vertexTangents,Ba=Y[0],ea=Y[1],Aa=Y[2],Va[Ta]=Ba.x,Va[Ta+1]=Ba.y,Va[Ta+2]=Ba.z,Va[Ta+3]=Ba.w,Va[Ta+4]=ea.x,Va[Ta+5]=ea.y,Va[Ta+6]=ea.z,Va[Ta+7]=ea.w,Va[Ta+8]=Aa.x,Va[Ta+9]=Aa.y,Va[Ta+10]=Aa.z,Va[Ta+11]=Aa.w,Ta+=12;j.bindBuffer(j.ARRAY_BUFFER,w.__webglTangentBuffer);j.bufferData(j.ARRAY_BUFFER,Va,D)}if(Db&&K){C=0;for(J=aa.length;C<J;C++)if(M=kb[aa[C]],Q=M.vertexNormals,ba=M.normal,
3===Q.length&&O)for(Ca=0;3>Ca;Ca++)Ga=Q[Ca],Ma[hb]=Ga.x,Ma[hb+1]=Ga.y,Ma[hb+2]=Ga.z,hb+=3;else for(Ca=0;3>Ca;Ca++)Ma[hb]=ba.x,Ma[hb+1]=ba.y,Ma[hb+2]=ba.z,hb+=3;j.bindBuffer(j.ARRAY_BUFFER,w.__webglNormalBuffer);j.bufferData(j.ARRAY_BUFFER,Ma,D)}if(yb&&Cb&&L){C=0;for(J=aa.length;C<J;C++)if(V=aa[C],za=Cb[V],void 0!==za)for(Ca=0;3>Ca;Ca++)Fa=za[Ca],bb[Oa]=Fa.x,bb[Oa+1]=Fa.y,Oa+=2;0<Oa&&(j.bindBuffer(j.ARRAY_BUFFER,w.__webglUVBuffer),j.bufferData(j.ARRAY_BUFFER,bb,D))}if(yb&&Eb&&L){C=0;for(J=aa.length;C<
J;C++)if(V=aa[C],$=Eb[V],void 0!==$)for(Ca=0;3>Ca;Ca++)Ka=$[Ca],cb[Pa]=Ka.x,cb[Pa+1]=Ka.y,Pa+=2;0<Pa&&(j.bindBuffer(j.ARRAY_BUFFER,w.__webglUV2Buffer),j.bufferData(j.ARRAY_BUFFER,cb,D))}if(Bb){C=0;for(J=aa.length;C<J;C++)Pb[Ua]=db,Pb[Ua+1]=db+1,Pb[Ua+2]=db+2,Ua+=3,vb[tb]=db,vb[tb+1]=db+1,vb[tb+2]=db,vb[tb+3]=db+2,vb[tb+4]=db+1,vb[tb+5]=db+2,tb+=6,db+=3;j.bindBuffer(j.ELEMENT_ARRAY_BUFFER,w.__webglFaceBuffer);j.bufferData(j.ELEMENT_ARRAY_BUFFER,Pb,D);j.bindBuffer(j.ELEMENT_ARRAY_BUFFER,w.__webglLineBuffer);
j.bufferData(j.ELEMENT_ARRAY_BUFFER,vb,D)}if(pb){Ca=0;for(Da=pb.length;Ca<Da;Ca++)if(H=pb[Ca],H.__original.needsUpdate){N=0;if(1===H.size)if(void 0===H.boundTo||"vertices"===H.boundTo){C=0;for(J=aa.length;C<J;C++)M=kb[aa[C]],H.array[N]=H.value[M.a],H.array[N+1]=H.value[M.b],H.array[N+2]=H.value[M.c],N+=3}else{if("faces"===H.boundTo){C=0;for(J=aa.length;C<J;C++)Na=H.value[aa[C]],H.array[N]=Na,H.array[N+1]=Na,H.array[N+2]=Na,N+=3}}else if(2===H.size)if(void 0===H.boundTo||"vertices"===H.boundTo){C=
0;for(J=aa.length;C<J;C++)M=kb[aa[C]],P=H.value[M.a],X=H.value[M.b],W=H.value[M.c],H.array[N]=P.x,H.array[N+1]=P.y,H.array[N+2]=X.x,H.array[N+3]=X.y,H.array[N+4]=W.x,H.array[N+5]=W.y,N+=6}else{if("faces"===H.boundTo){C=0;for(J=aa.length;C<J;C++)W=X=P=Na=H.value[aa[C]],H.array[N]=P.x,H.array[N+1]=P.y,H.array[N+2]=X.x,H.array[N+3]=X.y,H.array[N+4]=W.x,H.array[N+5]=W.y,N+=6}}else if(3===H.size){var oa;oa="c"===H.type?["r","g","b"]:["x","y","z"];if(void 0===H.boundTo||"vertices"===H.boundTo){C=0;for(J=
aa.length;C<J;C++)M=kb[aa[C]],P=H.value[M.a],X=H.value[M.b],W=H.value[M.c],H.array[N]=P[oa[0]],H.array[N+1]=P[oa[1]],H.array[N+2]=P[oa[2]],H.array[N+3]=X[oa[0]],H.array[N+4]=X[oa[1]],H.array[N+5]=X[oa[2]],H.array[N+6]=W[oa[0]],H.array[N+7]=W[oa[1]],H.array[N+8]=W[oa[2]],N+=9}else if("faces"===H.boundTo){C=0;for(J=aa.length;C<J;C++)W=X=P=Na=H.value[aa[C]],H.array[N]=P[oa[0]],H.array[N+1]=P[oa[1]],H.array[N+2]=P[oa[2]],H.array[N+3]=X[oa[0]],H.array[N+4]=X[oa[1]],H.array[N+5]=X[oa[2]],H.array[N+6]=W[oa[0]],
H.array[N+7]=W[oa[1]],H.array[N+8]=W[oa[2]],N+=9}else if("faceVertices"===H.boundTo){C=0;for(J=aa.length;C<J;C++)Na=H.value[aa[C]],P=Na[0],X=Na[1],W=Na[2],H.array[N]=P[oa[0]],H.array[N+1]=P[oa[1]],H.array[N+2]=P[oa[2]],H.array[N+3]=X[oa[0]],H.array[N+4]=X[oa[1]],H.array[N+5]=X[oa[2]],H.array[N+6]=W[oa[0]],H.array[N+7]=W[oa[1]],H.array[N+8]=W[oa[2]],N+=9}}else if(4===H.size)if(void 0===H.boundTo||"vertices"===H.boundTo){C=0;for(J=aa.length;C<J;C++)M=kb[aa[C]],P=H.value[M.a],X=H.value[M.b],W=H.value[M.c],
H.array[N]=P.x,H.array[N+1]=P.y,H.array[N+2]=P.z,H.array[N+3]=P.w,H.array[N+4]=X.x,H.array[N+5]=X.y,H.array[N+6]=X.z,H.array[N+7]=X.w,H.array[N+8]=W.x,H.array[N+9]=W.y,H.array[N+10]=W.z,H.array[N+11]=W.w,N+=12}else if("faces"===H.boundTo){C=0;for(J=aa.length;C<J;C++)W=X=P=Na=H.value[aa[C]],H.array[N]=P.x,H.array[N+1]=P.y,H.array[N+2]=P.z,H.array[N+3]=P.w,H.array[N+4]=X.x,H.array[N+5]=X.y,H.array[N+6]=X.z,H.array[N+7]=X.w,H.array[N+8]=W.x,H.array[N+9]=W.y,H.array[N+10]=W.z,H.array[N+11]=W.w,N+=12}else if("faceVertices"===
H.boundTo){C=0;for(J=aa.length;C<J;C++)Na=H.value[aa[C]],P=Na[0],X=Na[1],W=Na[2],H.array[N]=P.x,H.array[N+1]=P.y,H.array[N+2]=P.z,H.array[N+3]=P.w,H.array[N+4]=X.x,H.array[N+5]=X.y,H.array[N+6]=X.z,H.array[N+7]=X.w,H.array[N+8]=W.x,H.array[N+9]=W.y,H.array[N+10]=W.z,H.array[N+11]=W.w,N+=12}j.bindBuffer(j.ARRAY_BUFFER,H.buffer);j.bufferData(j.ARRAY_BUFFER,H.array,D)}}G&&(delete w.__inittedArrays,delete w.__colorArray,delete w.__normalArray,delete w.__tangentArray,delete w.__uvArray,delete w.__uv2Array,
delete w.__faceArray,delete w.__vertexArray,delete w.__lineArray,delete w.__skinIndexArray,delete w.__skinWeightArray)}}l.verticesNeedUpdate=!1;l.morphTargetsNeedUpdate=!1;l.elementsNeedUpdate=!1;l.uvsNeedUpdate=!1;l.normalsNeedUpdate=!1;l.colorsNeedUpdate=!1;l.tangentsNeedUpdate=!1;l.buffersNeedUpdate=!1;r.attributes&&n(r)}else if(i instanceof THREE.Line){r=d(i,l);p=r.attributes&&q(r);if(l.verticesNeedUpdate||l.colorsNeedUpdate||l.lineDistancesNeedUpdate||p){var Ya=l,Sb=j.DYNAMIC_DRAW,Ib=void 0,
Jb=void 0,Kb=void 0,Tb=void 0,ma=void 0,Ub=void 0,Gb=Ya.vertices,Hb=Ya.colors,kc=Ya.lineDistances,Zb=Gb.length,$b=Hb.length,ac=kc.length,Vb=Ya.__vertexArray,Wb=Ya.__colorArray,lc=Ya.__lineDistanceArray,bc=Ya.colorsNeedUpdate,cc=Ya.lineDistancesNeedUpdate,gc=Ya.__webglCustomAttributesList,Xb=void 0,mc=void 0,ya=void 0,zb=void 0,Ia=void 0,ia=void 0;if(Ya.verticesNeedUpdate){for(Ib=0;Ib<Zb;Ib++)Tb=Gb[Ib],ma=3*Ib,Vb[ma]=Tb.x,Vb[ma+1]=Tb.y,Vb[ma+2]=Tb.z;j.bindBuffer(j.ARRAY_BUFFER,Ya.__webglVertexBuffer);
j.bufferData(j.ARRAY_BUFFER,Vb,Sb)}if(bc){for(Jb=0;Jb<$b;Jb++)Ub=Hb[Jb],ma=3*Jb,Wb[ma]=Ub.r,Wb[ma+1]=Ub.g,Wb[ma+2]=Ub.b;j.bindBuffer(j.ARRAY_BUFFER,Ya.__webglColorBuffer);j.bufferData(j.ARRAY_BUFFER,Wb,Sb)}if(cc){for(Kb=0;Kb<ac;Kb++)lc[Kb]=kc[Kb];j.bindBuffer(j.ARRAY_BUFFER,Ya.__webglLineDistanceBuffer);j.bufferData(j.ARRAY_BUFFER,lc,Sb)}if(gc){Xb=0;for(mc=gc.length;Xb<mc;Xb++)if(ia=gc[Xb],ia.needsUpdate&&(void 0===ia.boundTo||"vertices"===ia.boundTo)){ma=0;zb=ia.value.length;if(1===ia.size)for(ya=
0;ya<zb;ya++)ia.array[ya]=ia.value[ya];else if(2===ia.size)for(ya=0;ya<zb;ya++)Ia=ia.value[ya],ia.array[ma]=Ia.x,ia.array[ma+1]=Ia.y,ma+=2;else if(3===ia.size)if("c"===ia.type)for(ya=0;ya<zb;ya++)Ia=ia.value[ya],ia.array[ma]=Ia.r,ia.array[ma+1]=Ia.g,ia.array[ma+2]=Ia.b,ma+=3;else for(ya=0;ya<zb;ya++)Ia=ia.value[ya],ia.array[ma]=Ia.x,ia.array[ma+1]=Ia.y,ia.array[ma+2]=Ia.z,ma+=3;else if(4===ia.size)for(ya=0;ya<zb;ya++)Ia=ia.value[ya],ia.array[ma]=Ia.x,ia.array[ma+1]=Ia.y,ia.array[ma+2]=Ia.z,ia.array[ma+
3]=Ia.w,ma+=4;j.bindBuffer(j.ARRAY_BUFFER,ia.buffer);j.bufferData(j.ARRAY_BUFFER,ia.array,Sb)}}}l.verticesNeedUpdate=!1;l.colorsNeedUpdate=!1;l.lineDistancesNeedUpdate=!1;r.attributes&&n(r)}else if(i instanceof THREE.ParticleSystem){r=d(i,l);p=r.attributes&&q(r);if(l.verticesNeedUpdate||l.colorsNeedUpdate||i.sortParticles||p){var lb=l,hc=j.DYNAMIC_DRAW,Lb=i,Ja=void 0,mb=void 0,nb=void 0,T=void 0,ob=void 0,ub=void 0,Yb=lb.vertices,ic=Yb.length,jc=lb.colors,nc=jc.length,wb=lb.__vertexArray,xb=lb.__colorArray,
qb=lb.__sortArray,oc=lb.verticesNeedUpdate,pc=lb.colorsNeedUpdate,rb=lb.__webglCustomAttributesList,$a=void 0,Ab=void 0,Z=void 0,ab=void 0,ga=void 0,S=void 0;if(Lb.sortParticles){gb.copy(Ea);gb.multiply(Lb.matrixWorld);for(Ja=0;Ja<ic;Ja++)nb=Yb[Ja],ra.copy(nb),ra.applyProjection(gb),qb[Ja]=[ra.z,Ja];qb.sort(k);for(Ja=0;Ja<ic;Ja++)nb=Yb[qb[Ja][1]],T=3*Ja,wb[T]=nb.x,wb[T+1]=nb.y,wb[T+2]=nb.z;for(mb=0;mb<nc;mb++)T=3*mb,ub=jc[qb[mb][1]],xb[T]=ub.r,xb[T+1]=ub.g,xb[T+2]=ub.b;if(rb){$a=0;for(Ab=rb.length;$a<
Ab;$a++)if(S=rb[$a],void 0===S.boundTo||"vertices"===S.boundTo)if(T=0,ab=S.value.length,1===S.size)for(Z=0;Z<ab;Z++)ob=qb[Z][1],S.array[Z]=S.value[ob];else if(2===S.size)for(Z=0;Z<ab;Z++)ob=qb[Z][1],ga=S.value[ob],S.array[T]=ga.x,S.array[T+1]=ga.y,T+=2;else if(3===S.size)if("c"===S.type)for(Z=0;Z<ab;Z++)ob=qb[Z][1],ga=S.value[ob],S.array[T]=ga.r,S.array[T+1]=ga.g,S.array[T+2]=ga.b,T+=3;else for(Z=0;Z<ab;Z++)ob=qb[Z][1],ga=S.value[ob],S.array[T]=ga.x,S.array[T+1]=ga.y,S.array[T+2]=ga.z,T+=3;else if(4===
S.size)for(Z=0;Z<ab;Z++)ob=qb[Z][1],ga=S.value[ob],S.array[T]=ga.x,S.array[T+1]=ga.y,S.array[T+2]=ga.z,S.array[T+3]=ga.w,T+=4}}else{if(oc)for(Ja=0;Ja<ic;Ja++)nb=Yb[Ja],T=3*Ja,wb[T]=nb.x,wb[T+1]=nb.y,wb[T+2]=nb.z;if(pc)for(mb=0;mb<nc;mb++)ub=jc[mb],T=3*mb,xb[T]=ub.r,xb[T+1]=ub.g,xb[T+2]=ub.b;if(rb){$a=0;for(Ab=rb.length;$a<Ab;$a++)if(S=rb[$a],S.needsUpdate&&(void 0===S.boundTo||"vertices"===S.boundTo))if(ab=S.value.length,T=0,1===S.size)for(Z=0;Z<ab;Z++)S.array[Z]=S.value[Z];else if(2===S.size)for(Z=
0;Z<ab;Z++)ga=S.value[Z],S.array[T]=ga.x,S.array[T+1]=ga.y,T+=2;else if(3===S.size)if("c"===S.type)for(Z=0;Z<ab;Z++)ga=S.value[Z],S.array[T]=ga.r,S.array[T+1]=ga.g,S.array[T+2]=ga.b,T+=3;else for(Z=0;Z<ab;Z++)ga=S.value[Z],S.array[T]=ga.x,S.array[T+1]=ga.y,S.array[T+2]=ga.z,T+=3;else if(4===S.size)for(Z=0;Z<ab;Z++)ga=S.value[Z],S.array[T]=ga.x,S.array[T+1]=ga.y,S.array[T+2]=ga.z,S.array[T+3]=ga.w,T+=4}}if(oc||Lb.sortParticles)j.bindBuffer(j.ARRAY_BUFFER,lb.__webglVertexBuffer),j.bufferData(j.ARRAY_BUFFER,
wb,hc);if(pc||Lb.sortParticles)j.bindBuffer(j.ARRAY_BUFFER,lb.__webglColorBuffer),j.bufferData(j.ARRAY_BUFFER,xb,hc);if(rb){$a=0;for(Ab=rb.length;$a<Ab;$a++)if(S=rb[$a],S.needsUpdate||Lb.sortParticles)j.bindBuffer(j.ARRAY_BUFFER,S.buffer),j.bufferData(j.ARRAY_BUFFER,S.array,hc)}}l.verticesNeedUpdate=!1;l.colorsNeedUpdate=!1;r.attributes&&n(r)}}};this.initMaterial=function(a,b,c,d){var e,f,g,h;a.addEventListener("dispose",Fb);var i,k,l,m,n;a instanceof THREE.MeshDepthMaterial?n="depth":a instanceof
THREE.MeshNormalMaterial?n="normal":a instanceof THREE.MeshBasicMaterial?n="basic":a instanceof THREE.MeshLambertMaterial?n="lambert":a instanceof THREE.MeshPhongMaterial?n="phong":a instanceof THREE.LineBasicMaterial?n="basic":a instanceof THREE.LineDashedMaterial?n="dashed":a instanceof THREE.ParticleSystemMaterial&&(n="particle_basic");if(n){var p=THREE.ShaderLib[n];a.uniforms=THREE.UniformsUtils.clone(p.uniforms);a.vertexShader=p.vertexShader;a.fragmentShader=p.fragmentShader}var q=e=0,r=0,t=
p=0;for(f=b.length;t<f;t++)g=b[t],g.onlyShadow||(g instanceof THREE.DirectionalLight&&e++,g instanceof THREE.PointLight&&q++,g instanceof THREE.SpotLight&&r++,g instanceof THREE.HemisphereLight&&p++);f=q;g=r;h=p;r=p=0;for(q=b.length;r<q;r++)t=b[r],t.castShadow&&(t instanceof THREE.SpotLight&&p++,t instanceof THREE.DirectionalLight&&!t.shadowCascade&&p++);m=p;yb&&d&&d.useVertexTexture?l=1024:(b=j.getParameter(j.MAX_VERTEX_UNIFORM_VECTORS),b=Math.floor((b-20)/4),void 0!==d&&d instanceof THREE.SkinnedMesh&&
(b=Math.min(d.bones.length,b),b<d.bones.length&&console.warn("WebGLRenderer: too many bones - "+d.bones.length+", this GPU supports just "+b+" (try OpenGL instead of ANGLE)")),l=b);a:{var r=a.fragmentShader,q=a.vertexShader,p=a.uniforms,b=a.attributes,t=a.defines,c={map:!!a.map,envMap:!!a.envMap,lightMap:!!a.lightMap,bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,specularMap:!!a.specularMap,vertexColors:a.vertexColors,fog:c,useFog:a.fog,fogExp:c instanceof THREE.FogExp2,sizeAttenuation:a.sizeAttenuation,
skinning:a.skinning,maxBones:l,useVertexTexture:yb&&d&&d.useVertexTexture,morphTargets:a.morphTargets,morphNormals:a.morphNormals,maxMorphTargets:this.maxMorphTargets,maxMorphNormals:this.maxMorphNormals,maxDirLights:e,maxPointLights:f,maxSpotLights:g,maxHemiLights:h,maxShadows:m,shadowMapEnabled:this.shadowMapEnabled&&d.receiveShadow,shadowMapType:this.shadowMapType,shadowMapDebug:this.shadowMapDebug,shadowMapCascade:this.shadowMapCascade,alphaTest:a.alphaTest,metal:a.metal,perPixel:a.perPixel,wrapAround:a.wrapAround,
doubleSided:a.side===THREE.DoubleSide,flipSided:a.side===THREE.BackSide},d=a.index0AttributeName,s,u,v;e=[];n?e.push(n):(e.push(r),e.push(q));for(u in t)e.push(u),e.push(t[u]);for(s in c)e.push(s),e.push(c[s]);n=e.join();s=0;for(u=da.length;s<u;s++)if(e=da[s],e.code===n){e.usedTimes++;k=e.program;break a}s="SHADOWMAP_TYPE_BASIC";c.shadowMapType===THREE.PCFShadowMap?s="SHADOWMAP_TYPE_PCF":c.shadowMapType===THREE.PCFSoftShadowMap&&(s="SHADOWMAP_TYPE_PCF_SOFT");u=[];for(v in t)e=t[v],!1!==e&&(e="#define "+
v+" "+e,u.push(e));e=u.join("\n");v=j.createProgram();u=["precision "+M+" float;","precision "+M+" int;",e,Bb?"#define VERTEX_TEXTURES":"",L.gammaInput?"#define GAMMA_INPUT":"",L.gammaOutput?"#define GAMMA_OUTPUT":"",L.physicallyBasedShading?"#define PHYSICALLY_BASED_SHADING":"","#define MAX_DIR_LIGHTS "+c.maxDirLights,"#define MAX_POINT_LIGHTS "+c.maxPointLights,"#define MAX_SPOT_LIGHTS "+c.maxSpotLights,"#define MAX_HEMI_LIGHTS "+c.maxHemiLights,"#define MAX_SHADOWS "+c.maxShadows,"#define MAX_BONES "+
c.maxBones,c.map?"#define USE_MAP":"",c.envMap?"#define USE_ENVMAP":"",c.lightMap?"#define USE_LIGHTMAP":"",c.bumpMap?"#define USE_BUMPMAP":"",c.normalMap?"#define USE_NORMALMAP":"",c.specularMap?"#define USE_SPECULARMAP":"",c.vertexColors?"#define USE_COLOR":"",c.skinning?"#define USE_SKINNING":"",c.useVertexTexture?"#define BONE_TEXTURE":"",c.morphTargets?"#define USE_MORPHTARGETS":"",c.morphNormals?"#define USE_MORPHNORMALS":"",c.perPixel?"#define PHONG_PER_PIXEL":"",c.wrapAround?"#define WRAP_AROUND":
"",c.doubleSided?"#define DOUBLE_SIDED":"",c.flipSided?"#define FLIP_SIDED":"",c.shadowMapEnabled?"#define USE_SHADOWMAP":"",c.shadowMapEnabled?"#define "+s:"",c.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",c.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",c.sizeAttenuation?"#define USE_SIZEATTENUATION":"","uniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\n#ifdef USE_COLOR\nattribute vec3 color;\n#endif\n#ifdef USE_MORPHTARGETS\nattribute vec3 morphTarget0;\nattribute vec3 morphTarget1;\nattribute vec3 morphTarget2;\nattribute vec3 morphTarget3;\n#ifdef USE_MORPHNORMALS\nattribute vec3 morphNormal0;\nattribute vec3 morphNormal1;\nattribute vec3 morphNormal2;\nattribute vec3 morphNormal3;\n#else\nattribute vec3 morphTarget4;\nattribute vec3 morphTarget5;\nattribute vec3 morphTarget6;\nattribute vec3 morphTarget7;\n#endif\n#endif\n#ifdef USE_SKINNING\nattribute vec4 skinIndex;\nattribute vec4 skinWeight;\n#endif\n"].join("\n");
s=["precision "+M+" float;","precision "+M+" int;",c.bumpMap||c.normalMap?"#extension GL_OES_standard_derivatives : enable":"",e,"#define MAX_DIR_LIGHTS "+c.maxDirLights,"#define MAX_POINT_LIGHTS "+c.maxPointLights,"#define MAX_SPOT_LIGHTS "+c.maxSpotLights,"#define MAX_HEMI_LIGHTS "+c.maxHemiLights,"#define MAX_SHADOWS "+c.maxShadows,c.alphaTest?"#define ALPHATEST "+c.alphaTest:"",L.gammaInput?"#define GAMMA_INPUT":"",L.gammaOutput?"#define GAMMA_OUTPUT":"",L.physicallyBasedShading?"#define PHYSICALLY_BASED_SHADING":
"",c.useFog&&c.fog?"#define USE_FOG":"",c.useFog&&c.fogExp?"#define FOG_EXP2":"",c.map?"#define USE_MAP":"",c.envMap?"#define USE_ENVMAP":"",c.lightMap?"#define USE_LIGHTMAP":"",c.bumpMap?"#define USE_BUMPMAP":"",c.normalMap?"#define USE_NORMALMAP":"",c.specularMap?"#define USE_SPECULARMAP":"",c.vertexColors?"#define USE_COLOR":"",c.metal?"#define METAL":"",c.perPixel?"#define PHONG_PER_PIXEL":"",c.wrapAround?"#define WRAP_AROUND":"",c.doubleSided?"#define DOUBLE_SIDED":"",c.flipSided?"#define FLIP_SIDED":
"",c.shadowMapEnabled?"#define USE_SHADOWMAP":"",c.shadowMapEnabled?"#define "+s:"",c.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",c.shadowMapCascade?"#define SHADOWMAP_CASCADE":"","uniform mat4 viewMatrix;\nuniform vec3 cameraPosition;\n"].join("\n");u=D("vertex",u+q);s=D("fragment",s+r);j.attachShader(v,u);j.attachShader(v,s);d&&j.bindAttribLocation(v,0,d);j.linkProgram(v);j.getProgramParameter(v,j.LINK_STATUS)||(console.error("Could not initialise shader\nVALIDATE_STATUS: "+j.getProgramParameter(v,
j.VALIDATE_STATUS)+", gl error ["+j.getError()+"]"),console.error("Program Info Log: "+j.getProgramInfoLog(v)));j.deleteShader(s);j.deleteShader(u);v.uniforms={};v.attributes={};var w;s="viewMatrix modelViewMatrix projectionMatrix normalMatrix modelMatrix cameraPosition morphTargetInfluences".split(" ");c.useVertexTexture?(s.push("boneTexture"),s.push("boneTextureWidth"),s.push("boneTextureHeight")):s.push("boneGlobalMatrices");for(w in p)s.push(w);w=s;s=0;for(u=w.length;s<u;s++)p=w[s],v.uniforms[p]=
j.getUniformLocation(v,p);s="position normal uv uv2 tangent color skinIndex skinWeight lineDistance".split(" ");for(w=0;w<c.maxMorphTargets;w++)s.push("morphTarget"+w);for(w=0;w<c.maxMorphNormals;w++)s.push("morphNormal"+w);for(k in b)s.push(k);k=s;w=0;for(b=k.length;w<b;w++)s=k[w],v.attributes[s]=j.getAttribLocation(v,s);v.id=za++;da.push({program:v,code:n,usedTimes:1});L.info.memory.programs=da.length;k=v}a.program=k;w=a.program.attributes;if(a.morphTargets){a.numSupportedMorphTargets=0;b="morphTarget";
for(k=0;k<this.maxMorphTargets;k++)v=b+k,0<=w[v]&&a.numSupportedMorphTargets++}if(a.morphNormals){a.numSupportedMorphNormals=0;b="morphNormal";for(k=0;k<this.maxMorphNormals;k++)v=b+k,0<=w[v]&&a.numSupportedMorphNormals++}a.uniformsList=[];for(i in a.uniforms)a.uniformsList.push([a.uniforms[i],i])};this.setFaceCulling=function(a,b){a===THREE.CullFaceNone?j.disable(j.CULL_FACE):(b===THREE.FrontFaceDirectionCW?j.frontFace(j.CW):j.frontFace(j.CCW),a===THREE.CullFaceBack?j.cullFace(j.BACK):a===THREE.CullFaceFront?
j.cullFace(j.FRONT):j.cullFace(j.FRONT_AND_BACK),j.enable(j.CULL_FACE))};this.setMaterialFaces=function(a){var b=a.side===THREE.DoubleSide,a=a.side===THREE.BackSide;Y!==b&&(b?j.disable(j.CULL_FACE):j.enable(j.CULL_FACE),Y=b);U!==a&&(a?j.frontFace(j.CW):j.frontFace(j.CCW),U=a)};this.setDepthTest=function(a){Ga!==a&&(a?j.enable(j.DEPTH_TEST):j.disable(j.DEPTH_TEST),Ga=a)};this.setDepthWrite=function(a){ka!==a&&(j.depthMask(a),ka=a)};this.setBlending=function(a,b,c,d){a!==ja&&(a===THREE.NoBlending?j.disable(j.BLEND):
a===THREE.AdditiveBlending?(j.enable(j.BLEND),j.blendEquation(j.FUNC_ADD),j.blendFunc(j.SRC_ALPHA,j.ONE)):a===THREE.SubtractiveBlending?(j.enable(j.BLEND),j.blendEquation(j.FUNC_ADD),j.blendFunc(j.ZERO,j.ONE_MINUS_SRC_COLOR)):a===THREE.MultiplyBlending?(j.enable(j.BLEND),j.blendEquation(j.FUNC_ADD),j.blendFunc(j.ZERO,j.SRC_COLOR)):a===THREE.CustomBlending?j.enable(j.BLEND):(j.enable(j.BLEND),j.blendEquationSeparate(j.FUNC_ADD,j.FUNC_ADD),j.blendFuncSeparate(j.SRC_ALPHA,j.ONE_MINUS_SRC_ALPHA,j.ONE,
j.ONE_MINUS_SRC_ALPHA)),ja=a);if(a===THREE.CustomBlending){if(b!==sa&&(j.blendEquation(I(b)),sa=b),c!==ha||d!==Ka)j.blendFunc(I(c),I(d)),ha=c,Ka=d}else Ka=ha=sa=null};this.setTexture=function(a,b){if(a.needsUpdate){a.__webglInit||(a.__webglInit=!0,a.addEventListener("dispose",Db),a.__webglTexture=j.createTexture(),L.info.memory.textures++);j.activeTexture(j.TEXTURE0+b);j.bindTexture(j.TEXTURE_2D,a.__webglTexture);j.pixelStorei(j.UNPACK_FLIP_Y_WEBGL,a.flipY);j.pixelStorei(j.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
a.premultiplyAlpha);j.pixelStorei(j.UNPACK_ALIGNMENT,a.unpackAlignment);var c=a.image,d=0===(c.width&c.width-1)&&0===(c.height&c.height-1),e=I(a.format),f=I(a.type);F(j.TEXTURE_2D,a,d);var g=a.mipmaps;if(a instanceof THREE.DataTexture)if(0<g.length&&d){for(var h=0,i=g.length;h<i;h++)c=g[h],j.texImage2D(j.TEXTURE_2D,h,e,c.width,c.height,0,e,f,c.data);a.generateMipmaps=!1}else j.texImage2D(j.TEXTURE_2D,0,e,c.width,c.height,0,e,f,c.data);else if(a instanceof THREE.CompressedTexture){h=0;for(i=g.length;h<
i;h++)c=g[h],a.format!==THREE.RGBAFormat?j.compressedTexImage2D(j.TEXTURE_2D,h,e,c.width,c.height,0,c.data):j.texImage2D(j.TEXTURE_2D,h,e,c.width,c.height,0,e,f,c.data)}else if(0<g.length&&d){h=0;for(i=g.length;h<i;h++)c=g[h],j.texImage2D(j.TEXTURE_2D,h,e,e,f,c);a.generateMipmaps=!1}else j.texImage2D(j.TEXTURE_2D,0,e,e,f,a.image);a.generateMipmaps&&d&&j.generateMipmap(j.TEXTURE_2D);a.needsUpdate=!1;if(a.onUpdate)a.onUpdate()}else j.activeTexture(j.TEXTURE0+b),j.bindTexture(j.TEXTURE_2D,a.__webglTexture)};
this.setRenderTarget=function(a){var b=a instanceof THREE.WebGLRenderTargetCube;if(a&&!a.__webglFramebuffer){void 0===a.depthBuffer&&(a.depthBuffer=!0);void 0===a.stencilBuffer&&(a.stencilBuffer=!0);a.addEventListener("dispose",Eb);a.__webglTexture=j.createTexture();L.info.memory.textures++;var c=0===(a.width&a.width-1)&&0===(a.height&a.height-1),d=I(a.format),e=I(a.type);if(b){a.__webglFramebuffer=[];a.__webglRenderbuffer=[];j.bindTexture(j.TEXTURE_CUBE_MAP,a.__webglTexture);F(j.TEXTURE_CUBE_MAP,
a,c);for(var f=0;6>f;f++){a.__webglFramebuffer[f]=j.createFramebuffer();a.__webglRenderbuffer[f]=j.createRenderbuffer();j.texImage2D(j.TEXTURE_CUBE_MAP_POSITIVE_X+f,0,d,a.width,a.height,0,d,e,null);var g=a,h=j.TEXTURE_CUBE_MAP_POSITIVE_X+f;j.bindFramebuffer(j.FRAMEBUFFER,a.__webglFramebuffer[f]);j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,h,g.__webglTexture,0);O(a.__webglRenderbuffer[f],a)}c&&j.generateMipmap(j.TEXTURE_CUBE_MAP)}else a.__webglFramebuffer=j.createFramebuffer(),a.__webglRenderbuffer=
a.shareDepthFrom?a.shareDepthFrom.__webglRenderbuffer:j.createRenderbuffer(),j.bindTexture(j.TEXTURE_2D,a.__webglTexture),F(j.TEXTURE_2D,a,c),j.texImage2D(j.TEXTURE_2D,0,d,a.width,a.height,0,d,e,null),d=j.TEXTURE_2D,j.bindFramebuffer(j.FRAMEBUFFER,a.__webglFramebuffer),j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,d,a.__webglTexture,0),a.shareDepthFrom?a.depthBuffer&&!a.stencilBuffer?j.framebufferRenderbuffer(j.FRAMEBUFFER,j.DEPTH_ATTACHMENT,j.RENDERBUFFER,a.__webglRenderbuffer):a.depthBuffer&&
a.stencilBuffer&&j.framebufferRenderbuffer(j.FRAMEBUFFER,j.DEPTH_STENCIL_ATTACHMENT,j.RENDERBUFFER,a.__webglRenderbuffer):O(a.__webglRenderbuffer,a),c&&j.generateMipmap(j.TEXTURE_2D);b?j.bindTexture(j.TEXTURE_CUBE_MAP,null):j.bindTexture(j.TEXTURE_2D,null);j.bindRenderbuffer(j.RENDERBUFFER,null);j.bindFramebuffer(j.FRAMEBUFFER,null)}a?(b=b?a.__webglFramebuffer[a.activeCubeFace]:a.__webglFramebuffer,c=a.width,a=a.height,e=d=0):(b=null,c=Ma,a=fb,d=bb,e=cb);b!==ba&&(j.bindFramebuffer(j.FRAMEBUFFER,b),
j.viewport(d,e,c,a),ba=b);sb=c;pb=a};this.shadowMapPlugin=new THREE.ShadowMapPlugin;this.addPrePlugin(this.shadowMapPlugin);this.addPostPlugin(new THREE.SpritePlugin);this.addPostPlugin(new THREE.LensFlarePlugin)};THREE.WebGLRenderTarget=function(a,b,c){this.width=a;this.height=b;c=c||{};this.wrapS=void 0!==c.wrapS?c.wrapS:THREE.ClampToEdgeWrapping;this.wrapT=void 0!==c.wrapT?c.wrapT:THREE.ClampToEdgeWrapping;this.magFilter=void 0!==c.magFilter?c.magFilter:THREE.LinearFilter;this.minFilter=void 0!==c.minFilter?c.minFilter:THREE.LinearMipMapLinearFilter;this.anisotropy=void 0!==c.anisotropy?c.anisotropy:1;this.offset=new THREE.Vector2(0,0);this.repeat=new THREE.Vector2(1,1);this.format=void 0!==c.format?c.format:
THREE.RGBAFormat;this.type=void 0!==c.type?c.type:THREE.UnsignedByteType;this.depthBuffer=void 0!==c.depthBuffer?c.depthBuffer:!0;this.stencilBuffer=void 0!==c.stencilBuffer?c.stencilBuffer:!0;this.generateMipmaps=!0;this.shareDepthFrom=null};
THREE.WebGLRenderTarget.prototype={constructor:THREE.WebGLRenderTarget,clone:function(){var a=new THREE.WebGLRenderTarget(this.width,this.height);a.wrapS=this.wrapS;a.wrapT=this.wrapT;a.magFilter=this.magFilter;a.minFilter=this.minFilter;a.anisotropy=this.anisotropy;a.offset.copy(this.offset);a.repeat.copy(this.repeat);a.format=this.format;a.type=this.type;a.depthBuffer=this.depthBuffer;a.stencilBuffer=this.stencilBuffer;a.generateMipmaps=this.generateMipmaps;a.shareDepthFrom=this.shareDepthFrom;
return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.WebGLRenderTarget.prototype);THREE.WebGLRenderTargetCube=function(a,b,c){THREE.WebGLRenderTarget.call(this,a,b,c);this.activeCubeFace=0};THREE.WebGLRenderTargetCube.prototype=Object.create(THREE.WebGLRenderTarget.prototype);THREE.RenderableVertex=function(){this.positionWorld=new THREE.Vector3;this.positionScreen=new THREE.Vector4;this.visible=!0};THREE.RenderableVertex.prototype.copy=function(a){this.positionWorld.copy(a.positionWorld);this.positionScreen.copy(a.positionScreen)};THREE.RenderableFace3=function(){this.id=0;this.v1=new THREE.RenderableVertex;this.v2=new THREE.RenderableVertex;this.v3=new THREE.RenderableVertex;this.centroidModel=new THREE.Vector3;this.normalModel=new THREE.Vector3;this.normalModelView=new THREE.Vector3;this.vertexNormalsLength=0;this.vertexNormalsModel=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];this.vertexNormalsModelView=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];this.material=this.color=null;this.uvs=[[]];this.z=
0};THREE.RenderableObject=function(){this.id=0;this.object=null;this.z=0};THREE.RenderableSprite=function(){this.id=0;this.object=null;this.rotation=this.z=this.y=this.x=0;this.scale=new THREE.Vector2;this.material=null};THREE.RenderableLine=function(){this.id=0;this.v1=new THREE.RenderableVertex;this.v2=new THREE.RenderableVertex;this.vertexColors=[new THREE.Color,new THREE.Color];this.material=null;this.z=0};THREE.GeometryUtils={merge:function(a,b,c){var d,e,f=a.vertices.length,h=b instanceof THREE.Mesh?b.geometry:b,g=a.vertices,i=h.vertices,k=a.faces,m=h.faces,a=a.faceVertexUvs[0],h=h.faceVertexUvs[0];void 0===c&&(c=0);b instanceof THREE.Mesh&&(b.matrixAutoUpdate&&b.updateMatrix(),d=b.matrix,e=(new THREE.Matrix3).getNormalMatrix(d));for(var b=0,l=i.length;b<l;b++){var p=i[b].clone();d&&p.applyMatrix4(d);g.push(p)}b=0;for(l=m.length;b<l;b++){var p=m[b],t,s,q=p.vertexNormals,n=p.vertexColors;t=new THREE.Face3(p.a+
f,p.b+f,p.c+f);t.normal.copy(p.normal);e&&t.normal.applyMatrix3(e).normalize();g=0;for(i=q.length;g<i;g++)s=q[g].clone(),e&&s.applyMatrix3(e).normalize(),t.vertexNormals.push(s);t.color.copy(p.color);g=0;for(i=n.length;g<i;g++)s=n[g],t.vertexColors.push(s.clone());t.materialIndex=p.materialIndex+c;t.centroid.copy(p.centroid);d&&t.centroid.applyMatrix4(d);k.push(t)}b=0;for(l=h.length;b<l;b++){c=h[b];d=[];g=0;for(i=c.length;g<i;g++)d.push(new THREE.Vector2(c[g].x,c[g].y));a.push(d)}},randomPointInTriangle:function(){var a=
new THREE.Vector3;return function(b,c,d){var e=new THREE.Vector3,f=THREE.Math.random16(),h=THREE.Math.random16();1<f+h&&(f=1-f,h=1-h);var g=1-f-h;e.copy(b);e.multiplyScalar(f);a.copy(c);a.multiplyScalar(h);e.add(a);a.copy(d);a.multiplyScalar(g);e.add(a);return e}}(),randomPointInFace:function(a,b){return THREE.GeometryUtils.randomPointInTriangle(b.vertices[a.a],b.vertices[a.b],b.vertices[a.c])},randomPointsInGeometry:function(a,b){function c(a){function b(c,d){if(d<c)return c;var e=c+Math.floor((d-
c)/2);return k[e]>a?b(c,e-1):k[e]<a?b(e+1,d):e}return b(0,k.length-1)}var d,e,f=a.faces,h=a.vertices,g=f.length,i=0,k=[],m,l,p;for(e=0;e<g;e++)d=f[e],m=h[d.a],l=h[d.b],p=h[d.c],d._area=THREE.GeometryUtils.triangleArea(m,l,p),i+=d._area,k[e]=i;d=[];for(e=0;e<b;e++)h=THREE.Math.random16()*i,h=c(h),d[e]=THREE.GeometryUtils.randomPointInFace(f[h],a,!0);return d},triangleArea:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,d,e){a.subVectors(d,c);b.subVectors(e,c);a.cross(b);return 0.5*
a.length()}}(),center:function(a){a.computeBoundingBox();var b=a.boundingBox,c=new THREE.Vector3;c.addVectors(b.min,b.max);c.multiplyScalar(-0.5);a.applyMatrix((new THREE.Matrix4).makeTranslation(c.x,c.y,c.z));a.computeBoundingBox();return c},triangulateQuads:function(a){var b,c,d,e,f=[],h=[];b=0;for(c=a.faceVertexUvs.length;b<c;b++)h[b]=[];b=0;for(c=a.faces.length;b<c;b++){f.push(a.faces[b]);d=0;for(e=a.faceVertexUvs.length;d<e;d++)h[d].push(a.faceVertexUvs[d][b])}a.faces=f;a.faceVertexUvs=h;a.computeCentroids();
a.computeFaceNormals();a.computeVertexNormals();a.hasTangents&&a.computeTangents()}};THREE.ImageUtils={crossOrigin:"anonymous",loadTexture:function(a,b,c){var d=new THREE.ImageLoader;d.crossOrigin=this.crossOrigin;var e=new THREE.Texture(void 0,b),b=d.load(a,function(){e.needsUpdate=!0;c&&c(e)});e.image=b;e.sourceFile=a;return e},loadCompressedTexture:function(a,b,c,d){var e=new THREE.CompressedTexture;e.mapping=b;var f=new XMLHttpRequest;f.onload=function(){var a=THREE.ImageUtils.parseDDS(f.response,!0);e.format=a.format;e.mipmaps=a.mipmaps;e.image.width=a.width;e.image.height=a.height;
e.generateMipmaps=!1;e.needsUpdate=!0;c&&c(e)};f.onerror=d;f.open("GET",a,!0);f.responseType="arraybuffer";f.send(null);return e},loadTextureCube:function(a,b,c,d){var e=[];e.loadCount=0;var f=new THREE.Texture;f.image=e;void 0!==b&&(f.mapping=b);f.flipY=!1;for(var b=0,h=a.length;b<h;++b){var g=new Image;e[b]=g;g.onload=function(){e.loadCount+=1;6===e.loadCount&&(f.needsUpdate=!0,c&&c(f))};g.onerror=d;g.crossOrigin=this.crossOrigin;g.src=a[b]}return f},loadCompressedTextureCube:function(a,b,c,d){var e=
[];e.loadCount=0;var f=new THREE.CompressedTexture;f.image=e;void 0!==b&&(f.mapping=b);f.flipY=!1;f.generateMipmaps=!1;b=function(a,b){return function(){var d=THREE.ImageUtils.parseDDS(a.response,!0);b.format=d.format;b.mipmaps=d.mipmaps;b.width=d.width;b.height=d.height;e.loadCount+=1;6===e.loadCount&&(f.format=d.format,f.needsUpdate=!0,c&&c(f))}};if(a instanceof Array)for(var h=0,g=a.length;h<g;++h){var i={};e[h]=i;var k=new XMLHttpRequest;k.onload=b(k,i);k.onerror=d;i=a[h];k.open("GET",i,!0);k.responseType=
"arraybuffer";k.send(null)}else k=new XMLHttpRequest,k.onload=function(){var a=THREE.ImageUtils.parseDDS(k.response,!0);if(a.isCubemap){for(var b=a.mipmaps.length/a.mipmapCount,d=0;d<b;d++){e[d]={mipmaps:[]};for(var g=0;g<a.mipmapCount;g++)e[d].mipmaps.push(a.mipmaps[d*a.mipmapCount+g]),e[d].format=a.format,e[d].width=a.width,e[d].height=a.height}f.format=a.format;f.needsUpdate=!0;c&&c(f)}},k.onerror=d,k.open("GET",a,!0),k.responseType="arraybuffer",k.send(null);return f},loadDDSTexture:function(a,
b,c,d){var e=[];e.loadCount=0;var f=new THREE.CompressedTexture;f.image=e;void 0!==b&&(f.mapping=b);f.flipY=!1;f.generateMipmaps=!1;var h=new XMLHttpRequest;h.onload=function(){var a=THREE.ImageUtils.parseDDS(h.response,!0);if(a.isCubemap)for(var b=a.mipmaps.length/a.mipmapCount,d=0;d<b;d++){e[d]={mipmaps:[]};for(var m=0;m<a.mipmapCount;m++)e[d].mipmaps.push(a.mipmaps[d*a.mipmapCount+m]),e[d].format=a.format,e[d].width=a.width,e[d].height=a.height}else f.image.width=a.width,f.image.height=a.height,
f.mipmaps=a.mipmaps;f.format=a.format;f.needsUpdate=!0;c&&c(f)};h.onerror=d;h.open("GET",a,!0);h.responseType="arraybuffer";h.send(null);return f},parseDDS:function(a,b){function c(a){return a.charCodeAt(0)+(a.charCodeAt(1)<<8)+(a.charCodeAt(2)<<16)+(a.charCodeAt(3)<<24)}var d={mipmaps:[],width:0,height:0,format:null,mipmapCount:1},e=c("DXT1"),f=c("DXT3"),h=c("DXT5"),g=new Int32Array(a,0,31);if(542327876!==g[0])return console.error("ImageUtils.parseDDS(): Invalid magic number in DDS header"),d;if(!g[20]&
4)return console.error("ImageUtils.parseDDS(): Unsupported format, must contain a FourCC code"),d;var i=g[21],k=!1;switch(i){case e:e=8;d.format=THREE.RGB_S3TC_DXT1_Format;break;case f:e=16;d.format=THREE.RGBA_S3TC_DXT3_Format;break;case h:e=16;d.format=THREE.RGBA_S3TC_DXT5_Format;break;default:if(32==g[22]&&g[23]&16711680&&g[24]&65280&&g[25]&255&&g[26]&4278190080)k=!0,e=64,d.format=THREE.RGBAFormat;else return console.error("ImageUtils.parseDDS(): Unsupported FourCC code: ",String.fromCharCode(i&
255,i>>8&255,i>>16&255,i>>24&255)),d}d.mipmapCount=1;g[2]&131072&&!1!==b&&(d.mipmapCount=Math.max(1,g[7]));d.isCubemap=g[28]&512?!0:!1;d.width=g[4];d.height=g[3];for(var g=g[1]+4,f=d.width,h=d.height,i=d.isCubemap?6:1,m=0;m<i;m++){for(var l=0;l<d.mipmapCount;l++){if(k){var p;p=f;for(var t=h,s=4*p*t,q=new Uint8Array(a,g,s),s=new Uint8Array(s),n=0,u=0,r=0;r<t;r++)for(var v=0;v<p;v++){var z=q[u];u++;var G=q[u];u++;var w=q[u];u++;var y=q[u];u++;s[n]=w;n++;s[n]=G;n++;s[n]=z;n++;s[n]=y;n++}p=s;t=p.length}else t=
Math.max(4,f)/4*Math.max(4,h)/4*e,p=new Uint8Array(a,g,t);d.mipmaps.push({data:p,width:f,height:h});g+=t;f=Math.max(0.5*f,1);h=Math.max(0.5*h,1)}f=d.width;h=d.height}return d},getNormalMap:function(a,b){var c=function(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);return[a[0]/b,a[1]/b,a[2]/b]},b=b|1,d=a.width,e=a.height,f=document.createElement("canvas");f.width=d;f.height=e;var h=f.getContext("2d");h.drawImage(a,0,0);for(var g=h.getImageData(0,0,d,e).data,i=h.createImageData(d,e),k=i.data,m=0;m<
d;m++)for(var l=0;l<e;l++){var p=0>l-1?0:l-1,t=l+1>e-1?e-1:l+1,s=0>m-1?0:m-1,q=m+1>d-1?d-1:m+1,n=[],u=[0,0,g[4*(l*d+m)]/255*b];n.push([-1,0,g[4*(l*d+s)]/255*b]);n.push([-1,-1,g[4*(p*d+s)]/255*b]);n.push([0,-1,g[4*(p*d+m)]/255*b]);n.push([1,-1,g[4*(p*d+q)]/255*b]);n.push([1,0,g[4*(l*d+q)]/255*b]);n.push([1,1,g[4*(t*d+q)]/255*b]);n.push([0,1,g[4*(t*d+m)]/255*b]);n.push([-1,1,g[4*(t*d+s)]/255*b]);p=[];s=n.length;for(t=0;t<s;t++){var q=n[t],r=n[(t+1)%s],q=[q[0]-u[0],q[1]-u[1],q[2]-u[2]],r=[r[0]-u[0],
r[1]-u[1],r[2]-u[2]];p.push(c([q[1]*r[2]-q[2]*r[1],q[2]*r[0]-q[0]*r[2],q[0]*r[1]-q[1]*r[0]]))}n=[0,0,0];for(t=0;t<p.length;t++)n[0]+=p[t][0],n[1]+=p[t][1],n[2]+=p[t][2];n[0]/=p.length;n[1]/=p.length;n[2]/=p.length;u=4*(l*d+m);k[u]=255*((n[0]+1)/2)|0;k[u+1]=255*((n[1]+1)/2)|0;k[u+2]=255*n[2]|0;k[u+3]=255}h.putImageData(i,0,0);return f},generateDataTexture:function(a,b,c){for(var d=a*b,e=new Uint8Array(3*d),f=Math.floor(255*c.r),h=Math.floor(255*c.g),c=Math.floor(255*c.b),g=0;g<d;g++)e[3*g]=f,e[3*g+
1]=h,e[3*g+2]=c;a=new THREE.DataTexture(e,a,b,THREE.RGBFormat);a.needsUpdate=!0;return a}};THREE.SceneUtils={createMultiMaterialObject:function(a,b){for(var c=new THREE.Object3D,d=0,e=b.length;d<e;d++)c.add(new THREE.Mesh(a,b[d]));return c},detach:function(a,b,c){a.applyMatrix(b.matrixWorld);b.remove(a);c.add(a)},attach:function(a,b,c){var d=new THREE.Matrix4;d.getInverse(c.matrixWorld);a.applyMatrix(d);b.remove(a);c.add(a)}};THREE.FontUtils={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){return this.faces[this.face][this.weight][this.style]},loadFace:function(a){var b=a.familyName.toLowerCase();this.faces[b]=this.faces[b]||{};this.faces[b][a.cssFontWeight]=this.faces[b][a.cssFontWeight]||{};this.faces[b][a.cssFontWeight][a.cssFontStyle]=a;return this.faces[b][a.cssFontWeight][a.cssFontStyle]=a},drawText:function(a){for(var b=this.getFace(),c=this.size/b.resolution,d=
0,e=String(a).split(""),f=e.length,h=[],a=0;a<f;a++){var g=new THREE.Path,g=this.extractGlyphPoints(e[a],b,c,d,g),d=d+g.offset;h.push(g.path)}return{paths:h,offset:d/2}},extractGlyphPoints:function(a,b,c,d,e){var f=[],h,g,i,k,m,l,p,t,s,q,n,u=b.glyphs[a]||b.glyphs["?"];if(u){if(u.o){b=u._cachedOutline||(u._cachedOutline=u.o.split(" "));k=b.length;for(a=0;a<k;)switch(i=b[a++],i){case "m":i=b[a++]*c+d;m=b[a++]*c;e.moveTo(i,m);break;case "l":i=b[a++]*c+d;m=b[a++]*c;e.lineTo(i,m);break;case "q":i=b[a++]*
c+d;m=b[a++]*c;t=b[a++]*c+d;s=b[a++]*c;e.quadraticCurveTo(t,s,i,m);if(h=f[f.length-1]){l=h.x;p=h.y;h=1;for(g=this.divisions;h<=g;h++){var r=h/g;THREE.Shape.Utils.b2(r,l,t,i);THREE.Shape.Utils.b2(r,p,s,m)}}break;case "b":if(i=b[a++]*c+d,m=b[a++]*c,t=b[a++]*c+d,s=b[a++]*-c,q=b[a++]*c+d,n=b[a++]*-c,e.bezierCurveTo(i,m,t,s,q,n),h=f[f.length-1]){l=h.x;p=h.y;h=1;for(g=this.divisions;h<=g;h++)r=h/g,THREE.Shape.Utils.b3(r,l,t,q,i),THREE.Shape.Utils.b3(r,p,s,n,m)}}}return{offset:u.ha*c,path:e}}}};
THREE.FontUtils.generateShapes=function(a,b){var b=b||{},c=void 0!==b.curveSegments?b.curveSegments:4,d=void 0!==b.font?b.font:"helvetiker",e=void 0!==b.weight?b.weight:"normal",f=void 0!==b.style?b.style:"normal";THREE.FontUtils.size=void 0!==b.size?b.size:100;THREE.FontUtils.divisions=c;THREE.FontUtils.face=d;THREE.FontUtils.weight=e;THREE.FontUtils.style=f;c=THREE.FontUtils.drawText(a).paths;d=[];e=0;for(f=c.length;e<f;e++)Array.prototype.push.apply(d,c[e].toShapes());return d};
(function(a){var b=function(a){for(var b=a.length,e=0,f=b-1,h=0;h<b;f=h++)e+=a[f].x*a[h].y-a[h].x*a[f].y;return 0.5*e};a.Triangulate=function(a,d){var e=a.length;if(3>e)return null;var f=[],h=[],g=[],i,k,m;if(0<b(a))for(k=0;k<e;k++)h[k]=k;else for(k=0;k<e;k++)h[k]=e-1-k;var l=2*e;for(k=e-1;2<e;){if(0>=l--){console.log("Warning, unable to triangulate polygon!");break}i=k;e<=i&&(i=0);k=i+1;e<=k&&(k=0);m=k+1;e<=m&&(m=0);var p;a:{var t=p=void 0,s=void 0,q=void 0,n=void 0,u=void 0,r=void 0,v=void 0,z=
void 0,t=a[h[i]].x,s=a[h[i]].y,q=a[h[k]].x,n=a[h[k]].y,u=a[h[m]].x,r=a[h[m]].y;if(1E-10>(q-t)*(r-s)-(n-s)*(u-t))p=!1;else{var G=void 0,w=void 0,y=void 0,E=void 0,A=void 0,K=void 0,D=void 0,F=void 0,O=void 0,x=void 0,O=F=D=z=v=void 0,G=u-q,w=r-n,y=t-u,E=s-r,A=q-t,K=n-s;for(p=0;p<e;p++)if(!(p===i||p===k||p===m))if(v=a[h[p]].x,z=a[h[p]].y,D=v-t,F=z-s,O=v-q,x=z-n,v-=u,z-=r,O=G*x-w*O,D=A*F-K*D,F=y*z-E*v,-1E-10<=O&&-1E-10<=F&&-1E-10<=D){p=!1;break a}p=!0}}if(p){f.push([a[h[i]],a[h[k]],a[h[m]]]);g.push([h[i],
h[k],h[m]]);i=k;for(m=k+1;m<e;i++,m++)h[i]=h[m];e--;l=2*e}}return d?g:f};a.Triangulate.area=b;return a})(THREE.FontUtils);self._typeface_js={faces:THREE.FontUtils.faces,loadFace:THREE.FontUtils.loadFace};THREE.typeface_js=self._typeface_js;THREE.Curve=function(){};THREE.Curve.prototype.getPoint=function(){console.log("Warning, getPoint() not implemented!");return null};THREE.Curve.prototype.getPointAt=function(a){a=this.getUtoTmapping(a);return this.getPoint(a)};THREE.Curve.prototype.getPoints=function(a){a||(a=5);var b,c=[];for(b=0;b<=a;b++)c.push(this.getPoint(b/a));return c};THREE.Curve.prototype.getSpacedPoints=function(a){a||(a=5);var b,c=[];for(b=0;b<=a;b++)c.push(this.getPointAt(b/a));return c};
THREE.Curve.prototype.getLength=function(){var a=this.getLengths();return a[a.length-1]};THREE.Curve.prototype.getLengths=function(a){a||(a=this.__arcLengthDivisions?this.__arcLengthDivisions:200);if(this.cacheArcLengths&&this.cacheArcLengths.length==a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var b=[],c,d=this.getPoint(0),e,f=0;b.push(0);for(e=1;e<=a;e++)c=this.getPoint(e/a),f+=c.distanceTo(d),b.push(f),d=c;return this.cacheArcLengths=b};
THREE.Curve.prototype.updateArcLengths=function(){this.needsUpdate=!0;this.getLengths()};THREE.Curve.prototype.getUtoTmapping=function(a,b){var c=this.getLengths(),d=0,e=c.length,f;f=b?b:a*c[e-1];for(var h=0,g=e-1,i;h<=g;)if(d=Math.floor(h+(g-h)/2),i=c[d]-f,0>i)h=d+1;else if(0<i)g=d-1;else{g=d;break}d=g;if(c[d]==f)return d/(e-1);h=c[d];return c=(d+(f-h)/(c[d+1]-h))/(e-1)};THREE.Curve.prototype.getTangent=function(a){var b=a-1E-4,a=a+1E-4;0>b&&(b=0);1<a&&(a=1);b=this.getPoint(b);return this.getPoint(a).clone().sub(b).normalize()};
THREE.Curve.prototype.getTangentAt=function(a){a=this.getUtoTmapping(a);return this.getTangent(a)};
THREE.Curve.Utils={tangentQuadraticBezier:function(a,b,c,d){return 2*(1-a)*(c-b)+2*a*(d-c)},tangentCubicBezier:function(a,b,c,d,e){return-3*b*(1-a)*(1-a)+3*c*(1-a)*(1-a)-6*a*c*(1-a)+6*a*d*(1-a)-3*a*a*d+3*a*a*e},tangentSpline:function(a){return 6*a*a-6*a+(3*a*a-4*a+1)+(-6*a*a+6*a)+(3*a*a-2*a)},interpolate:function(a,b,c,d,e){var a=0.5*(c-a),d=0.5*(d-b),f=e*e;return(2*b-2*c+a+d)*e*f+(-3*b+3*c-2*a-d)*f+a*e+b}};
THREE.Curve.create=function(a,b){a.prototype=Object.create(THREE.Curve.prototype);a.prototype.getPoint=b;return a};THREE.CurvePath=function(){this.curves=[];this.bends=[];this.autoClose=!1};THREE.CurvePath.prototype=Object.create(THREE.Curve.prototype);THREE.CurvePath.prototype.add=function(a){this.curves.push(a)};THREE.CurvePath.prototype.checkConnection=function(){};THREE.CurvePath.prototype.closePath=function(){var a=this.curves[0].getPoint(0),b=this.curves[this.curves.length-1].getPoint(1);a.equals(b)||this.curves.push(new THREE.LineCurve(b,a))};
THREE.CurvePath.prototype.getPoint=function(a){for(var b=a*this.getLength(),c=this.getCurveLengths(),a=0;a<c.length;){if(c[a]>=b)return b=c[a]-b,a=this.curves[a],b=1-b/a.getLength(),a.getPointAt(b);a++}return null};THREE.CurvePath.prototype.getLength=function(){var a=this.getCurveLengths();return a[a.length-1]};
THREE.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var a=[],b=0,c,d=this.curves.length;for(c=0;c<d;c++)b+=this.curves[c].getLength(),a.push(b);return this.cacheLengths=a};
THREE.CurvePath.prototype.getBoundingBox=function(){var a=this.getPoints(),b,c,d,e,f,h;b=c=Number.NEGATIVE_INFINITY;e=f=Number.POSITIVE_INFINITY;var g,i,k,m,l=a[0]instanceof THREE.Vector3;m=l?new THREE.Vector3:new THREE.Vector2;i=0;for(k=a.length;i<k;i++)g=a[i],g.x>b?b=g.x:g.x<e&&(e=g.x),g.y>c?c=g.y:g.y<f&&(f=g.y),l&&(g.z>d?d=g.z:g.z<h&&(h=g.z)),m.add(g);a={minX:e,minY:f,maxX:b,maxY:c,centroid:m.divideScalar(k)};l&&(a.maxZ=d,a.minZ=h);return a};
THREE.CurvePath.prototype.createPointsGeometry=function(a){a=this.getPoints(a,!0);return this.createGeometry(a)};THREE.CurvePath.prototype.createSpacedPointsGeometry=function(a){a=this.getSpacedPoints(a,!0);return this.createGeometry(a)};THREE.CurvePath.prototype.createGeometry=function(a){for(var b=new THREE.Geometry,c=0;c<a.length;c++)b.vertices.push(new THREE.Vector3(a[c].x,a[c].y,a[c].z||0));return b};THREE.CurvePath.prototype.addWrapPath=function(a){this.bends.push(a)};
THREE.CurvePath.prototype.getTransformedPoints=function(a,b){var c=this.getPoints(a),d,e;b||(b=this.bends);d=0;for(e=b.length;d<e;d++)c=this.getWrapPoints(c,b[d]);return c};THREE.CurvePath.prototype.getTransformedSpacedPoints=function(a,b){var c=this.getSpacedPoints(a),d,e;b||(b=this.bends);d=0;for(e=b.length;d<e;d++)c=this.getWrapPoints(c,b[d]);return c};
THREE.CurvePath.prototype.getWrapPoints=function(a,b){var c=this.getBoundingBox(),d,e,f,h,g,i;d=0;for(e=a.length;d<e;d++)f=a[d],h=f.x,g=f.y,i=h/c.maxX,i=b.getUtoTmapping(i,h),h=b.getPoint(i),i=b.getTangent(i),i.set(-i.y,i.x).multiplyScalar(g),f.x=h.x+i.x,f.y=h.y+i.y;return a};THREE.Gyroscope=function(){THREE.Object3D.call(this)};THREE.Gyroscope.prototype=Object.create(THREE.Object3D.prototype);
THREE.Gyroscope.prototype.updateMatrixWorld=function(a){this.matrixAutoUpdate&&this.updateMatrix();if(this.matrixWorldNeedsUpdate||a)this.parent?(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorld.decompose(this.translationWorld,this.quaternionWorld,this.scaleWorld),this.matrix.decompose(this.translationObject,this.quaternionObject,this.scaleObject),this.matrixWorld.compose(this.translationWorld,this.quaternionObject,this.scaleWorld)):this.matrixWorld.copy(this.matrix),
this.matrixWorldNeedsUpdate=!1,a=!0;for(var b=0,c=this.children.length;b<c;b++)this.children[b].updateMatrixWorld(a)};THREE.Gyroscope.prototype.translationWorld=new THREE.Vector3;THREE.Gyroscope.prototype.translationObject=new THREE.Vector3;THREE.Gyroscope.prototype.quaternionWorld=new THREE.Quaternion;THREE.Gyroscope.prototype.quaternionObject=new THREE.Quaternion;THREE.Gyroscope.prototype.scaleWorld=new THREE.Vector3;THREE.Gyroscope.prototype.scaleObject=new THREE.Vector3;THREE.Path=function(a){THREE.CurvePath.call(this);this.actions=[];a&&this.fromPoints(a)};THREE.Path.prototype=Object.create(THREE.CurvePath.prototype);THREE.PathActions={MOVE_TO:"moveTo",LINE_TO:"lineTo",QUADRATIC_CURVE_TO:"quadraticCurveTo",BEZIER_CURVE_TO:"bezierCurveTo",CSPLINE_THRU:"splineThru",ARC:"arc",ELLIPSE:"ellipse"};THREE.Path.prototype.fromPoints=function(a){this.moveTo(a[0].x,a[0].y);for(var b=1,c=a.length;b<c;b++)this.lineTo(a[b].x,a[b].y)};
THREE.Path.prototype.moveTo=function(a,b){var c=Array.prototype.slice.call(arguments);this.actions.push({action:THREE.PathActions.MOVE_TO,args:c})};THREE.Path.prototype.lineTo=function(a,b){var c=Array.prototype.slice.call(arguments),d=this.actions[this.actions.length-1].args,d=new THREE.LineCurve(new THREE.Vector2(d[d.length-2],d[d.length-1]),new THREE.Vector2(a,b));this.curves.push(d);this.actions.push({action:THREE.PathActions.LINE_TO,args:c})};
THREE.Path.prototype.quadraticCurveTo=function(a,b,c,d){var e=Array.prototype.slice.call(arguments),f=this.actions[this.actions.length-1].args,f=new THREE.QuadraticBezierCurve(new THREE.Vector2(f[f.length-2],f[f.length-1]),new THREE.Vector2(a,b),new THREE.Vector2(c,d));this.curves.push(f);this.actions.push({action:THREE.PathActions.QUADRATIC_CURVE_TO,args:e})};
THREE.Path.prototype.bezierCurveTo=function(a,b,c,d,e,f){var h=Array.prototype.slice.call(arguments),g=this.actions[this.actions.length-1].args,g=new THREE.CubicBezierCurve(new THREE.Vector2(g[g.length-2],g[g.length-1]),new THREE.Vector2(a,b),new THREE.Vector2(c,d),new THREE.Vector2(e,f));this.curves.push(g);this.actions.push({action:THREE.PathActions.BEZIER_CURVE_TO,args:h})};
THREE.Path.prototype.splineThru=function(a){var b=Array.prototype.slice.call(arguments),c=this.actions[this.actions.length-1].args,c=[new THREE.Vector2(c[c.length-2],c[c.length-1])];Array.prototype.push.apply(c,a);c=new THREE.SplineCurve(c);this.curves.push(c);this.actions.push({action:THREE.PathActions.CSPLINE_THRU,args:b})};THREE.Path.prototype.arc=function(a,b,c,d,e,f){var h=this.actions[this.actions.length-1].args;this.absarc(a+h[h.length-2],b+h[h.length-1],c,d,e,f)};
THREE.Path.prototype.absarc=function(a,b,c,d,e,f){this.absellipse(a,b,c,c,d,e,f)};THREE.Path.prototype.ellipse=function(a,b,c,d,e,f,h){var g=this.actions[this.actions.length-1].args;this.absellipse(a+g[g.length-2],b+g[g.length-1],c,d,e,f,h)};THREE.Path.prototype.absellipse=function(a,b,c,d,e,f,h){var g=Array.prototype.slice.call(arguments),i=new THREE.EllipseCurve(a,b,c,d,e,f,h);this.curves.push(i);i=i.getPoint(1);g.push(i.x);g.push(i.y);this.actions.push({action:THREE.PathActions.ELLIPSE,args:g})};
THREE.Path.prototype.getSpacedPoints=function(a){a||(a=40);for(var b=[],c=0;c<a;c++)b.push(this.getPoint(c/a));return b};
THREE.Path.prototype.getPoints=function(a,b){if(this.useSpacedPoints)return console.log("tata"),this.getSpacedPoints(a,b);var a=a||12,c=[],d,e,f,h,g,i,k,m,l,p,t,s,q;d=0;for(e=this.actions.length;d<e;d++)switch(f=this.actions[d],h=f.action,f=f.args,h){case THREE.PathActions.MOVE_TO:c.push(new THREE.Vector2(f[0],f[1]));break;case THREE.PathActions.LINE_TO:c.push(new THREE.Vector2(f[0],f[1]));break;case THREE.PathActions.QUADRATIC_CURVE_TO:g=f[2];i=f[3];l=f[0];p=f[1];0<c.length?(h=c[c.length-1],t=h.x,
s=h.y):(h=this.actions[d-1].args,t=h[h.length-2],s=h[h.length-1]);for(f=1;f<=a;f++)q=f/a,h=THREE.Shape.Utils.b2(q,t,l,g),q=THREE.Shape.Utils.b2(q,s,p,i),c.push(new THREE.Vector2(h,q));break;case THREE.PathActions.BEZIER_CURVE_TO:g=f[4];i=f[5];l=f[0];p=f[1];k=f[2];m=f[3];0<c.length?(h=c[c.length-1],t=h.x,s=h.y):(h=this.actions[d-1].args,t=h[h.length-2],s=h[h.length-1]);for(f=1;f<=a;f++)q=f/a,h=THREE.Shape.Utils.b3(q,t,l,k,g),q=THREE.Shape.Utils.b3(q,s,p,m,i),c.push(new THREE.Vector2(h,q));break;case THREE.PathActions.CSPLINE_THRU:h=
this.actions[d-1].args;q=[new THREE.Vector2(h[h.length-2],h[h.length-1])];h=a*f[0].length;q=q.concat(f[0]);q=new THREE.SplineCurve(q);for(f=1;f<=h;f++)c.push(q.getPointAt(f/h));break;case THREE.PathActions.ARC:g=f[0];i=f[1];p=f[2];k=f[3];h=f[4];l=!!f[5];t=h-k;s=2*a;for(f=1;f<=s;f++)q=f/s,l||(q=1-q),q=k+q*t,h=g+p*Math.cos(q),q=i+p*Math.sin(q),c.push(new THREE.Vector2(h,q));break;case THREE.PathActions.ELLIPSE:g=f[0];i=f[1];p=f[2];m=f[3];k=f[4];h=f[5];l=!!f[6];t=h-k;s=2*a;for(f=1;f<=s;f++)q=f/s,l||
(q=1-q),q=k+q*t,h=g+p*Math.cos(q),q=i+m*Math.sin(q),c.push(new THREE.Vector2(h,q))}d=c[c.length-1];1E-10>Math.abs(d.x-c[0].x)&&1E-10>Math.abs(d.y-c[0].y)&&c.splice(c.length-1,1);b&&c.push(c[0]);return c};
THREE.Path.prototype.toShapes=function(a){var b,c,d,e,f=[],h=new THREE.Path;b=0;for(c=this.actions.length;b<c;b++)d=this.actions[b],e=d.args,d=d.action,d==THREE.PathActions.MOVE_TO&&0!=h.actions.length&&(f.push(h),h=new THREE.Path),h[d].apply(h,e);0!=h.actions.length&&f.push(h);if(0==f.length)return[];var g;e=[];if(1==f.length)return d=f[0],g=new THREE.Shape,g.actions=d.actions,g.curves=d.curves,e.push(g),e;b=!THREE.Shape.Utils.isClockWise(f[0].getPoints());if(a?!b:b){g=new THREE.Shape;b=0;for(c=
f.length;b<c;b++)d=f[b],h=THREE.Shape.Utils.isClockWise(d.getPoints()),(h=a?!h:h)?(g.actions=d.actions,g.curves=d.curves,e.push(g),g=new THREE.Shape):g.holes.push(d)}else{g=void 0;b=0;for(c=f.length;b<c;b++)d=f[b],h=THREE.Shape.Utils.isClockWise(d.getPoints()),(h=a?!h:h)?(g&&e.push(g),g=new THREE.Shape,g.actions=d.actions,g.curves=d.curves):g.holes.push(d);e.push(g)}return e};THREE.Shape=function(){THREE.Path.apply(this,arguments);this.holes=[]};THREE.Shape.prototype=Object.create(THREE.Path.prototype);THREE.Shape.prototype.extrude=function(a){return new THREE.ExtrudeGeometry(this,a)};THREE.Shape.prototype.makeGeometry=function(a){return new THREE.ShapeGeometry(this,a)};THREE.Shape.prototype.getPointsHoles=function(a){var b,c=this.holes.length,d=[];for(b=0;b<c;b++)d[b]=this.holes[b].getTransformedPoints(a,this.bends);return d};
THREE.Shape.prototype.getSpacedPointsHoles=function(a){var b,c=this.holes.length,d=[];for(b=0;b<c;b++)d[b]=this.holes[b].getTransformedSpacedPoints(a,this.bends);return d};THREE.Shape.prototype.extractAllPoints=function(a){return{shape:this.getTransformedPoints(a),holes:this.getPointsHoles(a)}};THREE.Shape.prototype.extractPoints=function(a){return this.useSpacedPoints?this.extractAllSpacedPoints(a):this.extractAllPoints(a)};
THREE.Shape.prototype.extractAllSpacedPoints=function(a){return{shape:this.getTransformedSpacedPoints(a),holes:this.getSpacedPointsHoles(a)}};
THREE.Shape.Utils={removeHoles:function(a,b){var c=a.concat(),d=c.concat(),e,f,h,g,i,k,m,l,p,t,s=[];for(i=0;i<b.length;i++){k=b[i];Array.prototype.push.apply(d,k);f=Number.POSITIVE_INFINITY;for(e=0;e<k.length;e++){p=k[e];t=[];for(l=0;l<c.length;l++)m=c[l],m=p.distanceToSquared(m),t.push(m),m<f&&(f=m,h=e,g=l)}e=0<=g-1?g-1:c.length-1;f=0<=h-1?h-1:k.length-1;var q=[k[h],c[g],c[e]];l=THREE.FontUtils.Triangulate.area(q);var n=[k[h],k[f],c[g]];p=THREE.FontUtils.Triangulate.area(n);t=g;m=h;g+=1;h+=-1;0>
g&&(g+=c.length);g%=c.length;0>h&&(h+=k.length);h%=k.length;e=0<=g-1?g-1:c.length-1;f=0<=h-1?h-1:k.length-1;q=[k[h],c[g],c[e]];q=THREE.FontUtils.Triangulate.area(q);n=[k[h],k[f],c[g]];n=THREE.FontUtils.Triangulate.area(n);l+p>q+n&&(g=t,h=m,0>g&&(g+=c.length),g%=c.length,0>h&&(h+=k.length),h%=k.length,e=0<=g-1?g-1:c.length-1,f=0<=h-1?h-1:k.length-1);l=c.slice(0,g);p=c.slice(g);t=k.slice(h);m=k.slice(0,h);f=[k[h],k[f],c[g]];s.push([k[h],c[g],c[e]]);s.push(f);c=l.concat(t).concat(m).concat(p)}return{shape:c,
isolatedPts:s,allpoints:d}},triangulateShape:function(a,b){var c=THREE.Shape.Utils.removeHoles(a,b),d=c.allpoints,e=c.isolatedPts,c=THREE.FontUtils.Triangulate(c.shape,!1),f,h,g,i,k={};f=0;for(h=d.length;f<h;f++)i=d[f].x+":"+d[f].y,void 0!==k[i]&&console.log("Duplicate point",i),k[i]=f;f=0;for(h=c.length;f<h;f++){g=c[f];for(d=0;3>d;d++)i=g[d].x+":"+g[d].y,i=k[i],void 0!==i&&(g[d]=i)}f=0;for(h=e.length;f<h;f++){g=e[f];for(d=0;3>d;d++)i=g[d].x+":"+g[d].y,i=k[i],void 0!==i&&(g[d]=i)}return c.concat(e)},
isClockWise:function(a){return 0>THREE.FontUtils.Triangulate.area(a)},b2p0:function(a,b){var c=1-a;return c*c*b},b2p1:function(a,b){return 2*(1-a)*a*b},b2p2:function(a,b){return a*a*b},b2:function(a,b,c,d){return this.b2p0(a,b)+this.b2p1(a,c)+this.b2p2(a,d)},b3p0:function(a,b){var c=1-a;return c*c*c*b},b3p1:function(a,b){var c=1-a;return 3*c*c*a*b},b3p2:function(a,b){return 3*(1-a)*a*a*b},b3p3:function(a,b){return a*a*a*b},b3:function(a,b,c,d,e){return this.b3p0(a,b)+this.b3p1(a,c)+this.b3p2(a,d)+
this.b3p3(a,e)}};THREE.LineCurve=function(a,b){this.v1=a;this.v2=b};THREE.LineCurve.prototype=Object.create(THREE.Curve.prototype);THREE.LineCurve.prototype.getPoint=function(a){var b=this.v2.clone().sub(this.v1);b.multiplyScalar(a).add(this.v1);return b};THREE.LineCurve.prototype.getPointAt=function(a){return this.getPoint(a)};THREE.LineCurve.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()};THREE.QuadraticBezierCurve=function(a,b,c){this.v0=a;this.v1=b;this.v2=c};THREE.QuadraticBezierCurve.prototype=Object.create(THREE.Curve.prototype);THREE.QuadraticBezierCurve.prototype.getPoint=function(a){var b;b=THREE.Shape.Utils.b2(a,this.v0.x,this.v1.x,this.v2.x);a=THREE.Shape.Utils.b2(a,this.v0.y,this.v1.y,this.v2.y);return new THREE.Vector2(b,a)};
THREE.QuadraticBezierCurve.prototype.getTangent=function(a){var b;b=THREE.Curve.Utils.tangentQuadraticBezier(a,this.v0.x,this.v1.x,this.v2.x);a=THREE.Curve.Utils.tangentQuadraticBezier(a,this.v0.y,this.v1.y,this.v2.y);b=new THREE.Vector2(b,a);b.normalize();return b};THREE.CubicBezierCurve=function(a,b,c,d){this.v0=a;this.v1=b;this.v2=c;this.v3=d};THREE.CubicBezierCurve.prototype=Object.create(THREE.Curve.prototype);THREE.CubicBezierCurve.prototype.getPoint=function(a){var b;b=THREE.Shape.Utils.b3(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x);a=THREE.Shape.Utils.b3(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y);return new THREE.Vector2(b,a)};
THREE.CubicBezierCurve.prototype.getTangent=function(a){var b;b=THREE.Curve.Utils.tangentCubicBezier(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x);a=THREE.Curve.Utils.tangentCubicBezier(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y);b=new THREE.Vector2(b,a);b.normalize();return b};THREE.SplineCurve=function(a){this.points=void 0==a?[]:a};THREE.SplineCurve.prototype=Object.create(THREE.Curve.prototype);THREE.SplineCurve.prototype.getPoint=function(a){var b=new THREE.Vector2,c=[],d=this.points,e;e=(d.length-1)*a;a=Math.floor(e);e-=a;c[0]=0==a?a:a-1;c[1]=a;c[2]=a>d.length-2?d.length-1:a+1;c[3]=a>d.length-3?d.length-1:a+2;b.x=THREE.Curve.Utils.interpolate(d[c[0]].x,d[c[1]].x,d[c[2]].x,d[c[3]].x,e);b.y=THREE.Curve.Utils.interpolate(d[c[0]].y,d[c[1]].y,d[c[2]].y,d[c[3]].y,e);return b};THREE.EllipseCurve=function(a,b,c,d,e,f,h){this.aX=a;this.aY=b;this.xRadius=c;this.yRadius=d;this.aStartAngle=e;this.aEndAngle=f;this.aClockwise=h};THREE.EllipseCurve.prototype=Object.create(THREE.Curve.prototype);
THREE.EllipseCurve.prototype.getPoint=function(a){var b;b=this.aEndAngle-this.aStartAngle;0>b&&(b+=2*Math.PI);b>2*Math.PI&&(b-=2*Math.PI);b=!0===this.aClockwise?this.aEndAngle+(1-a)*(2*Math.PI-b):this.aStartAngle+a*b;a=this.aX+this.xRadius*Math.cos(b);b=this.aY+this.yRadius*Math.sin(b);return new THREE.Vector2(a,b)};THREE.ArcCurve=function(a,b,c,d,e,f){THREE.EllipseCurve.call(this,a,b,c,c,d,e,f)};THREE.ArcCurve.prototype=Object.create(THREE.EllipseCurve.prototype);THREE.LineCurve3=THREE.Curve.create(function(a,b){this.v1=a;this.v2=b},function(a){var b=new THREE.Vector3;b.subVectors(this.v2,this.v1);b.multiplyScalar(a);b.add(this.v1);return b});THREE.QuadraticBezierCurve3=THREE.Curve.create(function(a,b,c){this.v0=a;this.v1=b;this.v2=c},function(a){var b,c;b=THREE.Shape.Utils.b2(a,this.v0.x,this.v1.x,this.v2.x);c=THREE.Shape.Utils.b2(a,this.v0.y,this.v1.y,this.v2.y);a=THREE.Shape.Utils.b2(a,this.v0.z,this.v1.z,this.v2.z);return new THREE.Vector3(b,c,a)});THREE.CubicBezierCurve3=THREE.Curve.create(function(a,b,c,d){this.v0=a;this.v1=b;this.v2=c;this.v3=d},function(a){var b,c;b=THREE.Shape.Utils.b3(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x);c=THREE.Shape.Utils.b3(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y);a=THREE.Shape.Utils.b3(a,this.v0.z,this.v1.z,this.v2.z,this.v3.z);return new THREE.Vector3(b,c,a)});THREE.SplineCurve3=THREE.Curve.create(function(a){this.points=void 0==a?[]:a},function(a){var b=new THREE.Vector3,c=[],d=this.points,e,a=(d.length-1)*a;e=Math.floor(a);a-=e;c[0]=0==e?e:e-1;c[1]=e;c[2]=e>d.length-2?d.length-1:e+1;c[3]=e>d.length-3?d.length-1:e+2;e=d[c[0]];var f=d[c[1]],h=d[c[2]],c=d[c[3]];b.x=THREE.Curve.Utils.interpolate(e.x,f.x,h.x,c.x,a);b.y=THREE.Curve.Utils.interpolate(e.y,f.y,h.y,c.y,a);b.z=THREE.Curve.Utils.interpolate(e.z,f.z,h.z,c.z,a);return b});THREE.ClosedSplineCurve3=THREE.Curve.create(function(a){this.points=void 0==a?[]:a},function(a){var b=new THREE.Vector3,c=[],d=this.points,e;e=(d.length-0)*a;a=Math.floor(e);e-=a;a+=0<a?0:(Math.floor(Math.abs(a)/d.length)+1)*d.length;c[0]=(a-1)%d.length;c[1]=a%d.length;c[2]=(a+1)%d.length;c[3]=(a+2)%d.length;b.x=THREE.Curve.Utils.interpolate(d[c[0]].x,d[c[1]].x,d[c[2]].x,d[c[3]].x,e);b.y=THREE.Curve.Utils.interpolate(d[c[0]].y,d[c[1]].y,d[c[2]].y,d[c[3]].y,e);b.z=THREE.Curve.Utils.interpolate(d[c[0]].z,
d[c[1]].z,d[c[2]].z,d[c[3]].z,e);return b});THREE.AnimationHandler=function(){var a=[],b={},c={update:function(b){for(var c=0;c<a.length;c++)a[c].update(b)},addToUpdate:function(b){-1===a.indexOf(b)&&a.push(b)},removeFromUpdate:function(b){b=a.indexOf(b);-1!==b&&a.splice(b,1)},add:function(a){void 0!==b[a.name]&&console.log("THREE.AnimationHandler.add: Warning! "+a.name+" already exists in library. Overwriting.");b[a.name]=a;if(!0!==a.initialized){for(var c=0;c<a.hierarchy.length;c++){for(var d=0;d<a.hierarchy[c].keys.length;d++)if(0>a.hierarchy[c].keys[d].time&&
(a.hierarchy[c].keys[d].time=0),void 0!==a.hierarchy[c].keys[d].rot&&!(a.hierarchy[c].keys[d].rot instanceof THREE.Quaternion)){var g=a.hierarchy[c].keys[d].rot;a.hierarchy[c].keys[d].rot=new THREE.Quaternion(g[0],g[1],g[2],g[3])}if(a.hierarchy[c].keys.length&&void 0!==a.hierarchy[c].keys[0].morphTargets){g={};for(d=0;d<a.hierarchy[c].keys.length;d++)for(var i=0;i<a.hierarchy[c].keys[d].morphTargets.length;i++){var k=a.hierarchy[c].keys[d].morphTargets[i];g[k]=-1}a.hierarchy[c].usedMorphTargets=g;
for(d=0;d<a.hierarchy[c].keys.length;d++){var m={};for(k in g){for(i=0;i<a.hierarchy[c].keys[d].morphTargets.length;i++)if(a.hierarchy[c].keys[d].morphTargets[i]===k){m[k]=a.hierarchy[c].keys[d].morphTargetsInfluences[i];break}i===a.hierarchy[c].keys[d].morphTargets.length&&(m[k]=0)}a.hierarchy[c].keys[d].morphTargetsInfluences=m}}for(d=1;d<a.hierarchy[c].keys.length;d++)a.hierarchy[c].keys[d].time===a.hierarchy[c].keys[d-1].time&&(a.hierarchy[c].keys.splice(d,1),d--);for(d=0;d<a.hierarchy[c].keys.length;d++)a.hierarchy[c].keys[d].index=
d}d=parseInt(a.length*a.fps,10);a.JIT={};a.JIT.hierarchy=[];for(c=0;c<a.hierarchy.length;c++)a.JIT.hierarchy.push(Array(d));a.initialized=!0}},get:function(a){if("string"===typeof a){if(b[a])return b[a];console.log("THREE.AnimationHandler.get: Couldn't find animation "+a);return null}},parse:function(a){var b=[];if(a instanceof THREE.SkinnedMesh)for(var c=0;c<a.bones.length;c++)b.push(a.bones[c]);else d(a,b);return b}},d=function(a,b){b.push(a);for(var c=0;c<a.children.length;c++)d(a.children[c],
b)};c.LINEAR=0;c.CATMULLROM=1;c.CATMULLROM_FORWARD=2;return c}();THREE.Animation=function(a,b,c){this.root=a;this.data=THREE.AnimationHandler.get(b);this.hierarchy=THREE.AnimationHandler.parse(a);this.currentTime=0;this.timeScale=1;this.isPlaying=!1;this.loop=this.isPaused=!0;this.interpolationType=void 0!==c?c:THREE.AnimationHandler.LINEAR;this.points=[];this.target=new THREE.Vector3};
THREE.Animation.prototype.play=function(a,b){if(!1===this.isPlaying){this.isPlaying=!0;this.loop=void 0!==a?a:!0;this.currentTime=void 0!==b?b:0;var c,d=this.hierarchy.length,e;for(c=0;c<d;c++){e=this.hierarchy[c];e.matrixAutoUpdate=!0;void 0===e.animationCache&&(e.animationCache={},e.animationCache.prevKey={pos:0,rot:0,scl:0},e.animationCache.nextKey={pos:0,rot:0,scl:0},e.animationCache.originalMatrix=e instanceof THREE.Bone?e.skinMatrix:e.matrix);var f=e.animationCache.prevKey;e=e.animationCache.nextKey;
f.pos=this.data.hierarchy[c].keys[0];f.rot=this.data.hierarchy[c].keys[0];f.scl=this.data.hierarchy[c].keys[0];e.pos=this.getNextKeyWith("pos",c,1);e.rot=this.getNextKeyWith("rot",c,1);e.scl=this.getNextKeyWith("scl",c,1)}this.update(0)}this.isPaused=!1;THREE.AnimationHandler.addToUpdate(this)};THREE.Animation.prototype.pause=function(){!0===this.isPaused?THREE.AnimationHandler.addToUpdate(this):THREE.AnimationHandler.removeFromUpdate(this);this.isPaused=!this.isPaused};
THREE.Animation.prototype.stop=function(){this.isPaused=this.isPlaying=!1;THREE.AnimationHandler.removeFromUpdate(this)};
THREE.Animation.prototype.update=function(a){if(!1!==this.isPlaying){var b=["pos","rot","scl"],c,d,e,f,h,g,i,k,m;for(m=this.currentTime+=a*this.timeScale;this.currentTime>this.data.length;)this.currentTime-=this.data.length;k=this.currentTime%=this.data.length;parseInt(Math.min(k*this.data.fps,this.data.length*this.data.fps),10);for(var l=0,p=this.hierarchy.length;l<p;l++){a=this.hierarchy[l];i=a.animationCache;for(var t=0;3>t;t++){c=b[t];h=i.prevKey[c];g=i.nextKey[c];if(g.time<=m){if(k<=m)if(this.loop){h=
this.data.hierarchy[l].keys[0];for(g=this.getNextKeyWith(c,l,1);null!==g&&g.time<k&&g.index>h.index;)h=g,g=this.getNextKeyWith(c,l,g.index+1)}else{this.stop();return}else{do h=g,g=this.getNextKeyWith(c,l,g.index+1);while(null!==g&&g.time<k&&g.index>h.index)}i.prevKey[c]=h;i.nextKey[c]=g}a.matrixAutoUpdate=!0;a.matrixWorldNeedsUpdate=!0;d=(k-h.time)/(g.time-h.time);e=h[c];f=g[c];if(0>d||1<d)console.log("THREE.Animation.update: Warning! Scale out of bounds:"+d+" on bone "+l),d=0>d?0:1;if("pos"===c)if(c=
a.position,this.interpolationType===THREE.AnimationHandler.LINEAR)c.x=e[0]+(f[0]-e[0])*d,c.y=e[1]+(f[1]-e[1])*d,c.z=e[2]+(f[2]-e[2])*d;else{if(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD)this.points[0]=this.getPrevKeyWith("pos",l,h.index-1).pos,this.points[1]=e,this.points[2]=f,this.points[3]=this.getNextKeyWith("pos",l,g.index+1).pos,d=0.33*d+0.33,e=this.interpolateCatmullRom(this.points,d),c.x=e[0],c.y=e[1],c.z=e[2],
this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD&&(d=this.interpolateCatmullRom(this.points,1.01*d),this.target.set(d[0],d[1],d[2]),this.target.sub(c),this.target.y=0,this.target.normalize(),d=Math.atan2(this.target.x,this.target.z),a.rotation.set(0,d,0))}else"rot"===c?THREE.Quaternion.slerp(e,f,a.quaternion,d):"scl"===c&&(c=a.scale,c.x=e[0]+(f[0]-e[0])*d,c.y=e[1]+(f[1]-e[1])*d,c.z=e[2]+(f[2]-e[2])*d)}}}};
THREE.Animation.prototype.interpolateCatmullRom=function(a,b){var c=[],d=[],e,f,h,g,i,k;e=(a.length-1)*b;f=Math.floor(e);e-=f;c[0]=0===f?f:f-1;c[1]=f;c[2]=f>a.length-2?f:f+1;c[3]=f>a.length-3?f:f+2;f=a[c[0]];g=a[c[1]];i=a[c[2]];k=a[c[3]];c=e*e;h=e*c;d[0]=this.interpolate(f[0],g[0],i[0],k[0],e,c,h);d[1]=this.interpolate(f[1],g[1],i[1],k[1],e,c,h);d[2]=this.interpolate(f[2],g[2],i[2],k[2],e,c,h);return d};
THREE.Animation.prototype.interpolate=function(a,b,c,d,e,f,h){a=0.5*(c-a);d=0.5*(d-b);return(2*(b-c)+a+d)*h+(-3*(b-c)-2*a-d)*f+a*e+b};THREE.Animation.prototype.getNextKeyWith=function(a,b,c){for(var d=this.data.hierarchy[b].keys,c=this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?c<d.length-1?c:d.length-1:c%d.length;c<d.length;c++)if(void 0!==d[c][a])return d[c];return this.data.hierarchy[b].keys[0]};
THREE.Animation.prototype.getPrevKeyWith=function(a,b,c){for(var d=this.data.hierarchy[b].keys,c=this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?0<c?c:0:0<=c?c:c+d.length;0<=c;c--)if(void 0!==d[c][a])return d[c];return this.data.hierarchy[b].keys[d.length-1]};THREE.KeyFrameAnimation=function(a,b,c){this.root=a;this.data=THREE.AnimationHandler.get(b);this.hierarchy=THREE.AnimationHandler.parse(a);this.currentTime=0;this.timeScale=0.001;this.isPlaying=!1;this.loop=this.isPaused=!0;this.JITCompile=void 0!==c?c:!0;a=0;for(b=this.hierarchy.length;a<b;a++){var c=this.data.hierarchy[a].sids,d=this.hierarchy[a];if(this.data.hierarchy[a].keys.length&&c){for(var e=0;e<c.length;e++){var f=c[e],h=this.getNextKeyWith(f,a,0);h&&h.apply(f)}d.matrixAutoUpdate=!1;this.data.hierarchy[a].node.updateMatrix();
d.matrixWorldNeedsUpdate=!0}}};
THREE.KeyFrameAnimation.prototype.play=function(a,b){if(!this.isPlaying){this.isPlaying=!0;this.loop=void 0!==a?a:!0;this.currentTime=void 0!==b?b:0;this.startTimeMs=b;this.startTime=1E7;this.endTime=-this.startTime;var c,d=this.hierarchy.length,e,f;for(c=0;c<d;c++)e=this.hierarchy[c],f=this.data.hierarchy[c],void 0===f.animationCache&&(f.animationCache={},f.animationCache.prevKey=null,f.animationCache.nextKey=null,f.animationCache.originalMatrix=e instanceof THREE.Bone?e.skinMatrix:e.matrix),e=this.data.hierarchy[c].keys,
e.length&&(f.animationCache.prevKey=e[0],f.animationCache.nextKey=e[1],this.startTime=Math.min(e[0].time,this.startTime),this.endTime=Math.max(e[e.length-1].time,this.endTime));this.update(0)}this.isPaused=!1;THREE.AnimationHandler.addToUpdate(this)};THREE.KeyFrameAnimation.prototype.pause=function(){this.isPaused?THREE.AnimationHandler.addToUpdate(this):THREE.AnimationHandler.removeFromUpdate(this);this.isPaused=!this.isPaused};
THREE.KeyFrameAnimation.prototype.stop=function(){this.isPaused=this.isPlaying=!1;THREE.AnimationHandler.removeFromUpdate(this);for(var a=0;a<this.data.hierarchy.length;a++){var b=this.hierarchy[a],c=this.data.hierarchy[a];if(void 0!==c.animationCache){var d=c.animationCache.originalMatrix;b instanceof THREE.Bone?(d.copy(b.skinMatrix),b.skinMatrix=d):(d.copy(b.matrix),b.matrix=d);delete c.animationCache}}};
THREE.KeyFrameAnimation.prototype.update=function(a){if(this.isPlaying){var b,c,d,e,f=this.data.JIT.hierarchy,h,g,i;g=this.currentTime+=a*this.timeScale;h=this.currentTime%=this.data.length;h<this.startTimeMs&&(h=this.currentTime=this.startTimeMs+h);e=parseInt(Math.min(h*this.data.fps,this.data.length*this.data.fps),10);if((i=h<g)&&!this.loop){for(var a=0,k=this.hierarchy.length;a<k;a++){var m=this.data.hierarchy[a].keys,f=this.data.hierarchy[a].sids;d=m.length-1;e=this.hierarchy[a];if(m.length){for(m=
0;m<f.length;m++)h=f[m],(g=this.getPrevKeyWith(h,a,d))&&g.apply(h);this.data.hierarchy[a].node.updateMatrix();e.matrixWorldNeedsUpdate=!0}}this.stop()}else if(!(h<this.startTime)){a=0;for(k=this.hierarchy.length;a<k;a++){d=this.hierarchy[a];b=this.data.hierarchy[a];var m=b.keys,l=b.animationCache;if(this.JITCompile&&void 0!==f[a][e])d instanceof THREE.Bone?(d.skinMatrix=f[a][e],d.matrixWorldNeedsUpdate=!1):(d.matrix=f[a][e],d.matrixWorldNeedsUpdate=!0);else if(m.length){this.JITCompile&&l&&(d instanceof
THREE.Bone?d.skinMatrix=l.originalMatrix:d.matrix=l.originalMatrix);b=l.prevKey;c=l.nextKey;if(b&&c){if(c.time<=g){if(i&&this.loop){b=m[0];for(c=m[1];c.time<h;)b=c,c=m[b.index+1]}else if(!i)for(var p=m.length-1;c.time<h&&c.index!==p;)b=c,c=m[b.index+1];l.prevKey=b;l.nextKey=c}c.time>=h?b.interpolate(c,h):b.interpolate(c,c.time)}this.data.hierarchy[a].node.updateMatrix();d.matrixWorldNeedsUpdate=!0}}if(this.JITCompile&&void 0===f[0][e]){this.hierarchy[0].updateMatrixWorld(!0);for(a=0;a<this.hierarchy.length;a++)f[a][e]=
this.hierarchy[a]instanceof THREE.Bone?this.hierarchy[a].skinMatrix.clone():this.hierarchy[a].matrix.clone()}}}};THREE.KeyFrameAnimation.prototype.getNextKeyWith=function(a,b,c){b=this.data.hierarchy[b].keys;for(c%=b.length;c<b.length;c++)if(b[c].hasTarget(a))return b[c];return b[0]};THREE.KeyFrameAnimation.prototype.getPrevKeyWith=function(a,b,c){b=this.data.hierarchy[b].keys;for(c=0<=c?c:c+b.length;0<=c;c--)if(b[c].hasTarget(a))return b[c];return b[b.length-1]};THREE.CubeCamera=function(a,b,c){THREE.Object3D.call(this);var d=new THREE.PerspectiveCamera(90,1,a,b);d.up.set(0,-1,0);d.lookAt(new THREE.Vector3(1,0,0));this.add(d);var e=new THREE.PerspectiveCamera(90,1,a,b);e.up.set(0,-1,0);e.lookAt(new THREE.Vector3(-1,0,0));this.add(e);var f=new THREE.PerspectiveCamera(90,1,a,b);f.up.set(0,0,1);f.lookAt(new THREE.Vector3(0,1,0));this.add(f);var h=new THREE.PerspectiveCamera(90,1,a,b);h.up.set(0,0,-1);h.lookAt(new THREE.Vector3(0,-1,0));this.add(h);var g=new THREE.PerspectiveCamera(90,
1,a,b);g.up.set(0,-1,0);g.lookAt(new THREE.Vector3(0,0,1));this.add(g);var i=new THREE.PerspectiveCamera(90,1,a,b);i.up.set(0,-1,0);i.lookAt(new THREE.Vector3(0,0,-1));this.add(i);this.renderTarget=new THREE.WebGLRenderTargetCube(c,c,{format:THREE.RGBFormat,magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter});this.updateCubeMap=function(a,b){var c=this.renderTarget,p=c.generateMipmaps;c.generateMipmaps=!1;c.activeCubeFace=0;a.render(b,d,c);c.activeCubeFace=1;a.render(b,e,c);c.activeCubeFace=
2;a.render(b,f,c);c.activeCubeFace=3;a.render(b,h,c);c.activeCubeFace=4;a.render(b,g,c);c.generateMipmaps=p;c.activeCubeFace=5;a.render(b,i,c)}};THREE.CubeCamera.prototype=Object.create(THREE.Object3D.prototype);THREE.CombinedCamera=function(a,b,c,d,e,f,h){THREE.Camera.call(this);this.fov=c;this.left=-a/2;this.right=a/2;this.top=b/2;this.bottom=-b/2;this.cameraO=new THREE.OrthographicCamera(a/-2,a/2,b/2,b/-2,f,h);this.cameraP=new THREE.PerspectiveCamera(c,a/b,d,e);this.zoom=1;this.toPerspective()};THREE.CombinedCamera.prototype=Object.create(THREE.Camera.prototype);
THREE.CombinedCamera.prototype.toPerspective=function(){this.near=this.cameraP.near;this.far=this.cameraP.far;this.cameraP.fov=this.fov/this.zoom;this.cameraP.updateProjectionMatrix();this.projectionMatrix=this.cameraP.projectionMatrix;this.inPerspectiveMode=!0;this.inOrthographicMode=!1};
THREE.CombinedCamera.prototype.toOrthographic=function(){var a=this.cameraP.aspect,b=(this.cameraP.near+this.cameraP.far)/2,b=Math.tan(this.fov/2)*b,a=2*b*a/2,b=b/this.zoom,a=a/this.zoom;this.cameraO.left=-a;this.cameraO.right=a;this.cameraO.top=b;this.cameraO.bottom=-b;this.cameraO.updateProjectionMatrix();this.near=this.cameraO.near;this.far=this.cameraO.far;this.projectionMatrix=this.cameraO.projectionMatrix;this.inPerspectiveMode=!1;this.inOrthographicMode=!0};
THREE.CombinedCamera.prototype.setSize=function(a,b){this.cameraP.aspect=a/b;this.left=-a/2;this.right=a/2;this.top=b/2;this.bottom=-b/2};THREE.CombinedCamera.prototype.setFov=function(a){this.fov=a;this.inPerspectiveMode?this.toPerspective():this.toOrthographic()};THREE.CombinedCamera.prototype.updateProjectionMatrix=function(){this.inPerspectiveMode?this.toPerspective():(this.toPerspective(),this.toOrthographic())};
THREE.CombinedCamera.prototype.setLens=function(a,b){void 0===b&&(b=24);var c=2*THREE.Math.radToDeg(Math.atan(b/(2*a)));this.setFov(c);return c};THREE.CombinedCamera.prototype.setZoom=function(a){this.zoom=a;this.inPerspectiveMode?this.toPerspective():this.toOrthographic()};THREE.CombinedCamera.prototype.toFrontView=function(){this.rotation.x=0;this.rotation.y=0;this.rotation.z=0;this.rotationAutoUpdate=!1};
THREE.CombinedCamera.prototype.toBackView=function(){this.rotation.x=0;this.rotation.y=Math.PI;this.rotation.z=0;this.rotationAutoUpdate=!1};THREE.CombinedCamera.prototype.toLeftView=function(){this.rotation.x=0;this.rotation.y=-Math.PI/2;this.rotation.z=0;this.rotationAutoUpdate=!1};THREE.CombinedCamera.prototype.toRightView=function(){this.rotation.x=0;this.rotation.y=Math.PI/2;this.rotation.z=0;this.rotationAutoUpdate=!1};
THREE.CombinedCamera.prototype.toTopView=function(){this.rotation.x=-Math.PI/2;this.rotation.y=0;this.rotation.z=0;this.rotationAutoUpdate=!1};THREE.CombinedCamera.prototype.toBottomView=function(){this.rotation.x=Math.PI/2;this.rotation.y=0;this.rotation.z=0;this.rotationAutoUpdate=!1};THREE.CircleGeometry=function(a,b,c,d){THREE.Geometry.call(this);this.radius=a=a||50;this.segments=b=void 0!==b?Math.max(3,b):8;this.thetaStart=c=void 0!==c?c:0;this.thetaLength=d=void 0!==d?d:2*Math.PI;var e,f=[];e=new THREE.Vector3;var h=new THREE.Vector2(0.5,0.5);this.vertices.push(e);f.push(h);for(e=0;e<=b;e++){var g=new THREE.Vector3,i=c+e/b*d;g.x=a*Math.cos(i);g.y=a*Math.sin(i);this.vertices.push(g);f.push(new THREE.Vector2((g.x/a+1)/2,(g.y/a+1)/2))}c=new THREE.Vector3(0,0,1);for(e=1;e<=b;e++)this.faces.push(new THREE.Face3(e,
e+1,0,[c.clone(),c.clone(),c.clone()])),this.faceVertexUvs[0].push([f[e].clone(),f[e+1].clone(),h.clone()]);this.computeCentroids();this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,a)};THREE.CircleGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.CubeGeometry=function(a,b,c,d,e,f){function h(a,b,c,d,e,f,h,q){var n,u=g.widthSegments,r=g.heightSegments,v=e/2,z=f/2,G=g.vertices.length;if("x"===a&&"y"===b||"y"===a&&"x"===b)n="z";else if("x"===a&&"z"===b||"z"===a&&"x"===b)n="y",r=g.depthSegments;else if("z"===a&&"y"===b||"y"===a&&"z"===b)n="x",u=g.depthSegments;var w=u+1,y=r+1,E=e/u,A=f/r,K=new THREE.Vector3;K[n]=0<h?1:-1;for(e=0;e<y;e++)for(f=0;f<w;f++){var D=new THREE.Vector3;D[a]=(f*E-v)*c;D[b]=(e*A-z)*d;D[n]=h;g.vertices.push(D)}for(e=
0;e<r;e++)for(f=0;f<u;f++)z=f+w*e,a=f+w*(e+1),b=f+1+w*(e+1),c=f+1+w*e,d=new THREE.Vector2(f/u,1-e/r),h=new THREE.Vector2(f/u,1-(e+1)/r),n=new THREE.Vector2((f+1)/u,1-(e+1)/r),v=new THREE.Vector2((f+1)/u,1-e/r),z=new THREE.Face3(z+G,a+G,c+G),z.normal.copy(K),z.vertexNormals.push(K.clone(),K.clone(),K.clone()),z.materialIndex=q,g.faces.push(z),g.faceVertexUvs[0].push([d,h,v]),z=new THREE.Face3(a+G,b+G,c+G),z.normal.copy(K),z.vertexNormals.push(K.clone(),K.clone(),K.clone()),z.materialIndex=q,g.faces.push(z),
g.faceVertexUvs[0].push([h.clone(),n,v.clone()])}THREE.Geometry.call(this);var g=this;this.width=a;this.height=b;this.depth=c;this.widthSegments=d||1;this.heightSegments=e||1;this.depthSegments=f||1;a=this.width/2;b=this.height/2;c=this.depth/2;h("z","y",-1,-1,this.depth,this.height,a,0);h("z","y",1,-1,this.depth,this.height,-a,1);h("x","z",1,1,this.width,this.depth,b,2);h("x","z",1,-1,this.width,this.depth,-b,3);h("x","y",1,-1,this.width,this.height,c,4);h("x","y",-1,-1,this.width,this.height,-c,
5);this.computeCentroids();this.mergeVertices()};THREE.CubeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.CylinderGeometry=function(a,b,c,d,e,f){THREE.Geometry.call(this);this.radiusTop=a=void 0!==a?a:20;this.radiusBottom=b=void 0!==b?b:20;this.height=c=void 0!==c?c:100;this.radialSegments=d=d||8;this.heightSegments=e=e||1;this.openEnded=f=void 0!==f?f:!1;var h=c/2,g,i,k=[],m=[];for(i=0;i<=e;i++){var l=[],p=[],t=i/e,s=t*(b-a)+a;for(g=0;g<=d;g++){var q=g/d,n=new THREE.Vector3;n.x=s*Math.sin(2*q*Math.PI);n.y=-t*c+h;n.z=s*Math.cos(2*q*Math.PI);this.vertices.push(n);l.push(this.vertices.length-1);p.push(new THREE.Vector2(q,
1-t))}k.push(l);m.push(p)}c=(b-a)/c;for(g=0;g<d;g++){0!==a?(l=this.vertices[k[0][g]].clone(),p=this.vertices[k[0][g+1]].clone()):(l=this.vertices[k[1][g]].clone(),p=this.vertices[k[1][g+1]].clone());l.setY(Math.sqrt(l.x*l.x+l.z*l.z)*c).normalize();p.setY(Math.sqrt(p.x*p.x+p.z*p.z)*c).normalize();for(i=0;i<e;i++){var t=k[i][g],s=k[i+1][g],q=k[i+1][g+1],n=k[i][g+1],u=l.clone(),r=l.clone(),v=p.clone(),z=p.clone(),G=m[i][g].clone(),w=m[i+1][g].clone(),y=m[i+1][g+1].clone(),E=m[i][g+1].clone();this.faces.push(new THREE.Face3(t,
s,n,[u,r,z]));this.faceVertexUvs[0].push([G,w,E]);this.faces.push(new THREE.Face3(s,q,n,[r.clone(),v,z.clone()]));this.faceVertexUvs[0].push([w.clone(),y,E.clone()])}}if(!1===f&&0<a){this.vertices.push(new THREE.Vector3(0,h,0));for(g=0;g<d;g++)t=k[0][g],s=k[0][g+1],q=this.vertices.length-1,u=new THREE.Vector3(0,1,0),r=new THREE.Vector3(0,1,0),v=new THREE.Vector3(0,1,0),G=m[0][g].clone(),w=m[0][g+1].clone(),y=new THREE.Vector2(w.x,0),this.faces.push(new THREE.Face3(t,s,q,[u,r,v])),this.faceVertexUvs[0].push([G,
w,y])}if(!1===f&&0<b){this.vertices.push(new THREE.Vector3(0,-h,0));for(g=0;g<d;g++)t=k[i][g+1],s=k[i][g],q=this.vertices.length-1,u=new THREE.Vector3(0,-1,0),r=new THREE.Vector3(0,-1,0),v=new THREE.Vector3(0,-1,0),G=m[i][g+1].clone(),w=m[i][g].clone(),y=new THREE.Vector2(w.x,1),this.faces.push(new THREE.Face3(t,s,q,[u,r,v])),this.faceVertexUvs[0].push([G,w,y])}this.computeCentroids();this.computeFaceNormals()};THREE.CylinderGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ExtrudeGeometry=function(a,b){"undefined"!==typeof a&&(THREE.Geometry.call(this),a=a instanceof Array?a:[a],this.shapebb=a[a.length-1].getBoundingBox(),this.addShapeList(a,b),this.computeCentroids(),this.computeFaceNormals())};THREE.ExtrudeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ExtrudeGeometry.prototype.addShapeList=function(a,b){for(var c=a.length,d=0;d<c;d++)this.addShape(a[d],b)};
THREE.ExtrudeGeometry.prototype.addShape=function(a,b){function c(a,b,c){b||console.log("die");return b.clone().multiplyScalar(c).add(a)}function d(a,b,c){var d=THREE.ExtrudeGeometry.__v1,e=THREE.ExtrudeGeometry.__v2,f=THREE.ExtrudeGeometry.__v3,g=THREE.ExtrudeGeometry.__v4,h=THREE.ExtrudeGeometry.__v5,i=THREE.ExtrudeGeometry.__v6;d.set(a.x-b.x,a.y-b.y);e.set(a.x-c.x,a.y-c.y);d=d.normalize();e=e.normalize();f.set(-d.y,d.x);g.set(e.y,-e.x);h.copy(a).add(f);i.copy(a).add(g);if(h.equals(i))return g.clone();
h.copy(b).add(f);i.copy(c).add(g);f=d.dot(g);g=i.sub(h).dot(g);0===f&&(console.log("Either infinite or no solutions!"),0===g?console.log("Its finite solutions."):console.log("Too bad, no solutions."));g/=f;return 0>g?(b=Math.atan2(b.y-a.y,b.x-a.x),a=Math.atan2(c.y-a.y,c.x-a.x),b>a&&(a+=2*Math.PI),c=(b+a)/2,a=-Math.cos(c),c=-Math.sin(c),new THREE.Vector2(a,c)):d.multiplyScalar(g).add(h).sub(a).clone()}function e(c,d){var e,f;for(C=c.length;0<=--C;){e=C;f=C-1;0>f&&(f=c.length-1);for(var g=0,h=t+2*m,
g=0;g<h;g++){var i=ca*g,k=ca*(g+1),l=d+e+i,i=d+f+i,n=d+f+k,k=d+e+k,p=c,q=g,s=h,u=e,w=f,l=l+F,i=i+F,n=n+F,k=k+F;D.faces.push(new THREE.Face3(l,i,k,null,null,r));D.faces.push(new THREE.Face3(i,n,k,null,null,r));l=v.generateSideWallUV(D,a,p,b,l,i,n,k,q,s,u,w);D.faceVertexUvs[0].push([l[0],l[1],l[3]]);D.faceVertexUvs[0].push([l[1],l[2],l[3]])}}}function f(a,b,c){D.vertices.push(new THREE.Vector3(a,b,c))}function h(c,d,e,f){c+=F;d+=F;e+=F;D.faces.push(new THREE.Face3(c,d,e,null,null,u));c=f?v.generateBottomUV(D,
a,b,c,d,e):v.generateTopUV(D,a,b,c,d,e);D.faceVertexUvs[0].push(c)}var g=void 0!==b.amount?b.amount:100,i=void 0!==b.bevelThickness?b.bevelThickness:6,k=void 0!==b.bevelSize?b.bevelSize:i-2,m=void 0!==b.bevelSegments?b.bevelSegments:3,l=void 0!==b.bevelEnabled?b.bevelEnabled:!0,p=void 0!==b.curveSegments?b.curveSegments:12,t=void 0!==b.steps?b.steps:1,s=b.extrudePath,q,n=!1,u=b.material,r=b.extrudeMaterial,v=void 0!==b.UVGenerator?b.UVGenerator:THREE.ExtrudeGeometry.WorldUVGenerator,z,G,w,y;s&&(q=
s.getSpacedPoints(t),n=!0,l=!1,z=void 0!==b.frames?b.frames:new THREE.TubeGeometry.FrenetFrames(s,t,!1),G=new THREE.Vector3,w=new THREE.Vector3,y=new THREE.Vector3);l||(k=i=m=0);var E,A,K,D=this,F=this.vertices.length,p=a.extractPoints(p),O=p.shape,p=p.holes;if(s=!THREE.Shape.Utils.isClockWise(O)){O=O.reverse();A=0;for(K=p.length;A<K;A++)E=p[A],THREE.Shape.Utils.isClockWise(E)&&(p[A]=E.reverse());s=!1}var x=THREE.Shape.Utils.triangulateShape(O,p),s=O;A=0;for(K=p.length;A<K;A++)E=p[A],O=O.concat(E);
var I,B,M,J,ca=O.length,na=x.length,pa=[],C=0,Q=s.length;I=Q-1;for(B=C+1;C<Q;C++,I++,B++)I===Q&&(I=0),B===Q&&(B=0),pa[C]=d(s[C],s[I],s[B]);var R=[],L,da=pa.concat();A=0;for(K=p.length;A<K;A++){E=p[A];L=[];C=0;Q=E.length;I=Q-1;for(B=C+1;C<Q;C++,I++,B++)I===Q&&(I=0),B===Q&&(B=0),L[C]=d(E[C],E[I],E[B]);R.push(L);da=da.concat(L)}for(I=0;I<m;I++){E=I/m;M=i*(1-E);B=k*Math.sin(E*Math.PI/2);C=0;for(Q=s.length;C<Q;C++)J=c(s[C],pa[C],B),f(J.x,J.y,-M);A=0;for(K=p.length;A<K;A++){E=p[A];L=R[A];C=0;for(Q=E.length;C<
Q;C++)J=c(E[C],L[C],B),f(J.x,J.y,-M)}}B=k;for(C=0;C<ca;C++)J=l?c(O[C],da[C],B):O[C],n?(w.copy(z.normals[0]).multiplyScalar(J.x),G.copy(z.binormals[0]).multiplyScalar(J.y),y.copy(q[0]).add(w).add(G),f(y.x,y.y,y.z)):f(J.x,J.y,0);for(E=1;E<=t;E++)for(C=0;C<ca;C++)J=l?c(O[C],da[C],B):O[C],n?(w.copy(z.normals[E]).multiplyScalar(J.x),G.copy(z.binormals[E]).multiplyScalar(J.y),y.copy(q[E]).add(w).add(G),f(y.x,y.y,y.z)):f(J.x,J.y,g/t*E);for(I=m-1;0<=I;I--){E=I/m;M=i*(1-E);B=k*Math.sin(E*Math.PI/2);C=0;for(Q=
s.length;C<Q;C++)J=c(s[C],pa[C],B),f(J.x,J.y,g+M);A=0;for(K=p.length;A<K;A++){E=p[A];L=R[A];C=0;for(Q=E.length;C<Q;C++)J=c(E[C],L[C],B),n?f(J.x,J.y+q[t-1].y,q[t-1].x+M):f(J.x,J.y,g+M)}}if(l){i=0*ca;for(C=0;C<na;C++)g=x[C],h(g[2]+i,g[1]+i,g[0]+i,!0);i=ca*(t+2*m);for(C=0;C<na;C++)g=x[C],h(g[0]+i,g[1]+i,g[2]+i,!1)}else{for(C=0;C<na;C++)g=x[C],h(g[2],g[1],g[0],!0);for(C=0;C<na;C++)g=x[C],h(g[0]+ca*t,g[1]+ca*t,g[2]+ca*t,!1)}g=0;e(s,g);g+=s.length;A=0;for(K=p.length;A<K;A++)E=p[A],e(E,g),g+=E.length};
THREE.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(a,b,c,d,e,f){b=a.vertices[e].x;e=a.vertices[e].y;c=a.vertices[f].x;f=a.vertices[f].y;return[new THREE.Vector2(a.vertices[d].x,a.vertices[d].y),new THREE.Vector2(b,e),new THREE.Vector2(c,f)]},generateBottomUV:function(a,b,c,d,e,f){return this.generateTopUV(a,b,c,d,e,f)},generateSideWallUV:function(a,b,c,d,e,f,h,g){var b=a.vertices[e].x,c=a.vertices[e].y,e=a.vertices[e].z,d=a.vertices[f].x,i=a.vertices[f].y,f=a.vertices[f].z,k=a.vertices[h].x,
m=a.vertices[h].y,h=a.vertices[h].z,l=a.vertices[g].x,p=a.vertices[g].y,a=a.vertices[g].z;return 0.01>Math.abs(c-i)?[new THREE.Vector2(b,1-e),new THREE.Vector2(d,1-f),new THREE.Vector2(k,1-h),new THREE.Vector2(l,1-a)]:[new THREE.Vector2(c,1-e),new THREE.Vector2(i,1-f),new THREE.Vector2(m,1-h),new THREE.Vector2(p,1-a)]}};THREE.ExtrudeGeometry.__v1=new THREE.Vector2;THREE.ExtrudeGeometry.__v2=new THREE.Vector2;THREE.ExtrudeGeometry.__v3=new THREE.Vector2;THREE.ExtrudeGeometry.__v4=new THREE.Vector2;
THREE.ExtrudeGeometry.__v5=new THREE.Vector2;THREE.ExtrudeGeometry.__v6=new THREE.Vector2;THREE.ShapeGeometry=function(a,b){THREE.Geometry.call(this);!1===a instanceof Array&&(a=[a]);this.shapebb=a[a.length-1].getBoundingBox();this.addShapeList(a,b);this.computeCentroids();this.computeFaceNormals()};THREE.ShapeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ShapeGeometry.prototype.addShapeList=function(a,b){for(var c=0,d=a.length;c<d;c++)this.addShape(a[c],b);return this};
THREE.ShapeGeometry.prototype.addShape=function(a,b){void 0===b&&(b={});var c=b.material,d=void 0===b.UVGenerator?THREE.ExtrudeGeometry.WorldUVGenerator:b.UVGenerator,e,f,h,g=this.vertices.length;e=a.extractPoints(void 0!==b.curveSegments?b.curveSegments:12);var i=e.shape,k=e.holes;if(!THREE.Shape.Utils.isClockWise(i)){i=i.reverse();e=0;for(f=k.length;e<f;e++)h=k[e],THREE.Shape.Utils.isClockWise(h)&&(k[e]=h.reverse())}var m=THREE.Shape.Utils.triangulateShape(i,k);e=0;for(f=k.length;e<f;e++)h=k[e],
i=i.concat(h);k=i.length;f=m.length;for(e=0;e<k;e++)h=i[e],this.vertices.push(new THREE.Vector3(h.x,h.y,0));for(e=0;e<f;e++)k=m[e],i=k[0]+g,h=k[1]+g,k=k[2]+g,this.faces.push(new THREE.Face3(i,h,k,null,null,c)),this.faceVertexUvs[0].push(d.generateBottomUV(this,a,b,i,h,k))};THREE.LatheGeometry=function(a,b,c,d){THREE.Geometry.call(this);for(var b=b||12,c=c||0,d=d||2*Math.PI,e=1/(a.length-1),f=1/b,h=0,g=b;h<=g;h++)for(var i=c+h*f*d,k=Math.cos(i),m=Math.sin(i),i=0,l=a.length;i<l;i++){var p=a[i],t=new THREE.Vector3;t.x=k*p.x-m*p.y;t.y=m*p.x+k*p.y;t.z=p.z;this.vertices.push(t)}c=a.length;h=0;for(g=b;h<g;h++){i=0;for(l=a.length-1;i<l;i++){var b=m=i+c*h,d=m+c,k=m+1+c,m=m+1,p=h*f,t=i*e,s=p+f,q=t+e;this.faces.push(new THREE.Face3(b,d,m));this.faceVertexUvs[0].push([new THREE.Vector2(p,
t),new THREE.Vector2(s,t),new THREE.Vector2(p,q)]);this.faces.push(new THREE.Face3(d,k,m));this.faceVertexUvs[0].push([new THREE.Vector2(s,t),new THREE.Vector2(s,q),new THREE.Vector2(p,q)])}}this.mergeVertices();this.computeCentroids();this.computeFaceNormals();this.computeVertexNormals()};THREE.LatheGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.PlaneGeometry=function(a,b,c,d){THREE.Geometry.call(this);this.width=a;this.height=b;this.widthSegments=c||1;this.heightSegments=d||1;for(var e=a/2,f=b/2,c=this.widthSegments,d=this.heightSegments,h=c+1,g=d+1,i=this.width/c,k=this.height/d,m=new THREE.Vector3(0,0,1),a=0;a<g;a++)for(b=0;b<h;b++)this.vertices.push(new THREE.Vector3(b*i-e,-(a*k-f),0));for(a=0;a<d;a++)for(b=0;b<c;b++){var l=b+h*a,e=b+h*(a+1),f=b+1+h*(a+1),g=b+1+h*a,i=new THREE.Vector2(b/c,1-a/d),k=new THREE.Vector2(b/c,1-(a+1)/
d),p=new THREE.Vector2((b+1)/c,1-(a+1)/d),t=new THREE.Vector2((b+1)/c,1-a/d),l=new THREE.Face3(l,e,g);l.normal.copy(m);l.vertexNormals.push(m.clone(),m.clone(),m.clone());this.faces.push(l);this.faceVertexUvs[0].push([i,k,t]);l=new THREE.Face3(e,f,g);l.normal.copy(m);l.vertexNormals.push(m.clone(),m.clone(),m.clone());this.faces.push(l);this.faceVertexUvs[0].push([k.clone(),p,t.clone()])}this.computeCentroids()};THREE.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.RingGeometry=function(a,b,c,d,e,f){THREE.Geometry.call(this);for(var a=a||0,b=b||50,e=void 0!==e?e:0,f=void 0!==f?f:2*Math.PI,c=void 0!==c?Math.max(3,c):8,d=void 0!==d?Math.max(3,d):8,h,g=[],i=a,k=(b-a)/d,a=0;a<=d;a++){for(h=0;h<=c;h++){var m=new THREE.Vector3,l=e+h/c*f;m.x=i*Math.cos(l);m.y=i*Math.sin(l);this.vertices.push(m);g.push(new THREE.Vector2((m.x/b+1)/2,(m.y/b+1)/2))}i+=k}b=new THREE.Vector3(0,0,1);for(a=0;a<d;a++){e=a*c;for(h=0;h<=c;h++)l=h+e,f=l+a,k=l+c+a,m=l+c+1+a,this.faces.push(new THREE.Face3(f,
k,m,[b.clone(),b.clone(),b.clone()])),this.faceVertexUvs[0].push([g[f].clone(),g[k].clone(),g[m].clone()]),f=l+a,k=l+c+1+a,m=l+1+a,this.faces.push(new THREE.Face3(f,k,m,[b.clone(),b.clone(),b.clone()])),this.faceVertexUvs[0].push([g[f].clone(),g[k].clone(),g[m].clone()])}this.computeCentroids();this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,i)};THREE.RingGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.SphereGeometry=function(a,b,c,d,e,f,h){THREE.Geometry.call(this);this.radius=a=a||50;this.widthSegments=b=Math.max(3,Math.floor(b)||8);this.heightSegments=c=Math.max(2,Math.floor(c)||6);this.phiStart=d=void 0!==d?d:0;this.phiLength=e=void 0!==e?e:2*Math.PI;this.thetaStart=f=void 0!==f?f:0;this.thetaLength=h=void 0!==h?h:Math.PI;var g,i,k=[],m=[];for(i=0;i<=c;i++){var l=[],p=[];for(g=0;g<=b;g++){var t=g/b,s=i/c,q=new THREE.Vector3;q.x=-a*Math.cos(d+t*e)*Math.sin(f+s*h);q.y=a*Math.cos(f+s*h);
q.z=a*Math.sin(d+t*e)*Math.sin(f+s*h);this.vertices.push(q);l.push(this.vertices.length-1);p.push(new THREE.Vector2(t,1-s))}k.push(l);m.push(p)}for(i=0;i<this.heightSegments;i++)for(g=0;g<this.widthSegments;g++){var b=k[i][g+1],c=k[i][g],d=k[i+1][g],e=k[i+1][g+1],f=this.vertices[b].clone().normalize(),h=this.vertices[c].clone().normalize(),l=this.vertices[d].clone().normalize(),p=this.vertices[e].clone().normalize(),t=m[i][g+1].clone(),s=m[i][g].clone(),q=m[i+1][g].clone(),n=m[i+1][g+1].clone();Math.abs(this.vertices[b].y)===
this.radius?(t.x=(t.x+s.x)/2,this.faces.push(new THREE.Face3(b,d,e,[f,l,p])),this.faceVertexUvs[0].push([t,q,n])):Math.abs(this.vertices[d].y)===this.radius?(q.x=(q.x+n.x)/2,this.faces.push(new THREE.Face3(b,c,d,[f,h,l])),this.faceVertexUvs[0].push([t,s,q])):(this.faces.push(new THREE.Face3(b,c,e,[f,h,p])),this.faceVertexUvs[0].push([t,s,n]),this.faces.push(new THREE.Face3(c,d,e,[h.clone(),l,p.clone()])),this.faceVertexUvs[0].push([s.clone(),q,n.clone()]))}this.computeCentroids();this.computeFaceNormals();
this.boundingSphere=new THREE.Sphere(new THREE.Vector3,a)};THREE.SphereGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TextGeometry=function(a,b){var b=b||{},c=THREE.FontUtils.generateShapes(a,b);b.amount=void 0!==b.height?b.height:50;void 0===b.bevelThickness&&(b.bevelThickness=10);void 0===b.bevelSize&&(b.bevelSize=8);void 0===b.bevelEnabled&&(b.bevelEnabled=!1);THREE.ExtrudeGeometry.call(this,c,b)};THREE.TextGeometry.prototype=Object.create(THREE.ExtrudeGeometry.prototype);THREE.TorusGeometry=function(a,b,c,d,e){THREE.Geometry.call(this);this.radius=a||100;this.tube=b||40;this.radialSegments=c||8;this.tubularSegments=d||6;this.arc=e||2*Math.PI;e=new THREE.Vector3;a=[];b=[];for(c=0;c<=this.radialSegments;c++)for(d=0;d<=this.tubularSegments;d++){var f=d/this.tubularSegments*this.arc,h=2*c/this.radialSegments*Math.PI;e.x=this.radius*Math.cos(f);e.y=this.radius*Math.sin(f);var g=new THREE.Vector3;g.x=(this.radius+this.tube*Math.cos(h))*Math.cos(f);g.y=(this.radius+this.tube*
Math.cos(h))*Math.sin(f);g.z=this.tube*Math.sin(h);this.vertices.push(g);a.push(new THREE.Vector2(d/this.tubularSegments,c/this.radialSegments));b.push(g.clone().sub(e).normalize())}for(c=1;c<=this.radialSegments;c++)for(d=1;d<=this.tubularSegments;d++){var e=(this.tubularSegments+1)*c+d-1,f=(this.tubularSegments+1)*(c-1)+d-1,h=(this.tubularSegments+1)*(c-1)+d,g=(this.tubularSegments+1)*c+d,i=new THREE.Face3(e,f,g,[b[e],b[f],b[g]]);i.normal.add(b[e]);i.normal.add(b[f]);i.normal.add(b[g]);i.normal.normalize();
this.faces.push(i);this.faceVertexUvs[0].push([a[e].clone(),a[f].clone(),a[g].clone()]);i=new THREE.Face3(f,h,g,[b[f],b[h],b[g]]);i.normal.add(b[f]);i.normal.add(b[h]);i.normal.add(b[g]);i.normal.normalize();this.faces.push(i);this.faceVertexUvs[0].push([a[f].clone(),a[h].clone(),a[g].clone()])}this.computeCentroids()};THREE.TorusGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TorusKnotGeometry=function(a,b,c,d,e,f,h){function g(a,b,c,d,e){var f=Math.cos(a),g=Math.sin(a),a=b/c*a,b=Math.cos(a),f=0.5*(d*(2+b))*f,g=0.5*d*(2+b)*g,d=0.5*e*d*Math.sin(a);return new THREE.Vector3(f,g,d)}THREE.Geometry.call(this);this.radius=a||100;this.tube=b||40;this.radialSegments=c||64;this.tubularSegments=d||8;this.p=e||2;this.q=f||3;this.heightScale=h||1;this.grid=Array(this.radialSegments);c=new THREE.Vector3;d=new THREE.Vector3;e=new THREE.Vector3;for(a=0;a<this.radialSegments;++a){this.grid[a]=
Array(this.tubularSegments);b=2*(a/this.radialSegments)*this.p*Math.PI;f=g(b,this.q,this.p,this.radius,this.heightScale);b=g(b+0.01,this.q,this.p,this.radius,this.heightScale);c.subVectors(b,f);d.addVectors(b,f);e.crossVectors(c,d);d.crossVectors(e,c);e.normalize();d.normalize();for(b=0;b<this.tubularSegments;++b){var i=2*(b/this.tubularSegments)*Math.PI,h=-this.tube*Math.cos(i),i=this.tube*Math.sin(i),k=new THREE.Vector3;k.x=f.x+h*d.x+i*e.x;k.y=f.y+h*d.y+i*e.y;k.z=f.z+h*d.z+i*e.z;this.grid[a][b]=
this.vertices.push(k)-1}}for(a=0;a<this.radialSegments;++a)for(b=0;b<this.tubularSegments;++b){var e=(a+1)%this.radialSegments,f=(b+1)%this.tubularSegments,c=this.grid[a][b],d=this.grid[e][b],e=this.grid[e][f],f=this.grid[a][f],h=new THREE.Vector2(a/this.radialSegments,b/this.tubularSegments),i=new THREE.Vector2((a+1)/this.radialSegments,b/this.tubularSegments),k=new THREE.Vector2((a+1)/this.radialSegments,(b+1)/this.tubularSegments),m=new THREE.Vector2(a/this.radialSegments,(b+1)/this.tubularSegments);
this.faces.push(new THREE.Face3(c,d,f));this.faceVertexUvs[0].push([h,i,m]);this.faces.push(new THREE.Face3(d,e,f));this.faceVertexUvs[0].push([i.clone(),k,m.clone()])}this.computeCentroids();this.computeFaceNormals();this.computeVertexNormals()};THREE.TorusKnotGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TubeGeometry=function(a,b,c,d,e){THREE.Geometry.call(this);this.path=a;this.segments=b||64;this.radius=c||1;this.radialSegments=d||8;this.closed=e||!1;this.grid=[];var f,h,d=this.segments+1,g,i,k,e=new THREE.Vector3,m,l,b=new THREE.TubeGeometry.FrenetFrames(this.path,this.segments,this.closed);m=b.normals;l=b.binormals;this.tangents=b.tangents;this.normals=m;this.binormals=l;for(b=0;b<d;b++){this.grid[b]=[];c=b/(d-1);k=a.getPointAt(c);f=m[b];h=l[b];for(c=0;c<this.radialSegments;c++)g=2*(c/this.radialSegments)*
Math.PI,i=-this.radius*Math.cos(g),g=this.radius*Math.sin(g),e.copy(k),e.x+=i*f.x+g*h.x,e.y+=i*f.y+g*h.y,e.z+=i*f.z+g*h.z,this.grid[b][c]=this.vertices.push(new THREE.Vector3(e.x,e.y,e.z))-1}for(b=0;b<this.segments;b++)for(c=0;c<this.radialSegments;c++)e=this.closed?(b+1)%this.segments:b+1,m=(c+1)%this.radialSegments,a=this.grid[b][c],d=this.grid[e][c],e=this.grid[e][m],m=this.grid[b][m],l=new THREE.Vector2(b/this.segments,c/this.radialSegments),f=new THREE.Vector2((b+1)/this.segments,c/this.radialSegments),
h=new THREE.Vector2((b+1)/this.segments,(c+1)/this.radialSegments),i=new THREE.Vector2(b/this.segments,(c+1)/this.radialSegments),this.faces.push(new THREE.Face3(a,d,m)),this.faceVertexUvs[0].push([l,f,i]),this.faces.push(new THREE.Face3(d,e,m)),this.faceVertexUvs[0].push([f.clone(),h,i.clone()]);this.computeCentroids();this.computeFaceNormals();this.computeVertexNormals()};THREE.TubeGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.TubeGeometry.FrenetFrames=function(a,b,c){new THREE.Vector3;var d=new THREE.Vector3;new THREE.Vector3;var e=[],f=[],h=[],g=new THREE.Vector3,i=new THREE.Matrix4,b=b+1,k,m,l;this.tangents=e;this.normals=f;this.binormals=h;for(k=0;k<b;k++)m=k/(b-1),e[k]=a.getTangentAt(m),e[k].normalize();f[0]=new THREE.Vector3;h[0]=new THREE.Vector3;a=Number.MAX_VALUE;k=Math.abs(e[0].x);m=Math.abs(e[0].y);l=Math.abs(e[0].z);k<=a&&(a=k,d.set(1,0,0));m<=a&&(a=m,d.set(0,1,0));l<=a&&d.set(0,0,1);g.crossVectors(e[0],
d).normalize();f[0].crossVectors(e[0],g);h[0].crossVectors(e[0],f[0]);for(k=1;k<b;k++)f[k]=f[k-1].clone(),h[k]=h[k-1].clone(),g.crossVectors(e[k-1],e[k]),1E-4<g.length()&&(g.normalize(),d=Math.acos(THREE.Math.clamp(e[k-1].dot(e[k]),-1,1)),f[k].applyMatrix4(i.makeRotationAxis(g,d))),h[k].crossVectors(e[k],f[k]);if(c){d=Math.acos(THREE.Math.clamp(f[0].dot(f[b-1]),-1,1));d/=b-1;0<e[0].dot(g.crossVectors(f[0],f[b-1]))&&(d=-d);for(k=1;k<b;k++)f[k].applyMatrix4(i.makeRotationAxis(e[k],d*k)),h[k].crossVectors(e[k],
f[k])}};THREE.PolyhedronGeometry=function(a,b,c,d){function e(a){var b=a.normalize().clone();b.index=g.vertices.push(b)-1;var c=Math.atan2(a.z,-a.x)/2/Math.PI+0.5,a=Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+0.5;b.uv=new THREE.Vector2(c,1-a);return b}function f(a,b,c){var d=new THREE.Face3(a.index,b.index,c.index,[a.clone(),b.clone(),c.clone()]);d.centroid.add(a).add(b).add(c).divideScalar(3);g.faces.push(d);d=Math.atan2(d.centroid.z,-d.centroid.x);g.faceVertexUvs[0].push([h(a.uv,a,d),h(b.uv,b,d),
h(c.uv,c,d)])}function h(a,b,c){0>c&&1===a.x&&(a=new THREE.Vector2(a.x-1,a.y));0===b.x&&0===b.z&&(a=new THREE.Vector2(c/2/Math.PI+0.5,a.y));return a.clone()}THREE.Geometry.call(this);for(var c=c||1,d=d||0,g=this,i=0,k=a.length;i<k;i++)e(new THREE.Vector3(a[i][0],a[i][1],a[i][2]));for(var m=this.vertices,a=[],i=0,k=b.length;i<k;i++){var l=m[b[i][0]],p=m[b[i][1]],t=m[b[i][2]];a[i]=new THREE.Face3(l.index,p.index,t.index,[l.clone(),p.clone(),t.clone()])}i=0;for(k=a.length;i<k;i++){p=a[i];m=d;b=Math.pow(2,
m);Math.pow(4,m);for(var m=e(g.vertices[p.a]),l=e(g.vertices[p.b]),s=e(g.vertices[p.c]),p=[],t=0;t<=b;t++){p[t]=[];for(var q=e(m.clone().lerp(s,t/b)),n=e(l.clone().lerp(s,t/b)),u=b-t,r=0;r<=u;r++)p[t][r]=0==r&&t==b?q:e(q.clone().lerp(n,r/u))}for(t=0;t<b;t++)for(r=0;r<2*(b-t)-1;r++)m=Math.floor(r/2),0==r%2?f(p[t][m+1],p[t+1][m],p[t][m]):f(p[t][m+1],p[t+1][m+1],p[t+1][m])}i=0;for(k=this.faceVertexUvs[0].length;i<k;i++)d=this.faceVertexUvs[0][i],a=d[0].x,b=d[1].x,m=d[2].x,l=Math.max(a,Math.max(b,m)),
p=Math.min(a,Math.min(b,m)),0.9<l&&0.1>p&&(0.2>a&&(d[0].x+=1),0.2>b&&(d[1].x+=1),0.2>m&&(d[2].x+=1));i=0;for(k=this.vertices.length;i<k;i++)this.vertices[i].multiplyScalar(c);this.mergeVertices();this.computeCentroids();this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,c)};THREE.PolyhedronGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.IcosahedronGeometry=function(a,b){this.radius=a;this.detail=b;var c=(1+Math.sqrt(5))/2;THREE.PolyhedronGeometry.call(this,[[-1,c,0],[1,c,0],[-1,-c,0],[1,-c,0],[0,-1,c],[0,1,c],[0,-1,-c],[0,1,-c],[c,0,-1],[c,0,1],[-c,0,-1],[-c,0,1]],[[0,11,5],[0,5,1],[0,1,7],[0,7,10],[0,10,11],[1,5,9],[5,11,4],[11,10,2],[10,7,6],[7,1,8],[3,9,4],[3,4,2],[3,2,6],[3,6,8],[3,8,9],[4,9,5],[2,4,11],[6,2,10],[8,6,7],[9,8,1]],a,b)};THREE.IcosahedronGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.OctahedronGeometry=function(a,b){THREE.PolyhedronGeometry.call(this,[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],[[0,2,4],[0,4,3],[0,3,5],[0,5,2],[1,2,5],[1,5,3],[1,3,4],[1,4,2]],a,b)};THREE.OctahedronGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TetrahedronGeometry=function(a,b){THREE.PolyhedronGeometry.call(this,[[1,1,1],[-1,-1,1],[-1,1,-1],[1,-1,-1]],[[2,1,0],[0,3,2],[1,3,0],[2,3,1]],a,b)};THREE.TetrahedronGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ParametricGeometry=function(a,b,c){THREE.Geometry.call(this);var d=this.vertices,e=this.faces,f=this.faceVertexUvs[0],h,g,i,k,m=b+1;for(h=0;h<=c;h++){k=h/c;for(g=0;g<=b;g++)i=g/b,i=a(i,k),d.push(i)}var l,p,t,s;for(h=0;h<c;h++)for(g=0;g<b;g++)a=h*m+g,d=h*m+g+1,k=(h+1)*m+g+1,i=(h+1)*m+g,l=new THREE.Vector2(g/b,h/c),p=new THREE.Vector2((g+1)/b,h/c),t=new THREE.Vector2((g+1)/b,(h+1)/c),s=new THREE.Vector2(g/b,(h+1)/c),e.push(new THREE.Face3(a,d,i)),f.push([l,p,s]),e.push(new THREE.Face3(d,k,i)),
f.push([p.clone(),t,s.clone()]);this.computeCentroids();this.computeFaceNormals();this.computeVertexNormals()};THREE.ParametricGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.AxisHelper=function(a){var a=a||1,b=new THREE.Geometry;b.vertices.push(new THREE.Vector3,new THREE.Vector3(a,0,0),new THREE.Vector3,new THREE.Vector3(0,a,0),new THREE.Vector3,new THREE.Vector3(0,0,a));b.colors.push(new THREE.Color(16711680),new THREE.Color(16755200),new THREE.Color(65280),new THREE.Color(11206400),new THREE.Color(255),new THREE.Color(43775));a=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});THREE.Line.call(this,b,a,THREE.LinePieces)};
THREE.AxisHelper.prototype=Object.create(THREE.Line.prototype);THREE.ArrowHelper=function(a,b,c,d,e,f){THREE.Object3D.call(this);void 0===d&&(d=16776960);void 0===c&&(c=1);void 0===e&&(e=0.2*c);void 0===f&&(f=0.2*e);this.position=b;b=new THREE.Geometry;b.vertices.push(new THREE.Vector3(0,0,0));b.vertices.push(new THREE.Vector3(0,1,0));this.line=new THREE.Line(b,new THREE.LineBasicMaterial({color:d}));this.line.matrixAutoUpdate=!1;this.add(this.line);b=new THREE.CylinderGeometry(0,0.5,1,5,1);b.applyMatrix((new THREE.Matrix4).makeTranslation(0,-0.5,0));this.cone=
new THREE.Mesh(b,new THREE.MeshBasicMaterial({color:d}));this.cone.matrixAutoUpdate=!1;this.add(this.cone);this.setDirection(a);this.setLength(c,e,f)};THREE.ArrowHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.ArrowHelper.prototype.setDirection=function(){var a=new THREE.Vector3,b;return function(c){0.99999<c.y?this.quaternion.set(0,0,0,1):-0.99999>c.y?this.quaternion.set(1,0,0,0):(a.set(c.z,0,-c.x).normalize(),b=Math.acos(c.y),this.quaternion.setFromAxisAngle(a,b))}}();
THREE.ArrowHelper.prototype.setLength=function(a,b,c){void 0===b&&(b=0.2*a);void 0===c&&(c=0.2*b);this.line.scale.set(1,a,1);this.line.updateMatrix();this.cone.scale.set(c,b,c);this.cone.position.y=a;this.cone.updateMatrix()};THREE.ArrowHelper.prototype.setColor=function(a){this.line.material.color.setHex(a);this.cone.material.color.setHex(a)};THREE.BoxHelper=function(a){var b=[new THREE.Vector3(1,1,1),new THREE.Vector3(-1,1,1),new THREE.Vector3(-1,-1,1),new THREE.Vector3(1,-1,1),new THREE.Vector3(1,1,-1),new THREE.Vector3(-1,1,-1),new THREE.Vector3(-1,-1,-1),new THREE.Vector3(1,-1,-1)];this.vertices=b;var c=new THREE.Geometry;c.vertices.push(b[0],b[1],b[1],b[2],b[2],b[3],b[3],b[0],b[4],b[5],b[5],b[6],b[6],b[7],b[7],b[4],b[0],b[4],b[1],b[5],b[2],b[6],b[3],b[7]);THREE.Line.call(this,c,new THREE.LineBasicMaterial({color:16776960}),THREE.LinePieces);
void 0!==a&&this.update(a)};THREE.BoxHelper.prototype=Object.create(THREE.Line.prototype);
THREE.BoxHelper.prototype.update=function(a){var b=a.geometry;null===b.boundingBox&&b.computeBoundingBox();var c=b.boundingBox.min,b=b.boundingBox.max,d=this.vertices;d[0].set(b.x,b.y,b.z);d[1].set(c.x,b.y,b.z);d[2].set(c.x,c.y,b.z);d[3].set(b.x,c.y,b.z);d[4].set(b.x,b.y,c.z);d[5].set(c.x,b.y,c.z);d[6].set(c.x,c.y,c.z);d[7].set(b.x,c.y,c.z);this.geometry.computeBoundingSphere();this.geometry.verticesNeedUpdate=!0;this.matrixAutoUpdate=!1;this.matrixWorld=a.matrixWorld};THREE.BoundingBoxHelper=function(a,b){var c=b||8947848;this.object=a;this.box=new THREE.Box3;THREE.Mesh.call(this,new THREE.CubeGeometry(1,1,1),new THREE.MeshBasicMaterial({color:c,wireframe:!0}))};THREE.BoundingBoxHelper.prototype=Object.create(THREE.Mesh.prototype);THREE.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object);this.box.size(this.scale);this.box.center(this.position)};THREE.CameraHelper=function(a){function b(a,b,d){c(a,d);c(b,d)}function c(a,b){d.vertices.push(new THREE.Vector3);d.colors.push(new THREE.Color(b));void 0===f[a]&&(f[a]=[]);f[a].push(d.vertices.length-1)}var d=new THREE.Geometry,e=new THREE.LineBasicMaterial({color:16777215,vertexColors:THREE.FaceColors}),f={};b("n1","n2",16755200);b("n2","n4",16755200);b("n4","n3",16755200);b("n3","n1",16755200);b("f1","f2",16755200);b("f2","f4",16755200);b("f4","f3",16755200);b("f3","f1",16755200);b("n1","f1",16755200);
b("n2","f2",16755200);b("n3","f3",16755200);b("n4","f4",16755200);b("p","n1",16711680);b("p","n2",16711680);b("p","n3",16711680);b("p","n4",16711680);b("u1","u2",43775);b("u2","u3",43775);b("u3","u1",43775);b("c","t",16777215);b("p","c",3355443);b("cn1","cn2",3355443);b("cn3","cn4",3355443);b("cf1","cf2",3355443);b("cf3","cf4",3355443);THREE.Line.call(this,d,e,THREE.LinePieces);this.camera=a;this.matrixWorld=a.matrixWorld;this.matrixAutoUpdate=!1;this.pointMap=f;this.update()};
THREE.CameraHelper.prototype=Object.create(THREE.Line.prototype);
THREE.CameraHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Camera,c=new THREE.Projector;return function(){function d(d,h,g,i){a.set(h,g,i);c.unprojectVector(a,b);d=e.pointMap[d];if(void 0!==d){h=0;for(g=d.length;h<g;h++)e.geometry.vertices[d[h]].copy(a)}}var e=this;b.projectionMatrix.copy(this.camera.projectionMatrix);d("c",0,0,-1);d("t",0,0,1);d("n1",-1,-1,-1);d("n2",1,-1,-1);d("n3",-1,1,-1);d("n4",1,1,-1);d("f1",-1,-1,1);d("f2",1,-1,1);d("f3",-1,1,1);d("f4",1,1,1);d("u1",
0.7,1.1,-1);d("u2",-0.7,1.1,-1);d("u3",0,2,-1);d("cf1",-1,0,1);d("cf2",1,0,1);d("cf3",0,-1,1);d("cf4",0,1,1);d("cn1",-1,0,-1);d("cn2",1,0,-1);d("cn3",0,-1,-1);d("cn4",0,1,-1);this.geometry.verticesNeedUpdate=!0}}();THREE.DirectionalLightHelper=function(a,b){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrixWorld=a.matrixWorld;this.matrixAutoUpdate=!1;var b=b||1,c=new THREE.PlaneGeometry(b,b),d=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});d.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.lightPlane=new THREE.Mesh(c,d);this.add(this.lightPlane);c=new THREE.Geometry;c.vertices.push(new THREE.Vector3);c.vertices.push(new THREE.Vector3);d=new THREE.LineBasicMaterial({fog:!1});
d.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.targetLine=new THREE.Line(c,d);this.add(this.targetLine);this.update()};THREE.DirectionalLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();this.targetLine.geometry.dispose();this.targetLine.material.dispose()};
THREE.DirectionalLightHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(){a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);c.subVectors(b,a);this.lightPlane.lookAt(c);this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.targetLine.geometry.vertices[1].copy(c);this.targetLine.geometry.verticesNeedUpdate=!0;this.targetLine.material.color.copy(this.lightPlane.material.color)}}();THREE.FaceNormalsHelper=function(a,b,c,d){this.object=a;this.size=b||1;for(var a=c||16776960,d=d||1,b=new THREE.Geometry,c=0,e=this.object.geometry.faces.length;c<e;c++)b.vertices.push(new THREE.Vector3),b.vertices.push(new THREE.Vector3);THREE.Line.call(this,b,new THREE.LineBasicMaterial({color:a,linewidth:d}),THREE.LinePieces);this.matrixAutoUpdate=!1;this.normalMatrix=new THREE.Matrix3;this.update()};THREE.FaceNormalsHelper.prototype=Object.create(THREE.Line.prototype);
THREE.FaceNormalsHelper.prototype.update=function(){var a=new THREE.Vector3;return function(){this.object.updateMatrixWorld(!0);this.normalMatrix.getNormalMatrix(this.object.matrixWorld);for(var b=this.geometry.vertices,c=this.object.geometry.faces,d=this.object.matrixWorld,e=0,f=c.length;e<f;e++){var h=c[e];a.copy(h.normal).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size);var g=2*e;b[g].copy(h.centroid).applyMatrix4(d);b[g+1].addVectors(b[g],a)}this.geometry.verticesNeedUpdate=
!0;return this}}();THREE.GridHelper=function(a,b){var c=new THREE.Geometry,d=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});this.color1=new THREE.Color(4473924);this.color2=new THREE.Color(8947848);for(var e=-a;e<=a;e+=b){c.vertices.push(new THREE.Vector3(-a,0,e),new THREE.Vector3(a,0,e),new THREE.Vector3(e,0,-a),new THREE.Vector3(e,0,a));var f=0===e?this.color1:this.color2;c.colors.push(f,f,f,f)}THREE.Line.call(this,c,d,THREE.LinePieces)};THREE.GridHelper.prototype=Object.create(THREE.Line.prototype);
THREE.GridHelper.prototype.setColors=function(a,b){this.color1.set(a);this.color2.set(b);this.geometry.colorsNeedUpdate=!0};THREE.HemisphereLightHelper=function(a,b){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrixWorld=a.matrixWorld;this.matrixAutoUpdate=!1;this.colors=[new THREE.Color,new THREE.Color];var c=new THREE.SphereGeometry(b,4,2);c.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));for(var d=0;8>d;d++)c.faces[d].color=this.colors[4>d?0:1];d=new THREE.MeshBasicMaterial({vertexColors:THREE.FaceColors,wireframe:!0});this.lightSphere=new THREE.Mesh(c,d);this.add(this.lightSphere);
this.update()};THREE.HemisphereLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose();this.lightSphere.material.dispose()};
THREE.HemisphereLightHelper.prototype.update=function(){var a=new THREE.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity);this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity);this.lightSphere.lookAt(a.setFromMatrixPosition(this.light.matrixWorld).negate());this.lightSphere.geometry.colorsNeedUpdate=!0}}();THREE.PointLightHelper=function(a,b){this.light=a;this.light.updateMatrixWorld();var c=new THREE.SphereGeometry(b,4,2),d=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});d.color.copy(this.light.color).multiplyScalar(this.light.intensity);THREE.Mesh.call(this,c,d);this.matrixWorld=this.light.matrixWorld;this.matrixAutoUpdate=!1};THREE.PointLightHelper.prototype=Object.create(THREE.Mesh.prototype);THREE.PointLightHelper.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};
THREE.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)};THREE.SpotLightHelper=function(a){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrixWorld=a.matrixWorld;this.matrixAutoUpdate=!1;a=new THREE.CylinderGeometry(0,1,1,8,1,!0);a.applyMatrix((new THREE.Matrix4).makeTranslation(0,-0.5,0));a.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));var b=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});this.cone=new THREE.Mesh(a,b);this.add(this.cone);this.update()};THREE.SpotLightHelper.prototype=Object.create(THREE.Object3D.prototype);
THREE.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};THREE.SpotLightHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(){var c=this.light.distance?this.light.distance:1E4,d=c*Math.tan(this.light.angle);this.cone.scale.set(d,d,c);a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(b.sub(a));this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}();THREE.VertexNormalsHelper=function(a,b,c,d){this.object=a;this.size=b||1;for(var b=c||16711680,d=d||1,c=new THREE.Geometry,a=a.geometry.faces,e=0,f=a.length;e<f;e++)for(var h=0,g=a[e].vertexNormals.length;h<g;h++)c.vertices.push(new THREE.Vector3),c.vertices.push(new THREE.Vector3);THREE.Line.call(this,c,new THREE.LineBasicMaterial({color:b,linewidth:d}),THREE.LinePieces);this.matrixAutoUpdate=!1;this.normalMatrix=new THREE.Matrix3;this.update()};THREE.VertexNormalsHelper.prototype=Object.create(THREE.Line.prototype);
THREE.VertexNormalsHelper.prototype.update=function(){var a=new THREE.Vector3;return function(){var b=["a","b","c","d"];this.object.updateMatrixWorld(!0);this.normalMatrix.getNormalMatrix(this.object.matrixWorld);for(var c=this.geometry.vertices,d=this.object.geometry.vertices,e=this.object.geometry.faces,f=this.object.matrixWorld,h=0,g=0,i=e.length;g<i;g++)for(var k=e[g],m=0,l=k.vertexNormals.length;m<l;m++){var p=k.vertexNormals[m];c[h].copy(d[k[b[m]]]).applyMatrix4(f);a.copy(p).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size);
a.add(c[h]);h+=1;c[h].copy(a);h+=1}this.geometry.verticesNeedUpdate=!0;return this}}();THREE.VertexTangentsHelper=function(a,b,c,d){this.object=a;this.size=b||1;for(var b=c||255,d=d||1,c=new THREE.Geometry,a=a.geometry.faces,e=0,f=a.length;e<f;e++)for(var h=0,g=a[e].vertexTangents.length;h<g;h++)c.vertices.push(new THREE.Vector3),c.vertices.push(new THREE.Vector3);THREE.Line.call(this,c,new THREE.LineBasicMaterial({color:b,linewidth:d}),THREE.LinePieces);this.matrixAutoUpdate=!1;this.update()};THREE.VertexTangentsHelper.prototype=Object.create(THREE.Line.prototype);
THREE.VertexTangentsHelper.prototype.update=function(){var a=new THREE.Vector3;return function(){var b=["a","b","c","d"];this.object.updateMatrixWorld(!0);for(var c=this.geometry.vertices,d=this.object.geometry.vertices,e=this.object.geometry.faces,f=this.object.matrixWorld,h=0,g=0,i=e.length;g<i;g++)for(var k=e[g],m=0,l=k.vertexTangents.length;m<l;m++){var p=k.vertexTangents[m];c[h].copy(d[k[b[m]]]).applyMatrix4(f);a.copy(p).transformDirection(f).multiplyScalar(this.size);a.add(c[h]);h+=1;c[h].copy(a);
h+=1}this.geometry.verticesNeedUpdate=!0;return this}}();THREE.WireframeHelper=function(a){var b=[0,0],c={},d=function(a,b){return a-b},e=["a","b","c","d"],f=new THREE.BufferGeometry,h=0;if(a.geometry instanceof THREE.Geometry){for(var g=a.geometry.vertices,i=a.geometry.faces,k=new Uint32Array(6*i.length),m=0,l=i.length;m<l;m++)for(var p=i[m],t=0;3>t;t++){b[0]=p[e[t]];b[1]=p[e[(t+1)%3]];b.sort(d);var s=b.toString();void 0===c[s]&&(k[2*h]=b[0],k[2*h+1]=b[1],c[s]=!0,h++)}f.addAttribute("position",Float32Array,2*h,3);b=f.attributes.position.array;m=0;for(l=
h;m<l;m++)for(t=0;2>t;t++)h=g[k[2*m+t]],e=6*m+3*t,b[e+0]=h.x,b[e+1]=h.y,b[e+2]=h.z}else{g=a.geometry.attributes.position.array;i=a.geometry.attributes.index.array;k=new Uint32Array(2*i.length);m=0;for(l=i.length/3;m<l;m++)for(t=0;3>t;t++)e=3*m,b[0]=i[e+t],b[1]=i[e+(t+1)%3],b.sort(d),s=b.toString(),void 0===c[s]&&(k[2*h]=b[0],k[2*h+1]=b[1],c[s]=!0,h++);f.addAttribute("position",Float32Array,2*h,3);b=f.attributes.position.array;m=0;for(l=h;m<l;m++)for(t=0;2>t;t++)e=6*m+3*t,h=3*k[2*m+t],b[e+0]=g[h],
b[e+1]=g[h+1],b[e+2]=g[h+2]}THREE.Line.call(this,f,new THREE.LineBasicMaterial({color:16777215}),THREE.LinePieces);this.matrixAutoUpdate=!1;this.matrixWorld=a.matrixWorld};THREE.WireframeHelper.prototype=Object.create(THREE.Line.prototype);THREE.ImmediateRenderObject=function(){THREE.Object3D.call(this);this.render=function(){}};THREE.ImmediateRenderObject.prototype=Object.create(THREE.Object3D.prototype);THREE.LensFlare=function(a,b,c,d,e){THREE.Object3D.call(this);this.lensFlares=[];this.positionScreen=new THREE.Vector3;this.customUpdateCallback=void 0;void 0!==a&&this.add(a,b,c,d,e)};THREE.LensFlare.prototype=Object.create(THREE.Object3D.prototype);
THREE.LensFlare.prototype.add=function(a,b,c,d,e,f){void 0===b&&(b=-1);void 0===c&&(c=0);void 0===f&&(f=1);void 0===e&&(e=new THREE.Color(16777215));void 0===d&&(d=THREE.NormalBlending);c=Math.min(c,Math.max(0,c));this.lensFlares.push({texture:a,size:b,distance:c,x:0,y:0,z:0,scale:1,rotation:1,opacity:f,color:e,blending:d})};
THREE.LensFlare.prototype.updateLensFlares=function(){var a,b=this.lensFlares.length,c,d=2*-this.positionScreen.x,e=2*-this.positionScreen.y;for(a=0;a<b;a++)c=this.lensFlares[a],c.x=this.positionScreen.x+d*c.distance,c.y=this.positionScreen.y+e*c.distance,c.wantedRotation=0.25*c.x*Math.PI,c.rotation+=0.25*(c.wantedRotation-c.rotation)};THREE.MorphBlendMesh=function(a,b){THREE.Mesh.call(this,a,b);this.animationsMap={};this.animationsList=[];var c=this.geometry.morphTargets.length;this.createAnimation("__default",0,c-1,c/1);this.setAnimationWeight("__default",1)};THREE.MorphBlendMesh.prototype=Object.create(THREE.Mesh.prototype);
THREE.MorphBlendMesh.prototype.createAnimation=function(a,b,c,d){b={startFrame:b,endFrame:c,length:c-b+1,fps:d,duration:(c-b)/d,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[a]=b;this.animationsList.push(b)};
THREE.MorphBlendMesh.prototype.autoCreateAnimations=function(a){for(var b=/([a-z]+)(\d+)/,c,d={},e=this.geometry,f=0,h=e.morphTargets.length;f<h;f++){var g=e.morphTargets[f].name.match(b);if(g&&1<g.length){var i=g[1];d[i]||(d[i]={start:Infinity,end:-Infinity});g=d[i];f<g.start&&(g.start=f);f>g.end&&(g.end=f);c||(c=i)}}for(i in d)g=d[i],this.createAnimation(i,g.start,g.end,a);this.firstAnimation=c};
THREE.MorphBlendMesh.prototype.setAnimationDirectionForward=function(a){if(a=this.animationsMap[a])a.direction=1,a.directionBackwards=!1};THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(a){if(a=this.animationsMap[a])a.direction=-1,a.directionBackwards=!0};THREE.MorphBlendMesh.prototype.setAnimationFPS=function(a,b){var c=this.animationsMap[a];c&&(c.fps=b,c.duration=(c.end-c.start)/c.fps)};
THREE.MorphBlendMesh.prototype.setAnimationDuration=function(a,b){var c=this.animationsMap[a];c&&(c.duration=b,c.fps=(c.end-c.start)/c.duration)};THREE.MorphBlendMesh.prototype.setAnimationWeight=function(a,b){var c=this.animationsMap[a];c&&(c.weight=b)};THREE.MorphBlendMesh.prototype.setAnimationTime=function(a,b){var c=this.animationsMap[a];c&&(c.time=b)};THREE.MorphBlendMesh.prototype.getAnimationTime=function(a){var b=0;if(a=this.animationsMap[a])b=a.time;return b};
THREE.MorphBlendMesh.prototype.getAnimationDuration=function(a){var b=-1;if(a=this.animationsMap[a])b=a.duration;return b};THREE.MorphBlendMesh.prototype.playAnimation=function(a){var b=this.animationsMap[a];b?(b.time=0,b.active=!0):console.warn("animation["+a+"] undefined")};THREE.MorphBlendMesh.prototype.stopAnimation=function(a){if(a=this.animationsMap[a])a.active=!1};
THREE.MorphBlendMesh.prototype.update=function(a){for(var b=0,c=this.animationsList.length;b<c;b++){var d=this.animationsList[b];if(d.active){var e=d.duration/d.length;d.time+=d.direction*a;if(d.mirroredLoop){if(d.time>d.duration||0>d.time)d.direction*=-1,d.time>d.duration&&(d.time=d.duration,d.directionBackwards=!0),0>d.time&&(d.time=0,d.directionBackwards=!1)}else d.time%=d.duration,0>d.time&&(d.time+=d.duration);var f=d.startFrame+THREE.Math.clamp(Math.floor(d.time/e),0,d.length-1),h=d.weight;
f!==d.currentFrame&&(this.morphTargetInfluences[d.lastFrame]=0,this.morphTargetInfluences[d.currentFrame]=1*h,this.morphTargetInfluences[f]=0,d.lastFrame=d.currentFrame,d.currentFrame=f);e=d.time%e/e;d.directionBackwards&&(e=1-e);this.morphTargetInfluences[d.currentFrame]=e*h;this.morphTargetInfluences[d.lastFrame]=(1-e)*h}}};THREE.LensFlarePlugin=function(){function a(a,c){var d=b.createProgram(),e=b.createShader(b.FRAGMENT_SHADER),f=b.createShader(b.VERTEX_SHADER),g="precision "+c+" float;\n";b.shaderSource(e,g+a.fragmentShader);b.shaderSource(f,g+a.vertexShader);b.compileShader(e);b.compileShader(f);b.attachShader(d,e);b.attachShader(d,f);b.linkProgram(d);return d}var b,c,d,e,f,h,g,i,k,m,l,p,t;this.init=function(s){b=s.context;c=s;d=s.getPrecision();e=new Float32Array(16);f=new Uint16Array(6);s=0;e[s++]=-1;e[s++]=-1;
e[s++]=0;e[s++]=0;e[s++]=1;e[s++]=-1;e[s++]=1;e[s++]=0;e[s++]=1;e[s++]=1;e[s++]=1;e[s++]=1;e[s++]=-1;e[s++]=1;e[s++]=0;e[s++]=1;s=0;f[s++]=0;f[s++]=1;f[s++]=2;f[s++]=0;f[s++]=2;f[s++]=3;h=b.createBuffer();g=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,h);b.bufferData(b.ARRAY_BUFFER,e,b.STATIC_DRAW);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,g);b.bufferData(b.ELEMENT_ARRAY_BUFFER,f,b.STATIC_DRAW);i=b.createTexture();k=b.createTexture();b.bindTexture(b.TEXTURE_2D,i);b.texImage2D(b.TEXTURE_2D,0,b.RGB,16,16,
0,b.RGB,b.UNSIGNED_BYTE,null);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.bindTexture(b.TEXTURE_2D,k);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,16,16,0,b.RGBA,b.UNSIGNED_BYTE,null);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);
b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);0>=b.getParameter(b.MAX_VERTEX_TEXTURE_IMAGE_UNITS)?(m=!1,l=a(THREE.ShaderFlares.lensFlare,d)):(m=!0,l=a(THREE.ShaderFlares.lensFlareVertexTexture,d));p={};t={};p.vertex=b.getAttribLocation(l,"position");p.uv=b.getAttribLocation(l,"uv");t.renderType=b.getUniformLocation(l,"renderType");t.map=b.getUniformLocation(l,"map");t.occlusionMap=b.getUniformLocation(l,"occlusionMap");t.opacity=
b.getUniformLocation(l,"opacity");t.color=b.getUniformLocation(l,"color");t.scale=b.getUniformLocation(l,"scale");t.rotation=b.getUniformLocation(l,"rotation");t.screenPosition=b.getUniformLocation(l,"screenPosition")};this.render=function(a,d,e,f){var a=a.__webglFlares,r=a.length;if(r){var v=new THREE.Vector3,z=f/e,G=0.5*e,w=0.5*f,y=16/f,E=new THREE.Vector2(y*z,y),A=new THREE.Vector3(1,1,0),K=new THREE.Vector2(1,1),D=t,y=p;b.useProgram(l);b.enableVertexAttribArray(p.vertex);b.enableVertexAttribArray(p.uv);
b.uniform1i(D.occlusionMap,0);b.uniform1i(D.map,1);b.bindBuffer(b.ARRAY_BUFFER,h);b.vertexAttribPointer(y.vertex,2,b.FLOAT,!1,16,0);b.vertexAttribPointer(y.uv,2,b.FLOAT,!1,16,8);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,g);b.disable(b.CULL_FACE);b.depthMask(!1);var F,O,x,I,B;for(F=0;F<r;F++)if(y=16/f,E.set(y*z,y),I=a[F],v.set(I.matrixWorld.elements[12],I.matrixWorld.elements[13],I.matrixWorld.elements[14]),v.applyMatrix4(d.matrixWorldInverse),v.applyProjection(d.projectionMatrix),A.copy(v),K.x=A.x*G+G,
K.y=A.y*w+w,m||0<K.x&&K.x<e&&0<K.y&&K.y<f){b.activeTexture(b.TEXTURE1);b.bindTexture(b.TEXTURE_2D,i);b.copyTexImage2D(b.TEXTURE_2D,0,b.RGB,K.x-8,K.y-8,16,16,0);b.uniform1i(D.renderType,0);b.uniform2f(D.scale,E.x,E.y);b.uniform3f(D.screenPosition,A.x,A.y,A.z);b.disable(b.BLEND);b.enable(b.DEPTH_TEST);b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0);b.activeTexture(b.TEXTURE0);b.bindTexture(b.TEXTURE_2D,k);b.copyTexImage2D(b.TEXTURE_2D,0,b.RGBA,K.x-8,K.y-8,16,16,0);b.uniform1i(D.renderType,1);b.disable(b.DEPTH_TEST);
b.activeTexture(b.TEXTURE1);b.bindTexture(b.TEXTURE_2D,i);b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0);I.positionScreen.copy(A);I.customUpdateCallback?I.customUpdateCallback(I):I.updateLensFlares();b.uniform1i(D.renderType,2);b.enable(b.BLEND);O=0;for(x=I.lensFlares.length;O<x;O++)B=I.lensFlares[O],0.001<B.opacity&&0.001<B.scale&&(A.x=B.x,A.y=B.y,A.z=B.z,y=B.size*B.scale/f,E.x=y*z,E.y=y,b.uniform3f(D.screenPosition,A.x,A.y,A.z),b.uniform2f(D.scale,E.x,E.y),b.uniform1f(D.rotation,B.rotation),b.uniform1f(D.opacity,
B.opacity),b.uniform3f(D.color,B.color.r,B.color.g,B.color.b),c.setBlending(B.blending,B.blendEquation,B.blendSrc,B.blendDst),c.setTexture(B.texture,1),b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0))}b.enable(b.CULL_FACE);b.enable(b.DEPTH_TEST);b.depthMask(!0)}}};THREE.ShadowMapPlugin=function(){var a,b,c,d,e,f,h=new THREE.Frustum,g=new THREE.Matrix4,i=new THREE.Vector3,k=new THREE.Vector3,m=new THREE.Vector3;this.init=function(g){a=g.context;b=g;var g=THREE.ShaderLib.depthRGBA,h=THREE.UniformsUtils.clone(g.uniforms);c=new THREE.ShaderMaterial({fragmentShader:g.fragmentShader,vertexShader:g.vertexShader,uniforms:h});d=new THREE.ShaderMaterial({fragmentShader:g.fragmentShader,vertexShader:g.vertexShader,uniforms:h,morphTargets:!0});e=new THREE.ShaderMaterial({fragmentShader:g.fragmentShader,
vertexShader:g.vertexShader,uniforms:h,skinning:!0});f=new THREE.ShaderMaterial({fragmentShader:g.fragmentShader,vertexShader:g.vertexShader,uniforms:h,morphTargets:!0,skinning:!0});c._shadowPass=!0;d._shadowPass=!0;e._shadowPass=!0;f._shadowPass=!0};this.render=function(a,c){b.shadowMapEnabled&&b.shadowMapAutoUpdate&&this.update(a,c)};this.update=function(l,p){var t,s,q,n,u,r,v,z,G,w=[];n=0;a.clearColor(1,1,1,1);a.disable(a.BLEND);a.enable(a.CULL_FACE);a.frontFace(a.CCW);b.shadowMapCullFace===THREE.CullFaceFront?
a.cullFace(a.FRONT):a.cullFace(a.BACK);b.setDepthTest(!0);t=0;for(s=l.__lights.length;t<s;t++)if(q=l.__lights[t],q.castShadow)if(q instanceof THREE.DirectionalLight&&q.shadowCascade)for(u=0;u<q.shadowCascadeCount;u++){var y;if(q.shadowCascadeArray[u])y=q.shadowCascadeArray[u];else{G=q;v=u;y=new THREE.DirectionalLight;y.isVirtual=!0;y.onlyShadow=!0;y.castShadow=!0;y.shadowCameraNear=G.shadowCameraNear;y.shadowCameraFar=G.shadowCameraFar;y.shadowCameraLeft=G.shadowCameraLeft;y.shadowCameraRight=G.shadowCameraRight;
y.shadowCameraBottom=G.shadowCameraBottom;y.shadowCameraTop=G.shadowCameraTop;y.shadowCameraVisible=G.shadowCameraVisible;y.shadowDarkness=G.shadowDarkness;y.shadowBias=G.shadowCascadeBias[v];y.shadowMapWidth=G.shadowCascadeWidth[v];y.shadowMapHeight=G.shadowCascadeHeight[v];y.pointsWorld=[];y.pointsFrustum=[];z=y.pointsWorld;r=y.pointsFrustum;for(var E=0;8>E;E++)z[E]=new THREE.Vector3,r[E]=new THREE.Vector3;z=G.shadowCascadeNearZ[v];G=G.shadowCascadeFarZ[v];r[0].set(-1,-1,z);r[1].set(1,-1,z);r[2].set(-1,
1,z);r[3].set(1,1,z);r[4].set(-1,-1,G);r[5].set(1,-1,G);r[6].set(-1,1,G);r[7].set(1,1,G);y.originalCamera=p;r=new THREE.Gyroscope;r.position=q.shadowCascadeOffset;r.add(y);r.add(y.target);p.add(r);q.shadowCascadeArray[u]=y;console.log("Created virtualLight",y)}v=q;z=u;G=v.shadowCascadeArray[z];G.position.copy(v.position);G.target.position.copy(v.target.position);G.lookAt(G.target);G.shadowCameraVisible=v.shadowCameraVisible;G.shadowDarkness=v.shadowDarkness;G.shadowBias=v.shadowCascadeBias[z];r=v.shadowCascadeNearZ[z];
v=v.shadowCascadeFarZ[z];G=G.pointsFrustum;G[0].z=r;G[1].z=r;G[2].z=r;G[3].z=r;G[4].z=v;G[5].z=v;G[6].z=v;G[7].z=v;w[n]=y;n++}else w[n]=q,n++;t=0;for(s=w.length;t<s;t++){q=w[t];q.shadowMap||(u=THREE.LinearFilter,b.shadowMapType===THREE.PCFSoftShadowMap&&(u=THREE.NearestFilter),q.shadowMap=new THREE.WebGLRenderTarget(q.shadowMapWidth,q.shadowMapHeight,{minFilter:u,magFilter:u,format:THREE.RGBAFormat}),q.shadowMapSize=new THREE.Vector2(q.shadowMapWidth,q.shadowMapHeight),q.shadowMatrix=new THREE.Matrix4);
if(!q.shadowCamera){if(q instanceof THREE.SpotLight)q.shadowCamera=new THREE.PerspectiveCamera(q.shadowCameraFov,q.shadowMapWidth/q.shadowMapHeight,q.shadowCameraNear,q.shadowCameraFar);else if(q instanceof THREE.DirectionalLight)q.shadowCamera=new THREE.OrthographicCamera(q.shadowCameraLeft,q.shadowCameraRight,q.shadowCameraTop,q.shadowCameraBottom,q.shadowCameraNear,q.shadowCameraFar);else{console.error("Unsupported light type for shadow");continue}l.add(q.shadowCamera);!0===l.autoUpdate&&l.updateMatrixWorld()}q.shadowCameraVisible&&
!q.cameraHelper&&(q.cameraHelper=new THREE.CameraHelper(q.shadowCamera),q.shadowCamera.add(q.cameraHelper));if(q.isVirtual&&y.originalCamera==p){u=p;n=q.shadowCamera;r=q.pointsFrustum;G=q.pointsWorld;i.set(Infinity,Infinity,Infinity);k.set(-Infinity,-Infinity,-Infinity);for(v=0;8>v;v++)z=G[v],z.copy(r[v]),THREE.ShadowMapPlugin.__projector.unprojectVector(z,u),z.applyMatrix4(n.matrixWorldInverse),z.x<i.x&&(i.x=z.x),z.x>k.x&&(k.x=z.x),z.y<i.y&&(i.y=z.y),z.y>k.y&&(k.y=z.y),z.z<i.z&&(i.z=z.z),z.z>k.z&&
(k.z=z.z);n.left=i.x;n.right=k.x;n.top=k.y;n.bottom=i.y;n.updateProjectionMatrix()}n=q.shadowMap;r=q.shadowMatrix;u=q.shadowCamera;u.position.setFromMatrixPosition(q.matrixWorld);m.setFromMatrixPosition(q.target.matrixWorld);u.lookAt(m);u.updateMatrixWorld();u.matrixWorldInverse.getInverse(u.matrixWorld);q.cameraHelper&&(q.cameraHelper.visible=q.shadowCameraVisible);q.shadowCameraVisible&&q.cameraHelper.update();r.set(0.5,0,0,0.5,0,0.5,0,0.5,0,0,0.5,0.5,0,0,0,1);r.multiply(u.projectionMatrix);r.multiply(u.matrixWorldInverse);
g.multiplyMatrices(u.projectionMatrix,u.matrixWorldInverse);h.setFromMatrix(g);b.setRenderTarget(n);b.clear();G=l.__webglObjects;q=0;for(n=G.length;q<n;q++)if(v=G[q],r=v.object,v.render=!1,r.visible&&r.castShadow&&(!(r instanceof THREE.Mesh||r instanceof THREE.ParticleSystem)||!r.frustumCulled||h.intersectsObject(r)))r._modelViewMatrix.multiplyMatrices(u.matrixWorldInverse,r.matrixWorld),v.render=!0;q=0;for(n=G.length;q<n;q++)v=G[q],v.render&&(r=v.object,v=v.buffer,E=r.material instanceof THREE.MeshFaceMaterial?
r.material.materials[0]:r.material,z=0<r.geometry.morphTargets.length&&E.morphTargets,E=r instanceof THREE.SkinnedMesh&&E.skinning,z=r.customDepthMaterial?r.customDepthMaterial:E?z?f:e:z?d:c,v instanceof THREE.BufferGeometry?b.renderBufferDirect(u,l.__lights,null,z,v,r):b.renderBuffer(u,l.__lights,null,z,v,r));G=l.__webglObjectsImmediate;q=0;for(n=G.length;q<n;q++)v=G[q],r=v.object,r.visible&&r.castShadow&&(r._modelViewMatrix.multiplyMatrices(u.matrixWorldInverse,r.matrixWorld),b.renderImmediateObject(u,
l.__lights,null,c,r))}t=b.getClearColor();s=b.getClearAlpha();a.clearColor(t.r,t.g,t.b,s);a.enable(a.BLEND);b.shadowMapCullFace===THREE.CullFaceFront&&a.cullFace(a.BACK)}};THREE.ShadowMapPlugin.__projector=new THREE.Projector;THREE.SpritePlugin=function(){var a,b,c,d,e,f,h,g,i,k,m,l,p,t,s,q,n;function u(a,b){return a.z!==b.z?b.z-a.z:b.id-a.id}var r,v,z,G,w,y,E,A;this.init=function(u){r=u.context;v=u;G=new Float32Array([-0.5,-0.5,0,0,0.5,-0.5,1,0,0.5,0.5,1,1,-0.5,0.5,0,1]);w=new Uint16Array([0,1,2,0,2,3]);y=r.createBuffer();E=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,y);r.bufferData(r.ARRAY_BUFFER,G,r.STATIC_DRAW);r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,E);r.bufferData(r.ELEMENT_ARRAY_BUFFER,w,r.STATIC_DRAW);var u=r.createProgram(),
D=r.createShader(r.VERTEX_SHADER),F=r.createShader(r.FRAGMENT_SHADER);r.shaderSource(D,["precision "+v.getPrecision()+" float;","uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uvOffset + uv * uvScale;\nvec2 alignedPosition = position * scale;\nvec2 rotatedPosition;\nrotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\nrotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\nvec4 finalPosition;\nfinalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\nfinalPosition.xy += rotatedPosition;\nfinalPosition = projectionMatrix * finalPosition;\ngl_Position = finalPosition;\n}"].join("\n"));
r.shaderSource(F,["precision "+v.getPrecision()+" float;","uniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvoid main() {\nvec4 texture = texture2D( map, vUV );\nif ( texture.a < alphaTest ) discard;\ngl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\nif ( fogType > 0 ) {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat fogFactor = 0.0;\nif ( fogType == 1 ) {\nfogFactor = smoothstep( fogNear, fogFar, depth );\n} else {\nconst float LOG2 = 1.442695;\nfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n}\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}\n}"].join("\n"));
r.compileShader(D);r.compileShader(F);r.attachShader(u,D);r.attachShader(u,F);r.linkProgram(u);A=u;q=r.getAttribLocation(A,"position");n=r.getAttribLocation(A,"uv");a=r.getUniformLocation(A,"uvOffset");b=r.getUniformLocation(A,"uvScale");c=r.getUniformLocation(A,"rotation");d=r.getUniformLocation(A,"scale");e=r.getUniformLocation(A,"color");f=r.getUniformLocation(A,"map");h=r.getUniformLocation(A,"opacity");g=r.getUniformLocation(A,"modelViewMatrix");i=r.getUniformLocation(A,"projectionMatrix");k=
r.getUniformLocation(A,"fogType");m=r.getUniformLocation(A,"fogDensity");l=r.getUniformLocation(A,"fogNear");p=r.getUniformLocation(A,"fogFar");t=r.getUniformLocation(A,"fogColor");s=r.getUniformLocation(A,"alphaTest");u=document.createElement("canvas");u.width=8;u.height=8;D=u.getContext("2d");D.fillStyle="#ffffff";D.fillRect(0,0,u.width,u.height);z=new THREE.Texture(u);z.needsUpdate=!0};this.render=function(w,D){var F=w.__webglSprites,G=F.length;if(G){r.useProgram(A);r.enableVertexAttribArray(q);
r.enableVertexAttribArray(n);r.disable(r.CULL_FACE);r.enable(r.BLEND);r.bindBuffer(r.ARRAY_BUFFER,y);r.vertexAttribPointer(q,2,r.FLOAT,!1,16,0);r.vertexAttribPointer(n,2,r.FLOAT,!1,16,8);r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,E);r.uniformMatrix4fv(i,!1,D.projectionMatrix.elements);r.activeTexture(r.TEXTURE0);r.uniform1i(f,0);var x=0,I=0,B=w.fog;B?(r.uniform3f(t,B.color.r,B.color.g,B.color.b),B instanceof THREE.Fog?(r.uniform1f(l,B.near),r.uniform1f(p,B.far),r.uniform1i(k,1),I=x=1):B instanceof THREE.FogExp2&&
(r.uniform1f(m,B.density),r.uniform1i(k,2),I=x=2)):(r.uniform1i(k,0),I=x=0);for(var M,J,ca=[],B=0;B<G;B++)M=F[B],!1!==M.visible&&(M._modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,M.matrixWorld),M.z=-M._modelViewMatrix.elements[14]);F.sort(u);for(B=0;B<G;B++)M=F[B],!1!==M.visible&&(J=M.material,r.uniform1f(s,J.alphaTest),r.uniformMatrix4fv(g,!1,M._modelViewMatrix.elements),ca[0]=M.scale.x,ca[1]=M.scale.y,M=w.fog&&J.fog?I:0,x!==M&&(r.uniform1i(k,M),x=M),r.uniform2f(b,J.uvScale.x,J.uvScale.y),
r.uniform2f(a,J.uvOffset.x,J.uvOffset.y),r.uniform1f(h,J.opacity),r.uniform3f(e,J.color.r,J.color.g,J.color.b),r.uniform1f(c,J.rotation),r.uniform2fv(d,ca),v.setBlending(J.blending,J.blendEquation,J.blendSrc,J.blendDst),v.setDepthTest(J.depthTest),v.setDepthWrite(J.depthWrite),J.map&&J.map.image&&J.map.image.width?v.setTexture(J.map,0):v.setTexture(z,0),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0));r.enable(r.CULL_FACE)}}};THREE.DepthPassPlugin=function(){this.enabled=!1;this.renderTarget=null;var a,b,c,d,e,f,h=new THREE.Frustum,g=new THREE.Matrix4;this.init=function(g){a=g.context;b=g;var g=THREE.ShaderLib.depthRGBA,h=THREE.UniformsUtils.clone(g.uniforms);c=new THREE.ShaderMaterial({fragmentShader:g.fragmentShader,vertexShader:g.vertexShader,uniforms:h});d=new THREE.ShaderMaterial({fragmentShader:g.fragmentShader,vertexShader:g.vertexShader,uniforms:h,morphTargets:!0});e=new THREE.ShaderMaterial({fragmentShader:g.fragmentShader,
vertexShader:g.vertexShader,uniforms:h,skinning:!0});f=new THREE.ShaderMaterial({fragmentShader:g.fragmentShader,vertexShader:g.vertexShader,uniforms:h,morphTargets:!0,skinning:!0});c._shadowPass=!0;d._shadowPass=!0;e._shadowPass=!0;f._shadowPass=!0};this.render=function(a,b){this.enabled&&this.update(a,b)};this.update=function(i,k){var m,l,p,t,s,q;a.clearColor(1,1,1,1);a.disable(a.BLEND);b.setDepthTest(!0);!0===i.autoUpdate&&i.updateMatrixWorld();k.matrixWorldInverse.getInverse(k.matrixWorld);g.multiplyMatrices(k.projectionMatrix,
k.matrixWorldInverse);h.setFromMatrix(g);b.setRenderTarget(this.renderTarget);b.clear();q=i.__webglObjects;m=0;for(l=q.length;m<l;m++)if(p=q[m],s=p.object,p.render=!1,s.visible&&(!(s instanceof THREE.Mesh||s instanceof THREE.ParticleSystem)||!s.frustumCulled||h.intersectsObject(s)))s._modelViewMatrix.multiplyMatrices(k.matrixWorldInverse,s.matrixWorld),p.render=!0;var n;m=0;for(l=q.length;m<l;m++)if(p=q[m],p.render&&(s=p.object,p=p.buffer,!(s instanceof THREE.ParticleSystem)||s.customDepthMaterial))(n=
s.material instanceof THREE.MeshFaceMaterial?s.material.materials[0]:s.material)&&b.setMaterialFaces(s.material),t=0<s.geometry.morphTargets.length&&n.morphTargets,n=s instanceof THREE.SkinnedMesh&&n.skinning,t=s.customDepthMaterial?s.customDepthMaterial:n?t?f:e:t?d:c,p instanceof THREE.BufferGeometry?b.renderBufferDirect(k,i.__lights,null,t,p,s):b.renderBuffer(k,i.__lights,null,t,p,s);q=i.__webglObjectsImmediate;m=0;for(l=q.length;m<l;m++)p=q[m],s=p.object,s.visible&&(s._modelViewMatrix.multiplyMatrices(k.matrixWorldInverse,
s.matrixWorld),b.renderImmediateObject(k,i.__lights,null,c,s));m=b.getClearColor();l=b.getClearAlpha();a.clearColor(m.r,m.g,m.b,l);a.enable(a.BLEND)}};THREE.ShaderFlares={lensFlareVertexTexture:{vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility =        visibility.r / 9.0;\nvVisibility *= 1.0 - visibility.g / 9.0;\nvVisibility *=       visibility.b / 9.0;\nvVisibility *= 1.0 - visibility.a / 9.0;\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",
fragmentShader:"uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"},lensFlare:{vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",
fragmentShader:"precision mediump float;\nuniform lowp int renderType;\nuniform sampler2D map;\nuniform sampler2D occlusionMap;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nfloat visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;\nvisibility = ( 1.0 - visibility / 4.0 );\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * visibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"}};

// This THREEx helper makes it easy to handle window resize.
// It will update renderer and camera when window is resized.
//
// # Usage
//
// **Step 1**: Start updating renderer and camera
//
// ```var windowResize = new THREEx.WindowResize(aRenderer, aCamera)```
//    
// **Step 2**: stop updating renderer and camera
//
// ```windowResize.destroy()```
// # Code

//

/** @namespace */
var THREEx	= THREEx || {}

/**
 * Update renderer and camera when the window is resized
 * 
 * @param {Object} renderer the renderer to update
 * @param {Object} Camera the camera to update
 * @param {Function} dimension callback for renderer size
*/
THREEx.WindowResize	= function(renderer, camera, dimension){
	dimension 	= dimension || function(){ return { width: window.innerWidth, height: window.innerHeight } }
	var callback	= function(){
		// fetch target renderer size
		var rendererSize = dimension();
		// notify the renderer of the size change
		renderer.setSize( rendererSize.width, rendererSize.height )
		// update the camera
		camera.aspect	= rendererSize.width / rendererSize.height
		camera.updateProjectionMatrix()
	}
	// bind the resize event
	window.addEventListener('resize', callback, false)
	// return .stop() the function to stop watching window resize
	return {
		trigger	: function(){
			callback()
		},
		/**
		 * Stop watching window resize
		*/
		destroy	: function(){
			window.removeEventListener('resize', callback)
		}
	}
}

angular.module('VirtualBookshelf')
.factory('BaseObject', function () {
	var BaseObject = function(dataObject, geometry, material) {
		THREE.Mesh.call(this, geometry, material);

		this.dataObject = dataObject || {};
		this.dataObject.rotation = this.dataObject.rotation || [0, 0, 0];
		
		this.id = this.dataObject.id;
		this.position = new THREE.Vector3(this.dataObject.pos_x, this.dataObject.pos_y, this.dataObject.pos_z);
		this.rotation.order = 'XYZ';
		this.rotation.fromArray(this.dataObject.rotation.map(Number));

		this.updateMatrix();

		//TODO: research, after caching geometry this can be run once
		this.geometry.computeBoundingBox();
		
		this.updateBoundingBox();		
	};
	
	BaseObject.prototype = new THREE.Mesh();
	BaseObject.prototype.constructor = BaseObject;

	BaseObject.prototype.getType = function() {
		return this.type;
	};

	BaseObject.prototype.isOutOfParrent = function() {
		return Math.abs(this.boundingBox.center.x - this.parent.boundingBox.center.x) > (this.parent.boundingBox.radius.x - this.boundingBox.radius.x) ||
				//Math.abs(this.boundingBox.center.y - this.parent.boundingBox.center.y) > (this.parent.boundingBox.radius.y - this.boundingBox.radius.y) ||
				Math.abs(this.boundingBox.center.z - this.parent.boundingBox.center.z) > (this.parent.boundingBox.radius.z - this.boundingBox.radius.z);
	};

	BaseObject.prototype.isCollided = function() {
		var
			result,
			targets,
			target,
			i;

		this.updateBoundingBox();

		result = this.isOutOfParrent();
		targets = this.parent.children;

		if(!result) {
			for(i = targets.length - 1; i >= 0; i--) {
				target = targets[i].boundingBox;

				if(targets[i] === this ||
					!target || // children without BB
					(Math.abs(this.boundingBox.center.x - target.center.x) > (this.boundingBox.radius.x + target.radius.x)) ||
					(Math.abs(this.boundingBox.center.y - target.center.y) > (this.boundingBox.radius.y + target.radius.y)) ||
					(Math.abs(this.boundingBox.center.z - target.center.z) > (this.boundingBox.radius.z + target.radius.z))) {	
					continue;
				}

		    	result = true;		
		    	break;
			}
		}

		return result;
	};

	BaseObject.prototype.move = function(newPosition) {
		var 
			currentPosition,
			result;

		result = false;
		currentPosition = this.position.clone();
		
		if(newPosition.x) {
			this.position.setX(newPosition.x);

			if(this.isCollided()) {
				this.position.setX(currentPosition.x);
			} else {
				result = true;
			}
		}

		if(newPosition.z) {
			this.position.setZ(newPosition.z);

			if(this.isCollided()) {
				this.position.setZ(currentPosition.z);
			} else {
				result = true;
			}
		}

		this.changed = this.changed || result;
		this.updateBoundingBox();

		return result;
	};

	BaseObject.prototype.rotate = function(dX, dY, isDemo) {
		var 
			currentRotation = this.rotation.clone(),
			result = false; 
		
		if(dX) {
			this.rotation.y += dX * 0.01;

			if(!isDemo && this.isCollided()) {
				this.rotation.y = currentRotation.y;
			} else {
				result = true;
			}
		}

		if(dY) {
			this.rotation.x += dY * 0.01;

			if(!isDemo && this.isCollided()) {
				this.rotation.x = currentRotation.x;
			} else {
				result = true;
			}
		}

		this.changed = this.changed || (!isDemo && result);
		this.updateBoundingBox();
	};

	BaseObject.prototype.updateBoundingBox = function() {
		var
			boundingBox,
			radius,
			center;

		this.updateMatrix();
		boundingBox = this.geometry.boundingBox.clone().applyMatrix4(this.matrix);
		
		radius = {
			x: (boundingBox.max.x - boundingBox.min.x) * 0.5,
			y: (boundingBox.max.y - boundingBox.min.y) * 0.5,
			z: (boundingBox.max.z - boundingBox.min.z) * 0.5
		};

		center = new THREE.Vector3(
			radius.x + boundingBox.min.x,
			radius.y + boundingBox.min.y,
			radius.z + boundingBox.min.z
		);

		this.boundingBox = {
			radius: radius,
			center: center
		};
	};

	BaseObject.prototype.reload = function() {
		this.position.setX(this.dataObject.pos_x);
		this.position.setY(this.dataObject.pos_y);
		this.position.setZ(this.dataObject.pos_z);
		this.rotation.set(0, 0, 0);
	};

	return BaseObject;	
});
angular.module('VirtualBookshelf')
.factory('BookObject', function ($log, BaseObject, CanvasText, CanvasImage, Data) {	
	var BookObject = function(dataObject, geometry, material, mapImage, coverImage) {
		BaseObject.call(this, dataObject, geometry, material);
		
		this.model = this.dataObject.model;
		this.canvas = material.map.image;
		this.texture = new CanvasImage(null, null, mapImage);
		this.cover = new CanvasImage(this.dataObject.coverPos, this.dataObject.cover, coverImage);
		this.author = new CanvasText(this.dataObject.author, this.dataObject.authorFont);
		this.title = new CanvasText(this.dataObject.title, this.dataObject.titleFont);

		this.updateTexture();
	};

	BookObject.TYPE = 'BookObject';

	BookObject.prototype = new BaseObject();
	BookObject.prototype.constructor = BookObject;
	BookObject.prototype.textNodes = ['author', 'title'];
	BookObject.prototype.type = BookObject.TYPE;

	BookObject.prototype.updateTexture = function() {
		var context = this.canvas.getContext('2d');
		var cover = this.cover;

		if(this.texture.image) {
			context.drawImage(this.texture.image, 0, 0);
		}

		if(cover.image) {
			var diff = cover.y + cover.height - Data.COVER_MAX_Y;
		 	var limitedHeight = diff > 0 ? cover.height - diff : cover.height;
		 	var cropHeight = diff > 0 ? cover.image.naturalHeight - (cover.image.naturalHeight / cover.height * diff) : cover.image.naturalHeight;

			context.drawImage(cover.image, 0, 0, cover.image.naturalWidth, cropHeight, cover.x, cover.y, cover.width, limitedHeight);
		}

		for(var i = this.textNodes.length - 1; i >= 0; i--) {
			var textNode = this[this.textNodes[i]];

			if(textNode.isValid()) {

				context.font = textNode.getFont();
				context.fillStyle = textNode.color;
		    	context.fillText(textNode.text, textNode.x, textNode.y, textNode.width);
		    }
		}

		this.material.map.needsUpdate = true;
	};
	BookObject.prototype.moveElement = function(dX, dY, element) {
		var element = element && this[element];
		
		if(element) {
			if(element.move) {
				element.move(dX, dY);
			} else {
				element.x += dX;
				element.y += dY;
			}

			this.updateTexture();
		}
	};
	BookObject.prototype.scaleElement = function(dX, dY) {
		this.cover.width += dX;
		this.cover.height += dY;
		this.updateTexture();
	};
	BookObject.prototype.save = function() {
		var scope = this;

		this.dataObject.model = this.model;
		this.dataObject.texture = this.texture.toString();
		this.dataObject.cover = this.cover.toString();
		this.dataObject.coverPos = this.cover.serializeProperties();
		this.dataObject.author = this.author.toString();
		this.dataObject.authorFont = this.author.serializeFont();
		this.dataObject.title = this.title.toString();
		this.dataObject.titleFont = this.title.serializeFont();
		this.dataObject.pos_x = this.position.x;
		this.dataObject.pos_y = this.position.y;
		this.dataObject.pos_z = this.position.z;

		Data.postBook(this.dataObject).then(function (dto) {
			scope.dataObject = dto;
			scope.changed = false;
		}).catch(function () {
			$log.error('Error saving book');
		});
	};
	BookObject.prototype.refresh = function() {
		var scope = this;
		//TODO: use in constructor instead of separate images loading
		scope.texture.load(scope.dataObject.texture, false, function () {
			scope.cover.load(scope.dataObject.cover, true, function() {
				scope.model = scope.dataObject.model;
				scope.cover.parseProperties(scope.dataObject.coverPos);
				scope.author.setText(scope.dataObject.author);
				scope.author.parseProperties(scope.dataObject.authorFont);
				scope.title.setText(scope.dataObject.title);
				scope.title.parseProperties(scope.dataObject.titleFont);

				scope.updateTexture();
			});
		});
	};
	BookObject.prototype.copyState = function(book) {
		if(book instanceof BookObject) {
			var fields = ['dataObject', 'position', 'rotation', 'model', 'texture', 'cover', 'author', 'title'];
			for(var i = fields.length - 1; i >= 0; i--) {
				var field = fields[i];
				this[field] = book[field];
			}

			this.updateTexture();
			book.parent.add(this);
			book.parent.remove(book);
			// VirtualBookshelf.selected.object = this;
		}
	};
	BookObject.prototype.setParent = function(parent) {
		if(this.parent != parent) {
			if(parent) {
				parent.add(this);
				this.dataObject.shelfId = parent.id;
				this.dataObject.sectionId = parent.parent.id;
			} else {
				this.parent.remove(this);
				this.dataObject.shelfId = null;
				this.dataObject.sectionId = null;
			}
		}
	};

	return BookObject;
});
angular.module('VirtualBookshelf')
.factory('CameraObject', function (BaseObject) {
	var CameraObject = function() {
		BaseObject.call(this);
	};

	CameraObject.prototype = new BaseObject();
	
	CameraObject.prototype.constructor = CameraObject;
	
	CameraObject.prototype.updateBoundingBox = function() {
		var radius = {x: 0.1, y: 1, z: 0.1};
		var center = new THREE.Vector3(0, 0, 0);

		this.boundingBox = {
			radius: radius,
			center: this.position //TODO: needs center of section in parent or world coordinates
		};
	};

	return CameraObject;
});
angular.module('VirtualBookshelf')
.factory('CanvasImage', function ($q, Data) {
	var CanvasImage = function(properties, link, image) {
		this.link = link || '';
		this.image = image;
		this.parseProperties(properties);
	};
	
	CanvasImage.prototype = {
		constructor: CanvasImage,

		toString: function() {
			return this.link;
		},
		parseProperties: function(properties) {
			var args = properties && properties.split(',') || [];

			this.x = Number(args[0]) || Data.COVER_FACE_X;
			this.y = Number(args[1]) || 0;
			this.width = Number(args[2]) || 216;
			this.height = Number(args[3]) || Data.COVER_MAX_Y;
		},
		serializeProperties: function() {
			return [this.x, this.y, this.width, this.height].join(',');
		}
	};

	return CanvasImage;
});
angular.module('VirtualBookshelf')
.factory('CanvasText', function (Data) {
	var CanvasText = function(text, properties) {
		this.text = text || '';
		this.parseProperties(properties);
	};

	CanvasText.prototype = {
		constructor: CanvasText,
		getFont: function() {
			return [this.style, this.size + 'px', this.font].join(' ');
		},
		isValid: function() {
			return (this.text && this.x && this.y);
		},
		toString: function() {
			return this.text || '';
		},
		setText: function(text) {
			this.text = text;
		},
		serializeFont: function() {
			return [this.style, this.size, this.font, this.x, this.y, this.color, this.width].join(',');
		},
		parseProperties: function(properties) {
			var args = properties && properties.split(',') || [];

			this.style = args[0];
			this.size = args[1] || 14;
			this.font = args[2] || 'Arial';
			this.x = Number(args[3]) || Data.COVER_FACE_X;
			this.y = Number(args[4]) || 10;
			this.color = args[5] || 'black';
			this.width = args[6] || 512;
		},
		move: function(dX, dY) {
			this.x += dX;
			this.y += dY;

			if(this.x <= 0) this.x = 1;
			if(this.y <= 0) this.y = 1;
			if(this.x >= Data.TEXTURE_RESOLUTION) this.x = Data.TEXTURE_RESOLUTION;
			if(this.y >= Data.COVER_MAX_Y) this.y = Data.COVER_MAX_Y;
		}
	};

	return CanvasText;
});
angular.module('VirtualBookshelf')
.factory('LibraryObject', function (BaseObject, Data) {
	var LibraryObject = function(params, geometry, material) {
		BaseObject.call(this, params, geometry, material);
		this.libraryObject = params.libraryObject || {};//TODO: research
	};
	LibraryObject.prototype = new BaseObject();
	LibraryObject.prototype.constructor = LibraryObject;

	return LibraryObject;	
});
angular.module('VirtualBookshelf')
.factory('SectionObject', function (BaseObject, ShelfObject, Data) {
	var SectionObject = function(params, geometry, material) {
		BaseObject.call(this, params, geometry, material);

		this.shelves = {};
		for(var key in params.data.shelves) {
			this.shelves[key] = new ShelfObject(params.data.shelves[key]); 
			this.add(this.shelves[key]);
		}
	};

	SectionObject.TYPE = 'SectionObject';

	SectionObject.prototype = new BaseObject();
	SectionObject.prototype.constructor = SectionObject;
	SectionObject.prototype.type = SectionObject.TYPE;

	SectionObject.prototype.save = function() {
		var scope = this;

		this.dataObject.pos_x = this.position.x;
		this.dataObject.pos_y = this.position.y;
		this.dataObject.pos_z = this.position.z;

		this.dataObject.rotation = [this.rotation.x, this.rotation.y, this.rotation.z];

		return Data.postSection(this.dataObject).then(function (dto) {
			scope.dataObject = dto;
			scope.changed = false;
		});
	};

	return SectionObject;
});
angular.module('VirtualBookshelf')
.factory('SelectorMeta', function () {
	var SelectorMeta = function(selectedObject) {
		if(selectedObject) {
			this.id = selectedObject.id;
			this.parentId = selectedObject.parent.id;
			this.type = selectedObject.getType();
		}
	};

	SelectorMeta.prototype.isEmpty = function() {
		return !this.id;
	};

	SelectorMeta.prototype.equals = function(meta) {
		return !(!meta
				|| meta.id !== this.id
				|| meta.parentId !== this.parentId
				|| meta.type !== this.type);
	};
	
	return SelectorMeta;
});
angular.module('VirtualBookshelf')
.factory('ShelfObject', function (BaseObject) {
	var ShelfObject = function(params) {
		var size = params.size || [1,1,1];	
		var material = new THREE.MeshLambertMaterial({color: 0x00ff00, transparent: true, opacity: 0.2});
		BaseObject.call(this, params, new THREE.CubeGeometry(size[0], size[1], size[2]), material);

		this.position = new THREE.Vector3(params.position[0], params.position[1], params.position[2]);
		this.size = new THREE.Vector3(size[0], size[1], size[2]);
		this.visible = false;
	};

	ShelfObject.TYPE = 'ShelfObject';

	ShelfObject.prototype = new BaseObject();
	ShelfObject.prototype.constructor = ShelfObject;
	ShelfObject.prototype.type = ShelfObject.TYPE;


	return ShelfObject;
});
angular.module('VirtualBookshelf')
.factory('highlight', function (environment) {
	var highlight = {};

	var PLANE_ROTATION = Math.PI * 0.5;
	var PLANE_MULTIPLIER = 2;
	var COLOR_SELECT = 0x005533;
	var COLOR_FOCUS = 0x003355;

	var select;
	var focus;

	var init = function() {
		var materialProperties = {
			map: new THREE.ImageUtils.loadTexture( 'img/glow.png' ),
			transparent: true, 
			side: THREE.DoubleSide,
			blending: THREE.AdditiveBlending,
			depthTest: false
		};

		materialProperties.color = COLOR_SELECT;
		var materialSelect = new THREE.MeshBasicMaterial(materialProperties);

		materialProperties.color = COLOR_FOCUS;
		var materialFocus = new THREE.MeshBasicMaterial(materialProperties);

		var geometry = new THREE.PlaneGeometry(1, 1, 1);

		select = new THREE.Mesh(geometry, materialSelect);
		select.rotation.x = PLANE_ROTATION;

		focus = new THREE.Mesh(geometry, materialFocus);
		focus.rotation.x = PLANE_ROTATION;
	};

	var commonHighlight = function(which, obj) {
		if(obj) {
			var width = obj.geometry.boundingBox.max.x * PLANE_MULTIPLIER;
			var height = obj.geometry.boundingBox.max.z * PLANE_MULTIPLIER;
			var bottom = obj.geometry.boundingBox.min.y + environment.CLEARANCE;
			
			which.position.y = bottom;
			which.scale.set(width, height, 1);
			obj.add(which);

			which.visible = true;
		} else {
			which.visible = false;
		}
	}

	highlight.focus = function(obj) {
		commonHighlight(focus, obj);
	};

	highlight.select = function(obj) {
		commonHighlight(select, obj);
	};

	init();

	return highlight;
});
angular.module('VirtualBookshelf')
.factory('locator', function ($q, $log, BaseObject, Data, selector, environment, cache) {
	var VISUAL_DEBUG = false;
	var locator = {};

	locator.placeSection = function(sectionDto) {
		var promise = cache.getSection(sectionDto.model).then(function (sectionCache) {
			var sectionBB = sectionCache.geometry.boundingBox;
			var libraryBB = environment.library.geometry.boundingBox;
			var freePlace = getFreePlace(environment.library.children, libraryBB, sectionBB);

			return freePlace ?
				saveSection(sectionDto, freePlace) :
				$q.reject('there is no free space');
		}).then(function (newDto) {
			return environment.updateSection(newDto);
		});

		return promise;
	};

	var saveSection = function(dto, position) {
		dto.libraryId = environment.library.id;
		dto.pos_x = position.x;
		dto.pos_y = position.y;
		dto.pos_z = position.z;

		return Data.postSection(dto);
	};

	locator.placeBook = function(bookDto) {
		var promise;
		var shelf = selector.isSelectedShelf() && selector.getSelectedObject();

		if(shelf) {
			promise = cache.getBook(bookDto.model).then(function (bookCache) {
				var shelfBB = shelf.geometry.boundingBox;
				var bookBB = bookCache.geometry.boundingBox;
				var freePlace = getFreePlace(shelf.children, shelfBB, bookBB);

				return freePlace ? 
					saveBook(bookDto, freePlace, shelf) : 
					$q.reject('there is no free space');
			}).then(function (newDto) {
				return environment.updateBook(newDto);
			});
		} else {
			promise = $q.reject('shelf is not selected');
		}

		return promise;
	};

	var saveBook = function(dto, position, shelf) {
		dto.shelfId = shelf.id;
		dto.sectionId = shelf.parent.id;
		dto.pos_x = position.x;
		dto.pos_y = position.y;
		dto.pos_z = position.z;

		return Data.postBook(dto);
	};

	locator.unplaceBook = function(bookDto) {
		var promise;
		bookDto.sectionId = null;

		promise = Data.postBook(bookDto).then(function () {
			return environment.updateBook(bookDto);
		});

		return promise;
	};

	var getFreePlace = function(objects, spaceBB, targetBB) {
		var matrixPrecision = new THREE.Vector3(targetBB.max.x - targetBB.min.x, 0, targetBB.max.z - targetBB.min.z);
		var occupiedMatrix = getOccupiedMatrix(objects, matrixPrecision);
		var freePosition = getFreeMatrixCells(occupiedMatrix, spaceBB, targetBB, matrixPrecision);
		
		if (VISUAL_DEBUG) {
			debugShowFree(freePosition, matrixPrecision, environment.library);
		}

		return freePosition;
	};

	var getFreeMatrixCells = function(occupiedMatrix, spaceBB, targetBB, matrixPrecision) {
		var targetCellsSize = 1;
		var freeCellsCount = 0;
		var freeCellsStart;
		var xIndex;
		var zIndex;
		var cells;

		var minXCell = Math.floor(spaceBB.min.x / matrixPrecision.x) + 1;
		var maxXCell = Math.floor(spaceBB.max.x / matrixPrecision.x);
		var minZCell = Math.floor(spaceBB.min.z / matrixPrecision.z) + 1;
		var maxZCell = Math.floor(spaceBB.max.z / matrixPrecision.z);

		for (zIndex = minZCell; zIndex <= maxZCell; zIndex++) {
			for (xIndex = minXCell; xIndex <= maxXCell; xIndex++) {
				if (!occupiedMatrix[zIndex] || !occupiedMatrix[zIndex][xIndex]) {
					freeCellsStart || (freeCellsStart = xIndex);
					freeCellsCount++;

					if (freeCellsCount === targetCellsSize) {
						cells = _.range(freeCellsStart, freeCellsStart + freeCellsCount);
						return getPositionFromCells(cells, zIndex, matrixPrecision, spaceBB, targetBB);
					}
				} else {
					freeCellsCount = 0;
				}
			}
		}

		return null;
	};

	var getPositionFromCells = function(cells, zIndex, matrixPrecision, spaceBB, targetBB) {
		var size = cells.length * matrixPrecision.x;
		var x = cells[0] * matrixPrecision.x;
		var z =	zIndex * matrixPrecision.z;
		var y = getBottomY(spaceBB, targetBB);

		return new THREE.Vector3(x, y, z);
	};

	var getBottomY = function(spaceBB, targetBB) {
		return spaceBB.min.y - targetBB.min.y + environment.CLEARANCE;
	};

	var getOccupiedMatrix = function(objects, matrixPrecision) {
		var result = {};
		var objectBB;
		var minKeyX;
		var maxKeyX;
		var minKeyZ;
		var maxKeyZ;		
		var z;

		objects.forEach(function (obj) {
			if (obj instanceof BaseObject) {
				objectBB = obj.boundingBox;

				minKeyX = Math.round((objectBB.center.x - objectBB.radius.x) / matrixPrecision.x);
				maxKeyX = Math.round((objectBB.center.x + objectBB.radius.x) / matrixPrecision.x);
				minKeyZ = Math.round((objectBB.center.z - objectBB.radius.z) / matrixPrecision.z);
				maxKeyZ = Math.round((objectBB.center.z + objectBB.radius.z) / matrixPrecision.z);

				for (z = minKeyZ; z <= maxKeyZ; z++) {
					result[z] || (result[z] = {});
					result[z][minKeyX] = true;
					result[z][maxKeyX] = true;

					if (VISUAL_DEBUG) {
						debugShowBB(obj);
						debugAddOccupied([minKeyX, maxKeyX], matrixPrecision, obj, z);
					}
				}
			}
		});

		return result;
	};

	var debugShowBB = function(obj) {
		var objectBB = obj.boundingBox;
		var objBox = new THREE.Mesh(
			new THREE.CubeGeometry(
				objectBB.radius.x * 2, 
				objectBB.radius.y * 2 + 0.1, 
				objectBB.radius.z * 2
			), 
			new THREE.MeshLambertMaterial({
				color: 0xbbbbff,
				opacity: 0.2,
				transparent: true
			})
		);
		
		objBox.position.x = objectBB.center.x;
		objBox.position.y = objectBB.center.y;
		objBox.position.z = objectBB.center.z;

		obj.parent.add(objBox);
	};

	var debugAddOccupied = function(cells, matrixPrecision, obj, zKey) {
		cells.forEach(function (cell) {
			var pos = getPositionFromCells([cell], zKey, matrixPrecision, obj.parent.geometry.boundingBox, obj.geometry.boundingBox);
			var cellBox = new THREE.Mesh(new THREE.CubeGeometry(matrixPrecision.x - 0.01, 0.01, matrixPrecision.z - 0.01), new THREE.MeshLambertMaterial({color: 0xff0000}));
			
			cellBox.position = pos;
			obj.parent.add(cellBox);
		});
	};

	var debugShowFree = function(position, matrixPrecision, obj) {
		if (position) {
			var cellBox = new THREE.Mesh(new THREE.CubeGeometry(matrixPrecision.x, 0.5, matrixPrecision.z), new THREE.MeshLambertMaterial({color: 0x00ff00}));
			cellBox.position = position;
			obj.parent.add(cellBox);
		}
	};

	return locator;	
});
angular.module('VirtualBookshelf')
.factory('selector', function ($rootScope, SelectorMeta, BookObject, ShelfObject, SectionObject, Camera, environment, highlight) {
	var selector = {};
	
	var selected = new SelectorMeta();
	var focused = new SelectorMeta();

	selector.focus = function(meta) {
		if(!meta.equals(focused)) {
			if(!focused.equals(selected)) {
				highlight.focus(null);
			}

			focused = meta;

			if(!focused.isEmpty() && !focused.equals(selected)) {
				var obj = getObject(focused);
				highlight.focus(obj);
			}
		}
	};

	selector.selectFocused = function() {
		var meta = focused;

		selector.select(meta);
		$rootScope.$apply();
	};

	selector.select = function(meta) {
		if(!meta.equals(selected)) {
			selector.unselect();
			selected = meta;

			var obj = getObject(selected);
			highlight.select(obj);
			highlight.focus(null);
		}
	};

	selector.unselect = function() {
		if(!selected.isEmpty()) {
			highlight.select(null);
			selected = new SelectorMeta();
		}
	};

	selector.getSelectedObject = function() {
		return getObject(selected);
	};

	var getObject = function(meta) {
		var object;

		if(!meta.isEmpty()) {
			object = isShelf(meta) ? environment.getShelf(meta.parentId, meta.id)
				: isBook(meta) ? environment.getBook(meta.id)
				: isSection(meta) ? environment.getSection(meta.id)
				: null;
		}

		return object;	
	};

	selector.isSelectedEditable = function() {
		return selector.isSelectedBook() || selector.isSelectedSection();
	};

	selector.isBookSelected = function(id) {
		return isBook(selected) && selected.id === id;
	};

	selector.isSelectedShelf = function() {
		return isShelf(selected);
	};

	selector.isSelectedBook = function() {
		return isBook(selected);
	};

	selector.isSelectedSection = function() {
		return isSection(selected);
	};

	var isShelf = function(meta) {
		return meta.type === ShelfObject.TYPE;
	};

	var isBook = function(meta) {
		return meta.type === BookObject.TYPE;
	};

	var isSection = function(meta) {
		return meta.type === SectionObject.TYPE;
	};

	return selector;
});
angular.module('VirtualBookshelf')
.factory('authorization', function ($log, $q, $window, $interval, User, selectLibrary, catalog) {
	var authorization = {};

	authorization.isShow = function() {
		return !User.isAuthorized() && User.isLoaded();
	};

	authorization.google = function() {
		var win = $window.open('/auth/google', '', 'width=800,height=600,modal=yes,alwaysRaised=yes');
	    var checkAuthWindow = $interval(function () {
	        if (win && win.closed) {
	        	$interval.cancel(checkAuthWindow);

	        	User.load().then(function () {
	        		return authorization.loadUserData();
	        	}).catch(function () {
	        		$log.log('User loadind error');
					//TODO: show error message  
	        	});
	        }
	    }, 100);			
	};

	authorization.logout = function() {
		User.logout().finally(function () {
    		return authorization.loadUserData();
		}).catch(function () {
			$log.error('Logout error');
			//TODO: show an error
		});
	};

	authorization.loadUserData = function() {
		return $q.all([
			selectLibrary.updateList(), 
			catalog.loadBooks()
		]);
	};
	
	return authorization;
});
angular.module('VirtualBookshelf')
.factory('block', function (blockUI) {
	var block = {};

	var INVENTORY = 'inventory';
	var MAIN_MENU = 'main_menu';
	var GLOBAL = 'global';

	block.inventory = blockUI.instances.get(INVENTORY);
	
	block.mainMenu = blockUI.instances.get(MAIN_MENU);

	block.global = blockUI.instances.get(GLOBAL);

	return block;
});
angular.module('VirtualBookshelf')
.factory('bookEdit', function ($log, Data, environment, block, dialog, archive, catalog, selector) {
	var bookEdit = {};

	var BOOK_IMAGE_URL = '/obj/books/{model}/img.jpg';
	var EMPTY_IMAGE_URL = '/img/empty_cover.jpg';
	
	bookEdit.list = [];
	bookEdit.book = {};
	bookEdit.coverInputURL = null;

	bookEdit.setBook = function(book) {
		this.book = {}; // create new object for unbind from scope
		if(book) {
			this.book.id = book.id;
			this.book.userId = book.userId;
			this.book.model = book.model;
			this.book.cover = book.cover;
			this.book.coverId = book.coverId;
			this.book.title = book.title;
			this.book.author = book.author;

			this.coverInputURL = null;
		}
	};

	bookEdit.getImg = function() {
		return this.book.model ? BOOK_IMAGE_URL.replace('{model}', this.book.model) : null;
	};

	bookEdit.getCoverImg = function() {
		return this.isCoverShow() ? this.book.cover : EMPTY_IMAGE_URL;
	};

	bookEdit.isCoverDisabled = function() {
		return this.coverInputURL && (this.form.title.$invalid || this.form.author.$invalid);
	};

	bookEdit.isCoverShow = function() {
		return Boolean(this.book.cover);
	};

	bookEdit.isShow = function() {
		return !!this.book.userId;
	};

	bookEdit.submit = function() {
		if(this.form.$valid) {
			this.save();
		} else {
			dialog.openError('Fill all required fields, please.');
		}
	};

	bookEdit.applyCover = function() {
		if(!this.isCoverDisabled()) {
			if(this.coverInputURL) {
				block.inventory.start();
				archive.sendExternalURL(this.coverInputURL, [this.book.title, this.book.author]).then(function (result) {
					bookEdit.book.cover = result.url;
					bookEdit.book.coverId = result.id;
				}).catch(function () {
					bookEdit.book.cover = null;
					dialog.openError('Can not apply this cover. Try another one, please.');
				}).finally(function () {
					bookEdit.coverInputURL = null;
					block.inventory.stop();
				});
			} else {
				bookEdit.book.cover = null;
			}
		} else {
			dialog.openError('Fill author and title fields, please.');
		}
	};

	bookEdit.save = function() {
		var scope = this;
		
		block.inventory.start();
		Data.postBook(this.book).then(function (dto) {
			if(selector.isBookSelected(dto.id)) {
				selector.unselect();
			}

			environment.updateBook(dto);
			scope.cancel();
			return catalog.loadBooks();
		}).catch(function () {
			$log.error('Book save error');
			//TODO: show error
		}).finally(function () {
			block.inventory.stop();
		});
	};

	bookEdit.cancel = function() {
		this.setBook();
	};

	return bookEdit;
});
angular.module('VirtualBookshelf')
.factory('catalog', function ($q, Data, User, block) {
	var catalog = {};

	catalog.books = null;

	catalog.loadBooks = function() {
		var promise;
		var userId = User.getId();

		if(userId) {
			block.inventory.start();
			promise = $q.when(userId ? Data.getUserBooks(userId) : null).then(function (result) {
				catalog.books = result;
			}).finally(function () {
				block.inventory.stop();	
			});
		}

		return promise;
	};

	return catalog;
});
angular.module('VirtualBookshelf')
.factory('createLibrary', function (Data, environment) {
	var createLibrary = {};
	
	createLibrary.list = [];
	createLibrary.model = null;
	createLibrary.visible = false;

	createLibrary.isShow = function() {
		return this.visible;
	};

	createLibrary.show = function() {
		this.visible = true;
	};

	createLibrary.hide = function() {
		this.visible = false;
	};

	createLibrary.getImg = function() {
		return this.model ? '/obj/libraries/{model}/img.jpg'.replace('{model}', this.model) : null;
	};

	createLibrary.create = function() {
		if(this.model) {
			Data.postLibrary(this.model).then(function (result) {
				environment.goToLibrary(result.id);
			}).catch(function () {
				//TODO: show an error
			});
		}
	};

	return createLibrary;
});
angular.module('VirtualBookshelf')
.factory('createSection', function ($log, User, environment, locator) {
	var createSection = {};

	createSection.list = [];
	createSection.model = null;
	createSection.visible = false;

	createSection.isShow = function() {
		return this.visible;
	};

	createSection.show = function() {
		this.visible = true;
	};

	createSection.hide = function() {
		this.visible = false;
	};
	
	createSection.getImg = function() {
		return this.model ? '/obj/sections/{model}/img.jpg'.replace('{model}', this.model) : null;
	};

	createSection.create = function() {
		if(this.model) {
			var sectionData = {
				model: this.model,
				libraryId: environment.library.id,
				userId: User.getId()
			};

			this.place(sectionData);
		}
	};

	createSection.place = function(dto) {
		//TODO: block
		locator.placeSection(dto).catch(function (error) {
			//TODO: show an error
			$log.error(error);
		});	
	};

	return createSection;
});
angular.module('VirtualBookshelf')
.factory('feedback', function (User, Data, dialog) {
	var feedback = {};
	var show = false;

	feedback.message = null;

	feedback.isShow = function() {
		return show;
	};

	feedback.show = function() {
		show = true;
	};

	feedback.hide = function() {
		show = false;
	};

	feedback.submit = function() {
		var dataObject;
		
		if(this.form.message.$valid) {
			dialog.openConfirm('Send feedback?').then(function () {
				dataObject = {
					message: this.message,
					userId: User.getId()
				};

				return Data.postFeedback(dataObject).then(function () {
					this.message = null;
					feedback.hide();
				}, function () {
					dialog.openError('Can not send feedback because of an error.');
				});
			});
		} else {
			dialog.openError('Feedback field is required.');
		}
	};

	return feedback;
});
angular.module('VirtualBookshelf')
.factory('inventory', function ($log, SelectorMeta, User, Data, bookEdit, selector, environment, dialog, locator, catalog, block) {
	var inventory = {};

	inventory.search = null;

	inventory.expand = function(book) {
		bookEdit.setBook(book);
	};

	inventory.isShow = function() {
		return User.isAuthorized();
	};

	inventory.isBookSelected = function(id) {
		return selector.isBookSelected(id);
	};

	inventory.select = function(dto) {
		var book = environment.getBook(dto.id);
		var meta = new SelectorMeta(book);

		selector.select(meta);
	};

	inventory.addBook = function() {
		this.expand({userId: User.getId()});
	};

	inventory.delete = function(book) {
		dialog.openConfirm('Delete book?').then(function () {
			block.inventory.start();

			Data.deleteBook(book).then(function (res) {
				if(selector.isBookSelected(book.id)) {
					selector.unselect();
				}

				environment.removeBook(res.data);
				return catalog.loadBooks();
			}).catch(function () {
				dialog.openError('Delete book error.');
			}).finally(function () {
				block.inventory.stop();
			});
		});
	};

	inventory.place = function(book, event) {
		var promise;
		var isBookPlaced = !!book.sectionId;

		event.stopPropagation();
		
		block.inventory.start();
		promise = isBookPlaced ? locator.unplaceBook(book) : locator.placeBook(book);
		promise.then(function () {
			return catalog.loadBooks();
		}).catch(function (error) {
			//TODO: show an error
			$log.error(error);
		}).finally(function () {
			block.inventory.stop();
		});
	};

	return inventory;
});
angular.module('VirtualBookshelf')
.factory('mainMenu', function ($log, Data, bookEdit, feedback, selectLibrary, createLibrary, createSection) {
	var mainMenu = {};
	
	var show = false;
	var createListShow = false;

	mainMenu.isShow = function() {
		return show;
	};

	mainMenu.show = function() {
		mainMenu.hideAll();
		show = true;
	};

	mainMenu.hide = function() {
		show = false;
	};

	mainMenu.isCreateListShow = function() {
		return createListShow;
	};

	mainMenu.createListShow = function() {
		mainMenu.hideAll();
		createListShow = true;
	};

	mainMenu.createListHide = function() {
		createListShow = false;
	};

	mainMenu.hideAll = function() {
		mainMenu.hide();
		mainMenu.createListHide();

		selectLibrary.hide();
		createLibrary.hide();
		createSection.hide();

		feedback.hide();
	};

	mainMenu.trigger = function() {
		if(mainMenu.isShow()) {
			mainMenu.hide();
		} else {
			mainMenu.show();
		}
	};

	mainMenu.showFeedback = function() {
		mainMenu.hideAll();
		feedback.show();
	};

	mainMenu.showSelectLibrary = function() {
		mainMenu.hideAll();
		selectLibrary.show();
	};

	mainMenu.showCreateLibrary = function() {
		mainMenu.hideAll();
		createLibrary.show();
	};

	mainMenu.showCreateSection = function() {
		mainMenu.hideAll();
		createSection.show();
	};

	var init = function() {
		//TODO: move to menu models
		Data.getUIData().then(function (res) {
			createLibrary.list = res.data.libraries;
			createSection.list = res.data.bookshelves;
			bookEdit.list = res.data.books;
		}).catch(function () {
			$log.log('UI init error');
			//TODO: show an error
		});
	};

	init();

	return mainMenu;
});
angular.module('VirtualBookshelf')
.factory('selectLibrary', function (Data, environment) {
	var selectLibrary = {};

	selectLibrary.list = [];
	selectLibrary.visible = false;

	selectLibrary.isShow = function() {
		return this.visible;
	};

	selectLibrary.show = function() {
		this.visible = true;
	};

	selectLibrary.hide = function() {
		this.visible = false;
	};

	selectLibrary.updateList = function() {
		var scope = this;

	    var promise = Data.getLibraries().then(function (res) {
            scope.list = res.data;
    	});

    	return promise;
	};

	selectLibrary.go = environment.goToLibrary;

	return selectLibrary;
});
angular.module('VirtualBookshelf')
.factory('uiTools', function (selector) {
	var uiTools = {};

	var ROTATION_SCALE = 1;

	var states = {
		rotateLeft: false,
		rotateRight: false
	};

	uiTools.isShow = function() {
		return selector.isSelectedSection();
	};

	uiTools.isRotatable = function() {
		return selector.isSelectedSection();
	};

	uiTools.rotateLeft = function() {
		states.rotateLeft = true;
	};

	uiTools.rotateRight = function() {
		states.rotateRight = true;
	};

	uiTools.stop = function() {
		states.rotateLeft = false;
		states.rotateRight = false;
	};

	uiTools.update = function() {
		if(states.rotateLeft) {
			rotate(ROTATION_SCALE);
		} else if(states.rotateRight) {
			rotate(-ROTATION_SCALE);
		}
	};

	var rotate = function(scale) {
		var obj = selector.getSelectedObject();
		obj.rotate(scale);
	};

	return uiTools;
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbnRyb2xsZXJzL1Rvb2xzQ3RybC5qcyIsImNvbnRyb2xsZXJzL1VpQ3RybC5qcyIsImRpcmVjdGl2ZXMvc2VsZWN0LmpzIiwibGlicy9sb2Rhc2gubWluLmpzIiwic2VydmljZXMvYXJjaGl2ZS5qcyIsInNlcnZpY2VzL2NhY2hlLmpzIiwic2VydmljZXMvY2FtZXJhLmpzIiwic2VydmljZXMvY29udHJvbHMuanMiLCJzZXJ2aWNlcy9kYXRhLmpzIiwic2VydmljZXMvZGlhbG9nLmpzIiwic2VydmljZXMvZW52aXJvbm1lbnQuanMiLCJzZXJ2aWNlcy9tYWluLmpzIiwic2VydmljZXMvbW91c2UuanMiLCJzZXJ2aWNlcy9uYXZpZ2F0aW9uLmpzIiwic2VydmljZXMvdXNlci5qcyIsImxpYnMvdGhyZWUuanMvRGV0ZWN0b3IuanMiLCJsaWJzL3RocmVlLmpzL3RocmVlLm1pbi5qcyIsImxpYnMvdGhyZWUuanMvdGhyZWV4LndpbmRvd3Jlc2l6ZS5qcyIsInNlcnZpY2VzL21vZGVscy9CYXNlT2JqZWN0LmpzIiwic2VydmljZXMvbW9kZWxzL0Jvb2tPYmplY3QuanMiLCJzZXJ2aWNlcy9tb2RlbHMvQ2FtZXJhT2JqZWN0LmpzIiwic2VydmljZXMvbW9kZWxzL0NhbnZhc0ltYWdlLmpzIiwic2VydmljZXMvbW9kZWxzL0NhbnZhc1RleHQuanMiLCJzZXJ2aWNlcy9tb2RlbHMvTGlicmFyeU9iamVjdC5qcyIsInNlcnZpY2VzL21vZGVscy9TZWN0aW9uT2JqZWN0LmpzIiwic2VydmljZXMvbW9kZWxzL1NlbGVjdG9yTWV0YS5qcyIsInNlcnZpY2VzL21vZGVscy9TaGVsZk9iamVjdC5qcyIsInNlcnZpY2VzL3NjZW5lL2hpZ2hsaWdodC5qcyIsInNlcnZpY2VzL3NjZW5lL2xvY2F0b3IuanMiLCJzZXJ2aWNlcy9zY2VuZS9zZWxlY3Rvci5qcyIsInNlcnZpY2VzL3VpL2F1dGhvcml6YXRpb24uanMiLCJzZXJ2aWNlcy91aS9ibG9jay5qcyIsInNlcnZpY2VzL3VpL2Jvb2tFZGl0LmpzIiwic2VydmljZXMvdWkvY2F0YWxvZy5qcyIsInNlcnZpY2VzL3VpL2NyZWF0ZUxpYnJhcnkuanMiLCJzZXJ2aWNlcy91aS9jcmVhdGVTZWN0aW9uLmpzIiwic2VydmljZXMvdWkvZmVlZGJhY2suanMiLCJzZXJ2aWNlcy91aS9pbnZlbnRvcnkuanMiLCJzZXJ2aWNlcy91aS9tYWluTWVudS5qcyIsInNlcnZpY2VzL3VpL3NlbGVjdExpYnJhcnkuanMiLCJzZXJ2aWNlcy91aS91aVRvb2xzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNyQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN4QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN2RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDcklBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbkRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNsSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNwSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDL0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbFFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMxREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2hIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNsREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDckRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMxREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM5ckJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNwREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDcEtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3pJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3JCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDNUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQy9DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2xDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3BCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQy9EQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM5TUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2pHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN6Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNyR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDdkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ25DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbkVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDdkZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiYW5ndWxhclxuICAgIC5tb2R1bGUoJ1ZpcnR1YWxCb29rc2hlbGYnLCBbJ2Jsb2NrVUknLCAnbmdEaWFsb2cnLCAnYW5ndWxhclV0aWxzLmRpcmVjdGl2ZXMuZGlyUGFnaW5hdGlvbiddKVxuICAgIFx0LmNvbmZpZyhmdW5jdGlvbiAoYmxvY2tVSUNvbmZpZywgcGFnaW5hdGlvblRlbXBsYXRlUHJvdmlkZXIpIHtcbiAgICBcdFx0YmxvY2tVSUNvbmZpZy5kZWxheSA9IDA7XG4gICAgXHRcdGJsb2NrVUlDb25maWcuYXV0b0Jsb2NrID0gZmFsc2U7XG5cdFx0XHRibG9ja1VJQ29uZmlnLmF1dG9JbmplY3RCb2R5QmxvY2sgPSBmYWxzZTtcblx0XHRcdHBhZ2luYXRpb25UZW1wbGF0ZVByb3ZpZGVyLnNldFBhdGgoJy9qcy9hbmd1bGFyL2RpclBhZ2luYXRpb24vZGlyUGFnaW5hdGlvbi50cGwuaHRtbCcpO1xuICAgIFx0fSlcbiAgICBcdC5ydW4oZnVuY3Rpb24gKE1haW4pIHtcblx0XHRcdE1haW4uc3RhcnQoKTtcbiAgICBcdH0pOyIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5jb250cm9sbGVyKCdUb29sc0N0cmwnLCBmdW5jdGlvbiAodWlUb29scykge1xuICAgIHRoaXMuaXNTaG93ID0gdWlUb29scy5pc1Nob3c7XG4gICAgdGhpcy5pc1JvdGF0YWJsZSA9IHVpVG9vbHMuaXNSb3RhdGFibGU7XG4gICAgdGhpcy5yb3RhdGVMZWZ0ID0gdWlUb29scy5yb3RhdGVMZWZ0O1xuICAgIHRoaXMucm90YXRlUmlnaHQgPSB1aVRvb2xzLnJvdGF0ZVJpZ2h0O1xuICAgIHRoaXMuc3RvcCA9IHVpVG9vbHMuc3RvcDtcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5jb250cm9sbGVyKCdVaUN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCBtYWluTWVudSwgc2VsZWN0TGlicmFyeSwgY3JlYXRlTGlicmFyeSwgY3JlYXRlU2VjdGlvbiwgZmVlZGJhY2ssIGF1dGhvcml6YXRpb24sIG5hdmlnYXRpb24sIGludmVudG9yeSwgYm9va0VkaXQsIGNhdGFsb2cpIHtcbiAgICAkc2NvcGUubWFpbk1lbnUgPSBtYWluTWVudTtcblxuICAgICRzY29wZS5zZWxlY3RMaWJyYXJ5ID0gc2VsZWN0TGlicmFyeTtcbiAgICAkc2NvcGUuY3JlYXRlTGlicmFyeSA9IGNyZWF0ZUxpYnJhcnk7XG4gICAgJHNjb3BlLmNyZWF0ZVNlY3Rpb24gPSBjcmVhdGVTZWN0aW9uO1xuICAgICRzY29wZS5mZWVkYmFjayA9IGZlZWRiYWNrO1xuICAgICRzY29wZS5hdXRob3JpemF0aW9uID0gYXV0aG9yaXphdGlvbjtcblxuICAgICRzY29wZS5pbnZlbnRvcnkgPSBpbnZlbnRvcnk7XG4gICAgJHNjb3BlLmJvb2tFZGl0ID0gYm9va0VkaXQ7XG4gICAgJHNjb3BlLmNhdGFsb2cgPSBjYXRhbG9nO1xuXG5cdCRzY29wZS5uYXZpZ2F0aW9uID0ge1xuXHRcdHN0b3A6IG5hdmlnYXRpb24uZ29TdG9wLFxuXHRcdGZvcndhcmQ6IG5hdmlnYXRpb24uZ29Gb3J3YXJkLFxuXHRcdGJhY2t3YXJkOiBuYXZpZ2F0aW9uLmdvQmFja3dhcmQsXG5cdFx0bGVmdDogbmF2aWdhdGlvbi5nb0xlZnQsXG5cdFx0cmlnaHQ6IG5hdmlnYXRpb24uZ29SaWdodFxuXHR9O1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ1ZpcnR1YWxCb29rc2hlbGYnKVxuLmRpcmVjdGl2ZSgndmJTZWxlY3QnLCBmdW5jdGlvbigpIHtcblx0cmV0dXJuIHtcblx0XHRyZXF1aXJlOiAnbmdNb2RlbCcsXG5cdFx0cmVzdHJpY3Q6ICdFJyxcbiAgICBcdHRyYW5zY2x1ZGU6IHRydWUsXG5cdFx0dGVtcGxhdGVVcmw6ICcvdWkvc2VsZWN0LmVqcycsXG5cdFx0c2NvcGU6IHtcblx0XHRcdG9wdGlvbnM6ICc9Jyxcblx0XHRcdHZhbHVlOiAnQCcsXG5cdFx0XHRsYWJlbDogJ0AnXG5cdFx0fSxcblxuXHRcdGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY29udHJvbGxlcikge1xuXHRcdFx0c2NvcGUuc2VsZWN0ID0gZnVuY3Rpb24oaXRlbSkge1xuXHRcdFx0XHRjb250cm9sbGVyLiRzZXRWaWV3VmFsdWUoaXRlbVtzY29wZS52YWx1ZV0pO1xuXHRcdFx0fTtcblxuXHRcdFx0c2NvcGUuaXNTZWxlY3RlZCA9IGZ1bmN0aW9uKGl0ZW0pIHtcblx0XHRcdFx0cmV0dXJuIGNvbnRyb2xsZXIuJG1vZGVsVmFsdWUgPT09IGl0ZW1bc2NvcGUudmFsdWVdO1xuXHRcdFx0fTtcblx0XHR9XG5cdH07XG59KTtcbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIGxvZGFzaCAzLjIuMCAoQ3VzdG9tIEJ1aWxkKSBsb2Rhc2guY29tL2xpY2Vuc2UgfCBVbmRlcnNjb3JlLmpzIDEuNy4wIHVuZGVyc2NvcmVqcy5vcmcvTElDRU5TRVxuICogQnVpbGQ6IGBsb2Rhc2ggbW9kZXJuIC1vIC4vbG9kYXNoLmpzYFxuICovXG47KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gbihuLHQpe2lmKG4hPT10KXt2YXIgcj1uPT09bixlPXQ9PT10O2lmKG4+dHx8IXJ8fHR5cGVvZiBuPT1cInVuZGVmaW5lZFwiJiZlKXJldHVybiAxO2lmKG48dHx8IWV8fHR5cGVvZiB0PT1cInVuZGVmaW5lZFwiJiZyKXJldHVybi0xfXJldHVybiAwfWZ1bmN0aW9uIHQobix0LHIpe2lmKHQhPT10KXJldHVybiBwKG4scik7cj0ocnx8MCktMTtmb3IodmFyIGU9bi5sZW5ndGg7KytyPGU7KWlmKG5bcl09PT10KXJldHVybiByO3JldHVybi0xfWZ1bmN0aW9uIHIobix0KXt2YXIgcj1uLmxlbmd0aDtmb3Iobi5zb3J0KHQpO3ItLTspbltyXT1uW3JdLmM7cmV0dXJuIG59ZnVuY3Rpb24gZShuKXtyZXR1cm4gdHlwZW9mIG49PVwic3RyaW5nXCI/bjpudWxsPT1uP1wiXCI6bitcIlwifWZ1bmN0aW9uIHUobil7cmV0dXJuIG4uY2hhckNvZGVBdCgwKX1mdW5jdGlvbiBvKG4sdCl7Zm9yKHZhciByPS0xLGU9bi5sZW5ndGg7KytyPGUmJi0xPHQuaW5kZXhPZihuLmNoYXJBdChyKSk7KTtyZXR1cm4gclxufWZ1bmN0aW9uIGkobix0KXtmb3IodmFyIHI9bi5sZW5ndGg7ci0tJiYtMTx0LmluZGV4T2Yobi5jaGFyQXQocikpOyk7cmV0dXJuIHJ9ZnVuY3Rpb24gZih0LHIpe3JldHVybiBuKHQuYSxyLmEpfHx0LmItci5ifWZ1bmN0aW9uIGEodCxyKXtmb3IodmFyIGU9LTEsdT10LmEsbz1yLmEsaT11Lmxlbmd0aDsrK2U8aTspe3ZhciBmPW4odVtlXSxvW2VdKTtpZihmKXJldHVybiBmfXJldHVybiB0LmItci5ifWZ1bmN0aW9uIGMobil7cmV0dXJuIFd0W25dfWZ1bmN0aW9uIGwobil7cmV0dXJuIE50W25dfWZ1bmN0aW9uIHMobil7cmV0dXJuXCJcXFxcXCIrTHRbbl19ZnVuY3Rpb24gcChuLHQscil7dmFyIGU9bi5sZW5ndGg7Zm9yKHQ9cj90fHxlOih0fHwwKS0xO3I/dC0tOisrdDxlOyl7dmFyIHU9blt0XTtpZih1IT09dSlyZXR1cm4gdH1yZXR1cm4tMX1mdW5jdGlvbiBoKG4pe3JldHVybiBuJiZ0eXBlb2Ygbj09XCJvYmplY3RcInx8ZmFsc2V9ZnVuY3Rpb24gXyhuKXtyZXR1cm4gMTYwPj1uJiY5PD1uJiYxMz49bnx8MzI9PW58fDE2MD09bnx8NTc2MD09bnx8NjE1OD09bnx8ODE5Mjw9biYmKDgyMDI+PW58fDgyMzI9PW58fDgyMzM9PW58fDgyMzk9PW58fDgyODc9PW58fDEyMjg4PT1ufHw2NTI3OT09bilcbn1mdW5jdGlvbiBnKG4sdCl7Zm9yKHZhciByPS0xLGU9bi5sZW5ndGgsdT0tMSxvPVtdOysrcjxlOyluW3JdPT09dCYmKG5bcl09QixvWysrdV09cik7cmV0dXJuIG99ZnVuY3Rpb24gdihuKXtmb3IodmFyIHQ9LTEscj1uLmxlbmd0aDsrK3Q8ciYmXyhuLmNoYXJDb2RlQXQodCkpOyk7cmV0dXJuIHR9ZnVuY3Rpb24geShuKXtmb3IodmFyIHQ9bi5sZW5ndGg7dC0tJiZfKG4uY2hhckNvZGVBdCh0KSk7KTtyZXR1cm4gdH1mdW5jdGlvbiBkKG4pe3JldHVybiBVdFtuXX1mdW5jdGlvbiBtKF8pe2Z1bmN0aW9uIFd0KG4pe2lmKGgobikmJiEoU28obil8fG4gaW5zdGFuY2VvZiBVdCkpe2lmKG4gaW5zdGFuY2VvZiBOdClyZXR1cm4gbjtpZihVdS5jYWxsKG4sXCJfX2NoYWluX19cIikmJlV1LmNhbGwobixcIl9fd3JhcHBlZF9fXCIpKXJldHVybiBoZShuKX1yZXR1cm4gbmV3IE50KG4pfWZ1bmN0aW9uIE50KG4sdCxyKXt0aGlzLl9fd3JhcHBlZF9fPW4sdGhpcy5fX2FjdGlvbnNfXz1yfHxbXSx0aGlzLl9fY2hhaW5fXz0hIXRcbn1mdW5jdGlvbiBVdChuKXt0aGlzLl9fd3JhcHBlZF9fPW4sdGhpcy5fX2FjdGlvbnNfXz1udWxsLHRoaXMuX19kaXJfXz0xLHRoaXMuX19kcm9wQ291bnRfXz0wLHRoaXMuX19maWx0ZXJlZF9fPWZhbHNlLHRoaXMuX19pdGVyYXRlZXNfXz1udWxsLHRoaXMuX190YWtlQ291bnRfXz1zbyx0aGlzLl9fdmlld3NfXz1udWxsfWZ1bmN0aW9uIEZ0KCl7dGhpcy5fX2RhdGFfXz17fX1mdW5jdGlvbiBMdChuKXt2YXIgdD1uP24ubGVuZ3RoOjA7Zm9yKHRoaXMuZGF0YT17aGFzaDp0byhudWxsKSxzZXQ6bmV3IFp1fTt0LS07KXRoaXMucHVzaChuW3RdKX1mdW5jdGlvbiBCdChuLHQpe3ZhciByPW4uZGF0YTtyZXR1cm4odHlwZW9mIHQ9PVwic3RyaW5nXCJ8fFhlKHQpP3Iuc2V0Lmhhcyh0KTpyLmhhc2hbdF0pPzA6LTF9ZnVuY3Rpb24genQobix0KXt2YXIgcj0tMSxlPW4ubGVuZ3RoO2Zvcih0fHwodD13dShlKSk7KytyPGU7KXRbcl09bltyXTtyZXR1cm4gdH1mdW5jdGlvbiBNdChuLHQpe2Zvcih2YXIgcj0tMSxlPW4ubGVuZ3RoOysrcjxlJiZmYWxzZSE9PXQobltyXSxyLG4pOyk7cmV0dXJuIG5cbn1mdW5jdGlvbiBxdChuLHQpe2Zvcih2YXIgcj0tMSxlPW4ubGVuZ3RoOysrcjxlOylpZighdChuW3JdLHIsbikpcmV0dXJuIGZhbHNlO3JldHVybiB0cnVlfWZ1bmN0aW9uIFB0KG4sdCl7Zm9yKHZhciByPS0xLGU9bi5sZW5ndGgsdT0tMSxvPVtdOysrcjxlOyl7dmFyIGk9bltyXTt0KGkscixuKSYmKG9bKyt1XT1pKX1yZXR1cm4gb31mdW5jdGlvbiBLdChuLHQpe2Zvcih2YXIgcj0tMSxlPW4ubGVuZ3RoLHU9d3UoZSk7KytyPGU7KXVbcl09dChuW3JdLHIsbik7cmV0dXJuIHV9ZnVuY3Rpb24gVnQobil7Zm9yKHZhciB0PS0xLHI9bi5sZW5ndGgsZT1sbzsrK3Q8cjspe3ZhciB1PW5bdF07dT5lJiYoZT11KX1yZXR1cm4gZX1mdW5jdGlvbiBZdChuLHQscixlKXt2YXIgdT0tMSxvPW4ubGVuZ3RoO2ZvcihlJiZvJiYocj1uWysrdV0pOysrdTxvOylyPXQocixuW3VdLHUsbik7cmV0dXJuIHJ9ZnVuY3Rpb24gWnQobix0LHIsZSl7dmFyIHU9bi5sZW5ndGg7Zm9yKGUmJnUmJihyPW5bLS11XSk7dS0tOylyPXQocixuW3VdLHUsbik7XG5yZXR1cm4gcn1mdW5jdGlvbiBHdChuLHQpe2Zvcih2YXIgcj0tMSxlPW4ubGVuZ3RoOysrcjxlOylpZih0KG5bcl0scixuKSlyZXR1cm4gdHJ1ZTtyZXR1cm4gZmFsc2V9ZnVuY3Rpb24gSnQobix0KXtyZXR1cm4gdHlwZW9mIG49PVwidW5kZWZpbmVkXCI/dDpufWZ1bmN0aW9uIFh0KG4sdCxyLGUpe3JldHVybiB0eXBlb2YgbiE9XCJ1bmRlZmluZWRcIiYmVXUuY2FsbChlLHIpP246dH1mdW5jdGlvbiBIdChuLHQscil7dmFyIGU9Rm8odCk7aWYoIXIpcmV0dXJuIG5yKHQsbixlKTtmb3IodmFyIHU9LTEsbz1lLmxlbmd0aDsrK3U8bzspe3ZhciBpPWVbdV0sZj1uW2ldLGE9cihmLHRbaV0saSxuLHQpOyhhPT09YT9hPT09ZjpmIT09ZikmJih0eXBlb2YgZiE9XCJ1bmRlZmluZWRcInx8aSBpbiBuKXx8KG5baV09YSl9cmV0dXJuIG59ZnVuY3Rpb24gUXQobix0KXtmb3IodmFyIHI9LTEsZT1uLmxlbmd0aCx1PW9lKGUpLG89dC5sZW5ndGgsaT13dShvKTsrK3I8bzspe3ZhciBmPXRbcl07dT8oZj1wYXJzZUZsb2F0KGYpLGlbcl09ZWUoZixlKT9uW2ZdOncpOmlbcl09bltmXVxufXJldHVybiBpfWZ1bmN0aW9uIG5yKG4sdCxyKXtyfHwocj10LHQ9e30pO2Zvcih2YXIgZT0tMSx1PXIubGVuZ3RoOysrZTx1Oyl7dmFyIG89cltlXTt0W29dPW5bb119cmV0dXJuIHR9ZnVuY3Rpb24gdHIobix0LHIpe3ZhciBlPXR5cGVvZiBuO2lmKFwiZnVuY3Rpb25cIj09ZSl7aWYoZT10eXBlb2YgdCE9XCJ1bmRlZmluZWRcIil7dmFyIGU9V3Quc3VwcG9ydCx1PSEoZS5mdW5jTmFtZXM/bi5uYW1lOmUuZnVuY0RlY29tcCk7aWYoIXUpe3ZhciBvPVd1LmNhbGwobik7ZS5mdW5jTmFtZXN8fCh1PSFkdC50ZXN0KG8pKSx1fHwodT1rdC50ZXN0KG8pfHxIZShuKSxibyhuLHUpKX1lPXV9bj1lP05yKG4sdCxyKTpufWVsc2Ugbj1udWxsPT1uP3Z1Olwib2JqZWN0XCI9PWU/YnIobik6dHlwZW9mIHQ9PVwidW5kZWZpbmVkXCI/anIobitcIlwiKTp4cihuK1wiXCIsdCk7cmV0dXJuIG59ZnVuY3Rpb24gcnIobix0LHIsZSx1LG8saSl7dmFyIGY7aWYociYmKGY9dT9yKG4sZSx1KTpyKG4pKSx0eXBlb2YgZiE9XCJ1bmRlZmluZWRcIilyZXR1cm4gZjtcbmlmKCFYZShuKSlyZXR1cm4gbjtpZihlPVNvKG4pKXtpZihmPW5lKG4pLCF0KXJldHVybiB6dChuLGYpfWVsc2V7dmFyIGE9THUuY2FsbChuKSxjPWE9PUs7aWYoYSE9WSYmYSE9eiYmKCFjfHx1KSlyZXR1cm4gVHRbYV0/cmUobixhLHQpOnU/bjp7fTtpZihmPXRlKGM/e306biksIXQpcmV0dXJuIG5yKG4sZixGbyhuKSl9Zm9yKG98fChvPVtdKSxpfHwoaT1bXSksdT1vLmxlbmd0aDt1LS07KWlmKG9bdV09PW4pcmV0dXJuIGlbdV07cmV0dXJuIG8ucHVzaChuKSxpLnB1c2goZiksKGU/TXQ6X3IpKG4sZnVuY3Rpb24oZSx1KXtmW3VdPXJyKGUsdCxyLHUsbixvLGkpfSksZn1mdW5jdGlvbiBlcihuLHQscixlKXtpZih0eXBlb2YgbiE9XCJmdW5jdGlvblwiKXRocm93IG5ldyBPdSgkKTtyZXR1cm4gR3UoZnVuY3Rpb24oKXtuLmFwcGx5KHcsUnIocixlKSl9LHQpfWZ1bmN0aW9uIHVyKG4scil7dmFyIGU9bj9uLmxlbmd0aDowLHU9W107aWYoIWUpcmV0dXJuIHU7dmFyIG89LTEsaT1RcigpLGY9aT09dCxhPWYmJjIwMDw9ci5sZW5ndGgmJnhvKHIpLGM9ci5sZW5ndGg7XG5hJiYoaT1CdCxmPWZhbHNlLHI9YSk7bjpmb3IoOysrbzxlOylpZihhPW5bb10sZiYmYT09PWEpe2Zvcih2YXIgbD1jO2wtLTspaWYocltsXT09PWEpY29udGludWUgbjt1LnB1c2goYSl9ZWxzZSAwPmkocixhKSYmdS5wdXNoKGEpO3JldHVybiB1fWZ1bmN0aW9uIG9yKG4sdCl7dmFyIHI9bj9uLmxlbmd0aDowO2lmKCFvZShyKSlyZXR1cm4gX3Iobix0KTtmb3IodmFyIGU9LTEsdT1wZShuKTsrK2U8ciYmZmFsc2UhPT10KHVbZV0sZSx1KTspO3JldHVybiBufWZ1bmN0aW9uIGlyKG4sdCl7dmFyIHI9bj9uLmxlbmd0aDowO2lmKCFvZShyKSlyZXR1cm4gZ3Iobix0KTtmb3IodmFyIGU9cGUobik7ci0tJiZmYWxzZSE9PXQoZVtyXSxyLGUpOyk7cmV0dXJuIG59ZnVuY3Rpb24gZnIobix0KXt2YXIgcj10cnVlO3JldHVybiBvcihuLGZ1bmN0aW9uKG4sZSx1KXtyZXR1cm4gcj0hIXQobixlLHUpfSkscn1mdW5jdGlvbiBhcihuLHQpe3ZhciByPVtdO3JldHVybiBvcihuLGZ1bmN0aW9uKG4sZSx1KXt0KG4sZSx1KSYmci5wdXNoKG4pXG59KSxyfWZ1bmN0aW9uIGNyKG4sdCxyLGUpe3ZhciB1O3JldHVybiByKG4sZnVuY3Rpb24obixyLG8pe3JldHVybiB0KG4scixvKT8odT1lP3I6bixmYWxzZSk6dm9pZCAwfSksdX1mdW5jdGlvbiBscihuLHQscixlKXtlPShlfHwwKS0xO2Zvcih2YXIgdT1uLmxlbmd0aCxvPS0xLGk9W107KytlPHU7KXt2YXIgZj1uW2VdO2lmKGgoZikmJm9lKGYubGVuZ3RoKSYmKFNvKGYpfHxZZShmKSkpe3QmJihmPWxyKGYsdCxyKSk7dmFyIGE9LTEsYz1mLmxlbmd0aDtmb3IoaS5sZW5ndGgrPWM7KythPGM7KWlbKytvXT1mW2FdfWVsc2Ugcnx8KGlbKytvXT1mKX1yZXR1cm4gaX1mdW5jdGlvbiBzcihuLHQscil7dmFyIGU9LTEsdT1wZShuKTtyPXIobik7Zm9yKHZhciBvPXIubGVuZ3RoOysrZTxvOyl7dmFyIGk9cltlXTtpZihmYWxzZT09PXQodVtpXSxpLHUpKWJyZWFrfXJldHVybiBufWZ1bmN0aW9uIHByKG4sdCxyKXt2YXIgZT1wZShuKTtyPXIobik7Zm9yKHZhciB1PXIubGVuZ3RoO3UtLTspe3ZhciBvPXJbdV07XG5pZihmYWxzZT09PXQoZVtvXSxvLGUpKWJyZWFrfXJldHVybiBufWZ1bmN0aW9uIGhyKG4sdCl7c3Iobix0LG91KX1mdW5jdGlvbiBfcihuLHQpe3JldHVybiBzcihuLHQsRm8pfWZ1bmN0aW9uIGdyKG4sdCl7cmV0dXJuIHByKG4sdCxGbyl9ZnVuY3Rpb24gdnIobix0KXtmb3IodmFyIHI9LTEsZT10Lmxlbmd0aCx1PS0xLG89W107KytyPGU7KXt2YXIgaT10W3JdO0plKG5baV0pJiYob1srK3VdPWkpfXJldHVybiBvfWZ1bmN0aW9uIHlyKG4sdCxyKXt2YXIgZT0tMSx1PXR5cGVvZiB0PT1cImZ1bmN0aW9uXCIsbz1uP24ubGVuZ3RoOjAsaT1vZShvKT93dShvKTpbXTtyZXR1cm4gb3IobixmdW5jdGlvbihuKXt2YXIgbz11P3Q6bnVsbCE9biYmblt0XTtpWysrZV09bz9vLmFwcGx5KG4scik6d30pLGl9ZnVuY3Rpb24gZHIobix0LHIsZSx1LG8pe2lmKG49PT10KXJldHVybiAwIT09bnx8MS9uPT0xL3Q7dmFyIGk9dHlwZW9mIG4sZj10eXBlb2YgdDtpZihcImZ1bmN0aW9uXCIhPWkmJlwib2JqZWN0XCIhPWkmJlwiZnVuY3Rpb25cIiE9ZiYmXCJvYmplY3RcIiE9Znx8bnVsbD09bnx8bnVsbD09dCluPW4hPT1uJiZ0IT09dDtcbmVsc2Ugbjp7dmFyIGk9ZHIsZj1TbyhuKSxhPVNvKHQpLGM9RCxsPUQ7Znx8KGM9THUuY2FsbChuKSxjPT16P2M9WTpjIT1ZJiYoZj1ydShuKSkpLGF8fChsPUx1LmNhbGwodCksbD09ej9sPVk6bCE9WSYmcnUodCkpO3ZhciBzPWM9PVksYT1sPT1ZLGw9Yz09bDtpZighbHx8Znx8cylpZihjPXMmJlV1LmNhbGwobixcIl9fd3JhcHBlZF9fXCIpLGE9YSYmVXUuY2FsbCh0LFwiX193cmFwcGVkX19cIiksY3x8YSluPWkoYz9uLnZhbHVlKCk6bixhP3QudmFsdWUoKTp0LHIsZSx1LG8pO2Vsc2UgaWYobCl7Zm9yKHV8fCh1PVtdKSxvfHwobz1bXSksYz11Lmxlbmd0aDtjLS07KWlmKHVbY109PW4pe249b1tjXT09dDticmVhayBufXUucHVzaChuKSxvLnB1c2godCksbj0oZj9acjpKcikobix0LGkscixlLHUsbyksdS5wb3AoKSxvLnBvcCgpfWVsc2Ugbj1mYWxzZTtlbHNlIG49R3Iobix0LGMpfXJldHVybiBufWZ1bmN0aW9uIG1yKG4sdCxyLGUsdSl7dmFyIG89dC5sZW5ndGg7aWYobnVsbD09bilyZXR1cm4hbztcbmZvcih2YXIgaT0tMSxmPSF1OysraTxvOylpZihmJiZlW2ldP3JbaV0hPT1uW3RbaV1dOiFVdS5jYWxsKG4sdFtpXSkpcmV0dXJuIGZhbHNlO2ZvcihpPS0xOysraTxvOyl7dmFyIGE9dFtpXTtpZihmJiZlW2ldKWE9VXUuY2FsbChuLGEpO2Vsc2V7dmFyIGM9blthXSxsPXJbaV0sYT11P3UoYyxsLGEpOnc7dHlwZW9mIGE9PVwidW5kZWZpbmVkXCImJihhPWRyKGwsYyx1LHRydWUpKX1pZighYSlyZXR1cm4gZmFsc2V9cmV0dXJuIHRydWV9ZnVuY3Rpb24gd3Iobix0KXt2YXIgcj1bXTtyZXR1cm4gb3IobixmdW5jdGlvbihuLGUsdSl7ci5wdXNoKHQobixlLHUpKX0pLHJ9ZnVuY3Rpb24gYnIobil7dmFyIHQ9Rm8obikscj10Lmxlbmd0aDtpZigxPT1yKXt2YXIgZT10WzBdLHU9bltlXTtpZihpZSh1KSlyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIG51bGwhPW4mJm5bZV09PT11JiZVdS5jYWxsKG4sZSl9fWZvcih2YXIgbz13dShyKSxpPXd1KHIpO3ItLTspdT1uW3Rbcl1dLG9bcl09dSxpW3JdPWllKHUpO3JldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gbXIobix0LG8saSlcbn19ZnVuY3Rpb24geHIobix0KXtyZXR1cm4gaWUodCk/ZnVuY3Rpb24ocil7cmV0dXJuIG51bGwhPXImJnJbbl09PT10fTpmdW5jdGlvbihyKXtyZXR1cm4gbnVsbCE9ciYmZHIodCxyW25dLG51bGwsdHJ1ZSl9fWZ1bmN0aW9uIEFyKG4sdCxyLGUsdSl7dmFyIG89b2UodC5sZW5ndGgpJiYoU28odCl8fHJ1KHQpKTtyZXR1cm4obz9NdDpfcikodCxmdW5jdGlvbih0LGksZil7aWYoaCh0KSl7ZXx8KGU9W10pLHV8fCh1PVtdKTtuOnt0PWU7Zm9yKHZhciBhPXUsYz10Lmxlbmd0aCxsPWZbaV07Yy0tOylpZih0W2NdPT1sKXtuW2ldPWFbY10saT12b2lkIDA7YnJlYWsgbn1jPW5baV0sZj1yP3IoYyxsLGksbixmKTp3O3ZhciBzPXR5cGVvZiBmPT1cInVuZGVmaW5lZFwiO3MmJihmPWwsb2UobC5sZW5ndGgpJiYoU28obCl8fHJ1KGwpKT9mPVNvKGMpP2M6Yz96dChjKTpbXTpObyhsKXx8WWUobCk/Zj1ZZShjKT9ldShjKTpObyhjKT9jOnt9OnM9ZmFsc2UpLHQucHVzaChsKSxhLnB1c2goZikscz9uW2ldPUFyKGYsbCxyLHQsYSk6KGY9PT1mP2YhPT1jOmM9PT1jKSYmKG5baV09ZiksaT12b2lkIDBcbn1yZXR1cm4gaX1hPW5baV0sZj1yP3IoYSx0LGksbixmKTp3LChsPXR5cGVvZiBmPT1cInVuZGVmaW5lZFwiKSYmKGY9dCksIW8mJnR5cGVvZiBmPT1cInVuZGVmaW5lZFwifHwhbCYmKGY9PT1mP2Y9PT1hOmEhPT1hKXx8KG5baV09Zil9KSxufWZ1bmN0aW9uIGpyKG4pe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dD93OnRbbl19fWZ1bmN0aW9uIGtyKG4sdCl7cmV0dXJuIG4rUHUoY28oKSoodC1uKzEpKX1mdW5jdGlvbiBFcihuLHQscixlLHUpe3JldHVybiB1KG4sZnVuY3Rpb24obix1LG8pe3I9ZT8oZT1mYWxzZSxuKTp0KHIsbix1LG8pfSkscn1mdW5jdGlvbiBScihuLHQscil7dmFyIGU9LTEsdT1uLmxlbmd0aDtmb3IodD1udWxsPT10PzA6K3R8fDAsMD50JiYodD0tdD51PzA6dSt0KSxyPXR5cGVvZiByPT1cInVuZGVmaW5lZFwifHxyPnU/dTorcnx8MCwwPnImJihyKz11KSx1PXQ+cj8wOnItdD4+PjAsdD4+Pj0wLHI9d3UodSk7KytlPHU7KXJbZV09bltlK3RdO3JldHVybiByfWZ1bmN0aW9uIElyKG4sdCl7dmFyIHI7XG5yZXR1cm4gb3IobixmdW5jdGlvbihuLGUsdSl7cmV0dXJuIHI9dChuLGUsdSksIXJ9KSwhIXJ9ZnVuY3Rpb24gT3IobixyKXt2YXIgZT0tMSx1PVFyKCksbz1uLmxlbmd0aCxpPXU9PXQsZj1pJiYyMDA8PW8sYT1mJiZ4bygpLGM9W107YT8odT1CdCxpPWZhbHNlKTooZj1mYWxzZSxhPXI/W106Yyk7bjpmb3IoOysrZTxvOyl7dmFyIGw9bltlXSxzPXI/cihsLGUsbik6bDtpZihpJiZsPT09bCl7Zm9yKHZhciBwPWEubGVuZ3RoO3AtLTspaWYoYVtwXT09PXMpY29udGludWUgbjtyJiZhLnB1c2gocyksYy5wdXNoKGwpfWVsc2UgMD51KGEscykmJigocnx8ZikmJmEucHVzaChzKSxjLnB1c2gobCkpfXJldHVybiBjfWZ1bmN0aW9uIENyKG4sdCl7Zm9yKHZhciByPS0xLGU9dC5sZW5ndGgsdT13dShlKTsrK3I8ZTspdVtyXT1uW3Rbcl1dO3JldHVybiB1fWZ1bmN0aW9uIFRyKG4sdCl7dmFyIHI9bjtyIGluc3RhbmNlb2YgVXQmJihyPXIudmFsdWUoKSk7Zm9yKHZhciBlPS0xLHU9dC5sZW5ndGg7KytlPHU7KXt2YXIgcj1bcl0sbz10W2VdO1xuVnUuYXBwbHkocixvLmFyZ3MpLHI9by5mdW5jLmFwcGx5KG8udGhpc0FyZyxyKX1yZXR1cm4gcn1mdW5jdGlvbiBTcihuLHQscil7dmFyIGU9MCx1PW4/bi5sZW5ndGg6ZTtpZih0eXBlb2YgdD09XCJudW1iZXJcIiYmdD09PXQmJnU8PV9vKXtmb3IoO2U8dTspe3ZhciBvPWUrdT4+PjEsaT1uW29dOyhyP2k8PXQ6aTx0KT9lPW8rMTp1PW99cmV0dXJuIHV9cmV0dXJuIFdyKG4sdCx2dSxyKX1mdW5jdGlvbiBXcihuLHQscixlKXt0PXIodCk7Zm9yKHZhciB1PTAsbz1uP24ubGVuZ3RoOjAsaT10IT09dCxmPXR5cGVvZiB0PT1cInVuZGVmaW5lZFwiO3U8bzspe3ZhciBhPVB1KCh1K28pLzIpLGM9cihuW2FdKSxsPWM9PT1jOyhpP2x8fGU6Zj9sJiYoZXx8dHlwZW9mIGMhPVwidW5kZWZpbmVkXCIpOmU/Yzw9dDpjPHQpP3U9YSsxOm89YX1yZXR1cm4gb28obyxobyl9ZnVuY3Rpb24gTnIobix0LHIpe2lmKHR5cGVvZiBuIT1cImZ1bmN0aW9uXCIpcmV0dXJuIHZ1O2lmKHR5cGVvZiB0PT1cInVuZGVmaW5lZFwiKXJldHVybiBuO1xuc3dpdGNoKHIpe2Nhc2UgMTpyZXR1cm4gZnVuY3Rpb24ocil7cmV0dXJuIG4uY2FsbCh0LHIpfTtjYXNlIDM6cmV0dXJuIGZ1bmN0aW9uKHIsZSx1KXtyZXR1cm4gbi5jYWxsKHQscixlLHUpfTtjYXNlIDQ6cmV0dXJuIGZ1bmN0aW9uKHIsZSx1LG8pe3JldHVybiBuLmNhbGwodCxyLGUsdSxvKX07Y2FzZSA1OnJldHVybiBmdW5jdGlvbihyLGUsdSxvLGkpe3JldHVybiBuLmNhbGwodCxyLGUsdSxvLGkpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbi5hcHBseSh0LGFyZ3VtZW50cyl9fWZ1bmN0aW9uIFVyKG4pe3JldHVybiBEdS5jYWxsKG4sMCl9ZnVuY3Rpb24gRnIobix0LHIpe2Zvcih2YXIgZT1yLmxlbmd0aCx1PS0xLG89dW8obi5sZW5ndGgtZSwwKSxpPS0xLGY9dC5sZW5ndGgsYT13dShvK2YpOysraTxmOylhW2ldPXRbaV07Zm9yKDsrK3U8ZTspYVtyW3VdXT1uW3VdO2Zvcig7by0tOylhW2krK109blt1KytdO3JldHVybiBhfWZ1bmN0aW9uIExyKG4sdCxyKXtmb3IodmFyIGU9LTEsdT1yLmxlbmd0aCxvPS0xLGk9dW8obi5sZW5ndGgtdSwwKSxmPS0xLGE9dC5sZW5ndGgsYz13dShpK2EpOysrbzxpOyljW29dPW5bb107XG5mb3IoaT1vOysrZjxhOyljW2krZl09dFtmXTtmb3IoOysrZTx1OyljW2krcltlXV09bltvKytdO3JldHVybiBjfWZ1bmN0aW9uICRyKG4sdCl7cmV0dXJuIGZ1bmN0aW9uKHIsZSx1KXt2YXIgbz10P3QoKTp7fTtpZihlPUhyKGUsdSwzKSxTbyhyKSl7dT0tMTtmb3IodmFyIGk9ci5sZW5ndGg7Kyt1PGk7KXt2YXIgZj1yW3VdO24obyxmLGUoZix1LHIpLHIpfX1lbHNlIG9yKHIsZnVuY3Rpb24odCxyLHUpe24obyx0LGUodCxyLHUpLHUpfSk7cmV0dXJuIG99fWZ1bmN0aW9uIEJyKG4pe3JldHVybiBmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGgscj1hcmd1bWVudHNbMF07aWYoMj50fHxudWxsPT1yKXJldHVybiByO2lmKDM8dCYmdWUoYXJndW1lbnRzWzFdLGFyZ3VtZW50c1syXSxhcmd1bWVudHNbM10pJiYodD0yKSwzPHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGFyZ3VtZW50c1t0LTJdKXZhciBlPU5yKGFyZ3VtZW50c1stLXQtMV0sYXJndW1lbnRzW3QtLV0sNSk7ZWxzZSAyPHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGFyZ3VtZW50c1t0LTFdJiYoZT1hcmd1bWVudHNbLS10XSk7XG5mb3IodmFyIHU9MDsrK3U8dDspe3ZhciBvPWFyZ3VtZW50c1t1XTtvJiZuKHIsbyxlKX1yZXR1cm4gcn19ZnVuY3Rpb24genIobix0KXtmdW5jdGlvbiByKCl7cmV0dXJuKHRoaXMgaW5zdGFuY2VvZiByP2U6bikuYXBwbHkodCxhcmd1bWVudHMpfXZhciBlPU1yKG4pO3JldHVybiByfWZ1bmN0aW9uIERyKG4pe3JldHVybiBmdW5jdGlvbih0KXt2YXIgcj0tMTt0PXB1KGZ1KHQpKTtmb3IodmFyIGU9dC5sZW5ndGgsdT1cIlwiOysrcjxlOyl1PW4odSx0W3JdLHIpO3JldHVybiB1fX1mdW5jdGlvbiBNcihuKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgdD13byhuLnByb3RvdHlwZSkscj1uLmFwcGx5KHQsYXJndW1lbnRzKTtyZXR1cm4gWGUocik/cjp0fX1mdW5jdGlvbiBxcihuLHQpe3JldHVybiBmdW5jdGlvbihyLGUsbyl7byYmdWUocixlLG8pJiYoZT1udWxsKTt2YXIgaT1IcigpLGY9bnVsbD09ZTtpZihpPT09dHImJmZ8fChmPWZhbHNlLGU9aShlLG8sMykpLGYpe2lmKGU9U28ociksZXx8IXR1KHIpKXJldHVybiBuKGU/cjpzZShyKSk7XG5lPXV9cmV0dXJuIFhyKHIsZSx0KX19ZnVuY3Rpb24gUHIobix0LHIsZSx1LG8saSxmLGEsYyl7ZnVuY3Rpb24gbCgpe2Zvcih2YXIgYj1hcmd1bWVudHMubGVuZ3RoLGo9YixrPXd1KGIpO2otLTspa1tqXT1hcmd1bWVudHNbal07aWYoZSYmKGs9RnIoayxlLHUpKSxvJiYoaz1McihrLG8saSkpLF98fHkpe3ZhciBqPWwucGxhY2Vob2xkZXIsRT1nKGssaiksYj1iLUUubGVuZ3RoO2lmKGI8Yyl7dmFyIE89Zj96dChmKTpudWxsLGI9dW8oYy1iLDApLEM9Xz9FOm51bGwsRT1fP251bGw6RSxUPV8/azpudWxsLGs9Xz9udWxsOms7cmV0dXJuIHR8PV8/UjpJLHQmPX4oXz9JOlIpLHZ8fCh0Jj1+KHh8QSkpLGs9UHIobix0LHIsVCxDLGssRSxPLGEsYiksay5wbGFjZWhvbGRlcj1qLGt9fWlmKGo9cD9yOnRoaXMsaCYmKG49alttXSksZilmb3IoTz1rLmxlbmd0aCxiPW9vKGYubGVuZ3RoLE8pLEM9enQoayk7Yi0tOylFPWZbYl0sa1tiXT1lZShFLE8pP0NbRV06dztyZXR1cm4gcyYmYTxrLmxlbmd0aCYmKGsubGVuZ3RoPWEpLCh0aGlzIGluc3RhbmNlb2YgbD9kfHxNcihuKTpuKS5hcHBseShqLGspXG59dmFyIHM9dCZDLHA9dCZ4LGg9dCZBLF89dCZrLHY9dCZqLHk9dCZFLGQ9IWgmJk1yKG4pLG09bjtyZXR1cm4gbH1mdW5jdGlvbiBLcihuLHQscil7cmV0dXJuIG49bi5sZW5ndGgsdD0rdCxuPHQmJnJvKHQpPyh0LT1uLHI9bnVsbD09cj9cIiBcIjpyK1wiXCIsbHUocixNdSh0L3IubGVuZ3RoKSkuc2xpY2UoMCx0KSk6XCJcIn1mdW5jdGlvbiBWcihuLHQscixlKXtmdW5jdGlvbiB1KCl7Zm9yKHZhciB0PS0xLGY9YXJndW1lbnRzLmxlbmd0aCxhPS0xLGM9ZS5sZW5ndGgsbD13dShmK2MpOysrYTxjOylsW2FdPWVbYV07Zm9yKDtmLS07KWxbYSsrXT1hcmd1bWVudHNbKyt0XTtyZXR1cm4odGhpcyBpbnN0YW5jZW9mIHU/aTpuKS5hcHBseShvP3I6dGhpcyxsKX12YXIgbz10JngsaT1NcihuKTtyZXR1cm4gdX1mdW5jdGlvbiBZcihuLHQscixlLHUsbyxpLGYpe3ZhciBhPXQmQTtpZighYSYmdHlwZW9mIG4hPVwiZnVuY3Rpb25cIil0aHJvdyBuZXcgT3UoJCk7dmFyIGM9ZT9lLmxlbmd0aDowO2lmKGN8fCh0Jj1+KFJ8SSksZT11PW51bGwpLGMtPXU/dS5sZW5ndGg6MCx0Jkkpe3ZhciBsPWUscz11O1xuZT11PW51bGx9dmFyIHA9IWEmJkFvKG4pO2lmKHI9W24sdCxyLGUsdSxsLHMsbyxpLGZdLHAmJnRydWUhPT1wKXtlPXJbMV0sdD1wWzFdLGY9ZXx0LG89Q3xPLHU9eHxBLGk9b3x1fGp8RTt2YXIgbD1lJkMmJiEodCZDKSxzPWUmTyYmISh0Jk8pLGg9KHM/cjpwKVs3XSxfPShsP3I6cClbOF07bz1mPj1vJiZmPD1pJiYoZTxPfHwoc3x8bCkmJmgubGVuZ3RoPD1fKSwoIShlPj1PJiZ0PnV8fGU+dSYmdD49Tyl8fG8pJiYodCZ4JiYoclsyXT1wWzJdLGZ8PWUmeD8wOmopLChlPXBbM10pJiYodT1yWzNdLHJbM109dT9Gcih1LGUscFs0XSk6enQoZSkscls0XT11P2coclszXSxCKTp6dChwWzRdKSksKGU9cFs1XSkmJih1PXJbNV0scls1XT11P0xyKHUsZSxwWzZdKTp6dChlKSxyWzZdPXU/ZyhyWzVdLEIpOnp0KHBbNl0pKSwoZT1wWzddKSYmKHJbN109enQoZSkpLHQmQyYmKHJbOF09bnVsbD09cls4XT9wWzhdOm9vKHJbOF0scFs4XSkpLG51bGw9PXJbOV0mJihyWzldPXBbOV0pLHJbMF09cFswXSxyWzFdPWYpLHQ9clsxXSxmPXJbOV1cbn1yZXR1cm4gcls5XT1udWxsPT1mP2E/MDpuLmxlbmd0aDp1byhmLWMsMCl8fDAsKHA/Ym86am8pKHQ9PXg/enIoclswXSxyWzJdKTp0IT1SJiZ0IT0oeHxSKXx8cls0XS5sZW5ndGg/UHIuYXBwbHkodyxyKTpWci5hcHBseSh3LHIpLHIpfWZ1bmN0aW9uIFpyKG4sdCxyLGUsdSxvLGkpe3ZhciBmPS0xLGE9bi5sZW5ndGgsYz10Lmxlbmd0aCxsPXRydWU7aWYoYSE9YyYmKCF1fHxjPD1hKSlyZXR1cm4gZmFsc2U7Zm9yKDtsJiYrK2Y8YTspe3ZhciBzPW5bZl0scD10W2ZdLGw9dztpZihlJiYobD11P2UocCxzLGYpOmUocyxwLGYpKSx0eXBlb2YgbD09XCJ1bmRlZmluZWRcIilpZih1KWZvcih2YXIgaD1jO2gtLSYmKHA9dFtoXSwhKGw9cyYmcz09PXB8fHIocyxwLGUsdSxvLGkpKSk7KTtlbHNlIGw9cyYmcz09PXB8fHIocyxwLGUsdSxvLGkpfXJldHVybiEhbH1mdW5jdGlvbiBHcihuLHQscil7c3dpdGNoKHIpe2Nhc2UgTTpjYXNlIHE6cmV0dXJuK249PSt0O2Nhc2UgUDpyZXR1cm4gbi5uYW1lPT10Lm5hbWUmJm4ubWVzc2FnZT09dC5tZXNzYWdlO1xuY2FzZSBWOnJldHVybiBuIT0rbj90IT0rdDowPT1uPzEvbj09MS90Om49PSt0O2Nhc2UgWjpjYXNlIEc6cmV0dXJuIG49PXQrXCJcIn1yZXR1cm4gZmFsc2V9ZnVuY3Rpb24gSnIobix0LHIsZSx1LG8saSl7dmFyIGY9Rm8obiksYT1mLmxlbmd0aCxjPUZvKHQpLmxlbmd0aDtpZihhIT1jJiYhdSlyZXR1cm4gZmFsc2U7Zm9yKHZhciBsLGM9LTE7KytjPGE7KXt2YXIgcz1mW2NdLHA9VXUuY2FsbCh0LHMpO2lmKHApe3ZhciBoPW5bc10sXz10W3NdLHA9dztlJiYocD11P2UoXyxoLHMpOmUoaCxfLHMpKSx0eXBlb2YgcD09XCJ1bmRlZmluZWRcIiYmKHA9aCYmaD09PV98fHIoaCxfLGUsdSxvLGkpKX1pZighcClyZXR1cm4gZmFsc2U7bHx8KGw9XCJjb25zdHJ1Y3RvclwiPT1zKX1yZXR1cm4gbHx8KHI9bi5jb25zdHJ1Y3RvcixlPXQuY29uc3RydWN0b3IsIShyIT1lJiZcImNvbnN0cnVjdG9yXCJpbiBuJiZcImNvbnN0cnVjdG9yXCJpbiB0KXx8dHlwZW9mIHI9PVwiZnVuY3Rpb25cIiYmciBpbnN0YW5jZW9mIHImJnR5cGVvZiBlPT1cImZ1bmN0aW9uXCImJmUgaW5zdGFuY2VvZiBlKT90cnVlOmZhbHNlXG59ZnVuY3Rpb24gWHIobix0LHIpe3ZhciBlPXI/c286bG8sdT1lLG89dTtyZXR1cm4gb3IobixmdW5jdGlvbihuLGksZil7aT10KG4saSxmKSwoKHI/aTx1Omk+dSl8fGk9PT1lJiZpPT09bykmJih1PWksbz1uKX0pLG99ZnVuY3Rpb24gSHIobix0LHIpe3ZhciBlPVd0LmNhbGxiYWNrfHxfdSxlPWU9PT1fdT90cjplO3JldHVybiByP2Uobix0LHIpOmV9ZnVuY3Rpb24gUXIobixyLGUpe3ZhciB1PVd0LmluZGV4T2Z8fGRlLHU9dT09PWRlP3Q6dTtyZXR1cm4gbj91KG4scixlKTp1fWZ1bmN0aW9uIG5lKG4pe3ZhciB0PW4ubGVuZ3RoLHI9bmV3IG4uY29uc3RydWN0b3IodCk7cmV0dXJuIHQmJlwic3RyaW5nXCI9PXR5cGVvZiBuWzBdJiZVdS5jYWxsKG4sXCJpbmRleFwiKSYmKHIuaW5kZXg9bi5pbmRleCxyLmlucHV0PW4uaW5wdXQpLHJ9ZnVuY3Rpb24gdGUobil7cmV0dXJuIG49bi5jb25zdHJ1Y3Rvcix0eXBlb2Ygbj09XCJmdW5jdGlvblwiJiZuIGluc3RhbmNlb2Ygbnx8KG49RXUpLG5ldyBuXG59ZnVuY3Rpb24gcmUobix0LHIpe3ZhciBlPW4uY29uc3RydWN0b3I7c3dpdGNoKHQpe2Nhc2UgSjpyZXR1cm4gVXIobik7Y2FzZSBNOmNhc2UgcTpyZXR1cm4gbmV3IGUoK24pO2Nhc2UgWDpjYXNlIEg6Y2FzZSBROmNhc2UgbnQ6Y2FzZSB0dDpjYXNlIHJ0OmNhc2UgZXQ6Y2FzZSB1dDpjYXNlIG90OnJldHVybiB0PW4uYnVmZmVyLG5ldyBlKHI/VXIodCk6dCxuLmJ5dGVPZmZzZXQsbi5sZW5ndGgpO2Nhc2UgVjpjYXNlIEc6cmV0dXJuIG5ldyBlKG4pO2Nhc2UgWjp2YXIgdT1uZXcgZShuLnNvdXJjZSx5dC5leGVjKG4pKTt1Lmxhc3RJbmRleD1uLmxhc3RJbmRleH1yZXR1cm4gdX1mdW5jdGlvbiBlZShuLHQpe3JldHVybiBuPStuLHQ9bnVsbD09dD92bzp0LC0xPG4mJjA9PW4lMSYmbjx0fWZ1bmN0aW9uIHVlKG4sdCxyKXtpZighWGUocikpcmV0dXJuIGZhbHNlO3ZhciBlPXR5cGVvZiB0O3JldHVyblwibnVtYmVyXCI9PWU/KGU9ci5sZW5ndGgsZT1vZShlKSYmZWUodCxlKSk6ZT1cInN0cmluZ1wiPT1lJiZ0IGluIHIsZSYmclt0XT09PW5cbn1mdW5jdGlvbiBvZShuKXtyZXR1cm4gdHlwZW9mIG49PVwibnVtYmVyXCImJi0xPG4mJjA9PW4lMSYmbjw9dm99ZnVuY3Rpb24gaWUobil7cmV0dXJuIG49PT1uJiYoMD09PW4/MDwxL246IVhlKG4pKX1mdW5jdGlvbiBmZShuLHQpe249cGUobik7Zm9yKHZhciByPS0xLGU9dC5sZW5ndGgsdT17fTsrK3I8ZTspe3ZhciBvPXRbcl07byBpbiBuJiYodVtvXT1uW29dKX1yZXR1cm4gdX1mdW5jdGlvbiBhZShuLHQpe3ZhciByPXt9O3JldHVybiBocihuLGZ1bmN0aW9uKG4sZSx1KXt0KG4sZSx1KSYmKHJbZV09bil9KSxyfWZ1bmN0aW9uIGNlKG4pe3ZhciB0O2lmKCFoKG4pfHxMdS5jYWxsKG4pIT1ZfHwhKFV1LmNhbGwobixcImNvbnN0cnVjdG9yXCIpfHwodD1uLmNvbnN0cnVjdG9yLHR5cGVvZiB0IT1cImZ1bmN0aW9uXCJ8fHQgaW5zdGFuY2VvZiB0KSkpcmV0dXJuIGZhbHNlO3ZhciByO3JldHVybiBocihuLGZ1bmN0aW9uKG4sdCl7cj10fSksdHlwZW9mIHI9PVwidW5kZWZpbmVkXCJ8fFV1LmNhbGwobixyKVxufWZ1bmN0aW9uIGxlKG4pe2Zvcih2YXIgdD1vdShuKSxyPXQubGVuZ3RoLGU9ciYmbi5sZW5ndGgsdT1XdC5zdXBwb3J0LHU9ZSYmb2UoZSkmJihTbyhuKXx8dS5ub25FbnVtQXJncyYmWWUobikpLG89LTEsaT1bXTsrK288cjspe3ZhciBmPXRbb107KHUmJmVlKGYsZSl8fFV1LmNhbGwobixmKSkmJmkucHVzaChmKX1yZXR1cm4gaX1mdW5jdGlvbiBzZShuKXtyZXR1cm4gbnVsbD09bj9bXTpvZShuLmxlbmd0aCk/WGUobik/bjpFdShuKTppdShuKX1mdW5jdGlvbiBwZShuKXtyZXR1cm4gWGUobik/bjpFdShuKX1mdW5jdGlvbiBoZShuKXtyZXR1cm4gbiBpbnN0YW5jZW9mIFV0P24uY2xvbmUoKTpuZXcgTnQobi5fX3dyYXBwZWRfXyxuLl9fY2hhaW5fXyx6dChuLl9fYWN0aW9uc19fKSl9ZnVuY3Rpb24gX2Uobix0LHIpe3JldHVybiBuJiZuLmxlbmd0aD8oKHI/dWUobix0LHIpOm51bGw9PXQpJiYodD0xKSxScihuLDA+dD8wOnQpKTpbXX1mdW5jdGlvbiBnZShuLHQscil7dmFyIGU9bj9uLmxlbmd0aDowO1xucmV0dXJuIGU/KChyP3VlKG4sdCxyKTpudWxsPT10KSYmKHQ9MSksdD1lLSgrdHx8MCksUnIobiwwLDA+dD8wOnQpKTpbXX1mdW5jdGlvbiB2ZShuLHQscil7dmFyIGU9LTEsdT1uP24ubGVuZ3RoOjA7Zm9yKHQ9SHIodCxyLDMpOysrZTx1OylpZih0KG5bZV0sZSxuKSlyZXR1cm4gZTtyZXR1cm4tMX1mdW5jdGlvbiB5ZShuKXtyZXR1cm4gbj9uWzBdOnd9ZnVuY3Rpb24gZGUobixyLGUpe3ZhciB1PW4/bi5sZW5ndGg6MDtpZighdSlyZXR1cm4tMTtpZih0eXBlb2YgZT09XCJudW1iZXJcIillPTA+ZT91byh1K2UsMCk6ZXx8MDtlbHNlIGlmKGUpcmV0dXJuIGU9U3IobixyKSxuPW5bZV0sKHI9PT1yP3I9PT1uOm4hPT1uKT9lOi0xO3JldHVybiB0KG4scixlKX1mdW5jdGlvbiBtZShuKXtyZXR1cm4gX2UobiwxKX1mdW5jdGlvbiB3ZShuLHIsZSx1KXtpZighbnx8IW4ubGVuZ3RoKXJldHVybltdO3R5cGVvZiByIT1cImJvb2xlYW5cIiYmbnVsbCE9ciYmKHU9ZSxlPXVlKG4scix1KT9udWxsOnIscj1mYWxzZSk7XG52YXIgbz1IcigpO2lmKChvIT09dHJ8fG51bGwhPWUpJiYoZT1vKGUsdSwzKSksciYmUXIoKT09dCl7cj1lO3ZhciBpO2U9LTEsdT1uLmxlbmd0aDtmb3IodmFyIG89LTEsZj1bXTsrK2U8dTspe3ZhciBhPW5bZV0sYz1yP3IoYSxlLG4pOmE7ZSYmaT09PWN8fChpPWMsZlsrK29dPWEpfW49Zn1lbHNlIG49T3IobixlKTtyZXR1cm4gbn1mdW5jdGlvbiBiZShuKXtmb3IodmFyIHQ9LTEscj0obiYmbi5sZW5ndGgmJlZ0KEt0KG4sTnUpKSk+Pj4wLGU9d3Uocik7Kyt0PHI7KWVbdF09S3Qobixqcih0KSk7cmV0dXJuIGV9ZnVuY3Rpb24geGUobix0KXt2YXIgcj0tMSxlPW4/bi5sZW5ndGg6MCx1PXt9O2ZvcighZXx8dHx8U28oblswXSl8fCh0PVtdKTsrK3I8ZTspe3ZhciBvPW5bcl07dD91W29dPXRbcl06byYmKHVbb1swXV09b1sxXSl9cmV0dXJuIHV9ZnVuY3Rpb24gQWUobil7cmV0dXJuIG49V3Qobiksbi5fX2NoYWluX189dHJ1ZSxufWZ1bmN0aW9uIGplKG4sdCxyKXtyZXR1cm4gdC5jYWxsKHIsbilcbn1mdW5jdGlvbiBrZShuLHQscil7dmFyIGU9bj9uLmxlbmd0aDowO3JldHVybiBvZShlKXx8KG49aXUobiksZT1uLmxlbmd0aCksZT8ocj10eXBlb2Ygcj09XCJudW1iZXJcIj8wPnI/dW8oZStyLDApOnJ8fDA6MCx0eXBlb2Ygbj09XCJzdHJpbmdcInx8IVNvKG4pJiZ0dShuKT9yPGUmJi0xPG4uaW5kZXhPZih0LHIpOi0xPFFyKG4sdCxyKSk6ZmFsc2V9ZnVuY3Rpb24gRWUobix0LHIpe3ZhciBlPVNvKG4pP3F0OmZyO3JldHVybih0eXBlb2YgdCE9XCJmdW5jdGlvblwifHx0eXBlb2YgciE9XCJ1bmRlZmluZWRcIikmJih0PUhyKHQsciwzKSksZShuLHQpfWZ1bmN0aW9uIFJlKG4sdCxyKXt2YXIgZT1TbyhuKT9QdDphcjtyZXR1cm4gdD1Icih0LHIsMyksZShuLHQpfWZ1bmN0aW9uIEllKG4sdCxyKXtyZXR1cm4gU28obik/KHQ9dmUobix0LHIpLC0xPHQ/blt0XTp3KToodD1Icih0LHIsMyksY3Iobix0LG9yKSl9ZnVuY3Rpb24gT2Uobix0LHIpe3JldHVybiB0eXBlb2YgdD09XCJmdW5jdGlvblwiJiZ0eXBlb2Ygcj09XCJ1bmRlZmluZWRcIiYmU28obik/TXQobix0KTpvcihuLE5yKHQsciwzKSlcbn1mdW5jdGlvbiBDZShuLHQscil7aWYodHlwZW9mIHQ9PVwiZnVuY3Rpb25cIiYmdHlwZW9mIHI9PVwidW5kZWZpbmVkXCImJlNvKG4pKWZvcihyPW4ubGVuZ3RoO3ItLSYmZmFsc2UhPT10KG5bcl0scixuKTspO2Vsc2Ugbj1pcihuLE5yKHQsciwzKSk7cmV0dXJuIG59ZnVuY3Rpb24gVGUobix0LHIpe3ZhciBlPVNvKG4pP0t0OndyO3JldHVybiB0PUhyKHQsciwzKSxlKG4sdCl9ZnVuY3Rpb24gU2Uobix0LHIsZSl7cmV0dXJuKFNvKG4pP1l0OkVyKShuLEhyKHQsZSw0KSxyLDM+YXJndW1lbnRzLmxlbmd0aCxvcil9ZnVuY3Rpb24gV2Uobix0LHIsZSl7cmV0dXJuKFNvKG4pP1p0OkVyKShuLEhyKHQsZSw0KSxyLDM+YXJndW1lbnRzLmxlbmd0aCxpcil9ZnVuY3Rpb24gTmUobix0LHIpe3JldHVybihyP3VlKG4sdCxyKTpudWxsPT10KT8obj1zZShuKSx0PW4ubGVuZ3RoLDA8dD9uW2tyKDAsdC0xKV06dyk6KG49VWUobiksbi5sZW5ndGg9b28oMD50PzA6K3R8fDAsbi5sZW5ndGgpLG4pfWZ1bmN0aW9uIFVlKG4pe249c2Uobik7XG5mb3IodmFyIHQ9LTEscj1uLmxlbmd0aCxlPXd1KHIpOysrdDxyOyl7dmFyIHU9a3IoMCx0KTt0IT11JiYoZVt0XT1lW3VdKSxlW3VdPW5bdF19cmV0dXJuIGV9ZnVuY3Rpb24gRmUobix0LHIpe3ZhciBlPVNvKG4pP0d0OklyO3JldHVybih0eXBlb2YgdCE9XCJmdW5jdGlvblwifHx0eXBlb2YgciE9XCJ1bmRlZmluZWRcIikmJih0PUhyKHQsciwzKSksZShuLHQpfWZ1bmN0aW9uIExlKG4sdCl7dmFyIHI7aWYodHlwZW9mIHQhPVwiZnVuY3Rpb25cIil7aWYodHlwZW9mIG4hPVwiZnVuY3Rpb25cIil0aHJvdyBuZXcgT3UoJCk7dmFyIGU9bjtuPXQsdD1lfXJldHVybiBmdW5jdGlvbigpe3JldHVybiAwPC0tbj9yPXQuYXBwbHkodGhpcyxhcmd1bWVudHMpOnQ9bnVsbCxyfX1mdW5jdGlvbiAkZShuLHQpe3ZhciByPXg7aWYoMjxhcmd1bWVudHMubGVuZ3RoKXZhciBlPVJyKGFyZ3VtZW50cywyKSx1PWcoZSwkZS5wbGFjZWhvbGRlcikscj1yfFI7cmV0dXJuIFlyKG4scix0LGUsdSl9ZnVuY3Rpb24gQmUobix0KXt2YXIgcj14fEE7XG5pZigyPGFyZ3VtZW50cy5sZW5ndGgpdmFyIGU9UnIoYXJndW1lbnRzLDIpLHU9ZyhlLEJlLnBsYWNlaG9sZGVyKSxyPXJ8UjtyZXR1cm4gWXIodCxyLG4sZSx1KX1mdW5jdGlvbiB6ZShuLHQscil7cmV0dXJuIHImJnVlKG4sdCxyKSYmKHQ9bnVsbCksbj1ZcihuLGssbnVsbCxudWxsLG51bGwsbnVsbCxudWxsLHQpLG4ucGxhY2Vob2xkZXI9emUucGxhY2Vob2xkZXIsbn1mdW5jdGlvbiBEZShuLHQscil7cmV0dXJuIHImJnVlKG4sdCxyKSYmKHQ9bnVsbCksbj1ZcihuLEUsbnVsbCxudWxsLG51bGwsbnVsbCxudWxsLHQpLG4ucGxhY2Vob2xkZXI9RGUucGxhY2Vob2xkZXIsbn1mdW5jdGlvbiBNZShuLHQscil7ZnVuY3Rpb24gZSgpe3ZhciByPXQtKFRvKCktYyk7MD49cnx8cj50PyhmJiZxdShmKSxyPXAsZj1zPXA9dyxyJiYoaD1UbygpLGE9bi5hcHBseShsLGkpLHN8fGZ8fChpPWw9bnVsbCkpKTpzPUd1KGUscil9ZnVuY3Rpb24gdSgpe3MmJnF1KHMpLGY9cz1wPXcsKGd8fF8hPT10KSYmKGg9VG8oKSxhPW4uYXBwbHkobCxpKSxzfHxmfHwoaT1sPW51bGwpKVxufWZ1bmN0aW9uIG8oKXtpZihpPWFyZ3VtZW50cyxjPVRvKCksbD10aGlzLHA9ZyYmKHN8fCF2KSxmYWxzZT09PV8pdmFyIHI9diYmIXM7ZWxzZXtmfHx2fHwoaD1jKTt2YXIgbz1fLShjLWgpLHk9MD49b3x8bz5fO3k/KGYmJihmPXF1KGYpKSxoPWMsYT1uLmFwcGx5KGwsaSkpOmZ8fChmPUd1KHUsbykpfXJldHVybiB5JiZzP3M9cXUocyk6c3x8dD09PV98fChzPUd1KGUsdCkpLHImJih5PXRydWUsYT1uLmFwcGx5KGwsaSkpLCF5fHxzfHxmfHwoaT1sPW51bGwpLGF9dmFyIGksZixhLGMsbCxzLHAsaD0wLF89ZmFsc2UsZz10cnVlO2lmKHR5cGVvZiBuIT1cImZ1bmN0aW9uXCIpdGhyb3cgbmV3IE91KCQpO2lmKHQ9MD50PzA6dCx0cnVlPT09cil2YXIgdj10cnVlLGc9ZmFsc2U7ZWxzZSBYZShyKSYmKHY9ci5sZWFkaW5nLF89XCJtYXhXYWl0XCJpbiByJiZ1bygrci5tYXhXYWl0fHwwLHQpLGc9XCJ0cmFpbGluZ1wiaW4gcj9yLnRyYWlsaW5nOmcpO3JldHVybiBvLmNhbmNlbD1mdW5jdGlvbigpe3MmJnF1KHMpLGYmJnF1KGYpLGY9cz1wPXdcbn0sb31mdW5jdGlvbiBxZSgpe3ZhciBuPWFyZ3VtZW50cyx0PW4ubGVuZ3RoLTE7aWYoMD50KXJldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gbn07aWYoIXF0KG4sSmUpKXRocm93IG5ldyBPdSgkKTtyZXR1cm4gZnVuY3Rpb24oKXtmb3IodmFyIHI9dCxlPW5bcl0uYXBwbHkodGhpcyxhcmd1bWVudHMpO3ItLTspZT1uW3JdLmNhbGwodGhpcyxlKTtyZXR1cm4gZX19ZnVuY3Rpb24gUGUobix0KXtmdW5jdGlvbiByKCl7dmFyIGU9ci5jYWNoZSx1PXQ/dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk6YXJndW1lbnRzWzBdO2lmKGUuaGFzKHUpKXJldHVybiBlLmdldCh1KTt2YXIgbz1uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gZS5zZXQodSxvKSxvfWlmKHR5cGVvZiBuIT1cImZ1bmN0aW9uXCJ8fHQmJnR5cGVvZiB0IT1cImZ1bmN0aW9uXCIpdGhyb3cgbmV3IE91KCQpO3JldHVybiByLmNhY2hlPW5ldyBQZS5DYWNoZSxyfWZ1bmN0aW9uIEtlKG4pe3ZhciB0PVJyKGFyZ3VtZW50cywxKSxyPWcodCxLZS5wbGFjZWhvbGRlcik7XG5yZXR1cm4gWXIobixSLG51bGwsdCxyKX1mdW5jdGlvbiBWZShuKXt2YXIgdD1Scihhcmd1bWVudHMsMSkscj1nKHQsVmUucGxhY2Vob2xkZXIpO3JldHVybiBZcihuLEksbnVsbCx0LHIpfWZ1bmN0aW9uIFllKG4pe3JldHVybiBvZShoKG4pP24ubGVuZ3RoOncpJiZMdS5jYWxsKG4pPT16fHxmYWxzZX1mdW5jdGlvbiBaZShuKXtyZXR1cm4gbiYmMT09PW4ubm9kZVR5cGUmJmgobikmJi0xPEx1LmNhbGwobikuaW5kZXhPZihcIkVsZW1lbnRcIil8fGZhbHNlfWZ1bmN0aW9uIEdlKG4pe3JldHVybiBoKG4pJiZ0eXBlb2Ygbi5tZXNzYWdlPT1cInN0cmluZ1wiJiZMdS5jYWxsKG4pPT1QfHxmYWxzZX1mdW5jdGlvbiBKZShuKXtyZXR1cm4gdHlwZW9mIG49PVwiZnVuY3Rpb25cInx8ZmFsc2V9ZnVuY3Rpb24gWGUobil7dmFyIHQ9dHlwZW9mIG47cmV0dXJuXCJmdW5jdGlvblwiPT10fHxuJiZcIm9iamVjdFwiPT10fHxmYWxzZX1mdW5jdGlvbiBIZShuKXtyZXR1cm4gbnVsbD09bj9mYWxzZTpMdS5jYWxsKG4pPT1LP0J1LnRlc3QoV3UuY2FsbChuKSk6aChuKSYmd3QudGVzdChuKXx8ZmFsc2Vcbn1mdW5jdGlvbiBRZShuKXtyZXR1cm4gdHlwZW9mIG49PVwibnVtYmVyXCJ8fGgobikmJkx1LmNhbGwobik9PVZ8fGZhbHNlfWZ1bmN0aW9uIG51KG4pe3JldHVybiBoKG4pJiZMdS5jYWxsKG4pPT1afHxmYWxzZX1mdW5jdGlvbiB0dShuKXtyZXR1cm4gdHlwZW9mIG49PVwic3RyaW5nXCJ8fGgobikmJkx1LmNhbGwobik9PUd8fGZhbHNlfWZ1bmN0aW9uIHJ1KG4pe3JldHVybiBoKG4pJiZvZShuLmxlbmd0aCkmJkN0W0x1LmNhbGwobildfHxmYWxzZX1mdW5jdGlvbiBldShuKXtyZXR1cm4gbnIobixvdShuKSl9ZnVuY3Rpb24gdXUobil7cmV0dXJuIHZyKG4sb3UobikpfWZ1bmN0aW9uIG91KG4pe2lmKG51bGw9PW4pcmV0dXJuW107WGUobil8fChuPUV1KG4pKTtmb3IodmFyIHQ9bi5sZW5ndGgsdD10JiZvZSh0KSYmKFNvKG4pfHxtby5ub25FbnVtQXJncyYmWWUobikpJiZ0fHwwLHI9bi5jb25zdHJ1Y3RvcixlPS0xLHI9dHlwZW9mIHI9PVwiZnVuY3Rpb25cIiYmci5wcm90b3R5cGU9PT1uLHU9d3UodCksbz0wPHQ7KytlPHQ7KXVbZV09ZStcIlwiO1xuZm9yKHZhciBpIGluIG4pbyYmZWUoaSx0KXx8XCJjb25zdHJ1Y3RvclwiPT1pJiYocnx8IVV1LmNhbGwobixpKSl8fHUucHVzaChpKTtyZXR1cm4gdX1mdW5jdGlvbiBpdShuKXtyZXR1cm4gQ3IobixGbyhuKSl9ZnVuY3Rpb24gZnUobil7cmV0dXJuKG49ZShuKSkmJm4ucmVwbGFjZShidCxjKX1mdW5jdGlvbiBhdShuKXtyZXR1cm4obj1lKG4pKSYmanQudGVzdChuKT9uLnJlcGxhY2UoQXQsXCJcXFxcJCZcIik6bn1mdW5jdGlvbiBjdShuLHQscil7cmV0dXJuIHImJnVlKG4sdCxyKSYmKHQ9MCksYW8obix0KX1mdW5jdGlvbiBsdShuLHQpe3ZhciByPVwiXCI7aWYobj1lKG4pLHQ9K3QsMT50fHwhbnx8IXJvKHQpKXJldHVybiByO2RvIHQlMiYmKHIrPW4pLHQ9UHUodC8yKSxuKz1uO3doaWxlKHQpO3JldHVybiByfWZ1bmN0aW9uIHN1KG4sdCxyKXt2YXIgdT1uO3JldHVybihuPWUobikpPyhyP3VlKHUsdCxyKTpudWxsPT10KT9uLnNsaWNlKHYobikseShuKSsxKToodCs9XCJcIixuLnNsaWNlKG8obix0KSxpKG4sdCkrMSkpOm5cbn1mdW5jdGlvbiBwdShuLHQscil7cmV0dXJuIHImJnVlKG4sdCxyKSYmKHQ9bnVsbCksbj1lKG4pLG4ubWF0Y2godHx8UnQpfHxbXX1mdW5jdGlvbiBodShuKXt0cnl7cmV0dXJuIG4uYXBwbHkodyxScihhcmd1bWVudHMsMSkpfWNhdGNoKHQpe3JldHVybiBHZSh0KT90Om5ldyB4dSh0KX19ZnVuY3Rpb24gX3Uobix0LHIpe3JldHVybiByJiZ1ZShuLHQscikmJih0PW51bGwpLGgobik/eXUobik6dHIobix0KX1mdW5jdGlvbiBndShuKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbn19ZnVuY3Rpb24gdnUobil7cmV0dXJuIG59ZnVuY3Rpb24geXUobil7cmV0dXJuIGJyKHJyKG4sdHJ1ZSkpfWZ1bmN0aW9uIGR1KG4sdCxyKXtpZihudWxsPT1yKXt2YXIgZT1YZSh0KSx1PWUmJkZvKHQpOygodT11JiZ1Lmxlbmd0aCYmdnIodCx1KSk/dS5sZW5ndGg6ZSl8fCh1PWZhbHNlLHI9dCx0PW4sbj10aGlzKX11fHwodT12cih0LEZvKHQpKSk7dmFyIG89dHJ1ZSxlPS0xLGk9SmUobiksZj11Lmxlbmd0aDtcbiExPT09cj9vPWZhbHNlOlhlKHIpJiZcImNoYWluXCJpbiByJiYobz1yLmNoYWluKTtmb3IoOysrZTxmOyl7cj11W2VdO3ZhciBhPXRbcl07bltyXT1hLGkmJihuLnByb3RvdHlwZVtyXT1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgcj10aGlzLl9fY2hhaW5fXztpZihvfHxyKXt2YXIgZT1uKHRoaXMuX193cmFwcGVkX18pO3JldHVybihlLl9fYWN0aW9uc19fPXp0KHRoaXMuX19hY3Rpb25zX18pKS5wdXNoKHtmdW5jOnQsYXJnczphcmd1bWVudHMsdGhpc0FyZzpufSksZS5fX2NoYWluX189cixlfXJldHVybiByPVt0aGlzLnZhbHVlKCldLFZ1LmFwcGx5KHIsYXJndW1lbnRzKSx0LmFwcGx5KG4scil9fShhKSl9cmV0dXJuIG59ZnVuY3Rpb24gbXUoKXt9Xz1fP0R0LmRlZmF1bHRzKCR0Lk9iamVjdCgpLF8sRHQucGljaygkdCxPdCkpOiR0O3ZhciB3dT1fLkFycmF5LGJ1PV8uRGF0ZSx4dT1fLkVycm9yLEF1PV8uRnVuY3Rpb24sanU9Xy5NYXRoLGt1PV8uTnVtYmVyLEV1PV8uT2JqZWN0LFJ1PV8uUmVnRXhwLEl1PV8uU3RyaW5nLE91PV8uVHlwZUVycm9yLEN1PXd1LnByb3RvdHlwZSxUdT1FdS5wcm90b3R5cGUsU3U9KFN1PV8ud2luZG93KSYmU3UuZG9jdW1lbnQsV3U9QXUucHJvdG90eXBlLnRvU3RyaW5nLE51PWpyKFwibGVuZ3RoXCIpLFV1PVR1Lmhhc093blByb3BlcnR5LEZ1PTAsTHU9VHUudG9TdHJpbmcsJHU9Xy5fLEJ1PVJ1KFwiXlwiK2F1KEx1KS5yZXBsYWNlKC90b1N0cmluZ3woZnVuY3Rpb24pLio/KD89XFxcXFxcKCl8IGZvciAuKz8oPz1cXFxcXFxdKS9nLFwiJDEuKj9cIikrXCIkXCIpLHp1PUhlKHp1PV8uQXJyYXlCdWZmZXIpJiZ6dSxEdT1IZShEdT16dSYmbmV3IHp1KDApLnNsaWNlKSYmRHUsTXU9anUuY2VpbCxxdT1fLmNsZWFyVGltZW91dCxQdT1qdS5mbG9vcixLdT1IZShLdT1FdS5nZXRQcm90b3R5cGVPZikmJkt1LFZ1PUN1LnB1c2gsWXU9VHUucHJvcGVydHlJc0VudW1lcmFibGUsWnU9SGUoWnU9Xy5TZXQpJiZadSxHdT1fLnNldFRpbWVvdXQsSnU9Q3Uuc3BsaWNlLFh1PUhlKFh1PV8uVWludDhBcnJheSkmJlh1LEh1PUhlKEh1PV8uV2Vha01hcCkmJkh1LFF1PWZ1bmN0aW9uKCl7dHJ5e3ZhciBuPUhlKG49Xy5GbG9hdDY0QXJyYXkpJiZuLHQ9bmV3IG4obmV3IHp1KDEwKSwwLDEpJiZuXG59Y2F0Y2gocil7fXJldHVybiB0fSgpLG5vPUhlKG5vPXd1LmlzQXJyYXkpJiZubyx0bz1IZSh0bz1FdS5jcmVhdGUpJiZ0byxybz1fLmlzRmluaXRlLGVvPUhlKGVvPUV1LmtleXMpJiZlbyx1bz1qdS5tYXgsb289anUubWluLGlvPUhlKGlvPWJ1Lm5vdykmJmlvLGZvPUhlKGZvPWt1LmlzRmluaXRlKSYmZm8sYW89Xy5wYXJzZUludCxjbz1qdS5yYW5kb20sbG89a3UuTkVHQVRJVkVfSU5GSU5JVFksc289a3UuUE9TSVRJVkVfSU5GSU5JVFkscG89anUucG93KDIsMzIpLTEsaG89cG8tMSxfbz1wbz4+PjEsZ289UXU/UXUuQllURVNfUEVSX0VMRU1FTlQ6MCx2bz1qdS5wb3coMiw1MyktMSx5bz1IdSYmbmV3IEh1LG1vPVd0LnN1cHBvcnQ9e307IWZ1bmN0aW9uKG4pe21vLmZ1bmNEZWNvbXA9IUhlKF8uV2luUlRFcnJvcikmJmt0LnRlc3QobSksbW8uZnVuY05hbWVzPXR5cGVvZiBBdS5uYW1lPT1cInN0cmluZ1wiO3RyeXttby5kb209MTE9PT1TdS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkubm9kZVR5cGVcbn1jYXRjaCh0KXttby5kb209ZmFsc2V9dHJ5e21vLm5vbkVudW1BcmdzPSFZdS5jYWxsKGFyZ3VtZW50cywxKX1jYXRjaChyKXttby5ub25FbnVtQXJncz10cnVlfX0oMCwwKSxXdC50ZW1wbGF0ZVNldHRpbmdzPXtlc2NhcGU6aHQsZXZhbHVhdGU6X3QsaW50ZXJwb2xhdGU6Z3QsdmFyaWFibGU6XCJcIixpbXBvcnRzOntfOld0fX07dmFyIHdvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbigpe31yZXR1cm4gZnVuY3Rpb24odCl7aWYoWGUodCkpe24ucHJvdG90eXBlPXQ7dmFyIHI9bmV3IG47bi5wcm90b3R5cGU9bnVsbH1yZXR1cm4gcnx8Xy5PYmplY3QoKX19KCksYm89eW8/ZnVuY3Rpb24obix0KXtyZXR1cm4geW8uc2V0KG4sdCksbn06dnU7RHV8fChVcj16dSYmWHU/ZnVuY3Rpb24obil7dmFyIHQ9bi5ieXRlTGVuZ3RoLHI9UXU/UHUodC9nbyk6MCxlPXIqZ28sdT1uZXcgenUodCk7aWYocil7dmFyIG89bmV3IFF1KHUsMCxyKTtvLnNldChuZXcgUXUobiwwLHIpKX1yZXR1cm4gdCE9ZSYmKG89bmV3IFh1KHUsZSksby5zZXQobmV3IFh1KG4sZSkpKSx1XG59Omd1KG51bGwpKTt2YXIgeG89dG8mJlp1P2Z1bmN0aW9uKG4pe3JldHVybiBuZXcgTHQobil9Omd1KG51bGwpLEFvPXlvP2Z1bmN0aW9uKG4pe3JldHVybiB5by5nZXQobil9Om11LGpvPWZ1bmN0aW9uKCl7dmFyIG49MCx0PTA7cmV0dXJuIGZ1bmN0aW9uKHIsZSl7dmFyIHU9VG8oKSxvPU4tKHUtdCk7aWYodD11LDA8byl7aWYoKytuPj1XKXJldHVybiByfWVsc2Ugbj0wO3JldHVybiBibyhyLGUpfX0oKSxrbz0kcihmdW5jdGlvbihuLHQscil7VXUuY2FsbChuLHIpPysrbltyXTpuW3JdPTF9KSxFbz0kcihmdW5jdGlvbihuLHQscil7VXUuY2FsbChuLHIpP25bcl0ucHVzaCh0KTpuW3JdPVt0XX0pLFJvPSRyKGZ1bmN0aW9uKG4sdCxyKXtuW3JdPXR9KSxJbz1xcihWdCksT289cXIoZnVuY3Rpb24obil7Zm9yKHZhciB0PS0xLHI9bi5sZW5ndGgsZT1zbzsrK3Q8cjspe3ZhciB1PW5bdF07dTxlJiYoZT11KX1yZXR1cm4gZX0sdHJ1ZSksQ289JHIoZnVuY3Rpb24obix0LHIpe25bcj8wOjFdLnB1c2godClcbn0sZnVuY3Rpb24oKXtyZXR1cm5bW10sW11dfSksVG89aW98fGZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBidSkuZ2V0VGltZSgpfSxTbz1ub3x8ZnVuY3Rpb24obil7cmV0dXJuIGgobikmJm9lKG4ubGVuZ3RoKSYmTHUuY2FsbChuKT09RHx8ZmFsc2V9O21vLmRvbXx8KFplPWZ1bmN0aW9uKG4pe3JldHVybiBuJiYxPT09bi5ub2RlVHlwZSYmaChuKSYmIU5vKG4pfHxmYWxzZX0pO3ZhciBXbz1mb3x8ZnVuY3Rpb24obil7cmV0dXJuIHR5cGVvZiBuPT1cIm51bWJlclwiJiZybyhuKX07KEplKC94Lyl8fFh1JiYhSmUoWHUpKSYmKEplPWZ1bmN0aW9uKG4pe3JldHVybiBMdS5jYWxsKG4pPT1LfSk7dmFyIE5vPUt1P2Z1bmN0aW9uKG4pe2lmKCFufHxMdS5jYWxsKG4pIT1ZKXJldHVybiBmYWxzZTt2YXIgdD1uLnZhbHVlT2Yscj1IZSh0KSYmKHI9S3UodCkpJiZLdShyKTtyZXR1cm4gcj9uPT1yfHxLdShuKT09cjpjZShuKX06Y2UsVW89QnIoSHQpLEZvPWVvP2Z1bmN0aW9uKG4pe2lmKG4pdmFyIHQ9bi5jb25zdHJ1Y3RvcixyPW4ubGVuZ3RoO1xucmV0dXJuIHR5cGVvZiB0PT1cImZ1bmN0aW9uXCImJnQucHJvdG90eXBlPT09bnx8dHlwZW9mIG4hPVwiZnVuY3Rpb25cIiYmciYmb2Uocik/bGUobik6WGUobik/ZW8obik6W119OmxlLExvPUJyKEFyKSwkbz1EcihmdW5jdGlvbihuLHQscil7cmV0dXJuIHQ9dC50b0xvd2VyQ2FzZSgpLG4rKHI/dC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpOnQpfSksQm89RHIoZnVuY3Rpb24obix0LHIpe3JldHVybiBuKyhyP1wiLVwiOlwiXCIpK3QudG9Mb3dlckNhc2UoKX0pOzghPWFvKEl0K1wiMDhcIikmJihjdT1mdW5jdGlvbihuLHQscil7cmV0dXJuKHI/dWUobix0LHIpOm51bGw9PXQpP3Q9MDp0JiYodD0rdCksbj1zdShuKSxhbyhuLHR8fChtdC50ZXN0KG4pPzE2OjEwKSl9KTt2YXIgem89RHIoZnVuY3Rpb24obix0LHIpe3JldHVybiBuKyhyP1wiX1wiOlwiXCIpK3QudG9Mb3dlckNhc2UoKX0pLERvPURyKGZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gbisocj9cIiBcIjpcIlwiKSsodC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpKVxufSk7cmV0dXJuIE50LnByb3RvdHlwZT13byhXdC5wcm90b3R5cGUpLFV0LnByb3RvdHlwZT13byhOdC5wcm90b3R5cGUpLFV0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1VdCxGdC5wcm90b3R5cGVbXCJkZWxldGVcIl09ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMuaGFzKG4pJiZkZWxldGUgdGhpcy5fX2RhdGFfX1tuXX0sRnQucHJvdG90eXBlLmdldD1mdW5jdGlvbihuKXtyZXR1cm5cIl9fcHJvdG9fX1wiPT1uP3c6dGhpcy5fX2RhdGFfX1tuXX0sRnQucHJvdG90eXBlLmhhcz1mdW5jdGlvbihuKXtyZXR1cm5cIl9fcHJvdG9fX1wiIT1uJiZVdS5jYWxsKHRoaXMuX19kYXRhX18sbil9LEZ0LnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24obix0KXtyZXR1cm5cIl9fcHJvdG9fX1wiIT1uJiYodGhpcy5fX2RhdGFfX1tuXT10KSx0aGlzfSxMdC5wcm90b3R5cGUucHVzaD1mdW5jdGlvbihuKXt2YXIgdD10aGlzLmRhdGE7dHlwZW9mIG49PVwic3RyaW5nXCJ8fFhlKG4pP3Quc2V0LmFkZChuKTp0Lmhhc2hbbl09dHJ1ZVxufSxQZS5DYWNoZT1GdCxXdC5hZnRlcj1mdW5jdGlvbihuLHQpe2lmKHR5cGVvZiB0IT1cImZ1bmN0aW9uXCIpe2lmKHR5cGVvZiBuIT1cImZ1bmN0aW9uXCIpdGhyb3cgbmV3IE91KCQpO3ZhciByPW47bj10LHQ9cn1yZXR1cm4gbj1ybyhuPStuKT9uOjAsZnVuY3Rpb24oKXtyZXR1cm4gMT4tLW4/dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dm9pZCAwfX0sV3QuYXJ5PWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gciYmdWUobix0LHIpJiYodD1udWxsKSx0PW4mJm51bGw9PXQ/bi5sZW5ndGg6dW8oK3R8fDAsMCksWXIobixDLG51bGwsbnVsbCxudWxsLG51bGwsdCl9LFd0LmFzc2lnbj1VbyxXdC5hdD1mdW5jdGlvbihuKXtyZXR1cm4gb2Uobj9uLmxlbmd0aDowKSYmKG49c2UobikpLFF0KG4sbHIoYXJndW1lbnRzLGZhbHNlLGZhbHNlLDEpKX0sV3QuYmVmb3JlPUxlLFd0LmJpbmQ9JGUsV3QuYmluZEFsbD1mdW5jdGlvbihuKXtmb3IodmFyIHQ9bixyPTE8YXJndW1lbnRzLmxlbmd0aD9scihhcmd1bWVudHMsZmFsc2UsZmFsc2UsMSk6dXUobiksZT0tMSx1PXIubGVuZ3RoOysrZTx1Oyl7dmFyIG89cltlXTtcbnRbb109WXIodFtvXSx4LHQpfXJldHVybiB0fSxXdC5iaW5kS2V5PUJlLFd0LmNhbGxiYWNrPV91LFd0LmNoYWluPUFlLFd0LmNodW5rPWZ1bmN0aW9uKG4sdCxyKXt0PShyP3VlKG4sdCxyKTpudWxsPT10KT8xOnVvKCt0fHwxLDEpLHI9MDtmb3IodmFyIGU9bj9uLmxlbmd0aDowLHU9LTEsbz13dShNdShlL3QpKTtyPGU7KW9bKyt1XT1ScihuLHIscis9dCk7cmV0dXJuIG99LFd0LmNvbXBhY3Q9ZnVuY3Rpb24obil7Zm9yKHZhciB0PS0xLHI9bj9uLmxlbmd0aDowLGU9LTEsdT1bXTsrK3Q8cjspe3ZhciBvPW5bdF07byYmKHVbKytlXT1vKX1yZXR1cm4gdX0sV3QuY29uc3RhbnQ9Z3UsV3QuY291bnRCeT1rbyxXdC5jcmVhdGU9ZnVuY3Rpb24obix0LHIpe3ZhciBlPXdvKG4pO3JldHVybiByJiZ1ZShuLHQscikmJih0PW51bGwpLHQ/bnIodCxlLEZvKHQpKTplfSxXdC5jdXJyeT16ZSxXdC5jdXJyeVJpZ2h0PURlLFd0LmRlYm91bmNlPU1lLFd0LmRlZmF1bHRzPWZ1bmN0aW9uKG4pe2lmKG51bGw9PW4pcmV0dXJuIG47XG52YXIgdD16dChhcmd1bWVudHMpO3JldHVybiB0LnB1c2goSnQpLFVvLmFwcGx5KHcsdCl9LFd0LmRlZmVyPWZ1bmN0aW9uKG4pe3JldHVybiBlcihuLDEsYXJndW1lbnRzLDEpfSxXdC5kZWxheT1mdW5jdGlvbihuLHQpe3JldHVybiBlcihuLHQsYXJndW1lbnRzLDIpfSxXdC5kaWZmZXJlbmNlPWZ1bmN0aW9uKCl7Zm9yKHZhciBuPS0xLHQ9YXJndW1lbnRzLmxlbmd0aDsrK248dDspe3ZhciByPWFyZ3VtZW50c1tuXTtpZihTbyhyKXx8WWUocikpYnJlYWt9cmV0dXJuIHVyKHIsbHIoYXJndW1lbnRzLGZhbHNlLHRydWUsKytuKSl9LFd0LmRyb3A9X2UsV3QuZHJvcFJpZ2h0PWdlLFd0LmRyb3BSaWdodFdoaWxlPWZ1bmN0aW9uKG4sdCxyKXt2YXIgZT1uP24ubGVuZ3RoOjA7aWYoIWUpcmV0dXJuW107Zm9yKHQ9SHIodCxyLDMpO2UtLSYmdChuW2VdLGUsbik7KTtyZXR1cm4gUnIobiwwLGUrMSl9LFd0LmRyb3BXaGlsZT1mdW5jdGlvbihuLHQscil7dmFyIGU9bj9uLmxlbmd0aDowO2lmKCFlKXJldHVybltdO1xudmFyIHU9LTE7Zm9yKHQ9SHIodCxyLDMpOysrdTxlJiZ0KG5bdV0sdSxuKTspO3JldHVybiBScihuLHUpfSxXdC5maWxsPWZ1bmN0aW9uKG4sdCxyLGUpe3ZhciB1PW4/bi5sZW5ndGg6MDtpZighdSlyZXR1cm5bXTtmb3IociYmdHlwZW9mIHIhPVwibnVtYmVyXCImJnVlKG4sdCxyKSYmKHI9MCxlPXUpLHU9bi5sZW5ndGgscj1udWxsPT1yPzA6K3J8fDAsMD5yJiYocj0tcj51PzA6dStyKSxlPXR5cGVvZiBlPT1cInVuZGVmaW5lZFwifHxlPnU/dTorZXx8MCwwPmUmJihlKz11KSx1PXI+ZT8wOmU+Pj4wLHI+Pj49MDtyPHU7KW5bcisrXT10O3JldHVybiBufSxXdC5maWx0ZXI9UmUsV3QuZmxhdHRlbj1mdW5jdGlvbihuLHQscil7dmFyIGU9bj9uLmxlbmd0aDowO3JldHVybiByJiZ1ZShuLHQscikmJih0PWZhbHNlKSxlP2xyKG4sdCk6W119LFd0LmZsYXR0ZW5EZWVwPWZ1bmN0aW9uKG4pe3JldHVybiBuJiZuLmxlbmd0aD9scihuLHRydWUpOltdfSxXdC5mbG93PWZ1bmN0aW9uKCl7dmFyIG49YXJndW1lbnRzLHQ9bi5sZW5ndGg7XG5pZighdClyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIG59O2lmKCFxdChuLEplKSl0aHJvdyBuZXcgT3UoJCk7cmV0dXJuIGZ1bmN0aW9uKCl7Zm9yKHZhciByPTAsZT1uW3JdLmFwcGx5KHRoaXMsYXJndW1lbnRzKTsrK3I8dDspZT1uW3JdLmNhbGwodGhpcyxlKTtyZXR1cm4gZX19LFd0LmZsb3dSaWdodD1xZSxXdC5mb3JFYWNoPU9lLFd0LmZvckVhY2hSaWdodD1DZSxXdC5mb3JJbj1mdW5jdGlvbihuLHQscil7cmV0dXJuKHR5cGVvZiB0IT1cImZ1bmN0aW9uXCJ8fHR5cGVvZiByIT1cInVuZGVmaW5lZFwiKSYmKHQ9TnIodCxyLDMpKSxzcihuLHQsb3UpfSxXdC5mb3JJblJpZ2h0PWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gdD1Ocih0LHIsMykscHIobix0LG91KX0sV3QuZm9yT3duPWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4odHlwZW9mIHQhPVwiZnVuY3Rpb25cInx8dHlwZW9mIHIhPVwidW5kZWZpbmVkXCIpJiYodD1Ocih0LHIsMykpLF9yKG4sdCl9LFd0LmZvck93blJpZ2h0PWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gdD1Ocih0LHIsMykscHIobix0LEZvKVxufSxXdC5mdW5jdGlvbnM9dXUsV3QuZ3JvdXBCeT1FbyxXdC5pbmRleEJ5PVJvLFd0LmluaXRpYWw9ZnVuY3Rpb24obil7cmV0dXJuIGdlKG4sMSl9LFd0LmludGVyc2VjdGlvbj1mdW5jdGlvbigpe2Zvcih2YXIgbj1bXSxyPS0xLGU9YXJndW1lbnRzLmxlbmd0aCx1PVtdLG89UXIoKSxpPW89PXQ7KytyPGU7KXt2YXIgZj1hcmd1bWVudHNbcl07KFNvKGYpfHxZZShmKSkmJihuLnB1c2goZiksdS5wdXNoKGkmJjEyMDw9Zi5sZW5ndGgmJnhvKHImJmYpKSl9dmFyIGU9bi5sZW5ndGgsaT1uWzBdLGE9LTEsYz1pP2kubGVuZ3RoOjAsbD1bXSxzPXVbMF07bjpmb3IoOysrYTxjOylpZihmPWlbYV0sMD4ocz9CdChzLGYpOm8obCxmKSkpe2ZvcihyPWU7LS1yOyl7dmFyIHA9dVtyXTtpZigwPihwP0J0KHAsZik6byhuW3JdLGYpKSljb250aW51ZSBufXMmJnMucHVzaChmKSxsLnB1c2goZil9cmV0dXJuIGx9LFd0LmludmVydD1mdW5jdGlvbihuLHQscil7ciYmdWUobix0LHIpJiYodD1udWxsKSxyPS0xO1xuZm9yKHZhciBlPUZvKG4pLHU9ZS5sZW5ndGgsbz17fTsrK3I8dTspe3ZhciBpPWVbcl0sZj1uW2ldO3Q/VXUuY2FsbChvLGYpP29bZl0ucHVzaChpKTpvW2ZdPVtpXTpvW2ZdPWl9cmV0dXJuIG99LFd0Lmludm9rZT1mdW5jdGlvbihuLHQpe3JldHVybiB5cihuLHQsUnIoYXJndW1lbnRzLDIpKX0sV3Qua2V5cz1GbyxXdC5rZXlzSW49b3UsV3QubWFwPVRlLFd0Lm1hcFZhbHVlcz1mdW5jdGlvbihuLHQscil7dmFyIGU9e307cmV0dXJuIHQ9SHIodCxyLDMpLF9yKG4sZnVuY3Rpb24obixyLHUpe2Vbcl09dChuLHIsdSl9KSxlfSxXdC5tYXRjaGVzPXl1LFd0Lm1hdGNoZXNQcm9wZXJ0eT1mdW5jdGlvbihuLHQpe3JldHVybiB4cihuK1wiXCIscnIodCx0cnVlKSl9LFd0Lm1lbW9pemU9UGUsV3QubWVyZ2U9TG8sV3QubWl4aW49ZHUsV3QubmVnYXRlPWZ1bmN0aW9uKG4pe2lmKHR5cGVvZiBuIT1cImZ1bmN0aW9uXCIpdGhyb3cgbmV3IE91KCQpO3JldHVybiBmdW5jdGlvbigpe3JldHVybiFuLmFwcGx5KHRoaXMsYXJndW1lbnRzKVxufX0sV3Qub21pdD1mdW5jdGlvbihuLHQscil7aWYobnVsbD09bilyZXR1cm57fTtpZih0eXBlb2YgdCE9XCJmdW5jdGlvblwiKXt2YXIgZT1LdChscihhcmd1bWVudHMsZmFsc2UsZmFsc2UsMSksSXUpO3JldHVybiBmZShuLHVyKG91KG4pLGUpKX1yZXR1cm4gdD1Ocih0LHIsMyksYWUobixmdW5jdGlvbihuLHIsZSl7cmV0dXJuIXQobixyLGUpfSl9LFd0Lm9uY2U9ZnVuY3Rpb24obil7cmV0dXJuIExlKG4sMil9LFd0LnBhaXJzPWZ1bmN0aW9uKG4pe2Zvcih2YXIgdD0tMSxyPUZvKG4pLGU9ci5sZW5ndGgsdT13dShlKTsrK3Q8ZTspe3ZhciBvPXJbdF07dVt0XT1bbyxuW29dXX1yZXR1cm4gdX0sV3QucGFydGlhbD1LZSxXdC5wYXJ0aWFsUmlnaHQ9VmUsV3QucGFydGl0aW9uPUNvLFd0LnBpY2s9ZnVuY3Rpb24obix0LHIpe3JldHVybiBudWxsPT1uP3t9OnR5cGVvZiB0PT1cImZ1bmN0aW9uXCI/YWUobixOcih0LHIsMykpOmZlKG4sbHIoYXJndW1lbnRzLGZhbHNlLGZhbHNlLDEpKX0sV3QucGx1Y2s9ZnVuY3Rpb24obix0KXtyZXR1cm4gVGUobixqcih0KSlcbn0sV3QucHJvcGVydHk9ZnVuY3Rpb24obil7cmV0dXJuIGpyKG4rXCJcIil9LFd0LnByb3BlcnR5T2Y9ZnVuY3Rpb24obil7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT1uP3c6blt0XX19LFd0LnB1bGw9ZnVuY3Rpb24oKXt2YXIgbj1hcmd1bWVudHNbMF07aWYoIW58fCFuLmxlbmd0aClyZXR1cm4gbjtmb3IodmFyIHQ9MCxyPVFyKCksZT1hcmd1bWVudHMubGVuZ3RoOysrdDxlOylmb3IodmFyIHU9MCxvPWFyZ3VtZW50c1t0XTstMTwodT1yKG4sbyx1KSk7KUp1LmNhbGwobix1LDEpO3JldHVybiBufSxXdC5wdWxsQXQ9ZnVuY3Rpb24odCl7dmFyIHI9dHx8W10sZT1scihhcmd1bWVudHMsZmFsc2UsZmFsc2UsMSksdT1lLmxlbmd0aCxvPVF0KHIsZSk7Zm9yKGUuc29ydChuKTt1LS07KXt2YXIgaT1wYXJzZUZsb2F0KGVbdV0pO2lmKGkhPWYmJmVlKGkpKXt2YXIgZj1pO0p1LmNhbGwocixpLDEpfX1yZXR1cm4gb30sV3QucmFuZ2U9ZnVuY3Rpb24obix0LHIpe3ImJnVlKG4sdCxyKSYmKHQ9cj1udWxsKSxuPStufHwwLHI9bnVsbD09cj8xOityfHwwLG51bGw9PXQ/KHQ9bixuPTApOnQ9K3R8fDA7XG52YXIgZT0tMTt0PXVvKE11KCh0LW4pLyhyfHwxKSksMCk7Zm9yKHZhciB1PXd1KHQpOysrZTx0Oyl1W2VdPW4sbis9cjtyZXR1cm4gdX0sV3QucmVhcmc9ZnVuY3Rpb24obil7dmFyIHQ9bHIoYXJndW1lbnRzLGZhbHNlLGZhbHNlLDEpO3JldHVybiBZcihuLE8sbnVsbCxudWxsLG51bGwsdCl9LFd0LnJlamVjdD1mdW5jdGlvbihuLHQscil7dmFyIGU9U28obik/UHQ6YXI7cmV0dXJuIHQ9SHIodCxyLDMpLGUobixmdW5jdGlvbihuLHIsZSl7cmV0dXJuIXQobixyLGUpfSl9LFd0LnJlbW92ZT1mdW5jdGlvbihuLHQscil7dmFyIGU9LTEsdT1uP24ubGVuZ3RoOjAsbz1bXTtmb3IodD1Icih0LHIsMyk7KytlPHU7KXI9bltlXSx0KHIsZSxuKSYmKG8ucHVzaChyKSxKdS5jYWxsKG4sZS0tLDEpLHUtLSk7cmV0dXJuIG99LFd0LnJlc3Q9bWUsV3Quc2h1ZmZsZT1VZSxXdC5zbGljZT1mdW5jdGlvbihuLHQscil7dmFyIGU9bj9uLmxlbmd0aDowO3JldHVybiBlPyhyJiZ0eXBlb2YgciE9XCJudW1iZXJcIiYmdWUobix0LHIpJiYodD0wLHI9ZSksUnIobix0LHIpKTpbXVxufSxXdC5zb3J0Qnk9ZnVuY3Rpb24obix0LGUpe3ZhciB1PS0xLG89bj9uLmxlbmd0aDowLGk9b2Uobyk/d3Uobyk6W107cmV0dXJuIGUmJnVlKG4sdCxlKSYmKHQ9bnVsbCksdD1Icih0LGUsMyksb3IobixmdW5jdGlvbihuLHIsZSl7aVsrK3VdPXthOnQobixyLGUpLGI6dSxjOm59fSkscihpLGYpfSxXdC5zb3J0QnlBbGw9ZnVuY3Rpb24obil7dmFyIHQ9YXJndW1lbnRzOzM8dC5sZW5ndGgmJnVlKHRbMV0sdFsyXSx0WzNdKSYmKHQ9W24sdFsxXV0pO3ZhciBlPS0xLHU9bj9uLmxlbmd0aDowLG89bHIodCxmYWxzZSxmYWxzZSwxKSxpPW9lKHUpP3d1KHUpOltdO3JldHVybiBvcihuLGZ1bmN0aW9uKG4pe2Zvcih2YXIgdD1vLmxlbmd0aCxyPXd1KHQpO3QtLTspclt0XT1udWxsPT1uP3c6bltvW3RdXTtpWysrZV09e2E6cixiOmUsYzpufX0pLHIoaSxhKX0sV3Quc3ByZWFkPWZ1bmN0aW9uKG4pe2lmKHR5cGVvZiBuIT1cImZ1bmN0aW9uXCIpdGhyb3cgbmV3IE91KCQpO3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gbi5hcHBseSh0aGlzLHQpXG59fSxXdC50YWtlPWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gbiYmbi5sZW5ndGg/KChyP3VlKG4sdCxyKTpudWxsPT10KSYmKHQ9MSksUnIobiwwLDA+dD8wOnQpKTpbXX0sV3QudGFrZVJpZ2h0PWZ1bmN0aW9uKG4sdCxyKXt2YXIgZT1uP24ubGVuZ3RoOjA7cmV0dXJuIGU/KChyP3VlKG4sdCxyKTpudWxsPT10KSYmKHQ9MSksdD1lLSgrdHx8MCksUnIobiwwPnQ/MDp0KSk6W119LFd0LnRha2VSaWdodFdoaWxlPWZ1bmN0aW9uKG4sdCxyKXt2YXIgZT1uP24ubGVuZ3RoOjA7aWYoIWUpcmV0dXJuW107Zm9yKHQ9SHIodCxyLDMpO2UtLSYmdChuW2VdLGUsbik7KTtyZXR1cm4gUnIobixlKzEpfSxXdC50YWtlV2hpbGU9ZnVuY3Rpb24obix0LHIpe3ZhciBlPW4/bi5sZW5ndGg6MDtpZighZSlyZXR1cm5bXTt2YXIgdT0tMTtmb3IodD1Icih0LHIsMyk7Kyt1PGUmJnQoblt1XSx1LG4pOyk7cmV0dXJuIFJyKG4sMCx1KX0sV3QudGFwPWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gdC5jYWxsKHIsbiksblxufSxXdC50aHJvdHRsZT1mdW5jdGlvbihuLHQscil7dmFyIGU9dHJ1ZSx1PXRydWU7aWYodHlwZW9mIG4hPVwiZnVuY3Rpb25cIil0aHJvdyBuZXcgT3UoJCk7cmV0dXJuIGZhbHNlPT09cj9lPWZhbHNlOlhlKHIpJiYoZT1cImxlYWRpbmdcImluIHI/ISFyLmxlYWRpbmc6ZSx1PVwidHJhaWxpbmdcImluIHI/ISFyLnRyYWlsaW5nOnUpLFN0LmxlYWRpbmc9ZSxTdC5tYXhXYWl0PSt0LFN0LnRyYWlsaW5nPXUsTWUobix0LFN0KX0sV3QudGhydT1qZSxXdC50aW1lcz1mdW5jdGlvbihuLHQscil7aWYobj0rbiwxPm58fCFybyhuKSlyZXR1cm5bXTt2YXIgZT0tMSx1PXd1KG9vKG4scG8pKTtmb3IodD1Ocih0LHIsMSk7KytlPG47KWU8cG8/dVtlXT10KGUpOnQoZSk7cmV0dXJuIHV9LFd0LnRvQXJyYXk9ZnVuY3Rpb24obil7dmFyIHQ9bj9uLmxlbmd0aDowO3JldHVybiBvZSh0KT90P3p0KG4pOltdOml1KG4pfSxXdC50b1BsYWluT2JqZWN0PWV1LFd0LnRyYW5zZm9ybT1mdW5jdGlvbihuLHQscixlKXt2YXIgdT1TbyhuKXx8cnUobik7XG5yZXR1cm4gdD1Icih0LGUsNCksbnVsbD09ciYmKHV8fFhlKG4pPyhlPW4uY29uc3RydWN0b3Iscj11P1NvKG4pP25ldyBlOltdOndvKEplKGUpJiZlLnByb3RvdHlwZSkpOnI9e30pLCh1P010Ol9yKShuLGZ1bmN0aW9uKG4sZSx1KXtyZXR1cm4gdChyLG4sZSx1KX0pLHJ9LFd0LnVuaW9uPWZ1bmN0aW9uKCl7cmV0dXJuIE9yKGxyKGFyZ3VtZW50cyxmYWxzZSx0cnVlKSl9LFd0LnVuaXE9d2UsV3QudW56aXA9YmUsV3QudmFsdWVzPWl1LFd0LnZhbHVlc0luPWZ1bmN0aW9uKG4pe3JldHVybiBDcihuLG91KG4pKX0sV3Qud2hlcmU9ZnVuY3Rpb24obix0KXtyZXR1cm4gUmUobixicih0KSl9LFd0LndpdGhvdXQ9ZnVuY3Rpb24obil7cmV0dXJuIHVyKG4sUnIoYXJndW1lbnRzLDEpKX0sV3Qud3JhcD1mdW5jdGlvbihuLHQpe3JldHVybiB0PW51bGw9PXQ/dnU6dCxZcih0LFIsbnVsbCxbbl0sW10pfSxXdC54b3I9ZnVuY3Rpb24oKXtmb3IodmFyIG49LTEsdD1hcmd1bWVudHMubGVuZ3RoOysrbjx0Oyl7dmFyIHI9YXJndW1lbnRzW25dO1xuaWYoU28ocil8fFllKHIpKXZhciBlPWU/dXIoZSxyKS5jb25jYXQodXIocixlKSk6cn1yZXR1cm4gZT9PcihlKTpbXX0sV3QuemlwPWZ1bmN0aW9uKCl7Zm9yKHZhciBuPWFyZ3VtZW50cy5sZW5ndGgsdD13dShuKTtuLS07KXRbbl09YXJndW1lbnRzW25dO3JldHVybiBiZSh0KX0sV3QuemlwT2JqZWN0PXhlLFd0LmJhY2tmbG93PXFlLFd0LmNvbGxlY3Q9VGUsV3QuY29tcG9zZT1xZSxXdC5lYWNoPU9lLFd0LmVhY2hSaWdodD1DZSxXdC5leHRlbmQ9VW8sV3QuaXRlcmF0ZWU9X3UsV3QubWV0aG9kcz11dSxXdC5vYmplY3Q9eGUsV3Quc2VsZWN0PVJlLFd0LnRhaWw9bWUsV3QudW5pcXVlPXdlLGR1KFd0LFd0KSxXdC5hdHRlbXB0PWh1LFd0LmNhbWVsQ2FzZT0kbyxXdC5jYXBpdGFsaXplPWZ1bmN0aW9uKG4pe3JldHVybihuPWUobikpJiZuLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK24uc2xpY2UoMSl9LFd0LmNsb25lPWZ1bmN0aW9uKG4sdCxyLGUpe3JldHVybiB0eXBlb2YgdCE9XCJib29sZWFuXCImJm51bGwhPXQmJihlPXIscj11ZShuLHQsZSk/bnVsbDp0LHQ9ZmFsc2UpLHI9dHlwZW9mIHI9PVwiZnVuY3Rpb25cIiYmTnIocixlLDEpLHJyKG4sdCxyKVxufSxXdC5jbG9uZURlZXA9ZnVuY3Rpb24obix0LHIpe3JldHVybiB0PXR5cGVvZiB0PT1cImZ1bmN0aW9uXCImJk5yKHQsciwxKSxycihuLHRydWUsdCl9LFd0LmRlYnVycj1mdSxXdC5lbmRzV2l0aD1mdW5jdGlvbihuLHQscil7bj1lKG4pLHQrPVwiXCI7dmFyIHU9bi5sZW5ndGg7cmV0dXJuIHI9KHR5cGVvZiByPT1cInVuZGVmaW5lZFwiP3U6b28oMD5yPzA6K3J8fDAsdSkpLXQubGVuZ3RoLDA8PXImJm4uaW5kZXhPZih0LHIpPT1yfSxXdC5lc2NhcGU9ZnVuY3Rpb24obil7cmV0dXJuKG49ZShuKSkmJnB0LnRlc3Qobik/bi5yZXBsYWNlKGx0LGwpOm59LFd0LmVzY2FwZVJlZ0V4cD1hdSxXdC5ldmVyeT1FZSxXdC5maW5kPUllLFd0LmZpbmRJbmRleD12ZSxXdC5maW5kS2V5PWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gdD1Icih0LHIsMyksY3Iobix0LF9yLHRydWUpfSxXdC5maW5kTGFzdD1mdW5jdGlvbihuLHQscil7cmV0dXJuIHQ9SHIodCxyLDMpLGNyKG4sdCxpcil9LFd0LmZpbmRMYXN0SW5kZXg9ZnVuY3Rpb24obix0LHIpe3ZhciBlPW4/bi5sZW5ndGg6MDtcbmZvcih0PUhyKHQsciwzKTtlLS07KWlmKHQobltlXSxlLG4pKXJldHVybiBlO3JldHVybi0xfSxXdC5maW5kTGFzdEtleT1mdW5jdGlvbihuLHQscil7cmV0dXJuIHQ9SHIodCxyLDMpLGNyKG4sdCxncix0cnVlKX0sV3QuZmluZFdoZXJlPWZ1bmN0aW9uKG4sdCl7cmV0dXJuIEllKG4sYnIodCkpfSxXdC5maXJzdD15ZSxXdC5oYXM9ZnVuY3Rpb24obix0KXtyZXR1cm4gbj9VdS5jYWxsKG4sdCk6ZmFsc2V9LFd0LmlkZW50aXR5PXZ1LFd0LmluY2x1ZGVzPWtlLFd0LmluZGV4T2Y9ZGUsV3QuaXNBcmd1bWVudHM9WWUsV3QuaXNBcnJheT1TbyxXdC5pc0Jvb2xlYW49ZnVuY3Rpb24obil7cmV0dXJuIHRydWU9PT1ufHxmYWxzZT09PW58fGgobikmJkx1LmNhbGwobik9PU18fGZhbHNlfSxXdC5pc0RhdGU9ZnVuY3Rpb24obil7cmV0dXJuIGgobikmJkx1LmNhbGwobik9PXF8fGZhbHNlfSxXdC5pc0VsZW1lbnQ9WmUsV3QuaXNFbXB0eT1mdW5jdGlvbihuKXtpZihudWxsPT1uKXJldHVybiB0cnVlO3ZhciB0PW4ubGVuZ3RoO1xucmV0dXJuIG9lKHQpJiYoU28obil8fHR1KG4pfHxZZShuKXx8aChuKSYmSmUobi5zcGxpY2UpKT8hdDohRm8obikubGVuZ3RofSxXdC5pc0VxdWFsPWZ1bmN0aW9uKG4sdCxyLGUpe3JldHVybiByPXR5cGVvZiByPT1cImZ1bmN0aW9uXCImJk5yKHIsZSwzKSwhciYmaWUobikmJmllKHQpP249PT10OihlPXI/cihuLHQpOncsdHlwZW9mIGU9PVwidW5kZWZpbmVkXCI/ZHIobix0LHIpOiEhZSl9LFd0LmlzRXJyb3I9R2UsV3QuaXNGaW5pdGU9V28sV3QuaXNGdW5jdGlvbj1KZSxXdC5pc01hdGNoPWZ1bmN0aW9uKG4sdCxyLGUpe3ZhciB1PUZvKHQpLG89dS5sZW5ndGg7aWYocj10eXBlb2Ygcj09XCJmdW5jdGlvblwiJiZOcihyLGUsMyksIXImJjE9PW8pe3ZhciBpPXVbMF07aWYoZT10W2ldLGllKGUpKXJldHVybiBudWxsIT1uJiZlPT09bltpXSYmVXUuY2FsbChuLGkpfWZvcih2YXIgaT13dShvKSxmPXd1KG8pO28tLTspZT1pW29dPXRbdVtvXV0sZltvXT1pZShlKTtyZXR1cm4gbXIobix1LGksZixyKVxufSxXdC5pc05hTj1mdW5jdGlvbihuKXtyZXR1cm4gUWUobikmJm4hPStufSxXdC5pc05hdGl2ZT1IZSxXdC5pc051bGw9ZnVuY3Rpb24obil7cmV0dXJuIG51bGw9PT1ufSxXdC5pc051bWJlcj1RZSxXdC5pc09iamVjdD1YZSxXdC5pc1BsYWluT2JqZWN0PU5vLFd0LmlzUmVnRXhwPW51LFd0LmlzU3RyaW5nPXR1LFd0LmlzVHlwZWRBcnJheT1ydSxXdC5pc1VuZGVmaW5lZD1mdW5jdGlvbihuKXtyZXR1cm4gdHlwZW9mIG49PVwidW5kZWZpbmVkXCJ9LFd0LmtlYmFiQ2FzZT1CbyxXdC5sYXN0PWZ1bmN0aW9uKG4pe3ZhciB0PW4/bi5sZW5ndGg6MDtyZXR1cm4gdD9uW3QtMV06d30sV3QubGFzdEluZGV4T2Y9ZnVuY3Rpb24obix0LHIpe3ZhciBlPW4/bi5sZW5ndGg6MDtpZighZSlyZXR1cm4tMTt2YXIgdT1lO2lmKHR5cGVvZiByPT1cIm51bWJlclwiKXU9KDA+cj91byhlK3IsMCk6b28ocnx8MCxlLTEpKSsxO2Vsc2UgaWYocilyZXR1cm4gdT1TcihuLHQsdHJ1ZSktMSxuPW5bdV0sKHQ9PT10P3Q9PT1uOm4hPT1uKT91Oi0xO1xuaWYodCE9PXQpcmV0dXJuIHAobix1LHRydWUpO2Zvcig7dS0tOylpZihuW3VdPT09dClyZXR1cm4gdTtyZXR1cm4tMX0sV3QubWF4PUlvLFd0Lm1pbj1PbyxXdC5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIF8uXz0kdSx0aGlzfSxXdC5ub29wPW11LFd0Lm5vdz1UbyxXdC5wYWQ9ZnVuY3Rpb24obix0LHIpe249ZShuKSx0PSt0O3ZhciB1PW4ubGVuZ3RoO3JldHVybiB1PHQmJnJvKHQpPyh1PSh0LXUpLzIsdD1QdSh1KSx1PU11KHUpLHI9S3IoXCJcIix1LHIpLHIuc2xpY2UoMCx0KStuK3IpOm59LFd0LnBhZExlZnQ9ZnVuY3Rpb24obix0LHIpe3JldHVybihuPWUobikpJiZLcihuLHQscikrbn0sV3QucGFkUmlnaHQ9ZnVuY3Rpb24obix0LHIpe3JldHVybihuPWUobikpJiZuK0tyKG4sdCxyKX0sV3QucGFyc2VJbnQ9Y3UsV3QucmFuZG9tPWZ1bmN0aW9uKG4sdCxyKXtyJiZ1ZShuLHQscikmJih0PXI9bnVsbCk7dmFyIGU9bnVsbD09bix1PW51bGw9PXQ7cmV0dXJuIG51bGw9PXImJih1JiZ0eXBlb2Ygbj09XCJib29sZWFuXCI/KHI9bixuPTEpOnR5cGVvZiB0PT1cImJvb2xlYW5cIiYmKHI9dCx1PXRydWUpKSxlJiZ1JiYodD0xLHU9ZmFsc2UpLG49K258fDAsdT8odD1uLG49MCk6dD0rdHx8MCxyfHxuJTF8fHQlMT8ocj1jbygpLG9vKG4rcioodC1uK3BhcnNlRmxvYXQoXCIxZS1cIisoKHIrXCJcIikubGVuZ3RoLTEpKSksdCkpOmtyKG4sdClcbn0sV3QucmVkdWNlPVNlLFd0LnJlZHVjZVJpZ2h0PVdlLFd0LnJlcGVhdD1sdSxXdC5yZXN1bHQ9ZnVuY3Rpb24obix0LHIpe3JldHVybiB0PW51bGw9PW4/dzpuW3RdLHR5cGVvZiB0PT1cInVuZGVmaW5lZFwiJiYodD1yKSxKZSh0KT90LmNhbGwobik6dH0sV3QucnVuSW5Db250ZXh0PW0sV3Quc2l6ZT1mdW5jdGlvbihuKXt2YXIgdD1uP24ubGVuZ3RoOjA7cmV0dXJuIG9lKHQpP3Q6Rm8obikubGVuZ3RofSxXdC5zbmFrZUNhc2U9em8sV3Quc29tZT1GZSxXdC5zb3J0ZWRJbmRleD1mdW5jdGlvbihuLHQscixlKXt2YXIgdT1IcihyKTtyZXR1cm4gdT09PXRyJiZudWxsPT1yP1NyKG4sdCk6V3Iobix0LHUocixlLDEpKX0sV3Quc29ydGVkTGFzdEluZGV4PWZ1bmN0aW9uKG4sdCxyLGUpe3ZhciB1PUhyKHIpO3JldHVybiB1PT09dHImJm51bGw9PXI/U3Iobix0LHRydWUpOldyKG4sdCx1KHIsZSwxKSx0cnVlKX0sV3Quc3RhcnRDYXNlPURvLFd0LnN0YXJ0c1dpdGg9ZnVuY3Rpb24obix0LHIpe3JldHVybiBuPWUobikscj1udWxsPT1yPzA6b28oMD5yPzA6K3J8fDAsbi5sZW5ndGgpLG4ubGFzdEluZGV4T2YodCxyKT09clxufSxXdC50ZW1wbGF0ZT1mdW5jdGlvbihuLHQscil7dmFyIHU9V3QudGVtcGxhdGVTZXR0aW5ncztyJiZ1ZShuLHQscikmJih0PXI9bnVsbCksbj1lKG4pLHQ9SHQoSHQoe30scnx8dCksdSxYdCkscj1IdChIdCh7fSx0LmltcG9ydHMpLHUuaW1wb3J0cyxYdCk7dmFyIG8saSxmPUZvKHIpLGE9Q3IocixmKSxjPTA7cj10LmludGVycG9sYXRlfHx4dDt2YXIgbD1cIl9fcCs9J1wiO3I9UnUoKHQuZXNjYXBlfHx4dCkuc291cmNlK1wifFwiK3Iuc291cmNlK1wifFwiKyhyPT09Z3Q/dnQ6eHQpLnNvdXJjZStcInxcIisodC5ldmFsdWF0ZXx8eHQpLnNvdXJjZStcInwkXCIsXCJnXCIpO3ZhciBwPVwic291cmNlVVJMXCJpbiB0P1wiLy8jIHNvdXJjZVVSTD1cIit0LnNvdXJjZVVSTCtcIlxcblwiOlwiXCI7aWYobi5yZXBsYWNlKHIsZnVuY3Rpb24odCxyLGUsdSxmLGEpe3JldHVybiBlfHwoZT11KSxsKz1uLnNsaWNlKGMsYSkucmVwbGFjZShFdCxzKSxyJiYobz10cnVlLGwrPVwiJytfX2UoXCIrcitcIikrJ1wiKSxmJiYoaT10cnVlLGwrPVwiJztcIitmK1wiO1xcbl9fcCs9J1wiKSxlJiYobCs9XCInKygoX190PShcIitlK1wiKSk9PW51bGw/Jyc6X190KSsnXCIpLGM9YSt0Lmxlbmd0aCx0XG59KSxsKz1cIic7XCIsKHQ9dC52YXJpYWJsZSl8fChsPVwid2l0aChvYmope1wiK2wrXCJ9XCIpLGw9KGk/bC5yZXBsYWNlKGl0LFwiXCIpOmwpLnJlcGxhY2UoZnQsXCIkMVwiKS5yZXBsYWNlKGF0LFwiJDE7XCIpLGw9XCJmdW5jdGlvbihcIisodHx8XCJvYmpcIikrXCIpe1wiKyh0P1wiXCI6XCJvYmp8fChvYmo9e30pO1wiKStcInZhciBfX3QsX19wPScnXCIrKG8/XCIsX19lPV8uZXNjYXBlXCI6XCJcIikrKGk/XCIsX19qPUFycmF5LnByb3RvdHlwZS5qb2luO2Z1bmN0aW9uIHByaW50KCl7X19wKz1fX2ouY2FsbChhcmd1bWVudHMsJycpfVwiOlwiO1wiKStsK1wicmV0dXJuIF9fcH1cIix0PWh1KGZ1bmN0aW9uKCl7cmV0dXJuIEF1KGYscCtcInJldHVybiBcIitsKS5hcHBseSh3LGEpfSksdC5zb3VyY2U9bCxHZSh0KSl0aHJvdyB0O3JldHVybiB0fSxXdC50cmltPXN1LFd0LnRyaW1MZWZ0PWZ1bmN0aW9uKG4sdCxyKXt2YXIgdT1uO3JldHVybihuPWUobikpP24uc2xpY2UoKHI/dWUodSx0LHIpOm51bGw9PXQpP3Yobik6byhuLHQrXCJcIikpOm5cbn0sV3QudHJpbVJpZ2h0PWZ1bmN0aW9uKG4sdCxyKXt2YXIgdT1uO3JldHVybihuPWUobikpPyhyP3VlKHUsdCxyKTpudWxsPT10KT9uLnNsaWNlKDAseShuKSsxKTpuLnNsaWNlKDAsaShuLHQrXCJcIikrMSk6bn0sV3QudHJ1bmM9ZnVuY3Rpb24obix0LHIpe3ImJnVlKG4sdCxyKSYmKHQ9bnVsbCk7dmFyIHU9VDtpZihyPVMsbnVsbCE9dClpZihYZSh0KSl7dmFyIG89XCJzZXBhcmF0b3JcImluIHQ/dC5zZXBhcmF0b3I6byx1PVwibGVuZ3RoXCJpbiB0Pyt0Lmxlbmd0aHx8MDp1O3I9XCJvbWlzc2lvblwiaW4gdD9lKHQub21pc3Npb24pOnJ9ZWxzZSB1PSt0fHwwO2lmKG49ZShuKSx1Pj1uLmxlbmd0aClyZXR1cm4gbjtpZih1LT1yLmxlbmd0aCwxPnUpcmV0dXJuIHI7aWYodD1uLnNsaWNlKDAsdSksbnVsbD09bylyZXR1cm4gdCtyO2lmKG51KG8pKXtpZihuLnNsaWNlKHUpLnNlYXJjaChvKSl7dmFyIGksZj1uLnNsaWNlKDAsdSk7Zm9yKG8uZ2xvYmFsfHwobz1SdShvLnNvdXJjZSwoeXQuZXhlYyhvKXx8XCJcIikrXCJnXCIpKSxvLmxhc3RJbmRleD0wO249by5leGVjKGYpOylpPW4uaW5kZXg7XG50PXQuc2xpY2UoMCxudWxsPT1pP3U6aSl9fWVsc2Ugbi5pbmRleE9mKG8sdSkhPXUmJihvPXQubGFzdEluZGV4T2YobyksLTE8byYmKHQ9dC5zbGljZSgwLG8pKSk7cmV0dXJuIHQrcn0sV3QudW5lc2NhcGU9ZnVuY3Rpb24obil7cmV0dXJuKG49ZShuKSkmJnN0LnRlc3Qobik/bi5yZXBsYWNlKGN0LGQpOm59LFd0LnVuaXF1ZUlkPWZ1bmN0aW9uKG4pe3ZhciB0PSsrRnU7cmV0dXJuIGUobikrdH0sV3Qud29yZHM9cHUsV3QuYWxsPUVlLFd0LmFueT1GZSxXdC5jb250YWlucz1rZSxXdC5kZXRlY3Q9SWUsV3QuZm9sZGw9U2UsV3QuZm9sZHI9V2UsV3QuaGVhZD15ZSxXdC5pbmNsdWRlPWtlLFd0LmluamVjdD1TZSxkdShXdCxmdW5jdGlvbigpe3ZhciBuPXt9O3JldHVybiBfcihXdCxmdW5jdGlvbih0LHIpe1d0LnByb3RvdHlwZVtyXXx8KG5bcl09dCl9KSxufSgpLGZhbHNlKSxXdC5zYW1wbGU9TmUsV3QucHJvdG90eXBlLnNhbXBsZT1mdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5fX2NoYWluX198fG51bGwhPW4/dGhpcy50aHJ1KGZ1bmN0aW9uKHQpe3JldHVybiBOZSh0LG4pXG59KTpOZSh0aGlzLnZhbHVlKCkpfSxXdC5WRVJTSU9OPWIsTXQoXCJiaW5kIGJpbmRLZXkgY3VycnkgY3VycnlSaWdodCBwYXJ0aWFsIHBhcnRpYWxSaWdodFwiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihuKXtXdFtuXS5wbGFjZWhvbGRlcj1XdH0pLE10KFtcImZpbHRlclwiLFwibWFwXCIsXCJ0YWtlV2hpbGVcIl0sZnVuY3Rpb24obix0KXt2YXIgcj10PT1VLGU9dD09TDtVdC5wcm90b3R5cGVbbl09ZnVuY3Rpb24obix1KXt2YXIgbz10aGlzLmNsb25lKCksaT1vLl9fZmlsdGVyZWRfXyxmPW8uX19pdGVyYXRlZXNfX3x8KG8uX19pdGVyYXRlZXNfXz1bXSk7cmV0dXJuIG8uX19maWx0ZXJlZF9fPWl8fHJ8fGUmJjA+by5fX2Rpcl9fLGYucHVzaCh7aXRlcmF0ZWU6SHIobix1LDMpLHR5cGU6dH0pLG99fSksTXQoW1wiZHJvcFwiLFwidGFrZVwiXSxmdW5jdGlvbihuLHQpe3ZhciByPVwiX19cIituK1wiQ291bnRfX1wiLGU9bitcIldoaWxlXCI7VXQucHJvdG90eXBlW25dPWZ1bmN0aW9uKGUpe2U9bnVsbD09ZT8xOnVvKFB1KGUpfHwwLDApO1xudmFyIHU9dGhpcy5jbG9uZSgpO2lmKHUuX19maWx0ZXJlZF9fKXt2YXIgbz11W3JdO3Vbcl09dD9vbyhvLGUpOm8rZX1lbHNlKHUuX192aWV3c19ffHwodS5fX3ZpZXdzX189W10pKS5wdXNoKHtzaXplOmUsdHlwZTpuKygwPnUuX19kaXJfXz9cIlJpZ2h0XCI6XCJcIil9KTtyZXR1cm4gdX0sVXQucHJvdG90eXBlW24rXCJSaWdodFwiXT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5yZXZlcnNlKClbbl0odCkucmV2ZXJzZSgpfSxVdC5wcm90b3R5cGVbbitcIlJpZ2h0V2hpbGVcIl09ZnVuY3Rpb24obix0KXtyZXR1cm4gdGhpcy5yZXZlcnNlKClbZV0obix0KS5yZXZlcnNlKCl9fSksTXQoW1wiZmlyc3RcIixcImxhc3RcIl0sZnVuY3Rpb24obix0KXt2YXIgcj1cInRha2VcIisodD9cIlJpZ2h0XCI6XCJcIik7VXQucHJvdG90eXBlW25dPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbcl0oMSkudmFsdWUoKVswXX19KSxNdChbXCJpbml0aWFsXCIsXCJyZXN0XCJdLGZ1bmN0aW9uKG4sdCl7dmFyIHI9XCJkcm9wXCIrKHQ/XCJcIjpcIlJpZ2h0XCIpO1xuVXQucHJvdG90eXBlW25dPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbcl0oMSl9fSksTXQoW1wicGx1Y2tcIixcIndoZXJlXCJdLGZ1bmN0aW9uKG4sdCl7dmFyIHI9dD9cImZpbHRlclwiOlwibWFwXCIsZT10P2JyOmpyO1V0LnByb3RvdHlwZVtuXT1mdW5jdGlvbihuKXtyZXR1cm4gdGhpc1tyXShlKG4pKX19KSxVdC5wcm90b3R5cGUuY29tcGFjdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmZpbHRlcih2dSl9LFV0LnByb3RvdHlwZS5kcm9wV2hpbGU9ZnVuY3Rpb24obix0KXt2YXIgcjtyZXR1cm4gbj1IcihuLHQsMyksdGhpcy5maWx0ZXIoZnVuY3Rpb24odCxlLHUpe3JldHVybiByfHwocj0hbih0LGUsdSkpfSl9LFV0LnByb3RvdHlwZS5yZWplY3Q9ZnVuY3Rpb24obix0KXtyZXR1cm4gbj1IcihuLHQsMyksdGhpcy5maWx0ZXIoZnVuY3Rpb24odCxyLGUpe3JldHVybiFuKHQscixlKX0pfSxVdC5wcm90b3R5cGUuc2xpY2U9ZnVuY3Rpb24obix0KXtuPW51bGw9PW4/MDorbnx8MDt2YXIgcj0wPm4/dGhpcy50YWtlUmlnaHQoLW4pOnRoaXMuZHJvcChuKTtcbnJldHVybiB0eXBlb2YgdCE9XCJ1bmRlZmluZWRcIiYmKHQ9K3R8fDAscj0wPnQ/ci5kcm9wUmlnaHQoLXQpOnIudGFrZSh0LW4pKSxyfSxVdC5wcm90b3R5cGUudG9BcnJheT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRyb3AoMCl9LF9yKFV0LnByb3RvdHlwZSxmdW5jdGlvbihuLHQpe3ZhciByPVd0W3RdLGU9L14oPzpmaXJzdHxsYXN0KSQvLnRlc3QodCk7V3QucHJvdG90eXBlW3RdPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChuKXtyZXR1cm4gbj1bbl0sVnUuYXBwbHkobixvKSxyLmFwcGx5KFd0LG4pfXZhciB1PXRoaXMuX193cmFwcGVkX18sbz1hcmd1bWVudHMsaT10aGlzLl9fY2hhaW5fXyxmPSEhdGhpcy5fX2FjdGlvbnNfXy5sZW5ndGgsYT11IGluc3RhbmNlb2YgVXQsYz1hJiYhZjtyZXR1cm4gZSYmIWk/Yz9uLmNhbGwodSk6ci5jYWxsKFd0LHRoaXMudmFsdWUoKSk6YXx8U28odSk/KHU9bi5hcHBseShjP3U6bmV3IFV0KHRoaXMpLG8pLGV8fCFmJiYhdS5fX2FjdGlvbnNfX3x8KHUuX19hY3Rpb25zX198fCh1Ll9fYWN0aW9uc19fPVtdKSkucHVzaCh7ZnVuYzpqZSxhcmdzOlt0XSx0aGlzQXJnOld0fSksbmV3IE50KHUsaSkpOnRoaXMudGhydSh0KVxufX0pLE10KFwiY29uY2F0IGpvaW4gcG9wIHB1c2ggc2hpZnQgc29ydCBzcGxpY2UgdW5zaGlmdFwiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihuKXt2YXIgdD1DdVtuXSxyPS9eKD86cHVzaHxzb3J0fHVuc2hpZnQpJC8udGVzdChuKT9cInRhcFwiOlwidGhydVwiLGU9L14oPzpqb2lufHBvcHxzaGlmdCkkLy50ZXN0KG4pO1d0LnByb3RvdHlwZVtuXT1mdW5jdGlvbigpe3ZhciBuPWFyZ3VtZW50cztyZXR1cm4gZSYmIXRoaXMuX19jaGFpbl9fP3QuYXBwbHkodGhpcy52YWx1ZSgpLG4pOnRoaXNbcl0oZnVuY3Rpb24ocil7cmV0dXJuIHQuYXBwbHkocixuKX0pfX0pLFV0LnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciBuPXRoaXMuX19hY3Rpb25zX18sdD10aGlzLl9faXRlcmF0ZWVzX18scj10aGlzLl9fdmlld3NfXyxlPW5ldyBVdCh0aGlzLl9fd3JhcHBlZF9fKTtyZXR1cm4gZS5fX2FjdGlvbnNfXz1uP3p0KG4pOm51bGwsZS5fX2Rpcl9fPXRoaXMuX19kaXJfXyxlLl9fZHJvcENvdW50X189dGhpcy5fX2Ryb3BDb3VudF9fLGUuX19maWx0ZXJlZF9fPXRoaXMuX19maWx0ZXJlZF9fLGUuX19pdGVyYXRlZXNfXz10P3p0KHQpOm51bGwsZS5fX3Rha2VDb3VudF9fPXRoaXMuX190YWtlQ291bnRfXyxlLl9fdmlld3NfXz1yP3p0KHIpOm51bGwsZVxufSxVdC5wcm90b3R5cGUucmV2ZXJzZT1mdW5jdGlvbigpe2lmKHRoaXMuX19maWx0ZXJlZF9fKXt2YXIgbj1uZXcgVXQodGhpcyk7bi5fX2Rpcl9fPS0xLG4uX19maWx0ZXJlZF9fPXRydWV9ZWxzZSBuPXRoaXMuY2xvbmUoKSxuLl9fZGlyX18qPS0xO3JldHVybiBufSxVdC5wcm90b3R5cGUudmFsdWU9ZnVuY3Rpb24oKXt2YXIgbj10aGlzLl9fd3JhcHBlZF9fLnZhbHVlKCk7aWYoIVNvKG4pKXJldHVybiBUcihuLHRoaXMuX19hY3Rpb25zX18pO3ZhciB0LHI9dGhpcy5fX2Rpcl9fLGU9MD5yO3Q9bi5sZW5ndGg7Zm9yKHZhciB1PXRoaXMuX192aWV3c19fLG89MCxpPS0xLGY9dT91Lmxlbmd0aDowOysraTxmOyl7dmFyIGE9dVtpXSxjPWEuc2l6ZTtzd2l0Y2goYS50eXBlKXtjYXNlXCJkcm9wXCI6bys9YzticmVhaztjYXNlXCJkcm9wUmlnaHRcIjp0LT1jO2JyZWFrO2Nhc2VcInRha2VcIjp0PW9vKHQsbytjKTticmVhaztjYXNlXCJ0YWtlUmlnaHRcIjpvPXVvKG8sdC1jKX19dD17c3RhcnQ6byxlbmQ6dH0saT10LnN0YXJ0LGY9dC5lbmQsdD1mLWksdT10aGlzLl9fZHJvcENvdW50X18sbz1vbyh0LHRoaXMuX190YWtlQ291bnRfXyksZT1lP2Y6aS0xLGY9KGk9dGhpcy5fX2l0ZXJhdGVlc19fKT9pLmxlbmd0aDowLGE9MCxjPVtdO1xubjpmb3IoO3QtLSYmYTxvOyl7Zm9yKHZhciBlPWUrcixsPS0xLHM9bltlXTsrK2w8Zjspe3ZhciBwPWlbbF0saD1wLml0ZXJhdGVlKHMsZSxuKSxwPXAudHlwZTtpZihwPT1GKXM9aDtlbHNlIGlmKCFoKXtpZihwPT1VKWNvbnRpbnVlIG47YnJlYWsgbn19dT91LS06Y1thKytdPXN9cmV0dXJuIGN9LFd0LnByb3RvdHlwZS5jaGFpbj1mdW5jdGlvbigpe3JldHVybiBBZSh0aGlzKX0sV3QucHJvdG90eXBlLmNvbW1pdD1mdW5jdGlvbigpe3JldHVybiBuZXcgTnQodGhpcy52YWx1ZSgpLHRoaXMuX19jaGFpbl9fKX0sV3QucHJvdG90eXBlLnBsYW50PWZ1bmN0aW9uKG4pe2Zvcih2YXIgdCxyPXRoaXM7ciBpbnN0YW5jZW9mIE50Oyl7dmFyIGU9aGUocik7dD91Ll9fd3JhcHBlZF9fPWU6dD1lO3ZhciB1PWUscj1yLl9fd3JhcHBlZF9ffXJldHVybiB1Ll9fd3JhcHBlZF9fPW4sdH0sV3QucHJvdG90eXBlLnJldmVyc2U9ZnVuY3Rpb24oKXt2YXIgbj10aGlzLl9fd3JhcHBlZF9fO3JldHVybiBuIGluc3RhbmNlb2YgVXQ/KHRoaXMuX19hY3Rpb25zX18ubGVuZ3RoJiYobj1uZXcgVXQodGhpcykpLG5ldyBOdChuLnJldmVyc2UoKSx0aGlzLl9fY2hhaW5fXykpOnRoaXMudGhydShmdW5jdGlvbihuKXtyZXR1cm4gbi5yZXZlcnNlKClcbn0pfSxXdC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZSgpK1wiXCJ9LFd0LnByb3RvdHlwZS5ydW49V3QucHJvdG90eXBlLnRvSlNPTj1XdC5wcm90b3R5cGUudmFsdWVPZj1XdC5wcm90b3R5cGUudmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4gVHIodGhpcy5fX3dyYXBwZWRfXyx0aGlzLl9fYWN0aW9uc19fKX0sV3QucHJvdG90eXBlLmNvbGxlY3Q9V3QucHJvdG90eXBlLm1hcCxXdC5wcm90b3R5cGUuaGVhZD1XdC5wcm90b3R5cGUuZmlyc3QsV3QucHJvdG90eXBlLnNlbGVjdD1XdC5wcm90b3R5cGUuZmlsdGVyLFd0LnByb3RvdHlwZS50YWlsPVd0LnByb3RvdHlwZS5yZXN0LFd0fXZhciB3LGI9XCIzLjIuMFwiLHg9MSxBPTIsaj00LGs9OCxFPTE2LFI9MzIsST02NCxPPTEyOCxDPTI1NixUPTMwLFM9XCIuLi5cIixXPTE1MCxOPTE2LFU9MCxGPTEsTD0yLCQ9XCJFeHBlY3RlZCBhIGZ1bmN0aW9uXCIsQj1cIl9fbG9kYXNoX3BsYWNlaG9sZGVyX19cIix6PVwiW29iamVjdCBBcmd1bWVudHNdXCIsRD1cIltvYmplY3QgQXJyYXldXCIsTT1cIltvYmplY3QgQm9vbGVhbl1cIixxPVwiW29iamVjdCBEYXRlXVwiLFA9XCJbb2JqZWN0IEVycm9yXVwiLEs9XCJbb2JqZWN0IEZ1bmN0aW9uXVwiLFY9XCJbb2JqZWN0IE51bWJlcl1cIixZPVwiW29iamVjdCBPYmplY3RdXCIsWj1cIltvYmplY3QgUmVnRXhwXVwiLEc9XCJbb2JqZWN0IFN0cmluZ11cIixKPVwiW29iamVjdCBBcnJheUJ1ZmZlcl1cIixYPVwiW29iamVjdCBGbG9hdDMyQXJyYXldXCIsSD1cIltvYmplY3QgRmxvYXQ2NEFycmF5XVwiLFE9XCJbb2JqZWN0IEludDhBcnJheV1cIixudD1cIltvYmplY3QgSW50MTZBcnJheV1cIix0dD1cIltvYmplY3QgSW50MzJBcnJheV1cIixydD1cIltvYmplY3QgVWludDhBcnJheV1cIixldD1cIltvYmplY3QgVWludDhDbGFtcGVkQXJyYXldXCIsdXQ9XCJbb2JqZWN0IFVpbnQxNkFycmF5XVwiLG90PVwiW29iamVjdCBVaW50MzJBcnJheV1cIixpdD0vXFxiX19wXFwrPScnOy9nLGZ0PS9cXGIoX19wXFwrPSknJ1xcKy9nLGF0PS8oX19lXFwoLio/XFwpfFxcYl9fdFxcKSlcXCsnJzsvZyxjdD0vJig/OmFtcHxsdHxndHxxdW90fCMzOXwjOTYpOy9nLGx0PS9bJjw+XCInYF0vZyxzdD1SZWdFeHAoY3Quc291cmNlKSxwdD1SZWdFeHAobHQuc291cmNlKSxodD0vPCUtKFtcXHNcXFNdKz8pJT4vZyxfdD0vPCUoW1xcc1xcU10rPyklPi9nLGd0PS88JT0oW1xcc1xcU10rPyklPi9nLHZ0PS9cXCRcXHsoW15cXFxcfV0qKD86XFxcXC5bXlxcXFx9XSopKilcXH0vZyx5dD0vXFx3KiQvLGR0PS9eXFxzKmZ1bmN0aW9uWyBcXG5cXHJcXHRdK1xcdy8sbXQ9L14wW3hYXS8sd3Q9L15cXFtvYmplY3QgLis/Q29uc3RydWN0b3JcXF0kLyxidD0vW1xceGMwLVxceGQ2XFx4ZDgtXFx4ZGVcXHhkZi1cXHhmNlxceGY4LVxceGZmXS9nLHh0PS8oJF4pLyxBdD0vWy4qKz9eJHt9KCl8W1xcXVxcL1xcXFxdL2csanQ9UmVnRXhwKEF0LnNvdXJjZSksa3Q9L1xcYnRoaXNcXGIvLEV0PS9bJ1xcblxcclxcdTIwMjhcXHUyMDI5XFxcXF0vZyxSdD1SZWdFeHAoXCJbQS1aXFxcXHhjMC1cXFxceGQ2XFxcXHhkOC1cXFxceGRlXXsyLH0oPz1bQS1aXFxcXHhjMC1cXFxceGQ2XFxcXHhkOC1cXFxceGRlXVthLXpcXFxceGRmLVxcXFx4ZjZcXFxceGY4LVxcXFx4ZmZdKyl8W0EtWlxcXFx4YzAtXFxcXHhkNlxcXFx4ZDgtXFxcXHhkZV0/W2EtelxcXFx4ZGYtXFxcXHhmNlxcXFx4ZjgtXFxcXHhmZl0rfFtBLVpcXFxceGMwLVxcXFx4ZDZcXFxceGQ4LVxcXFx4ZGVdK3xbMC05XStcIixcImdcIiksSXQ9XCIgXFx0XFx4MGJcXGZcXHhhMFxcdWZlZmZcXG5cXHJcXHUyMDI4XFx1MjAyOVxcdTE2ODBcXHUxODBlXFx1MjAwMFxcdTIwMDFcXHUyMDAyXFx1MjAwM1xcdTIwMDRcXHUyMDA1XFx1MjAwNlxcdTIwMDdcXHUyMDA4XFx1MjAwOVxcdTIwMGFcXHUyMDJmXFx1MjA1ZlxcdTMwMDBcIixPdD1cIkFycmF5IEFycmF5QnVmZmVyIERhdGUgRXJyb3IgRmxvYXQzMkFycmF5IEZsb2F0NjRBcnJheSBGdW5jdGlvbiBJbnQ4QXJyYXkgSW50MTZBcnJheSBJbnQzMkFycmF5IE1hdGggTnVtYmVyIE9iamVjdCBSZWdFeHAgU2V0IFN0cmluZyBfIGNsZWFyVGltZW91dCBkb2N1bWVudCBpc0Zpbml0ZSBwYXJzZUludCBzZXRUaW1lb3V0IFR5cGVFcnJvciBVaW50OEFycmF5IFVpbnQ4Q2xhbXBlZEFycmF5IFVpbnQxNkFycmF5IFVpbnQzMkFycmF5IFdlYWtNYXAgd2luZG93IFdpblJURXJyb3JcIi5zcGxpdChcIiBcIiksQ3Q9e307XG5DdFtYXT1DdFtIXT1DdFtRXT1DdFtudF09Q3RbdHRdPUN0W3J0XT1DdFtldF09Q3RbdXRdPUN0W290XT10cnVlLEN0W3pdPUN0W0RdPUN0W0pdPUN0W01dPUN0W3FdPUN0W1BdPUN0W0tdPUN0W1wiW29iamVjdCBNYXBdXCJdPUN0W1ZdPUN0W1ldPUN0W1pdPUN0W1wiW29iamVjdCBTZXRdXCJdPUN0W0ddPUN0W1wiW29iamVjdCBXZWFrTWFwXVwiXT1mYWxzZTt2YXIgVHQ9e307VHRbel09VHRbRF09VHRbSl09VHRbTV09VHRbcV09VHRbWF09VHRbSF09VHRbUV09VHRbbnRdPVR0W3R0XT1UdFtWXT1UdFtZXT1UdFtaXT1UdFtHXT1UdFtydF09VHRbZXRdPVR0W3V0XT1UdFtvdF09dHJ1ZSxUdFtQXT1UdFtLXT1UdFtcIltvYmplY3QgTWFwXVwiXT1UdFtcIltvYmplY3QgU2V0XVwiXT1UdFtcIltvYmplY3QgV2Vha01hcF1cIl09ZmFsc2U7dmFyIFN0PXtsZWFkaW5nOmZhbHNlLG1heFdhaXQ6MCx0cmFpbGluZzpmYWxzZX0sV3Q9e1wiXFx4YzBcIjpcIkFcIixcIlxceGMxXCI6XCJBXCIsXCJcXHhjMlwiOlwiQVwiLFwiXFx4YzNcIjpcIkFcIixcIlxceGM0XCI6XCJBXCIsXCJcXHhjNVwiOlwiQVwiLFwiXFx4ZTBcIjpcImFcIixcIlxceGUxXCI6XCJhXCIsXCJcXHhlMlwiOlwiYVwiLFwiXFx4ZTNcIjpcImFcIixcIlxceGU0XCI6XCJhXCIsXCJcXHhlNVwiOlwiYVwiLFwiXFx4YzdcIjpcIkNcIixcIlxceGU3XCI6XCJjXCIsXCJcXHhkMFwiOlwiRFwiLFwiXFx4ZjBcIjpcImRcIixcIlxceGM4XCI6XCJFXCIsXCJcXHhjOVwiOlwiRVwiLFwiXFx4Y2FcIjpcIkVcIixcIlxceGNiXCI6XCJFXCIsXCJcXHhlOFwiOlwiZVwiLFwiXFx4ZTlcIjpcImVcIixcIlxceGVhXCI6XCJlXCIsXCJcXHhlYlwiOlwiZVwiLFwiXFx4Y2NcIjpcIklcIixcIlxceGNkXCI6XCJJXCIsXCJcXHhjZVwiOlwiSVwiLFwiXFx4Y2ZcIjpcIklcIixcIlxceGVjXCI6XCJpXCIsXCJcXHhlZFwiOlwiaVwiLFwiXFx4ZWVcIjpcImlcIixcIlxceGVmXCI6XCJpXCIsXCJcXHhkMVwiOlwiTlwiLFwiXFx4ZjFcIjpcIm5cIixcIlxceGQyXCI6XCJPXCIsXCJcXHhkM1wiOlwiT1wiLFwiXFx4ZDRcIjpcIk9cIixcIlxceGQ1XCI6XCJPXCIsXCJcXHhkNlwiOlwiT1wiLFwiXFx4ZDhcIjpcIk9cIixcIlxceGYyXCI6XCJvXCIsXCJcXHhmM1wiOlwib1wiLFwiXFx4ZjRcIjpcIm9cIixcIlxceGY1XCI6XCJvXCIsXCJcXHhmNlwiOlwib1wiLFwiXFx4ZjhcIjpcIm9cIixcIlxceGQ5XCI6XCJVXCIsXCJcXHhkYVwiOlwiVVwiLFwiXFx4ZGJcIjpcIlVcIixcIlxceGRjXCI6XCJVXCIsXCJcXHhmOVwiOlwidVwiLFwiXFx4ZmFcIjpcInVcIixcIlxceGZiXCI6XCJ1XCIsXCJcXHhmY1wiOlwidVwiLFwiXFx4ZGRcIjpcIllcIixcIlxceGZkXCI6XCJ5XCIsXCJcXHhmZlwiOlwieVwiLFwiXFx4YzZcIjpcIkFlXCIsXCJcXHhlNlwiOlwiYWVcIixcIlxceGRlXCI6XCJUaFwiLFwiXFx4ZmVcIjpcInRoXCIsXCJcXHhkZlwiOlwic3NcIn0sTnQ9e1wiJlwiOlwiJmFtcDtcIixcIjxcIjpcIiZsdDtcIixcIj5cIjpcIiZndDtcIiwnXCInOlwiJnF1b3Q7XCIsXCInXCI6XCImIzM5O1wiLFwiYFwiOlwiJiM5NjtcIn0sVXQ9e1wiJmFtcDtcIjpcIiZcIixcIiZsdDtcIjpcIjxcIixcIiZndDtcIjpcIj5cIixcIiZxdW90O1wiOidcIicsXCImIzM5O1wiOlwiJ1wiLFwiJiM5NjtcIjpcImBcIn0sRnQ9e1wiZnVuY3Rpb25cIjp0cnVlLG9iamVjdDp0cnVlfSxMdD17XCJcXFxcXCI6XCJcXFxcXCIsXCInXCI6XCInXCIsXCJcXG5cIjpcIm5cIixcIlxcclwiOlwiclwiLFwiXFx1MjAyOFwiOlwidTIwMjhcIixcIlxcdTIwMjlcIjpcInUyMDI5XCJ9LCR0PUZ0W3R5cGVvZiB3aW5kb3ddJiZ3aW5kb3chPT0odGhpcyYmdGhpcy53aW5kb3cpP3dpbmRvdzp0aGlzLEJ0PUZ0W3R5cGVvZiBleHBvcnRzXSYmZXhwb3J0cyYmIWV4cG9ydHMubm9kZVR5cGUmJmV4cG9ydHMsRnQ9RnRbdHlwZW9mIG1vZHVsZV0mJm1vZHVsZSYmIW1vZHVsZS5ub2RlVHlwZSYmbW9kdWxlLHp0PUJ0JiZGdCYmdHlwZW9mIGdsb2JhbD09XCJvYmplY3RcIiYmZ2xvYmFsO1xuIXp0fHx6dC5nbG9iYWwhPT16dCYmenQud2luZG93IT09enQmJnp0LnNlbGYhPT16dHx8KCR0PXp0KTt2YXIgenQ9RnQmJkZ0LmV4cG9ydHM9PT1CdCYmQnQsRHQ9bSgpO3R5cGVvZiBkZWZpbmU9PVwiZnVuY3Rpb25cIiYmdHlwZW9mIGRlZmluZS5hbWQ9PVwib2JqZWN0XCImJmRlZmluZS5hbWQ/KCR0Ll89RHQsIGRlZmluZShmdW5jdGlvbigpe3JldHVybiBEdH0pKTpCdCYmRnQ/enQ/KEZ0LmV4cG9ydHM9RHQpLl89RHQ6QnQuXz1EdDokdC5fPUR0fSkuY2FsbCh0aGlzKTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgnYXJjaGl2ZScsIGZ1bmN0aW9uIChEYXRhKSB7XG5cdHZhciBhcmNoaXZlID0ge307XG5cblx0YXJjaGl2ZS5zZW5kRXh0ZXJuYWxVUkwgPSBmdW5jdGlvbihleHRlcm5hbFVSTCwgdGFncykge1xuXHRcdHJldHVybiBEYXRhLnBvc3RDb3ZlcihleHRlcm5hbFVSTCwgdGFncyk7XG5cdH07XG5cblx0cmV0dXJuIGFyY2hpdmU7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgnY2FjaGUnLCBmdW5jdGlvbiAoJHEsICRsb2csIERhdGEpIHtcblx0dmFyIGNhY2hlID0ge307XG5cblx0dmFyIGxpYnJhcnkgPSBudWxsO1xuXHR2YXIgc2VjdGlvbnMgPSB7fTtcblx0dmFyIGJvb2tzID0ge307XG5cdHZhciBpbWFnZXMgPSB7fTtcblxuXHRjYWNoZS5pbml0ID0gZnVuY3Rpb24obGlicmFyeU1vZGVsLCBzZWN0aW9uTW9kZWxzLCBib29rTW9kZWxzLCBpbWFnZVVybHMpIHtcblx0XHR2YXIgbGlicmFyeUxvYWQgPSBsb2FkTGlicmFyeURhdGEobGlicmFyeU1vZGVsKTtcblx0XHR2YXIgc2VjdGlvbnNMb2FkID0gW107XG5cdFx0dmFyIGJvb2tzTG9hZCA9IFtdO1xuXHRcdHZhciBpbWFnZXNMb2FkID0gW107XG5cdFx0dmFyIG1vZGVsLCB1cmw7IC8vIGl0ZXJhdG9yc1xuXG5cdFx0Zm9yIChtb2RlbCBpbiBzZWN0aW9uTW9kZWxzKSB7XG5cdFx0XHRzZWN0aW9uc0xvYWQucHVzaChhZGRTZWN0aW9uKG1vZGVsKSk7XG5cdFx0fVxuXG5cdFx0Zm9yIChtb2RlbCBpbiBib29rTW9kZWxzKSB7XG5cdFx0XHRib29rc0xvYWQucHVzaChhZGRCb29rKG1vZGVsKSk7XG5cdFx0fVxuXG5cdFx0Zm9yICh1cmwgaW4gaW1hZ2VVcmxzKSB7XG5cdFx0XHRpbWFnZXNMb2FkLnB1c2goYWRkSW1hZ2UodXJsKSk7XG5cdFx0fVxuXG5cdFx0dmFyIHByb21pc2UgPSAkcS5hbGwoe1xuXHRcdFx0bGlicmFyeUNhY2hlOiBsaWJyYXJ5TG9hZCwgXG5cdFx0XHRzZWN0aW9uc0xvYWQ6ICRxLmFsbChzZWN0aW9uc0xvYWQpLCBcblx0XHRcdGJvb2tzTG9hZDogJHEuYWxsKGJvb2tzTG9hZCksXG5cdFx0XHRpbWFnZXNMb2FkOiAkcS5hbGwoaW1hZ2VzTG9hZClcblx0XHR9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHRzKSB7XG5cdFx0XHRsaWJyYXJ5ID0gcmVzdWx0cy5saWJyYXJ5Q2FjaGU7XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gcHJvbWlzZTtcblx0fTtcblxuXHRjYWNoZS5nZXRMaWJyYXJ5ID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGxpYnJhcnk7XG5cdH07XG5cblx0Y2FjaGUuZ2V0U2VjdGlvbiA9IGZ1bmN0aW9uKG1vZGVsKSB7XG5cdFx0cmV0dXJuIGNvbW1vbkdldHRlcihzZWN0aW9ucywgbW9kZWwsIGFkZFNlY3Rpb24pO1xuXHR9O1xuXG5cdGNhY2hlLmdldEJvb2sgPSBmdW5jdGlvbihtb2RlbCkge1xuXHRcdHJldHVybiBjb21tb25HZXR0ZXIoYm9va3MsIG1vZGVsLCBhZGRCb29rKTtcblx0fTtcblxuXHRjYWNoZS5nZXRJbWFnZSA9IGZ1bmN0aW9uKHVybCkge1xuXHRcdHJldHVybiBjb21tb25HZXR0ZXIoaW1hZ2VzLCB1cmwsIGFkZEltYWdlKTtcblx0fTtcblxuXHR2YXIgYWRkU2VjdGlvbiA9IGZ1bmN0aW9uKG1vZGVsKSB7XG5cdFx0cmV0dXJuIGNvbW1vbkFkZGVyKHNlY3Rpb25zLCBtb2RlbCwgbG9hZFNlY3Rpb25EYXRhKTtcblx0fTtcblxuXHR2YXIgYWRkQm9vayA9IGZ1bmN0aW9uKG1vZGVsKSB7XG5cdFx0cmV0dXJuIGNvbW1vbkFkZGVyKGJvb2tzLCBtb2RlbCwgbG9hZEJvb2tEYXRhKTtcblx0fTtcblxuXHR2YXIgYWRkSW1hZ2UgPSBmdW5jdGlvbih1cmwpIHtcblx0XHRyZXR1cm4gY29tbW9uQWRkZXIoaW1hZ2VzLCB1cmwsIERhdGEubG9hZEltYWdlKS5jYXRjaChmdW5jdGlvbiAoKSB7XG5cdFx0XHQkbG9nLmVycm9yKCdFcnJvciBhZGRpbmcgaW1hZ2U6JywgdXJsKTtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH0pO1xuXHR9O1xuXG5cdHZhciBjb21tb25HZXR0ZXIgPSBmdW5jdGlvbihmcm9tLCBrZXksIGFkZEZ1bmN0aW9uKSB7XG5cdFx0dmFyIHJlc3VsdCA9IGZyb21ba2V5XTtcblxuXHRcdGlmKCFyZXN1bHQpIHtcblx0XHRcdHJlc3VsdCA9IGFkZEZ1bmN0aW9uKGtleSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuICRxLndoZW4ocmVzdWx0KTtcblx0fTtcblxuXHR2YXIgY29tbW9uQWRkZXIgPSBmdW5jdGlvbih3aGVyZSwgd2hhdCwgbG9hZGVyKSB7XG5cdFx0dmFyIHByb21pc2UgPSBsb2FkZXIod2hhdCkudGhlbihmdW5jdGlvbiAobG9hZGVkQ2FjaGUpIHtcblx0XHRcdHdoZXJlW3doYXRdID0gbG9hZGVkQ2FjaGU7XG5cblx0XHRcdHJldHVybiBsb2FkZWRDYWNoZTtcblx0XHR9KTtcblxuXHRcdHJldHVybiBwcm9taXNlO1xuXHR9O1xuXG5cdHZhciBsb2FkTGlicmFyeURhdGEgPSBmdW5jdGlvbihtb2RlbCkge1xuXHRcdHZhciBwYXRoID0gJy9vYmovbGlicmFyaWVzL3ttb2RlbH0vJy5yZXBsYWNlKCd7bW9kZWx9JywgbW9kZWwpO1xuICAgICAgICB2YXIgbW9kZWxVcmwgPSBwYXRoICsgJ21vZGVsLmpzb24nO1xuICAgICAgICB2YXIgbWFwVXJsID0gcGF0aCArICdtYXAuanBnJztcblxuICAgICAgICB2YXIgcHJvbWlzZSA9ICRxLmFsbCh7XG4gICAgICAgIFx0Z2VvbWV0cnk6IERhdGEubG9hZEdlb21ldHJ5KG1vZGVsVXJsKSwgXG4gICAgICAgIFx0bWFwSW1hZ2U6IERhdGEubG9hZEltYWdlKG1hcFVybClcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG5cdH07XG5cblx0dmFyIGxvYWRTZWN0aW9uRGF0YSA9IGZ1bmN0aW9uKG1vZGVsKSB7XG5cdFx0dmFyIHBhdGggPSAnL29iai9zZWN0aW9ucy97bW9kZWx9LycucmVwbGFjZSgne21vZGVsfScsIG1vZGVsKTtcbiAgICAgICAgdmFyIG1vZGVsVXJsID0gcGF0aCArICdtb2RlbC5qcyc7XG4gICAgICAgIHZhciBtYXBVcmwgPSBwYXRoICsgJ21hcC5qcGcnO1xuICAgICAgICB2YXIgZGF0YVVybCA9IHBhdGggKyAnZGF0YS5qc29uJztcblxuICAgICAgICB2YXIgcHJvbWlzZSA9ICRxLmFsbCh7XG4gICAgICAgIFx0Z2VvbWV0cnk6IERhdGEubG9hZEdlb21ldHJ5KG1vZGVsVXJsKSwgXG4gICAgICAgIFx0bWFwSW1hZ2U6IERhdGEubG9hZEltYWdlKG1hcFVybCksIFxuICAgICAgICBcdGRhdGE6IERhdGEuZ2V0RGF0YShkYXRhVXJsKVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcblx0fTtcblxuXHR2YXIgbG9hZEJvb2tEYXRhID0gZnVuY3Rpb24obW9kZWwpIHtcblx0XHR2YXIgcGF0aCA9ICcvb2JqL2Jvb2tzL3ttb2RlbH0vJy5yZXBsYWNlKCd7bW9kZWx9JywgbW9kZWwpO1xuICAgICAgICB2YXIgbW9kZWxVcmwgPSBwYXRoICsgJ21vZGVsLmpzJztcbiAgICAgICAgdmFyIG1hcFVybCA9IHBhdGggKyAnbWFwLmpwZyc7XG5cbiAgICAgICAgdmFyIHByb21pc2UgPSAkcS5hbGwoe1xuICAgICAgICBcdGdlb21ldHJ5OiBEYXRhLmxvYWRHZW9tZXRyeShtb2RlbFVybCksXG4gICAgICAgIFx0bWFwSW1hZ2U6IERhdGEubG9hZEltYWdlKG1hcFVybCkgXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuXHR9O1xuXG5cdHJldHVybiBjYWNoZTtcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5mYWN0b3J5KCdDYW1lcmEnLCBmdW5jdGlvbiAoQ2FtZXJhT2JqZWN0KSB7XG5cdHZhciBDYW1lcmEgPSB7XG5cdFx0SEVJR1RIOiAxLjUsXG5cdFx0b2JqZWN0OiBuZXcgQ2FtZXJhT2JqZWN0KCksXG5cdFx0c2V0UGFyZW50OiBmdW5jdGlvbihwYXJlbnQpIHtcblx0XHRcdHBhcmVudC5hZGQodGhpcy5vYmplY3QpO1xuXHRcdH0sXG5cdFx0Z2V0UG9zaXRpb246IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMub2JqZWN0LnBvc2l0aW9uO1xuXHRcdH1cblx0fTtcblxuXHRDYW1lcmEuaW5pdCA9IGZ1bmN0aW9uKHdpZHRoLCBoZWlnaHQpIHtcblx0XHRDYW1lcmEuY2FtZXJhID0gbmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKDQ1LCB3aWR0aCAvIGhlaWdodCwgMC4wMSwgNTApO1xuXHRcdHRoaXMub2JqZWN0LnBvc2l0aW9uID0gbmV3IFRIUkVFLlZlY3RvcjMoMCwgQ2FtZXJhLkhFSUdUSCwgMCk7XG5cdFx0dGhpcy5vYmplY3Qucm90YXRpb24ub3JkZXIgPSAnWVhaJztcblxuXHRcdHZhciBjYW5kbGUgPSBuZXcgVEhSRUUuUG9pbnRMaWdodCgweDY2NTU1NSwgMS42LCAxMCk7XG5cdFx0Y2FuZGxlLnBvc2l0aW9uLnNldCgwLCAwLCAwKTtcblx0XHR0aGlzLm9iamVjdC5hZGQoY2FuZGxlKTtcblxuXHRcdHRoaXMub2JqZWN0LmFkZChDYW1lcmEuY2FtZXJhKTtcblx0fTtcblxuXHRDYW1lcmEucm90YXRlID0gZnVuY3Rpb24oeCwgeSkge1xuXHRcdHZhciBuZXdYID0gdGhpcy5vYmplY3Qucm90YXRpb24ueCArIHkgKiAwLjAwMDEgfHwgMDtcblx0XHR2YXIgbmV3WSA9IHRoaXMub2JqZWN0LnJvdGF0aW9uLnkgKyB4ICogMC4wMDAxIHx8IDA7XG5cblx0XHRpZihuZXdYIDwgMS41NyAmJiBuZXdYID4gLTEuNTcpIHtcdFxuXHRcdFx0dGhpcy5vYmplY3Qucm90YXRpb24ueCA9IG5ld1g7XG5cdFx0fVxuXG5cdFx0dGhpcy5vYmplY3Qucm90YXRpb24ueSA9IG5ld1k7XG5cdH07XG5cblx0Q2FtZXJhLmdvID0gZnVuY3Rpb24oc3BlZWQpIHtcblx0XHR2YXIgZGlyZWN0aW9uID0gdGhpcy5nZXRWZWN0b3IoKTtcblx0XHR2YXIgbmV3UG9zaXRpb24gPSB0aGlzLm9iamVjdC5wb3NpdGlvbi5jbG9uZSgpO1xuXHRcdG5ld1Bvc2l0aW9uLmFkZChkaXJlY3Rpb24ubXVsdGlwbHlTY2FsYXIoc3BlZWQpKTtcblxuXHRcdHRoaXMub2JqZWN0Lm1vdmUobmV3UG9zaXRpb24pO1xuXHR9O1xuXG5cdENhbWVyYS5nZXRWZWN0b3IgPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgdmVjdG9yID0gbmV3IFRIUkVFLlZlY3RvcjMoMCwgMCwgLTEpO1xuXG5cdFx0cmV0dXJuIHZlY3Rvci5hcHBseUV1bGVyKHRoaXMub2JqZWN0LnJvdGF0aW9uKTtcblx0fTtcblxuXHRyZXR1cm4gQ2FtZXJhO1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ1ZpcnR1YWxCb29rc2hlbGYnKVxuLyogXG4gKiBjb250cm9scy5qcyBpcyBhIHNlcnZpY2UgZm9yIHByb2Nlc3Npbmcgbm90IFVJKG1lbnVzKSBldmVudHMgXG4gKiBsaWtlIG1vdXNlLCBrZXlib2FyZCwgdG91Y2ggb3IgZ2VzdHVyZXMuXG4gKlxuICogVE9ETzogcmVtb3ZlIGFsbCBidXNpbmVzIGxvZ2ljIGZyb20gdGhlcmUgYW5kIGxlYXZlIG9ubHlcbiAqIGV2ZW50cyBmdW5jdGlvbmFsaXR5IHRvIG1ha2UgaXQgbW9yZSBzaW1pbGFyIHRvIHVzdWFsIGNvbnRyb2xsZXJcbiAqL1xuLmZhY3RvcnkoJ0NvbnRyb2xzJywgZnVuY3Rpb24gKCRxLCAkbG9nLCBTZWxlY3Rvck1ldGEsIEJvb2tPYmplY3QsIFNoZWxmT2JqZWN0LCBTZWN0aW9uT2JqZWN0LCBDYW1lcmEsIG5hdmlnYXRpb24sIGVudmlyb25tZW50LCBtb3VzZSwgc2VsZWN0b3IpIHtcblx0dmFyIENvbnRyb2xzID0ge307XG5cblx0Q29udHJvbHMuaW5pdCA9IGZ1bmN0aW9uKCkge1xuXHRcdENvbnRyb2xzLmluaXRMaXN0ZW5lcnMoKTtcblx0fTtcblxuXHRDb250cm9scy5pbml0TGlzdGVuZXJzID0gZnVuY3Rpb24oKSB7XG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgQ29udHJvbHMub25Nb3VzZURvd24sIGZhbHNlKTtcblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgQ29udHJvbHMub25Nb3VzZVVwLCBmYWxzZSk7XG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgQ29udHJvbHMub25Nb3VzZU1vdmUsIGZhbHNlKTtcdFxuXHRcdGRvY3VtZW50Lm9uY29udGV4dG1lbnUgPSBmdW5jdGlvbigpIHtyZXR1cm4gZmFsc2U7fTtcblx0fTtcblxuXHRDb250cm9scy51cGRhdGUgPSBmdW5jdGlvbigpIHtcblx0XHRpZihtb3VzZVszXSkge1xuXHRcdFx0Q2FtZXJhLnJvdGF0ZShtb3VzZS5sb25nWCwgbW91c2UubG9uZ1kpO1xuXHRcdH1cblx0XHRpZihtb3VzZVsxXSAmJiBtb3VzZVszXSkge1xuXHRcdFx0Q2FtZXJhLmdvKG5hdmlnYXRpb24uQlVUVE9OU19HT19TUEVFRCk7XG5cdFx0fVxuXHR9O1xuXG5cdENvbnRyb2xzLm9uTW91c2VEb3duID0gZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRtb3VzZS5kb3duKGV2ZW50KTsgXG5cblx0XHRpZihtb3VzZS5pc0NhbnZhcygpICYmIG1vdXNlWzFdICYmICFtb3VzZVszXSkge1xuXHRcdFx0Q29udHJvbHMuc2VsZWN0T2JqZWN0KCk7XG5cdFx0XHRzZWxlY3Rvci5zZWxlY3RGb2N1c2VkKCk7XG5cdFx0fVxuXHR9O1xuXG5cdENvbnRyb2xzLm9uTW91c2VVcCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0bW91c2UudXAoZXZlbnQpO1xuXHRcdFxuXHRcdGlmKGV2ZW50LndoaWNoID09PSAxKSB7XG5cdFx0XHRpZihzZWxlY3Rvci5pc1NlbGVjdGVkRWRpdGFibGUoKSkge1xuXHRcdFx0XHR2YXIgb2JqID0gc2VsZWN0b3IuZ2V0U2VsZWN0ZWRPYmplY3QoKTtcblxuXHRcdFx0XHRpZihvYmouY2hhbmdlZCkge1xuXHRcdFx0XHRcdG9iai5zYXZlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0Q29udHJvbHMub25Nb3VzZU1vdmUgPSBmdW5jdGlvbihldmVudCkge1xuXHRcdG1vdXNlLm1vdmUoZXZlbnQpO1xuXG5cdFx0aWYobW91c2UuaXNDYW52YXMoKSkge1xuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuXHRcdFx0aWYobW91c2VbMV0gJiYgIW1vdXNlWzNdKSB7XHRcdFxuXHRcdFx0XHRDb250cm9scy5tb3ZlT2JqZWN0KCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRDb250cm9scy5zZWxlY3RPYmplY3QoKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0Ly8qKioqXG5cblx0Q29udHJvbHMuc2VsZWN0T2JqZWN0ID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyXG5cdFx0XHRpbnRlcnNlY3RlZCxcblx0XHRcdG9iamVjdDtcblxuXHRcdGlmKG1vdXNlLmlzQ2FudmFzKCkgJiYgZW52aXJvbm1lbnQubGlicmFyeSkge1xuXHRcdFx0Ly9UT0RPOiBvcHRpbWl6ZVxuXHRcdFx0aW50ZXJzZWN0ZWQgPSBtb3VzZS5nZXRJbnRlcnNlY3RlZChlbnZpcm9ubWVudC5saWJyYXJ5LmNoaWxkcmVuLCB0cnVlLCBbQm9va09iamVjdF0pO1xuXHRcdFx0aWYoIWludGVyc2VjdGVkKSB7XG5cdFx0XHRcdGludGVyc2VjdGVkID0gbW91c2UuZ2V0SW50ZXJzZWN0ZWQoZW52aXJvbm1lbnQubGlicmFyeS5jaGlsZHJlbiwgdHJ1ZSwgW1NoZWxmT2JqZWN0XSk7XG5cdFx0XHR9XG5cdFx0XHRpZighaW50ZXJzZWN0ZWQpIHtcblx0XHRcdFx0aW50ZXJzZWN0ZWQgPSBtb3VzZS5nZXRJbnRlcnNlY3RlZChlbnZpcm9ubWVudC5saWJyYXJ5LmNoaWxkcmVuLCB0cnVlLCBbU2VjdGlvbk9iamVjdF0pO1xuXHRcdFx0fVxuXHRcdFx0aWYoaW50ZXJzZWN0ZWQpIHtcblx0XHRcdFx0b2JqZWN0ID0gaW50ZXJzZWN0ZWQub2JqZWN0O1xuXHRcdFx0fVxuXG5cdFx0XHRzZWxlY3Rvci5mb2N1cyhuZXcgU2VsZWN0b3JNZXRhKG9iamVjdCkpO1xuXHRcdH1cblx0fTtcblxuXHRDb250cm9scy5tb3ZlT2JqZWN0ID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG1vdXNlVmVjdG9yO1xuXHRcdHZhciBuZXdQb3NpdGlvbjtcblx0XHR2YXIgaW50ZXJzZWN0ZWQ7XG5cdFx0dmFyIHBhcmVudDtcblx0XHR2YXIgb2xkUGFyZW50O1xuXHRcdHZhciBzZWxlY3RlZE9iamVjdDtcblxuXHRcdGlmKHNlbGVjdG9yLmlzU2VsZWN0ZWRFZGl0YWJsZSgpKSB7XG5cdFx0XHRzZWxlY3RlZE9iamVjdCA9IHNlbGVjdG9yLmdldFNlbGVjdGVkT2JqZWN0KCk7XG5cdFx0XHRtb3VzZVZlY3RvciA9IENhbWVyYS5nZXRWZWN0b3IoKTtcdFxuXG5cdFx0XHRuZXdQb3NpdGlvbiA9IHNlbGVjdGVkT2JqZWN0LnBvc2l0aW9uLmNsb25lKCk7XG5cdFx0XHRvbGRQYXJlbnQgPSBzZWxlY3RlZE9iamVjdC5wYXJlbnQ7XG5cblx0XHRcdGlmKHNlbGVjdG9yLmlzU2VsZWN0ZWRCb29rKCkpIHtcblx0XHRcdFx0aW50ZXJzZWN0ZWQgPSBtb3VzZS5nZXRJbnRlcnNlY3RlZChlbnZpcm9ubWVudC5saWJyYXJ5LmNoaWxkcmVuLCB0cnVlLCBbU2hlbGZPYmplY3RdKTtcblx0XHRcdFx0c2VsZWN0ZWRPYmplY3Quc2V0UGFyZW50KGludGVyc2VjdGVkID8gaW50ZXJzZWN0ZWQub2JqZWN0IDogbnVsbCk7XG5cdFx0XHR9XG5cblx0XHRcdHBhcmVudCA9IHNlbGVjdGVkT2JqZWN0LnBhcmVudDtcblx0XHRcdGlmKHBhcmVudCkge1xuXHRcdFx0XHRwYXJlbnQubG9jYWxUb1dvcmxkKG5ld1Bvc2l0aW9uKTtcblxuXHRcdFx0XHRuZXdQb3NpdGlvbi54IC09IChtb3VzZVZlY3Rvci56ICogbW91c2UuZFggKyBtb3VzZVZlY3Rvci54ICogbW91c2UuZFkpICogMC4wMDM7XG5cdFx0XHRcdG5ld1Bvc2l0aW9uLnogLT0gKC1tb3VzZVZlY3Rvci54ICogbW91c2UuZFggKyBtb3VzZVZlY3Rvci56ICogbW91c2UuZFkpICogMC4wMDM7XG5cblx0XHRcdFx0cGFyZW50LndvcmxkVG9Mb2NhbChuZXdQb3NpdGlvbik7XG5cdFx0XHRcdGlmKCFzZWxlY3RlZE9iamVjdC5tb3ZlKG5ld1Bvc2l0aW9uKSAmJiBzZWxlY3Rvci5pc1NlbGVjdGVkQm9vaygpKSB7XG5cdFx0XHRcdFx0aWYocGFyZW50ICE9PSBvbGRQYXJlbnQpIHtcblx0XHRcdFx0XHRcdHNlbGVjdGVkT2JqZWN0LnNldFBhcmVudChvbGRQYXJlbnQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fTtcblxuXHRyZXR1cm4gQ29udHJvbHM7XHRcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5mYWN0b3J5KCdEYXRhJywgZnVuY3Rpb24gKCRodHRwLCAkcSkge1xuXHR2YXIgRGF0YSA9IHt9O1xuXG5cdERhdGEuVEVYVFVSRV9SRVNPTFVUSU9OID0gNTEyO1xuXHREYXRhLkNPVkVSX01BWF9ZID0gMzk0O1xuXHREYXRhLkNPVkVSX0ZBQ0VfWCA9IDI5NjtcblxuICAgIERhdGEubG9hZEltYWdlID0gZnVuY3Rpb24odXJsKSB7XG4gICAgICAgIHZhciBkZWZmZXJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgIHZhciBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgXG4gICAgICAgIGltZy5jcm9zc09yaWdpbiA9ICcnOyBcbiAgICAgICAgaW1nLnNyYyA9IHVybDtcbiAgICAgICAgXG4gICAgICAgIGlmKGltZy5jb21wbGV0ZSkge1xuICAgICAgICAgICAgZGVmZmVyZWQucmVzb2x2ZShpbWcpO1xuICAgICAgICB9XG5cbiAgICAgICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGRlZmZlcmVkLnJlc29sdmUoaW1nKTtcbiAgICAgICAgfTtcbiAgICAgICAgaW1nLm9uZXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGRlZmZlcmVkLnJlamVjdChlcnJvcik7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGRlZmZlcmVkLnByb21pc2U7IFxuICAgIH07XG5cbiAgICBEYXRhLnBvc3RDb3ZlciA9IGZ1bmN0aW9uKGV4dGVybmFsVVJMLCB0YWdzKSB7XG4gICAgXHR2YXIgZGF0YSA9IHtcbiAgICBcdFx0dXJsOiBleHRlcm5hbFVSTCxcbiAgICBcdFx0dGFnczogdGFnc1xuICAgIFx0fTtcblxuICAgIFx0cmV0dXJuICRodHRwLnBvc3QoJy9jb3ZlcicsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgIFx0XHRyZXR1cm4gcmVzLmRhdGE7XG4gICAgXHR9KTtcbiAgICB9O1xuXG4gICAgRGF0YS5sb2dvdXQgPSBmdW5jdGlvbigpIHtcbiAgICBcdHJldHVybiAkaHR0cC5wb3N0KCcvYXV0aC9sb2dvdXQnKTtcbiAgICB9O1xuXG5cdERhdGEuZ2V0VXNlciA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiAkaHR0cC5nZXQoJy91c2VyJyk7XG5cdH07XG5cblx0RGF0YS5nZXRVc2VyQm9va3MgPSBmdW5jdGlvbih1c2VySWQpIHtcblx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvZnJlZUJvb2tzLycgKyB1c2VySWQpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHRcdFx0cmV0dXJuIHJlcy5kYXRhO1xuXHRcdH0pO1xuXHR9O1xuXG5cdERhdGEucG9zdEJvb2sgPSBmdW5jdGlvbihib29rKSB7XG5cdFx0cmV0dXJuICRodHRwLnBvc3QoJy9ib29rJywgYm9vaykudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdFx0XHRyZXR1cm4gcmVzLmRhdGE7XG5cdFx0fSk7XG5cdH07XG5cblx0RGF0YS5kZWxldGVCb29rID0gZnVuY3Rpb24oYm9vaykge1xuXHRcdHJldHVybiAkaHR0cCh7XG5cdFx0XHRtZXRob2Q6ICdERUxFVEUnLFxuXHRcdFx0dXJsOiAnL2Jvb2snLFxuXHRcdFx0ZGF0YTogYm9vayxcblx0XHRcdGhlYWRlcnM6IHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtOCd9XG5cdFx0fSk7XG5cdH07XG5cblx0RGF0YS5nZXRVSURhdGEgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvb2JqL2RhdGEuanNvbicpO1xuXHR9O1xuXG5cdERhdGEuZ2V0TGlicmFyaWVzID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuICRodHRwLmdldCgnL2xpYnJhcmllcycpO1xuXHR9O1xuXG5cdERhdGEuZ2V0TGlicmFyeSA9IGZ1bmN0aW9uKGxpYnJhcnlJZCkge1xuXHRcdHJldHVybiAkaHR0cC5nZXQoJy9saWJyYXJ5LycgKyBsaWJyYXJ5SWQpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHRcdFx0cmV0dXJuIHJlcy5kYXRhO1xuXHRcdH0pO1xuXHR9O1xuXG5cdERhdGEucG9zdExpYnJhcnkgPSBmdW5jdGlvbihsaWJyYXJ5TW9kZWwpIHtcbiAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9saWJyYXJ5LycgKyBsaWJyYXJ5TW9kZWwpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5kYXRhO1xuICAgICAgICB9KTtcblx0fTtcblxuXHREYXRhLmdldFNlY3Rpb25zID0gZnVuY3Rpb24obGlicmFyeUlkKSB7XG4gICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9zZWN0aW9ucy8nICsgbGlicmFyeUlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuZGF0YTtcbiAgICAgICAgfSk7XG5cdH07XG5cblx0RGF0YS5wb3N0U2VjdGlvbiA9IGZ1bmN0aW9uKHNlY3Rpb25EYXRhKSB7XG4gICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvc2VjdGlvbicsIHNlY3Rpb25EYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgXHRyZXR1cm4gcmVzLmRhdGE7XG4gICAgICAgIH0pO1xuXHR9O1xuXG5cdERhdGEuZ2V0Qm9va3MgPSBmdW5jdGlvbihzZWN0aW9uSWQpIHtcblx0XHQvL1RPRE86IHVzZXJJZFxuICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYm9va3MvJyArIHNlY3Rpb25JZCkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmRhdGE7XG4gICAgICAgIH0pO1xuXHR9O1xuXG5cdERhdGEubG9hZEdlb21ldHJ5ID0gZnVuY3Rpb24obGluaykge1xuICAgICAgICB2YXIgZGVmZmVyZWQgPSAkcS5kZWZlcigpO1xuXHRcdHZhciBqc29uTG9hZGVyID0gbmV3IFRIUkVFLkpTT05Mb2FkZXIoKTtcblxuICAgICAgICAvL1RPRE86IGZvdW5kIG5vIHdheSB0byByZWplY3Rcblx0XHRqc29uTG9hZGVyLmxvYWQobGluaywgZnVuY3Rpb24gKGdlb21ldHJ5KSB7XG5cdFx0XHRnZW9tZXRyeS5jb21wdXRlQm91bmRpbmdCb3goKTtcblx0XHRcdGRlZmZlcmVkLnJlc29sdmUoZ2VvbWV0cnkpO1xuXHRcdH0pO1xuXG4gICAgICAgIHJldHVybiBkZWZmZXJlZC5wcm9taXNlO1xuXHR9O1xuXG5cdERhdGEuZ2V0RGF0YSA9IGZ1bmN0aW9uKHVybCkge1xuICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmRhdGE7XG4gICAgICAgIH0pO1xuXHR9O1xuXG5cdERhdGEucG9zdEZlZWRiYWNrID0gZnVuY3Rpb24oZHRvKSB7XG4gICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvZmVlZGJhY2snLCBkdG8pO1xuXHR9O1xuXG5cdHJldHVybiBEYXRhO1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ1ZpcnR1YWxCb29rc2hlbGYnKVxuLmZhY3RvcnkoJ2RpYWxvZycsIGZ1bmN0aW9uIChuZ0RpYWxvZykge1xuXHR2YXIgZGlhbG9nID0ge307XG5cblx0dmFyIEVSUk9SID0gMTtcblx0dmFyIENPTkZJUk0gPSAyO1xuXHR2YXIgV0FSTklORyA9IDM7XG5cdHZhciBJTkZPID0gNDtcblxuXHR2YXIgaWNvbkNsYXNzTWFwID0ge307XG5cdGljb25DbGFzc01hcFtFUlJPUl0gPSAnZmEtdGltZXMtY2lyY2xlICc7XG5cdGljb25DbGFzc01hcFtDT05GSVJNXSA9ICdmYS1xdWVzdGlvbi1jaXJjbGUnO1xuXHRpY29uQ2xhc3NNYXBbV0FSTklOR10gPSAnZmEtZXhjbGFtYXRpb24tdHJpYW5nbGUnO1xuXHRpY29uQ2xhc3NNYXBbSU5GT10gPSAnZmEtaW5mby1jaXJjbGUnO1xuXG5cdGRpYWxvZy5vcGVuRXJyb3IgPSBmdW5jdGlvbihtc2cpIHtcblx0XHRyZXR1cm4gb3BlbkRpYWxvZyhtc2csIEVSUk9SKTtcblx0fTtcblxuXHRkaWFsb2cub3BlbkNvbmZpcm0gPSBmdW5jdGlvbihtc2cpIHtcblx0XHRyZXR1cm4gb3BlbkRpYWxvZyhtc2csIENPTkZJUk0sIHRydWUpO1xuXHR9O1xuXG5cdGRpYWxvZy5vcGVuV2FybmluZyA9IGZ1bmN0aW9uKG1zZykge1xuXHRcdHJldHVybiBvcGVuRGlhbG9nKG1zZywgV0FSTklORyk7XG5cdH07XG5cblx0ZGlhbG9nLm9wZW5JbmZvID0gZnVuY3Rpb24obXNnKSB7XG5cdFx0cmV0dXJuIG9wZW5EaWFsb2cobXNnLCBJTkZPKTtcblx0fTtcblxuXHR2YXIgb3BlbkRpYWxvZyA9IGZ1bmN0aW9uKG1zZywgdHlwZSwgY2FuY2VsQnV0dG9uKSB7XG5cdFx0cmV0dXJuIG5nRGlhbG9nLm9wZW5Db25maXJtKHtcblx0XHRcdHRlbXBsYXRlOiAnL3VpL2NvbmZpcm1EaWFsb2cnLFxuXHRcdFx0ZGF0YToge1xuXHRcdFx0XHRtc2c6IG1zZyxcblx0XHRcdFx0aWNvbkNsYXNzOiBnZXRJY29uQ2xhc3ModHlwZSksXG5cdFx0XHRcdGNhbmNlbEJ1dHRvbjogY2FuY2VsQnV0dG9uXG5cdFx0XHR9XG5cdFx0fSk7XG5cdH07XG5cblx0dmFyIGdldEljb25DbGFzcyA9IGZ1bmN0aW9uKHR5cGUpIHtcblx0XHRyZXR1cm4gaWNvbkNsYXNzTWFwW3R5cGVdO1xuXHR9O1xuXG5cdHJldHVybiBkaWFsb2c7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgnZW52aXJvbm1lbnQnLCBmdW5jdGlvbiAoJHEsICRsb2csICR3aW5kb3csIExpYnJhcnlPYmplY3QsIFNlY3Rpb25PYmplY3QsIEJvb2tPYmplY3QsIERhdGEsIENhbWVyYSwgY2FjaGUpIHtcblx0dmFyIGVudmlyb25tZW50ID0ge307XG5cblx0ZW52aXJvbm1lbnQuQ0xFQVJBTkNFID0gMC4wMDE7XG5cdGVudmlyb25tZW50LkxJQlJBUllfQ0FOVkFTX0lEID0gJ0xJQlJBUlknO1xuXHQgXG5cdHZhciBsaWJyYXJ5RHRvID0gbnVsbDtcblx0dmFyIHNlY3Rpb25zID0gbnVsbDtcblx0dmFyIGJvb2tzID0gbnVsbDtcblxuXHRlbnZpcm9ubWVudC5zY2VuZSA9IG51bGw7XG5cdGVudmlyb25tZW50LmxpYnJhcnkgPSBudWxsO1xuXG5cdGVudmlyb25tZW50LmxvYWRMaWJyYXJ5ID0gZnVuY3Rpb24obGlicmFyeUlkKSB7XG5cdFx0Y2xlYXJTY2VuZSgpOyAvLyBpbml0cyBzb21lIGZpZWxkc1xuXG5cdFx0dmFyIHByb21pc2UgPSBEYXRhLmdldExpYnJhcnkobGlicmFyeUlkKS50aGVuKGZ1bmN0aW9uIChkdG8pIHtcblx0XHRcdHZhciBkaWN0ID0gcGFyc2VMaWJyYXJ5RHRvKGR0byk7XG5cdFx0XHRcblx0XHRcdHNlY3Rpb25zID0gZGljdC5zZWN0aW9ucztcblx0XHRcdGJvb2tzID0gZGljdC5ib29rcztcblx0XHRcdGxpYnJhcnlEdG8gPSBkdG87XG5cblx0XHRcdHJldHVybiBpbml0Q2FjaGUobGlicmFyeUR0bywgZGljdC5zZWN0aW9ucywgZGljdC5ib29rcyk7XG5cdFx0fSkudGhlbihmdW5jdGlvbiAoKSB7XG5cdFx0XHRjcmVhdGVMaWJyYXJ5KGxpYnJhcnlEdG8pO1xuXHRcdFx0cmV0dXJuIGNyZWF0ZVNlY3Rpb25zKHNlY3Rpb25zKTtcblx0XHR9KS50aGVuKGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBjcmVhdGVCb29rcyhib29rcyk7XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gcHJvbWlzZTtcblx0fTtcblxuXHRlbnZpcm9ubWVudC5nb1RvTGlicmFyeSA9IGZ1bmN0aW9uKGlkKSB7XG5cdFx0aWYoaWQpIHtcblx0XHRcdCR3aW5kb3cubG9jYXRpb24gPSAnLycgKyBpZDtcblx0XHR9XG5cdH07XG5cblx0ZW52aXJvbm1lbnQuZ2V0Qm9vayA9IGZ1bmN0aW9uKGJvb2tJZCkge1xuXHRcdHJldHVybiBnZXREaWN0T2JqZWN0KGJvb2tzLCBib29rSWQpO1xuXHR9O1xuXG5cdGVudmlyb25tZW50LmdldFNlY3Rpb24gPSBmdW5jdGlvbihzZWN0aW9uSWQpIHtcblx0XHRyZXR1cm4gZ2V0RGljdE9iamVjdChzZWN0aW9ucywgc2VjdGlvbklkKTtcblx0fTtcblxuXHRlbnZpcm9ubWVudC5nZXRTaGVsZiA9IGZ1bmN0aW9uKHNlY3Rpb25JZCwgc2hlbGZJZCkge1xuXHRcdHZhciBzZWN0aW9uID0gZW52aXJvbm1lbnQuZ2V0U2VjdGlvbihzZWN0aW9uSWQpO1xuXHRcdHZhciBzaGVsZiA9IHNlY3Rpb24gJiYgc2VjdGlvbi5zaGVsdmVzW3NoZWxmSWRdO1xuXG5cdFx0cmV0dXJuIHNoZWxmO1xuXHR9O1xuXG5cdHZhciBnZXREaWN0T2JqZWN0ID0gZnVuY3Rpb24oZGljdCwgb2JqZWN0SWQpIHtcblx0XHR2YXIgZGljdEl0ZW0gPSBkaWN0W29iamVjdElkXTtcblx0XHR2YXIgZGljdE9iamVjdCA9IGRpY3RJdGVtICYmIGRpY3RJdGVtLm9iajtcblxuXHRcdHJldHVybiBkaWN0T2JqZWN0O1xuXHR9O1xuXG5cdGVudmlyb25tZW50LnVwZGF0ZVNlY3Rpb24gPSBmdW5jdGlvbihkdG8pIHtcblx0XHRpZihkdG8ubGlicmFyeUlkID09IGVudmlyb25tZW50LmxpYnJhcnkuaWQpIHtcblx0XHRcdHJlbW92ZU9iamVjdChzZWN0aW9ucywgZHRvLmlkKTtcblx0XHRcdGNyZWF0ZVNlY3Rpb24oZHRvKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmVtb3ZlT2JqZWN0KHNlY3Rpb25zLCBkdG8uaWQpO1xuXHRcdH1cdFxuXHR9O1xuXG5cdGVudmlyb25tZW50LnVwZGF0ZUJvb2sgPSBmdW5jdGlvbihkdG8pIHtcblx0XHR2YXIgc2hlbGYgPSBnZXRCb29rU2hlbGYoZHRvKTtcblxuXHRcdGlmKHNoZWxmKSB7XG5cdFx0XHRlbnZpcm9ubWVudC5yZW1vdmVCb29rKGR0byk7XG5cdFx0XHRjcmVhdGVCb29rKGR0byk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGVudmlyb25tZW50LnJlbW92ZUJvb2soZHRvKTtcblx0XHR9XG5cdH07XG5cblx0ZW52aXJvbm1lbnQucmVtb3ZlQm9vayA9IGZ1bmN0aW9uKGJvb2tEdG8pIHtcblx0XHRyZW1vdmVPYmplY3QoYm9va3MsIGJvb2tEdG8uaWQpO1xuXHR9O1xuXG5cdHZhciByZW1vdmVPYmplY3QgPSBmdW5jdGlvbihkaWN0LCBrZXkpIHtcblx0XHR2YXIgZGljdEl0ZW0gPSBkaWN0W2tleV07XG5cdFx0aWYoZGljdEl0ZW0pIHtcblx0XHRcdGRlbGV0ZSBkaWN0W2tleV07XG5cdFx0XHRcblx0XHRcdGlmKGRpY3RJdGVtLm9iaikge1xuXHRcdFx0XHRkaWN0SXRlbS5vYmouc2V0UGFyZW50KG51bGwpO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcblxuXHR2YXIgaW5pdENhY2hlID0gZnVuY3Rpb24obGlicmFyeUR0bywgc2VjdGlvbnNEaWN0LCBib29rc0RpY3QpIHtcblx0XHR2YXIgbGlicmFyeU1vZGVsID0gbGlicmFyeUR0by5tb2RlbDtcblx0XHR2YXIgc2VjdGlvbk1vZGVscyA9IHt9O1xuXHRcdHZhciBib29rTW9kZWxzID0ge307XG5cdFx0dmFyIGltYWdlVXJscyA9IHt9O1xuXG5cdFx0Zm9yICh2YXIgc2VjdGlvbklkIGluIHNlY3Rpb25zRGljdCkge1xuXHRcdFx0dmFyIHNlY3Rpb25EdG8gPSBzZWN0aW9uc0RpY3Rbc2VjdGlvbklkXS5kdG87XG5cdFx0XHRzZWN0aW9uTW9kZWxzW3NlY3Rpb25EdG8ubW9kZWxdID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRmb3IgKHZhciBib29rSWQgaW4gYm9va3NEaWN0KSB7XG5cdFx0XHR2YXIgYm9va0R0byA9IGJvb2tzRGljdFtib29rSWRdLmR0bztcblx0XHRcdGJvb2tNb2RlbHNbYm9va0R0by5tb2RlbF0gPSB0cnVlO1xuXG5cdFx0XHRpZihib29rRHRvLmNvdmVyKSB7XG5cdFx0XHRcdGltYWdlVXJsc1tib29rRHRvLmNvdmVyXSA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNhY2hlLmluaXQobGlicmFyeU1vZGVsLCBzZWN0aW9uTW9kZWxzLCBib29rTW9kZWxzLCBpbWFnZVVybHMpO1xuXHR9O1xuXG5cdHZhciBjbGVhclNjZW5lID0gZnVuY3Rpb24oKSB7XG5cdFx0ZW52aXJvbm1lbnQubGlicmFyeSA9IG51bGw7XG5cdFx0c2VjdGlvbnMgPSB7fTtcblx0XHRib29rcyA9IHt9O1xuXG5cdFx0d2hpbGUoZW52aXJvbm1lbnQuc2NlbmUuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuXHRcdFx0aWYoZW52aXJvbm1lbnQuc2NlbmUuY2hpbGRyZW5bMF0uZGlzcG9zZSkge1xuXHRcdFx0XHRlbnZpcm9ubWVudC5zY2VuZS5jaGlsZHJlblswXS5kaXNwb3NlKCk7XG5cdFx0XHR9XG5cdFx0XHRlbnZpcm9ubWVudC5zY2VuZS5yZW1vdmUoZW52aXJvbm1lbnQuc2NlbmUuY2hpbGRyZW5bMF0pO1xuXHRcdH1cblx0fTtcblxuXHR2YXIgcGFyc2VMaWJyYXJ5RHRvID0gZnVuY3Rpb24obGlicmFyeUR0bykge1xuXHRcdHZhciByZXN1bHQgPSB7XG5cdFx0XHRzZWN0aW9uczoge30sXG5cdFx0XHRib29rczoge31cblx0XHR9O1xuXG5cdFx0Zm9yKHZhciBzZWN0aW9uSW5kZXggPSBsaWJyYXJ5RHRvLnNlY3Rpb25zLmxlbmd0aCAtIDE7IHNlY3Rpb25JbmRleCA+PSAwOyBzZWN0aW9uSW5kZXgtLSkge1xuXHRcdFx0dmFyIHNlY3Rpb25EdG8gPSBsaWJyYXJ5RHRvLnNlY3Rpb25zW3NlY3Rpb25JbmRleF07XG5cdFx0XHRyZXN1bHQuc2VjdGlvbnNbc2VjdGlvbkR0by5pZF0gPSB7ZHRvOiBzZWN0aW9uRHRvfTtcblxuXHRcdFx0Zm9yKHZhciBib29rSW5kZXggPSBzZWN0aW9uRHRvLmJvb2tzLmxlbmd0aCAtIDE7IGJvb2tJbmRleCA+PSAwOyBib29rSW5kZXgtLSkge1xuXHRcdFx0XHR2YXIgYm9va0R0byA9IHNlY3Rpb25EdG8uYm9va3NbYm9va0luZGV4XTtcblx0XHRcdFx0cmVzdWx0LmJvb2tzW2Jvb2tEdG8uaWRdID0ge2R0bzogYm9va0R0b307XG5cdFx0XHR9XG5cblx0XHRcdGRlbGV0ZSBzZWN0aW9uRHRvLmJvb2tzO1xuXHRcdH1cblxuXHRcdGRlbGV0ZSBsaWJyYXJ5RHRvLnNlY3Rpb25zO1xuXG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fTtcblxuXHR2YXIgY3JlYXRlTGlicmFyeSA9IGZ1bmN0aW9uKGxpYnJhcnlEdG8pIHtcblx0XHR2YXIgbGlicmFyeSA9IG51bGw7XG5cdFx0dmFyIGxpYnJhcnlDYWNoZSA9IGNhY2hlLmdldExpYnJhcnkoKTtcbiAgICAgICAgdmFyIHRleHR1cmUgPSBuZXcgVEhSRUUuVGV4dHVyZShsaWJyYXJ5Q2FjaGUubWFwSW1hZ2UpO1xuICAgICAgICB2YXIgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoe21hcDogdGV4dHVyZX0pO1xuXG4gICAgICAgIHRleHR1cmUubmVlZHNVcGRhdGUgPSB0cnVlO1xuXHRcdGxpYnJhcnkgPSBuZXcgTGlicmFyeU9iamVjdChsaWJyYXJ5RHRvLCBsaWJyYXJ5Q2FjaGUuZ2VvbWV0cnksIG1hdGVyaWFsKTtcblx0XHRDYW1lcmEuc2V0UGFyZW50KGxpYnJhcnkpO1xuXG5cdFx0ZW52aXJvbm1lbnQuc2NlbmUuYWRkKGxpYnJhcnkpO1xuXHRcdGVudmlyb25tZW50LmxpYnJhcnkgPSBsaWJyYXJ5O1xuXHR9O1xuXG5cdHZhciBjcmVhdGVTZWN0aW9ucyA9IGZ1bmN0aW9uKHNlY3Rpb25zRGljdCkge1xuXHRcdHZhciByZXN1bHRzID0gW107XG5cdFx0dmFyIGtleTtcblxuXHRcdGZvcihrZXkgaW4gc2VjdGlvbnNEaWN0KSB7XG5cdFx0XHRyZXN1bHRzLnB1c2goY3JlYXRlU2VjdGlvbihzZWN0aW9uc0RpY3Rba2V5XS5kdG8pKTtcdFx0XG5cdFx0fVxuXG5cdFx0cmV0dXJuICRxLmFsbChyZXN1bHRzKTtcblx0fTtcblxuXHR2YXIgY3JlYXRlU2VjdGlvbiA9IGZ1bmN0aW9uKHNlY3Rpb25EdG8pIHtcblx0XHR2YXIgcHJvbWlzZSA9IGNhY2hlLmdldFNlY3Rpb24oc2VjdGlvbkR0by5tb2RlbCkudGhlbihmdW5jdGlvbiAoc2VjdGlvbkNhY2hlKSB7XG5cdCAgICAgICAgdmFyIHRleHR1cmUgPSBuZXcgVEhSRUUuVGV4dHVyZShzZWN0aW9uQ2FjaGUubWFwSW1hZ2UpO1xuXHQgICAgICAgIHZhciBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbCh7bWFwOiB0ZXh0dXJlfSk7XG5cdCAgICAgICAgdmFyIHNlY3Rpb247XG5cblx0ICAgICAgICB0ZXh0dXJlLm5lZWRzVXBkYXRlID0gdHJ1ZTtcblx0ICAgICAgICBzZWN0aW9uRHRvLmRhdGEgPSBzZWN0aW9uQ2FjaGUuZGF0YTtcblxuXHQgICAgICAgIHNlY3Rpb24gPSBuZXcgU2VjdGlvbk9iamVjdChzZWN0aW9uRHRvLCBzZWN0aW9uQ2FjaGUuZ2VvbWV0cnksIG1hdGVyaWFsKTtcblxuXHRcdFx0ZW52aXJvbm1lbnQubGlicmFyeS5hZGQoc2VjdGlvbik7XG5cdFx0XHRhZGRUb0RpY3Qoc2VjdGlvbnMsIHNlY3Rpb24pO1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIHByb21pc2U7XG5cdH07XG5cblx0Ly8gVE9ETzogbWVyZ2Ugd2l0aCBjcmVhdGVTZWN0aW9uc1xuXHR2YXIgY3JlYXRlQm9va3MgPSBmdW5jdGlvbihib29rc0RpY3QpIHtcblx0XHR2YXIgcmVzdWx0cyA9IFtdO1xuXHRcdHZhciBrZXk7XG5cblx0XHRmb3Ioa2V5IGluIGJvb2tzRGljdCkge1xuXHRcdFx0cmVzdWx0cy5wdXNoKGNyZWF0ZUJvb2soYm9va3NEaWN0W2tleV0uZHRvKSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuICRxLmFsbChyZXN1bHRzKTtcblx0fTtcblxuXHR2YXIgY3JlYXRlQm9vayA9IGZ1bmN0aW9uKGJvb2tEdG8pIHtcblx0XHR2YXIgcHJvbWlzZXMgPSB7fTtcblx0XHR2YXIgcHJvbWlzZTtcblxuXHRcdHByb21pc2VzLmJvb2tDYWNoZSA9IGNhY2hlLmdldEJvb2soYm9va0R0by5tb2RlbCk7XG5cdFx0aWYoYm9va0R0by5jb3Zlcikge1xuXHRcdFx0cHJvbWlzZXMuY292ZXJDYWNoZSA9IGNhY2hlLmdldEltYWdlKGJvb2tEdG8uY292ZXIpO1xuXHRcdH1cblxuXHRcdHByb21pc2UgPSAkcS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdHMpIHtcblx0XHRcdHZhciBib29rQ2FjaGUgPSByZXN1bHRzLmJvb2tDYWNoZTtcblx0XHRcdHZhciBjb3ZlckltYWdlID0gcmVzdWx0cy5jb3ZlckNhY2hlO1xuXHRcdFx0dmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuXG5cdFx0XHRjYW52YXMud2lkdGggPSBjYW52YXMuaGVpZ2h0ID0gRGF0YS5URVhUVVJFX1JFU09MVVRJT047XG5cdFx0XHR2YXIgdGV4dHVyZSA9IG5ldyBUSFJFRS5UZXh0dXJlKGNhbnZhcyk7XG5cdFx0ICAgIHZhciBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbCh7bWFwOiB0ZXh0dXJlfSk7XG5cblx0XHRcdHZhciBib29rID0gbmV3IEJvb2tPYmplY3QoYm9va0R0bywgYm9va0NhY2hlLmdlb21ldHJ5LCBtYXRlcmlhbCwgYm9va0NhY2hlLm1hcEltYWdlLCBjb3ZlckltYWdlKTtcblxuXHRcdFx0YWRkVG9EaWN0KGJvb2tzLCBib29rKTtcblx0XHRcdHBsYWNlQm9va09uU2hlbGYoYm9vayk7XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gcHJvbWlzZTtcblx0fTtcblxuXHR2YXIgYWRkVG9EaWN0ID0gZnVuY3Rpb24oZGljdCwgb2JqKSB7XG5cdFx0dmFyIGRpY3RJdGVtID0ge1xuXHRcdFx0ZHRvOiBvYmouZGF0YU9iamVjdCxcblx0XHRcdG9iajogb2JqXG5cdFx0fTtcblxuXHRcdGRpY3Rbb2JqLmlkXSA9IGRpY3RJdGVtO1xuXHR9O1xuXG5cdHZhciBnZXRCb29rU2hlbGYgPSBmdW5jdGlvbihib29rRHRvKSB7XG5cdFx0cmV0dXJuIGVudmlyb25tZW50LmdldFNoZWxmKGJvb2tEdG8uc2VjdGlvbklkLCBib29rRHRvLnNoZWxmSWQpO1xuXHR9O1xuXG5cdHZhciBwbGFjZUJvb2tPblNoZWxmID0gZnVuY3Rpb24oYm9vaykge1xuXHRcdHZhciBzaGVsZiA9IGdldEJvb2tTaGVsZihib29rLmRhdGFPYmplY3QpO1xuXHRcdHNoZWxmLmFkZChib29rKTtcblx0fTtcblxuXHRyZXR1cm4gZW52aXJvbm1lbnQ7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgnTWFpbicsIGZ1bmN0aW9uICgkbG9nLCBDYW1lcmEsIENvbnRyb2xzLCBVc2VyLCBlbnZpcm9ubWVudCwgdWlUb29scywgbmF2aWdhdGlvbiwgYXV0aG9yaXphdGlvbiwgYmxvY2spIHtcdFxuXHR2YXIgY2FudmFzO1xuXHR2YXIgcmVuZGVyZXI7XG5cdFxuXHR2YXIgTWFpbiA9IHt9O1xuXG5cdE1haW4uc3RhcnQgPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgd2luUmVzaXplO1xuXHRcdHZhciB3aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuXHRcdHZhciBoZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG5cblx0XHRpZighRGV0ZWN0b3Iud2ViZ2wpIHtcblx0XHRcdERldGVjdG9yLmFkZEdldFdlYkdMTWVzc2FnZSgpO1xuXHRcdH1cblxuXHRcdGluaXQod2lkdGgsIGhlaWdodCk7XG5cdFx0Q2FtZXJhLmluaXQod2lkdGgsIGhlaWdodCk7XG5cdFx0Q29udHJvbHMuaW5pdCgpO1xuXG5cdFx0d2luUmVzaXplID0gbmV3IFRIUkVFeC5XaW5kb3dSZXNpemUocmVuZGVyZXIsIENhbWVyYS5jYW1lcmEpO1xuXG5cdFx0c3RhcnRSZW5kZXJMb29wKCk7XG5cblx0XHRibG9jay5nbG9iYWwuc3RhcnQoKTtcblx0XHRVc2VyLmxvYWQoKS50aGVuKGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBlbnZpcm9ubWVudC5sb2FkTGlicmFyeShVc2VyLmdldExpYnJhcnkoKSB8fCAxKS50aGVuKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0Ly9UT0RPOiAkcS5hbGwoZW52aXJvbm1lbnQubG9hZExpYnJhcnkoVXNlci5nZXRMaWJyYXJ5KCkgfHwgMSksIGF1dGhvcml6YXRpb24ubG9hZFVzZXJEYXRhKCkpXG5cdFx0XHRcdHJldHVybiBhdXRob3JpemF0aW9uLmxvYWRVc2VyRGF0YSgpO1xuXHRcdFx0fSk7XG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG5cdFx0XHQkbG9nLmVycm9yKGVycm9yKTtcblx0XHRcdC8vVE9ETzogc2hvdyBlcnJvciBtZXNzYWdlICBcblx0XHR9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHtcblx0XHRcdGJsb2NrLmdsb2JhbC5zdG9wKCk7XG5cdFx0fSk7XHRcdFxuXHR9O1xuXG5cdHZhciBpbml0ID0gZnVuY3Rpb24od2lkdGgsIGhlaWdodCkge1xuXHRcdGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVudmlyb25tZW50LkxJQlJBUllfQ0FOVkFTX0lEKTtcblx0XHRyZW5kZXJlciA9IG5ldyBUSFJFRS5XZWJHTFJlbmRlcmVyKHtjYW52YXM6IGNhbnZhc30pO1xuXHRcdHJlbmRlcmVyLnNldFNpemUod2lkdGgsIGhlaWdodCk7XG5cblx0XHRlbnZpcm9ubWVudC5zY2VuZSA9IG5ldyBUSFJFRS5TY2VuZSgpO1xuXHRcdGVudmlyb25tZW50LnNjZW5lLmZvZyA9IG5ldyBUSFJFRS5Gb2coMHgwMDAwMDAsIDQsIDcpO1xuXHR9O1xuXG5cdHZhciBzdGFydFJlbmRlckxvb3AgPSBmdW5jdGlvbigpIHtcblx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RhcnRSZW5kZXJMb29wKTtcblxuXHRcdENvbnRyb2xzLnVwZGF0ZSgpO1xuXHRcdG5hdmlnYXRpb24udXBkYXRlKCk7XG5cdFx0dWlUb29scy51cGRhdGUoKTtcblx0XHRcblx0XHRyZW5kZXJlci5yZW5kZXIoZW52aXJvbm1lbnQuc2NlbmUsIENhbWVyYS5jYW1lcmEpO1xuXHR9O1xuXG5cdHJldHVybiBNYWluO1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ1ZpcnR1YWxCb29rc2hlbGYnKVxuLmZhY3RvcnkoJ21vdXNlJywgZnVuY3Rpb24gKENhbWVyYSwgZW52aXJvbm1lbnQpIHtcblx0dmFyIG1vdXNlID0ge307XG5cblx0dmFyIGdldFdpZHRoID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHdpbmRvdy5pbm5lcldpZHRoO1xuXHR9O1xuXG5cdHZhciBnZXRIZWlnaHQgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gd2luZG93LmlubmVySGVpZ2h0O1xuXHR9O1xuXG5cdHZhciB4ID0gbnVsbDtcblx0dmFyIHkgPSBudWxsO1xuXHRcblx0bW91c2UudGFyZ2V0ID0gbnVsbDtcblx0bW91c2UuZFggPSBudWxsO1xuXHRtb3VzZS5kWSA9IG51bGw7XG5cdG1vdXNlLmxvbmdYID0gbnVsbDtcblx0bW91c2UubG9uZ1kgPSBudWxsO1xuXG5cdG1vdXNlLmdldFRhcmdldCA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLnRhcmdldDtcblx0fTtcblxuXHRtb3VzZS5kb3duID0gZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRpZihldmVudCkge1xuXHRcdFx0dGhpc1tldmVudC53aGljaF0gPSB0cnVlO1xuXHRcdFx0dGhpcy50YXJnZXQgPSBldmVudC50YXJnZXQ7XG5cdFx0XHR4ID0gZXZlbnQuY2xpZW50WDtcblx0XHRcdHkgPSBldmVudC5jbGllbnRZO1xuXHRcdFx0bW91c2UubG9uZ1ggPSBnZXRXaWR0aCgpICogMC41IC0geDtcblx0XHRcdG1vdXNlLmxvbmdZID0gZ2V0SGVpZ2h0KCkgKiAwLjUgLSB5O1xuXHRcdH1cblx0fTtcblxuXHRtb3VzZS51cCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0aWYoZXZlbnQpIHtcblx0XHRcdHRoaXNbZXZlbnQud2hpY2hdID0gZmFsc2U7XG5cdFx0XHQvLyBsaW51eCBjaHJvbWUgYnVnIGZpeCAod2hlbiBib3RoIGtleXMgcmVsZWFzZSB0aGVuIGJvdGggZXZlbnQud2hpY2ggZXF1YWwgMylcblx0XHRcdHRoaXNbMV0gPSBmYWxzZTsgXG5cdFx0fVxuXHR9O1xuXG5cdG1vdXNlLm1vdmUgPSBmdW5jdGlvbihldmVudCkge1xuXHRcdGlmKGV2ZW50KSB7XG5cdFx0XHR0aGlzLnRhcmdldCA9IGV2ZW50LnRhcmdldDtcblx0XHRcdG1vdXNlLmxvbmdYID0gZ2V0V2lkdGgoKSAqIDAuNSAtIHg7XG5cdFx0XHRtb3VzZS5sb25nWSA9IGdldEhlaWdodCgpICogMC41IC0geTtcblx0XHRcdG1vdXNlLmRYID0gZXZlbnQuY2xpZW50WCAtIHg7XG5cdFx0XHRtb3VzZS5kWSA9IGV2ZW50LmNsaWVudFkgLSB5O1xuXHRcdFx0eCA9IGV2ZW50LmNsaWVudFg7XG5cdFx0XHR5ID0gZXZlbnQuY2xpZW50WTtcblx0XHR9XG5cdH07XG5cblx0bW91c2UuaXNDYW52YXMgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy50YXJnZXQuaWQgPT09IGVudmlyb25tZW50LkxJQlJBUllfQ0FOVkFTX0lEO1xuXHR9O1xuXG5cdG1vdXNlLmlzUG9ja2V0Qm9vayA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBmYWxzZTsgLy9UT0RPOiBzdHViXG5cdFx0Ly8gcmV0dXJuICEhKHRoaXMudGFyZ2V0ICYmIHRoaXMudGFyZ2V0LnBhcmVudE5vZGUgPT0gVUkubWVudS5pbnZlbnRvcnkuYm9va3MpO1xuXHR9O1xuXG5cdG1vdXNlLmdldEludGVyc2VjdGVkID0gZnVuY3Rpb24ob2JqZWN0cywgcmVjdXJzaXZlLCBzZWFyY2hGb3IpIHtcblx0XHR2YXJcblx0XHRcdHZlY3Rvcixcblx0XHRcdHJheWNhc3Rlcixcblx0XHRcdGludGVyc2VjdHMsXG5cdFx0XHRpbnRlcnNlY3RlZCxcblx0XHRcdHJlc3VsdCxcblx0XHRcdGksIGo7XG5cblx0XHRyZXN1bHQgPSBudWxsO1xuXHRcdHZlY3RvciA9IGdldFZlY3RvcigpO1xuXHRcdHJheWNhc3RlciA9IG5ldyBUSFJFRS5SYXljYXN0ZXIoQ2FtZXJhLmdldFBvc2l0aW9uKCksIHZlY3Rvcik7XG5cdFx0aW50ZXJzZWN0cyA9IHJheWNhc3Rlci5pbnRlcnNlY3RPYmplY3RzKG9iamVjdHMsIHJlY3Vyc2l2ZSk7XG5cblx0XHRpZihzZWFyY2hGb3IpIHtcblx0XHRcdGlmKGludGVyc2VjdHMubGVuZ3RoKSB7XG5cdFx0XHRcdGZvcihpID0gMDsgaSA8IGludGVyc2VjdHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRpbnRlcnNlY3RlZCA9IGludGVyc2VjdHNbaV07XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Zm9yKGogPSBzZWFyY2hGb3IubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pIHtcblx0XHRcdFx0XHRcdGlmKGludGVyc2VjdGVkLm9iamVjdCBpbnN0YW5jZW9mIHNlYXJjaEZvcltqXSkge1xuXHRcdFx0XHRcdFx0XHRyZXN1bHQgPSBpbnRlcnNlY3RlZDtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYocmVzdWx0KSB7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cdFx0XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJlc3VsdCA9IGludGVyc2VjdHM7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fTtcblxuXHR2YXIgZ2V0VmVjdG9yID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHByb2plY3RvciA9IG5ldyBUSFJFRS5Qcm9qZWN0b3IoKTtcblx0XHR2YXIgdmVjdG9yID0gbmV3IFRIUkVFLlZlY3RvcjMoKHggLyBnZXRXaWR0aCgpKSAqIDIgLSAxLCAtICh5IC8gZ2V0SGVpZ2h0KCkpICogMiArIDEsIDAuNSk7XG5cdFx0cHJvamVjdG9yLnVucHJvamVjdFZlY3Rvcih2ZWN0b3IsIENhbWVyYS5jYW1lcmEpO1xuXHRcblx0XHRyZXR1cm4gdmVjdG9yLnN1YihDYW1lcmEuZ2V0UG9zaXRpb24oKSkubm9ybWFsaXplKCk7XG5cdH07XG5cblx0cmV0dXJuIG1vdXNlO1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ1ZpcnR1YWxCb29rc2hlbGYnKVxuLmZhY3RvcnkoJ25hdmlnYXRpb24nLCBmdW5jdGlvbiAoQ2FtZXJhKSB7XG5cdHZhciBuYXZpZ2F0aW9uID0ge307XG5cblx0bmF2aWdhdGlvbi5CVVRUT05TX1JPVEFURV9TUEVFRCA9IDEwMDtcblx0bmF2aWdhdGlvbi5CVVRUT05TX0dPX1NQRUVEID0gMC4wMjtcblxuXHR2YXIgc3RhdGUgPSB7XG5cdFx0Zm9yd2FyZDogZmFsc2UsXG5cdFx0YmFja3dhcmQ6IGZhbHNlLFxuXHRcdGxlZnQ6IGZhbHNlLFxuXHRcdHJpZ2h0OiBmYWxzZVx0XHRcdFxuXHR9O1xuXG5cdG5hdmlnYXRpb24uZ29TdG9wID0gZnVuY3Rpb24oKSB7XG5cdFx0c3RhdGUuZm9yd2FyZCA9IGZhbHNlO1xuXHRcdHN0YXRlLmJhY2t3YXJkID0gZmFsc2U7XG5cdFx0c3RhdGUubGVmdCA9IGZhbHNlO1xuXHRcdHN0YXRlLnJpZ2h0ID0gZmFsc2U7XG5cdH07XG5cblx0bmF2aWdhdGlvbi5nb0ZvcndhcmQgPSBmdW5jdGlvbigpIHtcblx0XHRzdGF0ZS5mb3J3YXJkID0gdHJ1ZTtcblx0fTtcblxuXHRuYXZpZ2F0aW9uLmdvQmFja3dhcmQgPSBmdW5jdGlvbigpIHtcblx0XHRzdGF0ZS5iYWNrd2FyZCA9IHRydWU7XG5cdH07XG5cblx0bmF2aWdhdGlvbi5nb0xlZnQgPSBmdW5jdGlvbigpIHtcblx0XHRzdGF0ZS5sZWZ0ID0gdHJ1ZTtcblx0fTtcblxuXHRuYXZpZ2F0aW9uLmdvUmlnaHQgPSBmdW5jdGlvbigpIHtcblx0XHRzdGF0ZS5yaWdodCA9IHRydWU7XG5cdH07XG5cblx0bmF2aWdhdGlvbi51cGRhdGUgPSBmdW5jdGlvbigpIHtcblx0XHRpZihzdGF0ZS5mb3J3YXJkKSB7XG5cdFx0XHRDYW1lcmEuZ28obmF2aWdhdGlvbi5CVVRUT05TX0dPX1NQRUVEKTtcblx0XHR9IGVsc2UgaWYoc3RhdGUuYmFja3dhcmQpIHtcblx0XHRcdENhbWVyYS5nbygtbmF2aWdhdGlvbi5CVVRUT05TX0dPX1NQRUVEKTtcblx0XHR9IGVsc2UgaWYoc3RhdGUubGVmdCkge1xuXHRcdFx0Q2FtZXJhLnJvdGF0ZShuYXZpZ2F0aW9uLkJVVFRPTlNfUk9UQVRFX1NQRUVELCAwKTtcblx0XHR9IGVsc2UgaWYoc3RhdGUucmlnaHQpIHtcblx0XHRcdENhbWVyYS5yb3RhdGUoLW5hdmlnYXRpb24uQlVUVE9OU19ST1RBVEVfU1BFRUQsIDApO1xuXHRcdH1cblx0fTtcblxuXHRyZXR1cm4gbmF2aWdhdGlvbjtcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5mYWN0b3J5KCdVc2VyJywgZnVuY3Rpb24gKCRsb2csIERhdGEpIHtcblx0dmFyIHVzZXIgPSB7fTtcblxuXHR2YXIgbG9hZGVkID0gZmFsc2U7XG5cdHZhciBfZGF0YU9iamVjdCA9IG51bGw7XG5cdHZhciBfcG9zaXRpb24gPSBudWxsO1xuXHR2YXIgX2xpYnJhcnkgPSBudWxsO1xuXG5cdHVzZXIubG9hZCA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBzY29wZSA9IHRoaXM7XG5cblx0XHRyZXR1cm4gRGF0YS5nZXRVc2VyKCkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdFx0XHRzY29wZS5zZXREYXRhT2JqZWN0KHJlcy5kYXRhKTtcblx0XHRcdHNjb3BlLnNldExpYnJhcnkoKTtcblx0XHRcdGxvYWRlZCA9IHRydWU7XG5cblx0XHRcdCRsb2cubG9nKCd1c2VyIGxvYWRlZCcpO1xuXHRcdH0pO1xuXHR9O1xuXG5cdHVzZXIubG9nb3V0ID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIERhdGEubG9nb3V0KCkudGhlbihmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gdXNlci5sb2FkKCk7XG5cdFx0fSk7XG5cdH07XG5cblx0dXNlci5zZXREYXRhT2JqZWN0ID0gZnVuY3Rpb24oZGF0YU9iamVjdCkge1xuXHRcdF9kYXRhT2JqZWN0ID0gZGF0YU9iamVjdDtcblx0fTtcblxuXHR1c2VyLmdldExpYnJhcnkgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gX2xpYnJhcnk7XG5cdH07XG5cblx0dXNlci5zZXRMaWJyYXJ5ID0gZnVuY3Rpb24obGlicmFyeUlkKSB7XG5cdFx0X2xpYnJhcnkgPSBsaWJyYXJ5SWQgfHwgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLnN1YnN0cmluZygxKTtcblx0fTtcblxuXHR1c2VyLmdldElkID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIF9kYXRhT2JqZWN0ICYmIF9kYXRhT2JqZWN0LmlkO1xuXHR9O1xuXG5cdHVzZXIuaXNBdXRob3JpemVkID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIEJvb2xlYW4oX2RhdGFPYmplY3QpO1xuXHR9O1xuXG5cdHVzZXIuaXNMb2FkZWQgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gbG9hZGVkO1xuXHR9XG5cblx0cmV0dXJuIHVzZXI7XG59KTtcbiIsIi8qKlxuICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbS9cbiAqIEBhdXRob3IgbXIuZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xuICovXG5cbnZhciBEZXRlY3RvciA9IHtcblxuXHRjYW52YXM6ICEhIHdpbmRvdy5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG5cdHdlYmdsOiAoIGZ1bmN0aW9uICgpIHsgdHJ5IHsgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdjYW52YXMnICk7IHJldHVybiAhISB3aW5kb3cuV2ViR0xSZW5kZXJpbmdDb250ZXh0ICYmICggY2FudmFzLmdldENvbnRleHQoICd3ZWJnbCcgKSB8fCBjYW52YXMuZ2V0Q29udGV4dCggJ2V4cGVyaW1lbnRhbC13ZWJnbCcgKSApOyB9IGNhdGNoKCBlICkgeyByZXR1cm4gZmFsc2U7IH0gfSApKCksXG5cdHdvcmtlcnM6ICEhIHdpbmRvdy5Xb3JrZXIsXG5cdGZpbGVhcGk6IHdpbmRvdy5GaWxlICYmIHdpbmRvdy5GaWxlUmVhZGVyICYmIHdpbmRvdy5GaWxlTGlzdCAmJiB3aW5kb3cuQmxvYixcblxuXHRnZXRXZWJHTEVycm9yTWVzc2FnZTogZnVuY3Rpb24gKCkge1xuXG5cdFx0dmFyIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnZGl2JyApO1xuXHRcdGVsZW1lbnQuaWQgPSAnd2ViZ2wtZXJyb3ItbWVzc2FnZSc7XG5cdFx0ZWxlbWVudC5zdHlsZS5mb250RmFtaWx5ID0gJ21vbm9zcGFjZSc7XG5cdFx0ZWxlbWVudC5zdHlsZS5mb250U2l6ZSA9ICcxM3B4Jztcblx0XHRlbGVtZW50LnN0eWxlLmZvbnRXZWlnaHQgPSAnbm9ybWFsJztcblx0XHRlbGVtZW50LnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInO1xuXHRcdGVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZCA9ICcjZmZmJztcblx0XHRlbGVtZW50LnN0eWxlLmNvbG9yID0gJyMwMDAnO1xuXHRcdGVsZW1lbnQuc3R5bGUucGFkZGluZyA9ICcxLjVlbSc7XG5cdFx0ZWxlbWVudC5zdHlsZS53aWR0aCA9ICc0MDBweCc7XG5cdFx0ZWxlbWVudC5zdHlsZS5tYXJnaW4gPSAnNWVtIGF1dG8gMCc7XG5cblx0XHRpZiAoICEgdGhpcy53ZWJnbCApIHtcblxuXHRcdFx0ZWxlbWVudC5pbm5lckhUTUwgPSB3aW5kb3cuV2ViR0xSZW5kZXJpbmdDb250ZXh0ID8gW1xuXHRcdFx0XHQnWW91ciBncmFwaGljcyBjYXJkIGRvZXMgbm90IHNlZW0gdG8gc3VwcG9ydCA8YSBocmVmPVwiaHR0cDovL2tocm9ub3Mub3JnL3dlYmdsL3dpa2kvR2V0dGluZ19hX1dlYkdMX0ltcGxlbWVudGF0aW9uXCIgc3R5bGU9XCJjb2xvcjojMDAwXCI+V2ViR0w8L2E+LjxiciAvPicsXG5cdFx0XHRcdCdGaW5kIG91dCBob3cgdG8gZ2V0IGl0IDxhIGhyZWY9XCJodHRwOi8vZ2V0LndlYmdsLm9yZy9cIiBzdHlsZT1cImNvbG9yOiMwMDBcIj5oZXJlPC9hPi4nXG5cdFx0XHRdLmpvaW4oICdcXG4nICkgOiBbXG5cdFx0XHRcdCdZb3VyIGJyb3dzZXIgZG9lcyBub3Qgc2VlbSB0byBzdXBwb3J0IDxhIGhyZWY9XCJodHRwOi8va2hyb25vcy5vcmcvd2ViZ2wvd2lraS9HZXR0aW5nX2FfV2ViR0xfSW1wbGVtZW50YXRpb25cIiBzdHlsZT1cImNvbG9yOiMwMDBcIj5XZWJHTDwvYT4uPGJyLz4nLFxuXHRcdFx0XHQnRmluZCBvdXQgaG93IHRvIGdldCBpdCA8YSBocmVmPVwiaHR0cDovL2dldC53ZWJnbC5vcmcvXCIgc3R5bGU9XCJjb2xvcjojMDAwXCI+aGVyZTwvYT4uJ1xuXHRcdFx0XS5qb2luKCAnXFxuJyApO1xuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIGVsZW1lbnQ7XG5cblx0fSxcblxuXHRhZGRHZXRXZWJHTE1lc3NhZ2U6IGZ1bmN0aW9uICggcGFyYW1ldGVycyApIHtcblxuXHRcdHZhciBwYXJlbnQsIGlkLCBlbGVtZW50O1xuXG5cdFx0cGFyYW1ldGVycyA9IHBhcmFtZXRlcnMgfHwge307XG5cblx0XHRwYXJlbnQgPSBwYXJhbWV0ZXJzLnBhcmVudCAhPT0gdW5kZWZpbmVkID8gcGFyYW1ldGVycy5wYXJlbnQgOiBkb2N1bWVudC5ib2R5O1xuXHRcdGlkID0gcGFyYW1ldGVycy5pZCAhPT0gdW5kZWZpbmVkID8gcGFyYW1ldGVycy5pZCA6ICdvbGRpZSc7XG5cblx0XHRlbGVtZW50ID0gRGV0ZWN0b3IuZ2V0V2ViR0xFcnJvck1lc3NhZ2UoKTtcblx0XHRlbGVtZW50LmlkID0gaWQ7XG5cblx0XHRwYXJlbnQuYXBwZW5kQ2hpbGQoIGVsZW1lbnQgKTtcblxuXHR9XG5cbn07IiwiLy8gdGhyZWUuanMgLSBodHRwOi8vZ2l0aHViLmNvbS9tcmRvb2IvdGhyZWUuanNcbid1c2Ugc3RyaWN0Jzt2YXIgVEhSRUU9e1JFVklTSU9OOlwiNjRcIn07c2VsZi5jb25zb2xlPXNlbGYuY29uc29sZXx8e2luZm86ZnVuY3Rpb24oKXt9LGxvZzpmdW5jdGlvbigpe30sZGVidWc6ZnVuY3Rpb24oKXt9LHdhcm46ZnVuY3Rpb24oKXt9LGVycm9yOmZ1bmN0aW9uKCl7fX07U3RyaW5nLnByb3RvdHlwZS50cmltPVN0cmluZy5wcm90b3R5cGUudHJpbXx8ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLFwiXCIpfTtUSFJFRS5leHRlbmQ9ZnVuY3Rpb24oYSxiKXtpZihPYmplY3Qua2V5cylmb3IodmFyIGM9T2JqZWN0LmtleXMoYiksZD0wLGU9Yy5sZW5ndGg7ZDxlO2QrKyl7dmFyIGY9Y1tkXTtPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxmLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYixmKSl9ZWxzZSBmb3IoZiBpbiBjPXt9Lmhhc093blByb3BlcnR5LGIpYy5jYWxsKGIsZikmJihhW2ZdPWJbZl0pO3JldHVybiBhfTtcbihmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI9W1wibXNcIixcIm1velwiLFwid2Via2l0XCIsXCJvXCJdLGM9MDtjPGIubGVuZ3RoJiYhc2VsZi5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU7KytjKXNlbGYucmVxdWVzdEFuaW1hdGlvbkZyYW1lPXNlbGZbYltjXStcIlJlcXVlc3RBbmltYXRpb25GcmFtZVwiXSxzZWxmLmNhbmNlbEFuaW1hdGlvbkZyYW1lPXNlbGZbYltjXStcIkNhbmNlbEFuaW1hdGlvbkZyYW1lXCJdfHxzZWxmW2JbY10rXCJDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIl07dm9pZCAwPT09c2VsZi5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUmJnZvaWQgMCE9PXNlbGYuc2V0VGltZW91dCYmKHNlbGYucmVxdWVzdEFuaW1hdGlvbkZyYW1lPWZ1bmN0aW9uKGIpe3ZhciBjPURhdGUubm93KCksZj1NYXRoLm1heCgwLDE2LShjLWEpKSxoPXNlbGYuc2V0VGltZW91dChmdW5jdGlvbigpe2IoYytmKX0sZik7YT1jK2Y7cmV0dXJuIGh9KTt2b2lkIDA9PT1zZWxmLmNhbmNlbEFuaW1hdGlvbkZyYW1lJiZ2b2lkIDAhPT1cbnNlbGYuY2xlYXJUaW1lb3V0JiYoc2VsZi5jYW5jZWxBbmltYXRpb25GcmFtZT1mdW5jdGlvbihhKXtzZWxmLmNsZWFyVGltZW91dChhKX0pfSkoKTtUSFJFRS5DdWxsRmFjZU5vbmU9MDtUSFJFRS5DdWxsRmFjZUJhY2s9MTtUSFJFRS5DdWxsRmFjZUZyb250PTI7VEhSRUUuQ3VsbEZhY2VGcm9udEJhY2s9MztUSFJFRS5Gcm9udEZhY2VEaXJlY3Rpb25DVz0wO1RIUkVFLkZyb250RmFjZURpcmVjdGlvbkNDVz0xO1RIUkVFLkJhc2ljU2hhZG93TWFwPTA7VEhSRUUuUENGU2hhZG93TWFwPTE7VEhSRUUuUENGU29mdFNoYWRvd01hcD0yO1RIUkVFLkZyb250U2lkZT0wO1RIUkVFLkJhY2tTaWRlPTE7VEhSRUUuRG91YmxlU2lkZT0yO1RIUkVFLk5vU2hhZGluZz0wO1RIUkVFLkZsYXRTaGFkaW5nPTE7VEhSRUUuU21vb3RoU2hhZGluZz0yO1RIUkVFLk5vQ29sb3JzPTA7VEhSRUUuRmFjZUNvbG9ycz0xO1RIUkVFLlZlcnRleENvbG9ycz0yO1RIUkVFLk5vQmxlbmRpbmc9MDtcblRIUkVFLk5vcm1hbEJsZW5kaW5nPTE7VEhSRUUuQWRkaXRpdmVCbGVuZGluZz0yO1RIUkVFLlN1YnRyYWN0aXZlQmxlbmRpbmc9MztUSFJFRS5NdWx0aXBseUJsZW5kaW5nPTQ7VEhSRUUuQ3VzdG9tQmxlbmRpbmc9NTtUSFJFRS5BZGRFcXVhdGlvbj0xMDA7VEhSRUUuU3VidHJhY3RFcXVhdGlvbj0xMDE7VEhSRUUuUmV2ZXJzZVN1YnRyYWN0RXF1YXRpb249MTAyO1RIUkVFLlplcm9GYWN0b3I9MjAwO1RIUkVFLk9uZUZhY3Rvcj0yMDE7VEhSRUUuU3JjQ29sb3JGYWN0b3I9MjAyO1RIUkVFLk9uZU1pbnVzU3JjQ29sb3JGYWN0b3I9MjAzO1RIUkVFLlNyY0FscGhhRmFjdG9yPTIwNDtUSFJFRS5PbmVNaW51c1NyY0FscGhhRmFjdG9yPTIwNTtUSFJFRS5Ec3RBbHBoYUZhY3Rvcj0yMDY7VEhSRUUuT25lTWludXNEc3RBbHBoYUZhY3Rvcj0yMDc7VEhSRUUuRHN0Q29sb3JGYWN0b3I9MjA4O1RIUkVFLk9uZU1pbnVzRHN0Q29sb3JGYWN0b3I9MjA5O1xuVEhSRUUuU3JjQWxwaGFTYXR1cmF0ZUZhY3Rvcj0yMTA7VEhSRUUuTXVsdGlwbHlPcGVyYXRpb249MDtUSFJFRS5NaXhPcGVyYXRpb249MTtUSFJFRS5BZGRPcGVyYXRpb249MjtUSFJFRS5VVk1hcHBpbmc9ZnVuY3Rpb24oKXt9O1RIUkVFLkN1YmVSZWZsZWN0aW9uTWFwcGluZz1mdW5jdGlvbigpe307VEhSRUUuQ3ViZVJlZnJhY3Rpb25NYXBwaW5nPWZ1bmN0aW9uKCl7fTtUSFJFRS5TcGhlcmljYWxSZWZsZWN0aW9uTWFwcGluZz1mdW5jdGlvbigpe307VEhSRUUuU3BoZXJpY2FsUmVmcmFjdGlvbk1hcHBpbmc9ZnVuY3Rpb24oKXt9O1RIUkVFLlJlcGVhdFdyYXBwaW5nPTFFMztUSFJFRS5DbGFtcFRvRWRnZVdyYXBwaW5nPTEwMDE7VEhSRUUuTWlycm9yZWRSZXBlYXRXcmFwcGluZz0xMDAyO1RIUkVFLk5lYXJlc3RGaWx0ZXI9MTAwMztUSFJFRS5OZWFyZXN0TWlwTWFwTmVhcmVzdEZpbHRlcj0xMDA0O1RIUkVFLk5lYXJlc3RNaXBNYXBMaW5lYXJGaWx0ZXI9MTAwNTtcblRIUkVFLkxpbmVhckZpbHRlcj0xMDA2O1RIUkVFLkxpbmVhck1pcE1hcE5lYXJlc3RGaWx0ZXI9MTAwNztUSFJFRS5MaW5lYXJNaXBNYXBMaW5lYXJGaWx0ZXI9MTAwODtUSFJFRS5VbnNpZ25lZEJ5dGVUeXBlPTEwMDk7VEhSRUUuQnl0ZVR5cGU9MTAxMDtUSFJFRS5TaG9ydFR5cGU9MTAxMTtUSFJFRS5VbnNpZ25lZFNob3J0VHlwZT0xMDEyO1RIUkVFLkludFR5cGU9MTAxMztUSFJFRS5VbnNpZ25lZEludFR5cGU9MTAxNDtUSFJFRS5GbG9hdFR5cGU9MTAxNTtUSFJFRS5VbnNpZ25lZFNob3J0NDQ0NFR5cGU9MTAxNjtUSFJFRS5VbnNpZ25lZFNob3J0NTU1MVR5cGU9MTAxNztUSFJFRS5VbnNpZ25lZFNob3J0NTY1VHlwZT0xMDE4O1RIUkVFLkFscGhhRm9ybWF0PTEwMTk7VEhSRUUuUkdCRm9ybWF0PTEwMjA7VEhSRUUuUkdCQUZvcm1hdD0xMDIxO1RIUkVFLkx1bWluYW5jZUZvcm1hdD0xMDIyO1RIUkVFLkx1bWluYW5jZUFscGhhRm9ybWF0PTEwMjM7XG5USFJFRS5SR0JfUzNUQ19EWFQxX0Zvcm1hdD0yMDAxO1RIUkVFLlJHQkFfUzNUQ19EWFQxX0Zvcm1hdD0yMDAyO1RIUkVFLlJHQkFfUzNUQ19EWFQzX0Zvcm1hdD0yMDAzO1RIUkVFLlJHQkFfUzNUQ19EWFQ1X0Zvcm1hdD0yMDA0O1RIUkVFLkNvbG9yPWZ1bmN0aW9uKGEpe3ZvaWQgMCE9PWEmJnRoaXMuc2V0KGEpO3JldHVybiB0aGlzfTtcblRIUkVFLkNvbG9yLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuQ29sb3IscjoxLGc6MSxiOjEsc2V0OmZ1bmN0aW9uKGEpe2EgaW5zdGFuY2VvZiBUSFJFRS5Db2xvcj90aGlzLmNvcHkoYSk6XCJudW1iZXJcIj09PXR5cGVvZiBhP3RoaXMuc2V0SGV4KGEpOlwic3RyaW5nXCI9PT10eXBlb2YgYSYmdGhpcy5zZXRTdHlsZShhKTtyZXR1cm4gdGhpc30sc2V0SGV4OmZ1bmN0aW9uKGEpe2E9TWF0aC5mbG9vcihhKTt0aGlzLnI9KGE+PjE2JjI1NSkvMjU1O3RoaXMuZz0oYT4+OCYyNTUpLzI1NTt0aGlzLmI9KGEmMjU1KS8yNTU7cmV0dXJuIHRoaXN9LHNldFJHQjpmdW5jdGlvbihhLGIsYyl7dGhpcy5yPWE7dGhpcy5nPWI7dGhpcy5iPWM7cmV0dXJuIHRoaXN9LHNldEhTTDpmdW5jdGlvbihhLGIsYyl7aWYoMD09PWIpdGhpcy5yPXRoaXMuZz10aGlzLmI9YztlbHNle3ZhciBkPWZ1bmN0aW9uKGEsYixjKXswPmMmJihjKz0xKTsxPGMmJihjLT0xKTtyZXR1cm4gYzwxLzY/YSs2KihiLWEpKlxuYzowLjU+Yz9iOmM8Mi8zP2ErNiooYi1hKSooMi8zLWMpOmF9LGI9MC41Pj1jP2MqKDErYik6YytiLWMqYixjPTIqYy1iO3RoaXMucj1kKGMsYixhKzEvMyk7dGhpcy5nPWQoYyxiLGEpO3RoaXMuYj1kKGMsYixhLTEvMyl9cmV0dXJuIHRoaXN9LHNldFN0eWxlOmZ1bmN0aW9uKGEpe2lmKC9ecmdiXFwoKFxcZCspLCA/KFxcZCspLCA/KFxcZCspXFwpJC9pLnRlc3QoYSkpcmV0dXJuIGE9L15yZ2JcXCgoXFxkKyksID8oXFxkKyksID8oXFxkKylcXCkkL2kuZXhlYyhhKSx0aGlzLnI9TWF0aC5taW4oMjU1LHBhcnNlSW50KGFbMV0sMTApKS8yNTUsdGhpcy5nPU1hdGgubWluKDI1NSxwYXJzZUludChhWzJdLDEwKSkvMjU1LHRoaXMuYj1NYXRoLm1pbigyNTUscGFyc2VJbnQoYVszXSwxMCkpLzI1NSx0aGlzO2lmKC9ecmdiXFwoKFxcZCspXFwlLCA/KFxcZCspXFwlLCA/KFxcZCspXFwlXFwpJC9pLnRlc3QoYSkpcmV0dXJuIGE9L15yZ2JcXCgoXFxkKylcXCUsID8oXFxkKylcXCUsID8oXFxkKylcXCVcXCkkL2kuZXhlYyhhKSx0aGlzLnI9XG5NYXRoLm1pbigxMDAscGFyc2VJbnQoYVsxXSwxMCkpLzEwMCx0aGlzLmc9TWF0aC5taW4oMTAwLHBhcnNlSW50KGFbMl0sMTApKS8xMDAsdGhpcy5iPU1hdGgubWluKDEwMCxwYXJzZUludChhWzNdLDEwKSkvMTAwLHRoaXM7aWYoL15cXCMoWzAtOWEtZl17Nn0pJC9pLnRlc3QoYSkpcmV0dXJuIGE9L15cXCMoWzAtOWEtZl17Nn0pJC9pLmV4ZWMoYSksdGhpcy5zZXRIZXgocGFyc2VJbnQoYVsxXSwxNikpLHRoaXM7aWYoL15cXCMoWzAtOWEtZl0pKFswLTlhLWZdKShbMC05YS1mXSkkL2kudGVzdChhKSlyZXR1cm4gYT0vXlxcIyhbMC05YS1mXSkoWzAtOWEtZl0pKFswLTlhLWZdKSQvaS5leGVjKGEpLHRoaXMuc2V0SGV4KHBhcnNlSW50KGFbMV0rYVsxXSthWzJdK2FbMl0rYVszXSthWzNdLDE2KSksdGhpcztpZigvXihcXHcrKSQvaS50ZXN0KGEpKXJldHVybiB0aGlzLnNldEhleChUSFJFRS5Db2xvcktleXdvcmRzW2FdKSx0aGlzfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMucj1hLnI7dGhpcy5nPVxuYS5nO3RoaXMuYj1hLmI7cmV0dXJuIHRoaXN9LGNvcHlHYW1tYVRvTGluZWFyOmZ1bmN0aW9uKGEpe3RoaXMucj1hLnIqYS5yO3RoaXMuZz1hLmcqYS5nO3RoaXMuYj1hLmIqYS5iO3JldHVybiB0aGlzfSxjb3B5TGluZWFyVG9HYW1tYTpmdW5jdGlvbihhKXt0aGlzLnI9TWF0aC5zcXJ0KGEucik7dGhpcy5nPU1hdGguc3FydChhLmcpO3RoaXMuYj1NYXRoLnNxcnQoYS5iKTtyZXR1cm4gdGhpc30sY29udmVydEdhbW1hVG9MaW5lYXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnIsYj10aGlzLmcsYz10aGlzLmI7dGhpcy5yPWEqYTt0aGlzLmc9YipiO3RoaXMuYj1jKmM7cmV0dXJuIHRoaXN9LGNvbnZlcnRMaW5lYXJUb0dhbW1hOmZ1bmN0aW9uKCl7dGhpcy5yPU1hdGguc3FydCh0aGlzLnIpO3RoaXMuZz1NYXRoLnNxcnQodGhpcy5nKTt0aGlzLmI9TWF0aC5zcXJ0KHRoaXMuYik7cmV0dXJuIHRoaXN9LGdldEhleDpmdW5jdGlvbigpe3JldHVybiAyNTUqdGhpcy5yPDwxNl4yNTUqdGhpcy5nPDxcbjheMjU1KnRoaXMuYjw8MH0sZ2V0SGV4U3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuKFwiMDAwMDAwXCIrdGhpcy5nZXRIZXgoKS50b1N0cmluZygxNikpLnNsaWNlKC02KX0sZ2V0SFNMOmZ1bmN0aW9uKGEpe3ZhciBhPWF8fHtoOjAsczowLGw6MH0sYj10aGlzLnIsYz10aGlzLmcsZD10aGlzLmIsZT1NYXRoLm1heChiLGMsZCksZj1NYXRoLm1pbihiLGMsZCksaCxnPShmK2UpLzI7aWYoZj09PWUpZj1oPTA7ZWxzZXt2YXIgaT1lLWYsZj0wLjU+PWc/aS8oZStmKTppLygyLWUtZik7c3dpdGNoKGUpe2Nhc2UgYjpoPShjLWQpL2krKGM8ZD82OjApO2JyZWFrO2Nhc2UgYzpoPShkLWIpL2krMjticmVhaztjYXNlIGQ6aD0oYi1jKS9pKzR9aC89Nn1hLmg9aDthLnM9ZjthLmw9ZztyZXR1cm4gYX0sZ2V0U3R5bGU6ZnVuY3Rpb24oKXtyZXR1cm5cInJnYihcIisoMjU1KnRoaXMucnwwKStcIixcIisoMjU1KnRoaXMuZ3wwKStcIixcIisoMjU1KnRoaXMuYnwwKStcIilcIn0sb2Zmc2V0SFNMOmZ1bmN0aW9uKGEsXG5iLGMpe3ZhciBkPXRoaXMuZ2V0SFNMKCk7ZC5oKz1hO2Qucys9YjtkLmwrPWM7dGhpcy5zZXRIU0woZC5oLGQucyxkLmwpO3JldHVybiB0aGlzfSxhZGQ6ZnVuY3Rpb24oYSl7dGhpcy5yKz1hLnI7dGhpcy5nKz1hLmc7dGhpcy5iKz1hLmI7cmV0dXJuIHRoaXN9LGFkZENvbG9yczpmdW5jdGlvbihhLGIpe3RoaXMucj1hLnIrYi5yO3RoaXMuZz1hLmcrYi5nO3RoaXMuYj1hLmIrYi5iO3JldHVybiB0aGlzfSxhZGRTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy5yKz1hO3RoaXMuZys9YTt0aGlzLmIrPWE7cmV0dXJuIHRoaXN9LG11bHRpcGx5OmZ1bmN0aW9uKGEpe3RoaXMucio9YS5yO3RoaXMuZyo9YS5nO3RoaXMuYio9YS5iO3JldHVybiB0aGlzfSxtdWx0aXBseVNjYWxhcjpmdW5jdGlvbihhKXt0aGlzLnIqPWE7dGhpcy5nKj1hO3RoaXMuYio9YTtyZXR1cm4gdGhpc30sbGVycDpmdW5jdGlvbihhLGIpe3RoaXMucis9KGEuci10aGlzLnIpKmI7dGhpcy5nKz0oYS5nLXRoaXMuZykqYjtcbnRoaXMuYis9KGEuYi10aGlzLmIpKmI7cmV0dXJuIHRoaXN9LGVxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gYS5yPT09dGhpcy5yJiZhLmc9PT10aGlzLmcmJmEuYj09PXRoaXMuYn0sZnJvbUFycmF5OmZ1bmN0aW9uKGEpe3RoaXMucj1hWzBdO3RoaXMuZz1hWzFdO3RoaXMuYj1hWzJdO3JldHVybiB0aGlzfSx0b0FycmF5OmZ1bmN0aW9uKCl7cmV0dXJuW3RoaXMucix0aGlzLmcsdGhpcy5iXX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IFRIUkVFLkNvbG9yKS5zZXRSR0IodGhpcy5yLHRoaXMuZyx0aGlzLmIpfX07XG5USFJFRS5Db2xvcktleXdvcmRzPXthbGljZWJsdWU6MTU3OTIzODMsYW50aXF1ZXdoaXRlOjE2NDQ0Mzc1LGFxdWE6NjU1MzUsYXF1YW1hcmluZTo4Mzg4NTY0LGF6dXJlOjE1Nzk0MTc1LGJlaWdlOjE2MTE5MjYwLGJpc3F1ZToxNjc3MDI0NCxibGFjazowLGJsYW5jaGVkYWxtb25kOjE2NzcyMDQ1LGJsdWU6MjU1LGJsdWV2aW9sZXQ6OTA1NTIwMixicm93bjoxMDgyNDIzNCxidXJseXdvb2Q6MTQ1OTYyMzEsY2FkZXRibHVlOjYyNjY1MjgsY2hhcnRyZXVzZTo4Mzg4MzUyLGNob2NvbGF0ZToxMzc4OTQ3MCxjb3JhbDoxNjc0NDI3Mixjb3JuZmxvd2VyYmx1ZTo2NTkxOTgxLGNvcm5zaWxrOjE2Nzc1Mzg4LGNyaW1zb246MTQ0MjMxMDAsY3lhbjo2NTUzNSxkYXJrYmx1ZToxMzksZGFya2N5YW46MzU3MjMsZGFya2dvbGRlbnJvZDoxMjA5MjkzOSxkYXJrZ3JheToxMTExOTAxNyxkYXJrZ3JlZW46MjU2MDAsZGFya2dyZXk6MTExMTkwMTcsZGFya2toYWtpOjEyNDMzMjU5LGRhcmttYWdlbnRhOjkxMDk2NDMsXG5kYXJrb2xpdmVncmVlbjo1NTk3OTk5LGRhcmtvcmFuZ2U6MTY3NDc1MjAsZGFya29yY2hpZDoxMDA0MDAxMixkYXJrcmVkOjkxMDk1MDQsZGFya3NhbG1vbjoxNTMwODQxMCxkYXJrc2VhZ3JlZW46OTQxOTkxOSxkYXJrc2xhdGVibHVlOjQ3MzQzNDcsZGFya3NsYXRlZ3JheTozMTAwNDk1LGRhcmtzbGF0ZWdyZXk6MzEwMDQ5NSxkYXJrdHVycXVvaXNlOjUyOTQ1LGRhcmt2aW9sZXQ6OTY5OTUzOSxkZWVwcGluazoxNjcxNjk0NyxkZWVwc2t5Ymx1ZTo0OTE1MSxkaW1ncmF5OjY5MDgyNjUsZGltZ3JleTo2OTA4MjY1LGRvZGdlcmJsdWU6MjAwMzE5OSxmaXJlYnJpY2s6MTE2NzQxNDYsZmxvcmFsd2hpdGU6MTY3NzU5MjAsZm9yZXN0Z3JlZW46MjI2Mzg0MixmdWNoc2lhOjE2NzExOTM1LGdhaW5zYm9ybzoxNDQ3NDQ2MCxnaG9zdHdoaXRlOjE2MzE2NjcxLGdvbGQ6MTY3NjY3MjAsZ29sZGVucm9kOjE0MzI5MTIwLGdyYXk6ODQyMTUwNCxncmVlbjozMjc2OCxncmVlbnllbGxvdzoxMTQwMzA1NSxcbmdyZXk6ODQyMTUwNCxob25leWRldzoxNTc5NDE2MCxob3RwaW5rOjE2NzM4NzQwLGluZGlhbnJlZDoxMzQ1ODUyNCxpbmRpZ286NDkxNTMzMCxpdm9yeToxNjc3NzIwMCxraGFraToxNTc4NzY2MCxsYXZlbmRlcjoxNTEzMjQxMCxsYXZlbmRlcmJsdXNoOjE2NzczMzY1LGxhd25ncmVlbjo4MTkwOTc2LGxlbW9uY2hpZmZvbjoxNjc3NTg4NSxsaWdodGJsdWU6MTEzOTMyNTQsbGlnaHRjb3JhbDoxNTc2MTUzNixsaWdodGN5YW46MTQ3NDU1OTksbGlnaHRnb2xkZW5yb2R5ZWxsb3c6MTY0NDgyMTAsbGlnaHRncmF5OjEzODgyMzIzLGxpZ2h0Z3JlZW46OTQ5ODI1NixsaWdodGdyZXk6MTM4ODIzMjMsbGlnaHRwaW5rOjE2NzU4NDY1LGxpZ2h0c2FsbW9uOjE2NzUyNzYyLGxpZ2h0c2VhZ3JlZW46MjE0Mjg5MCxsaWdodHNreWJsdWU6ODkwMDM0NixsaWdodHNsYXRlZ3JheTo3ODMzNzUzLGxpZ2h0c2xhdGVncmV5Ojc4MzM3NTMsbGlnaHRzdGVlbGJsdWU6MTE1ODQ3MzQsbGlnaHR5ZWxsb3c6MTY3NzcxODQsXG5saW1lOjY1MjgwLGxpbWVncmVlbjozMzI5MzMwLGxpbmVuOjE2NDQ1NjcwLG1hZ2VudGE6MTY3MTE5MzUsbWFyb29uOjgzODg2MDgsbWVkaXVtYXF1YW1hcmluZTo2NzM3MzIyLG1lZGl1bWJsdWU6MjA1LG1lZGl1bW9yY2hpZDoxMjIxMTY2NyxtZWRpdW1wdXJwbGU6OTY2MjY4MyxtZWRpdW1zZWFncmVlbjozOTc4MDk3LG1lZGl1bXNsYXRlYmx1ZTo4MDg3NzkwLG1lZGl1bXNwcmluZ2dyZWVuOjY0MTU0LG1lZGl1bXR1cnF1b2lzZTo0NzcyMzAwLG1lZGl1bXZpb2xldHJlZDoxMzA0NzE3MyxtaWRuaWdodGJsdWU6MTY0NDkxMixtaW50Y3JlYW06MTYxMjE4NTAsbWlzdHlyb3NlOjE2NzcwMjczLG1vY2Nhc2luOjE2NzcwMjI5LG5hdmFqb3doaXRlOjE2NzY4Njg1LG5hdnk6MTI4LG9sZGxhY2U6MTY2NDM1NTgsb2xpdmU6ODQyMTM3NixvbGl2ZWRyYWI6NzA0ODczOSxvcmFuZ2U6MTY3NTM5MjAsb3JhbmdlcmVkOjE2NzI5MzQ0LG9yY2hpZDoxNDMxNTczNCxwYWxlZ29sZGVucm9kOjE1NjU3MTMwLFxucGFsZWdyZWVuOjEwMDI1ODgwLHBhbGV0dXJxdW9pc2U6MTE1Mjk5NjYscGFsZXZpb2xldHJlZDoxNDM4MTIwMyxwYXBheWF3aGlwOjE2NzczMDc3LHBlYWNocHVmZjoxNjc2NzY3MyxwZXJ1OjEzNDY4OTkxLHBpbms6MTY3NjEwMzUscGx1bToxNDUyNDYzNyxwb3dkZXJibHVlOjExNTkxOTEwLHB1cnBsZTo4Mzg4NzM2LHJlZDoxNjcxMTY4MCxyb3N5YnJvd246MTIzNTc1MTkscm95YWxibHVlOjQyODY5NDUsc2FkZGxlYnJvd246OTEyNzE4NyxzYWxtb246MTY0MTY4ODIsc2FuZHlicm93bjoxNjAzMjg2NCxzZWFncmVlbjozMDUwMzI3LHNlYXNoZWxsOjE2Nzc0NjM4LHNpZW5uYToxMDUwNjc5NyxzaWx2ZXI6MTI2MzIyNTYsc2t5Ymx1ZTo4OTAwMzMxLHNsYXRlYmx1ZTo2OTcwMDYxLHNsYXRlZ3JheTo3MzcyOTQ0LHNsYXRlZ3JleTo3MzcyOTQ0LHNub3c6MTY3NzU5MzAsc3ByaW5nZ3JlZW46NjU0MDcsc3RlZWxibHVlOjQ2MjA5ODAsdGFuOjEzODA4NzgwLHRlYWw6MzI4OTYsdGhpc3RsZToxNDIwNDg4OCxcbnRvbWF0bzoxNjczNzA5NSx0dXJxdW9pc2U6NDI1MTg1Nix2aW9sZXQ6MTU2MzEwODYsd2hlYXQ6MTYxMTMzMzEsd2hpdGU6MTY3NzcyMTUsd2hpdGVzbW9rZToxNjExOTI4NSx5ZWxsb3c6MTY3NzY5NjAseWVsbG93Z3JlZW46MTAxNDUwNzR9O1RIUkVFLlF1YXRlcm5pb249ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy5feD1hfHwwO3RoaXMuX3k9Ynx8MDt0aGlzLl96PWN8fDA7dGhpcy5fdz12b2lkIDAhPT1kP2Q6MX07XG5USFJFRS5RdWF0ZXJuaW9uLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuUXVhdGVybmlvbixfeDowLF95OjAsX3o6MCxfdzowLF9ldWxlcjp2b2lkIDAsX3VwZGF0ZUV1bGVyOmZ1bmN0aW9uKCl7dm9pZCAwIT09dGhpcy5fZXVsZXImJnRoaXMuX2V1bGVyLnNldEZyb21RdWF0ZXJuaW9uKHRoaXMsdm9pZCAwLCExKX0sZ2V0IHgoKXtyZXR1cm4gdGhpcy5feH0sc2V0IHgoYSl7dGhpcy5feD1hO3RoaXMuX3VwZGF0ZUV1bGVyKCl9LGdldCB5KCl7cmV0dXJuIHRoaXMuX3l9LHNldCB5KGEpe3RoaXMuX3k9YTt0aGlzLl91cGRhdGVFdWxlcigpfSxnZXQgeigpe3JldHVybiB0aGlzLl96fSxzZXQgeihhKXt0aGlzLl96PWE7dGhpcy5fdXBkYXRlRXVsZXIoKX0sZ2V0IHcoKXtyZXR1cm4gdGhpcy5fd30sc2V0IHcoYSl7dGhpcy5fdz1hO3RoaXMuX3VwZGF0ZUV1bGVyKCl9LHNldDpmdW5jdGlvbihhLGIsYyxkKXt0aGlzLl94PWE7dGhpcy5feT1iO3RoaXMuX3o9Yzt0aGlzLl93PWQ7XG50aGlzLl91cGRhdGVFdWxlcigpO3JldHVybiB0aGlzfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMuX3g9YS5feDt0aGlzLl95PWEuX3k7dGhpcy5fej1hLl96O3RoaXMuX3c9YS5fdzt0aGlzLl91cGRhdGVFdWxlcigpO3JldHVybiB0aGlzfSxzZXRGcm9tRXVsZXI6ZnVuY3Rpb24oYSxiKXtpZighMT09PWEgaW5zdGFuY2VvZiBUSFJFRS5FdWxlcil0aHJvdyBFcnJvcihcIkVSUk9SOiBRdWF0ZXJuaW9uJ3MgLnNldEZyb21FdWxlcigpIG5vdyBleHBlY3RzIGEgRXVsZXIgcm90YXRpb24gcmF0aGVyIHRoYW4gYSBWZWN0b3IzIGFuZCBvcmRlci4gIFBsZWFzZSB1cGRhdGUgeW91ciBjb2RlLlwiKTt2YXIgYz1NYXRoLmNvcyhhLl94LzIpLGQ9TWF0aC5jb3MoYS5feS8yKSxlPU1hdGguY29zKGEuX3ovMiksZj1NYXRoLnNpbihhLl94LzIpLGg9TWF0aC5zaW4oYS5feS8yKSxnPU1hdGguc2luKGEuX3ovMik7XCJYWVpcIj09PWEub3JkZXI/KHRoaXMuX3g9ZipkKmUrYypoKmcsdGhpcy5feT1jKmgqXG5lLWYqZCpnLHRoaXMuX3o9YypkKmcrZipoKmUsdGhpcy5fdz1jKmQqZS1mKmgqZyk6XCJZWFpcIj09PWEub3JkZXI/KHRoaXMuX3g9ZipkKmUrYypoKmcsdGhpcy5feT1jKmgqZS1mKmQqZyx0aGlzLl96PWMqZCpnLWYqaCplLHRoaXMuX3c9YypkKmUrZipoKmcpOlwiWlhZXCI9PT1hLm9yZGVyPyh0aGlzLl94PWYqZCplLWMqaCpnLHRoaXMuX3k9YypoKmUrZipkKmcsdGhpcy5fej1jKmQqZytmKmgqZSx0aGlzLl93PWMqZCplLWYqaCpnKTpcIlpZWFwiPT09YS5vcmRlcj8odGhpcy5feD1mKmQqZS1jKmgqZyx0aGlzLl95PWMqaCplK2YqZCpnLHRoaXMuX3o9YypkKmctZipoKmUsdGhpcy5fdz1jKmQqZStmKmgqZyk6XCJZWlhcIj09PWEub3JkZXI/KHRoaXMuX3g9ZipkKmUrYypoKmcsdGhpcy5feT1jKmgqZStmKmQqZyx0aGlzLl96PWMqZCpnLWYqaCplLHRoaXMuX3c9YypkKmUtZipoKmcpOlwiWFpZXCI9PT1hLm9yZGVyJiYodGhpcy5feD1mKmQqZS1jKmgqZyx0aGlzLl95PWMqaCplLWYqZCpnLHRoaXMuX3o9XG5jKmQqZytmKmgqZSx0aGlzLl93PWMqZCplK2YqaCpnKTshMSE9PWImJnRoaXMuX3VwZGF0ZUV1bGVyKCk7cmV0dXJuIHRoaXN9LHNldEZyb21BeGlzQW5nbGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iLzIsZD1NYXRoLnNpbihjKTt0aGlzLl94PWEueCpkO3RoaXMuX3k9YS55KmQ7dGhpcy5fej1hLnoqZDt0aGlzLl93PU1hdGguY29zKGMpO3RoaXMuX3VwZGF0ZUV1bGVyKCk7cmV0dXJuIHRoaXN9LHNldEZyb21Sb3RhdGlvbk1hdHJpeDpmdW5jdGlvbihhKXt2YXIgYj1hLmVsZW1lbnRzLGM9YlswXSxhPWJbNF0sZD1iWzhdLGU9YlsxXSxmPWJbNV0saD1iWzldLGc9YlsyXSxpPWJbNl0sYj1iWzEwXSxrPWMrZitiOzA8az8oYz0wLjUvTWF0aC5zcXJ0KGsrMSksdGhpcy5fdz0wLjI1L2MsdGhpcy5feD0oaS1oKSpjLHRoaXMuX3k9KGQtZykqYyx0aGlzLl96PShlLWEpKmMpOmM+ZiYmYz5iPyhjPTIqTWF0aC5zcXJ0KDErYy1mLWIpLHRoaXMuX3c9KGktaCkvYyx0aGlzLl94PTAuMjUqYyxcbnRoaXMuX3k9KGErZSkvYyx0aGlzLl96PShkK2cpL2MpOmY+Yj8oYz0yKk1hdGguc3FydCgxK2YtYy1iKSx0aGlzLl93PShkLWcpL2MsdGhpcy5feD0oYStlKS9jLHRoaXMuX3k9MC4yNSpjLHRoaXMuX3o9KGgraSkvYyk6KGM9MipNYXRoLnNxcnQoMStiLWMtZiksdGhpcy5fdz0oZS1hKS9jLHRoaXMuX3g9KGQrZykvYyx0aGlzLl95PShoK2kpL2MsdGhpcy5fej0wLjI1KmMpO3RoaXMuX3VwZGF0ZUV1bGVyKCk7cmV0dXJuIHRoaXN9LGludmVyc2U6ZnVuY3Rpb24oKXt0aGlzLmNvbmp1Z2F0ZSgpLm5vcm1hbGl6ZSgpO3JldHVybiB0aGlzfSxjb25qdWdhdGU6ZnVuY3Rpb24oKXt0aGlzLl94Kj0tMTt0aGlzLl95Kj0tMTt0aGlzLl96Kj0tMTt0aGlzLl91cGRhdGVFdWxlcigpO3JldHVybiB0aGlzfSxsZW5ndGhTcTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl94KnRoaXMuX3grdGhpcy5feSp0aGlzLl95K3RoaXMuX3oqdGhpcy5feit0aGlzLl93KnRoaXMuX3d9LGxlbmd0aDpmdW5jdGlvbigpe3JldHVybiBNYXRoLnNxcnQodGhpcy5feCpcbnRoaXMuX3grdGhpcy5feSp0aGlzLl95K3RoaXMuX3oqdGhpcy5feit0aGlzLl93KnRoaXMuX3cpfSxub3JtYWxpemU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmxlbmd0aCgpOzA9PT1hPyh0aGlzLl96PXRoaXMuX3k9dGhpcy5feD0wLHRoaXMuX3c9MSk6KGE9MS9hLHRoaXMuX3gqPWEsdGhpcy5feSo9YSx0aGlzLl96Kj1hLHRoaXMuX3cqPWEpO3JldHVybiB0aGlzfSxtdWx0aXBseTpmdW5jdGlvbihhLGIpe3JldHVybiB2b2lkIDAhPT1iPyhjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEOiBRdWF0ZXJuaW9uJ3MgLm11bHRpcGx5KCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAubXVsdGlwbHlRdWF0ZXJuaW9ucyggYSwgYiApIGluc3RlYWQuXCIpLHRoaXMubXVsdGlwbHlRdWF0ZXJuaW9ucyhhLGIpKTp0aGlzLm11bHRpcGx5UXVhdGVybmlvbnModGhpcyxhKX0sbXVsdGlwbHlRdWF0ZXJuaW9uczpmdW5jdGlvbihhLGIpe3ZhciBjPWEuX3gsZD1hLl95LGU9YS5feixmPVxuYS5fdyxoPWIuX3gsZz1iLl95LGk9Yi5feixrPWIuX3c7dGhpcy5feD1jKmsrZipoK2QqaS1lKmc7dGhpcy5feT1kKmsrZipnK2UqaC1jKmk7dGhpcy5fej1lKmsrZippK2MqZy1kKmg7dGhpcy5fdz1mKmstYypoLWQqZy1lKmk7dGhpcy5fdXBkYXRlRXVsZXIoKTtyZXR1cm4gdGhpc30sbXVsdGlwbHlWZWN0b3IzOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIkRFUFJFQ0FURUQ6IFF1YXRlcm5pb24ncyAubXVsdGlwbHlWZWN0b3IzKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIGlzIG5vdyB2ZWN0b3IuYXBwbHlRdWF0ZXJuaW9uKCBxdWF0ZXJuaW9uICkgaW5zdGVhZC5cIik7cmV0dXJuIGEuYXBwbHlRdWF0ZXJuaW9uKHRoaXMpfSxzbGVycDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuX3gsZD10aGlzLl95LGU9dGhpcy5feixmPXRoaXMuX3csaD1mKmEuX3crYyphLl94K2QqYS5feStlKmEuX3o7MD5oPyh0aGlzLl93PS1hLl93LHRoaXMuX3g9LWEuX3gsdGhpcy5feT0tYS5feSx0aGlzLl96PVxuLWEuX3osaD0taCk6dGhpcy5jb3B5KGEpO2lmKDE8PWgpcmV0dXJuIHRoaXMuX3c9Zix0aGlzLl94PWMsdGhpcy5feT1kLHRoaXMuX3o9ZSx0aGlzO3ZhciBnPU1hdGguYWNvcyhoKSxpPU1hdGguc3FydCgxLWgqaCk7aWYoMC4wMDE+TWF0aC5hYnMoaSkpcmV0dXJuIHRoaXMuX3c9MC41KihmK3RoaXMuX3cpLHRoaXMuX3g9MC41KihjK3RoaXMuX3gpLHRoaXMuX3k9MC41KihkK3RoaXMuX3kpLHRoaXMuX3o9MC41KihlK3RoaXMuX3opLHRoaXM7aD1NYXRoLnNpbigoMS1iKSpnKS9pO2c9TWF0aC5zaW4oYipnKS9pO3RoaXMuX3c9ZipoK3RoaXMuX3cqZzt0aGlzLl94PWMqaCt0aGlzLl94Kmc7dGhpcy5feT1kKmgrdGhpcy5feSpnO3RoaXMuX3o9ZSpoK3RoaXMuX3oqZzt0aGlzLl91cGRhdGVFdWxlcigpO3JldHVybiB0aGlzfSxlcXVhbHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuX3g9PT10aGlzLl94JiZhLl95PT09dGhpcy5feSYmYS5fej09PXRoaXMuX3omJmEuX3c9PT10aGlzLl93fSxcbmZyb21BcnJheTpmdW5jdGlvbihhKXt0aGlzLl94PWFbMF07dGhpcy5feT1hWzFdO3RoaXMuX3o9YVsyXTt0aGlzLl93PWFbM107dGhpcy5fdXBkYXRlRXVsZXIoKTtyZXR1cm4gdGhpc30sdG9BcnJheTpmdW5jdGlvbigpe3JldHVyblt0aGlzLl94LHRoaXMuX3ksdGhpcy5feix0aGlzLl93XX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFRIUkVFLlF1YXRlcm5pb24odGhpcy5feCx0aGlzLl95LHRoaXMuX3osdGhpcy5fdyl9fTtUSFJFRS5RdWF0ZXJuaW9uLnNsZXJwPWZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBjLmNvcHkoYSkuc2xlcnAoYixkKX07VEhSRUUuVmVjdG9yMj1mdW5jdGlvbihhLGIpe3RoaXMueD1hfHwwO3RoaXMueT1ifHwwfTtcblRIUkVFLlZlY3RvcjIucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5WZWN0b3IyLHNldDpmdW5jdGlvbihhLGIpe3RoaXMueD1hO3RoaXMueT1iO3JldHVybiB0aGlzfSxzZXRYOmZ1bmN0aW9uKGEpe3RoaXMueD1hO3JldHVybiB0aGlzfSxzZXRZOmZ1bmN0aW9uKGEpe3RoaXMueT1hO3JldHVybiB0aGlzfSxzZXRDb21wb25lbnQ6ZnVuY3Rpb24oYSxiKXtzd2l0Y2goYSl7Y2FzZSAwOnRoaXMueD1iO2JyZWFrO2Nhc2UgMTp0aGlzLnk9YjticmVhaztkZWZhdWx0OnRocm93IEVycm9yKFwiaW5kZXggaXMgb3V0IG9mIHJhbmdlOiBcIithKTt9fSxnZXRDb21wb25lbnQ6ZnVuY3Rpb24oYSl7c3dpdGNoKGEpe2Nhc2UgMDpyZXR1cm4gdGhpcy54O2Nhc2UgMTpyZXR1cm4gdGhpcy55O2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJpbmRleCBpcyBvdXQgb2YgcmFuZ2U6IFwiK2EpO319LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy54PWEueDt0aGlzLnk9YS55O3JldHVybiB0aGlzfSxhZGQ6ZnVuY3Rpb24oYSxcbmIpe2lmKHZvaWQgMCE9PWIpcmV0dXJuIGNvbnNvbGUud2FybihcIkRFUFJFQ0FURUQ6IFZlY3RvcjIncyAuYWRkKCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAuYWRkVmVjdG9ycyggYSwgYiApIGluc3RlYWQuXCIpLHRoaXMuYWRkVmVjdG9ycyhhLGIpO3RoaXMueCs9YS54O3RoaXMueSs9YS55O3JldHVybiB0aGlzfSxhZGRWZWN0b3JzOmZ1bmN0aW9uKGEsYil7dGhpcy54PWEueCtiLng7dGhpcy55PWEueStiLnk7cmV0dXJuIHRoaXN9LGFkZFNjYWxhcjpmdW5jdGlvbihhKXt0aGlzLngrPWE7dGhpcy55Kz1hO3JldHVybiB0aGlzfSxzdWI6ZnVuY3Rpb24oYSxiKXtpZih2b2lkIDAhPT1iKXJldHVybiBjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEOiBWZWN0b3IyJ3MgLnN1YigpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLnN1YlZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLnN1YlZlY3RvcnMoYSxiKTt0aGlzLngtPWEueDt0aGlzLnktPVxuYS55O3JldHVybiB0aGlzfSxzdWJWZWN0b3JzOmZ1bmN0aW9uKGEsYil7dGhpcy54PWEueC1iLng7dGhpcy55PWEueS1iLnk7cmV0dXJuIHRoaXN9LG11bHRpcGx5U2NhbGFyOmZ1bmN0aW9uKGEpe3RoaXMueCo9YTt0aGlzLnkqPWE7cmV0dXJuIHRoaXN9LGRpdmlkZVNjYWxhcjpmdW5jdGlvbihhKXswIT09YT8oYT0xL2EsdGhpcy54Kj1hLHRoaXMueSo9YSk6dGhpcy55PXRoaXMueD0wO3JldHVybiB0aGlzfSxtaW46ZnVuY3Rpb24oYSl7dGhpcy54PmEueCYmKHRoaXMueD1hLngpO3RoaXMueT5hLnkmJih0aGlzLnk9YS55KTtyZXR1cm4gdGhpc30sbWF4OmZ1bmN0aW9uKGEpe3RoaXMueDxhLngmJih0aGlzLng9YS54KTt0aGlzLnk8YS55JiYodGhpcy55PWEueSk7cmV0dXJuIHRoaXN9LGNsYW1wOmZ1bmN0aW9uKGEsYil7dGhpcy54PGEueD90aGlzLng9YS54OnRoaXMueD5iLngmJih0aGlzLng9Yi54KTt0aGlzLnk8YS55P3RoaXMueT1hLnk6dGhpcy55PmIueSYmKHRoaXMueT1iLnkpO1xucmV0dXJuIHRoaXN9LG5lZ2F0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm11bHRpcGx5U2NhbGFyKC0xKX0sZG90OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLngqYS54K3RoaXMueSphLnl9LGxlbmd0aFNxOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueCp0aGlzLngrdGhpcy55KnRoaXMueX0sbGVuZ3RoOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguc3FydCh0aGlzLngqdGhpcy54K3RoaXMueSp0aGlzLnkpfSxub3JtYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXZpZGVTY2FsYXIodGhpcy5sZW5ndGgoKSl9LGRpc3RhbmNlVG86ZnVuY3Rpb24oYSl7cmV0dXJuIE1hdGguc3FydCh0aGlzLmRpc3RhbmNlVG9TcXVhcmVkKGEpKX0sZGlzdGFuY2VUb1NxdWFyZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy54LWEueCxhPXRoaXMueS1hLnk7cmV0dXJuIGIqYithKmF9LHNldExlbmd0aDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmxlbmd0aCgpOzAhPT1iJiZhIT09YiYmdGhpcy5tdWx0aXBseVNjYWxhcihhL1xuYik7cmV0dXJuIHRoaXN9LGxlcnA6ZnVuY3Rpb24oYSxiKXt0aGlzLngrPShhLngtdGhpcy54KSpiO3RoaXMueSs9KGEueS10aGlzLnkpKmI7cmV0dXJuIHRoaXN9LGVxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gYS54PT09dGhpcy54JiZhLnk9PT10aGlzLnl9LGZyb21BcnJheTpmdW5jdGlvbihhKXt0aGlzLng9YVswXTt0aGlzLnk9YVsxXTtyZXR1cm4gdGhpc30sdG9BcnJheTpmdW5jdGlvbigpe3JldHVyblt0aGlzLngsdGhpcy55XX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFRIUkVFLlZlY3RvcjIodGhpcy54LHRoaXMueSl9fTtUSFJFRS5WZWN0b3IzPWZ1bmN0aW9uKGEsYixjKXt0aGlzLng9YXx8MDt0aGlzLnk9Ynx8MDt0aGlzLno9Y3x8MH07XG5USFJFRS5WZWN0b3IzLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuVmVjdG9yMyxzZXQ6ZnVuY3Rpb24oYSxiLGMpe3RoaXMueD1hO3RoaXMueT1iO3RoaXMuej1jO3JldHVybiB0aGlzfSxzZXRYOmZ1bmN0aW9uKGEpe3RoaXMueD1hO3JldHVybiB0aGlzfSxzZXRZOmZ1bmN0aW9uKGEpe3RoaXMueT1hO3JldHVybiB0aGlzfSxzZXRaOmZ1bmN0aW9uKGEpe3RoaXMuej1hO3JldHVybiB0aGlzfSxzZXRDb21wb25lbnQ6ZnVuY3Rpb24oYSxiKXtzd2l0Y2goYSl7Y2FzZSAwOnRoaXMueD1iO2JyZWFrO2Nhc2UgMTp0aGlzLnk9YjticmVhaztjYXNlIDI6dGhpcy56PWI7YnJlYWs7ZGVmYXVsdDp0aHJvdyBFcnJvcihcImluZGV4IGlzIG91dCBvZiByYW5nZTogXCIrYSk7fX0sZ2V0Q29tcG9uZW50OmZ1bmN0aW9uKGEpe3N3aXRjaChhKXtjYXNlIDA6cmV0dXJuIHRoaXMueDtjYXNlIDE6cmV0dXJuIHRoaXMueTtjYXNlIDI6cmV0dXJuIHRoaXMuejtkZWZhdWx0OnRocm93IEVycm9yKFwiaW5kZXggaXMgb3V0IG9mIHJhbmdlOiBcIitcbmEpO319LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy54PWEueDt0aGlzLnk9YS55O3RoaXMuej1hLno7cmV0dXJuIHRoaXN9LGFkZDpmdW5jdGlvbihhLGIpe2lmKHZvaWQgMCE9PWIpcmV0dXJuIGNvbnNvbGUud2FybihcIkRFUFJFQ0FURUQ6IFZlY3RvcjMncyAuYWRkKCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAuYWRkVmVjdG9ycyggYSwgYiApIGluc3RlYWQuXCIpLHRoaXMuYWRkVmVjdG9ycyhhLGIpO3RoaXMueCs9YS54O3RoaXMueSs9YS55O3RoaXMueis9YS56O3JldHVybiB0aGlzfSxhZGRTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy54Kz1hO3RoaXMueSs9YTt0aGlzLnorPWE7cmV0dXJuIHRoaXN9LGFkZFZlY3RvcnM6ZnVuY3Rpb24oYSxiKXt0aGlzLng9YS54K2IueDt0aGlzLnk9YS55K2IueTt0aGlzLno9YS56K2IuejtyZXR1cm4gdGhpc30sc3ViOmZ1bmN0aW9uKGEsYil7aWYodm9pZCAwIT09YilyZXR1cm4gY29uc29sZS53YXJuKFwiREVQUkVDQVRFRDogVmVjdG9yMydzIC5zdWIoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5zdWJWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC5cIiksXG50aGlzLnN1YlZlY3RvcnMoYSxiKTt0aGlzLngtPWEueDt0aGlzLnktPWEueTt0aGlzLnotPWEuejtyZXR1cm4gdGhpc30sc3ViVmVjdG9yczpmdW5jdGlvbihhLGIpe3RoaXMueD1hLngtYi54O3RoaXMueT1hLnktYi55O3RoaXMuej1hLnotYi56O3JldHVybiB0aGlzfSxtdWx0aXBseTpmdW5jdGlvbihhLGIpe2lmKHZvaWQgMCE9PWIpcmV0dXJuIGNvbnNvbGUud2FybihcIkRFUFJFQ0FURUQ6IFZlY3RvcjMncyAubXVsdGlwbHkoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5tdWx0aXBseVZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLm11bHRpcGx5VmVjdG9ycyhhLGIpO3RoaXMueCo9YS54O3RoaXMueSo9YS55O3RoaXMueio9YS56O3JldHVybiB0aGlzfSxtdWx0aXBseVNjYWxhcjpmdW5jdGlvbihhKXt0aGlzLngqPWE7dGhpcy55Kj1hO3RoaXMueio9YTtyZXR1cm4gdGhpc30sbXVsdGlwbHlWZWN0b3JzOmZ1bmN0aW9uKGEsYil7dGhpcy54PWEueCpcbmIueDt0aGlzLnk9YS55KmIueTt0aGlzLno9YS56KmIuejtyZXR1cm4gdGhpc30sYXBwbHlNYXRyaXgzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMueCxjPXRoaXMueSxkPXRoaXMueixhPWEuZWxlbWVudHM7dGhpcy54PWFbMF0qYithWzNdKmMrYVs2XSpkO3RoaXMueT1hWzFdKmIrYVs0XSpjK2FbN10qZDt0aGlzLno9YVsyXSpiK2FbNV0qYythWzhdKmQ7cmV0dXJuIHRoaXN9LGFwcGx5TWF0cml4NDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLngsYz10aGlzLnksZD10aGlzLnosYT1hLmVsZW1lbnRzO3RoaXMueD1hWzBdKmIrYVs0XSpjK2FbOF0qZCthWzEyXTt0aGlzLnk9YVsxXSpiK2FbNV0qYythWzldKmQrYVsxM107dGhpcy56PWFbMl0qYithWzZdKmMrYVsxMF0qZCthWzE0XTtyZXR1cm4gdGhpc30sYXBwbHlQcm9qZWN0aW9uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMueCxjPXRoaXMueSxkPXRoaXMueixhPWEuZWxlbWVudHMsZT0xLyhhWzNdKmIrYVs3XSpjK2FbMTFdKmQrYVsxNV0pO1xudGhpcy54PShhWzBdKmIrYVs0XSpjK2FbOF0qZCthWzEyXSkqZTt0aGlzLnk9KGFbMV0qYithWzVdKmMrYVs5XSpkK2FbMTNdKSplO3RoaXMuej0oYVsyXSpiK2FbNl0qYythWzEwXSpkK2FbMTRdKSplO3JldHVybiB0aGlzfSxhcHBseVF1YXRlcm5pb246ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy54LGM9dGhpcy55LGQ9dGhpcy56LGU9YS54LGY9YS55LGg9YS56LGE9YS53LGc9YSpiK2YqZC1oKmMsaT1hKmMraCpiLWUqZCxrPWEqZCtlKmMtZipiLGI9LWUqYi1mKmMtaCpkO3RoaXMueD1nKmErYiotZStpKi1oLWsqLWY7dGhpcy55PWkqYStiKi1mK2sqLWUtZyotaDt0aGlzLno9ayphK2IqLWgrZyotZi1pKi1lO3JldHVybiB0aGlzfSx0cmFuc2Zvcm1EaXJlY3Rpb246ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy54LGM9dGhpcy55LGQ9dGhpcy56LGE9YS5lbGVtZW50czt0aGlzLng9YVswXSpiK2FbNF0qYythWzhdKmQ7dGhpcy55PWFbMV0qYithWzVdKmMrYVs5XSpkO3RoaXMuej1hWzJdKlxuYithWzZdKmMrYVsxMF0qZDt0aGlzLm5vcm1hbGl6ZSgpO3JldHVybiB0aGlzfSxkaXZpZGU6ZnVuY3Rpb24oYSl7dGhpcy54Lz1hLng7dGhpcy55Lz1hLnk7dGhpcy56Lz1hLno7cmV0dXJuIHRoaXN9LGRpdmlkZVNjYWxhcjpmdW5jdGlvbihhKXswIT09YT8oYT0xL2EsdGhpcy54Kj1hLHRoaXMueSo9YSx0aGlzLnoqPWEpOnRoaXMuej10aGlzLnk9dGhpcy54PTA7cmV0dXJuIHRoaXN9LG1pbjpmdW5jdGlvbihhKXt0aGlzLng+YS54JiYodGhpcy54PWEueCk7dGhpcy55PmEueSYmKHRoaXMueT1hLnkpO3RoaXMuej5hLnomJih0aGlzLno9YS56KTtyZXR1cm4gdGhpc30sbWF4OmZ1bmN0aW9uKGEpe3RoaXMueDxhLngmJih0aGlzLng9YS54KTt0aGlzLnk8YS55JiYodGhpcy55PWEueSk7dGhpcy56PGEueiYmKHRoaXMuej1hLnopO3JldHVybiB0aGlzfSxjbGFtcDpmdW5jdGlvbihhLGIpe3RoaXMueDxhLng/dGhpcy54PWEueDp0aGlzLng+Yi54JiYodGhpcy54PWIueCk7dGhpcy55PFxuYS55P3RoaXMueT1hLnk6dGhpcy55PmIueSYmKHRoaXMueT1iLnkpO3RoaXMuejxhLno/dGhpcy56PWEuejp0aGlzLno+Yi56JiYodGhpcy56PWIueik7cmV0dXJuIHRoaXN9LG5lZ2F0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm11bHRpcGx5U2NhbGFyKC0xKX0sZG90OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLngqYS54K3RoaXMueSphLnkrdGhpcy56KmEuen0sbGVuZ3RoU3E6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54KnRoaXMueCt0aGlzLnkqdGhpcy55K3RoaXMueip0aGlzLnp9LGxlbmd0aDpmdW5jdGlvbigpe3JldHVybiBNYXRoLnNxcnQodGhpcy54KnRoaXMueCt0aGlzLnkqdGhpcy55K3RoaXMueip0aGlzLnopfSxsZW5ndGhNYW5oYXR0YW46ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5hYnModGhpcy54KStNYXRoLmFicyh0aGlzLnkpK01hdGguYWJzKHRoaXMueil9LG5vcm1hbGl6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpdmlkZVNjYWxhcih0aGlzLmxlbmd0aCgpKX0sXG5zZXRMZW5ndGg6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5sZW5ndGgoKTswIT09YiYmYSE9PWImJnRoaXMubXVsdGlwbHlTY2FsYXIoYS9iKTtyZXR1cm4gdGhpc30sbGVycDpmdW5jdGlvbihhLGIpe3RoaXMueCs9KGEueC10aGlzLngpKmI7dGhpcy55Kz0oYS55LXRoaXMueSkqYjt0aGlzLnorPShhLnotdGhpcy56KSpiO3JldHVybiB0aGlzfSxjcm9zczpmdW5jdGlvbihhLGIpe2lmKHZvaWQgMCE9PWIpcmV0dXJuIGNvbnNvbGUud2FybihcIkRFUFJFQ0FURUQ6IFZlY3RvcjMncyAuY3Jvc3MoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5jcm9zc1ZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLmNyb3NzVmVjdG9ycyhhLGIpO3ZhciBjPXRoaXMueCxkPXRoaXMueSxlPXRoaXMuejt0aGlzLng9ZCphLnotZSphLnk7dGhpcy55PWUqYS54LWMqYS56O3RoaXMuej1jKmEueS1kKmEueDtyZXR1cm4gdGhpc30sY3Jvc3NWZWN0b3JzOmZ1bmN0aW9uKGEsYil7dmFyIGM9XG5hLngsZD1hLnksZT1hLnosZj1iLngsaD1iLnksZz1iLno7dGhpcy54PWQqZy1lKmg7dGhpcy55PWUqZi1jKmc7dGhpcy56PWMqaC1kKmY7cmV0dXJuIHRoaXN9LGFuZ2xlVG86ZnVuY3Rpb24oYSl7YT10aGlzLmRvdChhKS8odGhpcy5sZW5ndGgoKSphLmxlbmd0aCgpKTtyZXR1cm4gTWF0aC5hY29zKFRIUkVFLk1hdGguY2xhbXAoYSwtMSwxKSl9LGRpc3RhbmNlVG86ZnVuY3Rpb24oYSl7cmV0dXJuIE1hdGguc3FydCh0aGlzLmRpc3RhbmNlVG9TcXVhcmVkKGEpKX0sZGlzdGFuY2VUb1NxdWFyZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy54LWEueCxjPXRoaXMueS1hLnksYT10aGlzLnotYS56O3JldHVybiBiKmIrYypjK2EqYX0sc2V0RXVsZXJGcm9tUm90YXRpb25NYXRyaXg6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiUkVNT1ZFRDogVmVjdG9yMydzIHNldEV1bGVyRnJvbVJvdGF0aW9uTWF0cml4IGhhcyBiZWVuIHJlbW92ZWQgaW4gZmF2b3Igb2YgRXVsZXIuc2V0RnJvbVJvdGF0aW9uTWF0cml4KCksIHBsZWFzZSB1cGRhdGUgeW91ciBjb2RlLlwiKX0sXG5zZXRFdWxlckZyb21RdWF0ZXJuaW9uOmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlJFTU9WRUQ6IFZlY3RvcjMncyBzZXRFdWxlckZyb21RdWF0ZXJuaW9uOiBoYXMgYmVlbiByZW1vdmVkIGluIGZhdm9yIG9mIEV1bGVyLnNldEZyb21RdWF0ZXJuaW9uKCksIHBsZWFzZSB1cGRhdGUgeW91ciBjb2RlLlwiKX0sZ2V0UG9zaXRpb25Gcm9tTWF0cml4OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIkRFUFJFQ0FURUQ6IFZlY3RvcjMncyAuZ2V0UG9zaXRpb25Gcm9tTWF0cml4KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKCkuIFBsZWFzZSB1cGRhdGUgeW91ciBjb2RlLlwiKTtyZXR1cm4gdGhpcy5zZXRGcm9tTWF0cml4UG9zaXRpb24oYSl9LGdldFNjYWxlRnJvbU1hdHJpeDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEOiBWZWN0b3IzJ3MgLmdldFNjYWxlRnJvbU1hdHJpeCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLnNldEZyb21NYXRyaXhTY2FsZSgpLiBQbGVhc2UgdXBkYXRlIHlvdXIgY29kZS5cIik7XG5yZXR1cm4gdGhpcy5zZXRGcm9tTWF0cml4U2NhbGUoYSl9LGdldENvbHVtbkZyb21NYXRyaXg6ZnVuY3Rpb24oYSxiKXtjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEOiBWZWN0b3IzJ3MgLmdldENvbHVtbkZyb21NYXRyaXgoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5zZXRGcm9tTWF0cml4Q29sdW1uKCkuIFBsZWFzZSB1cGRhdGUgeW91ciBjb2RlLlwiKTtyZXR1cm4gdGhpcy5zZXRGcm9tTWF0cml4Q29sdW1uKGEsYil9LHNldEZyb21NYXRyaXhQb3NpdGlvbjpmdW5jdGlvbihhKXt0aGlzLng9YS5lbGVtZW50c1sxMl07dGhpcy55PWEuZWxlbWVudHNbMTNdO3RoaXMuej1hLmVsZW1lbnRzWzE0XTtyZXR1cm4gdGhpc30sc2V0RnJvbU1hdHJpeFNjYWxlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuc2V0KGEuZWxlbWVudHNbMF0sYS5lbGVtZW50c1sxXSxhLmVsZW1lbnRzWzJdKS5sZW5ndGgoKSxjPXRoaXMuc2V0KGEuZWxlbWVudHNbNF0sYS5lbGVtZW50c1s1XSxhLmVsZW1lbnRzWzZdKS5sZW5ndGgoKSxcbmE9dGhpcy5zZXQoYS5lbGVtZW50c1s4XSxhLmVsZW1lbnRzWzldLGEuZWxlbWVudHNbMTBdKS5sZW5ndGgoKTt0aGlzLng9Yjt0aGlzLnk9Yzt0aGlzLno9YTtyZXR1cm4gdGhpc30sc2V0RnJvbU1hdHJpeENvbHVtbjpmdW5jdGlvbihhLGIpe3ZhciBjPTQqYSxkPWIuZWxlbWVudHM7dGhpcy54PWRbY107dGhpcy55PWRbYysxXTt0aGlzLno9ZFtjKzJdO3JldHVybiB0aGlzfSxlcXVhbHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEueD09PXRoaXMueCYmYS55PT09dGhpcy55JiZhLno9PT10aGlzLnp9LGZyb21BcnJheTpmdW5jdGlvbihhKXt0aGlzLng9YVswXTt0aGlzLnk9YVsxXTt0aGlzLno9YVsyXTtyZXR1cm4gdGhpc30sdG9BcnJheTpmdW5jdGlvbigpe3JldHVyblt0aGlzLngsdGhpcy55LHRoaXMuel19LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBUSFJFRS5WZWN0b3IzKHRoaXMueCx0aGlzLnksdGhpcy56KX19O1xuVEhSRUUuZXh0ZW5kKFRIUkVFLlZlY3RvcjMucHJvdG90eXBlLHthcHBseUV1bGVyOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlF1YXRlcm5pb247cmV0dXJuIGZ1bmN0aW9uKGIpeyExPT09YiBpbnN0YW5jZW9mIFRIUkVFLkV1bGVyJiZjb25zb2xlLmVycm9yKFwiRVJST1I6IFZlY3RvcjMncyAuYXBwbHlFdWxlcigpIG5vdyBleHBlY3RzIGEgRXVsZXIgcm90YXRpb24gcmF0aGVyIHRoYW4gYSBWZWN0b3IzIGFuZCBvcmRlci4gIFBsZWFzZSB1cGRhdGUgeW91ciBjb2RlLlwiKTt0aGlzLmFwcGx5UXVhdGVybmlvbihhLnNldEZyb21FdWxlcihiKSk7cmV0dXJuIHRoaXN9fSgpLGFwcGx5QXhpc0FuZ2xlOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlF1YXRlcm5pb247cmV0dXJuIGZ1bmN0aW9uKGIsYyl7dGhpcy5hcHBseVF1YXRlcm5pb24oYS5zZXRGcm9tQXhpc0FuZ2xlKGIsYykpO3JldHVybiB0aGlzfX0oKSxwcm9qZWN0T25WZWN0b3I6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMztcbnJldHVybiBmdW5jdGlvbihiKXthLmNvcHkoYikubm9ybWFsaXplKCk7Yj10aGlzLmRvdChhKTtyZXR1cm4gdGhpcy5jb3B5KGEpLm11bHRpcGx5U2NhbGFyKGIpfX0oKSxwcm9qZWN0T25QbGFuZTpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihiKXthLmNvcHkodGhpcykucHJvamVjdE9uVmVjdG9yKGIpO3JldHVybiB0aGlzLnN1YihhKX19KCkscmVmbGVjdDpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihiKXthLmNvcHkodGhpcykucHJvamVjdE9uVmVjdG9yKGIpLm11bHRpcGx5U2NhbGFyKDIpO3JldHVybiB0aGlzLnN1YlZlY3RvcnMoYSx0aGlzKX19KCl9KTtUSFJFRS5WZWN0b3I0PWZ1bmN0aW9uKGEsYixjLGQpe3RoaXMueD1hfHwwO3RoaXMueT1ifHwwO3RoaXMuej1jfHwwO3RoaXMudz12b2lkIDAhPT1kP2Q6MX07XG5USFJFRS5WZWN0b3I0LnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuVmVjdG9yNCxzZXQ6ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy54PWE7dGhpcy55PWI7dGhpcy56PWM7dGhpcy53PWQ7cmV0dXJuIHRoaXN9LHNldFg6ZnVuY3Rpb24oYSl7dGhpcy54PWE7cmV0dXJuIHRoaXN9LHNldFk6ZnVuY3Rpb24oYSl7dGhpcy55PWE7cmV0dXJuIHRoaXN9LHNldFo6ZnVuY3Rpb24oYSl7dGhpcy56PWE7cmV0dXJuIHRoaXN9LHNldFc6ZnVuY3Rpb24oYSl7dGhpcy53PWE7cmV0dXJuIHRoaXN9LHNldENvbXBvbmVudDpmdW5jdGlvbihhLGIpe3N3aXRjaChhKXtjYXNlIDA6dGhpcy54PWI7YnJlYWs7Y2FzZSAxOnRoaXMueT1iO2JyZWFrO2Nhc2UgMjp0aGlzLno9YjticmVhaztjYXNlIDM6dGhpcy53PWI7YnJlYWs7ZGVmYXVsdDp0aHJvdyBFcnJvcihcImluZGV4IGlzIG91dCBvZiByYW5nZTogXCIrYSk7fX0sZ2V0Q29tcG9uZW50OmZ1bmN0aW9uKGEpe3N3aXRjaChhKXtjYXNlIDA6cmV0dXJuIHRoaXMueDtcbmNhc2UgMTpyZXR1cm4gdGhpcy55O2Nhc2UgMjpyZXR1cm4gdGhpcy56O2Nhc2UgMzpyZXR1cm4gdGhpcy53O2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJpbmRleCBpcyBvdXQgb2YgcmFuZ2U6IFwiK2EpO319LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy54PWEueDt0aGlzLnk9YS55O3RoaXMuej1hLno7dGhpcy53PXZvaWQgMCE9PWEudz9hLnc6MTtyZXR1cm4gdGhpc30sYWRkOmZ1bmN0aW9uKGEsYil7aWYodm9pZCAwIT09YilyZXR1cm4gY29uc29sZS53YXJuKFwiREVQUkVDQVRFRDogVmVjdG9yNCdzIC5hZGQoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5hZGRWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC5cIiksdGhpcy5hZGRWZWN0b3JzKGEsYik7dGhpcy54Kz1hLng7dGhpcy55Kz1hLnk7dGhpcy56Kz1hLno7dGhpcy53Kz1hLnc7cmV0dXJuIHRoaXN9LGFkZFNjYWxhcjpmdW5jdGlvbihhKXt0aGlzLngrPWE7dGhpcy55Kz1hO3RoaXMueis9YTt0aGlzLncrPWE7cmV0dXJuIHRoaXN9LFxuYWRkVmVjdG9yczpmdW5jdGlvbihhLGIpe3RoaXMueD1hLngrYi54O3RoaXMueT1hLnkrYi55O3RoaXMuej1hLnorYi56O3RoaXMudz1hLncrYi53O3JldHVybiB0aGlzfSxzdWI6ZnVuY3Rpb24oYSxiKXtpZih2b2lkIDAhPT1iKXJldHVybiBjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEOiBWZWN0b3I0J3MgLnN1YigpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLnN1YlZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLnN1YlZlY3RvcnMoYSxiKTt0aGlzLngtPWEueDt0aGlzLnktPWEueTt0aGlzLnotPWEuejt0aGlzLnctPWEudztyZXR1cm4gdGhpc30sc3ViVmVjdG9yczpmdW5jdGlvbihhLGIpe3RoaXMueD1hLngtYi54O3RoaXMueT1hLnktYi55O3RoaXMuej1hLnotYi56O3RoaXMudz1hLnctYi53O3JldHVybiB0aGlzfSxtdWx0aXBseVNjYWxhcjpmdW5jdGlvbihhKXt0aGlzLngqPWE7dGhpcy55Kj1hO3RoaXMueio9YTt0aGlzLncqPWE7cmV0dXJuIHRoaXN9LFxuYXBwbHlNYXRyaXg0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMueCxjPXRoaXMueSxkPXRoaXMueixlPXRoaXMudyxhPWEuZWxlbWVudHM7dGhpcy54PWFbMF0qYithWzRdKmMrYVs4XSpkK2FbMTJdKmU7dGhpcy55PWFbMV0qYithWzVdKmMrYVs5XSpkK2FbMTNdKmU7dGhpcy56PWFbMl0qYithWzZdKmMrYVsxMF0qZCthWzE0XSplO3RoaXMudz1hWzNdKmIrYVs3XSpjK2FbMTFdKmQrYVsxNV0qZTtyZXR1cm4gdGhpc30sZGl2aWRlU2NhbGFyOmZ1bmN0aW9uKGEpezAhPT1hPyhhPTEvYSx0aGlzLngqPWEsdGhpcy55Kj1hLHRoaXMueio9YSx0aGlzLncqPWEpOih0aGlzLno9dGhpcy55PXRoaXMueD0wLHRoaXMudz0xKTtyZXR1cm4gdGhpc30sc2V0QXhpc0FuZ2xlRnJvbVF1YXRlcm5pb246ZnVuY3Rpb24oYSl7dGhpcy53PTIqTWF0aC5hY29zKGEudyk7dmFyIGI9TWF0aC5zcXJ0KDEtYS53KmEudyk7MUUtND5iPyh0aGlzLng9MSx0aGlzLno9dGhpcy55PTApOih0aGlzLng9YS54L2IsXG50aGlzLnk9YS55L2IsdGhpcy56PWEuei9iKTtyZXR1cm4gdGhpc30sc2V0QXhpc0FuZ2xlRnJvbVJvdGF0aW9uTWF0cml4OmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxhPWEuZWxlbWVudHMsZT1hWzBdO2Q9YVs0XTt2YXIgZj1hWzhdLGg9YVsxXSxnPWFbNV0saT1hWzldO2M9YVsyXTtiPWFbNl07dmFyIGs9YVsxMF07aWYoMC4wMT5NYXRoLmFicyhkLWgpJiYwLjAxPk1hdGguYWJzKGYtYykmJjAuMDE+TWF0aC5hYnMoaS1iKSl7aWYoMC4xPk1hdGguYWJzKGQraCkmJjAuMT5NYXRoLmFicyhmK2MpJiYwLjE+TWF0aC5hYnMoaStiKSYmMC4xPk1hdGguYWJzKGUrZytrLTMpKXJldHVybiB0aGlzLnNldCgxLDAsMCwwKSx0aGlzO2E9TWF0aC5QSTtlPShlKzEpLzI7Zz0oZysxKS8yO2s9KGsrMSkvMjtkPShkK2gpLzQ7Zj0oZitjKS80O2k9KGkrYikvNDtlPmcmJmU+az8wLjAxPmU/KGI9MCxkPWM9MC43MDcxMDY3ODEpOihiPU1hdGguc3FydChlKSxjPWQvYixkPWYvYik6Zz5rPzAuMDE+Zz9cbihiPTAuNzA3MTA2NzgxLGM9MCxkPTAuNzA3MTA2NzgxKTooYz1NYXRoLnNxcnQoZyksYj1kL2MsZD1pL2MpOjAuMDE+az8oYz1iPTAuNzA3MTA2NzgxLGQ9MCk6KGQ9TWF0aC5zcXJ0KGspLGI9Zi9kLGM9aS9kKTt0aGlzLnNldChiLGMsZCxhKTtyZXR1cm4gdGhpc31hPU1hdGguc3FydCgoYi1pKSooYi1pKSsoZi1jKSooZi1jKSsoaC1kKSooaC1kKSk7MC4wMDE+TWF0aC5hYnMoYSkmJihhPTEpO3RoaXMueD0oYi1pKS9hO3RoaXMueT0oZi1jKS9hO3RoaXMuej0oaC1kKS9hO3RoaXMudz1NYXRoLmFjb3MoKGUrZytrLTEpLzIpO3JldHVybiB0aGlzfSxtaW46ZnVuY3Rpb24oYSl7dGhpcy54PmEueCYmKHRoaXMueD1hLngpO3RoaXMueT5hLnkmJih0aGlzLnk9YS55KTt0aGlzLno+YS56JiYodGhpcy56PWEueik7dGhpcy53PmEudyYmKHRoaXMudz1hLncpO3JldHVybiB0aGlzfSxtYXg6ZnVuY3Rpb24oYSl7dGhpcy54PGEueCYmKHRoaXMueD1hLngpO3RoaXMueTxhLnkmJih0aGlzLnk9XG5hLnkpO3RoaXMuejxhLnomJih0aGlzLno9YS56KTt0aGlzLnc8YS53JiYodGhpcy53PWEudyk7cmV0dXJuIHRoaXN9LGNsYW1wOmZ1bmN0aW9uKGEsYil7dGhpcy54PGEueD90aGlzLng9YS54OnRoaXMueD5iLngmJih0aGlzLng9Yi54KTt0aGlzLnk8YS55P3RoaXMueT1hLnk6dGhpcy55PmIueSYmKHRoaXMueT1iLnkpO3RoaXMuejxhLno/dGhpcy56PWEuejp0aGlzLno+Yi56JiYodGhpcy56PWIueik7dGhpcy53PGEudz90aGlzLnc9YS53OnRoaXMudz5iLncmJih0aGlzLnc9Yi53KTtyZXR1cm4gdGhpc30sbmVnYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubXVsdGlwbHlTY2FsYXIoLTEpfSxkb3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMueCphLngrdGhpcy55KmEueSt0aGlzLnoqYS56K3RoaXMudyphLnd9LGxlbmd0aFNxOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueCp0aGlzLngrdGhpcy55KnRoaXMueSt0aGlzLnoqdGhpcy56K3RoaXMudyp0aGlzLnd9LGxlbmd0aDpmdW5jdGlvbigpe3JldHVybiBNYXRoLnNxcnQodGhpcy54KlxudGhpcy54K3RoaXMueSp0aGlzLnkrdGhpcy56KnRoaXMueit0aGlzLncqdGhpcy53KX0sbGVuZ3RoTWFuaGF0dGFuOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguYWJzKHRoaXMueCkrTWF0aC5hYnModGhpcy55KStNYXRoLmFicyh0aGlzLnopK01hdGguYWJzKHRoaXMudyl9LG5vcm1hbGl6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpdmlkZVNjYWxhcih0aGlzLmxlbmd0aCgpKX0sc2V0TGVuZ3RoOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMubGVuZ3RoKCk7MCE9PWImJmEhPT1iJiZ0aGlzLm11bHRpcGx5U2NhbGFyKGEvYik7cmV0dXJuIHRoaXN9LGxlcnA6ZnVuY3Rpb24oYSxiKXt0aGlzLngrPShhLngtdGhpcy54KSpiO3RoaXMueSs9KGEueS10aGlzLnkpKmI7dGhpcy56Kz0oYS56LXRoaXMueikqYjt0aGlzLncrPShhLnctdGhpcy53KSpiO3JldHVybiB0aGlzfSxlcXVhbHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEueD09PXRoaXMueCYmYS55PT09dGhpcy55JiZhLno9PT10aGlzLnomJlxuYS53PT09dGhpcy53fSxmcm9tQXJyYXk6ZnVuY3Rpb24oYSl7dGhpcy54PWFbMF07dGhpcy55PWFbMV07dGhpcy56PWFbMl07dGhpcy53PWFbM107cmV0dXJuIHRoaXN9LHRvQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm5bdGhpcy54LHRoaXMueSx0aGlzLnosdGhpcy53XX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFRIUkVFLlZlY3RvcjQodGhpcy54LHRoaXMueSx0aGlzLnosdGhpcy53KX19O1RIUkVFLkV1bGVyPWZ1bmN0aW9uKGEsYixjLGQpe3RoaXMuX3g9YXx8MDt0aGlzLl95PWJ8fDA7dGhpcy5fej1jfHwwO3RoaXMuX29yZGVyPWR8fFRIUkVFLkV1bGVyLkRlZmF1bHRPcmRlcn07VEhSRUUuRXVsZXIuUm90YXRpb25PcmRlcnM9XCJYWVogWVpYIFpYWSBYWlkgWVhaIFpZWFwiLnNwbGl0KFwiIFwiKTtUSFJFRS5FdWxlci5EZWZhdWx0T3JkZXI9XCJYWVpcIjtcblRIUkVFLkV1bGVyLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuRXVsZXIsX3g6MCxfeTowLF96OjAsX29yZGVyOlRIUkVFLkV1bGVyLkRlZmF1bHRPcmRlcixfcXVhdGVybmlvbjp2b2lkIDAsX3VwZGF0ZVF1YXRlcm5pb246ZnVuY3Rpb24oKXt2b2lkIDAhPT10aGlzLl9xdWF0ZXJuaW9uJiZ0aGlzLl9xdWF0ZXJuaW9uLnNldEZyb21FdWxlcih0aGlzLCExKX0sZ2V0IHgoKXtyZXR1cm4gdGhpcy5feH0sc2V0IHgoYSl7dGhpcy5feD1hO3RoaXMuX3VwZGF0ZVF1YXRlcm5pb24oKX0sZ2V0IHkoKXtyZXR1cm4gdGhpcy5feX0sc2V0IHkoYSl7dGhpcy5feT1hO3RoaXMuX3VwZGF0ZVF1YXRlcm5pb24oKX0sZ2V0IHooKXtyZXR1cm4gdGhpcy5fen0sc2V0IHooYSl7dGhpcy5fej1hO3RoaXMuX3VwZGF0ZVF1YXRlcm5pb24oKX0sZ2V0IG9yZGVyKCl7cmV0dXJuIHRoaXMuX29yZGVyfSxzZXQgb3JkZXIoYSl7dGhpcy5fb3JkZXI9YTt0aGlzLl91cGRhdGVRdWF0ZXJuaW9uKCl9LFxuc2V0OmZ1bmN0aW9uKGEsYixjLGQpe3RoaXMuX3g9YTt0aGlzLl95PWI7dGhpcy5fej1jO3RoaXMuX29yZGVyPWR8fHRoaXMuX29yZGVyO3RoaXMuX3VwZGF0ZVF1YXRlcm5pb24oKTtyZXR1cm4gdGhpc30sY29weTpmdW5jdGlvbihhKXt0aGlzLl94PWEuX3g7dGhpcy5feT1hLl95O3RoaXMuX3o9YS5fejt0aGlzLl9vcmRlcj1hLl9vcmRlcjt0aGlzLl91cGRhdGVRdWF0ZXJuaW9uKCk7cmV0dXJuIHRoaXN9LHNldEZyb21Sb3RhdGlvbk1hdHJpeDpmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSl7cmV0dXJuIE1hdGgubWluKE1hdGgubWF4KGEsLTEpLDEpfXZhciBkPWEuZWxlbWVudHMsZT1kWzBdLGY9ZFs0XSxoPWRbOF0sZz1kWzFdLGk9ZFs1XSxrPWRbOV0sbT1kWzJdLGw9ZFs2XSxkPWRbMTBdLGI9Ynx8dGhpcy5fb3JkZXI7XCJYWVpcIj09PWI/KHRoaXMuX3k9TWF0aC5hc2luKGMoaCkpLDAuOTk5OTk+TWF0aC5hYnMoaCk/KHRoaXMuX3g9TWF0aC5hdGFuMigtayxkKSx0aGlzLl96PVxuTWF0aC5hdGFuMigtZixlKSk6KHRoaXMuX3g9TWF0aC5hdGFuMihsLGkpLHRoaXMuX3o9MCkpOlwiWVhaXCI9PT1iPyh0aGlzLl94PU1hdGguYXNpbigtYyhrKSksMC45OTk5OT5NYXRoLmFicyhrKT8odGhpcy5feT1NYXRoLmF0YW4yKGgsZCksdGhpcy5fej1NYXRoLmF0YW4yKGcsaSkpOih0aGlzLl95PU1hdGguYXRhbjIoLW0sZSksdGhpcy5fej0wKSk6XCJaWFlcIj09PWI/KHRoaXMuX3g9TWF0aC5hc2luKGMobCkpLDAuOTk5OTk+TWF0aC5hYnMobCk/KHRoaXMuX3k9TWF0aC5hdGFuMigtbSxkKSx0aGlzLl96PU1hdGguYXRhbjIoLWYsaSkpOih0aGlzLl95PTAsdGhpcy5fej1NYXRoLmF0YW4yKGcsZSkpKTpcIlpZWFwiPT09Yj8odGhpcy5feT1NYXRoLmFzaW4oLWMobSkpLDAuOTk5OTk+TWF0aC5hYnMobSk/KHRoaXMuX3g9TWF0aC5hdGFuMihsLGQpLHRoaXMuX3o9TWF0aC5hdGFuMihnLGUpKToodGhpcy5feD0wLHRoaXMuX3o9TWF0aC5hdGFuMigtZixpKSkpOlwiWVpYXCI9PT1iPyh0aGlzLl96PVxuTWF0aC5hc2luKGMoZykpLDAuOTk5OTk+TWF0aC5hYnMoZyk/KHRoaXMuX3g9TWF0aC5hdGFuMigtayxpKSx0aGlzLl95PU1hdGguYXRhbjIoLW0sZSkpOih0aGlzLl94PTAsdGhpcy5feT1NYXRoLmF0YW4yKGgsZCkpKTpcIlhaWVwiPT09Yj8odGhpcy5fej1NYXRoLmFzaW4oLWMoZikpLDAuOTk5OTk+TWF0aC5hYnMoZik/KHRoaXMuX3g9TWF0aC5hdGFuMihsLGkpLHRoaXMuX3k9TWF0aC5hdGFuMihoLGUpKToodGhpcy5feD1NYXRoLmF0YW4yKC1rLGQpLHRoaXMuX3k9MCkpOmNvbnNvbGUud2FybihcIldBUk5JTkc6IEV1bGVyLnNldEZyb21Sb3RhdGlvbk1hdHJpeCgpIGdpdmVuIHVuc3VwcG9ydGVkIG9yZGVyOiBcIitiKTt0aGlzLl9vcmRlcj1iO3RoaXMuX3VwZGF0ZVF1YXRlcm5pb24oKTtyZXR1cm4gdGhpc30sc2V0RnJvbVF1YXRlcm5pb246ZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoYSl7cmV0dXJuIE1hdGgubWluKE1hdGgubWF4KGEsLTEpLDEpfXZhciBlPWEueCphLngsZj1cbmEueSphLnksaD1hLnoqYS56LGc9YS53KmEudyxiPWJ8fHRoaXMuX29yZGVyO1wiWFlaXCI9PT1iPyh0aGlzLl94PU1hdGguYXRhbjIoMiooYS54KmEudy1hLnkqYS56KSxnLWUtZitoKSx0aGlzLl95PU1hdGguYXNpbihkKDIqKGEueCphLnorYS55KmEudykpKSx0aGlzLl96PU1hdGguYXRhbjIoMiooYS56KmEudy1hLngqYS55KSxnK2UtZi1oKSk6XCJZWFpcIj09PWI/KHRoaXMuX3g9TWF0aC5hc2luKGQoMiooYS54KmEudy1hLnkqYS56KSkpLHRoaXMuX3k9TWF0aC5hdGFuMigyKihhLngqYS56K2EueSphLncpLGctZS1mK2gpLHRoaXMuX3o9TWF0aC5hdGFuMigyKihhLngqYS55K2EueiphLncpLGctZStmLWgpKTpcIlpYWVwiPT09Yj8odGhpcy5feD1NYXRoLmFzaW4oZCgyKihhLngqYS53K2EueSphLnopKSksdGhpcy5feT1NYXRoLmF0YW4yKDIqKGEueSphLnctYS56KmEueCksZy1lLWYraCksdGhpcy5fej1NYXRoLmF0YW4yKDIqKGEueiphLnctYS54KmEueSksZy1lK2YtaCkpOlwiWllYXCI9PT1cbmI/KHRoaXMuX3g9TWF0aC5hdGFuMigyKihhLngqYS53K2EueiphLnkpLGctZS1mK2gpLHRoaXMuX3k9TWF0aC5hc2luKGQoMiooYS55KmEudy1hLngqYS56KSkpLHRoaXMuX3o9TWF0aC5hdGFuMigyKihhLngqYS55K2EueiphLncpLGcrZS1mLWgpKTpcIllaWFwiPT09Yj8odGhpcy5feD1NYXRoLmF0YW4yKDIqKGEueCphLnctYS56KmEueSksZy1lK2YtaCksdGhpcy5feT1NYXRoLmF0YW4yKDIqKGEueSphLnctYS54KmEueiksZytlLWYtaCksdGhpcy5fej1NYXRoLmFzaW4oZCgyKihhLngqYS55K2EueiphLncpKSkpOlwiWFpZXCI9PT1iPyh0aGlzLl94PU1hdGguYXRhbjIoMiooYS54KmEudythLnkqYS56KSxnLWUrZi1oKSx0aGlzLl95PU1hdGguYXRhbjIoMiooYS54KmEueithLnkqYS53KSxnK2UtZi1oKSx0aGlzLl96PU1hdGguYXNpbihkKDIqKGEueiphLnctYS54KmEueSkpKSk6Y29uc29sZS53YXJuKFwiV0FSTklORzogRXVsZXIuc2V0RnJvbVF1YXRlcm5pb24oKSBnaXZlbiB1bnN1cHBvcnRlZCBvcmRlcjogXCIrXG5iKTt0aGlzLl9vcmRlcj1iOyExIT09YyYmdGhpcy5fdXBkYXRlUXVhdGVybmlvbigpO3JldHVybiB0aGlzfSxyZW9yZGVyOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlF1YXRlcm5pb247cmV0dXJuIGZ1bmN0aW9uKGIpe2Euc2V0RnJvbUV1bGVyKHRoaXMpO3RoaXMuc2V0RnJvbVF1YXRlcm5pb24oYSxiKX19KCksZnJvbUFycmF5OmZ1bmN0aW9uKGEpe3RoaXMuX3g9YVswXTt0aGlzLl95PWFbMV07dGhpcy5fej1hWzJdO3ZvaWQgMCE9PWFbM10mJih0aGlzLl9vcmRlcj1hWzNdKTt0aGlzLl91cGRhdGVRdWF0ZXJuaW9uKCk7cmV0dXJuIHRoaXN9LHRvQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm5bdGhpcy5feCx0aGlzLl95LHRoaXMuX3osdGhpcy5fb3JkZXJdfSxlcXVhbHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuX3g9PT10aGlzLl94JiZhLl95PT09dGhpcy5feSYmYS5fej09PXRoaXMuX3omJmEuX29yZGVyPT09dGhpcy5fb3JkZXJ9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBUSFJFRS5FdWxlcih0aGlzLl94LFxudGhpcy5feSx0aGlzLl96LHRoaXMuX29yZGVyKX19O1RIUkVFLkxpbmUzPWZ1bmN0aW9uKGEsYil7dGhpcy5zdGFydD12b2lkIDAhPT1hP2E6bmV3IFRIUkVFLlZlY3RvcjM7dGhpcy5lbmQ9dm9pZCAwIT09Yj9iOm5ldyBUSFJFRS5WZWN0b3IzfTtcblRIUkVFLkxpbmUzLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuTGluZTMsc2V0OmZ1bmN0aW9uKGEsYil7dGhpcy5zdGFydC5jb3B5KGEpO3RoaXMuZW5kLmNvcHkoYik7cmV0dXJuIHRoaXN9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5zdGFydC5jb3B5KGEuc3RhcnQpO3RoaXMuZW5kLmNvcHkoYS5lbmQpO3JldHVybiB0aGlzfSxjZW50ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fG5ldyBUSFJFRS5WZWN0b3IzKS5hZGRWZWN0b3JzKHRoaXMuc3RhcnQsdGhpcy5lbmQpLm11bHRpcGx5U2NhbGFyKDAuNSl9LGRlbHRhOmZ1bmN0aW9uKGEpe3JldHVybihhfHxuZXcgVEhSRUUuVmVjdG9yMykuc3ViVmVjdG9ycyh0aGlzLmVuZCx0aGlzLnN0YXJ0KX0sZGlzdGFuY2VTcTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXJ0LmRpc3RhbmNlVG9TcXVhcmVkKHRoaXMuZW5kKX0sZGlzdGFuY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGFydC5kaXN0YW5jZVRvKHRoaXMuZW5kKX0sYXQ6ZnVuY3Rpb24oYSxcbmIpe3ZhciBjPWJ8fG5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiB0aGlzLmRlbHRhKGMpLm11bHRpcGx5U2NhbGFyKGEpLmFkZCh0aGlzLnN0YXJ0KX0sY2xvc2VzdFBvaW50VG9Qb2ludFBhcmFtZXRlcjpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzLGI9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGMsZCl7YS5zdWJWZWN0b3JzKGMsdGhpcy5zdGFydCk7Yi5zdWJWZWN0b3JzKHRoaXMuZW5kLHRoaXMuc3RhcnQpO3ZhciBlPWIuZG90KGIpLGU9Yi5kb3QoYSkvZTtkJiYoZT1USFJFRS5NYXRoLmNsYW1wKGUsMCwxKSk7cmV0dXJuIGV9fSgpLGNsb3Nlc3RQb2ludFRvUG9pbnQ6ZnVuY3Rpb24oYSxiLGMpe2E9dGhpcy5jbG9zZXN0UG9pbnRUb1BvaW50UGFyYW1ldGVyKGEsYik7Yz1jfHxuZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gdGhpcy5kZWx0YShjKS5tdWx0aXBseVNjYWxhcihhKS5hZGQodGhpcy5zdGFydCl9LGFwcGx5TWF0cml4NDpmdW5jdGlvbihhKXt0aGlzLnN0YXJ0LmFwcGx5TWF0cml4NChhKTtcbnRoaXMuZW5kLmFwcGx5TWF0cml4NChhKTtyZXR1cm4gdGhpc30sZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiBhLnN0YXJ0LmVxdWFscyh0aGlzLnN0YXJ0KSYmYS5lbmQuZXF1YWxzKHRoaXMuZW5kKX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IFRIUkVFLkxpbmUzKS5jb3B5KHRoaXMpfX07VEhSRUUuQm94Mj1mdW5jdGlvbihhLGIpe3RoaXMubWluPXZvaWQgMCE9PWE/YTpuZXcgVEhSRUUuVmVjdG9yMihJbmZpbml0eSxJbmZpbml0eSk7dGhpcy5tYXg9dm9pZCAwIT09Yj9iOm5ldyBUSFJFRS5WZWN0b3IyKC1JbmZpbml0eSwtSW5maW5pdHkpfTtcblRIUkVFLkJveDIucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5Cb3gyLHNldDpmdW5jdGlvbihhLGIpe3RoaXMubWluLmNvcHkoYSk7dGhpcy5tYXguY29weShiKTtyZXR1cm4gdGhpc30sc2V0RnJvbVBvaW50czpmdW5jdGlvbihhKXtpZigwPGEubGVuZ3RoKXt2YXIgYj1hWzBdO3RoaXMubWluLmNvcHkoYik7dGhpcy5tYXguY29weShiKTtmb3IodmFyIGM9MSxkPWEubGVuZ3RoO2M8ZDtjKyspYj1hW2NdLGIueDx0aGlzLm1pbi54P3RoaXMubWluLng9Yi54OmIueD50aGlzLm1heC54JiYodGhpcy5tYXgueD1iLngpLGIueTx0aGlzLm1pbi55P3RoaXMubWluLnk9Yi55OmIueT50aGlzLm1heC55JiYodGhpcy5tYXgueT1iLnkpfWVsc2UgdGhpcy5tYWtlRW1wdHkoKTtyZXR1cm4gdGhpc30sc2V0RnJvbUNlbnRlckFuZFNpemU6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMjtyZXR1cm4gZnVuY3Rpb24oYixjKXt2YXIgZD1hLmNvcHkoYykubXVsdGlwbHlTY2FsYXIoMC41KTtcbnRoaXMubWluLmNvcHkoYikuc3ViKGQpO3RoaXMubWF4LmNvcHkoYikuYWRkKGQpO3JldHVybiB0aGlzfX0oKSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMubWluLmNvcHkoYS5taW4pO3RoaXMubWF4LmNvcHkoYS5tYXgpO3JldHVybiB0aGlzfSxtYWtlRW1wdHk6ZnVuY3Rpb24oKXt0aGlzLm1pbi54PXRoaXMubWluLnk9SW5maW5pdHk7dGhpcy5tYXgueD10aGlzLm1heC55PS1JbmZpbml0eTtyZXR1cm4gdGhpc30sZW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXgueDx0aGlzLm1pbi54fHx0aGlzLm1heC55PHRoaXMubWluLnl9LGNlbnRlcjpmdW5jdGlvbihhKXtyZXR1cm4oYXx8bmV3IFRIUkVFLlZlY3RvcjIpLmFkZFZlY3RvcnModGhpcy5taW4sdGhpcy5tYXgpLm11bHRpcGx5U2NhbGFyKDAuNSl9LHNpemU6ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fG5ldyBUSFJFRS5WZWN0b3IyKS5zdWJWZWN0b3JzKHRoaXMubWF4LHRoaXMubWluKX0sZXhwYW5kQnlQb2ludDpmdW5jdGlvbihhKXt0aGlzLm1pbi5taW4oYSk7XG50aGlzLm1heC5tYXgoYSk7cmV0dXJuIHRoaXN9LGV4cGFuZEJ5VmVjdG9yOmZ1bmN0aW9uKGEpe3RoaXMubWluLnN1YihhKTt0aGlzLm1heC5hZGQoYSk7cmV0dXJuIHRoaXN9LGV4cGFuZEJ5U2NhbGFyOmZ1bmN0aW9uKGEpe3RoaXMubWluLmFkZFNjYWxhcigtYSk7dGhpcy5tYXguYWRkU2NhbGFyKGEpO3JldHVybiB0aGlzfSxjb250YWluc1BvaW50OmZ1bmN0aW9uKGEpe3JldHVybiBhLng8dGhpcy5taW4ueHx8YS54PnRoaXMubWF4Lnh8fGEueTx0aGlzLm1pbi55fHxhLnk+dGhpcy5tYXgueT8hMTohMH0sY29udGFpbnNCb3g6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubWluLng8PWEubWluLngmJmEubWF4Lng8PXRoaXMubWF4LngmJnRoaXMubWluLnk8PWEubWluLnkmJmEubWF4Lnk8PXRoaXMubWF4Lnk/ITA6ITF9LGdldFBhcmFtZXRlcjpmdW5jdGlvbihhLGIpe3JldHVybihifHxuZXcgVEhSRUUuVmVjdG9yMikuc2V0KChhLngtdGhpcy5taW4ueCkvKHRoaXMubWF4LngtdGhpcy5taW4ueCksXG4oYS55LXRoaXMubWluLnkpLyh0aGlzLm1heC55LXRoaXMubWluLnkpKX0saXNJbnRlcnNlY3Rpb25Cb3g6ZnVuY3Rpb24oYSl7cmV0dXJuIGEubWF4Lng8dGhpcy5taW4ueHx8YS5taW4ueD50aGlzLm1heC54fHxhLm1heC55PHRoaXMubWluLnl8fGEubWluLnk+dGhpcy5tYXgueT8hMTohMH0sY2xhbXBQb2ludDpmdW5jdGlvbihhLGIpe3JldHVybihifHxuZXcgVEhSRUUuVmVjdG9yMikuY29weShhKS5jbGFtcCh0aGlzLm1pbix0aGlzLm1heCl9LGRpc3RhbmNlVG9Qb2ludDpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IyO3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gYS5jb3B5KGIpLmNsYW1wKHRoaXMubWluLHRoaXMubWF4KS5zdWIoYikubGVuZ3RoKCl9fSgpLGludGVyc2VjdDpmdW5jdGlvbihhKXt0aGlzLm1pbi5tYXgoYS5taW4pO3RoaXMubWF4Lm1pbihhLm1heCk7cmV0dXJuIHRoaXN9LHVuaW9uOmZ1bmN0aW9uKGEpe3RoaXMubWluLm1pbihhLm1pbik7dGhpcy5tYXgubWF4KGEubWF4KTtcbnJldHVybiB0aGlzfSx0cmFuc2xhdGU6ZnVuY3Rpb24oYSl7dGhpcy5taW4uYWRkKGEpO3RoaXMubWF4LmFkZChhKTtyZXR1cm4gdGhpc30sZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiBhLm1pbi5lcXVhbHModGhpcy5taW4pJiZhLm1heC5lcXVhbHModGhpcy5tYXgpfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgVEhSRUUuQm94MikuY29weSh0aGlzKX19O1RIUkVFLkJveDM9ZnVuY3Rpb24oYSxiKXt0aGlzLm1pbj12b2lkIDAhPT1hP2E6bmV3IFRIUkVFLlZlY3RvcjMoSW5maW5pdHksSW5maW5pdHksSW5maW5pdHkpO3RoaXMubWF4PXZvaWQgMCE9PWI/YjpuZXcgVEhSRUUuVmVjdG9yMygtSW5maW5pdHksLUluZmluaXR5LC1JbmZpbml0eSl9O1xuVEhSRUUuQm94My5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLkJveDMsc2V0OmZ1bmN0aW9uKGEsYil7dGhpcy5taW4uY29weShhKTt0aGlzLm1heC5jb3B5KGIpO3JldHVybiB0aGlzfSxhZGRQb2ludDpmdW5jdGlvbihhKXthLng8dGhpcy5taW4ueD90aGlzLm1pbi54PWEueDphLng+dGhpcy5tYXgueCYmKHRoaXMubWF4Lng9YS54KTthLnk8dGhpcy5taW4ueT90aGlzLm1pbi55PWEueTphLnk+dGhpcy5tYXgueSYmKHRoaXMubWF4Lnk9YS55KTthLno8dGhpcy5taW4uej90aGlzLm1pbi56PWEuejphLno+dGhpcy5tYXgueiYmKHRoaXMubWF4Lno9YS56KX0sc2V0RnJvbVBvaW50czpmdW5jdGlvbihhKXtpZigwPGEubGVuZ3RoKXt2YXIgYj1hWzBdO3RoaXMubWluLmNvcHkoYik7dGhpcy5tYXguY29weShiKTtmb3IodmFyIGI9MSxjPWEubGVuZ3RoO2I8YztiKyspdGhpcy5hZGRQb2ludChhW2JdKX1lbHNlIHRoaXMubWFrZUVtcHR5KCk7cmV0dXJuIHRoaXN9LHNldEZyb21DZW50ZXJBbmRTaXplOmZ1bmN0aW9uKCl7dmFyIGE9XG5uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oYixjKXt2YXIgZD1hLmNvcHkoYykubXVsdGlwbHlTY2FsYXIoMC41KTt0aGlzLm1pbi5jb3B5KGIpLnN1YihkKTt0aGlzLm1heC5jb3B5KGIpLmFkZChkKTtyZXR1cm4gdGhpc319KCksc2V0RnJvbU9iamVjdDpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihiKXt2YXIgYz10aGlzO2IudXBkYXRlTWF0cml4V29ybGQoITApO3RoaXMubWFrZUVtcHR5KCk7Yi50cmF2ZXJzZShmdW5jdGlvbihiKXtpZih2b2lkIDAhPT1iLmdlb21ldHJ5JiZ2b2lkIDAhPT1iLmdlb21ldHJ5LnZlcnRpY2VzKWZvcih2YXIgZT1iLmdlb21ldHJ5LnZlcnRpY2VzLGY9MCxoPWUubGVuZ3RoO2Y8aDtmKyspYS5jb3B5KGVbZl0pLGEuYXBwbHlNYXRyaXg0KGIubWF0cml4V29ybGQpLGMuZXhwYW5kQnlQb2ludChhKX0pO3JldHVybiB0aGlzfX0oKSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMubWluLmNvcHkoYS5taW4pO1xudGhpcy5tYXguY29weShhLm1heCk7cmV0dXJuIHRoaXN9LG1ha2VFbXB0eTpmdW5jdGlvbigpe3RoaXMubWluLng9dGhpcy5taW4ueT10aGlzLm1pbi56PUluZmluaXR5O3RoaXMubWF4Lng9dGhpcy5tYXgueT10aGlzLm1heC56PS1JbmZpbml0eTtyZXR1cm4gdGhpc30sZW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXgueDx0aGlzLm1pbi54fHx0aGlzLm1heC55PHRoaXMubWluLnl8fHRoaXMubWF4Lno8dGhpcy5taW4uen0sY2VudGVyOmZ1bmN0aW9uKGEpe3JldHVybihhfHxuZXcgVEhSRUUuVmVjdG9yMykuYWRkVmVjdG9ycyh0aGlzLm1pbix0aGlzLm1heCkubXVsdGlwbHlTY2FsYXIoMC41KX0sc2l6ZTpmdW5jdGlvbihhKXtyZXR1cm4oYXx8bmV3IFRIUkVFLlZlY3RvcjMpLnN1YlZlY3RvcnModGhpcy5tYXgsdGhpcy5taW4pfSxleHBhbmRCeVBvaW50OmZ1bmN0aW9uKGEpe3RoaXMubWluLm1pbihhKTt0aGlzLm1heC5tYXgoYSk7cmV0dXJuIHRoaXN9LGV4cGFuZEJ5VmVjdG9yOmZ1bmN0aW9uKGEpe3RoaXMubWluLnN1YihhKTtcbnRoaXMubWF4LmFkZChhKTtyZXR1cm4gdGhpc30sZXhwYW5kQnlTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy5taW4uYWRkU2NhbGFyKC1hKTt0aGlzLm1heC5hZGRTY2FsYXIoYSk7cmV0dXJuIHRoaXN9LGNvbnRhaW5zUG9pbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEueDx0aGlzLm1pbi54fHxhLng+dGhpcy5tYXgueHx8YS55PHRoaXMubWluLnl8fGEueT50aGlzLm1heC55fHxhLno8dGhpcy5taW4uenx8YS56PnRoaXMubWF4Lno/ITE6ITB9LGNvbnRhaW5zQm94OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm1pbi54PD1hLm1pbi54JiZhLm1heC54PD10aGlzLm1heC54JiZ0aGlzLm1pbi55PD1hLm1pbi55JiZhLm1heC55PD10aGlzLm1heC55JiZ0aGlzLm1pbi56PD1hLm1pbi56JiZhLm1heC56PD10aGlzLm1heC56PyEwOiExfSxnZXRQYXJhbWV0ZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4oYnx8bmV3IFRIUkVFLlZlY3RvcjMpLnNldCgoYS54LXRoaXMubWluLngpLyh0aGlzLm1heC54LVxudGhpcy5taW4ueCksKGEueS10aGlzLm1pbi55KS8odGhpcy5tYXgueS10aGlzLm1pbi55KSwoYS56LXRoaXMubWluLnopLyh0aGlzLm1heC56LXRoaXMubWluLnopKX0saXNJbnRlcnNlY3Rpb25Cb3g6ZnVuY3Rpb24oYSl7cmV0dXJuIGEubWF4Lng8dGhpcy5taW4ueHx8YS5taW4ueD50aGlzLm1heC54fHxhLm1heC55PHRoaXMubWluLnl8fGEubWluLnk+dGhpcy5tYXgueXx8YS5tYXguejx0aGlzLm1pbi56fHxhLm1pbi56PnRoaXMubWF4Lno/ITE6ITB9LGNsYW1wUG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4oYnx8bmV3IFRIUkVFLlZlY3RvcjMpLmNvcHkoYSkuY2xhbXAodGhpcy5taW4sdGhpcy5tYXgpfSxkaXN0YW5jZVRvUG9pbnQ6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIGEuY29weShiKS5jbGFtcCh0aGlzLm1pbix0aGlzLm1heCkuc3ViKGIpLmxlbmd0aCgpfX0oKSxnZXRCb3VuZGluZ1NwaGVyZTpmdW5jdGlvbigpe3ZhciBhPVxubmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGIpe2I9Ynx8bmV3IFRIUkVFLlNwaGVyZTtiLmNlbnRlcj10aGlzLmNlbnRlcigpO2IucmFkaXVzPTAuNSp0aGlzLnNpemUoYSkubGVuZ3RoKCk7cmV0dXJuIGJ9fSgpLGludGVyc2VjdDpmdW5jdGlvbihhKXt0aGlzLm1pbi5tYXgoYS5taW4pO3RoaXMubWF4Lm1pbihhLm1heCk7cmV0dXJuIHRoaXN9LHVuaW9uOmZ1bmN0aW9uKGEpe3RoaXMubWluLm1pbihhLm1pbik7dGhpcy5tYXgubWF4KGEubWF4KTtyZXR1cm4gdGhpc30sYXBwbHlNYXRyaXg0OmZ1bmN0aW9uKCl7dmFyIGE9W25ldyBUSFJFRS5WZWN0b3IzLG5ldyBUSFJFRS5WZWN0b3IzLG5ldyBUSFJFRS5WZWN0b3IzLG5ldyBUSFJFRS5WZWN0b3IzLG5ldyBUSFJFRS5WZWN0b3IzLG5ldyBUSFJFRS5WZWN0b3IzLG5ldyBUSFJFRS5WZWN0b3IzLG5ldyBUSFJFRS5WZWN0b3IzXTtyZXR1cm4gZnVuY3Rpb24oYil7YVswXS5zZXQodGhpcy5taW4ueCx0aGlzLm1pbi55LFxudGhpcy5taW4ueikuYXBwbHlNYXRyaXg0KGIpO2FbMV0uc2V0KHRoaXMubWluLngsdGhpcy5taW4ueSx0aGlzLm1heC56KS5hcHBseU1hdHJpeDQoYik7YVsyXS5zZXQodGhpcy5taW4ueCx0aGlzLm1heC55LHRoaXMubWluLnopLmFwcGx5TWF0cml4NChiKTthWzNdLnNldCh0aGlzLm1pbi54LHRoaXMubWF4LnksdGhpcy5tYXgueikuYXBwbHlNYXRyaXg0KGIpO2FbNF0uc2V0KHRoaXMubWF4LngsdGhpcy5taW4ueSx0aGlzLm1pbi56KS5hcHBseU1hdHJpeDQoYik7YVs1XS5zZXQodGhpcy5tYXgueCx0aGlzLm1pbi55LHRoaXMubWF4LnopLmFwcGx5TWF0cml4NChiKTthWzZdLnNldCh0aGlzLm1heC54LHRoaXMubWF4LnksdGhpcy5taW4ueikuYXBwbHlNYXRyaXg0KGIpO2FbN10uc2V0KHRoaXMubWF4LngsdGhpcy5tYXgueSx0aGlzLm1heC56KS5hcHBseU1hdHJpeDQoYik7dGhpcy5tYWtlRW1wdHkoKTt0aGlzLnNldEZyb21Qb2ludHMoYSk7cmV0dXJuIHRoaXN9fSgpLHRyYW5zbGF0ZTpmdW5jdGlvbihhKXt0aGlzLm1pbi5hZGQoYSk7XG50aGlzLm1heC5hZGQoYSk7cmV0dXJuIHRoaXN9LGVxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gYS5taW4uZXF1YWxzKHRoaXMubWluKSYmYS5tYXguZXF1YWxzKHRoaXMubWF4KX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IFRIUkVFLkJveDMpLmNvcHkodGhpcyl9fTtUSFJFRS5NYXRyaXgzPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGgsZyxpKXt0aGlzLmVsZW1lbnRzPW5ldyBGbG9hdDMyQXJyYXkoOSk7dGhpcy5zZXQodm9pZCAwIT09YT9hOjEsYnx8MCxjfHwwLGR8fDAsdm9pZCAwIT09ZT9lOjEsZnx8MCxofHwwLGd8fDAsdm9pZCAwIT09aT9pOjEpfTtcblRIUkVFLk1hdHJpeDMucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5NYXRyaXgzLHNldDpmdW5jdGlvbihhLGIsYyxkLGUsZixoLGcsaSl7dmFyIGs9dGhpcy5lbGVtZW50cztrWzBdPWE7a1szXT1iO2tbNl09YztrWzFdPWQ7a1s0XT1lO2tbN109ZjtrWzJdPWg7a1s1XT1nO2tbOF09aTtyZXR1cm4gdGhpc30saWRlbnRpdHk6ZnVuY3Rpb24oKXt0aGlzLnNldCgxLDAsMCwwLDEsMCwwLDAsMSk7cmV0dXJuIHRoaXN9LGNvcHk6ZnVuY3Rpb24oYSl7YT1hLmVsZW1lbnRzO3RoaXMuc2V0KGFbMF0sYVszXSxhWzZdLGFbMV0sYVs0XSxhWzddLGFbMl0sYVs1XSxhWzhdKTtyZXR1cm4gdGhpc30sbXVsdGlwbHlWZWN0b3IzOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIkRFUFJFQ0FURUQ6IE1hdHJpeDMncyAubXVsdGlwbHlWZWN0b3IzKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIHZlY3Rvci5hcHBseU1hdHJpeDMoIG1hdHJpeCApIGluc3RlYWQuXCIpO3JldHVybiBhLmFwcGx5TWF0cml4Myh0aGlzKX0sXG5tdWx0aXBseVZlY3RvcjNBcnJheTpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihiKXtmb3IodmFyIGM9MCxkPWIubGVuZ3RoO2M8ZDtjKz0zKWEueD1iW2NdLGEueT1iW2MrMV0sYS56PWJbYysyXSxhLmFwcGx5TWF0cml4Myh0aGlzKSxiW2NdPWEueCxiW2MrMV09YS55LGJbYysyXT1hLno7cmV0dXJuIGJ9fSgpLG11bHRpcGx5U2NhbGFyOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZWxlbWVudHM7YlswXSo9YTtiWzNdKj1hO2JbNl0qPWE7YlsxXSo9YTtiWzRdKj1hO2JbN10qPWE7YlsyXSo9YTtiWzVdKj1hO2JbOF0qPWE7cmV0dXJuIHRoaXN9LGRldGVybWluYW50OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5lbGVtZW50cyxiPWFbMF0sYz1hWzFdLGQ9YVsyXSxlPWFbM10sZj1hWzRdLGg9YVs1XSxnPWFbNl0saT1hWzddLGE9YVs4XTtyZXR1cm4gYipmKmEtYipoKmktYyplKmErYypoKmcrZCplKmktZCpmKmd9LGdldEludmVyc2U6ZnVuY3Rpb24oYSxcbmIpe3ZhciBjPWEuZWxlbWVudHMsZD10aGlzLmVsZW1lbnRzO2RbMF09Y1sxMF0qY1s1XS1jWzZdKmNbOV07ZFsxXT0tY1sxMF0qY1sxXStjWzJdKmNbOV07ZFsyXT1jWzZdKmNbMV0tY1syXSpjWzVdO2RbM109LWNbMTBdKmNbNF0rY1s2XSpjWzhdO2RbNF09Y1sxMF0qY1swXS1jWzJdKmNbOF07ZFs1XT0tY1s2XSpjWzBdK2NbMl0qY1s0XTtkWzZdPWNbOV0qY1s0XS1jWzVdKmNbOF07ZFs3XT0tY1s5XSpjWzBdK2NbMV0qY1s4XTtkWzhdPWNbNV0qY1swXS1jWzFdKmNbNF07Yz1jWzBdKmRbMF0rY1sxXSpkWzNdK2NbMl0qZFs2XTtpZigwPT09Yyl7aWYoYil0aHJvdyBFcnJvcihcIk1hdHJpeDMuZ2V0SW52ZXJzZSgpOiBjYW4ndCBpbnZlcnQgbWF0cml4LCBkZXRlcm1pbmFudCBpcyAwXCIpO2NvbnNvbGUud2FybihcIk1hdHJpeDMuZ2V0SW52ZXJzZSgpOiBjYW4ndCBpbnZlcnQgbWF0cml4LCBkZXRlcm1pbmFudCBpcyAwXCIpO3RoaXMuaWRlbnRpdHkoKTtyZXR1cm4gdGhpc310aGlzLm11bHRpcGx5U2NhbGFyKDEvXG5jKTtyZXR1cm4gdGhpc30sdHJhbnNwb3NlOmZ1bmN0aW9uKCl7dmFyIGEsYj10aGlzLmVsZW1lbnRzO2E9YlsxXTtiWzFdPWJbM107YlszXT1hO2E9YlsyXTtiWzJdPWJbNl07Yls2XT1hO2E9Yls1XTtiWzVdPWJbN107Yls3XT1hO3JldHVybiB0aGlzfSxnZXROb3JtYWxNYXRyaXg6ZnVuY3Rpb24oYSl7dGhpcy5nZXRJbnZlcnNlKGEpLnRyYW5zcG9zZSgpO3JldHVybiB0aGlzfSx0cmFuc3Bvc2VJbnRvQXJyYXk6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5lbGVtZW50czthWzBdPWJbMF07YVsxXT1iWzNdO2FbMl09Yls2XTthWzNdPWJbMV07YVs0XT1iWzRdO2FbNV09Yls3XTthWzZdPWJbMl07YVs3XT1iWzVdO2FbOF09Yls4XTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVsZW1lbnRzO3JldHVybiBuZXcgVEhSRUUuTWF0cml4MyhhWzBdLGFbM10sYVs2XSxhWzFdLGFbNF0sYVs3XSxhWzJdLGFbNV0sYVs4XSl9fTtUSFJFRS5NYXRyaXg0PWZ1bmN0aW9uKGEsYixjLGQsZSxmLGgsZyxpLGssbSxsLHAsdCxzLHEpe3ZhciBuPXRoaXMuZWxlbWVudHM9bmV3IEZsb2F0MzJBcnJheSgxNik7blswXT12b2lkIDAhPT1hP2E6MTtuWzRdPWJ8fDA7bls4XT1jfHwwO25bMTJdPWR8fDA7blsxXT1lfHwwO25bNV09dm9pZCAwIT09Zj9mOjE7bls5XT1ofHwwO25bMTNdPWd8fDA7blsyXT1pfHwwO25bNl09a3x8MDtuWzEwXT12b2lkIDAhPT1tP206MTtuWzE0XT1sfHwwO25bM109cHx8MDtuWzddPXR8fDA7blsxMV09c3x8MDtuWzE1XT12b2lkIDAhPT1xP3E6MX07XG5USFJFRS5NYXRyaXg0LnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuTWF0cml4NCxzZXQ6ZnVuY3Rpb24oYSxiLGMsZCxlLGYsaCxnLGksayxtLGwscCx0LHMscSl7dmFyIG49dGhpcy5lbGVtZW50cztuWzBdPWE7bls0XT1iO25bOF09YztuWzEyXT1kO25bMV09ZTtuWzVdPWY7bls5XT1oO25bMTNdPWc7blsyXT1pO25bNl09aztuWzEwXT1tO25bMTRdPWw7blszXT1wO25bN109dDtuWzExXT1zO25bMTVdPXE7cmV0dXJuIHRoaXN9LGlkZW50aXR5OmZ1bmN0aW9uKCl7dGhpcy5zZXQoMSwwLDAsMCwwLDEsMCwwLDAsMCwxLDAsMCwwLDAsMSk7cmV0dXJuIHRoaXN9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5lbGVtZW50cy5zZXQoYS5lbGVtZW50cyk7cmV0dXJuIHRoaXN9LGV4dHJhY3RQb3NpdGlvbjpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEOiBNYXRyaXg0J3MgLmV4dHJhY3RQb3NpdGlvbigpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmNvcHlQb3NpdGlvbigpLlwiKTtcbnJldHVybiB0aGlzLmNvcHlQb3NpdGlvbihhKX0sY29weVBvc2l0aW9uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZWxlbWVudHMsYT1hLmVsZW1lbnRzO2JbMTJdPWFbMTJdO2JbMTNdPWFbMTNdO2JbMTRdPWFbMTRdO3JldHVybiB0aGlzfSxleHRyYWN0Um90YXRpb246ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGM9dGhpcy5lbGVtZW50cyxiPWIuZWxlbWVudHMsZD0xL2Euc2V0KGJbMF0sYlsxXSxiWzJdKS5sZW5ndGgoKSxlPTEvYS5zZXQoYls0XSxiWzVdLGJbNl0pLmxlbmd0aCgpLGY9MS9hLnNldChiWzhdLGJbOV0sYlsxMF0pLmxlbmd0aCgpO2NbMF09YlswXSpkO2NbMV09YlsxXSpkO2NbMl09YlsyXSpkO2NbNF09Yls0XSplO2NbNV09Yls1XSplO2NbNl09Yls2XSplO2NbOF09Yls4XSpmO2NbOV09Yls5XSpmO2NbMTBdPWJbMTBdKmY7cmV0dXJuIHRoaXN9fSgpLG1ha2VSb3RhdGlvbkZyb21FdWxlcjpmdW5jdGlvbihhKXshMT09PVxuYSBpbnN0YW5jZW9mIFRIUkVFLkV1bGVyJiZjb25zb2xlLmVycm9yKFwiRVJST1I6IE1hdHJpeCdzIC5tYWtlUm90YXRpb25Gcm9tRXVsZXIoKSBub3cgZXhwZWN0cyBhIEV1bGVyIHJvdGF0aW9uIHJhdGhlciB0aGFuIGEgVmVjdG9yMyBhbmQgb3JkZXIuICBQbGVhc2UgdXBkYXRlIHlvdXIgY29kZS5cIik7dmFyIGI9dGhpcy5lbGVtZW50cyxjPWEueCxkPWEueSxlPWEueixmPU1hdGguY29zKGMpLGM9TWF0aC5zaW4oYyksaD1NYXRoLmNvcyhkKSxkPU1hdGguc2luKGQpLGc9TWF0aC5jb3MoZSksZT1NYXRoLnNpbihlKTtpZihcIlhZWlwiPT09YS5vcmRlcil7dmFyIGE9ZipnLGk9ZiplLGs9YypnLG09YyplO2JbMF09aCpnO2JbNF09LWgqZTtiWzhdPWQ7YlsxXT1pK2sqZDtiWzVdPWEtbSpkO2JbOV09LWMqaDtiWzJdPW0tYSpkO2JbNl09aytpKmQ7YlsxMF09ZipofWVsc2VcIllYWlwiPT09YS5vcmRlcj8oYT1oKmcsaT1oKmUsaz1kKmcsbT1kKmUsYlswXT1hK20qYyxiWzRdPWsqYy1pLGJbOF09XG5mKmQsYlsxXT1mKmUsYls1XT1mKmcsYls5XT0tYyxiWzJdPWkqYy1rLGJbNl09bSthKmMsYlsxMF09ZipoKTpcIlpYWVwiPT09YS5vcmRlcj8oYT1oKmcsaT1oKmUsaz1kKmcsbT1kKmUsYlswXT1hLW0qYyxiWzRdPS1mKmUsYls4XT1rK2kqYyxiWzFdPWkraypjLGJbNV09ZipnLGJbOV09bS1hKmMsYlsyXT0tZipkLGJbNl09YyxiWzEwXT1mKmgpOlwiWllYXCI9PT1hLm9yZGVyPyhhPWYqZyxpPWYqZSxrPWMqZyxtPWMqZSxiWzBdPWgqZyxiWzRdPWsqZC1pLGJbOF09YSpkK20sYlsxXT1oKmUsYls1XT1tKmQrYSxiWzldPWkqZC1rLGJbMl09LWQsYls2XT1jKmgsYlsxMF09ZipoKTpcIllaWFwiPT09YS5vcmRlcj8oYT1mKmgsaT1mKmQsaz1jKmgsbT1jKmQsYlswXT1oKmcsYls0XT1tLWEqZSxiWzhdPWsqZStpLGJbMV09ZSxiWzVdPWYqZyxiWzldPS1jKmcsYlsyXT0tZCpnLGJbNl09aSplK2ssYlsxMF09YS1tKmUpOlwiWFpZXCI9PT1hLm9yZGVyJiYoYT1mKmgsaT1mKmQsaz1jKmgsbT1jKmQsYlswXT1cbmgqZyxiWzRdPS1lLGJbOF09ZCpnLGJbMV09YSplK20sYls1XT1mKmcsYls5XT1pKmUtayxiWzJdPWsqZS1pLGJbNl09YypnLGJbMTBdPW0qZSthKTtiWzNdPTA7Yls3XT0wO2JbMTFdPTA7YlsxMl09MDtiWzEzXT0wO2JbMTRdPTA7YlsxNV09MTtyZXR1cm4gdGhpc30sc2V0Um90YXRpb25Gcm9tUXVhdGVybmlvbjpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEOiBNYXRyaXg0J3MgLnNldFJvdGF0aW9uRnJvbVF1YXRlcm5pb24oKSBoYXMgYmVlbiBkZXByZWNhdGVkIGluIGZhdm9yIG9mIG1ha2VSb3RhdGlvbkZyb21RdWF0ZXJuaW9uLiAgUGxlYXNlIHVwZGF0ZSB5b3VyIGNvZGUuXCIpO3JldHVybiB0aGlzLm1ha2VSb3RhdGlvbkZyb21RdWF0ZXJuaW9uKGEpfSxtYWtlUm90YXRpb25Gcm9tUXVhdGVybmlvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmVsZW1lbnRzLGM9YS54LGQ9YS55LGU9YS56LGY9YS53LGg9YytjLGc9ZCtkLGk9ZStlLGE9YypoLGs9YypnLGM9XG5jKmksbT1kKmcsZD1kKmksZT1lKmksaD1mKmgsZz1mKmcsZj1mKmk7YlswXT0xLShtK2UpO2JbNF09ay1mO2JbOF09YytnO2JbMV09aytmO2JbNV09MS0oYStlKTtiWzldPWQtaDtiWzJdPWMtZztiWzZdPWQraDtiWzEwXT0xLShhK20pO2JbM109MDtiWzddPTA7YlsxMV09MDtiWzEyXT0wO2JbMTNdPTA7YlsxNF09MDtiWzE1XT0xO3JldHVybiB0aGlzfSxsb29rQXQ6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMyxiPW5ldyBUSFJFRS5WZWN0b3IzLGM9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGQsZSxmKXt2YXIgaD10aGlzLmVsZW1lbnRzO2Muc3ViVmVjdG9ycyhkLGUpLm5vcm1hbGl6ZSgpOzA9PT1jLmxlbmd0aCgpJiYoYy56PTEpO2EuY3Jvc3NWZWN0b3JzKGYsYykubm9ybWFsaXplKCk7MD09PWEubGVuZ3RoKCkmJihjLngrPTFFLTQsYS5jcm9zc1ZlY3RvcnMoZixjKS5ub3JtYWxpemUoKSk7Yi5jcm9zc1ZlY3RvcnMoYyxhKTtoWzBdPWEueDtcbmhbNF09Yi54O2hbOF09Yy54O2hbMV09YS55O2hbNV09Yi55O2hbOV09Yy55O2hbMl09YS56O2hbNl09Yi56O2hbMTBdPWMuejtyZXR1cm4gdGhpc319KCksbXVsdGlwbHk6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdm9pZCAwIT09Yj8oY29uc29sZS53YXJuKFwiREVQUkVDQVRFRDogTWF0cml4NCdzIC5tdWx0aXBseSgpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLm11bHRpcGx5TWF0cmljZXMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLm11bHRpcGx5TWF0cmljZXMoYSxiKSk6dGhpcy5tdWx0aXBseU1hdHJpY2VzKHRoaXMsYSl9LG11bHRpcGx5TWF0cmljZXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmVsZW1lbnRzLGQ9Yi5lbGVtZW50cyxlPXRoaXMuZWxlbWVudHMsZj1jWzBdLGg9Y1s0XSxnPWNbOF0saT1jWzEyXSxrPWNbMV0sbT1jWzVdLGw9Y1s5XSxwPWNbMTNdLHQ9Y1syXSxzPWNbNl0scT1jWzEwXSxuPWNbMTRdLHU9Y1szXSxyPWNbN10sdj1jWzExXSxjPWNbMTVdLFxuej1kWzBdLEc9ZFs0XSx3PWRbOF0seT1kWzEyXSxFPWRbMV0sQT1kWzVdLEs9ZFs5XSxEPWRbMTNdLEY9ZFsyXSxPPWRbNl0seD1kWzEwXSxJPWRbMTRdLEI9ZFszXSxNPWRbN10sSj1kWzExXSxkPWRbMTVdO2VbMF09Zip6K2gqRStnKkYraSpCO2VbNF09ZipHK2gqQStnKk8raSpNO2VbOF09Zip3K2gqSytnKngraSpKO2VbMTJdPWYqeStoKkQrZypJK2kqZDtlWzFdPWsqeittKkUrbCpGK3AqQjtlWzVdPWsqRyttKkErbCpPK3AqTTtlWzldPWsqdyttKksrbCp4K3AqSjtlWzEzXT1rKnkrbSpEK2wqSStwKmQ7ZVsyXT10KnorcypFK3EqRituKkI7ZVs2XT10KkcrcypBK3EqTytuKk07ZVsxMF09dCp3K3MqSytxKngrbipKO2VbMTRdPXQqeStzKkQrcSpJK24qZDtlWzNdPXUqeityKkUrdipGK2MqQjtlWzddPXUqRytyKkErdipPK2MqTTtlWzExXT11KncrcipLK3YqeCtjKko7ZVsxNV09dSp5K3IqRCt2KkkrYypkO3JldHVybiB0aGlzfSxtdWx0aXBseVRvQXJyYXk6ZnVuY3Rpb24oYSxiLFxuYyl7dmFyIGQ9dGhpcy5lbGVtZW50czt0aGlzLm11bHRpcGx5TWF0cmljZXMoYSxiKTtjWzBdPWRbMF07Y1sxXT1kWzFdO2NbMl09ZFsyXTtjWzNdPWRbM107Y1s0XT1kWzRdO2NbNV09ZFs1XTtjWzZdPWRbNl07Y1s3XT1kWzddO2NbOF09ZFs4XTtjWzldPWRbOV07Y1sxMF09ZFsxMF07Y1sxMV09ZFsxMV07Y1sxMl09ZFsxMl07Y1sxM109ZFsxM107Y1sxNF09ZFsxNF07Y1sxNV09ZFsxNV07cmV0dXJuIHRoaXN9LG11bHRpcGx5U2NhbGFyOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZWxlbWVudHM7YlswXSo9YTtiWzRdKj1hO2JbOF0qPWE7YlsxMl0qPWE7YlsxXSo9YTtiWzVdKj1hO2JbOV0qPWE7YlsxM10qPWE7YlsyXSo9YTtiWzZdKj1hO2JbMTBdKj1hO2JbMTRdKj1hO2JbM10qPWE7Yls3XSo9YTtiWzExXSo9YTtiWzE1XSo9YTtyZXR1cm4gdGhpc30sbXVsdGlwbHlWZWN0b3IzOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIkRFUFJFQ0FURUQ6IE1hdHJpeDQncyAubXVsdGlwbHlWZWN0b3IzKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIHZlY3Rvci5hcHBseU1hdHJpeDQoIG1hdHJpeCApIG9yIHZlY3Rvci5hcHBseVByb2plY3Rpb24oIG1hdHJpeCApIGluc3RlYWQuXCIpO1xucmV0dXJuIGEuYXBwbHlQcm9qZWN0aW9uKHRoaXMpfSxtdWx0aXBseVZlY3RvcjQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiREVQUkVDQVRFRDogTWF0cml4NCdzIC5tdWx0aXBseVZlY3RvcjQoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgdmVjdG9yLmFwcGx5TWF0cml4NCggbWF0cml4ICkgaW5zdGVhZC5cIik7cmV0dXJuIGEuYXBwbHlNYXRyaXg0KHRoaXMpfSxtdWx0aXBseVZlY3RvcjNBcnJheTpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihiKXtmb3IodmFyIGM9MCxkPWIubGVuZ3RoO2M8ZDtjKz0zKWEueD1iW2NdLGEueT1iW2MrMV0sYS56PWJbYysyXSxhLmFwcGx5UHJvamVjdGlvbih0aGlzKSxiW2NdPWEueCxiW2MrMV09YS55LGJbYysyXT1hLno7cmV0dXJuIGJ9fSgpLHJvdGF0ZUF4aXM6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiREVQUkVDQVRFRDogTWF0cml4NCdzIC5yb3RhdGVBeGlzKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIFZlY3RvcjMudHJhbnNmb3JtRGlyZWN0aW9uKCBtYXRyaXggKSBpbnN0ZWFkLlwiKTtcbmEudHJhbnNmb3JtRGlyZWN0aW9uKHRoaXMpfSxjcm9zc1ZlY3RvcjpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEOiBNYXRyaXg0J3MgLmNyb3NzVmVjdG9yKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIHZlY3Rvci5hcHBseU1hdHJpeDQoIG1hdHJpeCApIGluc3RlYWQuXCIpO3JldHVybiBhLmFwcGx5TWF0cml4NCh0aGlzKX0sZGV0ZXJtaW5hbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVsZW1lbnRzLGI9YVswXSxjPWFbNF0sZD1hWzhdLGU9YVsxMl0sZj1hWzFdLGg9YVs1XSxnPWFbOV0saT1hWzEzXSxrPWFbMl0sbT1hWzZdLGw9YVsxMF0scD1hWzE0XTtyZXR1cm4gYVszXSooK2UqZyptLWQqaSptLWUqaCpsK2MqaSpsK2QqaCpwLWMqZypwKSthWzddKigrYipnKnAtYippKmwrZSpmKmwtZCpmKnArZCppKmstZSpnKmspK2FbMTFdKigrYippKm0tYipoKnAtZSpmKm0rYypmKnArZSpoKmstYyppKmspK2FbMTVdKigtZCpoKmstYipnKm0rYipoKmwrZCpmKm0tYypmKlxubCtjKmcqayl9LHRyYW5zcG9zZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZWxlbWVudHMsYjtiPWFbMV07YVsxXT1hWzRdO2FbNF09YjtiPWFbMl07YVsyXT1hWzhdO2FbOF09YjtiPWFbNl07YVs2XT1hWzldO2FbOV09YjtiPWFbM107YVszXT1hWzEyXTthWzEyXT1iO2I9YVs3XTthWzddPWFbMTNdO2FbMTNdPWI7Yj1hWzExXTthWzExXT1hWzE0XTthWzE0XT1iO3JldHVybiB0aGlzfSxmbGF0dGVuVG9BcnJheTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmVsZW1lbnRzO2FbMF09YlswXTthWzFdPWJbMV07YVsyXT1iWzJdO2FbM109YlszXTthWzRdPWJbNF07YVs1XT1iWzVdO2FbNl09Yls2XTthWzddPWJbN107YVs4XT1iWzhdO2FbOV09Yls5XTthWzEwXT1iWzEwXTthWzExXT1iWzExXTthWzEyXT1iWzEyXTthWzEzXT1iWzEzXTthWzE0XT1iWzE0XTthWzE1XT1iWzE1XTtyZXR1cm4gYX0sZmxhdHRlblRvQXJyYXlPZmZzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmVsZW1lbnRzO1xuYVtiXT1jWzBdO2FbYisxXT1jWzFdO2FbYisyXT1jWzJdO2FbYiszXT1jWzNdO2FbYis0XT1jWzRdO2FbYis1XT1jWzVdO2FbYis2XT1jWzZdO2FbYis3XT1jWzddO2FbYis4XT1jWzhdO2FbYis5XT1jWzldO2FbYisxMF09Y1sxMF07YVtiKzExXT1jWzExXTthW2IrMTJdPWNbMTJdO2FbYisxM109Y1sxM107YVtiKzE0XT1jWzE0XTthW2IrMTVdPWNbMTVdO3JldHVybiBhfSxnZXRQb3NpdGlvbjpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIkRFUFJFQ0FURUQ6IE1hdHJpeDQncyAuZ2V0UG9zaXRpb24oKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgVmVjdG9yMy5zZXRGcm9tTWF0cml4UG9zaXRpb24oIG1hdHJpeCApIGluc3RlYWQuXCIpO3ZhciBiPXRoaXMuZWxlbWVudHM7cmV0dXJuIGEuc2V0KGJbMTJdLGJbMTNdLGJbMTRdKX19KCksc2V0UG9zaXRpb246ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5lbGVtZW50cztcbmJbMTJdPWEueDtiWzEzXT1hLnk7YlsxNF09YS56O3JldHVybiB0aGlzfSxnZXRJbnZlcnNlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5lbGVtZW50cyxkPWEuZWxlbWVudHMsZT1kWzBdLGY9ZFs0XSxoPWRbOF0sZz1kWzEyXSxpPWRbMV0saz1kWzVdLG09ZFs5XSxsPWRbMTNdLHA9ZFsyXSx0PWRbNl0scz1kWzEwXSxxPWRbMTRdLG49ZFszXSx1PWRbN10scj1kWzExXSxkPWRbMTVdO2NbMF09bSpxKnUtbCpzKnUrbCp0KnItaypxKnItbSp0KmQraypzKmQ7Y1s0XT1nKnMqdS1oKnEqdS1nKnQqcitmKnEqcitoKnQqZC1mKnMqZDtjWzhdPWgqbCp1LWcqbSp1K2cqaypyLWYqbCpyLWgqaypkK2YqbSpkO2NbMTJdPWcqbSp0LWgqbCp0LWcqaypzK2YqbCpzK2gqaypxLWYqbSpxO2NbMV09bCpzKm4tbSpxKm4tbCpwKnIraSpxKnIrbSpwKmQtaSpzKmQ7Y1s1XT1oKnEqbi1nKnMqbitnKnAqci1lKnEqci1oKnAqZCtlKnMqZDtjWzldPWcqbSpuLWgqbCpuLWcqaSpyK2UqbCpyK2gqaSpkLVxuZSptKmQ7Y1sxM109aCpsKnAtZyptKnArZyppKnMtZSpsKnMtaCppKnErZSptKnE7Y1syXT1rKnEqbi1sKnQqbitsKnAqdS1pKnEqdS1rKnAqZCtpKnQqZDtjWzZdPWcqdCpuLWYqcSpuLWcqcCp1K2UqcSp1K2YqcCpkLWUqdCpkO2NbMTBdPWYqbCpuLWcqaypuK2cqaSp1LWUqbCp1LWYqaSpkK2UqaypkO2NbMTRdPWcqaypwLWYqbCpwLWcqaSp0K2UqbCp0K2YqaSpxLWUqaypxO2NbM109bSp0Km4taypzKm4tbSpwKnUraSpzKnUraypwKnItaSp0KnI7Y1s3XT1mKnMqbi1oKnQqbitoKnAqdS1lKnMqdS1mKnAqcitlKnQqcjtjWzExXT1oKmsqbi1mKm0qbi1oKmkqdStlKm0qdStmKmkqci1lKmsqcjtjWzE1XT1mKm0qcC1oKmsqcCtoKmkqdC1lKm0qdC1mKmkqcytlKmsqcztjPWUqY1swXStpKmNbNF0rcCpjWzhdK24qY1sxMl07aWYoMD09Yyl7aWYoYil0aHJvdyBFcnJvcihcIk1hdHJpeDQuZ2V0SW52ZXJzZSgpOiBjYW4ndCBpbnZlcnQgbWF0cml4LCBkZXRlcm1pbmFudCBpcyAwXCIpO2NvbnNvbGUud2FybihcIk1hdHJpeDQuZ2V0SW52ZXJzZSgpOiBjYW4ndCBpbnZlcnQgbWF0cml4LCBkZXRlcm1pbmFudCBpcyAwXCIpO1xudGhpcy5pZGVudGl0eSgpO3JldHVybiB0aGlzfXRoaXMubXVsdGlwbHlTY2FsYXIoMS9jKTtyZXR1cm4gdGhpc30sdHJhbnNsYXRlOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiREVQUkVDQVRFRDogTWF0cml4NCdzIC50cmFuc2xhdGUoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0scm90YXRlWDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIkRFUFJFQ0FURUQ6IE1hdHJpeDQncyAucm90YXRlWCgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxyb3RhdGVZOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiREVQUkVDQVRFRDogTWF0cml4NCdzIC5yb3RhdGVZKCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LHJvdGF0ZVo6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEOiBNYXRyaXg0J3MgLnJvdGF0ZVooKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0scm90YXRlQnlBeGlzOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiREVQUkVDQVRFRDogTWF0cml4NCdzIC5yb3RhdGVCeUF4aXMoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sXG5zY2FsZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmVsZW1lbnRzLGM9YS54LGQ9YS55LGE9YS56O2JbMF0qPWM7Yls0XSo9ZDtiWzhdKj1hO2JbMV0qPWM7Yls1XSo9ZDtiWzldKj1hO2JbMl0qPWM7Yls2XSo9ZDtiWzEwXSo9YTtiWzNdKj1jO2JbN10qPWQ7YlsxMV0qPWE7cmV0dXJuIHRoaXN9LGdldE1heFNjYWxlT25BeGlzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5lbGVtZW50cztyZXR1cm4gTWF0aC5zcXJ0KE1hdGgubWF4KGFbMF0qYVswXSthWzFdKmFbMV0rYVsyXSphWzJdLE1hdGgubWF4KGFbNF0qYVs0XSthWzVdKmFbNV0rYVs2XSphWzZdLGFbOF0qYVs4XSthWzldKmFbOV0rYVsxMF0qYVsxMF0pKSl9LG1ha2VUcmFuc2xhdGlvbjpmdW5jdGlvbihhLGIsYyl7dGhpcy5zZXQoMSwwLDAsYSwwLDEsMCxiLDAsMCwxLGMsMCwwLDAsMSk7cmV0dXJuIHRoaXN9LG1ha2VSb3RhdGlvblg6ZnVuY3Rpb24oYSl7dmFyIGI9TWF0aC5jb3MoYSksYT1NYXRoLnNpbihhKTt0aGlzLnNldCgxLFxuMCwwLDAsMCxiLC1hLDAsMCxhLGIsMCwwLDAsMCwxKTtyZXR1cm4gdGhpc30sbWFrZVJvdGF0aW9uWTpmdW5jdGlvbihhKXt2YXIgYj1NYXRoLmNvcyhhKSxhPU1hdGguc2luKGEpO3RoaXMuc2V0KGIsMCxhLDAsMCwxLDAsMCwtYSwwLGIsMCwwLDAsMCwxKTtyZXR1cm4gdGhpc30sbWFrZVJvdGF0aW9uWjpmdW5jdGlvbihhKXt2YXIgYj1NYXRoLmNvcyhhKSxhPU1hdGguc2luKGEpO3RoaXMuc2V0KGIsLWEsMCwwLGEsYiwwLDAsMCwwLDEsMCwwLDAsMCwxKTtyZXR1cm4gdGhpc30sbWFrZVJvdGF0aW9uQXhpczpmdW5jdGlvbihhLGIpe3ZhciBjPU1hdGguY29zKGIpLGQ9TWF0aC5zaW4oYiksZT0xLWMsZj1hLngsaD1hLnksZz1hLnosaT1lKmYsaz1lKmg7dGhpcy5zZXQoaSpmK2MsaSpoLWQqZyxpKmcrZCpoLDAsaSpoK2QqZyxrKmgrYyxrKmctZCpmLDAsaSpnLWQqaCxrKmcrZCpmLGUqZypnK2MsMCwwLDAsMCwxKTtyZXR1cm4gdGhpc30sbWFrZVNjYWxlOmZ1bmN0aW9uKGEsYixjKXt0aGlzLnNldChhLFxuMCwwLDAsMCxiLDAsMCwwLDAsYywwLDAsMCwwLDEpO3JldHVybiB0aGlzfSxjb21wb3NlOmZ1bmN0aW9uKGEsYixjKXt0aGlzLm1ha2VSb3RhdGlvbkZyb21RdWF0ZXJuaW9uKGIpO3RoaXMuc2NhbGUoYyk7dGhpcy5zZXRQb3NpdGlvbihhKTtyZXR1cm4gdGhpc30sZGVjb21wb3NlOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjMsYj1uZXcgVEhSRUUuTWF0cml4NDtyZXR1cm4gZnVuY3Rpb24oYyxkLGUpe3ZhciBmPXRoaXMuZWxlbWVudHMsaD1hLnNldChmWzBdLGZbMV0sZlsyXSkubGVuZ3RoKCksZz1hLnNldChmWzRdLGZbNV0sZls2XSkubGVuZ3RoKCksaT1hLnNldChmWzhdLGZbOV0sZlsxMF0pLmxlbmd0aCgpO2MueD1mWzEyXTtjLnk9ZlsxM107Yy56PWZbMTRdO2IuZWxlbWVudHMuc2V0KHRoaXMuZWxlbWVudHMpO3ZhciBjPTEvaCxmPTEvZyxrPTEvaTtiLmVsZW1lbnRzWzBdKj1jO2IuZWxlbWVudHNbMV0qPWM7Yi5lbGVtZW50c1syXSo9YztiLmVsZW1lbnRzWzRdKj1cbmY7Yi5lbGVtZW50c1s1XSo9ZjtiLmVsZW1lbnRzWzZdKj1mO2IuZWxlbWVudHNbOF0qPWs7Yi5lbGVtZW50c1s5XSo9aztiLmVsZW1lbnRzWzEwXSo9aztkLnNldEZyb21Sb3RhdGlvbk1hdHJpeChiKTtlLng9aDtlLnk9ZztlLno9aTtyZXR1cm4gdGhpc319KCksbWFrZUZydXN0dW06ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3ZhciBoPXRoaXMuZWxlbWVudHM7aFswXT0yKmUvKGItYSk7aFs0XT0wO2hbOF09KGIrYSkvKGItYSk7aFsxMl09MDtoWzFdPTA7aFs1XT0yKmUvKGQtYyk7aFs5XT0oZCtjKS8oZC1jKTtoWzEzXT0wO2hbMl09MDtoWzZdPTA7aFsxMF09LShmK2UpLyhmLWUpO2hbMTRdPS0yKmYqZS8oZi1lKTtoWzNdPTA7aFs3XT0wO2hbMTFdPS0xO2hbMTVdPTA7cmV0dXJuIHRoaXN9LG1ha2VQZXJzcGVjdGl2ZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgYT1jKk1hdGgudGFuKFRIUkVFLk1hdGguZGVnVG9SYWQoMC41KmEpKSxlPS1hO3JldHVybiB0aGlzLm1ha2VGcnVzdHVtKGUqXG5iLGEqYixlLGEsYyxkKX0sbWFrZU9ydGhvZ3JhcGhpYzpmdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGg9dGhpcy5lbGVtZW50cyxnPWItYSxpPWMtZCxrPWYtZTtoWzBdPTIvZztoWzRdPTA7aFs4XT0wO2hbMTJdPS0oKGIrYSkvZyk7aFsxXT0wO2hbNV09Mi9pO2hbOV09MDtoWzEzXT0tKChjK2QpL2kpO2hbMl09MDtoWzZdPTA7aFsxMF09LTIvaztoWzE0XT0tKChmK2UpL2spO2hbM109MDtoWzddPTA7aFsxMV09MDtoWzE1XT0xO3JldHVybiB0aGlzfSxmcm9tQXJyYXk6ZnVuY3Rpb24oYSl7dGhpcy5lbGVtZW50cy5zZXQoYSk7cmV0dXJuIHRoaXN9LHRvQXJyYXk6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVsZW1lbnRzO3JldHVyblthWzBdLGFbMV0sYVsyXSxhWzNdLGFbNF0sYVs1XSxhWzZdLGFbN10sYVs4XSxhWzldLGFbMTBdLGFbMTFdLGFbMTJdLGFbMTNdLGFbMTRdLGFbMTVdXX0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVsZW1lbnRzO3JldHVybiBuZXcgVEhSRUUuTWF0cml4NChhWzBdLFxuYVs0XSxhWzhdLGFbMTJdLGFbMV0sYVs1XSxhWzldLGFbMTNdLGFbMl0sYVs2XSxhWzEwXSxhWzE0XSxhWzNdLGFbN10sYVsxMV0sYVsxNV0pfX07VEhSRUUuUmF5PWZ1bmN0aW9uKGEsYil7dGhpcy5vcmlnaW49dm9pZCAwIT09YT9hOm5ldyBUSFJFRS5WZWN0b3IzO3RoaXMuZGlyZWN0aW9uPXZvaWQgMCE9PWI/YjpuZXcgVEhSRUUuVmVjdG9yM307XG5USFJFRS5SYXkucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5SYXksc2V0OmZ1bmN0aW9uKGEsYil7dGhpcy5vcmlnaW4uY29weShhKTt0aGlzLmRpcmVjdGlvbi5jb3B5KGIpO3JldHVybiB0aGlzfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMub3JpZ2luLmNvcHkoYS5vcmlnaW4pO3RoaXMuZGlyZWN0aW9uLmNvcHkoYS5kaXJlY3Rpb24pO3JldHVybiB0aGlzfSxhdDpmdW5jdGlvbihhLGIpe3JldHVybihifHxuZXcgVEhSRUUuVmVjdG9yMykuY29weSh0aGlzLmRpcmVjdGlvbikubXVsdGlwbHlTY2FsYXIoYSkuYWRkKHRoaXMub3JpZ2luKX0scmVjYXN0OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGIpe3RoaXMub3JpZ2luLmNvcHkodGhpcy5hdChiLGEpKTtyZXR1cm4gdGhpc319KCksY2xvc2VzdFBvaW50VG9Qb2ludDpmdW5jdGlvbihhLGIpe3ZhciBjPWJ8fG5ldyBUSFJFRS5WZWN0b3IzO2Muc3ViVmVjdG9ycyhhLHRoaXMub3JpZ2luKTtcbnZhciBkPWMuZG90KHRoaXMuZGlyZWN0aW9uKTtyZXR1cm4gMD5kP2MuY29weSh0aGlzLm9yaWdpbik6Yy5jb3B5KHRoaXMuZGlyZWN0aW9uKS5tdWx0aXBseVNjYWxhcihkKS5hZGQodGhpcy5vcmlnaW4pfSxkaXN0YW5jZVRvUG9pbnQ6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGM9YS5zdWJWZWN0b3JzKGIsdGhpcy5vcmlnaW4pLmRvdCh0aGlzLmRpcmVjdGlvbik7aWYoMD5jKXJldHVybiB0aGlzLm9yaWdpbi5kaXN0YW5jZVRvKGIpO2EuY29weSh0aGlzLmRpcmVjdGlvbikubXVsdGlwbHlTY2FsYXIoYykuYWRkKHRoaXMub3JpZ2luKTtyZXR1cm4gYS5kaXN0YW5jZVRvKGIpfX0oKSxkaXN0YW5jZVNxVG9TZWdtZW50OmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWEuY2xvbmUoKS5hZGQoYikubXVsdGlwbHlTY2FsYXIoMC41KSxmPWIuY2xvbmUoKS5zdWIoYSkubm9ybWFsaXplKCksaD0wLjUqYS5kaXN0YW5jZVRvKGIpLFxuZz10aGlzLm9yaWdpbi5jbG9uZSgpLnN1YihlKSxhPS10aGlzLmRpcmVjdGlvbi5kb3QoZiksYj1nLmRvdCh0aGlzLmRpcmVjdGlvbiksaT0tZy5kb3QoZiksaz1nLmxlbmd0aFNxKCksbT1NYXRoLmFicygxLWEqYSksbCxwOzA8PW0/KGc9YSppLWIsbD1hKmItaSxwPWgqbSwwPD1nP2w+PS1wP2w8PXA/KGg9MS9tLGcqPWgsbCo9aCxhPWcqKGcrYSpsKzIqYikrbCooYSpnK2wrMippKStrKToobD1oLGc9TWF0aC5tYXgoMCwtKGEqbCtiKSksYT0tZypnK2wqKGwrMippKStrKToobD0taCxnPU1hdGgubWF4KDAsLShhKmwrYikpLGE9LWcqZytsKihsKzIqaSkrayk6bDw9LXA/KGc9TWF0aC5tYXgoMCwtKC1hKmgrYikpLGw9MDxnPy1oOk1hdGgubWluKE1hdGgubWF4KC1oLC1pKSxoKSxhPS1nKmcrbCoobCsyKmkpK2spOmw8PXA/KGc9MCxsPU1hdGgubWluKE1hdGgubWF4KC1oLC1pKSxoKSxhPWwqKGwrMippKStrKTooZz1NYXRoLm1heCgwLC0oYSpoK2IpKSxsPTA8Zz9oOk1hdGgubWluKE1hdGgubWF4KC1oLFxuLWkpLGgpLGE9LWcqZytsKihsKzIqaSkraykpOihsPTA8YT8taDpoLGc9TWF0aC5tYXgoMCwtKGEqbCtiKSksYT0tZypnK2wqKGwrMippKStrKTtjJiZjLmNvcHkodGhpcy5kaXJlY3Rpb24uY2xvbmUoKS5tdWx0aXBseVNjYWxhcihnKS5hZGQodGhpcy5vcmlnaW4pKTtkJiZkLmNvcHkoZi5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKGwpLmFkZChlKSk7cmV0dXJuIGF9LGlzSW50ZXJzZWN0aW9uU3BoZXJlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRpc3RhbmNlVG9Qb2ludChhLmNlbnRlcik8PWEucmFkaXVzfSxpc0ludGVyc2VjdGlvblBsYW5lOmZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzdGFuY2VUb1BvaW50KHRoaXMub3JpZ2luKTtyZXR1cm4gMD09PWJ8fDA+YS5ub3JtYWwuZG90KHRoaXMuZGlyZWN0aW9uKSpiPyEwOiExfSxkaXN0YW5jZVRvUGxhbmU6ZnVuY3Rpb24oYSl7dmFyIGI9YS5ub3JtYWwuZG90KHRoaXMuZGlyZWN0aW9uKTtpZigwPT1iKXJldHVybiAwPT1hLmRpc3RhbmNlVG9Qb2ludCh0aGlzLm9yaWdpbik/XG4wOm51bGw7YT0tKHRoaXMub3JpZ2luLmRvdChhLm5vcm1hbCkrYS5jb25zdGFudCkvYjtyZXR1cm4gMDw9YT9hOm51bGx9LGludGVyc2VjdFBsYW5lOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5kaXN0YW5jZVRvUGxhbmUoYSk7cmV0dXJuIG51bGw9PT1jP251bGw6dGhpcy5hdChjLGIpfSxpc0ludGVyc2VjdGlvbkJveDpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gbnVsbCE9PXRoaXMuaW50ZXJzZWN0Qm94KGIsYSl9fSgpLGludGVyc2VjdEJveDpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmLGg7ZD0xL3RoaXMuZGlyZWN0aW9uLng7Zj0xL3RoaXMuZGlyZWN0aW9uLnk7aD0xL3RoaXMuZGlyZWN0aW9uLno7dmFyIGc9dGhpcy5vcmlnaW47MDw9ZD8oYz0oYS5taW4ueC1nLngpKmQsZCo9YS5tYXgueC1nLngpOihjPShhLm1heC54LWcueCkqZCxkKj1hLm1pbi54LWcueCk7MDw9Zj8oZT0oYS5taW4ueS1nLnkpKmYsZio9XG5hLm1heC55LWcueSk6KGU9KGEubWF4LnktZy55KSpmLGYqPWEubWluLnktZy55KTtpZihjPmZ8fGU+ZClyZXR1cm4gbnVsbDtpZihlPmN8fGMhPT1jKWM9ZTtpZihmPGR8fGQhPT1kKWQ9ZjswPD1oPyhlPShhLm1pbi56LWcueikqaCxoKj1hLm1heC56LWcueik6KGU9KGEubWF4LnotZy56KSpoLGgqPWEubWluLnotZy56KTtpZihjPmh8fGU+ZClyZXR1cm4gbnVsbDtpZihlPmN8fGMhPT1jKWM9ZTtpZihoPGR8fGQhPT1kKWQ9aDtyZXR1cm4gMD5kP251bGw6dGhpcy5hdCgwPD1jP2M6ZCxiKX0saW50ZXJzZWN0VHJpYW5nbGU6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMyxiPW5ldyBUSFJFRS5WZWN0b3IzLGM9bmV3IFRIUkVFLlZlY3RvcjMsZD1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oZSxmLGgsZyxpKXtiLnN1YlZlY3RvcnMoZixlKTtjLnN1YlZlY3RvcnMoaCxlKTtkLmNyb3NzVmVjdG9ycyhiLGMpO2Y9dGhpcy5kaXJlY3Rpb24uZG90KGQpO2lmKDA8XG5mKXtpZihnKXJldHVybiBudWxsO2c9MX1lbHNlIGlmKDA+ZilnPS0xLGY9LWY7ZWxzZSByZXR1cm4gbnVsbDthLnN1YlZlY3RvcnModGhpcy5vcmlnaW4sZSk7ZT1nKnRoaXMuZGlyZWN0aW9uLmRvdChjLmNyb3NzVmVjdG9ycyhhLGMpKTtpZigwPmUpcmV0dXJuIG51bGw7aD1nKnRoaXMuZGlyZWN0aW9uLmRvdChiLmNyb3NzKGEpKTtpZigwPmh8fGUraD5mKXJldHVybiBudWxsO2U9LWcqYS5kb3QoZCk7cmV0dXJuIDA+ZT9udWxsOnRoaXMuYXQoZS9mLGkpfX0oKSxhcHBseU1hdHJpeDQ6ZnVuY3Rpb24oYSl7dGhpcy5kaXJlY3Rpb24uYWRkKHRoaXMub3JpZ2luKS5hcHBseU1hdHJpeDQoYSk7dGhpcy5vcmlnaW4uYXBwbHlNYXRyaXg0KGEpO3RoaXMuZGlyZWN0aW9uLnN1Yih0aGlzLm9yaWdpbik7dGhpcy5kaXJlY3Rpb24ubm9ybWFsaXplKCk7cmV0dXJuIHRoaXN9LGVxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gYS5vcmlnaW4uZXF1YWxzKHRoaXMub3JpZ2luKSYmYS5kaXJlY3Rpb24uZXF1YWxzKHRoaXMuZGlyZWN0aW9uKX0sXG5jbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgVEhSRUUuUmF5KS5jb3B5KHRoaXMpfX07VEhSRUUuU3BoZXJlPWZ1bmN0aW9uKGEsYil7dGhpcy5jZW50ZXI9dm9pZCAwIT09YT9hOm5ldyBUSFJFRS5WZWN0b3IzO3RoaXMucmFkaXVzPXZvaWQgMCE9PWI/YjowfTtcblRIUkVFLlNwaGVyZS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLlNwaGVyZSxzZXQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmNlbnRlci5jb3B5KGEpO3RoaXMucmFkaXVzPWI7cmV0dXJuIHRoaXN9LHNldEZyb21Qb2ludHM6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuQm94MztyZXR1cm4gZnVuY3Rpb24oYixjKXt2YXIgZD10aGlzLmNlbnRlcjt2b2lkIDAhPT1jP2QuY29weShjKTphLnNldEZyb21Qb2ludHMoYikuY2VudGVyKGQpO2Zvcih2YXIgZT0wLGY9MCxoPWIubGVuZ3RoO2Y8aDtmKyspZT1NYXRoLm1heChlLGQuZGlzdGFuY2VUb1NxdWFyZWQoYltmXSkpO3RoaXMucmFkaXVzPU1hdGguc3FydChlKTtyZXR1cm4gdGhpc319KCksY29weTpmdW5jdGlvbihhKXt0aGlzLmNlbnRlci5jb3B5KGEuY2VudGVyKTt0aGlzLnJhZGl1cz1hLnJhZGl1cztyZXR1cm4gdGhpc30sZW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gMD49dGhpcy5yYWRpdXN9LGNvbnRhaW5zUG9pbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZGlzdGFuY2VUb1NxdWFyZWQodGhpcy5jZW50ZXIpPD1cbnRoaXMucmFkaXVzKnRoaXMucmFkaXVzfSxkaXN0YW5jZVRvUG9pbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZGlzdGFuY2VUbyh0aGlzLmNlbnRlciktdGhpcy5yYWRpdXN9LGludGVyc2VjdHNTcGhlcmU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5yYWRpdXMrYS5yYWRpdXM7cmV0dXJuIGEuY2VudGVyLmRpc3RhbmNlVG9TcXVhcmVkKHRoaXMuY2VudGVyKTw9YipifSxjbGFtcFBvaW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jZW50ZXIuZGlzdGFuY2VUb1NxdWFyZWQoYSksZD1ifHxuZXcgVEhSRUUuVmVjdG9yMztkLmNvcHkoYSk7Yz50aGlzLnJhZGl1cyp0aGlzLnJhZGl1cyYmKGQuc3ViKHRoaXMuY2VudGVyKS5ub3JtYWxpemUoKSxkLm11bHRpcGx5U2NhbGFyKHRoaXMucmFkaXVzKS5hZGQodGhpcy5jZW50ZXIpKTtyZXR1cm4gZH0sZ2V0Qm91bmRpbmdCb3g6ZnVuY3Rpb24oYSl7YT1hfHxuZXcgVEhSRUUuQm94MzthLnNldCh0aGlzLmNlbnRlcix0aGlzLmNlbnRlcik7YS5leHBhbmRCeVNjYWxhcih0aGlzLnJhZGl1cyk7XG5yZXR1cm4gYX0sYXBwbHlNYXRyaXg0OmZ1bmN0aW9uKGEpe3RoaXMuY2VudGVyLmFwcGx5TWF0cml4NChhKTt0aGlzLnJhZGl1cyo9YS5nZXRNYXhTY2FsZU9uQXhpcygpO3JldHVybiB0aGlzfSx0cmFuc2xhdGU6ZnVuY3Rpb24oYSl7dGhpcy5jZW50ZXIuYWRkKGEpO3JldHVybiB0aGlzfSxlcXVhbHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuY2VudGVyLmVxdWFscyh0aGlzLmNlbnRlcikmJmEucmFkaXVzPT09dGhpcy5yYWRpdXN9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBUSFJFRS5TcGhlcmUpLmNvcHkodGhpcyl9fTtUSFJFRS5GcnVzdHVtPWZ1bmN0aW9uKGEsYixjLGQsZSxmKXt0aGlzLnBsYW5lcz1bdm9pZCAwIT09YT9hOm5ldyBUSFJFRS5QbGFuZSx2b2lkIDAhPT1iP2I6bmV3IFRIUkVFLlBsYW5lLHZvaWQgMCE9PWM/YzpuZXcgVEhSRUUuUGxhbmUsdm9pZCAwIT09ZD9kOm5ldyBUSFJFRS5QbGFuZSx2b2lkIDAhPT1lP2U6bmV3IFRIUkVFLlBsYW5lLHZvaWQgMCE9PWY/ZjpuZXcgVEhSRUUuUGxhbmVdfTtcblRIUkVFLkZydXN0dW0ucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5GcnVzdHVtLHNldDpmdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGg9dGhpcy5wbGFuZXM7aFswXS5jb3B5KGEpO2hbMV0uY29weShiKTtoWzJdLmNvcHkoYyk7aFszXS5jb3B5KGQpO2hbNF0uY29weShlKTtoWzVdLmNvcHkoZik7cmV0dXJuIHRoaXN9LGNvcHk6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMucGxhbmVzLGM9MDs2PmM7YysrKWJbY10uY29weShhLnBsYW5lc1tjXSk7cmV0dXJuIHRoaXN9LHNldEZyb21NYXRyaXg6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5wbGFuZXMsYz1hLmVsZW1lbnRzLGE9Y1swXSxkPWNbMV0sZT1jWzJdLGY9Y1szXSxoPWNbNF0sZz1jWzVdLGk9Y1s2XSxrPWNbN10sbT1jWzhdLGw9Y1s5XSxwPWNbMTBdLHQ9Y1sxMV0scz1jWzEyXSxxPWNbMTNdLG49Y1sxNF0sYz1jWzE1XTtiWzBdLnNldENvbXBvbmVudHMoZi1hLGstaCx0LW0sYy1zKS5ub3JtYWxpemUoKTtiWzFdLnNldENvbXBvbmVudHMoZitcbmEsaytoLHQrbSxjK3MpLm5vcm1hbGl6ZSgpO2JbMl0uc2V0Q29tcG9uZW50cyhmK2QsaytnLHQrbCxjK3EpLm5vcm1hbGl6ZSgpO2JbM10uc2V0Q29tcG9uZW50cyhmLWQsay1nLHQtbCxjLXEpLm5vcm1hbGl6ZSgpO2JbNF0uc2V0Q29tcG9uZW50cyhmLWUsay1pLHQtcCxjLW4pLm5vcm1hbGl6ZSgpO2JbNV0uc2V0Q29tcG9uZW50cyhmK2UsaytpLHQrcCxjK24pLm5vcm1hbGl6ZSgpO3JldHVybiB0aGlzfSxpbnRlcnNlY3RzT2JqZWN0OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlNwaGVyZTtyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGM9Yi5nZW9tZXRyeTtudWxsPT09Yy5ib3VuZGluZ1NwaGVyZSYmYy5jb21wdXRlQm91bmRpbmdTcGhlcmUoKTthLmNvcHkoYy5ib3VuZGluZ1NwaGVyZSk7YS5hcHBseU1hdHJpeDQoYi5tYXRyaXhXb3JsZCk7cmV0dXJuIHRoaXMuaW50ZXJzZWN0c1NwaGVyZShhKX19KCksaW50ZXJzZWN0c1NwaGVyZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5wbGFuZXMsXG5jPWEuY2VudGVyLGE9LWEucmFkaXVzLGQ9MDs2PmQ7ZCsrKWlmKGJbZF0uZGlzdGFuY2VUb1BvaW50KGMpPGEpcmV0dXJuITE7cmV0dXJuITB9LGludGVyc2VjdHNCb3g6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMyxiPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihjKXtmb3IodmFyIGQ9dGhpcy5wbGFuZXMsZT0wOzY+ZTtlKyspe3ZhciBmPWRbZV07YS54PTA8Zi5ub3JtYWwueD9jLm1pbi54OmMubWF4Lng7Yi54PTA8Zi5ub3JtYWwueD9jLm1heC54OmMubWluLng7YS55PTA8Zi5ub3JtYWwueT9jLm1pbi55OmMubWF4Lnk7Yi55PTA8Zi5ub3JtYWwueT9jLm1heC55OmMubWluLnk7YS56PTA8Zi5ub3JtYWwuej9jLm1pbi56OmMubWF4Lno7Yi56PTA8Zi5ub3JtYWwuej9jLm1heC56OmMubWluLno7dmFyIGg9Zi5kaXN0YW5jZVRvUG9pbnQoYSksZj1mLmRpc3RhbmNlVG9Qb2ludChiKTtpZigwPmgmJjA+ZilyZXR1cm4hMX1yZXR1cm4hMH19KCksY29udGFpbnNQb2ludDpmdW5jdGlvbihhKXtmb3IodmFyIGI9XG50aGlzLnBsYW5lcyxjPTA7Nj5jO2MrKylpZigwPmJbY10uZGlzdGFuY2VUb1BvaW50KGEpKXJldHVybiExO3JldHVybiEwfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgVEhSRUUuRnJ1c3R1bSkuY29weSh0aGlzKX19O1RIUkVFLlBsYW5lPWZ1bmN0aW9uKGEsYil7dGhpcy5ub3JtYWw9dm9pZCAwIT09YT9hOm5ldyBUSFJFRS5WZWN0b3IzKDEsMCwwKTt0aGlzLmNvbnN0YW50PXZvaWQgMCE9PWI/YjowfTtcblRIUkVFLlBsYW5lLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuUGxhbmUsc2V0OmZ1bmN0aW9uKGEsYil7dGhpcy5ub3JtYWwuY29weShhKTt0aGlzLmNvbnN0YW50PWI7cmV0dXJuIHRoaXN9LHNldENvbXBvbmVudHM6ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy5ub3JtYWwuc2V0KGEsYixjKTt0aGlzLmNvbnN0YW50PWQ7cmV0dXJuIHRoaXN9LHNldEZyb21Ob3JtYWxBbmRDb3BsYW5hclBvaW50OmZ1bmN0aW9uKGEsYil7dGhpcy5ub3JtYWwuY29weShhKTt0aGlzLmNvbnN0YW50PS1iLmRvdCh0aGlzLm5vcm1hbCk7cmV0dXJuIHRoaXN9LHNldEZyb21Db3BsYW5hclBvaW50czpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzLGI9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGMsZCxlKXtkPWEuc3ViVmVjdG9ycyhlLGQpLmNyb3NzKGIuc3ViVmVjdG9ycyhjLGQpKS5ub3JtYWxpemUoKTt0aGlzLnNldEZyb21Ob3JtYWxBbmRDb3BsYW5hclBvaW50KGQsXG5jKTtyZXR1cm4gdGhpc319KCksY29weTpmdW5jdGlvbihhKXt0aGlzLm5vcm1hbC5jb3B5KGEubm9ybWFsKTt0aGlzLmNvbnN0YW50PWEuY29uc3RhbnQ7cmV0dXJuIHRoaXN9LG5vcm1hbGl6ZTpmdW5jdGlvbigpe3ZhciBhPTEvdGhpcy5ub3JtYWwubGVuZ3RoKCk7dGhpcy5ub3JtYWwubXVsdGlwbHlTY2FsYXIoYSk7dGhpcy5jb25zdGFudCo9YTtyZXR1cm4gdGhpc30sbmVnYXRlOmZ1bmN0aW9uKCl7dGhpcy5jb25zdGFudCo9LTE7dGhpcy5ub3JtYWwubmVnYXRlKCk7cmV0dXJuIHRoaXN9LGRpc3RhbmNlVG9Qb2ludDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5ub3JtYWwuZG90KGEpK3RoaXMuY29uc3RhbnR9LGRpc3RhbmNlVG9TcGhlcmU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZGlzdGFuY2VUb1BvaW50KGEuY2VudGVyKS1hLnJhZGl1c30scHJvamVjdFBvaW50OmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMub3J0aG9Qb2ludChhLGIpLnN1YihhKS5uZWdhdGUoKX0sb3J0aG9Qb2ludDpmdW5jdGlvbihhLFxuYil7dmFyIGM9dGhpcy5kaXN0YW5jZVRvUG9pbnQoYSk7cmV0dXJuKGJ8fG5ldyBUSFJFRS5WZWN0b3IzKS5jb3B5KHRoaXMubm9ybWFsKS5tdWx0aXBseVNjYWxhcihjKX0saXNJbnRlcnNlY3Rpb25MaW5lOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZGlzdGFuY2VUb1BvaW50KGEuc3RhcnQpLGE9dGhpcy5kaXN0YW5jZVRvUG9pbnQoYS5lbmQpO3JldHVybiAwPmImJjA8YXx8MD5hJiYwPGJ9LGludGVyc2VjdExpbmU6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oYixjKXt2YXIgZD1jfHxuZXcgVEhSRUUuVmVjdG9yMyxlPWIuZGVsdGEoYSksZj10aGlzLm5vcm1hbC5kb3QoZSk7aWYoMD09Zil7aWYoMD09dGhpcy5kaXN0YW5jZVRvUG9pbnQoYi5zdGFydCkpcmV0dXJuIGQuY29weShiLnN0YXJ0KX1lbHNlIHJldHVybiBmPS0oYi5zdGFydC5kb3QodGhpcy5ub3JtYWwpK3RoaXMuY29uc3RhbnQpL2YsMD5mfHwxPGY/dm9pZCAwOmQuY29weShlKS5tdWx0aXBseVNjYWxhcihmKS5hZGQoYi5zdGFydCl9fSgpLFxuY29wbGFuYXJQb2ludDpmdW5jdGlvbihhKXtyZXR1cm4oYXx8bmV3IFRIUkVFLlZlY3RvcjMpLmNvcHkodGhpcy5ub3JtYWwpLm11bHRpcGx5U2NhbGFyKC10aGlzLmNvbnN0YW50KX0sYXBwbHlNYXRyaXg0OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjMsYj1uZXcgVEhSRUUuVmVjdG9yMyxjPW5ldyBUSFJFRS5NYXRyaXgzO3JldHVybiBmdW5jdGlvbihkLGUpe3ZhciBmPWV8fGMuZ2V0Tm9ybWFsTWF0cml4KGQpLGY9YS5jb3B5KHRoaXMubm9ybWFsKS5hcHBseU1hdHJpeDMoZiksaD10aGlzLmNvcGxhbmFyUG9pbnQoYik7aC5hcHBseU1hdHJpeDQoZCk7dGhpcy5zZXRGcm9tTm9ybWFsQW5kQ29wbGFuYXJQb2ludChmLGgpO3JldHVybiB0aGlzfX0oKSx0cmFuc2xhdGU6ZnVuY3Rpb24oYSl7dGhpcy5jb25zdGFudC09YS5kb3QodGhpcy5ub3JtYWwpO3JldHVybiB0aGlzfSxlcXVhbHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEubm9ybWFsLmVxdWFscyh0aGlzLm5vcm1hbCkmJlxuYS5jb25zdGFudD09dGhpcy5jb25zdGFudH0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IFRIUkVFLlBsYW5lKS5jb3B5KHRoaXMpfX07VEhSRUUuTWF0aD17UEkyOjIqTWF0aC5QSSxnZW5lcmF0ZVVVSUQ6ZnVuY3Rpb24oKXt2YXIgYT1cIjAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6XCIuc3BsaXQoXCJcIiksYj1BcnJheSgzNiksYz0wLGQ7cmV0dXJuIGZ1bmN0aW9uKCl7Zm9yKHZhciBlPTA7MzY+ZTtlKyspOD09ZXx8MTM9PWV8fDE4PT1lfHwyMz09ZT9iW2VdPVwiLVwiOjE0PT1lP2JbZV09XCI0XCI6KDI+PWMmJihjPTMzNTU0NDMyKzE2Nzc3MjE2Kk1hdGgucmFuZG9tKCl8MCksZD1jJjE1LGM+Pj00LGJbZV09YVsxOT09ZT9kJjN8ODpkXSk7cmV0dXJuIGIuam9pbihcIlwiKX19KCksY2xhbXA6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBhPGI/YjphPmM/YzphfSxjbGFtcEJvdHRvbTpmdW5jdGlvbihhLGIpe3JldHVybiBhPGI/YjphfSxtYXBMaW5lYXI6ZnVuY3Rpb24oYSxiLGMsZCxlKXtyZXR1cm4gZCsoYS1iKSooZS1kKS8oYy1iKX0sc21vb3Roc3RlcDpmdW5jdGlvbihhLFxuYixjKXtpZihhPD1iKXJldHVybiAwO2lmKGE+PWMpcmV0dXJuIDE7YT0oYS1iKS8oYy1iKTtyZXR1cm4gYSphKigzLTIqYSl9LHNtb290aGVyc3RlcDpmdW5jdGlvbihhLGIsYyl7aWYoYTw9YilyZXR1cm4gMDtpZihhPj1jKXJldHVybiAxO2E9KGEtYikvKGMtYik7cmV0dXJuIGEqYSphKihhKig2KmEtMTUpKzEwKX0scmFuZG9tMTY6ZnVuY3Rpb24oKXtyZXR1cm4oNjUyODAqTWF0aC5yYW5kb20oKSsyNTUqTWF0aC5yYW5kb20oKSkvNjU1MzV9LHJhbmRJbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYStNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqKGItYSsxKSl9LHJhbmRGbG9hdDpmdW5jdGlvbihhLGIpe3JldHVybiBhK01hdGgucmFuZG9tKCkqKGItYSl9LHJhbmRGbG9hdFNwcmVhZDpmdW5jdGlvbihhKXtyZXR1cm4gYSooMC41LU1hdGgucmFuZG9tKCkpfSxzaWduOmZ1bmN0aW9uKGEpe3JldHVybiAwPmE/LTE6MDxhPzE6MH0sZGVnVG9SYWQ6ZnVuY3Rpb24oKXt2YXIgYT1NYXRoLlBJL1xuMTgwO3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gYiphfX0oKSxyYWRUb0RlZzpmdW5jdGlvbigpe3ZhciBhPTE4MC9NYXRoLlBJO3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gYiphfX0oKX07VEhSRUUuU3BsaW5lPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiLGMsZCxlLGYsaCl7YT0wLjUqKGMtYSk7ZD0wLjUqKGQtYik7cmV0dXJuKDIqKGItYykrYStkKSpoKygtMyooYi1jKS0yKmEtZCkqZithKmUrYn10aGlzLnBvaW50cz1hO3ZhciBjPVtdLGQ9e3g6MCx5OjAsejowfSxlLGYsaCxnLGksayxtLGwscDt0aGlzLmluaXRGcm9tQXJyYXk9ZnVuY3Rpb24oYSl7dGhpcy5wb2ludHM9W107Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspdGhpcy5wb2ludHNbYl09e3g6YVtiXVswXSx5OmFbYl1bMV0sejphW2JdWzJdfX07dGhpcy5nZXRQb2ludD1mdW5jdGlvbihhKXtlPSh0aGlzLnBvaW50cy5sZW5ndGgtMSkqYTtmPU1hdGguZmxvb3IoZSk7aD1lLWY7Y1swXT0wPT09Zj9mOmYtMTtjWzFdPWY7Y1syXT1mPnRoaXMucG9pbnRzLmxlbmd0aC0yP3RoaXMucG9pbnRzLmxlbmd0aC0xOmYrMTtjWzNdPWY+dGhpcy5wb2ludHMubGVuZ3RoLTM/dGhpcy5wb2ludHMubGVuZ3RoLTE6XG5mKzI7az10aGlzLnBvaW50c1tjWzBdXTttPXRoaXMucG9pbnRzW2NbMV1dO2w9dGhpcy5wb2ludHNbY1syXV07cD10aGlzLnBvaW50c1tjWzNdXTtnPWgqaDtpPWgqZztkLng9YihrLngsbS54LGwueCxwLngsaCxnLGkpO2QueT1iKGsueSxtLnksbC55LHAueSxoLGcsaSk7ZC56PWIoay56LG0ueixsLnoscC56LGgsZyxpKTtyZXR1cm4gZH07dGhpcy5nZXRDb250cm9sUG9pbnRzQXJyYXk9ZnVuY3Rpb24oKXt2YXIgYSxiLGM9dGhpcy5wb2ludHMubGVuZ3RoLGQ9W107Zm9yKGE9MDthPGM7YSsrKWI9dGhpcy5wb2ludHNbYV0sZFthXT1bYi54LGIueSxiLnpdO3JldHVybiBkfTt0aGlzLmdldExlbmd0aD1mdW5jdGlvbihhKXt2YXIgYixjLGQsZT1iPWI9MCxmPW5ldyBUSFJFRS5WZWN0b3IzLGg9bmV3IFRIUkVFLlZlY3RvcjMsZz1bXSxpPTA7Z1swXT0wO2F8fChhPTEwMCk7Yz10aGlzLnBvaW50cy5sZW5ndGgqYTtmLmNvcHkodGhpcy5wb2ludHNbMF0pO2ZvcihhPTE7YTxjO2ErKyliPVxuYS9jLGQ9dGhpcy5nZXRQb2ludChiKSxoLmNvcHkoZCksaSs9aC5kaXN0YW5jZVRvKGYpLGYuY29weShkKSxiKj10aGlzLnBvaW50cy5sZW5ndGgtMSxiPU1hdGguZmxvb3IoYiksYiE9ZSYmKGdbYl09aSxlPWIpO2dbZy5sZW5ndGhdPWk7cmV0dXJue2NodW5rczpnLHRvdGFsOml9fTt0aGlzLnJlcGFyYW1ldHJpemVCeUFyY0xlbmd0aD1mdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGgsZz1bXSxpPW5ldyBUSFJFRS5WZWN0b3IzLGs9dGhpcy5nZXRMZW5ndGgoKTtnLnB1c2goaS5jb3B5KHRoaXMucG9pbnRzWzBdKS5jbG9uZSgpKTtmb3IoYj0xO2I8dGhpcy5wb2ludHMubGVuZ3RoO2IrKyl7Yz1rLmNodW5rc1tiXS1rLmNodW5rc1tiLTFdO2g9TWF0aC5jZWlsKGEqYy9rLnRvdGFsKTtlPShiLTEpLyh0aGlzLnBvaW50cy5sZW5ndGgtMSk7Zj1iLyh0aGlzLnBvaW50cy5sZW5ndGgtMSk7Zm9yKGM9MTtjPGgtMTtjKyspZD1lK2MqKDEvaCkqKGYtZSksZD10aGlzLmdldFBvaW50KGQpLFxuZy5wdXNoKGkuY29weShkKS5jbG9uZSgpKTtnLnB1c2goaS5jb3B5KHRoaXMucG9pbnRzW2JdKS5jbG9uZSgpKX10aGlzLnBvaW50cz1nfX07VEhSRUUuVHJpYW5nbGU9ZnVuY3Rpb24oYSxiLGMpe3RoaXMuYT12b2lkIDAhPT1hP2E6bmV3IFRIUkVFLlZlY3RvcjM7dGhpcy5iPXZvaWQgMCE9PWI/YjpuZXcgVEhSRUUuVmVjdG9yMzt0aGlzLmM9dm9pZCAwIT09Yz9jOm5ldyBUSFJFRS5WZWN0b3IzfTtUSFJFRS5UcmlhbmdsZS5ub3JtYWw9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oYixjLGQsZSl7ZT1lfHxuZXcgVEhSRUUuVmVjdG9yMztlLnN1YlZlY3RvcnMoZCxjKTthLnN1YlZlY3RvcnMoYixjKTtlLmNyb3NzKGEpO2I9ZS5sZW5ndGhTcSgpO3JldHVybiAwPGI/ZS5tdWx0aXBseVNjYWxhcigxL01hdGguc3FydChiKSk6ZS5zZXQoMCwwLDApfX0oKTtcblRIUkVFLlRyaWFuZ2xlLmJhcnljb29yZEZyb21Qb2ludD1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzLGI9bmV3IFRIUkVFLlZlY3RvcjMsYz1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oZCxlLGYsaCxnKXthLnN1YlZlY3RvcnMoaCxlKTtiLnN1YlZlY3RvcnMoZixlKTtjLnN1YlZlY3RvcnMoZCxlKTt2YXIgZD1hLmRvdChhKSxlPWEuZG90KGIpLGY9YS5kb3QoYyksaT1iLmRvdChiKSxoPWIuZG90KGMpLGs9ZCppLWUqZSxnPWd8fG5ldyBUSFJFRS5WZWN0b3IzO2lmKDA9PWspcmV0dXJuIGcuc2V0KC0yLC0xLC0xKTtrPTEvaztpPShpKmYtZSpoKSprO2Q9KGQqaC1lKmYpKms7cmV0dXJuIGcuc2V0KDEtaS1kLGQsaSl9fSgpO1xuVEhSRUUuVHJpYW5nbGUuY29udGFpbnNQb2ludD1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihiLGMsZCxlKXtiPVRIUkVFLlRyaWFuZ2xlLmJhcnljb29yZEZyb21Qb2ludChiLGMsZCxlLGEpO3JldHVybiAwPD1iLngmJjA8PWIueSYmMT49Yi54K2IueX19KCk7XG5USFJFRS5UcmlhbmdsZS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLlRyaWFuZ2xlLHNldDpmdW5jdGlvbihhLGIsYyl7dGhpcy5hLmNvcHkoYSk7dGhpcy5iLmNvcHkoYik7dGhpcy5jLmNvcHkoYyk7cmV0dXJuIHRoaXN9LHNldEZyb21Qb2ludHNBbmRJbmRpY2VzOmZ1bmN0aW9uKGEsYixjLGQpe3RoaXMuYS5jb3B5KGFbYl0pO3RoaXMuYi5jb3B5KGFbY10pO3RoaXMuYy5jb3B5KGFbZF0pO3JldHVybiB0aGlzfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMuYS5jb3B5KGEuYSk7dGhpcy5iLmNvcHkoYS5iKTt0aGlzLmMuY29weShhLmMpO3JldHVybiB0aGlzfSxhcmVhOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjMsYj1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oKXthLnN1YlZlY3RvcnModGhpcy5jLHRoaXMuYik7Yi5zdWJWZWN0b3JzKHRoaXMuYSx0aGlzLmIpO3JldHVybiAwLjUqYS5jcm9zcyhiKS5sZW5ndGgoKX19KCksbWlkcG9pbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fFxubmV3IFRIUkVFLlZlY3RvcjMpLmFkZFZlY3RvcnModGhpcy5hLHRoaXMuYikuYWRkKHRoaXMuYykubXVsdGlwbHlTY2FsYXIoMS8zKX0sbm9ybWFsOmZ1bmN0aW9uKGEpe3JldHVybiBUSFJFRS5UcmlhbmdsZS5ub3JtYWwodGhpcy5hLHRoaXMuYix0aGlzLmMsYSl9LHBsYW5lOmZ1bmN0aW9uKGEpe3JldHVybihhfHxuZXcgVEhSRUUuUGxhbmUpLnNldEZyb21Db3BsYW5hclBvaW50cyh0aGlzLmEsdGhpcy5iLHRoaXMuYyl9LGJhcnljb29yZEZyb21Qb2ludDpmdW5jdGlvbihhLGIpe3JldHVybiBUSFJFRS5UcmlhbmdsZS5iYXJ5Y29vcmRGcm9tUG9pbnQoYSx0aGlzLmEsdGhpcy5iLHRoaXMuYyxiKX0sY29udGFpbnNQb2ludDpmdW5jdGlvbihhKXtyZXR1cm4gVEhSRUUuVHJpYW5nbGUuY29udGFpbnNQb2ludChhLHRoaXMuYSx0aGlzLmIsdGhpcy5jKX0sZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiBhLmEuZXF1YWxzKHRoaXMuYSkmJmEuYi5lcXVhbHModGhpcy5iKSYmYS5jLmVxdWFscyh0aGlzLmMpfSxcbmNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBUSFJFRS5UcmlhbmdsZSkuY29weSh0aGlzKX19O1RIUkVFLlZlcnRleD1mdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5WZXJ0ZXggaGFzIGJlZW4gREVQUkVDQVRFRC4gVXNlIFRIUkVFLlZlY3RvcjMgaW5zdGVhZC5cIik7cmV0dXJuIGF9O1RIUkVFLlVWPWZ1bmN0aW9uKGEsYil7Y29uc29sZS53YXJuKFwiVEhSRUUuVVYgaGFzIGJlZW4gREVQUkVDQVRFRC4gVXNlIFRIUkVFLlZlY3RvcjIgaW5zdGVhZC5cIik7cmV0dXJuIG5ldyBUSFJFRS5WZWN0b3IyKGEsYil9O1RIUkVFLkNsb2NrPWZ1bmN0aW9uKGEpe3RoaXMuYXV0b1N0YXJ0PXZvaWQgMCE9PWE/YTohMDt0aGlzLmVsYXBzZWRUaW1lPXRoaXMub2xkVGltZT10aGlzLnN0YXJ0VGltZT0wO3RoaXMucnVubmluZz0hMX07XG5USFJFRS5DbG9jay5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLkNsb2NrLHN0YXJ0OmZ1bmN0aW9uKCl7dGhpcy5vbGRUaW1lPXRoaXMuc3RhcnRUaW1lPXZvaWQgMCE9PXNlbGYucGVyZm9ybWFuY2UmJnZvaWQgMCE9PXNlbGYucGVyZm9ybWFuY2Uubm93P3NlbGYucGVyZm9ybWFuY2Uubm93KCk6RGF0ZS5ub3coKTt0aGlzLnJ1bm5pbmc9ITB9LHN0b3A6ZnVuY3Rpb24oKXt0aGlzLmdldEVsYXBzZWRUaW1lKCk7dGhpcy5ydW5uaW5nPSExfSxnZXRFbGFwc2VkVGltZTpmdW5jdGlvbigpe3RoaXMuZ2V0RGVsdGEoKTtyZXR1cm4gdGhpcy5lbGFwc2VkVGltZX0sZ2V0RGVsdGE6ZnVuY3Rpb24oKXt2YXIgYT0wO3RoaXMuYXV0b1N0YXJ0JiYhdGhpcy5ydW5uaW5nJiZ0aGlzLnN0YXJ0KCk7aWYodGhpcy5ydW5uaW5nKXt2YXIgYj12b2lkIDAhPT1zZWxmLnBlcmZvcm1hbmNlJiZ2b2lkIDAhPT1zZWxmLnBlcmZvcm1hbmNlLm5vdz9zZWxmLnBlcmZvcm1hbmNlLm5vdygpOkRhdGUubm93KCksXG5hPTAuMDAxKihiLXRoaXMub2xkVGltZSk7dGhpcy5vbGRUaW1lPWI7dGhpcy5lbGFwc2VkVGltZSs9YX1yZXR1cm4gYX19O1RIUkVFLkV2ZW50RGlzcGF0Y2hlcj1mdW5jdGlvbigpe307XG5USFJFRS5FdmVudERpc3BhdGNoZXIucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5FdmVudERpc3BhdGNoZXIsYXBwbHk6ZnVuY3Rpb24oYSl7YS5hZGRFdmVudExpc3RlbmVyPVRIUkVFLkV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcjthLmhhc0V2ZW50TGlzdGVuZXI9VEhSRUUuRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZS5oYXNFdmVudExpc3RlbmVyO2EucmVtb3ZlRXZlbnRMaXN0ZW5lcj1USFJFRS5FdmVudERpc3BhdGNoZXIucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXI7YS5kaXNwYXRjaEV2ZW50PVRIUkVFLkV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUuZGlzcGF0Y2hFdmVudH0sYWRkRXZlbnRMaXN0ZW5lcjpmdW5jdGlvbihhLGIpe3ZvaWQgMD09PXRoaXMuX2xpc3RlbmVycyYmKHRoaXMuX2xpc3RlbmVycz17fSk7dmFyIGM9dGhpcy5fbGlzdGVuZXJzO3ZvaWQgMD09PWNbYV0mJihjW2FdPVtdKTstMT09PWNbYV0uaW5kZXhPZihiKSYmXG5jW2FdLnB1c2goYil9LGhhc0V2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oYSxiKXtpZih2b2lkIDA9PT10aGlzLl9saXN0ZW5lcnMpcmV0dXJuITE7dmFyIGM9dGhpcy5fbGlzdGVuZXJzO3JldHVybiB2b2lkIDAhPT1jW2FdJiYtMSE9PWNbYV0uaW5kZXhPZihiKT8hMDohMX0scmVtb3ZlRXZlbnRMaXN0ZW5lcjpmdW5jdGlvbihhLGIpe2lmKHZvaWQgMCE9PXRoaXMuX2xpc3RlbmVycyl7dmFyIGM9dGhpcy5fbGlzdGVuZXJzW2FdO2lmKHZvaWQgMCE9PWMpe3ZhciBkPWMuaW5kZXhPZihiKTstMSE9PWQmJmMuc3BsaWNlKGQsMSl9fX0sZGlzcGF0Y2hFdmVudDpmdW5jdGlvbigpe3ZhciBhPVtdO3JldHVybiBmdW5jdGlvbihiKXtpZih2b2lkIDAhPT10aGlzLl9saXN0ZW5lcnMpe3ZhciBjPXRoaXMuX2xpc3RlbmVyc1tiLnR5cGVdO2lmKHZvaWQgMCE9PWMpe2IudGFyZ2V0PXRoaXM7Zm9yKHZhciBkPWMubGVuZ3RoLGU9MDtlPGQ7ZSsrKWFbZV09Y1tlXTtmb3IoZT0wO2U8ZDtlKyspYVtlXS5jYWxsKHRoaXMsXG5iKX19fX0oKX07KGZ1bmN0aW9uKGEpe2EuUmF5Y2FzdGVyPWZ1bmN0aW9uKGIsYyxkLGUpe3RoaXMucmF5PW5ldyBhLlJheShiLGMpO3RoaXMubmVhcj1kfHwwO3RoaXMuZmFyPWV8fEluZmluaXR5fTt2YXIgYj1uZXcgYS5TcGhlcmUsYz1uZXcgYS5SYXk7bmV3IGEuUGxhbmU7bmV3IGEuVmVjdG9yMzt2YXIgZD1uZXcgYS5WZWN0b3IzLGU9bmV3IGEuTWF0cml4NCxmPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuZGlzdGFuY2UtYi5kaXN0YW5jZX0saD1uZXcgYS5WZWN0b3IzLGc9bmV3IGEuVmVjdG9yMyxpPW5ldyBhLlZlY3RvcjMsaz1mdW5jdGlvbihmLG0sdCl7aWYoZiBpbnN0YW5jZW9mIGEuU3ByaXRlKXtkLnNldEZyb21NYXRyaXhQb3NpdGlvbihmLm1hdHJpeFdvcmxkKTt2YXIgcz1tLnJheS5kaXN0YW5jZVRvUG9pbnQoZCk7aWYocz5mLnNjYWxlLngpcmV0dXJuIHQ7dC5wdXNoKHtkaXN0YW5jZTpzLHBvaW50OmYucG9zaXRpb24sZmFjZTpudWxsLG9iamVjdDpmfSl9ZWxzZSBpZihmIGluc3RhbmNlb2ZcbmEuTE9EKWQuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGYubWF0cml4V29ybGQpLHM9bS5yYXkub3JpZ2luLmRpc3RhbmNlVG8oZCksayhmLmdldE9iamVjdEZvckRpc3RhbmNlKHMpLG0sdCk7ZWxzZSBpZihmIGluc3RhbmNlb2YgYS5NZXNoKXt2YXIgcT1mLmdlb21ldHJ5O251bGw9PT1xLmJvdW5kaW5nU3BoZXJlJiZxLmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpO2IuY29weShxLmJvdW5kaW5nU3BoZXJlKTtiLmFwcGx5TWF0cml4NChmLm1hdHJpeFdvcmxkKTtpZighMT09PW0ucmF5LmlzSW50ZXJzZWN0aW9uU3BoZXJlKGIpKXJldHVybiB0O2UuZ2V0SW52ZXJzZShmLm1hdHJpeFdvcmxkKTtjLmNvcHkobS5yYXkpLmFwcGx5TWF0cml4NChlKTtpZihudWxsIT09cS5ib3VuZGluZ0JveCYmITE9PT1jLmlzSW50ZXJzZWN0aW9uQm94KHEuYm91bmRpbmdCb3gpKXJldHVybiB0O2lmKHEgaW5zdGFuY2VvZiBhLkJ1ZmZlckdlb21ldHJ5KXt2YXIgbj1mLm1hdGVyaWFsO2lmKHZvaWQgMD09PVxubnx8ITE9PT1xLmR5bmFtaWMpcmV0dXJuIHQ7dmFyIHUscix2PW0ucHJlY2lzaW9uO2lmKHZvaWQgMCE9PXEuYXR0cmlidXRlcy5pbmRleClmb3IodmFyIHo9cS5vZmZzZXRzLEc9cS5hdHRyaWJ1dGVzLmluZGV4LmFycmF5LHc9cS5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5LHk9cS5vZmZzZXRzLmxlbmd0aCxFPXEuYXR0cmlidXRlcy5pbmRleC5hcnJheS5sZW5ndGgvMyxFPTA7RTx5OysrRSlmb3IodmFyIHM9eltFXS5zdGFydCxBPXpbRV0uaW5kZXgscT1zLEs9cyt6W0VdLmNvdW50O3E8SztxKz0zKXM9QStHW3FdLHU9QStHW3ErMV0scj1BK0dbcSsyXSxoLnNldCh3WzMqc10sd1szKnMrMV0sd1szKnMrMl0pLGcuc2V0KHdbMyp1XSx3WzMqdSsxXSx3WzMqdSsyXSksaS5zZXQod1szKnJdLHdbMypyKzFdLHdbMypyKzJdKSx1PW4uc2lkZT09PWEuQmFja1NpZGU/Yy5pbnRlcnNlY3RUcmlhbmdsZShpLGcsaCwhMCk6Yy5pbnRlcnNlY3RUcmlhbmdsZShoLGcsaSxuLnNpZGUhPT1hLkRvdWJsZVNpZGUpLFxubnVsbCE9PXUmJih1LmFwcGx5TWF0cml4NChmLm1hdHJpeFdvcmxkKSxzPW0ucmF5Lm9yaWdpbi5kaXN0YW5jZVRvKHUpLHM8dnx8KHM8bS5uZWFyfHxzPm0uZmFyKXx8dC5wdXNoKHtkaXN0YW5jZTpzLHBvaW50OnUsZmFjZTpudWxsLGZhY2VJbmRleDpudWxsLG9iamVjdDpmfSkpO2Vsc2V7dz1xLmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXk7RT1xLmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXkubGVuZ3RoO2ZvcihxPTA7cTxFO3ErPTMpcz1xLHU9cSsxLHI9cSsyLGguc2V0KHdbMypzXSx3WzMqcysxXSx3WzMqcysyXSksZy5zZXQod1szKnVdLHdbMyp1KzFdLHdbMyp1KzJdKSxpLnNldCh3WzMqcl0sd1szKnIrMV0sd1szKnIrMl0pLHU9bi5zaWRlPT09YS5CYWNrU2lkZT9jLmludGVyc2VjdFRyaWFuZ2xlKGksZyxoLCEwKTpjLmludGVyc2VjdFRyaWFuZ2xlKGgsZyxpLG4uc2lkZSE9PWEuRG91YmxlU2lkZSksbnVsbCE9PXUmJih1LmFwcGx5TWF0cml4NChmLm1hdHJpeFdvcmxkKSxcbnM9bS5yYXkub3JpZ2luLmRpc3RhbmNlVG8odSksczx2fHwoczxtLm5lYXJ8fHM+bS5mYXIpfHx0LnB1c2goe2Rpc3RhbmNlOnMscG9pbnQ6dSxmYWNlOm51bGwsZmFjZUluZGV4Om51bGwsb2JqZWN0OmZ9KSl9fWVsc2UgaWYocSBpbnN0YW5jZW9mIGEuR2VvbWV0cnkpe0c9Zi5tYXRlcmlhbCBpbnN0YW5jZW9mIGEuTWVzaEZhY2VNYXRlcmlhbDt3PSEwPT09Rz9mLm1hdGVyaWFsLm1hdGVyaWFsczpudWxsO3Y9bS5wcmVjaXNpb247ej1xLnZlcnRpY2VzO3k9MDtmb3IoRT1xLmZhY2VzLmxlbmd0aDt5PEU7eSsrKUE9cS5mYWNlc1t5XSxuPSEwPT09Rz93W0EubWF0ZXJpYWxJbmRleF06Zi5tYXRlcmlhbCx2b2lkIDAhPT1uJiYocz16W0EuYV0sdT16W0EuYl0scj16W0EuY10sdT1uLnNpZGU9PT1hLkJhY2tTaWRlP2MuaW50ZXJzZWN0VHJpYW5nbGUocix1LHMsITApOmMuaW50ZXJzZWN0VHJpYW5nbGUocyx1LHIsbi5zaWRlIT09YS5Eb3VibGVTaWRlKSxudWxsIT09dSYmKHUuYXBwbHlNYXRyaXg0KGYubWF0cml4V29ybGQpLFxucz1tLnJheS5vcmlnaW4uZGlzdGFuY2VUbyh1KSxzPHZ8fChzPG0ubmVhcnx8cz5tLmZhcil8fHQucHVzaCh7ZGlzdGFuY2U6cyxwb2ludDp1LGZhY2U6QSxmYWNlSW5kZXg6eSxvYmplY3Q6Zn0pKSl9fWVsc2UgaWYoZiBpbnN0YW5jZW9mIGEuTGluZSl7dj1tLmxpbmVQcmVjaXNpb247bj12KnY7cT1mLmdlb21ldHJ5O251bGw9PT1xLmJvdW5kaW5nU3BoZXJlJiZxLmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpO2IuY29weShxLmJvdW5kaW5nU3BoZXJlKTtiLmFwcGx5TWF0cml4NChmLm1hdHJpeFdvcmxkKTtpZighMT09PW0ucmF5LmlzSW50ZXJzZWN0aW9uU3BoZXJlKGIpKXJldHVybiB0O2UuZ2V0SW52ZXJzZShmLm1hdHJpeFdvcmxkKTtjLmNvcHkobS5yYXkpLmFwcGx5TWF0cml4NChlKTtpZihxIGluc3RhbmNlb2YgYS5HZW9tZXRyeSl7ej1xLnZlcnRpY2VzO3Y9ei5sZW5ndGg7dT1uZXcgYS5WZWN0b3IzO3I9bmV3IGEuVmVjdG9yMztFPWYudHlwZT09PWEuTGluZVN0cmlwPzE6XG4yO2ZvcihxPTA7cTx2LTE7cSs9RSljLmRpc3RhbmNlU3FUb1NlZ21lbnQoeltxXSx6W3ErMV0scix1KT5ufHwocz1jLm9yaWdpbi5kaXN0YW5jZVRvKHIpLHM8bS5uZWFyfHxzPm0uZmFyfHx0LnB1c2goe2Rpc3RhbmNlOnMscG9pbnQ6dS5jbG9uZSgpLmFwcGx5TWF0cml4NChmLm1hdHJpeFdvcmxkKSxmYWNlOm51bGwsZmFjZUluZGV4Om51bGwsb2JqZWN0OmZ9KSl9fX0sbT1mdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBhPWEuZ2V0RGVzY2VuZGFudHMoKSxkPTAsZT1hLmxlbmd0aDtkPGU7ZCsrKWsoYVtkXSxiLGMpfTthLlJheWNhc3Rlci5wcm90b3R5cGUucHJlY2lzaW9uPTFFLTQ7YS5SYXljYXN0ZXIucHJvdG90eXBlLmxpbmVQcmVjaXNpb249MTthLlJheWNhc3Rlci5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGEsYil7dGhpcy5yYXkuc2V0KGEsYil9O2EuUmF5Y2FzdGVyLnByb3RvdHlwZS5pbnRlcnNlY3RPYmplY3Q9ZnVuY3Rpb24oYSxiKXt2YXIgYz1bXTshMD09PWImJm0oYSxcbnRoaXMsYyk7ayhhLHRoaXMsYyk7Yy5zb3J0KGYpO3JldHVybiBjfTthLlJheWNhc3Rlci5wcm90b3R5cGUuaW50ZXJzZWN0T2JqZWN0cz1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1bXSxkPTAsZT1hLmxlbmd0aDtkPGU7ZCsrKWsoYVtkXSx0aGlzLGMpLCEwPT09YiYmbShhW2RdLHRoaXMsYyk7Yy5zb3J0KGYpO3JldHVybiBjfX0pKFRIUkVFKTtUSFJFRS5PYmplY3QzRD1mdW5jdGlvbigpe3RoaXMuaWQ9VEhSRUUuT2JqZWN0M0RJZENvdW50Kys7dGhpcy51dWlkPVRIUkVFLk1hdGguZ2VuZXJhdGVVVUlEKCk7dGhpcy5uYW1lPVwiXCI7dGhpcy5wYXJlbnQ9dm9pZCAwO3RoaXMuY2hpbGRyZW49W107dGhpcy51cD1uZXcgVEhSRUUuVmVjdG9yMygwLDEsMCk7dGhpcy5wb3NpdGlvbj1uZXcgVEhSRUUuVmVjdG9yMzt0aGlzLl9yb3RhdGlvbj1uZXcgVEhSRUUuRXVsZXI7dGhpcy5fcXVhdGVybmlvbj1uZXcgVEhSRUUuUXVhdGVybmlvbjt0aGlzLnNjYWxlPW5ldyBUSFJFRS5WZWN0b3IzKDEsMSwxKTt0aGlzLl9yb3RhdGlvbi5fcXVhdGVybmlvbj10aGlzLnF1YXRlcm5pb247dGhpcy5fcXVhdGVybmlvbi5fZXVsZXI9dGhpcy5yb3RhdGlvbjt0aGlzLnJlbmRlckRlcHRoPW51bGw7dGhpcy5yb3RhdGlvbkF1dG9VcGRhdGU9ITA7dGhpcy5tYXRyaXg9bmV3IFRIUkVFLk1hdHJpeDQ7dGhpcy5tYXRyaXhXb3JsZD1uZXcgVEhSRUUuTWF0cml4NDtcbnRoaXMudmlzaWJsZT10aGlzLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9dGhpcy5tYXRyaXhBdXRvVXBkYXRlPSEwO3RoaXMucmVjZWl2ZVNoYWRvdz10aGlzLmNhc3RTaGFkb3c9ITE7dGhpcy5mcnVzdHVtQ3VsbGVkPSEwO3RoaXMudXNlckRhdGE9e319O1xuVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5PYmplY3QzRCxnZXQgcm90YXRpb24oKXtyZXR1cm4gdGhpcy5fcm90YXRpb259LHNldCByb3RhdGlvbihhKXt0aGlzLl9yb3RhdGlvbj1hO3RoaXMuX3JvdGF0aW9uLl9xdWF0ZXJuaW9uPXRoaXMuX3F1YXRlcm5pb247dGhpcy5fcXVhdGVybmlvbi5fZXVsZXI9dGhpcy5fcm90YXRpb247dGhpcy5fcm90YXRpb24uX3VwZGF0ZVF1YXRlcm5pb24oKX0sZ2V0IHF1YXRlcm5pb24oKXtyZXR1cm4gdGhpcy5fcXVhdGVybmlvbn0sc2V0IHF1YXRlcm5pb24oYSl7dGhpcy5fcXVhdGVybmlvbj1hO3RoaXMuX3F1YXRlcm5pb24uX2V1bGVyPXRoaXMuX3JvdGF0aW9uO3RoaXMuX3JvdGF0aW9uLl9xdWF0ZXJuaW9uPXRoaXMuX3F1YXRlcm5pb247dGhpcy5fcXVhdGVybmlvbi5fdXBkYXRlRXVsZXIoKX0sZ2V0IGV1bGVyT3JkZXIoKXtjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEOiBPYmplY3QzRCdzIC5ldWxlck9yZGVyIGhhcyBiZWVuIG1vdmVkIHRvIE9iamVjdDNEJ3MgLnJvdGF0aW9uLm9yZGVyLlwiKTtcbnJldHVybiB0aGlzLnJvdGF0aW9uLm9yZGVyfSxzZXQgZXVsZXJPcmRlcihhKXtjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEOiBPYmplY3QzRCdzIC5ldWxlck9yZGVyIGhhcyBiZWVuIG1vdmVkIHRvIE9iamVjdDNEJ3MgLnJvdGF0aW9uLm9yZGVyLlwiKTt0aGlzLnJvdGF0aW9uLm9yZGVyPWF9LGdldCB1c2VRdWF0ZXJuaW9uKCl7Y29uc29sZS53YXJuKFwiREVQUkVDQVRFRDogT2JqZWN0M0QncyAudXNlUXVhdGVybmlvbiBoYXMgYmVlbiByZW1vdmVkLiBUaGUgbGlicmFyeSBub3cgdXNlcyBxdWF0ZXJuaW9ucyBieSBkZWZhdWx0LlwiKX0sc2V0IHVzZVF1YXRlcm5pb24oYSl7Y29uc29sZS53YXJuKFwiREVQUkVDQVRFRDogT2JqZWN0M0QncyAudXNlUXVhdGVybmlvbiBoYXMgYmVlbiByZW1vdmVkLiBUaGUgbGlicmFyeSBub3cgdXNlcyBxdWF0ZXJuaW9ucyBieSBkZWZhdWx0LlwiKX0sYXBwbHlNYXRyaXg6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuTWF0cml4NDtyZXR1cm4gZnVuY3Rpb24oYil7dGhpcy5tYXRyaXgubXVsdGlwbHlNYXRyaWNlcyhiLFxudGhpcy5tYXRyaXgpO3RoaXMucG9zaXRpb24uc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHRoaXMubWF0cml4KTt0aGlzLnNjYWxlLnNldEZyb21NYXRyaXhTY2FsZSh0aGlzLm1hdHJpeCk7YS5leHRyYWN0Um90YXRpb24odGhpcy5tYXRyaXgpO3RoaXMucXVhdGVybmlvbi5zZXRGcm9tUm90YXRpb25NYXRyaXgoYSl9fSgpLHNldFJvdGF0aW9uRnJvbUF4aXNBbmdsZTpmdW5jdGlvbihhLGIpe3RoaXMucXVhdGVybmlvbi5zZXRGcm9tQXhpc0FuZ2xlKGEsYil9LHNldFJvdGF0aW9uRnJvbUV1bGVyOmZ1bmN0aW9uKGEpe3RoaXMucXVhdGVybmlvbi5zZXRGcm9tRXVsZXIoYSwhMCl9LHNldFJvdGF0aW9uRnJvbU1hdHJpeDpmdW5jdGlvbihhKXt0aGlzLnF1YXRlcm5pb24uc2V0RnJvbVJvdGF0aW9uTWF0cml4KGEpfSxzZXRSb3RhdGlvbkZyb21RdWF0ZXJuaW9uOmZ1bmN0aW9uKGEpe3RoaXMucXVhdGVybmlvbi5jb3B5KGEpfSxyb3RhdGVPbkF4aXM6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuUXVhdGVybmlvbjtcbnJldHVybiBmdW5jdGlvbihiLGMpe2Euc2V0RnJvbUF4aXNBbmdsZShiLGMpO3RoaXMucXVhdGVybmlvbi5tdWx0aXBseShhKTtyZXR1cm4gdGhpc319KCkscm90YXRlWDpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzKDEsMCwwKTtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMucm90YXRlT25BeGlzKGEsYil9fSgpLHJvdGF0ZVk6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMygwLDEsMCk7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLnJvdGF0ZU9uQXhpcyhhLGIpfX0oKSxyb3RhdGVaOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjMoMCwwLDEpO3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gdGhpcy5yb3RhdGVPbkF4aXMoYSxiKX19KCksdHJhbnNsYXRlT25BeGlzOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7YS5jb3B5KGIpO2EuYXBwbHlRdWF0ZXJuaW9uKHRoaXMucXVhdGVybmlvbik7XG50aGlzLnBvc2l0aW9uLmFkZChhLm11bHRpcGx5U2NhbGFyKGMpKTtyZXR1cm4gdGhpc319KCksdHJhbnNsYXRlOmZ1bmN0aW9uKGEsYil7Y29uc29sZS53YXJuKFwiREVQUkVDQVRFRDogT2JqZWN0M0QncyAudHJhbnNsYXRlKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIC50cmFuc2xhdGVPbkF4aXMoIGF4aXMsIGRpc3RhbmNlICkgaW5zdGVhZC4gTm90ZSBhcmdzIGhhdmUgYmVlbiBjaGFuZ2VkLlwiKTtyZXR1cm4gdGhpcy50cmFuc2xhdGVPbkF4aXMoYixhKX0sdHJhbnNsYXRlWDpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzKDEsMCwwKTtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMudHJhbnNsYXRlT25BeGlzKGEsYil9fSgpLHRyYW5zbGF0ZVk6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMygwLDEsMCk7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLnRyYW5zbGF0ZU9uQXhpcyhhLGIpfX0oKSx0cmFuc2xhdGVaOmZ1bmN0aW9uKCl7dmFyIGE9XG5uZXcgVEhSRUUuVmVjdG9yMygwLDAsMSk7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLnRyYW5zbGF0ZU9uQXhpcyhhLGIpfX0oKSxsb2NhbFRvV29ybGQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuYXBwbHlNYXRyaXg0KHRoaXMubWF0cml4V29ybGQpfSx3b3JsZFRvTG9jYWw6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuTWF0cml4NDtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIGIuYXBwbHlNYXRyaXg0KGEuZ2V0SW52ZXJzZSh0aGlzLm1hdHJpeFdvcmxkKSl9fSgpLGxvb2tBdDpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5NYXRyaXg0O3JldHVybiBmdW5jdGlvbihiKXthLmxvb2tBdChiLHRoaXMucG9zaXRpb24sdGhpcy51cCk7dGhpcy5xdWF0ZXJuaW9uLnNldEZyb21Sb3RhdGlvbk1hdHJpeChhKX19KCksYWRkOmZ1bmN0aW9uKGEpe2lmKGE9PT10aGlzKWNvbnNvbGUud2FybihcIlRIUkVFLk9iamVjdDNELmFkZDogQW4gb2JqZWN0IGNhbid0IGJlIGFkZGVkIGFzIGEgY2hpbGQgb2YgaXRzZWxmLlwiKTtcbmVsc2UgaWYoYSBpbnN0YW5jZW9mIFRIUkVFLk9iamVjdDNEKXt2b2lkIDAhPT1hLnBhcmVudCYmYS5wYXJlbnQucmVtb3ZlKGEpO2EucGFyZW50PXRoaXM7YS5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiYWRkZWRcIn0pO3RoaXMuY2hpbGRyZW4ucHVzaChhKTtmb3IodmFyIGI9dGhpczt2b2lkIDAhPT1iLnBhcmVudDspYj1iLnBhcmVudDt2b2lkIDAhPT1iJiZiIGluc3RhbmNlb2YgVEhSRUUuU2NlbmUmJmIuX19hZGRPYmplY3QoYSl9fSxyZW1vdmU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jaGlsZHJlbi5pbmRleE9mKGEpO2lmKC0xIT09Yil7YS5wYXJlbnQ9dm9pZCAwO2EuZGlzcGF0Y2hFdmVudCh7dHlwZTpcInJlbW92ZWRcIn0pO3RoaXMuY2hpbGRyZW4uc3BsaWNlKGIsMSk7Zm9yKGI9dGhpczt2b2lkIDAhPT1iLnBhcmVudDspYj1iLnBhcmVudDt2b2lkIDAhPT1iJiZiIGluc3RhbmNlb2YgVEhSRUUuU2NlbmUmJmIuX19yZW1vdmVPYmplY3QoYSl9fSx0cmF2ZXJzZTpmdW5jdGlvbihhKXthKHRoaXMpO1xuZm9yKHZhciBiPTAsYz10aGlzLmNoaWxkcmVuLmxlbmd0aDtiPGM7YisrKXRoaXMuY2hpbGRyZW5bYl0udHJhdmVyc2UoYSl9LGdldE9iamVjdEJ5SWQ6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MCxkPXRoaXMuY2hpbGRyZW4ubGVuZ3RoO2M8ZDtjKyspe3ZhciBlPXRoaXMuY2hpbGRyZW5bY107aWYoZS5pZD09PWF8fCEwPT09YiYmKGU9ZS5nZXRPYmplY3RCeUlkKGEsYiksdm9pZCAwIT09ZSkpcmV0dXJuIGV9fSxnZXRPYmplY3RCeU5hbWU6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MCxkPXRoaXMuY2hpbGRyZW4ubGVuZ3RoO2M8ZDtjKyspe3ZhciBlPXRoaXMuY2hpbGRyZW5bY107aWYoZS5uYW1lPT09YXx8ITA9PT1iJiYoZT1lLmdldE9iamVjdEJ5TmFtZShhLGIpLHZvaWQgMCE9PWUpKXJldHVybiBlfX0sZ2V0Q2hpbGRCeU5hbWU6ZnVuY3Rpb24oYSxiKXtjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEOiBPYmplY3QzRCdzIC5nZXRDaGlsZEJ5TmFtZSgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmdldE9iamVjdEJ5TmFtZSgpLlwiKTtcbnJldHVybiB0aGlzLmdldE9iamVjdEJ5TmFtZShhLGIpfSxnZXREZXNjZW5kYW50czpmdW5jdGlvbihhKXt2b2lkIDA9PT1hJiYoYT1bXSk7QXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoYSx0aGlzLmNoaWxkcmVuKTtmb3IodmFyIGI9MCxjPXRoaXMuY2hpbGRyZW4ubGVuZ3RoO2I8YztiKyspdGhpcy5jaGlsZHJlbltiXS5nZXREZXNjZW5kYW50cyhhKTtyZXR1cm4gYX0sdXBkYXRlTWF0cml4OmZ1bmN0aW9uKCl7dGhpcy5tYXRyaXguY29tcG9zZSh0aGlzLnBvc2l0aW9uLHRoaXMucXVhdGVybmlvbix0aGlzLnNjYWxlKTt0aGlzLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9ITB9LHVwZGF0ZU1hdHJpeFdvcmxkOmZ1bmN0aW9uKGEpeyEwPT09dGhpcy5tYXRyaXhBdXRvVXBkYXRlJiZ0aGlzLnVwZGF0ZU1hdHJpeCgpO2lmKCEwPT09dGhpcy5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlfHwhMD09PWEpdm9pZCAwPT09dGhpcy5wYXJlbnQ/dGhpcy5tYXRyaXhXb3JsZC5jb3B5KHRoaXMubWF0cml4KTpcbnRoaXMubWF0cml4V29ybGQubXVsdGlwbHlNYXRyaWNlcyh0aGlzLnBhcmVudC5tYXRyaXhXb3JsZCx0aGlzLm1hdHJpeCksdGhpcy5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPSExLGE9ITA7Zm9yKHZhciBiPTAsYz10aGlzLmNoaWxkcmVuLmxlbmd0aDtiPGM7YisrKXRoaXMuY2hpbGRyZW5bYl0udXBkYXRlTWF0cml4V29ybGQoYSl9LGNsb25lOmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YSYmKGE9bmV3IFRIUkVFLk9iamVjdDNEKTt2b2lkIDA9PT1iJiYoYj0hMCk7YS5uYW1lPXRoaXMubmFtZTthLnVwLmNvcHkodGhpcy51cCk7YS5wb3NpdGlvbi5jb3B5KHRoaXMucG9zaXRpb24pO2EucXVhdGVybmlvbi5jb3B5KHRoaXMucXVhdGVybmlvbik7YS5zY2FsZS5jb3B5KHRoaXMuc2NhbGUpO2EucmVuZGVyRGVwdGg9dGhpcy5yZW5kZXJEZXB0aDthLnJvdGF0aW9uQXV0b1VwZGF0ZT10aGlzLnJvdGF0aW9uQXV0b1VwZGF0ZTthLm1hdHJpeC5jb3B5KHRoaXMubWF0cml4KTthLm1hdHJpeFdvcmxkLmNvcHkodGhpcy5tYXRyaXhXb3JsZCk7XG5hLm1hdHJpeEF1dG9VcGRhdGU9dGhpcy5tYXRyaXhBdXRvVXBkYXRlO2EubWF0cml4V29ybGROZWVkc1VwZGF0ZT10aGlzLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU7YS52aXNpYmxlPXRoaXMudmlzaWJsZTthLmNhc3RTaGFkb3c9dGhpcy5jYXN0U2hhZG93O2EucmVjZWl2ZVNoYWRvdz10aGlzLnJlY2VpdmVTaGFkb3c7YS5mcnVzdHVtQ3VsbGVkPXRoaXMuZnJ1c3R1bUN1bGxlZDthLnVzZXJEYXRhPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy51c2VyRGF0YSkpO2lmKCEwPT09Yilmb3IodmFyIGM9MDtjPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO2MrKylhLmFkZCh0aGlzLmNoaWxkcmVuW2NdLmNsb25lKCkpO3JldHVybiBhfX07VEhSRUUuRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZS5hcHBseShUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUpO1RIUkVFLk9iamVjdDNESWRDb3VudD0wO1RIUkVFLlByb2plY3Rvcj1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXtpZihpPT09bSl7dmFyIGE9bmV3IFRIUkVFLlJlbmRlcmFibGVWZXJ0ZXg7ay5wdXNoKGEpO20rKztpKys7cmV0dXJuIGF9cmV0dXJuIGtbaSsrXX1mdW5jdGlvbiBiKGEsYil7cmV0dXJuIGEueiE9PWIuej9iLnotYS56OmEuaWQhPT1iLmlkP2EuaWQtYi5pZDowfWZ1bmN0aW9uIGMoYSxiKXt2YXIgYz0wLGQ9MSxlPWEueithLncsZj1iLnorYi53LGg9LWEueithLncsZz0tYi56K2IudztpZigwPD1lJiYwPD1mJiYwPD1oJiYwPD1nKXJldHVybiEwO2lmKDA+ZSYmMD5mfHwwPmgmJjA+ZylyZXR1cm4hMTswPmU/Yz1NYXRoLm1heChjLGUvKGUtZikpOjA+ZiYmKGQ9TWF0aC5taW4oZCxlLyhlLWYpKSk7MD5oP2M9TWF0aC5tYXgoYyxoLyhoLWcpKTowPmcmJihkPU1hdGgubWluKGQsaC8oaC1nKSkpO2lmKGQ8YylyZXR1cm4hMTthLmxlcnAoYixjKTtiLmxlcnAoYSwxLWQpO3JldHVybiEwfXZhciBkLGUsZj1bXSxoPVxuMCxnLGksaz1bXSxtPTAsbCxwLHQ9W10scz0wLHEsbix1PVtdLHI9MCx2LHosRz1bXSx3PTAseT17b2JqZWN0czpbXSxzcHJpdGVzOltdLGxpZ2h0czpbXSxlbGVtZW50czpbXX0sRT1uZXcgVEhSRUUuVmVjdG9yMyxBPW5ldyBUSFJFRS5WZWN0b3I0LEs9bmV3IFRIUkVFLkJveDMobmV3IFRIUkVFLlZlY3RvcjMoLTEsLTEsLTEpLG5ldyBUSFJFRS5WZWN0b3IzKDEsMSwxKSksRD1uZXcgVEhSRUUuQm94MyxGPUFycmF5KDMpLE89bmV3IFRIUkVFLk1hdHJpeDQseD1uZXcgVEhSRUUuTWF0cml4NCxJLEI9bmV3IFRIUkVFLk1hdHJpeDQsTT1uZXcgVEhSRUUuTWF0cml4MyxKPW5ldyBUSFJFRS5NYXRyaXgzLGNhPW5ldyBUSFJFRS5WZWN0b3IzLG5hPW5ldyBUSFJFRS5GcnVzdHVtLHBhPW5ldyBUSFJFRS5WZWN0b3I0LEM9bmV3IFRIUkVFLlZlY3RvcjQ7dGhpcy5wcm9qZWN0VmVjdG9yPWZ1bmN0aW9uKGEsYil7Yi5tYXRyaXhXb3JsZEludmVyc2UuZ2V0SW52ZXJzZShiLm1hdHJpeFdvcmxkKTtcbngubXVsdGlwbHlNYXRyaWNlcyhiLnByb2plY3Rpb25NYXRyaXgsYi5tYXRyaXhXb3JsZEludmVyc2UpO3JldHVybiBhLmFwcGx5UHJvamVjdGlvbih4KX07dGhpcy51bnByb2plY3RWZWN0b3I9ZnVuY3Rpb24oYSxiKXtiLnByb2plY3Rpb25NYXRyaXhJbnZlcnNlLmdldEludmVyc2UoYi5wcm9qZWN0aW9uTWF0cml4KTt4Lm11bHRpcGx5TWF0cmljZXMoYi5tYXRyaXhXb3JsZCxiLnByb2plY3Rpb25NYXRyaXhJbnZlcnNlKTtyZXR1cm4gYS5hcHBseVByb2plY3Rpb24oeCl9O3RoaXMucGlja2luZ1JheT1mdW5jdGlvbihhLGIpe2Euej0tMTt2YXIgYz1uZXcgVEhSRUUuVmVjdG9yMyhhLngsYS55LDEpO3RoaXMudW5wcm9qZWN0VmVjdG9yKGEsYik7dGhpcy51bnByb2plY3RWZWN0b3IoYyxiKTtjLnN1YihhKS5ub3JtYWxpemUoKTtyZXR1cm4gbmV3IFRIUkVFLlJheWNhc3RlcihhLGMpfTt2YXIgUT1mdW5jdGlvbihhKXtpZihlPT09aCl7dmFyIGI9bmV3IFRIUkVFLlJlbmRlcmFibGVPYmplY3Q7XG5mLnB1c2goYik7aCsrO2UrKztkPWJ9ZWxzZSBkPWZbZSsrXTtkLmlkPWEuaWQ7ZC5vYmplY3Q9YTtudWxsIT09YS5yZW5kZXJEZXB0aD9kLno9YS5yZW5kZXJEZXB0aDooRS5zZXRGcm9tTWF0cml4UG9zaXRpb24oYS5tYXRyaXhXb3JsZCksRS5hcHBseVByb2plY3Rpb24oeCksZC56PUUueik7cmV0dXJuIGR9LFI9ZnVuY3Rpb24oYSl7aWYoITEhPT1hLnZpc2libGUpe2EgaW5zdGFuY2VvZiBUSFJFRS5MaWdodD95LmxpZ2h0cy5wdXNoKGEpOmEgaW5zdGFuY2VvZiBUSFJFRS5NZXNofHxhIGluc3RhbmNlb2YgVEhSRUUuTGluZT8oITE9PT1hLmZydXN0dW1DdWxsZWR8fCEwPT09bmEuaW50ZXJzZWN0c09iamVjdChhKSkmJnkub2JqZWN0cy5wdXNoKFEoYSkpOmEgaW5zdGFuY2VvZiBUSFJFRS5TcHJpdGUmJnkuc3ByaXRlcy5wdXNoKFEoYSkpO2Zvcih2YXIgYj0wLGM9YS5jaGlsZHJlbi5sZW5ndGg7YjxjO2IrKylSKGEuY2hpbGRyZW5bYl0pfX07dGhpcy5wcm9qZWN0U2NlbmU9ZnVuY3Rpb24oZCxcbmYsaCxtKXt2YXIgRT0hMSxRLCQsZWEsVixQLFksVSxqYSxzYSxoYSxLYSxHYTt6PW49cD0wO3kuZWxlbWVudHMubGVuZ3RoPTA7ITA9PT1kLmF1dG9VcGRhdGUmJmQudXBkYXRlTWF0cml4V29ybGQoKTt2b2lkIDA9PT1mLnBhcmVudCYmZi51cGRhdGVNYXRyaXhXb3JsZCgpO08uY29weShmLm1hdHJpeFdvcmxkSW52ZXJzZS5nZXRJbnZlcnNlKGYubWF0cml4V29ybGQpKTt4Lm11bHRpcGx5TWF0cmljZXMoZi5wcm9qZWN0aW9uTWF0cml4LE8pO0ouZ2V0Tm9ybWFsTWF0cml4KE8pO25hLnNldEZyb21NYXRyaXgoeCk7ZT0wO3kub2JqZWN0cy5sZW5ndGg9MDt5LnNwcml0ZXMubGVuZ3RoPTA7eS5saWdodHMubGVuZ3RoPTA7UihkKTshMD09PWgmJnkub2JqZWN0cy5zb3J0KGIpO2Q9MDtmb3IoaD15Lm9iamVjdHMubGVuZ3RoO2Q8aDtkKyspaWYoVT15Lm9iamVjdHNbZF0ub2JqZWN0LEk9VS5tYXRyaXhXb3JsZCxpPTAsVSBpbnN0YW5jZW9mIFRIUkVFLk1lc2gpe2phPVUuZ2VvbWV0cnk7XG5lYT1qYS52ZXJ0aWNlcztzYT1qYS5mYWNlcztqYT1qYS5mYWNlVmVydGV4VXZzO00uZ2V0Tm9ybWFsTWF0cml4KEkpO0thPVUubWF0ZXJpYWwgaW5zdGFuY2VvZiBUSFJFRS5NZXNoRmFjZU1hdGVyaWFsO0dhPSEwPT09S2E/VS5tYXRlcmlhbDpudWxsO1E9MDtmb3IoJD1lYS5sZW5ndGg7UTwkO1ErKyl7Zz1hKCk7Zy5wb3NpdGlvbldvcmxkLmNvcHkoZWFbUV0pLmFwcGx5TWF0cml4NChJKTtnLnBvc2l0aW9uU2NyZWVuLmNvcHkoZy5wb3NpdGlvbldvcmxkKS5hcHBseU1hdHJpeDQoeCk7dmFyIGthPTEvZy5wb3NpdGlvblNjcmVlbi53O2cucG9zaXRpb25TY3JlZW4ueCo9a2E7Zy5wb3NpdGlvblNjcmVlbi55Kj1rYTtnLnBvc2l0aW9uU2NyZWVuLnoqPWthO2cudmlzaWJsZT0hKC0xPmcucG9zaXRpb25TY3JlZW4ueHx8MTxnLnBvc2l0aW9uU2NyZWVuLnh8fC0xPmcucG9zaXRpb25TY3JlZW4ueXx8MTxnLnBvc2l0aW9uU2NyZWVuLnl8fC0xPmcucG9zaXRpb25TY3JlZW4uenx8MTxcbmcucG9zaXRpb25TY3JlZW4ueil9ZWE9MDtmb3IoUT1zYS5sZW5ndGg7ZWE8UTtlYSsrKWlmKCQ9c2FbZWFdLGthPSEwPT09S2E/R2EubWF0ZXJpYWxzWyQubWF0ZXJpYWxJbmRleF06VS5tYXRlcmlhbCx2b2lkIDAhPT1rYSYmKFk9a2Euc2lkZSxWPWtbJC5hXSxQPWtbJC5iXSxoYT1rWyQuY10sRlswXT1WLnBvc2l0aW9uU2NyZWVuLEZbMV09UC5wb3NpdGlvblNjcmVlbixGWzJdPWhhLnBvc2l0aW9uU2NyZWVuLCEwPT09Vi52aXNpYmxlfHwhMD09PVAudmlzaWJsZXx8ITA9PT1oYS52aXNpYmxlfHxLLmlzSW50ZXJzZWN0aW9uQm94KEQuc2V0RnJvbVBvaW50cyhGKSkpKWlmKEU9MD4oaGEucG9zaXRpb25TY3JlZW4ueC1WLnBvc2l0aW9uU2NyZWVuLngpKihQLnBvc2l0aW9uU2NyZWVuLnktVi5wb3NpdGlvblNjcmVlbi55KS0oaGEucG9zaXRpb25TY3JlZW4ueS1WLnBvc2l0aW9uU2NyZWVuLnkpKihQLnBvc2l0aW9uU2NyZWVuLngtVi5wb3NpdGlvblNjcmVlbi54KSxZPT09VEhSRUUuRG91YmxlU2lkZXx8XG5FPT09KFk9PT1USFJFRS5Gcm9udFNpZGUpKXtpZihwPT09cyl7dmFyIERhPW5ldyBUSFJFRS5SZW5kZXJhYmxlRmFjZTM7dC5wdXNoKERhKTtzKys7cCsrO2w9RGF9ZWxzZSBsPXRbcCsrXTtsLmlkPVUuaWQ7bC52MS5jb3B5KFYpO2wudjIuY29weShQKTtsLnYzLmNvcHkoaGEpO2wubm9ybWFsTW9kZWwuY29weSgkLm5vcm1hbCk7ITE9PT1FJiYoWT09PVRIUkVFLkJhY2tTaWRlfHxZPT09VEhSRUUuRG91YmxlU2lkZSkmJmwubm9ybWFsTW9kZWwubmVnYXRlKCk7bC5ub3JtYWxNb2RlbC5hcHBseU1hdHJpeDMoTSkubm9ybWFsaXplKCk7bC5ub3JtYWxNb2RlbFZpZXcuY29weShsLm5vcm1hbE1vZGVsKS5hcHBseU1hdHJpeDMoSik7bC5jZW50cm9pZE1vZGVsLmNvcHkoJC5jZW50cm9pZCkuYXBwbHlNYXRyaXg0KEkpO2hhPSQudmVydGV4Tm9ybWFscztWPTA7Zm9yKFA9TWF0aC5taW4oaGEubGVuZ3RoLDMpO1Y8UDtWKyspRGE9bC52ZXJ0ZXhOb3JtYWxzTW9kZWxbVl0sRGEuY29weShoYVtWXSksXG4hMT09PUUmJihZPT09VEhSRUUuQmFja1NpZGV8fFk9PT1USFJFRS5Eb3VibGVTaWRlKSYmRGEubmVnYXRlKCksRGEuYXBwbHlNYXRyaXgzKE0pLm5vcm1hbGl6ZSgpLGwudmVydGV4Tm9ybWFsc01vZGVsVmlld1tWXS5jb3B5KERhKS5hcHBseU1hdHJpeDMoSik7bC52ZXJ0ZXhOb3JtYWxzTGVuZ3RoPWhhLmxlbmd0aDtFPTA7Zm9yKFY9TWF0aC5taW4oamEubGVuZ3RoLDMpO0U8VjtFKyspaWYoaGE9amFbRV1bZWFdLHZvaWQgMCE9PWhhKXtQPTA7Zm9yKFk9aGEubGVuZ3RoO1A8WTtQKyspbC51dnNbRV1bUF09aGFbUF19bC5jb2xvcj0kLmNvbG9yO2wubWF0ZXJpYWw9a2E7Y2EuY29weShsLmNlbnRyb2lkTW9kZWwpLmFwcGx5UHJvamVjdGlvbih4KTtsLno9Y2Euejt5LmVsZW1lbnRzLnB1c2gobCl9fWVsc2UgaWYoVSBpbnN0YW5jZW9mIFRIUkVFLkxpbmUpe0IubXVsdGlwbHlNYXRyaWNlcyh4LEkpO2VhPVUuZ2VvbWV0cnkudmVydGljZXM7Vj1hKCk7Vi5wb3NpdGlvblNjcmVlbi5jb3B5KGVhWzBdKS5hcHBseU1hdHJpeDQoQik7XG5zYT1VLnR5cGU9PT1USFJFRS5MaW5lUGllY2VzPzI6MTtRPTE7Zm9yKCQ9ZWEubGVuZ3RoO1E8JDtRKyspVj1hKCksVi5wb3NpdGlvblNjcmVlbi5jb3B5KGVhW1FdKS5hcHBseU1hdHJpeDQoQiksMDwoUSsxKSVzYXx8KFA9a1tpLTJdLHBhLmNvcHkoVi5wb3NpdGlvblNjcmVlbiksQy5jb3B5KFAucG9zaXRpb25TY3JlZW4pLCEwPT09YyhwYSxDKSYmKHBhLm11bHRpcGx5U2NhbGFyKDEvcGEudyksQy5tdWx0aXBseVNjYWxhcigxL0Mudyksbj09PXI/KGphPW5ldyBUSFJFRS5SZW5kZXJhYmxlTGluZSx1LnB1c2goamEpLHIrKyxuKysscT1qYSk6cT11W24rK10scS5pZD1VLmlkLHEudjEucG9zaXRpb25TY3JlZW4uY29weShwYSkscS52Mi5wb3NpdGlvblNjcmVlbi5jb3B5KEMpLHEuej1NYXRoLm1heChwYS56LEMueikscS5tYXRlcmlhbD1VLm1hdGVyaWFsLFUubWF0ZXJpYWwudmVydGV4Q29sb3JzPT09VEhSRUUuVmVydGV4Q29sb3JzJiYocS52ZXJ0ZXhDb2xvcnNbMF0uY29weShVLmdlb21ldHJ5LmNvbG9yc1tRXSksXG5xLnZlcnRleENvbG9yc1sxXS5jb3B5KFUuZ2VvbWV0cnkuY29sb3JzW1EtMV0pKSx5LmVsZW1lbnRzLnB1c2gocSkpKX1kPTA7Zm9yKGg9eS5zcHJpdGVzLmxlbmd0aDtkPGg7ZCsrKVU9eS5zcHJpdGVzW2RdLm9iamVjdCxJPVUubWF0cml4V29ybGQsQS5zZXQoSS5lbGVtZW50c1sxMl0sSS5lbGVtZW50c1sxM10sSS5lbGVtZW50c1sxNF0sMSksQS5hcHBseU1hdHJpeDQoeCksa2E9MS9BLncsQS56Kj1rYSwtMTw9QS56JiYxPj1BLnomJih6PT09dz8oc2E9bmV3IFRIUkVFLlJlbmRlcmFibGVTcHJpdGUsRy5wdXNoKHNhKSx3KysseisrLHY9c2EpOnY9R1t6KytdLHYuaWQ9VS5pZCx2Lng9QS54KmthLHYueT1BLnkqa2Esdi56PUEueix2Lm9iamVjdD1VLHYucm90YXRpb249VS5yb3RhdGlvbix2LnNjYWxlLng9VS5zY2FsZS54Kk1hdGguYWJzKHYueC0oQS54K2YucHJvamVjdGlvbk1hdHJpeC5lbGVtZW50c1swXSkvKEEudytmLnByb2plY3Rpb25NYXRyaXguZWxlbWVudHNbMTJdKSksXG52LnNjYWxlLnk9VS5zY2FsZS55Kk1hdGguYWJzKHYueS0oQS55K2YucHJvamVjdGlvbk1hdHJpeC5lbGVtZW50c1s1XSkvKEEudytmLnByb2plY3Rpb25NYXRyaXguZWxlbWVudHNbMTNdKSksdi5tYXRlcmlhbD1VLm1hdGVyaWFsLHkuZWxlbWVudHMucHVzaCh2KSk7ITA9PT1tJiZ5LmVsZW1lbnRzLnNvcnQoYik7cmV0dXJuIHl9fTtUSFJFRS5GYWNlMz1mdW5jdGlvbihhLGIsYyxkLGUsZil7dGhpcy5hPWE7dGhpcy5iPWI7dGhpcy5jPWM7dGhpcy5ub3JtYWw9ZCBpbnN0YW5jZW9mIFRIUkVFLlZlY3RvcjM/ZDpuZXcgVEhSRUUuVmVjdG9yMzt0aGlzLnZlcnRleE5vcm1hbHM9ZCBpbnN0YW5jZW9mIEFycmF5P2Q6W107dGhpcy5jb2xvcj1lIGluc3RhbmNlb2YgVEhSRUUuQ29sb3I/ZTpuZXcgVEhSRUUuQ29sb3I7dGhpcy52ZXJ0ZXhDb2xvcnM9ZSBpbnN0YW5jZW9mIEFycmF5P2U6W107dGhpcy52ZXJ0ZXhUYW5nZW50cz1bXTt0aGlzLm1hdGVyaWFsSW5kZXg9dm9pZCAwIT09Zj9mOjA7dGhpcy5jZW50cm9pZD1uZXcgVEhSRUUuVmVjdG9yM307XG5USFJFRS5GYWNlMy5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLkZhY2UzLGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLkZhY2UzKHRoaXMuYSx0aGlzLmIsdGhpcy5jKTthLm5vcm1hbC5jb3B5KHRoaXMubm9ybWFsKTthLmNvbG9yLmNvcHkodGhpcy5jb2xvcik7YS5jZW50cm9pZC5jb3B5KHRoaXMuY2VudHJvaWQpO2EubWF0ZXJpYWxJbmRleD10aGlzLm1hdGVyaWFsSW5kZXg7dmFyIGIsYztiPTA7Zm9yKGM9dGhpcy52ZXJ0ZXhOb3JtYWxzLmxlbmd0aDtiPGM7YisrKWEudmVydGV4Tm9ybWFsc1tiXT10aGlzLnZlcnRleE5vcm1hbHNbYl0uY2xvbmUoKTtiPTA7Zm9yKGM9dGhpcy52ZXJ0ZXhDb2xvcnMubGVuZ3RoO2I8YztiKyspYS52ZXJ0ZXhDb2xvcnNbYl09dGhpcy52ZXJ0ZXhDb2xvcnNbYl0uY2xvbmUoKTtiPTA7Zm9yKGM9dGhpcy52ZXJ0ZXhUYW5nZW50cy5sZW5ndGg7YjxjO2IrKylhLnZlcnRleFRhbmdlbnRzW2JdPXRoaXMudmVydGV4VGFuZ2VudHNbYl0uY2xvbmUoKTtcbnJldHVybiBhfX07VEhSRUUuRmFjZTQ9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsaCl7Y29uc29sZS53YXJuKFwiVEhSRUUuRmFjZTQgaGFzIGJlZW4gcmVtb3ZlZC4gQSBUSFJFRS5GYWNlMyB3aWxsIGJlIGNyZWF0ZWQgaW5zdGVhZC5cIik7cmV0dXJuIG5ldyBUSFJFRS5GYWNlMyhhLGIsYyxlLGYsaCl9O1RIUkVFLkdlb21ldHJ5PWZ1bmN0aW9uKCl7dGhpcy5pZD1USFJFRS5HZW9tZXRyeUlkQ291bnQrKzt0aGlzLnV1aWQ9VEhSRUUuTWF0aC5nZW5lcmF0ZVVVSUQoKTt0aGlzLm5hbWU9XCJcIjt0aGlzLnZlcnRpY2VzPVtdO3RoaXMuY29sb3JzPVtdO3RoaXMuZmFjZXM9W107dGhpcy5mYWNlVmVydGV4VXZzPVtbXV07dGhpcy5tb3JwaFRhcmdldHM9W107dGhpcy5tb3JwaENvbG9ycz1bXTt0aGlzLm1vcnBoTm9ybWFscz1bXTt0aGlzLnNraW5XZWlnaHRzPVtdO3RoaXMuc2tpbkluZGljZXM9W107dGhpcy5saW5lRGlzdGFuY2VzPVtdO3RoaXMuYm91bmRpbmdTcGhlcmU9dGhpcy5ib3VuZGluZ0JveD1udWxsO3RoaXMuaGFzVGFuZ2VudHM9ITE7dGhpcy5keW5hbWljPSEwO3RoaXMuYnVmZmVyc05lZWRVcGRhdGU9dGhpcy5saW5lRGlzdGFuY2VzTmVlZFVwZGF0ZT10aGlzLmNvbG9yc05lZWRVcGRhdGU9dGhpcy50YW5nZW50c05lZWRVcGRhdGU9dGhpcy5ub3JtYWxzTmVlZFVwZGF0ZT10aGlzLnV2c05lZWRVcGRhdGU9XG50aGlzLmVsZW1lbnRzTmVlZFVwZGF0ZT10aGlzLnZlcnRpY2VzTmVlZFVwZGF0ZT0hMX07XG5USFJFRS5HZW9tZXRyeS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLkdlb21ldHJ5LGFwcGx5TWF0cml4OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0obmV3IFRIUkVFLk1hdHJpeDMpLmdldE5vcm1hbE1hdHJpeChhKSxjPTAsZD10aGlzLnZlcnRpY2VzLmxlbmd0aDtjPGQ7YysrKXRoaXMudmVydGljZXNbY10uYXBwbHlNYXRyaXg0KGEpO2M9MDtmb3IoZD10aGlzLmZhY2VzLmxlbmd0aDtjPGQ7YysrKXt2YXIgZT10aGlzLmZhY2VzW2NdO2Uubm9ybWFsLmFwcGx5TWF0cml4MyhiKS5ub3JtYWxpemUoKTtmb3IodmFyIGY9MCxoPWUudmVydGV4Tm9ybWFscy5sZW5ndGg7ZjxoO2YrKyllLnZlcnRleE5vcm1hbHNbZl0uYXBwbHlNYXRyaXgzKGIpLm5vcm1hbGl6ZSgpO2UuY2VudHJvaWQuYXBwbHlNYXRyaXg0KGEpfXRoaXMuYm91bmRpbmdCb3ggaW5zdGFuY2VvZiBUSFJFRS5Cb3gzJiZ0aGlzLmNvbXB1dGVCb3VuZGluZ0JveCgpO3RoaXMuYm91bmRpbmdTcGhlcmUgaW5zdGFuY2VvZlxuVEhSRUUuU3BoZXJlJiZ0aGlzLmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpfSxjb21wdXRlQ2VudHJvaWRzOmZ1bmN0aW9uKCl7dmFyIGEsYixjO2E9MDtmb3IoYj10aGlzLmZhY2VzLmxlbmd0aDthPGI7YSsrKWM9dGhpcy5mYWNlc1thXSxjLmNlbnRyb2lkLnNldCgwLDAsMCksYy5jZW50cm9pZC5hZGQodGhpcy52ZXJ0aWNlc1tjLmFdKSxjLmNlbnRyb2lkLmFkZCh0aGlzLnZlcnRpY2VzW2MuYl0pLGMuY2VudHJvaWQuYWRkKHRoaXMudmVydGljZXNbYy5jXSksYy5jZW50cm9pZC5kaXZpZGVTY2FsYXIoMyl9LGNvbXB1dGVGYWNlTm9ybWFsczpmdW5jdGlvbigpe2Zvcih2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMyxiPW5ldyBUSFJFRS5WZWN0b3IzLGM9MCxkPXRoaXMuZmFjZXMubGVuZ3RoO2M8ZDtjKyspe3ZhciBlPXRoaXMuZmFjZXNbY10sZj10aGlzLnZlcnRpY2VzW2UuYV0saD10aGlzLnZlcnRpY2VzW2UuYl07YS5zdWJWZWN0b3JzKHRoaXMudmVydGljZXNbZS5jXSxoKTtiLnN1YlZlY3RvcnMoZixcbmgpO2EuY3Jvc3MoYik7YS5ub3JtYWxpemUoKTtlLm5vcm1hbC5jb3B5KGEpfX0sY29tcHV0ZVZlcnRleE5vcm1hbHM6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGU7aWYodm9pZCAwPT09dGhpcy5fX3RtcFZlcnRpY2VzKXtlPXRoaXMuX190bXBWZXJ0aWNlcz1BcnJheSh0aGlzLnZlcnRpY2VzLmxlbmd0aCk7Yj0wO2ZvcihjPXRoaXMudmVydGljZXMubGVuZ3RoO2I8YztiKyspZVtiXT1uZXcgVEhSRUUuVmVjdG9yMztiPTA7Zm9yKGM9dGhpcy5mYWNlcy5sZW5ndGg7YjxjO2IrKylkPXRoaXMuZmFjZXNbYl0sZC52ZXJ0ZXhOb3JtYWxzPVtuZXcgVEhSRUUuVmVjdG9yMyxuZXcgVEhSRUUuVmVjdG9yMyxuZXcgVEhSRUUuVmVjdG9yM119ZWxzZXtlPXRoaXMuX190bXBWZXJ0aWNlcztiPTA7Zm9yKGM9dGhpcy52ZXJ0aWNlcy5sZW5ndGg7YjxjO2IrKyllW2JdLnNldCgwLDAsMCl9aWYoYSl7dmFyIGYsaCxnPW5ldyBUSFJFRS5WZWN0b3IzLGk9bmV3IFRIUkVFLlZlY3RvcjM7bmV3IFRIUkVFLlZlY3RvcjM7XG5uZXcgVEhSRUUuVmVjdG9yMztuZXcgVEhSRUUuVmVjdG9yMztiPTA7Zm9yKGM9dGhpcy5mYWNlcy5sZW5ndGg7YjxjO2IrKylkPXRoaXMuZmFjZXNbYl0sYT10aGlzLnZlcnRpY2VzW2QuYV0sZj10aGlzLnZlcnRpY2VzW2QuYl0saD10aGlzLnZlcnRpY2VzW2QuY10sZy5zdWJWZWN0b3JzKGgsZiksaS5zdWJWZWN0b3JzKGEsZiksZy5jcm9zcyhpKSxlW2QuYV0uYWRkKGcpLGVbZC5iXS5hZGQoZyksZVtkLmNdLmFkZChnKX1lbHNle2I9MDtmb3IoYz10aGlzLmZhY2VzLmxlbmd0aDtiPGM7YisrKWQ9dGhpcy5mYWNlc1tiXSxlW2QuYV0uYWRkKGQubm9ybWFsKSxlW2QuYl0uYWRkKGQubm9ybWFsKSxlW2QuY10uYWRkKGQubm9ybWFsKX1iPTA7Zm9yKGM9dGhpcy52ZXJ0aWNlcy5sZW5ndGg7YjxjO2IrKyllW2JdLm5vcm1hbGl6ZSgpO2I9MDtmb3IoYz10aGlzLmZhY2VzLmxlbmd0aDtiPGM7YisrKWQ9dGhpcy5mYWNlc1tiXSxkLnZlcnRleE5vcm1hbHNbMF0uY29weShlW2QuYV0pLGQudmVydGV4Tm9ybWFsc1sxXS5jb3B5KGVbZC5iXSksXG5kLnZlcnRleE5vcm1hbHNbMl0uY29weShlW2QuY10pfSxjb21wdXRlTW9ycGhOb3JtYWxzOmZ1bmN0aW9uKCl7dmFyIGEsYixjLGQsZTtjPTA7Zm9yKGQ9dGhpcy5mYWNlcy5sZW5ndGg7YzxkO2MrKyl7ZT10aGlzLmZhY2VzW2NdO2UuX19vcmlnaW5hbEZhY2VOb3JtYWw/ZS5fX29yaWdpbmFsRmFjZU5vcm1hbC5jb3B5KGUubm9ybWFsKTplLl9fb3JpZ2luYWxGYWNlTm9ybWFsPWUubm9ybWFsLmNsb25lKCk7ZS5fX29yaWdpbmFsVmVydGV4Tm9ybWFsc3x8KGUuX19vcmlnaW5hbFZlcnRleE5vcm1hbHM9W10pO2E9MDtmb3IoYj1lLnZlcnRleE5vcm1hbHMubGVuZ3RoO2E8YjthKyspZS5fX29yaWdpbmFsVmVydGV4Tm9ybWFsc1thXT9lLl9fb3JpZ2luYWxWZXJ0ZXhOb3JtYWxzW2FdLmNvcHkoZS52ZXJ0ZXhOb3JtYWxzW2FdKTplLl9fb3JpZ2luYWxWZXJ0ZXhOb3JtYWxzW2FdPWUudmVydGV4Tm9ybWFsc1thXS5jbG9uZSgpfXZhciBmPW5ldyBUSFJFRS5HZW9tZXRyeTtmLmZhY2VzPVxudGhpcy5mYWNlczthPTA7Zm9yKGI9dGhpcy5tb3JwaFRhcmdldHMubGVuZ3RoO2E8YjthKyspe2lmKCF0aGlzLm1vcnBoTm9ybWFsc1thXSl7dGhpcy5tb3JwaE5vcm1hbHNbYV09e307dGhpcy5tb3JwaE5vcm1hbHNbYV0uZmFjZU5vcm1hbHM9W107dGhpcy5tb3JwaE5vcm1hbHNbYV0udmVydGV4Tm9ybWFscz1bXTtlPXRoaXMubW9ycGhOb3JtYWxzW2FdLmZhY2VOb3JtYWxzO3ZhciBoPXRoaXMubW9ycGhOb3JtYWxzW2FdLnZlcnRleE5vcm1hbHMsZyxpO2M9MDtmb3IoZD10aGlzLmZhY2VzLmxlbmd0aDtjPGQ7YysrKWc9bmV3IFRIUkVFLlZlY3RvcjMsaT17YTpuZXcgVEhSRUUuVmVjdG9yMyxiOm5ldyBUSFJFRS5WZWN0b3IzLGM6bmV3IFRIUkVFLlZlY3RvcjN9LGUucHVzaChnKSxoLnB1c2goaSl9aD10aGlzLm1vcnBoTm9ybWFsc1thXTtmLnZlcnRpY2VzPXRoaXMubW9ycGhUYXJnZXRzW2FdLnZlcnRpY2VzO2YuY29tcHV0ZUZhY2VOb3JtYWxzKCk7Zi5jb21wdXRlVmVydGV4Tm9ybWFscygpO1xuYz0wO2ZvcihkPXRoaXMuZmFjZXMubGVuZ3RoO2M8ZDtjKyspZT10aGlzLmZhY2VzW2NdLGc9aC5mYWNlTm9ybWFsc1tjXSxpPWgudmVydGV4Tm9ybWFsc1tjXSxnLmNvcHkoZS5ub3JtYWwpLGkuYS5jb3B5KGUudmVydGV4Tm9ybWFsc1swXSksaS5iLmNvcHkoZS52ZXJ0ZXhOb3JtYWxzWzFdKSxpLmMuY29weShlLnZlcnRleE5vcm1hbHNbMl0pfWM9MDtmb3IoZD10aGlzLmZhY2VzLmxlbmd0aDtjPGQ7YysrKWU9dGhpcy5mYWNlc1tjXSxlLm5vcm1hbD1lLl9fb3JpZ2luYWxGYWNlTm9ybWFsLGUudmVydGV4Tm9ybWFscz1lLl9fb3JpZ2luYWxWZXJ0ZXhOb3JtYWxzfSxjb21wdXRlVGFuZ2VudHM6ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZCxlLGYsaCxnLGksayxtLGwscCx0LHMscSxuLHU9W10scj1bXTtjPW5ldyBUSFJFRS5WZWN0b3IzO3ZhciB2PW5ldyBUSFJFRS5WZWN0b3IzLHo9bmV3IFRIUkVFLlZlY3RvcjMsRz1uZXcgVEhSRUUuVmVjdG9yMyx3PW5ldyBUSFJFRS5WZWN0b3IzO1xuYT0wO2ZvcihiPXRoaXMudmVydGljZXMubGVuZ3RoO2E8YjthKyspdVthXT1uZXcgVEhSRUUuVmVjdG9yMyxyW2FdPW5ldyBUSFJFRS5WZWN0b3IzO2E9MDtmb3IoYj10aGlzLmZhY2VzLmxlbmd0aDthPGI7YSsrKWU9dGhpcy5mYWNlc1thXSxmPXRoaXMuZmFjZVZlcnRleFV2c1swXVthXSxkPWUuYSxuPWUuYixlPWUuYyxoPXRoaXMudmVydGljZXNbZF0sZz10aGlzLnZlcnRpY2VzW25dLGk9dGhpcy52ZXJ0aWNlc1tlXSxrPWZbMF0sbT1mWzFdLGw9ZlsyXSxmPWcueC1oLngscD1pLngtaC54LHQ9Zy55LWgueSxzPWkueS1oLnksZz1nLnotaC56LGg9aS56LWgueixpPW0ueC1rLngscT1sLngtay54LG09bS55LWsueSxrPWwueS1rLnksbD0xLyhpKmstcSptKSxjLnNldCgoaypmLW0qcCkqbCwoayp0LW0qcykqbCwoaypnLW0qaCkqbCksdi5zZXQoKGkqcC1xKmYpKmwsKGkqcy1xKnQpKmwsKGkqaC1xKmcpKmwpLHVbZF0uYWRkKGMpLHVbbl0uYWRkKGMpLHVbZV0uYWRkKGMpLHJbZF0uYWRkKHYpLFxucltuXS5hZGQodikscltlXS5hZGQodik7dj1bXCJhXCIsXCJiXCIsXCJjXCIsXCJkXCJdO2E9MDtmb3IoYj10aGlzLmZhY2VzLmxlbmd0aDthPGI7YSsrKXtlPXRoaXMuZmFjZXNbYV07Zm9yKGM9MDtjPE1hdGgubWluKGUudmVydGV4Tm9ybWFscy5sZW5ndGgsMyk7YysrKXcuY29weShlLnZlcnRleE5vcm1hbHNbY10pLGQ9ZVt2W2NdXSxuPXVbZF0sei5jb3B5KG4pLHouc3ViKHcubXVsdGlwbHlTY2FsYXIody5kb3QobikpKS5ub3JtYWxpemUoKSxHLmNyb3NzVmVjdG9ycyhlLnZlcnRleE5vcm1hbHNbY10sbiksZD1HLmRvdChyW2RdKSxkPTA+ZD8tMToxLGUudmVydGV4VGFuZ2VudHNbY109bmV3IFRIUkVFLlZlY3RvcjQoei54LHoueSx6LnosZCl9dGhpcy5oYXNUYW5nZW50cz0hMH0sY29tcHV0ZUxpbmVEaXN0YW5jZXM6ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPXRoaXMudmVydGljZXMsYz0wLGQ9Yi5sZW5ndGg7YzxkO2MrKykwPGMmJihhKz1iW2NdLmRpc3RhbmNlVG8oYltjLTFdKSksdGhpcy5saW5lRGlzdGFuY2VzW2NdPVxuYX0sY29tcHV0ZUJvdW5kaW5nQm94OmZ1bmN0aW9uKCl7bnVsbD09PXRoaXMuYm91bmRpbmdCb3gmJih0aGlzLmJvdW5kaW5nQm94PW5ldyBUSFJFRS5Cb3gzKTt0aGlzLmJvdW5kaW5nQm94LnNldEZyb21Qb2ludHModGhpcy52ZXJ0aWNlcyl9LGNvbXB1dGVCb3VuZGluZ1NwaGVyZTpmdW5jdGlvbigpe251bGw9PT10aGlzLmJvdW5kaW5nU3BoZXJlJiYodGhpcy5ib3VuZGluZ1NwaGVyZT1uZXcgVEhSRUUuU3BoZXJlKTt0aGlzLmJvdW5kaW5nU3BoZXJlLnNldEZyb21Qb2ludHModGhpcy52ZXJ0aWNlcyl9LG1lcmdlVmVydGljZXM6ZnVuY3Rpb24oKXt2YXIgYT17fSxiPVtdLGM9W10sZCxlPU1hdGgucG93KDEwLDQpLGYsaDt0aGlzLl9fdG1wVmVydGljZXM9dm9pZCAwO2Y9MDtmb3IoaD10aGlzLnZlcnRpY2VzLmxlbmd0aDtmPGg7ZisrKWQ9dGhpcy52ZXJ0aWNlc1tmXSxkPU1hdGgucm91bmQoZC54KmUpK1wiX1wiK01hdGgucm91bmQoZC55KmUpK1wiX1wiK01hdGgucm91bmQoZC56KlxuZSksdm9pZCAwPT09YVtkXT8oYVtkXT1mLGIucHVzaCh0aGlzLnZlcnRpY2VzW2ZdKSxjW2ZdPWIubGVuZ3RoLTEpOmNbZl09Y1thW2RdXTthPVtdO2Y9MDtmb3IoaD10aGlzLmZhY2VzLmxlbmd0aDtmPGg7ZisrKXtlPXRoaXMuZmFjZXNbZl07ZS5hPWNbZS5hXTtlLmI9Y1tlLmJdO2UuYz1jW2UuY107ZT1bZS5hLGUuYixlLmNdO2ZvcihkPTA7Mz5kO2QrKylpZihlW2RdPT1lWyhkKzEpJTNdKXthLnB1c2goZik7YnJlYWt9fWZvcihmPWEubGVuZ3RoLTE7MDw9ZjtmLS0pe2U9YVtmXTt0aGlzLmZhY2VzLnNwbGljZShlLDEpO2M9MDtmb3IoaD10aGlzLmZhY2VWZXJ0ZXhVdnMubGVuZ3RoO2M8aDtjKyspdGhpcy5mYWNlVmVydGV4VXZzW2NdLnNwbGljZShlLDEpfWY9dGhpcy52ZXJ0aWNlcy5sZW5ndGgtYi5sZW5ndGg7dGhpcy52ZXJ0aWNlcz1iO3JldHVybiBmfSxjbG9uZTpmdW5jdGlvbigpe2Zvcih2YXIgYT1uZXcgVEhSRUUuR2VvbWV0cnksYj10aGlzLnZlcnRpY2VzLGM9MCxkPVxuYi5sZW5ndGg7YzxkO2MrKylhLnZlcnRpY2VzLnB1c2goYltjXS5jbG9uZSgpKTtiPXRoaXMuZmFjZXM7Yz0wO2ZvcihkPWIubGVuZ3RoO2M8ZDtjKyspYS5mYWNlcy5wdXNoKGJbY10uY2xvbmUoKSk7Yj10aGlzLmZhY2VWZXJ0ZXhVdnNbMF07Yz0wO2ZvcihkPWIubGVuZ3RoO2M8ZDtjKyspe2Zvcih2YXIgZT1iW2NdLGY9W10saD0wLGc9ZS5sZW5ndGg7aDxnO2grKylmLnB1c2gobmV3IFRIUkVFLlZlY3RvcjIoZVtoXS54LGVbaF0ueSkpO2EuZmFjZVZlcnRleFV2c1swXS5wdXNoKGYpfXJldHVybiBhfSxkaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiZGlzcG9zZVwifSl9fTtUSFJFRS5FdmVudERpc3BhdGNoZXIucHJvdG90eXBlLmFwcGx5KFRIUkVFLkdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuR2VvbWV0cnlJZENvdW50PTA7VEhSRUUuQnVmZmVyR2VvbWV0cnk9ZnVuY3Rpb24oKXt0aGlzLmlkPVRIUkVFLkdlb21ldHJ5SWRDb3VudCsrO3RoaXMudXVpZD1USFJFRS5NYXRoLmdlbmVyYXRlVVVJRCgpO3RoaXMubmFtZT1cIlwiO3RoaXMuYXR0cmlidXRlcz17fTt0aGlzLmR5bmFtaWM9ITA7dGhpcy5vZmZzZXRzPVtdO3RoaXMuYm91bmRpbmdTcGhlcmU9dGhpcy5ib3VuZGluZ0JveD1udWxsO3RoaXMuaGFzVGFuZ2VudHM9ITE7dGhpcy5tb3JwaFRhcmdldHM9W119O1xuVEhSRUUuQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5CdWZmZXJHZW9tZXRyeSxhZGRBdHRyaWJ1dGU6ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy5hdHRyaWJ1dGVzW2FdPXtpdGVtU2l6ZTpkLGFycmF5Om5ldyBiKGMqZCl9fSxhcHBseU1hdHJpeDpmdW5jdGlvbihhKXt2YXIgYixjO3RoaXMuYXR0cmlidXRlcy5wb3NpdGlvbiYmKGI9dGhpcy5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5KTt0aGlzLmF0dHJpYnV0ZXMubm9ybWFsJiYoYz10aGlzLmF0dHJpYnV0ZXMubm9ybWFsLmFycmF5KTt2b2lkIDAhPT1iJiYoYS5tdWx0aXBseVZlY3RvcjNBcnJheShiKSx0aGlzLnZlcnRpY2VzTmVlZFVwZGF0ZT0hMCk7dm9pZCAwIT09YyYmKChuZXcgVEhSRUUuTWF0cml4MykuZ2V0Tm9ybWFsTWF0cml4KGEpLm11bHRpcGx5VmVjdG9yM0FycmF5KGMpLHRoaXMubm9ybWFsaXplTm9ybWFscygpLHRoaXMubm9ybWFsc05lZWRVcGRhdGU9ITApfSxjb21wdXRlQm91bmRpbmdCb3g6ZnVuY3Rpb24oKXtudWxsPT09XG50aGlzLmJvdW5kaW5nQm94JiYodGhpcy5ib3VuZGluZ0JveD1uZXcgVEhSRUUuQm94Myk7dmFyIGE9dGhpcy5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5O2lmKGEpe3ZhciBiPXRoaXMuYm91bmRpbmdCb3gsYyxkLGU7Mzw9YS5sZW5ndGgmJihiLm1pbi54PWIubWF4Lng9YVswXSxiLm1pbi55PWIubWF4Lnk9YVsxXSxiLm1pbi56PWIubWF4Lno9YVsyXSk7Zm9yKHZhciBmPTMsaD1hLmxlbmd0aDtmPGg7Zis9MyljPWFbZl0sZD1hW2YrMV0sZT1hW2YrMl0sYzxiLm1pbi54P2IubWluLng9YzpjPmIubWF4LngmJihiLm1heC54PWMpLGQ8Yi5taW4ueT9iLm1pbi55PWQ6ZD5iLm1heC55JiYoYi5tYXgueT1kKSxlPGIubWluLno/Yi5taW4uej1lOmU+Yi5tYXgueiYmKGIubWF4Lno9ZSl9aWYodm9pZCAwPT09YXx8MD09PWEubGVuZ3RoKXRoaXMuYm91bmRpbmdCb3gubWluLnNldCgwLDAsMCksdGhpcy5ib3VuZGluZ0JveC5tYXguc2V0KDAsMCwwKX0sY29tcHV0ZUJvdW5kaW5nU3BoZXJlOmZ1bmN0aW9uKCl7dmFyIGE9XG5uZXcgVEhSRUUuQm94MyxiPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbigpe251bGw9PT10aGlzLmJvdW5kaW5nU3BoZXJlJiYodGhpcy5ib3VuZGluZ1NwaGVyZT1uZXcgVEhSRUUuU3BoZXJlKTt2YXIgYz10aGlzLmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXk7aWYoYyl7Zm9yKHZhciBkPXRoaXMuYm91bmRpbmdTcGhlcmUuY2VudGVyLGU9MCxmPWMubGVuZ3RoO2U8ZjtlKz0zKWIuc2V0KGNbZV0sY1tlKzFdLGNbZSsyXSksYS5hZGRQb2ludChiKTthLmNlbnRlcihkKTtmb3IodmFyIGg9MCxlPTAsZj1jLmxlbmd0aDtlPGY7ZSs9MyliLnNldChjW2VdLGNbZSsxXSxjW2UrMl0pLGg9TWF0aC5tYXgoaCxkLmRpc3RhbmNlVG9TcXVhcmVkKGIpKTt0aGlzLmJvdW5kaW5nU3BoZXJlLnJhZGl1cz1NYXRoLnNxcnQoaCl9fX0oKSxjb21wdXRlVmVydGV4Tm9ybWFsczpmdW5jdGlvbigpe2lmKHRoaXMuYXR0cmlidXRlcy5wb3NpdGlvbil7dmFyIGEsYixjLGQ7YT10aGlzLmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXkubGVuZ3RoO1xuaWYodm9pZCAwPT09dGhpcy5hdHRyaWJ1dGVzLm5vcm1hbCl0aGlzLmF0dHJpYnV0ZXMubm9ybWFsPXtpdGVtU2l6ZTozLGFycmF5Om5ldyBGbG9hdDMyQXJyYXkoYSl9O2Vsc2V7YT0wO2ZvcihiPXRoaXMuYXR0cmlidXRlcy5ub3JtYWwuYXJyYXkubGVuZ3RoO2E8YjthKyspdGhpcy5hdHRyaWJ1dGVzLm5vcm1hbC5hcnJheVthXT0wfXZhciBlPXRoaXMuYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheSxmPXRoaXMuYXR0cmlidXRlcy5ub3JtYWwuYXJyYXksaCxnLGksayxtLGwscD1uZXcgVEhSRUUuVmVjdG9yMyx0PW5ldyBUSFJFRS5WZWN0b3IzLHM9bmV3IFRIUkVFLlZlY3RvcjMscT1uZXcgVEhSRUUuVmVjdG9yMyxuPW5ldyBUSFJFRS5WZWN0b3IzO2lmKHRoaXMuYXR0cmlidXRlcy5pbmRleCl7dmFyIHU9dGhpcy5hdHRyaWJ1dGVzLmluZGV4LmFycmF5LHI9dGhpcy5vZmZzZXRzO2M9MDtmb3IoZD1yLmxlbmd0aDtjPGQ7KytjKXtiPXJbY10uc3RhcnQ7aD1yW2NdLmNvdW50O3ZhciB2PVxucltjXS5pbmRleDthPWI7Zm9yKGIrPWg7YTxiO2ErPTMpaD12K3VbYV0sZz12K3VbYSsxXSxpPXYrdVthKzJdLGs9ZVszKmhdLG09ZVszKmgrMV0sbD1lWzMqaCsyXSxwLnNldChrLG0sbCksaz1lWzMqZ10sbT1lWzMqZysxXSxsPWVbMypnKzJdLHQuc2V0KGssbSxsKSxrPWVbMyppXSxtPWVbMyppKzFdLGw9ZVszKmkrMl0scy5zZXQoayxtLGwpLHEuc3ViVmVjdG9ycyhzLHQpLG4uc3ViVmVjdG9ycyhwLHQpLHEuY3Jvc3MobiksZlszKmhdKz1xLngsZlszKmgrMV0rPXEueSxmWzMqaCsyXSs9cS56LGZbMypnXSs9cS54LGZbMypnKzFdKz1xLnksZlszKmcrMl0rPXEueixmWzMqaV0rPXEueCxmWzMqaSsxXSs9cS55LGZbMyppKzJdKz1xLnp9fWVsc2V7YT0wO2ZvcihiPWUubGVuZ3RoO2E8YjthKz05KWs9ZVthXSxtPWVbYSsxXSxsPWVbYSsyXSxwLnNldChrLG0sbCksaz1lW2ErM10sbT1lW2ErNF0sbD1lW2ErNV0sdC5zZXQoayxtLGwpLGs9ZVthKzZdLG09ZVthKzddLGw9ZVthKzhdLFxucy5zZXQoayxtLGwpLHEuc3ViVmVjdG9ycyhzLHQpLG4uc3ViVmVjdG9ycyhwLHQpLHEuY3Jvc3MobiksZlthXT1xLngsZlthKzFdPXEueSxmW2ErMl09cS56LGZbYSszXT1xLngsZlthKzRdPXEueSxmW2ErNV09cS56LGZbYSs2XT1xLngsZlthKzddPXEueSxmW2ErOF09cS56fXRoaXMubm9ybWFsaXplTm9ybWFscygpO3RoaXMubm9ybWFsc05lZWRVcGRhdGU9ITB9fSxub3JtYWxpemVOb3JtYWxzOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuYXR0cmlidXRlcy5ub3JtYWwuYXJyYXksYixjLGQsZT0wLGY9YS5sZW5ndGg7ZTxmO2UrPTMpYj1hW2VdLGM9YVtlKzFdLGQ9YVtlKzJdLGI9MS9NYXRoLnNxcnQoYipiK2MqYytkKmQpLGFbZV0qPWIsYVtlKzFdKj1iLGFbZSsyXSo9Yn0sY29tcHV0ZVRhbmdlbnRzOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXtuYS54PWRbMyphXTtuYS55PWRbMyphKzFdO25hLno9ZFszKmErMl07cGEuY29weShuYSk7UT1nW2FdO0ouY29weShRKTtKLnN1YihuYS5tdWx0aXBseVNjYWxhcihuYS5kb3QoUSkpKS5ub3JtYWxpemUoKTtcbmNhLmNyb3NzVmVjdG9ycyhwYSxRKTtSPWNhLmRvdChpW2FdKTtDPTA+Uj8tMToxO2hbNCphXT1KLng7aFs0KmErMV09Si55O2hbNCphKzJdPUouejtoWzQqYSszXT1DfWlmKHZvaWQgMD09PXRoaXMuYXR0cmlidXRlcy5pbmRleHx8dm9pZCAwPT09dGhpcy5hdHRyaWJ1dGVzLnBvc2l0aW9ufHx2b2lkIDA9PT10aGlzLmF0dHJpYnV0ZXMubm9ybWFsfHx2b2lkIDA9PT10aGlzLmF0dHJpYnV0ZXMudXYpY29uc29sZS53YXJuKFwiTWlzc2luZyByZXF1aXJlZCBhdHRyaWJ1dGVzIChpbmRleCwgcG9zaXRpb24sIG5vcm1hbCBvciB1dikgaW4gQnVmZmVyR2VvbWV0cnkuY29tcHV0ZVRhbmdlbnRzKClcIik7ZWxzZXt2YXIgYj10aGlzLmF0dHJpYnV0ZXMuaW5kZXguYXJyYXksYz10aGlzLmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXksZD10aGlzLmF0dHJpYnV0ZXMubm9ybWFsLmFycmF5LGU9dGhpcy5hdHRyaWJ1dGVzLnV2LmFycmF5LGY9Yy5sZW5ndGgvMzt2b2lkIDA9PT10aGlzLmF0dHJpYnV0ZXMudGFuZ2VudCYmXG4odGhpcy5hdHRyaWJ1dGVzLnRhbmdlbnQ9e2l0ZW1TaXplOjQsYXJyYXk6bmV3IEZsb2F0MzJBcnJheSg0KmYpfSk7Zm9yKHZhciBoPXRoaXMuYXR0cmlidXRlcy50YW5nZW50LmFycmF5LGc9W10saT1bXSxrPTA7azxmO2srKylnW2tdPW5ldyBUSFJFRS5WZWN0b3IzLGlba109bmV3IFRIUkVFLlZlY3RvcjM7dmFyIG0sbCxwLHQscyxxLG4sdSxyLHYseixHLHcseSxFLGY9bmV3IFRIUkVFLlZlY3RvcjMsaz1uZXcgVEhSRUUuVmVjdG9yMyxBLEssRCxGLE8seCxJLEI9dGhpcy5vZmZzZXRzO0Q9MDtmb3IoRj1CLmxlbmd0aDtEPEY7KytEKXtLPUJbRF0uc3RhcnQ7Tz1CW0RdLmNvdW50O3ZhciBNPUJbRF0uaW5kZXg7QT1LO2ZvcihLKz1PO0E8SztBKz0zKU89TStiW0FdLHg9TStiW0ErMV0sST1NK2JbQSsyXSxtPWNbMypPXSxsPWNbMypPKzFdLHA9Y1szKk8rMl0sdD1jWzMqeF0scz1jWzMqeCsxXSxxPWNbMyp4KzJdLG49Y1szKkldLHU9Y1szKkkrMV0scj1jWzMqSSsyXSx2PWVbMipcbk9dLHo9ZVsyKk8rMV0sRz1lWzIqeF0sdz1lWzIqeCsxXSx5PWVbMipJXSxFPWVbMipJKzFdLHQtPW0sbT1uLW0scy09bCxsPXUtbCxxLT1wLHA9ci1wLEctPXYsdj15LXYsdy09eix6PUUteixFPTEvKEcqei12KncpLGYuc2V0KCh6KnQtdyptKSpFLCh6KnMtdypsKSpFLCh6KnEtdypwKSpFKSxrLnNldCgoRyptLXYqdCkqRSwoRypsLXYqcykqRSwoRypwLXYqcSkqRSksZ1tPXS5hZGQoZiksZ1t4XS5hZGQoZiksZ1tJXS5hZGQoZiksaVtPXS5hZGQoayksaVt4XS5hZGQoayksaVtJXS5hZGQoayl9dmFyIEo9bmV3IFRIUkVFLlZlY3RvcjMsY2E9bmV3IFRIUkVFLlZlY3RvcjMsbmE9bmV3IFRIUkVFLlZlY3RvcjMscGE9bmV3IFRIUkVFLlZlY3RvcjMsQyxRLFI7RD0wO2ZvcihGPUIubGVuZ3RoO0Q8RjsrK0Qpe0s9QltEXS5zdGFydDtPPUJbRF0uY291bnQ7TT1CW0RdLmluZGV4O0E9Sztmb3IoSys9TztBPEs7QSs9MylPPU0rYltBXSx4PU0rYltBKzFdLEk9TStiW0ErMl0sYShPKSxhKHgpLFxuYShJKX10aGlzLnRhbmdlbnRzTmVlZFVwZGF0ZT10aGlzLmhhc1RhbmdlbnRzPSEwfX0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnksYj1bSW50OEFycmF5LFVpbnQ4QXJyYXksVWludDhDbGFtcGVkQXJyYXksSW50MTZBcnJheSxVaW50MTZBcnJheSxJbnQzMkFycmF5LFVpbnQzMkFycmF5LEZsb2F0MzJBcnJheSxGbG9hdDY0QXJyYXldLGM7Zm9yKGMgaW4gdGhpcy5hdHRyaWJ1dGVzKXtmb3IodmFyIGQ9dGhpcy5hdHRyaWJ1dGVzW2NdLGU9ZC5hcnJheSxmPXtpdGVtU2l6ZTpkLml0ZW1TaXplLG51bUl0ZW1zOmQubnVtSXRlbXMsYXJyYXk6bnVsbH0sZD0wLGg9Yi5sZW5ndGg7ZDxoO2QrKyl7dmFyIGc9YltkXTtpZihlIGluc3RhbmNlb2YgZyl7Zi5hcnJheT1uZXcgZyhlKTticmVha319YS5hdHRyaWJ1dGVzW2NdPWZ9ZD0wO2ZvcihoPXRoaXMub2Zmc2V0cy5sZW5ndGg7ZDxoO2QrKyliPXRoaXMub2Zmc2V0c1tkXSxhLm9mZnNldHMucHVzaCh7c3RhcnQ6Yi5zdGFydCxcbmluZGV4OmIuaW5kZXgsY291bnQ6Yi5jb3VudH0pO3JldHVybiBhfSxkaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiZGlzcG9zZVwifSl9fTtUSFJFRS5FdmVudERpc3BhdGNoZXIucHJvdG90eXBlLmFwcGx5KFRIUkVFLkJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuQ2FtZXJhPWZ1bmN0aW9uKCl7VEhSRUUuT2JqZWN0M0QuY2FsbCh0aGlzKTt0aGlzLm1hdHJpeFdvcmxkSW52ZXJzZT1uZXcgVEhSRUUuTWF0cml4NDt0aGlzLnByb2plY3Rpb25NYXRyaXg9bmV3IFRIUkVFLk1hdHJpeDQ7dGhpcy5wcm9qZWN0aW9uTWF0cml4SW52ZXJzZT1uZXcgVEhSRUUuTWF0cml4NH07VEhSRUUuQ2FtZXJhLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSk7VEhSRUUuQ2FtZXJhLnByb3RvdHlwZS5sb29rQXQ9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuTWF0cml4NDtyZXR1cm4gZnVuY3Rpb24oYil7YS5sb29rQXQodGhpcy5wb3NpdGlvbixiLHRoaXMudXApO3RoaXMucXVhdGVybmlvbi5zZXRGcm9tUm90YXRpb25NYXRyaXgoYSl9fSgpO1xuVEhSRUUuQ2FtZXJhLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbihhKXt2b2lkIDA9PT1hJiYoYT1uZXcgVEhSRUUuQ2FtZXJhKTtUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzLGEpO2EubWF0cml4V29ybGRJbnZlcnNlLmNvcHkodGhpcy5tYXRyaXhXb3JsZEludmVyc2UpO2EucHJvamVjdGlvbk1hdHJpeC5jb3B5KHRoaXMucHJvamVjdGlvbk1hdHJpeCk7YS5wcm9qZWN0aW9uTWF0cml4SW52ZXJzZS5jb3B5KHRoaXMucHJvamVjdGlvbk1hdHJpeEludmVyc2UpO3JldHVybiBhfTtUSFJFRS5PcnRob2dyYXBoaWNDYW1lcmE9ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe1RIUkVFLkNhbWVyYS5jYWxsKHRoaXMpO3RoaXMubGVmdD1hO3RoaXMucmlnaHQ9Yjt0aGlzLnRvcD1jO3RoaXMuYm90dG9tPWQ7dGhpcy5uZWFyPXZvaWQgMCE9PWU/ZTowLjE7dGhpcy5mYXI9dm9pZCAwIT09Zj9mOjJFMzt0aGlzLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKX07VEhSRUUuT3J0aG9ncmFwaGljQ2FtZXJhLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkNhbWVyYS5wcm90b3R5cGUpO1RIUkVFLk9ydGhvZ3JhcGhpY0NhbWVyYS5wcm90b3R5cGUudXBkYXRlUHJvamVjdGlvbk1hdHJpeD1mdW5jdGlvbigpe3RoaXMucHJvamVjdGlvbk1hdHJpeC5tYWtlT3J0aG9ncmFwaGljKHRoaXMubGVmdCx0aGlzLnJpZ2h0LHRoaXMudG9wLHRoaXMuYm90dG9tLHRoaXMubmVhcix0aGlzLmZhcil9O1xuVEhSRUUuT3J0aG9ncmFwaGljQ2FtZXJhLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5PcnRob2dyYXBoaWNDYW1lcmE7VEhSRUUuQ2FtZXJhLnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMsYSk7YS5sZWZ0PXRoaXMubGVmdDthLnJpZ2h0PXRoaXMucmlnaHQ7YS50b3A9dGhpcy50b3A7YS5ib3R0b209dGhpcy5ib3R0b207YS5uZWFyPXRoaXMubmVhcjthLmZhcj10aGlzLmZhcjtyZXR1cm4gYX07VEhSRUUuUGVyc3BlY3RpdmVDYW1lcmE9ZnVuY3Rpb24oYSxiLGMsZCl7VEhSRUUuQ2FtZXJhLmNhbGwodGhpcyk7dGhpcy5mb3Y9dm9pZCAwIT09YT9hOjUwO3RoaXMuYXNwZWN0PXZvaWQgMCE9PWI/YjoxO3RoaXMubmVhcj12b2lkIDAhPT1jP2M6MC4xO3RoaXMuZmFyPXZvaWQgMCE9PWQ/ZDoyRTM7dGhpcy51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCl9O1RIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkNhbWVyYS5wcm90b3R5cGUpO1RIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhLnByb3RvdHlwZS5zZXRMZW5zPWZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9MjQpO3RoaXMuZm92PTIqVEhSRUUuTWF0aC5yYWRUb0RlZyhNYXRoLmF0YW4oYi8oMiphKSkpO3RoaXMudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpfTtcblRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhLnByb3RvdHlwZS5zZXRWaWV3T2Zmc2V0PWZ1bmN0aW9uKGEsYixjLGQsZSxmKXt0aGlzLmZ1bGxXaWR0aD1hO3RoaXMuZnVsbEhlaWdodD1iO3RoaXMueD1jO3RoaXMueT1kO3RoaXMud2lkdGg9ZTt0aGlzLmhlaWdodD1mO3RoaXMudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpfTtcblRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhLnByb3RvdHlwZS51cGRhdGVQcm9qZWN0aW9uTWF0cml4PWZ1bmN0aW9uKCl7aWYodGhpcy5mdWxsV2lkdGgpe3ZhciBhPXRoaXMuZnVsbFdpZHRoL3RoaXMuZnVsbEhlaWdodCxiPU1hdGgudGFuKFRIUkVFLk1hdGguZGVnVG9SYWQoMC41KnRoaXMuZm92KSkqdGhpcy5uZWFyLGM9LWIsZD1hKmMsYT1NYXRoLmFicyhhKmItZCksYz1NYXRoLmFicyhiLWMpO3RoaXMucHJvamVjdGlvbk1hdHJpeC5tYWtlRnJ1c3R1bShkK3RoaXMueCphL3RoaXMuZnVsbFdpZHRoLGQrKHRoaXMueCt0aGlzLndpZHRoKSphL3RoaXMuZnVsbFdpZHRoLGItKHRoaXMueSt0aGlzLmhlaWdodCkqYy90aGlzLmZ1bGxIZWlnaHQsYi10aGlzLnkqYy90aGlzLmZ1bGxIZWlnaHQsdGhpcy5uZWFyLHRoaXMuZmFyKX1lbHNlIHRoaXMucHJvamVjdGlvbk1hdHJpeC5tYWtlUGVyc3BlY3RpdmUodGhpcy5mb3YsdGhpcy5hc3BlY3QsdGhpcy5uZWFyLHRoaXMuZmFyKX07XG5USFJFRS5QZXJzcGVjdGl2ZUNhbWVyYS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmE7VEhSRUUuQ2FtZXJhLnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMsYSk7YS5mb3Y9dGhpcy5mb3Y7YS5hc3BlY3Q9dGhpcy5hc3BlY3Q7YS5uZWFyPXRoaXMubmVhcjthLmZhcj10aGlzLmZhcjtyZXR1cm4gYX07VEhSRUUuTGlnaHQ9ZnVuY3Rpb24oYSl7VEhSRUUuT2JqZWN0M0QuY2FsbCh0aGlzKTt0aGlzLmNvbG9yPW5ldyBUSFJFRS5Db2xvcihhKX07VEhSRUUuTGlnaHQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlKTtUSFJFRS5MaWdodC5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oYSl7dm9pZCAwPT09YSYmKGE9bmV3IFRIUkVFLkxpZ2h0KTtUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzLGEpO2EuY29sb3IuY29weSh0aGlzLmNvbG9yKTtyZXR1cm4gYX07VEhSRUUuQW1iaWVudExpZ2h0PWZ1bmN0aW9uKGEpe1RIUkVFLkxpZ2h0LmNhbGwodGhpcyxhKX07VEhSRUUuQW1iaWVudExpZ2h0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkxpZ2h0LnByb3RvdHlwZSk7VEhSRUUuQW1iaWVudExpZ2h0LnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5BbWJpZW50TGlnaHQ7VEhSRUUuTGlnaHQucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyxhKTtyZXR1cm4gYX07VEhSRUUuQXJlYUxpZ2h0PWZ1bmN0aW9uKGEsYil7VEhSRUUuTGlnaHQuY2FsbCh0aGlzLGEpO3RoaXMubm9ybWFsPW5ldyBUSFJFRS5WZWN0b3IzKDAsLTEsMCk7dGhpcy5yaWdodD1uZXcgVEhSRUUuVmVjdG9yMygxLDAsMCk7dGhpcy5pbnRlbnNpdHk9dm9pZCAwIT09Yj9iOjE7dGhpcy5oZWlnaHQ9dGhpcy53aWR0aD0xO3RoaXMuY29uc3RhbnRBdHRlbnVhdGlvbj0xLjU7dGhpcy5saW5lYXJBdHRlbnVhdGlvbj0wLjU7dGhpcy5xdWFkcmF0aWNBdHRlbnVhdGlvbj0wLjF9O1RIUkVFLkFyZWFMaWdodC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5MaWdodC5wcm90b3R5cGUpO1RIUkVFLkRpcmVjdGlvbmFsTGlnaHQ9ZnVuY3Rpb24oYSxiKXtUSFJFRS5MaWdodC5jYWxsKHRoaXMsYSk7dGhpcy5wb3NpdGlvbi5zZXQoMCwxLDApO3RoaXMudGFyZ2V0PW5ldyBUSFJFRS5PYmplY3QzRDt0aGlzLmludGVuc2l0eT12b2lkIDAhPT1iP2I6MTt0aGlzLm9ubHlTaGFkb3c9dGhpcy5jYXN0U2hhZG93PSExO3RoaXMuc2hhZG93Q2FtZXJhTmVhcj01MDt0aGlzLnNoYWRvd0NhbWVyYUZhcj01RTM7dGhpcy5zaGFkb3dDYW1lcmFMZWZ0PS01MDA7dGhpcy5zaGFkb3dDYW1lcmFUb3A9dGhpcy5zaGFkb3dDYW1lcmFSaWdodD01MDA7dGhpcy5zaGFkb3dDYW1lcmFCb3R0b209LTUwMDt0aGlzLnNoYWRvd0NhbWVyYVZpc2libGU9ITE7dGhpcy5zaGFkb3dCaWFzPTA7dGhpcy5zaGFkb3dEYXJrbmVzcz0wLjU7dGhpcy5zaGFkb3dNYXBIZWlnaHQ9dGhpcy5zaGFkb3dNYXBXaWR0aD01MTI7dGhpcy5zaGFkb3dDYXNjYWRlPSExO3RoaXMuc2hhZG93Q2FzY2FkZU9mZnNldD1uZXcgVEhSRUUuVmVjdG9yMygwLFxuMCwtMUUzKTt0aGlzLnNoYWRvd0Nhc2NhZGVDb3VudD0yO3RoaXMuc2hhZG93Q2FzY2FkZUJpYXM9WzAsMCwwXTt0aGlzLnNoYWRvd0Nhc2NhZGVXaWR0aD1bNTEyLDUxMiw1MTJdO3RoaXMuc2hhZG93Q2FzY2FkZUhlaWdodD1bNTEyLDUxMiw1MTJdO3RoaXMuc2hhZG93Q2FzY2FkZU5lYXJaPVstMSwwLjk5LDAuOTk4XTt0aGlzLnNoYWRvd0Nhc2NhZGVGYXJaPVswLjk5LDAuOTk4LDFdO3RoaXMuc2hhZG93Q2FzY2FkZUFycmF5PVtdO3RoaXMuc2hhZG93TWF0cml4PXRoaXMuc2hhZG93Q2FtZXJhPXRoaXMuc2hhZG93TWFwU2l6ZT10aGlzLnNoYWRvd01hcD1udWxsfTtUSFJFRS5EaXJlY3Rpb25hbExpZ2h0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkxpZ2h0LnByb3RvdHlwZSk7XG5USFJFRS5EaXJlY3Rpb25hbExpZ2h0LnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0O1RIUkVFLkxpZ2h0LnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMsYSk7YS50YXJnZXQ9dGhpcy50YXJnZXQuY2xvbmUoKTthLmludGVuc2l0eT10aGlzLmludGVuc2l0eTthLmNhc3RTaGFkb3c9dGhpcy5jYXN0U2hhZG93O2Eub25seVNoYWRvdz10aGlzLm9ubHlTaGFkb3c7cmV0dXJuIGF9O1RIUkVFLkhlbWlzcGhlcmVMaWdodD1mdW5jdGlvbihhLGIsYyl7VEhSRUUuTGlnaHQuY2FsbCh0aGlzLGEpO3RoaXMucG9zaXRpb24uc2V0KDAsMTAwLDApO3RoaXMuZ3JvdW5kQ29sb3I9bmV3IFRIUkVFLkNvbG9yKGIpO3RoaXMuaW50ZW5zaXR5PXZvaWQgMCE9PWM/YzoxfTtUSFJFRS5IZW1pc3BoZXJlTGlnaHQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTGlnaHQucHJvdG90eXBlKTtUSFJFRS5IZW1pc3BoZXJlTGlnaHQucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLkhlbWlzcGhlcmVMaWdodDtUSFJFRS5MaWdodC5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzLGEpO2EuZ3JvdW5kQ29sb3IuY29weSh0aGlzLmdyb3VuZENvbG9yKTthLmludGVuc2l0eT10aGlzLmludGVuc2l0eTtyZXR1cm4gYX07VEhSRUUuUG9pbnRMaWdodD1mdW5jdGlvbihhLGIsYyl7VEhSRUUuTGlnaHQuY2FsbCh0aGlzLGEpO3RoaXMuaW50ZW5zaXR5PXZvaWQgMCE9PWI/YjoxO3RoaXMuZGlzdGFuY2U9dm9pZCAwIT09Yz9jOjB9O1RIUkVFLlBvaW50TGlnaHQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTGlnaHQucHJvdG90eXBlKTtUSFJFRS5Qb2ludExpZ2h0LnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5Qb2ludExpZ2h0O1RIUkVFLkxpZ2h0LnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMsYSk7YS5pbnRlbnNpdHk9dGhpcy5pbnRlbnNpdHk7YS5kaXN0YW5jZT10aGlzLmRpc3RhbmNlO3JldHVybiBhfTtUSFJFRS5TcG90TGlnaHQ9ZnVuY3Rpb24oYSxiLGMsZCxlKXtUSFJFRS5MaWdodC5jYWxsKHRoaXMsYSk7dGhpcy5wb3NpdGlvbi5zZXQoMCwxLDApO3RoaXMudGFyZ2V0PW5ldyBUSFJFRS5PYmplY3QzRDt0aGlzLmludGVuc2l0eT12b2lkIDAhPT1iP2I6MTt0aGlzLmRpc3RhbmNlPXZvaWQgMCE9PWM/YzowO3RoaXMuYW5nbGU9dm9pZCAwIT09ZD9kOk1hdGguUEkvMzt0aGlzLmV4cG9uZW50PXZvaWQgMCE9PWU/ZToxMDt0aGlzLm9ubHlTaGFkb3c9dGhpcy5jYXN0U2hhZG93PSExO3RoaXMuc2hhZG93Q2FtZXJhTmVhcj01MDt0aGlzLnNoYWRvd0NhbWVyYUZhcj01RTM7dGhpcy5zaGFkb3dDYW1lcmFGb3Y9NTA7dGhpcy5zaGFkb3dDYW1lcmFWaXNpYmxlPSExO3RoaXMuc2hhZG93Qmlhcz0wO3RoaXMuc2hhZG93RGFya25lc3M9MC41O3RoaXMuc2hhZG93TWFwSGVpZ2h0PXRoaXMuc2hhZG93TWFwV2lkdGg9NTEyO3RoaXMuc2hhZG93TWF0cml4PXRoaXMuc2hhZG93Q2FtZXJhPXRoaXMuc2hhZG93TWFwU2l6ZT1cbnRoaXMuc2hhZG93TWFwPW51bGx9O1RIUkVFLlNwb3RMaWdodC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5MaWdodC5wcm90b3R5cGUpO1RIUkVFLlNwb3RMaWdodC5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuU3BvdExpZ2h0O1RIUkVFLkxpZ2h0LnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMsYSk7YS50YXJnZXQ9dGhpcy50YXJnZXQuY2xvbmUoKTthLmludGVuc2l0eT10aGlzLmludGVuc2l0eTthLmRpc3RhbmNlPXRoaXMuZGlzdGFuY2U7YS5hbmdsZT10aGlzLmFuZ2xlO2EuZXhwb25lbnQ9dGhpcy5leHBvbmVudDthLmNhc3RTaGFkb3c9dGhpcy5jYXN0U2hhZG93O2Eub25seVNoYWRvdz10aGlzLm9ubHlTaGFkb3c7cmV0dXJuIGF9O1RIUkVFLkxvYWRlcj1mdW5jdGlvbihhKXt0aGlzLnN0YXR1c0RvbUVsZW1lbnQ9KHRoaXMuc2hvd1N0YXR1cz1hKT9USFJFRS5Mb2FkZXIucHJvdG90eXBlLmFkZFN0YXR1c0VsZW1lbnQoKTpudWxsO3RoaXMub25Mb2FkU3RhcnQ9ZnVuY3Rpb24oKXt9O3RoaXMub25Mb2FkUHJvZ3Jlc3M9ZnVuY3Rpb24oKXt9O3RoaXMub25Mb2FkQ29tcGxldGU9ZnVuY3Rpb24oKXt9fTtcblRIUkVFLkxvYWRlci5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLkxvYWRlcixjcm9zc09yaWdpbjpcImFub255bW91c1wiLGFkZFN0YXR1c0VsZW1lbnQ6ZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2Euc3R5bGUucG9zaXRpb249XCJhYnNvbHV0ZVwiO2Euc3R5bGUucmlnaHQ9XCIwcHhcIjthLnN0eWxlLnRvcD1cIjBweFwiO2Euc3R5bGUuZm9udFNpemU9XCIwLjhlbVwiO2Euc3R5bGUudGV4dEFsaWduPVwibGVmdFwiO2Euc3R5bGUuYmFja2dyb3VuZD1cInJnYmEoMCwwLDAsMC4yNSlcIjthLnN0eWxlLmNvbG9yPVwiI2ZmZlwiO2Euc3R5bGUud2lkdGg9XCIxMjBweFwiO2Euc3R5bGUucGFkZGluZz1cIjAuNWVtIDAuNWVtIDAuNWVtIDAuNWVtXCI7YS5zdHlsZS56SW5kZXg9MUUzO2EuaW5uZXJIVE1MPVwiTG9hZGluZyAuLi5cIjtyZXR1cm4gYX0sdXBkYXRlUHJvZ3Jlc3M6ZnVuY3Rpb24oYSl7dmFyIGI9XCJMb2FkZWQgXCIsYj1hLnRvdGFsP2IrKCgxMDAqYS5sb2FkZWQvXG5hLnRvdGFsKS50b0ZpeGVkKDApK1wiJVwiKTpiKygoYS5sb2FkZWQvMUUzKS50b0ZpeGVkKDIpK1wiIEtCXCIpO3RoaXMuc3RhdHVzRG9tRWxlbWVudC5pbm5lckhUTUw9Yn0sZXh0cmFjdFVybEJhc2U6ZnVuY3Rpb24oYSl7YT1hLnNwbGl0KFwiL1wiKTthLnBvcCgpO3JldHVybigxPmEubGVuZ3RoP1wiLlwiOmEuam9pbihcIi9cIikpK1wiL1wifSxpbml0TWF0ZXJpYWxzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPVtdLGQ9MDtkPGEubGVuZ3RoOysrZCljW2RdPVRIUkVFLkxvYWRlci5wcm90b3R5cGUuY3JlYXRlTWF0ZXJpYWwoYVtkXSxiKTtyZXR1cm4gY30sbmVlZHNUYW5nZW50czpmdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPWEubGVuZ3RoO2I8YztiKyspaWYoYVtiXWluc3RhbmNlb2YgVEhSRUUuU2hhZGVyTWF0ZXJpYWwpcmV0dXJuITA7cmV0dXJuITF9LGNyZWF0ZU1hdGVyaWFsOmZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhKXthPU1hdGgubG9nKGEpL01hdGguTE4yO3JldHVybiBNYXRoLmZsb29yKGEpPT1cbmF9ZnVuY3Rpb24gZChhKXthPU1hdGgubG9nKGEpL01hdGguTE4yO3JldHVybiBNYXRoLnBvdygyLE1hdGgucm91bmQoYSkpfWZ1bmN0aW9uIGUoYSxlLGYsZyxpLGssbil7dmFyIHU9L1xcLmRkcyQvaS50ZXN0KGYpLHI9YitcIi9cIitmO2lmKHUpe3ZhciB2PVRIUkVFLkltYWdlVXRpbHMubG9hZENvbXByZXNzZWRUZXh0dXJlKHIpO2FbZV09dn1lbHNlIHY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSxhW2VdPW5ldyBUSFJFRS5UZXh0dXJlKHYpO2FbZV0uc291cmNlRmlsZT1mO2cmJihhW2VdLnJlcGVhdC5zZXQoZ1swXSxnWzFdKSwxIT09Z1swXSYmKGFbZV0ud3JhcFM9VEhSRUUuUmVwZWF0V3JhcHBpbmcpLDEhPT1nWzFdJiYoYVtlXS53cmFwVD1USFJFRS5SZXBlYXRXcmFwcGluZykpO2kmJmFbZV0ub2Zmc2V0LnNldChpWzBdLGlbMV0pO2smJihmPXtyZXBlYXQ6VEhSRUUuUmVwZWF0V3JhcHBpbmcsbWlycm9yOlRIUkVFLk1pcnJvcmVkUmVwZWF0V3JhcHBpbmd9LHZvaWQgMCE9PVxuZltrWzBdXSYmKGFbZV0ud3JhcFM9ZltrWzBdXSksdm9pZCAwIT09ZltrWzFdXSYmKGFbZV0ud3JhcFQ9ZltrWzFdXSkpO24mJihhW2VdLmFuaXNvdHJvcHk9bik7aWYoIXUpe3ZhciB6PWFbZV0sYT1uZXcgSW1hZ2U7YS5vbmxvYWQ9ZnVuY3Rpb24oKXtpZighYyh0aGlzLndpZHRoKXx8IWModGhpcy5oZWlnaHQpKXt2YXIgYT1kKHRoaXMud2lkdGgpLGI9ZCh0aGlzLmhlaWdodCk7ei5pbWFnZS53aWR0aD1hO3ouaW1hZ2UuaGVpZ2h0PWI7ei5pbWFnZS5nZXRDb250ZXh0KFwiMmRcIikuZHJhd0ltYWdlKHRoaXMsMCwwLGEsYil9ZWxzZSB6LmltYWdlPXRoaXM7ei5uZWVkc1VwZGF0ZT0hMH07YS5jcm9zc09yaWdpbj1oLmNyb3NzT3JpZ2luO2Euc3JjPXJ9fWZ1bmN0aW9uIGYoYSl7cmV0dXJuKDI1NSphWzBdPDwxNikrKDI1NSphWzFdPDw4KSsyNTUqYVsyXX12YXIgaD10aGlzLGc9XCJNZXNoTGFtYmVydE1hdGVyaWFsXCIsaT17Y29sb3I6MTU2NTg3MzQsb3BhY2l0eToxLG1hcDpudWxsLFxubGlnaHRNYXA6bnVsbCxub3JtYWxNYXA6bnVsbCxidW1wTWFwOm51bGwsd2lyZWZyYW1lOiExfTtpZihhLnNoYWRpbmcpe3ZhciBrPWEuc2hhZGluZy50b0xvd2VyQ2FzZSgpO1wicGhvbmdcIj09PWs/Zz1cIk1lc2hQaG9uZ01hdGVyaWFsXCI6XCJiYXNpY1wiPT09ayYmKGc9XCJNZXNoQmFzaWNNYXRlcmlhbFwiKX12b2lkIDAhPT1hLmJsZW5kaW5nJiZ2b2lkIDAhPT1USFJFRVthLmJsZW5kaW5nXSYmKGkuYmxlbmRpbmc9VEhSRUVbYS5ibGVuZGluZ10pO2lmKHZvaWQgMCE9PWEudHJhbnNwYXJlbnR8fDE+YS5vcGFjaXR5KWkudHJhbnNwYXJlbnQ9YS50cmFuc3BhcmVudDt2b2lkIDAhPT1hLmRlcHRoVGVzdCYmKGkuZGVwdGhUZXN0PWEuZGVwdGhUZXN0KTt2b2lkIDAhPT1hLmRlcHRoV3JpdGUmJihpLmRlcHRoV3JpdGU9YS5kZXB0aFdyaXRlKTt2b2lkIDAhPT1hLnZpc2libGUmJihpLnZpc2libGU9YS52aXNpYmxlKTt2b2lkIDAhPT1hLmZsaXBTaWRlZCYmKGkuc2lkZT1USFJFRS5CYWNrU2lkZSk7XG52b2lkIDAhPT1hLmRvdWJsZVNpZGVkJiYoaS5zaWRlPVRIUkVFLkRvdWJsZVNpZGUpO3ZvaWQgMCE9PWEud2lyZWZyYW1lJiYoaS53aXJlZnJhbWU9YS53aXJlZnJhbWUpO3ZvaWQgMCE9PWEudmVydGV4Q29sb3JzJiYoXCJmYWNlXCI9PT1hLnZlcnRleENvbG9ycz9pLnZlcnRleENvbG9ycz1USFJFRS5GYWNlQ29sb3JzOmEudmVydGV4Q29sb3JzJiYoaS52ZXJ0ZXhDb2xvcnM9VEhSRUUuVmVydGV4Q29sb3JzKSk7YS5jb2xvckRpZmZ1c2U/aS5jb2xvcj1mKGEuY29sb3JEaWZmdXNlKTphLkRiZ0NvbG9yJiYoaS5jb2xvcj1hLkRiZ0NvbG9yKTthLmNvbG9yU3BlY3VsYXImJihpLnNwZWN1bGFyPWYoYS5jb2xvclNwZWN1bGFyKSk7YS5jb2xvckFtYmllbnQmJihpLmFtYmllbnQ9ZihhLmNvbG9yQW1iaWVudCkpO2EudHJhbnNwYXJlbmN5JiYoaS5vcGFjaXR5PWEudHJhbnNwYXJlbmN5KTthLnNwZWN1bGFyQ29lZiYmKGkuc2hpbmluZXNzPWEuc3BlY3VsYXJDb2VmKTthLm1hcERpZmZ1c2UmJlxuYiYmZShpLFwibWFwXCIsYS5tYXBEaWZmdXNlLGEubWFwRGlmZnVzZVJlcGVhdCxhLm1hcERpZmZ1c2VPZmZzZXQsYS5tYXBEaWZmdXNlV3JhcCxhLm1hcERpZmZ1c2VBbmlzb3Ryb3B5KTthLm1hcExpZ2h0JiZiJiZlKGksXCJsaWdodE1hcFwiLGEubWFwTGlnaHQsYS5tYXBMaWdodFJlcGVhdCxhLm1hcExpZ2h0T2Zmc2V0LGEubWFwTGlnaHRXcmFwLGEubWFwTGlnaHRBbmlzb3Ryb3B5KTthLm1hcEJ1bXAmJmImJmUoaSxcImJ1bXBNYXBcIixhLm1hcEJ1bXAsYS5tYXBCdW1wUmVwZWF0LGEubWFwQnVtcE9mZnNldCxhLm1hcEJ1bXBXcmFwLGEubWFwQnVtcEFuaXNvdHJvcHkpO2EubWFwTm9ybWFsJiZiJiZlKGksXCJub3JtYWxNYXBcIixhLm1hcE5vcm1hbCxhLm1hcE5vcm1hbFJlcGVhdCxhLm1hcE5vcm1hbE9mZnNldCxhLm1hcE5vcm1hbFdyYXAsYS5tYXBOb3JtYWxBbmlzb3Ryb3B5KTthLm1hcFNwZWN1bGFyJiZiJiZlKGksXCJzcGVjdWxhck1hcFwiLGEubWFwU3BlY3VsYXIsYS5tYXBTcGVjdWxhclJlcGVhdCxcbmEubWFwU3BlY3VsYXJPZmZzZXQsYS5tYXBTcGVjdWxhcldyYXAsYS5tYXBTcGVjdWxhckFuaXNvdHJvcHkpO2EubWFwQnVtcFNjYWxlJiYoaS5idW1wU2NhbGU9YS5tYXBCdW1wU2NhbGUpO2EubWFwTm9ybWFsPyhnPVRIUkVFLlNoYWRlckxpYi5ub3JtYWxtYXAsaz1USFJFRS5Vbmlmb3Jtc1V0aWxzLmNsb25lKGcudW5pZm9ybXMpLGsudE5vcm1hbC52YWx1ZT1pLm5vcm1hbE1hcCxhLm1hcE5vcm1hbEZhY3RvciYmay51Tm9ybWFsU2NhbGUudmFsdWUuc2V0KGEubWFwTm9ybWFsRmFjdG9yLGEubWFwTm9ybWFsRmFjdG9yKSxpLm1hcCYmKGsudERpZmZ1c2UudmFsdWU9aS5tYXAsay5lbmFibGVEaWZmdXNlLnZhbHVlPSEwKSxpLnNwZWN1bGFyTWFwJiYoay50U3BlY3VsYXIudmFsdWU9aS5zcGVjdWxhck1hcCxrLmVuYWJsZVNwZWN1bGFyLnZhbHVlPSEwKSxpLmxpZ2h0TWFwJiYoay50QU8udmFsdWU9aS5saWdodE1hcCxrLmVuYWJsZUFPLnZhbHVlPSEwKSxrLnVEaWZmdXNlQ29sb3IudmFsdWUuc2V0SGV4KGkuY29sb3IpLFxuay51U3BlY3VsYXJDb2xvci52YWx1ZS5zZXRIZXgoaS5zcGVjdWxhciksay51QW1iaWVudENvbG9yLnZhbHVlLnNldEhleChpLmFtYmllbnQpLGsudVNoaW5pbmVzcy52YWx1ZT1pLnNoaW5pbmVzcyx2b2lkIDAhPT1pLm9wYWNpdHkmJihrLnVPcGFjaXR5LnZhbHVlPWkub3BhY2l0eSksZz1uZXcgVEhSRUUuU2hhZGVyTWF0ZXJpYWwoe2ZyYWdtZW50U2hhZGVyOmcuZnJhZ21lbnRTaGFkZXIsdmVydGV4U2hhZGVyOmcudmVydGV4U2hhZGVyLHVuaWZvcm1zOmssbGlnaHRzOiEwLGZvZzohMH0pLGkudHJhbnNwYXJlbnQmJihnLnRyYW5zcGFyZW50PSEwKSk6Zz1uZXcgVEhSRUVbZ10oaSk7dm9pZCAwIT09YS5EYmdOYW1lJiYoZy5uYW1lPWEuRGJnTmFtZSk7cmV0dXJuIGd9fTtUSFJFRS5YSFJMb2FkZXI9ZnVuY3Rpb24oYSl7dGhpcy5tYW5hZ2VyPXZvaWQgMCE9PWE/YTpUSFJFRS5EZWZhdWx0TG9hZGluZ01hbmFnZXJ9O1xuVEhSRUUuWEhSTG9hZGVyLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuWEhSTG9hZGVyLGxvYWQ6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9dGhpcyxmPW5ldyBYTUxIdHRwUmVxdWVzdDt2b2lkIDAhPT1iJiZmLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsZnVuY3Rpb24oYyl7YihjLnRhcmdldC5yZXNwb25zZVRleHQpO2UubWFuYWdlci5pdGVtRW5kKGEpfSwhMSk7dm9pZCAwIT09YyYmZi5hZGRFdmVudExpc3RlbmVyKFwicHJvZ3Jlc3NcIixmdW5jdGlvbihhKXtjKGEpfSwhMSk7dm9pZCAwIT09ZCYmZi5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIixmdW5jdGlvbihhKXtkKGEpfSwhMSk7dm9pZCAwIT09dGhpcy5jcm9zc09yaWdpbiYmKGYuY3Jvc3NPcmlnaW49dGhpcy5jcm9zc09yaWdpbik7Zi5vcGVuKFwiR0VUXCIsYSwhMCk7Zi5zZW5kKG51bGwpO2UubWFuYWdlci5pdGVtU3RhcnQoYSl9LHNldENyb3NzT3JpZ2luOmZ1bmN0aW9uKGEpe3RoaXMuY3Jvc3NPcmlnaW49YX19O1RIUkVFLkltYWdlTG9hZGVyPWZ1bmN0aW9uKGEpe3RoaXMubWFuYWdlcj12b2lkIDAhPT1hP2E6VEhSRUUuRGVmYXVsdExvYWRpbmdNYW5hZ2VyfTtcblRIUkVFLkltYWdlTG9hZGVyLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuSW1hZ2VMb2FkZXIsbG9hZDpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzLGY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTt2b2lkIDAhPT1iJiZmLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsZnVuY3Rpb24oKXtlLm1hbmFnZXIuaXRlbUVuZChhKTtiKHRoaXMpfSwhMSk7dm9pZCAwIT09YyYmZi5hZGRFdmVudExpc3RlbmVyKFwicHJvZ3Jlc3NcIixmdW5jdGlvbihhKXtjKGEpfSwhMSk7dm9pZCAwIT09ZCYmZi5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIixmdW5jdGlvbihhKXtkKGEpfSwhMSk7dm9pZCAwIT09dGhpcy5jcm9zc09yaWdpbiYmKGYuY3Jvc3NPcmlnaW49dGhpcy5jcm9zc09yaWdpbik7Zi5zcmM9YTtlLm1hbmFnZXIuaXRlbVN0YXJ0KGEpO3JldHVybiBmfSxzZXRDcm9zc09yaWdpbjpmdW5jdGlvbihhKXt0aGlzLmNyb3NzT3JpZ2luPWF9fTtUSFJFRS5KU09OTG9hZGVyPWZ1bmN0aW9uKGEpe1RIUkVFLkxvYWRlci5jYWxsKHRoaXMsYSk7dGhpcy53aXRoQ3JlZGVudGlhbHM9ITF9O1RIUkVFLkpTT05Mb2FkZXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTG9hZGVyLnByb3RvdHlwZSk7VEhSRUUuSlNPTkxvYWRlci5wcm90b3R5cGUubG9hZD1mdW5jdGlvbihhLGIsYyl7Yz1jJiZcInN0cmluZ1wiPT09dHlwZW9mIGM/Yzp0aGlzLmV4dHJhY3RVcmxCYXNlKGEpO3RoaXMub25Mb2FkU3RhcnQoKTt0aGlzLmxvYWRBamF4SlNPTih0aGlzLGEsYixjKX07XG5USFJFRS5KU09OTG9hZGVyLnByb3RvdHlwZS5sb2FkQWpheEpTT049ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj1uZXcgWE1MSHR0cFJlcXVlc3QsaD0wO2Yub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7aWYoZi5yZWFkeVN0YXRlPT09Zi5ET05FKWlmKDIwMD09PWYuc3RhdHVzfHwwPT09Zi5zdGF0dXMpe2lmKGYucmVzcG9uc2VUZXh0KXt2YXIgZz1KU09OLnBhcnNlKGYucmVzcG9uc2VUZXh0KSxnPWEucGFyc2UoZyxkKTtjKGcuZ2VvbWV0cnksZy5tYXRlcmlhbHMpfWVsc2UgY29uc29sZS53YXJuKFwiVEhSRUUuSlNPTkxvYWRlcjogW1wiK2IrXCJdIHNlZW1zIHRvIGJlIHVucmVhY2hhYmxlIG9yIGZpbGUgdGhlcmUgaXMgZW1wdHlcIik7YS5vbkxvYWRDb21wbGV0ZSgpfWVsc2UgY29uc29sZS5lcnJvcihcIlRIUkVFLkpTT05Mb2FkZXI6IENvdWxkbid0IGxvYWQgW1wiK2IrXCJdIFtcIitmLnN0YXR1cytcIl1cIik7ZWxzZSBmLnJlYWR5U3RhdGU9PT1mLkxPQURJTkc/ZSYmKDA9PT1oJiZcbihoPWYuZ2V0UmVzcG9uc2VIZWFkZXIoXCJDb250ZW50LUxlbmd0aFwiKSksZSh7dG90YWw6aCxsb2FkZWQ6Zi5yZXNwb25zZVRleHQubGVuZ3RofSkpOmYucmVhZHlTdGF0ZT09PWYuSEVBREVSU19SRUNFSVZFRCYmdm9pZCAwIT09ZSYmKGg9Zi5nZXRSZXNwb25zZUhlYWRlcihcIkNvbnRlbnQtTGVuZ3RoXCIpKX07Zi5vcGVuKFwiR0VUXCIsYiwhMCk7Zi53aXRoQ3JlZGVudGlhbHM9dGhpcy53aXRoQ3JlZGVudGlhbHM7Zi5zZW5kKG51bGwpfTtcblRIUkVFLkpTT05Mb2FkZXIucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IFRIUkVFLkdlb21ldHJ5LGQ9dm9pZCAwIT09YS5zY2FsZT8xL2Euc2NhbGU6MSxlLGYsaCxnLGksayxtLGwscCx0LHMscSxuLHUscj1hLmZhY2VzO3A9YS52ZXJ0aWNlczt2YXIgdj1hLm5vcm1hbHMsej1hLmNvbG9ycyxHPTA7aWYodm9pZCAwIT09YS51dnMpe2ZvcihlPTA7ZTxhLnV2cy5sZW5ndGg7ZSsrKWEudXZzW2VdLmxlbmd0aCYmRysrO2ZvcihlPTA7ZTxHO2UrKyljLmZhY2VWZXJ0ZXhVdnNbZV09W119Zz0wO2ZvcihpPXAubGVuZ3RoO2c8aTspaz1uZXcgVEhSRUUuVmVjdG9yMyxrLng9cFtnKytdKmQsay55PXBbZysrXSpkLGsuej1wW2crK10qZCxjLnZlcnRpY2VzLnB1c2goayk7Zz0wO2ZvcihpPXIubGVuZ3RoO2c8aTspaWYocD1yW2crK10sdD1wJjEsaD1wJjIsZT1wJjgsbT1wJjE2LHM9cCYzMixrPXAmNjQscCY9MTI4LHQpe3Q9bmV3IFRIUkVFLkZhY2UzO3QuYT1yW2ddO1xudC5iPXJbZysxXTt0LmM9cltnKzNdO3E9bmV3IFRIUkVFLkZhY2UzO3EuYT1yW2crMV07cS5iPXJbZysyXTtxLmM9cltnKzNdO2crPTQ7aCYmKGg9cltnKytdLHQubWF0ZXJpYWxJbmRleD1oLHEubWF0ZXJpYWxJbmRleD1oKTtoPWMuZmFjZXMubGVuZ3RoO2lmKGUpZm9yKGU9MDtlPEc7ZSsrKXtuPWEudXZzW2VdO2MuZmFjZVZlcnRleFV2c1tlXVtoXT1bXTtjLmZhY2VWZXJ0ZXhVdnNbZV1baCsxXT1bXTtmb3IoZj0wOzQ+ZjtmKyspbD1yW2crK10sdT1uWzIqbF0sbD1uWzIqbCsxXSx1PW5ldyBUSFJFRS5WZWN0b3IyKHUsbCksMiE9PWYmJmMuZmFjZVZlcnRleFV2c1tlXVtoXS5wdXNoKHUpLDAhPT1mJiZjLmZhY2VWZXJ0ZXhVdnNbZV1baCsxXS5wdXNoKHUpfW0mJihtPTMqcltnKytdLHQubm9ybWFsLnNldCh2W20rK10sdlttKytdLHZbbV0pLHEubm9ybWFsLmNvcHkodC5ub3JtYWwpKTtpZihzKWZvcihlPTA7ND5lO2UrKyltPTMqcltnKytdLHM9bmV3IFRIUkVFLlZlY3RvcjModlttKytdLFxudlttKytdLHZbbV0pLDIhPT1lJiZ0LnZlcnRleE5vcm1hbHMucHVzaChzKSwwIT09ZSYmcS52ZXJ0ZXhOb3JtYWxzLnB1c2gocyk7ayYmKGs9cltnKytdLGs9eltrXSx0LmNvbG9yLnNldEhleChrKSxxLmNvbG9yLnNldEhleChrKSk7aWYocClmb3IoZT0wOzQ+ZTtlKyspaz1yW2crK10saz16W2tdLDIhPT1lJiZ0LnZlcnRleENvbG9ycy5wdXNoKG5ldyBUSFJFRS5Db2xvcihrKSksMCE9PWUmJnEudmVydGV4Q29sb3JzLnB1c2gobmV3IFRIUkVFLkNvbG9yKGspKTtjLmZhY2VzLnB1c2godCk7Yy5mYWNlcy5wdXNoKHEpfWVsc2V7dD1uZXcgVEhSRUUuRmFjZTM7dC5hPXJbZysrXTt0LmI9cltnKytdO3QuYz1yW2crK107aCYmKGg9cltnKytdLHQubWF0ZXJpYWxJbmRleD1oKTtoPWMuZmFjZXMubGVuZ3RoO2lmKGUpZm9yKGU9MDtlPEc7ZSsrKXtuPWEudXZzW2VdO2MuZmFjZVZlcnRleFV2c1tlXVtoXT1bXTtmb3IoZj0wOzM+ZjtmKyspbD1yW2crK10sdT1uWzIqbF0sbD1uWzIqbCsxXSxcbnU9bmV3IFRIUkVFLlZlY3RvcjIodSxsKSxjLmZhY2VWZXJ0ZXhVdnNbZV1baF0ucHVzaCh1KX1tJiYobT0zKnJbZysrXSx0Lm5vcm1hbC5zZXQodlttKytdLHZbbSsrXSx2W21dKSk7aWYocylmb3IoZT0wOzM+ZTtlKyspbT0zKnJbZysrXSxzPW5ldyBUSFJFRS5WZWN0b3IzKHZbbSsrXSx2W20rK10sdlttXSksdC52ZXJ0ZXhOb3JtYWxzLnB1c2gocyk7ayYmKGs9cltnKytdLHQuY29sb3Iuc2V0SGV4KHpba10pKTtpZihwKWZvcihlPTA7Mz5lO2UrKylrPXJbZysrXSx0LnZlcnRleENvbG9ycy5wdXNoKG5ldyBUSFJFRS5Db2xvcih6W2tdKSk7Yy5mYWNlcy5wdXNoKHQpfWlmKGEuc2tpbldlaWdodHMpe2c9MDtmb3IoaT1hLnNraW5XZWlnaHRzLmxlbmd0aDtnPGk7Zys9MilyPWEuc2tpbldlaWdodHNbZ10sdj1hLnNraW5XZWlnaHRzW2crMV0sYy5za2luV2VpZ2h0cy5wdXNoKG5ldyBUSFJFRS5WZWN0b3I0KHIsdiwwLDApKX1pZihhLnNraW5JbmRpY2VzKXtnPTA7Zm9yKGk9YS5za2luSW5kaWNlcy5sZW5ndGg7Zzxcbmk7Zys9MilyPWEuc2tpbkluZGljZXNbZ10sdj1hLnNraW5JbmRpY2VzW2crMV0sYy5za2luSW5kaWNlcy5wdXNoKG5ldyBUSFJFRS5WZWN0b3I0KHIsdiwwLDApKX1jLmJvbmVzPWEuYm9uZXM7Yy5hbmltYXRpb249YS5hbmltYXRpb247Yy5hbmltYXRpb25zPWEuYW5pbWF0aW9ucztpZih2b2lkIDAhPT1hLm1vcnBoVGFyZ2V0cyl7Zz0wO2ZvcihpPWEubW9ycGhUYXJnZXRzLmxlbmd0aDtnPGk7ZysrKXtjLm1vcnBoVGFyZ2V0c1tnXT17fTtjLm1vcnBoVGFyZ2V0c1tnXS5uYW1lPWEubW9ycGhUYXJnZXRzW2ddLm5hbWU7Yy5tb3JwaFRhcmdldHNbZ10udmVydGljZXM9W107ej1jLm1vcnBoVGFyZ2V0c1tnXS52ZXJ0aWNlcztHPWEubW9ycGhUYXJnZXRzW2ddLnZlcnRpY2VzO3I9MDtmb3Iodj1HLmxlbmd0aDtyPHY7cis9MylwPW5ldyBUSFJFRS5WZWN0b3IzLHAueD1HW3JdKmQscC55PUdbcisxXSpkLHAuej1HW3IrMl0qZCx6LnB1c2gocCl9fWlmKHZvaWQgMCE9PWEubW9ycGhDb2xvcnMpe2c9XG4wO2ZvcihpPWEubW9ycGhDb2xvcnMubGVuZ3RoO2c8aTtnKyspe2MubW9ycGhDb2xvcnNbZ109e307Yy5tb3JwaENvbG9yc1tnXS5uYW1lPWEubW9ycGhDb2xvcnNbZ10ubmFtZTtjLm1vcnBoQ29sb3JzW2ddLmNvbG9ycz1bXTt2PWMubW9ycGhDb2xvcnNbZ10uY29sb3JzO3o9YS5tb3JwaENvbG9yc1tnXS5jb2xvcnM7ZD0wO2ZvcihyPXoubGVuZ3RoO2Q8cjtkKz0zKUc9bmV3IFRIUkVFLkNvbG9yKDE2NzU1MjAwKSxHLnNldFJHQih6W2RdLHpbZCsxXSx6W2QrMl0pLHYucHVzaChHKX19Yy5jb21wdXRlQ2VudHJvaWRzKCk7Yy5jb21wdXRlRmFjZU5vcm1hbHMoKTtjLmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpO2lmKHZvaWQgMD09PWEubWF0ZXJpYWxzKXJldHVybntnZW9tZXRyeTpjfTtkPXRoaXMuaW5pdE1hdGVyaWFscyhhLm1hdGVyaWFscyxiKTt0aGlzLm5lZWRzVGFuZ2VudHMoZCkmJmMuY29tcHV0ZVRhbmdlbnRzKCk7cmV0dXJue2dlb21ldHJ5OmMsbWF0ZXJpYWxzOmR9fTtUSFJFRS5Mb2FkaW5nTWFuYWdlcj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcyxlPTAsZj0wO3RoaXMub25Mb2FkPWE7dGhpcy5vblByb2dyZXNzPWI7dGhpcy5vbkVycm9yPWM7dGhpcy5pdGVtU3RhcnQ9ZnVuY3Rpb24oKXtmKyt9O3RoaXMuaXRlbUVuZD1mdW5jdGlvbihhKXtlKys7aWYodm9pZCAwIT09ZC5vblByb2dyZXNzKWQub25Qcm9ncmVzcyhhLGUsZik7aWYoZT09PWYmJnZvaWQgMCE9PWQub25Mb2FkKWQub25Mb2FkKCl9fTtUSFJFRS5EZWZhdWx0TG9hZGluZ01hbmFnZXI9bmV3IFRIUkVFLkxvYWRpbmdNYW5hZ2VyO1RIUkVFLkJ1ZmZlckdlb21ldHJ5TG9hZGVyPWZ1bmN0aW9uKGEpe3RoaXMubWFuYWdlcj12b2lkIDAhPT1hP2E6VEhSRUUuRGVmYXVsdExvYWRpbmdNYW5hZ2VyfTtcblRIUkVFLkJ1ZmZlckdlb21ldHJ5TG9hZGVyLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuQnVmZmVyR2VvbWV0cnlMb2FkZXIsbG9hZDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD1uZXcgVEhSRUUuWEhSTG9hZGVyO2Quc2V0Q3Jvc3NPcmlnaW4odGhpcy5jcm9zc09yaWdpbik7ZC5sb2FkKGEsZnVuY3Rpb24oYSl7YihjLnBhcnNlKEpTT04ucGFyc2UoYSkpKX0pfSxzZXRDcm9zc09yaWdpbjpmdW5jdGlvbihhKXt0aGlzLmNyb3NzT3JpZ2luPWF9LHBhcnNlOmZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeSxjPWEuYXR0cmlidXRlcyxkPWEub2Zmc2V0cyxhPWEuYm91bmRpbmdTcGhlcmUsZTtmb3IoZSBpbiBjKXt2YXIgZj1jW2VdO2IuYXR0cmlidXRlc1tlXT17aXRlbVNpemU6Zi5pdGVtU2l6ZSxhcnJheTpuZXcgc2VsZltmLnR5cGVdKGYuYXJyYXkpfX12b2lkIDAhPT1kJiYoYi5vZmZzZXRzPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZCkpKTtcbnZvaWQgMCE9PWEmJihiLmJvdW5kaW5nU3BoZXJlPW5ldyBUSFJFRS5TcGhlcmUoKG5ldyBUSFJFRS5WZWN0b3IzKS5mcm9tQXJyYXkodm9pZCAwIT09YS5jZW50ZXI/YS5jZW50ZXI6WzAsMCwwXSksYS5yYWRpdXMpKTtyZXR1cm4gYn19O1RIUkVFLkdlb21ldHJ5TG9hZGVyPWZ1bmN0aW9uKGEpe3RoaXMubWFuYWdlcj12b2lkIDAhPT1hP2E6VEhSRUUuRGVmYXVsdExvYWRpbmdNYW5hZ2VyfTtUSFJFRS5HZW9tZXRyeUxvYWRlci5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLkdlb21ldHJ5TG9hZGVyLGxvYWQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLGQ9bmV3IFRIUkVFLlhIUkxvYWRlcjtkLnNldENyb3NzT3JpZ2luKHRoaXMuY3Jvc3NPcmlnaW4pO2QubG9hZChhLGZ1bmN0aW9uKGEpe2IoYy5wYXJzZShKU09OLnBhcnNlKGEpKSl9KX0sc2V0Q3Jvc3NPcmlnaW46ZnVuY3Rpb24oYSl7dGhpcy5jcm9zc09yaWdpbj1hfSxwYXJzZTpmdW5jdGlvbigpe319O1RIUkVFLk1hdGVyaWFsTG9hZGVyPWZ1bmN0aW9uKGEpe3RoaXMubWFuYWdlcj12b2lkIDAhPT1hP2E6VEhSRUUuRGVmYXVsdExvYWRpbmdNYW5hZ2VyfTtcblRIUkVFLk1hdGVyaWFsTG9hZGVyLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuTWF0ZXJpYWxMb2FkZXIsbG9hZDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD1uZXcgVEhSRUUuWEhSTG9hZGVyO2Quc2V0Q3Jvc3NPcmlnaW4odGhpcy5jcm9zc09yaWdpbik7ZC5sb2FkKGEsZnVuY3Rpb24oYSl7YihjLnBhcnNlKEpTT04ucGFyc2UoYSkpKX0pfSxzZXRDcm9zc09yaWdpbjpmdW5jdGlvbihhKXt0aGlzLmNyb3NzT3JpZ2luPWF9LHBhcnNlOmZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBUSFJFRVthLnR5cGVdO3ZvaWQgMCE9PWEuY29sb3ImJmIuY29sb3Iuc2V0SGV4KGEuY29sb3IpO3ZvaWQgMCE9PWEuYW1iaWVudCYmYi5hbWJpZW50LnNldEhleChhLmFtYmllbnQpO3ZvaWQgMCE9PWEuZW1pc3NpdmUmJmIuZW1pc3NpdmUuc2V0SGV4KGEuZW1pc3NpdmUpO3ZvaWQgMCE9PWEuc3BlY3VsYXImJmIuc3BlY3VsYXIuc2V0SGV4KGEuc3BlY3VsYXIpO3ZvaWQgMCE9PWEuc2hpbmluZXNzJiZcbihiLnNoaW5pbmVzcz1hLnNoaW5pbmVzcyk7dm9pZCAwIT09YS52ZXJ0ZXhDb2xvcnMmJihiLnZlcnRleENvbG9ycz1hLnZlcnRleENvbG9ycyk7dm9pZCAwIT09YS5ibGVuZGluZyYmKGIuYmxlbmRpbmc9YS5ibGVuZGluZyk7dm9pZCAwIT09YS5zaWRlJiYoYi5zaWRlPWEuc2lkZSk7dm9pZCAwIT09YS5vcGFjaXR5JiYoYi5vcGFjaXR5PWEub3BhY2l0eSk7dm9pZCAwIT09YS50cmFuc3BhcmVudCYmKGIudHJhbnNwYXJlbnQ9YS50cmFuc3BhcmVudCk7dm9pZCAwIT09YS53aXJlZnJhbWUmJihiLndpcmVmcmFtZT1hLndpcmVmcmFtZSk7aWYodm9pZCAwIT09YS5tYXRlcmlhbHMpZm9yKHZhciBjPTAsZD1hLm1hdGVyaWFscy5sZW5ndGg7YzxkO2MrKyliLm1hdGVyaWFscy5wdXNoKHRoaXMucGFyc2UoYS5tYXRlcmlhbHNbY10pKTtyZXR1cm4gYn19O1RIUkVFLk9iamVjdExvYWRlcj1mdW5jdGlvbihhKXt0aGlzLm1hbmFnZXI9dm9pZCAwIT09YT9hOlRIUkVFLkRlZmF1bHRMb2FkaW5nTWFuYWdlcn07XG5USFJFRS5PYmplY3RMb2FkZXIucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5PYmplY3RMb2FkZXIsbG9hZDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD1uZXcgVEhSRUUuWEhSTG9hZGVyKGMubWFuYWdlcik7ZC5zZXRDcm9zc09yaWdpbih0aGlzLmNyb3NzT3JpZ2luKTtkLmxvYWQoYSxmdW5jdGlvbihhKXtiKGMucGFyc2UoSlNPTi5wYXJzZShhKSkpfSl9LHNldENyb3NzT3JpZ2luOmZ1bmN0aW9uKGEpe3RoaXMuY3Jvc3NPcmlnaW49YX0scGFyc2U6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5wYXJzZUdlb21ldHJpZXMoYS5nZW9tZXRyaWVzKSxjPXRoaXMucGFyc2VNYXRlcmlhbHMoYS5tYXRlcmlhbHMpO3JldHVybiB0aGlzLnBhcnNlT2JqZWN0KGEub2JqZWN0LGIsYyl9LHBhcnNlR2VvbWV0cmllczpmdW5jdGlvbihhKXt2YXIgYj17fTtpZih2b2lkIDAhPT1hKWZvcih2YXIgYz1uZXcgVEhSRUUuSlNPTkxvYWRlcixkPW5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeUxvYWRlcixcbmU9MCxmPWEubGVuZ3RoO2U8ZjtlKyspe3ZhciBoLGc9YVtlXTtzd2l0Y2goZy50eXBlKXtjYXNlIFwiUGxhbmVHZW9tZXRyeVwiOmg9bmV3IFRIUkVFLlBsYW5lR2VvbWV0cnkoZy53aWR0aCxnLmhlaWdodCxnLndpZHRoU2VnbWVudHMsZy5oZWlnaHRTZWdtZW50cyk7YnJlYWs7Y2FzZSBcIkNpcmNsZUdlb21ldHJ5XCI6aD1uZXcgVEhSRUUuQ2lyY2xlR2VvbWV0cnkoZy5yYWRpdXMsZy5zZWdtZW50cyk7YnJlYWs7Y2FzZSBcIkN1YmVHZW9tZXRyeVwiOmg9bmV3IFRIUkVFLkN1YmVHZW9tZXRyeShnLndpZHRoLGcuaGVpZ2h0LGcuZGVwdGgsZy53aWR0aFNlZ21lbnRzLGcuaGVpZ2h0U2VnbWVudHMsZy5kZXB0aFNlZ21lbnRzKTticmVhaztjYXNlIFwiQ3lsaW5kZXJHZW9tZXRyeVwiOmg9bmV3IFRIUkVFLkN5bGluZGVyR2VvbWV0cnkoZy5yYWRpdXNUb3AsZy5yYWRpdXNCb3R0b20sZy5oZWlnaHQsZy5yYWRpYWxTZWdtZW50cyxnLmhlaWdodFNlZ21lbnRzLGcub3BlbkVuZGVkKTticmVhaztjYXNlIFwiU3BoZXJlR2VvbWV0cnlcIjpoPVxubmV3IFRIUkVFLlNwaGVyZUdlb21ldHJ5KGcucmFkaXVzLGcud2lkdGhTZWdtZW50cyxnLmhlaWdodFNlZ21lbnRzLGcucGhpU3RhcnQsZy5waGlMZW5ndGgsZy50aGV0YVN0YXJ0LGcudGhldGFMZW5ndGgpO2JyZWFrO2Nhc2UgXCJJY29zYWhlZHJvbkdlb21ldHJ5XCI6aD1uZXcgVEhSRUUuSWNvc2FoZWRyb25HZW9tZXRyeShnLnJhZGl1cyxnLmRldGFpbCk7YnJlYWs7Y2FzZSBcIlRvcnVzR2VvbWV0cnlcIjpoPW5ldyBUSFJFRS5Ub3J1c0dlb21ldHJ5KGcucmFkaXVzLGcudHViZSxnLnJhZGlhbFNlZ21lbnRzLGcudHVidWxhclNlZ21lbnRzLGcuYXJjKTticmVhaztjYXNlIFwiVG9ydXNLbm90R2VvbWV0cnlcIjpoPW5ldyBUSFJFRS5Ub3J1c0tub3RHZW9tZXRyeShnLnJhZGl1cyxnLnR1YmUsZy5yYWRpYWxTZWdtZW50cyxnLnR1YnVsYXJTZWdtZW50cyxnLnAsZy5xLGcuaGVpZ2h0U2NhbGUpO2JyZWFrO2Nhc2UgXCJCdWZmZXJHZW9tZXRyeVwiOmg9ZC5wYXJzZShnLmRhdGEpO2JyZWFrO2Nhc2UgXCJHZW9tZXRyeVwiOmg9XG5jLnBhcnNlKGcuZGF0YSkuZ2VvbWV0cnl9aC51dWlkPWcudXVpZDt2b2lkIDAhPT1nLm5hbWUmJihoLm5hbWU9Zy5uYW1lKTtiW2cudXVpZF09aH1yZXR1cm4gYn0scGFyc2VNYXRlcmlhbHM6ZnVuY3Rpb24oYSl7dmFyIGI9e307aWYodm9pZCAwIT09YSlmb3IodmFyIGM9bmV3IFRIUkVFLk1hdGVyaWFsTG9hZGVyLGQ9MCxlPWEubGVuZ3RoO2Q8ZTtkKyspe3ZhciBmPWFbZF0saD1jLnBhcnNlKGYpO2gudXVpZD1mLnV1aWQ7dm9pZCAwIT09Zi5uYW1lJiYoaC5uYW1lPWYubmFtZSk7YltmLnV1aWRdPWh9cmV0dXJuIGJ9LHBhcnNlT2JqZWN0OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLk1hdHJpeDQ7cmV0dXJuIGZ1bmN0aW9uKGIsYyxkKXt2YXIgZTtzd2l0Y2goYi50eXBlKXtjYXNlIFwiU2NlbmVcIjplPW5ldyBUSFJFRS5TY2VuZTticmVhaztjYXNlIFwiUGVyc3BlY3RpdmVDYW1lcmFcIjplPW5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYShiLmZvdixiLmFzcGVjdCxiLm5lYXIsXG5iLmZhcik7YnJlYWs7Y2FzZSBcIk9ydGhvZ3JhcGhpY0NhbWVyYVwiOmU9bmV3IFRIUkVFLk9ydGhvZ3JhcGhpY0NhbWVyYShiLmxlZnQsYi5yaWdodCxiLnRvcCxiLmJvdHRvbSxiLm5lYXIsYi5mYXIpO2JyZWFrO2Nhc2UgXCJBbWJpZW50TGlnaHRcIjplPW5ldyBUSFJFRS5BbWJpZW50TGlnaHQoYi5jb2xvcik7YnJlYWs7Y2FzZSBcIkRpcmVjdGlvbmFsTGlnaHRcIjplPW5ldyBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0KGIuY29sb3IsYi5pbnRlbnNpdHkpO2JyZWFrO2Nhc2UgXCJQb2ludExpZ2h0XCI6ZT1uZXcgVEhSRUUuUG9pbnRMaWdodChiLmNvbG9yLGIuaW50ZW5zaXR5LGIuZGlzdGFuY2UpO2JyZWFrO2Nhc2UgXCJTcG90TGlnaHRcIjplPW5ldyBUSFJFRS5TcG90TGlnaHQoYi5jb2xvcixiLmludGVuc2l0eSxiLmRpc3RhbmNlLGIuYW5nbGUsYi5leHBvbmVudCk7YnJlYWs7Y2FzZSBcIkhlbWlzcGhlcmVMaWdodFwiOmU9bmV3IFRIUkVFLkhlbWlzcGhlcmVMaWdodChiLmNvbG9yLGIuZ3JvdW5kQ29sb3IsXG5iLmludGVuc2l0eSk7YnJlYWs7Y2FzZSBcIk1lc2hcIjplPWNbYi5nZW9tZXRyeV07dmFyIGY9ZFtiLm1hdGVyaWFsXTt2b2lkIDA9PT1lJiZjb25zb2xlLmVycm9yKFwiVEhSRUUuT2JqZWN0TG9hZGVyOiBVbmRlZmluZWQgZ2VvbWV0cnkgXCIrYi5nZW9tZXRyeSk7dm9pZCAwPT09ZiYmY29uc29sZS5lcnJvcihcIlRIUkVFLk9iamVjdExvYWRlcjogVW5kZWZpbmVkIG1hdGVyaWFsIFwiK2IubWF0ZXJpYWwpO2U9bmV3IFRIUkVFLk1lc2goZSxmKTticmVhaztjYXNlIFwiU3ByaXRlXCI6Zj1kW2IubWF0ZXJpYWxdO3ZvaWQgMD09PWYmJmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5PYmplY3RMb2FkZXI6IFVuZGVmaW5lZCBtYXRlcmlhbCBcIitiLm1hdGVyaWFsKTtlPW5ldyBUSFJFRS5TcHJpdGUoZik7YnJlYWs7ZGVmYXVsdDplPW5ldyBUSFJFRS5PYmplY3QzRH1lLnV1aWQ9Yi51dWlkO3ZvaWQgMCE9PWIubmFtZSYmKGUubmFtZT1iLm5hbWUpO3ZvaWQgMCE9PWIubWF0cml4PyhhLmZyb21BcnJheShiLm1hdHJpeCksXG5hLmRlY29tcG9zZShlLnBvc2l0aW9uLGUucXVhdGVybmlvbixlLnNjYWxlKSk6KHZvaWQgMCE9PWIucG9zaXRpb24mJmUucG9zaXRpb24uZnJvbUFycmF5KGIucG9zaXRpb24pLHZvaWQgMCE9PWIucm90YXRpb24mJmUucm90YXRpb24uZnJvbUFycmF5KGIucm90YXRpb24pLHZvaWQgMCE9PWIuc2NhbGUmJmUuc2NhbGUuZnJvbUFycmF5KGIuc2NhbGUpKTt2b2lkIDAhPT1iLnZpc2libGUmJihlLnZpc2libGU9Yi52aXNpYmxlKTt2b2lkIDAhPT1iLnVzZXJEYXRhJiYoZS51c2VyRGF0YT1iLnVzZXJEYXRhKTtpZih2b2lkIDAhPT1iLmNoaWxkcmVuKWZvcih2YXIgaCBpbiBiLmNoaWxkcmVuKWUuYWRkKHRoaXMucGFyc2VPYmplY3QoYi5jaGlsZHJlbltoXSxjLGQpKTtyZXR1cm4gZX19KCl9O1RIUkVFLlNjZW5lTG9hZGVyPWZ1bmN0aW9uKCl7dGhpcy5vbkxvYWRTdGFydD1mdW5jdGlvbigpe307dGhpcy5vbkxvYWRQcm9ncmVzcz1mdW5jdGlvbigpe307dGhpcy5vbkxvYWRDb21wbGV0ZT1mdW5jdGlvbigpe307dGhpcy5jYWxsYmFja1N5bmM9ZnVuY3Rpb24oKXt9O3RoaXMuY2FsbGJhY2tQcm9ncmVzcz1mdW5jdGlvbigpe307dGhpcy5nZW9tZXRyeUhhbmRsZXJzPXt9O3RoaXMuaGllcmFyY2h5SGFuZGxlcnM9e307dGhpcy5hZGRHZW9tZXRyeUhhbmRsZXIoXCJhc2NpaVwiLFRIUkVFLkpTT05Mb2FkZXIpfTtcblRIUkVFLlNjZW5lTG9hZGVyLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuU2NlbmVMb2FkZXIsbG9hZDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD1uZXcgVEhSRUUuWEhSTG9hZGVyKGMubWFuYWdlcik7ZC5zZXRDcm9zc09yaWdpbih0aGlzLmNyb3NzT3JpZ2luKTtkLmxvYWQoYSxmdW5jdGlvbihkKXtjLnBhcnNlKEpTT04ucGFyc2UoZCksYixhKX0pfSxzZXRDcm9zc09yaWdpbjpmdW5jdGlvbihhKXt0aGlzLmNyb3NzT3JpZ2luPWF9LGFkZEdlb21ldHJ5SGFuZGxlcjpmdW5jdGlvbihhLGIpe3RoaXMuZ2VvbWV0cnlIYW5kbGVyc1thXT17bG9hZGVyQ2xhc3M6Yn19LGFkZEhpZXJhcmNoeUhhbmRsZXI6ZnVuY3Rpb24oYSxiKXt0aGlzLmhpZXJhcmNoeUhhbmRsZXJzW2FdPXtsb2FkZXJDbGFzczpifX0scGFyc2U6ZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoYSxiKXtyZXR1cm5cInJlbGF0aXZlVG9IVE1MXCI9PWI/YTpwK1wiL1wiK2F9ZnVuY3Rpb24gZSgpe2YoeS5zY2VuZSxcbkEub2JqZWN0cyl9ZnVuY3Rpb24gZihhLGIpe3ZhciBjLGUsaCxpLGssbTtmb3IobSBpbiBiKXt2YXIgcD15Lm9iamVjdHNbbV0sbj1iW21dO2lmKHZvaWQgMD09PXApe2lmKG4udHlwZSYmbi50eXBlIGluIGwuaGllcmFyY2h5SGFuZGxlcnMpe2lmKHZvaWQgMD09PW4ubG9hZGluZyl7Yz17dHlwZToxLHVybDoxLG1hdGVyaWFsOjEscG9zaXRpb246MSxyb3RhdGlvbjoxLHNjYWxlOjEsdmlzaWJsZToxLGNoaWxkcmVuOjEsdXNlckRhdGE6MSxza2luOjEsbW9ycGg6MSxtaXJyb3JlZExvb3A6MSxkdXJhdGlvbjoxfTt2YXIgdT17fSx2O2Zvcih2IGluIG4pdiBpbiBjfHwodVt2XT1uW3ZdKTtzPXkubWF0ZXJpYWxzW24ubWF0ZXJpYWxdO24ubG9hZGluZz0hMDtjPWwuaGllcmFyY2h5SGFuZGxlcnNbbi50eXBlXS5sb2FkZXJPYmplY3Q7Yy5vcHRpb25zP2MubG9hZChkKG4udXJsLEEudXJsQmFzZVR5cGUpLGcobSxhLHMsbikpOmMubG9hZChkKG4udXJsLEEudXJsQmFzZVR5cGUpLGcobSxcbmEscyxuKSx1KX19ZWxzZSBpZih2b2lkIDAhPT1uLmdlb21ldHJ5KXtpZih0PXkuZ2VvbWV0cmllc1tuLmdlb21ldHJ5XSl7cD0hMTtzPXkubWF0ZXJpYWxzW24ubWF0ZXJpYWxdO3A9cyBpbnN0YW5jZW9mIFRIUkVFLlNoYWRlck1hdGVyaWFsO2U9bi5wb3NpdGlvbjtoPW4ucm90YXRpb247aT1uLnNjYWxlO2M9bi5tYXRyaXg7az1uLnF1YXRlcm5pb247bi5tYXRlcmlhbHx8KHM9bmV3IFRIUkVFLk1lc2hGYWNlTWF0ZXJpYWwoeS5mYWNlX21hdGVyaWFsc1tuLmdlb21ldHJ5XSkpO3MgaW5zdGFuY2VvZiBUSFJFRS5NZXNoRmFjZU1hdGVyaWFsJiYwPT09cy5tYXRlcmlhbHMubGVuZ3RoJiYocz1uZXcgVEhSRUUuTWVzaEZhY2VNYXRlcmlhbCh5LmZhY2VfbWF0ZXJpYWxzW24uZ2VvbWV0cnldKSk7aWYocyBpbnN0YW5jZW9mIFRIUkVFLk1lc2hGYWNlTWF0ZXJpYWwpZm9yKHU9MDt1PHMubWF0ZXJpYWxzLmxlbmd0aDt1KyspcD1wfHxzLm1hdGVyaWFsc1t1XWluc3RhbmNlb2YgVEhSRUUuU2hhZGVyTWF0ZXJpYWw7XG5wJiZ0LmNvbXB1dGVUYW5nZW50cygpO24uc2tpbj9wPW5ldyBUSFJFRS5Ta2lubmVkTWVzaCh0LHMpOm4ubW9ycGg/KHA9bmV3IFRIUkVFLk1vcnBoQW5pbU1lc2godCxzKSx2b2lkIDAhPT1uLmR1cmF0aW9uJiYocC5kdXJhdGlvbj1uLmR1cmF0aW9uKSx2b2lkIDAhPT1uLnRpbWUmJihwLnRpbWU9bi50aW1lKSx2b2lkIDAhPT1uLm1pcnJvcmVkTG9vcCYmKHAubWlycm9yZWRMb29wPW4ubWlycm9yZWRMb29wKSxzLm1vcnBoTm9ybWFscyYmdC5jb21wdXRlTW9ycGhOb3JtYWxzKCkpOnA9bmV3IFRIUkVFLk1lc2godCxzKTtwLm5hbWU9bTtjPyhwLm1hdHJpeEF1dG9VcGRhdGU9ITEscC5tYXRyaXguc2V0KGNbMF0sY1sxXSxjWzJdLGNbM10sY1s0XSxjWzVdLGNbNl0sY1s3XSxjWzhdLGNbOV0sY1sxMF0sY1sxMV0sY1sxMl0sY1sxM10sY1sxNF0sY1sxNV0pKToocC5wb3NpdGlvbi5mcm9tQXJyYXkoZSksaz9wLnF1YXRlcm5pb24uZnJvbUFycmF5KGspOnAucm90YXRpb24uZnJvbUFycmF5KGgpLFxucC5zY2FsZS5mcm9tQXJyYXkoaSkpO3AudmlzaWJsZT1uLnZpc2libGU7cC5jYXN0U2hhZG93PW4uY2FzdFNoYWRvdztwLnJlY2VpdmVTaGFkb3c9bi5yZWNlaXZlU2hhZG93O2EuYWRkKHApO3kub2JqZWN0c1ttXT1wfX1lbHNlIGlmKFwiQW1iaWVudExpZ2h0XCI9PT1uLnR5cGV8fFwiUG9pbnRMaWdodFwiPT09bi50eXBlfHxcIkRpcmVjdGlvbmFsTGlnaHRcIj09PW4udHlwZXx8XCJTcG90TGlnaHRcIj09PW4udHlwZXx8XCJIZW1pc3BoZXJlTGlnaHRcIj09PW4udHlwZXx8XCJBcmVhTGlnaHRcIj09PW4udHlwZSl7dT1uLmNvbG9yO2M9bi5pbnRlbnNpdHk7ZT1uLmRpc3RhbmNlO2g9bi5wb3NpdGlvbjtpPW4ucm90YXRpb247c3dpdGNoKG4udHlwZSl7Y2FzZSBcIkFtYmllbnRMaWdodFwiOnI9bmV3IFRIUkVFLkFtYmllbnRMaWdodCh1KTticmVhaztjYXNlIFwiUG9pbnRMaWdodFwiOnI9bmV3IFRIUkVFLlBvaW50TGlnaHQodSxjLGUpO3IucG9zaXRpb24uZnJvbUFycmF5KGgpO2JyZWFrO2Nhc2UgXCJEaXJlY3Rpb25hbExpZ2h0XCI6cj1cbm5ldyBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0KHUsYyk7ci5wb3NpdGlvbi5mcm9tQXJyYXkobi5kaXJlY3Rpb24pO2JyZWFrO2Nhc2UgXCJTcG90TGlnaHRcIjpyPW5ldyBUSFJFRS5TcG90TGlnaHQodSxjLGUsMSk7ci5hbmdsZT1uLmFuZ2xlO3IucG9zaXRpb24uZnJvbUFycmF5KGgpO3IudGFyZ2V0LnNldChoWzBdLGhbMV0tZSxoWzJdKTtyLnRhcmdldC5hcHBseUV1bGVyKG5ldyBUSFJFRS5FdWxlcihpWzBdLGlbMV0saVsyXSxcIlhZWlwiKSk7YnJlYWs7Y2FzZSBcIkhlbWlzcGhlcmVMaWdodFwiOnI9bmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQodSxjLGUpO3IudGFyZ2V0LnNldChoWzBdLGhbMV0tZSxoWzJdKTtyLnRhcmdldC5hcHBseUV1bGVyKG5ldyBUSFJFRS5FdWxlcihpWzBdLGlbMV0saVsyXSxcIlhZWlwiKSk7YnJlYWs7Y2FzZSBcIkFyZWFMaWdodFwiOnI9bmV3IFRIUkVFLkFyZWFMaWdodCh1LGMpLHIucG9zaXRpb24uZnJvbUFycmF5KGgpLHIud2lkdGg9bi5zaXplLHIuaGVpZ2h0PVxubi5zaXplX3l9YS5hZGQocik7ci5uYW1lPW07eS5saWdodHNbbV09cjt5Lm9iamVjdHNbbV09cn1lbHNlXCJQZXJzcGVjdGl2ZUNhbWVyYVwiPT09bi50eXBlfHxcIk9ydGhvZ3JhcGhpY0NhbWVyYVwiPT09bi50eXBlPyhlPW4ucG9zaXRpb24saD1uLnJvdGF0aW9uLGs9bi5xdWF0ZXJuaW9uLFwiUGVyc3BlY3RpdmVDYW1lcmFcIj09PW4udHlwZT9xPW5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYShuLmZvdixuLmFzcGVjdCxuLm5lYXIsbi5mYXIpOlwiT3J0aG9ncmFwaGljQ2FtZXJhXCI9PT1uLnR5cGUmJihxPW5ldyBUSFJFRS5PcnRob2dyYXBoaWNDYW1lcmEobi5sZWZ0LG4ucmlnaHQsbi50b3Asbi5ib3R0b20sbi5uZWFyLG4uZmFyKSkscS5uYW1lPW0scS5wb3NpdGlvbi5mcm9tQXJyYXkoZSksdm9pZCAwIT09az9xLnF1YXRlcm5pb24uZnJvbUFycmF5KGspOnZvaWQgMCE9PWgmJnEucm90YXRpb24uZnJvbUFycmF5KGgpLGEuYWRkKHEpLHkuY2FtZXJhc1ttXT1xLHkub2JqZWN0c1ttXT1cbnEpOihlPW4ucG9zaXRpb24saD1uLnJvdGF0aW9uLGk9bi5zY2FsZSxrPW4ucXVhdGVybmlvbixwPW5ldyBUSFJFRS5PYmplY3QzRCxwLm5hbWU9bSxwLnBvc2l0aW9uLmZyb21BcnJheShlKSxrP3AucXVhdGVybmlvbi5mcm9tQXJyYXkoayk6cC5yb3RhdGlvbi5mcm9tQXJyYXkoaCkscC5zY2FsZS5mcm9tQXJyYXkoaSkscC52aXNpYmxlPXZvaWQgMCE9PW4udmlzaWJsZT9uLnZpc2libGU6ITEsYS5hZGQocCkseS5vYmplY3RzW21dPXAseS5lbXB0aWVzW21dPXApO2lmKHApe2lmKHZvaWQgMCE9PW4udXNlckRhdGEpZm9yKHZhciB6IGluIG4udXNlckRhdGEpcC51c2VyRGF0YVt6XT1uLnVzZXJEYXRhW3pdO2lmKHZvaWQgMCE9PW4uZ3JvdXBzKWZvcih1PTA7dTxuLmdyb3Vwcy5sZW5ndGg7dSsrKWM9bi5ncm91cHNbdV0sdm9pZCAwPT09eS5ncm91cHNbY10mJih5Lmdyb3Vwc1tjXT1bXSkseS5ncm91cHNbY10ucHVzaChtKX19dm9pZCAwIT09cCYmdm9pZCAwIT09bi5jaGlsZHJlbiYmXG5mKHAsbi5jaGlsZHJlbil9fWZ1bmN0aW9uIGgoYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7Yi5uYW1lPWE7eS5nZW9tZXRyaWVzW2FdPWI7eS5mYWNlX21hdGVyaWFsc1thXT1jO2UoKTt2LT0xO2wub25Mb2FkQ29tcGxldGUoKTtrKCl9fWZ1bmN0aW9uIGcoYSxiLGMsZCl7cmV0dXJuIGZ1bmN0aW9uKGYpe3ZhciBmPWYuY29udGVudD9mLmNvbnRlbnQ6Zi5kYWU/Zi5zY2VuZTpmLGg9ZC5yb3RhdGlvbixnPWQucXVhdGVybmlvbixpPWQuc2NhbGU7Zi5wb3NpdGlvbi5mcm9tQXJyYXkoZC5wb3NpdGlvbik7Zz9mLnF1YXRlcm5pb24uZnJvbUFycmF5KGcpOmYucm90YXRpb24uZnJvbUFycmF5KGgpO2Yuc2NhbGUuZnJvbUFycmF5KGkpO2MmJmYudHJhdmVyc2UoZnVuY3Rpb24oYSl7YS5tYXRlcmlhbD1jfSk7dmFyIG09dm9pZCAwIT09ZC52aXNpYmxlP2QudmlzaWJsZTohMDtmLnRyYXZlcnNlKGZ1bmN0aW9uKGEpe2EudmlzaWJsZT1tfSk7Yi5hZGQoZik7Zi5uYW1lPWE7eS5vYmplY3RzW2FdPVxuZjtlKCk7di09MTtsLm9uTG9hZENvbXBsZXRlKCk7aygpfX1mdW5jdGlvbiBpKGEpe3JldHVybiBmdW5jdGlvbihiLGMpe2IubmFtZT1hO3kuZ2VvbWV0cmllc1thXT1iO3kuZmFjZV9tYXRlcmlhbHNbYV09Y319ZnVuY3Rpb24gaygpe2wuY2FsbGJhY2tQcm9ncmVzcyh7dG90YWxNb2RlbHM6Ryx0b3RhbFRleHR1cmVzOncsbG9hZGVkTW9kZWxzOkctdixsb2FkZWRUZXh0dXJlczp3LXp9LHkpO2wub25Mb2FkUHJvZ3Jlc3MoKTtpZigwPT09diYmMD09PXope2Zvcih2YXIgYT0wO2E8RS5sZW5ndGg7YSsrKXt2YXIgYz1FW2FdLGQ9eS5vYmplY3RzW2MudGFyZ2V0TmFtZV07ZD9jLm9iamVjdC50YXJnZXQ9ZDooYy5vYmplY3QudGFyZ2V0PW5ldyBUSFJFRS5PYmplY3QzRCx5LnNjZW5lLmFkZChjLm9iamVjdC50YXJnZXQpKTtjLm9iamVjdC50YXJnZXQudXNlckRhdGEudGFyZ2V0SW52ZXJzZT1jLm9iamVjdH1iKHkpfX1mdW5jdGlvbiBtKGEsYil7YihhKTtpZih2b2lkIDAhPT1hLmNoaWxkcmVuKWZvcih2YXIgYyBpbiBhLmNoaWxkcmVuKW0oYS5jaGlsZHJlbltjXSxcbmIpfXZhciBsPXRoaXMscD1USFJFRS5Mb2FkZXIucHJvdG90eXBlLmV4dHJhY3RVcmxCYXNlKGMpLHQscyxxLG4sdSxyLHYseixHLHcseSxFPVtdLEE9YSxLO2ZvcihLIGluIHRoaXMuZ2VvbWV0cnlIYW5kbGVycylhPXRoaXMuZ2VvbWV0cnlIYW5kbGVyc1tLXS5sb2FkZXJDbGFzcyx0aGlzLmdlb21ldHJ5SGFuZGxlcnNbS10ubG9hZGVyT2JqZWN0PW5ldyBhO2ZvcihLIGluIHRoaXMuaGllcmFyY2h5SGFuZGxlcnMpYT10aGlzLmhpZXJhcmNoeUhhbmRsZXJzW0tdLmxvYWRlckNsYXNzLHRoaXMuaGllcmFyY2h5SGFuZGxlcnNbS10ubG9hZGVyT2JqZWN0PW5ldyBhO3o9dj0wO3k9e3NjZW5lOm5ldyBUSFJFRS5TY2VuZSxnZW9tZXRyaWVzOnt9LGZhY2VfbWF0ZXJpYWxzOnt9LG1hdGVyaWFsczp7fSx0ZXh0dXJlczp7fSxvYmplY3RzOnt9LGNhbWVyYXM6e30sbGlnaHRzOnt9LGZvZ3M6e30sZW1wdGllczp7fSxncm91cHM6e319O2lmKEEudHJhbnNmb3JtJiYoSz1BLnRyYW5zZm9ybS5wb3NpdGlvbixcbmE9QS50cmFuc2Zvcm0ucm90YXRpb24sYz1BLnRyYW5zZm9ybS5zY2FsZSxLJiZ5LnNjZW5lLnBvc2l0aW9uLmZyb21BcnJheShLKSxhJiZ5LnNjZW5lLnJvdGF0aW9uLmZyb21BcnJheShhKSxjJiZ5LnNjZW5lLnNjYWxlLmZyb21BcnJheShjKSxLfHxhfHxjKSl5LnNjZW5lLnVwZGF0ZU1hdHJpeCgpLHkuc2NlbmUudXBkYXRlTWF0cml4V29ybGQoKTtLPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe3otPWE7aygpO2wub25Mb2FkQ29tcGxldGUoKX19O2Zvcih2YXIgRCBpbiBBLmZvZ3MpYT1BLmZvZ3NbRF0sXCJsaW5lYXJcIj09PWEudHlwZT9uPW5ldyBUSFJFRS5Gb2coMCxhLm5lYXIsYS5mYXIpOlwiZXhwMlwiPT09YS50eXBlJiYobj1uZXcgVEhSRUUuRm9nRXhwMigwLGEuZGVuc2l0eSkpLGE9YS5jb2xvcixuLmNvbG9yLnNldFJHQihhWzBdLGFbMV0sYVsyXSkseS5mb2dzW0RdPW47Zm9yKHZhciBGIGluIEEuZ2VvbWV0cmllcyluPUEuZ2VvbWV0cmllc1tGXSxuLnR5cGUgaW5cbnRoaXMuZ2VvbWV0cnlIYW5kbGVycyYmKHYrPTEsbC5vbkxvYWRTdGFydCgpKTtmb3IodmFyIE8gaW4gQS5vYmplY3RzKW0oQS5vYmplY3RzW09dLGZ1bmN0aW9uKGEpe2EudHlwZSYmYS50eXBlIGluIGwuaGllcmFyY2h5SGFuZGxlcnMmJih2Kz0xLGwub25Mb2FkU3RhcnQoKSl9KTtHPXY7Zm9yKEYgaW4gQS5nZW9tZXRyaWVzKWlmKG49QS5nZW9tZXRyaWVzW0ZdLFwiY3ViZVwiPT09bi50eXBlKXQ9bmV3IFRIUkVFLkN1YmVHZW9tZXRyeShuLndpZHRoLG4uaGVpZ2h0LG4uZGVwdGgsbi53aWR0aFNlZ21lbnRzLG4uaGVpZ2h0U2VnbWVudHMsbi5kZXB0aFNlZ21lbnRzKSx0Lm5hbWU9Rix5Lmdlb21ldHJpZXNbRl09dDtlbHNlIGlmKFwicGxhbmVcIj09PW4udHlwZSl0PW5ldyBUSFJFRS5QbGFuZUdlb21ldHJ5KG4ud2lkdGgsbi5oZWlnaHQsbi53aWR0aFNlZ21lbnRzLG4uaGVpZ2h0U2VnbWVudHMpLHQubmFtZT1GLHkuZ2VvbWV0cmllc1tGXT10O2Vsc2UgaWYoXCJzcGhlcmVcIj09PW4udHlwZSl0PVxubmV3IFRIUkVFLlNwaGVyZUdlb21ldHJ5KG4ucmFkaXVzLG4ud2lkdGhTZWdtZW50cyxuLmhlaWdodFNlZ21lbnRzKSx0Lm5hbWU9Rix5Lmdlb21ldHJpZXNbRl09dDtlbHNlIGlmKFwiY3lsaW5kZXJcIj09PW4udHlwZSl0PW5ldyBUSFJFRS5DeWxpbmRlckdlb21ldHJ5KG4udG9wUmFkLG4uYm90UmFkLG4uaGVpZ2h0LG4ucmFkU2VncyxuLmhlaWdodFNlZ3MpLHQubmFtZT1GLHkuZ2VvbWV0cmllc1tGXT10O2Vsc2UgaWYoXCJ0b3J1c1wiPT09bi50eXBlKXQ9bmV3IFRIUkVFLlRvcnVzR2VvbWV0cnkobi5yYWRpdXMsbi50dWJlLG4uc2VnbWVudHNSLG4uc2VnbWVudHNUKSx0Lm5hbWU9Rix5Lmdlb21ldHJpZXNbRl09dDtlbHNlIGlmKFwiaWNvc2FoZWRyb25cIj09PW4udHlwZSl0PW5ldyBUSFJFRS5JY29zYWhlZHJvbkdlb21ldHJ5KG4ucmFkaXVzLG4uc3ViZGl2aXNpb25zKSx0Lm5hbWU9Rix5Lmdlb21ldHJpZXNbRl09dDtlbHNlIGlmKG4udHlwZSBpbiB0aGlzLmdlb21ldHJ5SGFuZGxlcnMpe089XG57fTtmb3IodSBpbiBuKVwidHlwZVwiIT09dSYmXCJ1cmxcIiE9PXUmJihPW3VdPW5bdV0pO3RoaXMuZ2VvbWV0cnlIYW5kbGVyc1tuLnR5cGVdLmxvYWRlck9iamVjdC5sb2FkKGQobi51cmwsQS51cmxCYXNlVHlwZSksaChGKSxPKX1lbHNlXCJlbWJlZGRlZFwiPT09bi50eXBlJiYoTz1BLmVtYmVkc1tuLmlkXSxPLm1ldGFkYXRhPUEubWV0YWRhdGEsTyYmKE89dGhpcy5nZW9tZXRyeUhhbmRsZXJzLmFzY2lpLmxvYWRlck9iamVjdC5wYXJzZShPLFwiXCIpLGkoRikoTy5nZW9tZXRyeSxPLm1hdGVyaWFscykpKTtmb3IodmFyIHggaW4gQS50ZXh0dXJlcylpZihGPUEudGV4dHVyZXNbeF0sRi51cmwgaW5zdGFuY2VvZiBBcnJheSl7eis9Ri51cmwubGVuZ3RoO2Zvcih1PTA7dTxGLnVybC5sZW5ndGg7dSsrKWwub25Mb2FkU3RhcnQoKX1lbHNlIHorPTEsbC5vbkxvYWRTdGFydCgpO3c9ejtmb3IoeCBpbiBBLnRleHR1cmVzKXtGPUEudGV4dHVyZXNbeF07dm9pZCAwIT09Ri5tYXBwaW5nJiZ2b2lkIDAhPT1cblRIUkVFW0YubWFwcGluZ10mJihGLm1hcHBpbmc9bmV3IFRIUkVFW0YubWFwcGluZ10pO2lmKEYudXJsIGluc3RhbmNlb2YgQXJyYXkpe089Ri51cmwubGVuZ3RoO249W107Zm9yKHU9MDt1PE87dSsrKW5bdV09ZChGLnVybFt1XSxBLnVybEJhc2VUeXBlKTt1PSh1PS9cXC5kZHMkL2kudGVzdChuWzBdKSk/VEhSRUUuSW1hZ2VVdGlscy5sb2FkQ29tcHJlc3NlZFRleHR1cmVDdWJlKG4sRi5tYXBwaW5nLEsoTykpOlRIUkVFLkltYWdlVXRpbHMubG9hZFRleHR1cmVDdWJlKG4sRi5tYXBwaW5nLEsoTykpfWVsc2UgdT0vXFwuZGRzJC9pLnRlc3QoRi51cmwpLE89ZChGLnVybCxBLnVybEJhc2VUeXBlKSxuPUsoMSksdT11P1RIUkVFLkltYWdlVXRpbHMubG9hZENvbXByZXNzZWRUZXh0dXJlKE8sRi5tYXBwaW5nLG4pOlRIUkVFLkltYWdlVXRpbHMubG9hZFRleHR1cmUoTyxGLm1hcHBpbmcsbiksdm9pZCAwIT09VEhSRUVbRi5taW5GaWx0ZXJdJiYodS5taW5GaWx0ZXI9VEhSRUVbRi5taW5GaWx0ZXJdKSxcbnZvaWQgMCE9PVRIUkVFW0YubWFnRmlsdGVyXSYmKHUubWFnRmlsdGVyPVRIUkVFW0YubWFnRmlsdGVyXSksRi5hbmlzb3Ryb3B5JiYodS5hbmlzb3Ryb3B5PUYuYW5pc290cm9weSksRi5yZXBlYXQmJih1LnJlcGVhdC5zZXQoRi5yZXBlYXRbMF0sRi5yZXBlYXRbMV0pLDEhPT1GLnJlcGVhdFswXSYmKHUud3JhcFM9VEhSRUUuUmVwZWF0V3JhcHBpbmcpLDEhPT1GLnJlcGVhdFsxXSYmKHUud3JhcFQ9VEhSRUUuUmVwZWF0V3JhcHBpbmcpKSxGLm9mZnNldCYmdS5vZmZzZXQuc2V0KEYub2Zmc2V0WzBdLEYub2Zmc2V0WzFdKSxGLndyYXAmJihPPXtyZXBlYXQ6VEhSRUUuUmVwZWF0V3JhcHBpbmcsbWlycm9yOlRIUkVFLk1pcnJvcmVkUmVwZWF0V3JhcHBpbmd9LHZvaWQgMCE9PU9bRi53cmFwWzBdXSYmKHUud3JhcFM9T1tGLndyYXBbMF1dKSx2b2lkIDAhPT1PW0Yud3JhcFsxXV0mJih1LndyYXBUPU9bRi53cmFwWzFdXSkpO3kudGV4dHVyZXNbeF09dX12YXIgSSxCO2ZvcihJIGluIEEubWF0ZXJpYWxzKXt4PVxuQS5tYXRlcmlhbHNbSV07Zm9yKEIgaW4geC5wYXJhbWV0ZXJzKVwiZW52TWFwXCI9PT1CfHxcIm1hcFwiPT09Qnx8XCJsaWdodE1hcFwiPT09Qnx8XCJidW1wTWFwXCI9PT1CP3gucGFyYW1ldGVyc1tCXT15LnRleHR1cmVzW3gucGFyYW1ldGVyc1tCXV06XCJzaGFkaW5nXCI9PT1CP3gucGFyYW1ldGVyc1tCXT1cImZsYXRcIj09PXgucGFyYW1ldGVyc1tCXT9USFJFRS5GbGF0U2hhZGluZzpUSFJFRS5TbW9vdGhTaGFkaW5nOlwic2lkZVwiPT09Qj94LnBhcmFtZXRlcnNbQl09XCJkb3VibGVcIj09eC5wYXJhbWV0ZXJzW0JdP1RIUkVFLkRvdWJsZVNpZGU6XCJiYWNrXCI9PXgucGFyYW1ldGVyc1tCXT9USFJFRS5CYWNrU2lkZTpUSFJFRS5Gcm9udFNpZGU6XCJibGVuZGluZ1wiPT09Qj94LnBhcmFtZXRlcnNbQl09eC5wYXJhbWV0ZXJzW0JdaW4gVEhSRUU/VEhSRUVbeC5wYXJhbWV0ZXJzW0JdXTpUSFJFRS5Ob3JtYWxCbGVuZGluZzpcImNvbWJpbmVcIj09PUI/eC5wYXJhbWV0ZXJzW0JdPXgucGFyYW1ldGVyc1tCXWluIFRIUkVFP1xuVEhSRUVbeC5wYXJhbWV0ZXJzW0JdXTpUSFJFRS5NdWx0aXBseU9wZXJhdGlvbjpcInZlcnRleENvbG9yc1wiPT09Qj9cImZhY2VcIj09eC5wYXJhbWV0ZXJzW0JdP3gucGFyYW1ldGVyc1tCXT1USFJFRS5GYWNlQ29sb3JzOngucGFyYW1ldGVyc1tCXSYmKHgucGFyYW1ldGVyc1tCXT1USFJFRS5WZXJ0ZXhDb2xvcnMpOlwid3JhcFJHQlwiPT09QiYmKEs9eC5wYXJhbWV0ZXJzW0JdLHgucGFyYW1ldGVyc1tCXT1uZXcgVEhSRUUuVmVjdG9yMyhLWzBdLEtbMV0sS1syXSkpO3ZvaWQgMCE9PXgucGFyYW1ldGVycy5vcGFjaXR5JiYxPngucGFyYW1ldGVycy5vcGFjaXR5JiYoeC5wYXJhbWV0ZXJzLnRyYW5zcGFyZW50PSEwKTt4LnBhcmFtZXRlcnMubm9ybWFsTWFwPyhLPVRIUkVFLlNoYWRlckxpYi5ub3JtYWxtYXAsRj1USFJFRS5Vbmlmb3Jtc1V0aWxzLmNsb25lKEsudW5pZm9ybXMpLHU9eC5wYXJhbWV0ZXJzLmNvbG9yLE89eC5wYXJhbWV0ZXJzLnNwZWN1bGFyLG49eC5wYXJhbWV0ZXJzLmFtYmllbnQsXG5EPXgucGFyYW1ldGVycy5zaGluaW5lc3MsRi50Tm9ybWFsLnZhbHVlPXkudGV4dHVyZXNbeC5wYXJhbWV0ZXJzLm5vcm1hbE1hcF0seC5wYXJhbWV0ZXJzLm5vcm1hbFNjYWxlJiZGLnVOb3JtYWxTY2FsZS52YWx1ZS5zZXQoeC5wYXJhbWV0ZXJzLm5vcm1hbFNjYWxlWzBdLHgucGFyYW1ldGVycy5ub3JtYWxTY2FsZVsxXSkseC5wYXJhbWV0ZXJzLm1hcCYmKEYudERpZmZ1c2UudmFsdWU9eC5wYXJhbWV0ZXJzLm1hcCxGLmVuYWJsZURpZmZ1c2UudmFsdWU9ITApLHgucGFyYW1ldGVycy5lbnZNYXAmJihGLnRDdWJlLnZhbHVlPXgucGFyYW1ldGVycy5lbnZNYXAsRi5lbmFibGVSZWZsZWN0aW9uLnZhbHVlPSEwLEYudVJlZmxlY3Rpdml0eS52YWx1ZT14LnBhcmFtZXRlcnMucmVmbGVjdGl2aXR5KSx4LnBhcmFtZXRlcnMubGlnaHRNYXAmJihGLnRBTy52YWx1ZT14LnBhcmFtZXRlcnMubGlnaHRNYXAsRi5lbmFibGVBTy52YWx1ZT0hMCkseC5wYXJhbWV0ZXJzLnNwZWN1bGFyTWFwJiZcbihGLnRTcGVjdWxhci52YWx1ZT15LnRleHR1cmVzW3gucGFyYW1ldGVycy5zcGVjdWxhck1hcF0sRi5lbmFibGVTcGVjdWxhci52YWx1ZT0hMCkseC5wYXJhbWV0ZXJzLmRpc3BsYWNlbWVudE1hcCYmKEYudERpc3BsYWNlbWVudC52YWx1ZT15LnRleHR1cmVzW3gucGFyYW1ldGVycy5kaXNwbGFjZW1lbnRNYXBdLEYuZW5hYmxlRGlzcGxhY2VtZW50LnZhbHVlPSEwLEYudURpc3BsYWNlbWVudEJpYXMudmFsdWU9eC5wYXJhbWV0ZXJzLmRpc3BsYWNlbWVudEJpYXMsRi51RGlzcGxhY2VtZW50U2NhbGUudmFsdWU9eC5wYXJhbWV0ZXJzLmRpc3BsYWNlbWVudFNjYWxlKSxGLnVEaWZmdXNlQ29sb3IudmFsdWUuc2V0SGV4KHUpLEYudVNwZWN1bGFyQ29sb3IudmFsdWUuc2V0SGV4KE8pLEYudUFtYmllbnRDb2xvci52YWx1ZS5zZXRIZXgobiksRi51U2hpbmluZXNzLnZhbHVlPUQseC5wYXJhbWV0ZXJzLm9wYWNpdHkmJihGLnVPcGFjaXR5LnZhbHVlPXgucGFyYW1ldGVycy5vcGFjaXR5KSxcbnM9bmV3IFRIUkVFLlNoYWRlck1hdGVyaWFsKHtmcmFnbWVudFNoYWRlcjpLLmZyYWdtZW50U2hhZGVyLHZlcnRleFNoYWRlcjpLLnZlcnRleFNoYWRlcix1bmlmb3JtczpGLGxpZ2h0czohMCxmb2c6ITB9KSk6cz1uZXcgVEhSRUVbeC50eXBlXSh4LnBhcmFtZXRlcnMpO3MubmFtZT1JO3kubWF0ZXJpYWxzW0ldPXN9Zm9yKEkgaW4gQS5tYXRlcmlhbHMpaWYoeD1BLm1hdGVyaWFsc1tJXSx4LnBhcmFtZXRlcnMubWF0ZXJpYWxzKXtCPVtdO2Zvcih1PTA7dTx4LnBhcmFtZXRlcnMubWF0ZXJpYWxzLmxlbmd0aDt1KyspQi5wdXNoKHkubWF0ZXJpYWxzW3gucGFyYW1ldGVycy5tYXRlcmlhbHNbdV1dKTt5Lm1hdGVyaWFsc1tJXS5tYXRlcmlhbHM9Qn1lKCk7eS5jYW1lcmFzJiZBLmRlZmF1bHRzLmNhbWVyYSYmKHkuY3VycmVudENhbWVyYT15LmNhbWVyYXNbQS5kZWZhdWx0cy5jYW1lcmFdKTt5LmZvZ3MmJkEuZGVmYXVsdHMuZm9nJiYoeS5zY2VuZS5mb2c9eS5mb2dzW0EuZGVmYXVsdHMuZm9nXSk7XG5sLmNhbGxiYWNrU3luYyh5KTtrKCl9fTtUSFJFRS5UZXh0dXJlTG9hZGVyPWZ1bmN0aW9uKGEpe3RoaXMubWFuYWdlcj12b2lkIDAhPT1hP2E6VEhSRUUuRGVmYXVsdExvYWRpbmdNYW5hZ2VyfTtUSFJFRS5UZXh0dXJlTG9hZGVyLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuVGV4dHVyZUxvYWRlcixsb2FkOmZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IFRIUkVFLkltYWdlTG9hZGVyKHRoaXMubWFuYWdlcik7Yy5zZXRDcm9zc09yaWdpbih0aGlzLmNyb3NzT3JpZ2luKTtjLmxvYWQoYSxmdW5jdGlvbihhKXthPW5ldyBUSFJFRS5UZXh0dXJlKGEpO2EubmVlZHNVcGRhdGU9ITA7dm9pZCAwIT09YiYmYihhKX0pfSxzZXRDcm9zc09yaWdpbjpmdW5jdGlvbihhKXt0aGlzLmNyb3NzT3JpZ2luPWF9fTtUSFJFRS5NYXRlcmlhbD1mdW5jdGlvbigpe3RoaXMuaWQ9VEhSRUUuTWF0ZXJpYWxJZENvdW50Kys7dGhpcy51dWlkPVRIUkVFLk1hdGguZ2VuZXJhdGVVVUlEKCk7dGhpcy5uYW1lPVwiXCI7dGhpcy5zaWRlPVRIUkVFLkZyb250U2lkZTt0aGlzLm9wYWNpdHk9MTt0aGlzLnRyYW5zcGFyZW50PSExO3RoaXMuYmxlbmRpbmc9VEhSRUUuTm9ybWFsQmxlbmRpbmc7dGhpcy5ibGVuZFNyYz1USFJFRS5TcmNBbHBoYUZhY3Rvcjt0aGlzLmJsZW5kRHN0PVRIUkVFLk9uZU1pbnVzU3JjQWxwaGFGYWN0b3I7dGhpcy5ibGVuZEVxdWF0aW9uPVRIUkVFLkFkZEVxdWF0aW9uO3RoaXMuZGVwdGhXcml0ZT10aGlzLmRlcHRoVGVzdD0hMDt0aGlzLnBvbHlnb25PZmZzZXQ9ITE7dGhpcy5vdmVyZHJhdz10aGlzLmFscGhhVGVzdD10aGlzLnBvbHlnb25PZmZzZXRVbml0cz10aGlzLnBvbHlnb25PZmZzZXRGYWN0b3I9MDt0aGlzLm5lZWRzVXBkYXRlPXRoaXMudmlzaWJsZT0hMH07XG5USFJFRS5NYXRlcmlhbC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLk1hdGVyaWFsLHNldFZhbHVlczpmdW5jdGlvbihhKXtpZih2b2lkIDAhPT1hKWZvcih2YXIgYiBpbiBhKXt2YXIgYz1hW2JdO2lmKHZvaWQgMD09PWMpY29uc29sZS53YXJuKFwiVEhSRUUuTWF0ZXJpYWw6ICdcIitiK1wiJyBwYXJhbWV0ZXIgaXMgdW5kZWZpbmVkLlwiKTtlbHNlIGlmKGIgaW4gdGhpcyl7dmFyIGQ9dGhpc1tiXTtkIGluc3RhbmNlb2YgVEhSRUUuQ29sb3I/ZC5zZXQoYyk6ZCBpbnN0YW5jZW9mIFRIUkVFLlZlY3RvcjMmJmMgaW5zdGFuY2VvZiBUSFJFRS5WZWN0b3IzP2QuY29weShjKTp0aGlzW2JdPVwib3ZlcmRyYXdcIj09Yj9OdW1iZXIoYyk6Y319fSxjbG9uZTpmdW5jdGlvbihhKXt2b2lkIDA9PT1hJiYoYT1uZXcgVEhSRUUuTWF0ZXJpYWwpO2EubmFtZT10aGlzLm5hbWU7YS5zaWRlPXRoaXMuc2lkZTthLm9wYWNpdHk9dGhpcy5vcGFjaXR5O2EudHJhbnNwYXJlbnQ9dGhpcy50cmFuc3BhcmVudDtcbmEuYmxlbmRpbmc9dGhpcy5ibGVuZGluZzthLmJsZW5kU3JjPXRoaXMuYmxlbmRTcmM7YS5ibGVuZERzdD10aGlzLmJsZW5kRHN0O2EuYmxlbmRFcXVhdGlvbj10aGlzLmJsZW5kRXF1YXRpb247YS5kZXB0aFRlc3Q9dGhpcy5kZXB0aFRlc3Q7YS5kZXB0aFdyaXRlPXRoaXMuZGVwdGhXcml0ZTthLnBvbHlnb25PZmZzZXQ9dGhpcy5wb2x5Z29uT2Zmc2V0O2EucG9seWdvbk9mZnNldEZhY3Rvcj10aGlzLnBvbHlnb25PZmZzZXRGYWN0b3I7YS5wb2x5Z29uT2Zmc2V0VW5pdHM9dGhpcy5wb2x5Z29uT2Zmc2V0VW5pdHM7YS5hbHBoYVRlc3Q9dGhpcy5hbHBoYVRlc3Q7YS5vdmVyZHJhdz10aGlzLm92ZXJkcmF3O2EudmlzaWJsZT10aGlzLnZpc2libGU7cmV0dXJuIGF9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJkaXNwb3NlXCJ9KX19O1RIUkVFLkV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUuYXBwbHkoVEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlKTtcblRIUkVFLk1hdGVyaWFsSWRDb3VudD0wO1RIUkVFLkxpbmVCYXNpY01hdGVyaWFsPWZ1bmN0aW9uKGEpe1RIUkVFLk1hdGVyaWFsLmNhbGwodGhpcyk7dGhpcy5jb2xvcj1uZXcgVEhSRUUuQ29sb3IoMTY3NzcyMTUpO3RoaXMubGluZXdpZHRoPTE7dGhpcy5saW5lam9pbj10aGlzLmxpbmVjYXA9XCJyb3VuZFwiO3RoaXMudmVydGV4Q29sb3JzPSExO3RoaXMuZm9nPSEwO3RoaXMuc2V0VmFsdWVzKGEpfTtUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUpO1xuVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWwucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsO1RIUkVFLk1hdGVyaWFsLnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMsYSk7YS5jb2xvci5jb3B5KHRoaXMuY29sb3IpO2EubGluZXdpZHRoPXRoaXMubGluZXdpZHRoO2EubGluZWNhcD10aGlzLmxpbmVjYXA7YS5saW5lam9pbj10aGlzLmxpbmVqb2luO2EudmVydGV4Q29sb3JzPXRoaXMudmVydGV4Q29sb3JzO2EuZm9nPXRoaXMuZm9nO3JldHVybiBhfTtUSFJFRS5MaW5lRGFzaGVkTWF0ZXJpYWw9ZnVuY3Rpb24oYSl7VEhSRUUuTWF0ZXJpYWwuY2FsbCh0aGlzKTt0aGlzLmNvbG9yPW5ldyBUSFJFRS5Db2xvcigxNjc3NzIxNSk7dGhpcy5zY2FsZT10aGlzLmxpbmV3aWR0aD0xO3RoaXMuZGFzaFNpemU9Mzt0aGlzLmdhcFNpemU9MTt0aGlzLnZlcnRleENvbG9ycz0hMTt0aGlzLmZvZz0hMDt0aGlzLnNldFZhbHVlcyhhKX07VEhSRUUuTGluZURhc2hlZE1hdGVyaWFsLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk1hdGVyaWFsLnByb3RvdHlwZSk7XG5USFJFRS5MaW5lRGFzaGVkTWF0ZXJpYWwucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLkxpbmVEYXNoZWRNYXRlcmlhbDtUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzLGEpO2EuY29sb3IuY29weSh0aGlzLmNvbG9yKTthLmxpbmV3aWR0aD10aGlzLmxpbmV3aWR0aDthLnNjYWxlPXRoaXMuc2NhbGU7YS5kYXNoU2l6ZT10aGlzLmRhc2hTaXplO2EuZ2FwU2l6ZT10aGlzLmdhcFNpemU7YS52ZXJ0ZXhDb2xvcnM9dGhpcy52ZXJ0ZXhDb2xvcnM7YS5mb2c9dGhpcy5mb2c7cmV0dXJuIGF9O1RIUkVFLk1lc2hCYXNpY01hdGVyaWFsPWZ1bmN0aW9uKGEpe1RIUkVFLk1hdGVyaWFsLmNhbGwodGhpcyk7dGhpcy5jb2xvcj1uZXcgVEhSRUUuQ29sb3IoMTY3NzcyMTUpO3RoaXMuZW52TWFwPXRoaXMuc3BlY3VsYXJNYXA9dGhpcy5saWdodE1hcD10aGlzLm1hcD1udWxsO3RoaXMuY29tYmluZT1USFJFRS5NdWx0aXBseU9wZXJhdGlvbjt0aGlzLnJlZmxlY3Rpdml0eT0xO3RoaXMucmVmcmFjdGlvblJhdGlvPTAuOTg7dGhpcy5mb2c9ITA7dGhpcy5zaGFkaW5nPVRIUkVFLlNtb290aFNoYWRpbmc7dGhpcy53aXJlZnJhbWU9ITE7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9MTt0aGlzLndpcmVmcmFtZUxpbmVqb2luPXRoaXMud2lyZWZyYW1lTGluZWNhcD1cInJvdW5kXCI7dGhpcy52ZXJ0ZXhDb2xvcnM9VEhSRUUuTm9Db2xvcnM7dGhpcy5tb3JwaFRhcmdldHM9dGhpcy5za2lubmluZz0hMTt0aGlzLnNldFZhbHVlcyhhKX07XG5USFJFRS5NZXNoQmFzaWNNYXRlcmlhbC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUpO1xuVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsO1RIUkVFLk1hdGVyaWFsLnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMsYSk7YS5jb2xvci5jb3B5KHRoaXMuY29sb3IpO2EubWFwPXRoaXMubWFwO2EubGlnaHRNYXA9dGhpcy5saWdodE1hcDthLnNwZWN1bGFyTWFwPXRoaXMuc3BlY3VsYXJNYXA7YS5lbnZNYXA9dGhpcy5lbnZNYXA7YS5jb21iaW5lPXRoaXMuY29tYmluZTthLnJlZmxlY3Rpdml0eT10aGlzLnJlZmxlY3Rpdml0eTthLnJlZnJhY3Rpb25SYXRpbz10aGlzLnJlZnJhY3Rpb25SYXRpbzthLmZvZz10aGlzLmZvZzthLnNoYWRpbmc9dGhpcy5zaGFkaW5nO2Eud2lyZWZyYW1lPXRoaXMud2lyZWZyYW1lO2Eud2lyZWZyYW1lTGluZXdpZHRoPXRoaXMud2lyZWZyYW1lTGluZXdpZHRoO2Eud2lyZWZyYW1lTGluZWNhcD10aGlzLndpcmVmcmFtZUxpbmVjYXA7YS53aXJlZnJhbWVMaW5lam9pbj1cbnRoaXMud2lyZWZyYW1lTGluZWpvaW47YS52ZXJ0ZXhDb2xvcnM9dGhpcy52ZXJ0ZXhDb2xvcnM7YS5za2lubmluZz10aGlzLnNraW5uaW5nO2EubW9ycGhUYXJnZXRzPXRoaXMubW9ycGhUYXJnZXRzO3JldHVybiBhfTtUSFJFRS5NZXNoTGFtYmVydE1hdGVyaWFsPWZ1bmN0aW9uKGEpe1RIUkVFLk1hdGVyaWFsLmNhbGwodGhpcyk7dGhpcy5jb2xvcj1uZXcgVEhSRUUuQ29sb3IoMTY3NzcyMTUpO3RoaXMuYW1iaWVudD1uZXcgVEhSRUUuQ29sb3IoMTY3NzcyMTUpO3RoaXMuZW1pc3NpdmU9bmV3IFRIUkVFLkNvbG9yKDApO3RoaXMud3JhcEFyb3VuZD0hMTt0aGlzLndyYXBSR0I9bmV3IFRIUkVFLlZlY3RvcjMoMSwxLDEpO3RoaXMuZW52TWFwPXRoaXMuc3BlY3VsYXJNYXA9dGhpcy5saWdodE1hcD10aGlzLm1hcD1udWxsO3RoaXMuY29tYmluZT1USFJFRS5NdWx0aXBseU9wZXJhdGlvbjt0aGlzLnJlZmxlY3Rpdml0eT0xO3RoaXMucmVmcmFjdGlvblJhdGlvPTAuOTg7dGhpcy5mb2c9ITA7dGhpcy5zaGFkaW5nPVRIUkVFLlNtb290aFNoYWRpbmc7dGhpcy53aXJlZnJhbWU9ITE7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9MTt0aGlzLndpcmVmcmFtZUxpbmVqb2luPXRoaXMud2lyZWZyYW1lTGluZWNhcD1cblwicm91bmRcIjt0aGlzLnZlcnRleENvbG9ycz1USFJFRS5Ob0NvbG9yczt0aGlzLm1vcnBoTm9ybWFscz10aGlzLm1vcnBoVGFyZ2V0cz10aGlzLnNraW5uaW5nPSExO3RoaXMuc2V0VmFsdWVzKGEpfTtUSFJFRS5NZXNoTGFtYmVydE1hdGVyaWFsLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk1hdGVyaWFsLnByb3RvdHlwZSk7XG5USFJFRS5NZXNoTGFtYmVydE1hdGVyaWFsLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5NZXNoTGFtYmVydE1hdGVyaWFsO1RIUkVFLk1hdGVyaWFsLnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMsYSk7YS5jb2xvci5jb3B5KHRoaXMuY29sb3IpO2EuYW1iaWVudC5jb3B5KHRoaXMuYW1iaWVudCk7YS5lbWlzc2l2ZS5jb3B5KHRoaXMuZW1pc3NpdmUpO2Eud3JhcEFyb3VuZD10aGlzLndyYXBBcm91bmQ7YS53cmFwUkdCLmNvcHkodGhpcy53cmFwUkdCKTthLm1hcD10aGlzLm1hcDthLmxpZ2h0TWFwPXRoaXMubGlnaHRNYXA7YS5zcGVjdWxhck1hcD10aGlzLnNwZWN1bGFyTWFwO2EuZW52TWFwPXRoaXMuZW52TWFwO2EuY29tYmluZT10aGlzLmNvbWJpbmU7YS5yZWZsZWN0aXZpdHk9dGhpcy5yZWZsZWN0aXZpdHk7YS5yZWZyYWN0aW9uUmF0aW89dGhpcy5yZWZyYWN0aW9uUmF0aW87YS5mb2c9dGhpcy5mb2c7YS5zaGFkaW5nPXRoaXMuc2hhZGluZztcbmEud2lyZWZyYW1lPXRoaXMud2lyZWZyYW1lO2Eud2lyZWZyYW1lTGluZXdpZHRoPXRoaXMud2lyZWZyYW1lTGluZXdpZHRoO2Eud2lyZWZyYW1lTGluZWNhcD10aGlzLndpcmVmcmFtZUxpbmVjYXA7YS53aXJlZnJhbWVMaW5lam9pbj10aGlzLndpcmVmcmFtZUxpbmVqb2luO2EudmVydGV4Q29sb3JzPXRoaXMudmVydGV4Q29sb3JzO2Euc2tpbm5pbmc9dGhpcy5za2lubmluZzthLm1vcnBoVGFyZ2V0cz10aGlzLm1vcnBoVGFyZ2V0czthLm1vcnBoTm9ybWFscz10aGlzLm1vcnBoTm9ybWFscztyZXR1cm4gYX07VEhSRUUuTWVzaFBob25nTWF0ZXJpYWw9ZnVuY3Rpb24oYSl7VEhSRUUuTWF0ZXJpYWwuY2FsbCh0aGlzKTt0aGlzLmNvbG9yPW5ldyBUSFJFRS5Db2xvcigxNjc3NzIxNSk7dGhpcy5hbWJpZW50PW5ldyBUSFJFRS5Db2xvcigxNjc3NzIxNSk7dGhpcy5lbWlzc2l2ZT1uZXcgVEhSRUUuQ29sb3IoMCk7dGhpcy5zcGVjdWxhcj1uZXcgVEhSRUUuQ29sb3IoMTExODQ4MSk7dGhpcy5zaGluaW5lc3M9MzA7dGhpcy5tZXRhbD0hMTt0aGlzLnBlclBpeGVsPSEwO3RoaXMud3JhcEFyb3VuZD0hMTt0aGlzLndyYXBSR0I9bmV3IFRIUkVFLlZlY3RvcjMoMSwxLDEpO3RoaXMuYnVtcE1hcD10aGlzLmxpZ2h0TWFwPXRoaXMubWFwPW51bGw7dGhpcy5idW1wU2NhbGU9MTt0aGlzLm5vcm1hbE1hcD1udWxsO3RoaXMubm9ybWFsU2NhbGU9bmV3IFRIUkVFLlZlY3RvcjIoMSwxKTt0aGlzLmVudk1hcD10aGlzLnNwZWN1bGFyTWFwPW51bGw7dGhpcy5jb21iaW5lPVRIUkVFLk11bHRpcGx5T3BlcmF0aW9uO1xudGhpcy5yZWZsZWN0aXZpdHk9MTt0aGlzLnJlZnJhY3Rpb25SYXRpbz0wLjk4O3RoaXMuZm9nPSEwO3RoaXMuc2hhZGluZz1USFJFRS5TbW9vdGhTaGFkaW5nO3RoaXMud2lyZWZyYW1lPSExO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPTE7dGhpcy53aXJlZnJhbWVMaW5lam9pbj10aGlzLndpcmVmcmFtZUxpbmVjYXA9XCJyb3VuZFwiO3RoaXMudmVydGV4Q29sb3JzPVRIUkVFLk5vQ29sb3JzO3RoaXMubW9ycGhOb3JtYWxzPXRoaXMubW9ycGhUYXJnZXRzPXRoaXMuc2tpbm5pbmc9ITE7dGhpcy5zZXRWYWx1ZXMoYSl9O1RIUkVFLk1lc2hQaG9uZ01hdGVyaWFsLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk1hdGVyaWFsLnByb3RvdHlwZSk7XG5USFJFRS5NZXNoUGhvbmdNYXRlcmlhbC5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWw7VEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyxhKTthLmNvbG9yLmNvcHkodGhpcy5jb2xvcik7YS5hbWJpZW50LmNvcHkodGhpcy5hbWJpZW50KTthLmVtaXNzaXZlLmNvcHkodGhpcy5lbWlzc2l2ZSk7YS5zcGVjdWxhci5jb3B5KHRoaXMuc3BlY3VsYXIpO2Euc2hpbmluZXNzPXRoaXMuc2hpbmluZXNzO2EubWV0YWw9dGhpcy5tZXRhbDthLnBlclBpeGVsPXRoaXMucGVyUGl4ZWw7YS53cmFwQXJvdW5kPXRoaXMud3JhcEFyb3VuZDthLndyYXBSR0IuY29weSh0aGlzLndyYXBSR0IpO2EubWFwPXRoaXMubWFwO2EubGlnaHRNYXA9dGhpcy5saWdodE1hcDthLmJ1bXBNYXA9dGhpcy5idW1wTWFwO2EuYnVtcFNjYWxlPXRoaXMuYnVtcFNjYWxlO2Eubm9ybWFsTWFwPXRoaXMubm9ybWFsTWFwO2Eubm9ybWFsU2NhbGUuY29weSh0aGlzLm5vcm1hbFNjYWxlKTtcbmEuc3BlY3VsYXJNYXA9dGhpcy5zcGVjdWxhck1hcDthLmVudk1hcD10aGlzLmVudk1hcDthLmNvbWJpbmU9dGhpcy5jb21iaW5lO2EucmVmbGVjdGl2aXR5PXRoaXMucmVmbGVjdGl2aXR5O2EucmVmcmFjdGlvblJhdGlvPXRoaXMucmVmcmFjdGlvblJhdGlvO2EuZm9nPXRoaXMuZm9nO2Euc2hhZGluZz10aGlzLnNoYWRpbmc7YS53aXJlZnJhbWU9dGhpcy53aXJlZnJhbWU7YS53aXJlZnJhbWVMaW5ld2lkdGg9dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg7YS53aXJlZnJhbWVMaW5lY2FwPXRoaXMud2lyZWZyYW1lTGluZWNhcDthLndpcmVmcmFtZUxpbmVqb2luPXRoaXMud2lyZWZyYW1lTGluZWpvaW47YS52ZXJ0ZXhDb2xvcnM9dGhpcy52ZXJ0ZXhDb2xvcnM7YS5za2lubmluZz10aGlzLnNraW5uaW5nO2EubW9ycGhUYXJnZXRzPXRoaXMubW9ycGhUYXJnZXRzO2EubW9ycGhOb3JtYWxzPXRoaXMubW9ycGhOb3JtYWxzO3JldHVybiBhfTtUSFJFRS5NZXNoRGVwdGhNYXRlcmlhbD1mdW5jdGlvbihhKXtUSFJFRS5NYXRlcmlhbC5jYWxsKHRoaXMpO3RoaXMud2lyZWZyYW1lPSExO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPTE7dGhpcy5zZXRWYWx1ZXMoYSl9O1RIUkVFLk1lc2hEZXB0aE1hdGVyaWFsLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk1hdGVyaWFsLnByb3RvdHlwZSk7VEhSRUUuTWVzaERlcHRoTWF0ZXJpYWwucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLk1lc2hEZXB0aE1hdGVyaWFsO1RIUkVFLk1hdGVyaWFsLnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMsYSk7YS53aXJlZnJhbWU9dGhpcy53aXJlZnJhbWU7YS53aXJlZnJhbWVMaW5ld2lkdGg9dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg7cmV0dXJuIGF9O1RIUkVFLk1lc2hOb3JtYWxNYXRlcmlhbD1mdW5jdGlvbihhKXtUSFJFRS5NYXRlcmlhbC5jYWxsKHRoaXMsYSk7dGhpcy5zaGFkaW5nPVRIUkVFLkZsYXRTaGFkaW5nO3RoaXMud2lyZWZyYW1lPSExO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPTE7dGhpcy5tb3JwaFRhcmdldHM9ITE7dGhpcy5zZXRWYWx1ZXMoYSl9O1RIUkVFLk1lc2hOb3JtYWxNYXRlcmlhbC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUpO1RIUkVFLk1lc2hOb3JtYWxNYXRlcmlhbC5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuTWVzaE5vcm1hbE1hdGVyaWFsO1RIUkVFLk1hdGVyaWFsLnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMsYSk7YS5zaGFkaW5nPXRoaXMuc2hhZGluZzthLndpcmVmcmFtZT10aGlzLndpcmVmcmFtZTthLndpcmVmcmFtZUxpbmV3aWR0aD10aGlzLndpcmVmcmFtZUxpbmV3aWR0aDtyZXR1cm4gYX07VEhSRUUuTWVzaEZhY2VNYXRlcmlhbD1mdW5jdGlvbihhKXt0aGlzLm1hdGVyaWFscz1hIGluc3RhbmNlb2YgQXJyYXk/YTpbXX07VEhSRUUuTWVzaEZhY2VNYXRlcmlhbC5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtmb3IodmFyIGE9bmV3IFRIUkVFLk1lc2hGYWNlTWF0ZXJpYWwsYj0wO2I8dGhpcy5tYXRlcmlhbHMubGVuZ3RoO2IrKylhLm1hdGVyaWFscy5wdXNoKHRoaXMubWF0ZXJpYWxzW2JdLmNsb25lKCkpO3JldHVybiBhfTtUSFJFRS5QYXJ0aWNsZVN5c3RlbU1hdGVyaWFsPWZ1bmN0aW9uKGEpe1RIUkVFLk1hdGVyaWFsLmNhbGwodGhpcyk7dGhpcy5jb2xvcj1uZXcgVEhSRUUuQ29sb3IoMTY3NzcyMTUpO3RoaXMubWFwPW51bGw7dGhpcy5zaXplPTE7dGhpcy5zaXplQXR0ZW51YXRpb249ITA7dGhpcy52ZXJ0ZXhDb2xvcnM9ITE7dGhpcy5mb2c9ITA7dGhpcy5zZXRWYWx1ZXMoYSl9O1RIUkVFLlBhcnRpY2xlU3lzdGVtTWF0ZXJpYWwucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlKTtcblRIUkVFLlBhcnRpY2xlU3lzdGVtTWF0ZXJpYWwucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlBhcnRpY2xlU3lzdGVtTWF0ZXJpYWw7VEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyxhKTthLmNvbG9yLmNvcHkodGhpcy5jb2xvcik7YS5tYXA9dGhpcy5tYXA7YS5zaXplPXRoaXMuc2l6ZTthLnNpemVBdHRlbnVhdGlvbj10aGlzLnNpemVBdHRlbnVhdGlvbjthLnZlcnRleENvbG9ycz10aGlzLnZlcnRleENvbG9yczthLmZvZz10aGlzLmZvZztyZXR1cm4gYX07VEhSRUUuUGFydGljbGVCYXNpY01hdGVyaWFsPVRIUkVFLlBhcnRpY2xlU3lzdGVtTWF0ZXJpYWw7VEhSRUUuU2hhZGVyTWF0ZXJpYWw9ZnVuY3Rpb24oYSl7VEhSRUUuTWF0ZXJpYWwuY2FsbCh0aGlzKTt0aGlzLnZlcnRleFNoYWRlcj10aGlzLmZyYWdtZW50U2hhZGVyPVwidm9pZCBtYWluKCkge31cIjt0aGlzLnVuaWZvcm1zPXt9O3RoaXMuZGVmaW5lcz17fTt0aGlzLmF0dHJpYnV0ZXM9bnVsbDt0aGlzLnNoYWRpbmc9VEhSRUUuU21vb3RoU2hhZGluZzt0aGlzLmxpbmV3aWR0aD0xO3RoaXMud2lyZWZyYW1lPSExO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPTE7dGhpcy5saWdodHM9dGhpcy5mb2c9ITE7dGhpcy52ZXJ0ZXhDb2xvcnM9VEhSRUUuTm9Db2xvcnM7dGhpcy5tb3JwaE5vcm1hbHM9dGhpcy5tb3JwaFRhcmdldHM9dGhpcy5za2lubmluZz0hMTt0aGlzLmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXM9e2NvbG9yOlsxLDEsMV0sdXY6WzAsMF0sdXYyOlswLDBdfTt0aGlzLmluZGV4MEF0dHJpYnV0ZU5hbWU9XCJwb3NpdGlvblwiO3RoaXMuc2V0VmFsdWVzKGEpfTtcblRIUkVFLlNoYWRlck1hdGVyaWFsLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk1hdGVyaWFsLnByb3RvdHlwZSk7XG5USFJFRS5TaGFkZXJNYXRlcmlhbC5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuU2hhZGVyTWF0ZXJpYWw7VEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyxhKTthLmZyYWdtZW50U2hhZGVyPXRoaXMuZnJhZ21lbnRTaGFkZXI7YS52ZXJ0ZXhTaGFkZXI9dGhpcy52ZXJ0ZXhTaGFkZXI7YS51bmlmb3Jtcz1USFJFRS5Vbmlmb3Jtc1V0aWxzLmNsb25lKHRoaXMudW5pZm9ybXMpO2EuYXR0cmlidXRlcz10aGlzLmF0dHJpYnV0ZXM7YS5kZWZpbmVzPXRoaXMuZGVmaW5lczthLnNoYWRpbmc9dGhpcy5zaGFkaW5nO2Eud2lyZWZyYW1lPXRoaXMud2lyZWZyYW1lO2Eud2lyZWZyYW1lTGluZXdpZHRoPXRoaXMud2lyZWZyYW1lTGluZXdpZHRoO2EuZm9nPXRoaXMuZm9nO2EubGlnaHRzPXRoaXMubGlnaHRzO2EudmVydGV4Q29sb3JzPXRoaXMudmVydGV4Q29sb3JzO2Euc2tpbm5pbmc9dGhpcy5za2lubmluZzthLm1vcnBoVGFyZ2V0cz1cbnRoaXMubW9ycGhUYXJnZXRzO2EubW9ycGhOb3JtYWxzPXRoaXMubW9ycGhOb3JtYWxzO3JldHVybiBhfTtUSFJFRS5TcHJpdGVNYXRlcmlhbD1mdW5jdGlvbihhKXtUSFJFRS5NYXRlcmlhbC5jYWxsKHRoaXMpO3RoaXMuY29sb3I9bmV3IFRIUkVFLkNvbG9yKDE2Nzc3MjE1KTt0aGlzLm1hcD1udWxsO3RoaXMucm90YXRpb249MDt0aGlzLmZvZz0hMTt0aGlzLnV2T2Zmc2V0PW5ldyBUSFJFRS5WZWN0b3IyKDAsMCk7dGhpcy51dlNjYWxlPW5ldyBUSFJFRS5WZWN0b3IyKDEsMSk7dGhpcy5zZXRWYWx1ZXMoYSl9O1RIUkVFLlNwcml0ZU1hdGVyaWFsLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk1hdGVyaWFsLnByb3RvdHlwZSk7XG5USFJFRS5TcHJpdGVNYXRlcmlhbC5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuU3ByaXRlTWF0ZXJpYWw7VEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyxhKTthLmNvbG9yLmNvcHkodGhpcy5jb2xvcik7YS5tYXA9dGhpcy5tYXA7YS5yb3RhdGlvbj10aGlzLnJvdGF0aW9uO2EudXZPZmZzZXQuY29weSh0aGlzLnV2T2Zmc2V0KTthLnV2U2NhbGUuY29weSh0aGlzLnV2U2NhbGUpO2EuZm9nPXRoaXMuZm9nO3JldHVybiBhfTtUSFJFRS5TcHJpdGVDYW52YXNNYXRlcmlhbD1mdW5jdGlvbihhKXtUSFJFRS5NYXRlcmlhbC5jYWxsKHRoaXMpO3RoaXMuY29sb3I9bmV3IFRIUkVFLkNvbG9yKDE2Nzc3MjE1KTt0aGlzLnByb2dyYW09ZnVuY3Rpb24oKXt9O3RoaXMuc2V0VmFsdWVzKGEpfTtUSFJFRS5TcHJpdGVDYW52YXNNYXRlcmlhbC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUpO1RIUkVFLlNwcml0ZUNhbnZhc01hdGVyaWFsLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5TcHJpdGVDYW52YXNNYXRlcmlhbDtUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzLGEpO2EuY29sb3IuY29weSh0aGlzLmNvbG9yKTthLnByb2dyYW09dGhpcy5wcm9ncmFtO3JldHVybiBhfTtUSFJFRS5QYXJ0aWNsZUNhbnZhc01hdGVyaWFsPVRIUkVFLlNwcml0ZUNhbnZhc01hdGVyaWFsO1RIUkVFLlRleHR1cmU9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsaCxnLGkpe3RoaXMuaWQ9VEhSRUUuVGV4dHVyZUlkQ291bnQrKzt0aGlzLnV1aWQ9VEhSRUUuTWF0aC5nZW5lcmF0ZVVVSUQoKTt0aGlzLm5hbWU9XCJcIjt0aGlzLmltYWdlPWE7dGhpcy5taXBtYXBzPVtdO3RoaXMubWFwcGluZz12b2lkIDAhPT1iP2I6bmV3IFRIUkVFLlVWTWFwcGluZzt0aGlzLndyYXBTPXZvaWQgMCE9PWM/YzpUSFJFRS5DbGFtcFRvRWRnZVdyYXBwaW5nO3RoaXMud3JhcFQ9dm9pZCAwIT09ZD9kOlRIUkVFLkNsYW1wVG9FZGdlV3JhcHBpbmc7dGhpcy5tYWdGaWx0ZXI9dm9pZCAwIT09ZT9lOlRIUkVFLkxpbmVhckZpbHRlcjt0aGlzLm1pbkZpbHRlcj12b2lkIDAhPT1mP2Y6VEhSRUUuTGluZWFyTWlwTWFwTGluZWFyRmlsdGVyO3RoaXMuYW5pc290cm9weT12b2lkIDAhPT1pP2k6MTt0aGlzLmZvcm1hdD12b2lkIDAhPT1oP2g6VEhSRUUuUkdCQUZvcm1hdDt0aGlzLnR5cGU9dm9pZCAwIT09Zz9nOlRIUkVFLlVuc2lnbmVkQnl0ZVR5cGU7XG50aGlzLm9mZnNldD1uZXcgVEhSRUUuVmVjdG9yMigwLDApO3RoaXMucmVwZWF0PW5ldyBUSFJFRS5WZWN0b3IyKDEsMSk7dGhpcy5nZW5lcmF0ZU1pcG1hcHM9ITA7dGhpcy5wcmVtdWx0aXBseUFscGhhPSExO3RoaXMuZmxpcFk9ITA7dGhpcy51bnBhY2tBbGlnbm1lbnQ9NDt0aGlzLm5lZWRzVXBkYXRlPSExO3RoaXMub25VcGRhdGU9bnVsbH07XG5USFJFRS5UZXh0dXJlLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuVGV4dHVyZSxjbG9uZTpmdW5jdGlvbihhKXt2b2lkIDA9PT1hJiYoYT1uZXcgVEhSRUUuVGV4dHVyZSk7YS5pbWFnZT10aGlzLmltYWdlO2EubWlwbWFwcz10aGlzLm1pcG1hcHMuc2xpY2UoMCk7YS5tYXBwaW5nPXRoaXMubWFwcGluZzthLndyYXBTPXRoaXMud3JhcFM7YS53cmFwVD10aGlzLndyYXBUO2EubWFnRmlsdGVyPXRoaXMubWFnRmlsdGVyO2EubWluRmlsdGVyPXRoaXMubWluRmlsdGVyO2EuYW5pc290cm9weT10aGlzLmFuaXNvdHJvcHk7YS5mb3JtYXQ9dGhpcy5mb3JtYXQ7YS50eXBlPXRoaXMudHlwZTthLm9mZnNldC5jb3B5KHRoaXMub2Zmc2V0KTthLnJlcGVhdC5jb3B5KHRoaXMucmVwZWF0KTthLmdlbmVyYXRlTWlwbWFwcz10aGlzLmdlbmVyYXRlTWlwbWFwczthLnByZW11bHRpcGx5QWxwaGE9dGhpcy5wcmVtdWx0aXBseUFscGhhO2EuZmxpcFk9dGhpcy5mbGlwWTthLnVucGFja0FsaWdubWVudD1cbnRoaXMudW5wYWNrQWxpZ25tZW50O3JldHVybiBhfSxkaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiZGlzcG9zZVwifSl9fTtUSFJFRS5FdmVudERpc3BhdGNoZXIucHJvdG90eXBlLmFwcGx5KFRIUkVFLlRleHR1cmUucHJvdG90eXBlKTtUSFJFRS5UZXh0dXJlSWRDb3VudD0wO1RIUkVFLkNvbXByZXNzZWRUZXh0dXJlPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGgsZyxpLGssbSl7VEhSRUUuVGV4dHVyZS5jYWxsKHRoaXMsbnVsbCxmLGgsZyxpLGssZCxlLG0pO3RoaXMuaW1hZ2U9e3dpZHRoOmIsaGVpZ2h0OmN9O3RoaXMubWlwbWFwcz1hO3RoaXMuZ2VuZXJhdGVNaXBtYXBzPSExfTtUSFJFRS5Db21wcmVzc2VkVGV4dHVyZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5UZXh0dXJlLnByb3RvdHlwZSk7VEhSRUUuQ29tcHJlc3NlZFRleHR1cmUucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLkNvbXByZXNzZWRUZXh0dXJlO1RIUkVFLlRleHR1cmUucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyxhKTtyZXR1cm4gYX07VEhSRUUuRGF0YVRleHR1cmU9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsaCxnLGksayxtKXtUSFJFRS5UZXh0dXJlLmNhbGwodGhpcyxudWxsLGYsaCxnLGksayxkLGUsbSk7dGhpcy5pbWFnZT17ZGF0YTphLHdpZHRoOmIsaGVpZ2h0OmN9fTtUSFJFRS5EYXRhVGV4dHVyZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5UZXh0dXJlLnByb3RvdHlwZSk7VEhSRUUuRGF0YVRleHR1cmUucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLkRhdGFUZXh0dXJlO1RIUkVFLlRleHR1cmUucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyxhKTtyZXR1cm4gYX07VEhSRUUuUGFydGljbGVTeXN0ZW09ZnVuY3Rpb24oYSxiKXtUSFJFRS5PYmplY3QzRC5jYWxsKHRoaXMpO3RoaXMuZ2VvbWV0cnk9dm9pZCAwIT09YT9hOm5ldyBUSFJFRS5HZW9tZXRyeTt0aGlzLm1hdGVyaWFsPXZvaWQgMCE9PWI/YjpuZXcgVEhSRUUuUGFydGljbGVTeXN0ZW1NYXRlcmlhbCh7Y29sb3I6MTY3NzcyMTUqTWF0aC5yYW5kb20oKX0pO3RoaXMuZnJ1c3R1bUN1bGxlZD10aGlzLnNvcnRQYXJ0aWNsZXM9ITF9O1RIUkVFLlBhcnRpY2xlU3lzdGVtLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSk7XG5USFJFRS5QYXJ0aWNsZVN5c3RlbS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oYSl7dm9pZCAwPT09YSYmKGE9bmV3IFRIUkVFLlBhcnRpY2xlU3lzdGVtKHRoaXMuZ2VvbWV0cnksdGhpcy5tYXRlcmlhbCkpO2Euc29ydFBhcnRpY2xlcz10aGlzLnNvcnRQYXJ0aWNsZXM7VEhSRUUuT2JqZWN0M0QucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyxhKTtyZXR1cm4gYX07VEhSRUUuTGluZT1mdW5jdGlvbihhLGIsYyl7VEhSRUUuT2JqZWN0M0QuY2FsbCh0aGlzKTt0aGlzLmdlb21ldHJ5PXZvaWQgMCE9PWE/YTpuZXcgVEhSRUUuR2VvbWV0cnk7dGhpcy5tYXRlcmlhbD12b2lkIDAhPT1iP2I6bmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKHtjb2xvcjoxNjc3NzIxNSpNYXRoLnJhbmRvbSgpfSk7dGhpcy50eXBlPXZvaWQgMCE9PWM/YzpUSFJFRS5MaW5lU3RyaXB9O1RIUkVFLkxpbmVTdHJpcD0wO1RIUkVFLkxpbmVQaWVjZXM9MTtUSFJFRS5MaW5lLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSk7VEhSRUUuTGluZS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oYSl7dm9pZCAwPT09YSYmKGE9bmV3IFRIUkVFLkxpbmUodGhpcy5nZW9tZXRyeSx0aGlzLm1hdGVyaWFsLHRoaXMudHlwZSkpO1RIUkVFLk9iamVjdDNELnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMsYSk7cmV0dXJuIGF9O1RIUkVFLk1lc2g9ZnVuY3Rpb24oYSxiKXtUSFJFRS5PYmplY3QzRC5jYWxsKHRoaXMpO3RoaXMuZ2VvbWV0cnk9dm9pZCAwIT09YT9hOm5ldyBUSFJFRS5HZW9tZXRyeTt0aGlzLm1hdGVyaWFsPXZvaWQgMCE9PWI/YjpuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe2NvbG9yOjE2Nzc3MjE1Kk1hdGgucmFuZG9tKCl9KTt0aGlzLnVwZGF0ZU1vcnBoVGFyZ2V0cygpfTtUSFJFRS5NZXNoLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSk7XG5USFJFRS5NZXNoLnByb3RvdHlwZS51cGRhdGVNb3JwaFRhcmdldHM9ZnVuY3Rpb24oKXtpZigwPHRoaXMuZ2VvbWV0cnkubW9ycGhUYXJnZXRzLmxlbmd0aCl7dGhpcy5tb3JwaFRhcmdldEJhc2U9LTE7dGhpcy5tb3JwaFRhcmdldEZvcmNlZE9yZGVyPVtdO3RoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzPVtdO3RoaXMubW9ycGhUYXJnZXREaWN0aW9uYXJ5PXt9O2Zvcih2YXIgYT0wLGI9dGhpcy5nZW9tZXRyeS5tb3JwaFRhcmdldHMubGVuZ3RoO2E8YjthKyspdGhpcy5tb3JwaFRhcmdldEluZmx1ZW5jZXMucHVzaCgwKSx0aGlzLm1vcnBoVGFyZ2V0RGljdGlvbmFyeVt0aGlzLmdlb21ldHJ5Lm1vcnBoVGFyZ2V0c1thXS5uYW1lXT1hfX07XG5USFJFRS5NZXNoLnByb3RvdHlwZS5nZXRNb3JwaFRhcmdldEluZGV4QnlOYW1lPWZ1bmN0aW9uKGEpe2lmKHZvaWQgMCE9PXRoaXMubW9ycGhUYXJnZXREaWN0aW9uYXJ5W2FdKXJldHVybiB0aGlzLm1vcnBoVGFyZ2V0RGljdGlvbmFyeVthXTtjb25zb2xlLmxvZyhcIlRIUkVFLk1lc2guZ2V0TW9ycGhUYXJnZXRJbmRleEJ5TmFtZTogbW9ycGggdGFyZ2V0IFwiK2ErXCIgZG9lcyBub3QgZXhpc3QuIFJldHVybmluZyAwLlwiKTtyZXR1cm4gMH07VEhSRUUuTWVzaC5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oYSl7dm9pZCAwPT09YSYmKGE9bmV3IFRIUkVFLk1lc2godGhpcy5nZW9tZXRyeSx0aGlzLm1hdGVyaWFsKSk7VEhSRUUuT2JqZWN0M0QucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyxhKTtyZXR1cm4gYX07VEhSRUUuQm9uZT1mdW5jdGlvbihhKXtUSFJFRS5PYmplY3QzRC5jYWxsKHRoaXMpO3RoaXMuc2tpbj1hO3RoaXMuc2tpbk1hdHJpeD1uZXcgVEhSRUUuTWF0cml4NH07VEhSRUUuQm9uZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUpO1RIUkVFLkJvbmUucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbihhLGIpe3RoaXMubWF0cml4QXV0b1VwZGF0ZSYmKGJ8PXRoaXMudXBkYXRlTWF0cml4KCkpO2lmKGJ8fHRoaXMubWF0cml4V29ybGROZWVkc1VwZGF0ZSlhP3RoaXMuc2tpbk1hdHJpeC5tdWx0aXBseU1hdHJpY2VzKGEsdGhpcy5tYXRyaXgpOnRoaXMuc2tpbk1hdHJpeC5jb3B5KHRoaXMubWF0cml4KSx0aGlzLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9ITEsYj0hMDt2YXIgYyxkPXRoaXMuY2hpbGRyZW4ubGVuZ3RoO2ZvcihjPTA7YzxkO2MrKyl0aGlzLmNoaWxkcmVuW2NdLnVwZGF0ZSh0aGlzLnNraW5NYXRyaXgsYil9O1RIUkVFLlNraW5uZWRNZXNoPWZ1bmN0aW9uKGEsYixjKXtUSFJFRS5NZXNoLmNhbGwodGhpcyxhLGIpO3RoaXMudXNlVmVydGV4VGV4dHVyZT12b2lkIDAhPT1jP2M6ITA7dGhpcy5pZGVudGl0eU1hdHJpeD1uZXcgVEhSRUUuTWF0cml4NDt0aGlzLmJvbmVzPVtdO3RoaXMuYm9uZU1hdHJpY2VzPVtdO3ZhciBkLGUsZjtpZih0aGlzLmdlb21ldHJ5JiZ2b2lkIDAhPT10aGlzLmdlb21ldHJ5LmJvbmVzKXtmb3IoYT0wO2E8dGhpcy5nZW9tZXRyeS5ib25lcy5sZW5ndGg7YSsrKWM9dGhpcy5nZW9tZXRyeS5ib25lc1thXSxkPWMucG9zLGU9Yy5yb3RxLGY9Yy5zY2wsYj10aGlzLmFkZEJvbmUoKSxiLm5hbWU9Yy5uYW1lLGIucG9zaXRpb24uc2V0KGRbMF0sZFsxXSxkWzJdKSxiLnF1YXRlcm5pb24uc2V0KGVbMF0sZVsxXSxlWzJdLGVbM10pLHZvaWQgMCE9PWY/Yi5zY2FsZS5zZXQoZlswXSxmWzFdLGZbMl0pOmIuc2NhbGUuc2V0KDEsMSwxKTtmb3IoYT0wO2E8dGhpcy5ib25lcy5sZW5ndGg7YSsrKWM9XG50aGlzLmdlb21ldHJ5LmJvbmVzW2FdLGI9dGhpcy5ib25lc1thXSwtMT09PWMucGFyZW50P3RoaXMuYWRkKGIpOnRoaXMuYm9uZXNbYy5wYXJlbnRdLmFkZChiKTthPXRoaXMuYm9uZXMubGVuZ3RoO3RoaXMudXNlVmVydGV4VGV4dHVyZT8odGhpcy5ib25lVGV4dHVyZUhlaWdodD10aGlzLmJvbmVUZXh0dXJlV2lkdGg9YT0yNTY8YT82NDo2NDxhPzMyOjE2PGE/MTY6OCx0aGlzLmJvbmVNYXRyaWNlcz1uZXcgRmxvYXQzMkFycmF5KDQqdGhpcy5ib25lVGV4dHVyZVdpZHRoKnRoaXMuYm9uZVRleHR1cmVIZWlnaHQpLHRoaXMuYm9uZVRleHR1cmU9bmV3IFRIUkVFLkRhdGFUZXh0dXJlKHRoaXMuYm9uZU1hdHJpY2VzLHRoaXMuYm9uZVRleHR1cmVXaWR0aCx0aGlzLmJvbmVUZXh0dXJlSGVpZ2h0LFRIUkVFLlJHQkFGb3JtYXQsVEhSRUUuRmxvYXRUeXBlKSx0aGlzLmJvbmVUZXh0dXJlLm1pbkZpbHRlcj1USFJFRS5OZWFyZXN0RmlsdGVyLHRoaXMuYm9uZVRleHR1cmUubWFnRmlsdGVyPVxuVEhSRUUuTmVhcmVzdEZpbHRlcix0aGlzLmJvbmVUZXh0dXJlLmdlbmVyYXRlTWlwbWFwcz0hMSx0aGlzLmJvbmVUZXh0dXJlLmZsaXBZPSExKTp0aGlzLmJvbmVNYXRyaWNlcz1uZXcgRmxvYXQzMkFycmF5KDE2KmEpO3RoaXMucG9zZSgpfX07VEhSRUUuU2tpbm5lZE1lc2gucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTWVzaC5wcm90b3R5cGUpO1RIUkVFLlNraW5uZWRNZXNoLnByb3RvdHlwZS5hZGRCb25lPWZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEmJihhPW5ldyBUSFJFRS5Cb25lKHRoaXMpKTt0aGlzLmJvbmVzLnB1c2goYSk7cmV0dXJuIGF9O1xuVEhSRUUuU2tpbm5lZE1lc2gucHJvdG90eXBlLnVwZGF0ZU1hdHJpeFdvcmxkPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLk1hdHJpeDQ7cmV0dXJuIGZ1bmN0aW9uKGIpe3RoaXMubWF0cml4QXV0b1VwZGF0ZSYmdGhpcy51cGRhdGVNYXRyaXgoKTtpZih0aGlzLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGV8fGIpdGhpcy5wYXJlbnQ/dGhpcy5tYXRyaXhXb3JsZC5tdWx0aXBseU1hdHJpY2VzKHRoaXMucGFyZW50Lm1hdHJpeFdvcmxkLHRoaXMubWF0cml4KTp0aGlzLm1hdHJpeFdvcmxkLmNvcHkodGhpcy5tYXRyaXgpLHRoaXMubWF0cml4V29ybGROZWVkc1VwZGF0ZT0hMTtmb3IodmFyIGI9MCxjPXRoaXMuY2hpbGRyZW4ubGVuZ3RoO2I8YztiKyspe3ZhciBkPXRoaXMuY2hpbGRyZW5bYl07ZCBpbnN0YW5jZW9mIFRIUkVFLkJvbmU/ZC51cGRhdGUodGhpcy5pZGVudGl0eU1hdHJpeCwhMSk6ZC51cGRhdGVNYXRyaXhXb3JsZCghMCl9aWYodm9pZCAwPT10aGlzLmJvbmVJbnZlcnNlcyl7dGhpcy5ib25lSW52ZXJzZXM9XG5bXTtiPTA7Zm9yKGM9dGhpcy5ib25lcy5sZW5ndGg7YjxjO2IrKylkPW5ldyBUSFJFRS5NYXRyaXg0LGQuZ2V0SW52ZXJzZSh0aGlzLmJvbmVzW2JdLnNraW5NYXRyaXgpLHRoaXMuYm9uZUludmVyc2VzLnB1c2goZCl9Yj0wO2ZvcihjPXRoaXMuYm9uZXMubGVuZ3RoO2I8YztiKyspYS5tdWx0aXBseU1hdHJpY2VzKHRoaXMuYm9uZXNbYl0uc2tpbk1hdHJpeCx0aGlzLmJvbmVJbnZlcnNlc1tiXSksYS5mbGF0dGVuVG9BcnJheU9mZnNldCh0aGlzLmJvbmVNYXRyaWNlcywxNipiKTt0aGlzLnVzZVZlcnRleFRleHR1cmUmJih0aGlzLmJvbmVUZXh0dXJlLm5lZWRzVXBkYXRlPSEwKX19KCk7VEhSRUUuU2tpbm5lZE1lc2gucHJvdG90eXBlLnBvc2U9ZnVuY3Rpb24oKXt0aGlzLnVwZGF0ZU1hdHJpeFdvcmxkKCEwKTt0aGlzLm5vcm1hbGl6ZVNraW5XZWlnaHRzKCl9O1xuVEhSRUUuU2tpbm5lZE1lc2gucHJvdG90eXBlLm5vcm1hbGl6ZVNraW5XZWlnaHRzPWZ1bmN0aW9uKCl7aWYodGhpcy5nZW9tZXRyeSBpbnN0YW5jZW9mIFRIUkVFLkdlb21ldHJ5KWZvcih2YXIgYT0wO2E8dGhpcy5nZW9tZXRyeS5za2luSW5kaWNlcy5sZW5ndGg7YSsrKXt2YXIgYj10aGlzLmdlb21ldHJ5LnNraW5XZWlnaHRzW2FdLGM9MS9iLmxlbmd0aE1hbmhhdHRhbigpO0luZmluaXR5IT09Yz9iLm11bHRpcGx5U2NhbGFyKGMpOmIuc2V0KDEpfX07VEhSRUUuU2tpbm5lZE1lc2gucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEmJihhPW5ldyBUSFJFRS5Ta2lubmVkTWVzaCh0aGlzLmdlb21ldHJ5LHRoaXMubWF0ZXJpYWwsdGhpcy51c2VWZXJ0ZXhUZXh0dXJlKSk7VEhSRUUuTWVzaC5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzLGEpO3JldHVybiBhfTtUSFJFRS5Nb3JwaEFuaW1NZXNoPWZ1bmN0aW9uKGEsYil7VEhSRUUuTWVzaC5jYWxsKHRoaXMsYSxiKTt0aGlzLmR1cmF0aW9uPTFFMzt0aGlzLm1pcnJvcmVkTG9vcD0hMTt0aGlzLmN1cnJlbnRLZXlmcmFtZT10aGlzLmxhc3RLZXlmcmFtZT10aGlzLnRpbWU9MDt0aGlzLmRpcmVjdGlvbj0xO3RoaXMuZGlyZWN0aW9uQmFja3dhcmRzPSExO3RoaXMuc2V0RnJhbWVSYW5nZSgwLHRoaXMuZ2VvbWV0cnkubW9ycGhUYXJnZXRzLmxlbmd0aC0xKX07VEhSRUUuTW9ycGhBbmltTWVzaC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5NZXNoLnByb3RvdHlwZSk7VEhSRUUuTW9ycGhBbmltTWVzaC5wcm90b3R5cGUuc2V0RnJhbWVSYW5nZT1mdW5jdGlvbihhLGIpe3RoaXMuc3RhcnRLZXlmcmFtZT1hO3RoaXMuZW5kS2V5ZnJhbWU9Yjt0aGlzLmxlbmd0aD10aGlzLmVuZEtleWZyYW1lLXRoaXMuc3RhcnRLZXlmcmFtZSsxfTtcblRIUkVFLk1vcnBoQW5pbU1lc2gucHJvdG90eXBlLnNldERpcmVjdGlvbkZvcndhcmQ9ZnVuY3Rpb24oKXt0aGlzLmRpcmVjdGlvbj0xO3RoaXMuZGlyZWN0aW9uQmFja3dhcmRzPSExfTtUSFJFRS5Nb3JwaEFuaW1NZXNoLnByb3RvdHlwZS5zZXREaXJlY3Rpb25CYWNrd2FyZD1mdW5jdGlvbigpe3RoaXMuZGlyZWN0aW9uPS0xO3RoaXMuZGlyZWN0aW9uQmFja3dhcmRzPSEwfTtcblRIUkVFLk1vcnBoQW5pbU1lc2gucHJvdG90eXBlLnBhcnNlQW5pbWF0aW9ucz1mdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2VvbWV0cnk7YS5hbmltYXRpb25zfHwoYS5hbmltYXRpb25zPXt9KTtmb3IodmFyIGIsYz1hLmFuaW1hdGlvbnMsZD0vKFthLXpdKykoXFxkKykvLGU9MCxmPWEubW9ycGhUYXJnZXRzLmxlbmd0aDtlPGY7ZSsrKXt2YXIgaD1hLm1vcnBoVGFyZ2V0c1tlXS5uYW1lLm1hdGNoKGQpO2lmKGgmJjE8aC5sZW5ndGgpe2g9aFsxXTtjW2hdfHwoY1toXT17c3RhcnQ6SW5maW5pdHksZW5kOi1JbmZpbml0eX0pO3ZhciBnPWNbaF07ZTxnLnN0YXJ0JiYoZy5zdGFydD1lKTtlPmcuZW5kJiYoZy5lbmQ9ZSk7Ynx8KGI9aCl9fWEuZmlyc3RBbmltYXRpb249Yn07XG5USFJFRS5Nb3JwaEFuaW1NZXNoLnByb3RvdHlwZS5zZXRBbmltYXRpb25MYWJlbD1mdW5jdGlvbihhLGIsYyl7dGhpcy5nZW9tZXRyeS5hbmltYXRpb25zfHwodGhpcy5nZW9tZXRyeS5hbmltYXRpb25zPXt9KTt0aGlzLmdlb21ldHJ5LmFuaW1hdGlvbnNbYV09e3N0YXJ0OmIsZW5kOmN9fTtUSFJFRS5Nb3JwaEFuaW1NZXNoLnByb3RvdHlwZS5wbGF5QW5pbWF0aW9uPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZW9tZXRyeS5hbmltYXRpb25zW2FdO2M/KHRoaXMuc2V0RnJhbWVSYW5nZShjLnN0YXJ0LGMuZW5kKSx0aGlzLmR1cmF0aW9uPTFFMyooKGMuZW5kLWMuc3RhcnQpL2IpLHRoaXMudGltZT0wKTpjb25zb2xlLndhcm4oXCJhbmltYXRpb25bXCIrYStcIl0gdW5kZWZpbmVkXCIpfTtcblRIUkVFLk1vcnBoQW5pbU1lc2gucHJvdG90eXBlLnVwZGF0ZUFuaW1hdGlvbj1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmR1cmF0aW9uL3RoaXMubGVuZ3RoO3RoaXMudGltZSs9dGhpcy5kaXJlY3Rpb24qYTtpZih0aGlzLm1pcnJvcmVkTG9vcCl7aWYodGhpcy50aW1lPnRoaXMuZHVyYXRpb258fDA+dGhpcy50aW1lKXRoaXMuZGlyZWN0aW9uKj0tMSx0aGlzLnRpbWU+dGhpcy5kdXJhdGlvbiYmKHRoaXMudGltZT10aGlzLmR1cmF0aW9uLHRoaXMuZGlyZWN0aW9uQmFja3dhcmRzPSEwKSwwPnRoaXMudGltZSYmKHRoaXMudGltZT0wLHRoaXMuZGlyZWN0aW9uQmFja3dhcmRzPSExKX1lbHNlIHRoaXMudGltZSU9dGhpcy5kdXJhdGlvbiwwPnRoaXMudGltZSYmKHRoaXMudGltZSs9dGhpcy5kdXJhdGlvbik7YT10aGlzLnN0YXJ0S2V5ZnJhbWUrVEhSRUUuTWF0aC5jbGFtcChNYXRoLmZsb29yKHRoaXMudGltZS9iKSwwLHRoaXMubGVuZ3RoLTEpO2EhPT10aGlzLmN1cnJlbnRLZXlmcmFtZSYmXG4odGhpcy5tb3JwaFRhcmdldEluZmx1ZW5jZXNbdGhpcy5sYXN0S2V5ZnJhbWVdPTAsdGhpcy5tb3JwaFRhcmdldEluZmx1ZW5jZXNbdGhpcy5jdXJyZW50S2V5ZnJhbWVdPTEsdGhpcy5tb3JwaFRhcmdldEluZmx1ZW5jZXNbYV09MCx0aGlzLmxhc3RLZXlmcmFtZT10aGlzLmN1cnJlbnRLZXlmcmFtZSx0aGlzLmN1cnJlbnRLZXlmcmFtZT1hKTtiPXRoaXMudGltZSViL2I7dGhpcy5kaXJlY3Rpb25CYWNrd2FyZHMmJihiPTEtYik7dGhpcy5tb3JwaFRhcmdldEluZmx1ZW5jZXNbdGhpcy5jdXJyZW50S2V5ZnJhbWVdPWI7dGhpcy5tb3JwaFRhcmdldEluZmx1ZW5jZXNbdGhpcy5sYXN0S2V5ZnJhbWVdPTEtYn07XG5USFJFRS5Nb3JwaEFuaW1NZXNoLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbihhKXt2b2lkIDA9PT1hJiYoYT1uZXcgVEhSRUUuTW9ycGhBbmltTWVzaCh0aGlzLmdlb21ldHJ5LHRoaXMubWF0ZXJpYWwpKTthLmR1cmF0aW9uPXRoaXMuZHVyYXRpb247YS5taXJyb3JlZExvb3A9dGhpcy5taXJyb3JlZExvb3A7YS50aW1lPXRoaXMudGltZTthLmxhc3RLZXlmcmFtZT10aGlzLmxhc3RLZXlmcmFtZTthLmN1cnJlbnRLZXlmcmFtZT10aGlzLmN1cnJlbnRLZXlmcmFtZTthLmRpcmVjdGlvbj10aGlzLmRpcmVjdGlvbjthLmRpcmVjdGlvbkJhY2t3YXJkcz10aGlzLmRpcmVjdGlvbkJhY2t3YXJkcztUSFJFRS5NZXNoLnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMsYSk7cmV0dXJuIGF9O1RIUkVFLkxPRD1mdW5jdGlvbigpe1RIUkVFLk9iamVjdDNELmNhbGwodGhpcyk7dGhpcy5vYmplY3RzPVtdfTtUSFJFRS5MT0QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlKTtUSFJFRS5MT0QucHJvdG90eXBlLmFkZExldmVsPWZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9MCk7Zm9yKHZhciBiPU1hdGguYWJzKGIpLGM9MDtjPHRoaXMub2JqZWN0cy5sZW5ndGgmJiEoYjx0aGlzLm9iamVjdHNbY10uZGlzdGFuY2UpO2MrKyk7dGhpcy5vYmplY3RzLnNwbGljZShjLDAse2Rpc3RhbmNlOmIsb2JqZWN0OmF9KTt0aGlzLmFkZChhKX07VEhSRUUuTE9ELnByb3RvdHlwZS5nZXRPYmplY3RGb3JEaXN0YW5jZT1mdW5jdGlvbihhKXtmb3IodmFyIGI9MSxjPXRoaXMub2JqZWN0cy5sZW5ndGg7YjxjJiYhKGE8dGhpcy5vYmplY3RzW2JdLmRpc3RhbmNlKTtiKyspO3JldHVybiB0aGlzLm9iamVjdHNbYi0xXS5vYmplY3R9O1xuVEhSRUUuTE9ELnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMyxiPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihjKXtpZigxPHRoaXMub2JqZWN0cy5sZW5ndGgpe2Euc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGMubWF0cml4V29ybGQpO2Iuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHRoaXMubWF0cml4V29ybGQpO2M9YS5kaXN0YW5jZVRvKGIpO3RoaXMub2JqZWN0c1swXS5vYmplY3QudmlzaWJsZT0hMDtmb3IodmFyIGQ9MSxlPXRoaXMub2JqZWN0cy5sZW5ndGg7ZDxlO2QrKylpZihjPj10aGlzLm9iamVjdHNbZF0uZGlzdGFuY2UpdGhpcy5vYmplY3RzW2QtMV0ub2JqZWN0LnZpc2libGU9ITEsdGhpcy5vYmplY3RzW2RdLm9iamVjdC52aXNpYmxlPSEwO2Vsc2UgYnJlYWs7Zm9yKDtkPGU7ZCsrKXRoaXMub2JqZWN0c1tkXS5vYmplY3QudmlzaWJsZT0hMX19fSgpO1RIUkVFLkxPRC5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXt9O1RIUkVFLlNwcml0ZT1mdW5jdGlvbihhKXtUSFJFRS5PYmplY3QzRC5jYWxsKHRoaXMpO3RoaXMubWF0ZXJpYWw9dm9pZCAwIT09YT9hOm5ldyBUSFJFRS5TcHJpdGVNYXRlcmlhbH07VEhSRUUuU3ByaXRlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSk7VEhSRUUuU3ByaXRlLnByb3RvdHlwZS51cGRhdGVNYXRyaXg9ZnVuY3Rpb24oKXt0aGlzLm1hdHJpeC5jb21wb3NlKHRoaXMucG9zaXRpb24sdGhpcy5xdWF0ZXJuaW9uLHRoaXMuc2NhbGUpO3RoaXMubWF0cml4V29ybGROZWVkc1VwZGF0ZT0hMH07VEhSRUUuU3ByaXRlLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbihhKXt2b2lkIDA9PT1hJiYoYT1uZXcgVEhSRUUuU3ByaXRlKHRoaXMubWF0ZXJpYWwpKTtUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzLGEpO3JldHVybiBhfTtUSFJFRS5QYXJ0aWNsZT1USFJFRS5TcHJpdGU7VEhSRUUuU2NlbmU9ZnVuY3Rpb24oKXtUSFJFRS5PYmplY3QzRC5jYWxsKHRoaXMpO3RoaXMub3ZlcnJpZGVNYXRlcmlhbD10aGlzLmZvZz1udWxsO3RoaXMuYXV0b1VwZGF0ZT0hMDt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ITE7dGhpcy5fX2xpZ2h0cz1bXTt0aGlzLl9fb2JqZWN0c0FkZGVkPVtdO3RoaXMuX19vYmplY3RzUmVtb3ZlZD1bXX07VEhSRUUuU2NlbmUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlKTtcblRIUkVFLlNjZW5lLnByb3RvdHlwZS5fX2FkZE9iamVjdD1mdW5jdGlvbihhKXtpZihhIGluc3RhbmNlb2YgVEhSRUUuTGlnaHQpLTE9PT10aGlzLl9fbGlnaHRzLmluZGV4T2YoYSkmJnRoaXMuX19saWdodHMucHVzaChhKSxhLnRhcmdldCYmdm9pZCAwPT09YS50YXJnZXQucGFyZW50JiZ0aGlzLmFkZChhLnRhcmdldCk7ZWxzZSBpZighKGEgaW5zdGFuY2VvZiBUSFJFRS5DYW1lcmF8fGEgaW5zdGFuY2VvZiBUSFJFRS5Cb25lKSl7dGhpcy5fX29iamVjdHNBZGRlZC5wdXNoKGEpO3ZhciBiPXRoaXMuX19vYmplY3RzUmVtb3ZlZC5pbmRleE9mKGEpOy0xIT09YiYmdGhpcy5fX29iamVjdHNSZW1vdmVkLnNwbGljZShiLDEpfWZvcihiPTA7YjxhLmNoaWxkcmVuLmxlbmd0aDtiKyspdGhpcy5fX2FkZE9iamVjdChhLmNoaWxkcmVuW2JdKX07XG5USFJFRS5TY2VuZS5wcm90b3R5cGUuX19yZW1vdmVPYmplY3Q9ZnVuY3Rpb24oYSl7aWYoYSBpbnN0YW5jZW9mIFRIUkVFLkxpZ2h0KXt2YXIgYj10aGlzLl9fbGlnaHRzLmluZGV4T2YoYSk7LTEhPT1iJiZ0aGlzLl9fbGlnaHRzLnNwbGljZShiLDEpO2lmKGEuc2hhZG93Q2FzY2FkZUFycmF5KWZvcihiPTA7YjxhLnNoYWRvd0Nhc2NhZGVBcnJheS5sZW5ndGg7YisrKXRoaXMuX19yZW1vdmVPYmplY3QoYS5zaGFkb3dDYXNjYWRlQXJyYXlbYl0pfWVsc2UgYSBpbnN0YW5jZW9mIFRIUkVFLkNhbWVyYXx8KHRoaXMuX19vYmplY3RzUmVtb3ZlZC5wdXNoKGEpLGI9dGhpcy5fX29iamVjdHNBZGRlZC5pbmRleE9mKGEpLC0xIT09YiYmdGhpcy5fX29iamVjdHNBZGRlZC5zcGxpY2UoYiwxKSk7Zm9yKGI9MDtiPGEuY2hpbGRyZW4ubGVuZ3RoO2IrKyl0aGlzLl9fcmVtb3ZlT2JqZWN0KGEuY2hpbGRyZW5bYl0pfTtcblRIUkVFLlNjZW5lLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbihhKXt2b2lkIDA9PT1hJiYoYT1uZXcgVEhSRUUuU2NlbmUpO1RIUkVFLk9iamVjdDNELnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMsYSk7bnVsbCE9PXRoaXMuZm9nJiYoYS5mb2c9dGhpcy5mb2cuY2xvbmUoKSk7bnVsbCE9PXRoaXMub3ZlcnJpZGVNYXRlcmlhbCYmKGEub3ZlcnJpZGVNYXRlcmlhbD10aGlzLm92ZXJyaWRlTWF0ZXJpYWwuY2xvbmUoKSk7YS5hdXRvVXBkYXRlPXRoaXMuYXV0b1VwZGF0ZTthLm1hdHJpeEF1dG9VcGRhdGU9dGhpcy5tYXRyaXhBdXRvVXBkYXRlO3JldHVybiBhfTtUSFJFRS5Gb2c9ZnVuY3Rpb24oYSxiLGMpe3RoaXMubmFtZT1cIlwiO3RoaXMuY29sb3I9bmV3IFRIUkVFLkNvbG9yKGEpO3RoaXMubmVhcj12b2lkIDAhPT1iP2I6MTt0aGlzLmZhcj12b2lkIDAhPT1jP2M6MUUzfTtUSFJFRS5Gb2cucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBUSFJFRS5Gb2codGhpcy5jb2xvci5nZXRIZXgoKSx0aGlzLm5lYXIsdGhpcy5mYXIpfTtUSFJFRS5Gb2dFeHAyPWZ1bmN0aW9uKGEsYil7dGhpcy5uYW1lPVwiXCI7dGhpcy5jb2xvcj1uZXcgVEhSRUUuQ29sb3IoYSk7dGhpcy5kZW5zaXR5PXZvaWQgMCE9PWI/YjoyLjVFLTR9O1RIUkVFLkZvZ0V4cDIucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBUSFJFRS5Gb2dFeHAyKHRoaXMuY29sb3IuZ2V0SGV4KCksdGhpcy5kZW5zaXR5KX07VEhSRUUuQ2FudmFzUmVuZGVyZXI9ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIsYyl7Zm9yKHZhciBkPTAsZT16Lmxlbmd0aDtkPGU7ZCsrKXt2YXIgZj16W2RdO0thLmNvcHkoZi5jb2xvcik7aWYoZiBpbnN0YW5jZW9mIFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQpe3ZhciBoPXRhLnNldEZyb21NYXRyaXhQb3NpdGlvbihmLm1hdHJpeFdvcmxkKS5ub3JtYWxpemUoKSxnPWIuZG90KGgpOzA+PWd8fChnKj1mLmludGVuc2l0eSxjLmFkZChLYS5tdWx0aXBseVNjYWxhcihnKSkpfWVsc2UgZiBpbnN0YW5jZW9mIFRIUkVFLlBvaW50TGlnaHQmJihoPXRhLnNldEZyb21NYXRyaXhQb3NpdGlvbihmLm1hdHJpeFdvcmxkKSxnPWIuZG90KHRhLnN1YlZlY3RvcnMoaCxhKS5ub3JtYWxpemUoKSksMD49Z3x8KGcqPTA9PWYuZGlzdGFuY2U/MToxLU1hdGgubWluKGEuZGlzdGFuY2VUbyhoKS9mLmRpc3RhbmNlLDEpLDAhPWcmJihnKj1mLmludGVuc2l0eSxjLmFkZChLYS5tdWx0aXBseVNjYWxhcihnKSkpKSl9fVxuZnVuY3Rpb24gYyhhLGIsYyxkKXttKGIpO2woYyk7cChkKTt0KGEuZ2V0U3R5bGUoKSk7RC5zdHJva2UoKTtFYS5leHBhbmRCeVNjYWxhcigyKmIpfWZ1bmN0aW9uIGQoYSl7cyhhLmdldFN0eWxlKCkpO0QuZmlsbCgpfWZ1bmN0aW9uIGUoYSxiLGMsZSxmLGgsZyxqLGksayxtLGwsbil7aWYoIShuIGluc3RhbmNlb2YgVEhSRUUuRGF0YVRleHR1cmV8fHZvaWQgMD09PW4uaW1hZ2V8fDA9PT1uLmltYWdlLndpZHRoKSl7aWYoITA9PT1uLm5lZWRzVXBkYXRlKXt2YXIgcD1uLndyYXBTPT09VEhSRUUuUmVwZWF0V3JhcHBpbmcscT1uLndyYXBUPT09VEhSRUUuUmVwZWF0V3JhcHBpbmc7R2Fbbi5pZF09RC5jcmVhdGVQYXR0ZXJuKG4uaW1hZ2UsITA9PT1wJiYhMD09PXE/XCJyZXBlYXRcIjohMD09PXAmJiExPT09cT9cInJlcGVhdC14XCI6ITE9PT1wJiYhMD09PXE/XCJyZXBlYXQteVwiOlwibm8tcmVwZWF0XCIpO24ubmVlZHNVcGRhdGU9ITF9dm9pZCAwPT09R2Fbbi5pZF0/cyhcInJnYmEoMCwwLDAsMSlcIik6XG5zKEdhW24uaWRdKTt2YXIgcD1uLm9mZnNldC54L24ucmVwZWF0LngscT1uLm9mZnNldC55L24ucmVwZWF0LnksdD1uLmltYWdlLndpZHRoKm4ucmVwZWF0Lngscj1uLmltYWdlLmhlaWdodCpuLnJlcGVhdC55LGc9KGcrcCkqdCxqPSgxLWorcSkqcixjPWMtYSxlPWUtYixmPWYtYSxoPWgtYixpPShpK3ApKnQtZyxrPSgxLWsrcSkqci1qLG09KG0rcCkqdC1nLGw9KDEtbCtxKSpyLWoscD1pKmwtbSprOzA9PT1wPyh2b2lkIDA9PT1rYVtuLmlkXSYmKGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSxiLndpZHRoPW4uaW1hZ2Uud2lkdGgsYi5oZWlnaHQ9bi5pbWFnZS5oZWlnaHQsYj1iLmdldENvbnRleHQoXCIyZFwiKSxiLmRyYXdJbWFnZShuLmltYWdlLDAsMCksa2Fbbi5pZF09Yi5nZXRJbWFnZURhdGEoMCwwLG4uaW1hZ2Uud2lkdGgsbi5pbWFnZS5oZWlnaHQpLmRhdGEpLGI9a2Fbbi5pZF0sZz00KihNYXRoLmZsb29yKGcpK01hdGguZmxvb3Ioaikqbi5pbWFnZS53aWR0aCksXG5WLnNldFJHQihiW2ddLzI1NSxiW2crMV0vMjU1LGJbZysyXS8yNTUpLGQoVikpOihwPTEvcCxuPShsKmMtaypmKSpwLGs9KGwqZS1rKmgpKnAsYz0oaSpmLW0qYykqcCxlPShpKmgtbSplKSpwLGE9YS1uKmctYypqLGc9Yi1rKmctZSpqLEQuc2F2ZSgpLEQudHJhbnNmb3JtKG4sayxjLGUsYSxnKSxELmZpbGwoKSxELnJlc3RvcmUoKSl9fWZ1bmN0aW9uIGYoYSxiLGMsZCxlLGYsaCxnLGosaSxrLG0sbil7dmFyIGwscDtsPW4ud2lkdGgtMTtwPW4uaGVpZ2h0LTE7aCo9bDtnKj1wO2MtPWE7ZC09YjtlLT1hO2YtPWI7aj1qKmwtaDtpPWkqcC1nO2s9aypsLWg7bT1tKnAtZztwPTEvKGoqbS1rKmkpO2w9KG0qYy1pKmUpKnA7aT0obSpkLWkqZikqcDtjPShqKmUtaypjKSpwO2Q9KGoqZi1rKmQpKnA7YT1hLWwqaC1jKmc7Yj1iLWkqaC1kKmc7RC5zYXZlKCk7RC50cmFuc2Zvcm0obCxpLGMsZCxhLGIpO0QuY2xpcCgpO0QuZHJhd0ltYWdlKG4sMCwwKTtELnJlc3RvcmUoKX1mdW5jdGlvbiBoKGEsXG5iLGMsZCl7dWFbMF09MjU1KmEucnwwO3VhWzFdPTI1NSphLmd8MDt1YVsyXT0yNTUqYS5ifDA7dWFbNF09MjU1KmIucnwwO3VhWzVdPTI1NSpiLmd8MDt1YVs2XT0yNTUqYi5ifDA7dWFbOF09MjU1KmMucnwwO3VhWzldPTI1NSpjLmd8MDt1YVsxMF09MjU1KmMuYnwwO3VhWzEyXT0yNTUqZC5yfDA7dWFbMTNdPTI1NSpkLmd8MDt1YVsxNF09MjU1KmQuYnwwO2oucHV0SW1hZ2VEYXRhKE9hLDAsMCk7RmEuZHJhd0ltYWdlKFBhLDAsMCk7cmV0dXJuIExhfWZ1bmN0aW9uIGcoYSxiLGMpe3ZhciBkPWIueC1hLngsZT1iLnktYS55LGY9ZCpkK2UqZTswIT09ZiYmKGMvPU1hdGguc3FydChmKSxkKj1jLGUqPWMsYi54Kz1kLGIueSs9ZSxhLngtPWQsYS55LT1lKX1mdW5jdGlvbiBpKGEpe3ghPT1hJiYoeD1ELmdsb2JhbEFscGhhPWEpfWZ1bmN0aW9uIGsoYSl7SSE9PWEmJihhPT09VEhSRUUuTm9ybWFsQmxlbmRpbmc/RC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb249XCJzb3VyY2Utb3ZlclwiOlxuYT09PVRIUkVFLkFkZGl0aXZlQmxlbmRpbmc/RC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb249XCJsaWdodGVyXCI6YT09PVRIUkVFLlN1YnRyYWN0aXZlQmxlbmRpbmcmJihELmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbj1cImRhcmtlclwiKSxJPWEpfWZ1bmN0aW9uIG0oYSl7SiE9PWEmJihKPUQubGluZVdpZHRoPWEpfWZ1bmN0aW9uIGwoYSl7Y2EhPT1hJiYoY2E9RC5saW5lQ2FwPWEpfWZ1bmN0aW9uIHAoYSl7bmEhPT1hJiYobmE9RC5saW5lSm9pbj1hKX1mdW5jdGlvbiB0KGEpe0IhPT1hJiYoQj1ELnN0cm9rZVN0eWxlPWEpfWZ1bmN0aW9uIHMoYSl7TSE9PWEmJihNPUQuZmlsbFN0eWxlPWEpfWZ1bmN0aW9uIHEoYSxiKXtpZihwYSE9PWF8fEMhPT1iKUQuc2V0TGluZURhc2goW2EsYl0pLHBhPWEsQz1ifWNvbnNvbGUubG9nKFwiVEhSRUUuQ2FudmFzUmVuZGVyZXJcIixUSFJFRS5SRVZJU0lPTik7dmFyIG49VEhSRUUuTWF0aC5zbW9vdGhzdGVwLGE9YXx8e30sdT10aGlzLHIsdix6LEc9XG5uZXcgVEhSRUUuUHJvamVjdG9yLHc9dm9pZCAwIT09YS5jYW52YXM/YS5jYW52YXM6ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSx5PXcud2lkdGgsRT13LmhlaWdodCxBPU1hdGguZmxvb3IoeS8yKSxLPU1hdGguZmxvb3IoRS8yKSxEPXcuZ2V0Q29udGV4dChcIjJkXCIpLEY9bmV3IFRIUkVFLkNvbG9yKDApLE89MCx4PTEsST0wLEI9bnVsbCxNPW51bGwsSj1udWxsLGNhPW51bGwsbmE9bnVsbCxwYT1udWxsLEM9MCxRLFIsTCxkYTtuZXcgVEhSRUUuUmVuZGVyYWJsZVZlcnRleDtuZXcgVEhSRUUuUmVuZGVyYWJsZVZlcnRleDt2YXIgemEsQmEsYmEsQWEsJCxlYSxWPW5ldyBUSFJFRS5Db2xvcixQPW5ldyBUSFJFRS5Db2xvcixZPW5ldyBUSFJFRS5Db2xvcixVPW5ldyBUSFJFRS5Db2xvcixqYT1uZXcgVEhSRUUuQ29sb3Isc2E9bmV3IFRIUkVFLkNvbG9yLGhhPW5ldyBUSFJFRS5Db2xvcixLYT1uZXcgVEhSRUUuQ29sb3IsR2E9e30sa2E9e30sRGEsVWEsUWEsd2EsYmIsXG5jYixNYSxmYixzYixwYix2YT1uZXcgVEhSRUUuQm94MixsYT1uZXcgVEhSRUUuQm94MixFYT1uZXcgVEhSRUUuQm94MixnYj1uZXcgVEhSRUUuQ29sb3IscmE9bmV3IFRIUkVFLkNvbG9yLGZhPW5ldyBUSFJFRS5Db2xvcix0YT1uZXcgVEhSRUUuVmVjdG9yMyxQYSxqLE9hLHVhLExhLEZhLFJhPTE2O1BhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7UGEud2lkdGg9UGEuaGVpZ2h0PTI7aj1QYS5nZXRDb250ZXh0KFwiMmRcIik7ai5maWxsU3R5bGU9XCJyZ2JhKDAsMCwwLDEpXCI7ai5maWxsUmVjdCgwLDAsMiwyKTtPYT1qLmdldEltYWdlRGF0YSgwLDAsMiwyKTt1YT1PYS5kYXRhO0xhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7TGEud2lkdGg9TGEuaGVpZ2h0PVJhO0ZhPUxhLmdldENvbnRleHQoXCIyZFwiKTtGYS50cmFuc2xhdGUoLVJhLzIsLVJhLzIpO0ZhLnNjYWxlKFJhLFJhKTtSYS0tO3ZvaWQgMD09PUQuc2V0TGluZURhc2gmJihELnNldExpbmVEYXNoPVxudm9pZCAwIT09RC5tb3pEYXNoP2Z1bmN0aW9uKGEpe0QubW96RGFzaD1udWxsIT09YVswXT9hOm51bGx9OmZ1bmN0aW9uKCl7fSk7dGhpcy5kb21FbGVtZW50PXc7dGhpcy5kZXZpY2VQaXhlbFJhdGlvPXZvaWQgMCE9PWEuZGV2aWNlUGl4ZWxSYXRpbz9hLmRldmljZVBpeGVsUmF0aW86dm9pZCAwIT09c2VsZi5kZXZpY2VQaXhlbFJhdGlvP3NlbGYuZGV2aWNlUGl4ZWxSYXRpbzoxO3RoaXMuc29ydEVsZW1lbnRzPXRoaXMuc29ydE9iamVjdHM9dGhpcy5hdXRvQ2xlYXI9ITA7dGhpcy5pbmZvPXtyZW5kZXI6e3ZlcnRpY2VzOjAsZmFjZXM6MH19O3RoaXMuc3VwcG9ydHNWZXJ0ZXhUZXh0dXJlcz1mdW5jdGlvbigpe307dGhpcy5zZXRGYWNlQ3VsbGluZz1mdW5jdGlvbigpe307dGhpcy5zZXRTaXplPWZ1bmN0aW9uKGEsYixjKXt5PWEqdGhpcy5kZXZpY2VQaXhlbFJhdGlvO0U9Yip0aGlzLmRldmljZVBpeGVsUmF0aW87QT1NYXRoLmZsb29yKHkvMik7Sz1NYXRoLmZsb29yKEUvMik7XG53LndpZHRoPXk7dy5oZWlnaHQ9RTsxIT09dGhpcy5kZXZpY2VQaXhlbFJhdGlvJiYhMSE9PWMmJih3LnN0eWxlLndpZHRoPWErXCJweFwiLHcuc3R5bGUuaGVpZ2h0PWIrXCJweFwiKTt2YS5zZXQobmV3IFRIUkVFLlZlY3RvcjIoLUEsLUspLG5ldyBUSFJFRS5WZWN0b3IyKEEsSykpO2xhLnNldChuZXcgVEhSRUUuVmVjdG9yMigtQSwtSyksbmV3IFRIUkVFLlZlY3RvcjIoQSxLKSk7eD0xO0k9MDtuYT1jYT1KPU09Qj1udWxsfTt0aGlzLnNldENsZWFyQ29sb3I9ZnVuY3Rpb24oYSxiKXtGLnNldChhKTtPPXZvaWQgMCE9PWI/YjoxO2xhLnNldChuZXcgVEhSRUUuVmVjdG9yMigtQSwtSyksbmV3IFRIUkVFLlZlY3RvcjIoQSxLKSl9O3RoaXMuc2V0Q2xlYXJDb2xvckhleD1mdW5jdGlvbihhLGIpe2NvbnNvbGUud2FybihcIkRFUFJFQ0FURUQ6IC5zZXRDbGVhckNvbG9ySGV4KCkgaXMgYmVpbmcgcmVtb3ZlZC4gVXNlIC5zZXRDbGVhckNvbG9yKCkgaW5zdGVhZC5cIik7dGhpcy5zZXRDbGVhckNvbG9yKGEsXG5iKX07dGhpcy5nZXRNYXhBbmlzb3Ryb3B5PWZ1bmN0aW9uKCl7cmV0dXJuIDB9O3RoaXMuY2xlYXI9ZnVuY3Rpb24oKXtELnNldFRyYW5zZm9ybSgxLDAsMCwtMSxBLEspOyExPT09bGEuZW1wdHkoKSYmKGxhLmludGVyc2VjdCh2YSksbGEuZXhwYW5kQnlTY2FsYXIoMiksMT5PJiZELmNsZWFyUmVjdChsYS5taW4ueHwwLGxhLm1pbi55fDAsbGEubWF4LngtbGEubWluLnh8MCxsYS5tYXgueS1sYS5taW4ueXwwKSwwPE8mJihrKFRIUkVFLk5vcm1hbEJsZW5kaW5nKSxpKDEpLHMoXCJyZ2JhKFwiK01hdGguZmxvb3IoMjU1KkYucikrXCIsXCIrTWF0aC5mbG9vcigyNTUqRi5nKStcIixcIitNYXRoLmZsb29yKDI1NSpGLmIpK1wiLFwiK08rXCIpXCIpLEQuZmlsbFJlY3QobGEubWluLnh8MCxsYS5taW4ueXwwLGxhLm1heC54LWxhLm1pbi54fDAsbGEubWF4LnktbGEubWluLnl8MCkpLGxhLm1ha2VFbXB0eSgpKX07dGhpcy5jbGVhckNvbG9yPWZ1bmN0aW9uKCl7fTt0aGlzLmNsZWFyRGVwdGg9ZnVuY3Rpb24oKXt9O1xudGhpcy5jbGVhclN0ZW5jaWw9ZnVuY3Rpb24oKXt9O3RoaXMucmVuZGVyPWZ1bmN0aW9uKGEsail7aWYoITE9PT1qIGluc3RhbmNlb2YgVEhSRUUuQ2FtZXJhKWNvbnNvbGUuZXJyb3IoXCJUSFJFRS5DYW52YXNSZW5kZXJlci5yZW5kZXI6IGNhbWVyYSBpcyBub3QgYW4gaW5zdGFuY2Ugb2YgVEhSRUUuQ2FtZXJhLlwiKTtlbHNleyEwPT09dGhpcy5hdXRvQ2xlYXImJnRoaXMuY2xlYXIoKTtELnNldFRyYW5zZm9ybSgxLDAsMCwtMSxBLEspO3UuaW5mby5yZW5kZXIudmVydGljZXM9MDt1LmluZm8ucmVuZGVyLmZhY2VzPTA7cj1HLnByb2plY3RTY2VuZShhLGosdGhpcy5zb3J0T2JqZWN0cyx0aGlzLnNvcnRFbGVtZW50cyk7dj1yLmVsZW1lbnRzO3o9ci5saWdodHM7UT1qO2diLnNldFJHQigwLDAsMCk7cmEuc2V0UkdCKDAsMCwwKTtmYS5zZXRSR0IoMCwwLDApO2Zvcih2YXIgeT0wLEY9ei5sZW5ndGg7eTxGO3krKyl7dmFyIEI9elt5XSxFPUIuY29sb3I7QiBpbnN0YW5jZW9mIFRIUkVFLkFtYmllbnRMaWdodD9cbmdiLmFkZChFKTpCIGluc3RhbmNlb2YgVEhSRUUuRGlyZWN0aW9uYWxMaWdodD9yYS5hZGQoRSk6QiBpbnN0YW5jZW9mIFRIUkVFLlBvaW50TGlnaHQmJmZhLmFkZChFKX15PTA7Zm9yKEY9di5sZW5ndGg7eTxGO3krKyl7dmFyIHg9dlt5XSx3PXgubWF0ZXJpYWw7aWYoISh2b2lkIDA9PT13fHwhMT09PXcudmlzaWJsZSkpe0VhLm1ha2VFbXB0eSgpO2lmKHggaW5zdGFuY2VvZiBUSFJFRS5SZW5kZXJhYmxlU3ByaXRlKXtSPXg7Ui54Kj1BO1IueSo9Szt2YXIgQj1SLEU9eCxJPXc7aShJLm9wYWNpdHkpO2soSS5ibGVuZGluZyk7dmFyIHg9RS5zY2FsZS54KkEsdz1FLnNjYWxlLnkqSyxPPTAuNSpNYXRoLnNxcnQoeCp4K3cqdyk7RWEubWluLnNldChCLngtTyxCLnktTyk7RWEubWF4LnNldChCLngrTyxCLnkrTyk7ITE9PT12YS5pc0ludGVyc2VjdGlvbkJveChFYSk/RWEubWFrZUVtcHR5KCk6SSBpbnN0YW5jZW9mIFRIUkVFLlNwcml0ZU1hdGVyaWFsfHxJIGluc3RhbmNlb2YgVEhSRUUuUGFydGljbGVTeXN0ZW1NYXRlcmlhbD9cbihudWxsIT09SS5tYXA/KEU9SS5tYXAuaW1hZ2UsRC5zYXZlKCksRC50cmFuc2xhdGUoQi54LEIueSksRC5yb3RhdGUoSS5yb3RhdGlvbiksRC5zY2FsZSh4LC13KSxELmRyYXdJbWFnZShFLDAsMCxFLndpZHRoLEUuaGVpZ2h0LC0wLjUsLTAuNSwxLDEpKToocyhJLmNvbG9yLmdldFN0eWxlKCkpLEQuc2F2ZSgpLEQudHJhbnNsYXRlKEIueCxCLnkpLEQucm90YXRlKEkucm90YXRpb24pLEQuc2NhbGUoeCwtdyksRC5maWxsUmVjdCgtMC41LC0wLjUsMSwxKSksRC5yZXN0b3JlKCkpOkkgaW5zdGFuY2VvZiBUSFJFRS5TcHJpdGVDYW52YXNNYXRlcmlhbCYmKHQoSS5jb2xvci5nZXRTdHlsZSgpKSxzKEkuY29sb3IuZ2V0U3R5bGUoKSksRC5zYXZlKCksRC50cmFuc2xhdGUoQi54LEIueSksRC5yb3RhdGUoLUUucm90YXRpb24pLEQuc2NhbGUoeCx3KSxJLnByb2dyYW0oRCksRC5yZXN0b3JlKCkpfWVsc2UgaWYoeCBpbnN0YW5jZW9mIFRIUkVFLlJlbmRlcmFibGVMaW5lKXtpZihSPXgudjEsXG5MPXgudjIsUi5wb3NpdGlvblNjcmVlbi54Kj1BLFIucG9zaXRpb25TY3JlZW4ueSo9SyxMLnBvc2l0aW9uU2NyZWVuLngqPUEsTC5wb3NpdGlvblNjcmVlbi55Kj1LLEVhLnNldEZyb21Qb2ludHMoW1IucG9zaXRpb25TY3JlZW4sTC5wb3NpdGlvblNjcmVlbl0pLCEwPT09dmEuaXNJbnRlcnNlY3Rpb25Cb3goRWEpKWlmKEI9UixFPUwsST14LHg9dyxpKHgub3BhY2l0eSksayh4LmJsZW5kaW5nKSxELmJlZ2luUGF0aCgpLEQubW92ZVRvKEIucG9zaXRpb25TY3JlZW4ueCxCLnBvc2l0aW9uU2NyZWVuLnkpLEQubGluZVRvKEUucG9zaXRpb25TY3JlZW4ueCxFLnBvc2l0aW9uU2NyZWVuLnkpLHggaW5zdGFuY2VvZiBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCl7bSh4LmxpbmV3aWR0aCk7bCh4LmxpbmVjYXApO3AoeC5saW5lam9pbik7aWYoeC52ZXJ0ZXhDb2xvcnMhPT1USFJFRS5WZXJ0ZXhDb2xvcnMpdCh4LmNvbG9yLmdldFN0eWxlKCkpO2Vsc2UgaWYodz1JLnZlcnRleENvbG9yc1swXS5nZXRTdHlsZSgpLFxuST1JLnZlcnRleENvbG9yc1sxXS5nZXRTdHlsZSgpLHc9PT1JKXQodyk7ZWxzZXt0cnl7dmFyIEM9RC5jcmVhdGVMaW5lYXJHcmFkaWVudChCLnBvc2l0aW9uU2NyZWVuLngsQi5wb3NpdGlvblNjcmVlbi55LEUucG9zaXRpb25TY3JlZW4ueCxFLnBvc2l0aW9uU2NyZWVuLnkpO0MuYWRkQ29sb3JTdG9wKDAsdyk7Qy5hZGRDb2xvclN0b3AoMSxJKX1jYXRjaChKKXtDPXd9dChDKX1ELnN0cm9rZSgpO0VhLmV4cGFuZEJ5U2NhbGFyKDIqeC5saW5ld2lkdGgpfWVsc2UgeCBpbnN0YW5jZW9mIFRIUkVFLkxpbmVEYXNoZWRNYXRlcmlhbCYmKG0oeC5saW5ld2lkdGgpLGwoeC5saW5lY2FwKSxwKHgubGluZWpvaW4pLHQoeC5jb2xvci5nZXRTdHlsZSgpKSxxKHguZGFzaFNpemUseC5nYXBTaXplKSxELnN0cm9rZSgpLEVhLmV4cGFuZEJ5U2NhbGFyKDIqeC5saW5ld2lkdGgpLHEobnVsbCxudWxsKSl9ZWxzZSBpZih4IGluc3RhbmNlb2YgVEhSRUUuUmVuZGVyYWJsZUZhY2UzKXtSPXgudjE7XG5MPXgudjI7ZGE9eC52MztpZigtMT5SLnBvc2l0aW9uU2NyZWVuLnp8fDE8Ui5wb3NpdGlvblNjcmVlbi56KWNvbnRpbnVlO2lmKC0xPkwucG9zaXRpb25TY3JlZW4uenx8MTxMLnBvc2l0aW9uU2NyZWVuLnopY29udGludWU7aWYoLTE+ZGEucG9zaXRpb25TY3JlZW4uenx8MTxkYS5wb3NpdGlvblNjcmVlbi56KWNvbnRpbnVlO1IucG9zaXRpb25TY3JlZW4ueCo9QTtSLnBvc2l0aW9uU2NyZWVuLnkqPUs7TC5wb3NpdGlvblNjcmVlbi54Kj1BO0wucG9zaXRpb25TY3JlZW4ueSo9SztkYS5wb3NpdGlvblNjcmVlbi54Kj1BO2RhLnBvc2l0aW9uU2NyZWVuLnkqPUs7MDx3Lm92ZXJkcmF3JiYoZyhSLnBvc2l0aW9uU2NyZWVuLEwucG9zaXRpb25TY3JlZW4sdy5vdmVyZHJhdyksZyhMLnBvc2l0aW9uU2NyZWVuLGRhLnBvc2l0aW9uU2NyZWVuLHcub3ZlcmRyYXcpLGcoZGEucG9zaXRpb25TY3JlZW4sUi5wb3NpdGlvblNjcmVlbix3Lm92ZXJkcmF3KSk7RWEuc2V0RnJvbVBvaW50cyhbUi5wb3NpdGlvblNjcmVlbixcbkwucG9zaXRpb25TY3JlZW4sZGEucG9zaXRpb25TY3JlZW5dKTtpZighMD09PXZhLmlzSW50ZXJzZWN0aW9uQm94KEVhKSl7Qj1SO0U9TDtJPWRhO3UuaW5mby5yZW5kZXIudmVydGljZXMrPTM7dS5pbmZvLnJlbmRlci5mYWNlcysrO2kody5vcGFjaXR5KTtrKHcuYmxlbmRpbmcpO3phPUIucG9zaXRpb25TY3JlZW4ueDtCYT1CLnBvc2l0aW9uU2NyZWVuLnk7YmE9RS5wb3NpdGlvblNjcmVlbi54O0FhPUUucG9zaXRpb25TY3JlZW4ueTskPUkucG9zaXRpb25TY3JlZW4ueDtlYT1JLnBvc2l0aW9uU2NyZWVuLnk7dmFyIE89emEsTT1CYSxjYT1iYSxrYT1BYSxuYT0kLHBhPWVhO0QuYmVnaW5QYXRoKCk7RC5tb3ZlVG8oTyxNKTtELmxpbmVUbyhjYSxrYSk7RC5saW5lVG8obmEscGEpO0QuY2xvc2VQYXRoKCk7KHcgaW5zdGFuY2VvZiBUSFJFRS5NZXNoTGFtYmVydE1hdGVyaWFsfHx3IGluc3RhbmNlb2YgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwpJiZudWxsPT09dy5tYXA/KHNhLmNvcHkody5jb2xvciksXG5oYS5jb3B5KHcuZW1pc3NpdmUpLHcudmVydGV4Q29sb3JzPT09VEhSRUUuRmFjZUNvbG9ycyYmc2EubXVsdGlwbHkoeC5jb2xvciksITE9PT13LndpcmVmcmFtZSYmdy5zaGFkaW5nPT09VEhSRUUuU21vb3RoU2hhZGluZyYmMz09PXgudmVydGV4Tm9ybWFsc0xlbmd0aD8oUC5jb3B5KGdiKSxZLmNvcHkoZ2IpLFUuY29weShnYiksYih4LnYxLnBvc2l0aW9uV29ybGQseC52ZXJ0ZXhOb3JtYWxzTW9kZWxbMF0sUCksYih4LnYyLnBvc2l0aW9uV29ybGQseC52ZXJ0ZXhOb3JtYWxzTW9kZWxbMV0sWSksYih4LnYzLnBvc2l0aW9uV29ybGQseC52ZXJ0ZXhOb3JtYWxzTW9kZWxbMl0sVSksUC5tdWx0aXBseShzYSkuYWRkKGhhKSxZLm11bHRpcGx5KHNhKS5hZGQoaGEpLFUubXVsdGlwbHkoc2EpLmFkZChoYSksamEuYWRkQ29sb3JzKFksVSkubXVsdGlwbHlTY2FsYXIoMC41KSxRYT1oKFAsWSxVLGphKSxmKHphLEJhLGJhLEFhLCQsZWEsMCwwLDEsMCwwLDEsUWEpKTooVi5jb3B5KGdiKSxcbmIoeC5jZW50cm9pZE1vZGVsLHgubm9ybWFsTW9kZWwsViksVi5tdWx0aXBseShzYSkuYWRkKGhhKSwhMD09PXcud2lyZWZyYW1lP2MoVix3LndpcmVmcmFtZUxpbmV3aWR0aCx3LndpcmVmcmFtZUxpbmVjYXAsdy53aXJlZnJhbWVMaW5lam9pbik6ZChWKSkpOncgaW5zdGFuY2VvZiBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbHx8dyBpbnN0YW5jZW9mIFRIUkVFLk1lc2hMYW1iZXJ0TWF0ZXJpYWx8fHcgaW5zdGFuY2VvZiBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbD9udWxsIT09dy5tYXA/dy5tYXAubWFwcGluZyBpbnN0YW5jZW9mIFRIUkVFLlVWTWFwcGluZyYmKHdhPXgudXZzWzBdLGUoemEsQmEsYmEsQWEsJCxlYSx3YVswXS54LHdhWzBdLnksd2FbMV0ueCx3YVsxXS55LHdhWzJdLngsd2FbMl0ueSx3Lm1hcCkpOm51bGwhPT13LmVudk1hcD93LmVudk1hcC5tYXBwaW5nIGluc3RhbmNlb2YgVEhSRUUuU3BoZXJpY2FsUmVmbGVjdGlvbk1hcHBpbmcmJih0YS5jb3B5KHgudmVydGV4Tm9ybWFsc01vZGVsVmlld1swXSksXG5iYj0wLjUqdGEueCswLjUsY2I9MC41KnRhLnkrMC41LHRhLmNvcHkoeC52ZXJ0ZXhOb3JtYWxzTW9kZWxWaWV3WzFdKSxNYT0wLjUqdGEueCswLjUsZmI9MC41KnRhLnkrMC41LHRhLmNvcHkoeC52ZXJ0ZXhOb3JtYWxzTW9kZWxWaWV3WzJdKSxzYj0wLjUqdGEueCswLjUscGI9MC41KnRhLnkrMC41LGUoemEsQmEsYmEsQWEsJCxlYSxiYixjYixNYSxmYixzYixwYix3LmVudk1hcCkpOihWLmNvcHkody5jb2xvciksdy52ZXJ0ZXhDb2xvcnM9PT1USFJFRS5GYWNlQ29sb3JzJiZWLm11bHRpcGx5KHguY29sb3IpLCEwPT09dy53aXJlZnJhbWU/YyhWLHcud2lyZWZyYW1lTGluZXdpZHRoLHcud2lyZWZyYW1lTGluZWNhcCx3LndpcmVmcmFtZUxpbmVqb2luKTpkKFYpKTp3IGluc3RhbmNlb2YgVEhSRUUuTWVzaERlcHRoTWF0ZXJpYWw/KERhPVEubmVhcixVYT1RLmZhcixQLnI9UC5nPVAuYj0xLW4oQi5wb3NpdGlvblNjcmVlbi56KkIucG9zaXRpb25TY3JlZW4udyxEYSxVYSksWS5yPVkuZz1cblkuYj0xLW4oRS5wb3NpdGlvblNjcmVlbi56KkUucG9zaXRpb25TY3JlZW4udyxEYSxVYSksVS5yPVUuZz1VLmI9MS1uKEkucG9zaXRpb25TY3JlZW4ueipJLnBvc2l0aW9uU2NyZWVuLncsRGEsVWEpLGphLmFkZENvbG9ycyhZLFUpLm11bHRpcGx5U2NhbGFyKDAuNSksUWE9aChQLFksVSxqYSksZih6YSxCYSxiYSxBYSwkLGVhLDAsMCwxLDAsMCwxLFFhKSk6dyBpbnN0YW5jZW9mIFRIUkVFLk1lc2hOb3JtYWxNYXRlcmlhbCYmKEI9dm9pZCAwLHcuc2hhZGluZz09PVRIUkVFLkZsYXRTaGFkaW5nPyhCPXgubm9ybWFsTW9kZWxWaWV3LFYuc2V0UkdCKEIueCxCLnksQi56KS5tdWx0aXBseVNjYWxhcigwLjUpLmFkZFNjYWxhcigwLjUpLCEwPT09dy53aXJlZnJhbWU/YyhWLHcud2lyZWZyYW1lTGluZXdpZHRoLHcud2lyZWZyYW1lTGluZWNhcCx3LndpcmVmcmFtZUxpbmVqb2luKTpkKFYpKTp3LnNoYWRpbmc9PT1USFJFRS5TbW9vdGhTaGFkaW5nJiYoQj14LnZlcnRleE5vcm1hbHNNb2RlbFZpZXdbMF0sXG5QLnNldFJHQihCLngsQi55LEIueikubXVsdGlwbHlTY2FsYXIoMC41KS5hZGRTY2FsYXIoMC41KSxCPXgudmVydGV4Tm9ybWFsc01vZGVsVmlld1sxXSxZLnNldFJHQihCLngsQi55LEIueikubXVsdGlwbHlTY2FsYXIoMC41KS5hZGRTY2FsYXIoMC41KSxCPXgudmVydGV4Tm9ybWFsc01vZGVsVmlld1syXSxVLnNldFJHQihCLngsQi55LEIueikubXVsdGlwbHlTY2FsYXIoMC41KS5hZGRTY2FsYXIoMC41KSxqYS5hZGRDb2xvcnMoWSxVKS5tdWx0aXBseVNjYWxhcigwLjUpLFFhPWgoUCxZLFUsamEpLGYoemEsQmEsYmEsQWEsJCxlYSwwLDAsMSwwLDAsMSxRYSkpKX19bGEudW5pb24oRWEpfX1ELnNldFRyYW5zZm9ybSgxLDAsMCwxLDAsMCl9fX07VEhSRUUuU2hhZGVyQ2h1bms9e2ZvZ19wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9GT0dcXG51bmlmb3JtIHZlYzMgZm9nQ29sb3I7XFxuI2lmZGVmIEZPR19FWFAyXFxudW5pZm9ybSBmbG9hdCBmb2dEZW5zaXR5O1xcbiNlbHNlXFxudW5pZm9ybSBmbG9hdCBmb2dOZWFyO1xcbnVuaWZvcm0gZmxvYXQgZm9nRmFyO1xcbiNlbmRpZlxcbiNlbmRpZlwiLGZvZ19mcmFnbWVudDpcIiNpZmRlZiBVU0VfRk9HXFxuZmxvYXQgZGVwdGggPSBnbF9GcmFnQ29vcmQueiAvIGdsX0ZyYWdDb29yZC53O1xcbiNpZmRlZiBGT0dfRVhQMlxcbmNvbnN0IGZsb2F0IExPRzIgPSAxLjQ0MjY5NTtcXG5mbG9hdCBmb2dGYWN0b3IgPSBleHAyKCAtIGZvZ0RlbnNpdHkgKiBmb2dEZW5zaXR5ICogZGVwdGggKiBkZXB0aCAqIExPRzIgKTtcXG5mb2dGYWN0b3IgPSAxLjAgLSBjbGFtcCggZm9nRmFjdG9yLCAwLjAsIDEuMCApO1xcbiNlbHNlXFxuZmxvYXQgZm9nRmFjdG9yID0gc21vb3Roc3RlcCggZm9nTmVhciwgZm9nRmFyLCBkZXB0aCApO1xcbiNlbmRpZlxcbmdsX0ZyYWdDb2xvciA9IG1peCggZ2xfRnJhZ0NvbG9yLCB2ZWM0KCBmb2dDb2xvciwgZ2xfRnJhZ0NvbG9yLncgKSwgZm9nRmFjdG9yICk7XFxuI2VuZGlmXCIsXG5lbnZtYXBfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfRU5WTUFQXFxudW5pZm9ybSBmbG9hdCByZWZsZWN0aXZpdHk7XFxudW5pZm9ybSBzYW1wbGVyQ3ViZSBlbnZNYXA7XFxudW5pZm9ybSBmbG9hdCBmbGlwRW52TWFwO1xcbnVuaWZvcm0gaW50IGNvbWJpbmU7XFxuI2lmIGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApXFxudW5pZm9ybSBib29sIHVzZVJlZnJhY3Q7XFxudW5pZm9ybSBmbG9hdCByZWZyYWN0aW9uUmF0aW87XFxuI2Vsc2VcXG52YXJ5aW5nIHZlYzMgdlJlZmxlY3Q7XFxuI2VuZGlmXFxuI2VuZGlmXCIsZW52bWFwX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9FTlZNQVBcXG52ZWMzIHJlZmxlY3RWZWM7XFxuI2lmIGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApXFxudmVjMyBjYW1lcmFUb1ZlcnRleCA9IG5vcm1hbGl6ZSggdldvcmxkUG9zaXRpb24gLSBjYW1lcmFQb3NpdGlvbiApO1xcbmlmICggdXNlUmVmcmFjdCApIHtcXG5yZWZsZWN0VmVjID0gcmVmcmFjdCggY2FtZXJhVG9WZXJ0ZXgsIG5vcm1hbCwgcmVmcmFjdGlvblJhdGlvICk7XFxufSBlbHNlIHsgXFxucmVmbGVjdFZlYyA9IHJlZmxlY3QoIGNhbWVyYVRvVmVydGV4LCBub3JtYWwgKTtcXG59XFxuI2Vsc2VcXG5yZWZsZWN0VmVjID0gdlJlZmxlY3Q7XFxuI2VuZGlmXFxuI2lmZGVmIERPVUJMRV9TSURFRFxcbmZsb2F0IGZsaXBOb3JtYWwgPSAoIC0xLjAgKyAyLjAgKiBmbG9hdCggZ2xfRnJvbnRGYWNpbmcgKSApO1xcbnZlYzQgY3ViZUNvbG9yID0gdGV4dHVyZUN1YmUoIGVudk1hcCwgZmxpcE5vcm1hbCAqIHZlYzMoIGZsaXBFbnZNYXAgKiByZWZsZWN0VmVjLngsIHJlZmxlY3RWZWMueXogKSApO1xcbiNlbHNlXFxudmVjNCBjdWJlQ29sb3IgPSB0ZXh0dXJlQ3ViZSggZW52TWFwLCB2ZWMzKCBmbGlwRW52TWFwICogcmVmbGVjdFZlYy54LCByZWZsZWN0VmVjLnl6ICkgKTtcXG4jZW5kaWZcXG4jaWZkZWYgR0FNTUFfSU5QVVRcXG5jdWJlQ29sb3IueHl6ICo9IGN1YmVDb2xvci54eXo7XFxuI2VuZGlmXFxuaWYgKCBjb21iaW5lID09IDEgKSB7XFxuZ2xfRnJhZ0NvbG9yLnh5eiA9IG1peCggZ2xfRnJhZ0NvbG9yLnh5eiwgY3ViZUNvbG9yLnh5eiwgc3BlY3VsYXJTdHJlbmd0aCAqIHJlZmxlY3Rpdml0eSApO1xcbn0gZWxzZSBpZiAoIGNvbWJpbmUgPT0gMiApIHtcXG5nbF9GcmFnQ29sb3IueHl6ICs9IGN1YmVDb2xvci54eXogKiBzcGVjdWxhclN0cmVuZ3RoICogcmVmbGVjdGl2aXR5O1xcbn0gZWxzZSB7XFxuZ2xfRnJhZ0NvbG9yLnh5eiA9IG1peCggZ2xfRnJhZ0NvbG9yLnh5eiwgZ2xfRnJhZ0NvbG9yLnh5eiAqIGN1YmVDb2xvci54eXosIHNwZWN1bGFyU3RyZW5ndGggKiByZWZsZWN0aXZpdHkgKTtcXG59XFxuI2VuZGlmXCIsXG5lbnZtYXBfcGFyc192ZXJ0ZXg6XCIjaWYgZGVmaW5lZCggVVNFX0VOVk1BUCApICYmICEgZGVmaW5lZCggVVNFX0JVTVBNQVAgKSAmJiAhIGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKVxcbnZhcnlpbmcgdmVjMyB2UmVmbGVjdDtcXG51bmlmb3JtIGZsb2F0IHJlZnJhY3Rpb25SYXRpbztcXG51bmlmb3JtIGJvb2wgdXNlUmVmcmFjdDtcXG4jZW5kaWZcIix3b3JsZHBvc192ZXJ0ZXg6XCIjaWYgZGVmaW5lZCggVVNFX0VOVk1BUCApIHx8IGRlZmluZWQoIFBIT05HICkgfHwgZGVmaW5lZCggTEFNQkVSVCApIHx8IGRlZmluZWQgKCBVU0VfU0hBRE9XTUFQIClcXG4jaWZkZWYgVVNFX1NLSU5OSU5HXFxudmVjNCB3b3JsZFBvc2l0aW9uID0gbW9kZWxNYXRyaXggKiBza2lubmVkO1xcbiNlbmRpZlxcbiNpZiBkZWZpbmVkKCBVU0VfTU9SUEhUQVJHRVRTICkgJiYgISBkZWZpbmVkKCBVU0VfU0tJTk5JTkcgKVxcbnZlYzQgd29ybGRQb3NpdGlvbiA9IG1vZGVsTWF0cml4ICogdmVjNCggbW9ycGhlZCwgMS4wICk7XFxuI2VuZGlmXFxuI2lmICEgZGVmaW5lZCggVVNFX01PUlBIVEFSR0VUUyApICYmICEgZGVmaW5lZCggVVNFX1NLSU5OSU5HIClcXG52ZWM0IHdvcmxkUG9zaXRpb24gPSBtb2RlbE1hdHJpeCAqIHZlYzQoIHBvc2l0aW9uLCAxLjAgKTtcXG4jZW5kaWZcXG4jZW5kaWZcIixcbmVudm1hcF92ZXJ0ZXg6XCIjaWYgZGVmaW5lZCggVVNFX0VOVk1BUCApICYmICEgZGVmaW5lZCggVVNFX0JVTVBNQVAgKSAmJiAhIGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKVxcbnZlYzMgd29ybGROb3JtYWwgPSBtYXQzKCBtb2RlbE1hdHJpeFsgMCBdLnh5eiwgbW9kZWxNYXRyaXhbIDEgXS54eXosIG1vZGVsTWF0cml4WyAyIF0ueHl6ICkgKiBvYmplY3ROb3JtYWw7XFxud29ybGROb3JtYWwgPSBub3JtYWxpemUoIHdvcmxkTm9ybWFsICk7XFxudmVjMyBjYW1lcmFUb1ZlcnRleCA9IG5vcm1hbGl6ZSggd29ybGRQb3NpdGlvbi54eXogLSBjYW1lcmFQb3NpdGlvbiApO1xcbmlmICggdXNlUmVmcmFjdCApIHtcXG52UmVmbGVjdCA9IHJlZnJhY3QoIGNhbWVyYVRvVmVydGV4LCB3b3JsZE5vcm1hbCwgcmVmcmFjdGlvblJhdGlvICk7XFxufSBlbHNlIHtcXG52UmVmbGVjdCA9IHJlZmxlY3QoIGNhbWVyYVRvVmVydGV4LCB3b3JsZE5vcm1hbCApO1xcbn1cXG4jZW5kaWZcIixtYXBfcGFydGljbGVfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfTUFQXFxudW5pZm9ybSBzYW1wbGVyMkQgbWFwO1xcbiNlbmRpZlwiLFxubWFwX3BhcnRpY2xlX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9NQVBcXG5nbF9GcmFnQ29sb3IgPSBnbF9GcmFnQ29sb3IgKiB0ZXh0dXJlMkQoIG1hcCwgdmVjMiggZ2xfUG9pbnRDb29yZC54LCAxLjAgLSBnbF9Qb2ludENvb3JkLnkgKSApO1xcbiNlbmRpZlwiLG1hcF9wYXJzX3ZlcnRleDpcIiNpZiBkZWZpbmVkKCBVU0VfTUFQICkgfHwgZGVmaW5lZCggVVNFX0JVTVBNQVAgKSB8fCBkZWZpbmVkKCBVU0VfTk9STUFMTUFQICkgfHwgZGVmaW5lZCggVVNFX1NQRUNVTEFSTUFQIClcXG52YXJ5aW5nIHZlYzIgdlV2O1xcbnVuaWZvcm0gdmVjNCBvZmZzZXRSZXBlYXQ7XFxuI2VuZGlmXCIsbWFwX3BhcnNfZnJhZ21lbnQ6XCIjaWYgZGVmaW5lZCggVVNFX01BUCApIHx8IGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApIHx8IGRlZmluZWQoIFVTRV9TUEVDVUxBUk1BUCApXFxudmFyeWluZyB2ZWMyIHZVdjtcXG4jZW5kaWZcXG4jaWZkZWYgVVNFX01BUFxcbnVuaWZvcm0gc2FtcGxlcjJEIG1hcDtcXG4jZW5kaWZcIixcbm1hcF92ZXJ0ZXg6XCIjaWYgZGVmaW5lZCggVVNFX01BUCApIHx8IGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApIHx8IGRlZmluZWQoIFVTRV9TUEVDVUxBUk1BUCApXFxudlV2ID0gdXYgKiBvZmZzZXRSZXBlYXQuencgKyBvZmZzZXRSZXBlYXQueHk7XFxuI2VuZGlmXCIsbWFwX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9NQVBcXG52ZWM0IHRleGVsQ29sb3IgPSB0ZXh0dXJlMkQoIG1hcCwgdlV2ICk7XFxuI2lmZGVmIEdBTU1BX0lOUFVUXFxudGV4ZWxDb2xvci54eXogKj0gdGV4ZWxDb2xvci54eXo7XFxuI2VuZGlmXFxuZ2xfRnJhZ0NvbG9yID0gZ2xfRnJhZ0NvbG9yICogdGV4ZWxDb2xvcjtcXG4jZW5kaWZcIixsaWdodG1hcF9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9MSUdIVE1BUFxcbnZhcnlpbmcgdmVjMiB2VXYyO1xcbnVuaWZvcm0gc2FtcGxlcjJEIGxpZ2h0TWFwO1xcbiNlbmRpZlwiLGxpZ2h0bWFwX3BhcnNfdmVydGV4OlwiI2lmZGVmIFVTRV9MSUdIVE1BUFxcbnZhcnlpbmcgdmVjMiB2VXYyO1xcbiNlbmRpZlwiLFxubGlnaHRtYXBfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX0xJR0hUTUFQXFxuZ2xfRnJhZ0NvbG9yID0gZ2xfRnJhZ0NvbG9yICogdGV4dHVyZTJEKCBsaWdodE1hcCwgdlV2MiApO1xcbiNlbmRpZlwiLGxpZ2h0bWFwX3ZlcnRleDpcIiNpZmRlZiBVU0VfTElHSFRNQVBcXG52VXYyID0gdXYyO1xcbiNlbmRpZlwiLGJ1bXBtYXBfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfQlVNUE1BUFxcbnVuaWZvcm0gc2FtcGxlcjJEIGJ1bXBNYXA7XFxudW5pZm9ybSBmbG9hdCBidW1wU2NhbGU7XFxudmVjMiBkSGR4eV9md2QoKSB7XFxudmVjMiBkU1RkeCA9IGRGZHgoIHZVdiApO1xcbnZlYzIgZFNUZHkgPSBkRmR5KCB2VXYgKTtcXG5mbG9hdCBIbGwgPSBidW1wU2NhbGUgKiB0ZXh0dXJlMkQoIGJ1bXBNYXAsIHZVdiApLng7XFxuZmxvYXQgZEJ4ID0gYnVtcFNjYWxlICogdGV4dHVyZTJEKCBidW1wTWFwLCB2VXYgKyBkU1RkeCApLnggLSBIbGw7XFxuZmxvYXQgZEJ5ID0gYnVtcFNjYWxlICogdGV4dHVyZTJEKCBidW1wTWFwLCB2VXYgKyBkU1RkeSApLnggLSBIbGw7XFxucmV0dXJuIHZlYzIoIGRCeCwgZEJ5ICk7XFxufVxcbnZlYzMgcGVydHVyYk5vcm1hbEFyYiggdmVjMyBzdXJmX3BvcywgdmVjMyBzdXJmX25vcm0sIHZlYzIgZEhkeHkgKSB7XFxudmVjMyB2U2lnbWFYID0gZEZkeCggc3VyZl9wb3MgKTtcXG52ZWMzIHZTaWdtYVkgPSBkRmR5KCBzdXJmX3BvcyApO1xcbnZlYzMgdk4gPSBzdXJmX25vcm07XFxudmVjMyBSMSA9IGNyb3NzKCB2U2lnbWFZLCB2TiApO1xcbnZlYzMgUjIgPSBjcm9zcyggdk4sIHZTaWdtYVggKTtcXG5mbG9hdCBmRGV0ID0gZG90KCB2U2lnbWFYLCBSMSApO1xcbnZlYzMgdkdyYWQgPSBzaWduKCBmRGV0ICkgKiAoIGRIZHh5LnggKiBSMSArIGRIZHh5LnkgKiBSMiApO1xcbnJldHVybiBub3JtYWxpemUoIGFicyggZkRldCApICogc3VyZl9ub3JtIC0gdkdyYWQgKTtcXG59XFxuI2VuZGlmXCIsXG5ub3JtYWxtYXBfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfTk9STUFMTUFQXFxudW5pZm9ybSBzYW1wbGVyMkQgbm9ybWFsTWFwO1xcbnVuaWZvcm0gdmVjMiBub3JtYWxTY2FsZTtcXG52ZWMzIHBlcnR1cmJOb3JtYWwyQXJiKCB2ZWMzIGV5ZV9wb3MsIHZlYzMgc3VyZl9ub3JtICkge1xcbnZlYzMgcTAgPSBkRmR4KCBleWVfcG9zLnh5eiApO1xcbnZlYzMgcTEgPSBkRmR5KCBleWVfcG9zLnh5eiApO1xcbnZlYzIgc3QwID0gZEZkeCggdlV2LnN0ICk7XFxudmVjMiBzdDEgPSBkRmR5KCB2VXYuc3QgKTtcXG52ZWMzIFMgPSBub3JtYWxpemUoICBxMCAqIHN0MS50IC0gcTEgKiBzdDAudCApO1xcbnZlYzMgVCA9IG5vcm1hbGl6ZSggLXEwICogc3QxLnMgKyBxMSAqIHN0MC5zICk7XFxudmVjMyBOID0gbm9ybWFsaXplKCBzdXJmX25vcm0gKTtcXG52ZWMzIG1hcE4gPSB0ZXh0dXJlMkQoIG5vcm1hbE1hcCwgdlV2ICkueHl6ICogMi4wIC0gMS4wO1xcbm1hcE4ueHkgPSBub3JtYWxTY2FsZSAqIG1hcE4ueHk7XFxubWF0MyB0c24gPSBtYXQzKCBTLCBULCBOICk7XFxucmV0dXJuIG5vcm1hbGl6ZSggdHNuICogbWFwTiApO1xcbn1cXG4jZW5kaWZcIixcbnNwZWN1bGFybWFwX3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX1NQRUNVTEFSTUFQXFxudW5pZm9ybSBzYW1wbGVyMkQgc3BlY3VsYXJNYXA7XFxuI2VuZGlmXCIsc3BlY3VsYXJtYXBfZnJhZ21lbnQ6XCJmbG9hdCBzcGVjdWxhclN0cmVuZ3RoO1xcbiNpZmRlZiBVU0VfU1BFQ1VMQVJNQVBcXG52ZWM0IHRleGVsU3BlY3VsYXIgPSB0ZXh0dXJlMkQoIHNwZWN1bGFyTWFwLCB2VXYgKTtcXG5zcGVjdWxhclN0cmVuZ3RoID0gdGV4ZWxTcGVjdWxhci5yO1xcbiNlbHNlXFxuc3BlY3VsYXJTdHJlbmd0aCA9IDEuMDtcXG4jZW5kaWZcIixsaWdodHNfbGFtYmVydF9wYXJzX3ZlcnRleDpcInVuaWZvcm0gdmVjMyBhbWJpZW50O1xcbnVuaWZvcm0gdmVjMyBkaWZmdXNlO1xcbnVuaWZvcm0gdmVjMyBlbWlzc2l2ZTtcXG51bmlmb3JtIHZlYzMgYW1iaWVudExpZ2h0Q29sb3I7XFxuI2lmIE1BWF9ESVJfTElHSFRTID4gMFxcbnVuaWZvcm0gdmVjMyBkaXJlY3Rpb25hbExpZ2h0Q29sb3JbIE1BWF9ESVJfTElHSFRTIF07XFxudW5pZm9ybSB2ZWMzIGRpcmVjdGlvbmFsTGlnaHREaXJlY3Rpb25bIE1BWF9ESVJfTElHSFRTIF07XFxuI2VuZGlmXFxuI2lmIE1BWF9IRU1JX0xJR0hUUyA+IDBcXG51bmlmb3JtIHZlYzMgaGVtaXNwaGVyZUxpZ2h0U2t5Q29sb3JbIE1BWF9IRU1JX0xJR0hUUyBdO1xcbnVuaWZvcm0gdmVjMyBoZW1pc3BoZXJlTGlnaHRHcm91bmRDb2xvclsgTUFYX0hFTUlfTElHSFRTIF07XFxudW5pZm9ybSB2ZWMzIGhlbWlzcGhlcmVMaWdodERpcmVjdGlvblsgTUFYX0hFTUlfTElHSFRTIF07XFxuI2VuZGlmXFxuI2lmIE1BWF9QT0lOVF9MSUdIVFMgPiAwXFxudW5pZm9ybSB2ZWMzIHBvaW50TGlnaHRDb2xvclsgTUFYX1BPSU5UX0xJR0hUUyBdO1xcbnVuaWZvcm0gdmVjMyBwb2ludExpZ2h0UG9zaXRpb25bIE1BWF9QT0lOVF9MSUdIVFMgXTtcXG51bmlmb3JtIGZsb2F0IHBvaW50TGlnaHREaXN0YW5jZVsgTUFYX1BPSU5UX0xJR0hUUyBdO1xcbiNlbmRpZlxcbiNpZiBNQVhfU1BPVF9MSUdIVFMgPiAwXFxudW5pZm9ybSB2ZWMzIHNwb3RMaWdodENvbG9yWyBNQVhfU1BPVF9MSUdIVFMgXTtcXG51bmlmb3JtIHZlYzMgc3BvdExpZ2h0UG9zaXRpb25bIE1BWF9TUE9UX0xJR0hUUyBdO1xcbnVuaWZvcm0gdmVjMyBzcG90TGlnaHREaXJlY3Rpb25bIE1BWF9TUE9UX0xJR0hUUyBdO1xcbnVuaWZvcm0gZmxvYXQgc3BvdExpZ2h0RGlzdGFuY2VbIE1BWF9TUE9UX0xJR0hUUyBdO1xcbnVuaWZvcm0gZmxvYXQgc3BvdExpZ2h0QW5nbGVDb3NbIE1BWF9TUE9UX0xJR0hUUyBdO1xcbnVuaWZvcm0gZmxvYXQgc3BvdExpZ2h0RXhwb25lbnRbIE1BWF9TUE9UX0xJR0hUUyBdO1xcbiNlbmRpZlxcbiNpZmRlZiBXUkFQX0FST1VORFxcbnVuaWZvcm0gdmVjMyB3cmFwUkdCO1xcbiNlbmRpZlwiLFxubGlnaHRzX2xhbWJlcnRfdmVydGV4OlwidkxpZ2h0RnJvbnQgPSB2ZWMzKCAwLjAgKTtcXG4jaWZkZWYgRE9VQkxFX1NJREVEXFxudkxpZ2h0QmFjayA9IHZlYzMoIDAuMCApO1xcbiNlbmRpZlxcbnRyYW5zZm9ybWVkTm9ybWFsID0gbm9ybWFsaXplKCB0cmFuc2Zvcm1lZE5vcm1hbCApO1xcbiNpZiBNQVhfRElSX0xJR0hUUyA+IDBcXG5mb3IoIGludCBpID0gMDsgaSA8IE1BWF9ESVJfTElHSFRTOyBpICsrICkge1xcbnZlYzQgbERpcmVjdGlvbiA9IHZpZXdNYXRyaXggKiB2ZWM0KCBkaXJlY3Rpb25hbExpZ2h0RGlyZWN0aW9uWyBpIF0sIDAuMCApO1xcbnZlYzMgZGlyVmVjdG9yID0gbm9ybWFsaXplKCBsRGlyZWN0aW9uLnh5eiApO1xcbmZsb2F0IGRvdFByb2R1Y3QgPSBkb3QoIHRyYW5zZm9ybWVkTm9ybWFsLCBkaXJWZWN0b3IgKTtcXG52ZWMzIGRpcmVjdGlvbmFsTGlnaHRXZWlnaHRpbmcgPSB2ZWMzKCBtYXgoIGRvdFByb2R1Y3QsIDAuMCApICk7XFxuI2lmZGVmIERPVUJMRV9TSURFRFxcbnZlYzMgZGlyZWN0aW9uYWxMaWdodFdlaWdodGluZ0JhY2sgPSB2ZWMzKCBtYXgoIC1kb3RQcm9kdWN0LCAwLjAgKSApO1xcbiNpZmRlZiBXUkFQX0FST1VORFxcbnZlYzMgZGlyZWN0aW9uYWxMaWdodFdlaWdodGluZ0hhbGZCYWNrID0gdmVjMyggbWF4KCAtMC41ICogZG90UHJvZHVjdCArIDAuNSwgMC4wICkgKTtcXG4jZW5kaWZcXG4jZW5kaWZcXG4jaWZkZWYgV1JBUF9BUk9VTkRcXG52ZWMzIGRpcmVjdGlvbmFsTGlnaHRXZWlnaHRpbmdIYWxmID0gdmVjMyggbWF4KCAwLjUgKiBkb3RQcm9kdWN0ICsgMC41LCAwLjAgKSApO1xcbmRpcmVjdGlvbmFsTGlnaHRXZWlnaHRpbmcgPSBtaXgoIGRpcmVjdGlvbmFsTGlnaHRXZWlnaHRpbmcsIGRpcmVjdGlvbmFsTGlnaHRXZWlnaHRpbmdIYWxmLCB3cmFwUkdCICk7XFxuI2lmZGVmIERPVUJMRV9TSURFRFxcbmRpcmVjdGlvbmFsTGlnaHRXZWlnaHRpbmdCYWNrID0gbWl4KCBkaXJlY3Rpb25hbExpZ2h0V2VpZ2h0aW5nQmFjaywgZGlyZWN0aW9uYWxMaWdodFdlaWdodGluZ0hhbGZCYWNrLCB3cmFwUkdCICk7XFxuI2VuZGlmXFxuI2VuZGlmXFxudkxpZ2h0RnJvbnQgKz0gZGlyZWN0aW9uYWxMaWdodENvbG9yWyBpIF0gKiBkaXJlY3Rpb25hbExpZ2h0V2VpZ2h0aW5nO1xcbiNpZmRlZiBET1VCTEVfU0lERURcXG52TGlnaHRCYWNrICs9IGRpcmVjdGlvbmFsTGlnaHRDb2xvclsgaSBdICogZGlyZWN0aW9uYWxMaWdodFdlaWdodGluZ0JhY2s7XFxuI2VuZGlmXFxufVxcbiNlbmRpZlxcbiNpZiBNQVhfUE9JTlRfTElHSFRTID4gMFxcbmZvciggaW50IGkgPSAwOyBpIDwgTUFYX1BPSU5UX0xJR0hUUzsgaSArKyApIHtcXG52ZWM0IGxQb3NpdGlvbiA9IHZpZXdNYXRyaXggKiB2ZWM0KCBwb2ludExpZ2h0UG9zaXRpb25bIGkgXSwgMS4wICk7XFxudmVjMyBsVmVjdG9yID0gbFBvc2l0aW9uLnh5eiAtIG12UG9zaXRpb24ueHl6O1xcbmZsb2F0IGxEaXN0YW5jZSA9IDEuMDtcXG5pZiAoIHBvaW50TGlnaHREaXN0YW5jZVsgaSBdID4gMC4wIClcXG5sRGlzdGFuY2UgPSAxLjAgLSBtaW4oICggbGVuZ3RoKCBsVmVjdG9yICkgLyBwb2ludExpZ2h0RGlzdGFuY2VbIGkgXSApLCAxLjAgKTtcXG5sVmVjdG9yID0gbm9ybWFsaXplKCBsVmVjdG9yICk7XFxuZmxvYXQgZG90UHJvZHVjdCA9IGRvdCggdHJhbnNmb3JtZWROb3JtYWwsIGxWZWN0b3IgKTtcXG52ZWMzIHBvaW50TGlnaHRXZWlnaHRpbmcgPSB2ZWMzKCBtYXgoIGRvdFByb2R1Y3QsIDAuMCApICk7XFxuI2lmZGVmIERPVUJMRV9TSURFRFxcbnZlYzMgcG9pbnRMaWdodFdlaWdodGluZ0JhY2sgPSB2ZWMzKCBtYXgoIC1kb3RQcm9kdWN0LCAwLjAgKSApO1xcbiNpZmRlZiBXUkFQX0FST1VORFxcbnZlYzMgcG9pbnRMaWdodFdlaWdodGluZ0hhbGZCYWNrID0gdmVjMyggbWF4KCAtMC41ICogZG90UHJvZHVjdCArIDAuNSwgMC4wICkgKTtcXG4jZW5kaWZcXG4jZW5kaWZcXG4jaWZkZWYgV1JBUF9BUk9VTkRcXG52ZWMzIHBvaW50TGlnaHRXZWlnaHRpbmdIYWxmID0gdmVjMyggbWF4KCAwLjUgKiBkb3RQcm9kdWN0ICsgMC41LCAwLjAgKSApO1xcbnBvaW50TGlnaHRXZWlnaHRpbmcgPSBtaXgoIHBvaW50TGlnaHRXZWlnaHRpbmcsIHBvaW50TGlnaHRXZWlnaHRpbmdIYWxmLCB3cmFwUkdCICk7XFxuI2lmZGVmIERPVUJMRV9TSURFRFxcbnBvaW50TGlnaHRXZWlnaHRpbmdCYWNrID0gbWl4KCBwb2ludExpZ2h0V2VpZ2h0aW5nQmFjaywgcG9pbnRMaWdodFdlaWdodGluZ0hhbGZCYWNrLCB3cmFwUkdCICk7XFxuI2VuZGlmXFxuI2VuZGlmXFxudkxpZ2h0RnJvbnQgKz0gcG9pbnRMaWdodENvbG9yWyBpIF0gKiBwb2ludExpZ2h0V2VpZ2h0aW5nICogbERpc3RhbmNlO1xcbiNpZmRlZiBET1VCTEVfU0lERURcXG52TGlnaHRCYWNrICs9IHBvaW50TGlnaHRDb2xvclsgaSBdICogcG9pbnRMaWdodFdlaWdodGluZ0JhY2sgKiBsRGlzdGFuY2U7XFxuI2VuZGlmXFxufVxcbiNlbmRpZlxcbiNpZiBNQVhfU1BPVF9MSUdIVFMgPiAwXFxuZm9yKCBpbnQgaSA9IDA7IGkgPCBNQVhfU1BPVF9MSUdIVFM7IGkgKysgKSB7XFxudmVjNCBsUG9zaXRpb24gPSB2aWV3TWF0cml4ICogdmVjNCggc3BvdExpZ2h0UG9zaXRpb25bIGkgXSwgMS4wICk7XFxudmVjMyBsVmVjdG9yID0gbFBvc2l0aW9uLnh5eiAtIG12UG9zaXRpb24ueHl6O1xcbmZsb2F0IHNwb3RFZmZlY3QgPSBkb3QoIHNwb3RMaWdodERpcmVjdGlvblsgaSBdLCBub3JtYWxpemUoIHNwb3RMaWdodFBvc2l0aW9uWyBpIF0gLSB3b3JsZFBvc2l0aW9uLnh5eiApICk7XFxuaWYgKCBzcG90RWZmZWN0ID4gc3BvdExpZ2h0QW5nbGVDb3NbIGkgXSApIHtcXG5zcG90RWZmZWN0ID0gbWF4KCBwb3coIHNwb3RFZmZlY3QsIHNwb3RMaWdodEV4cG9uZW50WyBpIF0gKSwgMC4wICk7XFxuZmxvYXQgbERpc3RhbmNlID0gMS4wO1xcbmlmICggc3BvdExpZ2h0RGlzdGFuY2VbIGkgXSA+IDAuMCApXFxubERpc3RhbmNlID0gMS4wIC0gbWluKCAoIGxlbmd0aCggbFZlY3RvciApIC8gc3BvdExpZ2h0RGlzdGFuY2VbIGkgXSApLCAxLjAgKTtcXG5sVmVjdG9yID0gbm9ybWFsaXplKCBsVmVjdG9yICk7XFxuZmxvYXQgZG90UHJvZHVjdCA9IGRvdCggdHJhbnNmb3JtZWROb3JtYWwsIGxWZWN0b3IgKTtcXG52ZWMzIHNwb3RMaWdodFdlaWdodGluZyA9IHZlYzMoIG1heCggZG90UHJvZHVjdCwgMC4wICkgKTtcXG4jaWZkZWYgRE9VQkxFX1NJREVEXFxudmVjMyBzcG90TGlnaHRXZWlnaHRpbmdCYWNrID0gdmVjMyggbWF4KCAtZG90UHJvZHVjdCwgMC4wICkgKTtcXG4jaWZkZWYgV1JBUF9BUk9VTkRcXG52ZWMzIHNwb3RMaWdodFdlaWdodGluZ0hhbGZCYWNrID0gdmVjMyggbWF4KCAtMC41ICogZG90UHJvZHVjdCArIDAuNSwgMC4wICkgKTtcXG4jZW5kaWZcXG4jZW5kaWZcXG4jaWZkZWYgV1JBUF9BUk9VTkRcXG52ZWMzIHNwb3RMaWdodFdlaWdodGluZ0hhbGYgPSB2ZWMzKCBtYXgoIDAuNSAqIGRvdFByb2R1Y3QgKyAwLjUsIDAuMCApICk7XFxuc3BvdExpZ2h0V2VpZ2h0aW5nID0gbWl4KCBzcG90TGlnaHRXZWlnaHRpbmcsIHNwb3RMaWdodFdlaWdodGluZ0hhbGYsIHdyYXBSR0IgKTtcXG4jaWZkZWYgRE9VQkxFX1NJREVEXFxuc3BvdExpZ2h0V2VpZ2h0aW5nQmFjayA9IG1peCggc3BvdExpZ2h0V2VpZ2h0aW5nQmFjaywgc3BvdExpZ2h0V2VpZ2h0aW5nSGFsZkJhY2ssIHdyYXBSR0IgKTtcXG4jZW5kaWZcXG4jZW5kaWZcXG52TGlnaHRGcm9udCArPSBzcG90TGlnaHRDb2xvclsgaSBdICogc3BvdExpZ2h0V2VpZ2h0aW5nICogbERpc3RhbmNlICogc3BvdEVmZmVjdDtcXG4jaWZkZWYgRE9VQkxFX1NJREVEXFxudkxpZ2h0QmFjayArPSBzcG90TGlnaHRDb2xvclsgaSBdICogc3BvdExpZ2h0V2VpZ2h0aW5nQmFjayAqIGxEaXN0YW5jZSAqIHNwb3RFZmZlY3Q7XFxuI2VuZGlmXFxufVxcbn1cXG4jZW5kaWZcXG4jaWYgTUFYX0hFTUlfTElHSFRTID4gMFxcbmZvciggaW50IGkgPSAwOyBpIDwgTUFYX0hFTUlfTElHSFRTOyBpICsrICkge1xcbnZlYzQgbERpcmVjdGlvbiA9IHZpZXdNYXRyaXggKiB2ZWM0KCBoZW1pc3BoZXJlTGlnaHREaXJlY3Rpb25bIGkgXSwgMC4wICk7XFxudmVjMyBsVmVjdG9yID0gbm9ybWFsaXplKCBsRGlyZWN0aW9uLnh5eiApO1xcbmZsb2F0IGRvdFByb2R1Y3QgPSBkb3QoIHRyYW5zZm9ybWVkTm9ybWFsLCBsVmVjdG9yICk7XFxuZmxvYXQgaGVtaURpZmZ1c2VXZWlnaHQgPSAwLjUgKiBkb3RQcm9kdWN0ICsgMC41O1xcbmZsb2F0IGhlbWlEaWZmdXNlV2VpZ2h0QmFjayA9IC0wLjUgKiBkb3RQcm9kdWN0ICsgMC41O1xcbnZMaWdodEZyb250ICs9IG1peCggaGVtaXNwaGVyZUxpZ2h0R3JvdW5kQ29sb3JbIGkgXSwgaGVtaXNwaGVyZUxpZ2h0U2t5Q29sb3JbIGkgXSwgaGVtaURpZmZ1c2VXZWlnaHQgKTtcXG4jaWZkZWYgRE9VQkxFX1NJREVEXFxudkxpZ2h0QmFjayArPSBtaXgoIGhlbWlzcGhlcmVMaWdodEdyb3VuZENvbG9yWyBpIF0sIGhlbWlzcGhlcmVMaWdodFNreUNvbG9yWyBpIF0sIGhlbWlEaWZmdXNlV2VpZ2h0QmFjayApO1xcbiNlbmRpZlxcbn1cXG4jZW5kaWZcXG52TGlnaHRGcm9udCA9IHZMaWdodEZyb250ICogZGlmZnVzZSArIGFtYmllbnQgKiBhbWJpZW50TGlnaHRDb2xvciArIGVtaXNzaXZlO1xcbiNpZmRlZiBET1VCTEVfU0lERURcXG52TGlnaHRCYWNrID0gdkxpZ2h0QmFjayAqIGRpZmZ1c2UgKyBhbWJpZW50ICogYW1iaWVudExpZ2h0Q29sb3IgKyBlbWlzc2l2ZTtcXG4jZW5kaWZcIixcbmxpZ2h0c19waG9uZ19wYXJzX3ZlcnRleDpcIiNpZm5kZWYgUEhPTkdfUEVSX1BJWEVMXFxuI2lmIE1BWF9QT0lOVF9MSUdIVFMgPiAwXFxudW5pZm9ybSB2ZWMzIHBvaW50TGlnaHRQb3NpdGlvblsgTUFYX1BPSU5UX0xJR0hUUyBdO1xcbnVuaWZvcm0gZmxvYXQgcG9pbnRMaWdodERpc3RhbmNlWyBNQVhfUE9JTlRfTElHSFRTIF07XFxudmFyeWluZyB2ZWM0IHZQb2ludExpZ2h0WyBNQVhfUE9JTlRfTElHSFRTIF07XFxuI2VuZGlmXFxuI2lmIE1BWF9TUE9UX0xJR0hUUyA+IDBcXG51bmlmb3JtIHZlYzMgc3BvdExpZ2h0UG9zaXRpb25bIE1BWF9TUE9UX0xJR0hUUyBdO1xcbnVuaWZvcm0gZmxvYXQgc3BvdExpZ2h0RGlzdGFuY2VbIE1BWF9TUE9UX0xJR0hUUyBdO1xcbnZhcnlpbmcgdmVjNCB2U3BvdExpZ2h0WyBNQVhfU1BPVF9MSUdIVFMgXTtcXG4jZW5kaWZcXG4jZW5kaWZcXG4jaWYgTUFYX1NQT1RfTElHSFRTID4gMCB8fCBkZWZpbmVkKCBVU0VfQlVNUE1BUCApXFxudmFyeWluZyB2ZWMzIHZXb3JsZFBvc2l0aW9uO1xcbiNlbmRpZlwiLFxubGlnaHRzX3Bob25nX3ZlcnRleDpcIiNpZm5kZWYgUEhPTkdfUEVSX1BJWEVMXFxuI2lmIE1BWF9QT0lOVF9MSUdIVFMgPiAwXFxuZm9yKCBpbnQgaSA9IDA7IGkgPCBNQVhfUE9JTlRfTElHSFRTOyBpICsrICkge1xcbnZlYzQgbFBvc2l0aW9uID0gdmlld01hdHJpeCAqIHZlYzQoIHBvaW50TGlnaHRQb3NpdGlvblsgaSBdLCAxLjAgKTtcXG52ZWMzIGxWZWN0b3IgPSBsUG9zaXRpb24ueHl6IC0gbXZQb3NpdGlvbi54eXo7XFxuZmxvYXQgbERpc3RhbmNlID0gMS4wO1xcbmlmICggcG9pbnRMaWdodERpc3RhbmNlWyBpIF0gPiAwLjAgKVxcbmxEaXN0YW5jZSA9IDEuMCAtIG1pbiggKCBsZW5ndGgoIGxWZWN0b3IgKSAvIHBvaW50TGlnaHREaXN0YW5jZVsgaSBdICksIDEuMCApO1xcbnZQb2ludExpZ2h0WyBpIF0gPSB2ZWM0KCBsVmVjdG9yLCBsRGlzdGFuY2UgKTtcXG59XFxuI2VuZGlmXFxuI2lmIE1BWF9TUE9UX0xJR0hUUyA+IDBcXG5mb3IoIGludCBpID0gMDsgaSA8IE1BWF9TUE9UX0xJR0hUUzsgaSArKyApIHtcXG52ZWM0IGxQb3NpdGlvbiA9IHZpZXdNYXRyaXggKiB2ZWM0KCBzcG90TGlnaHRQb3NpdGlvblsgaSBdLCAxLjAgKTtcXG52ZWMzIGxWZWN0b3IgPSBsUG9zaXRpb24ueHl6IC0gbXZQb3NpdGlvbi54eXo7XFxuZmxvYXQgbERpc3RhbmNlID0gMS4wO1xcbmlmICggc3BvdExpZ2h0RGlzdGFuY2VbIGkgXSA+IDAuMCApXFxubERpc3RhbmNlID0gMS4wIC0gbWluKCAoIGxlbmd0aCggbFZlY3RvciApIC8gc3BvdExpZ2h0RGlzdGFuY2VbIGkgXSApLCAxLjAgKTtcXG52U3BvdExpZ2h0WyBpIF0gPSB2ZWM0KCBsVmVjdG9yLCBsRGlzdGFuY2UgKTtcXG59XFxuI2VuZGlmXFxuI2VuZGlmXFxuI2lmIE1BWF9TUE9UX0xJR0hUUyA+IDAgfHwgZGVmaW5lZCggVVNFX0JVTVBNQVAgKVxcbnZXb3JsZFBvc2l0aW9uID0gd29ybGRQb3NpdGlvbi54eXo7XFxuI2VuZGlmXCIsXG5saWdodHNfcGhvbmdfcGFyc19mcmFnbWVudDpcInVuaWZvcm0gdmVjMyBhbWJpZW50TGlnaHRDb2xvcjtcXG4jaWYgTUFYX0RJUl9MSUdIVFMgPiAwXFxudW5pZm9ybSB2ZWMzIGRpcmVjdGlvbmFsTGlnaHRDb2xvclsgTUFYX0RJUl9MSUdIVFMgXTtcXG51bmlmb3JtIHZlYzMgZGlyZWN0aW9uYWxMaWdodERpcmVjdGlvblsgTUFYX0RJUl9MSUdIVFMgXTtcXG4jZW5kaWZcXG4jaWYgTUFYX0hFTUlfTElHSFRTID4gMFxcbnVuaWZvcm0gdmVjMyBoZW1pc3BoZXJlTGlnaHRTa3lDb2xvclsgTUFYX0hFTUlfTElHSFRTIF07XFxudW5pZm9ybSB2ZWMzIGhlbWlzcGhlcmVMaWdodEdyb3VuZENvbG9yWyBNQVhfSEVNSV9MSUdIVFMgXTtcXG51bmlmb3JtIHZlYzMgaGVtaXNwaGVyZUxpZ2h0RGlyZWN0aW9uWyBNQVhfSEVNSV9MSUdIVFMgXTtcXG4jZW5kaWZcXG4jaWYgTUFYX1BPSU5UX0xJR0hUUyA+IDBcXG51bmlmb3JtIHZlYzMgcG9pbnRMaWdodENvbG9yWyBNQVhfUE9JTlRfTElHSFRTIF07XFxuI2lmZGVmIFBIT05HX1BFUl9QSVhFTFxcbnVuaWZvcm0gdmVjMyBwb2ludExpZ2h0UG9zaXRpb25bIE1BWF9QT0lOVF9MSUdIVFMgXTtcXG51bmlmb3JtIGZsb2F0IHBvaW50TGlnaHREaXN0YW5jZVsgTUFYX1BPSU5UX0xJR0hUUyBdO1xcbiNlbHNlXFxudmFyeWluZyB2ZWM0IHZQb2ludExpZ2h0WyBNQVhfUE9JTlRfTElHSFRTIF07XFxuI2VuZGlmXFxuI2VuZGlmXFxuI2lmIE1BWF9TUE9UX0xJR0hUUyA+IDBcXG51bmlmb3JtIHZlYzMgc3BvdExpZ2h0Q29sb3JbIE1BWF9TUE9UX0xJR0hUUyBdO1xcbnVuaWZvcm0gdmVjMyBzcG90TGlnaHRQb3NpdGlvblsgTUFYX1NQT1RfTElHSFRTIF07XFxudW5pZm9ybSB2ZWMzIHNwb3RMaWdodERpcmVjdGlvblsgTUFYX1NQT1RfTElHSFRTIF07XFxudW5pZm9ybSBmbG9hdCBzcG90TGlnaHRBbmdsZUNvc1sgTUFYX1NQT1RfTElHSFRTIF07XFxudW5pZm9ybSBmbG9hdCBzcG90TGlnaHRFeHBvbmVudFsgTUFYX1NQT1RfTElHSFRTIF07XFxuI2lmZGVmIFBIT05HX1BFUl9QSVhFTFxcbnVuaWZvcm0gZmxvYXQgc3BvdExpZ2h0RGlzdGFuY2VbIE1BWF9TUE9UX0xJR0hUUyBdO1xcbiNlbHNlXFxudmFyeWluZyB2ZWM0IHZTcG90TGlnaHRbIE1BWF9TUE9UX0xJR0hUUyBdO1xcbiNlbmRpZlxcbiNlbmRpZlxcbiNpZiBNQVhfU1BPVF9MSUdIVFMgPiAwIHx8IGRlZmluZWQoIFVTRV9CVU1QTUFQIClcXG52YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XFxuI2VuZGlmXFxuI2lmZGVmIFdSQVBfQVJPVU5EXFxudW5pZm9ybSB2ZWMzIHdyYXBSR0I7XFxuI2VuZGlmXFxudmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XFxudmFyeWluZyB2ZWMzIHZOb3JtYWw7XCIsXG5saWdodHNfcGhvbmdfZnJhZ21lbnQ6XCJ2ZWMzIG5vcm1hbCA9IG5vcm1hbGl6ZSggdk5vcm1hbCApO1xcbnZlYzMgdmlld1Bvc2l0aW9uID0gbm9ybWFsaXplKCB2Vmlld1Bvc2l0aW9uICk7XFxuI2lmZGVmIERPVUJMRV9TSURFRFxcbm5vcm1hbCA9IG5vcm1hbCAqICggLTEuMCArIDIuMCAqIGZsb2F0KCBnbF9Gcm9udEZhY2luZyApICk7XFxuI2VuZGlmXFxuI2lmZGVmIFVTRV9OT1JNQUxNQVBcXG5ub3JtYWwgPSBwZXJ0dXJiTm9ybWFsMkFyYiggLXZWaWV3UG9zaXRpb24sIG5vcm1hbCApO1xcbiNlbGlmIGRlZmluZWQoIFVTRV9CVU1QTUFQIClcXG5ub3JtYWwgPSBwZXJ0dXJiTm9ybWFsQXJiKCAtdlZpZXdQb3NpdGlvbiwgbm9ybWFsLCBkSGR4eV9md2QoKSApO1xcbiNlbmRpZlxcbiNpZiBNQVhfUE9JTlRfTElHSFRTID4gMFxcbnZlYzMgcG9pbnREaWZmdXNlICA9IHZlYzMoIDAuMCApO1xcbnZlYzMgcG9pbnRTcGVjdWxhciA9IHZlYzMoIDAuMCApO1xcbmZvciAoIGludCBpID0gMDsgaSA8IE1BWF9QT0lOVF9MSUdIVFM7IGkgKysgKSB7XFxuI2lmZGVmIFBIT05HX1BFUl9QSVhFTFxcbnZlYzQgbFBvc2l0aW9uID0gdmlld01hdHJpeCAqIHZlYzQoIHBvaW50TGlnaHRQb3NpdGlvblsgaSBdLCAxLjAgKTtcXG52ZWMzIGxWZWN0b3IgPSBsUG9zaXRpb24ueHl6ICsgdlZpZXdQb3NpdGlvbi54eXo7XFxuZmxvYXQgbERpc3RhbmNlID0gMS4wO1xcbmlmICggcG9pbnRMaWdodERpc3RhbmNlWyBpIF0gPiAwLjAgKVxcbmxEaXN0YW5jZSA9IDEuMCAtIG1pbiggKCBsZW5ndGgoIGxWZWN0b3IgKSAvIHBvaW50TGlnaHREaXN0YW5jZVsgaSBdICksIDEuMCApO1xcbmxWZWN0b3IgPSBub3JtYWxpemUoIGxWZWN0b3IgKTtcXG4jZWxzZVxcbnZlYzMgbFZlY3RvciA9IG5vcm1hbGl6ZSggdlBvaW50TGlnaHRbIGkgXS54eXogKTtcXG5mbG9hdCBsRGlzdGFuY2UgPSB2UG9pbnRMaWdodFsgaSBdLnc7XFxuI2VuZGlmXFxuZmxvYXQgZG90UHJvZHVjdCA9IGRvdCggbm9ybWFsLCBsVmVjdG9yICk7XFxuI2lmZGVmIFdSQVBfQVJPVU5EXFxuZmxvYXQgcG9pbnREaWZmdXNlV2VpZ2h0RnVsbCA9IG1heCggZG90UHJvZHVjdCwgMC4wICk7XFxuZmxvYXQgcG9pbnREaWZmdXNlV2VpZ2h0SGFsZiA9IG1heCggMC41ICogZG90UHJvZHVjdCArIDAuNSwgMC4wICk7XFxudmVjMyBwb2ludERpZmZ1c2VXZWlnaHQgPSBtaXgoIHZlYzMgKCBwb2ludERpZmZ1c2VXZWlnaHRGdWxsICksIHZlYzMoIHBvaW50RGlmZnVzZVdlaWdodEhhbGYgKSwgd3JhcFJHQiApO1xcbiNlbHNlXFxuZmxvYXQgcG9pbnREaWZmdXNlV2VpZ2h0ID0gbWF4KCBkb3RQcm9kdWN0LCAwLjAgKTtcXG4jZW5kaWZcXG5wb2ludERpZmZ1c2UgICs9IGRpZmZ1c2UgKiBwb2ludExpZ2h0Q29sb3JbIGkgXSAqIHBvaW50RGlmZnVzZVdlaWdodCAqIGxEaXN0YW5jZTtcXG52ZWMzIHBvaW50SGFsZlZlY3RvciA9IG5vcm1hbGl6ZSggbFZlY3RvciArIHZpZXdQb3NpdGlvbiApO1xcbmZsb2F0IHBvaW50RG90Tm9ybWFsSGFsZiA9IG1heCggZG90KCBub3JtYWwsIHBvaW50SGFsZlZlY3RvciApLCAwLjAgKTtcXG5mbG9hdCBwb2ludFNwZWN1bGFyV2VpZ2h0ID0gc3BlY3VsYXJTdHJlbmd0aCAqIG1heCggcG93KCBwb2ludERvdE5vcm1hbEhhbGYsIHNoaW5pbmVzcyApLCAwLjAgKTtcXG4jaWZkZWYgUEhZU0lDQUxMWV9CQVNFRF9TSEFESU5HXFxuZmxvYXQgc3BlY3VsYXJOb3JtYWxpemF0aW9uID0gKCBzaGluaW5lc3MgKyAyLjAwMDEgKSAvIDguMDtcXG52ZWMzIHNjaGxpY2sgPSBzcGVjdWxhciArIHZlYzMoIDEuMCAtIHNwZWN1bGFyICkgKiBwb3coIDEuMCAtIGRvdCggbFZlY3RvciwgcG9pbnRIYWxmVmVjdG9yICksIDUuMCApO1xcbnBvaW50U3BlY3VsYXIgKz0gc2NobGljayAqIHBvaW50TGlnaHRDb2xvclsgaSBdICogcG9pbnRTcGVjdWxhcldlaWdodCAqIHBvaW50RGlmZnVzZVdlaWdodCAqIGxEaXN0YW5jZSAqIHNwZWN1bGFyTm9ybWFsaXphdGlvbjtcXG4jZWxzZVxcbnBvaW50U3BlY3VsYXIgKz0gc3BlY3VsYXIgKiBwb2ludExpZ2h0Q29sb3JbIGkgXSAqIHBvaW50U3BlY3VsYXJXZWlnaHQgKiBwb2ludERpZmZ1c2VXZWlnaHQgKiBsRGlzdGFuY2U7XFxuI2VuZGlmXFxufVxcbiNlbmRpZlxcbiNpZiBNQVhfU1BPVF9MSUdIVFMgPiAwXFxudmVjMyBzcG90RGlmZnVzZSAgPSB2ZWMzKCAwLjAgKTtcXG52ZWMzIHNwb3RTcGVjdWxhciA9IHZlYzMoIDAuMCApO1xcbmZvciAoIGludCBpID0gMDsgaSA8IE1BWF9TUE9UX0xJR0hUUzsgaSArKyApIHtcXG4jaWZkZWYgUEhPTkdfUEVSX1BJWEVMXFxudmVjNCBsUG9zaXRpb24gPSB2aWV3TWF0cml4ICogdmVjNCggc3BvdExpZ2h0UG9zaXRpb25bIGkgXSwgMS4wICk7XFxudmVjMyBsVmVjdG9yID0gbFBvc2l0aW9uLnh5eiArIHZWaWV3UG9zaXRpb24ueHl6O1xcbmZsb2F0IGxEaXN0YW5jZSA9IDEuMDtcXG5pZiAoIHNwb3RMaWdodERpc3RhbmNlWyBpIF0gPiAwLjAgKVxcbmxEaXN0YW5jZSA9IDEuMCAtIG1pbiggKCBsZW5ndGgoIGxWZWN0b3IgKSAvIHNwb3RMaWdodERpc3RhbmNlWyBpIF0gKSwgMS4wICk7XFxubFZlY3RvciA9IG5vcm1hbGl6ZSggbFZlY3RvciApO1xcbiNlbHNlXFxudmVjMyBsVmVjdG9yID0gbm9ybWFsaXplKCB2U3BvdExpZ2h0WyBpIF0ueHl6ICk7XFxuZmxvYXQgbERpc3RhbmNlID0gdlNwb3RMaWdodFsgaSBdLnc7XFxuI2VuZGlmXFxuZmxvYXQgc3BvdEVmZmVjdCA9IGRvdCggc3BvdExpZ2h0RGlyZWN0aW9uWyBpIF0sIG5vcm1hbGl6ZSggc3BvdExpZ2h0UG9zaXRpb25bIGkgXSAtIHZXb3JsZFBvc2l0aW9uICkgKTtcXG5pZiAoIHNwb3RFZmZlY3QgPiBzcG90TGlnaHRBbmdsZUNvc1sgaSBdICkge1xcbnNwb3RFZmZlY3QgPSBtYXgoIHBvdyggc3BvdEVmZmVjdCwgc3BvdExpZ2h0RXhwb25lbnRbIGkgXSApLCAwLjAgKTtcXG5mbG9hdCBkb3RQcm9kdWN0ID0gZG90KCBub3JtYWwsIGxWZWN0b3IgKTtcXG4jaWZkZWYgV1JBUF9BUk9VTkRcXG5mbG9hdCBzcG90RGlmZnVzZVdlaWdodEZ1bGwgPSBtYXgoIGRvdFByb2R1Y3QsIDAuMCApO1xcbmZsb2F0IHNwb3REaWZmdXNlV2VpZ2h0SGFsZiA9IG1heCggMC41ICogZG90UHJvZHVjdCArIDAuNSwgMC4wICk7XFxudmVjMyBzcG90RGlmZnVzZVdlaWdodCA9IG1peCggdmVjMyAoIHNwb3REaWZmdXNlV2VpZ2h0RnVsbCApLCB2ZWMzKCBzcG90RGlmZnVzZVdlaWdodEhhbGYgKSwgd3JhcFJHQiApO1xcbiNlbHNlXFxuZmxvYXQgc3BvdERpZmZ1c2VXZWlnaHQgPSBtYXgoIGRvdFByb2R1Y3QsIDAuMCApO1xcbiNlbmRpZlxcbnNwb3REaWZmdXNlICs9IGRpZmZ1c2UgKiBzcG90TGlnaHRDb2xvclsgaSBdICogc3BvdERpZmZ1c2VXZWlnaHQgKiBsRGlzdGFuY2UgKiBzcG90RWZmZWN0O1xcbnZlYzMgc3BvdEhhbGZWZWN0b3IgPSBub3JtYWxpemUoIGxWZWN0b3IgKyB2aWV3UG9zaXRpb24gKTtcXG5mbG9hdCBzcG90RG90Tm9ybWFsSGFsZiA9IG1heCggZG90KCBub3JtYWwsIHNwb3RIYWxmVmVjdG9yICksIDAuMCApO1xcbmZsb2F0IHNwb3RTcGVjdWxhcldlaWdodCA9IHNwZWN1bGFyU3RyZW5ndGggKiBtYXgoIHBvdyggc3BvdERvdE5vcm1hbEhhbGYsIHNoaW5pbmVzcyApLCAwLjAgKTtcXG4jaWZkZWYgUEhZU0lDQUxMWV9CQVNFRF9TSEFESU5HXFxuZmxvYXQgc3BlY3VsYXJOb3JtYWxpemF0aW9uID0gKCBzaGluaW5lc3MgKyAyLjAwMDEgKSAvIDguMDtcXG52ZWMzIHNjaGxpY2sgPSBzcGVjdWxhciArIHZlYzMoIDEuMCAtIHNwZWN1bGFyICkgKiBwb3coIDEuMCAtIGRvdCggbFZlY3Rvciwgc3BvdEhhbGZWZWN0b3IgKSwgNS4wICk7XFxuc3BvdFNwZWN1bGFyICs9IHNjaGxpY2sgKiBzcG90TGlnaHRDb2xvclsgaSBdICogc3BvdFNwZWN1bGFyV2VpZ2h0ICogc3BvdERpZmZ1c2VXZWlnaHQgKiBsRGlzdGFuY2UgKiBzcGVjdWxhck5vcm1hbGl6YXRpb24gKiBzcG90RWZmZWN0O1xcbiNlbHNlXFxuc3BvdFNwZWN1bGFyICs9IHNwZWN1bGFyICogc3BvdExpZ2h0Q29sb3JbIGkgXSAqIHNwb3RTcGVjdWxhcldlaWdodCAqIHNwb3REaWZmdXNlV2VpZ2h0ICogbERpc3RhbmNlICogc3BvdEVmZmVjdDtcXG4jZW5kaWZcXG59XFxufVxcbiNlbmRpZlxcbiNpZiBNQVhfRElSX0xJR0hUUyA+IDBcXG52ZWMzIGRpckRpZmZ1c2UgID0gdmVjMyggMC4wICk7XFxudmVjMyBkaXJTcGVjdWxhciA9IHZlYzMoIDAuMCApO1xcbmZvciggaW50IGkgPSAwOyBpIDwgTUFYX0RJUl9MSUdIVFM7IGkgKysgKSB7XFxudmVjNCBsRGlyZWN0aW9uID0gdmlld01hdHJpeCAqIHZlYzQoIGRpcmVjdGlvbmFsTGlnaHREaXJlY3Rpb25bIGkgXSwgMC4wICk7XFxudmVjMyBkaXJWZWN0b3IgPSBub3JtYWxpemUoIGxEaXJlY3Rpb24ueHl6ICk7XFxuZmxvYXQgZG90UHJvZHVjdCA9IGRvdCggbm9ybWFsLCBkaXJWZWN0b3IgKTtcXG4jaWZkZWYgV1JBUF9BUk9VTkRcXG5mbG9hdCBkaXJEaWZmdXNlV2VpZ2h0RnVsbCA9IG1heCggZG90UHJvZHVjdCwgMC4wICk7XFxuZmxvYXQgZGlyRGlmZnVzZVdlaWdodEhhbGYgPSBtYXgoIDAuNSAqIGRvdFByb2R1Y3QgKyAwLjUsIDAuMCApO1xcbnZlYzMgZGlyRGlmZnVzZVdlaWdodCA9IG1peCggdmVjMyggZGlyRGlmZnVzZVdlaWdodEZ1bGwgKSwgdmVjMyggZGlyRGlmZnVzZVdlaWdodEhhbGYgKSwgd3JhcFJHQiApO1xcbiNlbHNlXFxuZmxvYXQgZGlyRGlmZnVzZVdlaWdodCA9IG1heCggZG90UHJvZHVjdCwgMC4wICk7XFxuI2VuZGlmXFxuZGlyRGlmZnVzZSAgKz0gZGlmZnVzZSAqIGRpcmVjdGlvbmFsTGlnaHRDb2xvclsgaSBdICogZGlyRGlmZnVzZVdlaWdodDtcXG52ZWMzIGRpckhhbGZWZWN0b3IgPSBub3JtYWxpemUoIGRpclZlY3RvciArIHZpZXdQb3NpdGlvbiApO1xcbmZsb2F0IGRpckRvdE5vcm1hbEhhbGYgPSBtYXgoIGRvdCggbm9ybWFsLCBkaXJIYWxmVmVjdG9yICksIDAuMCApO1xcbmZsb2F0IGRpclNwZWN1bGFyV2VpZ2h0ID0gc3BlY3VsYXJTdHJlbmd0aCAqIG1heCggcG93KCBkaXJEb3ROb3JtYWxIYWxmLCBzaGluaW5lc3MgKSwgMC4wICk7XFxuI2lmZGVmIFBIWVNJQ0FMTFlfQkFTRURfU0hBRElOR1xcbmZsb2F0IHNwZWN1bGFyTm9ybWFsaXphdGlvbiA9ICggc2hpbmluZXNzICsgMi4wMDAxICkgLyA4LjA7XFxudmVjMyBzY2hsaWNrID0gc3BlY3VsYXIgKyB2ZWMzKCAxLjAgLSBzcGVjdWxhciApICogcG93KCAxLjAgLSBkb3QoIGRpclZlY3RvciwgZGlySGFsZlZlY3RvciApLCA1LjAgKTtcXG5kaXJTcGVjdWxhciArPSBzY2hsaWNrICogZGlyZWN0aW9uYWxMaWdodENvbG9yWyBpIF0gKiBkaXJTcGVjdWxhcldlaWdodCAqIGRpckRpZmZ1c2VXZWlnaHQgKiBzcGVjdWxhck5vcm1hbGl6YXRpb247XFxuI2Vsc2VcXG5kaXJTcGVjdWxhciArPSBzcGVjdWxhciAqIGRpcmVjdGlvbmFsTGlnaHRDb2xvclsgaSBdICogZGlyU3BlY3VsYXJXZWlnaHQgKiBkaXJEaWZmdXNlV2VpZ2h0O1xcbiNlbmRpZlxcbn1cXG4jZW5kaWZcXG4jaWYgTUFYX0hFTUlfTElHSFRTID4gMFxcbnZlYzMgaGVtaURpZmZ1c2UgID0gdmVjMyggMC4wICk7XFxudmVjMyBoZW1pU3BlY3VsYXIgPSB2ZWMzKCAwLjAgKTtcXG5mb3IoIGludCBpID0gMDsgaSA8IE1BWF9IRU1JX0xJR0hUUzsgaSArKyApIHtcXG52ZWM0IGxEaXJlY3Rpb24gPSB2aWV3TWF0cml4ICogdmVjNCggaGVtaXNwaGVyZUxpZ2h0RGlyZWN0aW9uWyBpIF0sIDAuMCApO1xcbnZlYzMgbFZlY3RvciA9IG5vcm1hbGl6ZSggbERpcmVjdGlvbi54eXogKTtcXG5mbG9hdCBkb3RQcm9kdWN0ID0gZG90KCBub3JtYWwsIGxWZWN0b3IgKTtcXG5mbG9hdCBoZW1pRGlmZnVzZVdlaWdodCA9IDAuNSAqIGRvdFByb2R1Y3QgKyAwLjU7XFxudmVjMyBoZW1pQ29sb3IgPSBtaXgoIGhlbWlzcGhlcmVMaWdodEdyb3VuZENvbG9yWyBpIF0sIGhlbWlzcGhlcmVMaWdodFNreUNvbG9yWyBpIF0sIGhlbWlEaWZmdXNlV2VpZ2h0ICk7XFxuaGVtaURpZmZ1c2UgKz0gZGlmZnVzZSAqIGhlbWlDb2xvcjtcXG52ZWMzIGhlbWlIYWxmVmVjdG9yU2t5ID0gbm9ybWFsaXplKCBsVmVjdG9yICsgdmlld1Bvc2l0aW9uICk7XFxuZmxvYXQgaGVtaURvdE5vcm1hbEhhbGZTa3kgPSAwLjUgKiBkb3QoIG5vcm1hbCwgaGVtaUhhbGZWZWN0b3JTa3kgKSArIDAuNTtcXG5mbG9hdCBoZW1pU3BlY3VsYXJXZWlnaHRTa3kgPSBzcGVjdWxhclN0cmVuZ3RoICogbWF4KCBwb3coIGhlbWlEb3ROb3JtYWxIYWxmU2t5LCBzaGluaW5lc3MgKSwgMC4wICk7XFxudmVjMyBsVmVjdG9yR3JvdW5kID0gLWxWZWN0b3I7XFxudmVjMyBoZW1pSGFsZlZlY3Rvckdyb3VuZCA9IG5vcm1hbGl6ZSggbFZlY3Rvckdyb3VuZCArIHZpZXdQb3NpdGlvbiApO1xcbmZsb2F0IGhlbWlEb3ROb3JtYWxIYWxmR3JvdW5kID0gMC41ICogZG90KCBub3JtYWwsIGhlbWlIYWxmVmVjdG9yR3JvdW5kICkgKyAwLjU7XFxuZmxvYXQgaGVtaVNwZWN1bGFyV2VpZ2h0R3JvdW5kID0gc3BlY3VsYXJTdHJlbmd0aCAqIG1heCggcG93KCBoZW1pRG90Tm9ybWFsSGFsZkdyb3VuZCwgc2hpbmluZXNzICksIDAuMCApO1xcbiNpZmRlZiBQSFlTSUNBTExZX0JBU0VEX1NIQURJTkdcXG5mbG9hdCBkb3RQcm9kdWN0R3JvdW5kID0gZG90KCBub3JtYWwsIGxWZWN0b3JHcm91bmQgKTtcXG5mbG9hdCBzcGVjdWxhck5vcm1hbGl6YXRpb24gPSAoIHNoaW5pbmVzcyArIDIuMDAwMSApIC8gOC4wO1xcbnZlYzMgc2NobGlja1NreSA9IHNwZWN1bGFyICsgdmVjMyggMS4wIC0gc3BlY3VsYXIgKSAqIHBvdyggMS4wIC0gZG90KCBsVmVjdG9yLCBoZW1pSGFsZlZlY3RvclNreSApLCA1LjAgKTtcXG52ZWMzIHNjaGxpY2tHcm91bmQgPSBzcGVjdWxhciArIHZlYzMoIDEuMCAtIHNwZWN1bGFyICkgKiBwb3coIDEuMCAtIGRvdCggbFZlY3Rvckdyb3VuZCwgaGVtaUhhbGZWZWN0b3JHcm91bmQgKSwgNS4wICk7XFxuaGVtaVNwZWN1bGFyICs9IGhlbWlDb2xvciAqIHNwZWN1bGFyTm9ybWFsaXphdGlvbiAqICggc2NobGlja1NreSAqIGhlbWlTcGVjdWxhcldlaWdodFNreSAqIG1heCggZG90UHJvZHVjdCwgMC4wICkgKyBzY2hsaWNrR3JvdW5kICogaGVtaVNwZWN1bGFyV2VpZ2h0R3JvdW5kICogbWF4KCBkb3RQcm9kdWN0R3JvdW5kLCAwLjAgKSApO1xcbiNlbHNlXFxuaGVtaVNwZWN1bGFyICs9IHNwZWN1bGFyICogaGVtaUNvbG9yICogKCBoZW1pU3BlY3VsYXJXZWlnaHRTa3kgKyBoZW1pU3BlY3VsYXJXZWlnaHRHcm91bmQgKSAqIGhlbWlEaWZmdXNlV2VpZ2h0O1xcbiNlbmRpZlxcbn1cXG4jZW5kaWZcXG52ZWMzIHRvdGFsRGlmZnVzZSA9IHZlYzMoIDAuMCApO1xcbnZlYzMgdG90YWxTcGVjdWxhciA9IHZlYzMoIDAuMCApO1xcbiNpZiBNQVhfRElSX0xJR0hUUyA+IDBcXG50b3RhbERpZmZ1c2UgKz0gZGlyRGlmZnVzZTtcXG50b3RhbFNwZWN1bGFyICs9IGRpclNwZWN1bGFyO1xcbiNlbmRpZlxcbiNpZiBNQVhfSEVNSV9MSUdIVFMgPiAwXFxudG90YWxEaWZmdXNlICs9IGhlbWlEaWZmdXNlO1xcbnRvdGFsU3BlY3VsYXIgKz0gaGVtaVNwZWN1bGFyO1xcbiNlbmRpZlxcbiNpZiBNQVhfUE9JTlRfTElHSFRTID4gMFxcbnRvdGFsRGlmZnVzZSArPSBwb2ludERpZmZ1c2U7XFxudG90YWxTcGVjdWxhciArPSBwb2ludFNwZWN1bGFyO1xcbiNlbmRpZlxcbiNpZiBNQVhfU1BPVF9MSUdIVFMgPiAwXFxudG90YWxEaWZmdXNlICs9IHNwb3REaWZmdXNlO1xcbnRvdGFsU3BlY3VsYXIgKz0gc3BvdFNwZWN1bGFyO1xcbiNlbmRpZlxcbiNpZmRlZiBNRVRBTFxcbmdsX0ZyYWdDb2xvci54eXogPSBnbF9GcmFnQ29sb3IueHl6ICogKCBlbWlzc2l2ZSArIHRvdGFsRGlmZnVzZSArIGFtYmllbnRMaWdodENvbG9yICogYW1iaWVudCArIHRvdGFsU3BlY3VsYXIgKTtcXG4jZWxzZVxcbmdsX0ZyYWdDb2xvci54eXogPSBnbF9GcmFnQ29sb3IueHl6ICogKCBlbWlzc2l2ZSArIHRvdGFsRGlmZnVzZSArIGFtYmllbnRMaWdodENvbG9yICogYW1iaWVudCApICsgdG90YWxTcGVjdWxhcjtcXG4jZW5kaWZcIixcbmNvbG9yX3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX0NPTE9SXFxudmFyeWluZyB2ZWMzIHZDb2xvcjtcXG4jZW5kaWZcIixjb2xvcl9mcmFnbWVudDpcIiNpZmRlZiBVU0VfQ09MT1JcXG5nbF9GcmFnQ29sb3IgPSBnbF9GcmFnQ29sb3IgKiB2ZWM0KCB2Q29sb3IsIDEuMCApO1xcbiNlbmRpZlwiLGNvbG9yX3BhcnNfdmVydGV4OlwiI2lmZGVmIFVTRV9DT0xPUlxcbnZhcnlpbmcgdmVjMyB2Q29sb3I7XFxuI2VuZGlmXCIsY29sb3JfdmVydGV4OlwiI2lmZGVmIFVTRV9DT0xPUlxcbiNpZmRlZiBHQU1NQV9JTlBVVFxcbnZDb2xvciA9IGNvbG9yICogY29sb3I7XFxuI2Vsc2VcXG52Q29sb3IgPSBjb2xvcjtcXG4jZW5kaWZcXG4jZW5kaWZcIixza2lubmluZ19wYXJzX3ZlcnRleDpcIiNpZmRlZiBVU0VfU0tJTk5JTkdcXG4jaWZkZWYgQk9ORV9URVhUVVJFXFxudW5pZm9ybSBzYW1wbGVyMkQgYm9uZVRleHR1cmU7XFxudW5pZm9ybSBpbnQgYm9uZVRleHR1cmVXaWR0aDtcXG51bmlmb3JtIGludCBib25lVGV4dHVyZUhlaWdodDtcXG5tYXQ0IGdldEJvbmVNYXRyaXgoIGNvbnN0IGluIGZsb2F0IGkgKSB7XFxuZmxvYXQgaiA9IGkgKiA0LjA7XFxuZmxvYXQgeCA9IG1vZCggaiwgZmxvYXQoIGJvbmVUZXh0dXJlV2lkdGggKSApO1xcbmZsb2F0IHkgPSBmbG9vciggaiAvIGZsb2F0KCBib25lVGV4dHVyZVdpZHRoICkgKTtcXG5mbG9hdCBkeCA9IDEuMCAvIGZsb2F0KCBib25lVGV4dHVyZVdpZHRoICk7XFxuZmxvYXQgZHkgPSAxLjAgLyBmbG9hdCggYm9uZVRleHR1cmVIZWlnaHQgKTtcXG55ID0gZHkgKiAoIHkgKyAwLjUgKTtcXG52ZWM0IHYxID0gdGV4dHVyZTJEKCBib25lVGV4dHVyZSwgdmVjMiggZHggKiAoIHggKyAwLjUgKSwgeSApICk7XFxudmVjNCB2MiA9IHRleHR1cmUyRCggYm9uZVRleHR1cmUsIHZlYzIoIGR4ICogKCB4ICsgMS41ICksIHkgKSApO1xcbnZlYzQgdjMgPSB0ZXh0dXJlMkQoIGJvbmVUZXh0dXJlLCB2ZWMyKCBkeCAqICggeCArIDIuNSApLCB5ICkgKTtcXG52ZWM0IHY0ID0gdGV4dHVyZTJEKCBib25lVGV4dHVyZSwgdmVjMiggZHggKiAoIHggKyAzLjUgKSwgeSApICk7XFxubWF0NCBib25lID0gbWF0NCggdjEsIHYyLCB2MywgdjQgKTtcXG5yZXR1cm4gYm9uZTtcXG59XFxuI2Vsc2VcXG51bmlmb3JtIG1hdDQgYm9uZUdsb2JhbE1hdHJpY2VzWyBNQVhfQk9ORVMgXTtcXG5tYXQ0IGdldEJvbmVNYXRyaXgoIGNvbnN0IGluIGZsb2F0IGkgKSB7XFxubWF0NCBib25lID0gYm9uZUdsb2JhbE1hdHJpY2VzWyBpbnQoaSkgXTtcXG5yZXR1cm4gYm9uZTtcXG59XFxuI2VuZGlmXFxuI2VuZGlmXCIsXG5za2luYmFzZV92ZXJ0ZXg6XCIjaWZkZWYgVVNFX1NLSU5OSU5HXFxubWF0NCBib25lTWF0WCA9IGdldEJvbmVNYXRyaXgoIHNraW5JbmRleC54ICk7XFxubWF0NCBib25lTWF0WSA9IGdldEJvbmVNYXRyaXgoIHNraW5JbmRleC55ICk7XFxuI2VuZGlmXCIsc2tpbm5pbmdfdmVydGV4OlwiI2lmZGVmIFVTRV9TS0lOTklOR1xcbiNpZmRlZiBVU0VfTU9SUEhUQVJHRVRTXFxudmVjNCBza2luVmVydGV4ID0gdmVjNCggbW9ycGhlZCwgMS4wICk7XFxuI2Vsc2VcXG52ZWM0IHNraW5WZXJ0ZXggPSB2ZWM0KCBwb3NpdGlvbiwgMS4wICk7XFxuI2VuZGlmXFxudmVjNCBza2lubmVkICA9IGJvbmVNYXRYICogc2tpblZlcnRleCAqIHNraW5XZWlnaHQueDtcXG5za2lubmVkIFxcdCAgKz0gYm9uZU1hdFkgKiBza2luVmVydGV4ICogc2tpbldlaWdodC55O1xcbiNlbmRpZlwiLG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4OlwiI2lmZGVmIFVTRV9NT1JQSFRBUkdFVFNcXG4jaWZuZGVmIFVTRV9NT1JQSE5PUk1BTFNcXG51bmlmb3JtIGZsb2F0IG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgOCBdO1xcbiNlbHNlXFxudW5pZm9ybSBmbG9hdCBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDQgXTtcXG4jZW5kaWZcXG4jZW5kaWZcIixcbm1vcnBodGFyZ2V0X3ZlcnRleDpcIiNpZmRlZiBVU0VfTU9SUEhUQVJHRVRTXFxudmVjMyBtb3JwaGVkID0gdmVjMyggMC4wICk7XFxubW9ycGhlZCArPSAoIG1vcnBoVGFyZ2V0MCAtIHBvc2l0aW9uICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDAgXTtcXG5tb3JwaGVkICs9ICggbW9ycGhUYXJnZXQxIC0gcG9zaXRpb24gKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgMSBdO1xcbm1vcnBoZWQgKz0gKCBtb3JwaFRhcmdldDIgLSBwb3NpdGlvbiApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAyIF07XFxubW9ycGhlZCArPSAoIG1vcnBoVGFyZ2V0MyAtIHBvc2l0aW9uICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDMgXTtcXG4jaWZuZGVmIFVTRV9NT1JQSE5PUk1BTFNcXG5tb3JwaGVkICs9ICggbW9ycGhUYXJnZXQ0IC0gcG9zaXRpb24gKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgNCBdO1xcbm1vcnBoZWQgKz0gKCBtb3JwaFRhcmdldDUgLSBwb3NpdGlvbiApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyA1IF07XFxubW9ycGhlZCArPSAoIG1vcnBoVGFyZ2V0NiAtIHBvc2l0aW9uICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDYgXTtcXG5tb3JwaGVkICs9ICggbW9ycGhUYXJnZXQ3IC0gcG9zaXRpb24gKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgNyBdO1xcbiNlbmRpZlxcbm1vcnBoZWQgKz0gcG9zaXRpb247XFxuI2VuZGlmXCIsXG5kZWZhdWx0X3ZlcnRleDpcInZlYzQgbXZQb3NpdGlvbjtcXG4jaWZkZWYgVVNFX1NLSU5OSU5HXFxubXZQb3NpdGlvbiA9IG1vZGVsVmlld01hdHJpeCAqIHNraW5uZWQ7XFxuI2VuZGlmXFxuI2lmICFkZWZpbmVkKCBVU0VfU0tJTk5JTkcgKSAmJiBkZWZpbmVkKCBVU0VfTU9SUEhUQVJHRVRTIClcXG5tdlBvc2l0aW9uID0gbW9kZWxWaWV3TWF0cml4ICogdmVjNCggbW9ycGhlZCwgMS4wICk7XFxuI2VuZGlmXFxuI2lmICFkZWZpbmVkKCBVU0VfU0tJTk5JTkcgKSAmJiAhIGRlZmluZWQoIFVTRV9NT1JQSFRBUkdFVFMgKVxcbm12UG9zaXRpb24gPSBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KCBwb3NpdGlvbiwgMS4wICk7XFxuI2VuZGlmXFxuZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbXZQb3NpdGlvbjtcIixtb3JwaG5vcm1hbF92ZXJ0ZXg6XCIjaWZkZWYgVVNFX01PUlBITk9STUFMU1xcbnZlYzMgbW9ycGhlZE5vcm1hbCA9IHZlYzMoIDAuMCApO1xcbm1vcnBoZWROb3JtYWwgKz0gICggbW9ycGhOb3JtYWwwIC0gbm9ybWFsICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDAgXTtcXG5tb3JwaGVkTm9ybWFsICs9ICAoIG1vcnBoTm9ybWFsMSAtIG5vcm1hbCApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAxIF07XFxubW9ycGhlZE5vcm1hbCArPSAgKCBtb3JwaE5vcm1hbDIgLSBub3JtYWwgKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgMiBdO1xcbm1vcnBoZWROb3JtYWwgKz0gICggbW9ycGhOb3JtYWwzIC0gbm9ybWFsICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDMgXTtcXG5tb3JwaGVkTm9ybWFsICs9IG5vcm1hbDtcXG4jZW5kaWZcIixcbnNraW5ub3JtYWxfdmVydGV4OlwiI2lmZGVmIFVTRV9TS0lOTklOR1xcbm1hdDQgc2tpbk1hdHJpeCA9IHNraW5XZWlnaHQueCAqIGJvbmVNYXRYO1xcbnNraW5NYXRyaXggXFx0Kz0gc2tpbldlaWdodC55ICogYm9uZU1hdFk7XFxuI2lmZGVmIFVTRV9NT1JQSE5PUk1BTFNcXG52ZWM0IHNraW5uZWROb3JtYWwgPSBza2luTWF0cml4ICogdmVjNCggbW9ycGhlZE5vcm1hbCwgMC4wICk7XFxuI2Vsc2VcXG52ZWM0IHNraW5uZWROb3JtYWwgPSBza2luTWF0cml4ICogdmVjNCggbm9ybWFsLCAwLjAgKTtcXG4jZW5kaWZcXG4jZW5kaWZcIixkZWZhdWx0bm9ybWFsX3ZlcnRleDpcInZlYzMgb2JqZWN0Tm9ybWFsO1xcbiNpZmRlZiBVU0VfU0tJTk5JTkdcXG5vYmplY3ROb3JtYWwgPSBza2lubmVkTm9ybWFsLnh5ejtcXG4jZW5kaWZcXG4jaWYgIWRlZmluZWQoIFVTRV9TS0lOTklORyApICYmIGRlZmluZWQoIFVTRV9NT1JQSE5PUk1BTFMgKVxcbm9iamVjdE5vcm1hbCA9IG1vcnBoZWROb3JtYWw7XFxuI2VuZGlmXFxuI2lmICFkZWZpbmVkKCBVU0VfU0tJTk5JTkcgKSAmJiAhIGRlZmluZWQoIFVTRV9NT1JQSE5PUk1BTFMgKVxcbm9iamVjdE5vcm1hbCA9IG5vcm1hbDtcXG4jZW5kaWZcXG4jaWZkZWYgRkxJUF9TSURFRFxcbm9iamVjdE5vcm1hbCA9IC1vYmplY3ROb3JtYWw7XFxuI2VuZGlmXFxudmVjMyB0cmFuc2Zvcm1lZE5vcm1hbCA9IG5vcm1hbE1hdHJpeCAqIG9iamVjdE5vcm1hbDtcIixcbnNoYWRvd21hcF9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9TSEFET1dNQVBcXG51bmlmb3JtIHNhbXBsZXIyRCBzaGFkb3dNYXBbIE1BWF9TSEFET1dTIF07XFxudW5pZm9ybSB2ZWMyIHNoYWRvd01hcFNpemVbIE1BWF9TSEFET1dTIF07XFxudW5pZm9ybSBmbG9hdCBzaGFkb3dEYXJrbmVzc1sgTUFYX1NIQURPV1MgXTtcXG51bmlmb3JtIGZsb2F0IHNoYWRvd0JpYXNbIE1BWF9TSEFET1dTIF07XFxudmFyeWluZyB2ZWM0IHZTaGFkb3dDb29yZFsgTUFYX1NIQURPV1MgXTtcXG5mbG9hdCB1bnBhY2tEZXB0aCggY29uc3QgaW4gdmVjNCByZ2JhX2RlcHRoICkge1xcbmNvbnN0IHZlYzQgYml0X3NoaWZ0ID0gdmVjNCggMS4wIC8gKCAyNTYuMCAqIDI1Ni4wICogMjU2LjAgKSwgMS4wIC8gKCAyNTYuMCAqIDI1Ni4wICksIDEuMCAvIDI1Ni4wLCAxLjAgKTtcXG5mbG9hdCBkZXB0aCA9IGRvdCggcmdiYV9kZXB0aCwgYml0X3NoaWZ0ICk7XFxucmV0dXJuIGRlcHRoO1xcbn1cXG4jZW5kaWZcIixzaGFkb3dtYXBfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX1NIQURPV01BUFxcbiNpZmRlZiBTSEFET1dNQVBfREVCVUdcXG52ZWMzIGZydXN0dW1Db2xvcnNbM107XFxuZnJ1c3R1bUNvbG9yc1swXSA9IHZlYzMoIDEuMCwgMC41LCAwLjAgKTtcXG5mcnVzdHVtQ29sb3JzWzFdID0gdmVjMyggMC4wLCAxLjAsIDAuOCApO1xcbmZydXN0dW1Db2xvcnNbMl0gPSB2ZWMzKCAwLjAsIDAuNSwgMS4wICk7XFxuI2VuZGlmXFxuI2lmZGVmIFNIQURPV01BUF9DQVNDQURFXFxuaW50IGluRnJ1c3R1bUNvdW50ID0gMDtcXG4jZW5kaWZcXG5mbG9hdCBmRGVwdGg7XFxudmVjMyBzaGFkb3dDb2xvciA9IHZlYzMoIDEuMCApO1xcbmZvciggaW50IGkgPSAwOyBpIDwgTUFYX1NIQURPV1M7IGkgKysgKSB7XFxudmVjMyBzaGFkb3dDb29yZCA9IHZTaGFkb3dDb29yZFsgaSBdLnh5eiAvIHZTaGFkb3dDb29yZFsgaSBdLnc7XFxuYnZlYzQgaW5GcnVzdHVtVmVjID0gYnZlYzQgKCBzaGFkb3dDb29yZC54ID49IDAuMCwgc2hhZG93Q29vcmQueCA8PSAxLjAsIHNoYWRvd0Nvb3JkLnkgPj0gMC4wLCBzaGFkb3dDb29yZC55IDw9IDEuMCApO1xcbmJvb2wgaW5GcnVzdHVtID0gYWxsKCBpbkZydXN0dW1WZWMgKTtcXG4jaWZkZWYgU0hBRE9XTUFQX0NBU0NBREVcXG5pbkZydXN0dW1Db3VudCArPSBpbnQoIGluRnJ1c3R1bSApO1xcbmJ2ZWMzIGZydXN0dW1UZXN0VmVjID0gYnZlYzMoIGluRnJ1c3R1bSwgaW5GcnVzdHVtQ291bnQgPT0gMSwgc2hhZG93Q29vcmQueiA8PSAxLjAgKTtcXG4jZWxzZVxcbmJ2ZWMyIGZydXN0dW1UZXN0VmVjID0gYnZlYzIoIGluRnJ1c3R1bSwgc2hhZG93Q29vcmQueiA8PSAxLjAgKTtcXG4jZW5kaWZcXG5ib29sIGZydXN0dW1UZXN0ID0gYWxsKCBmcnVzdHVtVGVzdFZlYyApO1xcbmlmICggZnJ1c3R1bVRlc3QgKSB7XFxuc2hhZG93Q29vcmQueiArPSBzaGFkb3dCaWFzWyBpIF07XFxuI2lmIGRlZmluZWQoIFNIQURPV01BUF9UWVBFX1BDRiApXFxuZmxvYXQgc2hhZG93ID0gMC4wO1xcbmNvbnN0IGZsb2F0IHNoYWRvd0RlbHRhID0gMS4wIC8gOS4wO1xcbmZsb2F0IHhQaXhlbE9mZnNldCA9IDEuMCAvIHNoYWRvd01hcFNpemVbIGkgXS54O1xcbmZsb2F0IHlQaXhlbE9mZnNldCA9IDEuMCAvIHNoYWRvd01hcFNpemVbIGkgXS55O1xcbmZsb2F0IGR4MCA9IC0xLjI1ICogeFBpeGVsT2Zmc2V0O1xcbmZsb2F0IGR5MCA9IC0xLjI1ICogeVBpeGVsT2Zmc2V0O1xcbmZsb2F0IGR4MSA9IDEuMjUgKiB4UGl4ZWxPZmZzZXQ7XFxuZmxvYXQgZHkxID0gMS4yNSAqIHlQaXhlbE9mZnNldDtcXG5mRGVwdGggPSB1bnBhY2tEZXB0aCggdGV4dHVyZTJEKCBzaGFkb3dNYXBbIGkgXSwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDAsIGR5MCApICkgKTtcXG5pZiAoIGZEZXB0aCA8IHNoYWRvd0Nvb3JkLnogKSBzaGFkb3cgKz0gc2hhZG93RGVsdGE7XFxuZkRlcHRoID0gdW5wYWNrRGVwdGgoIHRleHR1cmUyRCggc2hhZG93TWFwWyBpIF0sIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggMC4wLCBkeTAgKSApICk7XFxuaWYgKCBmRGVwdGggPCBzaGFkb3dDb29yZC56ICkgc2hhZG93ICs9IHNoYWRvd0RlbHRhO1xcbmZEZXB0aCA9IHVucGFja0RlcHRoKCB0ZXh0dXJlMkQoIHNoYWRvd01hcFsgaSBdLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MSwgZHkwICkgKSApO1xcbmlmICggZkRlcHRoIDwgc2hhZG93Q29vcmQueiApIHNoYWRvdyArPSBzaGFkb3dEZWx0YTtcXG5mRGVwdGggPSB1bnBhY2tEZXB0aCggdGV4dHVyZTJEKCBzaGFkb3dNYXBbIGkgXSwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDAsIDAuMCApICkgKTtcXG5pZiAoIGZEZXB0aCA8IHNoYWRvd0Nvb3JkLnogKSBzaGFkb3cgKz0gc2hhZG93RGVsdGE7XFxuZkRlcHRoID0gdW5wYWNrRGVwdGgoIHRleHR1cmUyRCggc2hhZG93TWFwWyBpIF0sIHNoYWRvd0Nvb3JkLnh5ICkgKTtcXG5pZiAoIGZEZXB0aCA8IHNoYWRvd0Nvb3JkLnogKSBzaGFkb3cgKz0gc2hhZG93RGVsdGE7XFxuZkRlcHRoID0gdW5wYWNrRGVwdGgoIHRleHR1cmUyRCggc2hhZG93TWFwWyBpIF0sIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgxLCAwLjAgKSApICk7XFxuaWYgKCBmRGVwdGggPCBzaGFkb3dDb29yZC56ICkgc2hhZG93ICs9IHNoYWRvd0RlbHRhO1xcbmZEZXB0aCA9IHVucGFja0RlcHRoKCB0ZXh0dXJlMkQoIHNoYWRvd01hcFsgaSBdLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MCwgZHkxICkgKSApO1xcbmlmICggZkRlcHRoIDwgc2hhZG93Q29vcmQueiApIHNoYWRvdyArPSBzaGFkb3dEZWx0YTtcXG5mRGVwdGggPSB1bnBhY2tEZXB0aCggdGV4dHVyZTJEKCBzaGFkb3dNYXBbIGkgXSwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCAwLjAsIGR5MSApICkgKTtcXG5pZiAoIGZEZXB0aCA8IHNoYWRvd0Nvb3JkLnogKSBzaGFkb3cgKz0gc2hhZG93RGVsdGE7XFxuZkRlcHRoID0gdW5wYWNrRGVwdGgoIHRleHR1cmUyRCggc2hhZG93TWFwWyBpIF0sIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgxLCBkeTEgKSApICk7XFxuaWYgKCBmRGVwdGggPCBzaGFkb3dDb29yZC56ICkgc2hhZG93ICs9IHNoYWRvd0RlbHRhO1xcbnNoYWRvd0NvbG9yID0gc2hhZG93Q29sb3IgKiB2ZWMzKCAoIDEuMCAtIHNoYWRvd0RhcmtuZXNzWyBpIF0gKiBzaGFkb3cgKSApO1xcbiNlbGlmIGRlZmluZWQoIFNIQURPV01BUF9UWVBFX1BDRl9TT0ZUIClcXG5mbG9hdCBzaGFkb3cgPSAwLjA7XFxuZmxvYXQgeFBpeGVsT2Zmc2V0ID0gMS4wIC8gc2hhZG93TWFwU2l6ZVsgaSBdLng7XFxuZmxvYXQgeVBpeGVsT2Zmc2V0ID0gMS4wIC8gc2hhZG93TWFwU2l6ZVsgaSBdLnk7XFxuZmxvYXQgZHgwID0gLTEuMCAqIHhQaXhlbE9mZnNldDtcXG5mbG9hdCBkeTAgPSAtMS4wICogeVBpeGVsT2Zmc2V0O1xcbmZsb2F0IGR4MSA9IDEuMCAqIHhQaXhlbE9mZnNldDtcXG5mbG9hdCBkeTEgPSAxLjAgKiB5UGl4ZWxPZmZzZXQ7XFxubWF0MyBzaGFkb3dLZXJuZWw7XFxubWF0MyBkZXB0aEtlcm5lbDtcXG5kZXB0aEtlcm5lbFswXVswXSA9IHVucGFja0RlcHRoKCB0ZXh0dXJlMkQoIHNoYWRvd01hcFsgaSBdLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MCwgZHkwICkgKSApO1xcbmRlcHRoS2VybmVsWzBdWzFdID0gdW5wYWNrRGVwdGgoIHRleHR1cmUyRCggc2hhZG93TWFwWyBpIF0sIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgwLCAwLjAgKSApICk7XFxuZGVwdGhLZXJuZWxbMF1bMl0gPSB1bnBhY2tEZXB0aCggdGV4dHVyZTJEKCBzaGFkb3dNYXBbIGkgXSwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDAsIGR5MSApICkgKTtcXG5kZXB0aEtlcm5lbFsxXVswXSA9IHVucGFja0RlcHRoKCB0ZXh0dXJlMkQoIHNoYWRvd01hcFsgaSBdLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIDAuMCwgZHkwICkgKSApO1xcbmRlcHRoS2VybmVsWzFdWzFdID0gdW5wYWNrRGVwdGgoIHRleHR1cmUyRCggc2hhZG93TWFwWyBpIF0sIHNoYWRvd0Nvb3JkLnh5ICkgKTtcXG5kZXB0aEtlcm5lbFsxXVsyXSA9IHVucGFja0RlcHRoKCB0ZXh0dXJlMkQoIHNoYWRvd01hcFsgaSBdLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIDAuMCwgZHkxICkgKSApO1xcbmRlcHRoS2VybmVsWzJdWzBdID0gdW5wYWNrRGVwdGgoIHRleHR1cmUyRCggc2hhZG93TWFwWyBpIF0sIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgxLCBkeTAgKSApICk7XFxuZGVwdGhLZXJuZWxbMl1bMV0gPSB1bnBhY2tEZXB0aCggdGV4dHVyZTJEKCBzaGFkb3dNYXBbIGkgXSwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDEsIDAuMCApICkgKTtcXG5kZXB0aEtlcm5lbFsyXVsyXSA9IHVucGFja0RlcHRoKCB0ZXh0dXJlMkQoIHNoYWRvd01hcFsgaSBdLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MSwgZHkxICkgKSApO1xcbnZlYzMgc2hhZG93WiA9IHZlYzMoIHNoYWRvd0Nvb3JkLnogKTtcXG5zaGFkb3dLZXJuZWxbMF0gPSB2ZWMzKGxlc3NUaGFuKGRlcHRoS2VybmVsWzBdLCBzaGFkb3daICkpO1xcbnNoYWRvd0tlcm5lbFswXSAqPSB2ZWMzKDAuMjUpO1xcbnNoYWRvd0tlcm5lbFsxXSA9IHZlYzMobGVzc1RoYW4oZGVwdGhLZXJuZWxbMV0sIHNoYWRvd1ogKSk7XFxuc2hhZG93S2VybmVsWzFdICo9IHZlYzMoMC4yNSk7XFxuc2hhZG93S2VybmVsWzJdID0gdmVjMyhsZXNzVGhhbihkZXB0aEtlcm5lbFsyXSwgc2hhZG93WiApKTtcXG5zaGFkb3dLZXJuZWxbMl0gKj0gdmVjMygwLjI1KTtcXG52ZWMyIGZyYWN0aW9uYWxDb29yZCA9IDEuMCAtIGZyYWN0KCBzaGFkb3dDb29yZC54eSAqIHNoYWRvd01hcFNpemVbaV0ueHkgKTtcXG5zaGFkb3dLZXJuZWxbMF0gPSBtaXgoIHNoYWRvd0tlcm5lbFsxXSwgc2hhZG93S2VybmVsWzBdLCBmcmFjdGlvbmFsQ29vcmQueCApO1xcbnNoYWRvd0tlcm5lbFsxXSA9IG1peCggc2hhZG93S2VybmVsWzJdLCBzaGFkb3dLZXJuZWxbMV0sIGZyYWN0aW9uYWxDb29yZC54ICk7XFxudmVjNCBzaGFkb3dWYWx1ZXM7XFxuc2hhZG93VmFsdWVzLnggPSBtaXgoIHNoYWRvd0tlcm5lbFswXVsxXSwgc2hhZG93S2VybmVsWzBdWzBdLCBmcmFjdGlvbmFsQ29vcmQueSApO1xcbnNoYWRvd1ZhbHVlcy55ID0gbWl4KCBzaGFkb3dLZXJuZWxbMF1bMl0sIHNoYWRvd0tlcm5lbFswXVsxXSwgZnJhY3Rpb25hbENvb3JkLnkgKTtcXG5zaGFkb3dWYWx1ZXMueiA9IG1peCggc2hhZG93S2VybmVsWzFdWzFdLCBzaGFkb3dLZXJuZWxbMV1bMF0sIGZyYWN0aW9uYWxDb29yZC55ICk7XFxuc2hhZG93VmFsdWVzLncgPSBtaXgoIHNoYWRvd0tlcm5lbFsxXVsyXSwgc2hhZG93S2VybmVsWzFdWzFdLCBmcmFjdGlvbmFsQ29vcmQueSApO1xcbnNoYWRvdyA9IGRvdCggc2hhZG93VmFsdWVzLCB2ZWM0KCAxLjAgKSApO1xcbnNoYWRvd0NvbG9yID0gc2hhZG93Q29sb3IgKiB2ZWMzKCAoIDEuMCAtIHNoYWRvd0RhcmtuZXNzWyBpIF0gKiBzaGFkb3cgKSApO1xcbiNlbHNlXFxudmVjNCByZ2JhRGVwdGggPSB0ZXh0dXJlMkQoIHNoYWRvd01hcFsgaSBdLCBzaGFkb3dDb29yZC54eSApO1xcbmZsb2F0IGZEZXB0aCA9IHVucGFja0RlcHRoKCByZ2JhRGVwdGggKTtcXG5pZiAoIGZEZXB0aCA8IHNoYWRvd0Nvb3JkLnogKVxcbnNoYWRvd0NvbG9yID0gc2hhZG93Q29sb3IgKiB2ZWMzKCAxLjAgLSBzaGFkb3dEYXJrbmVzc1sgaSBdICk7XFxuI2VuZGlmXFxufVxcbiNpZmRlZiBTSEFET1dNQVBfREVCVUdcXG4jaWZkZWYgU0hBRE9XTUFQX0NBU0NBREVcXG5pZiAoIGluRnJ1c3R1bSAmJiBpbkZydXN0dW1Db3VudCA9PSAxICkgZ2xfRnJhZ0NvbG9yLnh5eiAqPSBmcnVzdHVtQ29sb3JzWyBpIF07XFxuI2Vsc2VcXG5pZiAoIGluRnJ1c3R1bSApIGdsX0ZyYWdDb2xvci54eXogKj0gZnJ1c3R1bUNvbG9yc1sgaSBdO1xcbiNlbmRpZlxcbiNlbmRpZlxcbn1cXG4jaWZkZWYgR0FNTUFfT1VUUFVUXFxuc2hhZG93Q29sb3IgKj0gc2hhZG93Q29sb3I7XFxuI2VuZGlmXFxuZ2xfRnJhZ0NvbG9yLnh5eiA9IGdsX0ZyYWdDb2xvci54eXogKiBzaGFkb3dDb2xvcjtcXG4jZW5kaWZcIixcbnNoYWRvd21hcF9wYXJzX3ZlcnRleDpcIiNpZmRlZiBVU0VfU0hBRE9XTUFQXFxudmFyeWluZyB2ZWM0IHZTaGFkb3dDb29yZFsgTUFYX1NIQURPV1MgXTtcXG51bmlmb3JtIG1hdDQgc2hhZG93TWF0cml4WyBNQVhfU0hBRE9XUyBdO1xcbiNlbmRpZlwiLHNoYWRvd21hcF92ZXJ0ZXg6XCIjaWZkZWYgVVNFX1NIQURPV01BUFxcbmZvciggaW50IGkgPSAwOyBpIDwgTUFYX1NIQURPV1M7IGkgKysgKSB7XFxudlNoYWRvd0Nvb3JkWyBpIF0gPSBzaGFkb3dNYXRyaXhbIGkgXSAqIHdvcmxkUG9zaXRpb247XFxufVxcbiNlbmRpZlwiLGFscGhhdGVzdF9mcmFnbWVudDpcIiNpZmRlZiBBTFBIQVRFU1RcXG5pZiAoIGdsX0ZyYWdDb2xvci5hIDwgQUxQSEFURVNUICkgZGlzY2FyZDtcXG4jZW5kaWZcIixsaW5lYXJfdG9fZ2FtbWFfZnJhZ21lbnQ6XCIjaWZkZWYgR0FNTUFfT1VUUFVUXFxuZ2xfRnJhZ0NvbG9yLnh5eiA9IHNxcnQoIGdsX0ZyYWdDb2xvci54eXogKTtcXG4jZW5kaWZcIn07VEhSRUUuVW5pZm9ybXNVdGlscz17bWVyZ2U6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGU9e307Zm9yKGI9MDtiPGEubGVuZ3RoO2IrKylmb3IoYyBpbiBkPXRoaXMuY2xvbmUoYVtiXSksZCllW2NdPWRbY107cmV0dXJuIGV9LGNsb25lOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlPXt9O2ZvcihiIGluIGEpZm9yKGMgaW4gZVtiXT17fSxhW2JdKWQ9YVtiXVtjXSxlW2JdW2NdPWQgaW5zdGFuY2VvZiBUSFJFRS5Db2xvcnx8ZCBpbnN0YW5jZW9mIFRIUkVFLlZlY3RvcjJ8fGQgaW5zdGFuY2VvZiBUSFJFRS5WZWN0b3IzfHxkIGluc3RhbmNlb2YgVEhSRUUuVmVjdG9yNHx8ZCBpbnN0YW5jZW9mIFRIUkVFLk1hdHJpeDR8fGQgaW5zdGFuY2VvZiBUSFJFRS5UZXh0dXJlP2QuY2xvbmUoKTpkIGluc3RhbmNlb2YgQXJyYXk/ZC5zbGljZSgpOmQ7cmV0dXJuIGV9fTtUSFJFRS5Vbmlmb3Jtc0xpYj17Y29tbW9uOntkaWZmdXNlOnt0eXBlOlwiY1wiLHZhbHVlOm5ldyBUSFJFRS5Db2xvcigxNTY1ODczNCl9LG9wYWNpdHk6e3R5cGU6XCJmXCIsdmFsdWU6MX0sbWFwOnt0eXBlOlwidFwiLHZhbHVlOm51bGx9LG9mZnNldFJlcGVhdDp7dHlwZTpcInY0XCIsdmFsdWU6bmV3IFRIUkVFLlZlY3RvcjQoMCwwLDEsMSl9LGxpZ2h0TWFwOnt0eXBlOlwidFwiLHZhbHVlOm51bGx9LHNwZWN1bGFyTWFwOnt0eXBlOlwidFwiLHZhbHVlOm51bGx9LGVudk1hcDp7dHlwZTpcInRcIix2YWx1ZTpudWxsfSxmbGlwRW52TWFwOnt0eXBlOlwiZlwiLHZhbHVlOi0xfSx1c2VSZWZyYWN0Ont0eXBlOlwiaVwiLHZhbHVlOjB9LHJlZmxlY3Rpdml0eTp7dHlwZTpcImZcIix2YWx1ZToxfSxyZWZyYWN0aW9uUmF0aW86e3R5cGU6XCJmXCIsdmFsdWU6MC45OH0sY29tYmluZTp7dHlwZTpcImlcIix2YWx1ZTowfSxtb3JwaFRhcmdldEluZmx1ZW5jZXM6e3R5cGU6XCJmXCIsdmFsdWU6MH19LGJ1bXA6e2J1bXBNYXA6e3R5cGU6XCJ0XCIsXG52YWx1ZTpudWxsfSxidW1wU2NhbGU6e3R5cGU6XCJmXCIsdmFsdWU6MX19LG5vcm1hbG1hcDp7bm9ybWFsTWFwOnt0eXBlOlwidFwiLHZhbHVlOm51bGx9LG5vcm1hbFNjYWxlOnt0eXBlOlwidjJcIix2YWx1ZTpuZXcgVEhSRUUuVmVjdG9yMigxLDEpfX0sZm9nOntmb2dEZW5zaXR5Ont0eXBlOlwiZlwiLHZhbHVlOjIuNUUtNH0sZm9nTmVhcjp7dHlwZTpcImZcIix2YWx1ZToxfSxmb2dGYXI6e3R5cGU6XCJmXCIsdmFsdWU6MkUzfSxmb2dDb2xvcjp7dHlwZTpcImNcIix2YWx1ZTpuZXcgVEhSRUUuQ29sb3IoMTY3NzcyMTUpfX0sbGlnaHRzOnthbWJpZW50TGlnaHRDb2xvcjp7dHlwZTpcImZ2XCIsdmFsdWU6W119LGRpcmVjdGlvbmFsTGlnaHREaXJlY3Rpb246e3R5cGU6XCJmdlwiLHZhbHVlOltdfSxkaXJlY3Rpb25hbExpZ2h0Q29sb3I6e3R5cGU6XCJmdlwiLHZhbHVlOltdfSxoZW1pc3BoZXJlTGlnaHREaXJlY3Rpb246e3R5cGU6XCJmdlwiLHZhbHVlOltdfSxoZW1pc3BoZXJlTGlnaHRTa3lDb2xvcjp7dHlwZTpcImZ2XCIsXG52YWx1ZTpbXX0saGVtaXNwaGVyZUxpZ2h0R3JvdW5kQ29sb3I6e3R5cGU6XCJmdlwiLHZhbHVlOltdfSxwb2ludExpZ2h0Q29sb3I6e3R5cGU6XCJmdlwiLHZhbHVlOltdfSxwb2ludExpZ2h0UG9zaXRpb246e3R5cGU6XCJmdlwiLHZhbHVlOltdfSxwb2ludExpZ2h0RGlzdGFuY2U6e3R5cGU6XCJmdjFcIix2YWx1ZTpbXX0sc3BvdExpZ2h0Q29sb3I6e3R5cGU6XCJmdlwiLHZhbHVlOltdfSxzcG90TGlnaHRQb3NpdGlvbjp7dHlwZTpcImZ2XCIsdmFsdWU6W119LHNwb3RMaWdodERpcmVjdGlvbjp7dHlwZTpcImZ2XCIsdmFsdWU6W119LHNwb3RMaWdodERpc3RhbmNlOnt0eXBlOlwiZnYxXCIsdmFsdWU6W119LHNwb3RMaWdodEFuZ2xlQ29zOnt0eXBlOlwiZnYxXCIsdmFsdWU6W119LHNwb3RMaWdodEV4cG9uZW50Ont0eXBlOlwiZnYxXCIsdmFsdWU6W119fSxwYXJ0aWNsZTp7cHNDb2xvcjp7dHlwZTpcImNcIix2YWx1ZTpuZXcgVEhSRUUuQ29sb3IoMTU2NTg3MzQpfSxvcGFjaXR5Ont0eXBlOlwiZlwiLHZhbHVlOjF9LHNpemU6e3R5cGU6XCJmXCIsXG52YWx1ZToxfSxzY2FsZTp7dHlwZTpcImZcIix2YWx1ZToxfSxtYXA6e3R5cGU6XCJ0XCIsdmFsdWU6bnVsbH0sZm9nRGVuc2l0eTp7dHlwZTpcImZcIix2YWx1ZToyLjVFLTR9LGZvZ05lYXI6e3R5cGU6XCJmXCIsdmFsdWU6MX0sZm9nRmFyOnt0eXBlOlwiZlwiLHZhbHVlOjJFM30sZm9nQ29sb3I6e3R5cGU6XCJjXCIsdmFsdWU6bmV3IFRIUkVFLkNvbG9yKDE2Nzc3MjE1KX19LHNoYWRvd21hcDp7c2hhZG93TWFwOnt0eXBlOlwidHZcIix2YWx1ZTpbXX0sc2hhZG93TWFwU2l6ZTp7dHlwZTpcInYydlwiLHZhbHVlOltdfSxzaGFkb3dCaWFzOnt0eXBlOlwiZnYxXCIsdmFsdWU6W119LHNoYWRvd0RhcmtuZXNzOnt0eXBlOlwiZnYxXCIsdmFsdWU6W119LHNoYWRvd01hdHJpeDp7dHlwZTpcIm00dlwiLHZhbHVlOltdfX19O1RIUkVFLlNoYWRlckxpYj17YmFzaWM6e3VuaWZvcm1zOlRIUkVFLlVuaWZvcm1zVXRpbHMubWVyZ2UoW1RIUkVFLlVuaWZvcm1zTGliLmNvbW1vbixUSFJFRS5Vbmlmb3Jtc0xpYi5mb2csVEhSRUUuVW5pZm9ybXNMaWIuc2hhZG93bWFwXSksdmVydGV4U2hhZGVyOltUSFJFRS5TaGFkZXJDaHVuay5tYXBfcGFyc192ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsubGlnaHRtYXBfcGFyc192ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuZW52bWFwX3BhcnNfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLmNvbG9yX3BhcnNfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLm1vcnBodGFyZ2V0X3BhcnNfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLnNraW5uaW5nX3BhcnNfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLnNoYWRvd21hcF9wYXJzX3ZlcnRleCxcInZvaWQgbWFpbigpIHtcIixUSFJFRS5TaGFkZXJDaHVuay5tYXBfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLmxpZ2h0bWFwX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5jb2xvcl92ZXJ0ZXgsXG5USFJFRS5TaGFkZXJDaHVuay5za2luYmFzZV92ZXJ0ZXgsXCIjaWZkZWYgVVNFX0VOVk1BUFwiLFRIUkVFLlNoYWRlckNodW5rLm1vcnBobm9ybWFsX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5za2lubm9ybWFsX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5kZWZhdWx0bm9ybWFsX3ZlcnRleCxcIiNlbmRpZlwiLFRIUkVFLlNoYWRlckNodW5rLm1vcnBodGFyZ2V0X3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5za2lubmluZ192ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuZGVmYXVsdF92ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsud29ybGRwb3NfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLmVudm1hcF92ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuc2hhZG93bWFwX3ZlcnRleCxcIn1cIl0uam9pbihcIlxcblwiKSxmcmFnbWVudFNoYWRlcjpbXCJ1bmlmb3JtIHZlYzMgZGlmZnVzZTtcXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XCIsVEhSRUUuU2hhZGVyQ2h1bmsuY29sb3JfcGFyc19mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5tYXBfcGFyc19mcmFnbWVudCxcblRIUkVFLlNoYWRlckNodW5rLmxpZ2h0bWFwX3BhcnNfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsuZW52bWFwX3BhcnNfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsuZm9nX3BhcnNfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsuc2hhZG93bWFwX3BhcnNfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsuc3BlY3VsYXJtYXBfcGFyc19mcmFnbWVudCxcInZvaWQgbWFpbigpIHtcXG5nbF9GcmFnQ29sb3IgPSB2ZWM0KCBkaWZmdXNlLCBvcGFjaXR5ICk7XCIsVEhSRUUuU2hhZGVyQ2h1bmsubWFwX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLmFscGhhdGVzdF9mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5zcGVjdWxhcm1hcF9mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5saWdodG1hcF9mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5jb2xvcl9mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5lbnZtYXBfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsuc2hhZG93bWFwX2ZyYWdtZW50LFxuVEhSRUUuU2hhZGVyQ2h1bmsubGluZWFyX3RvX2dhbW1hX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLmZvZ19mcmFnbWVudCxcIn1cIl0uam9pbihcIlxcblwiKX0sbGFtYmVydDp7dW5pZm9ybXM6VEhSRUUuVW5pZm9ybXNVdGlscy5tZXJnZShbVEhSRUUuVW5pZm9ybXNMaWIuY29tbW9uLFRIUkVFLlVuaWZvcm1zTGliLmZvZyxUSFJFRS5Vbmlmb3Jtc0xpYi5saWdodHMsVEhSRUUuVW5pZm9ybXNMaWIuc2hhZG93bWFwLHthbWJpZW50Ont0eXBlOlwiY1wiLHZhbHVlOm5ldyBUSFJFRS5Db2xvcigxNjc3NzIxNSl9LGVtaXNzaXZlOnt0eXBlOlwiY1wiLHZhbHVlOm5ldyBUSFJFRS5Db2xvcigwKX0sd3JhcFJHQjp7dHlwZTpcInYzXCIsdmFsdWU6bmV3IFRIUkVFLlZlY3RvcjMoMSwxLDEpfX1dKSx2ZXJ0ZXhTaGFkZXI6W1wiI2RlZmluZSBMQU1CRVJUXFxudmFyeWluZyB2ZWMzIHZMaWdodEZyb250O1xcbiNpZmRlZiBET1VCTEVfU0lERURcXG52YXJ5aW5nIHZlYzMgdkxpZ2h0QmFjaztcXG4jZW5kaWZcIixcblRIUkVFLlNoYWRlckNodW5rLm1hcF9wYXJzX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5saWdodG1hcF9wYXJzX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5lbnZtYXBfcGFyc192ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsubGlnaHRzX2xhbWJlcnRfcGFyc192ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuY29sb3JfcGFyc192ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsubW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuc2tpbm5pbmdfcGFyc192ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuc2hhZG93bWFwX3BhcnNfdmVydGV4LFwidm9pZCBtYWluKCkge1wiLFRIUkVFLlNoYWRlckNodW5rLm1hcF92ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsubGlnaHRtYXBfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLmNvbG9yX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5tb3JwaG5vcm1hbF92ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuc2tpbmJhc2VfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLnNraW5ub3JtYWxfdmVydGV4LFxuVEhSRUUuU2hhZGVyQ2h1bmsuZGVmYXVsdG5vcm1hbF92ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsubW9ycGh0YXJnZXRfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLnNraW5uaW5nX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5kZWZhdWx0X3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay53b3JsZHBvc192ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuZW52bWFwX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5saWdodHNfbGFtYmVydF92ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuc2hhZG93bWFwX3ZlcnRleCxcIn1cIl0uam9pbihcIlxcblwiKSxmcmFnbWVudFNoYWRlcjpbXCJ1bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxudmFyeWluZyB2ZWMzIHZMaWdodEZyb250O1xcbiNpZmRlZiBET1VCTEVfU0lERURcXG52YXJ5aW5nIHZlYzMgdkxpZ2h0QmFjaztcXG4jZW5kaWZcIixUSFJFRS5TaGFkZXJDaHVuay5jb2xvcl9wYXJzX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLm1hcF9wYXJzX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLmxpZ2h0bWFwX3BhcnNfZnJhZ21lbnQsXG5USFJFRS5TaGFkZXJDaHVuay5lbnZtYXBfcGFyc19mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5mb2dfcGFyc19mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5zaGFkb3dtYXBfcGFyc19mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5zcGVjdWxhcm1hcF9wYXJzX2ZyYWdtZW50LFwidm9pZCBtYWluKCkge1xcbmdsX0ZyYWdDb2xvciA9IHZlYzQoIHZlYzMgKCAxLjAgKSwgb3BhY2l0eSApO1wiLFRIUkVFLlNoYWRlckNodW5rLm1hcF9mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5hbHBoYXRlc3RfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsuc3BlY3VsYXJtYXBfZnJhZ21lbnQsXCIjaWZkZWYgRE9VQkxFX1NJREVEXFxuaWYgKCBnbF9Gcm9udEZhY2luZyApXFxuZ2xfRnJhZ0NvbG9yLnh5eiAqPSB2TGlnaHRGcm9udDtcXG5lbHNlXFxuZ2xfRnJhZ0NvbG9yLnh5eiAqPSB2TGlnaHRCYWNrO1xcbiNlbHNlXFxuZ2xfRnJhZ0NvbG9yLnh5eiAqPSB2TGlnaHRGcm9udDtcXG4jZW5kaWZcIixUSFJFRS5TaGFkZXJDaHVuay5saWdodG1hcF9mcmFnbWVudCxcblRIUkVFLlNoYWRlckNodW5rLmNvbG9yX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLmVudm1hcF9mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5zaGFkb3dtYXBfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsubGluZWFyX3RvX2dhbW1hX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLmZvZ19mcmFnbWVudCxcIn1cIl0uam9pbihcIlxcblwiKX0scGhvbmc6e3VuaWZvcm1zOlRIUkVFLlVuaWZvcm1zVXRpbHMubWVyZ2UoW1RIUkVFLlVuaWZvcm1zTGliLmNvbW1vbixUSFJFRS5Vbmlmb3Jtc0xpYi5idW1wLFRIUkVFLlVuaWZvcm1zTGliLm5vcm1hbG1hcCxUSFJFRS5Vbmlmb3Jtc0xpYi5mb2csVEhSRUUuVW5pZm9ybXNMaWIubGlnaHRzLFRIUkVFLlVuaWZvcm1zTGliLnNoYWRvd21hcCx7YW1iaWVudDp7dHlwZTpcImNcIix2YWx1ZTpuZXcgVEhSRUUuQ29sb3IoMTY3NzcyMTUpfSxlbWlzc2l2ZTp7dHlwZTpcImNcIix2YWx1ZTpuZXcgVEhSRUUuQ29sb3IoMCl9LHNwZWN1bGFyOnt0eXBlOlwiY1wiLFxudmFsdWU6bmV3IFRIUkVFLkNvbG9yKDExMTg0ODEpfSxzaGluaW5lc3M6e3R5cGU6XCJmXCIsdmFsdWU6MzB9LHdyYXBSR0I6e3R5cGU6XCJ2M1wiLHZhbHVlOm5ldyBUSFJFRS5WZWN0b3IzKDEsMSwxKX19XSksdmVydGV4U2hhZGVyOltcIiNkZWZpbmUgUEhPTkdcXG52YXJ5aW5nIHZlYzMgdlZpZXdQb3NpdGlvbjtcXG52YXJ5aW5nIHZlYzMgdk5vcm1hbDtcIixUSFJFRS5TaGFkZXJDaHVuay5tYXBfcGFyc192ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsubGlnaHRtYXBfcGFyc192ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuZW52bWFwX3BhcnNfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLmxpZ2h0c19waG9uZ19wYXJzX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5jb2xvcl9wYXJzX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5tb3JwaHRhcmdldF9wYXJzX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5za2lubmluZ19wYXJzX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5zaGFkb3dtYXBfcGFyc192ZXJ0ZXgsXG5cInZvaWQgbWFpbigpIHtcIixUSFJFRS5TaGFkZXJDaHVuay5tYXBfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLmxpZ2h0bWFwX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5jb2xvcl92ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsubW9ycGhub3JtYWxfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLnNraW5iYXNlX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5za2lubm9ybWFsX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5kZWZhdWx0bm9ybWFsX3ZlcnRleCxcInZOb3JtYWwgPSBub3JtYWxpemUoIHRyYW5zZm9ybWVkTm9ybWFsICk7XCIsVEhSRUUuU2hhZGVyQ2h1bmsubW9ycGh0YXJnZXRfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLnNraW5uaW5nX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5kZWZhdWx0X3ZlcnRleCxcInZWaWV3UG9zaXRpb24gPSAtbXZQb3NpdGlvbi54eXo7XCIsVEhSRUUuU2hhZGVyQ2h1bmsud29ybGRwb3NfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLmVudm1hcF92ZXJ0ZXgsXG5USFJFRS5TaGFkZXJDaHVuay5saWdodHNfcGhvbmdfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLnNoYWRvd21hcF92ZXJ0ZXgsXCJ9XCJdLmpvaW4oXCJcXG5cIiksZnJhZ21lbnRTaGFkZXI6W1widW5pZm9ybSB2ZWMzIGRpZmZ1c2U7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbnVuaWZvcm0gdmVjMyBhbWJpZW50O1xcbnVuaWZvcm0gdmVjMyBlbWlzc2l2ZTtcXG51bmlmb3JtIHZlYzMgc3BlY3VsYXI7XFxudW5pZm9ybSBmbG9hdCBzaGluaW5lc3M7XCIsVEhSRUUuU2hhZGVyQ2h1bmsuY29sb3JfcGFyc19mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5tYXBfcGFyc19mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5saWdodG1hcF9wYXJzX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLmVudm1hcF9wYXJzX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLmZvZ19wYXJzX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLmxpZ2h0c19waG9uZ19wYXJzX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLnNoYWRvd21hcF9wYXJzX2ZyYWdtZW50LFxuVEhSRUUuU2hhZGVyQ2h1bmsuYnVtcG1hcF9wYXJzX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLm5vcm1hbG1hcF9wYXJzX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLnNwZWN1bGFybWFwX3BhcnNfZnJhZ21lbnQsXCJ2b2lkIG1haW4oKSB7XFxuZ2xfRnJhZ0NvbG9yID0gdmVjNCggdmVjMyAoIDEuMCApLCBvcGFjaXR5ICk7XCIsVEhSRUUuU2hhZGVyQ2h1bmsubWFwX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLmFscGhhdGVzdF9mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5zcGVjdWxhcm1hcF9mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5saWdodHNfcGhvbmdfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsubGlnaHRtYXBfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsuY29sb3JfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsuZW52bWFwX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLnNoYWRvd21hcF9mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5saW5lYXJfdG9fZ2FtbWFfZnJhZ21lbnQsXG5USFJFRS5TaGFkZXJDaHVuay5mb2dfZnJhZ21lbnQsXCJ9XCJdLmpvaW4oXCJcXG5cIil9LHBhcnRpY2xlX2Jhc2ljOnt1bmlmb3JtczpUSFJFRS5Vbmlmb3Jtc1V0aWxzLm1lcmdlKFtUSFJFRS5Vbmlmb3Jtc0xpYi5wYXJ0aWNsZSxUSFJFRS5Vbmlmb3Jtc0xpYi5zaGFkb3dtYXBdKSx2ZXJ0ZXhTaGFkZXI6W1widW5pZm9ybSBmbG9hdCBzaXplO1xcbnVuaWZvcm0gZmxvYXQgc2NhbGU7XCIsVEhSRUUuU2hhZGVyQ2h1bmsuY29sb3JfcGFyc192ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuc2hhZG93bWFwX3BhcnNfdmVydGV4LFwidm9pZCBtYWluKCkge1wiLFRIUkVFLlNoYWRlckNodW5rLmNvbG9yX3ZlcnRleCxcInZlYzQgbXZQb3NpdGlvbiA9IG1vZGVsVmlld01hdHJpeCAqIHZlYzQoIHBvc2l0aW9uLCAxLjAgKTtcXG4jaWZkZWYgVVNFX1NJWkVBVFRFTlVBVElPTlxcbmdsX1BvaW50U2l6ZSA9IHNpemUgKiAoIHNjYWxlIC8gbGVuZ3RoKCBtdlBvc2l0aW9uLnh5eiApICk7XFxuI2Vsc2VcXG5nbF9Qb2ludFNpemUgPSBzaXplO1xcbiNlbmRpZlxcbmdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIG12UG9zaXRpb247XCIsXG5USFJFRS5TaGFkZXJDaHVuay53b3JsZHBvc192ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuc2hhZG93bWFwX3ZlcnRleCxcIn1cIl0uam9pbihcIlxcblwiKSxmcmFnbWVudFNoYWRlcjpbXCJ1bmlmb3JtIHZlYzMgcHNDb2xvcjtcXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XCIsVEhSRUUuU2hhZGVyQ2h1bmsuY29sb3JfcGFyc19mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5tYXBfcGFydGljbGVfcGFyc19mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5mb2dfcGFyc19mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5zaGFkb3dtYXBfcGFyc19mcmFnbWVudCxcInZvaWQgbWFpbigpIHtcXG5nbF9GcmFnQ29sb3IgPSB2ZWM0KCBwc0NvbG9yLCBvcGFjaXR5ICk7XCIsVEhSRUUuU2hhZGVyQ2h1bmsubWFwX3BhcnRpY2xlX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLmFscGhhdGVzdF9mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5jb2xvcl9mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5zaGFkb3dtYXBfZnJhZ21lbnQsXG5USFJFRS5TaGFkZXJDaHVuay5mb2dfZnJhZ21lbnQsXCJ9XCJdLmpvaW4oXCJcXG5cIil9LGRhc2hlZDp7dW5pZm9ybXM6VEhSRUUuVW5pZm9ybXNVdGlscy5tZXJnZShbVEhSRUUuVW5pZm9ybXNMaWIuY29tbW9uLFRIUkVFLlVuaWZvcm1zTGliLmZvZyx7c2NhbGU6e3R5cGU6XCJmXCIsdmFsdWU6MX0sZGFzaFNpemU6e3R5cGU6XCJmXCIsdmFsdWU6MX0sdG90YWxTaXplOnt0eXBlOlwiZlwiLHZhbHVlOjJ9fV0pLHZlcnRleFNoYWRlcjpbXCJ1bmlmb3JtIGZsb2F0IHNjYWxlO1xcbmF0dHJpYnV0ZSBmbG9hdCBsaW5lRGlzdGFuY2U7XFxudmFyeWluZyBmbG9hdCB2TGluZURpc3RhbmNlO1wiLFRIUkVFLlNoYWRlckNodW5rLmNvbG9yX3BhcnNfdmVydGV4LFwidm9pZCBtYWluKCkge1wiLFRIUkVFLlNoYWRlckNodW5rLmNvbG9yX3ZlcnRleCxcInZMaW5lRGlzdGFuY2UgPSBzY2FsZSAqIGxpbmVEaXN0YW5jZTtcXG52ZWM0IG12UG9zaXRpb24gPSBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KCBwb3NpdGlvbiwgMS4wICk7XFxuZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbXZQb3NpdGlvbjtcXG59XCJdLmpvaW4oXCJcXG5cIiksXG5mcmFnbWVudFNoYWRlcjpbXCJ1bmlmb3JtIHZlYzMgZGlmZnVzZTtcXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxudW5pZm9ybSBmbG9hdCBkYXNoU2l6ZTtcXG51bmlmb3JtIGZsb2F0IHRvdGFsU2l6ZTtcXG52YXJ5aW5nIGZsb2F0IHZMaW5lRGlzdGFuY2U7XCIsVEhSRUUuU2hhZGVyQ2h1bmsuY29sb3JfcGFyc19mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5mb2dfcGFyc19mcmFnbWVudCxcInZvaWQgbWFpbigpIHtcXG5pZiAoIG1vZCggdkxpbmVEaXN0YW5jZSwgdG90YWxTaXplICkgPiBkYXNoU2l6ZSApIHtcXG5kaXNjYXJkO1xcbn1cXG5nbF9GcmFnQ29sb3IgPSB2ZWM0KCBkaWZmdXNlLCBvcGFjaXR5ICk7XCIsVEhSRUUuU2hhZGVyQ2h1bmsuY29sb3JfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsuZm9nX2ZyYWdtZW50LFwifVwiXS5qb2luKFwiXFxuXCIpfSxkZXB0aDp7dW5pZm9ybXM6e21OZWFyOnt0eXBlOlwiZlwiLHZhbHVlOjF9LG1GYXI6e3R5cGU6XCJmXCIsdmFsdWU6MkUzfSxvcGFjaXR5Ont0eXBlOlwiZlwiLFxudmFsdWU6MX19LHZlcnRleFNoYWRlcjpcInZvaWQgbWFpbigpIHtcXG5nbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KCBwb3NpdGlvbiwgMS4wICk7XFxufVwiLGZyYWdtZW50U2hhZGVyOlwidW5pZm9ybSBmbG9hdCBtTmVhcjtcXG51bmlmb3JtIGZsb2F0IG1GYXI7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbnZvaWQgbWFpbigpIHtcXG5mbG9hdCBkZXB0aCA9IGdsX0ZyYWdDb29yZC56IC8gZ2xfRnJhZ0Nvb3JkLnc7XFxuZmxvYXQgY29sb3IgPSAxLjAgLSBzbW9vdGhzdGVwKCBtTmVhciwgbUZhciwgZGVwdGggKTtcXG5nbF9GcmFnQ29sb3IgPSB2ZWM0KCB2ZWMzKCBjb2xvciApLCBvcGFjaXR5ICk7XFxufVwifSxub3JtYWw6e3VuaWZvcm1zOntvcGFjaXR5Ont0eXBlOlwiZlwiLHZhbHVlOjF9fSx2ZXJ0ZXhTaGFkZXI6W1widmFyeWluZyB2ZWMzIHZOb3JtYWw7XCIsVEhSRUUuU2hhZGVyQ2h1bmsubW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXgsXCJ2b2lkIG1haW4oKSB7XFxudk5vcm1hbCA9IG5vcm1hbGl6ZSggbm9ybWFsTWF0cml4ICogbm9ybWFsICk7XCIsXG5USFJFRS5TaGFkZXJDaHVuay5tb3JwaHRhcmdldF92ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuZGVmYXVsdF92ZXJ0ZXgsXCJ9XCJdLmpvaW4oXCJcXG5cIiksZnJhZ21lbnRTaGFkZXI6XCJ1bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxudmFyeWluZyB2ZWMzIHZOb3JtYWw7XFxudm9pZCBtYWluKCkge1xcbmdsX0ZyYWdDb2xvciA9IHZlYzQoIDAuNSAqIG5vcm1hbGl6ZSggdk5vcm1hbCApICsgMC41LCBvcGFjaXR5ICk7XFxufVwifSxub3JtYWxtYXA6e3VuaWZvcm1zOlRIUkVFLlVuaWZvcm1zVXRpbHMubWVyZ2UoW1RIUkVFLlVuaWZvcm1zTGliLmZvZyxUSFJFRS5Vbmlmb3Jtc0xpYi5saWdodHMsVEhSRUUuVW5pZm9ybXNMaWIuc2hhZG93bWFwLHtlbmFibGVBTzp7dHlwZTpcImlcIix2YWx1ZTowfSxlbmFibGVEaWZmdXNlOnt0eXBlOlwiaVwiLHZhbHVlOjB9LGVuYWJsZVNwZWN1bGFyOnt0eXBlOlwiaVwiLHZhbHVlOjB9LGVuYWJsZVJlZmxlY3Rpb246e3R5cGU6XCJpXCIsdmFsdWU6MH0sZW5hYmxlRGlzcGxhY2VtZW50Ont0eXBlOlwiaVwiLFxudmFsdWU6MH0sdERpc3BsYWNlbWVudDp7dHlwZTpcInRcIix2YWx1ZTpudWxsfSx0RGlmZnVzZTp7dHlwZTpcInRcIix2YWx1ZTpudWxsfSx0Q3ViZTp7dHlwZTpcInRcIix2YWx1ZTpudWxsfSx0Tm9ybWFsOnt0eXBlOlwidFwiLHZhbHVlOm51bGx9LHRTcGVjdWxhcjp7dHlwZTpcInRcIix2YWx1ZTpudWxsfSx0QU86e3R5cGU6XCJ0XCIsdmFsdWU6bnVsbH0sdU5vcm1hbFNjYWxlOnt0eXBlOlwidjJcIix2YWx1ZTpuZXcgVEhSRUUuVmVjdG9yMigxLDEpfSx1RGlzcGxhY2VtZW50Qmlhczp7dHlwZTpcImZcIix2YWx1ZTowfSx1RGlzcGxhY2VtZW50U2NhbGU6e3R5cGU6XCJmXCIsdmFsdWU6MX0sdURpZmZ1c2VDb2xvcjp7dHlwZTpcImNcIix2YWx1ZTpuZXcgVEhSRUUuQ29sb3IoMTY3NzcyMTUpfSx1U3BlY3VsYXJDb2xvcjp7dHlwZTpcImNcIix2YWx1ZTpuZXcgVEhSRUUuQ29sb3IoMTExODQ4MSl9LHVBbWJpZW50Q29sb3I6e3R5cGU6XCJjXCIsdmFsdWU6bmV3IFRIUkVFLkNvbG9yKDE2Nzc3MjE1KX0sdVNoaW5pbmVzczp7dHlwZTpcImZcIixcbnZhbHVlOjMwfSx1T3BhY2l0eTp7dHlwZTpcImZcIix2YWx1ZToxfSx1c2VSZWZyYWN0Ont0eXBlOlwiaVwiLHZhbHVlOjB9LHVSZWZyYWN0aW9uUmF0aW86e3R5cGU6XCJmXCIsdmFsdWU6MC45OH0sdVJlZmxlY3Rpdml0eTp7dHlwZTpcImZcIix2YWx1ZTowLjV9LHVPZmZzZXQ6e3R5cGU6XCJ2MlwiLHZhbHVlOm5ldyBUSFJFRS5WZWN0b3IyKDAsMCl9LHVSZXBlYXQ6e3R5cGU6XCJ2MlwiLHZhbHVlOm5ldyBUSFJFRS5WZWN0b3IyKDEsMSl9LHdyYXBSR0I6e3R5cGU6XCJ2M1wiLHZhbHVlOm5ldyBUSFJFRS5WZWN0b3IzKDEsMSwxKX19XSksZnJhZ21lbnRTaGFkZXI6W1widW5pZm9ybSB2ZWMzIHVBbWJpZW50Q29sb3I7XFxudW5pZm9ybSB2ZWMzIHVEaWZmdXNlQ29sb3I7XFxudW5pZm9ybSB2ZWMzIHVTcGVjdWxhckNvbG9yO1xcbnVuaWZvcm0gZmxvYXQgdVNoaW5pbmVzcztcXG51bmlmb3JtIGZsb2F0IHVPcGFjaXR5O1xcbnVuaWZvcm0gYm9vbCBlbmFibGVEaWZmdXNlO1xcbnVuaWZvcm0gYm9vbCBlbmFibGVTcGVjdWxhcjtcXG51bmlmb3JtIGJvb2wgZW5hYmxlQU87XFxudW5pZm9ybSBib29sIGVuYWJsZVJlZmxlY3Rpb247XFxudW5pZm9ybSBzYW1wbGVyMkQgdERpZmZ1c2U7XFxudW5pZm9ybSBzYW1wbGVyMkQgdE5vcm1hbDtcXG51bmlmb3JtIHNhbXBsZXIyRCB0U3BlY3VsYXI7XFxudW5pZm9ybSBzYW1wbGVyMkQgdEFPO1xcbnVuaWZvcm0gc2FtcGxlckN1YmUgdEN1YmU7XFxudW5pZm9ybSB2ZWMyIHVOb3JtYWxTY2FsZTtcXG51bmlmb3JtIGJvb2wgdXNlUmVmcmFjdDtcXG51bmlmb3JtIGZsb2F0IHVSZWZyYWN0aW9uUmF0aW87XFxudW5pZm9ybSBmbG9hdCB1UmVmbGVjdGl2aXR5O1xcbnZhcnlpbmcgdmVjMyB2VGFuZ2VudDtcXG52YXJ5aW5nIHZlYzMgdkJpbm9ybWFsO1xcbnZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xcbnZhcnlpbmcgdmVjMiB2VXY7XFxudW5pZm9ybSB2ZWMzIGFtYmllbnRMaWdodENvbG9yO1xcbiNpZiBNQVhfRElSX0xJR0hUUyA+IDBcXG51bmlmb3JtIHZlYzMgZGlyZWN0aW9uYWxMaWdodENvbG9yWyBNQVhfRElSX0xJR0hUUyBdO1xcbnVuaWZvcm0gdmVjMyBkaXJlY3Rpb25hbExpZ2h0RGlyZWN0aW9uWyBNQVhfRElSX0xJR0hUUyBdO1xcbiNlbmRpZlxcbiNpZiBNQVhfSEVNSV9MSUdIVFMgPiAwXFxudW5pZm9ybSB2ZWMzIGhlbWlzcGhlcmVMaWdodFNreUNvbG9yWyBNQVhfSEVNSV9MSUdIVFMgXTtcXG51bmlmb3JtIHZlYzMgaGVtaXNwaGVyZUxpZ2h0R3JvdW5kQ29sb3JbIE1BWF9IRU1JX0xJR0hUUyBdO1xcbnVuaWZvcm0gdmVjMyBoZW1pc3BoZXJlTGlnaHREaXJlY3Rpb25bIE1BWF9IRU1JX0xJR0hUUyBdO1xcbiNlbmRpZlxcbiNpZiBNQVhfUE9JTlRfTElHSFRTID4gMFxcbnVuaWZvcm0gdmVjMyBwb2ludExpZ2h0Q29sb3JbIE1BWF9QT0lOVF9MSUdIVFMgXTtcXG51bmlmb3JtIHZlYzMgcG9pbnRMaWdodFBvc2l0aW9uWyBNQVhfUE9JTlRfTElHSFRTIF07XFxudW5pZm9ybSBmbG9hdCBwb2ludExpZ2h0RGlzdGFuY2VbIE1BWF9QT0lOVF9MSUdIVFMgXTtcXG4jZW5kaWZcXG4jaWYgTUFYX1NQT1RfTElHSFRTID4gMFxcbnVuaWZvcm0gdmVjMyBzcG90TGlnaHRDb2xvclsgTUFYX1NQT1RfTElHSFRTIF07XFxudW5pZm9ybSB2ZWMzIHNwb3RMaWdodFBvc2l0aW9uWyBNQVhfU1BPVF9MSUdIVFMgXTtcXG51bmlmb3JtIHZlYzMgc3BvdExpZ2h0RGlyZWN0aW9uWyBNQVhfU1BPVF9MSUdIVFMgXTtcXG51bmlmb3JtIGZsb2F0IHNwb3RMaWdodEFuZ2xlQ29zWyBNQVhfU1BPVF9MSUdIVFMgXTtcXG51bmlmb3JtIGZsb2F0IHNwb3RMaWdodEV4cG9uZW50WyBNQVhfU1BPVF9MSUdIVFMgXTtcXG51bmlmb3JtIGZsb2F0IHNwb3RMaWdodERpc3RhbmNlWyBNQVhfU1BPVF9MSUdIVFMgXTtcXG4jZW5kaWZcXG4jaWZkZWYgV1JBUF9BUk9VTkRcXG51bmlmb3JtIHZlYzMgd3JhcFJHQjtcXG4jZW5kaWZcXG52YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XFxudmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XCIsXG5USFJFRS5TaGFkZXJDaHVuay5zaGFkb3dtYXBfcGFyc19mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5mb2dfcGFyc19mcmFnbWVudCxcInZvaWQgbWFpbigpIHtcXG5nbF9GcmFnQ29sb3IgPSB2ZWM0KCB2ZWMzKCAxLjAgKSwgdU9wYWNpdHkgKTtcXG52ZWMzIHNwZWN1bGFyVGV4ID0gdmVjMyggMS4wICk7XFxudmVjMyBub3JtYWxUZXggPSB0ZXh0dXJlMkQoIHROb3JtYWwsIHZVdiApLnh5eiAqIDIuMCAtIDEuMDtcXG5ub3JtYWxUZXgueHkgKj0gdU5vcm1hbFNjYWxlO1xcbm5vcm1hbFRleCA9IG5vcm1hbGl6ZSggbm9ybWFsVGV4ICk7XFxuaWYoIGVuYWJsZURpZmZ1c2UgKSB7XFxuI2lmZGVmIEdBTU1BX0lOUFVUXFxudmVjNCB0ZXhlbENvbG9yID0gdGV4dHVyZTJEKCB0RGlmZnVzZSwgdlV2ICk7XFxudGV4ZWxDb2xvci54eXogKj0gdGV4ZWxDb2xvci54eXo7XFxuZ2xfRnJhZ0NvbG9yID0gZ2xfRnJhZ0NvbG9yICogdGV4ZWxDb2xvcjtcXG4jZWxzZVxcbmdsX0ZyYWdDb2xvciA9IGdsX0ZyYWdDb2xvciAqIHRleHR1cmUyRCggdERpZmZ1c2UsIHZVdiApO1xcbiNlbmRpZlxcbn1cXG5pZiggZW5hYmxlQU8gKSB7XFxuI2lmZGVmIEdBTU1BX0lOUFVUXFxudmVjNCBhb0NvbG9yID0gdGV4dHVyZTJEKCB0QU8sIHZVdiApO1xcbmFvQ29sb3IueHl6ICo9IGFvQ29sb3IueHl6O1xcbmdsX0ZyYWdDb2xvci54eXogPSBnbF9GcmFnQ29sb3IueHl6ICogYW9Db2xvci54eXo7XFxuI2Vsc2VcXG5nbF9GcmFnQ29sb3IueHl6ID0gZ2xfRnJhZ0NvbG9yLnh5eiAqIHRleHR1cmUyRCggdEFPLCB2VXYgKS54eXo7XFxuI2VuZGlmXFxufVxcbmlmKCBlbmFibGVTcGVjdWxhciApXFxuc3BlY3VsYXJUZXggPSB0ZXh0dXJlMkQoIHRTcGVjdWxhciwgdlV2ICkueHl6O1xcbm1hdDMgdHNiID0gbWF0Myggbm9ybWFsaXplKCB2VGFuZ2VudCApLCBub3JtYWxpemUoIHZCaW5vcm1hbCApLCBub3JtYWxpemUoIHZOb3JtYWwgKSApO1xcbnZlYzMgZmluYWxOb3JtYWwgPSB0c2IgKiBub3JtYWxUZXg7XFxuI2lmZGVmIEZMSVBfU0lERURcXG5maW5hbE5vcm1hbCA9IC1maW5hbE5vcm1hbDtcXG4jZW5kaWZcXG52ZWMzIG5vcm1hbCA9IG5vcm1hbGl6ZSggZmluYWxOb3JtYWwgKTtcXG52ZWMzIHZpZXdQb3NpdGlvbiA9IG5vcm1hbGl6ZSggdlZpZXdQb3NpdGlvbiApO1xcbiNpZiBNQVhfUE9JTlRfTElHSFRTID4gMFxcbnZlYzMgcG9pbnREaWZmdXNlID0gdmVjMyggMC4wICk7XFxudmVjMyBwb2ludFNwZWN1bGFyID0gdmVjMyggMC4wICk7XFxuZm9yICggaW50IGkgPSAwOyBpIDwgTUFYX1BPSU5UX0xJR0hUUzsgaSArKyApIHtcXG52ZWM0IGxQb3NpdGlvbiA9IHZpZXdNYXRyaXggKiB2ZWM0KCBwb2ludExpZ2h0UG9zaXRpb25bIGkgXSwgMS4wICk7XFxudmVjMyBwb2ludFZlY3RvciA9IGxQb3NpdGlvbi54eXogKyB2Vmlld1Bvc2l0aW9uLnh5ejtcXG5mbG9hdCBwb2ludERpc3RhbmNlID0gMS4wO1xcbmlmICggcG9pbnRMaWdodERpc3RhbmNlWyBpIF0gPiAwLjAgKVxcbnBvaW50RGlzdGFuY2UgPSAxLjAgLSBtaW4oICggbGVuZ3RoKCBwb2ludFZlY3RvciApIC8gcG9pbnRMaWdodERpc3RhbmNlWyBpIF0gKSwgMS4wICk7XFxucG9pbnRWZWN0b3IgPSBub3JtYWxpemUoIHBvaW50VmVjdG9yICk7XFxuI2lmZGVmIFdSQVBfQVJPVU5EXFxuZmxvYXQgcG9pbnREaWZmdXNlV2VpZ2h0RnVsbCA9IG1heCggZG90KCBub3JtYWwsIHBvaW50VmVjdG9yICksIDAuMCApO1xcbmZsb2F0IHBvaW50RGlmZnVzZVdlaWdodEhhbGYgPSBtYXgoIDAuNSAqIGRvdCggbm9ybWFsLCBwb2ludFZlY3RvciApICsgMC41LCAwLjAgKTtcXG52ZWMzIHBvaW50RGlmZnVzZVdlaWdodCA9IG1peCggdmVjMyAoIHBvaW50RGlmZnVzZVdlaWdodEZ1bGwgKSwgdmVjMyggcG9pbnREaWZmdXNlV2VpZ2h0SGFsZiApLCB3cmFwUkdCICk7XFxuI2Vsc2VcXG5mbG9hdCBwb2ludERpZmZ1c2VXZWlnaHQgPSBtYXgoIGRvdCggbm9ybWFsLCBwb2ludFZlY3RvciApLCAwLjAgKTtcXG4jZW5kaWZcXG5wb2ludERpZmZ1c2UgKz0gcG9pbnREaXN0YW5jZSAqIHBvaW50TGlnaHRDb2xvclsgaSBdICogdURpZmZ1c2VDb2xvciAqIHBvaW50RGlmZnVzZVdlaWdodDtcXG52ZWMzIHBvaW50SGFsZlZlY3RvciA9IG5vcm1hbGl6ZSggcG9pbnRWZWN0b3IgKyB2aWV3UG9zaXRpb24gKTtcXG5mbG9hdCBwb2ludERvdE5vcm1hbEhhbGYgPSBtYXgoIGRvdCggbm9ybWFsLCBwb2ludEhhbGZWZWN0b3IgKSwgMC4wICk7XFxuZmxvYXQgcG9pbnRTcGVjdWxhcldlaWdodCA9IHNwZWN1bGFyVGV4LnIgKiBtYXgoIHBvdyggcG9pbnREb3ROb3JtYWxIYWxmLCB1U2hpbmluZXNzICksIDAuMCApO1xcbiNpZmRlZiBQSFlTSUNBTExZX0JBU0VEX1NIQURJTkdcXG5mbG9hdCBzcGVjdWxhck5vcm1hbGl6YXRpb24gPSAoIHVTaGluaW5lc3MgKyAyLjAwMDEgKSAvIDguMDtcXG52ZWMzIHNjaGxpY2sgPSB1U3BlY3VsYXJDb2xvciArIHZlYzMoIDEuMCAtIHVTcGVjdWxhckNvbG9yICkgKiBwb3coIDEuMCAtIGRvdCggcG9pbnRWZWN0b3IsIHBvaW50SGFsZlZlY3RvciApLCA1LjAgKTtcXG5wb2ludFNwZWN1bGFyICs9IHNjaGxpY2sgKiBwb2ludExpZ2h0Q29sb3JbIGkgXSAqIHBvaW50U3BlY3VsYXJXZWlnaHQgKiBwb2ludERpZmZ1c2VXZWlnaHQgKiBwb2ludERpc3RhbmNlICogc3BlY3VsYXJOb3JtYWxpemF0aW9uO1xcbiNlbHNlXFxucG9pbnRTcGVjdWxhciArPSBwb2ludERpc3RhbmNlICogcG9pbnRMaWdodENvbG9yWyBpIF0gKiB1U3BlY3VsYXJDb2xvciAqIHBvaW50U3BlY3VsYXJXZWlnaHQgKiBwb2ludERpZmZ1c2VXZWlnaHQ7XFxuI2VuZGlmXFxufVxcbiNlbmRpZlxcbiNpZiBNQVhfU1BPVF9MSUdIVFMgPiAwXFxudmVjMyBzcG90RGlmZnVzZSA9IHZlYzMoIDAuMCApO1xcbnZlYzMgc3BvdFNwZWN1bGFyID0gdmVjMyggMC4wICk7XFxuZm9yICggaW50IGkgPSAwOyBpIDwgTUFYX1NQT1RfTElHSFRTOyBpICsrICkge1xcbnZlYzQgbFBvc2l0aW9uID0gdmlld01hdHJpeCAqIHZlYzQoIHNwb3RMaWdodFBvc2l0aW9uWyBpIF0sIDEuMCApO1xcbnZlYzMgc3BvdFZlY3RvciA9IGxQb3NpdGlvbi54eXogKyB2Vmlld1Bvc2l0aW9uLnh5ejtcXG5mbG9hdCBzcG90RGlzdGFuY2UgPSAxLjA7XFxuaWYgKCBzcG90TGlnaHREaXN0YW5jZVsgaSBdID4gMC4wIClcXG5zcG90RGlzdGFuY2UgPSAxLjAgLSBtaW4oICggbGVuZ3RoKCBzcG90VmVjdG9yICkgLyBzcG90TGlnaHREaXN0YW5jZVsgaSBdICksIDEuMCApO1xcbnNwb3RWZWN0b3IgPSBub3JtYWxpemUoIHNwb3RWZWN0b3IgKTtcXG5mbG9hdCBzcG90RWZmZWN0ID0gZG90KCBzcG90TGlnaHREaXJlY3Rpb25bIGkgXSwgbm9ybWFsaXplKCBzcG90TGlnaHRQb3NpdGlvblsgaSBdIC0gdldvcmxkUG9zaXRpb24gKSApO1xcbmlmICggc3BvdEVmZmVjdCA+IHNwb3RMaWdodEFuZ2xlQ29zWyBpIF0gKSB7XFxuc3BvdEVmZmVjdCA9IG1heCggcG93KCBzcG90RWZmZWN0LCBzcG90TGlnaHRFeHBvbmVudFsgaSBdICksIDAuMCApO1xcbiNpZmRlZiBXUkFQX0FST1VORFxcbmZsb2F0IHNwb3REaWZmdXNlV2VpZ2h0RnVsbCA9IG1heCggZG90KCBub3JtYWwsIHNwb3RWZWN0b3IgKSwgMC4wICk7XFxuZmxvYXQgc3BvdERpZmZ1c2VXZWlnaHRIYWxmID0gbWF4KCAwLjUgKiBkb3QoIG5vcm1hbCwgc3BvdFZlY3RvciApICsgMC41LCAwLjAgKTtcXG52ZWMzIHNwb3REaWZmdXNlV2VpZ2h0ID0gbWl4KCB2ZWMzICggc3BvdERpZmZ1c2VXZWlnaHRGdWxsICksIHZlYzMoIHNwb3REaWZmdXNlV2VpZ2h0SGFsZiApLCB3cmFwUkdCICk7XFxuI2Vsc2VcXG5mbG9hdCBzcG90RGlmZnVzZVdlaWdodCA9IG1heCggZG90KCBub3JtYWwsIHNwb3RWZWN0b3IgKSwgMC4wICk7XFxuI2VuZGlmXFxuc3BvdERpZmZ1c2UgKz0gc3BvdERpc3RhbmNlICogc3BvdExpZ2h0Q29sb3JbIGkgXSAqIHVEaWZmdXNlQ29sb3IgKiBzcG90RGlmZnVzZVdlaWdodCAqIHNwb3RFZmZlY3Q7XFxudmVjMyBzcG90SGFsZlZlY3RvciA9IG5vcm1hbGl6ZSggc3BvdFZlY3RvciArIHZpZXdQb3NpdGlvbiApO1xcbmZsb2F0IHNwb3REb3ROb3JtYWxIYWxmID0gbWF4KCBkb3QoIG5vcm1hbCwgc3BvdEhhbGZWZWN0b3IgKSwgMC4wICk7XFxuZmxvYXQgc3BvdFNwZWN1bGFyV2VpZ2h0ID0gc3BlY3VsYXJUZXguciAqIG1heCggcG93KCBzcG90RG90Tm9ybWFsSGFsZiwgdVNoaW5pbmVzcyApLCAwLjAgKTtcXG4jaWZkZWYgUEhZU0lDQUxMWV9CQVNFRF9TSEFESU5HXFxuZmxvYXQgc3BlY3VsYXJOb3JtYWxpemF0aW9uID0gKCB1U2hpbmluZXNzICsgMi4wMDAxICkgLyA4LjA7XFxudmVjMyBzY2hsaWNrID0gdVNwZWN1bGFyQ29sb3IgKyB2ZWMzKCAxLjAgLSB1U3BlY3VsYXJDb2xvciApICogcG93KCAxLjAgLSBkb3QoIHNwb3RWZWN0b3IsIHNwb3RIYWxmVmVjdG9yICksIDUuMCApO1xcbnNwb3RTcGVjdWxhciArPSBzY2hsaWNrICogc3BvdExpZ2h0Q29sb3JbIGkgXSAqIHNwb3RTcGVjdWxhcldlaWdodCAqIHNwb3REaWZmdXNlV2VpZ2h0ICogc3BvdERpc3RhbmNlICogc3BlY3VsYXJOb3JtYWxpemF0aW9uICogc3BvdEVmZmVjdDtcXG4jZWxzZVxcbnNwb3RTcGVjdWxhciArPSBzcG90RGlzdGFuY2UgKiBzcG90TGlnaHRDb2xvclsgaSBdICogdVNwZWN1bGFyQ29sb3IgKiBzcG90U3BlY3VsYXJXZWlnaHQgKiBzcG90RGlmZnVzZVdlaWdodCAqIHNwb3RFZmZlY3Q7XFxuI2VuZGlmXFxufVxcbn1cXG4jZW5kaWZcXG4jaWYgTUFYX0RJUl9MSUdIVFMgPiAwXFxudmVjMyBkaXJEaWZmdXNlID0gdmVjMyggMC4wICk7XFxudmVjMyBkaXJTcGVjdWxhciA9IHZlYzMoIDAuMCApO1xcbmZvciggaW50IGkgPSAwOyBpIDwgTUFYX0RJUl9MSUdIVFM7IGkrKyApIHtcXG52ZWM0IGxEaXJlY3Rpb24gPSB2aWV3TWF0cml4ICogdmVjNCggZGlyZWN0aW9uYWxMaWdodERpcmVjdGlvblsgaSBdLCAwLjAgKTtcXG52ZWMzIGRpclZlY3RvciA9IG5vcm1hbGl6ZSggbERpcmVjdGlvbi54eXogKTtcXG4jaWZkZWYgV1JBUF9BUk9VTkRcXG5mbG9hdCBkaXJlY3Rpb25hbExpZ2h0V2VpZ2h0aW5nRnVsbCA9IG1heCggZG90KCBub3JtYWwsIGRpclZlY3RvciApLCAwLjAgKTtcXG5mbG9hdCBkaXJlY3Rpb25hbExpZ2h0V2VpZ2h0aW5nSGFsZiA9IG1heCggMC41ICogZG90KCBub3JtYWwsIGRpclZlY3RvciApICsgMC41LCAwLjAgKTtcXG52ZWMzIGRpckRpZmZ1c2VXZWlnaHQgPSBtaXgoIHZlYzMoIGRpcmVjdGlvbmFsTGlnaHRXZWlnaHRpbmdGdWxsICksIHZlYzMoIGRpcmVjdGlvbmFsTGlnaHRXZWlnaHRpbmdIYWxmICksIHdyYXBSR0IgKTtcXG4jZWxzZVxcbmZsb2F0IGRpckRpZmZ1c2VXZWlnaHQgPSBtYXgoIGRvdCggbm9ybWFsLCBkaXJWZWN0b3IgKSwgMC4wICk7XFxuI2VuZGlmXFxuZGlyRGlmZnVzZSArPSBkaXJlY3Rpb25hbExpZ2h0Q29sb3JbIGkgXSAqIHVEaWZmdXNlQ29sb3IgKiBkaXJEaWZmdXNlV2VpZ2h0O1xcbnZlYzMgZGlySGFsZlZlY3RvciA9IG5vcm1hbGl6ZSggZGlyVmVjdG9yICsgdmlld1Bvc2l0aW9uICk7XFxuZmxvYXQgZGlyRG90Tm9ybWFsSGFsZiA9IG1heCggZG90KCBub3JtYWwsIGRpckhhbGZWZWN0b3IgKSwgMC4wICk7XFxuZmxvYXQgZGlyU3BlY3VsYXJXZWlnaHQgPSBzcGVjdWxhclRleC5yICogbWF4KCBwb3coIGRpckRvdE5vcm1hbEhhbGYsIHVTaGluaW5lc3MgKSwgMC4wICk7XFxuI2lmZGVmIFBIWVNJQ0FMTFlfQkFTRURfU0hBRElOR1xcbmZsb2F0IHNwZWN1bGFyTm9ybWFsaXphdGlvbiA9ICggdVNoaW5pbmVzcyArIDIuMDAwMSApIC8gOC4wO1xcbnZlYzMgc2NobGljayA9IHVTcGVjdWxhckNvbG9yICsgdmVjMyggMS4wIC0gdVNwZWN1bGFyQ29sb3IgKSAqIHBvdyggMS4wIC0gZG90KCBkaXJWZWN0b3IsIGRpckhhbGZWZWN0b3IgKSwgNS4wICk7XFxuZGlyU3BlY3VsYXIgKz0gc2NobGljayAqIGRpcmVjdGlvbmFsTGlnaHRDb2xvclsgaSBdICogZGlyU3BlY3VsYXJXZWlnaHQgKiBkaXJEaWZmdXNlV2VpZ2h0ICogc3BlY3VsYXJOb3JtYWxpemF0aW9uO1xcbiNlbHNlXFxuZGlyU3BlY3VsYXIgKz0gZGlyZWN0aW9uYWxMaWdodENvbG9yWyBpIF0gKiB1U3BlY3VsYXJDb2xvciAqIGRpclNwZWN1bGFyV2VpZ2h0ICogZGlyRGlmZnVzZVdlaWdodDtcXG4jZW5kaWZcXG59XFxuI2VuZGlmXFxuI2lmIE1BWF9IRU1JX0xJR0hUUyA+IDBcXG52ZWMzIGhlbWlEaWZmdXNlICA9IHZlYzMoIDAuMCApO1xcbnZlYzMgaGVtaVNwZWN1bGFyID0gdmVjMyggMC4wICk7XFxuZm9yKCBpbnQgaSA9IDA7IGkgPCBNQVhfSEVNSV9MSUdIVFM7IGkgKysgKSB7XFxudmVjNCBsRGlyZWN0aW9uID0gdmlld01hdHJpeCAqIHZlYzQoIGhlbWlzcGhlcmVMaWdodERpcmVjdGlvblsgaSBdLCAwLjAgKTtcXG52ZWMzIGxWZWN0b3IgPSBub3JtYWxpemUoIGxEaXJlY3Rpb24ueHl6ICk7XFxuZmxvYXQgZG90UHJvZHVjdCA9IGRvdCggbm9ybWFsLCBsVmVjdG9yICk7XFxuZmxvYXQgaGVtaURpZmZ1c2VXZWlnaHQgPSAwLjUgKiBkb3RQcm9kdWN0ICsgMC41O1xcbnZlYzMgaGVtaUNvbG9yID0gbWl4KCBoZW1pc3BoZXJlTGlnaHRHcm91bmRDb2xvclsgaSBdLCBoZW1pc3BoZXJlTGlnaHRTa3lDb2xvclsgaSBdLCBoZW1pRGlmZnVzZVdlaWdodCApO1xcbmhlbWlEaWZmdXNlICs9IHVEaWZmdXNlQ29sb3IgKiBoZW1pQ29sb3I7XFxudmVjMyBoZW1pSGFsZlZlY3RvclNreSA9IG5vcm1hbGl6ZSggbFZlY3RvciArIHZpZXdQb3NpdGlvbiApO1xcbmZsb2F0IGhlbWlEb3ROb3JtYWxIYWxmU2t5ID0gMC41ICogZG90KCBub3JtYWwsIGhlbWlIYWxmVmVjdG9yU2t5ICkgKyAwLjU7XFxuZmxvYXQgaGVtaVNwZWN1bGFyV2VpZ2h0U2t5ID0gc3BlY3VsYXJUZXguciAqIG1heCggcG93KCBoZW1pRG90Tm9ybWFsSGFsZlNreSwgdVNoaW5pbmVzcyApLCAwLjAgKTtcXG52ZWMzIGxWZWN0b3JHcm91bmQgPSAtbFZlY3RvcjtcXG52ZWMzIGhlbWlIYWxmVmVjdG9yR3JvdW5kID0gbm9ybWFsaXplKCBsVmVjdG9yR3JvdW5kICsgdmlld1Bvc2l0aW9uICk7XFxuZmxvYXQgaGVtaURvdE5vcm1hbEhhbGZHcm91bmQgPSAwLjUgKiBkb3QoIG5vcm1hbCwgaGVtaUhhbGZWZWN0b3JHcm91bmQgKSArIDAuNTtcXG5mbG9hdCBoZW1pU3BlY3VsYXJXZWlnaHRHcm91bmQgPSBzcGVjdWxhclRleC5yICogbWF4KCBwb3coIGhlbWlEb3ROb3JtYWxIYWxmR3JvdW5kLCB1U2hpbmluZXNzICksIDAuMCApO1xcbiNpZmRlZiBQSFlTSUNBTExZX0JBU0VEX1NIQURJTkdcXG5mbG9hdCBkb3RQcm9kdWN0R3JvdW5kID0gZG90KCBub3JtYWwsIGxWZWN0b3JHcm91bmQgKTtcXG5mbG9hdCBzcGVjdWxhck5vcm1hbGl6YXRpb24gPSAoIHVTaGluaW5lc3MgKyAyLjAwMDEgKSAvIDguMDtcXG52ZWMzIHNjaGxpY2tTa3kgPSB1U3BlY3VsYXJDb2xvciArIHZlYzMoIDEuMCAtIHVTcGVjdWxhckNvbG9yICkgKiBwb3coIDEuMCAtIGRvdCggbFZlY3RvciwgaGVtaUhhbGZWZWN0b3JTa3kgKSwgNS4wICk7XFxudmVjMyBzY2hsaWNrR3JvdW5kID0gdVNwZWN1bGFyQ29sb3IgKyB2ZWMzKCAxLjAgLSB1U3BlY3VsYXJDb2xvciApICogcG93KCAxLjAgLSBkb3QoIGxWZWN0b3JHcm91bmQsIGhlbWlIYWxmVmVjdG9yR3JvdW5kICksIDUuMCApO1xcbmhlbWlTcGVjdWxhciArPSBoZW1pQ29sb3IgKiBzcGVjdWxhck5vcm1hbGl6YXRpb24gKiAoIHNjaGxpY2tTa3kgKiBoZW1pU3BlY3VsYXJXZWlnaHRTa3kgKiBtYXgoIGRvdFByb2R1Y3QsIDAuMCApICsgc2NobGlja0dyb3VuZCAqIGhlbWlTcGVjdWxhcldlaWdodEdyb3VuZCAqIG1heCggZG90UHJvZHVjdEdyb3VuZCwgMC4wICkgKTtcXG4jZWxzZVxcbmhlbWlTcGVjdWxhciArPSB1U3BlY3VsYXJDb2xvciAqIGhlbWlDb2xvciAqICggaGVtaVNwZWN1bGFyV2VpZ2h0U2t5ICsgaGVtaVNwZWN1bGFyV2VpZ2h0R3JvdW5kICkgKiBoZW1pRGlmZnVzZVdlaWdodDtcXG4jZW5kaWZcXG59XFxuI2VuZGlmXFxudmVjMyB0b3RhbERpZmZ1c2UgPSB2ZWMzKCAwLjAgKTtcXG52ZWMzIHRvdGFsU3BlY3VsYXIgPSB2ZWMzKCAwLjAgKTtcXG4jaWYgTUFYX0RJUl9MSUdIVFMgPiAwXFxudG90YWxEaWZmdXNlICs9IGRpckRpZmZ1c2U7XFxudG90YWxTcGVjdWxhciArPSBkaXJTcGVjdWxhcjtcXG4jZW5kaWZcXG4jaWYgTUFYX0hFTUlfTElHSFRTID4gMFxcbnRvdGFsRGlmZnVzZSArPSBoZW1pRGlmZnVzZTtcXG50b3RhbFNwZWN1bGFyICs9IGhlbWlTcGVjdWxhcjtcXG4jZW5kaWZcXG4jaWYgTUFYX1BPSU5UX0xJR0hUUyA+IDBcXG50b3RhbERpZmZ1c2UgKz0gcG9pbnREaWZmdXNlO1xcbnRvdGFsU3BlY3VsYXIgKz0gcG9pbnRTcGVjdWxhcjtcXG4jZW5kaWZcXG4jaWYgTUFYX1NQT1RfTElHSFRTID4gMFxcbnRvdGFsRGlmZnVzZSArPSBzcG90RGlmZnVzZTtcXG50b3RhbFNwZWN1bGFyICs9IHNwb3RTcGVjdWxhcjtcXG4jZW5kaWZcXG4jaWZkZWYgTUVUQUxcXG5nbF9GcmFnQ29sb3IueHl6ID0gZ2xfRnJhZ0NvbG9yLnh5eiAqICggdG90YWxEaWZmdXNlICsgYW1iaWVudExpZ2h0Q29sb3IgKiB1QW1iaWVudENvbG9yICsgdG90YWxTcGVjdWxhciApO1xcbiNlbHNlXFxuZ2xfRnJhZ0NvbG9yLnh5eiA9IGdsX0ZyYWdDb2xvci54eXogKiAoIHRvdGFsRGlmZnVzZSArIGFtYmllbnRMaWdodENvbG9yICogdUFtYmllbnRDb2xvciApICsgdG90YWxTcGVjdWxhcjtcXG4jZW5kaWZcXG5pZiAoIGVuYWJsZVJlZmxlY3Rpb24gKSB7XFxudmVjMyB2UmVmbGVjdDtcXG52ZWMzIGNhbWVyYVRvVmVydGV4ID0gbm9ybWFsaXplKCB2V29ybGRQb3NpdGlvbiAtIGNhbWVyYVBvc2l0aW9uICk7XFxuaWYgKCB1c2VSZWZyYWN0ICkge1xcbnZSZWZsZWN0ID0gcmVmcmFjdCggY2FtZXJhVG9WZXJ0ZXgsIG5vcm1hbCwgdVJlZnJhY3Rpb25SYXRpbyApO1xcbn0gZWxzZSB7XFxudlJlZmxlY3QgPSByZWZsZWN0KCBjYW1lcmFUb1ZlcnRleCwgbm9ybWFsICk7XFxufVxcbnZlYzQgY3ViZUNvbG9yID0gdGV4dHVyZUN1YmUoIHRDdWJlLCB2ZWMzKCAtdlJlZmxlY3QueCwgdlJlZmxlY3QueXogKSApO1xcbiNpZmRlZiBHQU1NQV9JTlBVVFxcbmN1YmVDb2xvci54eXogKj0gY3ViZUNvbG9yLnh5ejtcXG4jZW5kaWZcXG5nbF9GcmFnQ29sb3IueHl6ID0gbWl4KCBnbF9GcmFnQ29sb3IueHl6LCBjdWJlQ29sb3IueHl6LCBzcGVjdWxhclRleC5yICogdVJlZmxlY3Rpdml0eSApO1xcbn1cIixcblRIUkVFLlNoYWRlckNodW5rLnNoYWRvd21hcF9mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5saW5lYXJfdG9fZ2FtbWFfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsuZm9nX2ZyYWdtZW50LFwifVwiXS5qb2luKFwiXFxuXCIpLHZlcnRleFNoYWRlcjpbXCJhdHRyaWJ1dGUgdmVjNCB0YW5nZW50O1xcbnVuaWZvcm0gdmVjMiB1T2Zmc2V0O1xcbnVuaWZvcm0gdmVjMiB1UmVwZWF0O1xcbnVuaWZvcm0gYm9vbCBlbmFibGVEaXNwbGFjZW1lbnQ7XFxuI2lmZGVmIFZFUlRFWF9URVhUVVJFU1xcbnVuaWZvcm0gc2FtcGxlcjJEIHREaXNwbGFjZW1lbnQ7XFxudW5pZm9ybSBmbG9hdCB1RGlzcGxhY2VtZW50U2NhbGU7XFxudW5pZm9ybSBmbG9hdCB1RGlzcGxhY2VtZW50QmlhcztcXG4jZW5kaWZcXG52YXJ5aW5nIHZlYzMgdlRhbmdlbnQ7XFxudmFyeWluZyB2ZWMzIHZCaW5vcm1hbDtcXG52YXJ5aW5nIHZlYzMgdk5vcm1hbDtcXG52YXJ5aW5nIHZlYzIgdlV2O1xcbnZhcnlpbmcgdmVjMyB2V29ybGRQb3NpdGlvbjtcXG52YXJ5aW5nIHZlYzMgdlZpZXdQb3NpdGlvbjtcIixcblRIUkVFLlNoYWRlckNodW5rLnNraW5uaW5nX3BhcnNfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLnNoYWRvd21hcF9wYXJzX3ZlcnRleCxcInZvaWQgbWFpbigpIHtcIixUSFJFRS5TaGFkZXJDaHVuay5za2luYmFzZV92ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuc2tpbm5vcm1hbF92ZXJ0ZXgsXCIjaWZkZWYgVVNFX1NLSU5OSU5HXFxudk5vcm1hbCA9IG5vcm1hbGl6ZSggbm9ybWFsTWF0cml4ICogc2tpbm5lZE5vcm1hbC54eXogKTtcXG52ZWM0IHNraW5uZWRUYW5nZW50ID0gc2tpbk1hdHJpeCAqIHZlYzQoIHRhbmdlbnQueHl6LCAwLjAgKTtcXG52VGFuZ2VudCA9IG5vcm1hbGl6ZSggbm9ybWFsTWF0cml4ICogc2tpbm5lZFRhbmdlbnQueHl6ICk7XFxuI2Vsc2VcXG52Tm9ybWFsID0gbm9ybWFsaXplKCBub3JtYWxNYXRyaXggKiBub3JtYWwgKTtcXG52VGFuZ2VudCA9IG5vcm1hbGl6ZSggbm9ybWFsTWF0cml4ICogdGFuZ2VudC54eXogKTtcXG4jZW5kaWZcXG52Qmlub3JtYWwgPSBub3JtYWxpemUoIGNyb3NzKCB2Tm9ybWFsLCB2VGFuZ2VudCApICogdGFuZ2VudC53ICk7XFxudlV2ID0gdXYgKiB1UmVwZWF0ICsgdU9mZnNldDtcXG52ZWMzIGRpc3BsYWNlZFBvc2l0aW9uO1xcbiNpZmRlZiBWRVJURVhfVEVYVFVSRVNcXG5pZiAoIGVuYWJsZURpc3BsYWNlbWVudCApIHtcXG52ZWMzIGR2ID0gdGV4dHVyZTJEKCB0RGlzcGxhY2VtZW50LCB1diApLnh5ejtcXG5mbG9hdCBkZiA9IHVEaXNwbGFjZW1lbnRTY2FsZSAqIGR2LnggKyB1RGlzcGxhY2VtZW50QmlhcztcXG5kaXNwbGFjZWRQb3NpdGlvbiA9IHBvc2l0aW9uICsgbm9ybWFsaXplKCBub3JtYWwgKSAqIGRmO1xcbn0gZWxzZSB7XFxuI2lmZGVmIFVTRV9TS0lOTklOR1xcbnZlYzQgc2tpblZlcnRleCA9IHZlYzQoIHBvc2l0aW9uLCAxLjAgKTtcXG52ZWM0IHNraW5uZWQgID0gYm9uZU1hdFggKiBza2luVmVydGV4ICogc2tpbldlaWdodC54O1xcbnNraW5uZWQgXFx0ICArPSBib25lTWF0WSAqIHNraW5WZXJ0ZXggKiBza2luV2VpZ2h0Lnk7XFxuZGlzcGxhY2VkUG9zaXRpb24gID0gc2tpbm5lZC54eXo7XFxuI2Vsc2VcXG5kaXNwbGFjZWRQb3NpdGlvbiA9IHBvc2l0aW9uO1xcbiNlbmRpZlxcbn1cXG4jZWxzZVxcbiNpZmRlZiBVU0VfU0tJTk5JTkdcXG52ZWM0IHNraW5WZXJ0ZXggPSB2ZWM0KCBwb3NpdGlvbiwgMS4wICk7XFxudmVjNCBza2lubmVkICA9IGJvbmVNYXRYICogc2tpblZlcnRleCAqIHNraW5XZWlnaHQueDtcXG5za2lubmVkIFxcdCAgKz0gYm9uZU1hdFkgKiBza2luVmVydGV4ICogc2tpbldlaWdodC55O1xcbmRpc3BsYWNlZFBvc2l0aW9uICA9IHNraW5uZWQueHl6O1xcbiNlbHNlXFxuZGlzcGxhY2VkUG9zaXRpb24gPSBwb3NpdGlvbjtcXG4jZW5kaWZcXG4jZW5kaWZcXG52ZWM0IG12UG9zaXRpb24gPSBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KCBkaXNwbGFjZWRQb3NpdGlvbiwgMS4wICk7XFxudmVjNCB3b3JsZFBvc2l0aW9uID0gbW9kZWxNYXRyaXggKiB2ZWM0KCBkaXNwbGFjZWRQb3NpdGlvbiwgMS4wICk7XFxuZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbXZQb3NpdGlvbjtcXG52V29ybGRQb3NpdGlvbiA9IHdvcmxkUG9zaXRpb24ueHl6O1xcbnZWaWV3UG9zaXRpb24gPSAtbXZQb3NpdGlvbi54eXo7XFxuI2lmZGVmIFVTRV9TSEFET1dNQVBcXG5mb3IoIGludCBpID0gMDsgaSA8IE1BWF9TSEFET1dTOyBpICsrICkge1xcbnZTaGFkb3dDb29yZFsgaSBdID0gc2hhZG93TWF0cml4WyBpIF0gKiB3b3JsZFBvc2l0aW9uO1xcbn1cXG4jZW5kaWZcXG59XCJdLmpvaW4oXCJcXG5cIil9LFxuY3ViZTp7dW5pZm9ybXM6e3RDdWJlOnt0eXBlOlwidFwiLHZhbHVlOm51bGx9LHRGbGlwOnt0eXBlOlwiZlwiLHZhbHVlOi0xfX0sdmVydGV4U2hhZGVyOlwidmFyeWluZyB2ZWMzIHZXb3JsZFBvc2l0aW9uO1xcbnZvaWQgbWFpbigpIHtcXG52ZWM0IHdvcmxkUG9zaXRpb24gPSBtb2RlbE1hdHJpeCAqIHZlYzQoIHBvc2l0aW9uLCAxLjAgKTtcXG52V29ybGRQb3NpdGlvbiA9IHdvcmxkUG9zaXRpb24ueHl6O1xcbmdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIG1vZGVsVmlld01hdHJpeCAqIHZlYzQoIHBvc2l0aW9uLCAxLjAgKTtcXG59XCIsZnJhZ21lbnRTaGFkZXI6XCJ1bmlmb3JtIHNhbXBsZXJDdWJlIHRDdWJlO1xcbnVuaWZvcm0gZmxvYXQgdEZsaXA7XFxudmFyeWluZyB2ZWMzIHZXb3JsZFBvc2l0aW9uO1xcbnZvaWQgbWFpbigpIHtcXG5nbF9GcmFnQ29sb3IgPSB0ZXh0dXJlQ3ViZSggdEN1YmUsIHZlYzMoIHRGbGlwICogdldvcmxkUG9zaXRpb24ueCwgdldvcmxkUG9zaXRpb24ueXogKSApO1xcbn1cIn0sXG5kZXB0aFJHQkE6e3VuaWZvcm1zOnt9LHZlcnRleFNoYWRlcjpbVEhSRUUuU2hhZGVyQ2h1bmsubW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuc2tpbm5pbmdfcGFyc192ZXJ0ZXgsXCJ2b2lkIG1haW4oKSB7XCIsVEhSRUUuU2hhZGVyQ2h1bmsuc2tpbmJhc2VfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLm1vcnBodGFyZ2V0X3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5za2lubmluZ192ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuZGVmYXVsdF92ZXJ0ZXgsXCJ9XCJdLmpvaW4oXCJcXG5cIiksZnJhZ21lbnRTaGFkZXI6XCJ2ZWM0IHBhY2tfZGVwdGgoIGNvbnN0IGluIGZsb2F0IGRlcHRoICkge1xcbmNvbnN0IHZlYzQgYml0X3NoaWZ0ID0gdmVjNCggMjU2LjAgKiAyNTYuMCAqIDI1Ni4wLCAyNTYuMCAqIDI1Ni4wLCAyNTYuMCwgMS4wICk7XFxuY29uc3QgdmVjNCBiaXRfbWFzayAgPSB2ZWM0KCAwLjAsIDEuMCAvIDI1Ni4wLCAxLjAgLyAyNTYuMCwgMS4wIC8gMjU2LjAgKTtcXG52ZWM0IHJlcyA9IGZyYWN0KCBkZXB0aCAqIGJpdF9zaGlmdCApO1xcbnJlcyAtPSByZXMueHh5eiAqIGJpdF9tYXNrO1xcbnJldHVybiByZXM7XFxufVxcbnZvaWQgbWFpbigpIHtcXG5nbF9GcmFnRGF0YVsgMCBdID0gcGFja19kZXB0aCggZ2xfRnJhZ0Nvb3JkLnogKTtcXG59XCJ9fTtUSFJFRS5XZWJHTFJlbmRlcmVyPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXt2YXIgYz1hLnZlcnRpY2VzLmxlbmd0aCxkPWIubWF0ZXJpYWw7aWYoZC5hdHRyaWJ1dGVzKXt2b2lkIDA9PT1hLl9fd2ViZ2xDdXN0b21BdHRyaWJ1dGVzTGlzdCYmKGEuX193ZWJnbEN1c3RvbUF0dHJpYnV0ZXNMaXN0PVtdKTtmb3IodmFyIGUgaW4gZC5hdHRyaWJ1dGVzKXt2YXIgZj1kLmF0dHJpYnV0ZXNbZV07aWYoIWYuX193ZWJnbEluaXRpYWxpemVkfHxmLmNyZWF0ZVVuaXF1ZUJ1ZmZlcnMpe2YuX193ZWJnbEluaXRpYWxpemVkPSEwO3ZhciBoPTE7XCJ2MlwiPT09Zi50eXBlP2g9MjpcInYzXCI9PT1mLnR5cGU/aD0zOlwidjRcIj09PWYudHlwZT9oPTQ6XCJjXCI9PT1mLnR5cGUmJihoPTMpO2Yuc2l6ZT1oO2YuYXJyYXk9bmV3IEZsb2F0MzJBcnJheShjKmgpO2YuYnVmZmVyPWouY3JlYXRlQnVmZmVyKCk7Zi5idWZmZXIuYmVsb25nc1RvQXR0cmlidXRlPWU7Zi5uZWVkc1VwZGF0ZT0hMH1hLl9fd2ViZ2xDdXN0b21BdHRyaWJ1dGVzTGlzdC5wdXNoKGYpfX19XG5mdW5jdGlvbiBjKGEsYil7dmFyIGM9Yi5nZW9tZXRyeSxoPWEuZmFjZXMzLGc9MypoLmxlbmd0aCxpPTEqaC5sZW5ndGgsaz0zKmgubGVuZ3RoLGg9ZChiLGEpLG09ZihoKSxsPWUoaCksbj1oLnZlcnRleENvbG9ycz9oLnZlcnRleENvbG9yczohMTthLl9fdmVydGV4QXJyYXk9bmV3IEZsb2F0MzJBcnJheSgzKmcpO2wmJihhLl9fbm9ybWFsQXJyYXk9bmV3IEZsb2F0MzJBcnJheSgzKmcpKTtjLmhhc1RhbmdlbnRzJiYoYS5fX3RhbmdlbnRBcnJheT1uZXcgRmxvYXQzMkFycmF5KDQqZykpO24mJihhLl9fY29sb3JBcnJheT1uZXcgRmxvYXQzMkFycmF5KDMqZykpO20mJigwPGMuZmFjZVZlcnRleFV2cy5sZW5ndGgmJihhLl9fdXZBcnJheT1uZXcgRmxvYXQzMkFycmF5KDIqZykpLDE8Yy5mYWNlVmVydGV4VXZzLmxlbmd0aCYmKGEuX191djJBcnJheT1uZXcgRmxvYXQzMkFycmF5KDIqZykpKTtiLmdlb21ldHJ5LnNraW5XZWlnaHRzLmxlbmd0aCYmYi5nZW9tZXRyeS5za2luSW5kaWNlcy5sZW5ndGgmJlxuKGEuX19za2luSW5kZXhBcnJheT1uZXcgRmxvYXQzMkFycmF5KDQqZyksYS5fX3NraW5XZWlnaHRBcnJheT1uZXcgRmxvYXQzMkFycmF5KDQqZykpO2EuX19mYWNlQXJyYXk9bmV3IFVpbnQxNkFycmF5KDMqaSk7YS5fX2xpbmVBcnJheT1uZXcgVWludDE2QXJyYXkoMiprKTtpZihhLm51bU1vcnBoVGFyZ2V0cyl7YS5fX21vcnBoVGFyZ2V0c0FycmF5cz1bXTtjPTA7Zm9yKG09YS5udW1Nb3JwaFRhcmdldHM7YzxtO2MrKylhLl9fbW9ycGhUYXJnZXRzQXJyYXlzLnB1c2gobmV3IEZsb2F0MzJBcnJheSgzKmcpKX1pZihhLm51bU1vcnBoTm9ybWFscyl7YS5fX21vcnBoTm9ybWFsc0FycmF5cz1bXTtjPTA7Zm9yKG09YS5udW1Nb3JwaE5vcm1hbHM7YzxtO2MrKylhLl9fbW9ycGhOb3JtYWxzQXJyYXlzLnB1c2gobmV3IEZsb2F0MzJBcnJheSgzKmcpKX1hLl9fd2ViZ2xGYWNlQ291bnQ9MyppO2EuX193ZWJnbExpbmVDb3VudD0yKms7aWYoaC5hdHRyaWJ1dGVzKXt2b2lkIDA9PT1hLl9fd2ViZ2xDdXN0b21BdHRyaWJ1dGVzTGlzdCYmXG4oYS5fX3dlYmdsQ3VzdG9tQXR0cmlidXRlc0xpc3Q9W10pO2Zvcih2YXIgcCBpbiBoLmF0dHJpYnV0ZXMpe3ZhciBpPWguYXR0cmlidXRlc1twXSxrPXt9LHE7Zm9yKHEgaW4gaSlrW3FdPWlbcV07aWYoIWsuX193ZWJnbEluaXRpYWxpemVkfHxrLmNyZWF0ZVVuaXF1ZUJ1ZmZlcnMpay5fX3dlYmdsSW5pdGlhbGl6ZWQ9ITAsYz0xLFwidjJcIj09PWsudHlwZT9jPTI6XCJ2M1wiPT09ay50eXBlP2M9MzpcInY0XCI9PT1rLnR5cGU/Yz00OlwiY1wiPT09ay50eXBlJiYoYz0zKSxrLnNpemU9YyxrLmFycmF5PW5ldyBGbG9hdDMyQXJyYXkoZypjKSxrLmJ1ZmZlcj1qLmNyZWF0ZUJ1ZmZlcigpLGsuYnVmZmVyLmJlbG9uZ3NUb0F0dHJpYnV0ZT1wLGkubmVlZHNVcGRhdGU9ITAsay5fX29yaWdpbmFsPWk7YS5fX3dlYmdsQ3VzdG9tQXR0cmlidXRlc0xpc3QucHVzaChrKX19YS5fX2luaXR0ZWRBcnJheXM9ITB9ZnVuY3Rpb24gZChhLGIpe3JldHVybiBhLm1hdGVyaWFsIGluc3RhbmNlb2YgVEhSRUUuTWVzaEZhY2VNYXRlcmlhbD9cbmEubWF0ZXJpYWwubWF0ZXJpYWxzW2IubWF0ZXJpYWxJbmRleF06YS5tYXRlcmlhbH1mdW5jdGlvbiBlKGEpe3JldHVybiBhIGluc3RhbmNlb2YgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwmJiFhLmVudk1hcHx8YSBpbnN0YW5jZW9mIFRIUkVFLk1lc2hEZXB0aE1hdGVyaWFsPyExOmEmJnZvaWQgMCE9PWEuc2hhZGluZyYmYS5zaGFkaW5nPT09VEhSRUUuU21vb3RoU2hhZGluZz9USFJFRS5TbW9vdGhTaGFkaW5nOlRIUkVFLkZsYXRTaGFkaW5nfWZ1bmN0aW9uIGYoYSl7cmV0dXJuIGEubWFwfHxhLmxpZ2h0TWFwfHxhLmJ1bXBNYXB8fGEubm9ybWFsTWFwfHxhLnNwZWN1bGFyTWFwfHxhIGluc3RhbmNlb2YgVEhSRUUuU2hhZGVyTWF0ZXJpYWw/ITA6ITF9ZnVuY3Rpb24gaChhKXt2YVthXXx8KGouZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoYSksdmFbYV09ITApfWZ1bmN0aW9uIGcoKXtmb3IodmFyIGEgaW4gdmEpdmFbYV0mJihqLmRpc2FibGVWZXJ0ZXhBdHRyaWJBcnJheShhKSx2YVthXT1cbiExKX1mdW5jdGlvbiBpKGEsYil7cmV0dXJuIGEueiE9PWIuej9iLnotYS56OmEuaWQtYi5pZH1mdW5jdGlvbiBrKGEsYil7cmV0dXJuIGJbMF0tYVswXX1mdW5jdGlvbiBtKGEsYixjKXtpZihhLmxlbmd0aClmb3IodmFyIGQ9MCxlPWEubGVuZ3RoO2Q8ZTtkKyspZWE9QmE9bnVsbCxBYT0kPVU9WT1rYT1HYT1qYT0tMSx0YT0hMCxhW2RdLnJlbmRlcihiLGMsc2IscGIpLGVhPUJhPW51bGwsQWE9JD1VPVk9a2E9R2E9amE9LTEsdGE9ITB9ZnVuY3Rpb24gbChhLGIsYyxkLGUsZixoLGcpe3ZhciBqLGksayxtO2I/KGk9YS5sZW5ndGgtMSxtPWI9LTEpOihpPTAsYj1hLmxlbmd0aCxtPTEpO2Zvcih2YXIgbD1pO2whPT1iO2wrPW0paWYoaj1hW2xdLGoucmVuZGVyKXtpPWoub2JqZWN0O2s9ai5idWZmZXI7aWYoZylqPWc7ZWxzZXtqPWpbY107aWYoIWopY29udGludWU7aCYmTC5zZXRCbGVuZGluZyhqLmJsZW5kaW5nLGouYmxlbmRFcXVhdGlvbixqLmJsZW5kU3JjLGouYmxlbmREc3QpO1xuTC5zZXREZXB0aFRlc3Qoai5kZXB0aFRlc3QpO0wuc2V0RGVwdGhXcml0ZShqLmRlcHRoV3JpdGUpO0Eoai5wb2x5Z29uT2Zmc2V0LGoucG9seWdvbk9mZnNldEZhY3RvcixqLnBvbHlnb25PZmZzZXRVbml0cyl9TC5zZXRNYXRlcmlhbEZhY2VzKGopO2sgaW5zdGFuY2VvZiBUSFJFRS5CdWZmZXJHZW9tZXRyeT9MLnJlbmRlckJ1ZmZlckRpcmVjdChkLGUsZixqLGssaSk6TC5yZW5kZXJCdWZmZXIoZCxlLGYsaixrLGkpfX1mdW5jdGlvbiBwKGEsYixjLGQsZSxmLGgpe2Zvcih2YXIgZyxqLGk9MCxrPWEubGVuZ3RoO2k8aztpKyspaWYoZz1hW2ldLGo9Zy5vYmplY3Qsai52aXNpYmxlKXtpZihoKWc9aDtlbHNle2c9Z1tiXTtpZighZyljb250aW51ZTtmJiZMLnNldEJsZW5kaW5nKGcuYmxlbmRpbmcsZy5ibGVuZEVxdWF0aW9uLGcuYmxlbmRTcmMsZy5ibGVuZERzdCk7TC5zZXREZXB0aFRlc3QoZy5kZXB0aFRlc3QpO0wuc2V0RGVwdGhXcml0ZShnLmRlcHRoV3JpdGUpO0EoZy5wb2x5Z29uT2Zmc2V0LFxuZy5wb2x5Z29uT2Zmc2V0RmFjdG9yLGcucG9seWdvbk9mZnNldFVuaXRzKX1MLnJlbmRlckltbWVkaWF0ZU9iamVjdChjLGQsZSxnLGopfX1mdW5jdGlvbiB0KGEsZCl7dmFyIGUsZixoLGc7aWYodm9pZCAwPT09YS5fX3dlYmdsSW5pdCYmKGEuX193ZWJnbEluaXQ9ITAsYS5fbW9kZWxWaWV3TWF0cml4PW5ldyBUSFJFRS5NYXRyaXg0LGEuX25vcm1hbE1hdHJpeD1uZXcgVEhSRUUuTWF0cml4Myx2b2lkIDAhPT1hLmdlb21ldHJ5JiZ2b2lkIDA9PT1hLmdlb21ldHJ5Ll9fd2ViZ2xJbml0JiYoYS5nZW9tZXRyeS5fX3dlYmdsSW5pdD0hMCxhLmdlb21ldHJ5LmFkZEV2ZW50TGlzdGVuZXIoXCJkaXNwb3NlXCIsQ2IpKSxmPWEuZ2VvbWV0cnksdm9pZCAwIT09ZikpaWYoZiBpbnN0YW5jZW9mIFRIUkVFLkJ1ZmZlckdlb21ldHJ5KXt2YXIgaSxrO2ZvcihpIGluIGYuYXR0cmlidXRlcylrPVwiaW5kZXhcIj09PWk/ai5FTEVNRU5UX0FSUkFZX0JVRkZFUjpqLkFSUkFZX0JVRkZFUixnPWYuYXR0cmlidXRlc1tpXSxcbnZvaWQgMD09PWcubnVtSXRlbXMmJihnLm51bUl0ZW1zPWcuYXJyYXkubGVuZ3RoKSxnLmJ1ZmZlcj1qLmNyZWF0ZUJ1ZmZlcigpLGouYmluZEJ1ZmZlcihrLGcuYnVmZmVyKSxqLmJ1ZmZlckRhdGEoayxnLmFycmF5LGouU1RBVElDX0RSQVcpfWVsc2UgaWYoYSBpbnN0YW5jZW9mIFRIUkVFLk1lc2gpe2g9YS5tYXRlcmlhbDtpZih2b2lkIDA9PT1mLmdlb21ldHJ5R3JvdXBzKXtpPWY7dmFyIG0sbCxuO2s9e307dmFyIHA9aS5tb3JwaFRhcmdldHMubGVuZ3RoLHE9aS5tb3JwaE5vcm1hbHMubGVuZ3RoLHQ9aCBpbnN0YW5jZW9mIFRIUkVFLk1lc2hGYWNlTWF0ZXJpYWw7aS5nZW9tZXRyeUdyb3Vwcz17fTtoPTA7Zm9yKG09aS5mYWNlcy5sZW5ndGg7aDxtO2grKylsPWkuZmFjZXNbaF0sbD10P2wubWF0ZXJpYWxJbmRleDowLHZvaWQgMD09PWtbbF0mJihrW2xdPXtoYXNoOmwsY291bnRlcjowfSksbj1rW2xdLmhhc2grXCJfXCIra1tsXS5jb3VudGVyLHZvaWQgMD09PWkuZ2VvbWV0cnlHcm91cHNbbl0mJlxuKGkuZ2VvbWV0cnlHcm91cHNbbl09e2ZhY2VzMzpbXSxtYXRlcmlhbEluZGV4OmwsdmVydGljZXM6MCxudW1Nb3JwaFRhcmdldHM6cCxudW1Nb3JwaE5vcm1hbHM6cX0pLDY1NTM1PGkuZ2VvbWV0cnlHcm91cHNbbl0udmVydGljZXMrMyYmKGtbbF0uY291bnRlcis9MSxuPWtbbF0uaGFzaCtcIl9cIitrW2xdLmNvdW50ZXIsdm9pZCAwPT09aS5nZW9tZXRyeUdyb3Vwc1tuXSYmKGkuZ2VvbWV0cnlHcm91cHNbbl09e2ZhY2VzMzpbXSxtYXRlcmlhbEluZGV4OmwsdmVydGljZXM6MCxudW1Nb3JwaFRhcmdldHM6cCxudW1Nb3JwaE5vcm1hbHM6cX0pKSxpLmdlb21ldHJ5R3JvdXBzW25dLmZhY2VzMy5wdXNoKGgpLGkuZ2VvbWV0cnlHcm91cHNbbl0udmVydGljZXMrPTM7aS5nZW9tZXRyeUdyb3Vwc0xpc3Q9W107Zm9yKGcgaW4gaS5nZW9tZXRyeUdyb3VwcylpLmdlb21ldHJ5R3JvdXBzW2ddLmlkPVYrKyxpLmdlb21ldHJ5R3JvdXBzTGlzdC5wdXNoKGkuZ2VvbWV0cnlHcm91cHNbZ10pfWZvcihlIGluIGYuZ2VvbWV0cnlHcm91cHMpaWYoZz1cbmYuZ2VvbWV0cnlHcm91cHNbZV0sIWcuX193ZWJnbFZlcnRleEJ1ZmZlcil7aT1nO2kuX193ZWJnbFZlcnRleEJ1ZmZlcj1qLmNyZWF0ZUJ1ZmZlcigpO2kuX193ZWJnbE5vcm1hbEJ1ZmZlcj1qLmNyZWF0ZUJ1ZmZlcigpO2kuX193ZWJnbFRhbmdlbnRCdWZmZXI9ai5jcmVhdGVCdWZmZXIoKTtpLl9fd2ViZ2xDb2xvckJ1ZmZlcj1qLmNyZWF0ZUJ1ZmZlcigpO2kuX193ZWJnbFVWQnVmZmVyPWouY3JlYXRlQnVmZmVyKCk7aS5fX3dlYmdsVVYyQnVmZmVyPWouY3JlYXRlQnVmZmVyKCk7aS5fX3dlYmdsU2tpbkluZGljZXNCdWZmZXI9ai5jcmVhdGVCdWZmZXIoKTtpLl9fd2ViZ2xTa2luV2VpZ2h0c0J1ZmZlcj1qLmNyZWF0ZUJ1ZmZlcigpO2kuX193ZWJnbEZhY2VCdWZmZXI9ai5jcmVhdGVCdWZmZXIoKTtpLl9fd2ViZ2xMaW5lQnVmZmVyPWouY3JlYXRlQnVmZmVyKCk7cD1rPXZvaWQgMDtpZihpLm51bU1vcnBoVGFyZ2V0cyl7aS5fX3dlYmdsTW9ycGhUYXJnZXRzQnVmZmVycz1bXTtcbms9MDtmb3IocD1pLm51bU1vcnBoVGFyZ2V0cztrPHA7aysrKWkuX193ZWJnbE1vcnBoVGFyZ2V0c0J1ZmZlcnMucHVzaChqLmNyZWF0ZUJ1ZmZlcigpKX1pZihpLm51bU1vcnBoTm9ybWFscyl7aS5fX3dlYmdsTW9ycGhOb3JtYWxzQnVmZmVycz1bXTtrPTA7Zm9yKHA9aS5udW1Nb3JwaE5vcm1hbHM7azxwO2srKylpLl9fd2ViZ2xNb3JwaE5vcm1hbHNCdWZmZXJzLnB1c2goai5jcmVhdGVCdWZmZXIoKSl9TC5pbmZvLm1lbW9yeS5nZW9tZXRyaWVzKys7YyhnLGEpO2YudmVydGljZXNOZWVkVXBkYXRlPSEwO2YubW9ycGhUYXJnZXRzTmVlZFVwZGF0ZT0hMDtmLmVsZW1lbnRzTmVlZFVwZGF0ZT0hMDtmLnV2c05lZWRVcGRhdGU9ITA7Zi5ub3JtYWxzTmVlZFVwZGF0ZT0hMDtmLnRhbmdlbnRzTmVlZFVwZGF0ZT0hMDtmLmNvbG9yc05lZWRVcGRhdGU9ITB9fWVsc2UgYSBpbnN0YW5jZW9mIFRIUkVFLkxpbmU/Zi5fX3dlYmdsVmVydGV4QnVmZmVyfHwoZz1mLGcuX193ZWJnbFZlcnRleEJ1ZmZlcj1cbmouY3JlYXRlQnVmZmVyKCksZy5fX3dlYmdsQ29sb3JCdWZmZXI9ai5jcmVhdGVCdWZmZXIoKSxnLl9fd2ViZ2xMaW5lRGlzdGFuY2VCdWZmZXI9ai5jcmVhdGVCdWZmZXIoKSxMLmluZm8ubWVtb3J5Lmdlb21ldHJpZXMrKyxnPWYsaT1nLnZlcnRpY2VzLmxlbmd0aCxnLl9fdmVydGV4QXJyYXk9bmV3IEZsb2F0MzJBcnJheSgzKmkpLGcuX19jb2xvckFycmF5PW5ldyBGbG9hdDMyQXJyYXkoMyppKSxnLl9fbGluZURpc3RhbmNlQXJyYXk9bmV3IEZsb2F0MzJBcnJheSgxKmkpLGcuX193ZWJnbExpbmVDb3VudD1pLGIoZyxhKSxmLnZlcnRpY2VzTmVlZFVwZGF0ZT0hMCxmLmNvbG9yc05lZWRVcGRhdGU9ITAsZi5saW5lRGlzdGFuY2VzTmVlZFVwZGF0ZT0hMCk6YSBpbnN0YW5jZW9mIFRIUkVFLlBhcnRpY2xlU3lzdGVtJiYhZi5fX3dlYmdsVmVydGV4QnVmZmVyJiYoZz1mLGcuX193ZWJnbFZlcnRleEJ1ZmZlcj1qLmNyZWF0ZUJ1ZmZlcigpLGcuX193ZWJnbENvbG9yQnVmZmVyPWouY3JlYXRlQnVmZmVyKCksXG5MLmluZm8ubWVtb3J5Lmdlb21ldHJpZXMrKyxnPWYsaT1nLnZlcnRpY2VzLmxlbmd0aCxnLl9fdmVydGV4QXJyYXk9bmV3IEZsb2F0MzJBcnJheSgzKmkpLGcuX19jb2xvckFycmF5PW5ldyBGbG9hdDMyQXJyYXkoMyppKSxnLl9fc29ydEFycmF5PVtdLGcuX193ZWJnbFBhcnRpY2xlQ291bnQ9aSxiKGcsYSksZi52ZXJ0aWNlc05lZWRVcGRhdGU9ITAsZi5jb2xvcnNOZWVkVXBkYXRlPSEwKTtpZih2b2lkIDA9PT1hLl9fd2ViZ2xBY3RpdmUpe2lmKGEgaW5zdGFuY2VvZiBUSFJFRS5NZXNoKWlmKGY9YS5nZW9tZXRyeSxmIGluc3RhbmNlb2YgVEhSRUUuQnVmZmVyR2VvbWV0cnkpcyhkLl9fd2ViZ2xPYmplY3RzLGYsYSk7ZWxzZXtpZihmIGluc3RhbmNlb2YgVEhSRUUuR2VvbWV0cnkpZm9yKGUgaW4gZi5nZW9tZXRyeUdyb3VwcylnPWYuZ2VvbWV0cnlHcm91cHNbZV0scyhkLl9fd2ViZ2xPYmplY3RzLGcsYSl9ZWxzZSBhIGluc3RhbmNlb2YgVEhSRUUuTGluZXx8YSBpbnN0YW5jZW9mXG5USFJFRS5QYXJ0aWNsZVN5c3RlbT8oZj1hLmdlb21ldHJ5LHMoZC5fX3dlYmdsT2JqZWN0cyxmLGEpKTphIGluc3RhbmNlb2YgVEhSRUUuSW1tZWRpYXRlUmVuZGVyT2JqZWN0fHxhLmltbWVkaWF0ZVJlbmRlckNhbGxiYWNrP2QuX193ZWJnbE9iamVjdHNJbW1lZGlhdGUucHVzaCh7aWQ6bnVsbCxvYmplY3Q6YSxvcGFxdWU6bnVsbCx0cmFuc3BhcmVudDpudWxsLHo6MH0pOmEgaW5zdGFuY2VvZiBUSFJFRS5TcHJpdGU/ZC5fX3dlYmdsU3ByaXRlcy5wdXNoKGEpOmEgaW5zdGFuY2VvZiBUSFJFRS5MZW5zRmxhcmUmJmQuX193ZWJnbEZsYXJlcy5wdXNoKGEpO2EuX193ZWJnbEFjdGl2ZT0hMH19ZnVuY3Rpb24gcyhhLGIsYyl7YS5wdXNoKHtpZDpudWxsLGJ1ZmZlcjpiLG9iamVjdDpjLG9wYXF1ZTpudWxsLHRyYW5zcGFyZW50Om51bGwsejowfSl9ZnVuY3Rpb24gcShhKXtmb3IodmFyIGIgaW4gYS5hdHRyaWJ1dGVzKWlmKGEuYXR0cmlidXRlc1tiXS5uZWVkc1VwZGF0ZSlyZXR1cm4hMDtcbnJldHVybiExfWZ1bmN0aW9uIG4oYSl7Zm9yKHZhciBiIGluIGEuYXR0cmlidXRlcylhLmF0dHJpYnV0ZXNbYl0ubmVlZHNVcGRhdGU9ITF9ZnVuY3Rpb24gdShhLGIpe2EgaW5zdGFuY2VvZiBUSFJFRS5NZXNofHxhIGluc3RhbmNlb2YgVEhSRUUuUGFydGljbGVTeXN0ZW18fGEgaW5zdGFuY2VvZiBUSFJFRS5MaW5lP3IoYi5fX3dlYmdsT2JqZWN0cyxhKTphIGluc3RhbmNlb2YgVEhSRUUuU3ByaXRlP3YoYi5fX3dlYmdsU3ByaXRlcyxhKTphIGluc3RhbmNlb2YgVEhSRUUuTGVuc0ZsYXJlP3YoYi5fX3dlYmdsRmxhcmVzLGEpOihhIGluc3RhbmNlb2YgVEhSRUUuSW1tZWRpYXRlUmVuZGVyT2JqZWN0fHxhLmltbWVkaWF0ZVJlbmRlckNhbGxiYWNrKSYmcihiLl9fd2ViZ2xPYmplY3RzSW1tZWRpYXRlLGEpO2RlbGV0ZSBhLl9fd2ViZ2xBY3RpdmV9ZnVuY3Rpb24gcihhLGIpe2Zvcih2YXIgYz1hLmxlbmd0aC0xOzA8PWM7Yy0tKWFbY10ub2JqZWN0PT09YiYmYS5zcGxpY2UoYywxKX1cbmZ1bmN0aW9uIHYoYSxiKXtmb3IodmFyIGM9YS5sZW5ndGgtMTswPD1jO2MtLSlhW2NdPT09YiYmYS5zcGxpY2UoYywxKX1mdW5jdGlvbiB6KGEsYixjLGQsZSl7UD0wO2QubmVlZHNVcGRhdGUmJihkLnByb2dyYW0mJkdiKGQpLEwuaW5pdE1hdGVyaWFsKGQsYixjLGUpLGQubmVlZHNVcGRhdGU9ITEpO2QubW9ycGhUYXJnZXRzJiYhZS5fX3dlYmdsTW9ycGhUYXJnZXRJbmZsdWVuY2VzJiYoZS5fX3dlYmdsTW9ycGhUYXJnZXRJbmZsdWVuY2VzPW5ldyBGbG9hdDMyQXJyYXkoTC5tYXhNb3JwaFRhcmdldHMpKTt2YXIgZj0hMSxoPWQucHJvZ3JhbSxnPWgudW5pZm9ybXMsaT1kLnVuaWZvcm1zO2ghPT1CYSYmKGoudXNlUHJvZ3JhbShoKSxCYT1oLGY9ITApO2QuaWQhPT1BYSYmKEFhPWQuaWQsZj0hMCk7aWYoZnx8YSE9PWVhKWoudW5pZm9ybU1hdHJpeDRmdihnLnByb2plY3Rpb25NYXRyaXgsITEsYS5wcm9qZWN0aW9uTWF0cml4LmVsZW1lbnRzKSxhIT09ZWEmJihlYT1hKTtpZihkLnNraW5uaW5nKWlmKHliJiZcbmUudXNlVmVydGV4VGV4dHVyZSl7aWYobnVsbCE9PWcuYm9uZVRleHR1cmUpe3ZhciBrPUcoKTtqLnVuaWZvcm0xaShnLmJvbmVUZXh0dXJlLGspO0wuc2V0VGV4dHVyZShlLmJvbmVUZXh0dXJlLGspfW51bGwhPT1nLmJvbmVUZXh0dXJlV2lkdGgmJmoudW5pZm9ybTFpKGcuYm9uZVRleHR1cmVXaWR0aCxlLmJvbmVUZXh0dXJlV2lkdGgpO251bGwhPT1nLmJvbmVUZXh0dXJlSGVpZ2h0JiZqLnVuaWZvcm0xaShnLmJvbmVUZXh0dXJlSGVpZ2h0LGUuYm9uZVRleHR1cmVIZWlnaHQpfWVsc2UgbnVsbCE9PWcuYm9uZUdsb2JhbE1hdHJpY2VzJiZqLnVuaWZvcm1NYXRyaXg0ZnYoZy5ib25lR2xvYmFsTWF0cmljZXMsITEsZS5ib25lTWF0cmljZXMpO2lmKGYpe2MmJmQuZm9nJiYoaS5mb2dDb2xvci52YWx1ZT1jLmNvbG9yLGMgaW5zdGFuY2VvZiBUSFJFRS5Gb2c/KGkuZm9nTmVhci52YWx1ZT1jLm5lYXIsaS5mb2dGYXIudmFsdWU9Yy5mYXIpOmMgaW5zdGFuY2VvZiBUSFJFRS5Gb2dFeHAyJiZcbihpLmZvZ0RlbnNpdHkudmFsdWU9Yy5kZW5zaXR5KSk7aWYoZCBpbnN0YW5jZW9mIFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsfHxkIGluc3RhbmNlb2YgVEhSRUUuTWVzaExhbWJlcnRNYXRlcmlhbHx8ZC5saWdodHMpe2lmKHRhKXtmb3IodmFyIG0sbD1rPTAsbj0wLHAscSx0LHI9UGEscz1yLmRpcmVjdGlvbmFsLmNvbG9ycyx1PXIuZGlyZWN0aW9uYWwucG9zaXRpb25zLHY9ci5wb2ludC5jb2xvcnMsej1yLnBvaW50LnBvc2l0aW9ucyx4PXIucG9pbnQuZGlzdGFuY2VzLEE9ci5zcG90LmNvbG9ycyxFPXIuc3BvdC5wb3NpdGlvbnMsRD1yLnNwb3QuZGlzdGFuY2VzLEs9ci5zcG90LmRpcmVjdGlvbnMsTz1yLnNwb3QuYW5nbGVzQ29zLEM9ci5zcG90LmV4cG9uZW50cyxKPXIuaGVtaS5za3lDb2xvcnMsVj1yLmhlbWkuZ3JvdW5kQ29sb3JzLE09ci5oZW1pLnBvc2l0aW9ucyxRPTAsVT0wLFk9MCx6YT0wLCQ9MCxkYz0wLFg9MCxXPTAsUj1tPTAsYz10PVI9MCxmPWIubGVuZ3RoO2M8ZjtjKyspbT1cbmJbY10sbS5vbmx5U2hhZG93fHwocD1tLmNvbG9yLHE9bS5pbnRlbnNpdHksdD1tLmRpc3RhbmNlLG0gaW5zdGFuY2VvZiBUSFJFRS5BbWJpZW50TGlnaHQ/bS52aXNpYmxlJiYoTC5nYW1tYUlucHV0PyhrKz1wLnIqcC5yLGwrPXAuZypwLmcsbis9cC5iKnAuYik6KGsrPXAucixsKz1wLmcsbis9cC5iKSk6bSBpbnN0YW5jZW9mIFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQ/KCQrPTEsbS52aXNpYmxlJiYoZmEuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKG0ubWF0cml4V29ybGQpLHJhLnNldEZyb21NYXRyaXhQb3NpdGlvbihtLnRhcmdldC5tYXRyaXhXb3JsZCksZmEuc3ViKHJhKSxmYS5ub3JtYWxpemUoKSwwPT09ZmEueCYmMD09PWZhLnkmJjA9PT1mYS56fHwobT0zKlEsdVttXT1mYS54LHVbbSsxXT1mYS55LHVbbSsyXT1mYS56LEwuZ2FtbWFJbnB1dD93KHMsbSxwLHEqcSk6eShzLG0scCxxKSxRKz0xKSkpOm0gaW5zdGFuY2VvZiBUSFJFRS5Qb2ludExpZ2h0PyhkYys9MSxtLnZpc2libGUmJlxuKFI9MypVLEwuZ2FtbWFJbnB1dD93KHYsUixwLHEqcSk6eSh2LFIscCxxKSxyYS5zZXRGcm9tTWF0cml4UG9zaXRpb24obS5tYXRyaXhXb3JsZCkseltSXT1yYS54LHpbUisxXT1yYS55LHpbUisyXT1yYS56LHhbVV09dCxVKz0xKSk6bSBpbnN0YW5jZW9mIFRIUkVFLlNwb3RMaWdodD8oWCs9MSxtLnZpc2libGUmJihSPTMqWSxMLmdhbW1hSW5wdXQ/dyhBLFIscCxxKnEpOnkoQSxSLHAscSkscmEuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKG0ubWF0cml4V29ybGQpLEVbUl09cmEueCxFW1IrMV09cmEueSxFW1IrMl09cmEueixEW1ldPXQsZmEuY29weShyYSkscmEuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKG0udGFyZ2V0Lm1hdHJpeFdvcmxkKSxmYS5zdWIocmEpLGZhLm5vcm1hbGl6ZSgpLEtbUl09ZmEueCxLW1IrMV09ZmEueSxLW1IrMl09ZmEueixPW1ldPU1hdGguY29zKG0uYW5nbGUpLENbWV09bS5leHBvbmVudCxZKz0xKSk6bSBpbnN0YW5jZW9mIFRIUkVFLkhlbWlzcGhlcmVMaWdodCYmXG4oVys9MSxtLnZpc2libGUmJihmYS5zZXRGcm9tTWF0cml4UG9zaXRpb24obS5tYXRyaXhXb3JsZCksZmEubm9ybWFsaXplKCksMD09PWZhLngmJjA9PT1mYS55JiYwPT09ZmEuenx8KHQ9Myp6YSxNW3RdPWZhLngsTVt0KzFdPWZhLnksTVt0KzJdPWZhLnoscD1tLmNvbG9yLG09bS5ncm91bmRDb2xvcixMLmdhbW1hSW5wdXQ/KHEqPXEsdyhKLHQscCxxKSx3KFYsdCxtLHEpKTooeShKLHQscCxxKSx5KFYsdCxtLHEpKSx6YSs9MSkpKSk7Yz0zKlE7Zm9yKGY9TWF0aC5tYXgocy5sZW5ndGgsMyokKTtjPGY7YysrKXNbY109MDtjPTMqVTtmb3IoZj1NYXRoLm1heCh2Lmxlbmd0aCwzKmRjKTtjPGY7YysrKXZbY109MDtjPTMqWTtmb3IoZj1NYXRoLm1heChBLmxlbmd0aCwzKlgpO2M8ZjtjKyspQVtjXT0wO2M9Myp6YTtmb3IoZj1NYXRoLm1heChKLmxlbmd0aCwzKlcpO2M8ZjtjKyspSltjXT0wO2M9Myp6YTtmb3IoZj1NYXRoLm1heChWLmxlbmd0aCwzKlcpO2M8ZjtjKyspVltjXT0wO3IuZGlyZWN0aW9uYWwubGVuZ3RoPVxuUTtyLnBvaW50Lmxlbmd0aD1VO3Iuc3BvdC5sZW5ndGg9WTtyLmhlbWkubGVuZ3RoPXphO3IuYW1iaWVudFswXT1rO3IuYW1iaWVudFsxXT1sO3IuYW1iaWVudFsyXT1uO3RhPSExfWM9UGE7aS5hbWJpZW50TGlnaHRDb2xvci52YWx1ZT1jLmFtYmllbnQ7aS5kaXJlY3Rpb25hbExpZ2h0Q29sb3IudmFsdWU9Yy5kaXJlY3Rpb25hbC5jb2xvcnM7aS5kaXJlY3Rpb25hbExpZ2h0RGlyZWN0aW9uLnZhbHVlPWMuZGlyZWN0aW9uYWwucG9zaXRpb25zO2kucG9pbnRMaWdodENvbG9yLnZhbHVlPWMucG9pbnQuY29sb3JzO2kucG9pbnRMaWdodFBvc2l0aW9uLnZhbHVlPWMucG9pbnQucG9zaXRpb25zO2kucG9pbnRMaWdodERpc3RhbmNlLnZhbHVlPWMucG9pbnQuZGlzdGFuY2VzO2kuc3BvdExpZ2h0Q29sb3IudmFsdWU9Yy5zcG90LmNvbG9ycztpLnNwb3RMaWdodFBvc2l0aW9uLnZhbHVlPWMuc3BvdC5wb3NpdGlvbnM7aS5zcG90TGlnaHREaXN0YW5jZS52YWx1ZT1jLnNwb3QuZGlzdGFuY2VzO1xuaS5zcG90TGlnaHREaXJlY3Rpb24udmFsdWU9Yy5zcG90LmRpcmVjdGlvbnM7aS5zcG90TGlnaHRBbmdsZUNvcy52YWx1ZT1jLnNwb3QuYW5nbGVzQ29zO2kuc3BvdExpZ2h0RXhwb25lbnQudmFsdWU9Yy5zcG90LmV4cG9uZW50cztpLmhlbWlzcGhlcmVMaWdodFNreUNvbG9yLnZhbHVlPWMuaGVtaS5za3lDb2xvcnM7aS5oZW1pc3BoZXJlTGlnaHRHcm91bmRDb2xvci52YWx1ZT1jLmhlbWkuZ3JvdW5kQ29sb3JzO2kuaGVtaXNwaGVyZUxpZ2h0RGlyZWN0aW9uLnZhbHVlPWMuaGVtaS5wb3NpdGlvbnN9aWYoZCBpbnN0YW5jZW9mIFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsfHxkIGluc3RhbmNlb2YgVEhSRUUuTWVzaExhbWJlcnRNYXRlcmlhbHx8ZCBpbnN0YW5jZW9mIFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKXtpLm9wYWNpdHkudmFsdWU9ZC5vcGFjaXR5O0wuZ2FtbWFJbnB1dD9pLmRpZmZ1c2UudmFsdWUuY29weUdhbW1hVG9MaW5lYXIoZC5jb2xvcik6aS5kaWZmdXNlLnZhbHVlPVxuZC5jb2xvcjtpLm1hcC52YWx1ZT1kLm1hcDtpLmxpZ2h0TWFwLnZhbHVlPWQubGlnaHRNYXA7aS5zcGVjdWxhck1hcC52YWx1ZT1kLnNwZWN1bGFyTWFwO2QuYnVtcE1hcCYmKGkuYnVtcE1hcC52YWx1ZT1kLmJ1bXBNYXAsaS5idW1wU2NhbGUudmFsdWU9ZC5idW1wU2NhbGUpO2Qubm9ybWFsTWFwJiYoaS5ub3JtYWxNYXAudmFsdWU9ZC5ub3JtYWxNYXAsaS5ub3JtYWxTY2FsZS52YWx1ZS5jb3B5KGQubm9ybWFsU2NhbGUpKTt2YXIgYmE7ZC5tYXA/YmE9ZC5tYXA6ZC5zcGVjdWxhck1hcD9iYT1kLnNwZWN1bGFyTWFwOmQubm9ybWFsTWFwP2JhPWQubm9ybWFsTWFwOmQuYnVtcE1hcCYmKGJhPWQuYnVtcE1hcCk7dm9pZCAwIT09YmEmJihjPWJhLm9mZnNldCxiYT1iYS5yZXBlYXQsaS5vZmZzZXRSZXBlYXQudmFsdWUuc2V0KGMueCxjLnksYmEueCxiYS55KSk7aS5lbnZNYXAudmFsdWU9ZC5lbnZNYXA7aS5mbGlwRW52TWFwLnZhbHVlPWQuZW52TWFwIGluc3RhbmNlb2YgVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXRDdWJlP1xuMTotMTtpLnJlZmxlY3Rpdml0eS52YWx1ZT1kLnJlZmxlY3Rpdml0eTtpLnJlZnJhY3Rpb25SYXRpby52YWx1ZT1kLnJlZnJhY3Rpb25SYXRpbztpLmNvbWJpbmUudmFsdWU9ZC5jb21iaW5lO2kudXNlUmVmcmFjdC52YWx1ZT1kLmVudk1hcCYmZC5lbnZNYXAubWFwcGluZyBpbnN0YW5jZW9mIFRIUkVFLkN1YmVSZWZyYWN0aW9uTWFwcGluZ31kIGluc3RhbmNlb2YgVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWw/KGkuZGlmZnVzZS52YWx1ZT1kLmNvbG9yLGkub3BhY2l0eS52YWx1ZT1kLm9wYWNpdHkpOmQgaW5zdGFuY2VvZiBUSFJFRS5MaW5lRGFzaGVkTWF0ZXJpYWw/KGkuZGlmZnVzZS52YWx1ZT1kLmNvbG9yLGkub3BhY2l0eS52YWx1ZT1kLm9wYWNpdHksaS5kYXNoU2l6ZS52YWx1ZT1kLmRhc2hTaXplLGkudG90YWxTaXplLnZhbHVlPWQuZGFzaFNpemUrZC5nYXBTaXplLGkuc2NhbGUudmFsdWU9ZC5zY2FsZSk6ZCBpbnN0YW5jZW9mIFRIUkVFLlBhcnRpY2xlU3lzdGVtTWF0ZXJpYWw/XG4oaS5wc0NvbG9yLnZhbHVlPWQuY29sb3IsaS5vcGFjaXR5LnZhbHVlPWQub3BhY2l0eSxpLnNpemUudmFsdWU9ZC5zaXplLGkuc2NhbGUudmFsdWU9Qi5oZWlnaHQvMixpLm1hcC52YWx1ZT1kLm1hcCk6ZCBpbnN0YW5jZW9mIFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsPyhpLnNoaW5pbmVzcy52YWx1ZT1kLnNoaW5pbmVzcyxMLmdhbW1hSW5wdXQ/KGkuYW1iaWVudC52YWx1ZS5jb3B5R2FtbWFUb0xpbmVhcihkLmFtYmllbnQpLGkuZW1pc3NpdmUudmFsdWUuY29weUdhbW1hVG9MaW5lYXIoZC5lbWlzc2l2ZSksaS5zcGVjdWxhci52YWx1ZS5jb3B5R2FtbWFUb0xpbmVhcihkLnNwZWN1bGFyKSk6KGkuYW1iaWVudC52YWx1ZT1kLmFtYmllbnQsaS5lbWlzc2l2ZS52YWx1ZT1kLmVtaXNzaXZlLGkuc3BlY3VsYXIudmFsdWU9ZC5zcGVjdWxhciksZC53cmFwQXJvdW5kJiZpLndyYXBSR0IudmFsdWUuY29weShkLndyYXBSR0IpKTpkIGluc3RhbmNlb2YgVEhSRUUuTWVzaExhbWJlcnRNYXRlcmlhbD9cbihMLmdhbW1hSW5wdXQ/KGkuYW1iaWVudC52YWx1ZS5jb3B5R2FtbWFUb0xpbmVhcihkLmFtYmllbnQpLGkuZW1pc3NpdmUudmFsdWUuY29weUdhbW1hVG9MaW5lYXIoZC5lbWlzc2l2ZSkpOihpLmFtYmllbnQudmFsdWU9ZC5hbWJpZW50LGkuZW1pc3NpdmUudmFsdWU9ZC5lbWlzc2l2ZSksZC53cmFwQXJvdW5kJiZpLndyYXBSR0IudmFsdWUuY29weShkLndyYXBSR0IpKTpkIGluc3RhbmNlb2YgVEhSRUUuTWVzaERlcHRoTWF0ZXJpYWw/KGkubU5lYXIudmFsdWU9YS5uZWFyLGkubUZhci52YWx1ZT1hLmZhcixpLm9wYWNpdHkudmFsdWU9ZC5vcGFjaXR5KTpkIGluc3RhbmNlb2YgVEhSRUUuTWVzaE5vcm1hbE1hdGVyaWFsJiYoaS5vcGFjaXR5LnZhbHVlPWQub3BhY2l0eSk7aWYoZS5yZWNlaXZlU2hhZG93JiYhZC5fc2hhZG93UGFzcyYmaS5zaGFkb3dNYXRyaXgpe2M9YmE9MDtmb3IoZj1iLmxlbmd0aDtjPGY7YysrKWlmKGs9YltjXSxrLmNhc3RTaGFkb3cmJihrIGluc3RhbmNlb2ZcblRIUkVFLlNwb3RMaWdodHx8ayBpbnN0YW5jZW9mIFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQmJiFrLnNoYWRvd0Nhc2NhZGUpKWkuc2hhZG93TWFwLnZhbHVlW2JhXT1rLnNoYWRvd01hcCxpLnNoYWRvd01hcFNpemUudmFsdWVbYmFdPWsuc2hhZG93TWFwU2l6ZSxpLnNoYWRvd01hdHJpeC52YWx1ZVtiYV09ay5zaGFkb3dNYXRyaXgsaS5zaGFkb3dEYXJrbmVzcy52YWx1ZVtiYV09ay5zaGFkb3dEYXJrbmVzcyxpLnNoYWRvd0JpYXMudmFsdWVbYmFdPWsuc2hhZG93QmlhcyxiYSsrfWI9ZC51bmlmb3Jtc0xpc3Q7aT0wO2ZvcihiYT1iLmxlbmd0aDtpPGJhO2krKylpZihmPWgudW5pZm9ybXNbYltpXVsxXV0paWYoYz1iW2ldWzBdLGw9Yy50eXBlLGs9Yy52YWx1ZSxcImlcIj09PWwpai51bmlmb3JtMWkoZixrKTtlbHNlIGlmKFwiZlwiPT09bClqLnVuaWZvcm0xZihmLGspO2Vsc2UgaWYoXCJ2MlwiPT09bClqLnVuaWZvcm0yZihmLGsueCxrLnkpO2Vsc2UgaWYoXCJ2M1wiPT09bClqLnVuaWZvcm0zZihmLFxuay54LGsueSxrLnopO2Vsc2UgaWYoXCJ2NFwiPT09bClqLnVuaWZvcm00ZihmLGsueCxrLnksay56LGsudyk7ZWxzZSBpZihcImNcIj09PWwpai51bmlmb3JtM2YoZixrLnIsay5nLGsuYik7ZWxzZSBpZihcIml2MVwiPT09bClqLnVuaWZvcm0xaXYoZixrKTtlbHNlIGlmKFwiaXZcIj09PWwpai51bmlmb3JtM2l2KGYsayk7ZWxzZSBpZihcImZ2MVwiPT09bClqLnVuaWZvcm0xZnYoZixrKTtlbHNlIGlmKFwiZnZcIj09PWwpai51bmlmb3JtM2Z2KGYsayk7ZWxzZSBpZihcInYydlwiPT09bCl7dm9pZCAwPT09Yy5fYXJyYXkmJihjLl9hcnJheT1uZXcgRmxvYXQzMkFycmF5KDIqay5sZW5ndGgpKTtsPTA7Zm9yKG49ay5sZW5ndGg7bDxuO2wrKylyPTIqbCxjLl9hcnJheVtyXT1rW2xdLngsYy5fYXJyYXlbcisxXT1rW2xdLnk7ai51bmlmb3JtMmZ2KGYsYy5fYXJyYXkpfWVsc2UgaWYoXCJ2M3ZcIj09PWwpe3ZvaWQgMD09PWMuX2FycmF5JiYoYy5fYXJyYXk9bmV3IEZsb2F0MzJBcnJheSgzKmsubGVuZ3RoKSk7bD1cbjA7Zm9yKG49ay5sZW5ndGg7bDxuO2wrKylyPTMqbCxjLl9hcnJheVtyXT1rW2xdLngsYy5fYXJyYXlbcisxXT1rW2xdLnksYy5fYXJyYXlbcisyXT1rW2xdLno7ai51bmlmb3JtM2Z2KGYsYy5fYXJyYXkpfWVsc2UgaWYoXCJ2NHZcIj09PWwpe3ZvaWQgMD09PWMuX2FycmF5JiYoYy5fYXJyYXk9bmV3IEZsb2F0MzJBcnJheSg0KmsubGVuZ3RoKSk7bD0wO2ZvcihuPWsubGVuZ3RoO2w8bjtsKyspcj00KmwsYy5fYXJyYXlbcl09a1tsXS54LGMuX2FycmF5W3IrMV09a1tsXS55LGMuX2FycmF5W3IrMl09a1tsXS56LGMuX2FycmF5W3IrM109a1tsXS53O2oudW5pZm9ybTRmdihmLGMuX2FycmF5KX1lbHNlIGlmKFwibTRcIj09PWwpdm9pZCAwPT09Yy5fYXJyYXkmJihjLl9hcnJheT1uZXcgRmxvYXQzMkFycmF5KDE2KSksay5mbGF0dGVuVG9BcnJheShjLl9hcnJheSksai51bmlmb3JtTWF0cml4NGZ2KGYsITEsYy5fYXJyYXkpO2Vsc2UgaWYoXCJtNHZcIj09PWwpe3ZvaWQgMD09PWMuX2FycmF5JiZcbihjLl9hcnJheT1uZXcgRmxvYXQzMkFycmF5KDE2KmsubGVuZ3RoKSk7bD0wO2ZvcihuPWsubGVuZ3RoO2w8bjtsKyspa1tsXS5mbGF0dGVuVG9BcnJheU9mZnNldChjLl9hcnJheSwxNipsKTtqLnVuaWZvcm1NYXRyaXg0ZnYoZiwhMSxjLl9hcnJheSl9ZWxzZSBpZihcInRcIj09PWwpe2lmKHI9ayxrPUcoKSxqLnVuaWZvcm0xaShmLGspLHIpaWYoci5pbWFnZSBpbnN0YW5jZW9mIEFycmF5JiY2PT09ci5pbWFnZS5sZW5ndGgpe2lmKGM9cixmPWssNj09PWMuaW1hZ2UubGVuZ3RoKWlmKGMubmVlZHNVcGRhdGUpe2MuaW1hZ2UuX193ZWJnbFRleHR1cmVDdWJlfHwoYy5hZGRFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLERiKSxjLmltYWdlLl9fd2ViZ2xUZXh0dXJlQ3ViZT1qLmNyZWF0ZVRleHR1cmUoKSxMLmluZm8ubWVtb3J5LnRleHR1cmVzKyspO2ouYWN0aXZlVGV4dHVyZShqLlRFWFRVUkUwK2YpO2ouYmluZFRleHR1cmUoai5URVhUVVJFX0NVQkVfTUFQLGMuaW1hZ2UuX193ZWJnbFRleHR1cmVDdWJlKTtcbmoucGl4ZWxTdG9yZWkoai5VTlBBQ0tfRkxJUF9ZX1dFQkdMLGMuZmxpcFkpO2Y9YyBpbnN0YW5jZW9mIFRIUkVFLkNvbXByZXNzZWRUZXh0dXJlO2s9W107Zm9yKGw9MDs2Pmw7bCsrKUwuYXV0b1NjYWxlQ3ViZW1hcHMmJiFmPyhuPWsscj1sLHM9Yy5pbWFnZVtsXSx2PWFjLHMud2lkdGg8PXYmJnMuaGVpZ2h0PD12fHwoej1NYXRoLm1heChzLndpZHRoLHMuaGVpZ2h0KSx1PU1hdGguZmxvb3Iocy53aWR0aCp2L3opLHY9TWF0aC5mbG9vcihzLmhlaWdodCp2L3opLHo9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSx6LndpZHRoPXUsei5oZWlnaHQ9dix6LmdldENvbnRleHQoXCIyZFwiKS5kcmF3SW1hZ2UocywwLDAscy53aWR0aCxzLmhlaWdodCwwLDAsdSx2KSxzPXopLG5bcl09cyk6a1tsXT1jLmltYWdlW2xdO2w9a1swXTtuPTA9PT0obC53aWR0aCZsLndpZHRoLTEpJiYwPT09KGwuaGVpZ2h0JmwuaGVpZ2h0LTEpO3I9SShjLmZvcm1hdCk7cz1JKGMudHlwZSk7RihqLlRFWFRVUkVfQ1VCRV9NQVAsXG5jLG4pO2ZvcihsPTA7Nj5sO2wrKylpZihmKXt2PWtbbF0ubWlwbWFwczt6PTA7Zm9yKHg9di5sZW5ndGg7ejx4O3orKyl1PXZbel0sYy5mb3JtYXQhPT1USFJFRS5SR0JBRm9ybWF0P2ouY29tcHJlc3NlZFRleEltYWdlMkQoai5URVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1grbCx6LHIsdS53aWR0aCx1LmhlaWdodCwwLHUuZGF0YSk6ai50ZXhJbWFnZTJEKGouVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9YK2wseixyLHUud2lkdGgsdS5oZWlnaHQsMCxyLHMsdS5kYXRhKX1lbHNlIGoudGV4SW1hZ2UyRChqLlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCtsLDAscixyLHMsa1tsXSk7Yy5nZW5lcmF0ZU1pcG1hcHMmJm4mJmouZ2VuZXJhdGVNaXBtYXAoai5URVhUVVJFX0NVQkVfTUFQKTtjLm5lZWRzVXBkYXRlPSExO2lmKGMub25VcGRhdGUpYy5vblVwZGF0ZSgpfWVsc2Ugai5hY3RpdmVUZXh0dXJlKGouVEVYVFVSRTArZiksai5iaW5kVGV4dHVyZShqLlRFWFRVUkVfQ1VCRV9NQVAsXG5jLmltYWdlLl9fd2ViZ2xUZXh0dXJlQ3ViZSl9ZWxzZSByIGluc3RhbmNlb2YgVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXRDdWJlPyhjPXIsai5hY3RpdmVUZXh0dXJlKGouVEVYVFVSRTArayksai5iaW5kVGV4dHVyZShqLlRFWFRVUkVfQ1VCRV9NQVAsYy5fX3dlYmdsVGV4dHVyZSkpOkwuc2V0VGV4dHVyZShyLGspfWVsc2UgaWYoXCJ0dlwiPT09bCl7dm9pZCAwPT09Yy5fYXJyYXkmJihjLl9hcnJheT1bXSk7bD0wO2ZvcihuPWMudmFsdWUubGVuZ3RoO2w8bjtsKyspYy5fYXJyYXlbbF09RygpO2oudW5pZm9ybTFpdihmLGMuX2FycmF5KTtsPTA7Zm9yKG49Yy52YWx1ZS5sZW5ndGg7bDxuO2wrKylyPWMudmFsdWVbbF0saz1jLl9hcnJheVtsXSxyJiZMLnNldFRleHR1cmUocixrKX1lbHNlIGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IFVua25vd24gdW5pZm9ybSB0eXBlOiBcIitsKTtpZigoZCBpbnN0YW5jZW9mIFRIUkVFLlNoYWRlck1hdGVyaWFsfHxkIGluc3RhbmNlb2ZcblRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsfHxkLmVudk1hcCkmJm51bGwhPT1nLmNhbWVyYVBvc2l0aW9uKXJhLnNldEZyb21NYXRyaXhQb3NpdGlvbihhLm1hdHJpeFdvcmxkKSxqLnVuaWZvcm0zZihnLmNhbWVyYVBvc2l0aW9uLHJhLngscmEueSxyYS56KTsoZCBpbnN0YW5jZW9mIFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsfHxkIGluc3RhbmNlb2YgVEhSRUUuTWVzaExhbWJlcnRNYXRlcmlhbHx8ZCBpbnN0YW5jZW9mIFRIUkVFLlNoYWRlck1hdGVyaWFsfHxkLnNraW5uaW5nKSYmbnVsbCE9PWcudmlld01hdHJpeCYmai51bmlmb3JtTWF0cml4NGZ2KGcudmlld01hdHJpeCwhMSxhLm1hdHJpeFdvcmxkSW52ZXJzZS5lbGVtZW50cyl9ai51bmlmb3JtTWF0cml4NGZ2KGcubW9kZWxWaWV3TWF0cml4LCExLGUuX21vZGVsVmlld01hdHJpeC5lbGVtZW50cyk7Zy5ub3JtYWxNYXRyaXgmJmoudW5pZm9ybU1hdHJpeDNmdihnLm5vcm1hbE1hdHJpeCwhMSxlLl9ub3JtYWxNYXRyaXguZWxlbWVudHMpO1xubnVsbCE9PWcubW9kZWxNYXRyaXgmJmoudW5pZm9ybU1hdHJpeDRmdihnLm1vZGVsTWF0cml4LCExLGUubWF0cml4V29ybGQuZWxlbWVudHMpO3JldHVybiBofWZ1bmN0aW9uIEcoKXt2YXIgYT1QO2E+PU1iJiZjb25zb2xlLndhcm4oXCJXZWJHTFJlbmRlcmVyOiB0cnlpbmcgdG8gdXNlIFwiK2ErXCIgdGV4dHVyZSB1bml0cyB3aGlsZSB0aGlzIEdQVSBzdXBwb3J0cyBvbmx5IFwiK01iKTtQKz0xO3JldHVybiBhfWZ1bmN0aW9uIHcoYSxiLGMsZCl7YVtiXT1jLnIqYy5yKmQ7YVtiKzFdPWMuZypjLmcqZDthW2IrMl09Yy5iKmMuYipkfWZ1bmN0aW9uIHkoYSxiLGMsZCl7YVtiXT1jLnIqZDthW2IrMV09Yy5nKmQ7YVtiKzJdPWMuYipkfWZ1bmN0aW9uIEUoYSl7YSE9PXdhJiYoai5saW5lV2lkdGgoYSksd2E9YSl9ZnVuY3Rpb24gQShhLGIsYyl7RGEhPT1hJiYoYT9qLmVuYWJsZShqLlBPTFlHT05fT0ZGU0VUX0ZJTEwpOmouZGlzYWJsZShqLlBPTFlHT05fT0ZGU0VUX0ZJTEwpLERhPWEpO1xuaWYoYSYmKFVhIT09Ynx8UWEhPT1jKSlqLnBvbHlnb25PZmZzZXQoYixjKSxVYT1iLFFhPWN9ZnVuY3Rpb24gSyhhKXtmb3IodmFyIGE9YS5zcGxpdChcIlxcblwiKSxiPTAsYz1hLmxlbmd0aDtiPGM7YisrKWFbYl09YisxK1wiOiBcIithW2JdO3JldHVybiBhLmpvaW4oXCJcXG5cIil9ZnVuY3Rpb24gRChhLGIpe3ZhciBjO1wiZnJhZ21lbnRcIj09PWE/Yz1qLmNyZWF0ZVNoYWRlcihqLkZSQUdNRU5UX1NIQURFUik6XCJ2ZXJ0ZXhcIj09PWEmJihjPWouY3JlYXRlU2hhZGVyKGouVkVSVEVYX1NIQURFUikpO2ouc2hhZGVyU291cmNlKGMsYik7ai5jb21waWxlU2hhZGVyKGMpO3JldHVybiFqLmdldFNoYWRlclBhcmFtZXRlcihjLGouQ09NUElMRV9TVEFUVVMpPyhjb25zb2xlLmVycm9yKGouZ2V0U2hhZGVySW5mb0xvZyhjKSksY29uc29sZS5lcnJvcihLKGIpKSxudWxsKTpjfWZ1bmN0aW9uIEYoYSxiLGMpe2M/KGoudGV4UGFyYW1ldGVyaShhLGouVEVYVFVSRV9XUkFQX1MsSShiLndyYXBTKSksai50ZXhQYXJhbWV0ZXJpKGEsXG5qLlRFWFRVUkVfV1JBUF9ULEkoYi53cmFwVCkpLGoudGV4UGFyYW1ldGVyaShhLGouVEVYVFVSRV9NQUdfRklMVEVSLEkoYi5tYWdGaWx0ZXIpKSxqLnRleFBhcmFtZXRlcmkoYSxqLlRFWFRVUkVfTUlOX0ZJTFRFUixJKGIubWluRmlsdGVyKSkpOihqLnRleFBhcmFtZXRlcmkoYSxqLlRFWFRVUkVfV1JBUF9TLGouQ0xBTVBfVE9fRURHRSksai50ZXhQYXJhbWV0ZXJpKGEsai5URVhUVVJFX1dSQVBfVCxqLkNMQU1QX1RPX0VER0UpLGoudGV4UGFyYW1ldGVyaShhLGouVEVYVFVSRV9NQUdfRklMVEVSLHgoYi5tYWdGaWx0ZXIpKSxqLnRleFBhcmFtZXRlcmkoYSxqLlRFWFRVUkVfTUlOX0ZJTFRFUix4KGIubWluRmlsdGVyKSkpO2lmKExhJiZiLnR5cGUhPT1USFJFRS5GbG9hdFR5cGUmJigxPGIuYW5pc290cm9weXx8Yi5fX29sZEFuaXNvdHJvcHkpKWoudGV4UGFyYW1ldGVyZihhLExhLlRFWFRVUkVfTUFYX0FOSVNPVFJPUFlfRVhULE1hdGgubWluKGIuYW5pc290cm9weSxOYikpLGIuX19vbGRBbmlzb3Ryb3B5PVxuYi5hbmlzb3Ryb3B5fWZ1bmN0aW9uIE8oYSxiKXtqLmJpbmRSZW5kZXJidWZmZXIoai5SRU5ERVJCVUZGRVIsYSk7Yi5kZXB0aEJ1ZmZlciYmIWIuc3RlbmNpbEJ1ZmZlcj8oai5yZW5kZXJidWZmZXJTdG9yYWdlKGouUkVOREVSQlVGRkVSLGouREVQVEhfQ09NUE9ORU5UMTYsYi53aWR0aCxiLmhlaWdodCksai5mcmFtZWJ1ZmZlclJlbmRlcmJ1ZmZlcihqLkZSQU1FQlVGRkVSLGouREVQVEhfQVRUQUNITUVOVCxqLlJFTkRFUkJVRkZFUixhKSk6Yi5kZXB0aEJ1ZmZlciYmYi5zdGVuY2lsQnVmZmVyPyhqLnJlbmRlcmJ1ZmZlclN0b3JhZ2Uoai5SRU5ERVJCVUZGRVIsai5ERVBUSF9TVEVOQ0lMLGIud2lkdGgsYi5oZWlnaHQpLGouZnJhbWVidWZmZXJSZW5kZXJidWZmZXIoai5GUkFNRUJVRkZFUixqLkRFUFRIX1NURU5DSUxfQVRUQUNITUVOVCxqLlJFTkRFUkJVRkZFUixhKSk6ai5yZW5kZXJidWZmZXJTdG9yYWdlKGouUkVOREVSQlVGRkVSLGouUkdCQTQsYi53aWR0aCxiLmhlaWdodCl9XG5mdW5jdGlvbiB4KGEpe3JldHVybiBhPT09VEhSRUUuTmVhcmVzdEZpbHRlcnx8YT09PVRIUkVFLk5lYXJlc3RNaXBNYXBOZWFyZXN0RmlsdGVyfHxhPT09VEhSRUUuTmVhcmVzdE1pcE1hcExpbmVhckZpbHRlcj9qLk5FQVJFU1Q6ai5MSU5FQVJ9ZnVuY3Rpb24gSShhKXtpZihhPT09VEhSRUUuUmVwZWF0V3JhcHBpbmcpcmV0dXJuIGouUkVQRUFUO2lmKGE9PT1USFJFRS5DbGFtcFRvRWRnZVdyYXBwaW5nKXJldHVybiBqLkNMQU1QX1RPX0VER0U7aWYoYT09PVRIUkVFLk1pcnJvcmVkUmVwZWF0V3JhcHBpbmcpcmV0dXJuIGouTUlSUk9SRURfUkVQRUFUO2lmKGE9PT1USFJFRS5OZWFyZXN0RmlsdGVyKXJldHVybiBqLk5FQVJFU1Q7aWYoYT09PVRIUkVFLk5lYXJlc3RNaXBNYXBOZWFyZXN0RmlsdGVyKXJldHVybiBqLk5FQVJFU1RfTUlQTUFQX05FQVJFU1Q7aWYoYT09PVRIUkVFLk5lYXJlc3RNaXBNYXBMaW5lYXJGaWx0ZXIpcmV0dXJuIGouTkVBUkVTVF9NSVBNQVBfTElORUFSO2lmKGE9PT1cblRIUkVFLkxpbmVhckZpbHRlcilyZXR1cm4gai5MSU5FQVI7aWYoYT09PVRIUkVFLkxpbmVhck1pcE1hcE5lYXJlc3RGaWx0ZXIpcmV0dXJuIGouTElORUFSX01JUE1BUF9ORUFSRVNUO2lmKGE9PT1USFJFRS5MaW5lYXJNaXBNYXBMaW5lYXJGaWx0ZXIpcmV0dXJuIGouTElORUFSX01JUE1BUF9MSU5FQVI7aWYoYT09PVRIUkVFLlVuc2lnbmVkQnl0ZVR5cGUpcmV0dXJuIGouVU5TSUdORURfQllURTtpZihhPT09VEhSRUUuVW5zaWduZWRTaG9ydDQ0NDRUeXBlKXJldHVybiBqLlVOU0lHTkVEX1NIT1JUXzRfNF80XzQ7aWYoYT09PVRIUkVFLlVuc2lnbmVkU2hvcnQ1NTUxVHlwZSlyZXR1cm4gai5VTlNJR05FRF9TSE9SVF81XzVfNV8xO2lmKGE9PT1USFJFRS5VbnNpZ25lZFNob3J0NTY1VHlwZSlyZXR1cm4gai5VTlNJR05FRF9TSE9SVF81XzZfNTtpZihhPT09VEhSRUUuQnl0ZVR5cGUpcmV0dXJuIGouQllURTtpZihhPT09VEhSRUUuU2hvcnRUeXBlKXJldHVybiBqLlNIT1JUO2lmKGE9PT1cblRIUkVFLlVuc2lnbmVkU2hvcnRUeXBlKXJldHVybiBqLlVOU0lHTkVEX1NIT1JUO2lmKGE9PT1USFJFRS5JbnRUeXBlKXJldHVybiBqLklOVDtpZihhPT09VEhSRUUuVW5zaWduZWRJbnRUeXBlKXJldHVybiBqLlVOU0lHTkVEX0lOVDtpZihhPT09VEhSRUUuRmxvYXRUeXBlKXJldHVybiBqLkZMT0FUO2lmKGE9PT1USFJFRS5BbHBoYUZvcm1hdClyZXR1cm4gai5BTFBIQTtpZihhPT09VEhSRUUuUkdCRm9ybWF0KXJldHVybiBqLlJHQjtpZihhPT09VEhSRUUuUkdCQUZvcm1hdClyZXR1cm4gai5SR0JBO2lmKGE9PT1USFJFRS5MdW1pbmFuY2VGb3JtYXQpcmV0dXJuIGouTFVNSU5BTkNFO2lmKGE9PT1USFJFRS5MdW1pbmFuY2VBbHBoYUZvcm1hdClyZXR1cm4gai5MVU1JTkFOQ0VfQUxQSEE7aWYoYT09PVRIUkVFLkFkZEVxdWF0aW9uKXJldHVybiBqLkZVTkNfQUREO2lmKGE9PT1USFJFRS5TdWJ0cmFjdEVxdWF0aW9uKXJldHVybiBqLkZVTkNfU1VCVFJBQ1Q7aWYoYT09PVRIUkVFLlJldmVyc2VTdWJ0cmFjdEVxdWF0aW9uKXJldHVybiBqLkZVTkNfUkVWRVJTRV9TVUJUUkFDVDtcbmlmKGE9PT1USFJFRS5aZXJvRmFjdG9yKXJldHVybiBqLlpFUk87aWYoYT09PVRIUkVFLk9uZUZhY3RvcilyZXR1cm4gai5PTkU7aWYoYT09PVRIUkVFLlNyY0NvbG9yRmFjdG9yKXJldHVybiBqLlNSQ19DT0xPUjtpZihhPT09VEhSRUUuT25lTWludXNTcmNDb2xvckZhY3RvcilyZXR1cm4gai5PTkVfTUlOVVNfU1JDX0NPTE9SO2lmKGE9PT1USFJFRS5TcmNBbHBoYUZhY3RvcilyZXR1cm4gai5TUkNfQUxQSEE7aWYoYT09PVRIUkVFLk9uZU1pbnVzU3JjQWxwaGFGYWN0b3IpcmV0dXJuIGouT05FX01JTlVTX1NSQ19BTFBIQTtpZihhPT09VEhSRUUuRHN0QWxwaGFGYWN0b3IpcmV0dXJuIGouRFNUX0FMUEhBO2lmKGE9PT1USFJFRS5PbmVNaW51c0RzdEFscGhhRmFjdG9yKXJldHVybiBqLk9ORV9NSU5VU19EU1RfQUxQSEE7aWYoYT09PVRIUkVFLkRzdENvbG9yRmFjdG9yKXJldHVybiBqLkRTVF9DT0xPUjtpZihhPT09VEhSRUUuT25lTWludXNEc3RDb2xvckZhY3RvcilyZXR1cm4gai5PTkVfTUlOVVNfRFNUX0NPTE9SO1xuaWYoYT09PVRIUkVFLlNyY0FscGhhU2F0dXJhdGVGYWN0b3IpcmV0dXJuIGouU1JDX0FMUEhBX1NBVFVSQVRFO2lmKHZvaWQgMCE9PUZhKXtpZihhPT09VEhSRUUuUkdCX1MzVENfRFhUMV9Gb3JtYXQpcmV0dXJuIEZhLkNPTVBSRVNTRURfUkdCX1MzVENfRFhUMV9FWFQ7aWYoYT09PVRIUkVFLlJHQkFfUzNUQ19EWFQxX0Zvcm1hdClyZXR1cm4gRmEuQ09NUFJFU1NFRF9SR0JBX1MzVENfRFhUMV9FWFQ7aWYoYT09PVRIUkVFLlJHQkFfUzNUQ19EWFQzX0Zvcm1hdClyZXR1cm4gRmEuQ09NUFJFU1NFRF9SR0JBX1MzVENfRFhUM19FWFQ7aWYoYT09PVRIUkVFLlJHQkFfUzNUQ19EWFQ1X0Zvcm1hdClyZXR1cm4gRmEuQ09NUFJFU1NFRF9SR0JBX1MzVENfRFhUNV9FWFR9cmV0dXJuIDB9Y29uc29sZS5sb2coXCJUSFJFRS5XZWJHTFJlbmRlcmVyXCIsVEhSRUUuUkVWSVNJT04pO3ZhciBhPWF8fHt9LEI9dm9pZCAwIT09YS5jYW52YXM/YS5jYW52YXM6ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSxcbk09dm9pZCAwIT09YS5wcmVjaXNpb24/YS5wcmVjaXNpb246XCJoaWdocFwiLEo9dm9pZCAwIT09YS5hbHBoYT9hLmFscGhhOiExLGNhPXZvaWQgMCE9PWEucHJlbXVsdGlwbGllZEFscGhhP2EucHJlbXVsdGlwbGllZEFscGhhOiEwLG5hPXZvaWQgMCE9PWEuYW50aWFsaWFzP2EuYW50aWFsaWFzOiExLHBhPXZvaWQgMCE9PWEuc3RlbmNpbD9hLnN0ZW5jaWw6ITAsQz12b2lkIDAhPT1hLnByZXNlcnZlRHJhd2luZ0J1ZmZlcj9hLnByZXNlcnZlRHJhd2luZ0J1ZmZlcjohMSxRPW5ldyBUSFJFRS5Db2xvcigwKSxSPTA7dGhpcy5kb21FbGVtZW50PUI7dGhpcy5jb250ZXh0PW51bGw7dGhpcy5kZXZpY2VQaXhlbFJhdGlvPXZvaWQgMCE9PWEuZGV2aWNlUGl4ZWxSYXRpbz9hLmRldmljZVBpeGVsUmF0aW86dm9pZCAwIT09c2VsZi5kZXZpY2VQaXhlbFJhdGlvP3NlbGYuZGV2aWNlUGl4ZWxSYXRpbzoxO3RoaXMuYXV0b1VwZGF0ZU9iamVjdHM9dGhpcy5zb3J0T2JqZWN0cz10aGlzLmF1dG9DbGVhclN0ZW5jaWw9XG50aGlzLmF1dG9DbGVhckRlcHRoPXRoaXMuYXV0b0NsZWFyQ29sb3I9dGhpcy5hdXRvQ2xlYXI9ITA7dGhpcy5zaGFkb3dNYXBFbmFibGVkPXRoaXMucGh5c2ljYWxseUJhc2VkU2hhZGluZz10aGlzLmdhbW1hT3V0cHV0PXRoaXMuZ2FtbWFJbnB1dD0hMTt0aGlzLnNoYWRvd01hcEF1dG9VcGRhdGU9ITA7dGhpcy5zaGFkb3dNYXBUeXBlPVRIUkVFLlBDRlNoYWRvd01hcDt0aGlzLnNoYWRvd01hcEN1bGxGYWNlPVRIUkVFLkN1bGxGYWNlRnJvbnQ7dGhpcy5zaGFkb3dNYXBDYXNjYWRlPXRoaXMuc2hhZG93TWFwRGVidWc9ITE7dGhpcy5tYXhNb3JwaFRhcmdldHM9ODt0aGlzLm1heE1vcnBoTm9ybWFscz00O3RoaXMuYXV0b1NjYWxlQ3ViZW1hcHM9ITA7dGhpcy5yZW5kZXJQbHVnaW5zUHJlPVtdO3RoaXMucmVuZGVyUGx1Z2luc1Bvc3Q9W107dGhpcy5pbmZvPXttZW1vcnk6e3Byb2dyYW1zOjAsZ2VvbWV0cmllczowLHRleHR1cmVzOjB9LHJlbmRlcjp7Y2FsbHM6MCx2ZXJ0aWNlczowLFxuZmFjZXM6MCxwb2ludHM6MH19O3ZhciBMPXRoaXMsZGE9W10semE9MCxCYT1udWxsLGJhPW51bGwsQWE9LTEsJD1udWxsLGVhPW51bGwsVj0wLFA9MCxZPS0xLFU9LTEsamE9LTEsc2E9LTEsaGE9LTEsS2E9LTEsR2E9LTEsa2E9LTEsRGE9bnVsbCxVYT1udWxsLFFhPW51bGwsd2E9bnVsbCxiYj0wLGNiPTAsTWE9Qi53aWR0aCxmYj1CLmhlaWdodCxzYj0wLHBiPTAsdmE9e30sbGE9bmV3IFRIUkVFLkZydXN0dW0sRWE9bmV3IFRIUkVFLk1hdHJpeDQsZ2I9bmV3IFRIUkVFLk1hdHJpeDQscmE9bmV3IFRIUkVFLlZlY3RvcjMsZmE9bmV3IFRIUkVFLlZlY3RvcjMsdGE9ITAsUGE9e2FtYmllbnQ6WzAsMCwwXSxkaXJlY3Rpb25hbDp7bGVuZ3RoOjAsY29sb3JzOltdLHBvc2l0aW9uczpbXX0scG9pbnQ6e2xlbmd0aDowLGNvbG9yczpbXSxwb3NpdGlvbnM6W10sZGlzdGFuY2VzOltdfSxzcG90OntsZW5ndGg6MCxjb2xvcnM6W10scG9zaXRpb25zOltdLGRpc3RhbmNlczpbXSxkaXJlY3Rpb25zOltdLFxuYW5nbGVzQ29zOltdLGV4cG9uZW50czpbXX0saGVtaTp7bGVuZ3RoOjAsc2t5Q29sb3JzOltdLGdyb3VuZENvbG9yczpbXSxwb3NpdGlvbnM6W119fSxqLE9hLHVhLExhLEZhO3RyeXt2YXIgUmE9e2FscGhhOkoscHJlbXVsdGlwbGllZEFscGhhOmNhLGFudGlhbGlhczpuYSxzdGVuY2lsOnBhLHByZXNlcnZlRHJhd2luZ0J1ZmZlcjpDfTtqPUIuZ2V0Q29udGV4dChcIndlYmdsXCIsUmEpfHxCLmdldENvbnRleHQoXCJleHBlcmltZW50YWwtd2ViZ2xcIixSYSk7aWYobnVsbD09PWopdGhyb3dcIkVycm9yIGNyZWF0aW5nIFdlYkdMIGNvbnRleHQuXCI7fWNhdGNoKFpiKXtjb25zb2xlLmVycm9yKFpiKX1PYT1qLmdldEV4dGVuc2lvbihcIk9FU190ZXh0dXJlX2Zsb2F0XCIpO2ouZ2V0RXh0ZW5zaW9uKFwiT0VTX3RleHR1cmVfZmxvYXRfbGluZWFyXCIpO3VhPWouZ2V0RXh0ZW5zaW9uKFwiT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzXCIpO0xhPWouZ2V0RXh0ZW5zaW9uKFwiRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljXCIpfHxcbmouZ2V0RXh0ZW5zaW9uKFwiTU9aX0VYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpY1wiKXx8ai5nZXRFeHRlbnNpb24oXCJXRUJLSVRfRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljXCIpO0ZhPWouZ2V0RXh0ZW5zaW9uKFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGNcIil8fGouZ2V0RXh0ZW5zaW9uKFwiTU9aX1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjXCIpfHxqLmdldEV4dGVuc2lvbihcIldFQktJVF9XRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y1wiKTtPYXx8Y29uc29sZS5sb2coXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBGbG9hdCB0ZXh0dXJlcyBub3Qgc3VwcG9ydGVkLlwiKTt1YXx8Y29uc29sZS5sb2coXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBTdGFuZGFyZCBkZXJpdmF0aXZlcyBub3Qgc3VwcG9ydGVkLlwiKTtMYXx8Y29uc29sZS5sb2coXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBBbmlzb3Ryb3BpYyB0ZXh0dXJlIGZpbHRlcmluZyBub3Qgc3VwcG9ydGVkLlwiKTtcbkZhfHxjb25zb2xlLmxvZyhcIlRIUkVFLldlYkdMUmVuZGVyZXI6IFMzVEMgY29tcHJlc3NlZCB0ZXh0dXJlcyBub3Qgc3VwcG9ydGVkLlwiKTt2b2lkIDA9PT1qLmdldFNoYWRlclByZWNpc2lvbkZvcm1hdCYmKGouZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0PWZ1bmN0aW9uKCl7cmV0dXJue3JhbmdlTWluOjEscmFuZ2VNYXg6MSxwcmVjaXNpb246MX19KTtqLmNsZWFyQ29sb3IoMCwwLDAsMSk7ai5jbGVhckRlcHRoKDEpO2ouY2xlYXJTdGVuY2lsKDApO2ouZW5hYmxlKGouREVQVEhfVEVTVCk7ai5kZXB0aEZ1bmMoai5MRVFVQUwpO2ouZnJvbnRGYWNlKGouQ0NXKTtqLmN1bGxGYWNlKGouQkFDSyk7ai5lbmFibGUoai5DVUxMX0ZBQ0UpO2ouZW5hYmxlKGouQkxFTkQpO2ouYmxlbmRFcXVhdGlvbihqLkZVTkNfQUREKTtqLmJsZW5kRnVuYyhqLlNSQ19BTFBIQSxqLk9ORV9NSU5VU19TUkNfQUxQSEEpO2oudmlld3BvcnQoYmIsY2IsTWEsZmIpO2ouY2xlYXJDb2xvcihRLnIsUS5nLFEuYixcblIpO3RoaXMuY29udGV4dD1qO3ZhciBNYj1qLmdldFBhcmFtZXRlcihqLk1BWF9URVhUVVJFX0lNQUdFX1VOSVRTKSwkYj1qLmdldFBhcmFtZXRlcihqLk1BWF9WRVJURVhfVEVYVFVSRV9JTUFHRV9VTklUUyk7ai5nZXRQYXJhbWV0ZXIoai5NQVhfVEVYVFVSRV9TSVpFKTt2YXIgYWM9ai5nZXRQYXJhbWV0ZXIoai5NQVhfQ1VCRV9NQVBfVEVYVFVSRV9TSVpFKSxOYj1MYT9qLmdldFBhcmFtZXRlcihMYS5NQVhfVEVYVFVSRV9NQVhfQU5JU09UUk9QWV9FWFQpOjAsQmI9MDwkYix5Yj1CYiYmT2E7RmEmJmouZ2V0UGFyYW1ldGVyKGouQ09NUFJFU1NFRF9URVhUVVJFX0ZPUk1BVFMpO3ZhciBiYz1qLmdldFNoYWRlclByZWNpc2lvbkZvcm1hdChqLlZFUlRFWF9TSEFERVIsai5ISUdIX0ZMT0FUKSxjYz1qLmdldFNoYWRlclByZWNpc2lvbkZvcm1hdChqLlZFUlRFWF9TSEFERVIsai5NRURJVU1fRkxPQVQpO2ouZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0KGouVkVSVEVYX1NIQURFUixqLkxPV19GTE9BVCk7XG52YXIgcWM9ai5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoai5GUkFHTUVOVF9TSEFERVIsai5ISUdIX0ZMT0FUKSxyYz1qLmdldFNoYWRlclByZWNpc2lvbkZvcm1hdChqLkZSQUdNRU5UX1NIQURFUixqLk1FRElVTV9GTE9BVCk7ai5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoai5GUkFHTUVOVF9TSEFERVIsai5MT1dfRkxPQVQpO2ouZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0KGouVkVSVEVYX1NIQURFUixqLkhJR0hfSU5UKTtqLmdldFNoYWRlclByZWNpc2lvbkZvcm1hdChqLlZFUlRFWF9TSEFERVIsai5NRURJVU1fSU5UKTtqLmdldFNoYWRlclByZWNpc2lvbkZvcm1hdChqLlZFUlRFWF9TSEFERVIsai5MT1dfSU5UKTtqLmdldFNoYWRlclByZWNpc2lvbkZvcm1hdChqLkZSQUdNRU5UX1NIQURFUixqLkhJR0hfSU5UKTtqLmdldFNoYWRlclByZWNpc2lvbkZvcm1hdChqLkZSQUdNRU5UX1NIQURFUixqLk1FRElVTV9JTlQpO2ouZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0KGouRlJBR01FTlRfU0hBREVSLFxuai5MT1dfSU5UKTt2YXIgc2M9MDxiYy5wcmVjaXNpb24mJjA8cWMucHJlY2lzaW9uLE9iPTA8Y2MucHJlY2lzaW9uJiYwPHJjLnByZWNpc2lvbjtcImhpZ2hwXCI9PT1NJiYhc2MmJihPYj8oTT1cIm1lZGl1bXBcIixjb25zb2xlLndhcm4oXCJXZWJHTFJlbmRlcmVyOiBoaWdocCBub3Qgc3VwcG9ydGVkLCB1c2luZyBtZWRpdW1wXCIpKTooTT1cImxvd3BcIixjb25zb2xlLndhcm4oXCJXZWJHTFJlbmRlcmVyOiBoaWdocCBhbmQgbWVkaXVtcCBub3Qgc3VwcG9ydGVkLCB1c2luZyBsb3dwXCIpKSk7XCJtZWRpdW1wXCI9PT1NJiYhT2ImJihNPVwibG93cFwiLGNvbnNvbGUud2FybihcIldlYkdMUmVuZGVyZXI6IG1lZGl1bXAgbm90IHN1cHBvcnRlZCwgdXNpbmcgbG93cFwiKSk7dGhpcy5nZXRDb250ZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIGp9O3RoaXMuc3VwcG9ydHNWZXJ0ZXhUZXh0dXJlcz1mdW5jdGlvbigpe3JldHVybiBCYn07dGhpcy5zdXBwb3J0c0Zsb2F0VGV4dHVyZXM9ZnVuY3Rpb24oKXtyZXR1cm4gT2F9O1xudGhpcy5zdXBwb3J0c1N0YW5kYXJkRGVyaXZhdGl2ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdWF9O3RoaXMuc3VwcG9ydHNDb21wcmVzc2VkVGV4dHVyZVMzVEM9ZnVuY3Rpb24oKXtyZXR1cm4gRmF9O3RoaXMuZ2V0TWF4QW5pc290cm9weT1mdW5jdGlvbigpe3JldHVybiBOYn07dGhpcy5nZXRQcmVjaXNpb249ZnVuY3Rpb24oKXtyZXR1cm4gTX07dGhpcy5zZXRTaXplPWZ1bmN0aW9uKGEsYixjKXtCLndpZHRoPWEqdGhpcy5kZXZpY2VQaXhlbFJhdGlvO0IuaGVpZ2h0PWIqdGhpcy5kZXZpY2VQaXhlbFJhdGlvOzEhPT10aGlzLmRldmljZVBpeGVsUmF0aW8mJiExIT09YyYmKEIuc3R5bGUud2lkdGg9YStcInB4XCIsQi5zdHlsZS5oZWlnaHQ9YitcInB4XCIpO3RoaXMuc2V0Vmlld3BvcnQoMCwwLEIud2lkdGgsQi5oZWlnaHQpfTt0aGlzLnNldFZpZXdwb3J0PWZ1bmN0aW9uKGEsYixjLGQpe2JiPXZvaWQgMCE9PWE/YTowO2NiPXZvaWQgMCE9PWI/YjowO01hPXZvaWQgMCE9PWM/YzpCLndpZHRoO1xuZmI9dm9pZCAwIT09ZD9kOkIuaGVpZ2h0O2oudmlld3BvcnQoYmIsY2IsTWEsZmIpfTt0aGlzLnNldFNjaXNzb3I9ZnVuY3Rpb24oYSxiLGMsZCl7ai5zY2lzc29yKGEsYixjLGQpfTt0aGlzLmVuYWJsZVNjaXNzb3JUZXN0PWZ1bmN0aW9uKGEpe2E/ai5lbmFibGUoai5TQ0lTU09SX1RFU1QpOmouZGlzYWJsZShqLlNDSVNTT1JfVEVTVCl9O3RoaXMuc2V0Q2xlYXJDb2xvcj1mdW5jdGlvbihhLGIpe1Euc2V0KGEpO1I9dm9pZCAwIT09Yj9iOjE7ai5jbGVhckNvbG9yKFEucixRLmcsUS5iLFIpfTt0aGlzLnNldENsZWFyQ29sb3JIZXg9ZnVuY3Rpb24oYSxiKXtjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEOiAuc2V0Q2xlYXJDb2xvckhleCgpIGlzIGJlaW5nIHJlbW92ZWQuIFVzZSAuc2V0Q2xlYXJDb2xvcigpIGluc3RlYWQuXCIpO3RoaXMuc2V0Q2xlYXJDb2xvcihhLGIpfTt0aGlzLmdldENsZWFyQ29sb3I9ZnVuY3Rpb24oKXtyZXR1cm4gUX07dGhpcy5nZXRDbGVhckFscGhhPWZ1bmN0aW9uKCl7cmV0dXJuIFJ9O1xudGhpcy5jbGVhcj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9MDtpZih2b2lkIDA9PT1hfHxhKWR8PWouQ09MT1JfQlVGRkVSX0JJVDtpZih2b2lkIDA9PT1ifHxiKWR8PWouREVQVEhfQlVGRkVSX0JJVDtpZih2b2lkIDA9PT1jfHxjKWR8PWouU1RFTkNJTF9CVUZGRVJfQklUO2ouY2xlYXIoZCl9O3RoaXMuY2xlYXJDb2xvcj1mdW5jdGlvbigpe2ouY2xlYXIoai5DT0xPUl9CVUZGRVJfQklUKX07dGhpcy5jbGVhckRlcHRoPWZ1bmN0aW9uKCl7ai5jbGVhcihqLkRFUFRIX0JVRkZFUl9CSVQpfTt0aGlzLmNsZWFyU3RlbmNpbD1mdW5jdGlvbigpe2ouY2xlYXIoai5TVEVOQ0lMX0JVRkZFUl9CSVQpfTt0aGlzLmNsZWFyVGFyZ2V0PWZ1bmN0aW9uKGEsYixjLGQpe3RoaXMuc2V0UmVuZGVyVGFyZ2V0KGEpO3RoaXMuY2xlYXIoYixjLGQpfTt0aGlzLmFkZFBvc3RQbHVnaW49ZnVuY3Rpb24oYSl7YS5pbml0KHRoaXMpO3RoaXMucmVuZGVyUGx1Z2luc1Bvc3QucHVzaChhKX07dGhpcy5hZGRQcmVQbHVnaW49XG5mdW5jdGlvbihhKXthLmluaXQodGhpcyk7dGhpcy5yZW5kZXJQbHVnaW5zUHJlLnB1c2goYSl9O3RoaXMudXBkYXRlU2hhZG93TWFwPWZ1bmN0aW9uKGEsYil7QmE9bnVsbDtBYT0kPWthPUdhPWphPS0xO3RhPSEwO1U9WT0tMTt0aGlzLnNoYWRvd01hcFBsdWdpbi51cGRhdGUoYSxiKX07dmFyIENiPWZ1bmN0aW9uKGEpe2E9YS50YXJnZXQ7YS5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLENiKTthLl9fd2ViZ2xJbml0PXZvaWQgMDtpZihhIGluc3RhbmNlb2YgVEhSRUUuQnVmZmVyR2VvbWV0cnkpe3ZhciBiPWEuYXR0cmlidXRlcyxjO2ZvcihjIGluIGIpdm9pZCAwIT09YltjXS5idWZmZXImJmouZGVsZXRlQnVmZmVyKGJbY10uYnVmZmVyKTtMLmluZm8ubWVtb3J5Lmdlb21ldHJpZXMtLX1lbHNlIGlmKHZvaWQgMCE9PWEuZ2VvbWV0cnlHcm91cHMpZm9yKGIgaW4gYS5nZW9tZXRyeUdyb3Vwcyl7Yz1hLmdlb21ldHJ5R3JvdXBzW2JdO2lmKHZvaWQgMCE9PWMubnVtTW9ycGhUYXJnZXRzKWZvcih2YXIgZD1cbjAsZT1jLm51bU1vcnBoVGFyZ2V0cztkPGU7ZCsrKWouZGVsZXRlQnVmZmVyKGMuX193ZWJnbE1vcnBoVGFyZ2V0c0J1ZmZlcnNbZF0pO2lmKHZvaWQgMCE9PWMubnVtTW9ycGhOb3JtYWxzKXtkPTA7Zm9yKGU9Yy5udW1Nb3JwaE5vcm1hbHM7ZDxlO2QrKylqLmRlbGV0ZUJ1ZmZlcihjLl9fd2ViZ2xNb3JwaE5vcm1hbHNCdWZmZXJzW2RdKX1IYihjKX1lbHNlIEhiKGEpfSxEYj1mdW5jdGlvbihhKXthPWEudGFyZ2V0O2EucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRpc3Bvc2VcIixEYik7YS5pbWFnZSYmYS5pbWFnZS5fX3dlYmdsVGV4dHVyZUN1YmU/ai5kZWxldGVUZXh0dXJlKGEuaW1hZ2UuX193ZWJnbFRleHR1cmVDdWJlKTphLl9fd2ViZ2xJbml0JiYoYS5fX3dlYmdsSW5pdD0hMSxqLmRlbGV0ZVRleHR1cmUoYS5fX3dlYmdsVGV4dHVyZSkpO0wuaW5mby5tZW1vcnkudGV4dHVyZXMtLX0sRWI9ZnVuY3Rpb24oYSl7YT1hLnRhcmdldDthLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkaXNwb3NlXCIsXG5FYik7aWYoYSYmYS5fX3dlYmdsVGV4dHVyZSlpZihqLmRlbGV0ZVRleHR1cmUoYS5fX3dlYmdsVGV4dHVyZSksYSBpbnN0YW5jZW9mIFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0Q3ViZSlmb3IodmFyIGI9MDs2PmI7YisrKWouZGVsZXRlRnJhbWVidWZmZXIoYS5fX3dlYmdsRnJhbWVidWZmZXJbYl0pLGouZGVsZXRlUmVuZGVyYnVmZmVyKGEuX193ZWJnbFJlbmRlcmJ1ZmZlcltiXSk7ZWxzZSBqLmRlbGV0ZUZyYW1lYnVmZmVyKGEuX193ZWJnbEZyYW1lYnVmZmVyKSxqLmRlbGV0ZVJlbmRlcmJ1ZmZlcihhLl9fd2ViZ2xSZW5kZXJidWZmZXIpO0wuaW5mby5tZW1vcnkudGV4dHVyZXMtLX0sRmI9ZnVuY3Rpb24oYSl7YT1hLnRhcmdldDthLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkaXNwb3NlXCIsRmIpO0diKGEpfSxIYj1mdW5jdGlvbihhKXt2b2lkIDAhPT1hLl9fd2ViZ2xWZXJ0ZXhCdWZmZXImJmouZGVsZXRlQnVmZmVyKGEuX193ZWJnbFZlcnRleEJ1ZmZlcik7dm9pZCAwIT09YS5fX3dlYmdsTm9ybWFsQnVmZmVyJiZcbmouZGVsZXRlQnVmZmVyKGEuX193ZWJnbE5vcm1hbEJ1ZmZlcik7dm9pZCAwIT09YS5fX3dlYmdsVGFuZ2VudEJ1ZmZlciYmai5kZWxldGVCdWZmZXIoYS5fX3dlYmdsVGFuZ2VudEJ1ZmZlcik7dm9pZCAwIT09YS5fX3dlYmdsQ29sb3JCdWZmZXImJmouZGVsZXRlQnVmZmVyKGEuX193ZWJnbENvbG9yQnVmZmVyKTt2b2lkIDAhPT1hLl9fd2ViZ2xVVkJ1ZmZlciYmai5kZWxldGVCdWZmZXIoYS5fX3dlYmdsVVZCdWZmZXIpO3ZvaWQgMCE9PWEuX193ZWJnbFVWMkJ1ZmZlciYmai5kZWxldGVCdWZmZXIoYS5fX3dlYmdsVVYyQnVmZmVyKTt2b2lkIDAhPT1hLl9fd2ViZ2xTa2luSW5kaWNlc0J1ZmZlciYmai5kZWxldGVCdWZmZXIoYS5fX3dlYmdsU2tpbkluZGljZXNCdWZmZXIpO3ZvaWQgMCE9PWEuX193ZWJnbFNraW5XZWlnaHRzQnVmZmVyJiZqLmRlbGV0ZUJ1ZmZlcihhLl9fd2ViZ2xTa2luV2VpZ2h0c0J1ZmZlcik7dm9pZCAwIT09YS5fX3dlYmdsRmFjZUJ1ZmZlciYmai5kZWxldGVCdWZmZXIoYS5fX3dlYmdsRmFjZUJ1ZmZlcik7XG52b2lkIDAhPT1hLl9fd2ViZ2xMaW5lQnVmZmVyJiZqLmRlbGV0ZUJ1ZmZlcihhLl9fd2ViZ2xMaW5lQnVmZmVyKTt2b2lkIDAhPT1hLl9fd2ViZ2xMaW5lRGlzdGFuY2VCdWZmZXImJmouZGVsZXRlQnVmZmVyKGEuX193ZWJnbExpbmVEaXN0YW5jZUJ1ZmZlcik7aWYodm9pZCAwIT09YS5fX3dlYmdsQ3VzdG9tQXR0cmlidXRlc0xpc3QpZm9yKHZhciBiIGluIGEuX193ZWJnbEN1c3RvbUF0dHJpYnV0ZXNMaXN0KWouZGVsZXRlQnVmZmVyKGEuX193ZWJnbEN1c3RvbUF0dHJpYnV0ZXNMaXN0W2JdLmJ1ZmZlcik7TC5pbmZvLm1lbW9yeS5nZW9tZXRyaWVzLS19LEdiPWZ1bmN0aW9uKGEpe3ZhciBiPWEucHJvZ3JhbTtpZih2b2lkIDAhPT1iKXthLnByb2dyYW09dm9pZCAwO3ZhciBjLGQsZT0hMSxhPTA7Zm9yKGM9ZGEubGVuZ3RoO2E8YzthKyspaWYoZD1kYVthXSxkLnByb2dyYW09PT1iKXtkLnVzZWRUaW1lcy0tOzA9PT1kLnVzZWRUaW1lcyYmKGU9ITApO2JyZWFrfWlmKCEwPT09ZSl7ZT1cbltdO2E9MDtmb3IoYz1kYS5sZW5ndGg7YTxjO2ErKylkPWRhW2FdLGQucHJvZ3JhbSE9PWImJmUucHVzaChkKTtkYT1lO2ouZGVsZXRlUHJvZ3JhbShiKTtMLmluZm8ubWVtb3J5LnByb2dyYW1zLS19fX07dGhpcy5yZW5kZXJCdWZmZXJJbW1lZGlhdGU9ZnVuY3Rpb24oYSxiLGMpe2EuaGFzUG9zaXRpb25zJiYhYS5fX3dlYmdsVmVydGV4QnVmZmVyJiYoYS5fX3dlYmdsVmVydGV4QnVmZmVyPWouY3JlYXRlQnVmZmVyKCkpO2EuaGFzTm9ybWFscyYmIWEuX193ZWJnbE5vcm1hbEJ1ZmZlciYmKGEuX193ZWJnbE5vcm1hbEJ1ZmZlcj1qLmNyZWF0ZUJ1ZmZlcigpKTthLmhhc1V2cyYmIWEuX193ZWJnbFV2QnVmZmVyJiYoYS5fX3dlYmdsVXZCdWZmZXI9ai5jcmVhdGVCdWZmZXIoKSk7YS5oYXNDb2xvcnMmJiFhLl9fd2ViZ2xDb2xvckJ1ZmZlciYmKGEuX193ZWJnbENvbG9yQnVmZmVyPWouY3JlYXRlQnVmZmVyKCkpO2EuaGFzUG9zaXRpb25zJiYoai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLFxuYS5fX3dlYmdsVmVydGV4QnVmZmVyKSxqLmJ1ZmZlckRhdGEoai5BUlJBWV9CVUZGRVIsYS5wb3NpdGlvbkFycmF5LGouRFlOQU1JQ19EUkFXKSxqLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGIuYXR0cmlidXRlcy5wb3NpdGlvbiksai52ZXJ0ZXhBdHRyaWJQb2ludGVyKGIuYXR0cmlidXRlcy5wb3NpdGlvbiwzLGouRkxPQVQsITEsMCwwKSk7aWYoYS5oYXNOb3JtYWxzKXtqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsYS5fX3dlYmdsTm9ybWFsQnVmZmVyKTtpZihjLnNoYWRpbmc9PT1USFJFRS5GbGF0U2hhZGluZyl7dmFyIGQsZSxmLGcsaCxpLGssbCxtLG4scCxxPTMqYS5jb3VudDtmb3IocD0wO3A8cTtwKz05KW49YS5ub3JtYWxBcnJheSxkPW5bcF0sZT1uW3ArMV0sZj1uW3ArMl0sZz1uW3ArM10saT1uW3ArNF0sbD1uW3ArNV0saD1uW3ArNl0saz1uW3ArN10sbT1uW3ArOF0sZD0oZCtnK2gpLzMsZT0oZStpK2spLzMsZj0oZitsK20pLzMsbltwXT1kLG5bcCsxXT1lLG5bcCtcbjJdPWYsbltwKzNdPWQsbltwKzRdPWUsbltwKzVdPWYsbltwKzZdPWQsbltwKzddPWUsbltwKzhdPWZ9ai5idWZmZXJEYXRhKGouQVJSQVlfQlVGRkVSLGEubm9ybWFsQXJyYXksai5EWU5BTUlDX0RSQVcpO2ouZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoYi5hdHRyaWJ1dGVzLm5vcm1hbCk7ai52ZXJ0ZXhBdHRyaWJQb2ludGVyKGIuYXR0cmlidXRlcy5ub3JtYWwsMyxqLkZMT0FULCExLDAsMCl9YS5oYXNVdnMmJmMubWFwJiYoai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLGEuX193ZWJnbFV2QnVmZmVyKSxqLmJ1ZmZlckRhdGEoai5BUlJBWV9CVUZGRVIsYS51dkFycmF5LGouRFlOQU1JQ19EUkFXKSxqLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGIuYXR0cmlidXRlcy51diksai52ZXJ0ZXhBdHRyaWJQb2ludGVyKGIuYXR0cmlidXRlcy51diwyLGouRkxPQVQsITEsMCwwKSk7YS5oYXNDb2xvcnMmJmMudmVydGV4Q29sb3JzIT09VEhSRUUuTm9Db2xvcnMmJihqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsXG5hLl9fd2ViZ2xDb2xvckJ1ZmZlciksai5idWZmZXJEYXRhKGouQVJSQVlfQlVGRkVSLGEuY29sb3JBcnJheSxqLkRZTkFNSUNfRFJBVyksai5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShiLmF0dHJpYnV0ZXMuY29sb3IpLGoudmVydGV4QXR0cmliUG9pbnRlcihiLmF0dHJpYnV0ZXMuY29sb3IsMyxqLkZMT0FULCExLDAsMCkpO2ouZHJhd0FycmF5cyhqLlRSSUFOR0xFUywwLGEuY291bnQpO2EuY291bnQ9MH07dGhpcy5yZW5kZXJCdWZmZXJEaXJlY3Q9ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe2lmKCExIT09ZC52aXNpYmxlKXt2YXIgaSxrLGwsbTtpPXooYSxiLGMsZCxmKTtiPWkuYXR0cmlidXRlczthPWUuYXR0cmlidXRlcztjPSExO2k9MTY3NzcyMTUqZS5pZCsyKmkuaWQrKGQud2lyZWZyYW1lPzE6MCk7aSE9PSQmJigkPWksYz0hMCk7YyYmZygpO2lmKGYgaW5zdGFuY2VvZiBUSFJFRS5NZXNoKWlmKGY9YS5pbmRleCl7ZT1lLm9mZnNldHM7MTxlLmxlbmd0aCYmKGM9ITApO2Zvcih2YXIgbj1cbjAscD1lLmxlbmd0aDtuPHA7bisrKXt2YXIgcT1lW25dLmluZGV4O2lmKGMpe2ZvcihrIGluIGIpbD1iW2tdLGk9YVtrXSwwPD1sJiYoaT8obT1pLml0ZW1TaXplLGouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUixpLmJ1ZmZlciksaChsKSxqLnZlcnRleEF0dHJpYlBvaW50ZXIobCxtLGouRkxPQVQsITEsMCw0KnEqbSkpOmQuZGVmYXVsdEF0dHJpYnV0ZVZhbHVlcyYmKDI9PT1kLmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXNba10ubGVuZ3RoP2oudmVydGV4QXR0cmliMmZ2KGwsZC5kZWZhdWx0QXR0cmlidXRlVmFsdWVzW2tdKTozPT09ZC5kZWZhdWx0QXR0cmlidXRlVmFsdWVzW2tdLmxlbmd0aCYmai52ZXJ0ZXhBdHRyaWIzZnYobCxkLmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXNba10pKSk7ai5iaW5kQnVmZmVyKGouRUxFTUVOVF9BUlJBWV9CVUZGRVIsZi5idWZmZXIpfWouZHJhd0VsZW1lbnRzKGouVFJJQU5HTEVTLGVbbl0uY291bnQsai5VTlNJR05FRF9TSE9SVCwyKmVbbl0uc3RhcnQpO1xuTC5pbmZvLnJlbmRlci5jYWxscysrO0wuaW5mby5yZW5kZXIudmVydGljZXMrPWVbbl0uY291bnQ7TC5pbmZvLnJlbmRlci5mYWNlcys9ZVtuXS5jb3VudC8zfX1lbHNle2lmKGMpZm9yKGsgaW4gYilcImluZGV4XCIhPT1rJiYobD1iW2tdLGk9YVtrXSwwPD1sJiYoaT8obT1pLml0ZW1TaXplLGouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUixpLmJ1ZmZlciksaChsKSxqLnZlcnRleEF0dHJpYlBvaW50ZXIobCxtLGouRkxPQVQsITEsMCwwKSk6ZC5kZWZhdWx0QXR0cmlidXRlVmFsdWVzJiZkLmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXNba10mJigyPT09ZC5kZWZhdWx0QXR0cmlidXRlVmFsdWVzW2tdLmxlbmd0aD9qLnZlcnRleEF0dHJpYjJmdihsLGQuZGVmYXVsdEF0dHJpYnV0ZVZhbHVlc1trXSk6Mz09PWQuZGVmYXVsdEF0dHJpYnV0ZVZhbHVlc1trXS5sZW5ndGgmJmoudmVydGV4QXR0cmliM2Z2KGwsZC5kZWZhdWx0QXR0cmlidXRlVmFsdWVzW2tdKSkpKTtkPWUuYXR0cmlidXRlcy5wb3NpdGlvbjtcbmouZHJhd0FycmF5cyhqLlRSSUFOR0xFUywwLGQubnVtSXRlbXMvMyk7TC5pbmZvLnJlbmRlci5jYWxscysrO0wuaW5mby5yZW5kZXIudmVydGljZXMrPWQubnVtSXRlbXMvMztMLmluZm8ucmVuZGVyLmZhY2VzKz1kLm51bUl0ZW1zLzMvM31lbHNlIGlmKGYgaW5zdGFuY2VvZiBUSFJFRS5QYXJ0aWNsZVN5c3RlbSl7aWYoYyl7Zm9yKGsgaW4gYilsPWJba10saT1hW2tdLDA8PWwmJihpPyhtPWkuaXRlbVNpemUsai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLGkuYnVmZmVyKSxoKGwpLGoudmVydGV4QXR0cmliUG9pbnRlcihsLG0sai5GTE9BVCwhMSwwLDApKTpkLmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXMmJmQuZGVmYXVsdEF0dHJpYnV0ZVZhbHVlc1trXSYmKDI9PT1kLmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXNba10ubGVuZ3RoP2oudmVydGV4QXR0cmliMmZ2KGwsZC5kZWZhdWx0QXR0cmlidXRlVmFsdWVzW2tdKTozPT09ZC5kZWZhdWx0QXR0cmlidXRlVmFsdWVzW2tdLmxlbmd0aCYmXG5qLnZlcnRleEF0dHJpYjNmdihsLGQuZGVmYXVsdEF0dHJpYnV0ZVZhbHVlc1trXSkpKTtkPWEucG9zaXRpb247ai5kcmF3QXJyYXlzKGouUE9JTlRTLDAsZC5udW1JdGVtcy8zKTtMLmluZm8ucmVuZGVyLmNhbGxzKys7TC5pbmZvLnJlbmRlci5wb2ludHMrPWQubnVtSXRlbXMvM319ZWxzZSBpZihmIGluc3RhbmNlb2YgVEhSRUUuTGluZSYmYyl7Zm9yKGsgaW4gYilsPWJba10saT1hW2tdLDA8PWwmJihpPyhtPWkuaXRlbVNpemUsai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLGkuYnVmZmVyKSxoKGwpLGoudmVydGV4QXR0cmliUG9pbnRlcihsLG0sai5GTE9BVCwhMSwwLDApKTpkLmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXMmJmQuZGVmYXVsdEF0dHJpYnV0ZVZhbHVlc1trXSYmKDI9PT1kLmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXNba10ubGVuZ3RoP2oudmVydGV4QXR0cmliMmZ2KGwsZC5kZWZhdWx0QXR0cmlidXRlVmFsdWVzW2tdKTozPT09ZC5kZWZhdWx0QXR0cmlidXRlVmFsdWVzW2tdLmxlbmd0aCYmXG5qLnZlcnRleEF0dHJpYjNmdihsLGQuZGVmYXVsdEF0dHJpYnV0ZVZhbHVlc1trXSkpKTtrPWYudHlwZT09PVRIUkVFLkxpbmVTdHJpcD9qLkxJTkVfU1RSSVA6ai5MSU5FUztFKGQubGluZXdpZHRoKTtkPWEucG9zaXRpb247ai5kcmF3QXJyYXlzKGssMCxkLm51bUl0ZW1zLzMpO0wuaW5mby5yZW5kZXIuY2FsbHMrKztMLmluZm8ucmVuZGVyLnBvaW50cys9ZC5udW1JdGVtc319fTt0aGlzLnJlbmRlckJ1ZmZlcj1mdW5jdGlvbihhLGIsYyxkLGUsZil7aWYoITEhPT1kLnZpc2libGUpe3ZhciBpLGwsYz16KGEsYixjLGQsZiksYT1jLmF0dHJpYnV0ZXMsYj0hMSxjPTE2Nzc3MjE1KmUuaWQrMipjLmlkKyhkLndpcmVmcmFtZT8xOjApO2MhPT0kJiYoJD1jLGI9ITApO2ImJmcoKTtpZighZC5tb3JwaFRhcmdldHMmJjA8PWEucG9zaXRpb24pYiYmKGouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUixlLl9fd2ViZ2xWZXJ0ZXhCdWZmZXIpLGgoYS5wb3NpdGlvbiksai52ZXJ0ZXhBdHRyaWJQb2ludGVyKGEucG9zaXRpb24sXG4zLGouRkxPQVQsITEsMCwwKSk7ZWxzZSBpZihmLm1vcnBoVGFyZ2V0QmFzZSl7Yz1kLnByb2dyYW0uYXR0cmlidXRlczstMSE9PWYubW9ycGhUYXJnZXRCYXNlJiYwPD1jLnBvc2l0aW9uPyhqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsZS5fX3dlYmdsTW9ycGhUYXJnZXRzQnVmZmVyc1tmLm1vcnBoVGFyZ2V0QmFzZV0pLGgoYy5wb3NpdGlvbiksai52ZXJ0ZXhBdHRyaWJQb2ludGVyKGMucG9zaXRpb24sMyxqLkZMT0FULCExLDAsMCkpOjA8PWMucG9zaXRpb24mJihqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsZS5fX3dlYmdsVmVydGV4QnVmZmVyKSxoKGMucG9zaXRpb24pLGoudmVydGV4QXR0cmliUG9pbnRlcihjLnBvc2l0aW9uLDMsai5GTE9BVCwhMSwwLDApKTtpZihmLm1vcnBoVGFyZ2V0Rm9yY2VkT3JkZXIubGVuZ3RoKXt2YXIgbT0wO2w9Zi5tb3JwaFRhcmdldEZvcmNlZE9yZGVyO2ZvcihpPWYubW9ycGhUYXJnZXRJbmZsdWVuY2VzO208ZC5udW1TdXBwb3J0ZWRNb3JwaFRhcmdldHMmJlxubTxsLmxlbmd0aDspMDw9Y1tcIm1vcnBoVGFyZ2V0XCIrbV0mJihqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsZS5fX3dlYmdsTW9ycGhUYXJnZXRzQnVmZmVyc1tsW21dXSksaChjW1wibW9ycGhUYXJnZXRcIittXSksai52ZXJ0ZXhBdHRyaWJQb2ludGVyKGNbXCJtb3JwaFRhcmdldFwiK21dLDMsai5GTE9BVCwhMSwwLDApKSwwPD1jW1wibW9ycGhOb3JtYWxcIittXSYmZC5tb3JwaE5vcm1hbHMmJihqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsZS5fX3dlYmdsTW9ycGhOb3JtYWxzQnVmZmVyc1tsW21dXSksaChjW1wibW9ycGhOb3JtYWxcIittXSksai52ZXJ0ZXhBdHRyaWJQb2ludGVyKGNbXCJtb3JwaE5vcm1hbFwiK21dLDMsai5GTE9BVCwhMSwwLDApKSxmLl9fd2ViZ2xNb3JwaFRhcmdldEluZmx1ZW5jZXNbbV09aVtsW21dXSxtKyt9ZWxzZXtsPVtdO2k9Zi5tb3JwaFRhcmdldEluZmx1ZW5jZXM7dmFyIG4scD1pLmxlbmd0aDtmb3Iobj0wO248cDtuKyspbT1pW25dLDA8bSYmbC5wdXNoKFttLFxubl0pO2wubGVuZ3RoPmQubnVtU3VwcG9ydGVkTW9ycGhUYXJnZXRzPyhsLnNvcnQoayksbC5sZW5ndGg9ZC5udW1TdXBwb3J0ZWRNb3JwaFRhcmdldHMpOmwubGVuZ3RoPmQubnVtU3VwcG9ydGVkTW9ycGhOb3JtYWxzP2wuc29ydChrKTowPT09bC5sZW5ndGgmJmwucHVzaChbMCwwXSk7Zm9yKG09MDttPGQubnVtU3VwcG9ydGVkTW9ycGhUYXJnZXRzOylsW21dPyhuPWxbbV1bMV0sMDw9Y1tcIm1vcnBoVGFyZ2V0XCIrbV0mJihqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsZS5fX3dlYmdsTW9ycGhUYXJnZXRzQnVmZmVyc1tuXSksaChjW1wibW9ycGhUYXJnZXRcIittXSksai52ZXJ0ZXhBdHRyaWJQb2ludGVyKGNbXCJtb3JwaFRhcmdldFwiK21dLDMsai5GTE9BVCwhMSwwLDApKSwwPD1jW1wibW9ycGhOb3JtYWxcIittXSYmZC5tb3JwaE5vcm1hbHMmJihqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsZS5fX3dlYmdsTW9ycGhOb3JtYWxzQnVmZmVyc1tuXSksaChjW1wibW9ycGhOb3JtYWxcIitcbm1dKSxqLnZlcnRleEF0dHJpYlBvaW50ZXIoY1tcIm1vcnBoTm9ybWFsXCIrbV0sMyxqLkZMT0FULCExLDAsMCkpLGYuX193ZWJnbE1vcnBoVGFyZ2V0SW5mbHVlbmNlc1ttXT1pW25dKTpmLl9fd2ViZ2xNb3JwaFRhcmdldEluZmx1ZW5jZXNbbV09MCxtKyt9bnVsbCE9PWQucHJvZ3JhbS51bmlmb3Jtcy5tb3JwaFRhcmdldEluZmx1ZW5jZXMmJmoudW5pZm9ybTFmdihkLnByb2dyYW0udW5pZm9ybXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzLGYuX193ZWJnbE1vcnBoVGFyZ2V0SW5mbHVlbmNlcyl9aWYoYil7aWYoZS5fX3dlYmdsQ3VzdG9tQXR0cmlidXRlc0xpc3Qpe2k9MDtmb3IobD1lLl9fd2ViZ2xDdXN0b21BdHRyaWJ1dGVzTGlzdC5sZW5ndGg7aTxsO2krKyljPWUuX193ZWJnbEN1c3RvbUF0dHJpYnV0ZXNMaXN0W2ldLDA8PWFbYy5idWZmZXIuYmVsb25nc1RvQXR0cmlidXRlXSYmKGouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUixjLmJ1ZmZlciksaChhW2MuYnVmZmVyLmJlbG9uZ3NUb0F0dHJpYnV0ZV0pLFxuai52ZXJ0ZXhBdHRyaWJQb2ludGVyKGFbYy5idWZmZXIuYmVsb25nc1RvQXR0cmlidXRlXSxjLnNpemUsai5GTE9BVCwhMSwwLDApKX0wPD1hLmNvbG9yJiYoMDxmLmdlb21ldHJ5LmNvbG9ycy5sZW5ndGh8fDA8Zi5nZW9tZXRyeS5mYWNlcy5sZW5ndGg/KGouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUixlLl9fd2ViZ2xDb2xvckJ1ZmZlciksaChhLmNvbG9yKSxqLnZlcnRleEF0dHJpYlBvaW50ZXIoYS5jb2xvciwzLGouRkxPQVQsITEsMCwwKSk6ZC5kZWZhdWx0QXR0cmlidXRlVmFsdWVzJiZqLnZlcnRleEF0dHJpYjNmdihhLmNvbG9yLGQuZGVmYXVsdEF0dHJpYnV0ZVZhbHVlcy5jb2xvcikpOzA8PWEubm9ybWFsJiYoai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLGUuX193ZWJnbE5vcm1hbEJ1ZmZlciksaChhLm5vcm1hbCksai52ZXJ0ZXhBdHRyaWJQb2ludGVyKGEubm9ybWFsLDMsai5GTE9BVCwhMSwwLDApKTswPD1hLnRhbmdlbnQmJihqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsXG5lLl9fd2ViZ2xUYW5nZW50QnVmZmVyKSxoKGEudGFuZ2VudCksai52ZXJ0ZXhBdHRyaWJQb2ludGVyKGEudGFuZ2VudCw0LGouRkxPQVQsITEsMCwwKSk7MDw9YS51diYmKGYuZ2VvbWV0cnkuZmFjZVZlcnRleFV2c1swXT8oai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLGUuX193ZWJnbFVWQnVmZmVyKSxoKGEudXYpLGoudmVydGV4QXR0cmliUG9pbnRlcihhLnV2LDIsai5GTE9BVCwhMSwwLDApKTpkLmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXMmJmoudmVydGV4QXR0cmliMmZ2KGEudXYsZC5kZWZhdWx0QXR0cmlidXRlVmFsdWVzLnV2KSk7MDw9YS51djImJihmLmdlb21ldHJ5LmZhY2VWZXJ0ZXhVdnNbMV0/KGouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUixlLl9fd2ViZ2xVVjJCdWZmZXIpLGgoYS51djIpLGoudmVydGV4QXR0cmliUG9pbnRlcihhLnV2MiwyLGouRkxPQVQsITEsMCwwKSk6ZC5kZWZhdWx0QXR0cmlidXRlVmFsdWVzJiZqLnZlcnRleEF0dHJpYjJmdihhLnV2MixcbmQuZGVmYXVsdEF0dHJpYnV0ZVZhbHVlcy51djIpKTtkLnNraW5uaW5nJiYoMDw9YS5za2luSW5kZXgmJjA8PWEuc2tpbldlaWdodCkmJihqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsZS5fX3dlYmdsU2tpbkluZGljZXNCdWZmZXIpLGgoYS5za2luSW5kZXgpLGoudmVydGV4QXR0cmliUG9pbnRlcihhLnNraW5JbmRleCw0LGouRkxPQVQsITEsMCwwKSxqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsZS5fX3dlYmdsU2tpbldlaWdodHNCdWZmZXIpLGgoYS5za2luV2VpZ2h0KSxqLnZlcnRleEF0dHJpYlBvaW50ZXIoYS5za2luV2VpZ2h0LDQsai5GTE9BVCwhMSwwLDApKTswPD1hLmxpbmVEaXN0YW5jZSYmKGouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUixlLl9fd2ViZ2xMaW5lRGlzdGFuY2VCdWZmZXIpLGgoYS5saW5lRGlzdGFuY2UpLGoudmVydGV4QXR0cmliUG9pbnRlcihhLmxpbmVEaXN0YW5jZSwxLGouRkxPQVQsITEsMCwwKSl9ZiBpbnN0YW5jZW9mIFRIUkVFLk1lc2g/XG4oZC53aXJlZnJhbWU/KEUoZC53aXJlZnJhbWVMaW5ld2lkdGgpLGImJmouYmluZEJ1ZmZlcihqLkVMRU1FTlRfQVJSQVlfQlVGRkVSLGUuX193ZWJnbExpbmVCdWZmZXIpLGouZHJhd0VsZW1lbnRzKGouTElORVMsZS5fX3dlYmdsTGluZUNvdW50LGouVU5TSUdORURfU0hPUlQsMCkpOihiJiZqLmJpbmRCdWZmZXIoai5FTEVNRU5UX0FSUkFZX0JVRkZFUixlLl9fd2ViZ2xGYWNlQnVmZmVyKSxqLmRyYXdFbGVtZW50cyhqLlRSSUFOR0xFUyxlLl9fd2ViZ2xGYWNlQ291bnQsai5VTlNJR05FRF9TSE9SVCwwKSksTC5pbmZvLnJlbmRlci5jYWxscysrLEwuaW5mby5yZW5kZXIudmVydGljZXMrPWUuX193ZWJnbEZhY2VDb3VudCxMLmluZm8ucmVuZGVyLmZhY2VzKz1lLl9fd2ViZ2xGYWNlQ291bnQvMyk6ZiBpbnN0YW5jZW9mIFRIUkVFLkxpbmU/KGY9Zi50eXBlPT09VEhSRUUuTGluZVN0cmlwP2ouTElORV9TVFJJUDpqLkxJTkVTLEUoZC5saW5ld2lkdGgpLGouZHJhd0FycmF5cyhmLDAsXG5lLl9fd2ViZ2xMaW5lQ291bnQpLEwuaW5mby5yZW5kZXIuY2FsbHMrKyk6ZiBpbnN0YW5jZW9mIFRIUkVFLlBhcnRpY2xlU3lzdGVtJiYoai5kcmF3QXJyYXlzKGouUE9JTlRTLDAsZS5fX3dlYmdsUGFydGljbGVDb3VudCksTC5pbmZvLnJlbmRlci5jYWxscysrLEwuaW5mby5yZW5kZXIucG9pbnRzKz1lLl9fd2ViZ2xQYXJ0aWNsZUNvdW50KX19O3RoaXMucmVuZGVyPWZ1bmN0aW9uKGEsYixjLGQpe2lmKCExPT09YiBpbnN0YW5jZW9mIFRIUkVFLkNhbWVyYSljb25zb2xlLmVycm9yKFwiVEhSRUUuV2ViR0xSZW5kZXJlci5yZW5kZXI6IGNhbWVyYSBpcyBub3QgYW4gaW5zdGFuY2Ugb2YgVEhSRUUuQ2FtZXJhLlwiKTtlbHNle3ZhciBlLGYsZyxoLGs9YS5fX2xpZ2h0cyxuPWEuZm9nO0FhPS0xO3RhPSEwOyEwPT09YS5hdXRvVXBkYXRlJiZhLnVwZGF0ZU1hdHJpeFdvcmxkKCk7dm9pZCAwPT09Yi5wYXJlbnQmJmIudXBkYXRlTWF0cml4V29ybGQoKTtiLm1hdHJpeFdvcmxkSW52ZXJzZS5nZXRJbnZlcnNlKGIubWF0cml4V29ybGQpO1xuRWEubXVsdGlwbHlNYXRyaWNlcyhiLnByb2plY3Rpb25NYXRyaXgsYi5tYXRyaXhXb3JsZEludmVyc2UpO2xhLnNldEZyb21NYXRyaXgoRWEpO3RoaXMuYXV0b1VwZGF0ZU9iamVjdHMmJnRoaXMuaW5pdFdlYkdMT2JqZWN0cyhhKTttKHRoaXMucmVuZGVyUGx1Z2luc1ByZSxhLGIpO0wuaW5mby5yZW5kZXIuY2FsbHM9MDtMLmluZm8ucmVuZGVyLnZlcnRpY2VzPTA7TC5pbmZvLnJlbmRlci5mYWNlcz0wO0wuaW5mby5yZW5kZXIucG9pbnRzPTA7dGhpcy5zZXRSZW5kZXJUYXJnZXQoYyk7KHRoaXMuYXV0b0NsZWFyfHxkKSYmdGhpcy5jbGVhcih0aGlzLmF1dG9DbGVhckNvbG9yLHRoaXMuYXV0b0NsZWFyRGVwdGgsdGhpcy5hdXRvQ2xlYXJTdGVuY2lsKTtoPWEuX193ZWJnbE9iamVjdHM7ZD0wO2ZvcihlPWgubGVuZ3RoO2Q8ZTtkKyspaWYoZj1oW2RdLGc9Zi5vYmplY3QsZi5pZD1kLGYucmVuZGVyPSExLGcudmlzaWJsZSYmKCEoZyBpbnN0YW5jZW9mIFRIUkVFLk1lc2h8fGcgaW5zdGFuY2VvZlxuVEhSRUUuUGFydGljbGVTeXN0ZW0pfHwhZy5mcnVzdHVtQ3VsbGVkfHxsYS5pbnRlcnNlY3RzT2JqZWN0KGcpKSl7dmFyIHE9ZztxLl9tb2RlbFZpZXdNYXRyaXgubXVsdGlwbHlNYXRyaWNlcyhiLm1hdHJpeFdvcmxkSW52ZXJzZSxxLm1hdHJpeFdvcmxkKTtxLl9ub3JtYWxNYXRyaXguZ2V0Tm9ybWFsTWF0cml4KHEuX21vZGVsVmlld01hdHJpeCk7dmFyIHE9ZixyPXEuYnVmZmVyLHQ9dm9pZCAwLHM9dD12b2lkIDAscz1xLm9iamVjdC5tYXRlcmlhbDtpZihzIGluc3RhbmNlb2YgVEhSRUUuTWVzaEZhY2VNYXRlcmlhbCl0PXIubWF0ZXJpYWxJbmRleCx0PXMubWF0ZXJpYWxzW3RdLHQudHJhbnNwYXJlbnQ/KHEudHJhbnNwYXJlbnQ9dCxxLm9wYXF1ZT1udWxsKToocS5vcGFxdWU9dCxxLnRyYW5zcGFyZW50PW51bGwpO2Vsc2UgaWYodD1zKXQudHJhbnNwYXJlbnQ/KHEudHJhbnNwYXJlbnQ9dCxxLm9wYXF1ZT1udWxsKToocS5vcGFxdWU9dCxxLnRyYW5zcGFyZW50PW51bGwpO2YucmVuZGVyPVxuITA7ITA9PT10aGlzLnNvcnRPYmplY3RzJiYobnVsbCE9PWcucmVuZGVyRGVwdGg/Zi56PWcucmVuZGVyRGVwdGg6KHJhLnNldEZyb21NYXRyaXhQb3NpdGlvbihnLm1hdHJpeFdvcmxkKSxyYS5hcHBseVByb2plY3Rpb24oRWEpLGYuej1yYS56KSl9dGhpcy5zb3J0T2JqZWN0cyYmaC5zb3J0KGkpO2g9YS5fX3dlYmdsT2JqZWN0c0ltbWVkaWF0ZTtkPTA7Zm9yKGU9aC5sZW5ndGg7ZDxlO2QrKylmPWhbZF0sZz1mLm9iamVjdCxnLnZpc2libGUmJihnLl9tb2RlbFZpZXdNYXRyaXgubXVsdGlwbHlNYXRyaWNlcyhiLm1hdHJpeFdvcmxkSW52ZXJzZSxnLm1hdHJpeFdvcmxkKSxnLl9ub3JtYWxNYXRyaXguZ2V0Tm9ybWFsTWF0cml4KGcuX21vZGVsVmlld01hdHJpeCksZz1mLm9iamVjdC5tYXRlcmlhbCxnLnRyYW5zcGFyZW50PyhmLnRyYW5zcGFyZW50PWcsZi5vcGFxdWU9bnVsbCk6KGYub3BhcXVlPWcsZi50cmFuc3BhcmVudD1udWxsKSk7YS5vdmVycmlkZU1hdGVyaWFsPyhkPWEub3ZlcnJpZGVNYXRlcmlhbCxcbnRoaXMuc2V0QmxlbmRpbmcoZC5ibGVuZGluZyxkLmJsZW5kRXF1YXRpb24sZC5ibGVuZFNyYyxkLmJsZW5kRHN0KSx0aGlzLnNldERlcHRoVGVzdChkLmRlcHRoVGVzdCksdGhpcy5zZXREZXB0aFdyaXRlKGQuZGVwdGhXcml0ZSksQShkLnBvbHlnb25PZmZzZXQsZC5wb2x5Z29uT2Zmc2V0RmFjdG9yLGQucG9seWdvbk9mZnNldFVuaXRzKSxsKGEuX193ZWJnbE9iamVjdHMsITEsXCJcIixiLGssbiwhMCxkKSxwKGEuX193ZWJnbE9iamVjdHNJbW1lZGlhdGUsXCJcIixiLGssbiwhMSxkKSk6KGQ9bnVsbCx0aGlzLnNldEJsZW5kaW5nKFRIUkVFLk5vQmxlbmRpbmcpLGwoYS5fX3dlYmdsT2JqZWN0cywhMCxcIm9wYXF1ZVwiLGIsayxuLCExLGQpLHAoYS5fX3dlYmdsT2JqZWN0c0ltbWVkaWF0ZSxcIm9wYXF1ZVwiLGIsayxuLCExLGQpLGwoYS5fX3dlYmdsT2JqZWN0cywhMSxcInRyYW5zcGFyZW50XCIsYixrLG4sITAsZCkscChhLl9fd2ViZ2xPYmplY3RzSW1tZWRpYXRlLFwidHJhbnNwYXJlbnRcIixiLFxuayxuLCEwLGQpKTttKHRoaXMucmVuZGVyUGx1Z2luc1Bvc3QsYSxiKTtjJiYoYy5nZW5lcmF0ZU1pcG1hcHMmJmMubWluRmlsdGVyIT09VEhSRUUuTmVhcmVzdEZpbHRlciYmYy5taW5GaWx0ZXIhPT1USFJFRS5MaW5lYXJGaWx0ZXIpJiYoYyBpbnN0YW5jZW9mIFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0Q3ViZT8oai5iaW5kVGV4dHVyZShqLlRFWFRVUkVfQ1VCRV9NQVAsYy5fX3dlYmdsVGV4dHVyZSksai5nZW5lcmF0ZU1pcG1hcChqLlRFWFRVUkVfQ1VCRV9NQVApLGouYmluZFRleHR1cmUoai5URVhUVVJFX0NVQkVfTUFQLG51bGwpKTooai5iaW5kVGV4dHVyZShqLlRFWFRVUkVfMkQsYy5fX3dlYmdsVGV4dHVyZSksai5nZW5lcmF0ZU1pcG1hcChqLlRFWFRVUkVfMkQpLGouYmluZFRleHR1cmUoai5URVhUVVJFXzJELG51bGwpKSk7dGhpcy5zZXREZXB0aFRlc3QoITApO3RoaXMuc2V0RGVwdGhXcml0ZSghMCl9fTt0aGlzLnJlbmRlckltbWVkaWF0ZU9iamVjdD1mdW5jdGlvbihhLFxuYixjLGQsZSl7dmFyIGY9eihhLGIsYyxkLGUpOyQ9LTE7TC5zZXRNYXRlcmlhbEZhY2VzKGQpO2UuaW1tZWRpYXRlUmVuZGVyQ2FsbGJhY2s/ZS5pbW1lZGlhdGVSZW5kZXJDYWxsYmFjayhmLGosbGEpOmUucmVuZGVyKGZ1bmN0aW9uKGEpe0wucmVuZGVyQnVmZmVySW1tZWRpYXRlKGEsZixkKX0pfTt0aGlzLmluaXRXZWJHTE9iamVjdHM9ZnVuY3Rpb24oYSl7YS5fX3dlYmdsT2JqZWN0c3x8KGEuX193ZWJnbE9iamVjdHM9W10sYS5fX3dlYmdsT2JqZWN0c0ltbWVkaWF0ZT1bXSxhLl9fd2ViZ2xTcHJpdGVzPVtdLGEuX193ZWJnbEZsYXJlcz1bXSk7Zm9yKDthLl9fb2JqZWN0c0FkZGVkLmxlbmd0aDspdChhLl9fb2JqZWN0c0FkZGVkWzBdLGEpLGEuX19vYmplY3RzQWRkZWQuc3BsaWNlKDAsMSk7Zm9yKDthLl9fb2JqZWN0c1JlbW92ZWQubGVuZ3RoOyl1KGEuX19vYmplY3RzUmVtb3ZlZFswXSxhKSxhLl9fb2JqZWN0c1JlbW92ZWQuc3BsaWNlKDAsMSk7Zm9yKHZhciBiPTAsZz1hLl9fd2ViZ2xPYmplY3RzLmxlbmd0aDtiPFxuZztiKyspe3ZhciBoPWEuX193ZWJnbE9iamVjdHNbYl0ub2JqZWN0O3ZvaWQgMD09PWguX193ZWJnbEluaXQmJih2b2lkIDAhPT1oLl9fd2ViZ2xBY3RpdmUmJnUoaCxhKSx0KGgsYSkpO3ZhciBpPWgsbD1pLmdlb21ldHJ5LG09dm9pZCAwLHA9dm9pZCAwLHI9dm9pZCAwO2lmKGwgaW5zdGFuY2VvZiBUSFJFRS5CdWZmZXJHZW9tZXRyeSl7dmFyIHM9ai5EWU5BTUlDX0RSQVcsdj0hbC5keW5hbWljLHo9bC5hdHRyaWJ1dGVzLHk9dm9pZCAwLHg9dm9pZCAwO2Zvcih5IGluIHopeD16W3ldLHgubmVlZHNVcGRhdGUmJihcImluZGV4XCI9PT15PyhqLmJpbmRCdWZmZXIoai5FTEVNRU5UX0FSUkFZX0JVRkZFUix4LmJ1ZmZlciksai5idWZmZXJEYXRhKGouRUxFTUVOVF9BUlJBWV9CVUZGRVIseC5hcnJheSxzKSk6KGouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUix4LmJ1ZmZlciksai5idWZmZXJEYXRhKGouQVJSQVlfQlVGRkVSLHguYXJyYXkscykpLHgubmVlZHNVcGRhdGU9ITEpLHYmJiF4LmR5bmFtaWMmJlxuKHguYXJyYXk9bnVsbCl9ZWxzZSBpZihpIGluc3RhbmNlb2YgVEhSRUUuTWVzaCl7Zm9yKHZhciBBPTAsQj1sLmdlb21ldHJ5R3JvdXBzTGlzdC5sZW5ndGg7QTxCO0ErKylpZihtPWwuZ2VvbWV0cnlHcm91cHNMaXN0W0FdLHI9ZChpLG0pLGwuYnVmZmVyc05lZWRVcGRhdGUmJmMobSxpKSxwPXIuYXR0cmlidXRlcyYmcShyKSxsLnZlcnRpY2VzTmVlZFVwZGF0ZXx8bC5tb3JwaFRhcmdldHNOZWVkVXBkYXRlfHxsLmVsZW1lbnRzTmVlZFVwZGF0ZXx8bC51dnNOZWVkVXBkYXRlfHxsLm5vcm1hbHNOZWVkVXBkYXRlfHxsLmNvbG9yc05lZWRVcGRhdGV8fGwudGFuZ2VudHNOZWVkVXBkYXRlfHxwKXt2YXIgdz1tLEU9aSxEPWouRFlOQU1JQ19EUkFXLEc9IWwuZHluYW1pYyxGPXI7aWYody5fX2luaXR0ZWRBcnJheXMpe3ZhciBLPWUoRiksST1GLnZlcnRleENvbG9ycz9GLnZlcnRleENvbG9yczohMSxMPWYoRiksTz1LPT09VEhSRUUuU21vb3RoU2hhZGluZyxDPXZvaWQgMCxKPXZvaWQgMCxcblY9dm9pZCAwLE09dm9pZCAwLFE9dm9pZCAwLGJhPXZvaWQgMCxSPXZvaWQgMCxVPXZvaWQgMCxZPXZvaWQgMCx6YT12b2lkIDAsJD12b2lkIDAsUD12b2lkIDAsWD12b2lkIDAsVz12b2lkIDAsQmE9dm9pZCAwLGVhPXZvaWQgMCxBYT12b2lkIDAsY2E9dm9pZCAwLGRhPXZvaWQgMCxoYT12b2lkIDAsZmE9dm9pZCAwLGphPXZvaWQgMCxrYT12b2lkIDAsbGE9dm9pZCAwLG5hPXZvaWQgMCxwYT12b2lkIDAsc2E9dm9pZCAwLHRhPXZvaWQgMCx1YT12b2lkIDAsQ2E9dm9pZCAwLERhPXZvaWQgMCxHYT12b2lkIDAsRmE9dm9pZCAwLEthPXZvaWQgMCxTYT12b2lkIDAsTGE9dm9pZCAwLHZhPXZvaWQgMCx3YT12b2lkIDAsUWE9dm9pZCAwLFJhPXZvaWQgMCxkYj0wLGViPTAsT2E9MCxQYT0wLFVhPTAsaGI9MCxUYT0wLHRiPTAsWmE9MCxxYT0wLHhhPTAsTj0wLE5hPXZvaWQgMCxpYj13Ll9fdmVydGV4QXJyYXksYmI9dy5fX3V2QXJyYXksY2I9dy5fX3V2MkFycmF5LE1hPXcuX19ub3JtYWxBcnJheSxcblZhPXcuX190YW5nZW50QXJyYXksamI9dy5fX2NvbG9yQXJyYXksV2E9dy5fX3NraW5JbmRleEFycmF5LFhhPXcuX19za2luV2VpZ2h0QXJyYXksZmI9dy5fX21vcnBoVGFyZ2V0c0FycmF5cyxzYj13Ll9fbW9ycGhOb3JtYWxzQXJyYXlzLHBiPXcuX193ZWJnbEN1c3RvbUF0dHJpYnV0ZXNMaXN0LEg9dm9pZCAwLFBiPXcuX19mYWNlQXJyYXksdmI9dy5fX2xpbmVBcnJheSxIYT1FLmdlb21ldHJ5LEJiPUhhLmVsZW1lbnRzTmVlZFVwZGF0ZSx5Yj1IYS51dnNOZWVkVXBkYXRlLERiPUhhLm5vcm1hbHNOZWVkVXBkYXRlLE1iPUhhLnRhbmdlbnRzTmVlZFVwZGF0ZSxOYj1IYS5jb2xvcnNOZWVkVXBkYXRlLE9iPUhhLm1vcnBoVGFyZ2V0c05lZWRVcGRhdGUsZWM9SGEudmVydGljZXMsYWE9dy5mYWNlczMsa2I9SGEuZmFjZXMsQ2I9SGEuZmFjZVZlcnRleFV2c1swXSxFYj1IYS5mYWNlVmVydGV4VXZzWzFdLGZjPUhhLnNraW5JbmRpY2VzLFFiPUhhLnNraW5XZWlnaHRzLFJiPUhhLm1vcnBoVGFyZ2V0cyxcbkZiPUhhLm1vcnBoTm9ybWFscztpZihIYS52ZXJ0aWNlc05lZWRVcGRhdGUpe0M9MDtmb3IoSj1hYS5sZW5ndGg7QzxKO0MrKylNPWtiW2FhW0NdXSxQPWVjW00uYV0sWD1lY1tNLmJdLFc9ZWNbTS5jXSxpYltlYl09UC54LGliW2ViKzFdPVAueSxpYltlYisyXT1QLnosaWJbZWIrM109WC54LGliW2ViKzRdPVgueSxpYltlYis1XT1YLnosaWJbZWIrNl09Vy54LGliW2ViKzddPVcueSxpYltlYis4XT1XLnosZWIrPTk7ai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLHcuX193ZWJnbFZlcnRleEJ1ZmZlcik7ai5idWZmZXJEYXRhKGouQVJSQVlfQlVGRkVSLGliLEQpfWlmKE9iKXtTYT0wO2ZvcihMYT1SYi5sZW5ndGg7U2E8TGE7U2ErKyl7Qz14YT0wO2ZvcihKPWFhLmxlbmd0aDtDPEo7QysrKVFhPWFhW0NdLE09a2JbUWFdLFA9UmJbU2FdLnZlcnRpY2VzW00uYV0sWD1SYltTYV0udmVydGljZXNbTS5iXSxXPVJiW1NhXS52ZXJ0aWNlc1tNLmNdLHZhPWZiW1NhXSx2YVt4YV09UC54LFxudmFbeGErMV09UC55LHZhW3hhKzJdPVAueix2YVt4YSszXT1YLngsdmFbeGErNF09WC55LHZhW3hhKzVdPVgueix2YVt4YSs2XT1XLngsdmFbeGErN109Vy55LHZhW3hhKzhdPVcueixGLm1vcnBoTm9ybWFscyYmKE8/KFJhPUZiW1NhXS52ZXJ0ZXhOb3JtYWxzW1FhXSxjYT1SYS5hLGRhPVJhLmIsaGE9UmEuYyk6aGE9ZGE9Y2E9RmJbU2FdLmZhY2VOb3JtYWxzW1FhXSx3YT1zYltTYV0sd2FbeGFdPWNhLngsd2FbeGErMV09Y2EueSx3YVt4YSsyXT1jYS56LHdhW3hhKzNdPWRhLngsd2FbeGErNF09ZGEueSx3YVt4YSs1XT1kYS56LHdhW3hhKzZdPWhhLngsd2FbeGErN109aGEueSx3YVt4YSs4XT1oYS56KSx4YSs9OTtqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsdy5fX3dlYmdsTW9ycGhUYXJnZXRzQnVmZmVyc1tTYV0pO2ouYnVmZmVyRGF0YShqLkFSUkFZX0JVRkZFUixmYltTYV0sRCk7Ri5tb3JwaE5vcm1hbHMmJihqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsdy5fX3dlYmdsTW9ycGhOb3JtYWxzQnVmZmVyc1tTYV0pLFxuai5idWZmZXJEYXRhKGouQVJSQVlfQlVGRkVSLHNiW1NhXSxEKSl9fWlmKFFiLmxlbmd0aCl7Qz0wO2ZvcihKPWFhLmxlbmd0aDtDPEo7QysrKU09a2JbYWFbQ11dLGxhPVFiW00uYV0sbmE9UWJbTS5iXSxwYT1RYltNLmNdLFhhW3FhXT1sYS54LFhhW3FhKzFdPWxhLnksWGFbcWErMl09bGEueixYYVtxYSszXT1sYS53LFhhW3FhKzRdPW5hLngsWGFbcWErNV09bmEueSxYYVtxYSs2XT1uYS56LFhhW3FhKzddPW5hLncsWGFbcWErOF09cGEueCxYYVtxYSs5XT1wYS55LFhhW3FhKzEwXT1wYS56LFhhW3FhKzExXT1wYS53LHNhPWZjW00uYV0sdGE9ZmNbTS5iXSx1YT1mY1tNLmNdLFdhW3FhXT1zYS54LFdhW3FhKzFdPXNhLnksV2FbcWErMl09c2EueixXYVtxYSszXT1zYS53LFdhW3FhKzRdPXRhLngsV2FbcWErNV09dGEueSxXYVtxYSs2XT10YS56LFdhW3FhKzddPXRhLncsV2FbcWErOF09dWEueCxXYVtxYSs5XT11YS55LFdhW3FhKzEwXT11YS56LFdhW3FhKzExXT11YS53LHFhKz0xMjtcbjA8cWEmJihqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsdy5fX3dlYmdsU2tpbkluZGljZXNCdWZmZXIpLGouYnVmZmVyRGF0YShqLkFSUkFZX0JVRkZFUixXYSxEKSxqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsdy5fX3dlYmdsU2tpbldlaWdodHNCdWZmZXIpLGouYnVmZmVyRGF0YShqLkFSUkFZX0JVRkZFUixYYSxEKSl9aWYoTmImJkkpe0M9MDtmb3IoSj1hYS5sZW5ndGg7QzxKO0MrKylNPWtiW2FhW0NdXSxSPU0udmVydGV4Q29sb3JzLFU9TS5jb2xvciwzPT09Ui5sZW5ndGgmJkk9PT1USFJFRS5WZXJ0ZXhDb2xvcnM/KGZhPVJbMF0samE9UlsxXSxrYT1SWzJdKTprYT1qYT1mYT1VLGpiW1phXT1mYS5yLGpiW1phKzFdPWZhLmcsamJbWmErMl09ZmEuYixqYltaYSszXT1qYS5yLGpiW1phKzRdPWphLmcsamJbWmErNV09amEuYixqYltaYSs2XT1rYS5yLGpiW1phKzddPWthLmcsamJbWmErOF09a2EuYixaYSs9OTswPFphJiYoai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLFxudy5fX3dlYmdsQ29sb3JCdWZmZXIpLGouYnVmZmVyRGF0YShqLkFSUkFZX0JVRkZFUixqYixEKSl9aWYoTWImJkhhLmhhc1RhbmdlbnRzKXtDPTA7Zm9yKEo9YWEubGVuZ3RoO0M8SjtDKyspTT1rYlthYVtDXV0sWT1NLnZlcnRleFRhbmdlbnRzLEJhPVlbMF0sZWE9WVsxXSxBYT1ZWzJdLFZhW1RhXT1CYS54LFZhW1RhKzFdPUJhLnksVmFbVGErMl09QmEueixWYVtUYSszXT1CYS53LFZhW1RhKzRdPWVhLngsVmFbVGErNV09ZWEueSxWYVtUYSs2XT1lYS56LFZhW1RhKzddPWVhLncsVmFbVGErOF09QWEueCxWYVtUYSs5XT1BYS55LFZhW1RhKzEwXT1BYS56LFZhW1RhKzExXT1BYS53LFRhKz0xMjtqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsdy5fX3dlYmdsVGFuZ2VudEJ1ZmZlcik7ai5idWZmZXJEYXRhKGouQVJSQVlfQlVGRkVSLFZhLEQpfWlmKERiJiZLKXtDPTA7Zm9yKEo9YWEubGVuZ3RoO0M8SjtDKyspaWYoTT1rYlthYVtDXV0sUT1NLnZlcnRleE5vcm1hbHMsYmE9TS5ub3JtYWwsXG4zPT09US5sZW5ndGgmJk8pZm9yKENhPTA7Mz5DYTtDYSsrKUdhPVFbQ2FdLE1hW2hiXT1HYS54LE1hW2hiKzFdPUdhLnksTWFbaGIrMl09R2EueixoYis9MztlbHNlIGZvcihDYT0wOzM+Q2E7Q2ErKylNYVtoYl09YmEueCxNYVtoYisxXT1iYS55LE1hW2hiKzJdPWJhLnosaGIrPTM7ai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLHcuX193ZWJnbE5vcm1hbEJ1ZmZlcik7ai5idWZmZXJEYXRhKGouQVJSQVlfQlVGRkVSLE1hLEQpfWlmKHliJiZDYiYmTCl7Qz0wO2ZvcihKPWFhLmxlbmd0aDtDPEo7QysrKWlmKFY9YWFbQ10semE9Q2JbVl0sdm9pZCAwIT09emEpZm9yKENhPTA7Mz5DYTtDYSsrKUZhPXphW0NhXSxiYltPYV09RmEueCxiYltPYSsxXT1GYS55LE9hKz0yOzA8T2EmJihqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsdy5fX3dlYmdsVVZCdWZmZXIpLGouYnVmZmVyRGF0YShqLkFSUkFZX0JVRkZFUixiYixEKSl9aWYoeWImJkViJiZMKXtDPTA7Zm9yKEo9YWEubGVuZ3RoO0M8XG5KO0MrKylpZihWPWFhW0NdLCQ9RWJbVl0sdm9pZCAwIT09JClmb3IoQ2E9MDszPkNhO0NhKyspS2E9JFtDYV0sY2JbUGFdPUthLngsY2JbUGErMV09S2EueSxQYSs9MjswPFBhJiYoai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLHcuX193ZWJnbFVWMkJ1ZmZlciksai5idWZmZXJEYXRhKGouQVJSQVlfQlVGRkVSLGNiLEQpKX1pZihCYil7Qz0wO2ZvcihKPWFhLmxlbmd0aDtDPEo7QysrKVBiW1VhXT1kYixQYltVYSsxXT1kYisxLFBiW1VhKzJdPWRiKzIsVWErPTMsdmJbdGJdPWRiLHZiW3RiKzFdPWRiKzEsdmJbdGIrMl09ZGIsdmJbdGIrM109ZGIrMix2Ylt0Yis0XT1kYisxLHZiW3RiKzVdPWRiKzIsdGIrPTYsZGIrPTM7ai5iaW5kQnVmZmVyKGouRUxFTUVOVF9BUlJBWV9CVUZGRVIsdy5fX3dlYmdsRmFjZUJ1ZmZlcik7ai5idWZmZXJEYXRhKGouRUxFTUVOVF9BUlJBWV9CVUZGRVIsUGIsRCk7ai5iaW5kQnVmZmVyKGouRUxFTUVOVF9BUlJBWV9CVUZGRVIsdy5fX3dlYmdsTGluZUJ1ZmZlcik7XG5qLmJ1ZmZlckRhdGEoai5FTEVNRU5UX0FSUkFZX0JVRkZFUix2YixEKX1pZihwYil7Q2E9MDtmb3IoRGE9cGIubGVuZ3RoO0NhPERhO0NhKyspaWYoSD1wYltDYV0sSC5fX29yaWdpbmFsLm5lZWRzVXBkYXRlKXtOPTA7aWYoMT09PUguc2l6ZSlpZih2b2lkIDA9PT1ILmJvdW5kVG98fFwidmVydGljZXNcIj09PUguYm91bmRUbyl7Qz0wO2ZvcihKPWFhLmxlbmd0aDtDPEo7QysrKU09a2JbYWFbQ11dLEguYXJyYXlbTl09SC52YWx1ZVtNLmFdLEguYXJyYXlbTisxXT1ILnZhbHVlW00uYl0sSC5hcnJheVtOKzJdPUgudmFsdWVbTS5jXSxOKz0zfWVsc2V7aWYoXCJmYWNlc1wiPT09SC5ib3VuZFRvKXtDPTA7Zm9yKEo9YWEubGVuZ3RoO0M8SjtDKyspTmE9SC52YWx1ZVthYVtDXV0sSC5hcnJheVtOXT1OYSxILmFycmF5W04rMV09TmEsSC5hcnJheVtOKzJdPU5hLE4rPTN9fWVsc2UgaWYoMj09PUguc2l6ZSlpZih2b2lkIDA9PT1ILmJvdW5kVG98fFwidmVydGljZXNcIj09PUguYm91bmRUbyl7Qz1cbjA7Zm9yKEo9YWEubGVuZ3RoO0M8SjtDKyspTT1rYlthYVtDXV0sUD1ILnZhbHVlW00uYV0sWD1ILnZhbHVlW00uYl0sVz1ILnZhbHVlW00uY10sSC5hcnJheVtOXT1QLngsSC5hcnJheVtOKzFdPVAueSxILmFycmF5W04rMl09WC54LEguYXJyYXlbTiszXT1YLnksSC5hcnJheVtOKzRdPVcueCxILmFycmF5W04rNV09Vy55LE4rPTZ9ZWxzZXtpZihcImZhY2VzXCI9PT1ILmJvdW5kVG8pe0M9MDtmb3IoSj1hYS5sZW5ndGg7QzxKO0MrKylXPVg9UD1OYT1ILnZhbHVlW2FhW0NdXSxILmFycmF5W05dPVAueCxILmFycmF5W04rMV09UC55LEguYXJyYXlbTisyXT1YLngsSC5hcnJheVtOKzNdPVgueSxILmFycmF5W04rNF09Vy54LEguYXJyYXlbTis1XT1XLnksTis9Nn19ZWxzZSBpZigzPT09SC5zaXplKXt2YXIgb2E7b2E9XCJjXCI9PT1ILnR5cGU/W1wiclwiLFwiZ1wiLFwiYlwiXTpbXCJ4XCIsXCJ5XCIsXCJ6XCJdO2lmKHZvaWQgMD09PUguYm91bmRUb3x8XCJ2ZXJ0aWNlc1wiPT09SC5ib3VuZFRvKXtDPTA7Zm9yKEo9XG5hYS5sZW5ndGg7QzxKO0MrKylNPWtiW2FhW0NdXSxQPUgudmFsdWVbTS5hXSxYPUgudmFsdWVbTS5iXSxXPUgudmFsdWVbTS5jXSxILmFycmF5W05dPVBbb2FbMF1dLEguYXJyYXlbTisxXT1QW29hWzFdXSxILmFycmF5W04rMl09UFtvYVsyXV0sSC5hcnJheVtOKzNdPVhbb2FbMF1dLEguYXJyYXlbTis0XT1YW29hWzFdXSxILmFycmF5W04rNV09WFtvYVsyXV0sSC5hcnJheVtOKzZdPVdbb2FbMF1dLEguYXJyYXlbTis3XT1XW29hWzFdXSxILmFycmF5W04rOF09V1tvYVsyXV0sTis9OX1lbHNlIGlmKFwiZmFjZXNcIj09PUguYm91bmRUbyl7Qz0wO2ZvcihKPWFhLmxlbmd0aDtDPEo7QysrKVc9WD1QPU5hPUgudmFsdWVbYWFbQ11dLEguYXJyYXlbTl09UFtvYVswXV0sSC5hcnJheVtOKzFdPVBbb2FbMV1dLEguYXJyYXlbTisyXT1QW29hWzJdXSxILmFycmF5W04rM109WFtvYVswXV0sSC5hcnJheVtOKzRdPVhbb2FbMV1dLEguYXJyYXlbTis1XT1YW29hWzJdXSxILmFycmF5W04rNl09V1tvYVswXV0sXG5ILmFycmF5W04rN109V1tvYVsxXV0sSC5hcnJheVtOKzhdPVdbb2FbMl1dLE4rPTl9ZWxzZSBpZihcImZhY2VWZXJ0aWNlc1wiPT09SC5ib3VuZFRvKXtDPTA7Zm9yKEo9YWEubGVuZ3RoO0M8SjtDKyspTmE9SC52YWx1ZVthYVtDXV0sUD1OYVswXSxYPU5hWzFdLFc9TmFbMl0sSC5hcnJheVtOXT1QW29hWzBdXSxILmFycmF5W04rMV09UFtvYVsxXV0sSC5hcnJheVtOKzJdPVBbb2FbMl1dLEguYXJyYXlbTiszXT1YW29hWzBdXSxILmFycmF5W04rNF09WFtvYVsxXV0sSC5hcnJheVtOKzVdPVhbb2FbMl1dLEguYXJyYXlbTis2XT1XW29hWzBdXSxILmFycmF5W04rN109V1tvYVsxXV0sSC5hcnJheVtOKzhdPVdbb2FbMl1dLE4rPTl9fWVsc2UgaWYoND09PUguc2l6ZSlpZih2b2lkIDA9PT1ILmJvdW5kVG98fFwidmVydGljZXNcIj09PUguYm91bmRUbyl7Qz0wO2ZvcihKPWFhLmxlbmd0aDtDPEo7QysrKU09a2JbYWFbQ11dLFA9SC52YWx1ZVtNLmFdLFg9SC52YWx1ZVtNLmJdLFc9SC52YWx1ZVtNLmNdLFxuSC5hcnJheVtOXT1QLngsSC5hcnJheVtOKzFdPVAueSxILmFycmF5W04rMl09UC56LEguYXJyYXlbTiszXT1QLncsSC5hcnJheVtOKzRdPVgueCxILmFycmF5W04rNV09WC55LEguYXJyYXlbTis2XT1YLnosSC5hcnJheVtOKzddPVgudyxILmFycmF5W04rOF09Vy54LEguYXJyYXlbTis5XT1XLnksSC5hcnJheVtOKzEwXT1XLnosSC5hcnJheVtOKzExXT1XLncsTis9MTJ9ZWxzZSBpZihcImZhY2VzXCI9PT1ILmJvdW5kVG8pe0M9MDtmb3IoSj1hYS5sZW5ndGg7QzxKO0MrKylXPVg9UD1OYT1ILnZhbHVlW2FhW0NdXSxILmFycmF5W05dPVAueCxILmFycmF5W04rMV09UC55LEguYXJyYXlbTisyXT1QLnosSC5hcnJheVtOKzNdPVAudyxILmFycmF5W04rNF09WC54LEguYXJyYXlbTis1XT1YLnksSC5hcnJheVtOKzZdPVgueixILmFycmF5W04rN109WC53LEguYXJyYXlbTis4XT1XLngsSC5hcnJheVtOKzldPVcueSxILmFycmF5W04rMTBdPVcueixILmFycmF5W04rMTFdPVcudyxOKz0xMn1lbHNlIGlmKFwiZmFjZVZlcnRpY2VzXCI9PT1cbkguYm91bmRUbyl7Qz0wO2ZvcihKPWFhLmxlbmd0aDtDPEo7QysrKU5hPUgudmFsdWVbYWFbQ11dLFA9TmFbMF0sWD1OYVsxXSxXPU5hWzJdLEguYXJyYXlbTl09UC54LEguYXJyYXlbTisxXT1QLnksSC5hcnJheVtOKzJdPVAueixILmFycmF5W04rM109UC53LEguYXJyYXlbTis0XT1YLngsSC5hcnJheVtOKzVdPVgueSxILmFycmF5W04rNl09WC56LEguYXJyYXlbTis3XT1YLncsSC5hcnJheVtOKzhdPVcueCxILmFycmF5W04rOV09Vy55LEguYXJyYXlbTisxMF09Vy56LEguYXJyYXlbTisxMV09Vy53LE4rPTEyfWouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUixILmJ1ZmZlcik7ai5idWZmZXJEYXRhKGouQVJSQVlfQlVGRkVSLEguYXJyYXksRCl9fUcmJihkZWxldGUgdy5fX2luaXR0ZWRBcnJheXMsZGVsZXRlIHcuX19jb2xvckFycmF5LGRlbGV0ZSB3Ll9fbm9ybWFsQXJyYXksZGVsZXRlIHcuX190YW5nZW50QXJyYXksZGVsZXRlIHcuX191dkFycmF5LGRlbGV0ZSB3Ll9fdXYyQXJyYXksXG5kZWxldGUgdy5fX2ZhY2VBcnJheSxkZWxldGUgdy5fX3ZlcnRleEFycmF5LGRlbGV0ZSB3Ll9fbGluZUFycmF5LGRlbGV0ZSB3Ll9fc2tpbkluZGV4QXJyYXksZGVsZXRlIHcuX19za2luV2VpZ2h0QXJyYXkpfX1sLnZlcnRpY2VzTmVlZFVwZGF0ZT0hMTtsLm1vcnBoVGFyZ2V0c05lZWRVcGRhdGU9ITE7bC5lbGVtZW50c05lZWRVcGRhdGU9ITE7bC51dnNOZWVkVXBkYXRlPSExO2wubm9ybWFsc05lZWRVcGRhdGU9ITE7bC5jb2xvcnNOZWVkVXBkYXRlPSExO2wudGFuZ2VudHNOZWVkVXBkYXRlPSExO2wuYnVmZmVyc05lZWRVcGRhdGU9ITE7ci5hdHRyaWJ1dGVzJiZuKHIpfWVsc2UgaWYoaSBpbnN0YW5jZW9mIFRIUkVFLkxpbmUpe3I9ZChpLGwpO3A9ci5hdHRyaWJ1dGVzJiZxKHIpO2lmKGwudmVydGljZXNOZWVkVXBkYXRlfHxsLmNvbG9yc05lZWRVcGRhdGV8fGwubGluZURpc3RhbmNlc05lZWRVcGRhdGV8fHApe3ZhciBZYT1sLFNiPWouRFlOQU1JQ19EUkFXLEliPXZvaWQgMCxcbkpiPXZvaWQgMCxLYj12b2lkIDAsVGI9dm9pZCAwLG1hPXZvaWQgMCxVYj12b2lkIDAsR2I9WWEudmVydGljZXMsSGI9WWEuY29sb3JzLGtjPVlhLmxpbmVEaXN0YW5jZXMsWmI9R2IubGVuZ3RoLCRiPUhiLmxlbmd0aCxhYz1rYy5sZW5ndGgsVmI9WWEuX192ZXJ0ZXhBcnJheSxXYj1ZYS5fX2NvbG9yQXJyYXksbGM9WWEuX19saW5lRGlzdGFuY2VBcnJheSxiYz1ZYS5jb2xvcnNOZWVkVXBkYXRlLGNjPVlhLmxpbmVEaXN0YW5jZXNOZWVkVXBkYXRlLGdjPVlhLl9fd2ViZ2xDdXN0b21BdHRyaWJ1dGVzTGlzdCxYYj12b2lkIDAsbWM9dm9pZCAwLHlhPXZvaWQgMCx6Yj12b2lkIDAsSWE9dm9pZCAwLGlhPXZvaWQgMDtpZihZYS52ZXJ0aWNlc05lZWRVcGRhdGUpe2ZvcihJYj0wO0liPFpiO0liKyspVGI9R2JbSWJdLG1hPTMqSWIsVmJbbWFdPVRiLngsVmJbbWErMV09VGIueSxWYlttYSsyXT1UYi56O2ouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUixZYS5fX3dlYmdsVmVydGV4QnVmZmVyKTtcbmouYnVmZmVyRGF0YShqLkFSUkFZX0JVRkZFUixWYixTYil9aWYoYmMpe2ZvcihKYj0wO0piPCRiO0piKyspVWI9SGJbSmJdLG1hPTMqSmIsV2JbbWFdPVViLnIsV2JbbWErMV09VWIuZyxXYlttYSsyXT1VYi5iO2ouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUixZYS5fX3dlYmdsQ29sb3JCdWZmZXIpO2ouYnVmZmVyRGF0YShqLkFSUkFZX0JVRkZFUixXYixTYil9aWYoY2Mpe2ZvcihLYj0wO0tiPGFjO0tiKyspbGNbS2JdPWtjW0tiXTtqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsWWEuX193ZWJnbExpbmVEaXN0YW5jZUJ1ZmZlcik7ai5idWZmZXJEYXRhKGouQVJSQVlfQlVGRkVSLGxjLFNiKX1pZihnYyl7WGI9MDtmb3IobWM9Z2MubGVuZ3RoO1hiPG1jO1hiKyspaWYoaWE9Z2NbWGJdLGlhLm5lZWRzVXBkYXRlJiYodm9pZCAwPT09aWEuYm91bmRUb3x8XCJ2ZXJ0aWNlc1wiPT09aWEuYm91bmRUbykpe21hPTA7emI9aWEudmFsdWUubGVuZ3RoO2lmKDE9PT1pYS5zaXplKWZvcih5YT1cbjA7eWE8emI7eWErKylpYS5hcnJheVt5YV09aWEudmFsdWVbeWFdO2Vsc2UgaWYoMj09PWlhLnNpemUpZm9yKHlhPTA7eWE8emI7eWErKylJYT1pYS52YWx1ZVt5YV0saWEuYXJyYXlbbWFdPUlhLngsaWEuYXJyYXlbbWErMV09SWEueSxtYSs9MjtlbHNlIGlmKDM9PT1pYS5zaXplKWlmKFwiY1wiPT09aWEudHlwZSlmb3IoeWE9MDt5YTx6Yjt5YSsrKUlhPWlhLnZhbHVlW3lhXSxpYS5hcnJheVttYV09SWEucixpYS5hcnJheVttYSsxXT1JYS5nLGlhLmFycmF5W21hKzJdPUlhLmIsbWErPTM7ZWxzZSBmb3IoeWE9MDt5YTx6Yjt5YSsrKUlhPWlhLnZhbHVlW3lhXSxpYS5hcnJheVttYV09SWEueCxpYS5hcnJheVttYSsxXT1JYS55LGlhLmFycmF5W21hKzJdPUlhLnosbWErPTM7ZWxzZSBpZig0PT09aWEuc2l6ZSlmb3IoeWE9MDt5YTx6Yjt5YSsrKUlhPWlhLnZhbHVlW3lhXSxpYS5hcnJheVttYV09SWEueCxpYS5hcnJheVttYSsxXT1JYS55LGlhLmFycmF5W21hKzJdPUlhLnosaWEuYXJyYXlbbWErXG4zXT1JYS53LG1hKz00O2ouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUixpYS5idWZmZXIpO2ouYnVmZmVyRGF0YShqLkFSUkFZX0JVRkZFUixpYS5hcnJheSxTYil9fX1sLnZlcnRpY2VzTmVlZFVwZGF0ZT0hMTtsLmNvbG9yc05lZWRVcGRhdGU9ITE7bC5saW5lRGlzdGFuY2VzTmVlZFVwZGF0ZT0hMTtyLmF0dHJpYnV0ZXMmJm4ocil9ZWxzZSBpZihpIGluc3RhbmNlb2YgVEhSRUUuUGFydGljbGVTeXN0ZW0pe3I9ZChpLGwpO3A9ci5hdHRyaWJ1dGVzJiZxKHIpO2lmKGwudmVydGljZXNOZWVkVXBkYXRlfHxsLmNvbG9yc05lZWRVcGRhdGV8fGkuc29ydFBhcnRpY2xlc3x8cCl7dmFyIGxiPWwsaGM9ai5EWU5BTUlDX0RSQVcsTGI9aSxKYT12b2lkIDAsbWI9dm9pZCAwLG5iPXZvaWQgMCxUPXZvaWQgMCxvYj12b2lkIDAsdWI9dm9pZCAwLFliPWxiLnZlcnRpY2VzLGljPVliLmxlbmd0aCxqYz1sYi5jb2xvcnMsbmM9amMubGVuZ3RoLHdiPWxiLl9fdmVydGV4QXJyYXkseGI9bGIuX19jb2xvckFycmF5LFxucWI9bGIuX19zb3J0QXJyYXksb2M9bGIudmVydGljZXNOZWVkVXBkYXRlLHBjPWxiLmNvbG9yc05lZWRVcGRhdGUscmI9bGIuX193ZWJnbEN1c3RvbUF0dHJpYnV0ZXNMaXN0LCRhPXZvaWQgMCxBYj12b2lkIDAsWj12b2lkIDAsYWI9dm9pZCAwLGdhPXZvaWQgMCxTPXZvaWQgMDtpZihMYi5zb3J0UGFydGljbGVzKXtnYi5jb3B5KEVhKTtnYi5tdWx0aXBseShMYi5tYXRyaXhXb3JsZCk7Zm9yKEphPTA7SmE8aWM7SmErKyluYj1ZYltKYV0scmEuY29weShuYikscmEuYXBwbHlQcm9qZWN0aW9uKGdiKSxxYltKYV09W3JhLnosSmFdO3FiLnNvcnQoayk7Zm9yKEphPTA7SmE8aWM7SmErKyluYj1ZYltxYltKYV1bMV1dLFQ9MypKYSx3YltUXT1uYi54LHdiW1QrMV09bmIueSx3YltUKzJdPW5iLno7Zm9yKG1iPTA7bWI8bmM7bWIrKylUPTMqbWIsdWI9amNbcWJbbWJdWzFdXSx4YltUXT11Yi5yLHhiW1QrMV09dWIuZyx4YltUKzJdPXViLmI7aWYocmIpeyRhPTA7Zm9yKEFiPXJiLmxlbmd0aDskYTxcbkFiOyRhKyspaWYoUz1yYlskYV0sdm9pZCAwPT09Uy5ib3VuZFRvfHxcInZlcnRpY2VzXCI9PT1TLmJvdW5kVG8paWYoVD0wLGFiPVMudmFsdWUubGVuZ3RoLDE9PT1TLnNpemUpZm9yKFo9MDtaPGFiO1orKylvYj1xYltaXVsxXSxTLmFycmF5W1pdPVMudmFsdWVbb2JdO2Vsc2UgaWYoMj09PVMuc2l6ZSlmb3IoWj0wO1o8YWI7WisrKW9iPXFiW1pdWzFdLGdhPVMudmFsdWVbb2JdLFMuYXJyYXlbVF09Z2EueCxTLmFycmF5W1QrMV09Z2EueSxUKz0yO2Vsc2UgaWYoMz09PVMuc2l6ZSlpZihcImNcIj09PVMudHlwZSlmb3IoWj0wO1o8YWI7WisrKW9iPXFiW1pdWzFdLGdhPVMudmFsdWVbb2JdLFMuYXJyYXlbVF09Z2EucixTLmFycmF5W1QrMV09Z2EuZyxTLmFycmF5W1QrMl09Z2EuYixUKz0zO2Vsc2UgZm9yKFo9MDtaPGFiO1orKylvYj1xYltaXVsxXSxnYT1TLnZhbHVlW29iXSxTLmFycmF5W1RdPWdhLngsUy5hcnJheVtUKzFdPWdhLnksUy5hcnJheVtUKzJdPWdhLnosVCs9MztlbHNlIGlmKDQ9PT1cblMuc2l6ZSlmb3IoWj0wO1o8YWI7WisrKW9iPXFiW1pdWzFdLGdhPVMudmFsdWVbb2JdLFMuYXJyYXlbVF09Z2EueCxTLmFycmF5W1QrMV09Z2EueSxTLmFycmF5W1QrMl09Z2EueixTLmFycmF5W1QrM109Z2EudyxUKz00fX1lbHNle2lmKG9jKWZvcihKYT0wO0phPGljO0phKyspbmI9WWJbSmFdLFQ9MypKYSx3YltUXT1uYi54LHdiW1QrMV09bmIueSx3YltUKzJdPW5iLno7aWYocGMpZm9yKG1iPTA7bWI8bmM7bWIrKyl1Yj1qY1ttYl0sVD0zKm1iLHhiW1RdPXViLnIseGJbVCsxXT11Yi5nLHhiW1QrMl09dWIuYjtpZihyYil7JGE9MDtmb3IoQWI9cmIubGVuZ3RoOyRhPEFiOyRhKyspaWYoUz1yYlskYV0sUy5uZWVkc1VwZGF0ZSYmKHZvaWQgMD09PVMuYm91bmRUb3x8XCJ2ZXJ0aWNlc1wiPT09Uy5ib3VuZFRvKSlpZihhYj1TLnZhbHVlLmxlbmd0aCxUPTAsMT09PVMuc2l6ZSlmb3IoWj0wO1o8YWI7WisrKVMuYXJyYXlbWl09Uy52YWx1ZVtaXTtlbHNlIGlmKDI9PT1TLnNpemUpZm9yKFo9XG4wO1o8YWI7WisrKWdhPVMudmFsdWVbWl0sUy5hcnJheVtUXT1nYS54LFMuYXJyYXlbVCsxXT1nYS55LFQrPTI7ZWxzZSBpZigzPT09Uy5zaXplKWlmKFwiY1wiPT09Uy50eXBlKWZvcihaPTA7WjxhYjtaKyspZ2E9Uy52YWx1ZVtaXSxTLmFycmF5W1RdPWdhLnIsUy5hcnJheVtUKzFdPWdhLmcsUy5hcnJheVtUKzJdPWdhLmIsVCs9MztlbHNlIGZvcihaPTA7WjxhYjtaKyspZ2E9Uy52YWx1ZVtaXSxTLmFycmF5W1RdPWdhLngsUy5hcnJheVtUKzFdPWdhLnksUy5hcnJheVtUKzJdPWdhLnosVCs9MztlbHNlIGlmKDQ9PT1TLnNpemUpZm9yKFo9MDtaPGFiO1orKylnYT1TLnZhbHVlW1pdLFMuYXJyYXlbVF09Z2EueCxTLmFycmF5W1QrMV09Z2EueSxTLmFycmF5W1QrMl09Z2EueixTLmFycmF5W1QrM109Z2EudyxUKz00fX1pZihvY3x8TGIuc29ydFBhcnRpY2xlcylqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsbGIuX193ZWJnbFZlcnRleEJ1ZmZlciksai5idWZmZXJEYXRhKGouQVJSQVlfQlVGRkVSLFxud2IsaGMpO2lmKHBjfHxMYi5zb3J0UGFydGljbGVzKWouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUixsYi5fX3dlYmdsQ29sb3JCdWZmZXIpLGouYnVmZmVyRGF0YShqLkFSUkFZX0JVRkZFUix4YixoYyk7aWYocmIpeyRhPTA7Zm9yKEFiPXJiLmxlbmd0aDskYTxBYjskYSsrKWlmKFM9cmJbJGFdLFMubmVlZHNVcGRhdGV8fExiLnNvcnRQYXJ0aWNsZXMpai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLFMuYnVmZmVyKSxqLmJ1ZmZlckRhdGEoai5BUlJBWV9CVUZGRVIsUy5hcnJheSxoYyl9fWwudmVydGljZXNOZWVkVXBkYXRlPSExO2wuY29sb3JzTmVlZFVwZGF0ZT0hMTtyLmF0dHJpYnV0ZXMmJm4ocil9fX07dGhpcy5pbml0TWF0ZXJpYWw9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGUsZixnLGg7YS5hZGRFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLEZiKTt2YXIgaSxrLGwsbSxuO2EgaW5zdGFuY2VvZiBUSFJFRS5NZXNoRGVwdGhNYXRlcmlhbD9uPVwiZGVwdGhcIjphIGluc3RhbmNlb2ZcblRIUkVFLk1lc2hOb3JtYWxNYXRlcmlhbD9uPVwibm9ybWFsXCI6YSBpbnN0YW5jZW9mIFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsP249XCJiYXNpY1wiOmEgaW5zdGFuY2VvZiBUSFJFRS5NZXNoTGFtYmVydE1hdGVyaWFsP249XCJsYW1iZXJ0XCI6YSBpbnN0YW5jZW9mIFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsP249XCJwaG9uZ1wiOmEgaW5zdGFuY2VvZiBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbD9uPVwiYmFzaWNcIjphIGluc3RhbmNlb2YgVEhSRUUuTGluZURhc2hlZE1hdGVyaWFsP249XCJkYXNoZWRcIjphIGluc3RhbmNlb2YgVEhSRUUuUGFydGljbGVTeXN0ZW1NYXRlcmlhbCYmKG49XCJwYXJ0aWNsZV9iYXNpY1wiKTtpZihuKXt2YXIgcD1USFJFRS5TaGFkZXJMaWJbbl07YS51bmlmb3Jtcz1USFJFRS5Vbmlmb3Jtc1V0aWxzLmNsb25lKHAudW5pZm9ybXMpO2EudmVydGV4U2hhZGVyPXAudmVydGV4U2hhZGVyO2EuZnJhZ21lbnRTaGFkZXI9cC5mcmFnbWVudFNoYWRlcn12YXIgcT1lPTAscj0wLHQ9XG5wPTA7Zm9yKGY9Yi5sZW5ndGg7dDxmO3QrKylnPWJbdF0sZy5vbmx5U2hhZG93fHwoZyBpbnN0YW5jZW9mIFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQmJmUrKyxnIGluc3RhbmNlb2YgVEhSRUUuUG9pbnRMaWdodCYmcSsrLGcgaW5zdGFuY2VvZiBUSFJFRS5TcG90TGlnaHQmJnIrKyxnIGluc3RhbmNlb2YgVEhSRUUuSGVtaXNwaGVyZUxpZ2h0JiZwKyspO2Y9cTtnPXI7aD1wO3I9cD0wO2ZvcihxPWIubGVuZ3RoO3I8cTtyKyspdD1iW3JdLHQuY2FzdFNoYWRvdyYmKHQgaW5zdGFuY2VvZiBUSFJFRS5TcG90TGlnaHQmJnArKyx0IGluc3RhbmNlb2YgVEhSRUUuRGlyZWN0aW9uYWxMaWdodCYmIXQuc2hhZG93Q2FzY2FkZSYmcCsrKTttPXA7eWImJmQmJmQudXNlVmVydGV4VGV4dHVyZT9sPTEwMjQ6KGI9ai5nZXRQYXJhbWV0ZXIoai5NQVhfVkVSVEVYX1VOSUZPUk1fVkVDVE9SUyksYj1NYXRoLmZsb29yKChiLTIwKS80KSx2b2lkIDAhPT1kJiZkIGluc3RhbmNlb2YgVEhSRUUuU2tpbm5lZE1lc2gmJlxuKGI9TWF0aC5taW4oZC5ib25lcy5sZW5ndGgsYiksYjxkLmJvbmVzLmxlbmd0aCYmY29uc29sZS53YXJuKFwiV2ViR0xSZW5kZXJlcjogdG9vIG1hbnkgYm9uZXMgLSBcIitkLmJvbmVzLmxlbmd0aCtcIiwgdGhpcyBHUFUgc3VwcG9ydHMganVzdCBcIitiK1wiICh0cnkgT3BlbkdMIGluc3RlYWQgb2YgQU5HTEUpXCIpKSxsPWIpO2E6e3ZhciByPWEuZnJhZ21lbnRTaGFkZXIscT1hLnZlcnRleFNoYWRlcixwPWEudW5pZm9ybXMsYj1hLmF0dHJpYnV0ZXMsdD1hLmRlZmluZXMsYz17bWFwOiEhYS5tYXAsZW52TWFwOiEhYS5lbnZNYXAsbGlnaHRNYXA6ISFhLmxpZ2h0TWFwLGJ1bXBNYXA6ISFhLmJ1bXBNYXAsbm9ybWFsTWFwOiEhYS5ub3JtYWxNYXAsc3BlY3VsYXJNYXA6ISFhLnNwZWN1bGFyTWFwLHZlcnRleENvbG9yczphLnZlcnRleENvbG9ycyxmb2c6Yyx1c2VGb2c6YS5mb2csZm9nRXhwOmMgaW5zdGFuY2VvZiBUSFJFRS5Gb2dFeHAyLHNpemVBdHRlbnVhdGlvbjphLnNpemVBdHRlbnVhdGlvbixcbnNraW5uaW5nOmEuc2tpbm5pbmcsbWF4Qm9uZXM6bCx1c2VWZXJ0ZXhUZXh0dXJlOnliJiZkJiZkLnVzZVZlcnRleFRleHR1cmUsbW9ycGhUYXJnZXRzOmEubW9ycGhUYXJnZXRzLG1vcnBoTm9ybWFsczphLm1vcnBoTm9ybWFscyxtYXhNb3JwaFRhcmdldHM6dGhpcy5tYXhNb3JwaFRhcmdldHMsbWF4TW9ycGhOb3JtYWxzOnRoaXMubWF4TW9ycGhOb3JtYWxzLG1heERpckxpZ2h0czplLG1heFBvaW50TGlnaHRzOmYsbWF4U3BvdExpZ2h0czpnLG1heEhlbWlMaWdodHM6aCxtYXhTaGFkb3dzOm0sc2hhZG93TWFwRW5hYmxlZDp0aGlzLnNoYWRvd01hcEVuYWJsZWQmJmQucmVjZWl2ZVNoYWRvdyxzaGFkb3dNYXBUeXBlOnRoaXMuc2hhZG93TWFwVHlwZSxzaGFkb3dNYXBEZWJ1Zzp0aGlzLnNoYWRvd01hcERlYnVnLHNoYWRvd01hcENhc2NhZGU6dGhpcy5zaGFkb3dNYXBDYXNjYWRlLGFscGhhVGVzdDphLmFscGhhVGVzdCxtZXRhbDphLm1ldGFsLHBlclBpeGVsOmEucGVyUGl4ZWwsd3JhcEFyb3VuZDphLndyYXBBcm91bmQsXG5kb3VibGVTaWRlZDphLnNpZGU9PT1USFJFRS5Eb3VibGVTaWRlLGZsaXBTaWRlZDphLnNpZGU9PT1USFJFRS5CYWNrU2lkZX0sZD1hLmluZGV4MEF0dHJpYnV0ZU5hbWUscyx1LHY7ZT1bXTtuP2UucHVzaChuKTooZS5wdXNoKHIpLGUucHVzaChxKSk7Zm9yKHUgaW4gdCllLnB1c2godSksZS5wdXNoKHRbdV0pO2ZvcihzIGluIGMpZS5wdXNoKHMpLGUucHVzaChjW3NdKTtuPWUuam9pbigpO3M9MDtmb3IodT1kYS5sZW5ndGg7czx1O3MrKylpZihlPWRhW3NdLGUuY29kZT09PW4pe2UudXNlZFRpbWVzKys7az1lLnByb2dyYW07YnJlYWsgYX1zPVwiU0hBRE9XTUFQX1RZUEVfQkFTSUNcIjtjLnNoYWRvd01hcFR5cGU9PT1USFJFRS5QQ0ZTaGFkb3dNYXA/cz1cIlNIQURPV01BUF9UWVBFX1BDRlwiOmMuc2hhZG93TWFwVHlwZT09PVRIUkVFLlBDRlNvZnRTaGFkb3dNYXAmJihzPVwiU0hBRE9XTUFQX1RZUEVfUENGX1NPRlRcIik7dT1bXTtmb3IodiBpbiB0KWU9dFt2XSwhMSE9PWUmJihlPVwiI2RlZmluZSBcIitcbnYrXCIgXCIrZSx1LnB1c2goZSkpO2U9dS5qb2luKFwiXFxuXCIpO3Y9ai5jcmVhdGVQcm9ncmFtKCk7dT1bXCJwcmVjaXNpb24gXCIrTStcIiBmbG9hdDtcIixcInByZWNpc2lvbiBcIitNK1wiIGludDtcIixlLEJiP1wiI2RlZmluZSBWRVJURVhfVEVYVFVSRVNcIjpcIlwiLEwuZ2FtbWFJbnB1dD9cIiNkZWZpbmUgR0FNTUFfSU5QVVRcIjpcIlwiLEwuZ2FtbWFPdXRwdXQ/XCIjZGVmaW5lIEdBTU1BX09VVFBVVFwiOlwiXCIsTC5waHlzaWNhbGx5QmFzZWRTaGFkaW5nP1wiI2RlZmluZSBQSFlTSUNBTExZX0JBU0VEX1NIQURJTkdcIjpcIlwiLFwiI2RlZmluZSBNQVhfRElSX0xJR0hUUyBcIitjLm1heERpckxpZ2h0cyxcIiNkZWZpbmUgTUFYX1BPSU5UX0xJR0hUUyBcIitjLm1heFBvaW50TGlnaHRzLFwiI2RlZmluZSBNQVhfU1BPVF9MSUdIVFMgXCIrYy5tYXhTcG90TGlnaHRzLFwiI2RlZmluZSBNQVhfSEVNSV9MSUdIVFMgXCIrYy5tYXhIZW1pTGlnaHRzLFwiI2RlZmluZSBNQVhfU0hBRE9XUyBcIitjLm1heFNoYWRvd3MsXCIjZGVmaW5lIE1BWF9CT05FUyBcIitcbmMubWF4Qm9uZXMsYy5tYXA/XCIjZGVmaW5lIFVTRV9NQVBcIjpcIlwiLGMuZW52TWFwP1wiI2RlZmluZSBVU0VfRU5WTUFQXCI6XCJcIixjLmxpZ2h0TWFwP1wiI2RlZmluZSBVU0VfTElHSFRNQVBcIjpcIlwiLGMuYnVtcE1hcD9cIiNkZWZpbmUgVVNFX0JVTVBNQVBcIjpcIlwiLGMubm9ybWFsTWFwP1wiI2RlZmluZSBVU0VfTk9STUFMTUFQXCI6XCJcIixjLnNwZWN1bGFyTWFwP1wiI2RlZmluZSBVU0VfU1BFQ1VMQVJNQVBcIjpcIlwiLGMudmVydGV4Q29sb3JzP1wiI2RlZmluZSBVU0VfQ09MT1JcIjpcIlwiLGMuc2tpbm5pbmc/XCIjZGVmaW5lIFVTRV9TS0lOTklOR1wiOlwiXCIsYy51c2VWZXJ0ZXhUZXh0dXJlP1wiI2RlZmluZSBCT05FX1RFWFRVUkVcIjpcIlwiLGMubW9ycGhUYXJnZXRzP1wiI2RlZmluZSBVU0VfTU9SUEhUQVJHRVRTXCI6XCJcIixjLm1vcnBoTm9ybWFscz9cIiNkZWZpbmUgVVNFX01PUlBITk9STUFMU1wiOlwiXCIsYy5wZXJQaXhlbD9cIiNkZWZpbmUgUEhPTkdfUEVSX1BJWEVMXCI6XCJcIixjLndyYXBBcm91bmQ/XCIjZGVmaW5lIFdSQVBfQVJPVU5EXCI6XG5cIlwiLGMuZG91YmxlU2lkZWQ/XCIjZGVmaW5lIERPVUJMRV9TSURFRFwiOlwiXCIsYy5mbGlwU2lkZWQ/XCIjZGVmaW5lIEZMSVBfU0lERURcIjpcIlwiLGMuc2hhZG93TWFwRW5hYmxlZD9cIiNkZWZpbmUgVVNFX1NIQURPV01BUFwiOlwiXCIsYy5zaGFkb3dNYXBFbmFibGVkP1wiI2RlZmluZSBcIitzOlwiXCIsYy5zaGFkb3dNYXBEZWJ1Zz9cIiNkZWZpbmUgU0hBRE9XTUFQX0RFQlVHXCI6XCJcIixjLnNoYWRvd01hcENhc2NhZGU/XCIjZGVmaW5lIFNIQURPV01BUF9DQVNDQURFXCI6XCJcIixjLnNpemVBdHRlbnVhdGlvbj9cIiNkZWZpbmUgVVNFX1NJWkVBVFRFTlVBVElPTlwiOlwiXCIsXCJ1bmlmb3JtIG1hdDQgbW9kZWxNYXRyaXg7XFxudW5pZm9ybSBtYXQ0IG1vZGVsVmlld01hdHJpeDtcXG51bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDtcXG51bmlmb3JtIG1hdDQgdmlld01hdHJpeDtcXG51bmlmb3JtIG1hdDMgbm9ybWFsTWF0cml4O1xcbnVuaWZvcm0gdmVjMyBjYW1lcmFQb3NpdGlvbjtcXG5hdHRyaWJ1dGUgdmVjMyBwb3NpdGlvbjtcXG5hdHRyaWJ1dGUgdmVjMyBub3JtYWw7XFxuYXR0cmlidXRlIHZlYzIgdXY7XFxuYXR0cmlidXRlIHZlYzIgdXYyO1xcbiNpZmRlZiBVU0VfQ09MT1JcXG5hdHRyaWJ1dGUgdmVjMyBjb2xvcjtcXG4jZW5kaWZcXG4jaWZkZWYgVVNFX01PUlBIVEFSR0VUU1xcbmF0dHJpYnV0ZSB2ZWMzIG1vcnBoVGFyZ2V0MDtcXG5hdHRyaWJ1dGUgdmVjMyBtb3JwaFRhcmdldDE7XFxuYXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQyO1xcbmF0dHJpYnV0ZSB2ZWMzIG1vcnBoVGFyZ2V0MztcXG4jaWZkZWYgVVNFX01PUlBITk9STUFMU1xcbmF0dHJpYnV0ZSB2ZWMzIG1vcnBoTm9ybWFsMDtcXG5hdHRyaWJ1dGUgdmVjMyBtb3JwaE5vcm1hbDE7XFxuYXR0cmlidXRlIHZlYzMgbW9ycGhOb3JtYWwyO1xcbmF0dHJpYnV0ZSB2ZWMzIG1vcnBoTm9ybWFsMztcXG4jZWxzZVxcbmF0dHJpYnV0ZSB2ZWMzIG1vcnBoVGFyZ2V0NDtcXG5hdHRyaWJ1dGUgdmVjMyBtb3JwaFRhcmdldDU7XFxuYXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQ2O1xcbmF0dHJpYnV0ZSB2ZWMzIG1vcnBoVGFyZ2V0NztcXG4jZW5kaWZcXG4jZW5kaWZcXG4jaWZkZWYgVVNFX1NLSU5OSU5HXFxuYXR0cmlidXRlIHZlYzQgc2tpbkluZGV4O1xcbmF0dHJpYnV0ZSB2ZWM0IHNraW5XZWlnaHQ7XFxuI2VuZGlmXFxuXCJdLmpvaW4oXCJcXG5cIik7XG5zPVtcInByZWNpc2lvbiBcIitNK1wiIGZsb2F0O1wiLFwicHJlY2lzaW9uIFwiK00rXCIgaW50O1wiLGMuYnVtcE1hcHx8Yy5ub3JtYWxNYXA/XCIjZXh0ZW5zaW9uIEdMX09FU19zdGFuZGFyZF9kZXJpdmF0aXZlcyA6IGVuYWJsZVwiOlwiXCIsZSxcIiNkZWZpbmUgTUFYX0RJUl9MSUdIVFMgXCIrYy5tYXhEaXJMaWdodHMsXCIjZGVmaW5lIE1BWF9QT0lOVF9MSUdIVFMgXCIrYy5tYXhQb2ludExpZ2h0cyxcIiNkZWZpbmUgTUFYX1NQT1RfTElHSFRTIFwiK2MubWF4U3BvdExpZ2h0cyxcIiNkZWZpbmUgTUFYX0hFTUlfTElHSFRTIFwiK2MubWF4SGVtaUxpZ2h0cyxcIiNkZWZpbmUgTUFYX1NIQURPV1MgXCIrYy5tYXhTaGFkb3dzLGMuYWxwaGFUZXN0P1wiI2RlZmluZSBBTFBIQVRFU1QgXCIrYy5hbHBoYVRlc3Q6XCJcIixMLmdhbW1hSW5wdXQ/XCIjZGVmaW5lIEdBTU1BX0lOUFVUXCI6XCJcIixMLmdhbW1hT3V0cHV0P1wiI2RlZmluZSBHQU1NQV9PVVRQVVRcIjpcIlwiLEwucGh5c2ljYWxseUJhc2VkU2hhZGluZz9cIiNkZWZpbmUgUEhZU0lDQUxMWV9CQVNFRF9TSEFESU5HXCI6XG5cIlwiLGMudXNlRm9nJiZjLmZvZz9cIiNkZWZpbmUgVVNFX0ZPR1wiOlwiXCIsYy51c2VGb2cmJmMuZm9nRXhwP1wiI2RlZmluZSBGT0dfRVhQMlwiOlwiXCIsYy5tYXA/XCIjZGVmaW5lIFVTRV9NQVBcIjpcIlwiLGMuZW52TWFwP1wiI2RlZmluZSBVU0VfRU5WTUFQXCI6XCJcIixjLmxpZ2h0TWFwP1wiI2RlZmluZSBVU0VfTElHSFRNQVBcIjpcIlwiLGMuYnVtcE1hcD9cIiNkZWZpbmUgVVNFX0JVTVBNQVBcIjpcIlwiLGMubm9ybWFsTWFwP1wiI2RlZmluZSBVU0VfTk9STUFMTUFQXCI6XCJcIixjLnNwZWN1bGFyTWFwP1wiI2RlZmluZSBVU0VfU1BFQ1VMQVJNQVBcIjpcIlwiLGMudmVydGV4Q29sb3JzP1wiI2RlZmluZSBVU0VfQ09MT1JcIjpcIlwiLGMubWV0YWw/XCIjZGVmaW5lIE1FVEFMXCI6XCJcIixjLnBlclBpeGVsP1wiI2RlZmluZSBQSE9OR19QRVJfUElYRUxcIjpcIlwiLGMud3JhcEFyb3VuZD9cIiNkZWZpbmUgV1JBUF9BUk9VTkRcIjpcIlwiLGMuZG91YmxlU2lkZWQ/XCIjZGVmaW5lIERPVUJMRV9TSURFRFwiOlwiXCIsYy5mbGlwU2lkZWQ/XCIjZGVmaW5lIEZMSVBfU0lERURcIjpcblwiXCIsYy5zaGFkb3dNYXBFbmFibGVkP1wiI2RlZmluZSBVU0VfU0hBRE9XTUFQXCI6XCJcIixjLnNoYWRvd01hcEVuYWJsZWQ/XCIjZGVmaW5lIFwiK3M6XCJcIixjLnNoYWRvd01hcERlYnVnP1wiI2RlZmluZSBTSEFET1dNQVBfREVCVUdcIjpcIlwiLGMuc2hhZG93TWFwQ2FzY2FkZT9cIiNkZWZpbmUgU0hBRE9XTUFQX0NBU0NBREVcIjpcIlwiLFwidW5pZm9ybSBtYXQ0IHZpZXdNYXRyaXg7XFxudW5pZm9ybSB2ZWMzIGNhbWVyYVBvc2l0aW9uO1xcblwiXS5qb2luKFwiXFxuXCIpO3U9RChcInZlcnRleFwiLHUrcSk7cz1EKFwiZnJhZ21lbnRcIixzK3IpO2ouYXR0YWNoU2hhZGVyKHYsdSk7ai5hdHRhY2hTaGFkZXIodixzKTtkJiZqLmJpbmRBdHRyaWJMb2NhdGlvbih2LDAsZCk7ai5saW5rUHJvZ3JhbSh2KTtqLmdldFByb2dyYW1QYXJhbWV0ZXIodixqLkxJTktfU1RBVFVTKXx8KGNvbnNvbGUuZXJyb3IoXCJDb3VsZCBub3QgaW5pdGlhbGlzZSBzaGFkZXJcXG5WQUxJREFURV9TVEFUVVM6IFwiK2ouZ2V0UHJvZ3JhbVBhcmFtZXRlcih2LFxuai5WQUxJREFURV9TVEFUVVMpK1wiLCBnbCBlcnJvciBbXCIrai5nZXRFcnJvcigpK1wiXVwiKSxjb25zb2xlLmVycm9yKFwiUHJvZ3JhbSBJbmZvIExvZzogXCIrai5nZXRQcm9ncmFtSW5mb0xvZyh2KSkpO2ouZGVsZXRlU2hhZGVyKHMpO2ouZGVsZXRlU2hhZGVyKHUpO3YudW5pZm9ybXM9e307di5hdHRyaWJ1dGVzPXt9O3ZhciB3O3M9XCJ2aWV3TWF0cml4IG1vZGVsVmlld01hdHJpeCBwcm9qZWN0aW9uTWF0cml4IG5vcm1hbE1hdHJpeCBtb2RlbE1hdHJpeCBjYW1lcmFQb3NpdGlvbiBtb3JwaFRhcmdldEluZmx1ZW5jZXNcIi5zcGxpdChcIiBcIik7Yy51c2VWZXJ0ZXhUZXh0dXJlPyhzLnB1c2goXCJib25lVGV4dHVyZVwiKSxzLnB1c2goXCJib25lVGV4dHVyZVdpZHRoXCIpLHMucHVzaChcImJvbmVUZXh0dXJlSGVpZ2h0XCIpKTpzLnB1c2goXCJib25lR2xvYmFsTWF0cmljZXNcIik7Zm9yKHcgaW4gcClzLnB1c2godyk7dz1zO3M9MDtmb3IodT13Lmxlbmd0aDtzPHU7cysrKXA9d1tzXSx2LnVuaWZvcm1zW3BdPVxuai5nZXRVbmlmb3JtTG9jYXRpb24odixwKTtzPVwicG9zaXRpb24gbm9ybWFsIHV2IHV2MiB0YW5nZW50IGNvbG9yIHNraW5JbmRleCBza2luV2VpZ2h0IGxpbmVEaXN0YW5jZVwiLnNwbGl0KFwiIFwiKTtmb3Iodz0wO3c8Yy5tYXhNb3JwaFRhcmdldHM7dysrKXMucHVzaChcIm1vcnBoVGFyZ2V0XCIrdyk7Zm9yKHc9MDt3PGMubWF4TW9ycGhOb3JtYWxzO3crKylzLnB1c2goXCJtb3JwaE5vcm1hbFwiK3cpO2ZvcihrIGluIGIpcy5wdXNoKGspO2s9czt3PTA7Zm9yKGI9ay5sZW5ndGg7dzxiO3crKylzPWtbd10sdi5hdHRyaWJ1dGVzW3NdPWouZ2V0QXR0cmliTG9jYXRpb24odixzKTt2LmlkPXphKys7ZGEucHVzaCh7cHJvZ3JhbTp2LGNvZGU6bix1c2VkVGltZXM6MX0pO0wuaW5mby5tZW1vcnkucHJvZ3JhbXM9ZGEubGVuZ3RoO2s9dn1hLnByb2dyYW09azt3PWEucHJvZ3JhbS5hdHRyaWJ1dGVzO2lmKGEubW9ycGhUYXJnZXRzKXthLm51bVN1cHBvcnRlZE1vcnBoVGFyZ2V0cz0wO2I9XCJtb3JwaFRhcmdldFwiO1xuZm9yKGs9MDtrPHRoaXMubWF4TW9ycGhUYXJnZXRzO2srKyl2PWIraywwPD13W3ZdJiZhLm51bVN1cHBvcnRlZE1vcnBoVGFyZ2V0cysrfWlmKGEubW9ycGhOb3JtYWxzKXthLm51bVN1cHBvcnRlZE1vcnBoTm9ybWFscz0wO2I9XCJtb3JwaE5vcm1hbFwiO2ZvcihrPTA7azx0aGlzLm1heE1vcnBoTm9ybWFscztrKyspdj1iK2ssMDw9d1t2XSYmYS5udW1TdXBwb3J0ZWRNb3JwaE5vcm1hbHMrK31hLnVuaWZvcm1zTGlzdD1bXTtmb3IoaSBpbiBhLnVuaWZvcm1zKWEudW5pZm9ybXNMaXN0LnB1c2goW2EudW5pZm9ybXNbaV0saV0pfTt0aGlzLnNldEZhY2VDdWxsaW5nPWZ1bmN0aW9uKGEsYil7YT09PVRIUkVFLkN1bGxGYWNlTm9uZT9qLmRpc2FibGUoai5DVUxMX0ZBQ0UpOihiPT09VEhSRUUuRnJvbnRGYWNlRGlyZWN0aW9uQ1c/ai5mcm9udEZhY2Uoai5DVyk6ai5mcm9udEZhY2Uoai5DQ1cpLGE9PT1USFJFRS5DdWxsRmFjZUJhY2s/ai5jdWxsRmFjZShqLkJBQ0spOmE9PT1USFJFRS5DdWxsRmFjZUZyb250P1xuai5jdWxsRmFjZShqLkZST05UKTpqLmN1bGxGYWNlKGouRlJPTlRfQU5EX0JBQ0spLGouZW5hYmxlKGouQ1VMTF9GQUNFKSl9O3RoaXMuc2V0TWF0ZXJpYWxGYWNlcz1mdW5jdGlvbihhKXt2YXIgYj1hLnNpZGU9PT1USFJFRS5Eb3VibGVTaWRlLGE9YS5zaWRlPT09VEhSRUUuQmFja1NpZGU7WSE9PWImJihiP2ouZGlzYWJsZShqLkNVTExfRkFDRSk6ai5lbmFibGUoai5DVUxMX0ZBQ0UpLFk9Yik7VSE9PWEmJihhP2ouZnJvbnRGYWNlKGouQ1cpOmouZnJvbnRGYWNlKGouQ0NXKSxVPWEpfTt0aGlzLnNldERlcHRoVGVzdD1mdW5jdGlvbihhKXtHYSE9PWEmJihhP2ouZW5hYmxlKGouREVQVEhfVEVTVCk6ai5kaXNhYmxlKGouREVQVEhfVEVTVCksR2E9YSl9O3RoaXMuc2V0RGVwdGhXcml0ZT1mdW5jdGlvbihhKXtrYSE9PWEmJihqLmRlcHRoTWFzayhhKSxrYT1hKX07dGhpcy5zZXRCbGVuZGluZz1mdW5jdGlvbihhLGIsYyxkKXthIT09amEmJihhPT09VEhSRUUuTm9CbGVuZGluZz9qLmRpc2FibGUoai5CTEVORCk6XG5hPT09VEhSRUUuQWRkaXRpdmVCbGVuZGluZz8oai5lbmFibGUoai5CTEVORCksai5ibGVuZEVxdWF0aW9uKGouRlVOQ19BREQpLGouYmxlbmRGdW5jKGouU1JDX0FMUEhBLGouT05FKSk6YT09PVRIUkVFLlN1YnRyYWN0aXZlQmxlbmRpbmc/KGouZW5hYmxlKGouQkxFTkQpLGouYmxlbmRFcXVhdGlvbihqLkZVTkNfQUREKSxqLmJsZW5kRnVuYyhqLlpFUk8sai5PTkVfTUlOVVNfU1JDX0NPTE9SKSk6YT09PVRIUkVFLk11bHRpcGx5QmxlbmRpbmc/KGouZW5hYmxlKGouQkxFTkQpLGouYmxlbmRFcXVhdGlvbihqLkZVTkNfQUREKSxqLmJsZW5kRnVuYyhqLlpFUk8sai5TUkNfQ09MT1IpKTphPT09VEhSRUUuQ3VzdG9tQmxlbmRpbmc/ai5lbmFibGUoai5CTEVORCk6KGouZW5hYmxlKGouQkxFTkQpLGouYmxlbmRFcXVhdGlvblNlcGFyYXRlKGouRlVOQ19BREQsai5GVU5DX0FERCksai5ibGVuZEZ1bmNTZXBhcmF0ZShqLlNSQ19BTFBIQSxqLk9ORV9NSU5VU19TUkNfQUxQSEEsai5PTkUsXG5qLk9ORV9NSU5VU19TUkNfQUxQSEEpKSxqYT1hKTtpZihhPT09VEhSRUUuQ3VzdG9tQmxlbmRpbmcpe2lmKGIhPT1zYSYmKGouYmxlbmRFcXVhdGlvbihJKGIpKSxzYT1iKSxjIT09aGF8fGQhPT1LYSlqLmJsZW5kRnVuYyhJKGMpLEkoZCkpLGhhPWMsS2E9ZH1lbHNlIEthPWhhPXNhPW51bGx9O3RoaXMuc2V0VGV4dHVyZT1mdW5jdGlvbihhLGIpe2lmKGEubmVlZHNVcGRhdGUpe2EuX193ZWJnbEluaXR8fChhLl9fd2ViZ2xJbml0PSEwLGEuYWRkRXZlbnRMaXN0ZW5lcihcImRpc3Bvc2VcIixEYiksYS5fX3dlYmdsVGV4dHVyZT1qLmNyZWF0ZVRleHR1cmUoKSxMLmluZm8ubWVtb3J5LnRleHR1cmVzKyspO2ouYWN0aXZlVGV4dHVyZShqLlRFWFRVUkUwK2IpO2ouYmluZFRleHR1cmUoai5URVhUVVJFXzJELGEuX193ZWJnbFRleHR1cmUpO2oucGl4ZWxTdG9yZWkoai5VTlBBQ0tfRkxJUF9ZX1dFQkdMLGEuZmxpcFkpO2oucGl4ZWxTdG9yZWkoai5VTlBBQ0tfUFJFTVVMVElQTFlfQUxQSEFfV0VCR0wsXG5hLnByZW11bHRpcGx5QWxwaGEpO2oucGl4ZWxTdG9yZWkoai5VTlBBQ0tfQUxJR05NRU5ULGEudW5wYWNrQWxpZ25tZW50KTt2YXIgYz1hLmltYWdlLGQ9MD09PShjLndpZHRoJmMud2lkdGgtMSkmJjA9PT0oYy5oZWlnaHQmYy5oZWlnaHQtMSksZT1JKGEuZm9ybWF0KSxmPUkoYS50eXBlKTtGKGouVEVYVFVSRV8yRCxhLGQpO3ZhciBnPWEubWlwbWFwcztpZihhIGluc3RhbmNlb2YgVEhSRUUuRGF0YVRleHR1cmUpaWYoMDxnLmxlbmd0aCYmZCl7Zm9yKHZhciBoPTAsaT1nLmxlbmd0aDtoPGk7aCsrKWM9Z1toXSxqLnRleEltYWdlMkQoai5URVhUVVJFXzJELGgsZSxjLndpZHRoLGMuaGVpZ2h0LDAsZSxmLGMuZGF0YSk7YS5nZW5lcmF0ZU1pcG1hcHM9ITF9ZWxzZSBqLnRleEltYWdlMkQoai5URVhUVVJFXzJELDAsZSxjLndpZHRoLGMuaGVpZ2h0LDAsZSxmLGMuZGF0YSk7ZWxzZSBpZihhIGluc3RhbmNlb2YgVEhSRUUuQ29tcHJlc3NlZFRleHR1cmUpe2g9MDtmb3IoaT1nLmxlbmd0aDtoPFxuaTtoKyspYz1nW2hdLGEuZm9ybWF0IT09VEhSRUUuUkdCQUZvcm1hdD9qLmNvbXByZXNzZWRUZXhJbWFnZTJEKGouVEVYVFVSRV8yRCxoLGUsYy53aWR0aCxjLmhlaWdodCwwLGMuZGF0YSk6ai50ZXhJbWFnZTJEKGouVEVYVFVSRV8yRCxoLGUsYy53aWR0aCxjLmhlaWdodCwwLGUsZixjLmRhdGEpfWVsc2UgaWYoMDxnLmxlbmd0aCYmZCl7aD0wO2ZvcihpPWcubGVuZ3RoO2g8aTtoKyspYz1nW2hdLGoudGV4SW1hZ2UyRChqLlRFWFRVUkVfMkQsaCxlLGUsZixjKTthLmdlbmVyYXRlTWlwbWFwcz0hMX1lbHNlIGoudGV4SW1hZ2UyRChqLlRFWFRVUkVfMkQsMCxlLGUsZixhLmltYWdlKTthLmdlbmVyYXRlTWlwbWFwcyYmZCYmai5nZW5lcmF0ZU1pcG1hcChqLlRFWFRVUkVfMkQpO2EubmVlZHNVcGRhdGU9ITE7aWYoYS5vblVwZGF0ZSlhLm9uVXBkYXRlKCl9ZWxzZSBqLmFjdGl2ZVRleHR1cmUoai5URVhUVVJFMCtiKSxqLmJpbmRUZXh0dXJlKGouVEVYVFVSRV8yRCxhLl9fd2ViZ2xUZXh0dXJlKX07XG50aGlzLnNldFJlbmRlclRhcmdldD1mdW5jdGlvbihhKXt2YXIgYj1hIGluc3RhbmNlb2YgVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXRDdWJlO2lmKGEmJiFhLl9fd2ViZ2xGcmFtZWJ1ZmZlcil7dm9pZCAwPT09YS5kZXB0aEJ1ZmZlciYmKGEuZGVwdGhCdWZmZXI9ITApO3ZvaWQgMD09PWEuc3RlbmNpbEJ1ZmZlciYmKGEuc3RlbmNpbEJ1ZmZlcj0hMCk7YS5hZGRFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLEViKTthLl9fd2ViZ2xUZXh0dXJlPWouY3JlYXRlVGV4dHVyZSgpO0wuaW5mby5tZW1vcnkudGV4dHVyZXMrKzt2YXIgYz0wPT09KGEud2lkdGgmYS53aWR0aC0xKSYmMD09PShhLmhlaWdodCZhLmhlaWdodC0xKSxkPUkoYS5mb3JtYXQpLGU9SShhLnR5cGUpO2lmKGIpe2EuX193ZWJnbEZyYW1lYnVmZmVyPVtdO2EuX193ZWJnbFJlbmRlcmJ1ZmZlcj1bXTtqLmJpbmRUZXh0dXJlKGouVEVYVFVSRV9DVUJFX01BUCxhLl9fd2ViZ2xUZXh0dXJlKTtGKGouVEVYVFVSRV9DVUJFX01BUCxcbmEsYyk7Zm9yKHZhciBmPTA7Nj5mO2YrKyl7YS5fX3dlYmdsRnJhbWVidWZmZXJbZl09ai5jcmVhdGVGcmFtZWJ1ZmZlcigpO2EuX193ZWJnbFJlbmRlcmJ1ZmZlcltmXT1qLmNyZWF0ZVJlbmRlcmJ1ZmZlcigpO2oudGV4SW1hZ2UyRChqLlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCtmLDAsZCxhLndpZHRoLGEuaGVpZ2h0LDAsZCxlLG51bGwpO3ZhciBnPWEsaD1qLlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCtmO2ouYmluZEZyYW1lYnVmZmVyKGouRlJBTUVCVUZGRVIsYS5fX3dlYmdsRnJhbWVidWZmZXJbZl0pO2ouZnJhbWVidWZmZXJUZXh0dXJlMkQoai5GUkFNRUJVRkZFUixqLkNPTE9SX0FUVEFDSE1FTlQwLGgsZy5fX3dlYmdsVGV4dHVyZSwwKTtPKGEuX193ZWJnbFJlbmRlcmJ1ZmZlcltmXSxhKX1jJiZqLmdlbmVyYXRlTWlwbWFwKGouVEVYVFVSRV9DVUJFX01BUCl9ZWxzZSBhLl9fd2ViZ2xGcmFtZWJ1ZmZlcj1qLmNyZWF0ZUZyYW1lYnVmZmVyKCksYS5fX3dlYmdsUmVuZGVyYnVmZmVyPVxuYS5zaGFyZURlcHRoRnJvbT9hLnNoYXJlRGVwdGhGcm9tLl9fd2ViZ2xSZW5kZXJidWZmZXI6ai5jcmVhdGVSZW5kZXJidWZmZXIoKSxqLmJpbmRUZXh0dXJlKGouVEVYVFVSRV8yRCxhLl9fd2ViZ2xUZXh0dXJlKSxGKGouVEVYVFVSRV8yRCxhLGMpLGoudGV4SW1hZ2UyRChqLlRFWFRVUkVfMkQsMCxkLGEud2lkdGgsYS5oZWlnaHQsMCxkLGUsbnVsbCksZD1qLlRFWFRVUkVfMkQsai5iaW5kRnJhbWVidWZmZXIoai5GUkFNRUJVRkZFUixhLl9fd2ViZ2xGcmFtZWJ1ZmZlciksai5mcmFtZWJ1ZmZlclRleHR1cmUyRChqLkZSQU1FQlVGRkVSLGouQ09MT1JfQVRUQUNITUVOVDAsZCxhLl9fd2ViZ2xUZXh0dXJlLDApLGEuc2hhcmVEZXB0aEZyb20/YS5kZXB0aEJ1ZmZlciYmIWEuc3RlbmNpbEJ1ZmZlcj9qLmZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyKGouRlJBTUVCVUZGRVIsai5ERVBUSF9BVFRBQ0hNRU5ULGouUkVOREVSQlVGRkVSLGEuX193ZWJnbFJlbmRlcmJ1ZmZlcik6YS5kZXB0aEJ1ZmZlciYmXG5hLnN0ZW5jaWxCdWZmZXImJmouZnJhbWVidWZmZXJSZW5kZXJidWZmZXIoai5GUkFNRUJVRkZFUixqLkRFUFRIX1NURU5DSUxfQVRUQUNITUVOVCxqLlJFTkRFUkJVRkZFUixhLl9fd2ViZ2xSZW5kZXJidWZmZXIpOk8oYS5fX3dlYmdsUmVuZGVyYnVmZmVyLGEpLGMmJmouZ2VuZXJhdGVNaXBtYXAoai5URVhUVVJFXzJEKTtiP2ouYmluZFRleHR1cmUoai5URVhUVVJFX0NVQkVfTUFQLG51bGwpOmouYmluZFRleHR1cmUoai5URVhUVVJFXzJELG51bGwpO2ouYmluZFJlbmRlcmJ1ZmZlcihqLlJFTkRFUkJVRkZFUixudWxsKTtqLmJpbmRGcmFtZWJ1ZmZlcihqLkZSQU1FQlVGRkVSLG51bGwpfWE/KGI9Yj9hLl9fd2ViZ2xGcmFtZWJ1ZmZlclthLmFjdGl2ZUN1YmVGYWNlXTphLl9fd2ViZ2xGcmFtZWJ1ZmZlcixjPWEud2lkdGgsYT1hLmhlaWdodCxlPWQ9MCk6KGI9bnVsbCxjPU1hLGE9ZmIsZD1iYixlPWNiKTtiIT09YmEmJihqLmJpbmRGcmFtZWJ1ZmZlcihqLkZSQU1FQlVGRkVSLGIpLFxuai52aWV3cG9ydChkLGUsYyxhKSxiYT1iKTtzYj1jO3BiPWF9O3RoaXMuc2hhZG93TWFwUGx1Z2luPW5ldyBUSFJFRS5TaGFkb3dNYXBQbHVnaW47dGhpcy5hZGRQcmVQbHVnaW4odGhpcy5zaGFkb3dNYXBQbHVnaW4pO3RoaXMuYWRkUG9zdFBsdWdpbihuZXcgVEhSRUUuU3ByaXRlUGx1Z2luKTt0aGlzLmFkZFBvc3RQbHVnaW4obmV3IFRIUkVFLkxlbnNGbGFyZVBsdWdpbil9O1RIUkVFLldlYkdMUmVuZGVyVGFyZ2V0PWZ1bmN0aW9uKGEsYixjKXt0aGlzLndpZHRoPWE7dGhpcy5oZWlnaHQ9YjtjPWN8fHt9O3RoaXMud3JhcFM9dm9pZCAwIT09Yy53cmFwUz9jLndyYXBTOlRIUkVFLkNsYW1wVG9FZGdlV3JhcHBpbmc7dGhpcy53cmFwVD12b2lkIDAhPT1jLndyYXBUP2Mud3JhcFQ6VEhSRUUuQ2xhbXBUb0VkZ2VXcmFwcGluZzt0aGlzLm1hZ0ZpbHRlcj12b2lkIDAhPT1jLm1hZ0ZpbHRlcj9jLm1hZ0ZpbHRlcjpUSFJFRS5MaW5lYXJGaWx0ZXI7dGhpcy5taW5GaWx0ZXI9dm9pZCAwIT09Yy5taW5GaWx0ZXI/Yy5taW5GaWx0ZXI6VEhSRUUuTGluZWFyTWlwTWFwTGluZWFyRmlsdGVyO3RoaXMuYW5pc290cm9weT12b2lkIDAhPT1jLmFuaXNvdHJvcHk/Yy5hbmlzb3Ryb3B5OjE7dGhpcy5vZmZzZXQ9bmV3IFRIUkVFLlZlY3RvcjIoMCwwKTt0aGlzLnJlcGVhdD1uZXcgVEhSRUUuVmVjdG9yMigxLDEpO3RoaXMuZm9ybWF0PXZvaWQgMCE9PWMuZm9ybWF0P2MuZm9ybWF0OlxuVEhSRUUuUkdCQUZvcm1hdDt0aGlzLnR5cGU9dm9pZCAwIT09Yy50eXBlP2MudHlwZTpUSFJFRS5VbnNpZ25lZEJ5dGVUeXBlO3RoaXMuZGVwdGhCdWZmZXI9dm9pZCAwIT09Yy5kZXB0aEJ1ZmZlcj9jLmRlcHRoQnVmZmVyOiEwO3RoaXMuc3RlbmNpbEJ1ZmZlcj12b2lkIDAhPT1jLnN0ZW5jaWxCdWZmZXI/Yy5zdGVuY2lsQnVmZmVyOiEwO3RoaXMuZ2VuZXJhdGVNaXBtYXBzPSEwO3RoaXMuc2hhcmVEZXB0aEZyb209bnVsbH07XG5USFJFRS5XZWJHTFJlbmRlclRhcmdldC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0KHRoaXMud2lkdGgsdGhpcy5oZWlnaHQpO2Eud3JhcFM9dGhpcy53cmFwUzthLndyYXBUPXRoaXMud3JhcFQ7YS5tYWdGaWx0ZXI9dGhpcy5tYWdGaWx0ZXI7YS5taW5GaWx0ZXI9dGhpcy5taW5GaWx0ZXI7YS5hbmlzb3Ryb3B5PXRoaXMuYW5pc290cm9weTthLm9mZnNldC5jb3B5KHRoaXMub2Zmc2V0KTthLnJlcGVhdC5jb3B5KHRoaXMucmVwZWF0KTthLmZvcm1hdD10aGlzLmZvcm1hdDthLnR5cGU9dGhpcy50eXBlO2EuZGVwdGhCdWZmZXI9dGhpcy5kZXB0aEJ1ZmZlcjthLnN0ZW5jaWxCdWZmZXI9dGhpcy5zdGVuY2lsQnVmZmVyO2EuZ2VuZXJhdGVNaXBtYXBzPXRoaXMuZ2VuZXJhdGVNaXBtYXBzO2Euc2hhcmVEZXB0aEZyb209dGhpcy5zaGFyZURlcHRoRnJvbTtcbnJldHVybiBhfSxkaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiZGlzcG9zZVwifSl9fTtUSFJFRS5FdmVudERpc3BhdGNoZXIucHJvdG90eXBlLmFwcGx5KFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0LnByb3RvdHlwZSk7VEhSRUUuV2ViR0xSZW5kZXJUYXJnZXRDdWJlPWZ1bmN0aW9uKGEsYixjKXtUSFJFRS5XZWJHTFJlbmRlclRhcmdldC5jYWxsKHRoaXMsYSxiLGMpO3RoaXMuYWN0aXZlQ3ViZUZhY2U9MH07VEhSRUUuV2ViR0xSZW5kZXJUYXJnZXRDdWJlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0LnByb3RvdHlwZSk7VEhSRUUuUmVuZGVyYWJsZVZlcnRleD1mdW5jdGlvbigpe3RoaXMucG9zaXRpb25Xb3JsZD1uZXcgVEhSRUUuVmVjdG9yMzt0aGlzLnBvc2l0aW9uU2NyZWVuPW5ldyBUSFJFRS5WZWN0b3I0O3RoaXMudmlzaWJsZT0hMH07VEhSRUUuUmVuZGVyYWJsZVZlcnRleC5wcm90b3R5cGUuY29weT1mdW5jdGlvbihhKXt0aGlzLnBvc2l0aW9uV29ybGQuY29weShhLnBvc2l0aW9uV29ybGQpO3RoaXMucG9zaXRpb25TY3JlZW4uY29weShhLnBvc2l0aW9uU2NyZWVuKX07VEhSRUUuUmVuZGVyYWJsZUZhY2UzPWZ1bmN0aW9uKCl7dGhpcy5pZD0wO3RoaXMudjE9bmV3IFRIUkVFLlJlbmRlcmFibGVWZXJ0ZXg7dGhpcy52Mj1uZXcgVEhSRUUuUmVuZGVyYWJsZVZlcnRleDt0aGlzLnYzPW5ldyBUSFJFRS5SZW5kZXJhYmxlVmVydGV4O3RoaXMuY2VudHJvaWRNb2RlbD1uZXcgVEhSRUUuVmVjdG9yMzt0aGlzLm5vcm1hbE1vZGVsPW5ldyBUSFJFRS5WZWN0b3IzO3RoaXMubm9ybWFsTW9kZWxWaWV3PW5ldyBUSFJFRS5WZWN0b3IzO3RoaXMudmVydGV4Tm9ybWFsc0xlbmd0aD0wO3RoaXMudmVydGV4Tm9ybWFsc01vZGVsPVtuZXcgVEhSRUUuVmVjdG9yMyxuZXcgVEhSRUUuVmVjdG9yMyxuZXcgVEhSRUUuVmVjdG9yM107dGhpcy52ZXJ0ZXhOb3JtYWxzTW9kZWxWaWV3PVtuZXcgVEhSRUUuVmVjdG9yMyxuZXcgVEhSRUUuVmVjdG9yMyxuZXcgVEhSRUUuVmVjdG9yM107dGhpcy5tYXRlcmlhbD10aGlzLmNvbG9yPW51bGw7dGhpcy51dnM9W1tdXTt0aGlzLno9XG4wfTtUSFJFRS5SZW5kZXJhYmxlT2JqZWN0PWZ1bmN0aW9uKCl7dGhpcy5pZD0wO3RoaXMub2JqZWN0PW51bGw7dGhpcy56PTB9O1RIUkVFLlJlbmRlcmFibGVTcHJpdGU9ZnVuY3Rpb24oKXt0aGlzLmlkPTA7dGhpcy5vYmplY3Q9bnVsbDt0aGlzLnJvdGF0aW9uPXRoaXMuej10aGlzLnk9dGhpcy54PTA7dGhpcy5zY2FsZT1uZXcgVEhSRUUuVmVjdG9yMjt0aGlzLm1hdGVyaWFsPW51bGx9O1RIUkVFLlJlbmRlcmFibGVMaW5lPWZ1bmN0aW9uKCl7dGhpcy5pZD0wO3RoaXMudjE9bmV3IFRIUkVFLlJlbmRlcmFibGVWZXJ0ZXg7dGhpcy52Mj1uZXcgVEhSRUUuUmVuZGVyYWJsZVZlcnRleDt0aGlzLnZlcnRleENvbG9ycz1bbmV3IFRIUkVFLkNvbG9yLG5ldyBUSFJFRS5Db2xvcl07dGhpcy5tYXRlcmlhbD1udWxsO3RoaXMuej0wfTtUSFJFRS5HZW9tZXRyeVV0aWxzPXttZXJnZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPWEudmVydGljZXMubGVuZ3RoLGg9YiBpbnN0YW5jZW9mIFRIUkVFLk1lc2g/Yi5nZW9tZXRyeTpiLGc9YS52ZXJ0aWNlcyxpPWgudmVydGljZXMsaz1hLmZhY2VzLG09aC5mYWNlcyxhPWEuZmFjZVZlcnRleFV2c1swXSxoPWguZmFjZVZlcnRleFV2c1swXTt2b2lkIDA9PT1jJiYoYz0wKTtiIGluc3RhbmNlb2YgVEhSRUUuTWVzaCYmKGIubWF0cml4QXV0b1VwZGF0ZSYmYi51cGRhdGVNYXRyaXgoKSxkPWIubWF0cml4LGU9KG5ldyBUSFJFRS5NYXRyaXgzKS5nZXROb3JtYWxNYXRyaXgoZCkpO2Zvcih2YXIgYj0wLGw9aS5sZW5ndGg7YjxsO2IrKyl7dmFyIHA9aVtiXS5jbG9uZSgpO2QmJnAuYXBwbHlNYXRyaXg0KGQpO2cucHVzaChwKX1iPTA7Zm9yKGw9bS5sZW5ndGg7YjxsO2IrKyl7dmFyIHA9bVtiXSx0LHMscT1wLnZlcnRleE5vcm1hbHMsbj1wLnZlcnRleENvbG9yczt0PW5ldyBUSFJFRS5GYWNlMyhwLmErXG5mLHAuYitmLHAuYytmKTt0Lm5vcm1hbC5jb3B5KHAubm9ybWFsKTtlJiZ0Lm5vcm1hbC5hcHBseU1hdHJpeDMoZSkubm9ybWFsaXplKCk7Zz0wO2ZvcihpPXEubGVuZ3RoO2c8aTtnKyspcz1xW2ddLmNsb25lKCksZSYmcy5hcHBseU1hdHJpeDMoZSkubm9ybWFsaXplKCksdC52ZXJ0ZXhOb3JtYWxzLnB1c2gocyk7dC5jb2xvci5jb3B5KHAuY29sb3IpO2c9MDtmb3IoaT1uLmxlbmd0aDtnPGk7ZysrKXM9bltnXSx0LnZlcnRleENvbG9ycy5wdXNoKHMuY2xvbmUoKSk7dC5tYXRlcmlhbEluZGV4PXAubWF0ZXJpYWxJbmRleCtjO3QuY2VudHJvaWQuY29weShwLmNlbnRyb2lkKTtkJiZ0LmNlbnRyb2lkLmFwcGx5TWF0cml4NChkKTtrLnB1c2godCl9Yj0wO2ZvcihsPWgubGVuZ3RoO2I8bDtiKyspe2M9aFtiXTtkPVtdO2c9MDtmb3IoaT1jLmxlbmd0aDtnPGk7ZysrKWQucHVzaChuZXcgVEhSRUUuVmVjdG9yMihjW2ddLngsY1tnXS55KSk7YS5wdXNoKGQpfX0scmFuZG9tUG9pbnRJblRyaWFuZ2xlOmZ1bmN0aW9uKCl7dmFyIGE9XG5uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oYixjLGQpe3ZhciBlPW5ldyBUSFJFRS5WZWN0b3IzLGY9VEhSRUUuTWF0aC5yYW5kb20xNigpLGg9VEhSRUUuTWF0aC5yYW5kb20xNigpOzE8ZitoJiYoZj0xLWYsaD0xLWgpO3ZhciBnPTEtZi1oO2UuY29weShiKTtlLm11bHRpcGx5U2NhbGFyKGYpO2EuY29weShjKTthLm11bHRpcGx5U2NhbGFyKGgpO2UuYWRkKGEpO2EuY29weShkKTthLm11bHRpcGx5U2NhbGFyKGcpO2UuYWRkKGEpO3JldHVybiBlfX0oKSxyYW5kb21Qb2ludEluRmFjZTpmdW5jdGlvbihhLGIpe3JldHVybiBUSFJFRS5HZW9tZXRyeVV0aWxzLnJhbmRvbVBvaW50SW5UcmlhbmdsZShiLnZlcnRpY2VzW2EuYV0sYi52ZXJ0aWNlc1thLmJdLGIudmVydGljZXNbYS5jXSl9LHJhbmRvbVBvaW50c0luR2VvbWV0cnk6ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEpe2Z1bmN0aW9uIGIoYyxkKXtpZihkPGMpcmV0dXJuIGM7dmFyIGU9YytNYXRoLmZsb29yKChkLVxuYykvMik7cmV0dXJuIGtbZV0+YT9iKGMsZS0xKTprW2VdPGE/YihlKzEsZCk6ZX1yZXR1cm4gYigwLGsubGVuZ3RoLTEpfXZhciBkLGUsZj1hLmZhY2VzLGg9YS52ZXJ0aWNlcyxnPWYubGVuZ3RoLGk9MCxrPVtdLG0sbCxwO2ZvcihlPTA7ZTxnO2UrKylkPWZbZV0sbT1oW2QuYV0sbD1oW2QuYl0scD1oW2QuY10sZC5fYXJlYT1USFJFRS5HZW9tZXRyeVV0aWxzLnRyaWFuZ2xlQXJlYShtLGwscCksaSs9ZC5fYXJlYSxrW2VdPWk7ZD1bXTtmb3IoZT0wO2U8YjtlKyspaD1USFJFRS5NYXRoLnJhbmRvbTE2KCkqaSxoPWMoaCksZFtlXT1USFJFRS5HZW9tZXRyeVV0aWxzLnJhbmRvbVBvaW50SW5GYWNlKGZbaF0sYSwhMCk7cmV0dXJuIGR9LHRyaWFuZ2xlQXJlYTpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzLGI9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGMsZCxlKXthLnN1YlZlY3RvcnMoZCxjKTtiLnN1YlZlY3RvcnMoZSxjKTthLmNyb3NzKGIpO3JldHVybiAwLjUqXG5hLmxlbmd0aCgpfX0oKSxjZW50ZXI6ZnVuY3Rpb24oYSl7YS5jb21wdXRlQm91bmRpbmdCb3goKTt2YXIgYj1hLmJvdW5kaW5nQm94LGM9bmV3IFRIUkVFLlZlY3RvcjM7Yy5hZGRWZWN0b3JzKGIubWluLGIubWF4KTtjLm11bHRpcGx5U2NhbGFyKC0wLjUpO2EuYXBwbHlNYXRyaXgoKG5ldyBUSFJFRS5NYXRyaXg0KS5tYWtlVHJhbnNsYXRpb24oYy54LGMueSxjLnopKTthLmNvbXB1dGVCb3VuZGluZ0JveCgpO3JldHVybiBjfSx0cmlhbmd1bGF0ZVF1YWRzOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGY9W10saD1bXTtiPTA7Zm9yKGM9YS5mYWNlVmVydGV4VXZzLmxlbmd0aDtiPGM7YisrKWhbYl09W107Yj0wO2ZvcihjPWEuZmFjZXMubGVuZ3RoO2I8YztiKyspe2YucHVzaChhLmZhY2VzW2JdKTtkPTA7Zm9yKGU9YS5mYWNlVmVydGV4VXZzLmxlbmd0aDtkPGU7ZCsrKWhbZF0ucHVzaChhLmZhY2VWZXJ0ZXhVdnNbZF1bYl0pfWEuZmFjZXM9ZjthLmZhY2VWZXJ0ZXhVdnM9aDthLmNvbXB1dGVDZW50cm9pZHMoKTtcbmEuY29tcHV0ZUZhY2VOb3JtYWxzKCk7YS5jb21wdXRlVmVydGV4Tm9ybWFscygpO2EuaGFzVGFuZ2VudHMmJmEuY29tcHV0ZVRhbmdlbnRzKCl9fTtUSFJFRS5JbWFnZVV0aWxzPXtjcm9zc09yaWdpbjpcImFub255bW91c1wiLGxvYWRUZXh0dXJlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1uZXcgVEhSRUUuSW1hZ2VMb2FkZXI7ZC5jcm9zc09yaWdpbj10aGlzLmNyb3NzT3JpZ2luO3ZhciBlPW5ldyBUSFJFRS5UZXh0dXJlKHZvaWQgMCxiKSxiPWQubG9hZChhLGZ1bmN0aW9uKCl7ZS5uZWVkc1VwZGF0ZT0hMDtjJiZjKGUpfSk7ZS5pbWFnZT1iO2Uuc291cmNlRmlsZT1hO3JldHVybiBlfSxsb2FkQ29tcHJlc3NlZFRleHR1cmU6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9bmV3IFRIUkVFLkNvbXByZXNzZWRUZXh0dXJlO2UubWFwcGluZz1iO3ZhciBmPW5ldyBYTUxIdHRwUmVxdWVzdDtmLm9ubG9hZD1mdW5jdGlvbigpe3ZhciBhPVRIUkVFLkltYWdlVXRpbHMucGFyc2VERFMoZi5yZXNwb25zZSwhMCk7ZS5mb3JtYXQ9YS5mb3JtYXQ7ZS5taXBtYXBzPWEubWlwbWFwcztlLmltYWdlLndpZHRoPWEud2lkdGg7ZS5pbWFnZS5oZWlnaHQ9YS5oZWlnaHQ7XG5lLmdlbmVyYXRlTWlwbWFwcz0hMTtlLm5lZWRzVXBkYXRlPSEwO2MmJmMoZSl9O2Yub25lcnJvcj1kO2Yub3BlbihcIkdFVFwiLGEsITApO2YucmVzcG9uc2VUeXBlPVwiYXJyYXlidWZmZXJcIjtmLnNlbmQobnVsbCk7cmV0dXJuIGV9LGxvYWRUZXh0dXJlQ3ViZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1bXTtlLmxvYWRDb3VudD0wO3ZhciBmPW5ldyBUSFJFRS5UZXh0dXJlO2YuaW1hZ2U9ZTt2b2lkIDAhPT1iJiYoZi5tYXBwaW5nPWIpO2YuZmxpcFk9ITE7Zm9yKHZhciBiPTAsaD1hLmxlbmd0aDtiPGg7KytiKXt2YXIgZz1uZXcgSW1hZ2U7ZVtiXT1nO2cub25sb2FkPWZ1bmN0aW9uKCl7ZS5sb2FkQ291bnQrPTE7Nj09PWUubG9hZENvdW50JiYoZi5uZWVkc1VwZGF0ZT0hMCxjJiZjKGYpKX07Zy5vbmVycm9yPWQ7Zy5jcm9zc09yaWdpbj10aGlzLmNyb3NzT3JpZ2luO2cuc3JjPWFbYl19cmV0dXJuIGZ9LGxvYWRDb21wcmVzc2VkVGV4dHVyZUN1YmU6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9XG5bXTtlLmxvYWRDb3VudD0wO3ZhciBmPW5ldyBUSFJFRS5Db21wcmVzc2VkVGV4dHVyZTtmLmltYWdlPWU7dm9pZCAwIT09YiYmKGYubWFwcGluZz1iKTtmLmZsaXBZPSExO2YuZ2VuZXJhdGVNaXBtYXBzPSExO2I9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZD1USFJFRS5JbWFnZVV0aWxzLnBhcnNlRERTKGEucmVzcG9uc2UsITApO2IuZm9ybWF0PWQuZm9ybWF0O2IubWlwbWFwcz1kLm1pcG1hcHM7Yi53aWR0aD1kLndpZHRoO2IuaGVpZ2h0PWQuaGVpZ2h0O2UubG9hZENvdW50Kz0xOzY9PT1lLmxvYWRDb3VudCYmKGYuZm9ybWF0PWQuZm9ybWF0LGYubmVlZHNVcGRhdGU9ITAsYyYmYyhmKSl9fTtpZihhIGluc3RhbmNlb2YgQXJyYXkpZm9yKHZhciBoPTAsZz1hLmxlbmd0aDtoPGc7KytoKXt2YXIgaT17fTtlW2hdPWk7dmFyIGs9bmV3IFhNTEh0dHBSZXF1ZXN0O2sub25sb2FkPWIoayxpKTtrLm9uZXJyb3I9ZDtpPWFbaF07ay5vcGVuKFwiR0VUXCIsaSwhMCk7ay5yZXNwb25zZVR5cGU9XG5cImFycmF5YnVmZmVyXCI7ay5zZW5kKG51bGwpfWVsc2Ugaz1uZXcgWE1MSHR0cFJlcXVlc3Qsay5vbmxvYWQ9ZnVuY3Rpb24oKXt2YXIgYT1USFJFRS5JbWFnZVV0aWxzLnBhcnNlRERTKGsucmVzcG9uc2UsITApO2lmKGEuaXNDdWJlbWFwKXtmb3IodmFyIGI9YS5taXBtYXBzLmxlbmd0aC9hLm1pcG1hcENvdW50LGQ9MDtkPGI7ZCsrKXtlW2RdPXttaXBtYXBzOltdfTtmb3IodmFyIGc9MDtnPGEubWlwbWFwQ291bnQ7ZysrKWVbZF0ubWlwbWFwcy5wdXNoKGEubWlwbWFwc1tkKmEubWlwbWFwQ291bnQrZ10pLGVbZF0uZm9ybWF0PWEuZm9ybWF0LGVbZF0ud2lkdGg9YS53aWR0aCxlW2RdLmhlaWdodD1hLmhlaWdodH1mLmZvcm1hdD1hLmZvcm1hdDtmLm5lZWRzVXBkYXRlPSEwO2MmJmMoZil9fSxrLm9uZXJyb3I9ZCxrLm9wZW4oXCJHRVRcIixhLCEwKSxrLnJlc3BvbnNlVHlwZT1cImFycmF5YnVmZmVyXCIsay5zZW5kKG51bGwpO3JldHVybiBmfSxsb2FkRERTVGV4dHVyZTpmdW5jdGlvbihhLFxuYixjLGQpe3ZhciBlPVtdO2UubG9hZENvdW50PTA7dmFyIGY9bmV3IFRIUkVFLkNvbXByZXNzZWRUZXh0dXJlO2YuaW1hZ2U9ZTt2b2lkIDAhPT1iJiYoZi5tYXBwaW5nPWIpO2YuZmxpcFk9ITE7Zi5nZW5lcmF0ZU1pcG1hcHM9ITE7dmFyIGg9bmV3IFhNTEh0dHBSZXF1ZXN0O2gub25sb2FkPWZ1bmN0aW9uKCl7dmFyIGE9VEhSRUUuSW1hZ2VVdGlscy5wYXJzZUREUyhoLnJlc3BvbnNlLCEwKTtpZihhLmlzQ3ViZW1hcClmb3IodmFyIGI9YS5taXBtYXBzLmxlbmd0aC9hLm1pcG1hcENvdW50LGQ9MDtkPGI7ZCsrKXtlW2RdPXttaXBtYXBzOltdfTtmb3IodmFyIG09MDttPGEubWlwbWFwQ291bnQ7bSsrKWVbZF0ubWlwbWFwcy5wdXNoKGEubWlwbWFwc1tkKmEubWlwbWFwQ291bnQrbV0pLGVbZF0uZm9ybWF0PWEuZm9ybWF0LGVbZF0ud2lkdGg9YS53aWR0aCxlW2RdLmhlaWdodD1hLmhlaWdodH1lbHNlIGYuaW1hZ2Uud2lkdGg9YS53aWR0aCxmLmltYWdlLmhlaWdodD1hLmhlaWdodCxcbmYubWlwbWFwcz1hLm1pcG1hcHM7Zi5mb3JtYXQ9YS5mb3JtYXQ7Zi5uZWVkc1VwZGF0ZT0hMDtjJiZjKGYpfTtoLm9uZXJyb3I9ZDtoLm9wZW4oXCJHRVRcIixhLCEwKTtoLnJlc3BvbnNlVHlwZT1cImFycmF5YnVmZmVyXCI7aC5zZW5kKG51bGwpO3JldHVybiBmfSxwYXJzZUREUzpmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSl7cmV0dXJuIGEuY2hhckNvZGVBdCgwKSsoYS5jaGFyQ29kZUF0KDEpPDw4KSsoYS5jaGFyQ29kZUF0KDIpPDwxNikrKGEuY2hhckNvZGVBdCgzKTw8MjQpfXZhciBkPXttaXBtYXBzOltdLHdpZHRoOjAsaGVpZ2h0OjAsZm9ybWF0Om51bGwsbWlwbWFwQ291bnQ6MX0sZT1jKFwiRFhUMVwiKSxmPWMoXCJEWFQzXCIpLGg9YyhcIkRYVDVcIiksZz1uZXcgSW50MzJBcnJheShhLDAsMzEpO2lmKDU0MjMyNzg3NiE9PWdbMF0pcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJJbWFnZVV0aWxzLnBhcnNlRERTKCk6IEludmFsaWQgbWFnaWMgbnVtYmVyIGluIEREUyBoZWFkZXJcIiksZDtpZighZ1syMF0mXG40KXJldHVybiBjb25zb2xlLmVycm9yKFwiSW1hZ2VVdGlscy5wYXJzZUREUygpOiBVbnN1cHBvcnRlZCBmb3JtYXQsIG11c3QgY29udGFpbiBhIEZvdXJDQyBjb2RlXCIpLGQ7dmFyIGk9Z1syMV0saz0hMTtzd2l0Y2goaSl7Y2FzZSBlOmU9ODtkLmZvcm1hdD1USFJFRS5SR0JfUzNUQ19EWFQxX0Zvcm1hdDticmVhaztjYXNlIGY6ZT0xNjtkLmZvcm1hdD1USFJFRS5SR0JBX1MzVENfRFhUM19Gb3JtYXQ7YnJlYWs7Y2FzZSBoOmU9MTY7ZC5mb3JtYXQ9VEhSRUUuUkdCQV9TM1RDX0RYVDVfRm9ybWF0O2JyZWFrO2RlZmF1bHQ6aWYoMzI9PWdbMjJdJiZnWzIzXSYxNjcxMTY4MCYmZ1syNF0mNjUyODAmJmdbMjVdJjI1NSYmZ1syNl0mNDI3ODE5MDA4MClrPSEwLGU9NjQsZC5mb3JtYXQ9VEhSRUUuUkdCQUZvcm1hdDtlbHNlIHJldHVybiBjb25zb2xlLmVycm9yKFwiSW1hZ2VVdGlscy5wYXJzZUREUygpOiBVbnN1cHBvcnRlZCBGb3VyQ0MgY29kZTogXCIsU3RyaW5nLmZyb21DaGFyQ29kZShpJlxuMjU1LGk+PjgmMjU1LGk+PjE2JjI1NSxpPj4yNCYyNTUpKSxkfWQubWlwbWFwQ291bnQ9MTtnWzJdJjEzMTA3MiYmITEhPT1iJiYoZC5taXBtYXBDb3VudD1NYXRoLm1heCgxLGdbN10pKTtkLmlzQ3ViZW1hcD1nWzI4XSY1MTI/ITA6ITE7ZC53aWR0aD1nWzRdO2QuaGVpZ2h0PWdbM107Zm9yKHZhciBnPWdbMV0rNCxmPWQud2lkdGgsaD1kLmhlaWdodCxpPWQuaXNDdWJlbWFwPzY6MSxtPTA7bTxpO20rKyl7Zm9yKHZhciBsPTA7bDxkLm1pcG1hcENvdW50O2wrKyl7aWYoayl7dmFyIHA7cD1mO2Zvcih2YXIgdD1oLHM9NCpwKnQscT1uZXcgVWludDhBcnJheShhLGcscykscz1uZXcgVWludDhBcnJheShzKSxuPTAsdT0wLHI9MDtyPHQ7cisrKWZvcih2YXIgdj0wO3Y8cDt2Kyspe3ZhciB6PXFbdV07dSsrO3ZhciBHPXFbdV07dSsrO3ZhciB3PXFbdV07dSsrO3ZhciB5PXFbdV07dSsrO3Nbbl09dztuKys7c1tuXT1HO24rKztzW25dPXo7bisrO3Nbbl09eTtuKyt9cD1zO3Q9cC5sZW5ndGh9ZWxzZSB0PVxuTWF0aC5tYXgoNCxmKS80Kk1hdGgubWF4KDQsaCkvNCplLHA9bmV3IFVpbnQ4QXJyYXkoYSxnLHQpO2QubWlwbWFwcy5wdXNoKHtkYXRhOnAsd2lkdGg6ZixoZWlnaHQ6aH0pO2crPXQ7Zj1NYXRoLm1heCgwLjUqZiwxKTtoPU1hdGgubWF4KDAuNSpoLDEpfWY9ZC53aWR0aDtoPWQuaGVpZ2h0fXJldHVybiBkfSxnZXROb3JtYWxNYXA6ZnVuY3Rpb24oYSxiKXt2YXIgYz1mdW5jdGlvbihhKXt2YXIgYj1NYXRoLnNxcnQoYVswXSphWzBdK2FbMV0qYVsxXSthWzJdKmFbMl0pO3JldHVyblthWzBdL2IsYVsxXS9iLGFbMl0vYl19LGI9YnwxLGQ9YS53aWR0aCxlPWEuaGVpZ2h0LGY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtmLndpZHRoPWQ7Zi5oZWlnaHQ9ZTt2YXIgaD1mLmdldENvbnRleHQoXCIyZFwiKTtoLmRyYXdJbWFnZShhLDAsMCk7Zm9yKHZhciBnPWguZ2V0SW1hZ2VEYXRhKDAsMCxkLGUpLmRhdGEsaT1oLmNyZWF0ZUltYWdlRGF0YShkLGUpLGs9aS5kYXRhLG09MDttPFxuZDttKyspZm9yKHZhciBsPTA7bDxlO2wrKyl7dmFyIHA9MD5sLTE/MDpsLTEsdD1sKzE+ZS0xP2UtMTpsKzEscz0wPm0tMT8wOm0tMSxxPW0rMT5kLTE/ZC0xOm0rMSxuPVtdLHU9WzAsMCxnWzQqKGwqZCttKV0vMjU1KmJdO24ucHVzaChbLTEsMCxnWzQqKGwqZCtzKV0vMjU1KmJdKTtuLnB1c2goWy0xLC0xLGdbNCoocCpkK3MpXS8yNTUqYl0pO24ucHVzaChbMCwtMSxnWzQqKHAqZCttKV0vMjU1KmJdKTtuLnB1c2goWzEsLTEsZ1s0KihwKmQrcSldLzI1NSpiXSk7bi5wdXNoKFsxLDAsZ1s0KihsKmQrcSldLzI1NSpiXSk7bi5wdXNoKFsxLDEsZ1s0Kih0KmQrcSldLzI1NSpiXSk7bi5wdXNoKFswLDEsZ1s0Kih0KmQrbSldLzI1NSpiXSk7bi5wdXNoKFstMSwxLGdbNCoodCpkK3MpXS8yNTUqYl0pO3A9W107cz1uLmxlbmd0aDtmb3IodD0wO3Q8czt0Kyspe3ZhciBxPW5bdF0scj1uWyh0KzEpJXNdLHE9W3FbMF0tdVswXSxxWzFdLXVbMV0scVsyXS11WzJdXSxyPVtyWzBdLXVbMF0sXG5yWzFdLXVbMV0sclsyXS11WzJdXTtwLnB1c2goYyhbcVsxXSpyWzJdLXFbMl0qclsxXSxxWzJdKnJbMF0tcVswXSpyWzJdLHFbMF0qclsxXS1xWzFdKnJbMF1dKSl9bj1bMCwwLDBdO2Zvcih0PTA7dDxwLmxlbmd0aDt0KyspblswXSs9cFt0XVswXSxuWzFdKz1wW3RdWzFdLG5bMl0rPXBbdF1bMl07blswXS89cC5sZW5ndGg7blsxXS89cC5sZW5ndGg7blsyXS89cC5sZW5ndGg7dT00KihsKmQrbSk7a1t1XT0yNTUqKChuWzBdKzEpLzIpfDA7a1t1KzFdPTI1NSooKG5bMV0rMSkvMil8MDtrW3UrMl09MjU1Km5bMl18MDtrW3UrM109MjU1fWgucHV0SW1hZ2VEYXRhKGksMCwwKTtyZXR1cm4gZn0sZ2VuZXJhdGVEYXRhVGV4dHVyZTpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPWEqYixlPW5ldyBVaW50OEFycmF5KDMqZCksZj1NYXRoLmZsb29yKDI1NSpjLnIpLGg9TWF0aC5mbG9vcigyNTUqYy5nKSxjPU1hdGguZmxvb3IoMjU1KmMuYiksZz0wO2c8ZDtnKyspZVszKmddPWYsZVszKmcrXG4xXT1oLGVbMypnKzJdPWM7YT1uZXcgVEhSRUUuRGF0YVRleHR1cmUoZSxhLGIsVEhSRUUuUkdCRm9ybWF0KTthLm5lZWRzVXBkYXRlPSEwO3JldHVybiBhfX07VEhSRUUuU2NlbmVVdGlscz17Y3JlYXRlTXVsdGlNYXRlcmlhbE9iamVjdDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1uZXcgVEhSRUUuT2JqZWN0M0QsZD0wLGU9Yi5sZW5ndGg7ZDxlO2QrKyljLmFkZChuZXcgVEhSRUUuTWVzaChhLGJbZF0pKTtyZXR1cm4gY30sZGV0YWNoOmZ1bmN0aW9uKGEsYixjKXthLmFwcGx5TWF0cml4KGIubWF0cml4V29ybGQpO2IucmVtb3ZlKGEpO2MuYWRkKGEpfSxhdHRhY2g6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPW5ldyBUSFJFRS5NYXRyaXg0O2QuZ2V0SW52ZXJzZShjLm1hdHJpeFdvcmxkKTthLmFwcGx5TWF0cml4KGQpO2IucmVtb3ZlKGEpO2MuYWRkKGEpfX07VEhSRUUuRm9udFV0aWxzPXtmYWNlczp7fSxmYWNlOlwiaGVsdmV0aWtlclwiLHdlaWdodDpcIm5vcm1hbFwiLHN0eWxlOlwibm9ybWFsXCIsc2l6ZToxNTAsZGl2aXNpb25zOjEwLGdldEZhY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mYWNlc1t0aGlzLmZhY2VdW3RoaXMud2VpZ2h0XVt0aGlzLnN0eWxlXX0sbG9hZEZhY2U6ZnVuY3Rpb24oYSl7dmFyIGI9YS5mYW1pbHlOYW1lLnRvTG93ZXJDYXNlKCk7dGhpcy5mYWNlc1tiXT10aGlzLmZhY2VzW2JdfHx7fTt0aGlzLmZhY2VzW2JdW2EuY3NzRm9udFdlaWdodF09dGhpcy5mYWNlc1tiXVthLmNzc0ZvbnRXZWlnaHRdfHx7fTt0aGlzLmZhY2VzW2JdW2EuY3NzRm9udFdlaWdodF1bYS5jc3NGb250U3R5bGVdPWE7cmV0dXJuIHRoaXMuZmFjZXNbYl1bYS5jc3NGb250V2VpZ2h0XVthLmNzc0ZvbnRTdHlsZV09YX0sZHJhd1RleHQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuZ2V0RmFjZSgpLGM9dGhpcy5zaXplL2IucmVzb2x1dGlvbixkPVxuMCxlPVN0cmluZyhhKS5zcGxpdChcIlwiKSxmPWUubGVuZ3RoLGg9W10sYT0wO2E8ZjthKyspe3ZhciBnPW5ldyBUSFJFRS5QYXRoLGc9dGhpcy5leHRyYWN0R2x5cGhQb2ludHMoZVthXSxiLGMsZCxnKSxkPWQrZy5vZmZzZXQ7aC5wdXNoKGcucGF0aCl9cmV0dXJue3BhdGhzOmgsb2Zmc2V0OmQvMn19LGV4dHJhY3RHbHlwaFBvaW50czpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPVtdLGgsZyxpLGssbSxsLHAsdCxzLHEsbix1PWIuZ2x5cGhzW2FdfHxiLmdseXBoc1tcIj9cIl07aWYodSl7aWYodS5vKXtiPXUuX2NhY2hlZE91dGxpbmV8fCh1Ll9jYWNoZWRPdXRsaW5lPXUuby5zcGxpdChcIiBcIikpO2s9Yi5sZW5ndGg7Zm9yKGE9MDthPGs7KXN3aXRjaChpPWJbYSsrXSxpKXtjYXNlIFwibVwiOmk9YlthKytdKmMrZDttPWJbYSsrXSpjO2UubW92ZVRvKGksbSk7YnJlYWs7Y2FzZSBcImxcIjppPWJbYSsrXSpjK2Q7bT1iW2ErK10qYztlLmxpbmVUbyhpLG0pO2JyZWFrO2Nhc2UgXCJxXCI6aT1iW2ErK10qXG5jK2Q7bT1iW2ErK10qYzt0PWJbYSsrXSpjK2Q7cz1iW2ErK10qYztlLnF1YWRyYXRpY0N1cnZlVG8odCxzLGksbSk7aWYoaD1mW2YubGVuZ3RoLTFdKXtsPWgueDtwPWgueTtoPTE7Zm9yKGc9dGhpcy5kaXZpc2lvbnM7aDw9ZztoKyspe3ZhciByPWgvZztUSFJFRS5TaGFwZS5VdGlscy5iMihyLGwsdCxpKTtUSFJFRS5TaGFwZS5VdGlscy5iMihyLHAscyxtKX19YnJlYWs7Y2FzZSBcImJcIjppZihpPWJbYSsrXSpjK2QsbT1iW2ErK10qYyx0PWJbYSsrXSpjK2Qscz1iW2ErK10qLWMscT1iW2ErK10qYytkLG49YlthKytdKi1jLGUuYmV6aWVyQ3VydmVUbyhpLG0sdCxzLHEsbiksaD1mW2YubGVuZ3RoLTFdKXtsPWgueDtwPWgueTtoPTE7Zm9yKGc9dGhpcy5kaXZpc2lvbnM7aDw9ZztoKyspcj1oL2csVEhSRUUuU2hhcGUuVXRpbHMuYjMocixsLHQscSxpKSxUSFJFRS5TaGFwZS5VdGlscy5iMyhyLHAscyxuLG0pfX19cmV0dXJue29mZnNldDp1LmhhKmMscGF0aDplfX19fTtcblRIUkVFLkZvbnRVdGlscy5nZW5lcmF0ZVNoYXBlcz1mdW5jdGlvbihhLGIpe3ZhciBiPWJ8fHt9LGM9dm9pZCAwIT09Yi5jdXJ2ZVNlZ21lbnRzP2IuY3VydmVTZWdtZW50czo0LGQ9dm9pZCAwIT09Yi5mb250P2IuZm9udDpcImhlbHZldGlrZXJcIixlPXZvaWQgMCE9PWIud2VpZ2h0P2Iud2VpZ2h0Olwibm9ybWFsXCIsZj12b2lkIDAhPT1iLnN0eWxlP2Iuc3R5bGU6XCJub3JtYWxcIjtUSFJFRS5Gb250VXRpbHMuc2l6ZT12b2lkIDAhPT1iLnNpemU/Yi5zaXplOjEwMDtUSFJFRS5Gb250VXRpbHMuZGl2aXNpb25zPWM7VEhSRUUuRm9udFV0aWxzLmZhY2U9ZDtUSFJFRS5Gb250VXRpbHMud2VpZ2h0PWU7VEhSRUUuRm9udFV0aWxzLnN0eWxlPWY7Yz1USFJFRS5Gb250VXRpbHMuZHJhd1RleHQoYSkucGF0aHM7ZD1bXTtlPTA7Zm9yKGY9Yy5sZW5ndGg7ZTxmO2UrKylBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShkLGNbZV0udG9TaGFwZXMoKSk7cmV0dXJuIGR9O1xuKGZ1bmN0aW9uKGEpe3ZhciBiPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLmxlbmd0aCxlPTAsZj1iLTEsaD0wO2g8YjtmPWgrKyllKz1hW2ZdLngqYVtoXS55LWFbaF0ueCphW2ZdLnk7cmV0dXJuIDAuNSplfTthLlRyaWFuZ3VsYXRlPWZ1bmN0aW9uKGEsZCl7dmFyIGU9YS5sZW5ndGg7aWYoMz5lKXJldHVybiBudWxsO3ZhciBmPVtdLGg9W10sZz1bXSxpLGssbTtpZigwPGIoYSkpZm9yKGs9MDtrPGU7aysrKWhba109aztlbHNlIGZvcihrPTA7azxlO2srKyloW2tdPWUtMS1rO3ZhciBsPTIqZTtmb3Ioaz1lLTE7MjxlOyl7aWYoMD49bC0tKXtjb25zb2xlLmxvZyhcIldhcm5pbmcsIHVuYWJsZSB0byB0cmlhbmd1bGF0ZSBwb2x5Z29uIVwiKTticmVha31pPWs7ZTw9aSYmKGk9MCk7az1pKzE7ZTw9ayYmKGs9MCk7bT1rKzE7ZTw9bSYmKG09MCk7dmFyIHA7YTp7dmFyIHQ9cD12b2lkIDAscz12b2lkIDAscT12b2lkIDAsbj12b2lkIDAsdT12b2lkIDAscj12b2lkIDAsdj12b2lkIDAsej1cbnZvaWQgMCx0PWFbaFtpXV0ueCxzPWFbaFtpXV0ueSxxPWFbaFtrXV0ueCxuPWFbaFtrXV0ueSx1PWFbaFttXV0ueCxyPWFbaFttXV0ueTtpZigxRS0xMD4ocS10KSooci1zKS0obi1zKSoodS10KSlwPSExO2Vsc2V7dmFyIEc9dm9pZCAwLHc9dm9pZCAwLHk9dm9pZCAwLEU9dm9pZCAwLEE9dm9pZCAwLEs9dm9pZCAwLEQ9dm9pZCAwLEY9dm9pZCAwLE89dm9pZCAwLHg9dm9pZCAwLE89Rj1EPXo9dj12b2lkIDAsRz11LXEsdz1yLW4seT10LXUsRT1zLXIsQT1xLXQsSz1uLXM7Zm9yKHA9MDtwPGU7cCsrKWlmKCEocD09PWl8fHA9PT1rfHxwPT09bSkpaWYodj1hW2hbcF1dLngsej1hW2hbcF1dLnksRD12LXQsRj16LXMsTz12LXEseD16LW4sdi09dSx6LT1yLE89Ryp4LXcqTyxEPUEqRi1LKkQsRj15KnotRSp2LC0xRS0xMDw9TyYmLTFFLTEwPD1GJiYtMUUtMTA8PUQpe3A9ITE7YnJlYWsgYX1wPSEwfX1pZihwKXtmLnB1c2goW2FbaFtpXV0sYVtoW2tdXSxhW2hbbV1dXSk7Zy5wdXNoKFtoW2ldLFxuaFtrXSxoW21dXSk7aT1rO2ZvcihtPWsrMTttPGU7aSsrLG0rKyloW2ldPWhbbV07ZS0tO2w9MiplfX1yZXR1cm4gZD9nOmZ9O2EuVHJpYW5ndWxhdGUuYXJlYT1iO3JldHVybiBhfSkoVEhSRUUuRm9udFV0aWxzKTtzZWxmLl90eXBlZmFjZV9qcz17ZmFjZXM6VEhSRUUuRm9udFV0aWxzLmZhY2VzLGxvYWRGYWNlOlRIUkVFLkZvbnRVdGlscy5sb2FkRmFjZX07VEhSRUUudHlwZWZhY2VfanM9c2VsZi5fdHlwZWZhY2VfanM7VEhSRUUuQ3VydmU9ZnVuY3Rpb24oKXt9O1RIUkVFLkN1cnZlLnByb3RvdHlwZS5nZXRQb2ludD1mdW5jdGlvbigpe2NvbnNvbGUubG9nKFwiV2FybmluZywgZ2V0UG9pbnQoKSBub3QgaW1wbGVtZW50ZWQhXCIpO3JldHVybiBudWxsfTtUSFJFRS5DdXJ2ZS5wcm90b3R5cGUuZ2V0UG9pbnRBdD1mdW5jdGlvbihhKXthPXRoaXMuZ2V0VXRvVG1hcHBpbmcoYSk7cmV0dXJuIHRoaXMuZ2V0UG9pbnQoYSl9O1RIUkVFLkN1cnZlLnByb3RvdHlwZS5nZXRQb2ludHM9ZnVuY3Rpb24oYSl7YXx8KGE9NSk7dmFyIGIsYz1bXTtmb3IoYj0wO2I8PWE7YisrKWMucHVzaCh0aGlzLmdldFBvaW50KGIvYSkpO3JldHVybiBjfTtUSFJFRS5DdXJ2ZS5wcm90b3R5cGUuZ2V0U3BhY2VkUG9pbnRzPWZ1bmN0aW9uKGEpe2F8fChhPTUpO3ZhciBiLGM9W107Zm9yKGI9MDtiPD1hO2IrKyljLnB1c2godGhpcy5nZXRQb2ludEF0KGIvYSkpO3JldHVybiBjfTtcblRIUkVFLkN1cnZlLnByb3RvdHlwZS5nZXRMZW5ndGg9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldExlbmd0aHMoKTtyZXR1cm4gYVthLmxlbmd0aC0xXX07VEhSRUUuQ3VydmUucHJvdG90eXBlLmdldExlbmd0aHM9ZnVuY3Rpb24oYSl7YXx8KGE9dGhpcy5fX2FyY0xlbmd0aERpdmlzaW9ucz90aGlzLl9fYXJjTGVuZ3RoRGl2aXNpb25zOjIwMCk7aWYodGhpcy5jYWNoZUFyY0xlbmd0aHMmJnRoaXMuY2FjaGVBcmNMZW5ndGhzLmxlbmd0aD09YSsxJiYhdGhpcy5uZWVkc1VwZGF0ZSlyZXR1cm4gdGhpcy5jYWNoZUFyY0xlbmd0aHM7dGhpcy5uZWVkc1VwZGF0ZT0hMTt2YXIgYj1bXSxjLGQ9dGhpcy5nZXRQb2ludCgwKSxlLGY9MDtiLnB1c2goMCk7Zm9yKGU9MTtlPD1hO2UrKyljPXRoaXMuZ2V0UG9pbnQoZS9hKSxmKz1jLmRpc3RhbmNlVG8oZCksYi5wdXNoKGYpLGQ9YztyZXR1cm4gdGhpcy5jYWNoZUFyY0xlbmd0aHM9Yn07XG5USFJFRS5DdXJ2ZS5wcm90b3R5cGUudXBkYXRlQXJjTGVuZ3Rocz1mdW5jdGlvbigpe3RoaXMubmVlZHNVcGRhdGU9ITA7dGhpcy5nZXRMZW5ndGhzKCl9O1RIUkVFLkN1cnZlLnByb3RvdHlwZS5nZXRVdG9UbWFwcGluZz1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0TGVuZ3RocygpLGQ9MCxlPWMubGVuZ3RoLGY7Zj1iP2I6YSpjW2UtMV07Zm9yKHZhciBoPTAsZz1lLTEsaTtoPD1nOylpZihkPU1hdGguZmxvb3IoaCsoZy1oKS8yKSxpPWNbZF0tZiwwPmkpaD1kKzE7ZWxzZSBpZigwPGkpZz1kLTE7ZWxzZXtnPWQ7YnJlYWt9ZD1nO2lmKGNbZF09PWYpcmV0dXJuIGQvKGUtMSk7aD1jW2RdO3JldHVybiBjPShkKyhmLWgpLyhjW2QrMV0taCkpLyhlLTEpfTtUSFJFRS5DdXJ2ZS5wcm90b3R5cGUuZ2V0VGFuZ2VudD1mdW5jdGlvbihhKXt2YXIgYj1hLTFFLTQsYT1hKzFFLTQ7MD5iJiYoYj0wKTsxPGEmJihhPTEpO2I9dGhpcy5nZXRQb2ludChiKTtyZXR1cm4gdGhpcy5nZXRQb2ludChhKS5jbG9uZSgpLnN1YihiKS5ub3JtYWxpemUoKX07XG5USFJFRS5DdXJ2ZS5wcm90b3R5cGUuZ2V0VGFuZ2VudEF0PWZ1bmN0aW9uKGEpe2E9dGhpcy5nZXRVdG9UbWFwcGluZyhhKTtyZXR1cm4gdGhpcy5nZXRUYW5nZW50KGEpfTtcblRIUkVFLkN1cnZlLlV0aWxzPXt0YW5nZW50UXVhZHJhdGljQmV6aWVyOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiAyKigxLWEpKihjLWIpKzIqYSooZC1jKX0sdGFuZ2VudEN1YmljQmV6aWVyOmZ1bmN0aW9uKGEsYixjLGQsZSl7cmV0dXJuLTMqYiooMS1hKSooMS1hKSszKmMqKDEtYSkqKDEtYSktNiphKmMqKDEtYSkrNiphKmQqKDEtYSktMyphKmEqZCszKmEqYSplfSx0YW5nZW50U3BsaW5lOmZ1bmN0aW9uKGEpe3JldHVybiA2KmEqYS02KmErKDMqYSphLTQqYSsxKSsoLTYqYSphKzYqYSkrKDMqYSphLTIqYSl9LGludGVycG9sYXRlOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGE9MC41KihjLWEpLGQ9MC41KihkLWIpLGY9ZSplO3JldHVybigyKmItMipjK2ErZCkqZSpmKygtMypiKzMqYy0yKmEtZCkqZithKmUrYn19O1xuVEhSRUUuQ3VydmUuY3JlYXRlPWZ1bmN0aW9uKGEsYil7YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5DdXJ2ZS5wcm90b3R5cGUpO2EucHJvdG90eXBlLmdldFBvaW50PWI7cmV0dXJuIGF9O1RIUkVFLkN1cnZlUGF0aD1mdW5jdGlvbigpe3RoaXMuY3VydmVzPVtdO3RoaXMuYmVuZHM9W107dGhpcy5hdXRvQ2xvc2U9ITF9O1RIUkVFLkN1cnZlUGF0aC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5DdXJ2ZS5wcm90b3R5cGUpO1RIUkVFLkN1cnZlUGF0aC5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGEpe3RoaXMuY3VydmVzLnB1c2goYSl9O1RIUkVFLkN1cnZlUGF0aC5wcm90b3R5cGUuY2hlY2tDb25uZWN0aW9uPWZ1bmN0aW9uKCl7fTtUSFJFRS5DdXJ2ZVBhdGgucHJvdG90eXBlLmNsb3NlUGF0aD1mdW5jdGlvbigpe3ZhciBhPXRoaXMuY3VydmVzWzBdLmdldFBvaW50KDApLGI9dGhpcy5jdXJ2ZXNbdGhpcy5jdXJ2ZXMubGVuZ3RoLTFdLmdldFBvaW50KDEpO2EuZXF1YWxzKGIpfHx0aGlzLmN1cnZlcy5wdXNoKG5ldyBUSFJFRS5MaW5lQ3VydmUoYixhKSl9O1xuVEhSRUUuQ3VydmVQYXRoLnByb3RvdHlwZS5nZXRQb2ludD1mdW5jdGlvbihhKXtmb3IodmFyIGI9YSp0aGlzLmdldExlbmd0aCgpLGM9dGhpcy5nZXRDdXJ2ZUxlbmd0aHMoKSxhPTA7YTxjLmxlbmd0aDspe2lmKGNbYV0+PWIpcmV0dXJuIGI9Y1thXS1iLGE9dGhpcy5jdXJ2ZXNbYV0sYj0xLWIvYS5nZXRMZW5ndGgoKSxhLmdldFBvaW50QXQoYik7YSsrfXJldHVybiBudWxsfTtUSFJFRS5DdXJ2ZVBhdGgucHJvdG90eXBlLmdldExlbmd0aD1mdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0Q3VydmVMZW5ndGhzKCk7cmV0dXJuIGFbYS5sZW5ndGgtMV19O1xuVEhSRUUuQ3VydmVQYXRoLnByb3RvdHlwZS5nZXRDdXJ2ZUxlbmd0aHM9ZnVuY3Rpb24oKXtpZih0aGlzLmNhY2hlTGVuZ3RocyYmdGhpcy5jYWNoZUxlbmd0aHMubGVuZ3RoPT10aGlzLmN1cnZlcy5sZW5ndGgpcmV0dXJuIHRoaXMuY2FjaGVMZW5ndGhzO3ZhciBhPVtdLGI9MCxjLGQ9dGhpcy5jdXJ2ZXMubGVuZ3RoO2ZvcihjPTA7YzxkO2MrKyliKz10aGlzLmN1cnZlc1tjXS5nZXRMZW5ndGgoKSxhLnB1c2goYik7cmV0dXJuIHRoaXMuY2FjaGVMZW5ndGhzPWF9O1xuVEhSRUUuQ3VydmVQYXRoLnByb3RvdHlwZS5nZXRCb3VuZGluZ0JveD1mdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0UG9pbnRzKCksYixjLGQsZSxmLGg7Yj1jPU51bWJlci5ORUdBVElWRV9JTkZJTklUWTtlPWY9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO3ZhciBnLGksayxtLGw9YVswXWluc3RhbmNlb2YgVEhSRUUuVmVjdG9yMzttPWw/bmV3IFRIUkVFLlZlY3RvcjM6bmV3IFRIUkVFLlZlY3RvcjI7aT0wO2ZvcihrPWEubGVuZ3RoO2k8aztpKyspZz1hW2ldLGcueD5iP2I9Zy54OmcueDxlJiYoZT1nLngpLGcueT5jP2M9Zy55OmcueTxmJiYoZj1nLnkpLGwmJihnLno+ZD9kPWcuejpnLno8aCYmKGg9Zy56KSksbS5hZGQoZyk7YT17bWluWDplLG1pblk6ZixtYXhYOmIsbWF4WTpjLGNlbnRyb2lkOm0uZGl2aWRlU2NhbGFyKGspfTtsJiYoYS5tYXhaPWQsYS5taW5aPWgpO3JldHVybiBhfTtcblRIUkVFLkN1cnZlUGF0aC5wcm90b3R5cGUuY3JlYXRlUG9pbnRzR2VvbWV0cnk9ZnVuY3Rpb24oYSl7YT10aGlzLmdldFBvaW50cyhhLCEwKTtyZXR1cm4gdGhpcy5jcmVhdGVHZW9tZXRyeShhKX07VEhSRUUuQ3VydmVQYXRoLnByb3RvdHlwZS5jcmVhdGVTcGFjZWRQb2ludHNHZW9tZXRyeT1mdW5jdGlvbihhKXthPXRoaXMuZ2V0U3BhY2VkUG9pbnRzKGEsITApO3JldHVybiB0aGlzLmNyZWF0ZUdlb21ldHJ5KGEpfTtUSFJFRS5DdXJ2ZVBhdGgucHJvdG90eXBlLmNyZWF0ZUdlb21ldHJ5PWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1uZXcgVEhSRUUuR2VvbWV0cnksYz0wO2M8YS5sZW5ndGg7YysrKWIudmVydGljZXMucHVzaChuZXcgVEhSRUUuVmVjdG9yMyhhW2NdLngsYVtjXS55LGFbY10uenx8MCkpO3JldHVybiBifTtUSFJFRS5DdXJ2ZVBhdGgucHJvdG90eXBlLmFkZFdyYXBQYXRoPWZ1bmN0aW9uKGEpe3RoaXMuYmVuZHMucHVzaChhKX07XG5USFJFRS5DdXJ2ZVBhdGgucHJvdG90eXBlLmdldFRyYW5zZm9ybWVkUG9pbnRzPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRQb2ludHMoYSksZCxlO2J8fChiPXRoaXMuYmVuZHMpO2Q9MDtmb3IoZT1iLmxlbmd0aDtkPGU7ZCsrKWM9dGhpcy5nZXRXcmFwUG9pbnRzKGMsYltkXSk7cmV0dXJuIGN9O1RIUkVFLkN1cnZlUGF0aC5wcm90b3R5cGUuZ2V0VHJhbnNmb3JtZWRTcGFjZWRQb2ludHM9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldFNwYWNlZFBvaW50cyhhKSxkLGU7Ynx8KGI9dGhpcy5iZW5kcyk7ZD0wO2ZvcihlPWIubGVuZ3RoO2Q8ZTtkKyspYz10aGlzLmdldFdyYXBQb2ludHMoYyxiW2RdKTtyZXR1cm4gY307XG5USFJFRS5DdXJ2ZVBhdGgucHJvdG90eXBlLmdldFdyYXBQb2ludHM9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldEJvdW5kaW5nQm94KCksZCxlLGYsaCxnLGk7ZD0wO2ZvcihlPWEubGVuZ3RoO2Q8ZTtkKyspZj1hW2RdLGg9Zi54LGc9Zi55LGk9aC9jLm1heFgsaT1iLmdldFV0b1RtYXBwaW5nKGksaCksaD1iLmdldFBvaW50KGkpLGk9Yi5nZXRUYW5nZW50KGkpLGkuc2V0KC1pLnksaS54KS5tdWx0aXBseVNjYWxhcihnKSxmLng9aC54K2kueCxmLnk9aC55K2kueTtyZXR1cm4gYX07VEhSRUUuR3lyb3Njb3BlPWZ1bmN0aW9uKCl7VEhSRUUuT2JqZWN0M0QuY2FsbCh0aGlzKX07VEhSRUUuR3lyb3Njb3BlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSk7XG5USFJFRS5HeXJvc2NvcGUucHJvdG90eXBlLnVwZGF0ZU1hdHJpeFdvcmxkPWZ1bmN0aW9uKGEpe3RoaXMubWF0cml4QXV0b1VwZGF0ZSYmdGhpcy51cGRhdGVNYXRyaXgoKTtpZih0aGlzLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGV8fGEpdGhpcy5wYXJlbnQ/KHRoaXMubWF0cml4V29ybGQubXVsdGlwbHlNYXRyaWNlcyh0aGlzLnBhcmVudC5tYXRyaXhXb3JsZCx0aGlzLm1hdHJpeCksdGhpcy5tYXRyaXhXb3JsZC5kZWNvbXBvc2UodGhpcy50cmFuc2xhdGlvbldvcmxkLHRoaXMucXVhdGVybmlvbldvcmxkLHRoaXMuc2NhbGVXb3JsZCksdGhpcy5tYXRyaXguZGVjb21wb3NlKHRoaXMudHJhbnNsYXRpb25PYmplY3QsdGhpcy5xdWF0ZXJuaW9uT2JqZWN0LHRoaXMuc2NhbGVPYmplY3QpLHRoaXMubWF0cml4V29ybGQuY29tcG9zZSh0aGlzLnRyYW5zbGF0aW9uV29ybGQsdGhpcy5xdWF0ZXJuaW9uT2JqZWN0LHRoaXMuc2NhbGVXb3JsZCkpOnRoaXMubWF0cml4V29ybGQuY29weSh0aGlzLm1hdHJpeCksXG50aGlzLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9ITEsYT0hMDtmb3IodmFyIGI9MCxjPXRoaXMuY2hpbGRyZW4ubGVuZ3RoO2I8YztiKyspdGhpcy5jaGlsZHJlbltiXS51cGRhdGVNYXRyaXhXb3JsZChhKX07VEhSRUUuR3lyb3Njb3BlLnByb3RvdHlwZS50cmFuc2xhdGlvbldvcmxkPW5ldyBUSFJFRS5WZWN0b3IzO1RIUkVFLkd5cm9zY29wZS5wcm90b3R5cGUudHJhbnNsYXRpb25PYmplY3Q9bmV3IFRIUkVFLlZlY3RvcjM7VEhSRUUuR3lyb3Njb3BlLnByb3RvdHlwZS5xdWF0ZXJuaW9uV29ybGQ9bmV3IFRIUkVFLlF1YXRlcm5pb247VEhSRUUuR3lyb3Njb3BlLnByb3RvdHlwZS5xdWF0ZXJuaW9uT2JqZWN0PW5ldyBUSFJFRS5RdWF0ZXJuaW9uO1RIUkVFLkd5cm9zY29wZS5wcm90b3R5cGUuc2NhbGVXb3JsZD1uZXcgVEhSRUUuVmVjdG9yMztUSFJFRS5HeXJvc2NvcGUucHJvdG90eXBlLnNjYWxlT2JqZWN0PW5ldyBUSFJFRS5WZWN0b3IzO1RIUkVFLlBhdGg9ZnVuY3Rpb24oYSl7VEhSRUUuQ3VydmVQYXRoLmNhbGwodGhpcyk7dGhpcy5hY3Rpb25zPVtdO2EmJnRoaXMuZnJvbVBvaW50cyhhKX07VEhSRUUuUGF0aC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5DdXJ2ZVBhdGgucHJvdG90eXBlKTtUSFJFRS5QYXRoQWN0aW9ucz17TU9WRV9UTzpcIm1vdmVUb1wiLExJTkVfVE86XCJsaW5lVG9cIixRVUFEUkFUSUNfQ1VSVkVfVE86XCJxdWFkcmF0aWNDdXJ2ZVRvXCIsQkVaSUVSX0NVUlZFX1RPOlwiYmV6aWVyQ3VydmVUb1wiLENTUExJTkVfVEhSVTpcInNwbGluZVRocnVcIixBUkM6XCJhcmNcIixFTExJUFNFOlwiZWxsaXBzZVwifTtUSFJFRS5QYXRoLnByb3RvdHlwZS5mcm9tUG9pbnRzPWZ1bmN0aW9uKGEpe3RoaXMubW92ZVRvKGFbMF0ueCxhWzBdLnkpO2Zvcih2YXIgYj0xLGM9YS5sZW5ndGg7YjxjO2IrKyl0aGlzLmxpbmVUbyhhW2JdLngsYVtiXS55KX07XG5USFJFRS5QYXRoLnByb3RvdHlwZS5tb3ZlVG89ZnVuY3Rpb24oYSxiKXt2YXIgYz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO3RoaXMuYWN0aW9ucy5wdXNoKHthY3Rpb246VEhSRUUuUGF0aEFjdGlvbnMuTU9WRV9UTyxhcmdzOmN9KX07VEhSRUUuUGF0aC5wcm90b3R5cGUubGluZVRvPWZ1bmN0aW9uKGEsYil7dmFyIGM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSxkPXRoaXMuYWN0aW9uc1t0aGlzLmFjdGlvbnMubGVuZ3RoLTFdLmFyZ3MsZD1uZXcgVEhSRUUuTGluZUN1cnZlKG5ldyBUSFJFRS5WZWN0b3IyKGRbZC5sZW5ndGgtMl0sZFtkLmxlbmd0aC0xXSksbmV3IFRIUkVFLlZlY3RvcjIoYSxiKSk7dGhpcy5jdXJ2ZXMucHVzaChkKTt0aGlzLmFjdGlvbnMucHVzaCh7YWN0aW9uOlRIUkVFLlBhdGhBY3Rpb25zLkxJTkVfVE8sYXJnczpjfSl9O1xuVEhSRUUuUGF0aC5wcm90b3R5cGUucXVhZHJhdGljQ3VydmVUbz1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpLGY9dGhpcy5hY3Rpb25zW3RoaXMuYWN0aW9ucy5sZW5ndGgtMV0uYXJncyxmPW5ldyBUSFJFRS5RdWFkcmF0aWNCZXppZXJDdXJ2ZShuZXcgVEhSRUUuVmVjdG9yMihmW2YubGVuZ3RoLTJdLGZbZi5sZW5ndGgtMV0pLG5ldyBUSFJFRS5WZWN0b3IyKGEsYiksbmV3IFRIUkVFLlZlY3RvcjIoYyxkKSk7dGhpcy5jdXJ2ZXMucHVzaChmKTt0aGlzLmFjdGlvbnMucHVzaCh7YWN0aW9uOlRIUkVFLlBhdGhBY3Rpb25zLlFVQURSQVRJQ19DVVJWRV9UTyxhcmdzOmV9KX07XG5USFJFRS5QYXRoLnByb3RvdHlwZS5iZXppZXJDdXJ2ZVRvPWZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2YXIgaD1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpLGc9dGhpcy5hY3Rpb25zW3RoaXMuYWN0aW9ucy5sZW5ndGgtMV0uYXJncyxnPW5ldyBUSFJFRS5DdWJpY0JlemllckN1cnZlKG5ldyBUSFJFRS5WZWN0b3IyKGdbZy5sZW5ndGgtMl0sZ1tnLmxlbmd0aC0xXSksbmV3IFRIUkVFLlZlY3RvcjIoYSxiKSxuZXcgVEhSRUUuVmVjdG9yMihjLGQpLG5ldyBUSFJFRS5WZWN0b3IyKGUsZikpO3RoaXMuY3VydmVzLnB1c2goZyk7dGhpcy5hY3Rpb25zLnB1c2goe2FjdGlvbjpUSFJFRS5QYXRoQWN0aW9ucy5CRVpJRVJfQ1VSVkVfVE8sYXJnczpofSl9O1xuVEhSRUUuUGF0aC5wcm90b3R5cGUuc3BsaW5lVGhydT1mdW5jdGlvbihhKXt2YXIgYj1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpLGM9dGhpcy5hY3Rpb25zW3RoaXMuYWN0aW9ucy5sZW5ndGgtMV0uYXJncyxjPVtuZXcgVEhSRUUuVmVjdG9yMihjW2MubGVuZ3RoLTJdLGNbYy5sZW5ndGgtMV0pXTtBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShjLGEpO2M9bmV3IFRIUkVFLlNwbGluZUN1cnZlKGMpO3RoaXMuY3VydmVzLnB1c2goYyk7dGhpcy5hY3Rpb25zLnB1c2goe2FjdGlvbjpUSFJFRS5QYXRoQWN0aW9ucy5DU1BMSU5FX1RIUlUsYXJnczpifSl9O1RIUkVFLlBhdGgucHJvdG90eXBlLmFyYz1mdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGg9dGhpcy5hY3Rpb25zW3RoaXMuYWN0aW9ucy5sZW5ndGgtMV0uYXJnczt0aGlzLmFic2FyYyhhK2hbaC5sZW5ndGgtMl0sYitoW2gubGVuZ3RoLTFdLGMsZCxlLGYpfTtcblRIUkVFLlBhdGgucHJvdG90eXBlLmFic2FyYz1mdW5jdGlvbihhLGIsYyxkLGUsZil7dGhpcy5hYnNlbGxpcHNlKGEsYixjLGMsZCxlLGYpfTtUSFJFRS5QYXRoLnByb3RvdHlwZS5lbGxpcHNlPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGgpe3ZhciBnPXRoaXMuYWN0aW9uc1t0aGlzLmFjdGlvbnMubGVuZ3RoLTFdLmFyZ3M7dGhpcy5hYnNlbGxpcHNlKGErZ1tnLmxlbmd0aC0yXSxiK2dbZy5sZW5ndGgtMV0sYyxkLGUsZixoKX07VEhSRUUuUGF0aC5wcm90b3R5cGUuYWJzZWxsaXBzZT1mdW5jdGlvbihhLGIsYyxkLGUsZixoKXt2YXIgZz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpLGk9bmV3IFRIUkVFLkVsbGlwc2VDdXJ2ZShhLGIsYyxkLGUsZixoKTt0aGlzLmN1cnZlcy5wdXNoKGkpO2k9aS5nZXRQb2ludCgxKTtnLnB1c2goaS54KTtnLnB1c2goaS55KTt0aGlzLmFjdGlvbnMucHVzaCh7YWN0aW9uOlRIUkVFLlBhdGhBY3Rpb25zLkVMTElQU0UsYXJnczpnfSl9O1xuVEhSRUUuUGF0aC5wcm90b3R5cGUuZ2V0U3BhY2VkUG9pbnRzPWZ1bmN0aW9uKGEpe2F8fChhPTQwKTtmb3IodmFyIGI9W10sYz0wO2M8YTtjKyspYi5wdXNoKHRoaXMuZ2V0UG9pbnQoYy9hKSk7cmV0dXJuIGJ9O1xuVEhSRUUuUGF0aC5wcm90b3R5cGUuZ2V0UG9pbnRzPWZ1bmN0aW9uKGEsYil7aWYodGhpcy51c2VTcGFjZWRQb2ludHMpcmV0dXJuIGNvbnNvbGUubG9nKFwidGF0YVwiKSx0aGlzLmdldFNwYWNlZFBvaW50cyhhLGIpO3ZhciBhPWF8fDEyLGM9W10sZCxlLGYsaCxnLGksayxtLGwscCx0LHMscTtkPTA7Zm9yKGU9dGhpcy5hY3Rpb25zLmxlbmd0aDtkPGU7ZCsrKXN3aXRjaChmPXRoaXMuYWN0aW9uc1tkXSxoPWYuYWN0aW9uLGY9Zi5hcmdzLGgpe2Nhc2UgVEhSRUUuUGF0aEFjdGlvbnMuTU9WRV9UTzpjLnB1c2gobmV3IFRIUkVFLlZlY3RvcjIoZlswXSxmWzFdKSk7YnJlYWs7Y2FzZSBUSFJFRS5QYXRoQWN0aW9ucy5MSU5FX1RPOmMucHVzaChuZXcgVEhSRUUuVmVjdG9yMihmWzBdLGZbMV0pKTticmVhaztjYXNlIFRIUkVFLlBhdGhBY3Rpb25zLlFVQURSQVRJQ19DVVJWRV9UTzpnPWZbMl07aT1mWzNdO2w9ZlswXTtwPWZbMV07MDxjLmxlbmd0aD8oaD1jW2MubGVuZ3RoLTFdLHQ9aC54LFxucz1oLnkpOihoPXRoaXMuYWN0aW9uc1tkLTFdLmFyZ3MsdD1oW2gubGVuZ3RoLTJdLHM9aFtoLmxlbmd0aC0xXSk7Zm9yKGY9MTtmPD1hO2YrKylxPWYvYSxoPVRIUkVFLlNoYXBlLlV0aWxzLmIyKHEsdCxsLGcpLHE9VEhSRUUuU2hhcGUuVXRpbHMuYjIocSxzLHAsaSksYy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IyKGgscSkpO2JyZWFrO2Nhc2UgVEhSRUUuUGF0aEFjdGlvbnMuQkVaSUVSX0NVUlZFX1RPOmc9Zls0XTtpPWZbNV07bD1mWzBdO3A9ZlsxXTtrPWZbMl07bT1mWzNdOzA8Yy5sZW5ndGg/KGg9Y1tjLmxlbmd0aC0xXSx0PWgueCxzPWgueSk6KGg9dGhpcy5hY3Rpb25zW2QtMV0uYXJncyx0PWhbaC5sZW5ndGgtMl0scz1oW2gubGVuZ3RoLTFdKTtmb3IoZj0xO2Y8PWE7ZisrKXE9Zi9hLGg9VEhSRUUuU2hhcGUuVXRpbHMuYjMocSx0LGwsayxnKSxxPVRIUkVFLlNoYXBlLlV0aWxzLmIzKHEscyxwLG0saSksYy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IyKGgscSkpO2JyZWFrO2Nhc2UgVEhSRUUuUGF0aEFjdGlvbnMuQ1NQTElORV9USFJVOmg9XG50aGlzLmFjdGlvbnNbZC0xXS5hcmdzO3E9W25ldyBUSFJFRS5WZWN0b3IyKGhbaC5sZW5ndGgtMl0saFtoLmxlbmd0aC0xXSldO2g9YSpmWzBdLmxlbmd0aDtxPXEuY29uY2F0KGZbMF0pO3E9bmV3IFRIUkVFLlNwbGluZUN1cnZlKHEpO2ZvcihmPTE7Zjw9aDtmKyspYy5wdXNoKHEuZ2V0UG9pbnRBdChmL2gpKTticmVhaztjYXNlIFRIUkVFLlBhdGhBY3Rpb25zLkFSQzpnPWZbMF07aT1mWzFdO3A9ZlsyXTtrPWZbM107aD1mWzRdO2w9ISFmWzVdO3Q9aC1rO3M9MiphO2ZvcihmPTE7Zjw9cztmKyspcT1mL3MsbHx8KHE9MS1xKSxxPWsrcSp0LGg9ZytwKk1hdGguY29zKHEpLHE9aStwKk1hdGguc2luKHEpLGMucHVzaChuZXcgVEhSRUUuVmVjdG9yMihoLHEpKTticmVhaztjYXNlIFRIUkVFLlBhdGhBY3Rpb25zLkVMTElQU0U6Zz1mWzBdO2k9ZlsxXTtwPWZbMl07bT1mWzNdO2s9Zls0XTtoPWZbNV07bD0hIWZbNl07dD1oLWs7cz0yKmE7Zm9yKGY9MTtmPD1zO2YrKylxPWYvcyxsfHxcbihxPTEtcSkscT1rK3EqdCxoPWcrcCpNYXRoLmNvcyhxKSxxPWkrbSpNYXRoLnNpbihxKSxjLnB1c2gobmV3IFRIUkVFLlZlY3RvcjIoaCxxKSl9ZD1jW2MubGVuZ3RoLTFdOzFFLTEwPk1hdGguYWJzKGQueC1jWzBdLngpJiYxRS0xMD5NYXRoLmFicyhkLnktY1swXS55KSYmYy5zcGxpY2UoYy5sZW5ndGgtMSwxKTtiJiZjLnB1c2goY1swXSk7cmV0dXJuIGN9O1xuVEhSRUUuUGF0aC5wcm90b3R5cGUudG9TaGFwZXM9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZj1bXSxoPW5ldyBUSFJFRS5QYXRoO2I9MDtmb3IoYz10aGlzLmFjdGlvbnMubGVuZ3RoO2I8YztiKyspZD10aGlzLmFjdGlvbnNbYl0sZT1kLmFyZ3MsZD1kLmFjdGlvbixkPT1USFJFRS5QYXRoQWN0aW9ucy5NT1ZFX1RPJiYwIT1oLmFjdGlvbnMubGVuZ3RoJiYoZi5wdXNoKGgpLGg9bmV3IFRIUkVFLlBhdGgpLGhbZF0uYXBwbHkoaCxlKTswIT1oLmFjdGlvbnMubGVuZ3RoJiZmLnB1c2goaCk7aWYoMD09Zi5sZW5ndGgpcmV0dXJuW107dmFyIGc7ZT1bXTtpZigxPT1mLmxlbmd0aClyZXR1cm4gZD1mWzBdLGc9bmV3IFRIUkVFLlNoYXBlLGcuYWN0aW9ucz1kLmFjdGlvbnMsZy5jdXJ2ZXM9ZC5jdXJ2ZXMsZS5wdXNoKGcpLGU7Yj0hVEhSRUUuU2hhcGUuVXRpbHMuaXNDbG9ja1dpc2UoZlswXS5nZXRQb2ludHMoKSk7aWYoYT8hYjpiKXtnPW5ldyBUSFJFRS5TaGFwZTtiPTA7Zm9yKGM9XG5mLmxlbmd0aDtiPGM7YisrKWQ9ZltiXSxoPVRIUkVFLlNoYXBlLlV0aWxzLmlzQ2xvY2tXaXNlKGQuZ2V0UG9pbnRzKCkpLChoPWE/IWg6aCk/KGcuYWN0aW9ucz1kLmFjdGlvbnMsZy5jdXJ2ZXM9ZC5jdXJ2ZXMsZS5wdXNoKGcpLGc9bmV3IFRIUkVFLlNoYXBlKTpnLmhvbGVzLnB1c2goZCl9ZWxzZXtnPXZvaWQgMDtiPTA7Zm9yKGM9Zi5sZW5ndGg7YjxjO2IrKylkPWZbYl0saD1USFJFRS5TaGFwZS5VdGlscy5pc0Nsb2NrV2lzZShkLmdldFBvaW50cygpKSwoaD1hPyFoOmgpPyhnJiZlLnB1c2goZyksZz1uZXcgVEhSRUUuU2hhcGUsZy5hY3Rpb25zPWQuYWN0aW9ucyxnLmN1cnZlcz1kLmN1cnZlcyk6Zy5ob2xlcy5wdXNoKGQpO2UucHVzaChnKX1yZXR1cm4gZX07VEhSRUUuU2hhcGU9ZnVuY3Rpb24oKXtUSFJFRS5QYXRoLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmhvbGVzPVtdfTtUSFJFRS5TaGFwZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5QYXRoLnByb3RvdHlwZSk7VEhSRUUuU2hhcGUucHJvdG90eXBlLmV4dHJ1ZGU9ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBUSFJFRS5FeHRydWRlR2VvbWV0cnkodGhpcyxhKX07VEhSRUUuU2hhcGUucHJvdG90eXBlLm1ha2VHZW9tZXRyeT1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IFRIUkVFLlNoYXBlR2VvbWV0cnkodGhpcyxhKX07VEhSRUUuU2hhcGUucHJvdG90eXBlLmdldFBvaW50c0hvbGVzPWZ1bmN0aW9uKGEpe3ZhciBiLGM9dGhpcy5ob2xlcy5sZW5ndGgsZD1bXTtmb3IoYj0wO2I8YztiKyspZFtiXT10aGlzLmhvbGVzW2JdLmdldFRyYW5zZm9ybWVkUG9pbnRzKGEsdGhpcy5iZW5kcyk7cmV0dXJuIGR9O1xuVEhSRUUuU2hhcGUucHJvdG90eXBlLmdldFNwYWNlZFBvaW50c0hvbGVzPWZ1bmN0aW9uKGEpe3ZhciBiLGM9dGhpcy5ob2xlcy5sZW5ndGgsZD1bXTtmb3IoYj0wO2I8YztiKyspZFtiXT10aGlzLmhvbGVzW2JdLmdldFRyYW5zZm9ybWVkU3BhY2VkUG9pbnRzKGEsdGhpcy5iZW5kcyk7cmV0dXJuIGR9O1RIUkVFLlNoYXBlLnByb3RvdHlwZS5leHRyYWN0QWxsUG9pbnRzPWZ1bmN0aW9uKGEpe3JldHVybntzaGFwZTp0aGlzLmdldFRyYW5zZm9ybWVkUG9pbnRzKGEpLGhvbGVzOnRoaXMuZ2V0UG9pbnRzSG9sZXMoYSl9fTtUSFJFRS5TaGFwZS5wcm90b3R5cGUuZXh0cmFjdFBvaW50cz1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy51c2VTcGFjZWRQb2ludHM/dGhpcy5leHRyYWN0QWxsU3BhY2VkUG9pbnRzKGEpOnRoaXMuZXh0cmFjdEFsbFBvaW50cyhhKX07XG5USFJFRS5TaGFwZS5wcm90b3R5cGUuZXh0cmFjdEFsbFNwYWNlZFBvaW50cz1mdW5jdGlvbihhKXtyZXR1cm57c2hhcGU6dGhpcy5nZXRUcmFuc2Zvcm1lZFNwYWNlZFBvaW50cyhhKSxob2xlczp0aGlzLmdldFNwYWNlZFBvaW50c0hvbGVzKGEpfX07XG5USFJFRS5TaGFwZS5VdGlscz17cmVtb3ZlSG9sZXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmNvbmNhdCgpLGQ9Yy5jb25jYXQoKSxlLGYsaCxnLGksayxtLGwscCx0LHM9W107Zm9yKGk9MDtpPGIubGVuZ3RoO2krKyl7az1iW2ldO0FycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGQsayk7Zj1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7Zm9yKGU9MDtlPGsubGVuZ3RoO2UrKyl7cD1rW2VdO3Q9W107Zm9yKGw9MDtsPGMubGVuZ3RoO2wrKyltPWNbbF0sbT1wLmRpc3RhbmNlVG9TcXVhcmVkKG0pLHQucHVzaChtKSxtPGYmJihmPW0saD1lLGc9bCl9ZT0wPD1nLTE/Zy0xOmMubGVuZ3RoLTE7Zj0wPD1oLTE/aC0xOmsubGVuZ3RoLTE7dmFyIHE9W2tbaF0sY1tnXSxjW2VdXTtsPVRIUkVFLkZvbnRVdGlscy5Ucmlhbmd1bGF0ZS5hcmVhKHEpO3ZhciBuPVtrW2hdLGtbZl0sY1tnXV07cD1USFJFRS5Gb250VXRpbHMuVHJpYW5ndWxhdGUuYXJlYShuKTt0PWc7bT1oO2crPTE7aCs9LTE7MD5cbmcmJihnKz1jLmxlbmd0aCk7ZyU9Yy5sZW5ndGg7MD5oJiYoaCs9ay5sZW5ndGgpO2glPWsubGVuZ3RoO2U9MDw9Zy0xP2ctMTpjLmxlbmd0aC0xO2Y9MDw9aC0xP2gtMTprLmxlbmd0aC0xO3E9W2tbaF0sY1tnXSxjW2VdXTtxPVRIUkVFLkZvbnRVdGlscy5Ucmlhbmd1bGF0ZS5hcmVhKHEpO249W2tbaF0sa1tmXSxjW2ddXTtuPVRIUkVFLkZvbnRVdGlscy5Ucmlhbmd1bGF0ZS5hcmVhKG4pO2wrcD5xK24mJihnPXQsaD1tLDA+ZyYmKGcrPWMubGVuZ3RoKSxnJT1jLmxlbmd0aCwwPmgmJihoKz1rLmxlbmd0aCksaCU9ay5sZW5ndGgsZT0wPD1nLTE/Zy0xOmMubGVuZ3RoLTEsZj0wPD1oLTE/aC0xOmsubGVuZ3RoLTEpO2w9Yy5zbGljZSgwLGcpO3A9Yy5zbGljZShnKTt0PWsuc2xpY2UoaCk7bT1rLnNsaWNlKDAsaCk7Zj1ba1toXSxrW2ZdLGNbZ11dO3MucHVzaChba1toXSxjW2ddLGNbZV1dKTtzLnB1c2goZik7Yz1sLmNvbmNhdCh0KS5jb25jYXQobSkuY29uY2F0KHApfXJldHVybntzaGFwZTpjLFxuaXNvbGF0ZWRQdHM6cyxhbGxwb2ludHM6ZH19LHRyaWFuZ3VsYXRlU2hhcGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1USFJFRS5TaGFwZS5VdGlscy5yZW1vdmVIb2xlcyhhLGIpLGQ9Yy5hbGxwb2ludHMsZT1jLmlzb2xhdGVkUHRzLGM9VEhSRUUuRm9udFV0aWxzLlRyaWFuZ3VsYXRlKGMuc2hhcGUsITEpLGYsaCxnLGksaz17fTtmPTA7Zm9yKGg9ZC5sZW5ndGg7ZjxoO2YrKylpPWRbZl0ueCtcIjpcIitkW2ZdLnksdm9pZCAwIT09a1tpXSYmY29uc29sZS5sb2coXCJEdXBsaWNhdGUgcG9pbnRcIixpKSxrW2ldPWY7Zj0wO2ZvcihoPWMubGVuZ3RoO2Y8aDtmKyspe2c9Y1tmXTtmb3IoZD0wOzM+ZDtkKyspaT1nW2RdLngrXCI6XCIrZ1tkXS55LGk9a1tpXSx2b2lkIDAhPT1pJiYoZ1tkXT1pKX1mPTA7Zm9yKGg9ZS5sZW5ndGg7ZjxoO2YrKyl7Zz1lW2ZdO2ZvcihkPTA7Mz5kO2QrKylpPWdbZF0ueCtcIjpcIitnW2RdLnksaT1rW2ldLHZvaWQgMCE9PWkmJihnW2RdPWkpfXJldHVybiBjLmNvbmNhdChlKX0sXG5pc0Nsb2NrV2lzZTpmdW5jdGlvbihhKXtyZXR1cm4gMD5USFJFRS5Gb250VXRpbHMuVHJpYW5ndWxhdGUuYXJlYShhKX0sYjJwMDpmdW5jdGlvbihhLGIpe3ZhciBjPTEtYTtyZXR1cm4gYypjKmJ9LGIycDE6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gMiooMS1hKSphKmJ9LGIycDI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSphKmJ9LGIyOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLmIycDAoYSxiKSt0aGlzLmIycDEoYSxjKSt0aGlzLmIycDIoYSxkKX0sYjNwMDpmdW5jdGlvbihhLGIpe3ZhciBjPTEtYTtyZXR1cm4gYypjKmMqYn0sYjNwMTpmdW5jdGlvbihhLGIpe3ZhciBjPTEtYTtyZXR1cm4gMypjKmMqYSpifSxiM3AyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIDMqKDEtYSkqYSphKmJ9LGIzcDM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSphKmEqYn0sYjM6ZnVuY3Rpb24oYSxiLGMsZCxlKXtyZXR1cm4gdGhpcy5iM3AwKGEsYikrdGhpcy5iM3AxKGEsYykrdGhpcy5iM3AyKGEsZCkrXG50aGlzLmIzcDMoYSxlKX19O1RIUkVFLkxpbmVDdXJ2ZT1mdW5jdGlvbihhLGIpe3RoaXMudjE9YTt0aGlzLnYyPWJ9O1RIUkVFLkxpbmVDdXJ2ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5DdXJ2ZS5wcm90b3R5cGUpO1RIUkVFLkxpbmVDdXJ2ZS5wcm90b3R5cGUuZ2V0UG9pbnQ9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy52Mi5jbG9uZSgpLnN1Yih0aGlzLnYxKTtiLm11bHRpcGx5U2NhbGFyKGEpLmFkZCh0aGlzLnYxKTtyZXR1cm4gYn07VEhSRUUuTGluZUN1cnZlLnByb3RvdHlwZS5nZXRQb2ludEF0PWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdldFBvaW50KGEpfTtUSFJFRS5MaW5lQ3VydmUucHJvdG90eXBlLmdldFRhbmdlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52Mi5jbG9uZSgpLnN1Yih0aGlzLnYxKS5ub3JtYWxpemUoKX07VEhSRUUuUXVhZHJhdGljQmV6aWVyQ3VydmU9ZnVuY3Rpb24oYSxiLGMpe3RoaXMudjA9YTt0aGlzLnYxPWI7dGhpcy52Mj1jfTtUSFJFRS5RdWFkcmF0aWNCZXppZXJDdXJ2ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5DdXJ2ZS5wcm90b3R5cGUpO1RIUkVFLlF1YWRyYXRpY0JlemllckN1cnZlLnByb3RvdHlwZS5nZXRQb2ludD1mdW5jdGlvbihhKXt2YXIgYjtiPVRIUkVFLlNoYXBlLlV0aWxzLmIyKGEsdGhpcy52MC54LHRoaXMudjEueCx0aGlzLnYyLngpO2E9VEhSRUUuU2hhcGUuVXRpbHMuYjIoYSx0aGlzLnYwLnksdGhpcy52MS55LHRoaXMudjIueSk7cmV0dXJuIG5ldyBUSFJFRS5WZWN0b3IyKGIsYSl9O1xuVEhSRUUuUXVhZHJhdGljQmV6aWVyQ3VydmUucHJvdG90eXBlLmdldFRhbmdlbnQ9ZnVuY3Rpb24oYSl7dmFyIGI7Yj1USFJFRS5DdXJ2ZS5VdGlscy50YW5nZW50UXVhZHJhdGljQmV6aWVyKGEsdGhpcy52MC54LHRoaXMudjEueCx0aGlzLnYyLngpO2E9VEhSRUUuQ3VydmUuVXRpbHMudGFuZ2VudFF1YWRyYXRpY0JlemllcihhLHRoaXMudjAueSx0aGlzLnYxLnksdGhpcy52Mi55KTtiPW5ldyBUSFJFRS5WZWN0b3IyKGIsYSk7Yi5ub3JtYWxpemUoKTtyZXR1cm4gYn07VEhSRUUuQ3ViaWNCZXppZXJDdXJ2ZT1mdW5jdGlvbihhLGIsYyxkKXt0aGlzLnYwPWE7dGhpcy52MT1iO3RoaXMudjI9Yzt0aGlzLnYzPWR9O1RIUkVFLkN1YmljQmV6aWVyQ3VydmUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuQ3VydmUucHJvdG90eXBlKTtUSFJFRS5DdWJpY0JlemllckN1cnZlLnByb3RvdHlwZS5nZXRQb2ludD1mdW5jdGlvbihhKXt2YXIgYjtiPVRIUkVFLlNoYXBlLlV0aWxzLmIzKGEsdGhpcy52MC54LHRoaXMudjEueCx0aGlzLnYyLngsdGhpcy52My54KTthPVRIUkVFLlNoYXBlLlV0aWxzLmIzKGEsdGhpcy52MC55LHRoaXMudjEueSx0aGlzLnYyLnksdGhpcy52My55KTtyZXR1cm4gbmV3IFRIUkVFLlZlY3RvcjIoYixhKX07XG5USFJFRS5DdWJpY0JlemllckN1cnZlLnByb3RvdHlwZS5nZXRUYW5nZW50PWZ1bmN0aW9uKGEpe3ZhciBiO2I9VEhSRUUuQ3VydmUuVXRpbHMudGFuZ2VudEN1YmljQmV6aWVyKGEsdGhpcy52MC54LHRoaXMudjEueCx0aGlzLnYyLngsdGhpcy52My54KTthPVRIUkVFLkN1cnZlLlV0aWxzLnRhbmdlbnRDdWJpY0JlemllcihhLHRoaXMudjAueSx0aGlzLnYxLnksdGhpcy52Mi55LHRoaXMudjMueSk7Yj1uZXcgVEhSRUUuVmVjdG9yMihiLGEpO2Iubm9ybWFsaXplKCk7cmV0dXJuIGJ9O1RIUkVFLlNwbGluZUN1cnZlPWZ1bmN0aW9uKGEpe3RoaXMucG9pbnRzPXZvaWQgMD09YT9bXTphfTtUSFJFRS5TcGxpbmVDdXJ2ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5DdXJ2ZS5wcm90b3R5cGUpO1RIUkVFLlNwbGluZUN1cnZlLnByb3RvdHlwZS5nZXRQb2ludD1mdW5jdGlvbihhKXt2YXIgYj1uZXcgVEhSRUUuVmVjdG9yMixjPVtdLGQ9dGhpcy5wb2ludHMsZTtlPShkLmxlbmd0aC0xKSphO2E9TWF0aC5mbG9vcihlKTtlLT1hO2NbMF09MD09YT9hOmEtMTtjWzFdPWE7Y1syXT1hPmQubGVuZ3RoLTI/ZC5sZW5ndGgtMTphKzE7Y1szXT1hPmQubGVuZ3RoLTM/ZC5sZW5ndGgtMTphKzI7Yi54PVRIUkVFLkN1cnZlLlV0aWxzLmludGVycG9sYXRlKGRbY1swXV0ueCxkW2NbMV1dLngsZFtjWzJdXS54LGRbY1szXV0ueCxlKTtiLnk9VEhSRUUuQ3VydmUuVXRpbHMuaW50ZXJwb2xhdGUoZFtjWzBdXS55LGRbY1sxXV0ueSxkW2NbMl1dLnksZFtjWzNdXS55LGUpO3JldHVybiBifTtUSFJFRS5FbGxpcHNlQ3VydmU9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsaCl7dGhpcy5hWD1hO3RoaXMuYVk9Yjt0aGlzLnhSYWRpdXM9Yzt0aGlzLnlSYWRpdXM9ZDt0aGlzLmFTdGFydEFuZ2xlPWU7dGhpcy5hRW5kQW5nbGU9Zjt0aGlzLmFDbG9ja3dpc2U9aH07VEhSRUUuRWxsaXBzZUN1cnZlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkN1cnZlLnByb3RvdHlwZSk7XG5USFJFRS5FbGxpcHNlQ3VydmUucHJvdG90eXBlLmdldFBvaW50PWZ1bmN0aW9uKGEpe3ZhciBiO2I9dGhpcy5hRW5kQW5nbGUtdGhpcy5hU3RhcnRBbmdsZTswPmImJihiKz0yKk1hdGguUEkpO2I+MipNYXRoLlBJJiYoYi09MipNYXRoLlBJKTtiPSEwPT09dGhpcy5hQ2xvY2t3aXNlP3RoaXMuYUVuZEFuZ2xlKygxLWEpKigyKk1hdGguUEktYik6dGhpcy5hU3RhcnRBbmdsZSthKmI7YT10aGlzLmFYK3RoaXMueFJhZGl1cypNYXRoLmNvcyhiKTtiPXRoaXMuYVkrdGhpcy55UmFkaXVzKk1hdGguc2luKGIpO3JldHVybiBuZXcgVEhSRUUuVmVjdG9yMihhLGIpfTtUSFJFRS5BcmNDdXJ2ZT1mdW5jdGlvbihhLGIsYyxkLGUsZil7VEhSRUUuRWxsaXBzZUN1cnZlLmNhbGwodGhpcyxhLGIsYyxjLGQsZSxmKX07VEhSRUUuQXJjQ3VydmUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuRWxsaXBzZUN1cnZlLnByb3RvdHlwZSk7VEhSRUUuTGluZUN1cnZlMz1USFJFRS5DdXJ2ZS5jcmVhdGUoZnVuY3Rpb24oYSxiKXt0aGlzLnYxPWE7dGhpcy52Mj1ifSxmdW5jdGlvbihhKXt2YXIgYj1uZXcgVEhSRUUuVmVjdG9yMztiLnN1YlZlY3RvcnModGhpcy52Mix0aGlzLnYxKTtiLm11bHRpcGx5U2NhbGFyKGEpO2IuYWRkKHRoaXMudjEpO3JldHVybiBifSk7VEhSRUUuUXVhZHJhdGljQmV6aWVyQ3VydmUzPVRIUkVFLkN1cnZlLmNyZWF0ZShmdW5jdGlvbihhLGIsYyl7dGhpcy52MD1hO3RoaXMudjE9Yjt0aGlzLnYyPWN9LGZ1bmN0aW9uKGEpe3ZhciBiLGM7Yj1USFJFRS5TaGFwZS5VdGlscy5iMihhLHRoaXMudjAueCx0aGlzLnYxLngsdGhpcy52Mi54KTtjPVRIUkVFLlNoYXBlLlV0aWxzLmIyKGEsdGhpcy52MC55LHRoaXMudjEueSx0aGlzLnYyLnkpO2E9VEhSRUUuU2hhcGUuVXRpbHMuYjIoYSx0aGlzLnYwLnosdGhpcy52MS56LHRoaXMudjIueik7cmV0dXJuIG5ldyBUSFJFRS5WZWN0b3IzKGIsYyxhKX0pO1RIUkVFLkN1YmljQmV6aWVyQ3VydmUzPVRIUkVFLkN1cnZlLmNyZWF0ZShmdW5jdGlvbihhLGIsYyxkKXt0aGlzLnYwPWE7dGhpcy52MT1iO3RoaXMudjI9Yzt0aGlzLnYzPWR9LGZ1bmN0aW9uKGEpe3ZhciBiLGM7Yj1USFJFRS5TaGFwZS5VdGlscy5iMyhhLHRoaXMudjAueCx0aGlzLnYxLngsdGhpcy52Mi54LHRoaXMudjMueCk7Yz1USFJFRS5TaGFwZS5VdGlscy5iMyhhLHRoaXMudjAueSx0aGlzLnYxLnksdGhpcy52Mi55LHRoaXMudjMueSk7YT1USFJFRS5TaGFwZS5VdGlscy5iMyhhLHRoaXMudjAueix0aGlzLnYxLnosdGhpcy52Mi56LHRoaXMudjMueik7cmV0dXJuIG5ldyBUSFJFRS5WZWN0b3IzKGIsYyxhKX0pO1RIUkVFLlNwbGluZUN1cnZlMz1USFJFRS5DdXJ2ZS5jcmVhdGUoZnVuY3Rpb24oYSl7dGhpcy5wb2ludHM9dm9pZCAwPT1hP1tdOmF9LGZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBUSFJFRS5WZWN0b3IzLGM9W10sZD10aGlzLnBvaW50cyxlLGE9KGQubGVuZ3RoLTEpKmE7ZT1NYXRoLmZsb29yKGEpO2EtPWU7Y1swXT0wPT1lP2U6ZS0xO2NbMV09ZTtjWzJdPWU+ZC5sZW5ndGgtMj9kLmxlbmd0aC0xOmUrMTtjWzNdPWU+ZC5sZW5ndGgtMz9kLmxlbmd0aC0xOmUrMjtlPWRbY1swXV07dmFyIGY9ZFtjWzFdXSxoPWRbY1syXV0sYz1kW2NbM11dO2IueD1USFJFRS5DdXJ2ZS5VdGlscy5pbnRlcnBvbGF0ZShlLngsZi54LGgueCxjLngsYSk7Yi55PVRIUkVFLkN1cnZlLlV0aWxzLmludGVycG9sYXRlKGUueSxmLnksaC55LGMueSxhKTtiLno9VEhSRUUuQ3VydmUuVXRpbHMuaW50ZXJwb2xhdGUoZS56LGYueixoLnosYy56LGEpO3JldHVybiBifSk7VEhSRUUuQ2xvc2VkU3BsaW5lQ3VydmUzPVRIUkVFLkN1cnZlLmNyZWF0ZShmdW5jdGlvbihhKXt0aGlzLnBvaW50cz12b2lkIDA9PWE/W106YX0sZnVuY3Rpb24oYSl7dmFyIGI9bmV3IFRIUkVFLlZlY3RvcjMsYz1bXSxkPXRoaXMucG9pbnRzLGU7ZT0oZC5sZW5ndGgtMCkqYTthPU1hdGguZmxvb3IoZSk7ZS09YTthKz0wPGE/MDooTWF0aC5mbG9vcihNYXRoLmFicyhhKS9kLmxlbmd0aCkrMSkqZC5sZW5ndGg7Y1swXT0oYS0xKSVkLmxlbmd0aDtjWzFdPWElZC5sZW5ndGg7Y1syXT0oYSsxKSVkLmxlbmd0aDtjWzNdPShhKzIpJWQubGVuZ3RoO2IueD1USFJFRS5DdXJ2ZS5VdGlscy5pbnRlcnBvbGF0ZShkW2NbMF1dLngsZFtjWzFdXS54LGRbY1syXV0ueCxkW2NbM11dLngsZSk7Yi55PVRIUkVFLkN1cnZlLlV0aWxzLmludGVycG9sYXRlKGRbY1swXV0ueSxkW2NbMV1dLnksZFtjWzJdXS55LGRbY1szXV0ueSxlKTtiLno9VEhSRUUuQ3VydmUuVXRpbHMuaW50ZXJwb2xhdGUoZFtjWzBdXS56LFxuZFtjWzFdXS56LGRbY1syXV0ueixkW2NbM11dLnosZSk7cmV0dXJuIGJ9KTtUSFJFRS5BbmltYXRpb25IYW5kbGVyPWZ1bmN0aW9uKCl7dmFyIGE9W10sYj17fSxjPXt1cGRhdGU6ZnVuY3Rpb24oYil7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspYVtjXS51cGRhdGUoYil9LGFkZFRvVXBkYXRlOmZ1bmN0aW9uKGIpey0xPT09YS5pbmRleE9mKGIpJiZhLnB1c2goYil9LHJlbW92ZUZyb21VcGRhdGU6ZnVuY3Rpb24oYil7Yj1hLmluZGV4T2YoYik7LTEhPT1iJiZhLnNwbGljZShiLDEpfSxhZGQ6ZnVuY3Rpb24oYSl7dm9pZCAwIT09YlthLm5hbWVdJiZjb25zb2xlLmxvZyhcIlRIUkVFLkFuaW1hdGlvbkhhbmRsZXIuYWRkOiBXYXJuaW5nISBcIithLm5hbWUrXCIgYWxyZWFkeSBleGlzdHMgaW4gbGlicmFyeS4gT3ZlcndyaXRpbmcuXCIpO2JbYS5uYW1lXT1hO2lmKCEwIT09YS5pbml0aWFsaXplZCl7Zm9yKHZhciBjPTA7YzxhLmhpZXJhcmNoeS5sZW5ndGg7YysrKXtmb3IodmFyIGQ9MDtkPGEuaGllcmFyY2h5W2NdLmtleXMubGVuZ3RoO2QrKylpZigwPmEuaGllcmFyY2h5W2NdLmtleXNbZF0udGltZSYmXG4oYS5oaWVyYXJjaHlbY10ua2V5c1tkXS50aW1lPTApLHZvaWQgMCE9PWEuaGllcmFyY2h5W2NdLmtleXNbZF0ucm90JiYhKGEuaGllcmFyY2h5W2NdLmtleXNbZF0ucm90IGluc3RhbmNlb2YgVEhSRUUuUXVhdGVybmlvbikpe3ZhciBnPWEuaGllcmFyY2h5W2NdLmtleXNbZF0ucm90O2EuaGllcmFyY2h5W2NdLmtleXNbZF0ucm90PW5ldyBUSFJFRS5RdWF0ZXJuaW9uKGdbMF0sZ1sxXSxnWzJdLGdbM10pfWlmKGEuaGllcmFyY2h5W2NdLmtleXMubGVuZ3RoJiZ2b2lkIDAhPT1hLmhpZXJhcmNoeVtjXS5rZXlzWzBdLm1vcnBoVGFyZ2V0cyl7Zz17fTtmb3IoZD0wO2Q8YS5oaWVyYXJjaHlbY10ua2V5cy5sZW5ndGg7ZCsrKWZvcih2YXIgaT0wO2k8YS5oaWVyYXJjaHlbY10ua2V5c1tkXS5tb3JwaFRhcmdldHMubGVuZ3RoO2krKyl7dmFyIGs9YS5oaWVyYXJjaHlbY10ua2V5c1tkXS5tb3JwaFRhcmdldHNbaV07Z1trXT0tMX1hLmhpZXJhcmNoeVtjXS51c2VkTW9ycGhUYXJnZXRzPWc7XG5mb3IoZD0wO2Q8YS5oaWVyYXJjaHlbY10ua2V5cy5sZW5ndGg7ZCsrKXt2YXIgbT17fTtmb3IoayBpbiBnKXtmb3IoaT0wO2k8YS5oaWVyYXJjaHlbY10ua2V5c1tkXS5tb3JwaFRhcmdldHMubGVuZ3RoO2krKylpZihhLmhpZXJhcmNoeVtjXS5rZXlzW2RdLm1vcnBoVGFyZ2V0c1tpXT09PWspe21ba109YS5oaWVyYXJjaHlbY10ua2V5c1tkXS5tb3JwaFRhcmdldHNJbmZsdWVuY2VzW2ldO2JyZWFrfWk9PT1hLmhpZXJhcmNoeVtjXS5rZXlzW2RdLm1vcnBoVGFyZ2V0cy5sZW5ndGgmJihtW2tdPTApfWEuaGllcmFyY2h5W2NdLmtleXNbZF0ubW9ycGhUYXJnZXRzSW5mbHVlbmNlcz1tfX1mb3IoZD0xO2Q8YS5oaWVyYXJjaHlbY10ua2V5cy5sZW5ndGg7ZCsrKWEuaGllcmFyY2h5W2NdLmtleXNbZF0udGltZT09PWEuaGllcmFyY2h5W2NdLmtleXNbZC0xXS50aW1lJiYoYS5oaWVyYXJjaHlbY10ua2V5cy5zcGxpY2UoZCwxKSxkLS0pO2ZvcihkPTA7ZDxhLmhpZXJhcmNoeVtjXS5rZXlzLmxlbmd0aDtkKyspYS5oaWVyYXJjaHlbY10ua2V5c1tkXS5pbmRleD1cbmR9ZD1wYXJzZUludChhLmxlbmd0aCphLmZwcywxMCk7YS5KSVQ9e307YS5KSVQuaGllcmFyY2h5PVtdO2ZvcihjPTA7YzxhLmhpZXJhcmNoeS5sZW5ndGg7YysrKWEuSklULmhpZXJhcmNoeS5wdXNoKEFycmF5KGQpKTthLmluaXRpYWxpemVkPSEwfX0sZ2V0OmZ1bmN0aW9uKGEpe2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYSl7aWYoYlthXSlyZXR1cm4gYlthXTtjb25zb2xlLmxvZyhcIlRIUkVFLkFuaW1hdGlvbkhhbmRsZXIuZ2V0OiBDb3VsZG4ndCBmaW5kIGFuaW1hdGlvbiBcIithKTtyZXR1cm4gbnVsbH19LHBhcnNlOmZ1bmN0aW9uKGEpe3ZhciBiPVtdO2lmKGEgaW5zdGFuY2VvZiBUSFJFRS5Ta2lubmVkTWVzaClmb3IodmFyIGM9MDtjPGEuYm9uZXMubGVuZ3RoO2MrKyliLnB1c2goYS5ib25lc1tjXSk7ZWxzZSBkKGEsYik7cmV0dXJuIGJ9fSxkPWZ1bmN0aW9uKGEsYil7Yi5wdXNoKGEpO2Zvcih2YXIgYz0wO2M8YS5jaGlsZHJlbi5sZW5ndGg7YysrKWQoYS5jaGlsZHJlbltjXSxcbmIpfTtjLkxJTkVBUj0wO2MuQ0FUTVVMTFJPTT0xO2MuQ0FUTVVMTFJPTV9GT1JXQVJEPTI7cmV0dXJuIGN9KCk7VEhSRUUuQW5pbWF0aW9uPWZ1bmN0aW9uKGEsYixjKXt0aGlzLnJvb3Q9YTt0aGlzLmRhdGE9VEhSRUUuQW5pbWF0aW9uSGFuZGxlci5nZXQoYik7dGhpcy5oaWVyYXJjaHk9VEhSRUUuQW5pbWF0aW9uSGFuZGxlci5wYXJzZShhKTt0aGlzLmN1cnJlbnRUaW1lPTA7dGhpcy50aW1lU2NhbGU9MTt0aGlzLmlzUGxheWluZz0hMTt0aGlzLmxvb3A9dGhpcy5pc1BhdXNlZD0hMDt0aGlzLmludGVycG9sYXRpb25UeXBlPXZvaWQgMCE9PWM/YzpUSFJFRS5BbmltYXRpb25IYW5kbGVyLkxJTkVBUjt0aGlzLnBvaW50cz1bXTt0aGlzLnRhcmdldD1uZXcgVEhSRUUuVmVjdG9yM307XG5USFJFRS5BbmltYXRpb24ucHJvdG90eXBlLnBsYXk9ZnVuY3Rpb24oYSxiKXtpZighMT09PXRoaXMuaXNQbGF5aW5nKXt0aGlzLmlzUGxheWluZz0hMDt0aGlzLmxvb3A9dm9pZCAwIT09YT9hOiEwO3RoaXMuY3VycmVudFRpbWU9dm9pZCAwIT09Yj9iOjA7dmFyIGMsZD10aGlzLmhpZXJhcmNoeS5sZW5ndGgsZTtmb3IoYz0wO2M8ZDtjKyspe2U9dGhpcy5oaWVyYXJjaHlbY107ZS5tYXRyaXhBdXRvVXBkYXRlPSEwO3ZvaWQgMD09PWUuYW5pbWF0aW9uQ2FjaGUmJihlLmFuaW1hdGlvbkNhY2hlPXt9LGUuYW5pbWF0aW9uQ2FjaGUucHJldktleT17cG9zOjAscm90OjAsc2NsOjB9LGUuYW5pbWF0aW9uQ2FjaGUubmV4dEtleT17cG9zOjAscm90OjAsc2NsOjB9LGUuYW5pbWF0aW9uQ2FjaGUub3JpZ2luYWxNYXRyaXg9ZSBpbnN0YW5jZW9mIFRIUkVFLkJvbmU/ZS5za2luTWF0cml4OmUubWF0cml4KTt2YXIgZj1lLmFuaW1hdGlvbkNhY2hlLnByZXZLZXk7ZT1lLmFuaW1hdGlvbkNhY2hlLm5leHRLZXk7XG5mLnBvcz10aGlzLmRhdGEuaGllcmFyY2h5W2NdLmtleXNbMF07Zi5yb3Q9dGhpcy5kYXRhLmhpZXJhcmNoeVtjXS5rZXlzWzBdO2Yuc2NsPXRoaXMuZGF0YS5oaWVyYXJjaHlbY10ua2V5c1swXTtlLnBvcz10aGlzLmdldE5leHRLZXlXaXRoKFwicG9zXCIsYywxKTtlLnJvdD10aGlzLmdldE5leHRLZXlXaXRoKFwicm90XCIsYywxKTtlLnNjbD10aGlzLmdldE5leHRLZXlXaXRoKFwic2NsXCIsYywxKX10aGlzLnVwZGF0ZSgwKX10aGlzLmlzUGF1c2VkPSExO1RIUkVFLkFuaW1hdGlvbkhhbmRsZXIuYWRkVG9VcGRhdGUodGhpcyl9O1RIUkVFLkFuaW1hdGlvbi5wcm90b3R5cGUucGF1c2U9ZnVuY3Rpb24oKXshMD09PXRoaXMuaXNQYXVzZWQ/VEhSRUUuQW5pbWF0aW9uSGFuZGxlci5hZGRUb1VwZGF0ZSh0aGlzKTpUSFJFRS5BbmltYXRpb25IYW5kbGVyLnJlbW92ZUZyb21VcGRhdGUodGhpcyk7dGhpcy5pc1BhdXNlZD0hdGhpcy5pc1BhdXNlZH07XG5USFJFRS5BbmltYXRpb24ucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXt0aGlzLmlzUGF1c2VkPXRoaXMuaXNQbGF5aW5nPSExO1RIUkVFLkFuaW1hdGlvbkhhbmRsZXIucmVtb3ZlRnJvbVVwZGF0ZSh0aGlzKX07XG5USFJFRS5BbmltYXRpb24ucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbihhKXtpZighMSE9PXRoaXMuaXNQbGF5aW5nKXt2YXIgYj1bXCJwb3NcIixcInJvdFwiLFwic2NsXCJdLGMsZCxlLGYsaCxnLGksayxtO2ZvcihtPXRoaXMuY3VycmVudFRpbWUrPWEqdGhpcy50aW1lU2NhbGU7dGhpcy5jdXJyZW50VGltZT50aGlzLmRhdGEubGVuZ3RoOyl0aGlzLmN1cnJlbnRUaW1lLT10aGlzLmRhdGEubGVuZ3RoO2s9dGhpcy5jdXJyZW50VGltZSU9dGhpcy5kYXRhLmxlbmd0aDtwYXJzZUludChNYXRoLm1pbihrKnRoaXMuZGF0YS5mcHMsdGhpcy5kYXRhLmxlbmd0aCp0aGlzLmRhdGEuZnBzKSwxMCk7Zm9yKHZhciBsPTAscD10aGlzLmhpZXJhcmNoeS5sZW5ndGg7bDxwO2wrKyl7YT10aGlzLmhpZXJhcmNoeVtsXTtpPWEuYW5pbWF0aW9uQ2FjaGU7Zm9yKHZhciB0PTA7Mz50O3QrKyl7Yz1iW3RdO2g9aS5wcmV2S2V5W2NdO2c9aS5uZXh0S2V5W2NdO2lmKGcudGltZTw9bSl7aWYoazw9bSlpZih0aGlzLmxvb3Ape2g9XG50aGlzLmRhdGEuaGllcmFyY2h5W2xdLmtleXNbMF07Zm9yKGc9dGhpcy5nZXROZXh0S2V5V2l0aChjLGwsMSk7bnVsbCE9PWcmJmcudGltZTxrJiZnLmluZGV4PmguaW5kZXg7KWg9ZyxnPXRoaXMuZ2V0TmV4dEtleVdpdGgoYyxsLGcuaW5kZXgrMSl9ZWxzZXt0aGlzLnN0b3AoKTtyZXR1cm59ZWxzZXtkbyBoPWcsZz10aGlzLmdldE5leHRLZXlXaXRoKGMsbCxnLmluZGV4KzEpO3doaWxlKG51bGwhPT1nJiZnLnRpbWU8ayYmZy5pbmRleD5oLmluZGV4KX1pLnByZXZLZXlbY109aDtpLm5leHRLZXlbY109Z31hLm1hdHJpeEF1dG9VcGRhdGU9ITA7YS5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPSEwO2Q9KGstaC50aW1lKS8oZy50aW1lLWgudGltZSk7ZT1oW2NdO2Y9Z1tjXTtpZigwPmR8fDE8ZCljb25zb2xlLmxvZyhcIlRIUkVFLkFuaW1hdGlvbi51cGRhdGU6IFdhcm5pbmchIFNjYWxlIG91dCBvZiBib3VuZHM6XCIrZCtcIiBvbiBib25lIFwiK2wpLGQ9MD5kPzA6MTtpZihcInBvc1wiPT09YylpZihjPVxuYS5wb3NpdGlvbix0aGlzLmludGVycG9sYXRpb25UeXBlPT09VEhSRUUuQW5pbWF0aW9uSGFuZGxlci5MSU5FQVIpYy54PWVbMF0rKGZbMF0tZVswXSkqZCxjLnk9ZVsxXSsoZlsxXS1lWzFdKSpkLGMuej1lWzJdKyhmWzJdLWVbMl0pKmQ7ZWxzZXtpZih0aGlzLmludGVycG9sYXRpb25UeXBlPT09VEhSRUUuQW5pbWF0aW9uSGFuZGxlci5DQVRNVUxMUk9NfHx0aGlzLmludGVycG9sYXRpb25UeXBlPT09VEhSRUUuQW5pbWF0aW9uSGFuZGxlci5DQVRNVUxMUk9NX0ZPUldBUkQpdGhpcy5wb2ludHNbMF09dGhpcy5nZXRQcmV2S2V5V2l0aChcInBvc1wiLGwsaC5pbmRleC0xKS5wb3MsdGhpcy5wb2ludHNbMV09ZSx0aGlzLnBvaW50c1syXT1mLHRoaXMucG9pbnRzWzNdPXRoaXMuZ2V0TmV4dEtleVdpdGgoXCJwb3NcIixsLGcuaW5kZXgrMSkucG9zLGQ9MC4zMypkKzAuMzMsZT10aGlzLmludGVycG9sYXRlQ2F0bXVsbFJvbSh0aGlzLnBvaW50cyxkKSxjLng9ZVswXSxjLnk9ZVsxXSxjLno9ZVsyXSxcbnRoaXMuaW50ZXJwb2xhdGlvblR5cGU9PT1USFJFRS5BbmltYXRpb25IYW5kbGVyLkNBVE1VTExST01fRk9SV0FSRCYmKGQ9dGhpcy5pbnRlcnBvbGF0ZUNhdG11bGxSb20odGhpcy5wb2ludHMsMS4wMSpkKSx0aGlzLnRhcmdldC5zZXQoZFswXSxkWzFdLGRbMl0pLHRoaXMudGFyZ2V0LnN1YihjKSx0aGlzLnRhcmdldC55PTAsdGhpcy50YXJnZXQubm9ybWFsaXplKCksZD1NYXRoLmF0YW4yKHRoaXMudGFyZ2V0LngsdGhpcy50YXJnZXQueiksYS5yb3RhdGlvbi5zZXQoMCxkLDApKX1lbHNlXCJyb3RcIj09PWM/VEhSRUUuUXVhdGVybmlvbi5zbGVycChlLGYsYS5xdWF0ZXJuaW9uLGQpOlwic2NsXCI9PT1jJiYoYz1hLnNjYWxlLGMueD1lWzBdKyhmWzBdLWVbMF0pKmQsYy55PWVbMV0rKGZbMV0tZVsxXSkqZCxjLno9ZVsyXSsoZlsyXS1lWzJdKSpkKX19fX07XG5USFJFRS5BbmltYXRpb24ucHJvdG90eXBlLmludGVycG9sYXRlQ2F0bXVsbFJvbT1mdW5jdGlvbihhLGIpe3ZhciBjPVtdLGQ9W10sZSxmLGgsZyxpLGs7ZT0oYS5sZW5ndGgtMSkqYjtmPU1hdGguZmxvb3IoZSk7ZS09ZjtjWzBdPTA9PT1mP2Y6Zi0xO2NbMV09ZjtjWzJdPWY+YS5sZW5ndGgtMj9mOmYrMTtjWzNdPWY+YS5sZW5ndGgtMz9mOmYrMjtmPWFbY1swXV07Zz1hW2NbMV1dO2k9YVtjWzJdXTtrPWFbY1szXV07Yz1lKmU7aD1lKmM7ZFswXT10aGlzLmludGVycG9sYXRlKGZbMF0sZ1swXSxpWzBdLGtbMF0sZSxjLGgpO2RbMV09dGhpcy5pbnRlcnBvbGF0ZShmWzFdLGdbMV0saVsxXSxrWzFdLGUsYyxoKTtkWzJdPXRoaXMuaW50ZXJwb2xhdGUoZlsyXSxnWzJdLGlbMl0sa1syXSxlLGMsaCk7cmV0dXJuIGR9O1xuVEhSRUUuQW5pbWF0aW9uLnByb3RvdHlwZS5pbnRlcnBvbGF0ZT1mdW5jdGlvbihhLGIsYyxkLGUsZixoKXthPTAuNSooYy1hKTtkPTAuNSooZC1iKTtyZXR1cm4oMiooYi1jKSthK2QpKmgrKC0zKihiLWMpLTIqYS1kKSpmK2EqZStifTtUSFJFRS5BbmltYXRpb24ucHJvdG90eXBlLmdldE5leHRLZXlXaXRoPWZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9dGhpcy5kYXRhLmhpZXJhcmNoeVtiXS5rZXlzLGM9dGhpcy5pbnRlcnBvbGF0aW9uVHlwZT09PVRIUkVFLkFuaW1hdGlvbkhhbmRsZXIuQ0FUTVVMTFJPTXx8dGhpcy5pbnRlcnBvbGF0aW9uVHlwZT09PVRIUkVFLkFuaW1hdGlvbkhhbmRsZXIuQ0FUTVVMTFJPTV9GT1JXQVJEP2M8ZC5sZW5ndGgtMT9jOmQubGVuZ3RoLTE6YyVkLmxlbmd0aDtjPGQubGVuZ3RoO2MrKylpZih2b2lkIDAhPT1kW2NdW2FdKXJldHVybiBkW2NdO3JldHVybiB0aGlzLmRhdGEuaGllcmFyY2h5W2JdLmtleXNbMF19O1xuVEhSRUUuQW5pbWF0aW9uLnByb3RvdHlwZS5nZXRQcmV2S2V5V2l0aD1mdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPXRoaXMuZGF0YS5oaWVyYXJjaHlbYl0ua2V5cyxjPXRoaXMuaW50ZXJwb2xhdGlvblR5cGU9PT1USFJFRS5BbmltYXRpb25IYW5kbGVyLkNBVE1VTExST018fHRoaXMuaW50ZXJwb2xhdGlvblR5cGU9PT1USFJFRS5BbmltYXRpb25IYW5kbGVyLkNBVE1VTExST01fRk9SV0FSRD8wPGM/YzowOjA8PWM/YzpjK2QubGVuZ3RoOzA8PWM7Yy0tKWlmKHZvaWQgMCE9PWRbY11bYV0pcmV0dXJuIGRbY107cmV0dXJuIHRoaXMuZGF0YS5oaWVyYXJjaHlbYl0ua2V5c1tkLmxlbmd0aC0xXX07VEhSRUUuS2V5RnJhbWVBbmltYXRpb249ZnVuY3Rpb24oYSxiLGMpe3RoaXMucm9vdD1hO3RoaXMuZGF0YT1USFJFRS5BbmltYXRpb25IYW5kbGVyLmdldChiKTt0aGlzLmhpZXJhcmNoeT1USFJFRS5BbmltYXRpb25IYW5kbGVyLnBhcnNlKGEpO3RoaXMuY3VycmVudFRpbWU9MDt0aGlzLnRpbWVTY2FsZT0wLjAwMTt0aGlzLmlzUGxheWluZz0hMTt0aGlzLmxvb3A9dGhpcy5pc1BhdXNlZD0hMDt0aGlzLkpJVENvbXBpbGU9dm9pZCAwIT09Yz9jOiEwO2E9MDtmb3IoYj10aGlzLmhpZXJhcmNoeS5sZW5ndGg7YTxiO2ErKyl7dmFyIGM9dGhpcy5kYXRhLmhpZXJhcmNoeVthXS5zaWRzLGQ9dGhpcy5oaWVyYXJjaHlbYV07aWYodGhpcy5kYXRhLmhpZXJhcmNoeVthXS5rZXlzLmxlbmd0aCYmYyl7Zm9yKHZhciBlPTA7ZTxjLmxlbmd0aDtlKyspe3ZhciBmPWNbZV0saD10aGlzLmdldE5leHRLZXlXaXRoKGYsYSwwKTtoJiZoLmFwcGx5KGYpfWQubWF0cml4QXV0b1VwZGF0ZT0hMTt0aGlzLmRhdGEuaGllcmFyY2h5W2FdLm5vZGUudXBkYXRlTWF0cml4KCk7XG5kLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9ITB9fX07XG5USFJFRS5LZXlGcmFtZUFuaW1hdGlvbi5wcm90b3R5cGUucGxheT1mdW5jdGlvbihhLGIpe2lmKCF0aGlzLmlzUGxheWluZyl7dGhpcy5pc1BsYXlpbmc9ITA7dGhpcy5sb29wPXZvaWQgMCE9PWE/YTohMDt0aGlzLmN1cnJlbnRUaW1lPXZvaWQgMCE9PWI/YjowO3RoaXMuc3RhcnRUaW1lTXM9Yjt0aGlzLnN0YXJ0VGltZT0xRTc7dGhpcy5lbmRUaW1lPS10aGlzLnN0YXJ0VGltZTt2YXIgYyxkPXRoaXMuaGllcmFyY2h5Lmxlbmd0aCxlLGY7Zm9yKGM9MDtjPGQ7YysrKWU9dGhpcy5oaWVyYXJjaHlbY10sZj10aGlzLmRhdGEuaGllcmFyY2h5W2NdLHZvaWQgMD09PWYuYW5pbWF0aW9uQ2FjaGUmJihmLmFuaW1hdGlvbkNhY2hlPXt9LGYuYW5pbWF0aW9uQ2FjaGUucHJldktleT1udWxsLGYuYW5pbWF0aW9uQ2FjaGUubmV4dEtleT1udWxsLGYuYW5pbWF0aW9uQ2FjaGUub3JpZ2luYWxNYXRyaXg9ZSBpbnN0YW5jZW9mIFRIUkVFLkJvbmU/ZS5za2luTWF0cml4OmUubWF0cml4KSxlPXRoaXMuZGF0YS5oaWVyYXJjaHlbY10ua2V5cyxcbmUubGVuZ3RoJiYoZi5hbmltYXRpb25DYWNoZS5wcmV2S2V5PWVbMF0sZi5hbmltYXRpb25DYWNoZS5uZXh0S2V5PWVbMV0sdGhpcy5zdGFydFRpbWU9TWF0aC5taW4oZVswXS50aW1lLHRoaXMuc3RhcnRUaW1lKSx0aGlzLmVuZFRpbWU9TWF0aC5tYXgoZVtlLmxlbmd0aC0xXS50aW1lLHRoaXMuZW5kVGltZSkpO3RoaXMudXBkYXRlKDApfXRoaXMuaXNQYXVzZWQ9ITE7VEhSRUUuQW5pbWF0aW9uSGFuZGxlci5hZGRUb1VwZGF0ZSh0aGlzKX07VEhSRUUuS2V5RnJhbWVBbmltYXRpb24ucHJvdG90eXBlLnBhdXNlPWZ1bmN0aW9uKCl7dGhpcy5pc1BhdXNlZD9USFJFRS5BbmltYXRpb25IYW5kbGVyLmFkZFRvVXBkYXRlKHRoaXMpOlRIUkVFLkFuaW1hdGlvbkhhbmRsZXIucmVtb3ZlRnJvbVVwZGF0ZSh0aGlzKTt0aGlzLmlzUGF1c2VkPSF0aGlzLmlzUGF1c2VkfTtcblRIUkVFLktleUZyYW1lQW5pbWF0aW9uLnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7dGhpcy5pc1BhdXNlZD10aGlzLmlzUGxheWluZz0hMTtUSFJFRS5BbmltYXRpb25IYW5kbGVyLnJlbW92ZUZyb21VcGRhdGUodGhpcyk7Zm9yKHZhciBhPTA7YTx0aGlzLmRhdGEuaGllcmFyY2h5Lmxlbmd0aDthKyspe3ZhciBiPXRoaXMuaGllcmFyY2h5W2FdLGM9dGhpcy5kYXRhLmhpZXJhcmNoeVthXTtpZih2b2lkIDAhPT1jLmFuaW1hdGlvbkNhY2hlKXt2YXIgZD1jLmFuaW1hdGlvbkNhY2hlLm9yaWdpbmFsTWF0cml4O2IgaW5zdGFuY2VvZiBUSFJFRS5Cb25lPyhkLmNvcHkoYi5za2luTWF0cml4KSxiLnNraW5NYXRyaXg9ZCk6KGQuY29weShiLm1hdHJpeCksYi5tYXRyaXg9ZCk7ZGVsZXRlIGMuYW5pbWF0aW9uQ2FjaGV9fX07XG5USFJFRS5LZXlGcmFtZUFuaW1hdGlvbi5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKGEpe2lmKHRoaXMuaXNQbGF5aW5nKXt2YXIgYixjLGQsZSxmPXRoaXMuZGF0YS5KSVQuaGllcmFyY2h5LGgsZyxpO2c9dGhpcy5jdXJyZW50VGltZSs9YSp0aGlzLnRpbWVTY2FsZTtoPXRoaXMuY3VycmVudFRpbWUlPXRoaXMuZGF0YS5sZW5ndGg7aDx0aGlzLnN0YXJ0VGltZU1zJiYoaD10aGlzLmN1cnJlbnRUaW1lPXRoaXMuc3RhcnRUaW1lTXMraCk7ZT1wYXJzZUludChNYXRoLm1pbihoKnRoaXMuZGF0YS5mcHMsdGhpcy5kYXRhLmxlbmd0aCp0aGlzLmRhdGEuZnBzKSwxMCk7aWYoKGk9aDxnKSYmIXRoaXMubG9vcCl7Zm9yKHZhciBhPTAsaz10aGlzLmhpZXJhcmNoeS5sZW5ndGg7YTxrO2ErKyl7dmFyIG09dGhpcy5kYXRhLmhpZXJhcmNoeVthXS5rZXlzLGY9dGhpcy5kYXRhLmhpZXJhcmNoeVthXS5zaWRzO2Q9bS5sZW5ndGgtMTtlPXRoaXMuaGllcmFyY2h5W2FdO2lmKG0ubGVuZ3RoKXtmb3IobT1cbjA7bTxmLmxlbmd0aDttKyspaD1mW21dLChnPXRoaXMuZ2V0UHJldktleVdpdGgoaCxhLGQpKSYmZy5hcHBseShoKTt0aGlzLmRhdGEuaGllcmFyY2h5W2FdLm5vZGUudXBkYXRlTWF0cml4KCk7ZS5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPSEwfX10aGlzLnN0b3AoKX1lbHNlIGlmKCEoaDx0aGlzLnN0YXJ0VGltZSkpe2E9MDtmb3Ioaz10aGlzLmhpZXJhcmNoeS5sZW5ndGg7YTxrO2ErKyl7ZD10aGlzLmhpZXJhcmNoeVthXTtiPXRoaXMuZGF0YS5oaWVyYXJjaHlbYV07dmFyIG09Yi5rZXlzLGw9Yi5hbmltYXRpb25DYWNoZTtpZih0aGlzLkpJVENvbXBpbGUmJnZvaWQgMCE9PWZbYV1bZV0pZCBpbnN0YW5jZW9mIFRIUkVFLkJvbmU/KGQuc2tpbk1hdHJpeD1mW2FdW2VdLGQubWF0cml4V29ybGROZWVkc1VwZGF0ZT0hMSk6KGQubWF0cml4PWZbYV1bZV0sZC5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPSEwKTtlbHNlIGlmKG0ubGVuZ3RoKXt0aGlzLkpJVENvbXBpbGUmJmwmJihkIGluc3RhbmNlb2ZcblRIUkVFLkJvbmU/ZC5za2luTWF0cml4PWwub3JpZ2luYWxNYXRyaXg6ZC5tYXRyaXg9bC5vcmlnaW5hbE1hdHJpeCk7Yj1sLnByZXZLZXk7Yz1sLm5leHRLZXk7aWYoYiYmYyl7aWYoYy50aW1lPD1nKXtpZihpJiZ0aGlzLmxvb3Ape2I9bVswXTtmb3IoYz1tWzFdO2MudGltZTxoOyliPWMsYz1tW2IuaW5kZXgrMV19ZWxzZSBpZighaSlmb3IodmFyIHA9bS5sZW5ndGgtMTtjLnRpbWU8aCYmYy5pbmRleCE9PXA7KWI9YyxjPW1bYi5pbmRleCsxXTtsLnByZXZLZXk9YjtsLm5leHRLZXk9Y31jLnRpbWU+PWg/Yi5pbnRlcnBvbGF0ZShjLGgpOmIuaW50ZXJwb2xhdGUoYyxjLnRpbWUpfXRoaXMuZGF0YS5oaWVyYXJjaHlbYV0ubm9kZS51cGRhdGVNYXRyaXgoKTtkLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9ITB9fWlmKHRoaXMuSklUQ29tcGlsZSYmdm9pZCAwPT09ZlswXVtlXSl7dGhpcy5oaWVyYXJjaHlbMF0udXBkYXRlTWF0cml4V29ybGQoITApO2ZvcihhPTA7YTx0aGlzLmhpZXJhcmNoeS5sZW5ndGg7YSsrKWZbYV1bZV09XG50aGlzLmhpZXJhcmNoeVthXWluc3RhbmNlb2YgVEhSRUUuQm9uZT90aGlzLmhpZXJhcmNoeVthXS5za2luTWF0cml4LmNsb25lKCk6dGhpcy5oaWVyYXJjaHlbYV0ubWF0cml4LmNsb25lKCl9fX19O1RIUkVFLktleUZyYW1lQW5pbWF0aW9uLnByb3RvdHlwZS5nZXROZXh0S2V5V2l0aD1mdW5jdGlvbihhLGIsYyl7Yj10aGlzLmRhdGEuaGllcmFyY2h5W2JdLmtleXM7Zm9yKGMlPWIubGVuZ3RoO2M8Yi5sZW5ndGg7YysrKWlmKGJbY10uaGFzVGFyZ2V0KGEpKXJldHVybiBiW2NdO3JldHVybiBiWzBdfTtUSFJFRS5LZXlGcmFtZUFuaW1hdGlvbi5wcm90b3R5cGUuZ2V0UHJldktleVdpdGg9ZnVuY3Rpb24oYSxiLGMpe2I9dGhpcy5kYXRhLmhpZXJhcmNoeVtiXS5rZXlzO2ZvcihjPTA8PWM/YzpjK2IubGVuZ3RoOzA8PWM7Yy0tKWlmKGJbY10uaGFzVGFyZ2V0KGEpKXJldHVybiBiW2NdO3JldHVybiBiW2IubGVuZ3RoLTFdfTtUSFJFRS5DdWJlQ2FtZXJhPWZ1bmN0aW9uKGEsYixjKXtUSFJFRS5PYmplY3QzRC5jYWxsKHRoaXMpO3ZhciBkPW5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSg5MCwxLGEsYik7ZC51cC5zZXQoMCwtMSwwKTtkLmxvb2tBdChuZXcgVEhSRUUuVmVjdG9yMygxLDAsMCkpO3RoaXMuYWRkKGQpO3ZhciBlPW5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSg5MCwxLGEsYik7ZS51cC5zZXQoMCwtMSwwKTtlLmxvb2tBdChuZXcgVEhSRUUuVmVjdG9yMygtMSwwLDApKTt0aGlzLmFkZChlKTt2YXIgZj1uZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoOTAsMSxhLGIpO2YudXAuc2V0KDAsMCwxKTtmLmxvb2tBdChuZXcgVEhSRUUuVmVjdG9yMygwLDEsMCkpO3RoaXMuYWRkKGYpO3ZhciBoPW5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSg5MCwxLGEsYik7aC51cC5zZXQoMCwwLC0xKTtoLmxvb2tBdChuZXcgVEhSRUUuVmVjdG9yMygwLC0xLDApKTt0aGlzLmFkZChoKTt2YXIgZz1uZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoOTAsXG4xLGEsYik7Zy51cC5zZXQoMCwtMSwwKTtnLmxvb2tBdChuZXcgVEhSRUUuVmVjdG9yMygwLDAsMSkpO3RoaXMuYWRkKGcpO3ZhciBpPW5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSg5MCwxLGEsYik7aS51cC5zZXQoMCwtMSwwKTtpLmxvb2tBdChuZXcgVEhSRUUuVmVjdG9yMygwLDAsLTEpKTt0aGlzLmFkZChpKTt0aGlzLnJlbmRlclRhcmdldD1uZXcgVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXRDdWJlKGMsYyx7Zm9ybWF0OlRIUkVFLlJHQkZvcm1hdCxtYWdGaWx0ZXI6VEhSRUUuTGluZWFyRmlsdGVyLG1pbkZpbHRlcjpUSFJFRS5MaW5lYXJGaWx0ZXJ9KTt0aGlzLnVwZGF0ZUN1YmVNYXA9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnJlbmRlclRhcmdldCxwPWMuZ2VuZXJhdGVNaXBtYXBzO2MuZ2VuZXJhdGVNaXBtYXBzPSExO2MuYWN0aXZlQ3ViZUZhY2U9MDthLnJlbmRlcihiLGQsYyk7Yy5hY3RpdmVDdWJlRmFjZT0xO2EucmVuZGVyKGIsZSxjKTtjLmFjdGl2ZUN1YmVGYWNlPVxuMjthLnJlbmRlcihiLGYsYyk7Yy5hY3RpdmVDdWJlRmFjZT0zO2EucmVuZGVyKGIsaCxjKTtjLmFjdGl2ZUN1YmVGYWNlPTQ7YS5yZW5kZXIoYixnLGMpO2MuZ2VuZXJhdGVNaXBtYXBzPXA7Yy5hY3RpdmVDdWJlRmFjZT01O2EucmVuZGVyKGIsaSxjKX19O1RIUkVFLkN1YmVDYW1lcmEucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlKTtUSFJFRS5Db21iaW5lZENhbWVyYT1mdW5jdGlvbihhLGIsYyxkLGUsZixoKXtUSFJFRS5DYW1lcmEuY2FsbCh0aGlzKTt0aGlzLmZvdj1jO3RoaXMubGVmdD0tYS8yO3RoaXMucmlnaHQ9YS8yO3RoaXMudG9wPWIvMjt0aGlzLmJvdHRvbT0tYi8yO3RoaXMuY2FtZXJhTz1uZXcgVEhSRUUuT3J0aG9ncmFwaGljQ2FtZXJhKGEvLTIsYS8yLGIvMixiLy0yLGYsaCk7dGhpcy5jYW1lcmFQPW5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYShjLGEvYixkLGUpO3RoaXMuem9vbT0xO3RoaXMudG9QZXJzcGVjdGl2ZSgpfTtUSFJFRS5Db21iaW5lZENhbWVyYS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5DYW1lcmEucHJvdG90eXBlKTtcblRIUkVFLkNvbWJpbmVkQ2FtZXJhLnByb3RvdHlwZS50b1BlcnNwZWN0aXZlPWZ1bmN0aW9uKCl7dGhpcy5uZWFyPXRoaXMuY2FtZXJhUC5uZWFyO3RoaXMuZmFyPXRoaXMuY2FtZXJhUC5mYXI7dGhpcy5jYW1lcmFQLmZvdj10aGlzLmZvdi90aGlzLnpvb207dGhpcy5jYW1lcmFQLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTt0aGlzLnByb2plY3Rpb25NYXRyaXg9dGhpcy5jYW1lcmFQLnByb2plY3Rpb25NYXRyaXg7dGhpcy5pblBlcnNwZWN0aXZlTW9kZT0hMDt0aGlzLmluT3J0aG9ncmFwaGljTW9kZT0hMX07XG5USFJFRS5Db21iaW5lZENhbWVyYS5wcm90b3R5cGUudG9PcnRob2dyYXBoaWM9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmNhbWVyYVAuYXNwZWN0LGI9KHRoaXMuY2FtZXJhUC5uZWFyK3RoaXMuY2FtZXJhUC5mYXIpLzIsYj1NYXRoLnRhbih0aGlzLmZvdi8yKSpiLGE9MipiKmEvMixiPWIvdGhpcy56b29tLGE9YS90aGlzLnpvb207dGhpcy5jYW1lcmFPLmxlZnQ9LWE7dGhpcy5jYW1lcmFPLnJpZ2h0PWE7dGhpcy5jYW1lcmFPLnRvcD1iO3RoaXMuY2FtZXJhTy5ib3R0b209LWI7dGhpcy5jYW1lcmFPLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTt0aGlzLm5lYXI9dGhpcy5jYW1lcmFPLm5lYXI7dGhpcy5mYXI9dGhpcy5jYW1lcmFPLmZhcjt0aGlzLnByb2plY3Rpb25NYXRyaXg9dGhpcy5jYW1lcmFPLnByb2plY3Rpb25NYXRyaXg7dGhpcy5pblBlcnNwZWN0aXZlTW9kZT0hMTt0aGlzLmluT3J0aG9ncmFwaGljTW9kZT0hMH07XG5USFJFRS5Db21iaW5lZENhbWVyYS5wcm90b3R5cGUuc2V0U2l6ZT1mdW5jdGlvbihhLGIpe3RoaXMuY2FtZXJhUC5hc3BlY3Q9YS9iO3RoaXMubGVmdD0tYS8yO3RoaXMucmlnaHQ9YS8yO3RoaXMudG9wPWIvMjt0aGlzLmJvdHRvbT0tYi8yfTtUSFJFRS5Db21iaW5lZENhbWVyYS5wcm90b3R5cGUuc2V0Rm92PWZ1bmN0aW9uKGEpe3RoaXMuZm92PWE7dGhpcy5pblBlcnNwZWN0aXZlTW9kZT90aGlzLnRvUGVyc3BlY3RpdmUoKTp0aGlzLnRvT3J0aG9ncmFwaGljKCl9O1RIUkVFLkNvbWJpbmVkQ2FtZXJhLnByb3RvdHlwZS51cGRhdGVQcm9qZWN0aW9uTWF0cml4PWZ1bmN0aW9uKCl7dGhpcy5pblBlcnNwZWN0aXZlTW9kZT90aGlzLnRvUGVyc3BlY3RpdmUoKToodGhpcy50b1BlcnNwZWN0aXZlKCksdGhpcy50b09ydGhvZ3JhcGhpYygpKX07XG5USFJFRS5Db21iaW5lZENhbWVyYS5wcm90b3R5cGUuc2V0TGVucz1mdW5jdGlvbihhLGIpe3ZvaWQgMD09PWImJihiPTI0KTt2YXIgYz0yKlRIUkVFLk1hdGgucmFkVG9EZWcoTWF0aC5hdGFuKGIvKDIqYSkpKTt0aGlzLnNldEZvdihjKTtyZXR1cm4gY307VEhSRUUuQ29tYmluZWRDYW1lcmEucHJvdG90eXBlLnNldFpvb209ZnVuY3Rpb24oYSl7dGhpcy56b29tPWE7dGhpcy5pblBlcnNwZWN0aXZlTW9kZT90aGlzLnRvUGVyc3BlY3RpdmUoKTp0aGlzLnRvT3J0aG9ncmFwaGljKCl9O1RIUkVFLkNvbWJpbmVkQ2FtZXJhLnByb3RvdHlwZS50b0Zyb250Vmlldz1mdW5jdGlvbigpe3RoaXMucm90YXRpb24ueD0wO3RoaXMucm90YXRpb24ueT0wO3RoaXMucm90YXRpb24uej0wO3RoaXMucm90YXRpb25BdXRvVXBkYXRlPSExfTtcblRIUkVFLkNvbWJpbmVkQ2FtZXJhLnByb3RvdHlwZS50b0JhY2tWaWV3PWZ1bmN0aW9uKCl7dGhpcy5yb3RhdGlvbi54PTA7dGhpcy5yb3RhdGlvbi55PU1hdGguUEk7dGhpcy5yb3RhdGlvbi56PTA7dGhpcy5yb3RhdGlvbkF1dG9VcGRhdGU9ITF9O1RIUkVFLkNvbWJpbmVkQ2FtZXJhLnByb3RvdHlwZS50b0xlZnRWaWV3PWZ1bmN0aW9uKCl7dGhpcy5yb3RhdGlvbi54PTA7dGhpcy5yb3RhdGlvbi55PS1NYXRoLlBJLzI7dGhpcy5yb3RhdGlvbi56PTA7dGhpcy5yb3RhdGlvbkF1dG9VcGRhdGU9ITF9O1RIUkVFLkNvbWJpbmVkQ2FtZXJhLnByb3RvdHlwZS50b1JpZ2h0Vmlldz1mdW5jdGlvbigpe3RoaXMucm90YXRpb24ueD0wO3RoaXMucm90YXRpb24ueT1NYXRoLlBJLzI7dGhpcy5yb3RhdGlvbi56PTA7dGhpcy5yb3RhdGlvbkF1dG9VcGRhdGU9ITF9O1xuVEhSRUUuQ29tYmluZWRDYW1lcmEucHJvdG90eXBlLnRvVG9wVmlldz1mdW5jdGlvbigpe3RoaXMucm90YXRpb24ueD0tTWF0aC5QSS8yO3RoaXMucm90YXRpb24ueT0wO3RoaXMucm90YXRpb24uej0wO3RoaXMucm90YXRpb25BdXRvVXBkYXRlPSExfTtUSFJFRS5Db21iaW5lZENhbWVyYS5wcm90b3R5cGUudG9Cb3R0b21WaWV3PWZ1bmN0aW9uKCl7dGhpcy5yb3RhdGlvbi54PU1hdGguUEkvMjt0aGlzLnJvdGF0aW9uLnk9MDt0aGlzLnJvdGF0aW9uLno9MDt0aGlzLnJvdGF0aW9uQXV0b1VwZGF0ZT0hMX07VEhSRUUuQ2lyY2xlR2VvbWV0cnk9ZnVuY3Rpb24oYSxiLGMsZCl7VEhSRUUuR2VvbWV0cnkuY2FsbCh0aGlzKTt0aGlzLnJhZGl1cz1hPWF8fDUwO3RoaXMuc2VnbWVudHM9Yj12b2lkIDAhPT1iP01hdGgubWF4KDMsYik6ODt0aGlzLnRoZXRhU3RhcnQ9Yz12b2lkIDAhPT1jP2M6MDt0aGlzLnRoZXRhTGVuZ3RoPWQ9dm9pZCAwIT09ZD9kOjIqTWF0aC5QSTt2YXIgZSxmPVtdO2U9bmV3IFRIUkVFLlZlY3RvcjM7dmFyIGg9bmV3IFRIUkVFLlZlY3RvcjIoMC41LDAuNSk7dGhpcy52ZXJ0aWNlcy5wdXNoKGUpO2YucHVzaChoKTtmb3IoZT0wO2U8PWI7ZSsrKXt2YXIgZz1uZXcgVEhSRUUuVmVjdG9yMyxpPWMrZS9iKmQ7Zy54PWEqTWF0aC5jb3MoaSk7Zy55PWEqTWF0aC5zaW4oaSk7dGhpcy52ZXJ0aWNlcy5wdXNoKGcpO2YucHVzaChuZXcgVEhSRUUuVmVjdG9yMigoZy54L2ErMSkvMiwoZy55L2ErMSkvMikpfWM9bmV3IFRIUkVFLlZlY3RvcjMoMCwwLDEpO2ZvcihlPTE7ZTw9YjtlKyspdGhpcy5mYWNlcy5wdXNoKG5ldyBUSFJFRS5GYWNlMyhlLFxuZSsxLDAsW2MuY2xvbmUoKSxjLmNsb25lKCksYy5jbG9uZSgpXSkpLHRoaXMuZmFjZVZlcnRleFV2c1swXS5wdXNoKFtmW2VdLmNsb25lKCksZltlKzFdLmNsb25lKCksaC5jbG9uZSgpXSk7dGhpcy5jb21wdXRlQ2VudHJvaWRzKCk7dGhpcy5jb21wdXRlRmFjZU5vcm1hbHMoKTt0aGlzLmJvdW5kaW5nU3BoZXJlPW5ldyBUSFJFRS5TcGhlcmUobmV3IFRIUkVFLlZlY3RvcjMsYSl9O1RIUkVFLkNpcmNsZUdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuQ3ViZUdlb21ldHJ5PWZ1bmN0aW9uKGEsYixjLGQsZSxmKXtmdW5jdGlvbiBoKGEsYixjLGQsZSxmLGgscSl7dmFyIG4sdT1nLndpZHRoU2VnbWVudHMscj1nLmhlaWdodFNlZ21lbnRzLHY9ZS8yLHo9Zi8yLEc9Zy52ZXJ0aWNlcy5sZW5ndGg7aWYoXCJ4XCI9PT1hJiZcInlcIj09PWJ8fFwieVwiPT09YSYmXCJ4XCI9PT1iKW49XCJ6XCI7ZWxzZSBpZihcInhcIj09PWEmJlwielwiPT09Ynx8XCJ6XCI9PT1hJiZcInhcIj09PWIpbj1cInlcIixyPWcuZGVwdGhTZWdtZW50cztlbHNlIGlmKFwielwiPT09YSYmXCJ5XCI9PT1ifHxcInlcIj09PWEmJlwielwiPT09YiluPVwieFwiLHU9Zy5kZXB0aFNlZ21lbnRzO3ZhciB3PXUrMSx5PXIrMSxFPWUvdSxBPWYvcixLPW5ldyBUSFJFRS5WZWN0b3IzO0tbbl09MDxoPzE6LTE7Zm9yKGU9MDtlPHk7ZSsrKWZvcihmPTA7Zjx3O2YrKyl7dmFyIEQ9bmV3IFRIUkVFLlZlY3RvcjM7RFthXT0oZipFLXYpKmM7RFtiXT0oZSpBLXopKmQ7RFtuXT1oO2cudmVydGljZXMucHVzaChEKX1mb3IoZT1cbjA7ZTxyO2UrKylmb3IoZj0wO2Y8dTtmKyspej1mK3cqZSxhPWYrdyooZSsxKSxiPWYrMSt3KihlKzEpLGM9ZisxK3cqZSxkPW5ldyBUSFJFRS5WZWN0b3IyKGYvdSwxLWUvciksaD1uZXcgVEhSRUUuVmVjdG9yMihmL3UsMS0oZSsxKS9yKSxuPW5ldyBUSFJFRS5WZWN0b3IyKChmKzEpL3UsMS0oZSsxKS9yKSx2PW5ldyBUSFJFRS5WZWN0b3IyKChmKzEpL3UsMS1lL3IpLHo9bmV3IFRIUkVFLkZhY2UzKHorRyxhK0csYytHKSx6Lm5vcm1hbC5jb3B5KEspLHoudmVydGV4Tm9ybWFscy5wdXNoKEsuY2xvbmUoKSxLLmNsb25lKCksSy5jbG9uZSgpKSx6Lm1hdGVyaWFsSW5kZXg9cSxnLmZhY2VzLnB1c2goeiksZy5mYWNlVmVydGV4VXZzWzBdLnB1c2goW2QsaCx2XSksej1uZXcgVEhSRUUuRmFjZTMoYStHLGIrRyxjK0cpLHoubm9ybWFsLmNvcHkoSyksei52ZXJ0ZXhOb3JtYWxzLnB1c2goSy5jbG9uZSgpLEsuY2xvbmUoKSxLLmNsb25lKCkpLHoubWF0ZXJpYWxJbmRleD1xLGcuZmFjZXMucHVzaCh6KSxcbmcuZmFjZVZlcnRleFV2c1swXS5wdXNoKFtoLmNsb25lKCksbix2LmNsb25lKCldKX1USFJFRS5HZW9tZXRyeS5jYWxsKHRoaXMpO3ZhciBnPXRoaXM7dGhpcy53aWR0aD1hO3RoaXMuaGVpZ2h0PWI7dGhpcy5kZXB0aD1jO3RoaXMud2lkdGhTZWdtZW50cz1kfHwxO3RoaXMuaGVpZ2h0U2VnbWVudHM9ZXx8MTt0aGlzLmRlcHRoU2VnbWVudHM9Znx8MTthPXRoaXMud2lkdGgvMjtiPXRoaXMuaGVpZ2h0LzI7Yz10aGlzLmRlcHRoLzI7aChcInpcIixcInlcIiwtMSwtMSx0aGlzLmRlcHRoLHRoaXMuaGVpZ2h0LGEsMCk7aChcInpcIixcInlcIiwxLC0xLHRoaXMuZGVwdGgsdGhpcy5oZWlnaHQsLWEsMSk7aChcInhcIixcInpcIiwxLDEsdGhpcy53aWR0aCx0aGlzLmRlcHRoLGIsMik7aChcInhcIixcInpcIiwxLC0xLHRoaXMud2lkdGgsdGhpcy5kZXB0aCwtYiwzKTtoKFwieFwiLFwieVwiLDEsLTEsdGhpcy53aWR0aCx0aGlzLmhlaWdodCxjLDQpO2goXCJ4XCIsXCJ5XCIsLTEsLTEsdGhpcy53aWR0aCx0aGlzLmhlaWdodCwtYyxcbjUpO3RoaXMuY29tcHV0ZUNlbnRyb2lkcygpO3RoaXMubWVyZ2VWZXJ0aWNlcygpfTtUSFJFRS5DdWJlR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5DeWxpbmRlckdlb21ldHJ5PWZ1bmN0aW9uKGEsYixjLGQsZSxmKXtUSFJFRS5HZW9tZXRyeS5jYWxsKHRoaXMpO3RoaXMucmFkaXVzVG9wPWE9dm9pZCAwIT09YT9hOjIwO3RoaXMucmFkaXVzQm90dG9tPWI9dm9pZCAwIT09Yj9iOjIwO3RoaXMuaGVpZ2h0PWM9dm9pZCAwIT09Yz9jOjEwMDt0aGlzLnJhZGlhbFNlZ21lbnRzPWQ9ZHx8ODt0aGlzLmhlaWdodFNlZ21lbnRzPWU9ZXx8MTt0aGlzLm9wZW5FbmRlZD1mPXZvaWQgMCE9PWY/ZjohMTt2YXIgaD1jLzIsZyxpLGs9W10sbT1bXTtmb3IoaT0wO2k8PWU7aSsrKXt2YXIgbD1bXSxwPVtdLHQ9aS9lLHM9dCooYi1hKSthO2ZvcihnPTA7Zzw9ZDtnKyspe3ZhciBxPWcvZCxuPW5ldyBUSFJFRS5WZWN0b3IzO24ueD1zKk1hdGguc2luKDIqcSpNYXRoLlBJKTtuLnk9LXQqYytoO24uej1zKk1hdGguY29zKDIqcSpNYXRoLlBJKTt0aGlzLnZlcnRpY2VzLnB1c2gobik7bC5wdXNoKHRoaXMudmVydGljZXMubGVuZ3RoLTEpO3AucHVzaChuZXcgVEhSRUUuVmVjdG9yMihxLFxuMS10KSl9ay5wdXNoKGwpO20ucHVzaChwKX1jPShiLWEpL2M7Zm9yKGc9MDtnPGQ7ZysrKXswIT09YT8obD10aGlzLnZlcnRpY2VzW2tbMF1bZ11dLmNsb25lKCkscD10aGlzLnZlcnRpY2VzW2tbMF1bZysxXV0uY2xvbmUoKSk6KGw9dGhpcy52ZXJ0aWNlc1trWzFdW2ddXS5jbG9uZSgpLHA9dGhpcy52ZXJ0aWNlc1trWzFdW2crMV1dLmNsb25lKCkpO2wuc2V0WShNYXRoLnNxcnQobC54KmwueCtsLnoqbC56KSpjKS5ub3JtYWxpemUoKTtwLnNldFkoTWF0aC5zcXJ0KHAueCpwLngrcC56KnAueikqYykubm9ybWFsaXplKCk7Zm9yKGk9MDtpPGU7aSsrKXt2YXIgdD1rW2ldW2ddLHM9a1tpKzFdW2ddLHE9a1tpKzFdW2crMV0sbj1rW2ldW2crMV0sdT1sLmNsb25lKCkscj1sLmNsb25lKCksdj1wLmNsb25lKCksej1wLmNsb25lKCksRz1tW2ldW2ddLmNsb25lKCksdz1tW2krMV1bZ10uY2xvbmUoKSx5PW1baSsxXVtnKzFdLmNsb25lKCksRT1tW2ldW2crMV0uY2xvbmUoKTt0aGlzLmZhY2VzLnB1c2gobmV3IFRIUkVFLkZhY2UzKHQsXG5zLG4sW3Uscix6XSkpO3RoaXMuZmFjZVZlcnRleFV2c1swXS5wdXNoKFtHLHcsRV0pO3RoaXMuZmFjZXMucHVzaChuZXcgVEhSRUUuRmFjZTMocyxxLG4sW3IuY2xvbmUoKSx2LHouY2xvbmUoKV0pKTt0aGlzLmZhY2VWZXJ0ZXhVdnNbMF0ucHVzaChbdy5jbG9uZSgpLHksRS5jbG9uZSgpXSl9fWlmKCExPT09ZiYmMDxhKXt0aGlzLnZlcnRpY2VzLnB1c2gobmV3IFRIUkVFLlZlY3RvcjMoMCxoLDApKTtmb3IoZz0wO2c8ZDtnKyspdD1rWzBdW2ddLHM9a1swXVtnKzFdLHE9dGhpcy52ZXJ0aWNlcy5sZW5ndGgtMSx1PW5ldyBUSFJFRS5WZWN0b3IzKDAsMSwwKSxyPW5ldyBUSFJFRS5WZWN0b3IzKDAsMSwwKSx2PW5ldyBUSFJFRS5WZWN0b3IzKDAsMSwwKSxHPW1bMF1bZ10uY2xvbmUoKSx3PW1bMF1bZysxXS5jbG9uZSgpLHk9bmV3IFRIUkVFLlZlY3RvcjIody54LDApLHRoaXMuZmFjZXMucHVzaChuZXcgVEhSRUUuRmFjZTModCxzLHEsW3Uscix2XSkpLHRoaXMuZmFjZVZlcnRleFV2c1swXS5wdXNoKFtHLFxudyx5XSl9aWYoITE9PT1mJiYwPGIpe3RoaXMudmVydGljZXMucHVzaChuZXcgVEhSRUUuVmVjdG9yMygwLC1oLDApKTtmb3IoZz0wO2c8ZDtnKyspdD1rW2ldW2crMV0scz1rW2ldW2ddLHE9dGhpcy52ZXJ0aWNlcy5sZW5ndGgtMSx1PW5ldyBUSFJFRS5WZWN0b3IzKDAsLTEsMCkscj1uZXcgVEhSRUUuVmVjdG9yMygwLC0xLDApLHY9bmV3IFRIUkVFLlZlY3RvcjMoMCwtMSwwKSxHPW1baV1bZysxXS5jbG9uZSgpLHc9bVtpXVtnXS5jbG9uZSgpLHk9bmV3IFRIUkVFLlZlY3RvcjIody54LDEpLHRoaXMuZmFjZXMucHVzaChuZXcgVEhSRUUuRmFjZTModCxzLHEsW3Uscix2XSkpLHRoaXMuZmFjZVZlcnRleFV2c1swXS5wdXNoKFtHLHcseV0pfXRoaXMuY29tcHV0ZUNlbnRyb2lkcygpO3RoaXMuY29tcHV0ZUZhY2VOb3JtYWxzKCl9O1RIUkVFLkN5bGluZGVyR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5FeHRydWRlR2VvbWV0cnk9ZnVuY3Rpb24oYSxiKXtcInVuZGVmaW5lZFwiIT09dHlwZW9mIGEmJihUSFJFRS5HZW9tZXRyeS5jYWxsKHRoaXMpLGE9YSBpbnN0YW5jZW9mIEFycmF5P2E6W2FdLHRoaXMuc2hhcGViYj1hW2EubGVuZ3RoLTFdLmdldEJvdW5kaW5nQm94KCksdGhpcy5hZGRTaGFwZUxpc3QoYSxiKSx0aGlzLmNvbXB1dGVDZW50cm9pZHMoKSx0aGlzLmNvbXB1dGVGYWNlTm9ybWFscygpKX07VEhSRUUuRXh0cnVkZUdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuRXh0cnVkZUdlb21ldHJ5LnByb3RvdHlwZS5hZGRTaGFwZUxpc3Q9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9YS5sZW5ndGgsZD0wO2Q8YztkKyspdGhpcy5hZGRTaGFwZShhW2RdLGIpfTtcblRIUkVFLkV4dHJ1ZGVHZW9tZXRyeS5wcm90b3R5cGUuYWRkU2hhcGU9ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEsYixjKXtifHxjb25zb2xlLmxvZyhcImRpZVwiKTtyZXR1cm4gYi5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKGMpLmFkZChhKX1mdW5jdGlvbiBkKGEsYixjKXt2YXIgZD1USFJFRS5FeHRydWRlR2VvbWV0cnkuX192MSxlPVRIUkVFLkV4dHJ1ZGVHZW9tZXRyeS5fX3YyLGY9VEhSRUUuRXh0cnVkZUdlb21ldHJ5Ll9fdjMsZz1USFJFRS5FeHRydWRlR2VvbWV0cnkuX192NCxoPVRIUkVFLkV4dHJ1ZGVHZW9tZXRyeS5fX3Y1LGk9VEhSRUUuRXh0cnVkZUdlb21ldHJ5Ll9fdjY7ZC5zZXQoYS54LWIueCxhLnktYi55KTtlLnNldChhLngtYy54LGEueS1jLnkpO2Q9ZC5ub3JtYWxpemUoKTtlPWUubm9ybWFsaXplKCk7Zi5zZXQoLWQueSxkLngpO2cuc2V0KGUueSwtZS54KTtoLmNvcHkoYSkuYWRkKGYpO2kuY29weShhKS5hZGQoZyk7aWYoaC5lcXVhbHMoaSkpcmV0dXJuIGcuY2xvbmUoKTtcbmguY29weShiKS5hZGQoZik7aS5jb3B5KGMpLmFkZChnKTtmPWQuZG90KGcpO2c9aS5zdWIoaCkuZG90KGcpOzA9PT1mJiYoY29uc29sZS5sb2coXCJFaXRoZXIgaW5maW5pdGUgb3Igbm8gc29sdXRpb25zIVwiKSwwPT09Zz9jb25zb2xlLmxvZyhcIkl0cyBmaW5pdGUgc29sdXRpb25zLlwiKTpjb25zb2xlLmxvZyhcIlRvbyBiYWQsIG5vIHNvbHV0aW9ucy5cIikpO2cvPWY7cmV0dXJuIDA+Zz8oYj1NYXRoLmF0YW4yKGIueS1hLnksYi54LWEueCksYT1NYXRoLmF0YW4yKGMueS1hLnksYy54LWEueCksYj5hJiYoYSs9MipNYXRoLlBJKSxjPShiK2EpLzIsYT0tTWF0aC5jb3MoYyksYz0tTWF0aC5zaW4oYyksbmV3IFRIUkVFLlZlY3RvcjIoYSxjKSk6ZC5tdWx0aXBseVNjYWxhcihnKS5hZGQoaCkuc3ViKGEpLmNsb25lKCl9ZnVuY3Rpb24gZShjLGQpe3ZhciBlLGY7Zm9yKEM9Yy5sZW5ndGg7MDw9LS1DOyl7ZT1DO2Y9Qy0xOzA+ZiYmKGY9Yy5sZW5ndGgtMSk7Zm9yKHZhciBnPTAsaD10KzIqbSxcbmc9MDtnPGg7ZysrKXt2YXIgaT1jYSpnLGs9Y2EqKGcrMSksbD1kK2UraSxpPWQrZitpLG49ZCtmK2ssaz1kK2UrayxwPWMscT1nLHM9aCx1PWUsdz1mLGw9bCtGLGk9aStGLG49bitGLGs9aytGO0QuZmFjZXMucHVzaChuZXcgVEhSRUUuRmFjZTMobCxpLGssbnVsbCxudWxsLHIpKTtELmZhY2VzLnB1c2gobmV3IFRIUkVFLkZhY2UzKGksbixrLG51bGwsbnVsbCxyKSk7bD12LmdlbmVyYXRlU2lkZVdhbGxVVihELGEscCxiLGwsaSxuLGsscSxzLHUsdyk7RC5mYWNlVmVydGV4VXZzWzBdLnB1c2goW2xbMF0sbFsxXSxsWzNdXSk7RC5mYWNlVmVydGV4VXZzWzBdLnB1c2goW2xbMV0sbFsyXSxsWzNdXSl9fX1mdW5jdGlvbiBmKGEsYixjKXtELnZlcnRpY2VzLnB1c2gobmV3IFRIUkVFLlZlY3RvcjMoYSxiLGMpKX1mdW5jdGlvbiBoKGMsZCxlLGYpe2MrPUY7ZCs9RjtlKz1GO0QuZmFjZXMucHVzaChuZXcgVEhSRUUuRmFjZTMoYyxkLGUsbnVsbCxudWxsLHUpKTtjPWY/di5nZW5lcmF0ZUJvdHRvbVVWKEQsXG5hLGIsYyxkLGUpOnYuZ2VuZXJhdGVUb3BVVihELGEsYixjLGQsZSk7RC5mYWNlVmVydGV4VXZzWzBdLnB1c2goYyl9dmFyIGc9dm9pZCAwIT09Yi5hbW91bnQ/Yi5hbW91bnQ6MTAwLGk9dm9pZCAwIT09Yi5iZXZlbFRoaWNrbmVzcz9iLmJldmVsVGhpY2tuZXNzOjYsaz12b2lkIDAhPT1iLmJldmVsU2l6ZT9iLmJldmVsU2l6ZTppLTIsbT12b2lkIDAhPT1iLmJldmVsU2VnbWVudHM/Yi5iZXZlbFNlZ21lbnRzOjMsbD12b2lkIDAhPT1iLmJldmVsRW5hYmxlZD9iLmJldmVsRW5hYmxlZDohMCxwPXZvaWQgMCE9PWIuY3VydmVTZWdtZW50cz9iLmN1cnZlU2VnbWVudHM6MTIsdD12b2lkIDAhPT1iLnN0ZXBzP2Iuc3RlcHM6MSxzPWIuZXh0cnVkZVBhdGgscSxuPSExLHU9Yi5tYXRlcmlhbCxyPWIuZXh0cnVkZU1hdGVyaWFsLHY9dm9pZCAwIT09Yi5VVkdlbmVyYXRvcj9iLlVWR2VuZXJhdG9yOlRIUkVFLkV4dHJ1ZGVHZW9tZXRyeS5Xb3JsZFVWR2VuZXJhdG9yLHosRyx3LHk7cyYmKHE9XG5zLmdldFNwYWNlZFBvaW50cyh0KSxuPSEwLGw9ITEsej12b2lkIDAhPT1iLmZyYW1lcz9iLmZyYW1lczpuZXcgVEhSRUUuVHViZUdlb21ldHJ5LkZyZW5ldEZyYW1lcyhzLHQsITEpLEc9bmV3IFRIUkVFLlZlY3RvcjMsdz1uZXcgVEhSRUUuVmVjdG9yMyx5PW5ldyBUSFJFRS5WZWN0b3IzKTtsfHwoaz1pPW09MCk7dmFyIEUsQSxLLEQ9dGhpcyxGPXRoaXMudmVydGljZXMubGVuZ3RoLHA9YS5leHRyYWN0UG9pbnRzKHApLE89cC5zaGFwZSxwPXAuaG9sZXM7aWYocz0hVEhSRUUuU2hhcGUuVXRpbHMuaXNDbG9ja1dpc2UoTykpe089Ty5yZXZlcnNlKCk7QT0wO2ZvcihLPXAubGVuZ3RoO0E8SztBKyspRT1wW0FdLFRIUkVFLlNoYXBlLlV0aWxzLmlzQ2xvY2tXaXNlKEUpJiYocFtBXT1FLnJldmVyc2UoKSk7cz0hMX12YXIgeD1USFJFRS5TaGFwZS5VdGlscy50cmlhbmd1bGF0ZVNoYXBlKE8scCkscz1PO0E9MDtmb3IoSz1wLmxlbmd0aDtBPEs7QSsrKUU9cFtBXSxPPU8uY29uY2F0KEUpO1xudmFyIEksQixNLEosY2E9Ty5sZW5ndGgsbmE9eC5sZW5ndGgscGE9W10sQz0wLFE9cy5sZW5ndGg7ST1RLTE7Zm9yKEI9QysxO0M8UTtDKyssSSsrLEIrKylJPT09USYmKEk9MCksQj09PVEmJihCPTApLHBhW0NdPWQoc1tDXSxzW0ldLHNbQl0pO3ZhciBSPVtdLEwsZGE9cGEuY29uY2F0KCk7QT0wO2ZvcihLPXAubGVuZ3RoO0E8SztBKyspe0U9cFtBXTtMPVtdO0M9MDtRPUUubGVuZ3RoO0k9US0xO2ZvcihCPUMrMTtDPFE7QysrLEkrKyxCKyspST09PVEmJihJPTApLEI9PT1RJiYoQj0wKSxMW0NdPWQoRVtDXSxFW0ldLEVbQl0pO1IucHVzaChMKTtkYT1kYS5jb25jYXQoTCl9Zm9yKEk9MDtJPG07SSsrKXtFPUkvbTtNPWkqKDEtRSk7Qj1rKk1hdGguc2luKEUqTWF0aC5QSS8yKTtDPTA7Zm9yKFE9cy5sZW5ndGg7QzxRO0MrKylKPWMoc1tDXSxwYVtDXSxCKSxmKEoueCxKLnksLU0pO0E9MDtmb3IoSz1wLmxlbmd0aDtBPEs7QSsrKXtFPXBbQV07TD1SW0FdO0M9MDtmb3IoUT1FLmxlbmd0aDtDPFxuUTtDKyspSj1jKEVbQ10sTFtDXSxCKSxmKEoueCxKLnksLU0pfX1CPWs7Zm9yKEM9MDtDPGNhO0MrKylKPWw/YyhPW0NdLGRhW0NdLEIpOk9bQ10sbj8ody5jb3B5KHoubm9ybWFsc1swXSkubXVsdGlwbHlTY2FsYXIoSi54KSxHLmNvcHkoei5iaW5vcm1hbHNbMF0pLm11bHRpcGx5U2NhbGFyKEoueSkseS5jb3B5KHFbMF0pLmFkZCh3KS5hZGQoRyksZih5LngseS55LHkueikpOmYoSi54LEoueSwwKTtmb3IoRT0xO0U8PXQ7RSsrKWZvcihDPTA7QzxjYTtDKyspSj1sP2MoT1tDXSxkYVtDXSxCKTpPW0NdLG4/KHcuY29weSh6Lm5vcm1hbHNbRV0pLm11bHRpcGx5U2NhbGFyKEoueCksRy5jb3B5KHouYmlub3JtYWxzW0VdKS5tdWx0aXBseVNjYWxhcihKLnkpLHkuY29weShxW0VdKS5hZGQodykuYWRkKEcpLGYoeS54LHkueSx5LnopKTpmKEoueCxKLnksZy90KkUpO2ZvcihJPW0tMTswPD1JO0ktLSl7RT1JL207TT1pKigxLUUpO0I9aypNYXRoLnNpbihFKk1hdGguUEkvMik7Qz0wO2ZvcihRPVxucy5sZW5ndGg7QzxRO0MrKylKPWMoc1tDXSxwYVtDXSxCKSxmKEoueCxKLnksZytNKTtBPTA7Zm9yKEs9cC5sZW5ndGg7QTxLO0ErKyl7RT1wW0FdO0w9UltBXTtDPTA7Zm9yKFE9RS5sZW5ndGg7QzxRO0MrKylKPWMoRVtDXSxMW0NdLEIpLG4/ZihKLngsSi55K3FbdC0xXS55LHFbdC0xXS54K00pOmYoSi54LEoueSxnK00pfX1pZihsKXtpPTAqY2E7Zm9yKEM9MDtDPG5hO0MrKylnPXhbQ10saChnWzJdK2ksZ1sxXStpLGdbMF0raSwhMCk7aT1jYSoodCsyKm0pO2ZvcihDPTA7QzxuYTtDKyspZz14W0NdLGgoZ1swXStpLGdbMV0raSxnWzJdK2ksITEpfWVsc2V7Zm9yKEM9MDtDPG5hO0MrKylnPXhbQ10saChnWzJdLGdbMV0sZ1swXSwhMCk7Zm9yKEM9MDtDPG5hO0MrKylnPXhbQ10saChnWzBdK2NhKnQsZ1sxXStjYSp0LGdbMl0rY2EqdCwhMSl9Zz0wO2UocyxnKTtnKz1zLmxlbmd0aDtBPTA7Zm9yKEs9cC5sZW5ndGg7QTxLO0ErKylFPXBbQV0sZShFLGcpLGcrPUUubGVuZ3RofTtcblRIUkVFLkV4dHJ1ZGVHZW9tZXRyeS5Xb3JsZFVWR2VuZXJhdG9yPXtnZW5lcmF0ZVRvcFVWOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXtiPWEudmVydGljZXNbZV0ueDtlPWEudmVydGljZXNbZV0ueTtjPWEudmVydGljZXNbZl0ueDtmPWEudmVydGljZXNbZl0ueTtyZXR1cm5bbmV3IFRIUkVFLlZlY3RvcjIoYS52ZXJ0aWNlc1tkXS54LGEudmVydGljZXNbZF0ueSksbmV3IFRIUkVFLlZlY3RvcjIoYixlKSxuZXcgVEhSRUUuVmVjdG9yMihjLGYpXX0sZ2VuZXJhdGVCb3R0b21VVjpmdW5jdGlvbihhLGIsYyxkLGUsZil7cmV0dXJuIHRoaXMuZ2VuZXJhdGVUb3BVVihhLGIsYyxkLGUsZil9LGdlbmVyYXRlU2lkZVdhbGxVVjpmdW5jdGlvbihhLGIsYyxkLGUsZixoLGcpe3ZhciBiPWEudmVydGljZXNbZV0ueCxjPWEudmVydGljZXNbZV0ueSxlPWEudmVydGljZXNbZV0ueixkPWEudmVydGljZXNbZl0ueCxpPWEudmVydGljZXNbZl0ueSxmPWEudmVydGljZXNbZl0ueixrPWEudmVydGljZXNbaF0ueCxcbm09YS52ZXJ0aWNlc1toXS55LGg9YS52ZXJ0aWNlc1toXS56LGw9YS52ZXJ0aWNlc1tnXS54LHA9YS52ZXJ0aWNlc1tnXS55LGE9YS52ZXJ0aWNlc1tnXS56O3JldHVybiAwLjAxPk1hdGguYWJzKGMtaSk/W25ldyBUSFJFRS5WZWN0b3IyKGIsMS1lKSxuZXcgVEhSRUUuVmVjdG9yMihkLDEtZiksbmV3IFRIUkVFLlZlY3RvcjIoaywxLWgpLG5ldyBUSFJFRS5WZWN0b3IyKGwsMS1hKV06W25ldyBUSFJFRS5WZWN0b3IyKGMsMS1lKSxuZXcgVEhSRUUuVmVjdG9yMihpLDEtZiksbmV3IFRIUkVFLlZlY3RvcjIobSwxLWgpLG5ldyBUSFJFRS5WZWN0b3IyKHAsMS1hKV19fTtUSFJFRS5FeHRydWRlR2VvbWV0cnkuX192MT1uZXcgVEhSRUUuVmVjdG9yMjtUSFJFRS5FeHRydWRlR2VvbWV0cnkuX192Mj1uZXcgVEhSRUUuVmVjdG9yMjtUSFJFRS5FeHRydWRlR2VvbWV0cnkuX192Mz1uZXcgVEhSRUUuVmVjdG9yMjtUSFJFRS5FeHRydWRlR2VvbWV0cnkuX192ND1uZXcgVEhSRUUuVmVjdG9yMjtcblRIUkVFLkV4dHJ1ZGVHZW9tZXRyeS5fX3Y1PW5ldyBUSFJFRS5WZWN0b3IyO1RIUkVFLkV4dHJ1ZGVHZW9tZXRyeS5fX3Y2PW5ldyBUSFJFRS5WZWN0b3IyO1RIUkVFLlNoYXBlR2VvbWV0cnk9ZnVuY3Rpb24oYSxiKXtUSFJFRS5HZW9tZXRyeS5jYWxsKHRoaXMpOyExPT09YSBpbnN0YW5jZW9mIEFycmF5JiYoYT1bYV0pO3RoaXMuc2hhcGViYj1hW2EubGVuZ3RoLTFdLmdldEJvdW5kaW5nQm94KCk7dGhpcy5hZGRTaGFwZUxpc3QoYSxiKTt0aGlzLmNvbXB1dGVDZW50cm9pZHMoKTt0aGlzLmNvbXB1dGVGYWNlTm9ybWFscygpfTtUSFJFRS5TaGFwZUdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuU2hhcGVHZW9tZXRyeS5wcm90b3R5cGUuYWRkU2hhcGVMaXN0PWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtjPGQ7YysrKXRoaXMuYWRkU2hhcGUoYVtjXSxiKTtyZXR1cm4gdGhpc307XG5USFJFRS5TaGFwZUdlb21ldHJ5LnByb3RvdHlwZS5hZGRTaGFwZT1mdW5jdGlvbihhLGIpe3ZvaWQgMD09PWImJihiPXt9KTt2YXIgYz1iLm1hdGVyaWFsLGQ9dm9pZCAwPT09Yi5VVkdlbmVyYXRvcj9USFJFRS5FeHRydWRlR2VvbWV0cnkuV29ybGRVVkdlbmVyYXRvcjpiLlVWR2VuZXJhdG9yLGUsZixoLGc9dGhpcy52ZXJ0aWNlcy5sZW5ndGg7ZT1hLmV4dHJhY3RQb2ludHModm9pZCAwIT09Yi5jdXJ2ZVNlZ21lbnRzP2IuY3VydmVTZWdtZW50czoxMik7dmFyIGk9ZS5zaGFwZSxrPWUuaG9sZXM7aWYoIVRIUkVFLlNoYXBlLlV0aWxzLmlzQ2xvY2tXaXNlKGkpKXtpPWkucmV2ZXJzZSgpO2U9MDtmb3IoZj1rLmxlbmd0aDtlPGY7ZSsrKWg9a1tlXSxUSFJFRS5TaGFwZS5VdGlscy5pc0Nsb2NrV2lzZShoKSYmKGtbZV09aC5yZXZlcnNlKCkpfXZhciBtPVRIUkVFLlNoYXBlLlV0aWxzLnRyaWFuZ3VsYXRlU2hhcGUoaSxrKTtlPTA7Zm9yKGY9ay5sZW5ndGg7ZTxmO2UrKyloPWtbZV0sXG5pPWkuY29uY2F0KGgpO2s9aS5sZW5ndGg7Zj1tLmxlbmd0aDtmb3IoZT0wO2U8aztlKyspaD1pW2VdLHRoaXMudmVydGljZXMucHVzaChuZXcgVEhSRUUuVmVjdG9yMyhoLngsaC55LDApKTtmb3IoZT0wO2U8ZjtlKyspaz1tW2VdLGk9a1swXStnLGg9a1sxXStnLGs9a1syXStnLHRoaXMuZmFjZXMucHVzaChuZXcgVEhSRUUuRmFjZTMoaSxoLGssbnVsbCxudWxsLGMpKSx0aGlzLmZhY2VWZXJ0ZXhVdnNbMF0ucHVzaChkLmdlbmVyYXRlQm90dG9tVVYodGhpcyxhLGIsaSxoLGspKX07VEhSRUUuTGF0aGVHZW9tZXRyeT1mdW5jdGlvbihhLGIsYyxkKXtUSFJFRS5HZW9tZXRyeS5jYWxsKHRoaXMpO2Zvcih2YXIgYj1ifHwxMixjPWN8fDAsZD1kfHwyKk1hdGguUEksZT0xLyhhLmxlbmd0aC0xKSxmPTEvYixoPTAsZz1iO2g8PWc7aCsrKWZvcih2YXIgaT1jK2gqZipkLGs9TWF0aC5jb3MoaSksbT1NYXRoLnNpbihpKSxpPTAsbD1hLmxlbmd0aDtpPGw7aSsrKXt2YXIgcD1hW2ldLHQ9bmV3IFRIUkVFLlZlY3RvcjM7dC54PWsqcC54LW0qcC55O3QueT1tKnAueCtrKnAueTt0Lno9cC56O3RoaXMudmVydGljZXMucHVzaCh0KX1jPWEubGVuZ3RoO2g9MDtmb3IoZz1iO2g8ZztoKyspe2k9MDtmb3IobD1hLmxlbmd0aC0xO2k8bDtpKyspe3ZhciBiPW09aStjKmgsZD1tK2Msaz1tKzErYyxtPW0rMSxwPWgqZix0PWkqZSxzPXArZixxPXQrZTt0aGlzLmZhY2VzLnB1c2gobmV3IFRIUkVFLkZhY2UzKGIsZCxtKSk7dGhpcy5mYWNlVmVydGV4VXZzWzBdLnB1c2goW25ldyBUSFJFRS5WZWN0b3IyKHAsXG50KSxuZXcgVEhSRUUuVmVjdG9yMihzLHQpLG5ldyBUSFJFRS5WZWN0b3IyKHAscSldKTt0aGlzLmZhY2VzLnB1c2gobmV3IFRIUkVFLkZhY2UzKGQsayxtKSk7dGhpcy5mYWNlVmVydGV4VXZzWzBdLnB1c2goW25ldyBUSFJFRS5WZWN0b3IyKHMsdCksbmV3IFRIUkVFLlZlY3RvcjIocyxxKSxuZXcgVEhSRUUuVmVjdG9yMihwLHEpXSl9fXRoaXMubWVyZ2VWZXJ0aWNlcygpO3RoaXMuY29tcHV0ZUNlbnRyb2lkcygpO3RoaXMuY29tcHV0ZUZhY2VOb3JtYWxzKCk7dGhpcy5jb21wdXRlVmVydGV4Tm9ybWFscygpfTtUSFJFRS5MYXRoZUdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuUGxhbmVHZW9tZXRyeT1mdW5jdGlvbihhLGIsYyxkKXtUSFJFRS5HZW9tZXRyeS5jYWxsKHRoaXMpO3RoaXMud2lkdGg9YTt0aGlzLmhlaWdodD1iO3RoaXMud2lkdGhTZWdtZW50cz1jfHwxO3RoaXMuaGVpZ2h0U2VnbWVudHM9ZHx8MTtmb3IodmFyIGU9YS8yLGY9Yi8yLGM9dGhpcy53aWR0aFNlZ21lbnRzLGQ9dGhpcy5oZWlnaHRTZWdtZW50cyxoPWMrMSxnPWQrMSxpPXRoaXMud2lkdGgvYyxrPXRoaXMuaGVpZ2h0L2QsbT1uZXcgVEhSRUUuVmVjdG9yMygwLDAsMSksYT0wO2E8ZzthKyspZm9yKGI9MDtiPGg7YisrKXRoaXMudmVydGljZXMucHVzaChuZXcgVEhSRUUuVmVjdG9yMyhiKmktZSwtKGEqay1mKSwwKSk7Zm9yKGE9MDthPGQ7YSsrKWZvcihiPTA7YjxjO2IrKyl7dmFyIGw9YitoKmEsZT1iK2gqKGErMSksZj1iKzEraCooYSsxKSxnPWIrMStoKmEsaT1uZXcgVEhSRUUuVmVjdG9yMihiL2MsMS1hL2QpLGs9bmV3IFRIUkVFLlZlY3RvcjIoYi9jLDEtKGErMSkvXG5kKSxwPW5ldyBUSFJFRS5WZWN0b3IyKChiKzEpL2MsMS0oYSsxKS9kKSx0PW5ldyBUSFJFRS5WZWN0b3IyKChiKzEpL2MsMS1hL2QpLGw9bmV3IFRIUkVFLkZhY2UzKGwsZSxnKTtsLm5vcm1hbC5jb3B5KG0pO2wudmVydGV4Tm9ybWFscy5wdXNoKG0uY2xvbmUoKSxtLmNsb25lKCksbS5jbG9uZSgpKTt0aGlzLmZhY2VzLnB1c2gobCk7dGhpcy5mYWNlVmVydGV4VXZzWzBdLnB1c2goW2ksayx0XSk7bD1uZXcgVEhSRUUuRmFjZTMoZSxmLGcpO2wubm9ybWFsLmNvcHkobSk7bC52ZXJ0ZXhOb3JtYWxzLnB1c2gobS5jbG9uZSgpLG0uY2xvbmUoKSxtLmNsb25lKCkpO3RoaXMuZmFjZXMucHVzaChsKTt0aGlzLmZhY2VWZXJ0ZXhVdnNbMF0ucHVzaChbay5jbG9uZSgpLHAsdC5jbG9uZSgpXSl9dGhpcy5jb21wdXRlQ2VudHJvaWRzKCl9O1RIUkVFLlBsYW5lR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5SaW5nR2VvbWV0cnk9ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe1RIUkVFLkdlb21ldHJ5LmNhbGwodGhpcyk7Zm9yKHZhciBhPWF8fDAsYj1ifHw1MCxlPXZvaWQgMCE9PWU/ZTowLGY9dm9pZCAwIT09Zj9mOjIqTWF0aC5QSSxjPXZvaWQgMCE9PWM/TWF0aC5tYXgoMyxjKTo4LGQ9dm9pZCAwIT09ZD9NYXRoLm1heCgzLGQpOjgsaCxnPVtdLGk9YSxrPShiLWEpL2QsYT0wO2E8PWQ7YSsrKXtmb3IoaD0wO2g8PWM7aCsrKXt2YXIgbT1uZXcgVEhSRUUuVmVjdG9yMyxsPWUraC9jKmY7bS54PWkqTWF0aC5jb3MobCk7bS55PWkqTWF0aC5zaW4obCk7dGhpcy52ZXJ0aWNlcy5wdXNoKG0pO2cucHVzaChuZXcgVEhSRUUuVmVjdG9yMigobS54L2IrMSkvMiwobS55L2IrMSkvMikpfWkrPWt9Yj1uZXcgVEhSRUUuVmVjdG9yMygwLDAsMSk7Zm9yKGE9MDthPGQ7YSsrKXtlPWEqYztmb3IoaD0wO2g8PWM7aCsrKWw9aCtlLGY9bCthLGs9bCtjK2EsbT1sK2MrMSthLHRoaXMuZmFjZXMucHVzaChuZXcgVEhSRUUuRmFjZTMoZixcbmssbSxbYi5jbG9uZSgpLGIuY2xvbmUoKSxiLmNsb25lKCldKSksdGhpcy5mYWNlVmVydGV4VXZzWzBdLnB1c2goW2dbZl0uY2xvbmUoKSxnW2tdLmNsb25lKCksZ1ttXS5jbG9uZSgpXSksZj1sK2Esaz1sK2MrMSthLG09bCsxK2EsdGhpcy5mYWNlcy5wdXNoKG5ldyBUSFJFRS5GYWNlMyhmLGssbSxbYi5jbG9uZSgpLGIuY2xvbmUoKSxiLmNsb25lKCldKSksdGhpcy5mYWNlVmVydGV4VXZzWzBdLnB1c2goW2dbZl0uY2xvbmUoKSxnW2tdLmNsb25lKCksZ1ttXS5jbG9uZSgpXSl9dGhpcy5jb21wdXRlQ2VudHJvaWRzKCk7dGhpcy5jb21wdXRlRmFjZU5vcm1hbHMoKTt0aGlzLmJvdW5kaW5nU3BoZXJlPW5ldyBUSFJFRS5TcGhlcmUobmV3IFRIUkVFLlZlY3RvcjMsaSl9O1RIUkVFLlJpbmdHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5HZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLlNwaGVyZUdlb21ldHJ5PWZ1bmN0aW9uKGEsYixjLGQsZSxmLGgpe1RIUkVFLkdlb21ldHJ5LmNhbGwodGhpcyk7dGhpcy5yYWRpdXM9YT1hfHw1MDt0aGlzLndpZHRoU2VnbWVudHM9Yj1NYXRoLm1heCgzLE1hdGguZmxvb3IoYil8fDgpO3RoaXMuaGVpZ2h0U2VnbWVudHM9Yz1NYXRoLm1heCgyLE1hdGguZmxvb3IoYyl8fDYpO3RoaXMucGhpU3RhcnQ9ZD12b2lkIDAhPT1kP2Q6MDt0aGlzLnBoaUxlbmd0aD1lPXZvaWQgMCE9PWU/ZToyKk1hdGguUEk7dGhpcy50aGV0YVN0YXJ0PWY9dm9pZCAwIT09Zj9mOjA7dGhpcy50aGV0YUxlbmd0aD1oPXZvaWQgMCE9PWg/aDpNYXRoLlBJO3ZhciBnLGksaz1bXSxtPVtdO2ZvcihpPTA7aTw9YztpKyspe3ZhciBsPVtdLHA9W107Zm9yKGc9MDtnPD1iO2crKyl7dmFyIHQ9Zy9iLHM9aS9jLHE9bmV3IFRIUkVFLlZlY3RvcjM7cS54PS1hKk1hdGguY29zKGQrdCplKSpNYXRoLnNpbihmK3MqaCk7cS55PWEqTWF0aC5jb3MoZitzKmgpO1xucS56PWEqTWF0aC5zaW4oZCt0KmUpKk1hdGguc2luKGYrcypoKTt0aGlzLnZlcnRpY2VzLnB1c2gocSk7bC5wdXNoKHRoaXMudmVydGljZXMubGVuZ3RoLTEpO3AucHVzaChuZXcgVEhSRUUuVmVjdG9yMih0LDEtcykpfWsucHVzaChsKTttLnB1c2gocCl9Zm9yKGk9MDtpPHRoaXMuaGVpZ2h0U2VnbWVudHM7aSsrKWZvcihnPTA7Zzx0aGlzLndpZHRoU2VnbWVudHM7ZysrKXt2YXIgYj1rW2ldW2crMV0sYz1rW2ldW2ddLGQ9a1tpKzFdW2ddLGU9a1tpKzFdW2crMV0sZj10aGlzLnZlcnRpY2VzW2JdLmNsb25lKCkubm9ybWFsaXplKCksaD10aGlzLnZlcnRpY2VzW2NdLmNsb25lKCkubm9ybWFsaXplKCksbD10aGlzLnZlcnRpY2VzW2RdLmNsb25lKCkubm9ybWFsaXplKCkscD10aGlzLnZlcnRpY2VzW2VdLmNsb25lKCkubm9ybWFsaXplKCksdD1tW2ldW2crMV0uY2xvbmUoKSxzPW1baV1bZ10uY2xvbmUoKSxxPW1baSsxXVtnXS5jbG9uZSgpLG49bVtpKzFdW2crMV0uY2xvbmUoKTtNYXRoLmFicyh0aGlzLnZlcnRpY2VzW2JdLnkpPT09XG50aGlzLnJhZGl1cz8odC54PSh0Lngrcy54KS8yLHRoaXMuZmFjZXMucHVzaChuZXcgVEhSRUUuRmFjZTMoYixkLGUsW2YsbCxwXSkpLHRoaXMuZmFjZVZlcnRleFV2c1swXS5wdXNoKFt0LHEsbl0pKTpNYXRoLmFicyh0aGlzLnZlcnRpY2VzW2RdLnkpPT09dGhpcy5yYWRpdXM/KHEueD0ocS54K24ueCkvMix0aGlzLmZhY2VzLnB1c2gobmV3IFRIUkVFLkZhY2UzKGIsYyxkLFtmLGgsbF0pKSx0aGlzLmZhY2VWZXJ0ZXhVdnNbMF0ucHVzaChbdCxzLHFdKSk6KHRoaXMuZmFjZXMucHVzaChuZXcgVEhSRUUuRmFjZTMoYixjLGUsW2YsaCxwXSkpLHRoaXMuZmFjZVZlcnRleFV2c1swXS5wdXNoKFt0LHMsbl0pLHRoaXMuZmFjZXMucHVzaChuZXcgVEhSRUUuRmFjZTMoYyxkLGUsW2guY2xvbmUoKSxsLHAuY2xvbmUoKV0pKSx0aGlzLmZhY2VWZXJ0ZXhVdnNbMF0ucHVzaChbcy5jbG9uZSgpLHEsbi5jbG9uZSgpXSkpfXRoaXMuY29tcHV0ZUNlbnRyb2lkcygpO3RoaXMuY29tcHV0ZUZhY2VOb3JtYWxzKCk7XG50aGlzLmJvdW5kaW5nU3BoZXJlPW5ldyBUSFJFRS5TcGhlcmUobmV3IFRIUkVFLlZlY3RvcjMsYSl9O1RIUkVFLlNwaGVyZUdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuVGV4dEdlb21ldHJ5PWZ1bmN0aW9uKGEsYil7dmFyIGI9Ynx8e30sYz1USFJFRS5Gb250VXRpbHMuZ2VuZXJhdGVTaGFwZXMoYSxiKTtiLmFtb3VudD12b2lkIDAhPT1iLmhlaWdodD9iLmhlaWdodDo1MDt2b2lkIDA9PT1iLmJldmVsVGhpY2tuZXNzJiYoYi5iZXZlbFRoaWNrbmVzcz0xMCk7dm9pZCAwPT09Yi5iZXZlbFNpemUmJihiLmJldmVsU2l6ZT04KTt2b2lkIDA9PT1iLmJldmVsRW5hYmxlZCYmKGIuYmV2ZWxFbmFibGVkPSExKTtUSFJFRS5FeHRydWRlR2VvbWV0cnkuY2FsbCh0aGlzLGMsYil9O1RIUkVFLlRleHRHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5FeHRydWRlR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5Ub3J1c0dlb21ldHJ5PWZ1bmN0aW9uKGEsYixjLGQsZSl7VEhSRUUuR2VvbWV0cnkuY2FsbCh0aGlzKTt0aGlzLnJhZGl1cz1hfHwxMDA7dGhpcy50dWJlPWJ8fDQwO3RoaXMucmFkaWFsU2VnbWVudHM9Y3x8ODt0aGlzLnR1YnVsYXJTZWdtZW50cz1kfHw2O3RoaXMuYXJjPWV8fDIqTWF0aC5QSTtlPW5ldyBUSFJFRS5WZWN0b3IzO2E9W107Yj1bXTtmb3IoYz0wO2M8PXRoaXMucmFkaWFsU2VnbWVudHM7YysrKWZvcihkPTA7ZDw9dGhpcy50dWJ1bGFyU2VnbWVudHM7ZCsrKXt2YXIgZj1kL3RoaXMudHVidWxhclNlZ21lbnRzKnRoaXMuYXJjLGg9MipjL3RoaXMucmFkaWFsU2VnbWVudHMqTWF0aC5QSTtlLng9dGhpcy5yYWRpdXMqTWF0aC5jb3MoZik7ZS55PXRoaXMucmFkaXVzKk1hdGguc2luKGYpO3ZhciBnPW5ldyBUSFJFRS5WZWN0b3IzO2cueD0odGhpcy5yYWRpdXMrdGhpcy50dWJlKk1hdGguY29zKGgpKSpNYXRoLmNvcyhmKTtnLnk9KHRoaXMucmFkaXVzK3RoaXMudHViZSpcbk1hdGguY29zKGgpKSpNYXRoLnNpbihmKTtnLno9dGhpcy50dWJlKk1hdGguc2luKGgpO3RoaXMudmVydGljZXMucHVzaChnKTthLnB1c2gobmV3IFRIUkVFLlZlY3RvcjIoZC90aGlzLnR1YnVsYXJTZWdtZW50cyxjL3RoaXMucmFkaWFsU2VnbWVudHMpKTtiLnB1c2goZy5jbG9uZSgpLnN1YihlKS5ub3JtYWxpemUoKSl9Zm9yKGM9MTtjPD10aGlzLnJhZGlhbFNlZ21lbnRzO2MrKylmb3IoZD0xO2Q8PXRoaXMudHVidWxhclNlZ21lbnRzO2QrKyl7dmFyIGU9KHRoaXMudHVidWxhclNlZ21lbnRzKzEpKmMrZC0xLGY9KHRoaXMudHVidWxhclNlZ21lbnRzKzEpKihjLTEpK2QtMSxoPSh0aGlzLnR1YnVsYXJTZWdtZW50cysxKSooYy0xKStkLGc9KHRoaXMudHVidWxhclNlZ21lbnRzKzEpKmMrZCxpPW5ldyBUSFJFRS5GYWNlMyhlLGYsZyxbYltlXSxiW2ZdLGJbZ11dKTtpLm5vcm1hbC5hZGQoYltlXSk7aS5ub3JtYWwuYWRkKGJbZl0pO2kubm9ybWFsLmFkZChiW2ddKTtpLm5vcm1hbC5ub3JtYWxpemUoKTtcbnRoaXMuZmFjZXMucHVzaChpKTt0aGlzLmZhY2VWZXJ0ZXhVdnNbMF0ucHVzaChbYVtlXS5jbG9uZSgpLGFbZl0uY2xvbmUoKSxhW2ddLmNsb25lKCldKTtpPW5ldyBUSFJFRS5GYWNlMyhmLGgsZyxbYltmXSxiW2hdLGJbZ11dKTtpLm5vcm1hbC5hZGQoYltmXSk7aS5ub3JtYWwuYWRkKGJbaF0pO2kubm9ybWFsLmFkZChiW2ddKTtpLm5vcm1hbC5ub3JtYWxpemUoKTt0aGlzLmZhY2VzLnB1c2goaSk7dGhpcy5mYWNlVmVydGV4VXZzWzBdLnB1c2goW2FbZl0uY2xvbmUoKSxhW2hdLmNsb25lKCksYVtnXS5jbG9uZSgpXSl9dGhpcy5jb21wdXRlQ2VudHJvaWRzKCl9O1RIUkVFLlRvcnVzR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5Ub3J1c0tub3RHZW9tZXRyeT1mdW5jdGlvbihhLGIsYyxkLGUsZixoKXtmdW5jdGlvbiBnKGEsYixjLGQsZSl7dmFyIGY9TWF0aC5jb3MoYSksZz1NYXRoLnNpbihhKSxhPWIvYyphLGI9TWF0aC5jb3MoYSksZj0wLjUqKGQqKDIrYikpKmYsZz0wLjUqZCooMitiKSpnLGQ9MC41KmUqZCpNYXRoLnNpbihhKTtyZXR1cm4gbmV3IFRIUkVFLlZlY3RvcjMoZixnLGQpfVRIUkVFLkdlb21ldHJ5LmNhbGwodGhpcyk7dGhpcy5yYWRpdXM9YXx8MTAwO3RoaXMudHViZT1ifHw0MDt0aGlzLnJhZGlhbFNlZ21lbnRzPWN8fDY0O3RoaXMudHVidWxhclNlZ21lbnRzPWR8fDg7dGhpcy5wPWV8fDI7dGhpcy5xPWZ8fDM7dGhpcy5oZWlnaHRTY2FsZT1ofHwxO3RoaXMuZ3JpZD1BcnJheSh0aGlzLnJhZGlhbFNlZ21lbnRzKTtjPW5ldyBUSFJFRS5WZWN0b3IzO2Q9bmV3IFRIUkVFLlZlY3RvcjM7ZT1uZXcgVEhSRUUuVmVjdG9yMztmb3IoYT0wO2E8dGhpcy5yYWRpYWxTZWdtZW50czsrK2Epe3RoaXMuZ3JpZFthXT1cbkFycmF5KHRoaXMudHVidWxhclNlZ21lbnRzKTtiPTIqKGEvdGhpcy5yYWRpYWxTZWdtZW50cykqdGhpcy5wKk1hdGguUEk7Zj1nKGIsdGhpcy5xLHRoaXMucCx0aGlzLnJhZGl1cyx0aGlzLmhlaWdodFNjYWxlKTtiPWcoYiswLjAxLHRoaXMucSx0aGlzLnAsdGhpcy5yYWRpdXMsdGhpcy5oZWlnaHRTY2FsZSk7Yy5zdWJWZWN0b3JzKGIsZik7ZC5hZGRWZWN0b3JzKGIsZik7ZS5jcm9zc1ZlY3RvcnMoYyxkKTtkLmNyb3NzVmVjdG9ycyhlLGMpO2Uubm9ybWFsaXplKCk7ZC5ub3JtYWxpemUoKTtmb3IoYj0wO2I8dGhpcy50dWJ1bGFyU2VnbWVudHM7KytiKXt2YXIgaT0yKihiL3RoaXMudHVidWxhclNlZ21lbnRzKSpNYXRoLlBJLGg9LXRoaXMudHViZSpNYXRoLmNvcyhpKSxpPXRoaXMudHViZSpNYXRoLnNpbihpKSxrPW5ldyBUSFJFRS5WZWN0b3IzO2sueD1mLngraCpkLngraSplLng7ay55PWYueStoKmQueStpKmUueTtrLno9Zi56K2gqZC56K2kqZS56O3RoaXMuZ3JpZFthXVtiXT1cbnRoaXMudmVydGljZXMucHVzaChrKS0xfX1mb3IoYT0wO2E8dGhpcy5yYWRpYWxTZWdtZW50czsrK2EpZm9yKGI9MDtiPHRoaXMudHVidWxhclNlZ21lbnRzOysrYil7dmFyIGU9KGErMSkldGhpcy5yYWRpYWxTZWdtZW50cyxmPShiKzEpJXRoaXMudHVidWxhclNlZ21lbnRzLGM9dGhpcy5ncmlkW2FdW2JdLGQ9dGhpcy5ncmlkW2VdW2JdLGU9dGhpcy5ncmlkW2VdW2ZdLGY9dGhpcy5ncmlkW2FdW2ZdLGg9bmV3IFRIUkVFLlZlY3RvcjIoYS90aGlzLnJhZGlhbFNlZ21lbnRzLGIvdGhpcy50dWJ1bGFyU2VnbWVudHMpLGk9bmV3IFRIUkVFLlZlY3RvcjIoKGErMSkvdGhpcy5yYWRpYWxTZWdtZW50cyxiL3RoaXMudHVidWxhclNlZ21lbnRzKSxrPW5ldyBUSFJFRS5WZWN0b3IyKChhKzEpL3RoaXMucmFkaWFsU2VnbWVudHMsKGIrMSkvdGhpcy50dWJ1bGFyU2VnbWVudHMpLG09bmV3IFRIUkVFLlZlY3RvcjIoYS90aGlzLnJhZGlhbFNlZ21lbnRzLChiKzEpL3RoaXMudHVidWxhclNlZ21lbnRzKTtcbnRoaXMuZmFjZXMucHVzaChuZXcgVEhSRUUuRmFjZTMoYyxkLGYpKTt0aGlzLmZhY2VWZXJ0ZXhVdnNbMF0ucHVzaChbaCxpLG1dKTt0aGlzLmZhY2VzLnB1c2gobmV3IFRIUkVFLkZhY2UzKGQsZSxmKSk7dGhpcy5mYWNlVmVydGV4VXZzWzBdLnB1c2goW2kuY2xvbmUoKSxrLG0uY2xvbmUoKV0pfXRoaXMuY29tcHV0ZUNlbnRyb2lkcygpO3RoaXMuY29tcHV0ZUZhY2VOb3JtYWxzKCk7dGhpcy5jb21wdXRlVmVydGV4Tm9ybWFscygpfTtUSFJFRS5Ub3J1c0tub3RHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5HZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLlR1YmVHZW9tZXRyeT1mdW5jdGlvbihhLGIsYyxkLGUpe1RIUkVFLkdlb21ldHJ5LmNhbGwodGhpcyk7dGhpcy5wYXRoPWE7dGhpcy5zZWdtZW50cz1ifHw2NDt0aGlzLnJhZGl1cz1jfHwxO3RoaXMucmFkaWFsU2VnbWVudHM9ZHx8ODt0aGlzLmNsb3NlZD1lfHwhMTt0aGlzLmdyaWQ9W107dmFyIGYsaCxkPXRoaXMuc2VnbWVudHMrMSxnLGksayxlPW5ldyBUSFJFRS5WZWN0b3IzLG0sbCxiPW5ldyBUSFJFRS5UdWJlR2VvbWV0cnkuRnJlbmV0RnJhbWVzKHRoaXMucGF0aCx0aGlzLnNlZ21lbnRzLHRoaXMuY2xvc2VkKTttPWIubm9ybWFscztsPWIuYmlub3JtYWxzO3RoaXMudGFuZ2VudHM9Yi50YW5nZW50czt0aGlzLm5vcm1hbHM9bTt0aGlzLmJpbm9ybWFscz1sO2ZvcihiPTA7YjxkO2IrKyl7dGhpcy5ncmlkW2JdPVtdO2M9Yi8oZC0xKTtrPWEuZ2V0UG9pbnRBdChjKTtmPW1bYl07aD1sW2JdO2ZvcihjPTA7Yzx0aGlzLnJhZGlhbFNlZ21lbnRzO2MrKylnPTIqKGMvdGhpcy5yYWRpYWxTZWdtZW50cykqXG5NYXRoLlBJLGk9LXRoaXMucmFkaXVzKk1hdGguY29zKGcpLGc9dGhpcy5yYWRpdXMqTWF0aC5zaW4oZyksZS5jb3B5KGspLGUueCs9aSpmLngrZypoLngsZS55Kz1pKmYueStnKmgueSxlLnorPWkqZi56K2cqaC56LHRoaXMuZ3JpZFtiXVtjXT10aGlzLnZlcnRpY2VzLnB1c2gobmV3IFRIUkVFLlZlY3RvcjMoZS54LGUueSxlLnopKS0xfWZvcihiPTA7Yjx0aGlzLnNlZ21lbnRzO2IrKylmb3IoYz0wO2M8dGhpcy5yYWRpYWxTZWdtZW50cztjKyspZT10aGlzLmNsb3NlZD8oYisxKSV0aGlzLnNlZ21lbnRzOmIrMSxtPShjKzEpJXRoaXMucmFkaWFsU2VnbWVudHMsYT10aGlzLmdyaWRbYl1bY10sZD10aGlzLmdyaWRbZV1bY10sZT10aGlzLmdyaWRbZV1bbV0sbT10aGlzLmdyaWRbYl1bbV0sbD1uZXcgVEhSRUUuVmVjdG9yMihiL3RoaXMuc2VnbWVudHMsYy90aGlzLnJhZGlhbFNlZ21lbnRzKSxmPW5ldyBUSFJFRS5WZWN0b3IyKChiKzEpL3RoaXMuc2VnbWVudHMsYy90aGlzLnJhZGlhbFNlZ21lbnRzKSxcbmg9bmV3IFRIUkVFLlZlY3RvcjIoKGIrMSkvdGhpcy5zZWdtZW50cywoYysxKS90aGlzLnJhZGlhbFNlZ21lbnRzKSxpPW5ldyBUSFJFRS5WZWN0b3IyKGIvdGhpcy5zZWdtZW50cywoYysxKS90aGlzLnJhZGlhbFNlZ21lbnRzKSx0aGlzLmZhY2VzLnB1c2gobmV3IFRIUkVFLkZhY2UzKGEsZCxtKSksdGhpcy5mYWNlVmVydGV4VXZzWzBdLnB1c2goW2wsZixpXSksdGhpcy5mYWNlcy5wdXNoKG5ldyBUSFJFRS5GYWNlMyhkLGUsbSkpLHRoaXMuZmFjZVZlcnRleFV2c1swXS5wdXNoKFtmLmNsb25lKCksaCxpLmNsb25lKCldKTt0aGlzLmNvbXB1dGVDZW50cm9pZHMoKTt0aGlzLmNvbXB1dGVGYWNlTm9ybWFscygpO3RoaXMuY29tcHV0ZVZlcnRleE5vcm1hbHMoKX07VEhSRUUuVHViZUdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkdlb21ldHJ5LnByb3RvdHlwZSk7XG5USFJFRS5UdWJlR2VvbWV0cnkuRnJlbmV0RnJhbWVzPWZ1bmN0aW9uKGEsYixjKXtuZXcgVEhSRUUuVmVjdG9yMzt2YXIgZD1uZXcgVEhSRUUuVmVjdG9yMztuZXcgVEhSRUUuVmVjdG9yMzt2YXIgZT1bXSxmPVtdLGg9W10sZz1uZXcgVEhSRUUuVmVjdG9yMyxpPW5ldyBUSFJFRS5NYXRyaXg0LGI9YisxLGssbSxsO3RoaXMudGFuZ2VudHM9ZTt0aGlzLm5vcm1hbHM9Zjt0aGlzLmJpbm9ybWFscz1oO2ZvcihrPTA7azxiO2srKyltPWsvKGItMSksZVtrXT1hLmdldFRhbmdlbnRBdChtKSxlW2tdLm5vcm1hbGl6ZSgpO2ZbMF09bmV3IFRIUkVFLlZlY3RvcjM7aFswXT1uZXcgVEhSRUUuVmVjdG9yMzthPU51bWJlci5NQVhfVkFMVUU7az1NYXRoLmFicyhlWzBdLngpO209TWF0aC5hYnMoZVswXS55KTtsPU1hdGguYWJzKGVbMF0ueik7azw9YSYmKGE9ayxkLnNldCgxLDAsMCkpO208PWEmJihhPW0sZC5zZXQoMCwxLDApKTtsPD1hJiZkLnNldCgwLDAsMSk7Zy5jcm9zc1ZlY3RvcnMoZVswXSxcbmQpLm5vcm1hbGl6ZSgpO2ZbMF0uY3Jvc3NWZWN0b3JzKGVbMF0sZyk7aFswXS5jcm9zc1ZlY3RvcnMoZVswXSxmWzBdKTtmb3Ioaz0xO2s8YjtrKyspZltrXT1mW2stMV0uY2xvbmUoKSxoW2tdPWhbay0xXS5jbG9uZSgpLGcuY3Jvc3NWZWN0b3JzKGVbay0xXSxlW2tdKSwxRS00PGcubGVuZ3RoKCkmJihnLm5vcm1hbGl6ZSgpLGQ9TWF0aC5hY29zKFRIUkVFLk1hdGguY2xhbXAoZVtrLTFdLmRvdChlW2tdKSwtMSwxKSksZltrXS5hcHBseU1hdHJpeDQoaS5tYWtlUm90YXRpb25BeGlzKGcsZCkpKSxoW2tdLmNyb3NzVmVjdG9ycyhlW2tdLGZba10pO2lmKGMpe2Q9TWF0aC5hY29zKFRIUkVFLk1hdGguY2xhbXAoZlswXS5kb3QoZltiLTFdKSwtMSwxKSk7ZC89Yi0xOzA8ZVswXS5kb3QoZy5jcm9zc1ZlY3RvcnMoZlswXSxmW2ItMV0pKSYmKGQ9LWQpO2ZvcihrPTE7azxiO2srKylmW2tdLmFwcGx5TWF0cml4NChpLm1ha2VSb3RhdGlvbkF4aXMoZVtrXSxkKmspKSxoW2tdLmNyb3NzVmVjdG9ycyhlW2tdLFxuZltrXSl9fTtUSFJFRS5Qb2x5aGVkcm9uR2VvbWV0cnk9ZnVuY3Rpb24oYSxiLGMsZCl7ZnVuY3Rpb24gZShhKXt2YXIgYj1hLm5vcm1hbGl6ZSgpLmNsb25lKCk7Yi5pbmRleD1nLnZlcnRpY2VzLnB1c2goYiktMTt2YXIgYz1NYXRoLmF0YW4yKGEueiwtYS54KS8yL01hdGguUEkrMC41LGE9TWF0aC5hdGFuMigtYS55LE1hdGguc3FydChhLngqYS54K2EueiphLnopKS9NYXRoLlBJKzAuNTtiLnV2PW5ldyBUSFJFRS5WZWN0b3IyKGMsMS1hKTtyZXR1cm4gYn1mdW5jdGlvbiBmKGEsYixjKXt2YXIgZD1uZXcgVEhSRUUuRmFjZTMoYS5pbmRleCxiLmluZGV4LGMuaW5kZXgsW2EuY2xvbmUoKSxiLmNsb25lKCksYy5jbG9uZSgpXSk7ZC5jZW50cm9pZC5hZGQoYSkuYWRkKGIpLmFkZChjKS5kaXZpZGVTY2FsYXIoMyk7Zy5mYWNlcy5wdXNoKGQpO2Q9TWF0aC5hdGFuMihkLmNlbnRyb2lkLnosLWQuY2VudHJvaWQueCk7Zy5mYWNlVmVydGV4VXZzWzBdLnB1c2goW2goYS51dixhLGQpLGgoYi51dixiLGQpLFxuaChjLnV2LGMsZCldKX1mdW5jdGlvbiBoKGEsYixjKXswPmMmJjE9PT1hLngmJihhPW5ldyBUSFJFRS5WZWN0b3IyKGEueC0xLGEueSkpOzA9PT1iLngmJjA9PT1iLnomJihhPW5ldyBUSFJFRS5WZWN0b3IyKGMvMi9NYXRoLlBJKzAuNSxhLnkpKTtyZXR1cm4gYS5jbG9uZSgpfVRIUkVFLkdlb21ldHJ5LmNhbGwodGhpcyk7Zm9yKHZhciBjPWN8fDEsZD1kfHwwLGc9dGhpcyxpPTAsaz1hLmxlbmd0aDtpPGs7aSsrKWUobmV3IFRIUkVFLlZlY3RvcjMoYVtpXVswXSxhW2ldWzFdLGFbaV1bMl0pKTtmb3IodmFyIG09dGhpcy52ZXJ0aWNlcyxhPVtdLGk9MCxrPWIubGVuZ3RoO2k8aztpKyspe3ZhciBsPW1bYltpXVswXV0scD1tW2JbaV1bMV1dLHQ9bVtiW2ldWzJdXTthW2ldPW5ldyBUSFJFRS5GYWNlMyhsLmluZGV4LHAuaW5kZXgsdC5pbmRleCxbbC5jbG9uZSgpLHAuY2xvbmUoKSx0LmNsb25lKCldKX1pPTA7Zm9yKGs9YS5sZW5ndGg7aTxrO2krKyl7cD1hW2ldO209ZDtiPU1hdGgucG93KDIsXG5tKTtNYXRoLnBvdyg0LG0pO2Zvcih2YXIgbT1lKGcudmVydGljZXNbcC5hXSksbD1lKGcudmVydGljZXNbcC5iXSkscz1lKGcudmVydGljZXNbcC5jXSkscD1bXSx0PTA7dDw9Yjt0Kyspe3BbdF09W107Zm9yKHZhciBxPWUobS5jbG9uZSgpLmxlcnAocyx0L2IpKSxuPWUobC5jbG9uZSgpLmxlcnAocyx0L2IpKSx1PWItdCxyPTA7cjw9dTtyKyspcFt0XVtyXT0wPT1yJiZ0PT1iP3E6ZShxLmNsb25lKCkubGVycChuLHIvdSkpfWZvcih0PTA7dDxiO3QrKylmb3Iocj0wO3I8MiooYi10KS0xO3IrKyltPU1hdGguZmxvb3Ioci8yKSwwPT1yJTI/ZihwW3RdW20rMV0scFt0KzFdW21dLHBbdF1bbV0pOmYocFt0XVttKzFdLHBbdCsxXVttKzFdLHBbdCsxXVttXSl9aT0wO2ZvcihrPXRoaXMuZmFjZVZlcnRleFV2c1swXS5sZW5ndGg7aTxrO2krKylkPXRoaXMuZmFjZVZlcnRleFV2c1swXVtpXSxhPWRbMF0ueCxiPWRbMV0ueCxtPWRbMl0ueCxsPU1hdGgubWF4KGEsTWF0aC5tYXgoYixtKSksXG5wPU1hdGgubWluKGEsTWF0aC5taW4oYixtKSksMC45PGwmJjAuMT5wJiYoMC4yPmEmJihkWzBdLngrPTEpLDAuMj5iJiYoZFsxXS54Kz0xKSwwLjI+bSYmKGRbMl0ueCs9MSkpO2k9MDtmb3Ioaz10aGlzLnZlcnRpY2VzLmxlbmd0aDtpPGs7aSsrKXRoaXMudmVydGljZXNbaV0ubXVsdGlwbHlTY2FsYXIoYyk7dGhpcy5tZXJnZVZlcnRpY2VzKCk7dGhpcy5jb21wdXRlQ2VudHJvaWRzKCk7dGhpcy5jb21wdXRlRmFjZU5vcm1hbHMoKTt0aGlzLmJvdW5kaW5nU3BoZXJlPW5ldyBUSFJFRS5TcGhlcmUobmV3IFRIUkVFLlZlY3RvcjMsYyl9O1RIUkVFLlBvbHloZWRyb25HZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5HZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLkljb3NhaGVkcm9uR2VvbWV0cnk9ZnVuY3Rpb24oYSxiKXt0aGlzLnJhZGl1cz1hO3RoaXMuZGV0YWlsPWI7dmFyIGM9KDErTWF0aC5zcXJ0KDUpKS8yO1RIUkVFLlBvbHloZWRyb25HZW9tZXRyeS5jYWxsKHRoaXMsW1stMSxjLDBdLFsxLGMsMF0sWy0xLC1jLDBdLFsxLC1jLDBdLFswLC0xLGNdLFswLDEsY10sWzAsLTEsLWNdLFswLDEsLWNdLFtjLDAsLTFdLFtjLDAsMV0sWy1jLDAsLTFdLFstYywwLDFdXSxbWzAsMTEsNV0sWzAsNSwxXSxbMCwxLDddLFswLDcsMTBdLFswLDEwLDExXSxbMSw1LDldLFs1LDExLDRdLFsxMSwxMCwyXSxbMTAsNyw2XSxbNywxLDhdLFszLDksNF0sWzMsNCwyXSxbMywyLDZdLFszLDYsOF0sWzMsOCw5XSxbNCw5LDVdLFsyLDQsMTFdLFs2LDIsMTBdLFs4LDYsN10sWzksOCwxXV0sYSxiKX07VEhSRUUuSWNvc2FoZWRyb25HZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5HZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLk9jdGFoZWRyb25HZW9tZXRyeT1mdW5jdGlvbihhLGIpe1RIUkVFLlBvbHloZWRyb25HZW9tZXRyeS5jYWxsKHRoaXMsW1sxLDAsMF0sWy0xLDAsMF0sWzAsMSwwXSxbMCwtMSwwXSxbMCwwLDFdLFswLDAsLTFdXSxbWzAsMiw0XSxbMCw0LDNdLFswLDMsNV0sWzAsNSwyXSxbMSwyLDVdLFsxLDUsM10sWzEsMyw0XSxbMSw0LDJdXSxhLGIpfTtUSFJFRS5PY3RhaGVkcm9uR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5UZXRyYWhlZHJvbkdlb21ldHJ5PWZ1bmN0aW9uKGEsYil7VEhSRUUuUG9seWhlZHJvbkdlb21ldHJ5LmNhbGwodGhpcyxbWzEsMSwxXSxbLTEsLTEsMV0sWy0xLDEsLTFdLFsxLC0xLC0xXV0sW1syLDEsMF0sWzAsMywyXSxbMSwzLDBdLFsyLDMsMV1dLGEsYil9O1RIUkVFLlRldHJhaGVkcm9uR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5QYXJhbWV0cmljR2VvbWV0cnk9ZnVuY3Rpb24oYSxiLGMpe1RIUkVFLkdlb21ldHJ5LmNhbGwodGhpcyk7dmFyIGQ9dGhpcy52ZXJ0aWNlcyxlPXRoaXMuZmFjZXMsZj10aGlzLmZhY2VWZXJ0ZXhVdnNbMF0saCxnLGksayxtPWIrMTtmb3IoaD0wO2g8PWM7aCsrKXtrPWgvYztmb3IoZz0wO2c8PWI7ZysrKWk9Zy9iLGk9YShpLGspLGQucHVzaChpKX12YXIgbCxwLHQscztmb3IoaD0wO2g8YztoKyspZm9yKGc9MDtnPGI7ZysrKWE9aCptK2csZD1oKm0rZysxLGs9KGgrMSkqbStnKzEsaT0oaCsxKSptK2csbD1uZXcgVEhSRUUuVmVjdG9yMihnL2IsaC9jKSxwPW5ldyBUSFJFRS5WZWN0b3IyKChnKzEpL2IsaC9jKSx0PW5ldyBUSFJFRS5WZWN0b3IyKChnKzEpL2IsKGgrMSkvYykscz1uZXcgVEhSRUUuVmVjdG9yMihnL2IsKGgrMSkvYyksZS5wdXNoKG5ldyBUSFJFRS5GYWNlMyhhLGQsaSkpLGYucHVzaChbbCxwLHNdKSxlLnB1c2gobmV3IFRIUkVFLkZhY2UzKGQsayxpKSksXG5mLnB1c2goW3AuY2xvbmUoKSx0LHMuY2xvbmUoKV0pO3RoaXMuY29tcHV0ZUNlbnRyb2lkcygpO3RoaXMuY29tcHV0ZUZhY2VOb3JtYWxzKCk7dGhpcy5jb21wdXRlVmVydGV4Tm9ybWFscygpfTtUSFJFRS5QYXJhbWV0cmljR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5BeGlzSGVscGVyPWZ1bmN0aW9uKGEpe3ZhciBhPWF8fDEsYj1uZXcgVEhSRUUuR2VvbWV0cnk7Yi52ZXJ0aWNlcy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IzLG5ldyBUSFJFRS5WZWN0b3IzKGEsMCwwKSxuZXcgVEhSRUUuVmVjdG9yMyxuZXcgVEhSRUUuVmVjdG9yMygwLGEsMCksbmV3IFRIUkVFLlZlY3RvcjMsbmV3IFRIUkVFLlZlY3RvcjMoMCwwLGEpKTtiLmNvbG9ycy5wdXNoKG5ldyBUSFJFRS5Db2xvcigxNjcxMTY4MCksbmV3IFRIUkVFLkNvbG9yKDE2NzU1MjAwKSxuZXcgVEhSRUUuQ29sb3IoNjUyODApLG5ldyBUSFJFRS5Db2xvcigxMTIwNjQwMCksbmV3IFRIUkVFLkNvbG9yKDI1NSksbmV3IFRIUkVFLkNvbG9yKDQzNzc1KSk7YT1uZXcgVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWwoe3ZlcnRleENvbG9yczpUSFJFRS5WZXJ0ZXhDb2xvcnN9KTtUSFJFRS5MaW5lLmNhbGwodGhpcyxiLGEsVEhSRUUuTGluZVBpZWNlcyl9O1xuVEhSRUUuQXhpc0hlbHBlci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5MaW5lLnByb3RvdHlwZSk7VEhSRUUuQXJyb3dIZWxwZXI9ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe1RIUkVFLk9iamVjdDNELmNhbGwodGhpcyk7dm9pZCAwPT09ZCYmKGQ9MTY3NzY5NjApO3ZvaWQgMD09PWMmJihjPTEpO3ZvaWQgMD09PWUmJihlPTAuMipjKTt2b2lkIDA9PT1mJiYoZj0wLjIqZSk7dGhpcy5wb3NpdGlvbj1iO2I9bmV3IFRIUkVFLkdlb21ldHJ5O2IudmVydGljZXMucHVzaChuZXcgVEhSRUUuVmVjdG9yMygwLDAsMCkpO2IudmVydGljZXMucHVzaChuZXcgVEhSRUUuVmVjdG9yMygwLDEsMCkpO3RoaXMubGluZT1uZXcgVEhSRUUuTGluZShiLG5ldyBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCh7Y29sb3I6ZH0pKTt0aGlzLmxpbmUubWF0cml4QXV0b1VwZGF0ZT0hMTt0aGlzLmFkZCh0aGlzLmxpbmUpO2I9bmV3IFRIUkVFLkN5bGluZGVyR2VvbWV0cnkoMCwwLjUsMSw1LDEpO2IuYXBwbHlNYXRyaXgoKG5ldyBUSFJFRS5NYXRyaXg0KS5tYWtlVHJhbnNsYXRpb24oMCwtMC41LDApKTt0aGlzLmNvbmU9XG5uZXcgVEhSRUUuTWVzaChiLG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7Y29sb3I6ZH0pKTt0aGlzLmNvbmUubWF0cml4QXV0b1VwZGF0ZT0hMTt0aGlzLmFkZCh0aGlzLmNvbmUpO3RoaXMuc2V0RGlyZWN0aW9uKGEpO3RoaXMuc2V0TGVuZ3RoKGMsZSxmKX07VEhSRUUuQXJyb3dIZWxwZXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlKTtUSFJFRS5BcnJvd0hlbHBlci5wcm90b3R5cGUuc2V0RGlyZWN0aW9uPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjMsYjtyZXR1cm4gZnVuY3Rpb24oYyl7MC45OTk5OTxjLnk/dGhpcy5xdWF0ZXJuaW9uLnNldCgwLDAsMCwxKTotMC45OTk5OT5jLnk/dGhpcy5xdWF0ZXJuaW9uLnNldCgxLDAsMCwwKTooYS5zZXQoYy56LDAsLWMueCkubm9ybWFsaXplKCksYj1NYXRoLmFjb3MoYy55KSx0aGlzLnF1YXRlcm5pb24uc2V0RnJvbUF4aXNBbmdsZShhLGIpKX19KCk7XG5USFJFRS5BcnJvd0hlbHBlci5wcm90b3R5cGUuc2V0TGVuZ3RoPWZ1bmN0aW9uKGEsYixjKXt2b2lkIDA9PT1iJiYoYj0wLjIqYSk7dm9pZCAwPT09YyYmKGM9MC4yKmIpO3RoaXMubGluZS5zY2FsZS5zZXQoMSxhLDEpO3RoaXMubGluZS51cGRhdGVNYXRyaXgoKTt0aGlzLmNvbmUuc2NhbGUuc2V0KGMsYixjKTt0aGlzLmNvbmUucG9zaXRpb24ueT1hO3RoaXMuY29uZS51cGRhdGVNYXRyaXgoKX07VEhSRUUuQXJyb3dIZWxwZXIucHJvdG90eXBlLnNldENvbG9yPWZ1bmN0aW9uKGEpe3RoaXMubGluZS5tYXRlcmlhbC5jb2xvci5zZXRIZXgoYSk7dGhpcy5jb25lLm1hdGVyaWFsLmNvbG9yLnNldEhleChhKX07VEhSRUUuQm94SGVscGVyPWZ1bmN0aW9uKGEpe3ZhciBiPVtuZXcgVEhSRUUuVmVjdG9yMygxLDEsMSksbmV3IFRIUkVFLlZlY3RvcjMoLTEsMSwxKSxuZXcgVEhSRUUuVmVjdG9yMygtMSwtMSwxKSxuZXcgVEhSRUUuVmVjdG9yMygxLC0xLDEpLG5ldyBUSFJFRS5WZWN0b3IzKDEsMSwtMSksbmV3IFRIUkVFLlZlY3RvcjMoLTEsMSwtMSksbmV3IFRIUkVFLlZlY3RvcjMoLTEsLTEsLTEpLG5ldyBUSFJFRS5WZWN0b3IzKDEsLTEsLTEpXTt0aGlzLnZlcnRpY2VzPWI7dmFyIGM9bmV3IFRIUkVFLkdlb21ldHJ5O2MudmVydGljZXMucHVzaChiWzBdLGJbMV0sYlsxXSxiWzJdLGJbMl0sYlszXSxiWzNdLGJbMF0sYls0XSxiWzVdLGJbNV0sYls2XSxiWzZdLGJbN10sYls3XSxiWzRdLGJbMF0sYls0XSxiWzFdLGJbNV0sYlsyXSxiWzZdLGJbM10sYls3XSk7VEhSRUUuTGluZS5jYWxsKHRoaXMsYyxuZXcgVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWwoe2NvbG9yOjE2Nzc2OTYwfSksVEhSRUUuTGluZVBpZWNlcyk7XG52b2lkIDAhPT1hJiZ0aGlzLnVwZGF0ZShhKX07VEhSRUUuQm94SGVscGVyLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkxpbmUucHJvdG90eXBlKTtcblRIUkVFLkJveEhlbHBlci5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2VvbWV0cnk7bnVsbD09PWIuYm91bmRpbmdCb3gmJmIuY29tcHV0ZUJvdW5kaW5nQm94KCk7dmFyIGM9Yi5ib3VuZGluZ0JveC5taW4sYj1iLmJvdW5kaW5nQm94Lm1heCxkPXRoaXMudmVydGljZXM7ZFswXS5zZXQoYi54LGIueSxiLnopO2RbMV0uc2V0KGMueCxiLnksYi56KTtkWzJdLnNldChjLngsYy55LGIueik7ZFszXS5zZXQoYi54LGMueSxiLnopO2RbNF0uc2V0KGIueCxiLnksYy56KTtkWzVdLnNldChjLngsYi55LGMueik7ZFs2XS5zZXQoYy54LGMueSxjLnopO2RbN10uc2V0KGIueCxjLnksYy56KTt0aGlzLmdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpO3RoaXMuZ2VvbWV0cnkudmVydGljZXNOZWVkVXBkYXRlPSEwO3RoaXMubWF0cml4QXV0b1VwZGF0ZT0hMTt0aGlzLm1hdHJpeFdvcmxkPWEubWF0cml4V29ybGR9O1RIUkVFLkJvdW5kaW5nQm94SGVscGVyPWZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8ODk0Nzg0ODt0aGlzLm9iamVjdD1hO3RoaXMuYm94PW5ldyBUSFJFRS5Cb3gzO1RIUkVFLk1lc2guY2FsbCh0aGlzLG5ldyBUSFJFRS5DdWJlR2VvbWV0cnkoMSwxLDEpLG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7Y29sb3I6Yyx3aXJlZnJhbWU6ITB9KSl9O1RIUkVFLkJvdW5kaW5nQm94SGVscGVyLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk1lc2gucHJvdG90eXBlKTtUSFJFRS5Cb3VuZGluZ0JveEhlbHBlci5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7dGhpcy5ib3guc2V0RnJvbU9iamVjdCh0aGlzLm9iamVjdCk7dGhpcy5ib3guc2l6ZSh0aGlzLnNjYWxlKTt0aGlzLmJveC5jZW50ZXIodGhpcy5wb3NpdGlvbil9O1RIUkVFLkNhbWVyYUhlbHBlcj1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYixkKXtjKGEsZCk7YyhiLGQpfWZ1bmN0aW9uIGMoYSxiKXtkLnZlcnRpY2VzLnB1c2gobmV3IFRIUkVFLlZlY3RvcjMpO2QuY29sb3JzLnB1c2gobmV3IFRIUkVFLkNvbG9yKGIpKTt2b2lkIDA9PT1mW2FdJiYoZlthXT1bXSk7ZlthXS5wdXNoKGQudmVydGljZXMubGVuZ3RoLTEpfXZhciBkPW5ldyBUSFJFRS5HZW9tZXRyeSxlPW5ldyBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCh7Y29sb3I6MTY3NzcyMTUsdmVydGV4Q29sb3JzOlRIUkVFLkZhY2VDb2xvcnN9KSxmPXt9O2IoXCJuMVwiLFwibjJcIiwxNjc1NTIwMCk7YihcIm4yXCIsXCJuNFwiLDE2NzU1MjAwKTtiKFwibjRcIixcIm4zXCIsMTY3NTUyMDApO2IoXCJuM1wiLFwibjFcIiwxNjc1NTIwMCk7YihcImYxXCIsXCJmMlwiLDE2NzU1MjAwKTtiKFwiZjJcIixcImY0XCIsMTY3NTUyMDApO2IoXCJmNFwiLFwiZjNcIiwxNjc1NTIwMCk7YihcImYzXCIsXCJmMVwiLDE2NzU1MjAwKTtiKFwibjFcIixcImYxXCIsMTY3NTUyMDApO1xuYihcIm4yXCIsXCJmMlwiLDE2NzU1MjAwKTtiKFwibjNcIixcImYzXCIsMTY3NTUyMDApO2IoXCJuNFwiLFwiZjRcIiwxNjc1NTIwMCk7YihcInBcIixcIm4xXCIsMTY3MTE2ODApO2IoXCJwXCIsXCJuMlwiLDE2NzExNjgwKTtiKFwicFwiLFwibjNcIiwxNjcxMTY4MCk7YihcInBcIixcIm40XCIsMTY3MTE2ODApO2IoXCJ1MVwiLFwidTJcIiw0Mzc3NSk7YihcInUyXCIsXCJ1M1wiLDQzNzc1KTtiKFwidTNcIixcInUxXCIsNDM3NzUpO2IoXCJjXCIsXCJ0XCIsMTY3NzcyMTUpO2IoXCJwXCIsXCJjXCIsMzM1NTQ0Myk7YihcImNuMVwiLFwiY24yXCIsMzM1NTQ0Myk7YihcImNuM1wiLFwiY240XCIsMzM1NTQ0Myk7YihcImNmMVwiLFwiY2YyXCIsMzM1NTQ0Myk7YihcImNmM1wiLFwiY2Y0XCIsMzM1NTQ0Myk7VEhSRUUuTGluZS5jYWxsKHRoaXMsZCxlLFRIUkVFLkxpbmVQaWVjZXMpO3RoaXMuY2FtZXJhPWE7dGhpcy5tYXRyaXhXb3JsZD1hLm1hdHJpeFdvcmxkO3RoaXMubWF0cml4QXV0b1VwZGF0ZT0hMTt0aGlzLnBvaW50TWFwPWY7dGhpcy51cGRhdGUoKX07XG5USFJFRS5DYW1lcmFIZWxwZXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTGluZS5wcm90b3R5cGUpO1xuVEhSRUUuQ2FtZXJhSGVscGVyLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMyxiPW5ldyBUSFJFRS5DYW1lcmEsYz1uZXcgVEhSRUUuUHJvamVjdG9yO3JldHVybiBmdW5jdGlvbigpe2Z1bmN0aW9uIGQoZCxoLGcsaSl7YS5zZXQoaCxnLGkpO2MudW5wcm9qZWN0VmVjdG9yKGEsYik7ZD1lLnBvaW50TWFwW2RdO2lmKHZvaWQgMCE9PWQpe2g9MDtmb3IoZz1kLmxlbmd0aDtoPGc7aCsrKWUuZ2VvbWV0cnkudmVydGljZXNbZFtoXV0uY29weShhKX19dmFyIGU9dGhpcztiLnByb2plY3Rpb25NYXRyaXguY29weSh0aGlzLmNhbWVyYS5wcm9qZWN0aW9uTWF0cml4KTtkKFwiY1wiLDAsMCwtMSk7ZChcInRcIiwwLDAsMSk7ZChcIm4xXCIsLTEsLTEsLTEpO2QoXCJuMlwiLDEsLTEsLTEpO2QoXCJuM1wiLC0xLDEsLTEpO2QoXCJuNFwiLDEsMSwtMSk7ZChcImYxXCIsLTEsLTEsMSk7ZChcImYyXCIsMSwtMSwxKTtkKFwiZjNcIiwtMSwxLDEpO2QoXCJmNFwiLDEsMSwxKTtkKFwidTFcIixcbjAuNywxLjEsLTEpO2QoXCJ1MlwiLC0wLjcsMS4xLC0xKTtkKFwidTNcIiwwLDIsLTEpO2QoXCJjZjFcIiwtMSwwLDEpO2QoXCJjZjJcIiwxLDAsMSk7ZChcImNmM1wiLDAsLTEsMSk7ZChcImNmNFwiLDAsMSwxKTtkKFwiY24xXCIsLTEsMCwtMSk7ZChcImNuMlwiLDEsMCwtMSk7ZChcImNuM1wiLDAsLTEsLTEpO2QoXCJjbjRcIiwwLDEsLTEpO3RoaXMuZ2VvbWV0cnkudmVydGljZXNOZWVkVXBkYXRlPSEwfX0oKTtUSFJFRS5EaXJlY3Rpb25hbExpZ2h0SGVscGVyPWZ1bmN0aW9uKGEsYil7VEhSRUUuT2JqZWN0M0QuY2FsbCh0aGlzKTt0aGlzLmxpZ2h0PWE7dGhpcy5saWdodC51cGRhdGVNYXRyaXhXb3JsZCgpO3RoaXMubWF0cml4V29ybGQ9YS5tYXRyaXhXb3JsZDt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ITE7dmFyIGI9Ynx8MSxjPW5ldyBUSFJFRS5QbGFuZUdlb21ldHJ5KGIsYiksZD1uZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe3dpcmVmcmFtZTohMCxmb2c6ITF9KTtkLmNvbG9yLmNvcHkodGhpcy5saWdodC5jb2xvcikubXVsdGlwbHlTY2FsYXIodGhpcy5saWdodC5pbnRlbnNpdHkpO3RoaXMubGlnaHRQbGFuZT1uZXcgVEhSRUUuTWVzaChjLGQpO3RoaXMuYWRkKHRoaXMubGlnaHRQbGFuZSk7Yz1uZXcgVEhSRUUuR2VvbWV0cnk7Yy52ZXJ0aWNlcy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IzKTtjLnZlcnRpY2VzLnB1c2gobmV3IFRIUkVFLlZlY3RvcjMpO2Q9bmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKHtmb2c6ITF9KTtcbmQuY29sb3IuY29weSh0aGlzLmxpZ2h0LmNvbG9yKS5tdWx0aXBseVNjYWxhcih0aGlzLmxpZ2h0LmludGVuc2l0eSk7dGhpcy50YXJnZXRMaW5lPW5ldyBUSFJFRS5MaW5lKGMsZCk7dGhpcy5hZGQodGhpcy50YXJnZXRMaW5lKTt0aGlzLnVwZGF0ZSgpfTtUSFJFRS5EaXJlY3Rpb25hbExpZ2h0SGVscGVyLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSk7VEhSRUUuRGlyZWN0aW9uYWxMaWdodEhlbHBlci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMubGlnaHRQbGFuZS5nZW9tZXRyeS5kaXNwb3NlKCk7dGhpcy5saWdodFBsYW5lLm1hdGVyaWFsLmRpc3Bvc2UoKTt0aGlzLnRhcmdldExpbmUuZ2VvbWV0cnkuZGlzcG9zZSgpO3RoaXMudGFyZ2V0TGluZS5tYXRlcmlhbC5kaXNwb3NlKCl9O1xuVEhSRUUuRGlyZWN0aW9uYWxMaWdodEhlbHBlci5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjMsYj1uZXcgVEhSRUUuVmVjdG9yMyxjPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbigpe2Euc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHRoaXMubGlnaHQubWF0cml4V29ybGQpO2Iuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHRoaXMubGlnaHQudGFyZ2V0Lm1hdHJpeFdvcmxkKTtjLnN1YlZlY3RvcnMoYixhKTt0aGlzLmxpZ2h0UGxhbmUubG9va0F0KGMpO3RoaXMubGlnaHRQbGFuZS5tYXRlcmlhbC5jb2xvci5jb3B5KHRoaXMubGlnaHQuY29sb3IpLm11bHRpcGx5U2NhbGFyKHRoaXMubGlnaHQuaW50ZW5zaXR5KTt0aGlzLnRhcmdldExpbmUuZ2VvbWV0cnkudmVydGljZXNbMV0uY29weShjKTt0aGlzLnRhcmdldExpbmUuZ2VvbWV0cnkudmVydGljZXNOZWVkVXBkYXRlPSEwO3RoaXMudGFyZ2V0TGluZS5tYXRlcmlhbC5jb2xvci5jb3B5KHRoaXMubGlnaHRQbGFuZS5tYXRlcmlhbC5jb2xvcil9fSgpO1RIUkVFLkZhY2VOb3JtYWxzSGVscGVyPWZ1bmN0aW9uKGEsYixjLGQpe3RoaXMub2JqZWN0PWE7dGhpcy5zaXplPWJ8fDE7Zm9yKHZhciBhPWN8fDE2Nzc2OTYwLGQ9ZHx8MSxiPW5ldyBUSFJFRS5HZW9tZXRyeSxjPTAsZT10aGlzLm9iamVjdC5nZW9tZXRyeS5mYWNlcy5sZW5ndGg7YzxlO2MrKyliLnZlcnRpY2VzLnB1c2gobmV3IFRIUkVFLlZlY3RvcjMpLGIudmVydGljZXMucHVzaChuZXcgVEhSRUUuVmVjdG9yMyk7VEhSRUUuTGluZS5jYWxsKHRoaXMsYixuZXcgVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWwoe2NvbG9yOmEsbGluZXdpZHRoOmR9KSxUSFJFRS5MaW5lUGllY2VzKTt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ITE7dGhpcy5ub3JtYWxNYXRyaXg9bmV3IFRIUkVFLk1hdHJpeDM7dGhpcy51cGRhdGUoKX07VEhSRUUuRmFjZU5vcm1hbHNIZWxwZXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTGluZS5wcm90b3R5cGUpO1xuVEhSRUUuRmFjZU5vcm1hbHNIZWxwZXIucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbigpe3RoaXMub2JqZWN0LnVwZGF0ZU1hdHJpeFdvcmxkKCEwKTt0aGlzLm5vcm1hbE1hdHJpeC5nZXROb3JtYWxNYXRyaXgodGhpcy5vYmplY3QubWF0cml4V29ybGQpO2Zvcih2YXIgYj10aGlzLmdlb21ldHJ5LnZlcnRpY2VzLGM9dGhpcy5vYmplY3QuZ2VvbWV0cnkuZmFjZXMsZD10aGlzLm9iamVjdC5tYXRyaXhXb3JsZCxlPTAsZj1jLmxlbmd0aDtlPGY7ZSsrKXt2YXIgaD1jW2VdO2EuY29weShoLm5vcm1hbCkuYXBwbHlNYXRyaXgzKHRoaXMubm9ybWFsTWF0cml4KS5ub3JtYWxpemUoKS5tdWx0aXBseVNjYWxhcih0aGlzLnNpemUpO3ZhciBnPTIqZTtiW2ddLmNvcHkoaC5jZW50cm9pZCkuYXBwbHlNYXRyaXg0KGQpO2JbZysxXS5hZGRWZWN0b3JzKGJbZ10sYSl9dGhpcy5nZW9tZXRyeS52ZXJ0aWNlc05lZWRVcGRhdGU9XG4hMDtyZXR1cm4gdGhpc319KCk7VEhSRUUuR3JpZEhlbHBlcj1mdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBUSFJFRS5HZW9tZXRyeSxkPW5ldyBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCh7dmVydGV4Q29sb3JzOlRIUkVFLlZlcnRleENvbG9yc30pO3RoaXMuY29sb3IxPW5ldyBUSFJFRS5Db2xvcig0NDczOTI0KTt0aGlzLmNvbG9yMj1uZXcgVEhSRUUuQ29sb3IoODk0Nzg0OCk7Zm9yKHZhciBlPS1hO2U8PWE7ZSs9Yil7Yy52ZXJ0aWNlcy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IzKC1hLDAsZSksbmV3IFRIUkVFLlZlY3RvcjMoYSwwLGUpLG5ldyBUSFJFRS5WZWN0b3IzKGUsMCwtYSksbmV3IFRIUkVFLlZlY3RvcjMoZSwwLGEpKTt2YXIgZj0wPT09ZT90aGlzLmNvbG9yMTp0aGlzLmNvbG9yMjtjLmNvbG9ycy5wdXNoKGYsZixmLGYpfVRIUkVFLkxpbmUuY2FsbCh0aGlzLGMsZCxUSFJFRS5MaW5lUGllY2VzKX07VEhSRUUuR3JpZEhlbHBlci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5MaW5lLnByb3RvdHlwZSk7XG5USFJFRS5HcmlkSGVscGVyLnByb3RvdHlwZS5zZXRDb2xvcnM9ZnVuY3Rpb24oYSxiKXt0aGlzLmNvbG9yMS5zZXQoYSk7dGhpcy5jb2xvcjIuc2V0KGIpO3RoaXMuZ2VvbWV0cnkuY29sb3JzTmVlZFVwZGF0ZT0hMH07VEhSRUUuSGVtaXNwaGVyZUxpZ2h0SGVscGVyPWZ1bmN0aW9uKGEsYil7VEhSRUUuT2JqZWN0M0QuY2FsbCh0aGlzKTt0aGlzLmxpZ2h0PWE7dGhpcy5saWdodC51cGRhdGVNYXRyaXhXb3JsZCgpO3RoaXMubWF0cml4V29ybGQ9YS5tYXRyaXhXb3JsZDt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ITE7dGhpcy5jb2xvcnM9W25ldyBUSFJFRS5Db2xvcixuZXcgVEhSRUUuQ29sb3JdO3ZhciBjPW5ldyBUSFJFRS5TcGhlcmVHZW9tZXRyeShiLDQsMik7Yy5hcHBseU1hdHJpeCgobmV3IFRIUkVFLk1hdHJpeDQpLm1ha2VSb3RhdGlvblgoLU1hdGguUEkvMikpO2Zvcih2YXIgZD0wOzg+ZDtkKyspYy5mYWNlc1tkXS5jb2xvcj10aGlzLmNvbG9yc1s0PmQ/MDoxXTtkPW5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7dmVydGV4Q29sb3JzOlRIUkVFLkZhY2VDb2xvcnMsd2lyZWZyYW1lOiEwfSk7dGhpcy5saWdodFNwaGVyZT1uZXcgVEhSRUUuTWVzaChjLGQpO3RoaXMuYWRkKHRoaXMubGlnaHRTcGhlcmUpO1xudGhpcy51cGRhdGUoKX07VEhSRUUuSGVtaXNwaGVyZUxpZ2h0SGVscGVyLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSk7VEhSRUUuSGVtaXNwaGVyZUxpZ2h0SGVscGVyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5saWdodFNwaGVyZS5nZW9tZXRyeS5kaXNwb3NlKCk7dGhpcy5saWdodFNwaGVyZS5tYXRlcmlhbC5kaXNwb3NlKCl9O1xuVEhSRUUuSGVtaXNwaGVyZUxpZ2h0SGVscGVyLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oKXt0aGlzLmNvbG9yc1swXS5jb3B5KHRoaXMubGlnaHQuY29sb3IpLm11bHRpcGx5U2NhbGFyKHRoaXMubGlnaHQuaW50ZW5zaXR5KTt0aGlzLmNvbG9yc1sxXS5jb3B5KHRoaXMubGlnaHQuZ3JvdW5kQ29sb3IpLm11bHRpcGx5U2NhbGFyKHRoaXMubGlnaHQuaW50ZW5zaXR5KTt0aGlzLmxpZ2h0U3BoZXJlLmxvb2tBdChhLnNldEZyb21NYXRyaXhQb3NpdGlvbih0aGlzLmxpZ2h0Lm1hdHJpeFdvcmxkKS5uZWdhdGUoKSk7dGhpcy5saWdodFNwaGVyZS5nZW9tZXRyeS5jb2xvcnNOZWVkVXBkYXRlPSEwfX0oKTtUSFJFRS5Qb2ludExpZ2h0SGVscGVyPWZ1bmN0aW9uKGEsYil7dGhpcy5saWdodD1hO3RoaXMubGlnaHQudXBkYXRlTWF0cml4V29ybGQoKTt2YXIgYz1uZXcgVEhSRUUuU3BoZXJlR2VvbWV0cnkoYiw0LDIpLGQ9bmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHt3aXJlZnJhbWU6ITAsZm9nOiExfSk7ZC5jb2xvci5jb3B5KHRoaXMubGlnaHQuY29sb3IpLm11bHRpcGx5U2NhbGFyKHRoaXMubGlnaHQuaW50ZW5zaXR5KTtUSFJFRS5NZXNoLmNhbGwodGhpcyxjLGQpO3RoaXMubWF0cml4V29ybGQ9dGhpcy5saWdodC5tYXRyaXhXb3JsZDt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ITF9O1RIUkVFLlBvaW50TGlnaHRIZWxwZXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTWVzaC5wcm90b3R5cGUpO1RIUkVFLlBvaW50TGlnaHRIZWxwZXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLmdlb21ldHJ5LmRpc3Bvc2UoKTt0aGlzLm1hdGVyaWFsLmRpc3Bvc2UoKX07XG5USFJFRS5Qb2ludExpZ2h0SGVscGVyLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt0aGlzLm1hdGVyaWFsLmNvbG9yLmNvcHkodGhpcy5saWdodC5jb2xvcikubXVsdGlwbHlTY2FsYXIodGhpcy5saWdodC5pbnRlbnNpdHkpfTtUSFJFRS5TcG90TGlnaHRIZWxwZXI9ZnVuY3Rpb24oYSl7VEhSRUUuT2JqZWN0M0QuY2FsbCh0aGlzKTt0aGlzLmxpZ2h0PWE7dGhpcy5saWdodC51cGRhdGVNYXRyaXhXb3JsZCgpO3RoaXMubWF0cml4V29ybGQ9YS5tYXRyaXhXb3JsZDt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ITE7YT1uZXcgVEhSRUUuQ3lsaW5kZXJHZW9tZXRyeSgwLDEsMSw4LDEsITApO2EuYXBwbHlNYXRyaXgoKG5ldyBUSFJFRS5NYXRyaXg0KS5tYWtlVHJhbnNsYXRpb24oMCwtMC41LDApKTthLmFwcGx5TWF0cml4KChuZXcgVEhSRUUuTWF0cml4NCkubWFrZVJvdGF0aW9uWCgtTWF0aC5QSS8yKSk7dmFyIGI9bmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHt3aXJlZnJhbWU6ITAsZm9nOiExfSk7dGhpcy5jb25lPW5ldyBUSFJFRS5NZXNoKGEsYik7dGhpcy5hZGQodGhpcy5jb25lKTt0aGlzLnVwZGF0ZSgpfTtUSFJFRS5TcG90TGlnaHRIZWxwZXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlKTtcblRIUkVFLlNwb3RMaWdodEhlbHBlci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuY29uZS5nZW9tZXRyeS5kaXNwb3NlKCk7dGhpcy5jb25lLm1hdGVyaWFsLmRpc3Bvc2UoKX07VEhSRUUuU3BvdExpZ2h0SGVscGVyLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMyxiPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbigpe3ZhciBjPXRoaXMubGlnaHQuZGlzdGFuY2U/dGhpcy5saWdodC5kaXN0YW5jZToxRTQsZD1jKk1hdGgudGFuKHRoaXMubGlnaHQuYW5nbGUpO3RoaXMuY29uZS5zY2FsZS5zZXQoZCxkLGMpO2Euc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHRoaXMubGlnaHQubWF0cml4V29ybGQpO2Iuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHRoaXMubGlnaHQudGFyZ2V0Lm1hdHJpeFdvcmxkKTt0aGlzLmNvbmUubG9va0F0KGIuc3ViKGEpKTt0aGlzLmNvbmUubWF0ZXJpYWwuY29sb3IuY29weSh0aGlzLmxpZ2h0LmNvbG9yKS5tdWx0aXBseVNjYWxhcih0aGlzLmxpZ2h0LmludGVuc2l0eSl9fSgpO1RIUkVFLlZlcnRleE5vcm1hbHNIZWxwZXI9ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy5vYmplY3Q9YTt0aGlzLnNpemU9Ynx8MTtmb3IodmFyIGI9Y3x8MTY3MTE2ODAsZD1kfHwxLGM9bmV3IFRIUkVFLkdlb21ldHJ5LGE9YS5nZW9tZXRyeS5mYWNlcyxlPTAsZj1hLmxlbmd0aDtlPGY7ZSsrKWZvcih2YXIgaD0wLGc9YVtlXS52ZXJ0ZXhOb3JtYWxzLmxlbmd0aDtoPGc7aCsrKWMudmVydGljZXMucHVzaChuZXcgVEhSRUUuVmVjdG9yMyksYy52ZXJ0aWNlcy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IzKTtUSFJFRS5MaW5lLmNhbGwodGhpcyxjLG5ldyBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCh7Y29sb3I6YixsaW5ld2lkdGg6ZH0pLFRIUkVFLkxpbmVQaWVjZXMpO3RoaXMubWF0cml4QXV0b1VwZGF0ZT0hMTt0aGlzLm5vcm1hbE1hdHJpeD1uZXcgVEhSRUUuTWF0cml4Mzt0aGlzLnVwZGF0ZSgpfTtUSFJFRS5WZXJ0ZXhOb3JtYWxzSGVscGVyLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkxpbmUucHJvdG90eXBlKTtcblRIUkVFLlZlcnRleE5vcm1hbHNIZWxwZXIucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbigpe3ZhciBiPVtcImFcIixcImJcIixcImNcIixcImRcIl07dGhpcy5vYmplY3QudXBkYXRlTWF0cml4V29ybGQoITApO3RoaXMubm9ybWFsTWF0cml4LmdldE5vcm1hbE1hdHJpeCh0aGlzLm9iamVjdC5tYXRyaXhXb3JsZCk7Zm9yKHZhciBjPXRoaXMuZ2VvbWV0cnkudmVydGljZXMsZD10aGlzLm9iamVjdC5nZW9tZXRyeS52ZXJ0aWNlcyxlPXRoaXMub2JqZWN0Lmdlb21ldHJ5LmZhY2VzLGY9dGhpcy5vYmplY3QubWF0cml4V29ybGQsaD0wLGc9MCxpPWUubGVuZ3RoO2c8aTtnKyspZm9yKHZhciBrPWVbZ10sbT0wLGw9ay52ZXJ0ZXhOb3JtYWxzLmxlbmd0aDttPGw7bSsrKXt2YXIgcD1rLnZlcnRleE5vcm1hbHNbbV07Y1toXS5jb3B5KGRba1tiW21dXV0pLmFwcGx5TWF0cml4NChmKTthLmNvcHkocCkuYXBwbHlNYXRyaXgzKHRoaXMubm9ybWFsTWF0cml4KS5ub3JtYWxpemUoKS5tdWx0aXBseVNjYWxhcih0aGlzLnNpemUpO1xuYS5hZGQoY1toXSk7aCs9MTtjW2hdLmNvcHkoYSk7aCs9MX10aGlzLmdlb21ldHJ5LnZlcnRpY2VzTmVlZFVwZGF0ZT0hMDtyZXR1cm4gdGhpc319KCk7VEhSRUUuVmVydGV4VGFuZ2VudHNIZWxwZXI9ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy5vYmplY3Q9YTt0aGlzLnNpemU9Ynx8MTtmb3IodmFyIGI9Y3x8MjU1LGQ9ZHx8MSxjPW5ldyBUSFJFRS5HZW9tZXRyeSxhPWEuZ2VvbWV0cnkuZmFjZXMsZT0wLGY9YS5sZW5ndGg7ZTxmO2UrKylmb3IodmFyIGg9MCxnPWFbZV0udmVydGV4VGFuZ2VudHMubGVuZ3RoO2g8ZztoKyspYy52ZXJ0aWNlcy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IzKSxjLnZlcnRpY2VzLnB1c2gobmV3IFRIUkVFLlZlY3RvcjMpO1RIUkVFLkxpbmUuY2FsbCh0aGlzLGMsbmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKHtjb2xvcjpiLGxpbmV3aWR0aDpkfSksVEhSRUUuTGluZVBpZWNlcyk7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPSExO3RoaXMudXBkYXRlKCl9O1RIUkVFLlZlcnRleFRhbmdlbnRzSGVscGVyLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkxpbmUucHJvdG90eXBlKTtcblRIUkVFLlZlcnRleFRhbmdlbnRzSGVscGVyLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYj1bXCJhXCIsXCJiXCIsXCJjXCIsXCJkXCJdO3RoaXMub2JqZWN0LnVwZGF0ZU1hdHJpeFdvcmxkKCEwKTtmb3IodmFyIGM9dGhpcy5nZW9tZXRyeS52ZXJ0aWNlcyxkPXRoaXMub2JqZWN0Lmdlb21ldHJ5LnZlcnRpY2VzLGU9dGhpcy5vYmplY3QuZ2VvbWV0cnkuZmFjZXMsZj10aGlzLm9iamVjdC5tYXRyaXhXb3JsZCxoPTAsZz0wLGk9ZS5sZW5ndGg7ZzxpO2crKylmb3IodmFyIGs9ZVtnXSxtPTAsbD1rLnZlcnRleFRhbmdlbnRzLmxlbmd0aDttPGw7bSsrKXt2YXIgcD1rLnZlcnRleFRhbmdlbnRzW21dO2NbaF0uY29weShkW2tbYlttXV1dKS5hcHBseU1hdHJpeDQoZik7YS5jb3B5KHApLnRyYW5zZm9ybURpcmVjdGlvbihmKS5tdWx0aXBseVNjYWxhcih0aGlzLnNpemUpO2EuYWRkKGNbaF0pO2grPTE7Y1toXS5jb3B5KGEpO1xuaCs9MX10aGlzLmdlb21ldHJ5LnZlcnRpY2VzTmVlZFVwZGF0ZT0hMDtyZXR1cm4gdGhpc319KCk7VEhSRUUuV2lyZWZyYW1lSGVscGVyPWZ1bmN0aW9uKGEpe3ZhciBiPVswLDBdLGM9e30sZD1mdW5jdGlvbihhLGIpe3JldHVybiBhLWJ9LGU9W1wiYVwiLFwiYlwiLFwiY1wiLFwiZFwiXSxmPW5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeSxoPTA7aWYoYS5nZW9tZXRyeSBpbnN0YW5jZW9mIFRIUkVFLkdlb21ldHJ5KXtmb3IodmFyIGc9YS5nZW9tZXRyeS52ZXJ0aWNlcyxpPWEuZ2VvbWV0cnkuZmFjZXMsaz1uZXcgVWludDMyQXJyYXkoNippLmxlbmd0aCksbT0wLGw9aS5sZW5ndGg7bTxsO20rKylmb3IodmFyIHA9aVttXSx0PTA7Mz50O3QrKyl7YlswXT1wW2VbdF1dO2JbMV09cFtlWyh0KzEpJTNdXTtiLnNvcnQoZCk7dmFyIHM9Yi50b1N0cmluZygpO3ZvaWQgMD09PWNbc10mJihrWzIqaF09YlswXSxrWzIqaCsxXT1iWzFdLGNbc109ITAsaCsrKX1mLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsRmxvYXQzMkFycmF5LDIqaCwzKTtiPWYuYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheTttPTA7Zm9yKGw9XG5oO208bDttKyspZm9yKHQ9MDsyPnQ7dCsrKWg9Z1trWzIqbSt0XV0sZT02Km0rMyp0LGJbZSswXT1oLngsYltlKzFdPWgueSxiW2UrMl09aC56fWVsc2V7Zz1hLmdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXk7aT1hLmdlb21ldHJ5LmF0dHJpYnV0ZXMuaW5kZXguYXJyYXk7az1uZXcgVWludDMyQXJyYXkoMippLmxlbmd0aCk7bT0wO2ZvcihsPWkubGVuZ3RoLzM7bTxsO20rKylmb3IodD0wOzM+dDt0KyspZT0zKm0sYlswXT1pW2UrdF0sYlsxXT1pW2UrKHQrMSklM10sYi5zb3J0KGQpLHM9Yi50b1N0cmluZygpLHZvaWQgMD09PWNbc10mJihrWzIqaF09YlswXSxrWzIqaCsxXT1iWzFdLGNbc109ITAsaCsrKTtmLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsRmxvYXQzMkFycmF5LDIqaCwzKTtiPWYuYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheTttPTA7Zm9yKGw9aDttPGw7bSsrKWZvcih0PTA7Mj50O3QrKyllPTYqbSszKnQsaD0zKmtbMiptK3RdLGJbZSswXT1nW2hdLFxuYltlKzFdPWdbaCsxXSxiW2UrMl09Z1toKzJdfVRIUkVFLkxpbmUuY2FsbCh0aGlzLGYsbmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKHtjb2xvcjoxNjc3NzIxNX0pLFRIUkVFLkxpbmVQaWVjZXMpO3RoaXMubWF0cml4QXV0b1VwZGF0ZT0hMTt0aGlzLm1hdHJpeFdvcmxkPWEubWF0cml4V29ybGR9O1RIUkVFLldpcmVmcmFtZUhlbHBlci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5MaW5lLnByb3RvdHlwZSk7VEhSRUUuSW1tZWRpYXRlUmVuZGVyT2JqZWN0PWZ1bmN0aW9uKCl7VEhSRUUuT2JqZWN0M0QuY2FsbCh0aGlzKTt0aGlzLnJlbmRlcj1mdW5jdGlvbigpe319O1RIUkVFLkltbWVkaWF0ZVJlbmRlck9iamVjdC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUpO1RIUkVFLkxlbnNGbGFyZT1mdW5jdGlvbihhLGIsYyxkLGUpe1RIUkVFLk9iamVjdDNELmNhbGwodGhpcyk7dGhpcy5sZW5zRmxhcmVzPVtdO3RoaXMucG9zaXRpb25TY3JlZW49bmV3IFRIUkVFLlZlY3RvcjM7dGhpcy5jdXN0b21VcGRhdGVDYWxsYmFjaz12b2lkIDA7dm9pZCAwIT09YSYmdGhpcy5hZGQoYSxiLGMsZCxlKX07VEhSRUUuTGVuc0ZsYXJlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSk7XG5USFJFRS5MZW5zRmxhcmUucHJvdG90eXBlLmFkZD1mdW5jdGlvbihhLGIsYyxkLGUsZil7dm9pZCAwPT09YiYmKGI9LTEpO3ZvaWQgMD09PWMmJihjPTApO3ZvaWQgMD09PWYmJihmPTEpO3ZvaWQgMD09PWUmJihlPW5ldyBUSFJFRS5Db2xvcigxNjc3NzIxNSkpO3ZvaWQgMD09PWQmJihkPVRIUkVFLk5vcm1hbEJsZW5kaW5nKTtjPU1hdGgubWluKGMsTWF0aC5tYXgoMCxjKSk7dGhpcy5sZW5zRmxhcmVzLnB1c2goe3RleHR1cmU6YSxzaXplOmIsZGlzdGFuY2U6Yyx4OjAseTowLHo6MCxzY2FsZToxLHJvdGF0aW9uOjEsb3BhY2l0eTpmLGNvbG9yOmUsYmxlbmRpbmc6ZH0pfTtcblRIUkVFLkxlbnNGbGFyZS5wcm90b3R5cGUudXBkYXRlTGVuc0ZsYXJlcz1mdW5jdGlvbigpe3ZhciBhLGI9dGhpcy5sZW5zRmxhcmVzLmxlbmd0aCxjLGQ9MiotdGhpcy5wb3NpdGlvblNjcmVlbi54LGU9MiotdGhpcy5wb3NpdGlvblNjcmVlbi55O2ZvcihhPTA7YTxiO2ErKyljPXRoaXMubGVuc0ZsYXJlc1thXSxjLng9dGhpcy5wb3NpdGlvblNjcmVlbi54K2QqYy5kaXN0YW5jZSxjLnk9dGhpcy5wb3NpdGlvblNjcmVlbi55K2UqYy5kaXN0YW5jZSxjLndhbnRlZFJvdGF0aW9uPTAuMjUqYy54Kk1hdGguUEksYy5yb3RhdGlvbis9MC4yNSooYy53YW50ZWRSb3RhdGlvbi1jLnJvdGF0aW9uKX07VEhSRUUuTW9ycGhCbGVuZE1lc2g9ZnVuY3Rpb24oYSxiKXtUSFJFRS5NZXNoLmNhbGwodGhpcyxhLGIpO3RoaXMuYW5pbWF0aW9uc01hcD17fTt0aGlzLmFuaW1hdGlvbnNMaXN0PVtdO3ZhciBjPXRoaXMuZ2VvbWV0cnkubW9ycGhUYXJnZXRzLmxlbmd0aDt0aGlzLmNyZWF0ZUFuaW1hdGlvbihcIl9fZGVmYXVsdFwiLDAsYy0xLGMvMSk7dGhpcy5zZXRBbmltYXRpb25XZWlnaHQoXCJfX2RlZmF1bHRcIiwxKX07VEhSRUUuTW9ycGhCbGVuZE1lc2gucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTWVzaC5wcm90b3R5cGUpO1xuVEhSRUUuTW9ycGhCbGVuZE1lc2gucHJvdG90eXBlLmNyZWF0ZUFuaW1hdGlvbj1mdW5jdGlvbihhLGIsYyxkKXtiPXtzdGFydEZyYW1lOmIsZW5kRnJhbWU6YyxsZW5ndGg6Yy1iKzEsZnBzOmQsZHVyYXRpb246KGMtYikvZCxsYXN0RnJhbWU6MCxjdXJyZW50RnJhbWU6MCxhY3RpdmU6ITEsdGltZTowLGRpcmVjdGlvbjoxLHdlaWdodDoxLGRpcmVjdGlvbkJhY2t3YXJkczohMSxtaXJyb3JlZExvb3A6ITF9O3RoaXMuYW5pbWF0aW9uc01hcFthXT1iO3RoaXMuYW5pbWF0aW9uc0xpc3QucHVzaChiKX07XG5USFJFRS5Nb3JwaEJsZW5kTWVzaC5wcm90b3R5cGUuYXV0b0NyZWF0ZUFuaW1hdGlvbnM9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPS8oW2Etel0rKShcXGQrKS8sYyxkPXt9LGU9dGhpcy5nZW9tZXRyeSxmPTAsaD1lLm1vcnBoVGFyZ2V0cy5sZW5ndGg7ZjxoO2YrKyl7dmFyIGc9ZS5tb3JwaFRhcmdldHNbZl0ubmFtZS5tYXRjaChiKTtpZihnJiYxPGcubGVuZ3RoKXt2YXIgaT1nWzFdO2RbaV18fChkW2ldPXtzdGFydDpJbmZpbml0eSxlbmQ6LUluZmluaXR5fSk7Zz1kW2ldO2Y8Zy5zdGFydCYmKGcuc3RhcnQ9Zik7Zj5nLmVuZCYmKGcuZW5kPWYpO2N8fChjPWkpfX1mb3IoaSBpbiBkKWc9ZFtpXSx0aGlzLmNyZWF0ZUFuaW1hdGlvbihpLGcuc3RhcnQsZy5lbmQsYSk7dGhpcy5maXJzdEFuaW1hdGlvbj1jfTtcblRIUkVFLk1vcnBoQmxlbmRNZXNoLnByb3RvdHlwZS5zZXRBbmltYXRpb25EaXJlY3Rpb25Gb3J3YXJkPWZ1bmN0aW9uKGEpe2lmKGE9dGhpcy5hbmltYXRpb25zTWFwW2FdKWEuZGlyZWN0aW9uPTEsYS5kaXJlY3Rpb25CYWNrd2FyZHM9ITF9O1RIUkVFLk1vcnBoQmxlbmRNZXNoLnByb3RvdHlwZS5zZXRBbmltYXRpb25EaXJlY3Rpb25CYWNrd2FyZD1mdW5jdGlvbihhKXtpZihhPXRoaXMuYW5pbWF0aW9uc01hcFthXSlhLmRpcmVjdGlvbj0tMSxhLmRpcmVjdGlvbkJhY2t3YXJkcz0hMH07VEhSRUUuTW9ycGhCbGVuZE1lc2gucHJvdG90eXBlLnNldEFuaW1hdGlvbkZQUz1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuYW5pbWF0aW9uc01hcFthXTtjJiYoYy5mcHM9YixjLmR1cmF0aW9uPShjLmVuZC1jLnN0YXJ0KS9jLmZwcyl9O1xuVEhSRUUuTW9ycGhCbGVuZE1lc2gucHJvdG90eXBlLnNldEFuaW1hdGlvbkR1cmF0aW9uPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5hbmltYXRpb25zTWFwW2FdO2MmJihjLmR1cmF0aW9uPWIsYy5mcHM9KGMuZW5kLWMuc3RhcnQpL2MuZHVyYXRpb24pfTtUSFJFRS5Nb3JwaEJsZW5kTWVzaC5wcm90b3R5cGUuc2V0QW5pbWF0aW9uV2VpZ2h0PWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5hbmltYXRpb25zTWFwW2FdO2MmJihjLndlaWdodD1iKX07VEhSRUUuTW9ycGhCbGVuZE1lc2gucHJvdG90eXBlLnNldEFuaW1hdGlvblRpbWU9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmFuaW1hdGlvbnNNYXBbYV07YyYmKGMudGltZT1iKX07VEhSRUUuTW9ycGhCbGVuZE1lc2gucHJvdG90eXBlLmdldEFuaW1hdGlvblRpbWU9ZnVuY3Rpb24oYSl7dmFyIGI9MDtpZihhPXRoaXMuYW5pbWF0aW9uc01hcFthXSliPWEudGltZTtyZXR1cm4gYn07XG5USFJFRS5Nb3JwaEJsZW5kTWVzaC5wcm90b3R5cGUuZ2V0QW5pbWF0aW9uRHVyYXRpb249ZnVuY3Rpb24oYSl7dmFyIGI9LTE7aWYoYT10aGlzLmFuaW1hdGlvbnNNYXBbYV0pYj1hLmR1cmF0aW9uO3JldHVybiBifTtUSFJFRS5Nb3JwaEJsZW5kTWVzaC5wcm90b3R5cGUucGxheUFuaW1hdGlvbj1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmFuaW1hdGlvbnNNYXBbYV07Yj8oYi50aW1lPTAsYi5hY3RpdmU9ITApOmNvbnNvbGUud2FybihcImFuaW1hdGlvbltcIithK1wiXSB1bmRlZmluZWRcIil9O1RIUkVFLk1vcnBoQmxlbmRNZXNoLnByb3RvdHlwZS5zdG9wQW5pbWF0aW9uPWZ1bmN0aW9uKGEpe2lmKGE9dGhpcy5hbmltYXRpb25zTWFwW2FdKWEuYWN0aXZlPSExfTtcblRIUkVFLk1vcnBoQmxlbmRNZXNoLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYz10aGlzLmFuaW1hdGlvbnNMaXN0Lmxlbmd0aDtiPGM7YisrKXt2YXIgZD10aGlzLmFuaW1hdGlvbnNMaXN0W2JdO2lmKGQuYWN0aXZlKXt2YXIgZT1kLmR1cmF0aW9uL2QubGVuZ3RoO2QudGltZSs9ZC5kaXJlY3Rpb24qYTtpZihkLm1pcnJvcmVkTG9vcCl7aWYoZC50aW1lPmQuZHVyYXRpb258fDA+ZC50aW1lKWQuZGlyZWN0aW9uKj0tMSxkLnRpbWU+ZC5kdXJhdGlvbiYmKGQudGltZT1kLmR1cmF0aW9uLGQuZGlyZWN0aW9uQmFja3dhcmRzPSEwKSwwPmQudGltZSYmKGQudGltZT0wLGQuZGlyZWN0aW9uQmFja3dhcmRzPSExKX1lbHNlIGQudGltZSU9ZC5kdXJhdGlvbiwwPmQudGltZSYmKGQudGltZSs9ZC5kdXJhdGlvbik7dmFyIGY9ZC5zdGFydEZyYW1lK1RIUkVFLk1hdGguY2xhbXAoTWF0aC5mbG9vcihkLnRpbWUvZSksMCxkLmxlbmd0aC0xKSxoPWQud2VpZ2h0O1xuZiE9PWQuY3VycmVudEZyYW1lJiYodGhpcy5tb3JwaFRhcmdldEluZmx1ZW5jZXNbZC5sYXN0RnJhbWVdPTAsdGhpcy5tb3JwaFRhcmdldEluZmx1ZW5jZXNbZC5jdXJyZW50RnJhbWVdPTEqaCx0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1tmXT0wLGQubGFzdEZyYW1lPWQuY3VycmVudEZyYW1lLGQuY3VycmVudEZyYW1lPWYpO2U9ZC50aW1lJWUvZTtkLmRpcmVjdGlvbkJhY2t3YXJkcyYmKGU9MS1lKTt0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1tkLmN1cnJlbnRGcmFtZV09ZSpoO3RoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzW2QubGFzdEZyYW1lXT0oMS1lKSpofX19O1RIUkVFLkxlbnNGbGFyZVBsdWdpbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxjKXt2YXIgZD1iLmNyZWF0ZVByb2dyYW0oKSxlPWIuY3JlYXRlU2hhZGVyKGIuRlJBR01FTlRfU0hBREVSKSxmPWIuY3JlYXRlU2hhZGVyKGIuVkVSVEVYX1NIQURFUiksZz1cInByZWNpc2lvbiBcIitjK1wiIGZsb2F0O1xcblwiO2Iuc2hhZGVyU291cmNlKGUsZythLmZyYWdtZW50U2hhZGVyKTtiLnNoYWRlclNvdXJjZShmLGcrYS52ZXJ0ZXhTaGFkZXIpO2IuY29tcGlsZVNoYWRlcihlKTtiLmNvbXBpbGVTaGFkZXIoZik7Yi5hdHRhY2hTaGFkZXIoZCxlKTtiLmF0dGFjaFNoYWRlcihkLGYpO2IubGlua1Byb2dyYW0oZCk7cmV0dXJuIGR9dmFyIGIsYyxkLGUsZixoLGcsaSxrLG0sbCxwLHQ7dGhpcy5pbml0PWZ1bmN0aW9uKHMpe2I9cy5jb250ZXh0O2M9cztkPXMuZ2V0UHJlY2lzaW9uKCk7ZT1uZXcgRmxvYXQzMkFycmF5KDE2KTtmPW5ldyBVaW50MTZBcnJheSg2KTtzPTA7ZVtzKytdPS0xO2VbcysrXT0tMTtcbmVbcysrXT0wO2VbcysrXT0wO2VbcysrXT0xO2VbcysrXT0tMTtlW3MrK109MTtlW3MrK109MDtlW3MrK109MTtlW3MrK109MTtlW3MrK109MTtlW3MrK109MTtlW3MrK109LTE7ZVtzKytdPTE7ZVtzKytdPTA7ZVtzKytdPTE7cz0wO2ZbcysrXT0wO2ZbcysrXT0xO2ZbcysrXT0yO2ZbcysrXT0wO2ZbcysrXT0yO2ZbcysrXT0zO2g9Yi5jcmVhdGVCdWZmZXIoKTtnPWIuY3JlYXRlQnVmZmVyKCk7Yi5iaW5kQnVmZmVyKGIuQVJSQVlfQlVGRkVSLGgpO2IuYnVmZmVyRGF0YShiLkFSUkFZX0JVRkZFUixlLGIuU1RBVElDX0RSQVcpO2IuYmluZEJ1ZmZlcihiLkVMRU1FTlRfQVJSQVlfQlVGRkVSLGcpO2IuYnVmZmVyRGF0YShiLkVMRU1FTlRfQVJSQVlfQlVGRkVSLGYsYi5TVEFUSUNfRFJBVyk7aT1iLmNyZWF0ZVRleHR1cmUoKTtrPWIuY3JlYXRlVGV4dHVyZSgpO2IuYmluZFRleHR1cmUoYi5URVhUVVJFXzJELGkpO2IudGV4SW1hZ2UyRChiLlRFWFRVUkVfMkQsMCxiLlJHQiwxNiwxNixcbjAsYi5SR0IsYi5VTlNJR05FRF9CWVRFLG51bGwpO2IudGV4UGFyYW1ldGVyaShiLlRFWFRVUkVfMkQsYi5URVhUVVJFX1dSQVBfUyxiLkNMQU1QX1RPX0VER0UpO2IudGV4UGFyYW1ldGVyaShiLlRFWFRVUkVfMkQsYi5URVhUVVJFX1dSQVBfVCxiLkNMQU1QX1RPX0VER0UpO2IudGV4UGFyYW1ldGVyaShiLlRFWFRVUkVfMkQsYi5URVhUVVJFX01BR19GSUxURVIsYi5ORUFSRVNUKTtiLnRleFBhcmFtZXRlcmkoYi5URVhUVVJFXzJELGIuVEVYVFVSRV9NSU5fRklMVEVSLGIuTkVBUkVTVCk7Yi5iaW5kVGV4dHVyZShiLlRFWFRVUkVfMkQsayk7Yi50ZXhJbWFnZTJEKGIuVEVYVFVSRV8yRCwwLGIuUkdCQSwxNiwxNiwwLGIuUkdCQSxiLlVOU0lHTkVEX0JZVEUsbnVsbCk7Yi50ZXhQYXJhbWV0ZXJpKGIuVEVYVFVSRV8yRCxiLlRFWFRVUkVfV1JBUF9TLGIuQ0xBTVBfVE9fRURHRSk7Yi50ZXhQYXJhbWV0ZXJpKGIuVEVYVFVSRV8yRCxiLlRFWFRVUkVfV1JBUF9ULGIuQ0xBTVBfVE9fRURHRSk7XG5iLnRleFBhcmFtZXRlcmkoYi5URVhUVVJFXzJELGIuVEVYVFVSRV9NQUdfRklMVEVSLGIuTkVBUkVTVCk7Yi50ZXhQYXJhbWV0ZXJpKGIuVEVYVFVSRV8yRCxiLlRFWFRVUkVfTUlOX0ZJTFRFUixiLk5FQVJFU1QpOzA+PWIuZ2V0UGFyYW1ldGVyKGIuTUFYX1ZFUlRFWF9URVhUVVJFX0lNQUdFX1VOSVRTKT8obT0hMSxsPWEoVEhSRUUuU2hhZGVyRmxhcmVzLmxlbnNGbGFyZSxkKSk6KG09ITAsbD1hKFRIUkVFLlNoYWRlckZsYXJlcy5sZW5zRmxhcmVWZXJ0ZXhUZXh0dXJlLGQpKTtwPXt9O3Q9e307cC52ZXJ0ZXg9Yi5nZXRBdHRyaWJMb2NhdGlvbihsLFwicG9zaXRpb25cIik7cC51dj1iLmdldEF0dHJpYkxvY2F0aW9uKGwsXCJ1dlwiKTt0LnJlbmRlclR5cGU9Yi5nZXRVbmlmb3JtTG9jYXRpb24obCxcInJlbmRlclR5cGVcIik7dC5tYXA9Yi5nZXRVbmlmb3JtTG9jYXRpb24obCxcIm1hcFwiKTt0Lm9jY2x1c2lvbk1hcD1iLmdldFVuaWZvcm1Mb2NhdGlvbihsLFwib2NjbHVzaW9uTWFwXCIpO3Qub3BhY2l0eT1cbmIuZ2V0VW5pZm9ybUxvY2F0aW9uKGwsXCJvcGFjaXR5XCIpO3QuY29sb3I9Yi5nZXRVbmlmb3JtTG9jYXRpb24obCxcImNvbG9yXCIpO3Quc2NhbGU9Yi5nZXRVbmlmb3JtTG9jYXRpb24obCxcInNjYWxlXCIpO3Qucm90YXRpb249Yi5nZXRVbmlmb3JtTG9jYXRpb24obCxcInJvdGF0aW9uXCIpO3Quc2NyZWVuUG9zaXRpb249Yi5nZXRVbmlmb3JtTG9jYXRpb24obCxcInNjcmVlblBvc2l0aW9uXCIpfTt0aGlzLnJlbmRlcj1mdW5jdGlvbihhLGQsZSxmKXt2YXIgYT1hLl9fd2ViZ2xGbGFyZXMscj1hLmxlbmd0aDtpZihyKXt2YXIgdj1uZXcgVEhSRUUuVmVjdG9yMyx6PWYvZSxHPTAuNSplLHc9MC41KmYseT0xNi9mLEU9bmV3IFRIUkVFLlZlY3RvcjIoeSp6LHkpLEE9bmV3IFRIUkVFLlZlY3RvcjMoMSwxLDApLEs9bmV3IFRIUkVFLlZlY3RvcjIoMSwxKSxEPXQseT1wO2IudXNlUHJvZ3JhbShsKTtiLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHAudmVydGV4KTtiLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHAudXYpO1xuYi51bmlmb3JtMWkoRC5vY2NsdXNpb25NYXAsMCk7Yi51bmlmb3JtMWkoRC5tYXAsMSk7Yi5iaW5kQnVmZmVyKGIuQVJSQVlfQlVGRkVSLGgpO2IudmVydGV4QXR0cmliUG9pbnRlcih5LnZlcnRleCwyLGIuRkxPQVQsITEsMTYsMCk7Yi52ZXJ0ZXhBdHRyaWJQb2ludGVyKHkudXYsMixiLkZMT0FULCExLDE2LDgpO2IuYmluZEJ1ZmZlcihiLkVMRU1FTlRfQVJSQVlfQlVGRkVSLGcpO2IuZGlzYWJsZShiLkNVTExfRkFDRSk7Yi5kZXB0aE1hc2soITEpO3ZhciBGLE8seCxJLEI7Zm9yKEY9MDtGPHI7RisrKWlmKHk9MTYvZixFLnNldCh5KnoseSksST1hW0ZdLHYuc2V0KEkubWF0cml4V29ybGQuZWxlbWVudHNbMTJdLEkubWF0cml4V29ybGQuZWxlbWVudHNbMTNdLEkubWF0cml4V29ybGQuZWxlbWVudHNbMTRdKSx2LmFwcGx5TWF0cml4NChkLm1hdHJpeFdvcmxkSW52ZXJzZSksdi5hcHBseVByb2plY3Rpb24oZC5wcm9qZWN0aW9uTWF0cml4KSxBLmNvcHkodiksSy54PUEueCpHK0csXG5LLnk9QS55KncrdyxtfHwwPEsueCYmSy54PGUmJjA8Sy55JiZLLnk8Zil7Yi5hY3RpdmVUZXh0dXJlKGIuVEVYVFVSRTEpO2IuYmluZFRleHR1cmUoYi5URVhUVVJFXzJELGkpO2IuY29weVRleEltYWdlMkQoYi5URVhUVVJFXzJELDAsYi5SR0IsSy54LTgsSy55LTgsMTYsMTYsMCk7Yi51bmlmb3JtMWkoRC5yZW5kZXJUeXBlLDApO2IudW5pZm9ybTJmKEQuc2NhbGUsRS54LEUueSk7Yi51bmlmb3JtM2YoRC5zY3JlZW5Qb3NpdGlvbixBLngsQS55LEEueik7Yi5kaXNhYmxlKGIuQkxFTkQpO2IuZW5hYmxlKGIuREVQVEhfVEVTVCk7Yi5kcmF3RWxlbWVudHMoYi5UUklBTkdMRVMsNixiLlVOU0lHTkVEX1NIT1JULDApO2IuYWN0aXZlVGV4dHVyZShiLlRFWFRVUkUwKTtiLmJpbmRUZXh0dXJlKGIuVEVYVFVSRV8yRCxrKTtiLmNvcHlUZXhJbWFnZTJEKGIuVEVYVFVSRV8yRCwwLGIuUkdCQSxLLngtOCxLLnktOCwxNiwxNiwwKTtiLnVuaWZvcm0xaShELnJlbmRlclR5cGUsMSk7Yi5kaXNhYmxlKGIuREVQVEhfVEVTVCk7XG5iLmFjdGl2ZVRleHR1cmUoYi5URVhUVVJFMSk7Yi5iaW5kVGV4dHVyZShiLlRFWFRVUkVfMkQsaSk7Yi5kcmF3RWxlbWVudHMoYi5UUklBTkdMRVMsNixiLlVOU0lHTkVEX1NIT1JULDApO0kucG9zaXRpb25TY3JlZW4uY29weShBKTtJLmN1c3RvbVVwZGF0ZUNhbGxiYWNrP0kuY3VzdG9tVXBkYXRlQ2FsbGJhY2soSSk6SS51cGRhdGVMZW5zRmxhcmVzKCk7Yi51bmlmb3JtMWkoRC5yZW5kZXJUeXBlLDIpO2IuZW5hYmxlKGIuQkxFTkQpO089MDtmb3IoeD1JLmxlbnNGbGFyZXMubGVuZ3RoO088eDtPKyspQj1JLmxlbnNGbGFyZXNbT10sMC4wMDE8Qi5vcGFjaXR5JiYwLjAwMTxCLnNjYWxlJiYoQS54PUIueCxBLnk9Qi55LEEuej1CLnoseT1CLnNpemUqQi5zY2FsZS9mLEUueD15KnosRS55PXksYi51bmlmb3JtM2YoRC5zY3JlZW5Qb3NpdGlvbixBLngsQS55LEEueiksYi51bmlmb3JtMmYoRC5zY2FsZSxFLngsRS55KSxiLnVuaWZvcm0xZihELnJvdGF0aW9uLEIucm90YXRpb24pLGIudW5pZm9ybTFmKEQub3BhY2l0eSxcbkIub3BhY2l0eSksYi51bmlmb3JtM2YoRC5jb2xvcixCLmNvbG9yLnIsQi5jb2xvci5nLEIuY29sb3IuYiksYy5zZXRCbGVuZGluZyhCLmJsZW5kaW5nLEIuYmxlbmRFcXVhdGlvbixCLmJsZW5kU3JjLEIuYmxlbmREc3QpLGMuc2V0VGV4dHVyZShCLnRleHR1cmUsMSksYi5kcmF3RWxlbWVudHMoYi5UUklBTkdMRVMsNixiLlVOU0lHTkVEX1NIT1JULDApKX1iLmVuYWJsZShiLkNVTExfRkFDRSk7Yi5lbmFibGUoYi5ERVBUSF9URVNUKTtiLmRlcHRoTWFzayghMCl9fX07VEhSRUUuU2hhZG93TWFwUGx1Z2luPWZ1bmN0aW9uKCl7dmFyIGEsYixjLGQsZSxmLGg9bmV3IFRIUkVFLkZydXN0dW0sZz1uZXcgVEhSRUUuTWF0cml4NCxpPW5ldyBUSFJFRS5WZWN0b3IzLGs9bmV3IFRIUkVFLlZlY3RvcjMsbT1uZXcgVEhSRUUuVmVjdG9yMzt0aGlzLmluaXQ9ZnVuY3Rpb24oZyl7YT1nLmNvbnRleHQ7Yj1nO3ZhciBnPVRIUkVFLlNoYWRlckxpYi5kZXB0aFJHQkEsaD1USFJFRS5Vbmlmb3Jtc1V0aWxzLmNsb25lKGcudW5pZm9ybXMpO2M9bmV3IFRIUkVFLlNoYWRlck1hdGVyaWFsKHtmcmFnbWVudFNoYWRlcjpnLmZyYWdtZW50U2hhZGVyLHZlcnRleFNoYWRlcjpnLnZlcnRleFNoYWRlcix1bmlmb3JtczpofSk7ZD1uZXcgVEhSRUUuU2hhZGVyTWF0ZXJpYWwoe2ZyYWdtZW50U2hhZGVyOmcuZnJhZ21lbnRTaGFkZXIsdmVydGV4U2hhZGVyOmcudmVydGV4U2hhZGVyLHVuaWZvcm1zOmgsbW9ycGhUYXJnZXRzOiEwfSk7ZT1uZXcgVEhSRUUuU2hhZGVyTWF0ZXJpYWwoe2ZyYWdtZW50U2hhZGVyOmcuZnJhZ21lbnRTaGFkZXIsXG52ZXJ0ZXhTaGFkZXI6Zy52ZXJ0ZXhTaGFkZXIsdW5pZm9ybXM6aCxza2lubmluZzohMH0pO2Y9bmV3IFRIUkVFLlNoYWRlck1hdGVyaWFsKHtmcmFnbWVudFNoYWRlcjpnLmZyYWdtZW50U2hhZGVyLHZlcnRleFNoYWRlcjpnLnZlcnRleFNoYWRlcix1bmlmb3JtczpoLG1vcnBoVGFyZ2V0czohMCxza2lubmluZzohMH0pO2MuX3NoYWRvd1Bhc3M9ITA7ZC5fc2hhZG93UGFzcz0hMDtlLl9zaGFkb3dQYXNzPSEwO2YuX3NoYWRvd1Bhc3M9ITB9O3RoaXMucmVuZGVyPWZ1bmN0aW9uKGEsYyl7Yi5zaGFkb3dNYXBFbmFibGVkJiZiLnNoYWRvd01hcEF1dG9VcGRhdGUmJnRoaXMudXBkYXRlKGEsYyl9O3RoaXMudXBkYXRlPWZ1bmN0aW9uKGwscCl7dmFyIHQscyxxLG4sdSxyLHYseixHLHc9W107bj0wO2EuY2xlYXJDb2xvcigxLDEsMSwxKTthLmRpc2FibGUoYS5CTEVORCk7YS5lbmFibGUoYS5DVUxMX0ZBQ0UpO2EuZnJvbnRGYWNlKGEuQ0NXKTtiLnNoYWRvd01hcEN1bGxGYWNlPT09VEhSRUUuQ3VsbEZhY2VGcm9udD9cbmEuY3VsbEZhY2UoYS5GUk9OVCk6YS5jdWxsRmFjZShhLkJBQ0spO2Iuc2V0RGVwdGhUZXN0KCEwKTt0PTA7Zm9yKHM9bC5fX2xpZ2h0cy5sZW5ndGg7dDxzO3QrKylpZihxPWwuX19saWdodHNbdF0scS5jYXN0U2hhZG93KWlmKHEgaW5zdGFuY2VvZiBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0JiZxLnNoYWRvd0Nhc2NhZGUpZm9yKHU9MDt1PHEuc2hhZG93Q2FzY2FkZUNvdW50O3UrKyl7dmFyIHk7aWYocS5zaGFkb3dDYXNjYWRlQXJyYXlbdV0peT1xLnNoYWRvd0Nhc2NhZGVBcnJheVt1XTtlbHNle0c9cTt2PXU7eT1uZXcgVEhSRUUuRGlyZWN0aW9uYWxMaWdodDt5LmlzVmlydHVhbD0hMDt5Lm9ubHlTaGFkb3c9ITA7eS5jYXN0U2hhZG93PSEwO3kuc2hhZG93Q2FtZXJhTmVhcj1HLnNoYWRvd0NhbWVyYU5lYXI7eS5zaGFkb3dDYW1lcmFGYXI9Ry5zaGFkb3dDYW1lcmFGYXI7eS5zaGFkb3dDYW1lcmFMZWZ0PUcuc2hhZG93Q2FtZXJhTGVmdDt5LnNoYWRvd0NhbWVyYVJpZ2h0PUcuc2hhZG93Q2FtZXJhUmlnaHQ7XG55LnNoYWRvd0NhbWVyYUJvdHRvbT1HLnNoYWRvd0NhbWVyYUJvdHRvbTt5LnNoYWRvd0NhbWVyYVRvcD1HLnNoYWRvd0NhbWVyYVRvcDt5LnNoYWRvd0NhbWVyYVZpc2libGU9Ry5zaGFkb3dDYW1lcmFWaXNpYmxlO3kuc2hhZG93RGFya25lc3M9Ry5zaGFkb3dEYXJrbmVzczt5LnNoYWRvd0JpYXM9Ry5zaGFkb3dDYXNjYWRlQmlhc1t2XTt5LnNoYWRvd01hcFdpZHRoPUcuc2hhZG93Q2FzY2FkZVdpZHRoW3ZdO3kuc2hhZG93TWFwSGVpZ2h0PUcuc2hhZG93Q2FzY2FkZUhlaWdodFt2XTt5LnBvaW50c1dvcmxkPVtdO3kucG9pbnRzRnJ1c3R1bT1bXTt6PXkucG9pbnRzV29ybGQ7cj15LnBvaW50c0ZydXN0dW07Zm9yKHZhciBFPTA7OD5FO0UrKyl6W0VdPW5ldyBUSFJFRS5WZWN0b3IzLHJbRV09bmV3IFRIUkVFLlZlY3RvcjM7ej1HLnNoYWRvd0Nhc2NhZGVOZWFyWlt2XTtHPUcuc2hhZG93Q2FzY2FkZUZhclpbdl07clswXS5zZXQoLTEsLTEseik7clsxXS5zZXQoMSwtMSx6KTtyWzJdLnNldCgtMSxcbjEseik7clszXS5zZXQoMSwxLHopO3JbNF0uc2V0KC0xLC0xLEcpO3JbNV0uc2V0KDEsLTEsRyk7cls2XS5zZXQoLTEsMSxHKTtyWzddLnNldCgxLDEsRyk7eS5vcmlnaW5hbENhbWVyYT1wO3I9bmV3IFRIUkVFLkd5cm9zY29wZTtyLnBvc2l0aW9uPXEuc2hhZG93Q2FzY2FkZU9mZnNldDtyLmFkZCh5KTtyLmFkZCh5LnRhcmdldCk7cC5hZGQocik7cS5zaGFkb3dDYXNjYWRlQXJyYXlbdV09eTtjb25zb2xlLmxvZyhcIkNyZWF0ZWQgdmlydHVhbExpZ2h0XCIseSl9dj1xO3o9dTtHPXYuc2hhZG93Q2FzY2FkZUFycmF5W3pdO0cucG9zaXRpb24uY29weSh2LnBvc2l0aW9uKTtHLnRhcmdldC5wb3NpdGlvbi5jb3B5KHYudGFyZ2V0LnBvc2l0aW9uKTtHLmxvb2tBdChHLnRhcmdldCk7Ry5zaGFkb3dDYW1lcmFWaXNpYmxlPXYuc2hhZG93Q2FtZXJhVmlzaWJsZTtHLnNoYWRvd0RhcmtuZXNzPXYuc2hhZG93RGFya25lc3M7Ry5zaGFkb3dCaWFzPXYuc2hhZG93Q2FzY2FkZUJpYXNbel07cj12LnNoYWRvd0Nhc2NhZGVOZWFyWlt6XTtcbnY9di5zaGFkb3dDYXNjYWRlRmFyWlt6XTtHPUcucG9pbnRzRnJ1c3R1bTtHWzBdLno9cjtHWzFdLno9cjtHWzJdLno9cjtHWzNdLno9cjtHWzRdLno9djtHWzVdLno9djtHWzZdLno9djtHWzddLno9djt3W25dPXk7bisrfWVsc2Ugd1tuXT1xLG4rKzt0PTA7Zm9yKHM9dy5sZW5ndGg7dDxzO3QrKyl7cT13W3RdO3Euc2hhZG93TWFwfHwodT1USFJFRS5MaW5lYXJGaWx0ZXIsYi5zaGFkb3dNYXBUeXBlPT09VEhSRUUuUENGU29mdFNoYWRvd01hcCYmKHU9VEhSRUUuTmVhcmVzdEZpbHRlcikscS5zaGFkb3dNYXA9bmV3IFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0KHEuc2hhZG93TWFwV2lkdGgscS5zaGFkb3dNYXBIZWlnaHQse21pbkZpbHRlcjp1LG1hZ0ZpbHRlcjp1LGZvcm1hdDpUSFJFRS5SR0JBRm9ybWF0fSkscS5zaGFkb3dNYXBTaXplPW5ldyBUSFJFRS5WZWN0b3IyKHEuc2hhZG93TWFwV2lkdGgscS5zaGFkb3dNYXBIZWlnaHQpLHEuc2hhZG93TWF0cml4PW5ldyBUSFJFRS5NYXRyaXg0KTtcbmlmKCFxLnNoYWRvd0NhbWVyYSl7aWYocSBpbnN0YW5jZW9mIFRIUkVFLlNwb3RMaWdodClxLnNoYWRvd0NhbWVyYT1uZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEocS5zaGFkb3dDYW1lcmFGb3YscS5zaGFkb3dNYXBXaWR0aC9xLnNoYWRvd01hcEhlaWdodCxxLnNoYWRvd0NhbWVyYU5lYXIscS5zaGFkb3dDYW1lcmFGYXIpO2Vsc2UgaWYocSBpbnN0YW5jZW9mIFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQpcS5zaGFkb3dDYW1lcmE9bmV3IFRIUkVFLk9ydGhvZ3JhcGhpY0NhbWVyYShxLnNoYWRvd0NhbWVyYUxlZnQscS5zaGFkb3dDYW1lcmFSaWdodCxxLnNoYWRvd0NhbWVyYVRvcCxxLnNoYWRvd0NhbWVyYUJvdHRvbSxxLnNoYWRvd0NhbWVyYU5lYXIscS5zaGFkb3dDYW1lcmFGYXIpO2Vsc2V7Y29uc29sZS5lcnJvcihcIlVuc3VwcG9ydGVkIGxpZ2h0IHR5cGUgZm9yIHNoYWRvd1wiKTtjb250aW51ZX1sLmFkZChxLnNoYWRvd0NhbWVyYSk7ITA9PT1sLmF1dG9VcGRhdGUmJmwudXBkYXRlTWF0cml4V29ybGQoKX1xLnNoYWRvd0NhbWVyYVZpc2libGUmJlxuIXEuY2FtZXJhSGVscGVyJiYocS5jYW1lcmFIZWxwZXI9bmV3IFRIUkVFLkNhbWVyYUhlbHBlcihxLnNoYWRvd0NhbWVyYSkscS5zaGFkb3dDYW1lcmEuYWRkKHEuY2FtZXJhSGVscGVyKSk7aWYocS5pc1ZpcnR1YWwmJnkub3JpZ2luYWxDYW1lcmE9PXApe3U9cDtuPXEuc2hhZG93Q2FtZXJhO3I9cS5wb2ludHNGcnVzdHVtO0c9cS5wb2ludHNXb3JsZDtpLnNldChJbmZpbml0eSxJbmZpbml0eSxJbmZpbml0eSk7ay5zZXQoLUluZmluaXR5LC1JbmZpbml0eSwtSW5maW5pdHkpO2Zvcih2PTA7OD52O3YrKyl6PUdbdl0sei5jb3B5KHJbdl0pLFRIUkVFLlNoYWRvd01hcFBsdWdpbi5fX3Byb2plY3Rvci51bnByb2plY3RWZWN0b3Ioeix1KSx6LmFwcGx5TWF0cml4NChuLm1hdHJpeFdvcmxkSW52ZXJzZSksei54PGkueCYmKGkueD16LngpLHoueD5rLngmJihrLng9ei54KSx6Lnk8aS55JiYoaS55PXoueSksei55PmsueSYmKGsueT16LnkpLHouejxpLnomJihpLno9ei56KSx6Lno+ay56JiZcbihrLno9ei56KTtuLmxlZnQ9aS54O24ucmlnaHQ9ay54O24udG9wPWsueTtuLmJvdHRvbT1pLnk7bi51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCl9bj1xLnNoYWRvd01hcDtyPXEuc2hhZG93TWF0cml4O3U9cS5zaGFkb3dDYW1lcmE7dS5wb3NpdGlvbi5zZXRGcm9tTWF0cml4UG9zaXRpb24ocS5tYXRyaXhXb3JsZCk7bS5zZXRGcm9tTWF0cml4UG9zaXRpb24ocS50YXJnZXQubWF0cml4V29ybGQpO3UubG9va0F0KG0pO3UudXBkYXRlTWF0cml4V29ybGQoKTt1Lm1hdHJpeFdvcmxkSW52ZXJzZS5nZXRJbnZlcnNlKHUubWF0cml4V29ybGQpO3EuY2FtZXJhSGVscGVyJiYocS5jYW1lcmFIZWxwZXIudmlzaWJsZT1xLnNoYWRvd0NhbWVyYVZpc2libGUpO3Euc2hhZG93Q2FtZXJhVmlzaWJsZSYmcS5jYW1lcmFIZWxwZXIudXBkYXRlKCk7ci5zZXQoMC41LDAsMCwwLjUsMCwwLjUsMCwwLjUsMCwwLDAuNSwwLjUsMCwwLDAsMSk7ci5tdWx0aXBseSh1LnByb2plY3Rpb25NYXRyaXgpO3IubXVsdGlwbHkodS5tYXRyaXhXb3JsZEludmVyc2UpO1xuZy5tdWx0aXBseU1hdHJpY2VzKHUucHJvamVjdGlvbk1hdHJpeCx1Lm1hdHJpeFdvcmxkSW52ZXJzZSk7aC5zZXRGcm9tTWF0cml4KGcpO2Iuc2V0UmVuZGVyVGFyZ2V0KG4pO2IuY2xlYXIoKTtHPWwuX193ZWJnbE9iamVjdHM7cT0wO2ZvcihuPUcubGVuZ3RoO3E8bjtxKyspaWYodj1HW3FdLHI9di5vYmplY3Qsdi5yZW5kZXI9ITEsci52aXNpYmxlJiZyLmNhc3RTaGFkb3cmJighKHIgaW5zdGFuY2VvZiBUSFJFRS5NZXNofHxyIGluc3RhbmNlb2YgVEhSRUUuUGFydGljbGVTeXN0ZW0pfHwhci5mcnVzdHVtQ3VsbGVkfHxoLmludGVyc2VjdHNPYmplY3QocikpKXIuX21vZGVsVmlld01hdHJpeC5tdWx0aXBseU1hdHJpY2VzKHUubWF0cml4V29ybGRJbnZlcnNlLHIubWF0cml4V29ybGQpLHYucmVuZGVyPSEwO3E9MDtmb3Iobj1HLmxlbmd0aDtxPG47cSsrKXY9R1txXSx2LnJlbmRlciYmKHI9di5vYmplY3Qsdj12LmJ1ZmZlcixFPXIubWF0ZXJpYWwgaW5zdGFuY2VvZiBUSFJFRS5NZXNoRmFjZU1hdGVyaWFsP1xuci5tYXRlcmlhbC5tYXRlcmlhbHNbMF06ci5tYXRlcmlhbCx6PTA8ci5nZW9tZXRyeS5tb3JwaFRhcmdldHMubGVuZ3RoJiZFLm1vcnBoVGFyZ2V0cyxFPXIgaW5zdGFuY2VvZiBUSFJFRS5Ta2lubmVkTWVzaCYmRS5za2lubmluZyx6PXIuY3VzdG9tRGVwdGhNYXRlcmlhbD9yLmN1c3RvbURlcHRoTWF0ZXJpYWw6RT96P2Y6ZTp6P2Q6Yyx2IGluc3RhbmNlb2YgVEhSRUUuQnVmZmVyR2VvbWV0cnk/Yi5yZW5kZXJCdWZmZXJEaXJlY3QodSxsLl9fbGlnaHRzLG51bGwseix2LHIpOmIucmVuZGVyQnVmZmVyKHUsbC5fX2xpZ2h0cyxudWxsLHosdixyKSk7Rz1sLl9fd2ViZ2xPYmplY3RzSW1tZWRpYXRlO3E9MDtmb3Iobj1HLmxlbmd0aDtxPG47cSsrKXY9R1txXSxyPXYub2JqZWN0LHIudmlzaWJsZSYmci5jYXN0U2hhZG93JiYoci5fbW9kZWxWaWV3TWF0cml4Lm11bHRpcGx5TWF0cmljZXModS5tYXRyaXhXb3JsZEludmVyc2Usci5tYXRyaXhXb3JsZCksYi5yZW5kZXJJbW1lZGlhdGVPYmplY3QodSxcbmwuX19saWdodHMsbnVsbCxjLHIpKX10PWIuZ2V0Q2xlYXJDb2xvcigpO3M9Yi5nZXRDbGVhckFscGhhKCk7YS5jbGVhckNvbG9yKHQucix0LmcsdC5iLHMpO2EuZW5hYmxlKGEuQkxFTkQpO2Iuc2hhZG93TWFwQ3VsbEZhY2U9PT1USFJFRS5DdWxsRmFjZUZyb250JiZhLmN1bGxGYWNlKGEuQkFDSyl9fTtUSFJFRS5TaGFkb3dNYXBQbHVnaW4uX19wcm9qZWN0b3I9bmV3IFRIUkVFLlByb2plY3RvcjtUSFJFRS5TcHJpdGVQbHVnaW49ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZCxlLGYsaCxnLGksayxtLGwscCx0LHMscSxuO2Z1bmN0aW9uIHUoYSxiKXtyZXR1cm4gYS56IT09Yi56P2Iuei1hLno6Yi5pZC1hLmlkfXZhciByLHYseixHLHcseSxFLEE7dGhpcy5pbml0PWZ1bmN0aW9uKHUpe3I9dS5jb250ZXh0O3Y9dTtHPW5ldyBGbG9hdDMyQXJyYXkoWy0wLjUsLTAuNSwwLDAsMC41LC0wLjUsMSwwLDAuNSwwLjUsMSwxLC0wLjUsMC41LDAsMV0pO3c9bmV3IFVpbnQxNkFycmF5KFswLDEsMiwwLDIsM10pO3k9ci5jcmVhdGVCdWZmZXIoKTtFPXIuY3JlYXRlQnVmZmVyKCk7ci5iaW5kQnVmZmVyKHIuQVJSQVlfQlVGRkVSLHkpO3IuYnVmZmVyRGF0YShyLkFSUkFZX0JVRkZFUixHLHIuU1RBVElDX0RSQVcpO3IuYmluZEJ1ZmZlcihyLkVMRU1FTlRfQVJSQVlfQlVGRkVSLEUpO3IuYnVmZmVyRGF0YShyLkVMRU1FTlRfQVJSQVlfQlVGRkVSLHcsci5TVEFUSUNfRFJBVyk7dmFyIHU9ci5jcmVhdGVQcm9ncmFtKCksXG5EPXIuY3JlYXRlU2hhZGVyKHIuVkVSVEVYX1NIQURFUiksRj1yLmNyZWF0ZVNoYWRlcihyLkZSQUdNRU5UX1NIQURFUik7ci5zaGFkZXJTb3VyY2UoRCxbXCJwcmVjaXNpb24gXCIrdi5nZXRQcmVjaXNpb24oKStcIiBmbG9hdDtcIixcInVuaWZvcm0gbWF0NCBtb2RlbFZpZXdNYXRyaXg7XFxudW5pZm9ybSBtYXQ0IHByb2plY3Rpb25NYXRyaXg7XFxudW5pZm9ybSBmbG9hdCByb3RhdGlvbjtcXG51bmlmb3JtIHZlYzIgc2NhbGU7XFxudW5pZm9ybSB2ZWMyIHV2T2Zmc2V0O1xcbnVuaWZvcm0gdmVjMiB1dlNjYWxlO1xcbmF0dHJpYnV0ZSB2ZWMyIHBvc2l0aW9uO1xcbmF0dHJpYnV0ZSB2ZWMyIHV2O1xcbnZhcnlpbmcgdmVjMiB2VVY7XFxudm9pZCBtYWluKCkge1xcbnZVViA9IHV2T2Zmc2V0ICsgdXYgKiB1dlNjYWxlO1xcbnZlYzIgYWxpZ25lZFBvc2l0aW9uID0gcG9zaXRpb24gKiBzY2FsZTtcXG52ZWMyIHJvdGF0ZWRQb3NpdGlvbjtcXG5yb3RhdGVkUG9zaXRpb24ueCA9IGNvcyggcm90YXRpb24gKSAqIGFsaWduZWRQb3NpdGlvbi54IC0gc2luKCByb3RhdGlvbiApICogYWxpZ25lZFBvc2l0aW9uLnk7XFxucm90YXRlZFBvc2l0aW9uLnkgPSBzaW4oIHJvdGF0aW9uICkgKiBhbGlnbmVkUG9zaXRpb24ueCArIGNvcyggcm90YXRpb24gKSAqIGFsaWduZWRQb3NpdGlvbi55O1xcbnZlYzQgZmluYWxQb3NpdGlvbjtcXG5maW5hbFBvc2l0aW9uID0gbW9kZWxWaWV3TWF0cml4ICogdmVjNCggMC4wLCAwLjAsIDAuMCwgMS4wICk7XFxuZmluYWxQb3NpdGlvbi54eSArPSByb3RhdGVkUG9zaXRpb247XFxuZmluYWxQb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBmaW5hbFBvc2l0aW9uO1xcbmdsX1Bvc2l0aW9uID0gZmluYWxQb3NpdGlvbjtcXG59XCJdLmpvaW4oXCJcXG5cIikpO1xuci5zaGFkZXJTb3VyY2UoRixbXCJwcmVjaXNpb24gXCIrdi5nZXRQcmVjaXNpb24oKStcIiBmbG9hdDtcIixcInVuaWZvcm0gdmVjMyBjb2xvcjtcXG51bmlmb3JtIHNhbXBsZXIyRCBtYXA7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbnVuaWZvcm0gaW50IGZvZ1R5cGU7XFxudW5pZm9ybSB2ZWMzIGZvZ0NvbG9yO1xcbnVuaWZvcm0gZmxvYXQgZm9nRGVuc2l0eTtcXG51bmlmb3JtIGZsb2F0IGZvZ05lYXI7XFxudW5pZm9ybSBmbG9hdCBmb2dGYXI7XFxudW5pZm9ybSBmbG9hdCBhbHBoYVRlc3Q7XFxudmFyeWluZyB2ZWMyIHZVVjtcXG52b2lkIG1haW4oKSB7XFxudmVjNCB0ZXh0dXJlID0gdGV4dHVyZTJEKCBtYXAsIHZVViApO1xcbmlmICggdGV4dHVyZS5hIDwgYWxwaGFUZXN0ICkgZGlzY2FyZDtcXG5nbF9GcmFnQ29sb3IgPSB2ZWM0KCBjb2xvciAqIHRleHR1cmUueHl6LCB0ZXh0dXJlLmEgKiBvcGFjaXR5ICk7XFxuaWYgKCBmb2dUeXBlID4gMCApIHtcXG5mbG9hdCBkZXB0aCA9IGdsX0ZyYWdDb29yZC56IC8gZ2xfRnJhZ0Nvb3JkLnc7XFxuZmxvYXQgZm9nRmFjdG9yID0gMC4wO1xcbmlmICggZm9nVHlwZSA9PSAxICkge1xcbmZvZ0ZhY3RvciA9IHNtb290aHN0ZXAoIGZvZ05lYXIsIGZvZ0ZhciwgZGVwdGggKTtcXG59IGVsc2Uge1xcbmNvbnN0IGZsb2F0IExPRzIgPSAxLjQ0MjY5NTtcXG5mbG9hdCBmb2dGYWN0b3IgPSBleHAyKCAtIGZvZ0RlbnNpdHkgKiBmb2dEZW5zaXR5ICogZGVwdGggKiBkZXB0aCAqIExPRzIgKTtcXG5mb2dGYWN0b3IgPSAxLjAgLSBjbGFtcCggZm9nRmFjdG9yLCAwLjAsIDEuMCApO1xcbn1cXG5nbF9GcmFnQ29sb3IgPSBtaXgoIGdsX0ZyYWdDb2xvciwgdmVjNCggZm9nQ29sb3IsIGdsX0ZyYWdDb2xvci53ICksIGZvZ0ZhY3RvciApO1xcbn1cXG59XCJdLmpvaW4oXCJcXG5cIikpO1xuci5jb21waWxlU2hhZGVyKEQpO3IuY29tcGlsZVNoYWRlcihGKTtyLmF0dGFjaFNoYWRlcih1LEQpO3IuYXR0YWNoU2hhZGVyKHUsRik7ci5saW5rUHJvZ3JhbSh1KTtBPXU7cT1yLmdldEF0dHJpYkxvY2F0aW9uKEEsXCJwb3NpdGlvblwiKTtuPXIuZ2V0QXR0cmliTG9jYXRpb24oQSxcInV2XCIpO2E9ci5nZXRVbmlmb3JtTG9jYXRpb24oQSxcInV2T2Zmc2V0XCIpO2I9ci5nZXRVbmlmb3JtTG9jYXRpb24oQSxcInV2U2NhbGVcIik7Yz1yLmdldFVuaWZvcm1Mb2NhdGlvbihBLFwicm90YXRpb25cIik7ZD1yLmdldFVuaWZvcm1Mb2NhdGlvbihBLFwic2NhbGVcIik7ZT1yLmdldFVuaWZvcm1Mb2NhdGlvbihBLFwiY29sb3JcIik7Zj1yLmdldFVuaWZvcm1Mb2NhdGlvbihBLFwibWFwXCIpO2g9ci5nZXRVbmlmb3JtTG9jYXRpb24oQSxcIm9wYWNpdHlcIik7Zz1yLmdldFVuaWZvcm1Mb2NhdGlvbihBLFwibW9kZWxWaWV3TWF0cml4XCIpO2k9ci5nZXRVbmlmb3JtTG9jYXRpb24oQSxcInByb2plY3Rpb25NYXRyaXhcIik7az1cbnIuZ2V0VW5pZm9ybUxvY2F0aW9uKEEsXCJmb2dUeXBlXCIpO209ci5nZXRVbmlmb3JtTG9jYXRpb24oQSxcImZvZ0RlbnNpdHlcIik7bD1yLmdldFVuaWZvcm1Mb2NhdGlvbihBLFwiZm9nTmVhclwiKTtwPXIuZ2V0VW5pZm9ybUxvY2F0aW9uKEEsXCJmb2dGYXJcIik7dD1yLmdldFVuaWZvcm1Mb2NhdGlvbihBLFwiZm9nQ29sb3JcIik7cz1yLmdldFVuaWZvcm1Mb2NhdGlvbihBLFwiYWxwaGFUZXN0XCIpO3U9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTt1LndpZHRoPTg7dS5oZWlnaHQ9ODtEPXUuZ2V0Q29udGV4dChcIjJkXCIpO0QuZmlsbFN0eWxlPVwiI2ZmZmZmZlwiO0QuZmlsbFJlY3QoMCwwLHUud2lkdGgsdS5oZWlnaHQpO3o9bmV3IFRIUkVFLlRleHR1cmUodSk7ei5uZWVkc1VwZGF0ZT0hMH07dGhpcy5yZW5kZXI9ZnVuY3Rpb24odyxEKXt2YXIgRj13Ll9fd2ViZ2xTcHJpdGVzLEc9Ri5sZW5ndGg7aWYoRyl7ci51c2VQcm9ncmFtKEEpO3IuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkocSk7XG5yLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KG4pO3IuZGlzYWJsZShyLkNVTExfRkFDRSk7ci5lbmFibGUoci5CTEVORCk7ci5iaW5kQnVmZmVyKHIuQVJSQVlfQlVGRkVSLHkpO3IudmVydGV4QXR0cmliUG9pbnRlcihxLDIsci5GTE9BVCwhMSwxNiwwKTtyLnZlcnRleEF0dHJpYlBvaW50ZXIobiwyLHIuRkxPQVQsITEsMTYsOCk7ci5iaW5kQnVmZmVyKHIuRUxFTUVOVF9BUlJBWV9CVUZGRVIsRSk7ci51bmlmb3JtTWF0cml4NGZ2KGksITEsRC5wcm9qZWN0aW9uTWF0cml4LmVsZW1lbnRzKTtyLmFjdGl2ZVRleHR1cmUoci5URVhUVVJFMCk7ci51bmlmb3JtMWkoZiwwKTt2YXIgeD0wLEk9MCxCPXcuZm9nO0I/KHIudW5pZm9ybTNmKHQsQi5jb2xvci5yLEIuY29sb3IuZyxCLmNvbG9yLmIpLEIgaW5zdGFuY2VvZiBUSFJFRS5Gb2c/KHIudW5pZm9ybTFmKGwsQi5uZWFyKSxyLnVuaWZvcm0xZihwLEIuZmFyKSxyLnVuaWZvcm0xaShrLDEpLEk9eD0xKTpCIGluc3RhbmNlb2YgVEhSRUUuRm9nRXhwMiYmXG4oci51bmlmb3JtMWYobSxCLmRlbnNpdHkpLHIudW5pZm9ybTFpKGssMiksST14PTIpKTooci51bmlmb3JtMWkoaywwKSxJPXg9MCk7Zm9yKHZhciBNLEosY2E9W10sQj0wO0I8RztCKyspTT1GW0JdLCExIT09TS52aXNpYmxlJiYoTS5fbW9kZWxWaWV3TWF0cml4Lm11bHRpcGx5TWF0cmljZXMoRC5tYXRyaXhXb3JsZEludmVyc2UsTS5tYXRyaXhXb3JsZCksTS56PS1NLl9tb2RlbFZpZXdNYXRyaXguZWxlbWVudHNbMTRdKTtGLnNvcnQodSk7Zm9yKEI9MDtCPEc7QisrKU09RltCXSwhMSE9PU0udmlzaWJsZSYmKEo9TS5tYXRlcmlhbCxyLnVuaWZvcm0xZihzLEouYWxwaGFUZXN0KSxyLnVuaWZvcm1NYXRyaXg0ZnYoZywhMSxNLl9tb2RlbFZpZXdNYXRyaXguZWxlbWVudHMpLGNhWzBdPU0uc2NhbGUueCxjYVsxXT1NLnNjYWxlLnksTT13LmZvZyYmSi5mb2c/STowLHghPT1NJiYoci51bmlmb3JtMWkoayxNKSx4PU0pLHIudW5pZm9ybTJmKGIsSi51dlNjYWxlLngsSi51dlNjYWxlLnkpLFxuci51bmlmb3JtMmYoYSxKLnV2T2Zmc2V0LngsSi51dk9mZnNldC55KSxyLnVuaWZvcm0xZihoLEoub3BhY2l0eSksci51bmlmb3JtM2YoZSxKLmNvbG9yLnIsSi5jb2xvci5nLEouY29sb3IuYiksci51bmlmb3JtMWYoYyxKLnJvdGF0aW9uKSxyLnVuaWZvcm0yZnYoZCxjYSksdi5zZXRCbGVuZGluZyhKLmJsZW5kaW5nLEouYmxlbmRFcXVhdGlvbixKLmJsZW5kU3JjLEouYmxlbmREc3QpLHYuc2V0RGVwdGhUZXN0KEouZGVwdGhUZXN0KSx2LnNldERlcHRoV3JpdGUoSi5kZXB0aFdyaXRlKSxKLm1hcCYmSi5tYXAuaW1hZ2UmJkoubWFwLmltYWdlLndpZHRoP3Yuc2V0VGV4dHVyZShKLm1hcCwwKTp2LnNldFRleHR1cmUoeiwwKSxyLmRyYXdFbGVtZW50cyhyLlRSSUFOR0xFUyw2LHIuVU5TSUdORURfU0hPUlQsMCkpO3IuZW5hYmxlKHIuQ1VMTF9GQUNFKX19fTtUSFJFRS5EZXB0aFBhc3NQbHVnaW49ZnVuY3Rpb24oKXt0aGlzLmVuYWJsZWQ9ITE7dGhpcy5yZW5kZXJUYXJnZXQ9bnVsbDt2YXIgYSxiLGMsZCxlLGYsaD1uZXcgVEhSRUUuRnJ1c3R1bSxnPW5ldyBUSFJFRS5NYXRyaXg0O3RoaXMuaW5pdD1mdW5jdGlvbihnKXthPWcuY29udGV4dDtiPWc7dmFyIGc9VEhSRUUuU2hhZGVyTGliLmRlcHRoUkdCQSxoPVRIUkVFLlVuaWZvcm1zVXRpbHMuY2xvbmUoZy51bmlmb3Jtcyk7Yz1uZXcgVEhSRUUuU2hhZGVyTWF0ZXJpYWwoe2ZyYWdtZW50U2hhZGVyOmcuZnJhZ21lbnRTaGFkZXIsdmVydGV4U2hhZGVyOmcudmVydGV4U2hhZGVyLHVuaWZvcm1zOmh9KTtkPW5ldyBUSFJFRS5TaGFkZXJNYXRlcmlhbCh7ZnJhZ21lbnRTaGFkZXI6Zy5mcmFnbWVudFNoYWRlcix2ZXJ0ZXhTaGFkZXI6Zy52ZXJ0ZXhTaGFkZXIsdW5pZm9ybXM6aCxtb3JwaFRhcmdldHM6ITB9KTtlPW5ldyBUSFJFRS5TaGFkZXJNYXRlcmlhbCh7ZnJhZ21lbnRTaGFkZXI6Zy5mcmFnbWVudFNoYWRlcixcbnZlcnRleFNoYWRlcjpnLnZlcnRleFNoYWRlcix1bmlmb3JtczpoLHNraW5uaW5nOiEwfSk7Zj1uZXcgVEhSRUUuU2hhZGVyTWF0ZXJpYWwoe2ZyYWdtZW50U2hhZGVyOmcuZnJhZ21lbnRTaGFkZXIsdmVydGV4U2hhZGVyOmcudmVydGV4U2hhZGVyLHVuaWZvcm1zOmgsbW9ycGhUYXJnZXRzOiEwLHNraW5uaW5nOiEwfSk7Yy5fc2hhZG93UGFzcz0hMDtkLl9zaGFkb3dQYXNzPSEwO2UuX3NoYWRvd1Bhc3M9ITA7Zi5fc2hhZG93UGFzcz0hMH07dGhpcy5yZW5kZXI9ZnVuY3Rpb24oYSxiKXt0aGlzLmVuYWJsZWQmJnRoaXMudXBkYXRlKGEsYil9O3RoaXMudXBkYXRlPWZ1bmN0aW9uKGksayl7dmFyIG0sbCxwLHQscyxxO2EuY2xlYXJDb2xvcigxLDEsMSwxKTthLmRpc2FibGUoYS5CTEVORCk7Yi5zZXREZXB0aFRlc3QoITApOyEwPT09aS5hdXRvVXBkYXRlJiZpLnVwZGF0ZU1hdHJpeFdvcmxkKCk7ay5tYXRyaXhXb3JsZEludmVyc2UuZ2V0SW52ZXJzZShrLm1hdHJpeFdvcmxkKTtnLm11bHRpcGx5TWF0cmljZXMoay5wcm9qZWN0aW9uTWF0cml4LFxuay5tYXRyaXhXb3JsZEludmVyc2UpO2guc2V0RnJvbU1hdHJpeChnKTtiLnNldFJlbmRlclRhcmdldCh0aGlzLnJlbmRlclRhcmdldCk7Yi5jbGVhcigpO3E9aS5fX3dlYmdsT2JqZWN0czttPTA7Zm9yKGw9cS5sZW5ndGg7bTxsO20rKylpZihwPXFbbV0scz1wLm9iamVjdCxwLnJlbmRlcj0hMSxzLnZpc2libGUmJighKHMgaW5zdGFuY2VvZiBUSFJFRS5NZXNofHxzIGluc3RhbmNlb2YgVEhSRUUuUGFydGljbGVTeXN0ZW0pfHwhcy5mcnVzdHVtQ3VsbGVkfHxoLmludGVyc2VjdHNPYmplY3QocykpKXMuX21vZGVsVmlld01hdHJpeC5tdWx0aXBseU1hdHJpY2VzKGsubWF0cml4V29ybGRJbnZlcnNlLHMubWF0cml4V29ybGQpLHAucmVuZGVyPSEwO3ZhciBuO209MDtmb3IobD1xLmxlbmd0aDttPGw7bSsrKWlmKHA9cVttXSxwLnJlbmRlciYmKHM9cC5vYmplY3QscD1wLmJ1ZmZlciwhKHMgaW5zdGFuY2VvZiBUSFJFRS5QYXJ0aWNsZVN5c3RlbSl8fHMuY3VzdG9tRGVwdGhNYXRlcmlhbCkpKG49XG5zLm1hdGVyaWFsIGluc3RhbmNlb2YgVEhSRUUuTWVzaEZhY2VNYXRlcmlhbD9zLm1hdGVyaWFsLm1hdGVyaWFsc1swXTpzLm1hdGVyaWFsKSYmYi5zZXRNYXRlcmlhbEZhY2VzKHMubWF0ZXJpYWwpLHQ9MDxzLmdlb21ldHJ5Lm1vcnBoVGFyZ2V0cy5sZW5ndGgmJm4ubW9ycGhUYXJnZXRzLG49cyBpbnN0YW5jZW9mIFRIUkVFLlNraW5uZWRNZXNoJiZuLnNraW5uaW5nLHQ9cy5jdXN0b21EZXB0aE1hdGVyaWFsP3MuY3VzdG9tRGVwdGhNYXRlcmlhbDpuP3Q/ZjplOnQ/ZDpjLHAgaW5zdGFuY2VvZiBUSFJFRS5CdWZmZXJHZW9tZXRyeT9iLnJlbmRlckJ1ZmZlckRpcmVjdChrLGkuX19saWdodHMsbnVsbCx0LHAscyk6Yi5yZW5kZXJCdWZmZXIoayxpLl9fbGlnaHRzLG51bGwsdCxwLHMpO3E9aS5fX3dlYmdsT2JqZWN0c0ltbWVkaWF0ZTttPTA7Zm9yKGw9cS5sZW5ndGg7bTxsO20rKylwPXFbbV0scz1wLm9iamVjdCxzLnZpc2libGUmJihzLl9tb2RlbFZpZXdNYXRyaXgubXVsdGlwbHlNYXRyaWNlcyhrLm1hdHJpeFdvcmxkSW52ZXJzZSxcbnMubWF0cml4V29ybGQpLGIucmVuZGVySW1tZWRpYXRlT2JqZWN0KGssaS5fX2xpZ2h0cyxudWxsLGMscykpO209Yi5nZXRDbGVhckNvbG9yKCk7bD1iLmdldENsZWFyQWxwaGEoKTthLmNsZWFyQ29sb3IobS5yLG0uZyxtLmIsbCk7YS5lbmFibGUoYS5CTEVORCl9fTtUSFJFRS5TaGFkZXJGbGFyZXM9e2xlbnNGbGFyZVZlcnRleFRleHR1cmU6e3ZlcnRleFNoYWRlcjpcInVuaWZvcm0gbG93cCBpbnQgcmVuZGVyVHlwZTtcXG51bmlmb3JtIHZlYzMgc2NyZWVuUG9zaXRpb247XFxudW5pZm9ybSB2ZWMyIHNjYWxlO1xcbnVuaWZvcm0gZmxvYXQgcm90YXRpb247XFxudW5pZm9ybSBzYW1wbGVyMkQgb2NjbHVzaW9uTWFwO1xcbmF0dHJpYnV0ZSB2ZWMyIHBvc2l0aW9uO1xcbmF0dHJpYnV0ZSB2ZWMyIHV2O1xcbnZhcnlpbmcgdmVjMiB2VVY7XFxudmFyeWluZyBmbG9hdCB2VmlzaWJpbGl0eTtcXG52b2lkIG1haW4oKSB7XFxudlVWID0gdXY7XFxudmVjMiBwb3MgPSBwb3NpdGlvbjtcXG5pZiggcmVuZGVyVHlwZSA9PSAyICkge1xcbnZlYzQgdmlzaWJpbGl0eSA9IHRleHR1cmUyRCggb2NjbHVzaW9uTWFwLCB2ZWMyKCAwLjEsIDAuMSApICk7XFxudmlzaWJpbGl0eSArPSB0ZXh0dXJlMkQoIG9jY2x1c2lvbk1hcCwgdmVjMiggMC41LCAwLjEgKSApO1xcbnZpc2liaWxpdHkgKz0gdGV4dHVyZTJEKCBvY2NsdXNpb25NYXAsIHZlYzIoIDAuOSwgMC4xICkgKTtcXG52aXNpYmlsaXR5ICs9IHRleHR1cmUyRCggb2NjbHVzaW9uTWFwLCB2ZWMyKCAwLjksIDAuNSApICk7XFxudmlzaWJpbGl0eSArPSB0ZXh0dXJlMkQoIG9jY2x1c2lvbk1hcCwgdmVjMiggMC45LCAwLjkgKSApO1xcbnZpc2liaWxpdHkgKz0gdGV4dHVyZTJEKCBvY2NsdXNpb25NYXAsIHZlYzIoIDAuNSwgMC45ICkgKTtcXG52aXNpYmlsaXR5ICs9IHRleHR1cmUyRCggb2NjbHVzaW9uTWFwLCB2ZWMyKCAwLjEsIDAuOSApICk7XFxudmlzaWJpbGl0eSArPSB0ZXh0dXJlMkQoIG9jY2x1c2lvbk1hcCwgdmVjMiggMC4xLCAwLjUgKSApO1xcbnZpc2liaWxpdHkgKz0gdGV4dHVyZTJEKCBvY2NsdXNpb25NYXAsIHZlYzIoIDAuNSwgMC41ICkgKTtcXG52VmlzaWJpbGl0eSA9ICAgICAgICB2aXNpYmlsaXR5LnIgLyA5LjA7XFxudlZpc2liaWxpdHkgKj0gMS4wIC0gdmlzaWJpbGl0eS5nIC8gOS4wO1xcbnZWaXNpYmlsaXR5ICo9ICAgICAgIHZpc2liaWxpdHkuYiAvIDkuMDtcXG52VmlzaWJpbGl0eSAqPSAxLjAgLSB2aXNpYmlsaXR5LmEgLyA5LjA7XFxucG9zLnggPSBjb3MoIHJvdGF0aW9uICkgKiBwb3NpdGlvbi54IC0gc2luKCByb3RhdGlvbiApICogcG9zaXRpb24ueTtcXG5wb3MueSA9IHNpbiggcm90YXRpb24gKSAqIHBvc2l0aW9uLnggKyBjb3MoIHJvdGF0aW9uICkgKiBwb3NpdGlvbi55O1xcbn1cXG5nbF9Qb3NpdGlvbiA9IHZlYzQoICggcG9zICogc2NhbGUgKyBzY3JlZW5Qb3NpdGlvbi54eSApLnh5LCBzY3JlZW5Qb3NpdGlvbi56LCAxLjAgKTtcXG59XCIsXG5mcmFnbWVudFNoYWRlcjpcInVuaWZvcm0gbG93cCBpbnQgcmVuZGVyVHlwZTtcXG51bmlmb3JtIHNhbXBsZXIyRCBtYXA7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbnVuaWZvcm0gdmVjMyBjb2xvcjtcXG52YXJ5aW5nIHZlYzIgdlVWO1xcbnZhcnlpbmcgZmxvYXQgdlZpc2liaWxpdHk7XFxudm9pZCBtYWluKCkge1xcbmlmKCByZW5kZXJUeXBlID09IDAgKSB7XFxuZ2xfRnJhZ0NvbG9yID0gdmVjNCggMS4wLCAwLjAsIDEuMCwgMC4wICk7XFxufSBlbHNlIGlmKCByZW5kZXJUeXBlID09IDEgKSB7XFxuZ2xfRnJhZ0NvbG9yID0gdGV4dHVyZTJEKCBtYXAsIHZVViApO1xcbn0gZWxzZSB7XFxudmVjNCB0ZXh0dXJlID0gdGV4dHVyZTJEKCBtYXAsIHZVViApO1xcbnRleHR1cmUuYSAqPSBvcGFjaXR5ICogdlZpc2liaWxpdHk7XFxuZ2xfRnJhZ0NvbG9yID0gdGV4dHVyZTtcXG5nbF9GcmFnQ29sb3IucmdiICo9IGNvbG9yO1xcbn1cXG59XCJ9LGxlbnNGbGFyZTp7dmVydGV4U2hhZGVyOlwidW5pZm9ybSBsb3dwIGludCByZW5kZXJUeXBlO1xcbnVuaWZvcm0gdmVjMyBzY3JlZW5Qb3NpdGlvbjtcXG51bmlmb3JtIHZlYzIgc2NhbGU7XFxudW5pZm9ybSBmbG9hdCByb3RhdGlvbjtcXG5hdHRyaWJ1dGUgdmVjMiBwb3NpdGlvbjtcXG5hdHRyaWJ1dGUgdmVjMiB1djtcXG52YXJ5aW5nIHZlYzIgdlVWO1xcbnZvaWQgbWFpbigpIHtcXG52VVYgPSB1djtcXG52ZWMyIHBvcyA9IHBvc2l0aW9uO1xcbmlmKCByZW5kZXJUeXBlID09IDIgKSB7XFxucG9zLnggPSBjb3MoIHJvdGF0aW9uICkgKiBwb3NpdGlvbi54IC0gc2luKCByb3RhdGlvbiApICogcG9zaXRpb24ueTtcXG5wb3MueSA9IHNpbiggcm90YXRpb24gKSAqIHBvc2l0aW9uLnggKyBjb3MoIHJvdGF0aW9uICkgKiBwb3NpdGlvbi55O1xcbn1cXG5nbF9Qb3NpdGlvbiA9IHZlYzQoICggcG9zICogc2NhbGUgKyBzY3JlZW5Qb3NpdGlvbi54eSApLnh5LCBzY3JlZW5Qb3NpdGlvbi56LCAxLjAgKTtcXG59XCIsXG5mcmFnbWVudFNoYWRlcjpcInByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xcbnVuaWZvcm0gbG93cCBpbnQgcmVuZGVyVHlwZTtcXG51bmlmb3JtIHNhbXBsZXIyRCBtYXA7XFxudW5pZm9ybSBzYW1wbGVyMkQgb2NjbHVzaW9uTWFwO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG51bmlmb3JtIHZlYzMgY29sb3I7XFxudmFyeWluZyB2ZWMyIHZVVjtcXG52b2lkIG1haW4oKSB7XFxuaWYoIHJlbmRlclR5cGUgPT0gMCApIHtcXG5nbF9GcmFnQ29sb3IgPSB2ZWM0KCB0ZXh0dXJlMkQoIG1hcCwgdlVWICkucmdiLCAwLjAgKTtcXG59IGVsc2UgaWYoIHJlbmRlclR5cGUgPT0gMSApIHtcXG5nbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQoIG1hcCwgdlVWICk7XFxufSBlbHNlIHtcXG5mbG9hdCB2aXNpYmlsaXR5ID0gdGV4dHVyZTJEKCBvY2NsdXNpb25NYXAsIHZlYzIoIDAuNSwgMC4xICkgKS5hO1xcbnZpc2liaWxpdHkgKz0gdGV4dHVyZTJEKCBvY2NsdXNpb25NYXAsIHZlYzIoIDAuOSwgMC41ICkgKS5hO1xcbnZpc2liaWxpdHkgKz0gdGV4dHVyZTJEKCBvY2NsdXNpb25NYXAsIHZlYzIoIDAuNSwgMC45ICkgKS5hO1xcbnZpc2liaWxpdHkgKz0gdGV4dHVyZTJEKCBvY2NsdXNpb25NYXAsIHZlYzIoIDAuMSwgMC41ICkgKS5hO1xcbnZpc2liaWxpdHkgPSAoIDEuMCAtIHZpc2liaWxpdHkgLyA0LjAgKTtcXG52ZWM0IHRleHR1cmUgPSB0ZXh0dXJlMkQoIG1hcCwgdlVWICk7XFxudGV4dHVyZS5hICo9IG9wYWNpdHkgKiB2aXNpYmlsaXR5O1xcbmdsX0ZyYWdDb2xvciA9IHRleHR1cmU7XFxuZ2xfRnJhZ0NvbG9yLnJnYiAqPSBjb2xvcjtcXG59XFxufVwifX07XG4iLCIvLyBUaGlzIFRIUkVFeCBoZWxwZXIgbWFrZXMgaXQgZWFzeSB0byBoYW5kbGUgd2luZG93IHJlc2l6ZS5cbi8vIEl0IHdpbGwgdXBkYXRlIHJlbmRlcmVyIGFuZCBjYW1lcmEgd2hlbiB3aW5kb3cgaXMgcmVzaXplZC5cbi8vXG4vLyAjIFVzYWdlXG4vL1xuLy8gKipTdGVwIDEqKjogU3RhcnQgdXBkYXRpbmcgcmVuZGVyZXIgYW5kIGNhbWVyYVxuLy9cbi8vIGBgYHZhciB3aW5kb3dSZXNpemUgPSBuZXcgVEhSRUV4LldpbmRvd1Jlc2l6ZShhUmVuZGVyZXIsIGFDYW1lcmEpYGBgXG4vLyAgICBcbi8vICoqU3RlcCAyKio6IHN0b3AgdXBkYXRpbmcgcmVuZGVyZXIgYW5kIGNhbWVyYVxuLy9cbi8vIGBgYHdpbmRvd1Jlc2l6ZS5kZXN0cm95KClgYGBcbi8vICMgQ29kZVxuXG4vL1xuXG4vKiogQG5hbWVzcGFjZSAqL1xudmFyIFRIUkVFeFx0PSBUSFJFRXggfHwge31cblxuLyoqXG4gKiBVcGRhdGUgcmVuZGVyZXIgYW5kIGNhbWVyYSB3aGVuIHRoZSB3aW5kb3cgaXMgcmVzaXplZFxuICogXG4gKiBAcGFyYW0ge09iamVjdH0gcmVuZGVyZXIgdGhlIHJlbmRlcmVyIHRvIHVwZGF0ZVxuICogQHBhcmFtIHtPYmplY3R9IENhbWVyYSB0aGUgY2FtZXJhIHRvIHVwZGF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZGltZW5zaW9uIGNhbGxiYWNrIGZvciByZW5kZXJlciBzaXplXG4qL1xuVEhSRUV4LldpbmRvd1Jlc2l6ZVx0PSBmdW5jdGlvbihyZW5kZXJlciwgY2FtZXJhLCBkaW1lbnNpb24pe1xuXHRkaW1lbnNpb24gXHQ9IGRpbWVuc2lvbiB8fCBmdW5jdGlvbigpeyByZXR1cm4geyB3aWR0aDogd2luZG93LmlubmVyV2lkdGgsIGhlaWdodDogd2luZG93LmlubmVySGVpZ2h0IH0gfVxuXHR2YXIgY2FsbGJhY2tcdD0gZnVuY3Rpb24oKXtcblx0XHQvLyBmZXRjaCB0YXJnZXQgcmVuZGVyZXIgc2l6ZVxuXHRcdHZhciByZW5kZXJlclNpemUgPSBkaW1lbnNpb24oKTtcblx0XHQvLyBub3RpZnkgdGhlIHJlbmRlcmVyIG9mIHRoZSBzaXplIGNoYW5nZVxuXHRcdHJlbmRlcmVyLnNldFNpemUoIHJlbmRlcmVyU2l6ZS53aWR0aCwgcmVuZGVyZXJTaXplLmhlaWdodCApXG5cdFx0Ly8gdXBkYXRlIHRoZSBjYW1lcmFcblx0XHRjYW1lcmEuYXNwZWN0XHQ9IHJlbmRlcmVyU2l6ZS53aWR0aCAvIHJlbmRlcmVyU2l6ZS5oZWlnaHRcblx0XHRjYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpXG5cdH1cblx0Ly8gYmluZCB0aGUgcmVzaXplIGV2ZW50XG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBjYWxsYmFjaywgZmFsc2UpXG5cdC8vIHJldHVybiAuc3RvcCgpIHRoZSBmdW5jdGlvbiB0byBzdG9wIHdhdGNoaW5nIHdpbmRvdyByZXNpemVcblx0cmV0dXJuIHtcblx0XHR0cmlnZ2VyXHQ6IGZ1bmN0aW9uKCl7XG5cdFx0XHRjYWxsYmFjaygpXG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiBTdG9wIHdhdGNoaW5nIHdpbmRvdyByZXNpemVcblx0XHQqL1xuXHRcdGRlc3Ryb3lcdDogZnVuY3Rpb24oKXtcblx0XHRcdHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCBjYWxsYmFjaylcblx0XHR9XG5cdH1cbn1cbiIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5mYWN0b3J5KCdCYXNlT2JqZWN0JywgZnVuY3Rpb24gKCkge1xuXHR2YXIgQmFzZU9iamVjdCA9IGZ1bmN0aW9uKGRhdGFPYmplY3QsIGdlb21ldHJ5LCBtYXRlcmlhbCkge1xuXHRcdFRIUkVFLk1lc2guY2FsbCh0aGlzLCBnZW9tZXRyeSwgbWF0ZXJpYWwpO1xuXG5cdFx0dGhpcy5kYXRhT2JqZWN0ID0gZGF0YU9iamVjdCB8fCB7fTtcblx0XHR0aGlzLmRhdGFPYmplY3Qucm90YXRpb24gPSB0aGlzLmRhdGFPYmplY3Qucm90YXRpb24gfHwgWzAsIDAsIDBdO1xuXHRcdFxuXHRcdHRoaXMuaWQgPSB0aGlzLmRhdGFPYmplY3QuaWQ7XG5cdFx0dGhpcy5wb3NpdGlvbiA9IG5ldyBUSFJFRS5WZWN0b3IzKHRoaXMuZGF0YU9iamVjdC5wb3NfeCwgdGhpcy5kYXRhT2JqZWN0LnBvc195LCB0aGlzLmRhdGFPYmplY3QucG9zX3opO1xuXHRcdHRoaXMucm90YXRpb24ub3JkZXIgPSAnWFlaJztcblx0XHR0aGlzLnJvdGF0aW9uLmZyb21BcnJheSh0aGlzLmRhdGFPYmplY3Qucm90YXRpb24ubWFwKE51bWJlcikpO1xuXG5cdFx0dGhpcy51cGRhdGVNYXRyaXgoKTtcblxuXHRcdC8vVE9ETzogcmVzZWFyY2gsIGFmdGVyIGNhY2hpbmcgZ2VvbWV0cnkgdGhpcyBjYW4gYmUgcnVuIG9uY2Vcblx0XHR0aGlzLmdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ0JveCgpO1xuXHRcdFxuXHRcdHRoaXMudXBkYXRlQm91bmRpbmdCb3goKTtcdFx0XG5cdH07XG5cdFxuXHRCYXNlT2JqZWN0LnByb3RvdHlwZSA9IG5ldyBUSFJFRS5NZXNoKCk7XG5cdEJhc2VPYmplY3QucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQmFzZU9iamVjdDtcblxuXHRCYXNlT2JqZWN0LnByb3RvdHlwZS5nZXRUeXBlID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMudHlwZTtcblx0fTtcblxuXHRCYXNlT2JqZWN0LnByb3RvdHlwZS5pc091dE9mUGFycmVudCA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBNYXRoLmFicyh0aGlzLmJvdW5kaW5nQm94LmNlbnRlci54IC0gdGhpcy5wYXJlbnQuYm91bmRpbmdCb3guY2VudGVyLngpID4gKHRoaXMucGFyZW50LmJvdW5kaW5nQm94LnJhZGl1cy54IC0gdGhpcy5ib3VuZGluZ0JveC5yYWRpdXMueCkgfHxcblx0XHRcdFx0Ly9NYXRoLmFicyh0aGlzLmJvdW5kaW5nQm94LmNlbnRlci55IC0gdGhpcy5wYXJlbnQuYm91bmRpbmdCb3guY2VudGVyLnkpID4gKHRoaXMucGFyZW50LmJvdW5kaW5nQm94LnJhZGl1cy55IC0gdGhpcy5ib3VuZGluZ0JveC5yYWRpdXMueSkgfHxcblx0XHRcdFx0TWF0aC5hYnModGhpcy5ib3VuZGluZ0JveC5jZW50ZXIueiAtIHRoaXMucGFyZW50LmJvdW5kaW5nQm94LmNlbnRlci56KSA+ICh0aGlzLnBhcmVudC5ib3VuZGluZ0JveC5yYWRpdXMueiAtIHRoaXMuYm91bmRpbmdCb3gucmFkaXVzLnopO1xuXHR9O1xuXG5cdEJhc2VPYmplY3QucHJvdG90eXBlLmlzQ29sbGlkZWQgPSBmdW5jdGlvbigpIHtcblx0XHR2YXJcblx0XHRcdHJlc3VsdCxcblx0XHRcdHRhcmdldHMsXG5cdFx0XHR0YXJnZXQsXG5cdFx0XHRpO1xuXG5cdFx0dGhpcy51cGRhdGVCb3VuZGluZ0JveCgpO1xuXG5cdFx0cmVzdWx0ID0gdGhpcy5pc091dE9mUGFycmVudCgpO1xuXHRcdHRhcmdldHMgPSB0aGlzLnBhcmVudC5jaGlsZHJlbjtcblxuXHRcdGlmKCFyZXN1bHQpIHtcblx0XHRcdGZvcihpID0gdGFyZ2V0cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHRcdFx0XHR0YXJnZXQgPSB0YXJnZXRzW2ldLmJvdW5kaW5nQm94O1xuXG5cdFx0XHRcdGlmKHRhcmdldHNbaV0gPT09IHRoaXMgfHxcblx0XHRcdFx0XHQhdGFyZ2V0IHx8IC8vIGNoaWxkcmVuIHdpdGhvdXQgQkJcblx0XHRcdFx0XHQoTWF0aC5hYnModGhpcy5ib3VuZGluZ0JveC5jZW50ZXIueCAtIHRhcmdldC5jZW50ZXIueCkgPiAodGhpcy5ib3VuZGluZ0JveC5yYWRpdXMueCArIHRhcmdldC5yYWRpdXMueCkpIHx8XG5cdFx0XHRcdFx0KE1hdGguYWJzKHRoaXMuYm91bmRpbmdCb3guY2VudGVyLnkgLSB0YXJnZXQuY2VudGVyLnkpID4gKHRoaXMuYm91bmRpbmdCb3gucmFkaXVzLnkgKyB0YXJnZXQucmFkaXVzLnkpKSB8fFxuXHRcdFx0XHRcdChNYXRoLmFicyh0aGlzLmJvdW5kaW5nQm94LmNlbnRlci56IC0gdGFyZ2V0LmNlbnRlci56KSA+ICh0aGlzLmJvdW5kaW5nQm94LnJhZGl1cy56ICsgdGFyZ2V0LnJhZGl1cy56KSkpIHtcdFxuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cblx0XHQgICAgXHRyZXN1bHQgPSB0cnVlO1x0XHRcblx0XHQgICAgXHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9O1xuXG5cdEJhc2VPYmplY3QucHJvdG90eXBlLm1vdmUgPSBmdW5jdGlvbihuZXdQb3NpdGlvbikge1xuXHRcdHZhciBcblx0XHRcdGN1cnJlbnRQb3NpdGlvbixcblx0XHRcdHJlc3VsdDtcblxuXHRcdHJlc3VsdCA9IGZhbHNlO1xuXHRcdGN1cnJlbnRQb3NpdGlvbiA9IHRoaXMucG9zaXRpb24uY2xvbmUoKTtcblx0XHRcblx0XHRpZihuZXdQb3NpdGlvbi54KSB7XG5cdFx0XHR0aGlzLnBvc2l0aW9uLnNldFgobmV3UG9zaXRpb24ueCk7XG5cblx0XHRcdGlmKHRoaXMuaXNDb2xsaWRlZCgpKSB7XG5cdFx0XHRcdHRoaXMucG9zaXRpb24uc2V0WChjdXJyZW50UG9zaXRpb24ueCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXN1bHQgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmKG5ld1Bvc2l0aW9uLnopIHtcblx0XHRcdHRoaXMucG9zaXRpb24uc2V0WihuZXdQb3NpdGlvbi56KTtcblxuXHRcdFx0aWYodGhpcy5pc0NvbGxpZGVkKCkpIHtcblx0XHRcdFx0dGhpcy5wb3NpdGlvbi5zZXRaKGN1cnJlbnRQb3NpdGlvbi56KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJlc3VsdCA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dGhpcy5jaGFuZ2VkID0gdGhpcy5jaGFuZ2VkIHx8IHJlc3VsdDtcblx0XHR0aGlzLnVwZGF0ZUJvdW5kaW5nQm94KCk7XG5cblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9O1xuXG5cdEJhc2VPYmplY3QucHJvdG90eXBlLnJvdGF0ZSA9IGZ1bmN0aW9uKGRYLCBkWSwgaXNEZW1vKSB7XG5cdFx0dmFyIFxuXHRcdFx0Y3VycmVudFJvdGF0aW9uID0gdGhpcy5yb3RhdGlvbi5jbG9uZSgpLFxuXHRcdFx0cmVzdWx0ID0gZmFsc2U7IFxuXHRcdFxuXHRcdGlmKGRYKSB7XG5cdFx0XHR0aGlzLnJvdGF0aW9uLnkgKz0gZFggKiAwLjAxO1xuXG5cdFx0XHRpZighaXNEZW1vICYmIHRoaXMuaXNDb2xsaWRlZCgpKSB7XG5cdFx0XHRcdHRoaXMucm90YXRpb24ueSA9IGN1cnJlbnRSb3RhdGlvbi55O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmVzdWx0ID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZihkWSkge1xuXHRcdFx0dGhpcy5yb3RhdGlvbi54ICs9IGRZICogMC4wMTtcblxuXHRcdFx0aWYoIWlzRGVtbyAmJiB0aGlzLmlzQ29sbGlkZWQoKSkge1xuXHRcdFx0XHR0aGlzLnJvdGF0aW9uLnggPSBjdXJyZW50Um90YXRpb24ueDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJlc3VsdCA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dGhpcy5jaGFuZ2VkID0gdGhpcy5jaGFuZ2VkIHx8ICghaXNEZW1vICYmIHJlc3VsdCk7XG5cdFx0dGhpcy51cGRhdGVCb3VuZGluZ0JveCgpO1xuXHR9O1xuXG5cdEJhc2VPYmplY3QucHJvdG90eXBlLnVwZGF0ZUJvdW5kaW5nQm94ID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyXG5cdFx0XHRib3VuZGluZ0JveCxcblx0XHRcdHJhZGl1cyxcblx0XHRcdGNlbnRlcjtcblxuXHRcdHRoaXMudXBkYXRlTWF0cml4KCk7XG5cdFx0Ym91bmRpbmdCb3ggPSB0aGlzLmdlb21ldHJ5LmJvdW5kaW5nQm94LmNsb25lKCkuYXBwbHlNYXRyaXg0KHRoaXMubWF0cml4KTtcblx0XHRcblx0XHRyYWRpdXMgPSB7XG5cdFx0XHR4OiAoYm91bmRpbmdCb3gubWF4LnggLSBib3VuZGluZ0JveC5taW4ueCkgKiAwLjUsXG5cdFx0XHR5OiAoYm91bmRpbmdCb3gubWF4LnkgLSBib3VuZGluZ0JveC5taW4ueSkgKiAwLjUsXG5cdFx0XHR6OiAoYm91bmRpbmdCb3gubWF4LnogLSBib3VuZGluZ0JveC5taW4ueikgKiAwLjVcblx0XHR9O1xuXG5cdFx0Y2VudGVyID0gbmV3IFRIUkVFLlZlY3RvcjMoXG5cdFx0XHRyYWRpdXMueCArIGJvdW5kaW5nQm94Lm1pbi54LFxuXHRcdFx0cmFkaXVzLnkgKyBib3VuZGluZ0JveC5taW4ueSxcblx0XHRcdHJhZGl1cy56ICsgYm91bmRpbmdCb3gubWluLnpcblx0XHQpO1xuXG5cdFx0dGhpcy5ib3VuZGluZ0JveCA9IHtcblx0XHRcdHJhZGl1czogcmFkaXVzLFxuXHRcdFx0Y2VudGVyOiBjZW50ZXJcblx0XHR9O1xuXHR9O1xuXG5cdEJhc2VPYmplY3QucHJvdG90eXBlLnJlbG9hZCA9IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMucG9zaXRpb24uc2V0WCh0aGlzLmRhdGFPYmplY3QucG9zX3gpO1xuXHRcdHRoaXMucG9zaXRpb24uc2V0WSh0aGlzLmRhdGFPYmplY3QucG9zX3kpO1xuXHRcdHRoaXMucG9zaXRpb24uc2V0Wih0aGlzLmRhdGFPYmplY3QucG9zX3opO1xuXHRcdHRoaXMucm90YXRpb24uc2V0KDAsIDAsIDApO1xuXHR9O1xuXG5cdHJldHVybiBCYXNlT2JqZWN0O1x0XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgnQm9va09iamVjdCcsIGZ1bmN0aW9uICgkbG9nLCBCYXNlT2JqZWN0LCBDYW52YXNUZXh0LCBDYW52YXNJbWFnZSwgRGF0YSkge1x0XG5cdHZhciBCb29rT2JqZWN0ID0gZnVuY3Rpb24oZGF0YU9iamVjdCwgZ2VvbWV0cnksIG1hdGVyaWFsLCBtYXBJbWFnZSwgY292ZXJJbWFnZSkge1xuXHRcdEJhc2VPYmplY3QuY2FsbCh0aGlzLCBkYXRhT2JqZWN0LCBnZW9tZXRyeSwgbWF0ZXJpYWwpO1xuXHRcdFxuXHRcdHRoaXMubW9kZWwgPSB0aGlzLmRhdGFPYmplY3QubW9kZWw7XG5cdFx0dGhpcy5jYW52YXMgPSBtYXRlcmlhbC5tYXAuaW1hZ2U7XG5cdFx0dGhpcy50ZXh0dXJlID0gbmV3IENhbnZhc0ltYWdlKG51bGwsIG51bGwsIG1hcEltYWdlKTtcblx0XHR0aGlzLmNvdmVyID0gbmV3IENhbnZhc0ltYWdlKHRoaXMuZGF0YU9iamVjdC5jb3ZlclBvcywgdGhpcy5kYXRhT2JqZWN0LmNvdmVyLCBjb3ZlckltYWdlKTtcblx0XHR0aGlzLmF1dGhvciA9IG5ldyBDYW52YXNUZXh0KHRoaXMuZGF0YU9iamVjdC5hdXRob3IsIHRoaXMuZGF0YU9iamVjdC5hdXRob3JGb250KTtcblx0XHR0aGlzLnRpdGxlID0gbmV3IENhbnZhc1RleHQodGhpcy5kYXRhT2JqZWN0LnRpdGxlLCB0aGlzLmRhdGFPYmplY3QudGl0bGVGb250KTtcblxuXHRcdHRoaXMudXBkYXRlVGV4dHVyZSgpO1xuXHR9O1xuXG5cdEJvb2tPYmplY3QuVFlQRSA9ICdCb29rT2JqZWN0JztcblxuXHRCb29rT2JqZWN0LnByb3RvdHlwZSA9IG5ldyBCYXNlT2JqZWN0KCk7XG5cdEJvb2tPYmplY3QucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQm9va09iamVjdDtcblx0Qm9va09iamVjdC5wcm90b3R5cGUudGV4dE5vZGVzID0gWydhdXRob3InLCAndGl0bGUnXTtcblx0Qm9va09iamVjdC5wcm90b3R5cGUudHlwZSA9IEJvb2tPYmplY3QuVFlQRTtcblxuXHRCb29rT2JqZWN0LnByb3RvdHlwZS51cGRhdGVUZXh0dXJlID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGNvbnRleHQgPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuXHRcdHZhciBjb3ZlciA9IHRoaXMuY292ZXI7XG5cblx0XHRpZih0aGlzLnRleHR1cmUuaW1hZ2UpIHtcblx0XHRcdGNvbnRleHQuZHJhd0ltYWdlKHRoaXMudGV4dHVyZS5pbWFnZSwgMCwgMCk7XG5cdFx0fVxuXG5cdFx0aWYoY292ZXIuaW1hZ2UpIHtcblx0XHRcdHZhciBkaWZmID0gY292ZXIueSArIGNvdmVyLmhlaWdodCAtIERhdGEuQ09WRVJfTUFYX1k7XG5cdFx0IFx0dmFyIGxpbWl0ZWRIZWlnaHQgPSBkaWZmID4gMCA/IGNvdmVyLmhlaWdodCAtIGRpZmYgOiBjb3Zlci5oZWlnaHQ7XG5cdFx0IFx0dmFyIGNyb3BIZWlnaHQgPSBkaWZmID4gMCA/IGNvdmVyLmltYWdlLm5hdHVyYWxIZWlnaHQgLSAoY292ZXIuaW1hZ2UubmF0dXJhbEhlaWdodCAvIGNvdmVyLmhlaWdodCAqIGRpZmYpIDogY292ZXIuaW1hZ2UubmF0dXJhbEhlaWdodDtcblxuXHRcdFx0Y29udGV4dC5kcmF3SW1hZ2UoY292ZXIuaW1hZ2UsIDAsIDAsIGNvdmVyLmltYWdlLm5hdHVyYWxXaWR0aCwgY3JvcEhlaWdodCwgY292ZXIueCwgY292ZXIueSwgY292ZXIud2lkdGgsIGxpbWl0ZWRIZWlnaHQpO1xuXHRcdH1cblxuXHRcdGZvcih2YXIgaSA9IHRoaXMudGV4dE5vZGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0XHR2YXIgdGV4dE5vZGUgPSB0aGlzW3RoaXMudGV4dE5vZGVzW2ldXTtcblxuXHRcdFx0aWYodGV4dE5vZGUuaXNWYWxpZCgpKSB7XG5cblx0XHRcdFx0Y29udGV4dC5mb250ID0gdGV4dE5vZGUuZ2V0Rm9udCgpO1xuXHRcdFx0XHRjb250ZXh0LmZpbGxTdHlsZSA9IHRleHROb2RlLmNvbG9yO1xuXHRcdCAgICBcdGNvbnRleHQuZmlsbFRleHQodGV4dE5vZGUudGV4dCwgdGV4dE5vZGUueCwgdGV4dE5vZGUueSwgdGV4dE5vZGUud2lkdGgpO1xuXHRcdCAgICB9XG5cdFx0fVxuXG5cdFx0dGhpcy5tYXRlcmlhbC5tYXAubmVlZHNVcGRhdGUgPSB0cnVlO1xuXHR9O1xuXHRCb29rT2JqZWN0LnByb3RvdHlwZS5tb3ZlRWxlbWVudCA9IGZ1bmN0aW9uKGRYLCBkWSwgZWxlbWVudCkge1xuXHRcdHZhciBlbGVtZW50ID0gZWxlbWVudCAmJiB0aGlzW2VsZW1lbnRdO1xuXHRcdFxuXHRcdGlmKGVsZW1lbnQpIHtcblx0XHRcdGlmKGVsZW1lbnQubW92ZSkge1xuXHRcdFx0XHRlbGVtZW50Lm1vdmUoZFgsIGRZKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGVsZW1lbnQueCArPSBkWDtcblx0XHRcdFx0ZWxlbWVudC55ICs9IGRZO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLnVwZGF0ZVRleHR1cmUoKTtcblx0XHR9XG5cdH07XG5cdEJvb2tPYmplY3QucHJvdG90eXBlLnNjYWxlRWxlbWVudCA9IGZ1bmN0aW9uKGRYLCBkWSkge1xuXHRcdHRoaXMuY292ZXIud2lkdGggKz0gZFg7XG5cdFx0dGhpcy5jb3Zlci5oZWlnaHQgKz0gZFk7XG5cdFx0dGhpcy51cGRhdGVUZXh0dXJlKCk7XG5cdH07XG5cdEJvb2tPYmplY3QucHJvdG90eXBlLnNhdmUgPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgc2NvcGUgPSB0aGlzO1xuXG5cdFx0dGhpcy5kYXRhT2JqZWN0Lm1vZGVsID0gdGhpcy5tb2RlbDtcblx0XHR0aGlzLmRhdGFPYmplY3QudGV4dHVyZSA9IHRoaXMudGV4dHVyZS50b1N0cmluZygpO1xuXHRcdHRoaXMuZGF0YU9iamVjdC5jb3ZlciA9IHRoaXMuY292ZXIudG9TdHJpbmcoKTtcblx0XHR0aGlzLmRhdGFPYmplY3QuY292ZXJQb3MgPSB0aGlzLmNvdmVyLnNlcmlhbGl6ZVByb3BlcnRpZXMoKTtcblx0XHR0aGlzLmRhdGFPYmplY3QuYXV0aG9yID0gdGhpcy5hdXRob3IudG9TdHJpbmcoKTtcblx0XHR0aGlzLmRhdGFPYmplY3QuYXV0aG9yRm9udCA9IHRoaXMuYXV0aG9yLnNlcmlhbGl6ZUZvbnQoKTtcblx0XHR0aGlzLmRhdGFPYmplY3QudGl0bGUgPSB0aGlzLnRpdGxlLnRvU3RyaW5nKCk7XG5cdFx0dGhpcy5kYXRhT2JqZWN0LnRpdGxlRm9udCA9IHRoaXMudGl0bGUuc2VyaWFsaXplRm9udCgpO1xuXHRcdHRoaXMuZGF0YU9iamVjdC5wb3NfeCA9IHRoaXMucG9zaXRpb24ueDtcblx0XHR0aGlzLmRhdGFPYmplY3QucG9zX3kgPSB0aGlzLnBvc2l0aW9uLnk7XG5cdFx0dGhpcy5kYXRhT2JqZWN0LnBvc196ID0gdGhpcy5wb3NpdGlvbi56O1xuXG5cdFx0RGF0YS5wb3N0Qm9vayh0aGlzLmRhdGFPYmplY3QpLnRoZW4oZnVuY3Rpb24gKGR0bykge1xuXHRcdFx0c2NvcGUuZGF0YU9iamVjdCA9IGR0bztcblx0XHRcdHNjb3BlLmNoYW5nZWQgPSBmYWxzZTtcblx0XHR9KS5jYXRjaChmdW5jdGlvbiAoKSB7XG5cdFx0XHQkbG9nLmVycm9yKCdFcnJvciBzYXZpbmcgYm9vaycpO1xuXHRcdH0pO1xuXHR9O1xuXHRCb29rT2JqZWN0LnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHNjb3BlID0gdGhpcztcblx0XHQvL1RPRE86IHVzZSBpbiBjb25zdHJ1Y3RvciBpbnN0ZWFkIG9mIHNlcGFyYXRlIGltYWdlcyBsb2FkaW5nXG5cdFx0c2NvcGUudGV4dHVyZS5sb2FkKHNjb3BlLmRhdGFPYmplY3QudGV4dHVyZSwgZmFsc2UsIGZ1bmN0aW9uICgpIHtcblx0XHRcdHNjb3BlLmNvdmVyLmxvYWQoc2NvcGUuZGF0YU9iamVjdC5jb3ZlciwgdHJ1ZSwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHNjb3BlLm1vZGVsID0gc2NvcGUuZGF0YU9iamVjdC5tb2RlbDtcblx0XHRcdFx0c2NvcGUuY292ZXIucGFyc2VQcm9wZXJ0aWVzKHNjb3BlLmRhdGFPYmplY3QuY292ZXJQb3MpO1xuXHRcdFx0XHRzY29wZS5hdXRob3Iuc2V0VGV4dChzY29wZS5kYXRhT2JqZWN0LmF1dGhvcik7XG5cdFx0XHRcdHNjb3BlLmF1dGhvci5wYXJzZVByb3BlcnRpZXMoc2NvcGUuZGF0YU9iamVjdC5hdXRob3JGb250KTtcblx0XHRcdFx0c2NvcGUudGl0bGUuc2V0VGV4dChzY29wZS5kYXRhT2JqZWN0LnRpdGxlKTtcblx0XHRcdFx0c2NvcGUudGl0bGUucGFyc2VQcm9wZXJ0aWVzKHNjb3BlLmRhdGFPYmplY3QudGl0bGVGb250KTtcblxuXHRcdFx0XHRzY29wZS51cGRhdGVUZXh0dXJlKCk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fTtcblx0Qm9va09iamVjdC5wcm90b3R5cGUuY29weVN0YXRlID0gZnVuY3Rpb24oYm9vaykge1xuXHRcdGlmKGJvb2sgaW5zdGFuY2VvZiBCb29rT2JqZWN0KSB7XG5cdFx0XHR2YXIgZmllbGRzID0gWydkYXRhT2JqZWN0JywgJ3Bvc2l0aW9uJywgJ3JvdGF0aW9uJywgJ21vZGVsJywgJ3RleHR1cmUnLCAnY292ZXInLCAnYXV0aG9yJywgJ3RpdGxlJ107XG5cdFx0XHRmb3IodmFyIGkgPSBmaWVsZHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRcdFx0dmFyIGZpZWxkID0gZmllbGRzW2ldO1xuXHRcdFx0XHR0aGlzW2ZpZWxkXSA9IGJvb2tbZmllbGRdO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLnVwZGF0ZVRleHR1cmUoKTtcblx0XHRcdGJvb2sucGFyZW50LmFkZCh0aGlzKTtcblx0XHRcdGJvb2sucGFyZW50LnJlbW92ZShib29rKTtcblx0XHRcdC8vIFZpcnR1YWxCb29rc2hlbGYuc2VsZWN0ZWQub2JqZWN0ID0gdGhpcztcblx0XHR9XG5cdH07XG5cdEJvb2tPYmplY3QucHJvdG90eXBlLnNldFBhcmVudCA9IGZ1bmN0aW9uKHBhcmVudCkge1xuXHRcdGlmKHRoaXMucGFyZW50ICE9IHBhcmVudCkge1xuXHRcdFx0aWYocGFyZW50KSB7XG5cdFx0XHRcdHBhcmVudC5hZGQodGhpcyk7XG5cdFx0XHRcdHRoaXMuZGF0YU9iamVjdC5zaGVsZklkID0gcGFyZW50LmlkO1xuXHRcdFx0XHR0aGlzLmRhdGFPYmplY3Quc2VjdGlvbklkID0gcGFyZW50LnBhcmVudC5pZDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMucGFyZW50LnJlbW92ZSh0aGlzKTtcblx0XHRcdFx0dGhpcy5kYXRhT2JqZWN0LnNoZWxmSWQgPSBudWxsO1xuXHRcdFx0XHR0aGlzLmRhdGFPYmplY3Quc2VjdGlvbklkID0gbnVsbDtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0cmV0dXJuIEJvb2tPYmplY3Q7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgnQ2FtZXJhT2JqZWN0JywgZnVuY3Rpb24gKEJhc2VPYmplY3QpIHtcblx0dmFyIENhbWVyYU9iamVjdCA9IGZ1bmN0aW9uKCkge1xuXHRcdEJhc2VPYmplY3QuY2FsbCh0aGlzKTtcblx0fTtcblxuXHRDYW1lcmFPYmplY3QucHJvdG90eXBlID0gbmV3IEJhc2VPYmplY3QoKTtcblx0XG5cdENhbWVyYU9iamVjdC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDYW1lcmFPYmplY3Q7XG5cdFxuXHRDYW1lcmFPYmplY3QucHJvdG90eXBlLnVwZGF0ZUJvdW5kaW5nQm94ID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHJhZGl1cyA9IHt4OiAwLjEsIHk6IDEsIHo6IDAuMX07XG5cdFx0dmFyIGNlbnRlciA9IG5ldyBUSFJFRS5WZWN0b3IzKDAsIDAsIDApO1xuXG5cdFx0dGhpcy5ib3VuZGluZ0JveCA9IHtcblx0XHRcdHJhZGl1czogcmFkaXVzLFxuXHRcdFx0Y2VudGVyOiB0aGlzLnBvc2l0aW9uIC8vVE9ETzogbmVlZHMgY2VudGVyIG9mIHNlY3Rpb24gaW4gcGFyZW50IG9yIHdvcmxkIGNvb3JkaW5hdGVzXG5cdFx0fTtcblx0fTtcblxuXHRyZXR1cm4gQ2FtZXJhT2JqZWN0O1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ1ZpcnR1YWxCb29rc2hlbGYnKVxuLmZhY3RvcnkoJ0NhbnZhc0ltYWdlJywgZnVuY3Rpb24gKCRxLCBEYXRhKSB7XG5cdHZhciBDYW52YXNJbWFnZSA9IGZ1bmN0aW9uKHByb3BlcnRpZXMsIGxpbmssIGltYWdlKSB7XG5cdFx0dGhpcy5saW5rID0gbGluayB8fCAnJztcblx0XHR0aGlzLmltYWdlID0gaW1hZ2U7XG5cdFx0dGhpcy5wYXJzZVByb3BlcnRpZXMocHJvcGVydGllcyk7XG5cdH07XG5cdFxuXHRDYW52YXNJbWFnZS5wcm90b3R5cGUgPSB7XG5cdFx0Y29uc3RydWN0b3I6IENhbnZhc0ltYWdlLFxuXG5cdFx0dG9TdHJpbmc6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMubGluaztcblx0XHR9LFxuXHRcdHBhcnNlUHJvcGVydGllczogZnVuY3Rpb24ocHJvcGVydGllcykge1xuXHRcdFx0dmFyIGFyZ3MgPSBwcm9wZXJ0aWVzICYmIHByb3BlcnRpZXMuc3BsaXQoJywnKSB8fCBbXTtcblxuXHRcdFx0dGhpcy54ID0gTnVtYmVyKGFyZ3NbMF0pIHx8IERhdGEuQ09WRVJfRkFDRV9YO1xuXHRcdFx0dGhpcy55ID0gTnVtYmVyKGFyZ3NbMV0pIHx8IDA7XG5cdFx0XHR0aGlzLndpZHRoID0gTnVtYmVyKGFyZ3NbMl0pIHx8IDIxNjtcblx0XHRcdHRoaXMuaGVpZ2h0ID0gTnVtYmVyKGFyZ3NbM10pIHx8IERhdGEuQ09WRVJfTUFYX1k7XG5cdFx0fSxcblx0XHRzZXJpYWxpemVQcm9wZXJ0aWVzOiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBbdGhpcy54LCB0aGlzLnksIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0XS5qb2luKCcsJyk7XG5cdFx0fVxuXHR9O1xuXG5cdHJldHVybiBDYW52YXNJbWFnZTtcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5mYWN0b3J5KCdDYW52YXNUZXh0JywgZnVuY3Rpb24gKERhdGEpIHtcblx0dmFyIENhbnZhc1RleHQgPSBmdW5jdGlvbih0ZXh0LCBwcm9wZXJ0aWVzKSB7XG5cdFx0dGhpcy50ZXh0ID0gdGV4dCB8fCAnJztcblx0XHR0aGlzLnBhcnNlUHJvcGVydGllcyhwcm9wZXJ0aWVzKTtcblx0fTtcblxuXHRDYW52YXNUZXh0LnByb3RvdHlwZSA9IHtcblx0XHRjb25zdHJ1Y3RvcjogQ2FudmFzVGV4dCxcblx0XHRnZXRGb250OiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBbdGhpcy5zdHlsZSwgdGhpcy5zaXplICsgJ3B4JywgdGhpcy5mb250XS5qb2luKCcgJyk7XG5cdFx0fSxcblx0XHRpc1ZhbGlkOiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiAodGhpcy50ZXh0ICYmIHRoaXMueCAmJiB0aGlzLnkpO1xuXHRcdH0sXG5cdFx0dG9TdHJpbmc6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMudGV4dCB8fCAnJztcblx0XHR9LFxuXHRcdHNldFRleHQ6IGZ1bmN0aW9uKHRleHQpIHtcblx0XHRcdHRoaXMudGV4dCA9IHRleHQ7XG5cdFx0fSxcblx0XHRzZXJpYWxpemVGb250OiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBbdGhpcy5zdHlsZSwgdGhpcy5zaXplLCB0aGlzLmZvbnQsIHRoaXMueCwgdGhpcy55LCB0aGlzLmNvbG9yLCB0aGlzLndpZHRoXS5qb2luKCcsJyk7XG5cdFx0fSxcblx0XHRwYXJzZVByb3BlcnRpZXM6IGZ1bmN0aW9uKHByb3BlcnRpZXMpIHtcblx0XHRcdHZhciBhcmdzID0gcHJvcGVydGllcyAmJiBwcm9wZXJ0aWVzLnNwbGl0KCcsJykgfHwgW107XG5cblx0XHRcdHRoaXMuc3R5bGUgPSBhcmdzWzBdO1xuXHRcdFx0dGhpcy5zaXplID0gYXJnc1sxXSB8fCAxNDtcblx0XHRcdHRoaXMuZm9udCA9IGFyZ3NbMl0gfHwgJ0FyaWFsJztcblx0XHRcdHRoaXMueCA9IE51bWJlcihhcmdzWzNdKSB8fCBEYXRhLkNPVkVSX0ZBQ0VfWDtcblx0XHRcdHRoaXMueSA9IE51bWJlcihhcmdzWzRdKSB8fCAxMDtcblx0XHRcdHRoaXMuY29sb3IgPSBhcmdzWzVdIHx8ICdibGFjayc7XG5cdFx0XHR0aGlzLndpZHRoID0gYXJnc1s2XSB8fCA1MTI7XG5cdFx0fSxcblx0XHRtb3ZlOiBmdW5jdGlvbihkWCwgZFkpIHtcblx0XHRcdHRoaXMueCArPSBkWDtcblx0XHRcdHRoaXMueSArPSBkWTtcblxuXHRcdFx0aWYodGhpcy54IDw9IDApIHRoaXMueCA9IDE7XG5cdFx0XHRpZih0aGlzLnkgPD0gMCkgdGhpcy55ID0gMTtcblx0XHRcdGlmKHRoaXMueCA+PSBEYXRhLlRFWFRVUkVfUkVTT0xVVElPTikgdGhpcy54ID0gRGF0YS5URVhUVVJFX1JFU09MVVRJT047XG5cdFx0XHRpZih0aGlzLnkgPj0gRGF0YS5DT1ZFUl9NQVhfWSkgdGhpcy55ID0gRGF0YS5DT1ZFUl9NQVhfWTtcblx0XHR9XG5cdH07XG5cblx0cmV0dXJuIENhbnZhc1RleHQ7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgnTGlicmFyeU9iamVjdCcsIGZ1bmN0aW9uIChCYXNlT2JqZWN0LCBEYXRhKSB7XG5cdHZhciBMaWJyYXJ5T2JqZWN0ID0gZnVuY3Rpb24ocGFyYW1zLCBnZW9tZXRyeSwgbWF0ZXJpYWwpIHtcblx0XHRCYXNlT2JqZWN0LmNhbGwodGhpcywgcGFyYW1zLCBnZW9tZXRyeSwgbWF0ZXJpYWwpO1xuXHRcdHRoaXMubGlicmFyeU9iamVjdCA9IHBhcmFtcy5saWJyYXJ5T2JqZWN0IHx8IHt9Oy8vVE9ETzogcmVzZWFyY2hcblx0fTtcblx0TGlicmFyeU9iamVjdC5wcm90b3R5cGUgPSBuZXcgQmFzZU9iamVjdCgpO1xuXHRMaWJyYXJ5T2JqZWN0LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IExpYnJhcnlPYmplY3Q7XG5cblx0cmV0dXJuIExpYnJhcnlPYmplY3Q7XHRcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5mYWN0b3J5KCdTZWN0aW9uT2JqZWN0JywgZnVuY3Rpb24gKEJhc2VPYmplY3QsIFNoZWxmT2JqZWN0LCBEYXRhKSB7XG5cdHZhciBTZWN0aW9uT2JqZWN0ID0gZnVuY3Rpb24ocGFyYW1zLCBnZW9tZXRyeSwgbWF0ZXJpYWwpIHtcblx0XHRCYXNlT2JqZWN0LmNhbGwodGhpcywgcGFyYW1zLCBnZW9tZXRyeSwgbWF0ZXJpYWwpO1xuXG5cdFx0dGhpcy5zaGVsdmVzID0ge307XG5cdFx0Zm9yKHZhciBrZXkgaW4gcGFyYW1zLmRhdGEuc2hlbHZlcykge1xuXHRcdFx0dGhpcy5zaGVsdmVzW2tleV0gPSBuZXcgU2hlbGZPYmplY3QocGFyYW1zLmRhdGEuc2hlbHZlc1trZXldKTsgXG5cdFx0XHR0aGlzLmFkZCh0aGlzLnNoZWx2ZXNba2V5XSk7XG5cdFx0fVxuXHR9O1xuXG5cdFNlY3Rpb25PYmplY3QuVFlQRSA9ICdTZWN0aW9uT2JqZWN0JztcblxuXHRTZWN0aW9uT2JqZWN0LnByb3RvdHlwZSA9IG5ldyBCYXNlT2JqZWN0KCk7XG5cdFNlY3Rpb25PYmplY3QucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gU2VjdGlvbk9iamVjdDtcblx0U2VjdGlvbk9iamVjdC5wcm90b3R5cGUudHlwZSA9IFNlY3Rpb25PYmplY3QuVFlQRTtcblxuXHRTZWN0aW9uT2JqZWN0LnByb3RvdHlwZS5zYXZlID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHNjb3BlID0gdGhpcztcblxuXHRcdHRoaXMuZGF0YU9iamVjdC5wb3NfeCA9IHRoaXMucG9zaXRpb24ueDtcblx0XHR0aGlzLmRhdGFPYmplY3QucG9zX3kgPSB0aGlzLnBvc2l0aW9uLnk7XG5cdFx0dGhpcy5kYXRhT2JqZWN0LnBvc196ID0gdGhpcy5wb3NpdGlvbi56O1xuXG5cdFx0dGhpcy5kYXRhT2JqZWN0LnJvdGF0aW9uID0gW3RoaXMucm90YXRpb24ueCwgdGhpcy5yb3RhdGlvbi55LCB0aGlzLnJvdGF0aW9uLnpdO1xuXG5cdFx0cmV0dXJuIERhdGEucG9zdFNlY3Rpb24odGhpcy5kYXRhT2JqZWN0KS50aGVuKGZ1bmN0aW9uIChkdG8pIHtcblx0XHRcdHNjb3BlLmRhdGFPYmplY3QgPSBkdG87XG5cdFx0XHRzY29wZS5jaGFuZ2VkID0gZmFsc2U7XG5cdFx0fSk7XG5cdH07XG5cblx0cmV0dXJuIFNlY3Rpb25PYmplY3Q7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgnU2VsZWN0b3JNZXRhJywgZnVuY3Rpb24gKCkge1xuXHR2YXIgU2VsZWN0b3JNZXRhID0gZnVuY3Rpb24oc2VsZWN0ZWRPYmplY3QpIHtcblx0XHRpZihzZWxlY3RlZE9iamVjdCkge1xuXHRcdFx0dGhpcy5pZCA9IHNlbGVjdGVkT2JqZWN0LmlkO1xuXHRcdFx0dGhpcy5wYXJlbnRJZCA9IHNlbGVjdGVkT2JqZWN0LnBhcmVudC5pZDtcblx0XHRcdHRoaXMudHlwZSA9IHNlbGVjdGVkT2JqZWN0LmdldFR5cGUoKTtcblx0XHR9XG5cdH07XG5cblx0U2VsZWN0b3JNZXRhLnByb3RvdHlwZS5pc0VtcHR5ID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuICF0aGlzLmlkO1xuXHR9O1xuXG5cdFNlbGVjdG9yTWV0YS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24obWV0YSkge1xuXHRcdHJldHVybiAhKCFtZXRhXG5cdFx0XHRcdHx8IG1ldGEuaWQgIT09IHRoaXMuaWRcblx0XHRcdFx0fHwgbWV0YS5wYXJlbnRJZCAhPT0gdGhpcy5wYXJlbnRJZFxuXHRcdFx0XHR8fCBtZXRhLnR5cGUgIT09IHRoaXMudHlwZSk7XG5cdH07XG5cdFxuXHRyZXR1cm4gU2VsZWN0b3JNZXRhO1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ1ZpcnR1YWxCb29rc2hlbGYnKVxuLmZhY3RvcnkoJ1NoZWxmT2JqZWN0JywgZnVuY3Rpb24gKEJhc2VPYmplY3QpIHtcblx0dmFyIFNoZWxmT2JqZWN0ID0gZnVuY3Rpb24ocGFyYW1zKSB7XG5cdFx0dmFyIHNpemUgPSBwYXJhbXMuc2l6ZSB8fCBbMSwxLDFdO1x0XG5cdFx0dmFyIG1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hMYW1iZXJ0TWF0ZXJpYWwoe2NvbG9yOiAweDAwZmYwMCwgdHJhbnNwYXJlbnQ6IHRydWUsIG9wYWNpdHk6IDAuMn0pO1xuXHRcdEJhc2VPYmplY3QuY2FsbCh0aGlzLCBwYXJhbXMsIG5ldyBUSFJFRS5DdWJlR2VvbWV0cnkoc2l6ZVswXSwgc2l6ZVsxXSwgc2l6ZVsyXSksIG1hdGVyaWFsKTtcblxuXHRcdHRoaXMucG9zaXRpb24gPSBuZXcgVEhSRUUuVmVjdG9yMyhwYXJhbXMucG9zaXRpb25bMF0sIHBhcmFtcy5wb3NpdGlvblsxXSwgcGFyYW1zLnBvc2l0aW9uWzJdKTtcblx0XHR0aGlzLnNpemUgPSBuZXcgVEhSRUUuVmVjdG9yMyhzaXplWzBdLCBzaXplWzFdLCBzaXplWzJdKTtcblx0XHR0aGlzLnZpc2libGUgPSBmYWxzZTtcblx0fTtcblxuXHRTaGVsZk9iamVjdC5UWVBFID0gJ1NoZWxmT2JqZWN0JztcblxuXHRTaGVsZk9iamVjdC5wcm90b3R5cGUgPSBuZXcgQmFzZU9iamVjdCgpO1xuXHRTaGVsZk9iamVjdC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBTaGVsZk9iamVjdDtcblx0U2hlbGZPYmplY3QucHJvdG90eXBlLnR5cGUgPSBTaGVsZk9iamVjdC5UWVBFO1xuXG5cblx0cmV0dXJuIFNoZWxmT2JqZWN0O1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ1ZpcnR1YWxCb29rc2hlbGYnKVxuLmZhY3RvcnkoJ2hpZ2hsaWdodCcsIGZ1bmN0aW9uIChlbnZpcm9ubWVudCkge1xuXHR2YXIgaGlnaGxpZ2h0ID0ge307XG5cblx0dmFyIFBMQU5FX1JPVEFUSU9OID0gTWF0aC5QSSAqIDAuNTtcblx0dmFyIFBMQU5FX01VTFRJUExJRVIgPSAyO1xuXHR2YXIgQ09MT1JfU0VMRUNUID0gMHgwMDU1MzM7XG5cdHZhciBDT0xPUl9GT0NVUyA9IDB4MDAzMzU1O1xuXG5cdHZhciBzZWxlY3Q7XG5cdHZhciBmb2N1cztcblxuXHR2YXIgaW5pdCA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBtYXRlcmlhbFByb3BlcnRpZXMgPSB7XG5cdFx0XHRtYXA6IG5ldyBUSFJFRS5JbWFnZVV0aWxzLmxvYWRUZXh0dXJlKCAnaW1nL2dsb3cucG5nJyApLFxuXHRcdFx0dHJhbnNwYXJlbnQ6IHRydWUsIFxuXHRcdFx0c2lkZTogVEhSRUUuRG91YmxlU2lkZSxcblx0XHRcdGJsZW5kaW5nOiBUSFJFRS5BZGRpdGl2ZUJsZW5kaW5nLFxuXHRcdFx0ZGVwdGhUZXN0OiBmYWxzZVxuXHRcdH07XG5cblx0XHRtYXRlcmlhbFByb3BlcnRpZXMuY29sb3IgPSBDT0xPUl9TRUxFQ1Q7XG5cdFx0dmFyIG1hdGVyaWFsU2VsZWN0ID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKG1hdGVyaWFsUHJvcGVydGllcyk7XG5cblx0XHRtYXRlcmlhbFByb3BlcnRpZXMuY29sb3IgPSBDT0xPUl9GT0NVUztcblx0XHR2YXIgbWF0ZXJpYWxGb2N1cyA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbChtYXRlcmlhbFByb3BlcnRpZXMpO1xuXG5cdFx0dmFyIGdlb21ldHJ5ID0gbmV3IFRIUkVFLlBsYW5lR2VvbWV0cnkoMSwgMSwgMSk7XG5cblx0XHRzZWxlY3QgPSBuZXcgVEhSRUUuTWVzaChnZW9tZXRyeSwgbWF0ZXJpYWxTZWxlY3QpO1xuXHRcdHNlbGVjdC5yb3RhdGlvbi54ID0gUExBTkVfUk9UQVRJT047XG5cblx0XHRmb2N1cyA9IG5ldyBUSFJFRS5NZXNoKGdlb21ldHJ5LCBtYXRlcmlhbEZvY3VzKTtcblx0XHRmb2N1cy5yb3RhdGlvbi54ID0gUExBTkVfUk9UQVRJT047XG5cdH07XG5cblx0dmFyIGNvbW1vbkhpZ2hsaWdodCA9IGZ1bmN0aW9uKHdoaWNoLCBvYmopIHtcblx0XHRpZihvYmopIHtcblx0XHRcdHZhciB3aWR0aCA9IG9iai5nZW9tZXRyeS5ib3VuZGluZ0JveC5tYXgueCAqIFBMQU5FX01VTFRJUExJRVI7XG5cdFx0XHR2YXIgaGVpZ2h0ID0gb2JqLmdlb21ldHJ5LmJvdW5kaW5nQm94Lm1heC56ICogUExBTkVfTVVMVElQTElFUjtcblx0XHRcdHZhciBib3R0b20gPSBvYmouZ2VvbWV0cnkuYm91bmRpbmdCb3gubWluLnkgKyBlbnZpcm9ubWVudC5DTEVBUkFOQ0U7XG5cdFx0XHRcblx0XHRcdHdoaWNoLnBvc2l0aW9uLnkgPSBib3R0b207XG5cdFx0XHR3aGljaC5zY2FsZS5zZXQod2lkdGgsIGhlaWdodCwgMSk7XG5cdFx0XHRvYmouYWRkKHdoaWNoKTtcblxuXHRcdFx0d2hpY2gudmlzaWJsZSA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHdoaWNoLnZpc2libGUgPSBmYWxzZTtcblx0XHR9XG5cdH1cblxuXHRoaWdobGlnaHQuZm9jdXMgPSBmdW5jdGlvbihvYmopIHtcblx0XHRjb21tb25IaWdobGlnaHQoZm9jdXMsIG9iaik7XG5cdH07XG5cblx0aGlnaGxpZ2h0LnNlbGVjdCA9IGZ1bmN0aW9uKG9iaikge1xuXHRcdGNvbW1vbkhpZ2hsaWdodChzZWxlY3QsIG9iaik7XG5cdH07XG5cblx0aW5pdCgpO1xuXG5cdHJldHVybiBoaWdobGlnaHQ7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgnbG9jYXRvcicsIGZ1bmN0aW9uICgkcSwgJGxvZywgQmFzZU9iamVjdCwgRGF0YSwgc2VsZWN0b3IsIGVudmlyb25tZW50LCBjYWNoZSkge1xuXHR2YXIgVklTVUFMX0RFQlVHID0gZmFsc2U7XG5cdHZhciBsb2NhdG9yID0ge307XG5cblx0bG9jYXRvci5wbGFjZVNlY3Rpb24gPSBmdW5jdGlvbihzZWN0aW9uRHRvKSB7XG5cdFx0dmFyIHByb21pc2UgPSBjYWNoZS5nZXRTZWN0aW9uKHNlY3Rpb25EdG8ubW9kZWwpLnRoZW4oZnVuY3Rpb24gKHNlY3Rpb25DYWNoZSkge1xuXHRcdFx0dmFyIHNlY3Rpb25CQiA9IHNlY3Rpb25DYWNoZS5nZW9tZXRyeS5ib3VuZGluZ0JveDtcblx0XHRcdHZhciBsaWJyYXJ5QkIgPSBlbnZpcm9ubWVudC5saWJyYXJ5Lmdlb21ldHJ5LmJvdW5kaW5nQm94O1xuXHRcdFx0dmFyIGZyZWVQbGFjZSA9IGdldEZyZWVQbGFjZShlbnZpcm9ubWVudC5saWJyYXJ5LmNoaWxkcmVuLCBsaWJyYXJ5QkIsIHNlY3Rpb25CQik7XG5cblx0XHRcdHJldHVybiBmcmVlUGxhY2UgP1xuXHRcdFx0XHRzYXZlU2VjdGlvbihzZWN0aW9uRHRvLCBmcmVlUGxhY2UpIDpcblx0XHRcdFx0JHEucmVqZWN0KCd0aGVyZSBpcyBubyBmcmVlIHNwYWNlJyk7XG5cdFx0fSkudGhlbihmdW5jdGlvbiAobmV3RHRvKSB7XG5cdFx0XHRyZXR1cm4gZW52aXJvbm1lbnQudXBkYXRlU2VjdGlvbihuZXdEdG8pO1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIHByb21pc2U7XG5cdH07XG5cblx0dmFyIHNhdmVTZWN0aW9uID0gZnVuY3Rpb24oZHRvLCBwb3NpdGlvbikge1xuXHRcdGR0by5saWJyYXJ5SWQgPSBlbnZpcm9ubWVudC5saWJyYXJ5LmlkO1xuXHRcdGR0by5wb3NfeCA9IHBvc2l0aW9uLng7XG5cdFx0ZHRvLnBvc195ID0gcG9zaXRpb24ueTtcblx0XHRkdG8ucG9zX3ogPSBwb3NpdGlvbi56O1xuXG5cdFx0cmV0dXJuIERhdGEucG9zdFNlY3Rpb24oZHRvKTtcblx0fTtcblxuXHRsb2NhdG9yLnBsYWNlQm9vayA9IGZ1bmN0aW9uKGJvb2tEdG8pIHtcblx0XHR2YXIgcHJvbWlzZTtcblx0XHR2YXIgc2hlbGYgPSBzZWxlY3Rvci5pc1NlbGVjdGVkU2hlbGYoKSAmJiBzZWxlY3Rvci5nZXRTZWxlY3RlZE9iamVjdCgpO1xuXG5cdFx0aWYoc2hlbGYpIHtcblx0XHRcdHByb21pc2UgPSBjYWNoZS5nZXRCb29rKGJvb2tEdG8ubW9kZWwpLnRoZW4oZnVuY3Rpb24gKGJvb2tDYWNoZSkge1xuXHRcdFx0XHR2YXIgc2hlbGZCQiA9IHNoZWxmLmdlb21ldHJ5LmJvdW5kaW5nQm94O1xuXHRcdFx0XHR2YXIgYm9va0JCID0gYm9va0NhY2hlLmdlb21ldHJ5LmJvdW5kaW5nQm94O1xuXHRcdFx0XHR2YXIgZnJlZVBsYWNlID0gZ2V0RnJlZVBsYWNlKHNoZWxmLmNoaWxkcmVuLCBzaGVsZkJCLCBib29rQkIpO1xuXG5cdFx0XHRcdHJldHVybiBmcmVlUGxhY2UgPyBcblx0XHRcdFx0XHRzYXZlQm9vayhib29rRHRvLCBmcmVlUGxhY2UsIHNoZWxmKSA6IFxuXHRcdFx0XHRcdCRxLnJlamVjdCgndGhlcmUgaXMgbm8gZnJlZSBzcGFjZScpO1xuXHRcdFx0fSkudGhlbihmdW5jdGlvbiAobmV3RHRvKSB7XG5cdFx0XHRcdHJldHVybiBlbnZpcm9ubWVudC51cGRhdGVCb29rKG5ld0R0byk7XG5cdFx0XHR9KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cHJvbWlzZSA9ICRxLnJlamVjdCgnc2hlbGYgaXMgbm90IHNlbGVjdGVkJyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHByb21pc2U7XG5cdH07XG5cblx0dmFyIHNhdmVCb29rID0gZnVuY3Rpb24oZHRvLCBwb3NpdGlvbiwgc2hlbGYpIHtcblx0XHRkdG8uc2hlbGZJZCA9IHNoZWxmLmlkO1xuXHRcdGR0by5zZWN0aW9uSWQgPSBzaGVsZi5wYXJlbnQuaWQ7XG5cdFx0ZHRvLnBvc194ID0gcG9zaXRpb24ueDtcblx0XHRkdG8ucG9zX3kgPSBwb3NpdGlvbi55O1xuXHRcdGR0by5wb3NfeiA9IHBvc2l0aW9uLno7XG5cblx0XHRyZXR1cm4gRGF0YS5wb3N0Qm9vayhkdG8pO1xuXHR9O1xuXG5cdGxvY2F0b3IudW5wbGFjZUJvb2sgPSBmdW5jdGlvbihib29rRHRvKSB7XG5cdFx0dmFyIHByb21pc2U7XG5cdFx0Ym9va0R0by5zZWN0aW9uSWQgPSBudWxsO1xuXG5cdFx0cHJvbWlzZSA9IERhdGEucG9zdEJvb2soYm9va0R0bykudGhlbihmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gZW52aXJvbm1lbnQudXBkYXRlQm9vayhib29rRHRvKTtcblx0XHR9KTtcblxuXHRcdHJldHVybiBwcm9taXNlO1xuXHR9O1xuXG5cdHZhciBnZXRGcmVlUGxhY2UgPSBmdW5jdGlvbihvYmplY3RzLCBzcGFjZUJCLCB0YXJnZXRCQikge1xuXHRcdHZhciBtYXRyaXhQcmVjaXNpb24gPSBuZXcgVEhSRUUuVmVjdG9yMyh0YXJnZXRCQi5tYXgueCAtIHRhcmdldEJCLm1pbi54LCAwLCB0YXJnZXRCQi5tYXgueiAtIHRhcmdldEJCLm1pbi56KTtcblx0XHR2YXIgb2NjdXBpZWRNYXRyaXggPSBnZXRPY2N1cGllZE1hdHJpeChvYmplY3RzLCBtYXRyaXhQcmVjaXNpb24pO1xuXHRcdHZhciBmcmVlUG9zaXRpb24gPSBnZXRGcmVlTWF0cml4Q2VsbHMob2NjdXBpZWRNYXRyaXgsIHNwYWNlQkIsIHRhcmdldEJCLCBtYXRyaXhQcmVjaXNpb24pO1xuXHRcdFxuXHRcdGlmIChWSVNVQUxfREVCVUcpIHtcblx0XHRcdGRlYnVnU2hvd0ZyZWUoZnJlZVBvc2l0aW9uLCBtYXRyaXhQcmVjaXNpb24sIGVudmlyb25tZW50LmxpYnJhcnkpO1xuXHRcdH1cblxuXHRcdHJldHVybiBmcmVlUG9zaXRpb247XG5cdH07XG5cblx0dmFyIGdldEZyZWVNYXRyaXhDZWxscyA9IGZ1bmN0aW9uKG9jY3VwaWVkTWF0cml4LCBzcGFjZUJCLCB0YXJnZXRCQiwgbWF0cml4UHJlY2lzaW9uKSB7XG5cdFx0dmFyIHRhcmdldENlbGxzU2l6ZSA9IDE7XG5cdFx0dmFyIGZyZWVDZWxsc0NvdW50ID0gMDtcblx0XHR2YXIgZnJlZUNlbGxzU3RhcnQ7XG5cdFx0dmFyIHhJbmRleDtcblx0XHR2YXIgekluZGV4O1xuXHRcdHZhciBjZWxscztcblxuXHRcdHZhciBtaW5YQ2VsbCA9IE1hdGguZmxvb3Ioc3BhY2VCQi5taW4ueCAvIG1hdHJpeFByZWNpc2lvbi54KSArIDE7XG5cdFx0dmFyIG1heFhDZWxsID0gTWF0aC5mbG9vcihzcGFjZUJCLm1heC54IC8gbWF0cml4UHJlY2lzaW9uLngpO1xuXHRcdHZhciBtaW5aQ2VsbCA9IE1hdGguZmxvb3Ioc3BhY2VCQi5taW4ueiAvIG1hdHJpeFByZWNpc2lvbi56KSArIDE7XG5cdFx0dmFyIG1heFpDZWxsID0gTWF0aC5mbG9vcihzcGFjZUJCLm1heC56IC8gbWF0cml4UHJlY2lzaW9uLnopO1xuXG5cdFx0Zm9yICh6SW5kZXggPSBtaW5aQ2VsbDsgekluZGV4IDw9IG1heFpDZWxsOyB6SW5kZXgrKykge1xuXHRcdFx0Zm9yICh4SW5kZXggPSBtaW5YQ2VsbDsgeEluZGV4IDw9IG1heFhDZWxsOyB4SW5kZXgrKykge1xuXHRcdFx0XHRpZiAoIW9jY3VwaWVkTWF0cml4W3pJbmRleF0gfHwgIW9jY3VwaWVkTWF0cml4W3pJbmRleF1beEluZGV4XSkge1xuXHRcdFx0XHRcdGZyZWVDZWxsc1N0YXJ0IHx8IChmcmVlQ2VsbHNTdGFydCA9IHhJbmRleCk7XG5cdFx0XHRcdFx0ZnJlZUNlbGxzQ291bnQrKztcblxuXHRcdFx0XHRcdGlmIChmcmVlQ2VsbHNDb3VudCA9PT0gdGFyZ2V0Q2VsbHNTaXplKSB7XG5cdFx0XHRcdFx0XHRjZWxscyA9IF8ucmFuZ2UoZnJlZUNlbGxzU3RhcnQsIGZyZWVDZWxsc1N0YXJ0ICsgZnJlZUNlbGxzQ291bnQpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGdldFBvc2l0aW9uRnJvbUNlbGxzKGNlbGxzLCB6SW5kZXgsIG1hdHJpeFByZWNpc2lvbiwgc3BhY2VCQiwgdGFyZ2V0QkIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRmcmVlQ2VsbHNDb3VudCA9IDA7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gbnVsbDtcblx0fTtcblxuXHR2YXIgZ2V0UG9zaXRpb25Gcm9tQ2VsbHMgPSBmdW5jdGlvbihjZWxscywgekluZGV4LCBtYXRyaXhQcmVjaXNpb24sIHNwYWNlQkIsIHRhcmdldEJCKSB7XG5cdFx0dmFyIHNpemUgPSBjZWxscy5sZW5ndGggKiBtYXRyaXhQcmVjaXNpb24ueDtcblx0XHR2YXIgeCA9IGNlbGxzWzBdICogbWF0cml4UHJlY2lzaW9uLng7XG5cdFx0dmFyIHogPVx0ekluZGV4ICogbWF0cml4UHJlY2lzaW9uLno7XG5cdFx0dmFyIHkgPSBnZXRCb3R0b21ZKHNwYWNlQkIsIHRhcmdldEJCKTtcblxuXHRcdHJldHVybiBuZXcgVEhSRUUuVmVjdG9yMyh4LCB5LCB6KTtcblx0fTtcblxuXHR2YXIgZ2V0Qm90dG9tWSA9IGZ1bmN0aW9uKHNwYWNlQkIsIHRhcmdldEJCKSB7XG5cdFx0cmV0dXJuIHNwYWNlQkIubWluLnkgLSB0YXJnZXRCQi5taW4ueSArIGVudmlyb25tZW50LkNMRUFSQU5DRTtcblx0fTtcblxuXHR2YXIgZ2V0T2NjdXBpZWRNYXRyaXggPSBmdW5jdGlvbihvYmplY3RzLCBtYXRyaXhQcmVjaXNpb24pIHtcblx0XHR2YXIgcmVzdWx0ID0ge307XG5cdFx0dmFyIG9iamVjdEJCO1xuXHRcdHZhciBtaW5LZXlYO1xuXHRcdHZhciBtYXhLZXlYO1xuXHRcdHZhciBtaW5LZXlaO1xuXHRcdHZhciBtYXhLZXlaO1x0XHRcblx0XHR2YXIgejtcblxuXHRcdG9iamVjdHMuZm9yRWFjaChmdW5jdGlvbiAob2JqKSB7XG5cdFx0XHRpZiAob2JqIGluc3RhbmNlb2YgQmFzZU9iamVjdCkge1xuXHRcdFx0XHRvYmplY3RCQiA9IG9iai5ib3VuZGluZ0JveDtcblxuXHRcdFx0XHRtaW5LZXlYID0gTWF0aC5yb3VuZCgob2JqZWN0QkIuY2VudGVyLnggLSBvYmplY3RCQi5yYWRpdXMueCkgLyBtYXRyaXhQcmVjaXNpb24ueCk7XG5cdFx0XHRcdG1heEtleVggPSBNYXRoLnJvdW5kKChvYmplY3RCQi5jZW50ZXIueCArIG9iamVjdEJCLnJhZGl1cy54KSAvIG1hdHJpeFByZWNpc2lvbi54KTtcblx0XHRcdFx0bWluS2V5WiA9IE1hdGgucm91bmQoKG9iamVjdEJCLmNlbnRlci56IC0gb2JqZWN0QkIucmFkaXVzLnopIC8gbWF0cml4UHJlY2lzaW9uLnopO1xuXHRcdFx0XHRtYXhLZXlaID0gTWF0aC5yb3VuZCgob2JqZWN0QkIuY2VudGVyLnogKyBvYmplY3RCQi5yYWRpdXMueikgLyBtYXRyaXhQcmVjaXNpb24ueik7XG5cblx0XHRcdFx0Zm9yICh6ID0gbWluS2V5WjsgeiA8PSBtYXhLZXlaOyB6KyspIHtcblx0XHRcdFx0XHRyZXN1bHRbel0gfHwgKHJlc3VsdFt6XSA9IHt9KTtcblx0XHRcdFx0XHRyZXN1bHRbel1bbWluS2V5WF0gPSB0cnVlO1xuXHRcdFx0XHRcdHJlc3VsdFt6XVttYXhLZXlYXSA9IHRydWU7XG5cblx0XHRcdFx0XHRpZiAoVklTVUFMX0RFQlVHKSB7XG5cdFx0XHRcdFx0XHRkZWJ1Z1Nob3dCQihvYmopO1xuXHRcdFx0XHRcdFx0ZGVidWdBZGRPY2N1cGllZChbbWluS2V5WCwgbWF4S2V5WF0sIG1hdHJpeFByZWNpc2lvbiwgb2JqLCB6KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH07XG5cblx0dmFyIGRlYnVnU2hvd0JCID0gZnVuY3Rpb24ob2JqKSB7XG5cdFx0dmFyIG9iamVjdEJCID0gb2JqLmJvdW5kaW5nQm94O1xuXHRcdHZhciBvYmpCb3ggPSBuZXcgVEhSRUUuTWVzaChcblx0XHRcdG5ldyBUSFJFRS5DdWJlR2VvbWV0cnkoXG5cdFx0XHRcdG9iamVjdEJCLnJhZGl1cy54ICogMiwgXG5cdFx0XHRcdG9iamVjdEJCLnJhZGl1cy55ICogMiArIDAuMSwgXG5cdFx0XHRcdG9iamVjdEJCLnJhZGl1cy56ICogMlxuXHRcdFx0KSwgXG5cdFx0XHRuZXcgVEhSRUUuTWVzaExhbWJlcnRNYXRlcmlhbCh7XG5cdFx0XHRcdGNvbG9yOiAweGJiYmJmZixcblx0XHRcdFx0b3BhY2l0eTogMC4yLFxuXHRcdFx0XHR0cmFuc3BhcmVudDogdHJ1ZVxuXHRcdFx0fSlcblx0XHQpO1xuXHRcdFxuXHRcdG9iakJveC5wb3NpdGlvbi54ID0gb2JqZWN0QkIuY2VudGVyLng7XG5cdFx0b2JqQm94LnBvc2l0aW9uLnkgPSBvYmplY3RCQi5jZW50ZXIueTtcblx0XHRvYmpCb3gucG9zaXRpb24ueiA9IG9iamVjdEJCLmNlbnRlci56O1xuXG5cdFx0b2JqLnBhcmVudC5hZGQob2JqQm94KTtcblx0fTtcblxuXHR2YXIgZGVidWdBZGRPY2N1cGllZCA9IGZ1bmN0aW9uKGNlbGxzLCBtYXRyaXhQcmVjaXNpb24sIG9iaiwgektleSkge1xuXHRcdGNlbGxzLmZvckVhY2goZnVuY3Rpb24gKGNlbGwpIHtcblx0XHRcdHZhciBwb3MgPSBnZXRQb3NpdGlvbkZyb21DZWxscyhbY2VsbF0sIHpLZXksIG1hdHJpeFByZWNpc2lvbiwgb2JqLnBhcmVudC5nZW9tZXRyeS5ib3VuZGluZ0JveCwgb2JqLmdlb21ldHJ5LmJvdW5kaW5nQm94KTtcblx0XHRcdHZhciBjZWxsQm94ID0gbmV3IFRIUkVFLk1lc2gobmV3IFRIUkVFLkN1YmVHZW9tZXRyeShtYXRyaXhQcmVjaXNpb24ueCAtIDAuMDEsIDAuMDEsIG1hdHJpeFByZWNpc2lvbi56IC0gMC4wMSksIG5ldyBUSFJFRS5NZXNoTGFtYmVydE1hdGVyaWFsKHtjb2xvcjogMHhmZjAwMDB9KSk7XG5cdFx0XHRcblx0XHRcdGNlbGxCb3gucG9zaXRpb24gPSBwb3M7XG5cdFx0XHRvYmoucGFyZW50LmFkZChjZWxsQm94KTtcblx0XHR9KTtcblx0fTtcblxuXHR2YXIgZGVidWdTaG93RnJlZSA9IGZ1bmN0aW9uKHBvc2l0aW9uLCBtYXRyaXhQcmVjaXNpb24sIG9iaikge1xuXHRcdGlmIChwb3NpdGlvbikge1xuXHRcdFx0dmFyIGNlbGxCb3ggPSBuZXcgVEhSRUUuTWVzaChuZXcgVEhSRUUuQ3ViZUdlb21ldHJ5KG1hdHJpeFByZWNpc2lvbi54LCAwLjUsIG1hdHJpeFByZWNpc2lvbi56KSwgbmV3IFRIUkVFLk1lc2hMYW1iZXJ0TWF0ZXJpYWwoe2NvbG9yOiAweDAwZmYwMH0pKTtcblx0XHRcdGNlbGxCb3gucG9zaXRpb24gPSBwb3NpdGlvbjtcblx0XHRcdG9iai5wYXJlbnQuYWRkKGNlbGxCb3gpO1xuXHRcdH1cblx0fTtcblxuXHRyZXR1cm4gbG9jYXRvcjtcdFxufSk7IiwiYW5ndWxhci5tb2R1bGUoJ1ZpcnR1YWxCb29rc2hlbGYnKVxuLmZhY3RvcnkoJ3NlbGVjdG9yJywgZnVuY3Rpb24gKCRyb290U2NvcGUsIFNlbGVjdG9yTWV0YSwgQm9va09iamVjdCwgU2hlbGZPYmplY3QsIFNlY3Rpb25PYmplY3QsIENhbWVyYSwgZW52aXJvbm1lbnQsIGhpZ2hsaWdodCkge1xuXHR2YXIgc2VsZWN0b3IgPSB7fTtcblx0XG5cdHZhciBzZWxlY3RlZCA9IG5ldyBTZWxlY3Rvck1ldGEoKTtcblx0dmFyIGZvY3VzZWQgPSBuZXcgU2VsZWN0b3JNZXRhKCk7XG5cblx0c2VsZWN0b3IuZm9jdXMgPSBmdW5jdGlvbihtZXRhKSB7XG5cdFx0aWYoIW1ldGEuZXF1YWxzKGZvY3VzZWQpKSB7XG5cdFx0XHRpZighZm9jdXNlZC5lcXVhbHMoc2VsZWN0ZWQpKSB7XG5cdFx0XHRcdGhpZ2hsaWdodC5mb2N1cyhudWxsKTtcblx0XHRcdH1cblxuXHRcdFx0Zm9jdXNlZCA9IG1ldGE7XG5cblx0XHRcdGlmKCFmb2N1c2VkLmlzRW1wdHkoKSAmJiAhZm9jdXNlZC5lcXVhbHMoc2VsZWN0ZWQpKSB7XG5cdFx0XHRcdHZhciBvYmogPSBnZXRPYmplY3QoZm9jdXNlZCk7XG5cdFx0XHRcdGhpZ2hsaWdodC5mb2N1cyhvYmopO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcblxuXHRzZWxlY3Rvci5zZWxlY3RGb2N1c2VkID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG1ldGEgPSBmb2N1c2VkO1xuXG5cdFx0c2VsZWN0b3Iuc2VsZWN0KG1ldGEpO1xuXHRcdCRyb290U2NvcGUuJGFwcGx5KCk7XG5cdH07XG5cblx0c2VsZWN0b3Iuc2VsZWN0ID0gZnVuY3Rpb24obWV0YSkge1xuXHRcdGlmKCFtZXRhLmVxdWFscyhzZWxlY3RlZCkpIHtcblx0XHRcdHNlbGVjdG9yLnVuc2VsZWN0KCk7XG5cdFx0XHRzZWxlY3RlZCA9IG1ldGE7XG5cblx0XHRcdHZhciBvYmogPSBnZXRPYmplY3Qoc2VsZWN0ZWQpO1xuXHRcdFx0aGlnaGxpZ2h0LnNlbGVjdChvYmopO1xuXHRcdFx0aGlnaGxpZ2h0LmZvY3VzKG51bGwpO1xuXHRcdH1cblx0fTtcblxuXHRzZWxlY3Rvci51bnNlbGVjdCA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKCFzZWxlY3RlZC5pc0VtcHR5KCkpIHtcblx0XHRcdGhpZ2hsaWdodC5zZWxlY3QobnVsbCk7XG5cdFx0XHRzZWxlY3RlZCA9IG5ldyBTZWxlY3Rvck1ldGEoKTtcblx0XHR9XG5cdH07XG5cblx0c2VsZWN0b3IuZ2V0U2VsZWN0ZWRPYmplY3QgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gZ2V0T2JqZWN0KHNlbGVjdGVkKTtcblx0fTtcblxuXHR2YXIgZ2V0T2JqZWN0ID0gZnVuY3Rpb24obWV0YSkge1xuXHRcdHZhciBvYmplY3Q7XG5cblx0XHRpZighbWV0YS5pc0VtcHR5KCkpIHtcblx0XHRcdG9iamVjdCA9IGlzU2hlbGYobWV0YSkgPyBlbnZpcm9ubWVudC5nZXRTaGVsZihtZXRhLnBhcmVudElkLCBtZXRhLmlkKVxuXHRcdFx0XHQ6IGlzQm9vayhtZXRhKSA/IGVudmlyb25tZW50LmdldEJvb2sobWV0YS5pZClcblx0XHRcdFx0OiBpc1NlY3Rpb24obWV0YSkgPyBlbnZpcm9ubWVudC5nZXRTZWN0aW9uKG1ldGEuaWQpXG5cdFx0XHRcdDogbnVsbDtcblx0XHR9XG5cblx0XHRyZXR1cm4gb2JqZWN0O1x0XG5cdH07XG5cblx0c2VsZWN0b3IuaXNTZWxlY3RlZEVkaXRhYmxlID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHNlbGVjdG9yLmlzU2VsZWN0ZWRCb29rKCkgfHwgc2VsZWN0b3IuaXNTZWxlY3RlZFNlY3Rpb24oKTtcblx0fTtcblxuXHRzZWxlY3Rvci5pc0Jvb2tTZWxlY3RlZCA9IGZ1bmN0aW9uKGlkKSB7XG5cdFx0cmV0dXJuIGlzQm9vayhzZWxlY3RlZCkgJiYgc2VsZWN0ZWQuaWQgPT09IGlkO1xuXHR9O1xuXG5cdHNlbGVjdG9yLmlzU2VsZWN0ZWRTaGVsZiA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBpc1NoZWxmKHNlbGVjdGVkKTtcblx0fTtcblxuXHRzZWxlY3Rvci5pc1NlbGVjdGVkQm9vayA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBpc0Jvb2soc2VsZWN0ZWQpO1xuXHR9O1xuXG5cdHNlbGVjdG9yLmlzU2VsZWN0ZWRTZWN0aW9uID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGlzU2VjdGlvbihzZWxlY3RlZCk7XG5cdH07XG5cblx0dmFyIGlzU2hlbGYgPSBmdW5jdGlvbihtZXRhKSB7XG5cdFx0cmV0dXJuIG1ldGEudHlwZSA9PT0gU2hlbGZPYmplY3QuVFlQRTtcblx0fTtcblxuXHR2YXIgaXNCb29rID0gZnVuY3Rpb24obWV0YSkge1xuXHRcdHJldHVybiBtZXRhLnR5cGUgPT09IEJvb2tPYmplY3QuVFlQRTtcblx0fTtcblxuXHR2YXIgaXNTZWN0aW9uID0gZnVuY3Rpb24obWV0YSkge1xuXHRcdHJldHVybiBtZXRhLnR5cGUgPT09IFNlY3Rpb25PYmplY3QuVFlQRTtcblx0fTtcblxuXHRyZXR1cm4gc2VsZWN0b3I7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgnYXV0aG9yaXphdGlvbicsIGZ1bmN0aW9uICgkbG9nLCAkcSwgJHdpbmRvdywgJGludGVydmFsLCBVc2VyLCBzZWxlY3RMaWJyYXJ5LCBjYXRhbG9nKSB7XG5cdHZhciBhdXRob3JpemF0aW9uID0ge307XG5cblx0YXV0aG9yaXphdGlvbi5pc1Nob3cgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gIVVzZXIuaXNBdXRob3JpemVkKCkgJiYgVXNlci5pc0xvYWRlZCgpO1xuXHR9O1xuXG5cdGF1dGhvcml6YXRpb24uZ29vZ2xlID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHdpbiA9ICR3aW5kb3cub3BlbignL2F1dGgvZ29vZ2xlJywgJycsICd3aWR0aD04MDAsaGVpZ2h0PTYwMCxtb2RhbD15ZXMsYWx3YXlzUmFpc2VkPXllcycpO1xuXHQgICAgdmFyIGNoZWNrQXV0aFdpbmRvdyA9ICRpbnRlcnZhbChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKHdpbiAmJiB3aW4uY2xvc2VkKSB7XG5cdCAgICAgICAgXHQkaW50ZXJ2YWwuY2FuY2VsKGNoZWNrQXV0aFdpbmRvdyk7XG5cblx0ICAgICAgICBcdFVzZXIubG9hZCgpLnRoZW4oZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIFx0XHRyZXR1cm4gYXV0aG9yaXphdGlvbi5sb2FkVXNlckRhdGEoKTtcblx0ICAgICAgICBcdH0pLmNhdGNoKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBcdFx0JGxvZy5sb2coJ1VzZXIgbG9hZGluZCBlcnJvcicpO1xuXHRcdFx0XHRcdC8vVE9ETzogc2hvdyBlcnJvciBtZXNzYWdlICBcblx0ICAgICAgICBcdH0pO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIDEwMCk7XHRcdFx0XG5cdH07XG5cblx0YXV0aG9yaXphdGlvbi5sb2dvdXQgPSBmdW5jdGlvbigpIHtcblx0XHRVc2VyLmxvZ291dCgpLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgIFx0XHRyZXR1cm4gYXV0aG9yaXphdGlvbi5sb2FkVXNlckRhdGEoKTtcblx0XHR9KS5jYXRjaChmdW5jdGlvbiAoKSB7XG5cdFx0XHQkbG9nLmVycm9yKCdMb2dvdXQgZXJyb3InKTtcblx0XHRcdC8vVE9ETzogc2hvdyBhbiBlcnJvclxuXHRcdH0pO1xuXHR9O1xuXG5cdGF1dGhvcml6YXRpb24ubG9hZFVzZXJEYXRhID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuICRxLmFsbChbXG5cdFx0XHRzZWxlY3RMaWJyYXJ5LnVwZGF0ZUxpc3QoKSwgXG5cdFx0XHRjYXRhbG9nLmxvYWRCb29rcygpXG5cdFx0XSk7XG5cdH07XG5cdFxuXHRyZXR1cm4gYXV0aG9yaXphdGlvbjtcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5mYWN0b3J5KCdibG9jaycsIGZ1bmN0aW9uIChibG9ja1VJKSB7XG5cdHZhciBibG9jayA9IHt9O1xuXG5cdHZhciBJTlZFTlRPUlkgPSAnaW52ZW50b3J5Jztcblx0dmFyIE1BSU5fTUVOVSA9ICdtYWluX21lbnUnO1xuXHR2YXIgR0xPQkFMID0gJ2dsb2JhbCc7XG5cblx0YmxvY2suaW52ZW50b3J5ID0gYmxvY2tVSS5pbnN0YW5jZXMuZ2V0KElOVkVOVE9SWSk7XG5cdFxuXHRibG9jay5tYWluTWVudSA9IGJsb2NrVUkuaW5zdGFuY2VzLmdldChNQUlOX01FTlUpO1xuXG5cdGJsb2NrLmdsb2JhbCA9IGJsb2NrVUkuaW5zdGFuY2VzLmdldChHTE9CQUwpO1xuXG5cdHJldHVybiBibG9jaztcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5mYWN0b3J5KCdib29rRWRpdCcsIGZ1bmN0aW9uICgkbG9nLCBEYXRhLCBlbnZpcm9ubWVudCwgYmxvY2ssIGRpYWxvZywgYXJjaGl2ZSwgY2F0YWxvZywgc2VsZWN0b3IpIHtcblx0dmFyIGJvb2tFZGl0ID0ge307XG5cblx0dmFyIEJPT0tfSU1BR0VfVVJMID0gJy9vYmovYm9va3Mve21vZGVsfS9pbWcuanBnJztcblx0dmFyIEVNUFRZX0lNQUdFX1VSTCA9ICcvaW1nL2VtcHR5X2NvdmVyLmpwZyc7XG5cdFxuXHRib29rRWRpdC5saXN0ID0gW107XG5cdGJvb2tFZGl0LmJvb2sgPSB7fTtcblx0Ym9va0VkaXQuY292ZXJJbnB1dFVSTCA9IG51bGw7XG5cblx0Ym9va0VkaXQuc2V0Qm9vayA9IGZ1bmN0aW9uKGJvb2spIHtcblx0XHR0aGlzLmJvb2sgPSB7fTsgLy8gY3JlYXRlIG5ldyBvYmplY3QgZm9yIHVuYmluZCBmcm9tIHNjb3BlXG5cdFx0aWYoYm9vaykge1xuXHRcdFx0dGhpcy5ib29rLmlkID0gYm9vay5pZDtcblx0XHRcdHRoaXMuYm9vay51c2VySWQgPSBib29rLnVzZXJJZDtcblx0XHRcdHRoaXMuYm9vay5tb2RlbCA9IGJvb2subW9kZWw7XG5cdFx0XHR0aGlzLmJvb2suY292ZXIgPSBib29rLmNvdmVyO1xuXHRcdFx0dGhpcy5ib29rLmNvdmVySWQgPSBib29rLmNvdmVySWQ7XG5cdFx0XHR0aGlzLmJvb2sudGl0bGUgPSBib29rLnRpdGxlO1xuXHRcdFx0dGhpcy5ib29rLmF1dGhvciA9IGJvb2suYXV0aG9yO1xuXG5cdFx0XHR0aGlzLmNvdmVySW5wdXRVUkwgPSBudWxsO1xuXHRcdH1cblx0fTtcblxuXHRib29rRWRpdC5nZXRJbWcgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5ib29rLm1vZGVsID8gQk9PS19JTUFHRV9VUkwucmVwbGFjZSgne21vZGVsfScsIHRoaXMuYm9vay5tb2RlbCkgOiBudWxsO1xuXHR9O1xuXG5cdGJvb2tFZGl0LmdldENvdmVySW1nID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuaXNDb3ZlclNob3coKSA/IHRoaXMuYm9vay5jb3ZlciA6IEVNUFRZX0lNQUdFX1VSTDtcblx0fTtcblxuXHRib29rRWRpdC5pc0NvdmVyRGlzYWJsZWQgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5jb3ZlcklucHV0VVJMICYmICh0aGlzLmZvcm0udGl0bGUuJGludmFsaWQgfHwgdGhpcy5mb3JtLmF1dGhvci4kaW52YWxpZCk7XG5cdH07XG5cblx0Ym9va0VkaXQuaXNDb3ZlclNob3cgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gQm9vbGVhbih0aGlzLmJvb2suY292ZXIpO1xuXHR9O1xuXG5cdGJvb2tFZGl0LmlzU2hvdyA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiAhIXRoaXMuYm9vay51c2VySWQ7XG5cdH07XG5cblx0Ym9va0VkaXQuc3VibWl0ID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodGhpcy5mb3JtLiR2YWxpZCkge1xuXHRcdFx0dGhpcy5zYXZlKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGRpYWxvZy5vcGVuRXJyb3IoJ0ZpbGwgYWxsIHJlcXVpcmVkIGZpZWxkcywgcGxlYXNlLicpO1xuXHRcdH1cblx0fTtcblxuXHRib29rRWRpdC5hcHBseUNvdmVyID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYoIXRoaXMuaXNDb3ZlckRpc2FibGVkKCkpIHtcblx0XHRcdGlmKHRoaXMuY292ZXJJbnB1dFVSTCkge1xuXHRcdFx0XHRibG9jay5pbnZlbnRvcnkuc3RhcnQoKTtcblx0XHRcdFx0YXJjaGl2ZS5zZW5kRXh0ZXJuYWxVUkwodGhpcy5jb3ZlcklucHV0VVJMLCBbdGhpcy5ib29rLnRpdGxlLCB0aGlzLmJvb2suYXV0aG9yXSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG5cdFx0XHRcdFx0Ym9va0VkaXQuYm9vay5jb3ZlciA9IHJlc3VsdC51cmw7XG5cdFx0XHRcdFx0Ym9va0VkaXQuYm9vay5jb3ZlcklkID0gcmVzdWx0LmlkO1xuXHRcdFx0XHR9KS5jYXRjaChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0Ym9va0VkaXQuYm9vay5jb3ZlciA9IG51bGw7XG5cdFx0XHRcdFx0ZGlhbG9nLm9wZW5FcnJvcignQ2FuIG5vdCBhcHBseSB0aGlzIGNvdmVyLiBUcnkgYW5vdGhlciBvbmUsIHBsZWFzZS4nKTtcblx0XHRcdFx0fSkuZmluYWxseShmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0Ym9va0VkaXQuY292ZXJJbnB1dFVSTCA9IG51bGw7XG5cdFx0XHRcdFx0YmxvY2suaW52ZW50b3J5LnN0b3AoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRib29rRWRpdC5ib29rLmNvdmVyID0gbnVsbDtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0ZGlhbG9nLm9wZW5FcnJvcignRmlsbCBhdXRob3IgYW5kIHRpdGxlIGZpZWxkcywgcGxlYXNlLicpO1xuXHRcdH1cblx0fTtcblxuXHRib29rRWRpdC5zYXZlID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHNjb3BlID0gdGhpcztcblx0XHRcblx0XHRibG9jay5pbnZlbnRvcnkuc3RhcnQoKTtcblx0XHREYXRhLnBvc3RCb29rKHRoaXMuYm9vaykudGhlbihmdW5jdGlvbiAoZHRvKSB7XG5cdFx0XHRpZihzZWxlY3Rvci5pc0Jvb2tTZWxlY3RlZChkdG8uaWQpKSB7XG5cdFx0XHRcdHNlbGVjdG9yLnVuc2VsZWN0KCk7XG5cdFx0XHR9XG5cblx0XHRcdGVudmlyb25tZW50LnVwZGF0ZUJvb2soZHRvKTtcblx0XHRcdHNjb3BlLmNhbmNlbCgpO1xuXHRcdFx0cmV0dXJuIGNhdGFsb2cubG9hZEJvb2tzKCk7XG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24gKCkge1xuXHRcdFx0JGxvZy5lcnJvcignQm9vayBzYXZlIGVycm9yJyk7XG5cdFx0XHQvL1RPRE86IHNob3cgZXJyb3Jcblx0XHR9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHtcblx0XHRcdGJsb2NrLmludmVudG9yeS5zdG9wKCk7XG5cdFx0fSk7XG5cdH07XG5cblx0Ym9va0VkaXQuY2FuY2VsID0gZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5zZXRCb29rKCk7XG5cdH07XG5cblx0cmV0dXJuIGJvb2tFZGl0O1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ1ZpcnR1YWxCb29rc2hlbGYnKVxuLmZhY3RvcnkoJ2NhdGFsb2cnLCBmdW5jdGlvbiAoJHEsIERhdGEsIFVzZXIsIGJsb2NrKSB7XG5cdHZhciBjYXRhbG9nID0ge307XG5cblx0Y2F0YWxvZy5ib29rcyA9IG51bGw7XG5cblx0Y2F0YWxvZy5sb2FkQm9va3MgPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgcHJvbWlzZTtcblx0XHR2YXIgdXNlcklkID0gVXNlci5nZXRJZCgpO1xuXG5cdFx0aWYodXNlcklkKSB7XG5cdFx0XHRibG9jay5pbnZlbnRvcnkuc3RhcnQoKTtcblx0XHRcdHByb21pc2UgPSAkcS53aGVuKHVzZXJJZCA/IERhdGEuZ2V0VXNlckJvb2tzKHVzZXJJZCkgOiBudWxsKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcblx0XHRcdFx0Y2F0YWxvZy5ib29rcyA9IHJlc3VsdDtcblx0XHRcdH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRibG9jay5pbnZlbnRvcnkuc3RvcCgpO1x0XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRyZXR1cm4gcHJvbWlzZTtcblx0fTtcblxuXHRyZXR1cm4gY2F0YWxvZztcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5mYWN0b3J5KCdjcmVhdGVMaWJyYXJ5JywgZnVuY3Rpb24gKERhdGEsIGVudmlyb25tZW50KSB7XG5cdHZhciBjcmVhdGVMaWJyYXJ5ID0ge307XG5cdFxuXHRjcmVhdGVMaWJyYXJ5Lmxpc3QgPSBbXTtcblx0Y3JlYXRlTGlicmFyeS5tb2RlbCA9IG51bGw7XG5cdGNyZWF0ZUxpYnJhcnkudmlzaWJsZSA9IGZhbHNlO1xuXG5cdGNyZWF0ZUxpYnJhcnkuaXNTaG93ID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMudmlzaWJsZTtcblx0fTtcblxuXHRjcmVhdGVMaWJyYXJ5LnNob3cgPSBmdW5jdGlvbigpIHtcblx0XHR0aGlzLnZpc2libGUgPSB0cnVlO1xuXHR9O1xuXG5cdGNyZWF0ZUxpYnJhcnkuaGlkZSA9IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMudmlzaWJsZSA9IGZhbHNlO1xuXHR9O1xuXG5cdGNyZWF0ZUxpYnJhcnkuZ2V0SW1nID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMubW9kZWwgPyAnL29iai9saWJyYXJpZXMve21vZGVsfS9pbWcuanBnJy5yZXBsYWNlKCd7bW9kZWx9JywgdGhpcy5tb2RlbCkgOiBudWxsO1xuXHR9O1xuXG5cdGNyZWF0ZUxpYnJhcnkuY3JlYXRlID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodGhpcy5tb2RlbCkge1xuXHRcdFx0RGF0YS5wb3N0TGlicmFyeSh0aGlzLm1vZGVsKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcblx0XHRcdFx0ZW52aXJvbm1lbnQuZ29Ub0xpYnJhcnkocmVzdWx0LmlkKTtcblx0XHRcdH0pLmNhdGNoKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0Ly9UT0RPOiBzaG93IGFuIGVycm9yXG5cdFx0XHR9KTtcblx0XHR9XG5cdH07XG5cblx0cmV0dXJuIGNyZWF0ZUxpYnJhcnk7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgnY3JlYXRlU2VjdGlvbicsIGZ1bmN0aW9uICgkbG9nLCBVc2VyLCBlbnZpcm9ubWVudCwgbG9jYXRvcikge1xuXHR2YXIgY3JlYXRlU2VjdGlvbiA9IHt9O1xuXG5cdGNyZWF0ZVNlY3Rpb24ubGlzdCA9IFtdO1xuXHRjcmVhdGVTZWN0aW9uLm1vZGVsID0gbnVsbDtcblx0Y3JlYXRlU2VjdGlvbi52aXNpYmxlID0gZmFsc2U7XG5cblx0Y3JlYXRlU2VjdGlvbi5pc1Nob3cgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy52aXNpYmxlO1xuXHR9O1xuXG5cdGNyZWF0ZVNlY3Rpb24uc2hvdyA9IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMudmlzaWJsZSA9IHRydWU7XG5cdH07XG5cblx0Y3JlYXRlU2VjdGlvbi5oaWRlID0gZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy52aXNpYmxlID0gZmFsc2U7XG5cdH07XG5cdFxuXHRjcmVhdGVTZWN0aW9uLmdldEltZyA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLm1vZGVsID8gJy9vYmovc2VjdGlvbnMve21vZGVsfS9pbWcuanBnJy5yZXBsYWNlKCd7bW9kZWx9JywgdGhpcy5tb2RlbCkgOiBudWxsO1xuXHR9O1xuXG5cdGNyZWF0ZVNlY3Rpb24uY3JlYXRlID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodGhpcy5tb2RlbCkge1xuXHRcdFx0dmFyIHNlY3Rpb25EYXRhID0ge1xuXHRcdFx0XHRtb2RlbDogdGhpcy5tb2RlbCxcblx0XHRcdFx0bGlicmFyeUlkOiBlbnZpcm9ubWVudC5saWJyYXJ5LmlkLFxuXHRcdFx0XHR1c2VySWQ6IFVzZXIuZ2V0SWQoKVxuXHRcdFx0fTtcblxuXHRcdFx0dGhpcy5wbGFjZShzZWN0aW9uRGF0YSk7XG5cdFx0fVxuXHR9O1xuXG5cdGNyZWF0ZVNlY3Rpb24ucGxhY2UgPSBmdW5jdGlvbihkdG8pIHtcblx0XHQvL1RPRE86IGJsb2NrXG5cdFx0bG9jYXRvci5wbGFjZVNlY3Rpb24oZHRvKS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcblx0XHRcdC8vVE9ETzogc2hvdyBhbiBlcnJvclxuXHRcdFx0JGxvZy5lcnJvcihlcnJvcik7XG5cdFx0fSk7XHRcblx0fTtcblxuXHRyZXR1cm4gY3JlYXRlU2VjdGlvbjtcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5mYWN0b3J5KCdmZWVkYmFjaycsIGZ1bmN0aW9uIChVc2VyLCBEYXRhLCBkaWFsb2cpIHtcblx0dmFyIGZlZWRiYWNrID0ge307XG5cdHZhciBzaG93ID0gZmFsc2U7XG5cblx0ZmVlZGJhY2subWVzc2FnZSA9IG51bGw7XG5cblx0ZmVlZGJhY2suaXNTaG93ID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHNob3c7XG5cdH07XG5cblx0ZmVlZGJhY2suc2hvdyA9IGZ1bmN0aW9uKCkge1xuXHRcdHNob3cgPSB0cnVlO1xuXHR9O1xuXG5cdGZlZWRiYWNrLmhpZGUgPSBmdW5jdGlvbigpIHtcblx0XHRzaG93ID0gZmFsc2U7XG5cdH07XG5cblx0ZmVlZGJhY2suc3VibWl0ID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGRhdGFPYmplY3Q7XG5cdFx0XG5cdFx0aWYodGhpcy5mb3JtLm1lc3NhZ2UuJHZhbGlkKSB7XG5cdFx0XHRkaWFsb2cub3BlbkNvbmZpcm0oJ1NlbmQgZmVlZGJhY2s/JykudGhlbihmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdGRhdGFPYmplY3QgPSB7XG5cdFx0XHRcdFx0bWVzc2FnZTogdGhpcy5tZXNzYWdlLFxuXHRcdFx0XHRcdHVzZXJJZDogVXNlci5nZXRJZCgpXG5cdFx0XHRcdH07XG5cblx0XHRcdFx0cmV0dXJuIERhdGEucG9zdEZlZWRiYWNrKGRhdGFPYmplY3QpLnRoZW4oZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdHRoaXMubWVzc2FnZSA9IG51bGw7XG5cdFx0XHRcdFx0ZmVlZGJhY2suaGlkZSgpO1xuXHRcdFx0XHR9LCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0ZGlhbG9nLm9wZW5FcnJvcignQ2FuIG5vdCBzZW5kIGZlZWRiYWNrIGJlY2F1c2Ugb2YgYW4gZXJyb3IuJyk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGRpYWxvZy5vcGVuRXJyb3IoJ0ZlZWRiYWNrIGZpZWxkIGlzIHJlcXVpcmVkLicpO1xuXHRcdH1cblx0fTtcblxuXHRyZXR1cm4gZmVlZGJhY2s7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgnaW52ZW50b3J5JywgZnVuY3Rpb24gKCRsb2csIFNlbGVjdG9yTWV0YSwgVXNlciwgRGF0YSwgYm9va0VkaXQsIHNlbGVjdG9yLCBlbnZpcm9ubWVudCwgZGlhbG9nLCBsb2NhdG9yLCBjYXRhbG9nLCBibG9jaykge1xuXHR2YXIgaW52ZW50b3J5ID0ge307XG5cblx0aW52ZW50b3J5LnNlYXJjaCA9IG51bGw7XG5cblx0aW52ZW50b3J5LmV4cGFuZCA9IGZ1bmN0aW9uKGJvb2spIHtcblx0XHRib29rRWRpdC5zZXRCb29rKGJvb2spO1xuXHR9O1xuXG5cdGludmVudG9yeS5pc1Nob3cgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gVXNlci5pc0F1dGhvcml6ZWQoKTtcblx0fTtcblxuXHRpbnZlbnRvcnkuaXNCb29rU2VsZWN0ZWQgPSBmdW5jdGlvbihpZCkge1xuXHRcdHJldHVybiBzZWxlY3Rvci5pc0Jvb2tTZWxlY3RlZChpZCk7XG5cdH07XG5cblx0aW52ZW50b3J5LnNlbGVjdCA9IGZ1bmN0aW9uKGR0bykge1xuXHRcdHZhciBib29rID0gZW52aXJvbm1lbnQuZ2V0Qm9vayhkdG8uaWQpO1xuXHRcdHZhciBtZXRhID0gbmV3IFNlbGVjdG9yTWV0YShib29rKTtcblxuXHRcdHNlbGVjdG9yLnNlbGVjdChtZXRhKTtcblx0fTtcblxuXHRpbnZlbnRvcnkuYWRkQm9vayA9IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuZXhwYW5kKHt1c2VySWQ6IFVzZXIuZ2V0SWQoKX0pO1xuXHR9O1xuXG5cdGludmVudG9yeS5kZWxldGUgPSBmdW5jdGlvbihib29rKSB7XG5cdFx0ZGlhbG9nLm9wZW5Db25maXJtKCdEZWxldGUgYm9vaz8nKS50aGVuKGZ1bmN0aW9uICgpIHtcblx0XHRcdGJsb2NrLmludmVudG9yeS5zdGFydCgpO1xuXG5cdFx0XHREYXRhLmRlbGV0ZUJvb2soYm9vaykudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdFx0XHRcdGlmKHNlbGVjdG9yLmlzQm9va1NlbGVjdGVkKGJvb2suaWQpKSB7XG5cdFx0XHRcdFx0c2VsZWN0b3IudW5zZWxlY3QoKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGVudmlyb25tZW50LnJlbW92ZUJvb2socmVzLmRhdGEpO1xuXHRcdFx0XHRyZXR1cm4gY2F0YWxvZy5sb2FkQm9va3MoKTtcblx0XHRcdH0pLmNhdGNoKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0ZGlhbG9nLm9wZW5FcnJvcignRGVsZXRlIGJvb2sgZXJyb3IuJyk7XG5cdFx0XHR9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0YmxvY2suaW52ZW50b3J5LnN0b3AoKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9O1xuXG5cdGludmVudG9yeS5wbGFjZSA9IGZ1bmN0aW9uKGJvb2ssIGV2ZW50KSB7XG5cdFx0dmFyIHByb21pc2U7XG5cdFx0dmFyIGlzQm9va1BsYWNlZCA9ICEhYm9vay5zZWN0aW9uSWQ7XG5cblx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcblx0XHRibG9jay5pbnZlbnRvcnkuc3RhcnQoKTtcblx0XHRwcm9taXNlID0gaXNCb29rUGxhY2VkID8gbG9jYXRvci51bnBsYWNlQm9vayhib29rKSA6IGxvY2F0b3IucGxhY2VCb29rKGJvb2spO1xuXHRcdHByb21pc2UudGhlbihmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gY2F0YWxvZy5sb2FkQm9va3MoKTtcblx0XHR9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcblx0XHRcdC8vVE9ETzogc2hvdyBhbiBlcnJvclxuXHRcdFx0JGxvZy5lcnJvcihlcnJvcik7XG5cdFx0fSkuZmluYWxseShmdW5jdGlvbiAoKSB7XG5cdFx0XHRibG9jay5pbnZlbnRvcnkuc3RvcCgpO1xuXHRcdH0pO1xuXHR9O1xuXG5cdHJldHVybiBpbnZlbnRvcnk7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgnbWFpbk1lbnUnLCBmdW5jdGlvbiAoJGxvZywgRGF0YSwgYm9va0VkaXQsIGZlZWRiYWNrLCBzZWxlY3RMaWJyYXJ5LCBjcmVhdGVMaWJyYXJ5LCBjcmVhdGVTZWN0aW9uKSB7XG5cdHZhciBtYWluTWVudSA9IHt9O1xuXHRcblx0dmFyIHNob3cgPSBmYWxzZTtcblx0dmFyIGNyZWF0ZUxpc3RTaG93ID0gZmFsc2U7XG5cblx0bWFpbk1lbnUuaXNTaG93ID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHNob3c7XG5cdH07XG5cblx0bWFpbk1lbnUuc2hvdyA9IGZ1bmN0aW9uKCkge1xuXHRcdG1haW5NZW51LmhpZGVBbGwoKTtcblx0XHRzaG93ID0gdHJ1ZTtcblx0fTtcblxuXHRtYWluTWVudS5oaWRlID0gZnVuY3Rpb24oKSB7XG5cdFx0c2hvdyA9IGZhbHNlO1xuXHR9O1xuXG5cdG1haW5NZW51LmlzQ3JlYXRlTGlzdFNob3cgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gY3JlYXRlTGlzdFNob3c7XG5cdH07XG5cblx0bWFpbk1lbnUuY3JlYXRlTGlzdFNob3cgPSBmdW5jdGlvbigpIHtcblx0XHRtYWluTWVudS5oaWRlQWxsKCk7XG5cdFx0Y3JlYXRlTGlzdFNob3cgPSB0cnVlO1xuXHR9O1xuXG5cdG1haW5NZW51LmNyZWF0ZUxpc3RIaWRlID0gZnVuY3Rpb24oKSB7XG5cdFx0Y3JlYXRlTGlzdFNob3cgPSBmYWxzZTtcblx0fTtcblxuXHRtYWluTWVudS5oaWRlQWxsID0gZnVuY3Rpb24oKSB7XG5cdFx0bWFpbk1lbnUuaGlkZSgpO1xuXHRcdG1haW5NZW51LmNyZWF0ZUxpc3RIaWRlKCk7XG5cblx0XHRzZWxlY3RMaWJyYXJ5LmhpZGUoKTtcblx0XHRjcmVhdGVMaWJyYXJ5LmhpZGUoKTtcblx0XHRjcmVhdGVTZWN0aW9uLmhpZGUoKTtcblxuXHRcdGZlZWRiYWNrLmhpZGUoKTtcblx0fTtcblxuXHRtYWluTWVudS50cmlnZ2VyID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYobWFpbk1lbnUuaXNTaG93KCkpIHtcblx0XHRcdG1haW5NZW51LmhpZGUoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0bWFpbk1lbnUuc2hvdygpO1xuXHRcdH1cblx0fTtcblxuXHRtYWluTWVudS5zaG93RmVlZGJhY2sgPSBmdW5jdGlvbigpIHtcblx0XHRtYWluTWVudS5oaWRlQWxsKCk7XG5cdFx0ZmVlZGJhY2suc2hvdygpO1xuXHR9O1xuXG5cdG1haW5NZW51LnNob3dTZWxlY3RMaWJyYXJ5ID0gZnVuY3Rpb24oKSB7XG5cdFx0bWFpbk1lbnUuaGlkZUFsbCgpO1xuXHRcdHNlbGVjdExpYnJhcnkuc2hvdygpO1xuXHR9O1xuXG5cdG1haW5NZW51LnNob3dDcmVhdGVMaWJyYXJ5ID0gZnVuY3Rpb24oKSB7XG5cdFx0bWFpbk1lbnUuaGlkZUFsbCgpO1xuXHRcdGNyZWF0ZUxpYnJhcnkuc2hvdygpO1xuXHR9O1xuXG5cdG1haW5NZW51LnNob3dDcmVhdGVTZWN0aW9uID0gZnVuY3Rpb24oKSB7XG5cdFx0bWFpbk1lbnUuaGlkZUFsbCgpO1xuXHRcdGNyZWF0ZVNlY3Rpb24uc2hvdygpO1xuXHR9O1xuXG5cdHZhciBpbml0ID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9UT0RPOiBtb3ZlIHRvIG1lbnUgbW9kZWxzXG5cdFx0RGF0YS5nZXRVSURhdGEoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcblx0XHRcdGNyZWF0ZUxpYnJhcnkubGlzdCA9IHJlcy5kYXRhLmxpYnJhcmllcztcblx0XHRcdGNyZWF0ZVNlY3Rpb24ubGlzdCA9IHJlcy5kYXRhLmJvb2tzaGVsdmVzO1xuXHRcdFx0Ym9va0VkaXQubGlzdCA9IHJlcy5kYXRhLmJvb2tzO1xuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uICgpIHtcblx0XHRcdCRsb2cubG9nKCdVSSBpbml0IGVycm9yJyk7XG5cdFx0XHQvL1RPRE86IHNob3cgYW4gZXJyb3Jcblx0XHR9KTtcblx0fTtcblxuXHRpbml0KCk7XG5cblx0cmV0dXJuIG1haW5NZW51O1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ1ZpcnR1YWxCb29rc2hlbGYnKVxuLmZhY3RvcnkoJ3NlbGVjdExpYnJhcnknLCBmdW5jdGlvbiAoRGF0YSwgZW52aXJvbm1lbnQpIHtcblx0dmFyIHNlbGVjdExpYnJhcnkgPSB7fTtcblxuXHRzZWxlY3RMaWJyYXJ5Lmxpc3QgPSBbXTtcblx0c2VsZWN0TGlicmFyeS52aXNpYmxlID0gZmFsc2U7XG5cblx0c2VsZWN0TGlicmFyeS5pc1Nob3cgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy52aXNpYmxlO1xuXHR9O1xuXG5cdHNlbGVjdExpYnJhcnkuc2hvdyA9IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMudmlzaWJsZSA9IHRydWU7XG5cdH07XG5cblx0c2VsZWN0TGlicmFyeS5oaWRlID0gZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy52aXNpYmxlID0gZmFsc2U7XG5cdH07XG5cblx0c2VsZWN0TGlicmFyeS51cGRhdGVMaXN0ID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHNjb3BlID0gdGhpcztcblxuXHQgICAgdmFyIHByb21pc2UgPSBEYXRhLmdldExpYnJhcmllcygpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgc2NvcGUubGlzdCA9IHJlcy5kYXRhO1xuICAgIFx0fSk7XG5cbiAgICBcdHJldHVybiBwcm9taXNlO1xuXHR9O1xuXG5cdHNlbGVjdExpYnJhcnkuZ28gPSBlbnZpcm9ubWVudC5nb1RvTGlicmFyeTtcblxuXHRyZXR1cm4gc2VsZWN0TGlicmFyeTtcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5mYWN0b3J5KCd1aVRvb2xzJywgZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG5cdHZhciB1aVRvb2xzID0ge307XG5cblx0dmFyIFJPVEFUSU9OX1NDQUxFID0gMTtcblxuXHR2YXIgc3RhdGVzID0ge1xuXHRcdHJvdGF0ZUxlZnQ6IGZhbHNlLFxuXHRcdHJvdGF0ZVJpZ2h0OiBmYWxzZVxuXHR9O1xuXG5cdHVpVG9vbHMuaXNTaG93ID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHNlbGVjdG9yLmlzU2VsZWN0ZWRTZWN0aW9uKCk7XG5cdH07XG5cblx0dWlUb29scy5pc1JvdGF0YWJsZSA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBzZWxlY3Rvci5pc1NlbGVjdGVkU2VjdGlvbigpO1xuXHR9O1xuXG5cdHVpVG9vbHMucm90YXRlTGVmdCA9IGZ1bmN0aW9uKCkge1xuXHRcdHN0YXRlcy5yb3RhdGVMZWZ0ID0gdHJ1ZTtcblx0fTtcblxuXHR1aVRvb2xzLnJvdGF0ZVJpZ2h0ID0gZnVuY3Rpb24oKSB7XG5cdFx0c3RhdGVzLnJvdGF0ZVJpZ2h0ID0gdHJ1ZTtcblx0fTtcblxuXHR1aVRvb2xzLnN0b3AgPSBmdW5jdGlvbigpIHtcblx0XHRzdGF0ZXMucm90YXRlTGVmdCA9IGZhbHNlO1xuXHRcdHN0YXRlcy5yb3RhdGVSaWdodCA9IGZhbHNlO1xuXHR9O1xuXG5cdHVpVG9vbHMudXBkYXRlID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYoc3RhdGVzLnJvdGF0ZUxlZnQpIHtcblx0XHRcdHJvdGF0ZShST1RBVElPTl9TQ0FMRSk7XG5cdFx0fSBlbHNlIGlmKHN0YXRlcy5yb3RhdGVSaWdodCkge1xuXHRcdFx0cm90YXRlKC1ST1RBVElPTl9TQ0FMRSk7XG5cdFx0fVxuXHR9O1xuXG5cdHZhciByb3RhdGUgPSBmdW5jdGlvbihzY2FsZSkge1xuXHRcdHZhciBvYmogPSBzZWxlY3Rvci5nZXRTZWxlY3RlZE9iamVjdCgpO1xuXHRcdG9iai5yb3RhdGUoc2NhbGUpO1xuXHR9O1xuXG5cdHJldHVybiB1aVRvb2xzO1xufSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9