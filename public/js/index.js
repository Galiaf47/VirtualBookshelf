angular
    .module('VirtualBookshelf', ['blockUI', 'ngDialog', 'angularUtils.directives.dirPagination'])
    	.config(function (blockUIConfig, paginationTemplateProvider) {
    		blockUIConfig.delay = 0;
    		blockUIConfig.autoBlock = false;
			blockUIConfig.autoInjectBodyBlock = false;
			paginationTemplateProvider.setPath('/js/angular/dirPagination/dirPagination.tpl.html');
    	})
    	.run(function (main) {
			main.start();
    	});
angular.module('VirtualBookshelf')
.controller('AuthCtrl', function (authorization) {
	this.loginGoogle = function() {
		authorization.google();
	};
});
angular.module('VirtualBookshelf')
.controller('CreateLibraryCtrl', function (createLibrary) {
	this.list = createLibrary.list;
	this.model = createLibrary.model;
	this.getImg = createLibrary.getImg;
	this.create = createLibrary.create;
});
angular.module('VirtualBookshelf')
.controller('SelectLibraryCtrl', function (selectLibrary) {
	this.go = selectLibrary.go;

	this.getList = function() {
		return selectLibrary.list;
	};
});
angular.module('VirtualBookshelf')
.controller('ToolsCtrl', function (user, selector, tools, preview) {
    this.isShow = function() {
		return selector.isSelectedEditable() || preview.isActive();
	};

    this.isRotatable = function() {
		return selector.isSelectedSection() || preview.isActive();
	};

    this.isDeletable = function() {
		return selector.isSelectedEditable() && user.isAuthorized();
	};

    this.isWatchable = function() {
        return selector.isSelectedBook() && !preview.isActive();
    };

    this.watch = function()  {
        var obj = selector.getSelectedObject();
        preview.enable(obj);
    };

    this.unwatch = preview.disable;
    this.isWatchActive = preview.isActive;

    this.rotateLeft = tools.rotateLeft;
    this.rotateRight = tools.rotateRight;
    this.stop = tools.stop;

    this.delete = tools.delete;
});
angular.module('VirtualBookshelf')
.controller('TooltipCtrl', function (tooltip, BookObject) {
    this.isShow = function() {
        return tooltip.obj.type === BookObject.TYPE;
    };

    this.obj = tooltip.obj;
});
angular.module('VirtualBookshelf')
.controller('UiCtrl', function ($scope, mainMenu, selectLibrary, createLibrary, createSection, feedback, authorization, navigation, inventory, bookEdit, catalog) {
    $scope.mainMenu = mainMenu;

    $scope.selectLibrary = selectLibrary;
    $scope.createLibrary = createLibrary;
    $scope.createSection = createSection;
    $scope.feedback = feedback;
    $scope.authorization = authorization;

    $scope.inventory = inventory;
    $scope.bookEdit = bookEdit;
    $scope.catalog = catalog;

	$scope.navigation = {
		stop: navigation.goStop,
		forward: navigation.goForward,
		backward: navigation.goBackward,
		left: navigation.goLeft,
		right: navigation.goRight
	};
});
angular.module('VirtualBookshelf')
.controller('WelcomeCtrl', function (authorization, selectLibrary, createLibrary, environment) {
	var closed = false;

	this.isShowAuthorization = function() {
		return authorization.isShow();
	};
	
	this.isShowSelectLibrary = function() {
		return selectLibrary.isAvailable() && !selectLibrary.isUserLibrary();
	};

	this.isShowCreateLibrary = function() {
		return !this.isShowAuthorization() && !selectLibrary.isAvailable();
	};

	this.isShow = function() {
		return !closed && (this.isShowAuthorization() || this.isShowCreateLibrary() || this.isShowSelectLibrary());
	};

	this.isLoaded = function() {
		return environment.getLoaded();
	};

	this.showLoginDialog = function() {
		authorization.show();
	};

	this.showSelectLibraryDialog = function() {
		selectLibrary.show();
	};

	this.showCreateLibraryDialog = function() {
		createLibrary.show();
	};

	this.close = function() {
		closed = true;
	};
});
angular.module('VirtualBookshelf')
.directive('vbSelect', function() {
	return {
		require: 'ngModel',
		restrict: 'E',
    	transclude: true,
		templateUrl: '/ui/select.ejs',
		scope: {
			options: '=',
			value: '@',
			label: '@'
		},

		link: function(scope, element, attrs, controller) {
			scope.select = function(item) {
				controller.$setViewValue(item[scope.value]);
			};

			scope.isSelected = function(item) {
				return controller.$modelValue === item[scope.value];
			};
		}
	};
});

/**
 * @license
 * lodash 3.2.0 (Custom Build) lodash.com/license | Underscore.js 1.7.0 underscorejs.org/LICENSE
 * Build: `lodash modern -o ./lodash.js`
 */
;(function(){function n(n,t){if(n!==t){var r=n===n,e=t===t;if(n>t||!r||typeof n=="undefined"&&e)return 1;if(n<t||!e||typeof t=="undefined"&&r)return-1}return 0}function t(n,t,r){if(t!==t)return p(n,r);r=(r||0)-1;for(var e=n.length;++r<e;)if(n[r]===t)return r;return-1}function r(n,t){var r=n.length;for(n.sort(t);r--;)n[r]=n[r].c;return n}function e(n){return typeof n=="string"?n:null==n?"":n+""}function u(n){return n.charCodeAt(0)}function o(n,t){for(var r=-1,e=n.length;++r<e&&-1<t.indexOf(n.charAt(r)););return r
}function i(n,t){for(var r=n.length;r--&&-1<t.indexOf(n.charAt(r)););return r}function f(t,r){return n(t.a,r.a)||t.b-r.b}function a(t,r){for(var e=-1,u=t.a,o=r.a,i=u.length;++e<i;){var f=n(u[e],o[e]);if(f)return f}return t.b-r.b}function c(n){return Wt[n]}function l(n){return Nt[n]}function s(n){return"\\"+Lt[n]}function p(n,t,r){var e=n.length;for(t=r?t||e:(t||0)-1;r?t--:++t<e;){var u=n[t];if(u!==u)return t}return-1}function h(n){return n&&typeof n=="object"||false}function _(n){return 160>=n&&9<=n&&13>=n||32==n||160==n||5760==n||6158==n||8192<=n&&(8202>=n||8232==n||8233==n||8239==n||8287==n||12288==n||65279==n)
}function g(n,t){for(var r=-1,e=n.length,u=-1,o=[];++r<e;)n[r]===t&&(n[r]=B,o[++u]=r);return o}function v(n){for(var t=-1,r=n.length;++t<r&&_(n.charCodeAt(t)););return t}function y(n){for(var t=n.length;t--&&_(n.charCodeAt(t)););return t}function d(n){return Ut[n]}function m(_){function Wt(n){if(h(n)&&!(So(n)||n instanceof Ut)){if(n instanceof Nt)return n;if(Uu.call(n,"__chain__")&&Uu.call(n,"__wrapped__"))return he(n)}return new Nt(n)}function Nt(n,t,r){this.__wrapped__=n,this.__actions__=r||[],this.__chain__=!!t
}function Ut(n){this.__wrapped__=n,this.__actions__=null,this.__dir__=1,this.__dropCount__=0,this.__filtered__=false,this.__iteratees__=null,this.__takeCount__=so,this.__views__=null}function Ft(){this.__data__={}}function Lt(n){var t=n?n.length:0;for(this.data={hash:to(null),set:new Zu};t--;)this.push(n[t])}function Bt(n,t){var r=n.data;return(typeof t=="string"||Xe(t)?r.set.has(t):r.hash[t])?0:-1}function zt(n,t){var r=-1,e=n.length;for(t||(t=wu(e));++r<e;)t[r]=n[r];return t}function Mt(n,t){for(var r=-1,e=n.length;++r<e&&false!==t(n[r],r,n););return n
}function qt(n,t){for(var r=-1,e=n.length;++r<e;)if(!t(n[r],r,n))return false;return true}function Pt(n,t){for(var r=-1,e=n.length,u=-1,o=[];++r<e;){var i=n[r];t(i,r,n)&&(o[++u]=i)}return o}function Kt(n,t){for(var r=-1,e=n.length,u=wu(e);++r<e;)u[r]=t(n[r],r,n);return u}function Vt(n){for(var t=-1,r=n.length,e=lo;++t<r;){var u=n[t];u>e&&(e=u)}return e}function Yt(n,t,r,e){var u=-1,o=n.length;for(e&&o&&(r=n[++u]);++u<o;)r=t(r,n[u],u,n);return r}function Zt(n,t,r,e){var u=n.length;for(e&&u&&(r=n[--u]);u--;)r=t(r,n[u],u,n);
return r}function Gt(n,t){for(var r=-1,e=n.length;++r<e;)if(t(n[r],r,n))return true;return false}function Jt(n,t){return typeof n=="undefined"?t:n}function Xt(n,t,r,e){return typeof n!="undefined"&&Uu.call(e,r)?n:t}function Ht(n,t,r){var e=Fo(t);if(!r)return nr(t,n,e);for(var u=-1,o=e.length;++u<o;){var i=e[u],f=n[i],a=r(f,t[i],i,n,t);(a===a?a===f:f!==f)&&(typeof f!="undefined"||i in n)||(n[i]=a)}return n}function Qt(n,t){for(var r=-1,e=n.length,u=oe(e),o=t.length,i=wu(o);++r<o;){var f=t[r];u?(f=parseFloat(f),i[r]=ee(f,e)?n[f]:w):i[r]=n[f]
}return i}function nr(n,t,r){r||(r=t,t={});for(var e=-1,u=r.length;++e<u;){var o=r[e];t[o]=n[o]}return t}function tr(n,t,r){var e=typeof n;if("function"==e){if(e=typeof t!="undefined"){var e=Wt.support,u=!(e.funcNames?n.name:e.funcDecomp);if(!u){var o=Wu.call(n);e.funcNames||(u=!dt.test(o)),u||(u=kt.test(o)||He(n),bo(n,u))}e=u}n=e?Nr(n,t,r):n}else n=null==n?vu:"object"==e?br(n):typeof t=="undefined"?jr(n+""):xr(n+"",t);return n}function rr(n,t,r,e,u,o,i){var f;if(r&&(f=u?r(n,e,u):r(n)),typeof f!="undefined")return f;
if(!Xe(n))return n;if(e=So(n)){if(f=ne(n),!t)return zt(n,f)}else{var a=Lu.call(n),c=a==K;if(a!=Y&&a!=z&&(!c||u))return Tt[a]?re(n,a,t):u?n:{};if(f=te(c?{}:n),!t)return nr(n,f,Fo(n))}for(o||(o=[]),i||(i=[]),u=o.length;u--;)if(o[u]==n)return i[u];return o.push(n),i.push(f),(e?Mt:_r)(n,function(e,u){f[u]=rr(e,t,r,u,n,o,i)}),f}function er(n,t,r,e){if(typeof n!="function")throw new Ou($);return Gu(function(){n.apply(w,Rr(r,e))},t)}function ur(n,r){var e=n?n.length:0,u=[];if(!e)return u;var o=-1,i=Qr(),f=i==t,a=f&&200<=r.length&&xo(r),c=r.length;
a&&(i=Bt,f=false,r=a);n:for(;++o<e;)if(a=n[o],f&&a===a){for(var l=c;l--;)if(r[l]===a)continue n;u.push(a)}else 0>i(r,a)&&u.push(a);return u}function or(n,t){var r=n?n.length:0;if(!oe(r))return _r(n,t);for(var e=-1,u=pe(n);++e<r&&false!==t(u[e],e,u););return n}function ir(n,t){var r=n?n.length:0;if(!oe(r))return gr(n,t);for(var e=pe(n);r--&&false!==t(e[r],r,e););return n}function fr(n,t){var r=true;return or(n,function(n,e,u){return r=!!t(n,e,u)}),r}function ar(n,t){var r=[];return or(n,function(n,e,u){t(n,e,u)&&r.push(n)
}),r}function cr(n,t,r,e){var u;return r(n,function(n,r,o){return t(n,r,o)?(u=e?r:n,false):void 0}),u}function lr(n,t,r,e){e=(e||0)-1;for(var u=n.length,o=-1,i=[];++e<u;){var f=n[e];if(h(f)&&oe(f.length)&&(So(f)||Ye(f))){t&&(f=lr(f,t,r));var a=-1,c=f.length;for(i.length+=c;++a<c;)i[++o]=f[a]}else r||(i[++o]=f)}return i}function sr(n,t,r){var e=-1,u=pe(n);r=r(n);for(var o=r.length;++e<o;){var i=r[e];if(false===t(u[i],i,u))break}return n}function pr(n,t,r){var e=pe(n);r=r(n);for(var u=r.length;u--;){var o=r[u];
if(false===t(e[o],o,e))break}return n}function hr(n,t){sr(n,t,ou)}function _r(n,t){return sr(n,t,Fo)}function gr(n,t){return pr(n,t,Fo)}function vr(n,t){for(var r=-1,e=t.length,u=-1,o=[];++r<e;){var i=t[r];Je(n[i])&&(o[++u]=i)}return o}function yr(n,t,r){var e=-1,u=typeof t=="function",o=n?n.length:0,i=oe(o)?wu(o):[];return or(n,function(n){var o=u?t:null!=n&&n[t];i[++e]=o?o.apply(n,r):w}),i}function dr(n,t,r,e,u,o){if(n===t)return 0!==n||1/n==1/t;var i=typeof n,f=typeof t;if("function"!=i&&"object"!=i&&"function"!=f&&"object"!=f||null==n||null==t)n=n!==n&&t!==t;
else n:{var i=dr,f=So(n),a=So(t),c=D,l=D;f||(c=Lu.call(n),c==z?c=Y:c!=Y&&(f=ru(n))),a||(l=Lu.call(t),l==z?l=Y:l!=Y&&ru(t));var s=c==Y,a=l==Y,l=c==l;if(!l||f||s)if(c=s&&Uu.call(n,"__wrapped__"),a=a&&Uu.call(t,"__wrapped__"),c||a)n=i(c?n.value():n,a?t.value():t,r,e,u,o);else if(l){for(u||(u=[]),o||(o=[]),c=u.length;c--;)if(u[c]==n){n=o[c]==t;break n}u.push(n),o.push(t),n=(f?Zr:Jr)(n,t,i,r,e,u,o),u.pop(),o.pop()}else n=false;else n=Gr(n,t,c)}return n}function mr(n,t,r,e,u){var o=t.length;if(null==n)return!o;
for(var i=-1,f=!u;++i<o;)if(f&&e[i]?r[i]!==n[t[i]]:!Uu.call(n,t[i]))return false;for(i=-1;++i<o;){var a=t[i];if(f&&e[i])a=Uu.call(n,a);else{var c=n[a],l=r[i],a=u?u(c,l,a):w;typeof a=="undefined"&&(a=dr(l,c,u,true))}if(!a)return false}return true}function wr(n,t){var r=[];return or(n,function(n,e,u){r.push(t(n,e,u))}),r}function br(n){var t=Fo(n),r=t.length;if(1==r){var e=t[0],u=n[e];if(ie(u))return function(n){return null!=n&&n[e]===u&&Uu.call(n,e)}}for(var o=wu(r),i=wu(r);r--;)u=n[t[r]],o[r]=u,i[r]=ie(u);return function(n){return mr(n,t,o,i)
}}function xr(n,t){return ie(t)?function(r){return null!=r&&r[n]===t}:function(r){return null!=r&&dr(t,r[n],null,true)}}function Ar(n,t,r,e,u){var o=oe(t.length)&&(So(t)||ru(t));return(o?Mt:_r)(t,function(t,i,f){if(h(t)){e||(e=[]),u||(u=[]);n:{t=e;for(var a=u,c=t.length,l=f[i];c--;)if(t[c]==l){n[i]=a[c],i=void 0;break n}c=n[i],f=r?r(c,l,i,n,f):w;var s=typeof f=="undefined";s&&(f=l,oe(l.length)&&(So(l)||ru(l))?f=So(c)?c:c?zt(c):[]:No(l)||Ye(l)?f=Ye(c)?eu(c):No(c)?c:{}:s=false),t.push(l),a.push(f),s?n[i]=Ar(f,l,r,t,a):(f===f?f!==c:c===c)&&(n[i]=f),i=void 0
}return i}a=n[i],f=r?r(a,t,i,n,f):w,(l=typeof f=="undefined")&&(f=t),!o&&typeof f=="undefined"||!l&&(f===f?f===a:a!==a)||(n[i]=f)}),n}function jr(n){return function(t){return null==t?w:t[n]}}function kr(n,t){return n+Pu(co()*(t-n+1))}function Er(n,t,r,e,u){return u(n,function(n,u,o){r=e?(e=false,n):t(r,n,u,o)}),r}function Rr(n,t,r){var e=-1,u=n.length;for(t=null==t?0:+t||0,0>t&&(t=-t>u?0:u+t),r=typeof r=="undefined"||r>u?u:+r||0,0>r&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0,r=wu(u);++e<u;)r[e]=n[e+t];return r}function Ir(n,t){var r;
return or(n,function(n,e,u){return r=t(n,e,u),!r}),!!r}function Or(n,r){var e=-1,u=Qr(),o=n.length,i=u==t,f=i&&200<=o,a=f&&xo(),c=[];a?(u=Bt,i=false):(f=false,a=r?[]:c);n:for(;++e<o;){var l=n[e],s=r?r(l,e,n):l;if(i&&l===l){for(var p=a.length;p--;)if(a[p]===s)continue n;r&&a.push(s),c.push(l)}else 0>u(a,s)&&((r||f)&&a.push(s),c.push(l))}return c}function Cr(n,t){for(var r=-1,e=t.length,u=wu(e);++r<e;)u[r]=n[t[r]];return u}function Tr(n,t){var r=n;r instanceof Ut&&(r=r.value());for(var e=-1,u=t.length;++e<u;){var r=[r],o=t[e];
Vu.apply(r,o.args),r=o.func.apply(o.thisArg,r)}return r}function Sr(n,t,r){var e=0,u=n?n.length:e;if(typeof t=="number"&&t===t&&u<=_o){for(;e<u;){var o=e+u>>>1,i=n[o];(r?i<=t:i<t)?e=o+1:u=o}return u}return Wr(n,t,vu,r)}function Wr(n,t,r,e){t=r(t);for(var u=0,o=n?n.length:0,i=t!==t,f=typeof t=="undefined";u<o;){var a=Pu((u+o)/2),c=r(n[a]),l=c===c;(i?l||e:f?l&&(e||typeof c!="undefined"):e?c<=t:c<t)?u=a+1:o=a}return oo(o,ho)}function Nr(n,t,r){if(typeof n!="function")return vu;if(typeof t=="undefined")return n;
switch(r){case 1:return function(r){return n.call(t,r)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,o){return n.call(t,r,e,u,o)};case 5:return function(r,e,u,o,i){return n.call(t,r,e,u,o,i)}}return function(){return n.apply(t,arguments)}}function Ur(n){return Du.call(n,0)}function Fr(n,t,r){for(var e=r.length,u=-1,o=uo(n.length-e,0),i=-1,f=t.length,a=wu(o+f);++i<f;)a[i]=t[i];for(;++u<e;)a[r[u]]=n[u];for(;o--;)a[i++]=n[u++];return a}function Lr(n,t,r){for(var e=-1,u=r.length,o=-1,i=uo(n.length-u,0),f=-1,a=t.length,c=wu(i+a);++o<i;)c[o]=n[o];
for(i=o;++f<a;)c[i+f]=t[f];for(;++e<u;)c[i+r[e]]=n[o++];return c}function $r(n,t){return function(r,e,u){var o=t?t():{};if(e=Hr(e,u,3),So(r)){u=-1;for(var i=r.length;++u<i;){var f=r[u];n(o,f,e(f,u,r),r)}}else or(r,function(t,r,u){n(o,t,e(t,r,u),u)});return o}}function Br(n){return function(){var t=arguments.length,r=arguments[0];if(2>t||null==r)return r;if(3<t&&ue(arguments[1],arguments[2],arguments[3])&&(t=2),3<t&&"function"==typeof arguments[t-2])var e=Nr(arguments[--t-1],arguments[t--],5);else 2<t&&"function"==typeof arguments[t-1]&&(e=arguments[--t]);
for(var u=0;++u<t;){var o=arguments[u];o&&n(r,o,e)}return r}}function zr(n,t){function r(){return(this instanceof r?e:n).apply(t,arguments)}var e=Mr(n);return r}function Dr(n){return function(t){var r=-1;t=pu(fu(t));for(var e=t.length,u="";++r<e;)u=n(u,t[r],r);return u}}function Mr(n){return function(){var t=wo(n.prototype),r=n.apply(t,arguments);return Xe(r)?r:t}}function qr(n,t){return function(r,e,o){o&&ue(r,e,o)&&(e=null);var i=Hr(),f=null==e;if(i===tr&&f||(f=false,e=i(e,o,3)),f){if(e=So(r),e||!tu(r))return n(e?r:se(r));
e=u}return Xr(r,e,t)}}function Pr(n,t,r,e,u,o,i,f,a,c){function l(){for(var b=arguments.length,j=b,k=wu(b);j--;)k[j]=arguments[j];if(e&&(k=Fr(k,e,u)),o&&(k=Lr(k,o,i)),_||y){var j=l.placeholder,E=g(k,j),b=b-E.length;if(b<c){var O=f?zt(f):null,b=uo(c-b,0),C=_?E:null,E=_?null:E,T=_?k:null,k=_?null:k;return t|=_?R:I,t&=~(_?I:R),v||(t&=~(x|A)),k=Pr(n,t,r,T,C,k,E,O,a,b),k.placeholder=j,k}}if(j=p?r:this,h&&(n=j[m]),f)for(O=k.length,b=oo(f.length,O),C=zt(k);b--;)E=f[b],k[b]=ee(E,O)?C[E]:w;return s&&a<k.length&&(k.length=a),(this instanceof l?d||Mr(n):n).apply(j,k)
}var s=t&C,p=t&x,h=t&A,_=t&k,v=t&j,y=t&E,d=!h&&Mr(n),m=n;return l}function Kr(n,t,r){return n=n.length,t=+t,n<t&&ro(t)?(t-=n,r=null==r?" ":r+"",lu(r,Mu(t/r.length)).slice(0,t)):""}function Vr(n,t,r,e){function u(){for(var t=-1,f=arguments.length,a=-1,c=e.length,l=wu(f+c);++a<c;)l[a]=e[a];for(;f--;)l[a++]=arguments[++t];return(this instanceof u?i:n).apply(o?r:this,l)}var o=t&x,i=Mr(n);return u}function Yr(n,t,r,e,u,o,i,f){var a=t&A;if(!a&&typeof n!="function")throw new Ou($);var c=e?e.length:0;if(c||(t&=~(R|I),e=u=null),c-=u?u.length:0,t&I){var l=e,s=u;
e=u=null}var p=!a&&Ao(n);if(r=[n,t,r,e,u,l,s,o,i,f],p&&true!==p){e=r[1],t=p[1],f=e|t,o=C|O,u=x|A,i=o|u|j|E;var l=e&C&&!(t&C),s=e&O&&!(t&O),h=(s?r:p)[7],_=(l?r:p)[8];o=f>=o&&f<=i&&(e<O||(s||l)&&h.length<=_),(!(e>=O&&t>u||e>u&&t>=O)||o)&&(t&x&&(r[2]=p[2],f|=e&x?0:j),(e=p[3])&&(u=r[3],r[3]=u?Fr(u,e,p[4]):zt(e),r[4]=u?g(r[3],B):zt(p[4])),(e=p[5])&&(u=r[5],r[5]=u?Lr(u,e,p[6]):zt(e),r[6]=u?g(r[5],B):zt(p[6])),(e=p[7])&&(r[7]=zt(e)),t&C&&(r[8]=null==r[8]?p[8]:oo(r[8],p[8])),null==r[9]&&(r[9]=p[9]),r[0]=p[0],r[1]=f),t=r[1],f=r[9]
}return r[9]=null==f?a?0:n.length:uo(f-c,0)||0,(p?bo:jo)(t==x?zr(r[0],r[2]):t!=R&&t!=(x|R)||r[4].length?Pr.apply(w,r):Vr.apply(w,r),r)}function Zr(n,t,r,e,u,o,i){var f=-1,a=n.length,c=t.length,l=true;if(a!=c&&(!u||c<=a))return false;for(;l&&++f<a;){var s=n[f],p=t[f],l=w;if(e&&(l=u?e(p,s,f):e(s,p,f)),typeof l=="undefined")if(u)for(var h=c;h--&&(p=t[h],!(l=s&&s===p||r(s,p,e,u,o,i))););else l=s&&s===p||r(s,p,e,u,o,i)}return!!l}function Gr(n,t,r){switch(r){case M:case q:return+n==+t;case P:return n.name==t.name&&n.message==t.message;
case V:return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case Z:case G:return n==t+""}return false}function Jr(n,t,r,e,u,o,i){var f=Fo(n),a=f.length,c=Fo(t).length;if(a!=c&&!u)return false;for(var l,c=-1;++c<a;){var s=f[c],p=Uu.call(t,s);if(p){var h=n[s],_=t[s],p=w;e&&(p=u?e(_,h,s):e(h,_,s)),typeof p=="undefined"&&(p=h&&h===_||r(h,_,e,u,o,i))}if(!p)return false;l||(l="constructor"==s)}return l||(r=n.constructor,e=t.constructor,!(r!=e&&"constructor"in n&&"constructor"in t)||typeof r=="function"&&r instanceof r&&typeof e=="function"&&e instanceof e)?true:false
}function Xr(n,t,r){var e=r?so:lo,u=e,o=u;return or(n,function(n,i,f){i=t(n,i,f),((r?i<u:i>u)||i===e&&i===o)&&(u=i,o=n)}),o}function Hr(n,t,r){var e=Wt.callback||_u,e=e===_u?tr:e;return r?e(n,t,r):e}function Qr(n,r,e){var u=Wt.indexOf||de,u=u===de?t:u;return n?u(n,r,e):u}function ne(n){var t=n.length,r=new n.constructor(t);return t&&"string"==typeof n[0]&&Uu.call(n,"index")&&(r.index=n.index,r.input=n.input),r}function te(n){return n=n.constructor,typeof n=="function"&&n instanceof n||(n=Eu),new n
}function re(n,t,r){var e=n.constructor;switch(t){case J:return Ur(n);case M:case q:return new e(+n);case X:case H:case Q:case nt:case tt:case rt:case et:case ut:case ot:return t=n.buffer,new e(r?Ur(t):t,n.byteOffset,n.length);case V:case G:return new e(n);case Z:var u=new e(n.source,yt.exec(n));u.lastIndex=n.lastIndex}return u}function ee(n,t){return n=+n,t=null==t?vo:t,-1<n&&0==n%1&&n<t}function ue(n,t,r){if(!Xe(r))return false;var e=typeof t;return"number"==e?(e=r.length,e=oe(e)&&ee(t,e)):e="string"==e&&t in r,e&&r[t]===n
}function oe(n){return typeof n=="number"&&-1<n&&0==n%1&&n<=vo}function ie(n){return n===n&&(0===n?0<1/n:!Xe(n))}function fe(n,t){n=pe(n);for(var r=-1,e=t.length,u={};++r<e;){var o=t[r];o in n&&(u[o]=n[o])}return u}function ae(n,t){var r={};return hr(n,function(n,e,u){t(n,e,u)&&(r[e]=n)}),r}function ce(n){var t;if(!h(n)||Lu.call(n)!=Y||!(Uu.call(n,"constructor")||(t=n.constructor,typeof t!="function"||t instanceof t)))return false;var r;return hr(n,function(n,t){r=t}),typeof r=="undefined"||Uu.call(n,r)
}function le(n){for(var t=ou(n),r=t.length,e=r&&n.length,u=Wt.support,u=e&&oe(e)&&(So(n)||u.nonEnumArgs&&Ye(n)),o=-1,i=[];++o<r;){var f=t[o];(u&&ee(f,e)||Uu.call(n,f))&&i.push(f)}return i}function se(n){return null==n?[]:oe(n.length)?Xe(n)?n:Eu(n):iu(n)}function pe(n){return Xe(n)?n:Eu(n)}function he(n){return n instanceof Ut?n.clone():new Nt(n.__wrapped__,n.__chain__,zt(n.__actions__))}function _e(n,t,r){return n&&n.length?((r?ue(n,t,r):null==t)&&(t=1),Rr(n,0>t?0:t)):[]}function ge(n,t,r){var e=n?n.length:0;
return e?((r?ue(n,t,r):null==t)&&(t=1),t=e-(+t||0),Rr(n,0,0>t?0:t)):[]}function ve(n,t,r){var e=-1,u=n?n.length:0;for(t=Hr(t,r,3);++e<u;)if(t(n[e],e,n))return e;return-1}function ye(n){return n?n[0]:w}function de(n,r,e){var u=n?n.length:0;if(!u)return-1;if(typeof e=="number")e=0>e?uo(u+e,0):e||0;else if(e)return e=Sr(n,r),n=n[e],(r===r?r===n:n!==n)?e:-1;return t(n,r,e)}function me(n){return _e(n,1)}function we(n,r,e,u){if(!n||!n.length)return[];typeof r!="boolean"&&null!=r&&(u=e,e=ue(n,r,u)?null:r,r=false);
var o=Hr();if((o!==tr||null!=e)&&(e=o(e,u,3)),r&&Qr()==t){r=e;var i;e=-1,u=n.length;for(var o=-1,f=[];++e<u;){var a=n[e],c=r?r(a,e,n):a;e&&i===c||(i=c,f[++o]=a)}n=f}else n=Or(n,e);return n}function be(n){for(var t=-1,r=(n&&n.length&&Vt(Kt(n,Nu)))>>>0,e=wu(r);++t<r;)e[t]=Kt(n,jr(t));return e}function xe(n,t){var r=-1,e=n?n.length:0,u={};for(!e||t||So(n[0])||(t=[]);++r<e;){var o=n[r];t?u[o]=t[r]:o&&(u[o[0]]=o[1])}return u}function Ae(n){return n=Wt(n),n.__chain__=true,n}function je(n,t,r){return t.call(r,n)
}function ke(n,t,r){var e=n?n.length:0;return oe(e)||(n=iu(n),e=n.length),e?(r=typeof r=="number"?0>r?uo(e+r,0):r||0:0,typeof n=="string"||!So(n)&&tu(n)?r<e&&-1<n.indexOf(t,r):-1<Qr(n,t,r)):false}function Ee(n,t,r){var e=So(n)?qt:fr;return(typeof t!="function"||typeof r!="undefined")&&(t=Hr(t,r,3)),e(n,t)}function Re(n,t,r){var e=So(n)?Pt:ar;return t=Hr(t,r,3),e(n,t)}function Ie(n,t,r){return So(n)?(t=ve(n,t,r),-1<t?n[t]:w):(t=Hr(t,r,3),cr(n,t,or))}function Oe(n,t,r){return typeof t=="function"&&typeof r=="undefined"&&So(n)?Mt(n,t):or(n,Nr(t,r,3))
}function Ce(n,t,r){if(typeof t=="function"&&typeof r=="undefined"&&So(n))for(r=n.length;r--&&false!==t(n[r],r,n););else n=ir(n,Nr(t,r,3));return n}function Te(n,t,r){var e=So(n)?Kt:wr;return t=Hr(t,r,3),e(n,t)}function Se(n,t,r,e){return(So(n)?Yt:Er)(n,Hr(t,e,4),r,3>arguments.length,or)}function We(n,t,r,e){return(So(n)?Zt:Er)(n,Hr(t,e,4),r,3>arguments.length,ir)}function Ne(n,t,r){return(r?ue(n,t,r):null==t)?(n=se(n),t=n.length,0<t?n[kr(0,t-1)]:w):(n=Ue(n),n.length=oo(0>t?0:+t||0,n.length),n)}function Ue(n){n=se(n);
for(var t=-1,r=n.length,e=wu(r);++t<r;){var u=kr(0,t);t!=u&&(e[t]=e[u]),e[u]=n[t]}return e}function Fe(n,t,r){var e=So(n)?Gt:Ir;return(typeof t!="function"||typeof r!="undefined")&&(t=Hr(t,r,3)),e(n,t)}function Le(n,t){var r;if(typeof t!="function"){if(typeof n!="function")throw new Ou($);var e=n;n=t,t=e}return function(){return 0<--n?r=t.apply(this,arguments):t=null,r}}function $e(n,t){var r=x;if(2<arguments.length)var e=Rr(arguments,2),u=g(e,$e.placeholder),r=r|R;return Yr(n,r,t,e,u)}function Be(n,t){var r=x|A;
if(2<arguments.length)var e=Rr(arguments,2),u=g(e,Be.placeholder),r=r|R;return Yr(t,r,n,e,u)}function ze(n,t,r){return r&&ue(n,t,r)&&(t=null),n=Yr(n,k,null,null,null,null,null,t),n.placeholder=ze.placeholder,n}function De(n,t,r){return r&&ue(n,t,r)&&(t=null),n=Yr(n,E,null,null,null,null,null,t),n.placeholder=De.placeholder,n}function Me(n,t,r){function e(){var r=t-(To()-c);0>=r||r>t?(f&&qu(f),r=p,f=s=p=w,r&&(h=To(),a=n.apply(l,i),s||f||(i=l=null))):s=Gu(e,r)}function u(){s&&qu(s),f=s=p=w,(g||_!==t)&&(h=To(),a=n.apply(l,i),s||f||(i=l=null))
}function o(){if(i=arguments,c=To(),l=this,p=g&&(s||!v),false===_)var r=v&&!s;else{f||v||(h=c);var o=_-(c-h),y=0>=o||o>_;y?(f&&(f=qu(f)),h=c,a=n.apply(l,i)):f||(f=Gu(u,o))}return y&&s?s=qu(s):s||t===_||(s=Gu(e,t)),r&&(y=true,a=n.apply(l,i)),!y||s||f||(i=l=null),a}var i,f,a,c,l,s,p,h=0,_=false,g=true;if(typeof n!="function")throw new Ou($);if(t=0>t?0:t,true===r)var v=true,g=false;else Xe(r)&&(v=r.leading,_="maxWait"in r&&uo(+r.maxWait||0,t),g="trailing"in r?r.trailing:g);return o.cancel=function(){s&&qu(s),f&&qu(f),f=s=p=w
},o}function qe(){var n=arguments,t=n.length-1;if(0>t)return function(n){return n};if(!qt(n,Je))throw new Ou($);return function(){for(var r=t,e=n[r].apply(this,arguments);r--;)e=n[r].call(this,e);return e}}function Pe(n,t){function r(){var e=r.cache,u=t?t.apply(this,arguments):arguments[0];if(e.has(u))return e.get(u);var o=n.apply(this,arguments);return e.set(u,o),o}if(typeof n!="function"||t&&typeof t!="function")throw new Ou($);return r.cache=new Pe.Cache,r}function Ke(n){var t=Rr(arguments,1),r=g(t,Ke.placeholder);
return Yr(n,R,null,t,r)}function Ve(n){var t=Rr(arguments,1),r=g(t,Ve.placeholder);return Yr(n,I,null,t,r)}function Ye(n){return oe(h(n)?n.length:w)&&Lu.call(n)==z||false}function Ze(n){return n&&1===n.nodeType&&h(n)&&-1<Lu.call(n).indexOf("Element")||false}function Ge(n){return h(n)&&typeof n.message=="string"&&Lu.call(n)==P||false}function Je(n){return typeof n=="function"||false}function Xe(n){var t=typeof n;return"function"==t||n&&"object"==t||false}function He(n){return null==n?false:Lu.call(n)==K?Bu.test(Wu.call(n)):h(n)&&wt.test(n)||false
}function Qe(n){return typeof n=="number"||h(n)&&Lu.call(n)==V||false}function nu(n){return h(n)&&Lu.call(n)==Z||false}function tu(n){return typeof n=="string"||h(n)&&Lu.call(n)==G||false}function ru(n){return h(n)&&oe(n.length)&&Ct[Lu.call(n)]||false}function eu(n){return nr(n,ou(n))}function uu(n){return vr(n,ou(n))}function ou(n){if(null==n)return[];Xe(n)||(n=Eu(n));for(var t=n.length,t=t&&oe(t)&&(So(n)||mo.nonEnumArgs&&Ye(n))&&t||0,r=n.constructor,e=-1,r=typeof r=="function"&&r.prototype===n,u=wu(t),o=0<t;++e<t;)u[e]=e+"";
for(var i in n)o&&ee(i,t)||"constructor"==i&&(r||!Uu.call(n,i))||u.push(i);return u}function iu(n){return Cr(n,Fo(n))}function fu(n){return(n=e(n))&&n.replace(bt,c)}function au(n){return(n=e(n))&&jt.test(n)?n.replace(At,"\\$&"):n}function cu(n,t,r){return r&&ue(n,t,r)&&(t=0),ao(n,t)}function lu(n,t){var r="";if(n=e(n),t=+t,1>t||!n||!ro(t))return r;do t%2&&(r+=n),t=Pu(t/2),n+=n;while(t);return r}function su(n,t,r){var u=n;return(n=e(n))?(r?ue(u,t,r):null==t)?n.slice(v(n),y(n)+1):(t+="",n.slice(o(n,t),i(n,t)+1)):n
}function pu(n,t,r){return r&&ue(n,t,r)&&(t=null),n=e(n),n.match(t||Rt)||[]}function hu(n){try{return n.apply(w,Rr(arguments,1))}catch(t){return Ge(t)?t:new xu(t)}}function _u(n,t,r){return r&&ue(n,t,r)&&(t=null),h(n)?yu(n):tr(n,t)}function gu(n){return function(){return n}}function vu(n){return n}function yu(n){return br(rr(n,true))}function du(n,t,r){if(null==r){var e=Xe(t),u=e&&Fo(t);((u=u&&u.length&&vr(t,u))?u.length:e)||(u=false,r=t,t=n,n=this)}u||(u=vr(t,Fo(t)));var o=true,e=-1,i=Je(n),f=u.length;
!1===r?o=false:Xe(r)&&"chain"in r&&(o=r.chain);for(;++e<f;){r=u[e];var a=t[r];n[r]=a,i&&(n.prototype[r]=function(t){return function(){var r=this.__chain__;if(o||r){var e=n(this.__wrapped__);return(e.__actions__=zt(this.__actions__)).push({func:t,args:arguments,thisArg:n}),e.__chain__=r,e}return r=[this.value()],Vu.apply(r,arguments),t.apply(n,r)}}(a))}return n}function mu(){}_=_?Dt.defaults($t.Object(),_,Dt.pick($t,Ot)):$t;var wu=_.Array,bu=_.Date,xu=_.Error,Au=_.Function,ju=_.Math,ku=_.Number,Eu=_.Object,Ru=_.RegExp,Iu=_.String,Ou=_.TypeError,Cu=wu.prototype,Tu=Eu.prototype,Su=(Su=_.window)&&Su.document,Wu=Au.prototype.toString,Nu=jr("length"),Uu=Tu.hasOwnProperty,Fu=0,Lu=Tu.toString,$u=_._,Bu=Ru("^"+au(Lu).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zu=He(zu=_.ArrayBuffer)&&zu,Du=He(Du=zu&&new zu(0).slice)&&Du,Mu=ju.ceil,qu=_.clearTimeout,Pu=ju.floor,Ku=He(Ku=Eu.getPrototypeOf)&&Ku,Vu=Cu.push,Yu=Tu.propertyIsEnumerable,Zu=He(Zu=_.Set)&&Zu,Gu=_.setTimeout,Ju=Cu.splice,Xu=He(Xu=_.Uint8Array)&&Xu,Hu=He(Hu=_.WeakMap)&&Hu,Qu=function(){try{var n=He(n=_.Float64Array)&&n,t=new n(new zu(10),0,1)&&n
}catch(r){}return t}(),no=He(no=wu.isArray)&&no,to=He(to=Eu.create)&&to,ro=_.isFinite,eo=He(eo=Eu.keys)&&eo,uo=ju.max,oo=ju.min,io=He(io=bu.now)&&io,fo=He(fo=ku.isFinite)&&fo,ao=_.parseInt,co=ju.random,lo=ku.NEGATIVE_INFINITY,so=ku.POSITIVE_INFINITY,po=ju.pow(2,32)-1,ho=po-1,_o=po>>>1,go=Qu?Qu.BYTES_PER_ELEMENT:0,vo=ju.pow(2,53)-1,yo=Hu&&new Hu,mo=Wt.support={};!function(n){mo.funcDecomp=!He(_.WinRTError)&&kt.test(m),mo.funcNames=typeof Au.name=="string";try{mo.dom=11===Su.createDocumentFragment().nodeType
}catch(t){mo.dom=false}try{mo.nonEnumArgs=!Yu.call(arguments,1)}catch(r){mo.nonEnumArgs=true}}(0,0),Wt.templateSettings={escape:ht,evaluate:_t,interpolate:gt,variable:"",imports:{_:Wt}};var wo=function(){function n(){}return function(t){if(Xe(t)){n.prototype=t;var r=new n;n.prototype=null}return r||_.Object()}}(),bo=yo?function(n,t){return yo.set(n,t),n}:vu;Du||(Ur=zu&&Xu?function(n){var t=n.byteLength,r=Qu?Pu(t/go):0,e=r*go,u=new zu(t);if(r){var o=new Qu(u,0,r);o.set(new Qu(n,0,r))}return t!=e&&(o=new Xu(u,e),o.set(new Xu(n,e))),u
}:gu(null));var xo=to&&Zu?function(n){return new Lt(n)}:gu(null),Ao=yo?function(n){return yo.get(n)}:mu,jo=function(){var n=0,t=0;return function(r,e){var u=To(),o=N-(u-t);if(t=u,0<o){if(++n>=W)return r}else n=0;return bo(r,e)}}(),ko=$r(function(n,t,r){Uu.call(n,r)?++n[r]:n[r]=1}),Eo=$r(function(n,t,r){Uu.call(n,r)?n[r].push(t):n[r]=[t]}),Ro=$r(function(n,t,r){n[r]=t}),Io=qr(Vt),Oo=qr(function(n){for(var t=-1,r=n.length,e=so;++t<r;){var u=n[t];u<e&&(e=u)}return e},true),Co=$r(function(n,t,r){n[r?0:1].push(t)
},function(){return[[],[]]}),To=io||function(){return(new bu).getTime()},So=no||function(n){return h(n)&&oe(n.length)&&Lu.call(n)==D||false};mo.dom||(Ze=function(n){return n&&1===n.nodeType&&h(n)&&!No(n)||false});var Wo=fo||function(n){return typeof n=="number"&&ro(n)};(Je(/x/)||Xu&&!Je(Xu))&&(Je=function(n){return Lu.call(n)==K});var No=Ku?function(n){if(!n||Lu.call(n)!=Y)return false;var t=n.valueOf,r=He(t)&&(r=Ku(t))&&Ku(r);return r?n==r||Ku(n)==r:ce(n)}:ce,Uo=Br(Ht),Fo=eo?function(n){if(n)var t=n.constructor,r=n.length;
return typeof t=="function"&&t.prototype===n||typeof n!="function"&&r&&oe(r)?le(n):Xe(n)?eo(n):[]}:le,Lo=Br(Ar),$o=Dr(function(n,t,r){return t=t.toLowerCase(),n+(r?t.charAt(0).toUpperCase()+t.slice(1):t)}),Bo=Dr(function(n,t,r){return n+(r?"-":"")+t.toLowerCase()});8!=ao(It+"08")&&(cu=function(n,t,r){return(r?ue(n,t,r):null==t)?t=0:t&&(t=+t),n=su(n),ao(n,t||(mt.test(n)?16:10))});var zo=Dr(function(n,t,r){return n+(r?"_":"")+t.toLowerCase()}),Do=Dr(function(n,t,r){return n+(r?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))
});return Nt.prototype=wo(Wt.prototype),Ut.prototype=wo(Nt.prototype),Ut.prototype.constructor=Ut,Ft.prototype["delete"]=function(n){return this.has(n)&&delete this.__data__[n]},Ft.prototype.get=function(n){return"__proto__"==n?w:this.__data__[n]},Ft.prototype.has=function(n){return"__proto__"!=n&&Uu.call(this.__data__,n)},Ft.prototype.set=function(n,t){return"__proto__"!=n&&(this.__data__[n]=t),this},Lt.prototype.push=function(n){var t=this.data;typeof n=="string"||Xe(n)?t.set.add(n):t.hash[n]=true
},Pe.Cache=Ft,Wt.after=function(n,t){if(typeof t!="function"){if(typeof n!="function")throw new Ou($);var r=n;n=t,t=r}return n=ro(n=+n)?n:0,function(){return 1>--n?t.apply(this,arguments):void 0}},Wt.ary=function(n,t,r){return r&&ue(n,t,r)&&(t=null),t=n&&null==t?n.length:uo(+t||0,0),Yr(n,C,null,null,null,null,t)},Wt.assign=Uo,Wt.at=function(n){return oe(n?n.length:0)&&(n=se(n)),Qt(n,lr(arguments,false,false,1))},Wt.before=Le,Wt.bind=$e,Wt.bindAll=function(n){for(var t=n,r=1<arguments.length?lr(arguments,false,false,1):uu(n),e=-1,u=r.length;++e<u;){var o=r[e];
t[o]=Yr(t[o],x,t)}return t},Wt.bindKey=Be,Wt.callback=_u,Wt.chain=Ae,Wt.chunk=function(n,t,r){t=(r?ue(n,t,r):null==t)?1:uo(+t||1,1),r=0;for(var e=n?n.length:0,u=-1,o=wu(Mu(e/t));r<e;)o[++u]=Rr(n,r,r+=t);return o},Wt.compact=function(n){for(var t=-1,r=n?n.length:0,e=-1,u=[];++t<r;){var o=n[t];o&&(u[++e]=o)}return u},Wt.constant=gu,Wt.countBy=ko,Wt.create=function(n,t,r){var e=wo(n);return r&&ue(n,t,r)&&(t=null),t?nr(t,e,Fo(t)):e},Wt.curry=ze,Wt.curryRight=De,Wt.debounce=Me,Wt.defaults=function(n){if(null==n)return n;
var t=zt(arguments);return t.push(Jt),Uo.apply(w,t)},Wt.defer=function(n){return er(n,1,arguments,1)},Wt.delay=function(n,t){return er(n,t,arguments,2)},Wt.difference=function(){for(var n=-1,t=arguments.length;++n<t;){var r=arguments[n];if(So(r)||Ye(r))break}return ur(r,lr(arguments,false,true,++n))},Wt.drop=_e,Wt.dropRight=ge,Wt.dropRightWhile=function(n,t,r){var e=n?n.length:0;if(!e)return[];for(t=Hr(t,r,3);e--&&t(n[e],e,n););return Rr(n,0,e+1)},Wt.dropWhile=function(n,t,r){var e=n?n.length:0;if(!e)return[];
var u=-1;for(t=Hr(t,r,3);++u<e&&t(n[u],u,n););return Rr(n,u)},Wt.fill=function(n,t,r,e){var u=n?n.length:0;if(!u)return[];for(r&&typeof r!="number"&&ue(n,t,r)&&(r=0,e=u),u=n.length,r=null==r?0:+r||0,0>r&&(r=-r>u?0:u+r),e=typeof e=="undefined"||e>u?u:+e||0,0>e&&(e+=u),u=r>e?0:e>>>0,r>>>=0;r<u;)n[r++]=t;return n},Wt.filter=Re,Wt.flatten=function(n,t,r){var e=n?n.length:0;return r&&ue(n,t,r)&&(t=false),e?lr(n,t):[]},Wt.flattenDeep=function(n){return n&&n.length?lr(n,true):[]},Wt.flow=function(){var n=arguments,t=n.length;
if(!t)return function(n){return n};if(!qt(n,Je))throw new Ou($);return function(){for(var r=0,e=n[r].apply(this,arguments);++r<t;)e=n[r].call(this,e);return e}},Wt.flowRight=qe,Wt.forEach=Oe,Wt.forEachRight=Ce,Wt.forIn=function(n,t,r){return(typeof t!="function"||typeof r!="undefined")&&(t=Nr(t,r,3)),sr(n,t,ou)},Wt.forInRight=function(n,t,r){return t=Nr(t,r,3),pr(n,t,ou)},Wt.forOwn=function(n,t,r){return(typeof t!="function"||typeof r!="undefined")&&(t=Nr(t,r,3)),_r(n,t)},Wt.forOwnRight=function(n,t,r){return t=Nr(t,r,3),pr(n,t,Fo)
},Wt.functions=uu,Wt.groupBy=Eo,Wt.indexBy=Ro,Wt.initial=function(n){return ge(n,1)},Wt.intersection=function(){for(var n=[],r=-1,e=arguments.length,u=[],o=Qr(),i=o==t;++r<e;){var f=arguments[r];(So(f)||Ye(f))&&(n.push(f),u.push(i&&120<=f.length&&xo(r&&f)))}var e=n.length,i=n[0],a=-1,c=i?i.length:0,l=[],s=u[0];n:for(;++a<c;)if(f=i[a],0>(s?Bt(s,f):o(l,f))){for(r=e;--r;){var p=u[r];if(0>(p?Bt(p,f):o(n[r],f)))continue n}s&&s.push(f),l.push(f)}return l},Wt.invert=function(n,t,r){r&&ue(n,t,r)&&(t=null),r=-1;
for(var e=Fo(n),u=e.length,o={};++r<u;){var i=e[r],f=n[i];t?Uu.call(o,f)?o[f].push(i):o[f]=[i]:o[f]=i}return o},Wt.invoke=function(n,t){return yr(n,t,Rr(arguments,2))},Wt.keys=Fo,Wt.keysIn=ou,Wt.map=Te,Wt.mapValues=function(n,t,r){var e={};return t=Hr(t,r,3),_r(n,function(n,r,u){e[r]=t(n,r,u)}),e},Wt.matches=yu,Wt.matchesProperty=function(n,t){return xr(n+"",rr(t,true))},Wt.memoize=Pe,Wt.merge=Lo,Wt.mixin=du,Wt.negate=function(n){if(typeof n!="function")throw new Ou($);return function(){return!n.apply(this,arguments)
}},Wt.omit=function(n,t,r){if(null==n)return{};if(typeof t!="function"){var e=Kt(lr(arguments,false,false,1),Iu);return fe(n,ur(ou(n),e))}return t=Nr(t,r,3),ae(n,function(n,r,e){return!t(n,r,e)})},Wt.once=function(n){return Le(n,2)},Wt.pairs=function(n){for(var t=-1,r=Fo(n),e=r.length,u=wu(e);++t<e;){var o=r[t];u[t]=[o,n[o]]}return u},Wt.partial=Ke,Wt.partialRight=Ve,Wt.partition=Co,Wt.pick=function(n,t,r){return null==n?{}:typeof t=="function"?ae(n,Nr(t,r,3)):fe(n,lr(arguments,false,false,1))},Wt.pluck=function(n,t){return Te(n,jr(t))
},Wt.property=function(n){return jr(n+"")},Wt.propertyOf=function(n){return function(t){return null==n?w:n[t]}},Wt.pull=function(){var n=arguments[0];if(!n||!n.length)return n;for(var t=0,r=Qr(),e=arguments.length;++t<e;)for(var u=0,o=arguments[t];-1<(u=r(n,o,u));)Ju.call(n,u,1);return n},Wt.pullAt=function(t){var r=t||[],e=lr(arguments,false,false,1),u=e.length,o=Qt(r,e);for(e.sort(n);u--;){var i=parseFloat(e[u]);if(i!=f&&ee(i)){var f=i;Ju.call(r,i,1)}}return o},Wt.range=function(n,t,r){r&&ue(n,t,r)&&(t=r=null),n=+n||0,r=null==r?1:+r||0,null==t?(t=n,n=0):t=+t||0;
var e=-1;t=uo(Mu((t-n)/(r||1)),0);for(var u=wu(t);++e<t;)u[e]=n,n+=r;return u},Wt.rearg=function(n){var t=lr(arguments,false,false,1);return Yr(n,O,null,null,null,t)},Wt.reject=function(n,t,r){var e=So(n)?Pt:ar;return t=Hr(t,r,3),e(n,function(n,r,e){return!t(n,r,e)})},Wt.remove=function(n,t,r){var e=-1,u=n?n.length:0,o=[];for(t=Hr(t,r,3);++e<u;)r=n[e],t(r,e,n)&&(o.push(r),Ju.call(n,e--,1),u--);return o},Wt.rest=me,Wt.shuffle=Ue,Wt.slice=function(n,t,r){var e=n?n.length:0;return e?(r&&typeof r!="number"&&ue(n,t,r)&&(t=0,r=e),Rr(n,t,r)):[]
},Wt.sortBy=function(n,t,e){var u=-1,o=n?n.length:0,i=oe(o)?wu(o):[];return e&&ue(n,t,e)&&(t=null),t=Hr(t,e,3),or(n,function(n,r,e){i[++u]={a:t(n,r,e),b:u,c:n}}),r(i,f)},Wt.sortByAll=function(n){var t=arguments;3<t.length&&ue(t[1],t[2],t[3])&&(t=[n,t[1]]);var e=-1,u=n?n.length:0,o=lr(t,false,false,1),i=oe(u)?wu(u):[];return or(n,function(n){for(var t=o.length,r=wu(t);t--;)r[t]=null==n?w:n[o[t]];i[++e]={a:r,b:e,c:n}}),r(i,a)},Wt.spread=function(n){if(typeof n!="function")throw new Ou($);return function(t){return n.apply(this,t)
}},Wt.take=function(n,t,r){return n&&n.length?((r?ue(n,t,r):null==t)&&(t=1),Rr(n,0,0>t?0:t)):[]},Wt.takeRight=function(n,t,r){var e=n?n.length:0;return e?((r?ue(n,t,r):null==t)&&(t=1),t=e-(+t||0),Rr(n,0>t?0:t)):[]},Wt.takeRightWhile=function(n,t,r){var e=n?n.length:0;if(!e)return[];for(t=Hr(t,r,3);e--&&t(n[e],e,n););return Rr(n,e+1)},Wt.takeWhile=function(n,t,r){var e=n?n.length:0;if(!e)return[];var u=-1;for(t=Hr(t,r,3);++u<e&&t(n[u],u,n););return Rr(n,0,u)},Wt.tap=function(n,t,r){return t.call(r,n),n
},Wt.throttle=function(n,t,r){var e=true,u=true;if(typeof n!="function")throw new Ou($);return false===r?e=false:Xe(r)&&(e="leading"in r?!!r.leading:e,u="trailing"in r?!!r.trailing:u),St.leading=e,St.maxWait=+t,St.trailing=u,Me(n,t,St)},Wt.thru=je,Wt.times=function(n,t,r){if(n=+n,1>n||!ro(n))return[];var e=-1,u=wu(oo(n,po));for(t=Nr(t,r,1);++e<n;)e<po?u[e]=t(e):t(e);return u},Wt.toArray=function(n){var t=n?n.length:0;return oe(t)?t?zt(n):[]:iu(n)},Wt.toPlainObject=eu,Wt.transform=function(n,t,r,e){var u=So(n)||ru(n);
return t=Hr(t,e,4),null==r&&(u||Xe(n)?(e=n.constructor,r=u?So(n)?new e:[]:wo(Je(e)&&e.prototype)):r={}),(u?Mt:_r)(n,function(n,e,u){return t(r,n,e,u)}),r},Wt.union=function(){return Or(lr(arguments,false,true))},Wt.uniq=we,Wt.unzip=be,Wt.values=iu,Wt.valuesIn=function(n){return Cr(n,ou(n))},Wt.where=function(n,t){return Re(n,br(t))},Wt.without=function(n){return ur(n,Rr(arguments,1))},Wt.wrap=function(n,t){return t=null==t?vu:t,Yr(t,R,null,[n],[])},Wt.xor=function(){for(var n=-1,t=arguments.length;++n<t;){var r=arguments[n];
if(So(r)||Ye(r))var e=e?ur(e,r).concat(ur(r,e)):r}return e?Or(e):[]},Wt.zip=function(){for(var n=arguments.length,t=wu(n);n--;)t[n]=arguments[n];return be(t)},Wt.zipObject=xe,Wt.backflow=qe,Wt.collect=Te,Wt.compose=qe,Wt.each=Oe,Wt.eachRight=Ce,Wt.extend=Uo,Wt.iteratee=_u,Wt.methods=uu,Wt.object=xe,Wt.select=Re,Wt.tail=me,Wt.unique=we,du(Wt,Wt),Wt.attempt=hu,Wt.camelCase=$o,Wt.capitalize=function(n){return(n=e(n))&&n.charAt(0).toUpperCase()+n.slice(1)},Wt.clone=function(n,t,r,e){return typeof t!="boolean"&&null!=t&&(e=r,r=ue(n,t,e)?null:t,t=false),r=typeof r=="function"&&Nr(r,e,1),rr(n,t,r)
},Wt.cloneDeep=function(n,t,r){return t=typeof t=="function"&&Nr(t,r,1),rr(n,true,t)},Wt.deburr=fu,Wt.endsWith=function(n,t,r){n=e(n),t+="";var u=n.length;return r=(typeof r=="undefined"?u:oo(0>r?0:+r||0,u))-t.length,0<=r&&n.indexOf(t,r)==r},Wt.escape=function(n){return(n=e(n))&&pt.test(n)?n.replace(lt,l):n},Wt.escapeRegExp=au,Wt.every=Ee,Wt.find=Ie,Wt.findIndex=ve,Wt.findKey=function(n,t,r){return t=Hr(t,r,3),cr(n,t,_r,true)},Wt.findLast=function(n,t,r){return t=Hr(t,r,3),cr(n,t,ir)},Wt.findLastIndex=function(n,t,r){var e=n?n.length:0;
for(t=Hr(t,r,3);e--;)if(t(n[e],e,n))return e;return-1},Wt.findLastKey=function(n,t,r){return t=Hr(t,r,3),cr(n,t,gr,true)},Wt.findWhere=function(n,t){return Ie(n,br(t))},Wt.first=ye,Wt.has=function(n,t){return n?Uu.call(n,t):false},Wt.identity=vu,Wt.includes=ke,Wt.indexOf=de,Wt.isArguments=Ye,Wt.isArray=So,Wt.isBoolean=function(n){return true===n||false===n||h(n)&&Lu.call(n)==M||false},Wt.isDate=function(n){return h(n)&&Lu.call(n)==q||false},Wt.isElement=Ze,Wt.isEmpty=function(n){if(null==n)return true;var t=n.length;
return oe(t)&&(So(n)||tu(n)||Ye(n)||h(n)&&Je(n.splice))?!t:!Fo(n).length},Wt.isEqual=function(n,t,r,e){return r=typeof r=="function"&&Nr(r,e,3),!r&&ie(n)&&ie(t)?n===t:(e=r?r(n,t):w,typeof e=="undefined"?dr(n,t,r):!!e)},Wt.isError=Ge,Wt.isFinite=Wo,Wt.isFunction=Je,Wt.isMatch=function(n,t,r,e){var u=Fo(t),o=u.length;if(r=typeof r=="function"&&Nr(r,e,3),!r&&1==o){var i=u[0];if(e=t[i],ie(e))return null!=n&&e===n[i]&&Uu.call(n,i)}for(var i=wu(o),f=wu(o);o--;)e=i[o]=t[u[o]],f[o]=ie(e);return mr(n,u,i,f,r)
},Wt.isNaN=function(n){return Qe(n)&&n!=+n},Wt.isNative=He,Wt.isNull=function(n){return null===n},Wt.isNumber=Qe,Wt.isObject=Xe,Wt.isPlainObject=No,Wt.isRegExp=nu,Wt.isString=tu,Wt.isTypedArray=ru,Wt.isUndefined=function(n){return typeof n=="undefined"},Wt.kebabCase=Bo,Wt.last=function(n){var t=n?n.length:0;return t?n[t-1]:w},Wt.lastIndexOf=function(n,t,r){var e=n?n.length:0;if(!e)return-1;var u=e;if(typeof r=="number")u=(0>r?uo(e+r,0):oo(r||0,e-1))+1;else if(r)return u=Sr(n,t,true)-1,n=n[u],(t===t?t===n:n!==n)?u:-1;
if(t!==t)return p(n,u,true);for(;u--;)if(n[u]===t)return u;return-1},Wt.max=Io,Wt.min=Oo,Wt.noConflict=function(){return _._=$u,this},Wt.noop=mu,Wt.now=To,Wt.pad=function(n,t,r){n=e(n),t=+t;var u=n.length;return u<t&&ro(t)?(u=(t-u)/2,t=Pu(u),u=Mu(u),r=Kr("",u,r),r.slice(0,t)+n+r):n},Wt.padLeft=function(n,t,r){return(n=e(n))&&Kr(n,t,r)+n},Wt.padRight=function(n,t,r){return(n=e(n))&&n+Kr(n,t,r)},Wt.parseInt=cu,Wt.random=function(n,t,r){r&&ue(n,t,r)&&(t=r=null);var e=null==n,u=null==t;return null==r&&(u&&typeof n=="boolean"?(r=n,n=1):typeof t=="boolean"&&(r=t,u=true)),e&&u&&(t=1,u=false),n=+n||0,u?(t=n,n=0):t=+t||0,r||n%1||t%1?(r=co(),oo(n+r*(t-n+parseFloat("1e-"+((r+"").length-1))),t)):kr(n,t)
},Wt.reduce=Se,Wt.reduceRight=We,Wt.repeat=lu,Wt.result=function(n,t,r){return t=null==n?w:n[t],typeof t=="undefined"&&(t=r),Je(t)?t.call(n):t},Wt.runInContext=m,Wt.size=function(n){var t=n?n.length:0;return oe(t)?t:Fo(n).length},Wt.snakeCase=zo,Wt.some=Fe,Wt.sortedIndex=function(n,t,r,e){var u=Hr(r);return u===tr&&null==r?Sr(n,t):Wr(n,t,u(r,e,1))},Wt.sortedLastIndex=function(n,t,r,e){var u=Hr(r);return u===tr&&null==r?Sr(n,t,true):Wr(n,t,u(r,e,1),true)},Wt.startCase=Do,Wt.startsWith=function(n,t,r){return n=e(n),r=null==r?0:oo(0>r?0:+r||0,n.length),n.lastIndexOf(t,r)==r
},Wt.template=function(n,t,r){var u=Wt.templateSettings;r&&ue(n,t,r)&&(t=r=null),n=e(n),t=Ht(Ht({},r||t),u,Xt),r=Ht(Ht({},t.imports),u.imports,Xt);var o,i,f=Fo(r),a=Cr(r,f),c=0;r=t.interpolate||xt;var l="__p+='";r=Ru((t.escape||xt).source+"|"+r.source+"|"+(r===gt?vt:xt).source+"|"+(t.evaluate||xt).source+"|$","g");var p="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";if(n.replace(r,function(t,r,e,u,f,a){return e||(e=u),l+=n.slice(c,a).replace(Et,s),r&&(o=true,l+="'+__e("+r+")+'"),f&&(i=true,l+="';"+f+";\n__p+='"),e&&(l+="'+((__t=("+e+"))==null?'':__t)+'"),c=a+t.length,t
}),l+="';",(t=t.variable)||(l="with(obj){"+l+"}"),l=(i?l.replace(it,""):l).replace(ft,"$1").replace(at,"$1;"),l="function("+(t||"obj")+"){"+(t?"":"obj||(obj={});")+"var __t,__p=''"+(o?",__e=_.escape":"")+(i?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+l+"return __p}",t=hu(function(){return Au(f,p+"return "+l).apply(w,a)}),t.source=l,Ge(t))throw t;return t},Wt.trim=su,Wt.trimLeft=function(n,t,r){var u=n;return(n=e(n))?n.slice((r?ue(u,t,r):null==t)?v(n):o(n,t+"")):n
},Wt.trimRight=function(n,t,r){var u=n;return(n=e(n))?(r?ue(u,t,r):null==t)?n.slice(0,y(n)+1):n.slice(0,i(n,t+"")+1):n},Wt.trunc=function(n,t,r){r&&ue(n,t,r)&&(t=null);var u=T;if(r=S,null!=t)if(Xe(t)){var o="separator"in t?t.separator:o,u="length"in t?+t.length||0:u;r="omission"in t?e(t.omission):r}else u=+t||0;if(n=e(n),u>=n.length)return n;if(u-=r.length,1>u)return r;if(t=n.slice(0,u),null==o)return t+r;if(nu(o)){if(n.slice(u).search(o)){var i,f=n.slice(0,u);for(o.global||(o=Ru(o.source,(yt.exec(o)||"")+"g")),o.lastIndex=0;n=o.exec(f);)i=n.index;
t=t.slice(0,null==i?u:i)}}else n.indexOf(o,u)!=u&&(o=t.lastIndexOf(o),-1<o&&(t=t.slice(0,o)));return t+r},Wt.unescape=function(n){return(n=e(n))&&st.test(n)?n.replace(ct,d):n},Wt.uniqueId=function(n){var t=++Fu;return e(n)+t},Wt.words=pu,Wt.all=Ee,Wt.any=Fe,Wt.contains=ke,Wt.detect=Ie,Wt.foldl=Se,Wt.foldr=We,Wt.head=ye,Wt.include=ke,Wt.inject=Se,du(Wt,function(){var n={};return _r(Wt,function(t,r){Wt.prototype[r]||(n[r]=t)}),n}(),false),Wt.sample=Ne,Wt.prototype.sample=function(n){return this.__chain__||null!=n?this.thru(function(t){return Ne(t,n)
}):Ne(this.value())},Wt.VERSION=b,Mt("bind bindKey curry curryRight partial partialRight".split(" "),function(n){Wt[n].placeholder=Wt}),Mt(["filter","map","takeWhile"],function(n,t){var r=t==U,e=t==L;Ut.prototype[n]=function(n,u){var o=this.clone(),i=o.__filtered__,f=o.__iteratees__||(o.__iteratees__=[]);return o.__filtered__=i||r||e&&0>o.__dir__,f.push({iteratee:Hr(n,u,3),type:t}),o}}),Mt(["drop","take"],function(n,t){var r="__"+n+"Count__",e=n+"While";Ut.prototype[n]=function(e){e=null==e?1:uo(Pu(e)||0,0);
var u=this.clone();if(u.__filtered__){var o=u[r];u[r]=t?oo(o,e):o+e}else(u.__views__||(u.__views__=[])).push({size:e,type:n+(0>u.__dir__?"Right":"")});return u},Ut.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()},Ut.prototype[n+"RightWhile"]=function(n,t){return this.reverse()[e](n,t).reverse()}}),Mt(["first","last"],function(n,t){var r="take"+(t?"Right":"");Ut.prototype[n]=function(){return this[r](1).value()[0]}}),Mt(["initial","rest"],function(n,t){var r="drop"+(t?"":"Right");
Ut.prototype[n]=function(){return this[r](1)}}),Mt(["pluck","where"],function(n,t){var r=t?"filter":"map",e=t?br:jr;Ut.prototype[n]=function(n){return this[r](e(n))}}),Ut.prototype.compact=function(){return this.filter(vu)},Ut.prototype.dropWhile=function(n,t){var r;return n=Hr(n,t,3),this.filter(function(t,e,u){return r||(r=!n(t,e,u))})},Ut.prototype.reject=function(n,t){return n=Hr(n,t,3),this.filter(function(t,r,e){return!n(t,r,e)})},Ut.prototype.slice=function(n,t){n=null==n?0:+n||0;var r=0>n?this.takeRight(-n):this.drop(n);
return typeof t!="undefined"&&(t=+t||0,r=0>t?r.dropRight(-t):r.take(t-n)),r},Ut.prototype.toArray=function(){return this.drop(0)},_r(Ut.prototype,function(n,t){var r=Wt[t],e=/^(?:first|last)$/.test(t);Wt.prototype[t]=function(){function t(n){return n=[n],Vu.apply(n,o),r.apply(Wt,n)}var u=this.__wrapped__,o=arguments,i=this.__chain__,f=!!this.__actions__.length,a=u instanceof Ut,c=a&&!f;return e&&!i?c?n.call(u):r.call(Wt,this.value()):a||So(u)?(u=n.apply(c?u:new Ut(this),o),e||!f&&!u.__actions__||(u.__actions__||(u.__actions__=[])).push({func:je,args:[t],thisArg:Wt}),new Nt(u,i)):this.thru(t)
}}),Mt("concat join pop push shift sort splice unshift".split(" "),function(n){var t=Cu[n],r=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",e=/^(?:join|pop|shift)$/.test(n);Wt.prototype[n]=function(){var n=arguments;return e&&!this.__chain__?t.apply(this.value(),n):this[r](function(r){return t.apply(r,n)})}}),Ut.prototype.clone=function(){var n=this.__actions__,t=this.__iteratees__,r=this.__views__,e=new Ut(this.__wrapped__);return e.__actions__=n?zt(n):null,e.__dir__=this.__dir__,e.__dropCount__=this.__dropCount__,e.__filtered__=this.__filtered__,e.__iteratees__=t?zt(t):null,e.__takeCount__=this.__takeCount__,e.__views__=r?zt(r):null,e
},Ut.prototype.reverse=function(){if(this.__filtered__){var n=new Ut(this);n.__dir__=-1,n.__filtered__=true}else n=this.clone(),n.__dir__*=-1;return n},Ut.prototype.value=function(){var n=this.__wrapped__.value();if(!So(n))return Tr(n,this.__actions__);var t,r=this.__dir__,e=0>r;t=n.length;for(var u=this.__views__,o=0,i=-1,f=u?u.length:0;++i<f;){var a=u[i],c=a.size;switch(a.type){case"drop":o+=c;break;case"dropRight":t-=c;break;case"take":t=oo(t,o+c);break;case"takeRight":o=uo(o,t-c)}}t={start:o,end:t},i=t.start,f=t.end,t=f-i,u=this.__dropCount__,o=oo(t,this.__takeCount__),e=e?f:i-1,f=(i=this.__iteratees__)?i.length:0,a=0,c=[];
n:for(;t--&&a<o;){for(var e=e+r,l=-1,s=n[e];++l<f;){var p=i[l],h=p.iteratee(s,e,n),p=p.type;if(p==F)s=h;else if(!h){if(p==U)continue n;break n}}u?u--:c[a++]=s}return c},Wt.prototype.chain=function(){return Ae(this)},Wt.prototype.commit=function(){return new Nt(this.value(),this.__chain__)},Wt.prototype.plant=function(n){for(var t,r=this;r instanceof Nt;){var e=he(r);t?u.__wrapped__=e:t=e;var u=e,r=r.__wrapped__}return u.__wrapped__=n,t},Wt.prototype.reverse=function(){var n=this.__wrapped__;return n instanceof Ut?(this.__actions__.length&&(n=new Ut(this)),new Nt(n.reverse(),this.__chain__)):this.thru(function(n){return n.reverse()
})},Wt.prototype.toString=function(){return this.value()+""},Wt.prototype.run=Wt.prototype.toJSON=Wt.prototype.valueOf=Wt.prototype.value=function(){return Tr(this.__wrapped__,this.__actions__)},Wt.prototype.collect=Wt.prototype.map,Wt.prototype.head=Wt.prototype.first,Wt.prototype.select=Wt.prototype.filter,Wt.prototype.tail=Wt.prototype.rest,Wt}var w,b="3.2.0",x=1,A=2,j=4,k=8,E=16,R=32,I=64,O=128,C=256,T=30,S="...",W=150,N=16,U=0,F=1,L=2,$="Expected a function",B="__lodash_placeholder__",z="[object Arguments]",D="[object Array]",M="[object Boolean]",q="[object Date]",P="[object Error]",K="[object Function]",V="[object Number]",Y="[object Object]",Z="[object RegExp]",G="[object String]",J="[object ArrayBuffer]",X="[object Float32Array]",H="[object Float64Array]",Q="[object Int8Array]",nt="[object Int16Array]",tt="[object Int32Array]",rt="[object Uint8Array]",et="[object Uint8ClampedArray]",ut="[object Uint16Array]",ot="[object Uint32Array]",it=/\b__p\+='';/g,ft=/\b(__p\+=)''\+/g,at=/(__e\(.*?\)|\b__t\))\+'';/g,ct=/&(?:amp|lt|gt|quot|#39|#96);/g,lt=/[&<>"'`]/g,st=RegExp(ct.source),pt=RegExp(lt.source),ht=/<%-([\s\S]+?)%>/g,_t=/<%([\s\S]+?)%>/g,gt=/<%=([\s\S]+?)%>/g,vt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,yt=/\w*$/,dt=/^\s*function[ \n\r\t]+\w/,mt=/^0[xX]/,wt=/^\[object .+?Constructor\]$/,bt=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,xt=/($^)/,At=/[.*+?^${}()|[\]\/\\]/g,jt=RegExp(At.source),kt=/\bthis\b/,Et=/['\n\r\u2028\u2029\\]/g,Rt=RegExp("[A-Z\\xc0-\\xd6\\xd8-\\xde]{2,}(?=[A-Z\\xc0-\\xd6\\xd8-\\xde][a-z\\xdf-\\xf6\\xf8-\\xff]+)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+|[A-Z\\xc0-\\xd6\\xd8-\\xde]+|[0-9]+","g"),It=" \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000",Ot="Array ArrayBuffer Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Math Number Object RegExp Set String _ clearTimeout document isFinite parseInt setTimeout TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap window WinRTError".split(" "),Ct={};
Ct[X]=Ct[H]=Ct[Q]=Ct[nt]=Ct[tt]=Ct[rt]=Ct[et]=Ct[ut]=Ct[ot]=true,Ct[z]=Ct[D]=Ct[J]=Ct[M]=Ct[q]=Ct[P]=Ct[K]=Ct["[object Map]"]=Ct[V]=Ct[Y]=Ct[Z]=Ct["[object Set]"]=Ct[G]=Ct["[object WeakMap]"]=false;var Tt={};Tt[z]=Tt[D]=Tt[J]=Tt[M]=Tt[q]=Tt[X]=Tt[H]=Tt[Q]=Tt[nt]=Tt[tt]=Tt[V]=Tt[Y]=Tt[Z]=Tt[G]=Tt[rt]=Tt[et]=Tt[ut]=Tt[ot]=true,Tt[P]=Tt[K]=Tt["[object Map]"]=Tt["[object Set]"]=Tt["[object WeakMap]"]=false;var St={leading:false,maxWait:0,trailing:false},Wt={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss"},Nt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Ut={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Ft={"function":true,object:true},Lt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},$t=Ft[typeof window]&&window!==(this&&this.window)?window:this,Bt=Ft[typeof exports]&&exports&&!exports.nodeType&&exports,Ft=Ft[typeof module]&&module&&!module.nodeType&&module,zt=Bt&&Ft&&typeof global=="object"&&global;
!zt||zt.global!==zt&&zt.window!==zt&&zt.self!==zt||($t=zt);var zt=Ft&&Ft.exports===Bt&&Bt,Dt=m();typeof define=="function"&&typeof define.amd=="object"&&define.amd?($t._=Dt, define(function(){return Dt})):Bt&&Ft?zt?(Ft.exports=Dt)._=Dt:Bt._=Dt:$t._=Dt}).call(this);
angular.module('VirtualBookshelf')
.factory('archive', function (data) {
	var archive = {};

	archive.sendExternalURL = function(externalURL, tags) {
		return data.postCover(externalURL, tags);
	};

	return archive;
});
angular.module('VirtualBookshelf')
.factory('cache', function ($q, $log, data) {
	var cache = {};

	var library = null;
	var sections = {};
	var books = {};
	var images = {};

	cache.init = function(libraryModel, sectionModels, bookModels, covers) {
		var libraryLoad = loadLibraryData(libraryModel);
		var sectionsLoad = [];
		var booksLoad = [];
		var imagesLoad = [];
		var model, coverId; // iterators

		for (model in sectionModels) {
			sectionsLoad.push(addSection(model));
		}

		for (model in bookModels) {
			booksLoad.push(addBook(model));
		}

		for (coverId in covers) {
			imagesLoad.push(addImageByDto(covers[coverId]));
		}

		var promise = $q.all({
			libraryCache: libraryLoad, 
			sectionsLoad: $q.all(sectionsLoad), 
			booksLoad: $q.all(booksLoad),
			imagesLoad: $q.all(imagesLoad)
		}).then(function (results) {
			library = results.libraryCache;
		});

		return promise;
	};

	cache.getLibrary = function() {
		return library;
	};

	cache.getSection = function(model) {
		return commonGetter(sections, model, addSection);
	};

	cache.getBook = function(model) {
		return commonGetter(books, model, addBook);
	};

	cache.getImage = function(id) {
		return commonGetter(images, id, addImageById);
	};

	var addSection = function(model) {
		return commonAdder(sections, model, loadSectionData);
	};

	var addBook = function(model) {
		return commonAdder(books, model, loadBookData);
	};

	var addImageById = function(id) {
		return data.getCover(id).then(function (coverDto) {
			return data.loadImage(coverDto.url).then(function (image) {
				return addImage(coverDto, image);
			});
		}).catch(function () {
			$log.error('Error adding image by id:', id);
			return null;
		});
	};

	var addImageByDto = function(coverDto) {
		return data.loadImage(coverDto.url).then(function (image) {
			return addImage(coverDto, image);
		}).catch(function () {
			$log.error('Error adding image by dto:', coverDto.id);
			return null;
		});
	};

	var addImage = function(dto, image) {
		var loadedCache = {
			dto: dto,
			image: image
		};

		images[dto.id] = loadedCache;
		return loadedCache;
	};

	var commonGetter = function(from, key, addFunction) {
		var result = from[key];

		if(!result) {
			result = addFunction(key);
		}

		return $q.when(result);
	};

	var commonAdder = function(where, what, loader) {
		var promise = loader(what).then(function (loadedCache) {
			where[what] = loadedCache;

			return loadedCache;
		});

		return promise;
	};

	var loadLibraryData = function(model) {
		var path = '/obj/libraries/{model}/'.replace('{model}', model);
        var modelUrl = path + 'model.json';
        var mapUrl = path + 'map.jpg';

        var promise = $q.all({
        	geometry: data.loadGeometry(modelUrl), 
        	mapImage: data.loadImage(mapUrl)
        });

        return promise;
	};

	var loadSectionData = function(model) {
		var path = '/obj/sections/{model}/'.replace('{model}', model);
        var modelUrl = path + 'model.js';
        var mapUrl = path + 'map.jpg';
        var dataUrl = path + 'data.json';

        var promise = $q.all({
        	geometry: data.loadGeometry(modelUrl), 
        	mapImage: data.loadImage(mapUrl), 
        	data: data.getData(dataUrl)
        });

        return promise;
	};

	var loadBookData = function(model) {
		var path = '/obj/books/{model}/'.replace('{model}', model);
        var modelUrl = path + 'model.js';
        var mapUrl = path + 'map.jpg';
        var bumpMapUrl = path + 'bump_map.jpg';
        var specularMapUrl = path + 'specular_map.jpg';

        var promise = $q.all({
        	geometry: data.loadGeometry(modelUrl),
        	mapImage: data.loadImage(mapUrl).catch(function () {
        		$log.error('Cache: Error loading book map:', model);
        		return null;
        	}),
        	bumpMapImage: data.loadImage(bumpMapUrl).catch(function () {
        		$log.error('Cache: Error loading book bumpMap:', model);
        		return null;
        	}),
        	specularMapImage: data.loadImage(specularMapUrl).catch(function () {
        		$log.error('Cache: Error loading book specularMap:', model);
        		return null;
        	})
        });

        return promise;
	};

	return cache;
});
angular.module('VirtualBookshelf')
.factory('camera', function (CameraObject) {
	var camera = {
		HEIGTH: 1.5,
		object: new CameraObject(),
		setParent: function(parent) {
			parent.add(this.object);
		},
		getPosition: function() {
			return this.object.position;
		}
	};

	var init = function() {
		var width = window.innerWidth;
		var height = window.innerHeight;
		
		camera.camera = new THREE.PerspectiveCamera(45, width / height, 0.01, 50);
		camera.object.position = new THREE.Vector3(0, camera.HEIGTH, 0);
		camera.object.rotation.order = 'YXZ';

		var candle = new THREE.PointLight(0x665555, 1.6, 10);
		candle.position.set(0, 0, 0);
		camera.object.add(candle);

		camera.object.add(camera.camera);
	};

	camera.rotate = function(x, y) {
		var newX = this.object.rotation.x + y * 0.0001 || 0;
		var newY = this.object.rotation.y + x * 0.0001 || 0;

		if(newX < 1.57 && newX > -1.57) {	
			this.object.rotation.x = newX;
		}

		this.object.rotation.y = newY;
	};

	camera.go = function(speed) {
		var direction = this.getVector();
		var newPosition = this.object.position.clone();
		newPosition.add(direction.multiplyScalar(speed));

		this.object.move(newPosition);
	};

	camera.getVector = function() {
		var vector = new THREE.Vector3(0, 0, -1);

		return vector.applyEuler(this.object.rotation);
	};

	init();

	return camera;
});
angular.module('VirtualBookshelf')
/* 
 * controls.js is a service for processing not UI(menus) events 
 * like mouse, keyboard, touch or gestures.
 *
 * TODO: remove all busines logic from there and leave only
 * events functionality to make it more similar to usual controller
 */
.factory('controls', function ($q, $log, SelectorMeta, BookObject, ShelfObject, SectionObject, camera, navigation, environment, mouse, selector, preview, block) {
	var controls = {};

	controls.init = function() {
		controls.initListeners();
	};

	controls.initListeners = function() {
		document.addEventListener('mousedown', controls.onMouseDown, false);
		document.addEventListener('mouseup', controls.onMouseUp, false);
		document.addEventListener('mousemove', controls.onMouseMove, false);	
		document.oncontextmenu = function() {return false;};
	};

	controls.update = function() {
		if(!preview.isActive()) {
			if(mouse[3]) {
				camera.rotate(mouse.longX, mouse.longY);
			}
			if(mouse[1] && mouse[3]) {
				camera.go(navigation.BUTTONS_GO_SPEED);
			}
		}
	};

	controls.onMouseDown = function(event) {
		mouse.down(event); 

		if(mouse.isCanvas() && mouse[1] && !mouse[3] && !preview.isActive()) {
			controls.selectObject();
			selector.selectFocused();
		}
	};

	controls.onMouseUp = function(event) {
		mouse.up(event);
		
		if(event.which === 1 && !preview.isActive()) {
			if(selector.isSelectedEditable()) {
				var obj = selector.getSelectedObject();

				if(obj.changed) {
					block.global.start();
					obj.save().catch(function () {
						obj.rollback();
					}).finally(function () {
						block.global.stop();
					});
				}
			}
		}
	};

	controls.onMouseMove = function(event) {
		mouse.move(event);

		if(mouse.isCanvas() && !preview.isActive()) {
			event.preventDefault();

			if(mouse[1] && !mouse[3]) {		
				controls.moveObject();
			} else {
				controls.selectObject();
			}
		}
	};

	//****

	controls.selectObject = function() {
		var
			intersected,
			object;

		if(mouse.isCanvas() && environment.library) {
			//TODO: optimize
			intersected = mouse.getIntersected(environment.library.children, true, [BookObject]);
			if(!intersected) {
				intersected = mouse.getIntersected(environment.library.children, true, [ShelfObject]);
			}
			if(!intersected) {
				intersected = mouse.getIntersected(environment.library.children, true, [SectionObject]);
			}
			if(intersected) {
				object = intersected.object;
			}

			selector.focus(new SelectorMeta(object));
		}
	};

	controls.moveObject = function() {
		var mouseVector;
		var newPosition;
		var parent;
		var selectedObject;

		if(selector.isSelectedEditable()) {
			selectedObject = selector.getSelectedObject();
			mouseVector = camera.getVector();	
			newPosition = selectedObject.position.clone();
			parent = selectedObject.parent;
			parent.localToWorld(newPosition);

			newPosition.x -= (mouseVector.z * mouse.dX + mouseVector.x * mouse.dY) * 0.003;
			newPosition.z -= (-mouseVector.x * mouse.dX + mouseVector.z * mouse.dY) * 0.003;

			parent.worldToLocal(newPosition);
			selectedObject.move(newPosition);
		}
	};

	return controls;	
});
angular.module('VirtualBookshelf')
.factory('data', function ($http, $q) {
	var data = {};

	data.TEXTURE_RESOLUTION = 512;
	data.COVER_MAX_Y = 394;
	data.COVER_FACE_X = 296;

    data.loadImage = function(url) {
        var deffered = $q.defer();
        var img = new Image();
        
        img.crossOrigin = ''; 
        img.src = url;
        
        if(img.complete) {
            deffered.resolve(img);
        }

        img.onload = function () {
            deffered.resolve(img);
        };
        img.onerror = function (error) {
            deffered.reject(error);
        };

        return deffered.promise; 
    };

	data.getCover = function(id) {
		return $http.get('/cover/' + id).then(function (res) {
			return res.data;
		});
	};

    data.postCover = function(externalURL, tags) {
    	var data = {
    		url: externalURL,
    		tags: tags
    	};

    	return $http.post('/cover', data).then(function (res) {
    		return res.data;
    	});
    };

    data.logout = function() {
    	return $http.post('/auth/logout');
    };

	data.getUser = function() {
		return $http.get('/user');
	};

	data.getUserBooks = function(userId) {
		return $http.get('/freeBooks/' + userId).then(function (res) {
			return res.data;
		});
	};

	data.postBook = function(book) {
		return $http.post('/book', book).then(function (res) {
			return res.data;
		});
	};

	data.deleteBook = function(id) {
		return $http({
			method: 'DELETE',
			url: '/book/' + id
		});
	};

	data.getUIData = function() {
		return $http.get('/obj/data.json');
	};

	data.getLibraries = function() {
		return $http.get('/libraries');
	};

	data.getLibrary = function(libraryId) {
		return $http.get('/library/' + libraryId).then(function (res) {
			return res.data;
		});
	};

	data.postLibrary = function(libraryModel) {
        return $http.post('/library/' + libraryModel).then(function (res) {
            return res.data;
        });
	};

	data.getSections = function(libraryId) {
        return $http.get('/sections/' + libraryId).then(function (res) {
            return res.data;
        });
	};

	data.postSection = function(sectionData) {
        return $http.post('/section', sectionData).then(function (res) {
        	return res.data;
        });
	};

	data.deleteSection = function(id) {
		return $http({
			method: 'DELETE',
			url: '/sections/' + id
		});
	};

	data.loadGeometry = function(link) {
        var deffered = $q.defer();
		var jsonLoader = new THREE.JSONLoader();

        //TODO: found no way to reject
		jsonLoader.load(link, function (geometry) {
			geometry.computeBoundingBox();
			deffered.resolve(geometry);
		});

        return deffered.promise;
	};

	data.getData = function(url) {
        return $http.get(url).then(function (res) {
            return res.data;
        });
	};

	data.postFeedback = function(dto) {
        return $http.post('/feedback', dto);
	};

	return data;
});
angular.module('VirtualBookshelf')
.factory('dialog', function (ngDialog) {
	var dialog = {};

	var ERROR = 1;
	var CONFIRM = 2;
	var WARNING = 3;
	var INFO = 4;

	var iconClassMap = {};
	iconClassMap[ERROR] = 'fa-times-circle';
	iconClassMap[CONFIRM] = 'fa-question-circle';
	iconClassMap[WARNING] = 'fa-exclamation-triangle';
	iconClassMap[INFO] = 'fa-info-circle';

	dialog.openError = function(msg) {
		return openDialog(msg, ERROR);
	};

	dialog.openConfirm = function(msg) {
		return openDialog(msg, CONFIRM, true);
	};

	dialog.openWarning = function(msg) {
		return openDialog(msg, WARNING);
	};

	dialog.openInfo = function(msg) {
		return openDialog(msg, INFO);
	};

	var openDialog = function(msg, type, cancelButton) {
		return ngDialog.openConfirm({
			template: '/ui/confirmDialog',
			data: {
				msg: msg,
				iconClass: getIconClass(type),
				cancelButton: cancelButton
			}
		});
	};

	var getIconClass = function(type) {
		return iconClassMap[type];
	};

	return dialog;
});
angular.module('VirtualBookshelf')
.factory('environment', function ($q, $log, $window, LibraryObject, SectionObject, BookObject, BookMaterial, data, camera, cache) {
	var environment = {};

	environment.CLEARANCE = 0.001;
	environment.LIBRARY_CANVAS_ID = 'LIBRARY';
	 
	var libraryDto = null;
	var sections = null;
	var books = null;
	var loaded = false;

	environment.scene = null;
	environment.library = null;

	environment.loadLibrary = function(libraryId) {
		clearScene(); // inits some fields

		var promise = data.getLibrary(libraryId).then(function (dto) {
			var dict = parseLibraryDto(dto);
			
			sections = dict.sections;
			books = dict.books;
			libraryDto = dto;

			return initCache(libraryDto, dict.sections, dict.books);
		}).then(function () {
			createLibrary(libraryDto);
			return createSections(sections);
		}).then(function () {
			return createBooks(books);
		});

		return promise;
	};

	environment.goToLibrary = function(id) {
		if(id) {
			$window.location = '/' + id;
		}
	};

	environment.setLoaded = function(value) {
		loaded = value;
	};

	environment.getLoaded = function() {
		return loaded;
	};

	environment.getBook = function(bookId) {
		return getDictObject(books, bookId);
	};

	environment.getSection = function(sectionId) {
		return getDictObject(sections, sectionId);
	};

	environment.getShelf = function(sectionId, shelfId) {
		var section = environment.getSection(sectionId);
		var shelf = section && section.shelves[shelfId];

		return shelf;
	};

	var getDictObject = function(dict, objectId) {
		var dictItem = dict[objectId];
		var dictObject = dictItem && dictItem.obj;

		return dictObject;
	};

	environment.updateSection = function(dto) {
		if(dto.libraryId == environment.library.id) {
			environment.removeSection(dto.id);
			createSection(dto);
		} else {
			environment.removeSection(dto.id);
		}	
	};

	environment.updateBook = function(dto) {
		var shelf = getBookShelf(dto);

		if(shelf) {
			environment.removeBook(dto.id);
			createBook(dto);
		} else {
			environment.removeBook(dto.id);
		}
	};

	environment.removeBook = function(id) {
		removeObject(books, id);
	};

	environment.removeSection = function(id) {
		removeObject(sections, id);
	};

	var removeObject = function(dict, key) {
		var dictItem = dict[key];
		if(dictItem) {
			delete dict[key];
			
			if(dictItem.obj) {
				dictItem.obj.setParent(null);
			}
		}
	};

	var initCache = function(libraryDto, sectionsDict, booksDict) {
		var libraryModel = libraryDto.model;
		var sectionModels = {};
		var bookModels = {};
		var imageUrls = {};

		for (var sectionId in sectionsDict) {
			var sectionDto = sectionsDict[sectionId].dto;
			sectionModels[sectionDto.model] = true;
		}

		for (var bookId in booksDict) {
			var bookDto = booksDict[bookId].dto;
			bookModels[bookDto.model] = true;

			if(bookDto.cover) {
				imageUrls[bookDto.cover.id] = bookDto.cover;
			}
		}

		return cache.init(libraryModel, sectionModels, bookModels, imageUrls);
	};

	var clearScene = function() {
		environment.library = null;
		sections = {};
		books = {};

		while(environment.scene.children.length > 0) {
			if(environment.scene.children[0].dispose) {
				environment.scene.children[0].dispose();
			}
			environment.scene.remove(environment.scene.children[0]);
		}
	};

	var parseLibraryDto = function(libraryDto) {
		var result = {
			sections: {},
			books: {}
		};

		for(var sectionIndex = libraryDto.sections.length - 1; sectionIndex >= 0; sectionIndex--) {
			var sectionDto = libraryDto.sections[sectionIndex];
			result.sections[sectionDto.id] = {dto: sectionDto};

			for(var bookIndex = sectionDto.books.length - 1; bookIndex >= 0; bookIndex--) {
				var bookDto = sectionDto.books[bookIndex];
				result.books[bookDto.id] = {dto: bookDto};
			}

			delete sectionDto.books;
		}

		delete libraryDto.sections;

		return result;
	};

	var createLibrary = function(libraryDto) {
		var library = null;
		var libraryCache = cache.getLibrary();
        var texture = new THREE.Texture(libraryCache.mapImage);
        var material = new THREE.MeshPhongMaterial({map: texture});

        texture.needsUpdate = true;
		library = new LibraryObject(libraryDto, libraryCache.geometry, material);
		camera.setParent(library);

		environment.scene.add(library);
		environment.library = library;
	};

	var createSections = function(sectionsDict) {
		return createObjects(sectionsDict, createSection);
	};

	var createBooks = function(booksDict) {
		return createObjects(booksDict, createBook);
	};

	var createObjects = function(dict, factory) {
		var results = [];
		var key;

		for(key in dict) {
			results.push(factory(dict[key].dto));
		}

		return $q.all(results);
	};

	var createSection = function(sectionDto) {
		var promise = cache.getSection(sectionDto.model).then(function (sectionCache) {
	        var texture = new THREE.Texture(sectionCache.mapImage);
	        var material = new THREE.MeshPhongMaterial({map: texture});
	        var section;

	        texture.needsUpdate = true;
	        sectionDto.data = sectionCache.data;

	        section = new SectionObject(sectionDto, sectionCache.geometry, material);

			environment.library.add(section);
			addToDict(sections, section);
		});

		return promise;
	};

	var createBook = function(bookDto) {
		var promises = {};
		var promise;

		promises.bookCache = cache.getBook(bookDto.model);
		if(bookDto.coverId) {
			promises.coverCache = cache.getImage(bookDto.coverId);
		}

		promise = $q.all(promises).then(function (results) {
			var bookCache = results.bookCache;
			var coverMapImage = results.coverCache && results.coverCache.image;
			var material = new BookMaterial(bookCache.mapImage, bookCache.bumpMapImage, bookCache.specularMapImage, coverMapImage);
			var book = new BookObject(bookDto, bookCache.geometry, material);

			addToDict(books, book);
			placeBookOnShelf(book);
		});

		return promise;
	};

	var addToDict = function(dict, obj) {
		var dictItem = {
			dto: obj.dataObject,
			obj: obj
		};

		dict[obj.id] = dictItem;
	};

	var getBookShelf = function(bookDto) {
		return environment.getShelf(bookDto.sectionId, bookDto.shelfId);
	};

	var placeBookOnShelf = function(book) {
		var shelf = getBookShelf(book.dataObject);
		shelf.add(book);
	};

	return environment;
});
angular.module('VirtualBookshelf')
.factory('main', function ($log, $q, camera, controls, user, environment, tools, navigation, authorization, block, locator) {	
	var canvas;
	var renderer;
	
	var main = {};

	main.start = function() {
		var winResize;

		if(!Detector.webgl) {
			Detector.addGetWebGLMessage();
		}

		init();
		controls.init();

		winResize = new THREEx.WindowResize(renderer, camera.camera);

		startRenderLoop();

		block.global.start();
		user.load().then(function () {
			return $q.all([environment.loadLibrary(user.getLibrary() || 1), authorization.loadUserData()]);
		}).catch(function (error) {
			$log.error(error);
			//TODO: show error message  
		}).finally(function () {
			locator.centerObject(camera.object);
			environment.setLoaded(true);
			block.global.stop();
		});		
	};

	var init = function() {
		var width = window.innerWidth;
		var height = window.innerHeight;

		canvas = document.getElementById(environment.LIBRARY_CANVAS_ID);
		renderer = new THREE.WebGLRenderer({canvas: canvas, antialias: true});
		renderer.setSize(width, height);

		environment.scene = new THREE.Scene();
		environment.scene.fog = new THREE.Fog(0x000000, 4, 7);
	};

	var startRenderLoop = function() {
		requestAnimationFrame(startRenderLoop);

		controls.update();
		navigation.update();
		tools.update();
		
		renderer.render(environment.scene, camera.camera);
	};

	return main;
});
angular.module('VirtualBookshelf')
.factory('mouse', function (camera, environment) {
	var mouse = {};

	var getWidth = function() {
		return window.innerWidth;
	};

	var getHeight = function() {
		return window.innerHeight;
	};

	var x = null;
	var y = null;
	
	mouse.target = null;
	mouse.dX = null;
	mouse.dY = null;
	mouse.longX = null;
	mouse.longY = null;

	mouse.getTarget = function() {
		return this.target;
	};

	mouse.down = function(event) {
		if(event) {
			this[event.which] = true;
			this.target = event.target;
			x = event.clientX;
			y = event.clientY;
			mouse.longX = getWidth() * 0.5 - x;
			mouse.longY = getHeight() * 0.5 - y;
		}
	};

	mouse.up = function(event) {
		if(event) {
			this[event.which] = false;
			// linux chrome bug fix (when both keys release then both event.which equal 3)
			this[1] = false; 
		}
	};

	mouse.move = function(event) {
		if(event) {
			this.target = event.target;
			mouse.longX = getWidth() * 0.5 - x;
			mouse.longY = getHeight() * 0.5 - y;
			mouse.dX = event.clientX - x;
			mouse.dY = event.clientY - y;
			x = event.clientX;
			y = event.clientY;
		}
	};

	mouse.isCanvas = function() {
		return this.target.id === environment.LIBRARY_CANVAS_ID;
	};

	mouse.isPocketBook = function() {
		return false; //TODO: stub
		// return !!(this.target && this.target.parentNode == UI.menu.inventory.books);
	};

	mouse.getIntersected = function(objects, recursive, searchFor) {
		var
			vector,
			raycaster,
			intersects,
			intersected,
			result,
			i, j;

		result = null;
		vector = getVector();
		raycaster = new THREE.Raycaster(camera.getPosition(), vector);
		intersects = raycaster.intersectObjects(objects, recursive);

		if(searchFor) {
			if(intersects.length) {
				for(i = 0; i < intersects.length; i++) {
					intersected = intersects[i];
					
					for(j = searchFor.length - 1; j >= 0; j--) {
						if(intersected.object instanceof searchFor[j]) {
							result = intersected;
							break;
						}
					}

					if(result) {
						break;
					}
				}
			}		
		} else {
			result = intersects;
		}

		return result;
	};

	var getVector = function() {
		var projector = new THREE.Projector();
		var vector = new THREE.Vector3((x / getWidth()) * 2 - 1, - (y / getHeight()) * 2 + 1, 0.5);
		projector.unprojectVector(vector, camera.camera);
	
		return vector.sub(camera.getPosition()).normalize();
	};

	return mouse;
});
angular.module('VirtualBookshelf')
.factory('navigation', function (camera) {
	var navigation = {};

	navigation.BUTTONS_ROTATE_SPEED = 100;
	navigation.BUTTONS_GO_SPEED = 0.02;

	var state = {
		forward: false,
		backward: false,
		left: false,
		right: false			
	};

	navigation.goStop = function() {
		state.forward = false;
		state.backward = false;
		state.left = false;
		state.right = false;
	};

	navigation.goForward = function() {
		state.forward = true;
	};

	navigation.goBackward = function() {
		state.backward = true;
	};

	navigation.goLeft = function() {
		state.left = true;
	};

	navigation.goRight = function() {
		state.right = true;
	};

	navigation.update = function() {
		if(state.forward) {
			camera.go(navigation.BUTTONS_GO_SPEED);
		} else if(state.backward) {
			camera.go(-navigation.BUTTONS_GO_SPEED);
		} else if(state.left) {
			camera.rotate(navigation.BUTTONS_ROTATE_SPEED, 0);
		} else if(state.right) {
			camera.rotate(-navigation.BUTTONS_ROTATE_SPEED, 0);
		}
	};

	return navigation;
});
angular.module('VirtualBookshelf')
.factory('user', function ($log, data) {
	var user = {};

	var loaded = false;
	var _dataObject = null;
	var _library = null;

	user.load = function() {
		var scope = this;

		return data.getUser().then(function (res) {
			scope.setDataObject(res.data);
			scope.setLibrary();
			loaded = true;

			$log.log('user loaded');
		});
	};

	user.logout = function() {
		return data.logout().then(function () {
			return user.load();
		});
	};

	user.setDataObject = function(dataObject) {
		_dataObject = dataObject;
	};

	user.getLibrary = function() {
		return _library;
	};

	user.setLibrary = function(libraryId) {
		_library = libraryId || window.location.pathname.substring(1);
	};

	user.getId = function() {
		return _dataObject && _dataObject.id;
	};

	user.isAuthorized = function() {
		return Boolean(_dataObject);
	};

	user.isLoaded = function() {
		return loaded;
	};

	return user;
});

/**
 * @author alteredq / http://alteredqualia.com/
 * @author mr.doob / http://mrdoob.com/
 */

var Detector = {

	canvas: !! window.CanvasRenderingContext2D,
	webgl: ( function () { try { var canvas = document.createElement( 'canvas' ); return !! window.WebGLRenderingContext && ( canvas.getContext( 'webgl' ) || canvas.getContext( 'experimental-webgl' ) ); } catch( e ) { return false; } } )(),
	workers: !! window.Worker,
	fileapi: window.File && window.FileReader && window.FileList && window.Blob,

	getWebGLErrorMessage: function () {

		var element = document.createElement( 'div' );
		element.id = 'webgl-error-message';
		element.style.fontFamily = 'monospace';
		element.style.fontSize = '13px';
		element.style.fontWeight = 'normal';
		element.style.textAlign = 'center';
		element.style.background = '#fff';
		element.style.color = '#000';
		element.style.padding = '1.5em';
		element.style.width = '400px';
		element.style.margin = '5em auto 0';

		if ( ! this.webgl ) {

			element.innerHTML = window.WebGLRenderingContext ? [
				'Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />',
				'Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'
			].join( '\n' ) : [
				'Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>',
				'Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'
			].join( '\n' );

		}

		return element;

	},

	addGetWebGLMessage: function ( parameters ) {

		var parent, id, element;

		parameters = parameters || {};

		parent = parameters.parent !== undefined ? parameters.parent : document.body;
		id = parameters.id !== undefined ? parameters.id : 'oldie';

		element = Detector.getWebGLErrorMessage();
		element.id = id;

		parent.appendChild( element );

	}

};
// three.js - http://github.com/mrdoob/three.js
'use strict';var THREE={REVISION:"64"};self.console=self.console||{info:function(){},log:function(){},debug:function(){},warn:function(){},error:function(){}};String.prototype.trim=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")};THREE.extend=function(a,b){if(Object.keys)for(var c=Object.keys(b),d=0,e=c.length;d<e;d++){var f=c[d];Object.defineProperty(a,f,Object.getOwnPropertyDescriptor(b,f))}else for(f in c={}.hasOwnProperty,b)c.call(b,f)&&(a[f]=b[f]);return a};
(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!self.requestAnimationFrame;++c)self.requestAnimationFrame=self[b[c]+"RequestAnimationFrame"],self.cancelAnimationFrame=self[b[c]+"CancelAnimationFrame"]||self[b[c]+"CancelRequestAnimationFrame"];void 0===self.requestAnimationFrame&&void 0!==self.setTimeout&&(self.requestAnimationFrame=function(b){var c=Date.now(),f=Math.max(0,16-(c-a)),h=self.setTimeout(function(){b(c+f)},f);a=c+f;return h});void 0===self.cancelAnimationFrame&&void 0!==
self.clearTimeout&&(self.cancelAnimationFrame=function(a){self.clearTimeout(a)})})();THREE.CullFaceNone=0;THREE.CullFaceBack=1;THREE.CullFaceFront=2;THREE.CullFaceFrontBack=3;THREE.FrontFaceDirectionCW=0;THREE.FrontFaceDirectionCCW=1;THREE.BasicShadowMap=0;THREE.PCFShadowMap=1;THREE.PCFSoftShadowMap=2;THREE.FrontSide=0;THREE.BackSide=1;THREE.DoubleSide=2;THREE.NoShading=0;THREE.FlatShading=1;THREE.SmoothShading=2;THREE.NoColors=0;THREE.FaceColors=1;THREE.VertexColors=2;THREE.NoBlending=0;
THREE.NormalBlending=1;THREE.AdditiveBlending=2;THREE.SubtractiveBlending=3;THREE.MultiplyBlending=4;THREE.CustomBlending=5;THREE.AddEquation=100;THREE.SubtractEquation=101;THREE.ReverseSubtractEquation=102;THREE.ZeroFactor=200;THREE.OneFactor=201;THREE.SrcColorFactor=202;THREE.OneMinusSrcColorFactor=203;THREE.SrcAlphaFactor=204;THREE.OneMinusSrcAlphaFactor=205;THREE.DstAlphaFactor=206;THREE.OneMinusDstAlphaFactor=207;THREE.DstColorFactor=208;THREE.OneMinusDstColorFactor=209;
THREE.SrcAlphaSaturateFactor=210;THREE.MultiplyOperation=0;THREE.MixOperation=1;THREE.AddOperation=2;THREE.UVMapping=function(){};THREE.CubeReflectionMapping=function(){};THREE.CubeRefractionMapping=function(){};THREE.SphericalReflectionMapping=function(){};THREE.SphericalRefractionMapping=function(){};THREE.RepeatWrapping=1E3;THREE.ClampToEdgeWrapping=1001;THREE.MirroredRepeatWrapping=1002;THREE.NearestFilter=1003;THREE.NearestMipMapNearestFilter=1004;THREE.NearestMipMapLinearFilter=1005;
THREE.LinearFilter=1006;THREE.LinearMipMapNearestFilter=1007;THREE.LinearMipMapLinearFilter=1008;THREE.UnsignedByteType=1009;THREE.ByteType=1010;THREE.ShortType=1011;THREE.UnsignedShortType=1012;THREE.IntType=1013;THREE.UnsignedIntType=1014;THREE.FloatType=1015;THREE.UnsignedShort4444Type=1016;THREE.UnsignedShort5551Type=1017;THREE.UnsignedShort565Type=1018;THREE.AlphaFormat=1019;THREE.RGBFormat=1020;THREE.RGBAFormat=1021;THREE.LuminanceFormat=1022;THREE.LuminanceAlphaFormat=1023;
THREE.RGB_S3TC_DXT1_Format=2001;THREE.RGBA_S3TC_DXT1_Format=2002;THREE.RGBA_S3TC_DXT3_Format=2003;THREE.RGBA_S3TC_DXT5_Format=2004;THREE.Color=function(a){void 0!==a&&this.set(a);return this};
THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,set:function(a){a instanceof THREE.Color?this.copy(a):"number"===typeof a?this.setHex(a):"string"===typeof a&&this.setStyle(a);return this},setHex:function(a){a=Math.floor(a);this.r=(a>>16&255)/255;this.g=(a>>8&255)/255;this.b=(a&255)/255;return this},setRGB:function(a,b,c){this.r=a;this.g=b;this.b=c;return this},setHSL:function(a,b,c){if(0===b)this.r=this.g=this.b=c;else{var d=function(a,b,c){0>c&&(c+=1);1<c&&(c-=1);return c<1/6?a+6*(b-a)*
c:0.5>c?b:c<2/3?a+6*(b-a)*(2/3-c):a},b=0.5>=c?c*(1+b):c+b-c*b,c=2*c-b;this.r=d(c,b,a+1/3);this.g=d(c,b,a);this.b=d(c,b,a-1/3)}return this},setStyle:function(a){if(/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(a))return a=/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(a),this.r=Math.min(255,parseInt(a[1],10))/255,this.g=Math.min(255,parseInt(a[2],10))/255,this.b=Math.min(255,parseInt(a[3],10))/255,this;if(/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(a))return a=/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(a),this.r=
Math.min(100,parseInt(a[1],10))/100,this.g=Math.min(100,parseInt(a[2],10))/100,this.b=Math.min(100,parseInt(a[3],10))/100,this;if(/^\#([0-9a-f]{6})$/i.test(a))return a=/^\#([0-9a-f]{6})$/i.exec(a),this.setHex(parseInt(a[1],16)),this;if(/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(a))return a=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(a),this.setHex(parseInt(a[1]+a[1]+a[2]+a[2]+a[3]+a[3],16)),this;if(/^(\w+)$/i.test(a))return this.setHex(THREE.ColorKeywords[a]),this},copy:function(a){this.r=a.r;this.g=
a.g;this.b=a.b;return this},copyGammaToLinear:function(a){this.r=a.r*a.r;this.g=a.g*a.g;this.b=a.b*a.b;return this},copyLinearToGamma:function(a){this.r=Math.sqrt(a.r);this.g=Math.sqrt(a.g);this.b=Math.sqrt(a.b);return this},convertGammaToLinear:function(){var a=this.r,b=this.g,c=this.b;this.r=a*a;this.g=b*b;this.b=c*c;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this},getHex:function(){return 255*this.r<<16^255*this.g<<
8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(a){var a=a||{h:0,s:0,l:0},b=this.r,c=this.g,d=this.b,e=Math.max(b,c,d),f=Math.min(b,c,d),h,g=(f+e)/2;if(f===e)f=h=0;else{var i=e-f,f=0.5>=g?i/(e+f):i/(2-e-f);switch(e){case b:h=(c-d)/i+(c<d?6:0);break;case c:h=(d-b)/i+2;break;case d:h=(b-c)/i+4}h/=6}a.h=h;a.s=f;a.l=g;return a},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(a,
b,c){var d=this.getHSL();d.h+=a;d.s+=b;d.l+=c;this.setHSL(d.h,d.s,d.l);return this},add:function(a){this.r+=a.r;this.g+=a.g;this.b+=a.b;return this},addColors:function(a,b){this.r=a.r+b.r;this.g=a.g+b.g;this.b=a.b+b.b;return this},addScalar:function(a){this.r+=a;this.g+=a;this.b+=a;return this},multiply:function(a){this.r*=a.r;this.g*=a.g;this.b*=a.b;return this},multiplyScalar:function(a){this.r*=a;this.g*=a;this.b*=a;return this},lerp:function(a,b){this.r+=(a.r-this.r)*b;this.g+=(a.g-this.g)*b;
this.b+=(a.b-this.b)*b;return this},equals:function(a){return a.r===this.r&&a.g===this.g&&a.b===this.b},fromArray:function(a){this.r=a[0];this.g=a[1];this.b=a[2];return this},toArray:function(){return[this.r,this.g,this.b]},clone:function(){return(new THREE.Color).setRGB(this.r,this.g,this.b)}};
THREE.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,
darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,
grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,
lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,
palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,
tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};THREE.Quaternion=function(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._w=void 0!==d?d:1};
THREE.Quaternion.prototype={constructor:THREE.Quaternion,_x:0,_y:0,_z:0,_w:0,_euler:void 0,_updateEuler:function(){void 0!==this._euler&&this._euler.setFromQuaternion(this,void 0,!1)},get x(){return this._x},set x(a){this._x=a;this._updateEuler()},get y(){return this._y},set y(a){this._y=a;this._updateEuler()},get z(){return this._z},set z(a){this._z=a;this._updateEuler()},get w(){return this._w},set w(a){this._w=a;this._updateEuler()},set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._w=d;
this._updateEuler();return this},copy:function(a){this._x=a._x;this._y=a._y;this._z=a._z;this._w=a._w;this._updateEuler();return this},setFromEuler:function(a,b){if(!1===a instanceof THREE.Euler)throw Error("ERROR: Quaternion's .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code.");var c=Math.cos(a._x/2),d=Math.cos(a._y/2),e=Math.cos(a._z/2),f=Math.sin(a._x/2),h=Math.sin(a._y/2),g=Math.sin(a._z/2);"XYZ"===a.order?(this._x=f*d*e+c*h*g,this._y=c*h*
e-f*d*g,this._z=c*d*g+f*h*e,this._w=c*d*e-f*h*g):"YXZ"===a.order?(this._x=f*d*e+c*h*g,this._y=c*h*e-f*d*g,this._z=c*d*g-f*h*e,this._w=c*d*e+f*h*g):"ZXY"===a.order?(this._x=f*d*e-c*h*g,this._y=c*h*e+f*d*g,this._z=c*d*g+f*h*e,this._w=c*d*e-f*h*g):"ZYX"===a.order?(this._x=f*d*e-c*h*g,this._y=c*h*e+f*d*g,this._z=c*d*g-f*h*e,this._w=c*d*e+f*h*g):"YZX"===a.order?(this._x=f*d*e+c*h*g,this._y=c*h*e+f*d*g,this._z=c*d*g-f*h*e,this._w=c*d*e-f*h*g):"XZY"===a.order&&(this._x=f*d*e-c*h*g,this._y=c*h*e-f*d*g,this._z=
c*d*g+f*h*e,this._w=c*d*e+f*h*g);!1!==b&&this._updateEuler();return this},setFromAxisAngle:function(a,b){var c=b/2,d=Math.sin(c);this._x=a.x*d;this._y=a.y*d;this._z=a.z*d;this._w=Math.cos(c);this._updateEuler();return this},setFromRotationMatrix:function(a){var b=a.elements,c=b[0],a=b[4],d=b[8],e=b[1],f=b[5],h=b[9],g=b[2],i=b[6],b=b[10],k=c+f+b;0<k?(c=0.5/Math.sqrt(k+1),this._w=0.25/c,this._x=(i-h)*c,this._y=(d-g)*c,this._z=(e-a)*c):c>f&&c>b?(c=2*Math.sqrt(1+c-f-b),this._w=(i-h)/c,this._x=0.25*c,
this._y=(a+e)/c,this._z=(d+g)/c):f>b?(c=2*Math.sqrt(1+f-c-b),this._w=(d-g)/c,this._x=(a+e)/c,this._y=0.25*c,this._z=(h+i)/c):(c=2*Math.sqrt(1+b-c-f),this._w=(e-a)/c,this._x=(d+g)/c,this._y=(h+i)/c,this._z=0.25*c);this._updateEuler();return this},inverse:function(){this.conjugate().normalize();return this},conjugate:function(){this._x*=-1;this._y*=-1;this._z*=-1;this._updateEuler();return this},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*
this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a);return this},multiply:function(a,b){return void 0!==b?(console.warn("DEPRECATED: Quaternion's .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,b)):this.multiplyQuaternions(this,a)},multiplyQuaternions:function(a,b){var c=a._x,d=a._y,e=a._z,f=
a._w,h=b._x,g=b._y,i=b._z,k=b._w;this._x=c*k+f*h+d*i-e*g;this._y=d*k+f*g+e*h-c*i;this._z=e*k+f*i+c*g-d*h;this._w=f*k-c*h-d*g-e*i;this._updateEuler();return this},multiplyVector3:function(a){console.warn("DEPRECATED: Quaternion's .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return a.applyQuaternion(this)},slerp:function(a,b){var c=this._x,d=this._y,e=this._z,f=this._w,h=f*a._w+c*a._x+d*a._y+e*a._z;0>h?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=
-a._z,h=-h):this.copy(a);if(1<=h)return this._w=f,this._x=c,this._y=d,this._z=e,this;var g=Math.acos(h),i=Math.sqrt(1-h*h);if(0.001>Math.abs(i))return this._w=0.5*(f+this._w),this._x=0.5*(c+this._x),this._y=0.5*(d+this._y),this._z=0.5*(e+this._z),this;h=Math.sin((1-b)*g)/i;g=Math.sin(b*g)/i;this._w=f*h+this._w*g;this._x=c*h+this._x*g;this._y=d*h+this._y*g;this._z=e*h+this._z*g;this._updateEuler();return this},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},
fromArray:function(a){this._x=a[0];this._y=a[1];this._z=a[2];this._w=a[3];this._updateEuler();return this},toArray:function(){return[this._x,this._y,this._z,this._w]},clone:function(){return new THREE.Quaternion(this._x,this._y,this._z,this._w)}};THREE.Quaternion.slerp=function(a,b,c,d){return c.copy(a).slerp(b,d)};THREE.Vector2=function(a,b){this.x=a||0;this.y=b||0};
THREE.Vector2.prototype={constructor:THREE.Vector2,set:function(a,b){this.x=a;this.y=b;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+a);}},copy:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,
b){if(void 0!==b)return console.warn("DEPRECATED: Vector2's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},addScalar:function(a){this.x+=a;this.y+=a;return this},sub:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector2's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=
a.y;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a):this.y=this.x=0;return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);
return this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,a=this.y-a.y;return b*b+a*a},setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/
b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},equals:function(a){return a.x===this.x&&a.y===this.y},fromArray:function(a){this.x=a[0];this.y=a[1];return this},toArray:function(){return[this.x,this.y]},clone:function(){return new THREE.Vector2(this.x,this.y)}};THREE.Vector3=function(a,b,c){this.x=a||0;this.y=b||0;this.z=c||0};
THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(a,b,c){this.x=a;this.y=b;this.z=c;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+
a);}},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector3's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},sub:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector3's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},multiply:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector3's .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,b);this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;return this},multiplyVectors:function(a,b){this.x=a.x*
b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this},applyMatrix3:function(a){var b=this.x,c=this.y,d=this.z,a=a.elements;this.x=a[0]*b+a[3]*c+a[6]*d;this.y=a[1]*b+a[4]*c+a[7]*d;this.z=a[2]*b+a[5]*c+a[8]*d;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z,a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12];this.y=a[1]*b+a[5]*c+a[9]*d+a[13];this.z=a[2]*b+a[6]*c+a[10]*d+a[14];return this},applyProjection:function(a){var b=this.x,c=this.y,d=this.z,a=a.elements,e=1/(a[3]*b+a[7]*c+a[11]*d+a[15]);
this.x=(a[0]*b+a[4]*c+a[8]*d+a[12])*e;this.y=(a[1]*b+a[5]*c+a[9]*d+a[13])*e;this.z=(a[2]*b+a[6]*c+a[10]*d+a[14])*e;return this},applyQuaternion:function(a){var b=this.x,c=this.y,d=this.z,e=a.x,f=a.y,h=a.z,a=a.w,g=a*b+f*d-h*c,i=a*c+h*b-e*d,k=a*d+e*c-f*b,b=-e*b-f*c-h*d;this.x=g*a+b*-e+i*-h-k*-f;this.y=i*a+b*-f+k*-e-g*-h;this.z=k*a+b*-h+g*-f-i*-e;return this},transformDirection:function(a){var b=this.x,c=this.y,d=this.z,a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d;this.y=a[1]*b+a[5]*c+a[9]*d;this.z=a[2]*
b+a[6]*c+a[10]*d;this.normalize();return this},divide:function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a,this.z*=a):this.z=this.y=this.x=0;return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);this.z>a.z&&(this.z=a.z);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);this.z<a.z&&(this.z=a.z);return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<
a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);this.z<a.z?this.z=a.z:this.z>b.z&&(this.z=b.z);return this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},
setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},cross:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector3's .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,b);var c=this.x,d=this.y,e=this.z;this.x=d*a.z-e*a.y;this.y=e*a.x-c*a.z;this.z=c*a.y-d*a.x;return this},crossVectors:function(a,b){var c=
a.x,d=a.y,e=a.z,f=b.x,h=b.y,g=b.z;this.x=d*g-e*h;this.y=e*f-c*g;this.z=c*h-d*f;return this},angleTo:function(a){a=this.dot(a)/(this.length()*a.length());return Math.acos(THREE.Math.clamp(a,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,c=this.y-a.y,a=this.z-a.z;return b*b+c*c+a*a},setEulerFromRotationMatrix:function(){console.error("REMOVED: Vector3's setEulerFromRotationMatrix has been removed in favor of Euler.setFromRotationMatrix(), please update your code.")},
setEulerFromQuaternion:function(){console.error("REMOVED: Vector3's setEulerFromQuaternion: has been removed in favor of Euler.setFromQuaternion(), please update your code.")},getPositionFromMatrix:function(a){console.warn("DEPRECATED: Vector3's .getPositionFromMatrix() has been renamed to .setFromMatrixPosition(). Please update your code.");return this.setFromMatrixPosition(a)},getScaleFromMatrix:function(a){console.warn("DEPRECATED: Vector3's .getScaleFromMatrix() has been renamed to .setFromMatrixScale(). Please update your code.");
return this.setFromMatrixScale(a)},getColumnFromMatrix:function(a,b){console.warn("DEPRECATED: Vector3's .getColumnFromMatrix() has been renamed to .setFromMatrixColumn(). Please update your code.");return this.setFromMatrixColumn(a,b)},setFromMatrixPosition:function(a){this.x=a.elements[12];this.y=a.elements[13];this.z=a.elements[14];return this},setFromMatrixScale:function(a){var b=this.set(a.elements[0],a.elements[1],a.elements[2]).length(),c=this.set(a.elements[4],a.elements[5],a.elements[6]).length(),
a=this.set(a.elements[8],a.elements[9],a.elements[10]).length();this.x=b;this.y=c;this.z=a;return this},setFromMatrixColumn:function(a,b){var c=4*a,d=b.elements;this.x=d[c];this.y=d[c+1];this.z=d[c+2];return this},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a){this.x=a[0];this.y=a[1];this.z=a[2];return this},toArray:function(){return[this.x,this.y,this.z]},clone:function(){return new THREE.Vector3(this.x,this.y,this.z)}};
THREE.extend(THREE.Vector3.prototype,{applyEuler:function(){var a=new THREE.Quaternion;return function(b){!1===b instanceof THREE.Euler&&console.error("ERROR: Vector3's .applyEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code.");this.applyQuaternion(a.setFromEuler(b));return this}}(),applyAxisAngle:function(){var a=new THREE.Quaternion;return function(b,c){this.applyQuaternion(a.setFromAxisAngle(b,c));return this}}(),projectOnVector:function(){var a=new THREE.Vector3;
return function(b){a.copy(b).normalize();b=this.dot(a);return this.copy(a).multiplyScalar(b)}}(),projectOnPlane:function(){var a=new THREE.Vector3;return function(b){a.copy(this).projectOnVector(b);return this.sub(a)}}(),reflect:function(){var a=new THREE.Vector3;return function(b){a.copy(this).projectOnVector(b).multiplyScalar(2);return this.subVectors(a,this)}}()});THREE.Vector4=function(a,b,c,d){this.x=a||0;this.y=b||0;this.z=c||0;this.w=void 0!==d?d:1};
THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.w=d;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setW:function(a){this.w=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;
case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+a);}},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?a.w:1;return this},add:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector4's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;this.w+=a;return this},
addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this},sub:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector4's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;this.w*=a;return this},
applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z,e=this.w,a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12]*e;this.y=a[1]*b+a[5]*c+a[9]*d+a[13]*e;this.z=a[2]*b+a[6]*c+a[10]*d+a[14]*e;this.w=a[3]*b+a[7]*c+a[11]*d+a[15]*e;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a,this.z*=a,this.w*=a):(this.z=this.y=this.x=0,this.w=1);return this},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var b=Math.sqrt(1-a.w*a.w);1E-4>b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,
this.y=a.y/b,this.z=a.z/b);return this},setAxisAngleFromRotationMatrix:function(a){var b,c,d,a=a.elements,e=a[0];d=a[4];var f=a[8],h=a[1],g=a[5],i=a[9];c=a[2];b=a[6];var k=a[10];if(0.01>Math.abs(d-h)&&0.01>Math.abs(f-c)&&0.01>Math.abs(i-b)){if(0.1>Math.abs(d+h)&&0.1>Math.abs(f+c)&&0.1>Math.abs(i+b)&&0.1>Math.abs(e+g+k-3))return this.set(1,0,0,0),this;a=Math.PI;e=(e+1)/2;g=(g+1)/2;k=(k+1)/2;d=(d+h)/4;f=(f+c)/4;i=(i+b)/4;e>g&&e>k?0.01>e?(b=0,d=c=0.707106781):(b=Math.sqrt(e),c=d/b,d=f/b):g>k?0.01>g?
(b=0.707106781,c=0,d=0.707106781):(c=Math.sqrt(g),b=d/c,d=i/c):0.01>k?(c=b=0.707106781,d=0):(d=Math.sqrt(k),b=f/d,c=i/d);this.set(b,c,d,a);return this}a=Math.sqrt((b-i)*(b-i)+(f-c)*(f-c)+(h-d)*(h-d));0.001>Math.abs(a)&&(a=1);this.x=(b-i)/a;this.y=(f-c)/a;this.z=(h-d)/a;this.w=Math.acos((e+g+k-1)/2);return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);this.z>a.z&&(this.z=a.z);this.w>a.w&&(this.w=a.w);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=
a.y);this.z<a.z&&(this.z=a.z);this.w<a.w&&(this.w=a.w);return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);this.z<a.z?this.z=a.z:this.z>b.z&&(this.z=b.z);this.w<a.w?this.w=a.w:this.w>b.w&&(this.w=b.w);return this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*
this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&
a.w===this.w},fromArray:function(a){this.x=a[0];this.y=a[1];this.z=a[2];this.w=a[3];return this},toArray:function(){return[this.x,this.y,this.z,this.w]},clone:function(){return new THREE.Vector4(this.x,this.y,this.z,this.w)}};THREE.Euler=function(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._order=d||THREE.Euler.DefaultOrder};THREE.Euler.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");THREE.Euler.DefaultOrder="XYZ";
THREE.Euler.prototype={constructor:THREE.Euler,_x:0,_y:0,_z:0,_order:THREE.Euler.DefaultOrder,_quaternion:void 0,_updateQuaternion:function(){void 0!==this._quaternion&&this._quaternion.setFromEuler(this,!1)},get x(){return this._x},set x(a){this._x=a;this._updateQuaternion()},get y(){return this._y},set y(a){this._y=a;this._updateQuaternion()},get z(){return this._z},set z(a){this._z=a;this._updateQuaternion()},get order(){return this._order},set order(a){this._order=a;this._updateQuaternion()},
set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._order=d||this._order;this._updateQuaternion();return this},copy:function(a){this._x=a._x;this._y=a._y;this._z=a._z;this._order=a._order;this._updateQuaternion();return this},setFromRotationMatrix:function(a,b){function c(a){return Math.min(Math.max(a,-1),1)}var d=a.elements,e=d[0],f=d[4],h=d[8],g=d[1],i=d[5],k=d[9],m=d[2],l=d[6],d=d[10],b=b||this._order;"XYZ"===b?(this._y=Math.asin(c(h)),0.99999>Math.abs(h)?(this._x=Math.atan2(-k,d),this._z=
Math.atan2(-f,e)):(this._x=Math.atan2(l,i),this._z=0)):"YXZ"===b?(this._x=Math.asin(-c(k)),0.99999>Math.abs(k)?(this._y=Math.atan2(h,d),this._z=Math.atan2(g,i)):(this._y=Math.atan2(-m,e),this._z=0)):"ZXY"===b?(this._x=Math.asin(c(l)),0.99999>Math.abs(l)?(this._y=Math.atan2(-m,d),this._z=Math.atan2(-f,i)):(this._y=0,this._z=Math.atan2(g,e))):"ZYX"===b?(this._y=Math.asin(-c(m)),0.99999>Math.abs(m)?(this._x=Math.atan2(l,d),this._z=Math.atan2(g,e)):(this._x=0,this._z=Math.atan2(-f,i))):"YZX"===b?(this._z=
Math.asin(c(g)),0.99999>Math.abs(g)?(this._x=Math.atan2(-k,i),this._y=Math.atan2(-m,e)):(this._x=0,this._y=Math.atan2(h,d))):"XZY"===b?(this._z=Math.asin(-c(f)),0.99999>Math.abs(f)?(this._x=Math.atan2(l,i),this._y=Math.atan2(h,e)):(this._x=Math.atan2(-k,d),this._y=0)):console.warn("WARNING: Euler.setFromRotationMatrix() given unsupported order: "+b);this._order=b;this._updateQuaternion();return this},setFromQuaternion:function(a,b,c){function d(a){return Math.min(Math.max(a,-1),1)}var e=a.x*a.x,f=
a.y*a.y,h=a.z*a.z,g=a.w*a.w,b=b||this._order;"XYZ"===b?(this._x=Math.atan2(2*(a.x*a.w-a.y*a.z),g-e-f+h),this._y=Math.asin(d(2*(a.x*a.z+a.y*a.w))),this._z=Math.atan2(2*(a.z*a.w-a.x*a.y),g+e-f-h)):"YXZ"===b?(this._x=Math.asin(d(2*(a.x*a.w-a.y*a.z))),this._y=Math.atan2(2*(a.x*a.z+a.y*a.w),g-e-f+h),this._z=Math.atan2(2*(a.x*a.y+a.z*a.w),g-e+f-h)):"ZXY"===b?(this._x=Math.asin(d(2*(a.x*a.w+a.y*a.z))),this._y=Math.atan2(2*(a.y*a.w-a.z*a.x),g-e-f+h),this._z=Math.atan2(2*(a.z*a.w-a.x*a.y),g-e+f-h)):"ZYX"===
b?(this._x=Math.atan2(2*(a.x*a.w+a.z*a.y),g-e-f+h),this._y=Math.asin(d(2*(a.y*a.w-a.x*a.z))),this._z=Math.atan2(2*(a.x*a.y+a.z*a.w),g+e-f-h)):"YZX"===b?(this._x=Math.atan2(2*(a.x*a.w-a.z*a.y),g-e+f-h),this._y=Math.atan2(2*(a.y*a.w-a.x*a.z),g+e-f-h),this._z=Math.asin(d(2*(a.x*a.y+a.z*a.w)))):"XZY"===b?(this._x=Math.atan2(2*(a.x*a.w+a.y*a.z),g-e+f-h),this._y=Math.atan2(2*(a.x*a.z+a.y*a.w),g+e-f-h),this._z=Math.asin(d(2*(a.z*a.w-a.x*a.y)))):console.warn("WARNING: Euler.setFromQuaternion() given unsupported order: "+
b);this._order=b;!1!==c&&this._updateQuaternion();return this},reorder:function(){var a=new THREE.Quaternion;return function(b){a.setFromEuler(this);this.setFromQuaternion(a,b)}}(),fromArray:function(a){this._x=a[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]);this._updateQuaternion();return this},toArray:function(){return[this._x,this._y,this._z,this._order]},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},clone:function(){return new THREE.Euler(this._x,
this._y,this._z,this._order)}};THREE.Line3=function(a,b){this.start=void 0!==a?a:new THREE.Vector3;this.end=void 0!==b?b:new THREE.Vector3};
THREE.Line3.prototype={constructor:THREE.Line3,set:function(a,b){this.start.copy(a);this.end.copy(b);return this},copy:function(a){this.start.copy(a.start);this.end.copy(a.end);return this},center:function(a){return(a||new THREE.Vector3).addVectors(this.start,this.end).multiplyScalar(0.5)},delta:function(a){return(a||new THREE.Vector3).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(a,
b){var c=b||new THREE.Vector3;return this.delta(c).multiplyScalar(a).add(this.start)},closestPointToPointParameter:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,d){a.subVectors(c,this.start);b.subVectors(this.end,this.start);var e=b.dot(b),e=b.dot(a)/e;d&&(e=THREE.Math.clamp(e,0,1));return e}}(),closestPointToPoint:function(a,b,c){a=this.closestPointToPointParameter(a,b);c=c||new THREE.Vector3;return this.delta(c).multiplyScalar(a).add(this.start)},applyMatrix4:function(a){this.start.applyMatrix4(a);
this.end.applyMatrix4(a);return this},equals:function(a){return a.start.equals(this.start)&&a.end.equals(this.end)},clone:function(){return(new THREE.Line3).copy(this)}};THREE.Box2=function(a,b){this.min=void 0!==a?a:new THREE.Vector2(Infinity,Infinity);this.max=void 0!==b?b:new THREE.Vector2(-Infinity,-Infinity)};
THREE.Box2.prototype={constructor:THREE.Box2,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromPoints:function(a){if(0<a.length){var b=a[0];this.min.copy(b);this.max.copy(b);for(var c=1,d=a.length;c<d;c++)b=a[c],b.x<this.min.x?this.min.x=b.x:b.x>this.max.x&&(this.max.x=b.x),b.y<this.min.y?this.min.y=b.y:b.y>this.max.y&&(this.max.y=b.y)}else this.makeEmpty();return this},setFromCenterAndSize:function(){var a=new THREE.Vector2;return function(b,c){var d=a.copy(c).multiplyScalar(0.5);
this.min.copy(b).sub(d);this.max.copy(b).add(d);return this}}(),copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(a){return(a||new THREE.Vector2).addVectors(this.min,this.max).multiplyScalar(0.5)},size:function(a){return(a||new THREE.Vector2).subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);
this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y?!0:!1},getParameter:function(a,b){return(b||new THREE.Vector2).set((a.x-this.min.x)/(this.max.x-this.min.x),
(a.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y?!1:!0},clampPoint:function(a,b){return(b||new THREE.Vector2).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new THREE.Vector2;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);
return this},translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)},clone:function(){return(new THREE.Box2).copy(this)}};THREE.Box3=function(a,b){this.min=void 0!==a?a:new THREE.Vector3(Infinity,Infinity,Infinity);this.max=void 0!==b?b:new THREE.Vector3(-Infinity,-Infinity,-Infinity)};
THREE.Box3.prototype={constructor:THREE.Box3,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},addPoint:function(a){a.x<this.min.x?this.min.x=a.x:a.x>this.max.x&&(this.max.x=a.x);a.y<this.min.y?this.min.y=a.y:a.y>this.max.y&&(this.max.y=a.y);a.z<this.min.z?this.min.z=a.z:a.z>this.max.z&&(this.max.z=a.z)},setFromPoints:function(a){if(0<a.length){var b=a[0];this.min.copy(b);this.max.copy(b);for(var b=1,c=a.length;b<c;b++)this.addPoint(a[b])}else this.makeEmpty();return this},setFromCenterAndSize:function(){var a=
new THREE.Vector3;return function(b,c){var d=a.copy(c).multiplyScalar(0.5);this.min.copy(b).sub(d);this.max.copy(b).add(d);return this}}(),setFromObject:function(){var a=new THREE.Vector3;return function(b){var c=this;b.updateMatrixWorld(!0);this.makeEmpty();b.traverse(function(b){if(void 0!==b.geometry&&void 0!==b.geometry.vertices)for(var e=b.geometry.vertices,f=0,h=e.length;f<h;f++)a.copy(e[f]),a.applyMatrix4(b.matrixWorld),c.expandByPoint(a)});return this}}(),copy:function(a){this.min.copy(a.min);
this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(a){return(a||new THREE.Vector3).addVectors(this.min,this.max).multiplyScalar(0.5)},size:function(a){return(a||new THREE.Vector3).subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);
this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z?!0:!1},getParameter:function(a,b){return(b||new THREE.Vector3).set((a.x-this.min.x)/(this.max.x-
this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z?!1:!0},clampPoint:function(a,b){return(b||new THREE.Vector3).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new THREE.Vector3;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),getBoundingSphere:function(){var a=
new THREE.Vector3;return function(b){b=b||new THREE.Sphere;b.center=this.center();b.radius=0.5*this.size(a).length();return b}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},applyMatrix4:function(){var a=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];return function(b){a[0].set(this.min.x,this.min.y,
this.min.z).applyMatrix4(b);a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(b);a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(b);a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(b);a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(b);a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(b);a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(b);a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(b);this.makeEmpty();this.setFromPoints(a);return this}}(),translate:function(a){this.min.add(a);
this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)},clone:function(){return(new THREE.Box3).copy(this)}};THREE.Matrix3=function(a,b,c,d,e,f,h,g,i){this.elements=new Float32Array(9);this.set(void 0!==a?a:1,b||0,c||0,d||0,void 0!==e?e:1,f||0,h||0,g||0,void 0!==i?i:1)};
THREE.Matrix3.prototype={constructor:THREE.Matrix3,set:function(a,b,c,d,e,f,h,g,i){var k=this.elements;k[0]=a;k[3]=b;k[6]=c;k[1]=d;k[4]=e;k[7]=f;k[2]=h;k[5]=g;k[8]=i;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},copy:function(a){a=a.elements;this.set(a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8]);return this},multiplyVector3:function(a){console.warn("DEPRECATED: Matrix3's .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return a.applyMatrix3(this)},
multiplyVector3Array:function(){var a=new THREE.Vector3;return function(b){for(var c=0,d=b.length;c<d;c+=3)a.x=b[c],a.y=b[c+1],a.z=b[c+2],a.applyMatrix3(this),b[c]=a.x,b[c+1]=a.y,b[c+2]=a.z;return b}}(),multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[3]*=a;b[6]*=a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=a;return this},determinant:function(){var a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],h=a[5],g=a[6],i=a[7],a=a[8];return b*f*a-b*h*i-c*e*a+c*h*g+d*e*i-d*f*g},getInverse:function(a,
b){var c=a.elements,d=this.elements;d[0]=c[10]*c[5]-c[6]*c[9];d[1]=-c[10]*c[1]+c[2]*c[9];d[2]=c[6]*c[1]-c[2]*c[5];d[3]=-c[10]*c[4]+c[6]*c[8];d[4]=c[10]*c[0]-c[2]*c[8];d[5]=-c[6]*c[0]+c[2]*c[4];d[6]=c[9]*c[4]-c[5]*c[8];d[7]=-c[9]*c[0]+c[1]*c[8];d[8]=c[5]*c[0]-c[1]*c[4];c=c[0]*d[0]+c[1]*d[3]+c[2]*d[6];if(0===c){if(b)throw Error("Matrix3.getInverse(): can't invert matrix, determinant is 0");console.warn("Matrix3.getInverse(): can't invert matrix, determinant is 0");this.identity();return this}this.multiplyScalar(1/
c);return this},transpose:function(){var a,b=this.elements;a=b[1];b[1]=b[3];b[3]=a;a=b[2];b[2]=b[6];b[6]=a;a=b[5];b[5]=b[7];b[7]=a;return this},getNormalMatrix:function(a){this.getInverse(a).transpose();return this},transposeIntoArray:function(a){var b=this.elements;a[0]=b[0];a[1]=b[3];a[2]=b[6];a[3]=b[1];a[4]=b[4];a[5]=b[7];a[6]=b[2];a[7]=b[5];a[8]=b[8];return this},clone:function(){var a=this.elements;return new THREE.Matrix3(a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8])}};THREE.Matrix4=function(a,b,c,d,e,f,h,g,i,k,m,l,p,t,s,q){var n=this.elements=new Float32Array(16);n[0]=void 0!==a?a:1;n[4]=b||0;n[8]=c||0;n[12]=d||0;n[1]=e||0;n[5]=void 0!==f?f:1;n[9]=h||0;n[13]=g||0;n[2]=i||0;n[6]=k||0;n[10]=void 0!==m?m:1;n[14]=l||0;n[3]=p||0;n[7]=t||0;n[11]=s||0;n[15]=void 0!==q?q:1};
THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(a,b,c,d,e,f,h,g,i,k,m,l,p,t,s,q){var n=this.elements;n[0]=a;n[4]=b;n[8]=c;n[12]=d;n[1]=e;n[5]=f;n[9]=h;n[13]=g;n[2]=i;n[6]=k;n[10]=m;n[14]=l;n[3]=p;n[7]=t;n[11]=s;n[15]=q;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},copy:function(a){this.elements.set(a.elements);return this},extractPosition:function(a){console.warn("DEPRECATED: Matrix4's .extractPosition() has been renamed to .copyPosition().");
return this.copyPosition(a)},copyPosition:function(a){var b=this.elements,a=a.elements;b[12]=a[12];b[13]=a[13];b[14]=a[14];return this},extractRotation:function(){var a=new THREE.Vector3;return function(b){var c=this.elements,b=b.elements,d=1/a.set(b[0],b[1],b[2]).length(),e=1/a.set(b[4],b[5],b[6]).length(),f=1/a.set(b[8],b[9],b[10]).length();c[0]=b[0]*d;c[1]=b[1]*d;c[2]=b[2]*d;c[4]=b[4]*e;c[5]=b[5]*e;c[6]=b[6]*e;c[8]=b[8]*f;c[9]=b[9]*f;c[10]=b[10]*f;return this}}(),makeRotationFromEuler:function(a){!1===
a instanceof THREE.Euler&&console.error("ERROR: Matrix's .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code.");var b=this.elements,c=a.x,d=a.y,e=a.z,f=Math.cos(c),c=Math.sin(c),h=Math.cos(d),d=Math.sin(d),g=Math.cos(e),e=Math.sin(e);if("XYZ"===a.order){var a=f*g,i=f*e,k=c*g,m=c*e;b[0]=h*g;b[4]=-h*e;b[8]=d;b[1]=i+k*d;b[5]=a-m*d;b[9]=-c*h;b[2]=m-a*d;b[6]=k+i*d;b[10]=f*h}else"YXZ"===a.order?(a=h*g,i=h*e,k=d*g,m=d*e,b[0]=a+m*c,b[4]=k*c-i,b[8]=
f*d,b[1]=f*e,b[5]=f*g,b[9]=-c,b[2]=i*c-k,b[6]=m+a*c,b[10]=f*h):"ZXY"===a.order?(a=h*g,i=h*e,k=d*g,m=d*e,b[0]=a-m*c,b[4]=-f*e,b[8]=k+i*c,b[1]=i+k*c,b[5]=f*g,b[9]=m-a*c,b[2]=-f*d,b[6]=c,b[10]=f*h):"ZYX"===a.order?(a=f*g,i=f*e,k=c*g,m=c*e,b[0]=h*g,b[4]=k*d-i,b[8]=a*d+m,b[1]=h*e,b[5]=m*d+a,b[9]=i*d-k,b[2]=-d,b[6]=c*h,b[10]=f*h):"YZX"===a.order?(a=f*h,i=f*d,k=c*h,m=c*d,b[0]=h*g,b[4]=m-a*e,b[8]=k*e+i,b[1]=e,b[5]=f*g,b[9]=-c*g,b[2]=-d*g,b[6]=i*e+k,b[10]=a-m*e):"XZY"===a.order&&(a=f*h,i=f*d,k=c*h,m=c*d,b[0]=
h*g,b[4]=-e,b[8]=d*g,b[1]=a*e+m,b[5]=f*g,b[9]=i*e-k,b[2]=k*e-i,b[6]=c*g,b[10]=m*e+a);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},setRotationFromQuaternion:function(a){console.warn("DEPRECATED: Matrix4's .setRotationFromQuaternion() has been deprecated in favor of makeRotationFromQuaternion.  Please update your code.");return this.makeRotationFromQuaternion(a)},makeRotationFromQuaternion:function(a){var b=this.elements,c=a.x,d=a.y,e=a.z,f=a.w,h=c+c,g=d+d,i=e+e,a=c*h,k=c*g,c=
c*i,m=d*g,d=d*i,e=e*i,h=f*h,g=f*g,f=f*i;b[0]=1-(m+e);b[4]=k-f;b[8]=c+g;b[1]=k+f;b[5]=1-(a+e);b[9]=d-h;b[2]=c-g;b[6]=d+h;b[10]=1-(a+m);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},lookAt:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(d,e,f){var h=this.elements;c.subVectors(d,e).normalize();0===c.length()&&(c.z=1);a.crossVectors(f,c).normalize();0===a.length()&&(c.x+=1E-4,a.crossVectors(f,c).normalize());b.crossVectors(c,a);h[0]=a.x;
h[4]=b.x;h[8]=c.x;h[1]=a.y;h[5]=b.y;h[9]=c.y;h[2]=a.z;h[6]=b.z;h[10]=c.z;return this}}(),multiply:function(a,b){return void 0!==b?(console.warn("DEPRECATED: Matrix4's .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,b)):this.multiplyMatrices(this,a)},multiplyMatrices:function(a,b){var c=a.elements,d=b.elements,e=this.elements,f=c[0],h=c[4],g=c[8],i=c[12],k=c[1],m=c[5],l=c[9],p=c[13],t=c[2],s=c[6],q=c[10],n=c[14],u=c[3],r=c[7],v=c[11],c=c[15],
z=d[0],G=d[4],w=d[8],y=d[12],E=d[1],A=d[5],K=d[9],D=d[13],F=d[2],O=d[6],x=d[10],I=d[14],B=d[3],M=d[7],J=d[11],d=d[15];e[0]=f*z+h*E+g*F+i*B;e[4]=f*G+h*A+g*O+i*M;e[8]=f*w+h*K+g*x+i*J;e[12]=f*y+h*D+g*I+i*d;e[1]=k*z+m*E+l*F+p*B;e[5]=k*G+m*A+l*O+p*M;e[9]=k*w+m*K+l*x+p*J;e[13]=k*y+m*D+l*I+p*d;e[2]=t*z+s*E+q*F+n*B;e[6]=t*G+s*A+q*O+n*M;e[10]=t*w+s*K+q*x+n*J;e[14]=t*y+s*D+q*I+n*d;e[3]=u*z+r*E+v*F+c*B;e[7]=u*G+r*A+v*O+c*M;e[11]=u*w+r*K+v*x+c*J;e[15]=u*y+r*D+v*I+c*d;return this},multiplyToArray:function(a,b,
c){var d=this.elements;this.multiplyMatrices(a,b);c[0]=d[0];c[1]=d[1];c[2]=d[2];c[3]=d[3];c[4]=d[4];c[5]=d[5];c[6]=d[6];c[7]=d[7];c[8]=d[8];c[9]=d[9];c[10]=d[10];c[11]=d[11];c[12]=d[12];c[13]=d[13];c[14]=d[14];c[15]=d[15];return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},multiplyVector3:function(a){console.warn("DEPRECATED: Matrix4's .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.");
return a.applyProjection(this)},multiplyVector4:function(a){console.warn("DEPRECATED: Matrix4's .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},multiplyVector3Array:function(){var a=new THREE.Vector3;return function(b){for(var c=0,d=b.length;c<d;c+=3)a.x=b[c],a.y=b[c+1],a.z=b[c+2],a.applyProjection(this),b[c]=a.x,b[c+1]=a.y,b[c+2]=a.z;return b}}(),rotateAxis:function(a){console.warn("DEPRECATED: Matrix4's .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");
a.transformDirection(this)},crossVector:function(a){console.warn("DEPRECATED: Matrix4's .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},determinant:function(){var a=this.elements,b=a[0],c=a[4],d=a[8],e=a[12],f=a[1],h=a[5],g=a[9],i=a[13],k=a[2],m=a[6],l=a[10],p=a[14];return a[3]*(+e*g*m-d*i*m-e*h*l+c*i*l+d*h*p-c*g*p)+a[7]*(+b*g*p-b*i*l+e*f*l-d*f*p+d*i*k-e*g*k)+a[11]*(+b*i*m-b*h*p-e*f*m+c*f*p+e*h*k-c*i*k)+a[15]*(-d*h*k-b*g*m+b*h*l+d*f*m-c*f*
l+c*g*k)},transpose:function(){var a=this.elements,b;b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return this},flattenToArray:function(a){var b=this.elements;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a},flattenToArrayOffset:function(a,b){var c=this.elements;
a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];a[b+9]=c[9];a[b+10]=c[10];a[b+11]=c[11];a[b+12]=c[12];a[b+13]=c[13];a[b+14]=c[14];a[b+15]=c[15];return a},getPosition:function(){var a=new THREE.Vector3;return function(){console.warn("DEPRECATED: Matrix4's .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var b=this.elements;return a.set(b[12],b[13],b[14])}}(),setPosition:function(a){var b=this.elements;
b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},getInverse:function(a,b){var c=this.elements,d=a.elements,e=d[0],f=d[4],h=d[8],g=d[12],i=d[1],k=d[5],m=d[9],l=d[13],p=d[2],t=d[6],s=d[10],q=d[14],n=d[3],u=d[7],r=d[11],d=d[15];c[0]=m*q*u-l*s*u+l*t*r-k*q*r-m*t*d+k*s*d;c[4]=g*s*u-h*q*u-g*t*r+f*q*r+h*t*d-f*s*d;c[8]=h*l*u-g*m*u+g*k*r-f*l*r-h*k*d+f*m*d;c[12]=g*m*t-h*l*t-g*k*s+f*l*s+h*k*q-f*m*q;c[1]=l*s*n-m*q*n-l*p*r+i*q*r+m*p*d-i*s*d;c[5]=h*q*n-g*s*n+g*p*r-e*q*r-h*p*d+e*s*d;c[9]=g*m*n-h*l*n-g*i*r+e*l*r+h*i*d-
e*m*d;c[13]=h*l*p-g*m*p+g*i*s-e*l*s-h*i*q+e*m*q;c[2]=k*q*n-l*t*n+l*p*u-i*q*u-k*p*d+i*t*d;c[6]=g*t*n-f*q*n-g*p*u+e*q*u+f*p*d-e*t*d;c[10]=f*l*n-g*k*n+g*i*u-e*l*u-f*i*d+e*k*d;c[14]=g*k*p-f*l*p-g*i*t+e*l*t+f*i*q-e*k*q;c[3]=m*t*n-k*s*n-m*p*u+i*s*u+k*p*r-i*t*r;c[7]=f*s*n-h*t*n+h*p*u-e*s*u-f*p*r+e*t*r;c[11]=h*k*n-f*m*n-h*i*u+e*m*u+f*i*r-e*k*r;c[15]=f*m*p-h*k*p+h*i*t-e*m*t-f*i*s+e*k*s;c=e*c[0]+i*c[4]+p*c[8]+n*c[12];if(0==c){if(b)throw Error("Matrix4.getInverse(): can't invert matrix, determinant is 0");console.warn("Matrix4.getInverse(): can't invert matrix, determinant is 0");
this.identity();return this}this.multiplyScalar(1/c);return this},translate:function(){console.warn("DEPRECATED: Matrix4's .translate() has been removed.")},rotateX:function(){console.warn("DEPRECATED: Matrix4's .rotateX() has been removed.")},rotateY:function(){console.warn("DEPRECATED: Matrix4's .rotateY() has been removed.")},rotateZ:function(){console.warn("DEPRECATED: Matrix4's .rotateZ() has been removed.")},rotateByAxis:function(){console.warn("DEPRECATED: Matrix4's .rotateByAxis() has been removed.")},
scale:function(a){var b=this.elements,c=a.x,d=a.y,a=a.z;b[0]*=c;b[4]*=d;b[8]*=a;b[1]*=c;b[5]*=d;b[9]*=a;b[2]*=c;b[6]*=d;b[10]*=a;b[3]*=c;b[7]*=d;b[11]*=a;return this},getMaxScaleOnAxis:function(){var a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],Math.max(a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10])))},makeTranslation:function(a,b,c){this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1);return this},makeRotationX:function(a){var b=Math.cos(a),a=Math.sin(a);this.set(1,
0,0,0,0,b,-a,0,0,a,b,0,0,0,0,1);return this},makeRotationY:function(a){var b=Math.cos(a),a=Math.sin(a);this.set(b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1);return this},makeRotationZ:function(a){var b=Math.cos(a),a=Math.sin(a);this.set(b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(a,b){var c=Math.cos(b),d=Math.sin(b),e=1-c,f=a.x,h=a.y,g=a.z,i=e*f,k=e*h;this.set(i*f+c,i*h-d*g,i*g+d*h,0,i*h+d*g,k*h+c,k*g-d*f,0,i*g-d*h,k*g+d*f,e*g*g+c,0,0,0,0,1);return this},makeScale:function(a,b,c){this.set(a,
0,0,0,0,b,0,0,0,0,c,0,0,0,0,1);return this},compose:function(a,b,c){this.makeRotationFromQuaternion(b);this.scale(c);this.setPosition(a);return this},decompose:function(){var a=new THREE.Vector3,b=new THREE.Matrix4;return function(c,d,e){var f=this.elements,h=a.set(f[0],f[1],f[2]).length(),g=a.set(f[4],f[5],f[6]).length(),i=a.set(f[8],f[9],f[10]).length();c.x=f[12];c.y=f[13];c.z=f[14];b.elements.set(this.elements);var c=1/h,f=1/g,k=1/i;b.elements[0]*=c;b.elements[1]*=c;b.elements[2]*=c;b.elements[4]*=
f;b.elements[5]*=f;b.elements[6]*=f;b.elements[8]*=k;b.elements[9]*=k;b.elements[10]*=k;d.setFromRotationMatrix(b);e.x=h;e.y=g;e.z=i;return this}}(),makeFrustum:function(a,b,c,d,e,f){var h=this.elements;h[0]=2*e/(b-a);h[4]=0;h[8]=(b+a)/(b-a);h[12]=0;h[1]=0;h[5]=2*e/(d-c);h[9]=(d+c)/(d-c);h[13]=0;h[2]=0;h[6]=0;h[10]=-(f+e)/(f-e);h[14]=-2*f*e/(f-e);h[3]=0;h[7]=0;h[11]=-1;h[15]=0;return this},makePerspective:function(a,b,c,d){var a=c*Math.tan(THREE.Math.degToRad(0.5*a)),e=-a;return this.makeFrustum(e*
b,a*b,e,a,c,d)},makeOrthographic:function(a,b,c,d,e,f){var h=this.elements,g=b-a,i=c-d,k=f-e;h[0]=2/g;h[4]=0;h[8]=0;h[12]=-((b+a)/g);h[1]=0;h[5]=2/i;h[9]=0;h[13]=-((c+d)/i);h[2]=0;h[6]=0;h[10]=-2/k;h[14]=-((f+e)/k);h[3]=0;h[7]=0;h[11]=0;h[15]=1;return this},fromArray:function(a){this.elements.set(a);return this},toArray:function(){var a=this.elements;return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]]},clone:function(){var a=this.elements;return new THREE.Matrix4(a[0],
a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15])}};THREE.Ray=function(a,b){this.origin=void 0!==a?a:new THREE.Vector3;this.direction=void 0!==b?b:new THREE.Vector3};
THREE.Ray.prototype={constructor:THREE.Ray,set:function(a,b){this.origin.copy(a);this.direction.copy(b);return this},copy:function(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this},at:function(a,b){return(b||new THREE.Vector3).copy(this.direction).multiplyScalar(a).add(this.origin)},recast:function(){var a=new THREE.Vector3;return function(b){this.origin.copy(this.at(b,a));return this}}(),closestPointToPoint:function(a,b){var c=b||new THREE.Vector3;c.subVectors(a,this.origin);
var d=c.dot(this.direction);return 0>d?c.copy(this.origin):c.copy(this.direction).multiplyScalar(d).add(this.origin)},distanceToPoint:function(){var a=new THREE.Vector3;return function(b){var c=a.subVectors(b,this.origin).dot(this.direction);if(0>c)return this.origin.distanceTo(b);a.copy(this.direction).multiplyScalar(c).add(this.origin);return a.distanceTo(b)}}(),distanceSqToSegment:function(a,b,c,d){var e=a.clone().add(b).multiplyScalar(0.5),f=b.clone().sub(a).normalize(),h=0.5*a.distanceTo(b),
g=this.origin.clone().sub(e),a=-this.direction.dot(f),b=g.dot(this.direction),i=-g.dot(f),k=g.lengthSq(),m=Math.abs(1-a*a),l,p;0<=m?(g=a*i-b,l=a*b-i,p=h*m,0<=g?l>=-p?l<=p?(h=1/m,g*=h,l*=h,a=g*(g+a*l+2*b)+l*(a*g+l+2*i)+k):(l=h,g=Math.max(0,-(a*l+b)),a=-g*g+l*(l+2*i)+k):(l=-h,g=Math.max(0,-(a*l+b)),a=-g*g+l*(l+2*i)+k):l<=-p?(g=Math.max(0,-(-a*h+b)),l=0<g?-h:Math.min(Math.max(-h,-i),h),a=-g*g+l*(l+2*i)+k):l<=p?(g=0,l=Math.min(Math.max(-h,-i),h),a=l*(l+2*i)+k):(g=Math.max(0,-(a*h+b)),l=0<g?h:Math.min(Math.max(-h,
-i),h),a=-g*g+l*(l+2*i)+k)):(l=0<a?-h:h,g=Math.max(0,-(a*l+b)),a=-g*g+l*(l+2*i)+k);c&&c.copy(this.direction.clone().multiplyScalar(g).add(this.origin));d&&d.copy(f.clone().multiplyScalar(l).add(e));return a},isIntersectionSphere:function(a){return this.distanceToPoint(a.center)<=a.radius},isIntersectionPlane:function(a){var b=a.distanceToPoint(this.origin);return 0===b||0>a.normal.dot(this.direction)*b?!0:!1},distanceToPlane:function(a){var b=a.normal.dot(this.direction);if(0==b)return 0==a.distanceToPoint(this.origin)?
0:null;a=-(this.origin.dot(a.normal)+a.constant)/b;return 0<=a?a:null},intersectPlane:function(a,b){var c=this.distanceToPlane(a);return null===c?null:this.at(c,b)},isIntersectionBox:function(){var a=new THREE.Vector3;return function(b){return null!==this.intersectBox(b,a)}}(),intersectBox:function(a,b){var c,d,e,f,h;d=1/this.direction.x;f=1/this.direction.y;h=1/this.direction.z;var g=this.origin;0<=d?(c=(a.min.x-g.x)*d,d*=a.max.x-g.x):(c=(a.max.x-g.x)*d,d*=a.min.x-g.x);0<=f?(e=(a.min.y-g.y)*f,f*=
a.max.y-g.y):(e=(a.max.y-g.y)*f,f*=a.min.y-g.y);if(c>f||e>d)return null;if(e>c||c!==c)c=e;if(f<d||d!==d)d=f;0<=h?(e=(a.min.z-g.z)*h,h*=a.max.z-g.z):(e=(a.max.z-g.z)*h,h*=a.min.z-g.z);if(c>h||e>d)return null;if(e>c||c!==c)c=e;if(h<d||d!==d)d=h;return 0>d?null:this.at(0<=c?c:d,b)},intersectTriangle:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Vector3;return function(e,f,h,g,i){b.subVectors(f,e);c.subVectors(h,e);d.crossVectors(b,c);f=this.direction.dot(d);if(0<
f){if(g)return null;g=1}else if(0>f)g=-1,f=-f;else return null;a.subVectors(this.origin,e);e=g*this.direction.dot(c.crossVectors(a,c));if(0>e)return null;h=g*this.direction.dot(b.cross(a));if(0>h||e+h>f)return null;e=-g*a.dot(d);return 0>e?null:this.at(e/f,i)}}(),applyMatrix4:function(a){this.direction.add(this.origin).applyMatrix4(a);this.origin.applyMatrix4(a);this.direction.sub(this.origin);this.direction.normalize();return this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)},
clone:function(){return(new THREE.Ray).copy(this)}};THREE.Sphere=function(a,b){this.center=void 0!==a?a:new THREE.Vector3;this.radius=void 0!==b?b:0};
THREE.Sphere.prototype={constructor:THREE.Sphere,set:function(a,b){this.center.copy(a);this.radius=b;return this},setFromPoints:function(){var a=new THREE.Box3;return function(b,c){var d=this.center;void 0!==c?d.copy(c):a.setFromPoints(b).center(d);for(var e=0,f=0,h=b.length;f<h;f++)e=Math.max(e,d.distanceToSquared(b[f]));this.radius=Math.sqrt(e);return this}}(),copy:function(a){this.center.copy(a.center);this.radius=a.radius;return this},empty:function(){return 0>=this.radius},containsPoint:function(a){return a.distanceToSquared(this.center)<=
this.radius*this.radius},distanceToPoint:function(a){return a.distanceTo(this.center)-this.radius},intersectsSphere:function(a){var b=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=b*b},clampPoint:function(a,b){var c=this.center.distanceToSquared(a),d=b||new THREE.Vector3;d.copy(a);c>this.radius*this.radius&&(d.sub(this.center).normalize(),d.multiplyScalar(this.radius).add(this.center));return d},getBoundingBox:function(a){a=a||new THREE.Box3;a.set(this.center,this.center);a.expandByScalar(this.radius);
return a},applyMatrix4:function(a){this.center.applyMatrix4(a);this.radius*=a.getMaxScaleOnAxis();return this},translate:function(a){this.center.add(a);return this},equals:function(a){return a.center.equals(this.center)&&a.radius===this.radius},clone:function(){return(new THREE.Sphere).copy(this)}};THREE.Frustum=function(a,b,c,d,e,f){this.planes=[void 0!==a?a:new THREE.Plane,void 0!==b?b:new THREE.Plane,void 0!==c?c:new THREE.Plane,void 0!==d?d:new THREE.Plane,void 0!==e?e:new THREE.Plane,void 0!==f?f:new THREE.Plane]};
THREE.Frustum.prototype={constructor:THREE.Frustum,set:function(a,b,c,d,e,f){var h=this.planes;h[0].copy(a);h[1].copy(b);h[2].copy(c);h[3].copy(d);h[4].copy(e);h[5].copy(f);return this},copy:function(a){for(var b=this.planes,c=0;6>c;c++)b[c].copy(a.planes[c]);return this},setFromMatrix:function(a){var b=this.planes,c=a.elements,a=c[0],d=c[1],e=c[2],f=c[3],h=c[4],g=c[5],i=c[6],k=c[7],m=c[8],l=c[9],p=c[10],t=c[11],s=c[12],q=c[13],n=c[14],c=c[15];b[0].setComponents(f-a,k-h,t-m,c-s).normalize();b[1].setComponents(f+
a,k+h,t+m,c+s).normalize();b[2].setComponents(f+d,k+g,t+l,c+q).normalize();b[3].setComponents(f-d,k-g,t-l,c-q).normalize();b[4].setComponents(f-e,k-i,t-p,c-n).normalize();b[5].setComponents(f+e,k+i,t+p,c+n).normalize();return this},intersectsObject:function(){var a=new THREE.Sphere;return function(b){var c=b.geometry;null===c.boundingSphere&&c.computeBoundingSphere();a.copy(c.boundingSphere);a.applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),intersectsSphere:function(a){for(var b=this.planes,
c=a.center,a=-a.radius,d=0;6>d;d++)if(b[d].distanceToPoint(c)<a)return!1;return!0},intersectsBox:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c){for(var d=this.planes,e=0;6>e;e++){var f=d[e];a.x=0<f.normal.x?c.min.x:c.max.x;b.x=0<f.normal.x?c.max.x:c.min.x;a.y=0<f.normal.y?c.min.y:c.max.y;b.y=0<f.normal.y?c.max.y:c.min.y;a.z=0<f.normal.z?c.min.z:c.max.z;b.z=0<f.normal.z?c.max.z:c.min.z;var h=f.distanceToPoint(a),f=f.distanceToPoint(b);if(0>h&&0>f)return!1}return!0}}(),containsPoint:function(a){for(var b=
this.planes,c=0;6>c;c++)if(0>b[c].distanceToPoint(a))return!1;return!0},clone:function(){return(new THREE.Frustum).copy(this)}};THREE.Plane=function(a,b){this.normal=void 0!==a?a:new THREE.Vector3(1,0,0);this.constant=void 0!==b?b:0};
THREE.Plane.prototype={constructor:THREE.Plane,set:function(a,b){this.normal.copy(a);this.constant=b;return this},setComponents:function(a,b,c,d){this.normal.set(a,b,c);this.constant=d;return this},setFromNormalAndCoplanarPoint:function(a,b){this.normal.copy(a);this.constant=-b.dot(this.normal);return this},setFromCoplanarPoints:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,d,e){d=a.subVectors(e,d).cross(b.subVectors(c,d)).normalize();this.setFromNormalAndCoplanarPoint(d,
c);return this}}(),copy:function(a){this.normal.copy(a.normal);this.constant=a.constant;return this},normalize:function(){var a=1/this.normal.length();this.normal.multiplyScalar(a);this.constant*=a;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(a){return this.normal.dot(a)+this.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function(a,b){return this.orthoPoint(a,b).sub(a).negate()},orthoPoint:function(a,
b){var c=this.distanceToPoint(a);return(b||new THREE.Vector3).copy(this.normal).multiplyScalar(c)},isIntersectionLine:function(a){var b=this.distanceToPoint(a.start),a=this.distanceToPoint(a.end);return 0>b&&0<a||0>a&&0<b},intersectLine:function(){var a=new THREE.Vector3;return function(b,c){var d=c||new THREE.Vector3,e=b.delta(a),f=this.normal.dot(e);if(0==f){if(0==this.distanceToPoint(b.start))return d.copy(b.start)}else return f=-(b.start.dot(this.normal)+this.constant)/f,0>f||1<f?void 0:d.copy(e).multiplyScalar(f).add(b.start)}}(),
coplanarPoint:function(a){return(a||new THREE.Vector3).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Matrix3;return function(d,e){var f=e||c.getNormalMatrix(d),f=a.copy(this.normal).applyMatrix3(f),h=this.coplanarPoint(b);h.applyMatrix4(d);this.setFromNormalAndCoplanarPoint(f,h);return this}}(),translate:function(a){this.constant-=a.dot(this.normal);return this},equals:function(a){return a.normal.equals(this.normal)&&
a.constant==this.constant},clone:function(){return(new THREE.Plane).copy(this)}};THREE.Math={PI2:2*Math.PI,generateUUID:function(){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),b=Array(36),c=0,d;return function(){for(var e=0;36>e;e++)8==e||13==e||18==e||23==e?b[e]="-":14==e?b[e]="4":(2>=c&&(c=33554432+16777216*Math.random()|0),d=c&15,c>>=4,b[e]=a[19==e?d&3|8:d]);return b.join("")}}(),clamp:function(a,b,c){return a<b?b:a>c?c:a},clampBottom:function(a,b){return a<b?b:a},mapLinear:function(a,b,c,d,e){return d+(a-b)*(e-d)/(c-b)},smoothstep:function(a,
b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*(3-2*a)},smootherstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*a*(a*(6*a-15)+10)},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*(0.5-Math.random())},sign:function(a){return 0>a?-1:0<a?1:0},degToRad:function(){var a=Math.PI/
180;return function(b){return b*a}}(),radToDeg:function(){var a=180/Math.PI;return function(b){return b*a}}()};THREE.Spline=function(a){function b(a,b,c,d,e,f,h){a=0.5*(c-a);d=0.5*(d-b);return(2*(b-c)+a+d)*h+(-3*(b-c)-2*a-d)*f+a*e+b}this.points=a;var c=[],d={x:0,y:0,z:0},e,f,h,g,i,k,m,l,p;this.initFromArray=function(a){this.points=[];for(var b=0;b<a.length;b++)this.points[b]={x:a[b][0],y:a[b][1],z:a[b][2]}};this.getPoint=function(a){e=(this.points.length-1)*a;f=Math.floor(e);h=e-f;c[0]=0===f?f:f-1;c[1]=f;c[2]=f>this.points.length-2?this.points.length-1:f+1;c[3]=f>this.points.length-3?this.points.length-1:
f+2;k=this.points[c[0]];m=this.points[c[1]];l=this.points[c[2]];p=this.points[c[3]];g=h*h;i=h*g;d.x=b(k.x,m.x,l.x,p.x,h,g,i);d.y=b(k.y,m.y,l.y,p.y,h,g,i);d.z=b(k.z,m.z,l.z,p.z,h,g,i);return d};this.getControlPointsArray=function(){var a,b,c=this.points.length,d=[];for(a=0;a<c;a++)b=this.points[a],d[a]=[b.x,b.y,b.z];return d};this.getLength=function(a){var b,c,d,e=b=b=0,f=new THREE.Vector3,h=new THREE.Vector3,g=[],i=0;g[0]=0;a||(a=100);c=this.points.length*a;f.copy(this.points[0]);for(a=1;a<c;a++)b=
a/c,d=this.getPoint(b),h.copy(d),i+=h.distanceTo(f),f.copy(d),b*=this.points.length-1,b=Math.floor(b),b!=e&&(g[b]=i,e=b);g[g.length]=i;return{chunks:g,total:i}};this.reparametrizeByArcLength=function(a){var b,c,d,e,f,h,g=[],i=new THREE.Vector3,k=this.getLength();g.push(i.copy(this.points[0]).clone());for(b=1;b<this.points.length;b++){c=k.chunks[b]-k.chunks[b-1];h=Math.ceil(a*c/k.total);e=(b-1)/(this.points.length-1);f=b/(this.points.length-1);for(c=1;c<h-1;c++)d=e+c*(1/h)*(f-e),d=this.getPoint(d),
g.push(i.copy(d).clone());g.push(i.copy(this.points[b]).clone())}this.points=g}};THREE.Triangle=function(a,b,c){this.a=void 0!==a?a:new THREE.Vector3;this.b=void 0!==b?b:new THREE.Vector3;this.c=void 0!==c?c:new THREE.Vector3};THREE.Triangle.normal=function(){var a=new THREE.Vector3;return function(b,c,d,e){e=e||new THREE.Vector3;e.subVectors(d,c);a.subVectors(b,c);e.cross(a);b=e.lengthSq();return 0<b?e.multiplyScalar(1/Math.sqrt(b)):e.set(0,0,0)}}();
THREE.Triangle.barycoordFromPoint=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(d,e,f,h,g){a.subVectors(h,e);b.subVectors(f,e);c.subVectors(d,e);var d=a.dot(a),e=a.dot(b),f=a.dot(c),i=b.dot(b),h=b.dot(c),k=d*i-e*e,g=g||new THREE.Vector3;if(0==k)return g.set(-2,-1,-1);k=1/k;i=(i*f-e*h)*k;d=(d*h-e*f)*k;return g.set(1-i-d,d,i)}}();
THREE.Triangle.containsPoint=function(){var a=new THREE.Vector3;return function(b,c,d,e){b=THREE.Triangle.barycoordFromPoint(b,c,d,e,a);return 0<=b.x&&0<=b.y&&1>=b.x+b.y}}();
THREE.Triangle.prototype={constructor:THREE.Triangle,set:function(a,b,c){this.a.copy(a);this.b.copy(b);this.c.copy(c);return this},setFromPointsAndIndices:function(a,b,c,d){this.a.copy(a[b]);this.b.copy(a[c]);this.c.copy(a[d]);return this},copy:function(a){this.a.copy(a.a);this.b.copy(a.b);this.c.copy(a.c);return this},area:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(){a.subVectors(this.c,this.b);b.subVectors(this.a,this.b);return 0.5*a.cross(b).length()}}(),midpoint:function(a){return(a||
new THREE.Vector3).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(a){return THREE.Triangle.normal(this.a,this.b,this.c,a)},plane:function(a){return(a||new THREE.Plane).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(a,b){return THREE.Triangle.barycoordFromPoint(a,this.a,this.b,this.c,b)},containsPoint:function(a){return THREE.Triangle.containsPoint(a,this.a,this.b,this.c)},equals:function(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)},
clone:function(){return(new THREE.Triangle).copy(this)}};THREE.Vertex=function(a){console.warn("THREE.Vertex has been DEPRECATED. Use THREE.Vector3 instead.");return a};THREE.UV=function(a,b){console.warn("THREE.UV has been DEPRECATED. Use THREE.Vector2 instead.");return new THREE.Vector2(a,b)};THREE.Clock=function(a){this.autoStart=void 0!==a?a:!0;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1};
THREE.Clock.prototype={constructor:THREE.Clock,start:function(){this.oldTime=this.startTime=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now();this.running=!0},stop:function(){this.getElapsedTime();this.running=!1},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var a=0;this.autoStart&&!this.running&&this.start();if(this.running){var b=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now(),
a=0.001*(b-this.oldTime);this.oldTime=b;this.elapsedTime+=a}return a}};THREE.EventDispatcher=function(){};
THREE.EventDispatcher.prototype={constructor:THREE.EventDispatcher,apply:function(a){a.addEventListener=THREE.EventDispatcher.prototype.addEventListener;a.hasEventListener=THREE.EventDispatcher.prototype.hasEventListener;a.removeEventListener=THREE.EventDispatcher.prototype.removeEventListener;a.dispatchEvent=THREE.EventDispatcher.prototype.dispatchEvent},addEventListener:function(a,b){void 0===this._listeners&&(this._listeners={});var c=this._listeners;void 0===c[a]&&(c[a]=[]);-1===c[a].indexOf(b)&&
c[a].push(b)},hasEventListener:function(a,b){if(void 0===this._listeners)return!1;var c=this._listeners;return void 0!==c[a]&&-1!==c[a].indexOf(b)?!0:!1},removeEventListener:function(a,b){if(void 0!==this._listeners){var c=this._listeners[a];if(void 0!==c){var d=c.indexOf(b);-1!==d&&c.splice(d,1)}}},dispatchEvent:function(){var a=[];return function(b){if(void 0!==this._listeners){var c=this._listeners[b.type];if(void 0!==c){b.target=this;for(var d=c.length,e=0;e<d;e++)a[e]=c[e];for(e=0;e<d;e++)a[e].call(this,
b)}}}}()};(function(a){a.Raycaster=function(b,c,d,e){this.ray=new a.Ray(b,c);this.near=d||0;this.far=e||Infinity};var b=new a.Sphere,c=new a.Ray;new a.Plane;new a.Vector3;var d=new a.Vector3,e=new a.Matrix4,f=function(a,b){return a.distance-b.distance},h=new a.Vector3,g=new a.Vector3,i=new a.Vector3,k=function(f,m,t){if(f instanceof a.Sprite){d.setFromMatrixPosition(f.matrixWorld);var s=m.ray.distanceToPoint(d);if(s>f.scale.x)return t;t.push({distance:s,point:f.position,face:null,object:f})}else if(f instanceof
a.LOD)d.setFromMatrixPosition(f.matrixWorld),s=m.ray.origin.distanceTo(d),k(f.getObjectForDistance(s),m,t);else if(f instanceof a.Mesh){var q=f.geometry;null===q.boundingSphere&&q.computeBoundingSphere();b.copy(q.boundingSphere);b.applyMatrix4(f.matrixWorld);if(!1===m.ray.isIntersectionSphere(b))return t;e.getInverse(f.matrixWorld);c.copy(m.ray).applyMatrix4(e);if(null!==q.boundingBox&&!1===c.isIntersectionBox(q.boundingBox))return t;if(q instanceof a.BufferGeometry){var n=f.material;if(void 0===
n||!1===q.dynamic)return t;var u,r,v=m.precision;if(void 0!==q.attributes.index)for(var z=q.offsets,G=q.attributes.index.array,w=q.attributes.position.array,y=q.offsets.length,E=q.attributes.index.array.length/3,E=0;E<y;++E)for(var s=z[E].start,A=z[E].index,q=s,K=s+z[E].count;q<K;q+=3)s=A+G[q],u=A+G[q+1],r=A+G[q+2],h.set(w[3*s],w[3*s+1],w[3*s+2]),g.set(w[3*u],w[3*u+1],w[3*u+2]),i.set(w[3*r],w[3*r+1],w[3*r+2]),u=n.side===a.BackSide?c.intersectTriangle(i,g,h,!0):c.intersectTriangle(h,g,i,n.side!==a.DoubleSide),
null!==u&&(u.applyMatrix4(f.matrixWorld),s=m.ray.origin.distanceTo(u),s<v||(s<m.near||s>m.far)||t.push({distance:s,point:u,face:null,faceIndex:null,object:f}));else{w=q.attributes.position.array;E=q.attributes.position.array.length;for(q=0;q<E;q+=3)s=q,u=q+1,r=q+2,h.set(w[3*s],w[3*s+1],w[3*s+2]),g.set(w[3*u],w[3*u+1],w[3*u+2]),i.set(w[3*r],w[3*r+1],w[3*r+2]),u=n.side===a.BackSide?c.intersectTriangle(i,g,h,!0):c.intersectTriangle(h,g,i,n.side!==a.DoubleSide),null!==u&&(u.applyMatrix4(f.matrixWorld),
s=m.ray.origin.distanceTo(u),s<v||(s<m.near||s>m.far)||t.push({distance:s,point:u,face:null,faceIndex:null,object:f}))}}else if(q instanceof a.Geometry){G=f.material instanceof a.MeshFaceMaterial;w=!0===G?f.material.materials:null;v=m.precision;z=q.vertices;y=0;for(E=q.faces.length;y<E;y++)A=q.faces[y],n=!0===G?w[A.materialIndex]:f.material,void 0!==n&&(s=z[A.a],u=z[A.b],r=z[A.c],u=n.side===a.BackSide?c.intersectTriangle(r,u,s,!0):c.intersectTriangle(s,u,r,n.side!==a.DoubleSide),null!==u&&(u.applyMatrix4(f.matrixWorld),
s=m.ray.origin.distanceTo(u),s<v||(s<m.near||s>m.far)||t.push({distance:s,point:u,face:A,faceIndex:y,object:f})))}}else if(f instanceof a.Line){v=m.linePrecision;n=v*v;q=f.geometry;null===q.boundingSphere&&q.computeBoundingSphere();b.copy(q.boundingSphere);b.applyMatrix4(f.matrixWorld);if(!1===m.ray.isIntersectionSphere(b))return t;e.getInverse(f.matrixWorld);c.copy(m.ray).applyMatrix4(e);if(q instanceof a.Geometry){z=q.vertices;v=z.length;u=new a.Vector3;r=new a.Vector3;E=f.type===a.LineStrip?1:
2;for(q=0;q<v-1;q+=E)c.distanceSqToSegment(z[q],z[q+1],r,u)>n||(s=c.origin.distanceTo(r),s<m.near||s>m.far||t.push({distance:s,point:u.clone().applyMatrix4(f.matrixWorld),face:null,faceIndex:null,object:f}))}}},m=function(a,b,c){for(var a=a.getDescendants(),d=0,e=a.length;d<e;d++)k(a[d],b,c)};a.Raycaster.prototype.precision=1E-4;a.Raycaster.prototype.linePrecision=1;a.Raycaster.prototype.set=function(a,b){this.ray.set(a,b)};a.Raycaster.prototype.intersectObject=function(a,b){var c=[];!0===b&&m(a,
this,c);k(a,this,c);c.sort(f);return c};a.Raycaster.prototype.intersectObjects=function(a,b){for(var c=[],d=0,e=a.length;d<e;d++)k(a[d],this,c),!0===b&&m(a[d],this,c);c.sort(f);return c}})(THREE);THREE.Object3D=function(){this.id=THREE.Object3DIdCount++;this.uuid=THREE.Math.generateUUID();this.name="";this.parent=void 0;this.children=[];this.up=new THREE.Vector3(0,1,0);this.position=new THREE.Vector3;this._rotation=new THREE.Euler;this._quaternion=new THREE.Quaternion;this.scale=new THREE.Vector3(1,1,1);this._rotation._quaternion=this.quaternion;this._quaternion._euler=this.rotation;this.renderDepth=null;this.rotationAutoUpdate=!0;this.matrix=new THREE.Matrix4;this.matrixWorld=new THREE.Matrix4;
this.visible=this.matrixWorldNeedsUpdate=this.matrixAutoUpdate=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.userData={}};
THREE.Object3D.prototype={constructor:THREE.Object3D,get rotation(){return this._rotation},set rotation(a){this._rotation=a;this._rotation._quaternion=this._quaternion;this._quaternion._euler=this._rotation;this._rotation._updateQuaternion()},get quaternion(){return this._quaternion},set quaternion(a){this._quaternion=a;this._quaternion._euler=this._rotation;this._rotation._quaternion=this._quaternion;this._quaternion._updateEuler()},get eulerOrder(){console.warn("DEPRECATED: Object3D's .eulerOrder has been moved to Object3D's .rotation.order.");
return this.rotation.order},set eulerOrder(a){console.warn("DEPRECATED: Object3D's .eulerOrder has been moved to Object3D's .rotation.order.");this.rotation.order=a},get useQuaternion(){console.warn("DEPRECATED: Object3D's .useQuaternion has been removed. The library now uses quaternions by default.")},set useQuaternion(a){console.warn("DEPRECATED: Object3D's .useQuaternion has been removed. The library now uses quaternions by default.")},applyMatrix:function(){var a=new THREE.Matrix4;return function(b){this.matrix.multiplyMatrices(b,
this.matrix);this.position.setFromMatrixPosition(this.matrix);this.scale.setFromMatrixScale(this.matrix);a.extractRotation(this.matrix);this.quaternion.setFromRotationMatrix(a)}}(),setRotationFromAxisAngle:function(a,b){this.quaternion.setFromAxisAngle(a,b)},setRotationFromEuler:function(a){this.quaternion.setFromEuler(a,!0)},setRotationFromMatrix:function(a){this.quaternion.setFromRotationMatrix(a)},setRotationFromQuaternion:function(a){this.quaternion.copy(a)},rotateOnAxis:function(){var a=new THREE.Quaternion;
return function(b,c){a.setFromAxisAngle(b,c);this.quaternion.multiply(a);return this}}(),rotateX:function(){var a=new THREE.Vector3(1,0,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateY:function(){var a=new THREE.Vector3(0,1,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateZ:function(){var a=new THREE.Vector3(0,0,1);return function(b){return this.rotateOnAxis(a,b)}}(),translateOnAxis:function(){var a=new THREE.Vector3;return function(b,c){a.copy(b);a.applyQuaternion(this.quaternion);
this.position.add(a.multiplyScalar(c));return this}}(),translate:function(a,b){console.warn("DEPRECATED: Object3D's .translate() has been removed. Use .translateOnAxis( axis, distance ) instead. Note args have been changed.");return this.translateOnAxis(b,a)},translateX:function(){var a=new THREE.Vector3(1,0,0);return function(b){return this.translateOnAxis(a,b)}}(),translateY:function(){var a=new THREE.Vector3(0,1,0);return function(b){return this.translateOnAxis(a,b)}}(),translateZ:function(){var a=
new THREE.Vector3(0,0,1);return function(b){return this.translateOnAxis(a,b)}}(),localToWorld:function(a){return a.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var a=new THREE.Matrix4;return function(b){return b.applyMatrix4(a.getInverse(this.matrixWorld))}}(),lookAt:function(){var a=new THREE.Matrix4;return function(b){a.lookAt(b,this.position,this.up);this.quaternion.setFromRotationMatrix(a)}}(),add:function(a){if(a===this)console.warn("THREE.Object3D.add: An object can't be added as a child of itself.");
else if(a instanceof THREE.Object3D){void 0!==a.parent&&a.parent.remove(a);a.parent=this;a.dispatchEvent({type:"added"});this.children.push(a);for(var b=this;void 0!==b.parent;)b=b.parent;void 0!==b&&b instanceof THREE.Scene&&b.__addObject(a)}},remove:function(a){var b=this.children.indexOf(a);if(-1!==b){a.parent=void 0;a.dispatchEvent({type:"removed"});this.children.splice(b,1);for(b=this;void 0!==b.parent;)b=b.parent;void 0!==b&&b instanceof THREE.Scene&&b.__removeObject(a)}},traverse:function(a){a(this);
for(var b=0,c=this.children.length;b<c;b++)this.children[b].traverse(a)},getObjectById:function(a,b){for(var c=0,d=this.children.length;c<d;c++){var e=this.children[c];if(e.id===a||!0===b&&(e=e.getObjectById(a,b),void 0!==e))return e}},getObjectByName:function(a,b){for(var c=0,d=this.children.length;c<d;c++){var e=this.children[c];if(e.name===a||!0===b&&(e=e.getObjectByName(a,b),void 0!==e))return e}},getChildByName:function(a,b){console.warn("DEPRECATED: Object3D's .getChildByName() has been renamed to .getObjectByName().");
return this.getObjectByName(a,b)},getDescendants:function(a){void 0===a&&(a=[]);Array.prototype.push.apply(a,this.children);for(var b=0,c=this.children.length;b<c;b++)this.children[b].getDescendants(a);return a},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){!0===this.matrixAutoUpdate&&this.updateMatrix();if(!0===this.matrixWorldNeedsUpdate||!0===a)void 0===this.parent?this.matrixWorld.copy(this.matrix):
this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0;for(var b=0,c=this.children.length;b<c;b++)this.children[b].updateMatrixWorld(a)},clone:function(a,b){void 0===a&&(a=new THREE.Object3D);void 0===b&&(b=!0);a.name=this.name;a.up.copy(this.up);a.position.copy(this.position);a.quaternion.copy(this.quaternion);a.scale.copy(this.scale);a.renderDepth=this.renderDepth;a.rotationAutoUpdate=this.rotationAutoUpdate;a.matrix.copy(this.matrix);a.matrixWorld.copy(this.matrixWorld);
a.matrixAutoUpdate=this.matrixAutoUpdate;a.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate;a.visible=this.visible;a.castShadow=this.castShadow;a.receiveShadow=this.receiveShadow;a.frustumCulled=this.frustumCulled;a.userData=JSON.parse(JSON.stringify(this.userData));if(!0===b)for(var c=0;c<this.children.length;c++)a.add(this.children[c].clone());return a}};THREE.EventDispatcher.prototype.apply(THREE.Object3D.prototype);THREE.Object3DIdCount=0;THREE.Projector=function(){function a(){if(i===m){var a=new THREE.RenderableVertex;k.push(a);m++;i++;return a}return k[i++]}function b(a,b){return a.z!==b.z?b.z-a.z:a.id!==b.id?a.id-b.id:0}function c(a,b){var c=0,d=1,e=a.z+a.w,f=b.z+b.w,h=-a.z+a.w,g=-b.z+b.w;if(0<=e&&0<=f&&0<=h&&0<=g)return!0;if(0>e&&0>f||0>h&&0>g)return!1;0>e?c=Math.max(c,e/(e-f)):0>f&&(d=Math.min(d,e/(e-f)));0>h?c=Math.max(c,h/(h-g)):0>g&&(d=Math.min(d,h/(h-g)));if(d<c)return!1;a.lerp(b,c);b.lerp(a,1-d);return!0}var d,e,f=[],h=
0,g,i,k=[],m=0,l,p,t=[],s=0,q,n,u=[],r=0,v,z,G=[],w=0,y={objects:[],sprites:[],lights:[],elements:[]},E=new THREE.Vector3,A=new THREE.Vector4,K=new THREE.Box3(new THREE.Vector3(-1,-1,-1),new THREE.Vector3(1,1,1)),D=new THREE.Box3,F=Array(3),O=new THREE.Matrix4,x=new THREE.Matrix4,I,B=new THREE.Matrix4,M=new THREE.Matrix3,J=new THREE.Matrix3,ca=new THREE.Vector3,na=new THREE.Frustum,pa=new THREE.Vector4,C=new THREE.Vector4;this.projectVector=function(a,b){b.matrixWorldInverse.getInverse(b.matrixWorld);
x.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse);return a.applyProjection(x)};this.unprojectVector=function(a,b){b.projectionMatrixInverse.getInverse(b.projectionMatrix);x.multiplyMatrices(b.matrixWorld,b.projectionMatrixInverse);return a.applyProjection(x)};this.pickingRay=function(a,b){a.z=-1;var c=new THREE.Vector3(a.x,a.y,1);this.unprojectVector(a,b);this.unprojectVector(c,b);c.sub(a).normalize();return new THREE.Raycaster(a,c)};var Q=function(a){if(e===h){var b=new THREE.RenderableObject;
f.push(b);h++;e++;d=b}else d=f[e++];d.id=a.id;d.object=a;null!==a.renderDepth?d.z=a.renderDepth:(E.setFromMatrixPosition(a.matrixWorld),E.applyProjection(x),d.z=E.z);return d},R=function(a){if(!1!==a.visible){a instanceof THREE.Light?y.lights.push(a):a instanceof THREE.Mesh||a instanceof THREE.Line?(!1===a.frustumCulled||!0===na.intersectsObject(a))&&y.objects.push(Q(a)):a instanceof THREE.Sprite&&y.sprites.push(Q(a));for(var b=0,c=a.children.length;b<c;b++)R(a.children[b])}};this.projectScene=function(d,
f,h,m){var E=!1,Q,$,ea,V,P,Y,U,ja,sa,ha,Ka,Ga;z=n=p=0;y.elements.length=0;!0===d.autoUpdate&&d.updateMatrixWorld();void 0===f.parent&&f.updateMatrixWorld();O.copy(f.matrixWorldInverse.getInverse(f.matrixWorld));x.multiplyMatrices(f.projectionMatrix,O);J.getNormalMatrix(O);na.setFromMatrix(x);e=0;y.objects.length=0;y.sprites.length=0;y.lights.length=0;R(d);!0===h&&y.objects.sort(b);d=0;for(h=y.objects.length;d<h;d++)if(U=y.objects[d].object,I=U.matrixWorld,i=0,U instanceof THREE.Mesh){ja=U.geometry;
ea=ja.vertices;sa=ja.faces;ja=ja.faceVertexUvs;M.getNormalMatrix(I);Ka=U.material instanceof THREE.MeshFaceMaterial;Ga=!0===Ka?U.material:null;Q=0;for($=ea.length;Q<$;Q++){g=a();g.positionWorld.copy(ea[Q]).applyMatrix4(I);g.positionScreen.copy(g.positionWorld).applyMatrix4(x);var ka=1/g.positionScreen.w;g.positionScreen.x*=ka;g.positionScreen.y*=ka;g.positionScreen.z*=ka;g.visible=!(-1>g.positionScreen.x||1<g.positionScreen.x||-1>g.positionScreen.y||1<g.positionScreen.y||-1>g.positionScreen.z||1<
g.positionScreen.z)}ea=0;for(Q=sa.length;ea<Q;ea++)if($=sa[ea],ka=!0===Ka?Ga.materials[$.materialIndex]:U.material,void 0!==ka&&(Y=ka.side,V=k[$.a],P=k[$.b],ha=k[$.c],F[0]=V.positionScreen,F[1]=P.positionScreen,F[2]=ha.positionScreen,!0===V.visible||!0===P.visible||!0===ha.visible||K.isIntersectionBox(D.setFromPoints(F))))if(E=0>(ha.positionScreen.x-V.positionScreen.x)*(P.positionScreen.y-V.positionScreen.y)-(ha.positionScreen.y-V.positionScreen.y)*(P.positionScreen.x-V.positionScreen.x),Y===THREE.DoubleSide||
E===(Y===THREE.FrontSide)){if(p===s){var Da=new THREE.RenderableFace3;t.push(Da);s++;p++;l=Da}else l=t[p++];l.id=U.id;l.v1.copy(V);l.v2.copy(P);l.v3.copy(ha);l.normalModel.copy($.normal);!1===E&&(Y===THREE.BackSide||Y===THREE.DoubleSide)&&l.normalModel.negate();l.normalModel.applyMatrix3(M).normalize();l.normalModelView.copy(l.normalModel).applyMatrix3(J);l.centroidModel.copy($.centroid).applyMatrix4(I);ha=$.vertexNormals;V=0;for(P=Math.min(ha.length,3);V<P;V++)Da=l.vertexNormalsModel[V],Da.copy(ha[V]),
!1===E&&(Y===THREE.BackSide||Y===THREE.DoubleSide)&&Da.negate(),Da.applyMatrix3(M).normalize(),l.vertexNormalsModelView[V].copy(Da).applyMatrix3(J);l.vertexNormalsLength=ha.length;E=0;for(V=Math.min(ja.length,3);E<V;E++)if(ha=ja[E][ea],void 0!==ha){P=0;for(Y=ha.length;P<Y;P++)l.uvs[E][P]=ha[P]}l.color=$.color;l.material=ka;ca.copy(l.centroidModel).applyProjection(x);l.z=ca.z;y.elements.push(l)}}else if(U instanceof THREE.Line){B.multiplyMatrices(x,I);ea=U.geometry.vertices;V=a();V.positionScreen.copy(ea[0]).applyMatrix4(B);
sa=U.type===THREE.LinePieces?2:1;Q=1;for($=ea.length;Q<$;Q++)V=a(),V.positionScreen.copy(ea[Q]).applyMatrix4(B),0<(Q+1)%sa||(P=k[i-2],pa.copy(V.positionScreen),C.copy(P.positionScreen),!0===c(pa,C)&&(pa.multiplyScalar(1/pa.w),C.multiplyScalar(1/C.w),n===r?(ja=new THREE.RenderableLine,u.push(ja),r++,n++,q=ja):q=u[n++],q.id=U.id,q.v1.positionScreen.copy(pa),q.v2.positionScreen.copy(C),q.z=Math.max(pa.z,C.z),q.material=U.material,U.material.vertexColors===THREE.VertexColors&&(q.vertexColors[0].copy(U.geometry.colors[Q]),
q.vertexColors[1].copy(U.geometry.colors[Q-1])),y.elements.push(q)))}d=0;for(h=y.sprites.length;d<h;d++)U=y.sprites[d].object,I=U.matrixWorld,A.set(I.elements[12],I.elements[13],I.elements[14],1),A.applyMatrix4(x),ka=1/A.w,A.z*=ka,-1<=A.z&&1>=A.z&&(z===w?(sa=new THREE.RenderableSprite,G.push(sa),w++,z++,v=sa):v=G[z++],v.id=U.id,v.x=A.x*ka,v.y=A.y*ka,v.z=A.z,v.object=U,v.rotation=U.rotation,v.scale.x=U.scale.x*Math.abs(v.x-(A.x+f.projectionMatrix.elements[0])/(A.w+f.projectionMatrix.elements[12])),
v.scale.y=U.scale.y*Math.abs(v.y-(A.y+f.projectionMatrix.elements[5])/(A.w+f.projectionMatrix.elements[13])),v.material=U.material,y.elements.push(v));!0===m&&y.elements.sort(b);return y}};THREE.Face3=function(a,b,c,d,e,f){this.a=a;this.b=b;this.c=c;this.normal=d instanceof THREE.Vector3?d:new THREE.Vector3;this.vertexNormals=d instanceof Array?d:[];this.color=e instanceof THREE.Color?e:new THREE.Color;this.vertexColors=e instanceof Array?e:[];this.vertexTangents=[];this.materialIndex=void 0!==f?f:0;this.centroid=new THREE.Vector3};
THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){var a=new THREE.Face3(this.a,this.b,this.c);a.normal.copy(this.normal);a.color.copy(this.color);a.centroid.copy(this.centroid);a.materialIndex=this.materialIndex;var b,c;b=0;for(c=this.vertexNormals.length;b<c;b++)a.vertexNormals[b]=this.vertexNormals[b].clone();b=0;for(c=this.vertexColors.length;b<c;b++)a.vertexColors[b]=this.vertexColors[b].clone();b=0;for(c=this.vertexTangents.length;b<c;b++)a.vertexTangents[b]=this.vertexTangents[b].clone();
return a}};THREE.Face4=function(a,b,c,d,e,f,h){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new THREE.Face3(a,b,c,e,f,h)};THREE.Geometry=function(){this.id=THREE.GeometryIdCount++;this.uuid=THREE.Math.generateUUID();this.name="";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphColors=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.hasTangents=!1;this.dynamic=!0;this.buffersNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.tangentsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=
this.elementsNeedUpdate=this.verticesNeedUpdate=!1};
THREE.Geometry.prototype={constructor:THREE.Geometry,applyMatrix:function(a){for(var b=(new THREE.Matrix3).getNormalMatrix(a),c=0,d=this.vertices.length;c<d;c++)this.vertices[c].applyMatrix4(a);c=0;for(d=this.faces.length;c<d;c++){var e=this.faces[c];e.normal.applyMatrix3(b).normalize();for(var f=0,h=e.vertexNormals.length;f<h;f++)e.vertexNormals[f].applyMatrix3(b).normalize();e.centroid.applyMatrix4(a)}this.boundingBox instanceof THREE.Box3&&this.computeBoundingBox();this.boundingSphere instanceof
THREE.Sphere&&this.computeBoundingSphere()},computeCentroids:function(){var a,b,c;a=0;for(b=this.faces.length;a<b;a++)c=this.faces[a],c.centroid.set(0,0,0),c.centroid.add(this.vertices[c.a]),c.centroid.add(this.vertices[c.b]),c.centroid.add(this.vertices[c.c]),c.centroid.divideScalar(3)},computeFaceNormals:function(){for(var a=new THREE.Vector3,b=new THREE.Vector3,c=0,d=this.faces.length;c<d;c++){var e=this.faces[c],f=this.vertices[e.a],h=this.vertices[e.b];a.subVectors(this.vertices[e.c],h);b.subVectors(f,
h);a.cross(b);a.normalize();e.normal.copy(a)}},computeVertexNormals:function(a){var b,c,d,e;if(void 0===this.__tmpVertices){e=this.__tmpVertices=Array(this.vertices.length);b=0;for(c=this.vertices.length;b<c;b++)e[b]=new THREE.Vector3;b=0;for(c=this.faces.length;b<c;b++)d=this.faces[b],d.vertexNormals=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3]}else{e=this.__tmpVertices;b=0;for(c=this.vertices.length;b<c;b++)e[b].set(0,0,0)}if(a){var f,h,g=new THREE.Vector3,i=new THREE.Vector3;new THREE.Vector3;
new THREE.Vector3;new THREE.Vector3;b=0;for(c=this.faces.length;b<c;b++)d=this.faces[b],a=this.vertices[d.a],f=this.vertices[d.b],h=this.vertices[d.c],g.subVectors(h,f),i.subVectors(a,f),g.cross(i),e[d.a].add(g),e[d.b].add(g),e[d.c].add(g)}else{b=0;for(c=this.faces.length;b<c;b++)d=this.faces[b],e[d.a].add(d.normal),e[d.b].add(d.normal),e[d.c].add(d.normal)}b=0;for(c=this.vertices.length;b<c;b++)e[b].normalize();b=0;for(c=this.faces.length;b<c;b++)d=this.faces[b],d.vertexNormals[0].copy(e[d.a]),d.vertexNormals[1].copy(e[d.b]),
d.vertexNormals[2].copy(e[d.c])},computeMorphNormals:function(){var a,b,c,d,e;c=0;for(d=this.faces.length;c<d;c++){e=this.faces[c];e.__originalFaceNormal?e.__originalFaceNormal.copy(e.normal):e.__originalFaceNormal=e.normal.clone();e.__originalVertexNormals||(e.__originalVertexNormals=[]);a=0;for(b=e.vertexNormals.length;a<b;a++)e.__originalVertexNormals[a]?e.__originalVertexNormals[a].copy(e.vertexNormals[a]):e.__originalVertexNormals[a]=e.vertexNormals[a].clone()}var f=new THREE.Geometry;f.faces=
this.faces;a=0;for(b=this.morphTargets.length;a<b;a++){if(!this.morphNormals[a]){this.morphNormals[a]={};this.morphNormals[a].faceNormals=[];this.morphNormals[a].vertexNormals=[];e=this.morphNormals[a].faceNormals;var h=this.morphNormals[a].vertexNormals,g,i;c=0;for(d=this.faces.length;c<d;c++)g=new THREE.Vector3,i={a:new THREE.Vector3,b:new THREE.Vector3,c:new THREE.Vector3},e.push(g),h.push(i)}h=this.morphNormals[a];f.vertices=this.morphTargets[a].vertices;f.computeFaceNormals();f.computeVertexNormals();
c=0;for(d=this.faces.length;c<d;c++)e=this.faces[c],g=h.faceNormals[c],i=h.vertexNormals[c],g.copy(e.normal),i.a.copy(e.vertexNormals[0]),i.b.copy(e.vertexNormals[1]),i.c.copy(e.vertexNormals[2])}c=0;for(d=this.faces.length;c<d;c++)e=this.faces[c],e.normal=e.__originalFaceNormal,e.vertexNormals=e.__originalVertexNormals},computeTangents:function(){var a,b,c,d,e,f,h,g,i,k,m,l,p,t,s,q,n,u=[],r=[];c=new THREE.Vector3;var v=new THREE.Vector3,z=new THREE.Vector3,G=new THREE.Vector3,w=new THREE.Vector3;
a=0;for(b=this.vertices.length;a<b;a++)u[a]=new THREE.Vector3,r[a]=new THREE.Vector3;a=0;for(b=this.faces.length;a<b;a++)e=this.faces[a],f=this.faceVertexUvs[0][a],d=e.a,n=e.b,e=e.c,h=this.vertices[d],g=this.vertices[n],i=this.vertices[e],k=f[0],m=f[1],l=f[2],f=g.x-h.x,p=i.x-h.x,t=g.y-h.y,s=i.y-h.y,g=g.z-h.z,h=i.z-h.z,i=m.x-k.x,q=l.x-k.x,m=m.y-k.y,k=l.y-k.y,l=1/(i*k-q*m),c.set((k*f-m*p)*l,(k*t-m*s)*l,(k*g-m*h)*l),v.set((i*p-q*f)*l,(i*s-q*t)*l,(i*h-q*g)*l),u[d].add(c),u[n].add(c),u[e].add(c),r[d].add(v),
r[n].add(v),r[e].add(v);v=["a","b","c","d"];a=0;for(b=this.faces.length;a<b;a++){e=this.faces[a];for(c=0;c<Math.min(e.vertexNormals.length,3);c++)w.copy(e.vertexNormals[c]),d=e[v[c]],n=u[d],z.copy(n),z.sub(w.multiplyScalar(w.dot(n))).normalize(),G.crossVectors(e.vertexNormals[c],n),d=G.dot(r[d]),d=0>d?-1:1,e.vertexTangents[c]=new THREE.Vector4(z.x,z.y,z.z,d)}this.hasTangents=!0},computeLineDistances:function(){for(var a=0,b=this.vertices,c=0,d=b.length;c<d;c++)0<c&&(a+=b[c].distanceTo(b[c-1])),this.lineDistances[c]=
a},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);this.boundingSphere.setFromPoints(this.vertices)},mergeVertices:function(){var a={},b=[],c=[],d,e=Math.pow(10,4),f,h;this.__tmpVertices=void 0;f=0;for(h=this.vertices.length;f<h;f++)d=this.vertices[f],d=Math.round(d.x*e)+"_"+Math.round(d.y*e)+"_"+Math.round(d.z*
e),void 0===a[d]?(a[d]=f,b.push(this.vertices[f]),c[f]=b.length-1):c[f]=c[a[d]];a=[];f=0;for(h=this.faces.length;f<h;f++){e=this.faces[f];e.a=c[e.a];e.b=c[e.b];e.c=c[e.c];e=[e.a,e.b,e.c];for(d=0;3>d;d++)if(e[d]==e[(d+1)%3]){a.push(f);break}}for(f=a.length-1;0<=f;f--){e=a[f];this.faces.splice(e,1);c=0;for(h=this.faceVertexUvs.length;c<h;c++)this.faceVertexUvs[c].splice(e,1)}f=this.vertices.length-b.length;this.vertices=b;return f},clone:function(){for(var a=new THREE.Geometry,b=this.vertices,c=0,d=
b.length;c<d;c++)a.vertices.push(b[c].clone());b=this.faces;c=0;for(d=b.length;c<d;c++)a.faces.push(b[c].clone());b=this.faceVertexUvs[0];c=0;for(d=b.length;c<d;c++){for(var e=b[c],f=[],h=0,g=e.length;h<g;h++)f.push(new THREE.Vector2(e[h].x,e[h].y));a.faceVertexUvs[0].push(f)}return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.Geometry.prototype);THREE.GeometryIdCount=0;THREE.BufferGeometry=function(){this.id=THREE.GeometryIdCount++;this.uuid=THREE.Math.generateUUID();this.name="";this.attributes={};this.dynamic=!0;this.offsets=[];this.boundingSphere=this.boundingBox=null;this.hasTangents=!1;this.morphTargets=[]};
THREE.BufferGeometry.prototype={constructor:THREE.BufferGeometry,addAttribute:function(a,b,c,d){this.attributes[a]={itemSize:d,array:new b(c*d)}},applyMatrix:function(a){var b,c;this.attributes.position&&(b=this.attributes.position.array);this.attributes.normal&&(c=this.attributes.normal.array);void 0!==b&&(a.multiplyVector3Array(b),this.verticesNeedUpdate=!0);void 0!==c&&((new THREE.Matrix3).getNormalMatrix(a).multiplyVector3Array(c),this.normalizeNormals(),this.normalsNeedUpdate=!0)},computeBoundingBox:function(){null===
this.boundingBox&&(this.boundingBox=new THREE.Box3);var a=this.attributes.position.array;if(a){var b=this.boundingBox,c,d,e;3<=a.length&&(b.min.x=b.max.x=a[0],b.min.y=b.max.y=a[1],b.min.z=b.max.z=a[2]);for(var f=3,h=a.length;f<h;f+=3)c=a[f],d=a[f+1],e=a[f+2],c<b.min.x?b.min.x=c:c>b.max.x&&(b.max.x=c),d<b.min.y?b.min.y=d:d>b.max.y&&(b.max.y=d),e<b.min.z?b.min.z=e:e>b.max.z&&(b.max.z=e)}if(void 0===a||0===a.length)this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0)},computeBoundingSphere:function(){var a=
new THREE.Box3,b=new THREE.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var c=this.attributes.position.array;if(c){for(var d=this.boundingSphere.center,e=0,f=c.length;e<f;e+=3)b.set(c[e],c[e+1],c[e+2]),a.addPoint(b);a.center(d);for(var h=0,e=0,f=c.length;e<f;e+=3)b.set(c[e],c[e+1],c[e+2]),h=Math.max(h,d.distanceToSquared(b));this.boundingSphere.radius=Math.sqrt(h)}}}(),computeVertexNormals:function(){if(this.attributes.position){var a,b,c,d;a=this.attributes.position.array.length;
if(void 0===this.attributes.normal)this.attributes.normal={itemSize:3,array:new Float32Array(a)};else{a=0;for(b=this.attributes.normal.array.length;a<b;a++)this.attributes.normal.array[a]=0}var e=this.attributes.position.array,f=this.attributes.normal.array,h,g,i,k,m,l,p=new THREE.Vector3,t=new THREE.Vector3,s=new THREE.Vector3,q=new THREE.Vector3,n=new THREE.Vector3;if(this.attributes.index){var u=this.attributes.index.array,r=this.offsets;c=0;for(d=r.length;c<d;++c){b=r[c].start;h=r[c].count;var v=
r[c].index;a=b;for(b+=h;a<b;a+=3)h=v+u[a],g=v+u[a+1],i=v+u[a+2],k=e[3*h],m=e[3*h+1],l=e[3*h+2],p.set(k,m,l),k=e[3*g],m=e[3*g+1],l=e[3*g+2],t.set(k,m,l),k=e[3*i],m=e[3*i+1],l=e[3*i+2],s.set(k,m,l),q.subVectors(s,t),n.subVectors(p,t),q.cross(n),f[3*h]+=q.x,f[3*h+1]+=q.y,f[3*h+2]+=q.z,f[3*g]+=q.x,f[3*g+1]+=q.y,f[3*g+2]+=q.z,f[3*i]+=q.x,f[3*i+1]+=q.y,f[3*i+2]+=q.z}}else{a=0;for(b=e.length;a<b;a+=9)k=e[a],m=e[a+1],l=e[a+2],p.set(k,m,l),k=e[a+3],m=e[a+4],l=e[a+5],t.set(k,m,l),k=e[a+6],m=e[a+7],l=e[a+8],
s.set(k,m,l),q.subVectors(s,t),n.subVectors(p,t),q.cross(n),f[a]=q.x,f[a+1]=q.y,f[a+2]=q.z,f[a+3]=q.x,f[a+4]=q.y,f[a+5]=q.z,f[a+6]=q.x,f[a+7]=q.y,f[a+8]=q.z}this.normalizeNormals();this.normalsNeedUpdate=!0}},normalizeNormals:function(){for(var a=this.attributes.normal.array,b,c,d,e=0,f=a.length;e<f;e+=3)b=a[e],c=a[e+1],d=a[e+2],b=1/Math.sqrt(b*b+c*c+d*d),a[e]*=b,a[e+1]*=b,a[e+2]*=b},computeTangents:function(){function a(a){na.x=d[3*a];na.y=d[3*a+1];na.z=d[3*a+2];pa.copy(na);Q=g[a];J.copy(Q);J.sub(na.multiplyScalar(na.dot(Q))).normalize();
ca.crossVectors(pa,Q);R=ca.dot(i[a]);C=0>R?-1:1;h[4*a]=J.x;h[4*a+1]=J.y;h[4*a+2]=J.z;h[4*a+3]=C}if(void 0===this.attributes.index||void 0===this.attributes.position||void 0===this.attributes.normal||void 0===this.attributes.uv)console.warn("Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");else{var b=this.attributes.index.array,c=this.attributes.position.array,d=this.attributes.normal.array,e=this.attributes.uv.array,f=c.length/3;void 0===this.attributes.tangent&&
(this.attributes.tangent={itemSize:4,array:new Float32Array(4*f)});for(var h=this.attributes.tangent.array,g=[],i=[],k=0;k<f;k++)g[k]=new THREE.Vector3,i[k]=new THREE.Vector3;var m,l,p,t,s,q,n,u,r,v,z,G,w,y,E,f=new THREE.Vector3,k=new THREE.Vector3,A,K,D,F,O,x,I,B=this.offsets;D=0;for(F=B.length;D<F;++D){K=B[D].start;O=B[D].count;var M=B[D].index;A=K;for(K+=O;A<K;A+=3)O=M+b[A],x=M+b[A+1],I=M+b[A+2],m=c[3*O],l=c[3*O+1],p=c[3*O+2],t=c[3*x],s=c[3*x+1],q=c[3*x+2],n=c[3*I],u=c[3*I+1],r=c[3*I+2],v=e[2*
O],z=e[2*O+1],G=e[2*x],w=e[2*x+1],y=e[2*I],E=e[2*I+1],t-=m,m=n-m,s-=l,l=u-l,q-=p,p=r-p,G-=v,v=y-v,w-=z,z=E-z,E=1/(G*z-v*w),f.set((z*t-w*m)*E,(z*s-w*l)*E,(z*q-w*p)*E),k.set((G*m-v*t)*E,(G*l-v*s)*E,(G*p-v*q)*E),g[O].add(f),g[x].add(f),g[I].add(f),i[O].add(k),i[x].add(k),i[I].add(k)}var J=new THREE.Vector3,ca=new THREE.Vector3,na=new THREE.Vector3,pa=new THREE.Vector3,C,Q,R;D=0;for(F=B.length;D<F;++D){K=B[D].start;O=B[D].count;M=B[D].index;A=K;for(K+=O;A<K;A+=3)O=M+b[A],x=M+b[A+1],I=M+b[A+2],a(O),a(x),
a(I)}this.tangentsNeedUpdate=this.hasTangents=!0}},clone:function(){var a=new THREE.BufferGeometry,b=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],c;for(c in this.attributes){for(var d=this.attributes[c],e=d.array,f={itemSize:d.itemSize,numItems:d.numItems,array:null},d=0,h=b.length;d<h;d++){var g=b[d];if(e instanceof g){f.array=new g(e);break}}a.attributes[c]=f}d=0;for(h=this.offsets.length;d<h;d++)b=this.offsets[d],a.offsets.push({start:b.start,
index:b.index,count:b.count});return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.BufferGeometry.prototype);THREE.Camera=function(){THREE.Object3D.call(this);this.matrixWorldInverse=new THREE.Matrix4;this.projectionMatrix=new THREE.Matrix4;this.projectionMatrixInverse=new THREE.Matrix4};THREE.Camera.prototype=Object.create(THREE.Object3D.prototype);THREE.Camera.prototype.lookAt=function(){var a=new THREE.Matrix4;return function(b){a.lookAt(this.position,b,this.up);this.quaternion.setFromRotationMatrix(a)}}();
THREE.Camera.prototype.clone=function(a){void 0===a&&(a=new THREE.Camera);THREE.Object3D.prototype.clone.call(this,a);a.matrixWorldInverse.copy(this.matrixWorldInverse);a.projectionMatrix.copy(this.projectionMatrix);a.projectionMatrixInverse.copy(this.projectionMatrixInverse);return a};THREE.OrthographicCamera=function(a,b,c,d,e,f){THREE.Camera.call(this);this.left=a;this.right=b;this.top=c;this.bottom=d;this.near=void 0!==e?e:0.1;this.far=void 0!==f?f:2E3;this.updateProjectionMatrix()};THREE.OrthographicCamera.prototype=Object.create(THREE.Camera.prototype);THREE.OrthographicCamera.prototype.updateProjectionMatrix=function(){this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far)};
THREE.OrthographicCamera.prototype.clone=function(){var a=new THREE.OrthographicCamera;THREE.Camera.prototype.clone.call(this,a);a.left=this.left;a.right=this.right;a.top=this.top;a.bottom=this.bottom;a.near=this.near;a.far=this.far;return a};THREE.PerspectiveCamera=function(a,b,c,d){THREE.Camera.call(this);this.fov=void 0!==a?a:50;this.aspect=void 0!==b?b:1;this.near=void 0!==c?c:0.1;this.far=void 0!==d?d:2E3;this.updateProjectionMatrix()};THREE.PerspectiveCamera.prototype=Object.create(THREE.Camera.prototype);THREE.PerspectiveCamera.prototype.setLens=function(a,b){void 0===b&&(b=24);this.fov=2*THREE.Math.radToDeg(Math.atan(b/(2*a)));this.updateProjectionMatrix()};
THREE.PerspectiveCamera.prototype.setViewOffset=function(a,b,c,d,e,f){this.fullWidth=a;this.fullHeight=b;this.x=c;this.y=d;this.width=e;this.height=f;this.updateProjectionMatrix()};
THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){if(this.fullWidth){var a=this.fullWidth/this.fullHeight,b=Math.tan(THREE.Math.degToRad(0.5*this.fov))*this.near,c=-b,d=a*c,a=Math.abs(a*b-d),c=Math.abs(b-c);this.projectionMatrix.makeFrustum(d+this.x*a/this.fullWidth,d+(this.x+this.width)*a/this.fullWidth,b-(this.y+this.height)*c/this.fullHeight,b-this.y*c/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far)};
THREE.PerspectiveCamera.prototype.clone=function(){var a=new THREE.PerspectiveCamera;THREE.Camera.prototype.clone.call(this,a);a.fov=this.fov;a.aspect=this.aspect;a.near=this.near;a.far=this.far;return a};THREE.Light=function(a){THREE.Object3D.call(this);this.color=new THREE.Color(a)};THREE.Light.prototype=Object.create(THREE.Object3D.prototype);THREE.Light.prototype.clone=function(a){void 0===a&&(a=new THREE.Light);THREE.Object3D.prototype.clone.call(this,a);a.color.copy(this.color);return a};THREE.AmbientLight=function(a){THREE.Light.call(this,a)};THREE.AmbientLight.prototype=Object.create(THREE.Light.prototype);THREE.AmbientLight.prototype.clone=function(){var a=new THREE.AmbientLight;THREE.Light.prototype.clone.call(this,a);return a};THREE.AreaLight=function(a,b){THREE.Light.call(this,a);this.normal=new THREE.Vector3(0,-1,0);this.right=new THREE.Vector3(1,0,0);this.intensity=void 0!==b?b:1;this.height=this.width=1;this.constantAttenuation=1.5;this.linearAttenuation=0.5;this.quadraticAttenuation=0.1};THREE.AreaLight.prototype=Object.create(THREE.Light.prototype);THREE.DirectionalLight=function(a,b){THREE.Light.call(this,a);this.position.set(0,1,0);this.target=new THREE.Object3D;this.intensity=void 0!==b?b:1;this.onlyShadow=this.castShadow=!1;this.shadowCameraNear=50;this.shadowCameraFar=5E3;this.shadowCameraLeft=-500;this.shadowCameraTop=this.shadowCameraRight=500;this.shadowCameraBottom=-500;this.shadowCameraVisible=!1;this.shadowBias=0;this.shadowDarkness=0.5;this.shadowMapHeight=this.shadowMapWidth=512;this.shadowCascade=!1;this.shadowCascadeOffset=new THREE.Vector3(0,
0,-1E3);this.shadowCascadeCount=2;this.shadowCascadeBias=[0,0,0];this.shadowCascadeWidth=[512,512,512];this.shadowCascadeHeight=[512,512,512];this.shadowCascadeNearZ=[-1,0.99,0.998];this.shadowCascadeFarZ=[0.99,0.998,1];this.shadowCascadeArray=[];this.shadowMatrix=this.shadowCamera=this.shadowMapSize=this.shadowMap=null};THREE.DirectionalLight.prototype=Object.create(THREE.Light.prototype);
THREE.DirectionalLight.prototype.clone=function(){var a=new THREE.DirectionalLight;THREE.Light.prototype.clone.call(this,a);a.target=this.target.clone();a.intensity=this.intensity;a.castShadow=this.castShadow;a.onlyShadow=this.onlyShadow;return a};THREE.HemisphereLight=function(a,b,c){THREE.Light.call(this,a);this.position.set(0,100,0);this.groundColor=new THREE.Color(b);this.intensity=void 0!==c?c:1};THREE.HemisphereLight.prototype=Object.create(THREE.Light.prototype);THREE.HemisphereLight.prototype.clone=function(){var a=new THREE.HemisphereLight;THREE.Light.prototype.clone.call(this,a);a.groundColor.copy(this.groundColor);a.intensity=this.intensity;return a};THREE.PointLight=function(a,b,c){THREE.Light.call(this,a);this.intensity=void 0!==b?b:1;this.distance=void 0!==c?c:0};THREE.PointLight.prototype=Object.create(THREE.Light.prototype);THREE.PointLight.prototype.clone=function(){var a=new THREE.PointLight;THREE.Light.prototype.clone.call(this,a);a.intensity=this.intensity;a.distance=this.distance;return a};THREE.SpotLight=function(a,b,c,d,e){THREE.Light.call(this,a);this.position.set(0,1,0);this.target=new THREE.Object3D;this.intensity=void 0!==b?b:1;this.distance=void 0!==c?c:0;this.angle=void 0!==d?d:Math.PI/3;this.exponent=void 0!==e?e:10;this.onlyShadow=this.castShadow=!1;this.shadowCameraNear=50;this.shadowCameraFar=5E3;this.shadowCameraFov=50;this.shadowCameraVisible=!1;this.shadowBias=0;this.shadowDarkness=0.5;this.shadowMapHeight=this.shadowMapWidth=512;this.shadowMatrix=this.shadowCamera=this.shadowMapSize=
this.shadowMap=null};THREE.SpotLight.prototype=Object.create(THREE.Light.prototype);THREE.SpotLight.prototype.clone=function(){var a=new THREE.SpotLight;THREE.Light.prototype.clone.call(this,a);a.target=this.target.clone();a.intensity=this.intensity;a.distance=this.distance;a.angle=this.angle;a.exponent=this.exponent;a.castShadow=this.castShadow;a.onlyShadow=this.onlyShadow;return a};THREE.Loader=function(a){this.statusDomElement=(this.showStatus=a)?THREE.Loader.prototype.addStatusElement():null;this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){}};
THREE.Loader.prototype={constructor:THREE.Loader,crossOrigin:"anonymous",addStatusElement:function(){var a=document.createElement("div");a.style.position="absolute";a.style.right="0px";a.style.top="0px";a.style.fontSize="0.8em";a.style.textAlign="left";a.style.background="rgba(0,0,0,0.25)";a.style.color="#fff";a.style.width="120px";a.style.padding="0.5em 0.5em 0.5em 0.5em";a.style.zIndex=1E3;a.innerHTML="Loading ...";return a},updateProgress:function(a){var b="Loaded ",b=a.total?b+((100*a.loaded/
a.total).toFixed(0)+"%"):b+((a.loaded/1E3).toFixed(2)+" KB");this.statusDomElement.innerHTML=b},extractUrlBase:function(a){a=a.split("/");a.pop();return(1>a.length?".":a.join("/"))+"/"},initMaterials:function(a,b){for(var c=[],d=0;d<a.length;++d)c[d]=THREE.Loader.prototype.createMaterial(a[d],b);return c},needsTangents:function(a){for(var b=0,c=a.length;b<c;b++)if(a[b]instanceof THREE.ShaderMaterial)return!0;return!1},createMaterial:function(a,b){function c(a){a=Math.log(a)/Math.LN2;return Math.floor(a)==
a}function d(a){a=Math.log(a)/Math.LN2;return Math.pow(2,Math.round(a))}function e(a,e,f,g,i,k,n){var u=/\.dds$/i.test(f),r=b+"/"+f;if(u){var v=THREE.ImageUtils.loadCompressedTexture(r);a[e]=v}else v=document.createElement("canvas"),a[e]=new THREE.Texture(v);a[e].sourceFile=f;g&&(a[e].repeat.set(g[0],g[1]),1!==g[0]&&(a[e].wrapS=THREE.RepeatWrapping),1!==g[1]&&(a[e].wrapT=THREE.RepeatWrapping));i&&a[e].offset.set(i[0],i[1]);k&&(f={repeat:THREE.RepeatWrapping,mirror:THREE.MirroredRepeatWrapping},void 0!==
f[k[0]]&&(a[e].wrapS=f[k[0]]),void 0!==f[k[1]]&&(a[e].wrapT=f[k[1]]));n&&(a[e].anisotropy=n);if(!u){var z=a[e],a=new Image;a.onload=function(){if(!c(this.width)||!c(this.height)){var a=d(this.width),b=d(this.height);z.image.width=a;z.image.height=b;z.image.getContext("2d").drawImage(this,0,0,a,b)}else z.image=this;z.needsUpdate=!0};a.crossOrigin=h.crossOrigin;a.src=r}}function f(a){return(255*a[0]<<16)+(255*a[1]<<8)+255*a[2]}var h=this,g="MeshLambertMaterial",i={color:15658734,opacity:1,map:null,
lightMap:null,normalMap:null,bumpMap:null,wireframe:!1};if(a.shading){var k=a.shading.toLowerCase();"phong"===k?g="MeshPhongMaterial":"basic"===k&&(g="MeshBasicMaterial")}void 0!==a.blending&&void 0!==THREE[a.blending]&&(i.blending=THREE[a.blending]);if(void 0!==a.transparent||1>a.opacity)i.transparent=a.transparent;void 0!==a.depthTest&&(i.depthTest=a.depthTest);void 0!==a.depthWrite&&(i.depthWrite=a.depthWrite);void 0!==a.visible&&(i.visible=a.visible);void 0!==a.flipSided&&(i.side=THREE.BackSide);
void 0!==a.doubleSided&&(i.side=THREE.DoubleSide);void 0!==a.wireframe&&(i.wireframe=a.wireframe);void 0!==a.vertexColors&&("face"===a.vertexColors?i.vertexColors=THREE.FaceColors:a.vertexColors&&(i.vertexColors=THREE.VertexColors));a.colorDiffuse?i.color=f(a.colorDiffuse):a.DbgColor&&(i.color=a.DbgColor);a.colorSpecular&&(i.specular=f(a.colorSpecular));a.colorAmbient&&(i.ambient=f(a.colorAmbient));a.transparency&&(i.opacity=a.transparency);a.specularCoef&&(i.shininess=a.specularCoef);a.mapDiffuse&&
b&&e(i,"map",a.mapDiffuse,a.mapDiffuseRepeat,a.mapDiffuseOffset,a.mapDiffuseWrap,a.mapDiffuseAnisotropy);a.mapLight&&b&&e(i,"lightMap",a.mapLight,a.mapLightRepeat,a.mapLightOffset,a.mapLightWrap,a.mapLightAnisotropy);a.mapBump&&b&&e(i,"bumpMap",a.mapBump,a.mapBumpRepeat,a.mapBumpOffset,a.mapBumpWrap,a.mapBumpAnisotropy);a.mapNormal&&b&&e(i,"normalMap",a.mapNormal,a.mapNormalRepeat,a.mapNormalOffset,a.mapNormalWrap,a.mapNormalAnisotropy);a.mapSpecular&&b&&e(i,"specularMap",a.mapSpecular,a.mapSpecularRepeat,
a.mapSpecularOffset,a.mapSpecularWrap,a.mapSpecularAnisotropy);a.mapBumpScale&&(i.bumpScale=a.mapBumpScale);a.mapNormal?(g=THREE.ShaderLib.normalmap,k=THREE.UniformsUtils.clone(g.uniforms),k.tNormal.value=i.normalMap,a.mapNormalFactor&&k.uNormalScale.value.set(a.mapNormalFactor,a.mapNormalFactor),i.map&&(k.tDiffuse.value=i.map,k.enableDiffuse.value=!0),i.specularMap&&(k.tSpecular.value=i.specularMap,k.enableSpecular.value=!0),i.lightMap&&(k.tAO.value=i.lightMap,k.enableAO.value=!0),k.uDiffuseColor.value.setHex(i.color),
k.uSpecularColor.value.setHex(i.specular),k.uAmbientColor.value.setHex(i.ambient),k.uShininess.value=i.shininess,void 0!==i.opacity&&(k.uOpacity.value=i.opacity),g=new THREE.ShaderMaterial({fragmentShader:g.fragmentShader,vertexShader:g.vertexShader,uniforms:k,lights:!0,fog:!0}),i.transparent&&(g.transparent=!0)):g=new THREE[g](i);void 0!==a.DbgName&&(g.name=a.DbgName);return g}};THREE.XHRLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.XHRLoader.prototype={constructor:THREE.XHRLoader,load:function(a,b,c,d){var e=this,f=new XMLHttpRequest;void 0!==b&&f.addEventListener("load",function(c){b(c.target.responseText);e.manager.itemEnd(a)},!1);void 0!==c&&f.addEventListener("progress",function(a){c(a)},!1);void 0!==d&&f.addEventListener("error",function(a){d(a)},!1);void 0!==this.crossOrigin&&(f.crossOrigin=this.crossOrigin);f.open("GET",a,!0);f.send(null);e.manager.itemStart(a)},setCrossOrigin:function(a){this.crossOrigin=a}};THREE.ImageLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.ImageLoader.prototype={constructor:THREE.ImageLoader,load:function(a,b,c,d){var e=this,f=document.createElement("img");void 0!==b&&f.addEventListener("load",function(){e.manager.itemEnd(a);b(this)},!1);void 0!==c&&f.addEventListener("progress",function(a){c(a)},!1);void 0!==d&&f.addEventListener("error",function(a){d(a)},!1);void 0!==this.crossOrigin&&(f.crossOrigin=this.crossOrigin);f.src=a;e.manager.itemStart(a);return f},setCrossOrigin:function(a){this.crossOrigin=a}};THREE.JSONLoader=function(a){THREE.Loader.call(this,a);this.withCredentials=!1};THREE.JSONLoader.prototype=Object.create(THREE.Loader.prototype);THREE.JSONLoader.prototype.load=function(a,b,c){c=c&&"string"===typeof c?c:this.extractUrlBase(a);this.onLoadStart();this.loadAjaxJSON(this,a,b,c)};
THREE.JSONLoader.prototype.loadAjaxJSON=function(a,b,c,d,e){var f=new XMLHttpRequest,h=0;f.onreadystatechange=function(){if(f.readyState===f.DONE)if(200===f.status||0===f.status){if(f.responseText){var g=JSON.parse(f.responseText),g=a.parse(g,d);c(g.geometry,g.materials)}else console.warn("THREE.JSONLoader: ["+b+"] seems to be unreachable or file there is empty");a.onLoadComplete()}else console.error("THREE.JSONLoader: Couldn't load ["+b+"] ["+f.status+"]");else f.readyState===f.LOADING?e&&(0===h&&
(h=f.getResponseHeader("Content-Length")),e({total:h,loaded:f.responseText.length})):f.readyState===f.HEADERS_RECEIVED&&void 0!==e&&(h=f.getResponseHeader("Content-Length"))};f.open("GET",b,!0);f.withCredentials=this.withCredentials;f.send(null)};
THREE.JSONLoader.prototype.parse=function(a,b){var c=new THREE.Geometry,d=void 0!==a.scale?1/a.scale:1,e,f,h,g,i,k,m,l,p,t,s,q,n,u,r=a.faces;p=a.vertices;var v=a.normals,z=a.colors,G=0;if(void 0!==a.uvs){for(e=0;e<a.uvs.length;e++)a.uvs[e].length&&G++;for(e=0;e<G;e++)c.faceVertexUvs[e]=[]}g=0;for(i=p.length;g<i;)k=new THREE.Vector3,k.x=p[g++]*d,k.y=p[g++]*d,k.z=p[g++]*d,c.vertices.push(k);g=0;for(i=r.length;g<i;)if(p=r[g++],t=p&1,h=p&2,e=p&8,m=p&16,s=p&32,k=p&64,p&=128,t){t=new THREE.Face3;t.a=r[g];
t.b=r[g+1];t.c=r[g+3];q=new THREE.Face3;q.a=r[g+1];q.b=r[g+2];q.c=r[g+3];g+=4;h&&(h=r[g++],t.materialIndex=h,q.materialIndex=h);h=c.faces.length;if(e)for(e=0;e<G;e++){n=a.uvs[e];c.faceVertexUvs[e][h]=[];c.faceVertexUvs[e][h+1]=[];for(f=0;4>f;f++)l=r[g++],u=n[2*l],l=n[2*l+1],u=new THREE.Vector2(u,l),2!==f&&c.faceVertexUvs[e][h].push(u),0!==f&&c.faceVertexUvs[e][h+1].push(u)}m&&(m=3*r[g++],t.normal.set(v[m++],v[m++],v[m]),q.normal.copy(t.normal));if(s)for(e=0;4>e;e++)m=3*r[g++],s=new THREE.Vector3(v[m++],
v[m++],v[m]),2!==e&&t.vertexNormals.push(s),0!==e&&q.vertexNormals.push(s);k&&(k=r[g++],k=z[k],t.color.setHex(k),q.color.setHex(k));if(p)for(e=0;4>e;e++)k=r[g++],k=z[k],2!==e&&t.vertexColors.push(new THREE.Color(k)),0!==e&&q.vertexColors.push(new THREE.Color(k));c.faces.push(t);c.faces.push(q)}else{t=new THREE.Face3;t.a=r[g++];t.b=r[g++];t.c=r[g++];h&&(h=r[g++],t.materialIndex=h);h=c.faces.length;if(e)for(e=0;e<G;e++){n=a.uvs[e];c.faceVertexUvs[e][h]=[];for(f=0;3>f;f++)l=r[g++],u=n[2*l],l=n[2*l+1],
u=new THREE.Vector2(u,l),c.faceVertexUvs[e][h].push(u)}m&&(m=3*r[g++],t.normal.set(v[m++],v[m++],v[m]));if(s)for(e=0;3>e;e++)m=3*r[g++],s=new THREE.Vector3(v[m++],v[m++],v[m]),t.vertexNormals.push(s);k&&(k=r[g++],t.color.setHex(z[k]));if(p)for(e=0;3>e;e++)k=r[g++],t.vertexColors.push(new THREE.Color(z[k]));c.faces.push(t)}if(a.skinWeights){g=0;for(i=a.skinWeights.length;g<i;g+=2)r=a.skinWeights[g],v=a.skinWeights[g+1],c.skinWeights.push(new THREE.Vector4(r,v,0,0))}if(a.skinIndices){g=0;for(i=a.skinIndices.length;g<
i;g+=2)r=a.skinIndices[g],v=a.skinIndices[g+1],c.skinIndices.push(new THREE.Vector4(r,v,0,0))}c.bones=a.bones;c.animation=a.animation;c.animations=a.animations;if(void 0!==a.morphTargets){g=0;for(i=a.morphTargets.length;g<i;g++){c.morphTargets[g]={};c.morphTargets[g].name=a.morphTargets[g].name;c.morphTargets[g].vertices=[];z=c.morphTargets[g].vertices;G=a.morphTargets[g].vertices;r=0;for(v=G.length;r<v;r+=3)p=new THREE.Vector3,p.x=G[r]*d,p.y=G[r+1]*d,p.z=G[r+2]*d,z.push(p)}}if(void 0!==a.morphColors){g=
0;for(i=a.morphColors.length;g<i;g++){c.morphColors[g]={};c.morphColors[g].name=a.morphColors[g].name;c.morphColors[g].colors=[];v=c.morphColors[g].colors;z=a.morphColors[g].colors;d=0;for(r=z.length;d<r;d+=3)G=new THREE.Color(16755200),G.setRGB(z[d],z[d+1],z[d+2]),v.push(G)}}c.computeCentroids();c.computeFaceNormals();c.computeBoundingSphere();if(void 0===a.materials)return{geometry:c};d=this.initMaterials(a.materials,b);this.needsTangents(d)&&c.computeTangents();return{geometry:c,materials:d}};THREE.LoadingManager=function(a,b,c){var d=this,e=0,f=0;this.onLoad=a;this.onProgress=b;this.onError=c;this.itemStart=function(){f++};this.itemEnd=function(a){e++;if(void 0!==d.onProgress)d.onProgress(a,e,f);if(e===f&&void 0!==d.onLoad)d.onLoad()}};THREE.DefaultLoadingManager=new THREE.LoadingManager;THREE.BufferGeometryLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.BufferGeometryLoader.prototype={constructor:THREE.BufferGeometryLoader,load:function(a,b){var c=this,d=new THREE.XHRLoader;d.setCrossOrigin(this.crossOrigin);d.load(a,function(a){b(c.parse(JSON.parse(a)))})},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a){var b=new THREE.BufferGeometry,c=a.attributes,d=a.offsets,a=a.boundingSphere,e;for(e in c){var f=c[e];b.attributes[e]={itemSize:f.itemSize,array:new self[f.type](f.array)}}void 0!==d&&(b.offsets=JSON.parse(JSON.stringify(d)));
void 0!==a&&(b.boundingSphere=new THREE.Sphere((new THREE.Vector3).fromArray(void 0!==a.center?a.center:[0,0,0]),a.radius));return b}};THREE.GeometryLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};THREE.GeometryLoader.prototype={constructor:THREE.GeometryLoader,load:function(a,b){var c=this,d=new THREE.XHRLoader;d.setCrossOrigin(this.crossOrigin);d.load(a,function(a){b(c.parse(JSON.parse(a)))})},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(){}};THREE.MaterialLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.MaterialLoader.prototype={constructor:THREE.MaterialLoader,load:function(a,b){var c=this,d=new THREE.XHRLoader;d.setCrossOrigin(this.crossOrigin);d.load(a,function(a){b(c.parse(JSON.parse(a)))})},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a){var b=new THREE[a.type];void 0!==a.color&&b.color.setHex(a.color);void 0!==a.ambient&&b.ambient.setHex(a.ambient);void 0!==a.emissive&&b.emissive.setHex(a.emissive);void 0!==a.specular&&b.specular.setHex(a.specular);void 0!==a.shininess&&
(b.shininess=a.shininess);void 0!==a.vertexColors&&(b.vertexColors=a.vertexColors);void 0!==a.blending&&(b.blending=a.blending);void 0!==a.side&&(b.side=a.side);void 0!==a.opacity&&(b.opacity=a.opacity);void 0!==a.transparent&&(b.transparent=a.transparent);void 0!==a.wireframe&&(b.wireframe=a.wireframe);if(void 0!==a.materials)for(var c=0,d=a.materials.length;c<d;c++)b.materials.push(this.parse(a.materials[c]));return b}};THREE.ObjectLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.ObjectLoader.prototype={constructor:THREE.ObjectLoader,load:function(a,b){var c=this,d=new THREE.XHRLoader(c.manager);d.setCrossOrigin(this.crossOrigin);d.load(a,function(a){b(c.parse(JSON.parse(a)))})},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a){var b=this.parseGeometries(a.geometries),c=this.parseMaterials(a.materials);return this.parseObject(a.object,b,c)},parseGeometries:function(a){var b={};if(void 0!==a)for(var c=new THREE.JSONLoader,d=new THREE.BufferGeometryLoader,
e=0,f=a.length;e<f;e++){var h,g=a[e];switch(g.type){case "PlaneGeometry":h=new THREE.PlaneGeometry(g.width,g.height,g.widthSegments,g.heightSegments);break;case "CircleGeometry":h=new THREE.CircleGeometry(g.radius,g.segments);break;case "CubeGeometry":h=new THREE.CubeGeometry(g.width,g.height,g.depth,g.widthSegments,g.heightSegments,g.depthSegments);break;case "CylinderGeometry":h=new THREE.CylinderGeometry(g.radiusTop,g.radiusBottom,g.height,g.radialSegments,g.heightSegments,g.openEnded);break;case "SphereGeometry":h=
new THREE.SphereGeometry(g.radius,g.widthSegments,g.heightSegments,g.phiStart,g.phiLength,g.thetaStart,g.thetaLength);break;case "IcosahedronGeometry":h=new THREE.IcosahedronGeometry(g.radius,g.detail);break;case "TorusGeometry":h=new THREE.TorusGeometry(g.radius,g.tube,g.radialSegments,g.tubularSegments,g.arc);break;case "TorusKnotGeometry":h=new THREE.TorusKnotGeometry(g.radius,g.tube,g.radialSegments,g.tubularSegments,g.p,g.q,g.heightScale);break;case "BufferGeometry":h=d.parse(g.data);break;case "Geometry":h=
c.parse(g.data).geometry}h.uuid=g.uuid;void 0!==g.name&&(h.name=g.name);b[g.uuid]=h}return b},parseMaterials:function(a){var b={};if(void 0!==a)for(var c=new THREE.MaterialLoader,d=0,e=a.length;d<e;d++){var f=a[d],h=c.parse(f);h.uuid=f.uuid;void 0!==f.name&&(h.name=f.name);b[f.uuid]=h}return b},parseObject:function(){var a=new THREE.Matrix4;return function(b,c,d){var e;switch(b.type){case "Scene":e=new THREE.Scene;break;case "PerspectiveCamera":e=new THREE.PerspectiveCamera(b.fov,b.aspect,b.near,
b.far);break;case "OrthographicCamera":e=new THREE.OrthographicCamera(b.left,b.right,b.top,b.bottom,b.near,b.far);break;case "AmbientLight":e=new THREE.AmbientLight(b.color);break;case "DirectionalLight":e=new THREE.DirectionalLight(b.color,b.intensity);break;case "PointLight":e=new THREE.PointLight(b.color,b.intensity,b.distance);break;case "SpotLight":e=new THREE.SpotLight(b.color,b.intensity,b.distance,b.angle,b.exponent);break;case "HemisphereLight":e=new THREE.HemisphereLight(b.color,b.groundColor,
b.intensity);break;case "Mesh":e=c[b.geometry];var f=d[b.material];void 0===e&&console.error("THREE.ObjectLoader: Undefined geometry "+b.geometry);void 0===f&&console.error("THREE.ObjectLoader: Undefined material "+b.material);e=new THREE.Mesh(e,f);break;case "Sprite":f=d[b.material];void 0===f&&console.error("THREE.ObjectLoader: Undefined material "+b.material);e=new THREE.Sprite(f);break;default:e=new THREE.Object3D}e.uuid=b.uuid;void 0!==b.name&&(e.name=b.name);void 0!==b.matrix?(a.fromArray(b.matrix),
a.decompose(e.position,e.quaternion,e.scale)):(void 0!==b.position&&e.position.fromArray(b.position),void 0!==b.rotation&&e.rotation.fromArray(b.rotation),void 0!==b.scale&&e.scale.fromArray(b.scale));void 0!==b.visible&&(e.visible=b.visible);void 0!==b.userData&&(e.userData=b.userData);if(void 0!==b.children)for(var h in b.children)e.add(this.parseObject(b.children[h],c,d));return e}}()};THREE.SceneLoader=function(){this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){};this.callbackSync=function(){};this.callbackProgress=function(){};this.geometryHandlers={};this.hierarchyHandlers={};this.addGeometryHandler("ascii",THREE.JSONLoader)};
THREE.SceneLoader.prototype={constructor:THREE.SceneLoader,load:function(a,b){var c=this,d=new THREE.XHRLoader(c.manager);d.setCrossOrigin(this.crossOrigin);d.load(a,function(d){c.parse(JSON.parse(d),b,a)})},setCrossOrigin:function(a){this.crossOrigin=a},addGeometryHandler:function(a,b){this.geometryHandlers[a]={loaderClass:b}},addHierarchyHandler:function(a,b){this.hierarchyHandlers[a]={loaderClass:b}},parse:function(a,b,c){function d(a,b){return"relativeToHTML"==b?a:p+"/"+a}function e(){f(y.scene,
A.objects)}function f(a,b){var c,e,h,i,k,m;for(m in b){var p=y.objects[m],n=b[m];if(void 0===p){if(n.type&&n.type in l.hierarchyHandlers){if(void 0===n.loading){c={type:1,url:1,material:1,position:1,rotation:1,scale:1,visible:1,children:1,userData:1,skin:1,morph:1,mirroredLoop:1,duration:1};var u={},v;for(v in n)v in c||(u[v]=n[v]);s=y.materials[n.material];n.loading=!0;c=l.hierarchyHandlers[n.type].loaderObject;c.options?c.load(d(n.url,A.urlBaseType),g(m,a,s,n)):c.load(d(n.url,A.urlBaseType),g(m,
a,s,n),u)}}else if(void 0!==n.geometry){if(t=y.geometries[n.geometry]){p=!1;s=y.materials[n.material];p=s instanceof THREE.ShaderMaterial;e=n.position;h=n.rotation;i=n.scale;c=n.matrix;k=n.quaternion;n.material||(s=new THREE.MeshFaceMaterial(y.face_materials[n.geometry]));s instanceof THREE.MeshFaceMaterial&&0===s.materials.length&&(s=new THREE.MeshFaceMaterial(y.face_materials[n.geometry]));if(s instanceof THREE.MeshFaceMaterial)for(u=0;u<s.materials.length;u++)p=p||s.materials[u]instanceof THREE.ShaderMaterial;
p&&t.computeTangents();n.skin?p=new THREE.SkinnedMesh(t,s):n.morph?(p=new THREE.MorphAnimMesh(t,s),void 0!==n.duration&&(p.duration=n.duration),void 0!==n.time&&(p.time=n.time),void 0!==n.mirroredLoop&&(p.mirroredLoop=n.mirroredLoop),s.morphNormals&&t.computeMorphNormals()):p=new THREE.Mesh(t,s);p.name=m;c?(p.matrixAutoUpdate=!1,p.matrix.set(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15])):(p.position.fromArray(e),k?p.quaternion.fromArray(k):p.rotation.fromArray(h),
p.scale.fromArray(i));p.visible=n.visible;p.castShadow=n.castShadow;p.receiveShadow=n.receiveShadow;a.add(p);y.objects[m]=p}}else if("AmbientLight"===n.type||"PointLight"===n.type||"DirectionalLight"===n.type||"SpotLight"===n.type||"HemisphereLight"===n.type||"AreaLight"===n.type){u=n.color;c=n.intensity;e=n.distance;h=n.position;i=n.rotation;switch(n.type){case "AmbientLight":r=new THREE.AmbientLight(u);break;case "PointLight":r=new THREE.PointLight(u,c,e);r.position.fromArray(h);break;case "DirectionalLight":r=
new THREE.DirectionalLight(u,c);r.position.fromArray(n.direction);break;case "SpotLight":r=new THREE.SpotLight(u,c,e,1);r.angle=n.angle;r.position.fromArray(h);r.target.set(h[0],h[1]-e,h[2]);r.target.applyEuler(new THREE.Euler(i[0],i[1],i[2],"XYZ"));break;case "HemisphereLight":r=new THREE.DirectionalLight(u,c,e);r.target.set(h[0],h[1]-e,h[2]);r.target.applyEuler(new THREE.Euler(i[0],i[1],i[2],"XYZ"));break;case "AreaLight":r=new THREE.AreaLight(u,c),r.position.fromArray(h),r.width=n.size,r.height=
n.size_y}a.add(r);r.name=m;y.lights[m]=r;y.objects[m]=r}else"PerspectiveCamera"===n.type||"OrthographicCamera"===n.type?(e=n.position,h=n.rotation,k=n.quaternion,"PerspectiveCamera"===n.type?q=new THREE.PerspectiveCamera(n.fov,n.aspect,n.near,n.far):"OrthographicCamera"===n.type&&(q=new THREE.OrthographicCamera(n.left,n.right,n.top,n.bottom,n.near,n.far)),q.name=m,q.position.fromArray(e),void 0!==k?q.quaternion.fromArray(k):void 0!==h&&q.rotation.fromArray(h),a.add(q),y.cameras[m]=q,y.objects[m]=
q):(e=n.position,h=n.rotation,i=n.scale,k=n.quaternion,p=new THREE.Object3D,p.name=m,p.position.fromArray(e),k?p.quaternion.fromArray(k):p.rotation.fromArray(h),p.scale.fromArray(i),p.visible=void 0!==n.visible?n.visible:!1,a.add(p),y.objects[m]=p,y.empties[m]=p);if(p){if(void 0!==n.userData)for(var z in n.userData)p.userData[z]=n.userData[z];if(void 0!==n.groups)for(u=0;u<n.groups.length;u++)c=n.groups[u],void 0===y.groups[c]&&(y.groups[c]=[]),y.groups[c].push(m)}}void 0!==p&&void 0!==n.children&&
f(p,n.children)}}function h(a){return function(b,c){b.name=a;y.geometries[a]=b;y.face_materials[a]=c;e();v-=1;l.onLoadComplete();k()}}function g(a,b,c,d){return function(f){var f=f.content?f.content:f.dae?f.scene:f,h=d.rotation,g=d.quaternion,i=d.scale;f.position.fromArray(d.position);g?f.quaternion.fromArray(g):f.rotation.fromArray(h);f.scale.fromArray(i);c&&f.traverse(function(a){a.material=c});var m=void 0!==d.visible?d.visible:!0;f.traverse(function(a){a.visible=m});b.add(f);f.name=a;y.objects[a]=
f;e();v-=1;l.onLoadComplete();k()}}function i(a){return function(b,c){b.name=a;y.geometries[a]=b;y.face_materials[a]=c}}function k(){l.callbackProgress({totalModels:G,totalTextures:w,loadedModels:G-v,loadedTextures:w-z},y);l.onLoadProgress();if(0===v&&0===z){for(var a=0;a<E.length;a++){var c=E[a],d=y.objects[c.targetName];d?c.object.target=d:(c.object.target=new THREE.Object3D,y.scene.add(c.object.target));c.object.target.userData.targetInverse=c.object}b(y)}}function m(a,b){b(a);if(void 0!==a.children)for(var c in a.children)m(a.children[c],
b)}var l=this,p=THREE.Loader.prototype.extractUrlBase(c),t,s,q,n,u,r,v,z,G,w,y,E=[],A=a,K;for(K in this.geometryHandlers)a=this.geometryHandlers[K].loaderClass,this.geometryHandlers[K].loaderObject=new a;for(K in this.hierarchyHandlers)a=this.hierarchyHandlers[K].loaderClass,this.hierarchyHandlers[K].loaderObject=new a;z=v=0;y={scene:new THREE.Scene,geometries:{},face_materials:{},materials:{},textures:{},objects:{},cameras:{},lights:{},fogs:{},empties:{},groups:{}};if(A.transform&&(K=A.transform.position,
a=A.transform.rotation,c=A.transform.scale,K&&y.scene.position.fromArray(K),a&&y.scene.rotation.fromArray(a),c&&y.scene.scale.fromArray(c),K||a||c))y.scene.updateMatrix(),y.scene.updateMatrixWorld();K=function(a){return function(){z-=a;k();l.onLoadComplete()}};for(var D in A.fogs)a=A.fogs[D],"linear"===a.type?n=new THREE.Fog(0,a.near,a.far):"exp2"===a.type&&(n=new THREE.FogExp2(0,a.density)),a=a.color,n.color.setRGB(a[0],a[1],a[2]),y.fogs[D]=n;for(var F in A.geometries)n=A.geometries[F],n.type in
this.geometryHandlers&&(v+=1,l.onLoadStart());for(var O in A.objects)m(A.objects[O],function(a){a.type&&a.type in l.hierarchyHandlers&&(v+=1,l.onLoadStart())});G=v;for(F in A.geometries)if(n=A.geometries[F],"cube"===n.type)t=new THREE.CubeGeometry(n.width,n.height,n.depth,n.widthSegments,n.heightSegments,n.depthSegments),t.name=F,y.geometries[F]=t;else if("plane"===n.type)t=new THREE.PlaneGeometry(n.width,n.height,n.widthSegments,n.heightSegments),t.name=F,y.geometries[F]=t;else if("sphere"===n.type)t=
new THREE.SphereGeometry(n.radius,n.widthSegments,n.heightSegments),t.name=F,y.geometries[F]=t;else if("cylinder"===n.type)t=new THREE.CylinderGeometry(n.topRad,n.botRad,n.height,n.radSegs,n.heightSegs),t.name=F,y.geometries[F]=t;else if("torus"===n.type)t=new THREE.TorusGeometry(n.radius,n.tube,n.segmentsR,n.segmentsT),t.name=F,y.geometries[F]=t;else if("icosahedron"===n.type)t=new THREE.IcosahedronGeometry(n.radius,n.subdivisions),t.name=F,y.geometries[F]=t;else if(n.type in this.geometryHandlers){O=
{};for(u in n)"type"!==u&&"url"!==u&&(O[u]=n[u]);this.geometryHandlers[n.type].loaderObject.load(d(n.url,A.urlBaseType),h(F),O)}else"embedded"===n.type&&(O=A.embeds[n.id],O.metadata=A.metadata,O&&(O=this.geometryHandlers.ascii.loaderObject.parse(O,""),i(F)(O.geometry,O.materials)));for(var x in A.textures)if(F=A.textures[x],F.url instanceof Array){z+=F.url.length;for(u=0;u<F.url.length;u++)l.onLoadStart()}else z+=1,l.onLoadStart();w=z;for(x in A.textures){F=A.textures[x];void 0!==F.mapping&&void 0!==
THREE[F.mapping]&&(F.mapping=new THREE[F.mapping]);if(F.url instanceof Array){O=F.url.length;n=[];for(u=0;u<O;u++)n[u]=d(F.url[u],A.urlBaseType);u=(u=/\.dds$/i.test(n[0]))?THREE.ImageUtils.loadCompressedTextureCube(n,F.mapping,K(O)):THREE.ImageUtils.loadTextureCube(n,F.mapping,K(O))}else u=/\.dds$/i.test(F.url),O=d(F.url,A.urlBaseType),n=K(1),u=u?THREE.ImageUtils.loadCompressedTexture(O,F.mapping,n):THREE.ImageUtils.loadTexture(O,F.mapping,n),void 0!==THREE[F.minFilter]&&(u.minFilter=THREE[F.minFilter]),
void 0!==THREE[F.magFilter]&&(u.magFilter=THREE[F.magFilter]),F.anisotropy&&(u.anisotropy=F.anisotropy),F.repeat&&(u.repeat.set(F.repeat[0],F.repeat[1]),1!==F.repeat[0]&&(u.wrapS=THREE.RepeatWrapping),1!==F.repeat[1]&&(u.wrapT=THREE.RepeatWrapping)),F.offset&&u.offset.set(F.offset[0],F.offset[1]),F.wrap&&(O={repeat:THREE.RepeatWrapping,mirror:THREE.MirroredRepeatWrapping},void 0!==O[F.wrap[0]]&&(u.wrapS=O[F.wrap[0]]),void 0!==O[F.wrap[1]]&&(u.wrapT=O[F.wrap[1]]));y.textures[x]=u}var I,B;for(I in A.materials){x=
A.materials[I];for(B in x.parameters)"envMap"===B||"map"===B||"lightMap"===B||"bumpMap"===B?x.parameters[B]=y.textures[x.parameters[B]]:"shading"===B?x.parameters[B]="flat"===x.parameters[B]?THREE.FlatShading:THREE.SmoothShading:"side"===B?x.parameters[B]="double"==x.parameters[B]?THREE.DoubleSide:"back"==x.parameters[B]?THREE.BackSide:THREE.FrontSide:"blending"===B?x.parameters[B]=x.parameters[B]in THREE?THREE[x.parameters[B]]:THREE.NormalBlending:"combine"===B?x.parameters[B]=x.parameters[B]in THREE?
THREE[x.parameters[B]]:THREE.MultiplyOperation:"vertexColors"===B?"face"==x.parameters[B]?x.parameters[B]=THREE.FaceColors:x.parameters[B]&&(x.parameters[B]=THREE.VertexColors):"wrapRGB"===B&&(K=x.parameters[B],x.parameters[B]=new THREE.Vector3(K[0],K[1],K[2]));void 0!==x.parameters.opacity&&1>x.parameters.opacity&&(x.parameters.transparent=!0);x.parameters.normalMap?(K=THREE.ShaderLib.normalmap,F=THREE.UniformsUtils.clone(K.uniforms),u=x.parameters.color,O=x.parameters.specular,n=x.parameters.ambient,
D=x.parameters.shininess,F.tNormal.value=y.textures[x.parameters.normalMap],x.parameters.normalScale&&F.uNormalScale.value.set(x.parameters.normalScale[0],x.parameters.normalScale[1]),x.parameters.map&&(F.tDiffuse.value=x.parameters.map,F.enableDiffuse.value=!0),x.parameters.envMap&&(F.tCube.value=x.parameters.envMap,F.enableReflection.value=!0,F.uReflectivity.value=x.parameters.reflectivity),x.parameters.lightMap&&(F.tAO.value=x.parameters.lightMap,F.enableAO.value=!0),x.parameters.specularMap&&
(F.tSpecular.value=y.textures[x.parameters.specularMap],F.enableSpecular.value=!0),x.parameters.displacementMap&&(F.tDisplacement.value=y.textures[x.parameters.displacementMap],F.enableDisplacement.value=!0,F.uDisplacementBias.value=x.parameters.displacementBias,F.uDisplacementScale.value=x.parameters.displacementScale),F.uDiffuseColor.value.setHex(u),F.uSpecularColor.value.setHex(O),F.uAmbientColor.value.setHex(n),F.uShininess.value=D,x.parameters.opacity&&(F.uOpacity.value=x.parameters.opacity),
s=new THREE.ShaderMaterial({fragmentShader:K.fragmentShader,vertexShader:K.vertexShader,uniforms:F,lights:!0,fog:!0})):s=new THREE[x.type](x.parameters);s.name=I;y.materials[I]=s}for(I in A.materials)if(x=A.materials[I],x.parameters.materials){B=[];for(u=0;u<x.parameters.materials.length;u++)B.push(y.materials[x.parameters.materials[u]]);y.materials[I].materials=B}e();y.cameras&&A.defaults.camera&&(y.currentCamera=y.cameras[A.defaults.camera]);y.fogs&&A.defaults.fog&&(y.scene.fog=y.fogs[A.defaults.fog]);
l.callbackSync(y);k()}};THREE.TextureLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};THREE.TextureLoader.prototype={constructor:THREE.TextureLoader,load:function(a,b){var c=new THREE.ImageLoader(this.manager);c.setCrossOrigin(this.crossOrigin);c.load(a,function(a){a=new THREE.Texture(a);a.needsUpdate=!0;void 0!==b&&b(a)})},setCrossOrigin:function(a){this.crossOrigin=a}};THREE.Material=function(){this.id=THREE.MaterialIdCount++;this.uuid=THREE.Math.generateUUID();this.name="";this.side=THREE.FrontSide;this.opacity=1;this.transparent=!1;this.blending=THREE.NormalBlending;this.blendSrc=THREE.SrcAlphaFactor;this.blendDst=THREE.OneMinusSrcAlphaFactor;this.blendEquation=THREE.AddEquation;this.depthWrite=this.depthTest=!0;this.polygonOffset=!1;this.overdraw=this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.needsUpdate=this.visible=!0};
THREE.Material.prototype={constructor:THREE.Material,setValues:function(a){if(void 0!==a)for(var b in a){var c=a[b];if(void 0===c)console.warn("THREE.Material: '"+b+"' parameter is undefined.");else if(b in this){var d=this[b];d instanceof THREE.Color?d.set(c):d instanceof THREE.Vector3&&c instanceof THREE.Vector3?d.copy(c):this[b]="overdraw"==b?Number(c):c}}},clone:function(a){void 0===a&&(a=new THREE.Material);a.name=this.name;a.side=this.side;a.opacity=this.opacity;a.transparent=this.transparent;
a.blending=this.blending;a.blendSrc=this.blendSrc;a.blendDst=this.blendDst;a.blendEquation=this.blendEquation;a.depthTest=this.depthTest;a.depthWrite=this.depthWrite;a.polygonOffset=this.polygonOffset;a.polygonOffsetFactor=this.polygonOffsetFactor;a.polygonOffsetUnits=this.polygonOffsetUnits;a.alphaTest=this.alphaTest;a.overdraw=this.overdraw;a.visible=this.visible;return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.Material.prototype);
THREE.MaterialIdCount=0;THREE.LineBasicMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.linewidth=1;this.linejoin=this.linecap="round";this.vertexColors=!1;this.fog=!0;this.setValues(a)};THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.LineBasicMaterial.prototype.clone=function(){var a=new THREE.LineBasicMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.linewidth=this.linewidth;a.linecap=this.linecap;a.linejoin=this.linejoin;a.vertexColors=this.vertexColors;a.fog=this.fog;return a};THREE.LineDashedMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.scale=this.linewidth=1;this.dashSize=3;this.gapSize=1;this.vertexColors=!1;this.fog=!0;this.setValues(a)};THREE.LineDashedMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.LineDashedMaterial.prototype.clone=function(){var a=new THREE.LineDashedMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.linewidth=this.linewidth;a.scale=this.scale;a.dashSize=this.dashSize;a.gapSize=this.gapSize;a.vertexColors=this.vertexColors;a.fog=this.fog;return a};THREE.MeshBasicMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.envMap=this.specularMap=this.lightMap=this.map=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=0.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=THREE.NoColors;this.morphTargets=this.skinning=!1;this.setValues(a)};
THREE.MeshBasicMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.MeshBasicMaterial.prototype.clone=function(){var a=new THREE.MeshBasicMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.map=this.map;a.lightMap=this.lightMap;a.specularMap=this.specularMap;a.envMap=this.envMap;a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;a.wireframeLinejoin=
this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;return a};THREE.MeshLambertMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.ambient=new THREE.Color(16777215);this.emissive=new THREE.Color(0);this.wrapAround=!1;this.wrapRGB=new THREE.Vector3(1,1,1);this.envMap=this.specularMap=this.lightMap=this.map=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=0.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap=
"round";this.vertexColors=THREE.NoColors;this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};THREE.MeshLambertMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.MeshLambertMaterial.prototype.clone=function(){var a=new THREE.MeshLambertMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.ambient.copy(this.ambient);a.emissive.copy(this.emissive);a.wrapAround=this.wrapAround;a.wrapRGB.copy(this.wrapRGB);a.map=this.map;a.lightMap=this.lightMap;a.specularMap=this.specularMap;a.envMap=this.envMap;a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;a.shading=this.shading;
a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;a.wireframeLinejoin=this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;a.morphNormals=this.morphNormals;return a};THREE.MeshPhongMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.ambient=new THREE.Color(16777215);this.emissive=new THREE.Color(0);this.specular=new THREE.Color(1118481);this.shininess=30;this.metal=!1;this.perPixel=!0;this.wrapAround=!1;this.wrapRGB=new THREE.Vector3(1,1,1);this.bumpMap=this.lightMap=this.map=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new THREE.Vector2(1,1);this.envMap=this.specularMap=null;this.combine=THREE.MultiplyOperation;
this.reflectivity=1;this.refractionRatio=0.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=THREE.NoColors;this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};THREE.MeshPhongMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.MeshPhongMaterial.prototype.clone=function(){var a=new THREE.MeshPhongMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.ambient.copy(this.ambient);a.emissive.copy(this.emissive);a.specular.copy(this.specular);a.shininess=this.shininess;a.metal=this.metal;a.perPixel=this.perPixel;a.wrapAround=this.wrapAround;a.wrapRGB.copy(this.wrapRGB);a.map=this.map;a.lightMap=this.lightMap;a.bumpMap=this.bumpMap;a.bumpScale=this.bumpScale;a.normalMap=this.normalMap;a.normalScale.copy(this.normalScale);
a.specularMap=this.specularMap;a.envMap=this.envMap;a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;a.wireframeLinejoin=this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;a.morphNormals=this.morphNormals;return a};THREE.MeshDepthMaterial=function(a){THREE.Material.call(this);this.wireframe=!1;this.wireframeLinewidth=1;this.setValues(a)};THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshDepthMaterial.prototype.clone=function(){var a=new THREE.MeshDepthMaterial;THREE.Material.prototype.clone.call(this,a);a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;return a};THREE.MeshNormalMaterial=function(a){THREE.Material.call(this,a);this.shading=THREE.FlatShading;this.wireframe=!1;this.wireframeLinewidth=1;this.morphTargets=!1;this.setValues(a)};THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshNormalMaterial.prototype.clone=function(){var a=new THREE.MeshNormalMaterial;THREE.Material.prototype.clone.call(this,a);a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;return a};THREE.MeshFaceMaterial=function(a){this.materials=a instanceof Array?a:[]};THREE.MeshFaceMaterial.prototype.clone=function(){for(var a=new THREE.MeshFaceMaterial,b=0;b<this.materials.length;b++)a.materials.push(this.materials[b].clone());return a};THREE.ParticleSystemMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.map=null;this.size=1;this.sizeAttenuation=!0;this.vertexColors=!1;this.fog=!0;this.setValues(a)};THREE.ParticleSystemMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.ParticleSystemMaterial.prototype.clone=function(){var a=new THREE.ParticleSystemMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.map=this.map;a.size=this.size;a.sizeAttenuation=this.sizeAttenuation;a.vertexColors=this.vertexColors;a.fog=this.fog;return a};THREE.ParticleBasicMaterial=THREE.ParticleSystemMaterial;THREE.ShaderMaterial=function(a){THREE.Material.call(this);this.vertexShader=this.fragmentShader="void main() {}";this.uniforms={};this.defines={};this.attributes=null;this.shading=THREE.SmoothShading;this.linewidth=1;this.wireframe=!1;this.wireframeLinewidth=1;this.lights=this.fog=!1;this.vertexColors=THREE.NoColors;this.morphNormals=this.morphTargets=this.skinning=!1;this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName="position";this.setValues(a)};
THREE.ShaderMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.ShaderMaterial.prototype.clone=function(){var a=new THREE.ShaderMaterial;THREE.Material.prototype.clone.call(this,a);a.fragmentShader=this.fragmentShader;a.vertexShader=this.vertexShader;a.uniforms=THREE.UniformsUtils.clone(this.uniforms);a.attributes=this.attributes;a.defines=this.defines;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.fog=this.fog;a.lights=this.lights;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=
this.morphTargets;a.morphNormals=this.morphNormals;return a};THREE.SpriteMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.map=null;this.rotation=0;this.fog=!1;this.uvOffset=new THREE.Vector2(0,0);this.uvScale=new THREE.Vector2(1,1);this.setValues(a)};THREE.SpriteMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.SpriteMaterial.prototype.clone=function(){var a=new THREE.SpriteMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.map=this.map;a.rotation=this.rotation;a.uvOffset.copy(this.uvOffset);a.uvScale.copy(this.uvScale);a.fog=this.fog;return a};THREE.SpriteCanvasMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.program=function(){};this.setValues(a)};THREE.SpriteCanvasMaterial.prototype=Object.create(THREE.Material.prototype);THREE.SpriteCanvasMaterial.prototype.clone=function(){var a=new THREE.SpriteCanvasMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.program=this.program;return a};THREE.ParticleCanvasMaterial=THREE.SpriteCanvasMaterial;THREE.Texture=function(a,b,c,d,e,f,h,g,i){this.id=THREE.TextureIdCount++;this.uuid=THREE.Math.generateUUID();this.name="";this.image=a;this.mipmaps=[];this.mapping=void 0!==b?b:new THREE.UVMapping;this.wrapS=void 0!==c?c:THREE.ClampToEdgeWrapping;this.wrapT=void 0!==d?d:THREE.ClampToEdgeWrapping;this.magFilter=void 0!==e?e:THREE.LinearFilter;this.minFilter=void 0!==f?f:THREE.LinearMipMapLinearFilter;this.anisotropy=void 0!==i?i:1;this.format=void 0!==h?h:THREE.RGBAFormat;this.type=void 0!==g?g:THREE.UnsignedByteType;
this.offset=new THREE.Vector2(0,0);this.repeat=new THREE.Vector2(1,1);this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.needsUpdate=!1;this.onUpdate=null};
THREE.Texture.prototype={constructor:THREE.Texture,clone:function(a){void 0===a&&(a=new THREE.Texture);a.image=this.image;a.mipmaps=this.mipmaps.slice(0);a.mapping=this.mapping;a.wrapS=this.wrapS;a.wrapT=this.wrapT;a.magFilter=this.magFilter;a.minFilter=this.minFilter;a.anisotropy=this.anisotropy;a.format=this.format;a.type=this.type;a.offset.copy(this.offset);a.repeat.copy(this.repeat);a.generateMipmaps=this.generateMipmaps;a.premultiplyAlpha=this.premultiplyAlpha;a.flipY=this.flipY;a.unpackAlignment=
this.unpackAlignment;return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.Texture.prototype);THREE.TextureIdCount=0;THREE.CompressedTexture=function(a,b,c,d,e,f,h,g,i,k,m){THREE.Texture.call(this,null,f,h,g,i,k,d,e,m);this.image={width:b,height:c};this.mipmaps=a;this.generateMipmaps=!1};THREE.CompressedTexture.prototype=Object.create(THREE.Texture.prototype);THREE.CompressedTexture.prototype.clone=function(){var a=new THREE.CompressedTexture;THREE.Texture.prototype.clone.call(this,a);return a};THREE.DataTexture=function(a,b,c,d,e,f,h,g,i,k,m){THREE.Texture.call(this,null,f,h,g,i,k,d,e,m);this.image={data:a,width:b,height:c}};THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype);THREE.DataTexture.prototype.clone=function(){var a=new THREE.DataTexture;THREE.Texture.prototype.clone.call(this,a);return a};THREE.ParticleSystem=function(a,b){THREE.Object3D.call(this);this.geometry=void 0!==a?a:new THREE.Geometry;this.material=void 0!==b?b:new THREE.ParticleSystemMaterial({color:16777215*Math.random()});this.frustumCulled=this.sortParticles=!1};THREE.ParticleSystem.prototype=Object.create(THREE.Object3D.prototype);
THREE.ParticleSystem.prototype.clone=function(a){void 0===a&&(a=new THREE.ParticleSystem(this.geometry,this.material));a.sortParticles=this.sortParticles;THREE.Object3D.prototype.clone.call(this,a);return a};THREE.Line=function(a,b,c){THREE.Object3D.call(this);this.geometry=void 0!==a?a:new THREE.Geometry;this.material=void 0!==b?b:new THREE.LineBasicMaterial({color:16777215*Math.random()});this.type=void 0!==c?c:THREE.LineStrip};THREE.LineStrip=0;THREE.LinePieces=1;THREE.Line.prototype=Object.create(THREE.Object3D.prototype);THREE.Line.prototype.clone=function(a){void 0===a&&(a=new THREE.Line(this.geometry,this.material,this.type));THREE.Object3D.prototype.clone.call(this,a);return a};THREE.Mesh=function(a,b){THREE.Object3D.call(this);this.geometry=void 0!==a?a:new THREE.Geometry;this.material=void 0!==b?b:new THREE.MeshBasicMaterial({color:16777215*Math.random()});this.updateMorphTargets()};THREE.Mesh.prototype=Object.create(THREE.Object3D.prototype);
THREE.Mesh.prototype.updateMorphTargets=function(){if(0<this.geometry.morphTargets.length){this.morphTargetBase=-1;this.morphTargetForcedOrder=[];this.morphTargetInfluences=[];this.morphTargetDictionary={};for(var a=0,b=this.geometry.morphTargets.length;a<b;a++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[a].name]=a}};
THREE.Mesh.prototype.getMorphTargetIndexByName=function(a){if(void 0!==this.morphTargetDictionary[a])return this.morphTargetDictionary[a];console.log("THREE.Mesh.getMorphTargetIndexByName: morph target "+a+" does not exist. Returning 0.");return 0};THREE.Mesh.prototype.clone=function(a){void 0===a&&(a=new THREE.Mesh(this.geometry,this.material));THREE.Object3D.prototype.clone.call(this,a);return a};THREE.Bone=function(a){THREE.Object3D.call(this);this.skin=a;this.skinMatrix=new THREE.Matrix4};THREE.Bone.prototype=Object.create(THREE.Object3D.prototype);THREE.Bone.prototype.update=function(a,b){this.matrixAutoUpdate&&(b|=this.updateMatrix());if(b||this.matrixWorldNeedsUpdate)a?this.skinMatrix.multiplyMatrices(a,this.matrix):this.skinMatrix.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,b=!0;var c,d=this.children.length;for(c=0;c<d;c++)this.children[c].update(this.skinMatrix,b)};THREE.SkinnedMesh=function(a,b,c){THREE.Mesh.call(this,a,b);this.useVertexTexture=void 0!==c?c:!0;this.identityMatrix=new THREE.Matrix4;this.bones=[];this.boneMatrices=[];var d,e,f;if(this.geometry&&void 0!==this.geometry.bones){for(a=0;a<this.geometry.bones.length;a++)c=this.geometry.bones[a],d=c.pos,e=c.rotq,f=c.scl,b=this.addBone(),b.name=c.name,b.position.set(d[0],d[1],d[2]),b.quaternion.set(e[0],e[1],e[2],e[3]),void 0!==f?b.scale.set(f[0],f[1],f[2]):b.scale.set(1,1,1);for(a=0;a<this.bones.length;a++)c=
this.geometry.bones[a],b=this.bones[a],-1===c.parent?this.add(b):this.bones[c.parent].add(b);a=this.bones.length;this.useVertexTexture?(this.boneTextureHeight=this.boneTextureWidth=a=256<a?64:64<a?32:16<a?16:8,this.boneMatrices=new Float32Array(4*this.boneTextureWidth*this.boneTextureHeight),this.boneTexture=new THREE.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,THREE.RGBAFormat,THREE.FloatType),this.boneTexture.minFilter=THREE.NearestFilter,this.boneTexture.magFilter=
THREE.NearestFilter,this.boneTexture.generateMipmaps=!1,this.boneTexture.flipY=!1):this.boneMatrices=new Float32Array(16*a);this.pose()}};THREE.SkinnedMesh.prototype=Object.create(THREE.Mesh.prototype);THREE.SkinnedMesh.prototype.addBone=function(a){void 0===a&&(a=new THREE.Bone(this));this.bones.push(a);return a};
THREE.SkinnedMesh.prototype.updateMatrixWorld=function(){var a=new THREE.Matrix4;return function(b){this.matrixAutoUpdate&&this.updateMatrix();if(this.matrixWorldNeedsUpdate||b)this.parent?this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix):this.matrixWorld.copy(this.matrix),this.matrixWorldNeedsUpdate=!1;for(var b=0,c=this.children.length;b<c;b++){var d=this.children[b];d instanceof THREE.Bone?d.update(this.identityMatrix,!1):d.updateMatrixWorld(!0)}if(void 0==this.boneInverses){this.boneInverses=
[];b=0;for(c=this.bones.length;b<c;b++)d=new THREE.Matrix4,d.getInverse(this.bones[b].skinMatrix),this.boneInverses.push(d)}b=0;for(c=this.bones.length;b<c;b++)a.multiplyMatrices(this.bones[b].skinMatrix,this.boneInverses[b]),a.flattenToArrayOffset(this.boneMatrices,16*b);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}();THREE.SkinnedMesh.prototype.pose=function(){this.updateMatrixWorld(!0);this.normalizeSkinWeights()};
THREE.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof THREE.Geometry)for(var a=0;a<this.geometry.skinIndices.length;a++){var b=this.geometry.skinWeights[a],c=1/b.lengthManhattan();Infinity!==c?b.multiplyScalar(c):b.set(1)}};THREE.SkinnedMesh.prototype.clone=function(a){void 0===a&&(a=new THREE.SkinnedMesh(this.geometry,this.material,this.useVertexTexture));THREE.Mesh.prototype.clone.call(this,a);return a};THREE.MorphAnimMesh=function(a,b){THREE.Mesh.call(this,a,b);this.duration=1E3;this.mirroredLoop=!1;this.currentKeyframe=this.lastKeyframe=this.time=0;this.direction=1;this.directionBackwards=!1;this.setFrameRange(0,this.geometry.morphTargets.length-1)};THREE.MorphAnimMesh.prototype=Object.create(THREE.Mesh.prototype);THREE.MorphAnimMesh.prototype.setFrameRange=function(a,b){this.startKeyframe=a;this.endKeyframe=b;this.length=this.endKeyframe-this.startKeyframe+1};
THREE.MorphAnimMesh.prototype.setDirectionForward=function(){this.direction=1;this.directionBackwards=!1};THREE.MorphAnimMesh.prototype.setDirectionBackward=function(){this.direction=-1;this.directionBackwards=!0};
THREE.MorphAnimMesh.prototype.parseAnimations=function(){var a=this.geometry;a.animations||(a.animations={});for(var b,c=a.animations,d=/([a-z]+)(\d+)/,e=0,f=a.morphTargets.length;e<f;e++){var h=a.morphTargets[e].name.match(d);if(h&&1<h.length){h=h[1];c[h]||(c[h]={start:Infinity,end:-Infinity});var g=c[h];e<g.start&&(g.start=e);e>g.end&&(g.end=e);b||(b=h)}}a.firstAnimation=b};
THREE.MorphAnimMesh.prototype.setAnimationLabel=function(a,b,c){this.geometry.animations||(this.geometry.animations={});this.geometry.animations[a]={start:b,end:c}};THREE.MorphAnimMesh.prototype.playAnimation=function(a,b){var c=this.geometry.animations[a];c?(this.setFrameRange(c.start,c.end),this.duration=1E3*((c.end-c.start)/b),this.time=0):console.warn("animation["+a+"] undefined")};
THREE.MorphAnimMesh.prototype.updateAnimation=function(a){var b=this.duration/this.length;this.time+=this.direction*a;if(this.mirroredLoop){if(this.time>this.duration||0>this.time)this.direction*=-1,this.time>this.duration&&(this.time=this.duration,this.directionBackwards=!0),0>this.time&&(this.time=0,this.directionBackwards=!1)}else this.time%=this.duration,0>this.time&&(this.time+=this.duration);a=this.startKeyframe+THREE.Math.clamp(Math.floor(this.time/b),0,this.length-1);a!==this.currentKeyframe&&
(this.morphTargetInfluences[this.lastKeyframe]=0,this.morphTargetInfluences[this.currentKeyframe]=1,this.morphTargetInfluences[a]=0,this.lastKeyframe=this.currentKeyframe,this.currentKeyframe=a);b=this.time%b/b;this.directionBackwards&&(b=1-b);this.morphTargetInfluences[this.currentKeyframe]=b;this.morphTargetInfluences[this.lastKeyframe]=1-b};
THREE.MorphAnimMesh.prototype.clone=function(a){void 0===a&&(a=new THREE.MorphAnimMesh(this.geometry,this.material));a.duration=this.duration;a.mirroredLoop=this.mirroredLoop;a.time=this.time;a.lastKeyframe=this.lastKeyframe;a.currentKeyframe=this.currentKeyframe;a.direction=this.direction;a.directionBackwards=this.directionBackwards;THREE.Mesh.prototype.clone.call(this,a);return a};THREE.LOD=function(){THREE.Object3D.call(this);this.objects=[]};THREE.LOD.prototype=Object.create(THREE.Object3D.prototype);THREE.LOD.prototype.addLevel=function(a,b){void 0===b&&(b=0);for(var b=Math.abs(b),c=0;c<this.objects.length&&!(b<this.objects[c].distance);c++);this.objects.splice(c,0,{distance:b,object:a});this.add(a)};THREE.LOD.prototype.getObjectForDistance=function(a){for(var b=1,c=this.objects.length;b<c&&!(a<this.objects[b].distance);b++);return this.objects[b-1].object};
THREE.LOD.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c){if(1<this.objects.length){a.setFromMatrixPosition(c.matrixWorld);b.setFromMatrixPosition(this.matrixWorld);c=a.distanceTo(b);this.objects[0].object.visible=!0;for(var d=1,e=this.objects.length;d<e;d++)if(c>=this.objects[d].distance)this.objects[d-1].object.visible=!1,this.objects[d].object.visible=!0;else break;for(;d<e;d++)this.objects[d].object.visible=!1}}}();THREE.LOD.prototype.clone=function(){};THREE.Sprite=function(a){THREE.Object3D.call(this);this.material=void 0!==a?a:new THREE.SpriteMaterial};THREE.Sprite.prototype=Object.create(THREE.Object3D.prototype);THREE.Sprite.prototype.updateMatrix=function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0};THREE.Sprite.prototype.clone=function(a){void 0===a&&(a=new THREE.Sprite(this.material));THREE.Object3D.prototype.clone.call(this,a);return a};THREE.Particle=THREE.Sprite;THREE.Scene=function(){THREE.Object3D.call(this);this.overrideMaterial=this.fog=null;this.autoUpdate=!0;this.matrixAutoUpdate=!1;this.__lights=[];this.__objectsAdded=[];this.__objectsRemoved=[]};THREE.Scene.prototype=Object.create(THREE.Object3D.prototype);
THREE.Scene.prototype.__addObject=function(a){if(a instanceof THREE.Light)-1===this.__lights.indexOf(a)&&this.__lights.push(a),a.target&&void 0===a.target.parent&&this.add(a.target);else if(!(a instanceof THREE.Camera||a instanceof THREE.Bone)){this.__objectsAdded.push(a);var b=this.__objectsRemoved.indexOf(a);-1!==b&&this.__objectsRemoved.splice(b,1)}for(b=0;b<a.children.length;b++)this.__addObject(a.children[b])};
THREE.Scene.prototype.__removeObject=function(a){if(a instanceof THREE.Light){var b=this.__lights.indexOf(a);-1!==b&&this.__lights.splice(b,1);if(a.shadowCascadeArray)for(b=0;b<a.shadowCascadeArray.length;b++)this.__removeObject(a.shadowCascadeArray[b])}else a instanceof THREE.Camera||(this.__objectsRemoved.push(a),b=this.__objectsAdded.indexOf(a),-1!==b&&this.__objectsAdded.splice(b,1));for(b=0;b<a.children.length;b++)this.__removeObject(a.children[b])};
THREE.Scene.prototype.clone=function(a){void 0===a&&(a=new THREE.Scene);THREE.Object3D.prototype.clone.call(this,a);null!==this.fog&&(a.fog=this.fog.clone());null!==this.overrideMaterial&&(a.overrideMaterial=this.overrideMaterial.clone());a.autoUpdate=this.autoUpdate;a.matrixAutoUpdate=this.matrixAutoUpdate;return a};THREE.Fog=function(a,b,c){this.name="";this.color=new THREE.Color(a);this.near=void 0!==b?b:1;this.far=void 0!==c?c:1E3};THREE.Fog.prototype.clone=function(){return new THREE.Fog(this.color.getHex(),this.near,this.far)};THREE.FogExp2=function(a,b){this.name="";this.color=new THREE.Color(a);this.density=void 0!==b?b:2.5E-4};THREE.FogExp2.prototype.clone=function(){return new THREE.FogExp2(this.color.getHex(),this.density)};THREE.CanvasRenderer=function(a){function b(a,b,c){for(var d=0,e=z.length;d<e;d++){var f=z[d];Ka.copy(f.color);if(f instanceof THREE.DirectionalLight){var h=ta.setFromMatrixPosition(f.matrixWorld).normalize(),g=b.dot(h);0>=g||(g*=f.intensity,c.add(Ka.multiplyScalar(g)))}else f instanceof THREE.PointLight&&(h=ta.setFromMatrixPosition(f.matrixWorld),g=b.dot(ta.subVectors(h,a).normalize()),0>=g||(g*=0==f.distance?1:1-Math.min(a.distanceTo(h)/f.distance,1),0!=g&&(g*=f.intensity,c.add(Ka.multiplyScalar(g)))))}}
function c(a,b,c,d){m(b);l(c);p(d);t(a.getStyle());D.stroke();Ea.expandByScalar(2*b)}function d(a){s(a.getStyle());D.fill()}function e(a,b,c,e,f,h,g,j,i,k,m,l,n){if(!(n instanceof THREE.DataTexture||void 0===n.image||0===n.image.width)){if(!0===n.needsUpdate){var p=n.wrapS===THREE.RepeatWrapping,q=n.wrapT===THREE.RepeatWrapping;Ga[n.id]=D.createPattern(n.image,!0===p&&!0===q?"repeat":!0===p&&!1===q?"repeat-x":!1===p&&!0===q?"repeat-y":"no-repeat");n.needsUpdate=!1}void 0===Ga[n.id]?s("rgba(0,0,0,1)"):
s(Ga[n.id]);var p=n.offset.x/n.repeat.x,q=n.offset.y/n.repeat.y,t=n.image.width*n.repeat.x,r=n.image.height*n.repeat.y,g=(g+p)*t,j=(1-j+q)*r,c=c-a,e=e-b,f=f-a,h=h-b,i=(i+p)*t-g,k=(1-k+q)*r-j,m=(m+p)*t-g,l=(1-l+q)*r-j,p=i*l-m*k;0===p?(void 0===ka[n.id]&&(b=document.createElement("canvas"),b.width=n.image.width,b.height=n.image.height,b=b.getContext("2d"),b.drawImage(n.image,0,0),ka[n.id]=b.getImageData(0,0,n.image.width,n.image.height).data),b=ka[n.id],g=4*(Math.floor(g)+Math.floor(j)*n.image.width),
V.setRGB(b[g]/255,b[g+1]/255,b[g+2]/255),d(V)):(p=1/p,n=(l*c-k*f)*p,k=(l*e-k*h)*p,c=(i*f-m*c)*p,e=(i*h-m*e)*p,a=a-n*g-c*j,g=b-k*g-e*j,D.save(),D.transform(n,k,c,e,a,g),D.fill(),D.restore())}}function f(a,b,c,d,e,f,h,g,j,i,k,m,n){var l,p;l=n.width-1;p=n.height-1;h*=l;g*=p;c-=a;d-=b;e-=a;f-=b;j=j*l-h;i=i*p-g;k=k*l-h;m=m*p-g;p=1/(j*m-k*i);l=(m*c-i*e)*p;i=(m*d-i*f)*p;c=(j*e-k*c)*p;d=(j*f-k*d)*p;a=a-l*h-c*g;b=b-i*h-d*g;D.save();D.transform(l,i,c,d,a,b);D.clip();D.drawImage(n,0,0);D.restore()}function h(a,
b,c,d){ua[0]=255*a.r|0;ua[1]=255*a.g|0;ua[2]=255*a.b|0;ua[4]=255*b.r|0;ua[5]=255*b.g|0;ua[6]=255*b.b|0;ua[8]=255*c.r|0;ua[9]=255*c.g|0;ua[10]=255*c.b|0;ua[12]=255*d.r|0;ua[13]=255*d.g|0;ua[14]=255*d.b|0;j.putImageData(Oa,0,0);Fa.drawImage(Pa,0,0);return La}function g(a,b,c){var d=b.x-a.x,e=b.y-a.y,f=d*d+e*e;0!==f&&(c/=Math.sqrt(f),d*=c,e*=c,b.x+=d,b.y+=e,a.x-=d,a.y-=e)}function i(a){x!==a&&(x=D.globalAlpha=a)}function k(a){I!==a&&(a===THREE.NormalBlending?D.globalCompositeOperation="source-over":
a===THREE.AdditiveBlending?D.globalCompositeOperation="lighter":a===THREE.SubtractiveBlending&&(D.globalCompositeOperation="darker"),I=a)}function m(a){J!==a&&(J=D.lineWidth=a)}function l(a){ca!==a&&(ca=D.lineCap=a)}function p(a){na!==a&&(na=D.lineJoin=a)}function t(a){B!==a&&(B=D.strokeStyle=a)}function s(a){M!==a&&(M=D.fillStyle=a)}function q(a,b){if(pa!==a||C!==b)D.setLineDash([a,b]),pa=a,C=b}console.log("THREE.CanvasRenderer",THREE.REVISION);var n=THREE.Math.smoothstep,a=a||{},u=this,r,v,z,G=
new THREE.Projector,w=void 0!==a.canvas?a.canvas:document.createElement("canvas"),y=w.width,E=w.height,A=Math.floor(y/2),K=Math.floor(E/2),D=w.getContext("2d"),F=new THREE.Color(0),O=0,x=1,I=0,B=null,M=null,J=null,ca=null,na=null,pa=null,C=0,Q,R,L,da;new THREE.RenderableVertex;new THREE.RenderableVertex;var za,Ba,ba,Aa,$,ea,V=new THREE.Color,P=new THREE.Color,Y=new THREE.Color,U=new THREE.Color,ja=new THREE.Color,sa=new THREE.Color,ha=new THREE.Color,Ka=new THREE.Color,Ga={},ka={},Da,Ua,Qa,wa,bb,
cb,Ma,fb,sb,pb,va=new THREE.Box2,la=new THREE.Box2,Ea=new THREE.Box2,gb=new THREE.Color,ra=new THREE.Color,fa=new THREE.Color,ta=new THREE.Vector3,Pa,j,Oa,ua,La,Fa,Ra=16;Pa=document.createElement("canvas");Pa.width=Pa.height=2;j=Pa.getContext("2d");j.fillStyle="rgba(0,0,0,1)";j.fillRect(0,0,2,2);Oa=j.getImageData(0,0,2,2);ua=Oa.data;La=document.createElement("canvas");La.width=La.height=Ra;Fa=La.getContext("2d");Fa.translate(-Ra/2,-Ra/2);Fa.scale(Ra,Ra);Ra--;void 0===D.setLineDash&&(D.setLineDash=
void 0!==D.mozDash?function(a){D.mozDash=null!==a[0]?a:null}:function(){});this.domElement=w;this.devicePixelRatio=void 0!==a.devicePixelRatio?a.devicePixelRatio:void 0!==self.devicePixelRatio?self.devicePixelRatio:1;this.sortElements=this.sortObjects=this.autoClear=!0;this.info={render:{vertices:0,faces:0}};this.supportsVertexTextures=function(){};this.setFaceCulling=function(){};this.setSize=function(a,b,c){y=a*this.devicePixelRatio;E=b*this.devicePixelRatio;A=Math.floor(y/2);K=Math.floor(E/2);
w.width=y;w.height=E;1!==this.devicePixelRatio&&!1!==c&&(w.style.width=a+"px",w.style.height=b+"px");va.set(new THREE.Vector2(-A,-K),new THREE.Vector2(A,K));la.set(new THREE.Vector2(-A,-K),new THREE.Vector2(A,K));x=1;I=0;na=ca=J=M=B=null};this.setClearColor=function(a,b){F.set(a);O=void 0!==b?b:1;la.set(new THREE.Vector2(-A,-K),new THREE.Vector2(A,K))};this.setClearColorHex=function(a,b){console.warn("DEPRECATED: .setClearColorHex() is being removed. Use .setClearColor() instead.");this.setClearColor(a,
b)};this.getMaxAnisotropy=function(){return 0};this.clear=function(){D.setTransform(1,0,0,-1,A,K);!1===la.empty()&&(la.intersect(va),la.expandByScalar(2),1>O&&D.clearRect(la.min.x|0,la.min.y|0,la.max.x-la.min.x|0,la.max.y-la.min.y|0),0<O&&(k(THREE.NormalBlending),i(1),s("rgba("+Math.floor(255*F.r)+","+Math.floor(255*F.g)+","+Math.floor(255*F.b)+","+O+")"),D.fillRect(la.min.x|0,la.min.y|0,la.max.x-la.min.x|0,la.max.y-la.min.y|0)),la.makeEmpty())};this.clearColor=function(){};this.clearDepth=function(){};
this.clearStencil=function(){};this.render=function(a,j){if(!1===j instanceof THREE.Camera)console.error("THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera.");else{!0===this.autoClear&&this.clear();D.setTransform(1,0,0,-1,A,K);u.info.render.vertices=0;u.info.render.faces=0;r=G.projectScene(a,j,this.sortObjects,this.sortElements);v=r.elements;z=r.lights;Q=j;gb.setRGB(0,0,0);ra.setRGB(0,0,0);fa.setRGB(0,0,0);for(var y=0,F=z.length;y<F;y++){var B=z[y],E=B.color;B instanceof THREE.AmbientLight?
gb.add(E):B instanceof THREE.DirectionalLight?ra.add(E):B instanceof THREE.PointLight&&fa.add(E)}y=0;for(F=v.length;y<F;y++){var x=v[y],w=x.material;if(!(void 0===w||!1===w.visible)){Ea.makeEmpty();if(x instanceof THREE.RenderableSprite){R=x;R.x*=A;R.y*=K;var B=R,E=x,I=w;i(I.opacity);k(I.blending);var x=E.scale.x*A,w=E.scale.y*K,O=0.5*Math.sqrt(x*x+w*w);Ea.min.set(B.x-O,B.y-O);Ea.max.set(B.x+O,B.y+O);!1===va.isIntersectionBox(Ea)?Ea.makeEmpty():I instanceof THREE.SpriteMaterial||I instanceof THREE.ParticleSystemMaterial?
(null!==I.map?(E=I.map.image,D.save(),D.translate(B.x,B.y),D.rotate(I.rotation),D.scale(x,-w),D.drawImage(E,0,0,E.width,E.height,-0.5,-0.5,1,1)):(s(I.color.getStyle()),D.save(),D.translate(B.x,B.y),D.rotate(I.rotation),D.scale(x,-w),D.fillRect(-0.5,-0.5,1,1)),D.restore()):I instanceof THREE.SpriteCanvasMaterial&&(t(I.color.getStyle()),s(I.color.getStyle()),D.save(),D.translate(B.x,B.y),D.rotate(-E.rotation),D.scale(x,w),I.program(D),D.restore())}else if(x instanceof THREE.RenderableLine){if(R=x.v1,
L=x.v2,R.positionScreen.x*=A,R.positionScreen.y*=K,L.positionScreen.x*=A,L.positionScreen.y*=K,Ea.setFromPoints([R.positionScreen,L.positionScreen]),!0===va.isIntersectionBox(Ea))if(B=R,E=L,I=x,x=w,i(x.opacity),k(x.blending),D.beginPath(),D.moveTo(B.positionScreen.x,B.positionScreen.y),D.lineTo(E.positionScreen.x,E.positionScreen.y),x instanceof THREE.LineBasicMaterial){m(x.linewidth);l(x.linecap);p(x.linejoin);if(x.vertexColors!==THREE.VertexColors)t(x.color.getStyle());else if(w=I.vertexColors[0].getStyle(),
I=I.vertexColors[1].getStyle(),w===I)t(w);else{try{var C=D.createLinearGradient(B.positionScreen.x,B.positionScreen.y,E.positionScreen.x,E.positionScreen.y);C.addColorStop(0,w);C.addColorStop(1,I)}catch(J){C=w}t(C)}D.stroke();Ea.expandByScalar(2*x.linewidth)}else x instanceof THREE.LineDashedMaterial&&(m(x.linewidth),l(x.linecap),p(x.linejoin),t(x.color.getStyle()),q(x.dashSize,x.gapSize),D.stroke(),Ea.expandByScalar(2*x.linewidth),q(null,null))}else if(x instanceof THREE.RenderableFace3){R=x.v1;
L=x.v2;da=x.v3;if(-1>R.positionScreen.z||1<R.positionScreen.z)continue;if(-1>L.positionScreen.z||1<L.positionScreen.z)continue;if(-1>da.positionScreen.z||1<da.positionScreen.z)continue;R.positionScreen.x*=A;R.positionScreen.y*=K;L.positionScreen.x*=A;L.positionScreen.y*=K;da.positionScreen.x*=A;da.positionScreen.y*=K;0<w.overdraw&&(g(R.positionScreen,L.positionScreen,w.overdraw),g(L.positionScreen,da.positionScreen,w.overdraw),g(da.positionScreen,R.positionScreen,w.overdraw));Ea.setFromPoints([R.positionScreen,
L.positionScreen,da.positionScreen]);if(!0===va.isIntersectionBox(Ea)){B=R;E=L;I=da;u.info.render.vertices+=3;u.info.render.faces++;i(w.opacity);k(w.blending);za=B.positionScreen.x;Ba=B.positionScreen.y;ba=E.positionScreen.x;Aa=E.positionScreen.y;$=I.positionScreen.x;ea=I.positionScreen.y;var O=za,M=Ba,ca=ba,ka=Aa,na=$,pa=ea;D.beginPath();D.moveTo(O,M);D.lineTo(ca,ka);D.lineTo(na,pa);D.closePath();(w instanceof THREE.MeshLambertMaterial||w instanceof THREE.MeshPhongMaterial)&&null===w.map?(sa.copy(w.color),
ha.copy(w.emissive),w.vertexColors===THREE.FaceColors&&sa.multiply(x.color),!1===w.wireframe&&w.shading===THREE.SmoothShading&&3===x.vertexNormalsLength?(P.copy(gb),Y.copy(gb),U.copy(gb),b(x.v1.positionWorld,x.vertexNormalsModel[0],P),b(x.v2.positionWorld,x.vertexNormalsModel[1],Y),b(x.v3.positionWorld,x.vertexNormalsModel[2],U),P.multiply(sa).add(ha),Y.multiply(sa).add(ha),U.multiply(sa).add(ha),ja.addColors(Y,U).multiplyScalar(0.5),Qa=h(P,Y,U,ja),f(za,Ba,ba,Aa,$,ea,0,0,1,0,0,1,Qa)):(V.copy(gb),
b(x.centroidModel,x.normalModel,V),V.multiply(sa).add(ha),!0===w.wireframe?c(V,w.wireframeLinewidth,w.wireframeLinecap,w.wireframeLinejoin):d(V))):w instanceof THREE.MeshBasicMaterial||w instanceof THREE.MeshLambertMaterial||w instanceof THREE.MeshPhongMaterial?null!==w.map?w.map.mapping instanceof THREE.UVMapping&&(wa=x.uvs[0],e(za,Ba,ba,Aa,$,ea,wa[0].x,wa[0].y,wa[1].x,wa[1].y,wa[2].x,wa[2].y,w.map)):null!==w.envMap?w.envMap.mapping instanceof THREE.SphericalReflectionMapping&&(ta.copy(x.vertexNormalsModelView[0]),
bb=0.5*ta.x+0.5,cb=0.5*ta.y+0.5,ta.copy(x.vertexNormalsModelView[1]),Ma=0.5*ta.x+0.5,fb=0.5*ta.y+0.5,ta.copy(x.vertexNormalsModelView[2]),sb=0.5*ta.x+0.5,pb=0.5*ta.y+0.5,e(za,Ba,ba,Aa,$,ea,bb,cb,Ma,fb,sb,pb,w.envMap)):(V.copy(w.color),w.vertexColors===THREE.FaceColors&&V.multiply(x.color),!0===w.wireframe?c(V,w.wireframeLinewidth,w.wireframeLinecap,w.wireframeLinejoin):d(V)):w instanceof THREE.MeshDepthMaterial?(Da=Q.near,Ua=Q.far,P.r=P.g=P.b=1-n(B.positionScreen.z*B.positionScreen.w,Da,Ua),Y.r=Y.g=
Y.b=1-n(E.positionScreen.z*E.positionScreen.w,Da,Ua),U.r=U.g=U.b=1-n(I.positionScreen.z*I.positionScreen.w,Da,Ua),ja.addColors(Y,U).multiplyScalar(0.5),Qa=h(P,Y,U,ja),f(za,Ba,ba,Aa,$,ea,0,0,1,0,0,1,Qa)):w instanceof THREE.MeshNormalMaterial&&(B=void 0,w.shading===THREE.FlatShading?(B=x.normalModelView,V.setRGB(B.x,B.y,B.z).multiplyScalar(0.5).addScalar(0.5),!0===w.wireframe?c(V,w.wireframeLinewidth,w.wireframeLinecap,w.wireframeLinejoin):d(V)):w.shading===THREE.SmoothShading&&(B=x.vertexNormalsModelView[0],
P.setRGB(B.x,B.y,B.z).multiplyScalar(0.5).addScalar(0.5),B=x.vertexNormalsModelView[1],Y.setRGB(B.x,B.y,B.z).multiplyScalar(0.5).addScalar(0.5),B=x.vertexNormalsModelView[2],U.setRGB(B.x,B.y,B.z).multiplyScalar(0.5).addScalar(0.5),ja.addColors(Y,U).multiplyScalar(0.5),Qa=h(P,Y,U,ja),f(za,Ba,ba,Aa,$,ea,0,0,1,0,0,1,Qa)))}}la.union(Ea)}}D.setTransform(1,0,0,1,0,0)}}};THREE.ShaderChunk={fog_pars_fragment:"#ifdef USE_FOG\nuniform vec3 fogColor;\n#ifdef FOG_EXP2\nuniform float fogDensity;\n#else\nuniform float fogNear;\nuniform float fogFar;\n#endif\n#endif",fog_fragment:"#ifdef USE_FOG\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n#ifdef FOG_EXP2\nconst float LOG2 = 1.442695;\nfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n#else\nfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n#endif\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n#endif",
envmap_pars_fragment:"#ifdef USE_ENVMAP\nuniform float reflectivity;\nuniform samplerCube envMap;\nuniform float flipEnvMap;\nuniform int combine;\n#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\nuniform bool useRefract;\nuniform float refractionRatio;\n#else\nvarying vec3 vReflect;\n#endif\n#endif",envmap_fragment:"#ifdef USE_ENVMAP\nvec3 reflectVec;\n#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\nvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\nif ( useRefract ) {\nreflectVec = refract( cameraToVertex, normal, refractionRatio );\n} else { \nreflectVec = reflect( cameraToVertex, normal );\n}\n#else\nreflectVec = vReflect;\n#endif\n#ifdef DOUBLE_SIDED\nfloat flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\nvec4 cubeColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n#else\nvec4 cubeColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n#endif\n#ifdef GAMMA_INPUT\ncubeColor.xyz *= cubeColor.xyz;\n#endif\nif ( combine == 1 ) {\ngl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularStrength * reflectivity );\n} else if ( combine == 2 ) {\ngl_FragColor.xyz += cubeColor.xyz * specularStrength * reflectivity;\n} else {\ngl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * cubeColor.xyz, specularStrength * reflectivity );\n}\n#endif",
envmap_pars_vertex:"#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )\nvarying vec3 vReflect;\nuniform float refractionRatio;\nuniform bool useRefract;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n#ifdef USE_SKINNING\nvec4 worldPosition = modelMatrix * skinned;\n#endif\n#if defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\nvec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\n#endif\n#if ! defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\nvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n#endif\n#endif",
envmap_vertex:"#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )\nvec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;\nworldNormal = normalize( worldNormal );\nvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\nif ( useRefract ) {\nvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n} else {\nvReflect = reflect( cameraToVertex, worldNormal );\n}\n#endif",map_particle_pars_fragment:"#ifdef USE_MAP\nuniform sampler2D map;\n#endif",
map_particle_fragment:"#ifdef USE_MAP\ngl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );\n#endif",map_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )\nvarying vec2 vUv;\nuniform vec4 offsetRepeat;\n#endif",map_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )\nvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\nuniform sampler2D map;\n#endif",
map_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )\nvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",map_fragment:"#ifdef USE_MAP\nvec4 texelColor = texture2D( map, vUv );\n#ifdef GAMMA_INPUT\ntexelColor.xyz *= texelColor.xyz;\n#endif\ngl_FragColor = gl_FragColor * texelColor;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\nvarying vec2 vUv2;\nuniform sampler2D lightMap;\n#endif",lightmap_pars_vertex:"#ifdef USE_LIGHTMAP\nvarying vec2 vUv2;\n#endif",
lightmap_fragment:"#ifdef USE_LIGHTMAP\ngl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );\n#endif",lightmap_vertex:"#ifdef USE_LIGHTMAP\nvUv2 = uv2;\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\nuniform sampler2D bumpMap;\nuniform float bumpScale;\nvec2 dHdxy_fwd() {\nvec2 dSTdx = dFdx( vUv );\nvec2 dSTdy = dFdy( vUv );\nfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\nfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\nfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\nreturn vec2( dBx, dBy );\n}\nvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\nvec3 vSigmaX = dFdx( surf_pos );\nvec3 vSigmaY = dFdy( surf_pos );\nvec3 vN = surf_norm;\nvec3 R1 = cross( vSigmaY, vN );\nvec3 R2 = cross( vN, vSigmaX );\nfloat fDet = dot( vSigmaX, R1 );\nvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\nreturn normalize( abs( fDet ) * surf_norm - vGrad );\n}\n#endif",
normalmap_pars_fragment:"#ifdef USE_NORMALMAP\nuniform sampler2D normalMap;\nuniform vec2 normalScale;\nvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\nvec3 q0 = dFdx( eye_pos.xyz );\nvec3 q1 = dFdy( eye_pos.xyz );\nvec2 st0 = dFdx( vUv.st );\nvec2 st1 = dFdy( vUv.st );\nvec3 S = normalize(  q0 * st1.t - q1 * st0.t );\nvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\nvec3 N = normalize( surf_norm );\nvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\nmapN.xy = normalScale * mapN.xy;\nmat3 tsn = mat3( S, T, N );\nreturn normalize( tsn * mapN );\n}\n#endif",
specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\nuniform sampler2D specularMap;\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\nvec4 texelSpecular = texture2D( specularMap, vUv );\nspecularStrength = texelSpecular.r;\n#else\nspecularStrength = 1.0;\n#endif",lights_lambert_pars_vertex:"uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_HEMI_LIGHTS > 0\nuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\nuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\nuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n#endif\n#ifdef WRAP_AROUND\nuniform vec3 wrapRGB;\n#endif",
lights_lambert_vertex:"vLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\nvLightBack = vec3( 0.0 );\n#endif\ntransformedNormal = normalize( transformedNormal );\n#if MAX_DIR_LIGHTS > 0\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\nvec3 dirVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( transformedNormal, dirVector );\nvec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n#ifdef DOUBLE_SIDED\nvec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n#ifdef WRAP_AROUND\nvec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n#endif\n#endif\n#ifdef WRAP_AROUND\nvec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\ndirectionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\n#ifdef DOUBLE_SIDED\ndirectionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\n#endif\n#endif\nvLightFront += directionalLightColor[ i ] * directionalLightWeighting;\n#ifdef DOUBLE_SIDED\nvLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\n#endif\n}\n#endif\n#if MAX_POINT_LIGHTS > 0\nfor( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\nfloat dotProduct = dot( transformedNormal, lVector );\nvec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\n#ifdef DOUBLE_SIDED\nvec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n#ifdef WRAP_AROUND\nvec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n#endif\n#endif\n#ifdef WRAP_AROUND\nvec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\npointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\n#ifdef DOUBLE_SIDED\npointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\n#endif\n#endif\nvLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;\n#ifdef DOUBLE_SIDED\nvLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;\n#endif\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nfor( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\nif ( spotEffect > spotLightAngleCos[ i ] ) {\nspotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );\nfloat lDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\nfloat dotProduct = dot( transformedNormal, lVector );\nvec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\n#ifdef DOUBLE_SIDED\nvec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n#ifdef WRAP_AROUND\nvec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n#endif\n#endif\n#ifdef WRAP_AROUND\nvec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\nspotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\n#ifdef DOUBLE_SIDED\nspotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\n#endif\n#endif\nvLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;\n#ifdef DOUBLE_SIDED\nvLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;\n#endif\n}\n}\n#endif\n#if MAX_HEMI_LIGHTS > 0\nfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\nvec3 lVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( transformedNormal, lVector );\nfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\nfloat hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\nvLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n#ifdef DOUBLE_SIDED\nvLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n#endif\n}\n#endif\nvLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;\n#ifdef DOUBLE_SIDED\nvLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;\n#endif",
lights_phong_pars_vertex:"#ifndef PHONG_PER_PIXEL\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\nvarying vec4 vPointLight[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\nvarying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )\nvarying vec3 vWorldPosition;\n#endif",
lights_phong_vertex:"#ifndef PHONG_PER_PIXEL\n#if MAX_POINT_LIGHTS > 0\nfor( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nvPointLight[ i ] = vec4( lVector, lDistance );\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nfor( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat lDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\nvSpotLight[ i ] = vec4( lVector, lDistance );\n}\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )\nvWorldPosition = worldPosition.xyz;\n#endif",
lights_phong_pars_fragment:"uniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_HEMI_LIGHTS > 0\nuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n#ifdef PHONG_PER_PIXEL\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#else\nvarying vec4 vPointLight[ MAX_POINT_LIGHTS ];\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\nuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\nuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n#ifdef PHONG_PER_PIXEL\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n#else\nvarying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )\nvarying vec3 vWorldPosition;\n#endif\n#ifdef WRAP_AROUND\nuniform vec3 wrapRGB;\n#endif\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",
lights_phong_fragment:"vec3 normal = normalize( vNormal );\nvec3 viewPosition = normalize( vViewPosition );\n#ifdef DOUBLE_SIDED\nnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n#endif\n#ifdef USE_NORMALMAP\nnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\nnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n#if MAX_POINT_LIGHTS > 0\nvec3 pointDiffuse  = vec3( 0.0 );\nvec3 pointSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n#ifdef PHONG_PER_PIXEL\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz + vViewPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\n#else\nvec3 lVector = normalize( vPointLight[ i ].xyz );\nfloat lDistance = vPointLight[ i ].w;\n#endif\nfloat dotProduct = dot( normal, lVector );\n#ifdef WRAP_AROUND\nfloat pointDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n#else\nfloat pointDiffuseWeight = max( dotProduct, 0.0 );\n#endif\npointDiffuse  += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;\nvec3 pointHalfVector = normalize( lVector + viewPosition );\nfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\nfloat pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, pointHalfVector ), 5.0 );\npointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;\n#else\npointSpecular += specular * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance;\n#endif\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nvec3 spotDiffuse  = vec3( 0.0 );\nvec3 spotSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n#ifdef PHONG_PER_PIXEL\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz + vViewPosition.xyz;\nfloat lDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\n#else\nvec3 lVector = normalize( vSpotLight[ i ].xyz );\nfloat lDistance = vSpotLight[ i ].w;\n#endif\nfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\nif ( spotEffect > spotLightAngleCos[ i ] ) {\nspotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );\nfloat dotProduct = dot( normal, lVector );\n#ifdef WRAP_AROUND\nfloat spotDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 spotDiffuseWeight = mix( vec3 ( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n#else\nfloat spotDiffuseWeight = max( dotProduct, 0.0 );\n#endif\nspotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;\nvec3 spotHalfVector = normalize( lVector + viewPosition );\nfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\nfloat spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, spotHalfVector ), 5.0 );\nspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\n#else\nspotSpecular += specular * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * spotEffect;\n#endif\n}\n}\n#endif\n#if MAX_DIR_LIGHTS > 0\nvec3 dirDiffuse  = vec3( 0.0 );\nvec3 dirSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\nvec3 dirVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( normal, dirVector );\n#ifdef WRAP_AROUND\nfloat dirDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n#else\nfloat dirDiffuseWeight = max( dotProduct, 0.0 );\n#endif\ndirDiffuse  += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;\nvec3 dirHalfVector = normalize( dirVector + viewPosition );\nfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\nfloat dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );\ndirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n#else\ndirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight;\n#endif\n}\n#endif\n#if MAX_HEMI_LIGHTS > 0\nvec3 hemiDiffuse  = vec3( 0.0 );\nvec3 hemiSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\nvec3 lVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( normal, lVector );\nfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\nvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\nhemiDiffuse += diffuse * hemiColor;\nvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\nfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\nfloat hemiSpecularWeightSky = specularStrength * max( pow( hemiDotNormalHalfSky, shininess ), 0.0 );\nvec3 lVectorGround = -lVector;\nvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\nfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\nfloat hemiSpecularWeightGround = specularStrength * max( pow( hemiDotNormalHalfGround, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat dotProductGround = dot( normal, lVectorGround );\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, hemiHalfVectorSky ), 5.0 );\nvec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 5.0 );\nhemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n#else\nhemiSpecular += specular * hemiColor * ( hemiSpecularWeightSky + hemiSpecularWeightGround ) * hemiDiffuseWeight;\n#endif\n}\n#endif\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n#if MAX_DIR_LIGHTS > 0\ntotalDiffuse += dirDiffuse;\ntotalSpecular += dirSpecular;\n#endif\n#if MAX_HEMI_LIGHTS > 0\ntotalDiffuse += hemiDiffuse;\ntotalSpecular += hemiSpecular;\n#endif\n#if MAX_POINT_LIGHTS > 0\ntotalDiffuse += pointDiffuse;\ntotalSpecular += pointSpecular;\n#endif\n#if MAX_SPOT_LIGHTS > 0\ntotalDiffuse += spotDiffuse;\ntotalSpecular += spotSpecular;\n#endif\n#ifdef METAL\ngl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );\n#else\ngl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n#endif",
color_pars_fragment:"#ifdef USE_COLOR\nvarying vec3 vColor;\n#endif",color_fragment:"#ifdef USE_COLOR\ngl_FragColor = gl_FragColor * vec4( vColor, 1.0 );\n#endif",color_pars_vertex:"#ifdef USE_COLOR\nvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n#ifdef GAMMA_INPUT\nvColor = color * color;\n#else\nvColor = color;\n#endif\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n#ifdef BONE_TEXTURE\nuniform sampler2D boneTexture;\nuniform int boneTextureWidth;\nuniform int boneTextureHeight;\nmat4 getBoneMatrix( const in float i ) {\nfloat j = i * 4.0;\nfloat x = mod( j, float( boneTextureWidth ) );\nfloat y = floor( j / float( boneTextureWidth ) );\nfloat dx = 1.0 / float( boneTextureWidth );\nfloat dy = 1.0 / float( boneTextureHeight );\ny = dy * ( y + 0.5 );\nvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\nvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\nvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\nvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\nmat4 bone = mat4( v1, v2, v3, v4 );\nreturn bone;\n}\n#else\nuniform mat4 boneGlobalMatrices[ MAX_BONES ];\nmat4 getBoneMatrix( const in float i ) {\nmat4 bone = boneGlobalMatrices[ int(i) ];\nreturn bone;\n}\n#endif\n#endif",
skinbase_vertex:"#ifdef USE_SKINNING\nmat4 boneMatX = getBoneMatrix( skinIndex.x );\nmat4 boneMatY = getBoneMatrix( skinIndex.y );\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n#ifdef USE_MORPHTARGETS\nvec4 skinVertex = vec4( morphed, 1.0 );\n#else\nvec4 skinVertex = vec4( position, 1.0 );\n#endif\nvec4 skinned  = boneMatX * skinVertex * skinWeight.x;\nskinned \t  += boneMatY * skinVertex * skinWeight.y;\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n#ifndef USE_MORPHNORMALS\nuniform float morphTargetInfluences[ 8 ];\n#else\nuniform float morphTargetInfluences[ 4 ];\n#endif\n#endif",
morphtarget_vertex:"#ifdef USE_MORPHTARGETS\nvec3 morphed = vec3( 0.0 );\nmorphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\nmorphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\nmorphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\nmorphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n#ifndef USE_MORPHNORMALS\nmorphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\nmorphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\nmorphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\nmorphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n#endif\nmorphed += position;\n#endif",
default_vertex:"vec4 mvPosition;\n#ifdef USE_SKINNING\nmvPosition = modelViewMatrix * skinned;\n#endif\n#if !defined( USE_SKINNING ) && defined( USE_MORPHTARGETS )\nmvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n#endif\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHTARGETS )\nmvPosition = modelViewMatrix * vec4( position, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\nvec3 morphedNormal = vec3( 0.0 );\nmorphedNormal +=  ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\nmorphedNormal +=  ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\nmorphedNormal +=  ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\nmorphedNormal +=  ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\nmorphedNormal += normal;\n#endif",
skinnormal_vertex:"#ifdef USE_SKINNING\nmat4 skinMatrix = skinWeight.x * boneMatX;\nskinMatrix \t+= skinWeight.y * boneMatY;\n#ifdef USE_MORPHNORMALS\nvec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\n#else\nvec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\n#endif\n#endif",defaultnormal_vertex:"vec3 objectNormal;\n#ifdef USE_SKINNING\nobjectNormal = skinnedNormal.xyz;\n#endif\n#if !defined( USE_SKINNING ) && defined( USE_MORPHNORMALS )\nobjectNormal = morphedNormal;\n#endif\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHNORMALS )\nobjectNormal = normal;\n#endif\n#ifdef FLIP_SIDED\nobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;",
shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\nuniform sampler2D shadowMap[ MAX_SHADOWS ];\nuniform vec2 shadowMapSize[ MAX_SHADOWS ];\nuniform float shadowDarkness[ MAX_SHADOWS ];\nuniform float shadowBias[ MAX_SHADOWS ];\nvarying vec4 vShadowCoord[ MAX_SHADOWS ];\nfloat unpackDepth( const in vec4 rgba_depth ) {\nconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\nfloat depth = dot( rgba_depth, bit_shift );\nreturn depth;\n}\n#endif",shadowmap_fragment:"#ifdef USE_SHADOWMAP\n#ifdef SHADOWMAP_DEBUG\nvec3 frustumColors[3];\nfrustumColors[0] = vec3( 1.0, 0.5, 0.0 );\nfrustumColors[1] = vec3( 0.0, 1.0, 0.8 );\nfrustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n#endif\n#ifdef SHADOWMAP_CASCADE\nint inFrustumCount = 0;\n#endif\nfloat fDepth;\nvec3 shadowColor = vec3( 1.0 );\nfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\nvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\nbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\nbool inFrustum = all( inFrustumVec );\n#ifdef SHADOWMAP_CASCADE\ninFrustumCount += int( inFrustum );\nbvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n#else\nbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n#endif\nbool frustumTest = all( frustumTestVec );\nif ( frustumTest ) {\nshadowCoord.z += shadowBias[ i ];\n#if defined( SHADOWMAP_TYPE_PCF )\nfloat shadow = 0.0;\nconst float shadowDelta = 1.0 / 9.0;\nfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\nfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\nfloat dx0 = -1.25 * xPixelOffset;\nfloat dy0 = -1.25 * yPixelOffset;\nfloat dx1 = 1.25 * xPixelOffset;\nfloat dy1 = 1.25 * yPixelOffset;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\nfloat shadow = 0.0;\nfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\nfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\nfloat dx0 = -1.0 * xPixelOffset;\nfloat dy0 = -1.0 * yPixelOffset;\nfloat dx1 = 1.0 * xPixelOffset;\nfloat dy1 = 1.0 * yPixelOffset;\nmat3 shadowKernel;\nmat3 depthKernel;\ndepthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\ndepthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\ndepthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\ndepthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\ndepthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\ndepthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\ndepthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\ndepthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\ndepthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\nvec3 shadowZ = vec3( shadowCoord.z );\nshadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\nshadowKernel[0] *= vec3(0.25);\nshadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\nshadowKernel[1] *= vec3(0.25);\nshadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\nshadowKernel[2] *= vec3(0.25);\nvec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\nshadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\nshadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\nvec4 shadowValues;\nshadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\nshadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\nshadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\nshadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\nshadow = dot( shadowValues, vec4( 1.0 ) );\nshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n#else\nvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\nfloat fDepth = unpackDepth( rgbaDepth );\nif ( fDepth < shadowCoord.z )\nshadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n#endif\n}\n#ifdef SHADOWMAP_DEBUG\n#ifdef SHADOWMAP_CASCADE\nif ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];\n#else\nif ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];\n#endif\n#endif\n}\n#ifdef GAMMA_OUTPUT\nshadowColor *= shadowColor;\n#endif\ngl_FragColor.xyz = gl_FragColor.xyz * shadowColor;\n#endif",
shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\nvarying vec4 vShadowCoord[ MAX_SHADOWS ];\nuniform mat4 shadowMatrix[ MAX_SHADOWS ];\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\nfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\nvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n}\n#endif",alphatest_fragment:"#ifdef ALPHATEST\nif ( gl_FragColor.a < ALPHATEST ) discard;\n#endif",linear_to_gamma_fragment:"#ifdef GAMMA_OUTPUT\ngl_FragColor.xyz = sqrt( gl_FragColor.xyz );\n#endif"};THREE.UniformsUtils={merge:function(a){var b,c,d,e={};for(b=0;b<a.length;b++)for(c in d=this.clone(a[b]),d)e[c]=d[c];return e},clone:function(a){var b,c,d,e={};for(b in a)for(c in e[b]={},a[b])d=a[b][c],e[b][c]=d instanceof THREE.Color||d instanceof THREE.Vector2||d instanceof THREE.Vector3||d instanceof THREE.Vector4||d instanceof THREE.Matrix4||d instanceof THREE.Texture?d.clone():d instanceof Array?d.slice():d;return e}};THREE.UniformsLib={common:{diffuse:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},lightMap:{type:"t",value:null},specularMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},useRefract:{type:"i",value:0},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:0.98},combine:{type:"i",value:0},morphTargetInfluences:{type:"f",value:0}},bump:{bumpMap:{type:"t",
value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new THREE.Vector2(1,1)}},fog:{fogDensity:{type:"f",value:2.5E-4},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},fogColor:{type:"c",value:new THREE.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},hemisphereLightDirection:{type:"fv",value:[]},hemisphereLightSkyColor:{type:"fv",
value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]}},particle:{psColor:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",
value:1},scale:{type:"f",value:1},map:{type:"t",value:null},fogDensity:{type:"f",value:2.5E-4},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},fogColor:{type:"c",value:new THREE.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}};THREE.ShaderLib={basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.shadowmap]),vertexShader:[THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,
THREE.ShaderChunk.skinbase_vertex,"#ifdef USE_ENVMAP",THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"#endif",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,
THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,"void main() {\ngl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,
THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},lambert:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\nvarying vec3 vLightBack;\n#endif",
THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_lambert_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,
THREE.ShaderChunk.defaultnormal_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_lambert_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\nvarying vec3 vLightBack;\n#endif",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,
THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,"void main() {\ngl_FragColor = vec4( vec3 ( 1.0 ), opacity );",THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,"#ifdef DOUBLE_SIDED\nif ( gl_FrontFacing )\ngl_FragColor.xyz *= vLightFront;\nelse\ngl_FragColor.xyz *= vLightBack;\n#else\ngl_FragColor.xyz *= vLightFront;\n#endif",THREE.ShaderChunk.lightmap_fragment,
THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},phong:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.bump,THREE.UniformsLib.normalmap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},specular:{type:"c",
value:new THREE.Color(1118481)},shininess:{type:"f",value:30},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define PHONG\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_phong_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,
"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"vNormal = normalize( transformedNormal );",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,"vViewPosition = -mvPosition.xyz;",THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,
THREE.ShaderChunk.lights_phong_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;\nuniform vec3 ambient;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.lights_phong_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,
THREE.ShaderChunk.bumpmap_pars_fragment,THREE.ShaderChunk.normalmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,"void main() {\ngl_FragColor = vec4( vec3 ( 1.0 ), opacity );",THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lights_phong_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,
THREE.ShaderChunk.fog_fragment,"}"].join("\n")},particle_basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.particle,THREE.UniformsLib.shadowmap]),vertexShader:["uniform float size;\nuniform float scale;",THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n#ifdef USE_SIZEATTENUATION\ngl_PointSize = size * ( scale / length( mvPosition.xyz ) );\n#else\ngl_PointSize = size;\n#endif\ngl_Position = projectionMatrix * mvPosition;",
THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;\nuniform float opacity;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_particle_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,"void main() {\ngl_FragColor = vec4( psColor, opacity );",THREE.ShaderChunk.map_particle_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.shadowmap_fragment,
THREE.ShaderChunk.fog_fragment,"}"].join("\n")},dashed:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;",THREE.ShaderChunk.color_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"vLineDistance = scale * lineDistance;\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n}"].join("\n"),
fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,"void main() {\nif ( mod( vLineDistance, totalSize ) > dashSize ) {\ndiscard;\n}\ngl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2E3},opacity:{type:"f",
value:1}},vertexShader:"void main() {\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform float mNear;\nuniform float mFar;\nuniform float opacity;\nvoid main() {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat color = 1.0 - smoothstep( mNear, mFar, depth );\ngl_FragColor = vec4( vec3( color ), opacity );\n}"},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",THREE.ShaderChunk.morphtarget_pars_vertex,"void main() {\nvNormal = normalize( normalMatrix * normal );",
THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,"}"].join("\n"),fragmentShader:"uniform float opacity;\nvarying vec3 vNormal;\nvoid main() {\ngl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );\n}"},normalmap:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{enableAO:{type:"i",value:0},enableDiffuse:{type:"i",value:0},enableSpecular:{type:"i",value:0},enableReflection:{type:"i",value:0},enableDisplacement:{type:"i",
value:0},tDisplacement:{type:"t",value:null},tDiffuse:{type:"t",value:null},tCube:{type:"t",value:null},tNormal:{type:"t",value:null},tSpecular:{type:"t",value:null},tAO:{type:"t",value:null},uNormalScale:{type:"v2",value:new THREE.Vector2(1,1)},uDisplacementBias:{type:"f",value:0},uDisplacementScale:{type:"f",value:1},uDiffuseColor:{type:"c",value:new THREE.Color(16777215)},uSpecularColor:{type:"c",value:new THREE.Color(1118481)},uAmbientColor:{type:"c",value:new THREE.Color(16777215)},uShininess:{type:"f",
value:30},uOpacity:{type:"f",value:1},useRefract:{type:"i",value:0},uRefractionRatio:{type:"f",value:0.98},uReflectivity:{type:"f",value:0.5},uOffset:{type:"v2",value:new THREE.Vector2(0,0)},uRepeat:{type:"v2",value:new THREE.Vector2(1,1)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),fragmentShader:["uniform vec3 uAmbientColor;\nuniform vec3 uDiffuseColor;\nuniform vec3 uSpecularColor;\nuniform float uShininess;\nuniform float uOpacity;\nuniform bool enableDiffuse;\nuniform bool enableSpecular;\nuniform bool enableAO;\nuniform bool enableReflection;\nuniform sampler2D tDiffuse;\nuniform sampler2D tNormal;\nuniform sampler2D tSpecular;\nuniform sampler2D tAO;\nuniform samplerCube tCube;\nuniform vec2 uNormalScale;\nuniform bool useRefract;\nuniform float uRefractionRatio;\nuniform float uReflectivity;\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nuniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_HEMI_LIGHTS > 0\nuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\nuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\nuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n#endif\n#ifdef WRAP_AROUND\nuniform vec3 wrapRGB;\n#endif\nvarying vec3 vWorldPosition;\nvarying vec3 vViewPosition;",
THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,"void main() {\ngl_FragColor = vec4( vec3( 1.0 ), uOpacity );\nvec3 specularTex = vec3( 1.0 );\nvec3 normalTex = texture2D( tNormal, vUv ).xyz * 2.0 - 1.0;\nnormalTex.xy *= uNormalScale;\nnormalTex = normalize( normalTex );\nif( enableDiffuse ) {\n#ifdef GAMMA_INPUT\nvec4 texelColor = texture2D( tDiffuse, vUv );\ntexelColor.xyz *= texelColor.xyz;\ngl_FragColor = gl_FragColor * texelColor;\n#else\ngl_FragColor = gl_FragColor * texture2D( tDiffuse, vUv );\n#endif\n}\nif( enableAO ) {\n#ifdef GAMMA_INPUT\nvec4 aoColor = texture2D( tAO, vUv );\naoColor.xyz *= aoColor.xyz;\ngl_FragColor.xyz = gl_FragColor.xyz * aoColor.xyz;\n#else\ngl_FragColor.xyz = gl_FragColor.xyz * texture2D( tAO, vUv ).xyz;\n#endif\n}\nif( enableSpecular )\nspecularTex = texture2D( tSpecular, vUv ).xyz;\nmat3 tsb = mat3( normalize( vTangent ), normalize( vBinormal ), normalize( vNormal ) );\nvec3 finalNormal = tsb * normalTex;\n#ifdef FLIP_SIDED\nfinalNormal = -finalNormal;\n#endif\nvec3 normal = normalize( finalNormal );\nvec3 viewPosition = normalize( vViewPosition );\n#if MAX_POINT_LIGHTS > 0\nvec3 pointDiffuse = vec3( 0.0 );\nvec3 pointSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 pointVector = lPosition.xyz + vViewPosition.xyz;\nfloat pointDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\npointDistance = 1.0 - min( ( length( pointVector ) / pointLightDistance[ i ] ), 1.0 );\npointVector = normalize( pointVector );\n#ifdef WRAP_AROUND\nfloat pointDiffuseWeightFull = max( dot( normal, pointVector ), 0.0 );\nfloat pointDiffuseWeightHalf = max( 0.5 * dot( normal, pointVector ) + 0.5, 0.0 );\nvec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n#else\nfloat pointDiffuseWeight = max( dot( normal, pointVector ), 0.0 );\n#endif\npointDiffuse += pointDistance * pointLightColor[ i ] * uDiffuseColor * pointDiffuseWeight;\nvec3 pointHalfVector = normalize( pointVector + viewPosition );\nfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\nfloat pointSpecularWeight = specularTex.r * max( pow( pointDotNormalHalf, uShininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( uShininess + 2.0001 ) / 8.0;\nvec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( pointVector, pointHalfVector ), 5.0 );\npointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * pointDistance * specularNormalization;\n#else\npointSpecular += pointDistance * pointLightColor[ i ] * uSpecularColor * pointSpecularWeight * pointDiffuseWeight;\n#endif\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nvec3 spotDiffuse = vec3( 0.0 );\nvec3 spotSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 spotVector = lPosition.xyz + vViewPosition.xyz;\nfloat spotDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nspotDistance = 1.0 - min( ( length( spotVector ) / spotLightDistance[ i ] ), 1.0 );\nspotVector = normalize( spotVector );\nfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\nif ( spotEffect > spotLightAngleCos[ i ] ) {\nspotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );\n#ifdef WRAP_AROUND\nfloat spotDiffuseWeightFull = max( dot( normal, spotVector ), 0.0 );\nfloat spotDiffuseWeightHalf = max( 0.5 * dot( normal, spotVector ) + 0.5, 0.0 );\nvec3 spotDiffuseWeight = mix( vec3 ( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n#else\nfloat spotDiffuseWeight = max( dot( normal, spotVector ), 0.0 );\n#endif\nspotDiffuse += spotDistance * spotLightColor[ i ] * uDiffuseColor * spotDiffuseWeight * spotEffect;\nvec3 spotHalfVector = normalize( spotVector + viewPosition );\nfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\nfloat spotSpecularWeight = specularTex.r * max( pow( spotDotNormalHalf, uShininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( uShininess + 2.0001 ) / 8.0;\nvec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( spotVector, spotHalfVector ), 5.0 );\nspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * spotDistance * specularNormalization * spotEffect;\n#else\nspotSpecular += spotDistance * spotLightColor[ i ] * uSpecularColor * spotSpecularWeight * spotDiffuseWeight * spotEffect;\n#endif\n}\n}\n#endif\n#if MAX_DIR_LIGHTS > 0\nvec3 dirDiffuse = vec3( 0.0 );\nvec3 dirSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_DIR_LIGHTS; i++ ) {\nvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\nvec3 dirVector = normalize( lDirection.xyz );\n#ifdef WRAP_AROUND\nfloat directionalLightWeightingFull = max( dot( normal, dirVector ), 0.0 );\nfloat directionalLightWeightingHalf = max( 0.5 * dot( normal, dirVector ) + 0.5, 0.0 );\nvec3 dirDiffuseWeight = mix( vec3( directionalLightWeightingFull ), vec3( directionalLightWeightingHalf ), wrapRGB );\n#else\nfloat dirDiffuseWeight = max( dot( normal, dirVector ), 0.0 );\n#endif\ndirDiffuse += directionalLightColor[ i ] * uDiffuseColor * dirDiffuseWeight;\nvec3 dirHalfVector = normalize( dirVector + viewPosition );\nfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\nfloat dirSpecularWeight = specularTex.r * max( pow( dirDotNormalHalf, uShininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( uShininess + 2.0001 ) / 8.0;\nvec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );\ndirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n#else\ndirSpecular += directionalLightColor[ i ] * uSpecularColor * dirSpecularWeight * dirDiffuseWeight;\n#endif\n}\n#endif\n#if MAX_HEMI_LIGHTS > 0\nvec3 hemiDiffuse  = vec3( 0.0 );\nvec3 hemiSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\nvec3 lVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( normal, lVector );\nfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\nvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\nhemiDiffuse += uDiffuseColor * hemiColor;\nvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\nfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\nfloat hemiSpecularWeightSky = specularTex.r * max( pow( hemiDotNormalHalfSky, uShininess ), 0.0 );\nvec3 lVectorGround = -lVector;\nvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\nfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\nfloat hemiSpecularWeightGround = specularTex.r * max( pow( hemiDotNormalHalfGround, uShininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat dotProductGround = dot( normal, lVectorGround );\nfloat specularNormalization = ( uShininess + 2.0001 ) / 8.0;\nvec3 schlickSky = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( lVector, hemiHalfVectorSky ), 5.0 );\nvec3 schlickGround = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 5.0 );\nhemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n#else\nhemiSpecular += uSpecularColor * hemiColor * ( hemiSpecularWeightSky + hemiSpecularWeightGround ) * hemiDiffuseWeight;\n#endif\n}\n#endif\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n#if MAX_DIR_LIGHTS > 0\ntotalDiffuse += dirDiffuse;\ntotalSpecular += dirSpecular;\n#endif\n#if MAX_HEMI_LIGHTS > 0\ntotalDiffuse += hemiDiffuse;\ntotalSpecular += hemiSpecular;\n#endif\n#if MAX_POINT_LIGHTS > 0\ntotalDiffuse += pointDiffuse;\ntotalSpecular += pointSpecular;\n#endif\n#if MAX_SPOT_LIGHTS > 0\ntotalDiffuse += spotDiffuse;\ntotalSpecular += spotSpecular;\n#endif\n#ifdef METAL\ngl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * uAmbientColor + totalSpecular );\n#else\ngl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * uAmbientColor ) + totalSpecular;\n#endif\nif ( enableReflection ) {\nvec3 vReflect;\nvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\nif ( useRefract ) {\nvReflect = refract( cameraToVertex, normal, uRefractionRatio );\n} else {\nvReflect = reflect( cameraToVertex, normal );\n}\nvec4 cubeColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );\n#ifdef GAMMA_INPUT\ncubeColor.xyz *= cubeColor.xyz;\n#endif\ngl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularTex.r * uReflectivity );\n}",
THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n"),vertexShader:["attribute vec4 tangent;\nuniform vec2 uOffset;\nuniform vec2 uRepeat;\nuniform bool enableDisplacement;\n#ifdef VERTEX_TEXTURES\nuniform sampler2D tDisplacement;\nuniform float uDisplacementScale;\nuniform float uDisplacementBias;\n#endif\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vWorldPosition;\nvarying vec3 vViewPosition;",
THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,"#ifdef USE_SKINNING\nvNormal = normalize( normalMatrix * skinnedNormal.xyz );\nvec4 skinnedTangent = skinMatrix * vec4( tangent.xyz, 0.0 );\nvTangent = normalize( normalMatrix * skinnedTangent.xyz );\n#else\nvNormal = normalize( normalMatrix * normal );\nvTangent = normalize( normalMatrix * tangent.xyz );\n#endif\nvBinormal = normalize( cross( vNormal, vTangent ) * tangent.w );\nvUv = uv * uRepeat + uOffset;\nvec3 displacedPosition;\n#ifdef VERTEX_TEXTURES\nif ( enableDisplacement ) {\nvec3 dv = texture2D( tDisplacement, uv ).xyz;\nfloat df = uDisplacementScale * dv.x + uDisplacementBias;\ndisplacedPosition = position + normalize( normal ) * df;\n} else {\n#ifdef USE_SKINNING\nvec4 skinVertex = vec4( position, 1.0 );\nvec4 skinned  = boneMatX * skinVertex * skinWeight.x;\nskinned \t  += boneMatY * skinVertex * skinWeight.y;\ndisplacedPosition  = skinned.xyz;\n#else\ndisplacedPosition = position;\n#endif\n}\n#else\n#ifdef USE_SKINNING\nvec4 skinVertex = vec4( position, 1.0 );\nvec4 skinned  = boneMatX * skinVertex * skinWeight.x;\nskinned \t  += boneMatY * skinVertex * skinWeight.y;\ndisplacedPosition  = skinned.xyz;\n#else\ndisplacedPosition = position;\n#endif\n#endif\nvec4 mvPosition = modelViewMatrix * vec4( displacedPosition, 1.0 );\nvec4 worldPosition = modelMatrix * vec4( displacedPosition, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\nvWorldPosition = worldPosition.xyz;\nvViewPosition = -mvPosition.xyz;\n#ifdef USE_SHADOWMAP\nfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\nvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n}\n#endif\n}"].join("\n")},
cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:"varying vec3 vWorldPosition;\nvoid main() {\nvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\nvWorldPosition = worldPosition.xyz;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform samplerCube tCube;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\nvoid main() {\ngl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n}"},
depthRGBA:{uniforms:{},vertexShader:[THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,"}"].join("\n"),fragmentShader:"vec4 pack_depth( const in float depth ) {\nconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\nconst vec4 bit_mask  = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\nvec4 res = fract( depth * bit_shift );\nres -= res.xxyz * bit_mask;\nreturn res;\n}\nvoid main() {\ngl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\n}"}};THREE.WebGLRenderer=function(a){function b(a,b){var c=a.vertices.length,d=b.material;if(d.attributes){void 0===a.__webglCustomAttributesList&&(a.__webglCustomAttributesList=[]);for(var e in d.attributes){var f=d.attributes[e];if(!f.__webglInitialized||f.createUniqueBuffers){f.__webglInitialized=!0;var h=1;"v2"===f.type?h=2:"v3"===f.type?h=3:"v4"===f.type?h=4:"c"===f.type&&(h=3);f.size=h;f.array=new Float32Array(c*h);f.buffer=j.createBuffer();f.buffer.belongsToAttribute=e;f.needsUpdate=!0}a.__webglCustomAttributesList.push(f)}}}
function c(a,b){var c=b.geometry,h=a.faces3,g=3*h.length,i=1*h.length,k=3*h.length,h=d(b,a),m=f(h),l=e(h),n=h.vertexColors?h.vertexColors:!1;a.__vertexArray=new Float32Array(3*g);l&&(a.__normalArray=new Float32Array(3*g));c.hasTangents&&(a.__tangentArray=new Float32Array(4*g));n&&(a.__colorArray=new Float32Array(3*g));m&&(0<c.faceVertexUvs.length&&(a.__uvArray=new Float32Array(2*g)),1<c.faceVertexUvs.length&&(a.__uv2Array=new Float32Array(2*g)));b.geometry.skinWeights.length&&b.geometry.skinIndices.length&&
(a.__skinIndexArray=new Float32Array(4*g),a.__skinWeightArray=new Float32Array(4*g));a.__faceArray=new Uint16Array(3*i);a.__lineArray=new Uint16Array(2*k);if(a.numMorphTargets){a.__morphTargetsArrays=[];c=0;for(m=a.numMorphTargets;c<m;c++)a.__morphTargetsArrays.push(new Float32Array(3*g))}if(a.numMorphNormals){a.__morphNormalsArrays=[];c=0;for(m=a.numMorphNormals;c<m;c++)a.__morphNormalsArrays.push(new Float32Array(3*g))}a.__webglFaceCount=3*i;a.__webglLineCount=2*k;if(h.attributes){void 0===a.__webglCustomAttributesList&&
(a.__webglCustomAttributesList=[]);for(var p in h.attributes){var i=h.attributes[p],k={},q;for(q in i)k[q]=i[q];if(!k.__webglInitialized||k.createUniqueBuffers)k.__webglInitialized=!0,c=1,"v2"===k.type?c=2:"v3"===k.type?c=3:"v4"===k.type?c=4:"c"===k.type&&(c=3),k.size=c,k.array=new Float32Array(g*c),k.buffer=j.createBuffer(),k.buffer.belongsToAttribute=p,i.needsUpdate=!0,k.__original=i;a.__webglCustomAttributesList.push(k)}}a.__inittedArrays=!0}function d(a,b){return a.material instanceof THREE.MeshFaceMaterial?
a.material.materials[b.materialIndex]:a.material}function e(a){return a instanceof THREE.MeshBasicMaterial&&!a.envMap||a instanceof THREE.MeshDepthMaterial?!1:a&&void 0!==a.shading&&a.shading===THREE.SmoothShading?THREE.SmoothShading:THREE.FlatShading}function f(a){return a.map||a.lightMap||a.bumpMap||a.normalMap||a.specularMap||a instanceof THREE.ShaderMaterial?!0:!1}function h(a){va[a]||(j.enableVertexAttribArray(a),va[a]=!0)}function g(){for(var a in va)va[a]&&(j.disableVertexAttribArray(a),va[a]=
!1)}function i(a,b){return a.z!==b.z?b.z-a.z:a.id-b.id}function k(a,b){return b[0]-a[0]}function m(a,b,c){if(a.length)for(var d=0,e=a.length;d<e;d++)ea=Ba=null,Aa=$=U=Y=ka=Ga=ja=-1,ta=!0,a[d].render(b,c,sb,pb),ea=Ba=null,Aa=$=U=Y=ka=Ga=ja=-1,ta=!0}function l(a,b,c,d,e,f,h,g){var j,i,k,m;b?(i=a.length-1,m=b=-1):(i=0,b=a.length,m=1);for(var l=i;l!==b;l+=m)if(j=a[l],j.render){i=j.object;k=j.buffer;if(g)j=g;else{j=j[c];if(!j)continue;h&&L.setBlending(j.blending,j.blendEquation,j.blendSrc,j.blendDst);
L.setDepthTest(j.depthTest);L.setDepthWrite(j.depthWrite);A(j.polygonOffset,j.polygonOffsetFactor,j.polygonOffsetUnits)}L.setMaterialFaces(j);k instanceof THREE.BufferGeometry?L.renderBufferDirect(d,e,f,j,k,i):L.renderBuffer(d,e,f,j,k,i)}}function p(a,b,c,d,e,f,h){for(var g,j,i=0,k=a.length;i<k;i++)if(g=a[i],j=g.object,j.visible){if(h)g=h;else{g=g[b];if(!g)continue;f&&L.setBlending(g.blending,g.blendEquation,g.blendSrc,g.blendDst);L.setDepthTest(g.depthTest);L.setDepthWrite(g.depthWrite);A(g.polygonOffset,
g.polygonOffsetFactor,g.polygonOffsetUnits)}L.renderImmediateObject(c,d,e,g,j)}}function t(a,d){var e,f,h,g;if(void 0===a.__webglInit&&(a.__webglInit=!0,a._modelViewMatrix=new THREE.Matrix4,a._normalMatrix=new THREE.Matrix3,void 0!==a.geometry&&void 0===a.geometry.__webglInit&&(a.geometry.__webglInit=!0,a.geometry.addEventListener("dispose",Cb)),f=a.geometry,void 0!==f))if(f instanceof THREE.BufferGeometry){var i,k;for(i in f.attributes)k="index"===i?j.ELEMENT_ARRAY_BUFFER:j.ARRAY_BUFFER,g=f.attributes[i],
void 0===g.numItems&&(g.numItems=g.array.length),g.buffer=j.createBuffer(),j.bindBuffer(k,g.buffer),j.bufferData(k,g.array,j.STATIC_DRAW)}else if(a instanceof THREE.Mesh){h=a.material;if(void 0===f.geometryGroups){i=f;var m,l,n;k={};var p=i.morphTargets.length,q=i.morphNormals.length,t=h instanceof THREE.MeshFaceMaterial;i.geometryGroups={};h=0;for(m=i.faces.length;h<m;h++)l=i.faces[h],l=t?l.materialIndex:0,void 0===k[l]&&(k[l]={hash:l,counter:0}),n=k[l].hash+"_"+k[l].counter,void 0===i.geometryGroups[n]&&
(i.geometryGroups[n]={faces3:[],materialIndex:l,vertices:0,numMorphTargets:p,numMorphNormals:q}),65535<i.geometryGroups[n].vertices+3&&(k[l].counter+=1,n=k[l].hash+"_"+k[l].counter,void 0===i.geometryGroups[n]&&(i.geometryGroups[n]={faces3:[],materialIndex:l,vertices:0,numMorphTargets:p,numMorphNormals:q})),i.geometryGroups[n].faces3.push(h),i.geometryGroups[n].vertices+=3;i.geometryGroupsList=[];for(g in i.geometryGroups)i.geometryGroups[g].id=V++,i.geometryGroupsList.push(i.geometryGroups[g])}for(e in f.geometryGroups)if(g=
f.geometryGroups[e],!g.__webglVertexBuffer){i=g;i.__webglVertexBuffer=j.createBuffer();i.__webglNormalBuffer=j.createBuffer();i.__webglTangentBuffer=j.createBuffer();i.__webglColorBuffer=j.createBuffer();i.__webglUVBuffer=j.createBuffer();i.__webglUV2Buffer=j.createBuffer();i.__webglSkinIndicesBuffer=j.createBuffer();i.__webglSkinWeightsBuffer=j.createBuffer();i.__webglFaceBuffer=j.createBuffer();i.__webglLineBuffer=j.createBuffer();p=k=void 0;if(i.numMorphTargets){i.__webglMorphTargetsBuffers=[];
k=0;for(p=i.numMorphTargets;k<p;k++)i.__webglMorphTargetsBuffers.push(j.createBuffer())}if(i.numMorphNormals){i.__webglMorphNormalsBuffers=[];k=0;for(p=i.numMorphNormals;k<p;k++)i.__webglMorphNormalsBuffers.push(j.createBuffer())}L.info.memory.geometries++;c(g,a);f.verticesNeedUpdate=!0;f.morphTargetsNeedUpdate=!0;f.elementsNeedUpdate=!0;f.uvsNeedUpdate=!0;f.normalsNeedUpdate=!0;f.tangentsNeedUpdate=!0;f.colorsNeedUpdate=!0}}else a instanceof THREE.Line?f.__webglVertexBuffer||(g=f,g.__webglVertexBuffer=
j.createBuffer(),g.__webglColorBuffer=j.createBuffer(),g.__webglLineDistanceBuffer=j.createBuffer(),L.info.memory.geometries++,g=f,i=g.vertices.length,g.__vertexArray=new Float32Array(3*i),g.__colorArray=new Float32Array(3*i),g.__lineDistanceArray=new Float32Array(1*i),g.__webglLineCount=i,b(g,a),f.verticesNeedUpdate=!0,f.colorsNeedUpdate=!0,f.lineDistancesNeedUpdate=!0):a instanceof THREE.ParticleSystem&&!f.__webglVertexBuffer&&(g=f,g.__webglVertexBuffer=j.createBuffer(),g.__webglColorBuffer=j.createBuffer(),
L.info.memory.geometries++,g=f,i=g.vertices.length,g.__vertexArray=new Float32Array(3*i),g.__colorArray=new Float32Array(3*i),g.__sortArray=[],g.__webglParticleCount=i,b(g,a),f.verticesNeedUpdate=!0,f.colorsNeedUpdate=!0);if(void 0===a.__webglActive){if(a instanceof THREE.Mesh)if(f=a.geometry,f instanceof THREE.BufferGeometry)s(d.__webglObjects,f,a);else{if(f instanceof THREE.Geometry)for(e in f.geometryGroups)g=f.geometryGroups[e],s(d.__webglObjects,g,a)}else a instanceof THREE.Line||a instanceof
THREE.ParticleSystem?(f=a.geometry,s(d.__webglObjects,f,a)):a instanceof THREE.ImmediateRenderObject||a.immediateRenderCallback?d.__webglObjectsImmediate.push({id:null,object:a,opaque:null,transparent:null,z:0}):a instanceof THREE.Sprite?d.__webglSprites.push(a):a instanceof THREE.LensFlare&&d.__webglFlares.push(a);a.__webglActive=!0}}function s(a,b,c){a.push({id:null,buffer:b,object:c,opaque:null,transparent:null,z:0})}function q(a){for(var b in a.attributes)if(a.attributes[b].needsUpdate)return!0;
return!1}function n(a){for(var b in a.attributes)a.attributes[b].needsUpdate=!1}function u(a,b){a instanceof THREE.Mesh||a instanceof THREE.ParticleSystem||a instanceof THREE.Line?r(b.__webglObjects,a):a instanceof THREE.Sprite?v(b.__webglSprites,a):a instanceof THREE.LensFlare?v(b.__webglFlares,a):(a instanceof THREE.ImmediateRenderObject||a.immediateRenderCallback)&&r(b.__webglObjectsImmediate,a);delete a.__webglActive}function r(a,b){for(var c=a.length-1;0<=c;c--)a[c].object===b&&a.splice(c,1)}
function v(a,b){for(var c=a.length-1;0<=c;c--)a[c]===b&&a.splice(c,1)}function z(a,b,c,d,e){P=0;d.needsUpdate&&(d.program&&Gb(d),L.initMaterial(d,b,c,e),d.needsUpdate=!1);d.morphTargets&&!e.__webglMorphTargetInfluences&&(e.__webglMorphTargetInfluences=new Float32Array(L.maxMorphTargets));var f=!1,h=d.program,g=h.uniforms,i=d.uniforms;h!==Ba&&(j.useProgram(h),Ba=h,f=!0);d.id!==Aa&&(Aa=d.id,f=!0);if(f||a!==ea)j.uniformMatrix4fv(g.projectionMatrix,!1,a.projectionMatrix.elements),a!==ea&&(ea=a);if(d.skinning)if(yb&&
e.useVertexTexture){if(null!==g.boneTexture){var k=G();j.uniform1i(g.boneTexture,k);L.setTexture(e.boneTexture,k)}null!==g.boneTextureWidth&&j.uniform1i(g.boneTextureWidth,e.boneTextureWidth);null!==g.boneTextureHeight&&j.uniform1i(g.boneTextureHeight,e.boneTextureHeight)}else null!==g.boneGlobalMatrices&&j.uniformMatrix4fv(g.boneGlobalMatrices,!1,e.boneMatrices);if(f){c&&d.fog&&(i.fogColor.value=c.color,c instanceof THREE.Fog?(i.fogNear.value=c.near,i.fogFar.value=c.far):c instanceof THREE.FogExp2&&
(i.fogDensity.value=c.density));if(d instanceof THREE.MeshPhongMaterial||d instanceof THREE.MeshLambertMaterial||d.lights){if(ta){for(var m,l=k=0,n=0,p,q,t,r=Pa,s=r.directional.colors,u=r.directional.positions,v=r.point.colors,z=r.point.positions,x=r.point.distances,A=r.spot.colors,E=r.spot.positions,D=r.spot.distances,K=r.spot.directions,O=r.spot.anglesCos,C=r.spot.exponents,J=r.hemi.skyColors,V=r.hemi.groundColors,M=r.hemi.positions,Q=0,U=0,Y=0,za=0,$=0,dc=0,X=0,W=0,R=m=0,c=t=R=0,f=b.length;c<f;c++)m=
b[c],m.onlyShadow||(p=m.color,q=m.intensity,t=m.distance,m instanceof THREE.AmbientLight?m.visible&&(L.gammaInput?(k+=p.r*p.r,l+=p.g*p.g,n+=p.b*p.b):(k+=p.r,l+=p.g,n+=p.b)):m instanceof THREE.DirectionalLight?($+=1,m.visible&&(fa.setFromMatrixPosition(m.matrixWorld),ra.setFromMatrixPosition(m.target.matrixWorld),fa.sub(ra),fa.normalize(),0===fa.x&&0===fa.y&&0===fa.z||(m=3*Q,u[m]=fa.x,u[m+1]=fa.y,u[m+2]=fa.z,L.gammaInput?w(s,m,p,q*q):y(s,m,p,q),Q+=1))):m instanceof THREE.PointLight?(dc+=1,m.visible&&
(R=3*U,L.gammaInput?w(v,R,p,q*q):y(v,R,p,q),ra.setFromMatrixPosition(m.matrixWorld),z[R]=ra.x,z[R+1]=ra.y,z[R+2]=ra.z,x[U]=t,U+=1)):m instanceof THREE.SpotLight?(X+=1,m.visible&&(R=3*Y,L.gammaInput?w(A,R,p,q*q):y(A,R,p,q),ra.setFromMatrixPosition(m.matrixWorld),E[R]=ra.x,E[R+1]=ra.y,E[R+2]=ra.z,D[Y]=t,fa.copy(ra),ra.setFromMatrixPosition(m.target.matrixWorld),fa.sub(ra),fa.normalize(),K[R]=fa.x,K[R+1]=fa.y,K[R+2]=fa.z,O[Y]=Math.cos(m.angle),C[Y]=m.exponent,Y+=1)):m instanceof THREE.HemisphereLight&&
(W+=1,m.visible&&(fa.setFromMatrixPosition(m.matrixWorld),fa.normalize(),0===fa.x&&0===fa.y&&0===fa.z||(t=3*za,M[t]=fa.x,M[t+1]=fa.y,M[t+2]=fa.z,p=m.color,m=m.groundColor,L.gammaInput?(q*=q,w(J,t,p,q),w(V,t,m,q)):(y(J,t,p,q),y(V,t,m,q)),za+=1))));c=3*Q;for(f=Math.max(s.length,3*$);c<f;c++)s[c]=0;c=3*U;for(f=Math.max(v.length,3*dc);c<f;c++)v[c]=0;c=3*Y;for(f=Math.max(A.length,3*X);c<f;c++)A[c]=0;c=3*za;for(f=Math.max(J.length,3*W);c<f;c++)J[c]=0;c=3*za;for(f=Math.max(V.length,3*W);c<f;c++)V[c]=0;r.directional.length=
Q;r.point.length=U;r.spot.length=Y;r.hemi.length=za;r.ambient[0]=k;r.ambient[1]=l;r.ambient[2]=n;ta=!1}c=Pa;i.ambientLightColor.value=c.ambient;i.directionalLightColor.value=c.directional.colors;i.directionalLightDirection.value=c.directional.positions;i.pointLightColor.value=c.point.colors;i.pointLightPosition.value=c.point.positions;i.pointLightDistance.value=c.point.distances;i.spotLightColor.value=c.spot.colors;i.spotLightPosition.value=c.spot.positions;i.spotLightDistance.value=c.spot.distances;
i.spotLightDirection.value=c.spot.directions;i.spotLightAngleCos.value=c.spot.anglesCos;i.spotLightExponent.value=c.spot.exponents;i.hemisphereLightSkyColor.value=c.hemi.skyColors;i.hemisphereLightGroundColor.value=c.hemi.groundColors;i.hemisphereLightDirection.value=c.hemi.positions}if(d instanceof THREE.MeshBasicMaterial||d instanceof THREE.MeshLambertMaterial||d instanceof THREE.MeshPhongMaterial){i.opacity.value=d.opacity;L.gammaInput?i.diffuse.value.copyGammaToLinear(d.color):i.diffuse.value=
d.color;i.map.value=d.map;i.lightMap.value=d.lightMap;i.specularMap.value=d.specularMap;d.bumpMap&&(i.bumpMap.value=d.bumpMap,i.bumpScale.value=d.bumpScale);d.normalMap&&(i.normalMap.value=d.normalMap,i.normalScale.value.copy(d.normalScale));var ba;d.map?ba=d.map:d.specularMap?ba=d.specularMap:d.normalMap?ba=d.normalMap:d.bumpMap&&(ba=d.bumpMap);void 0!==ba&&(c=ba.offset,ba=ba.repeat,i.offsetRepeat.value.set(c.x,c.y,ba.x,ba.y));i.envMap.value=d.envMap;i.flipEnvMap.value=d.envMap instanceof THREE.WebGLRenderTargetCube?
1:-1;i.reflectivity.value=d.reflectivity;i.refractionRatio.value=d.refractionRatio;i.combine.value=d.combine;i.useRefract.value=d.envMap&&d.envMap.mapping instanceof THREE.CubeRefractionMapping}d instanceof THREE.LineBasicMaterial?(i.diffuse.value=d.color,i.opacity.value=d.opacity):d instanceof THREE.LineDashedMaterial?(i.diffuse.value=d.color,i.opacity.value=d.opacity,i.dashSize.value=d.dashSize,i.totalSize.value=d.dashSize+d.gapSize,i.scale.value=d.scale):d instanceof THREE.ParticleSystemMaterial?
(i.psColor.value=d.color,i.opacity.value=d.opacity,i.size.value=d.size,i.scale.value=B.height/2,i.map.value=d.map):d instanceof THREE.MeshPhongMaterial?(i.shininess.value=d.shininess,L.gammaInput?(i.ambient.value.copyGammaToLinear(d.ambient),i.emissive.value.copyGammaToLinear(d.emissive),i.specular.value.copyGammaToLinear(d.specular)):(i.ambient.value=d.ambient,i.emissive.value=d.emissive,i.specular.value=d.specular),d.wrapAround&&i.wrapRGB.value.copy(d.wrapRGB)):d instanceof THREE.MeshLambertMaterial?
(L.gammaInput?(i.ambient.value.copyGammaToLinear(d.ambient),i.emissive.value.copyGammaToLinear(d.emissive)):(i.ambient.value=d.ambient,i.emissive.value=d.emissive),d.wrapAround&&i.wrapRGB.value.copy(d.wrapRGB)):d instanceof THREE.MeshDepthMaterial?(i.mNear.value=a.near,i.mFar.value=a.far,i.opacity.value=d.opacity):d instanceof THREE.MeshNormalMaterial&&(i.opacity.value=d.opacity);if(e.receiveShadow&&!d._shadowPass&&i.shadowMatrix){c=ba=0;for(f=b.length;c<f;c++)if(k=b[c],k.castShadow&&(k instanceof
THREE.SpotLight||k instanceof THREE.DirectionalLight&&!k.shadowCascade))i.shadowMap.value[ba]=k.shadowMap,i.shadowMapSize.value[ba]=k.shadowMapSize,i.shadowMatrix.value[ba]=k.shadowMatrix,i.shadowDarkness.value[ba]=k.shadowDarkness,i.shadowBias.value[ba]=k.shadowBias,ba++}b=d.uniformsList;i=0;for(ba=b.length;i<ba;i++)if(f=h.uniforms[b[i][1]])if(c=b[i][0],l=c.type,k=c.value,"i"===l)j.uniform1i(f,k);else if("f"===l)j.uniform1f(f,k);else if("v2"===l)j.uniform2f(f,k.x,k.y);else if("v3"===l)j.uniform3f(f,
k.x,k.y,k.z);else if("v4"===l)j.uniform4f(f,k.x,k.y,k.z,k.w);else if("c"===l)j.uniform3f(f,k.r,k.g,k.b);else if("iv1"===l)j.uniform1iv(f,k);else if("iv"===l)j.uniform3iv(f,k);else if("fv1"===l)j.uniform1fv(f,k);else if("fv"===l)j.uniform3fv(f,k);else if("v2v"===l){void 0===c._array&&(c._array=new Float32Array(2*k.length));l=0;for(n=k.length;l<n;l++)r=2*l,c._array[r]=k[l].x,c._array[r+1]=k[l].y;j.uniform2fv(f,c._array)}else if("v3v"===l){void 0===c._array&&(c._array=new Float32Array(3*k.length));l=
0;for(n=k.length;l<n;l++)r=3*l,c._array[r]=k[l].x,c._array[r+1]=k[l].y,c._array[r+2]=k[l].z;j.uniform3fv(f,c._array)}else if("v4v"===l){void 0===c._array&&(c._array=new Float32Array(4*k.length));l=0;for(n=k.length;l<n;l++)r=4*l,c._array[r]=k[l].x,c._array[r+1]=k[l].y,c._array[r+2]=k[l].z,c._array[r+3]=k[l].w;j.uniform4fv(f,c._array)}else if("m4"===l)void 0===c._array&&(c._array=new Float32Array(16)),k.flattenToArray(c._array),j.uniformMatrix4fv(f,!1,c._array);else if("m4v"===l){void 0===c._array&&
(c._array=new Float32Array(16*k.length));l=0;for(n=k.length;l<n;l++)k[l].flattenToArrayOffset(c._array,16*l);j.uniformMatrix4fv(f,!1,c._array)}else if("t"===l){if(r=k,k=G(),j.uniform1i(f,k),r)if(r.image instanceof Array&&6===r.image.length){if(c=r,f=k,6===c.image.length)if(c.needsUpdate){c.image.__webglTextureCube||(c.addEventListener("dispose",Db),c.image.__webglTextureCube=j.createTexture(),L.info.memory.textures++);j.activeTexture(j.TEXTURE0+f);j.bindTexture(j.TEXTURE_CUBE_MAP,c.image.__webglTextureCube);
j.pixelStorei(j.UNPACK_FLIP_Y_WEBGL,c.flipY);f=c instanceof THREE.CompressedTexture;k=[];for(l=0;6>l;l++)L.autoScaleCubemaps&&!f?(n=k,r=l,s=c.image[l],v=ac,s.width<=v&&s.height<=v||(z=Math.max(s.width,s.height),u=Math.floor(s.width*v/z),v=Math.floor(s.height*v/z),z=document.createElement("canvas"),z.width=u,z.height=v,z.getContext("2d").drawImage(s,0,0,s.width,s.height,0,0,u,v),s=z),n[r]=s):k[l]=c.image[l];l=k[0];n=0===(l.width&l.width-1)&&0===(l.height&l.height-1);r=I(c.format);s=I(c.type);F(j.TEXTURE_CUBE_MAP,
c,n);for(l=0;6>l;l++)if(f){v=k[l].mipmaps;z=0;for(x=v.length;z<x;z++)u=v[z],c.format!==THREE.RGBAFormat?j.compressedTexImage2D(j.TEXTURE_CUBE_MAP_POSITIVE_X+l,z,r,u.width,u.height,0,u.data):j.texImage2D(j.TEXTURE_CUBE_MAP_POSITIVE_X+l,z,r,u.width,u.height,0,r,s,u.data)}else j.texImage2D(j.TEXTURE_CUBE_MAP_POSITIVE_X+l,0,r,r,s,k[l]);c.generateMipmaps&&n&&j.generateMipmap(j.TEXTURE_CUBE_MAP);c.needsUpdate=!1;if(c.onUpdate)c.onUpdate()}else j.activeTexture(j.TEXTURE0+f),j.bindTexture(j.TEXTURE_CUBE_MAP,
c.image.__webglTextureCube)}else r instanceof THREE.WebGLRenderTargetCube?(c=r,j.activeTexture(j.TEXTURE0+k),j.bindTexture(j.TEXTURE_CUBE_MAP,c.__webglTexture)):L.setTexture(r,k)}else if("tv"===l){void 0===c._array&&(c._array=[]);l=0;for(n=c.value.length;l<n;l++)c._array[l]=G();j.uniform1iv(f,c._array);l=0;for(n=c.value.length;l<n;l++)r=c.value[l],k=c._array[l],r&&L.setTexture(r,k)}else console.warn("THREE.WebGLRenderer: Unknown uniform type: "+l);if((d instanceof THREE.ShaderMaterial||d instanceof
THREE.MeshPhongMaterial||d.envMap)&&null!==g.cameraPosition)ra.setFromMatrixPosition(a.matrixWorld),j.uniform3f(g.cameraPosition,ra.x,ra.y,ra.z);(d instanceof THREE.MeshPhongMaterial||d instanceof THREE.MeshLambertMaterial||d instanceof THREE.ShaderMaterial||d.skinning)&&null!==g.viewMatrix&&j.uniformMatrix4fv(g.viewMatrix,!1,a.matrixWorldInverse.elements)}j.uniformMatrix4fv(g.modelViewMatrix,!1,e._modelViewMatrix.elements);g.normalMatrix&&j.uniformMatrix3fv(g.normalMatrix,!1,e._normalMatrix.elements);
null!==g.modelMatrix&&j.uniformMatrix4fv(g.modelMatrix,!1,e.matrixWorld.elements);return h}function G(){var a=P;a>=Mb&&console.warn("WebGLRenderer: trying to use "+a+" texture units while this GPU supports only "+Mb);P+=1;return a}function w(a,b,c,d){a[b]=c.r*c.r*d;a[b+1]=c.g*c.g*d;a[b+2]=c.b*c.b*d}function y(a,b,c,d){a[b]=c.r*d;a[b+1]=c.g*d;a[b+2]=c.b*d}function E(a){a!==wa&&(j.lineWidth(a),wa=a)}function A(a,b,c){Da!==a&&(a?j.enable(j.POLYGON_OFFSET_FILL):j.disable(j.POLYGON_OFFSET_FILL),Da=a);
if(a&&(Ua!==b||Qa!==c))j.polygonOffset(b,c),Ua=b,Qa=c}function K(a){for(var a=a.split("\n"),b=0,c=a.length;b<c;b++)a[b]=b+1+": "+a[b];return a.join("\n")}function D(a,b){var c;"fragment"===a?c=j.createShader(j.FRAGMENT_SHADER):"vertex"===a&&(c=j.createShader(j.VERTEX_SHADER));j.shaderSource(c,b);j.compileShader(c);return!j.getShaderParameter(c,j.COMPILE_STATUS)?(console.error(j.getShaderInfoLog(c)),console.error(K(b)),null):c}function F(a,b,c){c?(j.texParameteri(a,j.TEXTURE_WRAP_S,I(b.wrapS)),j.texParameteri(a,
j.TEXTURE_WRAP_T,I(b.wrapT)),j.texParameteri(a,j.TEXTURE_MAG_FILTER,I(b.magFilter)),j.texParameteri(a,j.TEXTURE_MIN_FILTER,I(b.minFilter))):(j.texParameteri(a,j.TEXTURE_WRAP_S,j.CLAMP_TO_EDGE),j.texParameteri(a,j.TEXTURE_WRAP_T,j.CLAMP_TO_EDGE),j.texParameteri(a,j.TEXTURE_MAG_FILTER,x(b.magFilter)),j.texParameteri(a,j.TEXTURE_MIN_FILTER,x(b.minFilter)));if(La&&b.type!==THREE.FloatType&&(1<b.anisotropy||b.__oldAnisotropy))j.texParameterf(a,La.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(b.anisotropy,Nb)),b.__oldAnisotropy=
b.anisotropy}function O(a,b){j.bindRenderbuffer(j.RENDERBUFFER,a);b.depthBuffer&&!b.stencilBuffer?(j.renderbufferStorage(j.RENDERBUFFER,j.DEPTH_COMPONENT16,b.width,b.height),j.framebufferRenderbuffer(j.FRAMEBUFFER,j.DEPTH_ATTACHMENT,j.RENDERBUFFER,a)):b.depthBuffer&&b.stencilBuffer?(j.renderbufferStorage(j.RENDERBUFFER,j.DEPTH_STENCIL,b.width,b.height),j.framebufferRenderbuffer(j.FRAMEBUFFER,j.DEPTH_STENCIL_ATTACHMENT,j.RENDERBUFFER,a)):j.renderbufferStorage(j.RENDERBUFFER,j.RGBA4,b.width,b.height)}
function x(a){return a===THREE.NearestFilter||a===THREE.NearestMipMapNearestFilter||a===THREE.NearestMipMapLinearFilter?j.NEAREST:j.LINEAR}function I(a){if(a===THREE.RepeatWrapping)return j.REPEAT;if(a===THREE.ClampToEdgeWrapping)return j.CLAMP_TO_EDGE;if(a===THREE.MirroredRepeatWrapping)return j.MIRRORED_REPEAT;if(a===THREE.NearestFilter)return j.NEAREST;if(a===THREE.NearestMipMapNearestFilter)return j.NEAREST_MIPMAP_NEAREST;if(a===THREE.NearestMipMapLinearFilter)return j.NEAREST_MIPMAP_LINEAR;if(a===
THREE.LinearFilter)return j.LINEAR;if(a===THREE.LinearMipMapNearestFilter)return j.LINEAR_MIPMAP_NEAREST;if(a===THREE.LinearMipMapLinearFilter)return j.LINEAR_MIPMAP_LINEAR;if(a===THREE.UnsignedByteType)return j.UNSIGNED_BYTE;if(a===THREE.UnsignedShort4444Type)return j.UNSIGNED_SHORT_4_4_4_4;if(a===THREE.UnsignedShort5551Type)return j.UNSIGNED_SHORT_5_5_5_1;if(a===THREE.UnsignedShort565Type)return j.UNSIGNED_SHORT_5_6_5;if(a===THREE.ByteType)return j.BYTE;if(a===THREE.ShortType)return j.SHORT;if(a===
THREE.UnsignedShortType)return j.UNSIGNED_SHORT;if(a===THREE.IntType)return j.INT;if(a===THREE.UnsignedIntType)return j.UNSIGNED_INT;if(a===THREE.FloatType)return j.FLOAT;if(a===THREE.AlphaFormat)return j.ALPHA;if(a===THREE.RGBFormat)return j.RGB;if(a===THREE.RGBAFormat)return j.RGBA;if(a===THREE.LuminanceFormat)return j.LUMINANCE;if(a===THREE.LuminanceAlphaFormat)return j.LUMINANCE_ALPHA;if(a===THREE.AddEquation)return j.FUNC_ADD;if(a===THREE.SubtractEquation)return j.FUNC_SUBTRACT;if(a===THREE.ReverseSubtractEquation)return j.FUNC_REVERSE_SUBTRACT;
if(a===THREE.ZeroFactor)return j.ZERO;if(a===THREE.OneFactor)return j.ONE;if(a===THREE.SrcColorFactor)return j.SRC_COLOR;if(a===THREE.OneMinusSrcColorFactor)return j.ONE_MINUS_SRC_COLOR;if(a===THREE.SrcAlphaFactor)return j.SRC_ALPHA;if(a===THREE.OneMinusSrcAlphaFactor)return j.ONE_MINUS_SRC_ALPHA;if(a===THREE.DstAlphaFactor)return j.DST_ALPHA;if(a===THREE.OneMinusDstAlphaFactor)return j.ONE_MINUS_DST_ALPHA;if(a===THREE.DstColorFactor)return j.DST_COLOR;if(a===THREE.OneMinusDstColorFactor)return j.ONE_MINUS_DST_COLOR;
if(a===THREE.SrcAlphaSaturateFactor)return j.SRC_ALPHA_SATURATE;if(void 0!==Fa){if(a===THREE.RGB_S3TC_DXT1_Format)return Fa.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===THREE.RGBA_S3TC_DXT1_Format)return Fa.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===THREE.RGBA_S3TC_DXT3_Format)return Fa.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===THREE.RGBA_S3TC_DXT5_Format)return Fa.COMPRESSED_RGBA_S3TC_DXT5_EXT}return 0}console.log("THREE.WebGLRenderer",THREE.REVISION);var a=a||{},B=void 0!==a.canvas?a.canvas:document.createElement("canvas"),
M=void 0!==a.precision?a.precision:"highp",J=void 0!==a.alpha?a.alpha:!1,ca=void 0!==a.premultipliedAlpha?a.premultipliedAlpha:!0,na=void 0!==a.antialias?a.antialias:!1,pa=void 0!==a.stencil?a.stencil:!0,C=void 0!==a.preserveDrawingBuffer?a.preserveDrawingBuffer:!1,Q=new THREE.Color(0),R=0;this.domElement=B;this.context=null;this.devicePixelRatio=void 0!==a.devicePixelRatio?a.devicePixelRatio:void 0!==self.devicePixelRatio?self.devicePixelRatio:1;this.autoUpdateObjects=this.sortObjects=this.autoClearStencil=
this.autoClearDepth=this.autoClearColor=this.autoClear=!0;this.shadowMapEnabled=this.physicallyBasedShading=this.gammaOutput=this.gammaInput=!1;this.shadowMapAutoUpdate=!0;this.shadowMapType=THREE.PCFShadowMap;this.shadowMapCullFace=THREE.CullFaceFront;this.shadowMapCascade=this.shadowMapDebug=!1;this.maxMorphTargets=8;this.maxMorphNormals=4;this.autoScaleCubemaps=!0;this.renderPluginsPre=[];this.renderPluginsPost=[];this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,
faces:0,points:0}};var L=this,da=[],za=0,Ba=null,ba=null,Aa=-1,$=null,ea=null,V=0,P=0,Y=-1,U=-1,ja=-1,sa=-1,ha=-1,Ka=-1,Ga=-1,ka=-1,Da=null,Ua=null,Qa=null,wa=null,bb=0,cb=0,Ma=B.width,fb=B.height,sb=0,pb=0,va={},la=new THREE.Frustum,Ea=new THREE.Matrix4,gb=new THREE.Matrix4,ra=new THREE.Vector3,fa=new THREE.Vector3,ta=!0,Pa={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],
anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},j,Oa,ua,La,Fa;try{var Ra={alpha:J,premultipliedAlpha:ca,antialias:na,stencil:pa,preserveDrawingBuffer:C};j=B.getContext("webgl",Ra)||B.getContext("experimental-webgl",Ra);if(null===j)throw"Error creating WebGL context.";}catch(Zb){console.error(Zb)}Oa=j.getExtension("OES_texture_float");j.getExtension("OES_texture_float_linear");ua=j.getExtension("OES_standard_derivatives");La=j.getExtension("EXT_texture_filter_anisotropic")||
j.getExtension("MOZ_EXT_texture_filter_anisotropic")||j.getExtension("WEBKIT_EXT_texture_filter_anisotropic");Fa=j.getExtension("WEBGL_compressed_texture_s3tc")||j.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||j.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");Oa||console.log("THREE.WebGLRenderer: Float textures not supported.");ua||console.log("THREE.WebGLRenderer: Standard derivatives not supported.");La||console.log("THREE.WebGLRenderer: Anisotropic texture filtering not supported.");
Fa||console.log("THREE.WebGLRenderer: S3TC compressed textures not supported.");void 0===j.getShaderPrecisionFormat&&(j.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}});j.clearColor(0,0,0,1);j.clearDepth(1);j.clearStencil(0);j.enable(j.DEPTH_TEST);j.depthFunc(j.LEQUAL);j.frontFace(j.CCW);j.cullFace(j.BACK);j.enable(j.CULL_FACE);j.enable(j.BLEND);j.blendEquation(j.FUNC_ADD);j.blendFunc(j.SRC_ALPHA,j.ONE_MINUS_SRC_ALPHA);j.viewport(bb,cb,Ma,fb);j.clearColor(Q.r,Q.g,Q.b,
R);this.context=j;var Mb=j.getParameter(j.MAX_TEXTURE_IMAGE_UNITS),$b=j.getParameter(j.MAX_VERTEX_TEXTURE_IMAGE_UNITS);j.getParameter(j.MAX_TEXTURE_SIZE);var ac=j.getParameter(j.MAX_CUBE_MAP_TEXTURE_SIZE),Nb=La?j.getParameter(La.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,Bb=0<$b,yb=Bb&&Oa;Fa&&j.getParameter(j.COMPRESSED_TEXTURE_FORMATS);var bc=j.getShaderPrecisionFormat(j.VERTEX_SHADER,j.HIGH_FLOAT),cc=j.getShaderPrecisionFormat(j.VERTEX_SHADER,j.MEDIUM_FLOAT);j.getShaderPrecisionFormat(j.VERTEX_SHADER,j.LOW_FLOAT);
var qc=j.getShaderPrecisionFormat(j.FRAGMENT_SHADER,j.HIGH_FLOAT),rc=j.getShaderPrecisionFormat(j.FRAGMENT_SHADER,j.MEDIUM_FLOAT);j.getShaderPrecisionFormat(j.FRAGMENT_SHADER,j.LOW_FLOAT);j.getShaderPrecisionFormat(j.VERTEX_SHADER,j.HIGH_INT);j.getShaderPrecisionFormat(j.VERTEX_SHADER,j.MEDIUM_INT);j.getShaderPrecisionFormat(j.VERTEX_SHADER,j.LOW_INT);j.getShaderPrecisionFormat(j.FRAGMENT_SHADER,j.HIGH_INT);j.getShaderPrecisionFormat(j.FRAGMENT_SHADER,j.MEDIUM_INT);j.getShaderPrecisionFormat(j.FRAGMENT_SHADER,
j.LOW_INT);var sc=0<bc.precision&&0<qc.precision,Ob=0<cc.precision&&0<rc.precision;"highp"===M&&!sc&&(Ob?(M="mediump",console.warn("WebGLRenderer: highp not supported, using mediump")):(M="lowp",console.warn("WebGLRenderer: highp and mediump not supported, using lowp")));"mediump"===M&&!Ob&&(M="lowp",console.warn("WebGLRenderer: mediump not supported, using lowp"));this.getContext=function(){return j};this.supportsVertexTextures=function(){return Bb};this.supportsFloatTextures=function(){return Oa};
this.supportsStandardDerivatives=function(){return ua};this.supportsCompressedTextureS3TC=function(){return Fa};this.getMaxAnisotropy=function(){return Nb};this.getPrecision=function(){return M};this.setSize=function(a,b,c){B.width=a*this.devicePixelRatio;B.height=b*this.devicePixelRatio;1!==this.devicePixelRatio&&!1!==c&&(B.style.width=a+"px",B.style.height=b+"px");this.setViewport(0,0,B.width,B.height)};this.setViewport=function(a,b,c,d){bb=void 0!==a?a:0;cb=void 0!==b?b:0;Ma=void 0!==c?c:B.width;
fb=void 0!==d?d:B.height;j.viewport(bb,cb,Ma,fb)};this.setScissor=function(a,b,c,d){j.scissor(a,b,c,d)};this.enableScissorTest=function(a){a?j.enable(j.SCISSOR_TEST):j.disable(j.SCISSOR_TEST)};this.setClearColor=function(a,b){Q.set(a);R=void 0!==b?b:1;j.clearColor(Q.r,Q.g,Q.b,R)};this.setClearColorHex=function(a,b){console.warn("DEPRECATED: .setClearColorHex() is being removed. Use .setClearColor() instead.");this.setClearColor(a,b)};this.getClearColor=function(){return Q};this.getClearAlpha=function(){return R};
this.clear=function(a,b,c){var d=0;if(void 0===a||a)d|=j.COLOR_BUFFER_BIT;if(void 0===b||b)d|=j.DEPTH_BUFFER_BIT;if(void 0===c||c)d|=j.STENCIL_BUFFER_BIT;j.clear(d)};this.clearColor=function(){j.clear(j.COLOR_BUFFER_BIT)};this.clearDepth=function(){j.clear(j.DEPTH_BUFFER_BIT)};this.clearStencil=function(){j.clear(j.STENCIL_BUFFER_BIT)};this.clearTarget=function(a,b,c,d){this.setRenderTarget(a);this.clear(b,c,d)};this.addPostPlugin=function(a){a.init(this);this.renderPluginsPost.push(a)};this.addPrePlugin=
function(a){a.init(this);this.renderPluginsPre.push(a)};this.updateShadowMap=function(a,b){Ba=null;Aa=$=ka=Ga=ja=-1;ta=!0;U=Y=-1;this.shadowMapPlugin.update(a,b)};var Cb=function(a){a=a.target;a.removeEventListener("dispose",Cb);a.__webglInit=void 0;if(a instanceof THREE.BufferGeometry){var b=a.attributes,c;for(c in b)void 0!==b[c].buffer&&j.deleteBuffer(b[c].buffer);L.info.memory.geometries--}else if(void 0!==a.geometryGroups)for(b in a.geometryGroups){c=a.geometryGroups[b];if(void 0!==c.numMorphTargets)for(var d=
0,e=c.numMorphTargets;d<e;d++)j.deleteBuffer(c.__webglMorphTargetsBuffers[d]);if(void 0!==c.numMorphNormals){d=0;for(e=c.numMorphNormals;d<e;d++)j.deleteBuffer(c.__webglMorphNormalsBuffers[d])}Hb(c)}else Hb(a)},Db=function(a){a=a.target;a.removeEventListener("dispose",Db);a.image&&a.image.__webglTextureCube?j.deleteTexture(a.image.__webglTextureCube):a.__webglInit&&(a.__webglInit=!1,j.deleteTexture(a.__webglTexture));L.info.memory.textures--},Eb=function(a){a=a.target;a.removeEventListener("dispose",
Eb);if(a&&a.__webglTexture)if(j.deleteTexture(a.__webglTexture),a instanceof THREE.WebGLRenderTargetCube)for(var b=0;6>b;b++)j.deleteFramebuffer(a.__webglFramebuffer[b]),j.deleteRenderbuffer(a.__webglRenderbuffer[b]);else j.deleteFramebuffer(a.__webglFramebuffer),j.deleteRenderbuffer(a.__webglRenderbuffer);L.info.memory.textures--},Fb=function(a){a=a.target;a.removeEventListener("dispose",Fb);Gb(a)},Hb=function(a){void 0!==a.__webglVertexBuffer&&j.deleteBuffer(a.__webglVertexBuffer);void 0!==a.__webglNormalBuffer&&
j.deleteBuffer(a.__webglNormalBuffer);void 0!==a.__webglTangentBuffer&&j.deleteBuffer(a.__webglTangentBuffer);void 0!==a.__webglColorBuffer&&j.deleteBuffer(a.__webglColorBuffer);void 0!==a.__webglUVBuffer&&j.deleteBuffer(a.__webglUVBuffer);void 0!==a.__webglUV2Buffer&&j.deleteBuffer(a.__webglUV2Buffer);void 0!==a.__webglSkinIndicesBuffer&&j.deleteBuffer(a.__webglSkinIndicesBuffer);void 0!==a.__webglSkinWeightsBuffer&&j.deleteBuffer(a.__webglSkinWeightsBuffer);void 0!==a.__webglFaceBuffer&&j.deleteBuffer(a.__webglFaceBuffer);
void 0!==a.__webglLineBuffer&&j.deleteBuffer(a.__webglLineBuffer);void 0!==a.__webglLineDistanceBuffer&&j.deleteBuffer(a.__webglLineDistanceBuffer);if(void 0!==a.__webglCustomAttributesList)for(var b in a.__webglCustomAttributesList)j.deleteBuffer(a.__webglCustomAttributesList[b].buffer);L.info.memory.geometries--},Gb=function(a){var b=a.program;if(void 0!==b){a.program=void 0;var c,d,e=!1,a=0;for(c=da.length;a<c;a++)if(d=da[a],d.program===b){d.usedTimes--;0===d.usedTimes&&(e=!0);break}if(!0===e){e=
[];a=0;for(c=da.length;a<c;a++)d=da[a],d.program!==b&&e.push(d);da=e;j.deleteProgram(b);L.info.memory.programs--}}};this.renderBufferImmediate=function(a,b,c){a.hasPositions&&!a.__webglVertexBuffer&&(a.__webglVertexBuffer=j.createBuffer());a.hasNormals&&!a.__webglNormalBuffer&&(a.__webglNormalBuffer=j.createBuffer());a.hasUvs&&!a.__webglUvBuffer&&(a.__webglUvBuffer=j.createBuffer());a.hasColors&&!a.__webglColorBuffer&&(a.__webglColorBuffer=j.createBuffer());a.hasPositions&&(j.bindBuffer(j.ARRAY_BUFFER,
a.__webglVertexBuffer),j.bufferData(j.ARRAY_BUFFER,a.positionArray,j.DYNAMIC_DRAW),j.enableVertexAttribArray(b.attributes.position),j.vertexAttribPointer(b.attributes.position,3,j.FLOAT,!1,0,0));if(a.hasNormals){j.bindBuffer(j.ARRAY_BUFFER,a.__webglNormalBuffer);if(c.shading===THREE.FlatShading){var d,e,f,g,h,i,k,l,m,n,p,q=3*a.count;for(p=0;p<q;p+=9)n=a.normalArray,d=n[p],e=n[p+1],f=n[p+2],g=n[p+3],i=n[p+4],l=n[p+5],h=n[p+6],k=n[p+7],m=n[p+8],d=(d+g+h)/3,e=(e+i+k)/3,f=(f+l+m)/3,n[p]=d,n[p+1]=e,n[p+
2]=f,n[p+3]=d,n[p+4]=e,n[p+5]=f,n[p+6]=d,n[p+7]=e,n[p+8]=f}j.bufferData(j.ARRAY_BUFFER,a.normalArray,j.DYNAMIC_DRAW);j.enableVertexAttribArray(b.attributes.normal);j.vertexAttribPointer(b.attributes.normal,3,j.FLOAT,!1,0,0)}a.hasUvs&&c.map&&(j.bindBuffer(j.ARRAY_BUFFER,a.__webglUvBuffer),j.bufferData(j.ARRAY_BUFFER,a.uvArray,j.DYNAMIC_DRAW),j.enableVertexAttribArray(b.attributes.uv),j.vertexAttribPointer(b.attributes.uv,2,j.FLOAT,!1,0,0));a.hasColors&&c.vertexColors!==THREE.NoColors&&(j.bindBuffer(j.ARRAY_BUFFER,
a.__webglColorBuffer),j.bufferData(j.ARRAY_BUFFER,a.colorArray,j.DYNAMIC_DRAW),j.enableVertexAttribArray(b.attributes.color),j.vertexAttribPointer(b.attributes.color,3,j.FLOAT,!1,0,0));j.drawArrays(j.TRIANGLES,0,a.count);a.count=0};this.renderBufferDirect=function(a,b,c,d,e,f){if(!1!==d.visible){var i,k,l,m;i=z(a,b,c,d,f);b=i.attributes;a=e.attributes;c=!1;i=16777215*e.id+2*i.id+(d.wireframe?1:0);i!==$&&($=i,c=!0);c&&g();if(f instanceof THREE.Mesh)if(f=a.index){e=e.offsets;1<e.length&&(c=!0);for(var n=
0,p=e.length;n<p;n++){var q=e[n].index;if(c){for(k in b)l=b[k],i=a[k],0<=l&&(i?(m=i.itemSize,j.bindBuffer(j.ARRAY_BUFFER,i.buffer),h(l),j.vertexAttribPointer(l,m,j.FLOAT,!1,0,4*q*m)):d.defaultAttributeValues&&(2===d.defaultAttributeValues[k].length?j.vertexAttrib2fv(l,d.defaultAttributeValues[k]):3===d.defaultAttributeValues[k].length&&j.vertexAttrib3fv(l,d.defaultAttributeValues[k])));j.bindBuffer(j.ELEMENT_ARRAY_BUFFER,f.buffer)}j.drawElements(j.TRIANGLES,e[n].count,j.UNSIGNED_SHORT,2*e[n].start);
L.info.render.calls++;L.info.render.vertices+=e[n].count;L.info.render.faces+=e[n].count/3}}else{if(c)for(k in b)"index"!==k&&(l=b[k],i=a[k],0<=l&&(i?(m=i.itemSize,j.bindBuffer(j.ARRAY_BUFFER,i.buffer),h(l),j.vertexAttribPointer(l,m,j.FLOAT,!1,0,0)):d.defaultAttributeValues&&d.defaultAttributeValues[k]&&(2===d.defaultAttributeValues[k].length?j.vertexAttrib2fv(l,d.defaultAttributeValues[k]):3===d.defaultAttributeValues[k].length&&j.vertexAttrib3fv(l,d.defaultAttributeValues[k]))));d=e.attributes.position;
j.drawArrays(j.TRIANGLES,0,d.numItems/3);L.info.render.calls++;L.info.render.vertices+=d.numItems/3;L.info.render.faces+=d.numItems/3/3}else if(f instanceof THREE.ParticleSystem){if(c){for(k in b)l=b[k],i=a[k],0<=l&&(i?(m=i.itemSize,j.bindBuffer(j.ARRAY_BUFFER,i.buffer),h(l),j.vertexAttribPointer(l,m,j.FLOAT,!1,0,0)):d.defaultAttributeValues&&d.defaultAttributeValues[k]&&(2===d.defaultAttributeValues[k].length?j.vertexAttrib2fv(l,d.defaultAttributeValues[k]):3===d.defaultAttributeValues[k].length&&
j.vertexAttrib3fv(l,d.defaultAttributeValues[k])));d=a.position;j.drawArrays(j.POINTS,0,d.numItems/3);L.info.render.calls++;L.info.render.points+=d.numItems/3}}else if(f instanceof THREE.Line&&c){for(k in b)l=b[k],i=a[k],0<=l&&(i?(m=i.itemSize,j.bindBuffer(j.ARRAY_BUFFER,i.buffer),h(l),j.vertexAttribPointer(l,m,j.FLOAT,!1,0,0)):d.defaultAttributeValues&&d.defaultAttributeValues[k]&&(2===d.defaultAttributeValues[k].length?j.vertexAttrib2fv(l,d.defaultAttributeValues[k]):3===d.defaultAttributeValues[k].length&&
j.vertexAttrib3fv(l,d.defaultAttributeValues[k])));k=f.type===THREE.LineStrip?j.LINE_STRIP:j.LINES;E(d.linewidth);d=a.position;j.drawArrays(k,0,d.numItems/3);L.info.render.calls++;L.info.render.points+=d.numItems}}};this.renderBuffer=function(a,b,c,d,e,f){if(!1!==d.visible){var i,l,c=z(a,b,c,d,f),a=c.attributes,b=!1,c=16777215*e.id+2*c.id+(d.wireframe?1:0);c!==$&&($=c,b=!0);b&&g();if(!d.morphTargets&&0<=a.position)b&&(j.bindBuffer(j.ARRAY_BUFFER,e.__webglVertexBuffer),h(a.position),j.vertexAttribPointer(a.position,
3,j.FLOAT,!1,0,0));else if(f.morphTargetBase){c=d.program.attributes;-1!==f.morphTargetBase&&0<=c.position?(j.bindBuffer(j.ARRAY_BUFFER,e.__webglMorphTargetsBuffers[f.morphTargetBase]),h(c.position),j.vertexAttribPointer(c.position,3,j.FLOAT,!1,0,0)):0<=c.position&&(j.bindBuffer(j.ARRAY_BUFFER,e.__webglVertexBuffer),h(c.position),j.vertexAttribPointer(c.position,3,j.FLOAT,!1,0,0));if(f.morphTargetForcedOrder.length){var m=0;l=f.morphTargetForcedOrder;for(i=f.morphTargetInfluences;m<d.numSupportedMorphTargets&&
m<l.length;)0<=c["morphTarget"+m]&&(j.bindBuffer(j.ARRAY_BUFFER,e.__webglMorphTargetsBuffers[l[m]]),h(c["morphTarget"+m]),j.vertexAttribPointer(c["morphTarget"+m],3,j.FLOAT,!1,0,0)),0<=c["morphNormal"+m]&&d.morphNormals&&(j.bindBuffer(j.ARRAY_BUFFER,e.__webglMorphNormalsBuffers[l[m]]),h(c["morphNormal"+m]),j.vertexAttribPointer(c["morphNormal"+m],3,j.FLOAT,!1,0,0)),f.__webglMorphTargetInfluences[m]=i[l[m]],m++}else{l=[];i=f.morphTargetInfluences;var n,p=i.length;for(n=0;n<p;n++)m=i[n],0<m&&l.push([m,
n]);l.length>d.numSupportedMorphTargets?(l.sort(k),l.length=d.numSupportedMorphTargets):l.length>d.numSupportedMorphNormals?l.sort(k):0===l.length&&l.push([0,0]);for(m=0;m<d.numSupportedMorphTargets;)l[m]?(n=l[m][1],0<=c["morphTarget"+m]&&(j.bindBuffer(j.ARRAY_BUFFER,e.__webglMorphTargetsBuffers[n]),h(c["morphTarget"+m]),j.vertexAttribPointer(c["morphTarget"+m],3,j.FLOAT,!1,0,0)),0<=c["morphNormal"+m]&&d.morphNormals&&(j.bindBuffer(j.ARRAY_BUFFER,e.__webglMorphNormalsBuffers[n]),h(c["morphNormal"+
m]),j.vertexAttribPointer(c["morphNormal"+m],3,j.FLOAT,!1,0,0)),f.__webglMorphTargetInfluences[m]=i[n]):f.__webglMorphTargetInfluences[m]=0,m++}null!==d.program.uniforms.morphTargetInfluences&&j.uniform1fv(d.program.uniforms.morphTargetInfluences,f.__webglMorphTargetInfluences)}if(b){if(e.__webglCustomAttributesList){i=0;for(l=e.__webglCustomAttributesList.length;i<l;i++)c=e.__webglCustomAttributesList[i],0<=a[c.buffer.belongsToAttribute]&&(j.bindBuffer(j.ARRAY_BUFFER,c.buffer),h(a[c.buffer.belongsToAttribute]),
j.vertexAttribPointer(a[c.buffer.belongsToAttribute],c.size,j.FLOAT,!1,0,0))}0<=a.color&&(0<f.geometry.colors.length||0<f.geometry.faces.length?(j.bindBuffer(j.ARRAY_BUFFER,e.__webglColorBuffer),h(a.color),j.vertexAttribPointer(a.color,3,j.FLOAT,!1,0,0)):d.defaultAttributeValues&&j.vertexAttrib3fv(a.color,d.defaultAttributeValues.color));0<=a.normal&&(j.bindBuffer(j.ARRAY_BUFFER,e.__webglNormalBuffer),h(a.normal),j.vertexAttribPointer(a.normal,3,j.FLOAT,!1,0,0));0<=a.tangent&&(j.bindBuffer(j.ARRAY_BUFFER,
e.__webglTangentBuffer),h(a.tangent),j.vertexAttribPointer(a.tangent,4,j.FLOAT,!1,0,0));0<=a.uv&&(f.geometry.faceVertexUvs[0]?(j.bindBuffer(j.ARRAY_BUFFER,e.__webglUVBuffer),h(a.uv),j.vertexAttribPointer(a.uv,2,j.FLOAT,!1,0,0)):d.defaultAttributeValues&&j.vertexAttrib2fv(a.uv,d.defaultAttributeValues.uv));0<=a.uv2&&(f.geometry.faceVertexUvs[1]?(j.bindBuffer(j.ARRAY_BUFFER,e.__webglUV2Buffer),h(a.uv2),j.vertexAttribPointer(a.uv2,2,j.FLOAT,!1,0,0)):d.defaultAttributeValues&&j.vertexAttrib2fv(a.uv2,
d.defaultAttributeValues.uv2));d.skinning&&(0<=a.skinIndex&&0<=a.skinWeight)&&(j.bindBuffer(j.ARRAY_BUFFER,e.__webglSkinIndicesBuffer),h(a.skinIndex),j.vertexAttribPointer(a.skinIndex,4,j.FLOAT,!1,0,0),j.bindBuffer(j.ARRAY_BUFFER,e.__webglSkinWeightsBuffer),h(a.skinWeight),j.vertexAttribPointer(a.skinWeight,4,j.FLOAT,!1,0,0));0<=a.lineDistance&&(j.bindBuffer(j.ARRAY_BUFFER,e.__webglLineDistanceBuffer),h(a.lineDistance),j.vertexAttribPointer(a.lineDistance,1,j.FLOAT,!1,0,0))}f instanceof THREE.Mesh?
(d.wireframe?(E(d.wireframeLinewidth),b&&j.bindBuffer(j.ELEMENT_ARRAY_BUFFER,e.__webglLineBuffer),j.drawElements(j.LINES,e.__webglLineCount,j.UNSIGNED_SHORT,0)):(b&&j.bindBuffer(j.ELEMENT_ARRAY_BUFFER,e.__webglFaceBuffer),j.drawElements(j.TRIANGLES,e.__webglFaceCount,j.UNSIGNED_SHORT,0)),L.info.render.calls++,L.info.render.vertices+=e.__webglFaceCount,L.info.render.faces+=e.__webglFaceCount/3):f instanceof THREE.Line?(f=f.type===THREE.LineStrip?j.LINE_STRIP:j.LINES,E(d.linewidth),j.drawArrays(f,0,
e.__webglLineCount),L.info.render.calls++):f instanceof THREE.ParticleSystem&&(j.drawArrays(j.POINTS,0,e.__webglParticleCount),L.info.render.calls++,L.info.render.points+=e.__webglParticleCount)}};this.render=function(a,b,c,d){if(!1===b instanceof THREE.Camera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else{var e,f,g,h,k=a.__lights,n=a.fog;Aa=-1;ta=!0;!0===a.autoUpdate&&a.updateMatrixWorld();void 0===b.parent&&b.updateMatrixWorld();b.matrixWorldInverse.getInverse(b.matrixWorld);
Ea.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse);la.setFromMatrix(Ea);this.autoUpdateObjects&&this.initWebGLObjects(a);m(this.renderPluginsPre,a,b);L.info.render.calls=0;L.info.render.vertices=0;L.info.render.faces=0;L.info.render.points=0;this.setRenderTarget(c);(this.autoClear||d)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil);h=a.__webglObjects;d=0;for(e=h.length;d<e;d++)if(f=h[d],g=f.object,f.id=d,f.render=!1,g.visible&&(!(g instanceof THREE.Mesh||g instanceof
THREE.ParticleSystem)||!g.frustumCulled||la.intersectsObject(g))){var q=g;q._modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,q.matrixWorld);q._normalMatrix.getNormalMatrix(q._modelViewMatrix);var q=f,r=q.buffer,t=void 0,s=t=void 0,s=q.object.material;if(s instanceof THREE.MeshFaceMaterial)t=r.materialIndex,t=s.materials[t],t.transparent?(q.transparent=t,q.opaque=null):(q.opaque=t,q.transparent=null);else if(t=s)t.transparent?(q.transparent=t,q.opaque=null):(q.opaque=t,q.transparent=null);f.render=
!0;!0===this.sortObjects&&(null!==g.renderDepth?f.z=g.renderDepth:(ra.setFromMatrixPosition(g.matrixWorld),ra.applyProjection(Ea),f.z=ra.z))}this.sortObjects&&h.sort(i);h=a.__webglObjectsImmediate;d=0;for(e=h.length;d<e;d++)f=h[d],g=f.object,g.visible&&(g._modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,g.matrixWorld),g._normalMatrix.getNormalMatrix(g._modelViewMatrix),g=f.object.material,g.transparent?(f.transparent=g,f.opaque=null):(f.opaque=g,f.transparent=null));a.overrideMaterial?(d=a.overrideMaterial,
this.setBlending(d.blending,d.blendEquation,d.blendSrc,d.blendDst),this.setDepthTest(d.depthTest),this.setDepthWrite(d.depthWrite),A(d.polygonOffset,d.polygonOffsetFactor,d.polygonOffsetUnits),l(a.__webglObjects,!1,"",b,k,n,!0,d),p(a.__webglObjectsImmediate,"",b,k,n,!1,d)):(d=null,this.setBlending(THREE.NoBlending),l(a.__webglObjects,!0,"opaque",b,k,n,!1,d),p(a.__webglObjectsImmediate,"opaque",b,k,n,!1,d),l(a.__webglObjects,!1,"transparent",b,k,n,!0,d),p(a.__webglObjectsImmediate,"transparent",b,
k,n,!0,d));m(this.renderPluginsPost,a,b);c&&(c.generateMipmaps&&c.minFilter!==THREE.NearestFilter&&c.minFilter!==THREE.LinearFilter)&&(c instanceof THREE.WebGLRenderTargetCube?(j.bindTexture(j.TEXTURE_CUBE_MAP,c.__webglTexture),j.generateMipmap(j.TEXTURE_CUBE_MAP),j.bindTexture(j.TEXTURE_CUBE_MAP,null)):(j.bindTexture(j.TEXTURE_2D,c.__webglTexture),j.generateMipmap(j.TEXTURE_2D),j.bindTexture(j.TEXTURE_2D,null)));this.setDepthTest(!0);this.setDepthWrite(!0)}};this.renderImmediateObject=function(a,
b,c,d,e){var f=z(a,b,c,d,e);$=-1;L.setMaterialFaces(d);e.immediateRenderCallback?e.immediateRenderCallback(f,j,la):e.render(function(a){L.renderBufferImmediate(a,f,d)})};this.initWebGLObjects=function(a){a.__webglObjects||(a.__webglObjects=[],a.__webglObjectsImmediate=[],a.__webglSprites=[],a.__webglFlares=[]);for(;a.__objectsAdded.length;)t(a.__objectsAdded[0],a),a.__objectsAdded.splice(0,1);for(;a.__objectsRemoved.length;)u(a.__objectsRemoved[0],a),a.__objectsRemoved.splice(0,1);for(var b=0,g=a.__webglObjects.length;b<
g;b++){var h=a.__webglObjects[b].object;void 0===h.__webglInit&&(void 0!==h.__webglActive&&u(h,a),t(h,a));var i=h,l=i.geometry,m=void 0,p=void 0,r=void 0;if(l instanceof THREE.BufferGeometry){var s=j.DYNAMIC_DRAW,v=!l.dynamic,z=l.attributes,y=void 0,x=void 0;for(y in z)x=z[y],x.needsUpdate&&("index"===y?(j.bindBuffer(j.ELEMENT_ARRAY_BUFFER,x.buffer),j.bufferData(j.ELEMENT_ARRAY_BUFFER,x.array,s)):(j.bindBuffer(j.ARRAY_BUFFER,x.buffer),j.bufferData(j.ARRAY_BUFFER,x.array,s)),x.needsUpdate=!1),v&&!x.dynamic&&
(x.array=null)}else if(i instanceof THREE.Mesh){for(var A=0,B=l.geometryGroupsList.length;A<B;A++)if(m=l.geometryGroupsList[A],r=d(i,m),l.buffersNeedUpdate&&c(m,i),p=r.attributes&&q(r),l.verticesNeedUpdate||l.morphTargetsNeedUpdate||l.elementsNeedUpdate||l.uvsNeedUpdate||l.normalsNeedUpdate||l.colorsNeedUpdate||l.tangentsNeedUpdate||p){var w=m,E=i,D=j.DYNAMIC_DRAW,G=!l.dynamic,F=r;if(w.__inittedArrays){var K=e(F),I=F.vertexColors?F.vertexColors:!1,L=f(F),O=K===THREE.SmoothShading,C=void 0,J=void 0,
V=void 0,M=void 0,Q=void 0,ba=void 0,R=void 0,U=void 0,Y=void 0,za=void 0,$=void 0,P=void 0,X=void 0,W=void 0,Ba=void 0,ea=void 0,Aa=void 0,ca=void 0,da=void 0,ha=void 0,fa=void 0,ja=void 0,ka=void 0,la=void 0,na=void 0,pa=void 0,sa=void 0,ta=void 0,ua=void 0,Ca=void 0,Da=void 0,Ga=void 0,Fa=void 0,Ka=void 0,Sa=void 0,La=void 0,va=void 0,wa=void 0,Qa=void 0,Ra=void 0,db=0,eb=0,Oa=0,Pa=0,Ua=0,hb=0,Ta=0,tb=0,Za=0,qa=0,xa=0,N=0,Na=void 0,ib=w.__vertexArray,bb=w.__uvArray,cb=w.__uv2Array,Ma=w.__normalArray,
Va=w.__tangentArray,jb=w.__colorArray,Wa=w.__skinIndexArray,Xa=w.__skinWeightArray,fb=w.__morphTargetsArrays,sb=w.__morphNormalsArrays,pb=w.__webglCustomAttributesList,H=void 0,Pb=w.__faceArray,vb=w.__lineArray,Ha=E.geometry,Bb=Ha.elementsNeedUpdate,yb=Ha.uvsNeedUpdate,Db=Ha.normalsNeedUpdate,Mb=Ha.tangentsNeedUpdate,Nb=Ha.colorsNeedUpdate,Ob=Ha.morphTargetsNeedUpdate,ec=Ha.vertices,aa=w.faces3,kb=Ha.faces,Cb=Ha.faceVertexUvs[0],Eb=Ha.faceVertexUvs[1],fc=Ha.skinIndices,Qb=Ha.skinWeights,Rb=Ha.morphTargets,
Fb=Ha.morphNormals;if(Ha.verticesNeedUpdate){C=0;for(J=aa.length;C<J;C++)M=kb[aa[C]],P=ec[M.a],X=ec[M.b],W=ec[M.c],ib[eb]=P.x,ib[eb+1]=P.y,ib[eb+2]=P.z,ib[eb+3]=X.x,ib[eb+4]=X.y,ib[eb+5]=X.z,ib[eb+6]=W.x,ib[eb+7]=W.y,ib[eb+8]=W.z,eb+=9;j.bindBuffer(j.ARRAY_BUFFER,w.__webglVertexBuffer);j.bufferData(j.ARRAY_BUFFER,ib,D)}if(Ob){Sa=0;for(La=Rb.length;Sa<La;Sa++){C=xa=0;for(J=aa.length;C<J;C++)Qa=aa[C],M=kb[Qa],P=Rb[Sa].vertices[M.a],X=Rb[Sa].vertices[M.b],W=Rb[Sa].vertices[M.c],va=fb[Sa],va[xa]=P.x,
va[xa+1]=P.y,va[xa+2]=P.z,va[xa+3]=X.x,va[xa+4]=X.y,va[xa+5]=X.z,va[xa+6]=W.x,va[xa+7]=W.y,va[xa+8]=W.z,F.morphNormals&&(O?(Ra=Fb[Sa].vertexNormals[Qa],ca=Ra.a,da=Ra.b,ha=Ra.c):ha=da=ca=Fb[Sa].faceNormals[Qa],wa=sb[Sa],wa[xa]=ca.x,wa[xa+1]=ca.y,wa[xa+2]=ca.z,wa[xa+3]=da.x,wa[xa+4]=da.y,wa[xa+5]=da.z,wa[xa+6]=ha.x,wa[xa+7]=ha.y,wa[xa+8]=ha.z),xa+=9;j.bindBuffer(j.ARRAY_BUFFER,w.__webglMorphTargetsBuffers[Sa]);j.bufferData(j.ARRAY_BUFFER,fb[Sa],D);F.morphNormals&&(j.bindBuffer(j.ARRAY_BUFFER,w.__webglMorphNormalsBuffers[Sa]),
j.bufferData(j.ARRAY_BUFFER,sb[Sa],D))}}if(Qb.length){C=0;for(J=aa.length;C<J;C++)M=kb[aa[C]],la=Qb[M.a],na=Qb[M.b],pa=Qb[M.c],Xa[qa]=la.x,Xa[qa+1]=la.y,Xa[qa+2]=la.z,Xa[qa+3]=la.w,Xa[qa+4]=na.x,Xa[qa+5]=na.y,Xa[qa+6]=na.z,Xa[qa+7]=na.w,Xa[qa+8]=pa.x,Xa[qa+9]=pa.y,Xa[qa+10]=pa.z,Xa[qa+11]=pa.w,sa=fc[M.a],ta=fc[M.b],ua=fc[M.c],Wa[qa]=sa.x,Wa[qa+1]=sa.y,Wa[qa+2]=sa.z,Wa[qa+3]=sa.w,Wa[qa+4]=ta.x,Wa[qa+5]=ta.y,Wa[qa+6]=ta.z,Wa[qa+7]=ta.w,Wa[qa+8]=ua.x,Wa[qa+9]=ua.y,Wa[qa+10]=ua.z,Wa[qa+11]=ua.w,qa+=12;
0<qa&&(j.bindBuffer(j.ARRAY_BUFFER,w.__webglSkinIndicesBuffer),j.bufferData(j.ARRAY_BUFFER,Wa,D),j.bindBuffer(j.ARRAY_BUFFER,w.__webglSkinWeightsBuffer),j.bufferData(j.ARRAY_BUFFER,Xa,D))}if(Nb&&I){C=0;for(J=aa.length;C<J;C++)M=kb[aa[C]],R=M.vertexColors,U=M.color,3===R.length&&I===THREE.VertexColors?(fa=R[0],ja=R[1],ka=R[2]):ka=ja=fa=U,jb[Za]=fa.r,jb[Za+1]=fa.g,jb[Za+2]=fa.b,jb[Za+3]=ja.r,jb[Za+4]=ja.g,jb[Za+5]=ja.b,jb[Za+6]=ka.r,jb[Za+7]=ka.g,jb[Za+8]=ka.b,Za+=9;0<Za&&(j.bindBuffer(j.ARRAY_BUFFER,
w.__webglColorBuffer),j.bufferData(j.ARRAY_BUFFER,jb,D))}if(Mb&&Ha.hasTangents){C=0;for(J=aa.length;C<J;C++)M=kb[aa[C]],Y=M.vertexTangents,Ba=Y[0],ea=Y[1],Aa=Y[2],Va[Ta]=Ba.x,Va[Ta+1]=Ba.y,Va[Ta+2]=Ba.z,Va[Ta+3]=Ba.w,Va[Ta+4]=ea.x,Va[Ta+5]=ea.y,Va[Ta+6]=ea.z,Va[Ta+7]=ea.w,Va[Ta+8]=Aa.x,Va[Ta+9]=Aa.y,Va[Ta+10]=Aa.z,Va[Ta+11]=Aa.w,Ta+=12;j.bindBuffer(j.ARRAY_BUFFER,w.__webglTangentBuffer);j.bufferData(j.ARRAY_BUFFER,Va,D)}if(Db&&K){C=0;for(J=aa.length;C<J;C++)if(M=kb[aa[C]],Q=M.vertexNormals,ba=M.normal,
3===Q.length&&O)for(Ca=0;3>Ca;Ca++)Ga=Q[Ca],Ma[hb]=Ga.x,Ma[hb+1]=Ga.y,Ma[hb+2]=Ga.z,hb+=3;else for(Ca=0;3>Ca;Ca++)Ma[hb]=ba.x,Ma[hb+1]=ba.y,Ma[hb+2]=ba.z,hb+=3;j.bindBuffer(j.ARRAY_BUFFER,w.__webglNormalBuffer);j.bufferData(j.ARRAY_BUFFER,Ma,D)}if(yb&&Cb&&L){C=0;for(J=aa.length;C<J;C++)if(V=aa[C],za=Cb[V],void 0!==za)for(Ca=0;3>Ca;Ca++)Fa=za[Ca],bb[Oa]=Fa.x,bb[Oa+1]=Fa.y,Oa+=2;0<Oa&&(j.bindBuffer(j.ARRAY_BUFFER,w.__webglUVBuffer),j.bufferData(j.ARRAY_BUFFER,bb,D))}if(yb&&Eb&&L){C=0;for(J=aa.length;C<
J;C++)if(V=aa[C],$=Eb[V],void 0!==$)for(Ca=0;3>Ca;Ca++)Ka=$[Ca],cb[Pa]=Ka.x,cb[Pa+1]=Ka.y,Pa+=2;0<Pa&&(j.bindBuffer(j.ARRAY_BUFFER,w.__webglUV2Buffer),j.bufferData(j.ARRAY_BUFFER,cb,D))}if(Bb){C=0;for(J=aa.length;C<J;C++)Pb[Ua]=db,Pb[Ua+1]=db+1,Pb[Ua+2]=db+2,Ua+=3,vb[tb]=db,vb[tb+1]=db+1,vb[tb+2]=db,vb[tb+3]=db+2,vb[tb+4]=db+1,vb[tb+5]=db+2,tb+=6,db+=3;j.bindBuffer(j.ELEMENT_ARRAY_BUFFER,w.__webglFaceBuffer);j.bufferData(j.ELEMENT_ARRAY_BUFFER,Pb,D);j.bindBuffer(j.ELEMENT_ARRAY_BUFFER,w.__webglLineBuffer);
j.bufferData(j.ELEMENT_ARRAY_BUFFER,vb,D)}if(pb){Ca=0;for(Da=pb.length;Ca<Da;Ca++)if(H=pb[Ca],H.__original.needsUpdate){N=0;if(1===H.size)if(void 0===H.boundTo||"vertices"===H.boundTo){C=0;for(J=aa.length;C<J;C++)M=kb[aa[C]],H.array[N]=H.value[M.a],H.array[N+1]=H.value[M.b],H.array[N+2]=H.value[M.c],N+=3}else{if("faces"===H.boundTo){C=0;for(J=aa.length;C<J;C++)Na=H.value[aa[C]],H.array[N]=Na,H.array[N+1]=Na,H.array[N+2]=Na,N+=3}}else if(2===H.size)if(void 0===H.boundTo||"vertices"===H.boundTo){C=
0;for(J=aa.length;C<J;C++)M=kb[aa[C]],P=H.value[M.a],X=H.value[M.b],W=H.value[M.c],H.array[N]=P.x,H.array[N+1]=P.y,H.array[N+2]=X.x,H.array[N+3]=X.y,H.array[N+4]=W.x,H.array[N+5]=W.y,N+=6}else{if("faces"===H.boundTo){C=0;for(J=aa.length;C<J;C++)W=X=P=Na=H.value[aa[C]],H.array[N]=P.x,H.array[N+1]=P.y,H.array[N+2]=X.x,H.array[N+3]=X.y,H.array[N+4]=W.x,H.array[N+5]=W.y,N+=6}}else if(3===H.size){var oa;oa="c"===H.type?["r","g","b"]:["x","y","z"];if(void 0===H.boundTo||"vertices"===H.boundTo){C=0;for(J=
aa.length;C<J;C++)M=kb[aa[C]],P=H.value[M.a],X=H.value[M.b],W=H.value[M.c],H.array[N]=P[oa[0]],H.array[N+1]=P[oa[1]],H.array[N+2]=P[oa[2]],H.array[N+3]=X[oa[0]],H.array[N+4]=X[oa[1]],H.array[N+5]=X[oa[2]],H.array[N+6]=W[oa[0]],H.array[N+7]=W[oa[1]],H.array[N+8]=W[oa[2]],N+=9}else if("faces"===H.boundTo){C=0;for(J=aa.length;C<J;C++)W=X=P=Na=H.value[aa[C]],H.array[N]=P[oa[0]],H.array[N+1]=P[oa[1]],H.array[N+2]=P[oa[2]],H.array[N+3]=X[oa[0]],H.array[N+4]=X[oa[1]],H.array[N+5]=X[oa[2]],H.array[N+6]=W[oa[0]],
H.array[N+7]=W[oa[1]],H.array[N+8]=W[oa[2]],N+=9}else if("faceVertices"===H.boundTo){C=0;for(J=aa.length;C<J;C++)Na=H.value[aa[C]],P=Na[0],X=Na[1],W=Na[2],H.array[N]=P[oa[0]],H.array[N+1]=P[oa[1]],H.array[N+2]=P[oa[2]],H.array[N+3]=X[oa[0]],H.array[N+4]=X[oa[1]],H.array[N+5]=X[oa[2]],H.array[N+6]=W[oa[0]],H.array[N+7]=W[oa[1]],H.array[N+8]=W[oa[2]],N+=9}}else if(4===H.size)if(void 0===H.boundTo||"vertices"===H.boundTo){C=0;for(J=aa.length;C<J;C++)M=kb[aa[C]],P=H.value[M.a],X=H.value[M.b],W=H.value[M.c],
H.array[N]=P.x,H.array[N+1]=P.y,H.array[N+2]=P.z,H.array[N+3]=P.w,H.array[N+4]=X.x,H.array[N+5]=X.y,H.array[N+6]=X.z,H.array[N+7]=X.w,H.array[N+8]=W.x,H.array[N+9]=W.y,H.array[N+10]=W.z,H.array[N+11]=W.w,N+=12}else if("faces"===H.boundTo){C=0;for(J=aa.length;C<J;C++)W=X=P=Na=H.value[aa[C]],H.array[N]=P.x,H.array[N+1]=P.y,H.array[N+2]=P.z,H.array[N+3]=P.w,H.array[N+4]=X.x,H.array[N+5]=X.y,H.array[N+6]=X.z,H.array[N+7]=X.w,H.array[N+8]=W.x,H.array[N+9]=W.y,H.array[N+10]=W.z,H.array[N+11]=W.w,N+=12}else if("faceVertices"===
H.boundTo){C=0;for(J=aa.length;C<J;C++)Na=H.value[aa[C]],P=Na[0],X=Na[1],W=Na[2],H.array[N]=P.x,H.array[N+1]=P.y,H.array[N+2]=P.z,H.array[N+3]=P.w,H.array[N+4]=X.x,H.array[N+5]=X.y,H.array[N+6]=X.z,H.array[N+7]=X.w,H.array[N+8]=W.x,H.array[N+9]=W.y,H.array[N+10]=W.z,H.array[N+11]=W.w,N+=12}j.bindBuffer(j.ARRAY_BUFFER,H.buffer);j.bufferData(j.ARRAY_BUFFER,H.array,D)}}G&&(delete w.__inittedArrays,delete w.__colorArray,delete w.__normalArray,delete w.__tangentArray,delete w.__uvArray,delete w.__uv2Array,
delete w.__faceArray,delete w.__vertexArray,delete w.__lineArray,delete w.__skinIndexArray,delete w.__skinWeightArray)}}l.verticesNeedUpdate=!1;l.morphTargetsNeedUpdate=!1;l.elementsNeedUpdate=!1;l.uvsNeedUpdate=!1;l.normalsNeedUpdate=!1;l.colorsNeedUpdate=!1;l.tangentsNeedUpdate=!1;l.buffersNeedUpdate=!1;r.attributes&&n(r)}else if(i instanceof THREE.Line){r=d(i,l);p=r.attributes&&q(r);if(l.verticesNeedUpdate||l.colorsNeedUpdate||l.lineDistancesNeedUpdate||p){var Ya=l,Sb=j.DYNAMIC_DRAW,Ib=void 0,
Jb=void 0,Kb=void 0,Tb=void 0,ma=void 0,Ub=void 0,Gb=Ya.vertices,Hb=Ya.colors,kc=Ya.lineDistances,Zb=Gb.length,$b=Hb.length,ac=kc.length,Vb=Ya.__vertexArray,Wb=Ya.__colorArray,lc=Ya.__lineDistanceArray,bc=Ya.colorsNeedUpdate,cc=Ya.lineDistancesNeedUpdate,gc=Ya.__webglCustomAttributesList,Xb=void 0,mc=void 0,ya=void 0,zb=void 0,Ia=void 0,ia=void 0;if(Ya.verticesNeedUpdate){for(Ib=0;Ib<Zb;Ib++)Tb=Gb[Ib],ma=3*Ib,Vb[ma]=Tb.x,Vb[ma+1]=Tb.y,Vb[ma+2]=Tb.z;j.bindBuffer(j.ARRAY_BUFFER,Ya.__webglVertexBuffer);
j.bufferData(j.ARRAY_BUFFER,Vb,Sb)}if(bc){for(Jb=0;Jb<$b;Jb++)Ub=Hb[Jb],ma=3*Jb,Wb[ma]=Ub.r,Wb[ma+1]=Ub.g,Wb[ma+2]=Ub.b;j.bindBuffer(j.ARRAY_BUFFER,Ya.__webglColorBuffer);j.bufferData(j.ARRAY_BUFFER,Wb,Sb)}if(cc){for(Kb=0;Kb<ac;Kb++)lc[Kb]=kc[Kb];j.bindBuffer(j.ARRAY_BUFFER,Ya.__webglLineDistanceBuffer);j.bufferData(j.ARRAY_BUFFER,lc,Sb)}if(gc){Xb=0;for(mc=gc.length;Xb<mc;Xb++)if(ia=gc[Xb],ia.needsUpdate&&(void 0===ia.boundTo||"vertices"===ia.boundTo)){ma=0;zb=ia.value.length;if(1===ia.size)for(ya=
0;ya<zb;ya++)ia.array[ya]=ia.value[ya];else if(2===ia.size)for(ya=0;ya<zb;ya++)Ia=ia.value[ya],ia.array[ma]=Ia.x,ia.array[ma+1]=Ia.y,ma+=2;else if(3===ia.size)if("c"===ia.type)for(ya=0;ya<zb;ya++)Ia=ia.value[ya],ia.array[ma]=Ia.r,ia.array[ma+1]=Ia.g,ia.array[ma+2]=Ia.b,ma+=3;else for(ya=0;ya<zb;ya++)Ia=ia.value[ya],ia.array[ma]=Ia.x,ia.array[ma+1]=Ia.y,ia.array[ma+2]=Ia.z,ma+=3;else if(4===ia.size)for(ya=0;ya<zb;ya++)Ia=ia.value[ya],ia.array[ma]=Ia.x,ia.array[ma+1]=Ia.y,ia.array[ma+2]=Ia.z,ia.array[ma+
3]=Ia.w,ma+=4;j.bindBuffer(j.ARRAY_BUFFER,ia.buffer);j.bufferData(j.ARRAY_BUFFER,ia.array,Sb)}}}l.verticesNeedUpdate=!1;l.colorsNeedUpdate=!1;l.lineDistancesNeedUpdate=!1;r.attributes&&n(r)}else if(i instanceof THREE.ParticleSystem){r=d(i,l);p=r.attributes&&q(r);if(l.verticesNeedUpdate||l.colorsNeedUpdate||i.sortParticles||p){var lb=l,hc=j.DYNAMIC_DRAW,Lb=i,Ja=void 0,mb=void 0,nb=void 0,T=void 0,ob=void 0,ub=void 0,Yb=lb.vertices,ic=Yb.length,jc=lb.colors,nc=jc.length,wb=lb.__vertexArray,xb=lb.__colorArray,
qb=lb.__sortArray,oc=lb.verticesNeedUpdate,pc=lb.colorsNeedUpdate,rb=lb.__webglCustomAttributesList,$a=void 0,Ab=void 0,Z=void 0,ab=void 0,ga=void 0,S=void 0;if(Lb.sortParticles){gb.copy(Ea);gb.multiply(Lb.matrixWorld);for(Ja=0;Ja<ic;Ja++)nb=Yb[Ja],ra.copy(nb),ra.applyProjection(gb),qb[Ja]=[ra.z,Ja];qb.sort(k);for(Ja=0;Ja<ic;Ja++)nb=Yb[qb[Ja][1]],T=3*Ja,wb[T]=nb.x,wb[T+1]=nb.y,wb[T+2]=nb.z;for(mb=0;mb<nc;mb++)T=3*mb,ub=jc[qb[mb][1]],xb[T]=ub.r,xb[T+1]=ub.g,xb[T+2]=ub.b;if(rb){$a=0;for(Ab=rb.length;$a<
Ab;$a++)if(S=rb[$a],void 0===S.boundTo||"vertices"===S.boundTo)if(T=0,ab=S.value.length,1===S.size)for(Z=0;Z<ab;Z++)ob=qb[Z][1],S.array[Z]=S.value[ob];else if(2===S.size)for(Z=0;Z<ab;Z++)ob=qb[Z][1],ga=S.value[ob],S.array[T]=ga.x,S.array[T+1]=ga.y,T+=2;else if(3===S.size)if("c"===S.type)for(Z=0;Z<ab;Z++)ob=qb[Z][1],ga=S.value[ob],S.array[T]=ga.r,S.array[T+1]=ga.g,S.array[T+2]=ga.b,T+=3;else for(Z=0;Z<ab;Z++)ob=qb[Z][1],ga=S.value[ob],S.array[T]=ga.x,S.array[T+1]=ga.y,S.array[T+2]=ga.z,T+=3;else if(4===
S.size)for(Z=0;Z<ab;Z++)ob=qb[Z][1],ga=S.value[ob],S.array[T]=ga.x,S.array[T+1]=ga.y,S.array[T+2]=ga.z,S.array[T+3]=ga.w,T+=4}}else{if(oc)for(Ja=0;Ja<ic;Ja++)nb=Yb[Ja],T=3*Ja,wb[T]=nb.x,wb[T+1]=nb.y,wb[T+2]=nb.z;if(pc)for(mb=0;mb<nc;mb++)ub=jc[mb],T=3*mb,xb[T]=ub.r,xb[T+1]=ub.g,xb[T+2]=ub.b;if(rb){$a=0;for(Ab=rb.length;$a<Ab;$a++)if(S=rb[$a],S.needsUpdate&&(void 0===S.boundTo||"vertices"===S.boundTo))if(ab=S.value.length,T=0,1===S.size)for(Z=0;Z<ab;Z++)S.array[Z]=S.value[Z];else if(2===S.size)for(Z=
0;Z<ab;Z++)ga=S.value[Z],S.array[T]=ga.x,S.array[T+1]=ga.y,T+=2;else if(3===S.size)if("c"===S.type)for(Z=0;Z<ab;Z++)ga=S.value[Z],S.array[T]=ga.r,S.array[T+1]=ga.g,S.array[T+2]=ga.b,T+=3;else for(Z=0;Z<ab;Z++)ga=S.value[Z],S.array[T]=ga.x,S.array[T+1]=ga.y,S.array[T+2]=ga.z,T+=3;else if(4===S.size)for(Z=0;Z<ab;Z++)ga=S.value[Z],S.array[T]=ga.x,S.array[T+1]=ga.y,S.array[T+2]=ga.z,S.array[T+3]=ga.w,T+=4}}if(oc||Lb.sortParticles)j.bindBuffer(j.ARRAY_BUFFER,lb.__webglVertexBuffer),j.bufferData(j.ARRAY_BUFFER,
wb,hc);if(pc||Lb.sortParticles)j.bindBuffer(j.ARRAY_BUFFER,lb.__webglColorBuffer),j.bufferData(j.ARRAY_BUFFER,xb,hc);if(rb){$a=0;for(Ab=rb.length;$a<Ab;$a++)if(S=rb[$a],S.needsUpdate||Lb.sortParticles)j.bindBuffer(j.ARRAY_BUFFER,S.buffer),j.bufferData(j.ARRAY_BUFFER,S.array,hc)}}l.verticesNeedUpdate=!1;l.colorsNeedUpdate=!1;r.attributes&&n(r)}}};this.initMaterial=function(a,b,c,d){var e,f,g,h;a.addEventListener("dispose",Fb);var i,k,l,m,n;a instanceof THREE.MeshDepthMaterial?n="depth":a instanceof
THREE.MeshNormalMaterial?n="normal":a instanceof THREE.MeshBasicMaterial?n="basic":a instanceof THREE.MeshLambertMaterial?n="lambert":a instanceof THREE.MeshPhongMaterial?n="phong":a instanceof THREE.LineBasicMaterial?n="basic":a instanceof THREE.LineDashedMaterial?n="dashed":a instanceof THREE.ParticleSystemMaterial&&(n="particle_basic");if(n){var p=THREE.ShaderLib[n];a.uniforms=THREE.UniformsUtils.clone(p.uniforms);a.vertexShader=p.vertexShader;a.fragmentShader=p.fragmentShader}var q=e=0,r=0,t=
p=0;for(f=b.length;t<f;t++)g=b[t],g.onlyShadow||(g instanceof THREE.DirectionalLight&&e++,g instanceof THREE.PointLight&&q++,g instanceof THREE.SpotLight&&r++,g instanceof THREE.HemisphereLight&&p++);f=q;g=r;h=p;r=p=0;for(q=b.length;r<q;r++)t=b[r],t.castShadow&&(t instanceof THREE.SpotLight&&p++,t instanceof THREE.DirectionalLight&&!t.shadowCascade&&p++);m=p;yb&&d&&d.useVertexTexture?l=1024:(b=j.getParameter(j.MAX_VERTEX_UNIFORM_VECTORS),b=Math.floor((b-20)/4),void 0!==d&&d instanceof THREE.SkinnedMesh&&
(b=Math.min(d.bones.length,b),b<d.bones.length&&console.warn("WebGLRenderer: too many bones - "+d.bones.length+", this GPU supports just "+b+" (try OpenGL instead of ANGLE)")),l=b);a:{var r=a.fragmentShader,q=a.vertexShader,p=a.uniforms,b=a.attributes,t=a.defines,c={map:!!a.map,envMap:!!a.envMap,lightMap:!!a.lightMap,bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,specularMap:!!a.specularMap,vertexColors:a.vertexColors,fog:c,useFog:a.fog,fogExp:c instanceof THREE.FogExp2,sizeAttenuation:a.sizeAttenuation,
skinning:a.skinning,maxBones:l,useVertexTexture:yb&&d&&d.useVertexTexture,morphTargets:a.morphTargets,morphNormals:a.morphNormals,maxMorphTargets:this.maxMorphTargets,maxMorphNormals:this.maxMorphNormals,maxDirLights:e,maxPointLights:f,maxSpotLights:g,maxHemiLights:h,maxShadows:m,shadowMapEnabled:this.shadowMapEnabled&&d.receiveShadow,shadowMapType:this.shadowMapType,shadowMapDebug:this.shadowMapDebug,shadowMapCascade:this.shadowMapCascade,alphaTest:a.alphaTest,metal:a.metal,perPixel:a.perPixel,wrapAround:a.wrapAround,
doubleSided:a.side===THREE.DoubleSide,flipSided:a.side===THREE.BackSide},d=a.index0AttributeName,s,u,v;e=[];n?e.push(n):(e.push(r),e.push(q));for(u in t)e.push(u),e.push(t[u]);for(s in c)e.push(s),e.push(c[s]);n=e.join();s=0;for(u=da.length;s<u;s++)if(e=da[s],e.code===n){e.usedTimes++;k=e.program;break a}s="SHADOWMAP_TYPE_BASIC";c.shadowMapType===THREE.PCFShadowMap?s="SHADOWMAP_TYPE_PCF":c.shadowMapType===THREE.PCFSoftShadowMap&&(s="SHADOWMAP_TYPE_PCF_SOFT");u=[];for(v in t)e=t[v],!1!==e&&(e="#define "+
v+" "+e,u.push(e));e=u.join("\n");v=j.createProgram();u=["precision "+M+" float;","precision "+M+" int;",e,Bb?"#define VERTEX_TEXTURES":"",L.gammaInput?"#define GAMMA_INPUT":"",L.gammaOutput?"#define GAMMA_OUTPUT":"",L.physicallyBasedShading?"#define PHYSICALLY_BASED_SHADING":"","#define MAX_DIR_LIGHTS "+c.maxDirLights,"#define MAX_POINT_LIGHTS "+c.maxPointLights,"#define MAX_SPOT_LIGHTS "+c.maxSpotLights,"#define MAX_HEMI_LIGHTS "+c.maxHemiLights,"#define MAX_SHADOWS "+c.maxShadows,"#define MAX_BONES "+
c.maxBones,c.map?"#define USE_MAP":"",c.envMap?"#define USE_ENVMAP":"",c.lightMap?"#define USE_LIGHTMAP":"",c.bumpMap?"#define USE_BUMPMAP":"",c.normalMap?"#define USE_NORMALMAP":"",c.specularMap?"#define USE_SPECULARMAP":"",c.vertexColors?"#define USE_COLOR":"",c.skinning?"#define USE_SKINNING":"",c.useVertexTexture?"#define BONE_TEXTURE":"",c.morphTargets?"#define USE_MORPHTARGETS":"",c.morphNormals?"#define USE_MORPHNORMALS":"",c.perPixel?"#define PHONG_PER_PIXEL":"",c.wrapAround?"#define WRAP_AROUND":
"",c.doubleSided?"#define DOUBLE_SIDED":"",c.flipSided?"#define FLIP_SIDED":"",c.shadowMapEnabled?"#define USE_SHADOWMAP":"",c.shadowMapEnabled?"#define "+s:"",c.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",c.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",c.sizeAttenuation?"#define USE_SIZEATTENUATION":"","uniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\n#ifdef USE_COLOR\nattribute vec3 color;\n#endif\n#ifdef USE_MORPHTARGETS\nattribute vec3 morphTarget0;\nattribute vec3 morphTarget1;\nattribute vec3 morphTarget2;\nattribute vec3 morphTarget3;\n#ifdef USE_MORPHNORMALS\nattribute vec3 morphNormal0;\nattribute vec3 morphNormal1;\nattribute vec3 morphNormal2;\nattribute vec3 morphNormal3;\n#else\nattribute vec3 morphTarget4;\nattribute vec3 morphTarget5;\nattribute vec3 morphTarget6;\nattribute vec3 morphTarget7;\n#endif\n#endif\n#ifdef USE_SKINNING\nattribute vec4 skinIndex;\nattribute vec4 skinWeight;\n#endif\n"].join("\n");
s=["precision "+M+" float;","precision "+M+" int;",c.bumpMap||c.normalMap?"#extension GL_OES_standard_derivatives : enable":"",e,"#define MAX_DIR_LIGHTS "+c.maxDirLights,"#define MAX_POINT_LIGHTS "+c.maxPointLights,"#define MAX_SPOT_LIGHTS "+c.maxSpotLights,"#define MAX_HEMI_LIGHTS "+c.maxHemiLights,"#define MAX_SHADOWS "+c.maxShadows,c.alphaTest?"#define ALPHATEST "+c.alphaTest:"",L.gammaInput?"#define GAMMA_INPUT":"",L.gammaOutput?"#define GAMMA_OUTPUT":"",L.physicallyBasedShading?"#define PHYSICALLY_BASED_SHADING":
"",c.useFog&&c.fog?"#define USE_FOG":"",c.useFog&&c.fogExp?"#define FOG_EXP2":"",c.map?"#define USE_MAP":"",c.envMap?"#define USE_ENVMAP":"",c.lightMap?"#define USE_LIGHTMAP":"",c.bumpMap?"#define USE_BUMPMAP":"",c.normalMap?"#define USE_NORMALMAP":"",c.specularMap?"#define USE_SPECULARMAP":"",c.vertexColors?"#define USE_COLOR":"",c.metal?"#define METAL":"",c.perPixel?"#define PHONG_PER_PIXEL":"",c.wrapAround?"#define WRAP_AROUND":"",c.doubleSided?"#define DOUBLE_SIDED":"",c.flipSided?"#define FLIP_SIDED":
"",c.shadowMapEnabled?"#define USE_SHADOWMAP":"",c.shadowMapEnabled?"#define "+s:"",c.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",c.shadowMapCascade?"#define SHADOWMAP_CASCADE":"","uniform mat4 viewMatrix;\nuniform vec3 cameraPosition;\n"].join("\n");u=D("vertex",u+q);s=D("fragment",s+r);j.attachShader(v,u);j.attachShader(v,s);d&&j.bindAttribLocation(v,0,d);j.linkProgram(v);j.getProgramParameter(v,j.LINK_STATUS)||(console.error("Could not initialise shader\nVALIDATE_STATUS: "+j.getProgramParameter(v,
j.VALIDATE_STATUS)+", gl error ["+j.getError()+"]"),console.error("Program Info Log: "+j.getProgramInfoLog(v)));j.deleteShader(s);j.deleteShader(u);v.uniforms={};v.attributes={};var w;s="viewMatrix modelViewMatrix projectionMatrix normalMatrix modelMatrix cameraPosition morphTargetInfluences".split(" ");c.useVertexTexture?(s.push("boneTexture"),s.push("boneTextureWidth"),s.push("boneTextureHeight")):s.push("boneGlobalMatrices");for(w in p)s.push(w);w=s;s=0;for(u=w.length;s<u;s++)p=w[s],v.uniforms[p]=
j.getUniformLocation(v,p);s="position normal uv uv2 tangent color skinIndex skinWeight lineDistance".split(" ");for(w=0;w<c.maxMorphTargets;w++)s.push("morphTarget"+w);for(w=0;w<c.maxMorphNormals;w++)s.push("morphNormal"+w);for(k in b)s.push(k);k=s;w=0;for(b=k.length;w<b;w++)s=k[w],v.attributes[s]=j.getAttribLocation(v,s);v.id=za++;da.push({program:v,code:n,usedTimes:1});L.info.memory.programs=da.length;k=v}a.program=k;w=a.program.attributes;if(a.morphTargets){a.numSupportedMorphTargets=0;b="morphTarget";
for(k=0;k<this.maxMorphTargets;k++)v=b+k,0<=w[v]&&a.numSupportedMorphTargets++}if(a.morphNormals){a.numSupportedMorphNormals=0;b="morphNormal";for(k=0;k<this.maxMorphNormals;k++)v=b+k,0<=w[v]&&a.numSupportedMorphNormals++}a.uniformsList=[];for(i in a.uniforms)a.uniformsList.push([a.uniforms[i],i])};this.setFaceCulling=function(a,b){a===THREE.CullFaceNone?j.disable(j.CULL_FACE):(b===THREE.FrontFaceDirectionCW?j.frontFace(j.CW):j.frontFace(j.CCW),a===THREE.CullFaceBack?j.cullFace(j.BACK):a===THREE.CullFaceFront?
j.cullFace(j.FRONT):j.cullFace(j.FRONT_AND_BACK),j.enable(j.CULL_FACE))};this.setMaterialFaces=function(a){var b=a.side===THREE.DoubleSide,a=a.side===THREE.BackSide;Y!==b&&(b?j.disable(j.CULL_FACE):j.enable(j.CULL_FACE),Y=b);U!==a&&(a?j.frontFace(j.CW):j.frontFace(j.CCW),U=a)};this.setDepthTest=function(a){Ga!==a&&(a?j.enable(j.DEPTH_TEST):j.disable(j.DEPTH_TEST),Ga=a)};this.setDepthWrite=function(a){ka!==a&&(j.depthMask(a),ka=a)};this.setBlending=function(a,b,c,d){a!==ja&&(a===THREE.NoBlending?j.disable(j.BLEND):
a===THREE.AdditiveBlending?(j.enable(j.BLEND),j.blendEquation(j.FUNC_ADD),j.blendFunc(j.SRC_ALPHA,j.ONE)):a===THREE.SubtractiveBlending?(j.enable(j.BLEND),j.blendEquation(j.FUNC_ADD),j.blendFunc(j.ZERO,j.ONE_MINUS_SRC_COLOR)):a===THREE.MultiplyBlending?(j.enable(j.BLEND),j.blendEquation(j.FUNC_ADD),j.blendFunc(j.ZERO,j.SRC_COLOR)):a===THREE.CustomBlending?j.enable(j.BLEND):(j.enable(j.BLEND),j.blendEquationSeparate(j.FUNC_ADD,j.FUNC_ADD),j.blendFuncSeparate(j.SRC_ALPHA,j.ONE_MINUS_SRC_ALPHA,j.ONE,
j.ONE_MINUS_SRC_ALPHA)),ja=a);if(a===THREE.CustomBlending){if(b!==sa&&(j.blendEquation(I(b)),sa=b),c!==ha||d!==Ka)j.blendFunc(I(c),I(d)),ha=c,Ka=d}else Ka=ha=sa=null};this.setTexture=function(a,b){if(a.needsUpdate){a.__webglInit||(a.__webglInit=!0,a.addEventListener("dispose",Db),a.__webglTexture=j.createTexture(),L.info.memory.textures++);j.activeTexture(j.TEXTURE0+b);j.bindTexture(j.TEXTURE_2D,a.__webglTexture);j.pixelStorei(j.UNPACK_FLIP_Y_WEBGL,a.flipY);j.pixelStorei(j.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
a.premultiplyAlpha);j.pixelStorei(j.UNPACK_ALIGNMENT,a.unpackAlignment);var c=a.image,d=0===(c.width&c.width-1)&&0===(c.height&c.height-1),e=I(a.format),f=I(a.type);F(j.TEXTURE_2D,a,d);var g=a.mipmaps;if(a instanceof THREE.DataTexture)if(0<g.length&&d){for(var h=0,i=g.length;h<i;h++)c=g[h],j.texImage2D(j.TEXTURE_2D,h,e,c.width,c.height,0,e,f,c.data);a.generateMipmaps=!1}else j.texImage2D(j.TEXTURE_2D,0,e,c.width,c.height,0,e,f,c.data);else if(a instanceof THREE.CompressedTexture){h=0;for(i=g.length;h<
i;h++)c=g[h],a.format!==THREE.RGBAFormat?j.compressedTexImage2D(j.TEXTURE_2D,h,e,c.width,c.height,0,c.data):j.texImage2D(j.TEXTURE_2D,h,e,c.width,c.height,0,e,f,c.data)}else if(0<g.length&&d){h=0;for(i=g.length;h<i;h++)c=g[h],j.texImage2D(j.TEXTURE_2D,h,e,e,f,c);a.generateMipmaps=!1}else j.texImage2D(j.TEXTURE_2D,0,e,e,f,a.image);a.generateMipmaps&&d&&j.generateMipmap(j.TEXTURE_2D);a.needsUpdate=!1;if(a.onUpdate)a.onUpdate()}else j.activeTexture(j.TEXTURE0+b),j.bindTexture(j.TEXTURE_2D,a.__webglTexture)};
this.setRenderTarget=function(a){var b=a instanceof THREE.WebGLRenderTargetCube;if(a&&!a.__webglFramebuffer){void 0===a.depthBuffer&&(a.depthBuffer=!0);void 0===a.stencilBuffer&&(a.stencilBuffer=!0);a.addEventListener("dispose",Eb);a.__webglTexture=j.createTexture();L.info.memory.textures++;var c=0===(a.width&a.width-1)&&0===(a.height&a.height-1),d=I(a.format),e=I(a.type);if(b){a.__webglFramebuffer=[];a.__webglRenderbuffer=[];j.bindTexture(j.TEXTURE_CUBE_MAP,a.__webglTexture);F(j.TEXTURE_CUBE_MAP,
a,c);for(var f=0;6>f;f++){a.__webglFramebuffer[f]=j.createFramebuffer();a.__webglRenderbuffer[f]=j.createRenderbuffer();j.texImage2D(j.TEXTURE_CUBE_MAP_POSITIVE_X+f,0,d,a.width,a.height,0,d,e,null);var g=a,h=j.TEXTURE_CUBE_MAP_POSITIVE_X+f;j.bindFramebuffer(j.FRAMEBUFFER,a.__webglFramebuffer[f]);j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,h,g.__webglTexture,0);O(a.__webglRenderbuffer[f],a)}c&&j.generateMipmap(j.TEXTURE_CUBE_MAP)}else a.__webglFramebuffer=j.createFramebuffer(),a.__webglRenderbuffer=
a.shareDepthFrom?a.shareDepthFrom.__webglRenderbuffer:j.createRenderbuffer(),j.bindTexture(j.TEXTURE_2D,a.__webglTexture),F(j.TEXTURE_2D,a,c),j.texImage2D(j.TEXTURE_2D,0,d,a.width,a.height,0,d,e,null),d=j.TEXTURE_2D,j.bindFramebuffer(j.FRAMEBUFFER,a.__webglFramebuffer),j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,d,a.__webglTexture,0),a.shareDepthFrom?a.depthBuffer&&!a.stencilBuffer?j.framebufferRenderbuffer(j.FRAMEBUFFER,j.DEPTH_ATTACHMENT,j.RENDERBUFFER,a.__webglRenderbuffer):a.depthBuffer&&
a.stencilBuffer&&j.framebufferRenderbuffer(j.FRAMEBUFFER,j.DEPTH_STENCIL_ATTACHMENT,j.RENDERBUFFER,a.__webglRenderbuffer):O(a.__webglRenderbuffer,a),c&&j.generateMipmap(j.TEXTURE_2D);b?j.bindTexture(j.TEXTURE_CUBE_MAP,null):j.bindTexture(j.TEXTURE_2D,null);j.bindRenderbuffer(j.RENDERBUFFER,null);j.bindFramebuffer(j.FRAMEBUFFER,null)}a?(b=b?a.__webglFramebuffer[a.activeCubeFace]:a.__webglFramebuffer,c=a.width,a=a.height,e=d=0):(b=null,c=Ma,a=fb,d=bb,e=cb);b!==ba&&(j.bindFramebuffer(j.FRAMEBUFFER,b),
j.viewport(d,e,c,a),ba=b);sb=c;pb=a};this.shadowMapPlugin=new THREE.ShadowMapPlugin;this.addPrePlugin(this.shadowMapPlugin);this.addPostPlugin(new THREE.SpritePlugin);this.addPostPlugin(new THREE.LensFlarePlugin)};THREE.WebGLRenderTarget=function(a,b,c){this.width=a;this.height=b;c=c||{};this.wrapS=void 0!==c.wrapS?c.wrapS:THREE.ClampToEdgeWrapping;this.wrapT=void 0!==c.wrapT?c.wrapT:THREE.ClampToEdgeWrapping;this.magFilter=void 0!==c.magFilter?c.magFilter:THREE.LinearFilter;this.minFilter=void 0!==c.minFilter?c.minFilter:THREE.LinearMipMapLinearFilter;this.anisotropy=void 0!==c.anisotropy?c.anisotropy:1;this.offset=new THREE.Vector2(0,0);this.repeat=new THREE.Vector2(1,1);this.format=void 0!==c.format?c.format:
THREE.RGBAFormat;this.type=void 0!==c.type?c.type:THREE.UnsignedByteType;this.depthBuffer=void 0!==c.depthBuffer?c.depthBuffer:!0;this.stencilBuffer=void 0!==c.stencilBuffer?c.stencilBuffer:!0;this.generateMipmaps=!0;this.shareDepthFrom=null};
THREE.WebGLRenderTarget.prototype={constructor:THREE.WebGLRenderTarget,clone:function(){var a=new THREE.WebGLRenderTarget(this.width,this.height);a.wrapS=this.wrapS;a.wrapT=this.wrapT;a.magFilter=this.magFilter;a.minFilter=this.minFilter;a.anisotropy=this.anisotropy;a.offset.copy(this.offset);a.repeat.copy(this.repeat);a.format=this.format;a.type=this.type;a.depthBuffer=this.depthBuffer;a.stencilBuffer=this.stencilBuffer;a.generateMipmaps=this.generateMipmaps;a.shareDepthFrom=this.shareDepthFrom;
return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.WebGLRenderTarget.prototype);THREE.WebGLRenderTargetCube=function(a,b,c){THREE.WebGLRenderTarget.call(this,a,b,c);this.activeCubeFace=0};THREE.WebGLRenderTargetCube.prototype=Object.create(THREE.WebGLRenderTarget.prototype);THREE.RenderableVertex=function(){this.positionWorld=new THREE.Vector3;this.positionScreen=new THREE.Vector4;this.visible=!0};THREE.RenderableVertex.prototype.copy=function(a){this.positionWorld.copy(a.positionWorld);this.positionScreen.copy(a.positionScreen)};THREE.RenderableFace3=function(){this.id=0;this.v1=new THREE.RenderableVertex;this.v2=new THREE.RenderableVertex;this.v3=new THREE.RenderableVertex;this.centroidModel=new THREE.Vector3;this.normalModel=new THREE.Vector3;this.normalModelView=new THREE.Vector3;this.vertexNormalsLength=0;this.vertexNormalsModel=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];this.vertexNormalsModelView=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];this.material=this.color=null;this.uvs=[[]];this.z=
0};THREE.RenderableObject=function(){this.id=0;this.object=null;this.z=0};THREE.RenderableSprite=function(){this.id=0;this.object=null;this.rotation=this.z=this.y=this.x=0;this.scale=new THREE.Vector2;this.material=null};THREE.RenderableLine=function(){this.id=0;this.v1=new THREE.RenderableVertex;this.v2=new THREE.RenderableVertex;this.vertexColors=[new THREE.Color,new THREE.Color];this.material=null;this.z=0};THREE.GeometryUtils={merge:function(a,b,c){var d,e,f=a.vertices.length,h=b instanceof THREE.Mesh?b.geometry:b,g=a.vertices,i=h.vertices,k=a.faces,m=h.faces,a=a.faceVertexUvs[0],h=h.faceVertexUvs[0];void 0===c&&(c=0);b instanceof THREE.Mesh&&(b.matrixAutoUpdate&&b.updateMatrix(),d=b.matrix,e=(new THREE.Matrix3).getNormalMatrix(d));for(var b=0,l=i.length;b<l;b++){var p=i[b].clone();d&&p.applyMatrix4(d);g.push(p)}b=0;for(l=m.length;b<l;b++){var p=m[b],t,s,q=p.vertexNormals,n=p.vertexColors;t=new THREE.Face3(p.a+
f,p.b+f,p.c+f);t.normal.copy(p.normal);e&&t.normal.applyMatrix3(e).normalize();g=0;for(i=q.length;g<i;g++)s=q[g].clone(),e&&s.applyMatrix3(e).normalize(),t.vertexNormals.push(s);t.color.copy(p.color);g=0;for(i=n.length;g<i;g++)s=n[g],t.vertexColors.push(s.clone());t.materialIndex=p.materialIndex+c;t.centroid.copy(p.centroid);d&&t.centroid.applyMatrix4(d);k.push(t)}b=0;for(l=h.length;b<l;b++){c=h[b];d=[];g=0;for(i=c.length;g<i;g++)d.push(new THREE.Vector2(c[g].x,c[g].y));a.push(d)}},randomPointInTriangle:function(){var a=
new THREE.Vector3;return function(b,c,d){var e=new THREE.Vector3,f=THREE.Math.random16(),h=THREE.Math.random16();1<f+h&&(f=1-f,h=1-h);var g=1-f-h;e.copy(b);e.multiplyScalar(f);a.copy(c);a.multiplyScalar(h);e.add(a);a.copy(d);a.multiplyScalar(g);e.add(a);return e}}(),randomPointInFace:function(a,b){return THREE.GeometryUtils.randomPointInTriangle(b.vertices[a.a],b.vertices[a.b],b.vertices[a.c])},randomPointsInGeometry:function(a,b){function c(a){function b(c,d){if(d<c)return c;var e=c+Math.floor((d-
c)/2);return k[e]>a?b(c,e-1):k[e]<a?b(e+1,d):e}return b(0,k.length-1)}var d,e,f=a.faces,h=a.vertices,g=f.length,i=0,k=[],m,l,p;for(e=0;e<g;e++)d=f[e],m=h[d.a],l=h[d.b],p=h[d.c],d._area=THREE.GeometryUtils.triangleArea(m,l,p),i+=d._area,k[e]=i;d=[];for(e=0;e<b;e++)h=THREE.Math.random16()*i,h=c(h),d[e]=THREE.GeometryUtils.randomPointInFace(f[h],a,!0);return d},triangleArea:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,d,e){a.subVectors(d,c);b.subVectors(e,c);a.cross(b);return 0.5*
a.length()}}(),center:function(a){a.computeBoundingBox();var b=a.boundingBox,c=new THREE.Vector3;c.addVectors(b.min,b.max);c.multiplyScalar(-0.5);a.applyMatrix((new THREE.Matrix4).makeTranslation(c.x,c.y,c.z));a.computeBoundingBox();return c},triangulateQuads:function(a){var b,c,d,e,f=[],h=[];b=0;for(c=a.faceVertexUvs.length;b<c;b++)h[b]=[];b=0;for(c=a.faces.length;b<c;b++){f.push(a.faces[b]);d=0;for(e=a.faceVertexUvs.length;d<e;d++)h[d].push(a.faceVertexUvs[d][b])}a.faces=f;a.faceVertexUvs=h;a.computeCentroids();
a.computeFaceNormals();a.computeVertexNormals();a.hasTangents&&a.computeTangents()}};THREE.ImageUtils={crossOrigin:"anonymous",loadTexture:function(a,b,c){var d=new THREE.ImageLoader;d.crossOrigin=this.crossOrigin;var e=new THREE.Texture(void 0,b),b=d.load(a,function(){e.needsUpdate=!0;c&&c(e)});e.image=b;e.sourceFile=a;return e},loadCompressedTexture:function(a,b,c,d){var e=new THREE.CompressedTexture;e.mapping=b;var f=new XMLHttpRequest;f.onload=function(){var a=THREE.ImageUtils.parseDDS(f.response,!0);e.format=a.format;e.mipmaps=a.mipmaps;e.image.width=a.width;e.image.height=a.height;
e.generateMipmaps=!1;e.needsUpdate=!0;c&&c(e)};f.onerror=d;f.open("GET",a,!0);f.responseType="arraybuffer";f.send(null);return e},loadTextureCube:function(a,b,c,d){var e=[];e.loadCount=0;var f=new THREE.Texture;f.image=e;void 0!==b&&(f.mapping=b);f.flipY=!1;for(var b=0,h=a.length;b<h;++b){var g=new Image;e[b]=g;g.onload=function(){e.loadCount+=1;6===e.loadCount&&(f.needsUpdate=!0,c&&c(f))};g.onerror=d;g.crossOrigin=this.crossOrigin;g.src=a[b]}return f},loadCompressedTextureCube:function(a,b,c,d){var e=
[];e.loadCount=0;var f=new THREE.CompressedTexture;f.image=e;void 0!==b&&(f.mapping=b);f.flipY=!1;f.generateMipmaps=!1;b=function(a,b){return function(){var d=THREE.ImageUtils.parseDDS(a.response,!0);b.format=d.format;b.mipmaps=d.mipmaps;b.width=d.width;b.height=d.height;e.loadCount+=1;6===e.loadCount&&(f.format=d.format,f.needsUpdate=!0,c&&c(f))}};if(a instanceof Array)for(var h=0,g=a.length;h<g;++h){var i={};e[h]=i;var k=new XMLHttpRequest;k.onload=b(k,i);k.onerror=d;i=a[h];k.open("GET",i,!0);k.responseType=
"arraybuffer";k.send(null)}else k=new XMLHttpRequest,k.onload=function(){var a=THREE.ImageUtils.parseDDS(k.response,!0);if(a.isCubemap){for(var b=a.mipmaps.length/a.mipmapCount,d=0;d<b;d++){e[d]={mipmaps:[]};for(var g=0;g<a.mipmapCount;g++)e[d].mipmaps.push(a.mipmaps[d*a.mipmapCount+g]),e[d].format=a.format,e[d].width=a.width,e[d].height=a.height}f.format=a.format;f.needsUpdate=!0;c&&c(f)}},k.onerror=d,k.open("GET",a,!0),k.responseType="arraybuffer",k.send(null);return f},loadDDSTexture:function(a,
b,c,d){var e=[];e.loadCount=0;var f=new THREE.CompressedTexture;f.image=e;void 0!==b&&(f.mapping=b);f.flipY=!1;f.generateMipmaps=!1;var h=new XMLHttpRequest;h.onload=function(){var a=THREE.ImageUtils.parseDDS(h.response,!0);if(a.isCubemap)for(var b=a.mipmaps.length/a.mipmapCount,d=0;d<b;d++){e[d]={mipmaps:[]};for(var m=0;m<a.mipmapCount;m++)e[d].mipmaps.push(a.mipmaps[d*a.mipmapCount+m]),e[d].format=a.format,e[d].width=a.width,e[d].height=a.height}else f.image.width=a.width,f.image.height=a.height,
f.mipmaps=a.mipmaps;f.format=a.format;f.needsUpdate=!0;c&&c(f)};h.onerror=d;h.open("GET",a,!0);h.responseType="arraybuffer";h.send(null);return f},parseDDS:function(a,b){function c(a){return a.charCodeAt(0)+(a.charCodeAt(1)<<8)+(a.charCodeAt(2)<<16)+(a.charCodeAt(3)<<24)}var d={mipmaps:[],width:0,height:0,format:null,mipmapCount:1},e=c("DXT1"),f=c("DXT3"),h=c("DXT5"),g=new Int32Array(a,0,31);if(542327876!==g[0])return console.error("ImageUtils.parseDDS(): Invalid magic number in DDS header"),d;if(!g[20]&
4)return console.error("ImageUtils.parseDDS(): Unsupported format, must contain a FourCC code"),d;var i=g[21],k=!1;switch(i){case e:e=8;d.format=THREE.RGB_S3TC_DXT1_Format;break;case f:e=16;d.format=THREE.RGBA_S3TC_DXT3_Format;break;case h:e=16;d.format=THREE.RGBA_S3TC_DXT5_Format;break;default:if(32==g[22]&&g[23]&16711680&&g[24]&65280&&g[25]&255&&g[26]&4278190080)k=!0,e=64,d.format=THREE.RGBAFormat;else return console.error("ImageUtils.parseDDS(): Unsupported FourCC code: ",String.fromCharCode(i&
255,i>>8&255,i>>16&255,i>>24&255)),d}d.mipmapCount=1;g[2]&131072&&!1!==b&&(d.mipmapCount=Math.max(1,g[7]));d.isCubemap=g[28]&512?!0:!1;d.width=g[4];d.height=g[3];for(var g=g[1]+4,f=d.width,h=d.height,i=d.isCubemap?6:1,m=0;m<i;m++){for(var l=0;l<d.mipmapCount;l++){if(k){var p;p=f;for(var t=h,s=4*p*t,q=new Uint8Array(a,g,s),s=new Uint8Array(s),n=0,u=0,r=0;r<t;r++)for(var v=0;v<p;v++){var z=q[u];u++;var G=q[u];u++;var w=q[u];u++;var y=q[u];u++;s[n]=w;n++;s[n]=G;n++;s[n]=z;n++;s[n]=y;n++}p=s;t=p.length}else t=
Math.max(4,f)/4*Math.max(4,h)/4*e,p=new Uint8Array(a,g,t);d.mipmaps.push({data:p,width:f,height:h});g+=t;f=Math.max(0.5*f,1);h=Math.max(0.5*h,1)}f=d.width;h=d.height}return d},getNormalMap:function(a,b){var c=function(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);return[a[0]/b,a[1]/b,a[2]/b]},b=b|1,d=a.width,e=a.height,f=document.createElement("canvas");f.width=d;f.height=e;var h=f.getContext("2d");h.drawImage(a,0,0);for(var g=h.getImageData(0,0,d,e).data,i=h.createImageData(d,e),k=i.data,m=0;m<
d;m++)for(var l=0;l<e;l++){var p=0>l-1?0:l-1,t=l+1>e-1?e-1:l+1,s=0>m-1?0:m-1,q=m+1>d-1?d-1:m+1,n=[],u=[0,0,g[4*(l*d+m)]/255*b];n.push([-1,0,g[4*(l*d+s)]/255*b]);n.push([-1,-1,g[4*(p*d+s)]/255*b]);n.push([0,-1,g[4*(p*d+m)]/255*b]);n.push([1,-1,g[4*(p*d+q)]/255*b]);n.push([1,0,g[4*(l*d+q)]/255*b]);n.push([1,1,g[4*(t*d+q)]/255*b]);n.push([0,1,g[4*(t*d+m)]/255*b]);n.push([-1,1,g[4*(t*d+s)]/255*b]);p=[];s=n.length;for(t=0;t<s;t++){var q=n[t],r=n[(t+1)%s],q=[q[0]-u[0],q[1]-u[1],q[2]-u[2]],r=[r[0]-u[0],
r[1]-u[1],r[2]-u[2]];p.push(c([q[1]*r[2]-q[2]*r[1],q[2]*r[0]-q[0]*r[2],q[0]*r[1]-q[1]*r[0]]))}n=[0,0,0];for(t=0;t<p.length;t++)n[0]+=p[t][0],n[1]+=p[t][1],n[2]+=p[t][2];n[0]/=p.length;n[1]/=p.length;n[2]/=p.length;u=4*(l*d+m);k[u]=255*((n[0]+1)/2)|0;k[u+1]=255*((n[1]+1)/2)|0;k[u+2]=255*n[2]|0;k[u+3]=255}h.putImageData(i,0,0);return f},generateDataTexture:function(a,b,c){for(var d=a*b,e=new Uint8Array(3*d),f=Math.floor(255*c.r),h=Math.floor(255*c.g),c=Math.floor(255*c.b),g=0;g<d;g++)e[3*g]=f,e[3*g+
1]=h,e[3*g+2]=c;a=new THREE.DataTexture(e,a,b,THREE.RGBFormat);a.needsUpdate=!0;return a}};THREE.SceneUtils={createMultiMaterialObject:function(a,b){for(var c=new THREE.Object3D,d=0,e=b.length;d<e;d++)c.add(new THREE.Mesh(a,b[d]));return c},detach:function(a,b,c){a.applyMatrix(b.matrixWorld);b.remove(a);c.add(a)},attach:function(a,b,c){var d=new THREE.Matrix4;d.getInverse(c.matrixWorld);a.applyMatrix(d);b.remove(a);c.add(a)}};THREE.FontUtils={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){return this.faces[this.face][this.weight][this.style]},loadFace:function(a){var b=a.familyName.toLowerCase();this.faces[b]=this.faces[b]||{};this.faces[b][a.cssFontWeight]=this.faces[b][a.cssFontWeight]||{};this.faces[b][a.cssFontWeight][a.cssFontStyle]=a;return this.faces[b][a.cssFontWeight][a.cssFontStyle]=a},drawText:function(a){for(var b=this.getFace(),c=this.size/b.resolution,d=
0,e=String(a).split(""),f=e.length,h=[],a=0;a<f;a++){var g=new THREE.Path,g=this.extractGlyphPoints(e[a],b,c,d,g),d=d+g.offset;h.push(g.path)}return{paths:h,offset:d/2}},extractGlyphPoints:function(a,b,c,d,e){var f=[],h,g,i,k,m,l,p,t,s,q,n,u=b.glyphs[a]||b.glyphs["?"];if(u){if(u.o){b=u._cachedOutline||(u._cachedOutline=u.o.split(" "));k=b.length;for(a=0;a<k;)switch(i=b[a++],i){case "m":i=b[a++]*c+d;m=b[a++]*c;e.moveTo(i,m);break;case "l":i=b[a++]*c+d;m=b[a++]*c;e.lineTo(i,m);break;case "q":i=b[a++]*
c+d;m=b[a++]*c;t=b[a++]*c+d;s=b[a++]*c;e.quadraticCurveTo(t,s,i,m);if(h=f[f.length-1]){l=h.x;p=h.y;h=1;for(g=this.divisions;h<=g;h++){var r=h/g;THREE.Shape.Utils.b2(r,l,t,i);THREE.Shape.Utils.b2(r,p,s,m)}}break;case "b":if(i=b[a++]*c+d,m=b[a++]*c,t=b[a++]*c+d,s=b[a++]*-c,q=b[a++]*c+d,n=b[a++]*-c,e.bezierCurveTo(i,m,t,s,q,n),h=f[f.length-1]){l=h.x;p=h.y;h=1;for(g=this.divisions;h<=g;h++)r=h/g,THREE.Shape.Utils.b3(r,l,t,q,i),THREE.Shape.Utils.b3(r,p,s,n,m)}}}return{offset:u.ha*c,path:e}}}};
THREE.FontUtils.generateShapes=function(a,b){var b=b||{},c=void 0!==b.curveSegments?b.curveSegments:4,d=void 0!==b.font?b.font:"helvetiker",e=void 0!==b.weight?b.weight:"normal",f=void 0!==b.style?b.style:"normal";THREE.FontUtils.size=void 0!==b.size?b.size:100;THREE.FontUtils.divisions=c;THREE.FontUtils.face=d;THREE.FontUtils.weight=e;THREE.FontUtils.style=f;c=THREE.FontUtils.drawText(a).paths;d=[];e=0;for(f=c.length;e<f;e++)Array.prototype.push.apply(d,c[e].toShapes());return d};
(function(a){var b=function(a){for(var b=a.length,e=0,f=b-1,h=0;h<b;f=h++)e+=a[f].x*a[h].y-a[h].x*a[f].y;return 0.5*e};a.Triangulate=function(a,d){var e=a.length;if(3>e)return null;var f=[],h=[],g=[],i,k,m;if(0<b(a))for(k=0;k<e;k++)h[k]=k;else for(k=0;k<e;k++)h[k]=e-1-k;var l=2*e;for(k=e-1;2<e;){if(0>=l--){console.log("Warning, unable to triangulate polygon!");break}i=k;e<=i&&(i=0);k=i+1;e<=k&&(k=0);m=k+1;e<=m&&(m=0);var p;a:{var t=p=void 0,s=void 0,q=void 0,n=void 0,u=void 0,r=void 0,v=void 0,z=
void 0,t=a[h[i]].x,s=a[h[i]].y,q=a[h[k]].x,n=a[h[k]].y,u=a[h[m]].x,r=a[h[m]].y;if(1E-10>(q-t)*(r-s)-(n-s)*(u-t))p=!1;else{var G=void 0,w=void 0,y=void 0,E=void 0,A=void 0,K=void 0,D=void 0,F=void 0,O=void 0,x=void 0,O=F=D=z=v=void 0,G=u-q,w=r-n,y=t-u,E=s-r,A=q-t,K=n-s;for(p=0;p<e;p++)if(!(p===i||p===k||p===m))if(v=a[h[p]].x,z=a[h[p]].y,D=v-t,F=z-s,O=v-q,x=z-n,v-=u,z-=r,O=G*x-w*O,D=A*F-K*D,F=y*z-E*v,-1E-10<=O&&-1E-10<=F&&-1E-10<=D){p=!1;break a}p=!0}}if(p){f.push([a[h[i]],a[h[k]],a[h[m]]]);g.push([h[i],
h[k],h[m]]);i=k;for(m=k+1;m<e;i++,m++)h[i]=h[m];e--;l=2*e}}return d?g:f};a.Triangulate.area=b;return a})(THREE.FontUtils);self._typeface_js={faces:THREE.FontUtils.faces,loadFace:THREE.FontUtils.loadFace};THREE.typeface_js=self._typeface_js;THREE.Curve=function(){};THREE.Curve.prototype.getPoint=function(){console.log("Warning, getPoint() not implemented!");return null};THREE.Curve.prototype.getPointAt=function(a){a=this.getUtoTmapping(a);return this.getPoint(a)};THREE.Curve.prototype.getPoints=function(a){a||(a=5);var b,c=[];for(b=0;b<=a;b++)c.push(this.getPoint(b/a));return c};THREE.Curve.prototype.getSpacedPoints=function(a){a||(a=5);var b,c=[];for(b=0;b<=a;b++)c.push(this.getPointAt(b/a));return c};
THREE.Curve.prototype.getLength=function(){var a=this.getLengths();return a[a.length-1]};THREE.Curve.prototype.getLengths=function(a){a||(a=this.__arcLengthDivisions?this.__arcLengthDivisions:200);if(this.cacheArcLengths&&this.cacheArcLengths.length==a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var b=[],c,d=this.getPoint(0),e,f=0;b.push(0);for(e=1;e<=a;e++)c=this.getPoint(e/a),f+=c.distanceTo(d),b.push(f),d=c;return this.cacheArcLengths=b};
THREE.Curve.prototype.updateArcLengths=function(){this.needsUpdate=!0;this.getLengths()};THREE.Curve.prototype.getUtoTmapping=function(a,b){var c=this.getLengths(),d=0,e=c.length,f;f=b?b:a*c[e-1];for(var h=0,g=e-1,i;h<=g;)if(d=Math.floor(h+(g-h)/2),i=c[d]-f,0>i)h=d+1;else if(0<i)g=d-1;else{g=d;break}d=g;if(c[d]==f)return d/(e-1);h=c[d];return c=(d+(f-h)/(c[d+1]-h))/(e-1)};THREE.Curve.prototype.getTangent=function(a){var b=a-1E-4,a=a+1E-4;0>b&&(b=0);1<a&&(a=1);b=this.getPoint(b);return this.getPoint(a).clone().sub(b).normalize()};
THREE.Curve.prototype.getTangentAt=function(a){a=this.getUtoTmapping(a);return this.getTangent(a)};
THREE.Curve.Utils={tangentQuadraticBezier:function(a,b,c,d){return 2*(1-a)*(c-b)+2*a*(d-c)},tangentCubicBezier:function(a,b,c,d,e){return-3*b*(1-a)*(1-a)+3*c*(1-a)*(1-a)-6*a*c*(1-a)+6*a*d*(1-a)-3*a*a*d+3*a*a*e},tangentSpline:function(a){return 6*a*a-6*a+(3*a*a-4*a+1)+(-6*a*a+6*a)+(3*a*a-2*a)},interpolate:function(a,b,c,d,e){var a=0.5*(c-a),d=0.5*(d-b),f=e*e;return(2*b-2*c+a+d)*e*f+(-3*b+3*c-2*a-d)*f+a*e+b}};
THREE.Curve.create=function(a,b){a.prototype=Object.create(THREE.Curve.prototype);a.prototype.getPoint=b;return a};THREE.CurvePath=function(){this.curves=[];this.bends=[];this.autoClose=!1};THREE.CurvePath.prototype=Object.create(THREE.Curve.prototype);THREE.CurvePath.prototype.add=function(a){this.curves.push(a)};THREE.CurvePath.prototype.checkConnection=function(){};THREE.CurvePath.prototype.closePath=function(){var a=this.curves[0].getPoint(0),b=this.curves[this.curves.length-1].getPoint(1);a.equals(b)||this.curves.push(new THREE.LineCurve(b,a))};
THREE.CurvePath.prototype.getPoint=function(a){for(var b=a*this.getLength(),c=this.getCurveLengths(),a=0;a<c.length;){if(c[a]>=b)return b=c[a]-b,a=this.curves[a],b=1-b/a.getLength(),a.getPointAt(b);a++}return null};THREE.CurvePath.prototype.getLength=function(){var a=this.getCurveLengths();return a[a.length-1]};
THREE.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var a=[],b=0,c,d=this.curves.length;for(c=0;c<d;c++)b+=this.curves[c].getLength(),a.push(b);return this.cacheLengths=a};
THREE.CurvePath.prototype.getBoundingBox=function(){var a=this.getPoints(),b,c,d,e,f,h;b=c=Number.NEGATIVE_INFINITY;e=f=Number.POSITIVE_INFINITY;var g,i,k,m,l=a[0]instanceof THREE.Vector3;m=l?new THREE.Vector3:new THREE.Vector2;i=0;for(k=a.length;i<k;i++)g=a[i],g.x>b?b=g.x:g.x<e&&(e=g.x),g.y>c?c=g.y:g.y<f&&(f=g.y),l&&(g.z>d?d=g.z:g.z<h&&(h=g.z)),m.add(g);a={minX:e,minY:f,maxX:b,maxY:c,centroid:m.divideScalar(k)};l&&(a.maxZ=d,a.minZ=h);return a};
THREE.CurvePath.prototype.createPointsGeometry=function(a){a=this.getPoints(a,!0);return this.createGeometry(a)};THREE.CurvePath.prototype.createSpacedPointsGeometry=function(a){a=this.getSpacedPoints(a,!0);return this.createGeometry(a)};THREE.CurvePath.prototype.createGeometry=function(a){for(var b=new THREE.Geometry,c=0;c<a.length;c++)b.vertices.push(new THREE.Vector3(a[c].x,a[c].y,a[c].z||0));return b};THREE.CurvePath.prototype.addWrapPath=function(a){this.bends.push(a)};
THREE.CurvePath.prototype.getTransformedPoints=function(a,b){var c=this.getPoints(a),d,e;b||(b=this.bends);d=0;for(e=b.length;d<e;d++)c=this.getWrapPoints(c,b[d]);return c};THREE.CurvePath.prototype.getTransformedSpacedPoints=function(a,b){var c=this.getSpacedPoints(a),d,e;b||(b=this.bends);d=0;for(e=b.length;d<e;d++)c=this.getWrapPoints(c,b[d]);return c};
THREE.CurvePath.prototype.getWrapPoints=function(a,b){var c=this.getBoundingBox(),d,e,f,h,g,i;d=0;for(e=a.length;d<e;d++)f=a[d],h=f.x,g=f.y,i=h/c.maxX,i=b.getUtoTmapping(i,h),h=b.getPoint(i),i=b.getTangent(i),i.set(-i.y,i.x).multiplyScalar(g),f.x=h.x+i.x,f.y=h.y+i.y;return a};THREE.Gyroscope=function(){THREE.Object3D.call(this)};THREE.Gyroscope.prototype=Object.create(THREE.Object3D.prototype);
THREE.Gyroscope.prototype.updateMatrixWorld=function(a){this.matrixAutoUpdate&&this.updateMatrix();if(this.matrixWorldNeedsUpdate||a)this.parent?(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorld.decompose(this.translationWorld,this.quaternionWorld,this.scaleWorld),this.matrix.decompose(this.translationObject,this.quaternionObject,this.scaleObject),this.matrixWorld.compose(this.translationWorld,this.quaternionObject,this.scaleWorld)):this.matrixWorld.copy(this.matrix),
this.matrixWorldNeedsUpdate=!1,a=!0;for(var b=0,c=this.children.length;b<c;b++)this.children[b].updateMatrixWorld(a)};THREE.Gyroscope.prototype.translationWorld=new THREE.Vector3;THREE.Gyroscope.prototype.translationObject=new THREE.Vector3;THREE.Gyroscope.prototype.quaternionWorld=new THREE.Quaternion;THREE.Gyroscope.prototype.quaternionObject=new THREE.Quaternion;THREE.Gyroscope.prototype.scaleWorld=new THREE.Vector3;THREE.Gyroscope.prototype.scaleObject=new THREE.Vector3;THREE.Path=function(a){THREE.CurvePath.call(this);this.actions=[];a&&this.fromPoints(a)};THREE.Path.prototype=Object.create(THREE.CurvePath.prototype);THREE.PathActions={MOVE_TO:"moveTo",LINE_TO:"lineTo",QUADRATIC_CURVE_TO:"quadraticCurveTo",BEZIER_CURVE_TO:"bezierCurveTo",CSPLINE_THRU:"splineThru",ARC:"arc",ELLIPSE:"ellipse"};THREE.Path.prototype.fromPoints=function(a){this.moveTo(a[0].x,a[0].y);for(var b=1,c=a.length;b<c;b++)this.lineTo(a[b].x,a[b].y)};
THREE.Path.prototype.moveTo=function(a,b){var c=Array.prototype.slice.call(arguments);this.actions.push({action:THREE.PathActions.MOVE_TO,args:c})};THREE.Path.prototype.lineTo=function(a,b){var c=Array.prototype.slice.call(arguments),d=this.actions[this.actions.length-1].args,d=new THREE.LineCurve(new THREE.Vector2(d[d.length-2],d[d.length-1]),new THREE.Vector2(a,b));this.curves.push(d);this.actions.push({action:THREE.PathActions.LINE_TO,args:c})};
THREE.Path.prototype.quadraticCurveTo=function(a,b,c,d){var e=Array.prototype.slice.call(arguments),f=this.actions[this.actions.length-1].args,f=new THREE.QuadraticBezierCurve(new THREE.Vector2(f[f.length-2],f[f.length-1]),new THREE.Vector2(a,b),new THREE.Vector2(c,d));this.curves.push(f);this.actions.push({action:THREE.PathActions.QUADRATIC_CURVE_TO,args:e})};
THREE.Path.prototype.bezierCurveTo=function(a,b,c,d,e,f){var h=Array.prototype.slice.call(arguments),g=this.actions[this.actions.length-1].args,g=new THREE.CubicBezierCurve(new THREE.Vector2(g[g.length-2],g[g.length-1]),new THREE.Vector2(a,b),new THREE.Vector2(c,d),new THREE.Vector2(e,f));this.curves.push(g);this.actions.push({action:THREE.PathActions.BEZIER_CURVE_TO,args:h})};
THREE.Path.prototype.splineThru=function(a){var b=Array.prototype.slice.call(arguments),c=this.actions[this.actions.length-1].args,c=[new THREE.Vector2(c[c.length-2],c[c.length-1])];Array.prototype.push.apply(c,a);c=new THREE.SplineCurve(c);this.curves.push(c);this.actions.push({action:THREE.PathActions.CSPLINE_THRU,args:b})};THREE.Path.prototype.arc=function(a,b,c,d,e,f){var h=this.actions[this.actions.length-1].args;this.absarc(a+h[h.length-2],b+h[h.length-1],c,d,e,f)};
THREE.Path.prototype.absarc=function(a,b,c,d,e,f){this.absellipse(a,b,c,c,d,e,f)};THREE.Path.prototype.ellipse=function(a,b,c,d,e,f,h){var g=this.actions[this.actions.length-1].args;this.absellipse(a+g[g.length-2],b+g[g.length-1],c,d,e,f,h)};THREE.Path.prototype.absellipse=function(a,b,c,d,e,f,h){var g=Array.prototype.slice.call(arguments),i=new THREE.EllipseCurve(a,b,c,d,e,f,h);this.curves.push(i);i=i.getPoint(1);g.push(i.x);g.push(i.y);this.actions.push({action:THREE.PathActions.ELLIPSE,args:g})};
THREE.Path.prototype.getSpacedPoints=function(a){a||(a=40);for(var b=[],c=0;c<a;c++)b.push(this.getPoint(c/a));return b};
THREE.Path.prototype.getPoints=function(a,b){if(this.useSpacedPoints)return console.log("tata"),this.getSpacedPoints(a,b);var a=a||12,c=[],d,e,f,h,g,i,k,m,l,p,t,s,q;d=0;for(e=this.actions.length;d<e;d++)switch(f=this.actions[d],h=f.action,f=f.args,h){case THREE.PathActions.MOVE_TO:c.push(new THREE.Vector2(f[0],f[1]));break;case THREE.PathActions.LINE_TO:c.push(new THREE.Vector2(f[0],f[1]));break;case THREE.PathActions.QUADRATIC_CURVE_TO:g=f[2];i=f[3];l=f[0];p=f[1];0<c.length?(h=c[c.length-1],t=h.x,
s=h.y):(h=this.actions[d-1].args,t=h[h.length-2],s=h[h.length-1]);for(f=1;f<=a;f++)q=f/a,h=THREE.Shape.Utils.b2(q,t,l,g),q=THREE.Shape.Utils.b2(q,s,p,i),c.push(new THREE.Vector2(h,q));break;case THREE.PathActions.BEZIER_CURVE_TO:g=f[4];i=f[5];l=f[0];p=f[1];k=f[2];m=f[3];0<c.length?(h=c[c.length-1],t=h.x,s=h.y):(h=this.actions[d-1].args,t=h[h.length-2],s=h[h.length-1]);for(f=1;f<=a;f++)q=f/a,h=THREE.Shape.Utils.b3(q,t,l,k,g),q=THREE.Shape.Utils.b3(q,s,p,m,i),c.push(new THREE.Vector2(h,q));break;case THREE.PathActions.CSPLINE_THRU:h=
this.actions[d-1].args;q=[new THREE.Vector2(h[h.length-2],h[h.length-1])];h=a*f[0].length;q=q.concat(f[0]);q=new THREE.SplineCurve(q);for(f=1;f<=h;f++)c.push(q.getPointAt(f/h));break;case THREE.PathActions.ARC:g=f[0];i=f[1];p=f[2];k=f[3];h=f[4];l=!!f[5];t=h-k;s=2*a;for(f=1;f<=s;f++)q=f/s,l||(q=1-q),q=k+q*t,h=g+p*Math.cos(q),q=i+p*Math.sin(q),c.push(new THREE.Vector2(h,q));break;case THREE.PathActions.ELLIPSE:g=f[0];i=f[1];p=f[2];m=f[3];k=f[4];h=f[5];l=!!f[6];t=h-k;s=2*a;for(f=1;f<=s;f++)q=f/s,l||
(q=1-q),q=k+q*t,h=g+p*Math.cos(q),q=i+m*Math.sin(q),c.push(new THREE.Vector2(h,q))}d=c[c.length-1];1E-10>Math.abs(d.x-c[0].x)&&1E-10>Math.abs(d.y-c[0].y)&&c.splice(c.length-1,1);b&&c.push(c[0]);return c};
THREE.Path.prototype.toShapes=function(a){var b,c,d,e,f=[],h=new THREE.Path;b=0;for(c=this.actions.length;b<c;b++)d=this.actions[b],e=d.args,d=d.action,d==THREE.PathActions.MOVE_TO&&0!=h.actions.length&&(f.push(h),h=new THREE.Path),h[d].apply(h,e);0!=h.actions.length&&f.push(h);if(0==f.length)return[];var g;e=[];if(1==f.length)return d=f[0],g=new THREE.Shape,g.actions=d.actions,g.curves=d.curves,e.push(g),e;b=!THREE.Shape.Utils.isClockWise(f[0].getPoints());if(a?!b:b){g=new THREE.Shape;b=0;for(c=
f.length;b<c;b++)d=f[b],h=THREE.Shape.Utils.isClockWise(d.getPoints()),(h=a?!h:h)?(g.actions=d.actions,g.curves=d.curves,e.push(g),g=new THREE.Shape):g.holes.push(d)}else{g=void 0;b=0;for(c=f.length;b<c;b++)d=f[b],h=THREE.Shape.Utils.isClockWise(d.getPoints()),(h=a?!h:h)?(g&&e.push(g),g=new THREE.Shape,g.actions=d.actions,g.curves=d.curves):g.holes.push(d);e.push(g)}return e};THREE.Shape=function(){THREE.Path.apply(this,arguments);this.holes=[]};THREE.Shape.prototype=Object.create(THREE.Path.prototype);THREE.Shape.prototype.extrude=function(a){return new THREE.ExtrudeGeometry(this,a)};THREE.Shape.prototype.makeGeometry=function(a){return new THREE.ShapeGeometry(this,a)};THREE.Shape.prototype.getPointsHoles=function(a){var b,c=this.holes.length,d=[];for(b=0;b<c;b++)d[b]=this.holes[b].getTransformedPoints(a,this.bends);return d};
THREE.Shape.prototype.getSpacedPointsHoles=function(a){var b,c=this.holes.length,d=[];for(b=0;b<c;b++)d[b]=this.holes[b].getTransformedSpacedPoints(a,this.bends);return d};THREE.Shape.prototype.extractAllPoints=function(a){return{shape:this.getTransformedPoints(a),holes:this.getPointsHoles(a)}};THREE.Shape.prototype.extractPoints=function(a){return this.useSpacedPoints?this.extractAllSpacedPoints(a):this.extractAllPoints(a)};
THREE.Shape.prototype.extractAllSpacedPoints=function(a){return{shape:this.getTransformedSpacedPoints(a),holes:this.getSpacedPointsHoles(a)}};
THREE.Shape.Utils={removeHoles:function(a,b){var c=a.concat(),d=c.concat(),e,f,h,g,i,k,m,l,p,t,s=[];for(i=0;i<b.length;i++){k=b[i];Array.prototype.push.apply(d,k);f=Number.POSITIVE_INFINITY;for(e=0;e<k.length;e++){p=k[e];t=[];for(l=0;l<c.length;l++)m=c[l],m=p.distanceToSquared(m),t.push(m),m<f&&(f=m,h=e,g=l)}e=0<=g-1?g-1:c.length-1;f=0<=h-1?h-1:k.length-1;var q=[k[h],c[g],c[e]];l=THREE.FontUtils.Triangulate.area(q);var n=[k[h],k[f],c[g]];p=THREE.FontUtils.Triangulate.area(n);t=g;m=h;g+=1;h+=-1;0>
g&&(g+=c.length);g%=c.length;0>h&&(h+=k.length);h%=k.length;e=0<=g-1?g-1:c.length-1;f=0<=h-1?h-1:k.length-1;q=[k[h],c[g],c[e]];q=THREE.FontUtils.Triangulate.area(q);n=[k[h],k[f],c[g]];n=THREE.FontUtils.Triangulate.area(n);l+p>q+n&&(g=t,h=m,0>g&&(g+=c.length),g%=c.length,0>h&&(h+=k.length),h%=k.length,e=0<=g-1?g-1:c.length-1,f=0<=h-1?h-1:k.length-1);l=c.slice(0,g);p=c.slice(g);t=k.slice(h);m=k.slice(0,h);f=[k[h],k[f],c[g]];s.push([k[h],c[g],c[e]]);s.push(f);c=l.concat(t).concat(m).concat(p)}return{shape:c,
isolatedPts:s,allpoints:d}},triangulateShape:function(a,b){var c=THREE.Shape.Utils.removeHoles(a,b),d=c.allpoints,e=c.isolatedPts,c=THREE.FontUtils.Triangulate(c.shape,!1),f,h,g,i,k={};f=0;for(h=d.length;f<h;f++)i=d[f].x+":"+d[f].y,void 0!==k[i]&&console.log("Duplicate point",i),k[i]=f;f=0;for(h=c.length;f<h;f++){g=c[f];for(d=0;3>d;d++)i=g[d].x+":"+g[d].y,i=k[i],void 0!==i&&(g[d]=i)}f=0;for(h=e.length;f<h;f++){g=e[f];for(d=0;3>d;d++)i=g[d].x+":"+g[d].y,i=k[i],void 0!==i&&(g[d]=i)}return c.concat(e)},
isClockWise:function(a){return 0>THREE.FontUtils.Triangulate.area(a)},b2p0:function(a,b){var c=1-a;return c*c*b},b2p1:function(a,b){return 2*(1-a)*a*b},b2p2:function(a,b){return a*a*b},b2:function(a,b,c,d){return this.b2p0(a,b)+this.b2p1(a,c)+this.b2p2(a,d)},b3p0:function(a,b){var c=1-a;return c*c*c*b},b3p1:function(a,b){var c=1-a;return 3*c*c*a*b},b3p2:function(a,b){return 3*(1-a)*a*a*b},b3p3:function(a,b){return a*a*a*b},b3:function(a,b,c,d,e){return this.b3p0(a,b)+this.b3p1(a,c)+this.b3p2(a,d)+
this.b3p3(a,e)}};THREE.LineCurve=function(a,b){this.v1=a;this.v2=b};THREE.LineCurve.prototype=Object.create(THREE.Curve.prototype);THREE.LineCurve.prototype.getPoint=function(a){var b=this.v2.clone().sub(this.v1);b.multiplyScalar(a).add(this.v1);return b};THREE.LineCurve.prototype.getPointAt=function(a){return this.getPoint(a)};THREE.LineCurve.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()};THREE.QuadraticBezierCurve=function(a,b,c){this.v0=a;this.v1=b;this.v2=c};THREE.QuadraticBezierCurve.prototype=Object.create(THREE.Curve.prototype);THREE.QuadraticBezierCurve.prototype.getPoint=function(a){var b;b=THREE.Shape.Utils.b2(a,this.v0.x,this.v1.x,this.v2.x);a=THREE.Shape.Utils.b2(a,this.v0.y,this.v1.y,this.v2.y);return new THREE.Vector2(b,a)};
THREE.QuadraticBezierCurve.prototype.getTangent=function(a){var b;b=THREE.Curve.Utils.tangentQuadraticBezier(a,this.v0.x,this.v1.x,this.v2.x);a=THREE.Curve.Utils.tangentQuadraticBezier(a,this.v0.y,this.v1.y,this.v2.y);b=new THREE.Vector2(b,a);b.normalize();return b};THREE.CubicBezierCurve=function(a,b,c,d){this.v0=a;this.v1=b;this.v2=c;this.v3=d};THREE.CubicBezierCurve.prototype=Object.create(THREE.Curve.prototype);THREE.CubicBezierCurve.prototype.getPoint=function(a){var b;b=THREE.Shape.Utils.b3(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x);a=THREE.Shape.Utils.b3(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y);return new THREE.Vector2(b,a)};
THREE.CubicBezierCurve.prototype.getTangent=function(a){var b;b=THREE.Curve.Utils.tangentCubicBezier(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x);a=THREE.Curve.Utils.tangentCubicBezier(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y);b=new THREE.Vector2(b,a);b.normalize();return b};THREE.SplineCurve=function(a){this.points=void 0==a?[]:a};THREE.SplineCurve.prototype=Object.create(THREE.Curve.prototype);THREE.SplineCurve.prototype.getPoint=function(a){var b=new THREE.Vector2,c=[],d=this.points,e;e=(d.length-1)*a;a=Math.floor(e);e-=a;c[0]=0==a?a:a-1;c[1]=a;c[2]=a>d.length-2?d.length-1:a+1;c[3]=a>d.length-3?d.length-1:a+2;b.x=THREE.Curve.Utils.interpolate(d[c[0]].x,d[c[1]].x,d[c[2]].x,d[c[3]].x,e);b.y=THREE.Curve.Utils.interpolate(d[c[0]].y,d[c[1]].y,d[c[2]].y,d[c[3]].y,e);return b};THREE.EllipseCurve=function(a,b,c,d,e,f,h){this.aX=a;this.aY=b;this.xRadius=c;this.yRadius=d;this.aStartAngle=e;this.aEndAngle=f;this.aClockwise=h};THREE.EllipseCurve.prototype=Object.create(THREE.Curve.prototype);
THREE.EllipseCurve.prototype.getPoint=function(a){var b;b=this.aEndAngle-this.aStartAngle;0>b&&(b+=2*Math.PI);b>2*Math.PI&&(b-=2*Math.PI);b=!0===this.aClockwise?this.aEndAngle+(1-a)*(2*Math.PI-b):this.aStartAngle+a*b;a=this.aX+this.xRadius*Math.cos(b);b=this.aY+this.yRadius*Math.sin(b);return new THREE.Vector2(a,b)};THREE.ArcCurve=function(a,b,c,d,e,f){THREE.EllipseCurve.call(this,a,b,c,c,d,e,f)};THREE.ArcCurve.prototype=Object.create(THREE.EllipseCurve.prototype);THREE.LineCurve3=THREE.Curve.create(function(a,b){this.v1=a;this.v2=b},function(a){var b=new THREE.Vector3;b.subVectors(this.v2,this.v1);b.multiplyScalar(a);b.add(this.v1);return b});THREE.QuadraticBezierCurve3=THREE.Curve.create(function(a,b,c){this.v0=a;this.v1=b;this.v2=c},function(a){var b,c;b=THREE.Shape.Utils.b2(a,this.v0.x,this.v1.x,this.v2.x);c=THREE.Shape.Utils.b2(a,this.v0.y,this.v1.y,this.v2.y);a=THREE.Shape.Utils.b2(a,this.v0.z,this.v1.z,this.v2.z);return new THREE.Vector3(b,c,a)});THREE.CubicBezierCurve3=THREE.Curve.create(function(a,b,c,d){this.v0=a;this.v1=b;this.v2=c;this.v3=d},function(a){var b,c;b=THREE.Shape.Utils.b3(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x);c=THREE.Shape.Utils.b3(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y);a=THREE.Shape.Utils.b3(a,this.v0.z,this.v1.z,this.v2.z,this.v3.z);return new THREE.Vector3(b,c,a)});THREE.SplineCurve3=THREE.Curve.create(function(a){this.points=void 0==a?[]:a},function(a){var b=new THREE.Vector3,c=[],d=this.points,e,a=(d.length-1)*a;e=Math.floor(a);a-=e;c[0]=0==e?e:e-1;c[1]=e;c[2]=e>d.length-2?d.length-1:e+1;c[3]=e>d.length-3?d.length-1:e+2;e=d[c[0]];var f=d[c[1]],h=d[c[2]],c=d[c[3]];b.x=THREE.Curve.Utils.interpolate(e.x,f.x,h.x,c.x,a);b.y=THREE.Curve.Utils.interpolate(e.y,f.y,h.y,c.y,a);b.z=THREE.Curve.Utils.interpolate(e.z,f.z,h.z,c.z,a);return b});THREE.ClosedSplineCurve3=THREE.Curve.create(function(a){this.points=void 0==a?[]:a},function(a){var b=new THREE.Vector3,c=[],d=this.points,e;e=(d.length-0)*a;a=Math.floor(e);e-=a;a+=0<a?0:(Math.floor(Math.abs(a)/d.length)+1)*d.length;c[0]=(a-1)%d.length;c[1]=a%d.length;c[2]=(a+1)%d.length;c[3]=(a+2)%d.length;b.x=THREE.Curve.Utils.interpolate(d[c[0]].x,d[c[1]].x,d[c[2]].x,d[c[3]].x,e);b.y=THREE.Curve.Utils.interpolate(d[c[0]].y,d[c[1]].y,d[c[2]].y,d[c[3]].y,e);b.z=THREE.Curve.Utils.interpolate(d[c[0]].z,
d[c[1]].z,d[c[2]].z,d[c[3]].z,e);return b});THREE.AnimationHandler=function(){var a=[],b={},c={update:function(b){for(var c=0;c<a.length;c++)a[c].update(b)},addToUpdate:function(b){-1===a.indexOf(b)&&a.push(b)},removeFromUpdate:function(b){b=a.indexOf(b);-1!==b&&a.splice(b,1)},add:function(a){void 0!==b[a.name]&&console.log("THREE.AnimationHandler.add: Warning! "+a.name+" already exists in library. Overwriting.");b[a.name]=a;if(!0!==a.initialized){for(var c=0;c<a.hierarchy.length;c++){for(var d=0;d<a.hierarchy[c].keys.length;d++)if(0>a.hierarchy[c].keys[d].time&&
(a.hierarchy[c].keys[d].time=0),void 0!==a.hierarchy[c].keys[d].rot&&!(a.hierarchy[c].keys[d].rot instanceof THREE.Quaternion)){var g=a.hierarchy[c].keys[d].rot;a.hierarchy[c].keys[d].rot=new THREE.Quaternion(g[0],g[1],g[2],g[3])}if(a.hierarchy[c].keys.length&&void 0!==a.hierarchy[c].keys[0].morphTargets){g={};for(d=0;d<a.hierarchy[c].keys.length;d++)for(var i=0;i<a.hierarchy[c].keys[d].morphTargets.length;i++){var k=a.hierarchy[c].keys[d].morphTargets[i];g[k]=-1}a.hierarchy[c].usedMorphTargets=g;
for(d=0;d<a.hierarchy[c].keys.length;d++){var m={};for(k in g){for(i=0;i<a.hierarchy[c].keys[d].morphTargets.length;i++)if(a.hierarchy[c].keys[d].morphTargets[i]===k){m[k]=a.hierarchy[c].keys[d].morphTargetsInfluences[i];break}i===a.hierarchy[c].keys[d].morphTargets.length&&(m[k]=0)}a.hierarchy[c].keys[d].morphTargetsInfluences=m}}for(d=1;d<a.hierarchy[c].keys.length;d++)a.hierarchy[c].keys[d].time===a.hierarchy[c].keys[d-1].time&&(a.hierarchy[c].keys.splice(d,1),d--);for(d=0;d<a.hierarchy[c].keys.length;d++)a.hierarchy[c].keys[d].index=
d}d=parseInt(a.length*a.fps,10);a.JIT={};a.JIT.hierarchy=[];for(c=0;c<a.hierarchy.length;c++)a.JIT.hierarchy.push(Array(d));a.initialized=!0}},get:function(a){if("string"===typeof a){if(b[a])return b[a];console.log("THREE.AnimationHandler.get: Couldn't find animation "+a);return null}},parse:function(a){var b=[];if(a instanceof THREE.SkinnedMesh)for(var c=0;c<a.bones.length;c++)b.push(a.bones[c]);else d(a,b);return b}},d=function(a,b){b.push(a);for(var c=0;c<a.children.length;c++)d(a.children[c],
b)};c.LINEAR=0;c.CATMULLROM=1;c.CATMULLROM_FORWARD=2;return c}();THREE.Animation=function(a,b,c){this.root=a;this.data=THREE.AnimationHandler.get(b);this.hierarchy=THREE.AnimationHandler.parse(a);this.currentTime=0;this.timeScale=1;this.isPlaying=!1;this.loop=this.isPaused=!0;this.interpolationType=void 0!==c?c:THREE.AnimationHandler.LINEAR;this.points=[];this.target=new THREE.Vector3};
THREE.Animation.prototype.play=function(a,b){if(!1===this.isPlaying){this.isPlaying=!0;this.loop=void 0!==a?a:!0;this.currentTime=void 0!==b?b:0;var c,d=this.hierarchy.length,e;for(c=0;c<d;c++){e=this.hierarchy[c];e.matrixAutoUpdate=!0;void 0===e.animationCache&&(e.animationCache={},e.animationCache.prevKey={pos:0,rot:0,scl:0},e.animationCache.nextKey={pos:0,rot:0,scl:0},e.animationCache.originalMatrix=e instanceof THREE.Bone?e.skinMatrix:e.matrix);var f=e.animationCache.prevKey;e=e.animationCache.nextKey;
f.pos=this.data.hierarchy[c].keys[0];f.rot=this.data.hierarchy[c].keys[0];f.scl=this.data.hierarchy[c].keys[0];e.pos=this.getNextKeyWith("pos",c,1);e.rot=this.getNextKeyWith("rot",c,1);e.scl=this.getNextKeyWith("scl",c,1)}this.update(0)}this.isPaused=!1;THREE.AnimationHandler.addToUpdate(this)};THREE.Animation.prototype.pause=function(){!0===this.isPaused?THREE.AnimationHandler.addToUpdate(this):THREE.AnimationHandler.removeFromUpdate(this);this.isPaused=!this.isPaused};
THREE.Animation.prototype.stop=function(){this.isPaused=this.isPlaying=!1;THREE.AnimationHandler.removeFromUpdate(this)};
THREE.Animation.prototype.update=function(a){if(!1!==this.isPlaying){var b=["pos","rot","scl"],c,d,e,f,h,g,i,k,m;for(m=this.currentTime+=a*this.timeScale;this.currentTime>this.data.length;)this.currentTime-=this.data.length;k=this.currentTime%=this.data.length;parseInt(Math.min(k*this.data.fps,this.data.length*this.data.fps),10);for(var l=0,p=this.hierarchy.length;l<p;l++){a=this.hierarchy[l];i=a.animationCache;for(var t=0;3>t;t++){c=b[t];h=i.prevKey[c];g=i.nextKey[c];if(g.time<=m){if(k<=m)if(this.loop){h=
this.data.hierarchy[l].keys[0];for(g=this.getNextKeyWith(c,l,1);null!==g&&g.time<k&&g.index>h.index;)h=g,g=this.getNextKeyWith(c,l,g.index+1)}else{this.stop();return}else{do h=g,g=this.getNextKeyWith(c,l,g.index+1);while(null!==g&&g.time<k&&g.index>h.index)}i.prevKey[c]=h;i.nextKey[c]=g}a.matrixAutoUpdate=!0;a.matrixWorldNeedsUpdate=!0;d=(k-h.time)/(g.time-h.time);e=h[c];f=g[c];if(0>d||1<d)console.log("THREE.Animation.update: Warning! Scale out of bounds:"+d+" on bone "+l),d=0>d?0:1;if("pos"===c)if(c=
a.position,this.interpolationType===THREE.AnimationHandler.LINEAR)c.x=e[0]+(f[0]-e[0])*d,c.y=e[1]+(f[1]-e[1])*d,c.z=e[2]+(f[2]-e[2])*d;else{if(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD)this.points[0]=this.getPrevKeyWith("pos",l,h.index-1).pos,this.points[1]=e,this.points[2]=f,this.points[3]=this.getNextKeyWith("pos",l,g.index+1).pos,d=0.33*d+0.33,e=this.interpolateCatmullRom(this.points,d),c.x=e[0],c.y=e[1],c.z=e[2],
this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD&&(d=this.interpolateCatmullRom(this.points,1.01*d),this.target.set(d[0],d[1],d[2]),this.target.sub(c),this.target.y=0,this.target.normalize(),d=Math.atan2(this.target.x,this.target.z),a.rotation.set(0,d,0))}else"rot"===c?THREE.Quaternion.slerp(e,f,a.quaternion,d):"scl"===c&&(c=a.scale,c.x=e[0]+(f[0]-e[0])*d,c.y=e[1]+(f[1]-e[1])*d,c.z=e[2]+(f[2]-e[2])*d)}}}};
THREE.Animation.prototype.interpolateCatmullRom=function(a,b){var c=[],d=[],e,f,h,g,i,k;e=(a.length-1)*b;f=Math.floor(e);e-=f;c[0]=0===f?f:f-1;c[1]=f;c[2]=f>a.length-2?f:f+1;c[3]=f>a.length-3?f:f+2;f=a[c[0]];g=a[c[1]];i=a[c[2]];k=a[c[3]];c=e*e;h=e*c;d[0]=this.interpolate(f[0],g[0],i[0],k[0],e,c,h);d[1]=this.interpolate(f[1],g[1],i[1],k[1],e,c,h);d[2]=this.interpolate(f[2],g[2],i[2],k[2],e,c,h);return d};
THREE.Animation.prototype.interpolate=function(a,b,c,d,e,f,h){a=0.5*(c-a);d=0.5*(d-b);return(2*(b-c)+a+d)*h+(-3*(b-c)-2*a-d)*f+a*e+b};THREE.Animation.prototype.getNextKeyWith=function(a,b,c){for(var d=this.data.hierarchy[b].keys,c=this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?c<d.length-1?c:d.length-1:c%d.length;c<d.length;c++)if(void 0!==d[c][a])return d[c];return this.data.hierarchy[b].keys[0]};
THREE.Animation.prototype.getPrevKeyWith=function(a,b,c){for(var d=this.data.hierarchy[b].keys,c=this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?0<c?c:0:0<=c?c:c+d.length;0<=c;c--)if(void 0!==d[c][a])return d[c];return this.data.hierarchy[b].keys[d.length-1]};THREE.KeyFrameAnimation=function(a,b,c){this.root=a;this.data=THREE.AnimationHandler.get(b);this.hierarchy=THREE.AnimationHandler.parse(a);this.currentTime=0;this.timeScale=0.001;this.isPlaying=!1;this.loop=this.isPaused=!0;this.JITCompile=void 0!==c?c:!0;a=0;for(b=this.hierarchy.length;a<b;a++){var c=this.data.hierarchy[a].sids,d=this.hierarchy[a];if(this.data.hierarchy[a].keys.length&&c){for(var e=0;e<c.length;e++){var f=c[e],h=this.getNextKeyWith(f,a,0);h&&h.apply(f)}d.matrixAutoUpdate=!1;this.data.hierarchy[a].node.updateMatrix();
d.matrixWorldNeedsUpdate=!0}}};
THREE.KeyFrameAnimation.prototype.play=function(a,b){if(!this.isPlaying){this.isPlaying=!0;this.loop=void 0!==a?a:!0;this.currentTime=void 0!==b?b:0;this.startTimeMs=b;this.startTime=1E7;this.endTime=-this.startTime;var c,d=this.hierarchy.length,e,f;for(c=0;c<d;c++)e=this.hierarchy[c],f=this.data.hierarchy[c],void 0===f.animationCache&&(f.animationCache={},f.animationCache.prevKey=null,f.animationCache.nextKey=null,f.animationCache.originalMatrix=e instanceof THREE.Bone?e.skinMatrix:e.matrix),e=this.data.hierarchy[c].keys,
e.length&&(f.animationCache.prevKey=e[0],f.animationCache.nextKey=e[1],this.startTime=Math.min(e[0].time,this.startTime),this.endTime=Math.max(e[e.length-1].time,this.endTime));this.update(0)}this.isPaused=!1;THREE.AnimationHandler.addToUpdate(this)};THREE.KeyFrameAnimation.prototype.pause=function(){this.isPaused?THREE.AnimationHandler.addToUpdate(this):THREE.AnimationHandler.removeFromUpdate(this);this.isPaused=!this.isPaused};
THREE.KeyFrameAnimation.prototype.stop=function(){this.isPaused=this.isPlaying=!1;THREE.AnimationHandler.removeFromUpdate(this);for(var a=0;a<this.data.hierarchy.length;a++){var b=this.hierarchy[a],c=this.data.hierarchy[a];if(void 0!==c.animationCache){var d=c.animationCache.originalMatrix;b instanceof THREE.Bone?(d.copy(b.skinMatrix),b.skinMatrix=d):(d.copy(b.matrix),b.matrix=d);delete c.animationCache}}};
THREE.KeyFrameAnimation.prototype.update=function(a){if(this.isPlaying){var b,c,d,e,f=this.data.JIT.hierarchy,h,g,i;g=this.currentTime+=a*this.timeScale;h=this.currentTime%=this.data.length;h<this.startTimeMs&&(h=this.currentTime=this.startTimeMs+h);e=parseInt(Math.min(h*this.data.fps,this.data.length*this.data.fps),10);if((i=h<g)&&!this.loop){for(var a=0,k=this.hierarchy.length;a<k;a++){var m=this.data.hierarchy[a].keys,f=this.data.hierarchy[a].sids;d=m.length-1;e=this.hierarchy[a];if(m.length){for(m=
0;m<f.length;m++)h=f[m],(g=this.getPrevKeyWith(h,a,d))&&g.apply(h);this.data.hierarchy[a].node.updateMatrix();e.matrixWorldNeedsUpdate=!0}}this.stop()}else if(!(h<this.startTime)){a=0;for(k=this.hierarchy.length;a<k;a++){d=this.hierarchy[a];b=this.data.hierarchy[a];var m=b.keys,l=b.animationCache;if(this.JITCompile&&void 0!==f[a][e])d instanceof THREE.Bone?(d.skinMatrix=f[a][e],d.matrixWorldNeedsUpdate=!1):(d.matrix=f[a][e],d.matrixWorldNeedsUpdate=!0);else if(m.length){this.JITCompile&&l&&(d instanceof
THREE.Bone?d.skinMatrix=l.originalMatrix:d.matrix=l.originalMatrix);b=l.prevKey;c=l.nextKey;if(b&&c){if(c.time<=g){if(i&&this.loop){b=m[0];for(c=m[1];c.time<h;)b=c,c=m[b.index+1]}else if(!i)for(var p=m.length-1;c.time<h&&c.index!==p;)b=c,c=m[b.index+1];l.prevKey=b;l.nextKey=c}c.time>=h?b.interpolate(c,h):b.interpolate(c,c.time)}this.data.hierarchy[a].node.updateMatrix();d.matrixWorldNeedsUpdate=!0}}if(this.JITCompile&&void 0===f[0][e]){this.hierarchy[0].updateMatrixWorld(!0);for(a=0;a<this.hierarchy.length;a++)f[a][e]=
this.hierarchy[a]instanceof THREE.Bone?this.hierarchy[a].skinMatrix.clone():this.hierarchy[a].matrix.clone()}}}};THREE.KeyFrameAnimation.prototype.getNextKeyWith=function(a,b,c){b=this.data.hierarchy[b].keys;for(c%=b.length;c<b.length;c++)if(b[c].hasTarget(a))return b[c];return b[0]};THREE.KeyFrameAnimation.prototype.getPrevKeyWith=function(a,b,c){b=this.data.hierarchy[b].keys;for(c=0<=c?c:c+b.length;0<=c;c--)if(b[c].hasTarget(a))return b[c];return b[b.length-1]};THREE.CubeCamera=function(a,b,c){THREE.Object3D.call(this);var d=new THREE.PerspectiveCamera(90,1,a,b);d.up.set(0,-1,0);d.lookAt(new THREE.Vector3(1,0,0));this.add(d);var e=new THREE.PerspectiveCamera(90,1,a,b);e.up.set(0,-1,0);e.lookAt(new THREE.Vector3(-1,0,0));this.add(e);var f=new THREE.PerspectiveCamera(90,1,a,b);f.up.set(0,0,1);f.lookAt(new THREE.Vector3(0,1,0));this.add(f);var h=new THREE.PerspectiveCamera(90,1,a,b);h.up.set(0,0,-1);h.lookAt(new THREE.Vector3(0,-1,0));this.add(h);var g=new THREE.PerspectiveCamera(90,
1,a,b);g.up.set(0,-1,0);g.lookAt(new THREE.Vector3(0,0,1));this.add(g);var i=new THREE.PerspectiveCamera(90,1,a,b);i.up.set(0,-1,0);i.lookAt(new THREE.Vector3(0,0,-1));this.add(i);this.renderTarget=new THREE.WebGLRenderTargetCube(c,c,{format:THREE.RGBFormat,magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter});this.updateCubeMap=function(a,b){var c=this.renderTarget,p=c.generateMipmaps;c.generateMipmaps=!1;c.activeCubeFace=0;a.render(b,d,c);c.activeCubeFace=1;a.render(b,e,c);c.activeCubeFace=
2;a.render(b,f,c);c.activeCubeFace=3;a.render(b,h,c);c.activeCubeFace=4;a.render(b,g,c);c.generateMipmaps=p;c.activeCubeFace=5;a.render(b,i,c)}};THREE.CubeCamera.prototype=Object.create(THREE.Object3D.prototype);THREE.CombinedCamera=function(a,b,c,d,e,f,h){THREE.Camera.call(this);this.fov=c;this.left=-a/2;this.right=a/2;this.top=b/2;this.bottom=-b/2;this.cameraO=new THREE.OrthographicCamera(a/-2,a/2,b/2,b/-2,f,h);this.cameraP=new THREE.PerspectiveCamera(c,a/b,d,e);this.zoom=1;this.toPerspective()};THREE.CombinedCamera.prototype=Object.create(THREE.Camera.prototype);
THREE.CombinedCamera.prototype.toPerspective=function(){this.near=this.cameraP.near;this.far=this.cameraP.far;this.cameraP.fov=this.fov/this.zoom;this.cameraP.updateProjectionMatrix();this.projectionMatrix=this.cameraP.projectionMatrix;this.inPerspectiveMode=!0;this.inOrthographicMode=!1};
THREE.CombinedCamera.prototype.toOrthographic=function(){var a=this.cameraP.aspect,b=(this.cameraP.near+this.cameraP.far)/2,b=Math.tan(this.fov/2)*b,a=2*b*a/2,b=b/this.zoom,a=a/this.zoom;this.cameraO.left=-a;this.cameraO.right=a;this.cameraO.top=b;this.cameraO.bottom=-b;this.cameraO.updateProjectionMatrix();this.near=this.cameraO.near;this.far=this.cameraO.far;this.projectionMatrix=this.cameraO.projectionMatrix;this.inPerspectiveMode=!1;this.inOrthographicMode=!0};
THREE.CombinedCamera.prototype.setSize=function(a,b){this.cameraP.aspect=a/b;this.left=-a/2;this.right=a/2;this.top=b/2;this.bottom=-b/2};THREE.CombinedCamera.prototype.setFov=function(a){this.fov=a;this.inPerspectiveMode?this.toPerspective():this.toOrthographic()};THREE.CombinedCamera.prototype.updateProjectionMatrix=function(){this.inPerspectiveMode?this.toPerspective():(this.toPerspective(),this.toOrthographic())};
THREE.CombinedCamera.prototype.setLens=function(a,b){void 0===b&&(b=24);var c=2*THREE.Math.radToDeg(Math.atan(b/(2*a)));this.setFov(c);return c};THREE.CombinedCamera.prototype.setZoom=function(a){this.zoom=a;this.inPerspectiveMode?this.toPerspective():this.toOrthographic()};THREE.CombinedCamera.prototype.toFrontView=function(){this.rotation.x=0;this.rotation.y=0;this.rotation.z=0;this.rotationAutoUpdate=!1};
THREE.CombinedCamera.prototype.toBackView=function(){this.rotation.x=0;this.rotation.y=Math.PI;this.rotation.z=0;this.rotationAutoUpdate=!1};THREE.CombinedCamera.prototype.toLeftView=function(){this.rotation.x=0;this.rotation.y=-Math.PI/2;this.rotation.z=0;this.rotationAutoUpdate=!1};THREE.CombinedCamera.prototype.toRightView=function(){this.rotation.x=0;this.rotation.y=Math.PI/2;this.rotation.z=0;this.rotationAutoUpdate=!1};
THREE.CombinedCamera.prototype.toTopView=function(){this.rotation.x=-Math.PI/2;this.rotation.y=0;this.rotation.z=0;this.rotationAutoUpdate=!1};THREE.CombinedCamera.prototype.toBottomView=function(){this.rotation.x=Math.PI/2;this.rotation.y=0;this.rotation.z=0;this.rotationAutoUpdate=!1};THREE.CircleGeometry=function(a,b,c,d){THREE.Geometry.call(this);this.radius=a=a||50;this.segments=b=void 0!==b?Math.max(3,b):8;this.thetaStart=c=void 0!==c?c:0;this.thetaLength=d=void 0!==d?d:2*Math.PI;var e,f=[];e=new THREE.Vector3;var h=new THREE.Vector2(0.5,0.5);this.vertices.push(e);f.push(h);for(e=0;e<=b;e++){var g=new THREE.Vector3,i=c+e/b*d;g.x=a*Math.cos(i);g.y=a*Math.sin(i);this.vertices.push(g);f.push(new THREE.Vector2((g.x/a+1)/2,(g.y/a+1)/2))}c=new THREE.Vector3(0,0,1);for(e=1;e<=b;e++)this.faces.push(new THREE.Face3(e,
e+1,0,[c.clone(),c.clone(),c.clone()])),this.faceVertexUvs[0].push([f[e].clone(),f[e+1].clone(),h.clone()]);this.computeCentroids();this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,a)};THREE.CircleGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.CubeGeometry=function(a,b,c,d,e,f){function h(a,b,c,d,e,f,h,q){var n,u=g.widthSegments,r=g.heightSegments,v=e/2,z=f/2,G=g.vertices.length;if("x"===a&&"y"===b||"y"===a&&"x"===b)n="z";else if("x"===a&&"z"===b||"z"===a&&"x"===b)n="y",r=g.depthSegments;else if("z"===a&&"y"===b||"y"===a&&"z"===b)n="x",u=g.depthSegments;var w=u+1,y=r+1,E=e/u,A=f/r,K=new THREE.Vector3;K[n]=0<h?1:-1;for(e=0;e<y;e++)for(f=0;f<w;f++){var D=new THREE.Vector3;D[a]=(f*E-v)*c;D[b]=(e*A-z)*d;D[n]=h;g.vertices.push(D)}for(e=
0;e<r;e++)for(f=0;f<u;f++)z=f+w*e,a=f+w*(e+1),b=f+1+w*(e+1),c=f+1+w*e,d=new THREE.Vector2(f/u,1-e/r),h=new THREE.Vector2(f/u,1-(e+1)/r),n=new THREE.Vector2((f+1)/u,1-(e+1)/r),v=new THREE.Vector2((f+1)/u,1-e/r),z=new THREE.Face3(z+G,a+G,c+G),z.normal.copy(K),z.vertexNormals.push(K.clone(),K.clone(),K.clone()),z.materialIndex=q,g.faces.push(z),g.faceVertexUvs[0].push([d,h,v]),z=new THREE.Face3(a+G,b+G,c+G),z.normal.copy(K),z.vertexNormals.push(K.clone(),K.clone(),K.clone()),z.materialIndex=q,g.faces.push(z),
g.faceVertexUvs[0].push([h.clone(),n,v.clone()])}THREE.Geometry.call(this);var g=this;this.width=a;this.height=b;this.depth=c;this.widthSegments=d||1;this.heightSegments=e||1;this.depthSegments=f||1;a=this.width/2;b=this.height/2;c=this.depth/2;h("z","y",-1,-1,this.depth,this.height,a,0);h("z","y",1,-1,this.depth,this.height,-a,1);h("x","z",1,1,this.width,this.depth,b,2);h("x","z",1,-1,this.width,this.depth,-b,3);h("x","y",1,-1,this.width,this.height,c,4);h("x","y",-1,-1,this.width,this.height,-c,
5);this.computeCentroids();this.mergeVertices()};THREE.CubeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.CylinderGeometry=function(a,b,c,d,e,f){THREE.Geometry.call(this);this.radiusTop=a=void 0!==a?a:20;this.radiusBottom=b=void 0!==b?b:20;this.height=c=void 0!==c?c:100;this.radialSegments=d=d||8;this.heightSegments=e=e||1;this.openEnded=f=void 0!==f?f:!1;var h=c/2,g,i,k=[],m=[];for(i=0;i<=e;i++){var l=[],p=[],t=i/e,s=t*(b-a)+a;for(g=0;g<=d;g++){var q=g/d,n=new THREE.Vector3;n.x=s*Math.sin(2*q*Math.PI);n.y=-t*c+h;n.z=s*Math.cos(2*q*Math.PI);this.vertices.push(n);l.push(this.vertices.length-1);p.push(new THREE.Vector2(q,
1-t))}k.push(l);m.push(p)}c=(b-a)/c;for(g=0;g<d;g++){0!==a?(l=this.vertices[k[0][g]].clone(),p=this.vertices[k[0][g+1]].clone()):(l=this.vertices[k[1][g]].clone(),p=this.vertices[k[1][g+1]].clone());l.setY(Math.sqrt(l.x*l.x+l.z*l.z)*c).normalize();p.setY(Math.sqrt(p.x*p.x+p.z*p.z)*c).normalize();for(i=0;i<e;i++){var t=k[i][g],s=k[i+1][g],q=k[i+1][g+1],n=k[i][g+1],u=l.clone(),r=l.clone(),v=p.clone(),z=p.clone(),G=m[i][g].clone(),w=m[i+1][g].clone(),y=m[i+1][g+1].clone(),E=m[i][g+1].clone();this.faces.push(new THREE.Face3(t,
s,n,[u,r,z]));this.faceVertexUvs[0].push([G,w,E]);this.faces.push(new THREE.Face3(s,q,n,[r.clone(),v,z.clone()]));this.faceVertexUvs[0].push([w.clone(),y,E.clone()])}}if(!1===f&&0<a){this.vertices.push(new THREE.Vector3(0,h,0));for(g=0;g<d;g++)t=k[0][g],s=k[0][g+1],q=this.vertices.length-1,u=new THREE.Vector3(0,1,0),r=new THREE.Vector3(0,1,0),v=new THREE.Vector3(0,1,0),G=m[0][g].clone(),w=m[0][g+1].clone(),y=new THREE.Vector2(w.x,0),this.faces.push(new THREE.Face3(t,s,q,[u,r,v])),this.faceVertexUvs[0].push([G,
w,y])}if(!1===f&&0<b){this.vertices.push(new THREE.Vector3(0,-h,0));for(g=0;g<d;g++)t=k[i][g+1],s=k[i][g],q=this.vertices.length-1,u=new THREE.Vector3(0,-1,0),r=new THREE.Vector3(0,-1,0),v=new THREE.Vector3(0,-1,0),G=m[i][g+1].clone(),w=m[i][g].clone(),y=new THREE.Vector2(w.x,1),this.faces.push(new THREE.Face3(t,s,q,[u,r,v])),this.faceVertexUvs[0].push([G,w,y])}this.computeCentroids();this.computeFaceNormals()};THREE.CylinderGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ExtrudeGeometry=function(a,b){"undefined"!==typeof a&&(THREE.Geometry.call(this),a=a instanceof Array?a:[a],this.shapebb=a[a.length-1].getBoundingBox(),this.addShapeList(a,b),this.computeCentroids(),this.computeFaceNormals())};THREE.ExtrudeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ExtrudeGeometry.prototype.addShapeList=function(a,b){for(var c=a.length,d=0;d<c;d++)this.addShape(a[d],b)};
THREE.ExtrudeGeometry.prototype.addShape=function(a,b){function c(a,b,c){b||console.log("die");return b.clone().multiplyScalar(c).add(a)}function d(a,b,c){var d=THREE.ExtrudeGeometry.__v1,e=THREE.ExtrudeGeometry.__v2,f=THREE.ExtrudeGeometry.__v3,g=THREE.ExtrudeGeometry.__v4,h=THREE.ExtrudeGeometry.__v5,i=THREE.ExtrudeGeometry.__v6;d.set(a.x-b.x,a.y-b.y);e.set(a.x-c.x,a.y-c.y);d=d.normalize();e=e.normalize();f.set(-d.y,d.x);g.set(e.y,-e.x);h.copy(a).add(f);i.copy(a).add(g);if(h.equals(i))return g.clone();
h.copy(b).add(f);i.copy(c).add(g);f=d.dot(g);g=i.sub(h).dot(g);0===f&&(console.log("Either infinite or no solutions!"),0===g?console.log("Its finite solutions."):console.log("Too bad, no solutions."));g/=f;return 0>g?(b=Math.atan2(b.y-a.y,b.x-a.x),a=Math.atan2(c.y-a.y,c.x-a.x),b>a&&(a+=2*Math.PI),c=(b+a)/2,a=-Math.cos(c),c=-Math.sin(c),new THREE.Vector2(a,c)):d.multiplyScalar(g).add(h).sub(a).clone()}function e(c,d){var e,f;for(C=c.length;0<=--C;){e=C;f=C-1;0>f&&(f=c.length-1);for(var g=0,h=t+2*m,
g=0;g<h;g++){var i=ca*g,k=ca*(g+1),l=d+e+i,i=d+f+i,n=d+f+k,k=d+e+k,p=c,q=g,s=h,u=e,w=f,l=l+F,i=i+F,n=n+F,k=k+F;D.faces.push(new THREE.Face3(l,i,k,null,null,r));D.faces.push(new THREE.Face3(i,n,k,null,null,r));l=v.generateSideWallUV(D,a,p,b,l,i,n,k,q,s,u,w);D.faceVertexUvs[0].push([l[0],l[1],l[3]]);D.faceVertexUvs[0].push([l[1],l[2],l[3]])}}}function f(a,b,c){D.vertices.push(new THREE.Vector3(a,b,c))}function h(c,d,e,f){c+=F;d+=F;e+=F;D.faces.push(new THREE.Face3(c,d,e,null,null,u));c=f?v.generateBottomUV(D,
a,b,c,d,e):v.generateTopUV(D,a,b,c,d,e);D.faceVertexUvs[0].push(c)}var g=void 0!==b.amount?b.amount:100,i=void 0!==b.bevelThickness?b.bevelThickness:6,k=void 0!==b.bevelSize?b.bevelSize:i-2,m=void 0!==b.bevelSegments?b.bevelSegments:3,l=void 0!==b.bevelEnabled?b.bevelEnabled:!0,p=void 0!==b.curveSegments?b.curveSegments:12,t=void 0!==b.steps?b.steps:1,s=b.extrudePath,q,n=!1,u=b.material,r=b.extrudeMaterial,v=void 0!==b.UVGenerator?b.UVGenerator:THREE.ExtrudeGeometry.WorldUVGenerator,z,G,w,y;s&&(q=
s.getSpacedPoints(t),n=!0,l=!1,z=void 0!==b.frames?b.frames:new THREE.TubeGeometry.FrenetFrames(s,t,!1),G=new THREE.Vector3,w=new THREE.Vector3,y=new THREE.Vector3);l||(k=i=m=0);var E,A,K,D=this,F=this.vertices.length,p=a.extractPoints(p),O=p.shape,p=p.holes;if(s=!THREE.Shape.Utils.isClockWise(O)){O=O.reverse();A=0;for(K=p.length;A<K;A++)E=p[A],THREE.Shape.Utils.isClockWise(E)&&(p[A]=E.reverse());s=!1}var x=THREE.Shape.Utils.triangulateShape(O,p),s=O;A=0;for(K=p.length;A<K;A++)E=p[A],O=O.concat(E);
var I,B,M,J,ca=O.length,na=x.length,pa=[],C=0,Q=s.length;I=Q-1;for(B=C+1;C<Q;C++,I++,B++)I===Q&&(I=0),B===Q&&(B=0),pa[C]=d(s[C],s[I],s[B]);var R=[],L,da=pa.concat();A=0;for(K=p.length;A<K;A++){E=p[A];L=[];C=0;Q=E.length;I=Q-1;for(B=C+1;C<Q;C++,I++,B++)I===Q&&(I=0),B===Q&&(B=0),L[C]=d(E[C],E[I],E[B]);R.push(L);da=da.concat(L)}for(I=0;I<m;I++){E=I/m;M=i*(1-E);B=k*Math.sin(E*Math.PI/2);C=0;for(Q=s.length;C<Q;C++)J=c(s[C],pa[C],B),f(J.x,J.y,-M);A=0;for(K=p.length;A<K;A++){E=p[A];L=R[A];C=0;for(Q=E.length;C<
Q;C++)J=c(E[C],L[C],B),f(J.x,J.y,-M)}}B=k;for(C=0;C<ca;C++)J=l?c(O[C],da[C],B):O[C],n?(w.copy(z.normals[0]).multiplyScalar(J.x),G.copy(z.binormals[0]).multiplyScalar(J.y),y.copy(q[0]).add(w).add(G),f(y.x,y.y,y.z)):f(J.x,J.y,0);for(E=1;E<=t;E++)for(C=0;C<ca;C++)J=l?c(O[C],da[C],B):O[C],n?(w.copy(z.normals[E]).multiplyScalar(J.x),G.copy(z.binormals[E]).multiplyScalar(J.y),y.copy(q[E]).add(w).add(G),f(y.x,y.y,y.z)):f(J.x,J.y,g/t*E);for(I=m-1;0<=I;I--){E=I/m;M=i*(1-E);B=k*Math.sin(E*Math.PI/2);C=0;for(Q=
s.length;C<Q;C++)J=c(s[C],pa[C],B),f(J.x,J.y,g+M);A=0;for(K=p.length;A<K;A++){E=p[A];L=R[A];C=0;for(Q=E.length;C<Q;C++)J=c(E[C],L[C],B),n?f(J.x,J.y+q[t-1].y,q[t-1].x+M):f(J.x,J.y,g+M)}}if(l){i=0*ca;for(C=0;C<na;C++)g=x[C],h(g[2]+i,g[1]+i,g[0]+i,!0);i=ca*(t+2*m);for(C=0;C<na;C++)g=x[C],h(g[0]+i,g[1]+i,g[2]+i,!1)}else{for(C=0;C<na;C++)g=x[C],h(g[2],g[1],g[0],!0);for(C=0;C<na;C++)g=x[C],h(g[0]+ca*t,g[1]+ca*t,g[2]+ca*t,!1)}g=0;e(s,g);g+=s.length;A=0;for(K=p.length;A<K;A++)E=p[A],e(E,g),g+=E.length};
THREE.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(a,b,c,d,e,f){b=a.vertices[e].x;e=a.vertices[e].y;c=a.vertices[f].x;f=a.vertices[f].y;return[new THREE.Vector2(a.vertices[d].x,a.vertices[d].y),new THREE.Vector2(b,e),new THREE.Vector2(c,f)]},generateBottomUV:function(a,b,c,d,e,f){return this.generateTopUV(a,b,c,d,e,f)},generateSideWallUV:function(a,b,c,d,e,f,h,g){var b=a.vertices[e].x,c=a.vertices[e].y,e=a.vertices[e].z,d=a.vertices[f].x,i=a.vertices[f].y,f=a.vertices[f].z,k=a.vertices[h].x,
m=a.vertices[h].y,h=a.vertices[h].z,l=a.vertices[g].x,p=a.vertices[g].y,a=a.vertices[g].z;return 0.01>Math.abs(c-i)?[new THREE.Vector2(b,1-e),new THREE.Vector2(d,1-f),new THREE.Vector2(k,1-h),new THREE.Vector2(l,1-a)]:[new THREE.Vector2(c,1-e),new THREE.Vector2(i,1-f),new THREE.Vector2(m,1-h),new THREE.Vector2(p,1-a)]}};THREE.ExtrudeGeometry.__v1=new THREE.Vector2;THREE.ExtrudeGeometry.__v2=new THREE.Vector2;THREE.ExtrudeGeometry.__v3=new THREE.Vector2;THREE.ExtrudeGeometry.__v4=new THREE.Vector2;
THREE.ExtrudeGeometry.__v5=new THREE.Vector2;THREE.ExtrudeGeometry.__v6=new THREE.Vector2;THREE.ShapeGeometry=function(a,b){THREE.Geometry.call(this);!1===a instanceof Array&&(a=[a]);this.shapebb=a[a.length-1].getBoundingBox();this.addShapeList(a,b);this.computeCentroids();this.computeFaceNormals()};THREE.ShapeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ShapeGeometry.prototype.addShapeList=function(a,b){for(var c=0,d=a.length;c<d;c++)this.addShape(a[c],b);return this};
THREE.ShapeGeometry.prototype.addShape=function(a,b){void 0===b&&(b={});var c=b.material,d=void 0===b.UVGenerator?THREE.ExtrudeGeometry.WorldUVGenerator:b.UVGenerator,e,f,h,g=this.vertices.length;e=a.extractPoints(void 0!==b.curveSegments?b.curveSegments:12);var i=e.shape,k=e.holes;if(!THREE.Shape.Utils.isClockWise(i)){i=i.reverse();e=0;for(f=k.length;e<f;e++)h=k[e],THREE.Shape.Utils.isClockWise(h)&&(k[e]=h.reverse())}var m=THREE.Shape.Utils.triangulateShape(i,k);e=0;for(f=k.length;e<f;e++)h=k[e],
i=i.concat(h);k=i.length;f=m.length;for(e=0;e<k;e++)h=i[e],this.vertices.push(new THREE.Vector3(h.x,h.y,0));for(e=0;e<f;e++)k=m[e],i=k[0]+g,h=k[1]+g,k=k[2]+g,this.faces.push(new THREE.Face3(i,h,k,null,null,c)),this.faceVertexUvs[0].push(d.generateBottomUV(this,a,b,i,h,k))};THREE.LatheGeometry=function(a,b,c,d){THREE.Geometry.call(this);for(var b=b||12,c=c||0,d=d||2*Math.PI,e=1/(a.length-1),f=1/b,h=0,g=b;h<=g;h++)for(var i=c+h*f*d,k=Math.cos(i),m=Math.sin(i),i=0,l=a.length;i<l;i++){var p=a[i],t=new THREE.Vector3;t.x=k*p.x-m*p.y;t.y=m*p.x+k*p.y;t.z=p.z;this.vertices.push(t)}c=a.length;h=0;for(g=b;h<g;h++){i=0;for(l=a.length-1;i<l;i++){var b=m=i+c*h,d=m+c,k=m+1+c,m=m+1,p=h*f,t=i*e,s=p+f,q=t+e;this.faces.push(new THREE.Face3(b,d,m));this.faceVertexUvs[0].push([new THREE.Vector2(p,
t),new THREE.Vector2(s,t),new THREE.Vector2(p,q)]);this.faces.push(new THREE.Face3(d,k,m));this.faceVertexUvs[0].push([new THREE.Vector2(s,t),new THREE.Vector2(s,q),new THREE.Vector2(p,q)])}}this.mergeVertices();this.computeCentroids();this.computeFaceNormals();this.computeVertexNormals()};THREE.LatheGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.PlaneGeometry=function(a,b,c,d){THREE.Geometry.call(this);this.width=a;this.height=b;this.widthSegments=c||1;this.heightSegments=d||1;for(var e=a/2,f=b/2,c=this.widthSegments,d=this.heightSegments,h=c+1,g=d+1,i=this.width/c,k=this.height/d,m=new THREE.Vector3(0,0,1),a=0;a<g;a++)for(b=0;b<h;b++)this.vertices.push(new THREE.Vector3(b*i-e,-(a*k-f),0));for(a=0;a<d;a++)for(b=0;b<c;b++){var l=b+h*a,e=b+h*(a+1),f=b+1+h*(a+1),g=b+1+h*a,i=new THREE.Vector2(b/c,1-a/d),k=new THREE.Vector2(b/c,1-(a+1)/
d),p=new THREE.Vector2((b+1)/c,1-(a+1)/d),t=new THREE.Vector2((b+1)/c,1-a/d),l=new THREE.Face3(l,e,g);l.normal.copy(m);l.vertexNormals.push(m.clone(),m.clone(),m.clone());this.faces.push(l);this.faceVertexUvs[0].push([i,k,t]);l=new THREE.Face3(e,f,g);l.normal.copy(m);l.vertexNormals.push(m.clone(),m.clone(),m.clone());this.faces.push(l);this.faceVertexUvs[0].push([k.clone(),p,t.clone()])}this.computeCentroids()};THREE.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.RingGeometry=function(a,b,c,d,e,f){THREE.Geometry.call(this);for(var a=a||0,b=b||50,e=void 0!==e?e:0,f=void 0!==f?f:2*Math.PI,c=void 0!==c?Math.max(3,c):8,d=void 0!==d?Math.max(3,d):8,h,g=[],i=a,k=(b-a)/d,a=0;a<=d;a++){for(h=0;h<=c;h++){var m=new THREE.Vector3,l=e+h/c*f;m.x=i*Math.cos(l);m.y=i*Math.sin(l);this.vertices.push(m);g.push(new THREE.Vector2((m.x/b+1)/2,(m.y/b+1)/2))}i+=k}b=new THREE.Vector3(0,0,1);for(a=0;a<d;a++){e=a*c;for(h=0;h<=c;h++)l=h+e,f=l+a,k=l+c+a,m=l+c+1+a,this.faces.push(new THREE.Face3(f,
k,m,[b.clone(),b.clone(),b.clone()])),this.faceVertexUvs[0].push([g[f].clone(),g[k].clone(),g[m].clone()]),f=l+a,k=l+c+1+a,m=l+1+a,this.faces.push(new THREE.Face3(f,k,m,[b.clone(),b.clone(),b.clone()])),this.faceVertexUvs[0].push([g[f].clone(),g[k].clone(),g[m].clone()])}this.computeCentroids();this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,i)};THREE.RingGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.SphereGeometry=function(a,b,c,d,e,f,h){THREE.Geometry.call(this);this.radius=a=a||50;this.widthSegments=b=Math.max(3,Math.floor(b)||8);this.heightSegments=c=Math.max(2,Math.floor(c)||6);this.phiStart=d=void 0!==d?d:0;this.phiLength=e=void 0!==e?e:2*Math.PI;this.thetaStart=f=void 0!==f?f:0;this.thetaLength=h=void 0!==h?h:Math.PI;var g,i,k=[],m=[];for(i=0;i<=c;i++){var l=[],p=[];for(g=0;g<=b;g++){var t=g/b,s=i/c,q=new THREE.Vector3;q.x=-a*Math.cos(d+t*e)*Math.sin(f+s*h);q.y=a*Math.cos(f+s*h);
q.z=a*Math.sin(d+t*e)*Math.sin(f+s*h);this.vertices.push(q);l.push(this.vertices.length-1);p.push(new THREE.Vector2(t,1-s))}k.push(l);m.push(p)}for(i=0;i<this.heightSegments;i++)for(g=0;g<this.widthSegments;g++){var b=k[i][g+1],c=k[i][g],d=k[i+1][g],e=k[i+1][g+1],f=this.vertices[b].clone().normalize(),h=this.vertices[c].clone().normalize(),l=this.vertices[d].clone().normalize(),p=this.vertices[e].clone().normalize(),t=m[i][g+1].clone(),s=m[i][g].clone(),q=m[i+1][g].clone(),n=m[i+1][g+1].clone();Math.abs(this.vertices[b].y)===
this.radius?(t.x=(t.x+s.x)/2,this.faces.push(new THREE.Face3(b,d,e,[f,l,p])),this.faceVertexUvs[0].push([t,q,n])):Math.abs(this.vertices[d].y)===this.radius?(q.x=(q.x+n.x)/2,this.faces.push(new THREE.Face3(b,c,d,[f,h,l])),this.faceVertexUvs[0].push([t,s,q])):(this.faces.push(new THREE.Face3(b,c,e,[f,h,p])),this.faceVertexUvs[0].push([t,s,n]),this.faces.push(new THREE.Face3(c,d,e,[h.clone(),l,p.clone()])),this.faceVertexUvs[0].push([s.clone(),q,n.clone()]))}this.computeCentroids();this.computeFaceNormals();
this.boundingSphere=new THREE.Sphere(new THREE.Vector3,a)};THREE.SphereGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TextGeometry=function(a,b){var b=b||{},c=THREE.FontUtils.generateShapes(a,b);b.amount=void 0!==b.height?b.height:50;void 0===b.bevelThickness&&(b.bevelThickness=10);void 0===b.bevelSize&&(b.bevelSize=8);void 0===b.bevelEnabled&&(b.bevelEnabled=!1);THREE.ExtrudeGeometry.call(this,c,b)};THREE.TextGeometry.prototype=Object.create(THREE.ExtrudeGeometry.prototype);THREE.TorusGeometry=function(a,b,c,d,e){THREE.Geometry.call(this);this.radius=a||100;this.tube=b||40;this.radialSegments=c||8;this.tubularSegments=d||6;this.arc=e||2*Math.PI;e=new THREE.Vector3;a=[];b=[];for(c=0;c<=this.radialSegments;c++)for(d=0;d<=this.tubularSegments;d++){var f=d/this.tubularSegments*this.arc,h=2*c/this.radialSegments*Math.PI;e.x=this.radius*Math.cos(f);e.y=this.radius*Math.sin(f);var g=new THREE.Vector3;g.x=(this.radius+this.tube*Math.cos(h))*Math.cos(f);g.y=(this.radius+this.tube*
Math.cos(h))*Math.sin(f);g.z=this.tube*Math.sin(h);this.vertices.push(g);a.push(new THREE.Vector2(d/this.tubularSegments,c/this.radialSegments));b.push(g.clone().sub(e).normalize())}for(c=1;c<=this.radialSegments;c++)for(d=1;d<=this.tubularSegments;d++){var e=(this.tubularSegments+1)*c+d-1,f=(this.tubularSegments+1)*(c-1)+d-1,h=(this.tubularSegments+1)*(c-1)+d,g=(this.tubularSegments+1)*c+d,i=new THREE.Face3(e,f,g,[b[e],b[f],b[g]]);i.normal.add(b[e]);i.normal.add(b[f]);i.normal.add(b[g]);i.normal.normalize();
this.faces.push(i);this.faceVertexUvs[0].push([a[e].clone(),a[f].clone(),a[g].clone()]);i=new THREE.Face3(f,h,g,[b[f],b[h],b[g]]);i.normal.add(b[f]);i.normal.add(b[h]);i.normal.add(b[g]);i.normal.normalize();this.faces.push(i);this.faceVertexUvs[0].push([a[f].clone(),a[h].clone(),a[g].clone()])}this.computeCentroids()};THREE.TorusGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TorusKnotGeometry=function(a,b,c,d,e,f,h){function g(a,b,c,d,e){var f=Math.cos(a),g=Math.sin(a),a=b/c*a,b=Math.cos(a),f=0.5*(d*(2+b))*f,g=0.5*d*(2+b)*g,d=0.5*e*d*Math.sin(a);return new THREE.Vector3(f,g,d)}THREE.Geometry.call(this);this.radius=a||100;this.tube=b||40;this.radialSegments=c||64;this.tubularSegments=d||8;this.p=e||2;this.q=f||3;this.heightScale=h||1;this.grid=Array(this.radialSegments);c=new THREE.Vector3;d=new THREE.Vector3;e=new THREE.Vector3;for(a=0;a<this.radialSegments;++a){this.grid[a]=
Array(this.tubularSegments);b=2*(a/this.radialSegments)*this.p*Math.PI;f=g(b,this.q,this.p,this.radius,this.heightScale);b=g(b+0.01,this.q,this.p,this.radius,this.heightScale);c.subVectors(b,f);d.addVectors(b,f);e.crossVectors(c,d);d.crossVectors(e,c);e.normalize();d.normalize();for(b=0;b<this.tubularSegments;++b){var i=2*(b/this.tubularSegments)*Math.PI,h=-this.tube*Math.cos(i),i=this.tube*Math.sin(i),k=new THREE.Vector3;k.x=f.x+h*d.x+i*e.x;k.y=f.y+h*d.y+i*e.y;k.z=f.z+h*d.z+i*e.z;this.grid[a][b]=
this.vertices.push(k)-1}}for(a=0;a<this.radialSegments;++a)for(b=0;b<this.tubularSegments;++b){var e=(a+1)%this.radialSegments,f=(b+1)%this.tubularSegments,c=this.grid[a][b],d=this.grid[e][b],e=this.grid[e][f],f=this.grid[a][f],h=new THREE.Vector2(a/this.radialSegments,b/this.tubularSegments),i=new THREE.Vector2((a+1)/this.radialSegments,b/this.tubularSegments),k=new THREE.Vector2((a+1)/this.radialSegments,(b+1)/this.tubularSegments),m=new THREE.Vector2(a/this.radialSegments,(b+1)/this.tubularSegments);
this.faces.push(new THREE.Face3(c,d,f));this.faceVertexUvs[0].push([h,i,m]);this.faces.push(new THREE.Face3(d,e,f));this.faceVertexUvs[0].push([i.clone(),k,m.clone()])}this.computeCentroids();this.computeFaceNormals();this.computeVertexNormals()};THREE.TorusKnotGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TubeGeometry=function(a,b,c,d,e){THREE.Geometry.call(this);this.path=a;this.segments=b||64;this.radius=c||1;this.radialSegments=d||8;this.closed=e||!1;this.grid=[];var f,h,d=this.segments+1,g,i,k,e=new THREE.Vector3,m,l,b=new THREE.TubeGeometry.FrenetFrames(this.path,this.segments,this.closed);m=b.normals;l=b.binormals;this.tangents=b.tangents;this.normals=m;this.binormals=l;for(b=0;b<d;b++){this.grid[b]=[];c=b/(d-1);k=a.getPointAt(c);f=m[b];h=l[b];for(c=0;c<this.radialSegments;c++)g=2*(c/this.radialSegments)*
Math.PI,i=-this.radius*Math.cos(g),g=this.radius*Math.sin(g),e.copy(k),e.x+=i*f.x+g*h.x,e.y+=i*f.y+g*h.y,e.z+=i*f.z+g*h.z,this.grid[b][c]=this.vertices.push(new THREE.Vector3(e.x,e.y,e.z))-1}for(b=0;b<this.segments;b++)for(c=0;c<this.radialSegments;c++)e=this.closed?(b+1)%this.segments:b+1,m=(c+1)%this.radialSegments,a=this.grid[b][c],d=this.grid[e][c],e=this.grid[e][m],m=this.grid[b][m],l=new THREE.Vector2(b/this.segments,c/this.radialSegments),f=new THREE.Vector2((b+1)/this.segments,c/this.radialSegments),
h=new THREE.Vector2((b+1)/this.segments,(c+1)/this.radialSegments),i=new THREE.Vector2(b/this.segments,(c+1)/this.radialSegments),this.faces.push(new THREE.Face3(a,d,m)),this.faceVertexUvs[0].push([l,f,i]),this.faces.push(new THREE.Face3(d,e,m)),this.faceVertexUvs[0].push([f.clone(),h,i.clone()]);this.computeCentroids();this.computeFaceNormals();this.computeVertexNormals()};THREE.TubeGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.TubeGeometry.FrenetFrames=function(a,b,c){new THREE.Vector3;var d=new THREE.Vector3;new THREE.Vector3;var e=[],f=[],h=[],g=new THREE.Vector3,i=new THREE.Matrix4,b=b+1,k,m,l;this.tangents=e;this.normals=f;this.binormals=h;for(k=0;k<b;k++)m=k/(b-1),e[k]=a.getTangentAt(m),e[k].normalize();f[0]=new THREE.Vector3;h[0]=new THREE.Vector3;a=Number.MAX_VALUE;k=Math.abs(e[0].x);m=Math.abs(e[0].y);l=Math.abs(e[0].z);k<=a&&(a=k,d.set(1,0,0));m<=a&&(a=m,d.set(0,1,0));l<=a&&d.set(0,0,1);g.crossVectors(e[0],
d).normalize();f[0].crossVectors(e[0],g);h[0].crossVectors(e[0],f[0]);for(k=1;k<b;k++)f[k]=f[k-1].clone(),h[k]=h[k-1].clone(),g.crossVectors(e[k-1],e[k]),1E-4<g.length()&&(g.normalize(),d=Math.acos(THREE.Math.clamp(e[k-1].dot(e[k]),-1,1)),f[k].applyMatrix4(i.makeRotationAxis(g,d))),h[k].crossVectors(e[k],f[k]);if(c){d=Math.acos(THREE.Math.clamp(f[0].dot(f[b-1]),-1,1));d/=b-1;0<e[0].dot(g.crossVectors(f[0],f[b-1]))&&(d=-d);for(k=1;k<b;k++)f[k].applyMatrix4(i.makeRotationAxis(e[k],d*k)),h[k].crossVectors(e[k],
f[k])}};THREE.PolyhedronGeometry=function(a,b,c,d){function e(a){var b=a.normalize().clone();b.index=g.vertices.push(b)-1;var c=Math.atan2(a.z,-a.x)/2/Math.PI+0.5,a=Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+0.5;b.uv=new THREE.Vector2(c,1-a);return b}function f(a,b,c){var d=new THREE.Face3(a.index,b.index,c.index,[a.clone(),b.clone(),c.clone()]);d.centroid.add(a).add(b).add(c).divideScalar(3);g.faces.push(d);d=Math.atan2(d.centroid.z,-d.centroid.x);g.faceVertexUvs[0].push([h(a.uv,a,d),h(b.uv,b,d),
h(c.uv,c,d)])}function h(a,b,c){0>c&&1===a.x&&(a=new THREE.Vector2(a.x-1,a.y));0===b.x&&0===b.z&&(a=new THREE.Vector2(c/2/Math.PI+0.5,a.y));return a.clone()}THREE.Geometry.call(this);for(var c=c||1,d=d||0,g=this,i=0,k=a.length;i<k;i++)e(new THREE.Vector3(a[i][0],a[i][1],a[i][2]));for(var m=this.vertices,a=[],i=0,k=b.length;i<k;i++){var l=m[b[i][0]],p=m[b[i][1]],t=m[b[i][2]];a[i]=new THREE.Face3(l.index,p.index,t.index,[l.clone(),p.clone(),t.clone()])}i=0;for(k=a.length;i<k;i++){p=a[i];m=d;b=Math.pow(2,
m);Math.pow(4,m);for(var m=e(g.vertices[p.a]),l=e(g.vertices[p.b]),s=e(g.vertices[p.c]),p=[],t=0;t<=b;t++){p[t]=[];for(var q=e(m.clone().lerp(s,t/b)),n=e(l.clone().lerp(s,t/b)),u=b-t,r=0;r<=u;r++)p[t][r]=0==r&&t==b?q:e(q.clone().lerp(n,r/u))}for(t=0;t<b;t++)for(r=0;r<2*(b-t)-1;r++)m=Math.floor(r/2),0==r%2?f(p[t][m+1],p[t+1][m],p[t][m]):f(p[t][m+1],p[t+1][m+1],p[t+1][m])}i=0;for(k=this.faceVertexUvs[0].length;i<k;i++)d=this.faceVertexUvs[0][i],a=d[0].x,b=d[1].x,m=d[2].x,l=Math.max(a,Math.max(b,m)),
p=Math.min(a,Math.min(b,m)),0.9<l&&0.1>p&&(0.2>a&&(d[0].x+=1),0.2>b&&(d[1].x+=1),0.2>m&&(d[2].x+=1));i=0;for(k=this.vertices.length;i<k;i++)this.vertices[i].multiplyScalar(c);this.mergeVertices();this.computeCentroids();this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,c)};THREE.PolyhedronGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.IcosahedronGeometry=function(a,b){this.radius=a;this.detail=b;var c=(1+Math.sqrt(5))/2;THREE.PolyhedronGeometry.call(this,[[-1,c,0],[1,c,0],[-1,-c,0],[1,-c,0],[0,-1,c],[0,1,c],[0,-1,-c],[0,1,-c],[c,0,-1],[c,0,1],[-c,0,-1],[-c,0,1]],[[0,11,5],[0,5,1],[0,1,7],[0,7,10],[0,10,11],[1,5,9],[5,11,4],[11,10,2],[10,7,6],[7,1,8],[3,9,4],[3,4,2],[3,2,6],[3,6,8],[3,8,9],[4,9,5],[2,4,11],[6,2,10],[8,6,7],[9,8,1]],a,b)};THREE.IcosahedronGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.OctahedronGeometry=function(a,b){THREE.PolyhedronGeometry.call(this,[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],[[0,2,4],[0,4,3],[0,3,5],[0,5,2],[1,2,5],[1,5,3],[1,3,4],[1,4,2]],a,b)};THREE.OctahedronGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TetrahedronGeometry=function(a,b){THREE.PolyhedronGeometry.call(this,[[1,1,1],[-1,-1,1],[-1,1,-1],[1,-1,-1]],[[2,1,0],[0,3,2],[1,3,0],[2,3,1]],a,b)};THREE.TetrahedronGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ParametricGeometry=function(a,b,c){THREE.Geometry.call(this);var d=this.vertices,e=this.faces,f=this.faceVertexUvs[0],h,g,i,k,m=b+1;for(h=0;h<=c;h++){k=h/c;for(g=0;g<=b;g++)i=g/b,i=a(i,k),d.push(i)}var l,p,t,s;for(h=0;h<c;h++)for(g=0;g<b;g++)a=h*m+g,d=h*m+g+1,k=(h+1)*m+g+1,i=(h+1)*m+g,l=new THREE.Vector2(g/b,h/c),p=new THREE.Vector2((g+1)/b,h/c),t=new THREE.Vector2((g+1)/b,(h+1)/c),s=new THREE.Vector2(g/b,(h+1)/c),e.push(new THREE.Face3(a,d,i)),f.push([l,p,s]),e.push(new THREE.Face3(d,k,i)),
f.push([p.clone(),t,s.clone()]);this.computeCentroids();this.computeFaceNormals();this.computeVertexNormals()};THREE.ParametricGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.AxisHelper=function(a){var a=a||1,b=new THREE.Geometry;b.vertices.push(new THREE.Vector3,new THREE.Vector3(a,0,0),new THREE.Vector3,new THREE.Vector3(0,a,0),new THREE.Vector3,new THREE.Vector3(0,0,a));b.colors.push(new THREE.Color(16711680),new THREE.Color(16755200),new THREE.Color(65280),new THREE.Color(11206400),new THREE.Color(255),new THREE.Color(43775));a=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});THREE.Line.call(this,b,a,THREE.LinePieces)};
THREE.AxisHelper.prototype=Object.create(THREE.Line.prototype);THREE.ArrowHelper=function(a,b,c,d,e,f){THREE.Object3D.call(this);void 0===d&&(d=16776960);void 0===c&&(c=1);void 0===e&&(e=0.2*c);void 0===f&&(f=0.2*e);this.position=b;b=new THREE.Geometry;b.vertices.push(new THREE.Vector3(0,0,0));b.vertices.push(new THREE.Vector3(0,1,0));this.line=new THREE.Line(b,new THREE.LineBasicMaterial({color:d}));this.line.matrixAutoUpdate=!1;this.add(this.line);b=new THREE.CylinderGeometry(0,0.5,1,5,1);b.applyMatrix((new THREE.Matrix4).makeTranslation(0,-0.5,0));this.cone=
new THREE.Mesh(b,new THREE.MeshBasicMaterial({color:d}));this.cone.matrixAutoUpdate=!1;this.add(this.cone);this.setDirection(a);this.setLength(c,e,f)};THREE.ArrowHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.ArrowHelper.prototype.setDirection=function(){var a=new THREE.Vector3,b;return function(c){0.99999<c.y?this.quaternion.set(0,0,0,1):-0.99999>c.y?this.quaternion.set(1,0,0,0):(a.set(c.z,0,-c.x).normalize(),b=Math.acos(c.y),this.quaternion.setFromAxisAngle(a,b))}}();
THREE.ArrowHelper.prototype.setLength=function(a,b,c){void 0===b&&(b=0.2*a);void 0===c&&(c=0.2*b);this.line.scale.set(1,a,1);this.line.updateMatrix();this.cone.scale.set(c,b,c);this.cone.position.y=a;this.cone.updateMatrix()};THREE.ArrowHelper.prototype.setColor=function(a){this.line.material.color.setHex(a);this.cone.material.color.setHex(a)};THREE.BoxHelper=function(a){var b=[new THREE.Vector3(1,1,1),new THREE.Vector3(-1,1,1),new THREE.Vector3(-1,-1,1),new THREE.Vector3(1,-1,1),new THREE.Vector3(1,1,-1),new THREE.Vector3(-1,1,-1),new THREE.Vector3(-1,-1,-1),new THREE.Vector3(1,-1,-1)];this.vertices=b;var c=new THREE.Geometry;c.vertices.push(b[0],b[1],b[1],b[2],b[2],b[3],b[3],b[0],b[4],b[5],b[5],b[6],b[6],b[7],b[7],b[4],b[0],b[4],b[1],b[5],b[2],b[6],b[3],b[7]);THREE.Line.call(this,c,new THREE.LineBasicMaterial({color:16776960}),THREE.LinePieces);
void 0!==a&&this.update(a)};THREE.BoxHelper.prototype=Object.create(THREE.Line.prototype);
THREE.BoxHelper.prototype.update=function(a){var b=a.geometry;null===b.boundingBox&&b.computeBoundingBox();var c=b.boundingBox.min,b=b.boundingBox.max,d=this.vertices;d[0].set(b.x,b.y,b.z);d[1].set(c.x,b.y,b.z);d[2].set(c.x,c.y,b.z);d[3].set(b.x,c.y,b.z);d[4].set(b.x,b.y,c.z);d[5].set(c.x,b.y,c.z);d[6].set(c.x,c.y,c.z);d[7].set(b.x,c.y,c.z);this.geometry.computeBoundingSphere();this.geometry.verticesNeedUpdate=!0;this.matrixAutoUpdate=!1;this.matrixWorld=a.matrixWorld};THREE.BoundingBoxHelper=function(a,b){var c=b||8947848;this.object=a;this.box=new THREE.Box3;THREE.Mesh.call(this,new THREE.CubeGeometry(1,1,1),new THREE.MeshBasicMaterial({color:c,wireframe:!0}))};THREE.BoundingBoxHelper.prototype=Object.create(THREE.Mesh.prototype);THREE.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object);this.box.size(this.scale);this.box.center(this.position)};THREE.CameraHelper=function(a){function b(a,b,d){c(a,d);c(b,d)}function c(a,b){d.vertices.push(new THREE.Vector3);d.colors.push(new THREE.Color(b));void 0===f[a]&&(f[a]=[]);f[a].push(d.vertices.length-1)}var d=new THREE.Geometry,e=new THREE.LineBasicMaterial({color:16777215,vertexColors:THREE.FaceColors}),f={};b("n1","n2",16755200);b("n2","n4",16755200);b("n4","n3",16755200);b("n3","n1",16755200);b("f1","f2",16755200);b("f2","f4",16755200);b("f4","f3",16755200);b("f3","f1",16755200);b("n1","f1",16755200);
b("n2","f2",16755200);b("n3","f3",16755200);b("n4","f4",16755200);b("p","n1",16711680);b("p","n2",16711680);b("p","n3",16711680);b("p","n4",16711680);b("u1","u2",43775);b("u2","u3",43775);b("u3","u1",43775);b("c","t",16777215);b("p","c",3355443);b("cn1","cn2",3355443);b("cn3","cn4",3355443);b("cf1","cf2",3355443);b("cf3","cf4",3355443);THREE.Line.call(this,d,e,THREE.LinePieces);this.camera=a;this.matrixWorld=a.matrixWorld;this.matrixAutoUpdate=!1;this.pointMap=f;this.update()};
THREE.CameraHelper.prototype=Object.create(THREE.Line.prototype);
THREE.CameraHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Camera,c=new THREE.Projector;return function(){function d(d,h,g,i){a.set(h,g,i);c.unprojectVector(a,b);d=e.pointMap[d];if(void 0!==d){h=0;for(g=d.length;h<g;h++)e.geometry.vertices[d[h]].copy(a)}}var e=this;b.projectionMatrix.copy(this.camera.projectionMatrix);d("c",0,0,-1);d("t",0,0,1);d("n1",-1,-1,-1);d("n2",1,-1,-1);d("n3",-1,1,-1);d("n4",1,1,-1);d("f1",-1,-1,1);d("f2",1,-1,1);d("f3",-1,1,1);d("f4",1,1,1);d("u1",
0.7,1.1,-1);d("u2",-0.7,1.1,-1);d("u3",0,2,-1);d("cf1",-1,0,1);d("cf2",1,0,1);d("cf3",0,-1,1);d("cf4",0,1,1);d("cn1",-1,0,-1);d("cn2",1,0,-1);d("cn3",0,-1,-1);d("cn4",0,1,-1);this.geometry.verticesNeedUpdate=!0}}();THREE.DirectionalLightHelper=function(a,b){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrixWorld=a.matrixWorld;this.matrixAutoUpdate=!1;var b=b||1,c=new THREE.PlaneGeometry(b,b),d=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});d.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.lightPlane=new THREE.Mesh(c,d);this.add(this.lightPlane);c=new THREE.Geometry;c.vertices.push(new THREE.Vector3);c.vertices.push(new THREE.Vector3);d=new THREE.LineBasicMaterial({fog:!1});
d.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.targetLine=new THREE.Line(c,d);this.add(this.targetLine);this.update()};THREE.DirectionalLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();this.targetLine.geometry.dispose();this.targetLine.material.dispose()};
THREE.DirectionalLightHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(){a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);c.subVectors(b,a);this.lightPlane.lookAt(c);this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.targetLine.geometry.vertices[1].copy(c);this.targetLine.geometry.verticesNeedUpdate=!0;this.targetLine.material.color.copy(this.lightPlane.material.color)}}();THREE.FaceNormalsHelper=function(a,b,c,d){this.object=a;this.size=b||1;for(var a=c||16776960,d=d||1,b=new THREE.Geometry,c=0,e=this.object.geometry.faces.length;c<e;c++)b.vertices.push(new THREE.Vector3),b.vertices.push(new THREE.Vector3);THREE.Line.call(this,b,new THREE.LineBasicMaterial({color:a,linewidth:d}),THREE.LinePieces);this.matrixAutoUpdate=!1;this.normalMatrix=new THREE.Matrix3;this.update()};THREE.FaceNormalsHelper.prototype=Object.create(THREE.Line.prototype);
THREE.FaceNormalsHelper.prototype.update=function(){var a=new THREE.Vector3;return function(){this.object.updateMatrixWorld(!0);this.normalMatrix.getNormalMatrix(this.object.matrixWorld);for(var b=this.geometry.vertices,c=this.object.geometry.faces,d=this.object.matrixWorld,e=0,f=c.length;e<f;e++){var h=c[e];a.copy(h.normal).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size);var g=2*e;b[g].copy(h.centroid).applyMatrix4(d);b[g+1].addVectors(b[g],a)}this.geometry.verticesNeedUpdate=
!0;return this}}();THREE.GridHelper=function(a,b){var c=new THREE.Geometry,d=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});this.color1=new THREE.Color(4473924);this.color2=new THREE.Color(8947848);for(var e=-a;e<=a;e+=b){c.vertices.push(new THREE.Vector3(-a,0,e),new THREE.Vector3(a,0,e),new THREE.Vector3(e,0,-a),new THREE.Vector3(e,0,a));var f=0===e?this.color1:this.color2;c.colors.push(f,f,f,f)}THREE.Line.call(this,c,d,THREE.LinePieces)};THREE.GridHelper.prototype=Object.create(THREE.Line.prototype);
THREE.GridHelper.prototype.setColors=function(a,b){this.color1.set(a);this.color2.set(b);this.geometry.colorsNeedUpdate=!0};THREE.HemisphereLightHelper=function(a,b){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrixWorld=a.matrixWorld;this.matrixAutoUpdate=!1;this.colors=[new THREE.Color,new THREE.Color];var c=new THREE.SphereGeometry(b,4,2);c.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));for(var d=0;8>d;d++)c.faces[d].color=this.colors[4>d?0:1];d=new THREE.MeshBasicMaterial({vertexColors:THREE.FaceColors,wireframe:!0});this.lightSphere=new THREE.Mesh(c,d);this.add(this.lightSphere);
this.update()};THREE.HemisphereLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose();this.lightSphere.material.dispose()};
THREE.HemisphereLightHelper.prototype.update=function(){var a=new THREE.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity);this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity);this.lightSphere.lookAt(a.setFromMatrixPosition(this.light.matrixWorld).negate());this.lightSphere.geometry.colorsNeedUpdate=!0}}();THREE.PointLightHelper=function(a,b){this.light=a;this.light.updateMatrixWorld();var c=new THREE.SphereGeometry(b,4,2),d=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});d.color.copy(this.light.color).multiplyScalar(this.light.intensity);THREE.Mesh.call(this,c,d);this.matrixWorld=this.light.matrixWorld;this.matrixAutoUpdate=!1};THREE.PointLightHelper.prototype=Object.create(THREE.Mesh.prototype);THREE.PointLightHelper.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};
THREE.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)};THREE.SpotLightHelper=function(a){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrixWorld=a.matrixWorld;this.matrixAutoUpdate=!1;a=new THREE.CylinderGeometry(0,1,1,8,1,!0);a.applyMatrix((new THREE.Matrix4).makeTranslation(0,-0.5,0));a.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));var b=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});this.cone=new THREE.Mesh(a,b);this.add(this.cone);this.update()};THREE.SpotLightHelper.prototype=Object.create(THREE.Object3D.prototype);
THREE.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};THREE.SpotLightHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(){var c=this.light.distance?this.light.distance:1E4,d=c*Math.tan(this.light.angle);this.cone.scale.set(d,d,c);a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(b.sub(a));this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}();THREE.VertexNormalsHelper=function(a,b,c,d){this.object=a;this.size=b||1;for(var b=c||16711680,d=d||1,c=new THREE.Geometry,a=a.geometry.faces,e=0,f=a.length;e<f;e++)for(var h=0,g=a[e].vertexNormals.length;h<g;h++)c.vertices.push(new THREE.Vector3),c.vertices.push(new THREE.Vector3);THREE.Line.call(this,c,new THREE.LineBasicMaterial({color:b,linewidth:d}),THREE.LinePieces);this.matrixAutoUpdate=!1;this.normalMatrix=new THREE.Matrix3;this.update()};THREE.VertexNormalsHelper.prototype=Object.create(THREE.Line.prototype);
THREE.VertexNormalsHelper.prototype.update=function(){var a=new THREE.Vector3;return function(){var b=["a","b","c","d"];this.object.updateMatrixWorld(!0);this.normalMatrix.getNormalMatrix(this.object.matrixWorld);for(var c=this.geometry.vertices,d=this.object.geometry.vertices,e=this.object.geometry.faces,f=this.object.matrixWorld,h=0,g=0,i=e.length;g<i;g++)for(var k=e[g],m=0,l=k.vertexNormals.length;m<l;m++){var p=k.vertexNormals[m];c[h].copy(d[k[b[m]]]).applyMatrix4(f);a.copy(p).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size);
a.add(c[h]);h+=1;c[h].copy(a);h+=1}this.geometry.verticesNeedUpdate=!0;return this}}();THREE.VertexTangentsHelper=function(a,b,c,d){this.object=a;this.size=b||1;for(var b=c||255,d=d||1,c=new THREE.Geometry,a=a.geometry.faces,e=0,f=a.length;e<f;e++)for(var h=0,g=a[e].vertexTangents.length;h<g;h++)c.vertices.push(new THREE.Vector3),c.vertices.push(new THREE.Vector3);THREE.Line.call(this,c,new THREE.LineBasicMaterial({color:b,linewidth:d}),THREE.LinePieces);this.matrixAutoUpdate=!1;this.update()};THREE.VertexTangentsHelper.prototype=Object.create(THREE.Line.prototype);
THREE.VertexTangentsHelper.prototype.update=function(){var a=new THREE.Vector3;return function(){var b=["a","b","c","d"];this.object.updateMatrixWorld(!0);for(var c=this.geometry.vertices,d=this.object.geometry.vertices,e=this.object.geometry.faces,f=this.object.matrixWorld,h=0,g=0,i=e.length;g<i;g++)for(var k=e[g],m=0,l=k.vertexTangents.length;m<l;m++){var p=k.vertexTangents[m];c[h].copy(d[k[b[m]]]).applyMatrix4(f);a.copy(p).transformDirection(f).multiplyScalar(this.size);a.add(c[h]);h+=1;c[h].copy(a);
h+=1}this.geometry.verticesNeedUpdate=!0;return this}}();THREE.WireframeHelper=function(a){var b=[0,0],c={},d=function(a,b){return a-b},e=["a","b","c","d"],f=new THREE.BufferGeometry,h=0;if(a.geometry instanceof THREE.Geometry){for(var g=a.geometry.vertices,i=a.geometry.faces,k=new Uint32Array(6*i.length),m=0,l=i.length;m<l;m++)for(var p=i[m],t=0;3>t;t++){b[0]=p[e[t]];b[1]=p[e[(t+1)%3]];b.sort(d);var s=b.toString();void 0===c[s]&&(k[2*h]=b[0],k[2*h+1]=b[1],c[s]=!0,h++)}f.addAttribute("position",Float32Array,2*h,3);b=f.attributes.position.array;m=0;for(l=
h;m<l;m++)for(t=0;2>t;t++)h=g[k[2*m+t]],e=6*m+3*t,b[e+0]=h.x,b[e+1]=h.y,b[e+2]=h.z}else{g=a.geometry.attributes.position.array;i=a.geometry.attributes.index.array;k=new Uint32Array(2*i.length);m=0;for(l=i.length/3;m<l;m++)for(t=0;3>t;t++)e=3*m,b[0]=i[e+t],b[1]=i[e+(t+1)%3],b.sort(d),s=b.toString(),void 0===c[s]&&(k[2*h]=b[0],k[2*h+1]=b[1],c[s]=!0,h++);f.addAttribute("position",Float32Array,2*h,3);b=f.attributes.position.array;m=0;for(l=h;m<l;m++)for(t=0;2>t;t++)e=6*m+3*t,h=3*k[2*m+t],b[e+0]=g[h],
b[e+1]=g[h+1],b[e+2]=g[h+2]}THREE.Line.call(this,f,new THREE.LineBasicMaterial({color:16777215}),THREE.LinePieces);this.matrixAutoUpdate=!1;this.matrixWorld=a.matrixWorld};THREE.WireframeHelper.prototype=Object.create(THREE.Line.prototype);THREE.ImmediateRenderObject=function(){THREE.Object3D.call(this);this.render=function(){}};THREE.ImmediateRenderObject.prototype=Object.create(THREE.Object3D.prototype);THREE.LensFlare=function(a,b,c,d,e){THREE.Object3D.call(this);this.lensFlares=[];this.positionScreen=new THREE.Vector3;this.customUpdateCallback=void 0;void 0!==a&&this.add(a,b,c,d,e)};THREE.LensFlare.prototype=Object.create(THREE.Object3D.prototype);
THREE.LensFlare.prototype.add=function(a,b,c,d,e,f){void 0===b&&(b=-1);void 0===c&&(c=0);void 0===f&&(f=1);void 0===e&&(e=new THREE.Color(16777215));void 0===d&&(d=THREE.NormalBlending);c=Math.min(c,Math.max(0,c));this.lensFlares.push({texture:a,size:b,distance:c,x:0,y:0,z:0,scale:1,rotation:1,opacity:f,color:e,blending:d})};
THREE.LensFlare.prototype.updateLensFlares=function(){var a,b=this.lensFlares.length,c,d=2*-this.positionScreen.x,e=2*-this.positionScreen.y;for(a=0;a<b;a++)c=this.lensFlares[a],c.x=this.positionScreen.x+d*c.distance,c.y=this.positionScreen.y+e*c.distance,c.wantedRotation=0.25*c.x*Math.PI,c.rotation+=0.25*(c.wantedRotation-c.rotation)};THREE.MorphBlendMesh=function(a,b){THREE.Mesh.call(this,a,b);this.animationsMap={};this.animationsList=[];var c=this.geometry.morphTargets.length;this.createAnimation("__default",0,c-1,c/1);this.setAnimationWeight("__default",1)};THREE.MorphBlendMesh.prototype=Object.create(THREE.Mesh.prototype);
THREE.MorphBlendMesh.prototype.createAnimation=function(a,b,c,d){b={startFrame:b,endFrame:c,length:c-b+1,fps:d,duration:(c-b)/d,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[a]=b;this.animationsList.push(b)};
THREE.MorphBlendMesh.prototype.autoCreateAnimations=function(a){for(var b=/([a-z]+)(\d+)/,c,d={},e=this.geometry,f=0,h=e.morphTargets.length;f<h;f++){var g=e.morphTargets[f].name.match(b);if(g&&1<g.length){var i=g[1];d[i]||(d[i]={start:Infinity,end:-Infinity});g=d[i];f<g.start&&(g.start=f);f>g.end&&(g.end=f);c||(c=i)}}for(i in d)g=d[i],this.createAnimation(i,g.start,g.end,a);this.firstAnimation=c};
THREE.MorphBlendMesh.prototype.setAnimationDirectionForward=function(a){if(a=this.animationsMap[a])a.direction=1,a.directionBackwards=!1};THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(a){if(a=this.animationsMap[a])a.direction=-1,a.directionBackwards=!0};THREE.MorphBlendMesh.prototype.setAnimationFPS=function(a,b){var c=this.animationsMap[a];c&&(c.fps=b,c.duration=(c.end-c.start)/c.fps)};
THREE.MorphBlendMesh.prototype.setAnimationDuration=function(a,b){var c=this.animationsMap[a];c&&(c.duration=b,c.fps=(c.end-c.start)/c.duration)};THREE.MorphBlendMesh.prototype.setAnimationWeight=function(a,b){var c=this.animationsMap[a];c&&(c.weight=b)};THREE.MorphBlendMesh.prototype.setAnimationTime=function(a,b){var c=this.animationsMap[a];c&&(c.time=b)};THREE.MorphBlendMesh.prototype.getAnimationTime=function(a){var b=0;if(a=this.animationsMap[a])b=a.time;return b};
THREE.MorphBlendMesh.prototype.getAnimationDuration=function(a){var b=-1;if(a=this.animationsMap[a])b=a.duration;return b};THREE.MorphBlendMesh.prototype.playAnimation=function(a){var b=this.animationsMap[a];b?(b.time=0,b.active=!0):console.warn("animation["+a+"] undefined")};THREE.MorphBlendMesh.prototype.stopAnimation=function(a){if(a=this.animationsMap[a])a.active=!1};
THREE.MorphBlendMesh.prototype.update=function(a){for(var b=0,c=this.animationsList.length;b<c;b++){var d=this.animationsList[b];if(d.active){var e=d.duration/d.length;d.time+=d.direction*a;if(d.mirroredLoop){if(d.time>d.duration||0>d.time)d.direction*=-1,d.time>d.duration&&(d.time=d.duration,d.directionBackwards=!0),0>d.time&&(d.time=0,d.directionBackwards=!1)}else d.time%=d.duration,0>d.time&&(d.time+=d.duration);var f=d.startFrame+THREE.Math.clamp(Math.floor(d.time/e),0,d.length-1),h=d.weight;
f!==d.currentFrame&&(this.morphTargetInfluences[d.lastFrame]=0,this.morphTargetInfluences[d.currentFrame]=1*h,this.morphTargetInfluences[f]=0,d.lastFrame=d.currentFrame,d.currentFrame=f);e=d.time%e/e;d.directionBackwards&&(e=1-e);this.morphTargetInfluences[d.currentFrame]=e*h;this.morphTargetInfluences[d.lastFrame]=(1-e)*h}}};THREE.LensFlarePlugin=function(){function a(a,c){var d=b.createProgram(),e=b.createShader(b.FRAGMENT_SHADER),f=b.createShader(b.VERTEX_SHADER),g="precision "+c+" float;\n";b.shaderSource(e,g+a.fragmentShader);b.shaderSource(f,g+a.vertexShader);b.compileShader(e);b.compileShader(f);b.attachShader(d,e);b.attachShader(d,f);b.linkProgram(d);return d}var b,c,d,e,f,h,g,i,k,m,l,p,t;this.init=function(s){b=s.context;c=s;d=s.getPrecision();e=new Float32Array(16);f=new Uint16Array(6);s=0;e[s++]=-1;e[s++]=-1;
e[s++]=0;e[s++]=0;e[s++]=1;e[s++]=-1;e[s++]=1;e[s++]=0;e[s++]=1;e[s++]=1;e[s++]=1;e[s++]=1;e[s++]=-1;e[s++]=1;e[s++]=0;e[s++]=1;s=0;f[s++]=0;f[s++]=1;f[s++]=2;f[s++]=0;f[s++]=2;f[s++]=3;h=b.createBuffer();g=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,h);b.bufferData(b.ARRAY_BUFFER,e,b.STATIC_DRAW);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,g);b.bufferData(b.ELEMENT_ARRAY_BUFFER,f,b.STATIC_DRAW);i=b.createTexture();k=b.createTexture();b.bindTexture(b.TEXTURE_2D,i);b.texImage2D(b.TEXTURE_2D,0,b.RGB,16,16,
0,b.RGB,b.UNSIGNED_BYTE,null);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.bindTexture(b.TEXTURE_2D,k);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,16,16,0,b.RGBA,b.UNSIGNED_BYTE,null);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);
b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);0>=b.getParameter(b.MAX_VERTEX_TEXTURE_IMAGE_UNITS)?(m=!1,l=a(THREE.ShaderFlares.lensFlare,d)):(m=!0,l=a(THREE.ShaderFlares.lensFlareVertexTexture,d));p={};t={};p.vertex=b.getAttribLocation(l,"position");p.uv=b.getAttribLocation(l,"uv");t.renderType=b.getUniformLocation(l,"renderType");t.map=b.getUniformLocation(l,"map");t.occlusionMap=b.getUniformLocation(l,"occlusionMap");t.opacity=
b.getUniformLocation(l,"opacity");t.color=b.getUniformLocation(l,"color");t.scale=b.getUniformLocation(l,"scale");t.rotation=b.getUniformLocation(l,"rotation");t.screenPosition=b.getUniformLocation(l,"screenPosition")};this.render=function(a,d,e,f){var a=a.__webglFlares,r=a.length;if(r){var v=new THREE.Vector3,z=f/e,G=0.5*e,w=0.5*f,y=16/f,E=new THREE.Vector2(y*z,y),A=new THREE.Vector3(1,1,0),K=new THREE.Vector2(1,1),D=t,y=p;b.useProgram(l);b.enableVertexAttribArray(p.vertex);b.enableVertexAttribArray(p.uv);
b.uniform1i(D.occlusionMap,0);b.uniform1i(D.map,1);b.bindBuffer(b.ARRAY_BUFFER,h);b.vertexAttribPointer(y.vertex,2,b.FLOAT,!1,16,0);b.vertexAttribPointer(y.uv,2,b.FLOAT,!1,16,8);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,g);b.disable(b.CULL_FACE);b.depthMask(!1);var F,O,x,I,B;for(F=0;F<r;F++)if(y=16/f,E.set(y*z,y),I=a[F],v.set(I.matrixWorld.elements[12],I.matrixWorld.elements[13],I.matrixWorld.elements[14]),v.applyMatrix4(d.matrixWorldInverse),v.applyProjection(d.projectionMatrix),A.copy(v),K.x=A.x*G+G,
K.y=A.y*w+w,m||0<K.x&&K.x<e&&0<K.y&&K.y<f){b.activeTexture(b.TEXTURE1);b.bindTexture(b.TEXTURE_2D,i);b.copyTexImage2D(b.TEXTURE_2D,0,b.RGB,K.x-8,K.y-8,16,16,0);b.uniform1i(D.renderType,0);b.uniform2f(D.scale,E.x,E.y);b.uniform3f(D.screenPosition,A.x,A.y,A.z);b.disable(b.BLEND);b.enable(b.DEPTH_TEST);b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0);b.activeTexture(b.TEXTURE0);b.bindTexture(b.TEXTURE_2D,k);b.copyTexImage2D(b.TEXTURE_2D,0,b.RGBA,K.x-8,K.y-8,16,16,0);b.uniform1i(D.renderType,1);b.disable(b.DEPTH_TEST);
b.activeTexture(b.TEXTURE1);b.bindTexture(b.TEXTURE_2D,i);b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0);I.positionScreen.copy(A);I.customUpdateCallback?I.customUpdateCallback(I):I.updateLensFlares();b.uniform1i(D.renderType,2);b.enable(b.BLEND);O=0;for(x=I.lensFlares.length;O<x;O++)B=I.lensFlares[O],0.001<B.opacity&&0.001<B.scale&&(A.x=B.x,A.y=B.y,A.z=B.z,y=B.size*B.scale/f,E.x=y*z,E.y=y,b.uniform3f(D.screenPosition,A.x,A.y,A.z),b.uniform2f(D.scale,E.x,E.y),b.uniform1f(D.rotation,B.rotation),b.uniform1f(D.opacity,
B.opacity),b.uniform3f(D.color,B.color.r,B.color.g,B.color.b),c.setBlending(B.blending,B.blendEquation,B.blendSrc,B.blendDst),c.setTexture(B.texture,1),b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0))}b.enable(b.CULL_FACE);b.enable(b.DEPTH_TEST);b.depthMask(!0)}}};THREE.ShadowMapPlugin=function(){var a,b,c,d,e,f,h=new THREE.Frustum,g=new THREE.Matrix4,i=new THREE.Vector3,k=new THREE.Vector3,m=new THREE.Vector3;this.init=function(g){a=g.context;b=g;var g=THREE.ShaderLib.depthRGBA,h=THREE.UniformsUtils.clone(g.uniforms);c=new THREE.ShaderMaterial({fragmentShader:g.fragmentShader,vertexShader:g.vertexShader,uniforms:h});d=new THREE.ShaderMaterial({fragmentShader:g.fragmentShader,vertexShader:g.vertexShader,uniforms:h,morphTargets:!0});e=new THREE.ShaderMaterial({fragmentShader:g.fragmentShader,
vertexShader:g.vertexShader,uniforms:h,skinning:!0});f=new THREE.ShaderMaterial({fragmentShader:g.fragmentShader,vertexShader:g.vertexShader,uniforms:h,morphTargets:!0,skinning:!0});c._shadowPass=!0;d._shadowPass=!0;e._shadowPass=!0;f._shadowPass=!0};this.render=function(a,c){b.shadowMapEnabled&&b.shadowMapAutoUpdate&&this.update(a,c)};this.update=function(l,p){var t,s,q,n,u,r,v,z,G,w=[];n=0;a.clearColor(1,1,1,1);a.disable(a.BLEND);a.enable(a.CULL_FACE);a.frontFace(a.CCW);b.shadowMapCullFace===THREE.CullFaceFront?
a.cullFace(a.FRONT):a.cullFace(a.BACK);b.setDepthTest(!0);t=0;for(s=l.__lights.length;t<s;t++)if(q=l.__lights[t],q.castShadow)if(q instanceof THREE.DirectionalLight&&q.shadowCascade)for(u=0;u<q.shadowCascadeCount;u++){var y;if(q.shadowCascadeArray[u])y=q.shadowCascadeArray[u];else{G=q;v=u;y=new THREE.DirectionalLight;y.isVirtual=!0;y.onlyShadow=!0;y.castShadow=!0;y.shadowCameraNear=G.shadowCameraNear;y.shadowCameraFar=G.shadowCameraFar;y.shadowCameraLeft=G.shadowCameraLeft;y.shadowCameraRight=G.shadowCameraRight;
y.shadowCameraBottom=G.shadowCameraBottom;y.shadowCameraTop=G.shadowCameraTop;y.shadowCameraVisible=G.shadowCameraVisible;y.shadowDarkness=G.shadowDarkness;y.shadowBias=G.shadowCascadeBias[v];y.shadowMapWidth=G.shadowCascadeWidth[v];y.shadowMapHeight=G.shadowCascadeHeight[v];y.pointsWorld=[];y.pointsFrustum=[];z=y.pointsWorld;r=y.pointsFrustum;for(var E=0;8>E;E++)z[E]=new THREE.Vector3,r[E]=new THREE.Vector3;z=G.shadowCascadeNearZ[v];G=G.shadowCascadeFarZ[v];r[0].set(-1,-1,z);r[1].set(1,-1,z);r[2].set(-1,
1,z);r[3].set(1,1,z);r[4].set(-1,-1,G);r[5].set(1,-1,G);r[6].set(-1,1,G);r[7].set(1,1,G);y.originalCamera=p;r=new THREE.Gyroscope;r.position=q.shadowCascadeOffset;r.add(y);r.add(y.target);p.add(r);q.shadowCascadeArray[u]=y;console.log("Created virtualLight",y)}v=q;z=u;G=v.shadowCascadeArray[z];G.position.copy(v.position);G.target.position.copy(v.target.position);G.lookAt(G.target);G.shadowCameraVisible=v.shadowCameraVisible;G.shadowDarkness=v.shadowDarkness;G.shadowBias=v.shadowCascadeBias[z];r=v.shadowCascadeNearZ[z];
v=v.shadowCascadeFarZ[z];G=G.pointsFrustum;G[0].z=r;G[1].z=r;G[2].z=r;G[3].z=r;G[4].z=v;G[5].z=v;G[6].z=v;G[7].z=v;w[n]=y;n++}else w[n]=q,n++;t=0;for(s=w.length;t<s;t++){q=w[t];q.shadowMap||(u=THREE.LinearFilter,b.shadowMapType===THREE.PCFSoftShadowMap&&(u=THREE.NearestFilter),q.shadowMap=new THREE.WebGLRenderTarget(q.shadowMapWidth,q.shadowMapHeight,{minFilter:u,magFilter:u,format:THREE.RGBAFormat}),q.shadowMapSize=new THREE.Vector2(q.shadowMapWidth,q.shadowMapHeight),q.shadowMatrix=new THREE.Matrix4);
if(!q.shadowCamera){if(q instanceof THREE.SpotLight)q.shadowCamera=new THREE.PerspectiveCamera(q.shadowCameraFov,q.shadowMapWidth/q.shadowMapHeight,q.shadowCameraNear,q.shadowCameraFar);else if(q instanceof THREE.DirectionalLight)q.shadowCamera=new THREE.OrthographicCamera(q.shadowCameraLeft,q.shadowCameraRight,q.shadowCameraTop,q.shadowCameraBottom,q.shadowCameraNear,q.shadowCameraFar);else{console.error("Unsupported light type for shadow");continue}l.add(q.shadowCamera);!0===l.autoUpdate&&l.updateMatrixWorld()}q.shadowCameraVisible&&
!q.cameraHelper&&(q.cameraHelper=new THREE.CameraHelper(q.shadowCamera),q.shadowCamera.add(q.cameraHelper));if(q.isVirtual&&y.originalCamera==p){u=p;n=q.shadowCamera;r=q.pointsFrustum;G=q.pointsWorld;i.set(Infinity,Infinity,Infinity);k.set(-Infinity,-Infinity,-Infinity);for(v=0;8>v;v++)z=G[v],z.copy(r[v]),THREE.ShadowMapPlugin.__projector.unprojectVector(z,u),z.applyMatrix4(n.matrixWorldInverse),z.x<i.x&&(i.x=z.x),z.x>k.x&&(k.x=z.x),z.y<i.y&&(i.y=z.y),z.y>k.y&&(k.y=z.y),z.z<i.z&&(i.z=z.z),z.z>k.z&&
(k.z=z.z);n.left=i.x;n.right=k.x;n.top=k.y;n.bottom=i.y;n.updateProjectionMatrix()}n=q.shadowMap;r=q.shadowMatrix;u=q.shadowCamera;u.position.setFromMatrixPosition(q.matrixWorld);m.setFromMatrixPosition(q.target.matrixWorld);u.lookAt(m);u.updateMatrixWorld();u.matrixWorldInverse.getInverse(u.matrixWorld);q.cameraHelper&&(q.cameraHelper.visible=q.shadowCameraVisible);q.shadowCameraVisible&&q.cameraHelper.update();r.set(0.5,0,0,0.5,0,0.5,0,0.5,0,0,0.5,0.5,0,0,0,1);r.multiply(u.projectionMatrix);r.multiply(u.matrixWorldInverse);
g.multiplyMatrices(u.projectionMatrix,u.matrixWorldInverse);h.setFromMatrix(g);b.setRenderTarget(n);b.clear();G=l.__webglObjects;q=0;for(n=G.length;q<n;q++)if(v=G[q],r=v.object,v.render=!1,r.visible&&r.castShadow&&(!(r instanceof THREE.Mesh||r instanceof THREE.ParticleSystem)||!r.frustumCulled||h.intersectsObject(r)))r._modelViewMatrix.multiplyMatrices(u.matrixWorldInverse,r.matrixWorld),v.render=!0;q=0;for(n=G.length;q<n;q++)v=G[q],v.render&&(r=v.object,v=v.buffer,E=r.material instanceof THREE.MeshFaceMaterial?
r.material.materials[0]:r.material,z=0<r.geometry.morphTargets.length&&E.morphTargets,E=r instanceof THREE.SkinnedMesh&&E.skinning,z=r.customDepthMaterial?r.customDepthMaterial:E?z?f:e:z?d:c,v instanceof THREE.BufferGeometry?b.renderBufferDirect(u,l.__lights,null,z,v,r):b.renderBuffer(u,l.__lights,null,z,v,r));G=l.__webglObjectsImmediate;q=0;for(n=G.length;q<n;q++)v=G[q],r=v.object,r.visible&&r.castShadow&&(r._modelViewMatrix.multiplyMatrices(u.matrixWorldInverse,r.matrixWorld),b.renderImmediateObject(u,
l.__lights,null,c,r))}t=b.getClearColor();s=b.getClearAlpha();a.clearColor(t.r,t.g,t.b,s);a.enable(a.BLEND);b.shadowMapCullFace===THREE.CullFaceFront&&a.cullFace(a.BACK)}};THREE.ShadowMapPlugin.__projector=new THREE.Projector;THREE.SpritePlugin=function(){var a,b,c,d,e,f,h,g,i,k,m,l,p,t,s,q,n;function u(a,b){return a.z!==b.z?b.z-a.z:b.id-a.id}var r,v,z,G,w,y,E,A;this.init=function(u){r=u.context;v=u;G=new Float32Array([-0.5,-0.5,0,0,0.5,-0.5,1,0,0.5,0.5,1,1,-0.5,0.5,0,1]);w=new Uint16Array([0,1,2,0,2,3]);y=r.createBuffer();E=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,y);r.bufferData(r.ARRAY_BUFFER,G,r.STATIC_DRAW);r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,E);r.bufferData(r.ELEMENT_ARRAY_BUFFER,w,r.STATIC_DRAW);var u=r.createProgram(),
D=r.createShader(r.VERTEX_SHADER),F=r.createShader(r.FRAGMENT_SHADER);r.shaderSource(D,["precision "+v.getPrecision()+" float;","uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uvOffset + uv * uvScale;\nvec2 alignedPosition = position * scale;\nvec2 rotatedPosition;\nrotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\nrotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\nvec4 finalPosition;\nfinalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\nfinalPosition.xy += rotatedPosition;\nfinalPosition = projectionMatrix * finalPosition;\ngl_Position = finalPosition;\n}"].join("\n"));
r.shaderSource(F,["precision "+v.getPrecision()+" float;","uniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvoid main() {\nvec4 texture = texture2D( map, vUV );\nif ( texture.a < alphaTest ) discard;\ngl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\nif ( fogType > 0 ) {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat fogFactor = 0.0;\nif ( fogType == 1 ) {\nfogFactor = smoothstep( fogNear, fogFar, depth );\n} else {\nconst float LOG2 = 1.442695;\nfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n}\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}\n}"].join("\n"));
r.compileShader(D);r.compileShader(F);r.attachShader(u,D);r.attachShader(u,F);r.linkProgram(u);A=u;q=r.getAttribLocation(A,"position");n=r.getAttribLocation(A,"uv");a=r.getUniformLocation(A,"uvOffset");b=r.getUniformLocation(A,"uvScale");c=r.getUniformLocation(A,"rotation");d=r.getUniformLocation(A,"scale");e=r.getUniformLocation(A,"color");f=r.getUniformLocation(A,"map");h=r.getUniformLocation(A,"opacity");g=r.getUniformLocation(A,"modelViewMatrix");i=r.getUniformLocation(A,"projectionMatrix");k=
r.getUniformLocation(A,"fogType");m=r.getUniformLocation(A,"fogDensity");l=r.getUniformLocation(A,"fogNear");p=r.getUniformLocation(A,"fogFar");t=r.getUniformLocation(A,"fogColor");s=r.getUniformLocation(A,"alphaTest");u=document.createElement("canvas");u.width=8;u.height=8;D=u.getContext("2d");D.fillStyle="#ffffff";D.fillRect(0,0,u.width,u.height);z=new THREE.Texture(u);z.needsUpdate=!0};this.render=function(w,D){var F=w.__webglSprites,G=F.length;if(G){r.useProgram(A);r.enableVertexAttribArray(q);
r.enableVertexAttribArray(n);r.disable(r.CULL_FACE);r.enable(r.BLEND);r.bindBuffer(r.ARRAY_BUFFER,y);r.vertexAttribPointer(q,2,r.FLOAT,!1,16,0);r.vertexAttribPointer(n,2,r.FLOAT,!1,16,8);r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,E);r.uniformMatrix4fv(i,!1,D.projectionMatrix.elements);r.activeTexture(r.TEXTURE0);r.uniform1i(f,0);var x=0,I=0,B=w.fog;B?(r.uniform3f(t,B.color.r,B.color.g,B.color.b),B instanceof THREE.Fog?(r.uniform1f(l,B.near),r.uniform1f(p,B.far),r.uniform1i(k,1),I=x=1):B instanceof THREE.FogExp2&&
(r.uniform1f(m,B.density),r.uniform1i(k,2),I=x=2)):(r.uniform1i(k,0),I=x=0);for(var M,J,ca=[],B=0;B<G;B++)M=F[B],!1!==M.visible&&(M._modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,M.matrixWorld),M.z=-M._modelViewMatrix.elements[14]);F.sort(u);for(B=0;B<G;B++)M=F[B],!1!==M.visible&&(J=M.material,r.uniform1f(s,J.alphaTest),r.uniformMatrix4fv(g,!1,M._modelViewMatrix.elements),ca[0]=M.scale.x,ca[1]=M.scale.y,M=w.fog&&J.fog?I:0,x!==M&&(r.uniform1i(k,M),x=M),r.uniform2f(b,J.uvScale.x,J.uvScale.y),
r.uniform2f(a,J.uvOffset.x,J.uvOffset.y),r.uniform1f(h,J.opacity),r.uniform3f(e,J.color.r,J.color.g,J.color.b),r.uniform1f(c,J.rotation),r.uniform2fv(d,ca),v.setBlending(J.blending,J.blendEquation,J.blendSrc,J.blendDst),v.setDepthTest(J.depthTest),v.setDepthWrite(J.depthWrite),J.map&&J.map.image&&J.map.image.width?v.setTexture(J.map,0):v.setTexture(z,0),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0));r.enable(r.CULL_FACE)}}};THREE.DepthPassPlugin=function(){this.enabled=!1;this.renderTarget=null;var a,b,c,d,e,f,h=new THREE.Frustum,g=new THREE.Matrix4;this.init=function(g){a=g.context;b=g;var g=THREE.ShaderLib.depthRGBA,h=THREE.UniformsUtils.clone(g.uniforms);c=new THREE.ShaderMaterial({fragmentShader:g.fragmentShader,vertexShader:g.vertexShader,uniforms:h});d=new THREE.ShaderMaterial({fragmentShader:g.fragmentShader,vertexShader:g.vertexShader,uniforms:h,morphTargets:!0});e=new THREE.ShaderMaterial({fragmentShader:g.fragmentShader,
vertexShader:g.vertexShader,uniforms:h,skinning:!0});f=new THREE.ShaderMaterial({fragmentShader:g.fragmentShader,vertexShader:g.vertexShader,uniforms:h,morphTargets:!0,skinning:!0});c._shadowPass=!0;d._shadowPass=!0;e._shadowPass=!0;f._shadowPass=!0};this.render=function(a,b){this.enabled&&this.update(a,b)};this.update=function(i,k){var m,l,p,t,s,q;a.clearColor(1,1,1,1);a.disable(a.BLEND);b.setDepthTest(!0);!0===i.autoUpdate&&i.updateMatrixWorld();k.matrixWorldInverse.getInverse(k.matrixWorld);g.multiplyMatrices(k.projectionMatrix,
k.matrixWorldInverse);h.setFromMatrix(g);b.setRenderTarget(this.renderTarget);b.clear();q=i.__webglObjects;m=0;for(l=q.length;m<l;m++)if(p=q[m],s=p.object,p.render=!1,s.visible&&(!(s instanceof THREE.Mesh||s instanceof THREE.ParticleSystem)||!s.frustumCulled||h.intersectsObject(s)))s._modelViewMatrix.multiplyMatrices(k.matrixWorldInverse,s.matrixWorld),p.render=!0;var n;m=0;for(l=q.length;m<l;m++)if(p=q[m],p.render&&(s=p.object,p=p.buffer,!(s instanceof THREE.ParticleSystem)||s.customDepthMaterial))(n=
s.material instanceof THREE.MeshFaceMaterial?s.material.materials[0]:s.material)&&b.setMaterialFaces(s.material),t=0<s.geometry.morphTargets.length&&n.morphTargets,n=s instanceof THREE.SkinnedMesh&&n.skinning,t=s.customDepthMaterial?s.customDepthMaterial:n?t?f:e:t?d:c,p instanceof THREE.BufferGeometry?b.renderBufferDirect(k,i.__lights,null,t,p,s):b.renderBuffer(k,i.__lights,null,t,p,s);q=i.__webglObjectsImmediate;m=0;for(l=q.length;m<l;m++)p=q[m],s=p.object,s.visible&&(s._modelViewMatrix.multiplyMatrices(k.matrixWorldInverse,
s.matrixWorld),b.renderImmediateObject(k,i.__lights,null,c,s));m=b.getClearColor();l=b.getClearAlpha();a.clearColor(m.r,m.g,m.b,l);a.enable(a.BLEND)}};THREE.ShaderFlares={lensFlareVertexTexture:{vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility =        visibility.r / 9.0;\nvVisibility *= 1.0 - visibility.g / 9.0;\nvVisibility *=       visibility.b / 9.0;\nvVisibility *= 1.0 - visibility.a / 9.0;\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",
fragmentShader:"uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"},lensFlare:{vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",
fragmentShader:"precision mediump float;\nuniform lowp int renderType;\nuniform sampler2D map;\nuniform sampler2D occlusionMap;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nfloat visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;\nvisibility = ( 1.0 - visibility / 4.0 );\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * visibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"}};

// This THREEx helper makes it easy to handle window resize.
// It will update renderer and camera when window is resized.
//
// # Usage
//
// **Step 1**: Start updating renderer and camera
//
// ```var windowResize = new THREEx.WindowResize(aRenderer, aCamera)```
//    
// **Step 2**: stop updating renderer and camera
//
// ```windowResize.destroy()```
// # Code

//

/** @namespace */
var THREEx	= THREEx || {}

/**
 * Update renderer and camera when the window is resized
 * 
 * @param {Object} renderer the renderer to update
 * @param {Object} Camera the camera to update
 * @param {Function} dimension callback for renderer size
*/
THREEx.WindowResize	= function(renderer, camera, dimension){
	dimension 	= dimension || function(){ return { width: window.innerWidth, height: window.innerHeight } }
	var callback	= function(){
		// fetch target renderer size
		var rendererSize = dimension();
		// notify the renderer of the size change
		renderer.setSize( rendererSize.width, rendererSize.height )
		// update the camera
		camera.aspect	= rendererSize.width / rendererSize.height
		camera.updateProjectionMatrix()
	}
	// bind the resize event
	window.addEventListener('resize', callback, false)
	// return .stop() the function to stop watching window resize
	return {
		trigger	: function(){
			callback()
		},
		/**
		 * Stop watching window resize
		*/
		destroy	: function(){
			window.removeEventListener('resize', callback)
		}
	}
}

angular.module('VirtualBookshelf')
.factory('BookMaterial', function () {
	var BookMaterial = function(mapImage, bumpMapImage, specularMapImage, coverMapImage) {
		var defines = {};
		var uniforms;
		var parameters;

        var map;
        var bumpMap;
        var specularMap;
        var coverMap;
		
		uniforms = THREE.UniformsUtils.merge([
			THREE.UniformsLib.common,
			THREE.UniformsLib.bump,
			THREE.UniformsLib.fog,
			THREE.UniformsLib.lights
		]);

		uniforms.shininess = {type: 'f', value: 30};
		defines.PHONG = true;

		if(mapImage) {
			map = new THREE.Texture(mapImage);
			map.needsUpdate = true;
			uniforms.map = {type: 't', value: map};
			this.map = true;
		}
		if(bumpMapImage) {
			bumpMap = new THREE.Texture(bumpMapImage);
			bumpMap.needsUpdate = true;
			uniforms.bumpMap = {type: 't', value: bumpMap};
			uniforms.bumpScale.value = 0.005;
			this.bumpMap = true;
		}
		if(specularMapImage) {
			specularMap = new THREE.Texture(specularMapImage);
			specularMap.needsUpdate = true;
			uniforms.specular = {type: 'c', value: new THREE.Color(0x555555)};
			uniforms.specularMap = {type: 't', value: specularMap};
			this.specularMap = true;
		}
        if(coverMapImage) {
			coverMap = new THREE.Texture(coverMapImage);
			coverMap.needsUpdate = true;
			uniforms.coverMap = {type: 't', value: coverMap};
			defines.USE_COVER = true;
        }

		parameters = {
			vertexShader: vertexShader,	
			fragmentShader: fragmentShader,
			uniforms: uniforms,
			defines: defines,
			lights: true,
			fog: true
		};

		THREE.ShaderMaterial.call(this, parameters);
	};

	BookMaterial.prototype = Object.create(THREE.ShaderMaterial.prototype);

	BookMaterial.prototype.constructor = THREE.BookMaterial;

	var vertexShader = [
		'varying vec3 vViewPosition;',
		'varying vec3 vNormal;',

		THREE.ShaderChunk.map_pars_vertex,
		THREE.ShaderChunk.lights_phong_pars_vertex,
		THREE.ShaderChunk.color_pars_vertex,

		'void main() {',
			THREE.ShaderChunk.map_vertex,
			THREE.ShaderChunk.color_vertex,
			THREE.ShaderChunk.defaultnormal_vertex,
			'vNormal = normalize(transformedNormal);',
			THREE.ShaderChunk.default_vertex,
			'vViewPosition = -mvPosition.xyz;',
			THREE.ShaderChunk.worldpos_vertex,
			THREE.ShaderChunk.lights_phong_vertex,
		'}'
	].join('\n');

	var fragmentShader = [
		'uniform vec3 diffuse;',
		'uniform float opacity;',

		'uniform vec3 ambient;',
		'uniform vec3 emissive;',
		'uniform vec3 specular;',
		'uniform float shininess;',

		'uniform sampler2D coverMap;',

		THREE.ShaderChunk.color_pars_fragment,
		THREE.ShaderChunk.map_pars_fragment,
		THREE.ShaderChunk.fog_pars_fragment,
		THREE.ShaderChunk.lights_phong_pars_fragment,
		THREE.ShaderChunk.bumpmap_pars_fragment,
		THREE.ShaderChunk.specularmap_pars_fragment,

		'void main() {',
			'vec4 testcolor = vec4(1.0, 1.0, 1.0, 1.0);',
			'float eps = 0.004;',
			'vec4 baseColor  = texture2D(map, vUv);',

			'#ifdef USE_COVER',
		    	'vec4 coverColor = texture2D(coverMap, vUv * vec2(2.3, 1.3) - vec2(1.3, 0.3));',
			    'if(vUv.y > 0.23 && (vUv.x > 0.57 || (all(greaterThanEqual(baseColor,testcolor-eps)) && all(lessThanEqual(baseColor,testcolor+eps)))))',
			    	'gl_FragColor = coverColor;',
			    'else',
			    	'gl_FragColor = baseColor;',
			'#else',
		    	'gl_FragColor = baseColor;',
			'#endif',

			THREE.ShaderChunk.specularmap_fragment,
			THREE.ShaderChunk.lights_phong_fragment,
			THREE.ShaderChunk.color_fragment,
			THREE.ShaderChunk.fog_fragment,
		'}'		
	].join('\n');

	return BookMaterial;
});
angular.module('VirtualBookshelf')
.factory('BaseObject', function (subclassOf) {
	var BaseObject = function(dataObject, geometry, material) {
		THREE.Mesh.call(this, geometry, material);

		this.dataObject = dataObject || {};
		this.dataObject.rotation = this.dataObject.rotation || [0, 0, 0];
		
		this.id = this.dataObject.id;
		this.position = new THREE.Vector3(this.dataObject.pos_x, this.dataObject.pos_y, this.dataObject.pos_z);
		this.rotation.order = 'XYZ';
		this.rotation.fromArray(this.dataObject.rotation.map(Number));

		this.updateBoundingBox();		
	};
	
	BaseObject.prototype = subclassOf(THREE.Mesh);

	BaseObject.prototype.getType = function() {
		return this.type;
	};

	BaseObject.prototype.isOutOfParrent = function() {
		return Math.abs(this.boundingBox.center.x - this.parent.boundingBox.center.x) > (this.parent.boundingBox.radius.x - this.boundingBox.radius.x) ||
				Math.abs(this.boundingBox.center.z - this.parent.boundingBox.center.z) > (this.parent.boundingBox.radius.z - this.boundingBox.radius.z);
	};

	BaseObject.prototype.isCollided = function() {
		var
			result,
			targets,
			target,
			i;

		this.updateBoundingBox();

		result = this.isOutOfParrent();
		targets = this.parent.children;

		if(!result) {
			for(i = targets.length - 1; i >= 0; i--) {
				target = targets[i].boundingBox;

				if(targets[i] === this ||
					!target || // children without BB
					(Math.abs(this.boundingBox.center.x - target.center.x) > (this.boundingBox.radius.x + target.radius.x)) ||
					(Math.abs(this.boundingBox.center.y - target.center.y) > (this.boundingBox.radius.y + target.radius.y)) ||
					(Math.abs(this.boundingBox.center.z - target.center.z) > (this.boundingBox.radius.z + target.radius.z))) {	
					continue;
				}

		    	result = true;		
		    	break;
			}
		}

		return result;
	};

	BaseObject.prototype.move = function(newPosition) {
		var 
			currentPosition,
			result;

		result = false;
		currentPosition = this.position.clone();
		
		if(newPosition.x) {
			this.position.setX(newPosition.x);

			if(this.isCollided()) {
				this.position.setX(currentPosition.x);
			} else {
				result = true;
			}
		}

		if(newPosition.z) {
			this.position.setZ(newPosition.z);

			if(this.isCollided()) {
				this.position.setZ(currentPosition.z);
			} else {
				result = true;
			}
		}

		this.changed = this.changed || result;
		this.updateBoundingBox();

		return result;
	};

	BaseObject.prototype.rotate = function(dX, dY, isDemo) {
		var 
			currentRotation = this.rotation.clone(),
			result = false; 
		
		if(dX) {
			this.rotation.y += dX * 0.01;

			if(!isDemo && this.isCollided()) {
				this.rotation.y = currentRotation.y;
			} else {
				result = true;
			}
		}

		if(dY) {
			this.rotation.x += dY * 0.01;

			if(!isDemo && this.isCollided()) {
				this.rotation.x = currentRotation.x;
			} else {
				result = true;
			}
		}

		this.changed = this.changed || (!isDemo && result);
		this.updateBoundingBox();
	};

	BaseObject.prototype.updateBoundingBox = function() {
		var
			boundingBox,
			radius,
			center;

		this.updateMatrix();
		boundingBox = this.geometry.boundingBox.clone().applyMatrix4(this.matrix);
		
		radius = {
			x: (boundingBox.max.x - boundingBox.min.x) * 0.5,
			y: (boundingBox.max.y - boundingBox.min.y) * 0.5,
			z: (boundingBox.max.z - boundingBox.min.z) * 0.5
		};

		center = new THREE.Vector3();
		center.addVectors(boundingBox.min, boundingBox.max);
		center.multiplyScalar(0.5);

		this.boundingBox = {
			radius: radius,
			center: center
		};
	};

	BaseObject.prototype.rollback = function() {
		this.position.x = this.dataObject.pos_x;
		this.position.y = this.dataObject.pos_y;
		this.position.z = this.dataObject.pos_z;

		this.rotation.x = this.dataObject.rotation[0];
		this.rotation.y = this.dataObject.rotation[1];
		this.rotation.z = this.dataObject.rotation[2];
		
		this.updateBoundingBox();
	};

	return BaseObject;	
});
angular.module('VirtualBookshelf')
.factory('BookObject', function ($log, BaseObject, data, subclassOf) {	
	var BookObject = function(dataObject, geometry, material) {
		BaseObject.call(this, dataObject, geometry, material);
	};

	BookObject.TYPE = 'BookObject';

	BookObject.prototype = subclassOf(BaseObject);
	BookObject.prototype.type = BookObject.TYPE;

	BookObject.prototype.save = function() {
		var scope = this;
		var dto = {
			id: this.dataObject.id,
			userId: this.dataObject.userId,
			pos_x: this.position.x,
			pos_y: this.position.y,
			pos_z: this.position.z
		};

		return data.postBook(dto).then(function (responseDto) {
			scope.dataObject = responseDto;
			scope.changed = false;
		});
	};

	BookObject.prototype.setParent = function(parent) {
		if(this.parent != parent) {
			if(parent) {
				parent.add(this);
				this.dataObject.shelfId = parent.id;
				this.dataObject.sectionId = parent.parent.id;
			} else {
				this.parent.remove(this);
				this.dataObject.shelfId = null;
				this.dataObject.sectionId = null;
			}
		}
	};

	return BookObject;
});
angular.module('VirtualBookshelf')
.factory('CameraObject', function (BaseObject, subclassOf) {
	var CameraObject = function() {
		var geometry = new THREE.Geometry();
		geometry.boundingBox = new THREE.Box3(new THREE.Vector3(-0.1, -1, -0.1), new THREE.Vector3(0.1, 1, 0.1));

		BaseObject.call(this, null, geometry);
	};

	CameraObject.prototype = subclassOf(BaseObject);
	
	CameraObject.prototype.updateBoundingBox = function() {
		var radius = {
			x: this.geometry.boundingBox.max.x, 
			y: this.geometry.boundingBox.max.y, 
			z: this.geometry.boundingBox.max.z
		};

		this.boundingBox = {
			radius: radius,
			center: this.position //TODO: needs center of section in parent or world coordinates
		};
	};

	return CameraObject;
});
angular.module('VirtualBookshelf')
.factory('LibraryObject', function (BaseObject, subclassOf) {
	var LibraryObject = function(params, geometry, material) {
		BaseObject.call(this, params, geometry, material);
	};

	LibraryObject.prototype = subclassOf(BaseObject);

	return LibraryObject;	
});
angular.module('VirtualBookshelf')
.factory('SectionObject', function (BaseObject, ShelfObject, data, subclassOf) {
	var SectionObject = function(params, geometry, material) {
		BaseObject.call(this, params, geometry, material);

		this.shelves = {};
		for(var key in params.data.shelves) {
			this.shelves[key] = new ShelfObject(params.data.shelves[key]); 
			this.add(this.shelves[key]);
		}
	};

	SectionObject.TYPE = 'SectionObject';

	SectionObject.prototype = subclassOf(BaseObject);
	SectionObject.prototype.type = SectionObject.TYPE;

	SectionObject.prototype.save = function() {
		var scope = this;
		var dto = {
			id: this.dataObject.id,
			userId: this.dataObject.userId,
			pos_x: this.position.x,
			pos_y: this.position.y,
			pos_z: this.position.z,
			rotation: [this.rotation.x, this.rotation.y, this.rotation.z]
		};

		return data.postSection(dto).then(function (responseDto) {
			scope.dataObject = responseDto;
			scope.changed = false;
		});
	};

	SectionObject.prototype.setParent = function(parent) {
		if(this.parent != parent) {
			if(parent) {
				parent.add(this);
				this.dataObject.libraryId = parent.id;
			} else {
				this.parent.remove(this);
				this.dataObject.libraryId = null;
			}
		}
	};

	return SectionObject;
});
angular.module('VirtualBookshelf')
.factory('SelectorMeta', function () {
	var SelectorMeta = function(selectedObject) {
		if(selectedObject) {
			this.id = selectedObject.id;
			this.parentId = selectedObject.parent.id;
			this.type = selectedObject.getType();
		}
	};

	SelectorMeta.prototype.isEmpty = function() {
		return !this.id;
	};

	SelectorMeta.prototype.equals = function(meta) {
		return !(!meta
				|| meta.id !== this.id
				|| meta.parentId !== this.parentId
				|| meta.type !== this.type);
	};
	
	return SelectorMeta;
});
angular.module('VirtualBookshelf')
.factory('ShelfObject', function (BaseObject, subclassOf) {
	var ShelfObject = function(params) {
		var size = params.size;	
		var geometry = new THREE.CubeGeometry(size[0], size[1], size[2]);

		geometry.computeBoundingBox();
		BaseObject.call(this, params, geometry);

		this.position = new THREE.Vector3(params.position[0], params.position[1], params.position[2]);
		this.size = new THREE.Vector3(size[0], size[1], size[2]);
		this.visible = false;
	};

	ShelfObject.TYPE = 'ShelfObject';

	ShelfObject.prototype = subclassOf(BaseObject);
	ShelfObject.prototype.type = ShelfObject.TYPE;

	return ShelfObject;
});
angular.module('VirtualBookshelf')
.factory('subclassOf', function () {
	function _subclassOf() {}

	function subclassOf(base) {
	    _subclassOf.prototype = base.prototype;
	    return new _subclassOf();
	}

	return subclassOf;
});
angular.module('VirtualBookshelf')
.factory('highlight', function (environment) {
	var highlight = {};

	var PLANE_ROTATION = Math.PI * 0.5;
	var PLANE_MULTIPLIER = 2;
	var COLOR_SELECT = 0x005533;
	var COLOR_FOCUS = 0x003355;

	var select;
	var focus;

	var init = function() {
		var materialProperties = {
			map: new THREE.ImageUtils.loadTexture( 'img/glow.png' ),
			transparent: true, 
			side: THREE.DoubleSide,
			blending: THREE.AdditiveBlending,
			depthTest: false
		};

		materialProperties.color = COLOR_SELECT;
		var materialSelect = new THREE.MeshBasicMaterial(materialProperties);

		materialProperties.color = COLOR_FOCUS;
		var materialFocus = new THREE.MeshBasicMaterial(materialProperties);

		var geometry = new THREE.PlaneGeometry(1, 1, 1);

		select = new THREE.Mesh(geometry, materialSelect);
		select.rotation.x = PLANE_ROTATION;

		focus = new THREE.Mesh(geometry, materialFocus);
		focus.rotation.x = PLANE_ROTATION;
	};

	var commonHighlight = function(which, obj) {
		if(obj) {
			var width = obj.geometry.boundingBox.max.x * PLANE_MULTIPLIER;
			var height = obj.geometry.boundingBox.max.z * PLANE_MULTIPLIER;
			var bottom = obj.geometry.boundingBox.min.y + environment.CLEARANCE;
			
			which.position.y = bottom;
			which.scale.set(width, height, 1);
			obj.add(which);

			which.visible = true;
		} else {
			which.visible = false;
		}
	};

	highlight.enable = function(enable) {
		focus.visible = select.visible = enable;
	};

	highlight.focus = function(obj) {
		commonHighlight(focus, obj);
	};

	highlight.select = function(obj) {
		commonHighlight(select, obj);
	};

	init();

	return highlight;
});
angular.module('VirtualBookshelf')
.factory('locator', function ($q, $log, BaseObject, data, selector, environment, cache) {
	var locator = {};

	var debugEnabled = false;

	locator.centerObject = function(obj) {
		var targetBB = obj.geometry.boundingBox;
		var spaceBB = environment.library.geometry.boundingBox;

		var matrixPrecision = new THREE.Vector3(targetBB.max.x - targetBB.min.x + 0.01, 0, targetBB.max.z - targetBB.min.z + 0.01);
		var occupiedMatrix = getOccupiedMatrix(environment.library.children, matrixPrecision, obj);
		var freePosition = getFreeMatrix(occupiedMatrix, spaceBB, targetBB, matrixPrecision);		

		obj.position.setX(freePosition.x);
		obj.position.setZ(freePosition.z);
	};

	locator.placeSection = function(sectionDto) {
		var promise = cache.getSection(sectionDto.model).then(function (sectionCache) {
			var sectionBB = sectionCache.geometry.boundingBox;
			var libraryBB = environment.library.geometry.boundingBox;
			var freePlace = getFreePlace(environment.library.children, libraryBB, sectionBB);

			return freePlace ?
				saveSection(sectionDto, freePlace) :
				$q.reject('there is no free space');
		}).then(function (newDto) {
			return environment.updateSection(newDto);
		});

		return promise;
	};

	var saveSection = function(dto, position) {
		dto.libraryId = environment.library.id;
		dto.pos_x = position.x;
		dto.pos_y = position.y;
		dto.pos_z = position.z;

		return data.postSection(dto);
	};

	locator.placeBook = function(bookDto) {
		var promise;
		var shelf = selector.isSelectedShelf() && selector.getSelectedObject();

		if(shelf) {
			promise = cache.getBook(bookDto.model).then(function (bookCache) {
				var shelfBB = shelf.geometry.boundingBox;
				var bookBB = bookCache.geometry.boundingBox;
				var freePlace = getFreePlace(shelf.children, shelfBB, bookBB);

				return freePlace ? 
					saveBook(bookDto, freePlace, shelf) : 
					$q.reject('there is no free space');
			}).then(function (newDto) {
				return environment.updateBook(newDto);
			});
		} else {
			promise = $q.reject('shelf is not selected');
		}

		return promise;
	};

	var saveBook = function(dto, position, shelf) {
		dto.shelfId = shelf.id;
		dto.sectionId = shelf.parent.id;
		dto.pos_x = position.x;
		dto.pos_y = position.y;
		dto.pos_z = position.z;

		return data.postBook(dto);
	};

	locator.unplaceBook = function(bookDto) {
		var promise;
		bookDto.sectionId = null;

		promise = data.postBook(bookDto).then(function () {
			return environment.updateBook(bookDto);
		});

		return promise;
	};

	var getFreePlace = function(objects, spaceBB, targetBB) {
		var matrixPrecision = new THREE.Vector3(targetBB.max.x - targetBB.min.x + 0.01, 0, targetBB.max.z - targetBB.min.z + 0.01);
		var occupiedMatrix = getOccupiedMatrix(objects, matrixPrecision);
		var freePosition = getFreeMatrixCells(occupiedMatrix, spaceBB, targetBB, matrixPrecision);
		
		if (debugEnabled) {
			debugShowFree(freePosition, matrixPrecision, environment.library);
		}

		return freePosition;
	};

	var getFreeMatrix = function(occupiedMatrix, spaceBB, targetBB, matrixPrecision) {
		var DISTANCE = 1.3;

		var xIndex;
		var zIndex;
		var position = {};
		var minPosition = {};

		var minXCell = Math.floor(spaceBB.min.x / matrixPrecision.x) + 1;
		var maxXCell = Math.floor(spaceBB.max.x / matrixPrecision.x);
		var minZCell = Math.floor(spaceBB.min.z / matrixPrecision.z) + 1;
		var maxZCell = Math.floor(spaceBB.max.z / matrixPrecision.z);

		for (zIndex = minZCell; zIndex <= maxZCell; zIndex++) {
			for (xIndex = minXCell; xIndex <= maxXCell; xIndex++) {
				if (!occupiedMatrix[zIndex] || !occupiedMatrix[zIndex][xIndex]) {
					position.pos = getPositionFromCells([xIndex], zIndex, matrixPrecision, spaceBB, targetBB);
					position.length = position.pos.length();

					if(!minPosition.pos || position.length < minPosition.length) {
						minPosition.pos = position.pos;
						minPosition.length = position.length;
					}

					if(minPosition.pos && minPosition.length < DISTANCE) {
						return minPosition.pos;
					}
				}
			}
		}

		return minPosition.pos;
	};

	var getFreeMatrixCells = function(occupiedMatrix, spaceBB, targetBB, matrixPrecision) {
		var targetCellsSize = 1;
		var freeCellsCount = 0;
		var freeCellsStart;
		var xIndex;
		var zIndex;
		var cells;

		var minXCell = Math.floor(spaceBB.min.x / matrixPrecision.x) + 1;
		var maxXCell = Math.floor(spaceBB.max.x / matrixPrecision.x);
		var minZCell = Math.floor(spaceBB.min.z / matrixPrecision.z) + 1;
		var maxZCell = Math.floor(spaceBB.max.z / matrixPrecision.z);

		for (zIndex = minZCell; zIndex <= maxZCell; zIndex++) {
			for (xIndex = minXCell; xIndex <= maxXCell; xIndex++) {
				if (!occupiedMatrix[zIndex] || !occupiedMatrix[zIndex][xIndex]) {
					freeCellsStart = freeCellsStart || xIndex;
					freeCellsCount++;

					if (freeCellsCount === targetCellsSize) {
						cells = _.range(freeCellsStart, freeCellsStart + freeCellsCount);
						return getPositionFromCells(cells, zIndex, matrixPrecision, spaceBB, targetBB);
					}
				} else {
					freeCellsCount = 0;
				}
			}
		}

		return null;
	};

	var getPositionFromCells = function(cells, zIndex, matrixPrecision, spaceBB, targetBB) {
		var freeX = cells[0] * matrixPrecision.x;
		var freeZ =	zIndex * matrixPrecision.z;

		var offset = new THREE.Vector3();
		offset.addVectors(targetBB.min, targetBB.max);
		offset.multiplyScalar(-0.5);

		return new THREE.Vector3(freeX + offset.x, getBottomY(spaceBB, targetBB), freeZ + offset.z);
	};

	var getBottomY = function(spaceBB, targetBB) {
		return spaceBB.min.y - targetBB.min.y + environment.CLEARANCE;
	};

	var getOccupiedMatrix = function(objects, matrixPrecision, obj) {
		var result = {};
		var objectBB;
		var minKeyX;
		var maxKeyX;
		var minKeyZ;
		var maxKeyZ;		
		var z, x;

		objects.forEach(function (child) {
			if(child instanceof BaseObject && child !== obj) {
				objectBB = child.boundingBox;

				minKeyX = Math.round((objectBB.center.x - objectBB.radius.x) / matrixPrecision.x);
				maxKeyX = Math.round((objectBB.center.x + objectBB.radius.x) / matrixPrecision.x);
				minKeyZ = Math.round((objectBB.center.z - objectBB.radius.z) / matrixPrecision.z);
				maxKeyZ = Math.round((objectBB.center.z + objectBB.radius.z) / matrixPrecision.z);

				for(z = minKeyZ; z <= maxKeyZ; z++) {
					result[z] = result[z] || {};
					var debugCells = [];

					for(x = minKeyX; x <= maxKeyX; x++) {
						result[z][x] = true;
						debugCells.push(x);
					}

					if(debugEnabled) {
						debugShowBB(child);
						debugAddOccupied(debugCells, matrixPrecision, child, z);
					}
				}
			}
		});

		return result;
	};

	locator.debug = function() {
		cache.getSection('bookshelf_0001').then(function (sectionCache) {
			debugEnabled = true;
			var sectionBB = sectionCache.geometry.boundingBox;
			var libraryBB = environment.library.geometry.boundingBox;
			getFreePlace(environment.library.children, libraryBB, sectionBB);
			debugEnabled = false;
		});
	};

	var debugShowBB = function(obj) {
		var objectBB = obj.boundingBox;
		var objBox = new THREE.Mesh(
			new THREE.CubeGeometry(
				objectBB.radius.x * 2, 
				objectBB.radius.y * 2 + 0.1, 
				objectBB.radius.z * 2
			), 
			new THREE.MeshLambertMaterial({
				color: 0xbbbbff,
				opacity: 0.2,
				transparent: true
			})
		);
		
		objBox.position.x = objectBB.center.x;
		objBox.position.y = objectBB.center.y;
		objBox.position.z = objectBB.center.z;

		obj.parent.add(objBox);
	};

	var debugAddOccupied = function(cells, matrixPrecision, obj, zKey) {
		cells.forEach(function (cell) {
			var pos = getPositionFromCells([cell], zKey, matrixPrecision, obj.parent.geometry.boundingBox, obj.geometry.boundingBox);
			var cellBox = new THREE.Mesh(new THREE.CubeGeometry(matrixPrecision.x - 0.01, 0.01, matrixPrecision.z - 0.01), new THREE.MeshLambertMaterial({color: 0xff0000}));
			
			cellBox.position = pos;
			obj.parent.add(cellBox);
		});
	};

	var debugShowFree = function(position, matrixPrecision, obj) {
		if (position) {
			var cellBox = new THREE.Mesh(new THREE.CubeGeometry(matrixPrecision.x, 0.5, matrixPrecision.z), new THREE.MeshLambertMaterial({color: 0x00ff00}));
			cellBox.position = position;
			obj.parent.add(cellBox);
		}
	};

	return locator;	
});
angular.module('VirtualBookshelf')
.factory('preview', function (camera, highlight) {
	var preview = {};

	var active = false;
	var container;

	var init = function() {
		container = new THREE.Object3D();
		container.position.set(0, 0, -0.5);
		container.rotation.y = -2;
		camera.camera.add(container);
	};

	var activate = function(value) {
		active = value;
		highlight.enable(!active);
	};

	preview.isActive = function() {
		return active;
	};

	preview.enable = function(obj) {
		var objClone;

		if(obj) {
			activate(true);

			objClone = obj.clone();
			objClone.position.set(0, 0, 0);
			container.add(objClone);
		}
	};

	preview.disable = function () {
		clearContainer();
		activate(false);
	};

	var clearContainer = function() {
		container.children.forEach(function (child) {
			container.remove(child);
		});
	};

	preview.rotate = function(dX) {
		container.rotation.y += dX ? dX * 0.05 : 0;
	};

	init();

	return preview;
});
angular.module('VirtualBookshelf')
.factory('selector', function ($rootScope, SelectorMeta, BookObject, ShelfObject, SectionObject, environment, highlight, preview, tooltip) {
	var selector = {};
	
	var selected = new SelectorMeta();
	var focused = new SelectorMeta();

	selector.focus = function(meta) {
		var obj;

		if(!meta.equals(focused)) {
			focused = meta;

			if(!focused.isEmpty()) {
				obj = getObject(focused);
				highlight.focus(obj);
			}

			tooltip.set(obj);
			$rootScope.$apply();
		}
	};

	selector.selectFocused = function() {
		var meta = focused;

		selector.select(meta);
		$rootScope.$apply();
	};

	selector.select = function(meta) {
		if(!meta.equals(selected)) {
			selector.unselect();
			selected = meta;

			var obj = getObject(selected);
			highlight.select(obj);
			highlight.focus(null);
		}
	};

	selector.unselect = function() {
		if(!selected.isEmpty()) {
			highlight.select(null);
			selected = new SelectorMeta();
		}

		preview.disable();
	};

	selector.getSelectedObject = function() {
		return getObject(selected);
	};

	var getObject = function(meta) {
		var object;

		if(!meta.isEmpty()) {
			object = isShelf(meta) ? environment.getShelf(meta.parentId, meta.id)
				: isBook(meta) ? environment.getBook(meta.id)
				: isSection(meta) ? environment.getSection(meta.id)
				: null;
		}

		return object;	
	};

	selector.isSelectedEditable = function() {
		return selector.isSelectedBook() || selector.isSelectedSection();
	};

	selector.isBookSelected = function(id) {
		return isBook(selected) && selected.id === id;
	};

	selector.isSelectedShelf = function() {
		return isShelf(selected);
	};

	selector.isSelectedBook = function() {
		return isBook(selected);
	};

	selector.isSelectedSection = function() {
		return isSection(selected);
	};

	var isShelf = function(meta) {
		return meta.type === ShelfObject.TYPE;
	};

	var isBook = function(meta) {
		return meta.type === BookObject.TYPE;
	};

	var isSection = function(meta) {
		return meta.type === SectionObject.TYPE;
	};

	return selector;
});
angular.module('VirtualBookshelf')
.factory('authorization', function ($log, $q, $window, $interval, user, selectLibrary, catalog, environment, ngDialog) {
	var authorization = {};

	authorization.show = function() {
		ngDialog.openConfirm({
			template: '/ui/loginDialog'
		});
	};

	authorization.isShow = function() {
		return !user.isAuthorized() && user.isLoaded();
	};

	authorization.google = function() {
		var win = $window.open('/auth/google', '', 'width=800,height=600,modal=yes,alwaysRaised=yes');
	    var checkAuthWindow = $interval(function () {
	        if (win && win.closed) {
	        	$interval.cancel(checkAuthWindow);

	        	environment.setLoaded(false);
	        	user.load().then(function () {
	        		return authorization.loadUserData();
	        	}).finally(function () {
	        		environment.setLoaded(true);
	        	}).catch(function () {
	        		$log.log('User loadind error');
					//TODO: show error message  
	        	});
	        }
	    }, 100);
	};

	authorization.logout = function() {
    	environment.setLoaded(false);
		user.logout().finally(function () {
    		return authorization.loadUserData();
		}).finally(function () {
        	environment.setLoaded(true);
		}).catch(function () {
			$log.error('Logout error');
			//TODO: show an error
		});
	};

	authorization.loadUserData = function() {
		return $q.all([
			selectLibrary.updateList(), 
			catalog.loadBooks()
		]);
	};
	
	return authorization;
});
angular.module('VirtualBookshelf')
.factory('block', function (blockUI) {
	var block = {};

	var INVENTORY = 'inventory';
	var MAIN_MENU = 'main_menu';
	var GLOBAL = 'global';

	block.inventory = blockUI.instances.get(INVENTORY);
	
	block.mainMenu = blockUI.instances.get(MAIN_MENU);

	block.global = blockUI.instances.get(GLOBAL);

	return block;
});
angular.module('VirtualBookshelf')
.factory('bookEdit', function ($log, data, environment, block, dialog, archive, catalog, selector) {
	var bookEdit = {};

	var BOOK_IMAGE_URL = '/obj/books/{model}/img.jpg';
	var EMPTY_IMAGE_URL = '/img/empty_cover.jpg';
	
	bookEdit.list = [];
	bookEdit.book = {};
	bookEdit.coverInputURL = null;

	bookEdit.setBook = function(book) {
		this.book = {}; // create new object for unbind from scope
		if(book) {
			this.book.id = book.id;
			this.book.userId = book.userId;
			this.book.model = book.model;
			this.book.cover = book.cover;
			this.book.coverId = book.coverId;
			this.book.title = book.title;
			this.book.author = book.author;

			this.coverInputURL = null;
		}
	};

	bookEdit.getImg = function() {
		return this.book.model ? BOOK_IMAGE_URL.replace('{model}', this.book.model) : EMPTY_IMAGE_URL;
	};

	bookEdit.getCoverImg = function() {
		return this.isCoverShow() ? this.book.cover.url : EMPTY_IMAGE_URL;
	};

	bookEdit.isCoverDisabled = function() {
		return this.coverInputURL && (this.form.title.$invalid || this.form.author.$invalid);
	};

	bookEdit.isCoverShow = function() {
		return Boolean(this.book.cover);
	};

	bookEdit.isShow = function() {
		return !!this.book.userId;
	};

	bookEdit.submit = function() {
		if(this.form.$valid) {
			this.save();
		} else {
			dialog.openError('Fill all required fields, please.');
		}
	};

	bookEdit.applyCover = function() {
		if(!this.isCoverDisabled()) {
			if(this.coverInputURL) {
				block.inventory.start();
				archive.sendExternalURL(this.coverInputURL, [this.book.title, this.book.author]).then(function (result) {
					bookEdit.book.cover = result;
					bookEdit.book.coverId = result.id;
				}).catch(function () {
					bookEdit.book.coverId = null;
					bookEdit.book.cover = null;
					
					dialog.openError('Can not apply this cover. Try another one, please.');
				}).finally(function () {
					bookEdit.coverInputURL = null;
					block.inventory.stop();
				});
			} else {
				bookEdit.book.coverId = null;
				bookEdit.book.cover = null;
			}
		} else {
			dialog.openError('Fill author and title fields, please.');
		}
	};

	bookEdit.save = function() {
		var scope = this;
		
		block.inventory.start();
		data.postBook(this.book).then(function (dto) {
			if(selector.isBookSelected(dto.id)) {
				selector.unselect();
			}

			environment.updateBook(dto);
			scope.cancel();
			return catalog.loadBooks();
		}).catch(function () {
			$log.error('Book save error');
			//TODO: show error
		}).finally(function () {
			block.inventory.stop();
		});
	};

	bookEdit.cancel = function() {
		this.setBook();
	};

	return bookEdit;
});
angular.module('VirtualBookshelf')
.factory('catalog', function ($q, data, user, block) {
	var catalog = {};

	catalog.books = null;

	catalog.loadBooks = function() {
		var promise;
		var userId = user.getId();

		if(userId) {
			block.inventory.start();
			promise = $q.when(userId ? data.getUserBooks(userId) : null).then(function (result) {
				catalog.books = result;
			}).finally(function () {
				block.inventory.stop();	
			});
		}

		return promise;
	};

	return catalog;
});
angular.module('VirtualBookshelf')
.factory('createLibrary', function (data, environment, ngDialog) {
	var createLibrary = {};
	
	var EMPTY_IMAGE_URL = '/img/empty_cover.jpg';
	
	createLibrary.list = [];
	createLibrary.model = null;

	createLibrary.show = function() {
		ngDialog.openConfirm({
			template: '/ui/createLibrary'
		});
	};

	createLibrary.getImg = function() {
		return this.model ? '/obj/libraries/{model}/img.jpg'.replace('{model}', this.model) : EMPTY_IMAGE_URL;
	};

	createLibrary.create = function() {
		if(this.model) {
			data.postLibrary(this.model).then(function (result) {
				environment.goToLibrary(result.id);
			}).catch(function () {
				//TODO: show an error
			});
		}
	};

	return createLibrary;
});
angular.module('VirtualBookshelf')
.factory('createSection', function ($log, user, environment, locator) {
	var createSection = {};
	
	var EMPTY_IMAGE_URL = '/img/empty_cover.jpg';

	createSection.list = [];
	createSection.model = null;
	createSection.visible = false;

	createSection.isShow = function() {
		return this.visible;
	};

	createSection.show = function() {
		this.visible = true;
	};

	createSection.hide = function() {
		this.visible = false;
	};
	
	createSection.getImg = function() {
		return this.model ? '/obj/sections/{model}/img.jpg'.replace('{model}', this.model) : EMPTY_IMAGE_URL;
	};

	createSection.create = function() {
		if(this.model) {
			var sectionData = {
				model: this.model,
				libraryId: environment.library.id,
				userId: user.getId()
			};

			this.place(sectionData);
		}
	};

	createSection.place = function(dto) {
		//TODO: block
		locator.placeSection(dto).catch(function (error) {
			//TODO: show an error
			$log.error(error);
		});	
	};

	return createSection;
});
angular.module('VirtualBookshelf')
.factory('feedback', function (user, data, dialog) {
	var feedback = {};
	var show = false;

	feedback.message = null;

	feedback.isShow = function() {
		return show;
	};

	feedback.show = function() {
		show = true;
	};

	feedback.hide = function() {
		show = false;
	};

	feedback.submit = function() {
		var dataObject;
		
		if(this.form.message.$valid) {
			dialog.openConfirm('Send feedback?').then(function () {
				dataObject = {
					message: this.message,
					userId: user.getId()
				};

				return data.postFeedback(dataObject).then(function () {
					this.message = null;
					feedback.hide();
				}, function () {
					dialog.openError('Can not send feedback because of an error.');
				});
			});
		} else {
			dialog.openError('Feedback field is required.');
		}
	};

	return feedback;
});
angular.module('VirtualBookshelf')
.factory('inventory', function ($log, SelectorMeta, user, data, bookEdit, selector, environment, dialog, locator, catalog, block) {
	var inventory = {};

	inventory.search = null;

	inventory.expand = function(book) {
		bookEdit.setBook(book);
	};

	inventory.isShow = function() {
		return user.isAuthorized();
	};

	inventory.isBookSelected = function(id) {
		return selector.isBookSelected(id);
	};

	inventory.select = function(dto) {
		var book = environment.getBook(dto.id);
		var meta = new SelectorMeta(book);

		selector.select(meta);
	};

	inventory.addBook = function() {
		this.expand({userId: user.getId()});
	};

	inventory.delete = function(book) {
		dialog.openConfirm('Delete book?').then(function () {
			block.inventory.start();

			data.deleteBook(book.id).then(function () {
				if(selector.isBookSelected(book.id)) {
					selector.unselect();
				}

				environment.removeBook(book.id);
				return catalog.loadBooks();
			}).catch(function () {
				dialog.openError('Delete book error.');
			}).finally(function () {
				block.inventory.stop();
			});
		});
	};

	inventory.place = function(book, event) {
		var promise;
		var isBookPlaced = !!book.sectionId;

		event.stopPropagation();
		
		block.inventory.start();
		promise = isBookPlaced ? locator.unplaceBook(book) : locator.placeBook(book);
		promise.then(function () {
			return catalog.loadBooks();
		}).catch(function (error) {
			//TODO: show an error
			$log.error(error);
		}).finally(function () {
			block.inventory.stop();
		});
	};

	return inventory;
});
angular.module('VirtualBookshelf')
.factory('mainMenu', function ($log, data, bookEdit, feedback, selectLibrary, createLibrary, createSection) {
	var mainMenu = {};
	
	var show = false;
	var createListShow = false;

	mainMenu.isShow = function() {
		return show;
	};

	mainMenu.show = function() {
		mainMenu.hideAll();
		show = true;
	};

	mainMenu.hide = function() {
		show = false;
	};

	mainMenu.isCreateListShow = function() {
		return createListShow;
	};

	mainMenu.createListShow = function() {
		mainMenu.hideAll();
		createListShow = true;
	};

	mainMenu.createListHide = function() {
		createListShow = false;
	};

	mainMenu.hideAll = function() {
		mainMenu.hide();
		mainMenu.createListHide();
		createSection.hide();

		feedback.hide();
	};

	mainMenu.trigger = function() {
		if(mainMenu.isShow()) {
			mainMenu.hide();
		} else {
			mainMenu.show();
		}
	};

	mainMenu.showFeedback = function() {
		mainMenu.hideAll();
		feedback.show();
	};

	mainMenu.showSelectLibrary = function() {
		mainMenu.hideAll();
		selectLibrary.show();
	};

	mainMenu.showCreateLibrary = function() {
		mainMenu.hideAll();
		createLibrary.show();
	};

	mainMenu.showCreateSection = function() {
		mainMenu.hideAll();
		createSection.show();
	};

	var init = function() {
		//TODO: move to menu models
		data.getUIData().then(function (res) {
			createLibrary.list = res.data.libraries;
			createSection.list = res.data.bookshelves;
			bookEdit.list = res.data.books;
		}).catch(function () {
			$log.log('UI init error');
			//TODO: show an error
		});
	};

	init();

	return mainMenu;
});
angular.module('VirtualBookshelf')
.factory('selectLibrary', function (data, environment, user, ngDialog) {
	var selectLibrary = {};

	selectLibrary.list = [];

	selectLibrary.show = function() {
		ngDialog.openConfirm({
			template: '/ui/selectLibrary'
		});
	};

	selectLibrary.isAvailable = function() {
		return selectLibrary.list.length > 0;
	};

	selectLibrary.isUserLibrary = function() {
		return environment.library && environment.library.dataObject.userId === user.getId();
	};

	selectLibrary.updateList = function() {
		var scope = this;

	    var promise = data.getLibraries().then(function (res) {
            scope.list = res.data;
    	});

    	return promise;
	};

	selectLibrary.go = environment.goToLibrary;

	return selectLibrary;
});
angular.module('VirtualBookshelf')
.factory('tools', function ($q, BookObject, SectionObject, data, selector, dialog, block, catalog, environment, preview) {
	var tools = {};

	var ROTATION_SCALE = 1;

	var states = {
		rotateLeft: false,
		rotateRight: false
	};

	tools.delete = function() {
		var obj = selector.getSelectedObject();

		if(obj && selector.isSelectedEditable()) {
			dialog.openConfirm('Delete selected object?').then(function () {
				block.global.start();

				deleteObject(obj).then(function () {
					selector.unselect();
					return catalog.loadBooks();
				}).catch(function () {
					dialog.openError('Error deleting object.');
				}).finally(function () {
					block.global.stop();
				});
			});			
		}
	};

	var deleteObject = function(obj) {
		return $q.when(
			obj instanceof BookObject ? 
				deleteBook(obj.id) :
				obj instanceof SectionObject ?
					deleteSection(obj.id) :
					$q.reject('Can not delete selected object.')//TODO: test
		);
	};

	var deleteBook = function(id) {
		return data.deleteBook(id).then(function () {
			environment.removeBook(id);
		});
	};

	var deleteSection = function(id) {
		return data.deleteSection(id).then(function () {
			environment.removeSection(id);
		});
	};

	tools.rotateLeft = function() {
		states.rotateLeft = true;
	};

	tools.rotateRight = function() {
		states.rotateRight = true;
	};

	tools.stop = function() {
		states.rotateLeft = false;
		states.rotateRight = false;
	};

	tools.update = function() {
		if(states.rotateLeft) {
			rotate(ROTATION_SCALE);
		} else if(states.rotateRight) {
			rotate(-ROTATION_SCALE);
		}
	};

	var rotate = function(scale) {
		if(preview.isActive()) {
			preview.rotate(scale);
		} else {
			var obj = selector.getSelectedObject();
			obj.rotate(scale);
		}
	};

	return tools;
});
angular.module('VirtualBookshelf')
.factory('tooltip', function () {
	var tooltip = {};

	tooltip.obj = {};

	tooltip.set = function(obj) {
		if(obj) {
			this.obj.type = obj.type;
			this.obj.title = obj.dataObject.title;
			this.obj.author = obj.dataObject.author;
		} else {
			this.obj.type = null;
		}
	};

	return tooltip;
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbnRyb2xsZXJzL0F1dGhDdHJsLmpzIiwiY29udHJvbGxlcnMvQ3JlYXRlTGlicmFyeUN0cmwuanMiLCJjb250cm9sbGVycy9TZWxlY3RMaWJyYXJ5Q3RybC5qcyIsImNvbnRyb2xsZXJzL1Rvb2xzQ3RybC5qcyIsImNvbnRyb2xsZXJzL1Rvb2x0aXBDdHJsLmpzIiwiY29udHJvbGxlcnMvVWlDdHJsLmpzIiwiY29udHJvbGxlcnMvV2VsY29tZUN0cmwuanMiLCJkaXJlY3RpdmVzL3NlbGVjdC5qcyIsImxpYnMvbG9kYXNoLm1pbi5qcyIsInNlcnZpY2VzL2FyY2hpdmUuanMiLCJzZXJ2aWNlcy9jYWNoZS5qcyIsInNlcnZpY2VzL2NhbWVyYS5qcyIsInNlcnZpY2VzL2NvbnRyb2xzLmpzIiwic2VydmljZXMvZGF0YS5qcyIsInNlcnZpY2VzL2RpYWxvZy5qcyIsInNlcnZpY2VzL2Vudmlyb25tZW50LmpzIiwic2VydmljZXMvbWFpbi5qcyIsInNlcnZpY2VzL21vdXNlLmpzIiwic2VydmljZXMvbmF2aWdhdGlvbi5qcyIsInNlcnZpY2VzL3VzZXIuanMiLCJsaWJzL3RocmVlLmpzL0RldGVjdG9yLmpzIiwibGlicy90aHJlZS5qcy90aHJlZS5taW4uanMiLCJsaWJzL3RocmVlLmpzL3RocmVleC53aW5kb3dyZXNpemUuanMiLCJzZXJ2aWNlcy9tYXRlcmlhbHMvQm9va01hdGVyaWFsLmpzIiwic2VydmljZXMvbW9kZWxzL0Jhc2VPYmplY3QuanMiLCJzZXJ2aWNlcy9tb2RlbHMvQm9va09iamVjdC5qcyIsInNlcnZpY2VzL21vZGVscy9DYW1lcmFPYmplY3QuanMiLCJzZXJ2aWNlcy9tb2RlbHMvTGlicmFyeU9iamVjdC5qcyIsInNlcnZpY2VzL21vZGVscy9TZWN0aW9uT2JqZWN0LmpzIiwic2VydmljZXMvbW9kZWxzL1NlbGVjdG9yTWV0YS5qcyIsInNlcnZpY2VzL21vZGVscy9TaGVsZk9iamVjdC5qcyIsInNlcnZpY2VzL21vZGVscy9zdWJjbGFzc09mLmpzIiwic2VydmljZXMvc2NlbmUvaGlnaGxpZ2h0LmpzIiwic2VydmljZXMvc2NlbmUvbG9jYXRvci5qcyIsInNlcnZpY2VzL3NjZW5lL3ByZXZpZXcuanMiLCJzZXJ2aWNlcy9zY2VuZS9zZWxlY3Rvci5qcyIsInNlcnZpY2VzL3VpL2F1dGhvcml6YXRpb24uanMiLCJzZXJ2aWNlcy91aS9ibG9jay5qcyIsInNlcnZpY2VzL3VpL2Jvb2tFZGl0LmpzIiwic2VydmljZXMvdWkvY2F0YWxvZy5qcyIsInNlcnZpY2VzL3VpL2NyZWF0ZUxpYnJhcnkuanMiLCJzZXJ2aWNlcy91aS9jcmVhdGVTZWN0aW9uLmpzIiwic2VydmljZXMvdWkvZmVlZGJhY2suanMiLCJzZXJ2aWNlcy91aS9pbnZlbnRvcnkuanMiLCJzZXJ2aWNlcy91aS9tYWluTWVudS5qcyIsInNlcnZpY2VzL3VpL3NlbGVjdExpYnJhcnkuanMiLCJzZXJ2aWNlcy91aS90b29scy5qcyIsInNlcnZpY2VzL3VpL3Rvb2x0aXAuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMvQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDckJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDdkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDeEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDdkZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3pLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN4REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3pIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDeElBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQy9DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDdFFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDekRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNoSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNwREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzlyQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3BEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzlIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDaEtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDMUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN6QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMvQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3RCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNwQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNuRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDN1FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3JEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDcEdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3JEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3hHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN2QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDL0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDMUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNuRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNwRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNqQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbkZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXJcbiAgICAubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJywgWydibG9ja1VJJywgJ25nRGlhbG9nJywgJ2FuZ3VsYXJVdGlscy5kaXJlY3RpdmVzLmRpclBhZ2luYXRpb24nXSlcbiAgICBcdC5jb25maWcoZnVuY3Rpb24gKGJsb2NrVUlDb25maWcsIHBhZ2luYXRpb25UZW1wbGF0ZVByb3ZpZGVyKSB7XG4gICAgXHRcdGJsb2NrVUlDb25maWcuZGVsYXkgPSAwO1xuICAgIFx0XHRibG9ja1VJQ29uZmlnLmF1dG9CbG9jayA9IGZhbHNlO1xuXHRcdFx0YmxvY2tVSUNvbmZpZy5hdXRvSW5qZWN0Qm9keUJsb2NrID0gZmFsc2U7XG5cdFx0XHRwYWdpbmF0aW9uVGVtcGxhdGVQcm92aWRlci5zZXRQYXRoKCcvanMvYW5ndWxhci9kaXJQYWdpbmF0aW9uL2RpclBhZ2luYXRpb24udHBsLmh0bWwnKTtcbiAgICBcdH0pXG4gICAgXHQucnVuKGZ1bmN0aW9uIChtYWluKSB7XG5cdFx0XHRtYWluLnN0YXJ0KCk7XG4gICAgXHR9KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uY29udHJvbGxlcignQXV0aEN0cmwnLCBmdW5jdGlvbiAoYXV0aG9yaXphdGlvbikge1xuXHR0aGlzLmxvZ2luR29vZ2xlID0gZnVuY3Rpb24oKSB7XG5cdFx0YXV0aG9yaXphdGlvbi5nb29nbGUoKTtcblx0fTtcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5jb250cm9sbGVyKCdDcmVhdGVMaWJyYXJ5Q3RybCcsIGZ1bmN0aW9uIChjcmVhdGVMaWJyYXJ5KSB7XG5cdHRoaXMubGlzdCA9IGNyZWF0ZUxpYnJhcnkubGlzdDtcblx0dGhpcy5tb2RlbCA9IGNyZWF0ZUxpYnJhcnkubW9kZWw7XG5cdHRoaXMuZ2V0SW1nID0gY3JlYXRlTGlicmFyeS5nZXRJbWc7XG5cdHRoaXMuY3JlYXRlID0gY3JlYXRlTGlicmFyeS5jcmVhdGU7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uY29udHJvbGxlcignU2VsZWN0TGlicmFyeUN0cmwnLCBmdW5jdGlvbiAoc2VsZWN0TGlicmFyeSkge1xuXHR0aGlzLmdvID0gc2VsZWN0TGlicmFyeS5nbztcblxuXHR0aGlzLmdldExpc3QgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gc2VsZWN0TGlicmFyeS5saXN0O1xuXHR9O1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ1ZpcnR1YWxCb29rc2hlbGYnKVxuLmNvbnRyb2xsZXIoJ1Rvb2xzQ3RybCcsIGZ1bmN0aW9uICh1c2VyLCBzZWxlY3RvciwgdG9vbHMsIHByZXZpZXcpIHtcbiAgICB0aGlzLmlzU2hvdyA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBzZWxlY3Rvci5pc1NlbGVjdGVkRWRpdGFibGUoKSB8fCBwcmV2aWV3LmlzQWN0aXZlKCk7XG5cdH07XG5cbiAgICB0aGlzLmlzUm90YXRhYmxlID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHNlbGVjdG9yLmlzU2VsZWN0ZWRTZWN0aW9uKCkgfHwgcHJldmlldy5pc0FjdGl2ZSgpO1xuXHR9O1xuXG4gICAgdGhpcy5pc0RlbGV0YWJsZSA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBzZWxlY3Rvci5pc1NlbGVjdGVkRWRpdGFibGUoKSAmJiB1c2VyLmlzQXV0aG9yaXplZCgpO1xuXHR9O1xuXG4gICAgdGhpcy5pc1dhdGNoYWJsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gc2VsZWN0b3IuaXNTZWxlY3RlZEJvb2soKSAmJiAhcHJldmlldy5pc0FjdGl2ZSgpO1xuICAgIH07XG5cbiAgICB0aGlzLndhdGNoID0gZnVuY3Rpb24oKSAge1xuICAgICAgICB2YXIgb2JqID0gc2VsZWN0b3IuZ2V0U2VsZWN0ZWRPYmplY3QoKTtcbiAgICAgICAgcHJldmlldy5lbmFibGUob2JqKTtcbiAgICB9O1xuXG4gICAgdGhpcy51bndhdGNoID0gcHJldmlldy5kaXNhYmxlO1xuICAgIHRoaXMuaXNXYXRjaEFjdGl2ZSA9IHByZXZpZXcuaXNBY3RpdmU7XG5cbiAgICB0aGlzLnJvdGF0ZUxlZnQgPSB0b29scy5yb3RhdGVMZWZ0O1xuICAgIHRoaXMucm90YXRlUmlnaHQgPSB0b29scy5yb3RhdGVSaWdodDtcbiAgICB0aGlzLnN0b3AgPSB0b29scy5zdG9wO1xuXG4gICAgdGhpcy5kZWxldGUgPSB0b29scy5kZWxldGU7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uY29udHJvbGxlcignVG9vbHRpcEN0cmwnLCBmdW5jdGlvbiAodG9vbHRpcCwgQm9va09iamVjdCkge1xuICAgIHRoaXMuaXNTaG93ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0b29sdGlwLm9iai50eXBlID09PSBCb29rT2JqZWN0LlRZUEU7XG4gICAgfTtcblxuICAgIHRoaXMub2JqID0gdG9vbHRpcC5vYmo7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uY29udHJvbGxlcignVWlDdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgbWFpbk1lbnUsIHNlbGVjdExpYnJhcnksIGNyZWF0ZUxpYnJhcnksIGNyZWF0ZVNlY3Rpb24sIGZlZWRiYWNrLCBhdXRob3JpemF0aW9uLCBuYXZpZ2F0aW9uLCBpbnZlbnRvcnksIGJvb2tFZGl0LCBjYXRhbG9nKSB7XG4gICAgJHNjb3BlLm1haW5NZW51ID0gbWFpbk1lbnU7XG5cbiAgICAkc2NvcGUuc2VsZWN0TGlicmFyeSA9IHNlbGVjdExpYnJhcnk7XG4gICAgJHNjb3BlLmNyZWF0ZUxpYnJhcnkgPSBjcmVhdGVMaWJyYXJ5O1xuICAgICRzY29wZS5jcmVhdGVTZWN0aW9uID0gY3JlYXRlU2VjdGlvbjtcbiAgICAkc2NvcGUuZmVlZGJhY2sgPSBmZWVkYmFjaztcbiAgICAkc2NvcGUuYXV0aG9yaXphdGlvbiA9IGF1dGhvcml6YXRpb247XG5cbiAgICAkc2NvcGUuaW52ZW50b3J5ID0gaW52ZW50b3J5O1xuICAgICRzY29wZS5ib29rRWRpdCA9IGJvb2tFZGl0O1xuICAgICRzY29wZS5jYXRhbG9nID0gY2F0YWxvZztcblxuXHQkc2NvcGUubmF2aWdhdGlvbiA9IHtcblx0XHRzdG9wOiBuYXZpZ2F0aW9uLmdvU3RvcCxcblx0XHRmb3J3YXJkOiBuYXZpZ2F0aW9uLmdvRm9yd2FyZCxcblx0XHRiYWNrd2FyZDogbmF2aWdhdGlvbi5nb0JhY2t3YXJkLFxuXHRcdGxlZnQ6IG5hdmlnYXRpb24uZ29MZWZ0LFxuXHRcdHJpZ2h0OiBuYXZpZ2F0aW9uLmdvUmlnaHRcblx0fTtcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5jb250cm9sbGVyKCdXZWxjb21lQ3RybCcsIGZ1bmN0aW9uIChhdXRob3JpemF0aW9uLCBzZWxlY3RMaWJyYXJ5LCBjcmVhdGVMaWJyYXJ5LCBlbnZpcm9ubWVudCkge1xuXHR2YXIgY2xvc2VkID0gZmFsc2U7XG5cblx0dGhpcy5pc1Nob3dBdXRob3JpemF0aW9uID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGF1dGhvcml6YXRpb24uaXNTaG93KCk7XG5cdH07XG5cdFxuXHR0aGlzLmlzU2hvd1NlbGVjdExpYnJhcnkgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gc2VsZWN0TGlicmFyeS5pc0F2YWlsYWJsZSgpICYmICFzZWxlY3RMaWJyYXJ5LmlzVXNlckxpYnJhcnkoKTtcblx0fTtcblxuXHR0aGlzLmlzU2hvd0NyZWF0ZUxpYnJhcnkgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gIXRoaXMuaXNTaG93QXV0aG9yaXphdGlvbigpICYmICFzZWxlY3RMaWJyYXJ5LmlzQXZhaWxhYmxlKCk7XG5cdH07XG5cblx0dGhpcy5pc1Nob3cgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gIWNsb3NlZCAmJiAodGhpcy5pc1Nob3dBdXRob3JpemF0aW9uKCkgfHwgdGhpcy5pc1Nob3dDcmVhdGVMaWJyYXJ5KCkgfHwgdGhpcy5pc1Nob3dTZWxlY3RMaWJyYXJ5KCkpO1xuXHR9O1xuXG5cdHRoaXMuaXNMb2FkZWQgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gZW52aXJvbm1lbnQuZ2V0TG9hZGVkKCk7XG5cdH07XG5cblx0dGhpcy5zaG93TG9naW5EaWFsb2cgPSBmdW5jdGlvbigpIHtcblx0XHRhdXRob3JpemF0aW9uLnNob3coKTtcblx0fTtcblxuXHR0aGlzLnNob3dTZWxlY3RMaWJyYXJ5RGlhbG9nID0gZnVuY3Rpb24oKSB7XG5cdFx0c2VsZWN0TGlicmFyeS5zaG93KCk7XG5cdH07XG5cblx0dGhpcy5zaG93Q3JlYXRlTGlicmFyeURpYWxvZyA9IGZ1bmN0aW9uKCkge1xuXHRcdGNyZWF0ZUxpYnJhcnkuc2hvdygpO1xuXHR9O1xuXG5cdHRoaXMuY2xvc2UgPSBmdW5jdGlvbigpIHtcblx0XHRjbG9zZWQgPSB0cnVlO1xuXHR9O1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ1ZpcnR1YWxCb29rc2hlbGYnKVxuLmRpcmVjdGl2ZSgndmJTZWxlY3QnLCBmdW5jdGlvbigpIHtcblx0cmV0dXJuIHtcblx0XHRyZXF1aXJlOiAnbmdNb2RlbCcsXG5cdFx0cmVzdHJpY3Q6ICdFJyxcbiAgICBcdHRyYW5zY2x1ZGU6IHRydWUsXG5cdFx0dGVtcGxhdGVVcmw6ICcvdWkvc2VsZWN0LmVqcycsXG5cdFx0c2NvcGU6IHtcblx0XHRcdG9wdGlvbnM6ICc9Jyxcblx0XHRcdHZhbHVlOiAnQCcsXG5cdFx0XHRsYWJlbDogJ0AnXG5cdFx0fSxcblxuXHRcdGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY29udHJvbGxlcikge1xuXHRcdFx0c2NvcGUuc2VsZWN0ID0gZnVuY3Rpb24oaXRlbSkge1xuXHRcdFx0XHRjb250cm9sbGVyLiRzZXRWaWV3VmFsdWUoaXRlbVtzY29wZS52YWx1ZV0pO1xuXHRcdFx0fTtcblxuXHRcdFx0c2NvcGUuaXNTZWxlY3RlZCA9IGZ1bmN0aW9uKGl0ZW0pIHtcblx0XHRcdFx0cmV0dXJuIGNvbnRyb2xsZXIuJG1vZGVsVmFsdWUgPT09IGl0ZW1bc2NvcGUudmFsdWVdO1xuXHRcdFx0fTtcblx0XHR9XG5cdH07XG59KTtcbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIGxvZGFzaCAzLjIuMCAoQ3VzdG9tIEJ1aWxkKSBsb2Rhc2guY29tL2xpY2Vuc2UgfCBVbmRlcnNjb3JlLmpzIDEuNy4wIHVuZGVyc2NvcmVqcy5vcmcvTElDRU5TRVxuICogQnVpbGQ6IGBsb2Rhc2ggbW9kZXJuIC1vIC4vbG9kYXNoLmpzYFxuICovXG47KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gbihuLHQpe2lmKG4hPT10KXt2YXIgcj1uPT09bixlPXQ9PT10O2lmKG4+dHx8IXJ8fHR5cGVvZiBuPT1cInVuZGVmaW5lZFwiJiZlKXJldHVybiAxO2lmKG48dHx8IWV8fHR5cGVvZiB0PT1cInVuZGVmaW5lZFwiJiZyKXJldHVybi0xfXJldHVybiAwfWZ1bmN0aW9uIHQobix0LHIpe2lmKHQhPT10KXJldHVybiBwKG4scik7cj0ocnx8MCktMTtmb3IodmFyIGU9bi5sZW5ndGg7KytyPGU7KWlmKG5bcl09PT10KXJldHVybiByO3JldHVybi0xfWZ1bmN0aW9uIHIobix0KXt2YXIgcj1uLmxlbmd0aDtmb3Iobi5zb3J0KHQpO3ItLTspbltyXT1uW3JdLmM7cmV0dXJuIG59ZnVuY3Rpb24gZShuKXtyZXR1cm4gdHlwZW9mIG49PVwic3RyaW5nXCI/bjpudWxsPT1uP1wiXCI6bitcIlwifWZ1bmN0aW9uIHUobil7cmV0dXJuIG4uY2hhckNvZGVBdCgwKX1mdW5jdGlvbiBvKG4sdCl7Zm9yKHZhciByPS0xLGU9bi5sZW5ndGg7KytyPGUmJi0xPHQuaW5kZXhPZihuLmNoYXJBdChyKSk7KTtyZXR1cm4gclxufWZ1bmN0aW9uIGkobix0KXtmb3IodmFyIHI9bi5sZW5ndGg7ci0tJiYtMTx0LmluZGV4T2Yobi5jaGFyQXQocikpOyk7cmV0dXJuIHJ9ZnVuY3Rpb24gZih0LHIpe3JldHVybiBuKHQuYSxyLmEpfHx0LmItci5ifWZ1bmN0aW9uIGEodCxyKXtmb3IodmFyIGU9LTEsdT10LmEsbz1yLmEsaT11Lmxlbmd0aDsrK2U8aTspe3ZhciBmPW4odVtlXSxvW2VdKTtpZihmKXJldHVybiBmfXJldHVybiB0LmItci5ifWZ1bmN0aW9uIGMobil7cmV0dXJuIFd0W25dfWZ1bmN0aW9uIGwobil7cmV0dXJuIE50W25dfWZ1bmN0aW9uIHMobil7cmV0dXJuXCJcXFxcXCIrTHRbbl19ZnVuY3Rpb24gcChuLHQscil7dmFyIGU9bi5sZW5ndGg7Zm9yKHQ9cj90fHxlOih0fHwwKS0xO3I/dC0tOisrdDxlOyl7dmFyIHU9blt0XTtpZih1IT09dSlyZXR1cm4gdH1yZXR1cm4tMX1mdW5jdGlvbiBoKG4pe3JldHVybiBuJiZ0eXBlb2Ygbj09XCJvYmplY3RcInx8ZmFsc2V9ZnVuY3Rpb24gXyhuKXtyZXR1cm4gMTYwPj1uJiY5PD1uJiYxMz49bnx8MzI9PW58fDE2MD09bnx8NTc2MD09bnx8NjE1OD09bnx8ODE5Mjw9biYmKDgyMDI+PW58fDgyMzI9PW58fDgyMzM9PW58fDgyMzk9PW58fDgyODc9PW58fDEyMjg4PT1ufHw2NTI3OT09bilcbn1mdW5jdGlvbiBnKG4sdCl7Zm9yKHZhciByPS0xLGU9bi5sZW5ndGgsdT0tMSxvPVtdOysrcjxlOyluW3JdPT09dCYmKG5bcl09QixvWysrdV09cik7cmV0dXJuIG99ZnVuY3Rpb24gdihuKXtmb3IodmFyIHQ9LTEscj1uLmxlbmd0aDsrK3Q8ciYmXyhuLmNoYXJDb2RlQXQodCkpOyk7cmV0dXJuIHR9ZnVuY3Rpb24geShuKXtmb3IodmFyIHQ9bi5sZW5ndGg7dC0tJiZfKG4uY2hhckNvZGVBdCh0KSk7KTtyZXR1cm4gdH1mdW5jdGlvbiBkKG4pe3JldHVybiBVdFtuXX1mdW5jdGlvbiBtKF8pe2Z1bmN0aW9uIFd0KG4pe2lmKGgobikmJiEoU28obil8fG4gaW5zdGFuY2VvZiBVdCkpe2lmKG4gaW5zdGFuY2VvZiBOdClyZXR1cm4gbjtpZihVdS5jYWxsKG4sXCJfX2NoYWluX19cIikmJlV1LmNhbGwobixcIl9fd3JhcHBlZF9fXCIpKXJldHVybiBoZShuKX1yZXR1cm4gbmV3IE50KG4pfWZ1bmN0aW9uIE50KG4sdCxyKXt0aGlzLl9fd3JhcHBlZF9fPW4sdGhpcy5fX2FjdGlvbnNfXz1yfHxbXSx0aGlzLl9fY2hhaW5fXz0hIXRcbn1mdW5jdGlvbiBVdChuKXt0aGlzLl9fd3JhcHBlZF9fPW4sdGhpcy5fX2FjdGlvbnNfXz1udWxsLHRoaXMuX19kaXJfXz0xLHRoaXMuX19kcm9wQ291bnRfXz0wLHRoaXMuX19maWx0ZXJlZF9fPWZhbHNlLHRoaXMuX19pdGVyYXRlZXNfXz1udWxsLHRoaXMuX190YWtlQ291bnRfXz1zbyx0aGlzLl9fdmlld3NfXz1udWxsfWZ1bmN0aW9uIEZ0KCl7dGhpcy5fX2RhdGFfXz17fX1mdW5jdGlvbiBMdChuKXt2YXIgdD1uP24ubGVuZ3RoOjA7Zm9yKHRoaXMuZGF0YT17aGFzaDp0byhudWxsKSxzZXQ6bmV3IFp1fTt0LS07KXRoaXMucHVzaChuW3RdKX1mdW5jdGlvbiBCdChuLHQpe3ZhciByPW4uZGF0YTtyZXR1cm4odHlwZW9mIHQ9PVwic3RyaW5nXCJ8fFhlKHQpP3Iuc2V0Lmhhcyh0KTpyLmhhc2hbdF0pPzA6LTF9ZnVuY3Rpb24genQobix0KXt2YXIgcj0tMSxlPW4ubGVuZ3RoO2Zvcih0fHwodD13dShlKSk7KytyPGU7KXRbcl09bltyXTtyZXR1cm4gdH1mdW5jdGlvbiBNdChuLHQpe2Zvcih2YXIgcj0tMSxlPW4ubGVuZ3RoOysrcjxlJiZmYWxzZSE9PXQobltyXSxyLG4pOyk7cmV0dXJuIG5cbn1mdW5jdGlvbiBxdChuLHQpe2Zvcih2YXIgcj0tMSxlPW4ubGVuZ3RoOysrcjxlOylpZighdChuW3JdLHIsbikpcmV0dXJuIGZhbHNlO3JldHVybiB0cnVlfWZ1bmN0aW9uIFB0KG4sdCl7Zm9yKHZhciByPS0xLGU9bi5sZW5ndGgsdT0tMSxvPVtdOysrcjxlOyl7dmFyIGk9bltyXTt0KGkscixuKSYmKG9bKyt1XT1pKX1yZXR1cm4gb31mdW5jdGlvbiBLdChuLHQpe2Zvcih2YXIgcj0tMSxlPW4ubGVuZ3RoLHU9d3UoZSk7KytyPGU7KXVbcl09dChuW3JdLHIsbik7cmV0dXJuIHV9ZnVuY3Rpb24gVnQobil7Zm9yKHZhciB0PS0xLHI9bi5sZW5ndGgsZT1sbzsrK3Q8cjspe3ZhciB1PW5bdF07dT5lJiYoZT11KX1yZXR1cm4gZX1mdW5jdGlvbiBZdChuLHQscixlKXt2YXIgdT0tMSxvPW4ubGVuZ3RoO2ZvcihlJiZvJiYocj1uWysrdV0pOysrdTxvOylyPXQocixuW3VdLHUsbik7cmV0dXJuIHJ9ZnVuY3Rpb24gWnQobix0LHIsZSl7dmFyIHU9bi5sZW5ndGg7Zm9yKGUmJnUmJihyPW5bLS11XSk7dS0tOylyPXQocixuW3VdLHUsbik7XG5yZXR1cm4gcn1mdW5jdGlvbiBHdChuLHQpe2Zvcih2YXIgcj0tMSxlPW4ubGVuZ3RoOysrcjxlOylpZih0KG5bcl0scixuKSlyZXR1cm4gdHJ1ZTtyZXR1cm4gZmFsc2V9ZnVuY3Rpb24gSnQobix0KXtyZXR1cm4gdHlwZW9mIG49PVwidW5kZWZpbmVkXCI/dDpufWZ1bmN0aW9uIFh0KG4sdCxyLGUpe3JldHVybiB0eXBlb2YgbiE9XCJ1bmRlZmluZWRcIiYmVXUuY2FsbChlLHIpP246dH1mdW5jdGlvbiBIdChuLHQscil7dmFyIGU9Rm8odCk7aWYoIXIpcmV0dXJuIG5yKHQsbixlKTtmb3IodmFyIHU9LTEsbz1lLmxlbmd0aDsrK3U8bzspe3ZhciBpPWVbdV0sZj1uW2ldLGE9cihmLHRbaV0saSxuLHQpOyhhPT09YT9hPT09ZjpmIT09ZikmJih0eXBlb2YgZiE9XCJ1bmRlZmluZWRcInx8aSBpbiBuKXx8KG5baV09YSl9cmV0dXJuIG59ZnVuY3Rpb24gUXQobix0KXtmb3IodmFyIHI9LTEsZT1uLmxlbmd0aCx1PW9lKGUpLG89dC5sZW5ndGgsaT13dShvKTsrK3I8bzspe3ZhciBmPXRbcl07dT8oZj1wYXJzZUZsb2F0KGYpLGlbcl09ZWUoZixlKT9uW2ZdOncpOmlbcl09bltmXVxufXJldHVybiBpfWZ1bmN0aW9uIG5yKG4sdCxyKXtyfHwocj10LHQ9e30pO2Zvcih2YXIgZT0tMSx1PXIubGVuZ3RoOysrZTx1Oyl7dmFyIG89cltlXTt0W29dPW5bb119cmV0dXJuIHR9ZnVuY3Rpb24gdHIobix0LHIpe3ZhciBlPXR5cGVvZiBuO2lmKFwiZnVuY3Rpb25cIj09ZSl7aWYoZT10eXBlb2YgdCE9XCJ1bmRlZmluZWRcIil7dmFyIGU9V3Quc3VwcG9ydCx1PSEoZS5mdW5jTmFtZXM/bi5uYW1lOmUuZnVuY0RlY29tcCk7aWYoIXUpe3ZhciBvPVd1LmNhbGwobik7ZS5mdW5jTmFtZXN8fCh1PSFkdC50ZXN0KG8pKSx1fHwodT1rdC50ZXN0KG8pfHxIZShuKSxibyhuLHUpKX1lPXV9bj1lP05yKG4sdCxyKTpufWVsc2Ugbj1udWxsPT1uP3Z1Olwib2JqZWN0XCI9PWU/YnIobik6dHlwZW9mIHQ9PVwidW5kZWZpbmVkXCI/anIobitcIlwiKTp4cihuK1wiXCIsdCk7cmV0dXJuIG59ZnVuY3Rpb24gcnIobix0LHIsZSx1LG8saSl7dmFyIGY7aWYociYmKGY9dT9yKG4sZSx1KTpyKG4pKSx0eXBlb2YgZiE9XCJ1bmRlZmluZWRcIilyZXR1cm4gZjtcbmlmKCFYZShuKSlyZXR1cm4gbjtpZihlPVNvKG4pKXtpZihmPW5lKG4pLCF0KXJldHVybiB6dChuLGYpfWVsc2V7dmFyIGE9THUuY2FsbChuKSxjPWE9PUs7aWYoYSE9WSYmYSE9eiYmKCFjfHx1KSlyZXR1cm4gVHRbYV0/cmUobixhLHQpOnU/bjp7fTtpZihmPXRlKGM/e306biksIXQpcmV0dXJuIG5yKG4sZixGbyhuKSl9Zm9yKG98fChvPVtdKSxpfHwoaT1bXSksdT1vLmxlbmd0aDt1LS07KWlmKG9bdV09PW4pcmV0dXJuIGlbdV07cmV0dXJuIG8ucHVzaChuKSxpLnB1c2goZiksKGU/TXQ6X3IpKG4sZnVuY3Rpb24oZSx1KXtmW3VdPXJyKGUsdCxyLHUsbixvLGkpfSksZn1mdW5jdGlvbiBlcihuLHQscixlKXtpZih0eXBlb2YgbiE9XCJmdW5jdGlvblwiKXRocm93IG5ldyBPdSgkKTtyZXR1cm4gR3UoZnVuY3Rpb24oKXtuLmFwcGx5KHcsUnIocixlKSl9LHQpfWZ1bmN0aW9uIHVyKG4scil7dmFyIGU9bj9uLmxlbmd0aDowLHU9W107aWYoIWUpcmV0dXJuIHU7dmFyIG89LTEsaT1RcigpLGY9aT09dCxhPWYmJjIwMDw9ci5sZW5ndGgmJnhvKHIpLGM9ci5sZW5ndGg7XG5hJiYoaT1CdCxmPWZhbHNlLHI9YSk7bjpmb3IoOysrbzxlOylpZihhPW5bb10sZiYmYT09PWEpe2Zvcih2YXIgbD1jO2wtLTspaWYocltsXT09PWEpY29udGludWUgbjt1LnB1c2goYSl9ZWxzZSAwPmkocixhKSYmdS5wdXNoKGEpO3JldHVybiB1fWZ1bmN0aW9uIG9yKG4sdCl7dmFyIHI9bj9uLmxlbmd0aDowO2lmKCFvZShyKSlyZXR1cm4gX3Iobix0KTtmb3IodmFyIGU9LTEsdT1wZShuKTsrK2U8ciYmZmFsc2UhPT10KHVbZV0sZSx1KTspO3JldHVybiBufWZ1bmN0aW9uIGlyKG4sdCl7dmFyIHI9bj9uLmxlbmd0aDowO2lmKCFvZShyKSlyZXR1cm4gZ3Iobix0KTtmb3IodmFyIGU9cGUobik7ci0tJiZmYWxzZSE9PXQoZVtyXSxyLGUpOyk7cmV0dXJuIG59ZnVuY3Rpb24gZnIobix0KXt2YXIgcj10cnVlO3JldHVybiBvcihuLGZ1bmN0aW9uKG4sZSx1KXtyZXR1cm4gcj0hIXQobixlLHUpfSkscn1mdW5jdGlvbiBhcihuLHQpe3ZhciByPVtdO3JldHVybiBvcihuLGZ1bmN0aW9uKG4sZSx1KXt0KG4sZSx1KSYmci5wdXNoKG4pXG59KSxyfWZ1bmN0aW9uIGNyKG4sdCxyLGUpe3ZhciB1O3JldHVybiByKG4sZnVuY3Rpb24obixyLG8pe3JldHVybiB0KG4scixvKT8odT1lP3I6bixmYWxzZSk6dm9pZCAwfSksdX1mdW5jdGlvbiBscihuLHQscixlKXtlPShlfHwwKS0xO2Zvcih2YXIgdT1uLmxlbmd0aCxvPS0xLGk9W107KytlPHU7KXt2YXIgZj1uW2VdO2lmKGgoZikmJm9lKGYubGVuZ3RoKSYmKFNvKGYpfHxZZShmKSkpe3QmJihmPWxyKGYsdCxyKSk7dmFyIGE9LTEsYz1mLmxlbmd0aDtmb3IoaS5sZW5ndGgrPWM7KythPGM7KWlbKytvXT1mW2FdfWVsc2Ugcnx8KGlbKytvXT1mKX1yZXR1cm4gaX1mdW5jdGlvbiBzcihuLHQscil7dmFyIGU9LTEsdT1wZShuKTtyPXIobik7Zm9yKHZhciBvPXIubGVuZ3RoOysrZTxvOyl7dmFyIGk9cltlXTtpZihmYWxzZT09PXQodVtpXSxpLHUpKWJyZWFrfXJldHVybiBufWZ1bmN0aW9uIHByKG4sdCxyKXt2YXIgZT1wZShuKTtyPXIobik7Zm9yKHZhciB1PXIubGVuZ3RoO3UtLTspe3ZhciBvPXJbdV07XG5pZihmYWxzZT09PXQoZVtvXSxvLGUpKWJyZWFrfXJldHVybiBufWZ1bmN0aW9uIGhyKG4sdCl7c3Iobix0LG91KX1mdW5jdGlvbiBfcihuLHQpe3JldHVybiBzcihuLHQsRm8pfWZ1bmN0aW9uIGdyKG4sdCl7cmV0dXJuIHByKG4sdCxGbyl9ZnVuY3Rpb24gdnIobix0KXtmb3IodmFyIHI9LTEsZT10Lmxlbmd0aCx1PS0xLG89W107KytyPGU7KXt2YXIgaT10W3JdO0plKG5baV0pJiYob1srK3VdPWkpfXJldHVybiBvfWZ1bmN0aW9uIHlyKG4sdCxyKXt2YXIgZT0tMSx1PXR5cGVvZiB0PT1cImZ1bmN0aW9uXCIsbz1uP24ubGVuZ3RoOjAsaT1vZShvKT93dShvKTpbXTtyZXR1cm4gb3IobixmdW5jdGlvbihuKXt2YXIgbz11P3Q6bnVsbCE9biYmblt0XTtpWysrZV09bz9vLmFwcGx5KG4scik6d30pLGl9ZnVuY3Rpb24gZHIobix0LHIsZSx1LG8pe2lmKG49PT10KXJldHVybiAwIT09bnx8MS9uPT0xL3Q7dmFyIGk9dHlwZW9mIG4sZj10eXBlb2YgdDtpZihcImZ1bmN0aW9uXCIhPWkmJlwib2JqZWN0XCIhPWkmJlwiZnVuY3Rpb25cIiE9ZiYmXCJvYmplY3RcIiE9Znx8bnVsbD09bnx8bnVsbD09dCluPW4hPT1uJiZ0IT09dDtcbmVsc2Ugbjp7dmFyIGk9ZHIsZj1TbyhuKSxhPVNvKHQpLGM9RCxsPUQ7Znx8KGM9THUuY2FsbChuKSxjPT16P2M9WTpjIT1ZJiYoZj1ydShuKSkpLGF8fChsPUx1LmNhbGwodCksbD09ej9sPVk6bCE9WSYmcnUodCkpO3ZhciBzPWM9PVksYT1sPT1ZLGw9Yz09bDtpZighbHx8Znx8cylpZihjPXMmJlV1LmNhbGwobixcIl9fd3JhcHBlZF9fXCIpLGE9YSYmVXUuY2FsbCh0LFwiX193cmFwcGVkX19cIiksY3x8YSluPWkoYz9uLnZhbHVlKCk6bixhP3QudmFsdWUoKTp0LHIsZSx1LG8pO2Vsc2UgaWYobCl7Zm9yKHV8fCh1PVtdKSxvfHwobz1bXSksYz11Lmxlbmd0aDtjLS07KWlmKHVbY109PW4pe249b1tjXT09dDticmVhayBufXUucHVzaChuKSxvLnB1c2godCksbj0oZj9acjpKcikobix0LGkscixlLHUsbyksdS5wb3AoKSxvLnBvcCgpfWVsc2Ugbj1mYWxzZTtlbHNlIG49R3Iobix0LGMpfXJldHVybiBufWZ1bmN0aW9uIG1yKG4sdCxyLGUsdSl7dmFyIG89dC5sZW5ndGg7aWYobnVsbD09bilyZXR1cm4hbztcbmZvcih2YXIgaT0tMSxmPSF1OysraTxvOylpZihmJiZlW2ldP3JbaV0hPT1uW3RbaV1dOiFVdS5jYWxsKG4sdFtpXSkpcmV0dXJuIGZhbHNlO2ZvcihpPS0xOysraTxvOyl7dmFyIGE9dFtpXTtpZihmJiZlW2ldKWE9VXUuY2FsbChuLGEpO2Vsc2V7dmFyIGM9blthXSxsPXJbaV0sYT11P3UoYyxsLGEpOnc7dHlwZW9mIGE9PVwidW5kZWZpbmVkXCImJihhPWRyKGwsYyx1LHRydWUpKX1pZighYSlyZXR1cm4gZmFsc2V9cmV0dXJuIHRydWV9ZnVuY3Rpb24gd3Iobix0KXt2YXIgcj1bXTtyZXR1cm4gb3IobixmdW5jdGlvbihuLGUsdSl7ci5wdXNoKHQobixlLHUpKX0pLHJ9ZnVuY3Rpb24gYnIobil7dmFyIHQ9Rm8obikscj10Lmxlbmd0aDtpZigxPT1yKXt2YXIgZT10WzBdLHU9bltlXTtpZihpZSh1KSlyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIG51bGwhPW4mJm5bZV09PT11JiZVdS5jYWxsKG4sZSl9fWZvcih2YXIgbz13dShyKSxpPXd1KHIpO3ItLTspdT1uW3Rbcl1dLG9bcl09dSxpW3JdPWllKHUpO3JldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gbXIobix0LG8saSlcbn19ZnVuY3Rpb24geHIobix0KXtyZXR1cm4gaWUodCk/ZnVuY3Rpb24ocil7cmV0dXJuIG51bGwhPXImJnJbbl09PT10fTpmdW5jdGlvbihyKXtyZXR1cm4gbnVsbCE9ciYmZHIodCxyW25dLG51bGwsdHJ1ZSl9fWZ1bmN0aW9uIEFyKG4sdCxyLGUsdSl7dmFyIG89b2UodC5sZW5ndGgpJiYoU28odCl8fHJ1KHQpKTtyZXR1cm4obz9NdDpfcikodCxmdW5jdGlvbih0LGksZil7aWYoaCh0KSl7ZXx8KGU9W10pLHV8fCh1PVtdKTtuOnt0PWU7Zm9yKHZhciBhPXUsYz10Lmxlbmd0aCxsPWZbaV07Yy0tOylpZih0W2NdPT1sKXtuW2ldPWFbY10saT12b2lkIDA7YnJlYWsgbn1jPW5baV0sZj1yP3IoYyxsLGksbixmKTp3O3ZhciBzPXR5cGVvZiBmPT1cInVuZGVmaW5lZFwiO3MmJihmPWwsb2UobC5sZW5ndGgpJiYoU28obCl8fHJ1KGwpKT9mPVNvKGMpP2M6Yz96dChjKTpbXTpObyhsKXx8WWUobCk/Zj1ZZShjKT9ldShjKTpObyhjKT9jOnt9OnM9ZmFsc2UpLHQucHVzaChsKSxhLnB1c2goZikscz9uW2ldPUFyKGYsbCxyLHQsYSk6KGY9PT1mP2YhPT1jOmM9PT1jKSYmKG5baV09ZiksaT12b2lkIDBcbn1yZXR1cm4gaX1hPW5baV0sZj1yP3IoYSx0LGksbixmKTp3LChsPXR5cGVvZiBmPT1cInVuZGVmaW5lZFwiKSYmKGY9dCksIW8mJnR5cGVvZiBmPT1cInVuZGVmaW5lZFwifHwhbCYmKGY9PT1mP2Y9PT1hOmEhPT1hKXx8KG5baV09Zil9KSxufWZ1bmN0aW9uIGpyKG4pe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dD93OnRbbl19fWZ1bmN0aW9uIGtyKG4sdCl7cmV0dXJuIG4rUHUoY28oKSoodC1uKzEpKX1mdW5jdGlvbiBFcihuLHQscixlLHUpe3JldHVybiB1KG4sZnVuY3Rpb24obix1LG8pe3I9ZT8oZT1mYWxzZSxuKTp0KHIsbix1LG8pfSkscn1mdW5jdGlvbiBScihuLHQscil7dmFyIGU9LTEsdT1uLmxlbmd0aDtmb3IodD1udWxsPT10PzA6K3R8fDAsMD50JiYodD0tdD51PzA6dSt0KSxyPXR5cGVvZiByPT1cInVuZGVmaW5lZFwifHxyPnU/dTorcnx8MCwwPnImJihyKz11KSx1PXQ+cj8wOnItdD4+PjAsdD4+Pj0wLHI9d3UodSk7KytlPHU7KXJbZV09bltlK3RdO3JldHVybiByfWZ1bmN0aW9uIElyKG4sdCl7dmFyIHI7XG5yZXR1cm4gb3IobixmdW5jdGlvbihuLGUsdSl7cmV0dXJuIHI9dChuLGUsdSksIXJ9KSwhIXJ9ZnVuY3Rpb24gT3IobixyKXt2YXIgZT0tMSx1PVFyKCksbz1uLmxlbmd0aCxpPXU9PXQsZj1pJiYyMDA8PW8sYT1mJiZ4bygpLGM9W107YT8odT1CdCxpPWZhbHNlKTooZj1mYWxzZSxhPXI/W106Yyk7bjpmb3IoOysrZTxvOyl7dmFyIGw9bltlXSxzPXI/cihsLGUsbik6bDtpZihpJiZsPT09bCl7Zm9yKHZhciBwPWEubGVuZ3RoO3AtLTspaWYoYVtwXT09PXMpY29udGludWUgbjtyJiZhLnB1c2gocyksYy5wdXNoKGwpfWVsc2UgMD51KGEscykmJigocnx8ZikmJmEucHVzaChzKSxjLnB1c2gobCkpfXJldHVybiBjfWZ1bmN0aW9uIENyKG4sdCl7Zm9yKHZhciByPS0xLGU9dC5sZW5ndGgsdT13dShlKTsrK3I8ZTspdVtyXT1uW3Rbcl1dO3JldHVybiB1fWZ1bmN0aW9uIFRyKG4sdCl7dmFyIHI9bjtyIGluc3RhbmNlb2YgVXQmJihyPXIudmFsdWUoKSk7Zm9yKHZhciBlPS0xLHU9dC5sZW5ndGg7KytlPHU7KXt2YXIgcj1bcl0sbz10W2VdO1xuVnUuYXBwbHkocixvLmFyZ3MpLHI9by5mdW5jLmFwcGx5KG8udGhpc0FyZyxyKX1yZXR1cm4gcn1mdW5jdGlvbiBTcihuLHQscil7dmFyIGU9MCx1PW4/bi5sZW5ndGg6ZTtpZih0eXBlb2YgdD09XCJudW1iZXJcIiYmdD09PXQmJnU8PV9vKXtmb3IoO2U8dTspe3ZhciBvPWUrdT4+PjEsaT1uW29dOyhyP2k8PXQ6aTx0KT9lPW8rMTp1PW99cmV0dXJuIHV9cmV0dXJuIFdyKG4sdCx2dSxyKX1mdW5jdGlvbiBXcihuLHQscixlKXt0PXIodCk7Zm9yKHZhciB1PTAsbz1uP24ubGVuZ3RoOjAsaT10IT09dCxmPXR5cGVvZiB0PT1cInVuZGVmaW5lZFwiO3U8bzspe3ZhciBhPVB1KCh1K28pLzIpLGM9cihuW2FdKSxsPWM9PT1jOyhpP2x8fGU6Zj9sJiYoZXx8dHlwZW9mIGMhPVwidW5kZWZpbmVkXCIpOmU/Yzw9dDpjPHQpP3U9YSsxOm89YX1yZXR1cm4gb28obyxobyl9ZnVuY3Rpb24gTnIobix0LHIpe2lmKHR5cGVvZiBuIT1cImZ1bmN0aW9uXCIpcmV0dXJuIHZ1O2lmKHR5cGVvZiB0PT1cInVuZGVmaW5lZFwiKXJldHVybiBuO1xuc3dpdGNoKHIpe2Nhc2UgMTpyZXR1cm4gZnVuY3Rpb24ocil7cmV0dXJuIG4uY2FsbCh0LHIpfTtjYXNlIDM6cmV0dXJuIGZ1bmN0aW9uKHIsZSx1KXtyZXR1cm4gbi5jYWxsKHQscixlLHUpfTtjYXNlIDQ6cmV0dXJuIGZ1bmN0aW9uKHIsZSx1LG8pe3JldHVybiBuLmNhbGwodCxyLGUsdSxvKX07Y2FzZSA1OnJldHVybiBmdW5jdGlvbihyLGUsdSxvLGkpe3JldHVybiBuLmNhbGwodCxyLGUsdSxvLGkpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbi5hcHBseSh0LGFyZ3VtZW50cyl9fWZ1bmN0aW9uIFVyKG4pe3JldHVybiBEdS5jYWxsKG4sMCl9ZnVuY3Rpb24gRnIobix0LHIpe2Zvcih2YXIgZT1yLmxlbmd0aCx1PS0xLG89dW8obi5sZW5ndGgtZSwwKSxpPS0xLGY9dC5sZW5ndGgsYT13dShvK2YpOysraTxmOylhW2ldPXRbaV07Zm9yKDsrK3U8ZTspYVtyW3VdXT1uW3VdO2Zvcig7by0tOylhW2krK109blt1KytdO3JldHVybiBhfWZ1bmN0aW9uIExyKG4sdCxyKXtmb3IodmFyIGU9LTEsdT1yLmxlbmd0aCxvPS0xLGk9dW8obi5sZW5ndGgtdSwwKSxmPS0xLGE9dC5sZW5ndGgsYz13dShpK2EpOysrbzxpOyljW29dPW5bb107XG5mb3IoaT1vOysrZjxhOyljW2krZl09dFtmXTtmb3IoOysrZTx1OyljW2krcltlXV09bltvKytdO3JldHVybiBjfWZ1bmN0aW9uICRyKG4sdCl7cmV0dXJuIGZ1bmN0aW9uKHIsZSx1KXt2YXIgbz10P3QoKTp7fTtpZihlPUhyKGUsdSwzKSxTbyhyKSl7dT0tMTtmb3IodmFyIGk9ci5sZW5ndGg7Kyt1PGk7KXt2YXIgZj1yW3VdO24obyxmLGUoZix1LHIpLHIpfX1lbHNlIG9yKHIsZnVuY3Rpb24odCxyLHUpe24obyx0LGUodCxyLHUpLHUpfSk7cmV0dXJuIG99fWZ1bmN0aW9uIEJyKG4pe3JldHVybiBmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGgscj1hcmd1bWVudHNbMF07aWYoMj50fHxudWxsPT1yKXJldHVybiByO2lmKDM8dCYmdWUoYXJndW1lbnRzWzFdLGFyZ3VtZW50c1syXSxhcmd1bWVudHNbM10pJiYodD0yKSwzPHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGFyZ3VtZW50c1t0LTJdKXZhciBlPU5yKGFyZ3VtZW50c1stLXQtMV0sYXJndW1lbnRzW3QtLV0sNSk7ZWxzZSAyPHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGFyZ3VtZW50c1t0LTFdJiYoZT1hcmd1bWVudHNbLS10XSk7XG5mb3IodmFyIHU9MDsrK3U8dDspe3ZhciBvPWFyZ3VtZW50c1t1XTtvJiZuKHIsbyxlKX1yZXR1cm4gcn19ZnVuY3Rpb24genIobix0KXtmdW5jdGlvbiByKCl7cmV0dXJuKHRoaXMgaW5zdGFuY2VvZiByP2U6bikuYXBwbHkodCxhcmd1bWVudHMpfXZhciBlPU1yKG4pO3JldHVybiByfWZ1bmN0aW9uIERyKG4pe3JldHVybiBmdW5jdGlvbih0KXt2YXIgcj0tMTt0PXB1KGZ1KHQpKTtmb3IodmFyIGU9dC5sZW5ndGgsdT1cIlwiOysrcjxlOyl1PW4odSx0W3JdLHIpO3JldHVybiB1fX1mdW5jdGlvbiBNcihuKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgdD13byhuLnByb3RvdHlwZSkscj1uLmFwcGx5KHQsYXJndW1lbnRzKTtyZXR1cm4gWGUocik/cjp0fX1mdW5jdGlvbiBxcihuLHQpe3JldHVybiBmdW5jdGlvbihyLGUsbyl7byYmdWUocixlLG8pJiYoZT1udWxsKTt2YXIgaT1IcigpLGY9bnVsbD09ZTtpZihpPT09dHImJmZ8fChmPWZhbHNlLGU9aShlLG8sMykpLGYpe2lmKGU9U28ociksZXx8IXR1KHIpKXJldHVybiBuKGU/cjpzZShyKSk7XG5lPXV9cmV0dXJuIFhyKHIsZSx0KX19ZnVuY3Rpb24gUHIobix0LHIsZSx1LG8saSxmLGEsYyl7ZnVuY3Rpb24gbCgpe2Zvcih2YXIgYj1hcmd1bWVudHMubGVuZ3RoLGo9YixrPXd1KGIpO2otLTspa1tqXT1hcmd1bWVudHNbal07aWYoZSYmKGs9RnIoayxlLHUpKSxvJiYoaz1McihrLG8saSkpLF98fHkpe3ZhciBqPWwucGxhY2Vob2xkZXIsRT1nKGssaiksYj1iLUUubGVuZ3RoO2lmKGI8Yyl7dmFyIE89Zj96dChmKTpudWxsLGI9dW8oYy1iLDApLEM9Xz9FOm51bGwsRT1fP251bGw6RSxUPV8/azpudWxsLGs9Xz9udWxsOms7cmV0dXJuIHR8PV8/UjpJLHQmPX4oXz9JOlIpLHZ8fCh0Jj1+KHh8QSkpLGs9UHIobix0LHIsVCxDLGssRSxPLGEsYiksay5wbGFjZWhvbGRlcj1qLGt9fWlmKGo9cD9yOnRoaXMsaCYmKG49alttXSksZilmb3IoTz1rLmxlbmd0aCxiPW9vKGYubGVuZ3RoLE8pLEM9enQoayk7Yi0tOylFPWZbYl0sa1tiXT1lZShFLE8pP0NbRV06dztyZXR1cm4gcyYmYTxrLmxlbmd0aCYmKGsubGVuZ3RoPWEpLCh0aGlzIGluc3RhbmNlb2YgbD9kfHxNcihuKTpuKS5hcHBseShqLGspXG59dmFyIHM9dCZDLHA9dCZ4LGg9dCZBLF89dCZrLHY9dCZqLHk9dCZFLGQ9IWgmJk1yKG4pLG09bjtyZXR1cm4gbH1mdW5jdGlvbiBLcihuLHQscil7cmV0dXJuIG49bi5sZW5ndGgsdD0rdCxuPHQmJnJvKHQpPyh0LT1uLHI9bnVsbD09cj9cIiBcIjpyK1wiXCIsbHUocixNdSh0L3IubGVuZ3RoKSkuc2xpY2UoMCx0KSk6XCJcIn1mdW5jdGlvbiBWcihuLHQscixlKXtmdW5jdGlvbiB1KCl7Zm9yKHZhciB0PS0xLGY9YXJndW1lbnRzLmxlbmd0aCxhPS0xLGM9ZS5sZW5ndGgsbD13dShmK2MpOysrYTxjOylsW2FdPWVbYV07Zm9yKDtmLS07KWxbYSsrXT1hcmd1bWVudHNbKyt0XTtyZXR1cm4odGhpcyBpbnN0YW5jZW9mIHU/aTpuKS5hcHBseShvP3I6dGhpcyxsKX12YXIgbz10JngsaT1NcihuKTtyZXR1cm4gdX1mdW5jdGlvbiBZcihuLHQscixlLHUsbyxpLGYpe3ZhciBhPXQmQTtpZighYSYmdHlwZW9mIG4hPVwiZnVuY3Rpb25cIil0aHJvdyBuZXcgT3UoJCk7dmFyIGM9ZT9lLmxlbmd0aDowO2lmKGN8fCh0Jj1+KFJ8SSksZT11PW51bGwpLGMtPXU/dS5sZW5ndGg6MCx0Jkkpe3ZhciBsPWUscz11O1xuZT11PW51bGx9dmFyIHA9IWEmJkFvKG4pO2lmKHI9W24sdCxyLGUsdSxsLHMsbyxpLGZdLHAmJnRydWUhPT1wKXtlPXJbMV0sdD1wWzFdLGY9ZXx0LG89Q3xPLHU9eHxBLGk9b3x1fGp8RTt2YXIgbD1lJkMmJiEodCZDKSxzPWUmTyYmISh0Jk8pLGg9KHM/cjpwKVs3XSxfPShsP3I6cClbOF07bz1mPj1vJiZmPD1pJiYoZTxPfHwoc3x8bCkmJmgubGVuZ3RoPD1fKSwoIShlPj1PJiZ0PnV8fGU+dSYmdD49Tyl8fG8pJiYodCZ4JiYoclsyXT1wWzJdLGZ8PWUmeD8wOmopLChlPXBbM10pJiYodT1yWzNdLHJbM109dT9Gcih1LGUscFs0XSk6enQoZSkscls0XT11P2coclszXSxCKTp6dChwWzRdKSksKGU9cFs1XSkmJih1PXJbNV0scls1XT11P0xyKHUsZSxwWzZdKTp6dChlKSxyWzZdPXU/ZyhyWzVdLEIpOnp0KHBbNl0pKSwoZT1wWzddKSYmKHJbN109enQoZSkpLHQmQyYmKHJbOF09bnVsbD09cls4XT9wWzhdOm9vKHJbOF0scFs4XSkpLG51bGw9PXJbOV0mJihyWzldPXBbOV0pLHJbMF09cFswXSxyWzFdPWYpLHQ9clsxXSxmPXJbOV1cbn1yZXR1cm4gcls5XT1udWxsPT1mP2E/MDpuLmxlbmd0aDp1byhmLWMsMCl8fDAsKHA/Ym86am8pKHQ9PXg/enIoclswXSxyWzJdKTp0IT1SJiZ0IT0oeHxSKXx8cls0XS5sZW5ndGg/UHIuYXBwbHkodyxyKTpWci5hcHBseSh3LHIpLHIpfWZ1bmN0aW9uIFpyKG4sdCxyLGUsdSxvLGkpe3ZhciBmPS0xLGE9bi5sZW5ndGgsYz10Lmxlbmd0aCxsPXRydWU7aWYoYSE9YyYmKCF1fHxjPD1hKSlyZXR1cm4gZmFsc2U7Zm9yKDtsJiYrK2Y8YTspe3ZhciBzPW5bZl0scD10W2ZdLGw9dztpZihlJiYobD11P2UocCxzLGYpOmUocyxwLGYpKSx0eXBlb2YgbD09XCJ1bmRlZmluZWRcIilpZih1KWZvcih2YXIgaD1jO2gtLSYmKHA9dFtoXSwhKGw9cyYmcz09PXB8fHIocyxwLGUsdSxvLGkpKSk7KTtlbHNlIGw9cyYmcz09PXB8fHIocyxwLGUsdSxvLGkpfXJldHVybiEhbH1mdW5jdGlvbiBHcihuLHQscil7c3dpdGNoKHIpe2Nhc2UgTTpjYXNlIHE6cmV0dXJuK249PSt0O2Nhc2UgUDpyZXR1cm4gbi5uYW1lPT10Lm5hbWUmJm4ubWVzc2FnZT09dC5tZXNzYWdlO1xuY2FzZSBWOnJldHVybiBuIT0rbj90IT0rdDowPT1uPzEvbj09MS90Om49PSt0O2Nhc2UgWjpjYXNlIEc6cmV0dXJuIG49PXQrXCJcIn1yZXR1cm4gZmFsc2V9ZnVuY3Rpb24gSnIobix0LHIsZSx1LG8saSl7dmFyIGY9Rm8obiksYT1mLmxlbmd0aCxjPUZvKHQpLmxlbmd0aDtpZihhIT1jJiYhdSlyZXR1cm4gZmFsc2U7Zm9yKHZhciBsLGM9LTE7KytjPGE7KXt2YXIgcz1mW2NdLHA9VXUuY2FsbCh0LHMpO2lmKHApe3ZhciBoPW5bc10sXz10W3NdLHA9dztlJiYocD11P2UoXyxoLHMpOmUoaCxfLHMpKSx0eXBlb2YgcD09XCJ1bmRlZmluZWRcIiYmKHA9aCYmaD09PV98fHIoaCxfLGUsdSxvLGkpKX1pZighcClyZXR1cm4gZmFsc2U7bHx8KGw9XCJjb25zdHJ1Y3RvclwiPT1zKX1yZXR1cm4gbHx8KHI9bi5jb25zdHJ1Y3RvcixlPXQuY29uc3RydWN0b3IsIShyIT1lJiZcImNvbnN0cnVjdG9yXCJpbiBuJiZcImNvbnN0cnVjdG9yXCJpbiB0KXx8dHlwZW9mIHI9PVwiZnVuY3Rpb25cIiYmciBpbnN0YW5jZW9mIHImJnR5cGVvZiBlPT1cImZ1bmN0aW9uXCImJmUgaW5zdGFuY2VvZiBlKT90cnVlOmZhbHNlXG59ZnVuY3Rpb24gWHIobix0LHIpe3ZhciBlPXI/c286bG8sdT1lLG89dTtyZXR1cm4gb3IobixmdW5jdGlvbihuLGksZil7aT10KG4saSxmKSwoKHI/aTx1Omk+dSl8fGk9PT1lJiZpPT09bykmJih1PWksbz1uKX0pLG99ZnVuY3Rpb24gSHIobix0LHIpe3ZhciBlPVd0LmNhbGxiYWNrfHxfdSxlPWU9PT1fdT90cjplO3JldHVybiByP2Uobix0LHIpOmV9ZnVuY3Rpb24gUXIobixyLGUpe3ZhciB1PVd0LmluZGV4T2Z8fGRlLHU9dT09PWRlP3Q6dTtyZXR1cm4gbj91KG4scixlKTp1fWZ1bmN0aW9uIG5lKG4pe3ZhciB0PW4ubGVuZ3RoLHI9bmV3IG4uY29uc3RydWN0b3IodCk7cmV0dXJuIHQmJlwic3RyaW5nXCI9PXR5cGVvZiBuWzBdJiZVdS5jYWxsKG4sXCJpbmRleFwiKSYmKHIuaW5kZXg9bi5pbmRleCxyLmlucHV0PW4uaW5wdXQpLHJ9ZnVuY3Rpb24gdGUobil7cmV0dXJuIG49bi5jb25zdHJ1Y3Rvcix0eXBlb2Ygbj09XCJmdW5jdGlvblwiJiZuIGluc3RhbmNlb2Ygbnx8KG49RXUpLG5ldyBuXG59ZnVuY3Rpb24gcmUobix0LHIpe3ZhciBlPW4uY29uc3RydWN0b3I7c3dpdGNoKHQpe2Nhc2UgSjpyZXR1cm4gVXIobik7Y2FzZSBNOmNhc2UgcTpyZXR1cm4gbmV3IGUoK24pO2Nhc2UgWDpjYXNlIEg6Y2FzZSBROmNhc2UgbnQ6Y2FzZSB0dDpjYXNlIHJ0OmNhc2UgZXQ6Y2FzZSB1dDpjYXNlIG90OnJldHVybiB0PW4uYnVmZmVyLG5ldyBlKHI/VXIodCk6dCxuLmJ5dGVPZmZzZXQsbi5sZW5ndGgpO2Nhc2UgVjpjYXNlIEc6cmV0dXJuIG5ldyBlKG4pO2Nhc2UgWjp2YXIgdT1uZXcgZShuLnNvdXJjZSx5dC5leGVjKG4pKTt1Lmxhc3RJbmRleD1uLmxhc3RJbmRleH1yZXR1cm4gdX1mdW5jdGlvbiBlZShuLHQpe3JldHVybiBuPStuLHQ9bnVsbD09dD92bzp0LC0xPG4mJjA9PW4lMSYmbjx0fWZ1bmN0aW9uIHVlKG4sdCxyKXtpZighWGUocikpcmV0dXJuIGZhbHNlO3ZhciBlPXR5cGVvZiB0O3JldHVyblwibnVtYmVyXCI9PWU/KGU9ci5sZW5ndGgsZT1vZShlKSYmZWUodCxlKSk6ZT1cInN0cmluZ1wiPT1lJiZ0IGluIHIsZSYmclt0XT09PW5cbn1mdW5jdGlvbiBvZShuKXtyZXR1cm4gdHlwZW9mIG49PVwibnVtYmVyXCImJi0xPG4mJjA9PW4lMSYmbjw9dm99ZnVuY3Rpb24gaWUobil7cmV0dXJuIG49PT1uJiYoMD09PW4/MDwxL246IVhlKG4pKX1mdW5jdGlvbiBmZShuLHQpe249cGUobik7Zm9yKHZhciByPS0xLGU9dC5sZW5ndGgsdT17fTsrK3I8ZTspe3ZhciBvPXRbcl07byBpbiBuJiYodVtvXT1uW29dKX1yZXR1cm4gdX1mdW5jdGlvbiBhZShuLHQpe3ZhciByPXt9O3JldHVybiBocihuLGZ1bmN0aW9uKG4sZSx1KXt0KG4sZSx1KSYmKHJbZV09bil9KSxyfWZ1bmN0aW9uIGNlKG4pe3ZhciB0O2lmKCFoKG4pfHxMdS5jYWxsKG4pIT1ZfHwhKFV1LmNhbGwobixcImNvbnN0cnVjdG9yXCIpfHwodD1uLmNvbnN0cnVjdG9yLHR5cGVvZiB0IT1cImZ1bmN0aW9uXCJ8fHQgaW5zdGFuY2VvZiB0KSkpcmV0dXJuIGZhbHNlO3ZhciByO3JldHVybiBocihuLGZ1bmN0aW9uKG4sdCl7cj10fSksdHlwZW9mIHI9PVwidW5kZWZpbmVkXCJ8fFV1LmNhbGwobixyKVxufWZ1bmN0aW9uIGxlKG4pe2Zvcih2YXIgdD1vdShuKSxyPXQubGVuZ3RoLGU9ciYmbi5sZW5ndGgsdT1XdC5zdXBwb3J0LHU9ZSYmb2UoZSkmJihTbyhuKXx8dS5ub25FbnVtQXJncyYmWWUobikpLG89LTEsaT1bXTsrK288cjspe3ZhciBmPXRbb107KHUmJmVlKGYsZSl8fFV1LmNhbGwobixmKSkmJmkucHVzaChmKX1yZXR1cm4gaX1mdW5jdGlvbiBzZShuKXtyZXR1cm4gbnVsbD09bj9bXTpvZShuLmxlbmd0aCk/WGUobik/bjpFdShuKTppdShuKX1mdW5jdGlvbiBwZShuKXtyZXR1cm4gWGUobik/bjpFdShuKX1mdW5jdGlvbiBoZShuKXtyZXR1cm4gbiBpbnN0YW5jZW9mIFV0P24uY2xvbmUoKTpuZXcgTnQobi5fX3dyYXBwZWRfXyxuLl9fY2hhaW5fXyx6dChuLl9fYWN0aW9uc19fKSl9ZnVuY3Rpb24gX2Uobix0LHIpe3JldHVybiBuJiZuLmxlbmd0aD8oKHI/dWUobix0LHIpOm51bGw9PXQpJiYodD0xKSxScihuLDA+dD8wOnQpKTpbXX1mdW5jdGlvbiBnZShuLHQscil7dmFyIGU9bj9uLmxlbmd0aDowO1xucmV0dXJuIGU/KChyP3VlKG4sdCxyKTpudWxsPT10KSYmKHQ9MSksdD1lLSgrdHx8MCksUnIobiwwLDA+dD8wOnQpKTpbXX1mdW5jdGlvbiB2ZShuLHQscil7dmFyIGU9LTEsdT1uP24ubGVuZ3RoOjA7Zm9yKHQ9SHIodCxyLDMpOysrZTx1OylpZih0KG5bZV0sZSxuKSlyZXR1cm4gZTtyZXR1cm4tMX1mdW5jdGlvbiB5ZShuKXtyZXR1cm4gbj9uWzBdOnd9ZnVuY3Rpb24gZGUobixyLGUpe3ZhciB1PW4/bi5sZW5ndGg6MDtpZighdSlyZXR1cm4tMTtpZih0eXBlb2YgZT09XCJudW1iZXJcIillPTA+ZT91byh1K2UsMCk6ZXx8MDtlbHNlIGlmKGUpcmV0dXJuIGU9U3IobixyKSxuPW5bZV0sKHI9PT1yP3I9PT1uOm4hPT1uKT9lOi0xO3JldHVybiB0KG4scixlKX1mdW5jdGlvbiBtZShuKXtyZXR1cm4gX2UobiwxKX1mdW5jdGlvbiB3ZShuLHIsZSx1KXtpZighbnx8IW4ubGVuZ3RoKXJldHVybltdO3R5cGVvZiByIT1cImJvb2xlYW5cIiYmbnVsbCE9ciYmKHU9ZSxlPXVlKG4scix1KT9udWxsOnIscj1mYWxzZSk7XG52YXIgbz1IcigpO2lmKChvIT09dHJ8fG51bGwhPWUpJiYoZT1vKGUsdSwzKSksciYmUXIoKT09dCl7cj1lO3ZhciBpO2U9LTEsdT1uLmxlbmd0aDtmb3IodmFyIG89LTEsZj1bXTsrK2U8dTspe3ZhciBhPW5bZV0sYz1yP3IoYSxlLG4pOmE7ZSYmaT09PWN8fChpPWMsZlsrK29dPWEpfW49Zn1lbHNlIG49T3IobixlKTtyZXR1cm4gbn1mdW5jdGlvbiBiZShuKXtmb3IodmFyIHQ9LTEscj0obiYmbi5sZW5ndGgmJlZ0KEt0KG4sTnUpKSk+Pj4wLGU9d3Uocik7Kyt0PHI7KWVbdF09S3Qobixqcih0KSk7cmV0dXJuIGV9ZnVuY3Rpb24geGUobix0KXt2YXIgcj0tMSxlPW4/bi5sZW5ndGg6MCx1PXt9O2ZvcighZXx8dHx8U28oblswXSl8fCh0PVtdKTsrK3I8ZTspe3ZhciBvPW5bcl07dD91W29dPXRbcl06byYmKHVbb1swXV09b1sxXSl9cmV0dXJuIHV9ZnVuY3Rpb24gQWUobil7cmV0dXJuIG49V3Qobiksbi5fX2NoYWluX189dHJ1ZSxufWZ1bmN0aW9uIGplKG4sdCxyKXtyZXR1cm4gdC5jYWxsKHIsbilcbn1mdW5jdGlvbiBrZShuLHQscil7dmFyIGU9bj9uLmxlbmd0aDowO3JldHVybiBvZShlKXx8KG49aXUobiksZT1uLmxlbmd0aCksZT8ocj10eXBlb2Ygcj09XCJudW1iZXJcIj8wPnI/dW8oZStyLDApOnJ8fDA6MCx0eXBlb2Ygbj09XCJzdHJpbmdcInx8IVNvKG4pJiZ0dShuKT9yPGUmJi0xPG4uaW5kZXhPZih0LHIpOi0xPFFyKG4sdCxyKSk6ZmFsc2V9ZnVuY3Rpb24gRWUobix0LHIpe3ZhciBlPVNvKG4pP3F0OmZyO3JldHVybih0eXBlb2YgdCE9XCJmdW5jdGlvblwifHx0eXBlb2YgciE9XCJ1bmRlZmluZWRcIikmJih0PUhyKHQsciwzKSksZShuLHQpfWZ1bmN0aW9uIFJlKG4sdCxyKXt2YXIgZT1TbyhuKT9QdDphcjtyZXR1cm4gdD1Icih0LHIsMyksZShuLHQpfWZ1bmN0aW9uIEllKG4sdCxyKXtyZXR1cm4gU28obik/KHQ9dmUobix0LHIpLC0xPHQ/blt0XTp3KToodD1Icih0LHIsMyksY3Iobix0LG9yKSl9ZnVuY3Rpb24gT2Uobix0LHIpe3JldHVybiB0eXBlb2YgdD09XCJmdW5jdGlvblwiJiZ0eXBlb2Ygcj09XCJ1bmRlZmluZWRcIiYmU28obik/TXQobix0KTpvcihuLE5yKHQsciwzKSlcbn1mdW5jdGlvbiBDZShuLHQscil7aWYodHlwZW9mIHQ9PVwiZnVuY3Rpb25cIiYmdHlwZW9mIHI9PVwidW5kZWZpbmVkXCImJlNvKG4pKWZvcihyPW4ubGVuZ3RoO3ItLSYmZmFsc2UhPT10KG5bcl0scixuKTspO2Vsc2Ugbj1pcihuLE5yKHQsciwzKSk7cmV0dXJuIG59ZnVuY3Rpb24gVGUobix0LHIpe3ZhciBlPVNvKG4pP0t0OndyO3JldHVybiB0PUhyKHQsciwzKSxlKG4sdCl9ZnVuY3Rpb24gU2Uobix0LHIsZSl7cmV0dXJuKFNvKG4pP1l0OkVyKShuLEhyKHQsZSw0KSxyLDM+YXJndW1lbnRzLmxlbmd0aCxvcil9ZnVuY3Rpb24gV2Uobix0LHIsZSl7cmV0dXJuKFNvKG4pP1p0OkVyKShuLEhyKHQsZSw0KSxyLDM+YXJndW1lbnRzLmxlbmd0aCxpcil9ZnVuY3Rpb24gTmUobix0LHIpe3JldHVybihyP3VlKG4sdCxyKTpudWxsPT10KT8obj1zZShuKSx0PW4ubGVuZ3RoLDA8dD9uW2tyKDAsdC0xKV06dyk6KG49VWUobiksbi5sZW5ndGg9b28oMD50PzA6K3R8fDAsbi5sZW5ndGgpLG4pfWZ1bmN0aW9uIFVlKG4pe249c2Uobik7XG5mb3IodmFyIHQ9LTEscj1uLmxlbmd0aCxlPXd1KHIpOysrdDxyOyl7dmFyIHU9a3IoMCx0KTt0IT11JiYoZVt0XT1lW3VdKSxlW3VdPW5bdF19cmV0dXJuIGV9ZnVuY3Rpb24gRmUobix0LHIpe3ZhciBlPVNvKG4pP0d0OklyO3JldHVybih0eXBlb2YgdCE9XCJmdW5jdGlvblwifHx0eXBlb2YgciE9XCJ1bmRlZmluZWRcIikmJih0PUhyKHQsciwzKSksZShuLHQpfWZ1bmN0aW9uIExlKG4sdCl7dmFyIHI7aWYodHlwZW9mIHQhPVwiZnVuY3Rpb25cIil7aWYodHlwZW9mIG4hPVwiZnVuY3Rpb25cIil0aHJvdyBuZXcgT3UoJCk7dmFyIGU9bjtuPXQsdD1lfXJldHVybiBmdW5jdGlvbigpe3JldHVybiAwPC0tbj9yPXQuYXBwbHkodGhpcyxhcmd1bWVudHMpOnQ9bnVsbCxyfX1mdW5jdGlvbiAkZShuLHQpe3ZhciByPXg7aWYoMjxhcmd1bWVudHMubGVuZ3RoKXZhciBlPVJyKGFyZ3VtZW50cywyKSx1PWcoZSwkZS5wbGFjZWhvbGRlcikscj1yfFI7cmV0dXJuIFlyKG4scix0LGUsdSl9ZnVuY3Rpb24gQmUobix0KXt2YXIgcj14fEE7XG5pZigyPGFyZ3VtZW50cy5sZW5ndGgpdmFyIGU9UnIoYXJndW1lbnRzLDIpLHU9ZyhlLEJlLnBsYWNlaG9sZGVyKSxyPXJ8UjtyZXR1cm4gWXIodCxyLG4sZSx1KX1mdW5jdGlvbiB6ZShuLHQscil7cmV0dXJuIHImJnVlKG4sdCxyKSYmKHQ9bnVsbCksbj1ZcihuLGssbnVsbCxudWxsLG51bGwsbnVsbCxudWxsLHQpLG4ucGxhY2Vob2xkZXI9emUucGxhY2Vob2xkZXIsbn1mdW5jdGlvbiBEZShuLHQscil7cmV0dXJuIHImJnVlKG4sdCxyKSYmKHQ9bnVsbCksbj1ZcihuLEUsbnVsbCxudWxsLG51bGwsbnVsbCxudWxsLHQpLG4ucGxhY2Vob2xkZXI9RGUucGxhY2Vob2xkZXIsbn1mdW5jdGlvbiBNZShuLHQscil7ZnVuY3Rpb24gZSgpe3ZhciByPXQtKFRvKCktYyk7MD49cnx8cj50PyhmJiZxdShmKSxyPXAsZj1zPXA9dyxyJiYoaD1UbygpLGE9bi5hcHBseShsLGkpLHN8fGZ8fChpPWw9bnVsbCkpKTpzPUd1KGUscil9ZnVuY3Rpb24gdSgpe3MmJnF1KHMpLGY9cz1wPXcsKGd8fF8hPT10KSYmKGg9VG8oKSxhPW4uYXBwbHkobCxpKSxzfHxmfHwoaT1sPW51bGwpKVxufWZ1bmN0aW9uIG8oKXtpZihpPWFyZ3VtZW50cyxjPVRvKCksbD10aGlzLHA9ZyYmKHN8fCF2KSxmYWxzZT09PV8pdmFyIHI9diYmIXM7ZWxzZXtmfHx2fHwoaD1jKTt2YXIgbz1fLShjLWgpLHk9MD49b3x8bz5fO3k/KGYmJihmPXF1KGYpKSxoPWMsYT1uLmFwcGx5KGwsaSkpOmZ8fChmPUd1KHUsbykpfXJldHVybiB5JiZzP3M9cXUocyk6c3x8dD09PV98fChzPUd1KGUsdCkpLHImJih5PXRydWUsYT1uLmFwcGx5KGwsaSkpLCF5fHxzfHxmfHwoaT1sPW51bGwpLGF9dmFyIGksZixhLGMsbCxzLHAsaD0wLF89ZmFsc2UsZz10cnVlO2lmKHR5cGVvZiBuIT1cImZ1bmN0aW9uXCIpdGhyb3cgbmV3IE91KCQpO2lmKHQ9MD50PzA6dCx0cnVlPT09cil2YXIgdj10cnVlLGc9ZmFsc2U7ZWxzZSBYZShyKSYmKHY9ci5sZWFkaW5nLF89XCJtYXhXYWl0XCJpbiByJiZ1bygrci5tYXhXYWl0fHwwLHQpLGc9XCJ0cmFpbGluZ1wiaW4gcj9yLnRyYWlsaW5nOmcpO3JldHVybiBvLmNhbmNlbD1mdW5jdGlvbigpe3MmJnF1KHMpLGYmJnF1KGYpLGY9cz1wPXdcbn0sb31mdW5jdGlvbiBxZSgpe3ZhciBuPWFyZ3VtZW50cyx0PW4ubGVuZ3RoLTE7aWYoMD50KXJldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gbn07aWYoIXF0KG4sSmUpKXRocm93IG5ldyBPdSgkKTtyZXR1cm4gZnVuY3Rpb24oKXtmb3IodmFyIHI9dCxlPW5bcl0uYXBwbHkodGhpcyxhcmd1bWVudHMpO3ItLTspZT1uW3JdLmNhbGwodGhpcyxlKTtyZXR1cm4gZX19ZnVuY3Rpb24gUGUobix0KXtmdW5jdGlvbiByKCl7dmFyIGU9ci5jYWNoZSx1PXQ/dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk6YXJndW1lbnRzWzBdO2lmKGUuaGFzKHUpKXJldHVybiBlLmdldCh1KTt2YXIgbz1uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gZS5zZXQodSxvKSxvfWlmKHR5cGVvZiBuIT1cImZ1bmN0aW9uXCJ8fHQmJnR5cGVvZiB0IT1cImZ1bmN0aW9uXCIpdGhyb3cgbmV3IE91KCQpO3JldHVybiByLmNhY2hlPW5ldyBQZS5DYWNoZSxyfWZ1bmN0aW9uIEtlKG4pe3ZhciB0PVJyKGFyZ3VtZW50cywxKSxyPWcodCxLZS5wbGFjZWhvbGRlcik7XG5yZXR1cm4gWXIobixSLG51bGwsdCxyKX1mdW5jdGlvbiBWZShuKXt2YXIgdD1Scihhcmd1bWVudHMsMSkscj1nKHQsVmUucGxhY2Vob2xkZXIpO3JldHVybiBZcihuLEksbnVsbCx0LHIpfWZ1bmN0aW9uIFllKG4pe3JldHVybiBvZShoKG4pP24ubGVuZ3RoOncpJiZMdS5jYWxsKG4pPT16fHxmYWxzZX1mdW5jdGlvbiBaZShuKXtyZXR1cm4gbiYmMT09PW4ubm9kZVR5cGUmJmgobikmJi0xPEx1LmNhbGwobikuaW5kZXhPZihcIkVsZW1lbnRcIil8fGZhbHNlfWZ1bmN0aW9uIEdlKG4pe3JldHVybiBoKG4pJiZ0eXBlb2Ygbi5tZXNzYWdlPT1cInN0cmluZ1wiJiZMdS5jYWxsKG4pPT1QfHxmYWxzZX1mdW5jdGlvbiBKZShuKXtyZXR1cm4gdHlwZW9mIG49PVwiZnVuY3Rpb25cInx8ZmFsc2V9ZnVuY3Rpb24gWGUobil7dmFyIHQ9dHlwZW9mIG47cmV0dXJuXCJmdW5jdGlvblwiPT10fHxuJiZcIm9iamVjdFwiPT10fHxmYWxzZX1mdW5jdGlvbiBIZShuKXtyZXR1cm4gbnVsbD09bj9mYWxzZTpMdS5jYWxsKG4pPT1LP0J1LnRlc3QoV3UuY2FsbChuKSk6aChuKSYmd3QudGVzdChuKXx8ZmFsc2Vcbn1mdW5jdGlvbiBRZShuKXtyZXR1cm4gdHlwZW9mIG49PVwibnVtYmVyXCJ8fGgobikmJkx1LmNhbGwobik9PVZ8fGZhbHNlfWZ1bmN0aW9uIG51KG4pe3JldHVybiBoKG4pJiZMdS5jYWxsKG4pPT1afHxmYWxzZX1mdW5jdGlvbiB0dShuKXtyZXR1cm4gdHlwZW9mIG49PVwic3RyaW5nXCJ8fGgobikmJkx1LmNhbGwobik9PUd8fGZhbHNlfWZ1bmN0aW9uIHJ1KG4pe3JldHVybiBoKG4pJiZvZShuLmxlbmd0aCkmJkN0W0x1LmNhbGwobildfHxmYWxzZX1mdW5jdGlvbiBldShuKXtyZXR1cm4gbnIobixvdShuKSl9ZnVuY3Rpb24gdXUobil7cmV0dXJuIHZyKG4sb3UobikpfWZ1bmN0aW9uIG91KG4pe2lmKG51bGw9PW4pcmV0dXJuW107WGUobil8fChuPUV1KG4pKTtmb3IodmFyIHQ9bi5sZW5ndGgsdD10JiZvZSh0KSYmKFNvKG4pfHxtby5ub25FbnVtQXJncyYmWWUobikpJiZ0fHwwLHI9bi5jb25zdHJ1Y3RvcixlPS0xLHI9dHlwZW9mIHI9PVwiZnVuY3Rpb25cIiYmci5wcm90b3R5cGU9PT1uLHU9d3UodCksbz0wPHQ7KytlPHQ7KXVbZV09ZStcIlwiO1xuZm9yKHZhciBpIGluIG4pbyYmZWUoaSx0KXx8XCJjb25zdHJ1Y3RvclwiPT1pJiYocnx8IVV1LmNhbGwobixpKSl8fHUucHVzaChpKTtyZXR1cm4gdX1mdW5jdGlvbiBpdShuKXtyZXR1cm4gQ3IobixGbyhuKSl9ZnVuY3Rpb24gZnUobil7cmV0dXJuKG49ZShuKSkmJm4ucmVwbGFjZShidCxjKX1mdW5jdGlvbiBhdShuKXtyZXR1cm4obj1lKG4pKSYmanQudGVzdChuKT9uLnJlcGxhY2UoQXQsXCJcXFxcJCZcIik6bn1mdW5jdGlvbiBjdShuLHQscil7cmV0dXJuIHImJnVlKG4sdCxyKSYmKHQ9MCksYW8obix0KX1mdW5jdGlvbiBsdShuLHQpe3ZhciByPVwiXCI7aWYobj1lKG4pLHQ9K3QsMT50fHwhbnx8IXJvKHQpKXJldHVybiByO2RvIHQlMiYmKHIrPW4pLHQ9UHUodC8yKSxuKz1uO3doaWxlKHQpO3JldHVybiByfWZ1bmN0aW9uIHN1KG4sdCxyKXt2YXIgdT1uO3JldHVybihuPWUobikpPyhyP3VlKHUsdCxyKTpudWxsPT10KT9uLnNsaWNlKHYobikseShuKSsxKToodCs9XCJcIixuLnNsaWNlKG8obix0KSxpKG4sdCkrMSkpOm5cbn1mdW5jdGlvbiBwdShuLHQscil7cmV0dXJuIHImJnVlKG4sdCxyKSYmKHQ9bnVsbCksbj1lKG4pLG4ubWF0Y2godHx8UnQpfHxbXX1mdW5jdGlvbiBodShuKXt0cnl7cmV0dXJuIG4uYXBwbHkodyxScihhcmd1bWVudHMsMSkpfWNhdGNoKHQpe3JldHVybiBHZSh0KT90Om5ldyB4dSh0KX19ZnVuY3Rpb24gX3Uobix0LHIpe3JldHVybiByJiZ1ZShuLHQscikmJih0PW51bGwpLGgobik/eXUobik6dHIobix0KX1mdW5jdGlvbiBndShuKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbn19ZnVuY3Rpb24gdnUobil7cmV0dXJuIG59ZnVuY3Rpb24geXUobil7cmV0dXJuIGJyKHJyKG4sdHJ1ZSkpfWZ1bmN0aW9uIGR1KG4sdCxyKXtpZihudWxsPT1yKXt2YXIgZT1YZSh0KSx1PWUmJkZvKHQpOygodT11JiZ1Lmxlbmd0aCYmdnIodCx1KSk/dS5sZW5ndGg6ZSl8fCh1PWZhbHNlLHI9dCx0PW4sbj10aGlzKX11fHwodT12cih0LEZvKHQpKSk7dmFyIG89dHJ1ZSxlPS0xLGk9SmUobiksZj11Lmxlbmd0aDtcbiExPT09cj9vPWZhbHNlOlhlKHIpJiZcImNoYWluXCJpbiByJiYobz1yLmNoYWluKTtmb3IoOysrZTxmOyl7cj11W2VdO3ZhciBhPXRbcl07bltyXT1hLGkmJihuLnByb3RvdHlwZVtyXT1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgcj10aGlzLl9fY2hhaW5fXztpZihvfHxyKXt2YXIgZT1uKHRoaXMuX193cmFwcGVkX18pO3JldHVybihlLl9fYWN0aW9uc19fPXp0KHRoaXMuX19hY3Rpb25zX18pKS5wdXNoKHtmdW5jOnQsYXJnczphcmd1bWVudHMsdGhpc0FyZzpufSksZS5fX2NoYWluX189cixlfXJldHVybiByPVt0aGlzLnZhbHVlKCldLFZ1LmFwcGx5KHIsYXJndW1lbnRzKSx0LmFwcGx5KG4scil9fShhKSl9cmV0dXJuIG59ZnVuY3Rpb24gbXUoKXt9Xz1fP0R0LmRlZmF1bHRzKCR0Lk9iamVjdCgpLF8sRHQucGljaygkdCxPdCkpOiR0O3ZhciB3dT1fLkFycmF5LGJ1PV8uRGF0ZSx4dT1fLkVycm9yLEF1PV8uRnVuY3Rpb24sanU9Xy5NYXRoLGt1PV8uTnVtYmVyLEV1PV8uT2JqZWN0LFJ1PV8uUmVnRXhwLEl1PV8uU3RyaW5nLE91PV8uVHlwZUVycm9yLEN1PXd1LnByb3RvdHlwZSxUdT1FdS5wcm90b3R5cGUsU3U9KFN1PV8ud2luZG93KSYmU3UuZG9jdW1lbnQsV3U9QXUucHJvdG90eXBlLnRvU3RyaW5nLE51PWpyKFwibGVuZ3RoXCIpLFV1PVR1Lmhhc093blByb3BlcnR5LEZ1PTAsTHU9VHUudG9TdHJpbmcsJHU9Xy5fLEJ1PVJ1KFwiXlwiK2F1KEx1KS5yZXBsYWNlKC90b1N0cmluZ3woZnVuY3Rpb24pLio/KD89XFxcXFxcKCl8IGZvciAuKz8oPz1cXFxcXFxdKS9nLFwiJDEuKj9cIikrXCIkXCIpLHp1PUhlKHp1PV8uQXJyYXlCdWZmZXIpJiZ6dSxEdT1IZShEdT16dSYmbmV3IHp1KDApLnNsaWNlKSYmRHUsTXU9anUuY2VpbCxxdT1fLmNsZWFyVGltZW91dCxQdT1qdS5mbG9vcixLdT1IZShLdT1FdS5nZXRQcm90b3R5cGVPZikmJkt1LFZ1PUN1LnB1c2gsWXU9VHUucHJvcGVydHlJc0VudW1lcmFibGUsWnU9SGUoWnU9Xy5TZXQpJiZadSxHdT1fLnNldFRpbWVvdXQsSnU9Q3Uuc3BsaWNlLFh1PUhlKFh1PV8uVWludDhBcnJheSkmJlh1LEh1PUhlKEh1PV8uV2Vha01hcCkmJkh1LFF1PWZ1bmN0aW9uKCl7dHJ5e3ZhciBuPUhlKG49Xy5GbG9hdDY0QXJyYXkpJiZuLHQ9bmV3IG4obmV3IHp1KDEwKSwwLDEpJiZuXG59Y2F0Y2gocil7fXJldHVybiB0fSgpLG5vPUhlKG5vPXd1LmlzQXJyYXkpJiZubyx0bz1IZSh0bz1FdS5jcmVhdGUpJiZ0byxybz1fLmlzRmluaXRlLGVvPUhlKGVvPUV1LmtleXMpJiZlbyx1bz1qdS5tYXgsb289anUubWluLGlvPUhlKGlvPWJ1Lm5vdykmJmlvLGZvPUhlKGZvPWt1LmlzRmluaXRlKSYmZm8sYW89Xy5wYXJzZUludCxjbz1qdS5yYW5kb20sbG89a3UuTkVHQVRJVkVfSU5GSU5JVFksc289a3UuUE9TSVRJVkVfSU5GSU5JVFkscG89anUucG93KDIsMzIpLTEsaG89cG8tMSxfbz1wbz4+PjEsZ289UXU/UXUuQllURVNfUEVSX0VMRU1FTlQ6MCx2bz1qdS5wb3coMiw1MyktMSx5bz1IdSYmbmV3IEh1LG1vPVd0LnN1cHBvcnQ9e307IWZ1bmN0aW9uKG4pe21vLmZ1bmNEZWNvbXA9IUhlKF8uV2luUlRFcnJvcikmJmt0LnRlc3QobSksbW8uZnVuY05hbWVzPXR5cGVvZiBBdS5uYW1lPT1cInN0cmluZ1wiO3RyeXttby5kb209MTE9PT1TdS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkubm9kZVR5cGVcbn1jYXRjaCh0KXttby5kb209ZmFsc2V9dHJ5e21vLm5vbkVudW1BcmdzPSFZdS5jYWxsKGFyZ3VtZW50cywxKX1jYXRjaChyKXttby5ub25FbnVtQXJncz10cnVlfX0oMCwwKSxXdC50ZW1wbGF0ZVNldHRpbmdzPXtlc2NhcGU6aHQsZXZhbHVhdGU6X3QsaW50ZXJwb2xhdGU6Z3QsdmFyaWFibGU6XCJcIixpbXBvcnRzOntfOld0fX07dmFyIHdvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbigpe31yZXR1cm4gZnVuY3Rpb24odCl7aWYoWGUodCkpe24ucHJvdG90eXBlPXQ7dmFyIHI9bmV3IG47bi5wcm90b3R5cGU9bnVsbH1yZXR1cm4gcnx8Xy5PYmplY3QoKX19KCksYm89eW8/ZnVuY3Rpb24obix0KXtyZXR1cm4geW8uc2V0KG4sdCksbn06dnU7RHV8fChVcj16dSYmWHU/ZnVuY3Rpb24obil7dmFyIHQ9bi5ieXRlTGVuZ3RoLHI9UXU/UHUodC9nbyk6MCxlPXIqZ28sdT1uZXcgenUodCk7aWYocil7dmFyIG89bmV3IFF1KHUsMCxyKTtvLnNldChuZXcgUXUobiwwLHIpKX1yZXR1cm4gdCE9ZSYmKG89bmV3IFh1KHUsZSksby5zZXQobmV3IFh1KG4sZSkpKSx1XG59Omd1KG51bGwpKTt2YXIgeG89dG8mJlp1P2Z1bmN0aW9uKG4pe3JldHVybiBuZXcgTHQobil9Omd1KG51bGwpLEFvPXlvP2Z1bmN0aW9uKG4pe3JldHVybiB5by5nZXQobil9Om11LGpvPWZ1bmN0aW9uKCl7dmFyIG49MCx0PTA7cmV0dXJuIGZ1bmN0aW9uKHIsZSl7dmFyIHU9VG8oKSxvPU4tKHUtdCk7aWYodD11LDA8byl7aWYoKytuPj1XKXJldHVybiByfWVsc2Ugbj0wO3JldHVybiBibyhyLGUpfX0oKSxrbz0kcihmdW5jdGlvbihuLHQscil7VXUuY2FsbChuLHIpPysrbltyXTpuW3JdPTF9KSxFbz0kcihmdW5jdGlvbihuLHQscil7VXUuY2FsbChuLHIpP25bcl0ucHVzaCh0KTpuW3JdPVt0XX0pLFJvPSRyKGZ1bmN0aW9uKG4sdCxyKXtuW3JdPXR9KSxJbz1xcihWdCksT289cXIoZnVuY3Rpb24obil7Zm9yKHZhciB0PS0xLHI9bi5sZW5ndGgsZT1zbzsrK3Q8cjspe3ZhciB1PW5bdF07dTxlJiYoZT11KX1yZXR1cm4gZX0sdHJ1ZSksQ289JHIoZnVuY3Rpb24obix0LHIpe25bcj8wOjFdLnB1c2godClcbn0sZnVuY3Rpb24oKXtyZXR1cm5bW10sW11dfSksVG89aW98fGZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBidSkuZ2V0VGltZSgpfSxTbz1ub3x8ZnVuY3Rpb24obil7cmV0dXJuIGgobikmJm9lKG4ubGVuZ3RoKSYmTHUuY2FsbChuKT09RHx8ZmFsc2V9O21vLmRvbXx8KFplPWZ1bmN0aW9uKG4pe3JldHVybiBuJiYxPT09bi5ub2RlVHlwZSYmaChuKSYmIU5vKG4pfHxmYWxzZX0pO3ZhciBXbz1mb3x8ZnVuY3Rpb24obil7cmV0dXJuIHR5cGVvZiBuPT1cIm51bWJlclwiJiZybyhuKX07KEplKC94Lyl8fFh1JiYhSmUoWHUpKSYmKEplPWZ1bmN0aW9uKG4pe3JldHVybiBMdS5jYWxsKG4pPT1LfSk7dmFyIE5vPUt1P2Z1bmN0aW9uKG4pe2lmKCFufHxMdS5jYWxsKG4pIT1ZKXJldHVybiBmYWxzZTt2YXIgdD1uLnZhbHVlT2Yscj1IZSh0KSYmKHI9S3UodCkpJiZLdShyKTtyZXR1cm4gcj9uPT1yfHxLdShuKT09cjpjZShuKX06Y2UsVW89QnIoSHQpLEZvPWVvP2Z1bmN0aW9uKG4pe2lmKG4pdmFyIHQ9bi5jb25zdHJ1Y3RvcixyPW4ubGVuZ3RoO1xucmV0dXJuIHR5cGVvZiB0PT1cImZ1bmN0aW9uXCImJnQucHJvdG90eXBlPT09bnx8dHlwZW9mIG4hPVwiZnVuY3Rpb25cIiYmciYmb2Uocik/bGUobik6WGUobik/ZW8obik6W119OmxlLExvPUJyKEFyKSwkbz1EcihmdW5jdGlvbihuLHQscil7cmV0dXJuIHQ9dC50b0xvd2VyQ2FzZSgpLG4rKHI/dC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpOnQpfSksQm89RHIoZnVuY3Rpb24obix0LHIpe3JldHVybiBuKyhyP1wiLVwiOlwiXCIpK3QudG9Mb3dlckNhc2UoKX0pOzghPWFvKEl0K1wiMDhcIikmJihjdT1mdW5jdGlvbihuLHQscil7cmV0dXJuKHI/dWUobix0LHIpOm51bGw9PXQpP3Q9MDp0JiYodD0rdCksbj1zdShuKSxhbyhuLHR8fChtdC50ZXN0KG4pPzE2OjEwKSl9KTt2YXIgem89RHIoZnVuY3Rpb24obix0LHIpe3JldHVybiBuKyhyP1wiX1wiOlwiXCIpK3QudG9Mb3dlckNhc2UoKX0pLERvPURyKGZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gbisocj9cIiBcIjpcIlwiKSsodC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpKVxufSk7cmV0dXJuIE50LnByb3RvdHlwZT13byhXdC5wcm90b3R5cGUpLFV0LnByb3RvdHlwZT13byhOdC5wcm90b3R5cGUpLFV0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1VdCxGdC5wcm90b3R5cGVbXCJkZWxldGVcIl09ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMuaGFzKG4pJiZkZWxldGUgdGhpcy5fX2RhdGFfX1tuXX0sRnQucHJvdG90eXBlLmdldD1mdW5jdGlvbihuKXtyZXR1cm5cIl9fcHJvdG9fX1wiPT1uP3c6dGhpcy5fX2RhdGFfX1tuXX0sRnQucHJvdG90eXBlLmhhcz1mdW5jdGlvbihuKXtyZXR1cm5cIl9fcHJvdG9fX1wiIT1uJiZVdS5jYWxsKHRoaXMuX19kYXRhX18sbil9LEZ0LnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24obix0KXtyZXR1cm5cIl9fcHJvdG9fX1wiIT1uJiYodGhpcy5fX2RhdGFfX1tuXT10KSx0aGlzfSxMdC5wcm90b3R5cGUucHVzaD1mdW5jdGlvbihuKXt2YXIgdD10aGlzLmRhdGE7dHlwZW9mIG49PVwic3RyaW5nXCJ8fFhlKG4pP3Quc2V0LmFkZChuKTp0Lmhhc2hbbl09dHJ1ZVxufSxQZS5DYWNoZT1GdCxXdC5hZnRlcj1mdW5jdGlvbihuLHQpe2lmKHR5cGVvZiB0IT1cImZ1bmN0aW9uXCIpe2lmKHR5cGVvZiBuIT1cImZ1bmN0aW9uXCIpdGhyb3cgbmV3IE91KCQpO3ZhciByPW47bj10LHQ9cn1yZXR1cm4gbj1ybyhuPStuKT9uOjAsZnVuY3Rpb24oKXtyZXR1cm4gMT4tLW4/dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dm9pZCAwfX0sV3QuYXJ5PWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gciYmdWUobix0LHIpJiYodD1udWxsKSx0PW4mJm51bGw9PXQ/bi5sZW5ndGg6dW8oK3R8fDAsMCksWXIobixDLG51bGwsbnVsbCxudWxsLG51bGwsdCl9LFd0LmFzc2lnbj1VbyxXdC5hdD1mdW5jdGlvbihuKXtyZXR1cm4gb2Uobj9uLmxlbmd0aDowKSYmKG49c2UobikpLFF0KG4sbHIoYXJndW1lbnRzLGZhbHNlLGZhbHNlLDEpKX0sV3QuYmVmb3JlPUxlLFd0LmJpbmQ9JGUsV3QuYmluZEFsbD1mdW5jdGlvbihuKXtmb3IodmFyIHQ9bixyPTE8YXJndW1lbnRzLmxlbmd0aD9scihhcmd1bWVudHMsZmFsc2UsZmFsc2UsMSk6dXUobiksZT0tMSx1PXIubGVuZ3RoOysrZTx1Oyl7dmFyIG89cltlXTtcbnRbb109WXIodFtvXSx4LHQpfXJldHVybiB0fSxXdC5iaW5kS2V5PUJlLFd0LmNhbGxiYWNrPV91LFd0LmNoYWluPUFlLFd0LmNodW5rPWZ1bmN0aW9uKG4sdCxyKXt0PShyP3VlKG4sdCxyKTpudWxsPT10KT8xOnVvKCt0fHwxLDEpLHI9MDtmb3IodmFyIGU9bj9uLmxlbmd0aDowLHU9LTEsbz13dShNdShlL3QpKTtyPGU7KW9bKyt1XT1ScihuLHIscis9dCk7cmV0dXJuIG99LFd0LmNvbXBhY3Q9ZnVuY3Rpb24obil7Zm9yKHZhciB0PS0xLHI9bj9uLmxlbmd0aDowLGU9LTEsdT1bXTsrK3Q8cjspe3ZhciBvPW5bdF07byYmKHVbKytlXT1vKX1yZXR1cm4gdX0sV3QuY29uc3RhbnQ9Z3UsV3QuY291bnRCeT1rbyxXdC5jcmVhdGU9ZnVuY3Rpb24obix0LHIpe3ZhciBlPXdvKG4pO3JldHVybiByJiZ1ZShuLHQscikmJih0PW51bGwpLHQ/bnIodCxlLEZvKHQpKTplfSxXdC5jdXJyeT16ZSxXdC5jdXJyeVJpZ2h0PURlLFd0LmRlYm91bmNlPU1lLFd0LmRlZmF1bHRzPWZ1bmN0aW9uKG4pe2lmKG51bGw9PW4pcmV0dXJuIG47XG52YXIgdD16dChhcmd1bWVudHMpO3JldHVybiB0LnB1c2goSnQpLFVvLmFwcGx5KHcsdCl9LFd0LmRlZmVyPWZ1bmN0aW9uKG4pe3JldHVybiBlcihuLDEsYXJndW1lbnRzLDEpfSxXdC5kZWxheT1mdW5jdGlvbihuLHQpe3JldHVybiBlcihuLHQsYXJndW1lbnRzLDIpfSxXdC5kaWZmZXJlbmNlPWZ1bmN0aW9uKCl7Zm9yKHZhciBuPS0xLHQ9YXJndW1lbnRzLmxlbmd0aDsrK248dDspe3ZhciByPWFyZ3VtZW50c1tuXTtpZihTbyhyKXx8WWUocikpYnJlYWt9cmV0dXJuIHVyKHIsbHIoYXJndW1lbnRzLGZhbHNlLHRydWUsKytuKSl9LFd0LmRyb3A9X2UsV3QuZHJvcFJpZ2h0PWdlLFd0LmRyb3BSaWdodFdoaWxlPWZ1bmN0aW9uKG4sdCxyKXt2YXIgZT1uP24ubGVuZ3RoOjA7aWYoIWUpcmV0dXJuW107Zm9yKHQ9SHIodCxyLDMpO2UtLSYmdChuW2VdLGUsbik7KTtyZXR1cm4gUnIobiwwLGUrMSl9LFd0LmRyb3BXaGlsZT1mdW5jdGlvbihuLHQscil7dmFyIGU9bj9uLmxlbmd0aDowO2lmKCFlKXJldHVybltdO1xudmFyIHU9LTE7Zm9yKHQ9SHIodCxyLDMpOysrdTxlJiZ0KG5bdV0sdSxuKTspO3JldHVybiBScihuLHUpfSxXdC5maWxsPWZ1bmN0aW9uKG4sdCxyLGUpe3ZhciB1PW4/bi5sZW5ndGg6MDtpZighdSlyZXR1cm5bXTtmb3IociYmdHlwZW9mIHIhPVwibnVtYmVyXCImJnVlKG4sdCxyKSYmKHI9MCxlPXUpLHU9bi5sZW5ndGgscj1udWxsPT1yPzA6K3J8fDAsMD5yJiYocj0tcj51PzA6dStyKSxlPXR5cGVvZiBlPT1cInVuZGVmaW5lZFwifHxlPnU/dTorZXx8MCwwPmUmJihlKz11KSx1PXI+ZT8wOmU+Pj4wLHI+Pj49MDtyPHU7KW5bcisrXT10O3JldHVybiBufSxXdC5maWx0ZXI9UmUsV3QuZmxhdHRlbj1mdW5jdGlvbihuLHQscil7dmFyIGU9bj9uLmxlbmd0aDowO3JldHVybiByJiZ1ZShuLHQscikmJih0PWZhbHNlKSxlP2xyKG4sdCk6W119LFd0LmZsYXR0ZW5EZWVwPWZ1bmN0aW9uKG4pe3JldHVybiBuJiZuLmxlbmd0aD9scihuLHRydWUpOltdfSxXdC5mbG93PWZ1bmN0aW9uKCl7dmFyIG49YXJndW1lbnRzLHQ9bi5sZW5ndGg7XG5pZighdClyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIG59O2lmKCFxdChuLEplKSl0aHJvdyBuZXcgT3UoJCk7cmV0dXJuIGZ1bmN0aW9uKCl7Zm9yKHZhciByPTAsZT1uW3JdLmFwcGx5KHRoaXMsYXJndW1lbnRzKTsrK3I8dDspZT1uW3JdLmNhbGwodGhpcyxlKTtyZXR1cm4gZX19LFd0LmZsb3dSaWdodD1xZSxXdC5mb3JFYWNoPU9lLFd0LmZvckVhY2hSaWdodD1DZSxXdC5mb3JJbj1mdW5jdGlvbihuLHQscil7cmV0dXJuKHR5cGVvZiB0IT1cImZ1bmN0aW9uXCJ8fHR5cGVvZiByIT1cInVuZGVmaW5lZFwiKSYmKHQ9TnIodCxyLDMpKSxzcihuLHQsb3UpfSxXdC5mb3JJblJpZ2h0PWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gdD1Ocih0LHIsMykscHIobix0LG91KX0sV3QuZm9yT3duPWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4odHlwZW9mIHQhPVwiZnVuY3Rpb25cInx8dHlwZW9mIHIhPVwidW5kZWZpbmVkXCIpJiYodD1Ocih0LHIsMykpLF9yKG4sdCl9LFd0LmZvck93blJpZ2h0PWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gdD1Ocih0LHIsMykscHIobix0LEZvKVxufSxXdC5mdW5jdGlvbnM9dXUsV3QuZ3JvdXBCeT1FbyxXdC5pbmRleEJ5PVJvLFd0LmluaXRpYWw9ZnVuY3Rpb24obil7cmV0dXJuIGdlKG4sMSl9LFd0LmludGVyc2VjdGlvbj1mdW5jdGlvbigpe2Zvcih2YXIgbj1bXSxyPS0xLGU9YXJndW1lbnRzLmxlbmd0aCx1PVtdLG89UXIoKSxpPW89PXQ7KytyPGU7KXt2YXIgZj1hcmd1bWVudHNbcl07KFNvKGYpfHxZZShmKSkmJihuLnB1c2goZiksdS5wdXNoKGkmJjEyMDw9Zi5sZW5ndGgmJnhvKHImJmYpKSl9dmFyIGU9bi5sZW5ndGgsaT1uWzBdLGE9LTEsYz1pP2kubGVuZ3RoOjAsbD1bXSxzPXVbMF07bjpmb3IoOysrYTxjOylpZihmPWlbYV0sMD4ocz9CdChzLGYpOm8obCxmKSkpe2ZvcihyPWU7LS1yOyl7dmFyIHA9dVtyXTtpZigwPihwP0J0KHAsZik6byhuW3JdLGYpKSljb250aW51ZSBufXMmJnMucHVzaChmKSxsLnB1c2goZil9cmV0dXJuIGx9LFd0LmludmVydD1mdW5jdGlvbihuLHQscil7ciYmdWUobix0LHIpJiYodD1udWxsKSxyPS0xO1xuZm9yKHZhciBlPUZvKG4pLHU9ZS5sZW5ndGgsbz17fTsrK3I8dTspe3ZhciBpPWVbcl0sZj1uW2ldO3Q/VXUuY2FsbChvLGYpP29bZl0ucHVzaChpKTpvW2ZdPVtpXTpvW2ZdPWl9cmV0dXJuIG99LFd0Lmludm9rZT1mdW5jdGlvbihuLHQpe3JldHVybiB5cihuLHQsUnIoYXJndW1lbnRzLDIpKX0sV3Qua2V5cz1GbyxXdC5rZXlzSW49b3UsV3QubWFwPVRlLFd0Lm1hcFZhbHVlcz1mdW5jdGlvbihuLHQscil7dmFyIGU9e307cmV0dXJuIHQ9SHIodCxyLDMpLF9yKG4sZnVuY3Rpb24obixyLHUpe2Vbcl09dChuLHIsdSl9KSxlfSxXdC5tYXRjaGVzPXl1LFd0Lm1hdGNoZXNQcm9wZXJ0eT1mdW5jdGlvbihuLHQpe3JldHVybiB4cihuK1wiXCIscnIodCx0cnVlKSl9LFd0Lm1lbW9pemU9UGUsV3QubWVyZ2U9TG8sV3QubWl4aW49ZHUsV3QubmVnYXRlPWZ1bmN0aW9uKG4pe2lmKHR5cGVvZiBuIT1cImZ1bmN0aW9uXCIpdGhyb3cgbmV3IE91KCQpO3JldHVybiBmdW5jdGlvbigpe3JldHVybiFuLmFwcGx5KHRoaXMsYXJndW1lbnRzKVxufX0sV3Qub21pdD1mdW5jdGlvbihuLHQscil7aWYobnVsbD09bilyZXR1cm57fTtpZih0eXBlb2YgdCE9XCJmdW5jdGlvblwiKXt2YXIgZT1LdChscihhcmd1bWVudHMsZmFsc2UsZmFsc2UsMSksSXUpO3JldHVybiBmZShuLHVyKG91KG4pLGUpKX1yZXR1cm4gdD1Ocih0LHIsMyksYWUobixmdW5jdGlvbihuLHIsZSl7cmV0dXJuIXQobixyLGUpfSl9LFd0Lm9uY2U9ZnVuY3Rpb24obil7cmV0dXJuIExlKG4sMil9LFd0LnBhaXJzPWZ1bmN0aW9uKG4pe2Zvcih2YXIgdD0tMSxyPUZvKG4pLGU9ci5sZW5ndGgsdT13dShlKTsrK3Q8ZTspe3ZhciBvPXJbdF07dVt0XT1bbyxuW29dXX1yZXR1cm4gdX0sV3QucGFydGlhbD1LZSxXdC5wYXJ0aWFsUmlnaHQ9VmUsV3QucGFydGl0aW9uPUNvLFd0LnBpY2s9ZnVuY3Rpb24obix0LHIpe3JldHVybiBudWxsPT1uP3t9OnR5cGVvZiB0PT1cImZ1bmN0aW9uXCI/YWUobixOcih0LHIsMykpOmZlKG4sbHIoYXJndW1lbnRzLGZhbHNlLGZhbHNlLDEpKX0sV3QucGx1Y2s9ZnVuY3Rpb24obix0KXtyZXR1cm4gVGUobixqcih0KSlcbn0sV3QucHJvcGVydHk9ZnVuY3Rpb24obil7cmV0dXJuIGpyKG4rXCJcIil9LFd0LnByb3BlcnR5T2Y9ZnVuY3Rpb24obil7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT1uP3c6blt0XX19LFd0LnB1bGw9ZnVuY3Rpb24oKXt2YXIgbj1hcmd1bWVudHNbMF07aWYoIW58fCFuLmxlbmd0aClyZXR1cm4gbjtmb3IodmFyIHQ9MCxyPVFyKCksZT1hcmd1bWVudHMubGVuZ3RoOysrdDxlOylmb3IodmFyIHU9MCxvPWFyZ3VtZW50c1t0XTstMTwodT1yKG4sbyx1KSk7KUp1LmNhbGwobix1LDEpO3JldHVybiBufSxXdC5wdWxsQXQ9ZnVuY3Rpb24odCl7dmFyIHI9dHx8W10sZT1scihhcmd1bWVudHMsZmFsc2UsZmFsc2UsMSksdT1lLmxlbmd0aCxvPVF0KHIsZSk7Zm9yKGUuc29ydChuKTt1LS07KXt2YXIgaT1wYXJzZUZsb2F0KGVbdV0pO2lmKGkhPWYmJmVlKGkpKXt2YXIgZj1pO0p1LmNhbGwocixpLDEpfX1yZXR1cm4gb30sV3QucmFuZ2U9ZnVuY3Rpb24obix0LHIpe3ImJnVlKG4sdCxyKSYmKHQ9cj1udWxsKSxuPStufHwwLHI9bnVsbD09cj8xOityfHwwLG51bGw9PXQ/KHQ9bixuPTApOnQ9K3R8fDA7XG52YXIgZT0tMTt0PXVvKE11KCh0LW4pLyhyfHwxKSksMCk7Zm9yKHZhciB1PXd1KHQpOysrZTx0Oyl1W2VdPW4sbis9cjtyZXR1cm4gdX0sV3QucmVhcmc9ZnVuY3Rpb24obil7dmFyIHQ9bHIoYXJndW1lbnRzLGZhbHNlLGZhbHNlLDEpO3JldHVybiBZcihuLE8sbnVsbCxudWxsLG51bGwsdCl9LFd0LnJlamVjdD1mdW5jdGlvbihuLHQscil7dmFyIGU9U28obik/UHQ6YXI7cmV0dXJuIHQ9SHIodCxyLDMpLGUobixmdW5jdGlvbihuLHIsZSl7cmV0dXJuIXQobixyLGUpfSl9LFd0LnJlbW92ZT1mdW5jdGlvbihuLHQscil7dmFyIGU9LTEsdT1uP24ubGVuZ3RoOjAsbz1bXTtmb3IodD1Icih0LHIsMyk7KytlPHU7KXI9bltlXSx0KHIsZSxuKSYmKG8ucHVzaChyKSxKdS5jYWxsKG4sZS0tLDEpLHUtLSk7cmV0dXJuIG99LFd0LnJlc3Q9bWUsV3Quc2h1ZmZsZT1VZSxXdC5zbGljZT1mdW5jdGlvbihuLHQscil7dmFyIGU9bj9uLmxlbmd0aDowO3JldHVybiBlPyhyJiZ0eXBlb2YgciE9XCJudW1iZXJcIiYmdWUobix0LHIpJiYodD0wLHI9ZSksUnIobix0LHIpKTpbXVxufSxXdC5zb3J0Qnk9ZnVuY3Rpb24obix0LGUpe3ZhciB1PS0xLG89bj9uLmxlbmd0aDowLGk9b2Uobyk/d3Uobyk6W107cmV0dXJuIGUmJnVlKG4sdCxlKSYmKHQ9bnVsbCksdD1Icih0LGUsMyksb3IobixmdW5jdGlvbihuLHIsZSl7aVsrK3VdPXthOnQobixyLGUpLGI6dSxjOm59fSkscihpLGYpfSxXdC5zb3J0QnlBbGw9ZnVuY3Rpb24obil7dmFyIHQ9YXJndW1lbnRzOzM8dC5sZW5ndGgmJnVlKHRbMV0sdFsyXSx0WzNdKSYmKHQ9W24sdFsxXV0pO3ZhciBlPS0xLHU9bj9uLmxlbmd0aDowLG89bHIodCxmYWxzZSxmYWxzZSwxKSxpPW9lKHUpP3d1KHUpOltdO3JldHVybiBvcihuLGZ1bmN0aW9uKG4pe2Zvcih2YXIgdD1vLmxlbmd0aCxyPXd1KHQpO3QtLTspclt0XT1udWxsPT1uP3c6bltvW3RdXTtpWysrZV09e2E6cixiOmUsYzpufX0pLHIoaSxhKX0sV3Quc3ByZWFkPWZ1bmN0aW9uKG4pe2lmKHR5cGVvZiBuIT1cImZ1bmN0aW9uXCIpdGhyb3cgbmV3IE91KCQpO3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gbi5hcHBseSh0aGlzLHQpXG59fSxXdC50YWtlPWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gbiYmbi5sZW5ndGg/KChyP3VlKG4sdCxyKTpudWxsPT10KSYmKHQ9MSksUnIobiwwLDA+dD8wOnQpKTpbXX0sV3QudGFrZVJpZ2h0PWZ1bmN0aW9uKG4sdCxyKXt2YXIgZT1uP24ubGVuZ3RoOjA7cmV0dXJuIGU/KChyP3VlKG4sdCxyKTpudWxsPT10KSYmKHQ9MSksdD1lLSgrdHx8MCksUnIobiwwPnQ/MDp0KSk6W119LFd0LnRha2VSaWdodFdoaWxlPWZ1bmN0aW9uKG4sdCxyKXt2YXIgZT1uP24ubGVuZ3RoOjA7aWYoIWUpcmV0dXJuW107Zm9yKHQ9SHIodCxyLDMpO2UtLSYmdChuW2VdLGUsbik7KTtyZXR1cm4gUnIobixlKzEpfSxXdC50YWtlV2hpbGU9ZnVuY3Rpb24obix0LHIpe3ZhciBlPW4/bi5sZW5ndGg6MDtpZighZSlyZXR1cm5bXTt2YXIgdT0tMTtmb3IodD1Icih0LHIsMyk7Kyt1PGUmJnQoblt1XSx1LG4pOyk7cmV0dXJuIFJyKG4sMCx1KX0sV3QudGFwPWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gdC5jYWxsKHIsbiksblxufSxXdC50aHJvdHRsZT1mdW5jdGlvbihuLHQscil7dmFyIGU9dHJ1ZSx1PXRydWU7aWYodHlwZW9mIG4hPVwiZnVuY3Rpb25cIil0aHJvdyBuZXcgT3UoJCk7cmV0dXJuIGZhbHNlPT09cj9lPWZhbHNlOlhlKHIpJiYoZT1cImxlYWRpbmdcImluIHI/ISFyLmxlYWRpbmc6ZSx1PVwidHJhaWxpbmdcImluIHI/ISFyLnRyYWlsaW5nOnUpLFN0LmxlYWRpbmc9ZSxTdC5tYXhXYWl0PSt0LFN0LnRyYWlsaW5nPXUsTWUobix0LFN0KX0sV3QudGhydT1qZSxXdC50aW1lcz1mdW5jdGlvbihuLHQscil7aWYobj0rbiwxPm58fCFybyhuKSlyZXR1cm5bXTt2YXIgZT0tMSx1PXd1KG9vKG4scG8pKTtmb3IodD1Ocih0LHIsMSk7KytlPG47KWU8cG8/dVtlXT10KGUpOnQoZSk7cmV0dXJuIHV9LFd0LnRvQXJyYXk9ZnVuY3Rpb24obil7dmFyIHQ9bj9uLmxlbmd0aDowO3JldHVybiBvZSh0KT90P3p0KG4pOltdOml1KG4pfSxXdC50b1BsYWluT2JqZWN0PWV1LFd0LnRyYW5zZm9ybT1mdW5jdGlvbihuLHQscixlKXt2YXIgdT1TbyhuKXx8cnUobik7XG5yZXR1cm4gdD1Icih0LGUsNCksbnVsbD09ciYmKHV8fFhlKG4pPyhlPW4uY29uc3RydWN0b3Iscj11P1NvKG4pP25ldyBlOltdOndvKEplKGUpJiZlLnByb3RvdHlwZSkpOnI9e30pLCh1P010Ol9yKShuLGZ1bmN0aW9uKG4sZSx1KXtyZXR1cm4gdChyLG4sZSx1KX0pLHJ9LFd0LnVuaW9uPWZ1bmN0aW9uKCl7cmV0dXJuIE9yKGxyKGFyZ3VtZW50cyxmYWxzZSx0cnVlKSl9LFd0LnVuaXE9d2UsV3QudW56aXA9YmUsV3QudmFsdWVzPWl1LFd0LnZhbHVlc0luPWZ1bmN0aW9uKG4pe3JldHVybiBDcihuLG91KG4pKX0sV3Qud2hlcmU9ZnVuY3Rpb24obix0KXtyZXR1cm4gUmUobixicih0KSl9LFd0LndpdGhvdXQ9ZnVuY3Rpb24obil7cmV0dXJuIHVyKG4sUnIoYXJndW1lbnRzLDEpKX0sV3Qud3JhcD1mdW5jdGlvbihuLHQpe3JldHVybiB0PW51bGw9PXQ/dnU6dCxZcih0LFIsbnVsbCxbbl0sW10pfSxXdC54b3I9ZnVuY3Rpb24oKXtmb3IodmFyIG49LTEsdD1hcmd1bWVudHMubGVuZ3RoOysrbjx0Oyl7dmFyIHI9YXJndW1lbnRzW25dO1xuaWYoU28ocil8fFllKHIpKXZhciBlPWU/dXIoZSxyKS5jb25jYXQodXIocixlKSk6cn1yZXR1cm4gZT9PcihlKTpbXX0sV3QuemlwPWZ1bmN0aW9uKCl7Zm9yKHZhciBuPWFyZ3VtZW50cy5sZW5ndGgsdD13dShuKTtuLS07KXRbbl09YXJndW1lbnRzW25dO3JldHVybiBiZSh0KX0sV3QuemlwT2JqZWN0PXhlLFd0LmJhY2tmbG93PXFlLFd0LmNvbGxlY3Q9VGUsV3QuY29tcG9zZT1xZSxXdC5lYWNoPU9lLFd0LmVhY2hSaWdodD1DZSxXdC5leHRlbmQ9VW8sV3QuaXRlcmF0ZWU9X3UsV3QubWV0aG9kcz11dSxXdC5vYmplY3Q9eGUsV3Quc2VsZWN0PVJlLFd0LnRhaWw9bWUsV3QudW5pcXVlPXdlLGR1KFd0LFd0KSxXdC5hdHRlbXB0PWh1LFd0LmNhbWVsQ2FzZT0kbyxXdC5jYXBpdGFsaXplPWZ1bmN0aW9uKG4pe3JldHVybihuPWUobikpJiZuLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK24uc2xpY2UoMSl9LFd0LmNsb25lPWZ1bmN0aW9uKG4sdCxyLGUpe3JldHVybiB0eXBlb2YgdCE9XCJib29sZWFuXCImJm51bGwhPXQmJihlPXIscj11ZShuLHQsZSk/bnVsbDp0LHQ9ZmFsc2UpLHI9dHlwZW9mIHI9PVwiZnVuY3Rpb25cIiYmTnIocixlLDEpLHJyKG4sdCxyKVxufSxXdC5jbG9uZURlZXA9ZnVuY3Rpb24obix0LHIpe3JldHVybiB0PXR5cGVvZiB0PT1cImZ1bmN0aW9uXCImJk5yKHQsciwxKSxycihuLHRydWUsdCl9LFd0LmRlYnVycj1mdSxXdC5lbmRzV2l0aD1mdW5jdGlvbihuLHQscil7bj1lKG4pLHQrPVwiXCI7dmFyIHU9bi5sZW5ndGg7cmV0dXJuIHI9KHR5cGVvZiByPT1cInVuZGVmaW5lZFwiP3U6b28oMD5yPzA6K3J8fDAsdSkpLXQubGVuZ3RoLDA8PXImJm4uaW5kZXhPZih0LHIpPT1yfSxXdC5lc2NhcGU9ZnVuY3Rpb24obil7cmV0dXJuKG49ZShuKSkmJnB0LnRlc3Qobik/bi5yZXBsYWNlKGx0LGwpOm59LFd0LmVzY2FwZVJlZ0V4cD1hdSxXdC5ldmVyeT1FZSxXdC5maW5kPUllLFd0LmZpbmRJbmRleD12ZSxXdC5maW5kS2V5PWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gdD1Icih0LHIsMyksY3Iobix0LF9yLHRydWUpfSxXdC5maW5kTGFzdD1mdW5jdGlvbihuLHQscil7cmV0dXJuIHQ9SHIodCxyLDMpLGNyKG4sdCxpcil9LFd0LmZpbmRMYXN0SW5kZXg9ZnVuY3Rpb24obix0LHIpe3ZhciBlPW4/bi5sZW5ndGg6MDtcbmZvcih0PUhyKHQsciwzKTtlLS07KWlmKHQobltlXSxlLG4pKXJldHVybiBlO3JldHVybi0xfSxXdC5maW5kTGFzdEtleT1mdW5jdGlvbihuLHQscil7cmV0dXJuIHQ9SHIodCxyLDMpLGNyKG4sdCxncix0cnVlKX0sV3QuZmluZFdoZXJlPWZ1bmN0aW9uKG4sdCl7cmV0dXJuIEllKG4sYnIodCkpfSxXdC5maXJzdD15ZSxXdC5oYXM9ZnVuY3Rpb24obix0KXtyZXR1cm4gbj9VdS5jYWxsKG4sdCk6ZmFsc2V9LFd0LmlkZW50aXR5PXZ1LFd0LmluY2x1ZGVzPWtlLFd0LmluZGV4T2Y9ZGUsV3QuaXNBcmd1bWVudHM9WWUsV3QuaXNBcnJheT1TbyxXdC5pc0Jvb2xlYW49ZnVuY3Rpb24obil7cmV0dXJuIHRydWU9PT1ufHxmYWxzZT09PW58fGgobikmJkx1LmNhbGwobik9PU18fGZhbHNlfSxXdC5pc0RhdGU9ZnVuY3Rpb24obil7cmV0dXJuIGgobikmJkx1LmNhbGwobik9PXF8fGZhbHNlfSxXdC5pc0VsZW1lbnQ9WmUsV3QuaXNFbXB0eT1mdW5jdGlvbihuKXtpZihudWxsPT1uKXJldHVybiB0cnVlO3ZhciB0PW4ubGVuZ3RoO1xucmV0dXJuIG9lKHQpJiYoU28obil8fHR1KG4pfHxZZShuKXx8aChuKSYmSmUobi5zcGxpY2UpKT8hdDohRm8obikubGVuZ3RofSxXdC5pc0VxdWFsPWZ1bmN0aW9uKG4sdCxyLGUpe3JldHVybiByPXR5cGVvZiByPT1cImZ1bmN0aW9uXCImJk5yKHIsZSwzKSwhciYmaWUobikmJmllKHQpP249PT10OihlPXI/cihuLHQpOncsdHlwZW9mIGU9PVwidW5kZWZpbmVkXCI/ZHIobix0LHIpOiEhZSl9LFd0LmlzRXJyb3I9R2UsV3QuaXNGaW5pdGU9V28sV3QuaXNGdW5jdGlvbj1KZSxXdC5pc01hdGNoPWZ1bmN0aW9uKG4sdCxyLGUpe3ZhciB1PUZvKHQpLG89dS5sZW5ndGg7aWYocj10eXBlb2Ygcj09XCJmdW5jdGlvblwiJiZOcihyLGUsMyksIXImJjE9PW8pe3ZhciBpPXVbMF07aWYoZT10W2ldLGllKGUpKXJldHVybiBudWxsIT1uJiZlPT09bltpXSYmVXUuY2FsbChuLGkpfWZvcih2YXIgaT13dShvKSxmPXd1KG8pO28tLTspZT1pW29dPXRbdVtvXV0sZltvXT1pZShlKTtyZXR1cm4gbXIobix1LGksZixyKVxufSxXdC5pc05hTj1mdW5jdGlvbihuKXtyZXR1cm4gUWUobikmJm4hPStufSxXdC5pc05hdGl2ZT1IZSxXdC5pc051bGw9ZnVuY3Rpb24obil7cmV0dXJuIG51bGw9PT1ufSxXdC5pc051bWJlcj1RZSxXdC5pc09iamVjdD1YZSxXdC5pc1BsYWluT2JqZWN0PU5vLFd0LmlzUmVnRXhwPW51LFd0LmlzU3RyaW5nPXR1LFd0LmlzVHlwZWRBcnJheT1ydSxXdC5pc1VuZGVmaW5lZD1mdW5jdGlvbihuKXtyZXR1cm4gdHlwZW9mIG49PVwidW5kZWZpbmVkXCJ9LFd0LmtlYmFiQ2FzZT1CbyxXdC5sYXN0PWZ1bmN0aW9uKG4pe3ZhciB0PW4/bi5sZW5ndGg6MDtyZXR1cm4gdD9uW3QtMV06d30sV3QubGFzdEluZGV4T2Y9ZnVuY3Rpb24obix0LHIpe3ZhciBlPW4/bi5sZW5ndGg6MDtpZighZSlyZXR1cm4tMTt2YXIgdT1lO2lmKHR5cGVvZiByPT1cIm51bWJlclwiKXU9KDA+cj91byhlK3IsMCk6b28ocnx8MCxlLTEpKSsxO2Vsc2UgaWYocilyZXR1cm4gdT1TcihuLHQsdHJ1ZSktMSxuPW5bdV0sKHQ9PT10P3Q9PT1uOm4hPT1uKT91Oi0xO1xuaWYodCE9PXQpcmV0dXJuIHAobix1LHRydWUpO2Zvcig7dS0tOylpZihuW3VdPT09dClyZXR1cm4gdTtyZXR1cm4tMX0sV3QubWF4PUlvLFd0Lm1pbj1PbyxXdC5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIF8uXz0kdSx0aGlzfSxXdC5ub29wPW11LFd0Lm5vdz1UbyxXdC5wYWQ9ZnVuY3Rpb24obix0LHIpe249ZShuKSx0PSt0O3ZhciB1PW4ubGVuZ3RoO3JldHVybiB1PHQmJnJvKHQpPyh1PSh0LXUpLzIsdD1QdSh1KSx1PU11KHUpLHI9S3IoXCJcIix1LHIpLHIuc2xpY2UoMCx0KStuK3IpOm59LFd0LnBhZExlZnQ9ZnVuY3Rpb24obix0LHIpe3JldHVybihuPWUobikpJiZLcihuLHQscikrbn0sV3QucGFkUmlnaHQ9ZnVuY3Rpb24obix0LHIpe3JldHVybihuPWUobikpJiZuK0tyKG4sdCxyKX0sV3QucGFyc2VJbnQ9Y3UsV3QucmFuZG9tPWZ1bmN0aW9uKG4sdCxyKXtyJiZ1ZShuLHQscikmJih0PXI9bnVsbCk7dmFyIGU9bnVsbD09bix1PW51bGw9PXQ7cmV0dXJuIG51bGw9PXImJih1JiZ0eXBlb2Ygbj09XCJib29sZWFuXCI/KHI9bixuPTEpOnR5cGVvZiB0PT1cImJvb2xlYW5cIiYmKHI9dCx1PXRydWUpKSxlJiZ1JiYodD0xLHU9ZmFsc2UpLG49K258fDAsdT8odD1uLG49MCk6dD0rdHx8MCxyfHxuJTF8fHQlMT8ocj1jbygpLG9vKG4rcioodC1uK3BhcnNlRmxvYXQoXCIxZS1cIisoKHIrXCJcIikubGVuZ3RoLTEpKSksdCkpOmtyKG4sdClcbn0sV3QucmVkdWNlPVNlLFd0LnJlZHVjZVJpZ2h0PVdlLFd0LnJlcGVhdD1sdSxXdC5yZXN1bHQ9ZnVuY3Rpb24obix0LHIpe3JldHVybiB0PW51bGw9PW4/dzpuW3RdLHR5cGVvZiB0PT1cInVuZGVmaW5lZFwiJiYodD1yKSxKZSh0KT90LmNhbGwobik6dH0sV3QucnVuSW5Db250ZXh0PW0sV3Quc2l6ZT1mdW5jdGlvbihuKXt2YXIgdD1uP24ubGVuZ3RoOjA7cmV0dXJuIG9lKHQpP3Q6Rm8obikubGVuZ3RofSxXdC5zbmFrZUNhc2U9em8sV3Quc29tZT1GZSxXdC5zb3J0ZWRJbmRleD1mdW5jdGlvbihuLHQscixlKXt2YXIgdT1IcihyKTtyZXR1cm4gdT09PXRyJiZudWxsPT1yP1NyKG4sdCk6V3Iobix0LHUocixlLDEpKX0sV3Quc29ydGVkTGFzdEluZGV4PWZ1bmN0aW9uKG4sdCxyLGUpe3ZhciB1PUhyKHIpO3JldHVybiB1PT09dHImJm51bGw9PXI/U3Iobix0LHRydWUpOldyKG4sdCx1KHIsZSwxKSx0cnVlKX0sV3Quc3RhcnRDYXNlPURvLFd0LnN0YXJ0c1dpdGg9ZnVuY3Rpb24obix0LHIpe3JldHVybiBuPWUobikscj1udWxsPT1yPzA6b28oMD5yPzA6K3J8fDAsbi5sZW5ndGgpLG4ubGFzdEluZGV4T2YodCxyKT09clxufSxXdC50ZW1wbGF0ZT1mdW5jdGlvbihuLHQscil7dmFyIHU9V3QudGVtcGxhdGVTZXR0aW5ncztyJiZ1ZShuLHQscikmJih0PXI9bnVsbCksbj1lKG4pLHQ9SHQoSHQoe30scnx8dCksdSxYdCkscj1IdChIdCh7fSx0LmltcG9ydHMpLHUuaW1wb3J0cyxYdCk7dmFyIG8saSxmPUZvKHIpLGE9Q3IocixmKSxjPTA7cj10LmludGVycG9sYXRlfHx4dDt2YXIgbD1cIl9fcCs9J1wiO3I9UnUoKHQuZXNjYXBlfHx4dCkuc291cmNlK1wifFwiK3Iuc291cmNlK1wifFwiKyhyPT09Z3Q/dnQ6eHQpLnNvdXJjZStcInxcIisodC5ldmFsdWF0ZXx8eHQpLnNvdXJjZStcInwkXCIsXCJnXCIpO3ZhciBwPVwic291cmNlVVJMXCJpbiB0P1wiLy8jIHNvdXJjZVVSTD1cIit0LnNvdXJjZVVSTCtcIlxcblwiOlwiXCI7aWYobi5yZXBsYWNlKHIsZnVuY3Rpb24odCxyLGUsdSxmLGEpe3JldHVybiBlfHwoZT11KSxsKz1uLnNsaWNlKGMsYSkucmVwbGFjZShFdCxzKSxyJiYobz10cnVlLGwrPVwiJytfX2UoXCIrcitcIikrJ1wiKSxmJiYoaT10cnVlLGwrPVwiJztcIitmK1wiO1xcbl9fcCs9J1wiKSxlJiYobCs9XCInKygoX190PShcIitlK1wiKSk9PW51bGw/Jyc6X190KSsnXCIpLGM9YSt0Lmxlbmd0aCx0XG59KSxsKz1cIic7XCIsKHQ9dC52YXJpYWJsZSl8fChsPVwid2l0aChvYmope1wiK2wrXCJ9XCIpLGw9KGk/bC5yZXBsYWNlKGl0LFwiXCIpOmwpLnJlcGxhY2UoZnQsXCIkMVwiKS5yZXBsYWNlKGF0LFwiJDE7XCIpLGw9XCJmdW5jdGlvbihcIisodHx8XCJvYmpcIikrXCIpe1wiKyh0P1wiXCI6XCJvYmp8fChvYmo9e30pO1wiKStcInZhciBfX3QsX19wPScnXCIrKG8/XCIsX19lPV8uZXNjYXBlXCI6XCJcIikrKGk/XCIsX19qPUFycmF5LnByb3RvdHlwZS5qb2luO2Z1bmN0aW9uIHByaW50KCl7X19wKz1fX2ouY2FsbChhcmd1bWVudHMsJycpfVwiOlwiO1wiKStsK1wicmV0dXJuIF9fcH1cIix0PWh1KGZ1bmN0aW9uKCl7cmV0dXJuIEF1KGYscCtcInJldHVybiBcIitsKS5hcHBseSh3LGEpfSksdC5zb3VyY2U9bCxHZSh0KSl0aHJvdyB0O3JldHVybiB0fSxXdC50cmltPXN1LFd0LnRyaW1MZWZ0PWZ1bmN0aW9uKG4sdCxyKXt2YXIgdT1uO3JldHVybihuPWUobikpP24uc2xpY2UoKHI/dWUodSx0LHIpOm51bGw9PXQpP3Yobik6byhuLHQrXCJcIikpOm5cbn0sV3QudHJpbVJpZ2h0PWZ1bmN0aW9uKG4sdCxyKXt2YXIgdT1uO3JldHVybihuPWUobikpPyhyP3VlKHUsdCxyKTpudWxsPT10KT9uLnNsaWNlKDAseShuKSsxKTpuLnNsaWNlKDAsaShuLHQrXCJcIikrMSk6bn0sV3QudHJ1bmM9ZnVuY3Rpb24obix0LHIpe3ImJnVlKG4sdCxyKSYmKHQ9bnVsbCk7dmFyIHU9VDtpZihyPVMsbnVsbCE9dClpZihYZSh0KSl7dmFyIG89XCJzZXBhcmF0b3JcImluIHQ/dC5zZXBhcmF0b3I6byx1PVwibGVuZ3RoXCJpbiB0Pyt0Lmxlbmd0aHx8MDp1O3I9XCJvbWlzc2lvblwiaW4gdD9lKHQub21pc3Npb24pOnJ9ZWxzZSB1PSt0fHwwO2lmKG49ZShuKSx1Pj1uLmxlbmd0aClyZXR1cm4gbjtpZih1LT1yLmxlbmd0aCwxPnUpcmV0dXJuIHI7aWYodD1uLnNsaWNlKDAsdSksbnVsbD09bylyZXR1cm4gdCtyO2lmKG51KG8pKXtpZihuLnNsaWNlKHUpLnNlYXJjaChvKSl7dmFyIGksZj1uLnNsaWNlKDAsdSk7Zm9yKG8uZ2xvYmFsfHwobz1SdShvLnNvdXJjZSwoeXQuZXhlYyhvKXx8XCJcIikrXCJnXCIpKSxvLmxhc3RJbmRleD0wO249by5leGVjKGYpOylpPW4uaW5kZXg7XG50PXQuc2xpY2UoMCxudWxsPT1pP3U6aSl9fWVsc2Ugbi5pbmRleE9mKG8sdSkhPXUmJihvPXQubGFzdEluZGV4T2YobyksLTE8byYmKHQ9dC5zbGljZSgwLG8pKSk7cmV0dXJuIHQrcn0sV3QudW5lc2NhcGU9ZnVuY3Rpb24obil7cmV0dXJuKG49ZShuKSkmJnN0LnRlc3Qobik/bi5yZXBsYWNlKGN0LGQpOm59LFd0LnVuaXF1ZUlkPWZ1bmN0aW9uKG4pe3ZhciB0PSsrRnU7cmV0dXJuIGUobikrdH0sV3Qud29yZHM9cHUsV3QuYWxsPUVlLFd0LmFueT1GZSxXdC5jb250YWlucz1rZSxXdC5kZXRlY3Q9SWUsV3QuZm9sZGw9U2UsV3QuZm9sZHI9V2UsV3QuaGVhZD15ZSxXdC5pbmNsdWRlPWtlLFd0LmluamVjdD1TZSxkdShXdCxmdW5jdGlvbigpe3ZhciBuPXt9O3JldHVybiBfcihXdCxmdW5jdGlvbih0LHIpe1d0LnByb3RvdHlwZVtyXXx8KG5bcl09dCl9KSxufSgpLGZhbHNlKSxXdC5zYW1wbGU9TmUsV3QucHJvdG90eXBlLnNhbXBsZT1mdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5fX2NoYWluX198fG51bGwhPW4/dGhpcy50aHJ1KGZ1bmN0aW9uKHQpe3JldHVybiBOZSh0LG4pXG59KTpOZSh0aGlzLnZhbHVlKCkpfSxXdC5WRVJTSU9OPWIsTXQoXCJiaW5kIGJpbmRLZXkgY3VycnkgY3VycnlSaWdodCBwYXJ0aWFsIHBhcnRpYWxSaWdodFwiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihuKXtXdFtuXS5wbGFjZWhvbGRlcj1XdH0pLE10KFtcImZpbHRlclwiLFwibWFwXCIsXCJ0YWtlV2hpbGVcIl0sZnVuY3Rpb24obix0KXt2YXIgcj10PT1VLGU9dD09TDtVdC5wcm90b3R5cGVbbl09ZnVuY3Rpb24obix1KXt2YXIgbz10aGlzLmNsb25lKCksaT1vLl9fZmlsdGVyZWRfXyxmPW8uX19pdGVyYXRlZXNfX3x8KG8uX19pdGVyYXRlZXNfXz1bXSk7cmV0dXJuIG8uX19maWx0ZXJlZF9fPWl8fHJ8fGUmJjA+by5fX2Rpcl9fLGYucHVzaCh7aXRlcmF0ZWU6SHIobix1LDMpLHR5cGU6dH0pLG99fSksTXQoW1wiZHJvcFwiLFwidGFrZVwiXSxmdW5jdGlvbihuLHQpe3ZhciByPVwiX19cIituK1wiQ291bnRfX1wiLGU9bitcIldoaWxlXCI7VXQucHJvdG90eXBlW25dPWZ1bmN0aW9uKGUpe2U9bnVsbD09ZT8xOnVvKFB1KGUpfHwwLDApO1xudmFyIHU9dGhpcy5jbG9uZSgpO2lmKHUuX19maWx0ZXJlZF9fKXt2YXIgbz11W3JdO3Vbcl09dD9vbyhvLGUpOm8rZX1lbHNlKHUuX192aWV3c19ffHwodS5fX3ZpZXdzX189W10pKS5wdXNoKHtzaXplOmUsdHlwZTpuKygwPnUuX19kaXJfXz9cIlJpZ2h0XCI6XCJcIil9KTtyZXR1cm4gdX0sVXQucHJvdG90eXBlW24rXCJSaWdodFwiXT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5yZXZlcnNlKClbbl0odCkucmV2ZXJzZSgpfSxVdC5wcm90b3R5cGVbbitcIlJpZ2h0V2hpbGVcIl09ZnVuY3Rpb24obix0KXtyZXR1cm4gdGhpcy5yZXZlcnNlKClbZV0obix0KS5yZXZlcnNlKCl9fSksTXQoW1wiZmlyc3RcIixcImxhc3RcIl0sZnVuY3Rpb24obix0KXt2YXIgcj1cInRha2VcIisodD9cIlJpZ2h0XCI6XCJcIik7VXQucHJvdG90eXBlW25dPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbcl0oMSkudmFsdWUoKVswXX19KSxNdChbXCJpbml0aWFsXCIsXCJyZXN0XCJdLGZ1bmN0aW9uKG4sdCl7dmFyIHI9XCJkcm9wXCIrKHQ/XCJcIjpcIlJpZ2h0XCIpO1xuVXQucHJvdG90eXBlW25dPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbcl0oMSl9fSksTXQoW1wicGx1Y2tcIixcIndoZXJlXCJdLGZ1bmN0aW9uKG4sdCl7dmFyIHI9dD9cImZpbHRlclwiOlwibWFwXCIsZT10P2JyOmpyO1V0LnByb3RvdHlwZVtuXT1mdW5jdGlvbihuKXtyZXR1cm4gdGhpc1tyXShlKG4pKX19KSxVdC5wcm90b3R5cGUuY29tcGFjdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmZpbHRlcih2dSl9LFV0LnByb3RvdHlwZS5kcm9wV2hpbGU9ZnVuY3Rpb24obix0KXt2YXIgcjtyZXR1cm4gbj1IcihuLHQsMyksdGhpcy5maWx0ZXIoZnVuY3Rpb24odCxlLHUpe3JldHVybiByfHwocj0hbih0LGUsdSkpfSl9LFV0LnByb3RvdHlwZS5yZWplY3Q9ZnVuY3Rpb24obix0KXtyZXR1cm4gbj1IcihuLHQsMyksdGhpcy5maWx0ZXIoZnVuY3Rpb24odCxyLGUpe3JldHVybiFuKHQscixlKX0pfSxVdC5wcm90b3R5cGUuc2xpY2U9ZnVuY3Rpb24obix0KXtuPW51bGw9PW4/MDorbnx8MDt2YXIgcj0wPm4/dGhpcy50YWtlUmlnaHQoLW4pOnRoaXMuZHJvcChuKTtcbnJldHVybiB0eXBlb2YgdCE9XCJ1bmRlZmluZWRcIiYmKHQ9K3R8fDAscj0wPnQ/ci5kcm9wUmlnaHQoLXQpOnIudGFrZSh0LW4pKSxyfSxVdC5wcm90b3R5cGUudG9BcnJheT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRyb3AoMCl9LF9yKFV0LnByb3RvdHlwZSxmdW5jdGlvbihuLHQpe3ZhciByPVd0W3RdLGU9L14oPzpmaXJzdHxsYXN0KSQvLnRlc3QodCk7V3QucHJvdG90eXBlW3RdPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChuKXtyZXR1cm4gbj1bbl0sVnUuYXBwbHkobixvKSxyLmFwcGx5KFd0LG4pfXZhciB1PXRoaXMuX193cmFwcGVkX18sbz1hcmd1bWVudHMsaT10aGlzLl9fY2hhaW5fXyxmPSEhdGhpcy5fX2FjdGlvbnNfXy5sZW5ndGgsYT11IGluc3RhbmNlb2YgVXQsYz1hJiYhZjtyZXR1cm4gZSYmIWk/Yz9uLmNhbGwodSk6ci5jYWxsKFd0LHRoaXMudmFsdWUoKSk6YXx8U28odSk/KHU9bi5hcHBseShjP3U6bmV3IFV0KHRoaXMpLG8pLGV8fCFmJiYhdS5fX2FjdGlvbnNfX3x8KHUuX19hY3Rpb25zX198fCh1Ll9fYWN0aW9uc19fPVtdKSkucHVzaCh7ZnVuYzpqZSxhcmdzOlt0XSx0aGlzQXJnOld0fSksbmV3IE50KHUsaSkpOnRoaXMudGhydSh0KVxufX0pLE10KFwiY29uY2F0IGpvaW4gcG9wIHB1c2ggc2hpZnQgc29ydCBzcGxpY2UgdW5zaGlmdFwiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihuKXt2YXIgdD1DdVtuXSxyPS9eKD86cHVzaHxzb3J0fHVuc2hpZnQpJC8udGVzdChuKT9cInRhcFwiOlwidGhydVwiLGU9L14oPzpqb2lufHBvcHxzaGlmdCkkLy50ZXN0KG4pO1d0LnByb3RvdHlwZVtuXT1mdW5jdGlvbigpe3ZhciBuPWFyZ3VtZW50cztyZXR1cm4gZSYmIXRoaXMuX19jaGFpbl9fP3QuYXBwbHkodGhpcy52YWx1ZSgpLG4pOnRoaXNbcl0oZnVuY3Rpb24ocil7cmV0dXJuIHQuYXBwbHkocixuKX0pfX0pLFV0LnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciBuPXRoaXMuX19hY3Rpb25zX18sdD10aGlzLl9faXRlcmF0ZWVzX18scj10aGlzLl9fdmlld3NfXyxlPW5ldyBVdCh0aGlzLl9fd3JhcHBlZF9fKTtyZXR1cm4gZS5fX2FjdGlvbnNfXz1uP3p0KG4pOm51bGwsZS5fX2Rpcl9fPXRoaXMuX19kaXJfXyxlLl9fZHJvcENvdW50X189dGhpcy5fX2Ryb3BDb3VudF9fLGUuX19maWx0ZXJlZF9fPXRoaXMuX19maWx0ZXJlZF9fLGUuX19pdGVyYXRlZXNfXz10P3p0KHQpOm51bGwsZS5fX3Rha2VDb3VudF9fPXRoaXMuX190YWtlQ291bnRfXyxlLl9fdmlld3NfXz1yP3p0KHIpOm51bGwsZVxufSxVdC5wcm90b3R5cGUucmV2ZXJzZT1mdW5jdGlvbigpe2lmKHRoaXMuX19maWx0ZXJlZF9fKXt2YXIgbj1uZXcgVXQodGhpcyk7bi5fX2Rpcl9fPS0xLG4uX19maWx0ZXJlZF9fPXRydWV9ZWxzZSBuPXRoaXMuY2xvbmUoKSxuLl9fZGlyX18qPS0xO3JldHVybiBufSxVdC5wcm90b3R5cGUudmFsdWU9ZnVuY3Rpb24oKXt2YXIgbj10aGlzLl9fd3JhcHBlZF9fLnZhbHVlKCk7aWYoIVNvKG4pKXJldHVybiBUcihuLHRoaXMuX19hY3Rpb25zX18pO3ZhciB0LHI9dGhpcy5fX2Rpcl9fLGU9MD5yO3Q9bi5sZW5ndGg7Zm9yKHZhciB1PXRoaXMuX192aWV3c19fLG89MCxpPS0xLGY9dT91Lmxlbmd0aDowOysraTxmOyl7dmFyIGE9dVtpXSxjPWEuc2l6ZTtzd2l0Y2goYS50eXBlKXtjYXNlXCJkcm9wXCI6bys9YzticmVhaztjYXNlXCJkcm9wUmlnaHRcIjp0LT1jO2JyZWFrO2Nhc2VcInRha2VcIjp0PW9vKHQsbytjKTticmVhaztjYXNlXCJ0YWtlUmlnaHRcIjpvPXVvKG8sdC1jKX19dD17c3RhcnQ6byxlbmQ6dH0saT10LnN0YXJ0LGY9dC5lbmQsdD1mLWksdT10aGlzLl9fZHJvcENvdW50X18sbz1vbyh0LHRoaXMuX190YWtlQ291bnRfXyksZT1lP2Y6aS0xLGY9KGk9dGhpcy5fX2l0ZXJhdGVlc19fKT9pLmxlbmd0aDowLGE9MCxjPVtdO1xubjpmb3IoO3QtLSYmYTxvOyl7Zm9yKHZhciBlPWUrcixsPS0xLHM9bltlXTsrK2w8Zjspe3ZhciBwPWlbbF0saD1wLml0ZXJhdGVlKHMsZSxuKSxwPXAudHlwZTtpZihwPT1GKXM9aDtlbHNlIGlmKCFoKXtpZihwPT1VKWNvbnRpbnVlIG47YnJlYWsgbn19dT91LS06Y1thKytdPXN9cmV0dXJuIGN9LFd0LnByb3RvdHlwZS5jaGFpbj1mdW5jdGlvbigpe3JldHVybiBBZSh0aGlzKX0sV3QucHJvdG90eXBlLmNvbW1pdD1mdW5jdGlvbigpe3JldHVybiBuZXcgTnQodGhpcy52YWx1ZSgpLHRoaXMuX19jaGFpbl9fKX0sV3QucHJvdG90eXBlLnBsYW50PWZ1bmN0aW9uKG4pe2Zvcih2YXIgdCxyPXRoaXM7ciBpbnN0YW5jZW9mIE50Oyl7dmFyIGU9aGUocik7dD91Ll9fd3JhcHBlZF9fPWU6dD1lO3ZhciB1PWUscj1yLl9fd3JhcHBlZF9ffXJldHVybiB1Ll9fd3JhcHBlZF9fPW4sdH0sV3QucHJvdG90eXBlLnJldmVyc2U9ZnVuY3Rpb24oKXt2YXIgbj10aGlzLl9fd3JhcHBlZF9fO3JldHVybiBuIGluc3RhbmNlb2YgVXQ/KHRoaXMuX19hY3Rpb25zX18ubGVuZ3RoJiYobj1uZXcgVXQodGhpcykpLG5ldyBOdChuLnJldmVyc2UoKSx0aGlzLl9fY2hhaW5fXykpOnRoaXMudGhydShmdW5jdGlvbihuKXtyZXR1cm4gbi5yZXZlcnNlKClcbn0pfSxXdC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZSgpK1wiXCJ9LFd0LnByb3RvdHlwZS5ydW49V3QucHJvdG90eXBlLnRvSlNPTj1XdC5wcm90b3R5cGUudmFsdWVPZj1XdC5wcm90b3R5cGUudmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4gVHIodGhpcy5fX3dyYXBwZWRfXyx0aGlzLl9fYWN0aW9uc19fKX0sV3QucHJvdG90eXBlLmNvbGxlY3Q9V3QucHJvdG90eXBlLm1hcCxXdC5wcm90b3R5cGUuaGVhZD1XdC5wcm90b3R5cGUuZmlyc3QsV3QucHJvdG90eXBlLnNlbGVjdD1XdC5wcm90b3R5cGUuZmlsdGVyLFd0LnByb3RvdHlwZS50YWlsPVd0LnByb3RvdHlwZS5yZXN0LFd0fXZhciB3LGI9XCIzLjIuMFwiLHg9MSxBPTIsaj00LGs9OCxFPTE2LFI9MzIsST02NCxPPTEyOCxDPTI1NixUPTMwLFM9XCIuLi5cIixXPTE1MCxOPTE2LFU9MCxGPTEsTD0yLCQ9XCJFeHBlY3RlZCBhIGZ1bmN0aW9uXCIsQj1cIl9fbG9kYXNoX3BsYWNlaG9sZGVyX19cIix6PVwiW29iamVjdCBBcmd1bWVudHNdXCIsRD1cIltvYmplY3QgQXJyYXldXCIsTT1cIltvYmplY3QgQm9vbGVhbl1cIixxPVwiW29iamVjdCBEYXRlXVwiLFA9XCJbb2JqZWN0IEVycm9yXVwiLEs9XCJbb2JqZWN0IEZ1bmN0aW9uXVwiLFY9XCJbb2JqZWN0IE51bWJlcl1cIixZPVwiW29iamVjdCBPYmplY3RdXCIsWj1cIltvYmplY3QgUmVnRXhwXVwiLEc9XCJbb2JqZWN0IFN0cmluZ11cIixKPVwiW29iamVjdCBBcnJheUJ1ZmZlcl1cIixYPVwiW29iamVjdCBGbG9hdDMyQXJyYXldXCIsSD1cIltvYmplY3QgRmxvYXQ2NEFycmF5XVwiLFE9XCJbb2JqZWN0IEludDhBcnJheV1cIixudD1cIltvYmplY3QgSW50MTZBcnJheV1cIix0dD1cIltvYmplY3QgSW50MzJBcnJheV1cIixydD1cIltvYmplY3QgVWludDhBcnJheV1cIixldD1cIltvYmplY3QgVWludDhDbGFtcGVkQXJyYXldXCIsdXQ9XCJbb2JqZWN0IFVpbnQxNkFycmF5XVwiLG90PVwiW29iamVjdCBVaW50MzJBcnJheV1cIixpdD0vXFxiX19wXFwrPScnOy9nLGZ0PS9cXGIoX19wXFwrPSknJ1xcKy9nLGF0PS8oX19lXFwoLio/XFwpfFxcYl9fdFxcKSlcXCsnJzsvZyxjdD0vJig/OmFtcHxsdHxndHxxdW90fCMzOXwjOTYpOy9nLGx0PS9bJjw+XCInYF0vZyxzdD1SZWdFeHAoY3Quc291cmNlKSxwdD1SZWdFeHAobHQuc291cmNlKSxodD0vPCUtKFtcXHNcXFNdKz8pJT4vZyxfdD0vPCUoW1xcc1xcU10rPyklPi9nLGd0PS88JT0oW1xcc1xcU10rPyklPi9nLHZ0PS9cXCRcXHsoW15cXFxcfV0qKD86XFxcXC5bXlxcXFx9XSopKilcXH0vZyx5dD0vXFx3KiQvLGR0PS9eXFxzKmZ1bmN0aW9uWyBcXG5cXHJcXHRdK1xcdy8sbXQ9L14wW3hYXS8sd3Q9L15cXFtvYmplY3QgLis/Q29uc3RydWN0b3JcXF0kLyxidD0vW1xceGMwLVxceGQ2XFx4ZDgtXFx4ZGVcXHhkZi1cXHhmNlxceGY4LVxceGZmXS9nLHh0PS8oJF4pLyxBdD0vWy4qKz9eJHt9KCl8W1xcXVxcL1xcXFxdL2csanQ9UmVnRXhwKEF0LnNvdXJjZSksa3Q9L1xcYnRoaXNcXGIvLEV0PS9bJ1xcblxcclxcdTIwMjhcXHUyMDI5XFxcXF0vZyxSdD1SZWdFeHAoXCJbQS1aXFxcXHhjMC1cXFxceGQ2XFxcXHhkOC1cXFxceGRlXXsyLH0oPz1bQS1aXFxcXHhjMC1cXFxceGQ2XFxcXHhkOC1cXFxceGRlXVthLXpcXFxceGRmLVxcXFx4ZjZcXFxceGY4LVxcXFx4ZmZdKyl8W0EtWlxcXFx4YzAtXFxcXHhkNlxcXFx4ZDgtXFxcXHhkZV0/W2EtelxcXFx4ZGYtXFxcXHhmNlxcXFx4ZjgtXFxcXHhmZl0rfFtBLVpcXFxceGMwLVxcXFx4ZDZcXFxceGQ4LVxcXFx4ZGVdK3xbMC05XStcIixcImdcIiksSXQ9XCIgXFx0XFx4MGJcXGZcXHhhMFxcdWZlZmZcXG5cXHJcXHUyMDI4XFx1MjAyOVxcdTE2ODBcXHUxODBlXFx1MjAwMFxcdTIwMDFcXHUyMDAyXFx1MjAwM1xcdTIwMDRcXHUyMDA1XFx1MjAwNlxcdTIwMDdcXHUyMDA4XFx1MjAwOVxcdTIwMGFcXHUyMDJmXFx1MjA1ZlxcdTMwMDBcIixPdD1cIkFycmF5IEFycmF5QnVmZmVyIERhdGUgRXJyb3IgRmxvYXQzMkFycmF5IEZsb2F0NjRBcnJheSBGdW5jdGlvbiBJbnQ4QXJyYXkgSW50MTZBcnJheSBJbnQzMkFycmF5IE1hdGggTnVtYmVyIE9iamVjdCBSZWdFeHAgU2V0IFN0cmluZyBfIGNsZWFyVGltZW91dCBkb2N1bWVudCBpc0Zpbml0ZSBwYXJzZUludCBzZXRUaW1lb3V0IFR5cGVFcnJvciBVaW50OEFycmF5IFVpbnQ4Q2xhbXBlZEFycmF5IFVpbnQxNkFycmF5IFVpbnQzMkFycmF5IFdlYWtNYXAgd2luZG93IFdpblJURXJyb3JcIi5zcGxpdChcIiBcIiksQ3Q9e307XG5DdFtYXT1DdFtIXT1DdFtRXT1DdFtudF09Q3RbdHRdPUN0W3J0XT1DdFtldF09Q3RbdXRdPUN0W290XT10cnVlLEN0W3pdPUN0W0RdPUN0W0pdPUN0W01dPUN0W3FdPUN0W1BdPUN0W0tdPUN0W1wiW29iamVjdCBNYXBdXCJdPUN0W1ZdPUN0W1ldPUN0W1pdPUN0W1wiW29iamVjdCBTZXRdXCJdPUN0W0ddPUN0W1wiW29iamVjdCBXZWFrTWFwXVwiXT1mYWxzZTt2YXIgVHQ9e307VHRbel09VHRbRF09VHRbSl09VHRbTV09VHRbcV09VHRbWF09VHRbSF09VHRbUV09VHRbbnRdPVR0W3R0XT1UdFtWXT1UdFtZXT1UdFtaXT1UdFtHXT1UdFtydF09VHRbZXRdPVR0W3V0XT1UdFtvdF09dHJ1ZSxUdFtQXT1UdFtLXT1UdFtcIltvYmplY3QgTWFwXVwiXT1UdFtcIltvYmplY3QgU2V0XVwiXT1UdFtcIltvYmplY3QgV2Vha01hcF1cIl09ZmFsc2U7dmFyIFN0PXtsZWFkaW5nOmZhbHNlLG1heFdhaXQ6MCx0cmFpbGluZzpmYWxzZX0sV3Q9e1wiXFx4YzBcIjpcIkFcIixcIlxceGMxXCI6XCJBXCIsXCJcXHhjMlwiOlwiQVwiLFwiXFx4YzNcIjpcIkFcIixcIlxceGM0XCI6XCJBXCIsXCJcXHhjNVwiOlwiQVwiLFwiXFx4ZTBcIjpcImFcIixcIlxceGUxXCI6XCJhXCIsXCJcXHhlMlwiOlwiYVwiLFwiXFx4ZTNcIjpcImFcIixcIlxceGU0XCI6XCJhXCIsXCJcXHhlNVwiOlwiYVwiLFwiXFx4YzdcIjpcIkNcIixcIlxceGU3XCI6XCJjXCIsXCJcXHhkMFwiOlwiRFwiLFwiXFx4ZjBcIjpcImRcIixcIlxceGM4XCI6XCJFXCIsXCJcXHhjOVwiOlwiRVwiLFwiXFx4Y2FcIjpcIkVcIixcIlxceGNiXCI6XCJFXCIsXCJcXHhlOFwiOlwiZVwiLFwiXFx4ZTlcIjpcImVcIixcIlxceGVhXCI6XCJlXCIsXCJcXHhlYlwiOlwiZVwiLFwiXFx4Y2NcIjpcIklcIixcIlxceGNkXCI6XCJJXCIsXCJcXHhjZVwiOlwiSVwiLFwiXFx4Y2ZcIjpcIklcIixcIlxceGVjXCI6XCJpXCIsXCJcXHhlZFwiOlwiaVwiLFwiXFx4ZWVcIjpcImlcIixcIlxceGVmXCI6XCJpXCIsXCJcXHhkMVwiOlwiTlwiLFwiXFx4ZjFcIjpcIm5cIixcIlxceGQyXCI6XCJPXCIsXCJcXHhkM1wiOlwiT1wiLFwiXFx4ZDRcIjpcIk9cIixcIlxceGQ1XCI6XCJPXCIsXCJcXHhkNlwiOlwiT1wiLFwiXFx4ZDhcIjpcIk9cIixcIlxceGYyXCI6XCJvXCIsXCJcXHhmM1wiOlwib1wiLFwiXFx4ZjRcIjpcIm9cIixcIlxceGY1XCI6XCJvXCIsXCJcXHhmNlwiOlwib1wiLFwiXFx4ZjhcIjpcIm9cIixcIlxceGQ5XCI6XCJVXCIsXCJcXHhkYVwiOlwiVVwiLFwiXFx4ZGJcIjpcIlVcIixcIlxceGRjXCI6XCJVXCIsXCJcXHhmOVwiOlwidVwiLFwiXFx4ZmFcIjpcInVcIixcIlxceGZiXCI6XCJ1XCIsXCJcXHhmY1wiOlwidVwiLFwiXFx4ZGRcIjpcIllcIixcIlxceGZkXCI6XCJ5XCIsXCJcXHhmZlwiOlwieVwiLFwiXFx4YzZcIjpcIkFlXCIsXCJcXHhlNlwiOlwiYWVcIixcIlxceGRlXCI6XCJUaFwiLFwiXFx4ZmVcIjpcInRoXCIsXCJcXHhkZlwiOlwic3NcIn0sTnQ9e1wiJlwiOlwiJmFtcDtcIixcIjxcIjpcIiZsdDtcIixcIj5cIjpcIiZndDtcIiwnXCInOlwiJnF1b3Q7XCIsXCInXCI6XCImIzM5O1wiLFwiYFwiOlwiJiM5NjtcIn0sVXQ9e1wiJmFtcDtcIjpcIiZcIixcIiZsdDtcIjpcIjxcIixcIiZndDtcIjpcIj5cIixcIiZxdW90O1wiOidcIicsXCImIzM5O1wiOlwiJ1wiLFwiJiM5NjtcIjpcImBcIn0sRnQ9e1wiZnVuY3Rpb25cIjp0cnVlLG9iamVjdDp0cnVlfSxMdD17XCJcXFxcXCI6XCJcXFxcXCIsXCInXCI6XCInXCIsXCJcXG5cIjpcIm5cIixcIlxcclwiOlwiclwiLFwiXFx1MjAyOFwiOlwidTIwMjhcIixcIlxcdTIwMjlcIjpcInUyMDI5XCJ9LCR0PUZ0W3R5cGVvZiB3aW5kb3ddJiZ3aW5kb3chPT0odGhpcyYmdGhpcy53aW5kb3cpP3dpbmRvdzp0aGlzLEJ0PUZ0W3R5cGVvZiBleHBvcnRzXSYmZXhwb3J0cyYmIWV4cG9ydHMubm9kZVR5cGUmJmV4cG9ydHMsRnQ9RnRbdHlwZW9mIG1vZHVsZV0mJm1vZHVsZSYmIW1vZHVsZS5ub2RlVHlwZSYmbW9kdWxlLHp0PUJ0JiZGdCYmdHlwZW9mIGdsb2JhbD09XCJvYmplY3RcIiYmZ2xvYmFsO1xuIXp0fHx6dC5nbG9iYWwhPT16dCYmenQud2luZG93IT09enQmJnp0LnNlbGYhPT16dHx8KCR0PXp0KTt2YXIgenQ9RnQmJkZ0LmV4cG9ydHM9PT1CdCYmQnQsRHQ9bSgpO3R5cGVvZiBkZWZpbmU9PVwiZnVuY3Rpb25cIiYmdHlwZW9mIGRlZmluZS5hbWQ9PVwib2JqZWN0XCImJmRlZmluZS5hbWQ/KCR0Ll89RHQsIGRlZmluZShmdW5jdGlvbigpe3JldHVybiBEdH0pKTpCdCYmRnQ/enQ/KEZ0LmV4cG9ydHM9RHQpLl89RHQ6QnQuXz1EdDokdC5fPUR0fSkuY2FsbCh0aGlzKTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgnYXJjaGl2ZScsIGZ1bmN0aW9uIChkYXRhKSB7XG5cdHZhciBhcmNoaXZlID0ge307XG5cblx0YXJjaGl2ZS5zZW5kRXh0ZXJuYWxVUkwgPSBmdW5jdGlvbihleHRlcm5hbFVSTCwgdGFncykge1xuXHRcdHJldHVybiBkYXRhLnBvc3RDb3ZlcihleHRlcm5hbFVSTCwgdGFncyk7XG5cdH07XG5cblx0cmV0dXJuIGFyY2hpdmU7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgnY2FjaGUnLCBmdW5jdGlvbiAoJHEsICRsb2csIGRhdGEpIHtcblx0dmFyIGNhY2hlID0ge307XG5cblx0dmFyIGxpYnJhcnkgPSBudWxsO1xuXHR2YXIgc2VjdGlvbnMgPSB7fTtcblx0dmFyIGJvb2tzID0ge307XG5cdHZhciBpbWFnZXMgPSB7fTtcblxuXHRjYWNoZS5pbml0ID0gZnVuY3Rpb24obGlicmFyeU1vZGVsLCBzZWN0aW9uTW9kZWxzLCBib29rTW9kZWxzLCBjb3ZlcnMpIHtcblx0XHR2YXIgbGlicmFyeUxvYWQgPSBsb2FkTGlicmFyeURhdGEobGlicmFyeU1vZGVsKTtcblx0XHR2YXIgc2VjdGlvbnNMb2FkID0gW107XG5cdFx0dmFyIGJvb2tzTG9hZCA9IFtdO1xuXHRcdHZhciBpbWFnZXNMb2FkID0gW107XG5cdFx0dmFyIG1vZGVsLCBjb3ZlcklkOyAvLyBpdGVyYXRvcnNcblxuXHRcdGZvciAobW9kZWwgaW4gc2VjdGlvbk1vZGVscykge1xuXHRcdFx0c2VjdGlvbnNMb2FkLnB1c2goYWRkU2VjdGlvbihtb2RlbCkpO1xuXHRcdH1cblxuXHRcdGZvciAobW9kZWwgaW4gYm9va01vZGVscykge1xuXHRcdFx0Ym9va3NMb2FkLnB1c2goYWRkQm9vayhtb2RlbCkpO1xuXHRcdH1cblxuXHRcdGZvciAoY292ZXJJZCBpbiBjb3ZlcnMpIHtcblx0XHRcdGltYWdlc0xvYWQucHVzaChhZGRJbWFnZUJ5RHRvKGNvdmVyc1tjb3ZlcklkXSkpO1xuXHRcdH1cblxuXHRcdHZhciBwcm9taXNlID0gJHEuYWxsKHtcblx0XHRcdGxpYnJhcnlDYWNoZTogbGlicmFyeUxvYWQsIFxuXHRcdFx0c2VjdGlvbnNMb2FkOiAkcS5hbGwoc2VjdGlvbnNMb2FkKSwgXG5cdFx0XHRib29rc0xvYWQ6ICRxLmFsbChib29rc0xvYWQpLFxuXHRcdFx0aW1hZ2VzTG9hZDogJHEuYWxsKGltYWdlc0xvYWQpXG5cdFx0fSkudGhlbihmdW5jdGlvbiAocmVzdWx0cykge1xuXHRcdFx0bGlicmFyeSA9IHJlc3VsdHMubGlicmFyeUNhY2hlO1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIHByb21pc2U7XG5cdH07XG5cblx0Y2FjaGUuZ2V0TGlicmFyeSA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBsaWJyYXJ5O1xuXHR9O1xuXG5cdGNhY2hlLmdldFNlY3Rpb24gPSBmdW5jdGlvbihtb2RlbCkge1xuXHRcdHJldHVybiBjb21tb25HZXR0ZXIoc2VjdGlvbnMsIG1vZGVsLCBhZGRTZWN0aW9uKTtcblx0fTtcblxuXHRjYWNoZS5nZXRCb29rID0gZnVuY3Rpb24obW9kZWwpIHtcblx0XHRyZXR1cm4gY29tbW9uR2V0dGVyKGJvb2tzLCBtb2RlbCwgYWRkQm9vayk7XG5cdH07XG5cblx0Y2FjaGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbihpZCkge1xuXHRcdHJldHVybiBjb21tb25HZXR0ZXIoaW1hZ2VzLCBpZCwgYWRkSW1hZ2VCeUlkKTtcblx0fTtcblxuXHR2YXIgYWRkU2VjdGlvbiA9IGZ1bmN0aW9uKG1vZGVsKSB7XG5cdFx0cmV0dXJuIGNvbW1vbkFkZGVyKHNlY3Rpb25zLCBtb2RlbCwgbG9hZFNlY3Rpb25EYXRhKTtcblx0fTtcblxuXHR2YXIgYWRkQm9vayA9IGZ1bmN0aW9uKG1vZGVsKSB7XG5cdFx0cmV0dXJuIGNvbW1vbkFkZGVyKGJvb2tzLCBtb2RlbCwgbG9hZEJvb2tEYXRhKTtcblx0fTtcblxuXHR2YXIgYWRkSW1hZ2VCeUlkID0gZnVuY3Rpb24oaWQpIHtcblx0XHRyZXR1cm4gZGF0YS5nZXRDb3ZlcihpZCkudGhlbihmdW5jdGlvbiAoY292ZXJEdG8pIHtcblx0XHRcdHJldHVybiBkYXRhLmxvYWRJbWFnZShjb3ZlckR0by51cmwpLnRoZW4oZnVuY3Rpb24gKGltYWdlKSB7XG5cdFx0XHRcdHJldHVybiBhZGRJbWFnZShjb3ZlckR0bywgaW1hZ2UpO1xuXHRcdFx0fSk7XG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24gKCkge1xuXHRcdFx0JGxvZy5lcnJvcignRXJyb3IgYWRkaW5nIGltYWdlIGJ5IGlkOicsIGlkKTtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH0pO1xuXHR9O1xuXG5cdHZhciBhZGRJbWFnZUJ5RHRvID0gZnVuY3Rpb24oY292ZXJEdG8pIHtcblx0XHRyZXR1cm4gZGF0YS5sb2FkSW1hZ2UoY292ZXJEdG8udXJsKS50aGVuKGZ1bmN0aW9uIChpbWFnZSkge1xuXHRcdFx0cmV0dXJuIGFkZEltYWdlKGNvdmVyRHRvLCBpbWFnZSk7XG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24gKCkge1xuXHRcdFx0JGxvZy5lcnJvcignRXJyb3IgYWRkaW5nIGltYWdlIGJ5IGR0bzonLCBjb3ZlckR0by5pZCk7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9KTtcblx0fTtcblxuXHR2YXIgYWRkSW1hZ2UgPSBmdW5jdGlvbihkdG8sIGltYWdlKSB7XG5cdFx0dmFyIGxvYWRlZENhY2hlID0ge1xuXHRcdFx0ZHRvOiBkdG8sXG5cdFx0XHRpbWFnZTogaW1hZ2Vcblx0XHR9O1xuXG5cdFx0aW1hZ2VzW2R0by5pZF0gPSBsb2FkZWRDYWNoZTtcblx0XHRyZXR1cm4gbG9hZGVkQ2FjaGU7XG5cdH07XG5cblx0dmFyIGNvbW1vbkdldHRlciA9IGZ1bmN0aW9uKGZyb20sIGtleSwgYWRkRnVuY3Rpb24pIHtcblx0XHR2YXIgcmVzdWx0ID0gZnJvbVtrZXldO1xuXG5cdFx0aWYoIXJlc3VsdCkge1xuXHRcdFx0cmVzdWx0ID0gYWRkRnVuY3Rpb24oa2V5KTtcblx0XHR9XG5cblx0XHRyZXR1cm4gJHEud2hlbihyZXN1bHQpO1xuXHR9O1xuXG5cdHZhciBjb21tb25BZGRlciA9IGZ1bmN0aW9uKHdoZXJlLCB3aGF0LCBsb2FkZXIpIHtcblx0XHR2YXIgcHJvbWlzZSA9IGxvYWRlcih3aGF0KS50aGVuKGZ1bmN0aW9uIChsb2FkZWRDYWNoZSkge1xuXHRcdFx0d2hlcmVbd2hhdF0gPSBsb2FkZWRDYWNoZTtcblxuXHRcdFx0cmV0dXJuIGxvYWRlZENhY2hlO1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIHByb21pc2U7XG5cdH07XG5cblx0dmFyIGxvYWRMaWJyYXJ5RGF0YSA9IGZ1bmN0aW9uKG1vZGVsKSB7XG5cdFx0dmFyIHBhdGggPSAnL29iai9saWJyYXJpZXMve21vZGVsfS8nLnJlcGxhY2UoJ3ttb2RlbH0nLCBtb2RlbCk7XG4gICAgICAgIHZhciBtb2RlbFVybCA9IHBhdGggKyAnbW9kZWwuanNvbic7XG4gICAgICAgIHZhciBtYXBVcmwgPSBwYXRoICsgJ21hcC5qcGcnO1xuXG4gICAgICAgIHZhciBwcm9taXNlID0gJHEuYWxsKHtcbiAgICAgICAgXHRnZW9tZXRyeTogZGF0YS5sb2FkR2VvbWV0cnkobW9kZWxVcmwpLCBcbiAgICAgICAgXHRtYXBJbWFnZTogZGF0YS5sb2FkSW1hZ2UobWFwVXJsKVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcblx0fTtcblxuXHR2YXIgbG9hZFNlY3Rpb25EYXRhID0gZnVuY3Rpb24obW9kZWwpIHtcblx0XHR2YXIgcGF0aCA9ICcvb2JqL3NlY3Rpb25zL3ttb2RlbH0vJy5yZXBsYWNlKCd7bW9kZWx9JywgbW9kZWwpO1xuICAgICAgICB2YXIgbW9kZWxVcmwgPSBwYXRoICsgJ21vZGVsLmpzJztcbiAgICAgICAgdmFyIG1hcFVybCA9IHBhdGggKyAnbWFwLmpwZyc7XG4gICAgICAgIHZhciBkYXRhVXJsID0gcGF0aCArICdkYXRhLmpzb24nO1xuXG4gICAgICAgIHZhciBwcm9taXNlID0gJHEuYWxsKHtcbiAgICAgICAgXHRnZW9tZXRyeTogZGF0YS5sb2FkR2VvbWV0cnkobW9kZWxVcmwpLCBcbiAgICAgICAgXHRtYXBJbWFnZTogZGF0YS5sb2FkSW1hZ2UobWFwVXJsKSwgXG4gICAgICAgIFx0ZGF0YTogZGF0YS5nZXREYXRhKGRhdGFVcmwpXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuXHR9O1xuXG5cdHZhciBsb2FkQm9va0RhdGEgPSBmdW5jdGlvbihtb2RlbCkge1xuXHRcdHZhciBwYXRoID0gJy9vYmovYm9va3Mve21vZGVsfS8nLnJlcGxhY2UoJ3ttb2RlbH0nLCBtb2RlbCk7XG4gICAgICAgIHZhciBtb2RlbFVybCA9IHBhdGggKyAnbW9kZWwuanMnO1xuICAgICAgICB2YXIgbWFwVXJsID0gcGF0aCArICdtYXAuanBnJztcbiAgICAgICAgdmFyIGJ1bXBNYXBVcmwgPSBwYXRoICsgJ2J1bXBfbWFwLmpwZyc7XG4gICAgICAgIHZhciBzcGVjdWxhck1hcFVybCA9IHBhdGggKyAnc3BlY3VsYXJfbWFwLmpwZyc7XG5cbiAgICAgICAgdmFyIHByb21pc2UgPSAkcS5hbGwoe1xuICAgICAgICBcdGdlb21ldHJ5OiBkYXRhLmxvYWRHZW9tZXRyeShtb2RlbFVybCksXG4gICAgICAgIFx0bWFwSW1hZ2U6IGRhdGEubG9hZEltYWdlKG1hcFVybCkuY2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICBcdFx0JGxvZy5lcnJvcignQ2FjaGU6IEVycm9yIGxvYWRpbmcgYm9vayBtYXA6JywgbW9kZWwpO1xuICAgICAgICBcdFx0cmV0dXJuIG51bGw7XG4gICAgICAgIFx0fSksXG4gICAgICAgIFx0YnVtcE1hcEltYWdlOiBkYXRhLmxvYWRJbWFnZShidW1wTWFwVXJsKS5jYXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIFx0XHQkbG9nLmVycm9yKCdDYWNoZTogRXJyb3IgbG9hZGluZyBib29rIGJ1bXBNYXA6JywgbW9kZWwpO1xuICAgICAgICBcdFx0cmV0dXJuIG51bGw7XG4gICAgICAgIFx0fSksXG4gICAgICAgIFx0c3BlY3VsYXJNYXBJbWFnZTogZGF0YS5sb2FkSW1hZ2Uoc3BlY3VsYXJNYXBVcmwpLmNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgXHRcdCRsb2cuZXJyb3IoJ0NhY2hlOiBFcnJvciBsb2FkaW5nIGJvb2sgc3BlY3VsYXJNYXA6JywgbW9kZWwpO1xuICAgICAgICBcdFx0cmV0dXJuIG51bGw7XG4gICAgICAgIFx0fSlcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG5cdH07XG5cblx0cmV0dXJuIGNhY2hlO1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ1ZpcnR1YWxCb29rc2hlbGYnKVxuLmZhY3RvcnkoJ2NhbWVyYScsIGZ1bmN0aW9uIChDYW1lcmFPYmplY3QpIHtcblx0dmFyIGNhbWVyYSA9IHtcblx0XHRIRUlHVEg6IDEuNSxcblx0XHRvYmplY3Q6IG5ldyBDYW1lcmFPYmplY3QoKSxcblx0XHRzZXRQYXJlbnQ6IGZ1bmN0aW9uKHBhcmVudCkge1xuXHRcdFx0cGFyZW50LmFkZCh0aGlzLm9iamVjdCk7XG5cdFx0fSxcblx0XHRnZXRQb3NpdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5vYmplY3QucG9zaXRpb247XG5cdFx0fVxuXHR9O1xuXG5cdHZhciBpbml0ID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG5cdFx0dmFyIGhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcblx0XHRcblx0XHRjYW1lcmEuY2FtZXJhID0gbmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKDQ1LCB3aWR0aCAvIGhlaWdodCwgMC4wMSwgNTApO1xuXHRcdGNhbWVyYS5vYmplY3QucG9zaXRpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygwLCBjYW1lcmEuSEVJR1RILCAwKTtcblx0XHRjYW1lcmEub2JqZWN0LnJvdGF0aW9uLm9yZGVyID0gJ1lYWic7XG5cblx0XHR2YXIgY2FuZGxlID0gbmV3IFRIUkVFLlBvaW50TGlnaHQoMHg2NjU1NTUsIDEuNiwgMTApO1xuXHRcdGNhbmRsZS5wb3NpdGlvbi5zZXQoMCwgMCwgMCk7XG5cdFx0Y2FtZXJhLm9iamVjdC5hZGQoY2FuZGxlKTtcblxuXHRcdGNhbWVyYS5vYmplY3QuYWRkKGNhbWVyYS5jYW1lcmEpO1xuXHR9O1xuXG5cdGNhbWVyYS5yb3RhdGUgPSBmdW5jdGlvbih4LCB5KSB7XG5cdFx0dmFyIG5ld1ggPSB0aGlzLm9iamVjdC5yb3RhdGlvbi54ICsgeSAqIDAuMDAwMSB8fCAwO1xuXHRcdHZhciBuZXdZID0gdGhpcy5vYmplY3Qucm90YXRpb24ueSArIHggKiAwLjAwMDEgfHwgMDtcblxuXHRcdGlmKG5ld1ggPCAxLjU3ICYmIG5ld1ggPiAtMS41Nykge1x0XG5cdFx0XHR0aGlzLm9iamVjdC5yb3RhdGlvbi54ID0gbmV3WDtcblx0XHR9XG5cblx0XHR0aGlzLm9iamVjdC5yb3RhdGlvbi55ID0gbmV3WTtcblx0fTtcblxuXHRjYW1lcmEuZ28gPSBmdW5jdGlvbihzcGVlZCkge1xuXHRcdHZhciBkaXJlY3Rpb24gPSB0aGlzLmdldFZlY3RvcigpO1xuXHRcdHZhciBuZXdQb3NpdGlvbiA9IHRoaXMub2JqZWN0LnBvc2l0aW9uLmNsb25lKCk7XG5cdFx0bmV3UG9zaXRpb24uYWRkKGRpcmVjdGlvbi5tdWx0aXBseVNjYWxhcihzcGVlZCkpO1xuXG5cdFx0dGhpcy5vYmplY3QubW92ZShuZXdQb3NpdGlvbik7XG5cdH07XG5cblx0Y2FtZXJhLmdldFZlY3RvciA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciB2ZWN0b3IgPSBuZXcgVEhSRUUuVmVjdG9yMygwLCAwLCAtMSk7XG5cblx0XHRyZXR1cm4gdmVjdG9yLmFwcGx5RXVsZXIodGhpcy5vYmplY3Qucm90YXRpb24pO1xuXHR9O1xuXG5cdGluaXQoKTtcblxuXHRyZXR1cm4gY2FtZXJhO1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ1ZpcnR1YWxCb29rc2hlbGYnKVxuLyogXG4gKiBjb250cm9scy5qcyBpcyBhIHNlcnZpY2UgZm9yIHByb2Nlc3Npbmcgbm90IFVJKG1lbnVzKSBldmVudHMgXG4gKiBsaWtlIG1vdXNlLCBrZXlib2FyZCwgdG91Y2ggb3IgZ2VzdHVyZXMuXG4gKlxuICogVE9ETzogcmVtb3ZlIGFsbCBidXNpbmVzIGxvZ2ljIGZyb20gdGhlcmUgYW5kIGxlYXZlIG9ubHlcbiAqIGV2ZW50cyBmdW5jdGlvbmFsaXR5IHRvIG1ha2UgaXQgbW9yZSBzaW1pbGFyIHRvIHVzdWFsIGNvbnRyb2xsZXJcbiAqL1xuLmZhY3RvcnkoJ2NvbnRyb2xzJywgZnVuY3Rpb24gKCRxLCAkbG9nLCBTZWxlY3Rvck1ldGEsIEJvb2tPYmplY3QsIFNoZWxmT2JqZWN0LCBTZWN0aW9uT2JqZWN0LCBjYW1lcmEsIG5hdmlnYXRpb24sIGVudmlyb25tZW50LCBtb3VzZSwgc2VsZWN0b3IsIHByZXZpZXcsIGJsb2NrKSB7XG5cdHZhciBjb250cm9scyA9IHt9O1xuXG5cdGNvbnRyb2xzLmluaXQgPSBmdW5jdGlvbigpIHtcblx0XHRjb250cm9scy5pbml0TGlzdGVuZXJzKCk7XG5cdH07XG5cblx0Y29udHJvbHMuaW5pdExpc3RlbmVycyA9IGZ1bmN0aW9uKCkge1xuXHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGNvbnRyb2xzLm9uTW91c2VEb3duLCBmYWxzZSk7XG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGNvbnRyb2xzLm9uTW91c2VVcCwgZmFsc2UpO1xuXHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGNvbnRyb2xzLm9uTW91c2VNb3ZlLCBmYWxzZSk7XHRcblx0XHRkb2N1bWVudC5vbmNvbnRleHRtZW51ID0gZnVuY3Rpb24oKSB7cmV0dXJuIGZhbHNlO307XG5cdH07XG5cblx0Y29udHJvbHMudXBkYXRlID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYoIXByZXZpZXcuaXNBY3RpdmUoKSkge1xuXHRcdFx0aWYobW91c2VbM10pIHtcblx0XHRcdFx0Y2FtZXJhLnJvdGF0ZShtb3VzZS5sb25nWCwgbW91c2UubG9uZ1kpO1xuXHRcdFx0fVxuXHRcdFx0aWYobW91c2VbMV0gJiYgbW91c2VbM10pIHtcblx0XHRcdFx0Y2FtZXJhLmdvKG5hdmlnYXRpb24uQlVUVE9OU19HT19TUEVFRCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdGNvbnRyb2xzLm9uTW91c2VEb3duID0gZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRtb3VzZS5kb3duKGV2ZW50KTsgXG5cblx0XHRpZihtb3VzZS5pc0NhbnZhcygpICYmIG1vdXNlWzFdICYmICFtb3VzZVszXSAmJiAhcHJldmlldy5pc0FjdGl2ZSgpKSB7XG5cdFx0XHRjb250cm9scy5zZWxlY3RPYmplY3QoKTtcblx0XHRcdHNlbGVjdG9yLnNlbGVjdEZvY3VzZWQoKTtcblx0XHR9XG5cdH07XG5cblx0Y29udHJvbHMub25Nb3VzZVVwID0gZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRtb3VzZS51cChldmVudCk7XG5cdFx0XG5cdFx0aWYoZXZlbnQud2hpY2ggPT09IDEgJiYgIXByZXZpZXcuaXNBY3RpdmUoKSkge1xuXHRcdFx0aWYoc2VsZWN0b3IuaXNTZWxlY3RlZEVkaXRhYmxlKCkpIHtcblx0XHRcdFx0dmFyIG9iaiA9IHNlbGVjdG9yLmdldFNlbGVjdGVkT2JqZWN0KCk7XG5cblx0XHRcdFx0aWYob2JqLmNoYW5nZWQpIHtcblx0XHRcdFx0XHRibG9jay5nbG9iYWwuc3RhcnQoKTtcblx0XHRcdFx0XHRvYmouc2F2ZSgpLmNhdGNoKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdG9iai5yb2xsYmFjaygpO1xuXHRcdFx0XHRcdH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0YmxvY2suZ2xvYmFsLnN0b3AoKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fTtcblxuXHRjb250cm9scy5vbk1vdXNlTW92ZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0bW91c2UubW92ZShldmVudCk7XG5cblx0XHRpZihtb3VzZS5pc0NhbnZhcygpICYmICFwcmV2aWV3LmlzQWN0aXZlKCkpIHtcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHRcdGlmKG1vdXNlWzFdICYmICFtb3VzZVszXSkge1x0XHRcblx0XHRcdFx0Y29udHJvbHMubW92ZU9iamVjdCgpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29udHJvbHMuc2VsZWN0T2JqZWN0KCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdC8vKioqKlxuXG5cdGNvbnRyb2xzLnNlbGVjdE9iamVjdCA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhclxuXHRcdFx0aW50ZXJzZWN0ZWQsXG5cdFx0XHRvYmplY3Q7XG5cblx0XHRpZihtb3VzZS5pc0NhbnZhcygpICYmIGVudmlyb25tZW50LmxpYnJhcnkpIHtcblx0XHRcdC8vVE9ETzogb3B0aW1pemVcblx0XHRcdGludGVyc2VjdGVkID0gbW91c2UuZ2V0SW50ZXJzZWN0ZWQoZW52aXJvbm1lbnQubGlicmFyeS5jaGlsZHJlbiwgdHJ1ZSwgW0Jvb2tPYmplY3RdKTtcblx0XHRcdGlmKCFpbnRlcnNlY3RlZCkge1xuXHRcdFx0XHRpbnRlcnNlY3RlZCA9IG1vdXNlLmdldEludGVyc2VjdGVkKGVudmlyb25tZW50LmxpYnJhcnkuY2hpbGRyZW4sIHRydWUsIFtTaGVsZk9iamVjdF0pO1xuXHRcdFx0fVxuXHRcdFx0aWYoIWludGVyc2VjdGVkKSB7XG5cdFx0XHRcdGludGVyc2VjdGVkID0gbW91c2UuZ2V0SW50ZXJzZWN0ZWQoZW52aXJvbm1lbnQubGlicmFyeS5jaGlsZHJlbiwgdHJ1ZSwgW1NlY3Rpb25PYmplY3RdKTtcblx0XHRcdH1cblx0XHRcdGlmKGludGVyc2VjdGVkKSB7XG5cdFx0XHRcdG9iamVjdCA9IGludGVyc2VjdGVkLm9iamVjdDtcblx0XHRcdH1cblxuXHRcdFx0c2VsZWN0b3IuZm9jdXMobmV3IFNlbGVjdG9yTWV0YShvYmplY3QpKTtcblx0XHR9XG5cdH07XG5cblx0Y29udHJvbHMubW92ZU9iamVjdCA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBtb3VzZVZlY3Rvcjtcblx0XHR2YXIgbmV3UG9zaXRpb247XG5cdFx0dmFyIHBhcmVudDtcblx0XHR2YXIgc2VsZWN0ZWRPYmplY3Q7XG5cblx0XHRpZihzZWxlY3Rvci5pc1NlbGVjdGVkRWRpdGFibGUoKSkge1xuXHRcdFx0c2VsZWN0ZWRPYmplY3QgPSBzZWxlY3Rvci5nZXRTZWxlY3RlZE9iamVjdCgpO1xuXHRcdFx0bW91c2VWZWN0b3IgPSBjYW1lcmEuZ2V0VmVjdG9yKCk7XHRcblx0XHRcdG5ld1Bvc2l0aW9uID0gc2VsZWN0ZWRPYmplY3QucG9zaXRpb24uY2xvbmUoKTtcblx0XHRcdHBhcmVudCA9IHNlbGVjdGVkT2JqZWN0LnBhcmVudDtcblx0XHRcdHBhcmVudC5sb2NhbFRvV29ybGQobmV3UG9zaXRpb24pO1xuXG5cdFx0XHRuZXdQb3NpdGlvbi54IC09IChtb3VzZVZlY3Rvci56ICogbW91c2UuZFggKyBtb3VzZVZlY3Rvci54ICogbW91c2UuZFkpICogMC4wMDM7XG5cdFx0XHRuZXdQb3NpdGlvbi56IC09ICgtbW91c2VWZWN0b3IueCAqIG1vdXNlLmRYICsgbW91c2VWZWN0b3IueiAqIG1vdXNlLmRZKSAqIDAuMDAzO1xuXG5cdFx0XHRwYXJlbnQud29ybGRUb0xvY2FsKG5ld1Bvc2l0aW9uKTtcblx0XHRcdHNlbGVjdGVkT2JqZWN0Lm1vdmUobmV3UG9zaXRpb24pO1xuXHRcdH1cblx0fTtcblxuXHRyZXR1cm4gY29udHJvbHM7XHRcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5mYWN0b3J5KCdkYXRhJywgZnVuY3Rpb24gKCRodHRwLCAkcSkge1xuXHR2YXIgZGF0YSA9IHt9O1xuXG5cdGRhdGEuVEVYVFVSRV9SRVNPTFVUSU9OID0gNTEyO1xuXHRkYXRhLkNPVkVSX01BWF9ZID0gMzk0O1xuXHRkYXRhLkNPVkVSX0ZBQ0VfWCA9IDI5NjtcblxuICAgIGRhdGEubG9hZEltYWdlID0gZnVuY3Rpb24odXJsKSB7XG4gICAgICAgIHZhciBkZWZmZXJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgIHZhciBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgXG4gICAgICAgIGltZy5jcm9zc09yaWdpbiA9ICcnOyBcbiAgICAgICAgaW1nLnNyYyA9IHVybDtcbiAgICAgICAgXG4gICAgICAgIGlmKGltZy5jb21wbGV0ZSkge1xuICAgICAgICAgICAgZGVmZmVyZWQucmVzb2x2ZShpbWcpO1xuICAgICAgICB9XG5cbiAgICAgICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGRlZmZlcmVkLnJlc29sdmUoaW1nKTtcbiAgICAgICAgfTtcbiAgICAgICAgaW1nLm9uZXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGRlZmZlcmVkLnJlamVjdChlcnJvcik7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGRlZmZlcmVkLnByb21pc2U7IFxuICAgIH07XG5cblx0ZGF0YS5nZXRDb3ZlciA9IGZ1bmN0aW9uKGlkKSB7XG5cdFx0cmV0dXJuICRodHRwLmdldCgnL2NvdmVyLycgKyBpZCkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdFx0XHRyZXR1cm4gcmVzLmRhdGE7XG5cdFx0fSk7XG5cdH07XG5cbiAgICBkYXRhLnBvc3RDb3ZlciA9IGZ1bmN0aW9uKGV4dGVybmFsVVJMLCB0YWdzKSB7XG4gICAgXHR2YXIgZGF0YSA9IHtcbiAgICBcdFx0dXJsOiBleHRlcm5hbFVSTCxcbiAgICBcdFx0dGFnczogdGFnc1xuICAgIFx0fTtcblxuICAgIFx0cmV0dXJuICRodHRwLnBvc3QoJy9jb3ZlcicsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgIFx0XHRyZXR1cm4gcmVzLmRhdGE7XG4gICAgXHR9KTtcbiAgICB9O1xuXG4gICAgZGF0YS5sb2dvdXQgPSBmdW5jdGlvbigpIHtcbiAgICBcdHJldHVybiAkaHR0cC5wb3N0KCcvYXV0aC9sb2dvdXQnKTtcbiAgICB9O1xuXG5cdGRhdGEuZ2V0VXNlciA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiAkaHR0cC5nZXQoJy91c2VyJyk7XG5cdH07XG5cblx0ZGF0YS5nZXRVc2VyQm9va3MgPSBmdW5jdGlvbih1c2VySWQpIHtcblx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvZnJlZUJvb2tzLycgKyB1c2VySWQpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHRcdFx0cmV0dXJuIHJlcy5kYXRhO1xuXHRcdH0pO1xuXHR9O1xuXG5cdGRhdGEucG9zdEJvb2sgPSBmdW5jdGlvbihib29rKSB7XG5cdFx0cmV0dXJuICRodHRwLnBvc3QoJy9ib29rJywgYm9vaykudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdFx0XHRyZXR1cm4gcmVzLmRhdGE7XG5cdFx0fSk7XG5cdH07XG5cblx0ZGF0YS5kZWxldGVCb29rID0gZnVuY3Rpb24oaWQpIHtcblx0XHRyZXR1cm4gJGh0dHAoe1xuXHRcdFx0bWV0aG9kOiAnREVMRVRFJyxcblx0XHRcdHVybDogJy9ib29rLycgKyBpZFxuXHRcdH0pO1xuXHR9O1xuXG5cdGRhdGEuZ2V0VUlEYXRhID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuICRodHRwLmdldCgnL29iai9kYXRhLmpzb24nKTtcblx0fTtcblxuXHRkYXRhLmdldExpYnJhcmllcyA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiAkaHR0cC5nZXQoJy9saWJyYXJpZXMnKTtcblx0fTtcblxuXHRkYXRhLmdldExpYnJhcnkgPSBmdW5jdGlvbihsaWJyYXJ5SWQpIHtcblx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvbGlicmFyeS8nICsgbGlicmFyeUlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcblx0XHRcdHJldHVybiByZXMuZGF0YTtcblx0XHR9KTtcblx0fTtcblxuXHRkYXRhLnBvc3RMaWJyYXJ5ID0gZnVuY3Rpb24obGlicmFyeU1vZGVsKSB7XG4gICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvbGlicmFyeS8nICsgbGlicmFyeU1vZGVsKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuZGF0YTtcbiAgICAgICAgfSk7XG5cdH07XG5cblx0ZGF0YS5nZXRTZWN0aW9ucyA9IGZ1bmN0aW9uKGxpYnJhcnlJZCkge1xuICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvc2VjdGlvbnMvJyArIGxpYnJhcnlJZCkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmRhdGE7XG4gICAgICAgIH0pO1xuXHR9O1xuXG5cdGRhdGEucG9zdFNlY3Rpb24gPSBmdW5jdGlvbihzZWN0aW9uRGF0YSkge1xuICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnL3NlY3Rpb24nLCBzZWN0aW9uRGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgIFx0cmV0dXJuIHJlcy5kYXRhO1xuICAgICAgICB9KTtcblx0fTtcblxuXHRkYXRhLmRlbGV0ZVNlY3Rpb24gPSBmdW5jdGlvbihpZCkge1xuXHRcdHJldHVybiAkaHR0cCh7XG5cdFx0XHRtZXRob2Q6ICdERUxFVEUnLFxuXHRcdFx0dXJsOiAnL3NlY3Rpb25zLycgKyBpZFxuXHRcdH0pO1xuXHR9O1xuXG5cdGRhdGEubG9hZEdlb21ldHJ5ID0gZnVuY3Rpb24obGluaykge1xuICAgICAgICB2YXIgZGVmZmVyZWQgPSAkcS5kZWZlcigpO1xuXHRcdHZhciBqc29uTG9hZGVyID0gbmV3IFRIUkVFLkpTT05Mb2FkZXIoKTtcblxuICAgICAgICAvL1RPRE86IGZvdW5kIG5vIHdheSB0byByZWplY3Rcblx0XHRqc29uTG9hZGVyLmxvYWQobGluaywgZnVuY3Rpb24gKGdlb21ldHJ5KSB7XG5cdFx0XHRnZW9tZXRyeS5jb21wdXRlQm91bmRpbmdCb3goKTtcblx0XHRcdGRlZmZlcmVkLnJlc29sdmUoZ2VvbWV0cnkpO1xuXHRcdH0pO1xuXG4gICAgICAgIHJldHVybiBkZWZmZXJlZC5wcm9taXNlO1xuXHR9O1xuXG5cdGRhdGEuZ2V0RGF0YSA9IGZ1bmN0aW9uKHVybCkge1xuICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmRhdGE7XG4gICAgICAgIH0pO1xuXHR9O1xuXG5cdGRhdGEucG9zdEZlZWRiYWNrID0gZnVuY3Rpb24oZHRvKSB7XG4gICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvZmVlZGJhY2snLCBkdG8pO1xuXHR9O1xuXG5cdHJldHVybiBkYXRhO1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ1ZpcnR1YWxCb29rc2hlbGYnKVxuLmZhY3RvcnkoJ2RpYWxvZycsIGZ1bmN0aW9uIChuZ0RpYWxvZykge1xuXHR2YXIgZGlhbG9nID0ge307XG5cblx0dmFyIEVSUk9SID0gMTtcblx0dmFyIENPTkZJUk0gPSAyO1xuXHR2YXIgV0FSTklORyA9IDM7XG5cdHZhciBJTkZPID0gNDtcblxuXHR2YXIgaWNvbkNsYXNzTWFwID0ge307XG5cdGljb25DbGFzc01hcFtFUlJPUl0gPSAnZmEtdGltZXMtY2lyY2xlJztcblx0aWNvbkNsYXNzTWFwW0NPTkZJUk1dID0gJ2ZhLXF1ZXN0aW9uLWNpcmNsZSc7XG5cdGljb25DbGFzc01hcFtXQVJOSU5HXSA9ICdmYS1leGNsYW1hdGlvbi10cmlhbmdsZSc7XG5cdGljb25DbGFzc01hcFtJTkZPXSA9ICdmYS1pbmZvLWNpcmNsZSc7XG5cblx0ZGlhbG9nLm9wZW5FcnJvciA9IGZ1bmN0aW9uKG1zZykge1xuXHRcdHJldHVybiBvcGVuRGlhbG9nKG1zZywgRVJST1IpO1xuXHR9O1xuXG5cdGRpYWxvZy5vcGVuQ29uZmlybSA9IGZ1bmN0aW9uKG1zZykge1xuXHRcdHJldHVybiBvcGVuRGlhbG9nKG1zZywgQ09ORklSTSwgdHJ1ZSk7XG5cdH07XG5cblx0ZGlhbG9nLm9wZW5XYXJuaW5nID0gZnVuY3Rpb24obXNnKSB7XG5cdFx0cmV0dXJuIG9wZW5EaWFsb2cobXNnLCBXQVJOSU5HKTtcblx0fTtcblxuXHRkaWFsb2cub3BlbkluZm8gPSBmdW5jdGlvbihtc2cpIHtcblx0XHRyZXR1cm4gb3BlbkRpYWxvZyhtc2csIElORk8pO1xuXHR9O1xuXG5cdHZhciBvcGVuRGlhbG9nID0gZnVuY3Rpb24obXNnLCB0eXBlLCBjYW5jZWxCdXR0b24pIHtcblx0XHRyZXR1cm4gbmdEaWFsb2cub3BlbkNvbmZpcm0oe1xuXHRcdFx0dGVtcGxhdGU6ICcvdWkvY29uZmlybURpYWxvZycsXG5cdFx0XHRkYXRhOiB7XG5cdFx0XHRcdG1zZzogbXNnLFxuXHRcdFx0XHRpY29uQ2xhc3M6IGdldEljb25DbGFzcyh0eXBlKSxcblx0XHRcdFx0Y2FuY2VsQnV0dG9uOiBjYW5jZWxCdXR0b25cblx0XHRcdH1cblx0XHR9KTtcblx0fTtcblxuXHR2YXIgZ2V0SWNvbkNsYXNzID0gZnVuY3Rpb24odHlwZSkge1xuXHRcdHJldHVybiBpY29uQ2xhc3NNYXBbdHlwZV07XG5cdH07XG5cblx0cmV0dXJuIGRpYWxvZztcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5mYWN0b3J5KCdlbnZpcm9ubWVudCcsIGZ1bmN0aW9uICgkcSwgJGxvZywgJHdpbmRvdywgTGlicmFyeU9iamVjdCwgU2VjdGlvbk9iamVjdCwgQm9va09iamVjdCwgQm9va01hdGVyaWFsLCBkYXRhLCBjYW1lcmEsIGNhY2hlKSB7XG5cdHZhciBlbnZpcm9ubWVudCA9IHt9O1xuXG5cdGVudmlyb25tZW50LkNMRUFSQU5DRSA9IDAuMDAxO1xuXHRlbnZpcm9ubWVudC5MSUJSQVJZX0NBTlZBU19JRCA9ICdMSUJSQVJZJztcblx0IFxuXHR2YXIgbGlicmFyeUR0byA9IG51bGw7XG5cdHZhciBzZWN0aW9ucyA9IG51bGw7XG5cdHZhciBib29rcyA9IG51bGw7XG5cdHZhciBsb2FkZWQgPSBmYWxzZTtcblxuXHRlbnZpcm9ubWVudC5zY2VuZSA9IG51bGw7XG5cdGVudmlyb25tZW50LmxpYnJhcnkgPSBudWxsO1xuXG5cdGVudmlyb25tZW50LmxvYWRMaWJyYXJ5ID0gZnVuY3Rpb24obGlicmFyeUlkKSB7XG5cdFx0Y2xlYXJTY2VuZSgpOyAvLyBpbml0cyBzb21lIGZpZWxkc1xuXG5cdFx0dmFyIHByb21pc2UgPSBkYXRhLmdldExpYnJhcnkobGlicmFyeUlkKS50aGVuKGZ1bmN0aW9uIChkdG8pIHtcblx0XHRcdHZhciBkaWN0ID0gcGFyc2VMaWJyYXJ5RHRvKGR0byk7XG5cdFx0XHRcblx0XHRcdHNlY3Rpb25zID0gZGljdC5zZWN0aW9ucztcblx0XHRcdGJvb2tzID0gZGljdC5ib29rcztcblx0XHRcdGxpYnJhcnlEdG8gPSBkdG87XG5cblx0XHRcdHJldHVybiBpbml0Q2FjaGUobGlicmFyeUR0bywgZGljdC5zZWN0aW9ucywgZGljdC5ib29rcyk7XG5cdFx0fSkudGhlbihmdW5jdGlvbiAoKSB7XG5cdFx0XHRjcmVhdGVMaWJyYXJ5KGxpYnJhcnlEdG8pO1xuXHRcdFx0cmV0dXJuIGNyZWF0ZVNlY3Rpb25zKHNlY3Rpb25zKTtcblx0XHR9KS50aGVuKGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBjcmVhdGVCb29rcyhib29rcyk7XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gcHJvbWlzZTtcblx0fTtcblxuXHRlbnZpcm9ubWVudC5nb1RvTGlicmFyeSA9IGZ1bmN0aW9uKGlkKSB7XG5cdFx0aWYoaWQpIHtcblx0XHRcdCR3aW5kb3cubG9jYXRpb24gPSAnLycgKyBpZDtcblx0XHR9XG5cdH07XG5cblx0ZW52aXJvbm1lbnQuc2V0TG9hZGVkID0gZnVuY3Rpb24odmFsdWUpIHtcblx0XHRsb2FkZWQgPSB2YWx1ZTtcblx0fTtcblxuXHRlbnZpcm9ubWVudC5nZXRMb2FkZWQgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gbG9hZGVkO1xuXHR9O1xuXG5cdGVudmlyb25tZW50LmdldEJvb2sgPSBmdW5jdGlvbihib29rSWQpIHtcblx0XHRyZXR1cm4gZ2V0RGljdE9iamVjdChib29rcywgYm9va0lkKTtcblx0fTtcblxuXHRlbnZpcm9ubWVudC5nZXRTZWN0aW9uID0gZnVuY3Rpb24oc2VjdGlvbklkKSB7XG5cdFx0cmV0dXJuIGdldERpY3RPYmplY3Qoc2VjdGlvbnMsIHNlY3Rpb25JZCk7XG5cdH07XG5cblx0ZW52aXJvbm1lbnQuZ2V0U2hlbGYgPSBmdW5jdGlvbihzZWN0aW9uSWQsIHNoZWxmSWQpIHtcblx0XHR2YXIgc2VjdGlvbiA9IGVudmlyb25tZW50LmdldFNlY3Rpb24oc2VjdGlvbklkKTtcblx0XHR2YXIgc2hlbGYgPSBzZWN0aW9uICYmIHNlY3Rpb24uc2hlbHZlc1tzaGVsZklkXTtcblxuXHRcdHJldHVybiBzaGVsZjtcblx0fTtcblxuXHR2YXIgZ2V0RGljdE9iamVjdCA9IGZ1bmN0aW9uKGRpY3QsIG9iamVjdElkKSB7XG5cdFx0dmFyIGRpY3RJdGVtID0gZGljdFtvYmplY3RJZF07XG5cdFx0dmFyIGRpY3RPYmplY3QgPSBkaWN0SXRlbSAmJiBkaWN0SXRlbS5vYmo7XG5cblx0XHRyZXR1cm4gZGljdE9iamVjdDtcblx0fTtcblxuXHRlbnZpcm9ubWVudC51cGRhdGVTZWN0aW9uID0gZnVuY3Rpb24oZHRvKSB7XG5cdFx0aWYoZHRvLmxpYnJhcnlJZCA9PSBlbnZpcm9ubWVudC5saWJyYXJ5LmlkKSB7XG5cdFx0XHRlbnZpcm9ubWVudC5yZW1vdmVTZWN0aW9uKGR0by5pZCk7XG5cdFx0XHRjcmVhdGVTZWN0aW9uKGR0byk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGVudmlyb25tZW50LnJlbW92ZVNlY3Rpb24oZHRvLmlkKTtcblx0XHR9XHRcblx0fTtcblxuXHRlbnZpcm9ubWVudC51cGRhdGVCb29rID0gZnVuY3Rpb24oZHRvKSB7XG5cdFx0dmFyIHNoZWxmID0gZ2V0Qm9va1NoZWxmKGR0byk7XG5cblx0XHRpZihzaGVsZikge1xuXHRcdFx0ZW52aXJvbm1lbnQucmVtb3ZlQm9vayhkdG8uaWQpO1xuXHRcdFx0Y3JlYXRlQm9vayhkdG8pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRlbnZpcm9ubWVudC5yZW1vdmVCb29rKGR0by5pZCk7XG5cdFx0fVxuXHR9O1xuXG5cdGVudmlyb25tZW50LnJlbW92ZUJvb2sgPSBmdW5jdGlvbihpZCkge1xuXHRcdHJlbW92ZU9iamVjdChib29rcywgaWQpO1xuXHR9O1xuXG5cdGVudmlyb25tZW50LnJlbW92ZVNlY3Rpb24gPSBmdW5jdGlvbihpZCkge1xuXHRcdHJlbW92ZU9iamVjdChzZWN0aW9ucywgaWQpO1xuXHR9O1xuXG5cdHZhciByZW1vdmVPYmplY3QgPSBmdW5jdGlvbihkaWN0LCBrZXkpIHtcblx0XHR2YXIgZGljdEl0ZW0gPSBkaWN0W2tleV07XG5cdFx0aWYoZGljdEl0ZW0pIHtcblx0XHRcdGRlbGV0ZSBkaWN0W2tleV07XG5cdFx0XHRcblx0XHRcdGlmKGRpY3RJdGVtLm9iaikge1xuXHRcdFx0XHRkaWN0SXRlbS5vYmouc2V0UGFyZW50KG51bGwpO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcblxuXHR2YXIgaW5pdENhY2hlID0gZnVuY3Rpb24obGlicmFyeUR0bywgc2VjdGlvbnNEaWN0LCBib29rc0RpY3QpIHtcblx0XHR2YXIgbGlicmFyeU1vZGVsID0gbGlicmFyeUR0by5tb2RlbDtcblx0XHR2YXIgc2VjdGlvbk1vZGVscyA9IHt9O1xuXHRcdHZhciBib29rTW9kZWxzID0ge307XG5cdFx0dmFyIGltYWdlVXJscyA9IHt9O1xuXG5cdFx0Zm9yICh2YXIgc2VjdGlvbklkIGluIHNlY3Rpb25zRGljdCkge1xuXHRcdFx0dmFyIHNlY3Rpb25EdG8gPSBzZWN0aW9uc0RpY3Rbc2VjdGlvbklkXS5kdG87XG5cdFx0XHRzZWN0aW9uTW9kZWxzW3NlY3Rpb25EdG8ubW9kZWxdID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRmb3IgKHZhciBib29rSWQgaW4gYm9va3NEaWN0KSB7XG5cdFx0XHR2YXIgYm9va0R0byA9IGJvb2tzRGljdFtib29rSWRdLmR0bztcblx0XHRcdGJvb2tNb2RlbHNbYm9va0R0by5tb2RlbF0gPSB0cnVlO1xuXG5cdFx0XHRpZihib29rRHRvLmNvdmVyKSB7XG5cdFx0XHRcdGltYWdlVXJsc1tib29rRHRvLmNvdmVyLmlkXSA9IGJvb2tEdG8uY292ZXI7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNhY2hlLmluaXQobGlicmFyeU1vZGVsLCBzZWN0aW9uTW9kZWxzLCBib29rTW9kZWxzLCBpbWFnZVVybHMpO1xuXHR9O1xuXG5cdHZhciBjbGVhclNjZW5lID0gZnVuY3Rpb24oKSB7XG5cdFx0ZW52aXJvbm1lbnQubGlicmFyeSA9IG51bGw7XG5cdFx0c2VjdGlvbnMgPSB7fTtcblx0XHRib29rcyA9IHt9O1xuXG5cdFx0d2hpbGUoZW52aXJvbm1lbnQuc2NlbmUuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuXHRcdFx0aWYoZW52aXJvbm1lbnQuc2NlbmUuY2hpbGRyZW5bMF0uZGlzcG9zZSkge1xuXHRcdFx0XHRlbnZpcm9ubWVudC5zY2VuZS5jaGlsZHJlblswXS5kaXNwb3NlKCk7XG5cdFx0XHR9XG5cdFx0XHRlbnZpcm9ubWVudC5zY2VuZS5yZW1vdmUoZW52aXJvbm1lbnQuc2NlbmUuY2hpbGRyZW5bMF0pO1xuXHRcdH1cblx0fTtcblxuXHR2YXIgcGFyc2VMaWJyYXJ5RHRvID0gZnVuY3Rpb24obGlicmFyeUR0bykge1xuXHRcdHZhciByZXN1bHQgPSB7XG5cdFx0XHRzZWN0aW9uczoge30sXG5cdFx0XHRib29rczoge31cblx0XHR9O1xuXG5cdFx0Zm9yKHZhciBzZWN0aW9uSW5kZXggPSBsaWJyYXJ5RHRvLnNlY3Rpb25zLmxlbmd0aCAtIDE7IHNlY3Rpb25JbmRleCA+PSAwOyBzZWN0aW9uSW5kZXgtLSkge1xuXHRcdFx0dmFyIHNlY3Rpb25EdG8gPSBsaWJyYXJ5RHRvLnNlY3Rpb25zW3NlY3Rpb25JbmRleF07XG5cdFx0XHRyZXN1bHQuc2VjdGlvbnNbc2VjdGlvbkR0by5pZF0gPSB7ZHRvOiBzZWN0aW9uRHRvfTtcblxuXHRcdFx0Zm9yKHZhciBib29rSW5kZXggPSBzZWN0aW9uRHRvLmJvb2tzLmxlbmd0aCAtIDE7IGJvb2tJbmRleCA+PSAwOyBib29rSW5kZXgtLSkge1xuXHRcdFx0XHR2YXIgYm9va0R0byA9IHNlY3Rpb25EdG8uYm9va3NbYm9va0luZGV4XTtcblx0XHRcdFx0cmVzdWx0LmJvb2tzW2Jvb2tEdG8uaWRdID0ge2R0bzogYm9va0R0b307XG5cdFx0XHR9XG5cblx0XHRcdGRlbGV0ZSBzZWN0aW9uRHRvLmJvb2tzO1xuXHRcdH1cblxuXHRcdGRlbGV0ZSBsaWJyYXJ5RHRvLnNlY3Rpb25zO1xuXG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fTtcblxuXHR2YXIgY3JlYXRlTGlicmFyeSA9IGZ1bmN0aW9uKGxpYnJhcnlEdG8pIHtcblx0XHR2YXIgbGlicmFyeSA9IG51bGw7XG5cdFx0dmFyIGxpYnJhcnlDYWNoZSA9IGNhY2hlLmdldExpYnJhcnkoKTtcbiAgICAgICAgdmFyIHRleHR1cmUgPSBuZXcgVEhSRUUuVGV4dHVyZShsaWJyYXJ5Q2FjaGUubWFwSW1hZ2UpO1xuICAgICAgICB2YXIgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoe21hcDogdGV4dHVyZX0pO1xuXG4gICAgICAgIHRleHR1cmUubmVlZHNVcGRhdGUgPSB0cnVlO1xuXHRcdGxpYnJhcnkgPSBuZXcgTGlicmFyeU9iamVjdChsaWJyYXJ5RHRvLCBsaWJyYXJ5Q2FjaGUuZ2VvbWV0cnksIG1hdGVyaWFsKTtcblx0XHRjYW1lcmEuc2V0UGFyZW50KGxpYnJhcnkpO1xuXG5cdFx0ZW52aXJvbm1lbnQuc2NlbmUuYWRkKGxpYnJhcnkpO1xuXHRcdGVudmlyb25tZW50LmxpYnJhcnkgPSBsaWJyYXJ5O1xuXHR9O1xuXG5cdHZhciBjcmVhdGVTZWN0aW9ucyA9IGZ1bmN0aW9uKHNlY3Rpb25zRGljdCkge1xuXHRcdHJldHVybiBjcmVhdGVPYmplY3RzKHNlY3Rpb25zRGljdCwgY3JlYXRlU2VjdGlvbik7XG5cdH07XG5cblx0dmFyIGNyZWF0ZUJvb2tzID0gZnVuY3Rpb24oYm9va3NEaWN0KSB7XG5cdFx0cmV0dXJuIGNyZWF0ZU9iamVjdHMoYm9va3NEaWN0LCBjcmVhdGVCb29rKTtcblx0fTtcblxuXHR2YXIgY3JlYXRlT2JqZWN0cyA9IGZ1bmN0aW9uKGRpY3QsIGZhY3RvcnkpIHtcblx0XHR2YXIgcmVzdWx0cyA9IFtdO1xuXHRcdHZhciBrZXk7XG5cblx0XHRmb3Ioa2V5IGluIGRpY3QpIHtcblx0XHRcdHJlc3VsdHMucHVzaChmYWN0b3J5KGRpY3Rba2V5XS5kdG8pKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gJHEuYWxsKHJlc3VsdHMpO1xuXHR9O1xuXG5cdHZhciBjcmVhdGVTZWN0aW9uID0gZnVuY3Rpb24oc2VjdGlvbkR0bykge1xuXHRcdHZhciBwcm9taXNlID0gY2FjaGUuZ2V0U2VjdGlvbihzZWN0aW9uRHRvLm1vZGVsKS50aGVuKGZ1bmN0aW9uIChzZWN0aW9uQ2FjaGUpIHtcblx0ICAgICAgICB2YXIgdGV4dHVyZSA9IG5ldyBUSFJFRS5UZXh0dXJlKHNlY3Rpb25DYWNoZS5tYXBJbWFnZSk7XG5cdCAgICAgICAgdmFyIG1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKHttYXA6IHRleHR1cmV9KTtcblx0ICAgICAgICB2YXIgc2VjdGlvbjtcblxuXHQgICAgICAgIHRleHR1cmUubmVlZHNVcGRhdGUgPSB0cnVlO1xuXHQgICAgICAgIHNlY3Rpb25EdG8uZGF0YSA9IHNlY3Rpb25DYWNoZS5kYXRhO1xuXG5cdCAgICAgICAgc2VjdGlvbiA9IG5ldyBTZWN0aW9uT2JqZWN0KHNlY3Rpb25EdG8sIHNlY3Rpb25DYWNoZS5nZW9tZXRyeSwgbWF0ZXJpYWwpO1xuXG5cdFx0XHRlbnZpcm9ubWVudC5saWJyYXJ5LmFkZChzZWN0aW9uKTtcblx0XHRcdGFkZFRvRGljdChzZWN0aW9ucywgc2VjdGlvbik7XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gcHJvbWlzZTtcblx0fTtcblxuXHR2YXIgY3JlYXRlQm9vayA9IGZ1bmN0aW9uKGJvb2tEdG8pIHtcblx0XHR2YXIgcHJvbWlzZXMgPSB7fTtcblx0XHR2YXIgcHJvbWlzZTtcblxuXHRcdHByb21pc2VzLmJvb2tDYWNoZSA9IGNhY2hlLmdldEJvb2soYm9va0R0by5tb2RlbCk7XG5cdFx0aWYoYm9va0R0by5jb3ZlcklkKSB7XG5cdFx0XHRwcm9taXNlcy5jb3ZlckNhY2hlID0gY2FjaGUuZ2V0SW1hZ2UoYm9va0R0by5jb3ZlcklkKTtcblx0XHR9XG5cblx0XHRwcm9taXNlID0gJHEuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uIChyZXN1bHRzKSB7XG5cdFx0XHR2YXIgYm9va0NhY2hlID0gcmVzdWx0cy5ib29rQ2FjaGU7XG5cdFx0XHR2YXIgY292ZXJNYXBJbWFnZSA9IHJlc3VsdHMuY292ZXJDYWNoZSAmJiByZXN1bHRzLmNvdmVyQ2FjaGUuaW1hZ2U7XG5cdFx0XHR2YXIgbWF0ZXJpYWwgPSBuZXcgQm9va01hdGVyaWFsKGJvb2tDYWNoZS5tYXBJbWFnZSwgYm9va0NhY2hlLmJ1bXBNYXBJbWFnZSwgYm9va0NhY2hlLnNwZWN1bGFyTWFwSW1hZ2UsIGNvdmVyTWFwSW1hZ2UpO1xuXHRcdFx0dmFyIGJvb2sgPSBuZXcgQm9va09iamVjdChib29rRHRvLCBib29rQ2FjaGUuZ2VvbWV0cnksIG1hdGVyaWFsKTtcblxuXHRcdFx0YWRkVG9EaWN0KGJvb2tzLCBib29rKTtcblx0XHRcdHBsYWNlQm9va09uU2hlbGYoYm9vayk7XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gcHJvbWlzZTtcblx0fTtcblxuXHR2YXIgYWRkVG9EaWN0ID0gZnVuY3Rpb24oZGljdCwgb2JqKSB7XG5cdFx0dmFyIGRpY3RJdGVtID0ge1xuXHRcdFx0ZHRvOiBvYmouZGF0YU9iamVjdCxcblx0XHRcdG9iajogb2JqXG5cdFx0fTtcblxuXHRcdGRpY3Rbb2JqLmlkXSA9IGRpY3RJdGVtO1xuXHR9O1xuXG5cdHZhciBnZXRCb29rU2hlbGYgPSBmdW5jdGlvbihib29rRHRvKSB7XG5cdFx0cmV0dXJuIGVudmlyb25tZW50LmdldFNoZWxmKGJvb2tEdG8uc2VjdGlvbklkLCBib29rRHRvLnNoZWxmSWQpO1xuXHR9O1xuXG5cdHZhciBwbGFjZUJvb2tPblNoZWxmID0gZnVuY3Rpb24oYm9vaykge1xuXHRcdHZhciBzaGVsZiA9IGdldEJvb2tTaGVsZihib29rLmRhdGFPYmplY3QpO1xuXHRcdHNoZWxmLmFkZChib29rKTtcblx0fTtcblxuXHRyZXR1cm4gZW52aXJvbm1lbnQ7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgnbWFpbicsIGZ1bmN0aW9uICgkbG9nLCAkcSwgY2FtZXJhLCBjb250cm9scywgdXNlciwgZW52aXJvbm1lbnQsIHRvb2xzLCBuYXZpZ2F0aW9uLCBhdXRob3JpemF0aW9uLCBibG9jaywgbG9jYXRvcikge1x0XG5cdHZhciBjYW52YXM7XG5cdHZhciByZW5kZXJlcjtcblx0XG5cdHZhciBtYWluID0ge307XG5cblx0bWFpbi5zdGFydCA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciB3aW5SZXNpemU7XG5cblx0XHRpZighRGV0ZWN0b3Iud2ViZ2wpIHtcblx0XHRcdERldGVjdG9yLmFkZEdldFdlYkdMTWVzc2FnZSgpO1xuXHRcdH1cblxuXHRcdGluaXQoKTtcblx0XHRjb250cm9scy5pbml0KCk7XG5cblx0XHR3aW5SZXNpemUgPSBuZXcgVEhSRUV4LldpbmRvd1Jlc2l6ZShyZW5kZXJlciwgY2FtZXJhLmNhbWVyYSk7XG5cblx0XHRzdGFydFJlbmRlckxvb3AoKTtcblxuXHRcdGJsb2NrLmdsb2JhbC5zdGFydCgpO1xuXHRcdHVzZXIubG9hZCgpLnRoZW4oZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuICRxLmFsbChbZW52aXJvbm1lbnQubG9hZExpYnJhcnkodXNlci5nZXRMaWJyYXJ5KCkgfHwgMSksIGF1dGhvcml6YXRpb24ubG9hZFVzZXJEYXRhKCldKTtcblx0XHR9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcblx0XHRcdCRsb2cuZXJyb3IoZXJyb3IpO1xuXHRcdFx0Ly9UT0RPOiBzaG93IGVycm9yIG1lc3NhZ2UgIFxuXHRcdH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuXHRcdFx0bG9jYXRvci5jZW50ZXJPYmplY3QoY2FtZXJhLm9iamVjdCk7XG5cdFx0XHRlbnZpcm9ubWVudC5zZXRMb2FkZWQodHJ1ZSk7XG5cdFx0XHRibG9jay5nbG9iYWwuc3RvcCgpO1xuXHRcdH0pO1x0XHRcblx0fTtcblxuXHR2YXIgaW5pdCA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciB3aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuXHRcdHZhciBoZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG5cblx0XHRjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbnZpcm9ubWVudC5MSUJSQVJZX0NBTlZBU19JRCk7XG5cdFx0cmVuZGVyZXIgPSBuZXcgVEhSRUUuV2ViR0xSZW5kZXJlcih7Y2FudmFzOiBjYW52YXMsIGFudGlhbGlhczogdHJ1ZX0pO1xuXHRcdHJlbmRlcmVyLnNldFNpemUod2lkdGgsIGhlaWdodCk7XG5cblx0XHRlbnZpcm9ubWVudC5zY2VuZSA9IG5ldyBUSFJFRS5TY2VuZSgpO1xuXHRcdGVudmlyb25tZW50LnNjZW5lLmZvZyA9IG5ldyBUSFJFRS5Gb2coMHgwMDAwMDAsIDQsIDcpO1xuXHR9O1xuXG5cdHZhciBzdGFydFJlbmRlckxvb3AgPSBmdW5jdGlvbigpIHtcblx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RhcnRSZW5kZXJMb29wKTtcblxuXHRcdGNvbnRyb2xzLnVwZGF0ZSgpO1xuXHRcdG5hdmlnYXRpb24udXBkYXRlKCk7XG5cdFx0dG9vbHMudXBkYXRlKCk7XG5cdFx0XG5cdFx0cmVuZGVyZXIucmVuZGVyKGVudmlyb25tZW50LnNjZW5lLCBjYW1lcmEuY2FtZXJhKTtcblx0fTtcblxuXHRyZXR1cm4gbWFpbjtcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5mYWN0b3J5KCdtb3VzZScsIGZ1bmN0aW9uIChjYW1lcmEsIGVudmlyb25tZW50KSB7XG5cdHZhciBtb3VzZSA9IHt9O1xuXG5cdHZhciBnZXRXaWR0aCA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB3aW5kb3cuaW5uZXJXaWR0aDtcblx0fTtcblxuXHR2YXIgZ2V0SGVpZ2h0ID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHdpbmRvdy5pbm5lckhlaWdodDtcblx0fTtcblxuXHR2YXIgeCA9IG51bGw7XG5cdHZhciB5ID0gbnVsbDtcblx0XG5cdG1vdXNlLnRhcmdldCA9IG51bGw7XG5cdG1vdXNlLmRYID0gbnVsbDtcblx0bW91c2UuZFkgPSBudWxsO1xuXHRtb3VzZS5sb25nWCA9IG51bGw7XG5cdG1vdXNlLmxvbmdZID0gbnVsbDtcblxuXHRtb3VzZS5nZXRUYXJnZXQgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy50YXJnZXQ7XG5cdH07XG5cblx0bW91c2UuZG93biA9IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0aWYoZXZlbnQpIHtcblx0XHRcdHRoaXNbZXZlbnQud2hpY2hdID0gdHJ1ZTtcblx0XHRcdHRoaXMudGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xuXHRcdFx0eCA9IGV2ZW50LmNsaWVudFg7XG5cdFx0XHR5ID0gZXZlbnQuY2xpZW50WTtcblx0XHRcdG1vdXNlLmxvbmdYID0gZ2V0V2lkdGgoKSAqIDAuNSAtIHg7XG5cdFx0XHRtb3VzZS5sb25nWSA9IGdldEhlaWdodCgpICogMC41IC0geTtcblx0XHR9XG5cdH07XG5cblx0bW91c2UudXAgPSBmdW5jdGlvbihldmVudCkge1xuXHRcdGlmKGV2ZW50KSB7XG5cdFx0XHR0aGlzW2V2ZW50LndoaWNoXSA9IGZhbHNlO1xuXHRcdFx0Ly8gbGludXggY2hyb21lIGJ1ZyBmaXggKHdoZW4gYm90aCBrZXlzIHJlbGVhc2UgdGhlbiBib3RoIGV2ZW50LndoaWNoIGVxdWFsIDMpXG5cdFx0XHR0aGlzWzFdID0gZmFsc2U7IFxuXHRcdH1cblx0fTtcblxuXHRtb3VzZS5tb3ZlID0gZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRpZihldmVudCkge1xuXHRcdFx0dGhpcy50YXJnZXQgPSBldmVudC50YXJnZXQ7XG5cdFx0XHRtb3VzZS5sb25nWCA9IGdldFdpZHRoKCkgKiAwLjUgLSB4O1xuXHRcdFx0bW91c2UubG9uZ1kgPSBnZXRIZWlnaHQoKSAqIDAuNSAtIHk7XG5cdFx0XHRtb3VzZS5kWCA9IGV2ZW50LmNsaWVudFggLSB4O1xuXHRcdFx0bW91c2UuZFkgPSBldmVudC5jbGllbnRZIC0geTtcblx0XHRcdHggPSBldmVudC5jbGllbnRYO1xuXHRcdFx0eSA9IGV2ZW50LmNsaWVudFk7XG5cdFx0fVxuXHR9O1xuXG5cdG1vdXNlLmlzQ2FudmFzID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMudGFyZ2V0LmlkID09PSBlbnZpcm9ubWVudC5MSUJSQVJZX0NBTlZBU19JRDtcblx0fTtcblxuXHRtb3VzZS5pc1BvY2tldEJvb2sgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gZmFsc2U7IC8vVE9ETzogc3R1YlxuXHRcdC8vIHJldHVybiAhISh0aGlzLnRhcmdldCAmJiB0aGlzLnRhcmdldC5wYXJlbnROb2RlID09IFVJLm1lbnUuaW52ZW50b3J5LmJvb2tzKTtcblx0fTtcblxuXHRtb3VzZS5nZXRJbnRlcnNlY3RlZCA9IGZ1bmN0aW9uKG9iamVjdHMsIHJlY3Vyc2l2ZSwgc2VhcmNoRm9yKSB7XG5cdFx0dmFyXG5cdFx0XHR2ZWN0b3IsXG5cdFx0XHRyYXljYXN0ZXIsXG5cdFx0XHRpbnRlcnNlY3RzLFxuXHRcdFx0aW50ZXJzZWN0ZWQsXG5cdFx0XHRyZXN1bHQsXG5cdFx0XHRpLCBqO1xuXG5cdFx0cmVzdWx0ID0gbnVsbDtcblx0XHR2ZWN0b3IgPSBnZXRWZWN0b3IoKTtcblx0XHRyYXljYXN0ZXIgPSBuZXcgVEhSRUUuUmF5Y2FzdGVyKGNhbWVyYS5nZXRQb3NpdGlvbigpLCB2ZWN0b3IpO1xuXHRcdGludGVyc2VjdHMgPSByYXljYXN0ZXIuaW50ZXJzZWN0T2JqZWN0cyhvYmplY3RzLCByZWN1cnNpdmUpO1xuXG5cdFx0aWYoc2VhcmNoRm9yKSB7XG5cdFx0XHRpZihpbnRlcnNlY3RzLmxlbmd0aCkge1xuXHRcdFx0XHRmb3IoaSA9IDA7IGkgPCBpbnRlcnNlY3RzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0aW50ZXJzZWN0ZWQgPSBpbnRlcnNlY3RzW2ldO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGZvcihqID0gc2VhcmNoRm9yLmxlbmd0aCAtIDE7IGogPj0gMDsgai0tKSB7XG5cdFx0XHRcdFx0XHRpZihpbnRlcnNlY3RlZC5vYmplY3QgaW5zdGFuY2VvZiBzZWFyY2hGb3Jbal0pIHtcblx0XHRcdFx0XHRcdFx0cmVzdWx0ID0gaW50ZXJzZWN0ZWQ7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmKHJlc3VsdCkge1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XHRcdFxuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXN1bHQgPSBpbnRlcnNlY3RzO1xuXHRcdH1cblxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH07XG5cblx0dmFyIGdldFZlY3RvciA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBwcm9qZWN0b3IgPSBuZXcgVEhSRUUuUHJvamVjdG9yKCk7XG5cdFx0dmFyIHZlY3RvciA9IG5ldyBUSFJFRS5WZWN0b3IzKCh4IC8gZ2V0V2lkdGgoKSkgKiAyIC0gMSwgLSAoeSAvIGdldEhlaWdodCgpKSAqIDIgKyAxLCAwLjUpO1xuXHRcdHByb2plY3Rvci51bnByb2plY3RWZWN0b3IodmVjdG9yLCBjYW1lcmEuY2FtZXJhKTtcblx0XG5cdFx0cmV0dXJuIHZlY3Rvci5zdWIoY2FtZXJhLmdldFBvc2l0aW9uKCkpLm5vcm1hbGl6ZSgpO1xuXHR9O1xuXG5cdHJldHVybiBtb3VzZTtcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5mYWN0b3J5KCduYXZpZ2F0aW9uJywgZnVuY3Rpb24gKGNhbWVyYSkge1xuXHR2YXIgbmF2aWdhdGlvbiA9IHt9O1xuXG5cdG5hdmlnYXRpb24uQlVUVE9OU19ST1RBVEVfU1BFRUQgPSAxMDA7XG5cdG5hdmlnYXRpb24uQlVUVE9OU19HT19TUEVFRCA9IDAuMDI7XG5cblx0dmFyIHN0YXRlID0ge1xuXHRcdGZvcndhcmQ6IGZhbHNlLFxuXHRcdGJhY2t3YXJkOiBmYWxzZSxcblx0XHRsZWZ0OiBmYWxzZSxcblx0XHRyaWdodDogZmFsc2VcdFx0XHRcblx0fTtcblxuXHRuYXZpZ2F0aW9uLmdvU3RvcCA9IGZ1bmN0aW9uKCkge1xuXHRcdHN0YXRlLmZvcndhcmQgPSBmYWxzZTtcblx0XHRzdGF0ZS5iYWNrd2FyZCA9IGZhbHNlO1xuXHRcdHN0YXRlLmxlZnQgPSBmYWxzZTtcblx0XHRzdGF0ZS5yaWdodCA9IGZhbHNlO1xuXHR9O1xuXG5cdG5hdmlnYXRpb24uZ29Gb3J3YXJkID0gZnVuY3Rpb24oKSB7XG5cdFx0c3RhdGUuZm9yd2FyZCA9IHRydWU7XG5cdH07XG5cblx0bmF2aWdhdGlvbi5nb0JhY2t3YXJkID0gZnVuY3Rpb24oKSB7XG5cdFx0c3RhdGUuYmFja3dhcmQgPSB0cnVlO1xuXHR9O1xuXG5cdG5hdmlnYXRpb24uZ29MZWZ0ID0gZnVuY3Rpb24oKSB7XG5cdFx0c3RhdGUubGVmdCA9IHRydWU7XG5cdH07XG5cblx0bmF2aWdhdGlvbi5nb1JpZ2h0ID0gZnVuY3Rpb24oKSB7XG5cdFx0c3RhdGUucmlnaHQgPSB0cnVlO1xuXHR9O1xuXG5cdG5hdmlnYXRpb24udXBkYXRlID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYoc3RhdGUuZm9yd2FyZCkge1xuXHRcdFx0Y2FtZXJhLmdvKG5hdmlnYXRpb24uQlVUVE9OU19HT19TUEVFRCk7XG5cdFx0fSBlbHNlIGlmKHN0YXRlLmJhY2t3YXJkKSB7XG5cdFx0XHRjYW1lcmEuZ28oLW5hdmlnYXRpb24uQlVUVE9OU19HT19TUEVFRCk7XG5cdFx0fSBlbHNlIGlmKHN0YXRlLmxlZnQpIHtcblx0XHRcdGNhbWVyYS5yb3RhdGUobmF2aWdhdGlvbi5CVVRUT05TX1JPVEFURV9TUEVFRCwgMCk7XG5cdFx0fSBlbHNlIGlmKHN0YXRlLnJpZ2h0KSB7XG5cdFx0XHRjYW1lcmEucm90YXRlKC1uYXZpZ2F0aW9uLkJVVFRPTlNfUk9UQVRFX1NQRUVELCAwKTtcblx0XHR9XG5cdH07XG5cblx0cmV0dXJuIG5hdmlnYXRpb247XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgndXNlcicsIGZ1bmN0aW9uICgkbG9nLCBkYXRhKSB7XG5cdHZhciB1c2VyID0ge307XG5cblx0dmFyIGxvYWRlZCA9IGZhbHNlO1xuXHR2YXIgX2RhdGFPYmplY3QgPSBudWxsO1xuXHR2YXIgX2xpYnJhcnkgPSBudWxsO1xuXG5cdHVzZXIubG9hZCA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBzY29wZSA9IHRoaXM7XG5cblx0XHRyZXR1cm4gZGF0YS5nZXRVc2VyKCkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdFx0XHRzY29wZS5zZXREYXRhT2JqZWN0KHJlcy5kYXRhKTtcblx0XHRcdHNjb3BlLnNldExpYnJhcnkoKTtcblx0XHRcdGxvYWRlZCA9IHRydWU7XG5cblx0XHRcdCRsb2cubG9nKCd1c2VyIGxvYWRlZCcpO1xuXHRcdH0pO1xuXHR9O1xuXG5cdHVzZXIubG9nb3V0ID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGRhdGEubG9nb3V0KCkudGhlbihmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gdXNlci5sb2FkKCk7XG5cdFx0fSk7XG5cdH07XG5cblx0dXNlci5zZXREYXRhT2JqZWN0ID0gZnVuY3Rpb24oZGF0YU9iamVjdCkge1xuXHRcdF9kYXRhT2JqZWN0ID0gZGF0YU9iamVjdDtcblx0fTtcblxuXHR1c2VyLmdldExpYnJhcnkgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gX2xpYnJhcnk7XG5cdH07XG5cblx0dXNlci5zZXRMaWJyYXJ5ID0gZnVuY3Rpb24obGlicmFyeUlkKSB7XG5cdFx0X2xpYnJhcnkgPSBsaWJyYXJ5SWQgfHwgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLnN1YnN0cmluZygxKTtcblx0fTtcblxuXHR1c2VyLmdldElkID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIF9kYXRhT2JqZWN0ICYmIF9kYXRhT2JqZWN0LmlkO1xuXHR9O1xuXG5cdHVzZXIuaXNBdXRob3JpemVkID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIEJvb2xlYW4oX2RhdGFPYmplY3QpO1xuXHR9O1xuXG5cdHVzZXIuaXNMb2FkZWQgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gbG9hZGVkO1xuXHR9O1xuXG5cdHJldHVybiB1c2VyO1xufSk7XG4iLCIvKipcbiAqIEBhdXRob3IgYWx0ZXJlZHEgLyBodHRwOi8vYWx0ZXJlZHF1YWxpYS5jb20vXG4gKiBAYXV0aG9yIG1yLmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS9cbiAqL1xuXG52YXIgRGV0ZWN0b3IgPSB7XG5cblx0Y2FudmFzOiAhISB3aW5kb3cuQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuXHR3ZWJnbDogKCBmdW5jdGlvbiAoKSB7IHRyeSB7IHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnY2FudmFzJyApOyByZXR1cm4gISEgd2luZG93LldlYkdMUmVuZGVyaW5nQ29udGV4dCAmJiAoIGNhbnZhcy5nZXRDb250ZXh0KCAnd2ViZ2wnICkgfHwgY2FudmFzLmdldENvbnRleHQoICdleHBlcmltZW50YWwtd2ViZ2wnICkgKTsgfSBjYXRjaCggZSApIHsgcmV0dXJuIGZhbHNlOyB9IH0gKSgpLFxuXHR3b3JrZXJzOiAhISB3aW5kb3cuV29ya2VyLFxuXHRmaWxlYXBpOiB3aW5kb3cuRmlsZSAmJiB3aW5kb3cuRmlsZVJlYWRlciAmJiB3aW5kb3cuRmlsZUxpc3QgJiYgd2luZG93LkJsb2IsXG5cblx0Z2V0V2ViR0xFcnJvck1lc3NhZ2U6IGZ1bmN0aW9uICgpIHtcblxuXHRcdHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2RpdicgKTtcblx0XHRlbGVtZW50LmlkID0gJ3dlYmdsLWVycm9yLW1lc3NhZ2UnO1xuXHRcdGVsZW1lbnQuc3R5bGUuZm9udEZhbWlseSA9ICdtb25vc3BhY2UnO1xuXHRcdGVsZW1lbnQuc3R5bGUuZm9udFNpemUgPSAnMTNweCc7XG5cdFx0ZWxlbWVudC5zdHlsZS5mb250V2VpZ2h0ID0gJ25vcm1hbCc7XG5cdFx0ZWxlbWVudC5zdHlsZS50ZXh0QWxpZ24gPSAnY2VudGVyJztcblx0XHRlbGVtZW50LnN0eWxlLmJhY2tncm91bmQgPSAnI2ZmZic7XG5cdFx0ZWxlbWVudC5zdHlsZS5jb2xvciA9ICcjMDAwJztcblx0XHRlbGVtZW50LnN0eWxlLnBhZGRpbmcgPSAnMS41ZW0nO1xuXHRcdGVsZW1lbnQuc3R5bGUud2lkdGggPSAnNDAwcHgnO1xuXHRcdGVsZW1lbnQuc3R5bGUubWFyZ2luID0gJzVlbSBhdXRvIDAnO1xuXG5cdFx0aWYgKCAhIHRoaXMud2ViZ2wgKSB7XG5cblx0XHRcdGVsZW1lbnQuaW5uZXJIVE1MID0gd2luZG93LldlYkdMUmVuZGVyaW5nQ29udGV4dCA/IFtcblx0XHRcdFx0J1lvdXIgZ3JhcGhpY3MgY2FyZCBkb2VzIG5vdCBzZWVtIHRvIHN1cHBvcnQgPGEgaHJlZj1cImh0dHA6Ly9raHJvbm9zLm9yZy93ZWJnbC93aWtpL0dldHRpbmdfYV9XZWJHTF9JbXBsZW1lbnRhdGlvblwiIHN0eWxlPVwiY29sb3I6IzAwMFwiPldlYkdMPC9hPi48YnIgLz4nLFxuXHRcdFx0XHQnRmluZCBvdXQgaG93IHRvIGdldCBpdCA8YSBocmVmPVwiaHR0cDovL2dldC53ZWJnbC5vcmcvXCIgc3R5bGU9XCJjb2xvcjojMDAwXCI+aGVyZTwvYT4uJ1xuXHRcdFx0XS5qb2luKCAnXFxuJyApIDogW1xuXHRcdFx0XHQnWW91ciBicm93c2VyIGRvZXMgbm90IHNlZW0gdG8gc3VwcG9ydCA8YSBocmVmPVwiaHR0cDovL2tocm9ub3Mub3JnL3dlYmdsL3dpa2kvR2V0dGluZ19hX1dlYkdMX0ltcGxlbWVudGF0aW9uXCIgc3R5bGU9XCJjb2xvcjojMDAwXCI+V2ViR0w8L2E+Ljxici8+Jyxcblx0XHRcdFx0J0ZpbmQgb3V0IGhvdyB0byBnZXQgaXQgPGEgaHJlZj1cImh0dHA6Ly9nZXQud2ViZ2wub3JnL1wiIHN0eWxlPVwiY29sb3I6IzAwMFwiPmhlcmU8L2E+Lidcblx0XHRcdF0uam9pbiggJ1xcbicgKTtcblxuXHRcdH1cblxuXHRcdHJldHVybiBlbGVtZW50O1xuXG5cdH0sXG5cblx0YWRkR2V0V2ViR0xNZXNzYWdlOiBmdW5jdGlvbiAoIHBhcmFtZXRlcnMgKSB7XG5cblx0XHR2YXIgcGFyZW50LCBpZCwgZWxlbWVudDtcblxuXHRcdHBhcmFtZXRlcnMgPSBwYXJhbWV0ZXJzIHx8IHt9O1xuXG5cdFx0cGFyZW50ID0gcGFyYW1ldGVycy5wYXJlbnQgIT09IHVuZGVmaW5lZCA/IHBhcmFtZXRlcnMucGFyZW50IDogZG9jdW1lbnQuYm9keTtcblx0XHRpZCA9IHBhcmFtZXRlcnMuaWQgIT09IHVuZGVmaW5lZCA/IHBhcmFtZXRlcnMuaWQgOiAnb2xkaWUnO1xuXG5cdFx0ZWxlbWVudCA9IERldGVjdG9yLmdldFdlYkdMRXJyb3JNZXNzYWdlKCk7XG5cdFx0ZWxlbWVudC5pZCA9IGlkO1xuXG5cdFx0cGFyZW50LmFwcGVuZENoaWxkKCBlbGVtZW50ICk7XG5cblx0fVxuXG59OyIsIi8vIHRocmVlLmpzIC0gaHR0cDovL2dpdGh1Yi5jb20vbXJkb29iL3RocmVlLmpzXG4ndXNlIHN0cmljdCc7dmFyIFRIUkVFPXtSRVZJU0lPTjpcIjY0XCJ9O3NlbGYuY29uc29sZT1zZWxmLmNvbnNvbGV8fHtpbmZvOmZ1bmN0aW9uKCl7fSxsb2c6ZnVuY3Rpb24oKXt9LGRlYnVnOmZ1bmN0aW9uKCl7fSx3YXJuOmZ1bmN0aW9uKCl7fSxlcnJvcjpmdW5jdGlvbigpe319O1N0cmluZy5wcm90b3R5cGUudHJpbT1TdHJpbmcucHJvdG90eXBlLnRyaW18fGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVwbGFjZSgvXlxccyt8XFxzKyQvZyxcIlwiKX07VEhSRUUuZXh0ZW5kPWZ1bmN0aW9uKGEsYil7aWYoT2JqZWN0LmtleXMpZm9yKHZhciBjPU9iamVjdC5rZXlzKGIpLGQ9MCxlPWMubGVuZ3RoO2Q8ZTtkKyspe3ZhciBmPWNbZF07T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsZixPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGIsZikpfWVsc2UgZm9yKGYgaW4gYz17fS5oYXNPd25Qcm9wZXJ0eSxiKWMuY2FsbChiLGYpJiYoYVtmXT1iW2ZdKTtyZXR1cm4gYX07XG4oZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPVtcIm1zXCIsXCJtb3pcIixcIndlYmtpdFwiLFwib1wiXSxjPTA7YzxiLmxlbmd0aCYmIXNlbGYucmVxdWVzdEFuaW1hdGlvbkZyYW1lOysrYylzZWxmLnJlcXVlc3RBbmltYXRpb25GcmFtZT1zZWxmW2JbY10rXCJSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIl0sc2VsZi5jYW5jZWxBbmltYXRpb25GcmFtZT1zZWxmW2JbY10rXCJDYW5jZWxBbmltYXRpb25GcmFtZVwiXXx8c2VsZltiW2NdK1wiQ2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lXCJdO3ZvaWQgMD09PXNlbGYucmVxdWVzdEFuaW1hdGlvbkZyYW1lJiZ2b2lkIDAhPT1zZWxmLnNldFRpbWVvdXQmJihzZWxmLnJlcXVlc3RBbmltYXRpb25GcmFtZT1mdW5jdGlvbihiKXt2YXIgYz1EYXRlLm5vdygpLGY9TWF0aC5tYXgoMCwxNi0oYy1hKSksaD1zZWxmLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtiKGMrZil9LGYpO2E9YytmO3JldHVybiBofSk7dm9pZCAwPT09c2VsZi5jYW5jZWxBbmltYXRpb25GcmFtZSYmdm9pZCAwIT09XG5zZWxmLmNsZWFyVGltZW91dCYmKHNlbGYuY2FuY2VsQW5pbWF0aW9uRnJhbWU9ZnVuY3Rpb24oYSl7c2VsZi5jbGVhclRpbWVvdXQoYSl9KX0pKCk7VEhSRUUuQ3VsbEZhY2VOb25lPTA7VEhSRUUuQ3VsbEZhY2VCYWNrPTE7VEhSRUUuQ3VsbEZhY2VGcm9udD0yO1RIUkVFLkN1bGxGYWNlRnJvbnRCYWNrPTM7VEhSRUUuRnJvbnRGYWNlRGlyZWN0aW9uQ1c9MDtUSFJFRS5Gcm9udEZhY2VEaXJlY3Rpb25DQ1c9MTtUSFJFRS5CYXNpY1NoYWRvd01hcD0wO1RIUkVFLlBDRlNoYWRvd01hcD0xO1RIUkVFLlBDRlNvZnRTaGFkb3dNYXA9MjtUSFJFRS5Gcm9udFNpZGU9MDtUSFJFRS5CYWNrU2lkZT0xO1RIUkVFLkRvdWJsZVNpZGU9MjtUSFJFRS5Ob1NoYWRpbmc9MDtUSFJFRS5GbGF0U2hhZGluZz0xO1RIUkVFLlNtb290aFNoYWRpbmc9MjtUSFJFRS5Ob0NvbG9ycz0wO1RIUkVFLkZhY2VDb2xvcnM9MTtUSFJFRS5WZXJ0ZXhDb2xvcnM9MjtUSFJFRS5Ob0JsZW5kaW5nPTA7XG5USFJFRS5Ob3JtYWxCbGVuZGluZz0xO1RIUkVFLkFkZGl0aXZlQmxlbmRpbmc9MjtUSFJFRS5TdWJ0cmFjdGl2ZUJsZW5kaW5nPTM7VEhSRUUuTXVsdGlwbHlCbGVuZGluZz00O1RIUkVFLkN1c3RvbUJsZW5kaW5nPTU7VEhSRUUuQWRkRXF1YXRpb249MTAwO1RIUkVFLlN1YnRyYWN0RXF1YXRpb249MTAxO1RIUkVFLlJldmVyc2VTdWJ0cmFjdEVxdWF0aW9uPTEwMjtUSFJFRS5aZXJvRmFjdG9yPTIwMDtUSFJFRS5PbmVGYWN0b3I9MjAxO1RIUkVFLlNyY0NvbG9yRmFjdG9yPTIwMjtUSFJFRS5PbmVNaW51c1NyY0NvbG9yRmFjdG9yPTIwMztUSFJFRS5TcmNBbHBoYUZhY3Rvcj0yMDQ7VEhSRUUuT25lTWludXNTcmNBbHBoYUZhY3Rvcj0yMDU7VEhSRUUuRHN0QWxwaGFGYWN0b3I9MjA2O1RIUkVFLk9uZU1pbnVzRHN0QWxwaGFGYWN0b3I9MjA3O1RIUkVFLkRzdENvbG9yRmFjdG9yPTIwODtUSFJFRS5PbmVNaW51c0RzdENvbG9yRmFjdG9yPTIwOTtcblRIUkVFLlNyY0FscGhhU2F0dXJhdGVGYWN0b3I9MjEwO1RIUkVFLk11bHRpcGx5T3BlcmF0aW9uPTA7VEhSRUUuTWl4T3BlcmF0aW9uPTE7VEhSRUUuQWRkT3BlcmF0aW9uPTI7VEhSRUUuVVZNYXBwaW5nPWZ1bmN0aW9uKCl7fTtUSFJFRS5DdWJlUmVmbGVjdGlvbk1hcHBpbmc9ZnVuY3Rpb24oKXt9O1RIUkVFLkN1YmVSZWZyYWN0aW9uTWFwcGluZz1mdW5jdGlvbigpe307VEhSRUUuU3BoZXJpY2FsUmVmbGVjdGlvbk1hcHBpbmc9ZnVuY3Rpb24oKXt9O1RIUkVFLlNwaGVyaWNhbFJlZnJhY3Rpb25NYXBwaW5nPWZ1bmN0aW9uKCl7fTtUSFJFRS5SZXBlYXRXcmFwcGluZz0xRTM7VEhSRUUuQ2xhbXBUb0VkZ2VXcmFwcGluZz0xMDAxO1RIUkVFLk1pcnJvcmVkUmVwZWF0V3JhcHBpbmc9MTAwMjtUSFJFRS5OZWFyZXN0RmlsdGVyPTEwMDM7VEhSRUUuTmVhcmVzdE1pcE1hcE5lYXJlc3RGaWx0ZXI9MTAwNDtUSFJFRS5OZWFyZXN0TWlwTWFwTGluZWFyRmlsdGVyPTEwMDU7XG5USFJFRS5MaW5lYXJGaWx0ZXI9MTAwNjtUSFJFRS5MaW5lYXJNaXBNYXBOZWFyZXN0RmlsdGVyPTEwMDc7VEhSRUUuTGluZWFyTWlwTWFwTGluZWFyRmlsdGVyPTEwMDg7VEhSRUUuVW5zaWduZWRCeXRlVHlwZT0xMDA5O1RIUkVFLkJ5dGVUeXBlPTEwMTA7VEhSRUUuU2hvcnRUeXBlPTEwMTE7VEhSRUUuVW5zaWduZWRTaG9ydFR5cGU9MTAxMjtUSFJFRS5JbnRUeXBlPTEwMTM7VEhSRUUuVW5zaWduZWRJbnRUeXBlPTEwMTQ7VEhSRUUuRmxvYXRUeXBlPTEwMTU7VEhSRUUuVW5zaWduZWRTaG9ydDQ0NDRUeXBlPTEwMTY7VEhSRUUuVW5zaWduZWRTaG9ydDU1NTFUeXBlPTEwMTc7VEhSRUUuVW5zaWduZWRTaG9ydDU2NVR5cGU9MTAxODtUSFJFRS5BbHBoYUZvcm1hdD0xMDE5O1RIUkVFLlJHQkZvcm1hdD0xMDIwO1RIUkVFLlJHQkFGb3JtYXQ9MTAyMTtUSFJFRS5MdW1pbmFuY2VGb3JtYXQ9MTAyMjtUSFJFRS5MdW1pbmFuY2VBbHBoYUZvcm1hdD0xMDIzO1xuVEhSRUUuUkdCX1MzVENfRFhUMV9Gb3JtYXQ9MjAwMTtUSFJFRS5SR0JBX1MzVENfRFhUMV9Gb3JtYXQ9MjAwMjtUSFJFRS5SR0JBX1MzVENfRFhUM19Gb3JtYXQ9MjAwMztUSFJFRS5SR0JBX1MzVENfRFhUNV9Gb3JtYXQ9MjAwNDtUSFJFRS5Db2xvcj1mdW5jdGlvbihhKXt2b2lkIDAhPT1hJiZ0aGlzLnNldChhKTtyZXR1cm4gdGhpc307XG5USFJFRS5Db2xvci5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLkNvbG9yLHI6MSxnOjEsYjoxLHNldDpmdW5jdGlvbihhKXthIGluc3RhbmNlb2YgVEhSRUUuQ29sb3I/dGhpcy5jb3B5KGEpOlwibnVtYmVyXCI9PT10eXBlb2YgYT90aGlzLnNldEhleChhKTpcInN0cmluZ1wiPT09dHlwZW9mIGEmJnRoaXMuc2V0U3R5bGUoYSk7cmV0dXJuIHRoaXN9LHNldEhleDpmdW5jdGlvbihhKXthPU1hdGguZmxvb3IoYSk7dGhpcy5yPShhPj4xNiYyNTUpLzI1NTt0aGlzLmc9KGE+PjgmMjU1KS8yNTU7dGhpcy5iPShhJjI1NSkvMjU1O3JldHVybiB0aGlzfSxzZXRSR0I6ZnVuY3Rpb24oYSxiLGMpe3RoaXMucj1hO3RoaXMuZz1iO3RoaXMuYj1jO3JldHVybiB0aGlzfSxzZXRIU0w6ZnVuY3Rpb24oYSxiLGMpe2lmKDA9PT1iKXRoaXMucj10aGlzLmc9dGhpcy5iPWM7ZWxzZXt2YXIgZD1mdW5jdGlvbihhLGIsYyl7MD5jJiYoYys9MSk7MTxjJiYoYy09MSk7cmV0dXJuIGM8MS82P2ErNiooYi1hKSpcbmM6MC41PmM/YjpjPDIvMz9hKzYqKGItYSkqKDIvMy1jKTphfSxiPTAuNT49Yz9jKigxK2IpOmMrYi1jKmIsYz0yKmMtYjt0aGlzLnI9ZChjLGIsYSsxLzMpO3RoaXMuZz1kKGMsYixhKTt0aGlzLmI9ZChjLGIsYS0xLzMpfXJldHVybiB0aGlzfSxzZXRTdHlsZTpmdW5jdGlvbihhKXtpZigvXnJnYlxcKChcXGQrKSwgPyhcXGQrKSwgPyhcXGQrKVxcKSQvaS50ZXN0KGEpKXJldHVybiBhPS9ecmdiXFwoKFxcZCspLCA/KFxcZCspLCA/KFxcZCspXFwpJC9pLmV4ZWMoYSksdGhpcy5yPU1hdGgubWluKDI1NSxwYXJzZUludChhWzFdLDEwKSkvMjU1LHRoaXMuZz1NYXRoLm1pbigyNTUscGFyc2VJbnQoYVsyXSwxMCkpLzI1NSx0aGlzLmI9TWF0aC5taW4oMjU1LHBhcnNlSW50KGFbM10sMTApKS8yNTUsdGhpcztpZigvXnJnYlxcKChcXGQrKVxcJSwgPyhcXGQrKVxcJSwgPyhcXGQrKVxcJVxcKSQvaS50ZXN0KGEpKXJldHVybiBhPS9ecmdiXFwoKFxcZCspXFwlLCA/KFxcZCspXFwlLCA/KFxcZCspXFwlXFwpJC9pLmV4ZWMoYSksdGhpcy5yPVxuTWF0aC5taW4oMTAwLHBhcnNlSW50KGFbMV0sMTApKS8xMDAsdGhpcy5nPU1hdGgubWluKDEwMCxwYXJzZUludChhWzJdLDEwKSkvMTAwLHRoaXMuYj1NYXRoLm1pbigxMDAscGFyc2VJbnQoYVszXSwxMCkpLzEwMCx0aGlzO2lmKC9eXFwjKFswLTlhLWZdezZ9KSQvaS50ZXN0KGEpKXJldHVybiBhPS9eXFwjKFswLTlhLWZdezZ9KSQvaS5leGVjKGEpLHRoaXMuc2V0SGV4KHBhcnNlSW50KGFbMV0sMTYpKSx0aGlzO2lmKC9eXFwjKFswLTlhLWZdKShbMC05YS1mXSkoWzAtOWEtZl0pJC9pLnRlc3QoYSkpcmV0dXJuIGE9L15cXCMoWzAtOWEtZl0pKFswLTlhLWZdKShbMC05YS1mXSkkL2kuZXhlYyhhKSx0aGlzLnNldEhleChwYXJzZUludChhWzFdK2FbMV0rYVsyXSthWzJdK2FbM10rYVszXSwxNikpLHRoaXM7aWYoL14oXFx3KykkL2kudGVzdChhKSlyZXR1cm4gdGhpcy5zZXRIZXgoVEhSRUUuQ29sb3JLZXl3b3Jkc1thXSksdGhpc30sY29weTpmdW5jdGlvbihhKXt0aGlzLnI9YS5yO3RoaXMuZz1cbmEuZzt0aGlzLmI9YS5iO3JldHVybiB0aGlzfSxjb3B5R2FtbWFUb0xpbmVhcjpmdW5jdGlvbihhKXt0aGlzLnI9YS5yKmEucjt0aGlzLmc9YS5nKmEuZzt0aGlzLmI9YS5iKmEuYjtyZXR1cm4gdGhpc30sY29weUxpbmVhclRvR2FtbWE6ZnVuY3Rpb24oYSl7dGhpcy5yPU1hdGguc3FydChhLnIpO3RoaXMuZz1NYXRoLnNxcnQoYS5nKTt0aGlzLmI9TWF0aC5zcXJ0KGEuYik7cmV0dXJuIHRoaXN9LGNvbnZlcnRHYW1tYVRvTGluZWFyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yLGI9dGhpcy5nLGM9dGhpcy5iO3RoaXMucj1hKmE7dGhpcy5nPWIqYjt0aGlzLmI9YypjO3JldHVybiB0aGlzfSxjb252ZXJ0TGluZWFyVG9HYW1tYTpmdW5jdGlvbigpe3RoaXMucj1NYXRoLnNxcnQodGhpcy5yKTt0aGlzLmc9TWF0aC5zcXJ0KHRoaXMuZyk7dGhpcy5iPU1hdGguc3FydCh0aGlzLmIpO3JldHVybiB0aGlzfSxnZXRIZXg6ZnVuY3Rpb24oKXtyZXR1cm4gMjU1KnRoaXMucjw8MTZeMjU1KnRoaXMuZzw8XG44XjI1NSp0aGlzLmI8PDB9LGdldEhleFN0cmluZzpmdW5jdGlvbigpe3JldHVybihcIjAwMDAwMFwiK3RoaXMuZ2V0SGV4KCkudG9TdHJpbmcoMTYpKS5zbGljZSgtNil9LGdldEhTTDpmdW5jdGlvbihhKXt2YXIgYT1hfHx7aDowLHM6MCxsOjB9LGI9dGhpcy5yLGM9dGhpcy5nLGQ9dGhpcy5iLGU9TWF0aC5tYXgoYixjLGQpLGY9TWF0aC5taW4oYixjLGQpLGgsZz0oZitlKS8yO2lmKGY9PT1lKWY9aD0wO2Vsc2V7dmFyIGk9ZS1mLGY9MC41Pj1nP2kvKGUrZik6aS8oMi1lLWYpO3N3aXRjaChlKXtjYXNlIGI6aD0oYy1kKS9pKyhjPGQ/NjowKTticmVhaztjYXNlIGM6aD0oZC1iKS9pKzI7YnJlYWs7Y2FzZSBkOmg9KGItYykvaSs0fWgvPTZ9YS5oPWg7YS5zPWY7YS5sPWc7cmV0dXJuIGF9LGdldFN0eWxlOmZ1bmN0aW9uKCl7cmV0dXJuXCJyZ2IoXCIrKDI1NSp0aGlzLnJ8MCkrXCIsXCIrKDI1NSp0aGlzLmd8MCkrXCIsXCIrKDI1NSp0aGlzLmJ8MCkrXCIpXCJ9LG9mZnNldEhTTDpmdW5jdGlvbihhLFxuYixjKXt2YXIgZD10aGlzLmdldEhTTCgpO2QuaCs9YTtkLnMrPWI7ZC5sKz1jO3RoaXMuc2V0SFNMKGQuaCxkLnMsZC5sKTtyZXR1cm4gdGhpc30sYWRkOmZ1bmN0aW9uKGEpe3RoaXMucis9YS5yO3RoaXMuZys9YS5nO3RoaXMuYis9YS5iO3JldHVybiB0aGlzfSxhZGRDb2xvcnM6ZnVuY3Rpb24oYSxiKXt0aGlzLnI9YS5yK2Iucjt0aGlzLmc9YS5nK2IuZzt0aGlzLmI9YS5iK2IuYjtyZXR1cm4gdGhpc30sYWRkU2NhbGFyOmZ1bmN0aW9uKGEpe3RoaXMucis9YTt0aGlzLmcrPWE7dGhpcy5iKz1hO3JldHVybiB0aGlzfSxtdWx0aXBseTpmdW5jdGlvbihhKXt0aGlzLnIqPWEucjt0aGlzLmcqPWEuZzt0aGlzLmIqPWEuYjtyZXR1cm4gdGhpc30sbXVsdGlwbHlTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy5yKj1hO3RoaXMuZyo9YTt0aGlzLmIqPWE7cmV0dXJuIHRoaXN9LGxlcnA6ZnVuY3Rpb24oYSxiKXt0aGlzLnIrPShhLnItdGhpcy5yKSpiO3RoaXMuZys9KGEuZy10aGlzLmcpKmI7XG50aGlzLmIrPShhLmItdGhpcy5iKSpiO3JldHVybiB0aGlzfSxlcXVhbHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucj09PXRoaXMuciYmYS5nPT09dGhpcy5nJiZhLmI9PT10aGlzLmJ9LGZyb21BcnJheTpmdW5jdGlvbihhKXt0aGlzLnI9YVswXTt0aGlzLmc9YVsxXTt0aGlzLmI9YVsyXTtyZXR1cm4gdGhpc30sdG9BcnJheTpmdW5jdGlvbigpe3JldHVyblt0aGlzLnIsdGhpcy5nLHRoaXMuYl19LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBUSFJFRS5Db2xvcikuc2V0UkdCKHRoaXMucix0aGlzLmcsdGhpcy5iKX19O1xuVEhSRUUuQ29sb3JLZXl3b3Jkcz17YWxpY2VibHVlOjE1NzkyMzgzLGFudGlxdWV3aGl0ZToxNjQ0NDM3NSxhcXVhOjY1NTM1LGFxdWFtYXJpbmU6ODM4ODU2NCxhenVyZToxNTc5NDE3NSxiZWlnZToxNjExOTI2MCxiaXNxdWU6MTY3NzAyNDQsYmxhY2s6MCxibGFuY2hlZGFsbW9uZDoxNjc3MjA0NSxibHVlOjI1NSxibHVldmlvbGV0OjkwNTUyMDIsYnJvd246MTA4MjQyMzQsYnVybHl3b29kOjE0NTk2MjMxLGNhZGV0Ymx1ZTo2MjY2NTI4LGNoYXJ0cmV1c2U6ODM4ODM1MixjaG9jb2xhdGU6MTM3ODk0NzAsY29yYWw6MTY3NDQyNzIsY29ybmZsb3dlcmJsdWU6NjU5MTk4MSxjb3Juc2lsazoxNjc3NTM4OCxjcmltc29uOjE0NDIzMTAwLGN5YW46NjU1MzUsZGFya2JsdWU6MTM5LGRhcmtjeWFuOjM1NzIzLGRhcmtnb2xkZW5yb2Q6MTIwOTI5MzksZGFya2dyYXk6MTExMTkwMTcsZGFya2dyZWVuOjI1NjAwLGRhcmtncmV5OjExMTE5MDE3LGRhcmtraGFraToxMjQzMzI1OSxkYXJrbWFnZW50YTo5MTA5NjQzLFxuZGFya29saXZlZ3JlZW46NTU5Nzk5OSxkYXJrb3JhbmdlOjE2NzQ3NTIwLGRhcmtvcmNoaWQ6MTAwNDAwMTIsZGFya3JlZDo5MTA5NTA0LGRhcmtzYWxtb246MTUzMDg0MTAsZGFya3NlYWdyZWVuOjk0MTk5MTksZGFya3NsYXRlYmx1ZTo0NzM0MzQ3LGRhcmtzbGF0ZWdyYXk6MzEwMDQ5NSxkYXJrc2xhdGVncmV5OjMxMDA0OTUsZGFya3R1cnF1b2lzZTo1Mjk0NSxkYXJrdmlvbGV0Ojk2OTk1MzksZGVlcHBpbms6MTY3MTY5NDcsZGVlcHNreWJsdWU6NDkxNTEsZGltZ3JheTo2OTA4MjY1LGRpbWdyZXk6NjkwODI2NSxkb2RnZXJibHVlOjIwMDMxOTksZmlyZWJyaWNrOjExNjc0MTQ2LGZsb3JhbHdoaXRlOjE2Nzc1OTIwLGZvcmVzdGdyZWVuOjIyNjM4NDIsZnVjaHNpYToxNjcxMTkzNSxnYWluc2Jvcm86MTQ0NzQ0NjAsZ2hvc3R3aGl0ZToxNjMxNjY3MSxnb2xkOjE2NzY2NzIwLGdvbGRlbnJvZDoxNDMyOTEyMCxncmF5Ojg0MjE1MDQsZ3JlZW46MzI3NjgsZ3JlZW55ZWxsb3c6MTE0MDMwNTUsXG5ncmV5Ojg0MjE1MDQsaG9uZXlkZXc6MTU3OTQxNjAsaG90cGluazoxNjczODc0MCxpbmRpYW5yZWQ6MTM0NTg1MjQsaW5kaWdvOjQ5MTUzMzAsaXZvcnk6MTY3NzcyMDAsa2hha2k6MTU3ODc2NjAsbGF2ZW5kZXI6MTUxMzI0MTAsbGF2ZW5kZXJibHVzaDoxNjc3MzM2NSxsYXduZ3JlZW46ODE5MDk3NixsZW1vbmNoaWZmb246MTY3NzU4ODUsbGlnaHRibHVlOjExMzkzMjU0LGxpZ2h0Y29yYWw6MTU3NjE1MzYsbGlnaHRjeWFuOjE0NzQ1NTk5LGxpZ2h0Z29sZGVucm9keWVsbG93OjE2NDQ4MjEwLGxpZ2h0Z3JheToxMzg4MjMyMyxsaWdodGdyZWVuOjk0OTgyNTYsbGlnaHRncmV5OjEzODgyMzIzLGxpZ2h0cGluazoxNjc1ODQ2NSxsaWdodHNhbG1vbjoxNjc1Mjc2MixsaWdodHNlYWdyZWVuOjIxNDI4OTAsbGlnaHRza3libHVlOjg5MDAzNDYsbGlnaHRzbGF0ZWdyYXk6NzgzMzc1MyxsaWdodHNsYXRlZ3JleTo3ODMzNzUzLGxpZ2h0c3RlZWxibHVlOjExNTg0NzM0LGxpZ2h0eWVsbG93OjE2Nzc3MTg0LFxubGltZTo2NTI4MCxsaW1lZ3JlZW46MzMyOTMzMCxsaW5lbjoxNjQ0NTY3MCxtYWdlbnRhOjE2NzExOTM1LG1hcm9vbjo4Mzg4NjA4LG1lZGl1bWFxdWFtYXJpbmU6NjczNzMyMixtZWRpdW1ibHVlOjIwNSxtZWRpdW1vcmNoaWQ6MTIyMTE2NjcsbWVkaXVtcHVycGxlOjk2NjI2ODMsbWVkaXVtc2VhZ3JlZW46Mzk3ODA5NyxtZWRpdW1zbGF0ZWJsdWU6ODA4Nzc5MCxtZWRpdW1zcHJpbmdncmVlbjo2NDE1NCxtZWRpdW10dXJxdW9pc2U6NDc3MjMwMCxtZWRpdW12aW9sZXRyZWQ6MTMwNDcxNzMsbWlkbmlnaHRibHVlOjE2NDQ5MTIsbWludGNyZWFtOjE2MTIxODUwLG1pc3R5cm9zZToxNjc3MDI3Myxtb2NjYXNpbjoxNjc3MDIyOSxuYXZham93aGl0ZToxNjc2ODY4NSxuYXZ5OjEyOCxvbGRsYWNlOjE2NjQzNTU4LG9saXZlOjg0MjEzNzYsb2xpdmVkcmFiOjcwNDg3Mzksb3JhbmdlOjE2NzUzOTIwLG9yYW5nZXJlZDoxNjcyOTM0NCxvcmNoaWQ6MTQzMTU3MzQscGFsZWdvbGRlbnJvZDoxNTY1NzEzMCxcbnBhbGVncmVlbjoxMDAyNTg4MCxwYWxldHVycXVvaXNlOjExNTI5OTY2LHBhbGV2aW9sZXRyZWQ6MTQzODEyMDMscGFwYXlhd2hpcDoxNjc3MzA3NyxwZWFjaHB1ZmY6MTY3Njc2NzMscGVydToxMzQ2ODk5MSxwaW5rOjE2NzYxMDM1LHBsdW06MTQ1MjQ2MzcscG93ZGVyYmx1ZToxMTU5MTkxMCxwdXJwbGU6ODM4ODczNixyZWQ6MTY3MTE2ODAscm9zeWJyb3duOjEyMzU3NTE5LHJveWFsYmx1ZTo0Mjg2OTQ1LHNhZGRsZWJyb3duOjkxMjcxODcsc2FsbW9uOjE2NDE2ODgyLHNhbmR5YnJvd246MTYwMzI4NjQsc2VhZ3JlZW46MzA1MDMyNyxzZWFzaGVsbDoxNjc3NDYzOCxzaWVubmE6MTA1MDY3OTcsc2lsdmVyOjEyNjMyMjU2LHNreWJsdWU6ODkwMDMzMSxzbGF0ZWJsdWU6Njk3MDA2MSxzbGF0ZWdyYXk6NzM3Mjk0NCxzbGF0ZWdyZXk6NzM3Mjk0NCxzbm93OjE2Nzc1OTMwLHNwcmluZ2dyZWVuOjY1NDA3LHN0ZWVsYmx1ZTo0NjIwOTgwLHRhbjoxMzgwODc4MCx0ZWFsOjMyODk2LHRoaXN0bGU6MTQyMDQ4ODgsXG50b21hdG86MTY3MzcwOTUsdHVycXVvaXNlOjQyNTE4NTYsdmlvbGV0OjE1NjMxMDg2LHdoZWF0OjE2MTEzMzMxLHdoaXRlOjE2Nzc3MjE1LHdoaXRlc21va2U6MTYxMTkyODUseWVsbG93OjE2Nzc2OTYwLHllbGxvd2dyZWVuOjEwMTQ1MDc0fTtUSFJFRS5RdWF0ZXJuaW9uPWZ1bmN0aW9uKGEsYixjLGQpe3RoaXMuX3g9YXx8MDt0aGlzLl95PWJ8fDA7dGhpcy5fej1jfHwwO3RoaXMuX3c9dm9pZCAwIT09ZD9kOjF9O1xuVEhSRUUuUXVhdGVybmlvbi5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLlF1YXRlcm5pb24sX3g6MCxfeTowLF96OjAsX3c6MCxfZXVsZXI6dm9pZCAwLF91cGRhdGVFdWxlcjpmdW5jdGlvbigpe3ZvaWQgMCE9PXRoaXMuX2V1bGVyJiZ0aGlzLl9ldWxlci5zZXRGcm9tUXVhdGVybmlvbih0aGlzLHZvaWQgMCwhMSl9LGdldCB4KCl7cmV0dXJuIHRoaXMuX3h9LHNldCB4KGEpe3RoaXMuX3g9YTt0aGlzLl91cGRhdGVFdWxlcigpfSxnZXQgeSgpe3JldHVybiB0aGlzLl95fSxzZXQgeShhKXt0aGlzLl95PWE7dGhpcy5fdXBkYXRlRXVsZXIoKX0sZ2V0IHooKXtyZXR1cm4gdGhpcy5fen0sc2V0IHooYSl7dGhpcy5fej1hO3RoaXMuX3VwZGF0ZUV1bGVyKCl9LGdldCB3KCl7cmV0dXJuIHRoaXMuX3d9LHNldCB3KGEpe3RoaXMuX3c9YTt0aGlzLl91cGRhdGVFdWxlcigpfSxzZXQ6ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy5feD1hO3RoaXMuX3k9Yjt0aGlzLl96PWM7dGhpcy5fdz1kO1xudGhpcy5fdXBkYXRlRXVsZXIoKTtyZXR1cm4gdGhpc30sY29weTpmdW5jdGlvbihhKXt0aGlzLl94PWEuX3g7dGhpcy5feT1hLl95O3RoaXMuX3o9YS5fejt0aGlzLl93PWEuX3c7dGhpcy5fdXBkYXRlRXVsZXIoKTtyZXR1cm4gdGhpc30sc2V0RnJvbUV1bGVyOmZ1bmN0aW9uKGEsYil7aWYoITE9PT1hIGluc3RhbmNlb2YgVEhSRUUuRXVsZXIpdGhyb3cgRXJyb3IoXCJFUlJPUjogUXVhdGVybmlvbidzIC5zZXRGcm9tRXVsZXIoKSBub3cgZXhwZWN0cyBhIEV1bGVyIHJvdGF0aW9uIHJhdGhlciB0aGFuIGEgVmVjdG9yMyBhbmQgb3JkZXIuICBQbGVhc2UgdXBkYXRlIHlvdXIgY29kZS5cIik7dmFyIGM9TWF0aC5jb3MoYS5feC8yKSxkPU1hdGguY29zKGEuX3kvMiksZT1NYXRoLmNvcyhhLl96LzIpLGY9TWF0aC5zaW4oYS5feC8yKSxoPU1hdGguc2luKGEuX3kvMiksZz1NYXRoLnNpbihhLl96LzIpO1wiWFlaXCI9PT1hLm9yZGVyPyh0aGlzLl94PWYqZCplK2MqaCpnLHRoaXMuX3k9YypoKlxuZS1mKmQqZyx0aGlzLl96PWMqZCpnK2YqaCplLHRoaXMuX3c9YypkKmUtZipoKmcpOlwiWVhaXCI9PT1hLm9yZGVyPyh0aGlzLl94PWYqZCplK2MqaCpnLHRoaXMuX3k9YypoKmUtZipkKmcsdGhpcy5fej1jKmQqZy1mKmgqZSx0aGlzLl93PWMqZCplK2YqaCpnKTpcIlpYWVwiPT09YS5vcmRlcj8odGhpcy5feD1mKmQqZS1jKmgqZyx0aGlzLl95PWMqaCplK2YqZCpnLHRoaXMuX3o9YypkKmcrZipoKmUsdGhpcy5fdz1jKmQqZS1mKmgqZyk6XCJaWVhcIj09PWEub3JkZXI/KHRoaXMuX3g9ZipkKmUtYypoKmcsdGhpcy5feT1jKmgqZStmKmQqZyx0aGlzLl96PWMqZCpnLWYqaCplLHRoaXMuX3c9YypkKmUrZipoKmcpOlwiWVpYXCI9PT1hLm9yZGVyPyh0aGlzLl94PWYqZCplK2MqaCpnLHRoaXMuX3k9YypoKmUrZipkKmcsdGhpcy5fej1jKmQqZy1mKmgqZSx0aGlzLl93PWMqZCplLWYqaCpnKTpcIlhaWVwiPT09YS5vcmRlciYmKHRoaXMuX3g9ZipkKmUtYypoKmcsdGhpcy5feT1jKmgqZS1mKmQqZyx0aGlzLl96PVxuYypkKmcrZipoKmUsdGhpcy5fdz1jKmQqZStmKmgqZyk7ITEhPT1iJiZ0aGlzLl91cGRhdGVFdWxlcigpO3JldHVybiB0aGlzfSxzZXRGcm9tQXhpc0FuZ2xlOmZ1bmN0aW9uKGEsYil7dmFyIGM9Yi8yLGQ9TWF0aC5zaW4oYyk7dGhpcy5feD1hLngqZDt0aGlzLl95PWEueSpkO3RoaXMuX3o9YS56KmQ7dGhpcy5fdz1NYXRoLmNvcyhjKTt0aGlzLl91cGRhdGVFdWxlcigpO3JldHVybiB0aGlzfSxzZXRGcm9tUm90YXRpb25NYXRyaXg6ZnVuY3Rpb24oYSl7dmFyIGI9YS5lbGVtZW50cyxjPWJbMF0sYT1iWzRdLGQ9Yls4XSxlPWJbMV0sZj1iWzVdLGg9Yls5XSxnPWJbMl0saT1iWzZdLGI9YlsxMF0saz1jK2YrYjswPGs/KGM9MC41L01hdGguc3FydChrKzEpLHRoaXMuX3c9MC4yNS9jLHRoaXMuX3g9KGktaCkqYyx0aGlzLl95PShkLWcpKmMsdGhpcy5fej0oZS1hKSpjKTpjPmYmJmM+Yj8oYz0yKk1hdGguc3FydCgxK2MtZi1iKSx0aGlzLl93PShpLWgpL2MsdGhpcy5feD0wLjI1KmMsXG50aGlzLl95PShhK2UpL2MsdGhpcy5fej0oZCtnKS9jKTpmPmI/KGM9MipNYXRoLnNxcnQoMStmLWMtYiksdGhpcy5fdz0oZC1nKS9jLHRoaXMuX3g9KGErZSkvYyx0aGlzLl95PTAuMjUqYyx0aGlzLl96PShoK2kpL2MpOihjPTIqTWF0aC5zcXJ0KDErYi1jLWYpLHRoaXMuX3c9KGUtYSkvYyx0aGlzLl94PShkK2cpL2MsdGhpcy5feT0oaCtpKS9jLHRoaXMuX3o9MC4yNSpjKTt0aGlzLl91cGRhdGVFdWxlcigpO3JldHVybiB0aGlzfSxpbnZlcnNlOmZ1bmN0aW9uKCl7dGhpcy5jb25qdWdhdGUoKS5ub3JtYWxpemUoKTtyZXR1cm4gdGhpc30sY29uanVnYXRlOmZ1bmN0aW9uKCl7dGhpcy5feCo9LTE7dGhpcy5feSo9LTE7dGhpcy5feio9LTE7dGhpcy5fdXBkYXRlRXVsZXIoKTtyZXR1cm4gdGhpc30sbGVuZ3RoU3E6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5feCp0aGlzLl94K3RoaXMuX3kqdGhpcy5feSt0aGlzLl96KnRoaXMuX3ordGhpcy5fdyp0aGlzLl93fSxsZW5ndGg6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMuX3gqXG50aGlzLl94K3RoaXMuX3kqdGhpcy5feSt0aGlzLl96KnRoaXMuX3ordGhpcy5fdyp0aGlzLl93KX0sbm9ybWFsaXplOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5sZW5ndGgoKTswPT09YT8odGhpcy5fej10aGlzLl95PXRoaXMuX3g9MCx0aGlzLl93PTEpOihhPTEvYSx0aGlzLl94Kj1hLHRoaXMuX3kqPWEsdGhpcy5feio9YSx0aGlzLl93Kj1hKTtyZXR1cm4gdGhpc30sbXVsdGlwbHk6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdm9pZCAwIT09Yj8oY29uc29sZS53YXJuKFwiREVQUkVDQVRFRDogUXVhdGVybmlvbidzIC5tdWx0aXBseSgpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLm11bHRpcGx5UXVhdGVybmlvbnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLm11bHRpcGx5UXVhdGVybmlvbnMoYSxiKSk6dGhpcy5tdWx0aXBseVF1YXRlcm5pb25zKHRoaXMsYSl9LG11bHRpcGx5UXVhdGVybmlvbnM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLl94LGQ9YS5feSxlPWEuX3osZj1cbmEuX3csaD1iLl94LGc9Yi5feSxpPWIuX3osaz1iLl93O3RoaXMuX3g9YyprK2YqaCtkKmktZSpnO3RoaXMuX3k9ZCprK2YqZytlKmgtYyppO3RoaXMuX3o9ZSprK2YqaStjKmctZCpoO3RoaXMuX3c9ZiprLWMqaC1kKmctZSppO3RoaXMuX3VwZGF0ZUV1bGVyKCk7cmV0dXJuIHRoaXN9LG11bHRpcGx5VmVjdG9yMzpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEOiBRdWF0ZXJuaW9uJ3MgLm11bHRpcGx5VmVjdG9yMygpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBpcyBub3cgdmVjdG9yLmFwcGx5UXVhdGVybmlvbiggcXVhdGVybmlvbiApIGluc3RlYWQuXCIpO3JldHVybiBhLmFwcGx5UXVhdGVybmlvbih0aGlzKX0sc2xlcnA6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLl94LGQ9dGhpcy5feSxlPXRoaXMuX3osZj10aGlzLl93LGg9ZiphLl93K2MqYS5feCtkKmEuX3krZSphLl96OzA+aD8odGhpcy5fdz0tYS5fdyx0aGlzLl94PS1hLl94LHRoaXMuX3k9LWEuX3ksdGhpcy5fej1cbi1hLl96LGg9LWgpOnRoaXMuY29weShhKTtpZigxPD1oKXJldHVybiB0aGlzLl93PWYsdGhpcy5feD1jLHRoaXMuX3k9ZCx0aGlzLl96PWUsdGhpczt2YXIgZz1NYXRoLmFjb3MoaCksaT1NYXRoLnNxcnQoMS1oKmgpO2lmKDAuMDAxPk1hdGguYWJzKGkpKXJldHVybiB0aGlzLl93PTAuNSooZit0aGlzLl93KSx0aGlzLl94PTAuNSooYyt0aGlzLl94KSx0aGlzLl95PTAuNSooZCt0aGlzLl95KSx0aGlzLl96PTAuNSooZSt0aGlzLl96KSx0aGlzO2g9TWF0aC5zaW4oKDEtYikqZykvaTtnPU1hdGguc2luKGIqZykvaTt0aGlzLl93PWYqaCt0aGlzLl93Kmc7dGhpcy5feD1jKmgrdGhpcy5feCpnO3RoaXMuX3k9ZCpoK3RoaXMuX3kqZzt0aGlzLl96PWUqaCt0aGlzLl96Kmc7dGhpcy5fdXBkYXRlRXVsZXIoKTtyZXR1cm4gdGhpc30sZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiBhLl94PT09dGhpcy5feCYmYS5feT09PXRoaXMuX3kmJmEuX3o9PT10aGlzLl96JiZhLl93PT09dGhpcy5fd30sXG5mcm9tQXJyYXk6ZnVuY3Rpb24oYSl7dGhpcy5feD1hWzBdO3RoaXMuX3k9YVsxXTt0aGlzLl96PWFbMl07dGhpcy5fdz1hWzNdO3RoaXMuX3VwZGF0ZUV1bGVyKCk7cmV0dXJuIHRoaXN9LHRvQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm5bdGhpcy5feCx0aGlzLl95LHRoaXMuX3osdGhpcy5fd119LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBUSFJFRS5RdWF0ZXJuaW9uKHRoaXMuX3gsdGhpcy5feSx0aGlzLl96LHRoaXMuX3cpfX07VEhSRUUuUXVhdGVybmlvbi5zbGVycD1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gYy5jb3B5KGEpLnNsZXJwKGIsZCl9O1RIUkVFLlZlY3RvcjI9ZnVuY3Rpb24oYSxiKXt0aGlzLng9YXx8MDt0aGlzLnk9Ynx8MH07XG5USFJFRS5WZWN0b3IyLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuVmVjdG9yMixzZXQ6ZnVuY3Rpb24oYSxiKXt0aGlzLng9YTt0aGlzLnk9YjtyZXR1cm4gdGhpc30sc2V0WDpmdW5jdGlvbihhKXt0aGlzLng9YTtyZXR1cm4gdGhpc30sc2V0WTpmdW5jdGlvbihhKXt0aGlzLnk9YTtyZXR1cm4gdGhpc30sc2V0Q29tcG9uZW50OmZ1bmN0aW9uKGEsYil7c3dpdGNoKGEpe2Nhc2UgMDp0aGlzLng9YjticmVhaztjYXNlIDE6dGhpcy55PWI7YnJlYWs7ZGVmYXVsdDp0aHJvdyBFcnJvcihcImluZGV4IGlzIG91dCBvZiByYW5nZTogXCIrYSk7fX0sZ2V0Q29tcG9uZW50OmZ1bmN0aW9uKGEpe3N3aXRjaChhKXtjYXNlIDA6cmV0dXJuIHRoaXMueDtjYXNlIDE6cmV0dXJuIHRoaXMueTtkZWZhdWx0OnRocm93IEVycm9yKFwiaW5kZXggaXMgb3V0IG9mIHJhbmdlOiBcIithKTt9fSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMueD1hLng7dGhpcy55PWEueTtyZXR1cm4gdGhpc30sYWRkOmZ1bmN0aW9uKGEsXG5iKXtpZih2b2lkIDAhPT1iKXJldHVybiBjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEOiBWZWN0b3IyJ3MgLmFkZCgpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLmFkZFZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLmFkZFZlY3RvcnMoYSxiKTt0aGlzLngrPWEueDt0aGlzLnkrPWEueTtyZXR1cm4gdGhpc30sYWRkVmVjdG9yczpmdW5jdGlvbihhLGIpe3RoaXMueD1hLngrYi54O3RoaXMueT1hLnkrYi55O3JldHVybiB0aGlzfSxhZGRTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy54Kz1hO3RoaXMueSs9YTtyZXR1cm4gdGhpc30sc3ViOmZ1bmN0aW9uKGEsYil7aWYodm9pZCAwIT09YilyZXR1cm4gY29uc29sZS53YXJuKFwiREVQUkVDQVRFRDogVmVjdG9yMidzIC5zdWIoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5zdWJWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC5cIiksdGhpcy5zdWJWZWN0b3JzKGEsYik7dGhpcy54LT1hLng7dGhpcy55LT1cbmEueTtyZXR1cm4gdGhpc30sc3ViVmVjdG9yczpmdW5jdGlvbihhLGIpe3RoaXMueD1hLngtYi54O3RoaXMueT1hLnktYi55O3JldHVybiB0aGlzfSxtdWx0aXBseVNjYWxhcjpmdW5jdGlvbihhKXt0aGlzLngqPWE7dGhpcy55Kj1hO3JldHVybiB0aGlzfSxkaXZpZGVTY2FsYXI6ZnVuY3Rpb24oYSl7MCE9PWE/KGE9MS9hLHRoaXMueCo9YSx0aGlzLnkqPWEpOnRoaXMueT10aGlzLng9MDtyZXR1cm4gdGhpc30sbWluOmZ1bmN0aW9uKGEpe3RoaXMueD5hLngmJih0aGlzLng9YS54KTt0aGlzLnk+YS55JiYodGhpcy55PWEueSk7cmV0dXJuIHRoaXN9LG1heDpmdW5jdGlvbihhKXt0aGlzLng8YS54JiYodGhpcy54PWEueCk7dGhpcy55PGEueSYmKHRoaXMueT1hLnkpO3JldHVybiB0aGlzfSxjbGFtcDpmdW5jdGlvbihhLGIpe3RoaXMueDxhLng/dGhpcy54PWEueDp0aGlzLng+Yi54JiYodGhpcy54PWIueCk7dGhpcy55PGEueT90aGlzLnk9YS55OnRoaXMueT5iLnkmJih0aGlzLnk9Yi55KTtcbnJldHVybiB0aGlzfSxuZWdhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tdWx0aXBseVNjYWxhcigtMSl9LGRvdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy54KmEueCt0aGlzLnkqYS55fSxsZW5ndGhTcTpmdW5jdGlvbigpe3JldHVybiB0aGlzLngqdGhpcy54K3RoaXMueSp0aGlzLnl9LGxlbmd0aDpmdW5jdGlvbigpe3JldHVybiBNYXRoLnNxcnQodGhpcy54KnRoaXMueCt0aGlzLnkqdGhpcy55KX0sbm9ybWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGl2aWRlU2NhbGFyKHRoaXMubGVuZ3RoKCkpfSxkaXN0YW5jZVRvOmZ1bmN0aW9uKGEpe3JldHVybiBNYXRoLnNxcnQodGhpcy5kaXN0YW5jZVRvU3F1YXJlZChhKSl9LGRpc3RhbmNlVG9TcXVhcmVkOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMueC1hLngsYT10aGlzLnktYS55O3JldHVybiBiKmIrYSphfSxzZXRMZW5ndGg6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5sZW5ndGgoKTswIT09YiYmYSE9PWImJnRoaXMubXVsdGlwbHlTY2FsYXIoYS9cbmIpO3JldHVybiB0aGlzfSxsZXJwOmZ1bmN0aW9uKGEsYil7dGhpcy54Kz0oYS54LXRoaXMueCkqYjt0aGlzLnkrPShhLnktdGhpcy55KSpiO3JldHVybiB0aGlzfSxlcXVhbHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEueD09PXRoaXMueCYmYS55PT09dGhpcy55fSxmcm9tQXJyYXk6ZnVuY3Rpb24oYSl7dGhpcy54PWFbMF07dGhpcy55PWFbMV07cmV0dXJuIHRoaXN9LHRvQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm5bdGhpcy54LHRoaXMueV19LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBUSFJFRS5WZWN0b3IyKHRoaXMueCx0aGlzLnkpfX07VEhSRUUuVmVjdG9yMz1mdW5jdGlvbihhLGIsYyl7dGhpcy54PWF8fDA7dGhpcy55PWJ8fDA7dGhpcy56PWN8fDB9O1xuVEhSRUUuVmVjdG9yMy5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLlZlY3RvcjMsc2V0OmZ1bmN0aW9uKGEsYixjKXt0aGlzLng9YTt0aGlzLnk9Yjt0aGlzLno9YztyZXR1cm4gdGhpc30sc2V0WDpmdW5jdGlvbihhKXt0aGlzLng9YTtyZXR1cm4gdGhpc30sc2V0WTpmdW5jdGlvbihhKXt0aGlzLnk9YTtyZXR1cm4gdGhpc30sc2V0WjpmdW5jdGlvbihhKXt0aGlzLno9YTtyZXR1cm4gdGhpc30sc2V0Q29tcG9uZW50OmZ1bmN0aW9uKGEsYil7c3dpdGNoKGEpe2Nhc2UgMDp0aGlzLng9YjticmVhaztjYXNlIDE6dGhpcy55PWI7YnJlYWs7Y2FzZSAyOnRoaXMuej1iO2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJpbmRleCBpcyBvdXQgb2YgcmFuZ2U6IFwiK2EpO319LGdldENvbXBvbmVudDpmdW5jdGlvbihhKXtzd2l0Y2goYSl7Y2FzZSAwOnJldHVybiB0aGlzLng7Y2FzZSAxOnJldHVybiB0aGlzLnk7Y2FzZSAyOnJldHVybiB0aGlzLno7ZGVmYXVsdDp0aHJvdyBFcnJvcihcImluZGV4IGlzIG91dCBvZiByYW5nZTogXCIrXG5hKTt9fSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMueD1hLng7dGhpcy55PWEueTt0aGlzLno9YS56O3JldHVybiB0aGlzfSxhZGQ6ZnVuY3Rpb24oYSxiKXtpZih2b2lkIDAhPT1iKXJldHVybiBjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEOiBWZWN0b3IzJ3MgLmFkZCgpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLmFkZFZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLmFkZFZlY3RvcnMoYSxiKTt0aGlzLngrPWEueDt0aGlzLnkrPWEueTt0aGlzLnorPWEuejtyZXR1cm4gdGhpc30sYWRkU2NhbGFyOmZ1bmN0aW9uKGEpe3RoaXMueCs9YTt0aGlzLnkrPWE7dGhpcy56Kz1hO3JldHVybiB0aGlzfSxhZGRWZWN0b3JzOmZ1bmN0aW9uKGEsYil7dGhpcy54PWEueCtiLng7dGhpcy55PWEueStiLnk7dGhpcy56PWEueitiLno7cmV0dXJuIHRoaXN9LHN1YjpmdW5jdGlvbihhLGIpe2lmKHZvaWQgMCE9PWIpcmV0dXJuIGNvbnNvbGUud2FybihcIkRFUFJFQ0FURUQ6IFZlY3RvcjMncyAuc3ViKCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAuc3ViVmVjdG9ycyggYSwgYiApIGluc3RlYWQuXCIpLFxudGhpcy5zdWJWZWN0b3JzKGEsYik7dGhpcy54LT1hLng7dGhpcy55LT1hLnk7dGhpcy56LT1hLno7cmV0dXJuIHRoaXN9LHN1YlZlY3RvcnM6ZnVuY3Rpb24oYSxiKXt0aGlzLng9YS54LWIueDt0aGlzLnk9YS55LWIueTt0aGlzLno9YS56LWIuejtyZXR1cm4gdGhpc30sbXVsdGlwbHk6ZnVuY3Rpb24oYSxiKXtpZih2b2lkIDAhPT1iKXJldHVybiBjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEOiBWZWN0b3IzJ3MgLm11bHRpcGx5KCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAubXVsdGlwbHlWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC5cIiksdGhpcy5tdWx0aXBseVZlY3RvcnMoYSxiKTt0aGlzLngqPWEueDt0aGlzLnkqPWEueTt0aGlzLnoqPWEuejtyZXR1cm4gdGhpc30sbXVsdGlwbHlTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy54Kj1hO3RoaXMueSo9YTt0aGlzLnoqPWE7cmV0dXJuIHRoaXN9LG11bHRpcGx5VmVjdG9yczpmdW5jdGlvbihhLGIpe3RoaXMueD1hLngqXG5iLng7dGhpcy55PWEueSpiLnk7dGhpcy56PWEueipiLno7cmV0dXJuIHRoaXN9LGFwcGx5TWF0cml4MzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLngsYz10aGlzLnksZD10aGlzLnosYT1hLmVsZW1lbnRzO3RoaXMueD1hWzBdKmIrYVszXSpjK2FbNl0qZDt0aGlzLnk9YVsxXSpiK2FbNF0qYythWzddKmQ7dGhpcy56PWFbMl0qYithWzVdKmMrYVs4XSpkO3JldHVybiB0aGlzfSxhcHBseU1hdHJpeDQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy54LGM9dGhpcy55LGQ9dGhpcy56LGE9YS5lbGVtZW50czt0aGlzLng9YVswXSpiK2FbNF0qYythWzhdKmQrYVsxMl07dGhpcy55PWFbMV0qYithWzVdKmMrYVs5XSpkK2FbMTNdO3RoaXMuej1hWzJdKmIrYVs2XSpjK2FbMTBdKmQrYVsxNF07cmV0dXJuIHRoaXN9LGFwcGx5UHJvamVjdGlvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLngsYz10aGlzLnksZD10aGlzLnosYT1hLmVsZW1lbnRzLGU9MS8oYVszXSpiK2FbN10qYythWzExXSpkK2FbMTVdKTtcbnRoaXMueD0oYVswXSpiK2FbNF0qYythWzhdKmQrYVsxMl0pKmU7dGhpcy55PShhWzFdKmIrYVs1XSpjK2FbOV0qZCthWzEzXSkqZTt0aGlzLno9KGFbMl0qYithWzZdKmMrYVsxMF0qZCthWzE0XSkqZTtyZXR1cm4gdGhpc30sYXBwbHlRdWF0ZXJuaW9uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMueCxjPXRoaXMueSxkPXRoaXMueixlPWEueCxmPWEueSxoPWEueixhPWEudyxnPWEqYitmKmQtaCpjLGk9YSpjK2gqYi1lKmQsaz1hKmQrZSpjLWYqYixiPS1lKmItZipjLWgqZDt0aGlzLng9ZyphK2IqLWUraSotaC1rKi1mO3RoaXMueT1pKmErYiotZitrKi1lLWcqLWg7dGhpcy56PWsqYStiKi1oK2cqLWYtaSotZTtyZXR1cm4gdGhpc30sdHJhbnNmb3JtRGlyZWN0aW9uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMueCxjPXRoaXMueSxkPXRoaXMueixhPWEuZWxlbWVudHM7dGhpcy54PWFbMF0qYithWzRdKmMrYVs4XSpkO3RoaXMueT1hWzFdKmIrYVs1XSpjK2FbOV0qZDt0aGlzLno9YVsyXSpcbmIrYVs2XSpjK2FbMTBdKmQ7dGhpcy5ub3JtYWxpemUoKTtyZXR1cm4gdGhpc30sZGl2aWRlOmZ1bmN0aW9uKGEpe3RoaXMueC89YS54O3RoaXMueS89YS55O3RoaXMuei89YS56O3JldHVybiB0aGlzfSxkaXZpZGVTY2FsYXI6ZnVuY3Rpb24oYSl7MCE9PWE/KGE9MS9hLHRoaXMueCo9YSx0aGlzLnkqPWEsdGhpcy56Kj1hKTp0aGlzLno9dGhpcy55PXRoaXMueD0wO3JldHVybiB0aGlzfSxtaW46ZnVuY3Rpb24oYSl7dGhpcy54PmEueCYmKHRoaXMueD1hLngpO3RoaXMueT5hLnkmJih0aGlzLnk9YS55KTt0aGlzLno+YS56JiYodGhpcy56PWEueik7cmV0dXJuIHRoaXN9LG1heDpmdW5jdGlvbihhKXt0aGlzLng8YS54JiYodGhpcy54PWEueCk7dGhpcy55PGEueSYmKHRoaXMueT1hLnkpO3RoaXMuejxhLnomJih0aGlzLno9YS56KTtyZXR1cm4gdGhpc30sY2xhbXA6ZnVuY3Rpb24oYSxiKXt0aGlzLng8YS54P3RoaXMueD1hLng6dGhpcy54PmIueCYmKHRoaXMueD1iLngpO3RoaXMueTxcbmEueT90aGlzLnk9YS55OnRoaXMueT5iLnkmJih0aGlzLnk9Yi55KTt0aGlzLno8YS56P3RoaXMuej1hLno6dGhpcy56PmIueiYmKHRoaXMuej1iLnopO3JldHVybiB0aGlzfSxuZWdhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tdWx0aXBseVNjYWxhcigtMSl9LGRvdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy54KmEueCt0aGlzLnkqYS55K3RoaXMueiphLnp9LGxlbmd0aFNxOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueCp0aGlzLngrdGhpcy55KnRoaXMueSt0aGlzLnoqdGhpcy56fSxsZW5ndGg6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMueCp0aGlzLngrdGhpcy55KnRoaXMueSt0aGlzLnoqdGhpcy56KX0sbGVuZ3RoTWFuaGF0dGFuOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguYWJzKHRoaXMueCkrTWF0aC5hYnModGhpcy55KStNYXRoLmFicyh0aGlzLnopfSxub3JtYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXZpZGVTY2FsYXIodGhpcy5sZW5ndGgoKSl9LFxuc2V0TGVuZ3RoOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMubGVuZ3RoKCk7MCE9PWImJmEhPT1iJiZ0aGlzLm11bHRpcGx5U2NhbGFyKGEvYik7cmV0dXJuIHRoaXN9LGxlcnA6ZnVuY3Rpb24oYSxiKXt0aGlzLngrPShhLngtdGhpcy54KSpiO3RoaXMueSs9KGEueS10aGlzLnkpKmI7dGhpcy56Kz0oYS56LXRoaXMueikqYjtyZXR1cm4gdGhpc30sY3Jvc3M6ZnVuY3Rpb24oYSxiKXtpZih2b2lkIDAhPT1iKXJldHVybiBjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEOiBWZWN0b3IzJ3MgLmNyb3NzKCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAuY3Jvc3NWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC5cIiksdGhpcy5jcm9zc1ZlY3RvcnMoYSxiKTt2YXIgYz10aGlzLngsZD10aGlzLnksZT10aGlzLno7dGhpcy54PWQqYS56LWUqYS55O3RoaXMueT1lKmEueC1jKmEuejt0aGlzLno9YyphLnktZCphLng7cmV0dXJuIHRoaXN9LGNyb3NzVmVjdG9yczpmdW5jdGlvbihhLGIpe3ZhciBjPVxuYS54LGQ9YS55LGU9YS56LGY9Yi54LGg9Yi55LGc9Yi56O3RoaXMueD1kKmctZSpoO3RoaXMueT1lKmYtYypnO3RoaXMuej1jKmgtZCpmO3JldHVybiB0aGlzfSxhbmdsZVRvOmZ1bmN0aW9uKGEpe2E9dGhpcy5kb3QoYSkvKHRoaXMubGVuZ3RoKCkqYS5sZW5ndGgoKSk7cmV0dXJuIE1hdGguYWNvcyhUSFJFRS5NYXRoLmNsYW1wKGEsLTEsMSkpfSxkaXN0YW5jZVRvOmZ1bmN0aW9uKGEpe3JldHVybiBNYXRoLnNxcnQodGhpcy5kaXN0YW5jZVRvU3F1YXJlZChhKSl9LGRpc3RhbmNlVG9TcXVhcmVkOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMueC1hLngsYz10aGlzLnktYS55LGE9dGhpcy56LWEuejtyZXR1cm4gYipiK2MqYythKmF9LHNldEV1bGVyRnJvbVJvdGF0aW9uTWF0cml4OmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlJFTU9WRUQ6IFZlY3RvcjMncyBzZXRFdWxlckZyb21Sb3RhdGlvbk1hdHJpeCBoYXMgYmVlbiByZW1vdmVkIGluIGZhdm9yIG9mIEV1bGVyLnNldEZyb21Sb3RhdGlvbk1hdHJpeCgpLCBwbGVhc2UgdXBkYXRlIHlvdXIgY29kZS5cIil9LFxuc2V0RXVsZXJGcm9tUXVhdGVybmlvbjpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJSRU1PVkVEOiBWZWN0b3IzJ3Mgc2V0RXVsZXJGcm9tUXVhdGVybmlvbjogaGFzIGJlZW4gcmVtb3ZlZCBpbiBmYXZvciBvZiBFdWxlci5zZXRGcm9tUXVhdGVybmlvbigpLCBwbGVhc2UgdXBkYXRlIHlvdXIgY29kZS5cIil9LGdldFBvc2l0aW9uRnJvbU1hdHJpeDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEOiBWZWN0b3IzJ3MgLmdldFBvc2l0aW9uRnJvbU1hdHJpeCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLnNldEZyb21NYXRyaXhQb3NpdGlvbigpLiBQbGVhc2UgdXBkYXRlIHlvdXIgY29kZS5cIik7cmV0dXJuIHRoaXMuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGEpfSxnZXRTY2FsZUZyb21NYXRyaXg6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiREVQUkVDQVRFRDogVmVjdG9yMydzIC5nZXRTY2FsZUZyb21NYXRyaXgoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5zZXRGcm9tTWF0cml4U2NhbGUoKS4gUGxlYXNlIHVwZGF0ZSB5b3VyIGNvZGUuXCIpO1xucmV0dXJuIHRoaXMuc2V0RnJvbU1hdHJpeFNjYWxlKGEpfSxnZXRDb2x1bW5Gcm9tTWF0cml4OmZ1bmN0aW9uKGEsYil7Y29uc29sZS53YXJuKFwiREVQUkVDQVRFRDogVmVjdG9yMydzIC5nZXRDb2x1bW5Gcm9tTWF0cml4KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuc2V0RnJvbU1hdHJpeENvbHVtbigpLiBQbGVhc2UgdXBkYXRlIHlvdXIgY29kZS5cIik7cmV0dXJuIHRoaXMuc2V0RnJvbU1hdHJpeENvbHVtbihhLGIpfSxzZXRGcm9tTWF0cml4UG9zaXRpb246ZnVuY3Rpb24oYSl7dGhpcy54PWEuZWxlbWVudHNbMTJdO3RoaXMueT1hLmVsZW1lbnRzWzEzXTt0aGlzLno9YS5lbGVtZW50c1sxNF07cmV0dXJuIHRoaXN9LHNldEZyb21NYXRyaXhTY2FsZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnNldChhLmVsZW1lbnRzWzBdLGEuZWxlbWVudHNbMV0sYS5lbGVtZW50c1syXSkubGVuZ3RoKCksYz10aGlzLnNldChhLmVsZW1lbnRzWzRdLGEuZWxlbWVudHNbNV0sYS5lbGVtZW50c1s2XSkubGVuZ3RoKCksXG5hPXRoaXMuc2V0KGEuZWxlbWVudHNbOF0sYS5lbGVtZW50c1s5XSxhLmVsZW1lbnRzWzEwXSkubGVuZ3RoKCk7dGhpcy54PWI7dGhpcy55PWM7dGhpcy56PWE7cmV0dXJuIHRoaXN9LHNldEZyb21NYXRyaXhDb2x1bW46ZnVuY3Rpb24oYSxiKXt2YXIgYz00KmEsZD1iLmVsZW1lbnRzO3RoaXMueD1kW2NdO3RoaXMueT1kW2MrMV07dGhpcy56PWRbYysyXTtyZXR1cm4gdGhpc30sZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiBhLng9PT10aGlzLngmJmEueT09PXRoaXMueSYmYS56PT09dGhpcy56fSxmcm9tQXJyYXk6ZnVuY3Rpb24oYSl7dGhpcy54PWFbMF07dGhpcy55PWFbMV07dGhpcy56PWFbMl07cmV0dXJuIHRoaXN9LHRvQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm5bdGhpcy54LHRoaXMueSx0aGlzLnpdfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgVEhSRUUuVmVjdG9yMyh0aGlzLngsdGhpcy55LHRoaXMueil9fTtcblRIUkVFLmV4dGVuZChUSFJFRS5WZWN0b3IzLnByb3RvdHlwZSx7YXBwbHlFdWxlcjpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5RdWF0ZXJuaW9uO3JldHVybiBmdW5jdGlvbihiKXshMT09PWIgaW5zdGFuY2VvZiBUSFJFRS5FdWxlciYmY29uc29sZS5lcnJvcihcIkVSUk9SOiBWZWN0b3IzJ3MgLmFwcGx5RXVsZXIoKSBub3cgZXhwZWN0cyBhIEV1bGVyIHJvdGF0aW9uIHJhdGhlciB0aGFuIGEgVmVjdG9yMyBhbmQgb3JkZXIuICBQbGVhc2UgdXBkYXRlIHlvdXIgY29kZS5cIik7dGhpcy5hcHBseVF1YXRlcm5pb24oYS5zZXRGcm9tRXVsZXIoYikpO3JldHVybiB0aGlzfX0oKSxhcHBseUF4aXNBbmdsZTpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5RdWF0ZXJuaW9uO3JldHVybiBmdW5jdGlvbihiLGMpe3RoaXMuYXBwbHlRdWF0ZXJuaW9uKGEuc2V0RnJvbUF4aXNBbmdsZShiLGMpKTtyZXR1cm4gdGhpc319KCkscHJvamVjdE9uVmVjdG9yOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjM7XG5yZXR1cm4gZnVuY3Rpb24oYil7YS5jb3B5KGIpLm5vcm1hbGl6ZSgpO2I9dGhpcy5kb3QoYSk7cmV0dXJuIHRoaXMuY29weShhKS5tdWx0aXBseVNjYWxhcihiKX19KCkscHJvamVjdE9uUGxhbmU6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oYil7YS5jb3B5KHRoaXMpLnByb2plY3RPblZlY3RvcihiKTtyZXR1cm4gdGhpcy5zdWIoYSl9fSgpLHJlZmxlY3Q6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oYil7YS5jb3B5KHRoaXMpLnByb2plY3RPblZlY3RvcihiKS5tdWx0aXBseVNjYWxhcigyKTtyZXR1cm4gdGhpcy5zdWJWZWN0b3JzKGEsdGhpcyl9fSgpfSk7VEhSRUUuVmVjdG9yND1mdW5jdGlvbihhLGIsYyxkKXt0aGlzLng9YXx8MDt0aGlzLnk9Ynx8MDt0aGlzLno9Y3x8MDt0aGlzLnc9dm9pZCAwIT09ZD9kOjF9O1xuVEhSRUUuVmVjdG9yNC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLlZlY3RvcjQsc2V0OmZ1bmN0aW9uKGEsYixjLGQpe3RoaXMueD1hO3RoaXMueT1iO3RoaXMuej1jO3RoaXMudz1kO3JldHVybiB0aGlzfSxzZXRYOmZ1bmN0aW9uKGEpe3RoaXMueD1hO3JldHVybiB0aGlzfSxzZXRZOmZ1bmN0aW9uKGEpe3RoaXMueT1hO3JldHVybiB0aGlzfSxzZXRaOmZ1bmN0aW9uKGEpe3RoaXMuej1hO3JldHVybiB0aGlzfSxzZXRXOmZ1bmN0aW9uKGEpe3RoaXMudz1hO3JldHVybiB0aGlzfSxzZXRDb21wb25lbnQ6ZnVuY3Rpb24oYSxiKXtzd2l0Y2goYSl7Y2FzZSAwOnRoaXMueD1iO2JyZWFrO2Nhc2UgMTp0aGlzLnk9YjticmVhaztjYXNlIDI6dGhpcy56PWI7YnJlYWs7Y2FzZSAzOnRoaXMudz1iO2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJpbmRleCBpcyBvdXQgb2YgcmFuZ2U6IFwiK2EpO319LGdldENvbXBvbmVudDpmdW5jdGlvbihhKXtzd2l0Y2goYSl7Y2FzZSAwOnJldHVybiB0aGlzLng7XG5jYXNlIDE6cmV0dXJuIHRoaXMueTtjYXNlIDI6cmV0dXJuIHRoaXMuejtjYXNlIDM6cmV0dXJuIHRoaXMudztkZWZhdWx0OnRocm93IEVycm9yKFwiaW5kZXggaXMgb3V0IG9mIHJhbmdlOiBcIithKTt9fSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMueD1hLng7dGhpcy55PWEueTt0aGlzLno9YS56O3RoaXMudz12b2lkIDAhPT1hLnc/YS53OjE7cmV0dXJuIHRoaXN9LGFkZDpmdW5jdGlvbihhLGIpe2lmKHZvaWQgMCE9PWIpcmV0dXJuIGNvbnNvbGUud2FybihcIkRFUFJFQ0FURUQ6IFZlY3RvcjQncyAuYWRkKCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAuYWRkVmVjdG9ycyggYSwgYiApIGluc3RlYWQuXCIpLHRoaXMuYWRkVmVjdG9ycyhhLGIpO3RoaXMueCs9YS54O3RoaXMueSs9YS55O3RoaXMueis9YS56O3RoaXMudys9YS53O3JldHVybiB0aGlzfSxhZGRTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy54Kz1hO3RoaXMueSs9YTt0aGlzLnorPWE7dGhpcy53Kz1hO3JldHVybiB0aGlzfSxcbmFkZFZlY3RvcnM6ZnVuY3Rpb24oYSxiKXt0aGlzLng9YS54K2IueDt0aGlzLnk9YS55K2IueTt0aGlzLno9YS56K2Iuejt0aGlzLnc9YS53K2IudztyZXR1cm4gdGhpc30sc3ViOmZ1bmN0aW9uKGEsYil7aWYodm9pZCAwIT09YilyZXR1cm4gY29uc29sZS53YXJuKFwiREVQUkVDQVRFRDogVmVjdG9yNCdzIC5zdWIoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5zdWJWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC5cIiksdGhpcy5zdWJWZWN0b3JzKGEsYik7dGhpcy54LT1hLng7dGhpcy55LT1hLnk7dGhpcy56LT1hLno7dGhpcy53LT1hLnc7cmV0dXJuIHRoaXN9LHN1YlZlY3RvcnM6ZnVuY3Rpb24oYSxiKXt0aGlzLng9YS54LWIueDt0aGlzLnk9YS55LWIueTt0aGlzLno9YS56LWIuejt0aGlzLnc9YS53LWIudztyZXR1cm4gdGhpc30sbXVsdGlwbHlTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy54Kj1hO3RoaXMueSo9YTt0aGlzLnoqPWE7dGhpcy53Kj1hO3JldHVybiB0aGlzfSxcbmFwcGx5TWF0cml4NDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLngsYz10aGlzLnksZD10aGlzLnosZT10aGlzLncsYT1hLmVsZW1lbnRzO3RoaXMueD1hWzBdKmIrYVs0XSpjK2FbOF0qZCthWzEyXSplO3RoaXMueT1hWzFdKmIrYVs1XSpjK2FbOV0qZCthWzEzXSplO3RoaXMuej1hWzJdKmIrYVs2XSpjK2FbMTBdKmQrYVsxNF0qZTt0aGlzLnc9YVszXSpiK2FbN10qYythWzExXSpkK2FbMTVdKmU7cmV0dXJuIHRoaXN9LGRpdmlkZVNjYWxhcjpmdW5jdGlvbihhKXswIT09YT8oYT0xL2EsdGhpcy54Kj1hLHRoaXMueSo9YSx0aGlzLnoqPWEsdGhpcy53Kj1hKToodGhpcy56PXRoaXMueT10aGlzLng9MCx0aGlzLnc9MSk7cmV0dXJuIHRoaXN9LHNldEF4aXNBbmdsZUZyb21RdWF0ZXJuaW9uOmZ1bmN0aW9uKGEpe3RoaXMudz0yKk1hdGguYWNvcyhhLncpO3ZhciBiPU1hdGguc3FydCgxLWEudyphLncpOzFFLTQ+Yj8odGhpcy54PTEsdGhpcy56PXRoaXMueT0wKToodGhpcy54PWEueC9iLFxudGhpcy55PWEueS9iLHRoaXMuej1hLnovYik7cmV0dXJuIHRoaXN9LHNldEF4aXNBbmdsZUZyb21Sb3RhdGlvbk1hdHJpeDpmdW5jdGlvbihhKXt2YXIgYixjLGQsYT1hLmVsZW1lbnRzLGU9YVswXTtkPWFbNF07dmFyIGY9YVs4XSxoPWFbMV0sZz1hWzVdLGk9YVs5XTtjPWFbMl07Yj1hWzZdO3ZhciBrPWFbMTBdO2lmKDAuMDE+TWF0aC5hYnMoZC1oKSYmMC4wMT5NYXRoLmFicyhmLWMpJiYwLjAxPk1hdGguYWJzKGktYikpe2lmKDAuMT5NYXRoLmFicyhkK2gpJiYwLjE+TWF0aC5hYnMoZitjKSYmMC4xPk1hdGguYWJzKGkrYikmJjAuMT5NYXRoLmFicyhlK2cray0zKSlyZXR1cm4gdGhpcy5zZXQoMSwwLDAsMCksdGhpczthPU1hdGguUEk7ZT0oZSsxKS8yO2c9KGcrMSkvMjtrPShrKzEpLzI7ZD0oZCtoKS80O2Y9KGYrYykvNDtpPShpK2IpLzQ7ZT5nJiZlPms/MC4wMT5lPyhiPTAsZD1jPTAuNzA3MTA2NzgxKTooYj1NYXRoLnNxcnQoZSksYz1kL2IsZD1mL2IpOmc+az8wLjAxPmc/XG4oYj0wLjcwNzEwNjc4MSxjPTAsZD0wLjcwNzEwNjc4MSk6KGM9TWF0aC5zcXJ0KGcpLGI9ZC9jLGQ9aS9jKTowLjAxPms/KGM9Yj0wLjcwNzEwNjc4MSxkPTApOihkPU1hdGguc3FydChrKSxiPWYvZCxjPWkvZCk7dGhpcy5zZXQoYixjLGQsYSk7cmV0dXJuIHRoaXN9YT1NYXRoLnNxcnQoKGItaSkqKGItaSkrKGYtYykqKGYtYykrKGgtZCkqKGgtZCkpOzAuMDAxPk1hdGguYWJzKGEpJiYoYT0xKTt0aGlzLng9KGItaSkvYTt0aGlzLnk9KGYtYykvYTt0aGlzLno9KGgtZCkvYTt0aGlzLnc9TWF0aC5hY29zKChlK2cray0xKS8yKTtyZXR1cm4gdGhpc30sbWluOmZ1bmN0aW9uKGEpe3RoaXMueD5hLngmJih0aGlzLng9YS54KTt0aGlzLnk+YS55JiYodGhpcy55PWEueSk7dGhpcy56PmEueiYmKHRoaXMuej1hLnopO3RoaXMudz5hLncmJih0aGlzLnc9YS53KTtyZXR1cm4gdGhpc30sbWF4OmZ1bmN0aW9uKGEpe3RoaXMueDxhLngmJih0aGlzLng9YS54KTt0aGlzLnk8YS55JiYodGhpcy55PVxuYS55KTt0aGlzLno8YS56JiYodGhpcy56PWEueik7dGhpcy53PGEudyYmKHRoaXMudz1hLncpO3JldHVybiB0aGlzfSxjbGFtcDpmdW5jdGlvbihhLGIpe3RoaXMueDxhLng/dGhpcy54PWEueDp0aGlzLng+Yi54JiYodGhpcy54PWIueCk7dGhpcy55PGEueT90aGlzLnk9YS55OnRoaXMueT5iLnkmJih0aGlzLnk9Yi55KTt0aGlzLno8YS56P3RoaXMuej1hLno6dGhpcy56PmIueiYmKHRoaXMuej1iLnopO3RoaXMudzxhLnc/dGhpcy53PWEudzp0aGlzLnc+Yi53JiYodGhpcy53PWIudyk7cmV0dXJuIHRoaXN9LG5lZ2F0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm11bHRpcGx5U2NhbGFyKC0xKX0sZG90OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLngqYS54K3RoaXMueSphLnkrdGhpcy56KmEueit0aGlzLncqYS53fSxsZW5ndGhTcTpmdW5jdGlvbigpe3JldHVybiB0aGlzLngqdGhpcy54K3RoaXMueSp0aGlzLnkrdGhpcy56KnRoaXMueit0aGlzLncqdGhpcy53fSxsZW5ndGg6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMueCpcbnRoaXMueCt0aGlzLnkqdGhpcy55K3RoaXMueip0aGlzLnordGhpcy53KnRoaXMudyl9LGxlbmd0aE1hbmhhdHRhbjpmdW5jdGlvbigpe3JldHVybiBNYXRoLmFicyh0aGlzLngpK01hdGguYWJzKHRoaXMueSkrTWF0aC5hYnModGhpcy56KStNYXRoLmFicyh0aGlzLncpfSxub3JtYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXZpZGVTY2FsYXIodGhpcy5sZW5ndGgoKSl9LHNldExlbmd0aDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmxlbmd0aCgpOzAhPT1iJiZhIT09YiYmdGhpcy5tdWx0aXBseVNjYWxhcihhL2IpO3JldHVybiB0aGlzfSxsZXJwOmZ1bmN0aW9uKGEsYil7dGhpcy54Kz0oYS54LXRoaXMueCkqYjt0aGlzLnkrPShhLnktdGhpcy55KSpiO3RoaXMueis9KGEuei10aGlzLnopKmI7dGhpcy53Kz0oYS53LXRoaXMudykqYjtyZXR1cm4gdGhpc30sZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiBhLng9PT10aGlzLngmJmEueT09PXRoaXMueSYmYS56PT09dGhpcy56JiZcbmEudz09PXRoaXMud30sZnJvbUFycmF5OmZ1bmN0aW9uKGEpe3RoaXMueD1hWzBdO3RoaXMueT1hWzFdO3RoaXMuej1hWzJdO3RoaXMudz1hWzNdO3JldHVybiB0aGlzfSx0b0FycmF5OmZ1bmN0aW9uKCl7cmV0dXJuW3RoaXMueCx0aGlzLnksdGhpcy56LHRoaXMud119LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBUSFJFRS5WZWN0b3I0KHRoaXMueCx0aGlzLnksdGhpcy56LHRoaXMudyl9fTtUSFJFRS5FdWxlcj1mdW5jdGlvbihhLGIsYyxkKXt0aGlzLl94PWF8fDA7dGhpcy5feT1ifHwwO3RoaXMuX3o9Y3x8MDt0aGlzLl9vcmRlcj1kfHxUSFJFRS5FdWxlci5EZWZhdWx0T3JkZXJ9O1RIUkVFLkV1bGVyLlJvdGF0aW9uT3JkZXJzPVwiWFlaIFlaWCBaWFkgWFpZIFlYWiBaWVhcIi5zcGxpdChcIiBcIik7VEhSRUUuRXVsZXIuRGVmYXVsdE9yZGVyPVwiWFlaXCI7XG5USFJFRS5FdWxlci5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLkV1bGVyLF94OjAsX3k6MCxfejowLF9vcmRlcjpUSFJFRS5FdWxlci5EZWZhdWx0T3JkZXIsX3F1YXRlcm5pb246dm9pZCAwLF91cGRhdGVRdWF0ZXJuaW9uOmZ1bmN0aW9uKCl7dm9pZCAwIT09dGhpcy5fcXVhdGVybmlvbiYmdGhpcy5fcXVhdGVybmlvbi5zZXRGcm9tRXVsZXIodGhpcywhMSl9LGdldCB4KCl7cmV0dXJuIHRoaXMuX3h9LHNldCB4KGEpe3RoaXMuX3g9YTt0aGlzLl91cGRhdGVRdWF0ZXJuaW9uKCl9LGdldCB5KCl7cmV0dXJuIHRoaXMuX3l9LHNldCB5KGEpe3RoaXMuX3k9YTt0aGlzLl91cGRhdGVRdWF0ZXJuaW9uKCl9LGdldCB6KCl7cmV0dXJuIHRoaXMuX3p9LHNldCB6KGEpe3RoaXMuX3o9YTt0aGlzLl91cGRhdGVRdWF0ZXJuaW9uKCl9LGdldCBvcmRlcigpe3JldHVybiB0aGlzLl9vcmRlcn0sc2V0IG9yZGVyKGEpe3RoaXMuX29yZGVyPWE7dGhpcy5fdXBkYXRlUXVhdGVybmlvbigpfSxcbnNldDpmdW5jdGlvbihhLGIsYyxkKXt0aGlzLl94PWE7dGhpcy5feT1iO3RoaXMuX3o9Yzt0aGlzLl9vcmRlcj1kfHx0aGlzLl9vcmRlcjt0aGlzLl91cGRhdGVRdWF0ZXJuaW9uKCk7cmV0dXJuIHRoaXN9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5feD1hLl94O3RoaXMuX3k9YS5feTt0aGlzLl96PWEuX3o7dGhpcy5fb3JkZXI9YS5fb3JkZXI7dGhpcy5fdXBkYXRlUXVhdGVybmlvbigpO3JldHVybiB0aGlzfSxzZXRGcm9tUm90YXRpb25NYXRyaXg6ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEpe3JldHVybiBNYXRoLm1pbihNYXRoLm1heChhLC0xKSwxKX12YXIgZD1hLmVsZW1lbnRzLGU9ZFswXSxmPWRbNF0saD1kWzhdLGc9ZFsxXSxpPWRbNV0saz1kWzldLG09ZFsyXSxsPWRbNl0sZD1kWzEwXSxiPWJ8fHRoaXMuX29yZGVyO1wiWFlaXCI9PT1iPyh0aGlzLl95PU1hdGguYXNpbihjKGgpKSwwLjk5OTk5Pk1hdGguYWJzKGgpPyh0aGlzLl94PU1hdGguYXRhbjIoLWssZCksdGhpcy5fej1cbk1hdGguYXRhbjIoLWYsZSkpOih0aGlzLl94PU1hdGguYXRhbjIobCxpKSx0aGlzLl96PTApKTpcIllYWlwiPT09Yj8odGhpcy5feD1NYXRoLmFzaW4oLWMoaykpLDAuOTk5OTk+TWF0aC5hYnMoayk/KHRoaXMuX3k9TWF0aC5hdGFuMihoLGQpLHRoaXMuX3o9TWF0aC5hdGFuMihnLGkpKToodGhpcy5feT1NYXRoLmF0YW4yKC1tLGUpLHRoaXMuX3o9MCkpOlwiWlhZXCI9PT1iPyh0aGlzLl94PU1hdGguYXNpbihjKGwpKSwwLjk5OTk5Pk1hdGguYWJzKGwpPyh0aGlzLl95PU1hdGguYXRhbjIoLW0sZCksdGhpcy5fej1NYXRoLmF0YW4yKC1mLGkpKToodGhpcy5feT0wLHRoaXMuX3o9TWF0aC5hdGFuMihnLGUpKSk6XCJaWVhcIj09PWI/KHRoaXMuX3k9TWF0aC5hc2luKC1jKG0pKSwwLjk5OTk5Pk1hdGguYWJzKG0pPyh0aGlzLl94PU1hdGguYXRhbjIobCxkKSx0aGlzLl96PU1hdGguYXRhbjIoZyxlKSk6KHRoaXMuX3g9MCx0aGlzLl96PU1hdGguYXRhbjIoLWYsaSkpKTpcIllaWFwiPT09Yj8odGhpcy5fej1cbk1hdGguYXNpbihjKGcpKSwwLjk5OTk5Pk1hdGguYWJzKGcpPyh0aGlzLl94PU1hdGguYXRhbjIoLWssaSksdGhpcy5feT1NYXRoLmF0YW4yKC1tLGUpKToodGhpcy5feD0wLHRoaXMuX3k9TWF0aC5hdGFuMihoLGQpKSk6XCJYWllcIj09PWI/KHRoaXMuX3o9TWF0aC5hc2luKC1jKGYpKSwwLjk5OTk5Pk1hdGguYWJzKGYpPyh0aGlzLl94PU1hdGguYXRhbjIobCxpKSx0aGlzLl95PU1hdGguYXRhbjIoaCxlKSk6KHRoaXMuX3g9TWF0aC5hdGFuMigtayxkKSx0aGlzLl95PTApKTpjb25zb2xlLndhcm4oXCJXQVJOSU5HOiBFdWxlci5zZXRGcm9tUm90YXRpb25NYXRyaXgoKSBnaXZlbiB1bnN1cHBvcnRlZCBvcmRlcjogXCIrYik7dGhpcy5fb3JkZXI9Yjt0aGlzLl91cGRhdGVRdWF0ZXJuaW9uKCk7cmV0dXJuIHRoaXN9LHNldEZyb21RdWF0ZXJuaW9uOmZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKGEpe3JldHVybiBNYXRoLm1pbihNYXRoLm1heChhLC0xKSwxKX12YXIgZT1hLngqYS54LGY9XG5hLnkqYS55LGg9YS56KmEueixnPWEudyphLncsYj1ifHx0aGlzLl9vcmRlcjtcIlhZWlwiPT09Yj8odGhpcy5feD1NYXRoLmF0YW4yKDIqKGEueCphLnctYS55KmEueiksZy1lLWYraCksdGhpcy5feT1NYXRoLmFzaW4oZCgyKihhLngqYS56K2EueSphLncpKSksdGhpcy5fej1NYXRoLmF0YW4yKDIqKGEueiphLnctYS54KmEueSksZytlLWYtaCkpOlwiWVhaXCI9PT1iPyh0aGlzLl94PU1hdGguYXNpbihkKDIqKGEueCphLnctYS55KmEueikpKSx0aGlzLl95PU1hdGguYXRhbjIoMiooYS54KmEueithLnkqYS53KSxnLWUtZitoKSx0aGlzLl96PU1hdGguYXRhbjIoMiooYS54KmEueSthLnoqYS53KSxnLWUrZi1oKSk6XCJaWFlcIj09PWI/KHRoaXMuX3g9TWF0aC5hc2luKGQoMiooYS54KmEudythLnkqYS56KSkpLHRoaXMuX3k9TWF0aC5hdGFuMigyKihhLnkqYS53LWEueiphLngpLGctZS1mK2gpLHRoaXMuX3o9TWF0aC5hdGFuMigyKihhLnoqYS53LWEueCphLnkpLGctZStmLWgpKTpcIlpZWFwiPT09XG5iPyh0aGlzLl94PU1hdGguYXRhbjIoMiooYS54KmEudythLnoqYS55KSxnLWUtZitoKSx0aGlzLl95PU1hdGguYXNpbihkKDIqKGEueSphLnctYS54KmEueikpKSx0aGlzLl96PU1hdGguYXRhbjIoMiooYS54KmEueSthLnoqYS53KSxnK2UtZi1oKSk6XCJZWlhcIj09PWI/KHRoaXMuX3g9TWF0aC5hdGFuMigyKihhLngqYS53LWEueiphLnkpLGctZStmLWgpLHRoaXMuX3k9TWF0aC5hdGFuMigyKihhLnkqYS53LWEueCphLnopLGcrZS1mLWgpLHRoaXMuX3o9TWF0aC5hc2luKGQoMiooYS54KmEueSthLnoqYS53KSkpKTpcIlhaWVwiPT09Yj8odGhpcy5feD1NYXRoLmF0YW4yKDIqKGEueCphLncrYS55KmEueiksZy1lK2YtaCksdGhpcy5feT1NYXRoLmF0YW4yKDIqKGEueCphLnorYS55KmEudyksZytlLWYtaCksdGhpcy5fej1NYXRoLmFzaW4oZCgyKihhLnoqYS53LWEueCphLnkpKSkpOmNvbnNvbGUud2FybihcIldBUk5JTkc6IEV1bGVyLnNldEZyb21RdWF0ZXJuaW9uKCkgZ2l2ZW4gdW5zdXBwb3J0ZWQgb3JkZXI6IFwiK1xuYik7dGhpcy5fb3JkZXI9YjshMSE9PWMmJnRoaXMuX3VwZGF0ZVF1YXRlcm5pb24oKTtyZXR1cm4gdGhpc30scmVvcmRlcjpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5RdWF0ZXJuaW9uO3JldHVybiBmdW5jdGlvbihiKXthLnNldEZyb21FdWxlcih0aGlzKTt0aGlzLnNldEZyb21RdWF0ZXJuaW9uKGEsYil9fSgpLGZyb21BcnJheTpmdW5jdGlvbihhKXt0aGlzLl94PWFbMF07dGhpcy5feT1hWzFdO3RoaXMuX3o9YVsyXTt2b2lkIDAhPT1hWzNdJiYodGhpcy5fb3JkZXI9YVszXSk7dGhpcy5fdXBkYXRlUXVhdGVybmlvbigpO3JldHVybiB0aGlzfSx0b0FycmF5OmZ1bmN0aW9uKCl7cmV0dXJuW3RoaXMuX3gsdGhpcy5feSx0aGlzLl96LHRoaXMuX29yZGVyXX0sZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiBhLl94PT09dGhpcy5feCYmYS5feT09PXRoaXMuX3kmJmEuX3o9PT10aGlzLl96JiZhLl9vcmRlcj09PXRoaXMuX29yZGVyfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgVEhSRUUuRXVsZXIodGhpcy5feCxcbnRoaXMuX3ksdGhpcy5feix0aGlzLl9vcmRlcil9fTtUSFJFRS5MaW5lMz1mdW5jdGlvbihhLGIpe3RoaXMuc3RhcnQ9dm9pZCAwIT09YT9hOm5ldyBUSFJFRS5WZWN0b3IzO3RoaXMuZW5kPXZvaWQgMCE9PWI/YjpuZXcgVEhSRUUuVmVjdG9yM307XG5USFJFRS5MaW5lMy5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLkxpbmUzLHNldDpmdW5jdGlvbihhLGIpe3RoaXMuc3RhcnQuY29weShhKTt0aGlzLmVuZC5jb3B5KGIpO3JldHVybiB0aGlzfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMuc3RhcnQuY29weShhLnN0YXJ0KTt0aGlzLmVuZC5jb3B5KGEuZW5kKTtyZXR1cm4gdGhpc30sY2VudGVyOmZ1bmN0aW9uKGEpe3JldHVybihhfHxuZXcgVEhSRUUuVmVjdG9yMykuYWRkVmVjdG9ycyh0aGlzLnN0YXJ0LHRoaXMuZW5kKS5tdWx0aXBseVNjYWxhcigwLjUpfSxkZWx0YTpmdW5jdGlvbihhKXtyZXR1cm4oYXx8bmV3IFRIUkVFLlZlY3RvcjMpLnN1YlZlY3RvcnModGhpcy5lbmQsdGhpcy5zdGFydCl9LGRpc3RhbmNlU3E6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGFydC5kaXN0YW5jZVRvU3F1YXJlZCh0aGlzLmVuZCl9LGRpc3RhbmNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhcnQuZGlzdGFuY2VUbyh0aGlzLmVuZCl9LGF0OmZ1bmN0aW9uKGEsXG5iKXt2YXIgYz1ifHxuZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gdGhpcy5kZWx0YShjKS5tdWx0aXBseVNjYWxhcihhKS5hZGQodGhpcy5zdGFydCl9LGNsb3Nlc3RQb2ludFRvUG9pbnRQYXJhbWV0ZXI6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMyxiPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihjLGQpe2Euc3ViVmVjdG9ycyhjLHRoaXMuc3RhcnQpO2Iuc3ViVmVjdG9ycyh0aGlzLmVuZCx0aGlzLnN0YXJ0KTt2YXIgZT1iLmRvdChiKSxlPWIuZG90KGEpL2U7ZCYmKGU9VEhSRUUuTWF0aC5jbGFtcChlLDAsMSkpO3JldHVybiBlfX0oKSxjbG9zZXN0UG9pbnRUb1BvaW50OmZ1bmN0aW9uKGEsYixjKXthPXRoaXMuY2xvc2VzdFBvaW50VG9Qb2ludFBhcmFtZXRlcihhLGIpO2M9Y3x8bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIHRoaXMuZGVsdGEoYykubXVsdGlwbHlTY2FsYXIoYSkuYWRkKHRoaXMuc3RhcnQpfSxhcHBseU1hdHJpeDQ6ZnVuY3Rpb24oYSl7dGhpcy5zdGFydC5hcHBseU1hdHJpeDQoYSk7XG50aGlzLmVuZC5hcHBseU1hdHJpeDQoYSk7cmV0dXJuIHRoaXN9LGVxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gYS5zdGFydC5lcXVhbHModGhpcy5zdGFydCkmJmEuZW5kLmVxdWFscyh0aGlzLmVuZCl9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBUSFJFRS5MaW5lMykuY29weSh0aGlzKX19O1RIUkVFLkJveDI9ZnVuY3Rpb24oYSxiKXt0aGlzLm1pbj12b2lkIDAhPT1hP2E6bmV3IFRIUkVFLlZlY3RvcjIoSW5maW5pdHksSW5maW5pdHkpO3RoaXMubWF4PXZvaWQgMCE9PWI/YjpuZXcgVEhSRUUuVmVjdG9yMigtSW5maW5pdHksLUluZmluaXR5KX07XG5USFJFRS5Cb3gyLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuQm94MixzZXQ6ZnVuY3Rpb24oYSxiKXt0aGlzLm1pbi5jb3B5KGEpO3RoaXMubWF4LmNvcHkoYik7cmV0dXJuIHRoaXN9LHNldEZyb21Qb2ludHM6ZnVuY3Rpb24oYSl7aWYoMDxhLmxlbmd0aCl7dmFyIGI9YVswXTt0aGlzLm1pbi5jb3B5KGIpO3RoaXMubWF4LmNvcHkoYik7Zm9yKHZhciBjPTEsZD1hLmxlbmd0aDtjPGQ7YysrKWI9YVtjXSxiLng8dGhpcy5taW4ueD90aGlzLm1pbi54PWIueDpiLng+dGhpcy5tYXgueCYmKHRoaXMubWF4Lng9Yi54KSxiLnk8dGhpcy5taW4ueT90aGlzLm1pbi55PWIueTpiLnk+dGhpcy5tYXgueSYmKHRoaXMubWF4Lnk9Yi55KX1lbHNlIHRoaXMubWFrZUVtcHR5KCk7cmV0dXJuIHRoaXN9LHNldEZyb21DZW50ZXJBbmRTaXplOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjI7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7dmFyIGQ9YS5jb3B5KGMpLm11bHRpcGx5U2NhbGFyKDAuNSk7XG50aGlzLm1pbi5jb3B5KGIpLnN1YihkKTt0aGlzLm1heC5jb3B5KGIpLmFkZChkKTtyZXR1cm4gdGhpc319KCksY29weTpmdW5jdGlvbihhKXt0aGlzLm1pbi5jb3B5KGEubWluKTt0aGlzLm1heC5jb3B5KGEubWF4KTtyZXR1cm4gdGhpc30sbWFrZUVtcHR5OmZ1bmN0aW9uKCl7dGhpcy5taW4ueD10aGlzLm1pbi55PUluZmluaXR5O3RoaXMubWF4Lng9dGhpcy5tYXgueT0tSW5maW5pdHk7cmV0dXJuIHRoaXN9LGVtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWF4Lng8dGhpcy5taW4ueHx8dGhpcy5tYXgueTx0aGlzLm1pbi55fSxjZW50ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fG5ldyBUSFJFRS5WZWN0b3IyKS5hZGRWZWN0b3JzKHRoaXMubWluLHRoaXMubWF4KS5tdWx0aXBseVNjYWxhcigwLjUpfSxzaXplOmZ1bmN0aW9uKGEpe3JldHVybihhfHxuZXcgVEhSRUUuVmVjdG9yMikuc3ViVmVjdG9ycyh0aGlzLm1heCx0aGlzLm1pbil9LGV4cGFuZEJ5UG9pbnQ6ZnVuY3Rpb24oYSl7dGhpcy5taW4ubWluKGEpO1xudGhpcy5tYXgubWF4KGEpO3JldHVybiB0aGlzfSxleHBhbmRCeVZlY3RvcjpmdW5jdGlvbihhKXt0aGlzLm1pbi5zdWIoYSk7dGhpcy5tYXguYWRkKGEpO3JldHVybiB0aGlzfSxleHBhbmRCeVNjYWxhcjpmdW5jdGlvbihhKXt0aGlzLm1pbi5hZGRTY2FsYXIoLWEpO3RoaXMubWF4LmFkZFNjYWxhcihhKTtyZXR1cm4gdGhpc30sY29udGFpbnNQb2ludDpmdW5jdGlvbihhKXtyZXR1cm4gYS54PHRoaXMubWluLnh8fGEueD50aGlzLm1heC54fHxhLnk8dGhpcy5taW4ueXx8YS55PnRoaXMubWF4Lnk/ITE6ITB9LGNvbnRhaW5zQm94OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm1pbi54PD1hLm1pbi54JiZhLm1heC54PD10aGlzLm1heC54JiZ0aGlzLm1pbi55PD1hLm1pbi55JiZhLm1heC55PD10aGlzLm1heC55PyEwOiExfSxnZXRQYXJhbWV0ZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4oYnx8bmV3IFRIUkVFLlZlY3RvcjIpLnNldCgoYS54LXRoaXMubWluLngpLyh0aGlzLm1heC54LXRoaXMubWluLngpLFxuKGEueS10aGlzLm1pbi55KS8odGhpcy5tYXgueS10aGlzLm1pbi55KSl9LGlzSW50ZXJzZWN0aW9uQm94OmZ1bmN0aW9uKGEpe3JldHVybiBhLm1heC54PHRoaXMubWluLnh8fGEubWluLng+dGhpcy5tYXgueHx8YS5tYXgueTx0aGlzLm1pbi55fHxhLm1pbi55PnRoaXMubWF4Lnk/ITE6ITB9LGNsYW1wUG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4oYnx8bmV3IFRIUkVFLlZlY3RvcjIpLmNvcHkoYSkuY2xhbXAodGhpcy5taW4sdGhpcy5tYXgpfSxkaXN0YW5jZVRvUG9pbnQ6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMjtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIGEuY29weShiKS5jbGFtcCh0aGlzLm1pbix0aGlzLm1heCkuc3ViKGIpLmxlbmd0aCgpfX0oKSxpbnRlcnNlY3Q6ZnVuY3Rpb24oYSl7dGhpcy5taW4ubWF4KGEubWluKTt0aGlzLm1heC5taW4oYS5tYXgpO3JldHVybiB0aGlzfSx1bmlvbjpmdW5jdGlvbihhKXt0aGlzLm1pbi5taW4oYS5taW4pO3RoaXMubWF4Lm1heChhLm1heCk7XG5yZXR1cm4gdGhpc30sdHJhbnNsYXRlOmZ1bmN0aW9uKGEpe3RoaXMubWluLmFkZChhKTt0aGlzLm1heC5hZGQoYSk7cmV0dXJuIHRoaXN9LGVxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gYS5taW4uZXF1YWxzKHRoaXMubWluKSYmYS5tYXguZXF1YWxzKHRoaXMubWF4KX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IFRIUkVFLkJveDIpLmNvcHkodGhpcyl9fTtUSFJFRS5Cb3gzPWZ1bmN0aW9uKGEsYil7dGhpcy5taW49dm9pZCAwIT09YT9hOm5ldyBUSFJFRS5WZWN0b3IzKEluZmluaXR5LEluZmluaXR5LEluZmluaXR5KTt0aGlzLm1heD12b2lkIDAhPT1iP2I6bmV3IFRIUkVFLlZlY3RvcjMoLUluZmluaXR5LC1JbmZpbml0eSwtSW5maW5pdHkpfTtcblRIUkVFLkJveDMucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5Cb3gzLHNldDpmdW5jdGlvbihhLGIpe3RoaXMubWluLmNvcHkoYSk7dGhpcy5tYXguY29weShiKTtyZXR1cm4gdGhpc30sYWRkUG9pbnQ6ZnVuY3Rpb24oYSl7YS54PHRoaXMubWluLng/dGhpcy5taW4ueD1hLng6YS54PnRoaXMubWF4LngmJih0aGlzLm1heC54PWEueCk7YS55PHRoaXMubWluLnk/dGhpcy5taW4ueT1hLnk6YS55PnRoaXMubWF4LnkmJih0aGlzLm1heC55PWEueSk7YS56PHRoaXMubWluLno/dGhpcy5taW4uej1hLno6YS56PnRoaXMubWF4LnomJih0aGlzLm1heC56PWEueil9LHNldEZyb21Qb2ludHM6ZnVuY3Rpb24oYSl7aWYoMDxhLmxlbmd0aCl7dmFyIGI9YVswXTt0aGlzLm1pbi5jb3B5KGIpO3RoaXMubWF4LmNvcHkoYik7Zm9yKHZhciBiPTEsYz1hLmxlbmd0aDtiPGM7YisrKXRoaXMuYWRkUG9pbnQoYVtiXSl9ZWxzZSB0aGlzLm1ha2VFbXB0eSgpO3JldHVybiB0aGlzfSxzZXRGcm9tQ2VudGVyQW5kU2l6ZTpmdW5jdGlvbigpe3ZhciBhPVxubmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7dmFyIGQ9YS5jb3B5KGMpLm11bHRpcGx5U2NhbGFyKDAuNSk7dGhpcy5taW4uY29weShiKS5zdWIoZCk7dGhpcy5tYXguY29weShiKS5hZGQoZCk7cmV0dXJuIHRoaXN9fSgpLHNldEZyb21PYmplY3Q6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGM9dGhpcztiLnVwZGF0ZU1hdHJpeFdvcmxkKCEwKTt0aGlzLm1ha2VFbXB0eSgpO2IudHJhdmVyc2UoZnVuY3Rpb24oYil7aWYodm9pZCAwIT09Yi5nZW9tZXRyeSYmdm9pZCAwIT09Yi5nZW9tZXRyeS52ZXJ0aWNlcylmb3IodmFyIGU9Yi5nZW9tZXRyeS52ZXJ0aWNlcyxmPTAsaD1lLmxlbmd0aDtmPGg7ZisrKWEuY29weShlW2ZdKSxhLmFwcGx5TWF0cml4NChiLm1hdHJpeFdvcmxkKSxjLmV4cGFuZEJ5UG9pbnQoYSl9KTtyZXR1cm4gdGhpc319KCksY29weTpmdW5jdGlvbihhKXt0aGlzLm1pbi5jb3B5KGEubWluKTtcbnRoaXMubWF4LmNvcHkoYS5tYXgpO3JldHVybiB0aGlzfSxtYWtlRW1wdHk6ZnVuY3Rpb24oKXt0aGlzLm1pbi54PXRoaXMubWluLnk9dGhpcy5taW4uej1JbmZpbml0eTt0aGlzLm1heC54PXRoaXMubWF4Lnk9dGhpcy5tYXguej0tSW5maW5pdHk7cmV0dXJuIHRoaXN9LGVtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWF4Lng8dGhpcy5taW4ueHx8dGhpcy5tYXgueTx0aGlzLm1pbi55fHx0aGlzLm1heC56PHRoaXMubWluLnp9LGNlbnRlcjpmdW5jdGlvbihhKXtyZXR1cm4oYXx8bmV3IFRIUkVFLlZlY3RvcjMpLmFkZFZlY3RvcnModGhpcy5taW4sdGhpcy5tYXgpLm11bHRpcGx5U2NhbGFyKDAuNSl9LHNpemU6ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fG5ldyBUSFJFRS5WZWN0b3IzKS5zdWJWZWN0b3JzKHRoaXMubWF4LHRoaXMubWluKX0sZXhwYW5kQnlQb2ludDpmdW5jdGlvbihhKXt0aGlzLm1pbi5taW4oYSk7dGhpcy5tYXgubWF4KGEpO3JldHVybiB0aGlzfSxleHBhbmRCeVZlY3RvcjpmdW5jdGlvbihhKXt0aGlzLm1pbi5zdWIoYSk7XG50aGlzLm1heC5hZGQoYSk7cmV0dXJuIHRoaXN9LGV4cGFuZEJ5U2NhbGFyOmZ1bmN0aW9uKGEpe3RoaXMubWluLmFkZFNjYWxhcigtYSk7dGhpcy5tYXguYWRkU2NhbGFyKGEpO3JldHVybiB0aGlzfSxjb250YWluc1BvaW50OmZ1bmN0aW9uKGEpe3JldHVybiBhLng8dGhpcy5taW4ueHx8YS54PnRoaXMubWF4Lnh8fGEueTx0aGlzLm1pbi55fHxhLnk+dGhpcy5tYXgueXx8YS56PHRoaXMubWluLnp8fGEuej50aGlzLm1heC56PyExOiEwfSxjb250YWluc0JveDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5taW4ueDw9YS5taW4ueCYmYS5tYXgueDw9dGhpcy5tYXgueCYmdGhpcy5taW4ueTw9YS5taW4ueSYmYS5tYXgueTw9dGhpcy5tYXgueSYmdGhpcy5taW4uejw9YS5taW4ueiYmYS5tYXguejw9dGhpcy5tYXguej8hMDohMX0sZ2V0UGFyYW1ldGVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuKGJ8fG5ldyBUSFJFRS5WZWN0b3IzKS5zZXQoKGEueC10aGlzLm1pbi54KS8odGhpcy5tYXgueC1cbnRoaXMubWluLngpLChhLnktdGhpcy5taW4ueSkvKHRoaXMubWF4LnktdGhpcy5taW4ueSksKGEuei10aGlzLm1pbi56KS8odGhpcy5tYXguei10aGlzLm1pbi56KSl9LGlzSW50ZXJzZWN0aW9uQm94OmZ1bmN0aW9uKGEpe3JldHVybiBhLm1heC54PHRoaXMubWluLnh8fGEubWluLng+dGhpcy5tYXgueHx8YS5tYXgueTx0aGlzLm1pbi55fHxhLm1pbi55PnRoaXMubWF4Lnl8fGEubWF4Lno8dGhpcy5taW4uenx8YS5taW4uej50aGlzLm1heC56PyExOiEwfSxjbGFtcFBvaW50OmZ1bmN0aW9uKGEsYil7cmV0dXJuKGJ8fG5ldyBUSFJFRS5WZWN0b3IzKS5jb3B5KGEpLmNsYW1wKHRoaXMubWluLHRoaXMubWF4KX0sZGlzdGFuY2VUb1BvaW50OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBhLmNvcHkoYikuY2xhbXAodGhpcy5taW4sdGhpcy5tYXgpLnN1YihiKS5sZW5ndGgoKX19KCksZ2V0Qm91bmRpbmdTcGhlcmU6ZnVuY3Rpb24oKXt2YXIgYT1cbm5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihiKXtiPWJ8fG5ldyBUSFJFRS5TcGhlcmU7Yi5jZW50ZXI9dGhpcy5jZW50ZXIoKTtiLnJhZGl1cz0wLjUqdGhpcy5zaXplKGEpLmxlbmd0aCgpO3JldHVybiBifX0oKSxpbnRlcnNlY3Q6ZnVuY3Rpb24oYSl7dGhpcy5taW4ubWF4KGEubWluKTt0aGlzLm1heC5taW4oYS5tYXgpO3JldHVybiB0aGlzfSx1bmlvbjpmdW5jdGlvbihhKXt0aGlzLm1pbi5taW4oYS5taW4pO3RoaXMubWF4Lm1heChhLm1heCk7cmV0dXJuIHRoaXN9LGFwcGx5TWF0cml4NDpmdW5jdGlvbigpe3ZhciBhPVtuZXcgVEhSRUUuVmVjdG9yMyxuZXcgVEhSRUUuVmVjdG9yMyxuZXcgVEhSRUUuVmVjdG9yMyxuZXcgVEhSRUUuVmVjdG9yMyxuZXcgVEhSRUUuVmVjdG9yMyxuZXcgVEhSRUUuVmVjdG9yMyxuZXcgVEhSRUUuVmVjdG9yMyxuZXcgVEhSRUUuVmVjdG9yM107cmV0dXJuIGZ1bmN0aW9uKGIpe2FbMF0uc2V0KHRoaXMubWluLngsdGhpcy5taW4ueSxcbnRoaXMubWluLnopLmFwcGx5TWF0cml4NChiKTthWzFdLnNldCh0aGlzLm1pbi54LHRoaXMubWluLnksdGhpcy5tYXgueikuYXBwbHlNYXRyaXg0KGIpO2FbMl0uc2V0KHRoaXMubWluLngsdGhpcy5tYXgueSx0aGlzLm1pbi56KS5hcHBseU1hdHJpeDQoYik7YVszXS5zZXQodGhpcy5taW4ueCx0aGlzLm1heC55LHRoaXMubWF4LnopLmFwcGx5TWF0cml4NChiKTthWzRdLnNldCh0aGlzLm1heC54LHRoaXMubWluLnksdGhpcy5taW4ueikuYXBwbHlNYXRyaXg0KGIpO2FbNV0uc2V0KHRoaXMubWF4LngsdGhpcy5taW4ueSx0aGlzLm1heC56KS5hcHBseU1hdHJpeDQoYik7YVs2XS5zZXQodGhpcy5tYXgueCx0aGlzLm1heC55LHRoaXMubWluLnopLmFwcGx5TWF0cml4NChiKTthWzddLnNldCh0aGlzLm1heC54LHRoaXMubWF4LnksdGhpcy5tYXgueikuYXBwbHlNYXRyaXg0KGIpO3RoaXMubWFrZUVtcHR5KCk7dGhpcy5zZXRGcm9tUG9pbnRzKGEpO3JldHVybiB0aGlzfX0oKSx0cmFuc2xhdGU6ZnVuY3Rpb24oYSl7dGhpcy5taW4uYWRkKGEpO1xudGhpcy5tYXguYWRkKGEpO3JldHVybiB0aGlzfSxlcXVhbHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEubWluLmVxdWFscyh0aGlzLm1pbikmJmEubWF4LmVxdWFscyh0aGlzLm1heCl9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBUSFJFRS5Cb3gzKS5jb3B5KHRoaXMpfX07VEhSRUUuTWF0cml4Mz1mdW5jdGlvbihhLGIsYyxkLGUsZixoLGcsaSl7dGhpcy5lbGVtZW50cz1uZXcgRmxvYXQzMkFycmF5KDkpO3RoaXMuc2V0KHZvaWQgMCE9PWE/YToxLGJ8fDAsY3x8MCxkfHwwLHZvaWQgMCE9PWU/ZToxLGZ8fDAsaHx8MCxnfHwwLHZvaWQgMCE9PWk/aToxKX07XG5USFJFRS5NYXRyaXgzLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuTWF0cml4MyxzZXQ6ZnVuY3Rpb24oYSxiLGMsZCxlLGYsaCxnLGkpe3ZhciBrPXRoaXMuZWxlbWVudHM7a1swXT1hO2tbM109YjtrWzZdPWM7a1sxXT1kO2tbNF09ZTtrWzddPWY7a1syXT1oO2tbNV09ZztrWzhdPWk7cmV0dXJuIHRoaXN9LGlkZW50aXR5OmZ1bmN0aW9uKCl7dGhpcy5zZXQoMSwwLDAsMCwxLDAsMCwwLDEpO3JldHVybiB0aGlzfSxjb3B5OmZ1bmN0aW9uKGEpe2E9YS5lbGVtZW50czt0aGlzLnNldChhWzBdLGFbM10sYVs2XSxhWzFdLGFbNF0sYVs3XSxhWzJdLGFbNV0sYVs4XSk7cmV0dXJuIHRoaXN9LG11bHRpcGx5VmVjdG9yMzpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEOiBNYXRyaXgzJ3MgLm11bHRpcGx5VmVjdG9yMygpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSB2ZWN0b3IuYXBwbHlNYXRyaXgzKCBtYXRyaXggKSBpbnN0ZWFkLlwiKTtyZXR1cm4gYS5hcHBseU1hdHJpeDModGhpcyl9LFxubXVsdGlwbHlWZWN0b3IzQXJyYXk6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oYil7Zm9yKHZhciBjPTAsZD1iLmxlbmd0aDtjPGQ7Yys9MylhLng9YltjXSxhLnk9YltjKzFdLGEuej1iW2MrMl0sYS5hcHBseU1hdHJpeDModGhpcyksYltjXT1hLngsYltjKzFdPWEueSxiW2MrMl09YS56O3JldHVybiBifX0oKSxtdWx0aXBseVNjYWxhcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmVsZW1lbnRzO2JbMF0qPWE7YlszXSo9YTtiWzZdKj1hO2JbMV0qPWE7Yls0XSo9YTtiWzddKj1hO2JbMl0qPWE7Yls1XSo9YTtiWzhdKj1hO3JldHVybiB0aGlzfSxkZXRlcm1pbmFudDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZWxlbWVudHMsYj1hWzBdLGM9YVsxXSxkPWFbMl0sZT1hWzNdLGY9YVs0XSxoPWFbNV0sZz1hWzZdLGk9YVs3XSxhPWFbOF07cmV0dXJuIGIqZiphLWIqaCppLWMqZSphK2MqaCpnK2QqZSppLWQqZipnfSxnZXRJbnZlcnNlOmZ1bmN0aW9uKGEsXG5iKXt2YXIgYz1hLmVsZW1lbnRzLGQ9dGhpcy5lbGVtZW50cztkWzBdPWNbMTBdKmNbNV0tY1s2XSpjWzldO2RbMV09LWNbMTBdKmNbMV0rY1syXSpjWzldO2RbMl09Y1s2XSpjWzFdLWNbMl0qY1s1XTtkWzNdPS1jWzEwXSpjWzRdK2NbNl0qY1s4XTtkWzRdPWNbMTBdKmNbMF0tY1syXSpjWzhdO2RbNV09LWNbNl0qY1swXStjWzJdKmNbNF07ZFs2XT1jWzldKmNbNF0tY1s1XSpjWzhdO2RbN109LWNbOV0qY1swXStjWzFdKmNbOF07ZFs4XT1jWzVdKmNbMF0tY1sxXSpjWzRdO2M9Y1swXSpkWzBdK2NbMV0qZFszXStjWzJdKmRbNl07aWYoMD09PWMpe2lmKGIpdGhyb3cgRXJyb3IoXCJNYXRyaXgzLmdldEludmVyc2UoKTogY2FuJ3QgaW52ZXJ0IG1hdHJpeCwgZGV0ZXJtaW5hbnQgaXMgMFwiKTtjb25zb2xlLndhcm4oXCJNYXRyaXgzLmdldEludmVyc2UoKTogY2FuJ3QgaW52ZXJ0IG1hdHJpeCwgZGV0ZXJtaW5hbnQgaXMgMFwiKTt0aGlzLmlkZW50aXR5KCk7cmV0dXJuIHRoaXN9dGhpcy5tdWx0aXBseVNjYWxhcigxL1xuYyk7cmV0dXJuIHRoaXN9LHRyYW5zcG9zZTpmdW5jdGlvbigpe3ZhciBhLGI9dGhpcy5lbGVtZW50czthPWJbMV07YlsxXT1iWzNdO2JbM109YTthPWJbMl07YlsyXT1iWzZdO2JbNl09YTthPWJbNV07Yls1XT1iWzddO2JbN109YTtyZXR1cm4gdGhpc30sZ2V0Tm9ybWFsTWF0cml4OmZ1bmN0aW9uKGEpe3RoaXMuZ2V0SW52ZXJzZShhKS50cmFuc3Bvc2UoKTtyZXR1cm4gdGhpc30sdHJhbnNwb3NlSW50b0FycmF5OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZWxlbWVudHM7YVswXT1iWzBdO2FbMV09YlszXTthWzJdPWJbNl07YVszXT1iWzFdO2FbNF09Yls0XTthWzVdPWJbN107YVs2XT1iWzJdO2FbN109Yls1XTthWzhdPWJbOF07cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5lbGVtZW50cztyZXR1cm4gbmV3IFRIUkVFLk1hdHJpeDMoYVswXSxhWzNdLGFbNl0sYVsxXSxhWzRdLGFbN10sYVsyXSxhWzVdLGFbOF0pfX07VEhSRUUuTWF0cml4ND1mdW5jdGlvbihhLGIsYyxkLGUsZixoLGcsaSxrLG0sbCxwLHQscyxxKXt2YXIgbj10aGlzLmVsZW1lbnRzPW5ldyBGbG9hdDMyQXJyYXkoMTYpO25bMF09dm9pZCAwIT09YT9hOjE7bls0XT1ifHwwO25bOF09Y3x8MDtuWzEyXT1kfHwwO25bMV09ZXx8MDtuWzVdPXZvaWQgMCE9PWY/ZjoxO25bOV09aHx8MDtuWzEzXT1nfHwwO25bMl09aXx8MDtuWzZdPWt8fDA7blsxMF09dm9pZCAwIT09bT9tOjE7blsxNF09bHx8MDtuWzNdPXB8fDA7bls3XT10fHwwO25bMTFdPXN8fDA7blsxNV09dm9pZCAwIT09cT9xOjF9O1xuVEhSRUUuTWF0cml4NC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLk1hdHJpeDQsc2V0OmZ1bmN0aW9uKGEsYixjLGQsZSxmLGgsZyxpLGssbSxsLHAsdCxzLHEpe3ZhciBuPXRoaXMuZWxlbWVudHM7blswXT1hO25bNF09YjtuWzhdPWM7blsxMl09ZDtuWzFdPWU7bls1XT1mO25bOV09aDtuWzEzXT1nO25bMl09aTtuWzZdPWs7blsxMF09bTtuWzE0XT1sO25bM109cDtuWzddPXQ7blsxMV09cztuWzE1XT1xO3JldHVybiB0aGlzfSxpZGVudGl0eTpmdW5jdGlvbigpe3RoaXMuc2V0KDEsMCwwLDAsMCwxLDAsMCwwLDAsMSwwLDAsMCwwLDEpO3JldHVybiB0aGlzfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMuZWxlbWVudHMuc2V0KGEuZWxlbWVudHMpO3JldHVybiB0aGlzfSxleHRyYWN0UG9zaXRpb246ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiREVQUkVDQVRFRDogTWF0cml4NCdzIC5leHRyYWN0UG9zaXRpb24oKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5jb3B5UG9zaXRpb24oKS5cIik7XG5yZXR1cm4gdGhpcy5jb3B5UG9zaXRpb24oYSl9LGNvcHlQb3NpdGlvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmVsZW1lbnRzLGE9YS5lbGVtZW50cztiWzEyXT1hWzEyXTtiWzEzXT1hWzEzXTtiWzE0XT1hWzE0XTtyZXR1cm4gdGhpc30sZXh0cmFjdFJvdGF0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMuZWxlbWVudHMsYj1iLmVsZW1lbnRzLGQ9MS9hLnNldChiWzBdLGJbMV0sYlsyXSkubGVuZ3RoKCksZT0xL2Euc2V0KGJbNF0sYls1XSxiWzZdKS5sZW5ndGgoKSxmPTEvYS5zZXQoYls4XSxiWzldLGJbMTBdKS5sZW5ndGgoKTtjWzBdPWJbMF0qZDtjWzFdPWJbMV0qZDtjWzJdPWJbMl0qZDtjWzRdPWJbNF0qZTtjWzVdPWJbNV0qZTtjWzZdPWJbNl0qZTtjWzhdPWJbOF0qZjtjWzldPWJbOV0qZjtjWzEwXT1iWzEwXSpmO3JldHVybiB0aGlzfX0oKSxtYWtlUm90YXRpb25Gcm9tRXVsZXI6ZnVuY3Rpb24oYSl7ITE9PT1cbmEgaW5zdGFuY2VvZiBUSFJFRS5FdWxlciYmY29uc29sZS5lcnJvcihcIkVSUk9SOiBNYXRyaXgncyAubWFrZVJvdGF0aW9uRnJvbUV1bGVyKCkgbm93IGV4cGVjdHMgYSBFdWxlciByb3RhdGlvbiByYXRoZXIgdGhhbiBhIFZlY3RvcjMgYW5kIG9yZGVyLiAgUGxlYXNlIHVwZGF0ZSB5b3VyIGNvZGUuXCIpO3ZhciBiPXRoaXMuZWxlbWVudHMsYz1hLngsZD1hLnksZT1hLnosZj1NYXRoLmNvcyhjKSxjPU1hdGguc2luKGMpLGg9TWF0aC5jb3MoZCksZD1NYXRoLnNpbihkKSxnPU1hdGguY29zKGUpLGU9TWF0aC5zaW4oZSk7aWYoXCJYWVpcIj09PWEub3JkZXIpe3ZhciBhPWYqZyxpPWYqZSxrPWMqZyxtPWMqZTtiWzBdPWgqZztiWzRdPS1oKmU7Yls4XT1kO2JbMV09aStrKmQ7Yls1XT1hLW0qZDtiWzldPS1jKmg7YlsyXT1tLWEqZDtiWzZdPWsraSpkO2JbMTBdPWYqaH1lbHNlXCJZWFpcIj09PWEub3JkZXI/KGE9aCpnLGk9aCplLGs9ZCpnLG09ZCplLGJbMF09YSttKmMsYls0XT1rKmMtaSxiWzhdPVxuZipkLGJbMV09ZiplLGJbNV09ZipnLGJbOV09LWMsYlsyXT1pKmMtayxiWzZdPW0rYSpjLGJbMTBdPWYqaCk6XCJaWFlcIj09PWEub3JkZXI/KGE9aCpnLGk9aCplLGs9ZCpnLG09ZCplLGJbMF09YS1tKmMsYls0XT0tZiplLGJbOF09aytpKmMsYlsxXT1pK2sqYyxiWzVdPWYqZyxiWzldPW0tYSpjLGJbMl09LWYqZCxiWzZdPWMsYlsxMF09ZipoKTpcIlpZWFwiPT09YS5vcmRlcj8oYT1mKmcsaT1mKmUsaz1jKmcsbT1jKmUsYlswXT1oKmcsYls0XT1rKmQtaSxiWzhdPWEqZCttLGJbMV09aCplLGJbNV09bSpkK2EsYls5XT1pKmQtayxiWzJdPS1kLGJbNl09YypoLGJbMTBdPWYqaCk6XCJZWlhcIj09PWEub3JkZXI/KGE9ZipoLGk9ZipkLGs9YypoLG09YypkLGJbMF09aCpnLGJbNF09bS1hKmUsYls4XT1rKmUraSxiWzFdPWUsYls1XT1mKmcsYls5XT0tYypnLGJbMl09LWQqZyxiWzZdPWkqZStrLGJbMTBdPWEtbSplKTpcIlhaWVwiPT09YS5vcmRlciYmKGE9ZipoLGk9ZipkLGs9YypoLG09YypkLGJbMF09XG5oKmcsYls0XT0tZSxiWzhdPWQqZyxiWzFdPWEqZSttLGJbNV09ZipnLGJbOV09aSplLWssYlsyXT1rKmUtaSxiWzZdPWMqZyxiWzEwXT1tKmUrYSk7YlszXT0wO2JbN109MDtiWzExXT0wO2JbMTJdPTA7YlsxM109MDtiWzE0XT0wO2JbMTVdPTE7cmV0dXJuIHRoaXN9LHNldFJvdGF0aW9uRnJvbVF1YXRlcm5pb246ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiREVQUkVDQVRFRDogTWF0cml4NCdzIC5zZXRSb3RhdGlvbkZyb21RdWF0ZXJuaW9uKCkgaGFzIGJlZW4gZGVwcmVjYXRlZCBpbiBmYXZvciBvZiBtYWtlUm90YXRpb25Gcm9tUXVhdGVybmlvbi4gIFBsZWFzZSB1cGRhdGUgeW91ciBjb2RlLlwiKTtyZXR1cm4gdGhpcy5tYWtlUm90YXRpb25Gcm9tUXVhdGVybmlvbihhKX0sbWFrZVJvdGF0aW9uRnJvbVF1YXRlcm5pb246ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5lbGVtZW50cyxjPWEueCxkPWEueSxlPWEueixmPWEudyxoPWMrYyxnPWQrZCxpPWUrZSxhPWMqaCxrPWMqZyxjPVxuYyppLG09ZCpnLGQ9ZCppLGU9ZSppLGg9ZipoLGc9ZipnLGY9ZippO2JbMF09MS0obStlKTtiWzRdPWstZjtiWzhdPWMrZztiWzFdPWsrZjtiWzVdPTEtKGErZSk7Yls5XT1kLWg7YlsyXT1jLWc7Yls2XT1kK2g7YlsxMF09MS0oYSttKTtiWzNdPTA7Yls3XT0wO2JbMTFdPTA7YlsxMl09MDtiWzEzXT0wO2JbMTRdPTA7YlsxNV09MTtyZXR1cm4gdGhpc30sbG9va0F0OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjMsYj1uZXcgVEhSRUUuVmVjdG9yMyxjPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihkLGUsZil7dmFyIGg9dGhpcy5lbGVtZW50cztjLnN1YlZlY3RvcnMoZCxlKS5ub3JtYWxpemUoKTswPT09Yy5sZW5ndGgoKSYmKGMuej0xKTthLmNyb3NzVmVjdG9ycyhmLGMpLm5vcm1hbGl6ZSgpOzA9PT1hLmxlbmd0aCgpJiYoYy54Kz0xRS00LGEuY3Jvc3NWZWN0b3JzKGYsYykubm9ybWFsaXplKCkpO2IuY3Jvc3NWZWN0b3JzKGMsYSk7aFswXT1hLng7XG5oWzRdPWIueDtoWzhdPWMueDtoWzFdPWEueTtoWzVdPWIueTtoWzldPWMueTtoWzJdPWEuejtoWzZdPWIuejtoWzEwXT1jLno7cmV0dXJuIHRoaXN9fSgpLG11bHRpcGx5OmZ1bmN0aW9uKGEsYil7cmV0dXJuIHZvaWQgMCE9PWI/KGNvbnNvbGUud2FybihcIkRFUFJFQ0FURUQ6IE1hdHJpeDQncyAubXVsdGlwbHkoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5tdWx0aXBseU1hdHJpY2VzKCBhLCBiICkgaW5zdGVhZC5cIiksdGhpcy5tdWx0aXBseU1hdHJpY2VzKGEsYikpOnRoaXMubXVsdGlwbHlNYXRyaWNlcyh0aGlzLGEpfSxtdWx0aXBseU1hdHJpY2VzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5lbGVtZW50cyxkPWIuZWxlbWVudHMsZT10aGlzLmVsZW1lbnRzLGY9Y1swXSxoPWNbNF0sZz1jWzhdLGk9Y1sxMl0saz1jWzFdLG09Y1s1XSxsPWNbOV0scD1jWzEzXSx0PWNbMl0scz1jWzZdLHE9Y1sxMF0sbj1jWzE0XSx1PWNbM10scj1jWzddLHY9Y1sxMV0sYz1jWzE1XSxcbno9ZFswXSxHPWRbNF0sdz1kWzhdLHk9ZFsxMl0sRT1kWzFdLEE9ZFs1XSxLPWRbOV0sRD1kWzEzXSxGPWRbMl0sTz1kWzZdLHg9ZFsxMF0sST1kWzE0XSxCPWRbM10sTT1kWzddLEo9ZFsxMV0sZD1kWzE1XTtlWzBdPWYqeitoKkUrZypGK2kqQjtlWzRdPWYqRytoKkErZypPK2kqTTtlWzhdPWYqdytoKksrZyp4K2kqSjtlWzEyXT1mKnkraCpEK2cqSStpKmQ7ZVsxXT1rKnorbSpFK2wqRitwKkI7ZVs1XT1rKkcrbSpBK2wqTytwKk07ZVs5XT1rKncrbSpLK2wqeCtwKko7ZVsxM109ayp5K20qRCtsKkkrcCpkO2VbMl09dCp6K3MqRStxKkYrbipCO2VbNl09dCpHK3MqQStxKk8rbipNO2VbMTBdPXQqdytzKksrcSp4K24qSjtlWzE0XT10KnkrcypEK3EqSStuKmQ7ZVszXT11KnorcipFK3YqRitjKkI7ZVs3XT11KkcrcipBK3YqTytjKk07ZVsxMV09dSp3K3IqSyt2KngrYypKO2VbMTVdPXUqeStyKkQrdipJK2MqZDtyZXR1cm4gdGhpc30sbXVsdGlwbHlUb0FycmF5OmZ1bmN0aW9uKGEsYixcbmMpe3ZhciBkPXRoaXMuZWxlbWVudHM7dGhpcy5tdWx0aXBseU1hdHJpY2VzKGEsYik7Y1swXT1kWzBdO2NbMV09ZFsxXTtjWzJdPWRbMl07Y1szXT1kWzNdO2NbNF09ZFs0XTtjWzVdPWRbNV07Y1s2XT1kWzZdO2NbN109ZFs3XTtjWzhdPWRbOF07Y1s5XT1kWzldO2NbMTBdPWRbMTBdO2NbMTFdPWRbMTFdO2NbMTJdPWRbMTJdO2NbMTNdPWRbMTNdO2NbMTRdPWRbMTRdO2NbMTVdPWRbMTVdO3JldHVybiB0aGlzfSxtdWx0aXBseVNjYWxhcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmVsZW1lbnRzO2JbMF0qPWE7Yls0XSo9YTtiWzhdKj1hO2JbMTJdKj1hO2JbMV0qPWE7Yls1XSo9YTtiWzldKj1hO2JbMTNdKj1hO2JbMl0qPWE7Yls2XSo9YTtiWzEwXSo9YTtiWzE0XSo9YTtiWzNdKj1hO2JbN10qPWE7YlsxMV0qPWE7YlsxNV0qPWE7cmV0dXJuIHRoaXN9LG11bHRpcGx5VmVjdG9yMzpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEOiBNYXRyaXg0J3MgLm11bHRpcGx5VmVjdG9yMygpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSB2ZWN0b3IuYXBwbHlNYXRyaXg0KCBtYXRyaXggKSBvciB2ZWN0b3IuYXBwbHlQcm9qZWN0aW9uKCBtYXRyaXggKSBpbnN0ZWFkLlwiKTtcbnJldHVybiBhLmFwcGx5UHJvamVjdGlvbih0aGlzKX0sbXVsdGlwbHlWZWN0b3I0OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIkRFUFJFQ0FURUQ6IE1hdHJpeDQncyAubXVsdGlwbHlWZWN0b3I0KCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIHZlY3Rvci5hcHBseU1hdHJpeDQoIG1hdHJpeCApIGluc3RlYWQuXCIpO3JldHVybiBhLmFwcGx5TWF0cml4NCh0aGlzKX0sbXVsdGlwbHlWZWN0b3IzQXJyYXk6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oYil7Zm9yKHZhciBjPTAsZD1iLmxlbmd0aDtjPGQ7Yys9MylhLng9YltjXSxhLnk9YltjKzFdLGEuej1iW2MrMl0sYS5hcHBseVByb2plY3Rpb24odGhpcyksYltjXT1hLngsYltjKzFdPWEueSxiW2MrMl09YS56O3JldHVybiBifX0oKSxyb3RhdGVBeGlzOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIkRFUFJFQ0FURUQ6IE1hdHJpeDQncyAucm90YXRlQXhpcygpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBWZWN0b3IzLnRyYW5zZm9ybURpcmVjdGlvbiggbWF0cml4ICkgaW5zdGVhZC5cIik7XG5hLnRyYW5zZm9ybURpcmVjdGlvbih0aGlzKX0sY3Jvc3NWZWN0b3I6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiREVQUkVDQVRFRDogTWF0cml4NCdzIC5jcm9zc1ZlY3RvcigpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSB2ZWN0b3IuYXBwbHlNYXRyaXg0KCBtYXRyaXggKSBpbnN0ZWFkLlwiKTtyZXR1cm4gYS5hcHBseU1hdHJpeDQodGhpcyl9LGRldGVybWluYW50OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5lbGVtZW50cyxiPWFbMF0sYz1hWzRdLGQ9YVs4XSxlPWFbMTJdLGY9YVsxXSxoPWFbNV0sZz1hWzldLGk9YVsxM10saz1hWzJdLG09YVs2XSxsPWFbMTBdLHA9YVsxNF07cmV0dXJuIGFbM10qKCtlKmcqbS1kKmkqbS1lKmgqbCtjKmkqbCtkKmgqcC1jKmcqcCkrYVs3XSooK2IqZypwLWIqaSpsK2UqZipsLWQqZipwK2QqaSprLWUqZyprKSthWzExXSooK2IqaSptLWIqaCpwLWUqZiptK2MqZipwK2UqaCprLWMqaSprKSthWzE1XSooLWQqaCprLWIqZyptK2IqaCpsK2QqZiptLWMqZipcbmwrYypnKmspfSx0cmFuc3Bvc2U6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVsZW1lbnRzLGI7Yj1hWzFdO2FbMV09YVs0XTthWzRdPWI7Yj1hWzJdO2FbMl09YVs4XTthWzhdPWI7Yj1hWzZdO2FbNl09YVs5XTthWzldPWI7Yj1hWzNdO2FbM109YVsxMl07YVsxMl09YjtiPWFbN107YVs3XT1hWzEzXTthWzEzXT1iO2I9YVsxMV07YVsxMV09YVsxNF07YVsxNF09YjtyZXR1cm4gdGhpc30sZmxhdHRlblRvQXJyYXk6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5lbGVtZW50czthWzBdPWJbMF07YVsxXT1iWzFdO2FbMl09YlsyXTthWzNdPWJbM107YVs0XT1iWzRdO2FbNV09Yls1XTthWzZdPWJbNl07YVs3XT1iWzddO2FbOF09Yls4XTthWzldPWJbOV07YVsxMF09YlsxMF07YVsxMV09YlsxMV07YVsxMl09YlsxMl07YVsxM109YlsxM107YVsxNF09YlsxNF07YVsxNV09YlsxNV07cmV0dXJuIGF9LGZsYXR0ZW5Ub0FycmF5T2Zmc2V0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5lbGVtZW50cztcbmFbYl09Y1swXTthW2IrMV09Y1sxXTthW2IrMl09Y1syXTthW2IrM109Y1szXTthW2IrNF09Y1s0XTthW2IrNV09Y1s1XTthW2IrNl09Y1s2XTthW2IrN109Y1s3XTthW2IrOF09Y1s4XTthW2IrOV09Y1s5XTthW2IrMTBdPWNbMTBdO2FbYisxMV09Y1sxMV07YVtiKzEyXT1jWzEyXTthW2IrMTNdPWNbMTNdO2FbYisxNF09Y1sxNF07YVtiKzE1XT1jWzE1XTtyZXR1cm4gYX0sZ2V0UG9zaXRpb246ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEOiBNYXRyaXg0J3MgLmdldFBvc2l0aW9uKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIFZlY3RvcjMuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKCBtYXRyaXggKSBpbnN0ZWFkLlwiKTt2YXIgYj10aGlzLmVsZW1lbnRzO3JldHVybiBhLnNldChiWzEyXSxiWzEzXSxiWzE0XSl9fSgpLHNldFBvc2l0aW9uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZWxlbWVudHM7XG5iWzEyXT1hLng7YlsxM109YS55O2JbMTRdPWEuejtyZXR1cm4gdGhpc30sZ2V0SW52ZXJzZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZWxlbWVudHMsZD1hLmVsZW1lbnRzLGU9ZFswXSxmPWRbNF0saD1kWzhdLGc9ZFsxMl0saT1kWzFdLGs9ZFs1XSxtPWRbOV0sbD1kWzEzXSxwPWRbMl0sdD1kWzZdLHM9ZFsxMF0scT1kWzE0XSxuPWRbM10sdT1kWzddLHI9ZFsxMV0sZD1kWzE1XTtjWzBdPW0qcSp1LWwqcyp1K2wqdCpyLWsqcSpyLW0qdCpkK2sqcypkO2NbNF09ZypzKnUtaCpxKnUtZyp0KnIrZipxKnIraCp0KmQtZipzKmQ7Y1s4XT1oKmwqdS1nKm0qdStnKmsqci1mKmwqci1oKmsqZCtmKm0qZDtjWzEyXT1nKm0qdC1oKmwqdC1nKmsqcytmKmwqcytoKmsqcS1mKm0qcTtjWzFdPWwqcypuLW0qcSpuLWwqcCpyK2kqcSpyK20qcCpkLWkqcypkO2NbNV09aCpxKm4tZypzKm4rZypwKnItZSpxKnItaCpwKmQrZSpzKmQ7Y1s5XT1nKm0qbi1oKmwqbi1nKmkqcitlKmwqcitoKmkqZC1cbmUqbSpkO2NbMTNdPWgqbCpwLWcqbSpwK2cqaSpzLWUqbCpzLWgqaSpxK2UqbSpxO2NbMl09aypxKm4tbCp0Km4rbCpwKnUtaSpxKnUtaypwKmQraSp0KmQ7Y1s2XT1nKnQqbi1mKnEqbi1nKnAqdStlKnEqdStmKnAqZC1lKnQqZDtjWzEwXT1mKmwqbi1nKmsqbitnKmkqdS1lKmwqdS1mKmkqZCtlKmsqZDtjWzE0XT1nKmsqcC1mKmwqcC1nKmkqdCtlKmwqdCtmKmkqcS1lKmsqcTtjWzNdPW0qdCpuLWsqcypuLW0qcCp1K2kqcyp1K2sqcCpyLWkqdCpyO2NbN109ZipzKm4taCp0Km4raCpwKnUtZSpzKnUtZipwKnIrZSp0KnI7Y1sxMV09aCprKm4tZiptKm4taCppKnUrZSptKnUrZippKnItZSprKnI7Y1sxNV09ZiptKnAtaCprKnAraCppKnQtZSptKnQtZippKnMrZSprKnM7Yz1lKmNbMF0raSpjWzRdK3AqY1s4XStuKmNbMTJdO2lmKDA9PWMpe2lmKGIpdGhyb3cgRXJyb3IoXCJNYXRyaXg0LmdldEludmVyc2UoKTogY2FuJ3QgaW52ZXJ0IG1hdHJpeCwgZGV0ZXJtaW5hbnQgaXMgMFwiKTtjb25zb2xlLndhcm4oXCJNYXRyaXg0LmdldEludmVyc2UoKTogY2FuJ3QgaW52ZXJ0IG1hdHJpeCwgZGV0ZXJtaW5hbnQgaXMgMFwiKTtcbnRoaXMuaWRlbnRpdHkoKTtyZXR1cm4gdGhpc310aGlzLm11bHRpcGx5U2NhbGFyKDEvYyk7cmV0dXJuIHRoaXN9LHRyYW5zbGF0ZTpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIkRFUFJFQ0FURUQ6IE1hdHJpeDQncyAudHJhbnNsYXRlKCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LHJvdGF0ZVg6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEOiBNYXRyaXg0J3MgLnJvdGF0ZVgoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0scm90YXRlWTpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIkRFUFJFQ0FURUQ6IE1hdHJpeDQncyAucm90YXRlWSgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxyb3RhdGVaOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiREVQUkVDQVRFRDogTWF0cml4NCdzIC5yb3RhdGVaKCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LHJvdGF0ZUJ5QXhpczpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIkRFUFJFQ0FURUQ6IE1hdHJpeDQncyAucm90YXRlQnlBeGlzKCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LFxuc2NhbGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5lbGVtZW50cyxjPWEueCxkPWEueSxhPWEuejtiWzBdKj1jO2JbNF0qPWQ7Yls4XSo9YTtiWzFdKj1jO2JbNV0qPWQ7Yls5XSo9YTtiWzJdKj1jO2JbNl0qPWQ7YlsxMF0qPWE7YlszXSo9YztiWzddKj1kO2JbMTFdKj1hO3JldHVybiB0aGlzfSxnZXRNYXhTY2FsZU9uQXhpczpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZWxlbWVudHM7cmV0dXJuIE1hdGguc3FydChNYXRoLm1heChhWzBdKmFbMF0rYVsxXSphWzFdK2FbMl0qYVsyXSxNYXRoLm1heChhWzRdKmFbNF0rYVs1XSphWzVdK2FbNl0qYVs2XSxhWzhdKmFbOF0rYVs5XSphWzldK2FbMTBdKmFbMTBdKSkpfSxtYWtlVHJhbnNsYXRpb246ZnVuY3Rpb24oYSxiLGMpe3RoaXMuc2V0KDEsMCwwLGEsMCwxLDAsYiwwLDAsMSxjLDAsMCwwLDEpO3JldHVybiB0aGlzfSxtYWtlUm90YXRpb25YOmZ1bmN0aW9uKGEpe3ZhciBiPU1hdGguY29zKGEpLGE9TWF0aC5zaW4oYSk7dGhpcy5zZXQoMSxcbjAsMCwwLDAsYiwtYSwwLDAsYSxiLDAsMCwwLDAsMSk7cmV0dXJuIHRoaXN9LG1ha2VSb3RhdGlvblk6ZnVuY3Rpb24oYSl7dmFyIGI9TWF0aC5jb3MoYSksYT1NYXRoLnNpbihhKTt0aGlzLnNldChiLDAsYSwwLDAsMSwwLDAsLWEsMCxiLDAsMCwwLDAsMSk7cmV0dXJuIHRoaXN9LG1ha2VSb3RhdGlvblo6ZnVuY3Rpb24oYSl7dmFyIGI9TWF0aC5jb3MoYSksYT1NYXRoLnNpbihhKTt0aGlzLnNldChiLC1hLDAsMCxhLGIsMCwwLDAsMCwxLDAsMCwwLDAsMSk7cmV0dXJuIHRoaXN9LG1ha2VSb3RhdGlvbkF4aXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1NYXRoLmNvcyhiKSxkPU1hdGguc2luKGIpLGU9MS1jLGY9YS54LGg9YS55LGc9YS56LGk9ZSpmLGs9ZSpoO3RoaXMuc2V0KGkqZitjLGkqaC1kKmcsaSpnK2QqaCwwLGkqaCtkKmcsaypoK2MsaypnLWQqZiwwLGkqZy1kKmgsaypnK2QqZixlKmcqZytjLDAsMCwwLDAsMSk7cmV0dXJuIHRoaXN9LG1ha2VTY2FsZTpmdW5jdGlvbihhLGIsYyl7dGhpcy5zZXQoYSxcbjAsMCwwLDAsYiwwLDAsMCwwLGMsMCwwLDAsMCwxKTtyZXR1cm4gdGhpc30sY29tcG9zZTpmdW5jdGlvbihhLGIsYyl7dGhpcy5tYWtlUm90YXRpb25Gcm9tUXVhdGVybmlvbihiKTt0aGlzLnNjYWxlKGMpO3RoaXMuc2V0UG9zaXRpb24oYSk7cmV0dXJuIHRoaXN9LGRlY29tcG9zZTpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzLGI9bmV3IFRIUkVFLk1hdHJpeDQ7cmV0dXJuIGZ1bmN0aW9uKGMsZCxlKXt2YXIgZj10aGlzLmVsZW1lbnRzLGg9YS5zZXQoZlswXSxmWzFdLGZbMl0pLmxlbmd0aCgpLGc9YS5zZXQoZls0XSxmWzVdLGZbNl0pLmxlbmd0aCgpLGk9YS5zZXQoZls4XSxmWzldLGZbMTBdKS5sZW5ndGgoKTtjLng9ZlsxMl07Yy55PWZbMTNdO2Muej1mWzE0XTtiLmVsZW1lbnRzLnNldCh0aGlzLmVsZW1lbnRzKTt2YXIgYz0xL2gsZj0xL2csaz0xL2k7Yi5lbGVtZW50c1swXSo9YztiLmVsZW1lbnRzWzFdKj1jO2IuZWxlbWVudHNbMl0qPWM7Yi5lbGVtZW50c1s0XSo9XG5mO2IuZWxlbWVudHNbNV0qPWY7Yi5lbGVtZW50c1s2XSo9ZjtiLmVsZW1lbnRzWzhdKj1rO2IuZWxlbWVudHNbOV0qPWs7Yi5lbGVtZW50c1sxMF0qPWs7ZC5zZXRGcm9tUm90YXRpb25NYXRyaXgoYik7ZS54PWg7ZS55PWc7ZS56PWk7cmV0dXJuIHRoaXN9fSgpLG1ha2VGcnVzdHVtOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2YXIgaD10aGlzLmVsZW1lbnRzO2hbMF09MiplLyhiLWEpO2hbNF09MDtoWzhdPShiK2EpLyhiLWEpO2hbMTJdPTA7aFsxXT0wO2hbNV09MiplLyhkLWMpO2hbOV09KGQrYykvKGQtYyk7aFsxM109MDtoWzJdPTA7aFs2XT0wO2hbMTBdPS0oZitlKS8oZi1lKTtoWzE0XT0tMipmKmUvKGYtZSk7aFszXT0wO2hbN109MDtoWzExXT0tMTtoWzE1XT0wO3JldHVybiB0aGlzfSxtYWtlUGVyc3BlY3RpdmU6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGE9YypNYXRoLnRhbihUSFJFRS5NYXRoLmRlZ1RvUmFkKDAuNSphKSksZT0tYTtyZXR1cm4gdGhpcy5tYWtlRnJ1c3R1bShlKlxuYixhKmIsZSxhLGMsZCl9LG1ha2VPcnRob2dyYXBoaWM6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3ZhciBoPXRoaXMuZWxlbWVudHMsZz1iLWEsaT1jLWQsaz1mLWU7aFswXT0yL2c7aFs0XT0wO2hbOF09MDtoWzEyXT0tKChiK2EpL2cpO2hbMV09MDtoWzVdPTIvaTtoWzldPTA7aFsxM109LSgoYytkKS9pKTtoWzJdPTA7aFs2XT0wO2hbMTBdPS0yL2s7aFsxNF09LSgoZitlKS9rKTtoWzNdPTA7aFs3XT0wO2hbMTFdPTA7aFsxNV09MTtyZXR1cm4gdGhpc30sZnJvbUFycmF5OmZ1bmN0aW9uKGEpe3RoaXMuZWxlbWVudHMuc2V0KGEpO3JldHVybiB0aGlzfSx0b0FycmF5OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5lbGVtZW50cztyZXR1cm5bYVswXSxhWzFdLGFbMl0sYVszXSxhWzRdLGFbNV0sYVs2XSxhWzddLGFbOF0sYVs5XSxhWzEwXSxhWzExXSxhWzEyXSxhWzEzXSxhWzE0XSxhWzE1XV19LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5lbGVtZW50cztyZXR1cm4gbmV3IFRIUkVFLk1hdHJpeDQoYVswXSxcbmFbNF0sYVs4XSxhWzEyXSxhWzFdLGFbNV0sYVs5XSxhWzEzXSxhWzJdLGFbNl0sYVsxMF0sYVsxNF0sYVszXSxhWzddLGFbMTFdLGFbMTVdKX19O1RIUkVFLlJheT1mdW5jdGlvbihhLGIpe3RoaXMub3JpZ2luPXZvaWQgMCE9PWE/YTpuZXcgVEhSRUUuVmVjdG9yMzt0aGlzLmRpcmVjdGlvbj12b2lkIDAhPT1iP2I6bmV3IFRIUkVFLlZlY3RvcjN9O1xuVEhSRUUuUmF5LnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuUmF5LHNldDpmdW5jdGlvbihhLGIpe3RoaXMub3JpZ2luLmNvcHkoYSk7dGhpcy5kaXJlY3Rpb24uY29weShiKTtyZXR1cm4gdGhpc30sY29weTpmdW5jdGlvbihhKXt0aGlzLm9yaWdpbi5jb3B5KGEub3JpZ2luKTt0aGlzLmRpcmVjdGlvbi5jb3B5KGEuZGlyZWN0aW9uKTtyZXR1cm4gdGhpc30sYXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4oYnx8bmV3IFRIUkVFLlZlY3RvcjMpLmNvcHkodGhpcy5kaXJlY3Rpb24pLm11bHRpcGx5U2NhbGFyKGEpLmFkZCh0aGlzLm9yaWdpbil9LHJlY2FzdDpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihiKXt0aGlzLm9yaWdpbi5jb3B5KHRoaXMuYXQoYixhKSk7cmV0dXJuIHRoaXN9fSgpLGNsb3Nlc3RQb2ludFRvUG9pbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1ifHxuZXcgVEhSRUUuVmVjdG9yMztjLnN1YlZlY3RvcnMoYSx0aGlzLm9yaWdpbik7XG52YXIgZD1jLmRvdCh0aGlzLmRpcmVjdGlvbik7cmV0dXJuIDA+ZD9jLmNvcHkodGhpcy5vcmlnaW4pOmMuY29weSh0aGlzLmRpcmVjdGlvbikubXVsdGlwbHlTY2FsYXIoZCkuYWRkKHRoaXMub3JpZ2luKX0sZGlzdGFuY2VUb1BvaW50OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWEuc3ViVmVjdG9ycyhiLHRoaXMub3JpZ2luKS5kb3QodGhpcy5kaXJlY3Rpb24pO2lmKDA+YylyZXR1cm4gdGhpcy5vcmlnaW4uZGlzdGFuY2VUbyhiKTthLmNvcHkodGhpcy5kaXJlY3Rpb24pLm11bHRpcGx5U2NhbGFyKGMpLmFkZCh0aGlzLm9yaWdpbik7cmV0dXJuIGEuZGlzdGFuY2VUbyhiKX19KCksZGlzdGFuY2VTcVRvU2VnbWVudDpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1hLmNsb25lKCkuYWRkKGIpLm11bHRpcGx5U2NhbGFyKDAuNSksZj1iLmNsb25lKCkuc3ViKGEpLm5vcm1hbGl6ZSgpLGg9MC41KmEuZGlzdGFuY2VUbyhiKSxcbmc9dGhpcy5vcmlnaW4uY2xvbmUoKS5zdWIoZSksYT0tdGhpcy5kaXJlY3Rpb24uZG90KGYpLGI9Zy5kb3QodGhpcy5kaXJlY3Rpb24pLGk9LWcuZG90KGYpLGs9Zy5sZW5ndGhTcSgpLG09TWF0aC5hYnMoMS1hKmEpLGwscDswPD1tPyhnPWEqaS1iLGw9YSpiLWkscD1oKm0sMDw9Zz9sPj0tcD9sPD1wPyhoPTEvbSxnKj1oLGwqPWgsYT1nKihnK2EqbCsyKmIpK2wqKGEqZytsKzIqaSkrayk6KGw9aCxnPU1hdGgubWF4KDAsLShhKmwrYikpLGE9LWcqZytsKihsKzIqaSkrayk6KGw9LWgsZz1NYXRoLm1heCgwLC0oYSpsK2IpKSxhPS1nKmcrbCoobCsyKmkpK2spOmw8PS1wPyhnPU1hdGgubWF4KDAsLSgtYSpoK2IpKSxsPTA8Zz8taDpNYXRoLm1pbihNYXRoLm1heCgtaCwtaSksaCksYT0tZypnK2wqKGwrMippKStrKTpsPD1wPyhnPTAsbD1NYXRoLm1pbihNYXRoLm1heCgtaCwtaSksaCksYT1sKihsKzIqaSkrayk6KGc9TWF0aC5tYXgoMCwtKGEqaCtiKSksbD0wPGc/aDpNYXRoLm1pbihNYXRoLm1heCgtaCxcbi1pKSxoKSxhPS1nKmcrbCoobCsyKmkpK2spKToobD0wPGE/LWg6aCxnPU1hdGgubWF4KDAsLShhKmwrYikpLGE9LWcqZytsKihsKzIqaSkrayk7YyYmYy5jb3B5KHRoaXMuZGlyZWN0aW9uLmNsb25lKCkubXVsdGlwbHlTY2FsYXIoZykuYWRkKHRoaXMub3JpZ2luKSk7ZCYmZC5jb3B5KGYuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihsKS5hZGQoZSkpO3JldHVybiBhfSxpc0ludGVyc2VjdGlvblNwaGVyZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5kaXN0YW5jZVRvUG9pbnQoYS5jZW50ZXIpPD1hLnJhZGl1c30saXNJbnRlcnNlY3Rpb25QbGFuZTpmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3RhbmNlVG9Qb2ludCh0aGlzLm9yaWdpbik7cmV0dXJuIDA9PT1ifHwwPmEubm9ybWFsLmRvdCh0aGlzLmRpcmVjdGlvbikqYj8hMDohMX0sZGlzdGFuY2VUb1BsYW5lOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9ybWFsLmRvdCh0aGlzLmRpcmVjdGlvbik7aWYoMD09YilyZXR1cm4gMD09YS5kaXN0YW5jZVRvUG9pbnQodGhpcy5vcmlnaW4pP1xuMDpudWxsO2E9LSh0aGlzLm9yaWdpbi5kb3QoYS5ub3JtYWwpK2EuY29uc3RhbnQpL2I7cmV0dXJuIDA8PWE/YTpudWxsfSxpbnRlcnNlY3RQbGFuZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZGlzdGFuY2VUb1BsYW5lKGEpO3JldHVybiBudWxsPT09Yz9udWxsOnRoaXMuYXQoYyxiKX0saXNJbnRlcnNlY3Rpb25Cb3g6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIG51bGwhPT10aGlzLmludGVyc2VjdEJveChiLGEpfX0oKSxpbnRlcnNlY3RCb3g6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZixoO2Q9MS90aGlzLmRpcmVjdGlvbi54O2Y9MS90aGlzLmRpcmVjdGlvbi55O2g9MS90aGlzLmRpcmVjdGlvbi56O3ZhciBnPXRoaXMub3JpZ2luOzA8PWQ/KGM9KGEubWluLngtZy54KSpkLGQqPWEubWF4LngtZy54KTooYz0oYS5tYXgueC1nLngpKmQsZCo9YS5taW4ueC1nLngpOzA8PWY/KGU9KGEubWluLnktZy55KSpmLGYqPVxuYS5tYXgueS1nLnkpOihlPShhLm1heC55LWcueSkqZixmKj1hLm1pbi55LWcueSk7aWYoYz5mfHxlPmQpcmV0dXJuIG51bGw7aWYoZT5jfHxjIT09YyljPWU7aWYoZjxkfHxkIT09ZClkPWY7MDw9aD8oZT0oYS5taW4uei1nLnopKmgsaCo9YS5tYXguei1nLnopOihlPShhLm1heC56LWcueikqaCxoKj1hLm1pbi56LWcueik7aWYoYz5ofHxlPmQpcmV0dXJuIG51bGw7aWYoZT5jfHxjIT09YyljPWU7aWYoaDxkfHxkIT09ZClkPWg7cmV0dXJuIDA+ZD9udWxsOnRoaXMuYXQoMDw9Yz9jOmQsYil9LGludGVyc2VjdFRyaWFuZ2xlOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjMsYj1uZXcgVEhSRUUuVmVjdG9yMyxjPW5ldyBUSFJFRS5WZWN0b3IzLGQ9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGUsZixoLGcsaSl7Yi5zdWJWZWN0b3JzKGYsZSk7Yy5zdWJWZWN0b3JzKGgsZSk7ZC5jcm9zc1ZlY3RvcnMoYixjKTtmPXRoaXMuZGlyZWN0aW9uLmRvdChkKTtpZigwPFxuZil7aWYoZylyZXR1cm4gbnVsbDtnPTF9ZWxzZSBpZigwPmYpZz0tMSxmPS1mO2Vsc2UgcmV0dXJuIG51bGw7YS5zdWJWZWN0b3JzKHRoaXMub3JpZ2luLGUpO2U9Zyp0aGlzLmRpcmVjdGlvbi5kb3QoYy5jcm9zc1ZlY3RvcnMoYSxjKSk7aWYoMD5lKXJldHVybiBudWxsO2g9Zyp0aGlzLmRpcmVjdGlvbi5kb3QoYi5jcm9zcyhhKSk7aWYoMD5ofHxlK2g+ZilyZXR1cm4gbnVsbDtlPS1nKmEuZG90KGQpO3JldHVybiAwPmU/bnVsbDp0aGlzLmF0KGUvZixpKX19KCksYXBwbHlNYXRyaXg0OmZ1bmN0aW9uKGEpe3RoaXMuZGlyZWN0aW9uLmFkZCh0aGlzLm9yaWdpbikuYXBwbHlNYXRyaXg0KGEpO3RoaXMub3JpZ2luLmFwcGx5TWF0cml4NChhKTt0aGlzLmRpcmVjdGlvbi5zdWIodGhpcy5vcmlnaW4pO3RoaXMuZGlyZWN0aW9uLm5vcm1hbGl6ZSgpO3JldHVybiB0aGlzfSxlcXVhbHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEub3JpZ2luLmVxdWFscyh0aGlzLm9yaWdpbikmJmEuZGlyZWN0aW9uLmVxdWFscyh0aGlzLmRpcmVjdGlvbil9LFxuY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IFRIUkVFLlJheSkuY29weSh0aGlzKX19O1RIUkVFLlNwaGVyZT1mdW5jdGlvbihhLGIpe3RoaXMuY2VudGVyPXZvaWQgMCE9PWE/YTpuZXcgVEhSRUUuVmVjdG9yMzt0aGlzLnJhZGl1cz12b2lkIDAhPT1iP2I6MH07XG5USFJFRS5TcGhlcmUucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5TcGhlcmUsc2V0OmZ1bmN0aW9uKGEsYil7dGhpcy5jZW50ZXIuY29weShhKTt0aGlzLnJhZGl1cz1iO3JldHVybiB0aGlzfSxzZXRGcm9tUG9pbnRzOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLkJveDM7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7dmFyIGQ9dGhpcy5jZW50ZXI7dm9pZCAwIT09Yz9kLmNvcHkoYyk6YS5zZXRGcm9tUG9pbnRzKGIpLmNlbnRlcihkKTtmb3IodmFyIGU9MCxmPTAsaD1iLmxlbmd0aDtmPGg7ZisrKWU9TWF0aC5tYXgoZSxkLmRpc3RhbmNlVG9TcXVhcmVkKGJbZl0pKTt0aGlzLnJhZGl1cz1NYXRoLnNxcnQoZSk7cmV0dXJuIHRoaXN9fSgpLGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5jZW50ZXIuY29weShhLmNlbnRlcik7dGhpcy5yYWRpdXM9YS5yYWRpdXM7cmV0dXJuIHRoaXN9LGVtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIDA+PXRoaXMucmFkaXVzfSxjb250YWluc1BvaW50OmZ1bmN0aW9uKGEpe3JldHVybiBhLmRpc3RhbmNlVG9TcXVhcmVkKHRoaXMuY2VudGVyKTw9XG50aGlzLnJhZGl1cyp0aGlzLnJhZGl1c30sZGlzdGFuY2VUb1BvaW50OmZ1bmN0aW9uKGEpe3JldHVybiBhLmRpc3RhbmNlVG8odGhpcy5jZW50ZXIpLXRoaXMucmFkaXVzfSxpbnRlcnNlY3RzU3BoZXJlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucmFkaXVzK2EucmFkaXVzO3JldHVybiBhLmNlbnRlci5kaXN0YW5jZVRvU3F1YXJlZCh0aGlzLmNlbnRlcik8PWIqYn0sY2xhbXBQb2ludDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuY2VudGVyLmRpc3RhbmNlVG9TcXVhcmVkKGEpLGQ9Ynx8bmV3IFRIUkVFLlZlY3RvcjM7ZC5jb3B5KGEpO2M+dGhpcy5yYWRpdXMqdGhpcy5yYWRpdXMmJihkLnN1Yih0aGlzLmNlbnRlcikubm9ybWFsaXplKCksZC5tdWx0aXBseVNjYWxhcih0aGlzLnJhZGl1cykuYWRkKHRoaXMuY2VudGVyKSk7cmV0dXJuIGR9LGdldEJvdW5kaW5nQm94OmZ1bmN0aW9uKGEpe2E9YXx8bmV3IFRIUkVFLkJveDM7YS5zZXQodGhpcy5jZW50ZXIsdGhpcy5jZW50ZXIpO2EuZXhwYW5kQnlTY2FsYXIodGhpcy5yYWRpdXMpO1xucmV0dXJuIGF9LGFwcGx5TWF0cml4NDpmdW5jdGlvbihhKXt0aGlzLmNlbnRlci5hcHBseU1hdHJpeDQoYSk7dGhpcy5yYWRpdXMqPWEuZ2V0TWF4U2NhbGVPbkF4aXMoKTtyZXR1cm4gdGhpc30sdHJhbnNsYXRlOmZ1bmN0aW9uKGEpe3RoaXMuY2VudGVyLmFkZChhKTtyZXR1cm4gdGhpc30sZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiBhLmNlbnRlci5lcXVhbHModGhpcy5jZW50ZXIpJiZhLnJhZGl1cz09PXRoaXMucmFkaXVzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgVEhSRUUuU3BoZXJlKS5jb3B5KHRoaXMpfX07VEhSRUUuRnJ1c3R1bT1mdW5jdGlvbihhLGIsYyxkLGUsZil7dGhpcy5wbGFuZXM9W3ZvaWQgMCE9PWE/YTpuZXcgVEhSRUUuUGxhbmUsdm9pZCAwIT09Yj9iOm5ldyBUSFJFRS5QbGFuZSx2b2lkIDAhPT1jP2M6bmV3IFRIUkVFLlBsYW5lLHZvaWQgMCE9PWQ/ZDpuZXcgVEhSRUUuUGxhbmUsdm9pZCAwIT09ZT9lOm5ldyBUSFJFRS5QbGFuZSx2b2lkIDAhPT1mP2Y6bmV3IFRIUkVFLlBsYW5lXX07XG5USFJFRS5GcnVzdHVtLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuRnJ1c3R1bSxzZXQ6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3ZhciBoPXRoaXMucGxhbmVzO2hbMF0uY29weShhKTtoWzFdLmNvcHkoYik7aFsyXS5jb3B5KGMpO2hbM10uY29weShkKTtoWzRdLmNvcHkoZSk7aFs1XS5jb3B5KGYpO3JldHVybiB0aGlzfSxjb3B5OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLnBsYW5lcyxjPTA7Nj5jO2MrKyliW2NdLmNvcHkoYS5wbGFuZXNbY10pO3JldHVybiB0aGlzfSxzZXRGcm9tTWF0cml4OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucGxhbmVzLGM9YS5lbGVtZW50cyxhPWNbMF0sZD1jWzFdLGU9Y1syXSxmPWNbM10saD1jWzRdLGc9Y1s1XSxpPWNbNl0saz1jWzddLG09Y1s4XSxsPWNbOV0scD1jWzEwXSx0PWNbMTFdLHM9Y1sxMl0scT1jWzEzXSxuPWNbMTRdLGM9Y1sxNV07YlswXS5zZXRDb21wb25lbnRzKGYtYSxrLWgsdC1tLGMtcykubm9ybWFsaXplKCk7YlsxXS5zZXRDb21wb25lbnRzKGYrXG5hLGsraCx0K20sYytzKS5ub3JtYWxpemUoKTtiWzJdLnNldENvbXBvbmVudHMoZitkLGsrZyx0K2wsYytxKS5ub3JtYWxpemUoKTtiWzNdLnNldENvbXBvbmVudHMoZi1kLGstZyx0LWwsYy1xKS5ub3JtYWxpemUoKTtiWzRdLnNldENvbXBvbmVudHMoZi1lLGstaSx0LXAsYy1uKS5ub3JtYWxpemUoKTtiWzVdLnNldENvbXBvbmVudHMoZitlLGsraSx0K3AsYytuKS5ub3JtYWxpemUoKTtyZXR1cm4gdGhpc30saW50ZXJzZWN0c09iamVjdDpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5TcGhlcmU7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWIuZ2VvbWV0cnk7bnVsbD09PWMuYm91bmRpbmdTcGhlcmUmJmMuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk7YS5jb3B5KGMuYm91bmRpbmdTcGhlcmUpO2EuYXBwbHlNYXRyaXg0KGIubWF0cml4V29ybGQpO3JldHVybiB0aGlzLmludGVyc2VjdHNTcGhlcmUoYSl9fSgpLGludGVyc2VjdHNTcGhlcmU6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMucGxhbmVzLFxuYz1hLmNlbnRlcixhPS1hLnJhZGl1cyxkPTA7Nj5kO2QrKylpZihiW2RdLmRpc3RhbmNlVG9Qb2ludChjKTxhKXJldHVybiExO3JldHVybiEwfSxpbnRlcnNlY3RzQm94OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjMsYj1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oYyl7Zm9yKHZhciBkPXRoaXMucGxhbmVzLGU9MDs2PmU7ZSsrKXt2YXIgZj1kW2VdO2EueD0wPGYubm9ybWFsLng/Yy5taW4ueDpjLm1heC54O2IueD0wPGYubm9ybWFsLng/Yy5tYXgueDpjLm1pbi54O2EueT0wPGYubm9ybWFsLnk/Yy5taW4ueTpjLm1heC55O2IueT0wPGYubm9ybWFsLnk/Yy5tYXgueTpjLm1pbi55O2Euej0wPGYubm9ybWFsLno/Yy5taW4uejpjLm1heC56O2Iuej0wPGYubm9ybWFsLno/Yy5tYXguejpjLm1pbi56O3ZhciBoPWYuZGlzdGFuY2VUb1BvaW50KGEpLGY9Zi5kaXN0YW5jZVRvUG9pbnQoYik7aWYoMD5oJiYwPmYpcmV0dXJuITF9cmV0dXJuITB9fSgpLGNvbnRhaW5zUG9pbnQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVxudGhpcy5wbGFuZXMsYz0wOzY+YztjKyspaWYoMD5iW2NdLmRpc3RhbmNlVG9Qb2ludChhKSlyZXR1cm4hMTtyZXR1cm4hMH0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IFRIUkVFLkZydXN0dW0pLmNvcHkodGhpcyl9fTtUSFJFRS5QbGFuZT1mdW5jdGlvbihhLGIpe3RoaXMubm9ybWFsPXZvaWQgMCE9PWE/YTpuZXcgVEhSRUUuVmVjdG9yMygxLDAsMCk7dGhpcy5jb25zdGFudD12b2lkIDAhPT1iP2I6MH07XG5USFJFRS5QbGFuZS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLlBsYW5lLHNldDpmdW5jdGlvbihhLGIpe3RoaXMubm9ybWFsLmNvcHkoYSk7dGhpcy5jb25zdGFudD1iO3JldHVybiB0aGlzfSxzZXRDb21wb25lbnRzOmZ1bmN0aW9uKGEsYixjLGQpe3RoaXMubm9ybWFsLnNldChhLGIsYyk7dGhpcy5jb25zdGFudD1kO3JldHVybiB0aGlzfSxzZXRGcm9tTm9ybWFsQW5kQ29wbGFuYXJQb2ludDpmdW5jdGlvbihhLGIpe3RoaXMubm9ybWFsLmNvcHkoYSk7dGhpcy5jb25zdGFudD0tYi5kb3QodGhpcy5ub3JtYWwpO3JldHVybiB0aGlzfSxzZXRGcm9tQ29wbGFuYXJQb2ludHM6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMyxiPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihjLGQsZSl7ZD1hLnN1YlZlY3RvcnMoZSxkKS5jcm9zcyhiLnN1YlZlY3RvcnMoYyxkKSkubm9ybWFsaXplKCk7dGhpcy5zZXRGcm9tTm9ybWFsQW5kQ29wbGFuYXJQb2ludChkLFxuYyk7cmV0dXJuIHRoaXN9fSgpLGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5ub3JtYWwuY29weShhLm5vcm1hbCk7dGhpcy5jb25zdGFudD1hLmNvbnN0YW50O3JldHVybiB0aGlzfSxub3JtYWxpemU6ZnVuY3Rpb24oKXt2YXIgYT0xL3RoaXMubm9ybWFsLmxlbmd0aCgpO3RoaXMubm9ybWFsLm11bHRpcGx5U2NhbGFyKGEpO3RoaXMuY29uc3RhbnQqPWE7cmV0dXJuIHRoaXN9LG5lZ2F0ZTpmdW5jdGlvbigpe3RoaXMuY29uc3RhbnQqPS0xO3RoaXMubm9ybWFsLm5lZ2F0ZSgpO3JldHVybiB0aGlzfSxkaXN0YW5jZVRvUG9pbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubm9ybWFsLmRvdChhKSt0aGlzLmNvbnN0YW50fSxkaXN0YW5jZVRvU3BoZXJlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRpc3RhbmNlVG9Qb2ludChhLmNlbnRlciktYS5yYWRpdXN9LHByb2plY3RQb2ludDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm9ydGhvUG9pbnQoYSxiKS5zdWIoYSkubmVnYXRlKCl9LG9ydGhvUG9pbnQ6ZnVuY3Rpb24oYSxcbmIpe3ZhciBjPXRoaXMuZGlzdGFuY2VUb1BvaW50KGEpO3JldHVybihifHxuZXcgVEhSRUUuVmVjdG9yMykuY29weSh0aGlzLm5vcm1hbCkubXVsdGlwbHlTY2FsYXIoYyl9LGlzSW50ZXJzZWN0aW9uTGluZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmRpc3RhbmNlVG9Qb2ludChhLnN0YXJ0KSxhPXRoaXMuZGlzdGFuY2VUb1BvaW50KGEuZW5kKTtyZXR1cm4gMD5iJiYwPGF8fDA+YSYmMDxifSxpbnRlcnNlY3RMaW5lOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7dmFyIGQ9Y3x8bmV3IFRIUkVFLlZlY3RvcjMsZT1iLmRlbHRhKGEpLGY9dGhpcy5ub3JtYWwuZG90KGUpO2lmKDA9PWYpe2lmKDA9PXRoaXMuZGlzdGFuY2VUb1BvaW50KGIuc3RhcnQpKXJldHVybiBkLmNvcHkoYi5zdGFydCl9ZWxzZSByZXR1cm4gZj0tKGIuc3RhcnQuZG90KHRoaXMubm9ybWFsKSt0aGlzLmNvbnN0YW50KS9mLDA+Znx8MTxmP3ZvaWQgMDpkLmNvcHkoZSkubXVsdGlwbHlTY2FsYXIoZikuYWRkKGIuc3RhcnQpfX0oKSxcbmNvcGxhbmFyUG9pbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fG5ldyBUSFJFRS5WZWN0b3IzKS5jb3B5KHRoaXMubm9ybWFsKS5tdWx0aXBseVNjYWxhcigtdGhpcy5jb25zdGFudCl9LGFwcGx5TWF0cml4NDpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzLGI9bmV3IFRIUkVFLlZlY3RvcjMsYz1uZXcgVEhSRUUuTWF0cml4MztyZXR1cm4gZnVuY3Rpb24oZCxlKXt2YXIgZj1lfHxjLmdldE5vcm1hbE1hdHJpeChkKSxmPWEuY29weSh0aGlzLm5vcm1hbCkuYXBwbHlNYXRyaXgzKGYpLGg9dGhpcy5jb3BsYW5hclBvaW50KGIpO2guYXBwbHlNYXRyaXg0KGQpO3RoaXMuc2V0RnJvbU5vcm1hbEFuZENvcGxhbmFyUG9pbnQoZixoKTtyZXR1cm4gdGhpc319KCksdHJhbnNsYXRlOmZ1bmN0aW9uKGEpe3RoaXMuY29uc3RhbnQtPWEuZG90KHRoaXMubm9ybWFsKTtyZXR1cm4gdGhpc30sZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiBhLm5vcm1hbC5lcXVhbHModGhpcy5ub3JtYWwpJiZcbmEuY29uc3RhbnQ9PXRoaXMuY29uc3RhbnR9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBUSFJFRS5QbGFuZSkuY29weSh0aGlzKX19O1RIUkVFLk1hdGg9e1BJMjoyKk1hdGguUEksZ2VuZXJhdGVVVUlEOmZ1bmN0aW9uKCl7dmFyIGE9XCIwMTIzNDU2Nzg5QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5elwiLnNwbGl0KFwiXCIpLGI9QXJyYXkoMzYpLGM9MCxkO3JldHVybiBmdW5jdGlvbigpe2Zvcih2YXIgZT0wOzM2PmU7ZSsrKTg9PWV8fDEzPT1lfHwxOD09ZXx8MjM9PWU/YltlXT1cIi1cIjoxND09ZT9iW2VdPVwiNFwiOigyPj1jJiYoYz0zMzU1NDQzMisxNjc3NzIxNipNYXRoLnJhbmRvbSgpfDApLGQ9YyYxNSxjPj49NCxiW2VdPWFbMTk9PWU/ZCYzfDg6ZF0pO3JldHVybiBiLmpvaW4oXCJcIil9fSgpLGNsYW1wOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYTxiP2I6YT5jP2M6YX0sY2xhbXBCb3R0b206ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYTxiP2I6YX0sbWFwTGluZWFyOmZ1bmN0aW9uKGEsYixjLGQsZSl7cmV0dXJuIGQrKGEtYikqKGUtZCkvKGMtYil9LHNtb290aHN0ZXA6ZnVuY3Rpb24oYSxcbmIsYyl7aWYoYTw9YilyZXR1cm4gMDtpZihhPj1jKXJldHVybiAxO2E9KGEtYikvKGMtYik7cmV0dXJuIGEqYSooMy0yKmEpfSxzbW9vdGhlcnN0ZXA6ZnVuY3Rpb24oYSxiLGMpe2lmKGE8PWIpcmV0dXJuIDA7aWYoYT49YylyZXR1cm4gMTthPShhLWIpLyhjLWIpO3JldHVybiBhKmEqYSooYSooNiphLTE1KSsxMCl9LHJhbmRvbTE2OmZ1bmN0aW9uKCl7cmV0dXJuKDY1MjgwKk1hdGgucmFuZG9tKCkrMjU1Kk1hdGgucmFuZG9tKCkpLzY1NTM1fSxyYW5kSW50OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGErTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKihiLWErMSkpfSxyYW5kRmxvYXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYStNYXRoLnJhbmRvbSgpKihiLWEpfSxyYW5kRmxvYXRTcHJlYWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEqKDAuNS1NYXRoLnJhbmRvbSgpKX0sc2lnbjpmdW5jdGlvbihhKXtyZXR1cm4gMD5hPy0xOjA8YT8xOjB9LGRlZ1RvUmFkOmZ1bmN0aW9uKCl7dmFyIGE9TWF0aC5QSS9cbjE4MDtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIGIqYX19KCkscmFkVG9EZWc6ZnVuY3Rpb24oKXt2YXIgYT0xODAvTWF0aC5QSTtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIGIqYX19KCl9O1RIUkVFLlNwbGluZT1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYixjLGQsZSxmLGgpe2E9MC41KihjLWEpO2Q9MC41KihkLWIpO3JldHVybigyKihiLWMpK2ErZCkqaCsoLTMqKGItYyktMiphLWQpKmYrYSplK2J9dGhpcy5wb2ludHM9YTt2YXIgYz1bXSxkPXt4OjAseTowLHo6MH0sZSxmLGgsZyxpLGssbSxsLHA7dGhpcy5pbml0RnJvbUFycmF5PWZ1bmN0aW9uKGEpe3RoaXMucG9pbnRzPVtdO2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKXRoaXMucG9pbnRzW2JdPXt4OmFbYl1bMF0seTphW2JdWzFdLHo6YVtiXVsyXX19O3RoaXMuZ2V0UG9pbnQ9ZnVuY3Rpb24oYSl7ZT0odGhpcy5wb2ludHMubGVuZ3RoLTEpKmE7Zj1NYXRoLmZsb29yKGUpO2g9ZS1mO2NbMF09MD09PWY/ZjpmLTE7Y1sxXT1mO2NbMl09Zj50aGlzLnBvaW50cy5sZW5ndGgtMj90aGlzLnBvaW50cy5sZW5ndGgtMTpmKzE7Y1szXT1mPnRoaXMucG9pbnRzLmxlbmd0aC0zP3RoaXMucG9pbnRzLmxlbmd0aC0xOlxuZisyO2s9dGhpcy5wb2ludHNbY1swXV07bT10aGlzLnBvaW50c1tjWzFdXTtsPXRoaXMucG9pbnRzW2NbMl1dO3A9dGhpcy5wb2ludHNbY1szXV07Zz1oKmg7aT1oKmc7ZC54PWIoay54LG0ueCxsLngscC54LGgsZyxpKTtkLnk9YihrLnksbS55LGwueSxwLnksaCxnLGkpO2Quej1iKGsueixtLnosbC56LHAueixoLGcsaSk7cmV0dXJuIGR9O3RoaXMuZ2V0Q29udHJvbFBvaW50c0FycmF5PWZ1bmN0aW9uKCl7dmFyIGEsYixjPXRoaXMucG9pbnRzLmxlbmd0aCxkPVtdO2ZvcihhPTA7YTxjO2ErKyliPXRoaXMucG9pbnRzW2FdLGRbYV09W2IueCxiLnksYi56XTtyZXR1cm4gZH07dGhpcy5nZXRMZW5ndGg9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGU9Yj1iPTAsZj1uZXcgVEhSRUUuVmVjdG9yMyxoPW5ldyBUSFJFRS5WZWN0b3IzLGc9W10saT0wO2dbMF09MDthfHwoYT0xMDApO2M9dGhpcy5wb2ludHMubGVuZ3RoKmE7Zi5jb3B5KHRoaXMucG9pbnRzWzBdKTtmb3IoYT0xO2E8YzthKyspYj1cbmEvYyxkPXRoaXMuZ2V0UG9pbnQoYiksaC5jb3B5KGQpLGkrPWguZGlzdGFuY2VUbyhmKSxmLmNvcHkoZCksYio9dGhpcy5wb2ludHMubGVuZ3RoLTEsYj1NYXRoLmZsb29yKGIpLGIhPWUmJihnW2JdPWksZT1iKTtnW2cubGVuZ3RoXT1pO3JldHVybntjaHVua3M6Zyx0b3RhbDppfX07dGhpcy5yZXBhcmFtZXRyaXplQnlBcmNMZW5ndGg9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixoLGc9W10saT1uZXcgVEhSRUUuVmVjdG9yMyxrPXRoaXMuZ2V0TGVuZ3RoKCk7Zy5wdXNoKGkuY29weSh0aGlzLnBvaW50c1swXSkuY2xvbmUoKSk7Zm9yKGI9MTtiPHRoaXMucG9pbnRzLmxlbmd0aDtiKyspe2M9ay5jaHVua3NbYl0tay5jaHVua3NbYi0xXTtoPU1hdGguY2VpbChhKmMvay50b3RhbCk7ZT0oYi0xKS8odGhpcy5wb2ludHMubGVuZ3RoLTEpO2Y9Yi8odGhpcy5wb2ludHMubGVuZ3RoLTEpO2ZvcihjPTE7YzxoLTE7YysrKWQ9ZStjKigxL2gpKihmLWUpLGQ9dGhpcy5nZXRQb2ludChkKSxcbmcucHVzaChpLmNvcHkoZCkuY2xvbmUoKSk7Zy5wdXNoKGkuY29weSh0aGlzLnBvaW50c1tiXSkuY2xvbmUoKSl9dGhpcy5wb2ludHM9Z319O1RIUkVFLlRyaWFuZ2xlPWZ1bmN0aW9uKGEsYixjKXt0aGlzLmE9dm9pZCAwIT09YT9hOm5ldyBUSFJFRS5WZWN0b3IzO3RoaXMuYj12b2lkIDAhPT1iP2I6bmV3IFRIUkVFLlZlY3RvcjM7dGhpcy5jPXZvaWQgMCE9PWM/YzpuZXcgVEhSRUUuVmVjdG9yM307VEhSRUUuVHJpYW5nbGUubm9ybWFsPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGIsYyxkLGUpe2U9ZXx8bmV3IFRIUkVFLlZlY3RvcjM7ZS5zdWJWZWN0b3JzKGQsYyk7YS5zdWJWZWN0b3JzKGIsYyk7ZS5jcm9zcyhhKTtiPWUubGVuZ3RoU3EoKTtyZXR1cm4gMDxiP2UubXVsdGlwbHlTY2FsYXIoMS9NYXRoLnNxcnQoYikpOmUuc2V0KDAsMCwwKX19KCk7XG5USFJFRS5UcmlhbmdsZS5iYXJ5Y29vcmRGcm9tUG9pbnQ9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMyxiPW5ldyBUSFJFRS5WZWN0b3IzLGM9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGQsZSxmLGgsZyl7YS5zdWJWZWN0b3JzKGgsZSk7Yi5zdWJWZWN0b3JzKGYsZSk7Yy5zdWJWZWN0b3JzKGQsZSk7dmFyIGQ9YS5kb3QoYSksZT1hLmRvdChiKSxmPWEuZG90KGMpLGk9Yi5kb3QoYiksaD1iLmRvdChjKSxrPWQqaS1lKmUsZz1nfHxuZXcgVEhSRUUuVmVjdG9yMztpZigwPT1rKXJldHVybiBnLnNldCgtMiwtMSwtMSk7az0xL2s7aT0oaSpmLWUqaCkqaztkPShkKmgtZSpmKSprO3JldHVybiBnLnNldCgxLWktZCxkLGkpfX0oKTtcblRIUkVFLlRyaWFuZ2xlLmNvbnRhaW5zUG9pbnQ9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oYixjLGQsZSl7Yj1USFJFRS5UcmlhbmdsZS5iYXJ5Y29vcmRGcm9tUG9pbnQoYixjLGQsZSxhKTtyZXR1cm4gMDw9Yi54JiYwPD1iLnkmJjE+PWIueCtiLnl9fSgpO1xuVEhSRUUuVHJpYW5nbGUucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5UcmlhbmdsZSxzZXQ6ZnVuY3Rpb24oYSxiLGMpe3RoaXMuYS5jb3B5KGEpO3RoaXMuYi5jb3B5KGIpO3RoaXMuYy5jb3B5KGMpO3JldHVybiB0aGlzfSxzZXRGcm9tUG9pbnRzQW5kSW5kaWNlczpmdW5jdGlvbihhLGIsYyxkKXt0aGlzLmEuY29weShhW2JdKTt0aGlzLmIuY29weShhW2NdKTt0aGlzLmMuY29weShhW2RdKTtyZXR1cm4gdGhpc30sY29weTpmdW5jdGlvbihhKXt0aGlzLmEuY29weShhLmEpO3RoaXMuYi5jb3B5KGEuYik7dGhpcy5jLmNvcHkoYS5jKTtyZXR1cm4gdGhpc30sYXJlYTpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzLGI9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKCl7YS5zdWJWZWN0b3JzKHRoaXMuYyx0aGlzLmIpO2Iuc3ViVmVjdG9ycyh0aGlzLmEsdGhpcy5iKTtyZXR1cm4gMC41KmEuY3Jvc3MoYikubGVuZ3RoKCl9fSgpLG1pZHBvaW50OmZ1bmN0aW9uKGEpe3JldHVybihhfHxcbm5ldyBUSFJFRS5WZWN0b3IzKS5hZGRWZWN0b3JzKHRoaXMuYSx0aGlzLmIpLmFkZCh0aGlzLmMpLm11bHRpcGx5U2NhbGFyKDEvMyl9LG5vcm1hbDpmdW5jdGlvbihhKXtyZXR1cm4gVEhSRUUuVHJpYW5nbGUubm9ybWFsKHRoaXMuYSx0aGlzLmIsdGhpcy5jLGEpfSxwbGFuZTpmdW5jdGlvbihhKXtyZXR1cm4oYXx8bmV3IFRIUkVFLlBsYW5lKS5zZXRGcm9tQ29wbGFuYXJQb2ludHModGhpcy5hLHRoaXMuYix0aGlzLmMpfSxiYXJ5Y29vcmRGcm9tUG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gVEhSRUUuVHJpYW5nbGUuYmFyeWNvb3JkRnJvbVBvaW50KGEsdGhpcy5hLHRoaXMuYix0aGlzLmMsYil9LGNvbnRhaW5zUG9pbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFRIUkVFLlRyaWFuZ2xlLmNvbnRhaW5zUG9pbnQoYSx0aGlzLmEsdGhpcy5iLHRoaXMuYyl9LGVxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gYS5hLmVxdWFscyh0aGlzLmEpJiZhLmIuZXF1YWxzKHRoaXMuYikmJmEuYy5lcXVhbHModGhpcy5jKX0sXG5jbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgVEhSRUUuVHJpYW5nbGUpLmNvcHkodGhpcyl9fTtUSFJFRS5WZXJ0ZXg9ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuVmVydGV4IGhhcyBiZWVuIERFUFJFQ0FURUQuIFVzZSBUSFJFRS5WZWN0b3IzIGluc3RlYWQuXCIpO3JldHVybiBhfTtUSFJFRS5VVj1mdW5jdGlvbihhLGIpe2NvbnNvbGUud2FybihcIlRIUkVFLlVWIGhhcyBiZWVuIERFUFJFQ0FURUQuIFVzZSBUSFJFRS5WZWN0b3IyIGluc3RlYWQuXCIpO3JldHVybiBuZXcgVEhSRUUuVmVjdG9yMihhLGIpfTtUSFJFRS5DbG9jaz1mdW5jdGlvbihhKXt0aGlzLmF1dG9TdGFydD12b2lkIDAhPT1hP2E6ITA7dGhpcy5lbGFwc2VkVGltZT10aGlzLm9sZFRpbWU9dGhpcy5zdGFydFRpbWU9MDt0aGlzLnJ1bm5pbmc9ITF9O1xuVEhSRUUuQ2xvY2sucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5DbG9jayxzdGFydDpmdW5jdGlvbigpe3RoaXMub2xkVGltZT10aGlzLnN0YXJ0VGltZT12b2lkIDAhPT1zZWxmLnBlcmZvcm1hbmNlJiZ2b2lkIDAhPT1zZWxmLnBlcmZvcm1hbmNlLm5vdz9zZWxmLnBlcmZvcm1hbmNlLm5vdygpOkRhdGUubm93KCk7dGhpcy5ydW5uaW5nPSEwfSxzdG9wOmZ1bmN0aW9uKCl7dGhpcy5nZXRFbGFwc2VkVGltZSgpO3RoaXMucnVubmluZz0hMX0sZ2V0RWxhcHNlZFRpbWU6ZnVuY3Rpb24oKXt0aGlzLmdldERlbHRhKCk7cmV0dXJuIHRoaXMuZWxhcHNlZFRpbWV9LGdldERlbHRhOmZ1bmN0aW9uKCl7dmFyIGE9MDt0aGlzLmF1dG9TdGFydCYmIXRoaXMucnVubmluZyYmdGhpcy5zdGFydCgpO2lmKHRoaXMucnVubmluZyl7dmFyIGI9dm9pZCAwIT09c2VsZi5wZXJmb3JtYW5jZSYmdm9pZCAwIT09c2VsZi5wZXJmb3JtYW5jZS5ub3c/c2VsZi5wZXJmb3JtYW5jZS5ub3coKTpEYXRlLm5vdygpLFxuYT0wLjAwMSooYi10aGlzLm9sZFRpbWUpO3RoaXMub2xkVGltZT1iO3RoaXMuZWxhcHNlZFRpbWUrPWF9cmV0dXJuIGF9fTtUSFJFRS5FdmVudERpc3BhdGNoZXI9ZnVuY3Rpb24oKXt9O1xuVEhSRUUuRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuRXZlbnREaXNwYXRjaGVyLGFwcGx5OmZ1bmN0aW9uKGEpe2EuYWRkRXZlbnRMaXN0ZW5lcj1USFJFRS5FdmVudERpc3BhdGNoZXIucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXI7YS5oYXNFdmVudExpc3RlbmVyPVRIUkVFLkV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUuaGFzRXZlbnRMaXN0ZW5lcjthLnJlbW92ZUV2ZW50TGlzdGVuZXI9VEhSRUUuRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyO2EuZGlzcGF0Y2hFdmVudD1USFJFRS5FdmVudERpc3BhdGNoZXIucHJvdG90eXBlLmRpc3BhdGNoRXZlbnR9LGFkZEV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT10aGlzLl9saXN0ZW5lcnMmJih0aGlzLl9saXN0ZW5lcnM9e30pO3ZhciBjPXRoaXMuX2xpc3RlbmVyczt2b2lkIDA9PT1jW2FdJiYoY1thXT1bXSk7LTE9PT1jW2FdLmluZGV4T2YoYikmJlxuY1thXS5wdXNoKGIpfSxoYXNFdmVudExpc3RlbmVyOmZ1bmN0aW9uKGEsYil7aWYodm9pZCAwPT09dGhpcy5fbGlzdGVuZXJzKXJldHVybiExO3ZhciBjPXRoaXMuX2xpc3RlbmVycztyZXR1cm4gdm9pZCAwIT09Y1thXSYmLTEhPT1jW2FdLmluZGV4T2YoYik/ITA6ITF9LHJlbW92ZUV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oYSxiKXtpZih2b2lkIDAhPT10aGlzLl9saXN0ZW5lcnMpe3ZhciBjPXRoaXMuX2xpc3RlbmVyc1thXTtpZih2b2lkIDAhPT1jKXt2YXIgZD1jLmluZGV4T2YoYik7LTEhPT1kJiZjLnNwbGljZShkLDEpfX19LGRpc3BhdGNoRXZlbnQ6ZnVuY3Rpb24oKXt2YXIgYT1bXTtyZXR1cm4gZnVuY3Rpb24oYil7aWYodm9pZCAwIT09dGhpcy5fbGlzdGVuZXJzKXt2YXIgYz10aGlzLl9saXN0ZW5lcnNbYi50eXBlXTtpZih2b2lkIDAhPT1jKXtiLnRhcmdldD10aGlzO2Zvcih2YXIgZD1jLmxlbmd0aCxlPTA7ZTxkO2UrKylhW2VdPWNbZV07Zm9yKGU9MDtlPGQ7ZSsrKWFbZV0uY2FsbCh0aGlzLFxuYil9fX19KCl9OyhmdW5jdGlvbihhKXthLlJheWNhc3Rlcj1mdW5jdGlvbihiLGMsZCxlKXt0aGlzLnJheT1uZXcgYS5SYXkoYixjKTt0aGlzLm5lYXI9ZHx8MDt0aGlzLmZhcj1lfHxJbmZpbml0eX07dmFyIGI9bmV3IGEuU3BoZXJlLGM9bmV3IGEuUmF5O25ldyBhLlBsYW5lO25ldyBhLlZlY3RvcjM7dmFyIGQ9bmV3IGEuVmVjdG9yMyxlPW5ldyBhLk1hdHJpeDQsZj1mdW5jdGlvbihhLGIpe3JldHVybiBhLmRpc3RhbmNlLWIuZGlzdGFuY2V9LGg9bmV3IGEuVmVjdG9yMyxnPW5ldyBhLlZlY3RvcjMsaT1uZXcgYS5WZWN0b3IzLGs9ZnVuY3Rpb24oZixtLHQpe2lmKGYgaW5zdGFuY2VvZiBhLlNwcml0ZSl7ZC5zZXRGcm9tTWF0cml4UG9zaXRpb24oZi5tYXRyaXhXb3JsZCk7dmFyIHM9bS5yYXkuZGlzdGFuY2VUb1BvaW50KGQpO2lmKHM+Zi5zY2FsZS54KXJldHVybiB0O3QucHVzaCh7ZGlzdGFuY2U6cyxwb2ludDpmLnBvc2l0aW9uLGZhY2U6bnVsbCxvYmplY3Q6Zn0pfWVsc2UgaWYoZiBpbnN0YW5jZW9mXG5hLkxPRClkLnNldEZyb21NYXRyaXhQb3NpdGlvbihmLm1hdHJpeFdvcmxkKSxzPW0ucmF5Lm9yaWdpbi5kaXN0YW5jZVRvKGQpLGsoZi5nZXRPYmplY3RGb3JEaXN0YW5jZShzKSxtLHQpO2Vsc2UgaWYoZiBpbnN0YW5jZW9mIGEuTWVzaCl7dmFyIHE9Zi5nZW9tZXRyeTtudWxsPT09cS5ib3VuZGluZ1NwaGVyZSYmcS5jb21wdXRlQm91bmRpbmdTcGhlcmUoKTtiLmNvcHkocS5ib3VuZGluZ1NwaGVyZSk7Yi5hcHBseU1hdHJpeDQoZi5tYXRyaXhXb3JsZCk7aWYoITE9PT1tLnJheS5pc0ludGVyc2VjdGlvblNwaGVyZShiKSlyZXR1cm4gdDtlLmdldEludmVyc2UoZi5tYXRyaXhXb3JsZCk7Yy5jb3B5KG0ucmF5KS5hcHBseU1hdHJpeDQoZSk7aWYobnVsbCE9PXEuYm91bmRpbmdCb3gmJiExPT09Yy5pc0ludGVyc2VjdGlvbkJveChxLmJvdW5kaW5nQm94KSlyZXR1cm4gdDtpZihxIGluc3RhbmNlb2YgYS5CdWZmZXJHZW9tZXRyeSl7dmFyIG49Zi5tYXRlcmlhbDtpZih2b2lkIDA9PT1cbm58fCExPT09cS5keW5hbWljKXJldHVybiB0O3ZhciB1LHIsdj1tLnByZWNpc2lvbjtpZih2b2lkIDAhPT1xLmF0dHJpYnV0ZXMuaW5kZXgpZm9yKHZhciB6PXEub2Zmc2V0cyxHPXEuYXR0cmlidXRlcy5pbmRleC5hcnJheSx3PXEuYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheSx5PXEub2Zmc2V0cy5sZW5ndGgsRT1xLmF0dHJpYnV0ZXMuaW5kZXguYXJyYXkubGVuZ3RoLzMsRT0wO0U8eTsrK0UpZm9yKHZhciBzPXpbRV0uc3RhcnQsQT16W0VdLmluZGV4LHE9cyxLPXMreltFXS5jb3VudDtxPEs7cSs9MylzPUErR1txXSx1PUErR1txKzFdLHI9QStHW3ErMl0saC5zZXQod1szKnNdLHdbMypzKzFdLHdbMypzKzJdKSxnLnNldCh3WzMqdV0sd1szKnUrMV0sd1szKnUrMl0pLGkuc2V0KHdbMypyXSx3WzMqcisxXSx3WzMqcisyXSksdT1uLnNpZGU9PT1hLkJhY2tTaWRlP2MuaW50ZXJzZWN0VHJpYW5nbGUoaSxnLGgsITApOmMuaW50ZXJzZWN0VHJpYW5nbGUoaCxnLGksbi5zaWRlIT09YS5Eb3VibGVTaWRlKSxcbm51bGwhPT11JiYodS5hcHBseU1hdHJpeDQoZi5tYXRyaXhXb3JsZCkscz1tLnJheS5vcmlnaW4uZGlzdGFuY2VUbyh1KSxzPHZ8fChzPG0ubmVhcnx8cz5tLmZhcil8fHQucHVzaCh7ZGlzdGFuY2U6cyxwb2ludDp1LGZhY2U6bnVsbCxmYWNlSW5kZXg6bnVsbCxvYmplY3Q6Zn0pKTtlbHNle3c9cS5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5O0U9cS5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5Lmxlbmd0aDtmb3IocT0wO3E8RTtxKz0zKXM9cSx1PXErMSxyPXErMixoLnNldCh3WzMqc10sd1szKnMrMV0sd1szKnMrMl0pLGcuc2V0KHdbMyp1XSx3WzMqdSsxXSx3WzMqdSsyXSksaS5zZXQod1szKnJdLHdbMypyKzFdLHdbMypyKzJdKSx1PW4uc2lkZT09PWEuQmFja1NpZGU/Yy5pbnRlcnNlY3RUcmlhbmdsZShpLGcsaCwhMCk6Yy5pbnRlcnNlY3RUcmlhbmdsZShoLGcsaSxuLnNpZGUhPT1hLkRvdWJsZVNpZGUpLG51bGwhPT11JiYodS5hcHBseU1hdHJpeDQoZi5tYXRyaXhXb3JsZCksXG5zPW0ucmF5Lm9yaWdpbi5kaXN0YW5jZVRvKHUpLHM8dnx8KHM8bS5uZWFyfHxzPm0uZmFyKXx8dC5wdXNoKHtkaXN0YW5jZTpzLHBvaW50OnUsZmFjZTpudWxsLGZhY2VJbmRleDpudWxsLG9iamVjdDpmfSkpfX1lbHNlIGlmKHEgaW5zdGFuY2VvZiBhLkdlb21ldHJ5KXtHPWYubWF0ZXJpYWwgaW5zdGFuY2VvZiBhLk1lc2hGYWNlTWF0ZXJpYWw7dz0hMD09PUc/Zi5tYXRlcmlhbC5tYXRlcmlhbHM6bnVsbDt2PW0ucHJlY2lzaW9uO3o9cS52ZXJ0aWNlczt5PTA7Zm9yKEU9cS5mYWNlcy5sZW5ndGg7eTxFO3krKylBPXEuZmFjZXNbeV0sbj0hMD09PUc/d1tBLm1hdGVyaWFsSW5kZXhdOmYubWF0ZXJpYWwsdm9pZCAwIT09biYmKHM9eltBLmFdLHU9eltBLmJdLHI9eltBLmNdLHU9bi5zaWRlPT09YS5CYWNrU2lkZT9jLmludGVyc2VjdFRyaWFuZ2xlKHIsdSxzLCEwKTpjLmludGVyc2VjdFRyaWFuZ2xlKHMsdSxyLG4uc2lkZSE9PWEuRG91YmxlU2lkZSksbnVsbCE9PXUmJih1LmFwcGx5TWF0cml4NChmLm1hdHJpeFdvcmxkKSxcbnM9bS5yYXkub3JpZ2luLmRpc3RhbmNlVG8odSksczx2fHwoczxtLm5lYXJ8fHM+bS5mYXIpfHx0LnB1c2goe2Rpc3RhbmNlOnMscG9pbnQ6dSxmYWNlOkEsZmFjZUluZGV4Onksb2JqZWN0OmZ9KSkpfX1lbHNlIGlmKGYgaW5zdGFuY2VvZiBhLkxpbmUpe3Y9bS5saW5lUHJlY2lzaW9uO249dip2O3E9Zi5nZW9tZXRyeTtudWxsPT09cS5ib3VuZGluZ1NwaGVyZSYmcS5jb21wdXRlQm91bmRpbmdTcGhlcmUoKTtiLmNvcHkocS5ib3VuZGluZ1NwaGVyZSk7Yi5hcHBseU1hdHJpeDQoZi5tYXRyaXhXb3JsZCk7aWYoITE9PT1tLnJheS5pc0ludGVyc2VjdGlvblNwaGVyZShiKSlyZXR1cm4gdDtlLmdldEludmVyc2UoZi5tYXRyaXhXb3JsZCk7Yy5jb3B5KG0ucmF5KS5hcHBseU1hdHJpeDQoZSk7aWYocSBpbnN0YW5jZW9mIGEuR2VvbWV0cnkpe3o9cS52ZXJ0aWNlczt2PXoubGVuZ3RoO3U9bmV3IGEuVmVjdG9yMztyPW5ldyBhLlZlY3RvcjM7RT1mLnR5cGU9PT1hLkxpbmVTdHJpcD8xOlxuMjtmb3IocT0wO3E8di0xO3ErPUUpYy5kaXN0YW5jZVNxVG9TZWdtZW50KHpbcV0seltxKzFdLHIsdSk+bnx8KHM9Yy5vcmlnaW4uZGlzdGFuY2VUbyhyKSxzPG0ubmVhcnx8cz5tLmZhcnx8dC5wdXNoKHtkaXN0YW5jZTpzLHBvaW50OnUuY2xvbmUoKS5hcHBseU1hdHJpeDQoZi5tYXRyaXhXb3JsZCksZmFjZTpudWxsLGZhY2VJbmRleDpudWxsLG9iamVjdDpmfSkpfX19LG09ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgYT1hLmdldERlc2NlbmRhbnRzKCksZD0wLGU9YS5sZW5ndGg7ZDxlO2QrKylrKGFbZF0sYixjKX07YS5SYXljYXN0ZXIucHJvdG90eXBlLnByZWNpc2lvbj0xRS00O2EuUmF5Y2FzdGVyLnByb3RvdHlwZS5saW5lUHJlY2lzaW9uPTE7YS5SYXljYXN0ZXIucHJvdG90eXBlLnNldD1mdW5jdGlvbihhLGIpe3RoaXMucmF5LnNldChhLGIpfTthLlJheWNhc3Rlci5wcm90b3R5cGUuaW50ZXJzZWN0T2JqZWN0PWZ1bmN0aW9uKGEsYil7dmFyIGM9W107ITA9PT1iJiZtKGEsXG50aGlzLGMpO2soYSx0aGlzLGMpO2Muc29ydChmKTtyZXR1cm4gY307YS5SYXljYXN0ZXIucHJvdG90eXBlLmludGVyc2VjdE9iamVjdHM9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9W10sZD0wLGU9YS5sZW5ndGg7ZDxlO2QrKylrKGFbZF0sdGhpcyxjKSwhMD09PWImJm0oYVtkXSx0aGlzLGMpO2Muc29ydChmKTtyZXR1cm4gY319KShUSFJFRSk7VEhSRUUuT2JqZWN0M0Q9ZnVuY3Rpb24oKXt0aGlzLmlkPVRIUkVFLk9iamVjdDNESWRDb3VudCsrO3RoaXMudXVpZD1USFJFRS5NYXRoLmdlbmVyYXRlVVVJRCgpO3RoaXMubmFtZT1cIlwiO3RoaXMucGFyZW50PXZvaWQgMDt0aGlzLmNoaWxkcmVuPVtdO3RoaXMudXA9bmV3IFRIUkVFLlZlY3RvcjMoMCwxLDApO3RoaXMucG9zaXRpb249bmV3IFRIUkVFLlZlY3RvcjM7dGhpcy5fcm90YXRpb249bmV3IFRIUkVFLkV1bGVyO3RoaXMuX3F1YXRlcm5pb249bmV3IFRIUkVFLlF1YXRlcm5pb247dGhpcy5zY2FsZT1uZXcgVEhSRUUuVmVjdG9yMygxLDEsMSk7dGhpcy5fcm90YXRpb24uX3F1YXRlcm5pb249dGhpcy5xdWF0ZXJuaW9uO3RoaXMuX3F1YXRlcm5pb24uX2V1bGVyPXRoaXMucm90YXRpb247dGhpcy5yZW5kZXJEZXB0aD1udWxsO3RoaXMucm90YXRpb25BdXRvVXBkYXRlPSEwO3RoaXMubWF0cml4PW5ldyBUSFJFRS5NYXRyaXg0O3RoaXMubWF0cml4V29ybGQ9bmV3IFRIUkVFLk1hdHJpeDQ7XG50aGlzLnZpc2libGU9dGhpcy5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPXRoaXMubWF0cml4QXV0b1VwZGF0ZT0hMDt0aGlzLnJlY2VpdmVTaGFkb3c9dGhpcy5jYXN0U2hhZG93PSExO3RoaXMuZnJ1c3R1bUN1bGxlZD0hMDt0aGlzLnVzZXJEYXRhPXt9fTtcblRIUkVFLk9iamVjdDNELnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuT2JqZWN0M0QsZ2V0IHJvdGF0aW9uKCl7cmV0dXJuIHRoaXMuX3JvdGF0aW9ufSxzZXQgcm90YXRpb24oYSl7dGhpcy5fcm90YXRpb249YTt0aGlzLl9yb3RhdGlvbi5fcXVhdGVybmlvbj10aGlzLl9xdWF0ZXJuaW9uO3RoaXMuX3F1YXRlcm5pb24uX2V1bGVyPXRoaXMuX3JvdGF0aW9uO3RoaXMuX3JvdGF0aW9uLl91cGRhdGVRdWF0ZXJuaW9uKCl9LGdldCBxdWF0ZXJuaW9uKCl7cmV0dXJuIHRoaXMuX3F1YXRlcm5pb259LHNldCBxdWF0ZXJuaW9uKGEpe3RoaXMuX3F1YXRlcm5pb249YTt0aGlzLl9xdWF0ZXJuaW9uLl9ldWxlcj10aGlzLl9yb3RhdGlvbjt0aGlzLl9yb3RhdGlvbi5fcXVhdGVybmlvbj10aGlzLl9xdWF0ZXJuaW9uO3RoaXMuX3F1YXRlcm5pb24uX3VwZGF0ZUV1bGVyKCl9LGdldCBldWxlck9yZGVyKCl7Y29uc29sZS53YXJuKFwiREVQUkVDQVRFRDogT2JqZWN0M0QncyAuZXVsZXJPcmRlciBoYXMgYmVlbiBtb3ZlZCB0byBPYmplY3QzRCdzIC5yb3RhdGlvbi5vcmRlci5cIik7XG5yZXR1cm4gdGhpcy5yb3RhdGlvbi5vcmRlcn0sc2V0IGV1bGVyT3JkZXIoYSl7Y29uc29sZS53YXJuKFwiREVQUkVDQVRFRDogT2JqZWN0M0QncyAuZXVsZXJPcmRlciBoYXMgYmVlbiBtb3ZlZCB0byBPYmplY3QzRCdzIC5yb3RhdGlvbi5vcmRlci5cIik7dGhpcy5yb3RhdGlvbi5vcmRlcj1hfSxnZXQgdXNlUXVhdGVybmlvbigpe2NvbnNvbGUud2FybihcIkRFUFJFQ0FURUQ6IE9iamVjdDNEJ3MgLnVzZVF1YXRlcm5pb24gaGFzIGJlZW4gcmVtb3ZlZC4gVGhlIGxpYnJhcnkgbm93IHVzZXMgcXVhdGVybmlvbnMgYnkgZGVmYXVsdC5cIil9LHNldCB1c2VRdWF0ZXJuaW9uKGEpe2NvbnNvbGUud2FybihcIkRFUFJFQ0FURUQ6IE9iamVjdDNEJ3MgLnVzZVF1YXRlcm5pb24gaGFzIGJlZW4gcmVtb3ZlZC4gVGhlIGxpYnJhcnkgbm93IHVzZXMgcXVhdGVybmlvbnMgYnkgZGVmYXVsdC5cIil9LGFwcGx5TWF0cml4OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLk1hdHJpeDQ7cmV0dXJuIGZ1bmN0aW9uKGIpe3RoaXMubWF0cml4Lm11bHRpcGx5TWF0cmljZXMoYixcbnRoaXMubWF0cml4KTt0aGlzLnBvc2l0aW9uLnNldEZyb21NYXRyaXhQb3NpdGlvbih0aGlzLm1hdHJpeCk7dGhpcy5zY2FsZS5zZXRGcm9tTWF0cml4U2NhbGUodGhpcy5tYXRyaXgpO2EuZXh0cmFjdFJvdGF0aW9uKHRoaXMubWF0cml4KTt0aGlzLnF1YXRlcm5pb24uc2V0RnJvbVJvdGF0aW9uTWF0cml4KGEpfX0oKSxzZXRSb3RhdGlvbkZyb21BeGlzQW5nbGU6ZnVuY3Rpb24oYSxiKXt0aGlzLnF1YXRlcm5pb24uc2V0RnJvbUF4aXNBbmdsZShhLGIpfSxzZXRSb3RhdGlvbkZyb21FdWxlcjpmdW5jdGlvbihhKXt0aGlzLnF1YXRlcm5pb24uc2V0RnJvbUV1bGVyKGEsITApfSxzZXRSb3RhdGlvbkZyb21NYXRyaXg6ZnVuY3Rpb24oYSl7dGhpcy5xdWF0ZXJuaW9uLnNldEZyb21Sb3RhdGlvbk1hdHJpeChhKX0sc2V0Um90YXRpb25Gcm9tUXVhdGVybmlvbjpmdW5jdGlvbihhKXt0aGlzLnF1YXRlcm5pb24uY29weShhKX0scm90YXRlT25BeGlzOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlF1YXRlcm5pb247XG5yZXR1cm4gZnVuY3Rpb24oYixjKXthLnNldEZyb21BeGlzQW5nbGUoYixjKTt0aGlzLnF1YXRlcm5pb24ubXVsdGlwbHkoYSk7cmV0dXJuIHRoaXN9fSgpLHJvdGF0ZVg6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMygxLDAsMCk7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLnJvdGF0ZU9uQXhpcyhhLGIpfX0oKSxyb3RhdGVZOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjMoMCwxLDApO3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gdGhpcy5yb3RhdGVPbkF4aXMoYSxiKX19KCkscm90YXRlWjpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzKDAsMCwxKTtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMucm90YXRlT25BeGlzKGEsYil9fSgpLHRyYW5zbGF0ZU9uQXhpczpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihiLGMpe2EuY29weShiKTthLmFwcGx5UXVhdGVybmlvbih0aGlzLnF1YXRlcm5pb24pO1xudGhpcy5wb3NpdGlvbi5hZGQoYS5tdWx0aXBseVNjYWxhcihjKSk7cmV0dXJuIHRoaXN9fSgpLHRyYW5zbGF0ZTpmdW5jdGlvbihhLGIpe2NvbnNvbGUud2FybihcIkRFUFJFQ0FURUQ6IE9iamVjdDNEJ3MgLnRyYW5zbGF0ZSgpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSAudHJhbnNsYXRlT25BeGlzKCBheGlzLCBkaXN0YW5jZSApIGluc3RlYWQuIE5vdGUgYXJncyBoYXZlIGJlZW4gY2hhbmdlZC5cIik7cmV0dXJuIHRoaXMudHJhbnNsYXRlT25BeGlzKGIsYSl9LHRyYW5zbGF0ZVg6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMygxLDAsMCk7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLnRyYW5zbGF0ZU9uQXhpcyhhLGIpfX0oKSx0cmFuc2xhdGVZOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjMoMCwxLDApO3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gdGhpcy50cmFuc2xhdGVPbkF4aXMoYSxiKX19KCksdHJhbnNsYXRlWjpmdW5jdGlvbigpe3ZhciBhPVxubmV3IFRIUkVFLlZlY3RvcjMoMCwwLDEpO3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gdGhpcy50cmFuc2xhdGVPbkF4aXMoYSxiKX19KCksbG9jYWxUb1dvcmxkOmZ1bmN0aW9uKGEpe3JldHVybiBhLmFwcGx5TWF0cml4NCh0aGlzLm1hdHJpeFdvcmxkKX0sd29ybGRUb0xvY2FsOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLk1hdHJpeDQ7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBiLmFwcGx5TWF0cml4NChhLmdldEludmVyc2UodGhpcy5tYXRyaXhXb3JsZCkpfX0oKSxsb29rQXQ6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuTWF0cml4NDtyZXR1cm4gZnVuY3Rpb24oYil7YS5sb29rQXQoYix0aGlzLnBvc2l0aW9uLHRoaXMudXApO3RoaXMucXVhdGVybmlvbi5zZXRGcm9tUm90YXRpb25NYXRyaXgoYSl9fSgpLGFkZDpmdW5jdGlvbihhKXtpZihhPT09dGhpcyljb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3QzRC5hZGQ6IEFuIG9iamVjdCBjYW4ndCBiZSBhZGRlZCBhcyBhIGNoaWxkIG9mIGl0c2VsZi5cIik7XG5lbHNlIGlmKGEgaW5zdGFuY2VvZiBUSFJFRS5PYmplY3QzRCl7dm9pZCAwIT09YS5wYXJlbnQmJmEucGFyZW50LnJlbW92ZShhKTthLnBhcmVudD10aGlzO2EuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImFkZGVkXCJ9KTt0aGlzLmNoaWxkcmVuLnB1c2goYSk7Zm9yKHZhciBiPXRoaXM7dm9pZCAwIT09Yi5wYXJlbnQ7KWI9Yi5wYXJlbnQ7dm9pZCAwIT09YiYmYiBpbnN0YW5jZW9mIFRIUkVFLlNjZW5lJiZiLl9fYWRkT2JqZWN0KGEpfX0scmVtb3ZlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY2hpbGRyZW4uaW5kZXhPZihhKTtpZigtMSE9PWIpe2EucGFyZW50PXZvaWQgMDthLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJyZW1vdmVkXCJ9KTt0aGlzLmNoaWxkcmVuLnNwbGljZShiLDEpO2ZvcihiPXRoaXM7dm9pZCAwIT09Yi5wYXJlbnQ7KWI9Yi5wYXJlbnQ7dm9pZCAwIT09YiYmYiBpbnN0YW5jZW9mIFRIUkVFLlNjZW5lJiZiLl9fcmVtb3ZlT2JqZWN0KGEpfX0sdHJhdmVyc2U6ZnVuY3Rpb24oYSl7YSh0aGlzKTtcbmZvcih2YXIgYj0wLGM9dGhpcy5jaGlsZHJlbi5sZW5ndGg7YjxjO2IrKyl0aGlzLmNoaWxkcmVuW2JdLnRyYXZlcnNlKGEpfSxnZXRPYmplY3RCeUlkOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD10aGlzLmNoaWxkcmVuLmxlbmd0aDtjPGQ7YysrKXt2YXIgZT10aGlzLmNoaWxkcmVuW2NdO2lmKGUuaWQ9PT1hfHwhMD09PWImJihlPWUuZ2V0T2JqZWN0QnlJZChhLGIpLHZvaWQgMCE9PWUpKXJldHVybiBlfX0sZ2V0T2JqZWN0QnlOYW1lOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD10aGlzLmNoaWxkcmVuLmxlbmd0aDtjPGQ7YysrKXt2YXIgZT10aGlzLmNoaWxkcmVuW2NdO2lmKGUubmFtZT09PWF8fCEwPT09YiYmKGU9ZS5nZXRPYmplY3RCeU5hbWUoYSxiKSx2b2lkIDAhPT1lKSlyZXR1cm4gZX19LGdldENoaWxkQnlOYW1lOmZ1bmN0aW9uKGEsYil7Y29uc29sZS53YXJuKFwiREVQUkVDQVRFRDogT2JqZWN0M0QncyAuZ2V0Q2hpbGRCeU5hbWUoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5nZXRPYmplY3RCeU5hbWUoKS5cIik7XG5yZXR1cm4gdGhpcy5nZXRPYmplY3RCeU5hbWUoYSxiKX0sZ2V0RGVzY2VuZGFudHM6ZnVuY3Rpb24oYSl7dm9pZCAwPT09YSYmKGE9W10pO0FycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGEsdGhpcy5jaGlsZHJlbik7Zm9yKHZhciBiPTAsYz10aGlzLmNoaWxkcmVuLmxlbmd0aDtiPGM7YisrKXRoaXMuY2hpbGRyZW5bYl0uZ2V0RGVzY2VuZGFudHMoYSk7cmV0dXJuIGF9LHVwZGF0ZU1hdHJpeDpmdW5jdGlvbigpe3RoaXMubWF0cml4LmNvbXBvc2UodGhpcy5wb3NpdGlvbix0aGlzLnF1YXRlcm5pb24sdGhpcy5zY2FsZSk7dGhpcy5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPSEwfSx1cGRhdGVNYXRyaXhXb3JsZDpmdW5jdGlvbihhKXshMD09PXRoaXMubWF0cml4QXV0b1VwZGF0ZSYmdGhpcy51cGRhdGVNYXRyaXgoKTtpZighMD09PXRoaXMubWF0cml4V29ybGROZWVkc1VwZGF0ZXx8ITA9PT1hKXZvaWQgMD09PXRoaXMucGFyZW50P3RoaXMubWF0cml4V29ybGQuY29weSh0aGlzLm1hdHJpeCk6XG50aGlzLm1hdHJpeFdvcmxkLm11bHRpcGx5TWF0cmljZXModGhpcy5wYXJlbnQubWF0cml4V29ybGQsdGhpcy5tYXRyaXgpLHRoaXMubWF0cml4V29ybGROZWVkc1VwZGF0ZT0hMSxhPSEwO2Zvcih2YXIgYj0wLGM9dGhpcy5jaGlsZHJlbi5sZW5ndGg7YjxjO2IrKyl0aGlzLmNoaWxkcmVuW2JdLnVwZGF0ZU1hdHJpeFdvcmxkKGEpfSxjbG9uZTpmdW5jdGlvbihhLGIpe3ZvaWQgMD09PWEmJihhPW5ldyBUSFJFRS5PYmplY3QzRCk7dm9pZCAwPT09YiYmKGI9ITApO2EubmFtZT10aGlzLm5hbWU7YS51cC5jb3B5KHRoaXMudXApO2EucG9zaXRpb24uY29weSh0aGlzLnBvc2l0aW9uKTthLnF1YXRlcm5pb24uY29weSh0aGlzLnF1YXRlcm5pb24pO2Euc2NhbGUuY29weSh0aGlzLnNjYWxlKTthLnJlbmRlckRlcHRoPXRoaXMucmVuZGVyRGVwdGg7YS5yb3RhdGlvbkF1dG9VcGRhdGU9dGhpcy5yb3RhdGlvbkF1dG9VcGRhdGU7YS5tYXRyaXguY29weSh0aGlzLm1hdHJpeCk7YS5tYXRyaXhXb3JsZC5jb3B5KHRoaXMubWF0cml4V29ybGQpO1xuYS5tYXRyaXhBdXRvVXBkYXRlPXRoaXMubWF0cml4QXV0b1VwZGF0ZTthLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9dGhpcy5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlO2EudmlzaWJsZT10aGlzLnZpc2libGU7YS5jYXN0U2hhZG93PXRoaXMuY2FzdFNoYWRvdzthLnJlY2VpdmVTaGFkb3c9dGhpcy5yZWNlaXZlU2hhZG93O2EuZnJ1c3R1bUN1bGxlZD10aGlzLmZydXN0dW1DdWxsZWQ7YS51c2VyRGF0YT1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMudXNlckRhdGEpKTtpZighMD09PWIpZm9yKHZhciBjPTA7Yzx0aGlzLmNoaWxkcmVuLmxlbmd0aDtjKyspYS5hZGQodGhpcy5jaGlsZHJlbltjXS5jbG9uZSgpKTtyZXR1cm4gYX19O1RIUkVFLkV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUuYXBwbHkoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlKTtUSFJFRS5PYmplY3QzRElkQ291bnQ9MDtUSFJFRS5Qcm9qZWN0b3I9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7aWYoaT09PW0pe3ZhciBhPW5ldyBUSFJFRS5SZW5kZXJhYmxlVmVydGV4O2sucHVzaChhKTttKys7aSsrO3JldHVybiBhfXJldHVybiBrW2krK119ZnVuY3Rpb24gYihhLGIpe3JldHVybiBhLnohPT1iLno/Yi56LWEuejphLmlkIT09Yi5pZD9hLmlkLWIuaWQ6MH1mdW5jdGlvbiBjKGEsYil7dmFyIGM9MCxkPTEsZT1hLnorYS53LGY9Yi56K2IudyxoPS1hLnorYS53LGc9LWIueitiLnc7aWYoMDw9ZSYmMDw9ZiYmMDw9aCYmMDw9ZylyZXR1cm4hMDtpZigwPmUmJjA+Znx8MD5oJiYwPmcpcmV0dXJuITE7MD5lP2M9TWF0aC5tYXgoYyxlLyhlLWYpKTowPmYmJihkPU1hdGgubWluKGQsZS8oZS1mKSkpOzA+aD9jPU1hdGgubWF4KGMsaC8oaC1nKSk6MD5nJiYoZD1NYXRoLm1pbihkLGgvKGgtZykpKTtpZihkPGMpcmV0dXJuITE7YS5sZXJwKGIsYyk7Yi5sZXJwKGEsMS1kKTtyZXR1cm4hMH12YXIgZCxlLGY9W10saD1cbjAsZyxpLGs9W10sbT0wLGwscCx0PVtdLHM9MCxxLG4sdT1bXSxyPTAsdix6LEc9W10sdz0wLHk9e29iamVjdHM6W10sc3ByaXRlczpbXSxsaWdodHM6W10sZWxlbWVudHM6W119LEU9bmV3IFRIUkVFLlZlY3RvcjMsQT1uZXcgVEhSRUUuVmVjdG9yNCxLPW5ldyBUSFJFRS5Cb3gzKG5ldyBUSFJFRS5WZWN0b3IzKC0xLC0xLC0xKSxuZXcgVEhSRUUuVmVjdG9yMygxLDEsMSkpLEQ9bmV3IFRIUkVFLkJveDMsRj1BcnJheSgzKSxPPW5ldyBUSFJFRS5NYXRyaXg0LHg9bmV3IFRIUkVFLk1hdHJpeDQsSSxCPW5ldyBUSFJFRS5NYXRyaXg0LE09bmV3IFRIUkVFLk1hdHJpeDMsSj1uZXcgVEhSRUUuTWF0cml4MyxjYT1uZXcgVEhSRUUuVmVjdG9yMyxuYT1uZXcgVEhSRUUuRnJ1c3R1bSxwYT1uZXcgVEhSRUUuVmVjdG9yNCxDPW5ldyBUSFJFRS5WZWN0b3I0O3RoaXMucHJvamVjdFZlY3Rvcj1mdW5jdGlvbihhLGIpe2IubWF0cml4V29ybGRJbnZlcnNlLmdldEludmVyc2UoYi5tYXRyaXhXb3JsZCk7XG54Lm11bHRpcGx5TWF0cmljZXMoYi5wcm9qZWN0aW9uTWF0cml4LGIubWF0cml4V29ybGRJbnZlcnNlKTtyZXR1cm4gYS5hcHBseVByb2plY3Rpb24oeCl9O3RoaXMudW5wcm9qZWN0VmVjdG9yPWZ1bmN0aW9uKGEsYil7Yi5wcm9qZWN0aW9uTWF0cml4SW52ZXJzZS5nZXRJbnZlcnNlKGIucHJvamVjdGlvbk1hdHJpeCk7eC5tdWx0aXBseU1hdHJpY2VzKGIubWF0cml4V29ybGQsYi5wcm9qZWN0aW9uTWF0cml4SW52ZXJzZSk7cmV0dXJuIGEuYXBwbHlQcm9qZWN0aW9uKHgpfTt0aGlzLnBpY2tpbmdSYXk9ZnVuY3Rpb24oYSxiKXthLno9LTE7dmFyIGM9bmV3IFRIUkVFLlZlY3RvcjMoYS54LGEueSwxKTt0aGlzLnVucHJvamVjdFZlY3RvcihhLGIpO3RoaXMudW5wcm9qZWN0VmVjdG9yKGMsYik7Yy5zdWIoYSkubm9ybWFsaXplKCk7cmV0dXJuIG5ldyBUSFJFRS5SYXljYXN0ZXIoYSxjKX07dmFyIFE9ZnVuY3Rpb24oYSl7aWYoZT09PWgpe3ZhciBiPW5ldyBUSFJFRS5SZW5kZXJhYmxlT2JqZWN0O1xuZi5wdXNoKGIpO2grKztlKys7ZD1ifWVsc2UgZD1mW2UrK107ZC5pZD1hLmlkO2Qub2JqZWN0PWE7bnVsbCE9PWEucmVuZGVyRGVwdGg/ZC56PWEucmVuZGVyRGVwdGg6KEUuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGEubWF0cml4V29ybGQpLEUuYXBwbHlQcm9qZWN0aW9uKHgpLGQuej1FLnopO3JldHVybiBkfSxSPWZ1bmN0aW9uKGEpe2lmKCExIT09YS52aXNpYmxlKXthIGluc3RhbmNlb2YgVEhSRUUuTGlnaHQ/eS5saWdodHMucHVzaChhKTphIGluc3RhbmNlb2YgVEhSRUUuTWVzaHx8YSBpbnN0YW5jZW9mIFRIUkVFLkxpbmU/KCExPT09YS5mcnVzdHVtQ3VsbGVkfHwhMD09PW5hLmludGVyc2VjdHNPYmplY3QoYSkpJiZ5Lm9iamVjdHMucHVzaChRKGEpKTphIGluc3RhbmNlb2YgVEhSRUUuU3ByaXRlJiZ5LnNwcml0ZXMucHVzaChRKGEpKTtmb3IodmFyIGI9MCxjPWEuY2hpbGRyZW4ubGVuZ3RoO2I8YztiKyspUihhLmNoaWxkcmVuW2JdKX19O3RoaXMucHJvamVjdFNjZW5lPWZ1bmN0aW9uKGQsXG5mLGgsbSl7dmFyIEU9ITEsUSwkLGVhLFYsUCxZLFUsamEsc2EsaGEsS2EsR2E7ej1uPXA9MDt5LmVsZW1lbnRzLmxlbmd0aD0wOyEwPT09ZC5hdXRvVXBkYXRlJiZkLnVwZGF0ZU1hdHJpeFdvcmxkKCk7dm9pZCAwPT09Zi5wYXJlbnQmJmYudXBkYXRlTWF0cml4V29ybGQoKTtPLmNvcHkoZi5tYXRyaXhXb3JsZEludmVyc2UuZ2V0SW52ZXJzZShmLm1hdHJpeFdvcmxkKSk7eC5tdWx0aXBseU1hdHJpY2VzKGYucHJvamVjdGlvbk1hdHJpeCxPKTtKLmdldE5vcm1hbE1hdHJpeChPKTtuYS5zZXRGcm9tTWF0cml4KHgpO2U9MDt5Lm9iamVjdHMubGVuZ3RoPTA7eS5zcHJpdGVzLmxlbmd0aD0wO3kubGlnaHRzLmxlbmd0aD0wO1IoZCk7ITA9PT1oJiZ5Lm9iamVjdHMuc29ydChiKTtkPTA7Zm9yKGg9eS5vYmplY3RzLmxlbmd0aDtkPGg7ZCsrKWlmKFU9eS5vYmplY3RzW2RdLm9iamVjdCxJPVUubWF0cml4V29ybGQsaT0wLFUgaW5zdGFuY2VvZiBUSFJFRS5NZXNoKXtqYT1VLmdlb21ldHJ5O1xuZWE9amEudmVydGljZXM7c2E9amEuZmFjZXM7amE9amEuZmFjZVZlcnRleFV2cztNLmdldE5vcm1hbE1hdHJpeChJKTtLYT1VLm1hdGVyaWFsIGluc3RhbmNlb2YgVEhSRUUuTWVzaEZhY2VNYXRlcmlhbDtHYT0hMD09PUthP1UubWF0ZXJpYWw6bnVsbDtRPTA7Zm9yKCQ9ZWEubGVuZ3RoO1E8JDtRKyspe2c9YSgpO2cucG9zaXRpb25Xb3JsZC5jb3B5KGVhW1FdKS5hcHBseU1hdHJpeDQoSSk7Zy5wb3NpdGlvblNjcmVlbi5jb3B5KGcucG9zaXRpb25Xb3JsZCkuYXBwbHlNYXRyaXg0KHgpO3ZhciBrYT0xL2cucG9zaXRpb25TY3JlZW4udztnLnBvc2l0aW9uU2NyZWVuLngqPWthO2cucG9zaXRpb25TY3JlZW4ueSo9a2E7Zy5wb3NpdGlvblNjcmVlbi56Kj1rYTtnLnZpc2libGU9ISgtMT5nLnBvc2l0aW9uU2NyZWVuLnh8fDE8Zy5wb3NpdGlvblNjcmVlbi54fHwtMT5nLnBvc2l0aW9uU2NyZWVuLnl8fDE8Zy5wb3NpdGlvblNjcmVlbi55fHwtMT5nLnBvc2l0aW9uU2NyZWVuLnp8fDE8XG5nLnBvc2l0aW9uU2NyZWVuLnopfWVhPTA7Zm9yKFE9c2EubGVuZ3RoO2VhPFE7ZWErKylpZigkPXNhW2VhXSxrYT0hMD09PUthP0dhLm1hdGVyaWFsc1skLm1hdGVyaWFsSW5kZXhdOlUubWF0ZXJpYWwsdm9pZCAwIT09a2EmJihZPWthLnNpZGUsVj1rWyQuYV0sUD1rWyQuYl0saGE9a1skLmNdLEZbMF09Vi5wb3NpdGlvblNjcmVlbixGWzFdPVAucG9zaXRpb25TY3JlZW4sRlsyXT1oYS5wb3NpdGlvblNjcmVlbiwhMD09PVYudmlzaWJsZXx8ITA9PT1QLnZpc2libGV8fCEwPT09aGEudmlzaWJsZXx8Sy5pc0ludGVyc2VjdGlvbkJveChELnNldEZyb21Qb2ludHMoRikpKSlpZihFPTA+KGhhLnBvc2l0aW9uU2NyZWVuLngtVi5wb3NpdGlvblNjcmVlbi54KSooUC5wb3NpdGlvblNjcmVlbi55LVYucG9zaXRpb25TY3JlZW4ueSktKGhhLnBvc2l0aW9uU2NyZWVuLnktVi5wb3NpdGlvblNjcmVlbi55KSooUC5wb3NpdGlvblNjcmVlbi54LVYucG9zaXRpb25TY3JlZW4ueCksWT09PVRIUkVFLkRvdWJsZVNpZGV8fFxuRT09PShZPT09VEhSRUUuRnJvbnRTaWRlKSl7aWYocD09PXMpe3ZhciBEYT1uZXcgVEhSRUUuUmVuZGVyYWJsZUZhY2UzO3QucHVzaChEYSk7cysrO3ArKztsPURhfWVsc2UgbD10W3ArK107bC5pZD1VLmlkO2wudjEuY29weShWKTtsLnYyLmNvcHkoUCk7bC52My5jb3B5KGhhKTtsLm5vcm1hbE1vZGVsLmNvcHkoJC5ub3JtYWwpOyExPT09RSYmKFk9PT1USFJFRS5CYWNrU2lkZXx8WT09PVRIUkVFLkRvdWJsZVNpZGUpJiZsLm5vcm1hbE1vZGVsLm5lZ2F0ZSgpO2wubm9ybWFsTW9kZWwuYXBwbHlNYXRyaXgzKE0pLm5vcm1hbGl6ZSgpO2wubm9ybWFsTW9kZWxWaWV3LmNvcHkobC5ub3JtYWxNb2RlbCkuYXBwbHlNYXRyaXgzKEopO2wuY2VudHJvaWRNb2RlbC5jb3B5KCQuY2VudHJvaWQpLmFwcGx5TWF0cml4NChJKTtoYT0kLnZlcnRleE5vcm1hbHM7Vj0wO2ZvcihQPU1hdGgubWluKGhhLmxlbmd0aCwzKTtWPFA7VisrKURhPWwudmVydGV4Tm9ybWFsc01vZGVsW1ZdLERhLmNvcHkoaGFbVl0pLFxuITE9PT1FJiYoWT09PVRIUkVFLkJhY2tTaWRlfHxZPT09VEhSRUUuRG91YmxlU2lkZSkmJkRhLm5lZ2F0ZSgpLERhLmFwcGx5TWF0cml4MyhNKS5ub3JtYWxpemUoKSxsLnZlcnRleE5vcm1hbHNNb2RlbFZpZXdbVl0uY29weShEYSkuYXBwbHlNYXRyaXgzKEopO2wudmVydGV4Tm9ybWFsc0xlbmd0aD1oYS5sZW5ndGg7RT0wO2ZvcihWPU1hdGgubWluKGphLmxlbmd0aCwzKTtFPFY7RSsrKWlmKGhhPWphW0VdW2VhXSx2b2lkIDAhPT1oYSl7UD0wO2ZvcihZPWhhLmxlbmd0aDtQPFk7UCsrKWwudXZzW0VdW1BdPWhhW1BdfWwuY29sb3I9JC5jb2xvcjtsLm1hdGVyaWFsPWthO2NhLmNvcHkobC5jZW50cm9pZE1vZGVsKS5hcHBseVByb2plY3Rpb24oeCk7bC56PWNhLno7eS5lbGVtZW50cy5wdXNoKGwpfX1lbHNlIGlmKFUgaW5zdGFuY2VvZiBUSFJFRS5MaW5lKXtCLm11bHRpcGx5TWF0cmljZXMoeCxJKTtlYT1VLmdlb21ldHJ5LnZlcnRpY2VzO1Y9YSgpO1YucG9zaXRpb25TY3JlZW4uY29weShlYVswXSkuYXBwbHlNYXRyaXg0KEIpO1xuc2E9VS50eXBlPT09VEhSRUUuTGluZVBpZWNlcz8yOjE7UT0xO2ZvcigkPWVhLmxlbmd0aDtRPCQ7USsrKVY9YSgpLFYucG9zaXRpb25TY3JlZW4uY29weShlYVtRXSkuYXBwbHlNYXRyaXg0KEIpLDA8KFErMSklc2F8fChQPWtbaS0yXSxwYS5jb3B5KFYucG9zaXRpb25TY3JlZW4pLEMuY29weShQLnBvc2l0aW9uU2NyZWVuKSwhMD09PWMocGEsQykmJihwYS5tdWx0aXBseVNjYWxhcigxL3BhLncpLEMubXVsdGlwbHlTY2FsYXIoMS9DLncpLG49PT1yPyhqYT1uZXcgVEhSRUUuUmVuZGVyYWJsZUxpbmUsdS5wdXNoKGphKSxyKyssbisrLHE9amEpOnE9dVtuKytdLHEuaWQ9VS5pZCxxLnYxLnBvc2l0aW9uU2NyZWVuLmNvcHkocGEpLHEudjIucG9zaXRpb25TY3JlZW4uY29weShDKSxxLno9TWF0aC5tYXgocGEueixDLnopLHEubWF0ZXJpYWw9VS5tYXRlcmlhbCxVLm1hdGVyaWFsLnZlcnRleENvbG9ycz09PVRIUkVFLlZlcnRleENvbG9ycyYmKHEudmVydGV4Q29sb3JzWzBdLmNvcHkoVS5nZW9tZXRyeS5jb2xvcnNbUV0pLFxucS52ZXJ0ZXhDb2xvcnNbMV0uY29weShVLmdlb21ldHJ5LmNvbG9yc1tRLTFdKSkseS5lbGVtZW50cy5wdXNoKHEpKSl9ZD0wO2ZvcihoPXkuc3ByaXRlcy5sZW5ndGg7ZDxoO2QrKylVPXkuc3ByaXRlc1tkXS5vYmplY3QsST1VLm1hdHJpeFdvcmxkLEEuc2V0KEkuZWxlbWVudHNbMTJdLEkuZWxlbWVudHNbMTNdLEkuZWxlbWVudHNbMTRdLDEpLEEuYXBwbHlNYXRyaXg0KHgpLGthPTEvQS53LEEueio9a2EsLTE8PUEueiYmMT49QS56JiYoej09PXc/KHNhPW5ldyBUSFJFRS5SZW5kZXJhYmxlU3ByaXRlLEcucHVzaChzYSksdysrLHorKyx2PXNhKTp2PUdbeisrXSx2LmlkPVUuaWQsdi54PUEueCprYSx2Lnk9QS55KmthLHYuej1BLnosdi5vYmplY3Q9VSx2LnJvdGF0aW9uPVUucm90YXRpb24sdi5zY2FsZS54PVUuc2NhbGUueCpNYXRoLmFicyh2LngtKEEueCtmLnByb2plY3Rpb25NYXRyaXguZWxlbWVudHNbMF0pLyhBLncrZi5wcm9qZWN0aW9uTWF0cml4LmVsZW1lbnRzWzEyXSkpLFxudi5zY2FsZS55PVUuc2NhbGUueSpNYXRoLmFicyh2LnktKEEueStmLnByb2plY3Rpb25NYXRyaXguZWxlbWVudHNbNV0pLyhBLncrZi5wcm9qZWN0aW9uTWF0cml4LmVsZW1lbnRzWzEzXSkpLHYubWF0ZXJpYWw9VS5tYXRlcmlhbCx5LmVsZW1lbnRzLnB1c2godikpOyEwPT09bSYmeS5lbGVtZW50cy5zb3J0KGIpO3JldHVybiB5fX07VEhSRUUuRmFjZTM9ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3RoaXMuYT1hO3RoaXMuYj1iO3RoaXMuYz1jO3RoaXMubm9ybWFsPWQgaW5zdGFuY2VvZiBUSFJFRS5WZWN0b3IzP2Q6bmV3IFRIUkVFLlZlY3RvcjM7dGhpcy52ZXJ0ZXhOb3JtYWxzPWQgaW5zdGFuY2VvZiBBcnJheT9kOltdO3RoaXMuY29sb3I9ZSBpbnN0YW5jZW9mIFRIUkVFLkNvbG9yP2U6bmV3IFRIUkVFLkNvbG9yO3RoaXMudmVydGV4Q29sb3JzPWUgaW5zdGFuY2VvZiBBcnJheT9lOltdO3RoaXMudmVydGV4VGFuZ2VudHM9W107dGhpcy5tYXRlcmlhbEluZGV4PXZvaWQgMCE9PWY/ZjowO3RoaXMuY2VudHJvaWQ9bmV3IFRIUkVFLlZlY3RvcjN9O1xuVEhSRUUuRmFjZTMucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5GYWNlMyxjbG9uZTpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5GYWNlMyh0aGlzLmEsdGhpcy5iLHRoaXMuYyk7YS5ub3JtYWwuY29weSh0aGlzLm5vcm1hbCk7YS5jb2xvci5jb3B5KHRoaXMuY29sb3IpO2EuY2VudHJvaWQuY29weSh0aGlzLmNlbnRyb2lkKTthLm1hdGVyaWFsSW5kZXg9dGhpcy5tYXRlcmlhbEluZGV4O3ZhciBiLGM7Yj0wO2ZvcihjPXRoaXMudmVydGV4Tm9ybWFscy5sZW5ndGg7YjxjO2IrKylhLnZlcnRleE5vcm1hbHNbYl09dGhpcy52ZXJ0ZXhOb3JtYWxzW2JdLmNsb25lKCk7Yj0wO2ZvcihjPXRoaXMudmVydGV4Q29sb3JzLmxlbmd0aDtiPGM7YisrKWEudmVydGV4Q29sb3JzW2JdPXRoaXMudmVydGV4Q29sb3JzW2JdLmNsb25lKCk7Yj0wO2ZvcihjPXRoaXMudmVydGV4VGFuZ2VudHMubGVuZ3RoO2I8YztiKyspYS52ZXJ0ZXhUYW5nZW50c1tiXT10aGlzLnZlcnRleFRhbmdlbnRzW2JdLmNsb25lKCk7XG5yZXR1cm4gYX19O1RIUkVFLkZhY2U0PWZ1bmN0aW9uKGEsYixjLGQsZSxmLGgpe2NvbnNvbGUud2FybihcIlRIUkVFLkZhY2U0IGhhcyBiZWVuIHJlbW92ZWQuIEEgVEhSRUUuRmFjZTMgd2lsbCBiZSBjcmVhdGVkIGluc3RlYWQuXCIpO3JldHVybiBuZXcgVEhSRUUuRmFjZTMoYSxiLGMsZSxmLGgpfTtUSFJFRS5HZW9tZXRyeT1mdW5jdGlvbigpe3RoaXMuaWQ9VEhSRUUuR2VvbWV0cnlJZENvdW50Kys7dGhpcy51dWlkPVRIUkVFLk1hdGguZ2VuZXJhdGVVVUlEKCk7dGhpcy5uYW1lPVwiXCI7dGhpcy52ZXJ0aWNlcz1bXTt0aGlzLmNvbG9ycz1bXTt0aGlzLmZhY2VzPVtdO3RoaXMuZmFjZVZlcnRleFV2cz1bW11dO3RoaXMubW9ycGhUYXJnZXRzPVtdO3RoaXMubW9ycGhDb2xvcnM9W107dGhpcy5tb3JwaE5vcm1hbHM9W107dGhpcy5za2luV2VpZ2h0cz1bXTt0aGlzLnNraW5JbmRpY2VzPVtdO3RoaXMubGluZURpc3RhbmNlcz1bXTt0aGlzLmJvdW5kaW5nU3BoZXJlPXRoaXMuYm91bmRpbmdCb3g9bnVsbDt0aGlzLmhhc1RhbmdlbnRzPSExO3RoaXMuZHluYW1pYz0hMDt0aGlzLmJ1ZmZlcnNOZWVkVXBkYXRlPXRoaXMubGluZURpc3RhbmNlc05lZWRVcGRhdGU9dGhpcy5jb2xvcnNOZWVkVXBkYXRlPXRoaXMudGFuZ2VudHNOZWVkVXBkYXRlPXRoaXMubm9ybWFsc05lZWRVcGRhdGU9dGhpcy51dnNOZWVkVXBkYXRlPVxudGhpcy5lbGVtZW50c05lZWRVcGRhdGU9dGhpcy52ZXJ0aWNlc05lZWRVcGRhdGU9ITF9O1xuVEhSRUUuR2VvbWV0cnkucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5HZW9tZXRyeSxhcHBseU1hdHJpeDpmdW5jdGlvbihhKXtmb3IodmFyIGI9KG5ldyBUSFJFRS5NYXRyaXgzKS5nZXROb3JtYWxNYXRyaXgoYSksYz0wLGQ9dGhpcy52ZXJ0aWNlcy5sZW5ndGg7YzxkO2MrKyl0aGlzLnZlcnRpY2VzW2NdLmFwcGx5TWF0cml4NChhKTtjPTA7Zm9yKGQ9dGhpcy5mYWNlcy5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9dGhpcy5mYWNlc1tjXTtlLm5vcm1hbC5hcHBseU1hdHJpeDMoYikubm9ybWFsaXplKCk7Zm9yKHZhciBmPTAsaD1lLnZlcnRleE5vcm1hbHMubGVuZ3RoO2Y8aDtmKyspZS52ZXJ0ZXhOb3JtYWxzW2ZdLmFwcGx5TWF0cml4MyhiKS5ub3JtYWxpemUoKTtlLmNlbnRyb2lkLmFwcGx5TWF0cml4NChhKX10aGlzLmJvdW5kaW5nQm94IGluc3RhbmNlb2YgVEhSRUUuQm94MyYmdGhpcy5jb21wdXRlQm91bmRpbmdCb3goKTt0aGlzLmJvdW5kaW5nU3BoZXJlIGluc3RhbmNlb2ZcblRIUkVFLlNwaGVyZSYmdGhpcy5jb21wdXRlQm91bmRpbmdTcGhlcmUoKX0sY29tcHV0ZUNlbnRyb2lkczpmdW5jdGlvbigpe3ZhciBhLGIsYzthPTA7Zm9yKGI9dGhpcy5mYWNlcy5sZW5ndGg7YTxiO2ErKyljPXRoaXMuZmFjZXNbYV0sYy5jZW50cm9pZC5zZXQoMCwwLDApLGMuY2VudHJvaWQuYWRkKHRoaXMudmVydGljZXNbYy5hXSksYy5jZW50cm9pZC5hZGQodGhpcy52ZXJ0aWNlc1tjLmJdKSxjLmNlbnRyb2lkLmFkZCh0aGlzLnZlcnRpY2VzW2MuY10pLGMuY2VudHJvaWQuZGl2aWRlU2NhbGFyKDMpfSxjb21wdXRlRmFjZU5vcm1hbHM6ZnVuY3Rpb24oKXtmb3IodmFyIGE9bmV3IFRIUkVFLlZlY3RvcjMsYj1uZXcgVEhSRUUuVmVjdG9yMyxjPTAsZD10aGlzLmZhY2VzLmxlbmd0aDtjPGQ7YysrKXt2YXIgZT10aGlzLmZhY2VzW2NdLGY9dGhpcy52ZXJ0aWNlc1tlLmFdLGg9dGhpcy52ZXJ0aWNlc1tlLmJdO2Euc3ViVmVjdG9ycyh0aGlzLnZlcnRpY2VzW2UuY10saCk7Yi5zdWJWZWN0b3JzKGYsXG5oKTthLmNyb3NzKGIpO2Eubm9ybWFsaXplKCk7ZS5ub3JtYWwuY29weShhKX19LGNvbXB1dGVWZXJ0ZXhOb3JtYWxzOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlO2lmKHZvaWQgMD09PXRoaXMuX190bXBWZXJ0aWNlcyl7ZT10aGlzLl9fdG1wVmVydGljZXM9QXJyYXkodGhpcy52ZXJ0aWNlcy5sZW5ndGgpO2I9MDtmb3IoYz10aGlzLnZlcnRpY2VzLmxlbmd0aDtiPGM7YisrKWVbYl09bmV3IFRIUkVFLlZlY3RvcjM7Yj0wO2ZvcihjPXRoaXMuZmFjZXMubGVuZ3RoO2I8YztiKyspZD10aGlzLmZhY2VzW2JdLGQudmVydGV4Tm9ybWFscz1bbmV3IFRIUkVFLlZlY3RvcjMsbmV3IFRIUkVFLlZlY3RvcjMsbmV3IFRIUkVFLlZlY3RvcjNdfWVsc2V7ZT10aGlzLl9fdG1wVmVydGljZXM7Yj0wO2ZvcihjPXRoaXMudmVydGljZXMubGVuZ3RoO2I8YztiKyspZVtiXS5zZXQoMCwwLDApfWlmKGEpe3ZhciBmLGgsZz1uZXcgVEhSRUUuVmVjdG9yMyxpPW5ldyBUSFJFRS5WZWN0b3IzO25ldyBUSFJFRS5WZWN0b3IzO1xubmV3IFRIUkVFLlZlY3RvcjM7bmV3IFRIUkVFLlZlY3RvcjM7Yj0wO2ZvcihjPXRoaXMuZmFjZXMubGVuZ3RoO2I8YztiKyspZD10aGlzLmZhY2VzW2JdLGE9dGhpcy52ZXJ0aWNlc1tkLmFdLGY9dGhpcy52ZXJ0aWNlc1tkLmJdLGg9dGhpcy52ZXJ0aWNlc1tkLmNdLGcuc3ViVmVjdG9ycyhoLGYpLGkuc3ViVmVjdG9ycyhhLGYpLGcuY3Jvc3MoaSksZVtkLmFdLmFkZChnKSxlW2QuYl0uYWRkKGcpLGVbZC5jXS5hZGQoZyl9ZWxzZXtiPTA7Zm9yKGM9dGhpcy5mYWNlcy5sZW5ndGg7YjxjO2IrKylkPXRoaXMuZmFjZXNbYl0sZVtkLmFdLmFkZChkLm5vcm1hbCksZVtkLmJdLmFkZChkLm5vcm1hbCksZVtkLmNdLmFkZChkLm5vcm1hbCl9Yj0wO2ZvcihjPXRoaXMudmVydGljZXMubGVuZ3RoO2I8YztiKyspZVtiXS5ub3JtYWxpemUoKTtiPTA7Zm9yKGM9dGhpcy5mYWNlcy5sZW5ndGg7YjxjO2IrKylkPXRoaXMuZmFjZXNbYl0sZC52ZXJ0ZXhOb3JtYWxzWzBdLmNvcHkoZVtkLmFdKSxkLnZlcnRleE5vcm1hbHNbMV0uY29weShlW2QuYl0pLFxuZC52ZXJ0ZXhOb3JtYWxzWzJdLmNvcHkoZVtkLmNdKX0sY29tcHV0ZU1vcnBoTm9ybWFsczpmdW5jdGlvbigpe3ZhciBhLGIsYyxkLGU7Yz0wO2ZvcihkPXRoaXMuZmFjZXMubGVuZ3RoO2M8ZDtjKyspe2U9dGhpcy5mYWNlc1tjXTtlLl9fb3JpZ2luYWxGYWNlTm9ybWFsP2UuX19vcmlnaW5hbEZhY2VOb3JtYWwuY29weShlLm5vcm1hbCk6ZS5fX29yaWdpbmFsRmFjZU5vcm1hbD1lLm5vcm1hbC5jbG9uZSgpO2UuX19vcmlnaW5hbFZlcnRleE5vcm1hbHN8fChlLl9fb3JpZ2luYWxWZXJ0ZXhOb3JtYWxzPVtdKTthPTA7Zm9yKGI9ZS52ZXJ0ZXhOb3JtYWxzLmxlbmd0aDthPGI7YSsrKWUuX19vcmlnaW5hbFZlcnRleE5vcm1hbHNbYV0/ZS5fX29yaWdpbmFsVmVydGV4Tm9ybWFsc1thXS5jb3B5KGUudmVydGV4Tm9ybWFsc1thXSk6ZS5fX29yaWdpbmFsVmVydGV4Tm9ybWFsc1thXT1lLnZlcnRleE5vcm1hbHNbYV0uY2xvbmUoKX12YXIgZj1uZXcgVEhSRUUuR2VvbWV0cnk7Zi5mYWNlcz1cbnRoaXMuZmFjZXM7YT0wO2ZvcihiPXRoaXMubW9ycGhUYXJnZXRzLmxlbmd0aDthPGI7YSsrKXtpZighdGhpcy5tb3JwaE5vcm1hbHNbYV0pe3RoaXMubW9ycGhOb3JtYWxzW2FdPXt9O3RoaXMubW9ycGhOb3JtYWxzW2FdLmZhY2VOb3JtYWxzPVtdO3RoaXMubW9ycGhOb3JtYWxzW2FdLnZlcnRleE5vcm1hbHM9W107ZT10aGlzLm1vcnBoTm9ybWFsc1thXS5mYWNlTm9ybWFsczt2YXIgaD10aGlzLm1vcnBoTm9ybWFsc1thXS52ZXJ0ZXhOb3JtYWxzLGcsaTtjPTA7Zm9yKGQ9dGhpcy5mYWNlcy5sZW5ndGg7YzxkO2MrKylnPW5ldyBUSFJFRS5WZWN0b3IzLGk9e2E6bmV3IFRIUkVFLlZlY3RvcjMsYjpuZXcgVEhSRUUuVmVjdG9yMyxjOm5ldyBUSFJFRS5WZWN0b3IzfSxlLnB1c2goZyksaC5wdXNoKGkpfWg9dGhpcy5tb3JwaE5vcm1hbHNbYV07Zi52ZXJ0aWNlcz10aGlzLm1vcnBoVGFyZ2V0c1thXS52ZXJ0aWNlcztmLmNvbXB1dGVGYWNlTm9ybWFscygpO2YuY29tcHV0ZVZlcnRleE5vcm1hbHMoKTtcbmM9MDtmb3IoZD10aGlzLmZhY2VzLmxlbmd0aDtjPGQ7YysrKWU9dGhpcy5mYWNlc1tjXSxnPWguZmFjZU5vcm1hbHNbY10saT1oLnZlcnRleE5vcm1hbHNbY10sZy5jb3B5KGUubm9ybWFsKSxpLmEuY29weShlLnZlcnRleE5vcm1hbHNbMF0pLGkuYi5jb3B5KGUudmVydGV4Tm9ybWFsc1sxXSksaS5jLmNvcHkoZS52ZXJ0ZXhOb3JtYWxzWzJdKX1jPTA7Zm9yKGQ9dGhpcy5mYWNlcy5sZW5ndGg7YzxkO2MrKyllPXRoaXMuZmFjZXNbY10sZS5ub3JtYWw9ZS5fX29yaWdpbmFsRmFjZU5vcm1hbCxlLnZlcnRleE5vcm1hbHM9ZS5fX29yaWdpbmFsVmVydGV4Tm9ybWFsc30sY29tcHV0ZVRhbmdlbnRzOmZ1bmN0aW9uKCl7dmFyIGEsYixjLGQsZSxmLGgsZyxpLGssbSxsLHAsdCxzLHEsbix1PVtdLHI9W107Yz1uZXcgVEhSRUUuVmVjdG9yMzt2YXIgdj1uZXcgVEhSRUUuVmVjdG9yMyx6PW5ldyBUSFJFRS5WZWN0b3IzLEc9bmV3IFRIUkVFLlZlY3RvcjMsdz1uZXcgVEhSRUUuVmVjdG9yMztcbmE9MDtmb3IoYj10aGlzLnZlcnRpY2VzLmxlbmd0aDthPGI7YSsrKXVbYV09bmV3IFRIUkVFLlZlY3RvcjMsclthXT1uZXcgVEhSRUUuVmVjdG9yMzthPTA7Zm9yKGI9dGhpcy5mYWNlcy5sZW5ndGg7YTxiO2ErKyllPXRoaXMuZmFjZXNbYV0sZj10aGlzLmZhY2VWZXJ0ZXhVdnNbMF1bYV0sZD1lLmEsbj1lLmIsZT1lLmMsaD10aGlzLnZlcnRpY2VzW2RdLGc9dGhpcy52ZXJ0aWNlc1tuXSxpPXRoaXMudmVydGljZXNbZV0saz1mWzBdLG09ZlsxXSxsPWZbMl0sZj1nLngtaC54LHA9aS54LWgueCx0PWcueS1oLnkscz1pLnktaC55LGc9Zy56LWgueixoPWkuei1oLnosaT1tLngtay54LHE9bC54LWsueCxtPW0ueS1rLnksaz1sLnktay55LGw9MS8oaSprLXEqbSksYy5zZXQoKGsqZi1tKnApKmwsKGsqdC1tKnMpKmwsKGsqZy1tKmgpKmwpLHYuc2V0KChpKnAtcSpmKSpsLChpKnMtcSp0KSpsLChpKmgtcSpnKSpsKSx1W2RdLmFkZChjKSx1W25dLmFkZChjKSx1W2VdLmFkZChjKSxyW2RdLmFkZCh2KSxcbnJbbl0uYWRkKHYpLHJbZV0uYWRkKHYpO3Y9W1wiYVwiLFwiYlwiLFwiY1wiLFwiZFwiXTthPTA7Zm9yKGI9dGhpcy5mYWNlcy5sZW5ndGg7YTxiO2ErKyl7ZT10aGlzLmZhY2VzW2FdO2ZvcihjPTA7YzxNYXRoLm1pbihlLnZlcnRleE5vcm1hbHMubGVuZ3RoLDMpO2MrKyl3LmNvcHkoZS52ZXJ0ZXhOb3JtYWxzW2NdKSxkPWVbdltjXV0sbj11W2RdLHouY29weShuKSx6LnN1Yih3Lm11bHRpcGx5U2NhbGFyKHcuZG90KG4pKSkubm9ybWFsaXplKCksRy5jcm9zc1ZlY3RvcnMoZS52ZXJ0ZXhOb3JtYWxzW2NdLG4pLGQ9Ry5kb3QocltkXSksZD0wPmQ/LTE6MSxlLnZlcnRleFRhbmdlbnRzW2NdPW5ldyBUSFJFRS5WZWN0b3I0KHoueCx6Lnksei56LGQpfXRoaXMuaGFzVGFuZ2VudHM9ITB9LGNvbXB1dGVMaW5lRGlzdGFuY2VzOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYj10aGlzLnZlcnRpY2VzLGM9MCxkPWIubGVuZ3RoO2M8ZDtjKyspMDxjJiYoYSs9YltjXS5kaXN0YW5jZVRvKGJbYy0xXSkpLHRoaXMubGluZURpc3RhbmNlc1tjXT1cbmF9LGNvbXB1dGVCb3VuZGluZ0JveDpmdW5jdGlvbigpe251bGw9PT10aGlzLmJvdW5kaW5nQm94JiYodGhpcy5ib3VuZGluZ0JveD1uZXcgVEhSRUUuQm94Myk7dGhpcy5ib3VuZGluZ0JveC5zZXRGcm9tUG9pbnRzKHRoaXMudmVydGljZXMpfSxjb21wdXRlQm91bmRpbmdTcGhlcmU6ZnVuY3Rpb24oKXtudWxsPT09dGhpcy5ib3VuZGluZ1NwaGVyZSYmKHRoaXMuYm91bmRpbmdTcGhlcmU9bmV3IFRIUkVFLlNwaGVyZSk7dGhpcy5ib3VuZGluZ1NwaGVyZS5zZXRGcm9tUG9pbnRzKHRoaXMudmVydGljZXMpfSxtZXJnZVZlcnRpY2VzOmZ1bmN0aW9uKCl7dmFyIGE9e30sYj1bXSxjPVtdLGQsZT1NYXRoLnBvdygxMCw0KSxmLGg7dGhpcy5fX3RtcFZlcnRpY2VzPXZvaWQgMDtmPTA7Zm9yKGg9dGhpcy52ZXJ0aWNlcy5sZW5ndGg7ZjxoO2YrKylkPXRoaXMudmVydGljZXNbZl0sZD1NYXRoLnJvdW5kKGQueCplKStcIl9cIitNYXRoLnJvdW5kKGQueSplKStcIl9cIitNYXRoLnJvdW5kKGQueipcbmUpLHZvaWQgMD09PWFbZF0/KGFbZF09ZixiLnB1c2godGhpcy52ZXJ0aWNlc1tmXSksY1tmXT1iLmxlbmd0aC0xKTpjW2ZdPWNbYVtkXV07YT1bXTtmPTA7Zm9yKGg9dGhpcy5mYWNlcy5sZW5ndGg7ZjxoO2YrKyl7ZT10aGlzLmZhY2VzW2ZdO2UuYT1jW2UuYV07ZS5iPWNbZS5iXTtlLmM9Y1tlLmNdO2U9W2UuYSxlLmIsZS5jXTtmb3IoZD0wOzM+ZDtkKyspaWYoZVtkXT09ZVsoZCsxKSUzXSl7YS5wdXNoKGYpO2JyZWFrfX1mb3IoZj1hLmxlbmd0aC0xOzA8PWY7Zi0tKXtlPWFbZl07dGhpcy5mYWNlcy5zcGxpY2UoZSwxKTtjPTA7Zm9yKGg9dGhpcy5mYWNlVmVydGV4VXZzLmxlbmd0aDtjPGg7YysrKXRoaXMuZmFjZVZlcnRleFV2c1tjXS5zcGxpY2UoZSwxKX1mPXRoaXMudmVydGljZXMubGVuZ3RoLWIubGVuZ3RoO3RoaXMudmVydGljZXM9YjtyZXR1cm4gZn0sY2xvbmU6ZnVuY3Rpb24oKXtmb3IodmFyIGE9bmV3IFRIUkVFLkdlb21ldHJ5LGI9dGhpcy52ZXJ0aWNlcyxjPTAsZD1cbmIubGVuZ3RoO2M8ZDtjKyspYS52ZXJ0aWNlcy5wdXNoKGJbY10uY2xvbmUoKSk7Yj10aGlzLmZhY2VzO2M9MDtmb3IoZD1iLmxlbmd0aDtjPGQ7YysrKWEuZmFjZXMucHVzaChiW2NdLmNsb25lKCkpO2I9dGhpcy5mYWNlVmVydGV4VXZzWzBdO2M9MDtmb3IoZD1iLmxlbmd0aDtjPGQ7YysrKXtmb3IodmFyIGU9YltjXSxmPVtdLGg9MCxnPWUubGVuZ3RoO2g8ZztoKyspZi5wdXNoKG5ldyBUSFJFRS5WZWN0b3IyKGVbaF0ueCxlW2hdLnkpKTthLmZhY2VWZXJ0ZXhVdnNbMF0ucHVzaChmKX1yZXR1cm4gYX0sZGlzcG9zZTpmdW5jdGlvbigpe3RoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImRpc3Bvc2VcIn0pfX07VEhSRUUuRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZS5hcHBseShUSFJFRS5HZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLkdlb21ldHJ5SWRDb3VudD0wO1RIUkVFLkJ1ZmZlckdlb21ldHJ5PWZ1bmN0aW9uKCl7dGhpcy5pZD1USFJFRS5HZW9tZXRyeUlkQ291bnQrKzt0aGlzLnV1aWQ9VEhSRUUuTWF0aC5nZW5lcmF0ZVVVSUQoKTt0aGlzLm5hbWU9XCJcIjt0aGlzLmF0dHJpYnV0ZXM9e307dGhpcy5keW5hbWljPSEwO3RoaXMub2Zmc2V0cz1bXTt0aGlzLmJvdW5kaW5nU3BoZXJlPXRoaXMuYm91bmRpbmdCb3g9bnVsbDt0aGlzLmhhc1RhbmdlbnRzPSExO3RoaXMubW9ycGhUYXJnZXRzPVtdfTtcblRIUkVFLkJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuQnVmZmVyR2VvbWV0cnksYWRkQXR0cmlidXRlOmZ1bmN0aW9uKGEsYixjLGQpe3RoaXMuYXR0cmlidXRlc1thXT17aXRlbVNpemU6ZCxhcnJheTpuZXcgYihjKmQpfX0sYXBwbHlNYXRyaXg6ZnVuY3Rpb24oYSl7dmFyIGIsYzt0aGlzLmF0dHJpYnV0ZXMucG9zaXRpb24mJihiPXRoaXMuYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheSk7dGhpcy5hdHRyaWJ1dGVzLm5vcm1hbCYmKGM9dGhpcy5hdHRyaWJ1dGVzLm5vcm1hbC5hcnJheSk7dm9pZCAwIT09YiYmKGEubXVsdGlwbHlWZWN0b3IzQXJyYXkoYiksdGhpcy52ZXJ0aWNlc05lZWRVcGRhdGU9ITApO3ZvaWQgMCE9PWMmJigobmV3IFRIUkVFLk1hdHJpeDMpLmdldE5vcm1hbE1hdHJpeChhKS5tdWx0aXBseVZlY3RvcjNBcnJheShjKSx0aGlzLm5vcm1hbGl6ZU5vcm1hbHMoKSx0aGlzLm5vcm1hbHNOZWVkVXBkYXRlPSEwKX0sY29tcHV0ZUJvdW5kaW5nQm94OmZ1bmN0aW9uKCl7bnVsbD09PVxudGhpcy5ib3VuZGluZ0JveCYmKHRoaXMuYm91bmRpbmdCb3g9bmV3IFRIUkVFLkJveDMpO3ZhciBhPXRoaXMuYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheTtpZihhKXt2YXIgYj10aGlzLmJvdW5kaW5nQm94LGMsZCxlOzM8PWEubGVuZ3RoJiYoYi5taW4ueD1iLm1heC54PWFbMF0sYi5taW4ueT1iLm1heC55PWFbMV0sYi5taW4uej1iLm1heC56PWFbMl0pO2Zvcih2YXIgZj0zLGg9YS5sZW5ndGg7ZjxoO2YrPTMpYz1hW2ZdLGQ9YVtmKzFdLGU9YVtmKzJdLGM8Yi5taW4ueD9iLm1pbi54PWM6Yz5iLm1heC54JiYoYi5tYXgueD1jKSxkPGIubWluLnk/Yi5taW4ueT1kOmQ+Yi5tYXgueSYmKGIubWF4Lnk9ZCksZTxiLm1pbi56P2IubWluLno9ZTplPmIubWF4LnomJihiLm1heC56PWUpfWlmKHZvaWQgMD09PWF8fDA9PT1hLmxlbmd0aCl0aGlzLmJvdW5kaW5nQm94Lm1pbi5zZXQoMCwwLDApLHRoaXMuYm91bmRpbmdCb3gubWF4LnNldCgwLDAsMCl9LGNvbXB1dGVCb3VuZGluZ1NwaGVyZTpmdW5jdGlvbigpe3ZhciBhPVxubmV3IFRIUkVFLkJveDMsYj1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oKXtudWxsPT09dGhpcy5ib3VuZGluZ1NwaGVyZSYmKHRoaXMuYm91bmRpbmdTcGhlcmU9bmV3IFRIUkVFLlNwaGVyZSk7dmFyIGM9dGhpcy5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5O2lmKGMpe2Zvcih2YXIgZD10aGlzLmJvdW5kaW5nU3BoZXJlLmNlbnRlcixlPTAsZj1jLmxlbmd0aDtlPGY7ZSs9MyliLnNldChjW2VdLGNbZSsxXSxjW2UrMl0pLGEuYWRkUG9pbnQoYik7YS5jZW50ZXIoZCk7Zm9yKHZhciBoPTAsZT0wLGY9Yy5sZW5ndGg7ZTxmO2UrPTMpYi5zZXQoY1tlXSxjW2UrMV0sY1tlKzJdKSxoPU1hdGgubWF4KGgsZC5kaXN0YW5jZVRvU3F1YXJlZChiKSk7dGhpcy5ib3VuZGluZ1NwaGVyZS5yYWRpdXM9TWF0aC5zcXJ0KGgpfX19KCksY29tcHV0ZVZlcnRleE5vcm1hbHM6ZnVuY3Rpb24oKXtpZih0aGlzLmF0dHJpYnV0ZXMucG9zaXRpb24pe3ZhciBhLGIsYyxkO2E9dGhpcy5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5Lmxlbmd0aDtcbmlmKHZvaWQgMD09PXRoaXMuYXR0cmlidXRlcy5ub3JtYWwpdGhpcy5hdHRyaWJ1dGVzLm5vcm1hbD17aXRlbVNpemU6MyxhcnJheTpuZXcgRmxvYXQzMkFycmF5KGEpfTtlbHNle2E9MDtmb3IoYj10aGlzLmF0dHJpYnV0ZXMubm9ybWFsLmFycmF5Lmxlbmd0aDthPGI7YSsrKXRoaXMuYXR0cmlidXRlcy5ub3JtYWwuYXJyYXlbYV09MH12YXIgZT10aGlzLmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXksZj10aGlzLmF0dHJpYnV0ZXMubm9ybWFsLmFycmF5LGgsZyxpLGssbSxsLHA9bmV3IFRIUkVFLlZlY3RvcjMsdD1uZXcgVEhSRUUuVmVjdG9yMyxzPW5ldyBUSFJFRS5WZWN0b3IzLHE9bmV3IFRIUkVFLlZlY3RvcjMsbj1uZXcgVEhSRUUuVmVjdG9yMztpZih0aGlzLmF0dHJpYnV0ZXMuaW5kZXgpe3ZhciB1PXRoaXMuYXR0cmlidXRlcy5pbmRleC5hcnJheSxyPXRoaXMub2Zmc2V0cztjPTA7Zm9yKGQ9ci5sZW5ndGg7YzxkOysrYyl7Yj1yW2NdLnN0YXJ0O2g9cltjXS5jb3VudDt2YXIgdj1cbnJbY10uaW5kZXg7YT1iO2ZvcihiKz1oO2E8YjthKz0zKWg9dit1W2FdLGc9dit1W2ErMV0saT12K3VbYSsyXSxrPWVbMypoXSxtPWVbMypoKzFdLGw9ZVszKmgrMl0scC5zZXQoayxtLGwpLGs9ZVszKmddLG09ZVszKmcrMV0sbD1lWzMqZysyXSx0LnNldChrLG0sbCksaz1lWzMqaV0sbT1lWzMqaSsxXSxsPWVbMyppKzJdLHMuc2V0KGssbSxsKSxxLnN1YlZlY3RvcnMocyx0KSxuLnN1YlZlY3RvcnMocCx0KSxxLmNyb3NzKG4pLGZbMypoXSs9cS54LGZbMypoKzFdKz1xLnksZlszKmgrMl0rPXEueixmWzMqZ10rPXEueCxmWzMqZysxXSs9cS55LGZbMypnKzJdKz1xLnosZlszKmldKz1xLngsZlszKmkrMV0rPXEueSxmWzMqaSsyXSs9cS56fX1lbHNle2E9MDtmb3IoYj1lLmxlbmd0aDthPGI7YSs9OSlrPWVbYV0sbT1lW2ErMV0sbD1lW2ErMl0scC5zZXQoayxtLGwpLGs9ZVthKzNdLG09ZVthKzRdLGw9ZVthKzVdLHQuc2V0KGssbSxsKSxrPWVbYSs2XSxtPWVbYSs3XSxsPWVbYSs4XSxcbnMuc2V0KGssbSxsKSxxLnN1YlZlY3RvcnMocyx0KSxuLnN1YlZlY3RvcnMocCx0KSxxLmNyb3NzKG4pLGZbYV09cS54LGZbYSsxXT1xLnksZlthKzJdPXEueixmW2ErM109cS54LGZbYSs0XT1xLnksZlthKzVdPXEueixmW2ErNl09cS54LGZbYSs3XT1xLnksZlthKzhdPXEuen10aGlzLm5vcm1hbGl6ZU5vcm1hbHMoKTt0aGlzLm5vcm1hbHNOZWVkVXBkYXRlPSEwfX0sbm9ybWFsaXplTm9ybWFsczpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmF0dHJpYnV0ZXMubm9ybWFsLmFycmF5LGIsYyxkLGU9MCxmPWEubGVuZ3RoO2U8ZjtlKz0zKWI9YVtlXSxjPWFbZSsxXSxkPWFbZSsyXSxiPTEvTWF0aC5zcXJ0KGIqYitjKmMrZCpkKSxhW2VdKj1iLGFbZSsxXSo9YixhW2UrMl0qPWJ9LGNvbXB1dGVUYW5nZW50czpmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7bmEueD1kWzMqYV07bmEueT1kWzMqYSsxXTtuYS56PWRbMyphKzJdO3BhLmNvcHkobmEpO1E9Z1thXTtKLmNvcHkoUSk7Si5zdWIobmEubXVsdGlwbHlTY2FsYXIobmEuZG90KFEpKSkubm9ybWFsaXplKCk7XG5jYS5jcm9zc1ZlY3RvcnMocGEsUSk7Uj1jYS5kb3QoaVthXSk7Qz0wPlI/LTE6MTtoWzQqYV09Si54O2hbNCphKzFdPUoueTtoWzQqYSsyXT1KLno7aFs0KmErM109Q31pZih2b2lkIDA9PT10aGlzLmF0dHJpYnV0ZXMuaW5kZXh8fHZvaWQgMD09PXRoaXMuYXR0cmlidXRlcy5wb3NpdGlvbnx8dm9pZCAwPT09dGhpcy5hdHRyaWJ1dGVzLm5vcm1hbHx8dm9pZCAwPT09dGhpcy5hdHRyaWJ1dGVzLnV2KWNvbnNvbGUud2FybihcIk1pc3NpbmcgcmVxdWlyZWQgYXR0cmlidXRlcyAoaW5kZXgsIHBvc2l0aW9uLCBub3JtYWwgb3IgdXYpIGluIEJ1ZmZlckdlb21ldHJ5LmNvbXB1dGVUYW5nZW50cygpXCIpO2Vsc2V7dmFyIGI9dGhpcy5hdHRyaWJ1dGVzLmluZGV4LmFycmF5LGM9dGhpcy5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5LGQ9dGhpcy5hdHRyaWJ1dGVzLm5vcm1hbC5hcnJheSxlPXRoaXMuYXR0cmlidXRlcy51di5hcnJheSxmPWMubGVuZ3RoLzM7dm9pZCAwPT09dGhpcy5hdHRyaWJ1dGVzLnRhbmdlbnQmJlxuKHRoaXMuYXR0cmlidXRlcy50YW5nZW50PXtpdGVtU2l6ZTo0LGFycmF5Om5ldyBGbG9hdDMyQXJyYXkoNCpmKX0pO2Zvcih2YXIgaD10aGlzLmF0dHJpYnV0ZXMudGFuZ2VudC5hcnJheSxnPVtdLGk9W10saz0wO2s8ZjtrKyspZ1trXT1uZXcgVEhSRUUuVmVjdG9yMyxpW2tdPW5ldyBUSFJFRS5WZWN0b3IzO3ZhciBtLGwscCx0LHMscSxuLHUscix2LHosRyx3LHksRSxmPW5ldyBUSFJFRS5WZWN0b3IzLGs9bmV3IFRIUkVFLlZlY3RvcjMsQSxLLEQsRixPLHgsSSxCPXRoaXMub2Zmc2V0cztEPTA7Zm9yKEY9Qi5sZW5ndGg7RDxGOysrRCl7Sz1CW0RdLnN0YXJ0O089QltEXS5jb3VudDt2YXIgTT1CW0RdLmluZGV4O0E9Sztmb3IoSys9TztBPEs7QSs9MylPPU0rYltBXSx4PU0rYltBKzFdLEk9TStiW0ErMl0sbT1jWzMqT10sbD1jWzMqTysxXSxwPWNbMypPKzJdLHQ9Y1szKnhdLHM9Y1szKngrMV0scT1jWzMqeCsyXSxuPWNbMypJXSx1PWNbMypJKzFdLHI9Y1szKkkrMl0sdj1lWzIqXG5PXSx6PWVbMipPKzFdLEc9ZVsyKnhdLHc9ZVsyKngrMV0seT1lWzIqSV0sRT1lWzIqSSsxXSx0LT1tLG09bi1tLHMtPWwsbD11LWwscS09cCxwPXItcCxHLT12LHY9eS12LHctPXosej1FLXosRT0xLyhHKnotdip3KSxmLnNldCgoeip0LXcqbSkqRSwoeipzLXcqbCkqRSwoeipxLXcqcCkqRSksay5zZXQoKEcqbS12KnQpKkUsKEcqbC12KnMpKkUsKEcqcC12KnEpKkUpLGdbT10uYWRkKGYpLGdbeF0uYWRkKGYpLGdbSV0uYWRkKGYpLGlbT10uYWRkKGspLGlbeF0uYWRkKGspLGlbSV0uYWRkKGspfXZhciBKPW5ldyBUSFJFRS5WZWN0b3IzLGNhPW5ldyBUSFJFRS5WZWN0b3IzLG5hPW5ldyBUSFJFRS5WZWN0b3IzLHBhPW5ldyBUSFJFRS5WZWN0b3IzLEMsUSxSO0Q9MDtmb3IoRj1CLmxlbmd0aDtEPEY7KytEKXtLPUJbRF0uc3RhcnQ7Tz1CW0RdLmNvdW50O009QltEXS5pbmRleDtBPUs7Zm9yKEsrPU87QTxLO0ErPTMpTz1NK2JbQV0seD1NK2JbQSsxXSxJPU0rYltBKzJdLGEoTyksYSh4KSxcbmEoSSl9dGhpcy50YW5nZW50c05lZWRVcGRhdGU9dGhpcy5oYXNUYW5nZW50cz0hMH19LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5LGI9W0ludDhBcnJheSxVaW50OEFycmF5LFVpbnQ4Q2xhbXBlZEFycmF5LEludDE2QXJyYXksVWludDE2QXJyYXksSW50MzJBcnJheSxVaW50MzJBcnJheSxGbG9hdDMyQXJyYXksRmxvYXQ2NEFycmF5XSxjO2ZvcihjIGluIHRoaXMuYXR0cmlidXRlcyl7Zm9yKHZhciBkPXRoaXMuYXR0cmlidXRlc1tjXSxlPWQuYXJyYXksZj17aXRlbVNpemU6ZC5pdGVtU2l6ZSxudW1JdGVtczpkLm51bUl0ZW1zLGFycmF5Om51bGx9LGQ9MCxoPWIubGVuZ3RoO2Q8aDtkKyspe3ZhciBnPWJbZF07aWYoZSBpbnN0YW5jZW9mIGcpe2YuYXJyYXk9bmV3IGcoZSk7YnJlYWt9fWEuYXR0cmlidXRlc1tjXT1mfWQ9MDtmb3IoaD10aGlzLm9mZnNldHMubGVuZ3RoO2Q8aDtkKyspYj10aGlzLm9mZnNldHNbZF0sYS5vZmZzZXRzLnB1c2goe3N0YXJ0OmIuc3RhcnQsXG5pbmRleDpiLmluZGV4LGNvdW50OmIuY291bnR9KTtyZXR1cm4gYX0sZGlzcG9zZTpmdW5jdGlvbigpe3RoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImRpc3Bvc2VcIn0pfX07VEhSRUUuRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZS5hcHBseShUSFJFRS5CdWZmZXJHZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLkNhbWVyYT1mdW5jdGlvbigpe1RIUkVFLk9iamVjdDNELmNhbGwodGhpcyk7dGhpcy5tYXRyaXhXb3JsZEludmVyc2U9bmV3IFRIUkVFLk1hdHJpeDQ7dGhpcy5wcm9qZWN0aW9uTWF0cml4PW5ldyBUSFJFRS5NYXRyaXg0O3RoaXMucHJvamVjdGlvbk1hdHJpeEludmVyc2U9bmV3IFRIUkVFLk1hdHJpeDR9O1RIUkVFLkNhbWVyYS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUpO1RIUkVFLkNhbWVyYS5wcm90b3R5cGUubG9va0F0PWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLk1hdHJpeDQ7cmV0dXJuIGZ1bmN0aW9uKGIpe2EubG9va0F0KHRoaXMucG9zaXRpb24sYix0aGlzLnVwKTt0aGlzLnF1YXRlcm5pb24uc2V0RnJvbVJvdGF0aW9uTWF0cml4KGEpfX0oKTtcblRIUkVFLkNhbWVyYS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oYSl7dm9pZCAwPT09YSYmKGE9bmV3IFRIUkVFLkNhbWVyYSk7VEhSRUUuT2JqZWN0M0QucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyxhKTthLm1hdHJpeFdvcmxkSW52ZXJzZS5jb3B5KHRoaXMubWF0cml4V29ybGRJbnZlcnNlKTthLnByb2plY3Rpb25NYXRyaXguY29weSh0aGlzLnByb2plY3Rpb25NYXRyaXgpO2EucHJvamVjdGlvbk1hdHJpeEludmVyc2UuY29weSh0aGlzLnByb2plY3Rpb25NYXRyaXhJbnZlcnNlKTtyZXR1cm4gYX07VEhSRUUuT3J0aG9ncmFwaGljQ2FtZXJhPWZ1bmN0aW9uKGEsYixjLGQsZSxmKXtUSFJFRS5DYW1lcmEuY2FsbCh0aGlzKTt0aGlzLmxlZnQ9YTt0aGlzLnJpZ2h0PWI7dGhpcy50b3A9Yzt0aGlzLmJvdHRvbT1kO3RoaXMubmVhcj12b2lkIDAhPT1lP2U6MC4xO3RoaXMuZmFyPXZvaWQgMCE9PWY/ZjoyRTM7dGhpcy51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCl9O1RIUkVFLk9ydGhvZ3JhcGhpY0NhbWVyYS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5DYW1lcmEucHJvdG90eXBlKTtUSFJFRS5PcnRob2dyYXBoaWNDYW1lcmEucHJvdG90eXBlLnVwZGF0ZVByb2plY3Rpb25NYXRyaXg9ZnVuY3Rpb24oKXt0aGlzLnByb2plY3Rpb25NYXRyaXgubWFrZU9ydGhvZ3JhcGhpYyh0aGlzLmxlZnQsdGhpcy5yaWdodCx0aGlzLnRvcCx0aGlzLmJvdHRvbSx0aGlzLm5lYXIsdGhpcy5mYXIpfTtcblRIUkVFLk9ydGhvZ3JhcGhpY0NhbWVyYS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuT3J0aG9ncmFwaGljQ2FtZXJhO1RIUkVFLkNhbWVyYS5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzLGEpO2EubGVmdD10aGlzLmxlZnQ7YS5yaWdodD10aGlzLnJpZ2h0O2EudG9wPXRoaXMudG9wO2EuYm90dG9tPXRoaXMuYm90dG9tO2EubmVhcj10aGlzLm5lYXI7YS5mYXI9dGhpcy5mYXI7cmV0dXJuIGF9O1RIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhPWZ1bmN0aW9uKGEsYixjLGQpe1RIUkVFLkNhbWVyYS5jYWxsKHRoaXMpO3RoaXMuZm92PXZvaWQgMCE9PWE/YTo1MDt0aGlzLmFzcGVjdD12b2lkIDAhPT1iP2I6MTt0aGlzLm5lYXI9dm9pZCAwIT09Yz9jOjAuMTt0aGlzLmZhcj12b2lkIDAhPT1kP2Q6MkUzO3RoaXMudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpfTtUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5DYW1lcmEucHJvdG90eXBlKTtUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYS5wcm90b3R5cGUuc2V0TGVucz1mdW5jdGlvbihhLGIpe3ZvaWQgMD09PWImJihiPTI0KTt0aGlzLmZvdj0yKlRIUkVFLk1hdGgucmFkVG9EZWcoTWF0aC5hdGFuKGIvKDIqYSkpKTt0aGlzLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKX07XG5USFJFRS5QZXJzcGVjdGl2ZUNhbWVyYS5wcm90b3R5cGUuc2V0Vmlld09mZnNldD1mdW5jdGlvbihhLGIsYyxkLGUsZil7dGhpcy5mdWxsV2lkdGg9YTt0aGlzLmZ1bGxIZWlnaHQ9Yjt0aGlzLng9Yzt0aGlzLnk9ZDt0aGlzLndpZHRoPWU7dGhpcy5oZWlnaHQ9Zjt0aGlzLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKX07XG5USFJFRS5QZXJzcGVjdGl2ZUNhbWVyYS5wcm90b3R5cGUudXBkYXRlUHJvamVjdGlvbk1hdHJpeD1mdW5jdGlvbigpe2lmKHRoaXMuZnVsbFdpZHRoKXt2YXIgYT10aGlzLmZ1bGxXaWR0aC90aGlzLmZ1bGxIZWlnaHQsYj1NYXRoLnRhbihUSFJFRS5NYXRoLmRlZ1RvUmFkKDAuNSp0aGlzLmZvdikpKnRoaXMubmVhcixjPS1iLGQ9YSpjLGE9TWF0aC5hYnMoYSpiLWQpLGM9TWF0aC5hYnMoYi1jKTt0aGlzLnByb2plY3Rpb25NYXRyaXgubWFrZUZydXN0dW0oZCt0aGlzLngqYS90aGlzLmZ1bGxXaWR0aCxkKyh0aGlzLngrdGhpcy53aWR0aCkqYS90aGlzLmZ1bGxXaWR0aCxiLSh0aGlzLnkrdGhpcy5oZWlnaHQpKmMvdGhpcy5mdWxsSGVpZ2h0LGItdGhpcy55KmMvdGhpcy5mdWxsSGVpZ2h0LHRoaXMubmVhcix0aGlzLmZhcil9ZWxzZSB0aGlzLnByb2plY3Rpb25NYXRyaXgubWFrZVBlcnNwZWN0aXZlKHRoaXMuZm92LHRoaXMuYXNwZWN0LHRoaXMubmVhcix0aGlzLmZhcil9O1xuVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhO1RIUkVFLkNhbWVyYS5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzLGEpO2EuZm92PXRoaXMuZm92O2EuYXNwZWN0PXRoaXMuYXNwZWN0O2EubmVhcj10aGlzLm5lYXI7YS5mYXI9dGhpcy5mYXI7cmV0dXJuIGF9O1RIUkVFLkxpZ2h0PWZ1bmN0aW9uKGEpe1RIUkVFLk9iamVjdDNELmNhbGwodGhpcyk7dGhpcy5jb2xvcj1uZXcgVEhSRUUuQ29sb3IoYSl9O1RIUkVFLkxpZ2h0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSk7VEhSRUUuTGlnaHQucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEmJihhPW5ldyBUSFJFRS5MaWdodCk7VEhSRUUuT2JqZWN0M0QucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyxhKTthLmNvbG9yLmNvcHkodGhpcy5jb2xvcik7cmV0dXJuIGF9O1RIUkVFLkFtYmllbnRMaWdodD1mdW5jdGlvbihhKXtUSFJFRS5MaWdodC5jYWxsKHRoaXMsYSl9O1RIUkVFLkFtYmllbnRMaWdodC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5MaWdodC5wcm90b3R5cGUpO1RIUkVFLkFtYmllbnRMaWdodC5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuQW1iaWVudExpZ2h0O1RIUkVFLkxpZ2h0LnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMsYSk7cmV0dXJuIGF9O1RIUkVFLkFyZWFMaWdodD1mdW5jdGlvbihhLGIpe1RIUkVFLkxpZ2h0LmNhbGwodGhpcyxhKTt0aGlzLm5vcm1hbD1uZXcgVEhSRUUuVmVjdG9yMygwLC0xLDApO3RoaXMucmlnaHQ9bmV3IFRIUkVFLlZlY3RvcjMoMSwwLDApO3RoaXMuaW50ZW5zaXR5PXZvaWQgMCE9PWI/YjoxO3RoaXMuaGVpZ2h0PXRoaXMud2lkdGg9MTt0aGlzLmNvbnN0YW50QXR0ZW51YXRpb249MS41O3RoaXMubGluZWFyQXR0ZW51YXRpb249MC41O3RoaXMucXVhZHJhdGljQXR0ZW51YXRpb249MC4xfTtUSFJFRS5BcmVhTGlnaHQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTGlnaHQucHJvdG90eXBlKTtUSFJFRS5EaXJlY3Rpb25hbExpZ2h0PWZ1bmN0aW9uKGEsYil7VEhSRUUuTGlnaHQuY2FsbCh0aGlzLGEpO3RoaXMucG9zaXRpb24uc2V0KDAsMSwwKTt0aGlzLnRhcmdldD1uZXcgVEhSRUUuT2JqZWN0M0Q7dGhpcy5pbnRlbnNpdHk9dm9pZCAwIT09Yj9iOjE7dGhpcy5vbmx5U2hhZG93PXRoaXMuY2FzdFNoYWRvdz0hMTt0aGlzLnNoYWRvd0NhbWVyYU5lYXI9NTA7dGhpcy5zaGFkb3dDYW1lcmFGYXI9NUUzO3RoaXMuc2hhZG93Q2FtZXJhTGVmdD0tNTAwO3RoaXMuc2hhZG93Q2FtZXJhVG9wPXRoaXMuc2hhZG93Q2FtZXJhUmlnaHQ9NTAwO3RoaXMuc2hhZG93Q2FtZXJhQm90dG9tPS01MDA7dGhpcy5zaGFkb3dDYW1lcmFWaXNpYmxlPSExO3RoaXMuc2hhZG93Qmlhcz0wO3RoaXMuc2hhZG93RGFya25lc3M9MC41O3RoaXMuc2hhZG93TWFwSGVpZ2h0PXRoaXMuc2hhZG93TWFwV2lkdGg9NTEyO3RoaXMuc2hhZG93Q2FzY2FkZT0hMTt0aGlzLnNoYWRvd0Nhc2NhZGVPZmZzZXQ9bmV3IFRIUkVFLlZlY3RvcjMoMCxcbjAsLTFFMyk7dGhpcy5zaGFkb3dDYXNjYWRlQ291bnQ9Mjt0aGlzLnNoYWRvd0Nhc2NhZGVCaWFzPVswLDAsMF07dGhpcy5zaGFkb3dDYXNjYWRlV2lkdGg9WzUxMiw1MTIsNTEyXTt0aGlzLnNoYWRvd0Nhc2NhZGVIZWlnaHQ9WzUxMiw1MTIsNTEyXTt0aGlzLnNoYWRvd0Nhc2NhZGVOZWFyWj1bLTEsMC45OSwwLjk5OF07dGhpcy5zaGFkb3dDYXNjYWRlRmFyWj1bMC45OSwwLjk5OCwxXTt0aGlzLnNoYWRvd0Nhc2NhZGVBcnJheT1bXTt0aGlzLnNoYWRvd01hdHJpeD10aGlzLnNoYWRvd0NhbWVyYT10aGlzLnNoYWRvd01hcFNpemU9dGhpcy5zaGFkb3dNYXA9bnVsbH07VEhSRUUuRGlyZWN0aW9uYWxMaWdodC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5MaWdodC5wcm90b3R5cGUpO1xuVEhSRUUuRGlyZWN0aW9uYWxMaWdodC5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuRGlyZWN0aW9uYWxMaWdodDtUSFJFRS5MaWdodC5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzLGEpO2EudGFyZ2V0PXRoaXMudGFyZ2V0LmNsb25lKCk7YS5pbnRlbnNpdHk9dGhpcy5pbnRlbnNpdHk7YS5jYXN0U2hhZG93PXRoaXMuY2FzdFNoYWRvdzthLm9ubHlTaGFkb3c9dGhpcy5vbmx5U2hhZG93O3JldHVybiBhfTtUSFJFRS5IZW1pc3BoZXJlTGlnaHQ9ZnVuY3Rpb24oYSxiLGMpe1RIUkVFLkxpZ2h0LmNhbGwodGhpcyxhKTt0aGlzLnBvc2l0aW9uLnNldCgwLDEwMCwwKTt0aGlzLmdyb3VuZENvbG9yPW5ldyBUSFJFRS5Db2xvcihiKTt0aGlzLmludGVuc2l0eT12b2lkIDAhPT1jP2M6MX07VEhSRUUuSGVtaXNwaGVyZUxpZ2h0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkxpZ2h0LnByb3RvdHlwZSk7VEhSRUUuSGVtaXNwaGVyZUxpZ2h0LnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5IZW1pc3BoZXJlTGlnaHQ7VEhSRUUuTGlnaHQucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyxhKTthLmdyb3VuZENvbG9yLmNvcHkodGhpcy5ncm91bmRDb2xvcik7YS5pbnRlbnNpdHk9dGhpcy5pbnRlbnNpdHk7cmV0dXJuIGF9O1RIUkVFLlBvaW50TGlnaHQ9ZnVuY3Rpb24oYSxiLGMpe1RIUkVFLkxpZ2h0LmNhbGwodGhpcyxhKTt0aGlzLmludGVuc2l0eT12b2lkIDAhPT1iP2I6MTt0aGlzLmRpc3RhbmNlPXZvaWQgMCE9PWM/YzowfTtUSFJFRS5Qb2ludExpZ2h0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkxpZ2h0LnByb3RvdHlwZSk7VEhSRUUuUG9pbnRMaWdodC5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuUG9pbnRMaWdodDtUSFJFRS5MaWdodC5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzLGEpO2EuaW50ZW5zaXR5PXRoaXMuaW50ZW5zaXR5O2EuZGlzdGFuY2U9dGhpcy5kaXN0YW5jZTtyZXR1cm4gYX07VEhSRUUuU3BvdExpZ2h0PWZ1bmN0aW9uKGEsYixjLGQsZSl7VEhSRUUuTGlnaHQuY2FsbCh0aGlzLGEpO3RoaXMucG9zaXRpb24uc2V0KDAsMSwwKTt0aGlzLnRhcmdldD1uZXcgVEhSRUUuT2JqZWN0M0Q7dGhpcy5pbnRlbnNpdHk9dm9pZCAwIT09Yj9iOjE7dGhpcy5kaXN0YW5jZT12b2lkIDAhPT1jP2M6MDt0aGlzLmFuZ2xlPXZvaWQgMCE9PWQ/ZDpNYXRoLlBJLzM7dGhpcy5leHBvbmVudD12b2lkIDAhPT1lP2U6MTA7dGhpcy5vbmx5U2hhZG93PXRoaXMuY2FzdFNoYWRvdz0hMTt0aGlzLnNoYWRvd0NhbWVyYU5lYXI9NTA7dGhpcy5zaGFkb3dDYW1lcmFGYXI9NUUzO3RoaXMuc2hhZG93Q2FtZXJhRm92PTUwO3RoaXMuc2hhZG93Q2FtZXJhVmlzaWJsZT0hMTt0aGlzLnNoYWRvd0JpYXM9MDt0aGlzLnNoYWRvd0RhcmtuZXNzPTAuNTt0aGlzLnNoYWRvd01hcEhlaWdodD10aGlzLnNoYWRvd01hcFdpZHRoPTUxMjt0aGlzLnNoYWRvd01hdHJpeD10aGlzLnNoYWRvd0NhbWVyYT10aGlzLnNoYWRvd01hcFNpemU9XG50aGlzLnNoYWRvd01hcD1udWxsfTtUSFJFRS5TcG90TGlnaHQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTGlnaHQucHJvdG90eXBlKTtUSFJFRS5TcG90TGlnaHQucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlNwb3RMaWdodDtUSFJFRS5MaWdodC5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzLGEpO2EudGFyZ2V0PXRoaXMudGFyZ2V0LmNsb25lKCk7YS5pbnRlbnNpdHk9dGhpcy5pbnRlbnNpdHk7YS5kaXN0YW5jZT10aGlzLmRpc3RhbmNlO2EuYW5nbGU9dGhpcy5hbmdsZTthLmV4cG9uZW50PXRoaXMuZXhwb25lbnQ7YS5jYXN0U2hhZG93PXRoaXMuY2FzdFNoYWRvdzthLm9ubHlTaGFkb3c9dGhpcy5vbmx5U2hhZG93O3JldHVybiBhfTtUSFJFRS5Mb2FkZXI9ZnVuY3Rpb24oYSl7dGhpcy5zdGF0dXNEb21FbGVtZW50PSh0aGlzLnNob3dTdGF0dXM9YSk/VEhSRUUuTG9hZGVyLnByb3RvdHlwZS5hZGRTdGF0dXNFbGVtZW50KCk6bnVsbDt0aGlzLm9uTG9hZFN0YXJ0PWZ1bmN0aW9uKCl7fTt0aGlzLm9uTG9hZFByb2dyZXNzPWZ1bmN0aW9uKCl7fTt0aGlzLm9uTG9hZENvbXBsZXRlPWZ1bmN0aW9uKCl7fX07XG5USFJFRS5Mb2FkZXIucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5Mb2FkZXIsY3Jvc3NPcmlnaW46XCJhbm9ueW1vdXNcIixhZGRTdGF0dXNFbGVtZW50OmZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTthLnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIjthLnN0eWxlLnJpZ2h0PVwiMHB4XCI7YS5zdHlsZS50b3A9XCIwcHhcIjthLnN0eWxlLmZvbnRTaXplPVwiMC44ZW1cIjthLnN0eWxlLnRleHRBbGlnbj1cImxlZnRcIjthLnN0eWxlLmJhY2tncm91bmQ9XCJyZ2JhKDAsMCwwLDAuMjUpXCI7YS5zdHlsZS5jb2xvcj1cIiNmZmZcIjthLnN0eWxlLndpZHRoPVwiMTIwcHhcIjthLnN0eWxlLnBhZGRpbmc9XCIwLjVlbSAwLjVlbSAwLjVlbSAwLjVlbVwiO2Euc3R5bGUuekluZGV4PTFFMzthLmlubmVySFRNTD1cIkxvYWRpbmcgLi4uXCI7cmV0dXJuIGF9LHVwZGF0ZVByb2dyZXNzOmZ1bmN0aW9uKGEpe3ZhciBiPVwiTG9hZGVkIFwiLGI9YS50b3RhbD9iKygoMTAwKmEubG9hZGVkL1xuYS50b3RhbCkudG9GaXhlZCgwKStcIiVcIik6YisoKGEubG9hZGVkLzFFMykudG9GaXhlZCgyKStcIiBLQlwiKTt0aGlzLnN0YXR1c0RvbUVsZW1lbnQuaW5uZXJIVE1MPWJ9LGV4dHJhY3RVcmxCYXNlOmZ1bmN0aW9uKGEpe2E9YS5zcGxpdChcIi9cIik7YS5wb3AoKTtyZXR1cm4oMT5hLmxlbmd0aD9cIi5cIjphLmpvaW4oXCIvXCIpKStcIi9cIn0saW5pdE1hdGVyaWFsczpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1bXSxkPTA7ZDxhLmxlbmd0aDsrK2QpY1tkXT1USFJFRS5Mb2FkZXIucHJvdG90eXBlLmNyZWF0ZU1hdGVyaWFsKGFbZF0sYik7cmV0dXJuIGN9LG5lZWRzVGFuZ2VudHM6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYz1hLmxlbmd0aDtiPGM7YisrKWlmKGFbYl1pbnN0YW5jZW9mIFRIUkVFLlNoYWRlck1hdGVyaWFsKXJldHVybiEwO3JldHVybiExfSxjcmVhdGVNYXRlcmlhbDpmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSl7YT1NYXRoLmxvZyhhKS9NYXRoLkxOMjtyZXR1cm4gTWF0aC5mbG9vcihhKT09XG5hfWZ1bmN0aW9uIGQoYSl7YT1NYXRoLmxvZyhhKS9NYXRoLkxOMjtyZXR1cm4gTWF0aC5wb3coMixNYXRoLnJvdW5kKGEpKX1mdW5jdGlvbiBlKGEsZSxmLGcsaSxrLG4pe3ZhciB1PS9cXC5kZHMkL2kudGVzdChmKSxyPWIrXCIvXCIrZjtpZih1KXt2YXIgdj1USFJFRS5JbWFnZVV0aWxzLmxvYWRDb21wcmVzc2VkVGV4dHVyZShyKTthW2VdPXZ9ZWxzZSB2PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksYVtlXT1uZXcgVEhSRUUuVGV4dHVyZSh2KTthW2VdLnNvdXJjZUZpbGU9ZjtnJiYoYVtlXS5yZXBlYXQuc2V0KGdbMF0sZ1sxXSksMSE9PWdbMF0mJihhW2VdLndyYXBTPVRIUkVFLlJlcGVhdFdyYXBwaW5nKSwxIT09Z1sxXSYmKGFbZV0ud3JhcFQ9VEhSRUUuUmVwZWF0V3JhcHBpbmcpKTtpJiZhW2VdLm9mZnNldC5zZXQoaVswXSxpWzFdKTtrJiYoZj17cmVwZWF0OlRIUkVFLlJlcGVhdFdyYXBwaW5nLG1pcnJvcjpUSFJFRS5NaXJyb3JlZFJlcGVhdFdyYXBwaW5nfSx2b2lkIDAhPT1cbmZba1swXV0mJihhW2VdLndyYXBTPWZba1swXV0pLHZvaWQgMCE9PWZba1sxXV0mJihhW2VdLndyYXBUPWZba1sxXV0pKTtuJiYoYVtlXS5hbmlzb3Ryb3B5PW4pO2lmKCF1KXt2YXIgej1hW2VdLGE9bmV3IEltYWdlO2Eub25sb2FkPWZ1bmN0aW9uKCl7aWYoIWModGhpcy53aWR0aCl8fCFjKHRoaXMuaGVpZ2h0KSl7dmFyIGE9ZCh0aGlzLndpZHRoKSxiPWQodGhpcy5oZWlnaHQpO3ouaW1hZ2Uud2lkdGg9YTt6LmltYWdlLmhlaWdodD1iO3ouaW1hZ2UuZ2V0Q29udGV4dChcIjJkXCIpLmRyYXdJbWFnZSh0aGlzLDAsMCxhLGIpfWVsc2Ugei5pbWFnZT10aGlzO3oubmVlZHNVcGRhdGU9ITB9O2EuY3Jvc3NPcmlnaW49aC5jcm9zc09yaWdpbjthLnNyYz1yfX1mdW5jdGlvbiBmKGEpe3JldHVybigyNTUqYVswXTw8MTYpKygyNTUqYVsxXTw8OCkrMjU1KmFbMl19dmFyIGg9dGhpcyxnPVwiTWVzaExhbWJlcnRNYXRlcmlhbFwiLGk9e2NvbG9yOjE1NjU4NzM0LG9wYWNpdHk6MSxtYXA6bnVsbCxcbmxpZ2h0TWFwOm51bGwsbm9ybWFsTWFwOm51bGwsYnVtcE1hcDpudWxsLHdpcmVmcmFtZTohMX07aWYoYS5zaGFkaW5nKXt2YXIgaz1hLnNoYWRpbmcudG9Mb3dlckNhc2UoKTtcInBob25nXCI9PT1rP2c9XCJNZXNoUGhvbmdNYXRlcmlhbFwiOlwiYmFzaWNcIj09PWsmJihnPVwiTWVzaEJhc2ljTWF0ZXJpYWxcIil9dm9pZCAwIT09YS5ibGVuZGluZyYmdm9pZCAwIT09VEhSRUVbYS5ibGVuZGluZ10mJihpLmJsZW5kaW5nPVRIUkVFW2EuYmxlbmRpbmddKTtpZih2b2lkIDAhPT1hLnRyYW5zcGFyZW50fHwxPmEub3BhY2l0eSlpLnRyYW5zcGFyZW50PWEudHJhbnNwYXJlbnQ7dm9pZCAwIT09YS5kZXB0aFRlc3QmJihpLmRlcHRoVGVzdD1hLmRlcHRoVGVzdCk7dm9pZCAwIT09YS5kZXB0aFdyaXRlJiYoaS5kZXB0aFdyaXRlPWEuZGVwdGhXcml0ZSk7dm9pZCAwIT09YS52aXNpYmxlJiYoaS52aXNpYmxlPWEudmlzaWJsZSk7dm9pZCAwIT09YS5mbGlwU2lkZWQmJihpLnNpZGU9VEhSRUUuQmFja1NpZGUpO1xudm9pZCAwIT09YS5kb3VibGVTaWRlZCYmKGkuc2lkZT1USFJFRS5Eb3VibGVTaWRlKTt2b2lkIDAhPT1hLndpcmVmcmFtZSYmKGkud2lyZWZyYW1lPWEud2lyZWZyYW1lKTt2b2lkIDAhPT1hLnZlcnRleENvbG9ycyYmKFwiZmFjZVwiPT09YS52ZXJ0ZXhDb2xvcnM/aS52ZXJ0ZXhDb2xvcnM9VEhSRUUuRmFjZUNvbG9yczphLnZlcnRleENvbG9ycyYmKGkudmVydGV4Q29sb3JzPVRIUkVFLlZlcnRleENvbG9ycykpO2EuY29sb3JEaWZmdXNlP2kuY29sb3I9ZihhLmNvbG9yRGlmZnVzZSk6YS5EYmdDb2xvciYmKGkuY29sb3I9YS5EYmdDb2xvcik7YS5jb2xvclNwZWN1bGFyJiYoaS5zcGVjdWxhcj1mKGEuY29sb3JTcGVjdWxhcikpO2EuY29sb3JBbWJpZW50JiYoaS5hbWJpZW50PWYoYS5jb2xvckFtYmllbnQpKTthLnRyYW5zcGFyZW5jeSYmKGkub3BhY2l0eT1hLnRyYW5zcGFyZW5jeSk7YS5zcGVjdWxhckNvZWYmJihpLnNoaW5pbmVzcz1hLnNwZWN1bGFyQ29lZik7YS5tYXBEaWZmdXNlJiZcbmImJmUoaSxcIm1hcFwiLGEubWFwRGlmZnVzZSxhLm1hcERpZmZ1c2VSZXBlYXQsYS5tYXBEaWZmdXNlT2Zmc2V0LGEubWFwRGlmZnVzZVdyYXAsYS5tYXBEaWZmdXNlQW5pc290cm9weSk7YS5tYXBMaWdodCYmYiYmZShpLFwibGlnaHRNYXBcIixhLm1hcExpZ2h0LGEubWFwTGlnaHRSZXBlYXQsYS5tYXBMaWdodE9mZnNldCxhLm1hcExpZ2h0V3JhcCxhLm1hcExpZ2h0QW5pc290cm9weSk7YS5tYXBCdW1wJiZiJiZlKGksXCJidW1wTWFwXCIsYS5tYXBCdW1wLGEubWFwQnVtcFJlcGVhdCxhLm1hcEJ1bXBPZmZzZXQsYS5tYXBCdW1wV3JhcCxhLm1hcEJ1bXBBbmlzb3Ryb3B5KTthLm1hcE5vcm1hbCYmYiYmZShpLFwibm9ybWFsTWFwXCIsYS5tYXBOb3JtYWwsYS5tYXBOb3JtYWxSZXBlYXQsYS5tYXBOb3JtYWxPZmZzZXQsYS5tYXBOb3JtYWxXcmFwLGEubWFwTm9ybWFsQW5pc290cm9weSk7YS5tYXBTcGVjdWxhciYmYiYmZShpLFwic3BlY3VsYXJNYXBcIixhLm1hcFNwZWN1bGFyLGEubWFwU3BlY3VsYXJSZXBlYXQsXG5hLm1hcFNwZWN1bGFyT2Zmc2V0LGEubWFwU3BlY3VsYXJXcmFwLGEubWFwU3BlY3VsYXJBbmlzb3Ryb3B5KTthLm1hcEJ1bXBTY2FsZSYmKGkuYnVtcFNjYWxlPWEubWFwQnVtcFNjYWxlKTthLm1hcE5vcm1hbD8oZz1USFJFRS5TaGFkZXJMaWIubm9ybWFsbWFwLGs9VEhSRUUuVW5pZm9ybXNVdGlscy5jbG9uZShnLnVuaWZvcm1zKSxrLnROb3JtYWwudmFsdWU9aS5ub3JtYWxNYXAsYS5tYXBOb3JtYWxGYWN0b3ImJmsudU5vcm1hbFNjYWxlLnZhbHVlLnNldChhLm1hcE5vcm1hbEZhY3RvcixhLm1hcE5vcm1hbEZhY3RvciksaS5tYXAmJihrLnREaWZmdXNlLnZhbHVlPWkubWFwLGsuZW5hYmxlRGlmZnVzZS52YWx1ZT0hMCksaS5zcGVjdWxhck1hcCYmKGsudFNwZWN1bGFyLnZhbHVlPWkuc3BlY3VsYXJNYXAsay5lbmFibGVTcGVjdWxhci52YWx1ZT0hMCksaS5saWdodE1hcCYmKGsudEFPLnZhbHVlPWkubGlnaHRNYXAsay5lbmFibGVBTy52YWx1ZT0hMCksay51RGlmZnVzZUNvbG9yLnZhbHVlLnNldEhleChpLmNvbG9yKSxcbmsudVNwZWN1bGFyQ29sb3IudmFsdWUuc2V0SGV4KGkuc3BlY3VsYXIpLGsudUFtYmllbnRDb2xvci52YWx1ZS5zZXRIZXgoaS5hbWJpZW50KSxrLnVTaGluaW5lc3MudmFsdWU9aS5zaGluaW5lc3Msdm9pZCAwIT09aS5vcGFjaXR5JiYoay51T3BhY2l0eS52YWx1ZT1pLm9wYWNpdHkpLGc9bmV3IFRIUkVFLlNoYWRlck1hdGVyaWFsKHtmcmFnbWVudFNoYWRlcjpnLmZyYWdtZW50U2hhZGVyLHZlcnRleFNoYWRlcjpnLnZlcnRleFNoYWRlcix1bmlmb3JtczprLGxpZ2h0czohMCxmb2c6ITB9KSxpLnRyYW5zcGFyZW50JiYoZy50cmFuc3BhcmVudD0hMCkpOmc9bmV3IFRIUkVFW2ddKGkpO3ZvaWQgMCE9PWEuRGJnTmFtZSYmKGcubmFtZT1hLkRiZ05hbWUpO3JldHVybiBnfX07VEhSRUUuWEhSTG9hZGVyPWZ1bmN0aW9uKGEpe3RoaXMubWFuYWdlcj12b2lkIDAhPT1hP2E6VEhSRUUuRGVmYXVsdExvYWRpbmdNYW5hZ2VyfTtcblRIUkVFLlhIUkxvYWRlci5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLlhIUkxvYWRlcixsb2FkOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXRoaXMsZj1uZXcgWE1MSHR0cFJlcXVlc3Q7dm9pZCAwIT09YiYmZi5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLGZ1bmN0aW9uKGMpe2IoYy50YXJnZXQucmVzcG9uc2VUZXh0KTtlLm1hbmFnZXIuaXRlbUVuZChhKX0sITEpO3ZvaWQgMCE9PWMmJmYuYWRkRXZlbnRMaXN0ZW5lcihcInByb2dyZXNzXCIsZnVuY3Rpb24oYSl7YyhhKX0sITEpO3ZvaWQgMCE9PWQmJmYuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsZnVuY3Rpb24oYSl7ZChhKX0sITEpO3ZvaWQgMCE9PXRoaXMuY3Jvc3NPcmlnaW4mJihmLmNyb3NzT3JpZ2luPXRoaXMuY3Jvc3NPcmlnaW4pO2Yub3BlbihcIkdFVFwiLGEsITApO2Yuc2VuZChudWxsKTtlLm1hbmFnZXIuaXRlbVN0YXJ0KGEpfSxzZXRDcm9zc09yaWdpbjpmdW5jdGlvbihhKXt0aGlzLmNyb3NzT3JpZ2luPWF9fTtUSFJFRS5JbWFnZUxvYWRlcj1mdW5jdGlvbihhKXt0aGlzLm1hbmFnZXI9dm9pZCAwIT09YT9hOlRIUkVFLkRlZmF1bHRMb2FkaW5nTWFuYWdlcn07XG5USFJFRS5JbWFnZUxvYWRlci5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLkltYWdlTG9hZGVyLGxvYWQ6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9dGhpcyxmPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7dm9pZCAwIT09YiYmZi5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLGZ1bmN0aW9uKCl7ZS5tYW5hZ2VyLml0ZW1FbmQoYSk7Yih0aGlzKX0sITEpO3ZvaWQgMCE9PWMmJmYuYWRkRXZlbnRMaXN0ZW5lcihcInByb2dyZXNzXCIsZnVuY3Rpb24oYSl7YyhhKX0sITEpO3ZvaWQgMCE9PWQmJmYuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsZnVuY3Rpb24oYSl7ZChhKX0sITEpO3ZvaWQgMCE9PXRoaXMuY3Jvc3NPcmlnaW4mJihmLmNyb3NzT3JpZ2luPXRoaXMuY3Jvc3NPcmlnaW4pO2Yuc3JjPWE7ZS5tYW5hZ2VyLml0ZW1TdGFydChhKTtyZXR1cm4gZn0sc2V0Q3Jvc3NPcmlnaW46ZnVuY3Rpb24oYSl7dGhpcy5jcm9zc09yaWdpbj1hfX07VEhSRUUuSlNPTkxvYWRlcj1mdW5jdGlvbihhKXtUSFJFRS5Mb2FkZXIuY2FsbCh0aGlzLGEpO3RoaXMud2l0aENyZWRlbnRpYWxzPSExfTtUSFJFRS5KU09OTG9hZGVyLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkxvYWRlci5wcm90b3R5cGUpO1RIUkVFLkpTT05Mb2FkZXIucHJvdG90eXBlLmxvYWQ9ZnVuY3Rpb24oYSxiLGMpe2M9YyYmXCJzdHJpbmdcIj09PXR5cGVvZiBjP2M6dGhpcy5leHRyYWN0VXJsQmFzZShhKTt0aGlzLm9uTG9hZFN0YXJ0KCk7dGhpcy5sb2FkQWpheEpTT04odGhpcyxhLGIsYyl9O1xuVEhSRUUuSlNPTkxvYWRlci5wcm90b3R5cGUubG9hZEFqYXhKU09OPWZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9bmV3IFhNTEh0dHBSZXF1ZXN0LGg9MDtmLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2lmKGYucmVhZHlTdGF0ZT09PWYuRE9ORSlpZigyMDA9PT1mLnN0YXR1c3x8MD09PWYuc3RhdHVzKXtpZihmLnJlc3BvbnNlVGV4dCl7dmFyIGc9SlNPTi5wYXJzZShmLnJlc3BvbnNlVGV4dCksZz1hLnBhcnNlKGcsZCk7YyhnLmdlb21ldHJ5LGcubWF0ZXJpYWxzKX1lbHNlIGNvbnNvbGUud2FybihcIlRIUkVFLkpTT05Mb2FkZXI6IFtcIitiK1wiXSBzZWVtcyB0byBiZSB1bnJlYWNoYWJsZSBvciBmaWxlIHRoZXJlIGlzIGVtcHR5XCIpO2Eub25Mb2FkQ29tcGxldGUoKX1lbHNlIGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5KU09OTG9hZGVyOiBDb3VsZG4ndCBsb2FkIFtcIitiK1wiXSBbXCIrZi5zdGF0dXMrXCJdXCIpO2Vsc2UgZi5yZWFkeVN0YXRlPT09Zi5MT0FESU5HP2UmJigwPT09aCYmXG4oaD1mLmdldFJlc3BvbnNlSGVhZGVyKFwiQ29udGVudC1MZW5ndGhcIikpLGUoe3RvdGFsOmgsbG9hZGVkOmYucmVzcG9uc2VUZXh0Lmxlbmd0aH0pKTpmLnJlYWR5U3RhdGU9PT1mLkhFQURFUlNfUkVDRUlWRUQmJnZvaWQgMCE9PWUmJihoPWYuZ2V0UmVzcG9uc2VIZWFkZXIoXCJDb250ZW50LUxlbmd0aFwiKSl9O2Yub3BlbihcIkdFVFwiLGIsITApO2Yud2l0aENyZWRlbnRpYWxzPXRoaXMud2l0aENyZWRlbnRpYWxzO2Yuc2VuZChudWxsKX07XG5USFJFRS5KU09OTG9hZGVyLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBUSFJFRS5HZW9tZXRyeSxkPXZvaWQgMCE9PWEuc2NhbGU/MS9hLnNjYWxlOjEsZSxmLGgsZyxpLGssbSxsLHAsdCxzLHEsbix1LHI9YS5mYWNlcztwPWEudmVydGljZXM7dmFyIHY9YS5ub3JtYWxzLHo9YS5jb2xvcnMsRz0wO2lmKHZvaWQgMCE9PWEudXZzKXtmb3IoZT0wO2U8YS51dnMubGVuZ3RoO2UrKylhLnV2c1tlXS5sZW5ndGgmJkcrKztmb3IoZT0wO2U8RztlKyspYy5mYWNlVmVydGV4VXZzW2VdPVtdfWc9MDtmb3IoaT1wLmxlbmd0aDtnPGk7KWs9bmV3IFRIUkVFLlZlY3RvcjMsay54PXBbZysrXSpkLGsueT1wW2crK10qZCxrLno9cFtnKytdKmQsYy52ZXJ0aWNlcy5wdXNoKGspO2c9MDtmb3IoaT1yLmxlbmd0aDtnPGk7KWlmKHA9cltnKytdLHQ9cCYxLGg9cCYyLGU9cCY4LG09cCYxNixzPXAmMzIsaz1wJjY0LHAmPTEyOCx0KXt0PW5ldyBUSFJFRS5GYWNlMzt0LmE9cltnXTtcbnQuYj1yW2crMV07dC5jPXJbZyszXTtxPW5ldyBUSFJFRS5GYWNlMztxLmE9cltnKzFdO3EuYj1yW2crMl07cS5jPXJbZyszXTtnKz00O2gmJihoPXJbZysrXSx0Lm1hdGVyaWFsSW5kZXg9aCxxLm1hdGVyaWFsSW5kZXg9aCk7aD1jLmZhY2VzLmxlbmd0aDtpZihlKWZvcihlPTA7ZTxHO2UrKyl7bj1hLnV2c1tlXTtjLmZhY2VWZXJ0ZXhVdnNbZV1baF09W107Yy5mYWNlVmVydGV4VXZzW2VdW2grMV09W107Zm9yKGY9MDs0PmY7ZisrKWw9cltnKytdLHU9blsyKmxdLGw9blsyKmwrMV0sdT1uZXcgVEhSRUUuVmVjdG9yMih1LGwpLDIhPT1mJiZjLmZhY2VWZXJ0ZXhVdnNbZV1baF0ucHVzaCh1KSwwIT09ZiYmYy5mYWNlVmVydGV4VXZzW2VdW2grMV0ucHVzaCh1KX1tJiYobT0zKnJbZysrXSx0Lm5vcm1hbC5zZXQodlttKytdLHZbbSsrXSx2W21dKSxxLm5vcm1hbC5jb3B5KHQubm9ybWFsKSk7aWYocylmb3IoZT0wOzQ+ZTtlKyspbT0zKnJbZysrXSxzPW5ldyBUSFJFRS5WZWN0b3IzKHZbbSsrXSxcbnZbbSsrXSx2W21dKSwyIT09ZSYmdC52ZXJ0ZXhOb3JtYWxzLnB1c2gocyksMCE9PWUmJnEudmVydGV4Tm9ybWFscy5wdXNoKHMpO2smJihrPXJbZysrXSxrPXpba10sdC5jb2xvci5zZXRIZXgoaykscS5jb2xvci5zZXRIZXgoaykpO2lmKHApZm9yKGU9MDs0PmU7ZSsrKWs9cltnKytdLGs9eltrXSwyIT09ZSYmdC52ZXJ0ZXhDb2xvcnMucHVzaChuZXcgVEhSRUUuQ29sb3IoaykpLDAhPT1lJiZxLnZlcnRleENvbG9ycy5wdXNoKG5ldyBUSFJFRS5Db2xvcihrKSk7Yy5mYWNlcy5wdXNoKHQpO2MuZmFjZXMucHVzaChxKX1lbHNle3Q9bmV3IFRIUkVFLkZhY2UzO3QuYT1yW2crK107dC5iPXJbZysrXTt0LmM9cltnKytdO2gmJihoPXJbZysrXSx0Lm1hdGVyaWFsSW5kZXg9aCk7aD1jLmZhY2VzLmxlbmd0aDtpZihlKWZvcihlPTA7ZTxHO2UrKyl7bj1hLnV2c1tlXTtjLmZhY2VWZXJ0ZXhVdnNbZV1baF09W107Zm9yKGY9MDszPmY7ZisrKWw9cltnKytdLHU9blsyKmxdLGw9blsyKmwrMV0sXG51PW5ldyBUSFJFRS5WZWN0b3IyKHUsbCksYy5mYWNlVmVydGV4VXZzW2VdW2hdLnB1c2godSl9bSYmKG09MypyW2crK10sdC5ub3JtYWwuc2V0KHZbbSsrXSx2W20rK10sdlttXSkpO2lmKHMpZm9yKGU9MDszPmU7ZSsrKW09MypyW2crK10scz1uZXcgVEhSRUUuVmVjdG9yMyh2W20rK10sdlttKytdLHZbbV0pLHQudmVydGV4Tm9ybWFscy5wdXNoKHMpO2smJihrPXJbZysrXSx0LmNvbG9yLnNldEhleCh6W2tdKSk7aWYocClmb3IoZT0wOzM+ZTtlKyspaz1yW2crK10sdC52ZXJ0ZXhDb2xvcnMucHVzaChuZXcgVEhSRUUuQ29sb3IoeltrXSkpO2MuZmFjZXMucHVzaCh0KX1pZihhLnNraW5XZWlnaHRzKXtnPTA7Zm9yKGk9YS5za2luV2VpZ2h0cy5sZW5ndGg7ZzxpO2crPTIpcj1hLnNraW5XZWlnaHRzW2ddLHY9YS5za2luV2VpZ2h0c1tnKzFdLGMuc2tpbldlaWdodHMucHVzaChuZXcgVEhSRUUuVmVjdG9yNChyLHYsMCwwKSl9aWYoYS5za2luSW5kaWNlcyl7Zz0wO2ZvcihpPWEuc2tpbkluZGljZXMubGVuZ3RoO2c8XG5pO2crPTIpcj1hLnNraW5JbmRpY2VzW2ddLHY9YS5za2luSW5kaWNlc1tnKzFdLGMuc2tpbkluZGljZXMucHVzaChuZXcgVEhSRUUuVmVjdG9yNChyLHYsMCwwKSl9Yy5ib25lcz1hLmJvbmVzO2MuYW5pbWF0aW9uPWEuYW5pbWF0aW9uO2MuYW5pbWF0aW9ucz1hLmFuaW1hdGlvbnM7aWYodm9pZCAwIT09YS5tb3JwaFRhcmdldHMpe2c9MDtmb3IoaT1hLm1vcnBoVGFyZ2V0cy5sZW5ndGg7ZzxpO2crKyl7Yy5tb3JwaFRhcmdldHNbZ109e307Yy5tb3JwaFRhcmdldHNbZ10ubmFtZT1hLm1vcnBoVGFyZ2V0c1tnXS5uYW1lO2MubW9ycGhUYXJnZXRzW2ddLnZlcnRpY2VzPVtdO3o9Yy5tb3JwaFRhcmdldHNbZ10udmVydGljZXM7Rz1hLm1vcnBoVGFyZ2V0c1tnXS52ZXJ0aWNlcztyPTA7Zm9yKHY9Ry5sZW5ndGg7cjx2O3IrPTMpcD1uZXcgVEhSRUUuVmVjdG9yMyxwLng9R1tyXSpkLHAueT1HW3IrMV0qZCxwLno9R1tyKzJdKmQsei5wdXNoKHApfX1pZih2b2lkIDAhPT1hLm1vcnBoQ29sb3JzKXtnPVxuMDtmb3IoaT1hLm1vcnBoQ29sb3JzLmxlbmd0aDtnPGk7ZysrKXtjLm1vcnBoQ29sb3JzW2ddPXt9O2MubW9ycGhDb2xvcnNbZ10ubmFtZT1hLm1vcnBoQ29sb3JzW2ddLm5hbWU7Yy5tb3JwaENvbG9yc1tnXS5jb2xvcnM9W107dj1jLm1vcnBoQ29sb3JzW2ddLmNvbG9yczt6PWEubW9ycGhDb2xvcnNbZ10uY29sb3JzO2Q9MDtmb3Iocj16Lmxlbmd0aDtkPHI7ZCs9MylHPW5ldyBUSFJFRS5Db2xvcigxNjc1NTIwMCksRy5zZXRSR0IoeltkXSx6W2QrMV0seltkKzJdKSx2LnB1c2goRyl9fWMuY29tcHV0ZUNlbnRyb2lkcygpO2MuY29tcHV0ZUZhY2VOb3JtYWxzKCk7Yy5jb21wdXRlQm91bmRpbmdTcGhlcmUoKTtpZih2b2lkIDA9PT1hLm1hdGVyaWFscylyZXR1cm57Z2VvbWV0cnk6Y307ZD10aGlzLmluaXRNYXRlcmlhbHMoYS5tYXRlcmlhbHMsYik7dGhpcy5uZWVkc1RhbmdlbnRzKGQpJiZjLmNvbXB1dGVUYW5nZW50cygpO3JldHVybntnZW9tZXRyeTpjLG1hdGVyaWFsczpkfX07VEhSRUUuTG9hZGluZ01hbmFnZXI9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMsZT0wLGY9MDt0aGlzLm9uTG9hZD1hO3RoaXMub25Qcm9ncmVzcz1iO3RoaXMub25FcnJvcj1jO3RoaXMuaXRlbVN0YXJ0PWZ1bmN0aW9uKCl7ZisrfTt0aGlzLml0ZW1FbmQ9ZnVuY3Rpb24oYSl7ZSsrO2lmKHZvaWQgMCE9PWQub25Qcm9ncmVzcylkLm9uUHJvZ3Jlc3MoYSxlLGYpO2lmKGU9PT1mJiZ2b2lkIDAhPT1kLm9uTG9hZClkLm9uTG9hZCgpfX07VEhSRUUuRGVmYXVsdExvYWRpbmdNYW5hZ2VyPW5ldyBUSFJFRS5Mb2FkaW5nTWFuYWdlcjtUSFJFRS5CdWZmZXJHZW9tZXRyeUxvYWRlcj1mdW5jdGlvbihhKXt0aGlzLm1hbmFnZXI9dm9pZCAwIT09YT9hOlRIUkVFLkRlZmF1bHRMb2FkaW5nTWFuYWdlcn07XG5USFJFRS5CdWZmZXJHZW9tZXRyeUxvYWRlci5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLkJ1ZmZlckdlb21ldHJ5TG9hZGVyLGxvYWQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLGQ9bmV3IFRIUkVFLlhIUkxvYWRlcjtkLnNldENyb3NzT3JpZ2luKHRoaXMuY3Jvc3NPcmlnaW4pO2QubG9hZChhLGZ1bmN0aW9uKGEpe2IoYy5wYXJzZShKU09OLnBhcnNlKGEpKSl9KX0sc2V0Q3Jvc3NPcmlnaW46ZnVuY3Rpb24oYSl7dGhpcy5jcm9zc09yaWdpbj1hfSxwYXJzZTpmdW5jdGlvbihhKXt2YXIgYj1uZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnksYz1hLmF0dHJpYnV0ZXMsZD1hLm9mZnNldHMsYT1hLmJvdW5kaW5nU3BoZXJlLGU7Zm9yKGUgaW4gYyl7dmFyIGY9Y1tlXTtiLmF0dHJpYnV0ZXNbZV09e2l0ZW1TaXplOmYuaXRlbVNpemUsYXJyYXk6bmV3IHNlbGZbZi50eXBlXShmLmFycmF5KX19dm9pZCAwIT09ZCYmKGIub2Zmc2V0cz1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGQpKSk7XG52b2lkIDAhPT1hJiYoYi5ib3VuZGluZ1NwaGVyZT1uZXcgVEhSRUUuU3BoZXJlKChuZXcgVEhSRUUuVmVjdG9yMykuZnJvbUFycmF5KHZvaWQgMCE9PWEuY2VudGVyP2EuY2VudGVyOlswLDAsMF0pLGEucmFkaXVzKSk7cmV0dXJuIGJ9fTtUSFJFRS5HZW9tZXRyeUxvYWRlcj1mdW5jdGlvbihhKXt0aGlzLm1hbmFnZXI9dm9pZCAwIT09YT9hOlRIUkVFLkRlZmF1bHRMb2FkaW5nTWFuYWdlcn07VEhSRUUuR2VvbWV0cnlMb2FkZXIucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5HZW9tZXRyeUxvYWRlcixsb2FkOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcyxkPW5ldyBUSFJFRS5YSFJMb2FkZXI7ZC5zZXRDcm9zc09yaWdpbih0aGlzLmNyb3NzT3JpZ2luKTtkLmxvYWQoYSxmdW5jdGlvbihhKXtiKGMucGFyc2UoSlNPTi5wYXJzZShhKSkpfSl9LHNldENyb3NzT3JpZ2luOmZ1bmN0aW9uKGEpe3RoaXMuY3Jvc3NPcmlnaW49YX0scGFyc2U6ZnVuY3Rpb24oKXt9fTtUSFJFRS5NYXRlcmlhbExvYWRlcj1mdW5jdGlvbihhKXt0aGlzLm1hbmFnZXI9dm9pZCAwIT09YT9hOlRIUkVFLkRlZmF1bHRMb2FkaW5nTWFuYWdlcn07XG5USFJFRS5NYXRlcmlhbExvYWRlci5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLk1hdGVyaWFsTG9hZGVyLGxvYWQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLGQ9bmV3IFRIUkVFLlhIUkxvYWRlcjtkLnNldENyb3NzT3JpZ2luKHRoaXMuY3Jvc3NPcmlnaW4pO2QubG9hZChhLGZ1bmN0aW9uKGEpe2IoYy5wYXJzZShKU09OLnBhcnNlKGEpKSl9KX0sc2V0Q3Jvc3NPcmlnaW46ZnVuY3Rpb24oYSl7dGhpcy5jcm9zc09yaWdpbj1hfSxwYXJzZTpmdW5jdGlvbihhKXt2YXIgYj1uZXcgVEhSRUVbYS50eXBlXTt2b2lkIDAhPT1hLmNvbG9yJiZiLmNvbG9yLnNldEhleChhLmNvbG9yKTt2b2lkIDAhPT1hLmFtYmllbnQmJmIuYW1iaWVudC5zZXRIZXgoYS5hbWJpZW50KTt2b2lkIDAhPT1hLmVtaXNzaXZlJiZiLmVtaXNzaXZlLnNldEhleChhLmVtaXNzaXZlKTt2b2lkIDAhPT1hLnNwZWN1bGFyJiZiLnNwZWN1bGFyLnNldEhleChhLnNwZWN1bGFyKTt2b2lkIDAhPT1hLnNoaW5pbmVzcyYmXG4oYi5zaGluaW5lc3M9YS5zaGluaW5lc3MpO3ZvaWQgMCE9PWEudmVydGV4Q29sb3JzJiYoYi52ZXJ0ZXhDb2xvcnM9YS52ZXJ0ZXhDb2xvcnMpO3ZvaWQgMCE9PWEuYmxlbmRpbmcmJihiLmJsZW5kaW5nPWEuYmxlbmRpbmcpO3ZvaWQgMCE9PWEuc2lkZSYmKGIuc2lkZT1hLnNpZGUpO3ZvaWQgMCE9PWEub3BhY2l0eSYmKGIub3BhY2l0eT1hLm9wYWNpdHkpO3ZvaWQgMCE9PWEudHJhbnNwYXJlbnQmJihiLnRyYW5zcGFyZW50PWEudHJhbnNwYXJlbnQpO3ZvaWQgMCE9PWEud2lyZWZyYW1lJiYoYi53aXJlZnJhbWU9YS53aXJlZnJhbWUpO2lmKHZvaWQgMCE9PWEubWF0ZXJpYWxzKWZvcih2YXIgYz0wLGQ9YS5tYXRlcmlhbHMubGVuZ3RoO2M8ZDtjKyspYi5tYXRlcmlhbHMucHVzaCh0aGlzLnBhcnNlKGEubWF0ZXJpYWxzW2NdKSk7cmV0dXJuIGJ9fTtUSFJFRS5PYmplY3RMb2FkZXI9ZnVuY3Rpb24oYSl7dGhpcy5tYW5hZ2VyPXZvaWQgMCE9PWE/YTpUSFJFRS5EZWZhdWx0TG9hZGluZ01hbmFnZXJ9O1xuVEhSRUUuT2JqZWN0TG9hZGVyLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuT2JqZWN0TG9hZGVyLGxvYWQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLGQ9bmV3IFRIUkVFLlhIUkxvYWRlcihjLm1hbmFnZXIpO2Quc2V0Q3Jvc3NPcmlnaW4odGhpcy5jcm9zc09yaWdpbik7ZC5sb2FkKGEsZnVuY3Rpb24oYSl7YihjLnBhcnNlKEpTT04ucGFyc2UoYSkpKX0pfSxzZXRDcm9zc09yaWdpbjpmdW5jdGlvbihhKXt0aGlzLmNyb3NzT3JpZ2luPWF9LHBhcnNlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucGFyc2VHZW9tZXRyaWVzKGEuZ2VvbWV0cmllcyksYz10aGlzLnBhcnNlTWF0ZXJpYWxzKGEubWF0ZXJpYWxzKTtyZXR1cm4gdGhpcy5wYXJzZU9iamVjdChhLm9iamVjdCxiLGMpfSxwYXJzZUdlb21ldHJpZXM6ZnVuY3Rpb24oYSl7dmFyIGI9e307aWYodm9pZCAwIT09YSlmb3IodmFyIGM9bmV3IFRIUkVFLkpTT05Mb2FkZXIsZD1uZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnlMb2FkZXIsXG5lPTAsZj1hLmxlbmd0aDtlPGY7ZSsrKXt2YXIgaCxnPWFbZV07c3dpdGNoKGcudHlwZSl7Y2FzZSBcIlBsYW5lR2VvbWV0cnlcIjpoPW5ldyBUSFJFRS5QbGFuZUdlb21ldHJ5KGcud2lkdGgsZy5oZWlnaHQsZy53aWR0aFNlZ21lbnRzLGcuaGVpZ2h0U2VnbWVudHMpO2JyZWFrO2Nhc2UgXCJDaXJjbGVHZW9tZXRyeVwiOmg9bmV3IFRIUkVFLkNpcmNsZUdlb21ldHJ5KGcucmFkaXVzLGcuc2VnbWVudHMpO2JyZWFrO2Nhc2UgXCJDdWJlR2VvbWV0cnlcIjpoPW5ldyBUSFJFRS5DdWJlR2VvbWV0cnkoZy53aWR0aCxnLmhlaWdodCxnLmRlcHRoLGcud2lkdGhTZWdtZW50cyxnLmhlaWdodFNlZ21lbnRzLGcuZGVwdGhTZWdtZW50cyk7YnJlYWs7Y2FzZSBcIkN5bGluZGVyR2VvbWV0cnlcIjpoPW5ldyBUSFJFRS5DeWxpbmRlckdlb21ldHJ5KGcucmFkaXVzVG9wLGcucmFkaXVzQm90dG9tLGcuaGVpZ2h0LGcucmFkaWFsU2VnbWVudHMsZy5oZWlnaHRTZWdtZW50cyxnLm9wZW5FbmRlZCk7YnJlYWs7Y2FzZSBcIlNwaGVyZUdlb21ldHJ5XCI6aD1cbm5ldyBUSFJFRS5TcGhlcmVHZW9tZXRyeShnLnJhZGl1cyxnLndpZHRoU2VnbWVudHMsZy5oZWlnaHRTZWdtZW50cyxnLnBoaVN0YXJ0LGcucGhpTGVuZ3RoLGcudGhldGFTdGFydCxnLnRoZXRhTGVuZ3RoKTticmVhaztjYXNlIFwiSWNvc2FoZWRyb25HZW9tZXRyeVwiOmg9bmV3IFRIUkVFLkljb3NhaGVkcm9uR2VvbWV0cnkoZy5yYWRpdXMsZy5kZXRhaWwpO2JyZWFrO2Nhc2UgXCJUb3J1c0dlb21ldHJ5XCI6aD1uZXcgVEhSRUUuVG9ydXNHZW9tZXRyeShnLnJhZGl1cyxnLnR1YmUsZy5yYWRpYWxTZWdtZW50cyxnLnR1YnVsYXJTZWdtZW50cyxnLmFyYyk7YnJlYWs7Y2FzZSBcIlRvcnVzS25vdEdlb21ldHJ5XCI6aD1uZXcgVEhSRUUuVG9ydXNLbm90R2VvbWV0cnkoZy5yYWRpdXMsZy50dWJlLGcucmFkaWFsU2VnbWVudHMsZy50dWJ1bGFyU2VnbWVudHMsZy5wLGcucSxnLmhlaWdodFNjYWxlKTticmVhaztjYXNlIFwiQnVmZmVyR2VvbWV0cnlcIjpoPWQucGFyc2UoZy5kYXRhKTticmVhaztjYXNlIFwiR2VvbWV0cnlcIjpoPVxuYy5wYXJzZShnLmRhdGEpLmdlb21ldHJ5fWgudXVpZD1nLnV1aWQ7dm9pZCAwIT09Zy5uYW1lJiYoaC5uYW1lPWcubmFtZSk7YltnLnV1aWRdPWh9cmV0dXJuIGJ9LHBhcnNlTWF0ZXJpYWxzOmZ1bmN0aW9uKGEpe3ZhciBiPXt9O2lmKHZvaWQgMCE9PWEpZm9yKHZhciBjPW5ldyBUSFJFRS5NYXRlcmlhbExvYWRlcixkPTAsZT1hLmxlbmd0aDtkPGU7ZCsrKXt2YXIgZj1hW2RdLGg9Yy5wYXJzZShmKTtoLnV1aWQ9Zi51dWlkO3ZvaWQgMCE9PWYubmFtZSYmKGgubmFtZT1mLm5hbWUpO2JbZi51dWlkXT1ofXJldHVybiBifSxwYXJzZU9iamVjdDpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5NYXRyaXg0O3JldHVybiBmdW5jdGlvbihiLGMsZCl7dmFyIGU7c3dpdGNoKGIudHlwZSl7Y2FzZSBcIlNjZW5lXCI6ZT1uZXcgVEhSRUUuU2NlbmU7YnJlYWs7Y2FzZSBcIlBlcnNwZWN0aXZlQ2FtZXJhXCI6ZT1uZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoYi5mb3YsYi5hc3BlY3QsYi5uZWFyLFxuYi5mYXIpO2JyZWFrO2Nhc2UgXCJPcnRob2dyYXBoaWNDYW1lcmFcIjplPW5ldyBUSFJFRS5PcnRob2dyYXBoaWNDYW1lcmEoYi5sZWZ0LGIucmlnaHQsYi50b3AsYi5ib3R0b20sYi5uZWFyLGIuZmFyKTticmVhaztjYXNlIFwiQW1iaWVudExpZ2h0XCI6ZT1uZXcgVEhSRUUuQW1iaWVudExpZ2h0KGIuY29sb3IpO2JyZWFrO2Nhc2UgXCJEaXJlY3Rpb25hbExpZ2h0XCI6ZT1uZXcgVEhSRUUuRGlyZWN0aW9uYWxMaWdodChiLmNvbG9yLGIuaW50ZW5zaXR5KTticmVhaztjYXNlIFwiUG9pbnRMaWdodFwiOmU9bmV3IFRIUkVFLlBvaW50TGlnaHQoYi5jb2xvcixiLmludGVuc2l0eSxiLmRpc3RhbmNlKTticmVhaztjYXNlIFwiU3BvdExpZ2h0XCI6ZT1uZXcgVEhSRUUuU3BvdExpZ2h0KGIuY29sb3IsYi5pbnRlbnNpdHksYi5kaXN0YW5jZSxiLmFuZ2xlLGIuZXhwb25lbnQpO2JyZWFrO2Nhc2UgXCJIZW1pc3BoZXJlTGlnaHRcIjplPW5ldyBUSFJFRS5IZW1pc3BoZXJlTGlnaHQoYi5jb2xvcixiLmdyb3VuZENvbG9yLFxuYi5pbnRlbnNpdHkpO2JyZWFrO2Nhc2UgXCJNZXNoXCI6ZT1jW2IuZ2VvbWV0cnldO3ZhciBmPWRbYi5tYXRlcmlhbF07dm9pZCAwPT09ZSYmY29uc29sZS5lcnJvcihcIlRIUkVFLk9iamVjdExvYWRlcjogVW5kZWZpbmVkIGdlb21ldHJ5IFwiK2IuZ2VvbWV0cnkpO3ZvaWQgMD09PWYmJmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5PYmplY3RMb2FkZXI6IFVuZGVmaW5lZCBtYXRlcmlhbCBcIitiLm1hdGVyaWFsKTtlPW5ldyBUSFJFRS5NZXNoKGUsZik7YnJlYWs7Y2FzZSBcIlNwcml0ZVwiOmY9ZFtiLm1hdGVyaWFsXTt2b2lkIDA9PT1mJiZjb25zb2xlLmVycm9yKFwiVEhSRUUuT2JqZWN0TG9hZGVyOiBVbmRlZmluZWQgbWF0ZXJpYWwgXCIrYi5tYXRlcmlhbCk7ZT1uZXcgVEhSRUUuU3ByaXRlKGYpO2JyZWFrO2RlZmF1bHQ6ZT1uZXcgVEhSRUUuT2JqZWN0M0R9ZS51dWlkPWIudXVpZDt2b2lkIDAhPT1iLm5hbWUmJihlLm5hbWU9Yi5uYW1lKTt2b2lkIDAhPT1iLm1hdHJpeD8oYS5mcm9tQXJyYXkoYi5tYXRyaXgpLFxuYS5kZWNvbXBvc2UoZS5wb3NpdGlvbixlLnF1YXRlcm5pb24sZS5zY2FsZSkpOih2b2lkIDAhPT1iLnBvc2l0aW9uJiZlLnBvc2l0aW9uLmZyb21BcnJheShiLnBvc2l0aW9uKSx2b2lkIDAhPT1iLnJvdGF0aW9uJiZlLnJvdGF0aW9uLmZyb21BcnJheShiLnJvdGF0aW9uKSx2b2lkIDAhPT1iLnNjYWxlJiZlLnNjYWxlLmZyb21BcnJheShiLnNjYWxlKSk7dm9pZCAwIT09Yi52aXNpYmxlJiYoZS52aXNpYmxlPWIudmlzaWJsZSk7dm9pZCAwIT09Yi51c2VyRGF0YSYmKGUudXNlckRhdGE9Yi51c2VyRGF0YSk7aWYodm9pZCAwIT09Yi5jaGlsZHJlbilmb3IodmFyIGggaW4gYi5jaGlsZHJlbillLmFkZCh0aGlzLnBhcnNlT2JqZWN0KGIuY2hpbGRyZW5baF0sYyxkKSk7cmV0dXJuIGV9fSgpfTtUSFJFRS5TY2VuZUxvYWRlcj1mdW5jdGlvbigpe3RoaXMub25Mb2FkU3RhcnQ9ZnVuY3Rpb24oKXt9O3RoaXMub25Mb2FkUHJvZ3Jlc3M9ZnVuY3Rpb24oKXt9O3RoaXMub25Mb2FkQ29tcGxldGU9ZnVuY3Rpb24oKXt9O3RoaXMuY2FsbGJhY2tTeW5jPWZ1bmN0aW9uKCl7fTt0aGlzLmNhbGxiYWNrUHJvZ3Jlc3M9ZnVuY3Rpb24oKXt9O3RoaXMuZ2VvbWV0cnlIYW5kbGVycz17fTt0aGlzLmhpZXJhcmNoeUhhbmRsZXJzPXt9O3RoaXMuYWRkR2VvbWV0cnlIYW5kbGVyKFwiYXNjaWlcIixUSFJFRS5KU09OTG9hZGVyKX07XG5USFJFRS5TY2VuZUxvYWRlci5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLlNjZW5lTG9hZGVyLGxvYWQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLGQ9bmV3IFRIUkVFLlhIUkxvYWRlcihjLm1hbmFnZXIpO2Quc2V0Q3Jvc3NPcmlnaW4odGhpcy5jcm9zc09yaWdpbik7ZC5sb2FkKGEsZnVuY3Rpb24oZCl7Yy5wYXJzZShKU09OLnBhcnNlKGQpLGIsYSl9KX0sc2V0Q3Jvc3NPcmlnaW46ZnVuY3Rpb24oYSl7dGhpcy5jcm9zc09yaWdpbj1hfSxhZGRHZW9tZXRyeUhhbmRsZXI6ZnVuY3Rpb24oYSxiKXt0aGlzLmdlb21ldHJ5SGFuZGxlcnNbYV09e2xvYWRlckNsYXNzOmJ9fSxhZGRIaWVyYXJjaHlIYW5kbGVyOmZ1bmN0aW9uKGEsYil7dGhpcy5oaWVyYXJjaHlIYW5kbGVyc1thXT17bG9hZGVyQ2xhc3M6Yn19LHBhcnNlOmZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKGEsYil7cmV0dXJuXCJyZWxhdGl2ZVRvSFRNTFwiPT1iP2E6cCtcIi9cIithfWZ1bmN0aW9uIGUoKXtmKHkuc2NlbmUsXG5BLm9iamVjdHMpfWZ1bmN0aW9uIGYoYSxiKXt2YXIgYyxlLGgsaSxrLG07Zm9yKG0gaW4gYil7dmFyIHA9eS5vYmplY3RzW21dLG49YlttXTtpZih2b2lkIDA9PT1wKXtpZihuLnR5cGUmJm4udHlwZSBpbiBsLmhpZXJhcmNoeUhhbmRsZXJzKXtpZih2b2lkIDA9PT1uLmxvYWRpbmcpe2M9e3R5cGU6MSx1cmw6MSxtYXRlcmlhbDoxLHBvc2l0aW9uOjEscm90YXRpb246MSxzY2FsZToxLHZpc2libGU6MSxjaGlsZHJlbjoxLHVzZXJEYXRhOjEsc2tpbjoxLG1vcnBoOjEsbWlycm9yZWRMb29wOjEsZHVyYXRpb246MX07dmFyIHU9e30sdjtmb3IodiBpbiBuKXYgaW4gY3x8KHVbdl09blt2XSk7cz15Lm1hdGVyaWFsc1tuLm1hdGVyaWFsXTtuLmxvYWRpbmc9ITA7Yz1sLmhpZXJhcmNoeUhhbmRsZXJzW24udHlwZV0ubG9hZGVyT2JqZWN0O2Mub3B0aW9ucz9jLmxvYWQoZChuLnVybCxBLnVybEJhc2VUeXBlKSxnKG0sYSxzLG4pKTpjLmxvYWQoZChuLnVybCxBLnVybEJhc2VUeXBlKSxnKG0sXG5hLHMsbiksdSl9fWVsc2UgaWYodm9pZCAwIT09bi5nZW9tZXRyeSl7aWYodD15Lmdlb21ldHJpZXNbbi5nZW9tZXRyeV0pe3A9ITE7cz15Lm1hdGVyaWFsc1tuLm1hdGVyaWFsXTtwPXMgaW5zdGFuY2VvZiBUSFJFRS5TaGFkZXJNYXRlcmlhbDtlPW4ucG9zaXRpb247aD1uLnJvdGF0aW9uO2k9bi5zY2FsZTtjPW4ubWF0cml4O2s9bi5xdWF0ZXJuaW9uO24ubWF0ZXJpYWx8fChzPW5ldyBUSFJFRS5NZXNoRmFjZU1hdGVyaWFsKHkuZmFjZV9tYXRlcmlhbHNbbi5nZW9tZXRyeV0pKTtzIGluc3RhbmNlb2YgVEhSRUUuTWVzaEZhY2VNYXRlcmlhbCYmMD09PXMubWF0ZXJpYWxzLmxlbmd0aCYmKHM9bmV3IFRIUkVFLk1lc2hGYWNlTWF0ZXJpYWwoeS5mYWNlX21hdGVyaWFsc1tuLmdlb21ldHJ5XSkpO2lmKHMgaW5zdGFuY2VvZiBUSFJFRS5NZXNoRmFjZU1hdGVyaWFsKWZvcih1PTA7dTxzLm1hdGVyaWFscy5sZW5ndGg7dSsrKXA9cHx8cy5tYXRlcmlhbHNbdV1pbnN0YW5jZW9mIFRIUkVFLlNoYWRlck1hdGVyaWFsO1xucCYmdC5jb21wdXRlVGFuZ2VudHMoKTtuLnNraW4/cD1uZXcgVEhSRUUuU2tpbm5lZE1lc2godCxzKTpuLm1vcnBoPyhwPW5ldyBUSFJFRS5Nb3JwaEFuaW1NZXNoKHQscyksdm9pZCAwIT09bi5kdXJhdGlvbiYmKHAuZHVyYXRpb249bi5kdXJhdGlvbiksdm9pZCAwIT09bi50aW1lJiYocC50aW1lPW4udGltZSksdm9pZCAwIT09bi5taXJyb3JlZExvb3AmJihwLm1pcnJvcmVkTG9vcD1uLm1pcnJvcmVkTG9vcCkscy5tb3JwaE5vcm1hbHMmJnQuY29tcHV0ZU1vcnBoTm9ybWFscygpKTpwPW5ldyBUSFJFRS5NZXNoKHQscyk7cC5uYW1lPW07Yz8ocC5tYXRyaXhBdXRvVXBkYXRlPSExLHAubWF0cml4LnNldChjWzBdLGNbMV0sY1syXSxjWzNdLGNbNF0sY1s1XSxjWzZdLGNbN10sY1s4XSxjWzldLGNbMTBdLGNbMTFdLGNbMTJdLGNbMTNdLGNbMTRdLGNbMTVdKSk6KHAucG9zaXRpb24uZnJvbUFycmF5KGUpLGs/cC5xdWF0ZXJuaW9uLmZyb21BcnJheShrKTpwLnJvdGF0aW9uLmZyb21BcnJheShoKSxcbnAuc2NhbGUuZnJvbUFycmF5KGkpKTtwLnZpc2libGU9bi52aXNpYmxlO3AuY2FzdFNoYWRvdz1uLmNhc3RTaGFkb3c7cC5yZWNlaXZlU2hhZG93PW4ucmVjZWl2ZVNoYWRvdzthLmFkZChwKTt5Lm9iamVjdHNbbV09cH19ZWxzZSBpZihcIkFtYmllbnRMaWdodFwiPT09bi50eXBlfHxcIlBvaW50TGlnaHRcIj09PW4udHlwZXx8XCJEaXJlY3Rpb25hbExpZ2h0XCI9PT1uLnR5cGV8fFwiU3BvdExpZ2h0XCI9PT1uLnR5cGV8fFwiSGVtaXNwaGVyZUxpZ2h0XCI9PT1uLnR5cGV8fFwiQXJlYUxpZ2h0XCI9PT1uLnR5cGUpe3U9bi5jb2xvcjtjPW4uaW50ZW5zaXR5O2U9bi5kaXN0YW5jZTtoPW4ucG9zaXRpb247aT1uLnJvdGF0aW9uO3N3aXRjaChuLnR5cGUpe2Nhc2UgXCJBbWJpZW50TGlnaHRcIjpyPW5ldyBUSFJFRS5BbWJpZW50TGlnaHQodSk7YnJlYWs7Y2FzZSBcIlBvaW50TGlnaHRcIjpyPW5ldyBUSFJFRS5Qb2ludExpZ2h0KHUsYyxlKTtyLnBvc2l0aW9uLmZyb21BcnJheShoKTticmVhaztjYXNlIFwiRGlyZWN0aW9uYWxMaWdodFwiOnI9XG5uZXcgVEhSRUUuRGlyZWN0aW9uYWxMaWdodCh1LGMpO3IucG9zaXRpb24uZnJvbUFycmF5KG4uZGlyZWN0aW9uKTticmVhaztjYXNlIFwiU3BvdExpZ2h0XCI6cj1uZXcgVEhSRUUuU3BvdExpZ2h0KHUsYyxlLDEpO3IuYW5nbGU9bi5hbmdsZTtyLnBvc2l0aW9uLmZyb21BcnJheShoKTtyLnRhcmdldC5zZXQoaFswXSxoWzFdLWUsaFsyXSk7ci50YXJnZXQuYXBwbHlFdWxlcihuZXcgVEhSRUUuRXVsZXIoaVswXSxpWzFdLGlbMl0sXCJYWVpcIikpO2JyZWFrO2Nhc2UgXCJIZW1pc3BoZXJlTGlnaHRcIjpyPW5ldyBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0KHUsYyxlKTtyLnRhcmdldC5zZXQoaFswXSxoWzFdLWUsaFsyXSk7ci50YXJnZXQuYXBwbHlFdWxlcihuZXcgVEhSRUUuRXVsZXIoaVswXSxpWzFdLGlbMl0sXCJYWVpcIikpO2JyZWFrO2Nhc2UgXCJBcmVhTGlnaHRcIjpyPW5ldyBUSFJFRS5BcmVhTGlnaHQodSxjKSxyLnBvc2l0aW9uLmZyb21BcnJheShoKSxyLndpZHRoPW4uc2l6ZSxyLmhlaWdodD1cbm4uc2l6ZV95fWEuYWRkKHIpO3IubmFtZT1tO3kubGlnaHRzW21dPXI7eS5vYmplY3RzW21dPXJ9ZWxzZVwiUGVyc3BlY3RpdmVDYW1lcmFcIj09PW4udHlwZXx8XCJPcnRob2dyYXBoaWNDYW1lcmFcIj09PW4udHlwZT8oZT1uLnBvc2l0aW9uLGg9bi5yb3RhdGlvbixrPW4ucXVhdGVybmlvbixcIlBlcnNwZWN0aXZlQ2FtZXJhXCI9PT1uLnR5cGU/cT1uZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEobi5mb3Ysbi5hc3BlY3Qsbi5uZWFyLG4uZmFyKTpcIk9ydGhvZ3JhcGhpY0NhbWVyYVwiPT09bi50eXBlJiYocT1uZXcgVEhSRUUuT3J0aG9ncmFwaGljQ2FtZXJhKG4ubGVmdCxuLnJpZ2h0LG4udG9wLG4uYm90dG9tLG4ubmVhcixuLmZhcikpLHEubmFtZT1tLHEucG9zaXRpb24uZnJvbUFycmF5KGUpLHZvaWQgMCE9PWs/cS5xdWF0ZXJuaW9uLmZyb21BcnJheShrKTp2b2lkIDAhPT1oJiZxLnJvdGF0aW9uLmZyb21BcnJheShoKSxhLmFkZChxKSx5LmNhbWVyYXNbbV09cSx5Lm9iamVjdHNbbV09XG5xKTooZT1uLnBvc2l0aW9uLGg9bi5yb3RhdGlvbixpPW4uc2NhbGUsaz1uLnF1YXRlcm5pb24scD1uZXcgVEhSRUUuT2JqZWN0M0QscC5uYW1lPW0scC5wb3NpdGlvbi5mcm9tQXJyYXkoZSksaz9wLnF1YXRlcm5pb24uZnJvbUFycmF5KGspOnAucm90YXRpb24uZnJvbUFycmF5KGgpLHAuc2NhbGUuZnJvbUFycmF5KGkpLHAudmlzaWJsZT12b2lkIDAhPT1uLnZpc2libGU/bi52aXNpYmxlOiExLGEuYWRkKHApLHkub2JqZWN0c1ttXT1wLHkuZW1wdGllc1ttXT1wKTtpZihwKXtpZih2b2lkIDAhPT1uLnVzZXJEYXRhKWZvcih2YXIgeiBpbiBuLnVzZXJEYXRhKXAudXNlckRhdGFbel09bi51c2VyRGF0YVt6XTtpZih2b2lkIDAhPT1uLmdyb3Vwcylmb3IodT0wO3U8bi5ncm91cHMubGVuZ3RoO3UrKyljPW4uZ3JvdXBzW3VdLHZvaWQgMD09PXkuZ3JvdXBzW2NdJiYoeS5ncm91cHNbY109W10pLHkuZ3JvdXBzW2NdLnB1c2gobSl9fXZvaWQgMCE9PXAmJnZvaWQgMCE9PW4uY2hpbGRyZW4mJlxuZihwLG4uY2hpbGRyZW4pfX1mdW5jdGlvbiBoKGEpe3JldHVybiBmdW5jdGlvbihiLGMpe2IubmFtZT1hO3kuZ2VvbWV0cmllc1thXT1iO3kuZmFjZV9tYXRlcmlhbHNbYV09YztlKCk7di09MTtsLm9uTG9hZENvbXBsZXRlKCk7aygpfX1mdW5jdGlvbiBnKGEsYixjLGQpe3JldHVybiBmdW5jdGlvbihmKXt2YXIgZj1mLmNvbnRlbnQ/Zi5jb250ZW50OmYuZGFlP2Yuc2NlbmU6ZixoPWQucm90YXRpb24sZz1kLnF1YXRlcm5pb24saT1kLnNjYWxlO2YucG9zaXRpb24uZnJvbUFycmF5KGQucG9zaXRpb24pO2c/Zi5xdWF0ZXJuaW9uLmZyb21BcnJheShnKTpmLnJvdGF0aW9uLmZyb21BcnJheShoKTtmLnNjYWxlLmZyb21BcnJheShpKTtjJiZmLnRyYXZlcnNlKGZ1bmN0aW9uKGEpe2EubWF0ZXJpYWw9Y30pO3ZhciBtPXZvaWQgMCE9PWQudmlzaWJsZT9kLnZpc2libGU6ITA7Zi50cmF2ZXJzZShmdW5jdGlvbihhKXthLnZpc2libGU9bX0pO2IuYWRkKGYpO2YubmFtZT1hO3kub2JqZWN0c1thXT1cbmY7ZSgpO3YtPTE7bC5vbkxvYWRDb21wbGV0ZSgpO2soKX19ZnVuY3Rpb24gaShhKXtyZXR1cm4gZnVuY3Rpb24oYixjKXtiLm5hbWU9YTt5Lmdlb21ldHJpZXNbYV09Yjt5LmZhY2VfbWF0ZXJpYWxzW2FdPWN9fWZ1bmN0aW9uIGsoKXtsLmNhbGxiYWNrUHJvZ3Jlc3Moe3RvdGFsTW9kZWxzOkcsdG90YWxUZXh0dXJlczp3LGxvYWRlZE1vZGVsczpHLXYsbG9hZGVkVGV4dHVyZXM6dy16fSx5KTtsLm9uTG9hZFByb2dyZXNzKCk7aWYoMD09PXYmJjA9PT16KXtmb3IodmFyIGE9MDthPEUubGVuZ3RoO2ErKyl7dmFyIGM9RVthXSxkPXkub2JqZWN0c1tjLnRhcmdldE5hbWVdO2Q/Yy5vYmplY3QudGFyZ2V0PWQ6KGMub2JqZWN0LnRhcmdldD1uZXcgVEhSRUUuT2JqZWN0M0QseS5zY2VuZS5hZGQoYy5vYmplY3QudGFyZ2V0KSk7Yy5vYmplY3QudGFyZ2V0LnVzZXJEYXRhLnRhcmdldEludmVyc2U9Yy5vYmplY3R9Yih5KX19ZnVuY3Rpb24gbShhLGIpe2IoYSk7aWYodm9pZCAwIT09YS5jaGlsZHJlbilmb3IodmFyIGMgaW4gYS5jaGlsZHJlbiltKGEuY2hpbGRyZW5bY10sXG5iKX12YXIgbD10aGlzLHA9VEhSRUUuTG9hZGVyLnByb3RvdHlwZS5leHRyYWN0VXJsQmFzZShjKSx0LHMscSxuLHUscix2LHosRyx3LHksRT1bXSxBPWEsSztmb3IoSyBpbiB0aGlzLmdlb21ldHJ5SGFuZGxlcnMpYT10aGlzLmdlb21ldHJ5SGFuZGxlcnNbS10ubG9hZGVyQ2xhc3MsdGhpcy5nZW9tZXRyeUhhbmRsZXJzW0tdLmxvYWRlck9iamVjdD1uZXcgYTtmb3IoSyBpbiB0aGlzLmhpZXJhcmNoeUhhbmRsZXJzKWE9dGhpcy5oaWVyYXJjaHlIYW5kbGVyc1tLXS5sb2FkZXJDbGFzcyx0aGlzLmhpZXJhcmNoeUhhbmRsZXJzW0tdLmxvYWRlck9iamVjdD1uZXcgYTt6PXY9MDt5PXtzY2VuZTpuZXcgVEhSRUUuU2NlbmUsZ2VvbWV0cmllczp7fSxmYWNlX21hdGVyaWFsczp7fSxtYXRlcmlhbHM6e30sdGV4dHVyZXM6e30sb2JqZWN0czp7fSxjYW1lcmFzOnt9LGxpZ2h0czp7fSxmb2dzOnt9LGVtcHRpZXM6e30sZ3JvdXBzOnt9fTtpZihBLnRyYW5zZm9ybSYmKEs9QS50cmFuc2Zvcm0ucG9zaXRpb24sXG5hPUEudHJhbnNmb3JtLnJvdGF0aW9uLGM9QS50cmFuc2Zvcm0uc2NhbGUsSyYmeS5zY2VuZS5wb3NpdGlvbi5mcm9tQXJyYXkoSyksYSYmeS5zY2VuZS5yb3RhdGlvbi5mcm9tQXJyYXkoYSksYyYmeS5zY2VuZS5zY2FsZS5mcm9tQXJyYXkoYyksS3x8YXx8YykpeS5zY2VuZS51cGRhdGVNYXRyaXgoKSx5LnNjZW5lLnVwZGF0ZU1hdHJpeFdvcmxkKCk7Sz1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXt6LT1hO2soKTtsLm9uTG9hZENvbXBsZXRlKCl9fTtmb3IodmFyIEQgaW4gQS5mb2dzKWE9QS5mb2dzW0RdLFwibGluZWFyXCI9PT1hLnR5cGU/bj1uZXcgVEhSRUUuRm9nKDAsYS5uZWFyLGEuZmFyKTpcImV4cDJcIj09PWEudHlwZSYmKG49bmV3IFRIUkVFLkZvZ0V4cDIoMCxhLmRlbnNpdHkpKSxhPWEuY29sb3Isbi5jb2xvci5zZXRSR0IoYVswXSxhWzFdLGFbMl0pLHkuZm9nc1tEXT1uO2Zvcih2YXIgRiBpbiBBLmdlb21ldHJpZXMpbj1BLmdlb21ldHJpZXNbRl0sbi50eXBlIGluXG50aGlzLmdlb21ldHJ5SGFuZGxlcnMmJih2Kz0xLGwub25Mb2FkU3RhcnQoKSk7Zm9yKHZhciBPIGluIEEub2JqZWN0cyltKEEub2JqZWN0c1tPXSxmdW5jdGlvbihhKXthLnR5cGUmJmEudHlwZSBpbiBsLmhpZXJhcmNoeUhhbmRsZXJzJiYodis9MSxsLm9uTG9hZFN0YXJ0KCkpfSk7Rz12O2ZvcihGIGluIEEuZ2VvbWV0cmllcylpZihuPUEuZ2VvbWV0cmllc1tGXSxcImN1YmVcIj09PW4udHlwZSl0PW5ldyBUSFJFRS5DdWJlR2VvbWV0cnkobi53aWR0aCxuLmhlaWdodCxuLmRlcHRoLG4ud2lkdGhTZWdtZW50cyxuLmhlaWdodFNlZ21lbnRzLG4uZGVwdGhTZWdtZW50cyksdC5uYW1lPUYseS5nZW9tZXRyaWVzW0ZdPXQ7ZWxzZSBpZihcInBsYW5lXCI9PT1uLnR5cGUpdD1uZXcgVEhSRUUuUGxhbmVHZW9tZXRyeShuLndpZHRoLG4uaGVpZ2h0LG4ud2lkdGhTZWdtZW50cyxuLmhlaWdodFNlZ21lbnRzKSx0Lm5hbWU9Rix5Lmdlb21ldHJpZXNbRl09dDtlbHNlIGlmKFwic3BoZXJlXCI9PT1uLnR5cGUpdD1cbm5ldyBUSFJFRS5TcGhlcmVHZW9tZXRyeShuLnJhZGl1cyxuLndpZHRoU2VnbWVudHMsbi5oZWlnaHRTZWdtZW50cyksdC5uYW1lPUYseS5nZW9tZXRyaWVzW0ZdPXQ7ZWxzZSBpZihcImN5bGluZGVyXCI9PT1uLnR5cGUpdD1uZXcgVEhSRUUuQ3lsaW5kZXJHZW9tZXRyeShuLnRvcFJhZCxuLmJvdFJhZCxuLmhlaWdodCxuLnJhZFNlZ3Msbi5oZWlnaHRTZWdzKSx0Lm5hbWU9Rix5Lmdlb21ldHJpZXNbRl09dDtlbHNlIGlmKFwidG9ydXNcIj09PW4udHlwZSl0PW5ldyBUSFJFRS5Ub3J1c0dlb21ldHJ5KG4ucmFkaXVzLG4udHViZSxuLnNlZ21lbnRzUixuLnNlZ21lbnRzVCksdC5uYW1lPUYseS5nZW9tZXRyaWVzW0ZdPXQ7ZWxzZSBpZihcImljb3NhaGVkcm9uXCI9PT1uLnR5cGUpdD1uZXcgVEhSRUUuSWNvc2FoZWRyb25HZW9tZXRyeShuLnJhZGl1cyxuLnN1YmRpdmlzaW9ucyksdC5uYW1lPUYseS5nZW9tZXRyaWVzW0ZdPXQ7ZWxzZSBpZihuLnR5cGUgaW4gdGhpcy5nZW9tZXRyeUhhbmRsZXJzKXtPPVxue307Zm9yKHUgaW4gbilcInR5cGVcIiE9PXUmJlwidXJsXCIhPT11JiYoT1t1XT1uW3VdKTt0aGlzLmdlb21ldHJ5SGFuZGxlcnNbbi50eXBlXS5sb2FkZXJPYmplY3QubG9hZChkKG4udXJsLEEudXJsQmFzZVR5cGUpLGgoRiksTyl9ZWxzZVwiZW1iZWRkZWRcIj09PW4udHlwZSYmKE89QS5lbWJlZHNbbi5pZF0sTy5tZXRhZGF0YT1BLm1ldGFkYXRhLE8mJihPPXRoaXMuZ2VvbWV0cnlIYW5kbGVycy5hc2NpaS5sb2FkZXJPYmplY3QucGFyc2UoTyxcIlwiKSxpKEYpKE8uZ2VvbWV0cnksTy5tYXRlcmlhbHMpKSk7Zm9yKHZhciB4IGluIEEudGV4dHVyZXMpaWYoRj1BLnRleHR1cmVzW3hdLEYudXJsIGluc3RhbmNlb2YgQXJyYXkpe3orPUYudXJsLmxlbmd0aDtmb3IodT0wO3U8Ri51cmwubGVuZ3RoO3UrKylsLm9uTG9hZFN0YXJ0KCl9ZWxzZSB6Kz0xLGwub25Mb2FkU3RhcnQoKTt3PXo7Zm9yKHggaW4gQS50ZXh0dXJlcyl7Rj1BLnRleHR1cmVzW3hdO3ZvaWQgMCE9PUYubWFwcGluZyYmdm9pZCAwIT09XG5USFJFRVtGLm1hcHBpbmddJiYoRi5tYXBwaW5nPW5ldyBUSFJFRVtGLm1hcHBpbmddKTtpZihGLnVybCBpbnN0YW5jZW9mIEFycmF5KXtPPUYudXJsLmxlbmd0aDtuPVtdO2Zvcih1PTA7dTxPO3UrKyluW3VdPWQoRi51cmxbdV0sQS51cmxCYXNlVHlwZSk7dT0odT0vXFwuZGRzJC9pLnRlc3QoblswXSkpP1RIUkVFLkltYWdlVXRpbHMubG9hZENvbXByZXNzZWRUZXh0dXJlQ3ViZShuLEYubWFwcGluZyxLKE8pKTpUSFJFRS5JbWFnZVV0aWxzLmxvYWRUZXh0dXJlQ3ViZShuLEYubWFwcGluZyxLKE8pKX1lbHNlIHU9L1xcLmRkcyQvaS50ZXN0KEYudXJsKSxPPWQoRi51cmwsQS51cmxCYXNlVHlwZSksbj1LKDEpLHU9dT9USFJFRS5JbWFnZVV0aWxzLmxvYWRDb21wcmVzc2VkVGV4dHVyZShPLEYubWFwcGluZyxuKTpUSFJFRS5JbWFnZVV0aWxzLmxvYWRUZXh0dXJlKE8sRi5tYXBwaW5nLG4pLHZvaWQgMCE9PVRIUkVFW0YubWluRmlsdGVyXSYmKHUubWluRmlsdGVyPVRIUkVFW0YubWluRmlsdGVyXSksXG52b2lkIDAhPT1USFJFRVtGLm1hZ0ZpbHRlcl0mJih1Lm1hZ0ZpbHRlcj1USFJFRVtGLm1hZ0ZpbHRlcl0pLEYuYW5pc290cm9weSYmKHUuYW5pc290cm9weT1GLmFuaXNvdHJvcHkpLEYucmVwZWF0JiYodS5yZXBlYXQuc2V0KEYucmVwZWF0WzBdLEYucmVwZWF0WzFdKSwxIT09Ri5yZXBlYXRbMF0mJih1LndyYXBTPVRIUkVFLlJlcGVhdFdyYXBwaW5nKSwxIT09Ri5yZXBlYXRbMV0mJih1LndyYXBUPVRIUkVFLlJlcGVhdFdyYXBwaW5nKSksRi5vZmZzZXQmJnUub2Zmc2V0LnNldChGLm9mZnNldFswXSxGLm9mZnNldFsxXSksRi53cmFwJiYoTz17cmVwZWF0OlRIUkVFLlJlcGVhdFdyYXBwaW5nLG1pcnJvcjpUSFJFRS5NaXJyb3JlZFJlcGVhdFdyYXBwaW5nfSx2b2lkIDAhPT1PW0Yud3JhcFswXV0mJih1LndyYXBTPU9bRi53cmFwWzBdXSksdm9pZCAwIT09T1tGLndyYXBbMV1dJiYodS53cmFwVD1PW0Yud3JhcFsxXV0pKTt5LnRleHR1cmVzW3hdPXV9dmFyIEksQjtmb3IoSSBpbiBBLm1hdGVyaWFscyl7eD1cbkEubWF0ZXJpYWxzW0ldO2ZvcihCIGluIHgucGFyYW1ldGVycylcImVudk1hcFwiPT09Qnx8XCJtYXBcIj09PUJ8fFwibGlnaHRNYXBcIj09PUJ8fFwiYnVtcE1hcFwiPT09Qj94LnBhcmFtZXRlcnNbQl09eS50ZXh0dXJlc1t4LnBhcmFtZXRlcnNbQl1dOlwic2hhZGluZ1wiPT09Qj94LnBhcmFtZXRlcnNbQl09XCJmbGF0XCI9PT14LnBhcmFtZXRlcnNbQl0/VEhSRUUuRmxhdFNoYWRpbmc6VEhSRUUuU21vb3RoU2hhZGluZzpcInNpZGVcIj09PUI/eC5wYXJhbWV0ZXJzW0JdPVwiZG91YmxlXCI9PXgucGFyYW1ldGVyc1tCXT9USFJFRS5Eb3VibGVTaWRlOlwiYmFja1wiPT14LnBhcmFtZXRlcnNbQl0/VEhSRUUuQmFja1NpZGU6VEhSRUUuRnJvbnRTaWRlOlwiYmxlbmRpbmdcIj09PUI/eC5wYXJhbWV0ZXJzW0JdPXgucGFyYW1ldGVyc1tCXWluIFRIUkVFP1RIUkVFW3gucGFyYW1ldGVyc1tCXV06VEhSRUUuTm9ybWFsQmxlbmRpbmc6XCJjb21iaW5lXCI9PT1CP3gucGFyYW1ldGVyc1tCXT14LnBhcmFtZXRlcnNbQl1pbiBUSFJFRT9cblRIUkVFW3gucGFyYW1ldGVyc1tCXV06VEhSRUUuTXVsdGlwbHlPcGVyYXRpb246XCJ2ZXJ0ZXhDb2xvcnNcIj09PUI/XCJmYWNlXCI9PXgucGFyYW1ldGVyc1tCXT94LnBhcmFtZXRlcnNbQl09VEhSRUUuRmFjZUNvbG9yczp4LnBhcmFtZXRlcnNbQl0mJih4LnBhcmFtZXRlcnNbQl09VEhSRUUuVmVydGV4Q29sb3JzKTpcIndyYXBSR0JcIj09PUImJihLPXgucGFyYW1ldGVyc1tCXSx4LnBhcmFtZXRlcnNbQl09bmV3IFRIUkVFLlZlY3RvcjMoS1swXSxLWzFdLEtbMl0pKTt2b2lkIDAhPT14LnBhcmFtZXRlcnMub3BhY2l0eSYmMT54LnBhcmFtZXRlcnMub3BhY2l0eSYmKHgucGFyYW1ldGVycy50cmFuc3BhcmVudD0hMCk7eC5wYXJhbWV0ZXJzLm5vcm1hbE1hcD8oSz1USFJFRS5TaGFkZXJMaWIubm9ybWFsbWFwLEY9VEhSRUUuVW5pZm9ybXNVdGlscy5jbG9uZShLLnVuaWZvcm1zKSx1PXgucGFyYW1ldGVycy5jb2xvcixPPXgucGFyYW1ldGVycy5zcGVjdWxhcixuPXgucGFyYW1ldGVycy5hbWJpZW50LFxuRD14LnBhcmFtZXRlcnMuc2hpbmluZXNzLEYudE5vcm1hbC52YWx1ZT15LnRleHR1cmVzW3gucGFyYW1ldGVycy5ub3JtYWxNYXBdLHgucGFyYW1ldGVycy5ub3JtYWxTY2FsZSYmRi51Tm9ybWFsU2NhbGUudmFsdWUuc2V0KHgucGFyYW1ldGVycy5ub3JtYWxTY2FsZVswXSx4LnBhcmFtZXRlcnMubm9ybWFsU2NhbGVbMV0pLHgucGFyYW1ldGVycy5tYXAmJihGLnREaWZmdXNlLnZhbHVlPXgucGFyYW1ldGVycy5tYXAsRi5lbmFibGVEaWZmdXNlLnZhbHVlPSEwKSx4LnBhcmFtZXRlcnMuZW52TWFwJiYoRi50Q3ViZS52YWx1ZT14LnBhcmFtZXRlcnMuZW52TWFwLEYuZW5hYmxlUmVmbGVjdGlvbi52YWx1ZT0hMCxGLnVSZWZsZWN0aXZpdHkudmFsdWU9eC5wYXJhbWV0ZXJzLnJlZmxlY3Rpdml0eSkseC5wYXJhbWV0ZXJzLmxpZ2h0TWFwJiYoRi50QU8udmFsdWU9eC5wYXJhbWV0ZXJzLmxpZ2h0TWFwLEYuZW5hYmxlQU8udmFsdWU9ITApLHgucGFyYW1ldGVycy5zcGVjdWxhck1hcCYmXG4oRi50U3BlY3VsYXIudmFsdWU9eS50ZXh0dXJlc1t4LnBhcmFtZXRlcnMuc3BlY3VsYXJNYXBdLEYuZW5hYmxlU3BlY3VsYXIudmFsdWU9ITApLHgucGFyYW1ldGVycy5kaXNwbGFjZW1lbnRNYXAmJihGLnREaXNwbGFjZW1lbnQudmFsdWU9eS50ZXh0dXJlc1t4LnBhcmFtZXRlcnMuZGlzcGxhY2VtZW50TWFwXSxGLmVuYWJsZURpc3BsYWNlbWVudC52YWx1ZT0hMCxGLnVEaXNwbGFjZW1lbnRCaWFzLnZhbHVlPXgucGFyYW1ldGVycy5kaXNwbGFjZW1lbnRCaWFzLEYudURpc3BsYWNlbWVudFNjYWxlLnZhbHVlPXgucGFyYW1ldGVycy5kaXNwbGFjZW1lbnRTY2FsZSksRi51RGlmZnVzZUNvbG9yLnZhbHVlLnNldEhleCh1KSxGLnVTcGVjdWxhckNvbG9yLnZhbHVlLnNldEhleChPKSxGLnVBbWJpZW50Q29sb3IudmFsdWUuc2V0SGV4KG4pLEYudVNoaW5pbmVzcy52YWx1ZT1ELHgucGFyYW1ldGVycy5vcGFjaXR5JiYoRi51T3BhY2l0eS52YWx1ZT14LnBhcmFtZXRlcnMub3BhY2l0eSksXG5zPW5ldyBUSFJFRS5TaGFkZXJNYXRlcmlhbCh7ZnJhZ21lbnRTaGFkZXI6Sy5mcmFnbWVudFNoYWRlcix2ZXJ0ZXhTaGFkZXI6Sy52ZXJ0ZXhTaGFkZXIsdW5pZm9ybXM6RixsaWdodHM6ITAsZm9nOiEwfSkpOnM9bmV3IFRIUkVFW3gudHlwZV0oeC5wYXJhbWV0ZXJzKTtzLm5hbWU9STt5Lm1hdGVyaWFsc1tJXT1zfWZvcihJIGluIEEubWF0ZXJpYWxzKWlmKHg9QS5tYXRlcmlhbHNbSV0seC5wYXJhbWV0ZXJzLm1hdGVyaWFscyl7Qj1bXTtmb3IodT0wO3U8eC5wYXJhbWV0ZXJzLm1hdGVyaWFscy5sZW5ndGg7dSsrKUIucHVzaCh5Lm1hdGVyaWFsc1t4LnBhcmFtZXRlcnMubWF0ZXJpYWxzW3VdXSk7eS5tYXRlcmlhbHNbSV0ubWF0ZXJpYWxzPUJ9ZSgpO3kuY2FtZXJhcyYmQS5kZWZhdWx0cy5jYW1lcmEmJih5LmN1cnJlbnRDYW1lcmE9eS5jYW1lcmFzW0EuZGVmYXVsdHMuY2FtZXJhXSk7eS5mb2dzJiZBLmRlZmF1bHRzLmZvZyYmKHkuc2NlbmUuZm9nPXkuZm9nc1tBLmRlZmF1bHRzLmZvZ10pO1xubC5jYWxsYmFja1N5bmMoeSk7aygpfX07VEhSRUUuVGV4dHVyZUxvYWRlcj1mdW5jdGlvbihhKXt0aGlzLm1hbmFnZXI9dm9pZCAwIT09YT9hOlRIUkVFLkRlZmF1bHRMb2FkaW5nTWFuYWdlcn07VEhSRUUuVGV4dHVyZUxvYWRlci5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLlRleHR1cmVMb2FkZXIsbG9hZDpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBUSFJFRS5JbWFnZUxvYWRlcih0aGlzLm1hbmFnZXIpO2Muc2V0Q3Jvc3NPcmlnaW4odGhpcy5jcm9zc09yaWdpbik7Yy5sb2FkKGEsZnVuY3Rpb24oYSl7YT1uZXcgVEhSRUUuVGV4dHVyZShhKTthLm5lZWRzVXBkYXRlPSEwO3ZvaWQgMCE9PWImJmIoYSl9KX0sc2V0Q3Jvc3NPcmlnaW46ZnVuY3Rpb24oYSl7dGhpcy5jcm9zc09yaWdpbj1hfX07VEhSRUUuTWF0ZXJpYWw9ZnVuY3Rpb24oKXt0aGlzLmlkPVRIUkVFLk1hdGVyaWFsSWRDb3VudCsrO3RoaXMudXVpZD1USFJFRS5NYXRoLmdlbmVyYXRlVVVJRCgpO3RoaXMubmFtZT1cIlwiO3RoaXMuc2lkZT1USFJFRS5Gcm9udFNpZGU7dGhpcy5vcGFjaXR5PTE7dGhpcy50cmFuc3BhcmVudD0hMTt0aGlzLmJsZW5kaW5nPVRIUkVFLk5vcm1hbEJsZW5kaW5nO3RoaXMuYmxlbmRTcmM9VEhSRUUuU3JjQWxwaGFGYWN0b3I7dGhpcy5ibGVuZERzdD1USFJFRS5PbmVNaW51c1NyY0FscGhhRmFjdG9yO3RoaXMuYmxlbmRFcXVhdGlvbj1USFJFRS5BZGRFcXVhdGlvbjt0aGlzLmRlcHRoV3JpdGU9dGhpcy5kZXB0aFRlc3Q9ITA7dGhpcy5wb2x5Z29uT2Zmc2V0PSExO3RoaXMub3ZlcmRyYXc9dGhpcy5hbHBoYVRlc3Q9dGhpcy5wb2x5Z29uT2Zmc2V0VW5pdHM9dGhpcy5wb2x5Z29uT2Zmc2V0RmFjdG9yPTA7dGhpcy5uZWVkc1VwZGF0ZT10aGlzLnZpc2libGU9ITB9O1xuVEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5NYXRlcmlhbCxzZXRWYWx1ZXM6ZnVuY3Rpb24oYSl7aWYodm9pZCAwIT09YSlmb3IodmFyIGIgaW4gYSl7dmFyIGM9YVtiXTtpZih2b2lkIDA9PT1jKWNvbnNvbGUud2FybihcIlRIUkVFLk1hdGVyaWFsOiAnXCIrYitcIicgcGFyYW1ldGVyIGlzIHVuZGVmaW5lZC5cIik7ZWxzZSBpZihiIGluIHRoaXMpe3ZhciBkPXRoaXNbYl07ZCBpbnN0YW5jZW9mIFRIUkVFLkNvbG9yP2Quc2V0KGMpOmQgaW5zdGFuY2VvZiBUSFJFRS5WZWN0b3IzJiZjIGluc3RhbmNlb2YgVEhSRUUuVmVjdG9yMz9kLmNvcHkoYyk6dGhpc1tiXT1cIm92ZXJkcmF3XCI9PWI/TnVtYmVyKGMpOmN9fX0sY2xvbmU6ZnVuY3Rpb24oYSl7dm9pZCAwPT09YSYmKGE9bmV3IFRIUkVFLk1hdGVyaWFsKTthLm5hbWU9dGhpcy5uYW1lO2Euc2lkZT10aGlzLnNpZGU7YS5vcGFjaXR5PXRoaXMub3BhY2l0eTthLnRyYW5zcGFyZW50PXRoaXMudHJhbnNwYXJlbnQ7XG5hLmJsZW5kaW5nPXRoaXMuYmxlbmRpbmc7YS5ibGVuZFNyYz10aGlzLmJsZW5kU3JjO2EuYmxlbmREc3Q9dGhpcy5ibGVuZERzdDthLmJsZW5kRXF1YXRpb249dGhpcy5ibGVuZEVxdWF0aW9uO2EuZGVwdGhUZXN0PXRoaXMuZGVwdGhUZXN0O2EuZGVwdGhXcml0ZT10aGlzLmRlcHRoV3JpdGU7YS5wb2x5Z29uT2Zmc2V0PXRoaXMucG9seWdvbk9mZnNldDthLnBvbHlnb25PZmZzZXRGYWN0b3I9dGhpcy5wb2x5Z29uT2Zmc2V0RmFjdG9yO2EucG9seWdvbk9mZnNldFVuaXRzPXRoaXMucG9seWdvbk9mZnNldFVuaXRzO2EuYWxwaGFUZXN0PXRoaXMuYWxwaGFUZXN0O2Eub3ZlcmRyYXc9dGhpcy5vdmVyZHJhdzthLnZpc2libGU9dGhpcy52aXNpYmxlO3JldHVybiBhfSxkaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiZGlzcG9zZVwifSl9fTtUSFJFRS5FdmVudERpc3BhdGNoZXIucHJvdG90eXBlLmFwcGx5KFRIUkVFLk1hdGVyaWFsLnByb3RvdHlwZSk7XG5USFJFRS5NYXRlcmlhbElkQ291bnQ9MDtUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbD1mdW5jdGlvbihhKXtUSFJFRS5NYXRlcmlhbC5jYWxsKHRoaXMpO3RoaXMuY29sb3I9bmV3IFRIUkVFLkNvbG9yKDE2Nzc3MjE1KTt0aGlzLmxpbmV3aWR0aD0xO3RoaXMubGluZWpvaW49dGhpcy5saW5lY2FwPVwicm91bmRcIjt0aGlzLnZlcnRleENvbG9ycz0hMTt0aGlzLmZvZz0hMDt0aGlzLnNldFZhbHVlcyhhKX07VEhSRUUuTGluZUJhc2ljTWF0ZXJpYWwucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlKTtcblRIUkVFLkxpbmVCYXNpY01hdGVyaWFsLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbDtUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzLGEpO2EuY29sb3IuY29weSh0aGlzLmNvbG9yKTthLmxpbmV3aWR0aD10aGlzLmxpbmV3aWR0aDthLmxpbmVjYXA9dGhpcy5saW5lY2FwO2EubGluZWpvaW49dGhpcy5saW5lam9pbjthLnZlcnRleENvbG9ycz10aGlzLnZlcnRleENvbG9yczthLmZvZz10aGlzLmZvZztyZXR1cm4gYX07VEhSRUUuTGluZURhc2hlZE1hdGVyaWFsPWZ1bmN0aW9uKGEpe1RIUkVFLk1hdGVyaWFsLmNhbGwodGhpcyk7dGhpcy5jb2xvcj1uZXcgVEhSRUUuQ29sb3IoMTY3NzcyMTUpO3RoaXMuc2NhbGU9dGhpcy5saW5ld2lkdGg9MTt0aGlzLmRhc2hTaXplPTM7dGhpcy5nYXBTaXplPTE7dGhpcy52ZXJ0ZXhDb2xvcnM9ITE7dGhpcy5mb2c9ITA7dGhpcy5zZXRWYWx1ZXMoYSl9O1RIUkVFLkxpbmVEYXNoZWRNYXRlcmlhbC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUpO1xuVEhSRUUuTGluZURhc2hlZE1hdGVyaWFsLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5MaW5lRGFzaGVkTWF0ZXJpYWw7VEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyxhKTthLmNvbG9yLmNvcHkodGhpcy5jb2xvcik7YS5saW5ld2lkdGg9dGhpcy5saW5ld2lkdGg7YS5zY2FsZT10aGlzLnNjYWxlO2EuZGFzaFNpemU9dGhpcy5kYXNoU2l6ZTthLmdhcFNpemU9dGhpcy5nYXBTaXplO2EudmVydGV4Q29sb3JzPXRoaXMudmVydGV4Q29sb3JzO2EuZm9nPXRoaXMuZm9nO3JldHVybiBhfTtUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbD1mdW5jdGlvbihhKXtUSFJFRS5NYXRlcmlhbC5jYWxsKHRoaXMpO3RoaXMuY29sb3I9bmV3IFRIUkVFLkNvbG9yKDE2Nzc3MjE1KTt0aGlzLmVudk1hcD10aGlzLnNwZWN1bGFyTWFwPXRoaXMubGlnaHRNYXA9dGhpcy5tYXA9bnVsbDt0aGlzLmNvbWJpbmU9VEhSRUUuTXVsdGlwbHlPcGVyYXRpb247dGhpcy5yZWZsZWN0aXZpdHk9MTt0aGlzLnJlZnJhY3Rpb25SYXRpbz0wLjk4O3RoaXMuZm9nPSEwO3RoaXMuc2hhZGluZz1USFJFRS5TbW9vdGhTaGFkaW5nO3RoaXMud2lyZWZyYW1lPSExO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPTE7dGhpcy53aXJlZnJhbWVMaW5lam9pbj10aGlzLndpcmVmcmFtZUxpbmVjYXA9XCJyb3VuZFwiO3RoaXMudmVydGV4Q29sb3JzPVRIUkVFLk5vQ29sb3JzO3RoaXMubW9ycGhUYXJnZXRzPXRoaXMuc2tpbm5pbmc9ITE7dGhpcy5zZXRWYWx1ZXMoYSl9O1xuVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlKTtcblRIUkVFLk1lc2hCYXNpY01hdGVyaWFsLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbDtUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzLGEpO2EuY29sb3IuY29weSh0aGlzLmNvbG9yKTthLm1hcD10aGlzLm1hcDthLmxpZ2h0TWFwPXRoaXMubGlnaHRNYXA7YS5zcGVjdWxhck1hcD10aGlzLnNwZWN1bGFyTWFwO2EuZW52TWFwPXRoaXMuZW52TWFwO2EuY29tYmluZT10aGlzLmNvbWJpbmU7YS5yZWZsZWN0aXZpdHk9dGhpcy5yZWZsZWN0aXZpdHk7YS5yZWZyYWN0aW9uUmF0aW89dGhpcy5yZWZyYWN0aW9uUmF0aW87YS5mb2c9dGhpcy5mb2c7YS5zaGFkaW5nPXRoaXMuc2hhZGluZzthLndpcmVmcmFtZT10aGlzLndpcmVmcmFtZTthLndpcmVmcmFtZUxpbmV3aWR0aD10aGlzLndpcmVmcmFtZUxpbmV3aWR0aDthLndpcmVmcmFtZUxpbmVjYXA9dGhpcy53aXJlZnJhbWVMaW5lY2FwO2Eud2lyZWZyYW1lTGluZWpvaW49XG50aGlzLndpcmVmcmFtZUxpbmVqb2luO2EudmVydGV4Q29sb3JzPXRoaXMudmVydGV4Q29sb3JzO2Euc2tpbm5pbmc9dGhpcy5za2lubmluZzthLm1vcnBoVGFyZ2V0cz10aGlzLm1vcnBoVGFyZ2V0cztyZXR1cm4gYX07VEhSRUUuTWVzaExhbWJlcnRNYXRlcmlhbD1mdW5jdGlvbihhKXtUSFJFRS5NYXRlcmlhbC5jYWxsKHRoaXMpO3RoaXMuY29sb3I9bmV3IFRIUkVFLkNvbG9yKDE2Nzc3MjE1KTt0aGlzLmFtYmllbnQ9bmV3IFRIUkVFLkNvbG9yKDE2Nzc3MjE1KTt0aGlzLmVtaXNzaXZlPW5ldyBUSFJFRS5Db2xvcigwKTt0aGlzLndyYXBBcm91bmQ9ITE7dGhpcy53cmFwUkdCPW5ldyBUSFJFRS5WZWN0b3IzKDEsMSwxKTt0aGlzLmVudk1hcD10aGlzLnNwZWN1bGFyTWFwPXRoaXMubGlnaHRNYXA9dGhpcy5tYXA9bnVsbDt0aGlzLmNvbWJpbmU9VEhSRUUuTXVsdGlwbHlPcGVyYXRpb247dGhpcy5yZWZsZWN0aXZpdHk9MTt0aGlzLnJlZnJhY3Rpb25SYXRpbz0wLjk4O3RoaXMuZm9nPSEwO3RoaXMuc2hhZGluZz1USFJFRS5TbW9vdGhTaGFkaW5nO3RoaXMud2lyZWZyYW1lPSExO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPTE7dGhpcy53aXJlZnJhbWVMaW5lam9pbj10aGlzLndpcmVmcmFtZUxpbmVjYXA9XG5cInJvdW5kXCI7dGhpcy52ZXJ0ZXhDb2xvcnM9VEhSRUUuTm9Db2xvcnM7dGhpcy5tb3JwaE5vcm1hbHM9dGhpcy5tb3JwaFRhcmdldHM9dGhpcy5za2lubmluZz0hMTt0aGlzLnNldFZhbHVlcyhhKX07VEhSRUUuTWVzaExhbWJlcnRNYXRlcmlhbC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUpO1xuVEhSRUUuTWVzaExhbWJlcnRNYXRlcmlhbC5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuTWVzaExhbWJlcnRNYXRlcmlhbDtUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzLGEpO2EuY29sb3IuY29weSh0aGlzLmNvbG9yKTthLmFtYmllbnQuY29weSh0aGlzLmFtYmllbnQpO2EuZW1pc3NpdmUuY29weSh0aGlzLmVtaXNzaXZlKTthLndyYXBBcm91bmQ9dGhpcy53cmFwQXJvdW5kO2Eud3JhcFJHQi5jb3B5KHRoaXMud3JhcFJHQik7YS5tYXA9dGhpcy5tYXA7YS5saWdodE1hcD10aGlzLmxpZ2h0TWFwO2Euc3BlY3VsYXJNYXA9dGhpcy5zcGVjdWxhck1hcDthLmVudk1hcD10aGlzLmVudk1hcDthLmNvbWJpbmU9dGhpcy5jb21iaW5lO2EucmVmbGVjdGl2aXR5PXRoaXMucmVmbGVjdGl2aXR5O2EucmVmcmFjdGlvblJhdGlvPXRoaXMucmVmcmFjdGlvblJhdGlvO2EuZm9nPXRoaXMuZm9nO2Euc2hhZGluZz10aGlzLnNoYWRpbmc7XG5hLndpcmVmcmFtZT10aGlzLndpcmVmcmFtZTthLndpcmVmcmFtZUxpbmV3aWR0aD10aGlzLndpcmVmcmFtZUxpbmV3aWR0aDthLndpcmVmcmFtZUxpbmVjYXA9dGhpcy53aXJlZnJhbWVMaW5lY2FwO2Eud2lyZWZyYW1lTGluZWpvaW49dGhpcy53aXJlZnJhbWVMaW5lam9pbjthLnZlcnRleENvbG9ycz10aGlzLnZlcnRleENvbG9yczthLnNraW5uaW5nPXRoaXMuc2tpbm5pbmc7YS5tb3JwaFRhcmdldHM9dGhpcy5tb3JwaFRhcmdldHM7YS5tb3JwaE5vcm1hbHM9dGhpcy5tb3JwaE5vcm1hbHM7cmV0dXJuIGF9O1RIUkVFLk1lc2hQaG9uZ01hdGVyaWFsPWZ1bmN0aW9uKGEpe1RIUkVFLk1hdGVyaWFsLmNhbGwodGhpcyk7dGhpcy5jb2xvcj1uZXcgVEhSRUUuQ29sb3IoMTY3NzcyMTUpO3RoaXMuYW1iaWVudD1uZXcgVEhSRUUuQ29sb3IoMTY3NzcyMTUpO3RoaXMuZW1pc3NpdmU9bmV3IFRIUkVFLkNvbG9yKDApO3RoaXMuc3BlY3VsYXI9bmV3IFRIUkVFLkNvbG9yKDExMTg0ODEpO3RoaXMuc2hpbmluZXNzPTMwO3RoaXMubWV0YWw9ITE7dGhpcy5wZXJQaXhlbD0hMDt0aGlzLndyYXBBcm91bmQ9ITE7dGhpcy53cmFwUkdCPW5ldyBUSFJFRS5WZWN0b3IzKDEsMSwxKTt0aGlzLmJ1bXBNYXA9dGhpcy5saWdodE1hcD10aGlzLm1hcD1udWxsO3RoaXMuYnVtcFNjYWxlPTE7dGhpcy5ub3JtYWxNYXA9bnVsbDt0aGlzLm5vcm1hbFNjYWxlPW5ldyBUSFJFRS5WZWN0b3IyKDEsMSk7dGhpcy5lbnZNYXA9dGhpcy5zcGVjdWxhck1hcD1udWxsO3RoaXMuY29tYmluZT1USFJFRS5NdWx0aXBseU9wZXJhdGlvbjtcbnRoaXMucmVmbGVjdGl2aXR5PTE7dGhpcy5yZWZyYWN0aW9uUmF0aW89MC45ODt0aGlzLmZvZz0hMDt0aGlzLnNoYWRpbmc9VEhSRUUuU21vb3RoU2hhZGluZzt0aGlzLndpcmVmcmFtZT0hMTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD0xO3RoaXMud2lyZWZyYW1lTGluZWpvaW49dGhpcy53aXJlZnJhbWVMaW5lY2FwPVwicm91bmRcIjt0aGlzLnZlcnRleENvbG9ycz1USFJFRS5Ob0NvbG9yczt0aGlzLm1vcnBoTm9ybWFscz10aGlzLm1vcnBoVGFyZ2V0cz10aGlzLnNraW5uaW5nPSExO3RoaXMuc2V0VmFsdWVzKGEpfTtUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUpO1xuVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsO1RIUkVFLk1hdGVyaWFsLnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMsYSk7YS5jb2xvci5jb3B5KHRoaXMuY29sb3IpO2EuYW1iaWVudC5jb3B5KHRoaXMuYW1iaWVudCk7YS5lbWlzc2l2ZS5jb3B5KHRoaXMuZW1pc3NpdmUpO2Euc3BlY3VsYXIuY29weSh0aGlzLnNwZWN1bGFyKTthLnNoaW5pbmVzcz10aGlzLnNoaW5pbmVzczthLm1ldGFsPXRoaXMubWV0YWw7YS5wZXJQaXhlbD10aGlzLnBlclBpeGVsO2Eud3JhcEFyb3VuZD10aGlzLndyYXBBcm91bmQ7YS53cmFwUkdCLmNvcHkodGhpcy53cmFwUkdCKTthLm1hcD10aGlzLm1hcDthLmxpZ2h0TWFwPXRoaXMubGlnaHRNYXA7YS5idW1wTWFwPXRoaXMuYnVtcE1hcDthLmJ1bXBTY2FsZT10aGlzLmJ1bXBTY2FsZTthLm5vcm1hbE1hcD10aGlzLm5vcm1hbE1hcDthLm5vcm1hbFNjYWxlLmNvcHkodGhpcy5ub3JtYWxTY2FsZSk7XG5hLnNwZWN1bGFyTWFwPXRoaXMuc3BlY3VsYXJNYXA7YS5lbnZNYXA9dGhpcy5lbnZNYXA7YS5jb21iaW5lPXRoaXMuY29tYmluZTthLnJlZmxlY3Rpdml0eT10aGlzLnJlZmxlY3Rpdml0eTthLnJlZnJhY3Rpb25SYXRpbz10aGlzLnJlZnJhY3Rpb25SYXRpbzthLmZvZz10aGlzLmZvZzthLnNoYWRpbmc9dGhpcy5zaGFkaW5nO2Eud2lyZWZyYW1lPXRoaXMud2lyZWZyYW1lO2Eud2lyZWZyYW1lTGluZXdpZHRoPXRoaXMud2lyZWZyYW1lTGluZXdpZHRoO2Eud2lyZWZyYW1lTGluZWNhcD10aGlzLndpcmVmcmFtZUxpbmVjYXA7YS53aXJlZnJhbWVMaW5lam9pbj10aGlzLndpcmVmcmFtZUxpbmVqb2luO2EudmVydGV4Q29sb3JzPXRoaXMudmVydGV4Q29sb3JzO2Euc2tpbm5pbmc9dGhpcy5za2lubmluZzthLm1vcnBoVGFyZ2V0cz10aGlzLm1vcnBoVGFyZ2V0czthLm1vcnBoTm9ybWFscz10aGlzLm1vcnBoTm9ybWFscztyZXR1cm4gYX07VEhSRUUuTWVzaERlcHRoTWF0ZXJpYWw9ZnVuY3Rpb24oYSl7VEhSRUUuTWF0ZXJpYWwuY2FsbCh0aGlzKTt0aGlzLndpcmVmcmFtZT0hMTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD0xO3RoaXMuc2V0VmFsdWVzKGEpfTtUSFJFRS5NZXNoRGVwdGhNYXRlcmlhbC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUpO1RIUkVFLk1lc2hEZXB0aE1hdGVyaWFsLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5NZXNoRGVwdGhNYXRlcmlhbDtUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzLGEpO2Eud2lyZWZyYW1lPXRoaXMud2lyZWZyYW1lO2Eud2lyZWZyYW1lTGluZXdpZHRoPXRoaXMud2lyZWZyYW1lTGluZXdpZHRoO3JldHVybiBhfTtUSFJFRS5NZXNoTm9ybWFsTWF0ZXJpYWw9ZnVuY3Rpb24oYSl7VEhSRUUuTWF0ZXJpYWwuY2FsbCh0aGlzLGEpO3RoaXMuc2hhZGluZz1USFJFRS5GbGF0U2hhZGluZzt0aGlzLndpcmVmcmFtZT0hMTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD0xO3RoaXMubW9ycGhUYXJnZXRzPSExO3RoaXMuc2V0VmFsdWVzKGEpfTtUSFJFRS5NZXNoTm9ybWFsTWF0ZXJpYWwucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlKTtUSFJFRS5NZXNoTm9ybWFsTWF0ZXJpYWwucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLk1lc2hOb3JtYWxNYXRlcmlhbDtUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzLGEpO2Euc2hhZGluZz10aGlzLnNoYWRpbmc7YS53aXJlZnJhbWU9dGhpcy53aXJlZnJhbWU7YS53aXJlZnJhbWVMaW5ld2lkdGg9dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg7cmV0dXJuIGF9O1RIUkVFLk1lc2hGYWNlTWF0ZXJpYWw9ZnVuY3Rpb24oYSl7dGhpcy5tYXRlcmlhbHM9YSBpbnN0YW5jZW9mIEFycmF5P2E6W119O1RIUkVFLk1lc2hGYWNlTWF0ZXJpYWwucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPW5ldyBUSFJFRS5NZXNoRmFjZU1hdGVyaWFsLGI9MDtiPHRoaXMubWF0ZXJpYWxzLmxlbmd0aDtiKyspYS5tYXRlcmlhbHMucHVzaCh0aGlzLm1hdGVyaWFsc1tiXS5jbG9uZSgpKTtyZXR1cm4gYX07VEhSRUUuUGFydGljbGVTeXN0ZW1NYXRlcmlhbD1mdW5jdGlvbihhKXtUSFJFRS5NYXRlcmlhbC5jYWxsKHRoaXMpO3RoaXMuY29sb3I9bmV3IFRIUkVFLkNvbG9yKDE2Nzc3MjE1KTt0aGlzLm1hcD1udWxsO3RoaXMuc2l6ZT0xO3RoaXMuc2l6ZUF0dGVudWF0aW9uPSEwO3RoaXMudmVydGV4Q29sb3JzPSExO3RoaXMuZm9nPSEwO3RoaXMuc2V0VmFsdWVzKGEpfTtUSFJFRS5QYXJ0aWNsZVN5c3RlbU1hdGVyaWFsLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk1hdGVyaWFsLnByb3RvdHlwZSk7XG5USFJFRS5QYXJ0aWNsZVN5c3RlbU1hdGVyaWFsLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5QYXJ0aWNsZVN5c3RlbU1hdGVyaWFsO1RIUkVFLk1hdGVyaWFsLnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMsYSk7YS5jb2xvci5jb3B5KHRoaXMuY29sb3IpO2EubWFwPXRoaXMubWFwO2Euc2l6ZT10aGlzLnNpemU7YS5zaXplQXR0ZW51YXRpb249dGhpcy5zaXplQXR0ZW51YXRpb247YS52ZXJ0ZXhDb2xvcnM9dGhpcy52ZXJ0ZXhDb2xvcnM7YS5mb2c9dGhpcy5mb2c7cmV0dXJuIGF9O1RIUkVFLlBhcnRpY2xlQmFzaWNNYXRlcmlhbD1USFJFRS5QYXJ0aWNsZVN5c3RlbU1hdGVyaWFsO1RIUkVFLlNoYWRlck1hdGVyaWFsPWZ1bmN0aW9uKGEpe1RIUkVFLk1hdGVyaWFsLmNhbGwodGhpcyk7dGhpcy52ZXJ0ZXhTaGFkZXI9dGhpcy5mcmFnbWVudFNoYWRlcj1cInZvaWQgbWFpbigpIHt9XCI7dGhpcy51bmlmb3Jtcz17fTt0aGlzLmRlZmluZXM9e307dGhpcy5hdHRyaWJ1dGVzPW51bGw7dGhpcy5zaGFkaW5nPVRIUkVFLlNtb290aFNoYWRpbmc7dGhpcy5saW5ld2lkdGg9MTt0aGlzLndpcmVmcmFtZT0hMTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD0xO3RoaXMubGlnaHRzPXRoaXMuZm9nPSExO3RoaXMudmVydGV4Q29sb3JzPVRIUkVFLk5vQ29sb3JzO3RoaXMubW9ycGhOb3JtYWxzPXRoaXMubW9ycGhUYXJnZXRzPXRoaXMuc2tpbm5pbmc9ITE7dGhpcy5kZWZhdWx0QXR0cmlidXRlVmFsdWVzPXtjb2xvcjpbMSwxLDFdLHV2OlswLDBdLHV2MjpbMCwwXX07dGhpcy5pbmRleDBBdHRyaWJ1dGVOYW1lPVwicG9zaXRpb25cIjt0aGlzLnNldFZhbHVlcyhhKX07XG5USFJFRS5TaGFkZXJNYXRlcmlhbC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUpO1xuVEhSRUUuU2hhZGVyTWF0ZXJpYWwucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlNoYWRlck1hdGVyaWFsO1RIUkVFLk1hdGVyaWFsLnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMsYSk7YS5mcmFnbWVudFNoYWRlcj10aGlzLmZyYWdtZW50U2hhZGVyO2EudmVydGV4U2hhZGVyPXRoaXMudmVydGV4U2hhZGVyO2EudW5pZm9ybXM9VEhSRUUuVW5pZm9ybXNVdGlscy5jbG9uZSh0aGlzLnVuaWZvcm1zKTthLmF0dHJpYnV0ZXM9dGhpcy5hdHRyaWJ1dGVzO2EuZGVmaW5lcz10aGlzLmRlZmluZXM7YS5zaGFkaW5nPXRoaXMuc2hhZGluZzthLndpcmVmcmFtZT10aGlzLndpcmVmcmFtZTthLndpcmVmcmFtZUxpbmV3aWR0aD10aGlzLndpcmVmcmFtZUxpbmV3aWR0aDthLmZvZz10aGlzLmZvZzthLmxpZ2h0cz10aGlzLmxpZ2h0czthLnZlcnRleENvbG9ycz10aGlzLnZlcnRleENvbG9yczthLnNraW5uaW5nPXRoaXMuc2tpbm5pbmc7YS5tb3JwaFRhcmdldHM9XG50aGlzLm1vcnBoVGFyZ2V0czthLm1vcnBoTm9ybWFscz10aGlzLm1vcnBoTm9ybWFscztyZXR1cm4gYX07VEhSRUUuU3ByaXRlTWF0ZXJpYWw9ZnVuY3Rpb24oYSl7VEhSRUUuTWF0ZXJpYWwuY2FsbCh0aGlzKTt0aGlzLmNvbG9yPW5ldyBUSFJFRS5Db2xvcigxNjc3NzIxNSk7dGhpcy5tYXA9bnVsbDt0aGlzLnJvdGF0aW9uPTA7dGhpcy5mb2c9ITE7dGhpcy51dk9mZnNldD1uZXcgVEhSRUUuVmVjdG9yMigwLDApO3RoaXMudXZTY2FsZT1uZXcgVEhSRUUuVmVjdG9yMigxLDEpO3RoaXMuc2V0VmFsdWVzKGEpfTtUSFJFRS5TcHJpdGVNYXRlcmlhbC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUpO1xuVEhSRUUuU3ByaXRlTWF0ZXJpYWwucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlNwcml0ZU1hdGVyaWFsO1RIUkVFLk1hdGVyaWFsLnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMsYSk7YS5jb2xvci5jb3B5KHRoaXMuY29sb3IpO2EubWFwPXRoaXMubWFwO2Eucm90YXRpb249dGhpcy5yb3RhdGlvbjthLnV2T2Zmc2V0LmNvcHkodGhpcy51dk9mZnNldCk7YS51dlNjYWxlLmNvcHkodGhpcy51dlNjYWxlKTthLmZvZz10aGlzLmZvZztyZXR1cm4gYX07VEhSRUUuU3ByaXRlQ2FudmFzTWF0ZXJpYWw9ZnVuY3Rpb24oYSl7VEhSRUUuTWF0ZXJpYWwuY2FsbCh0aGlzKTt0aGlzLmNvbG9yPW5ldyBUSFJFRS5Db2xvcigxNjc3NzIxNSk7dGhpcy5wcm9ncmFtPWZ1bmN0aW9uKCl7fTt0aGlzLnNldFZhbHVlcyhhKX07VEhSRUUuU3ByaXRlQ2FudmFzTWF0ZXJpYWwucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlKTtUSFJFRS5TcHJpdGVDYW52YXNNYXRlcmlhbC5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuU3ByaXRlQ2FudmFzTWF0ZXJpYWw7VEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyxhKTthLmNvbG9yLmNvcHkodGhpcy5jb2xvcik7YS5wcm9ncmFtPXRoaXMucHJvZ3JhbTtyZXR1cm4gYX07VEhSRUUuUGFydGljbGVDYW52YXNNYXRlcmlhbD1USFJFRS5TcHJpdGVDYW52YXNNYXRlcmlhbDtUSFJFRS5UZXh0dXJlPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGgsZyxpKXt0aGlzLmlkPVRIUkVFLlRleHR1cmVJZENvdW50Kys7dGhpcy51dWlkPVRIUkVFLk1hdGguZ2VuZXJhdGVVVUlEKCk7dGhpcy5uYW1lPVwiXCI7dGhpcy5pbWFnZT1hO3RoaXMubWlwbWFwcz1bXTt0aGlzLm1hcHBpbmc9dm9pZCAwIT09Yj9iOm5ldyBUSFJFRS5VVk1hcHBpbmc7dGhpcy53cmFwUz12b2lkIDAhPT1jP2M6VEhSRUUuQ2xhbXBUb0VkZ2VXcmFwcGluZzt0aGlzLndyYXBUPXZvaWQgMCE9PWQ/ZDpUSFJFRS5DbGFtcFRvRWRnZVdyYXBwaW5nO3RoaXMubWFnRmlsdGVyPXZvaWQgMCE9PWU/ZTpUSFJFRS5MaW5lYXJGaWx0ZXI7dGhpcy5taW5GaWx0ZXI9dm9pZCAwIT09Zj9mOlRIUkVFLkxpbmVhck1pcE1hcExpbmVhckZpbHRlcjt0aGlzLmFuaXNvdHJvcHk9dm9pZCAwIT09aT9pOjE7dGhpcy5mb3JtYXQ9dm9pZCAwIT09aD9oOlRIUkVFLlJHQkFGb3JtYXQ7dGhpcy50eXBlPXZvaWQgMCE9PWc/ZzpUSFJFRS5VbnNpZ25lZEJ5dGVUeXBlO1xudGhpcy5vZmZzZXQ9bmV3IFRIUkVFLlZlY3RvcjIoMCwwKTt0aGlzLnJlcGVhdD1uZXcgVEhSRUUuVmVjdG9yMigxLDEpO3RoaXMuZ2VuZXJhdGVNaXBtYXBzPSEwO3RoaXMucHJlbXVsdGlwbHlBbHBoYT0hMTt0aGlzLmZsaXBZPSEwO3RoaXMudW5wYWNrQWxpZ25tZW50PTQ7dGhpcy5uZWVkc1VwZGF0ZT0hMTt0aGlzLm9uVXBkYXRlPW51bGx9O1xuVEhSRUUuVGV4dHVyZS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLlRleHR1cmUsY2xvbmU6ZnVuY3Rpb24oYSl7dm9pZCAwPT09YSYmKGE9bmV3IFRIUkVFLlRleHR1cmUpO2EuaW1hZ2U9dGhpcy5pbWFnZTthLm1pcG1hcHM9dGhpcy5taXBtYXBzLnNsaWNlKDApO2EubWFwcGluZz10aGlzLm1hcHBpbmc7YS53cmFwUz10aGlzLndyYXBTO2Eud3JhcFQ9dGhpcy53cmFwVDthLm1hZ0ZpbHRlcj10aGlzLm1hZ0ZpbHRlcjthLm1pbkZpbHRlcj10aGlzLm1pbkZpbHRlcjthLmFuaXNvdHJvcHk9dGhpcy5hbmlzb3Ryb3B5O2EuZm9ybWF0PXRoaXMuZm9ybWF0O2EudHlwZT10aGlzLnR5cGU7YS5vZmZzZXQuY29weSh0aGlzLm9mZnNldCk7YS5yZXBlYXQuY29weSh0aGlzLnJlcGVhdCk7YS5nZW5lcmF0ZU1pcG1hcHM9dGhpcy5nZW5lcmF0ZU1pcG1hcHM7YS5wcmVtdWx0aXBseUFscGhhPXRoaXMucHJlbXVsdGlwbHlBbHBoYTthLmZsaXBZPXRoaXMuZmxpcFk7YS51bnBhY2tBbGlnbm1lbnQ9XG50aGlzLnVucGFja0FsaWdubWVudDtyZXR1cm4gYX0sZGlzcG9zZTpmdW5jdGlvbigpe3RoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImRpc3Bvc2VcIn0pfX07VEhSRUUuRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZS5hcHBseShUSFJFRS5UZXh0dXJlLnByb3RvdHlwZSk7VEhSRUUuVGV4dHVyZUlkQ291bnQ9MDtUSFJFRS5Db21wcmVzc2VkVGV4dHVyZT1mdW5jdGlvbihhLGIsYyxkLGUsZixoLGcsaSxrLG0pe1RIUkVFLlRleHR1cmUuY2FsbCh0aGlzLG51bGwsZixoLGcsaSxrLGQsZSxtKTt0aGlzLmltYWdlPXt3aWR0aDpiLGhlaWdodDpjfTt0aGlzLm1pcG1hcHM9YTt0aGlzLmdlbmVyYXRlTWlwbWFwcz0hMX07VEhSRUUuQ29tcHJlc3NlZFRleHR1cmUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuVGV4dHVyZS5wcm90b3R5cGUpO1RIUkVFLkNvbXByZXNzZWRUZXh0dXJlLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5Db21wcmVzc2VkVGV4dHVyZTtUSFJFRS5UZXh0dXJlLnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMsYSk7cmV0dXJuIGF9O1RIUkVFLkRhdGFUZXh0dXJlPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGgsZyxpLGssbSl7VEhSRUUuVGV4dHVyZS5jYWxsKHRoaXMsbnVsbCxmLGgsZyxpLGssZCxlLG0pO3RoaXMuaW1hZ2U9e2RhdGE6YSx3aWR0aDpiLGhlaWdodDpjfX07VEhSRUUuRGF0YVRleHR1cmUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuVGV4dHVyZS5wcm90b3R5cGUpO1RIUkVFLkRhdGFUZXh0dXJlLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5EYXRhVGV4dHVyZTtUSFJFRS5UZXh0dXJlLnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMsYSk7cmV0dXJuIGF9O1RIUkVFLlBhcnRpY2xlU3lzdGVtPWZ1bmN0aW9uKGEsYil7VEhSRUUuT2JqZWN0M0QuY2FsbCh0aGlzKTt0aGlzLmdlb21ldHJ5PXZvaWQgMCE9PWE/YTpuZXcgVEhSRUUuR2VvbWV0cnk7dGhpcy5tYXRlcmlhbD12b2lkIDAhPT1iP2I6bmV3IFRIUkVFLlBhcnRpY2xlU3lzdGVtTWF0ZXJpYWwoe2NvbG9yOjE2Nzc3MjE1Kk1hdGgucmFuZG9tKCl9KTt0aGlzLmZydXN0dW1DdWxsZWQ9dGhpcy5zb3J0UGFydGljbGVzPSExfTtUSFJFRS5QYXJ0aWNsZVN5c3RlbS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUpO1xuVEhSRUUuUGFydGljbGVTeXN0ZW0ucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEmJihhPW5ldyBUSFJFRS5QYXJ0aWNsZVN5c3RlbSh0aGlzLmdlb21ldHJ5LHRoaXMubWF0ZXJpYWwpKTthLnNvcnRQYXJ0aWNsZXM9dGhpcy5zb3J0UGFydGljbGVzO1RIUkVFLk9iamVjdDNELnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMsYSk7cmV0dXJuIGF9O1RIUkVFLkxpbmU9ZnVuY3Rpb24oYSxiLGMpe1RIUkVFLk9iamVjdDNELmNhbGwodGhpcyk7dGhpcy5nZW9tZXRyeT12b2lkIDAhPT1hP2E6bmV3IFRIUkVFLkdlb21ldHJ5O3RoaXMubWF0ZXJpYWw9dm9pZCAwIT09Yj9iOm5ldyBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCh7Y29sb3I6MTY3NzcyMTUqTWF0aC5yYW5kb20oKX0pO3RoaXMudHlwZT12b2lkIDAhPT1jP2M6VEhSRUUuTGluZVN0cmlwfTtUSFJFRS5MaW5lU3RyaXA9MDtUSFJFRS5MaW5lUGllY2VzPTE7VEhSRUUuTGluZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUpO1RIUkVFLkxpbmUucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEmJihhPW5ldyBUSFJFRS5MaW5lKHRoaXMuZ2VvbWV0cnksdGhpcy5tYXRlcmlhbCx0aGlzLnR5cGUpKTtUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzLGEpO3JldHVybiBhfTtUSFJFRS5NZXNoPWZ1bmN0aW9uKGEsYil7VEhSRUUuT2JqZWN0M0QuY2FsbCh0aGlzKTt0aGlzLmdlb21ldHJ5PXZvaWQgMCE9PWE/YTpuZXcgVEhSRUUuR2VvbWV0cnk7dGhpcy5tYXRlcmlhbD12b2lkIDAhPT1iP2I6bmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtjb2xvcjoxNjc3NzIxNSpNYXRoLnJhbmRvbSgpfSk7dGhpcy51cGRhdGVNb3JwaFRhcmdldHMoKX07VEhSRUUuTWVzaC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUpO1xuVEhSRUUuTWVzaC5wcm90b3R5cGUudXBkYXRlTW9ycGhUYXJnZXRzPWZ1bmN0aW9uKCl7aWYoMDx0aGlzLmdlb21ldHJ5Lm1vcnBoVGFyZ2V0cy5sZW5ndGgpe3RoaXMubW9ycGhUYXJnZXRCYXNlPS0xO3RoaXMubW9ycGhUYXJnZXRGb3JjZWRPcmRlcj1bXTt0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcz1bXTt0aGlzLm1vcnBoVGFyZ2V0RGljdGlvbmFyeT17fTtmb3IodmFyIGE9MCxiPXRoaXMuZ2VvbWV0cnkubW9ycGhUYXJnZXRzLmxlbmd0aDthPGI7YSsrKXRoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzLnB1c2goMCksdGhpcy5tb3JwaFRhcmdldERpY3Rpb25hcnlbdGhpcy5nZW9tZXRyeS5tb3JwaFRhcmdldHNbYV0ubmFtZV09YX19O1xuVEhSRUUuTWVzaC5wcm90b3R5cGUuZ2V0TW9ycGhUYXJnZXRJbmRleEJ5TmFtZT1mdW5jdGlvbihhKXtpZih2b2lkIDAhPT10aGlzLm1vcnBoVGFyZ2V0RGljdGlvbmFyeVthXSlyZXR1cm4gdGhpcy5tb3JwaFRhcmdldERpY3Rpb25hcnlbYV07Y29uc29sZS5sb2coXCJUSFJFRS5NZXNoLmdldE1vcnBoVGFyZ2V0SW5kZXhCeU5hbWU6IG1vcnBoIHRhcmdldCBcIithK1wiIGRvZXMgbm90IGV4aXN0LiBSZXR1cm5pbmcgMC5cIik7cmV0dXJuIDB9O1RIUkVFLk1lc2gucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEmJihhPW5ldyBUSFJFRS5NZXNoKHRoaXMuZ2VvbWV0cnksdGhpcy5tYXRlcmlhbCkpO1RIUkVFLk9iamVjdDNELnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMsYSk7cmV0dXJuIGF9O1RIUkVFLkJvbmU9ZnVuY3Rpb24oYSl7VEhSRUUuT2JqZWN0M0QuY2FsbCh0aGlzKTt0aGlzLnNraW49YTt0aGlzLnNraW5NYXRyaXg9bmV3IFRIUkVFLk1hdHJpeDR9O1RIUkVFLkJvbmUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlKTtUSFJFRS5Cb25lLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oYSxiKXt0aGlzLm1hdHJpeEF1dG9VcGRhdGUmJihifD10aGlzLnVwZGF0ZU1hdHJpeCgpKTtpZihifHx0aGlzLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGUpYT90aGlzLnNraW5NYXRyaXgubXVsdGlwbHlNYXRyaWNlcyhhLHRoaXMubWF0cml4KTp0aGlzLnNraW5NYXRyaXguY29weSh0aGlzLm1hdHJpeCksdGhpcy5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPSExLGI9ITA7dmFyIGMsZD10aGlzLmNoaWxkcmVuLmxlbmd0aDtmb3IoYz0wO2M8ZDtjKyspdGhpcy5jaGlsZHJlbltjXS51cGRhdGUodGhpcy5za2luTWF0cml4LGIpfTtUSFJFRS5Ta2lubmVkTWVzaD1mdW5jdGlvbihhLGIsYyl7VEhSRUUuTWVzaC5jYWxsKHRoaXMsYSxiKTt0aGlzLnVzZVZlcnRleFRleHR1cmU9dm9pZCAwIT09Yz9jOiEwO3RoaXMuaWRlbnRpdHlNYXRyaXg9bmV3IFRIUkVFLk1hdHJpeDQ7dGhpcy5ib25lcz1bXTt0aGlzLmJvbmVNYXRyaWNlcz1bXTt2YXIgZCxlLGY7aWYodGhpcy5nZW9tZXRyeSYmdm9pZCAwIT09dGhpcy5nZW9tZXRyeS5ib25lcyl7Zm9yKGE9MDthPHRoaXMuZ2VvbWV0cnkuYm9uZXMubGVuZ3RoO2ErKyljPXRoaXMuZ2VvbWV0cnkuYm9uZXNbYV0sZD1jLnBvcyxlPWMucm90cSxmPWMuc2NsLGI9dGhpcy5hZGRCb25lKCksYi5uYW1lPWMubmFtZSxiLnBvc2l0aW9uLnNldChkWzBdLGRbMV0sZFsyXSksYi5xdWF0ZXJuaW9uLnNldChlWzBdLGVbMV0sZVsyXSxlWzNdKSx2b2lkIDAhPT1mP2Iuc2NhbGUuc2V0KGZbMF0sZlsxXSxmWzJdKTpiLnNjYWxlLnNldCgxLDEsMSk7Zm9yKGE9MDthPHRoaXMuYm9uZXMubGVuZ3RoO2ErKyljPVxudGhpcy5nZW9tZXRyeS5ib25lc1thXSxiPXRoaXMuYm9uZXNbYV0sLTE9PT1jLnBhcmVudD90aGlzLmFkZChiKTp0aGlzLmJvbmVzW2MucGFyZW50XS5hZGQoYik7YT10aGlzLmJvbmVzLmxlbmd0aDt0aGlzLnVzZVZlcnRleFRleHR1cmU/KHRoaXMuYm9uZVRleHR1cmVIZWlnaHQ9dGhpcy5ib25lVGV4dHVyZVdpZHRoPWE9MjU2PGE/NjQ6NjQ8YT8zMjoxNjxhPzE2OjgsdGhpcy5ib25lTWF0cmljZXM9bmV3IEZsb2F0MzJBcnJheSg0KnRoaXMuYm9uZVRleHR1cmVXaWR0aCp0aGlzLmJvbmVUZXh0dXJlSGVpZ2h0KSx0aGlzLmJvbmVUZXh0dXJlPW5ldyBUSFJFRS5EYXRhVGV4dHVyZSh0aGlzLmJvbmVNYXRyaWNlcyx0aGlzLmJvbmVUZXh0dXJlV2lkdGgsdGhpcy5ib25lVGV4dHVyZUhlaWdodCxUSFJFRS5SR0JBRm9ybWF0LFRIUkVFLkZsb2F0VHlwZSksdGhpcy5ib25lVGV4dHVyZS5taW5GaWx0ZXI9VEhSRUUuTmVhcmVzdEZpbHRlcix0aGlzLmJvbmVUZXh0dXJlLm1hZ0ZpbHRlcj1cblRIUkVFLk5lYXJlc3RGaWx0ZXIsdGhpcy5ib25lVGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHM9ITEsdGhpcy5ib25lVGV4dHVyZS5mbGlwWT0hMSk6dGhpcy5ib25lTWF0cmljZXM9bmV3IEZsb2F0MzJBcnJheSgxNiphKTt0aGlzLnBvc2UoKX19O1RIUkVFLlNraW5uZWRNZXNoLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk1lc2gucHJvdG90eXBlKTtUSFJFRS5Ta2lubmVkTWVzaC5wcm90b3R5cGUuYWRkQm9uZT1mdW5jdGlvbihhKXt2b2lkIDA9PT1hJiYoYT1uZXcgVEhSRUUuQm9uZSh0aGlzKSk7dGhpcy5ib25lcy5wdXNoKGEpO3JldHVybiBhfTtcblRIUkVFLlNraW5uZWRNZXNoLnByb3RvdHlwZS51cGRhdGVNYXRyaXhXb3JsZD1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5NYXRyaXg0O3JldHVybiBmdW5jdGlvbihiKXt0aGlzLm1hdHJpeEF1dG9VcGRhdGUmJnRoaXMudXBkYXRlTWF0cml4KCk7aWYodGhpcy5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlfHxiKXRoaXMucGFyZW50P3RoaXMubWF0cml4V29ybGQubXVsdGlwbHlNYXRyaWNlcyh0aGlzLnBhcmVudC5tYXRyaXhXb3JsZCx0aGlzLm1hdHJpeCk6dGhpcy5tYXRyaXhXb3JsZC5jb3B5KHRoaXMubWF0cml4KSx0aGlzLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9ITE7Zm9yKHZhciBiPTAsYz10aGlzLmNoaWxkcmVuLmxlbmd0aDtiPGM7YisrKXt2YXIgZD10aGlzLmNoaWxkcmVuW2JdO2QgaW5zdGFuY2VvZiBUSFJFRS5Cb25lP2QudXBkYXRlKHRoaXMuaWRlbnRpdHlNYXRyaXgsITEpOmQudXBkYXRlTWF0cml4V29ybGQoITApfWlmKHZvaWQgMD09dGhpcy5ib25lSW52ZXJzZXMpe3RoaXMuYm9uZUludmVyc2VzPVxuW107Yj0wO2ZvcihjPXRoaXMuYm9uZXMubGVuZ3RoO2I8YztiKyspZD1uZXcgVEhSRUUuTWF0cml4NCxkLmdldEludmVyc2UodGhpcy5ib25lc1tiXS5za2luTWF0cml4KSx0aGlzLmJvbmVJbnZlcnNlcy5wdXNoKGQpfWI9MDtmb3IoYz10aGlzLmJvbmVzLmxlbmd0aDtiPGM7YisrKWEubXVsdGlwbHlNYXRyaWNlcyh0aGlzLmJvbmVzW2JdLnNraW5NYXRyaXgsdGhpcy5ib25lSW52ZXJzZXNbYl0pLGEuZmxhdHRlblRvQXJyYXlPZmZzZXQodGhpcy5ib25lTWF0cmljZXMsMTYqYik7dGhpcy51c2VWZXJ0ZXhUZXh0dXJlJiYodGhpcy5ib25lVGV4dHVyZS5uZWVkc1VwZGF0ZT0hMCl9fSgpO1RIUkVFLlNraW5uZWRNZXNoLnByb3RvdHlwZS5wb3NlPWZ1bmN0aW9uKCl7dGhpcy51cGRhdGVNYXRyaXhXb3JsZCghMCk7dGhpcy5ub3JtYWxpemVTa2luV2VpZ2h0cygpfTtcblRIUkVFLlNraW5uZWRNZXNoLnByb3RvdHlwZS5ub3JtYWxpemVTa2luV2VpZ2h0cz1mdW5jdGlvbigpe2lmKHRoaXMuZ2VvbWV0cnkgaW5zdGFuY2VvZiBUSFJFRS5HZW9tZXRyeSlmb3IodmFyIGE9MDthPHRoaXMuZ2VvbWV0cnkuc2tpbkluZGljZXMubGVuZ3RoO2ErKyl7dmFyIGI9dGhpcy5nZW9tZXRyeS5za2luV2VpZ2h0c1thXSxjPTEvYi5sZW5ndGhNYW5oYXR0YW4oKTtJbmZpbml0eSE9PWM/Yi5tdWx0aXBseVNjYWxhcihjKTpiLnNldCgxKX19O1RIUkVFLlNraW5uZWRNZXNoLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbihhKXt2b2lkIDA9PT1hJiYoYT1uZXcgVEhSRUUuU2tpbm5lZE1lc2godGhpcy5nZW9tZXRyeSx0aGlzLm1hdGVyaWFsLHRoaXMudXNlVmVydGV4VGV4dHVyZSkpO1RIUkVFLk1lc2gucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyxhKTtyZXR1cm4gYX07VEhSRUUuTW9ycGhBbmltTWVzaD1mdW5jdGlvbihhLGIpe1RIUkVFLk1lc2guY2FsbCh0aGlzLGEsYik7dGhpcy5kdXJhdGlvbj0xRTM7dGhpcy5taXJyb3JlZExvb3A9ITE7dGhpcy5jdXJyZW50S2V5ZnJhbWU9dGhpcy5sYXN0S2V5ZnJhbWU9dGhpcy50aW1lPTA7dGhpcy5kaXJlY3Rpb249MTt0aGlzLmRpcmVjdGlvbkJhY2t3YXJkcz0hMTt0aGlzLnNldEZyYW1lUmFuZ2UoMCx0aGlzLmdlb21ldHJ5Lm1vcnBoVGFyZ2V0cy5sZW5ndGgtMSl9O1RIUkVFLk1vcnBoQW5pbU1lc2gucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTWVzaC5wcm90b3R5cGUpO1RIUkVFLk1vcnBoQW5pbU1lc2gucHJvdG90eXBlLnNldEZyYW1lUmFuZ2U9ZnVuY3Rpb24oYSxiKXt0aGlzLnN0YXJ0S2V5ZnJhbWU9YTt0aGlzLmVuZEtleWZyYW1lPWI7dGhpcy5sZW5ndGg9dGhpcy5lbmRLZXlmcmFtZS10aGlzLnN0YXJ0S2V5ZnJhbWUrMX07XG5USFJFRS5Nb3JwaEFuaW1NZXNoLnByb3RvdHlwZS5zZXREaXJlY3Rpb25Gb3J3YXJkPWZ1bmN0aW9uKCl7dGhpcy5kaXJlY3Rpb249MTt0aGlzLmRpcmVjdGlvbkJhY2t3YXJkcz0hMX07VEhSRUUuTW9ycGhBbmltTWVzaC5wcm90b3R5cGUuc2V0RGlyZWN0aW9uQmFja3dhcmQ9ZnVuY3Rpb24oKXt0aGlzLmRpcmVjdGlvbj0tMTt0aGlzLmRpcmVjdGlvbkJhY2t3YXJkcz0hMH07XG5USFJFRS5Nb3JwaEFuaW1NZXNoLnByb3RvdHlwZS5wYXJzZUFuaW1hdGlvbnM9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdlb21ldHJ5O2EuYW5pbWF0aW9uc3x8KGEuYW5pbWF0aW9ucz17fSk7Zm9yKHZhciBiLGM9YS5hbmltYXRpb25zLGQ9LyhbYS16XSspKFxcZCspLyxlPTAsZj1hLm1vcnBoVGFyZ2V0cy5sZW5ndGg7ZTxmO2UrKyl7dmFyIGg9YS5tb3JwaFRhcmdldHNbZV0ubmFtZS5tYXRjaChkKTtpZihoJiYxPGgubGVuZ3RoKXtoPWhbMV07Y1toXXx8KGNbaF09e3N0YXJ0OkluZmluaXR5LGVuZDotSW5maW5pdHl9KTt2YXIgZz1jW2hdO2U8Zy5zdGFydCYmKGcuc3RhcnQ9ZSk7ZT5nLmVuZCYmKGcuZW5kPWUpO2J8fChiPWgpfX1hLmZpcnN0QW5pbWF0aW9uPWJ9O1xuVEhSRUUuTW9ycGhBbmltTWVzaC5wcm90b3R5cGUuc2V0QW5pbWF0aW9uTGFiZWw9ZnVuY3Rpb24oYSxiLGMpe3RoaXMuZ2VvbWV0cnkuYW5pbWF0aW9uc3x8KHRoaXMuZ2VvbWV0cnkuYW5pbWF0aW9ucz17fSk7dGhpcy5nZW9tZXRyeS5hbmltYXRpb25zW2FdPXtzdGFydDpiLGVuZDpjfX07VEhSRUUuTW9ycGhBbmltTWVzaC5wcm90b3R5cGUucGxheUFuaW1hdGlvbj1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2VvbWV0cnkuYW5pbWF0aW9uc1thXTtjPyh0aGlzLnNldEZyYW1lUmFuZ2UoYy5zdGFydCxjLmVuZCksdGhpcy5kdXJhdGlvbj0xRTMqKChjLmVuZC1jLnN0YXJ0KS9iKSx0aGlzLnRpbWU9MCk6Y29uc29sZS53YXJuKFwiYW5pbWF0aW9uW1wiK2ErXCJdIHVuZGVmaW5lZFwiKX07XG5USFJFRS5Nb3JwaEFuaW1NZXNoLnByb3RvdHlwZS51cGRhdGVBbmltYXRpb249ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5kdXJhdGlvbi90aGlzLmxlbmd0aDt0aGlzLnRpbWUrPXRoaXMuZGlyZWN0aW9uKmE7aWYodGhpcy5taXJyb3JlZExvb3Ape2lmKHRoaXMudGltZT50aGlzLmR1cmF0aW9ufHwwPnRoaXMudGltZSl0aGlzLmRpcmVjdGlvbio9LTEsdGhpcy50aW1lPnRoaXMuZHVyYXRpb24mJih0aGlzLnRpbWU9dGhpcy5kdXJhdGlvbix0aGlzLmRpcmVjdGlvbkJhY2t3YXJkcz0hMCksMD50aGlzLnRpbWUmJih0aGlzLnRpbWU9MCx0aGlzLmRpcmVjdGlvbkJhY2t3YXJkcz0hMSl9ZWxzZSB0aGlzLnRpbWUlPXRoaXMuZHVyYXRpb24sMD50aGlzLnRpbWUmJih0aGlzLnRpbWUrPXRoaXMuZHVyYXRpb24pO2E9dGhpcy5zdGFydEtleWZyYW1lK1RIUkVFLk1hdGguY2xhbXAoTWF0aC5mbG9vcih0aGlzLnRpbWUvYiksMCx0aGlzLmxlbmd0aC0xKTthIT09dGhpcy5jdXJyZW50S2V5ZnJhbWUmJlxuKHRoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzW3RoaXMubGFzdEtleWZyYW1lXT0wLHRoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzW3RoaXMuY3VycmVudEtleWZyYW1lXT0xLHRoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzW2FdPTAsdGhpcy5sYXN0S2V5ZnJhbWU9dGhpcy5jdXJyZW50S2V5ZnJhbWUsdGhpcy5jdXJyZW50S2V5ZnJhbWU9YSk7Yj10aGlzLnRpbWUlYi9iO3RoaXMuZGlyZWN0aW9uQmFja3dhcmRzJiYoYj0xLWIpO3RoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzW3RoaXMuY3VycmVudEtleWZyYW1lXT1iO3RoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzW3RoaXMubGFzdEtleWZyYW1lXT0xLWJ9O1xuVEhSRUUuTW9ycGhBbmltTWVzaC5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oYSl7dm9pZCAwPT09YSYmKGE9bmV3IFRIUkVFLk1vcnBoQW5pbU1lc2godGhpcy5nZW9tZXRyeSx0aGlzLm1hdGVyaWFsKSk7YS5kdXJhdGlvbj10aGlzLmR1cmF0aW9uO2EubWlycm9yZWRMb29wPXRoaXMubWlycm9yZWRMb29wO2EudGltZT10aGlzLnRpbWU7YS5sYXN0S2V5ZnJhbWU9dGhpcy5sYXN0S2V5ZnJhbWU7YS5jdXJyZW50S2V5ZnJhbWU9dGhpcy5jdXJyZW50S2V5ZnJhbWU7YS5kaXJlY3Rpb249dGhpcy5kaXJlY3Rpb247YS5kaXJlY3Rpb25CYWNrd2FyZHM9dGhpcy5kaXJlY3Rpb25CYWNrd2FyZHM7VEhSRUUuTWVzaC5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzLGEpO3JldHVybiBhfTtUSFJFRS5MT0Q9ZnVuY3Rpb24oKXtUSFJFRS5PYmplY3QzRC5jYWxsKHRoaXMpO3RoaXMub2JqZWN0cz1bXX07VEhSRUUuTE9ELnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSk7VEhSRUUuTE9ELnByb3RvdHlwZS5hZGRMZXZlbD1mdW5jdGlvbihhLGIpe3ZvaWQgMD09PWImJihiPTApO2Zvcih2YXIgYj1NYXRoLmFicyhiKSxjPTA7Yzx0aGlzLm9iamVjdHMubGVuZ3RoJiYhKGI8dGhpcy5vYmplY3RzW2NdLmRpc3RhbmNlKTtjKyspO3RoaXMub2JqZWN0cy5zcGxpY2UoYywwLHtkaXN0YW5jZTpiLG9iamVjdDphfSk7dGhpcy5hZGQoYSl9O1RIUkVFLkxPRC5wcm90b3R5cGUuZ2V0T2JqZWN0Rm9yRGlzdGFuY2U9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTEsYz10aGlzLm9iamVjdHMubGVuZ3RoO2I8YyYmIShhPHRoaXMub2JqZWN0c1tiXS5kaXN0YW5jZSk7YisrKTtyZXR1cm4gdGhpcy5vYmplY3RzW2ItMV0ub2JqZWN0fTtcblRIUkVFLkxPRC5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjMsYj1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oYyl7aWYoMTx0aGlzLm9iamVjdHMubGVuZ3RoKXthLnNldEZyb21NYXRyaXhQb3NpdGlvbihjLm1hdHJpeFdvcmxkKTtiLnNldEZyb21NYXRyaXhQb3NpdGlvbih0aGlzLm1hdHJpeFdvcmxkKTtjPWEuZGlzdGFuY2VUbyhiKTt0aGlzLm9iamVjdHNbMF0ub2JqZWN0LnZpc2libGU9ITA7Zm9yKHZhciBkPTEsZT10aGlzLm9iamVjdHMubGVuZ3RoO2Q8ZTtkKyspaWYoYz49dGhpcy5vYmplY3RzW2RdLmRpc3RhbmNlKXRoaXMub2JqZWN0c1tkLTFdLm9iamVjdC52aXNpYmxlPSExLHRoaXMub2JqZWN0c1tkXS5vYmplY3QudmlzaWJsZT0hMDtlbHNlIGJyZWFrO2Zvcig7ZDxlO2QrKyl0aGlzLm9iamVjdHNbZF0ub2JqZWN0LnZpc2libGU9ITF9fX0oKTtUSFJFRS5MT0QucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7fTtUSFJFRS5TcHJpdGU9ZnVuY3Rpb24oYSl7VEhSRUUuT2JqZWN0M0QuY2FsbCh0aGlzKTt0aGlzLm1hdGVyaWFsPXZvaWQgMCE9PWE/YTpuZXcgVEhSRUUuU3ByaXRlTWF0ZXJpYWx9O1RIUkVFLlNwcml0ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUpO1RIUkVFLlNwcml0ZS5wcm90b3R5cGUudXBkYXRlTWF0cml4PWZ1bmN0aW9uKCl7dGhpcy5tYXRyaXguY29tcG9zZSh0aGlzLnBvc2l0aW9uLHRoaXMucXVhdGVybmlvbix0aGlzLnNjYWxlKTt0aGlzLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9ITB9O1RIUkVFLlNwcml0ZS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oYSl7dm9pZCAwPT09YSYmKGE9bmV3IFRIUkVFLlNwcml0ZSh0aGlzLm1hdGVyaWFsKSk7VEhSRUUuT2JqZWN0M0QucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyxhKTtyZXR1cm4gYX07VEhSRUUuUGFydGljbGU9VEhSRUUuU3ByaXRlO1RIUkVFLlNjZW5lPWZ1bmN0aW9uKCl7VEhSRUUuT2JqZWN0M0QuY2FsbCh0aGlzKTt0aGlzLm92ZXJyaWRlTWF0ZXJpYWw9dGhpcy5mb2c9bnVsbDt0aGlzLmF1dG9VcGRhdGU9ITA7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPSExO3RoaXMuX19saWdodHM9W107dGhpcy5fX29iamVjdHNBZGRlZD1bXTt0aGlzLl9fb2JqZWN0c1JlbW92ZWQ9W119O1RIUkVFLlNjZW5lLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSk7XG5USFJFRS5TY2VuZS5wcm90b3R5cGUuX19hZGRPYmplY3Q9ZnVuY3Rpb24oYSl7aWYoYSBpbnN0YW5jZW9mIFRIUkVFLkxpZ2h0KS0xPT09dGhpcy5fX2xpZ2h0cy5pbmRleE9mKGEpJiZ0aGlzLl9fbGlnaHRzLnB1c2goYSksYS50YXJnZXQmJnZvaWQgMD09PWEudGFyZ2V0LnBhcmVudCYmdGhpcy5hZGQoYS50YXJnZXQpO2Vsc2UgaWYoIShhIGluc3RhbmNlb2YgVEhSRUUuQ2FtZXJhfHxhIGluc3RhbmNlb2YgVEhSRUUuQm9uZSkpe3RoaXMuX19vYmplY3RzQWRkZWQucHVzaChhKTt2YXIgYj10aGlzLl9fb2JqZWN0c1JlbW92ZWQuaW5kZXhPZihhKTstMSE9PWImJnRoaXMuX19vYmplY3RzUmVtb3ZlZC5zcGxpY2UoYiwxKX1mb3IoYj0wO2I8YS5jaGlsZHJlbi5sZW5ndGg7YisrKXRoaXMuX19hZGRPYmplY3QoYS5jaGlsZHJlbltiXSl9O1xuVEhSRUUuU2NlbmUucHJvdG90eXBlLl9fcmVtb3ZlT2JqZWN0PWZ1bmN0aW9uKGEpe2lmKGEgaW5zdGFuY2VvZiBUSFJFRS5MaWdodCl7dmFyIGI9dGhpcy5fX2xpZ2h0cy5pbmRleE9mKGEpOy0xIT09YiYmdGhpcy5fX2xpZ2h0cy5zcGxpY2UoYiwxKTtpZihhLnNoYWRvd0Nhc2NhZGVBcnJheSlmb3IoYj0wO2I8YS5zaGFkb3dDYXNjYWRlQXJyYXkubGVuZ3RoO2IrKyl0aGlzLl9fcmVtb3ZlT2JqZWN0KGEuc2hhZG93Q2FzY2FkZUFycmF5W2JdKX1lbHNlIGEgaW5zdGFuY2VvZiBUSFJFRS5DYW1lcmF8fCh0aGlzLl9fb2JqZWN0c1JlbW92ZWQucHVzaChhKSxiPXRoaXMuX19vYmplY3RzQWRkZWQuaW5kZXhPZihhKSwtMSE9PWImJnRoaXMuX19vYmplY3RzQWRkZWQuc3BsaWNlKGIsMSkpO2ZvcihiPTA7YjxhLmNoaWxkcmVuLmxlbmd0aDtiKyspdGhpcy5fX3JlbW92ZU9iamVjdChhLmNoaWxkcmVuW2JdKX07XG5USFJFRS5TY2VuZS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oYSl7dm9pZCAwPT09YSYmKGE9bmV3IFRIUkVFLlNjZW5lKTtUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzLGEpO251bGwhPT10aGlzLmZvZyYmKGEuZm9nPXRoaXMuZm9nLmNsb25lKCkpO251bGwhPT10aGlzLm92ZXJyaWRlTWF0ZXJpYWwmJihhLm92ZXJyaWRlTWF0ZXJpYWw9dGhpcy5vdmVycmlkZU1hdGVyaWFsLmNsb25lKCkpO2EuYXV0b1VwZGF0ZT10aGlzLmF1dG9VcGRhdGU7YS5tYXRyaXhBdXRvVXBkYXRlPXRoaXMubWF0cml4QXV0b1VwZGF0ZTtyZXR1cm4gYX07VEhSRUUuRm9nPWZ1bmN0aW9uKGEsYixjKXt0aGlzLm5hbWU9XCJcIjt0aGlzLmNvbG9yPW5ldyBUSFJFRS5Db2xvcihhKTt0aGlzLm5lYXI9dm9pZCAwIT09Yj9iOjE7dGhpcy5mYXI9dm9pZCAwIT09Yz9jOjFFM307VEhSRUUuRm9nLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgVEhSRUUuRm9nKHRoaXMuY29sb3IuZ2V0SGV4KCksdGhpcy5uZWFyLHRoaXMuZmFyKX07VEhSRUUuRm9nRXhwMj1mdW5jdGlvbihhLGIpe3RoaXMubmFtZT1cIlwiO3RoaXMuY29sb3I9bmV3IFRIUkVFLkNvbG9yKGEpO3RoaXMuZGVuc2l0eT12b2lkIDAhPT1iP2I6Mi41RS00fTtUSFJFRS5Gb2dFeHAyLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgVEhSRUUuRm9nRXhwMih0aGlzLmNvbG9yLmdldEhleCgpLHRoaXMuZGVuc2l0eSl9O1RIUkVFLkNhbnZhc1JlbmRlcmVyPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiLGMpe2Zvcih2YXIgZD0wLGU9ei5sZW5ndGg7ZDxlO2QrKyl7dmFyIGY9eltkXTtLYS5jb3B5KGYuY29sb3IpO2lmKGYgaW5zdGFuY2VvZiBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0KXt2YXIgaD10YS5zZXRGcm9tTWF0cml4UG9zaXRpb24oZi5tYXRyaXhXb3JsZCkubm9ybWFsaXplKCksZz1iLmRvdChoKTswPj1nfHwoZyo9Zi5pbnRlbnNpdHksYy5hZGQoS2EubXVsdGlwbHlTY2FsYXIoZykpKX1lbHNlIGYgaW5zdGFuY2VvZiBUSFJFRS5Qb2ludExpZ2h0JiYoaD10YS5zZXRGcm9tTWF0cml4UG9zaXRpb24oZi5tYXRyaXhXb3JsZCksZz1iLmRvdCh0YS5zdWJWZWN0b3JzKGgsYSkubm9ybWFsaXplKCkpLDA+PWd8fChnKj0wPT1mLmRpc3RhbmNlPzE6MS1NYXRoLm1pbihhLmRpc3RhbmNlVG8oaCkvZi5kaXN0YW5jZSwxKSwwIT1nJiYoZyo9Zi5pbnRlbnNpdHksYy5hZGQoS2EubXVsdGlwbHlTY2FsYXIoZykpKSkpfX1cbmZ1bmN0aW9uIGMoYSxiLGMsZCl7bShiKTtsKGMpO3AoZCk7dChhLmdldFN0eWxlKCkpO0Quc3Ryb2tlKCk7RWEuZXhwYW5kQnlTY2FsYXIoMipiKX1mdW5jdGlvbiBkKGEpe3MoYS5nZXRTdHlsZSgpKTtELmZpbGwoKX1mdW5jdGlvbiBlKGEsYixjLGUsZixoLGcsaixpLGssbSxsLG4pe2lmKCEobiBpbnN0YW5jZW9mIFRIUkVFLkRhdGFUZXh0dXJlfHx2b2lkIDA9PT1uLmltYWdlfHwwPT09bi5pbWFnZS53aWR0aCkpe2lmKCEwPT09bi5uZWVkc1VwZGF0ZSl7dmFyIHA9bi53cmFwUz09PVRIUkVFLlJlcGVhdFdyYXBwaW5nLHE9bi53cmFwVD09PVRIUkVFLlJlcGVhdFdyYXBwaW5nO0dhW24uaWRdPUQuY3JlYXRlUGF0dGVybihuLmltYWdlLCEwPT09cCYmITA9PT1xP1wicmVwZWF0XCI6ITA9PT1wJiYhMT09PXE/XCJyZXBlYXQteFwiOiExPT09cCYmITA9PT1xP1wicmVwZWF0LXlcIjpcIm5vLXJlcGVhdFwiKTtuLm5lZWRzVXBkYXRlPSExfXZvaWQgMD09PUdhW24uaWRdP3MoXCJyZ2JhKDAsMCwwLDEpXCIpOlxucyhHYVtuLmlkXSk7dmFyIHA9bi5vZmZzZXQueC9uLnJlcGVhdC54LHE9bi5vZmZzZXQueS9uLnJlcGVhdC55LHQ9bi5pbWFnZS53aWR0aCpuLnJlcGVhdC54LHI9bi5pbWFnZS5oZWlnaHQqbi5yZXBlYXQueSxnPShnK3ApKnQsaj0oMS1qK3EpKnIsYz1jLWEsZT1lLWIsZj1mLWEsaD1oLWIsaT0oaStwKSp0LWcsaz0oMS1rK3EpKnItaixtPShtK3ApKnQtZyxsPSgxLWwrcSkqci1qLHA9aSpsLW0qazswPT09cD8odm9pZCAwPT09a2Fbbi5pZF0mJihiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksYi53aWR0aD1uLmltYWdlLndpZHRoLGIuaGVpZ2h0PW4uaW1hZ2UuaGVpZ2h0LGI9Yi5nZXRDb250ZXh0KFwiMmRcIiksYi5kcmF3SW1hZ2Uobi5pbWFnZSwwLDApLGthW24uaWRdPWIuZ2V0SW1hZ2VEYXRhKDAsMCxuLmltYWdlLndpZHRoLG4uaW1hZ2UuaGVpZ2h0KS5kYXRhKSxiPWthW24uaWRdLGc9NCooTWF0aC5mbG9vcihnKStNYXRoLmZsb29yKGopKm4uaW1hZ2Uud2lkdGgpLFxuVi5zZXRSR0IoYltnXS8yNTUsYltnKzFdLzI1NSxiW2crMl0vMjU1KSxkKFYpKToocD0xL3Asbj0obCpjLWsqZikqcCxrPShsKmUtaypoKSpwLGM9KGkqZi1tKmMpKnAsZT0oaSpoLW0qZSkqcCxhPWEtbipnLWMqaixnPWItaypnLWUqaixELnNhdmUoKSxELnRyYW5zZm9ybShuLGssYyxlLGEsZyksRC5maWxsKCksRC5yZXN0b3JlKCkpfX1mdW5jdGlvbiBmKGEsYixjLGQsZSxmLGgsZyxqLGksayxtLG4pe3ZhciBsLHA7bD1uLndpZHRoLTE7cD1uLmhlaWdodC0xO2gqPWw7Zyo9cDtjLT1hO2QtPWI7ZS09YTtmLT1iO2o9aipsLWg7aT1pKnAtZztrPWsqbC1oO209bSpwLWc7cD0xLyhqKm0tayppKTtsPShtKmMtaSplKSpwO2k9KG0qZC1pKmYpKnA7Yz0oaiplLWsqYykqcDtkPShqKmYtaypkKSpwO2E9YS1sKmgtYypnO2I9Yi1pKmgtZCpnO0Quc2F2ZSgpO0QudHJhbnNmb3JtKGwsaSxjLGQsYSxiKTtELmNsaXAoKTtELmRyYXdJbWFnZShuLDAsMCk7RC5yZXN0b3JlKCl9ZnVuY3Rpb24gaChhLFxuYixjLGQpe3VhWzBdPTI1NSphLnJ8MDt1YVsxXT0yNTUqYS5nfDA7dWFbMl09MjU1KmEuYnwwO3VhWzRdPTI1NSpiLnJ8MDt1YVs1XT0yNTUqYi5nfDA7dWFbNl09MjU1KmIuYnwwO3VhWzhdPTI1NSpjLnJ8MDt1YVs5XT0yNTUqYy5nfDA7dWFbMTBdPTI1NSpjLmJ8MDt1YVsxMl09MjU1KmQucnwwO3VhWzEzXT0yNTUqZC5nfDA7dWFbMTRdPTI1NSpkLmJ8MDtqLnB1dEltYWdlRGF0YShPYSwwLDApO0ZhLmRyYXdJbWFnZShQYSwwLDApO3JldHVybiBMYX1mdW5jdGlvbiBnKGEsYixjKXt2YXIgZD1iLngtYS54LGU9Yi55LWEueSxmPWQqZCtlKmU7MCE9PWYmJihjLz1NYXRoLnNxcnQoZiksZCo9YyxlKj1jLGIueCs9ZCxiLnkrPWUsYS54LT1kLGEueS09ZSl9ZnVuY3Rpb24gaShhKXt4IT09YSYmKHg9RC5nbG9iYWxBbHBoYT1hKX1mdW5jdGlvbiBrKGEpe0khPT1hJiYoYT09PVRIUkVFLk5vcm1hbEJsZW5kaW5nP0QuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPVwic291cmNlLW92ZXJcIjpcbmE9PT1USFJFRS5BZGRpdGl2ZUJsZW5kaW5nP0QuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPVwibGlnaHRlclwiOmE9PT1USFJFRS5TdWJ0cmFjdGl2ZUJsZW5kaW5nJiYoRC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb249XCJkYXJrZXJcIiksST1hKX1mdW5jdGlvbiBtKGEpe0ohPT1hJiYoSj1ELmxpbmVXaWR0aD1hKX1mdW5jdGlvbiBsKGEpe2NhIT09YSYmKGNhPUQubGluZUNhcD1hKX1mdW5jdGlvbiBwKGEpe25hIT09YSYmKG5hPUQubGluZUpvaW49YSl9ZnVuY3Rpb24gdChhKXtCIT09YSYmKEI9RC5zdHJva2VTdHlsZT1hKX1mdW5jdGlvbiBzKGEpe00hPT1hJiYoTT1ELmZpbGxTdHlsZT1hKX1mdW5jdGlvbiBxKGEsYil7aWYocGEhPT1hfHxDIT09YilELnNldExpbmVEYXNoKFthLGJdKSxwYT1hLEM9Yn1jb25zb2xlLmxvZyhcIlRIUkVFLkNhbnZhc1JlbmRlcmVyXCIsVEhSRUUuUkVWSVNJT04pO3ZhciBuPVRIUkVFLk1hdGguc21vb3Roc3RlcCxhPWF8fHt9LHU9dGhpcyxyLHYseixHPVxubmV3IFRIUkVFLlByb2plY3Rvcix3PXZvaWQgMCE9PWEuY2FudmFzP2EuY2FudmFzOmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIikseT13LndpZHRoLEU9dy5oZWlnaHQsQT1NYXRoLmZsb29yKHkvMiksSz1NYXRoLmZsb29yKEUvMiksRD13LmdldENvbnRleHQoXCIyZFwiKSxGPW5ldyBUSFJFRS5Db2xvcigwKSxPPTAseD0xLEk9MCxCPW51bGwsTT1udWxsLEo9bnVsbCxjYT1udWxsLG5hPW51bGwscGE9bnVsbCxDPTAsUSxSLEwsZGE7bmV3IFRIUkVFLlJlbmRlcmFibGVWZXJ0ZXg7bmV3IFRIUkVFLlJlbmRlcmFibGVWZXJ0ZXg7dmFyIHphLEJhLGJhLEFhLCQsZWEsVj1uZXcgVEhSRUUuQ29sb3IsUD1uZXcgVEhSRUUuQ29sb3IsWT1uZXcgVEhSRUUuQ29sb3IsVT1uZXcgVEhSRUUuQ29sb3IsamE9bmV3IFRIUkVFLkNvbG9yLHNhPW5ldyBUSFJFRS5Db2xvcixoYT1uZXcgVEhSRUUuQ29sb3IsS2E9bmV3IFRIUkVFLkNvbG9yLEdhPXt9LGthPXt9LERhLFVhLFFhLHdhLGJiLFxuY2IsTWEsZmIsc2IscGIsdmE9bmV3IFRIUkVFLkJveDIsbGE9bmV3IFRIUkVFLkJveDIsRWE9bmV3IFRIUkVFLkJveDIsZ2I9bmV3IFRIUkVFLkNvbG9yLHJhPW5ldyBUSFJFRS5Db2xvcixmYT1uZXcgVEhSRUUuQ29sb3IsdGE9bmV3IFRIUkVFLlZlY3RvcjMsUGEsaixPYSx1YSxMYSxGYSxSYT0xNjtQYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1BhLndpZHRoPVBhLmhlaWdodD0yO2o9UGEuZ2V0Q29udGV4dChcIjJkXCIpO2ouZmlsbFN0eWxlPVwicmdiYSgwLDAsMCwxKVwiO2ouZmlsbFJlY3QoMCwwLDIsMik7T2E9ai5nZXRJbWFnZURhdGEoMCwwLDIsMik7dWE9T2EuZGF0YTtMYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO0xhLndpZHRoPUxhLmhlaWdodD1SYTtGYT1MYS5nZXRDb250ZXh0KFwiMmRcIik7RmEudHJhbnNsYXRlKC1SYS8yLC1SYS8yKTtGYS5zY2FsZShSYSxSYSk7UmEtLTt2b2lkIDA9PT1ELnNldExpbmVEYXNoJiYoRC5zZXRMaW5lRGFzaD1cbnZvaWQgMCE9PUQubW96RGFzaD9mdW5jdGlvbihhKXtELm1vekRhc2g9bnVsbCE9PWFbMF0/YTpudWxsfTpmdW5jdGlvbigpe30pO3RoaXMuZG9tRWxlbWVudD13O3RoaXMuZGV2aWNlUGl4ZWxSYXRpbz12b2lkIDAhPT1hLmRldmljZVBpeGVsUmF0aW8/YS5kZXZpY2VQaXhlbFJhdGlvOnZvaWQgMCE9PXNlbGYuZGV2aWNlUGl4ZWxSYXRpbz9zZWxmLmRldmljZVBpeGVsUmF0aW86MTt0aGlzLnNvcnRFbGVtZW50cz10aGlzLnNvcnRPYmplY3RzPXRoaXMuYXV0b0NsZWFyPSEwO3RoaXMuaW5mbz17cmVuZGVyOnt2ZXJ0aWNlczowLGZhY2VzOjB9fTt0aGlzLnN1cHBvcnRzVmVydGV4VGV4dHVyZXM9ZnVuY3Rpb24oKXt9O3RoaXMuc2V0RmFjZUN1bGxpbmc9ZnVuY3Rpb24oKXt9O3RoaXMuc2V0U2l6ZT1mdW5jdGlvbihhLGIsYyl7eT1hKnRoaXMuZGV2aWNlUGl4ZWxSYXRpbztFPWIqdGhpcy5kZXZpY2VQaXhlbFJhdGlvO0E9TWF0aC5mbG9vcih5LzIpO0s9TWF0aC5mbG9vcihFLzIpO1xudy53aWR0aD15O3cuaGVpZ2h0PUU7MSE9PXRoaXMuZGV2aWNlUGl4ZWxSYXRpbyYmITEhPT1jJiYody5zdHlsZS53aWR0aD1hK1wicHhcIix3LnN0eWxlLmhlaWdodD1iK1wicHhcIik7dmEuc2V0KG5ldyBUSFJFRS5WZWN0b3IyKC1BLC1LKSxuZXcgVEhSRUUuVmVjdG9yMihBLEspKTtsYS5zZXQobmV3IFRIUkVFLlZlY3RvcjIoLUEsLUspLG5ldyBUSFJFRS5WZWN0b3IyKEEsSykpO3g9MTtJPTA7bmE9Y2E9Sj1NPUI9bnVsbH07dGhpcy5zZXRDbGVhckNvbG9yPWZ1bmN0aW9uKGEsYil7Ri5zZXQoYSk7Tz12b2lkIDAhPT1iP2I6MTtsYS5zZXQobmV3IFRIUkVFLlZlY3RvcjIoLUEsLUspLG5ldyBUSFJFRS5WZWN0b3IyKEEsSykpfTt0aGlzLnNldENsZWFyQ29sb3JIZXg9ZnVuY3Rpb24oYSxiKXtjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEOiAuc2V0Q2xlYXJDb2xvckhleCgpIGlzIGJlaW5nIHJlbW92ZWQuIFVzZSAuc2V0Q2xlYXJDb2xvcigpIGluc3RlYWQuXCIpO3RoaXMuc2V0Q2xlYXJDb2xvcihhLFxuYil9O3RoaXMuZ2V0TWF4QW5pc290cm9weT1mdW5jdGlvbigpe3JldHVybiAwfTt0aGlzLmNsZWFyPWZ1bmN0aW9uKCl7RC5zZXRUcmFuc2Zvcm0oMSwwLDAsLTEsQSxLKTshMT09PWxhLmVtcHR5KCkmJihsYS5pbnRlcnNlY3QodmEpLGxhLmV4cGFuZEJ5U2NhbGFyKDIpLDE+TyYmRC5jbGVhclJlY3QobGEubWluLnh8MCxsYS5taW4ueXwwLGxhLm1heC54LWxhLm1pbi54fDAsbGEubWF4LnktbGEubWluLnl8MCksMDxPJiYoayhUSFJFRS5Ob3JtYWxCbGVuZGluZyksaSgxKSxzKFwicmdiYShcIitNYXRoLmZsb29yKDI1NSpGLnIpK1wiLFwiK01hdGguZmxvb3IoMjU1KkYuZykrXCIsXCIrTWF0aC5mbG9vcigyNTUqRi5iKStcIixcIitPK1wiKVwiKSxELmZpbGxSZWN0KGxhLm1pbi54fDAsbGEubWluLnl8MCxsYS5tYXgueC1sYS5taW4ueHwwLGxhLm1heC55LWxhLm1pbi55fDApKSxsYS5tYWtlRW1wdHkoKSl9O3RoaXMuY2xlYXJDb2xvcj1mdW5jdGlvbigpe307dGhpcy5jbGVhckRlcHRoPWZ1bmN0aW9uKCl7fTtcbnRoaXMuY2xlYXJTdGVuY2lsPWZ1bmN0aW9uKCl7fTt0aGlzLnJlbmRlcj1mdW5jdGlvbihhLGope2lmKCExPT09aiBpbnN0YW5jZW9mIFRIUkVFLkNhbWVyYSljb25zb2xlLmVycm9yKFwiVEhSRUUuQ2FudmFzUmVuZGVyZXIucmVuZGVyOiBjYW1lcmEgaXMgbm90IGFuIGluc3RhbmNlIG9mIFRIUkVFLkNhbWVyYS5cIik7ZWxzZXshMD09PXRoaXMuYXV0b0NsZWFyJiZ0aGlzLmNsZWFyKCk7RC5zZXRUcmFuc2Zvcm0oMSwwLDAsLTEsQSxLKTt1LmluZm8ucmVuZGVyLnZlcnRpY2VzPTA7dS5pbmZvLnJlbmRlci5mYWNlcz0wO3I9Ry5wcm9qZWN0U2NlbmUoYSxqLHRoaXMuc29ydE9iamVjdHMsdGhpcy5zb3J0RWxlbWVudHMpO3Y9ci5lbGVtZW50czt6PXIubGlnaHRzO1E9ajtnYi5zZXRSR0IoMCwwLDApO3JhLnNldFJHQigwLDAsMCk7ZmEuc2V0UkdCKDAsMCwwKTtmb3IodmFyIHk9MCxGPXoubGVuZ3RoO3k8Rjt5Kyspe3ZhciBCPXpbeV0sRT1CLmNvbG9yO0IgaW5zdGFuY2VvZiBUSFJFRS5BbWJpZW50TGlnaHQ/XG5nYi5hZGQoRSk6QiBpbnN0YW5jZW9mIFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQ/cmEuYWRkKEUpOkIgaW5zdGFuY2VvZiBUSFJFRS5Qb2ludExpZ2h0JiZmYS5hZGQoRSl9eT0wO2ZvcihGPXYubGVuZ3RoO3k8Rjt5Kyspe3ZhciB4PXZbeV0sdz14Lm1hdGVyaWFsO2lmKCEodm9pZCAwPT09d3x8ITE9PT13LnZpc2libGUpKXtFYS5tYWtlRW1wdHkoKTtpZih4IGluc3RhbmNlb2YgVEhSRUUuUmVuZGVyYWJsZVNwcml0ZSl7Uj14O1IueCo9QTtSLnkqPUs7dmFyIEI9UixFPXgsST13O2koSS5vcGFjaXR5KTtrKEkuYmxlbmRpbmcpO3ZhciB4PUUuc2NhbGUueCpBLHc9RS5zY2FsZS55KkssTz0wLjUqTWF0aC5zcXJ0KHgqeCt3KncpO0VhLm1pbi5zZXQoQi54LU8sQi55LU8pO0VhLm1heC5zZXQoQi54K08sQi55K08pOyExPT09dmEuaXNJbnRlcnNlY3Rpb25Cb3goRWEpP0VhLm1ha2VFbXB0eSgpOkkgaW5zdGFuY2VvZiBUSFJFRS5TcHJpdGVNYXRlcmlhbHx8SSBpbnN0YW5jZW9mIFRIUkVFLlBhcnRpY2xlU3lzdGVtTWF0ZXJpYWw/XG4obnVsbCE9PUkubWFwPyhFPUkubWFwLmltYWdlLEQuc2F2ZSgpLEQudHJhbnNsYXRlKEIueCxCLnkpLEQucm90YXRlKEkucm90YXRpb24pLEQuc2NhbGUoeCwtdyksRC5kcmF3SW1hZ2UoRSwwLDAsRS53aWR0aCxFLmhlaWdodCwtMC41LC0wLjUsMSwxKSk6KHMoSS5jb2xvci5nZXRTdHlsZSgpKSxELnNhdmUoKSxELnRyYW5zbGF0ZShCLngsQi55KSxELnJvdGF0ZShJLnJvdGF0aW9uKSxELnNjYWxlKHgsLXcpLEQuZmlsbFJlY3QoLTAuNSwtMC41LDEsMSkpLEQucmVzdG9yZSgpKTpJIGluc3RhbmNlb2YgVEhSRUUuU3ByaXRlQ2FudmFzTWF0ZXJpYWwmJih0KEkuY29sb3IuZ2V0U3R5bGUoKSkscyhJLmNvbG9yLmdldFN0eWxlKCkpLEQuc2F2ZSgpLEQudHJhbnNsYXRlKEIueCxCLnkpLEQucm90YXRlKC1FLnJvdGF0aW9uKSxELnNjYWxlKHgsdyksSS5wcm9ncmFtKEQpLEQucmVzdG9yZSgpKX1lbHNlIGlmKHggaW5zdGFuY2VvZiBUSFJFRS5SZW5kZXJhYmxlTGluZSl7aWYoUj14LnYxLFxuTD14LnYyLFIucG9zaXRpb25TY3JlZW4ueCo9QSxSLnBvc2l0aW9uU2NyZWVuLnkqPUssTC5wb3NpdGlvblNjcmVlbi54Kj1BLEwucG9zaXRpb25TY3JlZW4ueSo9SyxFYS5zZXRGcm9tUG9pbnRzKFtSLnBvc2l0aW9uU2NyZWVuLEwucG9zaXRpb25TY3JlZW5dKSwhMD09PXZhLmlzSW50ZXJzZWN0aW9uQm94KEVhKSlpZihCPVIsRT1MLEk9eCx4PXcsaSh4Lm9wYWNpdHkpLGsoeC5ibGVuZGluZyksRC5iZWdpblBhdGgoKSxELm1vdmVUbyhCLnBvc2l0aW9uU2NyZWVuLngsQi5wb3NpdGlvblNjcmVlbi55KSxELmxpbmVUbyhFLnBvc2l0aW9uU2NyZWVuLngsRS5wb3NpdGlvblNjcmVlbi55KSx4IGluc3RhbmNlb2YgVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWwpe20oeC5saW5ld2lkdGgpO2woeC5saW5lY2FwKTtwKHgubGluZWpvaW4pO2lmKHgudmVydGV4Q29sb3JzIT09VEhSRUUuVmVydGV4Q29sb3JzKXQoeC5jb2xvci5nZXRTdHlsZSgpKTtlbHNlIGlmKHc9SS52ZXJ0ZXhDb2xvcnNbMF0uZ2V0U3R5bGUoKSxcbkk9SS52ZXJ0ZXhDb2xvcnNbMV0uZ2V0U3R5bGUoKSx3PT09SSl0KHcpO2Vsc2V7dHJ5e3ZhciBDPUQuY3JlYXRlTGluZWFyR3JhZGllbnQoQi5wb3NpdGlvblNjcmVlbi54LEIucG9zaXRpb25TY3JlZW4ueSxFLnBvc2l0aW9uU2NyZWVuLngsRS5wb3NpdGlvblNjcmVlbi55KTtDLmFkZENvbG9yU3RvcCgwLHcpO0MuYWRkQ29sb3JTdG9wKDEsSSl9Y2F0Y2goSil7Qz13fXQoQyl9RC5zdHJva2UoKTtFYS5leHBhbmRCeVNjYWxhcigyKngubGluZXdpZHRoKX1lbHNlIHggaW5zdGFuY2VvZiBUSFJFRS5MaW5lRGFzaGVkTWF0ZXJpYWwmJihtKHgubGluZXdpZHRoKSxsKHgubGluZWNhcCkscCh4LmxpbmVqb2luKSx0KHguY29sb3IuZ2V0U3R5bGUoKSkscSh4LmRhc2hTaXplLHguZ2FwU2l6ZSksRC5zdHJva2UoKSxFYS5leHBhbmRCeVNjYWxhcigyKngubGluZXdpZHRoKSxxKG51bGwsbnVsbCkpfWVsc2UgaWYoeCBpbnN0YW5jZW9mIFRIUkVFLlJlbmRlcmFibGVGYWNlMyl7Uj14LnYxO1xuTD14LnYyO2RhPXgudjM7aWYoLTE+Ui5wb3NpdGlvblNjcmVlbi56fHwxPFIucG9zaXRpb25TY3JlZW4ueiljb250aW51ZTtpZigtMT5MLnBvc2l0aW9uU2NyZWVuLnp8fDE8TC5wb3NpdGlvblNjcmVlbi56KWNvbnRpbnVlO2lmKC0xPmRhLnBvc2l0aW9uU2NyZWVuLnp8fDE8ZGEucG9zaXRpb25TY3JlZW4ueiljb250aW51ZTtSLnBvc2l0aW9uU2NyZWVuLngqPUE7Ui5wb3NpdGlvblNjcmVlbi55Kj1LO0wucG9zaXRpb25TY3JlZW4ueCo9QTtMLnBvc2l0aW9uU2NyZWVuLnkqPUs7ZGEucG9zaXRpb25TY3JlZW4ueCo9QTtkYS5wb3NpdGlvblNjcmVlbi55Kj1LOzA8dy5vdmVyZHJhdyYmKGcoUi5wb3NpdGlvblNjcmVlbixMLnBvc2l0aW9uU2NyZWVuLHcub3ZlcmRyYXcpLGcoTC5wb3NpdGlvblNjcmVlbixkYS5wb3NpdGlvblNjcmVlbix3Lm92ZXJkcmF3KSxnKGRhLnBvc2l0aW9uU2NyZWVuLFIucG9zaXRpb25TY3JlZW4sdy5vdmVyZHJhdykpO0VhLnNldEZyb21Qb2ludHMoW1IucG9zaXRpb25TY3JlZW4sXG5MLnBvc2l0aW9uU2NyZWVuLGRhLnBvc2l0aW9uU2NyZWVuXSk7aWYoITA9PT12YS5pc0ludGVyc2VjdGlvbkJveChFYSkpe0I9UjtFPUw7ST1kYTt1LmluZm8ucmVuZGVyLnZlcnRpY2VzKz0zO3UuaW5mby5yZW5kZXIuZmFjZXMrKztpKHcub3BhY2l0eSk7ayh3LmJsZW5kaW5nKTt6YT1CLnBvc2l0aW9uU2NyZWVuLng7QmE9Qi5wb3NpdGlvblNjcmVlbi55O2JhPUUucG9zaXRpb25TY3JlZW4ueDtBYT1FLnBvc2l0aW9uU2NyZWVuLnk7JD1JLnBvc2l0aW9uU2NyZWVuLng7ZWE9SS5wb3NpdGlvblNjcmVlbi55O3ZhciBPPXphLE09QmEsY2E9YmEsa2E9QWEsbmE9JCxwYT1lYTtELmJlZ2luUGF0aCgpO0QubW92ZVRvKE8sTSk7RC5saW5lVG8oY2Esa2EpO0QubGluZVRvKG5hLHBhKTtELmNsb3NlUGF0aCgpOyh3IGluc3RhbmNlb2YgVEhSRUUuTWVzaExhbWJlcnRNYXRlcmlhbHx8dyBpbnN0YW5jZW9mIFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKSYmbnVsbD09PXcubWFwPyhzYS5jb3B5KHcuY29sb3IpLFxuaGEuY29weSh3LmVtaXNzaXZlKSx3LnZlcnRleENvbG9ycz09PVRIUkVFLkZhY2VDb2xvcnMmJnNhLm11bHRpcGx5KHguY29sb3IpLCExPT09dy53aXJlZnJhbWUmJncuc2hhZGluZz09PVRIUkVFLlNtb290aFNoYWRpbmcmJjM9PT14LnZlcnRleE5vcm1hbHNMZW5ndGg/KFAuY29weShnYiksWS5jb3B5KGdiKSxVLmNvcHkoZ2IpLGIoeC52MS5wb3NpdGlvbldvcmxkLHgudmVydGV4Tm9ybWFsc01vZGVsWzBdLFApLGIoeC52Mi5wb3NpdGlvbldvcmxkLHgudmVydGV4Tm9ybWFsc01vZGVsWzFdLFkpLGIoeC52My5wb3NpdGlvbldvcmxkLHgudmVydGV4Tm9ybWFsc01vZGVsWzJdLFUpLFAubXVsdGlwbHkoc2EpLmFkZChoYSksWS5tdWx0aXBseShzYSkuYWRkKGhhKSxVLm11bHRpcGx5KHNhKS5hZGQoaGEpLGphLmFkZENvbG9ycyhZLFUpLm11bHRpcGx5U2NhbGFyKDAuNSksUWE9aChQLFksVSxqYSksZih6YSxCYSxiYSxBYSwkLGVhLDAsMCwxLDAsMCwxLFFhKSk6KFYuY29weShnYiksXG5iKHguY2VudHJvaWRNb2RlbCx4Lm5vcm1hbE1vZGVsLFYpLFYubXVsdGlwbHkoc2EpLmFkZChoYSksITA9PT13LndpcmVmcmFtZT9jKFYsdy53aXJlZnJhbWVMaW5ld2lkdGgsdy53aXJlZnJhbWVMaW5lY2FwLHcud2lyZWZyYW1lTGluZWpvaW4pOmQoVikpKTp3IGluc3RhbmNlb2YgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWx8fHcgaW5zdGFuY2VvZiBUSFJFRS5NZXNoTGFtYmVydE1hdGVyaWFsfHx3IGluc3RhbmNlb2YgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWw/bnVsbCE9PXcubWFwP3cubWFwLm1hcHBpbmcgaW5zdGFuY2VvZiBUSFJFRS5VVk1hcHBpbmcmJih3YT14LnV2c1swXSxlKHphLEJhLGJhLEFhLCQsZWEsd2FbMF0ueCx3YVswXS55LHdhWzFdLngsd2FbMV0ueSx3YVsyXS54LHdhWzJdLnksdy5tYXApKTpudWxsIT09dy5lbnZNYXA/dy5lbnZNYXAubWFwcGluZyBpbnN0YW5jZW9mIFRIUkVFLlNwaGVyaWNhbFJlZmxlY3Rpb25NYXBwaW5nJiYodGEuY29weSh4LnZlcnRleE5vcm1hbHNNb2RlbFZpZXdbMF0pLFxuYmI9MC41KnRhLngrMC41LGNiPTAuNSp0YS55KzAuNSx0YS5jb3B5KHgudmVydGV4Tm9ybWFsc01vZGVsVmlld1sxXSksTWE9MC41KnRhLngrMC41LGZiPTAuNSp0YS55KzAuNSx0YS5jb3B5KHgudmVydGV4Tm9ybWFsc01vZGVsVmlld1syXSksc2I9MC41KnRhLngrMC41LHBiPTAuNSp0YS55KzAuNSxlKHphLEJhLGJhLEFhLCQsZWEsYmIsY2IsTWEsZmIsc2IscGIsdy5lbnZNYXApKTooVi5jb3B5KHcuY29sb3IpLHcudmVydGV4Q29sb3JzPT09VEhSRUUuRmFjZUNvbG9ycyYmVi5tdWx0aXBseSh4LmNvbG9yKSwhMD09PXcud2lyZWZyYW1lP2MoVix3LndpcmVmcmFtZUxpbmV3aWR0aCx3LndpcmVmcmFtZUxpbmVjYXAsdy53aXJlZnJhbWVMaW5lam9pbik6ZChWKSk6dyBpbnN0YW5jZW9mIFRIUkVFLk1lc2hEZXB0aE1hdGVyaWFsPyhEYT1RLm5lYXIsVWE9US5mYXIsUC5yPVAuZz1QLmI9MS1uKEIucG9zaXRpb25TY3JlZW4ueipCLnBvc2l0aW9uU2NyZWVuLncsRGEsVWEpLFkucj1ZLmc9XG5ZLmI9MS1uKEUucG9zaXRpb25TY3JlZW4ueipFLnBvc2l0aW9uU2NyZWVuLncsRGEsVWEpLFUucj1VLmc9VS5iPTEtbihJLnBvc2l0aW9uU2NyZWVuLnoqSS5wb3NpdGlvblNjcmVlbi53LERhLFVhKSxqYS5hZGRDb2xvcnMoWSxVKS5tdWx0aXBseVNjYWxhcigwLjUpLFFhPWgoUCxZLFUsamEpLGYoemEsQmEsYmEsQWEsJCxlYSwwLDAsMSwwLDAsMSxRYSkpOncgaW5zdGFuY2VvZiBUSFJFRS5NZXNoTm9ybWFsTWF0ZXJpYWwmJihCPXZvaWQgMCx3LnNoYWRpbmc9PT1USFJFRS5GbGF0U2hhZGluZz8oQj14Lm5vcm1hbE1vZGVsVmlldyxWLnNldFJHQihCLngsQi55LEIueikubXVsdGlwbHlTY2FsYXIoMC41KS5hZGRTY2FsYXIoMC41KSwhMD09PXcud2lyZWZyYW1lP2MoVix3LndpcmVmcmFtZUxpbmV3aWR0aCx3LndpcmVmcmFtZUxpbmVjYXAsdy53aXJlZnJhbWVMaW5lam9pbik6ZChWKSk6dy5zaGFkaW5nPT09VEhSRUUuU21vb3RoU2hhZGluZyYmKEI9eC52ZXJ0ZXhOb3JtYWxzTW9kZWxWaWV3WzBdLFxuUC5zZXRSR0IoQi54LEIueSxCLnopLm11bHRpcGx5U2NhbGFyKDAuNSkuYWRkU2NhbGFyKDAuNSksQj14LnZlcnRleE5vcm1hbHNNb2RlbFZpZXdbMV0sWS5zZXRSR0IoQi54LEIueSxCLnopLm11bHRpcGx5U2NhbGFyKDAuNSkuYWRkU2NhbGFyKDAuNSksQj14LnZlcnRleE5vcm1hbHNNb2RlbFZpZXdbMl0sVS5zZXRSR0IoQi54LEIueSxCLnopLm11bHRpcGx5U2NhbGFyKDAuNSkuYWRkU2NhbGFyKDAuNSksamEuYWRkQ29sb3JzKFksVSkubXVsdGlwbHlTY2FsYXIoMC41KSxRYT1oKFAsWSxVLGphKSxmKHphLEJhLGJhLEFhLCQsZWEsMCwwLDEsMCwwLDEsUWEpKSl9fWxhLnVuaW9uKEVhKX19RC5zZXRUcmFuc2Zvcm0oMSwwLDAsMSwwLDApfX19O1RIUkVFLlNoYWRlckNodW5rPXtmb2dfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfRk9HXFxudW5pZm9ybSB2ZWMzIGZvZ0NvbG9yO1xcbiNpZmRlZiBGT0dfRVhQMlxcbnVuaWZvcm0gZmxvYXQgZm9nRGVuc2l0eTtcXG4jZWxzZVxcbnVuaWZvcm0gZmxvYXQgZm9nTmVhcjtcXG51bmlmb3JtIGZsb2F0IGZvZ0ZhcjtcXG4jZW5kaWZcXG4jZW5kaWZcIixmb2dfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX0ZPR1xcbmZsb2F0IGRlcHRoID0gZ2xfRnJhZ0Nvb3JkLnogLyBnbF9GcmFnQ29vcmQudztcXG4jaWZkZWYgRk9HX0VYUDJcXG5jb25zdCBmbG9hdCBMT0cyID0gMS40NDI2OTU7XFxuZmxvYXQgZm9nRmFjdG9yID0gZXhwMiggLSBmb2dEZW5zaXR5ICogZm9nRGVuc2l0eSAqIGRlcHRoICogZGVwdGggKiBMT0cyICk7XFxuZm9nRmFjdG9yID0gMS4wIC0gY2xhbXAoIGZvZ0ZhY3RvciwgMC4wLCAxLjAgKTtcXG4jZWxzZVxcbmZsb2F0IGZvZ0ZhY3RvciA9IHNtb290aHN0ZXAoIGZvZ05lYXIsIGZvZ0ZhciwgZGVwdGggKTtcXG4jZW5kaWZcXG5nbF9GcmFnQ29sb3IgPSBtaXgoIGdsX0ZyYWdDb2xvciwgdmVjNCggZm9nQ29sb3IsIGdsX0ZyYWdDb2xvci53ICksIGZvZ0ZhY3RvciApO1xcbiNlbmRpZlwiLFxuZW52bWFwX3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX0VOVk1BUFxcbnVuaWZvcm0gZmxvYXQgcmVmbGVjdGl2aXR5O1xcbnVuaWZvcm0gc2FtcGxlckN1YmUgZW52TWFwO1xcbnVuaWZvcm0gZmxvYXQgZmxpcEVudk1hcDtcXG51bmlmb3JtIGludCBjb21iaW5lO1xcbiNpZiBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKVxcbnVuaWZvcm0gYm9vbCB1c2VSZWZyYWN0O1xcbnVuaWZvcm0gZmxvYXQgcmVmcmFjdGlvblJhdGlvO1xcbiNlbHNlXFxudmFyeWluZyB2ZWMzIHZSZWZsZWN0O1xcbiNlbmRpZlxcbiNlbmRpZlwiLGVudm1hcF9mcmFnbWVudDpcIiNpZmRlZiBVU0VfRU5WTUFQXFxudmVjMyByZWZsZWN0VmVjO1xcbiNpZiBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKVxcbnZlYzMgY2FtZXJhVG9WZXJ0ZXggPSBub3JtYWxpemUoIHZXb3JsZFBvc2l0aW9uIC0gY2FtZXJhUG9zaXRpb24gKTtcXG5pZiAoIHVzZVJlZnJhY3QgKSB7XFxucmVmbGVjdFZlYyA9IHJlZnJhY3QoIGNhbWVyYVRvVmVydGV4LCBub3JtYWwsIHJlZnJhY3Rpb25SYXRpbyApO1xcbn0gZWxzZSB7IFxcbnJlZmxlY3RWZWMgPSByZWZsZWN0KCBjYW1lcmFUb1ZlcnRleCwgbm9ybWFsICk7XFxufVxcbiNlbHNlXFxucmVmbGVjdFZlYyA9IHZSZWZsZWN0O1xcbiNlbmRpZlxcbiNpZmRlZiBET1VCTEVfU0lERURcXG5mbG9hdCBmbGlwTm9ybWFsID0gKCAtMS4wICsgMi4wICogZmxvYXQoIGdsX0Zyb250RmFjaW5nICkgKTtcXG52ZWM0IGN1YmVDb2xvciA9IHRleHR1cmVDdWJlKCBlbnZNYXAsIGZsaXBOb3JtYWwgKiB2ZWMzKCBmbGlwRW52TWFwICogcmVmbGVjdFZlYy54LCByZWZsZWN0VmVjLnl6ICkgKTtcXG4jZWxzZVxcbnZlYzQgY3ViZUNvbG9yID0gdGV4dHVyZUN1YmUoIGVudk1hcCwgdmVjMyggZmxpcEVudk1hcCAqIHJlZmxlY3RWZWMueCwgcmVmbGVjdFZlYy55eiApICk7XFxuI2VuZGlmXFxuI2lmZGVmIEdBTU1BX0lOUFVUXFxuY3ViZUNvbG9yLnh5eiAqPSBjdWJlQ29sb3IueHl6O1xcbiNlbmRpZlxcbmlmICggY29tYmluZSA9PSAxICkge1xcbmdsX0ZyYWdDb2xvci54eXogPSBtaXgoIGdsX0ZyYWdDb2xvci54eXosIGN1YmVDb2xvci54eXosIHNwZWN1bGFyU3RyZW5ndGggKiByZWZsZWN0aXZpdHkgKTtcXG59IGVsc2UgaWYgKCBjb21iaW5lID09IDIgKSB7XFxuZ2xfRnJhZ0NvbG9yLnh5eiArPSBjdWJlQ29sb3IueHl6ICogc3BlY3VsYXJTdHJlbmd0aCAqIHJlZmxlY3Rpdml0eTtcXG59IGVsc2Uge1xcbmdsX0ZyYWdDb2xvci54eXogPSBtaXgoIGdsX0ZyYWdDb2xvci54eXosIGdsX0ZyYWdDb2xvci54eXogKiBjdWJlQ29sb3IueHl6LCBzcGVjdWxhclN0cmVuZ3RoICogcmVmbGVjdGl2aXR5ICk7XFxufVxcbiNlbmRpZlwiLFxuZW52bWFwX3BhcnNfdmVydGV4OlwiI2lmIGRlZmluZWQoIFVTRV9FTlZNQVAgKSAmJiAhIGRlZmluZWQoIFVTRV9CVU1QTUFQICkgJiYgISBkZWZpbmVkKCBVU0VfTk9STUFMTUFQIClcXG52YXJ5aW5nIHZlYzMgdlJlZmxlY3Q7XFxudW5pZm9ybSBmbG9hdCByZWZyYWN0aW9uUmF0aW87XFxudW5pZm9ybSBib29sIHVzZVJlZnJhY3Q7XFxuI2VuZGlmXCIsd29ybGRwb3NfdmVydGV4OlwiI2lmIGRlZmluZWQoIFVTRV9FTlZNQVAgKSB8fCBkZWZpbmVkKCBQSE9ORyApIHx8IGRlZmluZWQoIExBTUJFUlQgKSB8fCBkZWZpbmVkICggVVNFX1NIQURPV01BUCApXFxuI2lmZGVmIFVTRV9TS0lOTklOR1xcbnZlYzQgd29ybGRQb3NpdGlvbiA9IG1vZGVsTWF0cml4ICogc2tpbm5lZDtcXG4jZW5kaWZcXG4jaWYgZGVmaW5lZCggVVNFX01PUlBIVEFSR0VUUyApICYmICEgZGVmaW5lZCggVVNFX1NLSU5OSU5HIClcXG52ZWM0IHdvcmxkUG9zaXRpb24gPSBtb2RlbE1hdHJpeCAqIHZlYzQoIG1vcnBoZWQsIDEuMCApO1xcbiNlbmRpZlxcbiNpZiAhIGRlZmluZWQoIFVTRV9NT1JQSFRBUkdFVFMgKSAmJiAhIGRlZmluZWQoIFVTRV9TS0lOTklORyApXFxudmVjNCB3b3JsZFBvc2l0aW9uID0gbW9kZWxNYXRyaXggKiB2ZWM0KCBwb3NpdGlvbiwgMS4wICk7XFxuI2VuZGlmXFxuI2VuZGlmXCIsXG5lbnZtYXBfdmVydGV4OlwiI2lmIGRlZmluZWQoIFVTRV9FTlZNQVAgKSAmJiAhIGRlZmluZWQoIFVTRV9CVU1QTUFQICkgJiYgISBkZWZpbmVkKCBVU0VfTk9STUFMTUFQIClcXG52ZWMzIHdvcmxkTm9ybWFsID0gbWF0MyggbW9kZWxNYXRyaXhbIDAgXS54eXosIG1vZGVsTWF0cml4WyAxIF0ueHl6LCBtb2RlbE1hdHJpeFsgMiBdLnh5eiApICogb2JqZWN0Tm9ybWFsO1xcbndvcmxkTm9ybWFsID0gbm9ybWFsaXplKCB3b3JsZE5vcm1hbCApO1xcbnZlYzMgY2FtZXJhVG9WZXJ0ZXggPSBub3JtYWxpemUoIHdvcmxkUG9zaXRpb24ueHl6IC0gY2FtZXJhUG9zaXRpb24gKTtcXG5pZiAoIHVzZVJlZnJhY3QgKSB7XFxudlJlZmxlY3QgPSByZWZyYWN0KCBjYW1lcmFUb1ZlcnRleCwgd29ybGROb3JtYWwsIHJlZnJhY3Rpb25SYXRpbyApO1xcbn0gZWxzZSB7XFxudlJlZmxlY3QgPSByZWZsZWN0KCBjYW1lcmFUb1ZlcnRleCwgd29ybGROb3JtYWwgKTtcXG59XFxuI2VuZGlmXCIsbWFwX3BhcnRpY2xlX3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX01BUFxcbnVuaWZvcm0gc2FtcGxlcjJEIG1hcDtcXG4jZW5kaWZcIixcbm1hcF9wYXJ0aWNsZV9mcmFnbWVudDpcIiNpZmRlZiBVU0VfTUFQXFxuZ2xfRnJhZ0NvbG9yID0gZ2xfRnJhZ0NvbG9yICogdGV4dHVyZTJEKCBtYXAsIHZlYzIoIGdsX1BvaW50Q29vcmQueCwgMS4wIC0gZ2xfUG9pbnRDb29yZC55ICkgKTtcXG4jZW5kaWZcIixtYXBfcGFyc192ZXJ0ZXg6XCIjaWYgZGVmaW5lZCggVVNFX01BUCApIHx8IGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApIHx8IGRlZmluZWQoIFVTRV9TUEVDVUxBUk1BUCApXFxudmFyeWluZyB2ZWMyIHZVdjtcXG51bmlmb3JtIHZlYzQgb2Zmc2V0UmVwZWF0O1xcbiNlbmRpZlwiLG1hcF9wYXJzX2ZyYWdtZW50OlwiI2lmIGRlZmluZWQoIFVTRV9NQVAgKSB8fCBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKSB8fCBkZWZpbmVkKCBVU0VfU1BFQ1VMQVJNQVAgKVxcbnZhcnlpbmcgdmVjMiB2VXY7XFxuI2VuZGlmXFxuI2lmZGVmIFVTRV9NQVBcXG51bmlmb3JtIHNhbXBsZXIyRCBtYXA7XFxuI2VuZGlmXCIsXG5tYXBfdmVydGV4OlwiI2lmIGRlZmluZWQoIFVTRV9NQVAgKSB8fCBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKSB8fCBkZWZpbmVkKCBVU0VfU1BFQ1VMQVJNQVAgKVxcbnZVdiA9IHV2ICogb2Zmc2V0UmVwZWF0Lnp3ICsgb2Zmc2V0UmVwZWF0Lnh5O1xcbiNlbmRpZlwiLG1hcF9mcmFnbWVudDpcIiNpZmRlZiBVU0VfTUFQXFxudmVjNCB0ZXhlbENvbG9yID0gdGV4dHVyZTJEKCBtYXAsIHZVdiApO1xcbiNpZmRlZiBHQU1NQV9JTlBVVFxcbnRleGVsQ29sb3IueHl6ICo9IHRleGVsQ29sb3IueHl6O1xcbiNlbmRpZlxcbmdsX0ZyYWdDb2xvciA9IGdsX0ZyYWdDb2xvciAqIHRleGVsQ29sb3I7XFxuI2VuZGlmXCIsbGlnaHRtYXBfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfTElHSFRNQVBcXG52YXJ5aW5nIHZlYzIgdlV2MjtcXG51bmlmb3JtIHNhbXBsZXIyRCBsaWdodE1hcDtcXG4jZW5kaWZcIixsaWdodG1hcF9wYXJzX3ZlcnRleDpcIiNpZmRlZiBVU0VfTElHSFRNQVBcXG52YXJ5aW5nIHZlYzIgdlV2MjtcXG4jZW5kaWZcIixcbmxpZ2h0bWFwX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9MSUdIVE1BUFxcbmdsX0ZyYWdDb2xvciA9IGdsX0ZyYWdDb2xvciAqIHRleHR1cmUyRCggbGlnaHRNYXAsIHZVdjIgKTtcXG4jZW5kaWZcIixsaWdodG1hcF92ZXJ0ZXg6XCIjaWZkZWYgVVNFX0xJR0hUTUFQXFxudlV2MiA9IHV2MjtcXG4jZW5kaWZcIixidW1wbWFwX3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX0JVTVBNQVBcXG51bmlmb3JtIHNhbXBsZXIyRCBidW1wTWFwO1xcbnVuaWZvcm0gZmxvYXQgYnVtcFNjYWxlO1xcbnZlYzIgZEhkeHlfZndkKCkge1xcbnZlYzIgZFNUZHggPSBkRmR4KCB2VXYgKTtcXG52ZWMyIGRTVGR5ID0gZEZkeSggdlV2ICk7XFxuZmxvYXQgSGxsID0gYnVtcFNjYWxlICogdGV4dHVyZTJEKCBidW1wTWFwLCB2VXYgKS54O1xcbmZsb2F0IGRCeCA9IGJ1bXBTY2FsZSAqIHRleHR1cmUyRCggYnVtcE1hcCwgdlV2ICsgZFNUZHggKS54IC0gSGxsO1xcbmZsb2F0IGRCeSA9IGJ1bXBTY2FsZSAqIHRleHR1cmUyRCggYnVtcE1hcCwgdlV2ICsgZFNUZHkgKS54IC0gSGxsO1xcbnJldHVybiB2ZWMyKCBkQngsIGRCeSApO1xcbn1cXG52ZWMzIHBlcnR1cmJOb3JtYWxBcmIoIHZlYzMgc3VyZl9wb3MsIHZlYzMgc3VyZl9ub3JtLCB2ZWMyIGRIZHh5ICkge1xcbnZlYzMgdlNpZ21hWCA9IGRGZHgoIHN1cmZfcG9zICk7XFxudmVjMyB2U2lnbWFZID0gZEZkeSggc3VyZl9wb3MgKTtcXG52ZWMzIHZOID0gc3VyZl9ub3JtO1xcbnZlYzMgUjEgPSBjcm9zcyggdlNpZ21hWSwgdk4gKTtcXG52ZWMzIFIyID0gY3Jvc3MoIHZOLCB2U2lnbWFYICk7XFxuZmxvYXQgZkRldCA9IGRvdCggdlNpZ21hWCwgUjEgKTtcXG52ZWMzIHZHcmFkID0gc2lnbiggZkRldCApICogKCBkSGR4eS54ICogUjEgKyBkSGR4eS55ICogUjIgKTtcXG5yZXR1cm4gbm9ybWFsaXplKCBhYnMoIGZEZXQgKSAqIHN1cmZfbm9ybSAtIHZHcmFkICk7XFxufVxcbiNlbmRpZlwiLFxubm9ybWFsbWFwX3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX05PUk1BTE1BUFxcbnVuaWZvcm0gc2FtcGxlcjJEIG5vcm1hbE1hcDtcXG51bmlmb3JtIHZlYzIgbm9ybWFsU2NhbGU7XFxudmVjMyBwZXJ0dXJiTm9ybWFsMkFyYiggdmVjMyBleWVfcG9zLCB2ZWMzIHN1cmZfbm9ybSApIHtcXG52ZWMzIHEwID0gZEZkeCggZXllX3Bvcy54eXogKTtcXG52ZWMzIHExID0gZEZkeSggZXllX3Bvcy54eXogKTtcXG52ZWMyIHN0MCA9IGRGZHgoIHZVdi5zdCApO1xcbnZlYzIgc3QxID0gZEZkeSggdlV2LnN0ICk7XFxudmVjMyBTID0gbm9ybWFsaXplKCAgcTAgKiBzdDEudCAtIHExICogc3QwLnQgKTtcXG52ZWMzIFQgPSBub3JtYWxpemUoIC1xMCAqIHN0MS5zICsgcTEgKiBzdDAucyApO1xcbnZlYzMgTiA9IG5vcm1hbGl6ZSggc3VyZl9ub3JtICk7XFxudmVjMyBtYXBOID0gdGV4dHVyZTJEKCBub3JtYWxNYXAsIHZVdiApLnh5eiAqIDIuMCAtIDEuMDtcXG5tYXBOLnh5ID0gbm9ybWFsU2NhbGUgKiBtYXBOLnh5O1xcbm1hdDMgdHNuID0gbWF0MyggUywgVCwgTiApO1xcbnJldHVybiBub3JtYWxpemUoIHRzbiAqIG1hcE4gKTtcXG59XFxuI2VuZGlmXCIsXG5zcGVjdWxhcm1hcF9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9TUEVDVUxBUk1BUFxcbnVuaWZvcm0gc2FtcGxlcjJEIHNwZWN1bGFyTWFwO1xcbiNlbmRpZlwiLHNwZWN1bGFybWFwX2ZyYWdtZW50OlwiZmxvYXQgc3BlY3VsYXJTdHJlbmd0aDtcXG4jaWZkZWYgVVNFX1NQRUNVTEFSTUFQXFxudmVjNCB0ZXhlbFNwZWN1bGFyID0gdGV4dHVyZTJEKCBzcGVjdWxhck1hcCwgdlV2ICk7XFxuc3BlY3VsYXJTdHJlbmd0aCA9IHRleGVsU3BlY3VsYXIucjtcXG4jZWxzZVxcbnNwZWN1bGFyU3RyZW5ndGggPSAxLjA7XFxuI2VuZGlmXCIsbGlnaHRzX2xhbWJlcnRfcGFyc192ZXJ0ZXg6XCJ1bmlmb3JtIHZlYzMgYW1iaWVudDtcXG51bmlmb3JtIHZlYzMgZGlmZnVzZTtcXG51bmlmb3JtIHZlYzMgZW1pc3NpdmU7XFxudW5pZm9ybSB2ZWMzIGFtYmllbnRMaWdodENvbG9yO1xcbiNpZiBNQVhfRElSX0xJR0hUUyA+IDBcXG51bmlmb3JtIHZlYzMgZGlyZWN0aW9uYWxMaWdodENvbG9yWyBNQVhfRElSX0xJR0hUUyBdO1xcbnVuaWZvcm0gdmVjMyBkaXJlY3Rpb25hbExpZ2h0RGlyZWN0aW9uWyBNQVhfRElSX0xJR0hUUyBdO1xcbiNlbmRpZlxcbiNpZiBNQVhfSEVNSV9MSUdIVFMgPiAwXFxudW5pZm9ybSB2ZWMzIGhlbWlzcGhlcmVMaWdodFNreUNvbG9yWyBNQVhfSEVNSV9MSUdIVFMgXTtcXG51bmlmb3JtIHZlYzMgaGVtaXNwaGVyZUxpZ2h0R3JvdW5kQ29sb3JbIE1BWF9IRU1JX0xJR0hUUyBdO1xcbnVuaWZvcm0gdmVjMyBoZW1pc3BoZXJlTGlnaHREaXJlY3Rpb25bIE1BWF9IRU1JX0xJR0hUUyBdO1xcbiNlbmRpZlxcbiNpZiBNQVhfUE9JTlRfTElHSFRTID4gMFxcbnVuaWZvcm0gdmVjMyBwb2ludExpZ2h0Q29sb3JbIE1BWF9QT0lOVF9MSUdIVFMgXTtcXG51bmlmb3JtIHZlYzMgcG9pbnRMaWdodFBvc2l0aW9uWyBNQVhfUE9JTlRfTElHSFRTIF07XFxudW5pZm9ybSBmbG9hdCBwb2ludExpZ2h0RGlzdGFuY2VbIE1BWF9QT0lOVF9MSUdIVFMgXTtcXG4jZW5kaWZcXG4jaWYgTUFYX1NQT1RfTElHSFRTID4gMFxcbnVuaWZvcm0gdmVjMyBzcG90TGlnaHRDb2xvclsgTUFYX1NQT1RfTElHSFRTIF07XFxudW5pZm9ybSB2ZWMzIHNwb3RMaWdodFBvc2l0aW9uWyBNQVhfU1BPVF9MSUdIVFMgXTtcXG51bmlmb3JtIHZlYzMgc3BvdExpZ2h0RGlyZWN0aW9uWyBNQVhfU1BPVF9MSUdIVFMgXTtcXG51bmlmb3JtIGZsb2F0IHNwb3RMaWdodERpc3RhbmNlWyBNQVhfU1BPVF9MSUdIVFMgXTtcXG51bmlmb3JtIGZsb2F0IHNwb3RMaWdodEFuZ2xlQ29zWyBNQVhfU1BPVF9MSUdIVFMgXTtcXG51bmlmb3JtIGZsb2F0IHNwb3RMaWdodEV4cG9uZW50WyBNQVhfU1BPVF9MSUdIVFMgXTtcXG4jZW5kaWZcXG4jaWZkZWYgV1JBUF9BUk9VTkRcXG51bmlmb3JtIHZlYzMgd3JhcFJHQjtcXG4jZW5kaWZcIixcbmxpZ2h0c19sYW1iZXJ0X3ZlcnRleDpcInZMaWdodEZyb250ID0gdmVjMyggMC4wICk7XFxuI2lmZGVmIERPVUJMRV9TSURFRFxcbnZMaWdodEJhY2sgPSB2ZWMzKCAwLjAgKTtcXG4jZW5kaWZcXG50cmFuc2Zvcm1lZE5vcm1hbCA9IG5vcm1hbGl6ZSggdHJhbnNmb3JtZWROb3JtYWwgKTtcXG4jaWYgTUFYX0RJUl9MSUdIVFMgPiAwXFxuZm9yKCBpbnQgaSA9IDA7IGkgPCBNQVhfRElSX0xJR0hUUzsgaSArKyApIHtcXG52ZWM0IGxEaXJlY3Rpb24gPSB2aWV3TWF0cml4ICogdmVjNCggZGlyZWN0aW9uYWxMaWdodERpcmVjdGlvblsgaSBdLCAwLjAgKTtcXG52ZWMzIGRpclZlY3RvciA9IG5vcm1hbGl6ZSggbERpcmVjdGlvbi54eXogKTtcXG5mbG9hdCBkb3RQcm9kdWN0ID0gZG90KCB0cmFuc2Zvcm1lZE5vcm1hbCwgZGlyVmVjdG9yICk7XFxudmVjMyBkaXJlY3Rpb25hbExpZ2h0V2VpZ2h0aW5nID0gdmVjMyggbWF4KCBkb3RQcm9kdWN0LCAwLjAgKSApO1xcbiNpZmRlZiBET1VCTEVfU0lERURcXG52ZWMzIGRpcmVjdGlvbmFsTGlnaHRXZWlnaHRpbmdCYWNrID0gdmVjMyggbWF4KCAtZG90UHJvZHVjdCwgMC4wICkgKTtcXG4jaWZkZWYgV1JBUF9BUk9VTkRcXG52ZWMzIGRpcmVjdGlvbmFsTGlnaHRXZWlnaHRpbmdIYWxmQmFjayA9IHZlYzMoIG1heCggLTAuNSAqIGRvdFByb2R1Y3QgKyAwLjUsIDAuMCApICk7XFxuI2VuZGlmXFxuI2VuZGlmXFxuI2lmZGVmIFdSQVBfQVJPVU5EXFxudmVjMyBkaXJlY3Rpb25hbExpZ2h0V2VpZ2h0aW5nSGFsZiA9IHZlYzMoIG1heCggMC41ICogZG90UHJvZHVjdCArIDAuNSwgMC4wICkgKTtcXG5kaXJlY3Rpb25hbExpZ2h0V2VpZ2h0aW5nID0gbWl4KCBkaXJlY3Rpb25hbExpZ2h0V2VpZ2h0aW5nLCBkaXJlY3Rpb25hbExpZ2h0V2VpZ2h0aW5nSGFsZiwgd3JhcFJHQiApO1xcbiNpZmRlZiBET1VCTEVfU0lERURcXG5kaXJlY3Rpb25hbExpZ2h0V2VpZ2h0aW5nQmFjayA9IG1peCggZGlyZWN0aW9uYWxMaWdodFdlaWdodGluZ0JhY2ssIGRpcmVjdGlvbmFsTGlnaHRXZWlnaHRpbmdIYWxmQmFjaywgd3JhcFJHQiApO1xcbiNlbmRpZlxcbiNlbmRpZlxcbnZMaWdodEZyb250ICs9IGRpcmVjdGlvbmFsTGlnaHRDb2xvclsgaSBdICogZGlyZWN0aW9uYWxMaWdodFdlaWdodGluZztcXG4jaWZkZWYgRE9VQkxFX1NJREVEXFxudkxpZ2h0QmFjayArPSBkaXJlY3Rpb25hbExpZ2h0Q29sb3JbIGkgXSAqIGRpcmVjdGlvbmFsTGlnaHRXZWlnaHRpbmdCYWNrO1xcbiNlbmRpZlxcbn1cXG4jZW5kaWZcXG4jaWYgTUFYX1BPSU5UX0xJR0hUUyA+IDBcXG5mb3IoIGludCBpID0gMDsgaSA8IE1BWF9QT0lOVF9MSUdIVFM7IGkgKysgKSB7XFxudmVjNCBsUG9zaXRpb24gPSB2aWV3TWF0cml4ICogdmVjNCggcG9pbnRMaWdodFBvc2l0aW9uWyBpIF0sIDEuMCApO1xcbnZlYzMgbFZlY3RvciA9IGxQb3NpdGlvbi54eXogLSBtdlBvc2l0aW9uLnh5ejtcXG5mbG9hdCBsRGlzdGFuY2UgPSAxLjA7XFxuaWYgKCBwb2ludExpZ2h0RGlzdGFuY2VbIGkgXSA+IDAuMCApXFxubERpc3RhbmNlID0gMS4wIC0gbWluKCAoIGxlbmd0aCggbFZlY3RvciApIC8gcG9pbnRMaWdodERpc3RhbmNlWyBpIF0gKSwgMS4wICk7XFxubFZlY3RvciA9IG5vcm1hbGl6ZSggbFZlY3RvciApO1xcbmZsb2F0IGRvdFByb2R1Y3QgPSBkb3QoIHRyYW5zZm9ybWVkTm9ybWFsLCBsVmVjdG9yICk7XFxudmVjMyBwb2ludExpZ2h0V2VpZ2h0aW5nID0gdmVjMyggbWF4KCBkb3RQcm9kdWN0LCAwLjAgKSApO1xcbiNpZmRlZiBET1VCTEVfU0lERURcXG52ZWMzIHBvaW50TGlnaHRXZWlnaHRpbmdCYWNrID0gdmVjMyggbWF4KCAtZG90UHJvZHVjdCwgMC4wICkgKTtcXG4jaWZkZWYgV1JBUF9BUk9VTkRcXG52ZWMzIHBvaW50TGlnaHRXZWlnaHRpbmdIYWxmQmFjayA9IHZlYzMoIG1heCggLTAuNSAqIGRvdFByb2R1Y3QgKyAwLjUsIDAuMCApICk7XFxuI2VuZGlmXFxuI2VuZGlmXFxuI2lmZGVmIFdSQVBfQVJPVU5EXFxudmVjMyBwb2ludExpZ2h0V2VpZ2h0aW5nSGFsZiA9IHZlYzMoIG1heCggMC41ICogZG90UHJvZHVjdCArIDAuNSwgMC4wICkgKTtcXG5wb2ludExpZ2h0V2VpZ2h0aW5nID0gbWl4KCBwb2ludExpZ2h0V2VpZ2h0aW5nLCBwb2ludExpZ2h0V2VpZ2h0aW5nSGFsZiwgd3JhcFJHQiApO1xcbiNpZmRlZiBET1VCTEVfU0lERURcXG5wb2ludExpZ2h0V2VpZ2h0aW5nQmFjayA9IG1peCggcG9pbnRMaWdodFdlaWdodGluZ0JhY2ssIHBvaW50TGlnaHRXZWlnaHRpbmdIYWxmQmFjaywgd3JhcFJHQiApO1xcbiNlbmRpZlxcbiNlbmRpZlxcbnZMaWdodEZyb250ICs9IHBvaW50TGlnaHRDb2xvclsgaSBdICogcG9pbnRMaWdodFdlaWdodGluZyAqIGxEaXN0YW5jZTtcXG4jaWZkZWYgRE9VQkxFX1NJREVEXFxudkxpZ2h0QmFjayArPSBwb2ludExpZ2h0Q29sb3JbIGkgXSAqIHBvaW50TGlnaHRXZWlnaHRpbmdCYWNrICogbERpc3RhbmNlO1xcbiNlbmRpZlxcbn1cXG4jZW5kaWZcXG4jaWYgTUFYX1NQT1RfTElHSFRTID4gMFxcbmZvciggaW50IGkgPSAwOyBpIDwgTUFYX1NQT1RfTElHSFRTOyBpICsrICkge1xcbnZlYzQgbFBvc2l0aW9uID0gdmlld01hdHJpeCAqIHZlYzQoIHNwb3RMaWdodFBvc2l0aW9uWyBpIF0sIDEuMCApO1xcbnZlYzMgbFZlY3RvciA9IGxQb3NpdGlvbi54eXogLSBtdlBvc2l0aW9uLnh5ejtcXG5mbG9hdCBzcG90RWZmZWN0ID0gZG90KCBzcG90TGlnaHREaXJlY3Rpb25bIGkgXSwgbm9ybWFsaXplKCBzcG90TGlnaHRQb3NpdGlvblsgaSBdIC0gd29ybGRQb3NpdGlvbi54eXogKSApO1xcbmlmICggc3BvdEVmZmVjdCA+IHNwb3RMaWdodEFuZ2xlQ29zWyBpIF0gKSB7XFxuc3BvdEVmZmVjdCA9IG1heCggcG93KCBzcG90RWZmZWN0LCBzcG90TGlnaHRFeHBvbmVudFsgaSBdICksIDAuMCApO1xcbmZsb2F0IGxEaXN0YW5jZSA9IDEuMDtcXG5pZiAoIHNwb3RMaWdodERpc3RhbmNlWyBpIF0gPiAwLjAgKVxcbmxEaXN0YW5jZSA9IDEuMCAtIG1pbiggKCBsZW5ndGgoIGxWZWN0b3IgKSAvIHNwb3RMaWdodERpc3RhbmNlWyBpIF0gKSwgMS4wICk7XFxubFZlY3RvciA9IG5vcm1hbGl6ZSggbFZlY3RvciApO1xcbmZsb2F0IGRvdFByb2R1Y3QgPSBkb3QoIHRyYW5zZm9ybWVkTm9ybWFsLCBsVmVjdG9yICk7XFxudmVjMyBzcG90TGlnaHRXZWlnaHRpbmcgPSB2ZWMzKCBtYXgoIGRvdFByb2R1Y3QsIDAuMCApICk7XFxuI2lmZGVmIERPVUJMRV9TSURFRFxcbnZlYzMgc3BvdExpZ2h0V2VpZ2h0aW5nQmFjayA9IHZlYzMoIG1heCggLWRvdFByb2R1Y3QsIDAuMCApICk7XFxuI2lmZGVmIFdSQVBfQVJPVU5EXFxudmVjMyBzcG90TGlnaHRXZWlnaHRpbmdIYWxmQmFjayA9IHZlYzMoIG1heCggLTAuNSAqIGRvdFByb2R1Y3QgKyAwLjUsIDAuMCApICk7XFxuI2VuZGlmXFxuI2VuZGlmXFxuI2lmZGVmIFdSQVBfQVJPVU5EXFxudmVjMyBzcG90TGlnaHRXZWlnaHRpbmdIYWxmID0gdmVjMyggbWF4KCAwLjUgKiBkb3RQcm9kdWN0ICsgMC41LCAwLjAgKSApO1xcbnNwb3RMaWdodFdlaWdodGluZyA9IG1peCggc3BvdExpZ2h0V2VpZ2h0aW5nLCBzcG90TGlnaHRXZWlnaHRpbmdIYWxmLCB3cmFwUkdCICk7XFxuI2lmZGVmIERPVUJMRV9TSURFRFxcbnNwb3RMaWdodFdlaWdodGluZ0JhY2sgPSBtaXgoIHNwb3RMaWdodFdlaWdodGluZ0JhY2ssIHNwb3RMaWdodFdlaWdodGluZ0hhbGZCYWNrLCB3cmFwUkdCICk7XFxuI2VuZGlmXFxuI2VuZGlmXFxudkxpZ2h0RnJvbnQgKz0gc3BvdExpZ2h0Q29sb3JbIGkgXSAqIHNwb3RMaWdodFdlaWdodGluZyAqIGxEaXN0YW5jZSAqIHNwb3RFZmZlY3Q7XFxuI2lmZGVmIERPVUJMRV9TSURFRFxcbnZMaWdodEJhY2sgKz0gc3BvdExpZ2h0Q29sb3JbIGkgXSAqIHNwb3RMaWdodFdlaWdodGluZ0JhY2sgKiBsRGlzdGFuY2UgKiBzcG90RWZmZWN0O1xcbiNlbmRpZlxcbn1cXG59XFxuI2VuZGlmXFxuI2lmIE1BWF9IRU1JX0xJR0hUUyA+IDBcXG5mb3IoIGludCBpID0gMDsgaSA8IE1BWF9IRU1JX0xJR0hUUzsgaSArKyApIHtcXG52ZWM0IGxEaXJlY3Rpb24gPSB2aWV3TWF0cml4ICogdmVjNCggaGVtaXNwaGVyZUxpZ2h0RGlyZWN0aW9uWyBpIF0sIDAuMCApO1xcbnZlYzMgbFZlY3RvciA9IG5vcm1hbGl6ZSggbERpcmVjdGlvbi54eXogKTtcXG5mbG9hdCBkb3RQcm9kdWN0ID0gZG90KCB0cmFuc2Zvcm1lZE5vcm1hbCwgbFZlY3RvciApO1xcbmZsb2F0IGhlbWlEaWZmdXNlV2VpZ2h0ID0gMC41ICogZG90UHJvZHVjdCArIDAuNTtcXG5mbG9hdCBoZW1pRGlmZnVzZVdlaWdodEJhY2sgPSAtMC41ICogZG90UHJvZHVjdCArIDAuNTtcXG52TGlnaHRGcm9udCArPSBtaXgoIGhlbWlzcGhlcmVMaWdodEdyb3VuZENvbG9yWyBpIF0sIGhlbWlzcGhlcmVMaWdodFNreUNvbG9yWyBpIF0sIGhlbWlEaWZmdXNlV2VpZ2h0ICk7XFxuI2lmZGVmIERPVUJMRV9TSURFRFxcbnZMaWdodEJhY2sgKz0gbWl4KCBoZW1pc3BoZXJlTGlnaHRHcm91bmRDb2xvclsgaSBdLCBoZW1pc3BoZXJlTGlnaHRTa3lDb2xvclsgaSBdLCBoZW1pRGlmZnVzZVdlaWdodEJhY2sgKTtcXG4jZW5kaWZcXG59XFxuI2VuZGlmXFxudkxpZ2h0RnJvbnQgPSB2TGlnaHRGcm9udCAqIGRpZmZ1c2UgKyBhbWJpZW50ICogYW1iaWVudExpZ2h0Q29sb3IgKyBlbWlzc2l2ZTtcXG4jaWZkZWYgRE9VQkxFX1NJREVEXFxudkxpZ2h0QmFjayA9IHZMaWdodEJhY2sgKiBkaWZmdXNlICsgYW1iaWVudCAqIGFtYmllbnRMaWdodENvbG9yICsgZW1pc3NpdmU7XFxuI2VuZGlmXCIsXG5saWdodHNfcGhvbmdfcGFyc192ZXJ0ZXg6XCIjaWZuZGVmIFBIT05HX1BFUl9QSVhFTFxcbiNpZiBNQVhfUE9JTlRfTElHSFRTID4gMFxcbnVuaWZvcm0gdmVjMyBwb2ludExpZ2h0UG9zaXRpb25bIE1BWF9QT0lOVF9MSUdIVFMgXTtcXG51bmlmb3JtIGZsb2F0IHBvaW50TGlnaHREaXN0YW5jZVsgTUFYX1BPSU5UX0xJR0hUUyBdO1xcbnZhcnlpbmcgdmVjNCB2UG9pbnRMaWdodFsgTUFYX1BPSU5UX0xJR0hUUyBdO1xcbiNlbmRpZlxcbiNpZiBNQVhfU1BPVF9MSUdIVFMgPiAwXFxudW5pZm9ybSB2ZWMzIHNwb3RMaWdodFBvc2l0aW9uWyBNQVhfU1BPVF9MSUdIVFMgXTtcXG51bmlmb3JtIGZsb2F0IHNwb3RMaWdodERpc3RhbmNlWyBNQVhfU1BPVF9MSUdIVFMgXTtcXG52YXJ5aW5nIHZlYzQgdlNwb3RMaWdodFsgTUFYX1NQT1RfTElHSFRTIF07XFxuI2VuZGlmXFxuI2VuZGlmXFxuI2lmIE1BWF9TUE9UX0xJR0hUUyA+IDAgfHwgZGVmaW5lZCggVVNFX0JVTVBNQVAgKVxcbnZhcnlpbmcgdmVjMyB2V29ybGRQb3NpdGlvbjtcXG4jZW5kaWZcIixcbmxpZ2h0c19waG9uZ192ZXJ0ZXg6XCIjaWZuZGVmIFBIT05HX1BFUl9QSVhFTFxcbiNpZiBNQVhfUE9JTlRfTElHSFRTID4gMFxcbmZvciggaW50IGkgPSAwOyBpIDwgTUFYX1BPSU5UX0xJR0hUUzsgaSArKyApIHtcXG52ZWM0IGxQb3NpdGlvbiA9IHZpZXdNYXRyaXggKiB2ZWM0KCBwb2ludExpZ2h0UG9zaXRpb25bIGkgXSwgMS4wICk7XFxudmVjMyBsVmVjdG9yID0gbFBvc2l0aW9uLnh5eiAtIG12UG9zaXRpb24ueHl6O1xcbmZsb2F0IGxEaXN0YW5jZSA9IDEuMDtcXG5pZiAoIHBvaW50TGlnaHREaXN0YW5jZVsgaSBdID4gMC4wIClcXG5sRGlzdGFuY2UgPSAxLjAgLSBtaW4oICggbGVuZ3RoKCBsVmVjdG9yICkgLyBwb2ludExpZ2h0RGlzdGFuY2VbIGkgXSApLCAxLjAgKTtcXG52UG9pbnRMaWdodFsgaSBdID0gdmVjNCggbFZlY3RvciwgbERpc3RhbmNlICk7XFxufVxcbiNlbmRpZlxcbiNpZiBNQVhfU1BPVF9MSUdIVFMgPiAwXFxuZm9yKCBpbnQgaSA9IDA7IGkgPCBNQVhfU1BPVF9MSUdIVFM7IGkgKysgKSB7XFxudmVjNCBsUG9zaXRpb24gPSB2aWV3TWF0cml4ICogdmVjNCggc3BvdExpZ2h0UG9zaXRpb25bIGkgXSwgMS4wICk7XFxudmVjMyBsVmVjdG9yID0gbFBvc2l0aW9uLnh5eiAtIG12UG9zaXRpb24ueHl6O1xcbmZsb2F0IGxEaXN0YW5jZSA9IDEuMDtcXG5pZiAoIHNwb3RMaWdodERpc3RhbmNlWyBpIF0gPiAwLjAgKVxcbmxEaXN0YW5jZSA9IDEuMCAtIG1pbiggKCBsZW5ndGgoIGxWZWN0b3IgKSAvIHNwb3RMaWdodERpc3RhbmNlWyBpIF0gKSwgMS4wICk7XFxudlNwb3RMaWdodFsgaSBdID0gdmVjNCggbFZlY3RvciwgbERpc3RhbmNlICk7XFxufVxcbiNlbmRpZlxcbiNlbmRpZlxcbiNpZiBNQVhfU1BPVF9MSUdIVFMgPiAwIHx8IGRlZmluZWQoIFVTRV9CVU1QTUFQIClcXG52V29ybGRQb3NpdGlvbiA9IHdvcmxkUG9zaXRpb24ueHl6O1xcbiNlbmRpZlwiLFxubGlnaHRzX3Bob25nX3BhcnNfZnJhZ21lbnQ6XCJ1bmlmb3JtIHZlYzMgYW1iaWVudExpZ2h0Q29sb3I7XFxuI2lmIE1BWF9ESVJfTElHSFRTID4gMFxcbnVuaWZvcm0gdmVjMyBkaXJlY3Rpb25hbExpZ2h0Q29sb3JbIE1BWF9ESVJfTElHSFRTIF07XFxudW5pZm9ybSB2ZWMzIGRpcmVjdGlvbmFsTGlnaHREaXJlY3Rpb25bIE1BWF9ESVJfTElHSFRTIF07XFxuI2VuZGlmXFxuI2lmIE1BWF9IRU1JX0xJR0hUUyA+IDBcXG51bmlmb3JtIHZlYzMgaGVtaXNwaGVyZUxpZ2h0U2t5Q29sb3JbIE1BWF9IRU1JX0xJR0hUUyBdO1xcbnVuaWZvcm0gdmVjMyBoZW1pc3BoZXJlTGlnaHRHcm91bmRDb2xvclsgTUFYX0hFTUlfTElHSFRTIF07XFxudW5pZm9ybSB2ZWMzIGhlbWlzcGhlcmVMaWdodERpcmVjdGlvblsgTUFYX0hFTUlfTElHSFRTIF07XFxuI2VuZGlmXFxuI2lmIE1BWF9QT0lOVF9MSUdIVFMgPiAwXFxudW5pZm9ybSB2ZWMzIHBvaW50TGlnaHRDb2xvclsgTUFYX1BPSU5UX0xJR0hUUyBdO1xcbiNpZmRlZiBQSE9OR19QRVJfUElYRUxcXG51bmlmb3JtIHZlYzMgcG9pbnRMaWdodFBvc2l0aW9uWyBNQVhfUE9JTlRfTElHSFRTIF07XFxudW5pZm9ybSBmbG9hdCBwb2ludExpZ2h0RGlzdGFuY2VbIE1BWF9QT0lOVF9MSUdIVFMgXTtcXG4jZWxzZVxcbnZhcnlpbmcgdmVjNCB2UG9pbnRMaWdodFsgTUFYX1BPSU5UX0xJR0hUUyBdO1xcbiNlbmRpZlxcbiNlbmRpZlxcbiNpZiBNQVhfU1BPVF9MSUdIVFMgPiAwXFxudW5pZm9ybSB2ZWMzIHNwb3RMaWdodENvbG9yWyBNQVhfU1BPVF9MSUdIVFMgXTtcXG51bmlmb3JtIHZlYzMgc3BvdExpZ2h0UG9zaXRpb25bIE1BWF9TUE9UX0xJR0hUUyBdO1xcbnVuaWZvcm0gdmVjMyBzcG90TGlnaHREaXJlY3Rpb25bIE1BWF9TUE9UX0xJR0hUUyBdO1xcbnVuaWZvcm0gZmxvYXQgc3BvdExpZ2h0QW5nbGVDb3NbIE1BWF9TUE9UX0xJR0hUUyBdO1xcbnVuaWZvcm0gZmxvYXQgc3BvdExpZ2h0RXhwb25lbnRbIE1BWF9TUE9UX0xJR0hUUyBdO1xcbiNpZmRlZiBQSE9OR19QRVJfUElYRUxcXG51bmlmb3JtIGZsb2F0IHNwb3RMaWdodERpc3RhbmNlWyBNQVhfU1BPVF9MSUdIVFMgXTtcXG4jZWxzZVxcbnZhcnlpbmcgdmVjNCB2U3BvdExpZ2h0WyBNQVhfU1BPVF9MSUdIVFMgXTtcXG4jZW5kaWZcXG4jZW5kaWZcXG4jaWYgTUFYX1NQT1RfTElHSFRTID4gMCB8fCBkZWZpbmVkKCBVU0VfQlVNUE1BUCApXFxudmFyeWluZyB2ZWMzIHZXb3JsZFBvc2l0aW9uO1xcbiNlbmRpZlxcbiNpZmRlZiBXUkFQX0FST1VORFxcbnVuaWZvcm0gdmVjMyB3cmFwUkdCO1xcbiNlbmRpZlxcbnZhcnlpbmcgdmVjMyB2Vmlld1Bvc2l0aW9uO1xcbnZhcnlpbmcgdmVjMyB2Tm9ybWFsO1wiLFxubGlnaHRzX3Bob25nX2ZyYWdtZW50OlwidmVjMyBub3JtYWwgPSBub3JtYWxpemUoIHZOb3JtYWwgKTtcXG52ZWMzIHZpZXdQb3NpdGlvbiA9IG5vcm1hbGl6ZSggdlZpZXdQb3NpdGlvbiApO1xcbiNpZmRlZiBET1VCTEVfU0lERURcXG5ub3JtYWwgPSBub3JtYWwgKiAoIC0xLjAgKyAyLjAgKiBmbG9hdCggZ2xfRnJvbnRGYWNpbmcgKSApO1xcbiNlbmRpZlxcbiNpZmRlZiBVU0VfTk9STUFMTUFQXFxubm9ybWFsID0gcGVydHVyYk5vcm1hbDJBcmIoIC12Vmlld1Bvc2l0aW9uLCBub3JtYWwgKTtcXG4jZWxpZiBkZWZpbmVkKCBVU0VfQlVNUE1BUCApXFxubm9ybWFsID0gcGVydHVyYk5vcm1hbEFyYiggLXZWaWV3UG9zaXRpb24sIG5vcm1hbCwgZEhkeHlfZndkKCkgKTtcXG4jZW5kaWZcXG4jaWYgTUFYX1BPSU5UX0xJR0hUUyA+IDBcXG52ZWMzIHBvaW50RGlmZnVzZSAgPSB2ZWMzKCAwLjAgKTtcXG52ZWMzIHBvaW50U3BlY3VsYXIgPSB2ZWMzKCAwLjAgKTtcXG5mb3IgKCBpbnQgaSA9IDA7IGkgPCBNQVhfUE9JTlRfTElHSFRTOyBpICsrICkge1xcbiNpZmRlZiBQSE9OR19QRVJfUElYRUxcXG52ZWM0IGxQb3NpdGlvbiA9IHZpZXdNYXRyaXggKiB2ZWM0KCBwb2ludExpZ2h0UG9zaXRpb25bIGkgXSwgMS4wICk7XFxudmVjMyBsVmVjdG9yID0gbFBvc2l0aW9uLnh5eiArIHZWaWV3UG9zaXRpb24ueHl6O1xcbmZsb2F0IGxEaXN0YW5jZSA9IDEuMDtcXG5pZiAoIHBvaW50TGlnaHREaXN0YW5jZVsgaSBdID4gMC4wIClcXG5sRGlzdGFuY2UgPSAxLjAgLSBtaW4oICggbGVuZ3RoKCBsVmVjdG9yICkgLyBwb2ludExpZ2h0RGlzdGFuY2VbIGkgXSApLCAxLjAgKTtcXG5sVmVjdG9yID0gbm9ybWFsaXplKCBsVmVjdG9yICk7XFxuI2Vsc2VcXG52ZWMzIGxWZWN0b3IgPSBub3JtYWxpemUoIHZQb2ludExpZ2h0WyBpIF0ueHl6ICk7XFxuZmxvYXQgbERpc3RhbmNlID0gdlBvaW50TGlnaHRbIGkgXS53O1xcbiNlbmRpZlxcbmZsb2F0IGRvdFByb2R1Y3QgPSBkb3QoIG5vcm1hbCwgbFZlY3RvciApO1xcbiNpZmRlZiBXUkFQX0FST1VORFxcbmZsb2F0IHBvaW50RGlmZnVzZVdlaWdodEZ1bGwgPSBtYXgoIGRvdFByb2R1Y3QsIDAuMCApO1xcbmZsb2F0IHBvaW50RGlmZnVzZVdlaWdodEhhbGYgPSBtYXgoIDAuNSAqIGRvdFByb2R1Y3QgKyAwLjUsIDAuMCApO1xcbnZlYzMgcG9pbnREaWZmdXNlV2VpZ2h0ID0gbWl4KCB2ZWMzICggcG9pbnREaWZmdXNlV2VpZ2h0RnVsbCApLCB2ZWMzKCBwb2ludERpZmZ1c2VXZWlnaHRIYWxmICksIHdyYXBSR0IgKTtcXG4jZWxzZVxcbmZsb2F0IHBvaW50RGlmZnVzZVdlaWdodCA9IG1heCggZG90UHJvZHVjdCwgMC4wICk7XFxuI2VuZGlmXFxucG9pbnREaWZmdXNlICArPSBkaWZmdXNlICogcG9pbnRMaWdodENvbG9yWyBpIF0gKiBwb2ludERpZmZ1c2VXZWlnaHQgKiBsRGlzdGFuY2U7XFxudmVjMyBwb2ludEhhbGZWZWN0b3IgPSBub3JtYWxpemUoIGxWZWN0b3IgKyB2aWV3UG9zaXRpb24gKTtcXG5mbG9hdCBwb2ludERvdE5vcm1hbEhhbGYgPSBtYXgoIGRvdCggbm9ybWFsLCBwb2ludEhhbGZWZWN0b3IgKSwgMC4wICk7XFxuZmxvYXQgcG9pbnRTcGVjdWxhcldlaWdodCA9IHNwZWN1bGFyU3RyZW5ndGggKiBtYXgoIHBvdyggcG9pbnREb3ROb3JtYWxIYWxmLCBzaGluaW5lc3MgKSwgMC4wICk7XFxuI2lmZGVmIFBIWVNJQ0FMTFlfQkFTRURfU0hBRElOR1xcbmZsb2F0IHNwZWN1bGFyTm9ybWFsaXphdGlvbiA9ICggc2hpbmluZXNzICsgMi4wMDAxICkgLyA4LjA7XFxudmVjMyBzY2hsaWNrID0gc3BlY3VsYXIgKyB2ZWMzKCAxLjAgLSBzcGVjdWxhciApICogcG93KCAxLjAgLSBkb3QoIGxWZWN0b3IsIHBvaW50SGFsZlZlY3RvciApLCA1LjAgKTtcXG5wb2ludFNwZWN1bGFyICs9IHNjaGxpY2sgKiBwb2ludExpZ2h0Q29sb3JbIGkgXSAqIHBvaW50U3BlY3VsYXJXZWlnaHQgKiBwb2ludERpZmZ1c2VXZWlnaHQgKiBsRGlzdGFuY2UgKiBzcGVjdWxhck5vcm1hbGl6YXRpb247XFxuI2Vsc2VcXG5wb2ludFNwZWN1bGFyICs9IHNwZWN1bGFyICogcG9pbnRMaWdodENvbG9yWyBpIF0gKiBwb2ludFNwZWN1bGFyV2VpZ2h0ICogcG9pbnREaWZmdXNlV2VpZ2h0ICogbERpc3RhbmNlO1xcbiNlbmRpZlxcbn1cXG4jZW5kaWZcXG4jaWYgTUFYX1NQT1RfTElHSFRTID4gMFxcbnZlYzMgc3BvdERpZmZ1c2UgID0gdmVjMyggMC4wICk7XFxudmVjMyBzcG90U3BlY3VsYXIgPSB2ZWMzKCAwLjAgKTtcXG5mb3IgKCBpbnQgaSA9IDA7IGkgPCBNQVhfU1BPVF9MSUdIVFM7IGkgKysgKSB7XFxuI2lmZGVmIFBIT05HX1BFUl9QSVhFTFxcbnZlYzQgbFBvc2l0aW9uID0gdmlld01hdHJpeCAqIHZlYzQoIHNwb3RMaWdodFBvc2l0aW9uWyBpIF0sIDEuMCApO1xcbnZlYzMgbFZlY3RvciA9IGxQb3NpdGlvbi54eXogKyB2Vmlld1Bvc2l0aW9uLnh5ejtcXG5mbG9hdCBsRGlzdGFuY2UgPSAxLjA7XFxuaWYgKCBzcG90TGlnaHREaXN0YW5jZVsgaSBdID4gMC4wIClcXG5sRGlzdGFuY2UgPSAxLjAgLSBtaW4oICggbGVuZ3RoKCBsVmVjdG9yICkgLyBzcG90TGlnaHREaXN0YW5jZVsgaSBdICksIDEuMCApO1xcbmxWZWN0b3IgPSBub3JtYWxpemUoIGxWZWN0b3IgKTtcXG4jZWxzZVxcbnZlYzMgbFZlY3RvciA9IG5vcm1hbGl6ZSggdlNwb3RMaWdodFsgaSBdLnh5eiApO1xcbmZsb2F0IGxEaXN0YW5jZSA9IHZTcG90TGlnaHRbIGkgXS53O1xcbiNlbmRpZlxcbmZsb2F0IHNwb3RFZmZlY3QgPSBkb3QoIHNwb3RMaWdodERpcmVjdGlvblsgaSBdLCBub3JtYWxpemUoIHNwb3RMaWdodFBvc2l0aW9uWyBpIF0gLSB2V29ybGRQb3NpdGlvbiApICk7XFxuaWYgKCBzcG90RWZmZWN0ID4gc3BvdExpZ2h0QW5nbGVDb3NbIGkgXSApIHtcXG5zcG90RWZmZWN0ID0gbWF4KCBwb3coIHNwb3RFZmZlY3QsIHNwb3RMaWdodEV4cG9uZW50WyBpIF0gKSwgMC4wICk7XFxuZmxvYXQgZG90UHJvZHVjdCA9IGRvdCggbm9ybWFsLCBsVmVjdG9yICk7XFxuI2lmZGVmIFdSQVBfQVJPVU5EXFxuZmxvYXQgc3BvdERpZmZ1c2VXZWlnaHRGdWxsID0gbWF4KCBkb3RQcm9kdWN0LCAwLjAgKTtcXG5mbG9hdCBzcG90RGlmZnVzZVdlaWdodEhhbGYgPSBtYXgoIDAuNSAqIGRvdFByb2R1Y3QgKyAwLjUsIDAuMCApO1xcbnZlYzMgc3BvdERpZmZ1c2VXZWlnaHQgPSBtaXgoIHZlYzMgKCBzcG90RGlmZnVzZVdlaWdodEZ1bGwgKSwgdmVjMyggc3BvdERpZmZ1c2VXZWlnaHRIYWxmICksIHdyYXBSR0IgKTtcXG4jZWxzZVxcbmZsb2F0IHNwb3REaWZmdXNlV2VpZ2h0ID0gbWF4KCBkb3RQcm9kdWN0LCAwLjAgKTtcXG4jZW5kaWZcXG5zcG90RGlmZnVzZSArPSBkaWZmdXNlICogc3BvdExpZ2h0Q29sb3JbIGkgXSAqIHNwb3REaWZmdXNlV2VpZ2h0ICogbERpc3RhbmNlICogc3BvdEVmZmVjdDtcXG52ZWMzIHNwb3RIYWxmVmVjdG9yID0gbm9ybWFsaXplKCBsVmVjdG9yICsgdmlld1Bvc2l0aW9uICk7XFxuZmxvYXQgc3BvdERvdE5vcm1hbEhhbGYgPSBtYXgoIGRvdCggbm9ybWFsLCBzcG90SGFsZlZlY3RvciApLCAwLjAgKTtcXG5mbG9hdCBzcG90U3BlY3VsYXJXZWlnaHQgPSBzcGVjdWxhclN0cmVuZ3RoICogbWF4KCBwb3coIHNwb3REb3ROb3JtYWxIYWxmLCBzaGluaW5lc3MgKSwgMC4wICk7XFxuI2lmZGVmIFBIWVNJQ0FMTFlfQkFTRURfU0hBRElOR1xcbmZsb2F0IHNwZWN1bGFyTm9ybWFsaXphdGlvbiA9ICggc2hpbmluZXNzICsgMi4wMDAxICkgLyA4LjA7XFxudmVjMyBzY2hsaWNrID0gc3BlY3VsYXIgKyB2ZWMzKCAxLjAgLSBzcGVjdWxhciApICogcG93KCAxLjAgLSBkb3QoIGxWZWN0b3IsIHNwb3RIYWxmVmVjdG9yICksIDUuMCApO1xcbnNwb3RTcGVjdWxhciArPSBzY2hsaWNrICogc3BvdExpZ2h0Q29sb3JbIGkgXSAqIHNwb3RTcGVjdWxhcldlaWdodCAqIHNwb3REaWZmdXNlV2VpZ2h0ICogbERpc3RhbmNlICogc3BlY3VsYXJOb3JtYWxpemF0aW9uICogc3BvdEVmZmVjdDtcXG4jZWxzZVxcbnNwb3RTcGVjdWxhciArPSBzcGVjdWxhciAqIHNwb3RMaWdodENvbG9yWyBpIF0gKiBzcG90U3BlY3VsYXJXZWlnaHQgKiBzcG90RGlmZnVzZVdlaWdodCAqIGxEaXN0YW5jZSAqIHNwb3RFZmZlY3Q7XFxuI2VuZGlmXFxufVxcbn1cXG4jZW5kaWZcXG4jaWYgTUFYX0RJUl9MSUdIVFMgPiAwXFxudmVjMyBkaXJEaWZmdXNlICA9IHZlYzMoIDAuMCApO1xcbnZlYzMgZGlyU3BlY3VsYXIgPSB2ZWMzKCAwLjAgKTtcXG5mb3IoIGludCBpID0gMDsgaSA8IE1BWF9ESVJfTElHSFRTOyBpICsrICkge1xcbnZlYzQgbERpcmVjdGlvbiA9IHZpZXdNYXRyaXggKiB2ZWM0KCBkaXJlY3Rpb25hbExpZ2h0RGlyZWN0aW9uWyBpIF0sIDAuMCApO1xcbnZlYzMgZGlyVmVjdG9yID0gbm9ybWFsaXplKCBsRGlyZWN0aW9uLnh5eiApO1xcbmZsb2F0IGRvdFByb2R1Y3QgPSBkb3QoIG5vcm1hbCwgZGlyVmVjdG9yICk7XFxuI2lmZGVmIFdSQVBfQVJPVU5EXFxuZmxvYXQgZGlyRGlmZnVzZVdlaWdodEZ1bGwgPSBtYXgoIGRvdFByb2R1Y3QsIDAuMCApO1xcbmZsb2F0IGRpckRpZmZ1c2VXZWlnaHRIYWxmID0gbWF4KCAwLjUgKiBkb3RQcm9kdWN0ICsgMC41LCAwLjAgKTtcXG52ZWMzIGRpckRpZmZ1c2VXZWlnaHQgPSBtaXgoIHZlYzMoIGRpckRpZmZ1c2VXZWlnaHRGdWxsICksIHZlYzMoIGRpckRpZmZ1c2VXZWlnaHRIYWxmICksIHdyYXBSR0IgKTtcXG4jZWxzZVxcbmZsb2F0IGRpckRpZmZ1c2VXZWlnaHQgPSBtYXgoIGRvdFByb2R1Y3QsIDAuMCApO1xcbiNlbmRpZlxcbmRpckRpZmZ1c2UgICs9IGRpZmZ1c2UgKiBkaXJlY3Rpb25hbExpZ2h0Q29sb3JbIGkgXSAqIGRpckRpZmZ1c2VXZWlnaHQ7XFxudmVjMyBkaXJIYWxmVmVjdG9yID0gbm9ybWFsaXplKCBkaXJWZWN0b3IgKyB2aWV3UG9zaXRpb24gKTtcXG5mbG9hdCBkaXJEb3ROb3JtYWxIYWxmID0gbWF4KCBkb3QoIG5vcm1hbCwgZGlySGFsZlZlY3RvciApLCAwLjAgKTtcXG5mbG9hdCBkaXJTcGVjdWxhcldlaWdodCA9IHNwZWN1bGFyU3RyZW5ndGggKiBtYXgoIHBvdyggZGlyRG90Tm9ybWFsSGFsZiwgc2hpbmluZXNzICksIDAuMCApO1xcbiNpZmRlZiBQSFlTSUNBTExZX0JBU0VEX1NIQURJTkdcXG5mbG9hdCBzcGVjdWxhck5vcm1hbGl6YXRpb24gPSAoIHNoaW5pbmVzcyArIDIuMDAwMSApIC8gOC4wO1xcbnZlYzMgc2NobGljayA9IHNwZWN1bGFyICsgdmVjMyggMS4wIC0gc3BlY3VsYXIgKSAqIHBvdyggMS4wIC0gZG90KCBkaXJWZWN0b3IsIGRpckhhbGZWZWN0b3IgKSwgNS4wICk7XFxuZGlyU3BlY3VsYXIgKz0gc2NobGljayAqIGRpcmVjdGlvbmFsTGlnaHRDb2xvclsgaSBdICogZGlyU3BlY3VsYXJXZWlnaHQgKiBkaXJEaWZmdXNlV2VpZ2h0ICogc3BlY3VsYXJOb3JtYWxpemF0aW9uO1xcbiNlbHNlXFxuZGlyU3BlY3VsYXIgKz0gc3BlY3VsYXIgKiBkaXJlY3Rpb25hbExpZ2h0Q29sb3JbIGkgXSAqIGRpclNwZWN1bGFyV2VpZ2h0ICogZGlyRGlmZnVzZVdlaWdodDtcXG4jZW5kaWZcXG59XFxuI2VuZGlmXFxuI2lmIE1BWF9IRU1JX0xJR0hUUyA+IDBcXG52ZWMzIGhlbWlEaWZmdXNlICA9IHZlYzMoIDAuMCApO1xcbnZlYzMgaGVtaVNwZWN1bGFyID0gdmVjMyggMC4wICk7XFxuZm9yKCBpbnQgaSA9IDA7IGkgPCBNQVhfSEVNSV9MSUdIVFM7IGkgKysgKSB7XFxudmVjNCBsRGlyZWN0aW9uID0gdmlld01hdHJpeCAqIHZlYzQoIGhlbWlzcGhlcmVMaWdodERpcmVjdGlvblsgaSBdLCAwLjAgKTtcXG52ZWMzIGxWZWN0b3IgPSBub3JtYWxpemUoIGxEaXJlY3Rpb24ueHl6ICk7XFxuZmxvYXQgZG90UHJvZHVjdCA9IGRvdCggbm9ybWFsLCBsVmVjdG9yICk7XFxuZmxvYXQgaGVtaURpZmZ1c2VXZWlnaHQgPSAwLjUgKiBkb3RQcm9kdWN0ICsgMC41O1xcbnZlYzMgaGVtaUNvbG9yID0gbWl4KCBoZW1pc3BoZXJlTGlnaHRHcm91bmRDb2xvclsgaSBdLCBoZW1pc3BoZXJlTGlnaHRTa3lDb2xvclsgaSBdLCBoZW1pRGlmZnVzZVdlaWdodCApO1xcbmhlbWlEaWZmdXNlICs9IGRpZmZ1c2UgKiBoZW1pQ29sb3I7XFxudmVjMyBoZW1pSGFsZlZlY3RvclNreSA9IG5vcm1hbGl6ZSggbFZlY3RvciArIHZpZXdQb3NpdGlvbiApO1xcbmZsb2F0IGhlbWlEb3ROb3JtYWxIYWxmU2t5ID0gMC41ICogZG90KCBub3JtYWwsIGhlbWlIYWxmVmVjdG9yU2t5ICkgKyAwLjU7XFxuZmxvYXQgaGVtaVNwZWN1bGFyV2VpZ2h0U2t5ID0gc3BlY3VsYXJTdHJlbmd0aCAqIG1heCggcG93KCBoZW1pRG90Tm9ybWFsSGFsZlNreSwgc2hpbmluZXNzICksIDAuMCApO1xcbnZlYzMgbFZlY3Rvckdyb3VuZCA9IC1sVmVjdG9yO1xcbnZlYzMgaGVtaUhhbGZWZWN0b3JHcm91bmQgPSBub3JtYWxpemUoIGxWZWN0b3JHcm91bmQgKyB2aWV3UG9zaXRpb24gKTtcXG5mbG9hdCBoZW1pRG90Tm9ybWFsSGFsZkdyb3VuZCA9IDAuNSAqIGRvdCggbm9ybWFsLCBoZW1pSGFsZlZlY3Rvckdyb3VuZCApICsgMC41O1xcbmZsb2F0IGhlbWlTcGVjdWxhcldlaWdodEdyb3VuZCA9IHNwZWN1bGFyU3RyZW5ndGggKiBtYXgoIHBvdyggaGVtaURvdE5vcm1hbEhhbGZHcm91bmQsIHNoaW5pbmVzcyApLCAwLjAgKTtcXG4jaWZkZWYgUEhZU0lDQUxMWV9CQVNFRF9TSEFESU5HXFxuZmxvYXQgZG90UHJvZHVjdEdyb3VuZCA9IGRvdCggbm9ybWFsLCBsVmVjdG9yR3JvdW5kICk7XFxuZmxvYXQgc3BlY3VsYXJOb3JtYWxpemF0aW9uID0gKCBzaGluaW5lc3MgKyAyLjAwMDEgKSAvIDguMDtcXG52ZWMzIHNjaGxpY2tTa3kgPSBzcGVjdWxhciArIHZlYzMoIDEuMCAtIHNwZWN1bGFyICkgKiBwb3coIDEuMCAtIGRvdCggbFZlY3RvciwgaGVtaUhhbGZWZWN0b3JTa3kgKSwgNS4wICk7XFxudmVjMyBzY2hsaWNrR3JvdW5kID0gc3BlY3VsYXIgKyB2ZWMzKCAxLjAgLSBzcGVjdWxhciApICogcG93KCAxLjAgLSBkb3QoIGxWZWN0b3JHcm91bmQsIGhlbWlIYWxmVmVjdG9yR3JvdW5kICksIDUuMCApO1xcbmhlbWlTcGVjdWxhciArPSBoZW1pQ29sb3IgKiBzcGVjdWxhck5vcm1hbGl6YXRpb24gKiAoIHNjaGxpY2tTa3kgKiBoZW1pU3BlY3VsYXJXZWlnaHRTa3kgKiBtYXgoIGRvdFByb2R1Y3QsIDAuMCApICsgc2NobGlja0dyb3VuZCAqIGhlbWlTcGVjdWxhcldlaWdodEdyb3VuZCAqIG1heCggZG90UHJvZHVjdEdyb3VuZCwgMC4wICkgKTtcXG4jZWxzZVxcbmhlbWlTcGVjdWxhciArPSBzcGVjdWxhciAqIGhlbWlDb2xvciAqICggaGVtaVNwZWN1bGFyV2VpZ2h0U2t5ICsgaGVtaVNwZWN1bGFyV2VpZ2h0R3JvdW5kICkgKiBoZW1pRGlmZnVzZVdlaWdodDtcXG4jZW5kaWZcXG59XFxuI2VuZGlmXFxudmVjMyB0b3RhbERpZmZ1c2UgPSB2ZWMzKCAwLjAgKTtcXG52ZWMzIHRvdGFsU3BlY3VsYXIgPSB2ZWMzKCAwLjAgKTtcXG4jaWYgTUFYX0RJUl9MSUdIVFMgPiAwXFxudG90YWxEaWZmdXNlICs9IGRpckRpZmZ1c2U7XFxudG90YWxTcGVjdWxhciArPSBkaXJTcGVjdWxhcjtcXG4jZW5kaWZcXG4jaWYgTUFYX0hFTUlfTElHSFRTID4gMFxcbnRvdGFsRGlmZnVzZSArPSBoZW1pRGlmZnVzZTtcXG50b3RhbFNwZWN1bGFyICs9IGhlbWlTcGVjdWxhcjtcXG4jZW5kaWZcXG4jaWYgTUFYX1BPSU5UX0xJR0hUUyA+IDBcXG50b3RhbERpZmZ1c2UgKz0gcG9pbnREaWZmdXNlO1xcbnRvdGFsU3BlY3VsYXIgKz0gcG9pbnRTcGVjdWxhcjtcXG4jZW5kaWZcXG4jaWYgTUFYX1NQT1RfTElHSFRTID4gMFxcbnRvdGFsRGlmZnVzZSArPSBzcG90RGlmZnVzZTtcXG50b3RhbFNwZWN1bGFyICs9IHNwb3RTcGVjdWxhcjtcXG4jZW5kaWZcXG4jaWZkZWYgTUVUQUxcXG5nbF9GcmFnQ29sb3IueHl6ID0gZ2xfRnJhZ0NvbG9yLnh5eiAqICggZW1pc3NpdmUgKyB0b3RhbERpZmZ1c2UgKyBhbWJpZW50TGlnaHRDb2xvciAqIGFtYmllbnQgKyB0b3RhbFNwZWN1bGFyICk7XFxuI2Vsc2VcXG5nbF9GcmFnQ29sb3IueHl6ID0gZ2xfRnJhZ0NvbG9yLnh5eiAqICggZW1pc3NpdmUgKyB0b3RhbERpZmZ1c2UgKyBhbWJpZW50TGlnaHRDb2xvciAqIGFtYmllbnQgKSArIHRvdGFsU3BlY3VsYXI7XFxuI2VuZGlmXCIsXG5jb2xvcl9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9DT0xPUlxcbnZhcnlpbmcgdmVjMyB2Q29sb3I7XFxuI2VuZGlmXCIsY29sb3JfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX0NPTE9SXFxuZ2xfRnJhZ0NvbG9yID0gZ2xfRnJhZ0NvbG9yICogdmVjNCggdkNvbG9yLCAxLjAgKTtcXG4jZW5kaWZcIixjb2xvcl9wYXJzX3ZlcnRleDpcIiNpZmRlZiBVU0VfQ09MT1JcXG52YXJ5aW5nIHZlYzMgdkNvbG9yO1xcbiNlbmRpZlwiLGNvbG9yX3ZlcnRleDpcIiNpZmRlZiBVU0VfQ09MT1JcXG4jaWZkZWYgR0FNTUFfSU5QVVRcXG52Q29sb3IgPSBjb2xvciAqIGNvbG9yO1xcbiNlbHNlXFxudkNvbG9yID0gY29sb3I7XFxuI2VuZGlmXFxuI2VuZGlmXCIsc2tpbm5pbmdfcGFyc192ZXJ0ZXg6XCIjaWZkZWYgVVNFX1NLSU5OSU5HXFxuI2lmZGVmIEJPTkVfVEVYVFVSRVxcbnVuaWZvcm0gc2FtcGxlcjJEIGJvbmVUZXh0dXJlO1xcbnVuaWZvcm0gaW50IGJvbmVUZXh0dXJlV2lkdGg7XFxudW5pZm9ybSBpbnQgYm9uZVRleHR1cmVIZWlnaHQ7XFxubWF0NCBnZXRCb25lTWF0cml4KCBjb25zdCBpbiBmbG9hdCBpICkge1xcbmZsb2F0IGogPSBpICogNC4wO1xcbmZsb2F0IHggPSBtb2QoIGosIGZsb2F0KCBib25lVGV4dHVyZVdpZHRoICkgKTtcXG5mbG9hdCB5ID0gZmxvb3IoIGogLyBmbG9hdCggYm9uZVRleHR1cmVXaWR0aCApICk7XFxuZmxvYXQgZHggPSAxLjAgLyBmbG9hdCggYm9uZVRleHR1cmVXaWR0aCApO1xcbmZsb2F0IGR5ID0gMS4wIC8gZmxvYXQoIGJvbmVUZXh0dXJlSGVpZ2h0ICk7XFxueSA9IGR5ICogKCB5ICsgMC41ICk7XFxudmVjNCB2MSA9IHRleHR1cmUyRCggYm9uZVRleHR1cmUsIHZlYzIoIGR4ICogKCB4ICsgMC41ICksIHkgKSApO1xcbnZlYzQgdjIgPSB0ZXh0dXJlMkQoIGJvbmVUZXh0dXJlLCB2ZWMyKCBkeCAqICggeCArIDEuNSApLCB5ICkgKTtcXG52ZWM0IHYzID0gdGV4dHVyZTJEKCBib25lVGV4dHVyZSwgdmVjMiggZHggKiAoIHggKyAyLjUgKSwgeSApICk7XFxudmVjNCB2NCA9IHRleHR1cmUyRCggYm9uZVRleHR1cmUsIHZlYzIoIGR4ICogKCB4ICsgMy41ICksIHkgKSApO1xcbm1hdDQgYm9uZSA9IG1hdDQoIHYxLCB2MiwgdjMsIHY0ICk7XFxucmV0dXJuIGJvbmU7XFxufVxcbiNlbHNlXFxudW5pZm9ybSBtYXQ0IGJvbmVHbG9iYWxNYXRyaWNlc1sgTUFYX0JPTkVTIF07XFxubWF0NCBnZXRCb25lTWF0cml4KCBjb25zdCBpbiBmbG9hdCBpICkge1xcbm1hdDQgYm9uZSA9IGJvbmVHbG9iYWxNYXRyaWNlc1sgaW50KGkpIF07XFxucmV0dXJuIGJvbmU7XFxufVxcbiNlbmRpZlxcbiNlbmRpZlwiLFxuc2tpbmJhc2VfdmVydGV4OlwiI2lmZGVmIFVTRV9TS0lOTklOR1xcbm1hdDQgYm9uZU1hdFggPSBnZXRCb25lTWF0cml4KCBza2luSW5kZXgueCApO1xcbm1hdDQgYm9uZU1hdFkgPSBnZXRCb25lTWF0cml4KCBza2luSW5kZXgueSApO1xcbiNlbmRpZlwiLHNraW5uaW5nX3ZlcnRleDpcIiNpZmRlZiBVU0VfU0tJTk5JTkdcXG4jaWZkZWYgVVNFX01PUlBIVEFSR0VUU1xcbnZlYzQgc2tpblZlcnRleCA9IHZlYzQoIG1vcnBoZWQsIDEuMCApO1xcbiNlbHNlXFxudmVjNCBza2luVmVydGV4ID0gdmVjNCggcG9zaXRpb24sIDEuMCApO1xcbiNlbmRpZlxcbnZlYzQgc2tpbm5lZCAgPSBib25lTWF0WCAqIHNraW5WZXJ0ZXggKiBza2luV2VpZ2h0Lng7XFxuc2tpbm5lZCBcXHQgICs9IGJvbmVNYXRZICogc2tpblZlcnRleCAqIHNraW5XZWlnaHQueTtcXG4jZW5kaWZcIixtb3JwaHRhcmdldF9wYXJzX3ZlcnRleDpcIiNpZmRlZiBVU0VfTU9SUEhUQVJHRVRTXFxuI2lmbmRlZiBVU0VfTU9SUEhOT1JNQUxTXFxudW5pZm9ybSBmbG9hdCBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDggXTtcXG4jZWxzZVxcbnVuaWZvcm0gZmxvYXQgbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyA0IF07XFxuI2VuZGlmXFxuI2VuZGlmXCIsXG5tb3JwaHRhcmdldF92ZXJ0ZXg6XCIjaWZkZWYgVVNFX01PUlBIVEFSR0VUU1xcbnZlYzMgbW9ycGhlZCA9IHZlYzMoIDAuMCApO1xcbm1vcnBoZWQgKz0gKCBtb3JwaFRhcmdldDAgLSBwb3NpdGlvbiApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAwIF07XFxubW9ycGhlZCArPSAoIG1vcnBoVGFyZ2V0MSAtIHBvc2l0aW9uICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDEgXTtcXG5tb3JwaGVkICs9ICggbW9ycGhUYXJnZXQyIC0gcG9zaXRpb24gKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgMiBdO1xcbm1vcnBoZWQgKz0gKCBtb3JwaFRhcmdldDMgLSBwb3NpdGlvbiApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAzIF07XFxuI2lmbmRlZiBVU0VfTU9SUEhOT1JNQUxTXFxubW9ycGhlZCArPSAoIG1vcnBoVGFyZ2V0NCAtIHBvc2l0aW9uICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDQgXTtcXG5tb3JwaGVkICs9ICggbW9ycGhUYXJnZXQ1IC0gcG9zaXRpb24gKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgNSBdO1xcbm1vcnBoZWQgKz0gKCBtb3JwaFRhcmdldDYgLSBwb3NpdGlvbiApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyA2IF07XFxubW9ycGhlZCArPSAoIG1vcnBoVGFyZ2V0NyAtIHBvc2l0aW9uICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDcgXTtcXG4jZW5kaWZcXG5tb3JwaGVkICs9IHBvc2l0aW9uO1xcbiNlbmRpZlwiLFxuZGVmYXVsdF92ZXJ0ZXg6XCJ2ZWM0IG12UG9zaXRpb247XFxuI2lmZGVmIFVTRV9TS0lOTklOR1xcbm12UG9zaXRpb24gPSBtb2RlbFZpZXdNYXRyaXggKiBza2lubmVkO1xcbiNlbmRpZlxcbiNpZiAhZGVmaW5lZCggVVNFX1NLSU5OSU5HICkgJiYgZGVmaW5lZCggVVNFX01PUlBIVEFSR0VUUyApXFxubXZQb3NpdGlvbiA9IG1vZGVsVmlld01hdHJpeCAqIHZlYzQoIG1vcnBoZWQsIDEuMCApO1xcbiNlbmRpZlxcbiNpZiAhZGVmaW5lZCggVVNFX1NLSU5OSU5HICkgJiYgISBkZWZpbmVkKCBVU0VfTU9SUEhUQVJHRVRTIClcXG5tdlBvc2l0aW9uID0gbW9kZWxWaWV3TWF0cml4ICogdmVjNCggcG9zaXRpb24sIDEuMCApO1xcbiNlbmRpZlxcbmdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIG12UG9zaXRpb247XCIsbW9ycGhub3JtYWxfdmVydGV4OlwiI2lmZGVmIFVTRV9NT1JQSE5PUk1BTFNcXG52ZWMzIG1vcnBoZWROb3JtYWwgPSB2ZWMzKCAwLjAgKTtcXG5tb3JwaGVkTm9ybWFsICs9ICAoIG1vcnBoTm9ybWFsMCAtIG5vcm1hbCApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAwIF07XFxubW9ycGhlZE5vcm1hbCArPSAgKCBtb3JwaE5vcm1hbDEgLSBub3JtYWwgKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgMSBdO1xcbm1vcnBoZWROb3JtYWwgKz0gICggbW9ycGhOb3JtYWwyIC0gbm9ybWFsICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDIgXTtcXG5tb3JwaGVkTm9ybWFsICs9ICAoIG1vcnBoTm9ybWFsMyAtIG5vcm1hbCApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAzIF07XFxubW9ycGhlZE5vcm1hbCArPSBub3JtYWw7XFxuI2VuZGlmXCIsXG5za2lubm9ybWFsX3ZlcnRleDpcIiNpZmRlZiBVU0VfU0tJTk5JTkdcXG5tYXQ0IHNraW5NYXRyaXggPSBza2luV2VpZ2h0LnggKiBib25lTWF0WDtcXG5za2luTWF0cml4IFxcdCs9IHNraW5XZWlnaHQueSAqIGJvbmVNYXRZO1xcbiNpZmRlZiBVU0VfTU9SUEhOT1JNQUxTXFxudmVjNCBza2lubmVkTm9ybWFsID0gc2tpbk1hdHJpeCAqIHZlYzQoIG1vcnBoZWROb3JtYWwsIDAuMCApO1xcbiNlbHNlXFxudmVjNCBza2lubmVkTm9ybWFsID0gc2tpbk1hdHJpeCAqIHZlYzQoIG5vcm1hbCwgMC4wICk7XFxuI2VuZGlmXFxuI2VuZGlmXCIsZGVmYXVsdG5vcm1hbF92ZXJ0ZXg6XCJ2ZWMzIG9iamVjdE5vcm1hbDtcXG4jaWZkZWYgVVNFX1NLSU5OSU5HXFxub2JqZWN0Tm9ybWFsID0gc2tpbm5lZE5vcm1hbC54eXo7XFxuI2VuZGlmXFxuI2lmICFkZWZpbmVkKCBVU0VfU0tJTk5JTkcgKSAmJiBkZWZpbmVkKCBVU0VfTU9SUEhOT1JNQUxTIClcXG5vYmplY3ROb3JtYWwgPSBtb3JwaGVkTm9ybWFsO1xcbiNlbmRpZlxcbiNpZiAhZGVmaW5lZCggVVNFX1NLSU5OSU5HICkgJiYgISBkZWZpbmVkKCBVU0VfTU9SUEhOT1JNQUxTIClcXG5vYmplY3ROb3JtYWwgPSBub3JtYWw7XFxuI2VuZGlmXFxuI2lmZGVmIEZMSVBfU0lERURcXG5vYmplY3ROb3JtYWwgPSAtb2JqZWN0Tm9ybWFsO1xcbiNlbmRpZlxcbnZlYzMgdHJhbnNmb3JtZWROb3JtYWwgPSBub3JtYWxNYXRyaXggKiBvYmplY3ROb3JtYWw7XCIsXG5zaGFkb3dtYXBfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfU0hBRE9XTUFQXFxudW5pZm9ybSBzYW1wbGVyMkQgc2hhZG93TWFwWyBNQVhfU0hBRE9XUyBdO1xcbnVuaWZvcm0gdmVjMiBzaGFkb3dNYXBTaXplWyBNQVhfU0hBRE9XUyBdO1xcbnVuaWZvcm0gZmxvYXQgc2hhZG93RGFya25lc3NbIE1BWF9TSEFET1dTIF07XFxudW5pZm9ybSBmbG9hdCBzaGFkb3dCaWFzWyBNQVhfU0hBRE9XUyBdO1xcbnZhcnlpbmcgdmVjNCB2U2hhZG93Q29vcmRbIE1BWF9TSEFET1dTIF07XFxuZmxvYXQgdW5wYWNrRGVwdGgoIGNvbnN0IGluIHZlYzQgcmdiYV9kZXB0aCApIHtcXG5jb25zdCB2ZWM0IGJpdF9zaGlmdCA9IHZlYzQoIDEuMCAvICggMjU2LjAgKiAyNTYuMCAqIDI1Ni4wICksIDEuMCAvICggMjU2LjAgKiAyNTYuMCApLCAxLjAgLyAyNTYuMCwgMS4wICk7XFxuZmxvYXQgZGVwdGggPSBkb3QoIHJnYmFfZGVwdGgsIGJpdF9zaGlmdCApO1xcbnJldHVybiBkZXB0aDtcXG59XFxuI2VuZGlmXCIsc2hhZG93bWFwX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9TSEFET1dNQVBcXG4jaWZkZWYgU0hBRE9XTUFQX0RFQlVHXFxudmVjMyBmcnVzdHVtQ29sb3JzWzNdO1xcbmZydXN0dW1Db2xvcnNbMF0gPSB2ZWMzKCAxLjAsIDAuNSwgMC4wICk7XFxuZnJ1c3R1bUNvbG9yc1sxXSA9IHZlYzMoIDAuMCwgMS4wLCAwLjggKTtcXG5mcnVzdHVtQ29sb3JzWzJdID0gdmVjMyggMC4wLCAwLjUsIDEuMCApO1xcbiNlbmRpZlxcbiNpZmRlZiBTSEFET1dNQVBfQ0FTQ0FERVxcbmludCBpbkZydXN0dW1Db3VudCA9IDA7XFxuI2VuZGlmXFxuZmxvYXQgZkRlcHRoO1xcbnZlYzMgc2hhZG93Q29sb3IgPSB2ZWMzKCAxLjAgKTtcXG5mb3IoIGludCBpID0gMDsgaSA8IE1BWF9TSEFET1dTOyBpICsrICkge1xcbnZlYzMgc2hhZG93Q29vcmQgPSB2U2hhZG93Q29vcmRbIGkgXS54eXogLyB2U2hhZG93Q29vcmRbIGkgXS53O1xcbmJ2ZWM0IGluRnJ1c3R1bVZlYyA9IGJ2ZWM0ICggc2hhZG93Q29vcmQueCA+PSAwLjAsIHNoYWRvd0Nvb3JkLnggPD0gMS4wLCBzaGFkb3dDb29yZC55ID49IDAuMCwgc2hhZG93Q29vcmQueSA8PSAxLjAgKTtcXG5ib29sIGluRnJ1c3R1bSA9IGFsbCggaW5GcnVzdHVtVmVjICk7XFxuI2lmZGVmIFNIQURPV01BUF9DQVNDQURFXFxuaW5GcnVzdHVtQ291bnQgKz0gaW50KCBpbkZydXN0dW0gKTtcXG5idmVjMyBmcnVzdHVtVGVzdFZlYyA9IGJ2ZWMzKCBpbkZydXN0dW0sIGluRnJ1c3R1bUNvdW50ID09IDEsIHNoYWRvd0Nvb3JkLnogPD0gMS4wICk7XFxuI2Vsc2VcXG5idmVjMiBmcnVzdHVtVGVzdFZlYyA9IGJ2ZWMyKCBpbkZydXN0dW0sIHNoYWRvd0Nvb3JkLnogPD0gMS4wICk7XFxuI2VuZGlmXFxuYm9vbCBmcnVzdHVtVGVzdCA9IGFsbCggZnJ1c3R1bVRlc3RWZWMgKTtcXG5pZiAoIGZydXN0dW1UZXN0ICkge1xcbnNoYWRvd0Nvb3JkLnogKz0gc2hhZG93Qmlhc1sgaSBdO1xcbiNpZiBkZWZpbmVkKCBTSEFET1dNQVBfVFlQRV9QQ0YgKVxcbmZsb2F0IHNoYWRvdyA9IDAuMDtcXG5jb25zdCBmbG9hdCBzaGFkb3dEZWx0YSA9IDEuMCAvIDkuMDtcXG5mbG9hdCB4UGl4ZWxPZmZzZXQgPSAxLjAgLyBzaGFkb3dNYXBTaXplWyBpIF0ueDtcXG5mbG9hdCB5UGl4ZWxPZmZzZXQgPSAxLjAgLyBzaGFkb3dNYXBTaXplWyBpIF0ueTtcXG5mbG9hdCBkeDAgPSAtMS4yNSAqIHhQaXhlbE9mZnNldDtcXG5mbG9hdCBkeTAgPSAtMS4yNSAqIHlQaXhlbE9mZnNldDtcXG5mbG9hdCBkeDEgPSAxLjI1ICogeFBpeGVsT2Zmc2V0O1xcbmZsb2F0IGR5MSA9IDEuMjUgKiB5UGl4ZWxPZmZzZXQ7XFxuZkRlcHRoID0gdW5wYWNrRGVwdGgoIHRleHR1cmUyRCggc2hhZG93TWFwWyBpIF0sIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgwLCBkeTAgKSApICk7XFxuaWYgKCBmRGVwdGggPCBzaGFkb3dDb29yZC56ICkgc2hhZG93ICs9IHNoYWRvd0RlbHRhO1xcbmZEZXB0aCA9IHVucGFja0RlcHRoKCB0ZXh0dXJlMkQoIHNoYWRvd01hcFsgaSBdLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIDAuMCwgZHkwICkgKSApO1xcbmlmICggZkRlcHRoIDwgc2hhZG93Q29vcmQueiApIHNoYWRvdyArPSBzaGFkb3dEZWx0YTtcXG5mRGVwdGggPSB1bnBhY2tEZXB0aCggdGV4dHVyZTJEKCBzaGFkb3dNYXBbIGkgXSwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDEsIGR5MCApICkgKTtcXG5pZiAoIGZEZXB0aCA8IHNoYWRvd0Nvb3JkLnogKSBzaGFkb3cgKz0gc2hhZG93RGVsdGE7XFxuZkRlcHRoID0gdW5wYWNrRGVwdGgoIHRleHR1cmUyRCggc2hhZG93TWFwWyBpIF0sIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgwLCAwLjAgKSApICk7XFxuaWYgKCBmRGVwdGggPCBzaGFkb3dDb29yZC56ICkgc2hhZG93ICs9IHNoYWRvd0RlbHRhO1xcbmZEZXB0aCA9IHVucGFja0RlcHRoKCB0ZXh0dXJlMkQoIHNoYWRvd01hcFsgaSBdLCBzaGFkb3dDb29yZC54eSApICk7XFxuaWYgKCBmRGVwdGggPCBzaGFkb3dDb29yZC56ICkgc2hhZG93ICs9IHNoYWRvd0RlbHRhO1xcbmZEZXB0aCA9IHVucGFja0RlcHRoKCB0ZXh0dXJlMkQoIHNoYWRvd01hcFsgaSBdLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MSwgMC4wICkgKSApO1xcbmlmICggZkRlcHRoIDwgc2hhZG93Q29vcmQueiApIHNoYWRvdyArPSBzaGFkb3dEZWx0YTtcXG5mRGVwdGggPSB1bnBhY2tEZXB0aCggdGV4dHVyZTJEKCBzaGFkb3dNYXBbIGkgXSwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDAsIGR5MSApICkgKTtcXG5pZiAoIGZEZXB0aCA8IHNoYWRvd0Nvb3JkLnogKSBzaGFkb3cgKz0gc2hhZG93RGVsdGE7XFxuZkRlcHRoID0gdW5wYWNrRGVwdGgoIHRleHR1cmUyRCggc2hhZG93TWFwWyBpIF0sIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggMC4wLCBkeTEgKSApICk7XFxuaWYgKCBmRGVwdGggPCBzaGFkb3dDb29yZC56ICkgc2hhZG93ICs9IHNoYWRvd0RlbHRhO1xcbmZEZXB0aCA9IHVucGFja0RlcHRoKCB0ZXh0dXJlMkQoIHNoYWRvd01hcFsgaSBdLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MSwgZHkxICkgKSApO1xcbmlmICggZkRlcHRoIDwgc2hhZG93Q29vcmQueiApIHNoYWRvdyArPSBzaGFkb3dEZWx0YTtcXG5zaGFkb3dDb2xvciA9IHNoYWRvd0NvbG9yICogdmVjMyggKCAxLjAgLSBzaGFkb3dEYXJrbmVzc1sgaSBdICogc2hhZG93ICkgKTtcXG4jZWxpZiBkZWZpbmVkKCBTSEFET1dNQVBfVFlQRV9QQ0ZfU09GVCApXFxuZmxvYXQgc2hhZG93ID0gMC4wO1xcbmZsb2F0IHhQaXhlbE9mZnNldCA9IDEuMCAvIHNoYWRvd01hcFNpemVbIGkgXS54O1xcbmZsb2F0IHlQaXhlbE9mZnNldCA9IDEuMCAvIHNoYWRvd01hcFNpemVbIGkgXS55O1xcbmZsb2F0IGR4MCA9IC0xLjAgKiB4UGl4ZWxPZmZzZXQ7XFxuZmxvYXQgZHkwID0gLTEuMCAqIHlQaXhlbE9mZnNldDtcXG5mbG9hdCBkeDEgPSAxLjAgKiB4UGl4ZWxPZmZzZXQ7XFxuZmxvYXQgZHkxID0gMS4wICogeVBpeGVsT2Zmc2V0O1xcbm1hdDMgc2hhZG93S2VybmVsO1xcbm1hdDMgZGVwdGhLZXJuZWw7XFxuZGVwdGhLZXJuZWxbMF1bMF0gPSB1bnBhY2tEZXB0aCggdGV4dHVyZTJEKCBzaGFkb3dNYXBbIGkgXSwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDAsIGR5MCApICkgKTtcXG5kZXB0aEtlcm5lbFswXVsxXSA9IHVucGFja0RlcHRoKCB0ZXh0dXJlMkQoIHNoYWRvd01hcFsgaSBdLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MCwgMC4wICkgKSApO1xcbmRlcHRoS2VybmVsWzBdWzJdID0gdW5wYWNrRGVwdGgoIHRleHR1cmUyRCggc2hhZG93TWFwWyBpIF0sIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgwLCBkeTEgKSApICk7XFxuZGVwdGhLZXJuZWxbMV1bMF0gPSB1bnBhY2tEZXB0aCggdGV4dHVyZTJEKCBzaGFkb3dNYXBbIGkgXSwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCAwLjAsIGR5MCApICkgKTtcXG5kZXB0aEtlcm5lbFsxXVsxXSA9IHVucGFja0RlcHRoKCB0ZXh0dXJlMkQoIHNoYWRvd01hcFsgaSBdLCBzaGFkb3dDb29yZC54eSApICk7XFxuZGVwdGhLZXJuZWxbMV1bMl0gPSB1bnBhY2tEZXB0aCggdGV4dHVyZTJEKCBzaGFkb3dNYXBbIGkgXSwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCAwLjAsIGR5MSApICkgKTtcXG5kZXB0aEtlcm5lbFsyXVswXSA9IHVucGFja0RlcHRoKCB0ZXh0dXJlMkQoIHNoYWRvd01hcFsgaSBdLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MSwgZHkwICkgKSApO1xcbmRlcHRoS2VybmVsWzJdWzFdID0gdW5wYWNrRGVwdGgoIHRleHR1cmUyRCggc2hhZG93TWFwWyBpIF0sIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgxLCAwLjAgKSApICk7XFxuZGVwdGhLZXJuZWxbMl1bMl0gPSB1bnBhY2tEZXB0aCggdGV4dHVyZTJEKCBzaGFkb3dNYXBbIGkgXSwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDEsIGR5MSApICkgKTtcXG52ZWMzIHNoYWRvd1ogPSB2ZWMzKCBzaGFkb3dDb29yZC56ICk7XFxuc2hhZG93S2VybmVsWzBdID0gdmVjMyhsZXNzVGhhbihkZXB0aEtlcm5lbFswXSwgc2hhZG93WiApKTtcXG5zaGFkb3dLZXJuZWxbMF0gKj0gdmVjMygwLjI1KTtcXG5zaGFkb3dLZXJuZWxbMV0gPSB2ZWMzKGxlc3NUaGFuKGRlcHRoS2VybmVsWzFdLCBzaGFkb3daICkpO1xcbnNoYWRvd0tlcm5lbFsxXSAqPSB2ZWMzKDAuMjUpO1xcbnNoYWRvd0tlcm5lbFsyXSA9IHZlYzMobGVzc1RoYW4oZGVwdGhLZXJuZWxbMl0sIHNoYWRvd1ogKSk7XFxuc2hhZG93S2VybmVsWzJdICo9IHZlYzMoMC4yNSk7XFxudmVjMiBmcmFjdGlvbmFsQ29vcmQgPSAxLjAgLSBmcmFjdCggc2hhZG93Q29vcmQueHkgKiBzaGFkb3dNYXBTaXplW2ldLnh5ICk7XFxuc2hhZG93S2VybmVsWzBdID0gbWl4KCBzaGFkb3dLZXJuZWxbMV0sIHNoYWRvd0tlcm5lbFswXSwgZnJhY3Rpb25hbENvb3JkLnggKTtcXG5zaGFkb3dLZXJuZWxbMV0gPSBtaXgoIHNoYWRvd0tlcm5lbFsyXSwgc2hhZG93S2VybmVsWzFdLCBmcmFjdGlvbmFsQ29vcmQueCApO1xcbnZlYzQgc2hhZG93VmFsdWVzO1xcbnNoYWRvd1ZhbHVlcy54ID0gbWl4KCBzaGFkb3dLZXJuZWxbMF1bMV0sIHNoYWRvd0tlcm5lbFswXVswXSwgZnJhY3Rpb25hbENvb3JkLnkgKTtcXG5zaGFkb3dWYWx1ZXMueSA9IG1peCggc2hhZG93S2VybmVsWzBdWzJdLCBzaGFkb3dLZXJuZWxbMF1bMV0sIGZyYWN0aW9uYWxDb29yZC55ICk7XFxuc2hhZG93VmFsdWVzLnogPSBtaXgoIHNoYWRvd0tlcm5lbFsxXVsxXSwgc2hhZG93S2VybmVsWzFdWzBdLCBmcmFjdGlvbmFsQ29vcmQueSApO1xcbnNoYWRvd1ZhbHVlcy53ID0gbWl4KCBzaGFkb3dLZXJuZWxbMV1bMl0sIHNoYWRvd0tlcm5lbFsxXVsxXSwgZnJhY3Rpb25hbENvb3JkLnkgKTtcXG5zaGFkb3cgPSBkb3QoIHNoYWRvd1ZhbHVlcywgdmVjNCggMS4wICkgKTtcXG5zaGFkb3dDb2xvciA9IHNoYWRvd0NvbG9yICogdmVjMyggKCAxLjAgLSBzaGFkb3dEYXJrbmVzc1sgaSBdICogc2hhZG93ICkgKTtcXG4jZWxzZVxcbnZlYzQgcmdiYURlcHRoID0gdGV4dHVyZTJEKCBzaGFkb3dNYXBbIGkgXSwgc2hhZG93Q29vcmQueHkgKTtcXG5mbG9hdCBmRGVwdGggPSB1bnBhY2tEZXB0aCggcmdiYURlcHRoICk7XFxuaWYgKCBmRGVwdGggPCBzaGFkb3dDb29yZC56IClcXG5zaGFkb3dDb2xvciA9IHNoYWRvd0NvbG9yICogdmVjMyggMS4wIC0gc2hhZG93RGFya25lc3NbIGkgXSApO1xcbiNlbmRpZlxcbn1cXG4jaWZkZWYgU0hBRE9XTUFQX0RFQlVHXFxuI2lmZGVmIFNIQURPV01BUF9DQVNDQURFXFxuaWYgKCBpbkZydXN0dW0gJiYgaW5GcnVzdHVtQ291bnQgPT0gMSApIGdsX0ZyYWdDb2xvci54eXogKj0gZnJ1c3R1bUNvbG9yc1sgaSBdO1xcbiNlbHNlXFxuaWYgKCBpbkZydXN0dW0gKSBnbF9GcmFnQ29sb3IueHl6ICo9IGZydXN0dW1Db2xvcnNbIGkgXTtcXG4jZW5kaWZcXG4jZW5kaWZcXG59XFxuI2lmZGVmIEdBTU1BX09VVFBVVFxcbnNoYWRvd0NvbG9yICo9IHNoYWRvd0NvbG9yO1xcbiNlbmRpZlxcbmdsX0ZyYWdDb2xvci54eXogPSBnbF9GcmFnQ29sb3IueHl6ICogc2hhZG93Q29sb3I7XFxuI2VuZGlmXCIsXG5zaGFkb3dtYXBfcGFyc192ZXJ0ZXg6XCIjaWZkZWYgVVNFX1NIQURPV01BUFxcbnZhcnlpbmcgdmVjNCB2U2hhZG93Q29vcmRbIE1BWF9TSEFET1dTIF07XFxudW5pZm9ybSBtYXQ0IHNoYWRvd01hdHJpeFsgTUFYX1NIQURPV1MgXTtcXG4jZW5kaWZcIixzaGFkb3dtYXBfdmVydGV4OlwiI2lmZGVmIFVTRV9TSEFET1dNQVBcXG5mb3IoIGludCBpID0gMDsgaSA8IE1BWF9TSEFET1dTOyBpICsrICkge1xcbnZTaGFkb3dDb29yZFsgaSBdID0gc2hhZG93TWF0cml4WyBpIF0gKiB3b3JsZFBvc2l0aW9uO1xcbn1cXG4jZW5kaWZcIixhbHBoYXRlc3RfZnJhZ21lbnQ6XCIjaWZkZWYgQUxQSEFURVNUXFxuaWYgKCBnbF9GcmFnQ29sb3IuYSA8IEFMUEhBVEVTVCApIGRpc2NhcmQ7XFxuI2VuZGlmXCIsbGluZWFyX3RvX2dhbW1hX2ZyYWdtZW50OlwiI2lmZGVmIEdBTU1BX09VVFBVVFxcbmdsX0ZyYWdDb2xvci54eXogPSBzcXJ0KCBnbF9GcmFnQ29sb3IueHl6ICk7XFxuI2VuZGlmXCJ9O1RIUkVFLlVuaWZvcm1zVXRpbHM9e21lcmdlOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlPXt9O2ZvcihiPTA7YjxhLmxlbmd0aDtiKyspZm9yKGMgaW4gZD10aGlzLmNsb25lKGFbYl0pLGQpZVtjXT1kW2NdO3JldHVybiBlfSxjbG9uZTpmdW5jdGlvbihhKXt2YXIgYixjLGQsZT17fTtmb3IoYiBpbiBhKWZvcihjIGluIGVbYl09e30sYVtiXSlkPWFbYl1bY10sZVtiXVtjXT1kIGluc3RhbmNlb2YgVEhSRUUuQ29sb3J8fGQgaW5zdGFuY2VvZiBUSFJFRS5WZWN0b3IyfHxkIGluc3RhbmNlb2YgVEhSRUUuVmVjdG9yM3x8ZCBpbnN0YW5jZW9mIFRIUkVFLlZlY3RvcjR8fGQgaW5zdGFuY2VvZiBUSFJFRS5NYXRyaXg0fHxkIGluc3RhbmNlb2YgVEhSRUUuVGV4dHVyZT9kLmNsb25lKCk6ZCBpbnN0YW5jZW9mIEFycmF5P2Quc2xpY2UoKTpkO3JldHVybiBlfX07VEhSRUUuVW5pZm9ybXNMaWI9e2NvbW1vbjp7ZGlmZnVzZTp7dHlwZTpcImNcIix2YWx1ZTpuZXcgVEhSRUUuQ29sb3IoMTU2NTg3MzQpfSxvcGFjaXR5Ont0eXBlOlwiZlwiLHZhbHVlOjF9LG1hcDp7dHlwZTpcInRcIix2YWx1ZTpudWxsfSxvZmZzZXRSZXBlYXQ6e3R5cGU6XCJ2NFwiLHZhbHVlOm5ldyBUSFJFRS5WZWN0b3I0KDAsMCwxLDEpfSxsaWdodE1hcDp7dHlwZTpcInRcIix2YWx1ZTpudWxsfSxzcGVjdWxhck1hcDp7dHlwZTpcInRcIix2YWx1ZTpudWxsfSxlbnZNYXA6e3R5cGU6XCJ0XCIsdmFsdWU6bnVsbH0sZmxpcEVudk1hcDp7dHlwZTpcImZcIix2YWx1ZTotMX0sdXNlUmVmcmFjdDp7dHlwZTpcImlcIix2YWx1ZTowfSxyZWZsZWN0aXZpdHk6e3R5cGU6XCJmXCIsdmFsdWU6MX0scmVmcmFjdGlvblJhdGlvOnt0eXBlOlwiZlwiLHZhbHVlOjAuOTh9LGNvbWJpbmU6e3R5cGU6XCJpXCIsdmFsdWU6MH0sbW9ycGhUYXJnZXRJbmZsdWVuY2VzOnt0eXBlOlwiZlwiLHZhbHVlOjB9fSxidW1wOntidW1wTWFwOnt0eXBlOlwidFwiLFxudmFsdWU6bnVsbH0sYnVtcFNjYWxlOnt0eXBlOlwiZlwiLHZhbHVlOjF9fSxub3JtYWxtYXA6e25vcm1hbE1hcDp7dHlwZTpcInRcIix2YWx1ZTpudWxsfSxub3JtYWxTY2FsZTp7dHlwZTpcInYyXCIsdmFsdWU6bmV3IFRIUkVFLlZlY3RvcjIoMSwxKX19LGZvZzp7Zm9nRGVuc2l0eTp7dHlwZTpcImZcIix2YWx1ZToyLjVFLTR9LGZvZ05lYXI6e3R5cGU6XCJmXCIsdmFsdWU6MX0sZm9nRmFyOnt0eXBlOlwiZlwiLHZhbHVlOjJFM30sZm9nQ29sb3I6e3R5cGU6XCJjXCIsdmFsdWU6bmV3IFRIUkVFLkNvbG9yKDE2Nzc3MjE1KX19LGxpZ2h0czp7YW1iaWVudExpZ2h0Q29sb3I6e3R5cGU6XCJmdlwiLHZhbHVlOltdfSxkaXJlY3Rpb25hbExpZ2h0RGlyZWN0aW9uOnt0eXBlOlwiZnZcIix2YWx1ZTpbXX0sZGlyZWN0aW9uYWxMaWdodENvbG9yOnt0eXBlOlwiZnZcIix2YWx1ZTpbXX0saGVtaXNwaGVyZUxpZ2h0RGlyZWN0aW9uOnt0eXBlOlwiZnZcIix2YWx1ZTpbXX0saGVtaXNwaGVyZUxpZ2h0U2t5Q29sb3I6e3R5cGU6XCJmdlwiLFxudmFsdWU6W119LGhlbWlzcGhlcmVMaWdodEdyb3VuZENvbG9yOnt0eXBlOlwiZnZcIix2YWx1ZTpbXX0scG9pbnRMaWdodENvbG9yOnt0eXBlOlwiZnZcIix2YWx1ZTpbXX0scG9pbnRMaWdodFBvc2l0aW9uOnt0eXBlOlwiZnZcIix2YWx1ZTpbXX0scG9pbnRMaWdodERpc3RhbmNlOnt0eXBlOlwiZnYxXCIsdmFsdWU6W119LHNwb3RMaWdodENvbG9yOnt0eXBlOlwiZnZcIix2YWx1ZTpbXX0sc3BvdExpZ2h0UG9zaXRpb246e3R5cGU6XCJmdlwiLHZhbHVlOltdfSxzcG90TGlnaHREaXJlY3Rpb246e3R5cGU6XCJmdlwiLHZhbHVlOltdfSxzcG90TGlnaHREaXN0YW5jZTp7dHlwZTpcImZ2MVwiLHZhbHVlOltdfSxzcG90TGlnaHRBbmdsZUNvczp7dHlwZTpcImZ2MVwiLHZhbHVlOltdfSxzcG90TGlnaHRFeHBvbmVudDp7dHlwZTpcImZ2MVwiLHZhbHVlOltdfX0scGFydGljbGU6e3BzQ29sb3I6e3R5cGU6XCJjXCIsdmFsdWU6bmV3IFRIUkVFLkNvbG9yKDE1NjU4NzM0KX0sb3BhY2l0eTp7dHlwZTpcImZcIix2YWx1ZToxfSxzaXplOnt0eXBlOlwiZlwiLFxudmFsdWU6MX0sc2NhbGU6e3R5cGU6XCJmXCIsdmFsdWU6MX0sbWFwOnt0eXBlOlwidFwiLHZhbHVlOm51bGx9LGZvZ0RlbnNpdHk6e3R5cGU6XCJmXCIsdmFsdWU6Mi41RS00fSxmb2dOZWFyOnt0eXBlOlwiZlwiLHZhbHVlOjF9LGZvZ0Zhcjp7dHlwZTpcImZcIix2YWx1ZToyRTN9LGZvZ0NvbG9yOnt0eXBlOlwiY1wiLHZhbHVlOm5ldyBUSFJFRS5Db2xvcigxNjc3NzIxNSl9fSxzaGFkb3dtYXA6e3NoYWRvd01hcDp7dHlwZTpcInR2XCIsdmFsdWU6W119LHNoYWRvd01hcFNpemU6e3R5cGU6XCJ2MnZcIix2YWx1ZTpbXX0sc2hhZG93Qmlhczp7dHlwZTpcImZ2MVwiLHZhbHVlOltdfSxzaGFkb3dEYXJrbmVzczp7dHlwZTpcImZ2MVwiLHZhbHVlOltdfSxzaGFkb3dNYXRyaXg6e3R5cGU6XCJtNHZcIix2YWx1ZTpbXX19fTtUSFJFRS5TaGFkZXJMaWI9e2Jhc2ljOnt1bmlmb3JtczpUSFJFRS5Vbmlmb3Jtc1V0aWxzLm1lcmdlKFtUSFJFRS5Vbmlmb3Jtc0xpYi5jb21tb24sVEhSRUUuVW5pZm9ybXNMaWIuZm9nLFRIUkVFLlVuaWZvcm1zTGliLnNoYWRvd21hcF0pLHZlcnRleFNoYWRlcjpbVEhSRUUuU2hhZGVyQ2h1bmsubWFwX3BhcnNfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLmxpZ2h0bWFwX3BhcnNfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLmVudm1hcF9wYXJzX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5jb2xvcl9wYXJzX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5tb3JwaHRhcmdldF9wYXJzX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5za2lubmluZ19wYXJzX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5zaGFkb3dtYXBfcGFyc192ZXJ0ZXgsXCJ2b2lkIG1haW4oKSB7XCIsVEhSRUUuU2hhZGVyQ2h1bmsubWFwX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5saWdodG1hcF92ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuY29sb3JfdmVydGV4LFxuVEhSRUUuU2hhZGVyQ2h1bmsuc2tpbmJhc2VfdmVydGV4LFwiI2lmZGVmIFVTRV9FTlZNQVBcIixUSFJFRS5TaGFkZXJDaHVuay5tb3JwaG5vcm1hbF92ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuc2tpbm5vcm1hbF92ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuZGVmYXVsdG5vcm1hbF92ZXJ0ZXgsXCIjZW5kaWZcIixUSFJFRS5TaGFkZXJDaHVuay5tb3JwaHRhcmdldF92ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuc2tpbm5pbmdfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLmRlZmF1bHRfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLndvcmxkcG9zX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5lbnZtYXBfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLnNoYWRvd21hcF92ZXJ0ZXgsXCJ9XCJdLmpvaW4oXCJcXG5cIiksZnJhZ21lbnRTaGFkZXI6W1widW5pZm9ybSB2ZWMzIGRpZmZ1c2U7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1wiLFRIUkVFLlNoYWRlckNodW5rLmNvbG9yX3BhcnNfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsubWFwX3BhcnNfZnJhZ21lbnQsXG5USFJFRS5TaGFkZXJDaHVuay5saWdodG1hcF9wYXJzX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLmVudm1hcF9wYXJzX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLmZvZ19wYXJzX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLnNoYWRvd21hcF9wYXJzX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLnNwZWN1bGFybWFwX3BhcnNfZnJhZ21lbnQsXCJ2b2lkIG1haW4oKSB7XFxuZ2xfRnJhZ0NvbG9yID0gdmVjNCggZGlmZnVzZSwgb3BhY2l0eSApO1wiLFRIUkVFLlNoYWRlckNodW5rLm1hcF9mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5hbHBoYXRlc3RfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsuc3BlY3VsYXJtYXBfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsubGlnaHRtYXBfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsuY29sb3JfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsuZW52bWFwX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLnNoYWRvd21hcF9mcmFnbWVudCxcblRIUkVFLlNoYWRlckNodW5rLmxpbmVhcl90b19nYW1tYV9mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5mb2dfZnJhZ21lbnQsXCJ9XCJdLmpvaW4oXCJcXG5cIil9LGxhbWJlcnQ6e3VuaWZvcm1zOlRIUkVFLlVuaWZvcm1zVXRpbHMubWVyZ2UoW1RIUkVFLlVuaWZvcm1zTGliLmNvbW1vbixUSFJFRS5Vbmlmb3Jtc0xpYi5mb2csVEhSRUUuVW5pZm9ybXNMaWIubGlnaHRzLFRIUkVFLlVuaWZvcm1zTGliLnNoYWRvd21hcCx7YW1iaWVudDp7dHlwZTpcImNcIix2YWx1ZTpuZXcgVEhSRUUuQ29sb3IoMTY3NzcyMTUpfSxlbWlzc2l2ZTp7dHlwZTpcImNcIix2YWx1ZTpuZXcgVEhSRUUuQ29sb3IoMCl9LHdyYXBSR0I6e3R5cGU6XCJ2M1wiLHZhbHVlOm5ldyBUSFJFRS5WZWN0b3IzKDEsMSwxKX19XSksdmVydGV4U2hhZGVyOltcIiNkZWZpbmUgTEFNQkVSVFxcbnZhcnlpbmcgdmVjMyB2TGlnaHRGcm9udDtcXG4jaWZkZWYgRE9VQkxFX1NJREVEXFxudmFyeWluZyB2ZWMzIHZMaWdodEJhY2s7XFxuI2VuZGlmXCIsXG5USFJFRS5TaGFkZXJDaHVuay5tYXBfcGFyc192ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsubGlnaHRtYXBfcGFyc192ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuZW52bWFwX3BhcnNfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLmxpZ2h0c19sYW1iZXJ0X3BhcnNfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLmNvbG9yX3BhcnNfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLm1vcnBodGFyZ2V0X3BhcnNfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLnNraW5uaW5nX3BhcnNfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLnNoYWRvd21hcF9wYXJzX3ZlcnRleCxcInZvaWQgbWFpbigpIHtcIixUSFJFRS5TaGFkZXJDaHVuay5tYXBfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLmxpZ2h0bWFwX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5jb2xvcl92ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsubW9ycGhub3JtYWxfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLnNraW5iYXNlX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5za2lubm9ybWFsX3ZlcnRleCxcblRIUkVFLlNoYWRlckNodW5rLmRlZmF1bHRub3JtYWxfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLm1vcnBodGFyZ2V0X3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5za2lubmluZ192ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuZGVmYXVsdF92ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsud29ybGRwb3NfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLmVudm1hcF92ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsubGlnaHRzX2xhbWJlcnRfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLnNoYWRvd21hcF92ZXJ0ZXgsXCJ9XCJdLmpvaW4oXCJcXG5cIiksZnJhZ21lbnRTaGFkZXI6W1widW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbnZhcnlpbmcgdmVjMyB2TGlnaHRGcm9udDtcXG4jaWZkZWYgRE9VQkxFX1NJREVEXFxudmFyeWluZyB2ZWMzIHZMaWdodEJhY2s7XFxuI2VuZGlmXCIsVEhSRUUuU2hhZGVyQ2h1bmsuY29sb3JfcGFyc19mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5tYXBfcGFyc19mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5saWdodG1hcF9wYXJzX2ZyYWdtZW50LFxuVEhSRUUuU2hhZGVyQ2h1bmsuZW52bWFwX3BhcnNfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsuZm9nX3BhcnNfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsuc2hhZG93bWFwX3BhcnNfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsuc3BlY3VsYXJtYXBfcGFyc19mcmFnbWVudCxcInZvaWQgbWFpbigpIHtcXG5nbF9GcmFnQ29sb3IgPSB2ZWM0KCB2ZWMzICggMS4wICksIG9wYWNpdHkgKTtcIixUSFJFRS5TaGFkZXJDaHVuay5tYXBfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsuYWxwaGF0ZXN0X2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLnNwZWN1bGFybWFwX2ZyYWdtZW50LFwiI2lmZGVmIERPVUJMRV9TSURFRFxcbmlmICggZ2xfRnJvbnRGYWNpbmcgKVxcbmdsX0ZyYWdDb2xvci54eXogKj0gdkxpZ2h0RnJvbnQ7XFxuZWxzZVxcbmdsX0ZyYWdDb2xvci54eXogKj0gdkxpZ2h0QmFjaztcXG4jZWxzZVxcbmdsX0ZyYWdDb2xvci54eXogKj0gdkxpZ2h0RnJvbnQ7XFxuI2VuZGlmXCIsVEhSRUUuU2hhZGVyQ2h1bmsubGlnaHRtYXBfZnJhZ21lbnQsXG5USFJFRS5TaGFkZXJDaHVuay5jb2xvcl9mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5lbnZtYXBfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsuc2hhZG93bWFwX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLmxpbmVhcl90b19nYW1tYV9mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5mb2dfZnJhZ21lbnQsXCJ9XCJdLmpvaW4oXCJcXG5cIil9LHBob25nOnt1bmlmb3JtczpUSFJFRS5Vbmlmb3Jtc1V0aWxzLm1lcmdlKFtUSFJFRS5Vbmlmb3Jtc0xpYi5jb21tb24sVEhSRUUuVW5pZm9ybXNMaWIuYnVtcCxUSFJFRS5Vbmlmb3Jtc0xpYi5ub3JtYWxtYXAsVEhSRUUuVW5pZm9ybXNMaWIuZm9nLFRIUkVFLlVuaWZvcm1zTGliLmxpZ2h0cyxUSFJFRS5Vbmlmb3Jtc0xpYi5zaGFkb3dtYXAse2FtYmllbnQ6e3R5cGU6XCJjXCIsdmFsdWU6bmV3IFRIUkVFLkNvbG9yKDE2Nzc3MjE1KX0sZW1pc3NpdmU6e3R5cGU6XCJjXCIsdmFsdWU6bmV3IFRIUkVFLkNvbG9yKDApfSxzcGVjdWxhcjp7dHlwZTpcImNcIixcbnZhbHVlOm5ldyBUSFJFRS5Db2xvcigxMTE4NDgxKX0sc2hpbmluZXNzOnt0eXBlOlwiZlwiLHZhbHVlOjMwfSx3cmFwUkdCOnt0eXBlOlwidjNcIix2YWx1ZTpuZXcgVEhSRUUuVmVjdG9yMygxLDEsMSl9fV0pLHZlcnRleFNoYWRlcjpbXCIjZGVmaW5lIFBIT05HXFxudmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XFxudmFyeWluZyB2ZWMzIHZOb3JtYWw7XCIsVEhSRUUuU2hhZGVyQ2h1bmsubWFwX3BhcnNfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLmxpZ2h0bWFwX3BhcnNfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLmVudm1hcF9wYXJzX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5saWdodHNfcGhvbmdfcGFyc192ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuY29sb3JfcGFyc192ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsubW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuc2tpbm5pbmdfcGFyc192ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuc2hhZG93bWFwX3BhcnNfdmVydGV4LFxuXCJ2b2lkIG1haW4oKSB7XCIsVEhSRUUuU2hhZGVyQ2h1bmsubWFwX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5saWdodG1hcF92ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuY29sb3JfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLm1vcnBobm9ybWFsX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5za2luYmFzZV92ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuc2tpbm5vcm1hbF92ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuZGVmYXVsdG5vcm1hbF92ZXJ0ZXgsXCJ2Tm9ybWFsID0gbm9ybWFsaXplKCB0cmFuc2Zvcm1lZE5vcm1hbCApO1wiLFRIUkVFLlNoYWRlckNodW5rLm1vcnBodGFyZ2V0X3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5za2lubmluZ192ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuZGVmYXVsdF92ZXJ0ZXgsXCJ2Vmlld1Bvc2l0aW9uID0gLW12UG9zaXRpb24ueHl6O1wiLFRIUkVFLlNoYWRlckNodW5rLndvcmxkcG9zX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5lbnZtYXBfdmVydGV4LFxuVEhSRUUuU2hhZGVyQ2h1bmsubGlnaHRzX3Bob25nX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5zaGFkb3dtYXBfdmVydGV4LFwifVwiXS5qb2luKFwiXFxuXCIpLGZyYWdtZW50U2hhZGVyOltcInVuaWZvcm0gdmVjMyBkaWZmdXNlO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG51bmlmb3JtIHZlYzMgYW1iaWVudDtcXG51bmlmb3JtIHZlYzMgZW1pc3NpdmU7XFxudW5pZm9ybSB2ZWMzIHNwZWN1bGFyO1xcbnVuaWZvcm0gZmxvYXQgc2hpbmluZXNzO1wiLFRIUkVFLlNoYWRlckNodW5rLmNvbG9yX3BhcnNfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsubWFwX3BhcnNfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsubGlnaHRtYXBfcGFyc19mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5lbnZtYXBfcGFyc19mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5mb2dfcGFyc19mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5saWdodHNfcGhvbmdfcGFyc19mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5zaGFkb3dtYXBfcGFyc19mcmFnbWVudCxcblRIUkVFLlNoYWRlckNodW5rLmJ1bXBtYXBfcGFyc19mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5ub3JtYWxtYXBfcGFyc19mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5zcGVjdWxhcm1hcF9wYXJzX2ZyYWdtZW50LFwidm9pZCBtYWluKCkge1xcbmdsX0ZyYWdDb2xvciA9IHZlYzQoIHZlYzMgKCAxLjAgKSwgb3BhY2l0eSApO1wiLFRIUkVFLlNoYWRlckNodW5rLm1hcF9mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5hbHBoYXRlc3RfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsuc3BlY3VsYXJtYXBfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsubGlnaHRzX3Bob25nX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLmxpZ2h0bWFwX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLmNvbG9yX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLmVudm1hcF9mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5zaGFkb3dtYXBfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsubGluZWFyX3RvX2dhbW1hX2ZyYWdtZW50LFxuVEhSRUUuU2hhZGVyQ2h1bmsuZm9nX2ZyYWdtZW50LFwifVwiXS5qb2luKFwiXFxuXCIpfSxwYXJ0aWNsZV9iYXNpYzp7dW5pZm9ybXM6VEhSRUUuVW5pZm9ybXNVdGlscy5tZXJnZShbVEhSRUUuVW5pZm9ybXNMaWIucGFydGljbGUsVEhSRUUuVW5pZm9ybXNMaWIuc2hhZG93bWFwXSksdmVydGV4U2hhZGVyOltcInVuaWZvcm0gZmxvYXQgc2l6ZTtcXG51bmlmb3JtIGZsb2F0IHNjYWxlO1wiLFRIUkVFLlNoYWRlckNodW5rLmNvbG9yX3BhcnNfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLnNoYWRvd21hcF9wYXJzX3ZlcnRleCxcInZvaWQgbWFpbigpIHtcIixUSFJFRS5TaGFkZXJDaHVuay5jb2xvcl92ZXJ0ZXgsXCJ2ZWM0IG12UG9zaXRpb24gPSBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KCBwb3NpdGlvbiwgMS4wICk7XFxuI2lmZGVmIFVTRV9TSVpFQVRURU5VQVRJT05cXG5nbF9Qb2ludFNpemUgPSBzaXplICogKCBzY2FsZSAvIGxlbmd0aCggbXZQb3NpdGlvbi54eXogKSApO1xcbiNlbHNlXFxuZ2xfUG9pbnRTaXplID0gc2l6ZTtcXG4jZW5kaWZcXG5nbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtdlBvc2l0aW9uO1wiLFxuVEhSRUUuU2hhZGVyQ2h1bmsud29ybGRwb3NfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLnNoYWRvd21hcF92ZXJ0ZXgsXCJ9XCJdLmpvaW4oXCJcXG5cIiksZnJhZ21lbnRTaGFkZXI6W1widW5pZm9ybSB2ZWMzIHBzQ29sb3I7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1wiLFRIUkVFLlNoYWRlckNodW5rLmNvbG9yX3BhcnNfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsubWFwX3BhcnRpY2xlX3BhcnNfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsuZm9nX3BhcnNfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsuc2hhZG93bWFwX3BhcnNfZnJhZ21lbnQsXCJ2b2lkIG1haW4oKSB7XFxuZ2xfRnJhZ0NvbG9yID0gdmVjNCggcHNDb2xvciwgb3BhY2l0eSApO1wiLFRIUkVFLlNoYWRlckNodW5rLm1hcF9wYXJ0aWNsZV9mcmFnbWVudCxUSFJFRS5TaGFkZXJDaHVuay5hbHBoYXRlc3RfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsuY29sb3JfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsuc2hhZG93bWFwX2ZyYWdtZW50LFxuVEhSRUUuU2hhZGVyQ2h1bmsuZm9nX2ZyYWdtZW50LFwifVwiXS5qb2luKFwiXFxuXCIpfSxkYXNoZWQ6e3VuaWZvcm1zOlRIUkVFLlVuaWZvcm1zVXRpbHMubWVyZ2UoW1RIUkVFLlVuaWZvcm1zTGliLmNvbW1vbixUSFJFRS5Vbmlmb3Jtc0xpYi5mb2cse3NjYWxlOnt0eXBlOlwiZlwiLHZhbHVlOjF9LGRhc2hTaXplOnt0eXBlOlwiZlwiLHZhbHVlOjF9LHRvdGFsU2l6ZTp7dHlwZTpcImZcIix2YWx1ZToyfX1dKSx2ZXJ0ZXhTaGFkZXI6W1widW5pZm9ybSBmbG9hdCBzY2FsZTtcXG5hdHRyaWJ1dGUgZmxvYXQgbGluZURpc3RhbmNlO1xcbnZhcnlpbmcgZmxvYXQgdkxpbmVEaXN0YW5jZTtcIixUSFJFRS5TaGFkZXJDaHVuay5jb2xvcl9wYXJzX3ZlcnRleCxcInZvaWQgbWFpbigpIHtcIixUSFJFRS5TaGFkZXJDaHVuay5jb2xvcl92ZXJ0ZXgsXCJ2TGluZURpc3RhbmNlID0gc2NhbGUgKiBsaW5lRGlzdGFuY2U7XFxudmVjNCBtdlBvc2l0aW9uID0gbW9kZWxWaWV3TWF0cml4ICogdmVjNCggcG9zaXRpb24sIDEuMCApO1xcbmdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIG12UG9zaXRpb247XFxufVwiXS5qb2luKFwiXFxuXCIpLFxuZnJhZ21lbnRTaGFkZXI6W1widW5pZm9ybSB2ZWMzIGRpZmZ1c2U7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbnVuaWZvcm0gZmxvYXQgZGFzaFNpemU7XFxudW5pZm9ybSBmbG9hdCB0b3RhbFNpemU7XFxudmFyeWluZyBmbG9hdCB2TGluZURpc3RhbmNlO1wiLFRIUkVFLlNoYWRlckNodW5rLmNvbG9yX3BhcnNfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsuZm9nX3BhcnNfZnJhZ21lbnQsXCJ2b2lkIG1haW4oKSB7XFxuaWYgKCBtb2QoIHZMaW5lRGlzdGFuY2UsIHRvdGFsU2l6ZSApID4gZGFzaFNpemUgKSB7XFxuZGlzY2FyZDtcXG59XFxuZ2xfRnJhZ0NvbG9yID0gdmVjNCggZGlmZnVzZSwgb3BhY2l0eSApO1wiLFRIUkVFLlNoYWRlckNodW5rLmNvbG9yX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLmZvZ19mcmFnbWVudCxcIn1cIl0uam9pbihcIlxcblwiKX0sZGVwdGg6e3VuaWZvcm1zOnttTmVhcjp7dHlwZTpcImZcIix2YWx1ZToxfSxtRmFyOnt0eXBlOlwiZlwiLHZhbHVlOjJFM30sb3BhY2l0eTp7dHlwZTpcImZcIixcbnZhbHVlOjF9fSx2ZXJ0ZXhTaGFkZXI6XCJ2b2lkIG1haW4oKSB7XFxuZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbW9kZWxWaWV3TWF0cml4ICogdmVjNCggcG9zaXRpb24sIDEuMCApO1xcbn1cIixmcmFnbWVudFNoYWRlcjpcInVuaWZvcm0gZmxvYXQgbU5lYXI7XFxudW5pZm9ybSBmbG9hdCBtRmFyO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG52b2lkIG1haW4oKSB7XFxuZmxvYXQgZGVwdGggPSBnbF9GcmFnQ29vcmQueiAvIGdsX0ZyYWdDb29yZC53O1xcbmZsb2F0IGNvbG9yID0gMS4wIC0gc21vb3Roc3RlcCggbU5lYXIsIG1GYXIsIGRlcHRoICk7XFxuZ2xfRnJhZ0NvbG9yID0gdmVjNCggdmVjMyggY29sb3IgKSwgb3BhY2l0eSApO1xcbn1cIn0sbm9ybWFsOnt1bmlmb3Jtczp7b3BhY2l0eTp7dHlwZTpcImZcIix2YWx1ZToxfX0sdmVydGV4U2hhZGVyOltcInZhcnlpbmcgdmVjMyB2Tm9ybWFsO1wiLFRIUkVFLlNoYWRlckNodW5rLm1vcnBodGFyZ2V0X3BhcnNfdmVydGV4LFwidm9pZCBtYWluKCkge1xcbnZOb3JtYWwgPSBub3JtYWxpemUoIG5vcm1hbE1hdHJpeCAqIG5vcm1hbCApO1wiLFxuVEhSRUUuU2hhZGVyQ2h1bmsubW9ycGh0YXJnZXRfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLmRlZmF1bHRfdmVydGV4LFwifVwiXS5qb2luKFwiXFxuXCIpLGZyYWdtZW50U2hhZGVyOlwidW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbnZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xcbnZvaWQgbWFpbigpIHtcXG5nbF9GcmFnQ29sb3IgPSB2ZWM0KCAwLjUgKiBub3JtYWxpemUoIHZOb3JtYWwgKSArIDAuNSwgb3BhY2l0eSApO1xcbn1cIn0sbm9ybWFsbWFwOnt1bmlmb3JtczpUSFJFRS5Vbmlmb3Jtc1V0aWxzLm1lcmdlKFtUSFJFRS5Vbmlmb3Jtc0xpYi5mb2csVEhSRUUuVW5pZm9ybXNMaWIubGlnaHRzLFRIUkVFLlVuaWZvcm1zTGliLnNoYWRvd21hcCx7ZW5hYmxlQU86e3R5cGU6XCJpXCIsdmFsdWU6MH0sZW5hYmxlRGlmZnVzZTp7dHlwZTpcImlcIix2YWx1ZTowfSxlbmFibGVTcGVjdWxhcjp7dHlwZTpcImlcIix2YWx1ZTowfSxlbmFibGVSZWZsZWN0aW9uOnt0eXBlOlwiaVwiLHZhbHVlOjB9LGVuYWJsZURpc3BsYWNlbWVudDp7dHlwZTpcImlcIixcbnZhbHVlOjB9LHREaXNwbGFjZW1lbnQ6e3R5cGU6XCJ0XCIsdmFsdWU6bnVsbH0sdERpZmZ1c2U6e3R5cGU6XCJ0XCIsdmFsdWU6bnVsbH0sdEN1YmU6e3R5cGU6XCJ0XCIsdmFsdWU6bnVsbH0sdE5vcm1hbDp7dHlwZTpcInRcIix2YWx1ZTpudWxsfSx0U3BlY3VsYXI6e3R5cGU6XCJ0XCIsdmFsdWU6bnVsbH0sdEFPOnt0eXBlOlwidFwiLHZhbHVlOm51bGx9LHVOb3JtYWxTY2FsZTp7dHlwZTpcInYyXCIsdmFsdWU6bmV3IFRIUkVFLlZlY3RvcjIoMSwxKX0sdURpc3BsYWNlbWVudEJpYXM6e3R5cGU6XCJmXCIsdmFsdWU6MH0sdURpc3BsYWNlbWVudFNjYWxlOnt0eXBlOlwiZlwiLHZhbHVlOjF9LHVEaWZmdXNlQ29sb3I6e3R5cGU6XCJjXCIsdmFsdWU6bmV3IFRIUkVFLkNvbG9yKDE2Nzc3MjE1KX0sdVNwZWN1bGFyQ29sb3I6e3R5cGU6XCJjXCIsdmFsdWU6bmV3IFRIUkVFLkNvbG9yKDExMTg0ODEpfSx1QW1iaWVudENvbG9yOnt0eXBlOlwiY1wiLHZhbHVlOm5ldyBUSFJFRS5Db2xvcigxNjc3NzIxNSl9LHVTaGluaW5lc3M6e3R5cGU6XCJmXCIsXG52YWx1ZTozMH0sdU9wYWNpdHk6e3R5cGU6XCJmXCIsdmFsdWU6MX0sdXNlUmVmcmFjdDp7dHlwZTpcImlcIix2YWx1ZTowfSx1UmVmcmFjdGlvblJhdGlvOnt0eXBlOlwiZlwiLHZhbHVlOjAuOTh9LHVSZWZsZWN0aXZpdHk6e3R5cGU6XCJmXCIsdmFsdWU6MC41fSx1T2Zmc2V0Ont0eXBlOlwidjJcIix2YWx1ZTpuZXcgVEhSRUUuVmVjdG9yMigwLDApfSx1UmVwZWF0Ont0eXBlOlwidjJcIix2YWx1ZTpuZXcgVEhSRUUuVmVjdG9yMigxLDEpfSx3cmFwUkdCOnt0eXBlOlwidjNcIix2YWx1ZTpuZXcgVEhSRUUuVmVjdG9yMygxLDEsMSl9fV0pLGZyYWdtZW50U2hhZGVyOltcInVuaWZvcm0gdmVjMyB1QW1iaWVudENvbG9yO1xcbnVuaWZvcm0gdmVjMyB1RGlmZnVzZUNvbG9yO1xcbnVuaWZvcm0gdmVjMyB1U3BlY3VsYXJDb2xvcjtcXG51bmlmb3JtIGZsb2F0IHVTaGluaW5lc3M7XFxudW5pZm9ybSBmbG9hdCB1T3BhY2l0eTtcXG51bmlmb3JtIGJvb2wgZW5hYmxlRGlmZnVzZTtcXG51bmlmb3JtIGJvb2wgZW5hYmxlU3BlY3VsYXI7XFxudW5pZm9ybSBib29sIGVuYWJsZUFPO1xcbnVuaWZvcm0gYm9vbCBlbmFibGVSZWZsZWN0aW9uO1xcbnVuaWZvcm0gc2FtcGxlcjJEIHREaWZmdXNlO1xcbnVuaWZvcm0gc2FtcGxlcjJEIHROb3JtYWw7XFxudW5pZm9ybSBzYW1wbGVyMkQgdFNwZWN1bGFyO1xcbnVuaWZvcm0gc2FtcGxlcjJEIHRBTztcXG51bmlmb3JtIHNhbXBsZXJDdWJlIHRDdWJlO1xcbnVuaWZvcm0gdmVjMiB1Tm9ybWFsU2NhbGU7XFxudW5pZm9ybSBib29sIHVzZVJlZnJhY3Q7XFxudW5pZm9ybSBmbG9hdCB1UmVmcmFjdGlvblJhdGlvO1xcbnVuaWZvcm0gZmxvYXQgdVJlZmxlY3Rpdml0eTtcXG52YXJ5aW5nIHZlYzMgdlRhbmdlbnQ7XFxudmFyeWluZyB2ZWMzIHZCaW5vcm1hbDtcXG52YXJ5aW5nIHZlYzMgdk5vcm1hbDtcXG52YXJ5aW5nIHZlYzIgdlV2O1xcbnVuaWZvcm0gdmVjMyBhbWJpZW50TGlnaHRDb2xvcjtcXG4jaWYgTUFYX0RJUl9MSUdIVFMgPiAwXFxudW5pZm9ybSB2ZWMzIGRpcmVjdGlvbmFsTGlnaHRDb2xvclsgTUFYX0RJUl9MSUdIVFMgXTtcXG51bmlmb3JtIHZlYzMgZGlyZWN0aW9uYWxMaWdodERpcmVjdGlvblsgTUFYX0RJUl9MSUdIVFMgXTtcXG4jZW5kaWZcXG4jaWYgTUFYX0hFTUlfTElHSFRTID4gMFxcbnVuaWZvcm0gdmVjMyBoZW1pc3BoZXJlTGlnaHRTa3lDb2xvclsgTUFYX0hFTUlfTElHSFRTIF07XFxudW5pZm9ybSB2ZWMzIGhlbWlzcGhlcmVMaWdodEdyb3VuZENvbG9yWyBNQVhfSEVNSV9MSUdIVFMgXTtcXG51bmlmb3JtIHZlYzMgaGVtaXNwaGVyZUxpZ2h0RGlyZWN0aW9uWyBNQVhfSEVNSV9MSUdIVFMgXTtcXG4jZW5kaWZcXG4jaWYgTUFYX1BPSU5UX0xJR0hUUyA+IDBcXG51bmlmb3JtIHZlYzMgcG9pbnRMaWdodENvbG9yWyBNQVhfUE9JTlRfTElHSFRTIF07XFxudW5pZm9ybSB2ZWMzIHBvaW50TGlnaHRQb3NpdGlvblsgTUFYX1BPSU5UX0xJR0hUUyBdO1xcbnVuaWZvcm0gZmxvYXQgcG9pbnRMaWdodERpc3RhbmNlWyBNQVhfUE9JTlRfTElHSFRTIF07XFxuI2VuZGlmXFxuI2lmIE1BWF9TUE9UX0xJR0hUUyA+IDBcXG51bmlmb3JtIHZlYzMgc3BvdExpZ2h0Q29sb3JbIE1BWF9TUE9UX0xJR0hUUyBdO1xcbnVuaWZvcm0gdmVjMyBzcG90TGlnaHRQb3NpdGlvblsgTUFYX1NQT1RfTElHSFRTIF07XFxudW5pZm9ybSB2ZWMzIHNwb3RMaWdodERpcmVjdGlvblsgTUFYX1NQT1RfTElHSFRTIF07XFxudW5pZm9ybSBmbG9hdCBzcG90TGlnaHRBbmdsZUNvc1sgTUFYX1NQT1RfTElHSFRTIF07XFxudW5pZm9ybSBmbG9hdCBzcG90TGlnaHRFeHBvbmVudFsgTUFYX1NQT1RfTElHSFRTIF07XFxudW5pZm9ybSBmbG9hdCBzcG90TGlnaHREaXN0YW5jZVsgTUFYX1NQT1RfTElHSFRTIF07XFxuI2VuZGlmXFxuI2lmZGVmIFdSQVBfQVJPVU5EXFxudW5pZm9ybSB2ZWMzIHdyYXBSR0I7XFxuI2VuZGlmXFxudmFyeWluZyB2ZWMzIHZXb3JsZFBvc2l0aW9uO1xcbnZhcnlpbmcgdmVjMyB2Vmlld1Bvc2l0aW9uO1wiLFxuVEhSRUUuU2hhZGVyQ2h1bmsuc2hhZG93bWFwX3BhcnNfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsuZm9nX3BhcnNfZnJhZ21lbnQsXCJ2b2lkIG1haW4oKSB7XFxuZ2xfRnJhZ0NvbG9yID0gdmVjNCggdmVjMyggMS4wICksIHVPcGFjaXR5ICk7XFxudmVjMyBzcGVjdWxhclRleCA9IHZlYzMoIDEuMCApO1xcbnZlYzMgbm9ybWFsVGV4ID0gdGV4dHVyZTJEKCB0Tm9ybWFsLCB2VXYgKS54eXogKiAyLjAgLSAxLjA7XFxubm9ybWFsVGV4Lnh5ICo9IHVOb3JtYWxTY2FsZTtcXG5ub3JtYWxUZXggPSBub3JtYWxpemUoIG5vcm1hbFRleCApO1xcbmlmKCBlbmFibGVEaWZmdXNlICkge1xcbiNpZmRlZiBHQU1NQV9JTlBVVFxcbnZlYzQgdGV4ZWxDb2xvciA9IHRleHR1cmUyRCggdERpZmZ1c2UsIHZVdiApO1xcbnRleGVsQ29sb3IueHl6ICo9IHRleGVsQ29sb3IueHl6O1xcbmdsX0ZyYWdDb2xvciA9IGdsX0ZyYWdDb2xvciAqIHRleGVsQ29sb3I7XFxuI2Vsc2VcXG5nbF9GcmFnQ29sb3IgPSBnbF9GcmFnQ29sb3IgKiB0ZXh0dXJlMkQoIHREaWZmdXNlLCB2VXYgKTtcXG4jZW5kaWZcXG59XFxuaWYoIGVuYWJsZUFPICkge1xcbiNpZmRlZiBHQU1NQV9JTlBVVFxcbnZlYzQgYW9Db2xvciA9IHRleHR1cmUyRCggdEFPLCB2VXYgKTtcXG5hb0NvbG9yLnh5eiAqPSBhb0NvbG9yLnh5ejtcXG5nbF9GcmFnQ29sb3IueHl6ID0gZ2xfRnJhZ0NvbG9yLnh5eiAqIGFvQ29sb3IueHl6O1xcbiNlbHNlXFxuZ2xfRnJhZ0NvbG9yLnh5eiA9IGdsX0ZyYWdDb2xvci54eXogKiB0ZXh0dXJlMkQoIHRBTywgdlV2ICkueHl6O1xcbiNlbmRpZlxcbn1cXG5pZiggZW5hYmxlU3BlY3VsYXIgKVxcbnNwZWN1bGFyVGV4ID0gdGV4dHVyZTJEKCB0U3BlY3VsYXIsIHZVdiApLnh5ejtcXG5tYXQzIHRzYiA9IG1hdDMoIG5vcm1hbGl6ZSggdlRhbmdlbnQgKSwgbm9ybWFsaXplKCB2Qmlub3JtYWwgKSwgbm9ybWFsaXplKCB2Tm9ybWFsICkgKTtcXG52ZWMzIGZpbmFsTm9ybWFsID0gdHNiICogbm9ybWFsVGV4O1xcbiNpZmRlZiBGTElQX1NJREVEXFxuZmluYWxOb3JtYWwgPSAtZmluYWxOb3JtYWw7XFxuI2VuZGlmXFxudmVjMyBub3JtYWwgPSBub3JtYWxpemUoIGZpbmFsTm9ybWFsICk7XFxudmVjMyB2aWV3UG9zaXRpb24gPSBub3JtYWxpemUoIHZWaWV3UG9zaXRpb24gKTtcXG4jaWYgTUFYX1BPSU5UX0xJR0hUUyA+IDBcXG52ZWMzIHBvaW50RGlmZnVzZSA9IHZlYzMoIDAuMCApO1xcbnZlYzMgcG9pbnRTcGVjdWxhciA9IHZlYzMoIDAuMCApO1xcbmZvciAoIGludCBpID0gMDsgaSA8IE1BWF9QT0lOVF9MSUdIVFM7IGkgKysgKSB7XFxudmVjNCBsUG9zaXRpb24gPSB2aWV3TWF0cml4ICogdmVjNCggcG9pbnRMaWdodFBvc2l0aW9uWyBpIF0sIDEuMCApO1xcbnZlYzMgcG9pbnRWZWN0b3IgPSBsUG9zaXRpb24ueHl6ICsgdlZpZXdQb3NpdGlvbi54eXo7XFxuZmxvYXQgcG9pbnREaXN0YW5jZSA9IDEuMDtcXG5pZiAoIHBvaW50TGlnaHREaXN0YW5jZVsgaSBdID4gMC4wIClcXG5wb2ludERpc3RhbmNlID0gMS4wIC0gbWluKCAoIGxlbmd0aCggcG9pbnRWZWN0b3IgKSAvIHBvaW50TGlnaHREaXN0YW5jZVsgaSBdICksIDEuMCApO1xcbnBvaW50VmVjdG9yID0gbm9ybWFsaXplKCBwb2ludFZlY3RvciApO1xcbiNpZmRlZiBXUkFQX0FST1VORFxcbmZsb2F0IHBvaW50RGlmZnVzZVdlaWdodEZ1bGwgPSBtYXgoIGRvdCggbm9ybWFsLCBwb2ludFZlY3RvciApLCAwLjAgKTtcXG5mbG9hdCBwb2ludERpZmZ1c2VXZWlnaHRIYWxmID0gbWF4KCAwLjUgKiBkb3QoIG5vcm1hbCwgcG9pbnRWZWN0b3IgKSArIDAuNSwgMC4wICk7XFxudmVjMyBwb2ludERpZmZ1c2VXZWlnaHQgPSBtaXgoIHZlYzMgKCBwb2ludERpZmZ1c2VXZWlnaHRGdWxsICksIHZlYzMoIHBvaW50RGlmZnVzZVdlaWdodEhhbGYgKSwgd3JhcFJHQiApO1xcbiNlbHNlXFxuZmxvYXQgcG9pbnREaWZmdXNlV2VpZ2h0ID0gbWF4KCBkb3QoIG5vcm1hbCwgcG9pbnRWZWN0b3IgKSwgMC4wICk7XFxuI2VuZGlmXFxucG9pbnREaWZmdXNlICs9IHBvaW50RGlzdGFuY2UgKiBwb2ludExpZ2h0Q29sb3JbIGkgXSAqIHVEaWZmdXNlQ29sb3IgKiBwb2ludERpZmZ1c2VXZWlnaHQ7XFxudmVjMyBwb2ludEhhbGZWZWN0b3IgPSBub3JtYWxpemUoIHBvaW50VmVjdG9yICsgdmlld1Bvc2l0aW9uICk7XFxuZmxvYXQgcG9pbnREb3ROb3JtYWxIYWxmID0gbWF4KCBkb3QoIG5vcm1hbCwgcG9pbnRIYWxmVmVjdG9yICksIDAuMCApO1xcbmZsb2F0IHBvaW50U3BlY3VsYXJXZWlnaHQgPSBzcGVjdWxhclRleC5yICogbWF4KCBwb3coIHBvaW50RG90Tm9ybWFsSGFsZiwgdVNoaW5pbmVzcyApLCAwLjAgKTtcXG4jaWZkZWYgUEhZU0lDQUxMWV9CQVNFRF9TSEFESU5HXFxuZmxvYXQgc3BlY3VsYXJOb3JtYWxpemF0aW9uID0gKCB1U2hpbmluZXNzICsgMi4wMDAxICkgLyA4LjA7XFxudmVjMyBzY2hsaWNrID0gdVNwZWN1bGFyQ29sb3IgKyB2ZWMzKCAxLjAgLSB1U3BlY3VsYXJDb2xvciApICogcG93KCAxLjAgLSBkb3QoIHBvaW50VmVjdG9yLCBwb2ludEhhbGZWZWN0b3IgKSwgNS4wICk7XFxucG9pbnRTcGVjdWxhciArPSBzY2hsaWNrICogcG9pbnRMaWdodENvbG9yWyBpIF0gKiBwb2ludFNwZWN1bGFyV2VpZ2h0ICogcG9pbnREaWZmdXNlV2VpZ2h0ICogcG9pbnREaXN0YW5jZSAqIHNwZWN1bGFyTm9ybWFsaXphdGlvbjtcXG4jZWxzZVxcbnBvaW50U3BlY3VsYXIgKz0gcG9pbnREaXN0YW5jZSAqIHBvaW50TGlnaHRDb2xvclsgaSBdICogdVNwZWN1bGFyQ29sb3IgKiBwb2ludFNwZWN1bGFyV2VpZ2h0ICogcG9pbnREaWZmdXNlV2VpZ2h0O1xcbiNlbmRpZlxcbn1cXG4jZW5kaWZcXG4jaWYgTUFYX1NQT1RfTElHSFRTID4gMFxcbnZlYzMgc3BvdERpZmZ1c2UgPSB2ZWMzKCAwLjAgKTtcXG52ZWMzIHNwb3RTcGVjdWxhciA9IHZlYzMoIDAuMCApO1xcbmZvciAoIGludCBpID0gMDsgaSA8IE1BWF9TUE9UX0xJR0hUUzsgaSArKyApIHtcXG52ZWM0IGxQb3NpdGlvbiA9IHZpZXdNYXRyaXggKiB2ZWM0KCBzcG90TGlnaHRQb3NpdGlvblsgaSBdLCAxLjAgKTtcXG52ZWMzIHNwb3RWZWN0b3IgPSBsUG9zaXRpb24ueHl6ICsgdlZpZXdQb3NpdGlvbi54eXo7XFxuZmxvYXQgc3BvdERpc3RhbmNlID0gMS4wO1xcbmlmICggc3BvdExpZ2h0RGlzdGFuY2VbIGkgXSA+IDAuMCApXFxuc3BvdERpc3RhbmNlID0gMS4wIC0gbWluKCAoIGxlbmd0aCggc3BvdFZlY3RvciApIC8gc3BvdExpZ2h0RGlzdGFuY2VbIGkgXSApLCAxLjAgKTtcXG5zcG90VmVjdG9yID0gbm9ybWFsaXplKCBzcG90VmVjdG9yICk7XFxuZmxvYXQgc3BvdEVmZmVjdCA9IGRvdCggc3BvdExpZ2h0RGlyZWN0aW9uWyBpIF0sIG5vcm1hbGl6ZSggc3BvdExpZ2h0UG9zaXRpb25bIGkgXSAtIHZXb3JsZFBvc2l0aW9uICkgKTtcXG5pZiAoIHNwb3RFZmZlY3QgPiBzcG90TGlnaHRBbmdsZUNvc1sgaSBdICkge1xcbnNwb3RFZmZlY3QgPSBtYXgoIHBvdyggc3BvdEVmZmVjdCwgc3BvdExpZ2h0RXhwb25lbnRbIGkgXSApLCAwLjAgKTtcXG4jaWZkZWYgV1JBUF9BUk9VTkRcXG5mbG9hdCBzcG90RGlmZnVzZVdlaWdodEZ1bGwgPSBtYXgoIGRvdCggbm9ybWFsLCBzcG90VmVjdG9yICksIDAuMCApO1xcbmZsb2F0IHNwb3REaWZmdXNlV2VpZ2h0SGFsZiA9IG1heCggMC41ICogZG90KCBub3JtYWwsIHNwb3RWZWN0b3IgKSArIDAuNSwgMC4wICk7XFxudmVjMyBzcG90RGlmZnVzZVdlaWdodCA9IG1peCggdmVjMyAoIHNwb3REaWZmdXNlV2VpZ2h0RnVsbCApLCB2ZWMzKCBzcG90RGlmZnVzZVdlaWdodEhhbGYgKSwgd3JhcFJHQiApO1xcbiNlbHNlXFxuZmxvYXQgc3BvdERpZmZ1c2VXZWlnaHQgPSBtYXgoIGRvdCggbm9ybWFsLCBzcG90VmVjdG9yICksIDAuMCApO1xcbiNlbmRpZlxcbnNwb3REaWZmdXNlICs9IHNwb3REaXN0YW5jZSAqIHNwb3RMaWdodENvbG9yWyBpIF0gKiB1RGlmZnVzZUNvbG9yICogc3BvdERpZmZ1c2VXZWlnaHQgKiBzcG90RWZmZWN0O1xcbnZlYzMgc3BvdEhhbGZWZWN0b3IgPSBub3JtYWxpemUoIHNwb3RWZWN0b3IgKyB2aWV3UG9zaXRpb24gKTtcXG5mbG9hdCBzcG90RG90Tm9ybWFsSGFsZiA9IG1heCggZG90KCBub3JtYWwsIHNwb3RIYWxmVmVjdG9yICksIDAuMCApO1xcbmZsb2F0IHNwb3RTcGVjdWxhcldlaWdodCA9IHNwZWN1bGFyVGV4LnIgKiBtYXgoIHBvdyggc3BvdERvdE5vcm1hbEhhbGYsIHVTaGluaW5lc3MgKSwgMC4wICk7XFxuI2lmZGVmIFBIWVNJQ0FMTFlfQkFTRURfU0hBRElOR1xcbmZsb2F0IHNwZWN1bGFyTm9ybWFsaXphdGlvbiA9ICggdVNoaW5pbmVzcyArIDIuMDAwMSApIC8gOC4wO1xcbnZlYzMgc2NobGljayA9IHVTcGVjdWxhckNvbG9yICsgdmVjMyggMS4wIC0gdVNwZWN1bGFyQ29sb3IgKSAqIHBvdyggMS4wIC0gZG90KCBzcG90VmVjdG9yLCBzcG90SGFsZlZlY3RvciApLCA1LjAgKTtcXG5zcG90U3BlY3VsYXIgKz0gc2NobGljayAqIHNwb3RMaWdodENvbG9yWyBpIF0gKiBzcG90U3BlY3VsYXJXZWlnaHQgKiBzcG90RGlmZnVzZVdlaWdodCAqIHNwb3REaXN0YW5jZSAqIHNwZWN1bGFyTm9ybWFsaXphdGlvbiAqIHNwb3RFZmZlY3Q7XFxuI2Vsc2VcXG5zcG90U3BlY3VsYXIgKz0gc3BvdERpc3RhbmNlICogc3BvdExpZ2h0Q29sb3JbIGkgXSAqIHVTcGVjdWxhckNvbG9yICogc3BvdFNwZWN1bGFyV2VpZ2h0ICogc3BvdERpZmZ1c2VXZWlnaHQgKiBzcG90RWZmZWN0O1xcbiNlbmRpZlxcbn1cXG59XFxuI2VuZGlmXFxuI2lmIE1BWF9ESVJfTElHSFRTID4gMFxcbnZlYzMgZGlyRGlmZnVzZSA9IHZlYzMoIDAuMCApO1xcbnZlYzMgZGlyU3BlY3VsYXIgPSB2ZWMzKCAwLjAgKTtcXG5mb3IoIGludCBpID0gMDsgaSA8IE1BWF9ESVJfTElHSFRTOyBpKysgKSB7XFxudmVjNCBsRGlyZWN0aW9uID0gdmlld01hdHJpeCAqIHZlYzQoIGRpcmVjdGlvbmFsTGlnaHREaXJlY3Rpb25bIGkgXSwgMC4wICk7XFxudmVjMyBkaXJWZWN0b3IgPSBub3JtYWxpemUoIGxEaXJlY3Rpb24ueHl6ICk7XFxuI2lmZGVmIFdSQVBfQVJPVU5EXFxuZmxvYXQgZGlyZWN0aW9uYWxMaWdodFdlaWdodGluZ0Z1bGwgPSBtYXgoIGRvdCggbm9ybWFsLCBkaXJWZWN0b3IgKSwgMC4wICk7XFxuZmxvYXQgZGlyZWN0aW9uYWxMaWdodFdlaWdodGluZ0hhbGYgPSBtYXgoIDAuNSAqIGRvdCggbm9ybWFsLCBkaXJWZWN0b3IgKSArIDAuNSwgMC4wICk7XFxudmVjMyBkaXJEaWZmdXNlV2VpZ2h0ID0gbWl4KCB2ZWMzKCBkaXJlY3Rpb25hbExpZ2h0V2VpZ2h0aW5nRnVsbCApLCB2ZWMzKCBkaXJlY3Rpb25hbExpZ2h0V2VpZ2h0aW5nSGFsZiApLCB3cmFwUkdCICk7XFxuI2Vsc2VcXG5mbG9hdCBkaXJEaWZmdXNlV2VpZ2h0ID0gbWF4KCBkb3QoIG5vcm1hbCwgZGlyVmVjdG9yICksIDAuMCApO1xcbiNlbmRpZlxcbmRpckRpZmZ1c2UgKz0gZGlyZWN0aW9uYWxMaWdodENvbG9yWyBpIF0gKiB1RGlmZnVzZUNvbG9yICogZGlyRGlmZnVzZVdlaWdodDtcXG52ZWMzIGRpckhhbGZWZWN0b3IgPSBub3JtYWxpemUoIGRpclZlY3RvciArIHZpZXdQb3NpdGlvbiApO1xcbmZsb2F0IGRpckRvdE5vcm1hbEhhbGYgPSBtYXgoIGRvdCggbm9ybWFsLCBkaXJIYWxmVmVjdG9yICksIDAuMCApO1xcbmZsb2F0IGRpclNwZWN1bGFyV2VpZ2h0ID0gc3BlY3VsYXJUZXguciAqIG1heCggcG93KCBkaXJEb3ROb3JtYWxIYWxmLCB1U2hpbmluZXNzICksIDAuMCApO1xcbiNpZmRlZiBQSFlTSUNBTExZX0JBU0VEX1NIQURJTkdcXG5mbG9hdCBzcGVjdWxhck5vcm1hbGl6YXRpb24gPSAoIHVTaGluaW5lc3MgKyAyLjAwMDEgKSAvIDguMDtcXG52ZWMzIHNjaGxpY2sgPSB1U3BlY3VsYXJDb2xvciArIHZlYzMoIDEuMCAtIHVTcGVjdWxhckNvbG9yICkgKiBwb3coIDEuMCAtIGRvdCggZGlyVmVjdG9yLCBkaXJIYWxmVmVjdG9yICksIDUuMCApO1xcbmRpclNwZWN1bGFyICs9IHNjaGxpY2sgKiBkaXJlY3Rpb25hbExpZ2h0Q29sb3JbIGkgXSAqIGRpclNwZWN1bGFyV2VpZ2h0ICogZGlyRGlmZnVzZVdlaWdodCAqIHNwZWN1bGFyTm9ybWFsaXphdGlvbjtcXG4jZWxzZVxcbmRpclNwZWN1bGFyICs9IGRpcmVjdGlvbmFsTGlnaHRDb2xvclsgaSBdICogdVNwZWN1bGFyQ29sb3IgKiBkaXJTcGVjdWxhcldlaWdodCAqIGRpckRpZmZ1c2VXZWlnaHQ7XFxuI2VuZGlmXFxufVxcbiNlbmRpZlxcbiNpZiBNQVhfSEVNSV9MSUdIVFMgPiAwXFxudmVjMyBoZW1pRGlmZnVzZSAgPSB2ZWMzKCAwLjAgKTtcXG52ZWMzIGhlbWlTcGVjdWxhciA9IHZlYzMoIDAuMCApO1xcbmZvciggaW50IGkgPSAwOyBpIDwgTUFYX0hFTUlfTElHSFRTOyBpICsrICkge1xcbnZlYzQgbERpcmVjdGlvbiA9IHZpZXdNYXRyaXggKiB2ZWM0KCBoZW1pc3BoZXJlTGlnaHREaXJlY3Rpb25bIGkgXSwgMC4wICk7XFxudmVjMyBsVmVjdG9yID0gbm9ybWFsaXplKCBsRGlyZWN0aW9uLnh5eiApO1xcbmZsb2F0IGRvdFByb2R1Y3QgPSBkb3QoIG5vcm1hbCwgbFZlY3RvciApO1xcbmZsb2F0IGhlbWlEaWZmdXNlV2VpZ2h0ID0gMC41ICogZG90UHJvZHVjdCArIDAuNTtcXG52ZWMzIGhlbWlDb2xvciA9IG1peCggaGVtaXNwaGVyZUxpZ2h0R3JvdW5kQ29sb3JbIGkgXSwgaGVtaXNwaGVyZUxpZ2h0U2t5Q29sb3JbIGkgXSwgaGVtaURpZmZ1c2VXZWlnaHQgKTtcXG5oZW1pRGlmZnVzZSArPSB1RGlmZnVzZUNvbG9yICogaGVtaUNvbG9yO1xcbnZlYzMgaGVtaUhhbGZWZWN0b3JTa3kgPSBub3JtYWxpemUoIGxWZWN0b3IgKyB2aWV3UG9zaXRpb24gKTtcXG5mbG9hdCBoZW1pRG90Tm9ybWFsSGFsZlNreSA9IDAuNSAqIGRvdCggbm9ybWFsLCBoZW1pSGFsZlZlY3RvclNreSApICsgMC41O1xcbmZsb2F0IGhlbWlTcGVjdWxhcldlaWdodFNreSA9IHNwZWN1bGFyVGV4LnIgKiBtYXgoIHBvdyggaGVtaURvdE5vcm1hbEhhbGZTa3ksIHVTaGluaW5lc3MgKSwgMC4wICk7XFxudmVjMyBsVmVjdG9yR3JvdW5kID0gLWxWZWN0b3I7XFxudmVjMyBoZW1pSGFsZlZlY3Rvckdyb3VuZCA9IG5vcm1hbGl6ZSggbFZlY3Rvckdyb3VuZCArIHZpZXdQb3NpdGlvbiApO1xcbmZsb2F0IGhlbWlEb3ROb3JtYWxIYWxmR3JvdW5kID0gMC41ICogZG90KCBub3JtYWwsIGhlbWlIYWxmVmVjdG9yR3JvdW5kICkgKyAwLjU7XFxuZmxvYXQgaGVtaVNwZWN1bGFyV2VpZ2h0R3JvdW5kID0gc3BlY3VsYXJUZXguciAqIG1heCggcG93KCBoZW1pRG90Tm9ybWFsSGFsZkdyb3VuZCwgdVNoaW5pbmVzcyApLCAwLjAgKTtcXG4jaWZkZWYgUEhZU0lDQUxMWV9CQVNFRF9TSEFESU5HXFxuZmxvYXQgZG90UHJvZHVjdEdyb3VuZCA9IGRvdCggbm9ybWFsLCBsVmVjdG9yR3JvdW5kICk7XFxuZmxvYXQgc3BlY3VsYXJOb3JtYWxpemF0aW9uID0gKCB1U2hpbmluZXNzICsgMi4wMDAxICkgLyA4LjA7XFxudmVjMyBzY2hsaWNrU2t5ID0gdVNwZWN1bGFyQ29sb3IgKyB2ZWMzKCAxLjAgLSB1U3BlY3VsYXJDb2xvciApICogcG93KCAxLjAgLSBkb3QoIGxWZWN0b3IsIGhlbWlIYWxmVmVjdG9yU2t5ICksIDUuMCApO1xcbnZlYzMgc2NobGlja0dyb3VuZCA9IHVTcGVjdWxhckNvbG9yICsgdmVjMyggMS4wIC0gdVNwZWN1bGFyQ29sb3IgKSAqIHBvdyggMS4wIC0gZG90KCBsVmVjdG9yR3JvdW5kLCBoZW1pSGFsZlZlY3Rvckdyb3VuZCApLCA1LjAgKTtcXG5oZW1pU3BlY3VsYXIgKz0gaGVtaUNvbG9yICogc3BlY3VsYXJOb3JtYWxpemF0aW9uICogKCBzY2hsaWNrU2t5ICogaGVtaVNwZWN1bGFyV2VpZ2h0U2t5ICogbWF4KCBkb3RQcm9kdWN0LCAwLjAgKSArIHNjaGxpY2tHcm91bmQgKiBoZW1pU3BlY3VsYXJXZWlnaHRHcm91bmQgKiBtYXgoIGRvdFByb2R1Y3RHcm91bmQsIDAuMCApICk7XFxuI2Vsc2VcXG5oZW1pU3BlY3VsYXIgKz0gdVNwZWN1bGFyQ29sb3IgKiBoZW1pQ29sb3IgKiAoIGhlbWlTcGVjdWxhcldlaWdodFNreSArIGhlbWlTcGVjdWxhcldlaWdodEdyb3VuZCApICogaGVtaURpZmZ1c2VXZWlnaHQ7XFxuI2VuZGlmXFxufVxcbiNlbmRpZlxcbnZlYzMgdG90YWxEaWZmdXNlID0gdmVjMyggMC4wICk7XFxudmVjMyB0b3RhbFNwZWN1bGFyID0gdmVjMyggMC4wICk7XFxuI2lmIE1BWF9ESVJfTElHSFRTID4gMFxcbnRvdGFsRGlmZnVzZSArPSBkaXJEaWZmdXNlO1xcbnRvdGFsU3BlY3VsYXIgKz0gZGlyU3BlY3VsYXI7XFxuI2VuZGlmXFxuI2lmIE1BWF9IRU1JX0xJR0hUUyA+IDBcXG50b3RhbERpZmZ1c2UgKz0gaGVtaURpZmZ1c2U7XFxudG90YWxTcGVjdWxhciArPSBoZW1pU3BlY3VsYXI7XFxuI2VuZGlmXFxuI2lmIE1BWF9QT0lOVF9MSUdIVFMgPiAwXFxudG90YWxEaWZmdXNlICs9IHBvaW50RGlmZnVzZTtcXG50b3RhbFNwZWN1bGFyICs9IHBvaW50U3BlY3VsYXI7XFxuI2VuZGlmXFxuI2lmIE1BWF9TUE9UX0xJR0hUUyA+IDBcXG50b3RhbERpZmZ1c2UgKz0gc3BvdERpZmZ1c2U7XFxudG90YWxTcGVjdWxhciArPSBzcG90U3BlY3VsYXI7XFxuI2VuZGlmXFxuI2lmZGVmIE1FVEFMXFxuZ2xfRnJhZ0NvbG9yLnh5eiA9IGdsX0ZyYWdDb2xvci54eXogKiAoIHRvdGFsRGlmZnVzZSArIGFtYmllbnRMaWdodENvbG9yICogdUFtYmllbnRDb2xvciArIHRvdGFsU3BlY3VsYXIgKTtcXG4jZWxzZVxcbmdsX0ZyYWdDb2xvci54eXogPSBnbF9GcmFnQ29sb3IueHl6ICogKCB0b3RhbERpZmZ1c2UgKyBhbWJpZW50TGlnaHRDb2xvciAqIHVBbWJpZW50Q29sb3IgKSArIHRvdGFsU3BlY3VsYXI7XFxuI2VuZGlmXFxuaWYgKCBlbmFibGVSZWZsZWN0aW9uICkge1xcbnZlYzMgdlJlZmxlY3Q7XFxudmVjMyBjYW1lcmFUb1ZlcnRleCA9IG5vcm1hbGl6ZSggdldvcmxkUG9zaXRpb24gLSBjYW1lcmFQb3NpdGlvbiApO1xcbmlmICggdXNlUmVmcmFjdCApIHtcXG52UmVmbGVjdCA9IHJlZnJhY3QoIGNhbWVyYVRvVmVydGV4LCBub3JtYWwsIHVSZWZyYWN0aW9uUmF0aW8gKTtcXG59IGVsc2Uge1xcbnZSZWZsZWN0ID0gcmVmbGVjdCggY2FtZXJhVG9WZXJ0ZXgsIG5vcm1hbCApO1xcbn1cXG52ZWM0IGN1YmVDb2xvciA9IHRleHR1cmVDdWJlKCB0Q3ViZSwgdmVjMyggLXZSZWZsZWN0LngsIHZSZWZsZWN0Lnl6ICkgKTtcXG4jaWZkZWYgR0FNTUFfSU5QVVRcXG5jdWJlQ29sb3IueHl6ICo9IGN1YmVDb2xvci54eXo7XFxuI2VuZGlmXFxuZ2xfRnJhZ0NvbG9yLnh5eiA9IG1peCggZ2xfRnJhZ0NvbG9yLnh5eiwgY3ViZUNvbG9yLnh5eiwgc3BlY3VsYXJUZXguciAqIHVSZWZsZWN0aXZpdHkgKTtcXG59XCIsXG5USFJFRS5TaGFkZXJDaHVuay5zaGFkb3dtYXBfZnJhZ21lbnQsVEhSRUUuU2hhZGVyQ2h1bmsubGluZWFyX3RvX2dhbW1hX2ZyYWdtZW50LFRIUkVFLlNoYWRlckNodW5rLmZvZ19mcmFnbWVudCxcIn1cIl0uam9pbihcIlxcblwiKSx2ZXJ0ZXhTaGFkZXI6W1wiYXR0cmlidXRlIHZlYzQgdGFuZ2VudDtcXG51bmlmb3JtIHZlYzIgdU9mZnNldDtcXG51bmlmb3JtIHZlYzIgdVJlcGVhdDtcXG51bmlmb3JtIGJvb2wgZW5hYmxlRGlzcGxhY2VtZW50O1xcbiNpZmRlZiBWRVJURVhfVEVYVFVSRVNcXG51bmlmb3JtIHNhbXBsZXIyRCB0RGlzcGxhY2VtZW50O1xcbnVuaWZvcm0gZmxvYXQgdURpc3BsYWNlbWVudFNjYWxlO1xcbnVuaWZvcm0gZmxvYXQgdURpc3BsYWNlbWVudEJpYXM7XFxuI2VuZGlmXFxudmFyeWluZyB2ZWMzIHZUYW5nZW50O1xcbnZhcnlpbmcgdmVjMyB2Qmlub3JtYWw7XFxudmFyeWluZyB2ZWMzIHZOb3JtYWw7XFxudmFyeWluZyB2ZWMyIHZVdjtcXG52YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XFxudmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XCIsXG5USFJFRS5TaGFkZXJDaHVuay5za2lubmluZ19wYXJzX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5zaGFkb3dtYXBfcGFyc192ZXJ0ZXgsXCJ2b2lkIG1haW4oKSB7XCIsVEhSRUUuU2hhZGVyQ2h1bmsuc2tpbmJhc2VfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLnNraW5ub3JtYWxfdmVydGV4LFwiI2lmZGVmIFVTRV9TS0lOTklOR1xcbnZOb3JtYWwgPSBub3JtYWxpemUoIG5vcm1hbE1hdHJpeCAqIHNraW5uZWROb3JtYWwueHl6ICk7XFxudmVjNCBza2lubmVkVGFuZ2VudCA9IHNraW5NYXRyaXggKiB2ZWM0KCB0YW5nZW50Lnh5eiwgMC4wICk7XFxudlRhbmdlbnQgPSBub3JtYWxpemUoIG5vcm1hbE1hdHJpeCAqIHNraW5uZWRUYW5nZW50Lnh5eiApO1xcbiNlbHNlXFxudk5vcm1hbCA9IG5vcm1hbGl6ZSggbm9ybWFsTWF0cml4ICogbm9ybWFsICk7XFxudlRhbmdlbnQgPSBub3JtYWxpemUoIG5vcm1hbE1hdHJpeCAqIHRhbmdlbnQueHl6ICk7XFxuI2VuZGlmXFxudkJpbm9ybWFsID0gbm9ybWFsaXplKCBjcm9zcyggdk5vcm1hbCwgdlRhbmdlbnQgKSAqIHRhbmdlbnQudyApO1xcbnZVdiA9IHV2ICogdVJlcGVhdCArIHVPZmZzZXQ7XFxudmVjMyBkaXNwbGFjZWRQb3NpdGlvbjtcXG4jaWZkZWYgVkVSVEVYX1RFWFRVUkVTXFxuaWYgKCBlbmFibGVEaXNwbGFjZW1lbnQgKSB7XFxudmVjMyBkdiA9IHRleHR1cmUyRCggdERpc3BsYWNlbWVudCwgdXYgKS54eXo7XFxuZmxvYXQgZGYgPSB1RGlzcGxhY2VtZW50U2NhbGUgKiBkdi54ICsgdURpc3BsYWNlbWVudEJpYXM7XFxuZGlzcGxhY2VkUG9zaXRpb24gPSBwb3NpdGlvbiArIG5vcm1hbGl6ZSggbm9ybWFsICkgKiBkZjtcXG59IGVsc2Uge1xcbiNpZmRlZiBVU0VfU0tJTk5JTkdcXG52ZWM0IHNraW5WZXJ0ZXggPSB2ZWM0KCBwb3NpdGlvbiwgMS4wICk7XFxudmVjNCBza2lubmVkICA9IGJvbmVNYXRYICogc2tpblZlcnRleCAqIHNraW5XZWlnaHQueDtcXG5za2lubmVkIFxcdCAgKz0gYm9uZU1hdFkgKiBza2luVmVydGV4ICogc2tpbldlaWdodC55O1xcbmRpc3BsYWNlZFBvc2l0aW9uICA9IHNraW5uZWQueHl6O1xcbiNlbHNlXFxuZGlzcGxhY2VkUG9zaXRpb24gPSBwb3NpdGlvbjtcXG4jZW5kaWZcXG59XFxuI2Vsc2VcXG4jaWZkZWYgVVNFX1NLSU5OSU5HXFxudmVjNCBza2luVmVydGV4ID0gdmVjNCggcG9zaXRpb24sIDEuMCApO1xcbnZlYzQgc2tpbm5lZCAgPSBib25lTWF0WCAqIHNraW5WZXJ0ZXggKiBza2luV2VpZ2h0Lng7XFxuc2tpbm5lZCBcXHQgICs9IGJvbmVNYXRZICogc2tpblZlcnRleCAqIHNraW5XZWlnaHQueTtcXG5kaXNwbGFjZWRQb3NpdGlvbiAgPSBza2lubmVkLnh5ejtcXG4jZWxzZVxcbmRpc3BsYWNlZFBvc2l0aW9uID0gcG9zaXRpb247XFxuI2VuZGlmXFxuI2VuZGlmXFxudmVjNCBtdlBvc2l0aW9uID0gbW9kZWxWaWV3TWF0cml4ICogdmVjNCggZGlzcGxhY2VkUG9zaXRpb24sIDEuMCApO1xcbnZlYzQgd29ybGRQb3NpdGlvbiA9IG1vZGVsTWF0cml4ICogdmVjNCggZGlzcGxhY2VkUG9zaXRpb24sIDEuMCApO1xcbmdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIG12UG9zaXRpb247XFxudldvcmxkUG9zaXRpb24gPSB3b3JsZFBvc2l0aW9uLnh5ejtcXG52Vmlld1Bvc2l0aW9uID0gLW12UG9zaXRpb24ueHl6O1xcbiNpZmRlZiBVU0VfU0hBRE9XTUFQXFxuZm9yKCBpbnQgaSA9IDA7IGkgPCBNQVhfU0hBRE9XUzsgaSArKyApIHtcXG52U2hhZG93Q29vcmRbIGkgXSA9IHNoYWRvd01hdHJpeFsgaSBdICogd29ybGRQb3NpdGlvbjtcXG59XFxuI2VuZGlmXFxufVwiXS5qb2luKFwiXFxuXCIpfSxcbmN1YmU6e3VuaWZvcm1zOnt0Q3ViZTp7dHlwZTpcInRcIix2YWx1ZTpudWxsfSx0RmxpcDp7dHlwZTpcImZcIix2YWx1ZTotMX19LHZlcnRleFNoYWRlcjpcInZhcnlpbmcgdmVjMyB2V29ybGRQb3NpdGlvbjtcXG52b2lkIG1haW4oKSB7XFxudmVjNCB3b3JsZFBvc2l0aW9uID0gbW9kZWxNYXRyaXggKiB2ZWM0KCBwb3NpdGlvbiwgMS4wICk7XFxudldvcmxkUG9zaXRpb24gPSB3b3JsZFBvc2l0aW9uLnh5ejtcXG5nbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KCBwb3NpdGlvbiwgMS4wICk7XFxufVwiLGZyYWdtZW50U2hhZGVyOlwidW5pZm9ybSBzYW1wbGVyQ3ViZSB0Q3ViZTtcXG51bmlmb3JtIGZsb2F0IHRGbGlwO1xcbnZhcnlpbmcgdmVjMyB2V29ybGRQb3NpdGlvbjtcXG52b2lkIG1haW4oKSB7XFxuZ2xfRnJhZ0NvbG9yID0gdGV4dHVyZUN1YmUoIHRDdWJlLCB2ZWMzKCB0RmxpcCAqIHZXb3JsZFBvc2l0aW9uLngsIHZXb3JsZFBvc2l0aW9uLnl6ICkgKTtcXG59XCJ9LFxuZGVwdGhSR0JBOnt1bmlmb3Jtczp7fSx2ZXJ0ZXhTaGFkZXI6W1RIUkVFLlNoYWRlckNodW5rLm1vcnBodGFyZ2V0X3BhcnNfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLnNraW5uaW5nX3BhcnNfdmVydGV4LFwidm9pZCBtYWluKCkge1wiLFRIUkVFLlNoYWRlckNodW5rLnNraW5iYXNlX3ZlcnRleCxUSFJFRS5TaGFkZXJDaHVuay5tb3JwaHRhcmdldF92ZXJ0ZXgsVEhSRUUuU2hhZGVyQ2h1bmsuc2tpbm5pbmdfdmVydGV4LFRIUkVFLlNoYWRlckNodW5rLmRlZmF1bHRfdmVydGV4LFwifVwiXS5qb2luKFwiXFxuXCIpLGZyYWdtZW50U2hhZGVyOlwidmVjNCBwYWNrX2RlcHRoKCBjb25zdCBpbiBmbG9hdCBkZXB0aCApIHtcXG5jb25zdCB2ZWM0IGJpdF9zaGlmdCA9IHZlYzQoIDI1Ni4wICogMjU2LjAgKiAyNTYuMCwgMjU2LjAgKiAyNTYuMCwgMjU2LjAsIDEuMCApO1xcbmNvbnN0IHZlYzQgYml0X21hc2sgID0gdmVjNCggMC4wLCAxLjAgLyAyNTYuMCwgMS4wIC8gMjU2LjAsIDEuMCAvIDI1Ni4wICk7XFxudmVjNCByZXMgPSBmcmFjdCggZGVwdGggKiBiaXRfc2hpZnQgKTtcXG5yZXMgLT0gcmVzLnh4eXogKiBiaXRfbWFzaztcXG5yZXR1cm4gcmVzO1xcbn1cXG52b2lkIG1haW4oKSB7XFxuZ2xfRnJhZ0RhdGFbIDAgXSA9IHBhY2tfZGVwdGgoIGdsX0ZyYWdDb29yZC56ICk7XFxufVwifX07VEhSRUUuV2ViR0xSZW5kZXJlcj1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7dmFyIGM9YS52ZXJ0aWNlcy5sZW5ndGgsZD1iLm1hdGVyaWFsO2lmKGQuYXR0cmlidXRlcyl7dm9pZCAwPT09YS5fX3dlYmdsQ3VzdG9tQXR0cmlidXRlc0xpc3QmJihhLl9fd2ViZ2xDdXN0b21BdHRyaWJ1dGVzTGlzdD1bXSk7Zm9yKHZhciBlIGluIGQuYXR0cmlidXRlcyl7dmFyIGY9ZC5hdHRyaWJ1dGVzW2VdO2lmKCFmLl9fd2ViZ2xJbml0aWFsaXplZHx8Zi5jcmVhdGVVbmlxdWVCdWZmZXJzKXtmLl9fd2ViZ2xJbml0aWFsaXplZD0hMDt2YXIgaD0xO1widjJcIj09PWYudHlwZT9oPTI6XCJ2M1wiPT09Zi50eXBlP2g9MzpcInY0XCI9PT1mLnR5cGU/aD00OlwiY1wiPT09Zi50eXBlJiYoaD0zKTtmLnNpemU9aDtmLmFycmF5PW5ldyBGbG9hdDMyQXJyYXkoYypoKTtmLmJ1ZmZlcj1qLmNyZWF0ZUJ1ZmZlcigpO2YuYnVmZmVyLmJlbG9uZ3NUb0F0dHJpYnV0ZT1lO2YubmVlZHNVcGRhdGU9ITB9YS5fX3dlYmdsQ3VzdG9tQXR0cmlidXRlc0xpc3QucHVzaChmKX19fVxuZnVuY3Rpb24gYyhhLGIpe3ZhciBjPWIuZ2VvbWV0cnksaD1hLmZhY2VzMyxnPTMqaC5sZW5ndGgsaT0xKmgubGVuZ3RoLGs9MypoLmxlbmd0aCxoPWQoYixhKSxtPWYoaCksbD1lKGgpLG49aC52ZXJ0ZXhDb2xvcnM/aC52ZXJ0ZXhDb2xvcnM6ITE7YS5fX3ZlcnRleEFycmF5PW5ldyBGbG9hdDMyQXJyYXkoMypnKTtsJiYoYS5fX25vcm1hbEFycmF5PW5ldyBGbG9hdDMyQXJyYXkoMypnKSk7Yy5oYXNUYW5nZW50cyYmKGEuX190YW5nZW50QXJyYXk9bmV3IEZsb2F0MzJBcnJheSg0KmcpKTtuJiYoYS5fX2NvbG9yQXJyYXk9bmV3IEZsb2F0MzJBcnJheSgzKmcpKTttJiYoMDxjLmZhY2VWZXJ0ZXhVdnMubGVuZ3RoJiYoYS5fX3V2QXJyYXk9bmV3IEZsb2F0MzJBcnJheSgyKmcpKSwxPGMuZmFjZVZlcnRleFV2cy5sZW5ndGgmJihhLl9fdXYyQXJyYXk9bmV3IEZsb2F0MzJBcnJheSgyKmcpKSk7Yi5nZW9tZXRyeS5za2luV2VpZ2h0cy5sZW5ndGgmJmIuZ2VvbWV0cnkuc2tpbkluZGljZXMubGVuZ3RoJiZcbihhLl9fc2tpbkluZGV4QXJyYXk9bmV3IEZsb2F0MzJBcnJheSg0KmcpLGEuX19za2luV2VpZ2h0QXJyYXk9bmV3IEZsb2F0MzJBcnJheSg0KmcpKTthLl9fZmFjZUFycmF5PW5ldyBVaW50MTZBcnJheSgzKmkpO2EuX19saW5lQXJyYXk9bmV3IFVpbnQxNkFycmF5KDIqayk7aWYoYS5udW1Nb3JwaFRhcmdldHMpe2EuX19tb3JwaFRhcmdldHNBcnJheXM9W107Yz0wO2ZvcihtPWEubnVtTW9ycGhUYXJnZXRzO2M8bTtjKyspYS5fX21vcnBoVGFyZ2V0c0FycmF5cy5wdXNoKG5ldyBGbG9hdDMyQXJyYXkoMypnKSl9aWYoYS5udW1Nb3JwaE5vcm1hbHMpe2EuX19tb3JwaE5vcm1hbHNBcnJheXM9W107Yz0wO2ZvcihtPWEubnVtTW9ycGhOb3JtYWxzO2M8bTtjKyspYS5fX21vcnBoTm9ybWFsc0FycmF5cy5wdXNoKG5ldyBGbG9hdDMyQXJyYXkoMypnKSl9YS5fX3dlYmdsRmFjZUNvdW50PTMqaTthLl9fd2ViZ2xMaW5lQ291bnQ9MiprO2lmKGguYXR0cmlidXRlcyl7dm9pZCAwPT09YS5fX3dlYmdsQ3VzdG9tQXR0cmlidXRlc0xpc3QmJlxuKGEuX193ZWJnbEN1c3RvbUF0dHJpYnV0ZXNMaXN0PVtdKTtmb3IodmFyIHAgaW4gaC5hdHRyaWJ1dGVzKXt2YXIgaT1oLmF0dHJpYnV0ZXNbcF0saz17fSxxO2ZvcihxIGluIGkpa1txXT1pW3FdO2lmKCFrLl9fd2ViZ2xJbml0aWFsaXplZHx8ay5jcmVhdGVVbmlxdWVCdWZmZXJzKWsuX193ZWJnbEluaXRpYWxpemVkPSEwLGM9MSxcInYyXCI9PT1rLnR5cGU/Yz0yOlwidjNcIj09PWsudHlwZT9jPTM6XCJ2NFwiPT09ay50eXBlP2M9NDpcImNcIj09PWsudHlwZSYmKGM9Myksay5zaXplPWMsay5hcnJheT1uZXcgRmxvYXQzMkFycmF5KGcqYyksay5idWZmZXI9ai5jcmVhdGVCdWZmZXIoKSxrLmJ1ZmZlci5iZWxvbmdzVG9BdHRyaWJ1dGU9cCxpLm5lZWRzVXBkYXRlPSEwLGsuX19vcmlnaW5hbD1pO2EuX193ZWJnbEN1c3RvbUF0dHJpYnV0ZXNMaXN0LnB1c2goayl9fWEuX19pbml0dGVkQXJyYXlzPSEwfWZ1bmN0aW9uIGQoYSxiKXtyZXR1cm4gYS5tYXRlcmlhbCBpbnN0YW5jZW9mIFRIUkVFLk1lc2hGYWNlTWF0ZXJpYWw/XG5hLm1hdGVyaWFsLm1hdGVyaWFsc1tiLm1hdGVyaWFsSW5kZXhdOmEubWF0ZXJpYWx9ZnVuY3Rpb24gZShhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsJiYhYS5lbnZNYXB8fGEgaW5zdGFuY2VvZiBUSFJFRS5NZXNoRGVwdGhNYXRlcmlhbD8hMTphJiZ2b2lkIDAhPT1hLnNoYWRpbmcmJmEuc2hhZGluZz09PVRIUkVFLlNtb290aFNoYWRpbmc/VEhSRUUuU21vb3RoU2hhZGluZzpUSFJFRS5GbGF0U2hhZGluZ31mdW5jdGlvbiBmKGEpe3JldHVybiBhLm1hcHx8YS5saWdodE1hcHx8YS5idW1wTWFwfHxhLm5vcm1hbE1hcHx8YS5zcGVjdWxhck1hcHx8YSBpbnN0YW5jZW9mIFRIUkVFLlNoYWRlck1hdGVyaWFsPyEwOiExfWZ1bmN0aW9uIGgoYSl7dmFbYV18fChqLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGEpLHZhW2FdPSEwKX1mdW5jdGlvbiBnKCl7Zm9yKHZhciBhIGluIHZhKXZhW2FdJiYoai5kaXNhYmxlVmVydGV4QXR0cmliQXJyYXkoYSksdmFbYV09XG4hMSl9ZnVuY3Rpb24gaShhLGIpe3JldHVybiBhLnohPT1iLno/Yi56LWEuejphLmlkLWIuaWR9ZnVuY3Rpb24gayhhLGIpe3JldHVybiBiWzBdLWFbMF19ZnVuY3Rpb24gbShhLGIsYyl7aWYoYS5sZW5ndGgpZm9yKHZhciBkPTAsZT1hLmxlbmd0aDtkPGU7ZCsrKWVhPUJhPW51bGwsQWE9JD1VPVk9a2E9R2E9amE9LTEsdGE9ITAsYVtkXS5yZW5kZXIoYixjLHNiLHBiKSxlYT1CYT1udWxsLEFhPSQ9VT1ZPWthPUdhPWphPS0xLHRhPSEwfWZ1bmN0aW9uIGwoYSxiLGMsZCxlLGYsaCxnKXt2YXIgaixpLGssbTtiPyhpPWEubGVuZ3RoLTEsbT1iPS0xKTooaT0wLGI9YS5sZW5ndGgsbT0xKTtmb3IodmFyIGw9aTtsIT09YjtsKz1tKWlmKGo9YVtsXSxqLnJlbmRlcil7aT1qLm9iamVjdDtrPWouYnVmZmVyO2lmKGcpaj1nO2Vsc2V7aj1qW2NdO2lmKCFqKWNvbnRpbnVlO2gmJkwuc2V0QmxlbmRpbmcoai5ibGVuZGluZyxqLmJsZW5kRXF1YXRpb24sai5ibGVuZFNyYyxqLmJsZW5kRHN0KTtcbkwuc2V0RGVwdGhUZXN0KGouZGVwdGhUZXN0KTtMLnNldERlcHRoV3JpdGUoai5kZXB0aFdyaXRlKTtBKGoucG9seWdvbk9mZnNldCxqLnBvbHlnb25PZmZzZXRGYWN0b3Isai5wb2x5Z29uT2Zmc2V0VW5pdHMpfUwuc2V0TWF0ZXJpYWxGYWNlcyhqKTtrIGluc3RhbmNlb2YgVEhSRUUuQnVmZmVyR2VvbWV0cnk/TC5yZW5kZXJCdWZmZXJEaXJlY3QoZCxlLGYsaixrLGkpOkwucmVuZGVyQnVmZmVyKGQsZSxmLGosayxpKX19ZnVuY3Rpb24gcChhLGIsYyxkLGUsZixoKXtmb3IodmFyIGcsaixpPTAsaz1hLmxlbmd0aDtpPGs7aSsrKWlmKGc9YVtpXSxqPWcub2JqZWN0LGoudmlzaWJsZSl7aWYoaClnPWg7ZWxzZXtnPWdbYl07aWYoIWcpY29udGludWU7ZiYmTC5zZXRCbGVuZGluZyhnLmJsZW5kaW5nLGcuYmxlbmRFcXVhdGlvbixnLmJsZW5kU3JjLGcuYmxlbmREc3QpO0wuc2V0RGVwdGhUZXN0KGcuZGVwdGhUZXN0KTtMLnNldERlcHRoV3JpdGUoZy5kZXB0aFdyaXRlKTtBKGcucG9seWdvbk9mZnNldCxcbmcucG9seWdvbk9mZnNldEZhY3RvcixnLnBvbHlnb25PZmZzZXRVbml0cyl9TC5yZW5kZXJJbW1lZGlhdGVPYmplY3QoYyxkLGUsZyxqKX19ZnVuY3Rpb24gdChhLGQpe3ZhciBlLGYsaCxnO2lmKHZvaWQgMD09PWEuX193ZWJnbEluaXQmJihhLl9fd2ViZ2xJbml0PSEwLGEuX21vZGVsVmlld01hdHJpeD1uZXcgVEhSRUUuTWF0cml4NCxhLl9ub3JtYWxNYXRyaXg9bmV3IFRIUkVFLk1hdHJpeDMsdm9pZCAwIT09YS5nZW9tZXRyeSYmdm9pZCAwPT09YS5nZW9tZXRyeS5fX3dlYmdsSW5pdCYmKGEuZ2VvbWV0cnkuX193ZWJnbEluaXQ9ITAsYS5nZW9tZXRyeS5hZGRFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLENiKSksZj1hLmdlb21ldHJ5LHZvaWQgMCE9PWYpKWlmKGYgaW5zdGFuY2VvZiBUSFJFRS5CdWZmZXJHZW9tZXRyeSl7dmFyIGksaztmb3IoaSBpbiBmLmF0dHJpYnV0ZXMpaz1cImluZGV4XCI9PT1pP2ouRUxFTUVOVF9BUlJBWV9CVUZGRVI6ai5BUlJBWV9CVUZGRVIsZz1mLmF0dHJpYnV0ZXNbaV0sXG52b2lkIDA9PT1nLm51bUl0ZW1zJiYoZy5udW1JdGVtcz1nLmFycmF5Lmxlbmd0aCksZy5idWZmZXI9ai5jcmVhdGVCdWZmZXIoKSxqLmJpbmRCdWZmZXIoayxnLmJ1ZmZlciksai5idWZmZXJEYXRhKGssZy5hcnJheSxqLlNUQVRJQ19EUkFXKX1lbHNlIGlmKGEgaW5zdGFuY2VvZiBUSFJFRS5NZXNoKXtoPWEubWF0ZXJpYWw7aWYodm9pZCAwPT09Zi5nZW9tZXRyeUdyb3Vwcyl7aT1mO3ZhciBtLGwsbjtrPXt9O3ZhciBwPWkubW9ycGhUYXJnZXRzLmxlbmd0aCxxPWkubW9ycGhOb3JtYWxzLmxlbmd0aCx0PWggaW5zdGFuY2VvZiBUSFJFRS5NZXNoRmFjZU1hdGVyaWFsO2kuZ2VvbWV0cnlHcm91cHM9e307aD0wO2ZvcihtPWkuZmFjZXMubGVuZ3RoO2g8bTtoKyspbD1pLmZhY2VzW2hdLGw9dD9sLm1hdGVyaWFsSW5kZXg6MCx2b2lkIDA9PT1rW2xdJiYoa1tsXT17aGFzaDpsLGNvdW50ZXI6MH0pLG49a1tsXS5oYXNoK1wiX1wiK2tbbF0uY291bnRlcix2b2lkIDA9PT1pLmdlb21ldHJ5R3JvdXBzW25dJiZcbihpLmdlb21ldHJ5R3JvdXBzW25dPXtmYWNlczM6W10sbWF0ZXJpYWxJbmRleDpsLHZlcnRpY2VzOjAsbnVtTW9ycGhUYXJnZXRzOnAsbnVtTW9ycGhOb3JtYWxzOnF9KSw2NTUzNTxpLmdlb21ldHJ5R3JvdXBzW25dLnZlcnRpY2VzKzMmJihrW2xdLmNvdW50ZXIrPTEsbj1rW2xdLmhhc2grXCJfXCIra1tsXS5jb3VudGVyLHZvaWQgMD09PWkuZ2VvbWV0cnlHcm91cHNbbl0mJihpLmdlb21ldHJ5R3JvdXBzW25dPXtmYWNlczM6W10sbWF0ZXJpYWxJbmRleDpsLHZlcnRpY2VzOjAsbnVtTW9ycGhUYXJnZXRzOnAsbnVtTW9ycGhOb3JtYWxzOnF9KSksaS5nZW9tZXRyeUdyb3Vwc1tuXS5mYWNlczMucHVzaChoKSxpLmdlb21ldHJ5R3JvdXBzW25dLnZlcnRpY2VzKz0zO2kuZ2VvbWV0cnlHcm91cHNMaXN0PVtdO2ZvcihnIGluIGkuZ2VvbWV0cnlHcm91cHMpaS5nZW9tZXRyeUdyb3Vwc1tnXS5pZD1WKyssaS5nZW9tZXRyeUdyb3Vwc0xpc3QucHVzaChpLmdlb21ldHJ5R3JvdXBzW2ddKX1mb3IoZSBpbiBmLmdlb21ldHJ5R3JvdXBzKWlmKGc9XG5mLmdlb21ldHJ5R3JvdXBzW2VdLCFnLl9fd2ViZ2xWZXJ0ZXhCdWZmZXIpe2k9ZztpLl9fd2ViZ2xWZXJ0ZXhCdWZmZXI9ai5jcmVhdGVCdWZmZXIoKTtpLl9fd2ViZ2xOb3JtYWxCdWZmZXI9ai5jcmVhdGVCdWZmZXIoKTtpLl9fd2ViZ2xUYW5nZW50QnVmZmVyPWouY3JlYXRlQnVmZmVyKCk7aS5fX3dlYmdsQ29sb3JCdWZmZXI9ai5jcmVhdGVCdWZmZXIoKTtpLl9fd2ViZ2xVVkJ1ZmZlcj1qLmNyZWF0ZUJ1ZmZlcigpO2kuX193ZWJnbFVWMkJ1ZmZlcj1qLmNyZWF0ZUJ1ZmZlcigpO2kuX193ZWJnbFNraW5JbmRpY2VzQnVmZmVyPWouY3JlYXRlQnVmZmVyKCk7aS5fX3dlYmdsU2tpbldlaWdodHNCdWZmZXI9ai5jcmVhdGVCdWZmZXIoKTtpLl9fd2ViZ2xGYWNlQnVmZmVyPWouY3JlYXRlQnVmZmVyKCk7aS5fX3dlYmdsTGluZUJ1ZmZlcj1qLmNyZWF0ZUJ1ZmZlcigpO3A9az12b2lkIDA7aWYoaS5udW1Nb3JwaFRhcmdldHMpe2kuX193ZWJnbE1vcnBoVGFyZ2V0c0J1ZmZlcnM9W107XG5rPTA7Zm9yKHA9aS5udW1Nb3JwaFRhcmdldHM7azxwO2srKylpLl9fd2ViZ2xNb3JwaFRhcmdldHNCdWZmZXJzLnB1c2goai5jcmVhdGVCdWZmZXIoKSl9aWYoaS5udW1Nb3JwaE5vcm1hbHMpe2kuX193ZWJnbE1vcnBoTm9ybWFsc0J1ZmZlcnM9W107az0wO2ZvcihwPWkubnVtTW9ycGhOb3JtYWxzO2s8cDtrKyspaS5fX3dlYmdsTW9ycGhOb3JtYWxzQnVmZmVycy5wdXNoKGouY3JlYXRlQnVmZmVyKCkpfUwuaW5mby5tZW1vcnkuZ2VvbWV0cmllcysrO2MoZyxhKTtmLnZlcnRpY2VzTmVlZFVwZGF0ZT0hMDtmLm1vcnBoVGFyZ2V0c05lZWRVcGRhdGU9ITA7Zi5lbGVtZW50c05lZWRVcGRhdGU9ITA7Zi51dnNOZWVkVXBkYXRlPSEwO2Yubm9ybWFsc05lZWRVcGRhdGU9ITA7Zi50YW5nZW50c05lZWRVcGRhdGU9ITA7Zi5jb2xvcnNOZWVkVXBkYXRlPSEwfX1lbHNlIGEgaW5zdGFuY2VvZiBUSFJFRS5MaW5lP2YuX193ZWJnbFZlcnRleEJ1ZmZlcnx8KGc9ZixnLl9fd2ViZ2xWZXJ0ZXhCdWZmZXI9XG5qLmNyZWF0ZUJ1ZmZlcigpLGcuX193ZWJnbENvbG9yQnVmZmVyPWouY3JlYXRlQnVmZmVyKCksZy5fX3dlYmdsTGluZURpc3RhbmNlQnVmZmVyPWouY3JlYXRlQnVmZmVyKCksTC5pbmZvLm1lbW9yeS5nZW9tZXRyaWVzKyssZz1mLGk9Zy52ZXJ0aWNlcy5sZW5ndGgsZy5fX3ZlcnRleEFycmF5PW5ldyBGbG9hdDMyQXJyYXkoMyppKSxnLl9fY29sb3JBcnJheT1uZXcgRmxvYXQzMkFycmF5KDMqaSksZy5fX2xpbmVEaXN0YW5jZUFycmF5PW5ldyBGbG9hdDMyQXJyYXkoMSppKSxnLl9fd2ViZ2xMaW5lQ291bnQ9aSxiKGcsYSksZi52ZXJ0aWNlc05lZWRVcGRhdGU9ITAsZi5jb2xvcnNOZWVkVXBkYXRlPSEwLGYubGluZURpc3RhbmNlc05lZWRVcGRhdGU9ITApOmEgaW5zdGFuY2VvZiBUSFJFRS5QYXJ0aWNsZVN5c3RlbSYmIWYuX193ZWJnbFZlcnRleEJ1ZmZlciYmKGc9ZixnLl9fd2ViZ2xWZXJ0ZXhCdWZmZXI9ai5jcmVhdGVCdWZmZXIoKSxnLl9fd2ViZ2xDb2xvckJ1ZmZlcj1qLmNyZWF0ZUJ1ZmZlcigpLFxuTC5pbmZvLm1lbW9yeS5nZW9tZXRyaWVzKyssZz1mLGk9Zy52ZXJ0aWNlcy5sZW5ndGgsZy5fX3ZlcnRleEFycmF5PW5ldyBGbG9hdDMyQXJyYXkoMyppKSxnLl9fY29sb3JBcnJheT1uZXcgRmxvYXQzMkFycmF5KDMqaSksZy5fX3NvcnRBcnJheT1bXSxnLl9fd2ViZ2xQYXJ0aWNsZUNvdW50PWksYihnLGEpLGYudmVydGljZXNOZWVkVXBkYXRlPSEwLGYuY29sb3JzTmVlZFVwZGF0ZT0hMCk7aWYodm9pZCAwPT09YS5fX3dlYmdsQWN0aXZlKXtpZihhIGluc3RhbmNlb2YgVEhSRUUuTWVzaClpZihmPWEuZ2VvbWV0cnksZiBpbnN0YW5jZW9mIFRIUkVFLkJ1ZmZlckdlb21ldHJ5KXMoZC5fX3dlYmdsT2JqZWN0cyxmLGEpO2Vsc2V7aWYoZiBpbnN0YW5jZW9mIFRIUkVFLkdlb21ldHJ5KWZvcihlIGluIGYuZ2VvbWV0cnlHcm91cHMpZz1mLmdlb21ldHJ5R3JvdXBzW2VdLHMoZC5fX3dlYmdsT2JqZWN0cyxnLGEpfWVsc2UgYSBpbnN0YW5jZW9mIFRIUkVFLkxpbmV8fGEgaW5zdGFuY2VvZlxuVEhSRUUuUGFydGljbGVTeXN0ZW0/KGY9YS5nZW9tZXRyeSxzKGQuX193ZWJnbE9iamVjdHMsZixhKSk6YSBpbnN0YW5jZW9mIFRIUkVFLkltbWVkaWF0ZVJlbmRlck9iamVjdHx8YS5pbW1lZGlhdGVSZW5kZXJDYWxsYmFjaz9kLl9fd2ViZ2xPYmplY3RzSW1tZWRpYXRlLnB1c2goe2lkOm51bGwsb2JqZWN0OmEsb3BhcXVlOm51bGwsdHJhbnNwYXJlbnQ6bnVsbCx6OjB9KTphIGluc3RhbmNlb2YgVEhSRUUuU3ByaXRlP2QuX193ZWJnbFNwcml0ZXMucHVzaChhKTphIGluc3RhbmNlb2YgVEhSRUUuTGVuc0ZsYXJlJiZkLl9fd2ViZ2xGbGFyZXMucHVzaChhKTthLl9fd2ViZ2xBY3RpdmU9ITB9fWZ1bmN0aW9uIHMoYSxiLGMpe2EucHVzaCh7aWQ6bnVsbCxidWZmZXI6YixvYmplY3Q6YyxvcGFxdWU6bnVsbCx0cmFuc3BhcmVudDpudWxsLHo6MH0pfWZ1bmN0aW9uIHEoYSl7Zm9yKHZhciBiIGluIGEuYXR0cmlidXRlcylpZihhLmF0dHJpYnV0ZXNbYl0ubmVlZHNVcGRhdGUpcmV0dXJuITA7XG5yZXR1cm4hMX1mdW5jdGlvbiBuKGEpe2Zvcih2YXIgYiBpbiBhLmF0dHJpYnV0ZXMpYS5hdHRyaWJ1dGVzW2JdLm5lZWRzVXBkYXRlPSExfWZ1bmN0aW9uIHUoYSxiKXthIGluc3RhbmNlb2YgVEhSRUUuTWVzaHx8YSBpbnN0YW5jZW9mIFRIUkVFLlBhcnRpY2xlU3lzdGVtfHxhIGluc3RhbmNlb2YgVEhSRUUuTGluZT9yKGIuX193ZWJnbE9iamVjdHMsYSk6YSBpbnN0YW5jZW9mIFRIUkVFLlNwcml0ZT92KGIuX193ZWJnbFNwcml0ZXMsYSk6YSBpbnN0YW5jZW9mIFRIUkVFLkxlbnNGbGFyZT92KGIuX193ZWJnbEZsYXJlcyxhKTooYSBpbnN0YW5jZW9mIFRIUkVFLkltbWVkaWF0ZVJlbmRlck9iamVjdHx8YS5pbW1lZGlhdGVSZW5kZXJDYWxsYmFjaykmJnIoYi5fX3dlYmdsT2JqZWN0c0ltbWVkaWF0ZSxhKTtkZWxldGUgYS5fX3dlYmdsQWN0aXZlfWZ1bmN0aW9uIHIoYSxiKXtmb3IodmFyIGM9YS5sZW5ndGgtMTswPD1jO2MtLSlhW2NdLm9iamVjdD09PWImJmEuc3BsaWNlKGMsMSl9XG5mdW5jdGlvbiB2KGEsYil7Zm9yKHZhciBjPWEubGVuZ3RoLTE7MDw9YztjLS0pYVtjXT09PWImJmEuc3BsaWNlKGMsMSl9ZnVuY3Rpb24geihhLGIsYyxkLGUpe1A9MDtkLm5lZWRzVXBkYXRlJiYoZC5wcm9ncmFtJiZHYihkKSxMLmluaXRNYXRlcmlhbChkLGIsYyxlKSxkLm5lZWRzVXBkYXRlPSExKTtkLm1vcnBoVGFyZ2V0cyYmIWUuX193ZWJnbE1vcnBoVGFyZ2V0SW5mbHVlbmNlcyYmKGUuX193ZWJnbE1vcnBoVGFyZ2V0SW5mbHVlbmNlcz1uZXcgRmxvYXQzMkFycmF5KEwubWF4TW9ycGhUYXJnZXRzKSk7dmFyIGY9ITEsaD1kLnByb2dyYW0sZz1oLnVuaWZvcm1zLGk9ZC51bmlmb3JtcztoIT09QmEmJihqLnVzZVByb2dyYW0oaCksQmE9aCxmPSEwKTtkLmlkIT09QWEmJihBYT1kLmlkLGY9ITApO2lmKGZ8fGEhPT1lYSlqLnVuaWZvcm1NYXRyaXg0ZnYoZy5wcm9qZWN0aW9uTWF0cml4LCExLGEucHJvamVjdGlvbk1hdHJpeC5lbGVtZW50cyksYSE9PWVhJiYoZWE9YSk7aWYoZC5za2lubmluZylpZih5YiYmXG5lLnVzZVZlcnRleFRleHR1cmUpe2lmKG51bGwhPT1nLmJvbmVUZXh0dXJlKXt2YXIgaz1HKCk7ai51bmlmb3JtMWkoZy5ib25lVGV4dHVyZSxrKTtMLnNldFRleHR1cmUoZS5ib25lVGV4dHVyZSxrKX1udWxsIT09Zy5ib25lVGV4dHVyZVdpZHRoJiZqLnVuaWZvcm0xaShnLmJvbmVUZXh0dXJlV2lkdGgsZS5ib25lVGV4dHVyZVdpZHRoKTtudWxsIT09Zy5ib25lVGV4dHVyZUhlaWdodCYmai51bmlmb3JtMWkoZy5ib25lVGV4dHVyZUhlaWdodCxlLmJvbmVUZXh0dXJlSGVpZ2h0KX1lbHNlIG51bGwhPT1nLmJvbmVHbG9iYWxNYXRyaWNlcyYmai51bmlmb3JtTWF0cml4NGZ2KGcuYm9uZUdsb2JhbE1hdHJpY2VzLCExLGUuYm9uZU1hdHJpY2VzKTtpZihmKXtjJiZkLmZvZyYmKGkuZm9nQ29sb3IudmFsdWU9Yy5jb2xvcixjIGluc3RhbmNlb2YgVEhSRUUuRm9nPyhpLmZvZ05lYXIudmFsdWU9Yy5uZWFyLGkuZm9nRmFyLnZhbHVlPWMuZmFyKTpjIGluc3RhbmNlb2YgVEhSRUUuRm9nRXhwMiYmXG4oaS5mb2dEZW5zaXR5LnZhbHVlPWMuZGVuc2l0eSkpO2lmKGQgaW5zdGFuY2VvZiBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbHx8ZCBpbnN0YW5jZW9mIFRIUkVFLk1lc2hMYW1iZXJ0TWF0ZXJpYWx8fGQubGlnaHRzKXtpZih0YSl7Zm9yKHZhciBtLGw9az0wLG49MCxwLHEsdCxyPVBhLHM9ci5kaXJlY3Rpb25hbC5jb2xvcnMsdT1yLmRpcmVjdGlvbmFsLnBvc2l0aW9ucyx2PXIucG9pbnQuY29sb3JzLHo9ci5wb2ludC5wb3NpdGlvbnMseD1yLnBvaW50LmRpc3RhbmNlcyxBPXIuc3BvdC5jb2xvcnMsRT1yLnNwb3QucG9zaXRpb25zLEQ9ci5zcG90LmRpc3RhbmNlcyxLPXIuc3BvdC5kaXJlY3Rpb25zLE89ci5zcG90LmFuZ2xlc0NvcyxDPXIuc3BvdC5leHBvbmVudHMsSj1yLmhlbWkuc2t5Q29sb3JzLFY9ci5oZW1pLmdyb3VuZENvbG9ycyxNPXIuaGVtaS5wb3NpdGlvbnMsUT0wLFU9MCxZPTAsemE9MCwkPTAsZGM9MCxYPTAsVz0wLFI9bT0wLGM9dD1SPTAsZj1iLmxlbmd0aDtjPGY7YysrKW09XG5iW2NdLG0ub25seVNoYWRvd3x8KHA9bS5jb2xvcixxPW0uaW50ZW5zaXR5LHQ9bS5kaXN0YW5jZSxtIGluc3RhbmNlb2YgVEhSRUUuQW1iaWVudExpZ2h0P20udmlzaWJsZSYmKEwuZ2FtbWFJbnB1dD8oays9cC5yKnAucixsKz1wLmcqcC5nLG4rPXAuYipwLmIpOihrKz1wLnIsbCs9cC5nLG4rPXAuYikpOm0gaW5zdGFuY2VvZiBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0PygkKz0xLG0udmlzaWJsZSYmKGZhLnNldEZyb21NYXRyaXhQb3NpdGlvbihtLm1hdHJpeFdvcmxkKSxyYS5zZXRGcm9tTWF0cml4UG9zaXRpb24obS50YXJnZXQubWF0cml4V29ybGQpLGZhLnN1YihyYSksZmEubm9ybWFsaXplKCksMD09PWZhLngmJjA9PT1mYS55JiYwPT09ZmEuenx8KG09MypRLHVbbV09ZmEueCx1W20rMV09ZmEueSx1W20rMl09ZmEueixMLmdhbW1hSW5wdXQ/dyhzLG0scCxxKnEpOnkocyxtLHAscSksUSs9MSkpKTptIGluc3RhbmNlb2YgVEhSRUUuUG9pbnRMaWdodD8oZGMrPTEsbS52aXNpYmxlJiZcbihSPTMqVSxMLmdhbW1hSW5wdXQ/dyh2LFIscCxxKnEpOnkodixSLHAscSkscmEuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKG0ubWF0cml4V29ybGQpLHpbUl09cmEueCx6W1IrMV09cmEueSx6W1IrMl09cmEueix4W1VdPXQsVSs9MSkpOm0gaW5zdGFuY2VvZiBUSFJFRS5TcG90TGlnaHQ/KFgrPTEsbS52aXNpYmxlJiYoUj0zKlksTC5nYW1tYUlucHV0P3coQSxSLHAscSpxKTp5KEEsUixwLHEpLHJhLnNldEZyb21NYXRyaXhQb3NpdGlvbihtLm1hdHJpeFdvcmxkKSxFW1JdPXJhLngsRVtSKzFdPXJhLnksRVtSKzJdPXJhLnosRFtZXT10LGZhLmNvcHkocmEpLHJhLnNldEZyb21NYXRyaXhQb3NpdGlvbihtLnRhcmdldC5tYXRyaXhXb3JsZCksZmEuc3ViKHJhKSxmYS5ub3JtYWxpemUoKSxLW1JdPWZhLngsS1tSKzFdPWZhLnksS1tSKzJdPWZhLnosT1tZXT1NYXRoLmNvcyhtLmFuZ2xlKSxDW1ldPW0uZXhwb25lbnQsWSs9MSkpOm0gaW5zdGFuY2VvZiBUSFJFRS5IZW1pc3BoZXJlTGlnaHQmJlxuKFcrPTEsbS52aXNpYmxlJiYoZmEuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKG0ubWF0cml4V29ybGQpLGZhLm5vcm1hbGl6ZSgpLDA9PT1mYS54JiYwPT09ZmEueSYmMD09PWZhLnp8fCh0PTMqemEsTVt0XT1mYS54LE1bdCsxXT1mYS55LE1bdCsyXT1mYS56LHA9bS5jb2xvcixtPW0uZ3JvdW5kQ29sb3IsTC5nYW1tYUlucHV0PyhxKj1xLHcoSix0LHAscSksdyhWLHQsbSxxKSk6KHkoSix0LHAscSkseShWLHQsbSxxKSksemErPTEpKSkpO2M9MypRO2ZvcihmPU1hdGgubWF4KHMubGVuZ3RoLDMqJCk7YzxmO2MrKylzW2NdPTA7Yz0zKlU7Zm9yKGY9TWF0aC5tYXgodi5sZW5ndGgsMypkYyk7YzxmO2MrKyl2W2NdPTA7Yz0zKlk7Zm9yKGY9TWF0aC5tYXgoQS5sZW5ndGgsMypYKTtjPGY7YysrKUFbY109MDtjPTMqemE7Zm9yKGY9TWF0aC5tYXgoSi5sZW5ndGgsMypXKTtjPGY7YysrKUpbY109MDtjPTMqemE7Zm9yKGY9TWF0aC5tYXgoVi5sZW5ndGgsMypXKTtjPGY7YysrKVZbY109MDtyLmRpcmVjdGlvbmFsLmxlbmd0aD1cblE7ci5wb2ludC5sZW5ndGg9VTtyLnNwb3QubGVuZ3RoPVk7ci5oZW1pLmxlbmd0aD16YTtyLmFtYmllbnRbMF09aztyLmFtYmllbnRbMV09bDtyLmFtYmllbnRbMl09bjt0YT0hMX1jPVBhO2kuYW1iaWVudExpZ2h0Q29sb3IudmFsdWU9Yy5hbWJpZW50O2kuZGlyZWN0aW9uYWxMaWdodENvbG9yLnZhbHVlPWMuZGlyZWN0aW9uYWwuY29sb3JzO2kuZGlyZWN0aW9uYWxMaWdodERpcmVjdGlvbi52YWx1ZT1jLmRpcmVjdGlvbmFsLnBvc2l0aW9ucztpLnBvaW50TGlnaHRDb2xvci52YWx1ZT1jLnBvaW50LmNvbG9ycztpLnBvaW50TGlnaHRQb3NpdGlvbi52YWx1ZT1jLnBvaW50LnBvc2l0aW9ucztpLnBvaW50TGlnaHREaXN0YW5jZS52YWx1ZT1jLnBvaW50LmRpc3RhbmNlcztpLnNwb3RMaWdodENvbG9yLnZhbHVlPWMuc3BvdC5jb2xvcnM7aS5zcG90TGlnaHRQb3NpdGlvbi52YWx1ZT1jLnNwb3QucG9zaXRpb25zO2kuc3BvdExpZ2h0RGlzdGFuY2UudmFsdWU9Yy5zcG90LmRpc3RhbmNlcztcbmkuc3BvdExpZ2h0RGlyZWN0aW9uLnZhbHVlPWMuc3BvdC5kaXJlY3Rpb25zO2kuc3BvdExpZ2h0QW5nbGVDb3MudmFsdWU9Yy5zcG90LmFuZ2xlc0NvcztpLnNwb3RMaWdodEV4cG9uZW50LnZhbHVlPWMuc3BvdC5leHBvbmVudHM7aS5oZW1pc3BoZXJlTGlnaHRTa3lDb2xvci52YWx1ZT1jLmhlbWkuc2t5Q29sb3JzO2kuaGVtaXNwaGVyZUxpZ2h0R3JvdW5kQ29sb3IudmFsdWU9Yy5oZW1pLmdyb3VuZENvbG9ycztpLmhlbWlzcGhlcmVMaWdodERpcmVjdGlvbi52YWx1ZT1jLmhlbWkucG9zaXRpb25zfWlmKGQgaW5zdGFuY2VvZiBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbHx8ZCBpbnN0YW5jZW9mIFRIUkVFLk1lc2hMYW1iZXJ0TWF0ZXJpYWx8fGQgaW5zdGFuY2VvZiBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbCl7aS5vcGFjaXR5LnZhbHVlPWQub3BhY2l0eTtMLmdhbW1hSW5wdXQ/aS5kaWZmdXNlLnZhbHVlLmNvcHlHYW1tYVRvTGluZWFyKGQuY29sb3IpOmkuZGlmZnVzZS52YWx1ZT1cbmQuY29sb3I7aS5tYXAudmFsdWU9ZC5tYXA7aS5saWdodE1hcC52YWx1ZT1kLmxpZ2h0TWFwO2kuc3BlY3VsYXJNYXAudmFsdWU9ZC5zcGVjdWxhck1hcDtkLmJ1bXBNYXAmJihpLmJ1bXBNYXAudmFsdWU9ZC5idW1wTWFwLGkuYnVtcFNjYWxlLnZhbHVlPWQuYnVtcFNjYWxlKTtkLm5vcm1hbE1hcCYmKGkubm9ybWFsTWFwLnZhbHVlPWQubm9ybWFsTWFwLGkubm9ybWFsU2NhbGUudmFsdWUuY29weShkLm5vcm1hbFNjYWxlKSk7dmFyIGJhO2QubWFwP2JhPWQubWFwOmQuc3BlY3VsYXJNYXA/YmE9ZC5zcGVjdWxhck1hcDpkLm5vcm1hbE1hcD9iYT1kLm5vcm1hbE1hcDpkLmJ1bXBNYXAmJihiYT1kLmJ1bXBNYXApO3ZvaWQgMCE9PWJhJiYoYz1iYS5vZmZzZXQsYmE9YmEucmVwZWF0LGkub2Zmc2V0UmVwZWF0LnZhbHVlLnNldChjLngsYy55LGJhLngsYmEueSkpO2kuZW52TWFwLnZhbHVlPWQuZW52TWFwO2kuZmxpcEVudk1hcC52YWx1ZT1kLmVudk1hcCBpbnN0YW5jZW9mIFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0Q3ViZT9cbjE6LTE7aS5yZWZsZWN0aXZpdHkudmFsdWU9ZC5yZWZsZWN0aXZpdHk7aS5yZWZyYWN0aW9uUmF0aW8udmFsdWU9ZC5yZWZyYWN0aW9uUmF0aW87aS5jb21iaW5lLnZhbHVlPWQuY29tYmluZTtpLnVzZVJlZnJhY3QudmFsdWU9ZC5lbnZNYXAmJmQuZW52TWFwLm1hcHBpbmcgaW5zdGFuY2VvZiBUSFJFRS5DdWJlUmVmcmFjdGlvbk1hcHBpbmd9ZCBpbnN0YW5jZW9mIFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsPyhpLmRpZmZ1c2UudmFsdWU9ZC5jb2xvcixpLm9wYWNpdHkudmFsdWU9ZC5vcGFjaXR5KTpkIGluc3RhbmNlb2YgVEhSRUUuTGluZURhc2hlZE1hdGVyaWFsPyhpLmRpZmZ1c2UudmFsdWU9ZC5jb2xvcixpLm9wYWNpdHkudmFsdWU9ZC5vcGFjaXR5LGkuZGFzaFNpemUudmFsdWU9ZC5kYXNoU2l6ZSxpLnRvdGFsU2l6ZS52YWx1ZT1kLmRhc2hTaXplK2QuZ2FwU2l6ZSxpLnNjYWxlLnZhbHVlPWQuc2NhbGUpOmQgaW5zdGFuY2VvZiBUSFJFRS5QYXJ0aWNsZVN5c3RlbU1hdGVyaWFsP1xuKGkucHNDb2xvci52YWx1ZT1kLmNvbG9yLGkub3BhY2l0eS52YWx1ZT1kLm9wYWNpdHksaS5zaXplLnZhbHVlPWQuc2l6ZSxpLnNjYWxlLnZhbHVlPUIuaGVpZ2h0LzIsaS5tYXAudmFsdWU9ZC5tYXApOmQgaW5zdGFuY2VvZiBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbD8oaS5zaGluaW5lc3MudmFsdWU9ZC5zaGluaW5lc3MsTC5nYW1tYUlucHV0PyhpLmFtYmllbnQudmFsdWUuY29weUdhbW1hVG9MaW5lYXIoZC5hbWJpZW50KSxpLmVtaXNzaXZlLnZhbHVlLmNvcHlHYW1tYVRvTGluZWFyKGQuZW1pc3NpdmUpLGkuc3BlY3VsYXIudmFsdWUuY29weUdhbW1hVG9MaW5lYXIoZC5zcGVjdWxhcikpOihpLmFtYmllbnQudmFsdWU9ZC5hbWJpZW50LGkuZW1pc3NpdmUudmFsdWU9ZC5lbWlzc2l2ZSxpLnNwZWN1bGFyLnZhbHVlPWQuc3BlY3VsYXIpLGQud3JhcEFyb3VuZCYmaS53cmFwUkdCLnZhbHVlLmNvcHkoZC53cmFwUkdCKSk6ZCBpbnN0YW5jZW9mIFRIUkVFLk1lc2hMYW1iZXJ0TWF0ZXJpYWw/XG4oTC5nYW1tYUlucHV0PyhpLmFtYmllbnQudmFsdWUuY29weUdhbW1hVG9MaW5lYXIoZC5hbWJpZW50KSxpLmVtaXNzaXZlLnZhbHVlLmNvcHlHYW1tYVRvTGluZWFyKGQuZW1pc3NpdmUpKTooaS5hbWJpZW50LnZhbHVlPWQuYW1iaWVudCxpLmVtaXNzaXZlLnZhbHVlPWQuZW1pc3NpdmUpLGQud3JhcEFyb3VuZCYmaS53cmFwUkdCLnZhbHVlLmNvcHkoZC53cmFwUkdCKSk6ZCBpbnN0YW5jZW9mIFRIUkVFLk1lc2hEZXB0aE1hdGVyaWFsPyhpLm1OZWFyLnZhbHVlPWEubmVhcixpLm1GYXIudmFsdWU9YS5mYXIsaS5vcGFjaXR5LnZhbHVlPWQub3BhY2l0eSk6ZCBpbnN0YW5jZW9mIFRIUkVFLk1lc2hOb3JtYWxNYXRlcmlhbCYmKGkub3BhY2l0eS52YWx1ZT1kLm9wYWNpdHkpO2lmKGUucmVjZWl2ZVNoYWRvdyYmIWQuX3NoYWRvd1Bhc3MmJmkuc2hhZG93TWF0cml4KXtjPWJhPTA7Zm9yKGY9Yi5sZW5ndGg7YzxmO2MrKylpZihrPWJbY10say5jYXN0U2hhZG93JiYoayBpbnN0YW5jZW9mXG5USFJFRS5TcG90TGlnaHR8fGsgaW5zdGFuY2VvZiBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0JiYhay5zaGFkb3dDYXNjYWRlKSlpLnNoYWRvd01hcC52YWx1ZVtiYV09ay5zaGFkb3dNYXAsaS5zaGFkb3dNYXBTaXplLnZhbHVlW2JhXT1rLnNoYWRvd01hcFNpemUsaS5zaGFkb3dNYXRyaXgudmFsdWVbYmFdPWsuc2hhZG93TWF0cml4LGkuc2hhZG93RGFya25lc3MudmFsdWVbYmFdPWsuc2hhZG93RGFya25lc3MsaS5zaGFkb3dCaWFzLnZhbHVlW2JhXT1rLnNoYWRvd0JpYXMsYmErK31iPWQudW5pZm9ybXNMaXN0O2k9MDtmb3IoYmE9Yi5sZW5ndGg7aTxiYTtpKyspaWYoZj1oLnVuaWZvcm1zW2JbaV1bMV1dKWlmKGM9YltpXVswXSxsPWMudHlwZSxrPWMudmFsdWUsXCJpXCI9PT1sKWoudW5pZm9ybTFpKGYsayk7ZWxzZSBpZihcImZcIj09PWwpai51bmlmb3JtMWYoZixrKTtlbHNlIGlmKFwidjJcIj09PWwpai51bmlmb3JtMmYoZixrLngsay55KTtlbHNlIGlmKFwidjNcIj09PWwpai51bmlmb3JtM2YoZixcbmsueCxrLnksay56KTtlbHNlIGlmKFwidjRcIj09PWwpai51bmlmb3JtNGYoZixrLngsay55LGsueixrLncpO2Vsc2UgaWYoXCJjXCI9PT1sKWoudW5pZm9ybTNmKGYsay5yLGsuZyxrLmIpO2Vsc2UgaWYoXCJpdjFcIj09PWwpai51bmlmb3JtMWl2KGYsayk7ZWxzZSBpZihcIml2XCI9PT1sKWoudW5pZm9ybTNpdihmLGspO2Vsc2UgaWYoXCJmdjFcIj09PWwpai51bmlmb3JtMWZ2KGYsayk7ZWxzZSBpZihcImZ2XCI9PT1sKWoudW5pZm9ybTNmdihmLGspO2Vsc2UgaWYoXCJ2MnZcIj09PWwpe3ZvaWQgMD09PWMuX2FycmF5JiYoYy5fYXJyYXk9bmV3IEZsb2F0MzJBcnJheSgyKmsubGVuZ3RoKSk7bD0wO2ZvcihuPWsubGVuZ3RoO2w8bjtsKyspcj0yKmwsYy5fYXJyYXlbcl09a1tsXS54LGMuX2FycmF5W3IrMV09a1tsXS55O2oudW5pZm9ybTJmdihmLGMuX2FycmF5KX1lbHNlIGlmKFwidjN2XCI9PT1sKXt2b2lkIDA9PT1jLl9hcnJheSYmKGMuX2FycmF5PW5ldyBGbG9hdDMyQXJyYXkoMyprLmxlbmd0aCkpO2w9XG4wO2ZvcihuPWsubGVuZ3RoO2w8bjtsKyspcj0zKmwsYy5fYXJyYXlbcl09a1tsXS54LGMuX2FycmF5W3IrMV09a1tsXS55LGMuX2FycmF5W3IrMl09a1tsXS56O2oudW5pZm9ybTNmdihmLGMuX2FycmF5KX1lbHNlIGlmKFwidjR2XCI9PT1sKXt2b2lkIDA9PT1jLl9hcnJheSYmKGMuX2FycmF5PW5ldyBGbG9hdDMyQXJyYXkoNCprLmxlbmd0aCkpO2w9MDtmb3Iobj1rLmxlbmd0aDtsPG47bCsrKXI9NCpsLGMuX2FycmF5W3JdPWtbbF0ueCxjLl9hcnJheVtyKzFdPWtbbF0ueSxjLl9hcnJheVtyKzJdPWtbbF0ueixjLl9hcnJheVtyKzNdPWtbbF0udztqLnVuaWZvcm00ZnYoZixjLl9hcnJheSl9ZWxzZSBpZihcIm00XCI9PT1sKXZvaWQgMD09PWMuX2FycmF5JiYoYy5fYXJyYXk9bmV3IEZsb2F0MzJBcnJheSgxNikpLGsuZmxhdHRlblRvQXJyYXkoYy5fYXJyYXkpLGoudW5pZm9ybU1hdHJpeDRmdihmLCExLGMuX2FycmF5KTtlbHNlIGlmKFwibTR2XCI9PT1sKXt2b2lkIDA9PT1jLl9hcnJheSYmXG4oYy5fYXJyYXk9bmV3IEZsb2F0MzJBcnJheSgxNiprLmxlbmd0aCkpO2w9MDtmb3Iobj1rLmxlbmd0aDtsPG47bCsrKWtbbF0uZmxhdHRlblRvQXJyYXlPZmZzZXQoYy5fYXJyYXksMTYqbCk7ai51bmlmb3JtTWF0cml4NGZ2KGYsITEsYy5fYXJyYXkpfWVsc2UgaWYoXCJ0XCI9PT1sKXtpZihyPWssaz1HKCksai51bmlmb3JtMWkoZixrKSxyKWlmKHIuaW1hZ2UgaW5zdGFuY2VvZiBBcnJheSYmNj09PXIuaW1hZ2UubGVuZ3RoKXtpZihjPXIsZj1rLDY9PT1jLmltYWdlLmxlbmd0aClpZihjLm5lZWRzVXBkYXRlKXtjLmltYWdlLl9fd2ViZ2xUZXh0dXJlQ3ViZXx8KGMuYWRkRXZlbnRMaXN0ZW5lcihcImRpc3Bvc2VcIixEYiksYy5pbWFnZS5fX3dlYmdsVGV4dHVyZUN1YmU9ai5jcmVhdGVUZXh0dXJlKCksTC5pbmZvLm1lbW9yeS50ZXh0dXJlcysrKTtqLmFjdGl2ZVRleHR1cmUoai5URVhUVVJFMCtmKTtqLmJpbmRUZXh0dXJlKGouVEVYVFVSRV9DVUJFX01BUCxjLmltYWdlLl9fd2ViZ2xUZXh0dXJlQ3ViZSk7XG5qLnBpeGVsU3RvcmVpKGouVU5QQUNLX0ZMSVBfWV9XRUJHTCxjLmZsaXBZKTtmPWMgaW5zdGFuY2VvZiBUSFJFRS5Db21wcmVzc2VkVGV4dHVyZTtrPVtdO2ZvcihsPTA7Nj5sO2wrKylMLmF1dG9TY2FsZUN1YmVtYXBzJiYhZj8obj1rLHI9bCxzPWMuaW1hZ2VbbF0sdj1hYyxzLndpZHRoPD12JiZzLmhlaWdodDw9dnx8KHo9TWF0aC5tYXgocy53aWR0aCxzLmhlaWdodCksdT1NYXRoLmZsb29yKHMud2lkdGgqdi96KSx2PU1hdGguZmxvb3Iocy5oZWlnaHQqdi96KSx6PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksei53aWR0aD11LHouaGVpZ2h0PXYsei5nZXRDb250ZXh0KFwiMmRcIikuZHJhd0ltYWdlKHMsMCwwLHMud2lkdGgscy5oZWlnaHQsMCwwLHUsdikscz16KSxuW3JdPXMpOmtbbF09Yy5pbWFnZVtsXTtsPWtbMF07bj0wPT09KGwud2lkdGgmbC53aWR0aC0xKSYmMD09PShsLmhlaWdodCZsLmhlaWdodC0xKTtyPUkoYy5mb3JtYXQpO3M9SShjLnR5cGUpO0Yoai5URVhUVVJFX0NVQkVfTUFQLFxuYyxuKTtmb3IobD0wOzY+bDtsKyspaWYoZil7dj1rW2xdLm1pcG1hcHM7ej0wO2Zvcih4PXYubGVuZ3RoO3o8eDt6KyspdT12W3pdLGMuZm9ybWF0IT09VEhSRUUuUkdCQUZvcm1hdD9qLmNvbXByZXNzZWRUZXhJbWFnZTJEKGouVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9YK2wseixyLHUud2lkdGgsdS5oZWlnaHQsMCx1LmRhdGEpOmoudGV4SW1hZ2UyRChqLlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCtsLHoscix1LndpZHRoLHUuaGVpZ2h0LDAscixzLHUuZGF0YSl9ZWxzZSBqLnRleEltYWdlMkQoai5URVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1grbCwwLHIscixzLGtbbF0pO2MuZ2VuZXJhdGVNaXBtYXBzJiZuJiZqLmdlbmVyYXRlTWlwbWFwKGouVEVYVFVSRV9DVUJFX01BUCk7Yy5uZWVkc1VwZGF0ZT0hMTtpZihjLm9uVXBkYXRlKWMub25VcGRhdGUoKX1lbHNlIGouYWN0aXZlVGV4dHVyZShqLlRFWFRVUkUwK2YpLGouYmluZFRleHR1cmUoai5URVhUVVJFX0NVQkVfTUFQLFxuYy5pbWFnZS5fX3dlYmdsVGV4dHVyZUN1YmUpfWVsc2UgciBpbnN0YW5jZW9mIFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0Q3ViZT8oYz1yLGouYWN0aXZlVGV4dHVyZShqLlRFWFRVUkUwK2spLGouYmluZFRleHR1cmUoai5URVhUVVJFX0NVQkVfTUFQLGMuX193ZWJnbFRleHR1cmUpKTpMLnNldFRleHR1cmUocixrKX1lbHNlIGlmKFwidHZcIj09PWwpe3ZvaWQgMD09PWMuX2FycmF5JiYoYy5fYXJyYXk9W10pO2w9MDtmb3Iobj1jLnZhbHVlLmxlbmd0aDtsPG47bCsrKWMuX2FycmF5W2xdPUcoKTtqLnVuaWZvcm0xaXYoZixjLl9hcnJheSk7bD0wO2ZvcihuPWMudmFsdWUubGVuZ3RoO2w8bjtsKyspcj1jLnZhbHVlW2xdLGs9Yy5fYXJyYXlbbF0sciYmTC5zZXRUZXh0dXJlKHIsayl9ZWxzZSBjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBVbmtub3duIHVuaWZvcm0gdHlwZTogXCIrbCk7aWYoKGQgaW5zdGFuY2VvZiBUSFJFRS5TaGFkZXJNYXRlcmlhbHx8ZCBpbnN0YW5jZW9mXG5USFJFRS5NZXNoUGhvbmdNYXRlcmlhbHx8ZC5lbnZNYXApJiZudWxsIT09Zy5jYW1lcmFQb3NpdGlvbilyYS5zZXRGcm9tTWF0cml4UG9zaXRpb24oYS5tYXRyaXhXb3JsZCksai51bmlmb3JtM2YoZy5jYW1lcmFQb3NpdGlvbixyYS54LHJhLnkscmEueik7KGQgaW5zdGFuY2VvZiBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbHx8ZCBpbnN0YW5jZW9mIFRIUkVFLk1lc2hMYW1iZXJ0TWF0ZXJpYWx8fGQgaW5zdGFuY2VvZiBUSFJFRS5TaGFkZXJNYXRlcmlhbHx8ZC5za2lubmluZykmJm51bGwhPT1nLnZpZXdNYXRyaXgmJmoudW5pZm9ybU1hdHJpeDRmdihnLnZpZXdNYXRyaXgsITEsYS5tYXRyaXhXb3JsZEludmVyc2UuZWxlbWVudHMpfWoudW5pZm9ybU1hdHJpeDRmdihnLm1vZGVsVmlld01hdHJpeCwhMSxlLl9tb2RlbFZpZXdNYXRyaXguZWxlbWVudHMpO2cubm9ybWFsTWF0cml4JiZqLnVuaWZvcm1NYXRyaXgzZnYoZy5ub3JtYWxNYXRyaXgsITEsZS5fbm9ybWFsTWF0cml4LmVsZW1lbnRzKTtcbm51bGwhPT1nLm1vZGVsTWF0cml4JiZqLnVuaWZvcm1NYXRyaXg0ZnYoZy5tb2RlbE1hdHJpeCwhMSxlLm1hdHJpeFdvcmxkLmVsZW1lbnRzKTtyZXR1cm4gaH1mdW5jdGlvbiBHKCl7dmFyIGE9UDthPj1NYiYmY29uc29sZS53YXJuKFwiV2ViR0xSZW5kZXJlcjogdHJ5aW5nIHRvIHVzZSBcIithK1wiIHRleHR1cmUgdW5pdHMgd2hpbGUgdGhpcyBHUFUgc3VwcG9ydHMgb25seSBcIitNYik7UCs9MTtyZXR1cm4gYX1mdW5jdGlvbiB3KGEsYixjLGQpe2FbYl09Yy5yKmMucipkO2FbYisxXT1jLmcqYy5nKmQ7YVtiKzJdPWMuYipjLmIqZH1mdW5jdGlvbiB5KGEsYixjLGQpe2FbYl09Yy5yKmQ7YVtiKzFdPWMuZypkO2FbYisyXT1jLmIqZH1mdW5jdGlvbiBFKGEpe2EhPT13YSYmKGoubGluZVdpZHRoKGEpLHdhPWEpfWZ1bmN0aW9uIEEoYSxiLGMpe0RhIT09YSYmKGE/ai5lbmFibGUoai5QT0xZR09OX09GRlNFVF9GSUxMKTpqLmRpc2FibGUoai5QT0xZR09OX09GRlNFVF9GSUxMKSxEYT1hKTtcbmlmKGEmJihVYSE9PWJ8fFFhIT09Yykpai5wb2x5Z29uT2Zmc2V0KGIsYyksVWE9YixRYT1jfWZ1bmN0aW9uIEsoYSl7Zm9yKHZhciBhPWEuc3BsaXQoXCJcXG5cIiksYj0wLGM9YS5sZW5ndGg7YjxjO2IrKylhW2JdPWIrMStcIjogXCIrYVtiXTtyZXR1cm4gYS5qb2luKFwiXFxuXCIpfWZ1bmN0aW9uIEQoYSxiKXt2YXIgYztcImZyYWdtZW50XCI9PT1hP2M9ai5jcmVhdGVTaGFkZXIoai5GUkFHTUVOVF9TSEFERVIpOlwidmVydGV4XCI9PT1hJiYoYz1qLmNyZWF0ZVNoYWRlcihqLlZFUlRFWF9TSEFERVIpKTtqLnNoYWRlclNvdXJjZShjLGIpO2ouY29tcGlsZVNoYWRlcihjKTtyZXR1cm4hai5nZXRTaGFkZXJQYXJhbWV0ZXIoYyxqLkNPTVBJTEVfU1RBVFVTKT8oY29uc29sZS5lcnJvcihqLmdldFNoYWRlckluZm9Mb2coYykpLGNvbnNvbGUuZXJyb3IoSyhiKSksbnVsbCk6Y31mdW5jdGlvbiBGKGEsYixjKXtjPyhqLnRleFBhcmFtZXRlcmkoYSxqLlRFWFRVUkVfV1JBUF9TLEkoYi53cmFwUykpLGoudGV4UGFyYW1ldGVyaShhLFxuai5URVhUVVJFX1dSQVBfVCxJKGIud3JhcFQpKSxqLnRleFBhcmFtZXRlcmkoYSxqLlRFWFRVUkVfTUFHX0ZJTFRFUixJKGIubWFnRmlsdGVyKSksai50ZXhQYXJhbWV0ZXJpKGEsai5URVhUVVJFX01JTl9GSUxURVIsSShiLm1pbkZpbHRlcikpKTooai50ZXhQYXJhbWV0ZXJpKGEsai5URVhUVVJFX1dSQVBfUyxqLkNMQU1QX1RPX0VER0UpLGoudGV4UGFyYW1ldGVyaShhLGouVEVYVFVSRV9XUkFQX1Qsai5DTEFNUF9UT19FREdFKSxqLnRleFBhcmFtZXRlcmkoYSxqLlRFWFRVUkVfTUFHX0ZJTFRFUix4KGIubWFnRmlsdGVyKSksai50ZXhQYXJhbWV0ZXJpKGEsai5URVhUVVJFX01JTl9GSUxURVIseChiLm1pbkZpbHRlcikpKTtpZihMYSYmYi50eXBlIT09VEhSRUUuRmxvYXRUeXBlJiYoMTxiLmFuaXNvdHJvcHl8fGIuX19vbGRBbmlzb3Ryb3B5KSlqLnRleFBhcmFtZXRlcmYoYSxMYS5URVhUVVJFX01BWF9BTklTT1RST1BZX0VYVCxNYXRoLm1pbihiLmFuaXNvdHJvcHksTmIpKSxiLl9fb2xkQW5pc290cm9weT1cbmIuYW5pc290cm9weX1mdW5jdGlvbiBPKGEsYil7ai5iaW5kUmVuZGVyYnVmZmVyKGouUkVOREVSQlVGRkVSLGEpO2IuZGVwdGhCdWZmZXImJiFiLnN0ZW5jaWxCdWZmZXI/KGoucmVuZGVyYnVmZmVyU3RvcmFnZShqLlJFTkRFUkJVRkZFUixqLkRFUFRIX0NPTVBPTkVOVDE2LGIud2lkdGgsYi5oZWlnaHQpLGouZnJhbWVidWZmZXJSZW5kZXJidWZmZXIoai5GUkFNRUJVRkZFUixqLkRFUFRIX0FUVEFDSE1FTlQsai5SRU5ERVJCVUZGRVIsYSkpOmIuZGVwdGhCdWZmZXImJmIuc3RlbmNpbEJ1ZmZlcj8oai5yZW5kZXJidWZmZXJTdG9yYWdlKGouUkVOREVSQlVGRkVSLGouREVQVEhfU1RFTkNJTCxiLndpZHRoLGIuaGVpZ2h0KSxqLmZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyKGouRlJBTUVCVUZGRVIsai5ERVBUSF9TVEVOQ0lMX0FUVEFDSE1FTlQsai5SRU5ERVJCVUZGRVIsYSkpOmoucmVuZGVyYnVmZmVyU3RvcmFnZShqLlJFTkRFUkJVRkZFUixqLlJHQkE0LGIud2lkdGgsYi5oZWlnaHQpfVxuZnVuY3Rpb24geChhKXtyZXR1cm4gYT09PVRIUkVFLk5lYXJlc3RGaWx0ZXJ8fGE9PT1USFJFRS5OZWFyZXN0TWlwTWFwTmVhcmVzdEZpbHRlcnx8YT09PVRIUkVFLk5lYXJlc3RNaXBNYXBMaW5lYXJGaWx0ZXI/ai5ORUFSRVNUOmouTElORUFSfWZ1bmN0aW9uIEkoYSl7aWYoYT09PVRIUkVFLlJlcGVhdFdyYXBwaW5nKXJldHVybiBqLlJFUEVBVDtpZihhPT09VEhSRUUuQ2xhbXBUb0VkZ2VXcmFwcGluZylyZXR1cm4gai5DTEFNUF9UT19FREdFO2lmKGE9PT1USFJFRS5NaXJyb3JlZFJlcGVhdFdyYXBwaW5nKXJldHVybiBqLk1JUlJPUkVEX1JFUEVBVDtpZihhPT09VEhSRUUuTmVhcmVzdEZpbHRlcilyZXR1cm4gai5ORUFSRVNUO2lmKGE9PT1USFJFRS5OZWFyZXN0TWlwTWFwTmVhcmVzdEZpbHRlcilyZXR1cm4gai5ORUFSRVNUX01JUE1BUF9ORUFSRVNUO2lmKGE9PT1USFJFRS5OZWFyZXN0TWlwTWFwTGluZWFyRmlsdGVyKXJldHVybiBqLk5FQVJFU1RfTUlQTUFQX0xJTkVBUjtpZihhPT09XG5USFJFRS5MaW5lYXJGaWx0ZXIpcmV0dXJuIGouTElORUFSO2lmKGE9PT1USFJFRS5MaW5lYXJNaXBNYXBOZWFyZXN0RmlsdGVyKXJldHVybiBqLkxJTkVBUl9NSVBNQVBfTkVBUkVTVDtpZihhPT09VEhSRUUuTGluZWFyTWlwTWFwTGluZWFyRmlsdGVyKXJldHVybiBqLkxJTkVBUl9NSVBNQVBfTElORUFSO2lmKGE9PT1USFJFRS5VbnNpZ25lZEJ5dGVUeXBlKXJldHVybiBqLlVOU0lHTkVEX0JZVEU7aWYoYT09PVRIUkVFLlVuc2lnbmVkU2hvcnQ0NDQ0VHlwZSlyZXR1cm4gai5VTlNJR05FRF9TSE9SVF80XzRfNF80O2lmKGE9PT1USFJFRS5VbnNpZ25lZFNob3J0NTU1MVR5cGUpcmV0dXJuIGouVU5TSUdORURfU0hPUlRfNV81XzVfMTtpZihhPT09VEhSRUUuVW5zaWduZWRTaG9ydDU2NVR5cGUpcmV0dXJuIGouVU5TSUdORURfU0hPUlRfNV82XzU7aWYoYT09PVRIUkVFLkJ5dGVUeXBlKXJldHVybiBqLkJZVEU7aWYoYT09PVRIUkVFLlNob3J0VHlwZSlyZXR1cm4gai5TSE9SVDtpZihhPT09XG5USFJFRS5VbnNpZ25lZFNob3J0VHlwZSlyZXR1cm4gai5VTlNJR05FRF9TSE9SVDtpZihhPT09VEhSRUUuSW50VHlwZSlyZXR1cm4gai5JTlQ7aWYoYT09PVRIUkVFLlVuc2lnbmVkSW50VHlwZSlyZXR1cm4gai5VTlNJR05FRF9JTlQ7aWYoYT09PVRIUkVFLkZsb2F0VHlwZSlyZXR1cm4gai5GTE9BVDtpZihhPT09VEhSRUUuQWxwaGFGb3JtYXQpcmV0dXJuIGouQUxQSEE7aWYoYT09PVRIUkVFLlJHQkZvcm1hdClyZXR1cm4gai5SR0I7aWYoYT09PVRIUkVFLlJHQkFGb3JtYXQpcmV0dXJuIGouUkdCQTtpZihhPT09VEhSRUUuTHVtaW5hbmNlRm9ybWF0KXJldHVybiBqLkxVTUlOQU5DRTtpZihhPT09VEhSRUUuTHVtaW5hbmNlQWxwaGFGb3JtYXQpcmV0dXJuIGouTFVNSU5BTkNFX0FMUEhBO2lmKGE9PT1USFJFRS5BZGRFcXVhdGlvbilyZXR1cm4gai5GVU5DX0FERDtpZihhPT09VEhSRUUuU3VidHJhY3RFcXVhdGlvbilyZXR1cm4gai5GVU5DX1NVQlRSQUNUO2lmKGE9PT1USFJFRS5SZXZlcnNlU3VidHJhY3RFcXVhdGlvbilyZXR1cm4gai5GVU5DX1JFVkVSU0VfU1VCVFJBQ1Q7XG5pZihhPT09VEhSRUUuWmVyb0ZhY3RvcilyZXR1cm4gai5aRVJPO2lmKGE9PT1USFJFRS5PbmVGYWN0b3IpcmV0dXJuIGouT05FO2lmKGE9PT1USFJFRS5TcmNDb2xvckZhY3RvcilyZXR1cm4gai5TUkNfQ09MT1I7aWYoYT09PVRIUkVFLk9uZU1pbnVzU3JjQ29sb3JGYWN0b3IpcmV0dXJuIGouT05FX01JTlVTX1NSQ19DT0xPUjtpZihhPT09VEhSRUUuU3JjQWxwaGFGYWN0b3IpcmV0dXJuIGouU1JDX0FMUEhBO2lmKGE9PT1USFJFRS5PbmVNaW51c1NyY0FscGhhRmFjdG9yKXJldHVybiBqLk9ORV9NSU5VU19TUkNfQUxQSEE7aWYoYT09PVRIUkVFLkRzdEFscGhhRmFjdG9yKXJldHVybiBqLkRTVF9BTFBIQTtpZihhPT09VEhSRUUuT25lTWludXNEc3RBbHBoYUZhY3RvcilyZXR1cm4gai5PTkVfTUlOVVNfRFNUX0FMUEhBO2lmKGE9PT1USFJFRS5Ec3RDb2xvckZhY3RvcilyZXR1cm4gai5EU1RfQ09MT1I7aWYoYT09PVRIUkVFLk9uZU1pbnVzRHN0Q29sb3JGYWN0b3IpcmV0dXJuIGouT05FX01JTlVTX0RTVF9DT0xPUjtcbmlmKGE9PT1USFJFRS5TcmNBbHBoYVNhdHVyYXRlRmFjdG9yKXJldHVybiBqLlNSQ19BTFBIQV9TQVRVUkFURTtpZih2b2lkIDAhPT1GYSl7aWYoYT09PVRIUkVFLlJHQl9TM1RDX0RYVDFfRm9ybWF0KXJldHVybiBGYS5DT01QUkVTU0VEX1JHQl9TM1RDX0RYVDFfRVhUO2lmKGE9PT1USFJFRS5SR0JBX1MzVENfRFhUMV9Gb3JtYXQpcmV0dXJuIEZhLkNPTVBSRVNTRURfUkdCQV9TM1RDX0RYVDFfRVhUO2lmKGE9PT1USFJFRS5SR0JBX1MzVENfRFhUM19Gb3JtYXQpcmV0dXJuIEZhLkNPTVBSRVNTRURfUkdCQV9TM1RDX0RYVDNfRVhUO2lmKGE9PT1USFJFRS5SR0JBX1MzVENfRFhUNV9Gb3JtYXQpcmV0dXJuIEZhLkNPTVBSRVNTRURfUkdCQV9TM1RDX0RYVDVfRVhUfXJldHVybiAwfWNvbnNvbGUubG9nKFwiVEhSRUUuV2ViR0xSZW5kZXJlclwiLFRIUkVFLlJFVklTSU9OKTt2YXIgYT1hfHx7fSxCPXZvaWQgMCE9PWEuY2FudmFzP2EuY2FudmFzOmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksXG5NPXZvaWQgMCE9PWEucHJlY2lzaW9uP2EucHJlY2lzaW9uOlwiaGlnaHBcIixKPXZvaWQgMCE9PWEuYWxwaGE/YS5hbHBoYTohMSxjYT12b2lkIDAhPT1hLnByZW11bHRpcGxpZWRBbHBoYT9hLnByZW11bHRpcGxpZWRBbHBoYTohMCxuYT12b2lkIDAhPT1hLmFudGlhbGlhcz9hLmFudGlhbGlhczohMSxwYT12b2lkIDAhPT1hLnN0ZW5jaWw/YS5zdGVuY2lsOiEwLEM9dm9pZCAwIT09YS5wcmVzZXJ2ZURyYXdpbmdCdWZmZXI/YS5wcmVzZXJ2ZURyYXdpbmdCdWZmZXI6ITEsUT1uZXcgVEhSRUUuQ29sb3IoMCksUj0wO3RoaXMuZG9tRWxlbWVudD1CO3RoaXMuY29udGV4dD1udWxsO3RoaXMuZGV2aWNlUGl4ZWxSYXRpbz12b2lkIDAhPT1hLmRldmljZVBpeGVsUmF0aW8/YS5kZXZpY2VQaXhlbFJhdGlvOnZvaWQgMCE9PXNlbGYuZGV2aWNlUGl4ZWxSYXRpbz9zZWxmLmRldmljZVBpeGVsUmF0aW86MTt0aGlzLmF1dG9VcGRhdGVPYmplY3RzPXRoaXMuc29ydE9iamVjdHM9dGhpcy5hdXRvQ2xlYXJTdGVuY2lsPVxudGhpcy5hdXRvQ2xlYXJEZXB0aD10aGlzLmF1dG9DbGVhckNvbG9yPXRoaXMuYXV0b0NsZWFyPSEwO3RoaXMuc2hhZG93TWFwRW5hYmxlZD10aGlzLnBoeXNpY2FsbHlCYXNlZFNoYWRpbmc9dGhpcy5nYW1tYU91dHB1dD10aGlzLmdhbW1hSW5wdXQ9ITE7dGhpcy5zaGFkb3dNYXBBdXRvVXBkYXRlPSEwO3RoaXMuc2hhZG93TWFwVHlwZT1USFJFRS5QQ0ZTaGFkb3dNYXA7dGhpcy5zaGFkb3dNYXBDdWxsRmFjZT1USFJFRS5DdWxsRmFjZUZyb250O3RoaXMuc2hhZG93TWFwQ2FzY2FkZT10aGlzLnNoYWRvd01hcERlYnVnPSExO3RoaXMubWF4TW9ycGhUYXJnZXRzPTg7dGhpcy5tYXhNb3JwaE5vcm1hbHM9NDt0aGlzLmF1dG9TY2FsZUN1YmVtYXBzPSEwO3RoaXMucmVuZGVyUGx1Z2luc1ByZT1bXTt0aGlzLnJlbmRlclBsdWdpbnNQb3N0PVtdO3RoaXMuaW5mbz17bWVtb3J5Ontwcm9ncmFtczowLGdlb21ldHJpZXM6MCx0ZXh0dXJlczowfSxyZW5kZXI6e2NhbGxzOjAsdmVydGljZXM6MCxcbmZhY2VzOjAscG9pbnRzOjB9fTt2YXIgTD10aGlzLGRhPVtdLHphPTAsQmE9bnVsbCxiYT1udWxsLEFhPS0xLCQ9bnVsbCxlYT1udWxsLFY9MCxQPTAsWT0tMSxVPS0xLGphPS0xLHNhPS0xLGhhPS0xLEthPS0xLEdhPS0xLGthPS0xLERhPW51bGwsVWE9bnVsbCxRYT1udWxsLHdhPW51bGwsYmI9MCxjYj0wLE1hPUIud2lkdGgsZmI9Qi5oZWlnaHQsc2I9MCxwYj0wLHZhPXt9LGxhPW5ldyBUSFJFRS5GcnVzdHVtLEVhPW5ldyBUSFJFRS5NYXRyaXg0LGdiPW5ldyBUSFJFRS5NYXRyaXg0LHJhPW5ldyBUSFJFRS5WZWN0b3IzLGZhPW5ldyBUSFJFRS5WZWN0b3IzLHRhPSEwLFBhPXthbWJpZW50OlswLDAsMF0sZGlyZWN0aW9uYWw6e2xlbmd0aDowLGNvbG9yczpbXSxwb3NpdGlvbnM6W119LHBvaW50OntsZW5ndGg6MCxjb2xvcnM6W10scG9zaXRpb25zOltdLGRpc3RhbmNlczpbXX0sc3BvdDp7bGVuZ3RoOjAsY29sb3JzOltdLHBvc2l0aW9uczpbXSxkaXN0YW5jZXM6W10sZGlyZWN0aW9uczpbXSxcbmFuZ2xlc0NvczpbXSxleHBvbmVudHM6W119LGhlbWk6e2xlbmd0aDowLHNreUNvbG9yczpbXSxncm91bmRDb2xvcnM6W10scG9zaXRpb25zOltdfX0saixPYSx1YSxMYSxGYTt0cnl7dmFyIFJhPXthbHBoYTpKLHByZW11bHRpcGxpZWRBbHBoYTpjYSxhbnRpYWxpYXM6bmEsc3RlbmNpbDpwYSxwcmVzZXJ2ZURyYXdpbmdCdWZmZXI6Q307aj1CLmdldENvbnRleHQoXCJ3ZWJnbFwiLFJhKXx8Qi5nZXRDb250ZXh0KFwiZXhwZXJpbWVudGFsLXdlYmdsXCIsUmEpO2lmKG51bGw9PT1qKXRocm93XCJFcnJvciBjcmVhdGluZyBXZWJHTCBjb250ZXh0LlwiO31jYXRjaChaYil7Y29uc29sZS5lcnJvcihaYil9T2E9ai5nZXRFeHRlbnNpb24oXCJPRVNfdGV4dHVyZV9mbG9hdFwiKTtqLmdldEV4dGVuc2lvbihcIk9FU190ZXh0dXJlX2Zsb2F0X2xpbmVhclwiKTt1YT1qLmdldEV4dGVuc2lvbihcIk9FU19zdGFuZGFyZF9kZXJpdmF0aXZlc1wiKTtMYT1qLmdldEV4dGVuc2lvbihcIkVYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpY1wiKXx8XG5qLmdldEV4dGVuc2lvbihcIk1PWl9FWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWNcIil8fGouZ2V0RXh0ZW5zaW9uKFwiV0VCS0lUX0VYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpY1wiKTtGYT1qLmdldEV4dGVuc2lvbihcIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjXCIpfHxqLmdldEV4dGVuc2lvbihcIk1PWl9XRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y1wiKXx8ai5nZXRFeHRlbnNpb24oXCJXRUJLSVRfV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGNcIik7T2F8fGNvbnNvbGUubG9nKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogRmxvYXQgdGV4dHVyZXMgbm90IHN1cHBvcnRlZC5cIik7dWF8fGNvbnNvbGUubG9nKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogU3RhbmRhcmQgZGVyaXZhdGl2ZXMgbm90IHN1cHBvcnRlZC5cIik7TGF8fGNvbnNvbGUubG9nKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogQW5pc290cm9waWMgdGV4dHVyZSBmaWx0ZXJpbmcgbm90IHN1cHBvcnRlZC5cIik7XG5GYXx8Y29uc29sZS5sb2coXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBTM1RDIGNvbXByZXNzZWQgdGV4dHVyZXMgbm90IHN1cHBvcnRlZC5cIik7dm9pZCAwPT09ai5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQmJihqLmdldFNoYWRlclByZWNpc2lvbkZvcm1hdD1mdW5jdGlvbigpe3JldHVybntyYW5nZU1pbjoxLHJhbmdlTWF4OjEscHJlY2lzaW9uOjF9fSk7ai5jbGVhckNvbG9yKDAsMCwwLDEpO2ouY2xlYXJEZXB0aCgxKTtqLmNsZWFyU3RlbmNpbCgwKTtqLmVuYWJsZShqLkRFUFRIX1RFU1QpO2ouZGVwdGhGdW5jKGouTEVRVUFMKTtqLmZyb250RmFjZShqLkNDVyk7ai5jdWxsRmFjZShqLkJBQ0spO2ouZW5hYmxlKGouQ1VMTF9GQUNFKTtqLmVuYWJsZShqLkJMRU5EKTtqLmJsZW5kRXF1YXRpb24oai5GVU5DX0FERCk7ai5ibGVuZEZ1bmMoai5TUkNfQUxQSEEsai5PTkVfTUlOVVNfU1JDX0FMUEhBKTtqLnZpZXdwb3J0KGJiLGNiLE1hLGZiKTtqLmNsZWFyQ29sb3IoUS5yLFEuZyxRLmIsXG5SKTt0aGlzLmNvbnRleHQ9ajt2YXIgTWI9ai5nZXRQYXJhbWV0ZXIoai5NQVhfVEVYVFVSRV9JTUFHRV9VTklUUyksJGI9ai5nZXRQYXJhbWV0ZXIoai5NQVhfVkVSVEVYX1RFWFRVUkVfSU1BR0VfVU5JVFMpO2ouZ2V0UGFyYW1ldGVyKGouTUFYX1RFWFRVUkVfU0laRSk7dmFyIGFjPWouZ2V0UGFyYW1ldGVyKGouTUFYX0NVQkVfTUFQX1RFWFRVUkVfU0laRSksTmI9TGE/ai5nZXRQYXJhbWV0ZXIoTGEuTUFYX1RFWFRVUkVfTUFYX0FOSVNPVFJPUFlfRVhUKTowLEJiPTA8JGIseWI9QmImJk9hO0ZhJiZqLmdldFBhcmFtZXRlcihqLkNPTVBSRVNTRURfVEVYVFVSRV9GT1JNQVRTKTt2YXIgYmM9ai5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoai5WRVJURVhfU0hBREVSLGouSElHSF9GTE9BVCksY2M9ai5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoai5WRVJURVhfU0hBREVSLGouTUVESVVNX0ZMT0FUKTtqLmdldFNoYWRlclByZWNpc2lvbkZvcm1hdChqLlZFUlRFWF9TSEFERVIsai5MT1dfRkxPQVQpO1xudmFyIHFjPWouZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0KGouRlJBR01FTlRfU0hBREVSLGouSElHSF9GTE9BVCkscmM9ai5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoai5GUkFHTUVOVF9TSEFERVIsai5NRURJVU1fRkxPQVQpO2ouZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0KGouRlJBR01FTlRfU0hBREVSLGouTE9XX0ZMT0FUKTtqLmdldFNoYWRlclByZWNpc2lvbkZvcm1hdChqLlZFUlRFWF9TSEFERVIsai5ISUdIX0lOVCk7ai5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoai5WRVJURVhfU0hBREVSLGouTUVESVVNX0lOVCk7ai5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoai5WRVJURVhfU0hBREVSLGouTE9XX0lOVCk7ai5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoai5GUkFHTUVOVF9TSEFERVIsai5ISUdIX0lOVCk7ai5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoai5GUkFHTUVOVF9TSEFERVIsai5NRURJVU1fSU5UKTtqLmdldFNoYWRlclByZWNpc2lvbkZvcm1hdChqLkZSQUdNRU5UX1NIQURFUixcbmouTE9XX0lOVCk7dmFyIHNjPTA8YmMucHJlY2lzaW9uJiYwPHFjLnByZWNpc2lvbixPYj0wPGNjLnByZWNpc2lvbiYmMDxyYy5wcmVjaXNpb247XCJoaWdocFwiPT09TSYmIXNjJiYoT2I/KE09XCJtZWRpdW1wXCIsY29uc29sZS53YXJuKFwiV2ViR0xSZW5kZXJlcjogaGlnaHAgbm90IHN1cHBvcnRlZCwgdXNpbmcgbWVkaXVtcFwiKSk6KE09XCJsb3dwXCIsY29uc29sZS53YXJuKFwiV2ViR0xSZW5kZXJlcjogaGlnaHAgYW5kIG1lZGl1bXAgbm90IHN1cHBvcnRlZCwgdXNpbmcgbG93cFwiKSkpO1wibWVkaXVtcFwiPT09TSYmIU9iJiYoTT1cImxvd3BcIixjb25zb2xlLndhcm4oXCJXZWJHTFJlbmRlcmVyOiBtZWRpdW1wIG5vdCBzdXBwb3J0ZWQsIHVzaW5nIGxvd3BcIikpO3RoaXMuZ2V0Q29udGV4dD1mdW5jdGlvbigpe3JldHVybiBqfTt0aGlzLnN1cHBvcnRzVmVydGV4VGV4dHVyZXM9ZnVuY3Rpb24oKXtyZXR1cm4gQmJ9O3RoaXMuc3VwcG9ydHNGbG9hdFRleHR1cmVzPWZ1bmN0aW9uKCl7cmV0dXJuIE9hfTtcbnRoaXMuc3VwcG9ydHNTdGFuZGFyZERlcml2YXRpdmVzPWZ1bmN0aW9uKCl7cmV0dXJuIHVhfTt0aGlzLnN1cHBvcnRzQ29tcHJlc3NlZFRleHR1cmVTM1RDPWZ1bmN0aW9uKCl7cmV0dXJuIEZhfTt0aGlzLmdldE1heEFuaXNvdHJvcHk9ZnVuY3Rpb24oKXtyZXR1cm4gTmJ9O3RoaXMuZ2V0UHJlY2lzaW9uPWZ1bmN0aW9uKCl7cmV0dXJuIE19O3RoaXMuc2V0U2l6ZT1mdW5jdGlvbihhLGIsYyl7Qi53aWR0aD1hKnRoaXMuZGV2aWNlUGl4ZWxSYXRpbztCLmhlaWdodD1iKnRoaXMuZGV2aWNlUGl4ZWxSYXRpbzsxIT09dGhpcy5kZXZpY2VQaXhlbFJhdGlvJiYhMSE9PWMmJihCLnN0eWxlLndpZHRoPWErXCJweFwiLEIuc3R5bGUuaGVpZ2h0PWIrXCJweFwiKTt0aGlzLnNldFZpZXdwb3J0KDAsMCxCLndpZHRoLEIuaGVpZ2h0KX07dGhpcy5zZXRWaWV3cG9ydD1mdW5jdGlvbihhLGIsYyxkKXtiYj12b2lkIDAhPT1hP2E6MDtjYj12b2lkIDAhPT1iP2I6MDtNYT12b2lkIDAhPT1jP2M6Qi53aWR0aDtcbmZiPXZvaWQgMCE9PWQ/ZDpCLmhlaWdodDtqLnZpZXdwb3J0KGJiLGNiLE1hLGZiKX07dGhpcy5zZXRTY2lzc29yPWZ1bmN0aW9uKGEsYixjLGQpe2ouc2Npc3NvcihhLGIsYyxkKX07dGhpcy5lbmFibGVTY2lzc29yVGVzdD1mdW5jdGlvbihhKXthP2ouZW5hYmxlKGouU0NJU1NPUl9URVNUKTpqLmRpc2FibGUoai5TQ0lTU09SX1RFU1QpfTt0aGlzLnNldENsZWFyQ29sb3I9ZnVuY3Rpb24oYSxiKXtRLnNldChhKTtSPXZvaWQgMCE9PWI/YjoxO2ouY2xlYXJDb2xvcihRLnIsUS5nLFEuYixSKX07dGhpcy5zZXRDbGVhckNvbG9ySGV4PWZ1bmN0aW9uKGEsYil7Y29uc29sZS53YXJuKFwiREVQUkVDQVRFRDogLnNldENsZWFyQ29sb3JIZXgoKSBpcyBiZWluZyByZW1vdmVkLiBVc2UgLnNldENsZWFyQ29sb3IoKSBpbnN0ZWFkLlwiKTt0aGlzLnNldENsZWFyQ29sb3IoYSxiKX07dGhpcy5nZXRDbGVhckNvbG9yPWZ1bmN0aW9uKCl7cmV0dXJuIFF9O3RoaXMuZ2V0Q2xlYXJBbHBoYT1mdW5jdGlvbigpe3JldHVybiBSfTtcbnRoaXMuY2xlYXI9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPTA7aWYodm9pZCAwPT09YXx8YSlkfD1qLkNPTE9SX0JVRkZFUl9CSVQ7aWYodm9pZCAwPT09Ynx8YilkfD1qLkRFUFRIX0JVRkZFUl9CSVQ7aWYodm9pZCAwPT09Y3x8YylkfD1qLlNURU5DSUxfQlVGRkVSX0JJVDtqLmNsZWFyKGQpfTt0aGlzLmNsZWFyQ29sb3I9ZnVuY3Rpb24oKXtqLmNsZWFyKGouQ09MT1JfQlVGRkVSX0JJVCl9O3RoaXMuY2xlYXJEZXB0aD1mdW5jdGlvbigpe2ouY2xlYXIoai5ERVBUSF9CVUZGRVJfQklUKX07dGhpcy5jbGVhclN0ZW5jaWw9ZnVuY3Rpb24oKXtqLmNsZWFyKGouU1RFTkNJTF9CVUZGRVJfQklUKX07dGhpcy5jbGVhclRhcmdldD1mdW5jdGlvbihhLGIsYyxkKXt0aGlzLnNldFJlbmRlclRhcmdldChhKTt0aGlzLmNsZWFyKGIsYyxkKX07dGhpcy5hZGRQb3N0UGx1Z2luPWZ1bmN0aW9uKGEpe2EuaW5pdCh0aGlzKTt0aGlzLnJlbmRlclBsdWdpbnNQb3N0LnB1c2goYSl9O3RoaXMuYWRkUHJlUGx1Z2luPVxuZnVuY3Rpb24oYSl7YS5pbml0KHRoaXMpO3RoaXMucmVuZGVyUGx1Z2luc1ByZS5wdXNoKGEpfTt0aGlzLnVwZGF0ZVNoYWRvd01hcD1mdW5jdGlvbihhLGIpe0JhPW51bGw7QWE9JD1rYT1HYT1qYT0tMTt0YT0hMDtVPVk9LTE7dGhpcy5zaGFkb3dNYXBQbHVnaW4udXBkYXRlKGEsYil9O3ZhciBDYj1mdW5jdGlvbihhKXthPWEudGFyZ2V0O2EucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRpc3Bvc2VcIixDYik7YS5fX3dlYmdsSW5pdD12b2lkIDA7aWYoYSBpbnN0YW5jZW9mIFRIUkVFLkJ1ZmZlckdlb21ldHJ5KXt2YXIgYj1hLmF0dHJpYnV0ZXMsYztmb3IoYyBpbiBiKXZvaWQgMCE9PWJbY10uYnVmZmVyJiZqLmRlbGV0ZUJ1ZmZlcihiW2NdLmJ1ZmZlcik7TC5pbmZvLm1lbW9yeS5nZW9tZXRyaWVzLS19ZWxzZSBpZih2b2lkIDAhPT1hLmdlb21ldHJ5R3JvdXBzKWZvcihiIGluIGEuZ2VvbWV0cnlHcm91cHMpe2M9YS5nZW9tZXRyeUdyb3Vwc1tiXTtpZih2b2lkIDAhPT1jLm51bU1vcnBoVGFyZ2V0cylmb3IodmFyIGQ9XG4wLGU9Yy5udW1Nb3JwaFRhcmdldHM7ZDxlO2QrKylqLmRlbGV0ZUJ1ZmZlcihjLl9fd2ViZ2xNb3JwaFRhcmdldHNCdWZmZXJzW2RdKTtpZih2b2lkIDAhPT1jLm51bU1vcnBoTm9ybWFscyl7ZD0wO2ZvcihlPWMubnVtTW9ycGhOb3JtYWxzO2Q8ZTtkKyspai5kZWxldGVCdWZmZXIoYy5fX3dlYmdsTW9ycGhOb3JtYWxzQnVmZmVyc1tkXSl9SGIoYyl9ZWxzZSBIYihhKX0sRGI9ZnVuY3Rpb24oYSl7YT1hLnRhcmdldDthLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkaXNwb3NlXCIsRGIpO2EuaW1hZ2UmJmEuaW1hZ2UuX193ZWJnbFRleHR1cmVDdWJlP2ouZGVsZXRlVGV4dHVyZShhLmltYWdlLl9fd2ViZ2xUZXh0dXJlQ3ViZSk6YS5fX3dlYmdsSW5pdCYmKGEuX193ZWJnbEluaXQ9ITEsai5kZWxldGVUZXh0dXJlKGEuX193ZWJnbFRleHR1cmUpKTtMLmluZm8ubWVtb3J5LnRleHR1cmVzLS19LEViPWZ1bmN0aW9uKGEpe2E9YS50YXJnZXQ7YS5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLFxuRWIpO2lmKGEmJmEuX193ZWJnbFRleHR1cmUpaWYoai5kZWxldGVUZXh0dXJlKGEuX193ZWJnbFRleHR1cmUpLGEgaW5zdGFuY2VvZiBUSFJFRS5XZWJHTFJlbmRlclRhcmdldEN1YmUpZm9yKHZhciBiPTA7Nj5iO2IrKylqLmRlbGV0ZUZyYW1lYnVmZmVyKGEuX193ZWJnbEZyYW1lYnVmZmVyW2JdKSxqLmRlbGV0ZVJlbmRlcmJ1ZmZlcihhLl9fd2ViZ2xSZW5kZXJidWZmZXJbYl0pO2Vsc2Ugai5kZWxldGVGcmFtZWJ1ZmZlcihhLl9fd2ViZ2xGcmFtZWJ1ZmZlciksai5kZWxldGVSZW5kZXJidWZmZXIoYS5fX3dlYmdsUmVuZGVyYnVmZmVyKTtMLmluZm8ubWVtb3J5LnRleHR1cmVzLS19LEZiPWZ1bmN0aW9uKGEpe2E9YS50YXJnZXQ7YS5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLEZiKTtHYihhKX0sSGI9ZnVuY3Rpb24oYSl7dm9pZCAwIT09YS5fX3dlYmdsVmVydGV4QnVmZmVyJiZqLmRlbGV0ZUJ1ZmZlcihhLl9fd2ViZ2xWZXJ0ZXhCdWZmZXIpO3ZvaWQgMCE9PWEuX193ZWJnbE5vcm1hbEJ1ZmZlciYmXG5qLmRlbGV0ZUJ1ZmZlcihhLl9fd2ViZ2xOb3JtYWxCdWZmZXIpO3ZvaWQgMCE9PWEuX193ZWJnbFRhbmdlbnRCdWZmZXImJmouZGVsZXRlQnVmZmVyKGEuX193ZWJnbFRhbmdlbnRCdWZmZXIpO3ZvaWQgMCE9PWEuX193ZWJnbENvbG9yQnVmZmVyJiZqLmRlbGV0ZUJ1ZmZlcihhLl9fd2ViZ2xDb2xvckJ1ZmZlcik7dm9pZCAwIT09YS5fX3dlYmdsVVZCdWZmZXImJmouZGVsZXRlQnVmZmVyKGEuX193ZWJnbFVWQnVmZmVyKTt2b2lkIDAhPT1hLl9fd2ViZ2xVVjJCdWZmZXImJmouZGVsZXRlQnVmZmVyKGEuX193ZWJnbFVWMkJ1ZmZlcik7dm9pZCAwIT09YS5fX3dlYmdsU2tpbkluZGljZXNCdWZmZXImJmouZGVsZXRlQnVmZmVyKGEuX193ZWJnbFNraW5JbmRpY2VzQnVmZmVyKTt2b2lkIDAhPT1hLl9fd2ViZ2xTa2luV2VpZ2h0c0J1ZmZlciYmai5kZWxldGVCdWZmZXIoYS5fX3dlYmdsU2tpbldlaWdodHNCdWZmZXIpO3ZvaWQgMCE9PWEuX193ZWJnbEZhY2VCdWZmZXImJmouZGVsZXRlQnVmZmVyKGEuX193ZWJnbEZhY2VCdWZmZXIpO1xudm9pZCAwIT09YS5fX3dlYmdsTGluZUJ1ZmZlciYmai5kZWxldGVCdWZmZXIoYS5fX3dlYmdsTGluZUJ1ZmZlcik7dm9pZCAwIT09YS5fX3dlYmdsTGluZURpc3RhbmNlQnVmZmVyJiZqLmRlbGV0ZUJ1ZmZlcihhLl9fd2ViZ2xMaW5lRGlzdGFuY2VCdWZmZXIpO2lmKHZvaWQgMCE9PWEuX193ZWJnbEN1c3RvbUF0dHJpYnV0ZXNMaXN0KWZvcih2YXIgYiBpbiBhLl9fd2ViZ2xDdXN0b21BdHRyaWJ1dGVzTGlzdClqLmRlbGV0ZUJ1ZmZlcihhLl9fd2ViZ2xDdXN0b21BdHRyaWJ1dGVzTGlzdFtiXS5idWZmZXIpO0wuaW5mby5tZW1vcnkuZ2VvbWV0cmllcy0tfSxHYj1mdW5jdGlvbihhKXt2YXIgYj1hLnByb2dyYW07aWYodm9pZCAwIT09Yil7YS5wcm9ncmFtPXZvaWQgMDt2YXIgYyxkLGU9ITEsYT0wO2ZvcihjPWRhLmxlbmd0aDthPGM7YSsrKWlmKGQ9ZGFbYV0sZC5wcm9ncmFtPT09Yil7ZC51c2VkVGltZXMtLTswPT09ZC51c2VkVGltZXMmJihlPSEwKTticmVha31pZighMD09PWUpe2U9XG5bXTthPTA7Zm9yKGM9ZGEubGVuZ3RoO2E8YzthKyspZD1kYVthXSxkLnByb2dyYW0hPT1iJiZlLnB1c2goZCk7ZGE9ZTtqLmRlbGV0ZVByb2dyYW0oYik7TC5pbmZvLm1lbW9yeS5wcm9ncmFtcy0tfX19O3RoaXMucmVuZGVyQnVmZmVySW1tZWRpYXRlPWZ1bmN0aW9uKGEsYixjKXthLmhhc1Bvc2l0aW9ucyYmIWEuX193ZWJnbFZlcnRleEJ1ZmZlciYmKGEuX193ZWJnbFZlcnRleEJ1ZmZlcj1qLmNyZWF0ZUJ1ZmZlcigpKTthLmhhc05vcm1hbHMmJiFhLl9fd2ViZ2xOb3JtYWxCdWZmZXImJihhLl9fd2ViZ2xOb3JtYWxCdWZmZXI9ai5jcmVhdGVCdWZmZXIoKSk7YS5oYXNVdnMmJiFhLl9fd2ViZ2xVdkJ1ZmZlciYmKGEuX193ZWJnbFV2QnVmZmVyPWouY3JlYXRlQnVmZmVyKCkpO2EuaGFzQ29sb3JzJiYhYS5fX3dlYmdsQ29sb3JCdWZmZXImJihhLl9fd2ViZ2xDb2xvckJ1ZmZlcj1qLmNyZWF0ZUJ1ZmZlcigpKTthLmhhc1Bvc2l0aW9ucyYmKGouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUixcbmEuX193ZWJnbFZlcnRleEJ1ZmZlciksai5idWZmZXJEYXRhKGouQVJSQVlfQlVGRkVSLGEucG9zaXRpb25BcnJheSxqLkRZTkFNSUNfRFJBVyksai5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShiLmF0dHJpYnV0ZXMucG9zaXRpb24pLGoudmVydGV4QXR0cmliUG9pbnRlcihiLmF0dHJpYnV0ZXMucG9zaXRpb24sMyxqLkZMT0FULCExLDAsMCkpO2lmKGEuaGFzTm9ybWFscyl7ai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLGEuX193ZWJnbE5vcm1hbEJ1ZmZlcik7aWYoYy5zaGFkaW5nPT09VEhSRUUuRmxhdFNoYWRpbmcpe3ZhciBkLGUsZixnLGgsaSxrLGwsbSxuLHAscT0zKmEuY291bnQ7Zm9yKHA9MDtwPHE7cCs9OSluPWEubm9ybWFsQXJyYXksZD1uW3BdLGU9bltwKzFdLGY9bltwKzJdLGc9bltwKzNdLGk9bltwKzRdLGw9bltwKzVdLGg9bltwKzZdLGs9bltwKzddLG09bltwKzhdLGQ9KGQrZytoKS8zLGU9KGUraStrKS8zLGY9KGYrbCttKS8zLG5bcF09ZCxuW3ArMV09ZSxuW3ArXG4yXT1mLG5bcCszXT1kLG5bcCs0XT1lLG5bcCs1XT1mLG5bcCs2XT1kLG5bcCs3XT1lLG5bcCs4XT1mfWouYnVmZmVyRGF0YShqLkFSUkFZX0JVRkZFUixhLm5vcm1hbEFycmF5LGouRFlOQU1JQ19EUkFXKTtqLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGIuYXR0cmlidXRlcy5ub3JtYWwpO2oudmVydGV4QXR0cmliUG9pbnRlcihiLmF0dHJpYnV0ZXMubm9ybWFsLDMsai5GTE9BVCwhMSwwLDApfWEuaGFzVXZzJiZjLm1hcCYmKGouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUixhLl9fd2ViZ2xVdkJ1ZmZlciksai5idWZmZXJEYXRhKGouQVJSQVlfQlVGRkVSLGEudXZBcnJheSxqLkRZTkFNSUNfRFJBVyksai5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShiLmF0dHJpYnV0ZXMudXYpLGoudmVydGV4QXR0cmliUG9pbnRlcihiLmF0dHJpYnV0ZXMudXYsMixqLkZMT0FULCExLDAsMCkpO2EuaGFzQ29sb3JzJiZjLnZlcnRleENvbG9ycyE9PVRIUkVFLk5vQ29sb3JzJiYoai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLFxuYS5fX3dlYmdsQ29sb3JCdWZmZXIpLGouYnVmZmVyRGF0YShqLkFSUkFZX0JVRkZFUixhLmNvbG9yQXJyYXksai5EWU5BTUlDX0RSQVcpLGouZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoYi5hdHRyaWJ1dGVzLmNvbG9yKSxqLnZlcnRleEF0dHJpYlBvaW50ZXIoYi5hdHRyaWJ1dGVzLmNvbG9yLDMsai5GTE9BVCwhMSwwLDApKTtqLmRyYXdBcnJheXMoai5UUklBTkdMRVMsMCxhLmNvdW50KTthLmNvdW50PTB9O3RoaXMucmVuZGVyQnVmZmVyRGlyZWN0PWZ1bmN0aW9uKGEsYixjLGQsZSxmKXtpZighMSE9PWQudmlzaWJsZSl7dmFyIGksayxsLG07aT16KGEsYixjLGQsZik7Yj1pLmF0dHJpYnV0ZXM7YT1lLmF0dHJpYnV0ZXM7Yz0hMTtpPTE2Nzc3MjE1KmUuaWQrMippLmlkKyhkLndpcmVmcmFtZT8xOjApO2khPT0kJiYoJD1pLGM9ITApO2MmJmcoKTtpZihmIGluc3RhbmNlb2YgVEhSRUUuTWVzaClpZihmPWEuaW5kZXgpe2U9ZS5vZmZzZXRzOzE8ZS5sZW5ndGgmJihjPSEwKTtmb3IodmFyIG49XG4wLHA9ZS5sZW5ndGg7bjxwO24rKyl7dmFyIHE9ZVtuXS5pbmRleDtpZihjKXtmb3IoayBpbiBiKWw9YltrXSxpPWFba10sMDw9bCYmKGk/KG09aS5pdGVtU2l6ZSxqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsaS5idWZmZXIpLGgobCksai52ZXJ0ZXhBdHRyaWJQb2ludGVyKGwsbSxqLkZMT0FULCExLDAsNCpxKm0pKTpkLmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXMmJigyPT09ZC5kZWZhdWx0QXR0cmlidXRlVmFsdWVzW2tdLmxlbmd0aD9qLnZlcnRleEF0dHJpYjJmdihsLGQuZGVmYXVsdEF0dHJpYnV0ZVZhbHVlc1trXSk6Mz09PWQuZGVmYXVsdEF0dHJpYnV0ZVZhbHVlc1trXS5sZW5ndGgmJmoudmVydGV4QXR0cmliM2Z2KGwsZC5kZWZhdWx0QXR0cmlidXRlVmFsdWVzW2tdKSkpO2ouYmluZEJ1ZmZlcihqLkVMRU1FTlRfQVJSQVlfQlVGRkVSLGYuYnVmZmVyKX1qLmRyYXdFbGVtZW50cyhqLlRSSUFOR0xFUyxlW25dLmNvdW50LGouVU5TSUdORURfU0hPUlQsMiplW25dLnN0YXJ0KTtcbkwuaW5mby5yZW5kZXIuY2FsbHMrKztMLmluZm8ucmVuZGVyLnZlcnRpY2VzKz1lW25dLmNvdW50O0wuaW5mby5yZW5kZXIuZmFjZXMrPWVbbl0uY291bnQvM319ZWxzZXtpZihjKWZvcihrIGluIGIpXCJpbmRleFwiIT09ayYmKGw9YltrXSxpPWFba10sMDw9bCYmKGk/KG09aS5pdGVtU2l6ZSxqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsaS5idWZmZXIpLGgobCksai52ZXJ0ZXhBdHRyaWJQb2ludGVyKGwsbSxqLkZMT0FULCExLDAsMCkpOmQuZGVmYXVsdEF0dHJpYnV0ZVZhbHVlcyYmZC5kZWZhdWx0QXR0cmlidXRlVmFsdWVzW2tdJiYoMj09PWQuZGVmYXVsdEF0dHJpYnV0ZVZhbHVlc1trXS5sZW5ndGg/ai52ZXJ0ZXhBdHRyaWIyZnYobCxkLmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXNba10pOjM9PT1kLmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXNba10ubGVuZ3RoJiZqLnZlcnRleEF0dHJpYjNmdihsLGQuZGVmYXVsdEF0dHJpYnV0ZVZhbHVlc1trXSkpKSk7ZD1lLmF0dHJpYnV0ZXMucG9zaXRpb247XG5qLmRyYXdBcnJheXMoai5UUklBTkdMRVMsMCxkLm51bUl0ZW1zLzMpO0wuaW5mby5yZW5kZXIuY2FsbHMrKztMLmluZm8ucmVuZGVyLnZlcnRpY2VzKz1kLm51bUl0ZW1zLzM7TC5pbmZvLnJlbmRlci5mYWNlcys9ZC5udW1JdGVtcy8zLzN9ZWxzZSBpZihmIGluc3RhbmNlb2YgVEhSRUUuUGFydGljbGVTeXN0ZW0pe2lmKGMpe2ZvcihrIGluIGIpbD1iW2tdLGk9YVtrXSwwPD1sJiYoaT8obT1pLml0ZW1TaXplLGouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUixpLmJ1ZmZlciksaChsKSxqLnZlcnRleEF0dHJpYlBvaW50ZXIobCxtLGouRkxPQVQsITEsMCwwKSk6ZC5kZWZhdWx0QXR0cmlidXRlVmFsdWVzJiZkLmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXNba10mJigyPT09ZC5kZWZhdWx0QXR0cmlidXRlVmFsdWVzW2tdLmxlbmd0aD9qLnZlcnRleEF0dHJpYjJmdihsLGQuZGVmYXVsdEF0dHJpYnV0ZVZhbHVlc1trXSk6Mz09PWQuZGVmYXVsdEF0dHJpYnV0ZVZhbHVlc1trXS5sZW5ndGgmJlxuai52ZXJ0ZXhBdHRyaWIzZnYobCxkLmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXNba10pKSk7ZD1hLnBvc2l0aW9uO2ouZHJhd0FycmF5cyhqLlBPSU5UUywwLGQubnVtSXRlbXMvMyk7TC5pbmZvLnJlbmRlci5jYWxscysrO0wuaW5mby5yZW5kZXIucG9pbnRzKz1kLm51bUl0ZW1zLzN9fWVsc2UgaWYoZiBpbnN0YW5jZW9mIFRIUkVFLkxpbmUmJmMpe2ZvcihrIGluIGIpbD1iW2tdLGk9YVtrXSwwPD1sJiYoaT8obT1pLml0ZW1TaXplLGouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUixpLmJ1ZmZlciksaChsKSxqLnZlcnRleEF0dHJpYlBvaW50ZXIobCxtLGouRkxPQVQsITEsMCwwKSk6ZC5kZWZhdWx0QXR0cmlidXRlVmFsdWVzJiZkLmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXNba10mJigyPT09ZC5kZWZhdWx0QXR0cmlidXRlVmFsdWVzW2tdLmxlbmd0aD9qLnZlcnRleEF0dHJpYjJmdihsLGQuZGVmYXVsdEF0dHJpYnV0ZVZhbHVlc1trXSk6Mz09PWQuZGVmYXVsdEF0dHJpYnV0ZVZhbHVlc1trXS5sZW5ndGgmJlxuai52ZXJ0ZXhBdHRyaWIzZnYobCxkLmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXNba10pKSk7az1mLnR5cGU9PT1USFJFRS5MaW5lU3RyaXA/ai5MSU5FX1NUUklQOmouTElORVM7RShkLmxpbmV3aWR0aCk7ZD1hLnBvc2l0aW9uO2ouZHJhd0FycmF5cyhrLDAsZC5udW1JdGVtcy8zKTtMLmluZm8ucmVuZGVyLmNhbGxzKys7TC5pbmZvLnJlbmRlci5wb2ludHMrPWQubnVtSXRlbXN9fX07dGhpcy5yZW5kZXJCdWZmZXI9ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe2lmKCExIT09ZC52aXNpYmxlKXt2YXIgaSxsLGM9eihhLGIsYyxkLGYpLGE9Yy5hdHRyaWJ1dGVzLGI9ITEsYz0xNjc3NzIxNSplLmlkKzIqYy5pZCsoZC53aXJlZnJhbWU/MTowKTtjIT09JCYmKCQ9YyxiPSEwKTtiJiZnKCk7aWYoIWQubW9ycGhUYXJnZXRzJiYwPD1hLnBvc2l0aW9uKWImJihqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsZS5fX3dlYmdsVmVydGV4QnVmZmVyKSxoKGEucG9zaXRpb24pLGoudmVydGV4QXR0cmliUG9pbnRlcihhLnBvc2l0aW9uLFxuMyxqLkZMT0FULCExLDAsMCkpO2Vsc2UgaWYoZi5tb3JwaFRhcmdldEJhc2Upe2M9ZC5wcm9ncmFtLmF0dHJpYnV0ZXM7LTEhPT1mLm1vcnBoVGFyZ2V0QmFzZSYmMDw9Yy5wb3NpdGlvbj8oai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLGUuX193ZWJnbE1vcnBoVGFyZ2V0c0J1ZmZlcnNbZi5tb3JwaFRhcmdldEJhc2VdKSxoKGMucG9zaXRpb24pLGoudmVydGV4QXR0cmliUG9pbnRlcihjLnBvc2l0aW9uLDMsai5GTE9BVCwhMSwwLDApKTowPD1jLnBvc2l0aW9uJiYoai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLGUuX193ZWJnbFZlcnRleEJ1ZmZlciksaChjLnBvc2l0aW9uKSxqLnZlcnRleEF0dHJpYlBvaW50ZXIoYy5wb3NpdGlvbiwzLGouRkxPQVQsITEsMCwwKSk7aWYoZi5tb3JwaFRhcmdldEZvcmNlZE9yZGVyLmxlbmd0aCl7dmFyIG09MDtsPWYubW9ycGhUYXJnZXRGb3JjZWRPcmRlcjtmb3IoaT1mLm1vcnBoVGFyZ2V0SW5mbHVlbmNlczttPGQubnVtU3VwcG9ydGVkTW9ycGhUYXJnZXRzJiZcbm08bC5sZW5ndGg7KTA8PWNbXCJtb3JwaFRhcmdldFwiK21dJiYoai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLGUuX193ZWJnbE1vcnBoVGFyZ2V0c0J1ZmZlcnNbbFttXV0pLGgoY1tcIm1vcnBoVGFyZ2V0XCIrbV0pLGoudmVydGV4QXR0cmliUG9pbnRlcihjW1wibW9ycGhUYXJnZXRcIittXSwzLGouRkxPQVQsITEsMCwwKSksMDw9Y1tcIm1vcnBoTm9ybWFsXCIrbV0mJmQubW9ycGhOb3JtYWxzJiYoai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLGUuX193ZWJnbE1vcnBoTm9ybWFsc0J1ZmZlcnNbbFttXV0pLGgoY1tcIm1vcnBoTm9ybWFsXCIrbV0pLGoudmVydGV4QXR0cmliUG9pbnRlcihjW1wibW9ycGhOb3JtYWxcIittXSwzLGouRkxPQVQsITEsMCwwKSksZi5fX3dlYmdsTW9ycGhUYXJnZXRJbmZsdWVuY2VzW21dPWlbbFttXV0sbSsrfWVsc2V7bD1bXTtpPWYubW9ycGhUYXJnZXRJbmZsdWVuY2VzO3ZhciBuLHA9aS5sZW5ndGg7Zm9yKG49MDtuPHA7bisrKW09aVtuXSwwPG0mJmwucHVzaChbbSxcbm5dKTtsLmxlbmd0aD5kLm51bVN1cHBvcnRlZE1vcnBoVGFyZ2V0cz8obC5zb3J0KGspLGwubGVuZ3RoPWQubnVtU3VwcG9ydGVkTW9ycGhUYXJnZXRzKTpsLmxlbmd0aD5kLm51bVN1cHBvcnRlZE1vcnBoTm9ybWFscz9sLnNvcnQoayk6MD09PWwubGVuZ3RoJiZsLnB1c2goWzAsMF0pO2ZvcihtPTA7bTxkLm51bVN1cHBvcnRlZE1vcnBoVGFyZ2V0czspbFttXT8obj1sW21dWzFdLDA8PWNbXCJtb3JwaFRhcmdldFwiK21dJiYoai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLGUuX193ZWJnbE1vcnBoVGFyZ2V0c0J1ZmZlcnNbbl0pLGgoY1tcIm1vcnBoVGFyZ2V0XCIrbV0pLGoudmVydGV4QXR0cmliUG9pbnRlcihjW1wibW9ycGhUYXJnZXRcIittXSwzLGouRkxPQVQsITEsMCwwKSksMDw9Y1tcIm1vcnBoTm9ybWFsXCIrbV0mJmQubW9ycGhOb3JtYWxzJiYoai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLGUuX193ZWJnbE1vcnBoTm9ybWFsc0J1ZmZlcnNbbl0pLGgoY1tcIm1vcnBoTm9ybWFsXCIrXG5tXSksai52ZXJ0ZXhBdHRyaWJQb2ludGVyKGNbXCJtb3JwaE5vcm1hbFwiK21dLDMsai5GTE9BVCwhMSwwLDApKSxmLl9fd2ViZ2xNb3JwaFRhcmdldEluZmx1ZW5jZXNbbV09aVtuXSk6Zi5fX3dlYmdsTW9ycGhUYXJnZXRJbmZsdWVuY2VzW21dPTAsbSsrfW51bGwhPT1kLnByb2dyYW0udW5pZm9ybXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzJiZqLnVuaWZvcm0xZnYoZC5wcm9ncmFtLnVuaWZvcm1zLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcyxmLl9fd2ViZ2xNb3JwaFRhcmdldEluZmx1ZW5jZXMpfWlmKGIpe2lmKGUuX193ZWJnbEN1c3RvbUF0dHJpYnV0ZXNMaXN0KXtpPTA7Zm9yKGw9ZS5fX3dlYmdsQ3VzdG9tQXR0cmlidXRlc0xpc3QubGVuZ3RoO2k8bDtpKyspYz1lLl9fd2ViZ2xDdXN0b21BdHRyaWJ1dGVzTGlzdFtpXSwwPD1hW2MuYnVmZmVyLmJlbG9uZ3NUb0F0dHJpYnV0ZV0mJihqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsYy5idWZmZXIpLGgoYVtjLmJ1ZmZlci5iZWxvbmdzVG9BdHRyaWJ1dGVdKSxcbmoudmVydGV4QXR0cmliUG9pbnRlcihhW2MuYnVmZmVyLmJlbG9uZ3NUb0F0dHJpYnV0ZV0sYy5zaXplLGouRkxPQVQsITEsMCwwKSl9MDw9YS5jb2xvciYmKDA8Zi5nZW9tZXRyeS5jb2xvcnMubGVuZ3RofHwwPGYuZ2VvbWV0cnkuZmFjZXMubGVuZ3RoPyhqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsZS5fX3dlYmdsQ29sb3JCdWZmZXIpLGgoYS5jb2xvciksai52ZXJ0ZXhBdHRyaWJQb2ludGVyKGEuY29sb3IsMyxqLkZMT0FULCExLDAsMCkpOmQuZGVmYXVsdEF0dHJpYnV0ZVZhbHVlcyYmai52ZXJ0ZXhBdHRyaWIzZnYoYS5jb2xvcixkLmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXMuY29sb3IpKTswPD1hLm5vcm1hbCYmKGouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUixlLl9fd2ViZ2xOb3JtYWxCdWZmZXIpLGgoYS5ub3JtYWwpLGoudmVydGV4QXR0cmliUG9pbnRlcihhLm5vcm1hbCwzLGouRkxPQVQsITEsMCwwKSk7MDw9YS50YW5nZW50JiYoai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLFxuZS5fX3dlYmdsVGFuZ2VudEJ1ZmZlciksaChhLnRhbmdlbnQpLGoudmVydGV4QXR0cmliUG9pbnRlcihhLnRhbmdlbnQsNCxqLkZMT0FULCExLDAsMCkpOzA8PWEudXYmJihmLmdlb21ldHJ5LmZhY2VWZXJ0ZXhVdnNbMF0/KGouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUixlLl9fd2ViZ2xVVkJ1ZmZlciksaChhLnV2KSxqLnZlcnRleEF0dHJpYlBvaW50ZXIoYS51diwyLGouRkxPQVQsITEsMCwwKSk6ZC5kZWZhdWx0QXR0cmlidXRlVmFsdWVzJiZqLnZlcnRleEF0dHJpYjJmdihhLnV2LGQuZGVmYXVsdEF0dHJpYnV0ZVZhbHVlcy51dikpOzA8PWEudXYyJiYoZi5nZW9tZXRyeS5mYWNlVmVydGV4VXZzWzFdPyhqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsZS5fX3dlYmdsVVYyQnVmZmVyKSxoKGEudXYyKSxqLnZlcnRleEF0dHJpYlBvaW50ZXIoYS51djIsMixqLkZMT0FULCExLDAsMCkpOmQuZGVmYXVsdEF0dHJpYnV0ZVZhbHVlcyYmai52ZXJ0ZXhBdHRyaWIyZnYoYS51djIsXG5kLmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXMudXYyKSk7ZC5za2lubmluZyYmKDA8PWEuc2tpbkluZGV4JiYwPD1hLnNraW5XZWlnaHQpJiYoai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLGUuX193ZWJnbFNraW5JbmRpY2VzQnVmZmVyKSxoKGEuc2tpbkluZGV4KSxqLnZlcnRleEF0dHJpYlBvaW50ZXIoYS5za2luSW5kZXgsNCxqLkZMT0FULCExLDAsMCksai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLGUuX193ZWJnbFNraW5XZWlnaHRzQnVmZmVyKSxoKGEuc2tpbldlaWdodCksai52ZXJ0ZXhBdHRyaWJQb2ludGVyKGEuc2tpbldlaWdodCw0LGouRkxPQVQsITEsMCwwKSk7MDw9YS5saW5lRGlzdGFuY2UmJihqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsZS5fX3dlYmdsTGluZURpc3RhbmNlQnVmZmVyKSxoKGEubGluZURpc3RhbmNlKSxqLnZlcnRleEF0dHJpYlBvaW50ZXIoYS5saW5lRGlzdGFuY2UsMSxqLkZMT0FULCExLDAsMCkpfWYgaW5zdGFuY2VvZiBUSFJFRS5NZXNoP1xuKGQud2lyZWZyYW1lPyhFKGQud2lyZWZyYW1lTGluZXdpZHRoKSxiJiZqLmJpbmRCdWZmZXIoai5FTEVNRU5UX0FSUkFZX0JVRkZFUixlLl9fd2ViZ2xMaW5lQnVmZmVyKSxqLmRyYXdFbGVtZW50cyhqLkxJTkVTLGUuX193ZWJnbExpbmVDb3VudCxqLlVOU0lHTkVEX1NIT1JULDApKTooYiYmai5iaW5kQnVmZmVyKGouRUxFTUVOVF9BUlJBWV9CVUZGRVIsZS5fX3dlYmdsRmFjZUJ1ZmZlciksai5kcmF3RWxlbWVudHMoai5UUklBTkdMRVMsZS5fX3dlYmdsRmFjZUNvdW50LGouVU5TSUdORURfU0hPUlQsMCkpLEwuaW5mby5yZW5kZXIuY2FsbHMrKyxMLmluZm8ucmVuZGVyLnZlcnRpY2VzKz1lLl9fd2ViZ2xGYWNlQ291bnQsTC5pbmZvLnJlbmRlci5mYWNlcys9ZS5fX3dlYmdsRmFjZUNvdW50LzMpOmYgaW5zdGFuY2VvZiBUSFJFRS5MaW5lPyhmPWYudHlwZT09PVRIUkVFLkxpbmVTdHJpcD9qLkxJTkVfU1RSSVA6ai5MSU5FUyxFKGQubGluZXdpZHRoKSxqLmRyYXdBcnJheXMoZiwwLFxuZS5fX3dlYmdsTGluZUNvdW50KSxMLmluZm8ucmVuZGVyLmNhbGxzKyspOmYgaW5zdGFuY2VvZiBUSFJFRS5QYXJ0aWNsZVN5c3RlbSYmKGouZHJhd0FycmF5cyhqLlBPSU5UUywwLGUuX193ZWJnbFBhcnRpY2xlQ291bnQpLEwuaW5mby5yZW5kZXIuY2FsbHMrKyxMLmluZm8ucmVuZGVyLnBvaW50cys9ZS5fX3dlYmdsUGFydGljbGVDb3VudCl9fTt0aGlzLnJlbmRlcj1mdW5jdGlvbihhLGIsYyxkKXtpZighMT09PWIgaW5zdGFuY2VvZiBUSFJFRS5DYW1lcmEpY29uc29sZS5lcnJvcihcIlRIUkVFLldlYkdMUmVuZGVyZXIucmVuZGVyOiBjYW1lcmEgaXMgbm90IGFuIGluc3RhbmNlIG9mIFRIUkVFLkNhbWVyYS5cIik7ZWxzZXt2YXIgZSxmLGcsaCxrPWEuX19saWdodHMsbj1hLmZvZztBYT0tMTt0YT0hMDshMD09PWEuYXV0b1VwZGF0ZSYmYS51cGRhdGVNYXRyaXhXb3JsZCgpO3ZvaWQgMD09PWIucGFyZW50JiZiLnVwZGF0ZU1hdHJpeFdvcmxkKCk7Yi5tYXRyaXhXb3JsZEludmVyc2UuZ2V0SW52ZXJzZShiLm1hdHJpeFdvcmxkKTtcbkVhLm11bHRpcGx5TWF0cmljZXMoYi5wcm9qZWN0aW9uTWF0cml4LGIubWF0cml4V29ybGRJbnZlcnNlKTtsYS5zZXRGcm9tTWF0cml4KEVhKTt0aGlzLmF1dG9VcGRhdGVPYmplY3RzJiZ0aGlzLmluaXRXZWJHTE9iamVjdHMoYSk7bSh0aGlzLnJlbmRlclBsdWdpbnNQcmUsYSxiKTtMLmluZm8ucmVuZGVyLmNhbGxzPTA7TC5pbmZvLnJlbmRlci52ZXJ0aWNlcz0wO0wuaW5mby5yZW5kZXIuZmFjZXM9MDtMLmluZm8ucmVuZGVyLnBvaW50cz0wO3RoaXMuc2V0UmVuZGVyVGFyZ2V0KGMpOyh0aGlzLmF1dG9DbGVhcnx8ZCkmJnRoaXMuY2xlYXIodGhpcy5hdXRvQ2xlYXJDb2xvcix0aGlzLmF1dG9DbGVhckRlcHRoLHRoaXMuYXV0b0NsZWFyU3RlbmNpbCk7aD1hLl9fd2ViZ2xPYmplY3RzO2Q9MDtmb3IoZT1oLmxlbmd0aDtkPGU7ZCsrKWlmKGY9aFtkXSxnPWYub2JqZWN0LGYuaWQ9ZCxmLnJlbmRlcj0hMSxnLnZpc2libGUmJighKGcgaW5zdGFuY2VvZiBUSFJFRS5NZXNofHxnIGluc3RhbmNlb2ZcblRIUkVFLlBhcnRpY2xlU3lzdGVtKXx8IWcuZnJ1c3R1bUN1bGxlZHx8bGEuaW50ZXJzZWN0c09iamVjdChnKSkpe3ZhciBxPWc7cS5fbW9kZWxWaWV3TWF0cml4Lm11bHRpcGx5TWF0cmljZXMoYi5tYXRyaXhXb3JsZEludmVyc2UscS5tYXRyaXhXb3JsZCk7cS5fbm9ybWFsTWF0cml4LmdldE5vcm1hbE1hdHJpeChxLl9tb2RlbFZpZXdNYXRyaXgpO3ZhciBxPWYscj1xLmJ1ZmZlcix0PXZvaWQgMCxzPXQ9dm9pZCAwLHM9cS5vYmplY3QubWF0ZXJpYWw7aWYocyBpbnN0YW5jZW9mIFRIUkVFLk1lc2hGYWNlTWF0ZXJpYWwpdD1yLm1hdGVyaWFsSW5kZXgsdD1zLm1hdGVyaWFsc1t0XSx0LnRyYW5zcGFyZW50PyhxLnRyYW5zcGFyZW50PXQscS5vcGFxdWU9bnVsbCk6KHEub3BhcXVlPXQscS50cmFuc3BhcmVudD1udWxsKTtlbHNlIGlmKHQ9cyl0LnRyYW5zcGFyZW50PyhxLnRyYW5zcGFyZW50PXQscS5vcGFxdWU9bnVsbCk6KHEub3BhcXVlPXQscS50cmFuc3BhcmVudD1udWxsKTtmLnJlbmRlcj1cbiEwOyEwPT09dGhpcy5zb3J0T2JqZWN0cyYmKG51bGwhPT1nLnJlbmRlckRlcHRoP2Yuej1nLnJlbmRlckRlcHRoOihyYS5zZXRGcm9tTWF0cml4UG9zaXRpb24oZy5tYXRyaXhXb3JsZCkscmEuYXBwbHlQcm9qZWN0aW9uKEVhKSxmLno9cmEueikpfXRoaXMuc29ydE9iamVjdHMmJmguc29ydChpKTtoPWEuX193ZWJnbE9iamVjdHNJbW1lZGlhdGU7ZD0wO2ZvcihlPWgubGVuZ3RoO2Q8ZTtkKyspZj1oW2RdLGc9Zi5vYmplY3QsZy52aXNpYmxlJiYoZy5fbW9kZWxWaWV3TWF0cml4Lm11bHRpcGx5TWF0cmljZXMoYi5tYXRyaXhXb3JsZEludmVyc2UsZy5tYXRyaXhXb3JsZCksZy5fbm9ybWFsTWF0cml4LmdldE5vcm1hbE1hdHJpeChnLl9tb2RlbFZpZXdNYXRyaXgpLGc9Zi5vYmplY3QubWF0ZXJpYWwsZy50cmFuc3BhcmVudD8oZi50cmFuc3BhcmVudD1nLGYub3BhcXVlPW51bGwpOihmLm9wYXF1ZT1nLGYudHJhbnNwYXJlbnQ9bnVsbCkpO2Eub3ZlcnJpZGVNYXRlcmlhbD8oZD1hLm92ZXJyaWRlTWF0ZXJpYWwsXG50aGlzLnNldEJsZW5kaW5nKGQuYmxlbmRpbmcsZC5ibGVuZEVxdWF0aW9uLGQuYmxlbmRTcmMsZC5ibGVuZERzdCksdGhpcy5zZXREZXB0aFRlc3QoZC5kZXB0aFRlc3QpLHRoaXMuc2V0RGVwdGhXcml0ZShkLmRlcHRoV3JpdGUpLEEoZC5wb2x5Z29uT2Zmc2V0LGQucG9seWdvbk9mZnNldEZhY3RvcixkLnBvbHlnb25PZmZzZXRVbml0cyksbChhLl9fd2ViZ2xPYmplY3RzLCExLFwiXCIsYixrLG4sITAsZCkscChhLl9fd2ViZ2xPYmplY3RzSW1tZWRpYXRlLFwiXCIsYixrLG4sITEsZCkpOihkPW51bGwsdGhpcy5zZXRCbGVuZGluZyhUSFJFRS5Ob0JsZW5kaW5nKSxsKGEuX193ZWJnbE9iamVjdHMsITAsXCJvcGFxdWVcIixiLGssbiwhMSxkKSxwKGEuX193ZWJnbE9iamVjdHNJbW1lZGlhdGUsXCJvcGFxdWVcIixiLGssbiwhMSxkKSxsKGEuX193ZWJnbE9iamVjdHMsITEsXCJ0cmFuc3BhcmVudFwiLGIsayxuLCEwLGQpLHAoYS5fX3dlYmdsT2JqZWN0c0ltbWVkaWF0ZSxcInRyYW5zcGFyZW50XCIsYixcbmssbiwhMCxkKSk7bSh0aGlzLnJlbmRlclBsdWdpbnNQb3N0LGEsYik7YyYmKGMuZ2VuZXJhdGVNaXBtYXBzJiZjLm1pbkZpbHRlciE9PVRIUkVFLk5lYXJlc3RGaWx0ZXImJmMubWluRmlsdGVyIT09VEhSRUUuTGluZWFyRmlsdGVyKSYmKGMgaW5zdGFuY2VvZiBUSFJFRS5XZWJHTFJlbmRlclRhcmdldEN1YmU/KGouYmluZFRleHR1cmUoai5URVhUVVJFX0NVQkVfTUFQLGMuX193ZWJnbFRleHR1cmUpLGouZ2VuZXJhdGVNaXBtYXAoai5URVhUVVJFX0NVQkVfTUFQKSxqLmJpbmRUZXh0dXJlKGouVEVYVFVSRV9DVUJFX01BUCxudWxsKSk6KGouYmluZFRleHR1cmUoai5URVhUVVJFXzJELGMuX193ZWJnbFRleHR1cmUpLGouZ2VuZXJhdGVNaXBtYXAoai5URVhUVVJFXzJEKSxqLmJpbmRUZXh0dXJlKGouVEVYVFVSRV8yRCxudWxsKSkpO3RoaXMuc2V0RGVwdGhUZXN0KCEwKTt0aGlzLnNldERlcHRoV3JpdGUoITApfX07dGhpcy5yZW5kZXJJbW1lZGlhdGVPYmplY3Q9ZnVuY3Rpb24oYSxcbmIsYyxkLGUpe3ZhciBmPXooYSxiLGMsZCxlKTskPS0xO0wuc2V0TWF0ZXJpYWxGYWNlcyhkKTtlLmltbWVkaWF0ZVJlbmRlckNhbGxiYWNrP2UuaW1tZWRpYXRlUmVuZGVyQ2FsbGJhY2soZixqLGxhKTplLnJlbmRlcihmdW5jdGlvbihhKXtMLnJlbmRlckJ1ZmZlckltbWVkaWF0ZShhLGYsZCl9KX07dGhpcy5pbml0V2ViR0xPYmplY3RzPWZ1bmN0aW9uKGEpe2EuX193ZWJnbE9iamVjdHN8fChhLl9fd2ViZ2xPYmplY3RzPVtdLGEuX193ZWJnbE9iamVjdHNJbW1lZGlhdGU9W10sYS5fX3dlYmdsU3ByaXRlcz1bXSxhLl9fd2ViZ2xGbGFyZXM9W10pO2Zvcig7YS5fX29iamVjdHNBZGRlZC5sZW5ndGg7KXQoYS5fX29iamVjdHNBZGRlZFswXSxhKSxhLl9fb2JqZWN0c0FkZGVkLnNwbGljZSgwLDEpO2Zvcig7YS5fX29iamVjdHNSZW1vdmVkLmxlbmd0aDspdShhLl9fb2JqZWN0c1JlbW92ZWRbMF0sYSksYS5fX29iamVjdHNSZW1vdmVkLnNwbGljZSgwLDEpO2Zvcih2YXIgYj0wLGc9YS5fX3dlYmdsT2JqZWN0cy5sZW5ndGg7Yjxcbmc7YisrKXt2YXIgaD1hLl9fd2ViZ2xPYmplY3RzW2JdLm9iamVjdDt2b2lkIDA9PT1oLl9fd2ViZ2xJbml0JiYodm9pZCAwIT09aC5fX3dlYmdsQWN0aXZlJiZ1KGgsYSksdChoLGEpKTt2YXIgaT1oLGw9aS5nZW9tZXRyeSxtPXZvaWQgMCxwPXZvaWQgMCxyPXZvaWQgMDtpZihsIGluc3RhbmNlb2YgVEhSRUUuQnVmZmVyR2VvbWV0cnkpe3ZhciBzPWouRFlOQU1JQ19EUkFXLHY9IWwuZHluYW1pYyx6PWwuYXR0cmlidXRlcyx5PXZvaWQgMCx4PXZvaWQgMDtmb3IoeSBpbiB6KXg9elt5XSx4Lm5lZWRzVXBkYXRlJiYoXCJpbmRleFwiPT09eT8oai5iaW5kQnVmZmVyKGouRUxFTUVOVF9BUlJBWV9CVUZGRVIseC5idWZmZXIpLGouYnVmZmVyRGF0YShqLkVMRU1FTlRfQVJSQVlfQlVGRkVSLHguYXJyYXkscykpOihqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIseC5idWZmZXIpLGouYnVmZmVyRGF0YShqLkFSUkFZX0JVRkZFUix4LmFycmF5LHMpKSx4Lm5lZWRzVXBkYXRlPSExKSx2JiYheC5keW5hbWljJiZcbih4LmFycmF5PW51bGwpfWVsc2UgaWYoaSBpbnN0YW5jZW9mIFRIUkVFLk1lc2gpe2Zvcih2YXIgQT0wLEI9bC5nZW9tZXRyeUdyb3Vwc0xpc3QubGVuZ3RoO0E8QjtBKyspaWYobT1sLmdlb21ldHJ5R3JvdXBzTGlzdFtBXSxyPWQoaSxtKSxsLmJ1ZmZlcnNOZWVkVXBkYXRlJiZjKG0saSkscD1yLmF0dHJpYnV0ZXMmJnEociksbC52ZXJ0aWNlc05lZWRVcGRhdGV8fGwubW9ycGhUYXJnZXRzTmVlZFVwZGF0ZXx8bC5lbGVtZW50c05lZWRVcGRhdGV8fGwudXZzTmVlZFVwZGF0ZXx8bC5ub3JtYWxzTmVlZFVwZGF0ZXx8bC5jb2xvcnNOZWVkVXBkYXRlfHxsLnRhbmdlbnRzTmVlZFVwZGF0ZXx8cCl7dmFyIHc9bSxFPWksRD1qLkRZTkFNSUNfRFJBVyxHPSFsLmR5bmFtaWMsRj1yO2lmKHcuX19pbml0dGVkQXJyYXlzKXt2YXIgSz1lKEYpLEk9Ri52ZXJ0ZXhDb2xvcnM/Ri52ZXJ0ZXhDb2xvcnM6ITEsTD1mKEYpLE89Sz09PVRIUkVFLlNtb290aFNoYWRpbmcsQz12b2lkIDAsSj12b2lkIDAsXG5WPXZvaWQgMCxNPXZvaWQgMCxRPXZvaWQgMCxiYT12b2lkIDAsUj12b2lkIDAsVT12b2lkIDAsWT12b2lkIDAsemE9dm9pZCAwLCQ9dm9pZCAwLFA9dm9pZCAwLFg9dm9pZCAwLFc9dm9pZCAwLEJhPXZvaWQgMCxlYT12b2lkIDAsQWE9dm9pZCAwLGNhPXZvaWQgMCxkYT12b2lkIDAsaGE9dm9pZCAwLGZhPXZvaWQgMCxqYT12b2lkIDAsa2E9dm9pZCAwLGxhPXZvaWQgMCxuYT12b2lkIDAscGE9dm9pZCAwLHNhPXZvaWQgMCx0YT12b2lkIDAsdWE9dm9pZCAwLENhPXZvaWQgMCxEYT12b2lkIDAsR2E9dm9pZCAwLEZhPXZvaWQgMCxLYT12b2lkIDAsU2E9dm9pZCAwLExhPXZvaWQgMCx2YT12b2lkIDAsd2E9dm9pZCAwLFFhPXZvaWQgMCxSYT12b2lkIDAsZGI9MCxlYj0wLE9hPTAsUGE9MCxVYT0wLGhiPTAsVGE9MCx0Yj0wLFphPTAscWE9MCx4YT0wLE49MCxOYT12b2lkIDAsaWI9dy5fX3ZlcnRleEFycmF5LGJiPXcuX191dkFycmF5LGNiPXcuX191djJBcnJheSxNYT13Ll9fbm9ybWFsQXJyYXksXG5WYT13Ll9fdGFuZ2VudEFycmF5LGpiPXcuX19jb2xvckFycmF5LFdhPXcuX19za2luSW5kZXhBcnJheSxYYT13Ll9fc2tpbldlaWdodEFycmF5LGZiPXcuX19tb3JwaFRhcmdldHNBcnJheXMsc2I9dy5fX21vcnBoTm9ybWFsc0FycmF5cyxwYj13Ll9fd2ViZ2xDdXN0b21BdHRyaWJ1dGVzTGlzdCxIPXZvaWQgMCxQYj13Ll9fZmFjZUFycmF5LHZiPXcuX19saW5lQXJyYXksSGE9RS5nZW9tZXRyeSxCYj1IYS5lbGVtZW50c05lZWRVcGRhdGUseWI9SGEudXZzTmVlZFVwZGF0ZSxEYj1IYS5ub3JtYWxzTmVlZFVwZGF0ZSxNYj1IYS50YW5nZW50c05lZWRVcGRhdGUsTmI9SGEuY29sb3JzTmVlZFVwZGF0ZSxPYj1IYS5tb3JwaFRhcmdldHNOZWVkVXBkYXRlLGVjPUhhLnZlcnRpY2VzLGFhPXcuZmFjZXMzLGtiPUhhLmZhY2VzLENiPUhhLmZhY2VWZXJ0ZXhVdnNbMF0sRWI9SGEuZmFjZVZlcnRleFV2c1sxXSxmYz1IYS5za2luSW5kaWNlcyxRYj1IYS5za2luV2VpZ2h0cyxSYj1IYS5tb3JwaFRhcmdldHMsXG5GYj1IYS5tb3JwaE5vcm1hbHM7aWYoSGEudmVydGljZXNOZWVkVXBkYXRlKXtDPTA7Zm9yKEo9YWEubGVuZ3RoO0M8SjtDKyspTT1rYlthYVtDXV0sUD1lY1tNLmFdLFg9ZWNbTS5iXSxXPWVjW00uY10saWJbZWJdPVAueCxpYltlYisxXT1QLnksaWJbZWIrMl09UC56LGliW2ViKzNdPVgueCxpYltlYis0XT1YLnksaWJbZWIrNV09WC56LGliW2ViKzZdPVcueCxpYltlYis3XT1XLnksaWJbZWIrOF09Vy56LGViKz05O2ouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUix3Ll9fd2ViZ2xWZXJ0ZXhCdWZmZXIpO2ouYnVmZmVyRGF0YShqLkFSUkFZX0JVRkZFUixpYixEKX1pZihPYil7U2E9MDtmb3IoTGE9UmIubGVuZ3RoO1NhPExhO1NhKyspe0M9eGE9MDtmb3IoSj1hYS5sZW5ndGg7QzxKO0MrKylRYT1hYVtDXSxNPWtiW1FhXSxQPVJiW1NhXS52ZXJ0aWNlc1tNLmFdLFg9UmJbU2FdLnZlcnRpY2VzW00uYl0sVz1SYltTYV0udmVydGljZXNbTS5jXSx2YT1mYltTYV0sdmFbeGFdPVAueCxcbnZhW3hhKzFdPVAueSx2YVt4YSsyXT1QLnosdmFbeGErM109WC54LHZhW3hhKzRdPVgueSx2YVt4YSs1XT1YLnosdmFbeGErNl09Vy54LHZhW3hhKzddPVcueSx2YVt4YSs4XT1XLnosRi5tb3JwaE5vcm1hbHMmJihPPyhSYT1GYltTYV0udmVydGV4Tm9ybWFsc1tRYV0sY2E9UmEuYSxkYT1SYS5iLGhhPVJhLmMpOmhhPWRhPWNhPUZiW1NhXS5mYWNlTm9ybWFsc1tRYV0sd2E9c2JbU2FdLHdhW3hhXT1jYS54LHdhW3hhKzFdPWNhLnksd2FbeGErMl09Y2Eueix3YVt4YSszXT1kYS54LHdhW3hhKzRdPWRhLnksd2FbeGErNV09ZGEueix3YVt4YSs2XT1oYS54LHdhW3hhKzddPWhhLnksd2FbeGErOF09aGEueikseGErPTk7ai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLHcuX193ZWJnbE1vcnBoVGFyZ2V0c0J1ZmZlcnNbU2FdKTtqLmJ1ZmZlckRhdGEoai5BUlJBWV9CVUZGRVIsZmJbU2FdLEQpO0YubW9ycGhOb3JtYWxzJiYoai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLHcuX193ZWJnbE1vcnBoTm9ybWFsc0J1ZmZlcnNbU2FdKSxcbmouYnVmZmVyRGF0YShqLkFSUkFZX0JVRkZFUixzYltTYV0sRCkpfX1pZihRYi5sZW5ndGgpe0M9MDtmb3IoSj1hYS5sZW5ndGg7QzxKO0MrKylNPWtiW2FhW0NdXSxsYT1RYltNLmFdLG5hPVFiW00uYl0scGE9UWJbTS5jXSxYYVtxYV09bGEueCxYYVtxYSsxXT1sYS55LFhhW3FhKzJdPWxhLnosWGFbcWErM109bGEudyxYYVtxYSs0XT1uYS54LFhhW3FhKzVdPW5hLnksWGFbcWErNl09bmEueixYYVtxYSs3XT1uYS53LFhhW3FhKzhdPXBhLngsWGFbcWErOV09cGEueSxYYVtxYSsxMF09cGEueixYYVtxYSsxMV09cGEudyxzYT1mY1tNLmFdLHRhPWZjW00uYl0sdWE9ZmNbTS5jXSxXYVtxYV09c2EueCxXYVtxYSsxXT1zYS55LFdhW3FhKzJdPXNhLnosV2FbcWErM109c2EudyxXYVtxYSs0XT10YS54LFdhW3FhKzVdPXRhLnksV2FbcWErNl09dGEueixXYVtxYSs3XT10YS53LFdhW3FhKzhdPXVhLngsV2FbcWErOV09dWEueSxXYVtxYSsxMF09dWEueixXYVtxYSsxMV09dWEudyxxYSs9MTI7XG4wPHFhJiYoai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLHcuX193ZWJnbFNraW5JbmRpY2VzQnVmZmVyKSxqLmJ1ZmZlckRhdGEoai5BUlJBWV9CVUZGRVIsV2EsRCksai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLHcuX193ZWJnbFNraW5XZWlnaHRzQnVmZmVyKSxqLmJ1ZmZlckRhdGEoai5BUlJBWV9CVUZGRVIsWGEsRCkpfWlmKE5iJiZJKXtDPTA7Zm9yKEo9YWEubGVuZ3RoO0M8SjtDKyspTT1rYlthYVtDXV0sUj1NLnZlcnRleENvbG9ycyxVPU0uY29sb3IsMz09PVIubGVuZ3RoJiZJPT09VEhSRUUuVmVydGV4Q29sb3JzPyhmYT1SWzBdLGphPVJbMV0sa2E9UlsyXSk6a2E9amE9ZmE9VSxqYltaYV09ZmEucixqYltaYSsxXT1mYS5nLGpiW1phKzJdPWZhLmIsamJbWmErM109amEucixqYltaYSs0XT1qYS5nLGpiW1phKzVdPWphLmIsamJbWmErNl09a2EucixqYltaYSs3XT1rYS5nLGpiW1phKzhdPWthLmIsWmErPTk7MDxaYSYmKGouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUixcbncuX193ZWJnbENvbG9yQnVmZmVyKSxqLmJ1ZmZlckRhdGEoai5BUlJBWV9CVUZGRVIsamIsRCkpfWlmKE1iJiZIYS5oYXNUYW5nZW50cyl7Qz0wO2ZvcihKPWFhLmxlbmd0aDtDPEo7QysrKU09a2JbYWFbQ11dLFk9TS52ZXJ0ZXhUYW5nZW50cyxCYT1ZWzBdLGVhPVlbMV0sQWE9WVsyXSxWYVtUYV09QmEueCxWYVtUYSsxXT1CYS55LFZhW1RhKzJdPUJhLnosVmFbVGErM109QmEudyxWYVtUYSs0XT1lYS54LFZhW1RhKzVdPWVhLnksVmFbVGErNl09ZWEueixWYVtUYSs3XT1lYS53LFZhW1RhKzhdPUFhLngsVmFbVGErOV09QWEueSxWYVtUYSsxMF09QWEueixWYVtUYSsxMV09QWEudyxUYSs9MTI7ai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLHcuX193ZWJnbFRhbmdlbnRCdWZmZXIpO2ouYnVmZmVyRGF0YShqLkFSUkFZX0JVRkZFUixWYSxEKX1pZihEYiYmSyl7Qz0wO2ZvcihKPWFhLmxlbmd0aDtDPEo7QysrKWlmKE09a2JbYWFbQ11dLFE9TS52ZXJ0ZXhOb3JtYWxzLGJhPU0ubm9ybWFsLFxuMz09PVEubGVuZ3RoJiZPKWZvcihDYT0wOzM+Q2E7Q2ErKylHYT1RW0NhXSxNYVtoYl09R2EueCxNYVtoYisxXT1HYS55LE1hW2hiKzJdPUdhLnosaGIrPTM7ZWxzZSBmb3IoQ2E9MDszPkNhO0NhKyspTWFbaGJdPWJhLngsTWFbaGIrMV09YmEueSxNYVtoYisyXT1iYS56LGhiKz0zO2ouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUix3Ll9fd2ViZ2xOb3JtYWxCdWZmZXIpO2ouYnVmZmVyRGF0YShqLkFSUkFZX0JVRkZFUixNYSxEKX1pZih5YiYmQ2ImJkwpe0M9MDtmb3IoSj1hYS5sZW5ndGg7QzxKO0MrKylpZihWPWFhW0NdLHphPUNiW1ZdLHZvaWQgMCE9PXphKWZvcihDYT0wOzM+Q2E7Q2ErKylGYT16YVtDYV0sYmJbT2FdPUZhLngsYmJbT2ErMV09RmEueSxPYSs9MjswPE9hJiYoai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLHcuX193ZWJnbFVWQnVmZmVyKSxqLmJ1ZmZlckRhdGEoai5BUlJBWV9CVUZGRVIsYmIsRCkpfWlmKHliJiZFYiYmTCl7Qz0wO2ZvcihKPWFhLmxlbmd0aDtDPFxuSjtDKyspaWYoVj1hYVtDXSwkPUViW1ZdLHZvaWQgMCE9PSQpZm9yKENhPTA7Mz5DYTtDYSsrKUthPSRbQ2FdLGNiW1BhXT1LYS54LGNiW1BhKzFdPUthLnksUGErPTI7MDxQYSYmKGouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUix3Ll9fd2ViZ2xVVjJCdWZmZXIpLGouYnVmZmVyRGF0YShqLkFSUkFZX0JVRkZFUixjYixEKSl9aWYoQmIpe0M9MDtmb3IoSj1hYS5sZW5ndGg7QzxKO0MrKylQYltVYV09ZGIsUGJbVWErMV09ZGIrMSxQYltVYSsyXT1kYisyLFVhKz0zLHZiW3RiXT1kYix2Ylt0YisxXT1kYisxLHZiW3RiKzJdPWRiLHZiW3RiKzNdPWRiKzIsdmJbdGIrNF09ZGIrMSx2Ylt0Yis1XT1kYisyLHRiKz02LGRiKz0zO2ouYmluZEJ1ZmZlcihqLkVMRU1FTlRfQVJSQVlfQlVGRkVSLHcuX193ZWJnbEZhY2VCdWZmZXIpO2ouYnVmZmVyRGF0YShqLkVMRU1FTlRfQVJSQVlfQlVGRkVSLFBiLEQpO2ouYmluZEJ1ZmZlcihqLkVMRU1FTlRfQVJSQVlfQlVGRkVSLHcuX193ZWJnbExpbmVCdWZmZXIpO1xuai5idWZmZXJEYXRhKGouRUxFTUVOVF9BUlJBWV9CVUZGRVIsdmIsRCl9aWYocGIpe0NhPTA7Zm9yKERhPXBiLmxlbmd0aDtDYTxEYTtDYSsrKWlmKEg9cGJbQ2FdLEguX19vcmlnaW5hbC5uZWVkc1VwZGF0ZSl7Tj0wO2lmKDE9PT1ILnNpemUpaWYodm9pZCAwPT09SC5ib3VuZFRvfHxcInZlcnRpY2VzXCI9PT1ILmJvdW5kVG8pe0M9MDtmb3IoSj1hYS5sZW5ndGg7QzxKO0MrKylNPWtiW2FhW0NdXSxILmFycmF5W05dPUgudmFsdWVbTS5hXSxILmFycmF5W04rMV09SC52YWx1ZVtNLmJdLEguYXJyYXlbTisyXT1ILnZhbHVlW00uY10sTis9M31lbHNle2lmKFwiZmFjZXNcIj09PUguYm91bmRUbyl7Qz0wO2ZvcihKPWFhLmxlbmd0aDtDPEo7QysrKU5hPUgudmFsdWVbYWFbQ11dLEguYXJyYXlbTl09TmEsSC5hcnJheVtOKzFdPU5hLEguYXJyYXlbTisyXT1OYSxOKz0zfX1lbHNlIGlmKDI9PT1ILnNpemUpaWYodm9pZCAwPT09SC5ib3VuZFRvfHxcInZlcnRpY2VzXCI9PT1ILmJvdW5kVG8pe0M9XG4wO2ZvcihKPWFhLmxlbmd0aDtDPEo7QysrKU09a2JbYWFbQ11dLFA9SC52YWx1ZVtNLmFdLFg9SC52YWx1ZVtNLmJdLFc9SC52YWx1ZVtNLmNdLEguYXJyYXlbTl09UC54LEguYXJyYXlbTisxXT1QLnksSC5hcnJheVtOKzJdPVgueCxILmFycmF5W04rM109WC55LEguYXJyYXlbTis0XT1XLngsSC5hcnJheVtOKzVdPVcueSxOKz02fWVsc2V7aWYoXCJmYWNlc1wiPT09SC5ib3VuZFRvKXtDPTA7Zm9yKEo9YWEubGVuZ3RoO0M8SjtDKyspVz1YPVA9TmE9SC52YWx1ZVthYVtDXV0sSC5hcnJheVtOXT1QLngsSC5hcnJheVtOKzFdPVAueSxILmFycmF5W04rMl09WC54LEguYXJyYXlbTiszXT1YLnksSC5hcnJheVtOKzRdPVcueCxILmFycmF5W04rNV09Vy55LE4rPTZ9fWVsc2UgaWYoMz09PUguc2l6ZSl7dmFyIG9hO29hPVwiY1wiPT09SC50eXBlP1tcInJcIixcImdcIixcImJcIl06W1wieFwiLFwieVwiLFwielwiXTtpZih2b2lkIDA9PT1ILmJvdW5kVG98fFwidmVydGljZXNcIj09PUguYm91bmRUbyl7Qz0wO2ZvcihKPVxuYWEubGVuZ3RoO0M8SjtDKyspTT1rYlthYVtDXV0sUD1ILnZhbHVlW00uYV0sWD1ILnZhbHVlW00uYl0sVz1ILnZhbHVlW00uY10sSC5hcnJheVtOXT1QW29hWzBdXSxILmFycmF5W04rMV09UFtvYVsxXV0sSC5hcnJheVtOKzJdPVBbb2FbMl1dLEguYXJyYXlbTiszXT1YW29hWzBdXSxILmFycmF5W04rNF09WFtvYVsxXV0sSC5hcnJheVtOKzVdPVhbb2FbMl1dLEguYXJyYXlbTis2XT1XW29hWzBdXSxILmFycmF5W04rN109V1tvYVsxXV0sSC5hcnJheVtOKzhdPVdbb2FbMl1dLE4rPTl9ZWxzZSBpZihcImZhY2VzXCI9PT1ILmJvdW5kVG8pe0M9MDtmb3IoSj1hYS5sZW5ndGg7QzxKO0MrKylXPVg9UD1OYT1ILnZhbHVlW2FhW0NdXSxILmFycmF5W05dPVBbb2FbMF1dLEguYXJyYXlbTisxXT1QW29hWzFdXSxILmFycmF5W04rMl09UFtvYVsyXV0sSC5hcnJheVtOKzNdPVhbb2FbMF1dLEguYXJyYXlbTis0XT1YW29hWzFdXSxILmFycmF5W04rNV09WFtvYVsyXV0sSC5hcnJheVtOKzZdPVdbb2FbMF1dLFxuSC5hcnJheVtOKzddPVdbb2FbMV1dLEguYXJyYXlbTis4XT1XW29hWzJdXSxOKz05fWVsc2UgaWYoXCJmYWNlVmVydGljZXNcIj09PUguYm91bmRUbyl7Qz0wO2ZvcihKPWFhLmxlbmd0aDtDPEo7QysrKU5hPUgudmFsdWVbYWFbQ11dLFA9TmFbMF0sWD1OYVsxXSxXPU5hWzJdLEguYXJyYXlbTl09UFtvYVswXV0sSC5hcnJheVtOKzFdPVBbb2FbMV1dLEguYXJyYXlbTisyXT1QW29hWzJdXSxILmFycmF5W04rM109WFtvYVswXV0sSC5hcnJheVtOKzRdPVhbb2FbMV1dLEguYXJyYXlbTis1XT1YW29hWzJdXSxILmFycmF5W04rNl09V1tvYVswXV0sSC5hcnJheVtOKzddPVdbb2FbMV1dLEguYXJyYXlbTis4XT1XW29hWzJdXSxOKz05fX1lbHNlIGlmKDQ9PT1ILnNpemUpaWYodm9pZCAwPT09SC5ib3VuZFRvfHxcInZlcnRpY2VzXCI9PT1ILmJvdW5kVG8pe0M9MDtmb3IoSj1hYS5sZW5ndGg7QzxKO0MrKylNPWtiW2FhW0NdXSxQPUgudmFsdWVbTS5hXSxYPUgudmFsdWVbTS5iXSxXPUgudmFsdWVbTS5jXSxcbkguYXJyYXlbTl09UC54LEguYXJyYXlbTisxXT1QLnksSC5hcnJheVtOKzJdPVAueixILmFycmF5W04rM109UC53LEguYXJyYXlbTis0XT1YLngsSC5hcnJheVtOKzVdPVgueSxILmFycmF5W04rNl09WC56LEguYXJyYXlbTis3XT1YLncsSC5hcnJheVtOKzhdPVcueCxILmFycmF5W04rOV09Vy55LEguYXJyYXlbTisxMF09Vy56LEguYXJyYXlbTisxMV09Vy53LE4rPTEyfWVsc2UgaWYoXCJmYWNlc1wiPT09SC5ib3VuZFRvKXtDPTA7Zm9yKEo9YWEubGVuZ3RoO0M8SjtDKyspVz1YPVA9TmE9SC52YWx1ZVthYVtDXV0sSC5hcnJheVtOXT1QLngsSC5hcnJheVtOKzFdPVAueSxILmFycmF5W04rMl09UC56LEguYXJyYXlbTiszXT1QLncsSC5hcnJheVtOKzRdPVgueCxILmFycmF5W04rNV09WC55LEguYXJyYXlbTis2XT1YLnosSC5hcnJheVtOKzddPVgudyxILmFycmF5W04rOF09Vy54LEguYXJyYXlbTis5XT1XLnksSC5hcnJheVtOKzEwXT1XLnosSC5hcnJheVtOKzExXT1XLncsTis9MTJ9ZWxzZSBpZihcImZhY2VWZXJ0aWNlc1wiPT09XG5ILmJvdW5kVG8pe0M9MDtmb3IoSj1hYS5sZW5ndGg7QzxKO0MrKylOYT1ILnZhbHVlW2FhW0NdXSxQPU5hWzBdLFg9TmFbMV0sVz1OYVsyXSxILmFycmF5W05dPVAueCxILmFycmF5W04rMV09UC55LEguYXJyYXlbTisyXT1QLnosSC5hcnJheVtOKzNdPVAudyxILmFycmF5W04rNF09WC54LEguYXJyYXlbTis1XT1YLnksSC5hcnJheVtOKzZdPVgueixILmFycmF5W04rN109WC53LEguYXJyYXlbTis4XT1XLngsSC5hcnJheVtOKzldPVcueSxILmFycmF5W04rMTBdPVcueixILmFycmF5W04rMTFdPVcudyxOKz0xMn1qLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsSC5idWZmZXIpO2ouYnVmZmVyRGF0YShqLkFSUkFZX0JVRkZFUixILmFycmF5LEQpfX1HJiYoZGVsZXRlIHcuX19pbml0dGVkQXJyYXlzLGRlbGV0ZSB3Ll9fY29sb3JBcnJheSxkZWxldGUgdy5fX25vcm1hbEFycmF5LGRlbGV0ZSB3Ll9fdGFuZ2VudEFycmF5LGRlbGV0ZSB3Ll9fdXZBcnJheSxkZWxldGUgdy5fX3V2MkFycmF5LFxuZGVsZXRlIHcuX19mYWNlQXJyYXksZGVsZXRlIHcuX192ZXJ0ZXhBcnJheSxkZWxldGUgdy5fX2xpbmVBcnJheSxkZWxldGUgdy5fX3NraW5JbmRleEFycmF5LGRlbGV0ZSB3Ll9fc2tpbldlaWdodEFycmF5KX19bC52ZXJ0aWNlc05lZWRVcGRhdGU9ITE7bC5tb3JwaFRhcmdldHNOZWVkVXBkYXRlPSExO2wuZWxlbWVudHNOZWVkVXBkYXRlPSExO2wudXZzTmVlZFVwZGF0ZT0hMTtsLm5vcm1hbHNOZWVkVXBkYXRlPSExO2wuY29sb3JzTmVlZFVwZGF0ZT0hMTtsLnRhbmdlbnRzTmVlZFVwZGF0ZT0hMTtsLmJ1ZmZlcnNOZWVkVXBkYXRlPSExO3IuYXR0cmlidXRlcyYmbihyKX1lbHNlIGlmKGkgaW5zdGFuY2VvZiBUSFJFRS5MaW5lKXtyPWQoaSxsKTtwPXIuYXR0cmlidXRlcyYmcShyKTtpZihsLnZlcnRpY2VzTmVlZFVwZGF0ZXx8bC5jb2xvcnNOZWVkVXBkYXRlfHxsLmxpbmVEaXN0YW5jZXNOZWVkVXBkYXRlfHxwKXt2YXIgWWE9bCxTYj1qLkRZTkFNSUNfRFJBVyxJYj12b2lkIDAsXG5KYj12b2lkIDAsS2I9dm9pZCAwLFRiPXZvaWQgMCxtYT12b2lkIDAsVWI9dm9pZCAwLEdiPVlhLnZlcnRpY2VzLEhiPVlhLmNvbG9ycyxrYz1ZYS5saW5lRGlzdGFuY2VzLFpiPUdiLmxlbmd0aCwkYj1IYi5sZW5ndGgsYWM9a2MubGVuZ3RoLFZiPVlhLl9fdmVydGV4QXJyYXksV2I9WWEuX19jb2xvckFycmF5LGxjPVlhLl9fbGluZURpc3RhbmNlQXJyYXksYmM9WWEuY29sb3JzTmVlZFVwZGF0ZSxjYz1ZYS5saW5lRGlzdGFuY2VzTmVlZFVwZGF0ZSxnYz1ZYS5fX3dlYmdsQ3VzdG9tQXR0cmlidXRlc0xpc3QsWGI9dm9pZCAwLG1jPXZvaWQgMCx5YT12b2lkIDAsemI9dm9pZCAwLElhPXZvaWQgMCxpYT12b2lkIDA7aWYoWWEudmVydGljZXNOZWVkVXBkYXRlKXtmb3IoSWI9MDtJYjxaYjtJYisrKVRiPUdiW0liXSxtYT0zKkliLFZiW21hXT1UYi54LFZiW21hKzFdPVRiLnksVmJbbWErMl09VGIuejtqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsWWEuX193ZWJnbFZlcnRleEJ1ZmZlcik7XG5qLmJ1ZmZlckRhdGEoai5BUlJBWV9CVUZGRVIsVmIsU2IpfWlmKGJjKXtmb3IoSmI9MDtKYjwkYjtKYisrKVViPUhiW0piXSxtYT0zKkpiLFdiW21hXT1VYi5yLFdiW21hKzFdPVViLmcsV2JbbWErMl09VWIuYjtqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsWWEuX193ZWJnbENvbG9yQnVmZmVyKTtqLmJ1ZmZlckRhdGEoai5BUlJBWV9CVUZGRVIsV2IsU2IpfWlmKGNjKXtmb3IoS2I9MDtLYjxhYztLYisrKWxjW0tiXT1rY1tLYl07ai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLFlhLl9fd2ViZ2xMaW5lRGlzdGFuY2VCdWZmZXIpO2ouYnVmZmVyRGF0YShqLkFSUkFZX0JVRkZFUixsYyxTYil9aWYoZ2Mpe1hiPTA7Zm9yKG1jPWdjLmxlbmd0aDtYYjxtYztYYisrKWlmKGlhPWdjW1hiXSxpYS5uZWVkc1VwZGF0ZSYmKHZvaWQgMD09PWlhLmJvdW5kVG98fFwidmVydGljZXNcIj09PWlhLmJvdW5kVG8pKXttYT0wO3piPWlhLnZhbHVlLmxlbmd0aDtpZigxPT09aWEuc2l6ZSlmb3IoeWE9XG4wO3lhPHpiO3lhKyspaWEuYXJyYXlbeWFdPWlhLnZhbHVlW3lhXTtlbHNlIGlmKDI9PT1pYS5zaXplKWZvcih5YT0wO3lhPHpiO3lhKyspSWE9aWEudmFsdWVbeWFdLGlhLmFycmF5W21hXT1JYS54LGlhLmFycmF5W21hKzFdPUlhLnksbWErPTI7ZWxzZSBpZigzPT09aWEuc2l6ZSlpZihcImNcIj09PWlhLnR5cGUpZm9yKHlhPTA7eWE8emI7eWErKylJYT1pYS52YWx1ZVt5YV0saWEuYXJyYXlbbWFdPUlhLnIsaWEuYXJyYXlbbWErMV09SWEuZyxpYS5hcnJheVttYSsyXT1JYS5iLG1hKz0zO2Vsc2UgZm9yKHlhPTA7eWE8emI7eWErKylJYT1pYS52YWx1ZVt5YV0saWEuYXJyYXlbbWFdPUlhLngsaWEuYXJyYXlbbWErMV09SWEueSxpYS5hcnJheVttYSsyXT1JYS56LG1hKz0zO2Vsc2UgaWYoND09PWlhLnNpemUpZm9yKHlhPTA7eWE8emI7eWErKylJYT1pYS52YWx1ZVt5YV0saWEuYXJyYXlbbWFdPUlhLngsaWEuYXJyYXlbbWErMV09SWEueSxpYS5hcnJheVttYSsyXT1JYS56LGlhLmFycmF5W21hK1xuM109SWEudyxtYSs9NDtqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsaWEuYnVmZmVyKTtqLmJ1ZmZlckRhdGEoai5BUlJBWV9CVUZGRVIsaWEuYXJyYXksU2IpfX19bC52ZXJ0aWNlc05lZWRVcGRhdGU9ITE7bC5jb2xvcnNOZWVkVXBkYXRlPSExO2wubGluZURpc3RhbmNlc05lZWRVcGRhdGU9ITE7ci5hdHRyaWJ1dGVzJiZuKHIpfWVsc2UgaWYoaSBpbnN0YW5jZW9mIFRIUkVFLlBhcnRpY2xlU3lzdGVtKXtyPWQoaSxsKTtwPXIuYXR0cmlidXRlcyYmcShyKTtpZihsLnZlcnRpY2VzTmVlZFVwZGF0ZXx8bC5jb2xvcnNOZWVkVXBkYXRlfHxpLnNvcnRQYXJ0aWNsZXN8fHApe3ZhciBsYj1sLGhjPWouRFlOQU1JQ19EUkFXLExiPWksSmE9dm9pZCAwLG1iPXZvaWQgMCxuYj12b2lkIDAsVD12b2lkIDAsb2I9dm9pZCAwLHViPXZvaWQgMCxZYj1sYi52ZXJ0aWNlcyxpYz1ZYi5sZW5ndGgsamM9bGIuY29sb3JzLG5jPWpjLmxlbmd0aCx3Yj1sYi5fX3ZlcnRleEFycmF5LHhiPWxiLl9fY29sb3JBcnJheSxcbnFiPWxiLl9fc29ydEFycmF5LG9jPWxiLnZlcnRpY2VzTmVlZFVwZGF0ZSxwYz1sYi5jb2xvcnNOZWVkVXBkYXRlLHJiPWxiLl9fd2ViZ2xDdXN0b21BdHRyaWJ1dGVzTGlzdCwkYT12b2lkIDAsQWI9dm9pZCAwLFo9dm9pZCAwLGFiPXZvaWQgMCxnYT12b2lkIDAsUz12b2lkIDA7aWYoTGIuc29ydFBhcnRpY2xlcyl7Z2IuY29weShFYSk7Z2IubXVsdGlwbHkoTGIubWF0cml4V29ybGQpO2ZvcihKYT0wO0phPGljO0phKyspbmI9WWJbSmFdLHJhLmNvcHkobmIpLHJhLmFwcGx5UHJvamVjdGlvbihnYikscWJbSmFdPVtyYS56LEphXTtxYi5zb3J0KGspO2ZvcihKYT0wO0phPGljO0phKyspbmI9WWJbcWJbSmFdWzFdXSxUPTMqSmEsd2JbVF09bmIueCx3YltUKzFdPW5iLnksd2JbVCsyXT1uYi56O2ZvcihtYj0wO21iPG5jO21iKyspVD0zKm1iLHViPWpjW3FiW21iXVsxXV0seGJbVF09dWIucix4YltUKzFdPXViLmcseGJbVCsyXT11Yi5iO2lmKHJiKXskYT0wO2ZvcihBYj1yYi5sZW5ndGg7JGE8XG5BYjskYSsrKWlmKFM9cmJbJGFdLHZvaWQgMD09PVMuYm91bmRUb3x8XCJ2ZXJ0aWNlc1wiPT09Uy5ib3VuZFRvKWlmKFQ9MCxhYj1TLnZhbHVlLmxlbmd0aCwxPT09Uy5zaXplKWZvcihaPTA7WjxhYjtaKyspb2I9cWJbWl1bMV0sUy5hcnJheVtaXT1TLnZhbHVlW29iXTtlbHNlIGlmKDI9PT1TLnNpemUpZm9yKFo9MDtaPGFiO1orKylvYj1xYltaXVsxXSxnYT1TLnZhbHVlW29iXSxTLmFycmF5W1RdPWdhLngsUy5hcnJheVtUKzFdPWdhLnksVCs9MjtlbHNlIGlmKDM9PT1TLnNpemUpaWYoXCJjXCI9PT1TLnR5cGUpZm9yKFo9MDtaPGFiO1orKylvYj1xYltaXVsxXSxnYT1TLnZhbHVlW29iXSxTLmFycmF5W1RdPWdhLnIsUy5hcnJheVtUKzFdPWdhLmcsUy5hcnJheVtUKzJdPWdhLmIsVCs9MztlbHNlIGZvcihaPTA7WjxhYjtaKyspb2I9cWJbWl1bMV0sZ2E9Uy52YWx1ZVtvYl0sUy5hcnJheVtUXT1nYS54LFMuYXJyYXlbVCsxXT1nYS55LFMuYXJyYXlbVCsyXT1nYS56LFQrPTM7ZWxzZSBpZig0PT09XG5TLnNpemUpZm9yKFo9MDtaPGFiO1orKylvYj1xYltaXVsxXSxnYT1TLnZhbHVlW29iXSxTLmFycmF5W1RdPWdhLngsUy5hcnJheVtUKzFdPWdhLnksUy5hcnJheVtUKzJdPWdhLnosUy5hcnJheVtUKzNdPWdhLncsVCs9NH19ZWxzZXtpZihvYylmb3IoSmE9MDtKYTxpYztKYSsrKW5iPVliW0phXSxUPTMqSmEsd2JbVF09bmIueCx3YltUKzFdPW5iLnksd2JbVCsyXT1uYi56O2lmKHBjKWZvcihtYj0wO21iPG5jO21iKyspdWI9amNbbWJdLFQ9MyptYix4YltUXT11Yi5yLHhiW1QrMV09dWIuZyx4YltUKzJdPXViLmI7aWYocmIpeyRhPTA7Zm9yKEFiPXJiLmxlbmd0aDskYTxBYjskYSsrKWlmKFM9cmJbJGFdLFMubmVlZHNVcGRhdGUmJih2b2lkIDA9PT1TLmJvdW5kVG98fFwidmVydGljZXNcIj09PVMuYm91bmRUbykpaWYoYWI9Uy52YWx1ZS5sZW5ndGgsVD0wLDE9PT1TLnNpemUpZm9yKFo9MDtaPGFiO1orKylTLmFycmF5W1pdPVMudmFsdWVbWl07ZWxzZSBpZigyPT09Uy5zaXplKWZvcihaPVxuMDtaPGFiO1orKylnYT1TLnZhbHVlW1pdLFMuYXJyYXlbVF09Z2EueCxTLmFycmF5W1QrMV09Z2EueSxUKz0yO2Vsc2UgaWYoMz09PVMuc2l6ZSlpZihcImNcIj09PVMudHlwZSlmb3IoWj0wO1o8YWI7WisrKWdhPVMudmFsdWVbWl0sUy5hcnJheVtUXT1nYS5yLFMuYXJyYXlbVCsxXT1nYS5nLFMuYXJyYXlbVCsyXT1nYS5iLFQrPTM7ZWxzZSBmb3IoWj0wO1o8YWI7WisrKWdhPVMudmFsdWVbWl0sUy5hcnJheVtUXT1nYS54LFMuYXJyYXlbVCsxXT1nYS55LFMuYXJyYXlbVCsyXT1nYS56LFQrPTM7ZWxzZSBpZig0PT09Uy5zaXplKWZvcihaPTA7WjxhYjtaKyspZ2E9Uy52YWx1ZVtaXSxTLmFycmF5W1RdPWdhLngsUy5hcnJheVtUKzFdPWdhLnksUy5hcnJheVtUKzJdPWdhLnosUy5hcnJheVtUKzNdPWdhLncsVCs9NH19aWYob2N8fExiLnNvcnRQYXJ0aWNsZXMpai5iaW5kQnVmZmVyKGouQVJSQVlfQlVGRkVSLGxiLl9fd2ViZ2xWZXJ0ZXhCdWZmZXIpLGouYnVmZmVyRGF0YShqLkFSUkFZX0JVRkZFUixcbndiLGhjKTtpZihwY3x8TGIuc29ydFBhcnRpY2xlcylqLmJpbmRCdWZmZXIoai5BUlJBWV9CVUZGRVIsbGIuX193ZWJnbENvbG9yQnVmZmVyKSxqLmJ1ZmZlckRhdGEoai5BUlJBWV9CVUZGRVIseGIsaGMpO2lmKHJiKXskYT0wO2ZvcihBYj1yYi5sZW5ndGg7JGE8QWI7JGErKylpZihTPXJiWyRhXSxTLm5lZWRzVXBkYXRlfHxMYi5zb3J0UGFydGljbGVzKWouYmluZEJ1ZmZlcihqLkFSUkFZX0JVRkZFUixTLmJ1ZmZlciksai5idWZmZXJEYXRhKGouQVJSQVlfQlVGRkVSLFMuYXJyYXksaGMpfX1sLnZlcnRpY2VzTmVlZFVwZGF0ZT0hMTtsLmNvbG9yc05lZWRVcGRhdGU9ITE7ci5hdHRyaWJ1dGVzJiZuKHIpfX19O3RoaXMuaW5pdE1hdGVyaWFsPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlLGYsZyxoO2EuYWRkRXZlbnRMaXN0ZW5lcihcImRpc3Bvc2VcIixGYik7dmFyIGksayxsLG0sbjthIGluc3RhbmNlb2YgVEhSRUUuTWVzaERlcHRoTWF0ZXJpYWw/bj1cImRlcHRoXCI6YSBpbnN0YW5jZW9mXG5USFJFRS5NZXNoTm9ybWFsTWF0ZXJpYWw/bj1cIm5vcm1hbFwiOmEgaW5zdGFuY2VvZiBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbD9uPVwiYmFzaWNcIjphIGluc3RhbmNlb2YgVEhSRUUuTWVzaExhbWJlcnRNYXRlcmlhbD9uPVwibGFtYmVydFwiOmEgaW5zdGFuY2VvZiBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbD9uPVwicGhvbmdcIjphIGluc3RhbmNlb2YgVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWw/bj1cImJhc2ljXCI6YSBpbnN0YW5jZW9mIFRIUkVFLkxpbmVEYXNoZWRNYXRlcmlhbD9uPVwiZGFzaGVkXCI6YSBpbnN0YW5jZW9mIFRIUkVFLlBhcnRpY2xlU3lzdGVtTWF0ZXJpYWwmJihuPVwicGFydGljbGVfYmFzaWNcIik7aWYobil7dmFyIHA9VEhSRUUuU2hhZGVyTGliW25dO2EudW5pZm9ybXM9VEhSRUUuVW5pZm9ybXNVdGlscy5jbG9uZShwLnVuaWZvcm1zKTthLnZlcnRleFNoYWRlcj1wLnZlcnRleFNoYWRlcjthLmZyYWdtZW50U2hhZGVyPXAuZnJhZ21lbnRTaGFkZXJ9dmFyIHE9ZT0wLHI9MCx0PVxucD0wO2ZvcihmPWIubGVuZ3RoO3Q8Zjt0KyspZz1iW3RdLGcub25seVNoYWRvd3x8KGcgaW5zdGFuY2VvZiBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0JiZlKyssZyBpbnN0YW5jZW9mIFRIUkVFLlBvaW50TGlnaHQmJnErKyxnIGluc3RhbmNlb2YgVEhSRUUuU3BvdExpZ2h0JiZyKyssZyBpbnN0YW5jZW9mIFRIUkVFLkhlbWlzcGhlcmVMaWdodCYmcCsrKTtmPXE7Zz1yO2g9cDtyPXA9MDtmb3IocT1iLmxlbmd0aDtyPHE7cisrKXQ9YltyXSx0LmNhc3RTaGFkb3cmJih0IGluc3RhbmNlb2YgVEhSRUUuU3BvdExpZ2h0JiZwKyssdCBpbnN0YW5jZW9mIFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQmJiF0LnNoYWRvd0Nhc2NhZGUmJnArKyk7bT1wO3liJiZkJiZkLnVzZVZlcnRleFRleHR1cmU/bD0xMDI0OihiPWouZ2V0UGFyYW1ldGVyKGouTUFYX1ZFUlRFWF9VTklGT1JNX1ZFQ1RPUlMpLGI9TWF0aC5mbG9vcigoYi0yMCkvNCksdm9pZCAwIT09ZCYmZCBpbnN0YW5jZW9mIFRIUkVFLlNraW5uZWRNZXNoJiZcbihiPU1hdGgubWluKGQuYm9uZXMubGVuZ3RoLGIpLGI8ZC5ib25lcy5sZW5ndGgmJmNvbnNvbGUud2FybihcIldlYkdMUmVuZGVyZXI6IHRvbyBtYW55IGJvbmVzIC0gXCIrZC5ib25lcy5sZW5ndGgrXCIsIHRoaXMgR1BVIHN1cHBvcnRzIGp1c3QgXCIrYitcIiAodHJ5IE9wZW5HTCBpbnN0ZWFkIG9mIEFOR0xFKVwiKSksbD1iKTthOnt2YXIgcj1hLmZyYWdtZW50U2hhZGVyLHE9YS52ZXJ0ZXhTaGFkZXIscD1hLnVuaWZvcm1zLGI9YS5hdHRyaWJ1dGVzLHQ9YS5kZWZpbmVzLGM9e21hcDohIWEubWFwLGVudk1hcDohIWEuZW52TWFwLGxpZ2h0TWFwOiEhYS5saWdodE1hcCxidW1wTWFwOiEhYS5idW1wTWFwLG5vcm1hbE1hcDohIWEubm9ybWFsTWFwLHNwZWN1bGFyTWFwOiEhYS5zcGVjdWxhck1hcCx2ZXJ0ZXhDb2xvcnM6YS52ZXJ0ZXhDb2xvcnMsZm9nOmMsdXNlRm9nOmEuZm9nLGZvZ0V4cDpjIGluc3RhbmNlb2YgVEhSRUUuRm9nRXhwMixzaXplQXR0ZW51YXRpb246YS5zaXplQXR0ZW51YXRpb24sXG5za2lubmluZzphLnNraW5uaW5nLG1heEJvbmVzOmwsdXNlVmVydGV4VGV4dHVyZTp5YiYmZCYmZC51c2VWZXJ0ZXhUZXh0dXJlLG1vcnBoVGFyZ2V0czphLm1vcnBoVGFyZ2V0cyxtb3JwaE5vcm1hbHM6YS5tb3JwaE5vcm1hbHMsbWF4TW9ycGhUYXJnZXRzOnRoaXMubWF4TW9ycGhUYXJnZXRzLG1heE1vcnBoTm9ybWFsczp0aGlzLm1heE1vcnBoTm9ybWFscyxtYXhEaXJMaWdodHM6ZSxtYXhQb2ludExpZ2h0czpmLG1heFNwb3RMaWdodHM6ZyxtYXhIZW1pTGlnaHRzOmgsbWF4U2hhZG93czptLHNoYWRvd01hcEVuYWJsZWQ6dGhpcy5zaGFkb3dNYXBFbmFibGVkJiZkLnJlY2VpdmVTaGFkb3csc2hhZG93TWFwVHlwZTp0aGlzLnNoYWRvd01hcFR5cGUsc2hhZG93TWFwRGVidWc6dGhpcy5zaGFkb3dNYXBEZWJ1ZyxzaGFkb3dNYXBDYXNjYWRlOnRoaXMuc2hhZG93TWFwQ2FzY2FkZSxhbHBoYVRlc3Q6YS5hbHBoYVRlc3QsbWV0YWw6YS5tZXRhbCxwZXJQaXhlbDphLnBlclBpeGVsLHdyYXBBcm91bmQ6YS53cmFwQXJvdW5kLFxuZG91YmxlU2lkZWQ6YS5zaWRlPT09VEhSRUUuRG91YmxlU2lkZSxmbGlwU2lkZWQ6YS5zaWRlPT09VEhSRUUuQmFja1NpZGV9LGQ9YS5pbmRleDBBdHRyaWJ1dGVOYW1lLHMsdSx2O2U9W107bj9lLnB1c2gobik6KGUucHVzaChyKSxlLnB1c2gocSkpO2Zvcih1IGluIHQpZS5wdXNoKHUpLGUucHVzaCh0W3VdKTtmb3IocyBpbiBjKWUucHVzaChzKSxlLnB1c2goY1tzXSk7bj1lLmpvaW4oKTtzPTA7Zm9yKHU9ZGEubGVuZ3RoO3M8dTtzKyspaWYoZT1kYVtzXSxlLmNvZGU9PT1uKXtlLnVzZWRUaW1lcysrO2s9ZS5wcm9ncmFtO2JyZWFrIGF9cz1cIlNIQURPV01BUF9UWVBFX0JBU0lDXCI7Yy5zaGFkb3dNYXBUeXBlPT09VEhSRUUuUENGU2hhZG93TWFwP3M9XCJTSEFET1dNQVBfVFlQRV9QQ0ZcIjpjLnNoYWRvd01hcFR5cGU9PT1USFJFRS5QQ0ZTb2Z0U2hhZG93TWFwJiYocz1cIlNIQURPV01BUF9UWVBFX1BDRl9TT0ZUXCIpO3U9W107Zm9yKHYgaW4gdCllPXRbdl0sITEhPT1lJiYoZT1cIiNkZWZpbmUgXCIrXG52K1wiIFwiK2UsdS5wdXNoKGUpKTtlPXUuam9pbihcIlxcblwiKTt2PWouY3JlYXRlUHJvZ3JhbSgpO3U9W1wicHJlY2lzaW9uIFwiK00rXCIgZmxvYXQ7XCIsXCJwcmVjaXNpb24gXCIrTStcIiBpbnQ7XCIsZSxCYj9cIiNkZWZpbmUgVkVSVEVYX1RFWFRVUkVTXCI6XCJcIixMLmdhbW1hSW5wdXQ/XCIjZGVmaW5lIEdBTU1BX0lOUFVUXCI6XCJcIixMLmdhbW1hT3V0cHV0P1wiI2RlZmluZSBHQU1NQV9PVVRQVVRcIjpcIlwiLEwucGh5c2ljYWxseUJhc2VkU2hhZGluZz9cIiNkZWZpbmUgUEhZU0lDQUxMWV9CQVNFRF9TSEFESU5HXCI6XCJcIixcIiNkZWZpbmUgTUFYX0RJUl9MSUdIVFMgXCIrYy5tYXhEaXJMaWdodHMsXCIjZGVmaW5lIE1BWF9QT0lOVF9MSUdIVFMgXCIrYy5tYXhQb2ludExpZ2h0cyxcIiNkZWZpbmUgTUFYX1NQT1RfTElHSFRTIFwiK2MubWF4U3BvdExpZ2h0cyxcIiNkZWZpbmUgTUFYX0hFTUlfTElHSFRTIFwiK2MubWF4SGVtaUxpZ2h0cyxcIiNkZWZpbmUgTUFYX1NIQURPV1MgXCIrYy5tYXhTaGFkb3dzLFwiI2RlZmluZSBNQVhfQk9ORVMgXCIrXG5jLm1heEJvbmVzLGMubWFwP1wiI2RlZmluZSBVU0VfTUFQXCI6XCJcIixjLmVudk1hcD9cIiNkZWZpbmUgVVNFX0VOVk1BUFwiOlwiXCIsYy5saWdodE1hcD9cIiNkZWZpbmUgVVNFX0xJR0hUTUFQXCI6XCJcIixjLmJ1bXBNYXA/XCIjZGVmaW5lIFVTRV9CVU1QTUFQXCI6XCJcIixjLm5vcm1hbE1hcD9cIiNkZWZpbmUgVVNFX05PUk1BTE1BUFwiOlwiXCIsYy5zcGVjdWxhck1hcD9cIiNkZWZpbmUgVVNFX1NQRUNVTEFSTUFQXCI6XCJcIixjLnZlcnRleENvbG9ycz9cIiNkZWZpbmUgVVNFX0NPTE9SXCI6XCJcIixjLnNraW5uaW5nP1wiI2RlZmluZSBVU0VfU0tJTk5JTkdcIjpcIlwiLGMudXNlVmVydGV4VGV4dHVyZT9cIiNkZWZpbmUgQk9ORV9URVhUVVJFXCI6XCJcIixjLm1vcnBoVGFyZ2V0cz9cIiNkZWZpbmUgVVNFX01PUlBIVEFSR0VUU1wiOlwiXCIsYy5tb3JwaE5vcm1hbHM/XCIjZGVmaW5lIFVTRV9NT1JQSE5PUk1BTFNcIjpcIlwiLGMucGVyUGl4ZWw/XCIjZGVmaW5lIFBIT05HX1BFUl9QSVhFTFwiOlwiXCIsYy53cmFwQXJvdW5kP1wiI2RlZmluZSBXUkFQX0FST1VORFwiOlxuXCJcIixjLmRvdWJsZVNpZGVkP1wiI2RlZmluZSBET1VCTEVfU0lERURcIjpcIlwiLGMuZmxpcFNpZGVkP1wiI2RlZmluZSBGTElQX1NJREVEXCI6XCJcIixjLnNoYWRvd01hcEVuYWJsZWQ/XCIjZGVmaW5lIFVTRV9TSEFET1dNQVBcIjpcIlwiLGMuc2hhZG93TWFwRW5hYmxlZD9cIiNkZWZpbmUgXCIrczpcIlwiLGMuc2hhZG93TWFwRGVidWc/XCIjZGVmaW5lIFNIQURPV01BUF9ERUJVR1wiOlwiXCIsYy5zaGFkb3dNYXBDYXNjYWRlP1wiI2RlZmluZSBTSEFET1dNQVBfQ0FTQ0FERVwiOlwiXCIsYy5zaXplQXR0ZW51YXRpb24/XCIjZGVmaW5lIFVTRV9TSVpFQVRURU5VQVRJT05cIjpcIlwiLFwidW5pZm9ybSBtYXQ0IG1vZGVsTWF0cml4O1xcbnVuaWZvcm0gbWF0NCBtb2RlbFZpZXdNYXRyaXg7XFxudW5pZm9ybSBtYXQ0IHByb2plY3Rpb25NYXRyaXg7XFxudW5pZm9ybSBtYXQ0IHZpZXdNYXRyaXg7XFxudW5pZm9ybSBtYXQzIG5vcm1hbE1hdHJpeDtcXG51bmlmb3JtIHZlYzMgY2FtZXJhUG9zaXRpb247XFxuYXR0cmlidXRlIHZlYzMgcG9zaXRpb247XFxuYXR0cmlidXRlIHZlYzMgbm9ybWFsO1xcbmF0dHJpYnV0ZSB2ZWMyIHV2O1xcbmF0dHJpYnV0ZSB2ZWMyIHV2MjtcXG4jaWZkZWYgVVNFX0NPTE9SXFxuYXR0cmlidXRlIHZlYzMgY29sb3I7XFxuI2VuZGlmXFxuI2lmZGVmIFVTRV9NT1JQSFRBUkdFVFNcXG5hdHRyaWJ1dGUgdmVjMyBtb3JwaFRhcmdldDA7XFxuYXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQxO1xcbmF0dHJpYnV0ZSB2ZWMzIG1vcnBoVGFyZ2V0MjtcXG5hdHRyaWJ1dGUgdmVjMyBtb3JwaFRhcmdldDM7XFxuI2lmZGVmIFVTRV9NT1JQSE5PUk1BTFNcXG5hdHRyaWJ1dGUgdmVjMyBtb3JwaE5vcm1hbDA7XFxuYXR0cmlidXRlIHZlYzMgbW9ycGhOb3JtYWwxO1xcbmF0dHJpYnV0ZSB2ZWMzIG1vcnBoTm9ybWFsMjtcXG5hdHRyaWJ1dGUgdmVjMyBtb3JwaE5vcm1hbDM7XFxuI2Vsc2VcXG5hdHRyaWJ1dGUgdmVjMyBtb3JwaFRhcmdldDQ7XFxuYXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQ1O1xcbmF0dHJpYnV0ZSB2ZWMzIG1vcnBoVGFyZ2V0NjtcXG5hdHRyaWJ1dGUgdmVjMyBtb3JwaFRhcmdldDc7XFxuI2VuZGlmXFxuI2VuZGlmXFxuI2lmZGVmIFVTRV9TS0lOTklOR1xcbmF0dHJpYnV0ZSB2ZWM0IHNraW5JbmRleDtcXG5hdHRyaWJ1dGUgdmVjNCBza2luV2VpZ2h0O1xcbiNlbmRpZlxcblwiXS5qb2luKFwiXFxuXCIpO1xucz1bXCJwcmVjaXNpb24gXCIrTStcIiBmbG9hdDtcIixcInByZWNpc2lvbiBcIitNK1wiIGludDtcIixjLmJ1bXBNYXB8fGMubm9ybWFsTWFwP1wiI2V4dGVuc2lvbiBHTF9PRVNfc3RhbmRhcmRfZGVyaXZhdGl2ZXMgOiBlbmFibGVcIjpcIlwiLGUsXCIjZGVmaW5lIE1BWF9ESVJfTElHSFRTIFwiK2MubWF4RGlyTGlnaHRzLFwiI2RlZmluZSBNQVhfUE9JTlRfTElHSFRTIFwiK2MubWF4UG9pbnRMaWdodHMsXCIjZGVmaW5lIE1BWF9TUE9UX0xJR0hUUyBcIitjLm1heFNwb3RMaWdodHMsXCIjZGVmaW5lIE1BWF9IRU1JX0xJR0hUUyBcIitjLm1heEhlbWlMaWdodHMsXCIjZGVmaW5lIE1BWF9TSEFET1dTIFwiK2MubWF4U2hhZG93cyxjLmFscGhhVGVzdD9cIiNkZWZpbmUgQUxQSEFURVNUIFwiK2MuYWxwaGFUZXN0OlwiXCIsTC5nYW1tYUlucHV0P1wiI2RlZmluZSBHQU1NQV9JTlBVVFwiOlwiXCIsTC5nYW1tYU91dHB1dD9cIiNkZWZpbmUgR0FNTUFfT1VUUFVUXCI6XCJcIixMLnBoeXNpY2FsbHlCYXNlZFNoYWRpbmc/XCIjZGVmaW5lIFBIWVNJQ0FMTFlfQkFTRURfU0hBRElOR1wiOlxuXCJcIixjLnVzZUZvZyYmYy5mb2c/XCIjZGVmaW5lIFVTRV9GT0dcIjpcIlwiLGMudXNlRm9nJiZjLmZvZ0V4cD9cIiNkZWZpbmUgRk9HX0VYUDJcIjpcIlwiLGMubWFwP1wiI2RlZmluZSBVU0VfTUFQXCI6XCJcIixjLmVudk1hcD9cIiNkZWZpbmUgVVNFX0VOVk1BUFwiOlwiXCIsYy5saWdodE1hcD9cIiNkZWZpbmUgVVNFX0xJR0hUTUFQXCI6XCJcIixjLmJ1bXBNYXA/XCIjZGVmaW5lIFVTRV9CVU1QTUFQXCI6XCJcIixjLm5vcm1hbE1hcD9cIiNkZWZpbmUgVVNFX05PUk1BTE1BUFwiOlwiXCIsYy5zcGVjdWxhck1hcD9cIiNkZWZpbmUgVVNFX1NQRUNVTEFSTUFQXCI6XCJcIixjLnZlcnRleENvbG9ycz9cIiNkZWZpbmUgVVNFX0NPTE9SXCI6XCJcIixjLm1ldGFsP1wiI2RlZmluZSBNRVRBTFwiOlwiXCIsYy5wZXJQaXhlbD9cIiNkZWZpbmUgUEhPTkdfUEVSX1BJWEVMXCI6XCJcIixjLndyYXBBcm91bmQ/XCIjZGVmaW5lIFdSQVBfQVJPVU5EXCI6XCJcIixjLmRvdWJsZVNpZGVkP1wiI2RlZmluZSBET1VCTEVfU0lERURcIjpcIlwiLGMuZmxpcFNpZGVkP1wiI2RlZmluZSBGTElQX1NJREVEXCI6XG5cIlwiLGMuc2hhZG93TWFwRW5hYmxlZD9cIiNkZWZpbmUgVVNFX1NIQURPV01BUFwiOlwiXCIsYy5zaGFkb3dNYXBFbmFibGVkP1wiI2RlZmluZSBcIitzOlwiXCIsYy5zaGFkb3dNYXBEZWJ1Zz9cIiNkZWZpbmUgU0hBRE9XTUFQX0RFQlVHXCI6XCJcIixjLnNoYWRvd01hcENhc2NhZGU/XCIjZGVmaW5lIFNIQURPV01BUF9DQVNDQURFXCI6XCJcIixcInVuaWZvcm0gbWF0NCB2aWV3TWF0cml4O1xcbnVuaWZvcm0gdmVjMyBjYW1lcmFQb3NpdGlvbjtcXG5cIl0uam9pbihcIlxcblwiKTt1PUQoXCJ2ZXJ0ZXhcIix1K3EpO3M9RChcImZyYWdtZW50XCIscytyKTtqLmF0dGFjaFNoYWRlcih2LHUpO2ouYXR0YWNoU2hhZGVyKHYscyk7ZCYmai5iaW5kQXR0cmliTG9jYXRpb24odiwwLGQpO2oubGlua1Byb2dyYW0odik7ai5nZXRQcm9ncmFtUGFyYW1ldGVyKHYsai5MSU5LX1NUQVRVUyl8fChjb25zb2xlLmVycm9yKFwiQ291bGQgbm90IGluaXRpYWxpc2Ugc2hhZGVyXFxuVkFMSURBVEVfU1RBVFVTOiBcIitqLmdldFByb2dyYW1QYXJhbWV0ZXIodixcbmouVkFMSURBVEVfU1RBVFVTKStcIiwgZ2wgZXJyb3IgW1wiK2ouZ2V0RXJyb3IoKStcIl1cIiksY29uc29sZS5lcnJvcihcIlByb2dyYW0gSW5mbyBMb2c6IFwiK2ouZ2V0UHJvZ3JhbUluZm9Mb2codikpKTtqLmRlbGV0ZVNoYWRlcihzKTtqLmRlbGV0ZVNoYWRlcih1KTt2LnVuaWZvcm1zPXt9O3YuYXR0cmlidXRlcz17fTt2YXIgdztzPVwidmlld01hdHJpeCBtb2RlbFZpZXdNYXRyaXggcHJvamVjdGlvbk1hdHJpeCBub3JtYWxNYXRyaXggbW9kZWxNYXRyaXggY2FtZXJhUG9zaXRpb24gbW9ycGhUYXJnZXRJbmZsdWVuY2VzXCIuc3BsaXQoXCIgXCIpO2MudXNlVmVydGV4VGV4dHVyZT8ocy5wdXNoKFwiYm9uZVRleHR1cmVcIikscy5wdXNoKFwiYm9uZVRleHR1cmVXaWR0aFwiKSxzLnB1c2goXCJib25lVGV4dHVyZUhlaWdodFwiKSk6cy5wdXNoKFwiYm9uZUdsb2JhbE1hdHJpY2VzXCIpO2Zvcih3IGluIHApcy5wdXNoKHcpO3c9cztzPTA7Zm9yKHU9dy5sZW5ndGg7czx1O3MrKylwPXdbc10sdi51bmlmb3Jtc1twXT1cbmouZ2V0VW5pZm9ybUxvY2F0aW9uKHYscCk7cz1cInBvc2l0aW9uIG5vcm1hbCB1diB1djIgdGFuZ2VudCBjb2xvciBza2luSW5kZXggc2tpbldlaWdodCBsaW5lRGlzdGFuY2VcIi5zcGxpdChcIiBcIik7Zm9yKHc9MDt3PGMubWF4TW9ycGhUYXJnZXRzO3crKylzLnB1c2goXCJtb3JwaFRhcmdldFwiK3cpO2Zvcih3PTA7dzxjLm1heE1vcnBoTm9ybWFsczt3Kyspcy5wdXNoKFwibW9ycGhOb3JtYWxcIit3KTtmb3IoayBpbiBiKXMucHVzaChrKTtrPXM7dz0wO2ZvcihiPWsubGVuZ3RoO3c8Yjt3Kyspcz1rW3ddLHYuYXR0cmlidXRlc1tzXT1qLmdldEF0dHJpYkxvY2F0aW9uKHYscyk7di5pZD16YSsrO2RhLnB1c2goe3Byb2dyYW06dixjb2RlOm4sdXNlZFRpbWVzOjF9KTtMLmluZm8ubWVtb3J5LnByb2dyYW1zPWRhLmxlbmd0aDtrPXZ9YS5wcm9ncmFtPWs7dz1hLnByb2dyYW0uYXR0cmlidXRlcztpZihhLm1vcnBoVGFyZ2V0cyl7YS5udW1TdXBwb3J0ZWRNb3JwaFRhcmdldHM9MDtiPVwibW9ycGhUYXJnZXRcIjtcbmZvcihrPTA7azx0aGlzLm1heE1vcnBoVGFyZ2V0cztrKyspdj1iK2ssMDw9d1t2XSYmYS5udW1TdXBwb3J0ZWRNb3JwaFRhcmdldHMrK31pZihhLm1vcnBoTm9ybWFscyl7YS5udW1TdXBwb3J0ZWRNb3JwaE5vcm1hbHM9MDtiPVwibW9ycGhOb3JtYWxcIjtmb3Ioaz0wO2s8dGhpcy5tYXhNb3JwaE5vcm1hbHM7aysrKXY9YitrLDA8PXdbdl0mJmEubnVtU3VwcG9ydGVkTW9ycGhOb3JtYWxzKyt9YS51bmlmb3Jtc0xpc3Q9W107Zm9yKGkgaW4gYS51bmlmb3JtcylhLnVuaWZvcm1zTGlzdC5wdXNoKFthLnVuaWZvcm1zW2ldLGldKX07dGhpcy5zZXRGYWNlQ3VsbGluZz1mdW5jdGlvbihhLGIpe2E9PT1USFJFRS5DdWxsRmFjZU5vbmU/ai5kaXNhYmxlKGouQ1VMTF9GQUNFKTooYj09PVRIUkVFLkZyb250RmFjZURpcmVjdGlvbkNXP2ouZnJvbnRGYWNlKGouQ1cpOmouZnJvbnRGYWNlKGouQ0NXKSxhPT09VEhSRUUuQ3VsbEZhY2VCYWNrP2ouY3VsbEZhY2Uoai5CQUNLKTphPT09VEhSRUUuQ3VsbEZhY2VGcm9udD9cbmouY3VsbEZhY2Uoai5GUk9OVCk6ai5jdWxsRmFjZShqLkZST05UX0FORF9CQUNLKSxqLmVuYWJsZShqLkNVTExfRkFDRSkpfTt0aGlzLnNldE1hdGVyaWFsRmFjZXM9ZnVuY3Rpb24oYSl7dmFyIGI9YS5zaWRlPT09VEhSRUUuRG91YmxlU2lkZSxhPWEuc2lkZT09PVRIUkVFLkJhY2tTaWRlO1khPT1iJiYoYj9qLmRpc2FibGUoai5DVUxMX0ZBQ0UpOmouZW5hYmxlKGouQ1VMTF9GQUNFKSxZPWIpO1UhPT1hJiYoYT9qLmZyb250RmFjZShqLkNXKTpqLmZyb250RmFjZShqLkNDVyksVT1hKX07dGhpcy5zZXREZXB0aFRlc3Q9ZnVuY3Rpb24oYSl7R2EhPT1hJiYoYT9qLmVuYWJsZShqLkRFUFRIX1RFU1QpOmouZGlzYWJsZShqLkRFUFRIX1RFU1QpLEdhPWEpfTt0aGlzLnNldERlcHRoV3JpdGU9ZnVuY3Rpb24oYSl7a2EhPT1hJiYoai5kZXB0aE1hc2soYSksa2E9YSl9O3RoaXMuc2V0QmxlbmRpbmc9ZnVuY3Rpb24oYSxiLGMsZCl7YSE9PWphJiYoYT09PVRIUkVFLk5vQmxlbmRpbmc/ai5kaXNhYmxlKGouQkxFTkQpOlxuYT09PVRIUkVFLkFkZGl0aXZlQmxlbmRpbmc/KGouZW5hYmxlKGouQkxFTkQpLGouYmxlbmRFcXVhdGlvbihqLkZVTkNfQUREKSxqLmJsZW5kRnVuYyhqLlNSQ19BTFBIQSxqLk9ORSkpOmE9PT1USFJFRS5TdWJ0cmFjdGl2ZUJsZW5kaW5nPyhqLmVuYWJsZShqLkJMRU5EKSxqLmJsZW5kRXF1YXRpb24oai5GVU5DX0FERCksai5ibGVuZEZ1bmMoai5aRVJPLGouT05FX01JTlVTX1NSQ19DT0xPUikpOmE9PT1USFJFRS5NdWx0aXBseUJsZW5kaW5nPyhqLmVuYWJsZShqLkJMRU5EKSxqLmJsZW5kRXF1YXRpb24oai5GVU5DX0FERCksai5ibGVuZEZ1bmMoai5aRVJPLGouU1JDX0NPTE9SKSk6YT09PVRIUkVFLkN1c3RvbUJsZW5kaW5nP2ouZW5hYmxlKGouQkxFTkQpOihqLmVuYWJsZShqLkJMRU5EKSxqLmJsZW5kRXF1YXRpb25TZXBhcmF0ZShqLkZVTkNfQURELGouRlVOQ19BREQpLGouYmxlbmRGdW5jU2VwYXJhdGUoai5TUkNfQUxQSEEsai5PTkVfTUlOVVNfU1JDX0FMUEhBLGouT05FLFxuai5PTkVfTUlOVVNfU1JDX0FMUEhBKSksamE9YSk7aWYoYT09PVRIUkVFLkN1c3RvbUJsZW5kaW5nKXtpZihiIT09c2EmJihqLmJsZW5kRXF1YXRpb24oSShiKSksc2E9YiksYyE9PWhhfHxkIT09S2Epai5ibGVuZEZ1bmMoSShjKSxJKGQpKSxoYT1jLEthPWR9ZWxzZSBLYT1oYT1zYT1udWxsfTt0aGlzLnNldFRleHR1cmU9ZnVuY3Rpb24oYSxiKXtpZihhLm5lZWRzVXBkYXRlKXthLl9fd2ViZ2xJbml0fHwoYS5fX3dlYmdsSW5pdD0hMCxhLmFkZEV2ZW50TGlzdGVuZXIoXCJkaXNwb3NlXCIsRGIpLGEuX193ZWJnbFRleHR1cmU9ai5jcmVhdGVUZXh0dXJlKCksTC5pbmZvLm1lbW9yeS50ZXh0dXJlcysrKTtqLmFjdGl2ZVRleHR1cmUoai5URVhUVVJFMCtiKTtqLmJpbmRUZXh0dXJlKGouVEVYVFVSRV8yRCxhLl9fd2ViZ2xUZXh0dXJlKTtqLnBpeGVsU3RvcmVpKGouVU5QQUNLX0ZMSVBfWV9XRUJHTCxhLmZsaXBZKTtqLnBpeGVsU3RvcmVpKGouVU5QQUNLX1BSRU1VTFRJUExZX0FMUEhBX1dFQkdMLFxuYS5wcmVtdWx0aXBseUFscGhhKTtqLnBpeGVsU3RvcmVpKGouVU5QQUNLX0FMSUdOTUVOVCxhLnVucGFja0FsaWdubWVudCk7dmFyIGM9YS5pbWFnZSxkPTA9PT0oYy53aWR0aCZjLndpZHRoLTEpJiYwPT09KGMuaGVpZ2h0JmMuaGVpZ2h0LTEpLGU9SShhLmZvcm1hdCksZj1JKGEudHlwZSk7RihqLlRFWFRVUkVfMkQsYSxkKTt2YXIgZz1hLm1pcG1hcHM7aWYoYSBpbnN0YW5jZW9mIFRIUkVFLkRhdGFUZXh0dXJlKWlmKDA8Zy5sZW5ndGgmJmQpe2Zvcih2YXIgaD0wLGk9Zy5sZW5ndGg7aDxpO2grKyljPWdbaF0sai50ZXhJbWFnZTJEKGouVEVYVFVSRV8yRCxoLGUsYy53aWR0aCxjLmhlaWdodCwwLGUsZixjLmRhdGEpO2EuZ2VuZXJhdGVNaXBtYXBzPSExfWVsc2Ugai50ZXhJbWFnZTJEKGouVEVYVFVSRV8yRCwwLGUsYy53aWR0aCxjLmhlaWdodCwwLGUsZixjLmRhdGEpO2Vsc2UgaWYoYSBpbnN0YW5jZW9mIFRIUkVFLkNvbXByZXNzZWRUZXh0dXJlKXtoPTA7Zm9yKGk9Zy5sZW5ndGg7aDxcbmk7aCsrKWM9Z1toXSxhLmZvcm1hdCE9PVRIUkVFLlJHQkFGb3JtYXQ/ai5jb21wcmVzc2VkVGV4SW1hZ2UyRChqLlRFWFRVUkVfMkQsaCxlLGMud2lkdGgsYy5oZWlnaHQsMCxjLmRhdGEpOmoudGV4SW1hZ2UyRChqLlRFWFRVUkVfMkQsaCxlLGMud2lkdGgsYy5oZWlnaHQsMCxlLGYsYy5kYXRhKX1lbHNlIGlmKDA8Zy5sZW5ndGgmJmQpe2g9MDtmb3IoaT1nLmxlbmd0aDtoPGk7aCsrKWM9Z1toXSxqLnRleEltYWdlMkQoai5URVhUVVJFXzJELGgsZSxlLGYsYyk7YS5nZW5lcmF0ZU1pcG1hcHM9ITF9ZWxzZSBqLnRleEltYWdlMkQoai5URVhUVVJFXzJELDAsZSxlLGYsYS5pbWFnZSk7YS5nZW5lcmF0ZU1pcG1hcHMmJmQmJmouZ2VuZXJhdGVNaXBtYXAoai5URVhUVVJFXzJEKTthLm5lZWRzVXBkYXRlPSExO2lmKGEub25VcGRhdGUpYS5vblVwZGF0ZSgpfWVsc2Ugai5hY3RpdmVUZXh0dXJlKGouVEVYVFVSRTArYiksai5iaW5kVGV4dHVyZShqLlRFWFRVUkVfMkQsYS5fX3dlYmdsVGV4dHVyZSl9O1xudGhpcy5zZXRSZW5kZXJUYXJnZXQ9ZnVuY3Rpb24oYSl7dmFyIGI9YSBpbnN0YW5jZW9mIFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0Q3ViZTtpZihhJiYhYS5fX3dlYmdsRnJhbWVidWZmZXIpe3ZvaWQgMD09PWEuZGVwdGhCdWZmZXImJihhLmRlcHRoQnVmZmVyPSEwKTt2b2lkIDA9PT1hLnN0ZW5jaWxCdWZmZXImJihhLnN0ZW5jaWxCdWZmZXI9ITApO2EuYWRkRXZlbnRMaXN0ZW5lcihcImRpc3Bvc2VcIixFYik7YS5fX3dlYmdsVGV4dHVyZT1qLmNyZWF0ZVRleHR1cmUoKTtMLmluZm8ubWVtb3J5LnRleHR1cmVzKys7dmFyIGM9MD09PShhLndpZHRoJmEud2lkdGgtMSkmJjA9PT0oYS5oZWlnaHQmYS5oZWlnaHQtMSksZD1JKGEuZm9ybWF0KSxlPUkoYS50eXBlKTtpZihiKXthLl9fd2ViZ2xGcmFtZWJ1ZmZlcj1bXTthLl9fd2ViZ2xSZW5kZXJidWZmZXI9W107ai5iaW5kVGV4dHVyZShqLlRFWFRVUkVfQ1VCRV9NQVAsYS5fX3dlYmdsVGV4dHVyZSk7RihqLlRFWFRVUkVfQ1VCRV9NQVAsXG5hLGMpO2Zvcih2YXIgZj0wOzY+ZjtmKyspe2EuX193ZWJnbEZyYW1lYnVmZmVyW2ZdPWouY3JlYXRlRnJhbWVidWZmZXIoKTthLl9fd2ViZ2xSZW5kZXJidWZmZXJbZl09ai5jcmVhdGVSZW5kZXJidWZmZXIoKTtqLnRleEltYWdlMkQoai5URVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1grZiwwLGQsYS53aWR0aCxhLmhlaWdodCwwLGQsZSxudWxsKTt2YXIgZz1hLGg9ai5URVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1grZjtqLmJpbmRGcmFtZWJ1ZmZlcihqLkZSQU1FQlVGRkVSLGEuX193ZWJnbEZyYW1lYnVmZmVyW2ZdKTtqLmZyYW1lYnVmZmVyVGV4dHVyZTJEKGouRlJBTUVCVUZGRVIsai5DT0xPUl9BVFRBQ0hNRU5UMCxoLGcuX193ZWJnbFRleHR1cmUsMCk7TyhhLl9fd2ViZ2xSZW5kZXJidWZmZXJbZl0sYSl9YyYmai5nZW5lcmF0ZU1pcG1hcChqLlRFWFRVUkVfQ1VCRV9NQVApfWVsc2UgYS5fX3dlYmdsRnJhbWVidWZmZXI9ai5jcmVhdGVGcmFtZWJ1ZmZlcigpLGEuX193ZWJnbFJlbmRlcmJ1ZmZlcj1cbmEuc2hhcmVEZXB0aEZyb20/YS5zaGFyZURlcHRoRnJvbS5fX3dlYmdsUmVuZGVyYnVmZmVyOmouY3JlYXRlUmVuZGVyYnVmZmVyKCksai5iaW5kVGV4dHVyZShqLlRFWFRVUkVfMkQsYS5fX3dlYmdsVGV4dHVyZSksRihqLlRFWFRVUkVfMkQsYSxjKSxqLnRleEltYWdlMkQoai5URVhUVVJFXzJELDAsZCxhLndpZHRoLGEuaGVpZ2h0LDAsZCxlLG51bGwpLGQ9ai5URVhUVVJFXzJELGouYmluZEZyYW1lYnVmZmVyKGouRlJBTUVCVUZGRVIsYS5fX3dlYmdsRnJhbWVidWZmZXIpLGouZnJhbWVidWZmZXJUZXh0dXJlMkQoai5GUkFNRUJVRkZFUixqLkNPTE9SX0FUVEFDSE1FTlQwLGQsYS5fX3dlYmdsVGV4dHVyZSwwKSxhLnNoYXJlRGVwdGhGcm9tP2EuZGVwdGhCdWZmZXImJiFhLnN0ZW5jaWxCdWZmZXI/ai5mcmFtZWJ1ZmZlclJlbmRlcmJ1ZmZlcihqLkZSQU1FQlVGRkVSLGouREVQVEhfQVRUQUNITUVOVCxqLlJFTkRFUkJVRkZFUixhLl9fd2ViZ2xSZW5kZXJidWZmZXIpOmEuZGVwdGhCdWZmZXImJlxuYS5zdGVuY2lsQnVmZmVyJiZqLmZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyKGouRlJBTUVCVUZGRVIsai5ERVBUSF9TVEVOQ0lMX0FUVEFDSE1FTlQsai5SRU5ERVJCVUZGRVIsYS5fX3dlYmdsUmVuZGVyYnVmZmVyKTpPKGEuX193ZWJnbFJlbmRlcmJ1ZmZlcixhKSxjJiZqLmdlbmVyYXRlTWlwbWFwKGouVEVYVFVSRV8yRCk7Yj9qLmJpbmRUZXh0dXJlKGouVEVYVFVSRV9DVUJFX01BUCxudWxsKTpqLmJpbmRUZXh0dXJlKGouVEVYVFVSRV8yRCxudWxsKTtqLmJpbmRSZW5kZXJidWZmZXIoai5SRU5ERVJCVUZGRVIsbnVsbCk7ai5iaW5kRnJhbWVidWZmZXIoai5GUkFNRUJVRkZFUixudWxsKX1hPyhiPWI/YS5fX3dlYmdsRnJhbWVidWZmZXJbYS5hY3RpdmVDdWJlRmFjZV06YS5fX3dlYmdsRnJhbWVidWZmZXIsYz1hLndpZHRoLGE9YS5oZWlnaHQsZT1kPTApOihiPW51bGwsYz1NYSxhPWZiLGQ9YmIsZT1jYik7YiE9PWJhJiYoai5iaW5kRnJhbWVidWZmZXIoai5GUkFNRUJVRkZFUixiKSxcbmoudmlld3BvcnQoZCxlLGMsYSksYmE9Yik7c2I9YztwYj1hfTt0aGlzLnNoYWRvd01hcFBsdWdpbj1uZXcgVEhSRUUuU2hhZG93TWFwUGx1Z2luO3RoaXMuYWRkUHJlUGx1Z2luKHRoaXMuc2hhZG93TWFwUGx1Z2luKTt0aGlzLmFkZFBvc3RQbHVnaW4obmV3IFRIUkVFLlNwcml0ZVBsdWdpbik7dGhpcy5hZGRQb3N0UGx1Z2luKG5ldyBUSFJFRS5MZW5zRmxhcmVQbHVnaW4pfTtUSFJFRS5XZWJHTFJlbmRlclRhcmdldD1mdW5jdGlvbihhLGIsYyl7dGhpcy53aWR0aD1hO3RoaXMuaGVpZ2h0PWI7Yz1jfHx7fTt0aGlzLndyYXBTPXZvaWQgMCE9PWMud3JhcFM/Yy53cmFwUzpUSFJFRS5DbGFtcFRvRWRnZVdyYXBwaW5nO3RoaXMud3JhcFQ9dm9pZCAwIT09Yy53cmFwVD9jLndyYXBUOlRIUkVFLkNsYW1wVG9FZGdlV3JhcHBpbmc7dGhpcy5tYWdGaWx0ZXI9dm9pZCAwIT09Yy5tYWdGaWx0ZXI/Yy5tYWdGaWx0ZXI6VEhSRUUuTGluZWFyRmlsdGVyO3RoaXMubWluRmlsdGVyPXZvaWQgMCE9PWMubWluRmlsdGVyP2MubWluRmlsdGVyOlRIUkVFLkxpbmVhck1pcE1hcExpbmVhckZpbHRlcjt0aGlzLmFuaXNvdHJvcHk9dm9pZCAwIT09Yy5hbmlzb3Ryb3B5P2MuYW5pc290cm9weToxO3RoaXMub2Zmc2V0PW5ldyBUSFJFRS5WZWN0b3IyKDAsMCk7dGhpcy5yZXBlYXQ9bmV3IFRIUkVFLlZlY3RvcjIoMSwxKTt0aGlzLmZvcm1hdD12b2lkIDAhPT1jLmZvcm1hdD9jLmZvcm1hdDpcblRIUkVFLlJHQkFGb3JtYXQ7dGhpcy50eXBlPXZvaWQgMCE9PWMudHlwZT9jLnR5cGU6VEhSRUUuVW5zaWduZWRCeXRlVHlwZTt0aGlzLmRlcHRoQnVmZmVyPXZvaWQgMCE9PWMuZGVwdGhCdWZmZXI/Yy5kZXB0aEJ1ZmZlcjohMDt0aGlzLnN0ZW5jaWxCdWZmZXI9dm9pZCAwIT09Yy5zdGVuY2lsQnVmZmVyP2Muc3RlbmNpbEJ1ZmZlcjohMDt0aGlzLmdlbmVyYXRlTWlwbWFwcz0hMDt0aGlzLnNoYXJlRGVwdGhGcm9tPW51bGx9O1xuVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5XZWJHTFJlbmRlclRhcmdldCxjbG9uZTpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5XZWJHTFJlbmRlclRhcmdldCh0aGlzLndpZHRoLHRoaXMuaGVpZ2h0KTthLndyYXBTPXRoaXMud3JhcFM7YS53cmFwVD10aGlzLndyYXBUO2EubWFnRmlsdGVyPXRoaXMubWFnRmlsdGVyO2EubWluRmlsdGVyPXRoaXMubWluRmlsdGVyO2EuYW5pc290cm9weT10aGlzLmFuaXNvdHJvcHk7YS5vZmZzZXQuY29weSh0aGlzLm9mZnNldCk7YS5yZXBlYXQuY29weSh0aGlzLnJlcGVhdCk7YS5mb3JtYXQ9dGhpcy5mb3JtYXQ7YS50eXBlPXRoaXMudHlwZTthLmRlcHRoQnVmZmVyPXRoaXMuZGVwdGhCdWZmZXI7YS5zdGVuY2lsQnVmZmVyPXRoaXMuc3RlbmNpbEJ1ZmZlcjthLmdlbmVyYXRlTWlwbWFwcz10aGlzLmdlbmVyYXRlTWlwbWFwczthLnNoYXJlRGVwdGhGcm9tPXRoaXMuc2hhcmVEZXB0aEZyb207XG5yZXR1cm4gYX0sZGlzcG9zZTpmdW5jdGlvbigpe3RoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImRpc3Bvc2VcIn0pfX07VEhSRUUuRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZS5hcHBseShUSFJFRS5XZWJHTFJlbmRlclRhcmdldC5wcm90b3R5cGUpO1RIUkVFLldlYkdMUmVuZGVyVGFyZ2V0Q3ViZT1mdW5jdGlvbihhLGIsYyl7VEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQuY2FsbCh0aGlzLGEsYixjKTt0aGlzLmFjdGl2ZUN1YmVGYWNlPTB9O1RIUkVFLldlYkdMUmVuZGVyVGFyZ2V0Q3ViZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5XZWJHTFJlbmRlclRhcmdldC5wcm90b3R5cGUpO1RIUkVFLlJlbmRlcmFibGVWZXJ0ZXg9ZnVuY3Rpb24oKXt0aGlzLnBvc2l0aW9uV29ybGQ9bmV3IFRIUkVFLlZlY3RvcjM7dGhpcy5wb3NpdGlvblNjcmVlbj1uZXcgVEhSRUUuVmVjdG9yNDt0aGlzLnZpc2libGU9ITB9O1RIUkVFLlJlbmRlcmFibGVWZXJ0ZXgucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oYSl7dGhpcy5wb3NpdGlvbldvcmxkLmNvcHkoYS5wb3NpdGlvbldvcmxkKTt0aGlzLnBvc2l0aW9uU2NyZWVuLmNvcHkoYS5wb3NpdGlvblNjcmVlbil9O1RIUkVFLlJlbmRlcmFibGVGYWNlMz1mdW5jdGlvbigpe3RoaXMuaWQ9MDt0aGlzLnYxPW5ldyBUSFJFRS5SZW5kZXJhYmxlVmVydGV4O3RoaXMudjI9bmV3IFRIUkVFLlJlbmRlcmFibGVWZXJ0ZXg7dGhpcy52Mz1uZXcgVEhSRUUuUmVuZGVyYWJsZVZlcnRleDt0aGlzLmNlbnRyb2lkTW9kZWw9bmV3IFRIUkVFLlZlY3RvcjM7dGhpcy5ub3JtYWxNb2RlbD1uZXcgVEhSRUUuVmVjdG9yMzt0aGlzLm5vcm1hbE1vZGVsVmlldz1uZXcgVEhSRUUuVmVjdG9yMzt0aGlzLnZlcnRleE5vcm1hbHNMZW5ndGg9MDt0aGlzLnZlcnRleE5vcm1hbHNNb2RlbD1bbmV3IFRIUkVFLlZlY3RvcjMsbmV3IFRIUkVFLlZlY3RvcjMsbmV3IFRIUkVFLlZlY3RvcjNdO3RoaXMudmVydGV4Tm9ybWFsc01vZGVsVmlldz1bbmV3IFRIUkVFLlZlY3RvcjMsbmV3IFRIUkVFLlZlY3RvcjMsbmV3IFRIUkVFLlZlY3RvcjNdO3RoaXMubWF0ZXJpYWw9dGhpcy5jb2xvcj1udWxsO3RoaXMudXZzPVtbXV07dGhpcy56PVxuMH07VEhSRUUuUmVuZGVyYWJsZU9iamVjdD1mdW5jdGlvbigpe3RoaXMuaWQ9MDt0aGlzLm9iamVjdD1udWxsO3RoaXMuej0wfTtUSFJFRS5SZW5kZXJhYmxlU3ByaXRlPWZ1bmN0aW9uKCl7dGhpcy5pZD0wO3RoaXMub2JqZWN0PW51bGw7dGhpcy5yb3RhdGlvbj10aGlzLno9dGhpcy55PXRoaXMueD0wO3RoaXMuc2NhbGU9bmV3IFRIUkVFLlZlY3RvcjI7dGhpcy5tYXRlcmlhbD1udWxsfTtUSFJFRS5SZW5kZXJhYmxlTGluZT1mdW5jdGlvbigpe3RoaXMuaWQ9MDt0aGlzLnYxPW5ldyBUSFJFRS5SZW5kZXJhYmxlVmVydGV4O3RoaXMudjI9bmV3IFRIUkVFLlJlbmRlcmFibGVWZXJ0ZXg7dGhpcy52ZXJ0ZXhDb2xvcnM9W25ldyBUSFJFRS5Db2xvcixuZXcgVEhSRUUuQ29sb3JdO3RoaXMubWF0ZXJpYWw9bnVsbDt0aGlzLno9MH07VEhSRUUuR2VvbWV0cnlVdGlscz17bWVyZ2U6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj1hLnZlcnRpY2VzLmxlbmd0aCxoPWIgaW5zdGFuY2VvZiBUSFJFRS5NZXNoP2IuZ2VvbWV0cnk6YixnPWEudmVydGljZXMsaT1oLnZlcnRpY2VzLGs9YS5mYWNlcyxtPWguZmFjZXMsYT1hLmZhY2VWZXJ0ZXhVdnNbMF0saD1oLmZhY2VWZXJ0ZXhVdnNbMF07dm9pZCAwPT09YyYmKGM9MCk7YiBpbnN0YW5jZW9mIFRIUkVFLk1lc2gmJihiLm1hdHJpeEF1dG9VcGRhdGUmJmIudXBkYXRlTWF0cml4KCksZD1iLm1hdHJpeCxlPShuZXcgVEhSRUUuTWF0cml4MykuZ2V0Tm9ybWFsTWF0cml4KGQpKTtmb3IodmFyIGI9MCxsPWkubGVuZ3RoO2I8bDtiKyspe3ZhciBwPWlbYl0uY2xvbmUoKTtkJiZwLmFwcGx5TWF0cml4NChkKTtnLnB1c2gocCl9Yj0wO2ZvcihsPW0ubGVuZ3RoO2I8bDtiKyspe3ZhciBwPW1bYl0sdCxzLHE9cC52ZXJ0ZXhOb3JtYWxzLG49cC52ZXJ0ZXhDb2xvcnM7dD1uZXcgVEhSRUUuRmFjZTMocC5hK1xuZixwLmIrZixwLmMrZik7dC5ub3JtYWwuY29weShwLm5vcm1hbCk7ZSYmdC5ub3JtYWwuYXBwbHlNYXRyaXgzKGUpLm5vcm1hbGl6ZSgpO2c9MDtmb3IoaT1xLmxlbmd0aDtnPGk7ZysrKXM9cVtnXS5jbG9uZSgpLGUmJnMuYXBwbHlNYXRyaXgzKGUpLm5vcm1hbGl6ZSgpLHQudmVydGV4Tm9ybWFscy5wdXNoKHMpO3QuY29sb3IuY29weShwLmNvbG9yKTtnPTA7Zm9yKGk9bi5sZW5ndGg7ZzxpO2crKylzPW5bZ10sdC52ZXJ0ZXhDb2xvcnMucHVzaChzLmNsb25lKCkpO3QubWF0ZXJpYWxJbmRleD1wLm1hdGVyaWFsSW5kZXgrYzt0LmNlbnRyb2lkLmNvcHkocC5jZW50cm9pZCk7ZCYmdC5jZW50cm9pZC5hcHBseU1hdHJpeDQoZCk7ay5wdXNoKHQpfWI9MDtmb3IobD1oLmxlbmd0aDtiPGw7YisrKXtjPWhbYl07ZD1bXTtnPTA7Zm9yKGk9Yy5sZW5ndGg7ZzxpO2crKylkLnB1c2gobmV3IFRIUkVFLlZlY3RvcjIoY1tnXS54LGNbZ10ueSkpO2EucHVzaChkKX19LHJhbmRvbVBvaW50SW5UcmlhbmdsZTpmdW5jdGlvbigpe3ZhciBhPVxubmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGIsYyxkKXt2YXIgZT1uZXcgVEhSRUUuVmVjdG9yMyxmPVRIUkVFLk1hdGgucmFuZG9tMTYoKSxoPVRIUkVFLk1hdGgucmFuZG9tMTYoKTsxPGYraCYmKGY9MS1mLGg9MS1oKTt2YXIgZz0xLWYtaDtlLmNvcHkoYik7ZS5tdWx0aXBseVNjYWxhcihmKTthLmNvcHkoYyk7YS5tdWx0aXBseVNjYWxhcihoKTtlLmFkZChhKTthLmNvcHkoZCk7YS5tdWx0aXBseVNjYWxhcihnKTtlLmFkZChhKTtyZXR1cm4gZX19KCkscmFuZG9tUG9pbnRJbkZhY2U6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gVEhSRUUuR2VvbWV0cnlVdGlscy5yYW5kb21Qb2ludEluVHJpYW5nbGUoYi52ZXJ0aWNlc1thLmFdLGIudmVydGljZXNbYS5iXSxiLnZlcnRpY2VzW2EuY10pfSxyYW5kb21Qb2ludHNJbkdlb21ldHJ5OmZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhKXtmdW5jdGlvbiBiKGMsZCl7aWYoZDxjKXJldHVybiBjO3ZhciBlPWMrTWF0aC5mbG9vcigoZC1cbmMpLzIpO3JldHVybiBrW2VdPmE/YihjLGUtMSk6a1tlXTxhP2IoZSsxLGQpOmV9cmV0dXJuIGIoMCxrLmxlbmd0aC0xKX12YXIgZCxlLGY9YS5mYWNlcyxoPWEudmVydGljZXMsZz1mLmxlbmd0aCxpPTAsaz1bXSxtLGwscDtmb3IoZT0wO2U8ZztlKyspZD1mW2VdLG09aFtkLmFdLGw9aFtkLmJdLHA9aFtkLmNdLGQuX2FyZWE9VEhSRUUuR2VvbWV0cnlVdGlscy50cmlhbmdsZUFyZWEobSxsLHApLGkrPWQuX2FyZWEsa1tlXT1pO2Q9W107Zm9yKGU9MDtlPGI7ZSsrKWg9VEhSRUUuTWF0aC5yYW5kb20xNigpKmksaD1jKGgpLGRbZV09VEhSRUUuR2VvbWV0cnlVdGlscy5yYW5kb21Qb2ludEluRmFjZShmW2hdLGEsITApO3JldHVybiBkfSx0cmlhbmdsZUFyZWE6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMyxiPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihjLGQsZSl7YS5zdWJWZWN0b3JzKGQsYyk7Yi5zdWJWZWN0b3JzKGUsYyk7YS5jcm9zcyhiKTtyZXR1cm4gMC41KlxuYS5sZW5ndGgoKX19KCksY2VudGVyOmZ1bmN0aW9uKGEpe2EuY29tcHV0ZUJvdW5kaW5nQm94KCk7dmFyIGI9YS5ib3VuZGluZ0JveCxjPW5ldyBUSFJFRS5WZWN0b3IzO2MuYWRkVmVjdG9ycyhiLm1pbixiLm1heCk7Yy5tdWx0aXBseVNjYWxhcigtMC41KTthLmFwcGx5TWF0cml4KChuZXcgVEhSRUUuTWF0cml4NCkubWFrZVRyYW5zbGF0aW9uKGMueCxjLnksYy56KSk7YS5jb21wdXRlQm91bmRpbmdCb3goKTtyZXR1cm4gY30sdHJpYW5ndWxhdGVRdWFkczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmPVtdLGg9W107Yj0wO2ZvcihjPWEuZmFjZVZlcnRleFV2cy5sZW5ndGg7YjxjO2IrKyloW2JdPVtdO2I9MDtmb3IoYz1hLmZhY2VzLmxlbmd0aDtiPGM7YisrKXtmLnB1c2goYS5mYWNlc1tiXSk7ZD0wO2ZvcihlPWEuZmFjZVZlcnRleFV2cy5sZW5ndGg7ZDxlO2QrKyloW2RdLnB1c2goYS5mYWNlVmVydGV4VXZzW2RdW2JdKX1hLmZhY2VzPWY7YS5mYWNlVmVydGV4VXZzPWg7YS5jb21wdXRlQ2VudHJvaWRzKCk7XG5hLmNvbXB1dGVGYWNlTm9ybWFscygpO2EuY29tcHV0ZVZlcnRleE5vcm1hbHMoKTthLmhhc1RhbmdlbnRzJiZhLmNvbXB1dGVUYW5nZW50cygpfX07VEhSRUUuSW1hZ2VVdGlscz17Y3Jvc3NPcmlnaW46XCJhbm9ueW1vdXNcIixsb2FkVGV4dHVyZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9bmV3IFRIUkVFLkltYWdlTG9hZGVyO2QuY3Jvc3NPcmlnaW49dGhpcy5jcm9zc09yaWdpbjt2YXIgZT1uZXcgVEhSRUUuVGV4dHVyZSh2b2lkIDAsYiksYj1kLmxvYWQoYSxmdW5jdGlvbigpe2UubmVlZHNVcGRhdGU9ITA7YyYmYyhlKX0pO2UuaW1hZ2U9YjtlLnNvdXJjZUZpbGU9YTtyZXR1cm4gZX0sbG9hZENvbXByZXNzZWRUZXh0dXJlOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPW5ldyBUSFJFRS5Db21wcmVzc2VkVGV4dHVyZTtlLm1hcHBpbmc9Yjt2YXIgZj1uZXcgWE1MSHR0cFJlcXVlc3Q7Zi5vbmxvYWQ9ZnVuY3Rpb24oKXt2YXIgYT1USFJFRS5JbWFnZVV0aWxzLnBhcnNlRERTKGYucmVzcG9uc2UsITApO2UuZm9ybWF0PWEuZm9ybWF0O2UubWlwbWFwcz1hLm1pcG1hcHM7ZS5pbWFnZS53aWR0aD1hLndpZHRoO2UuaW1hZ2UuaGVpZ2h0PWEuaGVpZ2h0O1xuZS5nZW5lcmF0ZU1pcG1hcHM9ITE7ZS5uZWVkc1VwZGF0ZT0hMDtjJiZjKGUpfTtmLm9uZXJyb3I9ZDtmLm9wZW4oXCJHRVRcIixhLCEwKTtmLnJlc3BvbnNlVHlwZT1cImFycmF5YnVmZmVyXCI7Zi5zZW5kKG51bGwpO3JldHVybiBlfSxsb2FkVGV4dHVyZUN1YmU6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9W107ZS5sb2FkQ291bnQ9MDt2YXIgZj1uZXcgVEhSRUUuVGV4dHVyZTtmLmltYWdlPWU7dm9pZCAwIT09YiYmKGYubWFwcGluZz1iKTtmLmZsaXBZPSExO2Zvcih2YXIgYj0wLGg9YS5sZW5ndGg7YjxoOysrYil7dmFyIGc9bmV3IEltYWdlO2VbYl09ZztnLm9ubG9hZD1mdW5jdGlvbigpe2UubG9hZENvdW50Kz0xOzY9PT1lLmxvYWRDb3VudCYmKGYubmVlZHNVcGRhdGU9ITAsYyYmYyhmKSl9O2cub25lcnJvcj1kO2cuY3Jvc3NPcmlnaW49dGhpcy5jcm9zc09yaWdpbjtnLnNyYz1hW2JdfXJldHVybiBmfSxsb2FkQ29tcHJlc3NlZFRleHR1cmVDdWJlOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPVxuW107ZS5sb2FkQ291bnQ9MDt2YXIgZj1uZXcgVEhSRUUuQ29tcHJlc3NlZFRleHR1cmU7Zi5pbWFnZT1lO3ZvaWQgMCE9PWImJihmLm1hcHBpbmc9Yik7Zi5mbGlwWT0hMTtmLmdlbmVyYXRlTWlwbWFwcz0hMTtiPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGQ9VEhSRUUuSW1hZ2VVdGlscy5wYXJzZUREUyhhLnJlc3BvbnNlLCEwKTtiLmZvcm1hdD1kLmZvcm1hdDtiLm1pcG1hcHM9ZC5taXBtYXBzO2Iud2lkdGg9ZC53aWR0aDtiLmhlaWdodD1kLmhlaWdodDtlLmxvYWRDb3VudCs9MTs2PT09ZS5sb2FkQ291bnQmJihmLmZvcm1hdD1kLmZvcm1hdCxmLm5lZWRzVXBkYXRlPSEwLGMmJmMoZikpfX07aWYoYSBpbnN0YW5jZW9mIEFycmF5KWZvcih2YXIgaD0wLGc9YS5sZW5ndGg7aDxnOysraCl7dmFyIGk9e307ZVtoXT1pO3ZhciBrPW5ldyBYTUxIdHRwUmVxdWVzdDtrLm9ubG9hZD1iKGssaSk7ay5vbmVycm9yPWQ7aT1hW2hdO2sub3BlbihcIkdFVFwiLGksITApO2sucmVzcG9uc2VUeXBlPVxuXCJhcnJheWJ1ZmZlclwiO2suc2VuZChudWxsKX1lbHNlIGs9bmV3IFhNTEh0dHBSZXF1ZXN0LGsub25sb2FkPWZ1bmN0aW9uKCl7dmFyIGE9VEhSRUUuSW1hZ2VVdGlscy5wYXJzZUREUyhrLnJlc3BvbnNlLCEwKTtpZihhLmlzQ3ViZW1hcCl7Zm9yKHZhciBiPWEubWlwbWFwcy5sZW5ndGgvYS5taXBtYXBDb3VudCxkPTA7ZDxiO2QrKyl7ZVtkXT17bWlwbWFwczpbXX07Zm9yKHZhciBnPTA7ZzxhLm1pcG1hcENvdW50O2crKyllW2RdLm1pcG1hcHMucHVzaChhLm1pcG1hcHNbZCphLm1pcG1hcENvdW50K2ddKSxlW2RdLmZvcm1hdD1hLmZvcm1hdCxlW2RdLndpZHRoPWEud2lkdGgsZVtkXS5oZWlnaHQ9YS5oZWlnaHR9Zi5mb3JtYXQ9YS5mb3JtYXQ7Zi5uZWVkc1VwZGF0ZT0hMDtjJiZjKGYpfX0say5vbmVycm9yPWQsay5vcGVuKFwiR0VUXCIsYSwhMCksay5yZXNwb25zZVR5cGU9XCJhcnJheWJ1ZmZlclwiLGsuc2VuZChudWxsKTtyZXR1cm4gZn0sbG9hZEREU1RleHR1cmU6ZnVuY3Rpb24oYSxcbmIsYyxkKXt2YXIgZT1bXTtlLmxvYWRDb3VudD0wO3ZhciBmPW5ldyBUSFJFRS5Db21wcmVzc2VkVGV4dHVyZTtmLmltYWdlPWU7dm9pZCAwIT09YiYmKGYubWFwcGluZz1iKTtmLmZsaXBZPSExO2YuZ2VuZXJhdGVNaXBtYXBzPSExO3ZhciBoPW5ldyBYTUxIdHRwUmVxdWVzdDtoLm9ubG9hZD1mdW5jdGlvbigpe3ZhciBhPVRIUkVFLkltYWdlVXRpbHMucGFyc2VERFMoaC5yZXNwb25zZSwhMCk7aWYoYS5pc0N1YmVtYXApZm9yKHZhciBiPWEubWlwbWFwcy5sZW5ndGgvYS5taXBtYXBDb3VudCxkPTA7ZDxiO2QrKyl7ZVtkXT17bWlwbWFwczpbXX07Zm9yKHZhciBtPTA7bTxhLm1pcG1hcENvdW50O20rKyllW2RdLm1pcG1hcHMucHVzaChhLm1pcG1hcHNbZCphLm1pcG1hcENvdW50K21dKSxlW2RdLmZvcm1hdD1hLmZvcm1hdCxlW2RdLndpZHRoPWEud2lkdGgsZVtkXS5oZWlnaHQ9YS5oZWlnaHR9ZWxzZSBmLmltYWdlLndpZHRoPWEud2lkdGgsZi5pbWFnZS5oZWlnaHQ9YS5oZWlnaHQsXG5mLm1pcG1hcHM9YS5taXBtYXBzO2YuZm9ybWF0PWEuZm9ybWF0O2YubmVlZHNVcGRhdGU9ITA7YyYmYyhmKX07aC5vbmVycm9yPWQ7aC5vcGVuKFwiR0VUXCIsYSwhMCk7aC5yZXNwb25zZVR5cGU9XCJhcnJheWJ1ZmZlclwiO2guc2VuZChudWxsKTtyZXR1cm4gZn0scGFyc2VERFM6ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEpe3JldHVybiBhLmNoYXJDb2RlQXQoMCkrKGEuY2hhckNvZGVBdCgxKTw8OCkrKGEuY2hhckNvZGVBdCgyKTw8MTYpKyhhLmNoYXJDb2RlQXQoMyk8PDI0KX12YXIgZD17bWlwbWFwczpbXSx3aWR0aDowLGhlaWdodDowLGZvcm1hdDpudWxsLG1pcG1hcENvdW50OjF9LGU9YyhcIkRYVDFcIiksZj1jKFwiRFhUM1wiKSxoPWMoXCJEWFQ1XCIpLGc9bmV3IEludDMyQXJyYXkoYSwwLDMxKTtpZig1NDIzMjc4NzYhPT1nWzBdKXJldHVybiBjb25zb2xlLmVycm9yKFwiSW1hZ2VVdGlscy5wYXJzZUREUygpOiBJbnZhbGlkIG1hZ2ljIG51bWJlciBpbiBERFMgaGVhZGVyXCIpLGQ7aWYoIWdbMjBdJlxuNClyZXR1cm4gY29uc29sZS5lcnJvcihcIkltYWdlVXRpbHMucGFyc2VERFMoKTogVW5zdXBwb3J0ZWQgZm9ybWF0LCBtdXN0IGNvbnRhaW4gYSBGb3VyQ0MgY29kZVwiKSxkO3ZhciBpPWdbMjFdLGs9ITE7c3dpdGNoKGkpe2Nhc2UgZTplPTg7ZC5mb3JtYXQ9VEhSRUUuUkdCX1MzVENfRFhUMV9Gb3JtYXQ7YnJlYWs7Y2FzZSBmOmU9MTY7ZC5mb3JtYXQ9VEhSRUUuUkdCQV9TM1RDX0RYVDNfRm9ybWF0O2JyZWFrO2Nhc2UgaDplPTE2O2QuZm9ybWF0PVRIUkVFLlJHQkFfUzNUQ19EWFQ1X0Zvcm1hdDticmVhaztkZWZhdWx0OmlmKDMyPT1nWzIyXSYmZ1syM10mMTY3MTE2ODAmJmdbMjRdJjY1MjgwJiZnWzI1XSYyNTUmJmdbMjZdJjQyNzgxOTAwODApaz0hMCxlPTY0LGQuZm9ybWF0PVRIUkVFLlJHQkFGb3JtYXQ7ZWxzZSByZXR1cm4gY29uc29sZS5lcnJvcihcIkltYWdlVXRpbHMucGFyc2VERFMoKTogVW5zdXBwb3J0ZWQgRm91ckNDIGNvZGU6IFwiLFN0cmluZy5mcm9tQ2hhckNvZGUoaSZcbjI1NSxpPj44JjI1NSxpPj4xNiYyNTUsaT4+MjQmMjU1KSksZH1kLm1pcG1hcENvdW50PTE7Z1syXSYxMzEwNzImJiExIT09YiYmKGQubWlwbWFwQ291bnQ9TWF0aC5tYXgoMSxnWzddKSk7ZC5pc0N1YmVtYXA9Z1syOF0mNTEyPyEwOiExO2Qud2lkdGg9Z1s0XTtkLmhlaWdodD1nWzNdO2Zvcih2YXIgZz1nWzFdKzQsZj1kLndpZHRoLGg9ZC5oZWlnaHQsaT1kLmlzQ3ViZW1hcD82OjEsbT0wO208aTttKyspe2Zvcih2YXIgbD0wO2w8ZC5taXBtYXBDb3VudDtsKyspe2lmKGspe3ZhciBwO3A9Zjtmb3IodmFyIHQ9aCxzPTQqcCp0LHE9bmV3IFVpbnQ4QXJyYXkoYSxnLHMpLHM9bmV3IFVpbnQ4QXJyYXkocyksbj0wLHU9MCxyPTA7cjx0O3IrKylmb3IodmFyIHY9MDt2PHA7disrKXt2YXIgej1xW3VdO3UrKzt2YXIgRz1xW3VdO3UrKzt2YXIgdz1xW3VdO3UrKzt2YXIgeT1xW3VdO3UrKztzW25dPXc7bisrO3Nbbl09RztuKys7c1tuXT16O24rKztzW25dPXk7bisrfXA9czt0PXAubGVuZ3RofWVsc2UgdD1cbk1hdGgubWF4KDQsZikvNCpNYXRoLm1heCg0LGgpLzQqZSxwPW5ldyBVaW50OEFycmF5KGEsZyx0KTtkLm1pcG1hcHMucHVzaCh7ZGF0YTpwLHdpZHRoOmYsaGVpZ2h0Omh9KTtnKz10O2Y9TWF0aC5tYXgoMC41KmYsMSk7aD1NYXRoLm1heCgwLjUqaCwxKX1mPWQud2lkdGg7aD1kLmhlaWdodH1yZXR1cm4gZH0sZ2V0Tm9ybWFsTWFwOmZ1bmN0aW9uKGEsYil7dmFyIGM9ZnVuY3Rpb24oYSl7dmFyIGI9TWF0aC5zcXJ0KGFbMF0qYVswXSthWzFdKmFbMV0rYVsyXSphWzJdKTtyZXR1cm5bYVswXS9iLGFbMV0vYixhWzJdL2JdfSxiPWJ8MSxkPWEud2lkdGgsZT1hLmhlaWdodCxmPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7Zi53aWR0aD1kO2YuaGVpZ2h0PWU7dmFyIGg9Zi5nZXRDb250ZXh0KFwiMmRcIik7aC5kcmF3SW1hZ2UoYSwwLDApO2Zvcih2YXIgZz1oLmdldEltYWdlRGF0YSgwLDAsZCxlKS5kYXRhLGk9aC5jcmVhdGVJbWFnZURhdGEoZCxlKSxrPWkuZGF0YSxtPTA7bTxcbmQ7bSsrKWZvcih2YXIgbD0wO2w8ZTtsKyspe3ZhciBwPTA+bC0xPzA6bC0xLHQ9bCsxPmUtMT9lLTE6bCsxLHM9MD5tLTE/MDptLTEscT1tKzE+ZC0xP2QtMTptKzEsbj1bXSx1PVswLDAsZ1s0KihsKmQrbSldLzI1NSpiXTtuLnB1c2goWy0xLDAsZ1s0KihsKmQrcyldLzI1NSpiXSk7bi5wdXNoKFstMSwtMSxnWzQqKHAqZCtzKV0vMjU1KmJdKTtuLnB1c2goWzAsLTEsZ1s0KihwKmQrbSldLzI1NSpiXSk7bi5wdXNoKFsxLC0xLGdbNCoocCpkK3EpXS8yNTUqYl0pO24ucHVzaChbMSwwLGdbNCoobCpkK3EpXS8yNTUqYl0pO24ucHVzaChbMSwxLGdbNCoodCpkK3EpXS8yNTUqYl0pO24ucHVzaChbMCwxLGdbNCoodCpkK20pXS8yNTUqYl0pO24ucHVzaChbLTEsMSxnWzQqKHQqZCtzKV0vMjU1KmJdKTtwPVtdO3M9bi5sZW5ndGg7Zm9yKHQ9MDt0PHM7dCsrKXt2YXIgcT1uW3RdLHI9blsodCsxKSVzXSxxPVtxWzBdLXVbMF0scVsxXS11WzFdLHFbMl0tdVsyXV0scj1bclswXS11WzBdLFxuclsxXS11WzFdLHJbMl0tdVsyXV07cC5wdXNoKGMoW3FbMV0qclsyXS1xWzJdKnJbMV0scVsyXSpyWzBdLXFbMF0qclsyXSxxWzBdKnJbMV0tcVsxXSpyWzBdXSkpfW49WzAsMCwwXTtmb3IodD0wO3Q8cC5sZW5ndGg7dCsrKW5bMF0rPXBbdF1bMF0sblsxXSs9cFt0XVsxXSxuWzJdKz1wW3RdWzJdO25bMF0vPXAubGVuZ3RoO25bMV0vPXAubGVuZ3RoO25bMl0vPXAubGVuZ3RoO3U9NCoobCpkK20pO2tbdV09MjU1KigoblswXSsxKS8yKXwwO2tbdSsxXT0yNTUqKChuWzFdKzEpLzIpfDA7a1t1KzJdPTI1NSpuWzJdfDA7a1t1KzNdPTI1NX1oLnB1dEltYWdlRGF0YShpLDAsMCk7cmV0dXJuIGZ9LGdlbmVyYXRlRGF0YVRleHR1cmU6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD1hKmIsZT1uZXcgVWludDhBcnJheSgzKmQpLGY9TWF0aC5mbG9vcigyNTUqYy5yKSxoPU1hdGguZmxvb3IoMjU1KmMuZyksYz1NYXRoLmZsb29yKDI1NSpjLmIpLGc9MDtnPGQ7ZysrKWVbMypnXT1mLGVbMypnK1xuMV09aCxlWzMqZysyXT1jO2E9bmV3IFRIUkVFLkRhdGFUZXh0dXJlKGUsYSxiLFRIUkVFLlJHQkZvcm1hdCk7YS5uZWVkc1VwZGF0ZT0hMDtyZXR1cm4gYX19O1RIUkVFLlNjZW5lVXRpbHM9e2NyZWF0ZU11bHRpTWF0ZXJpYWxPYmplY3Q6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9bmV3IFRIUkVFLk9iamVjdDNELGQ9MCxlPWIubGVuZ3RoO2Q8ZTtkKyspYy5hZGQobmV3IFRIUkVFLk1lc2goYSxiW2RdKSk7cmV0dXJuIGN9LGRldGFjaDpmdW5jdGlvbihhLGIsYyl7YS5hcHBseU1hdHJpeChiLm1hdHJpeFdvcmxkKTtiLnJlbW92ZShhKTtjLmFkZChhKX0sYXR0YWNoOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1uZXcgVEhSRUUuTWF0cml4NDtkLmdldEludmVyc2UoYy5tYXRyaXhXb3JsZCk7YS5hcHBseU1hdHJpeChkKTtiLnJlbW92ZShhKTtjLmFkZChhKX19O1RIUkVFLkZvbnRVdGlscz17ZmFjZXM6e30sZmFjZTpcImhlbHZldGlrZXJcIix3ZWlnaHQ6XCJub3JtYWxcIixzdHlsZTpcIm5vcm1hbFwiLHNpemU6MTUwLGRpdmlzaW9uczoxMCxnZXRGYWNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZmFjZXNbdGhpcy5mYWNlXVt0aGlzLndlaWdodF1bdGhpcy5zdHlsZV19LGxvYWRGYWNlOmZ1bmN0aW9uKGEpe3ZhciBiPWEuZmFtaWx5TmFtZS50b0xvd2VyQ2FzZSgpO3RoaXMuZmFjZXNbYl09dGhpcy5mYWNlc1tiXXx8e307dGhpcy5mYWNlc1tiXVthLmNzc0ZvbnRXZWlnaHRdPXRoaXMuZmFjZXNbYl1bYS5jc3NGb250V2VpZ2h0XXx8e307dGhpcy5mYWNlc1tiXVthLmNzc0ZvbnRXZWlnaHRdW2EuY3NzRm9udFN0eWxlXT1hO3JldHVybiB0aGlzLmZhY2VzW2JdW2EuY3NzRm9udFdlaWdodF1bYS5jc3NGb250U3R5bGVdPWF9LGRyYXdUZXh0OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmdldEZhY2UoKSxjPXRoaXMuc2l6ZS9iLnJlc29sdXRpb24sZD1cbjAsZT1TdHJpbmcoYSkuc3BsaXQoXCJcIiksZj1lLmxlbmd0aCxoPVtdLGE9MDthPGY7YSsrKXt2YXIgZz1uZXcgVEhSRUUuUGF0aCxnPXRoaXMuZXh0cmFjdEdseXBoUG9pbnRzKGVbYV0sYixjLGQsZyksZD1kK2cub2Zmc2V0O2gucHVzaChnLnBhdGgpfXJldHVybntwYXRoczpoLG9mZnNldDpkLzJ9fSxleHRyYWN0R2x5cGhQb2ludHM6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj1bXSxoLGcsaSxrLG0sbCxwLHQscyxxLG4sdT1iLmdseXBoc1thXXx8Yi5nbHlwaHNbXCI/XCJdO2lmKHUpe2lmKHUubyl7Yj11Ll9jYWNoZWRPdXRsaW5lfHwodS5fY2FjaGVkT3V0bGluZT11Lm8uc3BsaXQoXCIgXCIpKTtrPWIubGVuZ3RoO2ZvcihhPTA7YTxrOylzd2l0Y2goaT1iW2ErK10saSl7Y2FzZSBcIm1cIjppPWJbYSsrXSpjK2Q7bT1iW2ErK10qYztlLm1vdmVUbyhpLG0pO2JyZWFrO2Nhc2UgXCJsXCI6aT1iW2ErK10qYytkO209YlthKytdKmM7ZS5saW5lVG8oaSxtKTticmVhaztjYXNlIFwicVwiOmk9YlthKytdKlxuYytkO209YlthKytdKmM7dD1iW2ErK10qYytkO3M9YlthKytdKmM7ZS5xdWFkcmF0aWNDdXJ2ZVRvKHQscyxpLG0pO2lmKGg9ZltmLmxlbmd0aC0xXSl7bD1oLng7cD1oLnk7aD0xO2ZvcihnPXRoaXMuZGl2aXNpb25zO2g8PWc7aCsrKXt2YXIgcj1oL2c7VEhSRUUuU2hhcGUuVXRpbHMuYjIocixsLHQsaSk7VEhSRUUuU2hhcGUuVXRpbHMuYjIocixwLHMsbSl9fWJyZWFrO2Nhc2UgXCJiXCI6aWYoaT1iW2ErK10qYytkLG09YlthKytdKmMsdD1iW2ErK10qYytkLHM9YlthKytdKi1jLHE9YlthKytdKmMrZCxuPWJbYSsrXSotYyxlLmJlemllckN1cnZlVG8oaSxtLHQscyxxLG4pLGg9ZltmLmxlbmd0aC0xXSl7bD1oLng7cD1oLnk7aD0xO2ZvcihnPXRoaXMuZGl2aXNpb25zO2g8PWc7aCsrKXI9aC9nLFRIUkVFLlNoYXBlLlV0aWxzLmIzKHIsbCx0LHEsaSksVEhSRUUuU2hhcGUuVXRpbHMuYjMocixwLHMsbixtKX19fXJldHVybntvZmZzZXQ6dS5oYSpjLHBhdGg6ZX19fX07XG5USFJFRS5Gb250VXRpbHMuZ2VuZXJhdGVTaGFwZXM9ZnVuY3Rpb24oYSxiKXt2YXIgYj1ifHx7fSxjPXZvaWQgMCE9PWIuY3VydmVTZWdtZW50cz9iLmN1cnZlU2VnbWVudHM6NCxkPXZvaWQgMCE9PWIuZm9udD9iLmZvbnQ6XCJoZWx2ZXRpa2VyXCIsZT12b2lkIDAhPT1iLndlaWdodD9iLndlaWdodDpcIm5vcm1hbFwiLGY9dm9pZCAwIT09Yi5zdHlsZT9iLnN0eWxlOlwibm9ybWFsXCI7VEhSRUUuRm9udFV0aWxzLnNpemU9dm9pZCAwIT09Yi5zaXplP2Iuc2l6ZToxMDA7VEhSRUUuRm9udFV0aWxzLmRpdmlzaW9ucz1jO1RIUkVFLkZvbnRVdGlscy5mYWNlPWQ7VEhSRUUuRm9udFV0aWxzLndlaWdodD1lO1RIUkVFLkZvbnRVdGlscy5zdHlsZT1mO2M9VEhSRUUuRm9udFV0aWxzLmRyYXdUZXh0KGEpLnBhdGhzO2Q9W107ZT0wO2ZvcihmPWMubGVuZ3RoO2U8ZjtlKyspQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoZCxjW2VdLnRvU2hhcGVzKCkpO3JldHVybiBkfTtcbihmdW5jdGlvbihhKXt2YXIgYj1mdW5jdGlvbihhKXtmb3IodmFyIGI9YS5sZW5ndGgsZT0wLGY9Yi0xLGg9MDtoPGI7Zj1oKyspZSs9YVtmXS54KmFbaF0ueS1hW2hdLngqYVtmXS55O3JldHVybiAwLjUqZX07YS5Ucmlhbmd1bGF0ZT1mdW5jdGlvbihhLGQpe3ZhciBlPWEubGVuZ3RoO2lmKDM+ZSlyZXR1cm4gbnVsbDt2YXIgZj1bXSxoPVtdLGc9W10saSxrLG07aWYoMDxiKGEpKWZvcihrPTA7azxlO2srKyloW2tdPWs7ZWxzZSBmb3Ioaz0wO2s8ZTtrKyspaFtrXT1lLTEtazt2YXIgbD0yKmU7Zm9yKGs9ZS0xOzI8ZTspe2lmKDA+PWwtLSl7Y29uc29sZS5sb2coXCJXYXJuaW5nLCB1bmFibGUgdG8gdHJpYW5ndWxhdGUgcG9seWdvbiFcIik7YnJlYWt9aT1rO2U8PWkmJihpPTApO2s9aSsxO2U8PWsmJihrPTApO209aysxO2U8PW0mJihtPTApO3ZhciBwO2E6e3ZhciB0PXA9dm9pZCAwLHM9dm9pZCAwLHE9dm9pZCAwLG49dm9pZCAwLHU9dm9pZCAwLHI9dm9pZCAwLHY9dm9pZCAwLHo9XG52b2lkIDAsdD1hW2hbaV1dLngscz1hW2hbaV1dLnkscT1hW2hba11dLngsbj1hW2hba11dLnksdT1hW2hbbV1dLngscj1hW2hbbV1dLnk7aWYoMUUtMTA+KHEtdCkqKHItcyktKG4tcykqKHUtdCkpcD0hMTtlbHNle3ZhciBHPXZvaWQgMCx3PXZvaWQgMCx5PXZvaWQgMCxFPXZvaWQgMCxBPXZvaWQgMCxLPXZvaWQgMCxEPXZvaWQgMCxGPXZvaWQgMCxPPXZvaWQgMCx4PXZvaWQgMCxPPUY9RD16PXY9dm9pZCAwLEc9dS1xLHc9ci1uLHk9dC11LEU9cy1yLEE9cS10LEs9bi1zO2ZvcihwPTA7cDxlO3ArKylpZighKHA9PT1pfHxwPT09a3x8cD09PW0pKWlmKHY9YVtoW3BdXS54LHo9YVtoW3BdXS55LEQ9di10LEY9ei1zLE89di1xLHg9ei1uLHYtPXUsei09cixPPUcqeC13Kk8sRD1BKkYtSypELEY9eSp6LUUqdiwtMUUtMTA8PU8mJi0xRS0xMDw9RiYmLTFFLTEwPD1EKXtwPSExO2JyZWFrIGF9cD0hMH19aWYocCl7Zi5wdXNoKFthW2hbaV1dLGFbaFtrXV0sYVtoW21dXV0pO2cucHVzaChbaFtpXSxcbmhba10saFttXV0pO2k9aztmb3IobT1rKzE7bTxlO2krKyxtKyspaFtpXT1oW21dO2UtLTtsPTIqZX19cmV0dXJuIGQ/ZzpmfTthLlRyaWFuZ3VsYXRlLmFyZWE9YjtyZXR1cm4gYX0pKFRIUkVFLkZvbnRVdGlscyk7c2VsZi5fdHlwZWZhY2VfanM9e2ZhY2VzOlRIUkVFLkZvbnRVdGlscy5mYWNlcyxsb2FkRmFjZTpUSFJFRS5Gb250VXRpbHMubG9hZEZhY2V9O1RIUkVFLnR5cGVmYWNlX2pzPXNlbGYuX3R5cGVmYWNlX2pzO1RIUkVFLkN1cnZlPWZ1bmN0aW9uKCl7fTtUSFJFRS5DdXJ2ZS5wcm90b3R5cGUuZ2V0UG9pbnQ9ZnVuY3Rpb24oKXtjb25zb2xlLmxvZyhcIldhcm5pbmcsIGdldFBvaW50KCkgbm90IGltcGxlbWVudGVkIVwiKTtyZXR1cm4gbnVsbH07VEhSRUUuQ3VydmUucHJvdG90eXBlLmdldFBvaW50QXQ9ZnVuY3Rpb24oYSl7YT10aGlzLmdldFV0b1RtYXBwaW5nKGEpO3JldHVybiB0aGlzLmdldFBvaW50KGEpfTtUSFJFRS5DdXJ2ZS5wcm90b3R5cGUuZ2V0UG9pbnRzPWZ1bmN0aW9uKGEpe2F8fChhPTUpO3ZhciBiLGM9W107Zm9yKGI9MDtiPD1hO2IrKyljLnB1c2godGhpcy5nZXRQb2ludChiL2EpKTtyZXR1cm4gY307VEhSRUUuQ3VydmUucHJvdG90eXBlLmdldFNwYWNlZFBvaW50cz1mdW5jdGlvbihhKXthfHwoYT01KTt2YXIgYixjPVtdO2ZvcihiPTA7Yjw9YTtiKyspYy5wdXNoKHRoaXMuZ2V0UG9pbnRBdChiL2EpKTtyZXR1cm4gY307XG5USFJFRS5DdXJ2ZS5wcm90b3R5cGUuZ2V0TGVuZ3RoPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRMZW5ndGhzKCk7cmV0dXJuIGFbYS5sZW5ndGgtMV19O1RIUkVFLkN1cnZlLnByb3RvdHlwZS5nZXRMZW5ndGhzPWZ1bmN0aW9uKGEpe2F8fChhPXRoaXMuX19hcmNMZW5ndGhEaXZpc2lvbnM/dGhpcy5fX2FyY0xlbmd0aERpdmlzaW9uczoyMDApO2lmKHRoaXMuY2FjaGVBcmNMZW5ndGhzJiZ0aGlzLmNhY2hlQXJjTGVuZ3Rocy5sZW5ndGg9PWErMSYmIXRoaXMubmVlZHNVcGRhdGUpcmV0dXJuIHRoaXMuY2FjaGVBcmNMZW5ndGhzO3RoaXMubmVlZHNVcGRhdGU9ITE7dmFyIGI9W10sYyxkPXRoaXMuZ2V0UG9pbnQoMCksZSxmPTA7Yi5wdXNoKDApO2ZvcihlPTE7ZTw9YTtlKyspYz10aGlzLmdldFBvaW50KGUvYSksZis9Yy5kaXN0YW5jZVRvKGQpLGIucHVzaChmKSxkPWM7cmV0dXJuIHRoaXMuY2FjaGVBcmNMZW5ndGhzPWJ9O1xuVEhSRUUuQ3VydmUucHJvdG90eXBlLnVwZGF0ZUFyY0xlbmd0aHM9ZnVuY3Rpb24oKXt0aGlzLm5lZWRzVXBkYXRlPSEwO3RoaXMuZ2V0TGVuZ3RocygpfTtUSFJFRS5DdXJ2ZS5wcm90b3R5cGUuZ2V0VXRvVG1hcHBpbmc9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldExlbmd0aHMoKSxkPTAsZT1jLmxlbmd0aCxmO2Y9Yj9iOmEqY1tlLTFdO2Zvcih2YXIgaD0wLGc9ZS0xLGk7aDw9ZzspaWYoZD1NYXRoLmZsb29yKGgrKGctaCkvMiksaT1jW2RdLWYsMD5pKWg9ZCsxO2Vsc2UgaWYoMDxpKWc9ZC0xO2Vsc2V7Zz1kO2JyZWFrfWQ9ZztpZihjW2RdPT1mKXJldHVybiBkLyhlLTEpO2g9Y1tkXTtyZXR1cm4gYz0oZCsoZi1oKS8oY1tkKzFdLWgpKS8oZS0xKX07VEhSRUUuQ3VydmUucHJvdG90eXBlLmdldFRhbmdlbnQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS0xRS00LGE9YSsxRS00OzA+YiYmKGI9MCk7MTxhJiYoYT0xKTtiPXRoaXMuZ2V0UG9pbnQoYik7cmV0dXJuIHRoaXMuZ2V0UG9pbnQoYSkuY2xvbmUoKS5zdWIoYikubm9ybWFsaXplKCl9O1xuVEhSRUUuQ3VydmUucHJvdG90eXBlLmdldFRhbmdlbnRBdD1mdW5jdGlvbihhKXthPXRoaXMuZ2V0VXRvVG1hcHBpbmcoYSk7cmV0dXJuIHRoaXMuZ2V0VGFuZ2VudChhKX07XG5USFJFRS5DdXJ2ZS5VdGlscz17dGFuZ2VudFF1YWRyYXRpY0JlemllcjpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gMiooMS1hKSooYy1iKSsyKmEqKGQtYyl9LHRhbmdlbnRDdWJpY0JlemllcjpmdW5jdGlvbihhLGIsYyxkLGUpe3JldHVybi0zKmIqKDEtYSkqKDEtYSkrMypjKigxLWEpKigxLWEpLTYqYSpjKigxLWEpKzYqYSpkKigxLWEpLTMqYSphKmQrMyphKmEqZX0sdGFuZ2VudFNwbGluZTpmdW5jdGlvbihhKXtyZXR1cm4gNiphKmEtNiphKygzKmEqYS00KmErMSkrKC02KmEqYSs2KmEpKygzKmEqYS0yKmEpfSxpbnRlcnBvbGF0ZTpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBhPTAuNSooYy1hKSxkPTAuNSooZC1iKSxmPWUqZTtyZXR1cm4oMipiLTIqYythK2QpKmUqZisoLTMqYiszKmMtMiphLWQpKmYrYSplK2J9fTtcblRIUkVFLkN1cnZlLmNyZWF0ZT1mdW5jdGlvbihhLGIpe2EucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuQ3VydmUucHJvdG90eXBlKTthLnByb3RvdHlwZS5nZXRQb2ludD1iO3JldHVybiBhfTtUSFJFRS5DdXJ2ZVBhdGg9ZnVuY3Rpb24oKXt0aGlzLmN1cnZlcz1bXTt0aGlzLmJlbmRzPVtdO3RoaXMuYXV0b0Nsb3NlPSExfTtUSFJFRS5DdXJ2ZVBhdGgucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuQ3VydmUucHJvdG90eXBlKTtUSFJFRS5DdXJ2ZVBhdGgucHJvdG90eXBlLmFkZD1mdW5jdGlvbihhKXt0aGlzLmN1cnZlcy5wdXNoKGEpfTtUSFJFRS5DdXJ2ZVBhdGgucHJvdG90eXBlLmNoZWNrQ29ubmVjdGlvbj1mdW5jdGlvbigpe307VEhSRUUuQ3VydmVQYXRoLnByb3RvdHlwZS5jbG9zZVBhdGg9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmN1cnZlc1swXS5nZXRQb2ludCgwKSxiPXRoaXMuY3VydmVzW3RoaXMuY3VydmVzLmxlbmd0aC0xXS5nZXRQb2ludCgxKTthLmVxdWFscyhiKXx8dGhpcy5jdXJ2ZXMucHVzaChuZXcgVEhSRUUuTGluZUN1cnZlKGIsYSkpfTtcblRIUkVFLkN1cnZlUGF0aC5wcm90b3R5cGUuZ2V0UG9pbnQ9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPWEqdGhpcy5nZXRMZW5ndGgoKSxjPXRoaXMuZ2V0Q3VydmVMZW5ndGhzKCksYT0wO2E8Yy5sZW5ndGg7KXtpZihjW2FdPj1iKXJldHVybiBiPWNbYV0tYixhPXRoaXMuY3VydmVzW2FdLGI9MS1iL2EuZ2V0TGVuZ3RoKCksYS5nZXRQb2ludEF0KGIpO2ErK31yZXR1cm4gbnVsbH07VEhSRUUuQ3VydmVQYXRoLnByb3RvdHlwZS5nZXRMZW5ndGg9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldEN1cnZlTGVuZ3RocygpO3JldHVybiBhW2EubGVuZ3RoLTFdfTtcblRIUkVFLkN1cnZlUGF0aC5wcm90b3R5cGUuZ2V0Q3VydmVMZW5ndGhzPWZ1bmN0aW9uKCl7aWYodGhpcy5jYWNoZUxlbmd0aHMmJnRoaXMuY2FjaGVMZW5ndGhzLmxlbmd0aD09dGhpcy5jdXJ2ZXMubGVuZ3RoKXJldHVybiB0aGlzLmNhY2hlTGVuZ3Roczt2YXIgYT1bXSxiPTAsYyxkPXRoaXMuY3VydmVzLmxlbmd0aDtmb3IoYz0wO2M8ZDtjKyspYis9dGhpcy5jdXJ2ZXNbY10uZ2V0TGVuZ3RoKCksYS5wdXNoKGIpO3JldHVybiB0aGlzLmNhY2hlTGVuZ3Rocz1hfTtcblRIUkVFLkN1cnZlUGF0aC5wcm90b3R5cGUuZ2V0Qm91bmRpbmdCb3g9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldFBvaW50cygpLGIsYyxkLGUsZixoO2I9Yz1OdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7ZT1mPU51bWJlci5QT1NJVElWRV9JTkZJTklUWTt2YXIgZyxpLGssbSxsPWFbMF1pbnN0YW5jZW9mIFRIUkVFLlZlY3RvcjM7bT1sP25ldyBUSFJFRS5WZWN0b3IzOm5ldyBUSFJFRS5WZWN0b3IyO2k9MDtmb3Ioaz1hLmxlbmd0aDtpPGs7aSsrKWc9YVtpXSxnLng+Yj9iPWcueDpnLng8ZSYmKGU9Zy54KSxnLnk+Yz9jPWcueTpnLnk8ZiYmKGY9Zy55KSxsJiYoZy56PmQ/ZD1nLno6Zy56PGgmJihoPWcueikpLG0uYWRkKGcpO2E9e21pblg6ZSxtaW5ZOmYsbWF4WDpiLG1heFk6YyxjZW50cm9pZDptLmRpdmlkZVNjYWxhcihrKX07bCYmKGEubWF4Wj1kLGEubWluWj1oKTtyZXR1cm4gYX07XG5USFJFRS5DdXJ2ZVBhdGgucHJvdG90eXBlLmNyZWF0ZVBvaW50c0dlb21ldHJ5PWZ1bmN0aW9uKGEpe2E9dGhpcy5nZXRQb2ludHMoYSwhMCk7cmV0dXJuIHRoaXMuY3JlYXRlR2VvbWV0cnkoYSl9O1RIUkVFLkN1cnZlUGF0aC5wcm90b3R5cGUuY3JlYXRlU3BhY2VkUG9pbnRzR2VvbWV0cnk9ZnVuY3Rpb24oYSl7YT10aGlzLmdldFNwYWNlZFBvaW50cyhhLCEwKTtyZXR1cm4gdGhpcy5jcmVhdGVHZW9tZXRyeShhKX07VEhSRUUuQ3VydmVQYXRoLnByb3RvdHlwZS5jcmVhdGVHZW9tZXRyeT1mdW5jdGlvbihhKXtmb3IodmFyIGI9bmV3IFRIUkVFLkdlb21ldHJ5LGM9MDtjPGEubGVuZ3RoO2MrKyliLnZlcnRpY2VzLnB1c2gobmV3IFRIUkVFLlZlY3RvcjMoYVtjXS54LGFbY10ueSxhW2NdLnp8fDApKTtyZXR1cm4gYn07VEhSRUUuQ3VydmVQYXRoLnByb3RvdHlwZS5hZGRXcmFwUGF0aD1mdW5jdGlvbihhKXt0aGlzLmJlbmRzLnB1c2goYSl9O1xuVEhSRUUuQ3VydmVQYXRoLnByb3RvdHlwZS5nZXRUcmFuc2Zvcm1lZFBvaW50cz1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0UG9pbnRzKGEpLGQsZTtifHwoYj10aGlzLmJlbmRzKTtkPTA7Zm9yKGU9Yi5sZW5ndGg7ZDxlO2QrKyljPXRoaXMuZ2V0V3JhcFBvaW50cyhjLGJbZF0pO3JldHVybiBjfTtUSFJFRS5DdXJ2ZVBhdGgucHJvdG90eXBlLmdldFRyYW5zZm9ybWVkU3BhY2VkUG9pbnRzPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRTcGFjZWRQb2ludHMoYSksZCxlO2J8fChiPXRoaXMuYmVuZHMpO2Q9MDtmb3IoZT1iLmxlbmd0aDtkPGU7ZCsrKWM9dGhpcy5nZXRXcmFwUG9pbnRzKGMsYltkXSk7cmV0dXJuIGN9O1xuVEhSRUUuQ3VydmVQYXRoLnByb3RvdHlwZS5nZXRXcmFwUG9pbnRzPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRCb3VuZGluZ0JveCgpLGQsZSxmLGgsZyxpO2Q9MDtmb3IoZT1hLmxlbmd0aDtkPGU7ZCsrKWY9YVtkXSxoPWYueCxnPWYueSxpPWgvYy5tYXhYLGk9Yi5nZXRVdG9UbWFwcGluZyhpLGgpLGg9Yi5nZXRQb2ludChpKSxpPWIuZ2V0VGFuZ2VudChpKSxpLnNldCgtaS55LGkueCkubXVsdGlwbHlTY2FsYXIoZyksZi54PWgueCtpLngsZi55PWgueStpLnk7cmV0dXJuIGF9O1RIUkVFLkd5cm9zY29wZT1mdW5jdGlvbigpe1RIUkVFLk9iamVjdDNELmNhbGwodGhpcyl9O1RIUkVFLkd5cm9zY29wZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUpO1xuVEhSRUUuR3lyb3Njb3BlLnByb3RvdHlwZS51cGRhdGVNYXRyaXhXb3JsZD1mdW5jdGlvbihhKXt0aGlzLm1hdHJpeEF1dG9VcGRhdGUmJnRoaXMudXBkYXRlTWF0cml4KCk7aWYodGhpcy5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlfHxhKXRoaXMucGFyZW50Pyh0aGlzLm1hdHJpeFdvcmxkLm11bHRpcGx5TWF0cmljZXModGhpcy5wYXJlbnQubWF0cml4V29ybGQsdGhpcy5tYXRyaXgpLHRoaXMubWF0cml4V29ybGQuZGVjb21wb3NlKHRoaXMudHJhbnNsYXRpb25Xb3JsZCx0aGlzLnF1YXRlcm5pb25Xb3JsZCx0aGlzLnNjYWxlV29ybGQpLHRoaXMubWF0cml4LmRlY29tcG9zZSh0aGlzLnRyYW5zbGF0aW9uT2JqZWN0LHRoaXMucXVhdGVybmlvbk9iamVjdCx0aGlzLnNjYWxlT2JqZWN0KSx0aGlzLm1hdHJpeFdvcmxkLmNvbXBvc2UodGhpcy50cmFuc2xhdGlvbldvcmxkLHRoaXMucXVhdGVybmlvbk9iamVjdCx0aGlzLnNjYWxlV29ybGQpKTp0aGlzLm1hdHJpeFdvcmxkLmNvcHkodGhpcy5tYXRyaXgpLFxudGhpcy5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPSExLGE9ITA7Zm9yKHZhciBiPTAsYz10aGlzLmNoaWxkcmVuLmxlbmd0aDtiPGM7YisrKXRoaXMuY2hpbGRyZW5bYl0udXBkYXRlTWF0cml4V29ybGQoYSl9O1RIUkVFLkd5cm9zY29wZS5wcm90b3R5cGUudHJhbnNsYXRpb25Xb3JsZD1uZXcgVEhSRUUuVmVjdG9yMztUSFJFRS5HeXJvc2NvcGUucHJvdG90eXBlLnRyYW5zbGF0aW9uT2JqZWN0PW5ldyBUSFJFRS5WZWN0b3IzO1RIUkVFLkd5cm9zY29wZS5wcm90b3R5cGUucXVhdGVybmlvbldvcmxkPW5ldyBUSFJFRS5RdWF0ZXJuaW9uO1RIUkVFLkd5cm9zY29wZS5wcm90b3R5cGUucXVhdGVybmlvbk9iamVjdD1uZXcgVEhSRUUuUXVhdGVybmlvbjtUSFJFRS5HeXJvc2NvcGUucHJvdG90eXBlLnNjYWxlV29ybGQ9bmV3IFRIUkVFLlZlY3RvcjM7VEhSRUUuR3lyb3Njb3BlLnByb3RvdHlwZS5zY2FsZU9iamVjdD1uZXcgVEhSRUUuVmVjdG9yMztUSFJFRS5QYXRoPWZ1bmN0aW9uKGEpe1RIUkVFLkN1cnZlUGF0aC5jYWxsKHRoaXMpO3RoaXMuYWN0aW9ucz1bXTthJiZ0aGlzLmZyb21Qb2ludHMoYSl9O1RIUkVFLlBhdGgucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuQ3VydmVQYXRoLnByb3RvdHlwZSk7VEhSRUUuUGF0aEFjdGlvbnM9e01PVkVfVE86XCJtb3ZlVG9cIixMSU5FX1RPOlwibGluZVRvXCIsUVVBRFJBVElDX0NVUlZFX1RPOlwicXVhZHJhdGljQ3VydmVUb1wiLEJFWklFUl9DVVJWRV9UTzpcImJlemllckN1cnZlVG9cIixDU1BMSU5FX1RIUlU6XCJzcGxpbmVUaHJ1XCIsQVJDOlwiYXJjXCIsRUxMSVBTRTpcImVsbGlwc2VcIn07VEhSRUUuUGF0aC5wcm90b3R5cGUuZnJvbVBvaW50cz1mdW5jdGlvbihhKXt0aGlzLm1vdmVUbyhhWzBdLngsYVswXS55KTtmb3IodmFyIGI9MSxjPWEubGVuZ3RoO2I8YztiKyspdGhpcy5saW5lVG8oYVtiXS54LGFbYl0ueSl9O1xuVEhSRUUuUGF0aC5wcm90b3R5cGUubW92ZVRvPWZ1bmN0aW9uKGEsYil7dmFyIGM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTt0aGlzLmFjdGlvbnMucHVzaCh7YWN0aW9uOlRIUkVFLlBhdGhBY3Rpb25zLk1PVkVfVE8sYXJnczpjfSl9O1RIUkVFLlBhdGgucHJvdG90eXBlLmxpbmVUbz1mdW5jdGlvbihhLGIpe3ZhciBjPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyksZD10aGlzLmFjdGlvbnNbdGhpcy5hY3Rpb25zLmxlbmd0aC0xXS5hcmdzLGQ9bmV3IFRIUkVFLkxpbmVDdXJ2ZShuZXcgVEhSRUUuVmVjdG9yMihkW2QubGVuZ3RoLTJdLGRbZC5sZW5ndGgtMV0pLG5ldyBUSFJFRS5WZWN0b3IyKGEsYikpO3RoaXMuY3VydmVzLnB1c2goZCk7dGhpcy5hY3Rpb25zLnB1c2goe2FjdGlvbjpUSFJFRS5QYXRoQWN0aW9ucy5MSU5FX1RPLGFyZ3M6Y30pfTtcblRIUkVFLlBhdGgucHJvdG90eXBlLnF1YWRyYXRpY0N1cnZlVG89ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSxmPXRoaXMuYWN0aW9uc1t0aGlzLmFjdGlvbnMubGVuZ3RoLTFdLmFyZ3MsZj1uZXcgVEhSRUUuUXVhZHJhdGljQmV6aWVyQ3VydmUobmV3IFRIUkVFLlZlY3RvcjIoZltmLmxlbmd0aC0yXSxmW2YubGVuZ3RoLTFdKSxuZXcgVEhSRUUuVmVjdG9yMihhLGIpLG5ldyBUSFJFRS5WZWN0b3IyKGMsZCkpO3RoaXMuY3VydmVzLnB1c2goZik7dGhpcy5hY3Rpb25zLnB1c2goe2FjdGlvbjpUSFJFRS5QYXRoQWN0aW9ucy5RVUFEUkFUSUNfQ1VSVkVfVE8sYXJnczplfSl9O1xuVEhSRUUuUGF0aC5wcm90b3R5cGUuYmV6aWVyQ3VydmVUbz1mdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGg9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSxnPXRoaXMuYWN0aW9uc1t0aGlzLmFjdGlvbnMubGVuZ3RoLTFdLmFyZ3MsZz1uZXcgVEhSRUUuQ3ViaWNCZXppZXJDdXJ2ZShuZXcgVEhSRUUuVmVjdG9yMihnW2cubGVuZ3RoLTJdLGdbZy5sZW5ndGgtMV0pLG5ldyBUSFJFRS5WZWN0b3IyKGEsYiksbmV3IFRIUkVFLlZlY3RvcjIoYyxkKSxuZXcgVEhSRUUuVmVjdG9yMihlLGYpKTt0aGlzLmN1cnZlcy5wdXNoKGcpO3RoaXMuYWN0aW9ucy5wdXNoKHthY3Rpb246VEhSRUUuUGF0aEFjdGlvbnMuQkVaSUVSX0NVUlZFX1RPLGFyZ3M6aH0pfTtcblRIUkVFLlBhdGgucHJvdG90eXBlLnNwbGluZVRocnU9ZnVuY3Rpb24oYSl7dmFyIGI9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSxjPXRoaXMuYWN0aW9uc1t0aGlzLmFjdGlvbnMubGVuZ3RoLTFdLmFyZ3MsYz1bbmV3IFRIUkVFLlZlY3RvcjIoY1tjLmxlbmd0aC0yXSxjW2MubGVuZ3RoLTFdKV07QXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoYyxhKTtjPW5ldyBUSFJFRS5TcGxpbmVDdXJ2ZShjKTt0aGlzLmN1cnZlcy5wdXNoKGMpO3RoaXMuYWN0aW9ucy5wdXNoKHthY3Rpb246VEhSRUUuUGF0aEFjdGlvbnMuQ1NQTElORV9USFJVLGFyZ3M6Yn0pfTtUSFJFRS5QYXRoLnByb3RvdHlwZS5hcmM9ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3ZhciBoPXRoaXMuYWN0aW9uc1t0aGlzLmFjdGlvbnMubGVuZ3RoLTFdLmFyZ3M7dGhpcy5hYnNhcmMoYStoW2gubGVuZ3RoLTJdLGIraFtoLmxlbmd0aC0xXSxjLGQsZSxmKX07XG5USFJFRS5QYXRoLnByb3RvdHlwZS5hYnNhcmM9ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3RoaXMuYWJzZWxsaXBzZShhLGIsYyxjLGQsZSxmKX07VEhSRUUuUGF0aC5wcm90b3R5cGUuZWxsaXBzZT1mdW5jdGlvbihhLGIsYyxkLGUsZixoKXt2YXIgZz10aGlzLmFjdGlvbnNbdGhpcy5hY3Rpb25zLmxlbmd0aC0xXS5hcmdzO3RoaXMuYWJzZWxsaXBzZShhK2dbZy5sZW5ndGgtMl0sYitnW2cubGVuZ3RoLTFdLGMsZCxlLGYsaCl9O1RIUkVFLlBhdGgucHJvdG90eXBlLmFic2VsbGlwc2U9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsaCl7dmFyIGc9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSxpPW5ldyBUSFJFRS5FbGxpcHNlQ3VydmUoYSxiLGMsZCxlLGYsaCk7dGhpcy5jdXJ2ZXMucHVzaChpKTtpPWkuZ2V0UG9pbnQoMSk7Zy5wdXNoKGkueCk7Zy5wdXNoKGkueSk7dGhpcy5hY3Rpb25zLnB1c2goe2FjdGlvbjpUSFJFRS5QYXRoQWN0aW9ucy5FTExJUFNFLGFyZ3M6Z30pfTtcblRIUkVFLlBhdGgucHJvdG90eXBlLmdldFNwYWNlZFBvaW50cz1mdW5jdGlvbihhKXthfHwoYT00MCk7Zm9yKHZhciBiPVtdLGM9MDtjPGE7YysrKWIucHVzaCh0aGlzLmdldFBvaW50KGMvYSkpO3JldHVybiBifTtcblRIUkVFLlBhdGgucHJvdG90eXBlLmdldFBvaW50cz1mdW5jdGlvbihhLGIpe2lmKHRoaXMudXNlU3BhY2VkUG9pbnRzKXJldHVybiBjb25zb2xlLmxvZyhcInRhdGFcIiksdGhpcy5nZXRTcGFjZWRQb2ludHMoYSxiKTt2YXIgYT1hfHwxMixjPVtdLGQsZSxmLGgsZyxpLGssbSxsLHAsdCxzLHE7ZD0wO2ZvcihlPXRoaXMuYWN0aW9ucy5sZW5ndGg7ZDxlO2QrKylzd2l0Y2goZj10aGlzLmFjdGlvbnNbZF0saD1mLmFjdGlvbixmPWYuYXJncyxoKXtjYXNlIFRIUkVFLlBhdGhBY3Rpb25zLk1PVkVfVE86Yy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IyKGZbMF0sZlsxXSkpO2JyZWFrO2Nhc2UgVEhSRUUuUGF0aEFjdGlvbnMuTElORV9UTzpjLnB1c2gobmV3IFRIUkVFLlZlY3RvcjIoZlswXSxmWzFdKSk7YnJlYWs7Y2FzZSBUSFJFRS5QYXRoQWN0aW9ucy5RVUFEUkFUSUNfQ1VSVkVfVE86Zz1mWzJdO2k9ZlszXTtsPWZbMF07cD1mWzFdOzA8Yy5sZW5ndGg/KGg9Y1tjLmxlbmd0aC0xXSx0PWgueCxcbnM9aC55KTooaD10aGlzLmFjdGlvbnNbZC0xXS5hcmdzLHQ9aFtoLmxlbmd0aC0yXSxzPWhbaC5sZW5ndGgtMV0pO2ZvcihmPTE7Zjw9YTtmKyspcT1mL2EsaD1USFJFRS5TaGFwZS5VdGlscy5iMihxLHQsbCxnKSxxPVRIUkVFLlNoYXBlLlV0aWxzLmIyKHEscyxwLGkpLGMucHVzaChuZXcgVEhSRUUuVmVjdG9yMihoLHEpKTticmVhaztjYXNlIFRIUkVFLlBhdGhBY3Rpb25zLkJFWklFUl9DVVJWRV9UTzpnPWZbNF07aT1mWzVdO2w9ZlswXTtwPWZbMV07az1mWzJdO209ZlszXTswPGMubGVuZ3RoPyhoPWNbYy5sZW5ndGgtMV0sdD1oLngscz1oLnkpOihoPXRoaXMuYWN0aW9uc1tkLTFdLmFyZ3MsdD1oW2gubGVuZ3RoLTJdLHM9aFtoLmxlbmd0aC0xXSk7Zm9yKGY9MTtmPD1hO2YrKylxPWYvYSxoPVRIUkVFLlNoYXBlLlV0aWxzLmIzKHEsdCxsLGssZykscT1USFJFRS5TaGFwZS5VdGlscy5iMyhxLHMscCxtLGkpLGMucHVzaChuZXcgVEhSRUUuVmVjdG9yMihoLHEpKTticmVhaztjYXNlIFRIUkVFLlBhdGhBY3Rpb25zLkNTUExJTkVfVEhSVTpoPVxudGhpcy5hY3Rpb25zW2QtMV0uYXJncztxPVtuZXcgVEhSRUUuVmVjdG9yMihoW2gubGVuZ3RoLTJdLGhbaC5sZW5ndGgtMV0pXTtoPWEqZlswXS5sZW5ndGg7cT1xLmNvbmNhdChmWzBdKTtxPW5ldyBUSFJFRS5TcGxpbmVDdXJ2ZShxKTtmb3IoZj0xO2Y8PWg7ZisrKWMucHVzaChxLmdldFBvaW50QXQoZi9oKSk7YnJlYWs7Y2FzZSBUSFJFRS5QYXRoQWN0aW9ucy5BUkM6Zz1mWzBdO2k9ZlsxXTtwPWZbMl07az1mWzNdO2g9Zls0XTtsPSEhZls1XTt0PWgtaztzPTIqYTtmb3IoZj0xO2Y8PXM7ZisrKXE9Zi9zLGx8fChxPTEtcSkscT1rK3EqdCxoPWcrcCpNYXRoLmNvcyhxKSxxPWkrcCpNYXRoLnNpbihxKSxjLnB1c2gobmV3IFRIUkVFLlZlY3RvcjIoaCxxKSk7YnJlYWs7Y2FzZSBUSFJFRS5QYXRoQWN0aW9ucy5FTExJUFNFOmc9ZlswXTtpPWZbMV07cD1mWzJdO209ZlszXTtrPWZbNF07aD1mWzVdO2w9ISFmWzZdO3Q9aC1rO3M9MiphO2ZvcihmPTE7Zjw9cztmKyspcT1mL3MsbHx8XG4ocT0xLXEpLHE9aytxKnQsaD1nK3AqTWF0aC5jb3MocSkscT1pK20qTWF0aC5zaW4ocSksYy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IyKGgscSkpfWQ9Y1tjLmxlbmd0aC0xXTsxRS0xMD5NYXRoLmFicyhkLngtY1swXS54KSYmMUUtMTA+TWF0aC5hYnMoZC55LWNbMF0ueSkmJmMuc3BsaWNlKGMubGVuZ3RoLTEsMSk7YiYmYy5wdXNoKGNbMF0pO3JldHVybiBjfTtcblRIUkVFLlBhdGgucHJvdG90eXBlLnRvU2hhcGVzPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGY9W10saD1uZXcgVEhSRUUuUGF0aDtiPTA7Zm9yKGM9dGhpcy5hY3Rpb25zLmxlbmd0aDtiPGM7YisrKWQ9dGhpcy5hY3Rpb25zW2JdLGU9ZC5hcmdzLGQ9ZC5hY3Rpb24sZD09VEhSRUUuUGF0aEFjdGlvbnMuTU9WRV9UTyYmMCE9aC5hY3Rpb25zLmxlbmd0aCYmKGYucHVzaChoKSxoPW5ldyBUSFJFRS5QYXRoKSxoW2RdLmFwcGx5KGgsZSk7MCE9aC5hY3Rpb25zLmxlbmd0aCYmZi5wdXNoKGgpO2lmKDA9PWYubGVuZ3RoKXJldHVybltdO3ZhciBnO2U9W107aWYoMT09Zi5sZW5ndGgpcmV0dXJuIGQ9ZlswXSxnPW5ldyBUSFJFRS5TaGFwZSxnLmFjdGlvbnM9ZC5hY3Rpb25zLGcuY3VydmVzPWQuY3VydmVzLGUucHVzaChnKSxlO2I9IVRIUkVFLlNoYXBlLlV0aWxzLmlzQ2xvY2tXaXNlKGZbMF0uZ2V0UG9pbnRzKCkpO2lmKGE/IWI6Yil7Zz1uZXcgVEhSRUUuU2hhcGU7Yj0wO2ZvcihjPVxuZi5sZW5ndGg7YjxjO2IrKylkPWZbYl0saD1USFJFRS5TaGFwZS5VdGlscy5pc0Nsb2NrV2lzZShkLmdldFBvaW50cygpKSwoaD1hPyFoOmgpPyhnLmFjdGlvbnM9ZC5hY3Rpb25zLGcuY3VydmVzPWQuY3VydmVzLGUucHVzaChnKSxnPW5ldyBUSFJFRS5TaGFwZSk6Zy5ob2xlcy5wdXNoKGQpfWVsc2V7Zz12b2lkIDA7Yj0wO2ZvcihjPWYubGVuZ3RoO2I8YztiKyspZD1mW2JdLGg9VEhSRUUuU2hhcGUuVXRpbHMuaXNDbG9ja1dpc2UoZC5nZXRQb2ludHMoKSksKGg9YT8haDpoKT8oZyYmZS5wdXNoKGcpLGc9bmV3IFRIUkVFLlNoYXBlLGcuYWN0aW9ucz1kLmFjdGlvbnMsZy5jdXJ2ZXM9ZC5jdXJ2ZXMpOmcuaG9sZXMucHVzaChkKTtlLnB1c2goZyl9cmV0dXJuIGV9O1RIUkVFLlNoYXBlPWZ1bmN0aW9uKCl7VEhSRUUuUGF0aC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5ob2xlcz1bXX07VEhSRUUuU2hhcGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuUGF0aC5wcm90b3R5cGUpO1RIUkVFLlNoYXBlLnByb3RvdHlwZS5leHRydWRlPWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgVEhSRUUuRXh0cnVkZUdlb21ldHJ5KHRoaXMsYSl9O1RIUkVFLlNoYXBlLnByb3RvdHlwZS5tYWtlR2VvbWV0cnk9ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBUSFJFRS5TaGFwZUdlb21ldHJ5KHRoaXMsYSl9O1RIUkVFLlNoYXBlLnByb3RvdHlwZS5nZXRQb2ludHNIb2xlcz1mdW5jdGlvbihhKXt2YXIgYixjPXRoaXMuaG9sZXMubGVuZ3RoLGQ9W107Zm9yKGI9MDtiPGM7YisrKWRbYl09dGhpcy5ob2xlc1tiXS5nZXRUcmFuc2Zvcm1lZFBvaW50cyhhLHRoaXMuYmVuZHMpO3JldHVybiBkfTtcblRIUkVFLlNoYXBlLnByb3RvdHlwZS5nZXRTcGFjZWRQb2ludHNIb2xlcz1mdW5jdGlvbihhKXt2YXIgYixjPXRoaXMuaG9sZXMubGVuZ3RoLGQ9W107Zm9yKGI9MDtiPGM7YisrKWRbYl09dGhpcy5ob2xlc1tiXS5nZXRUcmFuc2Zvcm1lZFNwYWNlZFBvaW50cyhhLHRoaXMuYmVuZHMpO3JldHVybiBkfTtUSFJFRS5TaGFwZS5wcm90b3R5cGUuZXh0cmFjdEFsbFBvaW50cz1mdW5jdGlvbihhKXtyZXR1cm57c2hhcGU6dGhpcy5nZXRUcmFuc2Zvcm1lZFBvaW50cyhhKSxob2xlczp0aGlzLmdldFBvaW50c0hvbGVzKGEpfX07VEhSRUUuU2hhcGUucHJvdG90eXBlLmV4dHJhY3RQb2ludHM9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMudXNlU3BhY2VkUG9pbnRzP3RoaXMuZXh0cmFjdEFsbFNwYWNlZFBvaW50cyhhKTp0aGlzLmV4dHJhY3RBbGxQb2ludHMoYSl9O1xuVEhSRUUuU2hhcGUucHJvdG90eXBlLmV4dHJhY3RBbGxTcGFjZWRQb2ludHM9ZnVuY3Rpb24oYSl7cmV0dXJue3NoYXBlOnRoaXMuZ2V0VHJhbnNmb3JtZWRTcGFjZWRQb2ludHMoYSksaG9sZXM6dGhpcy5nZXRTcGFjZWRQb2ludHNIb2xlcyhhKX19O1xuVEhSRUUuU2hhcGUuVXRpbHM9e3JlbW92ZUhvbGVzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5jb25jYXQoKSxkPWMuY29uY2F0KCksZSxmLGgsZyxpLGssbSxsLHAsdCxzPVtdO2ZvcihpPTA7aTxiLmxlbmd0aDtpKyspe2s9YltpXTtBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShkLGspO2Y9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO2ZvcihlPTA7ZTxrLmxlbmd0aDtlKyspe3A9a1tlXTt0PVtdO2ZvcihsPTA7bDxjLmxlbmd0aDtsKyspbT1jW2xdLG09cC5kaXN0YW5jZVRvU3F1YXJlZChtKSx0LnB1c2gobSksbTxmJiYoZj1tLGg9ZSxnPWwpfWU9MDw9Zy0xP2ctMTpjLmxlbmd0aC0xO2Y9MDw9aC0xP2gtMTprLmxlbmd0aC0xO3ZhciBxPVtrW2hdLGNbZ10sY1tlXV07bD1USFJFRS5Gb250VXRpbHMuVHJpYW5ndWxhdGUuYXJlYShxKTt2YXIgbj1ba1toXSxrW2ZdLGNbZ11dO3A9VEhSRUUuRm9udFV0aWxzLlRyaWFuZ3VsYXRlLmFyZWEobik7dD1nO209aDtnKz0xO2grPS0xOzA+XG5nJiYoZys9Yy5sZW5ndGgpO2clPWMubGVuZ3RoOzA+aCYmKGgrPWsubGVuZ3RoKTtoJT1rLmxlbmd0aDtlPTA8PWctMT9nLTE6Yy5sZW5ndGgtMTtmPTA8PWgtMT9oLTE6ay5sZW5ndGgtMTtxPVtrW2hdLGNbZ10sY1tlXV07cT1USFJFRS5Gb250VXRpbHMuVHJpYW5ndWxhdGUuYXJlYShxKTtuPVtrW2hdLGtbZl0sY1tnXV07bj1USFJFRS5Gb250VXRpbHMuVHJpYW5ndWxhdGUuYXJlYShuKTtsK3A+cStuJiYoZz10LGg9bSwwPmcmJihnKz1jLmxlbmd0aCksZyU9Yy5sZW5ndGgsMD5oJiYoaCs9ay5sZW5ndGgpLGglPWsubGVuZ3RoLGU9MDw9Zy0xP2ctMTpjLmxlbmd0aC0xLGY9MDw9aC0xP2gtMTprLmxlbmd0aC0xKTtsPWMuc2xpY2UoMCxnKTtwPWMuc2xpY2UoZyk7dD1rLnNsaWNlKGgpO209ay5zbGljZSgwLGgpO2Y9W2tbaF0sa1tmXSxjW2ddXTtzLnB1c2goW2tbaF0sY1tnXSxjW2VdXSk7cy5wdXNoKGYpO2M9bC5jb25jYXQodCkuY29uY2F0KG0pLmNvbmNhdChwKX1yZXR1cm57c2hhcGU6Yyxcbmlzb2xhdGVkUHRzOnMsYWxscG9pbnRzOmR9fSx0cmlhbmd1bGF0ZVNoYXBlOmZ1bmN0aW9uKGEsYil7dmFyIGM9VEhSRUUuU2hhcGUuVXRpbHMucmVtb3ZlSG9sZXMoYSxiKSxkPWMuYWxscG9pbnRzLGU9Yy5pc29sYXRlZFB0cyxjPVRIUkVFLkZvbnRVdGlscy5Ucmlhbmd1bGF0ZShjLnNoYXBlLCExKSxmLGgsZyxpLGs9e307Zj0wO2ZvcihoPWQubGVuZ3RoO2Y8aDtmKyspaT1kW2ZdLngrXCI6XCIrZFtmXS55LHZvaWQgMCE9PWtbaV0mJmNvbnNvbGUubG9nKFwiRHVwbGljYXRlIHBvaW50XCIsaSksa1tpXT1mO2Y9MDtmb3IoaD1jLmxlbmd0aDtmPGg7ZisrKXtnPWNbZl07Zm9yKGQ9MDszPmQ7ZCsrKWk9Z1tkXS54K1wiOlwiK2dbZF0ueSxpPWtbaV0sdm9pZCAwIT09aSYmKGdbZF09aSl9Zj0wO2ZvcihoPWUubGVuZ3RoO2Y8aDtmKyspe2c9ZVtmXTtmb3IoZD0wOzM+ZDtkKyspaT1nW2RdLngrXCI6XCIrZ1tkXS55LGk9a1tpXSx2b2lkIDAhPT1pJiYoZ1tkXT1pKX1yZXR1cm4gYy5jb25jYXQoZSl9LFxuaXNDbG9ja1dpc2U6ZnVuY3Rpb24oYSl7cmV0dXJuIDA+VEhSRUUuRm9udFV0aWxzLlRyaWFuZ3VsYXRlLmFyZWEoYSl9LGIycDA6ZnVuY3Rpb24oYSxiKXt2YXIgYz0xLWE7cmV0dXJuIGMqYypifSxiMnAxOmZ1bmN0aW9uKGEsYil7cmV0dXJuIDIqKDEtYSkqYSpifSxiMnAyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEqYSpifSxiMjpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5iMnAwKGEsYikrdGhpcy5iMnAxKGEsYykrdGhpcy5iMnAyKGEsZCl9LGIzcDA6ZnVuY3Rpb24oYSxiKXt2YXIgYz0xLWE7cmV0dXJuIGMqYypjKmJ9LGIzcDE6ZnVuY3Rpb24oYSxiKXt2YXIgYz0xLWE7cmV0dXJuIDMqYypjKmEqYn0sYjNwMjpmdW5jdGlvbihhLGIpe3JldHVybiAzKigxLWEpKmEqYSpifSxiM3AzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEqYSphKmJ9LGIzOmZ1bmN0aW9uKGEsYixjLGQsZSl7cmV0dXJuIHRoaXMuYjNwMChhLGIpK3RoaXMuYjNwMShhLGMpK3RoaXMuYjNwMihhLGQpK1xudGhpcy5iM3AzKGEsZSl9fTtUSFJFRS5MaW5lQ3VydmU9ZnVuY3Rpb24oYSxiKXt0aGlzLnYxPWE7dGhpcy52Mj1ifTtUSFJFRS5MaW5lQ3VydmUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuQ3VydmUucHJvdG90eXBlKTtUSFJFRS5MaW5lQ3VydmUucHJvdG90eXBlLmdldFBvaW50PWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMudjIuY2xvbmUoKS5zdWIodGhpcy52MSk7Yi5tdWx0aXBseVNjYWxhcihhKS5hZGQodGhpcy52MSk7cmV0dXJuIGJ9O1RIUkVFLkxpbmVDdXJ2ZS5wcm90b3R5cGUuZ2V0UG9pbnRBdD1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRQb2ludChhKX07VEhSRUUuTGluZUN1cnZlLnByb3RvdHlwZS5nZXRUYW5nZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudjIuY2xvbmUoKS5zdWIodGhpcy52MSkubm9ybWFsaXplKCl9O1RIUkVFLlF1YWRyYXRpY0JlemllckN1cnZlPWZ1bmN0aW9uKGEsYixjKXt0aGlzLnYwPWE7dGhpcy52MT1iO3RoaXMudjI9Y307VEhSRUUuUXVhZHJhdGljQmV6aWVyQ3VydmUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuQ3VydmUucHJvdG90eXBlKTtUSFJFRS5RdWFkcmF0aWNCZXppZXJDdXJ2ZS5wcm90b3R5cGUuZ2V0UG9pbnQ9ZnVuY3Rpb24oYSl7dmFyIGI7Yj1USFJFRS5TaGFwZS5VdGlscy5iMihhLHRoaXMudjAueCx0aGlzLnYxLngsdGhpcy52Mi54KTthPVRIUkVFLlNoYXBlLlV0aWxzLmIyKGEsdGhpcy52MC55LHRoaXMudjEueSx0aGlzLnYyLnkpO3JldHVybiBuZXcgVEhSRUUuVmVjdG9yMihiLGEpfTtcblRIUkVFLlF1YWRyYXRpY0JlemllckN1cnZlLnByb3RvdHlwZS5nZXRUYW5nZW50PWZ1bmN0aW9uKGEpe3ZhciBiO2I9VEhSRUUuQ3VydmUuVXRpbHMudGFuZ2VudFF1YWRyYXRpY0JlemllcihhLHRoaXMudjAueCx0aGlzLnYxLngsdGhpcy52Mi54KTthPVRIUkVFLkN1cnZlLlV0aWxzLnRhbmdlbnRRdWFkcmF0aWNCZXppZXIoYSx0aGlzLnYwLnksdGhpcy52MS55LHRoaXMudjIueSk7Yj1uZXcgVEhSRUUuVmVjdG9yMihiLGEpO2Iubm9ybWFsaXplKCk7cmV0dXJuIGJ9O1RIUkVFLkN1YmljQmV6aWVyQ3VydmU9ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy52MD1hO3RoaXMudjE9Yjt0aGlzLnYyPWM7dGhpcy52Mz1kfTtUSFJFRS5DdWJpY0JlemllckN1cnZlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkN1cnZlLnByb3RvdHlwZSk7VEhSRUUuQ3ViaWNCZXppZXJDdXJ2ZS5wcm90b3R5cGUuZ2V0UG9pbnQ9ZnVuY3Rpb24oYSl7dmFyIGI7Yj1USFJFRS5TaGFwZS5VdGlscy5iMyhhLHRoaXMudjAueCx0aGlzLnYxLngsdGhpcy52Mi54LHRoaXMudjMueCk7YT1USFJFRS5TaGFwZS5VdGlscy5iMyhhLHRoaXMudjAueSx0aGlzLnYxLnksdGhpcy52Mi55LHRoaXMudjMueSk7cmV0dXJuIG5ldyBUSFJFRS5WZWN0b3IyKGIsYSl9O1xuVEhSRUUuQ3ViaWNCZXppZXJDdXJ2ZS5wcm90b3R5cGUuZ2V0VGFuZ2VudD1mdW5jdGlvbihhKXt2YXIgYjtiPVRIUkVFLkN1cnZlLlV0aWxzLnRhbmdlbnRDdWJpY0JlemllcihhLHRoaXMudjAueCx0aGlzLnYxLngsdGhpcy52Mi54LHRoaXMudjMueCk7YT1USFJFRS5DdXJ2ZS5VdGlscy50YW5nZW50Q3ViaWNCZXppZXIoYSx0aGlzLnYwLnksdGhpcy52MS55LHRoaXMudjIueSx0aGlzLnYzLnkpO2I9bmV3IFRIUkVFLlZlY3RvcjIoYixhKTtiLm5vcm1hbGl6ZSgpO3JldHVybiBifTtUSFJFRS5TcGxpbmVDdXJ2ZT1mdW5jdGlvbihhKXt0aGlzLnBvaW50cz12b2lkIDA9PWE/W106YX07VEhSRUUuU3BsaW5lQ3VydmUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuQ3VydmUucHJvdG90eXBlKTtUSFJFRS5TcGxpbmVDdXJ2ZS5wcm90b3R5cGUuZ2V0UG9pbnQ9ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IFRIUkVFLlZlY3RvcjIsYz1bXSxkPXRoaXMucG9pbnRzLGU7ZT0oZC5sZW5ndGgtMSkqYTthPU1hdGguZmxvb3IoZSk7ZS09YTtjWzBdPTA9PWE/YTphLTE7Y1sxXT1hO2NbMl09YT5kLmxlbmd0aC0yP2QubGVuZ3RoLTE6YSsxO2NbM109YT5kLmxlbmd0aC0zP2QubGVuZ3RoLTE6YSsyO2IueD1USFJFRS5DdXJ2ZS5VdGlscy5pbnRlcnBvbGF0ZShkW2NbMF1dLngsZFtjWzFdXS54LGRbY1syXV0ueCxkW2NbM11dLngsZSk7Yi55PVRIUkVFLkN1cnZlLlV0aWxzLmludGVycG9sYXRlKGRbY1swXV0ueSxkW2NbMV1dLnksZFtjWzJdXS55LGRbY1szXV0ueSxlKTtyZXR1cm4gYn07VEhSRUUuRWxsaXBzZUN1cnZlPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGgpe3RoaXMuYVg9YTt0aGlzLmFZPWI7dGhpcy54UmFkaXVzPWM7dGhpcy55UmFkaXVzPWQ7dGhpcy5hU3RhcnRBbmdsZT1lO3RoaXMuYUVuZEFuZ2xlPWY7dGhpcy5hQ2xvY2t3aXNlPWh9O1RIUkVFLkVsbGlwc2VDdXJ2ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5DdXJ2ZS5wcm90b3R5cGUpO1xuVEhSRUUuRWxsaXBzZUN1cnZlLnByb3RvdHlwZS5nZXRQb2ludD1mdW5jdGlvbihhKXt2YXIgYjtiPXRoaXMuYUVuZEFuZ2xlLXRoaXMuYVN0YXJ0QW5nbGU7MD5iJiYoYis9MipNYXRoLlBJKTtiPjIqTWF0aC5QSSYmKGItPTIqTWF0aC5QSSk7Yj0hMD09PXRoaXMuYUNsb2Nrd2lzZT90aGlzLmFFbmRBbmdsZSsoMS1hKSooMipNYXRoLlBJLWIpOnRoaXMuYVN0YXJ0QW5nbGUrYSpiO2E9dGhpcy5hWCt0aGlzLnhSYWRpdXMqTWF0aC5jb3MoYik7Yj10aGlzLmFZK3RoaXMueVJhZGl1cypNYXRoLnNpbihiKTtyZXR1cm4gbmV3IFRIUkVFLlZlY3RvcjIoYSxiKX07VEhSRUUuQXJjQ3VydmU9ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe1RIUkVFLkVsbGlwc2VDdXJ2ZS5jYWxsKHRoaXMsYSxiLGMsYyxkLGUsZil9O1RIUkVFLkFyY0N1cnZlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkVsbGlwc2VDdXJ2ZS5wcm90b3R5cGUpO1RIUkVFLkxpbmVDdXJ2ZTM9VEhSRUUuQ3VydmUuY3JlYXRlKGZ1bmN0aW9uKGEsYil7dGhpcy52MT1hO3RoaXMudjI9Yn0sZnVuY3Rpb24oYSl7dmFyIGI9bmV3IFRIUkVFLlZlY3RvcjM7Yi5zdWJWZWN0b3JzKHRoaXMudjIsdGhpcy52MSk7Yi5tdWx0aXBseVNjYWxhcihhKTtiLmFkZCh0aGlzLnYxKTtyZXR1cm4gYn0pO1RIUkVFLlF1YWRyYXRpY0JlemllckN1cnZlMz1USFJFRS5DdXJ2ZS5jcmVhdGUoZnVuY3Rpb24oYSxiLGMpe3RoaXMudjA9YTt0aGlzLnYxPWI7dGhpcy52Mj1jfSxmdW5jdGlvbihhKXt2YXIgYixjO2I9VEhSRUUuU2hhcGUuVXRpbHMuYjIoYSx0aGlzLnYwLngsdGhpcy52MS54LHRoaXMudjIueCk7Yz1USFJFRS5TaGFwZS5VdGlscy5iMihhLHRoaXMudjAueSx0aGlzLnYxLnksdGhpcy52Mi55KTthPVRIUkVFLlNoYXBlLlV0aWxzLmIyKGEsdGhpcy52MC56LHRoaXMudjEueix0aGlzLnYyLnopO3JldHVybiBuZXcgVEhSRUUuVmVjdG9yMyhiLGMsYSl9KTtUSFJFRS5DdWJpY0JlemllckN1cnZlMz1USFJFRS5DdXJ2ZS5jcmVhdGUoZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy52MD1hO3RoaXMudjE9Yjt0aGlzLnYyPWM7dGhpcy52Mz1kfSxmdW5jdGlvbihhKXt2YXIgYixjO2I9VEhSRUUuU2hhcGUuVXRpbHMuYjMoYSx0aGlzLnYwLngsdGhpcy52MS54LHRoaXMudjIueCx0aGlzLnYzLngpO2M9VEhSRUUuU2hhcGUuVXRpbHMuYjMoYSx0aGlzLnYwLnksdGhpcy52MS55LHRoaXMudjIueSx0aGlzLnYzLnkpO2E9VEhSRUUuU2hhcGUuVXRpbHMuYjMoYSx0aGlzLnYwLnosdGhpcy52MS56LHRoaXMudjIueix0aGlzLnYzLnopO3JldHVybiBuZXcgVEhSRUUuVmVjdG9yMyhiLGMsYSl9KTtUSFJFRS5TcGxpbmVDdXJ2ZTM9VEhSRUUuQ3VydmUuY3JlYXRlKGZ1bmN0aW9uKGEpe3RoaXMucG9pbnRzPXZvaWQgMD09YT9bXTphfSxmdW5jdGlvbihhKXt2YXIgYj1uZXcgVEhSRUUuVmVjdG9yMyxjPVtdLGQ9dGhpcy5wb2ludHMsZSxhPShkLmxlbmd0aC0xKSphO2U9TWF0aC5mbG9vcihhKTthLT1lO2NbMF09MD09ZT9lOmUtMTtjWzFdPWU7Y1syXT1lPmQubGVuZ3RoLTI/ZC5sZW5ndGgtMTplKzE7Y1szXT1lPmQubGVuZ3RoLTM/ZC5sZW5ndGgtMTplKzI7ZT1kW2NbMF1dO3ZhciBmPWRbY1sxXV0saD1kW2NbMl1dLGM9ZFtjWzNdXTtiLng9VEhSRUUuQ3VydmUuVXRpbHMuaW50ZXJwb2xhdGUoZS54LGYueCxoLngsYy54LGEpO2IueT1USFJFRS5DdXJ2ZS5VdGlscy5pbnRlcnBvbGF0ZShlLnksZi55LGgueSxjLnksYSk7Yi56PVRIUkVFLkN1cnZlLlV0aWxzLmludGVycG9sYXRlKGUueixmLnosaC56LGMueixhKTtyZXR1cm4gYn0pO1RIUkVFLkNsb3NlZFNwbGluZUN1cnZlMz1USFJFRS5DdXJ2ZS5jcmVhdGUoZnVuY3Rpb24oYSl7dGhpcy5wb2ludHM9dm9pZCAwPT1hP1tdOmF9LGZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBUSFJFRS5WZWN0b3IzLGM9W10sZD10aGlzLnBvaW50cyxlO2U9KGQubGVuZ3RoLTApKmE7YT1NYXRoLmZsb29yKGUpO2UtPWE7YSs9MDxhPzA6KE1hdGguZmxvb3IoTWF0aC5hYnMoYSkvZC5sZW5ndGgpKzEpKmQubGVuZ3RoO2NbMF09KGEtMSklZC5sZW5ndGg7Y1sxXT1hJWQubGVuZ3RoO2NbMl09KGErMSklZC5sZW5ndGg7Y1szXT0oYSsyKSVkLmxlbmd0aDtiLng9VEhSRUUuQ3VydmUuVXRpbHMuaW50ZXJwb2xhdGUoZFtjWzBdXS54LGRbY1sxXV0ueCxkW2NbMl1dLngsZFtjWzNdXS54LGUpO2IueT1USFJFRS5DdXJ2ZS5VdGlscy5pbnRlcnBvbGF0ZShkW2NbMF1dLnksZFtjWzFdXS55LGRbY1syXV0ueSxkW2NbM11dLnksZSk7Yi56PVRIUkVFLkN1cnZlLlV0aWxzLmludGVycG9sYXRlKGRbY1swXV0ueixcbmRbY1sxXV0ueixkW2NbMl1dLnosZFtjWzNdXS56LGUpO3JldHVybiBifSk7VEhSRUUuQW5pbWF0aW9uSGFuZGxlcj1mdW5jdGlvbigpe3ZhciBhPVtdLGI9e30sYz17dXBkYXRlOmZ1bmN0aW9uKGIpe2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKWFbY10udXBkYXRlKGIpfSxhZGRUb1VwZGF0ZTpmdW5jdGlvbihiKXstMT09PWEuaW5kZXhPZihiKSYmYS5wdXNoKGIpfSxyZW1vdmVGcm9tVXBkYXRlOmZ1bmN0aW9uKGIpe2I9YS5pbmRleE9mKGIpOy0xIT09YiYmYS5zcGxpY2UoYiwxKX0sYWRkOmZ1bmN0aW9uKGEpe3ZvaWQgMCE9PWJbYS5uYW1lXSYmY29uc29sZS5sb2coXCJUSFJFRS5BbmltYXRpb25IYW5kbGVyLmFkZDogV2FybmluZyEgXCIrYS5uYW1lK1wiIGFscmVhZHkgZXhpc3RzIGluIGxpYnJhcnkuIE92ZXJ3cml0aW5nLlwiKTtiW2EubmFtZV09YTtpZighMCE9PWEuaW5pdGlhbGl6ZWQpe2Zvcih2YXIgYz0wO2M8YS5oaWVyYXJjaHkubGVuZ3RoO2MrKyl7Zm9yKHZhciBkPTA7ZDxhLmhpZXJhcmNoeVtjXS5rZXlzLmxlbmd0aDtkKyspaWYoMD5hLmhpZXJhcmNoeVtjXS5rZXlzW2RdLnRpbWUmJlxuKGEuaGllcmFyY2h5W2NdLmtleXNbZF0udGltZT0wKSx2b2lkIDAhPT1hLmhpZXJhcmNoeVtjXS5rZXlzW2RdLnJvdCYmIShhLmhpZXJhcmNoeVtjXS5rZXlzW2RdLnJvdCBpbnN0YW5jZW9mIFRIUkVFLlF1YXRlcm5pb24pKXt2YXIgZz1hLmhpZXJhcmNoeVtjXS5rZXlzW2RdLnJvdDthLmhpZXJhcmNoeVtjXS5rZXlzW2RdLnJvdD1uZXcgVEhSRUUuUXVhdGVybmlvbihnWzBdLGdbMV0sZ1syXSxnWzNdKX1pZihhLmhpZXJhcmNoeVtjXS5rZXlzLmxlbmd0aCYmdm9pZCAwIT09YS5oaWVyYXJjaHlbY10ua2V5c1swXS5tb3JwaFRhcmdldHMpe2c9e307Zm9yKGQ9MDtkPGEuaGllcmFyY2h5W2NdLmtleXMubGVuZ3RoO2QrKylmb3IodmFyIGk9MDtpPGEuaGllcmFyY2h5W2NdLmtleXNbZF0ubW9ycGhUYXJnZXRzLmxlbmd0aDtpKyspe3ZhciBrPWEuaGllcmFyY2h5W2NdLmtleXNbZF0ubW9ycGhUYXJnZXRzW2ldO2dba109LTF9YS5oaWVyYXJjaHlbY10udXNlZE1vcnBoVGFyZ2V0cz1nO1xuZm9yKGQ9MDtkPGEuaGllcmFyY2h5W2NdLmtleXMubGVuZ3RoO2QrKyl7dmFyIG09e307Zm9yKGsgaW4gZyl7Zm9yKGk9MDtpPGEuaGllcmFyY2h5W2NdLmtleXNbZF0ubW9ycGhUYXJnZXRzLmxlbmd0aDtpKyspaWYoYS5oaWVyYXJjaHlbY10ua2V5c1tkXS5tb3JwaFRhcmdldHNbaV09PT1rKXttW2tdPWEuaGllcmFyY2h5W2NdLmtleXNbZF0ubW9ycGhUYXJnZXRzSW5mbHVlbmNlc1tpXTticmVha31pPT09YS5oaWVyYXJjaHlbY10ua2V5c1tkXS5tb3JwaFRhcmdldHMubGVuZ3RoJiYobVtrXT0wKX1hLmhpZXJhcmNoeVtjXS5rZXlzW2RdLm1vcnBoVGFyZ2V0c0luZmx1ZW5jZXM9bX19Zm9yKGQ9MTtkPGEuaGllcmFyY2h5W2NdLmtleXMubGVuZ3RoO2QrKylhLmhpZXJhcmNoeVtjXS5rZXlzW2RdLnRpbWU9PT1hLmhpZXJhcmNoeVtjXS5rZXlzW2QtMV0udGltZSYmKGEuaGllcmFyY2h5W2NdLmtleXMuc3BsaWNlKGQsMSksZC0tKTtmb3IoZD0wO2Q8YS5oaWVyYXJjaHlbY10ua2V5cy5sZW5ndGg7ZCsrKWEuaGllcmFyY2h5W2NdLmtleXNbZF0uaW5kZXg9XG5kfWQ9cGFyc2VJbnQoYS5sZW5ndGgqYS5mcHMsMTApO2EuSklUPXt9O2EuSklULmhpZXJhcmNoeT1bXTtmb3IoYz0wO2M8YS5oaWVyYXJjaHkubGVuZ3RoO2MrKylhLkpJVC5oaWVyYXJjaHkucHVzaChBcnJheShkKSk7YS5pbml0aWFsaXplZD0hMH19LGdldDpmdW5jdGlvbihhKXtpZihcInN0cmluZ1wiPT09dHlwZW9mIGEpe2lmKGJbYV0pcmV0dXJuIGJbYV07Y29uc29sZS5sb2coXCJUSFJFRS5BbmltYXRpb25IYW5kbGVyLmdldDogQ291bGRuJ3QgZmluZCBhbmltYXRpb24gXCIrYSk7cmV0dXJuIG51bGx9fSxwYXJzZTpmdW5jdGlvbihhKXt2YXIgYj1bXTtpZihhIGluc3RhbmNlb2YgVEhSRUUuU2tpbm5lZE1lc2gpZm9yKHZhciBjPTA7YzxhLmJvbmVzLmxlbmd0aDtjKyspYi5wdXNoKGEuYm9uZXNbY10pO2Vsc2UgZChhLGIpO3JldHVybiBifX0sZD1mdW5jdGlvbihhLGIpe2IucHVzaChhKTtmb3IodmFyIGM9MDtjPGEuY2hpbGRyZW4ubGVuZ3RoO2MrKylkKGEuY2hpbGRyZW5bY10sXG5iKX07Yy5MSU5FQVI9MDtjLkNBVE1VTExST009MTtjLkNBVE1VTExST01fRk9SV0FSRD0yO3JldHVybiBjfSgpO1RIUkVFLkFuaW1hdGlvbj1mdW5jdGlvbihhLGIsYyl7dGhpcy5yb290PWE7dGhpcy5kYXRhPVRIUkVFLkFuaW1hdGlvbkhhbmRsZXIuZ2V0KGIpO3RoaXMuaGllcmFyY2h5PVRIUkVFLkFuaW1hdGlvbkhhbmRsZXIucGFyc2UoYSk7dGhpcy5jdXJyZW50VGltZT0wO3RoaXMudGltZVNjYWxlPTE7dGhpcy5pc1BsYXlpbmc9ITE7dGhpcy5sb29wPXRoaXMuaXNQYXVzZWQ9ITA7dGhpcy5pbnRlcnBvbGF0aW9uVHlwZT12b2lkIDAhPT1jP2M6VEhSRUUuQW5pbWF0aW9uSGFuZGxlci5MSU5FQVI7dGhpcy5wb2ludHM9W107dGhpcy50YXJnZXQ9bmV3IFRIUkVFLlZlY3RvcjN9O1xuVEhSRUUuQW5pbWF0aW9uLnByb3RvdHlwZS5wbGF5PWZ1bmN0aW9uKGEsYil7aWYoITE9PT10aGlzLmlzUGxheWluZyl7dGhpcy5pc1BsYXlpbmc9ITA7dGhpcy5sb29wPXZvaWQgMCE9PWE/YTohMDt0aGlzLmN1cnJlbnRUaW1lPXZvaWQgMCE9PWI/YjowO3ZhciBjLGQ9dGhpcy5oaWVyYXJjaHkubGVuZ3RoLGU7Zm9yKGM9MDtjPGQ7YysrKXtlPXRoaXMuaGllcmFyY2h5W2NdO2UubWF0cml4QXV0b1VwZGF0ZT0hMDt2b2lkIDA9PT1lLmFuaW1hdGlvbkNhY2hlJiYoZS5hbmltYXRpb25DYWNoZT17fSxlLmFuaW1hdGlvbkNhY2hlLnByZXZLZXk9e3BvczowLHJvdDowLHNjbDowfSxlLmFuaW1hdGlvbkNhY2hlLm5leHRLZXk9e3BvczowLHJvdDowLHNjbDowfSxlLmFuaW1hdGlvbkNhY2hlLm9yaWdpbmFsTWF0cml4PWUgaW5zdGFuY2VvZiBUSFJFRS5Cb25lP2Uuc2tpbk1hdHJpeDplLm1hdHJpeCk7dmFyIGY9ZS5hbmltYXRpb25DYWNoZS5wcmV2S2V5O2U9ZS5hbmltYXRpb25DYWNoZS5uZXh0S2V5O1xuZi5wb3M9dGhpcy5kYXRhLmhpZXJhcmNoeVtjXS5rZXlzWzBdO2Yucm90PXRoaXMuZGF0YS5oaWVyYXJjaHlbY10ua2V5c1swXTtmLnNjbD10aGlzLmRhdGEuaGllcmFyY2h5W2NdLmtleXNbMF07ZS5wb3M9dGhpcy5nZXROZXh0S2V5V2l0aChcInBvc1wiLGMsMSk7ZS5yb3Q9dGhpcy5nZXROZXh0S2V5V2l0aChcInJvdFwiLGMsMSk7ZS5zY2w9dGhpcy5nZXROZXh0S2V5V2l0aChcInNjbFwiLGMsMSl9dGhpcy51cGRhdGUoMCl9dGhpcy5pc1BhdXNlZD0hMTtUSFJFRS5BbmltYXRpb25IYW5kbGVyLmFkZFRvVXBkYXRlKHRoaXMpfTtUSFJFRS5BbmltYXRpb24ucHJvdG90eXBlLnBhdXNlPWZ1bmN0aW9uKCl7ITA9PT10aGlzLmlzUGF1c2VkP1RIUkVFLkFuaW1hdGlvbkhhbmRsZXIuYWRkVG9VcGRhdGUodGhpcyk6VEhSRUUuQW5pbWF0aW9uSGFuZGxlci5yZW1vdmVGcm9tVXBkYXRlKHRoaXMpO3RoaXMuaXNQYXVzZWQ9IXRoaXMuaXNQYXVzZWR9O1xuVEhSRUUuQW5pbWF0aW9uLnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7dGhpcy5pc1BhdXNlZD10aGlzLmlzUGxheWluZz0hMTtUSFJFRS5BbmltYXRpb25IYW5kbGVyLnJlbW92ZUZyb21VcGRhdGUodGhpcyl9O1xuVEhSRUUuQW5pbWF0aW9uLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oYSl7aWYoITEhPT10aGlzLmlzUGxheWluZyl7dmFyIGI9W1wicG9zXCIsXCJyb3RcIixcInNjbFwiXSxjLGQsZSxmLGgsZyxpLGssbTtmb3IobT10aGlzLmN1cnJlbnRUaW1lKz1hKnRoaXMudGltZVNjYWxlO3RoaXMuY3VycmVudFRpbWU+dGhpcy5kYXRhLmxlbmd0aDspdGhpcy5jdXJyZW50VGltZS09dGhpcy5kYXRhLmxlbmd0aDtrPXRoaXMuY3VycmVudFRpbWUlPXRoaXMuZGF0YS5sZW5ndGg7cGFyc2VJbnQoTWF0aC5taW4oayp0aGlzLmRhdGEuZnBzLHRoaXMuZGF0YS5sZW5ndGgqdGhpcy5kYXRhLmZwcyksMTApO2Zvcih2YXIgbD0wLHA9dGhpcy5oaWVyYXJjaHkubGVuZ3RoO2w8cDtsKyspe2E9dGhpcy5oaWVyYXJjaHlbbF07aT1hLmFuaW1hdGlvbkNhY2hlO2Zvcih2YXIgdD0wOzM+dDt0Kyspe2M9Ylt0XTtoPWkucHJldktleVtjXTtnPWkubmV4dEtleVtjXTtpZihnLnRpbWU8PW0pe2lmKGs8PW0paWYodGhpcy5sb29wKXtoPVxudGhpcy5kYXRhLmhpZXJhcmNoeVtsXS5rZXlzWzBdO2ZvcihnPXRoaXMuZ2V0TmV4dEtleVdpdGgoYyxsLDEpO251bGwhPT1nJiZnLnRpbWU8ayYmZy5pbmRleD5oLmluZGV4OyloPWcsZz10aGlzLmdldE5leHRLZXlXaXRoKGMsbCxnLmluZGV4KzEpfWVsc2V7dGhpcy5zdG9wKCk7cmV0dXJufWVsc2V7ZG8gaD1nLGc9dGhpcy5nZXROZXh0S2V5V2l0aChjLGwsZy5pbmRleCsxKTt3aGlsZShudWxsIT09ZyYmZy50aW1lPGsmJmcuaW5kZXg+aC5pbmRleCl9aS5wcmV2S2V5W2NdPWg7aS5uZXh0S2V5W2NdPWd9YS5tYXRyaXhBdXRvVXBkYXRlPSEwO2EubWF0cml4V29ybGROZWVkc1VwZGF0ZT0hMDtkPShrLWgudGltZSkvKGcudGltZS1oLnRpbWUpO2U9aFtjXTtmPWdbY107aWYoMD5kfHwxPGQpY29uc29sZS5sb2coXCJUSFJFRS5BbmltYXRpb24udXBkYXRlOiBXYXJuaW5nISBTY2FsZSBvdXQgb2YgYm91bmRzOlwiK2QrXCIgb24gYm9uZSBcIitsKSxkPTA+ZD8wOjE7aWYoXCJwb3NcIj09PWMpaWYoYz1cbmEucG9zaXRpb24sdGhpcy5pbnRlcnBvbGF0aW9uVHlwZT09PVRIUkVFLkFuaW1hdGlvbkhhbmRsZXIuTElORUFSKWMueD1lWzBdKyhmWzBdLWVbMF0pKmQsYy55PWVbMV0rKGZbMV0tZVsxXSkqZCxjLno9ZVsyXSsoZlsyXS1lWzJdKSpkO2Vsc2V7aWYodGhpcy5pbnRlcnBvbGF0aW9uVHlwZT09PVRIUkVFLkFuaW1hdGlvbkhhbmRsZXIuQ0FUTVVMTFJPTXx8dGhpcy5pbnRlcnBvbGF0aW9uVHlwZT09PVRIUkVFLkFuaW1hdGlvbkhhbmRsZXIuQ0FUTVVMTFJPTV9GT1JXQVJEKXRoaXMucG9pbnRzWzBdPXRoaXMuZ2V0UHJldktleVdpdGgoXCJwb3NcIixsLGguaW5kZXgtMSkucG9zLHRoaXMucG9pbnRzWzFdPWUsdGhpcy5wb2ludHNbMl09Zix0aGlzLnBvaW50c1szXT10aGlzLmdldE5leHRLZXlXaXRoKFwicG9zXCIsbCxnLmluZGV4KzEpLnBvcyxkPTAuMzMqZCswLjMzLGU9dGhpcy5pbnRlcnBvbGF0ZUNhdG11bGxSb20odGhpcy5wb2ludHMsZCksYy54PWVbMF0sYy55PWVbMV0sYy56PWVbMl0sXG50aGlzLmludGVycG9sYXRpb25UeXBlPT09VEhSRUUuQW5pbWF0aW9uSGFuZGxlci5DQVRNVUxMUk9NX0ZPUldBUkQmJihkPXRoaXMuaW50ZXJwb2xhdGVDYXRtdWxsUm9tKHRoaXMucG9pbnRzLDEuMDEqZCksdGhpcy50YXJnZXQuc2V0KGRbMF0sZFsxXSxkWzJdKSx0aGlzLnRhcmdldC5zdWIoYyksdGhpcy50YXJnZXQueT0wLHRoaXMudGFyZ2V0Lm5vcm1hbGl6ZSgpLGQ9TWF0aC5hdGFuMih0aGlzLnRhcmdldC54LHRoaXMudGFyZ2V0LnopLGEucm90YXRpb24uc2V0KDAsZCwwKSl9ZWxzZVwicm90XCI9PT1jP1RIUkVFLlF1YXRlcm5pb24uc2xlcnAoZSxmLGEucXVhdGVybmlvbixkKTpcInNjbFwiPT09YyYmKGM9YS5zY2FsZSxjLng9ZVswXSsoZlswXS1lWzBdKSpkLGMueT1lWzFdKyhmWzFdLWVbMV0pKmQsYy56PWVbMl0rKGZbMl0tZVsyXSkqZCl9fX19O1xuVEhSRUUuQW5pbWF0aW9uLnByb3RvdHlwZS5pbnRlcnBvbGF0ZUNhdG11bGxSb209ZnVuY3Rpb24oYSxiKXt2YXIgYz1bXSxkPVtdLGUsZixoLGcsaSxrO2U9KGEubGVuZ3RoLTEpKmI7Zj1NYXRoLmZsb29yKGUpO2UtPWY7Y1swXT0wPT09Zj9mOmYtMTtjWzFdPWY7Y1syXT1mPmEubGVuZ3RoLTI/ZjpmKzE7Y1szXT1mPmEubGVuZ3RoLTM/ZjpmKzI7Zj1hW2NbMF1dO2c9YVtjWzFdXTtpPWFbY1syXV07az1hW2NbM11dO2M9ZSplO2g9ZSpjO2RbMF09dGhpcy5pbnRlcnBvbGF0ZShmWzBdLGdbMF0saVswXSxrWzBdLGUsYyxoKTtkWzFdPXRoaXMuaW50ZXJwb2xhdGUoZlsxXSxnWzFdLGlbMV0sa1sxXSxlLGMsaCk7ZFsyXT10aGlzLmludGVycG9sYXRlKGZbMl0sZ1syXSxpWzJdLGtbMl0sZSxjLGgpO3JldHVybiBkfTtcblRIUkVFLkFuaW1hdGlvbi5wcm90b3R5cGUuaW50ZXJwb2xhdGU9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsaCl7YT0wLjUqKGMtYSk7ZD0wLjUqKGQtYik7cmV0dXJuKDIqKGItYykrYStkKSpoKygtMyooYi1jKS0yKmEtZCkqZithKmUrYn07VEhSRUUuQW5pbWF0aW9uLnByb3RvdHlwZS5nZXROZXh0S2V5V2l0aD1mdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPXRoaXMuZGF0YS5oaWVyYXJjaHlbYl0ua2V5cyxjPXRoaXMuaW50ZXJwb2xhdGlvblR5cGU9PT1USFJFRS5BbmltYXRpb25IYW5kbGVyLkNBVE1VTExST018fHRoaXMuaW50ZXJwb2xhdGlvblR5cGU9PT1USFJFRS5BbmltYXRpb25IYW5kbGVyLkNBVE1VTExST01fRk9SV0FSRD9jPGQubGVuZ3RoLTE/YzpkLmxlbmd0aC0xOmMlZC5sZW5ndGg7YzxkLmxlbmd0aDtjKyspaWYodm9pZCAwIT09ZFtjXVthXSlyZXR1cm4gZFtjXTtyZXR1cm4gdGhpcy5kYXRhLmhpZXJhcmNoeVtiXS5rZXlzWzBdfTtcblRIUkVFLkFuaW1hdGlvbi5wcm90b3R5cGUuZ2V0UHJldktleVdpdGg9ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD10aGlzLmRhdGEuaGllcmFyY2h5W2JdLmtleXMsYz10aGlzLmludGVycG9sYXRpb25UeXBlPT09VEhSRUUuQW5pbWF0aW9uSGFuZGxlci5DQVRNVUxMUk9NfHx0aGlzLmludGVycG9sYXRpb25UeXBlPT09VEhSRUUuQW5pbWF0aW9uSGFuZGxlci5DQVRNVUxMUk9NX0ZPUldBUkQ/MDxjP2M6MDowPD1jP2M6YytkLmxlbmd0aDswPD1jO2MtLSlpZih2b2lkIDAhPT1kW2NdW2FdKXJldHVybiBkW2NdO3JldHVybiB0aGlzLmRhdGEuaGllcmFyY2h5W2JdLmtleXNbZC5sZW5ndGgtMV19O1RIUkVFLktleUZyYW1lQW5pbWF0aW9uPWZ1bmN0aW9uKGEsYixjKXt0aGlzLnJvb3Q9YTt0aGlzLmRhdGE9VEhSRUUuQW5pbWF0aW9uSGFuZGxlci5nZXQoYik7dGhpcy5oaWVyYXJjaHk9VEhSRUUuQW5pbWF0aW9uSGFuZGxlci5wYXJzZShhKTt0aGlzLmN1cnJlbnRUaW1lPTA7dGhpcy50aW1lU2NhbGU9MC4wMDE7dGhpcy5pc1BsYXlpbmc9ITE7dGhpcy5sb29wPXRoaXMuaXNQYXVzZWQ9ITA7dGhpcy5KSVRDb21waWxlPXZvaWQgMCE9PWM/YzohMDthPTA7Zm9yKGI9dGhpcy5oaWVyYXJjaHkubGVuZ3RoO2E8YjthKyspe3ZhciBjPXRoaXMuZGF0YS5oaWVyYXJjaHlbYV0uc2lkcyxkPXRoaXMuaGllcmFyY2h5W2FdO2lmKHRoaXMuZGF0YS5oaWVyYXJjaHlbYV0ua2V5cy5sZW5ndGgmJmMpe2Zvcih2YXIgZT0wO2U8Yy5sZW5ndGg7ZSsrKXt2YXIgZj1jW2VdLGg9dGhpcy5nZXROZXh0S2V5V2l0aChmLGEsMCk7aCYmaC5hcHBseShmKX1kLm1hdHJpeEF1dG9VcGRhdGU9ITE7dGhpcy5kYXRhLmhpZXJhcmNoeVthXS5ub2RlLnVwZGF0ZU1hdHJpeCgpO1xuZC5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPSEwfX19O1xuVEhSRUUuS2V5RnJhbWVBbmltYXRpb24ucHJvdG90eXBlLnBsYXk9ZnVuY3Rpb24oYSxiKXtpZighdGhpcy5pc1BsYXlpbmcpe3RoaXMuaXNQbGF5aW5nPSEwO3RoaXMubG9vcD12b2lkIDAhPT1hP2E6ITA7dGhpcy5jdXJyZW50VGltZT12b2lkIDAhPT1iP2I6MDt0aGlzLnN0YXJ0VGltZU1zPWI7dGhpcy5zdGFydFRpbWU9MUU3O3RoaXMuZW5kVGltZT0tdGhpcy5zdGFydFRpbWU7dmFyIGMsZD10aGlzLmhpZXJhcmNoeS5sZW5ndGgsZSxmO2ZvcihjPTA7YzxkO2MrKyllPXRoaXMuaGllcmFyY2h5W2NdLGY9dGhpcy5kYXRhLmhpZXJhcmNoeVtjXSx2b2lkIDA9PT1mLmFuaW1hdGlvbkNhY2hlJiYoZi5hbmltYXRpb25DYWNoZT17fSxmLmFuaW1hdGlvbkNhY2hlLnByZXZLZXk9bnVsbCxmLmFuaW1hdGlvbkNhY2hlLm5leHRLZXk9bnVsbCxmLmFuaW1hdGlvbkNhY2hlLm9yaWdpbmFsTWF0cml4PWUgaW5zdGFuY2VvZiBUSFJFRS5Cb25lP2Uuc2tpbk1hdHJpeDplLm1hdHJpeCksZT10aGlzLmRhdGEuaGllcmFyY2h5W2NdLmtleXMsXG5lLmxlbmd0aCYmKGYuYW5pbWF0aW9uQ2FjaGUucHJldktleT1lWzBdLGYuYW5pbWF0aW9uQ2FjaGUubmV4dEtleT1lWzFdLHRoaXMuc3RhcnRUaW1lPU1hdGgubWluKGVbMF0udGltZSx0aGlzLnN0YXJ0VGltZSksdGhpcy5lbmRUaW1lPU1hdGgubWF4KGVbZS5sZW5ndGgtMV0udGltZSx0aGlzLmVuZFRpbWUpKTt0aGlzLnVwZGF0ZSgwKX10aGlzLmlzUGF1c2VkPSExO1RIUkVFLkFuaW1hdGlvbkhhbmRsZXIuYWRkVG9VcGRhdGUodGhpcyl9O1RIUkVFLktleUZyYW1lQW5pbWF0aW9uLnByb3RvdHlwZS5wYXVzZT1mdW5jdGlvbigpe3RoaXMuaXNQYXVzZWQ/VEhSRUUuQW5pbWF0aW9uSGFuZGxlci5hZGRUb1VwZGF0ZSh0aGlzKTpUSFJFRS5BbmltYXRpb25IYW5kbGVyLnJlbW92ZUZyb21VcGRhdGUodGhpcyk7dGhpcy5pc1BhdXNlZD0hdGhpcy5pc1BhdXNlZH07XG5USFJFRS5LZXlGcmFtZUFuaW1hdGlvbi5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3RoaXMuaXNQYXVzZWQ9dGhpcy5pc1BsYXlpbmc9ITE7VEhSRUUuQW5pbWF0aW9uSGFuZGxlci5yZW1vdmVGcm9tVXBkYXRlKHRoaXMpO2Zvcih2YXIgYT0wO2E8dGhpcy5kYXRhLmhpZXJhcmNoeS5sZW5ndGg7YSsrKXt2YXIgYj10aGlzLmhpZXJhcmNoeVthXSxjPXRoaXMuZGF0YS5oaWVyYXJjaHlbYV07aWYodm9pZCAwIT09Yy5hbmltYXRpb25DYWNoZSl7dmFyIGQ9Yy5hbmltYXRpb25DYWNoZS5vcmlnaW5hbE1hdHJpeDtiIGluc3RhbmNlb2YgVEhSRUUuQm9uZT8oZC5jb3B5KGIuc2tpbk1hdHJpeCksYi5za2luTWF0cml4PWQpOihkLmNvcHkoYi5tYXRyaXgpLGIubWF0cml4PWQpO2RlbGV0ZSBjLmFuaW1hdGlvbkNhY2hlfX19O1xuVEhSRUUuS2V5RnJhbWVBbmltYXRpb24ucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbihhKXtpZih0aGlzLmlzUGxheWluZyl7dmFyIGIsYyxkLGUsZj10aGlzLmRhdGEuSklULmhpZXJhcmNoeSxoLGcsaTtnPXRoaXMuY3VycmVudFRpbWUrPWEqdGhpcy50aW1lU2NhbGU7aD10aGlzLmN1cnJlbnRUaW1lJT10aGlzLmRhdGEubGVuZ3RoO2g8dGhpcy5zdGFydFRpbWVNcyYmKGg9dGhpcy5jdXJyZW50VGltZT10aGlzLnN0YXJ0VGltZU1zK2gpO2U9cGFyc2VJbnQoTWF0aC5taW4oaCp0aGlzLmRhdGEuZnBzLHRoaXMuZGF0YS5sZW5ndGgqdGhpcy5kYXRhLmZwcyksMTApO2lmKChpPWg8ZykmJiF0aGlzLmxvb3Ape2Zvcih2YXIgYT0wLGs9dGhpcy5oaWVyYXJjaHkubGVuZ3RoO2E8azthKyspe3ZhciBtPXRoaXMuZGF0YS5oaWVyYXJjaHlbYV0ua2V5cyxmPXRoaXMuZGF0YS5oaWVyYXJjaHlbYV0uc2lkcztkPW0ubGVuZ3RoLTE7ZT10aGlzLmhpZXJhcmNoeVthXTtpZihtLmxlbmd0aCl7Zm9yKG09XG4wO208Zi5sZW5ndGg7bSsrKWg9ZlttXSwoZz10aGlzLmdldFByZXZLZXlXaXRoKGgsYSxkKSkmJmcuYXBwbHkoaCk7dGhpcy5kYXRhLmhpZXJhcmNoeVthXS5ub2RlLnVwZGF0ZU1hdHJpeCgpO2UubWF0cml4V29ybGROZWVkc1VwZGF0ZT0hMH19dGhpcy5zdG9wKCl9ZWxzZSBpZighKGg8dGhpcy5zdGFydFRpbWUpKXthPTA7Zm9yKGs9dGhpcy5oaWVyYXJjaHkubGVuZ3RoO2E8azthKyspe2Q9dGhpcy5oaWVyYXJjaHlbYV07Yj10aGlzLmRhdGEuaGllcmFyY2h5W2FdO3ZhciBtPWIua2V5cyxsPWIuYW5pbWF0aW9uQ2FjaGU7aWYodGhpcy5KSVRDb21waWxlJiZ2b2lkIDAhPT1mW2FdW2VdKWQgaW5zdGFuY2VvZiBUSFJFRS5Cb25lPyhkLnNraW5NYXRyaXg9ZlthXVtlXSxkLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9ITEpOihkLm1hdHJpeD1mW2FdW2VdLGQubWF0cml4V29ybGROZWVkc1VwZGF0ZT0hMCk7ZWxzZSBpZihtLmxlbmd0aCl7dGhpcy5KSVRDb21waWxlJiZsJiYoZCBpbnN0YW5jZW9mXG5USFJFRS5Cb25lP2Quc2tpbk1hdHJpeD1sLm9yaWdpbmFsTWF0cml4OmQubWF0cml4PWwub3JpZ2luYWxNYXRyaXgpO2I9bC5wcmV2S2V5O2M9bC5uZXh0S2V5O2lmKGImJmMpe2lmKGMudGltZTw9Zyl7aWYoaSYmdGhpcy5sb29wKXtiPW1bMF07Zm9yKGM9bVsxXTtjLnRpbWU8aDspYj1jLGM9bVtiLmluZGV4KzFdfWVsc2UgaWYoIWkpZm9yKHZhciBwPW0ubGVuZ3RoLTE7Yy50aW1lPGgmJmMuaW5kZXghPT1wOyliPWMsYz1tW2IuaW5kZXgrMV07bC5wcmV2S2V5PWI7bC5uZXh0S2V5PWN9Yy50aW1lPj1oP2IuaW50ZXJwb2xhdGUoYyxoKTpiLmludGVycG9sYXRlKGMsYy50aW1lKX10aGlzLmRhdGEuaGllcmFyY2h5W2FdLm5vZGUudXBkYXRlTWF0cml4KCk7ZC5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPSEwfX1pZih0aGlzLkpJVENvbXBpbGUmJnZvaWQgMD09PWZbMF1bZV0pe3RoaXMuaGllcmFyY2h5WzBdLnVwZGF0ZU1hdHJpeFdvcmxkKCEwKTtmb3IoYT0wO2E8dGhpcy5oaWVyYXJjaHkubGVuZ3RoO2ErKylmW2FdW2VdPVxudGhpcy5oaWVyYXJjaHlbYV1pbnN0YW5jZW9mIFRIUkVFLkJvbmU/dGhpcy5oaWVyYXJjaHlbYV0uc2tpbk1hdHJpeC5jbG9uZSgpOnRoaXMuaGllcmFyY2h5W2FdLm1hdHJpeC5jbG9uZSgpfX19fTtUSFJFRS5LZXlGcmFtZUFuaW1hdGlvbi5wcm90b3R5cGUuZ2V0TmV4dEtleVdpdGg9ZnVuY3Rpb24oYSxiLGMpe2I9dGhpcy5kYXRhLmhpZXJhcmNoeVtiXS5rZXlzO2ZvcihjJT1iLmxlbmd0aDtjPGIubGVuZ3RoO2MrKylpZihiW2NdLmhhc1RhcmdldChhKSlyZXR1cm4gYltjXTtyZXR1cm4gYlswXX07VEhSRUUuS2V5RnJhbWVBbmltYXRpb24ucHJvdG90eXBlLmdldFByZXZLZXlXaXRoPWZ1bmN0aW9uKGEsYixjKXtiPXRoaXMuZGF0YS5oaWVyYXJjaHlbYl0ua2V5cztmb3IoYz0wPD1jP2M6YytiLmxlbmd0aDswPD1jO2MtLSlpZihiW2NdLmhhc1RhcmdldChhKSlyZXR1cm4gYltjXTtyZXR1cm4gYltiLmxlbmd0aC0xXX07VEhSRUUuQ3ViZUNhbWVyYT1mdW5jdGlvbihhLGIsYyl7VEhSRUUuT2JqZWN0M0QuY2FsbCh0aGlzKTt2YXIgZD1uZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoOTAsMSxhLGIpO2QudXAuc2V0KDAsLTEsMCk7ZC5sb29rQXQobmV3IFRIUkVFLlZlY3RvcjMoMSwwLDApKTt0aGlzLmFkZChkKTt2YXIgZT1uZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoOTAsMSxhLGIpO2UudXAuc2V0KDAsLTEsMCk7ZS5sb29rQXQobmV3IFRIUkVFLlZlY3RvcjMoLTEsMCwwKSk7dGhpcy5hZGQoZSk7dmFyIGY9bmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKDkwLDEsYSxiKTtmLnVwLnNldCgwLDAsMSk7Zi5sb29rQXQobmV3IFRIUkVFLlZlY3RvcjMoMCwxLDApKTt0aGlzLmFkZChmKTt2YXIgaD1uZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoOTAsMSxhLGIpO2gudXAuc2V0KDAsMCwtMSk7aC5sb29rQXQobmV3IFRIUkVFLlZlY3RvcjMoMCwtMSwwKSk7dGhpcy5hZGQoaCk7dmFyIGc9bmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKDkwLFxuMSxhLGIpO2cudXAuc2V0KDAsLTEsMCk7Zy5sb29rQXQobmV3IFRIUkVFLlZlY3RvcjMoMCwwLDEpKTt0aGlzLmFkZChnKTt2YXIgaT1uZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoOTAsMSxhLGIpO2kudXAuc2V0KDAsLTEsMCk7aS5sb29rQXQobmV3IFRIUkVFLlZlY3RvcjMoMCwwLC0xKSk7dGhpcy5hZGQoaSk7dGhpcy5yZW5kZXJUYXJnZXQ9bmV3IFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0Q3ViZShjLGMse2Zvcm1hdDpUSFJFRS5SR0JGb3JtYXQsbWFnRmlsdGVyOlRIUkVFLkxpbmVhckZpbHRlcixtaW5GaWx0ZXI6VEhSRUUuTGluZWFyRmlsdGVyfSk7dGhpcy51cGRhdGVDdWJlTWFwPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5yZW5kZXJUYXJnZXQscD1jLmdlbmVyYXRlTWlwbWFwcztjLmdlbmVyYXRlTWlwbWFwcz0hMTtjLmFjdGl2ZUN1YmVGYWNlPTA7YS5yZW5kZXIoYixkLGMpO2MuYWN0aXZlQ3ViZUZhY2U9MTthLnJlbmRlcihiLGUsYyk7Yy5hY3RpdmVDdWJlRmFjZT1cbjI7YS5yZW5kZXIoYixmLGMpO2MuYWN0aXZlQ3ViZUZhY2U9MzthLnJlbmRlcihiLGgsYyk7Yy5hY3RpdmVDdWJlRmFjZT00O2EucmVuZGVyKGIsZyxjKTtjLmdlbmVyYXRlTWlwbWFwcz1wO2MuYWN0aXZlQ3ViZUZhY2U9NTthLnJlbmRlcihiLGksYyl9fTtUSFJFRS5DdWJlQ2FtZXJhLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSk7VEhSRUUuQ29tYmluZWRDYW1lcmE9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsaCl7VEhSRUUuQ2FtZXJhLmNhbGwodGhpcyk7dGhpcy5mb3Y9Yzt0aGlzLmxlZnQ9LWEvMjt0aGlzLnJpZ2h0PWEvMjt0aGlzLnRvcD1iLzI7dGhpcy5ib3R0b209LWIvMjt0aGlzLmNhbWVyYU89bmV3IFRIUkVFLk9ydGhvZ3JhcGhpY0NhbWVyYShhLy0yLGEvMixiLzIsYi8tMixmLGgpO3RoaXMuY2FtZXJhUD1uZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoYyxhL2IsZCxlKTt0aGlzLnpvb209MTt0aGlzLnRvUGVyc3BlY3RpdmUoKX07VEhSRUUuQ29tYmluZWRDYW1lcmEucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuQ2FtZXJhLnByb3RvdHlwZSk7XG5USFJFRS5Db21iaW5lZENhbWVyYS5wcm90b3R5cGUudG9QZXJzcGVjdGl2ZT1mdW5jdGlvbigpe3RoaXMubmVhcj10aGlzLmNhbWVyYVAubmVhcjt0aGlzLmZhcj10aGlzLmNhbWVyYVAuZmFyO3RoaXMuY2FtZXJhUC5mb3Y9dGhpcy5mb3YvdGhpcy56b29tO3RoaXMuY2FtZXJhUC51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7dGhpcy5wcm9qZWN0aW9uTWF0cml4PXRoaXMuY2FtZXJhUC5wcm9qZWN0aW9uTWF0cml4O3RoaXMuaW5QZXJzcGVjdGl2ZU1vZGU9ITA7dGhpcy5pbk9ydGhvZ3JhcGhpY01vZGU9ITF9O1xuVEhSRUUuQ29tYmluZWRDYW1lcmEucHJvdG90eXBlLnRvT3J0aG9ncmFwaGljPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jYW1lcmFQLmFzcGVjdCxiPSh0aGlzLmNhbWVyYVAubmVhcit0aGlzLmNhbWVyYVAuZmFyKS8yLGI9TWF0aC50YW4odGhpcy5mb3YvMikqYixhPTIqYiphLzIsYj1iL3RoaXMuem9vbSxhPWEvdGhpcy56b29tO3RoaXMuY2FtZXJhTy5sZWZ0PS1hO3RoaXMuY2FtZXJhTy5yaWdodD1hO3RoaXMuY2FtZXJhTy50b3A9Yjt0aGlzLmNhbWVyYU8uYm90dG9tPS1iO3RoaXMuY2FtZXJhTy51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7dGhpcy5uZWFyPXRoaXMuY2FtZXJhTy5uZWFyO3RoaXMuZmFyPXRoaXMuY2FtZXJhTy5mYXI7dGhpcy5wcm9qZWN0aW9uTWF0cml4PXRoaXMuY2FtZXJhTy5wcm9qZWN0aW9uTWF0cml4O3RoaXMuaW5QZXJzcGVjdGl2ZU1vZGU9ITE7dGhpcy5pbk9ydGhvZ3JhcGhpY01vZGU9ITB9O1xuVEhSRUUuQ29tYmluZWRDYW1lcmEucHJvdG90eXBlLnNldFNpemU9ZnVuY3Rpb24oYSxiKXt0aGlzLmNhbWVyYVAuYXNwZWN0PWEvYjt0aGlzLmxlZnQ9LWEvMjt0aGlzLnJpZ2h0PWEvMjt0aGlzLnRvcD1iLzI7dGhpcy5ib3R0b209LWIvMn07VEhSRUUuQ29tYmluZWRDYW1lcmEucHJvdG90eXBlLnNldEZvdj1mdW5jdGlvbihhKXt0aGlzLmZvdj1hO3RoaXMuaW5QZXJzcGVjdGl2ZU1vZGU/dGhpcy50b1BlcnNwZWN0aXZlKCk6dGhpcy50b09ydGhvZ3JhcGhpYygpfTtUSFJFRS5Db21iaW5lZENhbWVyYS5wcm90b3R5cGUudXBkYXRlUHJvamVjdGlvbk1hdHJpeD1mdW5jdGlvbigpe3RoaXMuaW5QZXJzcGVjdGl2ZU1vZGU/dGhpcy50b1BlcnNwZWN0aXZlKCk6KHRoaXMudG9QZXJzcGVjdGl2ZSgpLHRoaXMudG9PcnRob2dyYXBoaWMoKSl9O1xuVEhSRUUuQ29tYmluZWRDYW1lcmEucHJvdG90eXBlLnNldExlbnM9ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1iJiYoYj0yNCk7dmFyIGM9MipUSFJFRS5NYXRoLnJhZFRvRGVnKE1hdGguYXRhbihiLygyKmEpKSk7dGhpcy5zZXRGb3YoYyk7cmV0dXJuIGN9O1RIUkVFLkNvbWJpbmVkQ2FtZXJhLnByb3RvdHlwZS5zZXRab29tPWZ1bmN0aW9uKGEpe3RoaXMuem9vbT1hO3RoaXMuaW5QZXJzcGVjdGl2ZU1vZGU/dGhpcy50b1BlcnNwZWN0aXZlKCk6dGhpcy50b09ydGhvZ3JhcGhpYygpfTtUSFJFRS5Db21iaW5lZENhbWVyYS5wcm90b3R5cGUudG9Gcm9udFZpZXc9ZnVuY3Rpb24oKXt0aGlzLnJvdGF0aW9uLng9MDt0aGlzLnJvdGF0aW9uLnk9MDt0aGlzLnJvdGF0aW9uLno9MDt0aGlzLnJvdGF0aW9uQXV0b1VwZGF0ZT0hMX07XG5USFJFRS5Db21iaW5lZENhbWVyYS5wcm90b3R5cGUudG9CYWNrVmlldz1mdW5jdGlvbigpe3RoaXMucm90YXRpb24ueD0wO3RoaXMucm90YXRpb24ueT1NYXRoLlBJO3RoaXMucm90YXRpb24uej0wO3RoaXMucm90YXRpb25BdXRvVXBkYXRlPSExfTtUSFJFRS5Db21iaW5lZENhbWVyYS5wcm90b3R5cGUudG9MZWZ0Vmlldz1mdW5jdGlvbigpe3RoaXMucm90YXRpb24ueD0wO3RoaXMucm90YXRpb24ueT0tTWF0aC5QSS8yO3RoaXMucm90YXRpb24uej0wO3RoaXMucm90YXRpb25BdXRvVXBkYXRlPSExfTtUSFJFRS5Db21iaW5lZENhbWVyYS5wcm90b3R5cGUudG9SaWdodFZpZXc9ZnVuY3Rpb24oKXt0aGlzLnJvdGF0aW9uLng9MDt0aGlzLnJvdGF0aW9uLnk9TWF0aC5QSS8yO3RoaXMucm90YXRpb24uej0wO3RoaXMucm90YXRpb25BdXRvVXBkYXRlPSExfTtcblRIUkVFLkNvbWJpbmVkQ2FtZXJhLnByb3RvdHlwZS50b1RvcFZpZXc9ZnVuY3Rpb24oKXt0aGlzLnJvdGF0aW9uLng9LU1hdGguUEkvMjt0aGlzLnJvdGF0aW9uLnk9MDt0aGlzLnJvdGF0aW9uLno9MDt0aGlzLnJvdGF0aW9uQXV0b1VwZGF0ZT0hMX07VEhSRUUuQ29tYmluZWRDYW1lcmEucHJvdG90eXBlLnRvQm90dG9tVmlldz1mdW5jdGlvbigpe3RoaXMucm90YXRpb24ueD1NYXRoLlBJLzI7dGhpcy5yb3RhdGlvbi55PTA7dGhpcy5yb3RhdGlvbi56PTA7dGhpcy5yb3RhdGlvbkF1dG9VcGRhdGU9ITF9O1RIUkVFLkNpcmNsZUdlb21ldHJ5PWZ1bmN0aW9uKGEsYixjLGQpe1RIUkVFLkdlb21ldHJ5LmNhbGwodGhpcyk7dGhpcy5yYWRpdXM9YT1hfHw1MDt0aGlzLnNlZ21lbnRzPWI9dm9pZCAwIT09Yj9NYXRoLm1heCgzLGIpOjg7dGhpcy50aGV0YVN0YXJ0PWM9dm9pZCAwIT09Yz9jOjA7dGhpcy50aGV0YUxlbmd0aD1kPXZvaWQgMCE9PWQ/ZDoyKk1hdGguUEk7dmFyIGUsZj1bXTtlPW5ldyBUSFJFRS5WZWN0b3IzO3ZhciBoPW5ldyBUSFJFRS5WZWN0b3IyKDAuNSwwLjUpO3RoaXMudmVydGljZXMucHVzaChlKTtmLnB1c2goaCk7Zm9yKGU9MDtlPD1iO2UrKyl7dmFyIGc9bmV3IFRIUkVFLlZlY3RvcjMsaT1jK2UvYipkO2cueD1hKk1hdGguY29zKGkpO2cueT1hKk1hdGguc2luKGkpO3RoaXMudmVydGljZXMucHVzaChnKTtmLnB1c2gobmV3IFRIUkVFLlZlY3RvcjIoKGcueC9hKzEpLzIsKGcueS9hKzEpLzIpKX1jPW5ldyBUSFJFRS5WZWN0b3IzKDAsMCwxKTtmb3IoZT0xO2U8PWI7ZSsrKXRoaXMuZmFjZXMucHVzaChuZXcgVEhSRUUuRmFjZTMoZSxcbmUrMSwwLFtjLmNsb25lKCksYy5jbG9uZSgpLGMuY2xvbmUoKV0pKSx0aGlzLmZhY2VWZXJ0ZXhVdnNbMF0ucHVzaChbZltlXS5jbG9uZSgpLGZbZSsxXS5jbG9uZSgpLGguY2xvbmUoKV0pO3RoaXMuY29tcHV0ZUNlbnRyb2lkcygpO3RoaXMuY29tcHV0ZUZhY2VOb3JtYWxzKCk7dGhpcy5ib3VuZGluZ1NwaGVyZT1uZXcgVEhSRUUuU3BoZXJlKG5ldyBUSFJFRS5WZWN0b3IzLGEpfTtUSFJFRS5DaXJjbGVHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5HZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLkN1YmVHZW9tZXRyeT1mdW5jdGlvbihhLGIsYyxkLGUsZil7ZnVuY3Rpb24gaChhLGIsYyxkLGUsZixoLHEpe3ZhciBuLHU9Zy53aWR0aFNlZ21lbnRzLHI9Zy5oZWlnaHRTZWdtZW50cyx2PWUvMix6PWYvMixHPWcudmVydGljZXMubGVuZ3RoO2lmKFwieFwiPT09YSYmXCJ5XCI9PT1ifHxcInlcIj09PWEmJlwieFwiPT09YiluPVwielwiO2Vsc2UgaWYoXCJ4XCI9PT1hJiZcInpcIj09PWJ8fFwielwiPT09YSYmXCJ4XCI9PT1iKW49XCJ5XCIscj1nLmRlcHRoU2VnbWVudHM7ZWxzZSBpZihcInpcIj09PWEmJlwieVwiPT09Ynx8XCJ5XCI9PT1hJiZcInpcIj09PWIpbj1cInhcIix1PWcuZGVwdGhTZWdtZW50czt2YXIgdz11KzEseT1yKzEsRT1lL3UsQT1mL3IsSz1uZXcgVEhSRUUuVmVjdG9yMztLW25dPTA8aD8xOi0xO2ZvcihlPTA7ZTx5O2UrKylmb3IoZj0wO2Y8dztmKyspe3ZhciBEPW5ldyBUSFJFRS5WZWN0b3IzO0RbYV09KGYqRS12KSpjO0RbYl09KGUqQS16KSpkO0Rbbl09aDtnLnZlcnRpY2VzLnB1c2goRCl9Zm9yKGU9XG4wO2U8cjtlKyspZm9yKGY9MDtmPHU7ZisrKXo9Zit3KmUsYT1mK3cqKGUrMSksYj1mKzErdyooZSsxKSxjPWYrMSt3KmUsZD1uZXcgVEhSRUUuVmVjdG9yMihmL3UsMS1lL3IpLGg9bmV3IFRIUkVFLlZlY3RvcjIoZi91LDEtKGUrMSkvciksbj1uZXcgVEhSRUUuVmVjdG9yMigoZisxKS91LDEtKGUrMSkvciksdj1uZXcgVEhSRUUuVmVjdG9yMigoZisxKS91LDEtZS9yKSx6PW5ldyBUSFJFRS5GYWNlMyh6K0csYStHLGMrRyksei5ub3JtYWwuY29weShLKSx6LnZlcnRleE5vcm1hbHMucHVzaChLLmNsb25lKCksSy5jbG9uZSgpLEsuY2xvbmUoKSksei5tYXRlcmlhbEluZGV4PXEsZy5mYWNlcy5wdXNoKHopLGcuZmFjZVZlcnRleFV2c1swXS5wdXNoKFtkLGgsdl0pLHo9bmV3IFRIUkVFLkZhY2UzKGErRyxiK0csYytHKSx6Lm5vcm1hbC5jb3B5KEspLHoudmVydGV4Tm9ybWFscy5wdXNoKEsuY2xvbmUoKSxLLmNsb25lKCksSy5jbG9uZSgpKSx6Lm1hdGVyaWFsSW5kZXg9cSxnLmZhY2VzLnB1c2goeiksXG5nLmZhY2VWZXJ0ZXhVdnNbMF0ucHVzaChbaC5jbG9uZSgpLG4sdi5jbG9uZSgpXSl9VEhSRUUuR2VvbWV0cnkuY2FsbCh0aGlzKTt2YXIgZz10aGlzO3RoaXMud2lkdGg9YTt0aGlzLmhlaWdodD1iO3RoaXMuZGVwdGg9Yzt0aGlzLndpZHRoU2VnbWVudHM9ZHx8MTt0aGlzLmhlaWdodFNlZ21lbnRzPWV8fDE7dGhpcy5kZXB0aFNlZ21lbnRzPWZ8fDE7YT10aGlzLndpZHRoLzI7Yj10aGlzLmhlaWdodC8yO2M9dGhpcy5kZXB0aC8yO2goXCJ6XCIsXCJ5XCIsLTEsLTEsdGhpcy5kZXB0aCx0aGlzLmhlaWdodCxhLDApO2goXCJ6XCIsXCJ5XCIsMSwtMSx0aGlzLmRlcHRoLHRoaXMuaGVpZ2h0LC1hLDEpO2goXCJ4XCIsXCJ6XCIsMSwxLHRoaXMud2lkdGgsdGhpcy5kZXB0aCxiLDIpO2goXCJ4XCIsXCJ6XCIsMSwtMSx0aGlzLndpZHRoLHRoaXMuZGVwdGgsLWIsMyk7aChcInhcIixcInlcIiwxLC0xLHRoaXMud2lkdGgsdGhpcy5oZWlnaHQsYyw0KTtoKFwieFwiLFwieVwiLC0xLC0xLHRoaXMud2lkdGgsdGhpcy5oZWlnaHQsLWMsXG41KTt0aGlzLmNvbXB1dGVDZW50cm9pZHMoKTt0aGlzLm1lcmdlVmVydGljZXMoKX07VEhSRUUuQ3ViZUdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuQ3lsaW5kZXJHZW9tZXRyeT1mdW5jdGlvbihhLGIsYyxkLGUsZil7VEhSRUUuR2VvbWV0cnkuY2FsbCh0aGlzKTt0aGlzLnJhZGl1c1RvcD1hPXZvaWQgMCE9PWE/YToyMDt0aGlzLnJhZGl1c0JvdHRvbT1iPXZvaWQgMCE9PWI/YjoyMDt0aGlzLmhlaWdodD1jPXZvaWQgMCE9PWM/YzoxMDA7dGhpcy5yYWRpYWxTZWdtZW50cz1kPWR8fDg7dGhpcy5oZWlnaHRTZWdtZW50cz1lPWV8fDE7dGhpcy5vcGVuRW5kZWQ9Zj12b2lkIDAhPT1mP2Y6ITE7dmFyIGg9Yy8yLGcsaSxrPVtdLG09W107Zm9yKGk9MDtpPD1lO2krKyl7dmFyIGw9W10scD1bXSx0PWkvZSxzPXQqKGItYSkrYTtmb3IoZz0wO2c8PWQ7ZysrKXt2YXIgcT1nL2Qsbj1uZXcgVEhSRUUuVmVjdG9yMztuLng9cypNYXRoLnNpbigyKnEqTWF0aC5QSSk7bi55PS10KmMraDtuLno9cypNYXRoLmNvcygyKnEqTWF0aC5QSSk7dGhpcy52ZXJ0aWNlcy5wdXNoKG4pO2wucHVzaCh0aGlzLnZlcnRpY2VzLmxlbmd0aC0xKTtwLnB1c2gobmV3IFRIUkVFLlZlY3RvcjIocSxcbjEtdCkpfWsucHVzaChsKTttLnB1c2gocCl9Yz0oYi1hKS9jO2ZvcihnPTA7ZzxkO2crKyl7MCE9PWE/KGw9dGhpcy52ZXJ0aWNlc1trWzBdW2ddXS5jbG9uZSgpLHA9dGhpcy52ZXJ0aWNlc1trWzBdW2crMV1dLmNsb25lKCkpOihsPXRoaXMudmVydGljZXNba1sxXVtnXV0uY2xvbmUoKSxwPXRoaXMudmVydGljZXNba1sxXVtnKzFdXS5jbG9uZSgpKTtsLnNldFkoTWF0aC5zcXJ0KGwueCpsLngrbC56KmwueikqYykubm9ybWFsaXplKCk7cC5zZXRZKE1hdGguc3FydChwLngqcC54K3AueipwLnopKmMpLm5vcm1hbGl6ZSgpO2ZvcihpPTA7aTxlO2krKyl7dmFyIHQ9a1tpXVtnXSxzPWtbaSsxXVtnXSxxPWtbaSsxXVtnKzFdLG49a1tpXVtnKzFdLHU9bC5jbG9uZSgpLHI9bC5jbG9uZSgpLHY9cC5jbG9uZSgpLHo9cC5jbG9uZSgpLEc9bVtpXVtnXS5jbG9uZSgpLHc9bVtpKzFdW2ddLmNsb25lKCkseT1tW2krMV1bZysxXS5jbG9uZSgpLEU9bVtpXVtnKzFdLmNsb25lKCk7dGhpcy5mYWNlcy5wdXNoKG5ldyBUSFJFRS5GYWNlMyh0LFxucyxuLFt1LHIsel0pKTt0aGlzLmZhY2VWZXJ0ZXhVdnNbMF0ucHVzaChbRyx3LEVdKTt0aGlzLmZhY2VzLnB1c2gobmV3IFRIUkVFLkZhY2UzKHMscSxuLFtyLmNsb25lKCksdix6LmNsb25lKCldKSk7dGhpcy5mYWNlVmVydGV4VXZzWzBdLnB1c2goW3cuY2xvbmUoKSx5LEUuY2xvbmUoKV0pfX1pZighMT09PWYmJjA8YSl7dGhpcy52ZXJ0aWNlcy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IzKDAsaCwwKSk7Zm9yKGc9MDtnPGQ7ZysrKXQ9a1swXVtnXSxzPWtbMF1bZysxXSxxPXRoaXMudmVydGljZXMubGVuZ3RoLTEsdT1uZXcgVEhSRUUuVmVjdG9yMygwLDEsMCkscj1uZXcgVEhSRUUuVmVjdG9yMygwLDEsMCksdj1uZXcgVEhSRUUuVmVjdG9yMygwLDEsMCksRz1tWzBdW2ddLmNsb25lKCksdz1tWzBdW2crMV0uY2xvbmUoKSx5PW5ldyBUSFJFRS5WZWN0b3IyKHcueCwwKSx0aGlzLmZhY2VzLnB1c2gobmV3IFRIUkVFLkZhY2UzKHQscyxxLFt1LHIsdl0pKSx0aGlzLmZhY2VWZXJ0ZXhVdnNbMF0ucHVzaChbRyxcbncseV0pfWlmKCExPT09ZiYmMDxiKXt0aGlzLnZlcnRpY2VzLnB1c2gobmV3IFRIUkVFLlZlY3RvcjMoMCwtaCwwKSk7Zm9yKGc9MDtnPGQ7ZysrKXQ9a1tpXVtnKzFdLHM9a1tpXVtnXSxxPXRoaXMudmVydGljZXMubGVuZ3RoLTEsdT1uZXcgVEhSRUUuVmVjdG9yMygwLC0xLDApLHI9bmV3IFRIUkVFLlZlY3RvcjMoMCwtMSwwKSx2PW5ldyBUSFJFRS5WZWN0b3IzKDAsLTEsMCksRz1tW2ldW2crMV0uY2xvbmUoKSx3PW1baV1bZ10uY2xvbmUoKSx5PW5ldyBUSFJFRS5WZWN0b3IyKHcueCwxKSx0aGlzLmZhY2VzLnB1c2gobmV3IFRIUkVFLkZhY2UzKHQscyxxLFt1LHIsdl0pKSx0aGlzLmZhY2VWZXJ0ZXhVdnNbMF0ucHVzaChbRyx3LHldKX10aGlzLmNvbXB1dGVDZW50cm9pZHMoKTt0aGlzLmNvbXB1dGVGYWNlTm9ybWFscygpfTtUSFJFRS5DeWxpbmRlckdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuRXh0cnVkZUdlb21ldHJ5PWZ1bmN0aW9uKGEsYil7XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBhJiYoVEhSRUUuR2VvbWV0cnkuY2FsbCh0aGlzKSxhPWEgaW5zdGFuY2VvZiBBcnJheT9hOlthXSx0aGlzLnNoYXBlYmI9YVthLmxlbmd0aC0xXS5nZXRCb3VuZGluZ0JveCgpLHRoaXMuYWRkU2hhcGVMaXN0KGEsYiksdGhpcy5jb21wdXRlQ2VudHJvaWRzKCksdGhpcy5jb21wdXRlRmFjZU5vcm1hbHMoKSl9O1RIUkVFLkV4dHJ1ZGVHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5HZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLkV4dHJ1ZGVHZW9tZXRyeS5wcm90b3R5cGUuYWRkU2hhcGVMaXN0PWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPWEubGVuZ3RoLGQ9MDtkPGM7ZCsrKXRoaXMuYWRkU2hhcGUoYVtkXSxiKX07XG5USFJFRS5FeHRydWRlR2VvbWV0cnkucHJvdG90eXBlLmFkZFNoYXBlPWZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhLGIsYyl7Ynx8Y29uc29sZS5sb2coXCJkaWVcIik7cmV0dXJuIGIuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihjKS5hZGQoYSl9ZnVuY3Rpb24gZChhLGIsYyl7dmFyIGQ9VEhSRUUuRXh0cnVkZUdlb21ldHJ5Ll9fdjEsZT1USFJFRS5FeHRydWRlR2VvbWV0cnkuX192MixmPVRIUkVFLkV4dHJ1ZGVHZW9tZXRyeS5fX3YzLGc9VEhSRUUuRXh0cnVkZUdlb21ldHJ5Ll9fdjQsaD1USFJFRS5FeHRydWRlR2VvbWV0cnkuX192NSxpPVRIUkVFLkV4dHJ1ZGVHZW9tZXRyeS5fX3Y2O2Quc2V0KGEueC1iLngsYS55LWIueSk7ZS5zZXQoYS54LWMueCxhLnktYy55KTtkPWQubm9ybWFsaXplKCk7ZT1lLm5vcm1hbGl6ZSgpO2Yuc2V0KC1kLnksZC54KTtnLnNldChlLnksLWUueCk7aC5jb3B5KGEpLmFkZChmKTtpLmNvcHkoYSkuYWRkKGcpO2lmKGguZXF1YWxzKGkpKXJldHVybiBnLmNsb25lKCk7XG5oLmNvcHkoYikuYWRkKGYpO2kuY29weShjKS5hZGQoZyk7Zj1kLmRvdChnKTtnPWkuc3ViKGgpLmRvdChnKTswPT09ZiYmKGNvbnNvbGUubG9nKFwiRWl0aGVyIGluZmluaXRlIG9yIG5vIHNvbHV0aW9ucyFcIiksMD09PWc/Y29uc29sZS5sb2coXCJJdHMgZmluaXRlIHNvbHV0aW9ucy5cIik6Y29uc29sZS5sb2coXCJUb28gYmFkLCBubyBzb2x1dGlvbnMuXCIpKTtnLz1mO3JldHVybiAwPmc/KGI9TWF0aC5hdGFuMihiLnktYS55LGIueC1hLngpLGE9TWF0aC5hdGFuMihjLnktYS55LGMueC1hLngpLGI+YSYmKGErPTIqTWF0aC5QSSksYz0oYithKS8yLGE9LU1hdGguY29zKGMpLGM9LU1hdGguc2luKGMpLG5ldyBUSFJFRS5WZWN0b3IyKGEsYykpOmQubXVsdGlwbHlTY2FsYXIoZykuYWRkKGgpLnN1YihhKS5jbG9uZSgpfWZ1bmN0aW9uIGUoYyxkKXt2YXIgZSxmO2ZvcihDPWMubGVuZ3RoOzA8PS0tQzspe2U9QztmPUMtMTswPmYmJihmPWMubGVuZ3RoLTEpO2Zvcih2YXIgZz0wLGg9dCsyKm0sXG5nPTA7ZzxoO2crKyl7dmFyIGk9Y2EqZyxrPWNhKihnKzEpLGw9ZCtlK2ksaT1kK2YraSxuPWQrZitrLGs9ZCtlK2sscD1jLHE9ZyxzPWgsdT1lLHc9ZixsPWwrRixpPWkrRixuPW4rRixrPWsrRjtELmZhY2VzLnB1c2gobmV3IFRIUkVFLkZhY2UzKGwsaSxrLG51bGwsbnVsbCxyKSk7RC5mYWNlcy5wdXNoKG5ldyBUSFJFRS5GYWNlMyhpLG4sayxudWxsLG51bGwscikpO2w9di5nZW5lcmF0ZVNpZGVXYWxsVVYoRCxhLHAsYixsLGksbixrLHEscyx1LHcpO0QuZmFjZVZlcnRleFV2c1swXS5wdXNoKFtsWzBdLGxbMV0sbFszXV0pO0QuZmFjZVZlcnRleFV2c1swXS5wdXNoKFtsWzFdLGxbMl0sbFszXV0pfX19ZnVuY3Rpb24gZihhLGIsYyl7RC52ZXJ0aWNlcy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IzKGEsYixjKSl9ZnVuY3Rpb24gaChjLGQsZSxmKXtjKz1GO2QrPUY7ZSs9RjtELmZhY2VzLnB1c2gobmV3IFRIUkVFLkZhY2UzKGMsZCxlLG51bGwsbnVsbCx1KSk7Yz1mP3YuZ2VuZXJhdGVCb3R0b21VVihELFxuYSxiLGMsZCxlKTp2LmdlbmVyYXRlVG9wVVYoRCxhLGIsYyxkLGUpO0QuZmFjZVZlcnRleFV2c1swXS5wdXNoKGMpfXZhciBnPXZvaWQgMCE9PWIuYW1vdW50P2IuYW1vdW50OjEwMCxpPXZvaWQgMCE9PWIuYmV2ZWxUaGlja25lc3M/Yi5iZXZlbFRoaWNrbmVzczo2LGs9dm9pZCAwIT09Yi5iZXZlbFNpemU/Yi5iZXZlbFNpemU6aS0yLG09dm9pZCAwIT09Yi5iZXZlbFNlZ21lbnRzP2IuYmV2ZWxTZWdtZW50czozLGw9dm9pZCAwIT09Yi5iZXZlbEVuYWJsZWQ/Yi5iZXZlbEVuYWJsZWQ6ITAscD12b2lkIDAhPT1iLmN1cnZlU2VnbWVudHM/Yi5jdXJ2ZVNlZ21lbnRzOjEyLHQ9dm9pZCAwIT09Yi5zdGVwcz9iLnN0ZXBzOjEscz1iLmV4dHJ1ZGVQYXRoLHEsbj0hMSx1PWIubWF0ZXJpYWwscj1iLmV4dHJ1ZGVNYXRlcmlhbCx2PXZvaWQgMCE9PWIuVVZHZW5lcmF0b3I/Yi5VVkdlbmVyYXRvcjpUSFJFRS5FeHRydWRlR2VvbWV0cnkuV29ybGRVVkdlbmVyYXRvcix6LEcsdyx5O3MmJihxPVxucy5nZXRTcGFjZWRQb2ludHModCksbj0hMCxsPSExLHo9dm9pZCAwIT09Yi5mcmFtZXM/Yi5mcmFtZXM6bmV3IFRIUkVFLlR1YmVHZW9tZXRyeS5GcmVuZXRGcmFtZXMocyx0LCExKSxHPW5ldyBUSFJFRS5WZWN0b3IzLHc9bmV3IFRIUkVFLlZlY3RvcjMseT1uZXcgVEhSRUUuVmVjdG9yMyk7bHx8KGs9aT1tPTApO3ZhciBFLEEsSyxEPXRoaXMsRj10aGlzLnZlcnRpY2VzLmxlbmd0aCxwPWEuZXh0cmFjdFBvaW50cyhwKSxPPXAuc2hhcGUscD1wLmhvbGVzO2lmKHM9IVRIUkVFLlNoYXBlLlV0aWxzLmlzQ2xvY2tXaXNlKE8pKXtPPU8ucmV2ZXJzZSgpO0E9MDtmb3IoSz1wLmxlbmd0aDtBPEs7QSsrKUU9cFtBXSxUSFJFRS5TaGFwZS5VdGlscy5pc0Nsb2NrV2lzZShFKSYmKHBbQV09RS5yZXZlcnNlKCkpO3M9ITF9dmFyIHg9VEhSRUUuU2hhcGUuVXRpbHMudHJpYW5ndWxhdGVTaGFwZShPLHApLHM9TztBPTA7Zm9yKEs9cC5sZW5ndGg7QTxLO0ErKylFPXBbQV0sTz1PLmNvbmNhdChFKTtcbnZhciBJLEIsTSxKLGNhPU8ubGVuZ3RoLG5hPXgubGVuZ3RoLHBhPVtdLEM9MCxRPXMubGVuZ3RoO0k9US0xO2ZvcihCPUMrMTtDPFE7QysrLEkrKyxCKyspST09PVEmJihJPTApLEI9PT1RJiYoQj0wKSxwYVtDXT1kKHNbQ10sc1tJXSxzW0JdKTt2YXIgUj1bXSxMLGRhPXBhLmNvbmNhdCgpO0E9MDtmb3IoSz1wLmxlbmd0aDtBPEs7QSsrKXtFPXBbQV07TD1bXTtDPTA7UT1FLmxlbmd0aDtJPVEtMTtmb3IoQj1DKzE7QzxRO0MrKyxJKyssQisrKUk9PT1RJiYoST0wKSxCPT09USYmKEI9MCksTFtDXT1kKEVbQ10sRVtJXSxFW0JdKTtSLnB1c2goTCk7ZGE9ZGEuY29uY2F0KEwpfWZvcihJPTA7STxtO0krKyl7RT1JL207TT1pKigxLUUpO0I9aypNYXRoLnNpbihFKk1hdGguUEkvMik7Qz0wO2ZvcihRPXMubGVuZ3RoO0M8UTtDKyspSj1jKHNbQ10scGFbQ10sQiksZihKLngsSi55LC1NKTtBPTA7Zm9yKEs9cC5sZW5ndGg7QTxLO0ErKyl7RT1wW0FdO0w9UltBXTtDPTA7Zm9yKFE9RS5sZW5ndGg7QzxcblE7QysrKUo9YyhFW0NdLExbQ10sQiksZihKLngsSi55LC1NKX19Qj1rO2ZvcihDPTA7QzxjYTtDKyspSj1sP2MoT1tDXSxkYVtDXSxCKTpPW0NdLG4/KHcuY29weSh6Lm5vcm1hbHNbMF0pLm11bHRpcGx5U2NhbGFyKEoueCksRy5jb3B5KHouYmlub3JtYWxzWzBdKS5tdWx0aXBseVNjYWxhcihKLnkpLHkuY29weShxWzBdKS5hZGQodykuYWRkKEcpLGYoeS54LHkueSx5LnopKTpmKEoueCxKLnksMCk7Zm9yKEU9MTtFPD10O0UrKylmb3IoQz0wO0M8Y2E7QysrKUo9bD9jKE9bQ10sZGFbQ10sQik6T1tDXSxuPyh3LmNvcHkoei5ub3JtYWxzW0VdKS5tdWx0aXBseVNjYWxhcihKLngpLEcuY29weSh6LmJpbm9ybWFsc1tFXSkubXVsdGlwbHlTY2FsYXIoSi55KSx5LmNvcHkocVtFXSkuYWRkKHcpLmFkZChHKSxmKHkueCx5LnkseS56KSk6ZihKLngsSi55LGcvdCpFKTtmb3IoST1tLTE7MDw9STtJLS0pe0U9SS9tO009aSooMS1FKTtCPWsqTWF0aC5zaW4oRSpNYXRoLlBJLzIpO0M9MDtmb3IoUT1cbnMubGVuZ3RoO0M8UTtDKyspSj1jKHNbQ10scGFbQ10sQiksZihKLngsSi55LGcrTSk7QT0wO2ZvcihLPXAubGVuZ3RoO0E8SztBKyspe0U9cFtBXTtMPVJbQV07Qz0wO2ZvcihRPUUubGVuZ3RoO0M8UTtDKyspSj1jKEVbQ10sTFtDXSxCKSxuP2YoSi54LEoueStxW3QtMV0ueSxxW3QtMV0ueCtNKTpmKEoueCxKLnksZytNKX19aWYobCl7aT0wKmNhO2ZvcihDPTA7QzxuYTtDKyspZz14W0NdLGgoZ1syXStpLGdbMV0raSxnWzBdK2ksITApO2k9Y2EqKHQrMiptKTtmb3IoQz0wO0M8bmE7QysrKWc9eFtDXSxoKGdbMF0raSxnWzFdK2ksZ1syXStpLCExKX1lbHNle2ZvcihDPTA7QzxuYTtDKyspZz14W0NdLGgoZ1syXSxnWzFdLGdbMF0sITApO2ZvcihDPTA7QzxuYTtDKyspZz14W0NdLGgoZ1swXStjYSp0LGdbMV0rY2EqdCxnWzJdK2NhKnQsITEpfWc9MDtlKHMsZyk7Zys9cy5sZW5ndGg7QT0wO2ZvcihLPXAubGVuZ3RoO0E8SztBKyspRT1wW0FdLGUoRSxnKSxnKz1FLmxlbmd0aH07XG5USFJFRS5FeHRydWRlR2VvbWV0cnkuV29ybGRVVkdlbmVyYXRvcj17Z2VuZXJhdGVUb3BVVjpmdW5jdGlvbihhLGIsYyxkLGUsZil7Yj1hLnZlcnRpY2VzW2VdLng7ZT1hLnZlcnRpY2VzW2VdLnk7Yz1hLnZlcnRpY2VzW2ZdLng7Zj1hLnZlcnRpY2VzW2ZdLnk7cmV0dXJuW25ldyBUSFJFRS5WZWN0b3IyKGEudmVydGljZXNbZF0ueCxhLnZlcnRpY2VzW2RdLnkpLG5ldyBUSFJFRS5WZWN0b3IyKGIsZSksbmV3IFRIUkVFLlZlY3RvcjIoYyxmKV19LGdlbmVyYXRlQm90dG9tVVY6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3JldHVybiB0aGlzLmdlbmVyYXRlVG9wVVYoYSxiLGMsZCxlLGYpfSxnZW5lcmF0ZVNpZGVXYWxsVVY6ZnVuY3Rpb24oYSxiLGMsZCxlLGYsaCxnKXt2YXIgYj1hLnZlcnRpY2VzW2VdLngsYz1hLnZlcnRpY2VzW2VdLnksZT1hLnZlcnRpY2VzW2VdLnosZD1hLnZlcnRpY2VzW2ZdLngsaT1hLnZlcnRpY2VzW2ZdLnksZj1hLnZlcnRpY2VzW2ZdLnosaz1hLnZlcnRpY2VzW2hdLngsXG5tPWEudmVydGljZXNbaF0ueSxoPWEudmVydGljZXNbaF0ueixsPWEudmVydGljZXNbZ10ueCxwPWEudmVydGljZXNbZ10ueSxhPWEudmVydGljZXNbZ10uejtyZXR1cm4gMC4wMT5NYXRoLmFicyhjLWkpP1tuZXcgVEhSRUUuVmVjdG9yMihiLDEtZSksbmV3IFRIUkVFLlZlY3RvcjIoZCwxLWYpLG5ldyBUSFJFRS5WZWN0b3IyKGssMS1oKSxuZXcgVEhSRUUuVmVjdG9yMihsLDEtYSldOltuZXcgVEhSRUUuVmVjdG9yMihjLDEtZSksbmV3IFRIUkVFLlZlY3RvcjIoaSwxLWYpLG5ldyBUSFJFRS5WZWN0b3IyKG0sMS1oKSxuZXcgVEhSRUUuVmVjdG9yMihwLDEtYSldfX07VEhSRUUuRXh0cnVkZUdlb21ldHJ5Ll9fdjE9bmV3IFRIUkVFLlZlY3RvcjI7VEhSRUUuRXh0cnVkZUdlb21ldHJ5Ll9fdjI9bmV3IFRIUkVFLlZlY3RvcjI7VEhSRUUuRXh0cnVkZUdlb21ldHJ5Ll9fdjM9bmV3IFRIUkVFLlZlY3RvcjI7VEhSRUUuRXh0cnVkZUdlb21ldHJ5Ll9fdjQ9bmV3IFRIUkVFLlZlY3RvcjI7XG5USFJFRS5FeHRydWRlR2VvbWV0cnkuX192NT1uZXcgVEhSRUUuVmVjdG9yMjtUSFJFRS5FeHRydWRlR2VvbWV0cnkuX192Nj1uZXcgVEhSRUUuVmVjdG9yMjtUSFJFRS5TaGFwZUdlb21ldHJ5PWZ1bmN0aW9uKGEsYil7VEhSRUUuR2VvbWV0cnkuY2FsbCh0aGlzKTshMT09PWEgaW5zdGFuY2VvZiBBcnJheSYmKGE9W2FdKTt0aGlzLnNoYXBlYmI9YVthLmxlbmd0aC0xXS5nZXRCb3VuZGluZ0JveCgpO3RoaXMuYWRkU2hhcGVMaXN0KGEsYik7dGhpcy5jb21wdXRlQ2VudHJvaWRzKCk7dGhpcy5jb21wdXRlRmFjZU5vcm1hbHMoKX07VEhSRUUuU2hhcGVHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5HZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLlNoYXBlR2VvbWV0cnkucHJvdG90eXBlLmFkZFNoYXBlTGlzdD1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkO2MrKyl0aGlzLmFkZFNoYXBlKGFbY10sYik7cmV0dXJuIHRoaXN9O1xuVEhSRUUuU2hhcGVHZW9tZXRyeS5wcm90b3R5cGUuYWRkU2hhcGU9ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1iJiYoYj17fSk7dmFyIGM9Yi5tYXRlcmlhbCxkPXZvaWQgMD09PWIuVVZHZW5lcmF0b3I/VEhSRUUuRXh0cnVkZUdlb21ldHJ5LldvcmxkVVZHZW5lcmF0b3I6Yi5VVkdlbmVyYXRvcixlLGYsaCxnPXRoaXMudmVydGljZXMubGVuZ3RoO2U9YS5leHRyYWN0UG9pbnRzKHZvaWQgMCE9PWIuY3VydmVTZWdtZW50cz9iLmN1cnZlU2VnbWVudHM6MTIpO3ZhciBpPWUuc2hhcGUsaz1lLmhvbGVzO2lmKCFUSFJFRS5TaGFwZS5VdGlscy5pc0Nsb2NrV2lzZShpKSl7aT1pLnJldmVyc2UoKTtlPTA7Zm9yKGY9ay5sZW5ndGg7ZTxmO2UrKyloPWtbZV0sVEhSRUUuU2hhcGUuVXRpbHMuaXNDbG9ja1dpc2UoaCkmJihrW2VdPWgucmV2ZXJzZSgpKX12YXIgbT1USFJFRS5TaGFwZS5VdGlscy50cmlhbmd1bGF0ZVNoYXBlKGksayk7ZT0wO2ZvcihmPWsubGVuZ3RoO2U8ZjtlKyspaD1rW2VdLFxuaT1pLmNvbmNhdChoKTtrPWkubGVuZ3RoO2Y9bS5sZW5ndGg7Zm9yKGU9MDtlPGs7ZSsrKWg9aVtlXSx0aGlzLnZlcnRpY2VzLnB1c2gobmV3IFRIUkVFLlZlY3RvcjMoaC54LGgueSwwKSk7Zm9yKGU9MDtlPGY7ZSsrKWs9bVtlXSxpPWtbMF0rZyxoPWtbMV0rZyxrPWtbMl0rZyx0aGlzLmZhY2VzLnB1c2gobmV3IFRIUkVFLkZhY2UzKGksaCxrLG51bGwsbnVsbCxjKSksdGhpcy5mYWNlVmVydGV4VXZzWzBdLnB1c2goZC5nZW5lcmF0ZUJvdHRvbVVWKHRoaXMsYSxiLGksaCxrKSl9O1RIUkVFLkxhdGhlR2VvbWV0cnk9ZnVuY3Rpb24oYSxiLGMsZCl7VEhSRUUuR2VvbWV0cnkuY2FsbCh0aGlzKTtmb3IodmFyIGI9Ynx8MTIsYz1jfHwwLGQ9ZHx8MipNYXRoLlBJLGU9MS8oYS5sZW5ndGgtMSksZj0xL2IsaD0wLGc9YjtoPD1nO2grKylmb3IodmFyIGk9YytoKmYqZCxrPU1hdGguY29zKGkpLG09TWF0aC5zaW4oaSksaT0wLGw9YS5sZW5ndGg7aTxsO2krKyl7dmFyIHA9YVtpXSx0PW5ldyBUSFJFRS5WZWN0b3IzO3QueD1rKnAueC1tKnAueTt0Lnk9bSpwLngraypwLnk7dC56PXAuejt0aGlzLnZlcnRpY2VzLnB1c2godCl9Yz1hLmxlbmd0aDtoPTA7Zm9yKGc9YjtoPGc7aCsrKXtpPTA7Zm9yKGw9YS5sZW5ndGgtMTtpPGw7aSsrKXt2YXIgYj1tPWkrYypoLGQ9bStjLGs9bSsxK2MsbT1tKzEscD1oKmYsdD1pKmUscz1wK2YscT10K2U7dGhpcy5mYWNlcy5wdXNoKG5ldyBUSFJFRS5GYWNlMyhiLGQsbSkpO3RoaXMuZmFjZVZlcnRleFV2c1swXS5wdXNoKFtuZXcgVEhSRUUuVmVjdG9yMihwLFxudCksbmV3IFRIUkVFLlZlY3RvcjIocyx0KSxuZXcgVEhSRUUuVmVjdG9yMihwLHEpXSk7dGhpcy5mYWNlcy5wdXNoKG5ldyBUSFJFRS5GYWNlMyhkLGssbSkpO3RoaXMuZmFjZVZlcnRleFV2c1swXS5wdXNoKFtuZXcgVEhSRUUuVmVjdG9yMihzLHQpLG5ldyBUSFJFRS5WZWN0b3IyKHMscSksbmV3IFRIUkVFLlZlY3RvcjIocCxxKV0pfX10aGlzLm1lcmdlVmVydGljZXMoKTt0aGlzLmNvbXB1dGVDZW50cm9pZHMoKTt0aGlzLmNvbXB1dGVGYWNlTm9ybWFscygpO3RoaXMuY29tcHV0ZVZlcnRleE5vcm1hbHMoKX07VEhSRUUuTGF0aGVHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5HZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLlBsYW5lR2VvbWV0cnk9ZnVuY3Rpb24oYSxiLGMsZCl7VEhSRUUuR2VvbWV0cnkuY2FsbCh0aGlzKTt0aGlzLndpZHRoPWE7dGhpcy5oZWlnaHQ9Yjt0aGlzLndpZHRoU2VnbWVudHM9Y3x8MTt0aGlzLmhlaWdodFNlZ21lbnRzPWR8fDE7Zm9yKHZhciBlPWEvMixmPWIvMixjPXRoaXMud2lkdGhTZWdtZW50cyxkPXRoaXMuaGVpZ2h0U2VnbWVudHMsaD1jKzEsZz1kKzEsaT10aGlzLndpZHRoL2Msaz10aGlzLmhlaWdodC9kLG09bmV3IFRIUkVFLlZlY3RvcjMoMCwwLDEpLGE9MDthPGc7YSsrKWZvcihiPTA7YjxoO2IrKyl0aGlzLnZlcnRpY2VzLnB1c2gobmV3IFRIUkVFLlZlY3RvcjMoYippLWUsLShhKmstZiksMCkpO2ZvcihhPTA7YTxkO2ErKylmb3IoYj0wO2I8YztiKyspe3ZhciBsPWIraCphLGU9YitoKihhKzEpLGY9YisxK2gqKGErMSksZz1iKzEraCphLGk9bmV3IFRIUkVFLlZlY3RvcjIoYi9jLDEtYS9kKSxrPW5ldyBUSFJFRS5WZWN0b3IyKGIvYywxLShhKzEpL1xuZCkscD1uZXcgVEhSRUUuVmVjdG9yMigoYisxKS9jLDEtKGErMSkvZCksdD1uZXcgVEhSRUUuVmVjdG9yMigoYisxKS9jLDEtYS9kKSxsPW5ldyBUSFJFRS5GYWNlMyhsLGUsZyk7bC5ub3JtYWwuY29weShtKTtsLnZlcnRleE5vcm1hbHMucHVzaChtLmNsb25lKCksbS5jbG9uZSgpLG0uY2xvbmUoKSk7dGhpcy5mYWNlcy5wdXNoKGwpO3RoaXMuZmFjZVZlcnRleFV2c1swXS5wdXNoKFtpLGssdF0pO2w9bmV3IFRIUkVFLkZhY2UzKGUsZixnKTtsLm5vcm1hbC5jb3B5KG0pO2wudmVydGV4Tm9ybWFscy5wdXNoKG0uY2xvbmUoKSxtLmNsb25lKCksbS5jbG9uZSgpKTt0aGlzLmZhY2VzLnB1c2gobCk7dGhpcy5mYWNlVmVydGV4VXZzWzBdLnB1c2goW2suY2xvbmUoKSxwLHQuY2xvbmUoKV0pfXRoaXMuY29tcHV0ZUNlbnRyb2lkcygpfTtUSFJFRS5QbGFuZUdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuUmluZ0dlb21ldHJ5PWZ1bmN0aW9uKGEsYixjLGQsZSxmKXtUSFJFRS5HZW9tZXRyeS5jYWxsKHRoaXMpO2Zvcih2YXIgYT1hfHwwLGI9Ynx8NTAsZT12b2lkIDAhPT1lP2U6MCxmPXZvaWQgMCE9PWY/ZjoyKk1hdGguUEksYz12b2lkIDAhPT1jP01hdGgubWF4KDMsYyk6OCxkPXZvaWQgMCE9PWQ/TWF0aC5tYXgoMyxkKTo4LGgsZz1bXSxpPWEsaz0oYi1hKS9kLGE9MDthPD1kO2ErKyl7Zm9yKGg9MDtoPD1jO2grKyl7dmFyIG09bmV3IFRIUkVFLlZlY3RvcjMsbD1lK2gvYypmO20ueD1pKk1hdGguY29zKGwpO20ueT1pKk1hdGguc2luKGwpO3RoaXMudmVydGljZXMucHVzaChtKTtnLnB1c2gobmV3IFRIUkVFLlZlY3RvcjIoKG0ueC9iKzEpLzIsKG0ueS9iKzEpLzIpKX1pKz1rfWI9bmV3IFRIUkVFLlZlY3RvcjMoMCwwLDEpO2ZvcihhPTA7YTxkO2ErKyl7ZT1hKmM7Zm9yKGg9MDtoPD1jO2grKylsPWgrZSxmPWwrYSxrPWwrYythLG09bCtjKzErYSx0aGlzLmZhY2VzLnB1c2gobmV3IFRIUkVFLkZhY2UzKGYsXG5rLG0sW2IuY2xvbmUoKSxiLmNsb25lKCksYi5jbG9uZSgpXSkpLHRoaXMuZmFjZVZlcnRleFV2c1swXS5wdXNoKFtnW2ZdLmNsb25lKCksZ1trXS5jbG9uZSgpLGdbbV0uY2xvbmUoKV0pLGY9bCthLGs9bCtjKzErYSxtPWwrMSthLHRoaXMuZmFjZXMucHVzaChuZXcgVEhSRUUuRmFjZTMoZixrLG0sW2IuY2xvbmUoKSxiLmNsb25lKCksYi5jbG9uZSgpXSkpLHRoaXMuZmFjZVZlcnRleFV2c1swXS5wdXNoKFtnW2ZdLmNsb25lKCksZ1trXS5jbG9uZSgpLGdbbV0uY2xvbmUoKV0pfXRoaXMuY29tcHV0ZUNlbnRyb2lkcygpO3RoaXMuY29tcHV0ZUZhY2VOb3JtYWxzKCk7dGhpcy5ib3VuZGluZ1NwaGVyZT1uZXcgVEhSRUUuU3BoZXJlKG5ldyBUSFJFRS5WZWN0b3IzLGkpfTtUSFJFRS5SaW5nR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5TcGhlcmVHZW9tZXRyeT1mdW5jdGlvbihhLGIsYyxkLGUsZixoKXtUSFJFRS5HZW9tZXRyeS5jYWxsKHRoaXMpO3RoaXMucmFkaXVzPWE9YXx8NTA7dGhpcy53aWR0aFNlZ21lbnRzPWI9TWF0aC5tYXgoMyxNYXRoLmZsb29yKGIpfHw4KTt0aGlzLmhlaWdodFNlZ21lbnRzPWM9TWF0aC5tYXgoMixNYXRoLmZsb29yKGMpfHw2KTt0aGlzLnBoaVN0YXJ0PWQ9dm9pZCAwIT09ZD9kOjA7dGhpcy5waGlMZW5ndGg9ZT12b2lkIDAhPT1lP2U6MipNYXRoLlBJO3RoaXMudGhldGFTdGFydD1mPXZvaWQgMCE9PWY/ZjowO3RoaXMudGhldGFMZW5ndGg9aD12b2lkIDAhPT1oP2g6TWF0aC5QSTt2YXIgZyxpLGs9W10sbT1bXTtmb3IoaT0wO2k8PWM7aSsrKXt2YXIgbD1bXSxwPVtdO2ZvcihnPTA7Zzw9YjtnKyspe3ZhciB0PWcvYixzPWkvYyxxPW5ldyBUSFJFRS5WZWN0b3IzO3EueD0tYSpNYXRoLmNvcyhkK3QqZSkqTWF0aC5zaW4oZitzKmgpO3EueT1hKk1hdGguY29zKGYrcypoKTtcbnEuej1hKk1hdGguc2luKGQrdCplKSpNYXRoLnNpbihmK3MqaCk7dGhpcy52ZXJ0aWNlcy5wdXNoKHEpO2wucHVzaCh0aGlzLnZlcnRpY2VzLmxlbmd0aC0xKTtwLnB1c2gobmV3IFRIUkVFLlZlY3RvcjIodCwxLXMpKX1rLnB1c2gobCk7bS5wdXNoKHApfWZvcihpPTA7aTx0aGlzLmhlaWdodFNlZ21lbnRzO2krKylmb3IoZz0wO2c8dGhpcy53aWR0aFNlZ21lbnRzO2crKyl7dmFyIGI9a1tpXVtnKzFdLGM9a1tpXVtnXSxkPWtbaSsxXVtnXSxlPWtbaSsxXVtnKzFdLGY9dGhpcy52ZXJ0aWNlc1tiXS5jbG9uZSgpLm5vcm1hbGl6ZSgpLGg9dGhpcy52ZXJ0aWNlc1tjXS5jbG9uZSgpLm5vcm1hbGl6ZSgpLGw9dGhpcy52ZXJ0aWNlc1tkXS5jbG9uZSgpLm5vcm1hbGl6ZSgpLHA9dGhpcy52ZXJ0aWNlc1tlXS5jbG9uZSgpLm5vcm1hbGl6ZSgpLHQ9bVtpXVtnKzFdLmNsb25lKCkscz1tW2ldW2ddLmNsb25lKCkscT1tW2krMV1bZ10uY2xvbmUoKSxuPW1baSsxXVtnKzFdLmNsb25lKCk7TWF0aC5hYnModGhpcy52ZXJ0aWNlc1tiXS55KT09PVxudGhpcy5yYWRpdXM/KHQueD0odC54K3MueCkvMix0aGlzLmZhY2VzLnB1c2gobmV3IFRIUkVFLkZhY2UzKGIsZCxlLFtmLGwscF0pKSx0aGlzLmZhY2VWZXJ0ZXhVdnNbMF0ucHVzaChbdCxxLG5dKSk6TWF0aC5hYnModGhpcy52ZXJ0aWNlc1tkXS55KT09PXRoaXMucmFkaXVzPyhxLng9KHEueCtuLngpLzIsdGhpcy5mYWNlcy5wdXNoKG5ldyBUSFJFRS5GYWNlMyhiLGMsZCxbZixoLGxdKSksdGhpcy5mYWNlVmVydGV4VXZzWzBdLnB1c2goW3QscyxxXSkpOih0aGlzLmZhY2VzLnB1c2gobmV3IFRIUkVFLkZhY2UzKGIsYyxlLFtmLGgscF0pKSx0aGlzLmZhY2VWZXJ0ZXhVdnNbMF0ucHVzaChbdCxzLG5dKSx0aGlzLmZhY2VzLnB1c2gobmV3IFRIUkVFLkZhY2UzKGMsZCxlLFtoLmNsb25lKCksbCxwLmNsb25lKCldKSksdGhpcy5mYWNlVmVydGV4VXZzWzBdLnB1c2goW3MuY2xvbmUoKSxxLG4uY2xvbmUoKV0pKX10aGlzLmNvbXB1dGVDZW50cm9pZHMoKTt0aGlzLmNvbXB1dGVGYWNlTm9ybWFscygpO1xudGhpcy5ib3VuZGluZ1NwaGVyZT1uZXcgVEhSRUUuU3BoZXJlKG5ldyBUSFJFRS5WZWN0b3IzLGEpfTtUSFJFRS5TcGhlcmVHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5HZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLlRleHRHZW9tZXRyeT1mdW5jdGlvbihhLGIpe3ZhciBiPWJ8fHt9LGM9VEhSRUUuRm9udFV0aWxzLmdlbmVyYXRlU2hhcGVzKGEsYik7Yi5hbW91bnQ9dm9pZCAwIT09Yi5oZWlnaHQ/Yi5oZWlnaHQ6NTA7dm9pZCAwPT09Yi5iZXZlbFRoaWNrbmVzcyYmKGIuYmV2ZWxUaGlja25lc3M9MTApO3ZvaWQgMD09PWIuYmV2ZWxTaXplJiYoYi5iZXZlbFNpemU9OCk7dm9pZCAwPT09Yi5iZXZlbEVuYWJsZWQmJihiLmJldmVsRW5hYmxlZD0hMSk7VEhSRUUuRXh0cnVkZUdlb21ldHJ5LmNhbGwodGhpcyxjLGIpfTtUSFJFRS5UZXh0R2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuRXh0cnVkZUdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuVG9ydXNHZW9tZXRyeT1mdW5jdGlvbihhLGIsYyxkLGUpe1RIUkVFLkdlb21ldHJ5LmNhbGwodGhpcyk7dGhpcy5yYWRpdXM9YXx8MTAwO3RoaXMudHViZT1ifHw0MDt0aGlzLnJhZGlhbFNlZ21lbnRzPWN8fDg7dGhpcy50dWJ1bGFyU2VnbWVudHM9ZHx8Njt0aGlzLmFyYz1lfHwyKk1hdGguUEk7ZT1uZXcgVEhSRUUuVmVjdG9yMzthPVtdO2I9W107Zm9yKGM9MDtjPD10aGlzLnJhZGlhbFNlZ21lbnRzO2MrKylmb3IoZD0wO2Q8PXRoaXMudHVidWxhclNlZ21lbnRzO2QrKyl7dmFyIGY9ZC90aGlzLnR1YnVsYXJTZWdtZW50cyp0aGlzLmFyYyxoPTIqYy90aGlzLnJhZGlhbFNlZ21lbnRzKk1hdGguUEk7ZS54PXRoaXMucmFkaXVzKk1hdGguY29zKGYpO2UueT10aGlzLnJhZGl1cypNYXRoLnNpbihmKTt2YXIgZz1uZXcgVEhSRUUuVmVjdG9yMztnLng9KHRoaXMucmFkaXVzK3RoaXMudHViZSpNYXRoLmNvcyhoKSkqTWF0aC5jb3MoZik7Zy55PSh0aGlzLnJhZGl1cyt0aGlzLnR1YmUqXG5NYXRoLmNvcyhoKSkqTWF0aC5zaW4oZik7Zy56PXRoaXMudHViZSpNYXRoLnNpbihoKTt0aGlzLnZlcnRpY2VzLnB1c2goZyk7YS5wdXNoKG5ldyBUSFJFRS5WZWN0b3IyKGQvdGhpcy50dWJ1bGFyU2VnbWVudHMsYy90aGlzLnJhZGlhbFNlZ21lbnRzKSk7Yi5wdXNoKGcuY2xvbmUoKS5zdWIoZSkubm9ybWFsaXplKCkpfWZvcihjPTE7Yzw9dGhpcy5yYWRpYWxTZWdtZW50cztjKyspZm9yKGQ9MTtkPD10aGlzLnR1YnVsYXJTZWdtZW50cztkKyspe3ZhciBlPSh0aGlzLnR1YnVsYXJTZWdtZW50cysxKSpjK2QtMSxmPSh0aGlzLnR1YnVsYXJTZWdtZW50cysxKSooYy0xKStkLTEsaD0odGhpcy50dWJ1bGFyU2VnbWVudHMrMSkqKGMtMSkrZCxnPSh0aGlzLnR1YnVsYXJTZWdtZW50cysxKSpjK2QsaT1uZXcgVEhSRUUuRmFjZTMoZSxmLGcsW2JbZV0sYltmXSxiW2ddXSk7aS5ub3JtYWwuYWRkKGJbZV0pO2kubm9ybWFsLmFkZChiW2ZdKTtpLm5vcm1hbC5hZGQoYltnXSk7aS5ub3JtYWwubm9ybWFsaXplKCk7XG50aGlzLmZhY2VzLnB1c2goaSk7dGhpcy5mYWNlVmVydGV4VXZzWzBdLnB1c2goW2FbZV0uY2xvbmUoKSxhW2ZdLmNsb25lKCksYVtnXS5jbG9uZSgpXSk7aT1uZXcgVEhSRUUuRmFjZTMoZixoLGcsW2JbZl0sYltoXSxiW2ddXSk7aS5ub3JtYWwuYWRkKGJbZl0pO2kubm9ybWFsLmFkZChiW2hdKTtpLm5vcm1hbC5hZGQoYltnXSk7aS5ub3JtYWwubm9ybWFsaXplKCk7dGhpcy5mYWNlcy5wdXNoKGkpO3RoaXMuZmFjZVZlcnRleFV2c1swXS5wdXNoKFthW2ZdLmNsb25lKCksYVtoXS5jbG9uZSgpLGFbZ10uY2xvbmUoKV0pfXRoaXMuY29tcHV0ZUNlbnRyb2lkcygpfTtUSFJFRS5Ub3J1c0dlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuVG9ydXNLbm90R2VvbWV0cnk9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsaCl7ZnVuY3Rpb24gZyhhLGIsYyxkLGUpe3ZhciBmPU1hdGguY29zKGEpLGc9TWF0aC5zaW4oYSksYT1iL2MqYSxiPU1hdGguY29zKGEpLGY9MC41KihkKigyK2IpKSpmLGc9MC41KmQqKDIrYikqZyxkPTAuNSplKmQqTWF0aC5zaW4oYSk7cmV0dXJuIG5ldyBUSFJFRS5WZWN0b3IzKGYsZyxkKX1USFJFRS5HZW9tZXRyeS5jYWxsKHRoaXMpO3RoaXMucmFkaXVzPWF8fDEwMDt0aGlzLnR1YmU9Ynx8NDA7dGhpcy5yYWRpYWxTZWdtZW50cz1jfHw2NDt0aGlzLnR1YnVsYXJTZWdtZW50cz1kfHw4O3RoaXMucD1lfHwyO3RoaXMucT1mfHwzO3RoaXMuaGVpZ2h0U2NhbGU9aHx8MTt0aGlzLmdyaWQ9QXJyYXkodGhpcy5yYWRpYWxTZWdtZW50cyk7Yz1uZXcgVEhSRUUuVmVjdG9yMztkPW5ldyBUSFJFRS5WZWN0b3IzO2U9bmV3IFRIUkVFLlZlY3RvcjM7Zm9yKGE9MDthPHRoaXMucmFkaWFsU2VnbWVudHM7KythKXt0aGlzLmdyaWRbYV09XG5BcnJheSh0aGlzLnR1YnVsYXJTZWdtZW50cyk7Yj0yKihhL3RoaXMucmFkaWFsU2VnbWVudHMpKnRoaXMucCpNYXRoLlBJO2Y9ZyhiLHRoaXMucSx0aGlzLnAsdGhpcy5yYWRpdXMsdGhpcy5oZWlnaHRTY2FsZSk7Yj1nKGIrMC4wMSx0aGlzLnEsdGhpcy5wLHRoaXMucmFkaXVzLHRoaXMuaGVpZ2h0U2NhbGUpO2Muc3ViVmVjdG9ycyhiLGYpO2QuYWRkVmVjdG9ycyhiLGYpO2UuY3Jvc3NWZWN0b3JzKGMsZCk7ZC5jcm9zc1ZlY3RvcnMoZSxjKTtlLm5vcm1hbGl6ZSgpO2Qubm9ybWFsaXplKCk7Zm9yKGI9MDtiPHRoaXMudHVidWxhclNlZ21lbnRzOysrYil7dmFyIGk9MiooYi90aGlzLnR1YnVsYXJTZWdtZW50cykqTWF0aC5QSSxoPS10aGlzLnR1YmUqTWF0aC5jb3MoaSksaT10aGlzLnR1YmUqTWF0aC5zaW4oaSksaz1uZXcgVEhSRUUuVmVjdG9yMztrLng9Zi54K2gqZC54K2kqZS54O2sueT1mLnkraCpkLnkraSplLnk7ay56PWYueitoKmQueitpKmUuejt0aGlzLmdyaWRbYV1bYl09XG50aGlzLnZlcnRpY2VzLnB1c2goayktMX19Zm9yKGE9MDthPHRoaXMucmFkaWFsU2VnbWVudHM7KythKWZvcihiPTA7Yjx0aGlzLnR1YnVsYXJTZWdtZW50czsrK2Ipe3ZhciBlPShhKzEpJXRoaXMucmFkaWFsU2VnbWVudHMsZj0oYisxKSV0aGlzLnR1YnVsYXJTZWdtZW50cyxjPXRoaXMuZ3JpZFthXVtiXSxkPXRoaXMuZ3JpZFtlXVtiXSxlPXRoaXMuZ3JpZFtlXVtmXSxmPXRoaXMuZ3JpZFthXVtmXSxoPW5ldyBUSFJFRS5WZWN0b3IyKGEvdGhpcy5yYWRpYWxTZWdtZW50cyxiL3RoaXMudHVidWxhclNlZ21lbnRzKSxpPW5ldyBUSFJFRS5WZWN0b3IyKChhKzEpL3RoaXMucmFkaWFsU2VnbWVudHMsYi90aGlzLnR1YnVsYXJTZWdtZW50cyksaz1uZXcgVEhSRUUuVmVjdG9yMigoYSsxKS90aGlzLnJhZGlhbFNlZ21lbnRzLChiKzEpL3RoaXMudHVidWxhclNlZ21lbnRzKSxtPW5ldyBUSFJFRS5WZWN0b3IyKGEvdGhpcy5yYWRpYWxTZWdtZW50cywoYisxKS90aGlzLnR1YnVsYXJTZWdtZW50cyk7XG50aGlzLmZhY2VzLnB1c2gobmV3IFRIUkVFLkZhY2UzKGMsZCxmKSk7dGhpcy5mYWNlVmVydGV4VXZzWzBdLnB1c2goW2gsaSxtXSk7dGhpcy5mYWNlcy5wdXNoKG5ldyBUSFJFRS5GYWNlMyhkLGUsZikpO3RoaXMuZmFjZVZlcnRleFV2c1swXS5wdXNoKFtpLmNsb25lKCksayxtLmNsb25lKCldKX10aGlzLmNvbXB1dGVDZW50cm9pZHMoKTt0aGlzLmNvbXB1dGVGYWNlTm9ybWFscygpO3RoaXMuY29tcHV0ZVZlcnRleE5vcm1hbHMoKX07VEhSRUUuVG9ydXNLbm90R2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5UdWJlR2VvbWV0cnk9ZnVuY3Rpb24oYSxiLGMsZCxlKXtUSFJFRS5HZW9tZXRyeS5jYWxsKHRoaXMpO3RoaXMucGF0aD1hO3RoaXMuc2VnbWVudHM9Ynx8NjQ7dGhpcy5yYWRpdXM9Y3x8MTt0aGlzLnJhZGlhbFNlZ21lbnRzPWR8fDg7dGhpcy5jbG9zZWQ9ZXx8ITE7dGhpcy5ncmlkPVtdO3ZhciBmLGgsZD10aGlzLnNlZ21lbnRzKzEsZyxpLGssZT1uZXcgVEhSRUUuVmVjdG9yMyxtLGwsYj1uZXcgVEhSRUUuVHViZUdlb21ldHJ5LkZyZW5ldEZyYW1lcyh0aGlzLnBhdGgsdGhpcy5zZWdtZW50cyx0aGlzLmNsb3NlZCk7bT1iLm5vcm1hbHM7bD1iLmJpbm9ybWFsczt0aGlzLnRhbmdlbnRzPWIudGFuZ2VudHM7dGhpcy5ub3JtYWxzPW07dGhpcy5iaW5vcm1hbHM9bDtmb3IoYj0wO2I8ZDtiKyspe3RoaXMuZ3JpZFtiXT1bXTtjPWIvKGQtMSk7az1hLmdldFBvaW50QXQoYyk7Zj1tW2JdO2g9bFtiXTtmb3IoYz0wO2M8dGhpcy5yYWRpYWxTZWdtZW50cztjKyspZz0yKihjL3RoaXMucmFkaWFsU2VnbWVudHMpKlxuTWF0aC5QSSxpPS10aGlzLnJhZGl1cypNYXRoLmNvcyhnKSxnPXRoaXMucmFkaXVzKk1hdGguc2luKGcpLGUuY29weShrKSxlLngrPWkqZi54K2cqaC54LGUueSs9aSpmLnkrZypoLnksZS56Kz1pKmYueitnKmgueix0aGlzLmdyaWRbYl1bY109dGhpcy52ZXJ0aWNlcy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IzKGUueCxlLnksZS56KSktMX1mb3IoYj0wO2I8dGhpcy5zZWdtZW50cztiKyspZm9yKGM9MDtjPHRoaXMucmFkaWFsU2VnbWVudHM7YysrKWU9dGhpcy5jbG9zZWQ/KGIrMSkldGhpcy5zZWdtZW50czpiKzEsbT0oYysxKSV0aGlzLnJhZGlhbFNlZ21lbnRzLGE9dGhpcy5ncmlkW2JdW2NdLGQ9dGhpcy5ncmlkW2VdW2NdLGU9dGhpcy5ncmlkW2VdW21dLG09dGhpcy5ncmlkW2JdW21dLGw9bmV3IFRIUkVFLlZlY3RvcjIoYi90aGlzLnNlZ21lbnRzLGMvdGhpcy5yYWRpYWxTZWdtZW50cyksZj1uZXcgVEhSRUUuVmVjdG9yMigoYisxKS90aGlzLnNlZ21lbnRzLGMvdGhpcy5yYWRpYWxTZWdtZW50cyksXG5oPW5ldyBUSFJFRS5WZWN0b3IyKChiKzEpL3RoaXMuc2VnbWVudHMsKGMrMSkvdGhpcy5yYWRpYWxTZWdtZW50cyksaT1uZXcgVEhSRUUuVmVjdG9yMihiL3RoaXMuc2VnbWVudHMsKGMrMSkvdGhpcy5yYWRpYWxTZWdtZW50cyksdGhpcy5mYWNlcy5wdXNoKG5ldyBUSFJFRS5GYWNlMyhhLGQsbSkpLHRoaXMuZmFjZVZlcnRleFV2c1swXS5wdXNoKFtsLGYsaV0pLHRoaXMuZmFjZXMucHVzaChuZXcgVEhSRUUuRmFjZTMoZCxlLG0pKSx0aGlzLmZhY2VWZXJ0ZXhVdnNbMF0ucHVzaChbZi5jbG9uZSgpLGgsaS5jbG9uZSgpXSk7dGhpcy5jb21wdXRlQ2VudHJvaWRzKCk7dGhpcy5jb21wdXRlRmFjZU5vcm1hbHMoKTt0aGlzLmNvbXB1dGVWZXJ0ZXhOb3JtYWxzKCl9O1RIUkVFLlR1YmVHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5HZW9tZXRyeS5wcm90b3R5cGUpO1xuVEhSRUUuVHViZUdlb21ldHJ5LkZyZW5ldEZyYW1lcz1mdW5jdGlvbihhLGIsYyl7bmV3IFRIUkVFLlZlY3RvcjM7dmFyIGQ9bmV3IFRIUkVFLlZlY3RvcjM7bmV3IFRIUkVFLlZlY3RvcjM7dmFyIGU9W10sZj1bXSxoPVtdLGc9bmV3IFRIUkVFLlZlY3RvcjMsaT1uZXcgVEhSRUUuTWF0cml4NCxiPWIrMSxrLG0sbDt0aGlzLnRhbmdlbnRzPWU7dGhpcy5ub3JtYWxzPWY7dGhpcy5iaW5vcm1hbHM9aDtmb3Ioaz0wO2s8YjtrKyspbT1rLyhiLTEpLGVba109YS5nZXRUYW5nZW50QXQobSksZVtrXS5ub3JtYWxpemUoKTtmWzBdPW5ldyBUSFJFRS5WZWN0b3IzO2hbMF09bmV3IFRIUkVFLlZlY3RvcjM7YT1OdW1iZXIuTUFYX1ZBTFVFO2s9TWF0aC5hYnMoZVswXS54KTttPU1hdGguYWJzKGVbMF0ueSk7bD1NYXRoLmFicyhlWzBdLnopO2s8PWEmJihhPWssZC5zZXQoMSwwLDApKTttPD1hJiYoYT1tLGQuc2V0KDAsMSwwKSk7bDw9YSYmZC5zZXQoMCwwLDEpO2cuY3Jvc3NWZWN0b3JzKGVbMF0sXG5kKS5ub3JtYWxpemUoKTtmWzBdLmNyb3NzVmVjdG9ycyhlWzBdLGcpO2hbMF0uY3Jvc3NWZWN0b3JzKGVbMF0sZlswXSk7Zm9yKGs9MTtrPGI7aysrKWZba109ZltrLTFdLmNsb25lKCksaFtrXT1oW2stMV0uY2xvbmUoKSxnLmNyb3NzVmVjdG9ycyhlW2stMV0sZVtrXSksMUUtNDxnLmxlbmd0aCgpJiYoZy5ub3JtYWxpemUoKSxkPU1hdGguYWNvcyhUSFJFRS5NYXRoLmNsYW1wKGVbay0xXS5kb3QoZVtrXSksLTEsMSkpLGZba10uYXBwbHlNYXRyaXg0KGkubWFrZVJvdGF0aW9uQXhpcyhnLGQpKSksaFtrXS5jcm9zc1ZlY3RvcnMoZVtrXSxmW2tdKTtpZihjKXtkPU1hdGguYWNvcyhUSFJFRS5NYXRoLmNsYW1wKGZbMF0uZG90KGZbYi0xXSksLTEsMSkpO2QvPWItMTswPGVbMF0uZG90KGcuY3Jvc3NWZWN0b3JzKGZbMF0sZltiLTFdKSkmJihkPS1kKTtmb3Ioaz0xO2s8YjtrKyspZltrXS5hcHBseU1hdHJpeDQoaS5tYWtlUm90YXRpb25BeGlzKGVba10sZCprKSksaFtrXS5jcm9zc1ZlY3RvcnMoZVtrXSxcbmZba10pfX07VEhSRUUuUG9seWhlZHJvbkdlb21ldHJ5PWZ1bmN0aW9uKGEsYixjLGQpe2Z1bmN0aW9uIGUoYSl7dmFyIGI9YS5ub3JtYWxpemUoKS5jbG9uZSgpO2IuaW5kZXg9Zy52ZXJ0aWNlcy5wdXNoKGIpLTE7dmFyIGM9TWF0aC5hdGFuMihhLnosLWEueCkvMi9NYXRoLlBJKzAuNSxhPU1hdGguYXRhbjIoLWEueSxNYXRoLnNxcnQoYS54KmEueCthLnoqYS56KSkvTWF0aC5QSSswLjU7Yi51dj1uZXcgVEhSRUUuVmVjdG9yMihjLDEtYSk7cmV0dXJuIGJ9ZnVuY3Rpb24gZihhLGIsYyl7dmFyIGQ9bmV3IFRIUkVFLkZhY2UzKGEuaW5kZXgsYi5pbmRleCxjLmluZGV4LFthLmNsb25lKCksYi5jbG9uZSgpLGMuY2xvbmUoKV0pO2QuY2VudHJvaWQuYWRkKGEpLmFkZChiKS5hZGQoYykuZGl2aWRlU2NhbGFyKDMpO2cuZmFjZXMucHVzaChkKTtkPU1hdGguYXRhbjIoZC5jZW50cm9pZC56LC1kLmNlbnRyb2lkLngpO2cuZmFjZVZlcnRleFV2c1swXS5wdXNoKFtoKGEudXYsYSxkKSxoKGIudXYsYixkKSxcbmgoYy51dixjLGQpXSl9ZnVuY3Rpb24gaChhLGIsYyl7MD5jJiYxPT09YS54JiYoYT1uZXcgVEhSRUUuVmVjdG9yMihhLngtMSxhLnkpKTswPT09Yi54JiYwPT09Yi56JiYoYT1uZXcgVEhSRUUuVmVjdG9yMihjLzIvTWF0aC5QSSswLjUsYS55KSk7cmV0dXJuIGEuY2xvbmUoKX1USFJFRS5HZW9tZXRyeS5jYWxsKHRoaXMpO2Zvcih2YXIgYz1jfHwxLGQ9ZHx8MCxnPXRoaXMsaT0wLGs9YS5sZW5ndGg7aTxrO2krKyllKG5ldyBUSFJFRS5WZWN0b3IzKGFbaV1bMF0sYVtpXVsxXSxhW2ldWzJdKSk7Zm9yKHZhciBtPXRoaXMudmVydGljZXMsYT1bXSxpPTAsaz1iLmxlbmd0aDtpPGs7aSsrKXt2YXIgbD1tW2JbaV1bMF1dLHA9bVtiW2ldWzFdXSx0PW1bYltpXVsyXV07YVtpXT1uZXcgVEhSRUUuRmFjZTMobC5pbmRleCxwLmluZGV4LHQuaW5kZXgsW2wuY2xvbmUoKSxwLmNsb25lKCksdC5jbG9uZSgpXSl9aT0wO2ZvcihrPWEubGVuZ3RoO2k8aztpKyspe3A9YVtpXTttPWQ7Yj1NYXRoLnBvdygyLFxubSk7TWF0aC5wb3coNCxtKTtmb3IodmFyIG09ZShnLnZlcnRpY2VzW3AuYV0pLGw9ZShnLnZlcnRpY2VzW3AuYl0pLHM9ZShnLnZlcnRpY2VzW3AuY10pLHA9W10sdD0wO3Q8PWI7dCsrKXtwW3RdPVtdO2Zvcih2YXIgcT1lKG0uY2xvbmUoKS5sZXJwKHMsdC9iKSksbj1lKGwuY2xvbmUoKS5sZXJwKHMsdC9iKSksdT1iLXQscj0wO3I8PXU7cisrKXBbdF1bcl09MD09ciYmdD09Yj9xOmUocS5jbG9uZSgpLmxlcnAobixyL3UpKX1mb3IodD0wO3Q8Yjt0KyspZm9yKHI9MDtyPDIqKGItdCktMTtyKyspbT1NYXRoLmZsb29yKHIvMiksMD09ciUyP2YocFt0XVttKzFdLHBbdCsxXVttXSxwW3RdW21dKTpmKHBbdF1bbSsxXSxwW3QrMV1bbSsxXSxwW3QrMV1bbV0pfWk9MDtmb3Ioaz10aGlzLmZhY2VWZXJ0ZXhVdnNbMF0ubGVuZ3RoO2k8aztpKyspZD10aGlzLmZhY2VWZXJ0ZXhVdnNbMF1baV0sYT1kWzBdLngsYj1kWzFdLngsbT1kWzJdLngsbD1NYXRoLm1heChhLE1hdGgubWF4KGIsbSkpLFxucD1NYXRoLm1pbihhLE1hdGgubWluKGIsbSkpLDAuOTxsJiYwLjE+cCYmKDAuMj5hJiYoZFswXS54Kz0xKSwwLjI+YiYmKGRbMV0ueCs9MSksMC4yPm0mJihkWzJdLngrPTEpKTtpPTA7Zm9yKGs9dGhpcy52ZXJ0aWNlcy5sZW5ndGg7aTxrO2krKyl0aGlzLnZlcnRpY2VzW2ldLm11bHRpcGx5U2NhbGFyKGMpO3RoaXMubWVyZ2VWZXJ0aWNlcygpO3RoaXMuY29tcHV0ZUNlbnRyb2lkcygpO3RoaXMuY29tcHV0ZUZhY2VOb3JtYWxzKCk7dGhpcy5ib3VuZGluZ1NwaGVyZT1uZXcgVEhSRUUuU3BoZXJlKG5ldyBUSFJFRS5WZWN0b3IzLGMpfTtUSFJFRS5Qb2x5aGVkcm9uR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5JY29zYWhlZHJvbkdlb21ldHJ5PWZ1bmN0aW9uKGEsYil7dGhpcy5yYWRpdXM9YTt0aGlzLmRldGFpbD1iO3ZhciBjPSgxK01hdGguc3FydCg1KSkvMjtUSFJFRS5Qb2x5aGVkcm9uR2VvbWV0cnkuY2FsbCh0aGlzLFtbLTEsYywwXSxbMSxjLDBdLFstMSwtYywwXSxbMSwtYywwXSxbMCwtMSxjXSxbMCwxLGNdLFswLC0xLC1jXSxbMCwxLC1jXSxbYywwLC0xXSxbYywwLDFdLFstYywwLC0xXSxbLWMsMCwxXV0sW1swLDExLDVdLFswLDUsMV0sWzAsMSw3XSxbMCw3LDEwXSxbMCwxMCwxMV0sWzEsNSw5XSxbNSwxMSw0XSxbMTEsMTAsMl0sWzEwLDcsNl0sWzcsMSw4XSxbMyw5LDRdLFszLDQsMl0sWzMsMiw2XSxbMyw2LDhdLFszLDgsOV0sWzQsOSw1XSxbMiw0LDExXSxbNiwyLDEwXSxbOCw2LDddLFs5LDgsMV1dLGEsYil9O1RIUkVFLkljb3NhaGVkcm9uR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5PY3RhaGVkcm9uR2VvbWV0cnk9ZnVuY3Rpb24oYSxiKXtUSFJFRS5Qb2x5aGVkcm9uR2VvbWV0cnkuY2FsbCh0aGlzLFtbMSwwLDBdLFstMSwwLDBdLFswLDEsMF0sWzAsLTEsMF0sWzAsMCwxXSxbMCwwLC0xXV0sW1swLDIsNF0sWzAsNCwzXSxbMCwzLDVdLFswLDUsMl0sWzEsMiw1XSxbMSw1LDNdLFsxLDMsNF0sWzEsNCwyXV0sYSxiKX07VEhSRUUuT2N0YWhlZHJvbkdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuVGV0cmFoZWRyb25HZW9tZXRyeT1mdW5jdGlvbihhLGIpe1RIUkVFLlBvbHloZWRyb25HZW9tZXRyeS5jYWxsKHRoaXMsW1sxLDEsMV0sWy0xLC0xLDFdLFstMSwxLC0xXSxbMSwtMSwtMV1dLFtbMiwxLDBdLFswLDMsMl0sWzEsMywwXSxbMiwzLDFdXSxhLGIpfTtUSFJFRS5UZXRyYWhlZHJvbkdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuUGFyYW1ldHJpY0dlb21ldHJ5PWZ1bmN0aW9uKGEsYixjKXtUSFJFRS5HZW9tZXRyeS5jYWxsKHRoaXMpO3ZhciBkPXRoaXMudmVydGljZXMsZT10aGlzLmZhY2VzLGY9dGhpcy5mYWNlVmVydGV4VXZzWzBdLGgsZyxpLGssbT1iKzE7Zm9yKGg9MDtoPD1jO2grKyl7az1oL2M7Zm9yKGc9MDtnPD1iO2crKylpPWcvYixpPWEoaSxrKSxkLnB1c2goaSl9dmFyIGwscCx0LHM7Zm9yKGg9MDtoPGM7aCsrKWZvcihnPTA7ZzxiO2crKylhPWgqbStnLGQ9aCptK2crMSxrPShoKzEpKm0rZysxLGk9KGgrMSkqbStnLGw9bmV3IFRIUkVFLlZlY3RvcjIoZy9iLGgvYykscD1uZXcgVEhSRUUuVmVjdG9yMigoZysxKS9iLGgvYyksdD1uZXcgVEhSRUUuVmVjdG9yMigoZysxKS9iLChoKzEpL2MpLHM9bmV3IFRIUkVFLlZlY3RvcjIoZy9iLChoKzEpL2MpLGUucHVzaChuZXcgVEhSRUUuRmFjZTMoYSxkLGkpKSxmLnB1c2goW2wscCxzXSksZS5wdXNoKG5ldyBUSFJFRS5GYWNlMyhkLGssaSkpLFxuZi5wdXNoKFtwLmNsb25lKCksdCxzLmNsb25lKCldKTt0aGlzLmNvbXB1dGVDZW50cm9pZHMoKTt0aGlzLmNvbXB1dGVGYWNlTm9ybWFscygpO3RoaXMuY29tcHV0ZVZlcnRleE5vcm1hbHMoKX07VEhSRUUuUGFyYW1ldHJpY0dlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuQXhpc0hlbHBlcj1mdW5jdGlvbihhKXt2YXIgYT1hfHwxLGI9bmV3IFRIUkVFLkdlb21ldHJ5O2IudmVydGljZXMucHVzaChuZXcgVEhSRUUuVmVjdG9yMyxuZXcgVEhSRUUuVmVjdG9yMyhhLDAsMCksbmV3IFRIUkVFLlZlY3RvcjMsbmV3IFRIUkVFLlZlY3RvcjMoMCxhLDApLG5ldyBUSFJFRS5WZWN0b3IzLG5ldyBUSFJFRS5WZWN0b3IzKDAsMCxhKSk7Yi5jb2xvcnMucHVzaChuZXcgVEhSRUUuQ29sb3IoMTY3MTE2ODApLG5ldyBUSFJFRS5Db2xvcigxNjc1NTIwMCksbmV3IFRIUkVFLkNvbG9yKDY1MjgwKSxuZXcgVEhSRUUuQ29sb3IoMTEyMDY0MDApLG5ldyBUSFJFRS5Db2xvcigyNTUpLG5ldyBUSFJFRS5Db2xvcig0Mzc3NSkpO2E9bmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKHt2ZXJ0ZXhDb2xvcnM6VEhSRUUuVmVydGV4Q29sb3JzfSk7VEhSRUUuTGluZS5jYWxsKHRoaXMsYixhLFRIUkVFLkxpbmVQaWVjZXMpfTtcblRIUkVFLkF4aXNIZWxwZXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTGluZS5wcm90b3R5cGUpO1RIUkVFLkFycm93SGVscGVyPWZ1bmN0aW9uKGEsYixjLGQsZSxmKXtUSFJFRS5PYmplY3QzRC5jYWxsKHRoaXMpO3ZvaWQgMD09PWQmJihkPTE2Nzc2OTYwKTt2b2lkIDA9PT1jJiYoYz0xKTt2b2lkIDA9PT1lJiYoZT0wLjIqYyk7dm9pZCAwPT09ZiYmKGY9MC4yKmUpO3RoaXMucG9zaXRpb249YjtiPW5ldyBUSFJFRS5HZW9tZXRyeTtiLnZlcnRpY2VzLnB1c2gobmV3IFRIUkVFLlZlY3RvcjMoMCwwLDApKTtiLnZlcnRpY2VzLnB1c2gobmV3IFRIUkVFLlZlY3RvcjMoMCwxLDApKTt0aGlzLmxpbmU9bmV3IFRIUkVFLkxpbmUoYixuZXcgVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWwoe2NvbG9yOmR9KSk7dGhpcy5saW5lLm1hdHJpeEF1dG9VcGRhdGU9ITE7dGhpcy5hZGQodGhpcy5saW5lKTtiPW5ldyBUSFJFRS5DeWxpbmRlckdlb21ldHJ5KDAsMC41LDEsNSwxKTtiLmFwcGx5TWF0cml4KChuZXcgVEhSRUUuTWF0cml4NCkubWFrZVRyYW5zbGF0aW9uKDAsLTAuNSwwKSk7dGhpcy5jb25lPVxubmV3IFRIUkVFLk1lc2goYixuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe2NvbG9yOmR9KSk7dGhpcy5jb25lLm1hdHJpeEF1dG9VcGRhdGU9ITE7dGhpcy5hZGQodGhpcy5jb25lKTt0aGlzLnNldERpcmVjdGlvbihhKTt0aGlzLnNldExlbmd0aChjLGUsZil9O1RIUkVFLkFycm93SGVscGVyLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSk7VEhSRUUuQXJyb3dIZWxwZXIucHJvdG90eXBlLnNldERpcmVjdGlvbj1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzLGI7cmV0dXJuIGZ1bmN0aW9uKGMpezAuOTk5OTk8Yy55P3RoaXMucXVhdGVybmlvbi5zZXQoMCwwLDAsMSk6LTAuOTk5OTk+Yy55P3RoaXMucXVhdGVybmlvbi5zZXQoMSwwLDAsMCk6KGEuc2V0KGMueiwwLC1jLngpLm5vcm1hbGl6ZSgpLGI9TWF0aC5hY29zKGMueSksdGhpcy5xdWF0ZXJuaW9uLnNldEZyb21BeGlzQW5nbGUoYSxiKSl9fSgpO1xuVEhSRUUuQXJyb3dIZWxwZXIucHJvdG90eXBlLnNldExlbmd0aD1mdW5jdGlvbihhLGIsYyl7dm9pZCAwPT09YiYmKGI9MC4yKmEpO3ZvaWQgMD09PWMmJihjPTAuMipiKTt0aGlzLmxpbmUuc2NhbGUuc2V0KDEsYSwxKTt0aGlzLmxpbmUudXBkYXRlTWF0cml4KCk7dGhpcy5jb25lLnNjYWxlLnNldChjLGIsYyk7dGhpcy5jb25lLnBvc2l0aW9uLnk9YTt0aGlzLmNvbmUudXBkYXRlTWF0cml4KCl9O1RIUkVFLkFycm93SGVscGVyLnByb3RvdHlwZS5zZXRDb2xvcj1mdW5jdGlvbihhKXt0aGlzLmxpbmUubWF0ZXJpYWwuY29sb3Iuc2V0SGV4KGEpO3RoaXMuY29uZS5tYXRlcmlhbC5jb2xvci5zZXRIZXgoYSl9O1RIUkVFLkJveEhlbHBlcj1mdW5jdGlvbihhKXt2YXIgYj1bbmV3IFRIUkVFLlZlY3RvcjMoMSwxLDEpLG5ldyBUSFJFRS5WZWN0b3IzKC0xLDEsMSksbmV3IFRIUkVFLlZlY3RvcjMoLTEsLTEsMSksbmV3IFRIUkVFLlZlY3RvcjMoMSwtMSwxKSxuZXcgVEhSRUUuVmVjdG9yMygxLDEsLTEpLG5ldyBUSFJFRS5WZWN0b3IzKC0xLDEsLTEpLG5ldyBUSFJFRS5WZWN0b3IzKC0xLC0xLC0xKSxuZXcgVEhSRUUuVmVjdG9yMygxLC0xLC0xKV07dGhpcy52ZXJ0aWNlcz1iO3ZhciBjPW5ldyBUSFJFRS5HZW9tZXRyeTtjLnZlcnRpY2VzLnB1c2goYlswXSxiWzFdLGJbMV0sYlsyXSxiWzJdLGJbM10sYlszXSxiWzBdLGJbNF0sYls1XSxiWzVdLGJbNl0sYls2XSxiWzddLGJbN10sYls0XSxiWzBdLGJbNF0sYlsxXSxiWzVdLGJbMl0sYls2XSxiWzNdLGJbN10pO1RIUkVFLkxpbmUuY2FsbCh0aGlzLGMsbmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKHtjb2xvcjoxNjc3Njk2MH0pLFRIUkVFLkxpbmVQaWVjZXMpO1xudm9pZCAwIT09YSYmdGhpcy51cGRhdGUoYSl9O1RIUkVFLkJveEhlbHBlci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5MaW5lLnByb3RvdHlwZSk7XG5USFJFRS5Cb3hIZWxwZXIucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbihhKXt2YXIgYj1hLmdlb21ldHJ5O251bGw9PT1iLmJvdW5kaW5nQm94JiZiLmNvbXB1dGVCb3VuZGluZ0JveCgpO3ZhciBjPWIuYm91bmRpbmdCb3gubWluLGI9Yi5ib3VuZGluZ0JveC5tYXgsZD10aGlzLnZlcnRpY2VzO2RbMF0uc2V0KGIueCxiLnksYi56KTtkWzFdLnNldChjLngsYi55LGIueik7ZFsyXS5zZXQoYy54LGMueSxiLnopO2RbM10uc2V0KGIueCxjLnksYi56KTtkWzRdLnNldChiLngsYi55LGMueik7ZFs1XS5zZXQoYy54LGIueSxjLnopO2RbNl0uc2V0KGMueCxjLnksYy56KTtkWzddLnNldChiLngsYy55LGMueik7dGhpcy5nZW9tZXRyeS5jb21wdXRlQm91bmRpbmdTcGhlcmUoKTt0aGlzLmdlb21ldHJ5LnZlcnRpY2VzTmVlZFVwZGF0ZT0hMDt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ITE7dGhpcy5tYXRyaXhXb3JsZD1hLm1hdHJpeFdvcmxkfTtUSFJFRS5Cb3VuZGluZ0JveEhlbHBlcj1mdW5jdGlvbihhLGIpe3ZhciBjPWJ8fDg5NDc4NDg7dGhpcy5vYmplY3Q9YTt0aGlzLmJveD1uZXcgVEhSRUUuQm94MztUSFJFRS5NZXNoLmNhbGwodGhpcyxuZXcgVEhSRUUuQ3ViZUdlb21ldHJ5KDEsMSwxKSxuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe2NvbG9yOmMsd2lyZWZyYW1lOiEwfSkpfTtUSFJFRS5Cb3VuZGluZ0JveEhlbHBlci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5NZXNoLnByb3RvdHlwZSk7VEhSRUUuQm91bmRpbmdCb3hIZWxwZXIucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3RoaXMuYm94LnNldEZyb21PYmplY3QodGhpcy5vYmplY3QpO3RoaXMuYm94LnNpemUodGhpcy5zY2FsZSk7dGhpcy5ib3guY2VudGVyKHRoaXMucG9zaXRpb24pfTtUSFJFRS5DYW1lcmFIZWxwZXI9ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIsZCl7YyhhLGQpO2MoYixkKX1mdW5jdGlvbiBjKGEsYil7ZC52ZXJ0aWNlcy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IzKTtkLmNvbG9ycy5wdXNoKG5ldyBUSFJFRS5Db2xvcihiKSk7dm9pZCAwPT09ZlthXSYmKGZbYV09W10pO2ZbYV0ucHVzaChkLnZlcnRpY2VzLmxlbmd0aC0xKX12YXIgZD1uZXcgVEhSRUUuR2VvbWV0cnksZT1uZXcgVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWwoe2NvbG9yOjE2Nzc3MjE1LHZlcnRleENvbG9yczpUSFJFRS5GYWNlQ29sb3JzfSksZj17fTtiKFwibjFcIixcIm4yXCIsMTY3NTUyMDApO2IoXCJuMlwiLFwibjRcIiwxNjc1NTIwMCk7YihcIm40XCIsXCJuM1wiLDE2NzU1MjAwKTtiKFwibjNcIixcIm4xXCIsMTY3NTUyMDApO2IoXCJmMVwiLFwiZjJcIiwxNjc1NTIwMCk7YihcImYyXCIsXCJmNFwiLDE2NzU1MjAwKTtiKFwiZjRcIixcImYzXCIsMTY3NTUyMDApO2IoXCJmM1wiLFwiZjFcIiwxNjc1NTIwMCk7YihcIm4xXCIsXCJmMVwiLDE2NzU1MjAwKTtcbmIoXCJuMlwiLFwiZjJcIiwxNjc1NTIwMCk7YihcIm4zXCIsXCJmM1wiLDE2NzU1MjAwKTtiKFwibjRcIixcImY0XCIsMTY3NTUyMDApO2IoXCJwXCIsXCJuMVwiLDE2NzExNjgwKTtiKFwicFwiLFwibjJcIiwxNjcxMTY4MCk7YihcInBcIixcIm4zXCIsMTY3MTE2ODApO2IoXCJwXCIsXCJuNFwiLDE2NzExNjgwKTtiKFwidTFcIixcInUyXCIsNDM3NzUpO2IoXCJ1MlwiLFwidTNcIiw0Mzc3NSk7YihcInUzXCIsXCJ1MVwiLDQzNzc1KTtiKFwiY1wiLFwidFwiLDE2Nzc3MjE1KTtiKFwicFwiLFwiY1wiLDMzNTU0NDMpO2IoXCJjbjFcIixcImNuMlwiLDMzNTU0NDMpO2IoXCJjbjNcIixcImNuNFwiLDMzNTU0NDMpO2IoXCJjZjFcIixcImNmMlwiLDMzNTU0NDMpO2IoXCJjZjNcIixcImNmNFwiLDMzNTU0NDMpO1RIUkVFLkxpbmUuY2FsbCh0aGlzLGQsZSxUSFJFRS5MaW5lUGllY2VzKTt0aGlzLmNhbWVyYT1hO3RoaXMubWF0cml4V29ybGQ9YS5tYXRyaXhXb3JsZDt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ITE7dGhpcy5wb2ludE1hcD1mO3RoaXMudXBkYXRlKCl9O1xuVEhSRUUuQ2FtZXJhSGVscGVyLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkxpbmUucHJvdG90eXBlKTtcblRIUkVFLkNhbWVyYUhlbHBlci5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjMsYj1uZXcgVEhSRUUuQ2FtZXJhLGM9bmV3IFRIUkVFLlByb2plY3RvcjtyZXR1cm4gZnVuY3Rpb24oKXtmdW5jdGlvbiBkKGQsaCxnLGkpe2Euc2V0KGgsZyxpKTtjLnVucHJvamVjdFZlY3RvcihhLGIpO2Q9ZS5wb2ludE1hcFtkXTtpZih2b2lkIDAhPT1kKXtoPTA7Zm9yKGc9ZC5sZW5ndGg7aDxnO2grKyllLmdlb21ldHJ5LnZlcnRpY2VzW2RbaF1dLmNvcHkoYSl9fXZhciBlPXRoaXM7Yi5wcm9qZWN0aW9uTWF0cml4LmNvcHkodGhpcy5jYW1lcmEucHJvamVjdGlvbk1hdHJpeCk7ZChcImNcIiwwLDAsLTEpO2QoXCJ0XCIsMCwwLDEpO2QoXCJuMVwiLC0xLC0xLC0xKTtkKFwibjJcIiwxLC0xLC0xKTtkKFwibjNcIiwtMSwxLC0xKTtkKFwibjRcIiwxLDEsLTEpO2QoXCJmMVwiLC0xLC0xLDEpO2QoXCJmMlwiLDEsLTEsMSk7ZChcImYzXCIsLTEsMSwxKTtkKFwiZjRcIiwxLDEsMSk7ZChcInUxXCIsXG4wLjcsMS4xLC0xKTtkKFwidTJcIiwtMC43LDEuMSwtMSk7ZChcInUzXCIsMCwyLC0xKTtkKFwiY2YxXCIsLTEsMCwxKTtkKFwiY2YyXCIsMSwwLDEpO2QoXCJjZjNcIiwwLC0xLDEpO2QoXCJjZjRcIiwwLDEsMSk7ZChcImNuMVwiLC0xLDAsLTEpO2QoXCJjbjJcIiwxLDAsLTEpO2QoXCJjbjNcIiwwLC0xLC0xKTtkKFwiY240XCIsMCwxLC0xKTt0aGlzLmdlb21ldHJ5LnZlcnRpY2VzTmVlZFVwZGF0ZT0hMH19KCk7VEhSRUUuRGlyZWN0aW9uYWxMaWdodEhlbHBlcj1mdW5jdGlvbihhLGIpe1RIUkVFLk9iamVjdDNELmNhbGwodGhpcyk7dGhpcy5saWdodD1hO3RoaXMubGlnaHQudXBkYXRlTWF0cml4V29ybGQoKTt0aGlzLm1hdHJpeFdvcmxkPWEubWF0cml4V29ybGQ7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPSExO3ZhciBiPWJ8fDEsYz1uZXcgVEhSRUUuUGxhbmVHZW9tZXRyeShiLGIpLGQ9bmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHt3aXJlZnJhbWU6ITAsZm9nOiExfSk7ZC5jb2xvci5jb3B5KHRoaXMubGlnaHQuY29sb3IpLm11bHRpcGx5U2NhbGFyKHRoaXMubGlnaHQuaW50ZW5zaXR5KTt0aGlzLmxpZ2h0UGxhbmU9bmV3IFRIUkVFLk1lc2goYyxkKTt0aGlzLmFkZCh0aGlzLmxpZ2h0UGxhbmUpO2M9bmV3IFRIUkVFLkdlb21ldHJ5O2MudmVydGljZXMucHVzaChuZXcgVEhSRUUuVmVjdG9yMyk7Yy52ZXJ0aWNlcy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IzKTtkPW5ldyBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCh7Zm9nOiExfSk7XG5kLmNvbG9yLmNvcHkodGhpcy5saWdodC5jb2xvcikubXVsdGlwbHlTY2FsYXIodGhpcy5saWdodC5pbnRlbnNpdHkpO3RoaXMudGFyZ2V0TGluZT1uZXcgVEhSRUUuTGluZShjLGQpO3RoaXMuYWRkKHRoaXMudGFyZ2V0TGluZSk7dGhpcy51cGRhdGUoKX07VEhSRUUuRGlyZWN0aW9uYWxMaWdodEhlbHBlci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUpO1RIUkVFLkRpcmVjdGlvbmFsTGlnaHRIZWxwZXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLmxpZ2h0UGxhbmUuZ2VvbWV0cnkuZGlzcG9zZSgpO3RoaXMubGlnaHRQbGFuZS5tYXRlcmlhbC5kaXNwb3NlKCk7dGhpcy50YXJnZXRMaW5lLmdlb21ldHJ5LmRpc3Bvc2UoKTt0aGlzLnRhcmdldExpbmUubWF0ZXJpYWwuZGlzcG9zZSgpfTtcblRIUkVFLkRpcmVjdGlvbmFsTGlnaHRIZWxwZXIucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzLGI9bmV3IFRIUkVFLlZlY3RvcjMsYz1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oKXthLnNldEZyb21NYXRyaXhQb3NpdGlvbih0aGlzLmxpZ2h0Lm1hdHJpeFdvcmxkKTtiLnNldEZyb21NYXRyaXhQb3NpdGlvbih0aGlzLmxpZ2h0LnRhcmdldC5tYXRyaXhXb3JsZCk7Yy5zdWJWZWN0b3JzKGIsYSk7dGhpcy5saWdodFBsYW5lLmxvb2tBdChjKTt0aGlzLmxpZ2h0UGxhbmUubWF0ZXJpYWwuY29sb3IuY29weSh0aGlzLmxpZ2h0LmNvbG9yKS5tdWx0aXBseVNjYWxhcih0aGlzLmxpZ2h0LmludGVuc2l0eSk7dGhpcy50YXJnZXRMaW5lLmdlb21ldHJ5LnZlcnRpY2VzWzFdLmNvcHkoYyk7dGhpcy50YXJnZXRMaW5lLmdlb21ldHJ5LnZlcnRpY2VzTmVlZFVwZGF0ZT0hMDt0aGlzLnRhcmdldExpbmUubWF0ZXJpYWwuY29sb3IuY29weSh0aGlzLmxpZ2h0UGxhbmUubWF0ZXJpYWwuY29sb3IpfX0oKTtUSFJFRS5GYWNlTm9ybWFsc0hlbHBlcj1mdW5jdGlvbihhLGIsYyxkKXt0aGlzLm9iamVjdD1hO3RoaXMuc2l6ZT1ifHwxO2Zvcih2YXIgYT1jfHwxNjc3Njk2MCxkPWR8fDEsYj1uZXcgVEhSRUUuR2VvbWV0cnksYz0wLGU9dGhpcy5vYmplY3QuZ2VvbWV0cnkuZmFjZXMubGVuZ3RoO2M8ZTtjKyspYi52ZXJ0aWNlcy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IzKSxiLnZlcnRpY2VzLnB1c2gobmV3IFRIUkVFLlZlY3RvcjMpO1RIUkVFLkxpbmUuY2FsbCh0aGlzLGIsbmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKHtjb2xvcjphLGxpbmV3aWR0aDpkfSksVEhSRUUuTGluZVBpZWNlcyk7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPSExO3RoaXMubm9ybWFsTWF0cml4PW5ldyBUSFJFRS5NYXRyaXgzO3RoaXMudXBkYXRlKCl9O1RIUkVFLkZhY2VOb3JtYWxzSGVscGVyLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkxpbmUucHJvdG90eXBlKTtcblRIUkVFLkZhY2VOb3JtYWxzSGVscGVyLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oKXt0aGlzLm9iamVjdC51cGRhdGVNYXRyaXhXb3JsZCghMCk7dGhpcy5ub3JtYWxNYXRyaXguZ2V0Tm9ybWFsTWF0cml4KHRoaXMub2JqZWN0Lm1hdHJpeFdvcmxkKTtmb3IodmFyIGI9dGhpcy5nZW9tZXRyeS52ZXJ0aWNlcyxjPXRoaXMub2JqZWN0Lmdlb21ldHJ5LmZhY2VzLGQ9dGhpcy5vYmplY3QubWF0cml4V29ybGQsZT0wLGY9Yy5sZW5ndGg7ZTxmO2UrKyl7dmFyIGg9Y1tlXTthLmNvcHkoaC5ub3JtYWwpLmFwcGx5TWF0cml4Myh0aGlzLm5vcm1hbE1hdHJpeCkubm9ybWFsaXplKCkubXVsdGlwbHlTY2FsYXIodGhpcy5zaXplKTt2YXIgZz0yKmU7YltnXS5jb3B5KGguY2VudHJvaWQpLmFwcGx5TWF0cml4NChkKTtiW2crMV0uYWRkVmVjdG9ycyhiW2ddLGEpfXRoaXMuZ2VvbWV0cnkudmVydGljZXNOZWVkVXBkYXRlPVxuITA7cmV0dXJuIHRoaXN9fSgpO1RIUkVFLkdyaWRIZWxwZXI9ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgVEhSRUUuR2VvbWV0cnksZD1uZXcgVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWwoe3ZlcnRleENvbG9yczpUSFJFRS5WZXJ0ZXhDb2xvcnN9KTt0aGlzLmNvbG9yMT1uZXcgVEhSRUUuQ29sb3IoNDQ3MzkyNCk7dGhpcy5jb2xvcjI9bmV3IFRIUkVFLkNvbG9yKDg5NDc4NDgpO2Zvcih2YXIgZT0tYTtlPD1hO2UrPWIpe2MudmVydGljZXMucHVzaChuZXcgVEhSRUUuVmVjdG9yMygtYSwwLGUpLG5ldyBUSFJFRS5WZWN0b3IzKGEsMCxlKSxuZXcgVEhSRUUuVmVjdG9yMyhlLDAsLWEpLG5ldyBUSFJFRS5WZWN0b3IzKGUsMCxhKSk7dmFyIGY9MD09PWU/dGhpcy5jb2xvcjE6dGhpcy5jb2xvcjI7Yy5jb2xvcnMucHVzaChmLGYsZixmKX1USFJFRS5MaW5lLmNhbGwodGhpcyxjLGQsVEhSRUUuTGluZVBpZWNlcyl9O1RIUkVFLkdyaWRIZWxwZXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTGluZS5wcm90b3R5cGUpO1xuVEhSRUUuR3JpZEhlbHBlci5wcm90b3R5cGUuc2V0Q29sb3JzPWZ1bmN0aW9uKGEsYil7dGhpcy5jb2xvcjEuc2V0KGEpO3RoaXMuY29sb3IyLnNldChiKTt0aGlzLmdlb21ldHJ5LmNvbG9yc05lZWRVcGRhdGU9ITB9O1RIUkVFLkhlbWlzcGhlcmVMaWdodEhlbHBlcj1mdW5jdGlvbihhLGIpe1RIUkVFLk9iamVjdDNELmNhbGwodGhpcyk7dGhpcy5saWdodD1hO3RoaXMubGlnaHQudXBkYXRlTWF0cml4V29ybGQoKTt0aGlzLm1hdHJpeFdvcmxkPWEubWF0cml4V29ybGQ7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPSExO3RoaXMuY29sb3JzPVtuZXcgVEhSRUUuQ29sb3IsbmV3IFRIUkVFLkNvbG9yXTt2YXIgYz1uZXcgVEhSRUUuU3BoZXJlR2VvbWV0cnkoYiw0LDIpO2MuYXBwbHlNYXRyaXgoKG5ldyBUSFJFRS5NYXRyaXg0KS5tYWtlUm90YXRpb25YKC1NYXRoLlBJLzIpKTtmb3IodmFyIGQ9MDs4PmQ7ZCsrKWMuZmFjZXNbZF0uY29sb3I9dGhpcy5jb2xvcnNbND5kPzA6MV07ZD1uZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe3ZlcnRleENvbG9yczpUSFJFRS5GYWNlQ29sb3JzLHdpcmVmcmFtZTohMH0pO3RoaXMubGlnaHRTcGhlcmU9bmV3IFRIUkVFLk1lc2goYyxkKTt0aGlzLmFkZCh0aGlzLmxpZ2h0U3BoZXJlKTtcbnRoaXMudXBkYXRlKCl9O1RIUkVFLkhlbWlzcGhlcmVMaWdodEhlbHBlci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUpO1RIUkVFLkhlbWlzcGhlcmVMaWdodEhlbHBlci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMubGlnaHRTcGhlcmUuZ2VvbWV0cnkuZGlzcG9zZSgpO3RoaXMubGlnaHRTcGhlcmUubWF0ZXJpYWwuZGlzcG9zZSgpfTtcblRIUkVFLkhlbWlzcGhlcmVMaWdodEhlbHBlci5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKCl7dGhpcy5jb2xvcnNbMF0uY29weSh0aGlzLmxpZ2h0LmNvbG9yKS5tdWx0aXBseVNjYWxhcih0aGlzLmxpZ2h0LmludGVuc2l0eSk7dGhpcy5jb2xvcnNbMV0uY29weSh0aGlzLmxpZ2h0Lmdyb3VuZENvbG9yKS5tdWx0aXBseVNjYWxhcih0aGlzLmxpZ2h0LmludGVuc2l0eSk7dGhpcy5saWdodFNwaGVyZS5sb29rQXQoYS5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5saWdodC5tYXRyaXhXb3JsZCkubmVnYXRlKCkpO3RoaXMubGlnaHRTcGhlcmUuZ2VvbWV0cnkuY29sb3JzTmVlZFVwZGF0ZT0hMH19KCk7VEhSRUUuUG9pbnRMaWdodEhlbHBlcj1mdW5jdGlvbihhLGIpe3RoaXMubGlnaHQ9YTt0aGlzLmxpZ2h0LnVwZGF0ZU1hdHJpeFdvcmxkKCk7dmFyIGM9bmV3IFRIUkVFLlNwaGVyZUdlb21ldHJ5KGIsNCwyKSxkPW5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7d2lyZWZyYW1lOiEwLGZvZzohMX0pO2QuY29sb3IuY29weSh0aGlzLmxpZ2h0LmNvbG9yKS5tdWx0aXBseVNjYWxhcih0aGlzLmxpZ2h0LmludGVuc2l0eSk7VEhSRUUuTWVzaC5jYWxsKHRoaXMsYyxkKTt0aGlzLm1hdHJpeFdvcmxkPXRoaXMubGlnaHQubWF0cml4V29ybGQ7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPSExfTtUSFJFRS5Qb2ludExpZ2h0SGVscGVyLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk1lc2gucHJvdG90eXBlKTtUSFJFRS5Qb2ludExpZ2h0SGVscGVyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5nZW9tZXRyeS5kaXNwb3NlKCk7dGhpcy5tYXRlcmlhbC5kaXNwb3NlKCl9O1xuVEhSRUUuUG9pbnRMaWdodEhlbHBlci5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7dGhpcy5tYXRlcmlhbC5jb2xvci5jb3B5KHRoaXMubGlnaHQuY29sb3IpLm11bHRpcGx5U2NhbGFyKHRoaXMubGlnaHQuaW50ZW5zaXR5KX07VEhSRUUuU3BvdExpZ2h0SGVscGVyPWZ1bmN0aW9uKGEpe1RIUkVFLk9iamVjdDNELmNhbGwodGhpcyk7dGhpcy5saWdodD1hO3RoaXMubGlnaHQudXBkYXRlTWF0cml4V29ybGQoKTt0aGlzLm1hdHJpeFdvcmxkPWEubWF0cml4V29ybGQ7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPSExO2E9bmV3IFRIUkVFLkN5bGluZGVyR2VvbWV0cnkoMCwxLDEsOCwxLCEwKTthLmFwcGx5TWF0cml4KChuZXcgVEhSRUUuTWF0cml4NCkubWFrZVRyYW5zbGF0aW9uKDAsLTAuNSwwKSk7YS5hcHBseU1hdHJpeCgobmV3IFRIUkVFLk1hdHJpeDQpLm1ha2VSb3RhdGlvblgoLU1hdGguUEkvMikpO3ZhciBiPW5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7d2lyZWZyYW1lOiEwLGZvZzohMX0pO3RoaXMuY29uZT1uZXcgVEhSRUUuTWVzaChhLGIpO3RoaXMuYWRkKHRoaXMuY29uZSk7dGhpcy51cGRhdGUoKX07VEhSRUUuU3BvdExpZ2h0SGVscGVyLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSk7XG5USFJFRS5TcG90TGlnaHRIZWxwZXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLmNvbmUuZ2VvbWV0cnkuZGlzcG9zZSgpO3RoaXMuY29uZS5tYXRlcmlhbC5kaXNwb3NlKCl9O1RIUkVFLlNwb3RMaWdodEhlbHBlci5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjMsYj1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYz10aGlzLmxpZ2h0LmRpc3RhbmNlP3RoaXMubGlnaHQuZGlzdGFuY2U6MUU0LGQ9YypNYXRoLnRhbih0aGlzLmxpZ2h0LmFuZ2xlKTt0aGlzLmNvbmUuc2NhbGUuc2V0KGQsZCxjKTthLnNldEZyb21NYXRyaXhQb3NpdGlvbih0aGlzLmxpZ2h0Lm1hdHJpeFdvcmxkKTtiLnNldEZyb21NYXRyaXhQb3NpdGlvbih0aGlzLmxpZ2h0LnRhcmdldC5tYXRyaXhXb3JsZCk7dGhpcy5jb25lLmxvb2tBdChiLnN1YihhKSk7dGhpcy5jb25lLm1hdGVyaWFsLmNvbG9yLmNvcHkodGhpcy5saWdodC5jb2xvcikubXVsdGlwbHlTY2FsYXIodGhpcy5saWdodC5pbnRlbnNpdHkpfX0oKTtUSFJFRS5WZXJ0ZXhOb3JtYWxzSGVscGVyPWZ1bmN0aW9uKGEsYixjLGQpe3RoaXMub2JqZWN0PWE7dGhpcy5zaXplPWJ8fDE7Zm9yKHZhciBiPWN8fDE2NzExNjgwLGQ9ZHx8MSxjPW5ldyBUSFJFRS5HZW9tZXRyeSxhPWEuZ2VvbWV0cnkuZmFjZXMsZT0wLGY9YS5sZW5ndGg7ZTxmO2UrKylmb3IodmFyIGg9MCxnPWFbZV0udmVydGV4Tm9ybWFscy5sZW5ndGg7aDxnO2grKyljLnZlcnRpY2VzLnB1c2gobmV3IFRIUkVFLlZlY3RvcjMpLGMudmVydGljZXMucHVzaChuZXcgVEhSRUUuVmVjdG9yMyk7VEhSRUUuTGluZS5jYWxsKHRoaXMsYyxuZXcgVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWwoe2NvbG9yOmIsbGluZXdpZHRoOmR9KSxUSFJFRS5MaW5lUGllY2VzKTt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ITE7dGhpcy5ub3JtYWxNYXRyaXg9bmV3IFRIUkVFLk1hdHJpeDM7dGhpcy51cGRhdGUoKX07VEhSRUUuVmVydGV4Tm9ybWFsc0hlbHBlci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5MaW5lLnByb3RvdHlwZSk7XG5USFJFRS5WZXJ0ZXhOb3JtYWxzSGVscGVyLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYj1bXCJhXCIsXCJiXCIsXCJjXCIsXCJkXCJdO3RoaXMub2JqZWN0LnVwZGF0ZU1hdHJpeFdvcmxkKCEwKTt0aGlzLm5vcm1hbE1hdHJpeC5nZXROb3JtYWxNYXRyaXgodGhpcy5vYmplY3QubWF0cml4V29ybGQpO2Zvcih2YXIgYz10aGlzLmdlb21ldHJ5LnZlcnRpY2VzLGQ9dGhpcy5vYmplY3QuZ2VvbWV0cnkudmVydGljZXMsZT10aGlzLm9iamVjdC5nZW9tZXRyeS5mYWNlcyxmPXRoaXMub2JqZWN0Lm1hdHJpeFdvcmxkLGg9MCxnPTAsaT1lLmxlbmd0aDtnPGk7ZysrKWZvcih2YXIgaz1lW2ddLG09MCxsPWsudmVydGV4Tm9ybWFscy5sZW5ndGg7bTxsO20rKyl7dmFyIHA9ay52ZXJ0ZXhOb3JtYWxzW21dO2NbaF0uY29weShkW2tbYlttXV1dKS5hcHBseU1hdHJpeDQoZik7YS5jb3B5KHApLmFwcGx5TWF0cml4Myh0aGlzLm5vcm1hbE1hdHJpeCkubm9ybWFsaXplKCkubXVsdGlwbHlTY2FsYXIodGhpcy5zaXplKTtcbmEuYWRkKGNbaF0pO2grPTE7Y1toXS5jb3B5KGEpO2grPTF9dGhpcy5nZW9tZXRyeS52ZXJ0aWNlc05lZWRVcGRhdGU9ITA7cmV0dXJuIHRoaXN9fSgpO1RIUkVFLlZlcnRleFRhbmdlbnRzSGVscGVyPWZ1bmN0aW9uKGEsYixjLGQpe3RoaXMub2JqZWN0PWE7dGhpcy5zaXplPWJ8fDE7Zm9yKHZhciBiPWN8fDI1NSxkPWR8fDEsYz1uZXcgVEhSRUUuR2VvbWV0cnksYT1hLmdlb21ldHJ5LmZhY2VzLGU9MCxmPWEubGVuZ3RoO2U8ZjtlKyspZm9yKHZhciBoPTAsZz1hW2VdLnZlcnRleFRhbmdlbnRzLmxlbmd0aDtoPGc7aCsrKWMudmVydGljZXMucHVzaChuZXcgVEhSRUUuVmVjdG9yMyksYy52ZXJ0aWNlcy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IzKTtUSFJFRS5MaW5lLmNhbGwodGhpcyxjLG5ldyBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCh7Y29sb3I6YixsaW5ld2lkdGg6ZH0pLFRIUkVFLkxpbmVQaWVjZXMpO3RoaXMubWF0cml4QXV0b1VwZGF0ZT0hMTt0aGlzLnVwZGF0ZSgpfTtUSFJFRS5WZXJ0ZXhUYW5nZW50c0hlbHBlci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5MaW5lLnByb3RvdHlwZSk7XG5USFJFRS5WZXJ0ZXhUYW5nZW50c0hlbHBlci5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGI9W1wiYVwiLFwiYlwiLFwiY1wiLFwiZFwiXTt0aGlzLm9iamVjdC51cGRhdGVNYXRyaXhXb3JsZCghMCk7Zm9yKHZhciBjPXRoaXMuZ2VvbWV0cnkudmVydGljZXMsZD10aGlzLm9iamVjdC5nZW9tZXRyeS52ZXJ0aWNlcyxlPXRoaXMub2JqZWN0Lmdlb21ldHJ5LmZhY2VzLGY9dGhpcy5vYmplY3QubWF0cml4V29ybGQsaD0wLGc9MCxpPWUubGVuZ3RoO2c8aTtnKyspZm9yKHZhciBrPWVbZ10sbT0wLGw9ay52ZXJ0ZXhUYW5nZW50cy5sZW5ndGg7bTxsO20rKyl7dmFyIHA9ay52ZXJ0ZXhUYW5nZW50c1ttXTtjW2hdLmNvcHkoZFtrW2JbbV1dXSkuYXBwbHlNYXRyaXg0KGYpO2EuY29weShwKS50cmFuc2Zvcm1EaXJlY3Rpb24oZikubXVsdGlwbHlTY2FsYXIodGhpcy5zaXplKTthLmFkZChjW2hdKTtoKz0xO2NbaF0uY29weShhKTtcbmgrPTF9dGhpcy5nZW9tZXRyeS52ZXJ0aWNlc05lZWRVcGRhdGU9ITA7cmV0dXJuIHRoaXN9fSgpO1RIUkVFLldpcmVmcmFtZUhlbHBlcj1mdW5jdGlvbihhKXt2YXIgYj1bMCwwXSxjPXt9LGQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS1ifSxlPVtcImFcIixcImJcIixcImNcIixcImRcIl0sZj1uZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnksaD0wO2lmKGEuZ2VvbWV0cnkgaW5zdGFuY2VvZiBUSFJFRS5HZW9tZXRyeSl7Zm9yKHZhciBnPWEuZ2VvbWV0cnkudmVydGljZXMsaT1hLmdlb21ldHJ5LmZhY2VzLGs9bmV3IFVpbnQzMkFycmF5KDYqaS5sZW5ndGgpLG09MCxsPWkubGVuZ3RoO208bDttKyspZm9yKHZhciBwPWlbbV0sdD0wOzM+dDt0Kyspe2JbMF09cFtlW3RdXTtiWzFdPXBbZVsodCsxKSUzXV07Yi5zb3J0KGQpO3ZhciBzPWIudG9TdHJpbmcoKTt2b2lkIDA9PT1jW3NdJiYoa1syKmhdPWJbMF0sa1syKmgrMV09YlsxXSxjW3NdPSEwLGgrKyl9Zi5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLEZsb2F0MzJBcnJheSwyKmgsMyk7Yj1mLmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXk7bT0wO2ZvcihsPVxuaDttPGw7bSsrKWZvcih0PTA7Mj50O3QrKyloPWdba1syKm0rdF1dLGU9NiptKzMqdCxiW2UrMF09aC54LGJbZSsxXT1oLnksYltlKzJdPWguen1lbHNle2c9YS5nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5O2k9YS5nZW9tZXRyeS5hdHRyaWJ1dGVzLmluZGV4LmFycmF5O2s9bmV3IFVpbnQzMkFycmF5KDIqaS5sZW5ndGgpO209MDtmb3IobD1pLmxlbmd0aC8zO208bDttKyspZm9yKHQ9MDszPnQ7dCsrKWU9MyptLGJbMF09aVtlK3RdLGJbMV09aVtlKyh0KzEpJTNdLGIuc29ydChkKSxzPWIudG9TdHJpbmcoKSx2b2lkIDA9PT1jW3NdJiYoa1syKmhdPWJbMF0sa1syKmgrMV09YlsxXSxjW3NdPSEwLGgrKyk7Zi5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLEZsb2F0MzJBcnJheSwyKmgsMyk7Yj1mLmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXk7bT0wO2ZvcihsPWg7bTxsO20rKylmb3IodD0wOzI+dDt0KyspZT02Km0rMyp0LGg9MyprWzIqbSt0XSxiW2UrMF09Z1toXSxcbmJbZSsxXT1nW2grMV0sYltlKzJdPWdbaCsyXX1USFJFRS5MaW5lLmNhbGwodGhpcyxmLG5ldyBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCh7Y29sb3I6MTY3NzcyMTV9KSxUSFJFRS5MaW5lUGllY2VzKTt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ITE7dGhpcy5tYXRyaXhXb3JsZD1hLm1hdHJpeFdvcmxkfTtUSFJFRS5XaXJlZnJhbWVIZWxwZXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTGluZS5wcm90b3R5cGUpO1RIUkVFLkltbWVkaWF0ZVJlbmRlck9iamVjdD1mdW5jdGlvbigpe1RIUkVFLk9iamVjdDNELmNhbGwodGhpcyk7dGhpcy5yZW5kZXI9ZnVuY3Rpb24oKXt9fTtUSFJFRS5JbW1lZGlhdGVSZW5kZXJPYmplY3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlKTtUSFJFRS5MZW5zRmxhcmU9ZnVuY3Rpb24oYSxiLGMsZCxlKXtUSFJFRS5PYmplY3QzRC5jYWxsKHRoaXMpO3RoaXMubGVuc0ZsYXJlcz1bXTt0aGlzLnBvc2l0aW9uU2NyZWVuPW5ldyBUSFJFRS5WZWN0b3IzO3RoaXMuY3VzdG9tVXBkYXRlQ2FsbGJhY2s9dm9pZCAwO3ZvaWQgMCE9PWEmJnRoaXMuYWRkKGEsYixjLGQsZSl9O1RIUkVFLkxlbnNGbGFyZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUpO1xuVEhSRUUuTGVuc0ZsYXJlLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3ZvaWQgMD09PWImJihiPS0xKTt2b2lkIDA9PT1jJiYoYz0wKTt2b2lkIDA9PT1mJiYoZj0xKTt2b2lkIDA9PT1lJiYoZT1uZXcgVEhSRUUuQ29sb3IoMTY3NzcyMTUpKTt2b2lkIDA9PT1kJiYoZD1USFJFRS5Ob3JtYWxCbGVuZGluZyk7Yz1NYXRoLm1pbihjLE1hdGgubWF4KDAsYykpO3RoaXMubGVuc0ZsYXJlcy5wdXNoKHt0ZXh0dXJlOmEsc2l6ZTpiLGRpc3RhbmNlOmMseDowLHk6MCx6OjAsc2NhbGU6MSxyb3RhdGlvbjoxLG9wYWNpdHk6Zixjb2xvcjplLGJsZW5kaW5nOmR9KX07XG5USFJFRS5MZW5zRmxhcmUucHJvdG90eXBlLnVwZGF0ZUxlbnNGbGFyZXM9ZnVuY3Rpb24oKXt2YXIgYSxiPXRoaXMubGVuc0ZsYXJlcy5sZW5ndGgsYyxkPTIqLXRoaXMucG9zaXRpb25TY3JlZW4ueCxlPTIqLXRoaXMucG9zaXRpb25TY3JlZW4ueTtmb3IoYT0wO2E8YjthKyspYz10aGlzLmxlbnNGbGFyZXNbYV0sYy54PXRoaXMucG9zaXRpb25TY3JlZW4ueCtkKmMuZGlzdGFuY2UsYy55PXRoaXMucG9zaXRpb25TY3JlZW4ueStlKmMuZGlzdGFuY2UsYy53YW50ZWRSb3RhdGlvbj0wLjI1KmMueCpNYXRoLlBJLGMucm90YXRpb24rPTAuMjUqKGMud2FudGVkUm90YXRpb24tYy5yb3RhdGlvbil9O1RIUkVFLk1vcnBoQmxlbmRNZXNoPWZ1bmN0aW9uKGEsYil7VEhSRUUuTWVzaC5jYWxsKHRoaXMsYSxiKTt0aGlzLmFuaW1hdGlvbnNNYXA9e307dGhpcy5hbmltYXRpb25zTGlzdD1bXTt2YXIgYz10aGlzLmdlb21ldHJ5Lm1vcnBoVGFyZ2V0cy5sZW5ndGg7dGhpcy5jcmVhdGVBbmltYXRpb24oXCJfX2RlZmF1bHRcIiwwLGMtMSxjLzEpO3RoaXMuc2V0QW5pbWF0aW9uV2VpZ2h0KFwiX19kZWZhdWx0XCIsMSl9O1RIUkVFLk1vcnBoQmxlbmRNZXNoLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk1lc2gucHJvdG90eXBlKTtcblRIUkVFLk1vcnBoQmxlbmRNZXNoLnByb3RvdHlwZS5jcmVhdGVBbmltYXRpb249ZnVuY3Rpb24oYSxiLGMsZCl7Yj17c3RhcnRGcmFtZTpiLGVuZEZyYW1lOmMsbGVuZ3RoOmMtYisxLGZwczpkLGR1cmF0aW9uOihjLWIpL2QsbGFzdEZyYW1lOjAsY3VycmVudEZyYW1lOjAsYWN0aXZlOiExLHRpbWU6MCxkaXJlY3Rpb246MSx3ZWlnaHQ6MSxkaXJlY3Rpb25CYWNrd2FyZHM6ITEsbWlycm9yZWRMb29wOiExfTt0aGlzLmFuaW1hdGlvbnNNYXBbYV09Yjt0aGlzLmFuaW1hdGlvbnNMaXN0LnB1c2goYil9O1xuVEhSRUUuTW9ycGhCbGVuZE1lc2gucHJvdG90eXBlLmF1dG9DcmVhdGVBbmltYXRpb25zPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0vKFthLXpdKykoXFxkKykvLGMsZD17fSxlPXRoaXMuZ2VvbWV0cnksZj0wLGg9ZS5tb3JwaFRhcmdldHMubGVuZ3RoO2Y8aDtmKyspe3ZhciBnPWUubW9ycGhUYXJnZXRzW2ZdLm5hbWUubWF0Y2goYik7aWYoZyYmMTxnLmxlbmd0aCl7dmFyIGk9Z1sxXTtkW2ldfHwoZFtpXT17c3RhcnQ6SW5maW5pdHksZW5kOi1JbmZpbml0eX0pO2c9ZFtpXTtmPGcuc3RhcnQmJihnLnN0YXJ0PWYpO2Y+Zy5lbmQmJihnLmVuZD1mKTtjfHwoYz1pKX19Zm9yKGkgaW4gZClnPWRbaV0sdGhpcy5jcmVhdGVBbmltYXRpb24oaSxnLnN0YXJ0LGcuZW5kLGEpO3RoaXMuZmlyc3RBbmltYXRpb249Y307XG5USFJFRS5Nb3JwaEJsZW5kTWVzaC5wcm90b3R5cGUuc2V0QW5pbWF0aW9uRGlyZWN0aW9uRm9yd2FyZD1mdW5jdGlvbihhKXtpZihhPXRoaXMuYW5pbWF0aW9uc01hcFthXSlhLmRpcmVjdGlvbj0xLGEuZGlyZWN0aW9uQmFja3dhcmRzPSExfTtUSFJFRS5Nb3JwaEJsZW5kTWVzaC5wcm90b3R5cGUuc2V0QW5pbWF0aW9uRGlyZWN0aW9uQmFja3dhcmQ9ZnVuY3Rpb24oYSl7aWYoYT10aGlzLmFuaW1hdGlvbnNNYXBbYV0pYS5kaXJlY3Rpb249LTEsYS5kaXJlY3Rpb25CYWNrd2FyZHM9ITB9O1RIUkVFLk1vcnBoQmxlbmRNZXNoLnByb3RvdHlwZS5zZXRBbmltYXRpb25GUFM9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmFuaW1hdGlvbnNNYXBbYV07YyYmKGMuZnBzPWIsYy5kdXJhdGlvbj0oYy5lbmQtYy5zdGFydCkvYy5mcHMpfTtcblRIUkVFLk1vcnBoQmxlbmRNZXNoLnByb3RvdHlwZS5zZXRBbmltYXRpb25EdXJhdGlvbj1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuYW5pbWF0aW9uc01hcFthXTtjJiYoYy5kdXJhdGlvbj1iLGMuZnBzPShjLmVuZC1jLnN0YXJ0KS9jLmR1cmF0aW9uKX07VEhSRUUuTW9ycGhCbGVuZE1lc2gucHJvdG90eXBlLnNldEFuaW1hdGlvbldlaWdodD1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuYW5pbWF0aW9uc01hcFthXTtjJiYoYy53ZWlnaHQ9Yil9O1RIUkVFLk1vcnBoQmxlbmRNZXNoLnByb3RvdHlwZS5zZXRBbmltYXRpb25UaW1lPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5hbmltYXRpb25zTWFwW2FdO2MmJihjLnRpbWU9Yil9O1RIUkVFLk1vcnBoQmxlbmRNZXNoLnByb3RvdHlwZS5nZXRBbmltYXRpb25UaW1lPWZ1bmN0aW9uKGEpe3ZhciBiPTA7aWYoYT10aGlzLmFuaW1hdGlvbnNNYXBbYV0pYj1hLnRpbWU7cmV0dXJuIGJ9O1xuVEhSRUUuTW9ycGhCbGVuZE1lc2gucHJvdG90eXBlLmdldEFuaW1hdGlvbkR1cmF0aW9uPWZ1bmN0aW9uKGEpe3ZhciBiPS0xO2lmKGE9dGhpcy5hbmltYXRpb25zTWFwW2FdKWI9YS5kdXJhdGlvbjtyZXR1cm4gYn07VEhSRUUuTW9ycGhCbGVuZE1lc2gucHJvdG90eXBlLnBsYXlBbmltYXRpb249ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5hbmltYXRpb25zTWFwW2FdO2I/KGIudGltZT0wLGIuYWN0aXZlPSEwKTpjb25zb2xlLndhcm4oXCJhbmltYXRpb25bXCIrYStcIl0gdW5kZWZpbmVkXCIpfTtUSFJFRS5Nb3JwaEJsZW5kTWVzaC5wcm90b3R5cGUuc3RvcEFuaW1hdGlvbj1mdW5jdGlvbihhKXtpZihhPXRoaXMuYW5pbWF0aW9uc01hcFthXSlhLmFjdGl2ZT0hMX07XG5USFJFRS5Nb3JwaEJsZW5kTWVzaC5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9dGhpcy5hbmltYXRpb25zTGlzdC5sZW5ndGg7YjxjO2IrKyl7dmFyIGQ9dGhpcy5hbmltYXRpb25zTGlzdFtiXTtpZihkLmFjdGl2ZSl7dmFyIGU9ZC5kdXJhdGlvbi9kLmxlbmd0aDtkLnRpbWUrPWQuZGlyZWN0aW9uKmE7aWYoZC5taXJyb3JlZExvb3Ape2lmKGQudGltZT5kLmR1cmF0aW9ufHwwPmQudGltZSlkLmRpcmVjdGlvbio9LTEsZC50aW1lPmQuZHVyYXRpb24mJihkLnRpbWU9ZC5kdXJhdGlvbixkLmRpcmVjdGlvbkJhY2t3YXJkcz0hMCksMD5kLnRpbWUmJihkLnRpbWU9MCxkLmRpcmVjdGlvbkJhY2t3YXJkcz0hMSl9ZWxzZSBkLnRpbWUlPWQuZHVyYXRpb24sMD5kLnRpbWUmJihkLnRpbWUrPWQuZHVyYXRpb24pO3ZhciBmPWQuc3RhcnRGcmFtZStUSFJFRS5NYXRoLmNsYW1wKE1hdGguZmxvb3IoZC50aW1lL2UpLDAsZC5sZW5ndGgtMSksaD1kLndlaWdodDtcbmYhPT1kLmN1cnJlbnRGcmFtZSYmKHRoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzW2QubGFzdEZyYW1lXT0wLHRoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzW2QuY3VycmVudEZyYW1lXT0xKmgsdGhpcy5tb3JwaFRhcmdldEluZmx1ZW5jZXNbZl09MCxkLmxhc3RGcmFtZT1kLmN1cnJlbnRGcmFtZSxkLmN1cnJlbnRGcmFtZT1mKTtlPWQudGltZSVlL2U7ZC5kaXJlY3Rpb25CYWNrd2FyZHMmJihlPTEtZSk7dGhpcy5tb3JwaFRhcmdldEluZmx1ZW5jZXNbZC5jdXJyZW50RnJhbWVdPWUqaDt0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1tkLmxhc3RGcmFtZV09KDEtZSkqaH19fTtUSFJFRS5MZW5zRmxhcmVQbHVnaW49ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsYyl7dmFyIGQ9Yi5jcmVhdGVQcm9ncmFtKCksZT1iLmNyZWF0ZVNoYWRlcihiLkZSQUdNRU5UX1NIQURFUiksZj1iLmNyZWF0ZVNoYWRlcihiLlZFUlRFWF9TSEFERVIpLGc9XCJwcmVjaXNpb24gXCIrYytcIiBmbG9hdDtcXG5cIjtiLnNoYWRlclNvdXJjZShlLGcrYS5mcmFnbWVudFNoYWRlcik7Yi5zaGFkZXJTb3VyY2UoZixnK2EudmVydGV4U2hhZGVyKTtiLmNvbXBpbGVTaGFkZXIoZSk7Yi5jb21waWxlU2hhZGVyKGYpO2IuYXR0YWNoU2hhZGVyKGQsZSk7Yi5hdHRhY2hTaGFkZXIoZCxmKTtiLmxpbmtQcm9ncmFtKGQpO3JldHVybiBkfXZhciBiLGMsZCxlLGYsaCxnLGksayxtLGwscCx0O3RoaXMuaW5pdD1mdW5jdGlvbihzKXtiPXMuY29udGV4dDtjPXM7ZD1zLmdldFByZWNpc2lvbigpO2U9bmV3IEZsb2F0MzJBcnJheSgxNik7Zj1uZXcgVWludDE2QXJyYXkoNik7cz0wO2VbcysrXT0tMTtlW3MrK109LTE7XG5lW3MrK109MDtlW3MrK109MDtlW3MrK109MTtlW3MrK109LTE7ZVtzKytdPTE7ZVtzKytdPTA7ZVtzKytdPTE7ZVtzKytdPTE7ZVtzKytdPTE7ZVtzKytdPTE7ZVtzKytdPS0xO2VbcysrXT0xO2VbcysrXT0wO2VbcysrXT0xO3M9MDtmW3MrK109MDtmW3MrK109MTtmW3MrK109MjtmW3MrK109MDtmW3MrK109MjtmW3MrK109MztoPWIuY3JlYXRlQnVmZmVyKCk7Zz1iLmNyZWF0ZUJ1ZmZlcigpO2IuYmluZEJ1ZmZlcihiLkFSUkFZX0JVRkZFUixoKTtiLmJ1ZmZlckRhdGEoYi5BUlJBWV9CVUZGRVIsZSxiLlNUQVRJQ19EUkFXKTtiLmJpbmRCdWZmZXIoYi5FTEVNRU5UX0FSUkFZX0JVRkZFUixnKTtiLmJ1ZmZlckRhdGEoYi5FTEVNRU5UX0FSUkFZX0JVRkZFUixmLGIuU1RBVElDX0RSQVcpO2k9Yi5jcmVhdGVUZXh0dXJlKCk7az1iLmNyZWF0ZVRleHR1cmUoKTtiLmJpbmRUZXh0dXJlKGIuVEVYVFVSRV8yRCxpKTtiLnRleEltYWdlMkQoYi5URVhUVVJFXzJELDAsYi5SR0IsMTYsMTYsXG4wLGIuUkdCLGIuVU5TSUdORURfQllURSxudWxsKTtiLnRleFBhcmFtZXRlcmkoYi5URVhUVVJFXzJELGIuVEVYVFVSRV9XUkFQX1MsYi5DTEFNUF9UT19FREdFKTtiLnRleFBhcmFtZXRlcmkoYi5URVhUVVJFXzJELGIuVEVYVFVSRV9XUkFQX1QsYi5DTEFNUF9UT19FREdFKTtiLnRleFBhcmFtZXRlcmkoYi5URVhUVVJFXzJELGIuVEVYVFVSRV9NQUdfRklMVEVSLGIuTkVBUkVTVCk7Yi50ZXhQYXJhbWV0ZXJpKGIuVEVYVFVSRV8yRCxiLlRFWFRVUkVfTUlOX0ZJTFRFUixiLk5FQVJFU1QpO2IuYmluZFRleHR1cmUoYi5URVhUVVJFXzJELGspO2IudGV4SW1hZ2UyRChiLlRFWFRVUkVfMkQsMCxiLlJHQkEsMTYsMTYsMCxiLlJHQkEsYi5VTlNJR05FRF9CWVRFLG51bGwpO2IudGV4UGFyYW1ldGVyaShiLlRFWFRVUkVfMkQsYi5URVhUVVJFX1dSQVBfUyxiLkNMQU1QX1RPX0VER0UpO2IudGV4UGFyYW1ldGVyaShiLlRFWFRVUkVfMkQsYi5URVhUVVJFX1dSQVBfVCxiLkNMQU1QX1RPX0VER0UpO1xuYi50ZXhQYXJhbWV0ZXJpKGIuVEVYVFVSRV8yRCxiLlRFWFRVUkVfTUFHX0ZJTFRFUixiLk5FQVJFU1QpO2IudGV4UGFyYW1ldGVyaShiLlRFWFRVUkVfMkQsYi5URVhUVVJFX01JTl9GSUxURVIsYi5ORUFSRVNUKTswPj1iLmdldFBhcmFtZXRlcihiLk1BWF9WRVJURVhfVEVYVFVSRV9JTUFHRV9VTklUUyk/KG09ITEsbD1hKFRIUkVFLlNoYWRlckZsYXJlcy5sZW5zRmxhcmUsZCkpOihtPSEwLGw9YShUSFJFRS5TaGFkZXJGbGFyZXMubGVuc0ZsYXJlVmVydGV4VGV4dHVyZSxkKSk7cD17fTt0PXt9O3AudmVydGV4PWIuZ2V0QXR0cmliTG9jYXRpb24obCxcInBvc2l0aW9uXCIpO3AudXY9Yi5nZXRBdHRyaWJMb2NhdGlvbihsLFwidXZcIik7dC5yZW5kZXJUeXBlPWIuZ2V0VW5pZm9ybUxvY2F0aW9uKGwsXCJyZW5kZXJUeXBlXCIpO3QubWFwPWIuZ2V0VW5pZm9ybUxvY2F0aW9uKGwsXCJtYXBcIik7dC5vY2NsdXNpb25NYXA9Yi5nZXRVbmlmb3JtTG9jYXRpb24obCxcIm9jY2x1c2lvbk1hcFwiKTt0Lm9wYWNpdHk9XG5iLmdldFVuaWZvcm1Mb2NhdGlvbihsLFwib3BhY2l0eVwiKTt0LmNvbG9yPWIuZ2V0VW5pZm9ybUxvY2F0aW9uKGwsXCJjb2xvclwiKTt0LnNjYWxlPWIuZ2V0VW5pZm9ybUxvY2F0aW9uKGwsXCJzY2FsZVwiKTt0LnJvdGF0aW9uPWIuZ2V0VW5pZm9ybUxvY2F0aW9uKGwsXCJyb3RhdGlvblwiKTt0LnNjcmVlblBvc2l0aW9uPWIuZ2V0VW5pZm9ybUxvY2F0aW9uKGwsXCJzY3JlZW5Qb3NpdGlvblwiKX07dGhpcy5yZW5kZXI9ZnVuY3Rpb24oYSxkLGUsZil7dmFyIGE9YS5fX3dlYmdsRmxhcmVzLHI9YS5sZW5ndGg7aWYocil7dmFyIHY9bmV3IFRIUkVFLlZlY3RvcjMsej1mL2UsRz0wLjUqZSx3PTAuNSpmLHk9MTYvZixFPW5ldyBUSFJFRS5WZWN0b3IyKHkqeix5KSxBPW5ldyBUSFJFRS5WZWN0b3IzKDEsMSwwKSxLPW5ldyBUSFJFRS5WZWN0b3IyKDEsMSksRD10LHk9cDtiLnVzZVByb2dyYW0obCk7Yi5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShwLnZlcnRleCk7Yi5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShwLnV2KTtcbmIudW5pZm9ybTFpKEQub2NjbHVzaW9uTWFwLDApO2IudW5pZm9ybTFpKEQubWFwLDEpO2IuYmluZEJ1ZmZlcihiLkFSUkFZX0JVRkZFUixoKTtiLnZlcnRleEF0dHJpYlBvaW50ZXIoeS52ZXJ0ZXgsMixiLkZMT0FULCExLDE2LDApO2IudmVydGV4QXR0cmliUG9pbnRlcih5LnV2LDIsYi5GTE9BVCwhMSwxNiw4KTtiLmJpbmRCdWZmZXIoYi5FTEVNRU5UX0FSUkFZX0JVRkZFUixnKTtiLmRpc2FibGUoYi5DVUxMX0ZBQ0UpO2IuZGVwdGhNYXNrKCExKTt2YXIgRixPLHgsSSxCO2ZvcihGPTA7RjxyO0YrKylpZih5PTE2L2YsRS5zZXQoeSp6LHkpLEk9YVtGXSx2LnNldChJLm1hdHJpeFdvcmxkLmVsZW1lbnRzWzEyXSxJLm1hdHJpeFdvcmxkLmVsZW1lbnRzWzEzXSxJLm1hdHJpeFdvcmxkLmVsZW1lbnRzWzE0XSksdi5hcHBseU1hdHJpeDQoZC5tYXRyaXhXb3JsZEludmVyc2UpLHYuYXBwbHlQcm9qZWN0aW9uKGQucHJvamVjdGlvbk1hdHJpeCksQS5jb3B5KHYpLEsueD1BLngqRytHLFxuSy55PUEueSp3K3csbXx8MDxLLngmJksueDxlJiYwPEsueSYmSy55PGYpe2IuYWN0aXZlVGV4dHVyZShiLlRFWFRVUkUxKTtiLmJpbmRUZXh0dXJlKGIuVEVYVFVSRV8yRCxpKTtiLmNvcHlUZXhJbWFnZTJEKGIuVEVYVFVSRV8yRCwwLGIuUkdCLEsueC04LEsueS04LDE2LDE2LDApO2IudW5pZm9ybTFpKEQucmVuZGVyVHlwZSwwKTtiLnVuaWZvcm0yZihELnNjYWxlLEUueCxFLnkpO2IudW5pZm9ybTNmKEQuc2NyZWVuUG9zaXRpb24sQS54LEEueSxBLnopO2IuZGlzYWJsZShiLkJMRU5EKTtiLmVuYWJsZShiLkRFUFRIX1RFU1QpO2IuZHJhd0VsZW1lbnRzKGIuVFJJQU5HTEVTLDYsYi5VTlNJR05FRF9TSE9SVCwwKTtiLmFjdGl2ZVRleHR1cmUoYi5URVhUVVJFMCk7Yi5iaW5kVGV4dHVyZShiLlRFWFRVUkVfMkQsayk7Yi5jb3B5VGV4SW1hZ2UyRChiLlRFWFRVUkVfMkQsMCxiLlJHQkEsSy54LTgsSy55LTgsMTYsMTYsMCk7Yi51bmlmb3JtMWkoRC5yZW5kZXJUeXBlLDEpO2IuZGlzYWJsZShiLkRFUFRIX1RFU1QpO1xuYi5hY3RpdmVUZXh0dXJlKGIuVEVYVFVSRTEpO2IuYmluZFRleHR1cmUoYi5URVhUVVJFXzJELGkpO2IuZHJhd0VsZW1lbnRzKGIuVFJJQU5HTEVTLDYsYi5VTlNJR05FRF9TSE9SVCwwKTtJLnBvc2l0aW9uU2NyZWVuLmNvcHkoQSk7SS5jdXN0b21VcGRhdGVDYWxsYmFjaz9JLmN1c3RvbVVwZGF0ZUNhbGxiYWNrKEkpOkkudXBkYXRlTGVuc0ZsYXJlcygpO2IudW5pZm9ybTFpKEQucmVuZGVyVHlwZSwyKTtiLmVuYWJsZShiLkJMRU5EKTtPPTA7Zm9yKHg9SS5sZW5zRmxhcmVzLmxlbmd0aDtPPHg7TysrKUI9SS5sZW5zRmxhcmVzW09dLDAuMDAxPEIub3BhY2l0eSYmMC4wMDE8Qi5zY2FsZSYmKEEueD1CLngsQS55PUIueSxBLno9Qi56LHk9Qi5zaXplKkIuc2NhbGUvZixFLng9eSp6LEUueT15LGIudW5pZm9ybTNmKEQuc2NyZWVuUG9zaXRpb24sQS54LEEueSxBLnopLGIudW5pZm9ybTJmKEQuc2NhbGUsRS54LEUueSksYi51bmlmb3JtMWYoRC5yb3RhdGlvbixCLnJvdGF0aW9uKSxiLnVuaWZvcm0xZihELm9wYWNpdHksXG5CLm9wYWNpdHkpLGIudW5pZm9ybTNmKEQuY29sb3IsQi5jb2xvci5yLEIuY29sb3IuZyxCLmNvbG9yLmIpLGMuc2V0QmxlbmRpbmcoQi5ibGVuZGluZyxCLmJsZW5kRXF1YXRpb24sQi5ibGVuZFNyYyxCLmJsZW5kRHN0KSxjLnNldFRleHR1cmUoQi50ZXh0dXJlLDEpLGIuZHJhd0VsZW1lbnRzKGIuVFJJQU5HTEVTLDYsYi5VTlNJR05FRF9TSE9SVCwwKSl9Yi5lbmFibGUoYi5DVUxMX0ZBQ0UpO2IuZW5hYmxlKGIuREVQVEhfVEVTVCk7Yi5kZXB0aE1hc2soITApfX19O1RIUkVFLlNoYWRvd01hcFBsdWdpbj1mdW5jdGlvbigpe3ZhciBhLGIsYyxkLGUsZixoPW5ldyBUSFJFRS5GcnVzdHVtLGc9bmV3IFRIUkVFLk1hdHJpeDQsaT1uZXcgVEhSRUUuVmVjdG9yMyxrPW5ldyBUSFJFRS5WZWN0b3IzLG09bmV3IFRIUkVFLlZlY3RvcjM7dGhpcy5pbml0PWZ1bmN0aW9uKGcpe2E9Zy5jb250ZXh0O2I9Zzt2YXIgZz1USFJFRS5TaGFkZXJMaWIuZGVwdGhSR0JBLGg9VEhSRUUuVW5pZm9ybXNVdGlscy5jbG9uZShnLnVuaWZvcm1zKTtjPW5ldyBUSFJFRS5TaGFkZXJNYXRlcmlhbCh7ZnJhZ21lbnRTaGFkZXI6Zy5mcmFnbWVudFNoYWRlcix2ZXJ0ZXhTaGFkZXI6Zy52ZXJ0ZXhTaGFkZXIsdW5pZm9ybXM6aH0pO2Q9bmV3IFRIUkVFLlNoYWRlck1hdGVyaWFsKHtmcmFnbWVudFNoYWRlcjpnLmZyYWdtZW50U2hhZGVyLHZlcnRleFNoYWRlcjpnLnZlcnRleFNoYWRlcix1bmlmb3JtczpoLG1vcnBoVGFyZ2V0czohMH0pO2U9bmV3IFRIUkVFLlNoYWRlck1hdGVyaWFsKHtmcmFnbWVudFNoYWRlcjpnLmZyYWdtZW50U2hhZGVyLFxudmVydGV4U2hhZGVyOmcudmVydGV4U2hhZGVyLHVuaWZvcm1zOmgsc2tpbm5pbmc6ITB9KTtmPW5ldyBUSFJFRS5TaGFkZXJNYXRlcmlhbCh7ZnJhZ21lbnRTaGFkZXI6Zy5mcmFnbWVudFNoYWRlcix2ZXJ0ZXhTaGFkZXI6Zy52ZXJ0ZXhTaGFkZXIsdW5pZm9ybXM6aCxtb3JwaFRhcmdldHM6ITAsc2tpbm5pbmc6ITB9KTtjLl9zaGFkb3dQYXNzPSEwO2QuX3NoYWRvd1Bhc3M9ITA7ZS5fc2hhZG93UGFzcz0hMDtmLl9zaGFkb3dQYXNzPSEwfTt0aGlzLnJlbmRlcj1mdW5jdGlvbihhLGMpe2Iuc2hhZG93TWFwRW5hYmxlZCYmYi5zaGFkb3dNYXBBdXRvVXBkYXRlJiZ0aGlzLnVwZGF0ZShhLGMpfTt0aGlzLnVwZGF0ZT1mdW5jdGlvbihsLHApe3ZhciB0LHMscSxuLHUscix2LHosRyx3PVtdO249MDthLmNsZWFyQ29sb3IoMSwxLDEsMSk7YS5kaXNhYmxlKGEuQkxFTkQpO2EuZW5hYmxlKGEuQ1VMTF9GQUNFKTthLmZyb250RmFjZShhLkNDVyk7Yi5zaGFkb3dNYXBDdWxsRmFjZT09PVRIUkVFLkN1bGxGYWNlRnJvbnQ/XG5hLmN1bGxGYWNlKGEuRlJPTlQpOmEuY3VsbEZhY2UoYS5CQUNLKTtiLnNldERlcHRoVGVzdCghMCk7dD0wO2ZvcihzPWwuX19saWdodHMubGVuZ3RoO3Q8czt0KyspaWYocT1sLl9fbGlnaHRzW3RdLHEuY2FzdFNoYWRvdylpZihxIGluc3RhbmNlb2YgVEhSRUUuRGlyZWN0aW9uYWxMaWdodCYmcS5zaGFkb3dDYXNjYWRlKWZvcih1PTA7dTxxLnNoYWRvd0Nhc2NhZGVDb3VudDt1Kyspe3ZhciB5O2lmKHEuc2hhZG93Q2FzY2FkZUFycmF5W3VdKXk9cS5zaGFkb3dDYXNjYWRlQXJyYXlbdV07ZWxzZXtHPXE7dj11O3k9bmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQ7eS5pc1ZpcnR1YWw9ITA7eS5vbmx5U2hhZG93PSEwO3kuY2FzdFNoYWRvdz0hMDt5LnNoYWRvd0NhbWVyYU5lYXI9Ry5zaGFkb3dDYW1lcmFOZWFyO3kuc2hhZG93Q2FtZXJhRmFyPUcuc2hhZG93Q2FtZXJhRmFyO3kuc2hhZG93Q2FtZXJhTGVmdD1HLnNoYWRvd0NhbWVyYUxlZnQ7eS5zaGFkb3dDYW1lcmFSaWdodD1HLnNoYWRvd0NhbWVyYVJpZ2h0O1xueS5zaGFkb3dDYW1lcmFCb3R0b209Ry5zaGFkb3dDYW1lcmFCb3R0b207eS5zaGFkb3dDYW1lcmFUb3A9Ry5zaGFkb3dDYW1lcmFUb3A7eS5zaGFkb3dDYW1lcmFWaXNpYmxlPUcuc2hhZG93Q2FtZXJhVmlzaWJsZTt5LnNoYWRvd0RhcmtuZXNzPUcuc2hhZG93RGFya25lc3M7eS5zaGFkb3dCaWFzPUcuc2hhZG93Q2FzY2FkZUJpYXNbdl07eS5zaGFkb3dNYXBXaWR0aD1HLnNoYWRvd0Nhc2NhZGVXaWR0aFt2XTt5LnNoYWRvd01hcEhlaWdodD1HLnNoYWRvd0Nhc2NhZGVIZWlnaHRbdl07eS5wb2ludHNXb3JsZD1bXTt5LnBvaW50c0ZydXN0dW09W107ej15LnBvaW50c1dvcmxkO3I9eS5wb2ludHNGcnVzdHVtO2Zvcih2YXIgRT0wOzg+RTtFKyspeltFXT1uZXcgVEhSRUUuVmVjdG9yMyxyW0VdPW5ldyBUSFJFRS5WZWN0b3IzO3o9Ry5zaGFkb3dDYXNjYWRlTmVhclpbdl07Rz1HLnNoYWRvd0Nhc2NhZGVGYXJaW3ZdO3JbMF0uc2V0KC0xLC0xLHopO3JbMV0uc2V0KDEsLTEseik7clsyXS5zZXQoLTEsXG4xLHopO3JbM10uc2V0KDEsMSx6KTtyWzRdLnNldCgtMSwtMSxHKTtyWzVdLnNldCgxLC0xLEcpO3JbNl0uc2V0KC0xLDEsRyk7cls3XS5zZXQoMSwxLEcpO3kub3JpZ2luYWxDYW1lcmE9cDtyPW5ldyBUSFJFRS5HeXJvc2NvcGU7ci5wb3NpdGlvbj1xLnNoYWRvd0Nhc2NhZGVPZmZzZXQ7ci5hZGQoeSk7ci5hZGQoeS50YXJnZXQpO3AuYWRkKHIpO3Euc2hhZG93Q2FzY2FkZUFycmF5W3VdPXk7Y29uc29sZS5sb2coXCJDcmVhdGVkIHZpcnR1YWxMaWdodFwiLHkpfXY9cTt6PXU7Rz12LnNoYWRvd0Nhc2NhZGVBcnJheVt6XTtHLnBvc2l0aW9uLmNvcHkodi5wb3NpdGlvbik7Ry50YXJnZXQucG9zaXRpb24uY29weSh2LnRhcmdldC5wb3NpdGlvbik7Ry5sb29rQXQoRy50YXJnZXQpO0cuc2hhZG93Q2FtZXJhVmlzaWJsZT12LnNoYWRvd0NhbWVyYVZpc2libGU7Ry5zaGFkb3dEYXJrbmVzcz12LnNoYWRvd0RhcmtuZXNzO0cuc2hhZG93Qmlhcz12LnNoYWRvd0Nhc2NhZGVCaWFzW3pdO3I9di5zaGFkb3dDYXNjYWRlTmVhclpbel07XG52PXYuc2hhZG93Q2FzY2FkZUZhclpbel07Rz1HLnBvaW50c0ZydXN0dW07R1swXS56PXI7R1sxXS56PXI7R1syXS56PXI7R1szXS56PXI7R1s0XS56PXY7R1s1XS56PXY7R1s2XS56PXY7R1s3XS56PXY7d1tuXT15O24rK31lbHNlIHdbbl09cSxuKys7dD0wO2ZvcihzPXcubGVuZ3RoO3Q8czt0Kyspe3E9d1t0XTtxLnNoYWRvd01hcHx8KHU9VEhSRUUuTGluZWFyRmlsdGVyLGIuc2hhZG93TWFwVHlwZT09PVRIUkVFLlBDRlNvZnRTaGFkb3dNYXAmJih1PVRIUkVFLk5lYXJlc3RGaWx0ZXIpLHEuc2hhZG93TWFwPW5ldyBUSFJFRS5XZWJHTFJlbmRlclRhcmdldChxLnNoYWRvd01hcFdpZHRoLHEuc2hhZG93TWFwSGVpZ2h0LHttaW5GaWx0ZXI6dSxtYWdGaWx0ZXI6dSxmb3JtYXQ6VEhSRUUuUkdCQUZvcm1hdH0pLHEuc2hhZG93TWFwU2l6ZT1uZXcgVEhSRUUuVmVjdG9yMihxLnNoYWRvd01hcFdpZHRoLHEuc2hhZG93TWFwSGVpZ2h0KSxxLnNoYWRvd01hdHJpeD1uZXcgVEhSRUUuTWF0cml4NCk7XG5pZighcS5zaGFkb3dDYW1lcmEpe2lmKHEgaW5zdGFuY2VvZiBUSFJFRS5TcG90TGlnaHQpcS5zaGFkb3dDYW1lcmE9bmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKHEuc2hhZG93Q2FtZXJhRm92LHEuc2hhZG93TWFwV2lkdGgvcS5zaGFkb3dNYXBIZWlnaHQscS5zaGFkb3dDYW1lcmFOZWFyLHEuc2hhZG93Q2FtZXJhRmFyKTtlbHNlIGlmKHEgaW5zdGFuY2VvZiBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0KXEuc2hhZG93Q2FtZXJhPW5ldyBUSFJFRS5PcnRob2dyYXBoaWNDYW1lcmEocS5zaGFkb3dDYW1lcmFMZWZ0LHEuc2hhZG93Q2FtZXJhUmlnaHQscS5zaGFkb3dDYW1lcmFUb3AscS5zaGFkb3dDYW1lcmFCb3R0b20scS5zaGFkb3dDYW1lcmFOZWFyLHEuc2hhZG93Q2FtZXJhRmFyKTtlbHNle2NvbnNvbGUuZXJyb3IoXCJVbnN1cHBvcnRlZCBsaWdodCB0eXBlIGZvciBzaGFkb3dcIik7Y29udGludWV9bC5hZGQocS5zaGFkb3dDYW1lcmEpOyEwPT09bC5hdXRvVXBkYXRlJiZsLnVwZGF0ZU1hdHJpeFdvcmxkKCl9cS5zaGFkb3dDYW1lcmFWaXNpYmxlJiZcbiFxLmNhbWVyYUhlbHBlciYmKHEuY2FtZXJhSGVscGVyPW5ldyBUSFJFRS5DYW1lcmFIZWxwZXIocS5zaGFkb3dDYW1lcmEpLHEuc2hhZG93Q2FtZXJhLmFkZChxLmNhbWVyYUhlbHBlcikpO2lmKHEuaXNWaXJ0dWFsJiZ5Lm9yaWdpbmFsQ2FtZXJhPT1wKXt1PXA7bj1xLnNoYWRvd0NhbWVyYTtyPXEucG9pbnRzRnJ1c3R1bTtHPXEucG9pbnRzV29ybGQ7aS5zZXQoSW5maW5pdHksSW5maW5pdHksSW5maW5pdHkpO2suc2V0KC1JbmZpbml0eSwtSW5maW5pdHksLUluZmluaXR5KTtmb3Iodj0wOzg+djt2Kyspej1HW3ZdLHouY29weShyW3ZdKSxUSFJFRS5TaGFkb3dNYXBQbHVnaW4uX19wcm9qZWN0b3IudW5wcm9qZWN0VmVjdG9yKHosdSksei5hcHBseU1hdHJpeDQobi5tYXRyaXhXb3JsZEludmVyc2UpLHoueDxpLngmJihpLng9ei54KSx6Lng+ay54JiYoay54PXoueCksei55PGkueSYmKGkueT16LnkpLHoueT5rLnkmJihrLnk9ei55KSx6Lno8aS56JiYoaS56PXoueiksei56PmsueiYmXG4oay56PXoueik7bi5sZWZ0PWkueDtuLnJpZ2h0PWsueDtuLnRvcD1rLnk7bi5ib3R0b209aS55O24udXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpfW49cS5zaGFkb3dNYXA7cj1xLnNoYWRvd01hdHJpeDt1PXEuc2hhZG93Q2FtZXJhO3UucG9zaXRpb24uc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHEubWF0cml4V29ybGQpO20uc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHEudGFyZ2V0Lm1hdHJpeFdvcmxkKTt1Lmxvb2tBdChtKTt1LnVwZGF0ZU1hdHJpeFdvcmxkKCk7dS5tYXRyaXhXb3JsZEludmVyc2UuZ2V0SW52ZXJzZSh1Lm1hdHJpeFdvcmxkKTtxLmNhbWVyYUhlbHBlciYmKHEuY2FtZXJhSGVscGVyLnZpc2libGU9cS5zaGFkb3dDYW1lcmFWaXNpYmxlKTtxLnNoYWRvd0NhbWVyYVZpc2libGUmJnEuY2FtZXJhSGVscGVyLnVwZGF0ZSgpO3Iuc2V0KDAuNSwwLDAsMC41LDAsMC41LDAsMC41LDAsMCwwLjUsMC41LDAsMCwwLDEpO3IubXVsdGlwbHkodS5wcm9qZWN0aW9uTWF0cml4KTtyLm11bHRpcGx5KHUubWF0cml4V29ybGRJbnZlcnNlKTtcbmcubXVsdGlwbHlNYXRyaWNlcyh1LnByb2plY3Rpb25NYXRyaXgsdS5tYXRyaXhXb3JsZEludmVyc2UpO2guc2V0RnJvbU1hdHJpeChnKTtiLnNldFJlbmRlclRhcmdldChuKTtiLmNsZWFyKCk7Rz1sLl9fd2ViZ2xPYmplY3RzO3E9MDtmb3Iobj1HLmxlbmd0aDtxPG47cSsrKWlmKHY9R1txXSxyPXYub2JqZWN0LHYucmVuZGVyPSExLHIudmlzaWJsZSYmci5jYXN0U2hhZG93JiYoIShyIGluc3RhbmNlb2YgVEhSRUUuTWVzaHx8ciBpbnN0YW5jZW9mIFRIUkVFLlBhcnRpY2xlU3lzdGVtKXx8IXIuZnJ1c3R1bUN1bGxlZHx8aC5pbnRlcnNlY3RzT2JqZWN0KHIpKSlyLl9tb2RlbFZpZXdNYXRyaXgubXVsdGlwbHlNYXRyaWNlcyh1Lm1hdHJpeFdvcmxkSW52ZXJzZSxyLm1hdHJpeFdvcmxkKSx2LnJlbmRlcj0hMDtxPTA7Zm9yKG49Ry5sZW5ndGg7cTxuO3ErKyl2PUdbcV0sdi5yZW5kZXImJihyPXYub2JqZWN0LHY9di5idWZmZXIsRT1yLm1hdGVyaWFsIGluc3RhbmNlb2YgVEhSRUUuTWVzaEZhY2VNYXRlcmlhbD9cbnIubWF0ZXJpYWwubWF0ZXJpYWxzWzBdOnIubWF0ZXJpYWwsej0wPHIuZ2VvbWV0cnkubW9ycGhUYXJnZXRzLmxlbmd0aCYmRS5tb3JwaFRhcmdldHMsRT1yIGluc3RhbmNlb2YgVEhSRUUuU2tpbm5lZE1lc2gmJkUuc2tpbm5pbmcsej1yLmN1c3RvbURlcHRoTWF0ZXJpYWw/ci5jdXN0b21EZXB0aE1hdGVyaWFsOkU/ej9mOmU6ej9kOmMsdiBpbnN0YW5jZW9mIFRIUkVFLkJ1ZmZlckdlb21ldHJ5P2IucmVuZGVyQnVmZmVyRGlyZWN0KHUsbC5fX2xpZ2h0cyxudWxsLHosdixyKTpiLnJlbmRlckJ1ZmZlcih1LGwuX19saWdodHMsbnVsbCx6LHYscikpO0c9bC5fX3dlYmdsT2JqZWN0c0ltbWVkaWF0ZTtxPTA7Zm9yKG49Ry5sZW5ndGg7cTxuO3ErKyl2PUdbcV0scj12Lm9iamVjdCxyLnZpc2libGUmJnIuY2FzdFNoYWRvdyYmKHIuX21vZGVsVmlld01hdHJpeC5tdWx0aXBseU1hdHJpY2VzKHUubWF0cml4V29ybGRJbnZlcnNlLHIubWF0cml4V29ybGQpLGIucmVuZGVySW1tZWRpYXRlT2JqZWN0KHUsXG5sLl9fbGlnaHRzLG51bGwsYyxyKSl9dD1iLmdldENsZWFyQ29sb3IoKTtzPWIuZ2V0Q2xlYXJBbHBoYSgpO2EuY2xlYXJDb2xvcih0LnIsdC5nLHQuYixzKTthLmVuYWJsZShhLkJMRU5EKTtiLnNoYWRvd01hcEN1bGxGYWNlPT09VEhSRUUuQ3VsbEZhY2VGcm9udCYmYS5jdWxsRmFjZShhLkJBQ0spfX07VEhSRUUuU2hhZG93TWFwUGx1Z2luLl9fcHJvamVjdG9yPW5ldyBUSFJFRS5Qcm9qZWN0b3I7VEhSRUUuU3ByaXRlUGx1Z2luPWZ1bmN0aW9uKCl7dmFyIGEsYixjLGQsZSxmLGgsZyxpLGssbSxsLHAsdCxzLHEsbjtmdW5jdGlvbiB1KGEsYil7cmV0dXJuIGEueiE9PWIuej9iLnotYS56OmIuaWQtYS5pZH12YXIgcix2LHosRyx3LHksRSxBO3RoaXMuaW5pdD1mdW5jdGlvbih1KXtyPXUuY29udGV4dDt2PXU7Rz1uZXcgRmxvYXQzMkFycmF5KFstMC41LC0wLjUsMCwwLDAuNSwtMC41LDEsMCwwLjUsMC41LDEsMSwtMC41LDAuNSwwLDFdKTt3PW5ldyBVaW50MTZBcnJheShbMCwxLDIsMCwyLDNdKTt5PXIuY3JlYXRlQnVmZmVyKCk7RT1yLmNyZWF0ZUJ1ZmZlcigpO3IuYmluZEJ1ZmZlcihyLkFSUkFZX0JVRkZFUix5KTtyLmJ1ZmZlckRhdGEoci5BUlJBWV9CVUZGRVIsRyxyLlNUQVRJQ19EUkFXKTtyLmJpbmRCdWZmZXIoci5FTEVNRU5UX0FSUkFZX0JVRkZFUixFKTtyLmJ1ZmZlckRhdGEoci5FTEVNRU5UX0FSUkFZX0JVRkZFUix3LHIuU1RBVElDX0RSQVcpO3ZhciB1PXIuY3JlYXRlUHJvZ3JhbSgpLFxuRD1yLmNyZWF0ZVNoYWRlcihyLlZFUlRFWF9TSEFERVIpLEY9ci5jcmVhdGVTaGFkZXIoci5GUkFHTUVOVF9TSEFERVIpO3Iuc2hhZGVyU291cmNlKEQsW1wicHJlY2lzaW9uIFwiK3YuZ2V0UHJlY2lzaW9uKCkrXCIgZmxvYXQ7XCIsXCJ1bmlmb3JtIG1hdDQgbW9kZWxWaWV3TWF0cml4O1xcbnVuaWZvcm0gbWF0NCBwcm9qZWN0aW9uTWF0cml4O1xcbnVuaWZvcm0gZmxvYXQgcm90YXRpb247XFxudW5pZm9ybSB2ZWMyIHNjYWxlO1xcbnVuaWZvcm0gdmVjMiB1dk9mZnNldDtcXG51bmlmb3JtIHZlYzIgdXZTY2FsZTtcXG5hdHRyaWJ1dGUgdmVjMiBwb3NpdGlvbjtcXG5hdHRyaWJ1dGUgdmVjMiB1djtcXG52YXJ5aW5nIHZlYzIgdlVWO1xcbnZvaWQgbWFpbigpIHtcXG52VVYgPSB1dk9mZnNldCArIHV2ICogdXZTY2FsZTtcXG52ZWMyIGFsaWduZWRQb3NpdGlvbiA9IHBvc2l0aW9uICogc2NhbGU7XFxudmVjMiByb3RhdGVkUG9zaXRpb247XFxucm90YXRlZFBvc2l0aW9uLnggPSBjb3MoIHJvdGF0aW9uICkgKiBhbGlnbmVkUG9zaXRpb24ueCAtIHNpbiggcm90YXRpb24gKSAqIGFsaWduZWRQb3NpdGlvbi55O1xcbnJvdGF0ZWRQb3NpdGlvbi55ID0gc2luKCByb3RhdGlvbiApICogYWxpZ25lZFBvc2l0aW9uLnggKyBjb3MoIHJvdGF0aW9uICkgKiBhbGlnbmVkUG9zaXRpb24ueTtcXG52ZWM0IGZpbmFsUG9zaXRpb247XFxuZmluYWxQb3NpdGlvbiA9IG1vZGVsVmlld01hdHJpeCAqIHZlYzQoIDAuMCwgMC4wLCAwLjAsIDEuMCApO1xcbmZpbmFsUG9zaXRpb24ueHkgKz0gcm90YXRlZFBvc2l0aW9uO1xcbmZpbmFsUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogZmluYWxQb3NpdGlvbjtcXG5nbF9Qb3NpdGlvbiA9IGZpbmFsUG9zaXRpb247XFxufVwiXS5qb2luKFwiXFxuXCIpKTtcbnIuc2hhZGVyU291cmNlKEYsW1wicHJlY2lzaW9uIFwiK3YuZ2V0UHJlY2lzaW9uKCkrXCIgZmxvYXQ7XCIsXCJ1bmlmb3JtIHZlYzMgY29sb3I7XFxudW5pZm9ybSBzYW1wbGVyMkQgbWFwO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG51bmlmb3JtIGludCBmb2dUeXBlO1xcbnVuaWZvcm0gdmVjMyBmb2dDb2xvcjtcXG51bmlmb3JtIGZsb2F0IGZvZ0RlbnNpdHk7XFxudW5pZm9ybSBmbG9hdCBmb2dOZWFyO1xcbnVuaWZvcm0gZmxvYXQgZm9nRmFyO1xcbnVuaWZvcm0gZmxvYXQgYWxwaGFUZXN0O1xcbnZhcnlpbmcgdmVjMiB2VVY7XFxudm9pZCBtYWluKCkge1xcbnZlYzQgdGV4dHVyZSA9IHRleHR1cmUyRCggbWFwLCB2VVYgKTtcXG5pZiAoIHRleHR1cmUuYSA8IGFscGhhVGVzdCApIGRpc2NhcmQ7XFxuZ2xfRnJhZ0NvbG9yID0gdmVjNCggY29sb3IgKiB0ZXh0dXJlLnh5eiwgdGV4dHVyZS5hICogb3BhY2l0eSApO1xcbmlmICggZm9nVHlwZSA+IDAgKSB7XFxuZmxvYXQgZGVwdGggPSBnbF9GcmFnQ29vcmQueiAvIGdsX0ZyYWdDb29yZC53O1xcbmZsb2F0IGZvZ0ZhY3RvciA9IDAuMDtcXG5pZiAoIGZvZ1R5cGUgPT0gMSApIHtcXG5mb2dGYWN0b3IgPSBzbW9vdGhzdGVwKCBmb2dOZWFyLCBmb2dGYXIsIGRlcHRoICk7XFxufSBlbHNlIHtcXG5jb25zdCBmbG9hdCBMT0cyID0gMS40NDI2OTU7XFxuZmxvYXQgZm9nRmFjdG9yID0gZXhwMiggLSBmb2dEZW5zaXR5ICogZm9nRGVuc2l0eSAqIGRlcHRoICogZGVwdGggKiBMT0cyICk7XFxuZm9nRmFjdG9yID0gMS4wIC0gY2xhbXAoIGZvZ0ZhY3RvciwgMC4wLCAxLjAgKTtcXG59XFxuZ2xfRnJhZ0NvbG9yID0gbWl4KCBnbF9GcmFnQ29sb3IsIHZlYzQoIGZvZ0NvbG9yLCBnbF9GcmFnQ29sb3IudyApLCBmb2dGYWN0b3IgKTtcXG59XFxufVwiXS5qb2luKFwiXFxuXCIpKTtcbnIuY29tcGlsZVNoYWRlcihEKTtyLmNvbXBpbGVTaGFkZXIoRik7ci5hdHRhY2hTaGFkZXIodSxEKTtyLmF0dGFjaFNoYWRlcih1LEYpO3IubGlua1Byb2dyYW0odSk7QT11O3E9ci5nZXRBdHRyaWJMb2NhdGlvbihBLFwicG9zaXRpb25cIik7bj1yLmdldEF0dHJpYkxvY2F0aW9uKEEsXCJ1dlwiKTthPXIuZ2V0VW5pZm9ybUxvY2F0aW9uKEEsXCJ1dk9mZnNldFwiKTtiPXIuZ2V0VW5pZm9ybUxvY2F0aW9uKEEsXCJ1dlNjYWxlXCIpO2M9ci5nZXRVbmlmb3JtTG9jYXRpb24oQSxcInJvdGF0aW9uXCIpO2Q9ci5nZXRVbmlmb3JtTG9jYXRpb24oQSxcInNjYWxlXCIpO2U9ci5nZXRVbmlmb3JtTG9jYXRpb24oQSxcImNvbG9yXCIpO2Y9ci5nZXRVbmlmb3JtTG9jYXRpb24oQSxcIm1hcFwiKTtoPXIuZ2V0VW5pZm9ybUxvY2F0aW9uKEEsXCJvcGFjaXR5XCIpO2c9ci5nZXRVbmlmb3JtTG9jYXRpb24oQSxcIm1vZGVsVmlld01hdHJpeFwiKTtpPXIuZ2V0VW5pZm9ybUxvY2F0aW9uKEEsXCJwcm9qZWN0aW9uTWF0cml4XCIpO2s9XG5yLmdldFVuaWZvcm1Mb2NhdGlvbihBLFwiZm9nVHlwZVwiKTttPXIuZ2V0VW5pZm9ybUxvY2F0aW9uKEEsXCJmb2dEZW5zaXR5XCIpO2w9ci5nZXRVbmlmb3JtTG9jYXRpb24oQSxcImZvZ05lYXJcIik7cD1yLmdldFVuaWZvcm1Mb2NhdGlvbihBLFwiZm9nRmFyXCIpO3Q9ci5nZXRVbmlmb3JtTG9jYXRpb24oQSxcImZvZ0NvbG9yXCIpO3M9ci5nZXRVbmlmb3JtTG9jYXRpb24oQSxcImFscGhhVGVzdFwiKTt1PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7dS53aWR0aD04O3UuaGVpZ2h0PTg7RD11LmdldENvbnRleHQoXCIyZFwiKTtELmZpbGxTdHlsZT1cIiNmZmZmZmZcIjtELmZpbGxSZWN0KDAsMCx1LndpZHRoLHUuaGVpZ2h0KTt6PW5ldyBUSFJFRS5UZXh0dXJlKHUpO3oubmVlZHNVcGRhdGU9ITB9O3RoaXMucmVuZGVyPWZ1bmN0aW9uKHcsRCl7dmFyIEY9dy5fX3dlYmdsU3ByaXRlcyxHPUYubGVuZ3RoO2lmKEcpe3IudXNlUHJvZ3JhbShBKTtyLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHEpO1xuci5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShuKTtyLmRpc2FibGUoci5DVUxMX0ZBQ0UpO3IuZW5hYmxlKHIuQkxFTkQpO3IuYmluZEJ1ZmZlcihyLkFSUkFZX0JVRkZFUix5KTtyLnZlcnRleEF0dHJpYlBvaW50ZXIocSwyLHIuRkxPQVQsITEsMTYsMCk7ci52ZXJ0ZXhBdHRyaWJQb2ludGVyKG4sMixyLkZMT0FULCExLDE2LDgpO3IuYmluZEJ1ZmZlcihyLkVMRU1FTlRfQVJSQVlfQlVGRkVSLEUpO3IudW5pZm9ybU1hdHJpeDRmdihpLCExLEQucHJvamVjdGlvbk1hdHJpeC5lbGVtZW50cyk7ci5hY3RpdmVUZXh0dXJlKHIuVEVYVFVSRTApO3IudW5pZm9ybTFpKGYsMCk7dmFyIHg9MCxJPTAsQj13LmZvZztCPyhyLnVuaWZvcm0zZih0LEIuY29sb3IucixCLmNvbG9yLmcsQi5jb2xvci5iKSxCIGluc3RhbmNlb2YgVEhSRUUuRm9nPyhyLnVuaWZvcm0xZihsLEIubmVhciksci51bmlmb3JtMWYocCxCLmZhciksci51bmlmb3JtMWkoaywxKSxJPXg9MSk6QiBpbnN0YW5jZW9mIFRIUkVFLkZvZ0V4cDImJlxuKHIudW5pZm9ybTFmKG0sQi5kZW5zaXR5KSxyLnVuaWZvcm0xaShrLDIpLEk9eD0yKSk6KHIudW5pZm9ybTFpKGssMCksST14PTApO2Zvcih2YXIgTSxKLGNhPVtdLEI9MDtCPEc7QisrKU09RltCXSwhMSE9PU0udmlzaWJsZSYmKE0uX21vZGVsVmlld01hdHJpeC5tdWx0aXBseU1hdHJpY2VzKEQubWF0cml4V29ybGRJbnZlcnNlLE0ubWF0cml4V29ybGQpLE0uej0tTS5fbW9kZWxWaWV3TWF0cml4LmVsZW1lbnRzWzE0XSk7Ri5zb3J0KHUpO2ZvcihCPTA7QjxHO0IrKylNPUZbQl0sITEhPT1NLnZpc2libGUmJihKPU0ubWF0ZXJpYWwsci51bmlmb3JtMWYocyxKLmFscGhhVGVzdCksci51bmlmb3JtTWF0cml4NGZ2KGcsITEsTS5fbW9kZWxWaWV3TWF0cml4LmVsZW1lbnRzKSxjYVswXT1NLnNjYWxlLngsY2FbMV09TS5zY2FsZS55LE09dy5mb2cmJkouZm9nP0k6MCx4IT09TSYmKHIudW5pZm9ybTFpKGssTSkseD1NKSxyLnVuaWZvcm0yZihiLEoudXZTY2FsZS54LEoudXZTY2FsZS55KSxcbnIudW5pZm9ybTJmKGEsSi51dk9mZnNldC54LEoudXZPZmZzZXQueSksci51bmlmb3JtMWYoaCxKLm9wYWNpdHkpLHIudW5pZm9ybTNmKGUsSi5jb2xvci5yLEouY29sb3IuZyxKLmNvbG9yLmIpLHIudW5pZm9ybTFmKGMsSi5yb3RhdGlvbiksci51bmlmb3JtMmZ2KGQsY2EpLHYuc2V0QmxlbmRpbmcoSi5ibGVuZGluZyxKLmJsZW5kRXF1YXRpb24sSi5ibGVuZFNyYyxKLmJsZW5kRHN0KSx2LnNldERlcHRoVGVzdChKLmRlcHRoVGVzdCksdi5zZXREZXB0aFdyaXRlKEouZGVwdGhXcml0ZSksSi5tYXAmJkoubWFwLmltYWdlJiZKLm1hcC5pbWFnZS53aWR0aD92LnNldFRleHR1cmUoSi5tYXAsMCk6di5zZXRUZXh0dXJlKHosMCksci5kcmF3RWxlbWVudHMoci5UUklBTkdMRVMsNixyLlVOU0lHTkVEX1NIT1JULDApKTtyLmVuYWJsZShyLkNVTExfRkFDRSl9fX07VEhSRUUuRGVwdGhQYXNzUGx1Z2luPWZ1bmN0aW9uKCl7dGhpcy5lbmFibGVkPSExO3RoaXMucmVuZGVyVGFyZ2V0PW51bGw7dmFyIGEsYixjLGQsZSxmLGg9bmV3IFRIUkVFLkZydXN0dW0sZz1uZXcgVEhSRUUuTWF0cml4NDt0aGlzLmluaXQ9ZnVuY3Rpb24oZyl7YT1nLmNvbnRleHQ7Yj1nO3ZhciBnPVRIUkVFLlNoYWRlckxpYi5kZXB0aFJHQkEsaD1USFJFRS5Vbmlmb3Jtc1V0aWxzLmNsb25lKGcudW5pZm9ybXMpO2M9bmV3IFRIUkVFLlNoYWRlck1hdGVyaWFsKHtmcmFnbWVudFNoYWRlcjpnLmZyYWdtZW50U2hhZGVyLHZlcnRleFNoYWRlcjpnLnZlcnRleFNoYWRlcix1bmlmb3JtczpofSk7ZD1uZXcgVEhSRUUuU2hhZGVyTWF0ZXJpYWwoe2ZyYWdtZW50U2hhZGVyOmcuZnJhZ21lbnRTaGFkZXIsdmVydGV4U2hhZGVyOmcudmVydGV4U2hhZGVyLHVuaWZvcm1zOmgsbW9ycGhUYXJnZXRzOiEwfSk7ZT1uZXcgVEhSRUUuU2hhZGVyTWF0ZXJpYWwoe2ZyYWdtZW50U2hhZGVyOmcuZnJhZ21lbnRTaGFkZXIsXG52ZXJ0ZXhTaGFkZXI6Zy52ZXJ0ZXhTaGFkZXIsdW5pZm9ybXM6aCxza2lubmluZzohMH0pO2Y9bmV3IFRIUkVFLlNoYWRlck1hdGVyaWFsKHtmcmFnbWVudFNoYWRlcjpnLmZyYWdtZW50U2hhZGVyLHZlcnRleFNoYWRlcjpnLnZlcnRleFNoYWRlcix1bmlmb3JtczpoLG1vcnBoVGFyZ2V0czohMCxza2lubmluZzohMH0pO2MuX3NoYWRvd1Bhc3M9ITA7ZC5fc2hhZG93UGFzcz0hMDtlLl9zaGFkb3dQYXNzPSEwO2YuX3NoYWRvd1Bhc3M9ITB9O3RoaXMucmVuZGVyPWZ1bmN0aW9uKGEsYil7dGhpcy5lbmFibGVkJiZ0aGlzLnVwZGF0ZShhLGIpfTt0aGlzLnVwZGF0ZT1mdW5jdGlvbihpLGspe3ZhciBtLGwscCx0LHMscTthLmNsZWFyQ29sb3IoMSwxLDEsMSk7YS5kaXNhYmxlKGEuQkxFTkQpO2Iuc2V0RGVwdGhUZXN0KCEwKTshMD09PWkuYXV0b1VwZGF0ZSYmaS51cGRhdGVNYXRyaXhXb3JsZCgpO2subWF0cml4V29ybGRJbnZlcnNlLmdldEludmVyc2Uoay5tYXRyaXhXb3JsZCk7Zy5tdWx0aXBseU1hdHJpY2VzKGsucHJvamVjdGlvbk1hdHJpeCxcbmsubWF0cml4V29ybGRJbnZlcnNlKTtoLnNldEZyb21NYXRyaXgoZyk7Yi5zZXRSZW5kZXJUYXJnZXQodGhpcy5yZW5kZXJUYXJnZXQpO2IuY2xlYXIoKTtxPWkuX193ZWJnbE9iamVjdHM7bT0wO2ZvcihsPXEubGVuZ3RoO208bDttKyspaWYocD1xW21dLHM9cC5vYmplY3QscC5yZW5kZXI9ITEscy52aXNpYmxlJiYoIShzIGluc3RhbmNlb2YgVEhSRUUuTWVzaHx8cyBpbnN0YW5jZW9mIFRIUkVFLlBhcnRpY2xlU3lzdGVtKXx8IXMuZnJ1c3R1bUN1bGxlZHx8aC5pbnRlcnNlY3RzT2JqZWN0KHMpKSlzLl9tb2RlbFZpZXdNYXRyaXgubXVsdGlwbHlNYXRyaWNlcyhrLm1hdHJpeFdvcmxkSW52ZXJzZSxzLm1hdHJpeFdvcmxkKSxwLnJlbmRlcj0hMDt2YXIgbjttPTA7Zm9yKGw9cS5sZW5ndGg7bTxsO20rKylpZihwPXFbbV0scC5yZW5kZXImJihzPXAub2JqZWN0LHA9cC5idWZmZXIsIShzIGluc3RhbmNlb2YgVEhSRUUuUGFydGljbGVTeXN0ZW0pfHxzLmN1c3RvbURlcHRoTWF0ZXJpYWwpKShuPVxucy5tYXRlcmlhbCBpbnN0YW5jZW9mIFRIUkVFLk1lc2hGYWNlTWF0ZXJpYWw/cy5tYXRlcmlhbC5tYXRlcmlhbHNbMF06cy5tYXRlcmlhbCkmJmIuc2V0TWF0ZXJpYWxGYWNlcyhzLm1hdGVyaWFsKSx0PTA8cy5nZW9tZXRyeS5tb3JwaFRhcmdldHMubGVuZ3RoJiZuLm1vcnBoVGFyZ2V0cyxuPXMgaW5zdGFuY2VvZiBUSFJFRS5Ta2lubmVkTWVzaCYmbi5za2lubmluZyx0PXMuY3VzdG9tRGVwdGhNYXRlcmlhbD9zLmN1c3RvbURlcHRoTWF0ZXJpYWw6bj90P2Y6ZTp0P2Q6YyxwIGluc3RhbmNlb2YgVEhSRUUuQnVmZmVyR2VvbWV0cnk/Yi5yZW5kZXJCdWZmZXJEaXJlY3QoayxpLl9fbGlnaHRzLG51bGwsdCxwLHMpOmIucmVuZGVyQnVmZmVyKGssaS5fX2xpZ2h0cyxudWxsLHQscCxzKTtxPWkuX193ZWJnbE9iamVjdHNJbW1lZGlhdGU7bT0wO2ZvcihsPXEubGVuZ3RoO208bDttKyspcD1xW21dLHM9cC5vYmplY3Qscy52aXNpYmxlJiYocy5fbW9kZWxWaWV3TWF0cml4Lm11bHRpcGx5TWF0cmljZXMoay5tYXRyaXhXb3JsZEludmVyc2UsXG5zLm1hdHJpeFdvcmxkKSxiLnJlbmRlckltbWVkaWF0ZU9iamVjdChrLGkuX19saWdodHMsbnVsbCxjLHMpKTttPWIuZ2V0Q2xlYXJDb2xvcigpO2w9Yi5nZXRDbGVhckFscGhhKCk7YS5jbGVhckNvbG9yKG0ucixtLmcsbS5iLGwpO2EuZW5hYmxlKGEuQkxFTkQpfX07VEhSRUUuU2hhZGVyRmxhcmVzPXtsZW5zRmxhcmVWZXJ0ZXhUZXh0dXJlOnt2ZXJ0ZXhTaGFkZXI6XCJ1bmlmb3JtIGxvd3AgaW50IHJlbmRlclR5cGU7XFxudW5pZm9ybSB2ZWMzIHNjcmVlblBvc2l0aW9uO1xcbnVuaWZvcm0gdmVjMiBzY2FsZTtcXG51bmlmb3JtIGZsb2F0IHJvdGF0aW9uO1xcbnVuaWZvcm0gc2FtcGxlcjJEIG9jY2x1c2lvbk1hcDtcXG5hdHRyaWJ1dGUgdmVjMiBwb3NpdGlvbjtcXG5hdHRyaWJ1dGUgdmVjMiB1djtcXG52YXJ5aW5nIHZlYzIgdlVWO1xcbnZhcnlpbmcgZmxvYXQgdlZpc2liaWxpdHk7XFxudm9pZCBtYWluKCkge1xcbnZVViA9IHV2O1xcbnZlYzIgcG9zID0gcG9zaXRpb247XFxuaWYoIHJlbmRlclR5cGUgPT0gMiApIHtcXG52ZWM0IHZpc2liaWxpdHkgPSB0ZXh0dXJlMkQoIG9jY2x1c2lvbk1hcCwgdmVjMiggMC4xLCAwLjEgKSApO1xcbnZpc2liaWxpdHkgKz0gdGV4dHVyZTJEKCBvY2NsdXNpb25NYXAsIHZlYzIoIDAuNSwgMC4xICkgKTtcXG52aXNpYmlsaXR5ICs9IHRleHR1cmUyRCggb2NjbHVzaW9uTWFwLCB2ZWMyKCAwLjksIDAuMSApICk7XFxudmlzaWJpbGl0eSArPSB0ZXh0dXJlMkQoIG9jY2x1c2lvbk1hcCwgdmVjMiggMC45LCAwLjUgKSApO1xcbnZpc2liaWxpdHkgKz0gdGV4dHVyZTJEKCBvY2NsdXNpb25NYXAsIHZlYzIoIDAuOSwgMC45ICkgKTtcXG52aXNpYmlsaXR5ICs9IHRleHR1cmUyRCggb2NjbHVzaW9uTWFwLCB2ZWMyKCAwLjUsIDAuOSApICk7XFxudmlzaWJpbGl0eSArPSB0ZXh0dXJlMkQoIG9jY2x1c2lvbk1hcCwgdmVjMiggMC4xLCAwLjkgKSApO1xcbnZpc2liaWxpdHkgKz0gdGV4dHVyZTJEKCBvY2NsdXNpb25NYXAsIHZlYzIoIDAuMSwgMC41ICkgKTtcXG52aXNpYmlsaXR5ICs9IHRleHR1cmUyRCggb2NjbHVzaW9uTWFwLCB2ZWMyKCAwLjUsIDAuNSApICk7XFxudlZpc2liaWxpdHkgPSAgICAgICAgdmlzaWJpbGl0eS5yIC8gOS4wO1xcbnZWaXNpYmlsaXR5ICo9IDEuMCAtIHZpc2liaWxpdHkuZyAvIDkuMDtcXG52VmlzaWJpbGl0eSAqPSAgICAgICB2aXNpYmlsaXR5LmIgLyA5LjA7XFxudlZpc2liaWxpdHkgKj0gMS4wIC0gdmlzaWJpbGl0eS5hIC8gOS4wO1xcbnBvcy54ID0gY29zKCByb3RhdGlvbiApICogcG9zaXRpb24ueCAtIHNpbiggcm90YXRpb24gKSAqIHBvc2l0aW9uLnk7XFxucG9zLnkgPSBzaW4oIHJvdGF0aW9uICkgKiBwb3NpdGlvbi54ICsgY29zKCByb3RhdGlvbiApICogcG9zaXRpb24ueTtcXG59XFxuZ2xfUG9zaXRpb24gPSB2ZWM0KCAoIHBvcyAqIHNjYWxlICsgc2NyZWVuUG9zaXRpb24ueHkgKS54eSwgc2NyZWVuUG9zaXRpb24ueiwgMS4wICk7XFxufVwiLFxuZnJhZ21lbnRTaGFkZXI6XCJ1bmlmb3JtIGxvd3AgaW50IHJlbmRlclR5cGU7XFxudW5pZm9ybSBzYW1wbGVyMkQgbWFwO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG51bmlmb3JtIHZlYzMgY29sb3I7XFxudmFyeWluZyB2ZWMyIHZVVjtcXG52YXJ5aW5nIGZsb2F0IHZWaXNpYmlsaXR5O1xcbnZvaWQgbWFpbigpIHtcXG5pZiggcmVuZGVyVHlwZSA9PSAwICkge1xcbmdsX0ZyYWdDb2xvciA9IHZlYzQoIDEuMCwgMC4wLCAxLjAsIDAuMCApO1xcbn0gZWxzZSBpZiggcmVuZGVyVHlwZSA9PSAxICkge1xcbmdsX0ZyYWdDb2xvciA9IHRleHR1cmUyRCggbWFwLCB2VVYgKTtcXG59IGVsc2Uge1xcbnZlYzQgdGV4dHVyZSA9IHRleHR1cmUyRCggbWFwLCB2VVYgKTtcXG50ZXh0dXJlLmEgKj0gb3BhY2l0eSAqIHZWaXNpYmlsaXR5O1xcbmdsX0ZyYWdDb2xvciA9IHRleHR1cmU7XFxuZ2xfRnJhZ0NvbG9yLnJnYiAqPSBjb2xvcjtcXG59XFxufVwifSxsZW5zRmxhcmU6e3ZlcnRleFNoYWRlcjpcInVuaWZvcm0gbG93cCBpbnQgcmVuZGVyVHlwZTtcXG51bmlmb3JtIHZlYzMgc2NyZWVuUG9zaXRpb247XFxudW5pZm9ybSB2ZWMyIHNjYWxlO1xcbnVuaWZvcm0gZmxvYXQgcm90YXRpb247XFxuYXR0cmlidXRlIHZlYzIgcG9zaXRpb247XFxuYXR0cmlidXRlIHZlYzIgdXY7XFxudmFyeWluZyB2ZWMyIHZVVjtcXG52b2lkIG1haW4oKSB7XFxudlVWID0gdXY7XFxudmVjMiBwb3MgPSBwb3NpdGlvbjtcXG5pZiggcmVuZGVyVHlwZSA9PSAyICkge1xcbnBvcy54ID0gY29zKCByb3RhdGlvbiApICogcG9zaXRpb24ueCAtIHNpbiggcm90YXRpb24gKSAqIHBvc2l0aW9uLnk7XFxucG9zLnkgPSBzaW4oIHJvdGF0aW9uICkgKiBwb3NpdGlvbi54ICsgY29zKCByb3RhdGlvbiApICogcG9zaXRpb24ueTtcXG59XFxuZ2xfUG9zaXRpb24gPSB2ZWM0KCAoIHBvcyAqIHNjYWxlICsgc2NyZWVuUG9zaXRpb24ueHkgKS54eSwgc2NyZWVuUG9zaXRpb24ueiwgMS4wICk7XFxufVwiLFxuZnJhZ21lbnRTaGFkZXI6XCJwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcXG51bmlmb3JtIGxvd3AgaW50IHJlbmRlclR5cGU7XFxudW5pZm9ybSBzYW1wbGVyMkQgbWFwO1xcbnVuaWZvcm0gc2FtcGxlcjJEIG9jY2x1c2lvbk1hcDtcXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxudW5pZm9ybSB2ZWMzIGNvbG9yO1xcbnZhcnlpbmcgdmVjMiB2VVY7XFxudm9pZCBtYWluKCkge1xcbmlmKCByZW5kZXJUeXBlID09IDAgKSB7XFxuZ2xfRnJhZ0NvbG9yID0gdmVjNCggdGV4dHVyZTJEKCBtYXAsIHZVViApLnJnYiwgMC4wICk7XFxufSBlbHNlIGlmKCByZW5kZXJUeXBlID09IDEgKSB7XFxuZ2xfRnJhZ0NvbG9yID0gdGV4dHVyZTJEKCBtYXAsIHZVViApO1xcbn0gZWxzZSB7XFxuZmxvYXQgdmlzaWJpbGl0eSA9IHRleHR1cmUyRCggb2NjbHVzaW9uTWFwLCB2ZWMyKCAwLjUsIDAuMSApICkuYTtcXG52aXNpYmlsaXR5ICs9IHRleHR1cmUyRCggb2NjbHVzaW9uTWFwLCB2ZWMyKCAwLjksIDAuNSApICkuYTtcXG52aXNpYmlsaXR5ICs9IHRleHR1cmUyRCggb2NjbHVzaW9uTWFwLCB2ZWMyKCAwLjUsIDAuOSApICkuYTtcXG52aXNpYmlsaXR5ICs9IHRleHR1cmUyRCggb2NjbHVzaW9uTWFwLCB2ZWMyKCAwLjEsIDAuNSApICkuYTtcXG52aXNpYmlsaXR5ID0gKCAxLjAgLSB2aXNpYmlsaXR5IC8gNC4wICk7XFxudmVjNCB0ZXh0dXJlID0gdGV4dHVyZTJEKCBtYXAsIHZVViApO1xcbnRleHR1cmUuYSAqPSBvcGFjaXR5ICogdmlzaWJpbGl0eTtcXG5nbF9GcmFnQ29sb3IgPSB0ZXh0dXJlO1xcbmdsX0ZyYWdDb2xvci5yZ2IgKj0gY29sb3I7XFxufVxcbn1cIn19O1xuIiwiLy8gVGhpcyBUSFJFRXggaGVscGVyIG1ha2VzIGl0IGVhc3kgdG8gaGFuZGxlIHdpbmRvdyByZXNpemUuXG4vLyBJdCB3aWxsIHVwZGF0ZSByZW5kZXJlciBhbmQgY2FtZXJhIHdoZW4gd2luZG93IGlzIHJlc2l6ZWQuXG4vL1xuLy8gIyBVc2FnZVxuLy9cbi8vICoqU3RlcCAxKio6IFN0YXJ0IHVwZGF0aW5nIHJlbmRlcmVyIGFuZCBjYW1lcmFcbi8vXG4vLyBgYGB2YXIgd2luZG93UmVzaXplID0gbmV3IFRIUkVFeC5XaW5kb3dSZXNpemUoYVJlbmRlcmVyLCBhQ2FtZXJhKWBgYFxuLy8gICAgXG4vLyAqKlN0ZXAgMioqOiBzdG9wIHVwZGF0aW5nIHJlbmRlcmVyIGFuZCBjYW1lcmFcbi8vXG4vLyBgYGB3aW5kb3dSZXNpemUuZGVzdHJveSgpYGBgXG4vLyAjIENvZGVcblxuLy9cblxuLyoqIEBuYW1lc3BhY2UgKi9cbnZhciBUSFJFRXhcdD0gVEhSRUV4IHx8IHt9XG5cbi8qKlxuICogVXBkYXRlIHJlbmRlcmVyIGFuZCBjYW1lcmEgd2hlbiB0aGUgd2luZG93IGlzIHJlc2l6ZWRcbiAqIFxuICogQHBhcmFtIHtPYmplY3R9IHJlbmRlcmVyIHRoZSByZW5kZXJlciB0byB1cGRhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBDYW1lcmEgdGhlIGNhbWVyYSB0byB1cGRhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGRpbWVuc2lvbiBjYWxsYmFjayBmb3IgcmVuZGVyZXIgc2l6ZVxuKi9cblRIUkVFeC5XaW5kb3dSZXNpemVcdD0gZnVuY3Rpb24ocmVuZGVyZXIsIGNhbWVyYSwgZGltZW5zaW9uKXtcblx0ZGltZW5zaW9uIFx0PSBkaW1lbnNpb24gfHwgZnVuY3Rpb24oKXsgcmV0dXJuIHsgd2lkdGg6IHdpbmRvdy5pbm5lcldpZHRoLCBoZWlnaHQ6IHdpbmRvdy5pbm5lckhlaWdodCB9IH1cblx0dmFyIGNhbGxiYWNrXHQ9IGZ1bmN0aW9uKCl7XG5cdFx0Ly8gZmV0Y2ggdGFyZ2V0IHJlbmRlcmVyIHNpemVcblx0XHR2YXIgcmVuZGVyZXJTaXplID0gZGltZW5zaW9uKCk7XG5cdFx0Ly8gbm90aWZ5IHRoZSByZW5kZXJlciBvZiB0aGUgc2l6ZSBjaGFuZ2Vcblx0XHRyZW5kZXJlci5zZXRTaXplKCByZW5kZXJlclNpemUud2lkdGgsIHJlbmRlcmVyU2l6ZS5oZWlnaHQgKVxuXHRcdC8vIHVwZGF0ZSB0aGUgY2FtZXJhXG5cdFx0Y2FtZXJhLmFzcGVjdFx0PSByZW5kZXJlclNpemUud2lkdGggLyByZW5kZXJlclNpemUuaGVpZ2h0XG5cdFx0Y2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKVxuXHR9XG5cdC8vIGJpbmQgdGhlIHJlc2l6ZSBldmVudFxuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgY2FsbGJhY2ssIGZhbHNlKVxuXHQvLyByZXR1cm4gLnN0b3AoKSB0aGUgZnVuY3Rpb24gdG8gc3RvcCB3YXRjaGluZyB3aW5kb3cgcmVzaXplXG5cdHJldHVybiB7XG5cdFx0dHJpZ2dlclx0OiBmdW5jdGlvbigpe1xuXHRcdFx0Y2FsbGJhY2soKVxuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogU3RvcCB3YXRjaGluZyB3aW5kb3cgcmVzaXplXG5cdFx0Ki9cblx0XHRkZXN0cm95XHQ6IGZ1bmN0aW9uKCl7XG5cdFx0XHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgY2FsbGJhY2spXG5cdFx0fVxuXHR9XG59XG4iLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgnQm9va01hdGVyaWFsJywgZnVuY3Rpb24gKCkge1xuXHR2YXIgQm9va01hdGVyaWFsID0gZnVuY3Rpb24obWFwSW1hZ2UsIGJ1bXBNYXBJbWFnZSwgc3BlY3VsYXJNYXBJbWFnZSwgY292ZXJNYXBJbWFnZSkge1xuXHRcdHZhciBkZWZpbmVzID0ge307XG5cdFx0dmFyIHVuaWZvcm1zO1xuXHRcdHZhciBwYXJhbWV0ZXJzO1xuXG4gICAgICAgIHZhciBtYXA7XG4gICAgICAgIHZhciBidW1wTWFwO1xuICAgICAgICB2YXIgc3BlY3VsYXJNYXA7XG4gICAgICAgIHZhciBjb3Zlck1hcDtcblx0XHRcblx0XHR1bmlmb3JtcyA9IFRIUkVFLlVuaWZvcm1zVXRpbHMubWVyZ2UoW1xuXHRcdFx0VEhSRUUuVW5pZm9ybXNMaWIuY29tbW9uLFxuXHRcdFx0VEhSRUUuVW5pZm9ybXNMaWIuYnVtcCxcblx0XHRcdFRIUkVFLlVuaWZvcm1zTGliLmZvZyxcblx0XHRcdFRIUkVFLlVuaWZvcm1zTGliLmxpZ2h0c1xuXHRcdF0pO1xuXG5cdFx0dW5pZm9ybXMuc2hpbmluZXNzID0ge3R5cGU6ICdmJywgdmFsdWU6IDMwfTtcblx0XHRkZWZpbmVzLlBIT05HID0gdHJ1ZTtcblxuXHRcdGlmKG1hcEltYWdlKSB7XG5cdFx0XHRtYXAgPSBuZXcgVEhSRUUuVGV4dHVyZShtYXBJbWFnZSk7XG5cdFx0XHRtYXAubmVlZHNVcGRhdGUgPSB0cnVlO1xuXHRcdFx0dW5pZm9ybXMubWFwID0ge3R5cGU6ICd0JywgdmFsdWU6IG1hcH07XG5cdFx0XHR0aGlzLm1hcCA9IHRydWU7XG5cdFx0fVxuXHRcdGlmKGJ1bXBNYXBJbWFnZSkge1xuXHRcdFx0YnVtcE1hcCA9IG5ldyBUSFJFRS5UZXh0dXJlKGJ1bXBNYXBJbWFnZSk7XG5cdFx0XHRidW1wTWFwLm5lZWRzVXBkYXRlID0gdHJ1ZTtcblx0XHRcdHVuaWZvcm1zLmJ1bXBNYXAgPSB7dHlwZTogJ3QnLCB2YWx1ZTogYnVtcE1hcH07XG5cdFx0XHR1bmlmb3Jtcy5idW1wU2NhbGUudmFsdWUgPSAwLjAwNTtcblx0XHRcdHRoaXMuYnVtcE1hcCA9IHRydWU7XG5cdFx0fVxuXHRcdGlmKHNwZWN1bGFyTWFwSW1hZ2UpIHtcblx0XHRcdHNwZWN1bGFyTWFwID0gbmV3IFRIUkVFLlRleHR1cmUoc3BlY3VsYXJNYXBJbWFnZSk7XG5cdFx0XHRzcGVjdWxhck1hcC5uZWVkc1VwZGF0ZSA9IHRydWU7XG5cdFx0XHR1bmlmb3Jtcy5zcGVjdWxhciA9IHt0eXBlOiAnYycsIHZhbHVlOiBuZXcgVEhSRUUuQ29sb3IoMHg1NTU1NTUpfTtcblx0XHRcdHVuaWZvcm1zLnNwZWN1bGFyTWFwID0ge3R5cGU6ICd0JywgdmFsdWU6IHNwZWN1bGFyTWFwfTtcblx0XHRcdHRoaXMuc3BlY3VsYXJNYXAgPSB0cnVlO1xuXHRcdH1cbiAgICAgICAgaWYoY292ZXJNYXBJbWFnZSkge1xuXHRcdFx0Y292ZXJNYXAgPSBuZXcgVEhSRUUuVGV4dHVyZShjb3Zlck1hcEltYWdlKTtcblx0XHRcdGNvdmVyTWFwLm5lZWRzVXBkYXRlID0gdHJ1ZTtcblx0XHRcdHVuaWZvcm1zLmNvdmVyTWFwID0ge3R5cGU6ICd0JywgdmFsdWU6IGNvdmVyTWFwfTtcblx0XHRcdGRlZmluZXMuVVNFX0NPVkVSID0gdHJ1ZTtcbiAgICAgICAgfVxuXG5cdFx0cGFyYW1ldGVycyA9IHtcblx0XHRcdHZlcnRleFNoYWRlcjogdmVydGV4U2hhZGVyLFx0XG5cdFx0XHRmcmFnbWVudFNoYWRlcjogZnJhZ21lbnRTaGFkZXIsXG5cdFx0XHR1bmlmb3JtczogdW5pZm9ybXMsXG5cdFx0XHRkZWZpbmVzOiBkZWZpbmVzLFxuXHRcdFx0bGlnaHRzOiB0cnVlLFxuXHRcdFx0Zm9nOiB0cnVlXG5cdFx0fTtcblxuXHRcdFRIUkVFLlNoYWRlck1hdGVyaWFsLmNhbGwodGhpcywgcGFyYW1ldGVycyk7XG5cdH07XG5cblx0Qm9va01hdGVyaWFsLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoVEhSRUUuU2hhZGVyTWF0ZXJpYWwucHJvdG90eXBlKTtcblxuXHRCb29rTWF0ZXJpYWwucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gVEhSRUUuQm9va01hdGVyaWFsO1xuXG5cdHZhciB2ZXJ0ZXhTaGFkZXIgPSBbXG5cdFx0J3ZhcnlpbmcgdmVjMyB2Vmlld1Bvc2l0aW9uOycsXG5cdFx0J3ZhcnlpbmcgdmVjMyB2Tm9ybWFsOycsXG5cblx0XHRUSFJFRS5TaGFkZXJDaHVuay5tYXBfcGFyc192ZXJ0ZXgsXG5cdFx0VEhSRUUuU2hhZGVyQ2h1bmsubGlnaHRzX3Bob25nX3BhcnNfdmVydGV4LFxuXHRcdFRIUkVFLlNoYWRlckNodW5rLmNvbG9yX3BhcnNfdmVydGV4LFxuXG5cdFx0J3ZvaWQgbWFpbigpIHsnLFxuXHRcdFx0VEhSRUUuU2hhZGVyQ2h1bmsubWFwX3ZlcnRleCxcblx0XHRcdFRIUkVFLlNoYWRlckNodW5rLmNvbG9yX3ZlcnRleCxcblx0XHRcdFRIUkVFLlNoYWRlckNodW5rLmRlZmF1bHRub3JtYWxfdmVydGV4LFxuXHRcdFx0J3ZOb3JtYWwgPSBub3JtYWxpemUodHJhbnNmb3JtZWROb3JtYWwpOycsXG5cdFx0XHRUSFJFRS5TaGFkZXJDaHVuay5kZWZhdWx0X3ZlcnRleCxcblx0XHRcdCd2Vmlld1Bvc2l0aW9uID0gLW12UG9zaXRpb24ueHl6OycsXG5cdFx0XHRUSFJFRS5TaGFkZXJDaHVuay53b3JsZHBvc192ZXJ0ZXgsXG5cdFx0XHRUSFJFRS5TaGFkZXJDaHVuay5saWdodHNfcGhvbmdfdmVydGV4LFxuXHRcdCd9J1xuXHRdLmpvaW4oJ1xcbicpO1xuXG5cdHZhciBmcmFnbWVudFNoYWRlciA9IFtcblx0XHQndW5pZm9ybSB2ZWMzIGRpZmZ1c2U7Jyxcblx0XHQndW5pZm9ybSBmbG9hdCBvcGFjaXR5OycsXG5cblx0XHQndW5pZm9ybSB2ZWMzIGFtYmllbnQ7Jyxcblx0XHQndW5pZm9ybSB2ZWMzIGVtaXNzaXZlOycsXG5cdFx0J3VuaWZvcm0gdmVjMyBzcGVjdWxhcjsnLFxuXHRcdCd1bmlmb3JtIGZsb2F0IHNoaW5pbmVzczsnLFxuXG5cdFx0J3VuaWZvcm0gc2FtcGxlcjJEIGNvdmVyTWFwOycsXG5cblx0XHRUSFJFRS5TaGFkZXJDaHVuay5jb2xvcl9wYXJzX2ZyYWdtZW50LFxuXHRcdFRIUkVFLlNoYWRlckNodW5rLm1hcF9wYXJzX2ZyYWdtZW50LFxuXHRcdFRIUkVFLlNoYWRlckNodW5rLmZvZ19wYXJzX2ZyYWdtZW50LFxuXHRcdFRIUkVFLlNoYWRlckNodW5rLmxpZ2h0c19waG9uZ19wYXJzX2ZyYWdtZW50LFxuXHRcdFRIUkVFLlNoYWRlckNodW5rLmJ1bXBtYXBfcGFyc19mcmFnbWVudCxcblx0XHRUSFJFRS5TaGFkZXJDaHVuay5zcGVjdWxhcm1hcF9wYXJzX2ZyYWdtZW50LFxuXG5cdFx0J3ZvaWQgbWFpbigpIHsnLFxuXHRcdFx0J3ZlYzQgdGVzdGNvbG9yID0gdmVjNCgxLjAsIDEuMCwgMS4wLCAxLjApOycsXG5cdFx0XHQnZmxvYXQgZXBzID0gMC4wMDQ7Jyxcblx0XHRcdCd2ZWM0IGJhc2VDb2xvciAgPSB0ZXh0dXJlMkQobWFwLCB2VXYpOycsXG5cblx0XHRcdCcjaWZkZWYgVVNFX0NPVkVSJyxcblx0XHQgICAgXHQndmVjNCBjb3ZlckNvbG9yID0gdGV4dHVyZTJEKGNvdmVyTWFwLCB2VXYgKiB2ZWMyKDIuMywgMS4zKSAtIHZlYzIoMS4zLCAwLjMpKTsnLFxuXHRcdFx0ICAgICdpZih2VXYueSA+IDAuMjMgJiYgKHZVdi54ID4gMC41NyB8fCAoYWxsKGdyZWF0ZXJUaGFuRXF1YWwoYmFzZUNvbG9yLHRlc3Rjb2xvci1lcHMpKSAmJiBhbGwobGVzc1RoYW5FcXVhbChiYXNlQ29sb3IsdGVzdGNvbG9yK2VwcykpKSkpJyxcblx0XHRcdCAgICBcdCdnbF9GcmFnQ29sb3IgPSBjb3ZlckNvbG9yOycsXG5cdFx0XHQgICAgJ2Vsc2UnLFxuXHRcdFx0ICAgIFx0J2dsX0ZyYWdDb2xvciA9IGJhc2VDb2xvcjsnLFxuXHRcdFx0JyNlbHNlJyxcblx0XHQgICAgXHQnZ2xfRnJhZ0NvbG9yID0gYmFzZUNvbG9yOycsXG5cdFx0XHQnI2VuZGlmJyxcblxuXHRcdFx0VEhSRUUuU2hhZGVyQ2h1bmsuc3BlY3VsYXJtYXBfZnJhZ21lbnQsXG5cdFx0XHRUSFJFRS5TaGFkZXJDaHVuay5saWdodHNfcGhvbmdfZnJhZ21lbnQsXG5cdFx0XHRUSFJFRS5TaGFkZXJDaHVuay5jb2xvcl9mcmFnbWVudCxcblx0XHRcdFRIUkVFLlNoYWRlckNodW5rLmZvZ19mcmFnbWVudCxcblx0XHQnfSdcdFx0XG5cdF0uam9pbignXFxuJyk7XG5cblx0cmV0dXJuIEJvb2tNYXRlcmlhbDtcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5mYWN0b3J5KCdCYXNlT2JqZWN0JywgZnVuY3Rpb24gKHN1YmNsYXNzT2YpIHtcblx0dmFyIEJhc2VPYmplY3QgPSBmdW5jdGlvbihkYXRhT2JqZWN0LCBnZW9tZXRyeSwgbWF0ZXJpYWwpIHtcblx0XHRUSFJFRS5NZXNoLmNhbGwodGhpcywgZ2VvbWV0cnksIG1hdGVyaWFsKTtcblxuXHRcdHRoaXMuZGF0YU9iamVjdCA9IGRhdGFPYmplY3QgfHwge307XG5cdFx0dGhpcy5kYXRhT2JqZWN0LnJvdGF0aW9uID0gdGhpcy5kYXRhT2JqZWN0LnJvdGF0aW9uIHx8IFswLCAwLCAwXTtcblx0XHRcblx0XHR0aGlzLmlkID0gdGhpcy5kYXRhT2JqZWN0LmlkO1xuXHRcdHRoaXMucG9zaXRpb24gPSBuZXcgVEhSRUUuVmVjdG9yMyh0aGlzLmRhdGFPYmplY3QucG9zX3gsIHRoaXMuZGF0YU9iamVjdC5wb3NfeSwgdGhpcy5kYXRhT2JqZWN0LnBvc196KTtcblx0XHR0aGlzLnJvdGF0aW9uLm9yZGVyID0gJ1hZWic7XG5cdFx0dGhpcy5yb3RhdGlvbi5mcm9tQXJyYXkodGhpcy5kYXRhT2JqZWN0LnJvdGF0aW9uLm1hcChOdW1iZXIpKTtcblxuXHRcdHRoaXMudXBkYXRlQm91bmRpbmdCb3goKTtcdFx0XG5cdH07XG5cdFxuXHRCYXNlT2JqZWN0LnByb3RvdHlwZSA9IHN1YmNsYXNzT2YoVEhSRUUuTWVzaCk7XG5cblx0QmFzZU9iamVjdC5wcm90b3R5cGUuZ2V0VHlwZSA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLnR5cGU7XG5cdH07XG5cblx0QmFzZU9iamVjdC5wcm90b3R5cGUuaXNPdXRPZlBhcnJlbnQgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gTWF0aC5hYnModGhpcy5ib3VuZGluZ0JveC5jZW50ZXIueCAtIHRoaXMucGFyZW50LmJvdW5kaW5nQm94LmNlbnRlci54KSA+ICh0aGlzLnBhcmVudC5ib3VuZGluZ0JveC5yYWRpdXMueCAtIHRoaXMuYm91bmRpbmdCb3gucmFkaXVzLngpIHx8XG5cdFx0XHRcdE1hdGguYWJzKHRoaXMuYm91bmRpbmdCb3guY2VudGVyLnogLSB0aGlzLnBhcmVudC5ib3VuZGluZ0JveC5jZW50ZXIueikgPiAodGhpcy5wYXJlbnQuYm91bmRpbmdCb3gucmFkaXVzLnogLSB0aGlzLmJvdW5kaW5nQm94LnJhZGl1cy56KTtcblx0fTtcblxuXHRCYXNlT2JqZWN0LnByb3RvdHlwZS5pc0NvbGxpZGVkID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyXG5cdFx0XHRyZXN1bHQsXG5cdFx0XHR0YXJnZXRzLFxuXHRcdFx0dGFyZ2V0LFxuXHRcdFx0aTtcblxuXHRcdHRoaXMudXBkYXRlQm91bmRpbmdCb3goKTtcblxuXHRcdHJlc3VsdCA9IHRoaXMuaXNPdXRPZlBhcnJlbnQoKTtcblx0XHR0YXJnZXRzID0gdGhpcy5wYXJlbnQuY2hpbGRyZW47XG5cblx0XHRpZighcmVzdWx0KSB7XG5cdFx0XHRmb3IoaSA9IHRhcmdldHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRcdFx0dGFyZ2V0ID0gdGFyZ2V0c1tpXS5ib3VuZGluZ0JveDtcblxuXHRcdFx0XHRpZih0YXJnZXRzW2ldID09PSB0aGlzIHx8XG5cdFx0XHRcdFx0IXRhcmdldCB8fCAvLyBjaGlsZHJlbiB3aXRob3V0IEJCXG5cdFx0XHRcdFx0KE1hdGguYWJzKHRoaXMuYm91bmRpbmdCb3guY2VudGVyLnggLSB0YXJnZXQuY2VudGVyLngpID4gKHRoaXMuYm91bmRpbmdCb3gucmFkaXVzLnggKyB0YXJnZXQucmFkaXVzLngpKSB8fFxuXHRcdFx0XHRcdChNYXRoLmFicyh0aGlzLmJvdW5kaW5nQm94LmNlbnRlci55IC0gdGFyZ2V0LmNlbnRlci55KSA+ICh0aGlzLmJvdW5kaW5nQm94LnJhZGl1cy55ICsgdGFyZ2V0LnJhZGl1cy55KSkgfHxcblx0XHRcdFx0XHQoTWF0aC5hYnModGhpcy5ib3VuZGluZ0JveC5jZW50ZXIueiAtIHRhcmdldC5jZW50ZXIueikgPiAodGhpcy5ib3VuZGluZ0JveC5yYWRpdXMueiArIHRhcmdldC5yYWRpdXMueikpKSB7XHRcblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0fVxuXG5cdFx0ICAgIFx0cmVzdWx0ID0gdHJ1ZTtcdFx0XG5cdFx0ICAgIFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fTtcblxuXHRCYXNlT2JqZWN0LnByb3RvdHlwZS5tb3ZlID0gZnVuY3Rpb24obmV3UG9zaXRpb24pIHtcblx0XHR2YXIgXG5cdFx0XHRjdXJyZW50UG9zaXRpb24sXG5cdFx0XHRyZXN1bHQ7XG5cblx0XHRyZXN1bHQgPSBmYWxzZTtcblx0XHRjdXJyZW50UG9zaXRpb24gPSB0aGlzLnBvc2l0aW9uLmNsb25lKCk7XG5cdFx0XG5cdFx0aWYobmV3UG9zaXRpb24ueCkge1xuXHRcdFx0dGhpcy5wb3NpdGlvbi5zZXRYKG5ld1Bvc2l0aW9uLngpO1xuXG5cdFx0XHRpZih0aGlzLmlzQ29sbGlkZWQoKSkge1xuXHRcdFx0XHR0aGlzLnBvc2l0aW9uLnNldFgoY3VycmVudFBvc2l0aW9uLngpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmVzdWx0ID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZihuZXdQb3NpdGlvbi56KSB7XG5cdFx0XHR0aGlzLnBvc2l0aW9uLnNldFoobmV3UG9zaXRpb24ueik7XG5cblx0XHRcdGlmKHRoaXMuaXNDb2xsaWRlZCgpKSB7XG5cdFx0XHRcdHRoaXMucG9zaXRpb24uc2V0WihjdXJyZW50UG9zaXRpb24ueik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXN1bHQgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHRoaXMuY2hhbmdlZCA9IHRoaXMuY2hhbmdlZCB8fCByZXN1bHQ7XG5cdFx0dGhpcy51cGRhdGVCb3VuZGluZ0JveCgpO1xuXG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fTtcblxuXHRCYXNlT2JqZWN0LnByb3RvdHlwZS5yb3RhdGUgPSBmdW5jdGlvbihkWCwgZFksIGlzRGVtbykge1xuXHRcdHZhciBcblx0XHRcdGN1cnJlbnRSb3RhdGlvbiA9IHRoaXMucm90YXRpb24uY2xvbmUoKSxcblx0XHRcdHJlc3VsdCA9IGZhbHNlOyBcblx0XHRcblx0XHRpZihkWCkge1xuXHRcdFx0dGhpcy5yb3RhdGlvbi55ICs9IGRYICogMC4wMTtcblxuXHRcdFx0aWYoIWlzRGVtbyAmJiB0aGlzLmlzQ29sbGlkZWQoKSkge1xuXHRcdFx0XHR0aGlzLnJvdGF0aW9uLnkgPSBjdXJyZW50Um90YXRpb24ueTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJlc3VsdCA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYoZFkpIHtcblx0XHRcdHRoaXMucm90YXRpb24ueCArPSBkWSAqIDAuMDE7XG5cblx0XHRcdGlmKCFpc0RlbW8gJiYgdGhpcy5pc0NvbGxpZGVkKCkpIHtcblx0XHRcdFx0dGhpcy5yb3RhdGlvbi54ID0gY3VycmVudFJvdGF0aW9uLng7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXN1bHQgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHRoaXMuY2hhbmdlZCA9IHRoaXMuY2hhbmdlZCB8fCAoIWlzRGVtbyAmJiByZXN1bHQpO1xuXHRcdHRoaXMudXBkYXRlQm91bmRpbmdCb3goKTtcblx0fTtcblxuXHRCYXNlT2JqZWN0LnByb3RvdHlwZS51cGRhdGVCb3VuZGluZ0JveCA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhclxuXHRcdFx0Ym91bmRpbmdCb3gsXG5cdFx0XHRyYWRpdXMsXG5cdFx0XHRjZW50ZXI7XG5cblx0XHR0aGlzLnVwZGF0ZU1hdHJpeCgpO1xuXHRcdGJvdW5kaW5nQm94ID0gdGhpcy5nZW9tZXRyeS5ib3VuZGluZ0JveC5jbG9uZSgpLmFwcGx5TWF0cml4NCh0aGlzLm1hdHJpeCk7XG5cdFx0XG5cdFx0cmFkaXVzID0ge1xuXHRcdFx0eDogKGJvdW5kaW5nQm94Lm1heC54IC0gYm91bmRpbmdCb3gubWluLngpICogMC41LFxuXHRcdFx0eTogKGJvdW5kaW5nQm94Lm1heC55IC0gYm91bmRpbmdCb3gubWluLnkpICogMC41LFxuXHRcdFx0ejogKGJvdW5kaW5nQm94Lm1heC56IC0gYm91bmRpbmdCb3gubWluLnopICogMC41XG5cdFx0fTtcblxuXHRcdGNlbnRlciA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG5cdFx0Y2VudGVyLmFkZFZlY3RvcnMoYm91bmRpbmdCb3gubWluLCBib3VuZGluZ0JveC5tYXgpO1xuXHRcdGNlbnRlci5tdWx0aXBseVNjYWxhcigwLjUpO1xuXG5cdFx0dGhpcy5ib3VuZGluZ0JveCA9IHtcblx0XHRcdHJhZGl1czogcmFkaXVzLFxuXHRcdFx0Y2VudGVyOiBjZW50ZXJcblx0XHR9O1xuXHR9O1xuXG5cdEJhc2VPYmplY3QucHJvdG90eXBlLnJvbGxiYWNrID0gZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5wb3NpdGlvbi54ID0gdGhpcy5kYXRhT2JqZWN0LnBvc194O1xuXHRcdHRoaXMucG9zaXRpb24ueSA9IHRoaXMuZGF0YU9iamVjdC5wb3NfeTtcblx0XHR0aGlzLnBvc2l0aW9uLnogPSB0aGlzLmRhdGFPYmplY3QucG9zX3o7XG5cblx0XHR0aGlzLnJvdGF0aW9uLnggPSB0aGlzLmRhdGFPYmplY3Qucm90YXRpb25bMF07XG5cdFx0dGhpcy5yb3RhdGlvbi55ID0gdGhpcy5kYXRhT2JqZWN0LnJvdGF0aW9uWzFdO1xuXHRcdHRoaXMucm90YXRpb24ueiA9IHRoaXMuZGF0YU9iamVjdC5yb3RhdGlvblsyXTtcblx0XHRcblx0XHR0aGlzLnVwZGF0ZUJvdW5kaW5nQm94KCk7XG5cdH07XG5cblx0cmV0dXJuIEJhc2VPYmplY3Q7XHRcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5mYWN0b3J5KCdCb29rT2JqZWN0JywgZnVuY3Rpb24gKCRsb2csIEJhc2VPYmplY3QsIGRhdGEsIHN1YmNsYXNzT2YpIHtcdFxuXHR2YXIgQm9va09iamVjdCA9IGZ1bmN0aW9uKGRhdGFPYmplY3QsIGdlb21ldHJ5LCBtYXRlcmlhbCkge1xuXHRcdEJhc2VPYmplY3QuY2FsbCh0aGlzLCBkYXRhT2JqZWN0LCBnZW9tZXRyeSwgbWF0ZXJpYWwpO1xuXHR9O1xuXG5cdEJvb2tPYmplY3QuVFlQRSA9ICdCb29rT2JqZWN0JztcblxuXHRCb29rT2JqZWN0LnByb3RvdHlwZSA9IHN1YmNsYXNzT2YoQmFzZU9iamVjdCk7XG5cdEJvb2tPYmplY3QucHJvdG90eXBlLnR5cGUgPSBCb29rT2JqZWN0LlRZUEU7XG5cblx0Qm9va09iamVjdC5wcm90b3R5cGUuc2F2ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBzY29wZSA9IHRoaXM7XG5cdFx0dmFyIGR0byA9IHtcblx0XHRcdGlkOiB0aGlzLmRhdGFPYmplY3QuaWQsXG5cdFx0XHR1c2VySWQ6IHRoaXMuZGF0YU9iamVjdC51c2VySWQsXG5cdFx0XHRwb3NfeDogdGhpcy5wb3NpdGlvbi54LFxuXHRcdFx0cG9zX3k6IHRoaXMucG9zaXRpb24ueSxcblx0XHRcdHBvc196OiB0aGlzLnBvc2l0aW9uLnpcblx0XHR9O1xuXG5cdFx0cmV0dXJuIGRhdGEucG9zdEJvb2soZHRvKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZUR0bykge1xuXHRcdFx0c2NvcGUuZGF0YU9iamVjdCA9IHJlc3BvbnNlRHRvO1xuXHRcdFx0c2NvcGUuY2hhbmdlZCA9IGZhbHNlO1xuXHRcdH0pO1xuXHR9O1xuXG5cdEJvb2tPYmplY3QucHJvdG90eXBlLnNldFBhcmVudCA9IGZ1bmN0aW9uKHBhcmVudCkge1xuXHRcdGlmKHRoaXMucGFyZW50ICE9IHBhcmVudCkge1xuXHRcdFx0aWYocGFyZW50KSB7XG5cdFx0XHRcdHBhcmVudC5hZGQodGhpcyk7XG5cdFx0XHRcdHRoaXMuZGF0YU9iamVjdC5zaGVsZklkID0gcGFyZW50LmlkO1xuXHRcdFx0XHR0aGlzLmRhdGFPYmplY3Quc2VjdGlvbklkID0gcGFyZW50LnBhcmVudC5pZDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMucGFyZW50LnJlbW92ZSh0aGlzKTtcblx0XHRcdFx0dGhpcy5kYXRhT2JqZWN0LnNoZWxmSWQgPSBudWxsO1xuXHRcdFx0XHR0aGlzLmRhdGFPYmplY3Quc2VjdGlvbklkID0gbnVsbDtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0cmV0dXJuIEJvb2tPYmplY3Q7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgnQ2FtZXJhT2JqZWN0JywgZnVuY3Rpb24gKEJhc2VPYmplY3QsIHN1YmNsYXNzT2YpIHtcblx0dmFyIENhbWVyYU9iamVjdCA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBnZW9tZXRyeSA9IG5ldyBUSFJFRS5HZW9tZXRyeSgpO1xuXHRcdGdlb21ldHJ5LmJvdW5kaW5nQm94ID0gbmV3IFRIUkVFLkJveDMobmV3IFRIUkVFLlZlY3RvcjMoLTAuMSwgLTEsIC0wLjEpLCBuZXcgVEhSRUUuVmVjdG9yMygwLjEsIDEsIDAuMSkpO1xuXG5cdFx0QmFzZU9iamVjdC5jYWxsKHRoaXMsIG51bGwsIGdlb21ldHJ5KTtcblx0fTtcblxuXHRDYW1lcmFPYmplY3QucHJvdG90eXBlID0gc3ViY2xhc3NPZihCYXNlT2JqZWN0KTtcblx0XG5cdENhbWVyYU9iamVjdC5wcm90b3R5cGUudXBkYXRlQm91bmRpbmdCb3ggPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgcmFkaXVzID0ge1xuXHRcdFx0eDogdGhpcy5nZW9tZXRyeS5ib3VuZGluZ0JveC5tYXgueCwgXG5cdFx0XHR5OiB0aGlzLmdlb21ldHJ5LmJvdW5kaW5nQm94Lm1heC55LCBcblx0XHRcdHo6IHRoaXMuZ2VvbWV0cnkuYm91bmRpbmdCb3gubWF4Lnpcblx0XHR9O1xuXG5cdFx0dGhpcy5ib3VuZGluZ0JveCA9IHtcblx0XHRcdHJhZGl1czogcmFkaXVzLFxuXHRcdFx0Y2VudGVyOiB0aGlzLnBvc2l0aW9uIC8vVE9ETzogbmVlZHMgY2VudGVyIG9mIHNlY3Rpb24gaW4gcGFyZW50IG9yIHdvcmxkIGNvb3JkaW5hdGVzXG5cdFx0fTtcblx0fTtcblxuXHRyZXR1cm4gQ2FtZXJhT2JqZWN0O1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ1ZpcnR1YWxCb29rc2hlbGYnKVxuLmZhY3RvcnkoJ0xpYnJhcnlPYmplY3QnLCBmdW5jdGlvbiAoQmFzZU9iamVjdCwgc3ViY2xhc3NPZikge1xuXHR2YXIgTGlicmFyeU9iamVjdCA9IGZ1bmN0aW9uKHBhcmFtcywgZ2VvbWV0cnksIG1hdGVyaWFsKSB7XG5cdFx0QmFzZU9iamVjdC5jYWxsKHRoaXMsIHBhcmFtcywgZ2VvbWV0cnksIG1hdGVyaWFsKTtcblx0fTtcblxuXHRMaWJyYXJ5T2JqZWN0LnByb3RvdHlwZSA9IHN1YmNsYXNzT2YoQmFzZU9iamVjdCk7XG5cblx0cmV0dXJuIExpYnJhcnlPYmplY3Q7XHRcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5mYWN0b3J5KCdTZWN0aW9uT2JqZWN0JywgZnVuY3Rpb24gKEJhc2VPYmplY3QsIFNoZWxmT2JqZWN0LCBkYXRhLCBzdWJjbGFzc09mKSB7XG5cdHZhciBTZWN0aW9uT2JqZWN0ID0gZnVuY3Rpb24ocGFyYW1zLCBnZW9tZXRyeSwgbWF0ZXJpYWwpIHtcblx0XHRCYXNlT2JqZWN0LmNhbGwodGhpcywgcGFyYW1zLCBnZW9tZXRyeSwgbWF0ZXJpYWwpO1xuXG5cdFx0dGhpcy5zaGVsdmVzID0ge307XG5cdFx0Zm9yKHZhciBrZXkgaW4gcGFyYW1zLmRhdGEuc2hlbHZlcykge1xuXHRcdFx0dGhpcy5zaGVsdmVzW2tleV0gPSBuZXcgU2hlbGZPYmplY3QocGFyYW1zLmRhdGEuc2hlbHZlc1trZXldKTsgXG5cdFx0XHR0aGlzLmFkZCh0aGlzLnNoZWx2ZXNba2V5XSk7XG5cdFx0fVxuXHR9O1xuXG5cdFNlY3Rpb25PYmplY3QuVFlQRSA9ICdTZWN0aW9uT2JqZWN0JztcblxuXHRTZWN0aW9uT2JqZWN0LnByb3RvdHlwZSA9IHN1YmNsYXNzT2YoQmFzZU9iamVjdCk7XG5cdFNlY3Rpb25PYmplY3QucHJvdG90eXBlLnR5cGUgPSBTZWN0aW9uT2JqZWN0LlRZUEU7XG5cblx0U2VjdGlvbk9iamVjdC5wcm90b3R5cGUuc2F2ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBzY29wZSA9IHRoaXM7XG5cdFx0dmFyIGR0byA9IHtcblx0XHRcdGlkOiB0aGlzLmRhdGFPYmplY3QuaWQsXG5cdFx0XHR1c2VySWQ6IHRoaXMuZGF0YU9iamVjdC51c2VySWQsXG5cdFx0XHRwb3NfeDogdGhpcy5wb3NpdGlvbi54LFxuXHRcdFx0cG9zX3k6IHRoaXMucG9zaXRpb24ueSxcblx0XHRcdHBvc196OiB0aGlzLnBvc2l0aW9uLnosXG5cdFx0XHRyb3RhdGlvbjogW3RoaXMucm90YXRpb24ueCwgdGhpcy5yb3RhdGlvbi55LCB0aGlzLnJvdGF0aW9uLnpdXG5cdFx0fTtcblxuXHRcdHJldHVybiBkYXRhLnBvc3RTZWN0aW9uKGR0bykudGhlbihmdW5jdGlvbiAocmVzcG9uc2VEdG8pIHtcblx0XHRcdHNjb3BlLmRhdGFPYmplY3QgPSByZXNwb25zZUR0bztcblx0XHRcdHNjb3BlLmNoYW5nZWQgPSBmYWxzZTtcblx0XHR9KTtcblx0fTtcblxuXHRTZWN0aW9uT2JqZWN0LnByb3RvdHlwZS5zZXRQYXJlbnQgPSBmdW5jdGlvbihwYXJlbnQpIHtcblx0XHRpZih0aGlzLnBhcmVudCAhPSBwYXJlbnQpIHtcblx0XHRcdGlmKHBhcmVudCkge1xuXHRcdFx0XHRwYXJlbnQuYWRkKHRoaXMpO1xuXHRcdFx0XHR0aGlzLmRhdGFPYmplY3QubGlicmFyeUlkID0gcGFyZW50LmlkO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5wYXJlbnQucmVtb3ZlKHRoaXMpO1xuXHRcdFx0XHR0aGlzLmRhdGFPYmplY3QubGlicmFyeUlkID0gbnVsbDtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0cmV0dXJuIFNlY3Rpb25PYmplY3Q7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgnU2VsZWN0b3JNZXRhJywgZnVuY3Rpb24gKCkge1xuXHR2YXIgU2VsZWN0b3JNZXRhID0gZnVuY3Rpb24oc2VsZWN0ZWRPYmplY3QpIHtcblx0XHRpZihzZWxlY3RlZE9iamVjdCkge1xuXHRcdFx0dGhpcy5pZCA9IHNlbGVjdGVkT2JqZWN0LmlkO1xuXHRcdFx0dGhpcy5wYXJlbnRJZCA9IHNlbGVjdGVkT2JqZWN0LnBhcmVudC5pZDtcblx0XHRcdHRoaXMudHlwZSA9IHNlbGVjdGVkT2JqZWN0LmdldFR5cGUoKTtcblx0XHR9XG5cdH07XG5cblx0U2VsZWN0b3JNZXRhLnByb3RvdHlwZS5pc0VtcHR5ID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuICF0aGlzLmlkO1xuXHR9O1xuXG5cdFNlbGVjdG9yTWV0YS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24obWV0YSkge1xuXHRcdHJldHVybiAhKCFtZXRhXG5cdFx0XHRcdHx8IG1ldGEuaWQgIT09IHRoaXMuaWRcblx0XHRcdFx0fHwgbWV0YS5wYXJlbnRJZCAhPT0gdGhpcy5wYXJlbnRJZFxuXHRcdFx0XHR8fCBtZXRhLnR5cGUgIT09IHRoaXMudHlwZSk7XG5cdH07XG5cdFxuXHRyZXR1cm4gU2VsZWN0b3JNZXRhO1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ1ZpcnR1YWxCb29rc2hlbGYnKVxuLmZhY3RvcnkoJ1NoZWxmT2JqZWN0JywgZnVuY3Rpb24gKEJhc2VPYmplY3QsIHN1YmNsYXNzT2YpIHtcblx0dmFyIFNoZWxmT2JqZWN0ID0gZnVuY3Rpb24ocGFyYW1zKSB7XG5cdFx0dmFyIHNpemUgPSBwYXJhbXMuc2l6ZTtcdFxuXHRcdHZhciBnZW9tZXRyeSA9IG5ldyBUSFJFRS5DdWJlR2VvbWV0cnkoc2l6ZVswXSwgc2l6ZVsxXSwgc2l6ZVsyXSk7XG5cblx0XHRnZW9tZXRyeS5jb21wdXRlQm91bmRpbmdCb3goKTtcblx0XHRCYXNlT2JqZWN0LmNhbGwodGhpcywgcGFyYW1zLCBnZW9tZXRyeSk7XG5cblx0XHR0aGlzLnBvc2l0aW9uID0gbmV3IFRIUkVFLlZlY3RvcjMocGFyYW1zLnBvc2l0aW9uWzBdLCBwYXJhbXMucG9zaXRpb25bMV0sIHBhcmFtcy5wb3NpdGlvblsyXSk7XG5cdFx0dGhpcy5zaXplID0gbmV3IFRIUkVFLlZlY3RvcjMoc2l6ZVswXSwgc2l6ZVsxXSwgc2l6ZVsyXSk7XG5cdFx0dGhpcy52aXNpYmxlID0gZmFsc2U7XG5cdH07XG5cblx0U2hlbGZPYmplY3QuVFlQRSA9ICdTaGVsZk9iamVjdCc7XG5cblx0U2hlbGZPYmplY3QucHJvdG90eXBlID0gc3ViY2xhc3NPZihCYXNlT2JqZWN0KTtcblx0U2hlbGZPYmplY3QucHJvdG90eXBlLnR5cGUgPSBTaGVsZk9iamVjdC5UWVBFO1xuXG5cdHJldHVybiBTaGVsZk9iamVjdDtcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5mYWN0b3J5KCdzdWJjbGFzc09mJywgZnVuY3Rpb24gKCkge1xuXHRmdW5jdGlvbiBfc3ViY2xhc3NPZigpIHt9XG5cblx0ZnVuY3Rpb24gc3ViY2xhc3NPZihiYXNlKSB7XG5cdCAgICBfc3ViY2xhc3NPZi5wcm90b3R5cGUgPSBiYXNlLnByb3RvdHlwZTtcblx0ICAgIHJldHVybiBuZXcgX3N1YmNsYXNzT2YoKTtcblx0fVxuXG5cdHJldHVybiBzdWJjbGFzc09mO1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ1ZpcnR1YWxCb29rc2hlbGYnKVxuLmZhY3RvcnkoJ2hpZ2hsaWdodCcsIGZ1bmN0aW9uIChlbnZpcm9ubWVudCkge1xuXHR2YXIgaGlnaGxpZ2h0ID0ge307XG5cblx0dmFyIFBMQU5FX1JPVEFUSU9OID0gTWF0aC5QSSAqIDAuNTtcblx0dmFyIFBMQU5FX01VTFRJUExJRVIgPSAyO1xuXHR2YXIgQ09MT1JfU0VMRUNUID0gMHgwMDU1MzM7XG5cdHZhciBDT0xPUl9GT0NVUyA9IDB4MDAzMzU1O1xuXG5cdHZhciBzZWxlY3Q7XG5cdHZhciBmb2N1cztcblxuXHR2YXIgaW5pdCA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBtYXRlcmlhbFByb3BlcnRpZXMgPSB7XG5cdFx0XHRtYXA6IG5ldyBUSFJFRS5JbWFnZVV0aWxzLmxvYWRUZXh0dXJlKCAnaW1nL2dsb3cucG5nJyApLFxuXHRcdFx0dHJhbnNwYXJlbnQ6IHRydWUsIFxuXHRcdFx0c2lkZTogVEhSRUUuRG91YmxlU2lkZSxcblx0XHRcdGJsZW5kaW5nOiBUSFJFRS5BZGRpdGl2ZUJsZW5kaW5nLFxuXHRcdFx0ZGVwdGhUZXN0OiBmYWxzZVxuXHRcdH07XG5cblx0XHRtYXRlcmlhbFByb3BlcnRpZXMuY29sb3IgPSBDT0xPUl9TRUxFQ1Q7XG5cdFx0dmFyIG1hdGVyaWFsU2VsZWN0ID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKG1hdGVyaWFsUHJvcGVydGllcyk7XG5cblx0XHRtYXRlcmlhbFByb3BlcnRpZXMuY29sb3IgPSBDT0xPUl9GT0NVUztcblx0XHR2YXIgbWF0ZXJpYWxGb2N1cyA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbChtYXRlcmlhbFByb3BlcnRpZXMpO1xuXG5cdFx0dmFyIGdlb21ldHJ5ID0gbmV3IFRIUkVFLlBsYW5lR2VvbWV0cnkoMSwgMSwgMSk7XG5cblx0XHRzZWxlY3QgPSBuZXcgVEhSRUUuTWVzaChnZW9tZXRyeSwgbWF0ZXJpYWxTZWxlY3QpO1xuXHRcdHNlbGVjdC5yb3RhdGlvbi54ID0gUExBTkVfUk9UQVRJT047XG5cblx0XHRmb2N1cyA9IG5ldyBUSFJFRS5NZXNoKGdlb21ldHJ5LCBtYXRlcmlhbEZvY3VzKTtcblx0XHRmb2N1cy5yb3RhdGlvbi54ID0gUExBTkVfUk9UQVRJT047XG5cdH07XG5cblx0dmFyIGNvbW1vbkhpZ2hsaWdodCA9IGZ1bmN0aW9uKHdoaWNoLCBvYmopIHtcblx0XHRpZihvYmopIHtcblx0XHRcdHZhciB3aWR0aCA9IG9iai5nZW9tZXRyeS5ib3VuZGluZ0JveC5tYXgueCAqIFBMQU5FX01VTFRJUExJRVI7XG5cdFx0XHR2YXIgaGVpZ2h0ID0gb2JqLmdlb21ldHJ5LmJvdW5kaW5nQm94Lm1heC56ICogUExBTkVfTVVMVElQTElFUjtcblx0XHRcdHZhciBib3R0b20gPSBvYmouZ2VvbWV0cnkuYm91bmRpbmdCb3gubWluLnkgKyBlbnZpcm9ubWVudC5DTEVBUkFOQ0U7XG5cdFx0XHRcblx0XHRcdHdoaWNoLnBvc2l0aW9uLnkgPSBib3R0b207XG5cdFx0XHR3aGljaC5zY2FsZS5zZXQod2lkdGgsIGhlaWdodCwgMSk7XG5cdFx0XHRvYmouYWRkKHdoaWNoKTtcblxuXHRcdFx0d2hpY2gudmlzaWJsZSA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHdoaWNoLnZpc2libGUgPSBmYWxzZTtcblx0XHR9XG5cdH07XG5cblx0aGlnaGxpZ2h0LmVuYWJsZSA9IGZ1bmN0aW9uKGVuYWJsZSkge1xuXHRcdGZvY3VzLnZpc2libGUgPSBzZWxlY3QudmlzaWJsZSA9IGVuYWJsZTtcblx0fTtcblxuXHRoaWdobGlnaHQuZm9jdXMgPSBmdW5jdGlvbihvYmopIHtcblx0XHRjb21tb25IaWdobGlnaHQoZm9jdXMsIG9iaik7XG5cdH07XG5cblx0aGlnaGxpZ2h0LnNlbGVjdCA9IGZ1bmN0aW9uKG9iaikge1xuXHRcdGNvbW1vbkhpZ2hsaWdodChzZWxlY3QsIG9iaik7XG5cdH07XG5cblx0aW5pdCgpO1xuXG5cdHJldHVybiBoaWdobGlnaHQ7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgnbG9jYXRvcicsIGZ1bmN0aW9uICgkcSwgJGxvZywgQmFzZU9iamVjdCwgZGF0YSwgc2VsZWN0b3IsIGVudmlyb25tZW50LCBjYWNoZSkge1xuXHR2YXIgbG9jYXRvciA9IHt9O1xuXG5cdHZhciBkZWJ1Z0VuYWJsZWQgPSBmYWxzZTtcblxuXHRsb2NhdG9yLmNlbnRlck9iamVjdCA9IGZ1bmN0aW9uKG9iaikge1xuXHRcdHZhciB0YXJnZXRCQiA9IG9iai5nZW9tZXRyeS5ib3VuZGluZ0JveDtcblx0XHR2YXIgc3BhY2VCQiA9IGVudmlyb25tZW50LmxpYnJhcnkuZ2VvbWV0cnkuYm91bmRpbmdCb3g7XG5cblx0XHR2YXIgbWF0cml4UHJlY2lzaW9uID0gbmV3IFRIUkVFLlZlY3RvcjModGFyZ2V0QkIubWF4LnggLSB0YXJnZXRCQi5taW4ueCArIDAuMDEsIDAsIHRhcmdldEJCLm1heC56IC0gdGFyZ2V0QkIubWluLnogKyAwLjAxKTtcblx0XHR2YXIgb2NjdXBpZWRNYXRyaXggPSBnZXRPY2N1cGllZE1hdHJpeChlbnZpcm9ubWVudC5saWJyYXJ5LmNoaWxkcmVuLCBtYXRyaXhQcmVjaXNpb24sIG9iaik7XG5cdFx0dmFyIGZyZWVQb3NpdGlvbiA9IGdldEZyZWVNYXRyaXgob2NjdXBpZWRNYXRyaXgsIHNwYWNlQkIsIHRhcmdldEJCLCBtYXRyaXhQcmVjaXNpb24pO1x0XHRcblxuXHRcdG9iai5wb3NpdGlvbi5zZXRYKGZyZWVQb3NpdGlvbi54KTtcblx0XHRvYmoucG9zaXRpb24uc2V0WihmcmVlUG9zaXRpb24ueik7XG5cdH07XG5cblx0bG9jYXRvci5wbGFjZVNlY3Rpb24gPSBmdW5jdGlvbihzZWN0aW9uRHRvKSB7XG5cdFx0dmFyIHByb21pc2UgPSBjYWNoZS5nZXRTZWN0aW9uKHNlY3Rpb25EdG8ubW9kZWwpLnRoZW4oZnVuY3Rpb24gKHNlY3Rpb25DYWNoZSkge1xuXHRcdFx0dmFyIHNlY3Rpb25CQiA9IHNlY3Rpb25DYWNoZS5nZW9tZXRyeS5ib3VuZGluZ0JveDtcblx0XHRcdHZhciBsaWJyYXJ5QkIgPSBlbnZpcm9ubWVudC5saWJyYXJ5Lmdlb21ldHJ5LmJvdW5kaW5nQm94O1xuXHRcdFx0dmFyIGZyZWVQbGFjZSA9IGdldEZyZWVQbGFjZShlbnZpcm9ubWVudC5saWJyYXJ5LmNoaWxkcmVuLCBsaWJyYXJ5QkIsIHNlY3Rpb25CQik7XG5cblx0XHRcdHJldHVybiBmcmVlUGxhY2UgP1xuXHRcdFx0XHRzYXZlU2VjdGlvbihzZWN0aW9uRHRvLCBmcmVlUGxhY2UpIDpcblx0XHRcdFx0JHEucmVqZWN0KCd0aGVyZSBpcyBubyBmcmVlIHNwYWNlJyk7XG5cdFx0fSkudGhlbihmdW5jdGlvbiAobmV3RHRvKSB7XG5cdFx0XHRyZXR1cm4gZW52aXJvbm1lbnQudXBkYXRlU2VjdGlvbihuZXdEdG8pO1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIHByb21pc2U7XG5cdH07XG5cblx0dmFyIHNhdmVTZWN0aW9uID0gZnVuY3Rpb24oZHRvLCBwb3NpdGlvbikge1xuXHRcdGR0by5saWJyYXJ5SWQgPSBlbnZpcm9ubWVudC5saWJyYXJ5LmlkO1xuXHRcdGR0by5wb3NfeCA9IHBvc2l0aW9uLng7XG5cdFx0ZHRvLnBvc195ID0gcG9zaXRpb24ueTtcblx0XHRkdG8ucG9zX3ogPSBwb3NpdGlvbi56O1xuXG5cdFx0cmV0dXJuIGRhdGEucG9zdFNlY3Rpb24oZHRvKTtcblx0fTtcblxuXHRsb2NhdG9yLnBsYWNlQm9vayA9IGZ1bmN0aW9uKGJvb2tEdG8pIHtcblx0XHR2YXIgcHJvbWlzZTtcblx0XHR2YXIgc2hlbGYgPSBzZWxlY3Rvci5pc1NlbGVjdGVkU2hlbGYoKSAmJiBzZWxlY3Rvci5nZXRTZWxlY3RlZE9iamVjdCgpO1xuXG5cdFx0aWYoc2hlbGYpIHtcblx0XHRcdHByb21pc2UgPSBjYWNoZS5nZXRCb29rKGJvb2tEdG8ubW9kZWwpLnRoZW4oZnVuY3Rpb24gKGJvb2tDYWNoZSkge1xuXHRcdFx0XHR2YXIgc2hlbGZCQiA9IHNoZWxmLmdlb21ldHJ5LmJvdW5kaW5nQm94O1xuXHRcdFx0XHR2YXIgYm9va0JCID0gYm9va0NhY2hlLmdlb21ldHJ5LmJvdW5kaW5nQm94O1xuXHRcdFx0XHR2YXIgZnJlZVBsYWNlID0gZ2V0RnJlZVBsYWNlKHNoZWxmLmNoaWxkcmVuLCBzaGVsZkJCLCBib29rQkIpO1xuXG5cdFx0XHRcdHJldHVybiBmcmVlUGxhY2UgPyBcblx0XHRcdFx0XHRzYXZlQm9vayhib29rRHRvLCBmcmVlUGxhY2UsIHNoZWxmKSA6IFxuXHRcdFx0XHRcdCRxLnJlamVjdCgndGhlcmUgaXMgbm8gZnJlZSBzcGFjZScpO1xuXHRcdFx0fSkudGhlbihmdW5jdGlvbiAobmV3RHRvKSB7XG5cdFx0XHRcdHJldHVybiBlbnZpcm9ubWVudC51cGRhdGVCb29rKG5ld0R0byk7XG5cdFx0XHR9KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cHJvbWlzZSA9ICRxLnJlamVjdCgnc2hlbGYgaXMgbm90IHNlbGVjdGVkJyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHByb21pc2U7XG5cdH07XG5cblx0dmFyIHNhdmVCb29rID0gZnVuY3Rpb24oZHRvLCBwb3NpdGlvbiwgc2hlbGYpIHtcblx0XHRkdG8uc2hlbGZJZCA9IHNoZWxmLmlkO1xuXHRcdGR0by5zZWN0aW9uSWQgPSBzaGVsZi5wYXJlbnQuaWQ7XG5cdFx0ZHRvLnBvc194ID0gcG9zaXRpb24ueDtcblx0XHRkdG8ucG9zX3kgPSBwb3NpdGlvbi55O1xuXHRcdGR0by5wb3NfeiA9IHBvc2l0aW9uLno7XG5cblx0XHRyZXR1cm4gZGF0YS5wb3N0Qm9vayhkdG8pO1xuXHR9O1xuXG5cdGxvY2F0b3IudW5wbGFjZUJvb2sgPSBmdW5jdGlvbihib29rRHRvKSB7XG5cdFx0dmFyIHByb21pc2U7XG5cdFx0Ym9va0R0by5zZWN0aW9uSWQgPSBudWxsO1xuXG5cdFx0cHJvbWlzZSA9IGRhdGEucG9zdEJvb2soYm9va0R0bykudGhlbihmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gZW52aXJvbm1lbnQudXBkYXRlQm9vayhib29rRHRvKTtcblx0XHR9KTtcblxuXHRcdHJldHVybiBwcm9taXNlO1xuXHR9O1xuXG5cdHZhciBnZXRGcmVlUGxhY2UgPSBmdW5jdGlvbihvYmplY3RzLCBzcGFjZUJCLCB0YXJnZXRCQikge1xuXHRcdHZhciBtYXRyaXhQcmVjaXNpb24gPSBuZXcgVEhSRUUuVmVjdG9yMyh0YXJnZXRCQi5tYXgueCAtIHRhcmdldEJCLm1pbi54ICsgMC4wMSwgMCwgdGFyZ2V0QkIubWF4LnogLSB0YXJnZXRCQi5taW4ueiArIDAuMDEpO1xuXHRcdHZhciBvY2N1cGllZE1hdHJpeCA9IGdldE9jY3VwaWVkTWF0cml4KG9iamVjdHMsIG1hdHJpeFByZWNpc2lvbik7XG5cdFx0dmFyIGZyZWVQb3NpdGlvbiA9IGdldEZyZWVNYXRyaXhDZWxscyhvY2N1cGllZE1hdHJpeCwgc3BhY2VCQiwgdGFyZ2V0QkIsIG1hdHJpeFByZWNpc2lvbik7XG5cdFx0XG5cdFx0aWYgKGRlYnVnRW5hYmxlZCkge1xuXHRcdFx0ZGVidWdTaG93RnJlZShmcmVlUG9zaXRpb24sIG1hdHJpeFByZWNpc2lvbiwgZW52aXJvbm1lbnQubGlicmFyeSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZyZWVQb3NpdGlvbjtcblx0fTtcblxuXHR2YXIgZ2V0RnJlZU1hdHJpeCA9IGZ1bmN0aW9uKG9jY3VwaWVkTWF0cml4LCBzcGFjZUJCLCB0YXJnZXRCQiwgbWF0cml4UHJlY2lzaW9uKSB7XG5cdFx0dmFyIERJU1RBTkNFID0gMS4zO1xuXG5cdFx0dmFyIHhJbmRleDtcblx0XHR2YXIgekluZGV4O1xuXHRcdHZhciBwb3NpdGlvbiA9IHt9O1xuXHRcdHZhciBtaW5Qb3NpdGlvbiA9IHt9O1xuXG5cdFx0dmFyIG1pblhDZWxsID0gTWF0aC5mbG9vcihzcGFjZUJCLm1pbi54IC8gbWF0cml4UHJlY2lzaW9uLngpICsgMTtcblx0XHR2YXIgbWF4WENlbGwgPSBNYXRoLmZsb29yKHNwYWNlQkIubWF4LnggLyBtYXRyaXhQcmVjaXNpb24ueCk7XG5cdFx0dmFyIG1pblpDZWxsID0gTWF0aC5mbG9vcihzcGFjZUJCLm1pbi56IC8gbWF0cml4UHJlY2lzaW9uLnopICsgMTtcblx0XHR2YXIgbWF4WkNlbGwgPSBNYXRoLmZsb29yKHNwYWNlQkIubWF4LnogLyBtYXRyaXhQcmVjaXNpb24ueik7XG5cblx0XHRmb3IgKHpJbmRleCA9IG1pblpDZWxsOyB6SW5kZXggPD0gbWF4WkNlbGw7IHpJbmRleCsrKSB7XG5cdFx0XHRmb3IgKHhJbmRleCA9IG1pblhDZWxsOyB4SW5kZXggPD0gbWF4WENlbGw7IHhJbmRleCsrKSB7XG5cdFx0XHRcdGlmICghb2NjdXBpZWRNYXRyaXhbekluZGV4XSB8fCAhb2NjdXBpZWRNYXRyaXhbekluZGV4XVt4SW5kZXhdKSB7XG5cdFx0XHRcdFx0cG9zaXRpb24ucG9zID0gZ2V0UG9zaXRpb25Gcm9tQ2VsbHMoW3hJbmRleF0sIHpJbmRleCwgbWF0cml4UHJlY2lzaW9uLCBzcGFjZUJCLCB0YXJnZXRCQik7XG5cdFx0XHRcdFx0cG9zaXRpb24ubGVuZ3RoID0gcG9zaXRpb24ucG9zLmxlbmd0aCgpO1xuXG5cdFx0XHRcdFx0aWYoIW1pblBvc2l0aW9uLnBvcyB8fCBwb3NpdGlvbi5sZW5ndGggPCBtaW5Qb3NpdGlvbi5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdG1pblBvc2l0aW9uLnBvcyA9IHBvc2l0aW9uLnBvcztcblx0XHRcdFx0XHRcdG1pblBvc2l0aW9uLmxlbmd0aCA9IHBvc2l0aW9uLmxlbmd0aDtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZihtaW5Qb3NpdGlvbi5wb3MgJiYgbWluUG9zaXRpb24ubGVuZ3RoIDwgRElTVEFOQ0UpIHtcblx0XHRcdFx0XHRcdHJldHVybiBtaW5Qb3NpdGlvbi5wb3M7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG1pblBvc2l0aW9uLnBvcztcblx0fTtcblxuXHR2YXIgZ2V0RnJlZU1hdHJpeENlbGxzID0gZnVuY3Rpb24ob2NjdXBpZWRNYXRyaXgsIHNwYWNlQkIsIHRhcmdldEJCLCBtYXRyaXhQcmVjaXNpb24pIHtcblx0XHR2YXIgdGFyZ2V0Q2VsbHNTaXplID0gMTtcblx0XHR2YXIgZnJlZUNlbGxzQ291bnQgPSAwO1xuXHRcdHZhciBmcmVlQ2VsbHNTdGFydDtcblx0XHR2YXIgeEluZGV4O1xuXHRcdHZhciB6SW5kZXg7XG5cdFx0dmFyIGNlbGxzO1xuXG5cdFx0dmFyIG1pblhDZWxsID0gTWF0aC5mbG9vcihzcGFjZUJCLm1pbi54IC8gbWF0cml4UHJlY2lzaW9uLngpICsgMTtcblx0XHR2YXIgbWF4WENlbGwgPSBNYXRoLmZsb29yKHNwYWNlQkIubWF4LnggLyBtYXRyaXhQcmVjaXNpb24ueCk7XG5cdFx0dmFyIG1pblpDZWxsID0gTWF0aC5mbG9vcihzcGFjZUJCLm1pbi56IC8gbWF0cml4UHJlY2lzaW9uLnopICsgMTtcblx0XHR2YXIgbWF4WkNlbGwgPSBNYXRoLmZsb29yKHNwYWNlQkIubWF4LnogLyBtYXRyaXhQcmVjaXNpb24ueik7XG5cblx0XHRmb3IgKHpJbmRleCA9IG1pblpDZWxsOyB6SW5kZXggPD0gbWF4WkNlbGw7IHpJbmRleCsrKSB7XG5cdFx0XHRmb3IgKHhJbmRleCA9IG1pblhDZWxsOyB4SW5kZXggPD0gbWF4WENlbGw7IHhJbmRleCsrKSB7XG5cdFx0XHRcdGlmICghb2NjdXBpZWRNYXRyaXhbekluZGV4XSB8fCAhb2NjdXBpZWRNYXRyaXhbekluZGV4XVt4SW5kZXhdKSB7XG5cdFx0XHRcdFx0ZnJlZUNlbGxzU3RhcnQgPSBmcmVlQ2VsbHNTdGFydCB8fCB4SW5kZXg7XG5cdFx0XHRcdFx0ZnJlZUNlbGxzQ291bnQrKztcblxuXHRcdFx0XHRcdGlmIChmcmVlQ2VsbHNDb3VudCA9PT0gdGFyZ2V0Q2VsbHNTaXplKSB7XG5cdFx0XHRcdFx0XHRjZWxscyA9IF8ucmFuZ2UoZnJlZUNlbGxzU3RhcnQsIGZyZWVDZWxsc1N0YXJ0ICsgZnJlZUNlbGxzQ291bnQpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGdldFBvc2l0aW9uRnJvbUNlbGxzKGNlbGxzLCB6SW5kZXgsIG1hdHJpeFByZWNpc2lvbiwgc3BhY2VCQiwgdGFyZ2V0QkIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRmcmVlQ2VsbHNDb3VudCA9IDA7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gbnVsbDtcblx0fTtcblxuXHR2YXIgZ2V0UG9zaXRpb25Gcm9tQ2VsbHMgPSBmdW5jdGlvbihjZWxscywgekluZGV4LCBtYXRyaXhQcmVjaXNpb24sIHNwYWNlQkIsIHRhcmdldEJCKSB7XG5cdFx0dmFyIGZyZWVYID0gY2VsbHNbMF0gKiBtYXRyaXhQcmVjaXNpb24ueDtcblx0XHR2YXIgZnJlZVogPVx0ekluZGV4ICogbWF0cml4UHJlY2lzaW9uLno7XG5cblx0XHR2YXIgb2Zmc2V0ID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcblx0XHRvZmZzZXQuYWRkVmVjdG9ycyh0YXJnZXRCQi5taW4sIHRhcmdldEJCLm1heCk7XG5cdFx0b2Zmc2V0Lm11bHRpcGx5U2NhbGFyKC0wLjUpO1xuXG5cdFx0cmV0dXJuIG5ldyBUSFJFRS5WZWN0b3IzKGZyZWVYICsgb2Zmc2V0LngsIGdldEJvdHRvbVkoc3BhY2VCQiwgdGFyZ2V0QkIpLCBmcmVlWiArIG9mZnNldC56KTtcblx0fTtcblxuXHR2YXIgZ2V0Qm90dG9tWSA9IGZ1bmN0aW9uKHNwYWNlQkIsIHRhcmdldEJCKSB7XG5cdFx0cmV0dXJuIHNwYWNlQkIubWluLnkgLSB0YXJnZXRCQi5taW4ueSArIGVudmlyb25tZW50LkNMRUFSQU5DRTtcblx0fTtcblxuXHR2YXIgZ2V0T2NjdXBpZWRNYXRyaXggPSBmdW5jdGlvbihvYmplY3RzLCBtYXRyaXhQcmVjaXNpb24sIG9iaikge1xuXHRcdHZhciByZXN1bHQgPSB7fTtcblx0XHR2YXIgb2JqZWN0QkI7XG5cdFx0dmFyIG1pbktleVg7XG5cdFx0dmFyIG1heEtleVg7XG5cdFx0dmFyIG1pbktleVo7XG5cdFx0dmFyIG1heEtleVo7XHRcdFxuXHRcdHZhciB6LCB4O1xuXG5cdFx0b2JqZWN0cy5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkge1xuXHRcdFx0aWYoY2hpbGQgaW5zdGFuY2VvZiBCYXNlT2JqZWN0ICYmIGNoaWxkICE9PSBvYmopIHtcblx0XHRcdFx0b2JqZWN0QkIgPSBjaGlsZC5ib3VuZGluZ0JveDtcblxuXHRcdFx0XHRtaW5LZXlYID0gTWF0aC5yb3VuZCgob2JqZWN0QkIuY2VudGVyLnggLSBvYmplY3RCQi5yYWRpdXMueCkgLyBtYXRyaXhQcmVjaXNpb24ueCk7XG5cdFx0XHRcdG1heEtleVggPSBNYXRoLnJvdW5kKChvYmplY3RCQi5jZW50ZXIueCArIG9iamVjdEJCLnJhZGl1cy54KSAvIG1hdHJpeFByZWNpc2lvbi54KTtcblx0XHRcdFx0bWluS2V5WiA9IE1hdGgucm91bmQoKG9iamVjdEJCLmNlbnRlci56IC0gb2JqZWN0QkIucmFkaXVzLnopIC8gbWF0cml4UHJlY2lzaW9uLnopO1xuXHRcdFx0XHRtYXhLZXlaID0gTWF0aC5yb3VuZCgob2JqZWN0QkIuY2VudGVyLnogKyBvYmplY3RCQi5yYWRpdXMueikgLyBtYXRyaXhQcmVjaXNpb24ueik7XG5cblx0XHRcdFx0Zm9yKHogPSBtaW5LZXlaOyB6IDw9IG1heEtleVo7IHorKykge1xuXHRcdFx0XHRcdHJlc3VsdFt6XSA9IHJlc3VsdFt6XSB8fCB7fTtcblx0XHRcdFx0XHR2YXIgZGVidWdDZWxscyA9IFtdO1xuXG5cdFx0XHRcdFx0Zm9yKHggPSBtaW5LZXlYOyB4IDw9IG1heEtleVg7IHgrKykge1xuXHRcdFx0XHRcdFx0cmVzdWx0W3pdW3hdID0gdHJ1ZTtcblx0XHRcdFx0XHRcdGRlYnVnQ2VsbHMucHVzaCh4KTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZihkZWJ1Z0VuYWJsZWQpIHtcblx0XHRcdFx0XHRcdGRlYnVnU2hvd0JCKGNoaWxkKTtcblx0XHRcdFx0XHRcdGRlYnVnQWRkT2NjdXBpZWQoZGVidWdDZWxscywgbWF0cml4UHJlY2lzaW9uLCBjaGlsZCwgeik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9O1xuXG5cdGxvY2F0b3IuZGVidWcgPSBmdW5jdGlvbigpIHtcblx0XHRjYWNoZS5nZXRTZWN0aW9uKCdib29rc2hlbGZfMDAwMScpLnRoZW4oZnVuY3Rpb24gKHNlY3Rpb25DYWNoZSkge1xuXHRcdFx0ZGVidWdFbmFibGVkID0gdHJ1ZTtcblx0XHRcdHZhciBzZWN0aW9uQkIgPSBzZWN0aW9uQ2FjaGUuZ2VvbWV0cnkuYm91bmRpbmdCb3g7XG5cdFx0XHR2YXIgbGlicmFyeUJCID0gZW52aXJvbm1lbnQubGlicmFyeS5nZW9tZXRyeS5ib3VuZGluZ0JveDtcblx0XHRcdGdldEZyZWVQbGFjZShlbnZpcm9ubWVudC5saWJyYXJ5LmNoaWxkcmVuLCBsaWJyYXJ5QkIsIHNlY3Rpb25CQik7XG5cdFx0XHRkZWJ1Z0VuYWJsZWQgPSBmYWxzZTtcblx0XHR9KTtcblx0fTtcblxuXHR2YXIgZGVidWdTaG93QkIgPSBmdW5jdGlvbihvYmopIHtcblx0XHR2YXIgb2JqZWN0QkIgPSBvYmouYm91bmRpbmdCb3g7XG5cdFx0dmFyIG9iakJveCA9IG5ldyBUSFJFRS5NZXNoKFxuXHRcdFx0bmV3IFRIUkVFLkN1YmVHZW9tZXRyeShcblx0XHRcdFx0b2JqZWN0QkIucmFkaXVzLnggKiAyLCBcblx0XHRcdFx0b2JqZWN0QkIucmFkaXVzLnkgKiAyICsgMC4xLCBcblx0XHRcdFx0b2JqZWN0QkIucmFkaXVzLnogKiAyXG5cdFx0XHQpLCBcblx0XHRcdG5ldyBUSFJFRS5NZXNoTGFtYmVydE1hdGVyaWFsKHtcblx0XHRcdFx0Y29sb3I6IDB4YmJiYmZmLFxuXHRcdFx0XHRvcGFjaXR5OiAwLjIsXG5cdFx0XHRcdHRyYW5zcGFyZW50OiB0cnVlXG5cdFx0XHR9KVxuXHRcdCk7XG5cdFx0XG5cdFx0b2JqQm94LnBvc2l0aW9uLnggPSBvYmplY3RCQi5jZW50ZXIueDtcblx0XHRvYmpCb3gucG9zaXRpb24ueSA9IG9iamVjdEJCLmNlbnRlci55O1xuXHRcdG9iakJveC5wb3NpdGlvbi56ID0gb2JqZWN0QkIuY2VudGVyLno7XG5cblx0XHRvYmoucGFyZW50LmFkZChvYmpCb3gpO1xuXHR9O1xuXG5cdHZhciBkZWJ1Z0FkZE9jY3VwaWVkID0gZnVuY3Rpb24oY2VsbHMsIG1hdHJpeFByZWNpc2lvbiwgb2JqLCB6S2V5KSB7XG5cdFx0Y2VsbHMuZm9yRWFjaChmdW5jdGlvbiAoY2VsbCkge1xuXHRcdFx0dmFyIHBvcyA9IGdldFBvc2l0aW9uRnJvbUNlbGxzKFtjZWxsXSwgektleSwgbWF0cml4UHJlY2lzaW9uLCBvYmoucGFyZW50Lmdlb21ldHJ5LmJvdW5kaW5nQm94LCBvYmouZ2VvbWV0cnkuYm91bmRpbmdCb3gpO1xuXHRcdFx0dmFyIGNlbGxCb3ggPSBuZXcgVEhSRUUuTWVzaChuZXcgVEhSRUUuQ3ViZUdlb21ldHJ5KG1hdHJpeFByZWNpc2lvbi54IC0gMC4wMSwgMC4wMSwgbWF0cml4UHJlY2lzaW9uLnogLSAwLjAxKSwgbmV3IFRIUkVFLk1lc2hMYW1iZXJ0TWF0ZXJpYWwoe2NvbG9yOiAweGZmMDAwMH0pKTtcblx0XHRcdFxuXHRcdFx0Y2VsbEJveC5wb3NpdGlvbiA9IHBvcztcblx0XHRcdG9iai5wYXJlbnQuYWRkKGNlbGxCb3gpO1xuXHRcdH0pO1xuXHR9O1xuXG5cdHZhciBkZWJ1Z1Nob3dGcmVlID0gZnVuY3Rpb24ocG9zaXRpb24sIG1hdHJpeFByZWNpc2lvbiwgb2JqKSB7XG5cdFx0aWYgKHBvc2l0aW9uKSB7XG5cdFx0XHR2YXIgY2VsbEJveCA9IG5ldyBUSFJFRS5NZXNoKG5ldyBUSFJFRS5DdWJlR2VvbWV0cnkobWF0cml4UHJlY2lzaW9uLngsIDAuNSwgbWF0cml4UHJlY2lzaW9uLnopLCBuZXcgVEhSRUUuTWVzaExhbWJlcnRNYXRlcmlhbCh7Y29sb3I6IDB4MDBmZjAwfSkpO1xuXHRcdFx0Y2VsbEJveC5wb3NpdGlvbiA9IHBvc2l0aW9uO1xuXHRcdFx0b2JqLnBhcmVudC5hZGQoY2VsbEJveCk7XG5cdFx0fVxuXHR9O1xuXG5cdHJldHVybiBsb2NhdG9yO1x0XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgncHJldmlldycsIGZ1bmN0aW9uIChjYW1lcmEsIGhpZ2hsaWdodCkge1xuXHR2YXIgcHJldmlldyA9IHt9O1xuXG5cdHZhciBhY3RpdmUgPSBmYWxzZTtcblx0dmFyIGNvbnRhaW5lcjtcblxuXHR2YXIgaW5pdCA9IGZ1bmN0aW9uKCkge1xuXHRcdGNvbnRhaW5lciA9IG5ldyBUSFJFRS5PYmplY3QzRCgpO1xuXHRcdGNvbnRhaW5lci5wb3NpdGlvbi5zZXQoMCwgMCwgLTAuNSk7XG5cdFx0Y29udGFpbmVyLnJvdGF0aW9uLnkgPSAtMjtcblx0XHRjYW1lcmEuY2FtZXJhLmFkZChjb250YWluZXIpO1xuXHR9O1xuXG5cdHZhciBhY3RpdmF0ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0YWN0aXZlID0gdmFsdWU7XG5cdFx0aGlnaGxpZ2h0LmVuYWJsZSghYWN0aXZlKTtcblx0fTtcblxuXHRwcmV2aWV3LmlzQWN0aXZlID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGFjdGl2ZTtcblx0fTtcblxuXHRwcmV2aWV3LmVuYWJsZSA9IGZ1bmN0aW9uKG9iaikge1xuXHRcdHZhciBvYmpDbG9uZTtcblxuXHRcdGlmKG9iaikge1xuXHRcdFx0YWN0aXZhdGUodHJ1ZSk7XG5cblx0XHRcdG9iakNsb25lID0gb2JqLmNsb25lKCk7XG5cdFx0XHRvYmpDbG9uZS5wb3NpdGlvbi5zZXQoMCwgMCwgMCk7XG5cdFx0XHRjb250YWluZXIuYWRkKG9iakNsb25lKTtcblx0XHR9XG5cdH07XG5cblx0cHJldmlldy5kaXNhYmxlID0gZnVuY3Rpb24gKCkge1xuXHRcdGNsZWFyQ29udGFpbmVyKCk7XG5cdFx0YWN0aXZhdGUoZmFsc2UpO1xuXHR9O1xuXG5cdHZhciBjbGVhckNvbnRhaW5lciA9IGZ1bmN0aW9uKCkge1xuXHRcdGNvbnRhaW5lci5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkge1xuXHRcdFx0Y29udGFpbmVyLnJlbW92ZShjaGlsZCk7XG5cdFx0fSk7XG5cdH07XG5cblx0cHJldmlldy5yb3RhdGUgPSBmdW5jdGlvbihkWCkge1xuXHRcdGNvbnRhaW5lci5yb3RhdGlvbi55ICs9IGRYID8gZFggKiAwLjA1IDogMDtcblx0fTtcblxuXHRpbml0KCk7XG5cblx0cmV0dXJuIHByZXZpZXc7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgnc2VsZWN0b3InLCBmdW5jdGlvbiAoJHJvb3RTY29wZSwgU2VsZWN0b3JNZXRhLCBCb29rT2JqZWN0LCBTaGVsZk9iamVjdCwgU2VjdGlvbk9iamVjdCwgZW52aXJvbm1lbnQsIGhpZ2hsaWdodCwgcHJldmlldywgdG9vbHRpcCkge1xuXHR2YXIgc2VsZWN0b3IgPSB7fTtcblx0XG5cdHZhciBzZWxlY3RlZCA9IG5ldyBTZWxlY3Rvck1ldGEoKTtcblx0dmFyIGZvY3VzZWQgPSBuZXcgU2VsZWN0b3JNZXRhKCk7XG5cblx0c2VsZWN0b3IuZm9jdXMgPSBmdW5jdGlvbihtZXRhKSB7XG5cdFx0dmFyIG9iajtcblxuXHRcdGlmKCFtZXRhLmVxdWFscyhmb2N1c2VkKSkge1xuXHRcdFx0Zm9jdXNlZCA9IG1ldGE7XG5cblx0XHRcdGlmKCFmb2N1c2VkLmlzRW1wdHkoKSkge1xuXHRcdFx0XHRvYmogPSBnZXRPYmplY3QoZm9jdXNlZCk7XG5cdFx0XHRcdGhpZ2hsaWdodC5mb2N1cyhvYmopO1xuXHRcdFx0fVxuXG5cdFx0XHR0b29sdGlwLnNldChvYmopO1xuXHRcdFx0JHJvb3RTY29wZS4kYXBwbHkoKTtcblx0XHR9XG5cdH07XG5cblx0c2VsZWN0b3Iuc2VsZWN0Rm9jdXNlZCA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBtZXRhID0gZm9jdXNlZDtcblxuXHRcdHNlbGVjdG9yLnNlbGVjdChtZXRhKTtcblx0XHQkcm9vdFNjb3BlLiRhcHBseSgpO1xuXHR9O1xuXG5cdHNlbGVjdG9yLnNlbGVjdCA9IGZ1bmN0aW9uKG1ldGEpIHtcblx0XHRpZighbWV0YS5lcXVhbHMoc2VsZWN0ZWQpKSB7XG5cdFx0XHRzZWxlY3Rvci51bnNlbGVjdCgpO1xuXHRcdFx0c2VsZWN0ZWQgPSBtZXRhO1xuXG5cdFx0XHR2YXIgb2JqID0gZ2V0T2JqZWN0KHNlbGVjdGVkKTtcblx0XHRcdGhpZ2hsaWdodC5zZWxlY3Qob2JqKTtcblx0XHRcdGhpZ2hsaWdodC5mb2N1cyhudWxsKTtcblx0XHR9XG5cdH07XG5cblx0c2VsZWN0b3IudW5zZWxlY3QgPSBmdW5jdGlvbigpIHtcblx0XHRpZighc2VsZWN0ZWQuaXNFbXB0eSgpKSB7XG5cdFx0XHRoaWdobGlnaHQuc2VsZWN0KG51bGwpO1xuXHRcdFx0c2VsZWN0ZWQgPSBuZXcgU2VsZWN0b3JNZXRhKCk7XG5cdFx0fVxuXG5cdFx0cHJldmlldy5kaXNhYmxlKCk7XG5cdH07XG5cblx0c2VsZWN0b3IuZ2V0U2VsZWN0ZWRPYmplY3QgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gZ2V0T2JqZWN0KHNlbGVjdGVkKTtcblx0fTtcblxuXHR2YXIgZ2V0T2JqZWN0ID0gZnVuY3Rpb24obWV0YSkge1xuXHRcdHZhciBvYmplY3Q7XG5cblx0XHRpZighbWV0YS5pc0VtcHR5KCkpIHtcblx0XHRcdG9iamVjdCA9IGlzU2hlbGYobWV0YSkgPyBlbnZpcm9ubWVudC5nZXRTaGVsZihtZXRhLnBhcmVudElkLCBtZXRhLmlkKVxuXHRcdFx0XHQ6IGlzQm9vayhtZXRhKSA/IGVudmlyb25tZW50LmdldEJvb2sobWV0YS5pZClcblx0XHRcdFx0OiBpc1NlY3Rpb24obWV0YSkgPyBlbnZpcm9ubWVudC5nZXRTZWN0aW9uKG1ldGEuaWQpXG5cdFx0XHRcdDogbnVsbDtcblx0XHR9XG5cblx0XHRyZXR1cm4gb2JqZWN0O1x0XG5cdH07XG5cblx0c2VsZWN0b3IuaXNTZWxlY3RlZEVkaXRhYmxlID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHNlbGVjdG9yLmlzU2VsZWN0ZWRCb29rKCkgfHwgc2VsZWN0b3IuaXNTZWxlY3RlZFNlY3Rpb24oKTtcblx0fTtcblxuXHRzZWxlY3Rvci5pc0Jvb2tTZWxlY3RlZCA9IGZ1bmN0aW9uKGlkKSB7XG5cdFx0cmV0dXJuIGlzQm9vayhzZWxlY3RlZCkgJiYgc2VsZWN0ZWQuaWQgPT09IGlkO1xuXHR9O1xuXG5cdHNlbGVjdG9yLmlzU2VsZWN0ZWRTaGVsZiA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBpc1NoZWxmKHNlbGVjdGVkKTtcblx0fTtcblxuXHRzZWxlY3Rvci5pc1NlbGVjdGVkQm9vayA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBpc0Jvb2soc2VsZWN0ZWQpO1xuXHR9O1xuXG5cdHNlbGVjdG9yLmlzU2VsZWN0ZWRTZWN0aW9uID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGlzU2VjdGlvbihzZWxlY3RlZCk7XG5cdH07XG5cblx0dmFyIGlzU2hlbGYgPSBmdW5jdGlvbihtZXRhKSB7XG5cdFx0cmV0dXJuIG1ldGEudHlwZSA9PT0gU2hlbGZPYmplY3QuVFlQRTtcblx0fTtcblxuXHR2YXIgaXNCb29rID0gZnVuY3Rpb24obWV0YSkge1xuXHRcdHJldHVybiBtZXRhLnR5cGUgPT09IEJvb2tPYmplY3QuVFlQRTtcblx0fTtcblxuXHR2YXIgaXNTZWN0aW9uID0gZnVuY3Rpb24obWV0YSkge1xuXHRcdHJldHVybiBtZXRhLnR5cGUgPT09IFNlY3Rpb25PYmplY3QuVFlQRTtcblx0fTtcblxuXHRyZXR1cm4gc2VsZWN0b3I7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgnYXV0aG9yaXphdGlvbicsIGZ1bmN0aW9uICgkbG9nLCAkcSwgJHdpbmRvdywgJGludGVydmFsLCB1c2VyLCBzZWxlY3RMaWJyYXJ5LCBjYXRhbG9nLCBlbnZpcm9ubWVudCwgbmdEaWFsb2cpIHtcblx0dmFyIGF1dGhvcml6YXRpb24gPSB7fTtcblxuXHRhdXRob3JpemF0aW9uLnNob3cgPSBmdW5jdGlvbigpIHtcblx0XHRuZ0RpYWxvZy5vcGVuQ29uZmlybSh7XG5cdFx0XHR0ZW1wbGF0ZTogJy91aS9sb2dpbkRpYWxvZydcblx0XHR9KTtcblx0fTtcblxuXHRhdXRob3JpemF0aW9uLmlzU2hvdyA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiAhdXNlci5pc0F1dGhvcml6ZWQoKSAmJiB1c2VyLmlzTG9hZGVkKCk7XG5cdH07XG5cblx0YXV0aG9yaXphdGlvbi5nb29nbGUgPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgd2luID0gJHdpbmRvdy5vcGVuKCcvYXV0aC9nb29nbGUnLCAnJywgJ3dpZHRoPTgwMCxoZWlnaHQ9NjAwLG1vZGFsPXllcyxhbHdheXNSYWlzZWQ9eWVzJyk7XG5cdCAgICB2YXIgY2hlY2tBdXRoV2luZG93ID0gJGludGVydmFsKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAod2luICYmIHdpbi5jbG9zZWQpIHtcblx0ICAgICAgICBcdCRpbnRlcnZhbC5jYW5jZWwoY2hlY2tBdXRoV2luZG93KTtcblxuXHQgICAgICAgIFx0ZW52aXJvbm1lbnQuc2V0TG9hZGVkKGZhbHNlKTtcblx0ICAgICAgICBcdHVzZXIubG9hZCgpLnRoZW4oZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIFx0XHRyZXR1cm4gYXV0aG9yaXphdGlvbi5sb2FkVXNlckRhdGEoKTtcblx0ICAgICAgICBcdH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIFx0XHRlbnZpcm9ubWVudC5zZXRMb2FkZWQodHJ1ZSk7XG5cdCAgICAgICAgXHR9KS5jYXRjaChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgXHRcdCRsb2cubG9nKCdVc2VyIGxvYWRpbmQgZXJyb3InKTtcblx0XHRcdFx0XHQvL1RPRE86IHNob3cgZXJyb3IgbWVzc2FnZSAgXG5cdCAgICAgICAgXHR9KTtcblx0ICAgICAgICB9XG5cdCAgICB9LCAxMDApO1xuXHR9O1xuXG5cdGF1dGhvcml6YXRpb24ubG9nb3V0ID0gZnVuY3Rpb24oKSB7XG4gICAgXHRlbnZpcm9ubWVudC5zZXRMb2FkZWQoZmFsc2UpO1xuXHRcdHVzZXIubG9nb3V0KCkuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgXHRcdHJldHVybiBhdXRob3JpemF0aW9uLmxvYWRVc2VyRGF0YSgpO1xuXHRcdH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICBcdGVudmlyb25tZW50LnNldExvYWRlZCh0cnVlKTtcblx0XHR9KS5jYXRjaChmdW5jdGlvbiAoKSB7XG5cdFx0XHQkbG9nLmVycm9yKCdMb2dvdXQgZXJyb3InKTtcblx0XHRcdC8vVE9ETzogc2hvdyBhbiBlcnJvclxuXHRcdH0pO1xuXHR9O1xuXG5cdGF1dGhvcml6YXRpb24ubG9hZFVzZXJEYXRhID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuICRxLmFsbChbXG5cdFx0XHRzZWxlY3RMaWJyYXJ5LnVwZGF0ZUxpc3QoKSwgXG5cdFx0XHRjYXRhbG9nLmxvYWRCb29rcygpXG5cdFx0XSk7XG5cdH07XG5cdFxuXHRyZXR1cm4gYXV0aG9yaXphdGlvbjtcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5mYWN0b3J5KCdibG9jaycsIGZ1bmN0aW9uIChibG9ja1VJKSB7XG5cdHZhciBibG9jayA9IHt9O1xuXG5cdHZhciBJTlZFTlRPUlkgPSAnaW52ZW50b3J5Jztcblx0dmFyIE1BSU5fTUVOVSA9ICdtYWluX21lbnUnO1xuXHR2YXIgR0xPQkFMID0gJ2dsb2JhbCc7XG5cblx0YmxvY2suaW52ZW50b3J5ID0gYmxvY2tVSS5pbnN0YW5jZXMuZ2V0KElOVkVOVE9SWSk7XG5cdFxuXHRibG9jay5tYWluTWVudSA9IGJsb2NrVUkuaW5zdGFuY2VzLmdldChNQUlOX01FTlUpO1xuXG5cdGJsb2NrLmdsb2JhbCA9IGJsb2NrVUkuaW5zdGFuY2VzLmdldChHTE9CQUwpO1xuXG5cdHJldHVybiBibG9jaztcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5mYWN0b3J5KCdib29rRWRpdCcsIGZ1bmN0aW9uICgkbG9nLCBkYXRhLCBlbnZpcm9ubWVudCwgYmxvY2ssIGRpYWxvZywgYXJjaGl2ZSwgY2F0YWxvZywgc2VsZWN0b3IpIHtcblx0dmFyIGJvb2tFZGl0ID0ge307XG5cblx0dmFyIEJPT0tfSU1BR0VfVVJMID0gJy9vYmovYm9va3Mve21vZGVsfS9pbWcuanBnJztcblx0dmFyIEVNUFRZX0lNQUdFX1VSTCA9ICcvaW1nL2VtcHR5X2NvdmVyLmpwZyc7XG5cdFxuXHRib29rRWRpdC5saXN0ID0gW107XG5cdGJvb2tFZGl0LmJvb2sgPSB7fTtcblx0Ym9va0VkaXQuY292ZXJJbnB1dFVSTCA9IG51bGw7XG5cblx0Ym9va0VkaXQuc2V0Qm9vayA9IGZ1bmN0aW9uKGJvb2spIHtcblx0XHR0aGlzLmJvb2sgPSB7fTsgLy8gY3JlYXRlIG5ldyBvYmplY3QgZm9yIHVuYmluZCBmcm9tIHNjb3BlXG5cdFx0aWYoYm9vaykge1xuXHRcdFx0dGhpcy5ib29rLmlkID0gYm9vay5pZDtcblx0XHRcdHRoaXMuYm9vay51c2VySWQgPSBib29rLnVzZXJJZDtcblx0XHRcdHRoaXMuYm9vay5tb2RlbCA9IGJvb2subW9kZWw7XG5cdFx0XHR0aGlzLmJvb2suY292ZXIgPSBib29rLmNvdmVyO1xuXHRcdFx0dGhpcy5ib29rLmNvdmVySWQgPSBib29rLmNvdmVySWQ7XG5cdFx0XHR0aGlzLmJvb2sudGl0bGUgPSBib29rLnRpdGxlO1xuXHRcdFx0dGhpcy5ib29rLmF1dGhvciA9IGJvb2suYXV0aG9yO1xuXG5cdFx0XHR0aGlzLmNvdmVySW5wdXRVUkwgPSBudWxsO1xuXHRcdH1cblx0fTtcblxuXHRib29rRWRpdC5nZXRJbWcgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5ib29rLm1vZGVsID8gQk9PS19JTUFHRV9VUkwucmVwbGFjZSgne21vZGVsfScsIHRoaXMuYm9vay5tb2RlbCkgOiBFTVBUWV9JTUFHRV9VUkw7XG5cdH07XG5cblx0Ym9va0VkaXQuZ2V0Q292ZXJJbWcgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5pc0NvdmVyU2hvdygpID8gdGhpcy5ib29rLmNvdmVyLnVybCA6IEVNUFRZX0lNQUdFX1VSTDtcblx0fTtcblxuXHRib29rRWRpdC5pc0NvdmVyRGlzYWJsZWQgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5jb3ZlcklucHV0VVJMICYmICh0aGlzLmZvcm0udGl0bGUuJGludmFsaWQgfHwgdGhpcy5mb3JtLmF1dGhvci4kaW52YWxpZCk7XG5cdH07XG5cblx0Ym9va0VkaXQuaXNDb3ZlclNob3cgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gQm9vbGVhbih0aGlzLmJvb2suY292ZXIpO1xuXHR9O1xuXG5cdGJvb2tFZGl0LmlzU2hvdyA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiAhIXRoaXMuYm9vay51c2VySWQ7XG5cdH07XG5cblx0Ym9va0VkaXQuc3VibWl0ID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodGhpcy5mb3JtLiR2YWxpZCkge1xuXHRcdFx0dGhpcy5zYXZlKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGRpYWxvZy5vcGVuRXJyb3IoJ0ZpbGwgYWxsIHJlcXVpcmVkIGZpZWxkcywgcGxlYXNlLicpO1xuXHRcdH1cblx0fTtcblxuXHRib29rRWRpdC5hcHBseUNvdmVyID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYoIXRoaXMuaXNDb3ZlckRpc2FibGVkKCkpIHtcblx0XHRcdGlmKHRoaXMuY292ZXJJbnB1dFVSTCkge1xuXHRcdFx0XHRibG9jay5pbnZlbnRvcnkuc3RhcnQoKTtcblx0XHRcdFx0YXJjaGl2ZS5zZW5kRXh0ZXJuYWxVUkwodGhpcy5jb3ZlcklucHV0VVJMLCBbdGhpcy5ib29rLnRpdGxlLCB0aGlzLmJvb2suYXV0aG9yXSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG5cdFx0XHRcdFx0Ym9va0VkaXQuYm9vay5jb3ZlciA9IHJlc3VsdDtcblx0XHRcdFx0XHRib29rRWRpdC5ib29rLmNvdmVySWQgPSByZXN1bHQuaWQ7XG5cdFx0XHRcdH0pLmNhdGNoKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRib29rRWRpdC5ib29rLmNvdmVySWQgPSBudWxsO1xuXHRcdFx0XHRcdGJvb2tFZGl0LmJvb2suY292ZXIgPSBudWxsO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGRpYWxvZy5vcGVuRXJyb3IoJ0NhbiBub3QgYXBwbHkgdGhpcyBjb3Zlci4gVHJ5IGFub3RoZXIgb25lLCBwbGVhc2UuJyk7XG5cdFx0XHRcdH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdGJvb2tFZGl0LmNvdmVySW5wdXRVUkwgPSBudWxsO1xuXHRcdFx0XHRcdGJsb2NrLmludmVudG9yeS5zdG9wKCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ym9va0VkaXQuYm9vay5jb3ZlcklkID0gbnVsbDtcblx0XHRcdFx0Ym9va0VkaXQuYm9vay5jb3ZlciA9IG51bGw7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGRpYWxvZy5vcGVuRXJyb3IoJ0ZpbGwgYXV0aG9yIGFuZCB0aXRsZSBmaWVsZHMsIHBsZWFzZS4nKTtcblx0XHR9XG5cdH07XG5cblx0Ym9va0VkaXQuc2F2ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBzY29wZSA9IHRoaXM7XG5cdFx0XG5cdFx0YmxvY2suaW52ZW50b3J5LnN0YXJ0KCk7XG5cdFx0ZGF0YS5wb3N0Qm9vayh0aGlzLmJvb2spLnRoZW4oZnVuY3Rpb24gKGR0bykge1xuXHRcdFx0aWYoc2VsZWN0b3IuaXNCb29rU2VsZWN0ZWQoZHRvLmlkKSkge1xuXHRcdFx0XHRzZWxlY3Rvci51bnNlbGVjdCgpO1xuXHRcdFx0fVxuXG5cdFx0XHRlbnZpcm9ubWVudC51cGRhdGVCb29rKGR0byk7XG5cdFx0XHRzY29wZS5jYW5jZWwoKTtcblx0XHRcdHJldHVybiBjYXRhbG9nLmxvYWRCb29rcygpO1xuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uICgpIHtcblx0XHRcdCRsb2cuZXJyb3IoJ0Jvb2sgc2F2ZSBlcnJvcicpO1xuXHRcdFx0Ly9UT0RPOiBzaG93IGVycm9yXG5cdFx0fSkuZmluYWxseShmdW5jdGlvbiAoKSB7XG5cdFx0XHRibG9jay5pbnZlbnRvcnkuc3RvcCgpO1xuXHRcdH0pO1xuXHR9O1xuXG5cdGJvb2tFZGl0LmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuc2V0Qm9vaygpO1xuXHR9O1xuXG5cdHJldHVybiBib29rRWRpdDtcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5mYWN0b3J5KCdjYXRhbG9nJywgZnVuY3Rpb24gKCRxLCBkYXRhLCB1c2VyLCBibG9jaykge1xuXHR2YXIgY2F0YWxvZyA9IHt9O1xuXG5cdGNhdGFsb2cuYm9va3MgPSBudWxsO1xuXG5cdGNhdGFsb2cubG9hZEJvb2tzID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHByb21pc2U7XG5cdFx0dmFyIHVzZXJJZCA9IHVzZXIuZ2V0SWQoKTtcblxuXHRcdGlmKHVzZXJJZCkge1xuXHRcdFx0YmxvY2suaW52ZW50b3J5LnN0YXJ0KCk7XG5cdFx0XHRwcm9taXNlID0gJHEud2hlbih1c2VySWQgPyBkYXRhLmdldFVzZXJCb29rcyh1c2VySWQpIDogbnVsbCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG5cdFx0XHRcdGNhdGFsb2cuYm9va3MgPSByZXN1bHQ7XG5cdFx0XHR9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0YmxvY2suaW52ZW50b3J5LnN0b3AoKTtcdFxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHByb21pc2U7XG5cdH07XG5cblx0cmV0dXJuIGNhdGFsb2c7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgnY3JlYXRlTGlicmFyeScsIGZ1bmN0aW9uIChkYXRhLCBlbnZpcm9ubWVudCwgbmdEaWFsb2cpIHtcblx0dmFyIGNyZWF0ZUxpYnJhcnkgPSB7fTtcblx0XG5cdHZhciBFTVBUWV9JTUFHRV9VUkwgPSAnL2ltZy9lbXB0eV9jb3Zlci5qcGcnO1xuXHRcblx0Y3JlYXRlTGlicmFyeS5saXN0ID0gW107XG5cdGNyZWF0ZUxpYnJhcnkubW9kZWwgPSBudWxsO1xuXG5cdGNyZWF0ZUxpYnJhcnkuc2hvdyA9IGZ1bmN0aW9uKCkge1xuXHRcdG5nRGlhbG9nLm9wZW5Db25maXJtKHtcblx0XHRcdHRlbXBsYXRlOiAnL3VpL2NyZWF0ZUxpYnJhcnknXG5cdFx0fSk7XG5cdH07XG5cblx0Y3JlYXRlTGlicmFyeS5nZXRJbWcgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5tb2RlbCA/ICcvb2JqL2xpYnJhcmllcy97bW9kZWx9L2ltZy5qcGcnLnJlcGxhY2UoJ3ttb2RlbH0nLCB0aGlzLm1vZGVsKSA6IEVNUFRZX0lNQUdFX1VSTDtcblx0fTtcblxuXHRjcmVhdGVMaWJyYXJ5LmNyZWF0ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHRoaXMubW9kZWwpIHtcblx0XHRcdGRhdGEucG9zdExpYnJhcnkodGhpcy5tb2RlbCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG5cdFx0XHRcdGVudmlyb25tZW50LmdvVG9MaWJyYXJ5KHJlc3VsdC5pZCk7XG5cdFx0XHR9KS5jYXRjaChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdC8vVE9ETzogc2hvdyBhbiBlcnJvclxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9O1xuXG5cdHJldHVybiBjcmVhdGVMaWJyYXJ5O1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ1ZpcnR1YWxCb29rc2hlbGYnKVxuLmZhY3RvcnkoJ2NyZWF0ZVNlY3Rpb24nLCBmdW5jdGlvbiAoJGxvZywgdXNlciwgZW52aXJvbm1lbnQsIGxvY2F0b3IpIHtcblx0dmFyIGNyZWF0ZVNlY3Rpb24gPSB7fTtcblx0XG5cdHZhciBFTVBUWV9JTUFHRV9VUkwgPSAnL2ltZy9lbXB0eV9jb3Zlci5qcGcnO1xuXG5cdGNyZWF0ZVNlY3Rpb24ubGlzdCA9IFtdO1xuXHRjcmVhdGVTZWN0aW9uLm1vZGVsID0gbnVsbDtcblx0Y3JlYXRlU2VjdGlvbi52aXNpYmxlID0gZmFsc2U7XG5cblx0Y3JlYXRlU2VjdGlvbi5pc1Nob3cgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy52aXNpYmxlO1xuXHR9O1xuXG5cdGNyZWF0ZVNlY3Rpb24uc2hvdyA9IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMudmlzaWJsZSA9IHRydWU7XG5cdH07XG5cblx0Y3JlYXRlU2VjdGlvbi5oaWRlID0gZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy52aXNpYmxlID0gZmFsc2U7XG5cdH07XG5cdFxuXHRjcmVhdGVTZWN0aW9uLmdldEltZyA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLm1vZGVsID8gJy9vYmovc2VjdGlvbnMve21vZGVsfS9pbWcuanBnJy5yZXBsYWNlKCd7bW9kZWx9JywgdGhpcy5tb2RlbCkgOiBFTVBUWV9JTUFHRV9VUkw7XG5cdH07XG5cblx0Y3JlYXRlU2VjdGlvbi5jcmVhdGUgPSBmdW5jdGlvbigpIHtcblx0XHRpZih0aGlzLm1vZGVsKSB7XG5cdFx0XHR2YXIgc2VjdGlvbkRhdGEgPSB7XG5cdFx0XHRcdG1vZGVsOiB0aGlzLm1vZGVsLFxuXHRcdFx0XHRsaWJyYXJ5SWQ6IGVudmlyb25tZW50LmxpYnJhcnkuaWQsXG5cdFx0XHRcdHVzZXJJZDogdXNlci5nZXRJZCgpXG5cdFx0XHR9O1xuXG5cdFx0XHR0aGlzLnBsYWNlKHNlY3Rpb25EYXRhKTtcblx0XHR9XG5cdH07XG5cblx0Y3JlYXRlU2VjdGlvbi5wbGFjZSA9IGZ1bmN0aW9uKGR0bykge1xuXHRcdC8vVE9ETzogYmxvY2tcblx0XHRsb2NhdG9yLnBsYWNlU2VjdGlvbihkdG8pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuXHRcdFx0Ly9UT0RPOiBzaG93IGFuIGVycm9yXG5cdFx0XHQkbG9nLmVycm9yKGVycm9yKTtcblx0XHR9KTtcdFxuXHR9O1xuXG5cdHJldHVybiBjcmVhdGVTZWN0aW9uO1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ1ZpcnR1YWxCb29rc2hlbGYnKVxuLmZhY3RvcnkoJ2ZlZWRiYWNrJywgZnVuY3Rpb24gKHVzZXIsIGRhdGEsIGRpYWxvZykge1xuXHR2YXIgZmVlZGJhY2sgPSB7fTtcblx0dmFyIHNob3cgPSBmYWxzZTtcblxuXHRmZWVkYmFjay5tZXNzYWdlID0gbnVsbDtcblxuXHRmZWVkYmFjay5pc1Nob3cgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gc2hvdztcblx0fTtcblxuXHRmZWVkYmFjay5zaG93ID0gZnVuY3Rpb24oKSB7XG5cdFx0c2hvdyA9IHRydWU7XG5cdH07XG5cblx0ZmVlZGJhY2suaGlkZSA9IGZ1bmN0aW9uKCkge1xuXHRcdHNob3cgPSBmYWxzZTtcblx0fTtcblxuXHRmZWVkYmFjay5zdWJtaXQgPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgZGF0YU9iamVjdDtcblx0XHRcblx0XHRpZih0aGlzLmZvcm0ubWVzc2FnZS4kdmFsaWQpIHtcblx0XHRcdGRpYWxvZy5vcGVuQ29uZmlybSgnU2VuZCBmZWVkYmFjaz8nKS50aGVuKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0ZGF0YU9iamVjdCA9IHtcblx0XHRcdFx0XHRtZXNzYWdlOiB0aGlzLm1lc3NhZ2UsXG5cdFx0XHRcdFx0dXNlcklkOiB1c2VyLmdldElkKClcblx0XHRcdFx0fTtcblxuXHRcdFx0XHRyZXR1cm4gZGF0YS5wb3N0RmVlZGJhY2soZGF0YU9iamVjdCkudGhlbihmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0dGhpcy5tZXNzYWdlID0gbnVsbDtcblx0XHRcdFx0XHRmZWVkYmFjay5oaWRlKCk7XG5cdFx0XHRcdH0sIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRkaWFsb2cub3BlbkVycm9yKCdDYW4gbm90IHNlbmQgZmVlZGJhY2sgYmVjYXVzZSBvZiBhbiBlcnJvci4nKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZGlhbG9nLm9wZW5FcnJvcignRmVlZGJhY2sgZmllbGQgaXMgcmVxdWlyZWQuJyk7XG5cdFx0fVxuXHR9O1xuXG5cdHJldHVybiBmZWVkYmFjaztcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5mYWN0b3J5KCdpbnZlbnRvcnknLCBmdW5jdGlvbiAoJGxvZywgU2VsZWN0b3JNZXRhLCB1c2VyLCBkYXRhLCBib29rRWRpdCwgc2VsZWN0b3IsIGVudmlyb25tZW50LCBkaWFsb2csIGxvY2F0b3IsIGNhdGFsb2csIGJsb2NrKSB7XG5cdHZhciBpbnZlbnRvcnkgPSB7fTtcblxuXHRpbnZlbnRvcnkuc2VhcmNoID0gbnVsbDtcblxuXHRpbnZlbnRvcnkuZXhwYW5kID0gZnVuY3Rpb24oYm9vaykge1xuXHRcdGJvb2tFZGl0LnNldEJvb2soYm9vayk7XG5cdH07XG5cblx0aW52ZW50b3J5LmlzU2hvdyA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB1c2VyLmlzQXV0aG9yaXplZCgpO1xuXHR9O1xuXG5cdGludmVudG9yeS5pc0Jvb2tTZWxlY3RlZCA9IGZ1bmN0aW9uKGlkKSB7XG5cdFx0cmV0dXJuIHNlbGVjdG9yLmlzQm9va1NlbGVjdGVkKGlkKTtcblx0fTtcblxuXHRpbnZlbnRvcnkuc2VsZWN0ID0gZnVuY3Rpb24oZHRvKSB7XG5cdFx0dmFyIGJvb2sgPSBlbnZpcm9ubWVudC5nZXRCb29rKGR0by5pZCk7XG5cdFx0dmFyIG1ldGEgPSBuZXcgU2VsZWN0b3JNZXRhKGJvb2spO1xuXG5cdFx0c2VsZWN0b3Iuc2VsZWN0KG1ldGEpO1xuXHR9O1xuXG5cdGludmVudG9yeS5hZGRCb29rID0gZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5leHBhbmQoe3VzZXJJZDogdXNlci5nZXRJZCgpfSk7XG5cdH07XG5cblx0aW52ZW50b3J5LmRlbGV0ZSA9IGZ1bmN0aW9uKGJvb2spIHtcblx0XHRkaWFsb2cub3BlbkNvbmZpcm0oJ0RlbGV0ZSBib29rPycpLnRoZW4oZnVuY3Rpb24gKCkge1xuXHRcdFx0YmxvY2suaW52ZW50b3J5LnN0YXJ0KCk7XG5cblx0XHRcdGRhdGEuZGVsZXRlQm9vayhib29rLmlkKS50aGVuKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0aWYoc2VsZWN0b3IuaXNCb29rU2VsZWN0ZWQoYm9vay5pZCkpIHtcblx0XHRcdFx0XHRzZWxlY3Rvci51bnNlbGVjdCgpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0ZW52aXJvbm1lbnQucmVtb3ZlQm9vayhib29rLmlkKTtcblx0XHRcdFx0cmV0dXJuIGNhdGFsb2cubG9hZEJvb2tzKCk7XG5cdFx0XHR9KS5jYXRjaChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdGRpYWxvZy5vcGVuRXJyb3IoJ0RlbGV0ZSBib29rIGVycm9yLicpO1xuXHRcdFx0fSkuZmluYWxseShmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdGJsb2NrLmludmVudG9yeS5zdG9wKCk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fTtcblxuXHRpbnZlbnRvcnkucGxhY2UgPSBmdW5jdGlvbihib29rLCBldmVudCkge1xuXHRcdHZhciBwcm9taXNlO1xuXHRcdHZhciBpc0Jvb2tQbGFjZWQgPSAhIWJvb2suc2VjdGlvbklkO1xuXG5cdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XG5cdFx0YmxvY2suaW52ZW50b3J5LnN0YXJ0KCk7XG5cdFx0cHJvbWlzZSA9IGlzQm9va1BsYWNlZCA/IGxvY2F0b3IudW5wbGFjZUJvb2soYm9vaykgOiBsb2NhdG9yLnBsYWNlQm9vayhib29rKTtcblx0XHRwcm9taXNlLnRoZW4oZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIGNhdGFsb2cubG9hZEJvb2tzKCk7XG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG5cdFx0XHQvL1RPRE86IHNob3cgYW4gZXJyb3Jcblx0XHRcdCRsb2cuZXJyb3IoZXJyb3IpO1xuXHRcdH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuXHRcdFx0YmxvY2suaW52ZW50b3J5LnN0b3AoKTtcblx0XHR9KTtcblx0fTtcblxuXHRyZXR1cm4gaW52ZW50b3J5O1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ1ZpcnR1YWxCb29rc2hlbGYnKVxuLmZhY3RvcnkoJ21haW5NZW51JywgZnVuY3Rpb24gKCRsb2csIGRhdGEsIGJvb2tFZGl0LCBmZWVkYmFjaywgc2VsZWN0TGlicmFyeSwgY3JlYXRlTGlicmFyeSwgY3JlYXRlU2VjdGlvbikge1xuXHR2YXIgbWFpbk1lbnUgPSB7fTtcblx0XG5cdHZhciBzaG93ID0gZmFsc2U7XG5cdHZhciBjcmVhdGVMaXN0U2hvdyA9IGZhbHNlO1xuXG5cdG1haW5NZW51LmlzU2hvdyA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBzaG93O1xuXHR9O1xuXG5cdG1haW5NZW51LnNob3cgPSBmdW5jdGlvbigpIHtcblx0XHRtYWluTWVudS5oaWRlQWxsKCk7XG5cdFx0c2hvdyA9IHRydWU7XG5cdH07XG5cblx0bWFpbk1lbnUuaGlkZSA9IGZ1bmN0aW9uKCkge1xuXHRcdHNob3cgPSBmYWxzZTtcblx0fTtcblxuXHRtYWluTWVudS5pc0NyZWF0ZUxpc3RTaG93ID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGNyZWF0ZUxpc3RTaG93O1xuXHR9O1xuXG5cdG1haW5NZW51LmNyZWF0ZUxpc3RTaG93ID0gZnVuY3Rpb24oKSB7XG5cdFx0bWFpbk1lbnUuaGlkZUFsbCgpO1xuXHRcdGNyZWF0ZUxpc3RTaG93ID0gdHJ1ZTtcblx0fTtcblxuXHRtYWluTWVudS5jcmVhdGVMaXN0SGlkZSA9IGZ1bmN0aW9uKCkge1xuXHRcdGNyZWF0ZUxpc3RTaG93ID0gZmFsc2U7XG5cdH07XG5cblx0bWFpbk1lbnUuaGlkZUFsbCA9IGZ1bmN0aW9uKCkge1xuXHRcdG1haW5NZW51LmhpZGUoKTtcblx0XHRtYWluTWVudS5jcmVhdGVMaXN0SGlkZSgpO1xuXHRcdGNyZWF0ZVNlY3Rpb24uaGlkZSgpO1xuXG5cdFx0ZmVlZGJhY2suaGlkZSgpO1xuXHR9O1xuXG5cdG1haW5NZW51LnRyaWdnZXIgPSBmdW5jdGlvbigpIHtcblx0XHRpZihtYWluTWVudS5pc1Nob3coKSkge1xuXHRcdFx0bWFpbk1lbnUuaGlkZSgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRtYWluTWVudS5zaG93KCk7XG5cdFx0fVxuXHR9O1xuXG5cdG1haW5NZW51LnNob3dGZWVkYmFjayA9IGZ1bmN0aW9uKCkge1xuXHRcdG1haW5NZW51LmhpZGVBbGwoKTtcblx0XHRmZWVkYmFjay5zaG93KCk7XG5cdH07XG5cblx0bWFpbk1lbnUuc2hvd1NlbGVjdExpYnJhcnkgPSBmdW5jdGlvbigpIHtcblx0XHRtYWluTWVudS5oaWRlQWxsKCk7XG5cdFx0c2VsZWN0TGlicmFyeS5zaG93KCk7XG5cdH07XG5cblx0bWFpbk1lbnUuc2hvd0NyZWF0ZUxpYnJhcnkgPSBmdW5jdGlvbigpIHtcblx0XHRtYWluTWVudS5oaWRlQWxsKCk7XG5cdFx0Y3JlYXRlTGlicmFyeS5zaG93KCk7XG5cdH07XG5cblx0bWFpbk1lbnUuc2hvd0NyZWF0ZVNlY3Rpb24gPSBmdW5jdGlvbigpIHtcblx0XHRtYWluTWVudS5oaWRlQWxsKCk7XG5cdFx0Y3JlYXRlU2VjdGlvbi5zaG93KCk7XG5cdH07XG5cblx0dmFyIGluaXQgPSBmdW5jdGlvbigpIHtcblx0XHQvL1RPRE86IG1vdmUgdG8gbWVudSBtb2RlbHNcblx0XHRkYXRhLmdldFVJRGF0YSgpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHRcdFx0Y3JlYXRlTGlicmFyeS5saXN0ID0gcmVzLmRhdGEubGlicmFyaWVzO1xuXHRcdFx0Y3JlYXRlU2VjdGlvbi5saXN0ID0gcmVzLmRhdGEuYm9va3NoZWx2ZXM7XG5cdFx0XHRib29rRWRpdC5saXN0ID0gcmVzLmRhdGEuYm9va3M7XG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24gKCkge1xuXHRcdFx0JGxvZy5sb2coJ1VJIGluaXQgZXJyb3InKTtcblx0XHRcdC8vVE9ETzogc2hvdyBhbiBlcnJvclxuXHRcdH0pO1xuXHR9O1xuXG5cdGluaXQoKTtcblxuXHRyZXR1cm4gbWFpbk1lbnU7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgnc2VsZWN0TGlicmFyeScsIGZ1bmN0aW9uIChkYXRhLCBlbnZpcm9ubWVudCwgdXNlciwgbmdEaWFsb2cpIHtcblx0dmFyIHNlbGVjdExpYnJhcnkgPSB7fTtcblxuXHRzZWxlY3RMaWJyYXJ5Lmxpc3QgPSBbXTtcblxuXHRzZWxlY3RMaWJyYXJ5LnNob3cgPSBmdW5jdGlvbigpIHtcblx0XHRuZ0RpYWxvZy5vcGVuQ29uZmlybSh7XG5cdFx0XHR0ZW1wbGF0ZTogJy91aS9zZWxlY3RMaWJyYXJ5J1xuXHRcdH0pO1xuXHR9O1xuXG5cdHNlbGVjdExpYnJhcnkuaXNBdmFpbGFibGUgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gc2VsZWN0TGlicmFyeS5saXN0Lmxlbmd0aCA+IDA7XG5cdH07XG5cblx0c2VsZWN0TGlicmFyeS5pc1VzZXJMaWJyYXJ5ID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGVudmlyb25tZW50LmxpYnJhcnkgJiYgZW52aXJvbm1lbnQubGlicmFyeS5kYXRhT2JqZWN0LnVzZXJJZCA9PT0gdXNlci5nZXRJZCgpO1xuXHR9O1xuXG5cdHNlbGVjdExpYnJhcnkudXBkYXRlTGlzdCA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBzY29wZSA9IHRoaXM7XG5cblx0ICAgIHZhciBwcm9taXNlID0gZGF0YS5nZXRMaWJyYXJpZXMoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIHNjb3BlLmxpc3QgPSByZXMuZGF0YTtcbiAgICBcdH0pO1xuXG4gICAgXHRyZXR1cm4gcHJvbWlzZTtcblx0fTtcblxuXHRzZWxlY3RMaWJyYXJ5LmdvID0gZW52aXJvbm1lbnQuZ29Ub0xpYnJhcnk7XG5cblx0cmV0dXJuIHNlbGVjdExpYnJhcnk7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnVmlydHVhbEJvb2tzaGVsZicpXG4uZmFjdG9yeSgndG9vbHMnLCBmdW5jdGlvbiAoJHEsIEJvb2tPYmplY3QsIFNlY3Rpb25PYmplY3QsIGRhdGEsIHNlbGVjdG9yLCBkaWFsb2csIGJsb2NrLCBjYXRhbG9nLCBlbnZpcm9ubWVudCwgcHJldmlldykge1xuXHR2YXIgdG9vbHMgPSB7fTtcblxuXHR2YXIgUk9UQVRJT05fU0NBTEUgPSAxO1xuXG5cdHZhciBzdGF0ZXMgPSB7XG5cdFx0cm90YXRlTGVmdDogZmFsc2UsXG5cdFx0cm90YXRlUmlnaHQ6IGZhbHNlXG5cdH07XG5cblx0dG9vbHMuZGVsZXRlID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG9iaiA9IHNlbGVjdG9yLmdldFNlbGVjdGVkT2JqZWN0KCk7XG5cblx0XHRpZihvYmogJiYgc2VsZWN0b3IuaXNTZWxlY3RlZEVkaXRhYmxlKCkpIHtcblx0XHRcdGRpYWxvZy5vcGVuQ29uZmlybSgnRGVsZXRlIHNlbGVjdGVkIG9iamVjdD8nKS50aGVuKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0YmxvY2suZ2xvYmFsLnN0YXJ0KCk7XG5cblx0XHRcdFx0ZGVsZXRlT2JqZWN0KG9iaikudGhlbihmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0c2VsZWN0b3IudW5zZWxlY3QoKTtcblx0XHRcdFx0XHRyZXR1cm4gY2F0YWxvZy5sb2FkQm9va3MoKTtcblx0XHRcdFx0fSkuY2F0Y2goZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdGRpYWxvZy5vcGVuRXJyb3IoJ0Vycm9yIGRlbGV0aW5nIG9iamVjdC4nKTtcblx0XHRcdFx0fSkuZmluYWxseShmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0YmxvY2suZ2xvYmFsLnN0b3AoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcdFx0XHRcblx0XHR9XG5cdH07XG5cblx0dmFyIGRlbGV0ZU9iamVjdCA9IGZ1bmN0aW9uKG9iaikge1xuXHRcdHJldHVybiAkcS53aGVuKFxuXHRcdFx0b2JqIGluc3RhbmNlb2YgQm9va09iamVjdCA/IFxuXHRcdFx0XHRkZWxldGVCb29rKG9iai5pZCkgOlxuXHRcdFx0XHRvYmogaW5zdGFuY2VvZiBTZWN0aW9uT2JqZWN0ID9cblx0XHRcdFx0XHRkZWxldGVTZWN0aW9uKG9iai5pZCkgOlxuXHRcdFx0XHRcdCRxLnJlamVjdCgnQ2FuIG5vdCBkZWxldGUgc2VsZWN0ZWQgb2JqZWN0LicpLy9UT0RPOiB0ZXN0XG5cdFx0KTtcblx0fTtcblxuXHR2YXIgZGVsZXRlQm9vayA9IGZ1bmN0aW9uKGlkKSB7XG5cdFx0cmV0dXJuIGRhdGEuZGVsZXRlQm9vayhpZCkudGhlbihmdW5jdGlvbiAoKSB7XG5cdFx0XHRlbnZpcm9ubWVudC5yZW1vdmVCb29rKGlkKTtcblx0XHR9KTtcblx0fTtcblxuXHR2YXIgZGVsZXRlU2VjdGlvbiA9IGZ1bmN0aW9uKGlkKSB7XG5cdFx0cmV0dXJuIGRhdGEuZGVsZXRlU2VjdGlvbihpZCkudGhlbihmdW5jdGlvbiAoKSB7XG5cdFx0XHRlbnZpcm9ubWVudC5yZW1vdmVTZWN0aW9uKGlkKTtcblx0XHR9KTtcblx0fTtcblxuXHR0b29scy5yb3RhdGVMZWZ0ID0gZnVuY3Rpb24oKSB7XG5cdFx0c3RhdGVzLnJvdGF0ZUxlZnQgPSB0cnVlO1xuXHR9O1xuXG5cdHRvb2xzLnJvdGF0ZVJpZ2h0ID0gZnVuY3Rpb24oKSB7XG5cdFx0c3RhdGVzLnJvdGF0ZVJpZ2h0ID0gdHJ1ZTtcblx0fTtcblxuXHR0b29scy5zdG9wID0gZnVuY3Rpb24oKSB7XG5cdFx0c3RhdGVzLnJvdGF0ZUxlZnQgPSBmYWxzZTtcblx0XHRzdGF0ZXMucm90YXRlUmlnaHQgPSBmYWxzZTtcblx0fTtcblxuXHR0b29scy51cGRhdGUgPSBmdW5jdGlvbigpIHtcblx0XHRpZihzdGF0ZXMucm90YXRlTGVmdCkge1xuXHRcdFx0cm90YXRlKFJPVEFUSU9OX1NDQUxFKTtcblx0XHR9IGVsc2UgaWYoc3RhdGVzLnJvdGF0ZVJpZ2h0KSB7XG5cdFx0XHRyb3RhdGUoLVJPVEFUSU9OX1NDQUxFKTtcblx0XHR9XG5cdH07XG5cblx0dmFyIHJvdGF0ZSA9IGZ1bmN0aW9uKHNjYWxlKSB7XG5cdFx0aWYocHJldmlldy5pc0FjdGl2ZSgpKSB7XG5cdFx0XHRwcmV2aWV3LnJvdGF0ZShzY2FsZSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZhciBvYmogPSBzZWxlY3Rvci5nZXRTZWxlY3RlZE9iamVjdCgpO1xuXHRcdFx0b2JqLnJvdGF0ZShzY2FsZSk7XG5cdFx0fVxuXHR9O1xuXG5cdHJldHVybiB0b29scztcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdWaXJ0dWFsQm9va3NoZWxmJylcbi5mYWN0b3J5KCd0b29sdGlwJywgZnVuY3Rpb24gKCkge1xuXHR2YXIgdG9vbHRpcCA9IHt9O1xuXG5cdHRvb2x0aXAub2JqID0ge307XG5cblx0dG9vbHRpcC5zZXQgPSBmdW5jdGlvbihvYmopIHtcblx0XHRpZihvYmopIHtcblx0XHRcdHRoaXMub2JqLnR5cGUgPSBvYmoudHlwZTtcblx0XHRcdHRoaXMub2JqLnRpdGxlID0gb2JqLmRhdGFPYmplY3QudGl0bGU7XG5cdFx0XHR0aGlzLm9iai5hdXRob3IgPSBvYmouZGF0YU9iamVjdC5hdXRob3I7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMub2JqLnR5cGUgPSBudWxsO1xuXHRcdH1cblx0fTtcblxuXHRyZXR1cm4gdG9vbHRpcDtcbn0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==