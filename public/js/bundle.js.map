{"version":3,"sources":["webpack:////js/bundle.js","webpack:///webpack/bootstrap 2df1b2e6cac052be415f","webpack:///./src/js/index.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/index.js","webpack:///./src/js/services/main.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/main.js","webpack:///./src/js/app.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/app.js","webpack:///./src/js/services/camera.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/camera.js","webpack:///./src/js/services/models/CameraObject.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/models/CameraObject.js","webpack:///./src/js/services/models/BaseObject.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/models/BaseObject.js","webpack:///./src/js/services/models/subclassOf.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/models/subclassOf.js","webpack:///./src/js/services/controls.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/controls.js","webpack:///./src/js/services/models/SelectorMeta.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/models/SelectorMeta.js","webpack:///./src/js/services/models/BookObject.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/models/BookObject.js","webpack:///./src/js/services/data.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/data.js","webpack:///./src/js/services/models/ShelfObject.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/models/ShelfObject.js","webpack:///./src/js/services/models/SectionObject.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/models/SectionObject.js","webpack:///./src/js/services/navigation.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/navigation.js","webpack:///./src/js/services/environment.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/environment.js","webpack:///./src/js/services/models/LibraryObject.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/models/LibraryObject.js","webpack:///./src/js/services/materials/BookMaterial.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/materials/BookMaterial.js","webpack:///./src/js/services/cache.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/cache.js","webpack:///./src/js/services/mouse.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/mouse.js","webpack:///./src/js/services/scene/selector.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/scene/selector.js","webpack:///./src/js/services/scene/highlight.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/scene/highlight.js","webpack:///./src/js/services/scene/preview.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/scene/preview.js","webpack:///./src/js/services/ui/tooltip.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/ui/tooltip.js","webpack:///./src/js/services/ui/catalog.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/ui/catalog.js","webpack:///./src/js/services/ui/block.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/ui/block.js","webpack:///./src/js/services/ui/tools.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/ui/tools.js","webpack:///./src/js/services/models/SelectorMetaDto.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/models/SelectorMetaDto.js","webpack:///./src/js/services/dialog.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/dialog.js","webpack:///./src/js/services/user.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/user.js","webpack:///./src/js/services/scene/locator.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/scene/locator.js","webpack:///./src/js/services/scene/gridCalculator.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/scene/gridCalculator.js","webpack:///./src/js/services/ui/userData.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/ui/userData.js","webpack:///./src/js/services/ui/selectLibrary.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/ui/selectLibrary.js","webpack:///./src/js/controllers/MainMenuCtrl.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/controllers/MainMenuCtrl.js","webpack:///./src/js/services/ui/mainMenu.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/ui/mainMenu.js","webpack:///./src/js/services/ui/bookEdit.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/ui/bookEdit.js","webpack:///./src/js/services/archive.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/archive.js","webpack:///./src/js/services/ui/feedback.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/ui/feedback.js","webpack:///./src/js/services/ui/createLibrary.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/ui/createLibrary.js","webpack:///./src/js/services/ui/createSection.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/ui/createSection.js","webpack:///./src/js/services/ui/linkAccount.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/ui/linkAccount.js","webpack:///./src/js/services/ui/authorization.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/ui/authorization.js","webpack:///./src/js/services/ui/registration.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/services/ui/registration.js","webpack:///./src/js/controllers/BookEditCtrl.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/controllers/BookEditCtrl.js","webpack:///./src/js/controllers/CreateLibraryCtrl.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/controllers/CreateLibraryCtrl.js","webpack:///./src/js/controllers/CreateSectionCtrl.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/controllers/CreateSectionCtrl.js","webpack:///./src/js/controllers/FeedbackCtrl.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/controllers/FeedbackCtrl.js","webpack:///./src/js/controllers/InventoryCtrl.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/controllers/InventoryCtrl.js","webpack:///./src/js/controllers/LinkAccountCtrl.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/controllers/LinkAccountCtrl.js","webpack:///./src/js/controllers/NavigationCtrl.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/controllers/NavigationCtrl.js","webpack:///./src/js/controllers/RegistrationCtrl.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/controllers/RegistrationCtrl.js","webpack:///./src/js/controllers/SelectLibraryCtrl.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/controllers/SelectLibraryCtrl.js","webpack:///./src/js/controllers/ToolsCtrl.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/controllers/ToolsCtrl.js","webpack:///./src/js/controllers/TooltipCtrl.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/controllers/TooltipCtrl.js","webpack:///./src/js/controllers/WelcomeCtrl.js","webpack:///d:/Projects/personal/VirtualBookshelf/src/js/controllers/WelcomeCtrl.js","webpack:///./~/font-awesome/css/font-awesome.min.css?38b9","webpack:///./~/font-awesome/css/font-awesome.min.css","webpack:///./~/css-loader/lib/css-base.js","webpack:///./~/font-awesome/fonts/fontawesome-webfont.eot?8c2b","webpack:///./~/font-awesome/fonts/fontawesome-webfont.eot","webpack:///./~/font-awesome/fonts/fontawesome-webfont.woff2","webpack:///./~/font-awesome/fonts/fontawesome-webfont.woff","webpack:///./~/font-awesome/fonts/fontawesome-webfont.ttf","webpack:///./~/font-awesome/fonts/fontawesome-webfont.svg","webpack:///./~/style-loader/addStyles.js","webpack:///./src/css/style.css?21aa","webpack:///./src/css/style.css"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","_app","_app2","angular","element","document","ready","bootstrap","name","factory","$log","$q","camera","controls","user","environment","tools","navigation","userData","block","locator","canvas","renderer","main","start","Detector","webgl","init","global","load","then","all","loadLibrary","getLibrary","error","centerObject","object","setLoaded","startRenderLoop","stop","winResize","width","window","innerWidth","height","innerHeight","getElementById","LIBRARY_CANVAS_ID","THREE","WebGLRenderer","undefined","antialias","setSize","THREEx","WindowResize","scene","Scene","fog","Fog","requestAnimationFrame","update","render","Object","defineProperty","value","config","growlProvider","blockUIConfig","paginationTemplateProvider","globalTimeToLive","globalPosition","globalDisableCountDown","delay","autoBlock","autoInjectBodyBlock","setPath","run","CameraObject","HEIGTH","setParent","parent","add","this","getPosition","position","PerspectiveCamera","set","rotation","order","candle","PointLight","rotate","x","y","newX","newY","go","speed","direction","getVector","newPosition","clone","multiplyScalar","move","vector","Vector3","applyEuler","BaseObject","subclassOf","geometry","Geometry","boundingBox","Box3","prototype","updateBoundingBox","radius","max","z","center","dataObject","material","Mesh","setDtoTransformations","getType","vbType","getId","setX","pos_x","setY","pos_y","setZ","pos_z","fromArray","map","Number","isOutOfParrent","Math","abs","isCollided","result","targets","target","i","children","length","currentPosition","changed","dX","dY","isDemo","currentRotation","updateMatrix","applyMatrix4","matrix","min","addVectors","rollback","_subclassOf","base","$rootScope","SelectorMeta","BookObject","ShelfObject","SectionObject","mouse","selector","preview","initListeners","addEventListener","onMouseDown","onMouseUp","onMouseMove","oncontextmenu","isActive","longX","longY","BUTTONS_GO_SPEED","event","down","isCanvas","selectObject","placing","place","selectFocused","$apply","up","which","isSelectedEditable","getSelectedObject","save","preventDefault","moveObject","intersected","library","getIntersected","focus","mouseVector","selectedObject","localToWorld","worldToLocal","parentId","type","isEmpty","equals","meta","data","TYPE","scope","dto","userId","postBook","responseDto","shelfId","sectionId","remove","$http","TEXTURE_RESOLUTION","COVER_MAX_Y","COVER_FACE_X","loadImage","url","deffered","defer","img","Image","crossOrigin","src","complete","resolve","onload","onerror","reject","promise","getCover","get","res","postCover","externalURL","tags","post","logout","getUser","putUser","put","deleteUser","getUserBooks","book","deleteBook","method","getUIData","getLibraries","libraryId","postLibrary","libraryModel","getSections","postSection","sectionData","deleteSection","loadGeometry","link","jsonLoader","JSONLoader","computeBoundingBox","getData","postFeedback","common","params","size","BoxGeometry","transparent","opacity","shelves","key","BUTTONS_ROTATE_SPEED","state","forward","backward","left","right","goStop","goForward","goBackward","goLeft","goRight","$window","LibraryObject","BookMaterial","cache","CLEARANCE","libraryDto","sections","books","clearScene","dict","parseLibraryDto","initCache","createLibrary","createSections","createBooks","goToLibrary","location","getLoaded","getBook","bookId","getDictObject","getSection","getShelf","section","shelf","objectId","dictItem","dictObject","updateSection","removeSection","createSection","when","updateBook","getBookShelf","removeBook","createBook","removeObject","sectionsDict","booksDict","model","sectionModels","bookModels","imageUrls","sectionDto","bookDto","cover","dispose","sectionIndex","bookIndex","libraryCache","texture","Texture","mapImage","MeshPhongMaterial","needsUpdate","AmbientLight","createObjects","results","push","sectionCache","addToDict","promises","bookCache","coverId","coverCache","getImage","coverMapImage","image","bumpMapImage","specularMapImage","placeBookOnShelf","uniforms","parameters","bumpMap","specularMap","coverMap","VERTEX_SHADER_ID","FRAGMENT_SHADER_ID","vertexShader","textContent","fragmentShader","defines","UniformsUtils","merge","UniformsLib","bump","lights","shininess","PHONG","bumpScale","specular","Color","USE_COVER","ShaderMaterial","create","constructor","images","covers","libraryLoad","loadLibraryData","sectionsLoad","booksLoad","imagesLoad","addSection","addBook","addImageByDto","commonGetter","addImageById","commonAdder","loadSectionData","loadBookData","coverDto","addImage","loadedCache","from","addFunction","where","what","loader","path","replace","modelUrl","mapUrl","dataUrl","bumpMapUrl","specularMapUrl","getWidth","getHeight","getTarget","clientX","clientY","objects","recursive","searchFor","raycaster","intersects","j","Raycaster","intersectObjects","unproject","sub","normalize","highlight","tooltip","catalog","selected","focused","getFocusedObject","select","getObject","unselect","disable","getSelectedDto","isSelectedBook","isSelectedSection","isShelf","isBook","isSection","isBookSelected","isSelectedShelf","PLANE_ROTATION","PI","PLANE_MULTIPLIER","COLOR_SELECT","COLOR_FOCUS","materialProperties","ImageUtils","loadTexture","side","DoubleSide","blending","AdditiveBlending","depthTest","color","materialSelect","MeshBasicMaterial","materialFocus","PlaneBufferGeometry","commonHighlight","bottom","scale","visible","enable","container","active","Object3D","activate","objClone","clearContainer","forEach","child","title","author","loadBooks","inventory","_","find","blockUI","INVENTORY","MAIN_MENU","GLOBAL","instances","mainMenu","SelectorMetaDto","dialog","growl","ROTATION_SCALE","states","rotateLeft","rotateRight","selectedDto","focusedObject","placeBook","success","unplace","unplaceBook","ngDialog","TEMPLATE","ERROR","CONFIRM","WARNING","INFO","iconClassMap","openError","msg","openDialog","openConfirm","openWarning","openInfo","cancelButton","template","iconClass","getIconClass","_dataObject","setDataObject","setLibrary","getName","getEmail","email","pathname","substring","isAuthorized","isTemporary","isLoaded","Boolean","temporary","isGoogle","googleId","isTwitter","twitterId","isFacebook","facebookId","isVkontakte","vkontakteId","gridCalculator","debugEnabled","targetBB","spaceBB","matrixPrecision","occupiedMatrix","getOccupiedMatrix","freePosition","getFreeMatrix","placeSection","sectionBB","libraryBB","freePlace","getFreePlace","saveSection","newDto","shelfBB","bookBB","saveBook","getFreeMatrixCells","debugShowFree","xIndex","zIndex","DISTANCE","minPosition","edges","getEdges","minZCell","maxZCell","minXCell","maxXCell","pos","getPositionFromCells","freeCellsStart","cells","targetCellsSize","freeCellsCount","range","cellToPos","offset","getBottomY","objectBB","minKeyX","maxKeyX","minKeyZ","maxKeyZ","round","debugCells","debugShowBB","debugAddOccupied","debug","objBox","MeshLambertMaterial","zKey","cell","cellBox","precision","posMin","posToCell","posMax","divide","multiply","selectLibrary","updateList","list","show","isAvailable","isUserLibrary","libraries","controller","authorization","isShow","createListShow","showSelectLibrary","showFeedback","showLinkAccount","isLinkAccountAvailable","isCreateListShow","showCreateLibrary","showCreateSection","trigger","bookEdit","feedback","linkAccount","hideAll","hide","createListHide","archive","bookDialog","BOOK_IMAGE_URL","EMPTY_IMAGE_URL","setBook","open","getImg","getCoverImg","applyCover","coverInputURL","sendExternalURL","cancel","close","feedbackDialog","send","createLibraryDialog","TEMPLATE_ID","createSectionDialog","isGoogleShow","isTwitterShow","isFacebookShow","isVkontakteShow","$interval","registration","login","win","checkAuthWindow","closed","log","google","twitter","facebook","vkontakte","FORM_VALIDATION_ERROR","SAVE_USER_ERROR","saveUser","showValidationError","isCoverDisabled","submit","form","$valid","$invalid","commonData","bookshelves","message","linkGoogle","linkTwitter","linkFacebook","linkVkontakte","getList","DELETE_CONFIRM","DELETE_SUCCESS","DELETE_ERROR","BOOK","SECTION","isRotatable","isEditable","isDeletable","isWatchable","isPlaceble","isUnplaceble","isPlacing","watch","getTitle","edit","confirmMsg","successMsg","errorMsg","deleteFnc","unwatch","isWatchActive","isShowAuthorization","isShowSelectLibrary","isShowCreateLibrary","showLoginDialog","showSelectLibraryDialog","showCreateLibraryDialog","content","locals","toString","item","join","mediaQuery","alreadyImportedModules","addStylesToDom","styles","options","domStyle","stylesInDom","refs","parts","addStyle","listToStyles","newStyles","css","media","sourceMap","part","insertStyleElement","styleElement","head","getHeadElement","lastStyleElementInsertedAtTop","styleElementsInsertedAtTop","insertAt","nextSibling","insertBefore","appendChild","firstChild","Error","removeStyleElement","parentNode","removeChild","idx","indexOf","splice","createStyleElement","createElement","createLinkElement","linkElement","rel","singleton","styleIndex","singletonCounter","singletonElement","applyToSingletonTag","bind","URL","createObjectURL","revokeObjectURL","Blob","btoa","updateLink","href","applyToTag","newObj","index","styleSheet","cssText","replaceText","cssNode","createTextNode","childNodes","setAttribute","unescape","encodeURIComponent","JSON","stringify","blob","oldSrc","memoize","fn","memo","apply","arguments","isOldIE","test","navigator","userAgent","toLowerCase","getElementsByTagName","newList","mayRemove","textStore","replacement","filter"],"mappings":"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","file":"/js/bundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(1);\n\t\n\t__webpack_require__(33);\n\t\n\t__webpack_require__(43);\n\t\n\t__webpack_require__(44);\n\t\n\t__webpack_require__(45);\n\t\n\t__webpack_require__(46);\n\t\n\t__webpack_require__(47);\n\t\n\t__webpack_require__(48);\n\t\n\t__webpack_require__(49);\n\t\n\t__webpack_require__(50);\n\t\n\t__webpack_require__(51);\n\t\n\t__webpack_require__(52);\n\t\n\t__webpack_require__(53);\n\t\n\t__webpack_require__(54);\n\t\n\tvar _app = __webpack_require__(2);\n\t\n\tvar _app2 = _interopRequireDefault(_app);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t__webpack_require__(55);\n\t__webpack_require__(65);\n\t\n\tangular.element(document).ready(function () {\n\t  angular.bootstrap(document, [_app2.default.name], {\n\t    //strictDi: true\n\t  });\n\t});\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(2);\n\t\n\t__webpack_require__(3);\n\t\n\t__webpack_require__(7);\n\t\n\t__webpack_require__(28);\n\t\n\t__webpack_require__(14);\n\t\n\t__webpack_require__(13);\n\t\n\t__webpack_require__(25);\n\t\n\t__webpack_require__(31);\n\t\n\t__webpack_require__(24);\n\t\n\t__webpack_require__(29);\n\t\n\tangular.module('VirtualBookshelf').factory('main', [\"$log\", \"$q\", \"camera\", \"controls\", \"user\", \"environment\", \"tools\", \"navigation\", \"userData\", \"block\", \"locator\", function ($log, $q, camera, controls, user, environment, tools, navigation, userData, block, locator) {\n\t\tvar canvas;\n\t\tvar renderer;\n\t\n\t\tvar main = {};\n\t\n\t\tmain.start = function () {\n\t\t\tif (Detector.webgl) {\n\t\t\t\tinit();\n\t\t\t\tcontrols.init();\n\t\n\t\t\t\tblock.global.start();\n\t\t\t\tuser.load().then(function () {\n\t\t\t\t\treturn $q.all([environment.loadLibrary(user.getLibrary() || 1), userData.load()]);\n\t\t\t\t}).catch(function (error) {\n\t\t\t\t\t$log.error(error);\n\t\t\t\t\t//TODO: show error message\n\t\t\t\t}).finally(function () {\n\t\t\t\t\tlocator.centerObject(camera.object);\n\t\t\t\t\tenvironment.setLoaded(true);\n\t\t\t\t\tstartRenderLoop();\n\t\t\t\t\tblock.global.stop();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Detector.addGetWebGLMessage();\n\t\t\t}\n\t\t};\n\t\n\t\tvar init = function init() {\n\t\t\tvar winResize;\n\t\t\tvar width = window.innerWidth;\n\t\t\tvar height = window.innerHeight;\n\t\n\t\t\tcanvas = document.getElementById(environment.LIBRARY_CANVAS_ID);\n\t\t\trenderer = new THREE.WebGLRenderer({ canvas: canvas ? canvas : undefined, antialias: true });\n\t\t\trenderer.setSize(width, height);\n\t\t\twinResize = new THREEx.WindowResize(renderer, camera.camera);\n\t\n\t\t\tenvironment.scene = new THREE.Scene();\n\t\t\tenvironment.scene.fog = new THREE.Fog(0x000000, 4, 7);\n\t\t};\n\t\n\t\tvar startRenderLoop = function startRenderLoop() {\n\t\t\trequestAnimationFrame(startRenderLoop);\n\t\n\t\t\tcontrols.update();\n\t\t\tnavigation.update();\n\t\t\ttools.update();\n\t\n\t\t\trenderer.render(environment.scene, camera.camera);\n\t\t};\n\t\n\t\treturn main;\n\t}]);\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.default = angular.module('VirtualBookshelf', ['angular-growl', 'blockUI', 'ngDialog', 'angularUtils.directives.dirPagination']).config([\"growlProvider\", \"blockUIConfig\", \"paginationTemplateProvider\", function (growlProvider, blockUIConfig, paginationTemplateProvider) {\n\t\tgrowlProvider.globalTimeToLive(2000);\n\t\tgrowlProvider.globalPosition('top-left');\n\t\tgrowlProvider.globalDisableCountDown(true);\n\t\n\t\tblockUIConfig.delay = 0;\n\t\tblockUIConfig.autoBlock = false;\n\t\tblockUIConfig.autoInjectBodyBlock = false;\n\t\n\t\tpaginationTemplateProvider.setPath('/ui/dirPagination');\n\t}]).run([\"main\", function (main) {\n\t\tmain.start();\n\t}]);\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(4);\n\t\n\tangular.module('VirtualBookshelf').factory('camera', [\"CameraObject\", function (CameraObject) {\n\t\tvar camera = {\n\t\t\tHEIGTH: 1.5,\n\t\t\tobject: new CameraObject(),\n\t\t\tsetParent: function setParent(parent) {\n\t\t\t\tparent.add(this.object);\n\t\t\t},\n\t\t\tgetPosition: function getPosition() {\n\t\t\t\treturn this.object.position;\n\t\t\t}\n\t\t};\n\t\n\t\tvar init = function init() {\n\t\t\tvar width = window.innerWidth;\n\t\t\tvar height = window.innerHeight;\n\t\n\t\t\tcamera.camera = new THREE.PerspectiveCamera(45, width / height, 0.01, 50);\n\t\t\tcamera.object.position.set(0, camera.HEIGTH, 0);\n\t\t\tcamera.object.rotation.order = 'YXZ';\n\t\n\t\t\tvar candle = new THREE.PointLight(0x665555, 1.6, 10);\n\t\t\tcandle.position.set(0, 0, 0);\n\t\n\t\t\tcamera.object.add(candle);\n\t\t\tcamera.object.add(camera.camera);\n\t\t};\n\t\n\t\tcamera.rotate = function (x, y) {\n\t\t\tvar newX = this.object.rotation.x + y * 0.0001 || 0;\n\t\t\tvar newY = this.object.rotation.y + x * 0.0001 || 0;\n\t\n\t\t\tif (newX < 1.57 && newX > -1.57) {\n\t\t\t\tthis.object.rotation.x = newX;\n\t\t\t}\n\t\n\t\t\tthis.object.rotation.y = newY;\n\t\t};\n\t\n\t\tcamera.go = function (speed) {\n\t\t\tvar direction = this.getVector();\n\t\t\tvar newPosition = this.object.position.clone();\n\t\t\tnewPosition.add(direction.multiplyScalar(speed));\n\t\n\t\t\tthis.object.move(newPosition);\n\t\t};\n\t\n\t\tcamera.getVector = function () {\n\t\t\tvar vector = new THREE.Vector3(0, 0, -1);\n\t\n\t\t\treturn vector.applyEuler(this.object.rotation);\n\t\t};\n\t\n\t\tinit();\n\t\n\t\treturn camera;\n\t}]);\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(5);\n\t\n\t__webpack_require__(6);\n\t\n\tangular.module('VirtualBookshelf').factory('CameraObject', [\"BaseObject\", \"subclassOf\", function (BaseObject, subclassOf) {\n\t\tvar CameraObject = function CameraObject() {\n\t\t\tvar geometry = new THREE.Geometry();\n\t\t\tgeometry.boundingBox = new THREE.Box3(new THREE.Vector3(-0.1, -1, -0.1), new THREE.Vector3(0.1, 1, 0.1));\n\t\n\t\t\tBaseObject.call(this, null, geometry);\n\t\t};\n\t\n\t\tCameraObject.prototype = subclassOf(BaseObject);\n\t\n\t\tCameraObject.prototype.updateBoundingBox = function () {\n\t\t\tvar radius = {\n\t\t\t\tx: this.geometry.boundingBox.max.x,\n\t\t\t\ty: this.geometry.boundingBox.max.y,\n\t\t\t\tz: this.geometry.boundingBox.max.z\n\t\t\t};\n\t\n\t\t\tthis.boundingBox = {\n\t\t\t\tradius: radius,\n\t\t\t\tcenter: this.position //TODO: needs center of section in parent or world coordinates\n\t\t\t};\n\t\t};\n\t\n\t\treturn CameraObject;\n\t}]);\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('VirtualBookshelf').factory('BaseObject', [\"subclassOf\", function (subclassOf) {\n\t\tvar BaseObject = function BaseObject(dataObject, geometry, material) {\n\t\t\tTHREE.Mesh.call(this, geometry, material);\n\t\n\t\t\tthis.dataObject = dataObject || {};\n\t\t\tthis.rotation.order = 'XYZ';\n\t\t\tthis.setDtoTransformations();\n\t\t};\n\t\n\t\tBaseObject.prototype = subclassOf(THREE.Mesh);\n\t\n\t\tBaseObject.prototype.getType = function () {\n\t\t\treturn this.vbType;\n\t\t};\n\t\n\t\tBaseObject.prototype.getId = function () {\n\t\t\treturn this.dataObject && this.dataObject.id;\n\t\t};\n\t\n\t\tBaseObject.prototype.setDtoTransformations = function () {\n\t\t\tthis.position.setX(this.dataObject.pos_x || 0);\n\t\t\tthis.position.setY(this.dataObject.pos_y || 0);\n\t\t\tthis.position.setZ(this.dataObject.pos_z || 0);\n\t\n\t\t\tif (this.dataObject.rotation) this.rotation.fromArray(this.dataObject.rotation.map(Number));\n\t\n\t\t\tthis.updateBoundingBox();\n\t\t};\n\t\n\t\tBaseObject.prototype.isOutOfParrent = function () {\n\t\t\treturn Math.abs(this.boundingBox.center.x - this.parent.boundingBox.center.x) > this.parent.boundingBox.radius.x - this.boundingBox.radius.x || Math.abs(this.boundingBox.center.z - this.parent.boundingBox.center.z) > this.parent.boundingBox.radius.z - this.boundingBox.radius.z;\n\t\t};\n\t\n\t\tBaseObject.prototype.isCollided = function () {\n\t\t\tvar result, targets, target, i;\n\t\n\t\t\tthis.updateBoundingBox();\n\t\n\t\t\tresult = this.isOutOfParrent();\n\t\t\ttargets = this.parent.children;\n\t\n\t\t\tif (!result) {\n\t\t\t\tfor (i = targets.length - 1; i >= 0; i--) {\n\t\t\t\t\ttarget = targets[i].boundingBox;\n\t\n\t\t\t\t\tif (targets[i] === this || !target || // children without BB\n\t\t\t\t\tMath.abs(this.boundingBox.center.x - target.center.x) > this.boundingBox.radius.x + target.radius.x || Math.abs(this.boundingBox.center.y - target.center.y) > this.boundingBox.radius.y + target.radius.y || Math.abs(this.boundingBox.center.z - target.center.z) > this.boundingBox.radius.z + target.radius.z) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tresult = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\treturn result;\n\t\t};\n\t\n\t\tBaseObject.prototype.move = function (newPosition) {\n\t\t\tvar currentPosition, result;\n\t\n\t\t\tresult = false;\n\t\t\tcurrentPosition = this.position.clone();\n\t\n\t\t\tif (newPosition.x) {\n\t\t\t\tthis.position.setX(newPosition.x);\n\t\n\t\t\t\tif (this.isCollided()) {\n\t\t\t\t\tthis.position.setX(currentPosition.x);\n\t\t\t\t} else {\n\t\t\t\t\tresult = true;\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tif (newPosition.z) {\n\t\t\t\tthis.position.setZ(newPosition.z);\n\t\n\t\t\t\tif (this.isCollided()) {\n\t\t\t\t\tthis.position.setZ(currentPosition.z);\n\t\t\t\t} else {\n\t\t\t\t\tresult = true;\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tthis.changed = this.changed || result;\n\t\t\tthis.updateBoundingBox();\n\t\n\t\t\treturn result;\n\t\t};\n\t\n\t\tBaseObject.prototype.rotate = function (dX, dY, isDemo) {\n\t\t\tvar currentRotation = this.rotation.clone(),\n\t\t\t    result = false;\n\t\n\t\t\tif (dX) {\n\t\t\t\tthis.rotation.y += dX * 0.01;\n\t\n\t\t\t\tif (!isDemo && this.isCollided()) {\n\t\t\t\t\tthis.rotation.y = currentRotation.y;\n\t\t\t\t} else {\n\t\t\t\t\tresult = true;\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tif (dY) {\n\t\t\t\tthis.rotation.x += dY * 0.01;\n\t\n\t\t\t\tif (!isDemo && this.isCollided()) {\n\t\t\t\t\tthis.rotation.x = currentRotation.x;\n\t\t\t\t} else {\n\t\t\t\t\tresult = true;\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tthis.changed = this.changed || !isDemo && result;\n\t\t\tthis.updateBoundingBox();\n\t\t};\n\t\n\t\tBaseObject.prototype.updateBoundingBox = function () {\n\t\t\tvar boundingBox, radius, center;\n\t\n\t\t\tthis.updateMatrix();\n\t\t\tboundingBox = this.geometry.boundingBox.clone().applyMatrix4(this.matrix);\n\t\n\t\t\tradius = {\n\t\t\t\tx: (boundingBox.max.x - boundingBox.min.x) * 0.5,\n\t\t\t\ty: (boundingBox.max.y - boundingBox.min.y) * 0.5,\n\t\t\t\tz: (boundingBox.max.z - boundingBox.min.z) * 0.5\n\t\t\t};\n\t\n\t\t\tcenter = new THREE.Vector3();\n\t\t\tcenter.addVectors(boundingBox.min, boundingBox.max);\n\t\t\tcenter.multiplyScalar(0.5);\n\t\n\t\t\tthis.boundingBox = {\n\t\t\t\tradius: radius,\n\t\t\t\tcenter: center\n\t\t\t};\n\t\t};\n\t\n\t\tBaseObject.prototype.rollback = function () {\n\t\t\tthis.setDtoTransformations();\n\t\t};\n\t\n\t\treturn BaseObject;\n\t}]);\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('VirtualBookshelf').factory('subclassOf', function () {\n\t\tfunction _subclassOf() {}\n\t\n\t\tfunction subclassOf(base) {\n\t\t\t_subclassOf.prototype = base.prototype;\n\t\t\treturn new _subclassOf();\n\t\t}\n\t\n\t\treturn subclassOf;\n\t});\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(8);\n\t\n\t__webpack_require__(9);\n\t\n\t__webpack_require__(11);\n\t\n\t__webpack_require__(12);\n\t\n\t__webpack_require__(3);\n\t\n\t__webpack_require__(13);\n\t\n\t__webpack_require__(14);\n\t\n\t__webpack_require__(18);\n\t\n\t__webpack_require__(19);\n\t\n\t__webpack_require__(21);\n\t\n\t__webpack_require__(24);\n\t\n\t__webpack_require__(25);\n\t\n\tangular.module('VirtualBookshelf')\n\t/* \r\n\t * controls.js is a service for processing not UI(menus) events \r\n\t * like mouse, keyboard, touch or gestures.\r\n\t *\r\n\t * TODO: remove all busines logic from there and leave only\r\n\t * events functionality to make it more similar to usual controller\r\n\t */\n\t.factory('controls', [\"$q\", \"$log\", \"$rootScope\", \"SelectorMeta\", \"BookObject\", \"ShelfObject\", \"SectionObject\", \"camera\", \"navigation\", \"environment\", \"mouse\", \"selector\", \"preview\", \"block\", \"tools\", function ($q, $log, $rootScope, SelectorMeta, BookObject, ShelfObject, SectionObject, camera, navigation, environment, mouse, selector, preview, block, tools) {\n\t\tvar controls = {};\n\t\n\t\tcontrols.init = function () {\n\t\t\tcontrols.initListeners();\n\t\t};\n\t\n\t\tcontrols.initListeners = function () {\n\t\t\tdocument.addEventListener('mousedown', controls.onMouseDown, false);\n\t\t\tdocument.addEventListener('mouseup', controls.onMouseUp, false);\n\t\t\tdocument.addEventListener('mousemove', controls.onMouseMove, false);\n\t\t\tdocument.oncontextmenu = function () {\n\t\t\t\treturn false;\n\t\t\t};\n\t\t};\n\t\n\t\tcontrols.update = function () {\n\t\t\tif (!preview.isActive()) {\n\t\t\t\tif (mouse[3]) {\n\t\t\t\t\tcamera.rotate(mouse.longX, mouse.longY);\n\t\t\t\t}\n\t\t\t\tif (mouse[1] && mouse[3]) {\n\t\t\t\t\tcamera.go(navigation.BUTTONS_GO_SPEED);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\n\t\tcontrols.onMouseDown = function (event) {\n\t\t\tmouse.down(event);\n\t\n\t\t\tif (mouse.isCanvas() && mouse[1] && !mouse[3] && !preview.isActive()) {\n\t\t\t\tcontrols.selectObject();\n\t\n\t\t\t\tif (selector.placing) {\n\t\t\t\t\ttools.place();\n\t\t\t\t} else {\n\t\t\t\t\tselector.selectFocused();\n\t\t\t\t}\n\t\n\t\t\t\t$rootScope.$apply();\n\t\t\t}\n\t\t};\n\t\n\t\tcontrols.onMouseUp = function (event) {\n\t\t\tmouse.up(event);\n\t\n\t\t\tif (event.which === 1 && !preview.isActive()) {\n\t\t\t\tif (selector.isSelectedEditable()) {\n\t\t\t\t\tvar obj = selector.getSelectedObject();\n\t\n\t\t\t\t\tif (obj && obj.changed) {\n\t\t\t\t\t\tblock.global.start();\n\t\t\t\t\t\tobj.save().catch(function () {\n\t\t\t\t\t\t\tobj.rollback();\n\t\t\t\t\t\t}).finally(function () {\n\t\t\t\t\t\t\tblock.global.stop();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\n\t\tcontrols.onMouseMove = function (event) {\n\t\t\tmouse.move(event);\n\t\n\t\t\tif (mouse.isCanvas() && !preview.isActive()) {\n\t\t\t\tevent.preventDefault();\n\t\n\t\t\t\tif (mouse[1] && !mouse[3]) {\n\t\t\t\t\tcontrols.moveObject();\n\t\t\t\t} else {\n\t\t\t\t\tcontrols.selectObject();\n\t\t\t\t\t$rootScope.$apply();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\n\t\t//****\n\t\n\t\tcontrols.selectObject = function () {\n\t\t\tvar intersected, object;\n\t\n\t\t\tif (mouse.isCanvas() && environment.library) {\n\t\t\t\t//TODO: optimize\n\t\t\t\tintersected = mouse.getIntersected(environment.library.children, true, [BookObject]);\n\t\t\t\tif (!intersected) {\n\t\t\t\t\tintersected = mouse.getIntersected(environment.library.children, true, [ShelfObject]);\n\t\t\t\t}\n\t\t\t\tif (!intersected) {\n\t\t\t\t\tintersected = mouse.getIntersected(environment.library.children, true, [SectionObject]);\n\t\t\t\t}\n\t\t\t\tif (intersected) {\n\t\t\t\t\tobject = intersected.object;\n\t\t\t\t}\n\t\n\t\t\t\tselector.focus(new SelectorMeta(object));\n\t\t\t}\n\t\t};\n\t\n\t\tcontrols.moveObject = function () {\n\t\t\tvar mouseVector;\n\t\t\tvar newPosition;\n\t\t\tvar parent;\n\t\t\tvar selectedObject;\n\t\n\t\t\tif (selector.isSelectedEditable()) {\n\t\t\t\tselectedObject = selector.getSelectedObject();\n\t\n\t\t\t\tif (selectedObject) {\n\t\t\t\t\tmouseVector = camera.getVector();\n\t\t\t\t\tnewPosition = selectedObject.position.clone();\n\t\t\t\t\tparent = selectedObject.parent;\n\t\t\t\t\tparent.localToWorld(newPosition);\n\t\n\t\t\t\t\tnewPosition.x -= (mouseVector.z * mouse.dX + mouseVector.x * mouse.dY) * 0.003;\n\t\t\t\t\tnewPosition.z -= (-mouseVector.x * mouse.dX + mouseVector.z * mouse.dY) * 0.003;\n\t\n\t\t\t\t\tparent.worldToLocal(newPosition);\n\t\t\t\t\tselectedObject.move(newPosition);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\n\t\treturn controls;\n\t}]);\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('VirtualBookshelf').factory('SelectorMeta', function () {\n\t\tvar SelectorMeta = function SelectorMeta(selectedObject) {\n\t\t\tif (selectedObject) {\n\t\t\t\tthis.id = selectedObject.getId();\n\t\t\t\tthis.parentId = selectedObject.parent.getId();\n\t\t\t\tthis.type = selectedObject.getType();\n\t\t\t}\n\t\t};\n\t\n\t\tSelectorMeta.prototype.isEmpty = function () {\n\t\t\treturn !this.id;\n\t\t};\n\t\n\t\tSelectorMeta.prototype.equals = function (meta) {\n\t\t\treturn !(!meta || meta.id !== this.id || meta.parentId !== this.parentId || meta.type !== this.type);\n\t\t};\n\t\n\t\treturn SelectorMeta;\n\t});\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(5);\n\t\n\t__webpack_require__(6);\n\t\n\t__webpack_require__(10);\n\t\n\tangular.module('VirtualBookshelf').factory('BookObject', [\"$log\", \"BaseObject\", \"data\", \"subclassOf\", function ($log, BaseObject, data, subclassOf) {\n\t\tvar BookObject = function BookObject(dataObject, geometry, material) {\n\t\t\tBaseObject.call(this, dataObject, geometry, material);\n\t\t};\n\t\n\t\tBookObject.TYPE = 'BookObject';\n\t\n\t\tBookObject.prototype = subclassOf(BaseObject);\n\t\tBookObject.prototype.vbType = BookObject.TYPE;\n\t\n\t\tBookObject.prototype.save = function () {\n\t\t\tvar scope = this;\n\t\t\tvar dto = {\n\t\t\t\tid: this.getId(),\n\t\t\t\tuserId: this.dataObject.userId,\n\t\t\t\tpos_x: this.position.x,\n\t\t\t\tpos_y: this.position.y,\n\t\t\t\tpos_z: this.position.z\n\t\t\t};\n\t\n\t\t\treturn data.postBook(dto).then(function (responseDto) {\n\t\t\t\tscope.dataObject = responseDto;\n\t\t\t\tscope.changed = false;\n\t\t\t});\n\t\t};\n\t\n\t\tBookObject.prototype.setParent = function (parent) {\n\t\t\tif (this.parent != parent) {\n\t\t\t\tif (parent) {\n\t\t\t\t\tparent.add(this);\n\t\t\t\t\tthis.dataObject.shelfId = parent.getId();\n\t\t\t\t\tthis.dataObject.sectionId = parent.parent.getId();\n\t\t\t\t} else {\n\t\t\t\t\tthis.parent.remove(this);\n\t\t\t\t\tthis.dataObject.shelfId = null;\n\t\t\t\t\tthis.dataObject.sectionId = null;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\n\t\treturn BookObject;\n\t}]);\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('VirtualBookshelf').factory('data', [\"$http\", \"$q\", \"$log\", function ($http, $q, $log) {\n\t\tvar data = {};\n\t\n\t\tdata.TEXTURE_RESOLUTION = 512;\n\t\tdata.COVER_MAX_Y = 394;\n\t\tdata.COVER_FACE_X = 296;\n\t\n\t\tdata.loadImage = function (url) {\n\t\t\tvar deffered = $q.defer();\n\t\t\tvar img = new Image();\n\t\n\t\t\timg.crossOrigin = '';\n\t\t\timg.src = url;\n\t\n\t\t\tif (img.complete) {\n\t\t\t\tdeffered.resolve(img);\n\t\t\t}\n\t\n\t\t\timg.onload = function () {\n\t\t\t\tdeffered.resolve(img);\n\t\t\t};\n\t\t\timg.onerror = function (error) {\n\t\t\t\tdeffered.reject(error);\n\t\t\t};\n\t\n\t\t\treturn deffered.promise;\n\t\t};\n\t\n\t\tdata.getCover = function (id) {\n\t\t\treturn $http.get('/cover/' + id).then(function (res) {\n\t\t\t\treturn res.data;\n\t\t\t});\n\t\t};\n\t\n\t\tdata.postCover = function (externalURL, tags) {\n\t\t\tvar data = {\n\t\t\t\turl: externalURL,\n\t\t\t\ttags: tags\n\t\t\t};\n\t\n\t\t\treturn $http.post('/cover', data).then(function (res) {\n\t\t\t\treturn res.data;\n\t\t\t});\n\t\t};\n\t\n\t\tdata.logout = function () {\n\t\t\treturn $http.post('/auth/logout');\n\t\t};\n\t\n\t\tdata.getUser = function () {\n\t\t\treturn $http.get('/user').then(function (res) {\n\t\t\t\treturn res.data;\n\t\t\t}).catch(function () {\n\t\t\t\treturn null;\n\t\t\t});\n\t\t};\n\t\n\t\tdata.putUser = function (dto) {\n\t\t\treturn $http.put('/user', dto);\n\t\t};\n\t\n\t\tdata.deleteUser = function (id) {\n\t\t\treturn $http.delete('/user/' + id);\n\t\t};\n\t\n\t\tdata.getUserBooks = function (userId) {\n\t\t\treturn $http.get('/freeBooks/' + userId).then(function (res) {\n\t\t\t\treturn res.data;\n\t\t\t});\n\t\t};\n\t\n\t\tdata.postBook = function (book) {\n\t\t\treturn $http.post('/book', book).then(function (res) {\n\t\t\t\treturn res.data;\n\t\t\t});\n\t\t};\n\t\n\t\tdata.deleteBook = function (id) {\n\t\t\treturn $http({\n\t\t\t\tmethod: 'DELETE',\n\t\t\t\turl: '/book/' + id\n\t\t\t});\n\t\t};\n\t\n\t\tdata.getUIData = function () {\n\t\t\treturn $http.get('/obj/data.json');\n\t\t};\n\t\n\t\tdata.getLibraries = function () {\n\t\t\treturn $http.get('/libraries').then(function (res) {\n\t\t\t\treturn res.data;\n\t\t\t});\n\t\t};\n\t\n\t\tdata.getLibrary = function (libraryId) {\n\t\t\treturn $http.get('/library/' + libraryId).then(function (res) {\n\t\t\t\treturn res.data;\n\t\t\t});\n\t\t};\n\t\n\t\tdata.postLibrary = function (libraryModel) {\n\t\t\treturn $http.post('/library/' + libraryModel).then(function (res) {\n\t\t\t\treturn res.data;\n\t\t\t});\n\t\t};\n\t\n\t\tdata.getSections = function (libraryId) {\n\t\t\treturn $http.get('/sections/' + libraryId).then(function (res) {\n\t\t\t\treturn res.data;\n\t\t\t});\n\t\t};\n\t\n\t\tdata.postSection = function (sectionData) {\n\t\t\treturn $http.post('/section', sectionData).then(function (res) {\n\t\t\t\treturn res.data;\n\t\t\t});\n\t\t};\n\t\n\t\tdata.deleteSection = function (id) {\n\t\t\treturn $http({\n\t\t\t\tmethod: 'DELETE',\n\t\t\t\turl: '/sections/' + id\n\t\t\t});\n\t\t};\n\t\n\t\tdata.loadGeometry = function (link) {\n\t\t\tvar deffered = $q.defer();\n\t\t\tvar jsonLoader = new THREE.JSONLoader();\n\t\n\t\t\t//TODO: found no way to reject\n\t\t\tjsonLoader.load(link, function (geometry) {\n\t\t\t\tgeometry.computeBoundingBox();\n\t\t\t\tdeffered.resolve(geometry);\n\t\t\t});\n\t\n\t\t\treturn deffered.promise;\n\t\t};\n\t\n\t\tdata.getData = function (url) {\n\t\t\treturn $http.get(url).then(function (res) {\n\t\t\t\treturn res.data;\n\t\t\t});\n\t\t};\n\t\n\t\tdata.postFeedback = function (dto) {\n\t\t\treturn $http.post('/feedback', dto);\n\t\t};\n\t\n\t\tdata.common = data.getUIData().then(function (res) {\n\t\t\treturn res.data;\n\t\t}).catch(function () {\n\t\t\t$log.error('data: loading common error');\n\t\t});\n\t\n\t\treturn data;\n\t}]);\n\n/***/ },\n/* 11 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('VirtualBookshelf').factory('ShelfObject', [\"BaseObject\", \"subclassOf\", function (BaseObject, subclassOf) {\n\t\tvar ShelfObject = function ShelfObject(params) {\n\t\t\tvar size = params.size;\n\t\t\tvar geometry = new THREE.BoxGeometry(size[0], size[1], size[2]);\n\t\n\t\t\tgeometry.computeBoundingBox();\n\t\t\tBaseObject.call(this, params, geometry);\n\t\n\t\t\tthis.position.set(params.position[0], params.position[1], params.position[2]);\n\t\t\tthis.size = new THREE.Vector3(size[0], size[1], size[2]);\n\t\n\t\t\tthis.material.transparent = true;\n\t\t\tthis.material.opacity = 0;\n\t\t};\n\t\n\t\tShelfObject.TYPE = 'ShelfObject';\n\t\n\t\tShelfObject.prototype = subclassOf(BaseObject);\n\t\tShelfObject.prototype.vbType = ShelfObject.TYPE;\n\t\n\t\treturn ShelfObject;\n\t}]);\n\n/***/ },\n/* 12 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('VirtualBookshelf').factory('SectionObject', [\"BaseObject\", \"ShelfObject\", \"data\", \"subclassOf\", function (BaseObject, ShelfObject, data, subclassOf) {\n\t\tvar SectionObject = function SectionObject(params, geometry, material) {\n\t\t\tBaseObject.call(this, params, geometry, material);\n\t\n\t\t\tthis.shelves = {};\n\t\t\tfor (var key in params.data.shelves) {\n\t\t\t\tthis.shelves[key] = new ShelfObject(params.data.shelves[key]);\n\t\t\t\tthis.add(this.shelves[key]);\n\t\t\t}\n\t\t};\n\t\n\t\tSectionObject.TYPE = 'SectionObject';\n\t\n\t\tSectionObject.prototype = subclassOf(BaseObject);\n\t\tSectionObject.prototype.vbType = SectionObject.TYPE;\n\t\n\t\tSectionObject.prototype.save = function () {\n\t\t\tvar scope = this;\n\t\t\tvar dto = {\n\t\t\t\tid: this.getId(),\n\t\t\t\tuserId: this.dataObject.userId,\n\t\t\t\tpos_x: this.position.x,\n\t\t\t\tpos_y: this.position.y,\n\t\t\t\tpos_z: this.position.z,\n\t\t\t\trotation: [this.rotation.x, this.rotation.y, this.rotation.z]\n\t\t\t};\n\t\n\t\t\treturn data.postSection(dto).then(function (responseDto) {\n\t\t\t\tscope.dataObject = responseDto;\n\t\t\t\tscope.changed = false;\n\t\t\t});\n\t\t};\n\t\n\t\tSectionObject.prototype.setParent = function (parent) {\n\t\t\tif (this.parent != parent) {\n\t\t\t\tif (parent) {\n\t\t\t\t\tparent.add(this);\n\t\t\t\t\tthis.dataObject.libraryId = parent.getId();\n\t\t\t\t} else {\n\t\t\t\t\tthis.parent.remove(this);\n\t\t\t\t\tthis.dataObject.libraryId = null;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\n\t\treturn SectionObject;\n\t}]);\n\n/***/ },\n/* 13 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('VirtualBookshelf').factory('navigation', [\"camera\", function (camera) {\n\t\tvar navigation = {};\n\t\n\t\tnavigation.BUTTONS_ROTATE_SPEED = 100;\n\t\tnavigation.BUTTONS_GO_SPEED = 0.02;\n\t\n\t\tvar state = {\n\t\t\tforward: false,\n\t\t\tbackward: false,\n\t\t\tleft: false,\n\t\t\tright: false\n\t\t};\n\t\n\t\tnavigation.goStop = function () {\n\t\t\tstate.forward = false;\n\t\t\tstate.backward = false;\n\t\t\tstate.left = false;\n\t\t\tstate.right = false;\n\t\t};\n\t\n\t\tnavigation.goForward = function () {\n\t\t\tstate.forward = true;\n\t\t};\n\t\n\t\tnavigation.goBackward = function () {\n\t\t\tstate.backward = true;\n\t\t};\n\t\n\t\tnavigation.goLeft = function () {\n\t\t\tstate.left = true;\n\t\t};\n\t\n\t\tnavigation.goRight = function () {\n\t\t\tstate.right = true;\n\t\t};\n\t\n\t\tnavigation.update = function () {\n\t\t\tif (state.forward) {\n\t\t\t\tcamera.go(navigation.BUTTONS_GO_SPEED);\n\t\t\t} else if (state.backward) {\n\t\t\t\tcamera.go(-navigation.BUTTONS_GO_SPEED);\n\t\t\t} else if (state.left) {\n\t\t\t\tcamera.rotate(navigation.BUTTONS_ROTATE_SPEED, 0);\n\t\t\t} else if (state.right) {\n\t\t\t\tcamera.rotate(-navigation.BUTTONS_ROTATE_SPEED, 0);\n\t\t\t}\n\t\t};\n\t\n\t\treturn navigation;\n\t}]);\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(15);\n\t\n\t__webpack_require__(12);\n\t\n\t__webpack_require__(9);\n\t\n\t__webpack_require__(16);\n\t\n\t__webpack_require__(10);\n\t\n\t__webpack_require__(3);\n\t\n\t__webpack_require__(17);\n\t\n\tangular.module('VirtualBookshelf').factory('environment', [\"$q\", \"$log\", \"$window\", \"LibraryObject\", \"SectionObject\", \"BookObject\", \"BookMaterial\", \"data\", \"camera\", \"cache\", function ($q, $log, $window, LibraryObject, SectionObject, BookObject, BookMaterial, data, camera, cache) {\n\t\tvar environment = {};\n\t\n\t\tenvironment.CLEARANCE = 0.001;\n\t\tenvironment.LIBRARY_CANVAS_ID = 'LIBRARY';\n\t\n\t\tvar libraryDto = null;\n\t\tvar sections = {};\n\t\tvar books = {};\n\t\tvar loaded = false;\n\t\n\t\tenvironment.scene = null;\n\t\tenvironment.library = null;\n\t\n\t\tenvironment.loadLibrary = function (libraryId) {\n\t\t\tclearScene(); // inits some fields\n\t\n\t\t\tvar promise = data.getLibrary(libraryId).then(function (dto) {\n\t\t\t\tvar dict = parseLibraryDto(dto);\n\t\n\t\t\t\tsections = dict.sections;\n\t\t\t\tbooks = dict.books;\n\t\t\t\tlibraryDto = dto;\n\t\n\t\t\t\treturn initCache(libraryDto, dict.sections, dict.books);\n\t\t\t}).then(function () {\n\t\t\t\tcreateLibrary(libraryDto);\n\t\t\t\treturn createSections(sections);\n\t\t\t}).then(function () {\n\t\t\t\treturn createBooks(books);\n\t\t\t});\n\t\n\t\t\treturn promise;\n\t\t};\n\t\n\t\tenvironment.goToLibrary = function (id) {\n\t\t\tif (id) $window.location = '/' + id;\n\t\t};\n\t\n\t\tenvironment.setLoaded = function (value) {\n\t\t\tloaded = value;\n\t\t};\n\t\n\t\tenvironment.getLoaded = function () {\n\t\t\treturn loaded;\n\t\t};\n\t\n\t\tenvironment.getBook = function (bookId) {\n\t\t\treturn getDictObject(books, bookId);\n\t\t};\n\t\n\t\tenvironment.getSection = function (sectionId) {\n\t\t\treturn getDictObject(sections, sectionId);\n\t\t};\n\t\n\t\tenvironment.getShelf = function (sectionId, shelfId) {\n\t\t\tvar section = environment.getSection(sectionId);\n\t\t\tvar shelf = section && section.shelves[shelfId];\n\t\n\t\t\treturn shelf;\n\t\t};\n\t\n\t\tvar getDictObject = function getDictObject(dict, objectId) {\n\t\t\tvar dictItem = dict[objectId];\n\t\t\tvar dictObject = dictItem && dictItem.obj;\n\t\n\t\t\treturn dictObject;\n\t\t};\n\t\n\t\tenvironment.updateSection = function (dto) {\n\t\t\tvar promise;\n\t\n\t\t\tif (dto.libraryId == environment.library.getId()) {\n\t\t\t\tenvironment.removeSection(dto.id);\n\t\t\t\tpromise = createSection(dto);\n\t\t\t} else {\n\t\t\t\tenvironment.removeSection(dto.id);\n\t\t\t\tpromise = $q.when(dto);\n\t\t\t}\n\t\n\t\t\treturn promise;\n\t\t};\n\t\n\t\tenvironment.updateBook = function (dto) {\n\t\t\tvar promise;\n\t\t\tvar shelf = getBookShelf(dto);\n\t\n\t\t\tif (shelf) {\n\t\t\t\tenvironment.removeBook(dto.id);\n\t\t\t\tpromise = createBook(dto);\n\t\t\t} else {\n\t\t\t\tenvironment.removeBook(dto.id);\n\t\t\t\tpromise = $q.when(true);\n\t\t\t}\n\t\n\t\t\treturn promise;\n\t\t};\n\t\n\t\tenvironment.removeBook = function (id) {\n\t\t\tremoveObject(books, id);\n\t\t};\n\t\n\t\tenvironment.removeSection = function (id) {\n\t\t\tremoveObject(sections, id);\n\t\t};\n\t\n\t\tvar removeObject = function removeObject(dict, key) {\n\t\t\tvar dictItem = dict[key];\n\t\t\tif (dictItem) {\n\t\t\t\tdelete dict[key];\n\t\n\t\t\t\tif (dictItem.obj) {\n\t\t\t\t\tdictItem.obj.setParent(null);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\n\t\tvar initCache = function initCache(libraryDto, sectionsDict, booksDict) {\n\t\t\tvar libraryModel = libraryDto.model;\n\t\t\tvar sectionModels = {};\n\t\t\tvar bookModels = {};\n\t\t\tvar imageUrls = {};\n\t\n\t\t\tfor (var sectionId in sectionsDict) {\n\t\t\t\tvar sectionDto = sectionsDict[sectionId].dto;\n\t\t\t\tsectionModels[sectionDto.model] = true;\n\t\t\t}\n\t\n\t\t\tfor (var bookId in booksDict) {\n\t\t\t\tvar bookDto = booksDict[bookId].dto;\n\t\t\t\tbookModels[bookDto.model] = true;\n\t\n\t\t\t\tif (bookDto.cover) {\n\t\t\t\t\timageUrls[bookDto.cover.id] = bookDto.cover;\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\treturn cache.init(libraryModel, sectionModels, bookModels, imageUrls);\n\t\t};\n\t\n\t\tvar clearScene = function clearScene() {\n\t\t\tenvironment.library = null;\n\t\t\tsections = {};\n\t\t\tbooks = {};\n\t\n\t\t\twhile (environment.scene.children.length > 0) {\n\t\t\t\tif (environment.scene.children[0].dispose) {\n\t\t\t\t\tenvironment.scene.children[0].dispose();\n\t\t\t\t}\n\t\t\t\tenvironment.scene.remove(environment.scene.children[0]);\n\t\t\t}\n\t\t};\n\t\n\t\tvar parseLibraryDto = function parseLibraryDto(libraryDto) {\n\t\t\tvar result = {\n\t\t\t\tsections: {},\n\t\t\t\tbooks: {}\n\t\t\t};\n\t\n\t\t\tfor (var sectionIndex = libraryDto.sections.length - 1; sectionIndex >= 0; sectionIndex--) {\n\t\t\t\tvar sectionDto = libraryDto.sections[sectionIndex];\n\t\t\t\tresult.sections[sectionDto.id] = { dto: sectionDto };\n\t\n\t\t\t\tfor (var bookIndex = sectionDto.books.length - 1; bookIndex >= 0; bookIndex--) {\n\t\t\t\t\tvar bookDto = sectionDto.books[bookIndex];\n\t\t\t\t\tresult.books[bookDto.id] = { dto: bookDto };\n\t\t\t\t}\n\t\n\t\t\t\tdelete sectionDto.books;\n\t\t\t}\n\t\n\t\t\tdelete libraryDto.sections;\n\t\n\t\t\treturn result;\n\t\t};\n\t\n\t\tvar createLibrary = function createLibrary(libraryDto) {\n\t\t\tvar library = null;\n\t\t\tvar libraryCache = cache.getLibrary();\n\t\t\tvar texture = new THREE.Texture(libraryCache.mapImage);\n\t\t\tvar material = new THREE.MeshPhongMaterial({ map: texture });\n\t\n\t\t\ttexture.needsUpdate = true;\n\t\t\tlibrary = new LibraryObject(libraryDto, libraryCache.geometry, material);\n\t\n\t\t\tlibrary.add(new THREE.AmbientLight(0x333333));\n\t\t\tcamera.setParent(library);\n\t\n\t\t\tenvironment.scene.add(library);\n\t\t\tenvironment.library = library;\n\t\t};\n\t\n\t\tvar createSections = function createSections(sectionsDict) {\n\t\t\treturn createObjects(sectionsDict, createSection);\n\t\t};\n\t\n\t\tvar createBooks = function createBooks(booksDict) {\n\t\t\treturn createObjects(booksDict, createBook);\n\t\t};\n\t\n\t\tvar createObjects = function createObjects(dict, factory) {\n\t\t\tvar results = [];\n\t\t\tvar key;\n\t\n\t\t\tfor (key in dict) {\n\t\t\t\tresults.push(factory(dict[key].dto));\n\t\t\t}\n\t\n\t\t\treturn $q.all(results);\n\t\t};\n\t\n\t\tvar createSection = function createSection(sectionDto) {\n\t\t\tvar promise = cache.getSection(sectionDto.model).then(function (sectionCache) {\n\t\t\t\tvar texture = new THREE.Texture(sectionCache.mapImage);\n\t\t\t\tvar material = new THREE.MeshPhongMaterial({ map: texture });\n\t\t\t\tvar section;\n\t\n\t\t\t\ttexture.needsUpdate = true;\n\t\t\t\tsectionDto.data = sectionCache.data;\n\t\n\t\t\t\tsection = new SectionObject(sectionDto, sectionCache.geometry, material);\n\t\n\t\t\t\tenvironment.library.add(section);\n\t\t\t\taddToDict(sections, section);\n\t\n\t\t\t\treturn sectionDto;\n\t\t\t});\n\t\n\t\t\treturn promise;\n\t\t};\n\t\n\t\tvar createBook = function createBook(bookDto) {\n\t\t\tvar promises = {};\n\t\t\tvar promise;\n\t\n\t\t\tpromises.bookCache = cache.getBook(bookDto.model);\n\t\t\tif (bookDto.coverId) {\n\t\t\t\tpromises.coverCache = cache.getImage(bookDto.coverId);\n\t\t\t}\n\t\n\t\t\tpromise = $q.all(promises).then(function (results) {\n\t\t\t\tvar bookCache = results.bookCache;\n\t\t\t\tvar coverMapImage = results.coverCache && results.coverCache.image;\n\t\t\t\tvar material = new BookMaterial(bookCache.mapImage, bookCache.bumpMapImage, bookCache.specularMapImage, coverMapImage);\n\t\t\t\tvar book = new BookObject(bookDto, bookCache.geometry, material);\n\t\n\t\t\t\taddToDict(books, book);\n\t\t\t\tplaceBookOnShelf(book);\n\t\t\t});\n\t\n\t\t\treturn promise;\n\t\t};\n\t\n\t\tvar addToDict = function addToDict(dict, obj) {\n\t\t\tvar dictItem = {\n\t\t\t\tdto: obj.dataObject,\n\t\t\t\tobj: obj\n\t\t\t};\n\t\n\t\t\tdict[obj.getId()] = dictItem;\n\t\t};\n\t\n\t\tvar getBookShelf = function getBookShelf(bookDto) {\n\t\t\treturn environment.getShelf(bookDto.sectionId, bookDto.shelfId);\n\t\t};\n\t\n\t\tvar placeBookOnShelf = function placeBookOnShelf(book) {\n\t\t\tvar shelf = getBookShelf(book.dataObject);\n\t\t\tshelf.add(book);\n\t\t};\n\t\n\t\treturn environment;\n\t}]);\n\n/***/ },\n/* 15 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('VirtualBookshelf').factory('LibraryObject', [\"BaseObject\", \"subclassOf\", function (BaseObject, subclassOf) {\n\t\tvar LibraryObject = function LibraryObject(params, geometry, material) {\n\t\t\tBaseObject.call(this, params, geometry, material);\n\t\t};\n\t\n\t\tLibraryObject.prototype = subclassOf(BaseObject);\n\t\n\t\treturn LibraryObject;\n\t}]);\n\n/***/ },\n/* 16 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('VirtualBookshelf').factory('BookMaterial', function () {\n\t\tvar BookMaterial = function BookMaterial(mapImage, bumpMapImage, specularMapImage, coverMapImage) {\n\t\t\tvar VERTEX_SHADER_ID = 'BookMaterialVertexShader';\n\t\t\tvar FRAGMENT_SHADER_ID = 'BookMaterialFragmentShader';\n\t\n\t\t\tvar vertexShader = document.getElementById(VERTEX_SHADER_ID).textContent;\n\t\t\tvar fragmentShader = document.getElementById(FRAGMENT_SHADER_ID).textContent;\n\t\n\t\t\tvar defines = {};\n\t\t\tvar uniforms;\n\t\t\tvar parameters;\n\t\n\t\t\tvar map;\n\t\t\tvar bumpMap;\n\t\t\tvar specularMap;\n\t\t\tvar coverMap;\n\t\n\t\t\tuniforms = THREE.UniformsUtils.merge([THREE.UniformsLib.common, THREE.UniformsLib.bump, THREE.UniformsLib.fog, THREE.UniformsLib.lights]);\n\t\n\t\t\tuniforms.shininess = { type: 'f', value: 30 };\n\t\t\tdefines.PHONG = true;\n\t\n\t\t\tif (mapImage) {\n\t\t\t\tmap = new THREE.Texture(mapImage);\n\t\t\t\tmap.needsUpdate = true;\n\t\t\t\tuniforms.map = { type: 't', value: map };\n\t\t\t\tthis.map = true;\n\t\t\t}\n\t\t\tif (bumpMapImage) {\n\t\t\t\tbumpMap = new THREE.Texture(bumpMapImage);\n\t\t\t\tbumpMap.needsUpdate = true;\n\t\t\t\tuniforms.bumpMap = { type: 't', value: bumpMap };\n\t\t\t\tuniforms.bumpScale.value = 0.005;\n\t\t\t\tthis.bumpMap = true;\n\t\t\t}\n\t\t\tif (specularMapImage) {\n\t\t\t\tspecularMap = new THREE.Texture(specularMapImage);\n\t\t\t\tspecularMap.needsUpdate = true;\n\t\t\t\tuniforms.specular = { type: 'c', value: new THREE.Color(0x555555) };\n\t\t\t\tuniforms.specularMap = { type: 't', value: specularMap };\n\t\t\t\tthis.specularMap = true;\n\t\t\t}\n\t\t\tif (coverMapImage) {\n\t\t\t\tcoverMap = new THREE.Texture(coverMapImage);\n\t\t\t\tcoverMap.needsUpdate = true;\n\t\t\t\tuniforms.coverMap = { type: 't', value: coverMap };\n\t\t\t\tdefines.USE_COVER = true;\n\t\t\t}\n\t\n\t\t\tparameters = {\n\t\t\t\tvertexShader: vertexShader,\n\t\t\t\tfragmentShader: fragmentShader,\n\t\t\t\tuniforms: uniforms,\n\t\t\t\tdefines: defines,\n\t\t\t\tlights: true,\n\t\t\t\tfog: true\n\t\t\t};\n\t\n\t\t\tTHREE.ShaderMaterial.call(this, parameters);\n\t\t};\n\t\n\t\tBookMaterial.prototype = Object.create(THREE.ShaderMaterial.prototype);\n\t\n\t\tBookMaterial.prototype.constructor = THREE.BookMaterial;\n\t\n\t\treturn BookMaterial;\n\t});\n\n/***/ },\n/* 17 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('VirtualBookshelf').factory('cache', [\"$q\", \"$log\", \"data\", function ($q, $log, data) {\n\t\tvar cache = {};\n\t\n\t\tvar library = null;\n\t\tvar sections = {};\n\t\tvar books = {};\n\t\tvar images = {};\n\t\n\t\tcache.init = function (libraryModel, sectionModels, bookModels, covers) {\n\t\t\tvar libraryLoad = loadLibraryData(libraryModel);\n\t\t\tvar sectionsLoad = [];\n\t\t\tvar booksLoad = [];\n\t\t\tvar imagesLoad = [];\n\t\t\tvar model, coverId; // iterators\n\t\n\t\t\tfor (model in sectionModels) {\n\t\t\t\tsectionsLoad.push(addSection(model));\n\t\t\t}\n\t\n\t\t\tfor (model in bookModels) {\n\t\t\t\tbooksLoad.push(addBook(model));\n\t\t\t}\n\t\n\t\t\tfor (coverId in covers) {\n\t\t\t\timagesLoad.push(addImageByDto(covers[coverId]));\n\t\t\t}\n\t\n\t\t\tvar promise = $q.all({\n\t\t\t\tlibraryCache: libraryLoad,\n\t\t\t\tsectionsLoad: $q.all(sectionsLoad),\n\t\t\t\tbooksLoad: $q.all(booksLoad),\n\t\t\t\timagesLoad: $q.all(imagesLoad)\n\t\t\t}).then(function (results) {\n\t\t\t\tlibrary = results.libraryCache;\n\t\t\t});\n\t\n\t\t\treturn promise;\n\t\t};\n\t\n\t\tcache.getLibrary = function () {\n\t\t\treturn library;\n\t\t};\n\t\n\t\tcache.getSection = function (model) {\n\t\t\treturn commonGetter(sections, model, addSection);\n\t\t};\n\t\n\t\tcache.getBook = function (model) {\n\t\t\treturn commonGetter(books, model, addBook);\n\t\t};\n\t\n\t\tcache.getImage = function (id) {\n\t\t\treturn commonGetter(images, id, addImageById);\n\t\t};\n\t\n\t\tvar addSection = function addSection(model) {\n\t\t\treturn commonAdder(sections, model, loadSectionData);\n\t\t};\n\t\n\t\tvar addBook = function addBook(model) {\n\t\t\treturn commonAdder(books, model, loadBookData);\n\t\t};\n\t\n\t\tvar addImageById = function addImageById(id) {\n\t\t\treturn data.getCover(id).then(function (coverDto) {\n\t\t\t\treturn data.loadImage(coverDto.url).then(function (image) {\n\t\t\t\t\treturn addImage(coverDto, image);\n\t\t\t\t});\n\t\t\t}).catch(function () {\n\t\t\t\t$log.error('Error adding image by id:', id);\n\t\t\t\treturn null;\n\t\t\t});\n\t\t};\n\t\n\t\tvar addImageByDto = function addImageByDto(coverDto) {\n\t\t\treturn data.loadImage(coverDto.url).then(function (image) {\n\t\t\t\treturn addImage(coverDto, image);\n\t\t\t}).catch(function () {\n\t\t\t\t$log.error('Error adding image by dto:', coverDto.id);\n\t\t\t\treturn null;\n\t\t\t});\n\t\t};\n\t\n\t\tvar addImage = function addImage(dto, image) {\n\t\t\tvar loadedCache = {\n\t\t\t\tdto: dto,\n\t\t\t\timage: image\n\t\t\t};\n\t\n\t\t\timages[dto.id] = loadedCache;\n\t\t\treturn loadedCache;\n\t\t};\n\t\n\t\tvar commonGetter = function commonGetter(from, key, addFunction) {\n\t\t\tvar result = from[key];\n\t\n\t\t\tif (!result) {\n\t\t\t\tresult = addFunction(key);\n\t\t\t}\n\t\n\t\t\treturn $q.when(result);\n\t\t};\n\t\n\t\tvar commonAdder = function commonAdder(where, what, loader) {\n\t\t\tvar promise = loader(what).then(function (loadedCache) {\n\t\t\t\twhere[what] = loadedCache;\n\t\n\t\t\t\treturn loadedCache;\n\t\t\t});\n\t\n\t\t\treturn promise;\n\t\t};\n\t\n\t\tvar loadLibraryData = function loadLibraryData(model) {\n\t\t\tvar path = '/obj/libraries/{model}/'.replace('{model}', model);\n\t\t\tvar modelUrl = path + 'model.json';\n\t\t\tvar mapUrl = path + 'map.jpg';\n\t\n\t\t\tvar promise = $q.all({\n\t\t\t\tgeometry: data.loadGeometry(modelUrl),\n\t\t\t\tmapImage: data.loadImage(mapUrl)\n\t\t\t});\n\t\n\t\t\treturn promise;\n\t\t};\n\t\n\t\tvar loadSectionData = function loadSectionData(model) {\n\t\t\tvar path = '/obj/sections/{model}/'.replace('{model}', model);\n\t\t\tvar modelUrl = path + 'model.js';\n\t\t\tvar mapUrl = path + 'map.jpg';\n\t\t\tvar dataUrl = path + 'data.json';\n\t\n\t\t\tvar promise = $q.all({\n\t\t\t\tgeometry: data.loadGeometry(modelUrl),\n\t\t\t\tmapImage: data.loadImage(mapUrl),\n\t\t\t\tdata: data.getData(dataUrl)\n\t\t\t});\n\t\n\t\t\treturn promise;\n\t\t};\n\t\n\t\tvar loadBookData = function loadBookData(model) {\n\t\t\tvar path = '/obj/books/{model}/'.replace('{model}', model);\n\t\t\tvar modelUrl = path + 'model.js';\n\t\t\tvar mapUrl = path + 'map.jpg';\n\t\t\tvar bumpMapUrl = path + 'bump_map.jpg';\n\t\t\tvar specularMapUrl = path + 'specular_map.jpg';\n\t\n\t\t\tvar promise = $q.all({\n\t\t\t\tgeometry: data.loadGeometry(modelUrl),\n\t\t\t\tmapImage: data.loadImage(mapUrl).catch(function () {\n\t\t\t\t\t$log.error('Cache: Error loading book map:', model);\n\t\t\t\t\treturn null;\n\t\t\t\t}),\n\t\t\t\tbumpMapImage: data.loadImage(bumpMapUrl).catch(function () {\n\t\t\t\t\t$log.error('Cache: Error loading book bumpMap:', model);\n\t\t\t\t\treturn null;\n\t\t\t\t}),\n\t\t\t\tspecularMapImage: data.loadImage(specularMapUrl).catch(function () {\n\t\t\t\t\t$log.error('Cache: Error loading book specularMap:', model);\n\t\t\t\t\treturn null;\n\t\t\t\t})\n\t\t\t});\n\t\n\t\t\treturn promise;\n\t\t};\n\t\n\t\treturn cache;\n\t}]);\n\n/***/ },\n/* 18 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('VirtualBookshelf').factory('mouse', [\"camera\", \"environment\", function (camera, environment) {\n\t\tvar mouse = {};\n\t\n\t\tvar getWidth = function getWidth() {\n\t\t\treturn window.innerWidth;\n\t\t};\n\t\n\t\tvar getHeight = function getHeight() {\n\t\t\treturn window.innerHeight;\n\t\t};\n\t\n\t\tvar x = null;\n\t\tvar y = null;\n\t\n\t\tmouse.target = null;\n\t\tmouse.dX = null;\n\t\tmouse.dY = null;\n\t\tmouse.longX = null;\n\t\tmouse.longY = null;\n\t\n\t\tmouse.getTarget = function () {\n\t\t\treturn this.target;\n\t\t};\n\t\n\t\tmouse.down = function (event) {\n\t\t\tif (event) {\n\t\t\t\tthis[event.which] = true;\n\t\t\t\tthis.target = event.target;\n\t\t\t\tx = event.clientX;\n\t\t\t\ty = event.clientY;\n\t\t\t\tmouse.longX = getWidth() * 0.5 - x;\n\t\t\t\tmouse.longY = getHeight() * 0.5 - y;\n\t\t\t}\n\t\t};\n\t\n\t\tmouse.up = function (event) {\n\t\t\tif (event) {\n\t\t\t\tthis[event.which] = false;\n\t\t\t\t// linux chrome bug fix (when both keys release then both event.which equal 3)\n\t\t\t\tthis[1] = false;\n\t\t\t}\n\t\t};\n\t\n\t\tmouse.move = function (event) {\n\t\t\tif (event) {\n\t\t\t\tthis.target = event.target;\n\t\t\t\tmouse.longX = getWidth() * 0.5 - x;\n\t\t\t\tmouse.longY = getHeight() * 0.5 - y;\n\t\t\t\tmouse.dX = event.clientX - x;\n\t\t\t\tmouse.dY = event.clientY - y;\n\t\t\t\tx = event.clientX;\n\t\t\t\ty = event.clientY;\n\t\t\t}\n\t\t};\n\t\n\t\tmouse.isCanvas = function () {\n\t\t\treturn this.target.id === environment.LIBRARY_CANVAS_ID;\n\t\t};\n\t\n\t\tmouse.getIntersected = function (objects, recursive, searchFor) {\n\t\t\tvar vector, raycaster, intersects, intersected, result, i, j;\n\t\n\t\t\tresult = null;\n\t\t\tvector = getVector();\n\t\t\traycaster = new THREE.Raycaster();\n\t\t\traycaster.set(camera.getPosition(), vector);\n\t\t\tintersects = raycaster.intersectObjects(objects, recursive);\n\t\n\t\t\tif (searchFor) {\n\t\t\t\tif (intersects.length) {\n\t\t\t\t\tfor (i = 0; i < intersects.length; i++) {\n\t\t\t\t\t\tintersected = intersects[i];\n\t\n\t\t\t\t\t\tfor (j = searchFor.length - 1; j >= 0; j--) {\n\t\t\t\t\t\t\tif (intersected.object instanceof searchFor[j]) {\n\t\t\t\t\t\t\t\tresult = intersected;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\tif (result) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tresult = intersects;\n\t\t\t}\n\t\n\t\t\treturn result;\n\t\t};\n\t\n\t\tvar getVector = function getVector() {\n\t\t\tvar vector = new THREE.Vector3(x / getWidth() * 2 - 1, -(y / getHeight()) * 2 + 1, 0.5);\n\t\t\tvector.unproject(camera.camera);\n\t\n\t\t\treturn vector.sub(camera.getPosition()).normalize();\n\t\t};\n\t\n\t\treturn mouse;\n\t}]);\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(8);\n\t\n\t__webpack_require__(9);\n\t\n\t__webpack_require__(11);\n\t\n\t__webpack_require__(12);\n\t\n\t__webpack_require__(14);\n\t\n\t__webpack_require__(20);\n\t\n\t__webpack_require__(21);\n\t\n\t__webpack_require__(22);\n\t\n\t__webpack_require__(23);\n\t\n\tangular.module('VirtualBookshelf').factory('selector', [\"SelectorMeta\", \"BookObject\", \"ShelfObject\", \"SectionObject\", \"environment\", \"highlight\", \"preview\", \"tooltip\", \"catalog\", function (SelectorMeta, BookObject, ShelfObject, SectionObject, environment, highlight, preview, tooltip, catalog) {\n\t\tvar selector = {};\n\t\n\t\tvar selected = new SelectorMeta();\n\t\tvar focused = new SelectorMeta();\n\t\n\t\tselector.placing = false;\n\t\n\t\tselector.focus = function (meta) {\n\t\t\tvar obj;\n\t\n\t\t\tif (!meta.equals(focused)) {\n\t\t\t\tfocused = meta;\n\t\n\t\t\t\tif (!focused.isEmpty()) {\n\t\t\t\t\tobj = selector.getFocusedObject();\n\t\t\t\t\thighlight.focus(obj);\n\t\t\t\t}\n\t\n\t\t\t\ttooltip.set(obj);\n\t\t\t}\n\t\t};\n\t\n\t\tselector.selectFocused = function () {\n\t\t\tselector.select(focused);\n\t\t};\n\t\n\t\tselector.select = function (meta) {\n\t\t\tvar obj = getObject(meta);\n\t\n\t\t\tselector.unselect();\n\t\t\tselected = meta;\n\t\n\t\t\thighlight.select(obj);\n\t\t\thighlight.focus(null);\n\t\n\t\t\tselector.placing = false;\n\t\t};\n\t\n\t\tselector.unselect = function () {\n\t\t\tif (!selected.isEmpty()) {\n\t\t\t\thighlight.select(null);\n\t\t\t\tselected = new SelectorMeta();\n\t\t\t}\n\t\n\t\t\tpreview.disable();\n\t\t};\n\t\n\t\tselector.getSelectedDto = function () {\n\t\t\treturn selector.isSelectedBook() ? catalog.getBook(selected.id) : selector.isSelectedSection() ? environment.getSection(selected.id) : null;\n\t\t};\n\t\n\t\tselector.getSelectedObject = function () {\n\t\t\treturn getObject(selected);\n\t\t};\n\t\n\t\tselector.getFocusedObject = function () {\n\t\t\treturn getObject(focused);\n\t\t};\n\t\n\t\tvar getObject = function getObject(meta) {\n\t\t\tvar object;\n\t\n\t\t\tif (!meta.isEmpty()) {\n\t\t\t\tobject = isShelf(meta) ? environment.getShelf(meta.parentId, meta.id) : isBook(meta) ? environment.getBook(meta.id) : isSection(meta) ? environment.getSection(meta.id) : null;\n\t\t\t}\n\t\n\t\t\treturn object;\n\t\t};\n\t\n\t\tselector.isSelectedEditable = function () {\n\t\t\treturn selector.isSelectedBook() || selector.isSelectedSection();\n\t\t};\n\t\n\t\tselector.isBookSelected = function (id) {\n\t\t\treturn isBook(selected) && selected.id === id;\n\t\t};\n\t\n\t\tselector.isSelectedShelf = function () {\n\t\t\treturn isShelf(selected);\n\t\t};\n\t\n\t\tselector.isSelectedBook = function () {\n\t\t\treturn isBook(selected);\n\t\t};\n\t\n\t\tselector.isSelectedSection = function () {\n\t\t\treturn isSection(selected);\n\t\t};\n\t\n\t\tvar isShelf = function isShelf(meta) {\n\t\t\treturn meta.type === ShelfObject.TYPE;\n\t\t};\n\t\n\t\tvar isBook = function isBook(meta) {\n\t\t\treturn meta.type === BookObject.TYPE;\n\t\t};\n\t\n\t\tvar isSection = function isSection(meta) {\n\t\t\treturn meta.type === SectionObject.TYPE;\n\t\t};\n\t\n\t\treturn selector;\n\t}]);\n\n/***/ },\n/* 20 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('VirtualBookshelf').factory('highlight', [\"environment\", function (environment) {\n\t\tvar highlight = {};\n\t\n\t\tvar PLANE_ROTATION = Math.PI * 0.5;\n\t\tvar PLANE_MULTIPLIER = 2;\n\t\tvar COLOR_SELECT = 0x005533;\n\t\tvar COLOR_FOCUS = 0x003355;\n\t\n\t\tvar select;\n\t\tvar focus;\n\t\n\t\tvar init = function init() {\n\t\t\tvar materialProperties = {\n\t\t\t\tmap: new THREE.ImageUtils.loadTexture('img/glow.png'),\n\t\t\t\ttransparent: true,\n\t\t\t\tside: THREE.DoubleSide,\n\t\t\t\tblending: THREE.AdditiveBlending,\n\t\t\t\tdepthTest: false\n\t\t\t};\n\t\n\t\t\tmaterialProperties.color = COLOR_SELECT;\n\t\t\tvar materialSelect = new THREE.MeshBasicMaterial(materialProperties);\n\t\n\t\t\tmaterialProperties.color = COLOR_FOCUS;\n\t\t\tvar materialFocus = new THREE.MeshBasicMaterial(materialProperties);\n\t\n\t\t\tvar geometry = new THREE.PlaneBufferGeometry(1, 1, 1);\n\t\n\t\t\tselect = new THREE.Mesh(geometry, materialSelect);\n\t\t\tselect.rotation.x = PLANE_ROTATION;\n\t\n\t\t\tfocus = new THREE.Mesh(geometry, materialFocus);\n\t\t\tfocus.rotation.x = PLANE_ROTATION;\n\t\t};\n\t\n\t\tvar commonHighlight = function commonHighlight(which, obj) {\n\t\t\tif (obj) {\n\t\t\t\tvar width = obj.geometry.boundingBox.max.x * PLANE_MULTIPLIER;\n\t\t\t\tvar height = obj.geometry.boundingBox.max.z * PLANE_MULTIPLIER;\n\t\t\t\tvar bottom = obj.geometry.boundingBox.min.y + environment.CLEARANCE;\n\t\n\t\t\t\twhich.position.y = bottom;\n\t\t\t\twhich.scale.set(width, height, 1);\n\t\t\t\tobj.add(which);\n\t\n\t\t\t\twhich.visible = true;\n\t\t\t} else {\n\t\t\t\twhich.visible = false;\n\t\t\t}\n\t\t};\n\t\n\t\thighlight.enable = function (enable) {\n\t\t\tfocus.visible = select.visible = enable;\n\t\t};\n\t\n\t\thighlight.focus = function (obj) {\n\t\t\tcommonHighlight(focus, obj);\n\t\t};\n\t\n\t\thighlight.select = function (obj) {\n\t\t\tcommonHighlight(select, obj);\n\t\t};\n\t\n\t\tinit();\n\t\n\t\treturn highlight;\n\t}]);\n\n/***/ },\n/* 21 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('VirtualBookshelf').factory('preview', [\"camera\", \"highlight\", function (camera, highlight) {\n\t\tvar preview = {};\n\t\n\t\tvar active = false;\n\t\tvar container;\n\t\n\t\tvar init = function init() {\n\t\t\tcontainer = new THREE.Object3D();\n\t\t\tcontainer.position.set(0, 0, -0.5);\n\t\t\tcontainer.rotation.y = -2;\n\t\t\tcamera.camera.add(container);\n\t\t};\n\t\n\t\tvar activate = function activate(value) {\n\t\t\tactive = value;\n\t\t\thighlight.enable(!active);\n\t\t};\n\t\n\t\tpreview.isActive = function () {\n\t\t\treturn active;\n\t\t};\n\t\n\t\tpreview.enable = function (obj) {\n\t\t\tvar objClone;\n\t\n\t\t\tif (obj) {\n\t\t\t\tactivate(true);\n\t\n\t\t\t\tobjClone = obj.clone();\n\t\t\t\tobjClone.position.set(0, 0, 0);\n\t\t\t\tcontainer.add(objClone);\n\t\t\t}\n\t\t};\n\t\n\t\tpreview.disable = function () {\n\t\t\tclearContainer();\n\t\t\tactivate(false);\n\t\t};\n\t\n\t\tvar clearContainer = function clearContainer() {\n\t\t\tcontainer.children.forEach(function (child) {\n\t\t\t\tcontainer.remove(child);\n\t\t\t});\n\t\t};\n\t\n\t\tpreview.rotate = function (dX) {\n\t\t\tcontainer.rotation.y += dX ? dX * 0.05 : 0;\n\t\t};\n\t\n\t\tinit();\n\t\n\t\treturn preview;\n\t}]);\n\n/***/ },\n/* 22 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('VirtualBookshelf').factory('tooltip', function () {\n\t\tvar tooltip = {};\n\t\n\t\ttooltip.obj = {};\n\t\n\t\ttooltip.set = function (obj) {\n\t\t\tif (obj) {\n\t\t\t\tthis.obj.type = obj.getType();\n\t\t\t\tthis.obj.title = obj.dataObject.title;\n\t\t\t\tthis.obj.author = obj.dataObject.author;\n\t\t\t} else {\n\t\t\t\tthis.obj.type = null;\n\t\t\t}\n\t\t};\n\t\n\t\treturn tooltip;\n\t});\n\n/***/ },\n/* 23 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('VirtualBookshelf').factory('catalog', [\"$q\", \"data\", \"block\", function ($q, data, block) {\n\t\tvar catalog = {};\n\t\n\t\tcatalog.books = null;\n\t\n\t\tcatalog.loadBooks = function (userId) {\n\t\t\tvar promise;\n\t\n\t\t\tif (userId) {\n\t\t\t\tblock.inventory.start();\n\t\t\t\tpromise = $q.when(userId ? data.getUserBooks(userId) : null).then(function (result) {\n\t\t\t\t\tcatalog.books = result;\n\t\t\t\t}).finally(function () {\n\t\t\t\t\tblock.inventory.stop();\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\treturn promise;\n\t\t};\n\t\n\t\tcatalog.getBook = function (id) {\n\t\t\treturn _.find(catalog.books, { id: id });\n\t\t};\n\t\n\t\treturn catalog;\n\t}]);\n\n/***/ },\n/* 24 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('VirtualBookshelf').factory('block', [\"blockUI\", function (blockUI) {\n\t\tvar block = {};\n\t\n\t\tvar INVENTORY = 'inventory';\n\t\tvar MAIN_MENU = 'main_menu';\n\t\tvar GLOBAL = 'global';\n\t\n\t\tblock.inventory = blockUI.instances.get(INVENTORY);\n\t\n\t\tblock.mainMenu = blockUI.instances.get(MAIN_MENU);\n\t\n\t\tblock.global = blockUI.instances.get(GLOBAL);\n\t\n\t\treturn block;\n\t}]);\n\n/***/ },\n/* 25 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(9);\n\t\n\t__webpack_require__(12);\n\t\n\t__webpack_require__(11);\n\t\n\t__webpack_require__(26);\n\t\n\t__webpack_require__(10);\n\t\n\t__webpack_require__(19);\n\t\n\t__webpack_require__(27);\n\t\n\t__webpack_require__(24);\n\t\n\t__webpack_require__(23);\n\t\n\t__webpack_require__(14);\n\t\n\t__webpack_require__(21);\n\t\n\t__webpack_require__(28);\n\t\n\t__webpack_require__(29);\n\t\n\tangular.module('VirtualBookshelf').factory('tools', [\"$q\", \"$log\", \"BookObject\", \"SectionObject\", \"ShelfObject\", \"SelectorMetaDto\", \"data\", \"selector\", \"dialog\", \"block\", \"catalog\", \"environment\", \"preview\", \"user\", \"locator\", \"growl\", function ($q, $log, BookObject, SectionObject, ShelfObject, SelectorMetaDto, data, selector, dialog, block, catalog, environment, preview, user, locator, growl) {\n\t\tvar tools = {};\n\t\n\t\tvar ROTATION_SCALE = 1;\n\t\n\t\tvar states = {\n\t\t\trotateLeft: false,\n\t\t\trotateRight: false\n\t\t};\n\t\n\t\ttools.place = function () {\n\t\t\tvar selectedDto;\n\t\t\tvar focusedObject = selector.getFocusedObject();\n\t\n\t\t\tif (focusedObject instanceof ShelfObject) {\n\t\t\t\tselector.placing = false;\n\t\t\t\tselectedDto = selector.getSelectedDto();\n\t\n\t\t\t\tblock.global.start();\n\t\t\t\tlocator.placeBook(selectedDto, focusedObject).then(function () {\n\t\t\t\t\tvar bookDto = catalog.getBook(selectedDto.id);\n\t\t\t\t\tselector.select(new SelectorMetaDto(BookObject.TYPE, bookDto.id, bookDto.shelfId));\n\t\t\t\t\tgrowl.success('Book placed');\n\t\t\t\t}).catch(function (error) {\n\t\t\t\t\tgrowl.error(error);\n\t\t\t\t\t$log.error(error);\n\t\t\t\t}).finally(function () {\n\t\t\t\t\tblock.global.stop();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tgrowl.error('Shelf is not selected');\n\t\t\t}\n\t\t};\n\t\n\t\ttools.unplace = function () {\n\t\t\tvar bookDto = selector.isSelectedBook() ? selector.getSelectedDto() : null;\n\t\n\t\t\tif (bookDto) {\n\t\t\t\tblock.global.start();\n\t\t\t\tlocator.unplaceBook(bookDto).then(function () {\n\t\t\t\t\tgrowl.success('Book unplaced');\n\t\t\t\t\treturn catalog.loadBooks(user.getId());\n\t\t\t\t}).catch(function (error) {\n\t\t\t\t\tgrowl.error(error);\n\t\t\t\t\t$log.error(error);\n\t\t\t\t}).finally(function () {\n\t\t\t\t\tblock.global.stop();\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t\n\t\ttools.deleteBook = function (id) {\n\t\t\treturn data.deleteBook(id).then(function () {\n\t\t\t\tselector.unselect();\n\t\t\t\tenvironment.removeBook(id);\n\t\t\t\treturn catalog.loadBooks(user.getId());\n\t\t\t});\n\t\t};\n\t\n\t\ttools.deleteSection = function (id) {\n\t\t\treturn data.deleteSection(id).then(function () {\n\t\t\t\tselector.unselect();\n\t\t\t\tenvironment.removeSection(id);\n\t\t\t});\n\t\t};\n\t\n\t\ttools.rotateLeft = function () {\n\t\t\tstates.rotateLeft = true;\n\t\t};\n\t\n\t\ttools.rotateRight = function () {\n\t\t\tstates.rotateRight = true;\n\t\t};\n\t\n\t\ttools.stop = function () {\n\t\t\tstates.rotateLeft = false;\n\t\t\tstates.rotateRight = false;\n\t\t};\n\t\n\t\ttools.update = function () {\n\t\t\tif (states.rotateLeft) {\n\t\t\t\trotate(ROTATION_SCALE);\n\t\t\t} else if (states.rotateRight) {\n\t\t\t\trotate(-ROTATION_SCALE);\n\t\t\t}\n\t\t};\n\t\n\t\tvar rotate = function rotate(scale) {\n\t\t\tvar obj;\n\t\n\t\t\tif (preview.isActive()) {\n\t\t\t\tpreview.rotate(scale);\n\t\t\t} else {\n\t\t\t\tobj = selector.getSelectedObject();\n\t\t\t\tif (obj) obj.rotate(scale);\n\t\t\t}\n\t\t};\n\t\n\t\treturn tools;\n\t}]);\n\n/***/ },\n/* 26 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('VirtualBookshelf').factory('SelectorMetaDto', [\"SelectorMeta\", \"subclassOf\", function (SelectorMeta, subclassOf) {\n\t\tvar SelectorMetaDto = function SelectorMetaDto(type, id, parentId) {\n\t\t\tthis.type = type;\n\t\t\tthis.id = id;\n\t\t\tthis.parentId = parentId;\n\t\t};\n\t\n\t\tSelectorMetaDto.prototype = subclassOf(SelectorMeta);\n\t\n\t\treturn SelectorMetaDto;\n\t}]);\n\n/***/ },\n/* 27 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('VirtualBookshelf').factory('dialog', [\"ngDialog\", function (ngDialog) {\n\t\tvar dialog = {};\n\t\n\t\tvar TEMPLATE = 'confirmDialog';\n\t\tvar ERROR = 1;\n\t\tvar CONFIRM = 2;\n\t\tvar WARNING = 3;\n\t\tvar INFO = 4;\n\t\n\t\tvar iconClassMap = {};\n\t\ticonClassMap[ERROR] = 'fa-times-circle';\n\t\ticonClassMap[CONFIRM] = 'fa-question-circle';\n\t\ticonClassMap[WARNING] = 'fa-exclamation-triangle';\n\t\ticonClassMap[INFO] = 'fa-info-circle';\n\t\n\t\tdialog.openError = function (msg) {\n\t\t\treturn openDialog(msg, ERROR);\n\t\t};\n\t\n\t\tdialog.openConfirm = function (msg) {\n\t\t\treturn openDialog(msg, CONFIRM, true);\n\t\t};\n\t\n\t\tdialog.openWarning = function (msg) {\n\t\t\treturn openDialog(msg, WARNING);\n\t\t};\n\t\n\t\tdialog.openInfo = function (msg) {\n\t\t\treturn openDialog(msg, INFO);\n\t\t};\n\t\n\t\tvar openDialog = function openDialog(msg, type, cancelButton) {\n\t\t\treturn ngDialog.openConfirm({\n\t\t\t\ttemplate: TEMPLATE,\n\t\t\t\tdata: {\n\t\t\t\t\tmsg: msg,\n\t\t\t\t\ticonClass: getIconClass(type),\n\t\t\t\t\tcancelButton: cancelButton\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t\n\t\tvar getIconClass = function getIconClass(type) {\n\t\t\treturn iconClassMap[type];\n\t\t};\n\t\n\t\treturn dialog;\n\t}]);\n\n/***/ },\n/* 28 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('VirtualBookshelf').factory('user', [\"data\", function (data) {\n\t\tvar user = {};\n\t\n\t\tvar loaded = false;\n\t\tvar _dataObject = null;\n\t\tvar library = null;\n\t\n\t\tuser.load = function () {\n\t\t\tvar scope = this;\n\t\n\t\t\treturn data.getUser().then(function (dto) {\n\t\t\t\tscope.setDataObject(dto);\n\t\t\t\tscope.setLibrary();\n\t\t\t\tloaded = true;\n\t\t\t});\n\t\t};\n\t\n\t\tuser.logout = function () {\n\t\t\treturn data.logout().then(function () {\n\t\t\t\treturn user.load();\n\t\t\t});\n\t\t};\n\t\n\t\tuser.setDataObject = function (dataObject) {\n\t\t\t_dataObject = dataObject;\n\t\t};\n\t\n\t\tuser.getLibrary = function () {\n\t\t\treturn library;\n\t\t};\n\t\n\t\tuser.getName = function () {\n\t\t\treturn _dataObject && _dataObject.name;\n\t\t};\n\t\n\t\tuser.getEmail = function () {\n\t\t\treturn _dataObject && _dataObject.email;\n\t\t};\n\t\n\t\tuser.setLibrary = function (libraryId) {\n\t\t\tlibraryId = libraryId || window.location.pathname.substring(1);\n\t\t\tlibrary = Number(libraryId);\n\t\t};\n\t\n\t\tuser.getId = function () {\n\t\t\treturn _dataObject && _dataObject.id;\n\t\t};\n\t\n\t\tuser.isAuthorized = function () {\n\t\t\treturn _dataObject && !user.isTemporary();\n\t\t};\n\t\n\t\tuser.isLoaded = function () {\n\t\t\treturn loaded;\n\t\t};\n\t\n\t\tuser.isTemporary = function () {\n\t\t\treturn Boolean(_dataObject && _dataObject.temporary);\n\t\t};\n\t\n\t\tuser.isGoogle = function () {\n\t\t\treturn Boolean(_dataObject && _dataObject.googleId);\n\t\t};\n\t\n\t\tuser.isTwitter = function () {\n\t\t\treturn Boolean(_dataObject && _dataObject.twitterId);\n\t\t};\n\t\n\t\tuser.isFacebook = function () {\n\t\t\treturn Boolean(_dataObject && _dataObject.facebookId);\n\t\t};\n\t\n\t\tuser.isVkontakte = function () {\n\t\t\treturn Boolean(_dataObject && _dataObject.vkontakteId);\n\t\t};\n\t\n\t\treturn user;\n\t}]);\n\n/***/ },\n/* 29 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(5);\n\t\n\t__webpack_require__(10);\n\t\n\t__webpack_require__(19);\n\t\n\t__webpack_require__(14);\n\t\n\t__webpack_require__(17);\n\t\n\t__webpack_require__(30);\n\t\n\tangular.module('VirtualBookshelf').factory('locator', [\"$q\", \"$log\", \"BaseObject\", \"data\", \"selector\", \"environment\", \"cache\", \"gridCalculator\", function ($q, $log, BaseObject, data, selector, environment, cache, gridCalculator) {\n\t\tvar locator = {};\n\t\n\t\tvar debugEnabled = false;\n\t\n\t\tlocator.centerObject = function (obj) {\n\t\t\tvar targetBB = obj.geometry.boundingBox;\n\t\t\tvar spaceBB = environment.library.geometry.boundingBox;\n\t\n\t\t\tvar matrixPrecision = new THREE.Vector3(targetBB.max.x - targetBB.min.x + 0.01, 0, targetBB.max.z - targetBB.min.z + 0.01);\n\t\t\tvar occupiedMatrix = getOccupiedMatrix(environment.library.children, matrixPrecision, obj);\n\t\t\tvar freePosition = getFreeMatrix(occupiedMatrix, spaceBB, targetBB, matrixPrecision);\n\t\n\t\t\tobj.position.setX(freePosition.x);\n\t\t\tobj.position.setZ(freePosition.z);\n\t\t};\n\t\n\t\tlocator.placeSection = function (sectionDto) {\n\t\t\tvar promise = cache.getSection(sectionDto.model).then(function (sectionCache) {\n\t\t\t\tvar sectionBB = sectionCache.geometry.boundingBox;\n\t\t\t\tvar libraryBB = environment.library.geometry.boundingBox;\n\t\t\t\tvar freePlace = getFreePlace(environment.library.children, libraryBB, sectionBB);\n\t\n\t\t\t\treturn freePlace ? saveSection(sectionDto, freePlace) : $q.reject('there is no free space');\n\t\t\t}).then(function (newDto) {\n\t\t\t\treturn environment.updateSection(newDto);\n\t\t\t});\n\t\n\t\t\treturn promise;\n\t\t};\n\t\n\t\tvar saveSection = function saveSection(dto, position) {\n\t\t\tdto.libraryId = environment.library.getId();\n\t\t\tdto.pos_x = position.x;\n\t\t\tdto.pos_y = position.y;\n\t\t\tdto.pos_z = position.z;\n\t\n\t\t\treturn data.postSection(dto);\n\t\t};\n\t\n\t\tlocator.placeBook = function (bookDto, shelf) {\n\t\t\tvar promise = cache.getBook(bookDto.model).then(function (bookCache) {\n\t\t\t\tvar shelfBB = shelf.geometry.boundingBox;\n\t\t\t\tvar bookBB = bookCache.geometry.boundingBox;\n\t\t\t\tvar freePlace = getFreePlace(shelf.children, shelfBB, bookBB);\n\t\n\t\t\t\treturn freePlace ? saveBook(bookDto, freePlace, shelf) : $q.reject('there is no free space');\n\t\t\t}).then(function (newDto) {\n\t\t\t\treturn environment.updateBook(newDto);\n\t\t\t});\n\t\n\t\t\treturn promise;\n\t\t};\n\t\n\t\tvar saveBook = function saveBook(dto, position, shelf) {\n\t\t\tdto.shelfId = shelf.getId();\n\t\t\tdto.sectionId = shelf.parent.getId();\n\t\t\tdto.pos_x = position.x;\n\t\t\tdto.pos_y = position.y;\n\t\t\tdto.pos_z = position.z;\n\t\n\t\t\treturn data.postBook(dto);\n\t\t};\n\t\n\t\tlocator.unplaceBook = function (bookDto) {\n\t\t\tvar promise;\n\t\t\tbookDto.sectionId = null;\n\t\n\t\t\tpromise = data.postBook(bookDto).then(function () {\n\t\t\t\treturn environment.updateBook(bookDto);\n\t\t\t});\n\t\n\t\t\treturn promise;\n\t\t};\n\t\n\t\tvar getFreePlace = function getFreePlace(objects, spaceBB, targetBB) {\n\t\t\tvar matrixPrecision = new THREE.Vector3(targetBB.max.x - targetBB.min.x + 0.01, 0, targetBB.max.z - targetBB.min.z + 0.01);\n\t\t\tvar occupiedMatrix = getOccupiedMatrix(objects, matrixPrecision);\n\t\t\tvar freePosition = getFreeMatrixCells(occupiedMatrix, spaceBB, targetBB, matrixPrecision);\n\t\n\t\t\tif (debugEnabled) {\n\t\t\t\tdebugShowFree(freePosition, matrixPrecision, environment.library);\n\t\t\t}\n\t\n\t\t\treturn freePosition;\n\t\t};\n\t\n\t\tvar getFreeMatrix = function getFreeMatrix(occupiedMatrix, spaceBB, targetBB, matrixPrecision) {\n\t\t\tvar DISTANCE = 1.3;\n\t\n\t\t\tvar xIndex;\n\t\t\tvar zIndex;\n\t\t\tvar position = {};\n\t\t\tvar minPosition = {};\n\t\t\tvar edges = gridCalculator.getEdges(spaceBB, matrixPrecision);\n\t\n\t\t\tfor (zIndex = edges.minZCell; zIndex <= edges.maxZCell; zIndex++) {\n\t\t\t\tfor (xIndex = edges.minXCell; xIndex <= edges.maxXCell; xIndex++) {\n\t\t\t\t\tif (!occupiedMatrix[zIndex] || !occupiedMatrix[zIndex][xIndex]) {\n\t\t\t\t\t\tposition.pos = getPositionFromCells([xIndex], zIndex, matrixPrecision, spaceBB, targetBB);\n\t\t\t\t\t\tposition.length = position.pos.length();\n\t\n\t\t\t\t\t\tif (!minPosition.pos || position.length < minPosition.length) {\n\t\t\t\t\t\t\tminPosition.pos = position.pos;\n\t\t\t\t\t\t\tminPosition.length = position.length;\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\tif (minPosition.pos && minPosition.length < DISTANCE) {\n\t\t\t\t\t\t\treturn minPosition.pos;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\treturn minPosition.pos;\n\t\t};\n\t\n\t\tvar getFreeMatrixCells = function getFreeMatrixCells(occupiedMatrix, spaceBB, targetBB, matrixPrecision) {\n\t\t\tvar targetCellsSize = 1;\n\t\t\tvar freeCellsCount = 0;\n\t\t\tvar freeCellsStart;\n\t\t\tvar xIndex;\n\t\t\tvar zIndex;\n\t\t\tvar cells;\n\t\t\tvar edges = gridCalculator.getEdges(spaceBB, matrixPrecision);\n\t\n\t\t\tfor (zIndex = edges.minZCell; zIndex <= edges.maxZCell; zIndex++) {\n\t\t\t\tfor (xIndex = edges.minXCell; xIndex <= edges.maxXCell; xIndex++) {\n\t\t\t\t\tif (!occupiedMatrix[zIndex] || !occupiedMatrix[zIndex][xIndex]) {\n\t\t\t\t\t\tfreeCellsStart = freeCellsStart || xIndex;\n\t\t\t\t\t\tfreeCellsCount++;\n\t\n\t\t\t\t\t\tif (freeCellsCount === targetCellsSize) {\n\t\t\t\t\t\t\tcells = _.range(freeCellsStart, freeCellsStart + freeCellsCount);\n\t\t\t\t\t\t\treturn getPositionFromCells(cells, zIndex, matrixPrecision, spaceBB, targetBB);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfreeCellsCount = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\treturn null;\n\t\t};\n\t\n\t\tvar getPositionFromCells = function getPositionFromCells(cells, zIndex, matrixPrecision, spaceBB, targetBB) {\n\t\t\tvar center = gridCalculator.cellToPos(new THREE.Vector3(cells[0], 0, zIndex), matrixPrecision);\n\t\n\t\t\tvar offset = new THREE.Vector3();\n\t\t\toffset.addVectors(targetBB.min, targetBB.max);\n\t\t\toffset.multiplyScalar(-0.5);\n\t\n\t\t\treturn center.add(offset).setY(getBottomY(spaceBB, targetBB));\n\t\t};\n\t\n\t\tvar getBottomY = function getBottomY(spaceBB, targetBB) {\n\t\t\treturn spaceBB.min.y - targetBB.min.y + environment.CLEARANCE;\n\t\t};\n\t\n\t\tvar getOccupiedMatrix = function getOccupiedMatrix(objects, matrixPrecision, obj) {\n\t\t\tvar result = {};\n\t\t\tvar objectBB;\n\t\t\tvar minKeyX;\n\t\t\tvar maxKeyX;\n\t\t\tvar minKeyZ;\n\t\t\tvar maxKeyZ;\n\t\t\tvar z, x;\n\t\n\t\t\tobjects.forEach(function (child) {\n\t\t\t\tif (child instanceof BaseObject && child !== obj) {\n\t\t\t\t\tobjectBB = child.boundingBox;\n\t\n\t\t\t\t\tminKeyX = Math.round((objectBB.center.x - objectBB.radius.x) / matrixPrecision.x);\n\t\t\t\t\tmaxKeyX = Math.round((objectBB.center.x + objectBB.radius.x) / matrixPrecision.x);\n\t\t\t\t\tminKeyZ = Math.round((objectBB.center.z - objectBB.radius.z) / matrixPrecision.z);\n\t\t\t\t\tmaxKeyZ = Math.round((objectBB.center.z + objectBB.radius.z) / matrixPrecision.z);\n\t\n\t\t\t\t\tfor (z = minKeyZ; z <= maxKeyZ; z++) {\n\t\t\t\t\t\tresult[z] = result[z] || {};\n\t\t\t\t\t\tvar debugCells = [];\n\t\n\t\t\t\t\t\tfor (x = minKeyX; x <= maxKeyX; x++) {\n\t\t\t\t\t\t\tresult[z][x] = true;\n\t\t\t\t\t\t\tdebugCells.push(x);\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\tif (debugEnabled) {\n\t\t\t\t\t\t\tdebugShowBB(child);\n\t\t\t\t\t\t\tdebugAddOccupied(debugCells, matrixPrecision, child, z);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\n\t\t\treturn result;\n\t\t};\n\t\n\t\tlocator.debug = function () {\n\t\t\tcache.getSection('bookshelf_0001').then(function (sectionCache) {\n\t\t\t\tdebugEnabled = true;\n\t\t\t\tvar sectionBB = sectionCache.geometry.boundingBox;\n\t\t\t\tvar libraryBB = environment.library.geometry.boundingBox;\n\t\t\t\tgetFreePlace(environment.library.children, libraryBB, sectionBB);\n\t\t\t\tdebugEnabled = false;\n\t\t\t});\n\t\t};\n\t\n\t\tvar debugShowBB = function debugShowBB(obj) {\n\t\t\tvar objectBB = obj.boundingBox;\n\t\t\tvar objBox = new THREE.Mesh(new THREE.BoxGeometry(objectBB.radius.x * 2, objectBB.radius.y * 2 + 0.1, objectBB.radius.z * 2), new THREE.MeshLambertMaterial({\n\t\t\t\tcolor: 0xbbbbff,\n\t\t\t\topacity: 0.2,\n\t\t\t\ttransparent: true\n\t\t\t}));\n\t\n\t\t\tobjBox.position.x = objectBB.center.x;\n\t\t\tobjBox.position.y = objectBB.center.y;\n\t\t\tobjBox.position.z = objectBB.center.z;\n\t\n\t\t\tobj.parent.add(objBox);\n\t\t};\n\t\n\t\tvar debugAddOccupied = function debugAddOccupied(cells, matrixPrecision, obj, zKey) {\n\t\t\tcells.forEach(function (cell) {\n\t\t\t\tvar pos = getPositionFromCells([cell], zKey, matrixPrecision, obj.parent.geometry.boundingBox, obj.geometry.boundingBox);\n\t\t\t\tvar cellBox = new THREE.Mesh(new THREE.BoxGeometry(matrixPrecision.x - 0.01, 0.01, matrixPrecision.z - 0.01), new THREE.MeshLambertMaterial({ color: 0xff0000 }));\n\t\n\t\t\t\tcellBox.position.set(pos.x, pos.y, pos.z);\n\t\t\t\tobj.parent.add(cellBox);\n\t\t\t});\n\t\t};\n\t\n\t\tvar debugShowFree = function debugShowFree(position, matrixPrecision, obj) {\n\t\t\tif (position) {\n\t\t\t\tvar cellBox = new THREE.Mesh(new THREE.BoxGeometry(matrixPrecision.x, 0.5, matrixPrecision.z), new THREE.MeshLambertMaterial({ color: 0x00ff00 }));\n\t\t\t\tcellBox.position.set(position.x, position.y, position.z);\n\t\t\t\tobj.parent.add(cellBox);\n\t\t\t}\n\t\t};\n\t\n\t\treturn locator;\n\t}]);\n\n/***/ },\n/* 30 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('VirtualBookshelf').factory('gridCalculator', function () {\n\t\tvar gridCalculator = {};\n\t\n\t\tgridCalculator.getEdges = function (spaceBB, precision) {\n\t\t\tvar posMin = this.posToCell(spaceBB.min, precision);\n\t\t\tvar posMax = this.posToCell(spaceBB.max, precision);\n\t\n\t\t\treturn {\n\t\t\t\tminXCell: posMin.x + 1,\n\t\t\t\tmaxXCell: posMax.x - 1,\n\t\t\t\tminZCell: posMin.z + 1,\n\t\t\t\tmaxZCell: posMax.z - 1\n\t\t\t};\n\t\t};\n\t\n\t\tgridCalculator.posToCell = function (pos, precision) {\n\t\t\treturn pos.clone().divide(precision).round();\n\t\t};\n\t\n\t\tgridCalculator.cellToPos = function (cell, precision) {\n\t\t\treturn cell.clone().multiply(precision);\n\t\t};\n\t\n\t\treturn gridCalculator;\n\t});\n\n/***/ },\n/* 31 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(32);\n\t\n\t__webpack_require__(23);\n\t\n\t__webpack_require__(28);\n\t\n\tangular.module('VirtualBookshelf').factory('userData', [\"$q\", \"selectLibrary\", \"catalog\", \"user\", function ($q, selectLibrary, catalog, user) {\n\t\tvar userData = {};\n\t\n\t\tuserData.load = function () {\n\t\t\treturn $q.all([selectLibrary.updateList(), catalog.loadBooks(user.getId())]);\n\t\t};\n\t\n\t\treturn userData;\n\t}]);\n\n/***/ },\n/* 32 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('VirtualBookshelf').factory('selectLibrary', [\"$q\", \"data\", \"environment\", \"user\", \"ngDialog\", function ($q, data, environment, user, ngDialog) {\n\t\tvar selectLibrary = {};\n\t\n\t\tvar TEMPLATE = 'selectLibraryDialog';\n\t\n\t\tselectLibrary.list = [];\n\t\n\t\tselectLibrary.show = function () {\n\t\t\tngDialog.openConfirm({ template: TEMPLATE });\n\t\t};\n\t\n\t\tselectLibrary.isAvailable = function () {\n\t\t\treturn selectLibrary.list.length > 0;\n\t\t};\n\t\n\t\tselectLibrary.isUserLibrary = function () {\n\t\t\treturn environment.library && environment.library.dataObject.userId === user.getId();\n\t\t};\n\t\n\t\tselectLibrary.updateList = function () {\n\t\t\tvar scope = this;\n\t\t\tvar promise;\n\t\n\t\t\tif (user.isAuthorized()) {\n\t\t\t\tpromise = data.getLibraries().then(function (libraries) {\n\t\t\t\t\tscope.list = libraries;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tscope.list = [];\n\t\t\t\tpromise = $q.when(scope.list);\n\t\t\t}\n\t\n\t\t\treturn promise;\n\t\t};\n\t\n\t\tselectLibrary.go = environment.goToLibrary;\n\t\n\t\treturn selectLibrary;\n\t}]);\n\n/***/ },\n/* 33 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(34);\n\t\n\tangular.module('VirtualBookshelf').controller('MainMenuCtrl', [\"mainMenu\", \"authorization\", \"selectLibrary\", function (mainMenu, authorization, selectLibrary) {\n\t\tthis.isShow = mainMenu.isShow;\n\t\tthis.createListShow = mainMenu.createListShow;\n\t\tthis.showSelectLibrary = mainMenu.showSelectLibrary;\n\t\tthis.showFeedback = mainMenu.showFeedback;\n\t\tthis.showLinkAccount = mainMenu.showLinkAccount;\n\t\tthis.isLinkAccountAvailable = mainMenu.isLinkAccountAvailable;\n\t\tthis.isCreateListShow = mainMenu.isCreateListShow;\n\t\tthis.showCreateLibrary = mainMenu.showCreateLibrary;\n\t\tthis.showCreateSection = mainMenu.showCreateSection;\n\t\tthis.trigger = mainMenu.trigger;\n\t\n\t\tthis.authorization = authorization;\n\t\tthis.selectLibrary = selectLibrary;\n\t}]);\n\n/***/ },\n/* 34 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(10);\n\t\n\t__webpack_require__(35);\n\t\n\t__webpack_require__(37);\n\t\n\t__webpack_require__(32);\n\t\n\t__webpack_require__(38);\n\t\n\t__webpack_require__(39);\n\t\n\t__webpack_require__(40);\n\t\n\t__webpack_require__(41);\n\t\n\tangular.module('VirtualBookshelf').factory('mainMenu', [\"$log\", \"data\", \"bookEdit\", \"feedback\", \"selectLibrary\", \"createLibrary\", \"createSection\", \"linkAccount\", \"authorization\", function ($log, data, bookEdit, feedback, selectLibrary, createLibrary, createSection, linkAccount, authorization) {\n\t\tvar mainMenu = {};\n\t\n\t\tvar show = false;\n\t\tvar createListShow = false;\n\t\n\t\tmainMenu.isShow = function () {\n\t\t\treturn show;\n\t\t};\n\t\n\t\tmainMenu.show = function () {\n\t\t\tmainMenu.hideAll();\n\t\t\tshow = true;\n\t\t};\n\t\n\t\tmainMenu.hide = function () {\n\t\t\tshow = false;\n\t\t};\n\t\n\t\tmainMenu.isCreateListShow = function () {\n\t\t\treturn createListShow;\n\t\t};\n\t\n\t\tmainMenu.createListShow = function () {\n\t\t\tmainMenu.hideAll();\n\t\t\tcreateListShow = true;\n\t\t};\n\t\n\t\tmainMenu.createListHide = function () {\n\t\t\tcreateListShow = false;\n\t\t};\n\t\n\t\tmainMenu.hideAll = function () {\n\t\t\tmainMenu.hide();\n\t\t\tmainMenu.createListHide();\n\t\t};\n\t\n\t\tmainMenu.trigger = function () {\n\t\t\tif (mainMenu.isShow()) {\n\t\t\t\tmainMenu.hide();\n\t\t\t} else {\n\t\t\t\tmainMenu.show();\n\t\t\t}\n\t\t};\n\t\n\t\tmainMenu.showFeedback = function () {\n\t\t\tmainMenu.hideAll();\n\t\t\tfeedback.show();\n\t\t};\n\t\n\t\tmainMenu.showSelectLibrary = function () {\n\t\t\tmainMenu.hideAll();\n\t\t\tselectLibrary.show();\n\t\t};\n\t\n\t\tmainMenu.showCreateLibrary = function () {\n\t\t\tmainMenu.hideAll();\n\t\t\tcreateLibrary.show();\n\t\t};\n\t\n\t\tmainMenu.showCreateSection = function () {\n\t\t\tmainMenu.hideAll();\n\t\t\tcreateSection.show();\n\t\t};\n\t\n\t\tmainMenu.showLinkAccount = function () {\n\t\t\tmainMenu.hideAll();\n\t\t\tlinkAccount.show();\n\t\t};\n\t\n\t\tmainMenu.isLinkAccountAvailable = function () {\n\t\t\treturn !authorization.isShow() && linkAccount.isAvailable();\n\t\t};\n\t\n\t\treturn mainMenu;\n\t}]);\n\n/***/ },\n/* 35 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(10);\n\t\n\t__webpack_require__(14);\n\t\n\t__webpack_require__(24);\n\t\n\t__webpack_require__(27);\n\t\n\t__webpack_require__(36);\n\t\n\t__webpack_require__(23);\n\t\n\t__webpack_require__(19);\n\t\n\t__webpack_require__(28);\n\t\n\tangular.module('VirtualBookshelf').factory('bookEdit', [\"$log\", \"data\", \"environment\", \"block\", \"dialog\", \"archive\", \"catalog\", \"selector\", \"user\", \"ngDialog\", function ($log, data, environment, block, dialog, archive, catalog, selector, user, ngDialog) {\n\t\tvar bookEdit = {};\n\t\tvar bookDialog;\n\t\n\t\tvar BOOK_IMAGE_URL = '/obj/books/{model}/img.jpg';\n\t\tvar EMPTY_IMAGE_URL = '/img/empty_cover.jpg';\n\t\tvar TEMPLATE = 'editBookDialog';\n\t\n\t\tbookEdit.book = {};\n\t\n\t\tbookEdit.show = function (book) {\n\t\t\tsetBook(book);\n\t\t\tbookDialog = ngDialog.open({ template: TEMPLATE });\n\t\t};\n\t\n\t\tvar setBook = function setBook(book) {\n\t\t\tif (book) {\n\t\t\t\tbookEdit.book.id = book.id;\n\t\t\t\tbookEdit.book.userId = book.userId;\n\t\t\t\tbookEdit.book.model = book.model;\n\t\t\t\tbookEdit.book.cover = book.cover;\n\t\t\t\tbookEdit.book.coverId = book.coverId;\n\t\t\t\tbookEdit.book.title = book.title;\n\t\t\t\tbookEdit.book.author = book.author;\n\t\t\t}\n\t\t};\n\t\n\t\tbookEdit.getImg = function () {\n\t\t\treturn this.book.model ? BOOK_IMAGE_URL.replace('{model}', this.book.model) : EMPTY_IMAGE_URL;\n\t\t};\n\t\n\t\tbookEdit.getCoverImg = function () {\n\t\t\treturn this.book.cover ? this.book.cover.url : EMPTY_IMAGE_URL;\n\t\t};\n\t\n\t\tbookEdit.applyCover = function (coverInputURL) {\n\t\t\tif (coverInputURL) {\n\t\t\t\tblock.global.start();\n\t\t\t\tarchive.sendExternalURL(coverInputURL, [this.book.title, this.book.author]).then(function (result) {\n\t\t\t\t\tbookEdit.book.cover = result;\n\t\t\t\t\tbookEdit.book.coverId = result.id;\n\t\t\t\t}).catch(function () {\n\t\t\t\t\tbookEdit.book.coverId = null;\n\t\t\t\t\tbookEdit.book.cover = null;\n\t\n\t\t\t\t\tdialog.openError('Can not apply this cover. Try another one, please.');\n\t\t\t\t}).finally(function () {\n\t\t\t\t\tcoverInputURL = null;\n\t\t\t\t\tblock.global.stop();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tbookEdit.book.coverId = null;\n\t\t\t\tbookEdit.book.cover = null;\n\t\t\t}\n\t\t};\n\t\n\t\tbookEdit.save = function () {\n\t\t\tvar scope = this;\n\t\n\t\t\tblock.global.start();\n\t\t\tdata.postBook(this.book).then(function (dto) {\n\t\t\t\tif (selector.isBookSelected(dto.id)) {\n\t\t\t\t\tselector.unselect();\n\t\t\t\t}\n\t\n\t\t\t\tenvironment.updateBook(dto);\n\t\t\t\tscope.cancel();\n\t\t\t\treturn catalog.loadBooks(user.getId());\n\t\t\t}).catch(function () {\n\t\t\t\t$log.error('Book save error');\n\t\t\t\t//TODO: show error\n\t\t\t}).finally(function () {\n\t\t\t\tblock.global.stop();\n\t\t\t});\n\t\t};\n\t\n\t\tbookEdit.cancel = function () {\n\t\t\tbookDialog.close();\n\t\t};\n\t\n\t\treturn bookEdit;\n\t}]);\n\n/***/ },\n/* 36 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('VirtualBookshelf').factory('archive', [\"data\", function (data) {\n\t\tvar archive = {};\n\t\n\t\tarchive.sendExternalURL = function (externalURL, tags) {\n\t\t\treturn data.postCover(externalURL, tags);\n\t\t};\n\t\n\t\treturn archive;\n\t}]);\n\n/***/ },\n/* 37 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('VirtualBookshelf').factory('feedback', [\"data\", \"dialog\", \"ngDialog\", function (data, dialog, ngDialog) {\n\t\tvar feedback = {};\n\t\tvar feedbackDialog;\n\t\n\t\tvar TEMPLATE = 'feedbackDialog';\n\t\n\t\tfeedback.show = function () {\n\t\t\tfeedbackDialog = ngDialog.open({ template: TEMPLATE });\n\t\t};\n\t\n\t\tfeedback.send = function (dto) {\n\t\t\tdialog.openConfirm('Send feedback?').then(function () {\n\t\t\t\treturn data.postFeedback(dto).then(function () {\n\t\t\t\t\tfeedbackDialog.close();\n\t\t\t\t}, function () {\n\t\t\t\t\tdialog.openError('Can not send feedback because of an error.');\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\t\n\t\treturn feedback;\n\t}]);\n\n/***/ },\n/* 38 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('VirtualBookshelf').factory('createLibrary', [\"data\", \"environment\", \"dialog\", \"block\", \"ngDialog\", function (data, environment, dialog, block, ngDialog) {\n\t\tvar createLibrary = {};\n\t\n\t\tvar EMPTY_IMAGE_URL = '/img/empty_cover.jpg';\n\t\tvar TEMPLATE_ID = 'createLibraryDialog';\n\t\n\t\tvar createLibraryDialog;\n\t\n\t\tcreateLibrary.show = function () {\n\t\t\tcreateLibraryDialog = ngDialog.open({\n\t\t\t\ttemplate: TEMPLATE_ID\n\t\t\t});\n\t\t};\n\t\n\t\tcreateLibrary.getImg = function (model) {\n\t\t\treturn model ? '/obj/libraries/{model}/img.jpg'.replace('{model}', model) : EMPTY_IMAGE_URL;\n\t\t};\n\t\n\t\tcreateLibrary.create = function (model) {\n\t\t\tif (model) {\n\t\t\t\tblock.global.start();\n\t\t\t\tdata.postLibrary(model).then(function (result) {\n\t\t\t\t\tenvironment.goToLibrary(result.id);\n\t\t\t\t}).catch(function () {\n\t\t\t\t\tdialog.openError('Can not create library because of an error.');\n\t\t\t\t}).finally(function () {\n\t\t\t\t\tblock.global.stop();\n\t\t\t\t});\n\t\n\t\t\t\tcreateLibraryDialog.close();\n\t\t\t} else {\n\t\t\t\tdialog.openWarning('Select library, please.');\n\t\t\t}\n\t\t};\n\t\n\t\treturn createLibrary;\n\t}]);\n\n/***/ },\n/* 39 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('VirtualBookshelf').factory('createSection', [\"$log\", \"user\", \"environment\", \"locator\", \"dialog\", \"block\", \"ngDialog\", function ($log, user, environment, locator, dialog, block, ngDialog) {\n\t\tvar createSection = {};\n\t\n\t\tvar EMPTY_IMAGE_URL = '/img/empty_cover.jpg';\n\t\tvar TEMPLATE = 'createSectionDialog';\n\t\n\t\tvar createSectionDialog;\n\t\n\t\tcreateSection.show = function () {\n\t\t\tcreateSectionDialog = ngDialog.open({ template: TEMPLATE });\n\t\t};\n\t\n\t\tcreateSection.getImg = function (model) {\n\t\t\treturn model ? '/obj/sections/{model}/img.jpg'.replace('{model}', model) : EMPTY_IMAGE_URL;\n\t\t};\n\t\n\t\tcreateSection.create = function (model) {\n\t\t\tif (model) {\n\t\t\t\tvar sectionData = {\n\t\t\t\t\tmodel: model,\n\t\t\t\t\tlibraryId: environment.library.getId(),\n\t\t\t\t\tuserId: user.getId()\n\t\t\t\t};\n\t\n\t\t\t\tplace(sectionData);\n\t\t\t} else {\n\t\t\t\tdialog.openWarning('Select model, please.');\n\t\t\t}\n\t\t};\n\t\n\t\tvar place = function place(dto) {\n\t\t\tblock.global.start();\n\t\t\tlocator.placeSection(dto).catch(function (error) {\n\t\t\t\tdialog.openError('Can not create section because of an error.');\n\t\t\t\t$log.error(error);\n\t\t\t}).finally(function () {\n\t\t\t\tblock.global.stop();\n\t\t\t});\n\t\n\t\t\tcreateSectionDialog.close();\n\t\t};\n\t\n\t\treturn createSection;\n\t}]);\n\n/***/ },\n/* 40 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('VirtualBookshelf').factory('linkAccount', [\"user\", \"ngDialog\", function (user, ngDialog) {\n\t\tvar linkAccount = {};\n\t\n\t\tvar TEMPLATE = 'linkAccountDialog';\n\t\n\t\tlinkAccount.show = function () {\n\t\t\tngDialog.open({ template: TEMPLATE });\n\t\t};\n\t\n\t\tlinkAccount.isGoogleShow = function () {\n\t\t\treturn !user.isGoogle();\n\t\t};\n\t\n\t\tlinkAccount.isTwitterShow = function () {\n\t\t\treturn !user.isTwitter();\n\t\t};\n\t\n\t\tlinkAccount.isFacebookShow = function () {\n\t\t\treturn !user.isFacebook();\n\t\t};\n\t\n\t\tlinkAccount.isVkontakteShow = function () {\n\t\t\treturn !user.isVkontakte();\n\t\t};\n\t\n\t\tlinkAccount.isAvailable = function () {\n\t\t\treturn this.isGoogleShow() || this.isTwitterShow() || this.isFacebookShow() || this.isVkontakteShow();\n\t\t};\n\t\n\t\treturn linkAccount;\n\t}]);\n\n/***/ },\n/* 41 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(28);\n\t\n\t__webpack_require__(14);\n\t\n\t__webpack_require__(42);\n\t\n\t__webpack_require__(31);\n\t\n\t__webpack_require__(24);\n\t\n\tangular.module('VirtualBookshelf').factory('authorization', [\"$log\", \"$q\", \"$window\", \"$interval\", \"user\", \"environment\", \"registration\", \"userData\", \"block\", \"ngDialog\", function ($log, $q, $window, $interval, user, environment, registration, userData, block, ngDialog) {\n\t\tvar authorization = {};\n\t\n\t\tvar TEMPLATE = 'loginDialog';\n\t\n\t\tauthorization.show = function () {\n\t\t\tngDialog.open({ template: TEMPLATE });\n\t\t};\n\t\n\t\tauthorization.isShow = function () {\n\t\t\treturn !user.isAuthorized() && user.isLoaded();\n\t\t};\n\t\n\t\tvar login = function login(link) {\n\t\t\tblock.global.start();\n\t\t\tvar win = $window.open(link, '', 'width=800,height=600,modal=yes,alwaysRaised=yes');\n\t\t\tvar checkAuthWindow = $interval(function () {\n\t\t\t\tif (win && win.closed) {\n\t\t\t\t\t$interval.cancel(checkAuthWindow);\n\t\n\t\t\t\t\tenvironment.setLoaded(false);\n\t\t\t\t\tuser.load().then(function () {\n\t\t\t\t\t\treturn user.isTemporary() ? registration.show() : userData.load();\n\t\t\t\t\t}).finally(function () {\n\t\t\t\t\t\tenvironment.setLoaded(true);\n\t\t\t\t\t\tblock.global.stop();\n\t\t\t\t\t}).catch(function () {\n\t\t\t\t\t\t$log.log('User loadind error');\n\t\t\t\t\t\t//TODO: show error message\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}, 100);\n\t\t};\n\t\n\t\tauthorization.google = function () {\n\t\t\tlogin('/auth/google');\n\t\t};\n\t\n\t\tauthorization.twitter = function () {\n\t\t\tlogin('/auth/twitter');\n\t\t};\n\t\n\t\tauthorization.facebook = function () {\n\t\t\tlogin('/auth/facebook');\n\t\t};\n\t\n\t\tauthorization.vkontakte = function () {\n\t\t\tlogin('/auth/vkontakte');\n\t\t};\n\t\n\t\tauthorization.logout = function () {\n\t\t\tenvironment.setLoaded(false);\n\t\t\tuser.logout().finally(function () {\n\t\t\t\treturn userData.load();\n\t\t\t}).finally(function () {\n\t\t\t\tenvironment.setLoaded(true);\n\t\t\t}).catch(function () {\n\t\t\t\t$log.error('Logout error');\n\t\t\t\t//TODO: show an error\n\t\t\t});\n\t\t};\n\t\n\t\treturn authorization;\n\t}]);\n\n/***/ },\n/* 42 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('VirtualBookshelf').factory('registration', [\"$log\", \"user\", \"data\", \"dialog\", \"userData\", \"ngDialog\", function ($log, user, data, dialog, userData, ngDialog) {\n\t\tvar registration = {};\n\t\n\t\tvar FORM_VALIDATION_ERROR = 'Enter a valid data, please.';\n\t\tvar SAVE_USER_ERROR = 'Error saving user. Try again, please.';\n\t\tvar TEMPLATE = 'registrationDialog';\n\t\n\t\tregistration.user = {\n\t\t\tid: null,\n\t\t\tname: null,\n\t\t\temail: null,\n\t\t\ttemporary: false\n\t\t};\n\t\n\t\tregistration.show = function () {\n\t\t\tregistration.user.id = user.getId();\n\t\t\tregistration.user.name = user.getName();\n\t\t\tregistration.user.email = user.getEmail();\n\t\n\t\t\treturn ngDialog.openConfirm({ template: TEMPLATE }).then(function () {\n\t\t\t\treturn saveUser();\n\t\t\t}, function () {\n\t\t\t\treturn deleteUser();\n\t\t\t});\n\t\t};\n\t\n\t\tregistration.showValidationError = function () {\n\t\t\tdialog.openError(FORM_VALIDATION_ERROR);\n\t\t};\n\t\n\t\tvar saveUser = function saveUser() {\n\t\t\treturn data.putUser(registration.user).then(function () {\n\t\t\t\treturn user.load().then(function () {\n\t\t\t\t\treturn userData.load();\n\t\t\t\t});\n\t\t\t}).catch(function () {\n\t\t\t\tdialog.openError(SAVE_USER_ERROR);\n\t\t\t\t$log.log('Registration: Error saving user:', registration.user.id);\n\t\t\t});\n\t\t};\n\t\n\t\tvar deleteUser = function deleteUser() {\n\t\t\treturn data.deleteUser(registration.user.id);\n\t\t};\n\t\n\t\treturn registration;\n\t}]);\n\n/***/ },\n/* 43 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('VirtualBookshelf').controller('BookEditCtrl', [\"bookEdit\", \"dialog\", \"data\", function (bookEdit, dialog, data) {\n\t\tvar scope = this;\n\t\n\t\tthis.book = bookEdit.book;\n\t\tthis.coverInputURL = null;\n\t\n\t\tthis.applyCover = function () {\n\t\t\tif (!isCoverDisabled()) {\n\t\t\t\tbookEdit.applyCover(this.coverInputURL);\n\t\t\t} else {\n\t\t\t\tdialog.openError('Fill author and title fields, please.');\n\t\t\t}\n\t\t};\n\t\n\t\tthis.getCoverImg = function () {\n\t\t\treturn bookEdit.getCoverImg();\n\t\t};\n\t\n\t\tthis.getImg = function () {\n\t\t\treturn bookEdit.getImg();\n\t\t};\n\t\n\t\tthis.cancel = function () {\n\t\t\tbookEdit.cancel();\n\t\t};\n\t\n\t\tthis.submit = function () {\n\t\t\tif (this.form.$valid) {\n\t\t\t\tbookEdit.save();\n\t\t\t} else {\n\t\t\t\tdialog.openError('Fill all required fields, please.');\n\t\t\t}\n\t\t};\n\t\n\t\tvar isCoverDisabled = function isCoverDisabled() {\n\t\t\treturn scope.coverInputURL && (scope.form.title.$invalid || scope.form.author.$invalid);\n\t\t};\n\t\n\t\tdata.common.then(function (commonData) {\n\t\t\tscope.list = commonData.books;\n\t\t});\n\t}]);\n\n/***/ },\n/* 44 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('VirtualBookshelf').controller('CreateLibraryCtrl', [\"createLibrary\", \"data\", function (createLibrary, data) {\n\t\tvar scope = this;\n\t\n\t\tthis.list = null;\n\t\tthis.model = null;\n\t\n\t\tthis.getImg = function () {\n\t\t\treturn createLibrary.getImg(this.model);\n\t\t};\n\t\n\t\tthis.create = function () {\n\t\t\tcreateLibrary.create(this.model);\n\t\t};\n\t\n\t\tdata.common.then(function (commonData) {\n\t\t\tscope.list = commonData.libraries;\n\t\t});\n\t}]);\n\n/***/ },\n/* 45 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('VirtualBookshelf').controller('CreateSectionCtrl', [\"createSection\", \"data\", function (createSection, data) {\n\t\tvar scope = this;\n\t\n\t\tthis.model = null;\n\t\tthis.list = null;\n\t\n\t\tthis.getImg = function () {\n\t\t\treturn createSection.getImg(this.model);\n\t\t};\n\t\n\t\tthis.create = function () {\n\t\t\tcreateSection.create(this.model);\n\t\t};\n\t\n\t\tdata.common.then(function (commonData) {\n\t\t\tscope.list = commonData.bookshelves;\n\t\t});\n\t}]);\n\n/***/ },\n/* 46 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('VirtualBookshelf').controller('FeedbackCtrl', [\"feedback\", \"user\", \"dialog\", function (feedback, user, dialog) {\n\t\tthis.submit = function () {\n\t\t\tif (this.form.message.$valid) {\n\t\t\t\tfeedback.send({\n\t\t\t\t\tmessage: this.message,\n\t\t\t\t\tuserId: user.getId()\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tdialog.openError('Feedback field is required.');\n\t\t\t}\n\t\t};\n\t}]);\n\n/***/ },\n/* 47 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('VirtualBookshelf').controller('InventoryCtrl', [\"SelectorMetaDto\", \"BookObject\", \"user\", \"bookEdit\", \"selector\", \"catalog\", function (SelectorMetaDto, BookObject, user, bookEdit, selector, catalog) {\n\t\tthis.isShow = function () {\n\t\t\treturn user.isAuthorized();\n\t\t};\n\t\n\t\tthis.isBookSelected = function (id) {\n\t\t\treturn selector.isBookSelected(id);\n\t\t};\n\t\n\t\tthis.select = function (dto) {\n\t\t\tvar meta = new SelectorMetaDto(BookObject.TYPE, dto.id);\n\t\t\tselector.select(meta);\n\t\t};\n\t\n\t\tthis.addBook = function () {\n\t\t\tbookEdit.show({ userId: user.getId() });\n\t\t};\n\t\n\t\tthis.catalog = catalog;\n\t}]);\n\n/***/ },\n/* 48 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('VirtualBookshelf').controller('LinkAccountCtrl', [\"authorization\", \"linkAccount\", function (authorization, linkAccount) {\n\t\tthis.linkGoogle = function () {\n\t\t\tauthorization.google();\n\t\t};\n\t\n\t\tthis.linkTwitter = function () {\n\t\t\tauthorization.twitter();\n\t\t};\n\t\n\t\tthis.linkFacebook = function () {\n\t\t\tauthorization.facebook();\n\t\t};\n\t\n\t\tthis.linkVkontakte = function () {\n\t\t\tauthorization.vkontakte();\n\t\t};\n\t\n\t\tthis.isGoogleShow = function () {\n\t\t\treturn linkAccount.isGoogleShow();\n\t\t};\n\t\n\t\tthis.isTwitterShow = function () {\n\t\t\treturn linkAccount.isTwitterShow();\n\t\t};\n\t\n\t\tthis.isFacebookShow = function () {\n\t\t\treturn linkAccount.isFacebookShow();\n\t\t};\n\t\n\t\tthis.isVkontakteShow = function () {\n\t\t\treturn linkAccount.isVkontakteShow();\n\t\t};\n\t\n\t\tthis.isAvailable = function () {\n\t\t\treturn linkAccount.isAvailable();\n\t\t};\n\t}]);\n\n/***/ },\n/* 49 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('VirtualBookshelf').controller('NavigationCtrl', [\"navigation\", function (navigation) {\n\t\tthis.stop = navigation.goStop;\n\t\tthis.forward = navigation.goForward;\n\t\tthis.backward = navigation.goBackward;\n\t\tthis.left = navigation.goLeft;\n\t\tthis.right = navigation.goRight;\n\t}]);\n\n/***/ },\n/* 50 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('VirtualBookshelf').controller('RegistrationCtrl', [\"registration\", function (registration) {\n\t\tthis.user = registration.user;\n\t\n\t\tthis.showValidationError = function () {\n\t\t\tregistration.showValidationError();\n\t\t};\n\t}]);\n\n/***/ },\n/* 51 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('VirtualBookshelf').controller('SelectLibraryCtrl', [\"selectLibrary\", function (selectLibrary) {\n\t\tthis.go = selectLibrary.go;\n\t\n\t\tthis.getList = function () {\n\t\t\treturn selectLibrary.list;\n\t\t};\n\t}]);\n\n/***/ },\n/* 52 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('VirtualBookshelf').controller('ToolsCtrl', [\"user\", \"selector\", \"tools\", \"preview\", \"bookEdit\", \"dialog\", \"block\", \"growl\", function (user, selector, tools, preview, bookEdit, dialog, block, growl) {\n\t    var DELETE_CONFIRM = 'Delete {0}: {1}?';\n\t    var DELETE_SUCCESS = '{0}: {1} deleted.';\n\t    var DELETE_ERROR = 'Can not delete {0}: {1}.';\n\t    var BOOK = 'book';\n\t    var SECTION = 'section';\n\t\n\t    this.isShow = function () {\n\t        return selector.isSelectedEditable() || preview.isActive();\n\t    };\n\t\n\t    this.isBook = function () {\n\t        return selector.isSelectedBook();\n\t    };\n\t\n\t    this.isSection = function () {\n\t        return selector.isSelectedSection();\n\t    };\n\t\n\t    this.isRotatable = function () {\n\t        return selector.isSelectedSection() || preview.isActive();\n\t    };\n\t\n\t    this.isEditable = function () {\n\t        return this.isBook() && !preview.isActive();\n\t    };\n\t\n\t    this.isDeletable = function () {\n\t        return selector.isSelectedEditable() && user.isAuthorized() && !preview.isActive();\n\t    };\n\t\n\t    this.isWatchable = function () {\n\t        return selector.isSelectedBook() && !preview.isActive() && !this.isPlaceble();\n\t    };\n\t\n\t    this.isPlaceble = function () {\n\t        var obj = selector.getSelectedObject();\n\t        return !obj && selector.isSelectedBook() && user.isAuthorized();\n\t    };\n\t\n\t    this.isUnplaceble = function () {\n\t        var obj = selector.getSelectedObject();\n\t        return obj && selector.isSelectedBook() && user.isAuthorized() && !preview.isActive();\n\t    };\n\t\n\t    this.isPlacing = function () {\n\t        return selector.placing;\n\t    };\n\t\n\t    this.place = function () {\n\t        selector.placing = !selector.placing;\n\t    };\n\t\n\t    this.unplace = function () {\n\t        tools.unplace();\n\t    };\n\t\n\t    this.watch = function () {\n\t        var obj = selector.getSelectedObject();\n\t        preview.enable(obj);\n\t    };\n\t\n\t    this.getTitle = function () {\n\t        return this.isBook() ? selector.getSelectedDto().title : this.isSection() ? selector.getSelectedObject().getId() : null;\n\t    };\n\t\n\t    this.edit = function () {\n\t        bookEdit.show(selector.getSelectedDto());\n\t    };\n\t\n\t    this.delete = function () {\n\t        var dto = selector.getSelectedDto();\n\t        var confirmMsg;\n\t        var successMsg;\n\t        var errorMsg;\n\t        var deleteFnc;\n\t\n\t        if (selector.isSelectedBook()) {\n\t            deleteFnc = tools.deleteBook;\n\t            confirmMsg = DELETE_CONFIRM.replace('{0}', BOOK).replace('{1}', dto.title);\n\t            successMsg = DELETE_SUCCESS.replace('{0}', BOOK).replace('{1}', dto.title);\n\t            errorMsg = DELETE_ERROR.replace('{0}', BOOK).replace('{1}', dto.title);\n\t        } else if (selector.isSelectedSection()) {\n\t            deleteFnc = tools.deleteSection;\n\t            confirmMsg = DELETE_CONFIRM.replace('{0}', SECTION).replace('{1}', dto.id);\n\t            successMsg = DELETE_SUCCESS.replace('{0}', SECTION).replace('{1}', dto.id);\n\t            errorMsg = DELETE_ERROR.replace('{0}', SECTION).replace('{1}', dto.id);\n\t        }\n\t\n\t        dialog.openConfirm(confirmMsg).then(function () {\n\t            block.global.start();\n\t            deleteFnc(dto.id).then(function () {\n\t                growl.success(successMsg);\n\t            }).catch(function () {\n\t                growl.error(errorMsg);\n\t            }).finally(function () {\n\t                block.global.stop();\n\t            });\n\t        });\n\t    };\n\t\n\t    this.unwatch = preview.disable;\n\t    this.isWatchActive = preview.isActive;\n\t\n\t    this.rotateLeft = tools.rotateLeft;\n\t    this.rotateRight = tools.rotateRight;\n\t    this.stop = tools.stop;\n\t}]);\n\n/***/ },\n/* 53 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('VirtualBookshelf').controller('TooltipCtrl', [\"tooltip\", \"BookObject\", function (tooltip, BookObject) {\n\t    this.isShow = function () {\n\t        return tooltip.obj.type === BookObject.TYPE;\n\t    };\n\t\n\t    this.obj = tooltip.obj;\n\t}]);\n\n/***/ },\n/* 54 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('VirtualBookshelf').controller('WelcomeCtrl', [\"authorization\", \"selectLibrary\", \"createLibrary\", \"environment\", \"user\", function (authorization, selectLibrary, createLibrary, environment, user) {\n\t\tvar closed = false;\n\t\n\t\tthis.isShowAuthorization = function () {\n\t\t\treturn authorization.isShow();\n\t\t};\n\t\n\t\tthis.isShowSelectLibrary = function () {\n\t\t\treturn selectLibrary.isAvailable() && !selectLibrary.isUserLibrary(user.getId());\n\t\t};\n\t\n\t\tthis.isShowCreateLibrary = function () {\n\t\t\treturn !this.isShowAuthorization() && !selectLibrary.isAvailable();\n\t\t};\n\t\n\t\tthis.isShow = function () {\n\t\t\treturn !closed && (this.isShowAuthorization() || this.isShowCreateLibrary() || this.isShowSelectLibrary());\n\t\t};\n\t\n\t\tthis.isLoaded = function () {\n\t\t\treturn environment.getLoaded();\n\t\t};\n\t\n\t\tthis.showLoginDialog = function () {\n\t\t\tauthorization.show();\n\t\t};\n\t\n\t\tthis.showSelectLibraryDialog = function () {\n\t\t\tselectLibrary.show();\n\t\t};\n\t\n\t\tthis.showCreateLibraryDialog = function () {\n\t\t\tcreateLibrary.show();\n\t\t};\n\t\n\t\tthis.close = function () {\n\t\t\tclosed = true;\n\t\t};\n\t}]);\n\n/***/ },\n/* 55 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\t\n\t// load the styles\n\tvar content = __webpack_require__(56);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(64)(content, {});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!./../../css-loader/index.js!./font-awesome.min.css\", function() {\n\t\t\t\tvar newContent = require(\"!!./../../css-loader/index.js!./font-awesome.min.css\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ },\n/* 56 */\n/***/ function(module, exports, __webpack_require__) {\n\n\texports = module.exports = __webpack_require__(57)();\n\t// imports\n\t\n\t\n\t// module\n\texports.push([module.id, \"/*!\\n *  Font Awesome 4.5.0 by @davegandy - http://fontawesome.io - @fontawesome\\n *  License - http://fontawesome.io/license (Font: SIL OFL 1.1, CSS: MIT License)\\n */@font-face{font-family:FontAwesome;src:url(\" + __webpack_require__(58) + \");src:url(\" + __webpack_require__(59) + \"?#iefix&v=4.5.0) format('embedded-opentype'),url(\" + __webpack_require__(60) + \") format('woff2'),url(\" + __webpack_require__(61) + \") format('woff'),url(\" + __webpack_require__(62) + \") format('truetype'),url(\" + __webpack_require__(63) + \"#fontawesomeregular) format('svg');font-weight:400;font-style:normal}.fa{display:inline-block;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.fa-lg{font-size:1.33333333em;line-height:.75em;vertical-align:-15%}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-fw{width:1.28571429em;text-align:center}.fa-ul{padding-left:0;margin-left:2.14285714em;list-style-type:none}.fa-ul>li{position:relative}.fa-li{position:absolute;left:-2.14285714em;width:2.14285714em;top:.14285714em;text-align:center}.fa-li.fa-lg{left:-1.85714286em}.fa-border{padding:.2em .25em .15em;border:.08em solid #eee;border-radius:.1em}.fa-pull-left{float:left}.fa-pull-right{float:right}.fa.fa-pull-left{margin-right:.3em}.fa.fa-pull-right{margin-left:.3em}.pull-right{float:right}.pull-left{float:left}.fa.pull-left{margin-right:.3em}.fa.pull-right{margin-left:.3em}.fa-spin{-webkit-animation:fa-spin 2s infinite linear;animation:fa-spin 2s infinite linear}.fa-pulse{-webkit-animation:fa-spin 1s infinite steps(8);animation:fa-spin 1s infinite steps(8)}@-webkit-keyframes fa-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes fa-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}.fa-rotate-90{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=1);-webkit-transform:rotate(90deg);transform:rotate(90deg)}.fa-rotate-180{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=2);-webkit-transform:rotate(180deg);transform:rotate(180deg)}.fa-rotate-270{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=3);-webkit-transform:rotate(270deg);transform:rotate(270deg)}.fa-flip-horizontal{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=0,mirror=1);-webkit-transform:scaleX(-1);transform:scaleX(-1)}.fa-flip-vertical{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=2,mirror=1);-webkit-transform:scaleY(-1);transform:scaleY(-1)}:root .fa-flip-horizontal,:root .fa-flip-vertical,:root .fa-rotate-90,:root .fa-rotate-180,:root .fa-rotate-270{filter:none}.fa-stack{position:relative;display:inline-block;width:2em;height:2em;line-height:2em;vertical-align:middle}.fa-stack-1x,.fa-stack-2x{position:absolute;left:0;width:100%;text-align:center}.fa-stack-1x{line-height:inherit}.fa-stack-2x{font-size:2em}.fa-inverse{color:#fff}.fa-glass:before{content:\\\"\\\\F000\\\"}.fa-music:before{content:\\\"\\\\F001\\\"}.fa-search:before{content:\\\"\\\\F002\\\"}.fa-envelope-o:before{content:\\\"\\\\F003\\\"}.fa-heart:before{content:\\\"\\\\F004\\\"}.fa-star:before{content:\\\"\\\\F005\\\"}.fa-star-o:before{content:\\\"\\\\F006\\\"}.fa-user:before{content:\\\"\\\\F007\\\"}.fa-film:before{content:\\\"\\\\F008\\\"}.fa-th-large:before{content:\\\"\\\\F009\\\"}.fa-th:before{content:\\\"\\\\F00A\\\"}.fa-th-list:before{content:\\\"\\\\F00B\\\"}.fa-check:before{content:\\\"\\\\F00C\\\"}.fa-close:before,.fa-remove:before,.fa-times:before{content:\\\"\\\\F00D\\\"}.fa-search-plus:before{content:\\\"\\\\F00E\\\"}.fa-search-minus:before{content:\\\"\\\\F010\\\"}.fa-power-off:before{content:\\\"\\\\F011\\\"}.fa-signal:before{content:\\\"\\\\F012\\\"}.fa-cog:before,.fa-gear:before{content:\\\"\\\\F013\\\"}.fa-trash-o:before{content:\\\"\\\\F014\\\"}.fa-home:before{content:\\\"\\\\F015\\\"}.fa-file-o:before{content:\\\"\\\\F016\\\"}.fa-clock-o:before{content:\\\"\\\\F017\\\"}.fa-road:before{content:\\\"\\\\F018\\\"}.fa-download:before{content:\\\"\\\\F019\\\"}.fa-arrow-circle-o-down:before{content:\\\"\\\\F01A\\\"}.fa-arrow-circle-o-up:before{content:\\\"\\\\F01B\\\"}.fa-inbox:before{content:\\\"\\\\F01C\\\"}.fa-play-circle-o:before{content:\\\"\\\\F01D\\\"}.fa-repeat:before,.fa-rotate-right:before{content:\\\"\\\\F01E\\\"}.fa-refresh:before{content:\\\"\\\\F021\\\"}.fa-list-alt:before{content:\\\"\\\\F022\\\"}.fa-lock:before{content:\\\"\\\\F023\\\"}.fa-flag:before{content:\\\"\\\\F024\\\"}.fa-headphones:before{content:\\\"\\\\F025\\\"}.fa-volume-off:before{content:\\\"\\\\F026\\\"}.fa-volume-down:before{content:\\\"\\\\F027\\\"}.fa-volume-up:before{content:\\\"\\\\F028\\\"}.fa-qrcode:before{content:\\\"\\\\F029\\\"}.fa-barcode:before{content:\\\"\\\\F02A\\\"}.fa-tag:before{content:\\\"\\\\F02B\\\"}.fa-tags:before{content:\\\"\\\\F02C\\\"}.fa-book:before{content:\\\"\\\\F02D\\\"}.fa-bookmark:before{content:\\\"\\\\F02E\\\"}.fa-print:before{content:\\\"\\\\F02F\\\"}.fa-camera:before{content:\\\"\\\\F030\\\"}.fa-font:before{content:\\\"\\\\F031\\\"}.fa-bold:before{content:\\\"\\\\F032\\\"}.fa-italic:before{content:\\\"\\\\F033\\\"}.fa-text-height:before{content:\\\"\\\\F034\\\"}.fa-text-width:before{content:\\\"\\\\F035\\\"}.fa-align-left:before{content:\\\"\\\\F036\\\"}.fa-align-center:before{content:\\\"\\\\F037\\\"}.fa-align-right:before{content:\\\"\\\\F038\\\"}.fa-align-justify:before{content:\\\"\\\\F039\\\"}.fa-list:before{content:\\\"\\\\F03A\\\"}.fa-dedent:before,.fa-outdent:before{content:\\\"\\\\F03B\\\"}.fa-indent:before{content:\\\"\\\\F03C\\\"}.fa-video-camera:before{content:\\\"\\\\F03D\\\"}.fa-image:before,.fa-photo:before,.fa-picture-o:before{content:\\\"\\\\F03E\\\"}.fa-pencil:before{content:\\\"\\\\F040\\\"}.fa-map-marker:before{content:\\\"\\\\F041\\\"}.fa-adjust:before{content:\\\"\\\\F042\\\"}.fa-tint:before{content:\\\"\\\\F043\\\"}.fa-edit:before,.fa-pencil-square-o:before{content:\\\"\\\\F044\\\"}.fa-share-square-o:before{content:\\\"\\\\F045\\\"}.fa-check-square-o:before{content:\\\"\\\\F046\\\"}.fa-arrows:before{content:\\\"\\\\F047\\\"}.fa-step-backward:before{content:\\\"\\\\F048\\\"}.fa-fast-backward:before{content:\\\"\\\\F049\\\"}.fa-backward:before{content:\\\"\\\\F04A\\\"}.fa-play:before{content:\\\"\\\\F04B\\\"}.fa-pause:before{content:\\\"\\\\F04C\\\"}.fa-stop:before{content:\\\"\\\\F04D\\\"}.fa-forward:before{content:\\\"\\\\F04E\\\"}.fa-fast-forward:before{content:\\\"\\\\F050\\\"}.fa-step-forward:before{content:\\\"\\\\F051\\\"}.fa-eject:before{content:\\\"\\\\F052\\\"}.fa-chevron-left:before{content:\\\"\\\\F053\\\"}.fa-chevron-right:before{content:\\\"\\\\F054\\\"}.fa-plus-circle:before{content:\\\"\\\\F055\\\"}.fa-minus-circle:before{content:\\\"\\\\F056\\\"}.fa-times-circle:before{content:\\\"\\\\F057\\\"}.fa-check-circle:before{content:\\\"\\\\F058\\\"}.fa-question-circle:before{content:\\\"\\\\F059\\\"}.fa-info-circle:before{content:\\\"\\\\F05A\\\"}.fa-crosshairs:before{content:\\\"\\\\F05B\\\"}.fa-times-circle-o:before{content:\\\"\\\\F05C\\\"}.fa-check-circle-o:before{content:\\\"\\\\F05D\\\"}.fa-ban:before{content:\\\"\\\\F05E\\\"}.fa-arrow-left:before{content:\\\"\\\\F060\\\"}.fa-arrow-right:before{content:\\\"\\\\F061\\\"}.fa-arrow-up:before{content:\\\"\\\\F062\\\"}.fa-arrow-down:before{content:\\\"\\\\F063\\\"}.fa-mail-forward:before,.fa-share:before{content:\\\"\\\\F064\\\"}.fa-expand:before{content:\\\"\\\\F065\\\"}.fa-compress:before{content:\\\"\\\\F066\\\"}.fa-plus:before{content:\\\"\\\\F067\\\"}.fa-minus:before{content:\\\"\\\\F068\\\"}.fa-asterisk:before{content:\\\"\\\\F069\\\"}.fa-exclamation-circle:before{content:\\\"\\\\F06A\\\"}.fa-gift:before{content:\\\"\\\\F06B\\\"}.fa-leaf:before{content:\\\"\\\\F06C\\\"}.fa-fire:before{content:\\\"\\\\F06D\\\"}.fa-eye:before{content:\\\"\\\\F06E\\\"}.fa-eye-slash:before{content:\\\"\\\\F070\\\"}.fa-exclamation-triangle:before,.fa-warning:before{content:\\\"\\\\F071\\\"}.fa-plane:before{content:\\\"\\\\F072\\\"}.fa-calendar:before{content:\\\"\\\\F073\\\"}.fa-random:before{content:\\\"\\\\F074\\\"}.fa-comment:before{content:\\\"\\\\F075\\\"}.fa-magnet:before{content:\\\"\\\\F076\\\"}.fa-chevron-up:before{content:\\\"\\\\F077\\\"}.fa-chevron-down:before{content:\\\"\\\\F078\\\"}.fa-retweet:before{content:\\\"\\\\F079\\\"}.fa-shopping-cart:before{content:\\\"\\\\F07A\\\"}.fa-folder:before{content:\\\"\\\\F07B\\\"}.fa-folder-open:before{content:\\\"\\\\F07C\\\"}.fa-arrows-v:before{content:\\\"\\\\F07D\\\"}.fa-arrows-h:before{content:\\\"\\\\F07E\\\"}.fa-bar-chart-o:before,.fa-bar-chart:before{content:\\\"\\\\F080\\\"}.fa-twitter-square:before{content:\\\"\\\\F081\\\"}.fa-facebook-square:before{content:\\\"\\\\F082\\\"}.fa-camera-retro:before{content:\\\"\\\\F083\\\"}.fa-key:before{content:\\\"\\\\F084\\\"}.fa-cogs:before,.fa-gears:before{content:\\\"\\\\F085\\\"}.fa-comments:before{content:\\\"\\\\F086\\\"}.fa-thumbs-o-up:before{content:\\\"\\\\F087\\\"}.fa-thumbs-o-down:before{content:\\\"\\\\F088\\\"}.fa-star-half:before{content:\\\"\\\\F089\\\"}.fa-heart-o:before{content:\\\"\\\\F08A\\\"}.fa-sign-out:before{content:\\\"\\\\F08B\\\"}.fa-linkedin-square:before{content:\\\"\\\\F08C\\\"}.fa-thumb-tack:before{content:\\\"\\\\F08D\\\"}.fa-external-link:before{content:\\\"\\\\F08E\\\"}.fa-sign-in:before{content:\\\"\\\\F090\\\"}.fa-trophy:before{content:\\\"\\\\F091\\\"}.fa-github-square:before{content:\\\"\\\\F092\\\"}.fa-upload:before{content:\\\"\\\\F093\\\"}.fa-lemon-o:before{content:\\\"\\\\F094\\\"}.fa-phone:before{content:\\\"\\\\F095\\\"}.fa-square-o:before{content:\\\"\\\\F096\\\"}.fa-bookmark-o:before{content:\\\"\\\\F097\\\"}.fa-phone-square:before{content:\\\"\\\\F098\\\"}.fa-twitter:before{content:\\\"\\\\F099\\\"}.fa-facebook-f:before,.fa-facebook:before{content:\\\"\\\\F09A\\\"}.fa-github:before{content:\\\"\\\\F09B\\\"}.fa-unlock:before{content:\\\"\\\\F09C\\\"}.fa-credit-card:before{content:\\\"\\\\F09D\\\"}.fa-feed:before,.fa-rss:before{content:\\\"\\\\F09E\\\"}.fa-hdd-o:before{content:\\\"\\\\F0A0\\\"}.fa-bullhorn:before{content:\\\"\\\\F0A1\\\"}.fa-bell:before{content:\\\"\\\\F0F3\\\"}.fa-certificate:before{content:\\\"\\\\F0A3\\\"}.fa-hand-o-right:before{content:\\\"\\\\F0A4\\\"}.fa-hand-o-left:before{content:\\\"\\\\F0A5\\\"}.fa-hand-o-up:before{content:\\\"\\\\F0A6\\\"}.fa-hand-o-down:before{content:\\\"\\\\F0A7\\\"}.fa-arrow-circle-left:before{content:\\\"\\\\F0A8\\\"}.fa-arrow-circle-right:before{content:\\\"\\\\F0A9\\\"}.fa-arrow-circle-up:before{content:\\\"\\\\F0AA\\\"}.fa-arrow-circle-down:before{content:\\\"\\\\F0AB\\\"}.fa-globe:before{content:\\\"\\\\F0AC\\\"}.fa-wrench:before{content:\\\"\\\\F0AD\\\"}.fa-tasks:before{content:\\\"\\\\F0AE\\\"}.fa-filter:before{content:\\\"\\\\F0B0\\\"}.fa-briefcase:before{content:\\\"\\\\F0B1\\\"}.fa-arrows-alt:before{content:\\\"\\\\F0B2\\\"}.fa-group:before,.fa-users:before{content:\\\"\\\\F0C0\\\"}.fa-chain:before,.fa-link:before{content:\\\"\\\\F0C1\\\"}.fa-cloud:before{content:\\\"\\\\F0C2\\\"}.fa-flask:before{content:\\\"\\\\F0C3\\\"}.fa-cut:before,.fa-scissors:before{content:\\\"\\\\F0C4\\\"}.fa-copy:before,.fa-files-o:before{content:\\\"\\\\F0C5\\\"}.fa-paperclip:before{content:\\\"\\\\F0C6\\\"}.fa-floppy-o:before,.fa-save:before{content:\\\"\\\\F0C7\\\"}.fa-square:before{content:\\\"\\\\F0C8\\\"}.fa-bars:before,.fa-navicon:before,.fa-reorder:before{content:\\\"\\\\F0C9\\\"}.fa-list-ul:before{content:\\\"\\\\F0CA\\\"}.fa-list-ol:before{content:\\\"\\\\F0CB\\\"}.fa-strikethrough:before{content:\\\"\\\\F0CC\\\"}.fa-underline:before{content:\\\"\\\\F0CD\\\"}.fa-table:before{content:\\\"\\\\F0CE\\\"}.fa-magic:before{content:\\\"\\\\F0D0\\\"}.fa-truck:before{content:\\\"\\\\F0D1\\\"}.fa-pinterest:before{content:\\\"\\\\F0D2\\\"}.fa-pinterest-square:before{content:\\\"\\\\F0D3\\\"}.fa-google-plus-square:before{content:\\\"\\\\F0D4\\\"}.fa-google-plus:before{content:\\\"\\\\F0D5\\\"}.fa-money:before{content:\\\"\\\\F0D6\\\"}.fa-caret-down:before{content:\\\"\\\\F0D7\\\"}.fa-caret-up:before{content:\\\"\\\\F0D8\\\"}.fa-caret-left:before{content:\\\"\\\\F0D9\\\"}.fa-caret-right:before{content:\\\"\\\\F0DA\\\"}.fa-columns:before{content:\\\"\\\\F0DB\\\"}.fa-sort:before,.fa-unsorted:before{content:\\\"\\\\F0DC\\\"}.fa-sort-desc:before,.fa-sort-down:before{content:\\\"\\\\F0DD\\\"}.fa-sort-asc:before,.fa-sort-up:before{content:\\\"\\\\F0DE\\\"}.fa-envelope:before{content:\\\"\\\\F0E0\\\"}.fa-linkedin:before{content:\\\"\\\\F0E1\\\"}.fa-rotate-left:before,.fa-undo:before{content:\\\"\\\\F0E2\\\"}.fa-gavel:before,.fa-legal:before{content:\\\"\\\\F0E3\\\"}.fa-dashboard:before,.fa-tachometer:before{content:\\\"\\\\F0E4\\\"}.fa-comment-o:before{content:\\\"\\\\F0E5\\\"}.fa-comments-o:before{content:\\\"\\\\F0E6\\\"}.fa-bolt:before,.fa-flash:before{content:\\\"\\\\F0E7\\\"}.fa-sitemap:before{content:\\\"\\\\F0E8\\\"}.fa-umbrella:before{content:\\\"\\\\F0E9\\\"}.fa-clipboard:before,.fa-paste:before{content:\\\"\\\\F0EA\\\"}.fa-lightbulb-o:before{content:\\\"\\\\F0EB\\\"}.fa-exchange:before{content:\\\"\\\\F0EC\\\"}.fa-cloud-download:before{content:\\\"\\\\F0ED\\\"}.fa-cloud-upload:before{content:\\\"\\\\F0EE\\\"}.fa-user-md:before{content:\\\"\\\\F0F0\\\"}.fa-stethoscope:before{content:\\\"\\\\F0F1\\\"}.fa-suitcase:before{content:\\\"\\\\F0F2\\\"}.fa-bell-o:before{content:\\\"\\\\F0A2\\\"}.fa-coffee:before{content:\\\"\\\\F0F4\\\"}.fa-cutlery:before{content:\\\"\\\\F0F5\\\"}.fa-file-text-o:before{content:\\\"\\\\F0F6\\\"}.fa-building-o:before{content:\\\"\\\\F0F7\\\"}.fa-hospital-o:before{content:\\\"\\\\F0F8\\\"}.fa-ambulance:before{content:\\\"\\\\F0F9\\\"}.fa-medkit:before{content:\\\"\\\\F0FA\\\"}.fa-fighter-jet:before{content:\\\"\\\\F0FB\\\"}.fa-beer:before{content:\\\"\\\\F0FC\\\"}.fa-h-square:before{content:\\\"\\\\F0FD\\\"}.fa-plus-square:before{content:\\\"\\\\F0FE\\\"}.fa-angle-double-left:before{content:\\\"\\\\F100\\\"}.fa-angle-double-right:before{content:\\\"\\\\F101\\\"}.fa-angle-double-up:before{content:\\\"\\\\F102\\\"}.fa-angle-double-down:before{content:\\\"\\\\F103\\\"}.fa-angle-left:before{content:\\\"\\\\F104\\\"}.fa-angle-right:before{content:\\\"\\\\F105\\\"}.fa-angle-up:before{content:\\\"\\\\F106\\\"}.fa-angle-down:before{content:\\\"\\\\F107\\\"}.fa-desktop:before{content:\\\"\\\\F108\\\"}.fa-laptop:before{content:\\\"\\\\F109\\\"}.fa-tablet:before{content:\\\"\\\\F10A\\\"}.fa-mobile-phone:before,.fa-mobile:before{content:\\\"\\\\F10B\\\"}.fa-circle-o:before{content:\\\"\\\\F10C\\\"}.fa-quote-left:before{content:\\\"\\\\F10D\\\"}.fa-quote-right:before{content:\\\"\\\\F10E\\\"}.fa-spinner:before{content:\\\"\\\\F110\\\"}.fa-circle:before{content:\\\"\\\\F111\\\"}.fa-mail-reply:before,.fa-reply:before{content:\\\"\\\\F112\\\"}.fa-github-alt:before{content:\\\"\\\\F113\\\"}.fa-folder-o:before{content:\\\"\\\\F114\\\"}.fa-folder-open-o:before{content:\\\"\\\\F115\\\"}.fa-smile-o:before{content:\\\"\\\\F118\\\"}.fa-frown-o:before{content:\\\"\\\\F119\\\"}.fa-meh-o:before{content:\\\"\\\\F11A\\\"}.fa-gamepad:before{content:\\\"\\\\F11B\\\"}.fa-keyboard-o:before{content:\\\"\\\\F11C\\\"}.fa-flag-o:before{content:\\\"\\\\F11D\\\"}.fa-flag-checkered:before{content:\\\"\\\\F11E\\\"}.fa-terminal:before{content:\\\"\\\\F120\\\"}.fa-code:before{content:\\\"\\\\F121\\\"}.fa-mail-reply-all:before,.fa-reply-all:before{content:\\\"\\\\F122\\\"}.fa-star-half-empty:before,.fa-star-half-full:before,.fa-star-half-o:before{content:\\\"\\\\F123\\\"}.fa-location-arrow:before{content:\\\"\\\\F124\\\"}.fa-crop:before{content:\\\"\\\\F125\\\"}.fa-code-fork:before{content:\\\"\\\\F126\\\"}.fa-chain-broken:before,.fa-unlink:before{content:\\\"\\\\F127\\\"}.fa-question:before{content:\\\"\\\\F128\\\"}.fa-info:before{content:\\\"\\\\F129\\\"}.fa-exclamation:before{content:\\\"\\\\F12A\\\"}.fa-superscript:before{content:\\\"\\\\F12B\\\"}.fa-subscript:before{content:\\\"\\\\F12C\\\"}.fa-eraser:before{content:\\\"\\\\F12D\\\"}.fa-puzzle-piece:before{content:\\\"\\\\F12E\\\"}.fa-microphone:before{content:\\\"\\\\F130\\\"}.fa-microphone-slash:before{content:\\\"\\\\F131\\\"}.fa-shield:before{content:\\\"\\\\F132\\\"}.fa-calendar-o:before{content:\\\"\\\\F133\\\"}.fa-fire-extinguisher:before{content:\\\"\\\\F134\\\"}.fa-rocket:before{content:\\\"\\\\F135\\\"}.fa-maxcdn:before{content:\\\"\\\\F136\\\"}.fa-chevron-circle-left:before{content:\\\"\\\\F137\\\"}.fa-chevron-circle-right:before{content:\\\"\\\\F138\\\"}.fa-chevron-circle-up:before{content:\\\"\\\\F139\\\"}.fa-chevron-circle-down:before{content:\\\"\\\\F13A\\\"}.fa-html5:before{content:\\\"\\\\F13B\\\"}.fa-css3:before{content:\\\"\\\\F13C\\\"}.fa-anchor:before{content:\\\"\\\\F13D\\\"}.fa-unlock-alt:before{content:\\\"\\\\F13E\\\"}.fa-bullseye:before{content:\\\"\\\\F140\\\"}.fa-ellipsis-h:before{content:\\\"\\\\F141\\\"}.fa-ellipsis-v:before{content:\\\"\\\\F142\\\"}.fa-rss-square:before{content:\\\"\\\\F143\\\"}.fa-play-circle:before{content:\\\"\\\\F144\\\"}.fa-ticket:before{content:\\\"\\\\F145\\\"}.fa-minus-square:before{content:\\\"\\\\F146\\\"}.fa-minus-square-o:before{content:\\\"\\\\F147\\\"}.fa-level-up:before{content:\\\"\\\\F148\\\"}.fa-level-down:before{content:\\\"\\\\F149\\\"}.fa-check-square:before{content:\\\"\\\\F14A\\\"}.fa-pencil-square:before{content:\\\"\\\\F14B\\\"}.fa-external-link-square:before{content:\\\"\\\\F14C\\\"}.fa-share-square:before{content:\\\"\\\\F14D\\\"}.fa-compass:before{content:\\\"\\\\F14E\\\"}.fa-caret-square-o-down:before,.fa-toggle-down:before{content:\\\"\\\\F150\\\"}.fa-caret-square-o-up:before,.fa-toggle-up:before{content:\\\"\\\\F151\\\"}.fa-caret-square-o-right:before,.fa-toggle-right:before{content:\\\"\\\\F152\\\"}.fa-eur:before,.fa-euro:before{content:\\\"\\\\F153\\\"}.fa-gbp:before{content:\\\"\\\\F154\\\"}.fa-dollar:before,.fa-usd:before{content:\\\"\\\\F155\\\"}.fa-inr:before,.fa-rupee:before{content:\\\"\\\\F156\\\"}.fa-cny:before,.fa-jpy:before,.fa-rmb:before,.fa-yen:before{content:\\\"\\\\F157\\\"}.fa-rouble:before,.fa-rub:before,.fa-ruble:before{content:\\\"\\\\F158\\\"}.fa-krw:before,.fa-won:before{content:\\\"\\\\F159\\\"}.fa-bitcoin:before,.fa-btc:before{content:\\\"\\\\F15A\\\"}.fa-file:before{content:\\\"\\\\F15B\\\"}.fa-file-text:before{content:\\\"\\\\F15C\\\"}.fa-sort-alpha-asc:before{content:\\\"\\\\F15D\\\"}.fa-sort-alpha-desc:before{content:\\\"\\\\F15E\\\"}.fa-sort-amount-asc:before{content:\\\"\\\\F160\\\"}.fa-sort-amount-desc:before{content:\\\"\\\\F161\\\"}.fa-sort-numeric-asc:before{content:\\\"\\\\F162\\\"}.fa-sort-numeric-desc:before{content:\\\"\\\\F163\\\"}.fa-thumbs-up:before{content:\\\"\\\\F164\\\"}.fa-thumbs-down:before{content:\\\"\\\\F165\\\"}.fa-youtube-square:before{content:\\\"\\\\F166\\\"}.fa-youtube:before{content:\\\"\\\\F167\\\"}.fa-xing:before{content:\\\"\\\\F168\\\"}.fa-xing-square:before{content:\\\"\\\\F169\\\"}.fa-youtube-play:before{content:\\\"\\\\F16A\\\"}.fa-dropbox:before{content:\\\"\\\\F16B\\\"}.fa-stack-overflow:before{content:\\\"\\\\F16C\\\"}.fa-instagram:before{content:\\\"\\\\F16D\\\"}.fa-flickr:before{content:\\\"\\\\F16E\\\"}.fa-adn:before{content:\\\"\\\\F170\\\"}.fa-bitbucket:before{content:\\\"\\\\F171\\\"}.fa-bitbucket-square:before{content:\\\"\\\\F172\\\"}.fa-tumblr:before{content:\\\"\\\\F173\\\"}.fa-tumblr-square:before{content:\\\"\\\\F174\\\"}.fa-long-arrow-down:before{content:\\\"\\\\F175\\\"}.fa-long-arrow-up:before{content:\\\"\\\\F176\\\"}.fa-long-arrow-left:before{content:\\\"\\\\F177\\\"}.fa-long-arrow-right:before{content:\\\"\\\\F178\\\"}.fa-apple:before{content:\\\"\\\\F179\\\"}.fa-windows:before{content:\\\"\\\\F17A\\\"}.fa-android:before{content:\\\"\\\\F17B\\\"}.fa-linux:before{content:\\\"\\\\F17C\\\"}.fa-dribbble:before{content:\\\"\\\\F17D\\\"}.fa-skype:before{content:\\\"\\\\F17E\\\"}.fa-foursquare:before{content:\\\"\\\\F180\\\"}.fa-trello:before{content:\\\"\\\\F181\\\"}.fa-female:before{content:\\\"\\\\F182\\\"}.fa-male:before{content:\\\"\\\\F183\\\"}.fa-gittip:before,.fa-gratipay:before{content:\\\"\\\\F184\\\"}.fa-sun-o:before{content:\\\"\\\\F185\\\"}.fa-moon-o:before{content:\\\"\\\\F186\\\"}.fa-archive:before{content:\\\"\\\\F187\\\"}.fa-bug:before{content:\\\"\\\\F188\\\"}.fa-vk:before{content:\\\"\\\\F189\\\"}.fa-weibo:before{content:\\\"\\\\F18A\\\"}.fa-renren:before{content:\\\"\\\\F18B\\\"}.fa-pagelines:before{content:\\\"\\\\F18C\\\"}.fa-stack-exchange:before{content:\\\"\\\\F18D\\\"}.fa-arrow-circle-o-right:before{content:\\\"\\\\F18E\\\"}.fa-arrow-circle-o-left:before{content:\\\"\\\\F190\\\"}.fa-caret-square-o-left:before,.fa-toggle-left:before{content:\\\"\\\\F191\\\"}.fa-dot-circle-o:before{content:\\\"\\\\F192\\\"}.fa-wheelchair:before{content:\\\"\\\\F193\\\"}.fa-vimeo-square:before{content:\\\"\\\\F194\\\"}.fa-try:before,.fa-turkish-lira:before{content:\\\"\\\\F195\\\"}.fa-plus-square-o:before{content:\\\"\\\\F196\\\"}.fa-space-shuttle:before{content:\\\"\\\\F197\\\"}.fa-slack:before{content:\\\"\\\\F198\\\"}.fa-envelope-square:before{content:\\\"\\\\F199\\\"}.fa-wordpress:before{content:\\\"\\\\F19A\\\"}.fa-openid:before{content:\\\"\\\\F19B\\\"}.fa-bank:before,.fa-institution:before,.fa-university:before{content:\\\"\\\\F19C\\\"}.fa-graduation-cap:before,.fa-mortar-board:before{content:\\\"\\\\F19D\\\"}.fa-yahoo:before{content:\\\"\\\\F19E\\\"}.fa-google:before{content:\\\"\\\\F1A0\\\"}.fa-reddit:before{content:\\\"\\\\F1A1\\\"}.fa-reddit-square:before{content:\\\"\\\\F1A2\\\"}.fa-stumbleupon-circle:before{content:\\\"\\\\F1A3\\\"}.fa-stumbleupon:before{content:\\\"\\\\F1A4\\\"}.fa-delicious:before{content:\\\"\\\\F1A5\\\"}.fa-digg:before{content:\\\"\\\\F1A6\\\"}.fa-pied-piper:before{content:\\\"\\\\F1A7\\\"}.fa-pied-piper-alt:before{content:\\\"\\\\F1A8\\\"}.fa-drupal:before{content:\\\"\\\\F1A9\\\"}.fa-joomla:before{content:\\\"\\\\F1AA\\\"}.fa-language:before{content:\\\"\\\\F1AB\\\"}.fa-fax:before{content:\\\"\\\\F1AC\\\"}.fa-building:before{content:\\\"\\\\F1AD\\\"}.fa-child:before{content:\\\"\\\\F1AE\\\"}.fa-paw:before{content:\\\"\\\\F1B0\\\"}.fa-spoon:before{content:\\\"\\\\F1B1\\\"}.fa-cube:before{content:\\\"\\\\F1B2\\\"}.fa-cubes:before{content:\\\"\\\\F1B3\\\"}.fa-behance:before{content:\\\"\\\\F1B4\\\"}.fa-behance-square:before{content:\\\"\\\\F1B5\\\"}.fa-steam:before{content:\\\"\\\\F1B6\\\"}.fa-steam-square:before{content:\\\"\\\\F1B7\\\"}.fa-recycle:before{content:\\\"\\\\F1B8\\\"}.fa-automobile:before,.fa-car:before{content:\\\"\\\\F1B9\\\"}.fa-cab:before,.fa-taxi:before{content:\\\"\\\\F1BA\\\"}.fa-tree:before{content:\\\"\\\\F1BB\\\"}.fa-spotify:before{content:\\\"\\\\F1BC\\\"}.fa-deviantart:before{content:\\\"\\\\F1BD\\\"}.fa-soundcloud:before{content:\\\"\\\\F1BE\\\"}.fa-database:before{content:\\\"\\\\F1C0\\\"}.fa-file-pdf-o:before{content:\\\"\\\\F1C1\\\"}.fa-file-word-o:before{content:\\\"\\\\F1C2\\\"}.fa-file-excel-o:before{content:\\\"\\\\F1C3\\\"}.fa-file-powerpoint-o:before{content:\\\"\\\\F1C4\\\"}.fa-file-image-o:before,.fa-file-photo-o:before,.fa-file-picture-o:before{content:\\\"\\\\F1C5\\\"}.fa-file-archive-o:before,.fa-file-zip-o:before{content:\\\"\\\\F1C6\\\"}.fa-file-audio-o:before,.fa-file-sound-o:before{content:\\\"\\\\F1C7\\\"}.fa-file-movie-o:before,.fa-file-video-o:before{content:\\\"\\\\F1C8\\\"}.fa-file-code-o:before{content:\\\"\\\\F1C9\\\"}.fa-vine:before{content:\\\"\\\\F1CA\\\"}.fa-codepen:before{content:\\\"\\\\F1CB\\\"}.fa-jsfiddle:before{content:\\\"\\\\F1CC\\\"}.fa-life-bouy:before,.fa-life-buoy:before,.fa-life-ring:before,.fa-life-saver:before,.fa-support:before{content:\\\"\\\\F1CD\\\"}.fa-circle-o-notch:before{content:\\\"\\\\F1CE\\\"}.fa-ra:before,.fa-rebel:before{content:\\\"\\\\F1D0\\\"}.fa-empire:before,.fa-ge:before{content:\\\"\\\\F1D1\\\"}.fa-git-square:before{content:\\\"\\\\F1D2\\\"}.fa-git:before{content:\\\"\\\\F1D3\\\"}.fa-hacker-news:before,.fa-y-combinator-square:before,.fa-yc-square:before{content:\\\"\\\\F1D4\\\"}.fa-tencent-weibo:before{content:\\\"\\\\F1D5\\\"}.fa-qq:before{content:\\\"\\\\F1D6\\\"}.fa-wechat:before,.fa-weixin:before{content:\\\"\\\\F1D7\\\"}.fa-paper-plane:before,.fa-send:before{content:\\\"\\\\F1D8\\\"}.fa-paper-plane-o:before,.fa-send-o:before{content:\\\"\\\\F1D9\\\"}.fa-history:before{content:\\\"\\\\F1DA\\\"}.fa-circle-thin:before{content:\\\"\\\\F1DB\\\"}.fa-header:before{content:\\\"\\\\F1DC\\\"}.fa-paragraph:before{content:\\\"\\\\F1DD\\\"}.fa-sliders:before{content:\\\"\\\\F1DE\\\"}.fa-share-alt:before{content:\\\"\\\\F1E0\\\"}.fa-share-alt-square:before{content:\\\"\\\\F1E1\\\"}.fa-bomb:before{content:\\\"\\\\F1E2\\\"}.fa-futbol-o:before,.fa-soccer-ball-o:before{content:\\\"\\\\F1E3\\\"}.fa-tty:before{content:\\\"\\\\F1E4\\\"}.fa-binoculars:before{content:\\\"\\\\F1E5\\\"}.fa-plug:before{content:\\\"\\\\F1E6\\\"}.fa-slideshare:before{content:\\\"\\\\F1E7\\\"}.fa-twitch:before{content:\\\"\\\\F1E8\\\"}.fa-yelp:before{content:\\\"\\\\F1E9\\\"}.fa-newspaper-o:before{content:\\\"\\\\F1EA\\\"}.fa-wifi:before{content:\\\"\\\\F1EB\\\"}.fa-calculator:before{content:\\\"\\\\F1EC\\\"}.fa-paypal:before{content:\\\"\\\\F1ED\\\"}.fa-google-wallet:before{content:\\\"\\\\F1EE\\\"}.fa-cc-visa:before{content:\\\"\\\\F1F0\\\"}.fa-cc-mastercard:before{content:\\\"\\\\F1F1\\\"}.fa-cc-discover:before{content:\\\"\\\\F1F2\\\"}.fa-cc-amex:before{content:\\\"\\\\F1F3\\\"}.fa-cc-paypal:before{content:\\\"\\\\F1F4\\\"}.fa-cc-stripe:before{content:\\\"\\\\F1F5\\\"}.fa-bell-slash:before{content:\\\"\\\\F1F6\\\"}.fa-bell-slash-o:before{content:\\\"\\\\F1F7\\\"}.fa-trash:before{content:\\\"\\\\F1F8\\\"}.fa-copyright:before{content:\\\"\\\\F1F9\\\"}.fa-at:before{content:\\\"\\\\F1FA\\\"}.fa-eyedropper:before{content:\\\"\\\\F1FB\\\"}.fa-paint-brush:before{content:\\\"\\\\F1FC\\\"}.fa-birthday-cake:before{content:\\\"\\\\F1FD\\\"}.fa-area-chart:before{content:\\\"\\\\F1FE\\\"}.fa-pie-chart:before{content:\\\"\\\\F200\\\"}.fa-line-chart:before{content:\\\"\\\\F201\\\"}.fa-lastfm:before{content:\\\"\\\\F202\\\"}.fa-lastfm-square:before{content:\\\"\\\\F203\\\"}.fa-toggle-off:before{content:\\\"\\\\F204\\\"}.fa-toggle-on:before{content:\\\"\\\\F205\\\"}.fa-bicycle:before{content:\\\"\\\\F206\\\"}.fa-bus:before{content:\\\"\\\\F207\\\"}.fa-ioxhost:before{content:\\\"\\\\F208\\\"}.fa-angellist:before{content:\\\"\\\\F209\\\"}.fa-cc:before{content:\\\"\\\\F20A\\\"}.fa-ils:before,.fa-shekel:before,.fa-sheqel:before{content:\\\"\\\\F20B\\\"}.fa-meanpath:before{content:\\\"\\\\F20C\\\"}.fa-buysellads:before{content:\\\"\\\\F20D\\\"}.fa-connectdevelop:before{content:\\\"\\\\F20E\\\"}.fa-dashcube:before{content:\\\"\\\\F210\\\"}.fa-forumbee:before{content:\\\"\\\\F211\\\"}.fa-leanpub:before{content:\\\"\\\\F212\\\"}.fa-sellsy:before{content:\\\"\\\\F213\\\"}.fa-shirtsinbulk:before{content:\\\"\\\\F214\\\"}.fa-simplybuilt:before{content:\\\"\\\\F215\\\"}.fa-skyatlas:before{content:\\\"\\\\F216\\\"}.fa-cart-plus:before{content:\\\"\\\\F217\\\"}.fa-cart-arrow-down:before{content:\\\"\\\\F218\\\"}.fa-diamond:before{content:\\\"\\\\F219\\\"}.fa-ship:before{content:\\\"\\\\F21A\\\"}.fa-user-secret:before{content:\\\"\\\\F21B\\\"}.fa-motorcycle:before{content:\\\"\\\\F21C\\\"}.fa-street-view:before{content:\\\"\\\\F21D\\\"}.fa-heartbeat:before{content:\\\"\\\\F21E\\\"}.fa-venus:before{content:\\\"\\\\F221\\\"}.fa-mars:before{content:\\\"\\\\F222\\\"}.fa-mercury:before{content:\\\"\\\\F223\\\"}.fa-intersex:before,.fa-transgender:before{content:\\\"\\\\F224\\\"}.fa-transgender-alt:before{content:\\\"\\\\F225\\\"}.fa-venus-double:before{content:\\\"\\\\F226\\\"}.fa-mars-double:before{content:\\\"\\\\F227\\\"}.fa-venus-mars:before{content:\\\"\\\\F228\\\"}.fa-mars-stroke:before{content:\\\"\\\\F229\\\"}.fa-mars-stroke-v:before{content:\\\"\\\\F22A\\\"}.fa-mars-stroke-h:before{content:\\\"\\\\F22B\\\"}.fa-neuter:before{content:\\\"\\\\F22C\\\"}.fa-genderless:before{content:\\\"\\\\F22D\\\"}.fa-facebook-official:before{content:\\\"\\\\F230\\\"}.fa-pinterest-p:before{content:\\\"\\\\F231\\\"}.fa-whatsapp:before{content:\\\"\\\\F232\\\"}.fa-server:before{content:\\\"\\\\F233\\\"}.fa-user-plus:before{content:\\\"\\\\F234\\\"}.fa-user-times:before{content:\\\"\\\\F235\\\"}.fa-bed:before,.fa-hotel:before{content:\\\"\\\\F236\\\"}.fa-viacoin:before{content:\\\"\\\\F237\\\"}.fa-train:before{content:\\\"\\\\F238\\\"}.fa-subway:before{content:\\\"\\\\F239\\\"}.fa-medium:before{content:\\\"\\\\F23A\\\"}.fa-y-combinator:before,.fa-yc:before{content:\\\"\\\\F23B\\\"}.fa-optin-monster:before{content:\\\"\\\\F23C\\\"}.fa-opencart:before{content:\\\"\\\\F23D\\\"}.fa-expeditedssl:before{content:\\\"\\\\F23E\\\"}.fa-battery-4:before,.fa-battery-full:before{content:\\\"\\\\F240\\\"}.fa-battery-3:before,.fa-battery-three-quarters:before{content:\\\"\\\\F241\\\"}.fa-battery-2:before,.fa-battery-half:before{content:\\\"\\\\F242\\\"}.fa-battery-1:before,.fa-battery-quarter:before{content:\\\"\\\\F243\\\"}.fa-battery-0:before,.fa-battery-empty:before{content:\\\"\\\\F244\\\"}.fa-mouse-pointer:before{content:\\\"\\\\F245\\\"}.fa-i-cursor:before{content:\\\"\\\\F246\\\"}.fa-object-group:before{content:\\\"\\\\F247\\\"}.fa-object-ungroup:before{content:\\\"\\\\F248\\\"}.fa-sticky-note:before{content:\\\"\\\\F249\\\"}.fa-sticky-note-o:before{content:\\\"\\\\F24A\\\"}.fa-cc-jcb:before{content:\\\"\\\\F24B\\\"}.fa-cc-diners-club:before{content:\\\"\\\\F24C\\\"}.fa-clone:before{content:\\\"\\\\F24D\\\"}.fa-balance-scale:before{content:\\\"\\\\F24E\\\"}.fa-hourglass-o:before{content:\\\"\\\\F250\\\"}.fa-hourglass-1:before,.fa-hourglass-start:before{content:\\\"\\\\F251\\\"}.fa-hourglass-2:before,.fa-hourglass-half:before{content:\\\"\\\\F252\\\"}.fa-hourglass-3:before,.fa-hourglass-end:before{content:\\\"\\\\F253\\\"}.fa-hourglass:before{content:\\\"\\\\F254\\\"}.fa-hand-grab-o:before,.fa-hand-rock-o:before{content:\\\"\\\\F255\\\"}.fa-hand-paper-o:before,.fa-hand-stop-o:before{content:\\\"\\\\F256\\\"}.fa-hand-scissors-o:before{content:\\\"\\\\F257\\\"}.fa-hand-lizard-o:before{content:\\\"\\\\F258\\\"}.fa-hand-spock-o:before{content:\\\"\\\\F259\\\"}.fa-hand-pointer-o:before{content:\\\"\\\\F25A\\\"}.fa-hand-peace-o:before{content:\\\"\\\\F25B\\\"}.fa-trademark:before{content:\\\"\\\\F25C\\\"}.fa-registered:before{content:\\\"\\\\F25D\\\"}.fa-creative-commons:before{content:\\\"\\\\F25E\\\"}.fa-gg:before{content:\\\"\\\\F260\\\"}.fa-gg-circle:before{content:\\\"\\\\F261\\\"}.fa-tripadvisor:before{content:\\\"\\\\F262\\\"}.fa-odnoklassniki:before{content:\\\"\\\\F263\\\"}.fa-odnoklassniki-square:before{content:\\\"\\\\F264\\\"}.fa-get-pocket:before{content:\\\"\\\\F265\\\"}.fa-wikipedia-w:before{content:\\\"\\\\F266\\\"}.fa-safari:before{content:\\\"\\\\F267\\\"}.fa-chrome:before{content:\\\"\\\\F268\\\"}.fa-firefox:before{content:\\\"\\\\F269\\\"}.fa-opera:before{content:\\\"\\\\F26A\\\"}.fa-internet-explorer:before{content:\\\"\\\\F26B\\\"}.fa-television:before,.fa-tv:before{content:\\\"\\\\F26C\\\"}.fa-contao:before{content:\\\"\\\\F26D\\\"}.fa-500px:before{content:\\\"\\\\F26E\\\"}.fa-amazon:before{content:\\\"\\\\F270\\\"}.fa-calendar-plus-o:before{content:\\\"\\\\F271\\\"}.fa-calendar-minus-o:before{content:\\\"\\\\F272\\\"}.fa-calendar-times-o:before{content:\\\"\\\\F273\\\"}.fa-calendar-check-o:before{content:\\\"\\\\F274\\\"}.fa-industry:before{content:\\\"\\\\F275\\\"}.fa-map-pin:before{content:\\\"\\\\F276\\\"}.fa-map-signs:before{content:\\\"\\\\F277\\\"}.fa-map-o:before{content:\\\"\\\\F278\\\"}.fa-map:before{content:\\\"\\\\F279\\\"}.fa-commenting:before{content:\\\"\\\\F27A\\\"}.fa-commenting-o:before{content:\\\"\\\\F27B\\\"}.fa-houzz:before{content:\\\"\\\\F27C\\\"}.fa-vimeo:before{content:\\\"\\\\F27D\\\"}.fa-black-tie:before{content:\\\"\\\\F27E\\\"}.fa-fonticons:before{content:\\\"\\\\F280\\\"}.fa-reddit-alien:before{content:\\\"\\\\F281\\\"}.fa-edge:before{content:\\\"\\\\F282\\\"}.fa-credit-card-alt:before{content:\\\"\\\\F283\\\"}.fa-codiepie:before{content:\\\"\\\\F284\\\"}.fa-modx:before{content:\\\"\\\\F285\\\"}.fa-fort-awesome:before{content:\\\"\\\\F286\\\"}.fa-usb:before{content:\\\"\\\\F287\\\"}.fa-product-hunt:before{content:\\\"\\\\F288\\\"}.fa-mixcloud:before{content:\\\"\\\\F289\\\"}.fa-scribd:before{content:\\\"\\\\F28A\\\"}.fa-pause-circle:before{content:\\\"\\\\F28B\\\"}.fa-pause-circle-o:before{content:\\\"\\\\F28C\\\"}.fa-stop-circle:before{content:\\\"\\\\F28D\\\"}.fa-stop-circle-o:before{content:\\\"\\\\F28E\\\"}.fa-shopping-bag:before{content:\\\"\\\\F290\\\"}.fa-shopping-basket:before{content:\\\"\\\\F291\\\"}.fa-hashtag:before{content:\\\"\\\\F292\\\"}.fa-bluetooth:before{content:\\\"\\\\F293\\\"}.fa-bluetooth-b:before{content:\\\"\\\\F294\\\"}.fa-percent:before{content:\\\"\\\\F295\\\"}\", \"\"]);\n\t\n\t// exports\n\n\n/***/ },\n/* 57 */\n/***/ function(module, exports) {\n\n\t/*\r\n\t\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\t\tAuthor Tobias Koppers @sokra\r\n\t*/\r\n\t// css base code, injected by the css-loader\r\n\tmodule.exports = function() {\r\n\t\tvar list = [];\r\n\t\r\n\t\t// return the list of modules as css string\r\n\t\tlist.toString = function toString() {\r\n\t\t\tvar result = [];\r\n\t\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\t\tvar item = this[i];\r\n\t\t\t\tif(item[2]) {\r\n\t\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.push(item[1]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result.join(\"\");\r\n\t\t};\r\n\t\r\n\t\t// import a list of modules into the list\r\n\t\tlist.i = function(modules, mediaQuery) {\r\n\t\t\tif(typeof modules === \"string\")\r\n\t\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\t\tvar alreadyImportedModules = {};\r\n\t\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\t\tvar id = this[i][0];\r\n\t\t\t\tif(typeof id === \"number\")\r\n\t\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t\t}\r\n\t\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\t\tvar item = modules[i];\r\n\t\t\t\t// skip already imported module\r\n\t\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlist.push(item);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn list;\r\n\t};\r\n\n\n/***/ },\n/* 58 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"fonts/fontawesome-webfont.eot\";\n\n/***/ },\n/* 59 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"fonts/fontawesome-webfont.eot\";\n\n/***/ },\n/* 60 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"fonts/fontawesome-webfont.woff2\";\n\n/***/ },\n/* 61 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"fonts/fontawesome-webfont.woff\";\n\n/***/ },\n/* 62 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"fonts/fontawesome-webfont.ttf\";\n\n/***/ },\n/* 63 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"fonts/fontawesome-webfont.svg\";\n\n/***/ },\n/* 64 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/*\r\n\t\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\t\tAuthor Tobias Koppers @sokra\r\n\t*/\r\n\tvar stylesInDom = {},\r\n\t\tmemoize = function(fn) {\r\n\t\t\tvar memo;\r\n\t\t\treturn function () {\r\n\t\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\r\n\t\t\t\treturn memo;\r\n\t\t\t};\r\n\t\t},\r\n\t\tisOldIE = memoize(function() {\r\n\t\t\treturn /msie [6-9]\\b/.test(window.navigator.userAgent.toLowerCase());\r\n\t\t}),\r\n\t\tgetHeadElement = memoize(function () {\r\n\t\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\r\n\t\t}),\r\n\t\tsingletonElement = null,\r\n\t\tsingletonCounter = 0,\r\n\t\tstyleElementsInsertedAtTop = [];\r\n\t\r\n\tmodule.exports = function(list, options) {\r\n\t\tif(false) {\r\n\t\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\r\n\t\t}\r\n\t\r\n\t\toptions = options || {};\r\n\t\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\r\n\t\t// tags it will allow on a page\r\n\t\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\r\n\t\r\n\t\t// By default, add <style> tags to the bottom of <head>.\r\n\t\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\r\n\t\r\n\t\tvar styles = listToStyles(list);\r\n\t\taddStylesToDom(styles, options);\r\n\t\r\n\t\treturn function update(newList) {\r\n\t\t\tvar mayRemove = [];\r\n\t\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\t\tvar item = styles[i];\r\n\t\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\t\tdomStyle.refs--;\r\n\t\t\t\tmayRemove.push(domStyle);\r\n\t\t\t}\r\n\t\t\tif(newList) {\r\n\t\t\t\tvar newStyles = listToStyles(newList);\r\n\t\t\t\taddStylesToDom(newStyles, options);\r\n\t\t\t}\r\n\t\t\tfor(var i = 0; i < mayRemove.length; i++) {\r\n\t\t\t\tvar domStyle = mayRemove[i];\r\n\t\t\t\tif(domStyle.refs === 0) {\r\n\t\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\r\n\t\t\t\t\t\tdomStyle.parts[j]();\r\n\t\t\t\t\tdelete stylesInDom[domStyle.id];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\t\r\n\tfunction addStylesToDom(styles, options) {\r\n\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\tvar item = styles[i];\r\n\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\tif(domStyle) {\r\n\t\t\t\tdomStyle.refs++;\r\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\r\n\t\t\t\t\tdomStyle.parts[j](item.parts[j]);\r\n\t\t\t\t}\r\n\t\t\t\tfor(; j < item.parts.length; j++) {\r\n\t\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar parts = [];\r\n\t\t\t\tfor(var j = 0; j < item.parts.length; j++) {\r\n\t\t\t\t\tparts.push(addStyle(item.parts[j], options));\r\n\t\t\t\t}\r\n\t\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction listToStyles(list) {\r\n\t\tvar styles = [];\r\n\t\tvar newStyles = {};\r\n\t\tfor(var i = 0; i < list.length; i++) {\r\n\t\t\tvar item = list[i];\r\n\t\t\tvar id = item[0];\r\n\t\t\tvar css = item[1];\r\n\t\t\tvar media = item[2];\r\n\t\t\tvar sourceMap = item[3];\r\n\t\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\r\n\t\t\tif(!newStyles[id])\r\n\t\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\r\n\t\t\telse\r\n\t\t\t\tnewStyles[id].parts.push(part);\r\n\t\t}\r\n\t\treturn styles;\r\n\t}\r\n\t\r\n\tfunction insertStyleElement(options, styleElement) {\r\n\t\tvar head = getHeadElement();\r\n\t\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\r\n\t\tif (options.insertAt === \"top\") {\r\n\t\t\tif(!lastStyleElementInsertedAtTop) {\r\n\t\t\t\thead.insertBefore(styleElement, head.firstChild);\r\n\t\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\r\n\t\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\r\n\t\t\t} else {\r\n\t\t\t\thead.appendChild(styleElement);\r\n\t\t\t}\r\n\t\t\tstyleElementsInsertedAtTop.push(styleElement);\r\n\t\t} else if (options.insertAt === \"bottom\") {\r\n\t\t\thead.appendChild(styleElement);\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction removeStyleElement(styleElement) {\r\n\t\tstyleElement.parentNode.removeChild(styleElement);\r\n\t\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\r\n\t\tif(idx >= 0) {\r\n\t\t\tstyleElementsInsertedAtTop.splice(idx, 1);\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction createStyleElement(options) {\r\n\t\tvar styleElement = document.createElement(\"style\");\r\n\t\tstyleElement.type = \"text/css\";\r\n\t\tinsertStyleElement(options, styleElement);\r\n\t\treturn styleElement;\r\n\t}\r\n\t\r\n\tfunction createLinkElement(options) {\r\n\t\tvar linkElement = document.createElement(\"link\");\r\n\t\tlinkElement.rel = \"stylesheet\";\r\n\t\tinsertStyleElement(options, linkElement);\r\n\t\treturn linkElement;\r\n\t}\r\n\t\r\n\tfunction addStyle(obj, options) {\r\n\t\tvar styleElement, update, remove;\r\n\t\r\n\t\tif (options.singleton) {\r\n\t\t\tvar styleIndex = singletonCounter++;\r\n\t\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\r\n\t\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\r\n\t\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\r\n\t\t} else if(obj.sourceMap &&\r\n\t\t\ttypeof URL === \"function\" &&\r\n\t\t\ttypeof URL.createObjectURL === \"function\" &&\r\n\t\t\ttypeof URL.revokeObjectURL === \"function\" &&\r\n\t\t\ttypeof Blob === \"function\" &&\r\n\t\t\ttypeof btoa === \"function\") {\r\n\t\t\tstyleElement = createLinkElement(options);\r\n\t\t\tupdate = updateLink.bind(null, styleElement);\r\n\t\t\tremove = function() {\r\n\t\t\t\tremoveStyleElement(styleElement);\r\n\t\t\t\tif(styleElement.href)\r\n\t\t\t\t\tURL.revokeObjectURL(styleElement.href);\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tstyleElement = createStyleElement(options);\r\n\t\t\tupdate = applyToTag.bind(null, styleElement);\r\n\t\t\tremove = function() {\r\n\t\t\t\tremoveStyleElement(styleElement);\r\n\t\t\t};\r\n\t\t}\r\n\t\r\n\t\tupdate(obj);\r\n\t\r\n\t\treturn function updateStyle(newObj) {\r\n\t\t\tif(newObj) {\r\n\t\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tupdate(obj = newObj);\r\n\t\t\t} else {\r\n\t\t\t\tremove();\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\t\r\n\tvar replaceText = (function () {\r\n\t\tvar textStore = [];\r\n\t\r\n\t\treturn function (index, replacement) {\r\n\t\t\ttextStore[index] = replacement;\r\n\t\t\treturn textStore.filter(Boolean).join('\\n');\r\n\t\t};\r\n\t})();\r\n\t\r\n\tfunction applyToSingletonTag(styleElement, index, remove, obj) {\r\n\t\tvar css = remove ? \"\" : obj.css;\r\n\t\r\n\t\tif (styleElement.styleSheet) {\r\n\t\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\r\n\t\t} else {\r\n\t\t\tvar cssNode = document.createTextNode(css);\r\n\t\t\tvar childNodes = styleElement.childNodes;\r\n\t\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\r\n\t\t\tif (childNodes.length) {\r\n\t\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\r\n\t\t\t} else {\r\n\t\t\t\tstyleElement.appendChild(cssNode);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction applyToTag(styleElement, obj) {\r\n\t\tvar css = obj.css;\r\n\t\tvar media = obj.media;\r\n\t\tvar sourceMap = obj.sourceMap;\r\n\t\r\n\t\tif(media) {\r\n\t\t\tstyleElement.setAttribute(\"media\", media)\r\n\t\t}\r\n\t\r\n\t\tif(styleElement.styleSheet) {\r\n\t\t\tstyleElement.styleSheet.cssText = css;\r\n\t\t} else {\r\n\t\t\twhile(styleElement.firstChild) {\r\n\t\t\t\tstyleElement.removeChild(styleElement.firstChild);\r\n\t\t\t}\r\n\t\t\tstyleElement.appendChild(document.createTextNode(css));\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction updateLink(linkElement, obj) {\r\n\t\tvar css = obj.css;\r\n\t\tvar media = obj.media;\r\n\t\tvar sourceMap = obj.sourceMap;\r\n\t\r\n\t\tif(sourceMap) {\r\n\t\t\t// http://stackoverflow.com/a/26603875\r\n\t\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\r\n\t\t}\r\n\t\r\n\t\tvar blob = new Blob([css], { type: \"text/css\" });\r\n\t\r\n\t\tvar oldSrc = linkElement.href;\r\n\t\r\n\t\tlinkElement.href = URL.createObjectURL(blob);\r\n\t\r\n\t\tif(oldSrc)\r\n\t\t\tURL.revokeObjectURL(oldSrc);\r\n\t}\r\n\n\n/***/ },\n/* 65 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\t\n\t// load the styles\n\tvar content = __webpack_require__(66);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(64)(content, {});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!./../../node_modules/css-loader/index.js!./style.css\", function() {\n\t\t\t\tvar newContent = require(\"!!./../../node_modules/css-loader/index.js!./style.css\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ },\n/* 66 */\n/***/ function(module, exports, __webpack_require__) {\n\n\texports = module.exports = __webpack_require__(57)();\n\t// imports\n\t\n\t\n\t// module\n\texports.push([module.id, \"body{color:#c5debf;background-color:#000;padding:0;margin:0;overflow:hidden}canvas#LIBRARY{width:100%;height:100%;display:block}label,p{font-size:14pt;margin:0;margin-bottom:5px}h1,h2,h3,label{color:#3cb371}p{color:#c5debf}a{color:#9582ff;font-size:14pt;text-decoration:none;cursor:pointer}table{width:100%}.uiPanel{cursor:default;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.block-ui-overlay,.ngdialog-content,.uiPanel{overflow:hidden;border-radius:20px;background:linear-gradient(180deg,rgba(50,50,50,.7) 0,rgba(0,0,0,.7))}.ngdialog-content{background:linear-gradient(180deg,rgba(50,50,50,.9) 0,rgba(0,0,0,.9))}.uiPanel{margin:10px;padding:15px}.block-ui-message{background-color:transparent;font-size:14px}.tooltip{position:absolute;top:0;left:0}.tooltip p{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:10pt}.inventory{position:absolute;top:0;right:0;width:330px;float:right}.inventory li{font-size:10pt;margin:0}.inventoryItem{background:linear-gradient(180deg,rgba(50,100,50,.5) 0,rgba(0,0,0,.5));border-radius:10px;padding:5px;white-space:nowrap;overflow:hidden}.selected{background:linear-gradient(180deg,rgba(14,179,35,.5) 0,rgba(0,0,0,.5))}.cover span.fa{float:right}.navigation{text-align:center}.search input{text-indent:25px!important;margin-bottom:5px}.search .fa-search{position:absolute;font-size:20px;color:grey}.welcomePage{position:absolute;left:0;top:0;width:50%;margin-left:25%}.welcomePage>p{text-align:justify}.welcomeControl{margin:30px;padding:10px;text-align:center;background-color:rgba(20,70,20,.4);cursor:pointer;border-radius:8px}.welcomeControl:hover{background-color:rgba(20,100,20,.4)}ul.loginProviders{text-align:center;margin-bottom:20px}ul.loginProviders>li{display:inline-block;cursor:pointer;background-color:rgba(20,70,20,.4)}ul.loginProviders>li:hover{background-color:rgba(20,100,20,.4)}ul.loginProviders>li>.fa{display:inline-block;width:50px;height:50px;line-height:50px;text-align:center;vertical-align:bottom;font-size:40px;margin:0}.registration>table{margin:10px 0}span.fa{color:#90ee90;cursor:default}span.fa:hover{color:lime}i.fa{margin:0 5px 0 0}.mainMenu{position:absolute;left:0;bottom:0}.submitButton{float:right;margin-left:20px}.submitButton>span.fa{margin-left:10px}.button{display:inline-block;padding:6px 12px;color:#90ee90;background-color:rgba(20,70,20,.4);border-radius:8px;cursor:pointer}.button:hover{background-color:rgba(20,100,20,.4)}input[type=email],input[type=text],textarea{display:block;font-size:large;width:100%;padding:0;border:none;outline:none;background:linear-gradient(180deg,rgba(0,0,0,.5) 0,rgba(50,50,50,.5));color:#c5debf;text-indent:5px}ul{margin:0;padding:0;cursor:default}ul li{margin:5px;padding:3px;list-style:none;border-radius:5px}ul.select li{cursor:pointer}ul.select li:hover:not(.selectedItem){background-color:rgba(20,50,20,.4)}ul.select li.selectedItem{background-color:rgba(0,100,0,.4)}.tools{position:absolute;bottom:0;right:0;text-align:center}.tools ul{margin-bottom:10px}.tools h3,.tools h4{margin:auto}.tools h4{width:200px;word-wrap:break-word}.tools .sub{display:block;color:lime;font-size:small;font-weight:700}.previewImg{width:128px;height:128px;border:solid #2f4f4f;border-radius:30px;float:right}ul.pagination>li{display:inline;margin:0}input.ng-invalid,textarea.ng-invalid,vb-select.ng-invalid ul{border:thin solid red}.ngdialog h2{margin-top:0}.buttons{float:right;margin-top:15px}.alert{padding:15px;margin-bottom:20px;border:1px solid transparent;border-radius:4px;background:linear-gradient(180deg,rgba(50,50,50,.7) 0,rgba(0,0,0,.7))}.alert h4{margin-top:0;color:inherit}.alert .alert-link{font-weight:700}.alert>p,.alert>ul{margin-bottom:0}.alert>p+p{margin-top:5px}.alert-dismissable,.alert-dismissible{padding-right:35px}.alert-dismissable .close,.alert-dismissible .close{position:relative;top:-2px;right:-21px;color:inherit}.alert-success{color:#3c763d;background-color:#dff0d8;border-color:#d6e9c6}.alert-success hr{border-top-color:#c9e2b3}.alert-success .alert-link{color:#2b542c}.alert-info{color:#31708f;background-color:#d9edf7;border-color:#bce8f1}.alert-info hr{border-top-color:#a6e1ec}.alert-info .alert-link{color:#245269}.alert-warning{color:#8a6d3b;background-color:#fcf8e3;border-color:#faebcc}.alert-warning hr{border-top-color:#f7e1b5}.alert-warning .alert-link{color:#66512c}.alert-danger{color:#a94442;background-color:#f2dede;border-color:#ebccd1}.alert-danger hr{border-top-color:#e4b9c0}.alert-danger .alert-link{color:#843534}.close{float:right;font-size:21px;font-weight:700;line-height:1;color:#000;text-shadow:0 1px 0 #fff;filter:alpha(opacity=20);opacity:.2}.close:focus,.close:hover{color:#000;text-decoration:none;cursor:pointer;filter:alpha(opacity=50);opacity:.5}button.close{-webkit-appearance:none;padding:0;cursor:pointer;background:transparent;border:0}\", \"\"]);\n\t\n\t// exports\n\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** /js/bundle.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 2df1b2e6cac052be415f\n **/","'use strict';\n\nrequire('./services/main');\n\nrequire('./controllers/MainMenuCtrl');\n\nrequire('./controllers/BookEditCtrl');\n\nrequire('./controllers/CreateLibraryCtrl');\n\nrequire('./controllers/CreateSectionCtrl');\n\nrequire('./controllers/FeedbackCtrl');\n\nrequire('./controllers/InventoryCtrl');\n\nrequire('./controllers/LinkAccountCtrl');\n\nrequire('./controllers/NavigationCtrl');\n\nrequire('./controllers/RegistrationCtrl');\n\nrequire('./controllers/SelectLibraryCtrl');\n\nrequire('./controllers/ToolsCtrl');\n\nrequire('./controllers/TooltipCtrl');\n\nrequire('./controllers/WelcomeCtrl');\n\nvar _app = require('./app');\n\nvar _app2 = _interopRequireDefault(_app);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nrequire('font-awesome/css/font-awesome.min.css');\nrequire('../css/style.css');\n\nangular.element(document).ready(function () {\n  angular.bootstrap(document, [_app2.default.name], {\n    //strictDi: true\n  });\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/index.js\n **/","require('font-awesome/css/font-awesome.min.css');\r\nrequire('../css/style.css');\r\n\r\nimport './services/main';\r\n\r\nimport './controllers/MainMenuCtrl';\r\nimport './controllers/BookEditCtrl';\r\nimport './controllers/CreateLibraryCtrl';\r\nimport './controllers/CreateSectionCtrl';\r\nimport './controllers/FeedbackCtrl';\r\nimport './controllers/InventoryCtrl';\r\nimport './controllers/LinkAccountCtrl';\r\nimport './controllers/MainMenuCtrl';\r\nimport './controllers/NavigationCtrl';\r\nimport './controllers/RegistrationCtrl';\r\nimport './controllers/SelectLibraryCtrl';\r\nimport './controllers/ToolsCtrl';\r\nimport './controllers/TooltipCtrl';\r\nimport './controllers/WelcomeCtrl';\r\n\r\nimport appModule from './app';\r\n\r\nangular.element(document).ready(function () {\r\n  angular.bootstrap(document, [appModule.name], {\r\n    //strictDi: true\r\n  });\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/index.js\n **/","'use strict';\n\nrequire('../app');\n\nrequire('./camera');\n\nrequire('./controls');\n\nrequire('./user');\n\nrequire('./environment');\n\nrequire('./navigation');\n\nrequire('./ui/tools');\n\nrequire('./ui/userData');\n\nrequire('./ui/block');\n\nrequire('./scene/locator');\n\nangular.module('VirtualBookshelf').factory('main', function ($log, $q, camera, controls, user, environment, tools, navigation, userData, block, locator) {\n\tvar canvas;\n\tvar renderer;\n\n\tvar main = {};\n\n\tmain.start = function () {\n\t\tif (Detector.webgl) {\n\t\t\tinit();\n\t\t\tcontrols.init();\n\n\t\t\tblock.global.start();\n\t\t\tuser.load().then(function () {\n\t\t\t\treturn $q.all([environment.loadLibrary(user.getLibrary() || 1), userData.load()]);\n\t\t\t}).catch(function (error) {\n\t\t\t\t$log.error(error);\n\t\t\t\t//TODO: show error message\n\t\t\t}).finally(function () {\n\t\t\t\tlocator.centerObject(camera.object);\n\t\t\t\tenvironment.setLoaded(true);\n\t\t\t\tstartRenderLoop();\n\t\t\t\tblock.global.stop();\n\t\t\t});\n\t\t} else {\n\t\t\t// Detector.addGetWebGLMessage();\n\t\t}\n\t};\n\n\tvar init = function init() {\n\t\tvar winResize;\n\t\tvar width = window.innerWidth;\n\t\tvar height = window.innerHeight;\n\n\t\tcanvas = document.getElementById(environment.LIBRARY_CANVAS_ID);\n\t\trenderer = new THREE.WebGLRenderer({ canvas: canvas ? canvas : undefined, antialias: true });\n\t\trenderer.setSize(width, height);\n\t\twinResize = new THREEx.WindowResize(renderer, camera.camera);\n\n\t\tenvironment.scene = new THREE.Scene();\n\t\tenvironment.scene.fog = new THREE.Fog(0x000000, 4, 7);\n\t};\n\n\tvar startRenderLoop = function startRenderLoop() {\n\t\trequestAnimationFrame(startRenderLoop);\n\n\t\tcontrols.update();\n\t\tnavigation.update();\n\t\ttools.update();\n\n\t\trenderer.render(environment.scene, camera.camera);\n\t};\n\n\treturn main;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/main.js\n **/","import '../app';\r\n\r\nimport './camera';\r\nimport './controls';\r\nimport './user';\r\nimport './environment';\r\nimport './navigation';\r\nimport './ui/tools';\r\nimport './ui/userData';\r\nimport './ui/block';\r\nimport './scene/locator';\r\n\r\nangular.module('VirtualBookshelf')\r\n.factory('main', function ($log, $q, camera, controls, user, environment, tools, navigation, userData, block, locator) {\t\r\n\tvar canvas;\r\n\tvar renderer;\r\n\t\r\n\tvar main = {};\r\n\r\n\tmain.start = function() {\r\n\t\tif(Detector.webgl) {\r\n\t\t\tinit();\r\n\t\t\tcontrols.init();\r\n\r\n\t\t\tblock.global.start();\r\n\t\t\tuser.load().then(function () {\r\n\t\t\t\treturn $q.all([environment.loadLibrary(user.getLibrary() || 1), userData.load()]);\r\n\t\t\t}).catch(function (error) {\r\n\t\t\t\t$log.error(error);\r\n\t\t\t\t//TODO: show error message  \r\n\t\t\t}).finally(function () {\r\n\t\t\t\tlocator.centerObject(camera.object);\r\n\t\t\t\tenvironment.setLoaded(true);\r\n\t\t\t\tstartRenderLoop();\r\n\t\t\t\tblock.global.stop();\r\n\t\t\t});\t\t\r\n\t\t} else {\r\n\t\t\t// Detector.addGetWebGLMessage();\r\n\t\t}\r\n\t};\r\n\r\n\tvar init = function() {\r\n\t\tvar winResize;\r\n\t\tvar width = window.innerWidth;\r\n\t\tvar height = window.innerHeight;\r\n\r\n\t\tcanvas = document.getElementById(environment.LIBRARY_CANVAS_ID);\r\n\t\trenderer = new THREE.WebGLRenderer({canvas: canvas ? canvas : undefined, antialias: true});\r\n\t\trenderer.setSize(width, height);\r\n\t\twinResize = new THREEx.WindowResize(renderer, camera.camera);\r\n\r\n\t\tenvironment.scene = new THREE.Scene();\r\n\t\tenvironment.scene.fog = new THREE.Fog(0x000000, 4, 7);\r\n\t};\r\n\r\n\tvar startRenderLoop = function() {\r\n\t\trequestAnimationFrame(startRenderLoop);\r\n\r\n\t\tcontrols.update();\r\n\t\tnavigation.update();\r\n\t\ttools.update();\r\n\t\t\r\n\t\trenderer.render(environment.scene, camera.camera);\r\n\t};\r\n\r\n\treturn main;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/main.js\n **/","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.default = angular.module('VirtualBookshelf', ['angular-growl', 'blockUI', 'ngDialog', 'angularUtils.directives.dirPagination']).config(function (growlProvider, blockUIConfig, paginationTemplateProvider) {\n\tgrowlProvider.globalTimeToLive(2000);\n\tgrowlProvider.globalPosition('top-left');\n\tgrowlProvider.globalDisableCountDown(true);\n\n\tblockUIConfig.delay = 0;\n\tblockUIConfig.autoBlock = false;\n\tblockUIConfig.autoInjectBodyBlock = false;\n\n\tpaginationTemplateProvider.setPath('/ui/dirPagination');\n}).run(function (main) {\n\tmain.start();\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app.js\n **/","export default angular.module('VirtualBookshelf', ['angular-growl', 'blockUI', 'ngDialog', 'angularUtils.directives.dirPagination'])\r\n.config(function (growlProvider, blockUIConfig, paginationTemplateProvider) {\r\n    growlProvider.globalTimeToLive(2000);\r\n    growlProvider.globalPosition('top-left');\r\n    growlProvider.globalDisableCountDown(true);\r\n\r\n\tblockUIConfig.delay = 0;\r\n\tblockUIConfig.autoBlock = false;\r\n\tblockUIConfig.autoInjectBodyBlock = false;\r\n\t\r\n    paginationTemplateProvider.setPath('/ui/dirPagination');\r\n}).run(function (main) {\r\n\tmain.start();\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/app.js\n **/","'use strict';\n\nrequire('./models/CameraObject');\n\nangular.module('VirtualBookshelf').factory('camera', function (CameraObject) {\n\tvar camera = {\n\t\tHEIGTH: 1.5,\n\t\tobject: new CameraObject(),\n\t\tsetParent: function setParent(parent) {\n\t\t\tparent.add(this.object);\n\t\t},\n\t\tgetPosition: function getPosition() {\n\t\t\treturn this.object.position;\n\t\t}\n\t};\n\n\tvar init = function init() {\n\t\tvar width = window.innerWidth;\n\t\tvar height = window.innerHeight;\n\n\t\tcamera.camera = new THREE.PerspectiveCamera(45, width / height, 0.01, 50);\n\t\tcamera.object.position.set(0, camera.HEIGTH, 0);\n\t\tcamera.object.rotation.order = 'YXZ';\n\n\t\tvar candle = new THREE.PointLight(0x665555, 1.6, 10);\n\t\tcandle.position.set(0, 0, 0);\n\n\t\tcamera.object.add(candle);\n\t\tcamera.object.add(camera.camera);\n\t};\n\n\tcamera.rotate = function (x, y) {\n\t\tvar newX = this.object.rotation.x + y * 0.0001 || 0;\n\t\tvar newY = this.object.rotation.y + x * 0.0001 || 0;\n\n\t\tif (newX < 1.57 && newX > -1.57) {\n\t\t\tthis.object.rotation.x = newX;\n\t\t}\n\n\t\tthis.object.rotation.y = newY;\n\t};\n\n\tcamera.go = function (speed) {\n\t\tvar direction = this.getVector();\n\t\tvar newPosition = this.object.position.clone();\n\t\tnewPosition.add(direction.multiplyScalar(speed));\n\n\t\tthis.object.move(newPosition);\n\t};\n\n\tcamera.getVector = function () {\n\t\tvar vector = new THREE.Vector3(0, 0, -1);\n\n\t\treturn vector.applyEuler(this.object.rotation);\n\t};\n\n\tinit();\n\n\treturn camera;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/camera.js\n **/","import './models/CameraObject';\r\n\r\nangular.module('VirtualBookshelf')\r\n.factory('camera', function (CameraObject) {\r\n\tvar camera = {\r\n\t\tHEIGTH: 1.5,\r\n\t\tobject: new CameraObject(),\r\n\t\tsetParent: function(parent) {\r\n\t\t\tparent.add(this.object);\r\n\t\t},\r\n\t\tgetPosition: function() {\r\n\t\t\treturn this.object.position;\r\n\t\t}\r\n\t};\r\n\r\n\tvar init = function() {\r\n\t\tvar width = window.innerWidth;\r\n\t\tvar height = window.innerHeight;\r\n\t\t\r\n\t\tcamera.camera = new THREE.PerspectiveCamera(45, width / height, 0.01, 50);\r\n\t\tcamera.object.position.set(0, camera.HEIGTH, 0);\r\n\t\tcamera.object.rotation.order = 'YXZ';\r\n\r\n\t\tvar candle = new THREE.PointLight(0x665555, 1.6, 10);\r\n\t\tcandle.position.set(0, 0, 0);\r\n\r\n\t\tcamera.object.add(candle);\r\n\t\tcamera.object.add(camera.camera);\r\n\t};\r\n\r\n\tcamera.rotate = function(x, y) {\r\n\t\tvar newX = this.object.rotation.x + y * 0.0001 || 0;\r\n\t\tvar newY = this.object.rotation.y + x * 0.0001 || 0;\r\n\r\n\t\tif(newX < 1.57 && newX > -1.57) {\t\r\n\t\t\tthis.object.rotation.x = newX;\r\n\t\t}\r\n\r\n\t\tthis.object.rotation.y = newY;\r\n\t};\r\n\r\n\tcamera.go = function(speed) {\r\n\t\tvar direction = this.getVector();\r\n\t\tvar newPosition = this.object.position.clone();\r\n\t\tnewPosition.add(direction.multiplyScalar(speed));\r\n\r\n\t\tthis.object.move(newPosition);\r\n\t};\r\n\r\n\tcamera.getVector = function() {\r\n\t\tvar vector = new THREE.Vector3(0, 0, -1);\r\n\r\n\t\treturn vector.applyEuler(this.object.rotation);\r\n\t};\r\n\r\n\tinit();\r\n\r\n\treturn camera;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/camera.js\n **/","'use strict';\n\nrequire('./BaseObject');\n\nrequire('./subclassOf');\n\nangular.module('VirtualBookshelf').factory('CameraObject', function (BaseObject, subclassOf) {\n\tvar CameraObject = function CameraObject() {\n\t\tvar geometry = new THREE.Geometry();\n\t\tgeometry.boundingBox = new THREE.Box3(new THREE.Vector3(-0.1, -1, -0.1), new THREE.Vector3(0.1, 1, 0.1));\n\n\t\tBaseObject.call(this, null, geometry);\n\t};\n\n\tCameraObject.prototype = subclassOf(BaseObject);\n\n\tCameraObject.prototype.updateBoundingBox = function () {\n\t\tvar radius = {\n\t\t\tx: this.geometry.boundingBox.max.x,\n\t\t\ty: this.geometry.boundingBox.max.y,\n\t\t\tz: this.geometry.boundingBox.max.z\n\t\t};\n\n\t\tthis.boundingBox = {\n\t\t\tradius: radius,\n\t\t\tcenter: this.position //TODO: needs center of section in parent or world coordinates\n\t\t};\n\t};\n\n\treturn CameraObject;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/models/CameraObject.js\n **/","import './BaseObject';\r\nimport './subclassOf';\r\n\r\nangular.module('VirtualBookshelf')\r\n.factory('CameraObject', function (BaseObject, subclassOf) {\r\n\tvar CameraObject = function() {\r\n\t\tvar geometry = new THREE.Geometry();\r\n\t\tgeometry.boundingBox = new THREE.Box3(new THREE.Vector3(-0.1, -1, -0.1), new THREE.Vector3(0.1, 1, 0.1));\r\n\r\n\t\tBaseObject.call(this, null, geometry);\r\n\t};\r\n\r\n\tCameraObject.prototype = subclassOf(BaseObject);\r\n\t\r\n\tCameraObject.prototype.updateBoundingBox = function() {\r\n\t\tvar radius = {\r\n\t\t\tx: this.geometry.boundingBox.max.x, \r\n\t\t\ty: this.geometry.boundingBox.max.y, \r\n\t\t\tz: this.geometry.boundingBox.max.z\r\n\t\t};\r\n\r\n\t\tthis.boundingBox = {\r\n\t\t\tradius: radius,\r\n\t\t\tcenter: this.position //TODO: needs center of section in parent or world coordinates\r\n\t\t};\r\n\t};\r\n\r\n\treturn CameraObject;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/models/CameraObject.js\n **/","'use strict';\n\nangular.module('VirtualBookshelf').factory('BaseObject', function (subclassOf) {\n\tvar BaseObject = function BaseObject(dataObject, geometry, material) {\n\t\tTHREE.Mesh.call(this, geometry, material);\n\n\t\tthis.dataObject = dataObject || {};\n\t\tthis.rotation.order = 'XYZ';\n\t\tthis.setDtoTransformations();\n\t};\n\n\tBaseObject.prototype = subclassOf(THREE.Mesh);\n\n\tBaseObject.prototype.getType = function () {\n\t\treturn this.vbType;\n\t};\n\n\tBaseObject.prototype.getId = function () {\n\t\treturn this.dataObject && this.dataObject.id;\n\t};\n\n\tBaseObject.prototype.setDtoTransformations = function () {\n\t\tthis.position.setX(this.dataObject.pos_x || 0);\n\t\tthis.position.setY(this.dataObject.pos_y || 0);\n\t\tthis.position.setZ(this.dataObject.pos_z || 0);\n\n\t\tif (this.dataObject.rotation) this.rotation.fromArray(this.dataObject.rotation.map(Number));\n\n\t\tthis.updateBoundingBox();\n\t};\n\n\tBaseObject.prototype.isOutOfParrent = function () {\n\t\treturn Math.abs(this.boundingBox.center.x - this.parent.boundingBox.center.x) > this.parent.boundingBox.radius.x - this.boundingBox.radius.x || Math.abs(this.boundingBox.center.z - this.parent.boundingBox.center.z) > this.parent.boundingBox.radius.z - this.boundingBox.radius.z;\n\t};\n\n\tBaseObject.prototype.isCollided = function () {\n\t\tvar result, targets, target, i;\n\n\t\tthis.updateBoundingBox();\n\n\t\tresult = this.isOutOfParrent();\n\t\ttargets = this.parent.children;\n\n\t\tif (!result) {\n\t\t\tfor (i = targets.length - 1; i >= 0; i--) {\n\t\t\t\ttarget = targets[i].boundingBox;\n\n\t\t\t\tif (targets[i] === this || !target || // children without BB\n\t\t\t\tMath.abs(this.boundingBox.center.x - target.center.x) > this.boundingBox.radius.x + target.radius.x || Math.abs(this.boundingBox.center.y - target.center.y) > this.boundingBox.radius.y + target.radius.y || Math.abs(this.boundingBox.center.z - target.center.z) > this.boundingBox.radius.z + target.radius.z) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tresult = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t};\n\n\tBaseObject.prototype.move = function (newPosition) {\n\t\tvar currentPosition, result;\n\n\t\tresult = false;\n\t\tcurrentPosition = this.position.clone();\n\n\t\tif (newPosition.x) {\n\t\t\tthis.position.setX(newPosition.x);\n\n\t\t\tif (this.isCollided()) {\n\t\t\t\tthis.position.setX(currentPosition.x);\n\t\t\t} else {\n\t\t\t\tresult = true;\n\t\t\t}\n\t\t}\n\n\t\tif (newPosition.z) {\n\t\t\tthis.position.setZ(newPosition.z);\n\n\t\t\tif (this.isCollided()) {\n\t\t\t\tthis.position.setZ(currentPosition.z);\n\t\t\t} else {\n\t\t\t\tresult = true;\n\t\t\t}\n\t\t}\n\n\t\tthis.changed = this.changed || result;\n\t\tthis.updateBoundingBox();\n\n\t\treturn result;\n\t};\n\n\tBaseObject.prototype.rotate = function (dX, dY, isDemo) {\n\t\tvar currentRotation = this.rotation.clone(),\n\t\t    result = false;\n\n\t\tif (dX) {\n\t\t\tthis.rotation.y += dX * 0.01;\n\n\t\t\tif (!isDemo && this.isCollided()) {\n\t\t\t\tthis.rotation.y = currentRotation.y;\n\t\t\t} else {\n\t\t\t\tresult = true;\n\t\t\t}\n\t\t}\n\n\t\tif (dY) {\n\t\t\tthis.rotation.x += dY * 0.01;\n\n\t\t\tif (!isDemo && this.isCollided()) {\n\t\t\t\tthis.rotation.x = currentRotation.x;\n\t\t\t} else {\n\t\t\t\tresult = true;\n\t\t\t}\n\t\t}\n\n\t\tthis.changed = this.changed || !isDemo && result;\n\t\tthis.updateBoundingBox();\n\t};\n\n\tBaseObject.prototype.updateBoundingBox = function () {\n\t\tvar boundingBox, radius, center;\n\n\t\tthis.updateMatrix();\n\t\tboundingBox = this.geometry.boundingBox.clone().applyMatrix4(this.matrix);\n\n\t\tradius = {\n\t\t\tx: (boundingBox.max.x - boundingBox.min.x) * 0.5,\n\t\t\ty: (boundingBox.max.y - boundingBox.min.y) * 0.5,\n\t\t\tz: (boundingBox.max.z - boundingBox.min.z) * 0.5\n\t\t};\n\n\t\tcenter = new THREE.Vector3();\n\t\tcenter.addVectors(boundingBox.min, boundingBox.max);\n\t\tcenter.multiplyScalar(0.5);\n\n\t\tthis.boundingBox = {\n\t\t\tradius: radius,\n\t\t\tcenter: center\n\t\t};\n\t};\n\n\tBaseObject.prototype.rollback = function () {\n\t\tthis.setDtoTransformations();\n\t};\n\n\treturn BaseObject;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/models/BaseObject.js\n **/","angular.module('VirtualBookshelf')\r\n.factory('BaseObject', function (subclassOf) {\r\n\tvar BaseObject = function(dataObject, geometry, material) {\r\n\t\tTHREE.Mesh.call(this, geometry, material);\r\n\r\n\t\tthis.dataObject = dataObject || {};\r\n\t\tthis.rotation.order = 'XYZ';\r\n\t\tthis.setDtoTransformations();\r\n\t};\r\n\t\r\n\tBaseObject.prototype = subclassOf(THREE.Mesh);\r\n\r\n\tBaseObject.prototype.getType = function() {\r\n\t\treturn this.vbType;\r\n\t};\r\n\r\n\tBaseObject.prototype.getId = function() {\r\n\t\treturn this.dataObject && this.dataObject.id;\r\n\t};\r\n\r\n\tBaseObject.prototype.setDtoTransformations = function() {\r\n\t\tthis.position.setX(this.dataObject.pos_x || 0);\r\n\t\tthis.position.setY(this.dataObject.pos_y || 0);\r\n\t\tthis.position.setZ(this.dataObject.pos_z || 0);\r\n\r\n\t\tif(this.dataObject.rotation) this.rotation.fromArray(this.dataObject.rotation.map(Number));\r\n\r\n\t\tthis.updateBoundingBox();\t\t\r\n\t};\r\n\r\n\tBaseObject.prototype.isOutOfParrent = function() {\r\n\t\treturn Math.abs(this.boundingBox.center.x - this.parent.boundingBox.center.x) > (this.parent.boundingBox.radius.x - this.boundingBox.radius.x) ||\r\n\t\t\t\tMath.abs(this.boundingBox.center.z - this.parent.boundingBox.center.z) > (this.parent.boundingBox.radius.z - this.boundingBox.radius.z);\r\n\t};\r\n\r\n\tBaseObject.prototype.isCollided = function() {\r\n\t\tvar\r\n\t\t\tresult,\r\n\t\t\ttargets,\r\n\t\t\ttarget,\r\n\t\t\ti;\r\n\r\n\t\tthis.updateBoundingBox();\r\n\r\n\t\tresult = this.isOutOfParrent();\r\n\t\ttargets = this.parent.children;\r\n\r\n\t\tif(!result) {\r\n\t\t\tfor(i = targets.length - 1; i >= 0; i--) {\r\n\t\t\t\ttarget = targets[i].boundingBox;\r\n\r\n\t\t\t\tif(targets[i] === this ||\r\n\t\t\t\t\t!target || // children without BB\r\n\t\t\t\t\t(Math.abs(this.boundingBox.center.x - target.center.x) > (this.boundingBox.radius.x + target.radius.x)) ||\r\n\t\t\t\t\t(Math.abs(this.boundingBox.center.y - target.center.y) > (this.boundingBox.radius.y + target.radius.y)) ||\r\n\t\t\t\t\t(Math.abs(this.boundingBox.center.z - target.center.z) > (this.boundingBox.radius.z + target.radius.z))) {\t\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t    \tresult = true;\t\t\r\n\t\t    \tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t};\r\n\r\n\tBaseObject.prototype.move = function(newPosition) {\r\n\t\tvar \r\n\t\t\tcurrentPosition,\r\n\t\t\tresult;\r\n\r\n\t\tresult = false;\r\n\t\tcurrentPosition = this.position.clone();\r\n\t\t\r\n\t\tif(newPosition.x) {\r\n\t\t\tthis.position.setX(newPosition.x);\r\n\r\n\t\t\tif(this.isCollided()) {\r\n\t\t\t\tthis.position.setX(currentPosition.x);\r\n\t\t\t} else {\r\n\t\t\t\tresult = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(newPosition.z) {\r\n\t\t\tthis.position.setZ(newPosition.z);\r\n\r\n\t\t\tif(this.isCollided()) {\r\n\t\t\t\tthis.position.setZ(currentPosition.z);\r\n\t\t\t} else {\r\n\t\t\t\tresult = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.changed = this.changed || result;\r\n\t\tthis.updateBoundingBox();\r\n\r\n\t\treturn result;\r\n\t};\r\n\r\n\tBaseObject.prototype.rotate = function(dX, dY, isDemo) {\r\n\t\tvar \r\n\t\t\tcurrentRotation = this.rotation.clone(),\r\n\t\t\tresult = false; \r\n\t\t\r\n\t\tif(dX) {\r\n\t\t\tthis.rotation.y += dX * 0.01;\r\n\r\n\t\t\tif(!isDemo && this.isCollided()) {\r\n\t\t\t\tthis.rotation.y = currentRotation.y;\r\n\t\t\t} else {\r\n\t\t\t\tresult = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(dY) {\r\n\t\t\tthis.rotation.x += dY * 0.01;\r\n\r\n\t\t\tif(!isDemo && this.isCollided()) {\r\n\t\t\t\tthis.rotation.x = currentRotation.x;\r\n\t\t\t} else {\r\n\t\t\t\tresult = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.changed = this.changed || (!isDemo && result);\r\n\t\tthis.updateBoundingBox();\r\n\t};\r\n\r\n\tBaseObject.prototype.updateBoundingBox = function() {\r\n\t\tvar\r\n\t\t\tboundingBox,\r\n\t\t\tradius,\r\n\t\t\tcenter;\r\n\r\n\t\tthis.updateMatrix();\r\n\t\tboundingBox = this.geometry.boundingBox.clone().applyMatrix4(this.matrix);\r\n\t\t\r\n\t\tradius = {\r\n\t\t\tx: (boundingBox.max.x - boundingBox.min.x) * 0.5,\r\n\t\t\ty: (boundingBox.max.y - boundingBox.min.y) * 0.5,\r\n\t\t\tz: (boundingBox.max.z - boundingBox.min.z) * 0.5\r\n\t\t};\r\n\r\n\t\tcenter = new THREE.Vector3();\r\n\t\tcenter.addVectors(boundingBox.min, boundingBox.max);\r\n\t\tcenter.multiplyScalar(0.5);\r\n\r\n\t\tthis.boundingBox = {\r\n\t\t\tradius: radius,\r\n\t\t\tcenter: center\r\n\t\t};\r\n\t};\r\n\r\n\tBaseObject.prototype.rollback = function() {\r\n\t\tthis.setDtoTransformations();\r\n\t};\r\n\r\n\treturn BaseObject;\t\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/models/BaseObject.js\n **/","'use strict';\n\nangular.module('VirtualBookshelf').factory('subclassOf', function () {\n\tfunction _subclassOf() {}\n\n\tfunction subclassOf(base) {\n\t\t_subclassOf.prototype = base.prototype;\n\t\treturn new _subclassOf();\n\t}\n\n\treturn subclassOf;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/models/subclassOf.js\n **/","angular.module('VirtualBookshelf')\r\n.factory('subclassOf', function () {\r\n\tfunction _subclassOf() {}\r\n\r\n\tfunction subclassOf(base) {\r\n\t    _subclassOf.prototype = base.prototype;\r\n\t    return new _subclassOf();\r\n\t}\r\n\r\n\treturn subclassOf;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/models/subclassOf.js\n **/","'use strict';\n\nrequire('./models/SelectorMeta');\n\nrequire('./models/BookObject');\n\nrequire('./models/ShelfObject');\n\nrequire('./models/SectionObject');\n\nrequire('./camera');\n\nrequire('./navigation');\n\nrequire('./environment');\n\nrequire('./mouse');\n\nrequire('./scene/selector');\n\nrequire('./scene/preview');\n\nrequire('./ui/block');\n\nrequire('./ui/tools');\n\nangular.module('VirtualBookshelf')\n/* \r\n * controls.js is a service for processing not UI(menus) events \r\n * like mouse, keyboard, touch or gestures.\r\n *\r\n * TODO: remove all busines logic from there and leave only\r\n * events functionality to make it more similar to usual controller\r\n */\n.factory('controls', function ($q, $log, $rootScope, SelectorMeta, BookObject, ShelfObject, SectionObject, camera, navigation, environment, mouse, selector, preview, block, tools) {\n\tvar controls = {};\n\n\tcontrols.init = function () {\n\t\tcontrols.initListeners();\n\t};\n\n\tcontrols.initListeners = function () {\n\t\tdocument.addEventListener('mousedown', controls.onMouseDown, false);\n\t\tdocument.addEventListener('mouseup', controls.onMouseUp, false);\n\t\tdocument.addEventListener('mousemove', controls.onMouseMove, false);\n\t\tdocument.oncontextmenu = function () {\n\t\t\treturn false;\n\t\t};\n\t};\n\n\tcontrols.update = function () {\n\t\tif (!preview.isActive()) {\n\t\t\tif (mouse[3]) {\n\t\t\t\tcamera.rotate(mouse.longX, mouse.longY);\n\t\t\t}\n\t\t\tif (mouse[1] && mouse[3]) {\n\t\t\t\tcamera.go(navigation.BUTTONS_GO_SPEED);\n\t\t\t}\n\t\t}\n\t};\n\n\tcontrols.onMouseDown = function (event) {\n\t\tmouse.down(event);\n\n\t\tif (mouse.isCanvas() && mouse[1] && !mouse[3] && !preview.isActive()) {\n\t\t\tcontrols.selectObject();\n\n\t\t\tif (selector.placing) {\n\t\t\t\ttools.place();\n\t\t\t} else {\n\t\t\t\tselector.selectFocused();\n\t\t\t}\n\n\t\t\t$rootScope.$apply();\n\t\t}\n\t};\n\n\tcontrols.onMouseUp = function (event) {\n\t\tmouse.up(event);\n\n\t\tif (event.which === 1 && !preview.isActive()) {\n\t\t\tif (selector.isSelectedEditable()) {\n\t\t\t\tvar obj = selector.getSelectedObject();\n\n\t\t\t\tif (obj && obj.changed) {\n\t\t\t\t\tblock.global.start();\n\t\t\t\t\tobj.save().catch(function () {\n\t\t\t\t\t\tobj.rollback();\n\t\t\t\t\t}).finally(function () {\n\t\t\t\t\t\tblock.global.stop();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tcontrols.onMouseMove = function (event) {\n\t\tmouse.move(event);\n\n\t\tif (mouse.isCanvas() && !preview.isActive()) {\n\t\t\tevent.preventDefault();\n\n\t\t\tif (mouse[1] && !mouse[3]) {\n\t\t\t\tcontrols.moveObject();\n\t\t\t} else {\n\t\t\t\tcontrols.selectObject();\n\t\t\t\t$rootScope.$apply();\n\t\t\t}\n\t\t}\n\t};\n\n\t//****\n\n\tcontrols.selectObject = function () {\n\t\tvar intersected, object;\n\n\t\tif (mouse.isCanvas() && environment.library) {\n\t\t\t//TODO: optimize\n\t\t\tintersected = mouse.getIntersected(environment.library.children, true, [BookObject]);\n\t\t\tif (!intersected) {\n\t\t\t\tintersected = mouse.getIntersected(environment.library.children, true, [ShelfObject]);\n\t\t\t}\n\t\t\tif (!intersected) {\n\t\t\t\tintersected = mouse.getIntersected(environment.library.children, true, [SectionObject]);\n\t\t\t}\n\t\t\tif (intersected) {\n\t\t\t\tobject = intersected.object;\n\t\t\t}\n\n\t\t\tselector.focus(new SelectorMeta(object));\n\t\t}\n\t};\n\n\tcontrols.moveObject = function () {\n\t\tvar mouseVector;\n\t\tvar newPosition;\n\t\tvar parent;\n\t\tvar selectedObject;\n\n\t\tif (selector.isSelectedEditable()) {\n\t\t\tselectedObject = selector.getSelectedObject();\n\n\t\t\tif (selectedObject) {\n\t\t\t\tmouseVector = camera.getVector();\n\t\t\t\tnewPosition = selectedObject.position.clone();\n\t\t\t\tparent = selectedObject.parent;\n\t\t\t\tparent.localToWorld(newPosition);\n\n\t\t\t\tnewPosition.x -= (mouseVector.z * mouse.dX + mouseVector.x * mouse.dY) * 0.003;\n\t\t\t\tnewPosition.z -= (-mouseVector.x * mouse.dX + mouseVector.z * mouse.dY) * 0.003;\n\n\t\t\t\tparent.worldToLocal(newPosition);\n\t\t\t\tselectedObject.move(newPosition);\n\t\t\t}\n\t\t}\n\t};\n\n\treturn controls;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/controls.js\n **/","import './models/SelectorMeta';\r\nimport './models/BookObject';\r\nimport './models/ShelfObject';\r\nimport './models/SectionObject';\r\nimport './camera';\r\nimport './navigation';\r\nimport './environment';\r\nimport './mouse';\r\nimport './scene/selector';\r\nimport './scene/preview';\r\nimport './ui/block';\r\nimport './ui/tools';\r\n\r\nangular.module('VirtualBookshelf')\r\n/* \r\n * controls.js is a service for processing not UI(menus) events \r\n * like mouse, keyboard, touch or gestures.\r\n *\r\n * TODO: remove all busines logic from there and leave only\r\n * events functionality to make it more similar to usual controller\r\n */\r\n.factory('controls', function ($q, $log, $rootScope, SelectorMeta, BookObject, ShelfObject, SectionObject, camera, navigation, environment, mouse, selector, preview, block, tools) {\r\n\tvar controls = {};\r\n\r\n\tcontrols.init = function() {\r\n\t\tcontrols.initListeners();\r\n\t};\r\n\r\n\tcontrols.initListeners = function() {\r\n\t\tdocument.addEventListener('mousedown', controls.onMouseDown, false);\r\n\t\tdocument.addEventListener('mouseup', controls.onMouseUp, false);\r\n\t\tdocument.addEventListener('mousemove', controls.onMouseMove, false);\t\r\n\t\tdocument.oncontextmenu = function() {return false;};\r\n\t};\r\n\r\n\tcontrols.update = function() {\r\n\t\tif(!preview.isActive()) {\r\n\t\t\tif(mouse[3]) {\r\n\t\t\t\tcamera.rotate(mouse.longX, mouse.longY);\r\n\t\t\t}\r\n\t\t\tif(mouse[1] && mouse[3]) {\r\n\t\t\t\tcamera.go(navigation.BUTTONS_GO_SPEED);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tcontrols.onMouseDown = function(event) {\r\n\t\tmouse.down(event); \r\n\r\n\t\tif(mouse.isCanvas() && mouse[1] && !mouse[3] && !preview.isActive()) {\r\n\t\t\tcontrols.selectObject();\r\n\r\n\t\t\tif(selector.placing) {\r\n\t\t\t\ttools.place();\r\n\t\t\t} else {\r\n\t\t\t\tselector.selectFocused();\r\n\t\t\t}\r\n\r\n\t\t\t$rootScope.$apply();\r\n\t\t}\r\n\t};\r\n\r\n\tcontrols.onMouseUp = function(event) {\r\n\t\tmouse.up(event);\r\n\t\t\r\n\t\tif(event.which === 1 && !preview.isActive()) {\r\n\t\t\tif(selector.isSelectedEditable()) {\r\n\t\t\t\tvar obj = selector.getSelectedObject();\r\n\r\n\t\t\t\tif(obj && obj.changed) {\r\n\t\t\t\t\tblock.global.start();\r\n\t\t\t\t\tobj.save().catch(function () {\r\n\t\t\t\t\t\tobj.rollback();\r\n\t\t\t\t\t}).finally(function () {\r\n\t\t\t\t\t\tblock.global.stop();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tcontrols.onMouseMove = function(event) {\r\n\t\tmouse.move(event);\r\n\r\n\t\tif(mouse.isCanvas() && !preview.isActive()) {\r\n\t\t\tevent.preventDefault();\r\n\r\n\t\t\tif(mouse[1] && !mouse[3]) {\t\t\r\n\t\t\t\tcontrols.moveObject();\r\n\t\t\t} else {\r\n\t\t\t\tcontrols.selectObject();\r\n\t\t\t\t$rootScope.$apply();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t//****\r\n\r\n\tcontrols.selectObject = function() {\r\n\t\tvar\r\n\t\t\tintersected,\r\n\t\t\tobject;\r\n\r\n\t\tif(mouse.isCanvas() && environment.library) {\r\n\t\t\t//TODO: optimize\r\n\t\t\tintersected = mouse.getIntersected(environment.library.children, true, [BookObject]);\r\n\t\t\tif(!intersected) {\r\n\t\t\t\tintersected = mouse.getIntersected(environment.library.children, true, [ShelfObject]);\r\n\t\t\t}\r\n\t\t\tif(!intersected) {\r\n\t\t\t\tintersected = mouse.getIntersected(environment.library.children, true, [SectionObject]);\r\n\t\t\t}\r\n\t\t\tif(intersected) {\r\n\t\t\t\tobject = intersected.object;\r\n\t\t\t}\r\n\r\n\t\t\tselector.focus(new SelectorMeta(object));\r\n\t\t}\r\n\t};\r\n\r\n\tcontrols.moveObject = function() {\r\n\t\tvar mouseVector;\r\n\t\tvar newPosition;\r\n\t\tvar parent;\r\n\t\tvar selectedObject;\r\n\r\n\t\tif(selector.isSelectedEditable()) {\r\n\t\t\tselectedObject = selector.getSelectedObject();\r\n\r\n\t\t\tif(selectedObject) {\r\n\t\t\t\tmouseVector = camera.getVector();\t\r\n\t\t\t\tnewPosition = selectedObject.position.clone();\r\n\t\t\t\tparent = selectedObject.parent;\r\n\t\t\t\tparent.localToWorld(newPosition);\r\n\r\n\t\t\t\tnewPosition.x -= (mouseVector.z * mouse.dX + mouseVector.x * mouse.dY) * 0.003;\r\n\t\t\t\tnewPosition.z -= (-mouseVector.x * mouse.dX + mouseVector.z * mouse.dY) * 0.003;\r\n\r\n\t\t\t\tparent.worldToLocal(newPosition);\r\n\t\t\t\tselectedObject.move(newPosition);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\treturn controls;\t\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/controls.js\n **/","'use strict';\n\nangular.module('VirtualBookshelf').factory('SelectorMeta', function () {\n\tvar SelectorMeta = function SelectorMeta(selectedObject) {\n\t\tif (selectedObject) {\n\t\t\tthis.id = selectedObject.getId();\n\t\t\tthis.parentId = selectedObject.parent.getId();\n\t\t\tthis.type = selectedObject.getType();\n\t\t}\n\t};\n\n\tSelectorMeta.prototype.isEmpty = function () {\n\t\treturn !this.id;\n\t};\n\n\tSelectorMeta.prototype.equals = function (meta) {\n\t\treturn !(!meta || meta.id !== this.id || meta.parentId !== this.parentId || meta.type !== this.type);\n\t};\n\n\treturn SelectorMeta;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/models/SelectorMeta.js\n **/","angular.module('VirtualBookshelf')\r\n.factory('SelectorMeta', function () {\r\n\tvar SelectorMeta = function(selectedObject) {\r\n\t\tif(selectedObject) {\r\n\t\t\tthis.id = selectedObject.getId();\r\n\t\t\tthis.parentId = selectedObject.parent.getId();\r\n\t\t\tthis.type = selectedObject.getType();\r\n\t\t}\r\n\t};\r\n\r\n\tSelectorMeta.prototype.isEmpty = function() {\r\n\t\treturn !this.id;\r\n\t};\r\n\r\n\tSelectorMeta.prototype.equals = function(meta) {\r\n\t\treturn !(!meta || \r\n\t\t\t\tmeta.id !== this.id || \r\n\t\t\t\tmeta.parentId !== this.parentId || \r\n\t\t\t\tmeta.type !== this.type);\r\n\t};\r\n\t\r\n\treturn SelectorMeta;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/models/SelectorMeta.js\n **/","'use strict';\n\nrequire('./BaseObject');\n\nrequire('./subclassOf');\n\nrequire('../data');\n\nangular.module('VirtualBookshelf').factory('BookObject', function ($log, BaseObject, data, subclassOf) {\n\tvar BookObject = function BookObject(dataObject, geometry, material) {\n\t\tBaseObject.call(this, dataObject, geometry, material);\n\t};\n\n\tBookObject.TYPE = 'BookObject';\n\n\tBookObject.prototype = subclassOf(BaseObject);\n\tBookObject.prototype.vbType = BookObject.TYPE;\n\n\tBookObject.prototype.save = function () {\n\t\tvar scope = this;\n\t\tvar dto = {\n\t\t\tid: this.getId(),\n\t\t\tuserId: this.dataObject.userId,\n\t\t\tpos_x: this.position.x,\n\t\t\tpos_y: this.position.y,\n\t\t\tpos_z: this.position.z\n\t\t};\n\n\t\treturn data.postBook(dto).then(function (responseDto) {\n\t\t\tscope.dataObject = responseDto;\n\t\t\tscope.changed = false;\n\t\t});\n\t};\n\n\tBookObject.prototype.setParent = function (parent) {\n\t\tif (this.parent != parent) {\n\t\t\tif (parent) {\n\t\t\t\tparent.add(this);\n\t\t\t\tthis.dataObject.shelfId = parent.getId();\n\t\t\t\tthis.dataObject.sectionId = parent.parent.getId();\n\t\t\t} else {\n\t\t\t\tthis.parent.remove(this);\n\t\t\t\tthis.dataObject.shelfId = null;\n\t\t\t\tthis.dataObject.sectionId = null;\n\t\t\t}\n\t\t}\n\t};\n\n\treturn BookObject;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/models/BookObject.js\n **/","import './BaseObject';\r\nimport './subclassOf';\r\nimport '../data';\r\n\r\nangular.module('VirtualBookshelf')\r\n.factory('BookObject', function ($log, BaseObject, data, subclassOf) {\t\r\n\tvar BookObject = function(dataObject, geometry, material) {\r\n\t\tBaseObject.call(this, dataObject, geometry, material);\r\n\t};\r\n\r\n\tBookObject.TYPE = 'BookObject';\r\n\r\n\tBookObject.prototype = subclassOf(BaseObject);\r\n\tBookObject.prototype.vbType = BookObject.TYPE;\r\n\r\n\tBookObject.prototype.save = function() {\r\n\t\tvar scope = this;\r\n\t\tvar dto = {\r\n\t\t\tid: this.getId(),\r\n\t\t\tuserId: this.dataObject.userId,\r\n\t\t\tpos_x: this.position.x,\r\n\t\t\tpos_y: this.position.y,\r\n\t\t\tpos_z: this.position.z\r\n\t\t};\r\n\r\n\t\treturn data.postBook(dto).then(function (responseDto) {\r\n\t\t\tscope.dataObject = responseDto;\r\n\t\t\tscope.changed = false;\r\n\t\t});\r\n\t};\r\n\r\n\tBookObject.prototype.setParent = function(parent) {\r\n\t\tif(this.parent != parent) {\r\n\t\t\tif(parent) {\r\n\t\t\t\tparent.add(this);\r\n\t\t\t\tthis.dataObject.shelfId = parent.getId();\r\n\t\t\t\tthis.dataObject.sectionId = parent.parent.getId();\r\n\t\t\t} else {\r\n\t\t\t\tthis.parent.remove(this);\r\n\t\t\t\tthis.dataObject.shelfId = null;\r\n\t\t\t\tthis.dataObject.sectionId = null;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\treturn BookObject;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/models/BookObject.js\n **/","'use strict';\n\nangular.module('VirtualBookshelf').factory('data', function ($http, $q, $log) {\n\tvar data = {};\n\n\tdata.TEXTURE_RESOLUTION = 512;\n\tdata.COVER_MAX_Y = 394;\n\tdata.COVER_FACE_X = 296;\n\n\tdata.loadImage = function (url) {\n\t\tvar deffered = $q.defer();\n\t\tvar img = new Image();\n\n\t\timg.crossOrigin = '';\n\t\timg.src = url;\n\n\t\tif (img.complete) {\n\t\t\tdeffered.resolve(img);\n\t\t}\n\n\t\timg.onload = function () {\n\t\t\tdeffered.resolve(img);\n\t\t};\n\t\timg.onerror = function (error) {\n\t\t\tdeffered.reject(error);\n\t\t};\n\n\t\treturn deffered.promise;\n\t};\n\n\tdata.getCover = function (id) {\n\t\treturn $http.get('/cover/' + id).then(function (res) {\n\t\t\treturn res.data;\n\t\t});\n\t};\n\n\tdata.postCover = function (externalURL, tags) {\n\t\tvar data = {\n\t\t\turl: externalURL,\n\t\t\ttags: tags\n\t\t};\n\n\t\treturn $http.post('/cover', data).then(function (res) {\n\t\t\treturn res.data;\n\t\t});\n\t};\n\n\tdata.logout = function () {\n\t\treturn $http.post('/auth/logout');\n\t};\n\n\tdata.getUser = function () {\n\t\treturn $http.get('/user').then(function (res) {\n\t\t\treturn res.data;\n\t\t}).catch(function () {\n\t\t\treturn null;\n\t\t});\n\t};\n\n\tdata.putUser = function (dto) {\n\t\treturn $http.put('/user', dto);\n\t};\n\n\tdata.deleteUser = function (id) {\n\t\treturn $http.delete('/user/' + id);\n\t};\n\n\tdata.getUserBooks = function (userId) {\n\t\treturn $http.get('/freeBooks/' + userId).then(function (res) {\n\t\t\treturn res.data;\n\t\t});\n\t};\n\n\tdata.postBook = function (book) {\n\t\treturn $http.post('/book', book).then(function (res) {\n\t\t\treturn res.data;\n\t\t});\n\t};\n\n\tdata.deleteBook = function (id) {\n\t\treturn $http({\n\t\t\tmethod: 'DELETE',\n\t\t\turl: '/book/' + id\n\t\t});\n\t};\n\n\tdata.getUIData = function () {\n\t\treturn $http.get('/obj/data.json');\n\t};\n\n\tdata.getLibraries = function () {\n\t\treturn $http.get('/libraries').then(function (res) {\n\t\t\treturn res.data;\n\t\t});\n\t};\n\n\tdata.getLibrary = function (libraryId) {\n\t\treturn $http.get('/library/' + libraryId).then(function (res) {\n\t\t\treturn res.data;\n\t\t});\n\t};\n\n\tdata.postLibrary = function (libraryModel) {\n\t\treturn $http.post('/library/' + libraryModel).then(function (res) {\n\t\t\treturn res.data;\n\t\t});\n\t};\n\n\tdata.getSections = function (libraryId) {\n\t\treturn $http.get('/sections/' + libraryId).then(function (res) {\n\t\t\treturn res.data;\n\t\t});\n\t};\n\n\tdata.postSection = function (sectionData) {\n\t\treturn $http.post('/section', sectionData).then(function (res) {\n\t\t\treturn res.data;\n\t\t});\n\t};\n\n\tdata.deleteSection = function (id) {\n\t\treturn $http({\n\t\t\tmethod: 'DELETE',\n\t\t\turl: '/sections/' + id\n\t\t});\n\t};\n\n\tdata.loadGeometry = function (link) {\n\t\tvar deffered = $q.defer();\n\t\tvar jsonLoader = new THREE.JSONLoader();\n\n\t\t//TODO: found no way to reject\n\t\tjsonLoader.load(link, function (geometry) {\n\t\t\tgeometry.computeBoundingBox();\n\t\t\tdeffered.resolve(geometry);\n\t\t});\n\n\t\treturn deffered.promise;\n\t};\n\n\tdata.getData = function (url) {\n\t\treturn $http.get(url).then(function (res) {\n\t\t\treturn res.data;\n\t\t});\n\t};\n\n\tdata.postFeedback = function (dto) {\n\t\treturn $http.post('/feedback', dto);\n\t};\n\n\tdata.common = data.getUIData().then(function (res) {\n\t\treturn res.data;\n\t}).catch(function () {\n\t\t$log.error('data: loading common error');\n\t});\n\n\treturn data;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/data.js\n **/","angular.module('VirtualBookshelf')\r\n.factory('data', function ($http, $q, $log) {\r\n\tvar data = {};\r\n\r\n\tdata.TEXTURE_RESOLUTION = 512;\r\n\tdata.COVER_MAX_Y = 394;\r\n\tdata.COVER_FACE_X = 296;\r\n\r\n    data.loadImage = function(url) {\r\n        var deffered = $q.defer();\r\n        var img = new Image();\r\n        \r\n        img.crossOrigin = ''; \r\n        img.src = url;\r\n        \r\n        if(img.complete) {\r\n            deffered.resolve(img);\r\n        }\r\n\r\n        img.onload = function () {\r\n            deffered.resolve(img);\r\n        };\r\n        img.onerror = function (error) {\r\n            deffered.reject(error);\r\n        };\r\n\r\n        return deffered.promise; \r\n    };\r\n\r\n\tdata.getCover = function(id) {\r\n\t\treturn $http.get('/cover/' + id).then(function (res) {\r\n\t\t\treturn res.data;\r\n\t\t});\r\n\t};\r\n\r\n    data.postCover = function(externalURL, tags) {\r\n    \tvar data = {\r\n    \t\turl: externalURL,\r\n    \t\ttags: tags\r\n    \t};\r\n\r\n    \treturn $http.post('/cover', data).then(function (res) {\r\n    \t\treturn res.data;\r\n    \t});\r\n    };\r\n\r\n    data.logout = function() {\r\n    \treturn $http.post('/auth/logout');\r\n    };\r\n\r\n\tdata.getUser = function() {\r\n\t\treturn $http.get('/user').then(function (res) {\r\n\t\t\treturn res.data;\r\n\t\t}).catch(function () {\r\n\t\t\treturn null;\r\n\t\t});\r\n\t};\r\n\r\n\tdata.putUser = function(dto) {\r\n\t\treturn $http.put('/user', dto);\r\n\t};\r\n\r\n\tdata.deleteUser = function(id) {\r\n\t\treturn $http.delete('/user/' + id);\r\n\t};\r\n\r\n\tdata.getUserBooks = function(userId) {\r\n\t\treturn $http.get('/freeBooks/' + userId).then(function (res) {\r\n\t\t\treturn res.data;\r\n\t\t});\r\n\t};\r\n\r\n\tdata.postBook = function(book) {\r\n\t\treturn $http.post('/book', book).then(function (res) {\r\n\t\t\treturn res.data;\r\n\t\t});\r\n\t};\r\n\r\n\tdata.deleteBook = function(id) {\r\n\t\treturn $http({\r\n\t\t\tmethod: 'DELETE',\r\n\t\t\turl: '/book/' + id\r\n\t\t});\r\n\t};\r\n\r\n\tdata.getUIData = function() {\r\n\t\treturn $http.get('/obj/data.json');\r\n\t};\r\n\r\n\tdata.getLibraries = function() {\r\n\t\treturn $http.get('/libraries').then(function (res) {\r\n\t\t\treturn res.data;\r\n\t\t});\r\n\t};\r\n\r\n\tdata.getLibrary = function(libraryId) {\r\n\t\treturn $http.get('/library/' + libraryId).then(function (res) {\r\n\t\t\treturn res.data;\r\n\t\t});\r\n\t};\r\n\r\n\tdata.postLibrary = function(libraryModel) {\r\n        return $http.post('/library/' + libraryModel).then(function (res) {\r\n            return res.data;\r\n        });\r\n\t};\r\n\r\n\tdata.getSections = function(libraryId) {\r\n        return $http.get('/sections/' + libraryId).then(function (res) {\r\n            return res.data;\r\n        });\r\n\t};\r\n\r\n\tdata.postSection = function(sectionData) {\r\n        return $http.post('/section', sectionData).then(function (res) {\r\n        \treturn res.data;\r\n        });\r\n\t};\r\n\r\n\tdata.deleteSection = function(id) {\r\n\t\treturn $http({\r\n\t\t\tmethod: 'DELETE',\r\n\t\t\turl: '/sections/' + id\r\n\t\t});\r\n\t};\r\n\r\n\tdata.loadGeometry = function(link) {\r\n        var deffered = $q.defer();\r\n\t\tvar jsonLoader = new THREE.JSONLoader();\r\n\r\n        //TODO: found no way to reject\r\n\t\tjsonLoader.load(link, function (geometry) {\r\n\t\t\tgeometry.computeBoundingBox();\r\n\t\t\tdeffered.resolve(geometry);\r\n\t\t});\r\n\r\n        return deffered.promise;\r\n\t};\r\n\r\n\tdata.getData = function(url) {\r\n        return $http.get(url).then(function (res) {\r\n            return res.data;\r\n        });\r\n\t};\r\n\r\n\tdata.postFeedback = function(dto) {\r\n        return $http.post('/feedback', dto);\r\n\t};\r\n\r\n\tdata.common = data.getUIData().then(function (res) {\r\n\t\treturn res.data;\r\n\t}).catch(function () {\r\n\t\t$log.error('data: loading common error');\r\n\t});\r\n\r\n\treturn data;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/data.js\n **/","'use strict';\n\nangular.module('VirtualBookshelf').factory('ShelfObject', function (BaseObject, subclassOf) {\n\tvar ShelfObject = function ShelfObject(params) {\n\t\tvar size = params.size;\n\t\tvar geometry = new THREE.BoxGeometry(size[0], size[1], size[2]);\n\n\t\tgeometry.computeBoundingBox();\n\t\tBaseObject.call(this, params, geometry);\n\n\t\tthis.position.set(params.position[0], params.position[1], params.position[2]);\n\t\tthis.size = new THREE.Vector3(size[0], size[1], size[2]);\n\n\t\tthis.material.transparent = true;\n\t\tthis.material.opacity = 0;\n\t};\n\n\tShelfObject.TYPE = 'ShelfObject';\n\n\tShelfObject.prototype = subclassOf(BaseObject);\n\tShelfObject.prototype.vbType = ShelfObject.TYPE;\n\n\treturn ShelfObject;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/models/ShelfObject.js\n **/","angular.module('VirtualBookshelf')\r\n.factory('ShelfObject', function (BaseObject, subclassOf) {\r\n\tvar ShelfObject = function(params) {\r\n\t\tvar size = params.size;\t\r\n\t\tvar geometry = new THREE.BoxGeometry(size[0], size[1], size[2]);\r\n\r\n\t\tgeometry.computeBoundingBox();\r\n\t\tBaseObject.call(this, params, geometry);\r\n\r\n\t\tthis.position.set(params.position[0], params.position[1], params.position[2]);\r\n\t\tthis.size = new THREE.Vector3(size[0], size[1], size[2]);\r\n\t\t\r\n\t\tthis.material.transparent = true;\r\n\t\tthis.material.opacity = 0;\r\n\t};\r\n\r\n\tShelfObject.TYPE = 'ShelfObject';\r\n\r\n\tShelfObject.prototype = subclassOf(BaseObject);\r\n\tShelfObject.prototype.vbType = ShelfObject.TYPE;\r\n\r\n\treturn ShelfObject;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/models/ShelfObject.js\n **/","'use strict';\n\nangular.module('VirtualBookshelf').factory('SectionObject', function (BaseObject, ShelfObject, data, subclassOf) {\n\tvar SectionObject = function SectionObject(params, geometry, material) {\n\t\tBaseObject.call(this, params, geometry, material);\n\n\t\tthis.shelves = {};\n\t\tfor (var key in params.data.shelves) {\n\t\t\tthis.shelves[key] = new ShelfObject(params.data.shelves[key]);\n\t\t\tthis.add(this.shelves[key]);\n\t\t}\n\t};\n\n\tSectionObject.TYPE = 'SectionObject';\n\n\tSectionObject.prototype = subclassOf(BaseObject);\n\tSectionObject.prototype.vbType = SectionObject.TYPE;\n\n\tSectionObject.prototype.save = function () {\n\t\tvar scope = this;\n\t\tvar dto = {\n\t\t\tid: this.getId(),\n\t\t\tuserId: this.dataObject.userId,\n\t\t\tpos_x: this.position.x,\n\t\t\tpos_y: this.position.y,\n\t\t\tpos_z: this.position.z,\n\t\t\trotation: [this.rotation.x, this.rotation.y, this.rotation.z]\n\t\t};\n\n\t\treturn data.postSection(dto).then(function (responseDto) {\n\t\t\tscope.dataObject = responseDto;\n\t\t\tscope.changed = false;\n\t\t});\n\t};\n\n\tSectionObject.prototype.setParent = function (parent) {\n\t\tif (this.parent != parent) {\n\t\t\tif (parent) {\n\t\t\t\tparent.add(this);\n\t\t\t\tthis.dataObject.libraryId = parent.getId();\n\t\t\t} else {\n\t\t\t\tthis.parent.remove(this);\n\t\t\t\tthis.dataObject.libraryId = null;\n\t\t\t}\n\t\t}\n\t};\n\n\treturn SectionObject;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/models/SectionObject.js\n **/","angular.module('VirtualBookshelf')\r\n.factory('SectionObject', function (BaseObject, ShelfObject, data, subclassOf) {\r\n\tvar SectionObject = function(params, geometry, material) {\r\n\t\tBaseObject.call(this, params, geometry, material);\r\n\r\n\t\tthis.shelves = {};\r\n\t\tfor(var key in params.data.shelves) {\r\n\t\t\tthis.shelves[key] = new ShelfObject(params.data.shelves[key]); \r\n\t\t\tthis.add(this.shelves[key]);\r\n\t\t}\r\n\t};\r\n\r\n\tSectionObject.TYPE = 'SectionObject';\r\n\r\n\tSectionObject.prototype = subclassOf(BaseObject);\r\n\tSectionObject.prototype.vbType = SectionObject.TYPE;\r\n\r\n\tSectionObject.prototype.save = function() {\r\n\t\tvar scope = this;\r\n\t\tvar dto = {\r\n\t\t\tid: this.getId(),\r\n\t\t\tuserId: this.dataObject.userId,\r\n\t\t\tpos_x: this.position.x,\r\n\t\t\tpos_y: this.position.y,\r\n\t\t\tpos_z: this.position.z,\r\n\t\t\trotation: [this.rotation.x, this.rotation.y, this.rotation.z]\r\n\t\t};\r\n\r\n\t\treturn data.postSection(dto).then(function (responseDto) {\r\n\t\t\tscope.dataObject = responseDto;\r\n\t\t\tscope.changed = false;\r\n\t\t});\r\n\t};\r\n\r\n\tSectionObject.prototype.setParent = function(parent) {\r\n\t\tif(this.parent != parent) {\r\n\t\t\tif(parent) {\r\n\t\t\t\tparent.add(this);\r\n\t\t\t\tthis.dataObject.libraryId = parent.getId();\r\n\t\t\t} else {\r\n\t\t\t\tthis.parent.remove(this);\r\n\t\t\t\tthis.dataObject.libraryId = null;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\treturn SectionObject;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/models/SectionObject.js\n **/","'use strict';\n\nangular.module('VirtualBookshelf').factory('navigation', function (camera) {\n\tvar navigation = {};\n\n\tnavigation.BUTTONS_ROTATE_SPEED = 100;\n\tnavigation.BUTTONS_GO_SPEED = 0.02;\n\n\tvar state = {\n\t\tforward: false,\n\t\tbackward: false,\n\t\tleft: false,\n\t\tright: false\n\t};\n\n\tnavigation.goStop = function () {\n\t\tstate.forward = false;\n\t\tstate.backward = false;\n\t\tstate.left = false;\n\t\tstate.right = false;\n\t};\n\n\tnavigation.goForward = function () {\n\t\tstate.forward = true;\n\t};\n\n\tnavigation.goBackward = function () {\n\t\tstate.backward = true;\n\t};\n\n\tnavigation.goLeft = function () {\n\t\tstate.left = true;\n\t};\n\n\tnavigation.goRight = function () {\n\t\tstate.right = true;\n\t};\n\n\tnavigation.update = function () {\n\t\tif (state.forward) {\n\t\t\tcamera.go(navigation.BUTTONS_GO_SPEED);\n\t\t} else if (state.backward) {\n\t\t\tcamera.go(-navigation.BUTTONS_GO_SPEED);\n\t\t} else if (state.left) {\n\t\t\tcamera.rotate(navigation.BUTTONS_ROTATE_SPEED, 0);\n\t\t} else if (state.right) {\n\t\t\tcamera.rotate(-navigation.BUTTONS_ROTATE_SPEED, 0);\n\t\t}\n\t};\n\n\treturn navigation;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/navigation.js\n **/","angular.module('VirtualBookshelf')\r\n.factory('navigation', function (camera) {\r\n\tvar navigation = {};\r\n\r\n\tnavigation.BUTTONS_ROTATE_SPEED = 100;\r\n\tnavigation.BUTTONS_GO_SPEED = 0.02;\r\n\r\n\tvar state = {\r\n\t\tforward: false,\r\n\t\tbackward: false,\r\n\t\tleft: false,\r\n\t\tright: false\t\t\t\r\n\t};\r\n\r\n\tnavigation.goStop = function() {\r\n\t\tstate.forward = false;\r\n\t\tstate.backward = false;\r\n\t\tstate.left = false;\r\n\t\tstate.right = false;\r\n\t};\r\n\r\n\tnavigation.goForward = function() {\r\n\t\tstate.forward = true;\r\n\t};\r\n\r\n\tnavigation.goBackward = function() {\r\n\t\tstate.backward = true;\r\n\t};\r\n\r\n\tnavigation.goLeft = function() {\r\n\t\tstate.left = true;\r\n\t};\r\n\r\n\tnavigation.goRight = function() {\r\n\t\tstate.right = true;\r\n\t};\r\n\r\n\tnavigation.update = function() {\r\n\t\tif(state.forward) {\r\n\t\t\tcamera.go(navigation.BUTTONS_GO_SPEED);\r\n\t\t} else if(state.backward) {\r\n\t\t\tcamera.go(-navigation.BUTTONS_GO_SPEED);\r\n\t\t} else if(state.left) {\r\n\t\t\tcamera.rotate(navigation.BUTTONS_ROTATE_SPEED, 0);\r\n\t\t} else if(state.right) {\r\n\t\t\tcamera.rotate(-navigation.BUTTONS_ROTATE_SPEED, 0);\r\n\t\t}\r\n\t};\r\n\r\n\treturn navigation;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/navigation.js\n **/","'use strict';\n\nrequire('./models/LibraryObject');\n\nrequire('./models/SectionObject');\n\nrequire('./models/BookObject');\n\nrequire('./materials/BookMaterial');\n\nrequire('./data');\n\nrequire('./camera');\n\nrequire('./cache');\n\nangular.module('VirtualBookshelf').factory('environment', function ($q, $log, $window, LibraryObject, SectionObject, BookObject, BookMaterial, data, camera, cache) {\n\tvar environment = {};\n\n\tenvironment.CLEARANCE = 0.001;\n\tenvironment.LIBRARY_CANVAS_ID = 'LIBRARY';\n\n\tvar libraryDto = null;\n\tvar sections = {};\n\tvar books = {};\n\tvar loaded = false;\n\n\tenvironment.scene = null;\n\tenvironment.library = null;\n\n\tenvironment.loadLibrary = function (libraryId) {\n\t\tclearScene(); // inits some fields\n\n\t\tvar promise = data.getLibrary(libraryId).then(function (dto) {\n\t\t\tvar dict = parseLibraryDto(dto);\n\n\t\t\tsections = dict.sections;\n\t\t\tbooks = dict.books;\n\t\t\tlibraryDto = dto;\n\n\t\t\treturn initCache(libraryDto, dict.sections, dict.books);\n\t\t}).then(function () {\n\t\t\tcreateLibrary(libraryDto);\n\t\t\treturn createSections(sections);\n\t\t}).then(function () {\n\t\t\treturn createBooks(books);\n\t\t});\n\n\t\treturn promise;\n\t};\n\n\tenvironment.goToLibrary = function (id) {\n\t\tif (id) $window.location = '/' + id;\n\t};\n\n\tenvironment.setLoaded = function (value) {\n\t\tloaded = value;\n\t};\n\n\tenvironment.getLoaded = function () {\n\t\treturn loaded;\n\t};\n\n\tenvironment.getBook = function (bookId) {\n\t\treturn getDictObject(books, bookId);\n\t};\n\n\tenvironment.getSection = function (sectionId) {\n\t\treturn getDictObject(sections, sectionId);\n\t};\n\n\tenvironment.getShelf = function (sectionId, shelfId) {\n\t\tvar section = environment.getSection(sectionId);\n\t\tvar shelf = section && section.shelves[shelfId];\n\n\t\treturn shelf;\n\t};\n\n\tvar getDictObject = function getDictObject(dict, objectId) {\n\t\tvar dictItem = dict[objectId];\n\t\tvar dictObject = dictItem && dictItem.obj;\n\n\t\treturn dictObject;\n\t};\n\n\tenvironment.updateSection = function (dto) {\n\t\tvar promise;\n\n\t\tif (dto.libraryId == environment.library.getId()) {\n\t\t\tenvironment.removeSection(dto.id);\n\t\t\tpromise = createSection(dto);\n\t\t} else {\n\t\t\tenvironment.removeSection(dto.id);\n\t\t\tpromise = $q.when(dto);\n\t\t}\n\n\t\treturn promise;\n\t};\n\n\tenvironment.updateBook = function (dto) {\n\t\tvar promise;\n\t\tvar shelf = getBookShelf(dto);\n\n\t\tif (shelf) {\n\t\t\tenvironment.removeBook(dto.id);\n\t\t\tpromise = createBook(dto);\n\t\t} else {\n\t\t\tenvironment.removeBook(dto.id);\n\t\t\tpromise = $q.when(true);\n\t\t}\n\n\t\treturn promise;\n\t};\n\n\tenvironment.removeBook = function (id) {\n\t\tremoveObject(books, id);\n\t};\n\n\tenvironment.removeSection = function (id) {\n\t\tremoveObject(sections, id);\n\t};\n\n\tvar removeObject = function removeObject(dict, key) {\n\t\tvar dictItem = dict[key];\n\t\tif (dictItem) {\n\t\t\tdelete dict[key];\n\n\t\t\tif (dictItem.obj) {\n\t\t\t\tdictItem.obj.setParent(null);\n\t\t\t}\n\t\t}\n\t};\n\n\tvar initCache = function initCache(libraryDto, sectionsDict, booksDict) {\n\t\tvar libraryModel = libraryDto.model;\n\t\tvar sectionModels = {};\n\t\tvar bookModels = {};\n\t\tvar imageUrls = {};\n\n\t\tfor (var sectionId in sectionsDict) {\n\t\t\tvar sectionDto = sectionsDict[sectionId].dto;\n\t\t\tsectionModels[sectionDto.model] = true;\n\t\t}\n\n\t\tfor (var bookId in booksDict) {\n\t\t\tvar bookDto = booksDict[bookId].dto;\n\t\t\tbookModels[bookDto.model] = true;\n\n\t\t\tif (bookDto.cover) {\n\t\t\t\timageUrls[bookDto.cover.id] = bookDto.cover;\n\t\t\t}\n\t\t}\n\n\t\treturn cache.init(libraryModel, sectionModels, bookModels, imageUrls);\n\t};\n\n\tvar clearScene = function clearScene() {\n\t\tenvironment.library = null;\n\t\tsections = {};\n\t\tbooks = {};\n\n\t\twhile (environment.scene.children.length > 0) {\n\t\t\tif (environment.scene.children[0].dispose) {\n\t\t\t\tenvironment.scene.children[0].dispose();\n\t\t\t}\n\t\t\tenvironment.scene.remove(environment.scene.children[0]);\n\t\t}\n\t};\n\n\tvar parseLibraryDto = function parseLibraryDto(libraryDto) {\n\t\tvar result = {\n\t\t\tsections: {},\n\t\t\tbooks: {}\n\t\t};\n\n\t\tfor (var sectionIndex = libraryDto.sections.length - 1; sectionIndex >= 0; sectionIndex--) {\n\t\t\tvar sectionDto = libraryDto.sections[sectionIndex];\n\t\t\tresult.sections[sectionDto.id] = { dto: sectionDto };\n\n\t\t\tfor (var bookIndex = sectionDto.books.length - 1; bookIndex >= 0; bookIndex--) {\n\t\t\t\tvar bookDto = sectionDto.books[bookIndex];\n\t\t\t\tresult.books[bookDto.id] = { dto: bookDto };\n\t\t\t}\n\n\t\t\tdelete sectionDto.books;\n\t\t}\n\n\t\tdelete libraryDto.sections;\n\n\t\treturn result;\n\t};\n\n\tvar createLibrary = function createLibrary(libraryDto) {\n\t\tvar library = null;\n\t\tvar libraryCache = cache.getLibrary();\n\t\tvar texture = new THREE.Texture(libraryCache.mapImage);\n\t\tvar material = new THREE.MeshPhongMaterial({ map: texture });\n\n\t\ttexture.needsUpdate = true;\n\t\tlibrary = new LibraryObject(libraryDto, libraryCache.geometry, material);\n\n\t\tlibrary.add(new THREE.AmbientLight(0x333333));\n\t\tcamera.setParent(library);\n\n\t\tenvironment.scene.add(library);\n\t\tenvironment.library = library;\n\t};\n\n\tvar createSections = function createSections(sectionsDict) {\n\t\treturn createObjects(sectionsDict, createSection);\n\t};\n\n\tvar createBooks = function createBooks(booksDict) {\n\t\treturn createObjects(booksDict, createBook);\n\t};\n\n\tvar createObjects = function createObjects(dict, factory) {\n\t\tvar results = [];\n\t\tvar key;\n\n\t\tfor (key in dict) {\n\t\t\tresults.push(factory(dict[key].dto));\n\t\t}\n\n\t\treturn $q.all(results);\n\t};\n\n\tvar createSection = function createSection(sectionDto) {\n\t\tvar promise = cache.getSection(sectionDto.model).then(function (sectionCache) {\n\t\t\tvar texture = new THREE.Texture(sectionCache.mapImage);\n\t\t\tvar material = new THREE.MeshPhongMaterial({ map: texture });\n\t\t\tvar section;\n\n\t\t\ttexture.needsUpdate = true;\n\t\t\tsectionDto.data = sectionCache.data;\n\n\t\t\tsection = new SectionObject(sectionDto, sectionCache.geometry, material);\n\n\t\t\tenvironment.library.add(section);\n\t\t\taddToDict(sections, section);\n\n\t\t\treturn sectionDto;\n\t\t});\n\n\t\treturn promise;\n\t};\n\n\tvar createBook = function createBook(bookDto) {\n\t\tvar promises = {};\n\t\tvar promise;\n\n\t\tpromises.bookCache = cache.getBook(bookDto.model);\n\t\tif (bookDto.coverId) {\n\t\t\tpromises.coverCache = cache.getImage(bookDto.coverId);\n\t\t}\n\n\t\tpromise = $q.all(promises).then(function (results) {\n\t\t\tvar bookCache = results.bookCache;\n\t\t\tvar coverMapImage = results.coverCache && results.coverCache.image;\n\t\t\tvar material = new BookMaterial(bookCache.mapImage, bookCache.bumpMapImage, bookCache.specularMapImage, coverMapImage);\n\t\t\tvar book = new BookObject(bookDto, bookCache.geometry, material);\n\n\t\t\taddToDict(books, book);\n\t\t\tplaceBookOnShelf(book);\n\t\t});\n\n\t\treturn promise;\n\t};\n\n\tvar addToDict = function addToDict(dict, obj) {\n\t\tvar dictItem = {\n\t\t\tdto: obj.dataObject,\n\t\t\tobj: obj\n\t\t};\n\n\t\tdict[obj.getId()] = dictItem;\n\t};\n\n\tvar getBookShelf = function getBookShelf(bookDto) {\n\t\treturn environment.getShelf(bookDto.sectionId, bookDto.shelfId);\n\t};\n\n\tvar placeBookOnShelf = function placeBookOnShelf(book) {\n\t\tvar shelf = getBookShelf(book.dataObject);\n\t\tshelf.add(book);\n\t};\n\n\treturn environment;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/environment.js\n **/","import './models/LibraryObject';\r\nimport './models/SectionObject';\r\nimport './models/BookObject';\r\nimport './materials/BookMaterial';\r\nimport './data';\r\nimport './camera';\r\nimport './cache';\r\n\r\nangular.module('VirtualBookshelf')\r\n.factory('environment', function ($q, $log, $window, LibraryObject, SectionObject, BookObject, BookMaterial, data, camera, cache) {\r\n\tvar environment = {};\r\n\r\n\tenvironment.CLEARANCE = 0.001;\r\n\tenvironment.LIBRARY_CANVAS_ID = 'LIBRARY';\r\n\t \r\n\tvar libraryDto = null;\r\n\tvar sections = {};\r\n\tvar books = {};\r\n\tvar loaded = false;\r\n\r\n\tenvironment.scene = null;\r\n\tenvironment.library = null;\r\n\r\n\tenvironment.loadLibrary = function(libraryId) {\r\n\t\tclearScene(); // inits some fields\r\n\r\n\t\tvar promise = data.getLibrary(libraryId).then(function (dto) {\r\n\t\t\tvar dict = parseLibraryDto(dto);\r\n\t\t\t\r\n\t\t\tsections = dict.sections;\r\n\t\t\tbooks = dict.books;\r\n\t\t\tlibraryDto = dto;\r\n\r\n\t\t\treturn initCache(libraryDto, dict.sections, dict.books);\r\n\t\t}).then(function () {\r\n\t\t\tcreateLibrary(libraryDto);\r\n\t\t\treturn createSections(sections);\r\n\t\t}).then(function () {\r\n\t\t\treturn createBooks(books);\r\n\t\t});\r\n\r\n\t\treturn promise;\r\n\t};\r\n\r\n\tenvironment.goToLibrary = function(id) {\r\n\t\tif(id) $window.location = '/' + id;\r\n\t};\r\n\r\n\tenvironment.setLoaded = function(value) {\r\n\t\tloaded = value;\r\n\t};\r\n\r\n\tenvironment.getLoaded = function() {\r\n\t\treturn loaded;\r\n\t};\r\n\r\n\tenvironment.getBook = function(bookId) {\r\n\t\treturn getDictObject(books, bookId);\r\n\t};\r\n\r\n\tenvironment.getSection = function(sectionId) {\r\n\t\treturn getDictObject(sections, sectionId);\r\n\t};\r\n\r\n\tenvironment.getShelf = function(sectionId, shelfId) {\r\n\t\tvar section = environment.getSection(sectionId);\r\n\t\tvar shelf = section && section.shelves[shelfId];\r\n\r\n\t\treturn shelf;\r\n\t};\r\n\r\n\tvar getDictObject = function(dict, objectId) {\r\n\t\tvar dictItem = dict[objectId];\r\n\t\tvar dictObject = dictItem && dictItem.obj;\r\n\r\n\t\treturn dictObject;\r\n\t};\r\n\r\n\tenvironment.updateSection = function(dto) {\r\n\t\tvar promise;\r\n\r\n\t\tif(dto.libraryId == environment.library.getId()) {\r\n\t\t\tenvironment.removeSection(dto.id);\r\n\t\t\tpromise = createSection(dto);\r\n\t\t} else {\r\n\t\t\tenvironment.removeSection(dto.id);\r\n\t\t\tpromise = $q.when(dto);\r\n\t\t}\r\n\r\n\t\treturn promise;\t\r\n\t};\r\n\r\n\tenvironment.updateBook = function(dto) {\r\n\t\tvar promise;\r\n\t\tvar shelf = getBookShelf(dto);\r\n\r\n\t\tif(shelf) {\r\n\t\t\tenvironment.removeBook(dto.id);\r\n\t\t\tpromise = createBook(dto);\r\n\t\t} else {\r\n\t\t\tenvironment.removeBook(dto.id);\r\n\t\t\tpromise = $q.when(true);\r\n\t\t}\r\n\r\n\t\treturn promise;\r\n\t};\r\n\r\n\tenvironment.removeBook = function(id) {\r\n\t\tremoveObject(books, id);\r\n\t};\r\n\r\n\tenvironment.removeSection = function(id) {\r\n\t\tremoveObject(sections, id);\r\n\t};\r\n\r\n\tvar removeObject = function(dict, key) {\r\n\t\tvar dictItem = dict[key];\r\n\t\tif(dictItem) {\r\n\t\t\tdelete dict[key];\r\n\t\t\t\r\n\t\t\tif(dictItem.obj) {\r\n\t\t\t\tdictItem.obj.setParent(null);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tvar initCache = function(libraryDto, sectionsDict, booksDict) {\r\n\t\tvar libraryModel = libraryDto.model;\r\n\t\tvar sectionModels = {};\r\n\t\tvar bookModels = {};\r\n\t\tvar imageUrls = {};\r\n\r\n\t\tfor (var sectionId in sectionsDict) {\r\n\t\t\tvar sectionDto = sectionsDict[sectionId].dto;\r\n\t\t\tsectionModels[sectionDto.model] = true;\r\n\t\t}\r\n\r\n\t\tfor (var bookId in booksDict) {\r\n\t\t\tvar bookDto = booksDict[bookId].dto;\r\n\t\t\tbookModels[bookDto.model] = true;\r\n\r\n\t\t\tif(bookDto.cover) {\r\n\t\t\t\timageUrls[bookDto.cover.id] = bookDto.cover;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn cache.init(libraryModel, sectionModels, bookModels, imageUrls);\r\n\t};\r\n\r\n\tvar clearScene = function() {\r\n\t\tenvironment.library = null;\r\n\t\tsections = {};\r\n\t\tbooks = {};\r\n\r\n\t\twhile(environment.scene.children.length > 0) {\r\n\t\t\tif(environment.scene.children[0].dispose) {\r\n\t\t\t\tenvironment.scene.children[0].dispose();\r\n\t\t\t}\r\n\t\t\tenvironment.scene.remove(environment.scene.children[0]);\r\n\t\t}\r\n\t};\r\n\r\n\tvar parseLibraryDto = function(libraryDto) {\r\n\t\tvar result = {\r\n\t\t\tsections: {},\r\n\t\t\tbooks: {}\r\n\t\t};\r\n\r\n\t\tfor(var sectionIndex = libraryDto.sections.length - 1; sectionIndex >= 0; sectionIndex--) {\r\n\t\t\tvar sectionDto = libraryDto.sections[sectionIndex];\r\n\t\t\tresult.sections[sectionDto.id] = {dto: sectionDto};\r\n\r\n\t\t\tfor(var bookIndex = sectionDto.books.length - 1; bookIndex >= 0; bookIndex--) {\r\n\t\t\t\tvar bookDto = sectionDto.books[bookIndex];\r\n\t\t\t\tresult.books[bookDto.id] = {dto: bookDto};\r\n\t\t\t}\r\n\r\n\t\t\tdelete sectionDto.books;\r\n\t\t}\r\n\r\n\t\tdelete libraryDto.sections;\r\n\r\n\t\treturn result;\r\n\t};\r\n\r\n\tvar createLibrary = function(libraryDto) {\r\n\t\tvar library = null;\r\n\t\tvar libraryCache = cache.getLibrary();\r\n        var texture = new THREE.Texture(libraryCache.mapImage);\r\n        var material = new THREE.MeshPhongMaterial({map: texture});\r\n\r\n        texture.needsUpdate = true;\r\n\t\tlibrary = new LibraryObject(libraryDto, libraryCache.geometry, material);\r\n\r\n\t\tlibrary.add(new THREE.AmbientLight(0x333333));\r\n\t\tcamera.setParent(library);\r\n\t\t\r\n\t\tenvironment.scene.add(library);\r\n\t\tenvironment.library = library;\r\n\t};\r\n\r\n\tvar createSections = function(sectionsDict) {\r\n\t\treturn createObjects(sectionsDict, createSection);\r\n\t};\r\n\r\n\tvar createBooks = function(booksDict) {\r\n\t\treturn createObjects(booksDict, createBook);\r\n\t};\r\n\r\n\tvar createObjects = function(dict, factory) {\r\n\t\tvar results = [];\r\n\t\tvar key;\r\n\r\n\t\tfor(key in dict) {\r\n\t\t\tresults.push(factory(dict[key].dto));\r\n\t\t}\r\n\r\n\t\treturn $q.all(results);\r\n\t};\r\n\r\n\tvar createSection = function(sectionDto) {\r\n\t\tvar promise = cache.getSection(sectionDto.model).then(function (sectionCache) {\r\n\t        var texture = new THREE.Texture(sectionCache.mapImage);\r\n\t        var material = new THREE.MeshPhongMaterial({map: texture});\r\n\t        var section;\r\n\r\n\t        texture.needsUpdate = true;\r\n\t        sectionDto.data = sectionCache.data;\r\n\r\n\t        section = new SectionObject(sectionDto, sectionCache.geometry, material);\r\n\r\n\t\t\tenvironment.library.add(section);\r\n\t\t\taddToDict(sections, section);\r\n\r\n\t\t\treturn sectionDto;\r\n\t\t});\r\n\r\n\t\treturn promise;\r\n\t};\r\n\r\n\tvar createBook = function(bookDto) {\r\n\t\tvar promises = {};\r\n\t\tvar promise;\r\n\r\n\t\tpromises.bookCache = cache.getBook(bookDto.model);\r\n\t\tif(bookDto.coverId) {\r\n\t\t\tpromises.coverCache = cache.getImage(bookDto.coverId);\r\n\t\t}\r\n\r\n\t\tpromise = $q.all(promises).then(function (results) {\r\n\t\t\tvar bookCache = results.bookCache;\r\n\t\t\tvar coverMapImage = results.coverCache && results.coverCache.image;\r\n\t\t\tvar material = new BookMaterial(bookCache.mapImage, bookCache.bumpMapImage, bookCache.specularMapImage, coverMapImage);\r\n\t\t\tvar book = new BookObject(bookDto, bookCache.geometry, material);\r\n\r\n\t\t\taddToDict(books, book);\r\n\t\t\tplaceBookOnShelf(book);\r\n\t\t});\r\n\r\n\t\treturn promise;\r\n\t};\r\n\r\n\tvar addToDict = function(dict, obj) {\r\n\t\tvar dictItem = {\r\n\t\t\tdto: obj.dataObject,\r\n\t\t\tobj: obj\r\n\t\t};\r\n\r\n\t\tdict[obj.getId()] = dictItem;\r\n\t};\r\n\r\n\tvar getBookShelf = function(bookDto) {\r\n\t\treturn environment.getShelf(bookDto.sectionId, bookDto.shelfId);\r\n\t};\r\n\r\n\tvar placeBookOnShelf = function(book) {\r\n\t\tvar shelf = getBookShelf(book.dataObject);\r\n\t\tshelf.add(book);\r\n\t};\r\n\r\n\treturn environment;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/environment.js\n **/","'use strict';\n\nangular.module('VirtualBookshelf').factory('LibraryObject', function (BaseObject, subclassOf) {\n\tvar LibraryObject = function LibraryObject(params, geometry, material) {\n\t\tBaseObject.call(this, params, geometry, material);\n\t};\n\n\tLibraryObject.prototype = subclassOf(BaseObject);\n\n\treturn LibraryObject;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/models/LibraryObject.js\n **/","angular.module('VirtualBookshelf')\r\n.factory('LibraryObject', function (BaseObject, subclassOf) {\r\n\tvar LibraryObject = function(params, geometry, material) {\r\n\t\tBaseObject.call(this, params, geometry, material);\r\n\t};\r\n\r\n\tLibraryObject.prototype = subclassOf(BaseObject);\r\n\r\n\treturn LibraryObject;\t\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/models/LibraryObject.js\n **/","'use strict';\n\nangular.module('VirtualBookshelf').factory('BookMaterial', function () {\n\tvar BookMaterial = function BookMaterial(mapImage, bumpMapImage, specularMapImage, coverMapImage) {\n\t\tvar VERTEX_SHADER_ID = 'BookMaterialVertexShader';\n\t\tvar FRAGMENT_SHADER_ID = 'BookMaterialFragmentShader';\n\n\t\tvar vertexShader = document.getElementById(VERTEX_SHADER_ID).textContent;\n\t\tvar fragmentShader = document.getElementById(FRAGMENT_SHADER_ID).textContent;\n\n\t\tvar defines = {};\n\t\tvar uniforms;\n\t\tvar parameters;\n\n\t\tvar map;\n\t\tvar bumpMap;\n\t\tvar specularMap;\n\t\tvar coverMap;\n\n\t\tuniforms = THREE.UniformsUtils.merge([THREE.UniformsLib.common, THREE.UniformsLib.bump, THREE.UniformsLib.fog, THREE.UniformsLib.lights]);\n\n\t\tuniforms.shininess = { type: 'f', value: 30 };\n\t\tdefines.PHONG = true;\n\n\t\tif (mapImage) {\n\t\t\tmap = new THREE.Texture(mapImage);\n\t\t\tmap.needsUpdate = true;\n\t\t\tuniforms.map = { type: 't', value: map };\n\t\t\tthis.map = true;\n\t\t}\n\t\tif (bumpMapImage) {\n\t\t\tbumpMap = new THREE.Texture(bumpMapImage);\n\t\t\tbumpMap.needsUpdate = true;\n\t\t\tuniforms.bumpMap = { type: 't', value: bumpMap };\n\t\t\tuniforms.bumpScale.value = 0.005;\n\t\t\tthis.bumpMap = true;\n\t\t}\n\t\tif (specularMapImage) {\n\t\t\tspecularMap = new THREE.Texture(specularMapImage);\n\t\t\tspecularMap.needsUpdate = true;\n\t\t\tuniforms.specular = { type: 'c', value: new THREE.Color(0x555555) };\n\t\t\tuniforms.specularMap = { type: 't', value: specularMap };\n\t\t\tthis.specularMap = true;\n\t\t}\n\t\tif (coverMapImage) {\n\t\t\tcoverMap = new THREE.Texture(coverMapImage);\n\t\t\tcoverMap.needsUpdate = true;\n\t\t\tuniforms.coverMap = { type: 't', value: coverMap };\n\t\t\tdefines.USE_COVER = true;\n\t\t}\n\n\t\tparameters = {\n\t\t\tvertexShader: vertexShader,\n\t\t\tfragmentShader: fragmentShader,\n\t\t\tuniforms: uniforms,\n\t\t\tdefines: defines,\n\t\t\tlights: true,\n\t\t\tfog: true\n\t\t};\n\n\t\tTHREE.ShaderMaterial.call(this, parameters);\n\t};\n\n\tBookMaterial.prototype = Object.create(THREE.ShaderMaterial.prototype);\n\n\tBookMaterial.prototype.constructor = THREE.BookMaterial;\n\n\treturn BookMaterial;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/materials/BookMaterial.js\n **/","angular.module('VirtualBookshelf')\r\n.factory('BookMaterial', function () {\r\n\tvar BookMaterial = function(mapImage, bumpMapImage, specularMapImage, coverMapImage) {\r\n\t\tvar VERTEX_SHADER_ID = 'BookMaterialVertexShader';\r\n\t\tvar FRAGMENT_SHADER_ID = 'BookMaterialFragmentShader';\r\n\r\n\t\tvar vertexShader = document.getElementById(VERTEX_SHADER_ID).textContent;\r\n\t\tvar fragmentShader = document.getElementById(FRAGMENT_SHADER_ID).textContent;\r\n\r\n\t\tvar defines = {};\r\n\t\tvar uniforms;\r\n\t\tvar parameters;\r\n\r\n        var map;\r\n        var bumpMap;\r\n        var specularMap;\r\n        var coverMap;\r\n\t\t\r\n\t\tuniforms = THREE.UniformsUtils.merge([\r\n\t\t\tTHREE.UniformsLib.common,\r\n\t\t\tTHREE.UniformsLib.bump,\r\n\t\t\tTHREE.UniformsLib.fog,\r\n\t\t\tTHREE.UniformsLib.lights\r\n\t\t]);\r\n\r\n\t\tuniforms.shininess = {type: 'f', value: 30};\r\n\t\tdefines.PHONG = true;\r\n\r\n\t\tif(mapImage) {\r\n\t\t\tmap = new THREE.Texture(mapImage);\r\n\t\t\tmap.needsUpdate = true;\r\n\t\t\tuniforms.map = {type: 't', value: map};\r\n\t\t\tthis.map = true;\r\n\t\t}\r\n\t\tif(bumpMapImage) {\r\n\t\t\tbumpMap = new THREE.Texture(bumpMapImage);\r\n\t\t\tbumpMap.needsUpdate = true;\r\n\t\t\tuniforms.bumpMap = {type: 't', value: bumpMap};\r\n\t\t\tuniforms.bumpScale.value = 0.005;\r\n\t\t\tthis.bumpMap = true;\r\n\t\t}\r\n\t\tif(specularMapImage) {\r\n\t\t\tspecularMap = new THREE.Texture(specularMapImage);\r\n\t\t\tspecularMap.needsUpdate = true;\r\n\t\t\tuniforms.specular = {type: 'c', value: new THREE.Color(0x555555)};\r\n\t\t\tuniforms.specularMap = {type: 't', value: specularMap};\r\n\t\t\tthis.specularMap = true;\r\n\t\t}\r\n        if(coverMapImage) {\r\n\t\t\tcoverMap = new THREE.Texture(coverMapImage);\r\n\t\t\tcoverMap.needsUpdate = true;\r\n\t\t\tuniforms.coverMap = {type: 't', value: coverMap};\r\n\t\t\tdefines.USE_COVER = true;\r\n        }\r\n\r\n\t\tparameters = {\r\n\t\t\tvertexShader: vertexShader,\r\n\t\t\tfragmentShader: fragmentShader,\r\n\t\t\tuniforms: uniforms,\r\n\t\t\tdefines: defines,\r\n\t\t\tlights: true,\r\n\t\t\tfog: true\r\n\t\t};\r\n\r\n\t\tTHREE.ShaderMaterial.call(this, parameters);\r\n\t};\r\n\r\n\tBookMaterial.prototype = Object.create(THREE.ShaderMaterial.prototype);\r\n\r\n\tBookMaterial.prototype.constructor = THREE.BookMaterial;\r\n\r\n\treturn BookMaterial;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/materials/BookMaterial.js\n **/","'use strict';\n\nangular.module('VirtualBookshelf').factory('cache', function ($q, $log, data) {\n\tvar cache = {};\n\n\tvar library = null;\n\tvar sections = {};\n\tvar books = {};\n\tvar images = {};\n\n\tcache.init = function (libraryModel, sectionModels, bookModels, covers) {\n\t\tvar libraryLoad = loadLibraryData(libraryModel);\n\t\tvar sectionsLoad = [];\n\t\tvar booksLoad = [];\n\t\tvar imagesLoad = [];\n\t\tvar model, coverId; // iterators\n\n\t\tfor (model in sectionModels) {\n\t\t\tsectionsLoad.push(addSection(model));\n\t\t}\n\n\t\tfor (model in bookModels) {\n\t\t\tbooksLoad.push(addBook(model));\n\t\t}\n\n\t\tfor (coverId in covers) {\n\t\t\timagesLoad.push(addImageByDto(covers[coverId]));\n\t\t}\n\n\t\tvar promise = $q.all({\n\t\t\tlibraryCache: libraryLoad,\n\t\t\tsectionsLoad: $q.all(sectionsLoad),\n\t\t\tbooksLoad: $q.all(booksLoad),\n\t\t\timagesLoad: $q.all(imagesLoad)\n\t\t}).then(function (results) {\n\t\t\tlibrary = results.libraryCache;\n\t\t});\n\n\t\treturn promise;\n\t};\n\n\tcache.getLibrary = function () {\n\t\treturn library;\n\t};\n\n\tcache.getSection = function (model) {\n\t\treturn commonGetter(sections, model, addSection);\n\t};\n\n\tcache.getBook = function (model) {\n\t\treturn commonGetter(books, model, addBook);\n\t};\n\n\tcache.getImage = function (id) {\n\t\treturn commonGetter(images, id, addImageById);\n\t};\n\n\tvar addSection = function addSection(model) {\n\t\treturn commonAdder(sections, model, loadSectionData);\n\t};\n\n\tvar addBook = function addBook(model) {\n\t\treturn commonAdder(books, model, loadBookData);\n\t};\n\n\tvar addImageById = function addImageById(id) {\n\t\treturn data.getCover(id).then(function (coverDto) {\n\t\t\treturn data.loadImage(coverDto.url).then(function (image) {\n\t\t\t\treturn addImage(coverDto, image);\n\t\t\t});\n\t\t}).catch(function () {\n\t\t\t$log.error('Error adding image by id:', id);\n\t\t\treturn null;\n\t\t});\n\t};\n\n\tvar addImageByDto = function addImageByDto(coverDto) {\n\t\treturn data.loadImage(coverDto.url).then(function (image) {\n\t\t\treturn addImage(coverDto, image);\n\t\t}).catch(function () {\n\t\t\t$log.error('Error adding image by dto:', coverDto.id);\n\t\t\treturn null;\n\t\t});\n\t};\n\n\tvar addImage = function addImage(dto, image) {\n\t\tvar loadedCache = {\n\t\t\tdto: dto,\n\t\t\timage: image\n\t\t};\n\n\t\timages[dto.id] = loadedCache;\n\t\treturn loadedCache;\n\t};\n\n\tvar commonGetter = function commonGetter(from, key, addFunction) {\n\t\tvar result = from[key];\n\n\t\tif (!result) {\n\t\t\tresult = addFunction(key);\n\t\t}\n\n\t\treturn $q.when(result);\n\t};\n\n\tvar commonAdder = function commonAdder(where, what, loader) {\n\t\tvar promise = loader(what).then(function (loadedCache) {\n\t\t\twhere[what] = loadedCache;\n\n\t\t\treturn loadedCache;\n\t\t});\n\n\t\treturn promise;\n\t};\n\n\tvar loadLibraryData = function loadLibraryData(model) {\n\t\tvar path = '/obj/libraries/{model}/'.replace('{model}', model);\n\t\tvar modelUrl = path + 'model.json';\n\t\tvar mapUrl = path + 'map.jpg';\n\n\t\tvar promise = $q.all({\n\t\t\tgeometry: data.loadGeometry(modelUrl),\n\t\t\tmapImage: data.loadImage(mapUrl)\n\t\t});\n\n\t\treturn promise;\n\t};\n\n\tvar loadSectionData = function loadSectionData(model) {\n\t\tvar path = '/obj/sections/{model}/'.replace('{model}', model);\n\t\tvar modelUrl = path + 'model.js';\n\t\tvar mapUrl = path + 'map.jpg';\n\t\tvar dataUrl = path + 'data.json';\n\n\t\tvar promise = $q.all({\n\t\t\tgeometry: data.loadGeometry(modelUrl),\n\t\t\tmapImage: data.loadImage(mapUrl),\n\t\t\tdata: data.getData(dataUrl)\n\t\t});\n\n\t\treturn promise;\n\t};\n\n\tvar loadBookData = function loadBookData(model) {\n\t\tvar path = '/obj/books/{model}/'.replace('{model}', model);\n\t\tvar modelUrl = path + 'model.js';\n\t\tvar mapUrl = path + 'map.jpg';\n\t\tvar bumpMapUrl = path + 'bump_map.jpg';\n\t\tvar specularMapUrl = path + 'specular_map.jpg';\n\n\t\tvar promise = $q.all({\n\t\t\tgeometry: data.loadGeometry(modelUrl),\n\t\t\tmapImage: data.loadImage(mapUrl).catch(function () {\n\t\t\t\t$log.error('Cache: Error loading book map:', model);\n\t\t\t\treturn null;\n\t\t\t}),\n\t\t\tbumpMapImage: data.loadImage(bumpMapUrl).catch(function () {\n\t\t\t\t$log.error('Cache: Error loading book bumpMap:', model);\n\t\t\t\treturn null;\n\t\t\t}),\n\t\t\tspecularMapImage: data.loadImage(specularMapUrl).catch(function () {\n\t\t\t\t$log.error('Cache: Error loading book specularMap:', model);\n\t\t\t\treturn null;\n\t\t\t})\n\t\t});\n\n\t\treturn promise;\n\t};\n\n\treturn cache;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/cache.js\n **/","angular.module('VirtualBookshelf')\r\n.factory('cache', function ($q, $log, data) {\r\n\tvar cache = {};\r\n\r\n\tvar library = null;\r\n\tvar sections = {};\r\n\tvar books = {};\r\n\tvar images = {};\r\n\r\n\tcache.init = function(libraryModel, sectionModels, bookModels, covers) {\r\n\t\tvar libraryLoad = loadLibraryData(libraryModel);\r\n\t\tvar sectionsLoad = [];\r\n\t\tvar booksLoad = [];\r\n\t\tvar imagesLoad = [];\r\n\t\tvar model, coverId; // iterators\r\n\r\n\t\tfor (model in sectionModels) {\r\n\t\t\tsectionsLoad.push(addSection(model));\r\n\t\t}\r\n\r\n\t\tfor (model in bookModels) {\r\n\t\t\tbooksLoad.push(addBook(model));\r\n\t\t}\r\n\r\n\t\tfor (coverId in covers) {\r\n\t\t\timagesLoad.push(addImageByDto(covers[coverId]));\r\n\t\t}\r\n\r\n\t\tvar promise = $q.all({\r\n\t\t\tlibraryCache: libraryLoad, \r\n\t\t\tsectionsLoad: $q.all(sectionsLoad), \r\n\t\t\tbooksLoad: $q.all(booksLoad),\r\n\t\t\timagesLoad: $q.all(imagesLoad)\r\n\t\t}).then(function (results) {\r\n\t\t\tlibrary = results.libraryCache;\r\n\t\t});\r\n\r\n\t\treturn promise;\r\n\t};\r\n\r\n\tcache.getLibrary = function() {\r\n\t\treturn library;\r\n\t};\r\n\r\n\tcache.getSection = function(model) {\r\n\t\treturn commonGetter(sections, model, addSection);\r\n\t};\r\n\r\n\tcache.getBook = function(model) {\r\n\t\treturn commonGetter(books, model, addBook);\r\n\t};\r\n\r\n\tcache.getImage = function(id) {\r\n\t\treturn commonGetter(images, id, addImageById);\r\n\t};\r\n\r\n\tvar addSection = function(model) {\r\n\t\treturn commonAdder(sections, model, loadSectionData);\r\n\t};\r\n\r\n\tvar addBook = function(model) {\r\n\t\treturn commonAdder(books, model, loadBookData);\r\n\t};\r\n\r\n\tvar addImageById = function(id) {\r\n\t\treturn data.getCover(id).then(function (coverDto) {\r\n\t\t\treturn data.loadImage(coverDto.url).then(function (image) {\r\n\t\t\t\treturn addImage(coverDto, image);\r\n\t\t\t});\r\n\t\t}).catch(function () {\r\n\t\t\t$log.error('Error adding image by id:', id);\r\n\t\t\treturn null;\r\n\t\t});\r\n\t};\r\n\r\n\tvar addImageByDto = function(coverDto) {\r\n\t\treturn data.loadImage(coverDto.url).then(function (image) {\r\n\t\t\treturn addImage(coverDto, image);\r\n\t\t}).catch(function () {\r\n\t\t\t$log.error('Error adding image by dto:', coverDto.id);\r\n\t\t\treturn null;\r\n\t\t});\r\n\t};\r\n\r\n\tvar addImage = function(dto, image) {\r\n\t\tvar loadedCache = {\r\n\t\t\tdto: dto,\r\n\t\t\timage: image\r\n\t\t};\r\n\r\n\t\timages[dto.id] = loadedCache;\r\n\t\treturn loadedCache;\r\n\t};\r\n\r\n\tvar commonGetter = function(from, key, addFunction) {\r\n\t\tvar result = from[key];\r\n\r\n\t\tif(!result) {\r\n\t\t\tresult = addFunction(key);\r\n\t\t}\r\n\r\n\t\treturn $q.when(result);\r\n\t};\r\n\r\n\tvar commonAdder = function(where, what, loader) {\r\n\t\tvar promise = loader(what).then(function (loadedCache) {\r\n\t\t\twhere[what] = loadedCache;\r\n\r\n\t\t\treturn loadedCache;\r\n\t\t});\r\n\r\n\t\treturn promise;\r\n\t};\r\n\r\n\tvar loadLibraryData = function(model) {\r\n\t\tvar path = '/obj/libraries/{model}/'.replace('{model}', model);\r\n        var modelUrl = path + 'model.json';\r\n        var mapUrl = path + 'map.jpg';\r\n\r\n        var promise = $q.all({\r\n        \tgeometry: data.loadGeometry(modelUrl), \r\n        \tmapImage: data.loadImage(mapUrl)\r\n        });\r\n\r\n        return promise;\r\n\t};\r\n\r\n\tvar loadSectionData = function(model) {\r\n\t\tvar path = '/obj/sections/{model}/'.replace('{model}', model);\r\n        var modelUrl = path + 'model.js';\r\n        var mapUrl = path + 'map.jpg';\r\n        var dataUrl = path + 'data.json';\r\n\r\n        var promise = $q.all({\r\n        \tgeometry: data.loadGeometry(modelUrl), \r\n        \tmapImage: data.loadImage(mapUrl), \r\n        \tdata: data.getData(dataUrl)\r\n        });\r\n\r\n        return promise;\r\n\t};\r\n\r\n\tvar loadBookData = function(model) {\r\n\t\tvar path = '/obj/books/{model}/'.replace('{model}', model);\r\n        var modelUrl = path + 'model.js';\r\n        var mapUrl = path + 'map.jpg';\r\n        var bumpMapUrl = path + 'bump_map.jpg';\r\n        var specularMapUrl = path + 'specular_map.jpg';\r\n\r\n        var promise = $q.all({\r\n        \tgeometry: data.loadGeometry(modelUrl),\r\n        \tmapImage: data.loadImage(mapUrl).catch(function () {\r\n        \t\t$log.error('Cache: Error loading book map:', model);\r\n        \t\treturn null;\r\n        \t}),\r\n        \tbumpMapImage: data.loadImage(bumpMapUrl).catch(function () {\r\n        \t\t$log.error('Cache: Error loading book bumpMap:', model);\r\n        \t\treturn null;\r\n        \t}),\r\n        \tspecularMapImage: data.loadImage(specularMapUrl).catch(function () {\r\n        \t\t$log.error('Cache: Error loading book specularMap:', model);\r\n        \t\treturn null;\r\n        \t})\r\n        });\r\n\r\n        return promise;\r\n\t};\r\n\r\n\treturn cache;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/cache.js\n **/","'use strict';\n\nangular.module('VirtualBookshelf').factory('mouse', function (camera, environment) {\n\tvar mouse = {};\n\n\tvar getWidth = function getWidth() {\n\t\treturn window.innerWidth;\n\t};\n\n\tvar getHeight = function getHeight() {\n\t\treturn window.innerHeight;\n\t};\n\n\tvar x = null;\n\tvar y = null;\n\n\tmouse.target = null;\n\tmouse.dX = null;\n\tmouse.dY = null;\n\tmouse.longX = null;\n\tmouse.longY = null;\n\n\tmouse.getTarget = function () {\n\t\treturn this.target;\n\t};\n\n\tmouse.down = function (event) {\n\t\tif (event) {\n\t\t\tthis[event.which] = true;\n\t\t\tthis.target = event.target;\n\t\t\tx = event.clientX;\n\t\t\ty = event.clientY;\n\t\t\tmouse.longX = getWidth() * 0.5 - x;\n\t\t\tmouse.longY = getHeight() * 0.5 - y;\n\t\t}\n\t};\n\n\tmouse.up = function (event) {\n\t\tif (event) {\n\t\t\tthis[event.which] = false;\n\t\t\t// linux chrome bug fix (when both keys release then both event.which equal 3)\n\t\t\tthis[1] = false;\n\t\t}\n\t};\n\n\tmouse.move = function (event) {\n\t\tif (event) {\n\t\t\tthis.target = event.target;\n\t\t\tmouse.longX = getWidth() * 0.5 - x;\n\t\t\tmouse.longY = getHeight() * 0.5 - y;\n\t\t\tmouse.dX = event.clientX - x;\n\t\t\tmouse.dY = event.clientY - y;\n\t\t\tx = event.clientX;\n\t\t\ty = event.clientY;\n\t\t}\n\t};\n\n\tmouse.isCanvas = function () {\n\t\treturn this.target.id === environment.LIBRARY_CANVAS_ID;\n\t};\n\n\tmouse.getIntersected = function (objects, recursive, searchFor) {\n\t\tvar vector, raycaster, intersects, intersected, result, i, j;\n\n\t\tresult = null;\n\t\tvector = getVector();\n\t\traycaster = new THREE.Raycaster();\n\t\traycaster.set(camera.getPosition(), vector);\n\t\tintersects = raycaster.intersectObjects(objects, recursive);\n\n\t\tif (searchFor) {\n\t\t\tif (intersects.length) {\n\t\t\t\tfor (i = 0; i < intersects.length; i++) {\n\t\t\t\t\tintersected = intersects[i];\n\n\t\t\t\t\tfor (j = searchFor.length - 1; j >= 0; j--) {\n\t\t\t\t\t\tif (intersected.object instanceof searchFor[j]) {\n\t\t\t\t\t\t\tresult = intersected;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (result) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tresult = intersects;\n\t\t}\n\n\t\treturn result;\n\t};\n\n\tvar getVector = function getVector() {\n\t\tvar vector = new THREE.Vector3(x / getWidth() * 2 - 1, -(y / getHeight()) * 2 + 1, 0.5);\n\t\tvector.unproject(camera.camera);\n\n\t\treturn vector.sub(camera.getPosition()).normalize();\n\t};\n\n\treturn mouse;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/mouse.js\n **/","angular.module('VirtualBookshelf')\r\n.factory('mouse', function (camera, environment) {\r\n\tvar mouse = {};\r\n\r\n\tvar getWidth = function() {\r\n\t\treturn window.innerWidth;\r\n\t};\r\n\r\n\tvar getHeight = function() {\r\n\t\treturn window.innerHeight;\r\n\t};\r\n\r\n\tvar x = null;\r\n\tvar y = null;\r\n\t\r\n\tmouse.target = null;\r\n\tmouse.dX = null;\r\n\tmouse.dY = null;\r\n\tmouse.longX = null;\r\n\tmouse.longY = null;\r\n\r\n\tmouse.getTarget = function() {\r\n\t\treturn this.target;\r\n\t};\r\n\r\n\tmouse.down = function(event) {\r\n\t\tif(event) {\r\n\t\t\tthis[event.which] = true;\r\n\t\t\tthis.target = event.target;\r\n\t\t\tx = event.clientX;\r\n\t\t\ty = event.clientY;\r\n\t\t\tmouse.longX = getWidth() * 0.5 - x;\r\n\t\t\tmouse.longY = getHeight() * 0.5 - y;\r\n\t\t}\r\n\t};\r\n\r\n\tmouse.up = function(event) {\r\n\t\tif(event) {\r\n\t\t\tthis[event.which] = false;\r\n\t\t\t// linux chrome bug fix (when both keys release then both event.which equal 3)\r\n\t\t\tthis[1] = false; \r\n\t\t}\r\n\t};\r\n\r\n\tmouse.move = function(event) {\r\n\t\tif(event) {\r\n\t\t\tthis.target = event.target;\r\n\t\t\tmouse.longX = getWidth() * 0.5 - x;\r\n\t\t\tmouse.longY = getHeight() * 0.5 - y;\r\n\t\t\tmouse.dX = event.clientX - x;\r\n\t\t\tmouse.dY = event.clientY - y;\r\n\t\t\tx = event.clientX;\r\n\t\t\ty = event.clientY;\r\n\t\t}\r\n\t};\r\n\r\n\tmouse.isCanvas = function() {\r\n\t\treturn this.target.id === environment.LIBRARY_CANVAS_ID;\r\n\t};\r\n\r\n\tmouse.getIntersected = function(objects, recursive, searchFor) {\r\n\t\tvar\r\n\t\t\tvector,\r\n\t\t\traycaster,\r\n\t\t\tintersects,\r\n\t\t\tintersected,\r\n\t\t\tresult,\r\n\t\t\ti, j;\r\n\r\n\t\tresult = null;\r\n\t\tvector = getVector();\r\n\t\traycaster = new THREE.Raycaster();\r\n\t\traycaster.set(camera.getPosition(), vector);\r\n\t\tintersects = raycaster.intersectObjects(objects, recursive);\r\n\r\n\t\tif(searchFor) {\r\n\t\t\tif(intersects.length) {\r\n\t\t\t\tfor(i = 0; i < intersects.length; i++) {\r\n\t\t\t\t\tintersected = intersects[i];\r\n\t\t\t\t\t\r\n\t\t\t\t\tfor(j = searchFor.length - 1; j >= 0; j--) {\r\n\t\t\t\t\t\tif(intersected.object instanceof searchFor[j]) {\r\n\t\t\t\t\t\t\tresult = intersected;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(result) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\t\t\r\n\t\t} else {\r\n\t\t\tresult = intersects;\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t};\r\n\r\n\tvar getVector = function() {\r\n\t\tvar vector = new THREE.Vector3((x / getWidth()) * 2 - 1, - (y / getHeight()) * 2 + 1, 0.5);\r\n\t\tvector.unproject(camera.camera);\r\n\t\r\n\t\treturn vector.sub(camera.getPosition()).normalize();\r\n\t};\r\n\r\n\treturn mouse;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/mouse.js\n **/","'use strict';\n\nrequire('../models/SelectorMeta');\n\nrequire('../models/BookObject');\n\nrequire('../models/ShelfObject');\n\nrequire('../models/SectionObject');\n\nrequire('../environment');\n\nrequire('../scene/highlight');\n\nrequire('../scene/preview');\n\nrequire('../ui/tooltip');\n\nrequire('../ui/catalog');\n\nangular.module('VirtualBookshelf').factory('selector', function (SelectorMeta, BookObject, ShelfObject, SectionObject, environment, highlight, preview, tooltip, catalog) {\n\tvar selector = {};\n\n\tvar selected = new SelectorMeta();\n\tvar focused = new SelectorMeta();\n\n\tselector.placing = false;\n\n\tselector.focus = function (meta) {\n\t\tvar obj;\n\n\t\tif (!meta.equals(focused)) {\n\t\t\tfocused = meta;\n\n\t\t\tif (!focused.isEmpty()) {\n\t\t\t\tobj = selector.getFocusedObject();\n\t\t\t\thighlight.focus(obj);\n\t\t\t}\n\n\t\t\ttooltip.set(obj);\n\t\t}\n\t};\n\n\tselector.selectFocused = function () {\n\t\tselector.select(focused);\n\t};\n\n\tselector.select = function (meta) {\n\t\tvar obj = getObject(meta);\n\n\t\tselector.unselect();\n\t\tselected = meta;\n\n\t\thighlight.select(obj);\n\t\thighlight.focus(null);\n\n\t\tselector.placing = false;\n\t};\n\n\tselector.unselect = function () {\n\t\tif (!selected.isEmpty()) {\n\t\t\thighlight.select(null);\n\t\t\tselected = new SelectorMeta();\n\t\t}\n\n\t\tpreview.disable();\n\t};\n\n\tselector.getSelectedDto = function () {\n\t\treturn selector.isSelectedBook() ? catalog.getBook(selected.id) : selector.isSelectedSection() ? environment.getSection(selected.id) : null;\n\t};\n\n\tselector.getSelectedObject = function () {\n\t\treturn getObject(selected);\n\t};\n\n\tselector.getFocusedObject = function () {\n\t\treturn getObject(focused);\n\t};\n\n\tvar getObject = function getObject(meta) {\n\t\tvar object;\n\n\t\tif (!meta.isEmpty()) {\n\t\t\tobject = isShelf(meta) ? environment.getShelf(meta.parentId, meta.id) : isBook(meta) ? environment.getBook(meta.id) : isSection(meta) ? environment.getSection(meta.id) : null;\n\t\t}\n\n\t\treturn object;\n\t};\n\n\tselector.isSelectedEditable = function () {\n\t\treturn selector.isSelectedBook() || selector.isSelectedSection();\n\t};\n\n\tselector.isBookSelected = function (id) {\n\t\treturn isBook(selected) && selected.id === id;\n\t};\n\n\tselector.isSelectedShelf = function () {\n\t\treturn isShelf(selected);\n\t};\n\n\tselector.isSelectedBook = function () {\n\t\treturn isBook(selected);\n\t};\n\n\tselector.isSelectedSection = function () {\n\t\treturn isSection(selected);\n\t};\n\n\tvar isShelf = function isShelf(meta) {\n\t\treturn meta.type === ShelfObject.TYPE;\n\t};\n\n\tvar isBook = function isBook(meta) {\n\t\treturn meta.type === BookObject.TYPE;\n\t};\n\n\tvar isSection = function isSection(meta) {\n\t\treturn meta.type === SectionObject.TYPE;\n\t};\n\n\treturn selector;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/scene/selector.js\n **/","import '../models/SelectorMeta';\r\nimport '../models/BookObject';\r\nimport '../models/ShelfObject';\r\nimport '../models/SectionObject';\r\nimport '../environment';\r\nimport '../scene/highlight';\r\nimport '../scene/preview';\r\nimport '../ui/tooltip';\r\nimport '../ui/catalog';\r\n\r\nangular.module('VirtualBookshelf')\r\n.factory('selector', function (SelectorMeta, BookObject, ShelfObject, SectionObject, environment, highlight, preview, tooltip, catalog) {\r\n\tvar selector = {};\r\n\t\r\n\tvar selected = new SelectorMeta();\r\n\tvar focused = new SelectorMeta();\r\n\r\n\tselector.placing = false;\r\n\r\n\tselector.focus = function(meta) {\r\n\t\tvar obj;\r\n\r\n\t\tif(!meta.equals(focused)) {\r\n\t\t\tfocused = meta;\r\n\r\n\t\t\tif(!focused.isEmpty()) {\r\n\t\t\t\tobj = selector.getFocusedObject();\r\n\t\t\t\thighlight.focus(obj);\r\n\t\t\t}\r\n\r\n\t\t\ttooltip.set(obj);\r\n\t\t}\r\n\t};\r\n\r\n\tselector.selectFocused = function() {\r\n\t\tselector.select(focused);\r\n\t};\r\n\r\n\tselector.select = function(meta) {\r\n\t\tvar obj = getObject(meta);\r\n\t\t\r\n\t\tselector.unselect();\r\n\t\tselected = meta;\r\n\r\n\t\thighlight.select(obj);\r\n\t\thighlight.focus(null);\r\n\r\n\t\tselector.placing = false;\r\n\t};\r\n\r\n\tselector.unselect = function() {\r\n\t\tif(!selected.isEmpty()) {\r\n\t\t\thighlight.select(null);\r\n\t\t\tselected = new SelectorMeta();\r\n\t\t}\r\n\r\n\t\tpreview.disable();\r\n\t};\r\n\r\n\tselector.getSelectedDto = function() {\r\n\t\treturn selector.isSelectedBook() ? catalog.getBook(selected.id) : \r\n\t\t\tselector.isSelectedSection() ? environment.getSection(selected.id) :\r\n\t\t\tnull;\r\n\t};\r\n\r\n\tselector.getSelectedObject = function() {\r\n\t\treturn getObject(selected);\r\n\t};\r\n\r\n\tselector.getFocusedObject = function() {\r\n\t\treturn getObject(focused);\r\n\t};\r\n\r\n\tvar getObject = function(meta) {\r\n\t\tvar object;\r\n\r\n\t\tif(!meta.isEmpty()) {\r\n\t\t\tobject = isShelf(meta) ? environment.getShelf(meta.parentId, meta.id)\r\n\t\t\t\t: isBook(meta) ? environment.getBook(meta.id)\r\n\t\t\t\t: isSection(meta) ? environment.getSection(meta.id)\r\n\t\t\t\t: null;\r\n\t\t}\r\n\r\n\t\treturn object;\t\r\n\t};\r\n\r\n\tselector.isSelectedEditable = function() {\r\n\t\treturn selector.isSelectedBook() || selector.isSelectedSection();\r\n\t};\r\n\r\n\tselector.isBookSelected = function(id) {\r\n\t\treturn isBook(selected) && selected.id === id;\r\n\t};\r\n\r\n\tselector.isSelectedShelf = function() {\r\n\t\treturn isShelf(selected);\r\n\t};\r\n\r\n\tselector.isSelectedBook = function() {\r\n\t\treturn isBook(selected);\r\n\t};\r\n\r\n\tselector.isSelectedSection = function() {\r\n\t\treturn isSection(selected);\r\n\t};\r\n\r\n\tvar isShelf = function(meta) {\r\n\t\treturn meta.type === ShelfObject.TYPE;\r\n\t};\r\n\r\n\tvar isBook = function(meta) {\r\n\t\treturn meta.type === BookObject.TYPE;\r\n\t};\r\n\r\n\tvar isSection = function(meta) {\r\n\t\treturn meta.type === SectionObject.TYPE;\r\n\t};\r\n\r\n\treturn selector;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/scene/selector.js\n **/","'use strict';\n\nangular.module('VirtualBookshelf').factory('highlight', function (environment) {\n\tvar highlight = {};\n\n\tvar PLANE_ROTATION = Math.PI * 0.5;\n\tvar PLANE_MULTIPLIER = 2;\n\tvar COLOR_SELECT = 0x005533;\n\tvar COLOR_FOCUS = 0x003355;\n\n\tvar select;\n\tvar focus;\n\n\tvar init = function init() {\n\t\tvar materialProperties = {\n\t\t\tmap: new THREE.ImageUtils.loadTexture('img/glow.png'),\n\t\t\ttransparent: true,\n\t\t\tside: THREE.DoubleSide,\n\t\t\tblending: THREE.AdditiveBlending,\n\t\t\tdepthTest: false\n\t\t};\n\n\t\tmaterialProperties.color = COLOR_SELECT;\n\t\tvar materialSelect = new THREE.MeshBasicMaterial(materialProperties);\n\n\t\tmaterialProperties.color = COLOR_FOCUS;\n\t\tvar materialFocus = new THREE.MeshBasicMaterial(materialProperties);\n\n\t\tvar geometry = new THREE.PlaneBufferGeometry(1, 1, 1);\n\n\t\tselect = new THREE.Mesh(geometry, materialSelect);\n\t\tselect.rotation.x = PLANE_ROTATION;\n\n\t\tfocus = new THREE.Mesh(geometry, materialFocus);\n\t\tfocus.rotation.x = PLANE_ROTATION;\n\t};\n\n\tvar commonHighlight = function commonHighlight(which, obj) {\n\t\tif (obj) {\n\t\t\tvar width = obj.geometry.boundingBox.max.x * PLANE_MULTIPLIER;\n\t\t\tvar height = obj.geometry.boundingBox.max.z * PLANE_MULTIPLIER;\n\t\t\tvar bottom = obj.geometry.boundingBox.min.y + environment.CLEARANCE;\n\n\t\t\twhich.position.y = bottom;\n\t\t\twhich.scale.set(width, height, 1);\n\t\t\tobj.add(which);\n\n\t\t\twhich.visible = true;\n\t\t} else {\n\t\t\twhich.visible = false;\n\t\t}\n\t};\n\n\thighlight.enable = function (enable) {\n\t\tfocus.visible = select.visible = enable;\n\t};\n\n\thighlight.focus = function (obj) {\n\t\tcommonHighlight(focus, obj);\n\t};\n\n\thighlight.select = function (obj) {\n\t\tcommonHighlight(select, obj);\n\t};\n\n\tinit();\n\n\treturn highlight;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/scene/highlight.js\n **/","angular.module('VirtualBookshelf')\r\n.factory('highlight', function (environment) {\r\n\tvar highlight = {};\r\n\r\n\tvar PLANE_ROTATION = Math.PI * 0.5;\r\n\tvar PLANE_MULTIPLIER = 2;\r\n\tvar COLOR_SELECT = 0x005533;\r\n\tvar COLOR_FOCUS = 0x003355;\r\n\r\n\tvar select;\r\n\tvar focus;\r\n\r\n\tvar init = function() {\r\n\t\tvar materialProperties = {\r\n\t\t\tmap: new THREE.ImageUtils.loadTexture( 'img/glow.png' ),\r\n\t\t\ttransparent: true, \r\n\t\t\tside: THREE.DoubleSide,\r\n\t\t\tblending: THREE.AdditiveBlending,\r\n\t\t\tdepthTest: false\r\n\t\t};\r\n\r\n\t\tmaterialProperties.color = COLOR_SELECT;\r\n\t\tvar materialSelect = new THREE.MeshBasicMaterial(materialProperties);\r\n\r\n\t\tmaterialProperties.color = COLOR_FOCUS;\r\n\t\tvar materialFocus = new THREE.MeshBasicMaterial(materialProperties);\r\n\r\n\t\tvar geometry = new THREE.PlaneBufferGeometry(1, 1, 1);\r\n\r\n\t\tselect = new THREE.Mesh(geometry, materialSelect);\r\n\t\tselect.rotation.x = PLANE_ROTATION;\r\n\r\n\t\tfocus = new THREE.Mesh(geometry, materialFocus);\r\n\t\tfocus.rotation.x = PLANE_ROTATION;\r\n\t};\r\n\r\n\tvar commonHighlight = function(which, obj) {\r\n\t\tif(obj) {\r\n\t\t\tvar width = obj.geometry.boundingBox.max.x * PLANE_MULTIPLIER;\r\n\t\t\tvar height = obj.geometry.boundingBox.max.z * PLANE_MULTIPLIER;\r\n\t\t\tvar bottom = obj.geometry.boundingBox.min.y + environment.CLEARANCE;\r\n\t\t\t\r\n\t\t\twhich.position.y = bottom;\r\n\t\t\twhich.scale.set(width, height, 1);\r\n\t\t\tobj.add(which);\r\n\r\n\t\t\twhich.visible = true;\r\n\t\t} else {\r\n\t\t\twhich.visible = false;\r\n\t\t}\r\n\t};\r\n\r\n\thighlight.enable = function(enable) {\r\n\t\tfocus.visible = select.visible = enable;\r\n\t};\r\n\r\n\thighlight.focus = function(obj) {\r\n\t\tcommonHighlight(focus, obj);\r\n\t};\r\n\r\n\thighlight.select = function(obj) {\r\n\t\tcommonHighlight(select, obj);\r\n\t};\r\n\r\n\tinit();\r\n\r\n\treturn highlight;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/scene/highlight.js\n **/","'use strict';\n\nangular.module('VirtualBookshelf').factory('preview', function (camera, highlight) {\n\tvar preview = {};\n\n\tvar active = false;\n\tvar container;\n\n\tvar init = function init() {\n\t\tcontainer = new THREE.Object3D();\n\t\tcontainer.position.set(0, 0, -0.5);\n\t\tcontainer.rotation.y = -2;\n\t\tcamera.camera.add(container);\n\t};\n\n\tvar activate = function activate(value) {\n\t\tactive = value;\n\t\thighlight.enable(!active);\n\t};\n\n\tpreview.isActive = function () {\n\t\treturn active;\n\t};\n\n\tpreview.enable = function (obj) {\n\t\tvar objClone;\n\n\t\tif (obj) {\n\t\t\tactivate(true);\n\n\t\t\tobjClone = obj.clone();\n\t\t\tobjClone.position.set(0, 0, 0);\n\t\t\tcontainer.add(objClone);\n\t\t}\n\t};\n\n\tpreview.disable = function () {\n\t\tclearContainer();\n\t\tactivate(false);\n\t};\n\n\tvar clearContainer = function clearContainer() {\n\t\tcontainer.children.forEach(function (child) {\n\t\t\tcontainer.remove(child);\n\t\t});\n\t};\n\n\tpreview.rotate = function (dX) {\n\t\tcontainer.rotation.y += dX ? dX * 0.05 : 0;\n\t};\n\n\tinit();\n\n\treturn preview;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/scene/preview.js\n **/","angular.module('VirtualBookshelf')\r\n.factory('preview', function (camera, highlight) {\r\n\tvar preview = {};\r\n\r\n\tvar active = false;\r\n\tvar container;\r\n\r\n\tvar init = function() {\r\n\t\tcontainer = new THREE.Object3D();\r\n\t\tcontainer.position.set(0, 0, -0.5);\r\n\t\tcontainer.rotation.y = -2;\r\n\t\tcamera.camera.add(container);\r\n\t};\r\n\r\n\tvar activate = function(value) {\r\n\t\tactive = value;\r\n\t\thighlight.enable(!active);\r\n\t};\r\n\r\n\tpreview.isActive = function() {\r\n\t\treturn active;\r\n\t};\r\n\r\n\tpreview.enable = function(obj) {\r\n\t\tvar objClone;\r\n\r\n\t\tif(obj) {\r\n\t\t\tactivate(true);\r\n\r\n\t\t\tobjClone = obj.clone();\r\n\t\t\tobjClone.position.set(0, 0, 0);\r\n\t\t\tcontainer.add(objClone);\r\n\t\t}\r\n\t};\r\n\r\n\tpreview.disable = function () {\r\n\t\tclearContainer();\r\n\t\tactivate(false);\r\n\t};\r\n\r\n\tvar clearContainer = function() {\r\n\t\tcontainer.children.forEach(function (child) {\r\n\t\t\tcontainer.remove(child);\r\n\t\t});\r\n\t};\r\n\r\n\tpreview.rotate = function(dX) {\r\n\t\tcontainer.rotation.y += dX ? dX * 0.05 : 0;\r\n\t};\r\n\r\n\tinit();\r\n\r\n\treturn preview;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/scene/preview.js\n **/","'use strict';\n\nangular.module('VirtualBookshelf').factory('tooltip', function () {\n\tvar tooltip = {};\n\n\ttooltip.obj = {};\n\n\ttooltip.set = function (obj) {\n\t\tif (obj) {\n\t\t\tthis.obj.type = obj.getType();\n\t\t\tthis.obj.title = obj.dataObject.title;\n\t\t\tthis.obj.author = obj.dataObject.author;\n\t\t} else {\n\t\t\tthis.obj.type = null;\n\t\t}\n\t};\n\n\treturn tooltip;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/ui/tooltip.js\n **/","angular.module('VirtualBookshelf')\r\n.factory('tooltip', function () {\r\n\tvar tooltip = {};\r\n\r\n\ttooltip.obj = {};\r\n\r\n\ttooltip.set = function(obj) {\r\n\t\tif(obj) {\r\n\t\t\tthis.obj.type = obj.getType();\r\n\t\t\tthis.obj.title = obj.dataObject.title;\r\n\t\t\tthis.obj.author = obj.dataObject.author;\r\n\t\t} else {\r\n\t\t\tthis.obj.type = null;\r\n\t\t}\r\n\t};\r\n\r\n\treturn tooltip;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/ui/tooltip.js\n **/","'use strict';\n\nangular.module('VirtualBookshelf').factory('catalog', function ($q, data, block) {\n\tvar catalog = {};\n\n\tcatalog.books = null;\n\n\tcatalog.loadBooks = function (userId) {\n\t\tvar promise;\n\n\t\tif (userId) {\n\t\t\tblock.inventory.start();\n\t\t\tpromise = $q.when(userId ? data.getUserBooks(userId) : null).then(function (result) {\n\t\t\t\tcatalog.books = result;\n\t\t\t}).finally(function () {\n\t\t\t\tblock.inventory.stop();\n\t\t\t});\n\t\t}\n\n\t\treturn promise;\n\t};\n\n\tcatalog.getBook = function (id) {\n\t\treturn _.find(catalog.books, { id: id });\n\t};\n\n\treturn catalog;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/ui/catalog.js\n **/","angular.module('VirtualBookshelf')\r\n.factory('catalog', function ($q, data, block) {\r\n\tvar catalog = {};\r\n\r\n\tcatalog.books = null;\r\n\r\n\tcatalog.loadBooks = function(userId) {\r\n\t\tvar promise;\r\n\r\n\t\tif(userId) {\r\n\t\t\tblock.inventory.start();\r\n\t\t\tpromise = $q.when(userId ? data.getUserBooks(userId) : null).then(function (result) {\r\n\t\t\t\tcatalog.books = result;\r\n\t\t\t}).finally(function () {\r\n\t\t\t\tblock.inventory.stop();\t\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn promise;\r\n\t};\r\n\r\n\tcatalog.getBook = function(id) {\r\n\t\treturn _.find(catalog.books, {id: id});\r\n\t};\r\n\r\n\treturn catalog;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/ui/catalog.js\n **/","'use strict';\n\nangular.module('VirtualBookshelf').factory('block', function (blockUI) {\n\tvar block = {};\n\n\tvar INVENTORY = 'inventory';\n\tvar MAIN_MENU = 'main_menu';\n\tvar GLOBAL = 'global';\n\n\tblock.inventory = blockUI.instances.get(INVENTORY);\n\n\tblock.mainMenu = blockUI.instances.get(MAIN_MENU);\n\n\tblock.global = blockUI.instances.get(GLOBAL);\n\n\treturn block;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/ui/block.js\n **/","angular.module('VirtualBookshelf')\r\n.factory('block', function (blockUI) {\r\n\tvar block = {};\r\n\r\n\tvar INVENTORY = 'inventory';\r\n\tvar MAIN_MENU = 'main_menu';\r\n\tvar GLOBAL = 'global';\r\n\r\n\tblock.inventory = blockUI.instances.get(INVENTORY);\r\n\t\r\n\tblock.mainMenu = blockUI.instances.get(MAIN_MENU);\r\n\r\n\tblock.global = blockUI.instances.get(GLOBAL);\r\n\r\n\treturn block;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/ui/block.js\n **/","'use strict';\n\nrequire('../models/BookObject');\n\nrequire('../models/SectionObject');\n\nrequire('../models/ShelfObject');\n\nrequire('../models/SelectorMetaDto');\n\nrequire('../data');\n\nrequire('../scene/selector');\n\nrequire('../dialog');\n\nrequire('../ui/block');\n\nrequire('../ui/catalog');\n\nrequire('../environment');\n\nrequire('../scene/preview');\n\nrequire('../user');\n\nrequire('../scene/locator');\n\nangular.module('VirtualBookshelf').factory('tools', function ($q, $log, BookObject, SectionObject, ShelfObject, SelectorMetaDto, data, selector, dialog, block, catalog, environment, preview, user, locator, growl) {\n\tvar tools = {};\n\n\tvar ROTATION_SCALE = 1;\n\n\tvar states = {\n\t\trotateLeft: false,\n\t\trotateRight: false\n\t};\n\n\ttools.place = function () {\n\t\tvar selectedDto;\n\t\tvar focusedObject = selector.getFocusedObject();\n\n\t\tif (focusedObject instanceof ShelfObject) {\n\t\t\tselector.placing = false;\n\t\t\tselectedDto = selector.getSelectedDto();\n\n\t\t\tblock.global.start();\n\t\t\tlocator.placeBook(selectedDto, focusedObject).then(function () {\n\t\t\t\tvar bookDto = catalog.getBook(selectedDto.id);\n\t\t\t\tselector.select(new SelectorMetaDto(BookObject.TYPE, bookDto.id, bookDto.shelfId));\n\t\t\t\tgrowl.success('Book placed');\n\t\t\t}).catch(function (error) {\n\t\t\t\tgrowl.error(error);\n\t\t\t\t$log.error(error);\n\t\t\t}).finally(function () {\n\t\t\t\tblock.global.stop();\n\t\t\t});\n\t\t} else {\n\t\t\tgrowl.error('Shelf is not selected');\n\t\t}\n\t};\n\n\ttools.unplace = function () {\n\t\tvar bookDto = selector.isSelectedBook() ? selector.getSelectedDto() : null;\n\n\t\tif (bookDto) {\n\t\t\tblock.global.start();\n\t\t\tlocator.unplaceBook(bookDto).then(function () {\n\t\t\t\tgrowl.success('Book unplaced');\n\t\t\t\treturn catalog.loadBooks(user.getId());\n\t\t\t}).catch(function (error) {\n\t\t\t\tgrowl.error(error);\n\t\t\t\t$log.error(error);\n\t\t\t}).finally(function () {\n\t\t\t\tblock.global.stop();\n\t\t\t});\n\t\t}\n\t};\n\n\ttools.deleteBook = function (id) {\n\t\treturn data.deleteBook(id).then(function () {\n\t\t\tselector.unselect();\n\t\t\tenvironment.removeBook(id);\n\t\t\treturn catalog.loadBooks(user.getId());\n\t\t});\n\t};\n\n\ttools.deleteSection = function (id) {\n\t\treturn data.deleteSection(id).then(function () {\n\t\t\tselector.unselect();\n\t\t\tenvironment.removeSection(id);\n\t\t});\n\t};\n\n\ttools.rotateLeft = function () {\n\t\tstates.rotateLeft = true;\n\t};\n\n\ttools.rotateRight = function () {\n\t\tstates.rotateRight = true;\n\t};\n\n\ttools.stop = function () {\n\t\tstates.rotateLeft = false;\n\t\tstates.rotateRight = false;\n\t};\n\n\ttools.update = function () {\n\t\tif (states.rotateLeft) {\n\t\t\trotate(ROTATION_SCALE);\n\t\t} else if (states.rotateRight) {\n\t\t\trotate(-ROTATION_SCALE);\n\t\t}\n\t};\n\n\tvar rotate = function rotate(scale) {\n\t\tvar obj;\n\n\t\tif (preview.isActive()) {\n\t\t\tpreview.rotate(scale);\n\t\t} else {\n\t\t\tobj = selector.getSelectedObject();\n\t\t\tif (obj) obj.rotate(scale);\n\t\t}\n\t};\n\n\treturn tools;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/ui/tools.js\n **/","import '../models/BookObject';\r\nimport '../models/SectionObject';\r\nimport '../models/ShelfObject';\r\nimport '../models/SelectorMetaDto';\r\nimport '../data';\r\nimport '../scene/selector';\r\nimport '../dialog';\r\nimport '../ui/block';\r\nimport '../ui/catalog';\r\nimport '../environment';\r\nimport '../scene/preview';\r\nimport '../user';\r\nimport '../scene/locator';\r\n\r\nangular.module('VirtualBookshelf')\r\n.factory('tools', function ($q, $log, BookObject, SectionObject, ShelfObject, SelectorMetaDto, data, selector, dialog, block, catalog, environment, preview, user, locator, growl) {\r\n\tvar tools = {};\r\n\r\n\tvar ROTATION_SCALE = 1;\r\n\r\n\tvar states = {\r\n\t\trotateLeft: false,\r\n\t\trotateRight: false\r\n\t};\r\n\r\n\ttools.place = function() {\r\n\t\tvar selectedDto;\r\n\t\tvar focusedObject = selector.getFocusedObject();\r\n\r\n\t\tif(focusedObject instanceof ShelfObject) {\r\n\t\t\tselector.placing = false;\r\n\t\t\tselectedDto = selector.getSelectedDto();\r\n\r\n\t\t\tblock.global.start();\r\n\t\t\tlocator.placeBook(selectedDto, focusedObject).then(function () {\r\n\t\t\t\tvar bookDto = catalog.getBook(selectedDto.id);\r\n\t\t\t\tselector.select(new SelectorMetaDto(BookObject.TYPE, bookDto.id, bookDto.shelfId));\r\n\t\t\t\tgrowl.success('Book placed');\r\n\t\t\t}).catch(function (error) {\r\n\t\t\t\tgrowl.error(error);\r\n\t\t\t\t$log.error(error);\r\n\t\t\t}).finally(function () {\r\n\t\t\t\tblock.global.stop();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tgrowl.error('Shelf is not selected');\r\n\t\t}\r\n\t};\r\n\r\n\ttools.unplace = function() {\r\n\t\tvar bookDto = selector.isSelectedBook() ? selector.getSelectedDto() : null;\r\n\r\n\t\tif(bookDto) {\r\n\t\t\tblock.global.start();\r\n\t\t\tlocator.unplaceBook(bookDto).then(function () {\r\n\t\t\t\tgrowl.success('Book unplaced');\r\n\t\t\t\treturn catalog.loadBooks(user.getId());\t\t\r\n\t\t\t}).catch(function (error) {\r\n\t\t\t\tgrowl.error(error);\r\n\t\t\t\t$log.error(error);\r\n\t\t\t}).finally(function () {\r\n\t\t\t\tblock.global.stop();\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\ttools.deleteBook = function(id) {\r\n\t\treturn data.deleteBook(id).then(function () {\r\n\t\t\tselector.unselect();\r\n\t\t\tenvironment.removeBook(id);\r\n\t\t\treturn catalog.loadBooks(user.getId());\r\n\t\t});\r\n\t};\r\n\r\n\ttools.deleteSection = function(id) {\r\n\t\treturn data.deleteSection(id).then(function () {\r\n\t\t\tselector.unselect();\r\n\t\t\tenvironment.removeSection(id);\r\n\t\t});\r\n\t};\r\n\r\n\ttools.rotateLeft = function() {\r\n\t\tstates.rotateLeft = true;\r\n\t};\r\n\r\n\ttools.rotateRight = function() {\r\n\t\tstates.rotateRight = true;\r\n\t};\r\n\r\n\ttools.stop = function() {\r\n\t\tstates.rotateLeft = false;\r\n\t\tstates.rotateRight = false;\r\n\t};\r\n\r\n\ttools.update = function() {\r\n\t\tif(states.rotateLeft) {\r\n\t\t\trotate(ROTATION_SCALE);\r\n\t\t} else if(states.rotateRight) {\r\n\t\t\trotate(-ROTATION_SCALE);\r\n\t\t}\r\n\t};\r\n\r\n\tvar rotate = function(scale) {\r\n\t\tvar obj;\r\n\r\n\t\tif(preview.isActive()) {\r\n\t\t\tpreview.rotate(scale);\r\n\t\t} else {\r\n\t\t\tobj = selector.getSelectedObject();\r\n\t\t\tif(obj) obj.rotate(scale);\r\n\t\t}\r\n\t};\r\n\r\n\treturn tools;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/ui/tools.js\n **/","'use strict';\n\nangular.module('VirtualBookshelf').factory('SelectorMetaDto', function (SelectorMeta, subclassOf) {\n\tvar SelectorMetaDto = function SelectorMetaDto(type, id, parentId) {\n\t\tthis.type = type;\n\t\tthis.id = id;\n\t\tthis.parentId = parentId;\n\t};\n\n\tSelectorMetaDto.prototype = subclassOf(SelectorMeta);\n\n\treturn SelectorMetaDto;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/models/SelectorMetaDto.js\n **/","angular.module('VirtualBookshelf')\r\n.factory('SelectorMetaDto', function (SelectorMeta, subclassOf) {\r\n\tvar SelectorMetaDto = function(type, id, parentId) {\r\n\t\tthis.type = type;\r\n\t\tthis.id = id;\r\n\t\tthis.parentId = parentId;\r\n\t};\r\n\t\r\n\tSelectorMetaDto.prototype = subclassOf(SelectorMeta);\r\n\r\n\treturn SelectorMetaDto;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/models/SelectorMetaDto.js\n **/","'use strict';\n\nangular.module('VirtualBookshelf').factory('dialog', function (ngDialog) {\n\tvar dialog = {};\n\n\tvar TEMPLATE = 'confirmDialog';\n\tvar ERROR = 1;\n\tvar CONFIRM = 2;\n\tvar WARNING = 3;\n\tvar INFO = 4;\n\n\tvar iconClassMap = {};\n\ticonClassMap[ERROR] = 'fa-times-circle';\n\ticonClassMap[CONFIRM] = 'fa-question-circle';\n\ticonClassMap[WARNING] = 'fa-exclamation-triangle';\n\ticonClassMap[INFO] = 'fa-info-circle';\n\n\tdialog.openError = function (msg) {\n\t\treturn openDialog(msg, ERROR);\n\t};\n\n\tdialog.openConfirm = function (msg) {\n\t\treturn openDialog(msg, CONFIRM, true);\n\t};\n\n\tdialog.openWarning = function (msg) {\n\t\treturn openDialog(msg, WARNING);\n\t};\n\n\tdialog.openInfo = function (msg) {\n\t\treturn openDialog(msg, INFO);\n\t};\n\n\tvar openDialog = function openDialog(msg, type, cancelButton) {\n\t\treturn ngDialog.openConfirm({\n\t\t\ttemplate: TEMPLATE,\n\t\t\tdata: {\n\t\t\t\tmsg: msg,\n\t\t\t\ticonClass: getIconClass(type),\n\t\t\t\tcancelButton: cancelButton\n\t\t\t}\n\t\t});\n\t};\n\n\tvar getIconClass = function getIconClass(type) {\n\t\treturn iconClassMap[type];\n\t};\n\n\treturn dialog;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/dialog.js\n **/","angular.module('VirtualBookshelf')\r\n.factory('dialog', function (ngDialog) {\r\n\tvar dialog = {};\r\n\r\n\tvar TEMPLATE = 'confirmDialog';\r\n\tvar ERROR = 1;\r\n\tvar CONFIRM = 2;\r\n\tvar WARNING = 3;\r\n\tvar INFO = 4;\r\n\r\n\tvar iconClassMap = {};\r\n\ticonClassMap[ERROR] = 'fa-times-circle';\r\n\ticonClassMap[CONFIRM] = 'fa-question-circle';\r\n\ticonClassMap[WARNING] = 'fa-exclamation-triangle';\r\n\ticonClassMap[INFO] = 'fa-info-circle';\r\n\r\n\tdialog.openError = function(msg) {\r\n\t\treturn openDialog(msg, ERROR);\r\n\t};\r\n\r\n\tdialog.openConfirm = function(msg) {\r\n\t\treturn openDialog(msg, CONFIRM, true);\r\n\t};\r\n\r\n\tdialog.openWarning = function(msg) {\r\n\t\treturn openDialog(msg, WARNING);\r\n\t};\r\n\r\n\tdialog.openInfo = function(msg) {\r\n\t\treturn openDialog(msg, INFO);\r\n\t};\r\n\r\n\tvar openDialog = function(msg, type, cancelButton) {\r\n\t\treturn ngDialog.openConfirm({\r\n\t\t\ttemplate: TEMPLATE,\r\n\t\t\tdata: {\r\n\t\t\t\tmsg: msg,\r\n\t\t\t\ticonClass: getIconClass(type),\r\n\t\t\t\tcancelButton: cancelButton\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tvar getIconClass = function(type) {\r\n\t\treturn iconClassMap[type];\r\n\t};\r\n\r\n\treturn dialog;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/dialog.js\n **/","'use strict';\n\nangular.module('VirtualBookshelf').factory('user', function (data) {\n\tvar user = {};\n\n\tvar loaded = false;\n\tvar _dataObject = null;\n\tvar library = null;\n\n\tuser.load = function () {\n\t\tvar scope = this;\n\n\t\treturn data.getUser().then(function (dto) {\n\t\t\tscope.setDataObject(dto);\n\t\t\tscope.setLibrary();\n\t\t\tloaded = true;\n\t\t});\n\t};\n\n\tuser.logout = function () {\n\t\treturn data.logout().then(function () {\n\t\t\treturn user.load();\n\t\t});\n\t};\n\n\tuser.setDataObject = function (dataObject) {\n\t\t_dataObject = dataObject;\n\t};\n\n\tuser.getLibrary = function () {\n\t\treturn library;\n\t};\n\n\tuser.getName = function () {\n\t\treturn _dataObject && _dataObject.name;\n\t};\n\n\tuser.getEmail = function () {\n\t\treturn _dataObject && _dataObject.email;\n\t};\n\n\tuser.setLibrary = function (libraryId) {\n\t\tlibraryId = libraryId || window.location.pathname.substring(1);\n\t\tlibrary = Number(libraryId);\n\t};\n\n\tuser.getId = function () {\n\t\treturn _dataObject && _dataObject.id;\n\t};\n\n\tuser.isAuthorized = function () {\n\t\treturn _dataObject && !user.isTemporary();\n\t};\n\n\tuser.isLoaded = function () {\n\t\treturn loaded;\n\t};\n\n\tuser.isTemporary = function () {\n\t\treturn Boolean(_dataObject && _dataObject.temporary);\n\t};\n\n\tuser.isGoogle = function () {\n\t\treturn Boolean(_dataObject && _dataObject.googleId);\n\t};\n\n\tuser.isTwitter = function () {\n\t\treturn Boolean(_dataObject && _dataObject.twitterId);\n\t};\n\n\tuser.isFacebook = function () {\n\t\treturn Boolean(_dataObject && _dataObject.facebookId);\n\t};\n\n\tuser.isVkontakte = function () {\n\t\treturn Boolean(_dataObject && _dataObject.vkontakteId);\n\t};\n\n\treturn user;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/user.js\n **/","angular.module('VirtualBookshelf')\r\n.factory('user', function (data) {\r\n\tvar user = {};\r\n\r\n\tvar loaded = false;\r\n\tvar _dataObject = null;\r\n\tvar library = null;\r\n\r\n\tuser.load = function() {\r\n\t\tvar scope = this;\r\n\r\n\t\treturn data.getUser().then(function (dto) {\r\n\t\t\tscope.setDataObject(dto);\r\n\t\t\tscope.setLibrary();\r\n\t\t\tloaded = true;\r\n\t\t});\r\n\t};\r\n\r\n\tuser.logout = function() {\r\n\t\treturn data.logout().then(function () {\r\n\t\t\treturn user.load();\r\n\t\t});\r\n\t};\r\n\r\n\tuser.setDataObject = function(dataObject) {\r\n\t\t_dataObject = dataObject;\r\n\t};\r\n\r\n\tuser.getLibrary = function() {\r\n\t\treturn library;\r\n\t};\r\n\r\n\tuser.getName = function() {\r\n\t\treturn _dataObject && _dataObject.name;\r\n\t};\r\n\r\n\tuser.getEmail = function() {\r\n\t\treturn _dataObject && _dataObject.email;\r\n\t};\r\n\r\n\tuser.setLibrary = function(libraryId) {\r\n\t\tlibraryId = libraryId || window.location.pathname.substring(1);\r\n\t\tlibrary = Number(libraryId);\r\n\t};\r\n\r\n\tuser.getId = function() {\r\n\t\treturn _dataObject && _dataObject.id;\r\n\t};\r\n\r\n\tuser.isAuthorized = function() {\r\n\t\treturn _dataObject && !user.isTemporary();\r\n\t};\r\n\r\n\tuser.isLoaded = function() {\r\n\t\treturn loaded;\r\n\t};\r\n\r\n\tuser.isTemporary = function() {\r\n\t\treturn Boolean(_dataObject && _dataObject.temporary);\r\n\t};\r\n\r\n\tuser.isGoogle = function() {\r\n\t\treturn Boolean(_dataObject && _dataObject.googleId);\r\n\t};\r\n\r\n\tuser.isTwitter = function() {\r\n\t\treturn Boolean(_dataObject && _dataObject.twitterId);\r\n\t};\r\n\r\n\tuser.isFacebook = function() {\r\n\t\treturn Boolean(_dataObject && _dataObject.facebookId);\r\n\t};\r\n\r\n\tuser.isVkontakte = function() {\r\n\t\treturn Boolean(_dataObject && _dataObject.vkontakteId);\r\n\t};\r\n\r\n\treturn user;\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/user.js\n **/","'use strict';\n\nrequire('../models/BaseObject');\n\nrequire('../data');\n\nrequire('../scene/selector');\n\nrequire('../environment');\n\nrequire('../cache');\n\nrequire('../scene/gridCalculator');\n\nangular.module('VirtualBookshelf').factory('locator', function ($q, $log, BaseObject, data, selector, environment, cache, gridCalculator) {\n\tvar locator = {};\n\n\tvar debugEnabled = false;\n\n\tlocator.centerObject = function (obj) {\n\t\tvar targetBB = obj.geometry.boundingBox;\n\t\tvar spaceBB = environment.library.geometry.boundingBox;\n\n\t\tvar matrixPrecision = new THREE.Vector3(targetBB.max.x - targetBB.min.x + 0.01, 0, targetBB.max.z - targetBB.min.z + 0.01);\n\t\tvar occupiedMatrix = getOccupiedMatrix(environment.library.children, matrixPrecision, obj);\n\t\tvar freePosition = getFreeMatrix(occupiedMatrix, spaceBB, targetBB, matrixPrecision);\n\n\t\tobj.position.setX(freePosition.x);\n\t\tobj.position.setZ(freePosition.z);\n\t};\n\n\tlocator.placeSection = function (sectionDto) {\n\t\tvar promise = cache.getSection(sectionDto.model).then(function (sectionCache) {\n\t\t\tvar sectionBB = sectionCache.geometry.boundingBox;\n\t\t\tvar libraryBB = environment.library.geometry.boundingBox;\n\t\t\tvar freePlace = getFreePlace(environment.library.children, libraryBB, sectionBB);\n\n\t\t\treturn freePlace ? saveSection(sectionDto, freePlace) : $q.reject('there is no free space');\n\t\t}).then(function (newDto) {\n\t\t\treturn environment.updateSection(newDto);\n\t\t});\n\n\t\treturn promise;\n\t};\n\n\tvar saveSection = function saveSection(dto, position) {\n\t\tdto.libraryId = environment.library.getId();\n\t\tdto.pos_x = position.x;\n\t\tdto.pos_y = position.y;\n\t\tdto.pos_z = position.z;\n\n\t\treturn data.postSection(dto);\n\t};\n\n\tlocator.placeBook = function (bookDto, shelf) {\n\t\tvar promise = cache.getBook(bookDto.model).then(function (bookCache) {\n\t\t\tvar shelfBB = shelf.geometry.boundingBox;\n\t\t\tvar bookBB = bookCache.geometry.boundingBox;\n\t\t\tvar freePlace = getFreePlace(shelf.children, shelfBB, bookBB);\n\n\t\t\treturn freePlace ? saveBook(bookDto, freePlace, shelf) : $q.reject('there is no free space');\n\t\t}).then(function (newDto) {\n\t\t\treturn environment.updateBook(newDto);\n\t\t});\n\n\t\treturn promise;\n\t};\n\n\tvar saveBook = function saveBook(dto, position, shelf) {\n\t\tdto.shelfId = shelf.getId();\n\t\tdto.sectionId = shelf.parent.getId();\n\t\tdto.pos_x = position.x;\n\t\tdto.pos_y = position.y;\n\t\tdto.pos_z = position.z;\n\n\t\treturn data.postBook(dto);\n\t};\n\n\tlocator.unplaceBook = function (bookDto) {\n\t\tvar promise;\n\t\tbookDto.sectionId = null;\n\n\t\tpromise = data.postBook(bookDto).then(function () {\n\t\t\treturn environment.updateBook(bookDto);\n\t\t});\n\n\t\treturn promise;\n\t};\n\n\tvar getFreePlace = function getFreePlace(objects, spaceBB, targetBB) {\n\t\tvar matrixPrecision = new THREE.Vector3(targetBB.max.x - targetBB.min.x + 0.01, 0, targetBB.max.z - targetBB.min.z + 0.01);\n\t\tvar occupiedMatrix = getOccupiedMatrix(objects, matrixPrecision);\n\t\tvar freePosition = getFreeMatrixCells(occupiedMatrix, spaceBB, targetBB, matrixPrecision);\n\n\t\tif (debugEnabled) {\n\t\t\tdebugShowFree(freePosition, matrixPrecision, environment.library);\n\t\t}\n\n\t\treturn freePosition;\n\t};\n\n\tvar getFreeMatrix = function getFreeMatrix(occupiedMatrix, spaceBB, targetBB, matrixPrecision) {\n\t\tvar DISTANCE = 1.3;\n\n\t\tvar xIndex;\n\t\tvar zIndex;\n\t\tvar position = {};\n\t\tvar minPosition = {};\n\t\tvar edges = gridCalculator.getEdges(spaceBB, matrixPrecision);\n\n\t\tfor (zIndex = edges.minZCell; zIndex <= edges.maxZCell; zIndex++) {\n\t\t\tfor (xIndex = edges.minXCell; xIndex <= edges.maxXCell; xIndex++) {\n\t\t\t\tif (!occupiedMatrix[zIndex] || !occupiedMatrix[zIndex][xIndex]) {\n\t\t\t\t\tposition.pos = getPositionFromCells([xIndex], zIndex, matrixPrecision, spaceBB, targetBB);\n\t\t\t\t\tposition.length = position.pos.length();\n\n\t\t\t\t\tif (!minPosition.pos || position.length < minPosition.length) {\n\t\t\t\t\t\tminPosition.pos = position.pos;\n\t\t\t\t\t\tminPosition.length = position.length;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (minPosition.pos && minPosition.length < DISTANCE) {\n\t\t\t\t\t\treturn minPosition.pos;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn minPosition.pos;\n\t};\n\n\tvar getFreeMatrixCells = function getFreeMatrixCells(occupiedMatrix, spaceBB, targetBB, matrixPrecision) {\n\t\tvar targetCellsSize = 1;\n\t\tvar freeCellsCount = 0;\n\t\tvar freeCellsStart;\n\t\tvar xIndex;\n\t\tvar zIndex;\n\t\tvar cells;\n\t\tvar edges = gridCalculator.getEdges(spaceBB, matrixPrecision);\n\n\t\tfor (zIndex = edges.minZCell; zIndex <= edges.maxZCell; zIndex++) {\n\t\t\tfor (xIndex = edges.minXCell; xIndex <= edges.maxXCell; xIndex++) {\n\t\t\t\tif (!occupiedMatrix[zIndex] || !occupiedMatrix[zIndex][xIndex]) {\n\t\t\t\t\tfreeCellsStart = freeCellsStart || xIndex;\n\t\t\t\t\tfreeCellsCount++;\n\n\t\t\t\t\tif (freeCellsCount === targetCellsSize) {\n\t\t\t\t\t\tcells = _.range(freeCellsStart, freeCellsStart + freeCellsCount);\n\t\t\t\t\t\treturn getPositionFromCells(cells, zIndex, matrixPrecision, spaceBB, targetBB);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfreeCellsCount = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t};\n\n\tvar getPositionFromCells = function getPositionFromCells(cells, zIndex, matrixPrecision, spaceBB, targetBB) {\n\t\tvar center = gridCalculator.cellToPos(new THREE.Vector3(cells[0], 0, zIndex), matrixPrecision);\n\n\t\tvar offset = new THREE.Vector3();\n\t\toffset.addVectors(targetBB.min, targetBB.max);\n\t\toffset.multiplyScalar(-0.5);\n\n\t\treturn center.add(offset).setY(getBottomY(spaceBB, targetBB));\n\t};\n\n\tvar getBottomY = function getBottomY(spaceBB, targetBB) {\n\t\treturn spaceBB.min.y - targetBB.min.y + environment.CLEARANCE;\n\t};\n\n\tvar getOccupiedMatrix = function getOccupiedMatrix(objects, matrixPrecision, obj) {\n\t\tvar result = {};\n\t\tvar objectBB;\n\t\tvar minKeyX;\n\t\tvar maxKeyX;\n\t\tvar minKeyZ;\n\t\tvar maxKeyZ;\n\t\tvar z, x;\n\n\t\tobjects.forEach(function (child) {\n\t\t\tif (child instanceof BaseObject && child !== obj) {\n\t\t\t\tobjectBB = child.boundingBox;\n\n\t\t\t\tminKeyX = Math.round((objectBB.center.x - objectBB.radius.x) / matrixPrecision.x);\n\t\t\t\tmaxKeyX = Math.round((objectBB.center.x + objectBB.radius.x) / matrixPrecision.x);\n\t\t\t\tminKeyZ = Math.round((objectBB.center.z - objectBB.radius.z) / matrixPrecision.z);\n\t\t\t\tmaxKeyZ = Math.round((objectBB.center.z + objectBB.radius.z) / matrixPrecision.z);\n\n\t\t\t\tfor (z = minKeyZ; z <= maxKeyZ; z++) {\n\t\t\t\t\tresult[z] = result[z] || {};\n\t\t\t\t\tvar debugCells = [];\n\n\t\t\t\t\tfor (x = minKeyX; x <= maxKeyX; x++) {\n\t\t\t\t\t\tresult[z][x] = true;\n\t\t\t\t\t\tdebugCells.push(x);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (debugEnabled) {\n\t\t\t\t\t\tdebugShowBB(child);\n\t\t\t\t\t\tdebugAddOccupied(debugCells, matrixPrecision, child, z);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn result;\n\t};\n\n\tlocator.debug = function () {\n\t\tcache.getSection('bookshelf_0001').then(function (sectionCache) {\n\t\t\tdebugEnabled = true;\n\t\t\tvar sectionBB = sectionCache.geometry.boundingBox;\n\t\t\tvar libraryBB = environment.library.geometry.boundingBox;\n\t\t\tgetFreePlace(environment.library.children, libraryBB, sectionBB);\n\t\t\tdebugEnabled = false;\n\t\t});\n\t};\n\n\tvar debugShowBB = function debugShowBB(obj) {\n\t\tvar objectBB = obj.boundingBox;\n\t\tvar objBox = new THREE.Mesh(new THREE.BoxGeometry(objectBB.radius.x * 2, objectBB.radius.y * 2 + 0.1, objectBB.radius.z * 2), new THREE.MeshLambertMaterial({\n\t\t\tcolor: 0xbbbbff,\n\t\t\topacity: 0.2,\n\t\t\ttransparent: true\n\t\t}));\n\n\t\tobjBox.position.x = objectBB.center.x;\n\t\tobjBox.position.y = objectBB.center.y;\n\t\tobjBox.position.z = objectBB.center.z;\n\n\t\tobj.parent.add(objBox);\n\t};\n\n\tvar debugAddOccupied = function debugAddOccupied(cells, matrixPrecision, obj, zKey) {\n\t\tcells.forEach(function (cell) {\n\t\t\tvar pos = getPositionFromCells([cell], zKey, matrixPrecision, obj.parent.geometry.boundingBox, obj.geometry.boundingBox);\n\t\t\tvar cellBox = new THREE.Mesh(new THREE.BoxGeometry(matrixPrecision.x - 0.01, 0.01, matrixPrecision.z - 0.01), new THREE.MeshLambertMaterial({ color: 0xff0000 }));\n\n\t\t\tcellBox.position.set(pos.x, pos.y, pos.z);\n\t\t\tobj.parent.add(cellBox);\n\t\t});\n\t};\n\n\tvar debugShowFree = function debugShowFree(position, matrixPrecision, obj) {\n\t\tif (position) {\n\t\t\tvar cellBox = new THREE.Mesh(new THREE.BoxGeometry(matrixPrecision.x, 0.5, matrixPrecision.z), new THREE.MeshLambertMaterial({ color: 0x00ff00 }));\n\t\t\tcellBox.position.set(position.x, position.y, position.z);\n\t\t\tobj.parent.add(cellBox);\n\t\t}\n\t};\n\n\treturn locator;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/scene/locator.js\n **/","import '../models/BaseObject';\r\nimport '../data';\r\nimport '../scene/selector';\r\nimport '../environment';\r\nimport '../cache';\r\nimport '../scene/gridCalculator';\r\n\r\nangular.module('VirtualBookshelf')\r\n.factory('locator', function ($q, $log, BaseObject, data, selector, environment, cache, gridCalculator) {\r\n\tvar locator = {};\r\n\r\n\tvar debugEnabled = false;\r\n\r\n\tlocator.centerObject = function(obj) {\r\n\t\tvar targetBB = obj.geometry.boundingBox;\r\n\t\tvar spaceBB = environment.library.geometry.boundingBox;\r\n\r\n\t\tvar matrixPrecision = new THREE.Vector3(targetBB.max.x - targetBB.min.x + 0.01, 0, targetBB.max.z - targetBB.min.z + 0.01);\r\n\t\tvar occupiedMatrix = getOccupiedMatrix(environment.library.children, matrixPrecision, obj);\r\n\t\tvar freePosition = getFreeMatrix(occupiedMatrix, spaceBB, targetBB, matrixPrecision);\t\t\r\n\r\n\t\tobj.position.setX(freePosition.x);\r\n\t\tobj.position.setZ(freePosition.z);\r\n\t};\r\n\r\n\tlocator.placeSection = function(sectionDto) {\r\n\t\tvar promise = cache.getSection(sectionDto.model).then(function (sectionCache) {\r\n\t\t\tvar sectionBB = sectionCache.geometry.boundingBox;\r\n\t\t\tvar libraryBB = environment.library.geometry.boundingBox;\r\n\t\t\tvar freePlace = getFreePlace(environment.library.children, libraryBB, sectionBB);\r\n\r\n\t\t\treturn freePlace ?\r\n\t\t\t\tsaveSection(sectionDto, freePlace) :\r\n\t\t\t\t$q.reject('there is no free space');\r\n\t\t}).then(function (newDto) {\r\n\t\t\treturn environment.updateSection(newDto);\r\n\t\t});\r\n\r\n\t\treturn promise;\r\n\t};\r\n\r\n\tvar saveSection = function(dto, position) {\r\n\t\tdto.libraryId = environment.library.getId();\r\n\t\tdto.pos_x = position.x;\r\n\t\tdto.pos_y = position.y;\r\n\t\tdto.pos_z = position.z;\r\n\r\n\t\treturn data.postSection(dto);\r\n\t};\r\n\r\n\tlocator.placeBook = function(bookDto, shelf) {\r\n\t\tvar promise = cache.getBook(bookDto.model).then(function (bookCache) {\r\n\t\t\tvar shelfBB = shelf.geometry.boundingBox;\r\n\t\t\tvar bookBB = bookCache.geometry.boundingBox;\r\n\t\t\tvar freePlace = getFreePlace(shelf.children, shelfBB, bookBB);\r\n\r\n\t\t\treturn freePlace ? \r\n\t\t\t\tsaveBook(bookDto, freePlace, shelf) : \r\n\t\t\t\t$q.reject('there is no free space');\r\n\t\t}).then(function (newDto) {\r\n\t\t\treturn environment.updateBook(newDto);\r\n\t\t});\r\n\r\n\t\treturn promise;\r\n\t};\r\n\r\n\tvar saveBook = function(dto, position, shelf) {\r\n\t\tdto.shelfId = shelf.getId();\r\n\t\tdto.sectionId = shelf.parent.getId();\r\n\t\tdto.pos_x = position.x;\r\n\t\tdto.pos_y = position.y;\r\n\t\tdto.pos_z = position.z;\r\n\r\n\t\treturn data.postBook(dto);\r\n\t};\r\n\r\n\tlocator.unplaceBook = function(bookDto) {\r\n\t\tvar promise;\r\n\t\tbookDto.sectionId = null;\r\n\r\n\t\tpromise = data.postBook(bookDto).then(function () {\r\n\t\t\treturn environment.updateBook(bookDto);\r\n\t\t});\r\n\r\n\t\treturn promise;\r\n\t};\r\n\r\n\tvar getFreePlace = function(objects, spaceBB, targetBB) {\r\n\t\tvar matrixPrecision = new THREE.Vector3(targetBB.max.x - targetBB.min.x + 0.01, 0, targetBB.max.z - targetBB.min.z + 0.01);\r\n\t\tvar occupiedMatrix = getOccupiedMatrix(objects, matrixPrecision);\r\n\t\tvar freePosition = getFreeMatrixCells(occupiedMatrix, spaceBB, targetBB, matrixPrecision);\r\n\t\t\r\n\t\tif (debugEnabled) {\r\n\t\t\tdebugShowFree(freePosition, matrixPrecision, environment.library);\r\n\t\t}\r\n\r\n\t\treturn freePosition;\r\n\t};\r\n\r\n\tvar getFreeMatrix = function(occupiedMatrix, spaceBB, targetBB, matrixPrecision) {\r\n\t\tvar DISTANCE = 1.3;\r\n\r\n\t\tvar xIndex;\r\n\t\tvar zIndex;\r\n\t\tvar position = {};\r\n\t\tvar minPosition = {};\r\n\t\tvar edges = gridCalculator.getEdges(spaceBB, matrixPrecision);\r\n\r\n\t\tfor (zIndex = edges.minZCell; zIndex <= edges.maxZCell; zIndex++) {\r\n\t\t\tfor (xIndex = edges.minXCell; xIndex <= edges.maxXCell; xIndex++) {\r\n\t\t\t\tif (!occupiedMatrix[zIndex] || !occupiedMatrix[zIndex][xIndex]) {\r\n\t\t\t\t\tposition.pos = getPositionFromCells([xIndex], zIndex, matrixPrecision, spaceBB, targetBB);\r\n\t\t\t\t\tposition.length = position.pos.length();\r\n\r\n\t\t\t\t\tif(!minPosition.pos || position.length < minPosition.length) {\r\n\t\t\t\t\t\tminPosition.pos = position.pos;\r\n\t\t\t\t\t\tminPosition.length = position.length;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(minPosition.pos && minPosition.length < DISTANCE) {\r\n\t\t\t\t\t\treturn minPosition.pos;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn minPosition.pos;\r\n\t};\r\n\r\n\tvar getFreeMatrixCells = function(occupiedMatrix, spaceBB, targetBB, matrixPrecision) {\r\n\t\tvar targetCellsSize = 1;\r\n\t\tvar freeCellsCount = 0;\r\n\t\tvar freeCellsStart;\r\n\t\tvar xIndex;\r\n\t\tvar zIndex;\r\n\t\tvar cells;\r\n\t\tvar edges = gridCalculator.getEdges(spaceBB, matrixPrecision);\r\n\r\n\t\tfor (zIndex = edges.minZCell; zIndex <= edges.maxZCell; zIndex++) {\r\n\t\t\tfor (xIndex = edges.minXCell; xIndex <= edges.maxXCell; xIndex++) {\r\n\t\t\t\tif (!occupiedMatrix[zIndex] || !occupiedMatrix[zIndex][xIndex]) {\r\n\t\t\t\t\tfreeCellsStart = freeCellsStart || xIndex;\r\n\t\t\t\t\tfreeCellsCount++;\r\n\r\n\t\t\t\t\tif (freeCellsCount === targetCellsSize) {\r\n\t\t\t\t\t\tcells = _.range(freeCellsStart, freeCellsStart + freeCellsCount);\r\n\t\t\t\t\t\treturn getPositionFromCells(cells, zIndex, matrixPrecision, spaceBB, targetBB);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfreeCellsCount = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t};\r\n\r\n\tvar getPositionFromCells = function(cells, zIndex, matrixPrecision, spaceBB, targetBB) {\r\n\t\tvar center = gridCalculator.cellToPos(new THREE.Vector3(cells[0], 0, zIndex), matrixPrecision);\r\n\r\n\t\tvar offset = new THREE.Vector3();\r\n\t\toffset.addVectors(targetBB.min, targetBB.max);\r\n\t\toffset.multiplyScalar(-0.5);\r\n\r\n\t\treturn center.add(offset).setY(getBottomY(spaceBB, targetBB));\r\n\t};\r\n\r\n\tvar getBottomY = function(spaceBB, targetBB) {\r\n\t\treturn spaceBB.min.y - targetBB.min.y + environment.CLEARANCE;\r\n\t};\r\n\r\n\tvar getOccupiedMatrix = function(objects, matrixPrecision, obj) {\r\n\t\tvar result = {};\r\n\t\tvar objectBB;\r\n\t\tvar minKeyX;\r\n\t\tvar maxKeyX;\r\n\t\tvar minKeyZ;\r\n\t\tvar maxKeyZ;\t\t\r\n\t\tvar z, x;\r\n\r\n\t\tobjects.forEach(function (child) {\r\n\t\t\tif(child instanceof BaseObject && child !== obj) {\r\n\t\t\t\tobjectBB = child.boundingBox;\r\n\r\n\t\t\t\tminKeyX = Math.round((objectBB.center.x - objectBB.radius.x) / matrixPrecision.x);\r\n\t\t\t\tmaxKeyX = Math.round((objectBB.center.x + objectBB.radius.x) / matrixPrecision.x);\r\n\t\t\t\tminKeyZ = Math.round((objectBB.center.z - objectBB.radius.z) / matrixPrecision.z);\r\n\t\t\t\tmaxKeyZ = Math.round((objectBB.center.z + objectBB.radius.z) / matrixPrecision.z);\r\n\r\n\t\t\t\tfor(z = minKeyZ; z <= maxKeyZ; z++) {\r\n\t\t\t\t\tresult[z] = result[z] || {};\r\n\t\t\t\t\tvar debugCells = [];\r\n\r\n\t\t\t\t\tfor(x = minKeyX; x <= maxKeyX; x++) {\r\n\t\t\t\t\t\tresult[z][x] = true;\r\n\t\t\t\t\t\tdebugCells.push(x);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(debugEnabled) {\r\n\t\t\t\t\t\tdebugShowBB(child);\r\n\t\t\t\t\t\tdebugAddOccupied(debugCells, matrixPrecision, child, z);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn result;\r\n\t};\r\n\r\n\tlocator.debug = function() {\r\n\t\tcache.getSection('bookshelf_0001').then(function (sectionCache) {\r\n\t\t\tdebugEnabled = true;\r\n\t\t\tvar sectionBB = sectionCache.geometry.boundingBox;\r\n\t\t\tvar libraryBB = environment.library.geometry.boundingBox;\r\n\t\t\tgetFreePlace(environment.library.children, libraryBB, sectionBB);\r\n\t\t\tdebugEnabled = false;\r\n\t\t});\r\n\t};\r\n\r\n\tvar debugShowBB = function(obj) {\r\n\t\tvar objectBB = obj.boundingBox;\r\n\t\tvar objBox = new THREE.Mesh(\r\n\t\t\tnew THREE.BoxGeometry(\r\n\t\t\t\tobjectBB.radius.x * 2, \r\n\t\t\t\tobjectBB.radius.y * 2 + 0.1, \r\n\t\t\t\tobjectBB.radius.z * 2\r\n\t\t\t), \r\n\t\t\tnew THREE.MeshLambertMaterial({\r\n\t\t\t\tcolor: 0xbbbbff,\r\n\t\t\t\topacity: 0.2,\r\n\t\t\t\ttransparent: true\r\n\t\t\t})\r\n\t\t);\r\n\t\t\r\n\t\tobjBox.position.x = objectBB.center.x;\r\n\t\tobjBox.position.y = objectBB.center.y;\r\n\t\tobjBox.position.z = objectBB.center.z;\r\n\r\n\t\tobj.parent.add(objBox);\r\n\t};\r\n\r\n\tvar debugAddOccupied = function(cells, matrixPrecision, obj, zKey) {\r\n\t\tcells.forEach(function (cell) {\r\n\t\t\tvar pos = getPositionFromCells([cell], zKey, matrixPrecision, obj.parent.geometry.boundingBox, obj.geometry.boundingBox);\r\n\t\t\tvar cellBox = new THREE.Mesh(new THREE.BoxGeometry(matrixPrecision.x - 0.01, 0.01, matrixPrecision.z - 0.01), new THREE.MeshLambertMaterial({color: 0xff0000}));\r\n\t\t\t\r\n\t\t\tcellBox.position.set(pos.x, pos.y, pos.z);\r\n\t\t\tobj.parent.add(cellBox);\r\n\t\t});\r\n\t};\r\n\r\n\tvar debugShowFree = function(position, matrixPrecision, obj) {\r\n\t\tif (position) {\r\n\t\t\tvar cellBox = new THREE.Mesh(new THREE.BoxGeometry(matrixPrecision.x, 0.5, matrixPrecision.z), new THREE.MeshLambertMaterial({color: 0x00ff00}));\r\n\t\t\tcellBox.position.set(position.x, position.y, position.z);\r\n\t\t\tobj.parent.add(cellBox);\r\n\t\t}\r\n\t};\r\n\r\n\treturn locator;\t\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/scene/locator.js\n **/","'use strict';\n\nangular.module('VirtualBookshelf').factory('gridCalculator', function () {\n\tvar gridCalculator = {};\n\n\tgridCalculator.getEdges = function (spaceBB, precision) {\n\t\tvar posMin = this.posToCell(spaceBB.min, precision);\n\t\tvar posMax = this.posToCell(spaceBB.max, precision);\n\n\t\treturn {\n\t\t\tminXCell: posMin.x + 1,\n\t\t\tmaxXCell: posMax.x - 1,\n\t\t\tminZCell: posMin.z + 1,\n\t\t\tmaxZCell: posMax.z - 1\n\t\t};\n\t};\n\n\tgridCalculator.posToCell = function (pos, precision) {\n\t\treturn pos.clone().divide(precision).round();\n\t};\n\n\tgridCalculator.cellToPos = function (cell, precision) {\n\t\treturn cell.clone().multiply(precision);\n\t};\n\n\treturn gridCalculator;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/scene/gridCalculator.js\n **/","angular.module('VirtualBookshelf')\r\n.factory('gridCalculator', function () {\r\n\tvar gridCalculator = {};\r\n\r\n\tgridCalculator.getEdges = function(spaceBB, precision) {\r\n\t\tvar posMin = this.posToCell(spaceBB.min, precision);\r\n\t\tvar posMax = this.posToCell(spaceBB.max, precision);\r\n\t\t\r\n\t\treturn {\r\n\t\t\tminXCell: posMin.x + 1,\r\n\t\t\tmaxXCell: posMax.x - 1,\r\n\t\t\tminZCell: posMin.z + 1,\r\n\t\t\tmaxZCell: posMax.z - 1\r\n\t\t};\r\n\t};\r\n\r\n\tgridCalculator.posToCell = function(pos, precision) {\r\n\t\treturn pos.clone().divide(precision).round();\r\n\t};\r\n\r\n\tgridCalculator.cellToPos = function(cell, precision) {\r\n\t\treturn cell.clone().multiply(precision);\r\n\t};\r\n\r\n\treturn gridCalculator;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/scene/gridCalculator.js\n **/","'use strict';\n\nrequire('../ui/selectLibrary');\n\nrequire('../ui/catalog');\n\nrequire('../user');\n\nangular.module('VirtualBookshelf').factory('userData', function ($q, selectLibrary, catalog, user) {\n\tvar userData = {};\n\n\tuserData.load = function () {\n\t\treturn $q.all([selectLibrary.updateList(), catalog.loadBooks(user.getId())]);\n\t};\n\n\treturn userData;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/ui/userData.js\n **/","import '../ui/selectLibrary';\r\nimport '../ui/catalog';\r\nimport '../user';\r\n\r\nangular.module('VirtualBookshelf')\r\n.factory('userData', function ($q, selectLibrary, catalog, user) {\r\n\tvar userData = {};\r\n\r\n\tuserData.load = function() {\r\n\t\treturn $q.all([\r\n\t\t\tselectLibrary.updateList(), \r\n\t\t\tcatalog.loadBooks(user.getId())\r\n\t\t]);\r\n\t};\r\n\r\n\treturn userData;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/ui/userData.js\n **/","'use strict';\n\nangular.module('VirtualBookshelf').factory('selectLibrary', function ($q, data, environment, user, ngDialog) {\n\tvar selectLibrary = {};\n\n\tvar TEMPLATE = 'selectLibraryDialog';\n\n\tselectLibrary.list = [];\n\n\tselectLibrary.show = function () {\n\t\tngDialog.openConfirm({ template: TEMPLATE });\n\t};\n\n\tselectLibrary.isAvailable = function () {\n\t\treturn selectLibrary.list.length > 0;\n\t};\n\n\tselectLibrary.isUserLibrary = function () {\n\t\treturn environment.library && environment.library.dataObject.userId === user.getId();\n\t};\n\n\tselectLibrary.updateList = function () {\n\t\tvar scope = this;\n\t\tvar promise;\n\n\t\tif (user.isAuthorized()) {\n\t\t\tpromise = data.getLibraries().then(function (libraries) {\n\t\t\t\tscope.list = libraries;\n\t\t\t});\n\t\t} else {\n\t\t\tscope.list = [];\n\t\t\tpromise = $q.when(scope.list);\n\t\t}\n\n\t\treturn promise;\n\t};\n\n\tselectLibrary.go = environment.goToLibrary;\n\n\treturn selectLibrary;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/ui/selectLibrary.js\n **/","angular.module('VirtualBookshelf')\r\n.factory('selectLibrary', function ($q, data, environment, user, ngDialog) {\r\n\tvar selectLibrary = {};\r\n\r\n\tvar TEMPLATE = 'selectLibraryDialog';\r\n\r\n\tselectLibrary.list = [];\r\n\r\n\tselectLibrary.show = function() {\r\n\t\tngDialog.openConfirm({template: TEMPLATE});\r\n\t};\r\n\r\n\tselectLibrary.isAvailable = function() {\r\n\t\treturn selectLibrary.list.length > 0;\r\n\t};\r\n\r\n\tselectLibrary.isUserLibrary = function() {\r\n\t\treturn environment.library && environment.library.dataObject.userId === user.getId();\r\n\t};\r\n\r\n\tselectLibrary.updateList = function() {\r\n\t\tvar scope = this;\r\n\t\tvar promise;\r\n\r\n\t\tif(user.isAuthorized()) {\r\n\t\t    promise = data.getLibraries().then(function (libraries) {\r\n\t            scope.list = libraries;\r\n\t    \t});\r\n\t\t} else {\r\n\t\t\tscope.list = [];\r\n\t\t\tpromise = $q.when(scope.list);\r\n\t\t}\r\n\r\n    \treturn promise;\r\n\t};\r\n\r\n\tselectLibrary.go = environment.goToLibrary;\r\n\r\n\treturn selectLibrary;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/ui/selectLibrary.js\n **/","'use strict';\n\nrequire('../services/ui/mainMenu');\n\nangular.module('VirtualBookshelf').controller('MainMenuCtrl', function (mainMenu, authorization, selectLibrary) {\n\tthis.isShow = mainMenu.isShow;\n\tthis.createListShow = mainMenu.createListShow;\n\tthis.showSelectLibrary = mainMenu.showSelectLibrary;\n\tthis.showFeedback = mainMenu.showFeedback;\n\tthis.showLinkAccount = mainMenu.showLinkAccount;\n\tthis.isLinkAccountAvailable = mainMenu.isLinkAccountAvailable;\n\tthis.isCreateListShow = mainMenu.isCreateListShow;\n\tthis.showCreateLibrary = mainMenu.showCreateLibrary;\n\tthis.showCreateSection = mainMenu.showCreateSection;\n\tthis.trigger = mainMenu.trigger;\n\n\tthis.authorization = authorization;\n\tthis.selectLibrary = selectLibrary;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/controllers/MainMenuCtrl.js\n **/","import '../services/ui/mainMenu';\r\n\r\nangular.module('VirtualBookshelf')\r\n.controller('MainMenuCtrl', function (mainMenu, authorization, selectLibrary) {\r\n\tthis.isShow = mainMenu.isShow;\r\n\tthis.createListShow = mainMenu.createListShow;\r\n\tthis.showSelectLibrary = mainMenu.showSelectLibrary;\r\n\tthis.showFeedback = mainMenu.showFeedback;\r\n\tthis.showLinkAccount = mainMenu.showLinkAccount;\r\n\tthis.isLinkAccountAvailable = mainMenu.isLinkAccountAvailable;\r\n\tthis.isCreateListShow = mainMenu.isCreateListShow;\r\n\tthis.showCreateLibrary = mainMenu.showCreateLibrary;\r\n\tthis.showCreateSection = mainMenu.showCreateSection;\r\n\tthis.trigger = mainMenu.trigger;\r\n\r\n\tthis.authorization = authorization;\r\n    this.selectLibrary = selectLibrary;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/controllers/MainMenuCtrl.js\n **/","'use strict';\n\nrequire('../data');\n\nrequire('./bookEdit');\n\nrequire('./feedback');\n\nrequire('./selectLibrary');\n\nrequire('./createLibrary');\n\nrequire('./createSection');\n\nrequire('./linkAccount');\n\nrequire('./authorization');\n\nangular.module('VirtualBookshelf').factory('mainMenu', function ($log, data, bookEdit, feedback, selectLibrary, createLibrary, createSection, linkAccount, authorization) {\n\tvar mainMenu = {};\n\n\tvar show = false;\n\tvar createListShow = false;\n\n\tmainMenu.isShow = function () {\n\t\treturn show;\n\t};\n\n\tmainMenu.show = function () {\n\t\tmainMenu.hideAll();\n\t\tshow = true;\n\t};\n\n\tmainMenu.hide = function () {\n\t\tshow = false;\n\t};\n\n\tmainMenu.isCreateListShow = function () {\n\t\treturn createListShow;\n\t};\n\n\tmainMenu.createListShow = function () {\n\t\tmainMenu.hideAll();\n\t\tcreateListShow = true;\n\t};\n\n\tmainMenu.createListHide = function () {\n\t\tcreateListShow = false;\n\t};\n\n\tmainMenu.hideAll = function () {\n\t\tmainMenu.hide();\n\t\tmainMenu.createListHide();\n\t};\n\n\tmainMenu.trigger = function () {\n\t\tif (mainMenu.isShow()) {\n\t\t\tmainMenu.hide();\n\t\t} else {\n\t\t\tmainMenu.show();\n\t\t}\n\t};\n\n\tmainMenu.showFeedback = function () {\n\t\tmainMenu.hideAll();\n\t\tfeedback.show();\n\t};\n\n\tmainMenu.showSelectLibrary = function () {\n\t\tmainMenu.hideAll();\n\t\tselectLibrary.show();\n\t};\n\n\tmainMenu.showCreateLibrary = function () {\n\t\tmainMenu.hideAll();\n\t\tcreateLibrary.show();\n\t};\n\n\tmainMenu.showCreateSection = function () {\n\t\tmainMenu.hideAll();\n\t\tcreateSection.show();\n\t};\n\n\tmainMenu.showLinkAccount = function () {\n\t\tmainMenu.hideAll();\n\t\tlinkAccount.show();\n\t};\n\n\tmainMenu.isLinkAccountAvailable = function () {\n\t\treturn !authorization.isShow() && linkAccount.isAvailable();\n\t};\n\n\treturn mainMenu;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/ui/mainMenu.js\n **/","import '../data';\r\nimport './bookEdit';\r\nimport './feedback';\r\nimport './selectLibrary';\r\nimport './createLibrary';\r\nimport './createSection';\r\nimport './linkAccount';\r\nimport './authorization';\r\n\r\nangular.module('VirtualBookshelf')\r\n.factory('mainMenu', function ($log, data, bookEdit, feedback, selectLibrary, createLibrary, createSection, linkAccount, authorization) {\r\n\tvar mainMenu = {};\r\n\t\r\n\tvar show = false;\r\n\tvar createListShow = false;\r\n\r\n\tmainMenu.isShow = function() {\r\n\t\treturn show;\r\n\t};\r\n\r\n\tmainMenu.show = function() {\r\n\t\tmainMenu.hideAll();\r\n\t\tshow = true;\r\n\t};\r\n\r\n\tmainMenu.hide = function() {\r\n\t\tshow = false;\r\n\t};\r\n\r\n\tmainMenu.isCreateListShow = function() {\r\n\t\treturn createListShow;\r\n\t};\r\n\r\n\tmainMenu.createListShow = function() {\r\n\t\tmainMenu.hideAll();\r\n\t\tcreateListShow = true;\r\n\t};\r\n\r\n\tmainMenu.createListHide = function() {\r\n\t\tcreateListShow = false;\r\n\t};\r\n\r\n\tmainMenu.hideAll = function() {\r\n\t\tmainMenu.hide();\r\n\t\tmainMenu.createListHide();\r\n\t};\r\n\r\n\tmainMenu.trigger = function() {\r\n\t\tif(mainMenu.isShow()) {\r\n\t\t\tmainMenu.hide();\r\n\t\t} else {\r\n\t\t\tmainMenu.show();\r\n\t\t}\r\n\t};\r\n\r\n\tmainMenu.showFeedback = function() {\r\n\t\tmainMenu.hideAll();\r\n\t\tfeedback.show();\r\n\t};\r\n\r\n\tmainMenu.showSelectLibrary = function() {\r\n\t\tmainMenu.hideAll();\r\n\t\tselectLibrary.show();\r\n\t};\r\n\r\n\tmainMenu.showCreateLibrary = function() {\r\n\t\tmainMenu.hideAll();\r\n\t\tcreateLibrary.show();\r\n\t};\r\n\r\n\tmainMenu.showCreateSection = function() {\r\n\t\tmainMenu.hideAll();\r\n\t\tcreateSection.show();\r\n\t};\r\n\r\n\tmainMenu.showLinkAccount = function() {\r\n\t\tmainMenu.hideAll();\r\n\t\tlinkAccount.show();\r\n\t};\r\n\r\n\tmainMenu.isLinkAccountAvailable = function() {\r\n\t\treturn !authorization.isShow() && linkAccount.isAvailable();\r\n\t};\r\n\r\n\treturn mainMenu;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/ui/mainMenu.js\n **/","'use strict';\n\nrequire('../data');\n\nrequire('../environment');\n\nrequire('../ui/block');\n\nrequire('../dialog');\n\nrequire('../archive');\n\nrequire('../ui/catalog');\n\nrequire('../scene/selector');\n\nrequire('../user');\n\nangular.module('VirtualBookshelf').factory('bookEdit', function ($log, data, environment, block, dialog, archive, catalog, selector, user, ngDialog) {\n\tvar bookEdit = {};\n\tvar bookDialog;\n\n\tvar BOOK_IMAGE_URL = '/obj/books/{model}/img.jpg';\n\tvar EMPTY_IMAGE_URL = '/img/empty_cover.jpg';\n\tvar TEMPLATE = 'editBookDialog';\n\n\tbookEdit.book = {};\n\n\tbookEdit.show = function (book) {\n\t\tsetBook(book);\n\t\tbookDialog = ngDialog.open({ template: TEMPLATE });\n\t};\n\n\tvar setBook = function setBook(book) {\n\t\tif (book) {\n\t\t\tbookEdit.book.id = book.id;\n\t\t\tbookEdit.book.userId = book.userId;\n\t\t\tbookEdit.book.model = book.model;\n\t\t\tbookEdit.book.cover = book.cover;\n\t\t\tbookEdit.book.coverId = book.coverId;\n\t\t\tbookEdit.book.title = book.title;\n\t\t\tbookEdit.book.author = book.author;\n\t\t}\n\t};\n\n\tbookEdit.getImg = function () {\n\t\treturn this.book.model ? BOOK_IMAGE_URL.replace('{model}', this.book.model) : EMPTY_IMAGE_URL;\n\t};\n\n\tbookEdit.getCoverImg = function () {\n\t\treturn this.book.cover ? this.book.cover.url : EMPTY_IMAGE_URL;\n\t};\n\n\tbookEdit.applyCover = function (coverInputURL) {\n\t\tif (coverInputURL) {\n\t\t\tblock.global.start();\n\t\t\tarchive.sendExternalURL(coverInputURL, [this.book.title, this.book.author]).then(function (result) {\n\t\t\t\tbookEdit.book.cover = result;\n\t\t\t\tbookEdit.book.coverId = result.id;\n\t\t\t}).catch(function () {\n\t\t\t\tbookEdit.book.coverId = null;\n\t\t\t\tbookEdit.book.cover = null;\n\n\t\t\t\tdialog.openError('Can not apply this cover. Try another one, please.');\n\t\t\t}).finally(function () {\n\t\t\t\tcoverInputURL = null;\n\t\t\t\tblock.global.stop();\n\t\t\t});\n\t\t} else {\n\t\t\tbookEdit.book.coverId = null;\n\t\t\tbookEdit.book.cover = null;\n\t\t}\n\t};\n\n\tbookEdit.save = function () {\n\t\tvar scope = this;\n\n\t\tblock.global.start();\n\t\tdata.postBook(this.book).then(function (dto) {\n\t\t\tif (selector.isBookSelected(dto.id)) {\n\t\t\t\tselector.unselect();\n\t\t\t}\n\n\t\t\tenvironment.updateBook(dto);\n\t\t\tscope.cancel();\n\t\t\treturn catalog.loadBooks(user.getId());\n\t\t}).catch(function () {\n\t\t\t$log.error('Book save error');\n\t\t\t//TODO: show error\n\t\t}).finally(function () {\n\t\t\tblock.global.stop();\n\t\t});\n\t};\n\n\tbookEdit.cancel = function () {\n\t\tbookDialog.close();\n\t};\n\n\treturn bookEdit;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/ui/bookEdit.js\n **/","import '../data';\r\nimport '../environment';\r\nimport '../ui/block';\r\nimport '../dialog';\r\nimport '../archive';\r\nimport '../ui/catalog';\r\nimport '../scene/selector';\r\nimport '../user';\r\n\r\nangular.module('VirtualBookshelf')\r\n.factory('bookEdit', function ($log, data, environment, block, dialog, archive, catalog, selector, user, ngDialog) {\r\n\tvar bookEdit = {};\r\n\tvar bookDialog;\r\n\r\n\tvar BOOK_IMAGE_URL = '/obj/books/{model}/img.jpg';\r\n\tvar EMPTY_IMAGE_URL = '/img/empty_cover.jpg';\r\n\tvar TEMPLATE = 'editBookDialog';\r\n\t\r\n\tbookEdit.book = {};\r\n\r\n\tbookEdit.show = function(book) {\r\n\t\tsetBook(book);\r\n\t\tbookDialog = ngDialog.open({template: TEMPLATE});\r\n\t};\r\n\r\n\tvar setBook = function(book) {\r\n\t\tif(book) {\r\n\t\t\tbookEdit.book.id = book.id;\r\n\t\t\tbookEdit.book.userId = book.userId;\r\n\t\t\tbookEdit.book.model = book.model;\r\n\t\t\tbookEdit.book.cover = book.cover;\r\n\t\t\tbookEdit.book.coverId = book.coverId;\r\n\t\t\tbookEdit.book.title = book.title;\r\n\t\t\tbookEdit.book.author = book.author;\r\n\t\t}\r\n\t};\r\n\r\n\tbookEdit.getImg = function() {\r\n\t\treturn this.book.model ? BOOK_IMAGE_URL.replace('{model}', this.book.model) : EMPTY_IMAGE_URL;\r\n\t};\r\n\r\n\tbookEdit.getCoverImg = function() {\r\n\t\treturn this.book.cover ? this.book.cover.url : EMPTY_IMAGE_URL;\r\n\t};\r\n\r\n\tbookEdit.applyCover = function(coverInputURL) {\r\n\t\tif(coverInputURL) {\r\n\t\t\tblock.global.start();\r\n\t\t\tarchive.sendExternalURL(coverInputURL, [this.book.title, this.book.author]).then(function (result) {\r\n\t\t\t\tbookEdit.book.cover = result;\r\n\t\t\t\tbookEdit.book.coverId = result.id;\r\n\t\t\t}).catch(function () {\r\n\t\t\t\tbookEdit.book.coverId = null;\r\n\t\t\t\tbookEdit.book.cover = null;\r\n\t\t\t\t\r\n\t\t\t\tdialog.openError('Can not apply this cover. Try another one, please.');\r\n\t\t\t}).finally(function () {\r\n\t\t\t\tcoverInputURL = null;\r\n\t\t\t\tblock.global.stop();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tbookEdit.book.coverId = null;\r\n\t\t\tbookEdit.book.cover = null;\r\n\t\t}\r\n\t};\r\n\r\n\tbookEdit.save = function() {\r\n\t\tvar scope = this;\r\n\t\t\r\n\t\tblock.global.start();\r\n\t\tdata.postBook(this.book).then(function (dto) {\r\n\t\t\tif(selector.isBookSelected(dto.id)) {\r\n\t\t\t\tselector.unselect();\r\n\t\t\t}\r\n\r\n\t\t\tenvironment.updateBook(dto);\r\n\t\t\tscope.cancel();\r\n\t\t\treturn catalog.loadBooks(user.getId());\r\n\t\t}).catch(function () {\r\n\t\t\t$log.error('Book save error');\r\n\t\t\t//TODO: show error\r\n\t\t}).finally(function () {\r\n\t\t\tblock.global.stop();\r\n\t\t});\r\n\t};\r\n\r\n\tbookEdit.cancel = function() {\r\n\t\tbookDialog.close();\r\n\t};\r\n\r\n\treturn bookEdit;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/ui/bookEdit.js\n **/","'use strict';\n\nangular.module('VirtualBookshelf').factory('archive', function (data) {\n\tvar archive = {};\n\n\tarchive.sendExternalURL = function (externalURL, tags) {\n\t\treturn data.postCover(externalURL, tags);\n\t};\n\n\treturn archive;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/archive.js\n **/","angular.module('VirtualBookshelf')\r\n.factory('archive', function (data) {\r\n\tvar archive = {};\r\n\r\n\tarchive.sendExternalURL = function(externalURL, tags) {\r\n\t\treturn data.postCover(externalURL, tags);\r\n\t};\r\n\r\n\treturn archive;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/archive.js\n **/","'use strict';\n\nangular.module('VirtualBookshelf').factory('feedback', function (data, dialog, ngDialog) {\n\tvar feedback = {};\n\tvar feedbackDialog;\n\n\tvar TEMPLATE = 'feedbackDialog';\n\n\tfeedback.show = function () {\n\t\tfeedbackDialog = ngDialog.open({ template: TEMPLATE });\n\t};\n\n\tfeedback.send = function (dto) {\n\t\tdialog.openConfirm('Send feedback?').then(function () {\n\t\t\treturn data.postFeedback(dto).then(function () {\n\t\t\t\tfeedbackDialog.close();\n\t\t\t}, function () {\n\t\t\t\tdialog.openError('Can not send feedback because of an error.');\n\t\t\t});\n\t\t});\n\t};\n\n\treturn feedback;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/ui/feedback.js\n **/","angular.module('VirtualBookshelf')\r\n.factory('feedback', function (data, dialog, ngDialog) {\r\n\tvar feedback = {};\r\n\tvar feedbackDialog;\r\n\r\n\tvar TEMPLATE = 'feedbackDialog';\r\n\r\n\tfeedback.show = function() {\r\n\t\tfeedbackDialog = ngDialog.open({template: TEMPLATE});\r\n\t};\r\n\r\n\tfeedback.send = function(dto) {\r\n\t\tdialog.openConfirm('Send feedback?').then(function () {\r\n\t\t\treturn data.postFeedback(dto).then(function () {\r\n\t\t\t\tfeedbackDialog.close();\r\n\t\t\t}, function () {\r\n\t\t\t\tdialog.openError('Can not send feedback because of an error.');\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n\r\n\treturn feedback;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/ui/feedback.js\n **/","'use strict';\n\nangular.module('VirtualBookshelf').factory('createLibrary', function (data, environment, dialog, block, ngDialog) {\n\tvar createLibrary = {};\n\n\tvar EMPTY_IMAGE_URL = '/img/empty_cover.jpg';\n\tvar TEMPLATE_ID = 'createLibraryDialog';\n\n\tvar createLibraryDialog;\n\n\tcreateLibrary.show = function () {\n\t\tcreateLibraryDialog = ngDialog.open({\n\t\t\ttemplate: TEMPLATE_ID\n\t\t});\n\t};\n\n\tcreateLibrary.getImg = function (model) {\n\t\treturn model ? '/obj/libraries/{model}/img.jpg'.replace('{model}', model) : EMPTY_IMAGE_URL;\n\t};\n\n\tcreateLibrary.create = function (model) {\n\t\tif (model) {\n\t\t\tblock.global.start();\n\t\t\tdata.postLibrary(model).then(function (result) {\n\t\t\t\tenvironment.goToLibrary(result.id);\n\t\t\t}).catch(function () {\n\t\t\t\tdialog.openError('Can not create library because of an error.');\n\t\t\t}).finally(function () {\n\t\t\t\tblock.global.stop();\n\t\t\t});\n\n\t\t\tcreateLibraryDialog.close();\n\t\t} else {\n\t\t\tdialog.openWarning('Select library, please.');\n\t\t}\n\t};\n\n\treturn createLibrary;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/ui/createLibrary.js\n **/","angular.module('VirtualBookshelf')\r\n.factory('createLibrary', function (data, environment, dialog, block, ngDialog) {\r\n\tvar createLibrary = {};\r\n\t\r\n\tvar EMPTY_IMAGE_URL = '/img/empty_cover.jpg';\r\n\tvar TEMPLATE_ID = 'createLibraryDialog';\r\n\t\r\n\tvar createLibraryDialog;\r\n\r\n\tcreateLibrary.show = function() {\r\n\t\tcreateLibraryDialog = ngDialog.open({\r\n\t\t\ttemplate: TEMPLATE_ID\r\n\t\t});\r\n\t};\r\n\r\n\tcreateLibrary.getImg = function(model) {\r\n\t\treturn model ? '/obj/libraries/{model}/img.jpg'.replace('{model}', model) : EMPTY_IMAGE_URL;\r\n\t};\r\n\r\n\tcreateLibrary.create = function(model) {\r\n\t\tif(model) {\r\n\t\t\tblock.global.start();\r\n\t\t\tdata.postLibrary(model).then(function (result) {\r\n\t\t\t\tenvironment.goToLibrary(result.id);\r\n\t\t\t}).catch(function () {\r\n\t\t\t\tdialog.openError('Can not create library because of an error.');\r\n\t\t\t}).finally(function () {\r\n\t\t\t\tblock.global.stop();\r\n\t\t\t});\r\n\r\n\t\t\tcreateLibraryDialog.close();\r\n\t\t} else {\r\n\t\t\tdialog.openWarning('Select library, please.');\r\n\t\t}\r\n\t};\r\n\r\n\treturn createLibrary;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/ui/createLibrary.js\n **/","'use strict';\n\nangular.module('VirtualBookshelf').factory('createSection', function ($log, user, environment, locator, dialog, block, ngDialog) {\n\tvar createSection = {};\n\n\tvar EMPTY_IMAGE_URL = '/img/empty_cover.jpg';\n\tvar TEMPLATE = 'createSectionDialog';\n\n\tvar createSectionDialog;\n\n\tcreateSection.show = function () {\n\t\tcreateSectionDialog = ngDialog.open({ template: TEMPLATE });\n\t};\n\n\tcreateSection.getImg = function (model) {\n\t\treturn model ? '/obj/sections/{model}/img.jpg'.replace('{model}', model) : EMPTY_IMAGE_URL;\n\t};\n\n\tcreateSection.create = function (model) {\n\t\tif (model) {\n\t\t\tvar sectionData = {\n\t\t\t\tmodel: model,\n\t\t\t\tlibraryId: environment.library.getId(),\n\t\t\t\tuserId: user.getId()\n\t\t\t};\n\n\t\t\tplace(sectionData);\n\t\t} else {\n\t\t\tdialog.openWarning('Select model, please.');\n\t\t}\n\t};\n\n\tvar place = function place(dto) {\n\t\tblock.global.start();\n\t\tlocator.placeSection(dto).catch(function (error) {\n\t\t\tdialog.openError('Can not create section because of an error.');\n\t\t\t$log.error(error);\n\t\t}).finally(function () {\n\t\t\tblock.global.stop();\n\t\t});\n\n\t\tcreateSectionDialog.close();\n\t};\n\n\treturn createSection;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/ui/createSection.js\n **/","angular.module('VirtualBookshelf')\r\n.factory('createSection', function ($log, user, environment, locator, dialog, block, ngDialog) {\r\n\tvar createSection = {};\r\n\t\r\n\tvar EMPTY_IMAGE_URL = '/img/empty_cover.jpg';\r\n\tvar TEMPLATE = 'createSectionDialog';\r\n\r\n\tvar createSectionDialog;\r\n\r\n\tcreateSection.show = function() {\r\n\t\tcreateSectionDialog = ngDialog.open({template: TEMPLATE});\r\n\t};\r\n\r\n\tcreateSection.getImg = function(model) {\r\n\t\treturn model ? '/obj/sections/{model}/img.jpg'.replace('{model}', model) : EMPTY_IMAGE_URL;\r\n\t};\r\n\r\n\tcreateSection.create = function(model) {\r\n\t\tif(model) {\r\n\t\t\tvar sectionData = {\r\n\t\t\t\tmodel: model,\r\n\t\t\t\tlibraryId: environment.library.getId(),\r\n\t\t\t\tuserId: user.getId()\r\n\t\t\t};\r\n\r\n\t\t\tplace(sectionData);\r\n\t\t} else {\r\n\t\t\tdialog.openWarning('Select model, please.');\r\n\t\t}\t\r\n\t};\r\n\r\n\tvar place = function(dto) {\r\n\t\tblock.global.start();\r\n\t\tlocator.placeSection(dto).catch(function (error) {\r\n\t\t\tdialog.openError('Can not create section because of an error.');\r\n\t\t\t$log.error(error);\r\n\t\t}).finally(function () {\r\n\t\t\tblock.global.stop();\r\n\t\t});\t\r\n\r\n\t\tcreateSectionDialog.close();\r\n\t};\r\n\r\n\treturn createSection;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/ui/createSection.js\n **/","'use strict';\n\nangular.module('VirtualBookshelf').factory('linkAccount', function (user, ngDialog) {\n\tvar linkAccount = {};\n\n\tvar TEMPLATE = 'linkAccountDialog';\n\n\tlinkAccount.show = function () {\n\t\tngDialog.open({ template: TEMPLATE });\n\t};\n\n\tlinkAccount.isGoogleShow = function () {\n\t\treturn !user.isGoogle();\n\t};\n\n\tlinkAccount.isTwitterShow = function () {\n\t\treturn !user.isTwitter();\n\t};\n\n\tlinkAccount.isFacebookShow = function () {\n\t\treturn !user.isFacebook();\n\t};\n\n\tlinkAccount.isVkontakteShow = function () {\n\t\treturn !user.isVkontakte();\n\t};\n\n\tlinkAccount.isAvailable = function () {\n\t\treturn this.isGoogleShow() || this.isTwitterShow() || this.isFacebookShow() || this.isVkontakteShow();\n\t};\n\n\treturn linkAccount;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/ui/linkAccount.js\n **/","angular.module('VirtualBookshelf')\r\n.factory('linkAccount', function (user, ngDialog) {\r\n\tvar linkAccount = {};\r\n\r\n\tvar TEMPLATE = 'linkAccountDialog';\r\n\r\n\tlinkAccount.show = function() {\r\n\t\tngDialog.open({template: TEMPLATE});\r\n\t};\r\n\r\n\tlinkAccount.isGoogleShow = function() {\r\n\t\treturn !user.isGoogle();\r\n\t};\r\n\r\n\tlinkAccount.isTwitterShow = function() {\r\n\t\treturn !user.isTwitter();\r\n\t};\r\n\r\n\tlinkAccount.isFacebookShow = function() {\r\n\t\treturn !user.isFacebook();\r\n\t};\r\n\r\n\tlinkAccount.isVkontakteShow = function() {\r\n\t\treturn !user.isVkontakte();\r\n\t};\r\n\r\n\tlinkAccount.isAvailable = function() {\r\n\t\treturn this.isGoogleShow() || \r\n\t\t\tthis.isTwitterShow() || \r\n\t\t\tthis.isFacebookShow() || \r\n\t\t\tthis.isVkontakteShow();\r\n\t};\r\n\r\n\treturn linkAccount;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/ui/linkAccount.js\n **/","'use strict';\n\nrequire('../user');\n\nrequire('../environment');\n\nrequire('./registration');\n\nrequire('./userData');\n\nrequire('./block');\n\nangular.module('VirtualBookshelf').factory('authorization', function ($log, $q, $window, $interval, user, environment, registration, userData, block, ngDialog) {\n\tvar authorization = {};\n\n\tvar TEMPLATE = 'loginDialog';\n\n\tauthorization.show = function () {\n\t\tngDialog.open({ template: TEMPLATE });\n\t};\n\n\tauthorization.isShow = function () {\n\t\treturn !user.isAuthorized() && user.isLoaded();\n\t};\n\n\tvar login = function login(link) {\n\t\tblock.global.start();\n\t\tvar win = $window.open(link, '', 'width=800,height=600,modal=yes,alwaysRaised=yes');\n\t\tvar checkAuthWindow = $interval(function () {\n\t\t\tif (win && win.closed) {\n\t\t\t\t$interval.cancel(checkAuthWindow);\n\n\t\t\t\tenvironment.setLoaded(false);\n\t\t\t\tuser.load().then(function () {\n\t\t\t\t\treturn user.isTemporary() ? registration.show() : userData.load();\n\t\t\t\t}).finally(function () {\n\t\t\t\t\tenvironment.setLoaded(true);\n\t\t\t\t\tblock.global.stop();\n\t\t\t\t}).catch(function () {\n\t\t\t\t\t$log.log('User loadind error');\n\t\t\t\t\t//TODO: show error message\n\t\t\t\t});\n\t\t\t}\n\t\t}, 100);\n\t};\n\n\tauthorization.google = function () {\n\t\tlogin('/auth/google');\n\t};\n\n\tauthorization.twitter = function () {\n\t\tlogin('/auth/twitter');\n\t};\n\n\tauthorization.facebook = function () {\n\t\tlogin('/auth/facebook');\n\t};\n\n\tauthorization.vkontakte = function () {\n\t\tlogin('/auth/vkontakte');\n\t};\n\n\tauthorization.logout = function () {\n\t\tenvironment.setLoaded(false);\n\t\tuser.logout().finally(function () {\n\t\t\treturn userData.load();\n\t\t}).finally(function () {\n\t\t\tenvironment.setLoaded(true);\n\t\t}).catch(function () {\n\t\t\t$log.error('Logout error');\n\t\t\t//TODO: show an error\n\t\t});\n\t};\n\n\treturn authorization;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/ui/authorization.js\n **/","import '../user';\r\nimport '../environment';\r\nimport './registration';\r\nimport './userData';\r\nimport './block';\r\n\r\nangular.module('VirtualBookshelf')\r\n.factory('authorization', function ($log, $q, $window, $interval, user, environment, registration, userData, block, ngDialog) {\r\n\tvar authorization = {};\r\n\r\n\tvar TEMPLATE = 'loginDialog';\r\n\r\n\tauthorization.show = function() {\r\n\t\tngDialog.open({template: TEMPLATE});\r\n\t};\r\n\r\n\tauthorization.isShow = function() {\r\n\t\treturn !user.isAuthorized() && user.isLoaded();\r\n\t};\r\n\r\n\tvar login = function(link) {\r\n\t\tblock.global.start();\r\n\t\tvar win = $window.open(link, '', 'width=800,height=600,modal=yes,alwaysRaised=yes');\r\n\t    var checkAuthWindow = $interval(function () {\r\n\t        if (win && win.closed) {\r\n\t        \t$interval.cancel(checkAuthWindow);\r\n\r\n\t        \tenvironment.setLoaded(false);\r\n\t        \tuser.load().then(function () {\r\n\t        \t\treturn user.isTemporary() ? registration.show() : userData.load();\r\n\t        \t}).finally(function () {\r\n\t        \t\tenvironment.setLoaded(true);\r\n\t        \t\tblock.global.stop();\r\n\t        \t}).catch(function () {\r\n\t        \t\t$log.log('User loadind error');\r\n\t\t\t\t\t//TODO: show error message  \r\n\t        \t});\r\n\t        }\r\n\t    }, 100);\r\n\t};\r\n\r\n\tauthorization.google = function() {\r\n\t\tlogin('/auth/google');\r\n\t};\r\n\r\n\tauthorization.twitter = function() {\r\n\t\tlogin('/auth/twitter');\r\n\t};\r\n\r\n\tauthorization.facebook = function() {\r\n\t\tlogin('/auth/facebook');\r\n\t};\r\n\r\n\tauthorization.vkontakte = function() {\r\n\t\tlogin('/auth/vkontakte');\r\n\t};\r\n\r\n\tauthorization.logout = function() {\r\n    \tenvironment.setLoaded(false);\r\n\t\tuser.logout().finally(function () {\r\n    \t\treturn userData.load();\r\n\t\t}).finally(function () {\r\n        \tenvironment.setLoaded(true);\r\n\t\t}).catch(function () {\r\n\t\t\t$log.error('Logout error');\r\n\t\t\t//TODO: show an error\r\n\t\t});\r\n\t};\r\n\t\r\n\treturn authorization;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/ui/authorization.js\n **/","'use strict';\n\nangular.module('VirtualBookshelf').factory('registration', function ($log, user, data, dialog, userData, ngDialog) {\n\tvar registration = {};\n\n\tvar FORM_VALIDATION_ERROR = 'Enter a valid data, please.';\n\tvar SAVE_USER_ERROR = 'Error saving user. Try again, please.';\n\tvar TEMPLATE = 'registrationDialog';\n\n\tregistration.user = {\n\t\tid: null,\n\t\tname: null,\n\t\temail: null,\n\t\ttemporary: false\n\t};\n\n\tregistration.show = function () {\n\t\tregistration.user.id = user.getId();\n\t\tregistration.user.name = user.getName();\n\t\tregistration.user.email = user.getEmail();\n\n\t\treturn ngDialog.openConfirm({ template: TEMPLATE }).then(function () {\n\t\t\treturn saveUser();\n\t\t}, function () {\n\t\t\treturn deleteUser();\n\t\t});\n\t};\n\n\tregistration.showValidationError = function () {\n\t\tdialog.openError(FORM_VALIDATION_ERROR);\n\t};\n\n\tvar saveUser = function saveUser() {\n\t\treturn data.putUser(registration.user).then(function () {\n\t\t\treturn user.load().then(function () {\n\t\t\t\treturn userData.load();\n\t\t\t});\n\t\t}).catch(function () {\n\t\t\tdialog.openError(SAVE_USER_ERROR);\n\t\t\t$log.log('Registration: Error saving user:', registration.user.id);\n\t\t});\n\t};\n\n\tvar deleteUser = function deleteUser() {\n\t\treturn data.deleteUser(registration.user.id);\n\t};\n\n\treturn registration;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/services/ui/registration.js\n **/","angular.module('VirtualBookshelf')\r\n.factory('registration', function ($log, user, data, dialog, userData, ngDialog) {\r\n\tvar registration = {};\r\n\r\n\tvar FORM_VALIDATION_ERROR = 'Enter a valid data, please.';\r\n\tvar SAVE_USER_ERROR = 'Error saving user. Try again, please.';\r\n\tvar TEMPLATE = 'registrationDialog';\r\n\r\n\tregistration.user = {\r\n\t\tid: null,\r\n\t\tname: null,\r\n\t\temail: null,\r\n\t\ttemporary: false\r\n\t};\r\n\r\n\tregistration.show = function() {\r\n\t\tregistration.user.id = user.getId();\r\n\t\tregistration.user.name = user.getName();\r\n\t\tregistration.user.email = user.getEmail();\r\n\r\n\t\treturn ngDialog.openConfirm({template: TEMPLATE}).then(function () {\r\n\t\t\treturn saveUser();\r\n\t\t}, function () {\r\n\t\t\treturn deleteUser();\r\n\t\t});\r\n\t};\r\n\r\n\tregistration.showValidationError = function() {\r\n\t\tdialog.openError(FORM_VALIDATION_ERROR);\r\n\t};\r\n\r\n\tvar saveUser = function() {\r\n\t\treturn data.putUser(registration.user).then(function () {\r\n        \treturn user.load().then(function () {\r\n    \t\t\treturn userData.load();\r\n        \t});\t\r\n\t\t}).catch(function () {\r\n\t\t\tdialog.openError(SAVE_USER_ERROR);\r\n\t\t\t$log.log('Registration: Error saving user:', registration.user.id);\r\n\t\t});\r\n\t};\r\n\r\n\tvar deleteUser = function() {\r\n\t\treturn data.deleteUser(registration.user.id);\r\n\t};\r\n\r\n\treturn registration;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/services/ui/registration.js\n **/","'use strict';\n\nangular.module('VirtualBookshelf').controller('BookEditCtrl', function (bookEdit, dialog, data) {\n\tvar scope = this;\n\n\tthis.book = bookEdit.book;\n\tthis.coverInputURL = null;\n\n\tthis.applyCover = function () {\n\t\tif (!isCoverDisabled()) {\n\t\t\tbookEdit.applyCover(this.coverInputURL);\n\t\t} else {\n\t\t\tdialog.openError('Fill author and title fields, please.');\n\t\t}\n\t};\n\n\tthis.getCoverImg = function () {\n\t\treturn bookEdit.getCoverImg();\n\t};\n\n\tthis.getImg = function () {\n\t\treturn bookEdit.getImg();\n\t};\n\n\tthis.cancel = function () {\n\t\tbookEdit.cancel();\n\t};\n\n\tthis.submit = function () {\n\t\tif (this.form.$valid) {\n\t\t\tbookEdit.save();\n\t\t} else {\n\t\t\tdialog.openError('Fill all required fields, please.');\n\t\t}\n\t};\n\n\tvar isCoverDisabled = function isCoverDisabled() {\n\t\treturn scope.coverInputURL && (scope.form.title.$invalid || scope.form.author.$invalid);\n\t};\n\n\tdata.common.then(function (commonData) {\n\t\tscope.list = commonData.books;\n\t});\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/controllers/BookEditCtrl.js\n **/","angular.module('VirtualBookshelf')\r\n.controller('BookEditCtrl', function (bookEdit, dialog, data) {\r\n\tvar scope = this;\r\n\r\n\tthis.book = bookEdit.book;\r\n\tthis.coverInputURL = null;\r\n\r\n\tthis.applyCover = function() {\r\n\t\tif(!isCoverDisabled()) {\r\n\t\t\tbookEdit.applyCover(this.coverInputURL);\r\n\t\t} else {\r\n\t\t\tdialog.openError('Fill author and title fields, please.');\r\n\t\t}\r\n\t};\r\n\r\n\tthis.getCoverImg = function() {\r\n\t\treturn bookEdit.getCoverImg();\r\n\t};\r\n\r\n\tthis.getImg = function() {\r\n\t\treturn bookEdit.getImg();\r\n\t};\r\n\r\n\tthis.cancel = function() {\r\n\t\tbookEdit.cancel();\r\n\t};\r\n\r\n\tthis.submit = function() {\r\n\t\tif(this.form.$valid) {\r\n\t\t\tbookEdit.save();\r\n\t\t} else {\r\n\t\t\tdialog.openError('Fill all required fields, please.');\r\n\t\t}\r\n\t};\r\n\r\n\tvar isCoverDisabled = function() {\r\n\t\treturn scope.coverInputURL && (scope.form.title.$invalid || scope.form.author.$invalid);\r\n\t};\r\n\r\n\tdata.common.then(function (commonData) {\r\n\t\tscope.list = commonData.books;\r\n\t});\t\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/controllers/BookEditCtrl.js\n **/","'use strict';\n\nangular.module('VirtualBookshelf').controller('CreateLibraryCtrl', function (createLibrary, data) {\n\tvar scope = this;\n\n\tthis.list = null;\n\tthis.model = null;\n\n\tthis.getImg = function () {\n\t\treturn createLibrary.getImg(this.model);\n\t};\n\n\tthis.create = function () {\n\t\tcreateLibrary.create(this.model);\n\t};\n\n\tdata.common.then(function (commonData) {\n\t\tscope.list = commonData.libraries;\n\t});\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/controllers/CreateLibraryCtrl.js\n **/","angular.module('VirtualBookshelf')\r\n.controller('CreateLibraryCtrl', function (createLibrary, data) {\r\n\tvar scope = this;\r\n\r\n\tthis.list = null;\r\n\tthis.model = null;\r\n\r\n\tthis.getImg = function() {\r\n\t\treturn createLibrary.getImg(this.model);\r\n\t};\r\n\r\n\tthis.create = function() {\r\n\t\tcreateLibrary.create(this.model);\r\n\t};\r\n\r\n\tdata.common.then(function (commonData) {\r\n\t\tscope.list = commonData.libraries;\r\n\t});\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/controllers/CreateLibraryCtrl.js\n **/","'use strict';\n\nangular.module('VirtualBookshelf').controller('CreateSectionCtrl', function (createSection, data) {\n\tvar scope = this;\n\n\tthis.model = null;\n\tthis.list = null;\n\n\tthis.getImg = function () {\n\t\treturn createSection.getImg(this.model);\n\t};\n\n\tthis.create = function () {\n\t\tcreateSection.create(this.model);\n\t};\n\n\tdata.common.then(function (commonData) {\n\t\tscope.list = commonData.bookshelves;\n\t});\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/controllers/CreateSectionCtrl.js\n **/","angular.module('VirtualBookshelf')\r\n.controller('CreateSectionCtrl', function (createSection, data) {\r\n\tvar scope = this;\r\n\r\n\tthis.model = null;\r\n\tthis.list = null;\r\n\r\n\tthis.getImg = function() {\r\n\t\treturn createSection.getImg(this.model);\r\n\t};\r\n\t\t\r\n\tthis.create = function() {\r\n\t\tcreateSection.create(this.model);\r\n\t};\r\n\r\n\tdata.common.then(function (commonData) {\r\n\t\tscope.list = commonData.bookshelves;\r\n\t});\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/controllers/CreateSectionCtrl.js\n **/","'use strict';\n\nangular.module('VirtualBookshelf').controller('FeedbackCtrl', function (feedback, user, dialog) {\n\tthis.submit = function () {\n\t\tif (this.form.message.$valid) {\n\t\t\tfeedback.send({\n\t\t\t\tmessage: this.message,\n\t\t\t\tuserId: user.getId()\n\t\t\t});\n\t\t} else {\n\t\t\tdialog.openError('Feedback field is required.');\n\t\t}\n\t};\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/controllers/FeedbackCtrl.js\n **/","angular.module('VirtualBookshelf')\r\n.controller('FeedbackCtrl', function (feedback, user, dialog) {\r\n\tthis.submit = function() {\r\n\t\tif(this.form.message.$valid) {\r\n\t\t\tfeedback.send({\r\n\t\t\t\tmessage: this.message,\r\n\t\t\t\tuserId: user.getId()\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tdialog.openError('Feedback field is required.');\r\n\t\t}\r\n\t};\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/controllers/FeedbackCtrl.js\n **/","'use strict';\n\nangular.module('VirtualBookshelf').controller('InventoryCtrl', function (SelectorMetaDto, BookObject, user, bookEdit, selector, catalog) {\n\tthis.isShow = function () {\n\t\treturn user.isAuthorized();\n\t};\n\n\tthis.isBookSelected = function (id) {\n\t\treturn selector.isBookSelected(id);\n\t};\n\n\tthis.select = function (dto) {\n\t\tvar meta = new SelectorMetaDto(BookObject.TYPE, dto.id);\n\t\tselector.select(meta);\n\t};\n\n\tthis.addBook = function () {\n\t\tbookEdit.show({ userId: user.getId() });\n\t};\n\n\tthis.catalog = catalog;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/controllers/InventoryCtrl.js\n **/","angular.module('VirtualBookshelf')\r\n.controller('InventoryCtrl', function (SelectorMetaDto, BookObject, user, bookEdit, selector, catalog) {\r\n\tthis.isShow = function() {\r\n\t\treturn user.isAuthorized();\r\n\t};\r\n\r\n\tthis.isBookSelected = function(id) {\r\n\t\treturn selector.isBookSelected(id);\r\n\t};\r\n\r\n\tthis.select = function(dto) {\r\n\t\tvar meta = new SelectorMetaDto(BookObject.TYPE, dto.id);\r\n\t\tselector.select(meta);\r\n\t};\r\n\r\n\tthis.addBook = function() {\r\n\t\tbookEdit.show({userId: user.getId()});\r\n\t};\r\n\r\n\tthis.catalog = catalog;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/controllers/InventoryCtrl.js\n **/","'use strict';\n\nangular.module('VirtualBookshelf').controller('LinkAccountCtrl', function (authorization, linkAccount) {\n\tthis.linkGoogle = function () {\n\t\tauthorization.google();\n\t};\n\n\tthis.linkTwitter = function () {\n\t\tauthorization.twitter();\n\t};\n\n\tthis.linkFacebook = function () {\n\t\tauthorization.facebook();\n\t};\n\n\tthis.linkVkontakte = function () {\n\t\tauthorization.vkontakte();\n\t};\n\n\tthis.isGoogleShow = function () {\n\t\treturn linkAccount.isGoogleShow();\n\t};\n\n\tthis.isTwitterShow = function () {\n\t\treturn linkAccount.isTwitterShow();\n\t};\n\n\tthis.isFacebookShow = function () {\n\t\treturn linkAccount.isFacebookShow();\n\t};\n\n\tthis.isVkontakteShow = function () {\n\t\treturn linkAccount.isVkontakteShow();\n\t};\n\n\tthis.isAvailable = function () {\n\t\treturn linkAccount.isAvailable();\n\t};\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/controllers/LinkAccountCtrl.js\n **/","angular.module('VirtualBookshelf')\r\n.controller('LinkAccountCtrl', function (authorization, linkAccount) {\r\n\tthis.linkGoogle = function() {\r\n\t\tauthorization.google();\r\n\t};\r\n\r\n\tthis.linkTwitter = function() {\r\n\t\tauthorization.twitter();\r\n\t};\r\n\r\n\tthis.linkFacebook = function() {\r\n\t\tauthorization.facebook();\r\n\t};\r\n\r\n\tthis.linkVkontakte = function() {\r\n\t\tauthorization.vkontakte();\r\n\t};\r\n\r\n\tthis.isGoogleShow = function() {\r\n\t\treturn linkAccount.isGoogleShow();\r\n\t};\r\n\r\n\tthis.isTwitterShow = function() {\r\n\t\treturn linkAccount.isTwitterShow();\r\n\t};\r\n\r\n\tthis.isFacebookShow = function() {\r\n\t\treturn linkAccount.isFacebookShow();\r\n\t};\r\n\r\n\tthis.isVkontakteShow = function() {\r\n\t\treturn linkAccount.isVkontakteShow();\r\n\t};\r\n\r\n\tthis.isAvailable = function() {\r\n\t\treturn linkAccount.isAvailable();\r\n\t};\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/controllers/LinkAccountCtrl.js\n **/","'use strict';\n\nangular.module('VirtualBookshelf').controller('NavigationCtrl', function (navigation) {\n\tthis.stop = navigation.goStop;\n\tthis.forward = navigation.goForward;\n\tthis.backward = navigation.goBackward;\n\tthis.left = navigation.goLeft;\n\tthis.right = navigation.goRight;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/controllers/NavigationCtrl.js\n **/","angular.module('VirtualBookshelf')\r\n.controller('NavigationCtrl', function (navigation) {\r\n\tthis.stop = navigation.goStop;\r\n\tthis.forward = navigation.goForward;\r\n\tthis.backward = navigation.goBackward;\r\n\tthis.left = navigation.goLeft;\r\n\tthis.right = navigation.goRight;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/controllers/NavigationCtrl.js\n **/","'use strict';\n\nangular.module('VirtualBookshelf').controller('RegistrationCtrl', function (registration) {\n\tthis.user = registration.user;\n\n\tthis.showValidationError = function () {\n\t\tregistration.showValidationError();\n\t};\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/controllers/RegistrationCtrl.js\n **/","angular.module('VirtualBookshelf')\r\n.controller('RegistrationCtrl', function (registration) {\r\n\tthis.user = registration.user;\r\n\r\n\tthis.showValidationError = function() {\r\n\t\tregistration.showValidationError();\r\n\t};\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/controllers/RegistrationCtrl.js\n **/","'use strict';\n\nangular.module('VirtualBookshelf').controller('SelectLibraryCtrl', function (selectLibrary) {\n\tthis.go = selectLibrary.go;\n\n\tthis.getList = function () {\n\t\treturn selectLibrary.list;\n\t};\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/controllers/SelectLibraryCtrl.js\n **/","angular.module('VirtualBookshelf')\r\n.controller('SelectLibraryCtrl', function (selectLibrary) {\r\n\tthis.go = selectLibrary.go;\r\n\r\n\tthis.getList = function() {\r\n\t\treturn selectLibrary.list;\r\n\t};\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/controllers/SelectLibraryCtrl.js\n **/","'use strict';\n\nangular.module('VirtualBookshelf').controller('ToolsCtrl', function (user, selector, tools, preview, bookEdit, dialog, block, growl) {\n    var DELETE_CONFIRM = 'Delete {0}: {1}?';\n    var DELETE_SUCCESS = '{0}: {1} deleted.';\n    var DELETE_ERROR = 'Can not delete {0}: {1}.';\n    var BOOK = 'book';\n    var SECTION = 'section';\n\n    this.isShow = function () {\n        return selector.isSelectedEditable() || preview.isActive();\n    };\n\n    this.isBook = function () {\n        return selector.isSelectedBook();\n    };\n\n    this.isSection = function () {\n        return selector.isSelectedSection();\n    };\n\n    this.isRotatable = function () {\n        return selector.isSelectedSection() || preview.isActive();\n    };\n\n    this.isEditable = function () {\n        return this.isBook() && !preview.isActive();\n    };\n\n    this.isDeletable = function () {\n        return selector.isSelectedEditable() && user.isAuthorized() && !preview.isActive();\n    };\n\n    this.isWatchable = function () {\n        return selector.isSelectedBook() && !preview.isActive() && !this.isPlaceble();\n    };\n\n    this.isPlaceble = function () {\n        var obj = selector.getSelectedObject();\n        return !obj && selector.isSelectedBook() && user.isAuthorized();\n    };\n\n    this.isUnplaceble = function () {\n        var obj = selector.getSelectedObject();\n        return obj && selector.isSelectedBook() && user.isAuthorized() && !preview.isActive();\n    };\n\n    this.isPlacing = function () {\n        return selector.placing;\n    };\n\n    this.place = function () {\n        selector.placing = !selector.placing;\n    };\n\n    this.unplace = function () {\n        tools.unplace();\n    };\n\n    this.watch = function () {\n        var obj = selector.getSelectedObject();\n        preview.enable(obj);\n    };\n\n    this.getTitle = function () {\n        return this.isBook() ? selector.getSelectedDto().title : this.isSection() ? selector.getSelectedObject().getId() : null;\n    };\n\n    this.edit = function () {\n        bookEdit.show(selector.getSelectedDto());\n    };\n\n    this.delete = function () {\n        var dto = selector.getSelectedDto();\n        var confirmMsg;\n        var successMsg;\n        var errorMsg;\n        var deleteFnc;\n\n        if (selector.isSelectedBook()) {\n            deleteFnc = tools.deleteBook;\n            confirmMsg = DELETE_CONFIRM.replace('{0}', BOOK).replace('{1}', dto.title);\n            successMsg = DELETE_SUCCESS.replace('{0}', BOOK).replace('{1}', dto.title);\n            errorMsg = DELETE_ERROR.replace('{0}', BOOK).replace('{1}', dto.title);\n        } else if (selector.isSelectedSection()) {\n            deleteFnc = tools.deleteSection;\n            confirmMsg = DELETE_CONFIRM.replace('{0}', SECTION).replace('{1}', dto.id);\n            successMsg = DELETE_SUCCESS.replace('{0}', SECTION).replace('{1}', dto.id);\n            errorMsg = DELETE_ERROR.replace('{0}', SECTION).replace('{1}', dto.id);\n        }\n\n        dialog.openConfirm(confirmMsg).then(function () {\n            block.global.start();\n            deleteFnc(dto.id).then(function () {\n                growl.success(successMsg);\n            }).catch(function () {\n                growl.error(errorMsg);\n            }).finally(function () {\n                block.global.stop();\n            });\n        });\n    };\n\n    this.unwatch = preview.disable;\n    this.isWatchActive = preview.isActive;\n\n    this.rotateLeft = tools.rotateLeft;\n    this.rotateRight = tools.rotateRight;\n    this.stop = tools.stop;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/controllers/ToolsCtrl.js\n **/","angular.module('VirtualBookshelf')\r\n.controller('ToolsCtrl', function (user, selector, tools, preview, bookEdit, dialog, block, growl) {\r\n    var DELETE_CONFIRM = 'Delete {0}: {1}?';\r\n    var DELETE_SUCCESS = '{0}: {1} deleted.';\r\n    var DELETE_ERROR = 'Can not delete {0}: {1}.';\r\n    var BOOK = 'book';\r\n    var SECTION = 'section';\r\n\r\n    this.isShow = function() {\r\n        return selector.isSelectedEditable() || preview.isActive();\r\n    };\r\n\r\n    this.isBook = function() {\r\n        return selector.isSelectedBook();\r\n    };\r\n\r\n    this.isSection = function() {\r\n        return selector.isSelectedSection();\r\n    };\r\n\r\n    this.isRotatable = function() {\r\n        return selector.isSelectedSection() || preview.isActive();\r\n    };\r\n\r\n    this.isEditable = function() {\r\n        return this.isBook() && !preview.isActive();\r\n    };\r\n\r\n    this.isDeletable = function() {\r\n        return selector.isSelectedEditable() && user.isAuthorized() && !preview.isActive();\r\n    };\r\n\r\n    this.isWatchable = function() {\r\n        return selector.isSelectedBook() && !preview.isActive() && !this.isPlaceble();\r\n    };\r\n\r\n    this.isPlaceble = function() {\r\n        var obj = selector.getSelectedObject();\r\n        return !obj && selector.isSelectedBook() && user.isAuthorized();\r\n    };\r\n\r\n    this.isUnplaceble = function() {\r\n        var obj = selector.getSelectedObject();\r\n        return obj && selector.isSelectedBook() && user.isAuthorized() && !preview.isActive();\r\n    };\r\n\r\n    this.isPlacing = function() {\r\n        return selector.placing;\r\n    };\r\n\r\n    this.place = function() {\r\n        selector.placing = !selector.placing;\r\n    };\r\n\r\n    this.unplace = function() {\r\n        tools.unplace();\r\n    };\r\n\r\n    this.watch = function()  {\r\n        var obj = selector.getSelectedObject();\r\n        preview.enable(obj);\r\n    };\r\n\r\n    this.getTitle = function() {\r\n        return  this.isBook() ? selector.getSelectedDto().title :\r\n                this.isSection() ? selector.getSelectedObject().getId() :\r\n                null;\r\n    };\r\n\r\n    this.edit = function() {\r\n        bookEdit.show(selector.getSelectedDto());\r\n    };\r\n\r\n    this.delete = function() {\r\n        var dto = selector.getSelectedDto();\r\n        var confirmMsg;\r\n        var successMsg;\r\n        var errorMsg;\r\n        var deleteFnc;\r\n\r\n        if(selector.isSelectedBook()) {\r\n            deleteFnc = tools.deleteBook;\r\n            confirmMsg = DELETE_CONFIRM.replace('{0}', BOOK).replace('{1}', dto.title);\r\n            successMsg = DELETE_SUCCESS.replace('{0}', BOOK).replace('{1}', dto.title);\r\n            errorMsg = DELETE_ERROR.replace('{0}', BOOK).replace('{1}', dto.title);\r\n        } else if(selector.isSelectedSection()) {\r\n            deleteFnc = tools.deleteSection;\r\n            confirmMsg = DELETE_CONFIRM.replace('{0}', SECTION).replace('{1}', dto.id);\r\n            successMsg = DELETE_SUCCESS.replace('{0}', SECTION).replace('{1}', dto.id);\r\n            errorMsg = DELETE_ERROR.replace('{0}', SECTION).replace('{1}', dto.id);\r\n        }\r\n\r\n        dialog.openConfirm(confirmMsg).then(function () {\r\n            block.global.start();\r\n            deleteFnc(dto.id).then(function () {\r\n                growl.success(successMsg);\r\n            }).catch(function () {\r\n                growl.error(errorMsg);\r\n            }).finally(function () {\r\n                block.global.stop();\r\n            });\r\n        });\r\n    };\r\n\r\n    this.unwatch = preview.disable;\r\n    this.isWatchActive = preview.isActive;\r\n\r\n    this.rotateLeft = tools.rotateLeft;\r\n    this.rotateRight = tools.rotateRight;\r\n    this.stop = tools.stop;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/controllers/ToolsCtrl.js\n **/","'use strict';\n\nangular.module('VirtualBookshelf').controller('TooltipCtrl', function (tooltip, BookObject) {\n    this.isShow = function () {\n        return tooltip.obj.type === BookObject.TYPE;\n    };\n\n    this.obj = tooltip.obj;\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/controllers/TooltipCtrl.js\n **/","angular.module('VirtualBookshelf')\r\n.controller('TooltipCtrl', function (tooltip, BookObject) {\r\n    this.isShow = function() {\r\n        return tooltip.obj.type === BookObject.TYPE;\r\n    };\r\n\r\n    this.obj = tooltip.obj;\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/controllers/TooltipCtrl.js\n **/","'use strict';\n\nangular.module('VirtualBookshelf').controller('WelcomeCtrl', function (authorization, selectLibrary, createLibrary, environment, user) {\n\tvar closed = false;\n\n\tthis.isShowAuthorization = function () {\n\t\treturn authorization.isShow();\n\t};\n\n\tthis.isShowSelectLibrary = function () {\n\t\treturn selectLibrary.isAvailable() && !selectLibrary.isUserLibrary(user.getId());\n\t};\n\n\tthis.isShowCreateLibrary = function () {\n\t\treturn !this.isShowAuthorization() && !selectLibrary.isAvailable();\n\t};\n\n\tthis.isShow = function () {\n\t\treturn !closed && (this.isShowAuthorization() || this.isShowCreateLibrary() || this.isShowSelectLibrary());\n\t};\n\n\tthis.isLoaded = function () {\n\t\treturn environment.getLoaded();\n\t};\n\n\tthis.showLoginDialog = function () {\n\t\tauthorization.show();\n\t};\n\n\tthis.showSelectLibraryDialog = function () {\n\t\tselectLibrary.show();\n\t};\n\n\tthis.showCreateLibraryDialog = function () {\n\t\tcreateLibrary.show();\n\t};\n\n\tthis.close = function () {\n\t\tclosed = true;\n\t};\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/controllers/WelcomeCtrl.js\n **/","angular.module('VirtualBookshelf')\r\n.controller('WelcomeCtrl', function (authorization, selectLibrary, createLibrary, environment, user) {\r\n\tvar closed = false;\r\n\r\n\tthis.isShowAuthorization = function() {\r\n\t\treturn authorization.isShow();\r\n\t};\r\n\t\r\n\tthis.isShowSelectLibrary = function() {\r\n\t\treturn selectLibrary.isAvailable() && !selectLibrary.isUserLibrary(user.getId());\r\n\t};\r\n\r\n\tthis.isShowCreateLibrary = function() {\r\n\t\treturn !this.isShowAuthorization() && !selectLibrary.isAvailable();\r\n\t};\r\n\r\n\tthis.isShow = function() {\r\n\t\treturn !closed && (this.isShowAuthorization() || this.isShowCreateLibrary() || this.isShowSelectLibrary());\r\n\t};\r\n\r\n\tthis.isLoaded = function() {\r\n\t\treturn environment.getLoaded();\r\n\t};\r\n\r\n\tthis.showLoginDialog = function() {\r\n\t\tauthorization.show();\r\n\t};\r\n\r\n\tthis.showSelectLibraryDialog = function() {\r\n\t\tselectLibrary.show();\r\n\t};\r\n\r\n\tthis.showCreateLibraryDialog = function() {\r\n\t\tcreateLibrary.show();\r\n\t};\r\n\r\n\tthis.close = function() {\r\n\t\tclosed = true;\r\n\t};\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/Projects/personal/VirtualBookshelf/src/js/controllers/WelcomeCtrl.js\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../css-loader/index.js!./font-awesome.min.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../css-loader/index.js!./font-awesome.min.css\", function() {\n\t\t\tvar newContent = require(\"!!./../../css-loader/index.js!./font-awesome.min.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/font-awesome/css/font-awesome.min.css\n ** module id = 55\n ** module chunks = 0\n **/","exports = module.exports = require(\"./../../css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"/*!\\n *  Font Awesome 4.5.0 by @davegandy - http://fontawesome.io - @fontawesome\\n *  License - http://fontawesome.io/license (Font: SIL OFL 1.1, CSS: MIT License)\\n */@font-face{font-family:FontAwesome;src:url(\" + require(\"../fonts/fontawesome-webfont.eot?v=4.5.0\") + \");src:url(\" + require(\"../fonts/fontawesome-webfont.eot\") + \"?#iefix&v=4.5.0) format('embedded-opentype'),url(\" + require(\"../fonts/fontawesome-webfont.woff2?v=4.5.0\") + \") format('woff2'),url(\" + require(\"../fonts/fontawesome-webfont.woff?v=4.5.0\") + \") format('woff'),url(\" + require(\"../fonts/fontawesome-webfont.ttf?v=4.5.0\") + \") format('truetype'),url(\" + require(\"../fonts/fontawesome-webfont.svg?v=4.5.0\") + \"#fontawesomeregular) format('svg');font-weight:400;font-style:normal}.fa{display:inline-block;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.fa-lg{font-size:1.33333333em;line-height:.75em;vertical-align:-15%}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-fw{width:1.28571429em;text-align:center}.fa-ul{padding-left:0;margin-left:2.14285714em;list-style-type:none}.fa-ul>li{position:relative}.fa-li{position:absolute;left:-2.14285714em;width:2.14285714em;top:.14285714em;text-align:center}.fa-li.fa-lg{left:-1.85714286em}.fa-border{padding:.2em .25em .15em;border:.08em solid #eee;border-radius:.1em}.fa-pull-left{float:left}.fa-pull-right{float:right}.fa.fa-pull-left{margin-right:.3em}.fa.fa-pull-right{margin-left:.3em}.pull-right{float:right}.pull-left{float:left}.fa.pull-left{margin-right:.3em}.fa.pull-right{margin-left:.3em}.fa-spin{-webkit-animation:fa-spin 2s infinite linear;animation:fa-spin 2s infinite linear}.fa-pulse{-webkit-animation:fa-spin 1s infinite steps(8);animation:fa-spin 1s infinite steps(8)}@-webkit-keyframes fa-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes fa-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}.fa-rotate-90{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=1);-webkit-transform:rotate(90deg);transform:rotate(90deg)}.fa-rotate-180{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=2);-webkit-transform:rotate(180deg);transform:rotate(180deg)}.fa-rotate-270{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=3);-webkit-transform:rotate(270deg);transform:rotate(270deg)}.fa-flip-horizontal{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=0,mirror=1);-webkit-transform:scaleX(-1);transform:scaleX(-1)}.fa-flip-vertical{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=2,mirror=1);-webkit-transform:scaleY(-1);transform:scaleY(-1)}:root .fa-flip-horizontal,:root .fa-flip-vertical,:root .fa-rotate-90,:root .fa-rotate-180,:root .fa-rotate-270{filter:none}.fa-stack{position:relative;display:inline-block;width:2em;height:2em;line-height:2em;vertical-align:middle}.fa-stack-1x,.fa-stack-2x{position:absolute;left:0;width:100%;text-align:center}.fa-stack-1x{line-height:inherit}.fa-stack-2x{font-size:2em}.fa-inverse{color:#fff}.fa-glass:before{content:\\\"\\\\F000\\\"}.fa-music:before{content:\\\"\\\\F001\\\"}.fa-search:before{content:\\\"\\\\F002\\\"}.fa-envelope-o:before{content:\\\"\\\\F003\\\"}.fa-heart:before{content:\\\"\\\\F004\\\"}.fa-star:before{content:\\\"\\\\F005\\\"}.fa-star-o:before{content:\\\"\\\\F006\\\"}.fa-user:before{content:\\\"\\\\F007\\\"}.fa-film:before{content:\\\"\\\\F008\\\"}.fa-th-large:before{content:\\\"\\\\F009\\\"}.fa-th:before{content:\\\"\\\\F00A\\\"}.fa-th-list:before{content:\\\"\\\\F00B\\\"}.fa-check:before{content:\\\"\\\\F00C\\\"}.fa-close:before,.fa-remove:before,.fa-times:before{content:\\\"\\\\F00D\\\"}.fa-search-plus:before{content:\\\"\\\\F00E\\\"}.fa-search-minus:before{content:\\\"\\\\F010\\\"}.fa-power-off:before{content:\\\"\\\\F011\\\"}.fa-signal:before{content:\\\"\\\\F012\\\"}.fa-cog:before,.fa-gear:before{content:\\\"\\\\F013\\\"}.fa-trash-o:before{content:\\\"\\\\F014\\\"}.fa-home:before{content:\\\"\\\\F015\\\"}.fa-file-o:before{content:\\\"\\\\F016\\\"}.fa-clock-o:before{content:\\\"\\\\F017\\\"}.fa-road:before{content:\\\"\\\\F018\\\"}.fa-download:before{content:\\\"\\\\F019\\\"}.fa-arrow-circle-o-down:before{content:\\\"\\\\F01A\\\"}.fa-arrow-circle-o-up:before{content:\\\"\\\\F01B\\\"}.fa-inbox:before{content:\\\"\\\\F01C\\\"}.fa-play-circle-o:before{content:\\\"\\\\F01D\\\"}.fa-repeat:before,.fa-rotate-right:before{content:\\\"\\\\F01E\\\"}.fa-refresh:before{content:\\\"\\\\F021\\\"}.fa-list-alt:before{content:\\\"\\\\F022\\\"}.fa-lock:before{content:\\\"\\\\F023\\\"}.fa-flag:before{content:\\\"\\\\F024\\\"}.fa-headphones:before{content:\\\"\\\\F025\\\"}.fa-volume-off:before{content:\\\"\\\\F026\\\"}.fa-volume-down:before{content:\\\"\\\\F027\\\"}.fa-volume-up:before{content:\\\"\\\\F028\\\"}.fa-qrcode:before{content:\\\"\\\\F029\\\"}.fa-barcode:before{content:\\\"\\\\F02A\\\"}.fa-tag:before{content:\\\"\\\\F02B\\\"}.fa-tags:before{content:\\\"\\\\F02C\\\"}.fa-book:before{content:\\\"\\\\F02D\\\"}.fa-bookmark:before{content:\\\"\\\\F02E\\\"}.fa-print:before{content:\\\"\\\\F02F\\\"}.fa-camera:before{content:\\\"\\\\F030\\\"}.fa-font:before{content:\\\"\\\\F031\\\"}.fa-bold:before{content:\\\"\\\\F032\\\"}.fa-italic:before{content:\\\"\\\\F033\\\"}.fa-text-height:before{content:\\\"\\\\F034\\\"}.fa-text-width:before{content:\\\"\\\\F035\\\"}.fa-align-left:before{content:\\\"\\\\F036\\\"}.fa-align-center:before{content:\\\"\\\\F037\\\"}.fa-align-right:before{content:\\\"\\\\F038\\\"}.fa-align-justify:before{content:\\\"\\\\F039\\\"}.fa-list:before{content:\\\"\\\\F03A\\\"}.fa-dedent:before,.fa-outdent:before{content:\\\"\\\\F03B\\\"}.fa-indent:before{content:\\\"\\\\F03C\\\"}.fa-video-camera:before{content:\\\"\\\\F03D\\\"}.fa-image:before,.fa-photo:before,.fa-picture-o:before{content:\\\"\\\\F03E\\\"}.fa-pencil:before{content:\\\"\\\\F040\\\"}.fa-map-marker:before{content:\\\"\\\\F041\\\"}.fa-adjust:before{content:\\\"\\\\F042\\\"}.fa-tint:before{content:\\\"\\\\F043\\\"}.fa-edit:before,.fa-pencil-square-o:before{content:\\\"\\\\F044\\\"}.fa-share-square-o:before{content:\\\"\\\\F045\\\"}.fa-check-square-o:before{content:\\\"\\\\F046\\\"}.fa-arrows:before{content:\\\"\\\\F047\\\"}.fa-step-backward:before{content:\\\"\\\\F048\\\"}.fa-fast-backward:before{content:\\\"\\\\F049\\\"}.fa-backward:before{content:\\\"\\\\F04A\\\"}.fa-play:before{content:\\\"\\\\F04B\\\"}.fa-pause:before{content:\\\"\\\\F04C\\\"}.fa-stop:before{content:\\\"\\\\F04D\\\"}.fa-forward:before{content:\\\"\\\\F04E\\\"}.fa-fast-forward:before{content:\\\"\\\\F050\\\"}.fa-step-forward:before{content:\\\"\\\\F051\\\"}.fa-eject:before{content:\\\"\\\\F052\\\"}.fa-chevron-left:before{content:\\\"\\\\F053\\\"}.fa-chevron-right:before{content:\\\"\\\\F054\\\"}.fa-plus-circle:before{content:\\\"\\\\F055\\\"}.fa-minus-circle:before{content:\\\"\\\\F056\\\"}.fa-times-circle:before{content:\\\"\\\\F057\\\"}.fa-check-circle:before{content:\\\"\\\\F058\\\"}.fa-question-circle:before{content:\\\"\\\\F059\\\"}.fa-info-circle:before{content:\\\"\\\\F05A\\\"}.fa-crosshairs:before{content:\\\"\\\\F05B\\\"}.fa-times-circle-o:before{content:\\\"\\\\F05C\\\"}.fa-check-circle-o:before{content:\\\"\\\\F05D\\\"}.fa-ban:before{content:\\\"\\\\F05E\\\"}.fa-arrow-left:before{content:\\\"\\\\F060\\\"}.fa-arrow-right:before{content:\\\"\\\\F061\\\"}.fa-arrow-up:before{content:\\\"\\\\F062\\\"}.fa-arrow-down:before{content:\\\"\\\\F063\\\"}.fa-mail-forward:before,.fa-share:before{content:\\\"\\\\F064\\\"}.fa-expand:before{content:\\\"\\\\F065\\\"}.fa-compress:before{content:\\\"\\\\F066\\\"}.fa-plus:before{content:\\\"\\\\F067\\\"}.fa-minus:before{content:\\\"\\\\F068\\\"}.fa-asterisk:before{content:\\\"\\\\F069\\\"}.fa-exclamation-circle:before{content:\\\"\\\\F06A\\\"}.fa-gift:before{content:\\\"\\\\F06B\\\"}.fa-leaf:before{content:\\\"\\\\F06C\\\"}.fa-fire:before{content:\\\"\\\\F06D\\\"}.fa-eye:before{content:\\\"\\\\F06E\\\"}.fa-eye-slash:before{content:\\\"\\\\F070\\\"}.fa-exclamation-triangle:before,.fa-warning:before{content:\\\"\\\\F071\\\"}.fa-plane:before{content:\\\"\\\\F072\\\"}.fa-calendar:before{content:\\\"\\\\F073\\\"}.fa-random:before{content:\\\"\\\\F074\\\"}.fa-comment:before{content:\\\"\\\\F075\\\"}.fa-magnet:before{content:\\\"\\\\F076\\\"}.fa-chevron-up:before{content:\\\"\\\\F077\\\"}.fa-chevron-down:before{content:\\\"\\\\F078\\\"}.fa-retweet:before{content:\\\"\\\\F079\\\"}.fa-shopping-cart:before{content:\\\"\\\\F07A\\\"}.fa-folder:before{content:\\\"\\\\F07B\\\"}.fa-folder-open:before{content:\\\"\\\\F07C\\\"}.fa-arrows-v:before{content:\\\"\\\\F07D\\\"}.fa-arrows-h:before{content:\\\"\\\\F07E\\\"}.fa-bar-chart-o:before,.fa-bar-chart:before{content:\\\"\\\\F080\\\"}.fa-twitter-square:before{content:\\\"\\\\F081\\\"}.fa-facebook-square:before{content:\\\"\\\\F082\\\"}.fa-camera-retro:before{content:\\\"\\\\F083\\\"}.fa-key:before{content:\\\"\\\\F084\\\"}.fa-cogs:before,.fa-gears:before{content:\\\"\\\\F085\\\"}.fa-comments:before{content:\\\"\\\\F086\\\"}.fa-thumbs-o-up:before{content:\\\"\\\\F087\\\"}.fa-thumbs-o-down:before{content:\\\"\\\\F088\\\"}.fa-star-half:before{content:\\\"\\\\F089\\\"}.fa-heart-o:before{content:\\\"\\\\F08A\\\"}.fa-sign-out:before{content:\\\"\\\\F08B\\\"}.fa-linkedin-square:before{content:\\\"\\\\F08C\\\"}.fa-thumb-tack:before{content:\\\"\\\\F08D\\\"}.fa-external-link:before{content:\\\"\\\\F08E\\\"}.fa-sign-in:before{content:\\\"\\\\F090\\\"}.fa-trophy:before{content:\\\"\\\\F091\\\"}.fa-github-square:before{content:\\\"\\\\F092\\\"}.fa-upload:before{content:\\\"\\\\F093\\\"}.fa-lemon-o:before{content:\\\"\\\\F094\\\"}.fa-phone:before{content:\\\"\\\\F095\\\"}.fa-square-o:before{content:\\\"\\\\F096\\\"}.fa-bookmark-o:before{content:\\\"\\\\F097\\\"}.fa-phone-square:before{content:\\\"\\\\F098\\\"}.fa-twitter:before{content:\\\"\\\\F099\\\"}.fa-facebook-f:before,.fa-facebook:before{content:\\\"\\\\F09A\\\"}.fa-github:before{content:\\\"\\\\F09B\\\"}.fa-unlock:before{content:\\\"\\\\F09C\\\"}.fa-credit-card:before{content:\\\"\\\\F09D\\\"}.fa-feed:before,.fa-rss:before{content:\\\"\\\\F09E\\\"}.fa-hdd-o:before{content:\\\"\\\\F0A0\\\"}.fa-bullhorn:before{content:\\\"\\\\F0A1\\\"}.fa-bell:before{content:\\\"\\\\F0F3\\\"}.fa-certificate:before{content:\\\"\\\\F0A3\\\"}.fa-hand-o-right:before{content:\\\"\\\\F0A4\\\"}.fa-hand-o-left:before{content:\\\"\\\\F0A5\\\"}.fa-hand-o-up:before{content:\\\"\\\\F0A6\\\"}.fa-hand-o-down:before{content:\\\"\\\\F0A7\\\"}.fa-arrow-circle-left:before{content:\\\"\\\\F0A8\\\"}.fa-arrow-circle-right:before{content:\\\"\\\\F0A9\\\"}.fa-arrow-circle-up:before{content:\\\"\\\\F0AA\\\"}.fa-arrow-circle-down:before{content:\\\"\\\\F0AB\\\"}.fa-globe:before{content:\\\"\\\\F0AC\\\"}.fa-wrench:before{content:\\\"\\\\F0AD\\\"}.fa-tasks:before{content:\\\"\\\\F0AE\\\"}.fa-filter:before{content:\\\"\\\\F0B0\\\"}.fa-briefcase:before{content:\\\"\\\\F0B1\\\"}.fa-arrows-alt:before{content:\\\"\\\\F0B2\\\"}.fa-group:before,.fa-users:before{content:\\\"\\\\F0C0\\\"}.fa-chain:before,.fa-link:before{content:\\\"\\\\F0C1\\\"}.fa-cloud:before{content:\\\"\\\\F0C2\\\"}.fa-flask:before{content:\\\"\\\\F0C3\\\"}.fa-cut:before,.fa-scissors:before{content:\\\"\\\\F0C4\\\"}.fa-copy:before,.fa-files-o:before{content:\\\"\\\\F0C5\\\"}.fa-paperclip:before{content:\\\"\\\\F0C6\\\"}.fa-floppy-o:before,.fa-save:before{content:\\\"\\\\F0C7\\\"}.fa-square:before{content:\\\"\\\\F0C8\\\"}.fa-bars:before,.fa-navicon:before,.fa-reorder:before{content:\\\"\\\\F0C9\\\"}.fa-list-ul:before{content:\\\"\\\\F0CA\\\"}.fa-list-ol:before{content:\\\"\\\\F0CB\\\"}.fa-strikethrough:before{content:\\\"\\\\F0CC\\\"}.fa-underline:before{content:\\\"\\\\F0CD\\\"}.fa-table:before{content:\\\"\\\\F0CE\\\"}.fa-magic:before{content:\\\"\\\\F0D0\\\"}.fa-truck:before{content:\\\"\\\\F0D1\\\"}.fa-pinterest:before{content:\\\"\\\\F0D2\\\"}.fa-pinterest-square:before{content:\\\"\\\\F0D3\\\"}.fa-google-plus-square:before{content:\\\"\\\\F0D4\\\"}.fa-google-plus:before{content:\\\"\\\\F0D5\\\"}.fa-money:before{content:\\\"\\\\F0D6\\\"}.fa-caret-down:before{content:\\\"\\\\F0D7\\\"}.fa-caret-up:before{content:\\\"\\\\F0D8\\\"}.fa-caret-left:before{content:\\\"\\\\F0D9\\\"}.fa-caret-right:before{content:\\\"\\\\F0DA\\\"}.fa-columns:before{content:\\\"\\\\F0DB\\\"}.fa-sort:before,.fa-unsorted:before{content:\\\"\\\\F0DC\\\"}.fa-sort-desc:before,.fa-sort-down:before{content:\\\"\\\\F0DD\\\"}.fa-sort-asc:before,.fa-sort-up:before{content:\\\"\\\\F0DE\\\"}.fa-envelope:before{content:\\\"\\\\F0E0\\\"}.fa-linkedin:before{content:\\\"\\\\F0E1\\\"}.fa-rotate-left:before,.fa-undo:before{content:\\\"\\\\F0E2\\\"}.fa-gavel:before,.fa-legal:before{content:\\\"\\\\F0E3\\\"}.fa-dashboard:before,.fa-tachometer:before{content:\\\"\\\\F0E4\\\"}.fa-comment-o:before{content:\\\"\\\\F0E5\\\"}.fa-comments-o:before{content:\\\"\\\\F0E6\\\"}.fa-bolt:before,.fa-flash:before{content:\\\"\\\\F0E7\\\"}.fa-sitemap:before{content:\\\"\\\\F0E8\\\"}.fa-umbrella:before{content:\\\"\\\\F0E9\\\"}.fa-clipboard:before,.fa-paste:before{content:\\\"\\\\F0EA\\\"}.fa-lightbulb-o:before{content:\\\"\\\\F0EB\\\"}.fa-exchange:before{content:\\\"\\\\F0EC\\\"}.fa-cloud-download:before{content:\\\"\\\\F0ED\\\"}.fa-cloud-upload:before{content:\\\"\\\\F0EE\\\"}.fa-user-md:before{content:\\\"\\\\F0F0\\\"}.fa-stethoscope:before{content:\\\"\\\\F0F1\\\"}.fa-suitcase:before{content:\\\"\\\\F0F2\\\"}.fa-bell-o:before{content:\\\"\\\\F0A2\\\"}.fa-coffee:before{content:\\\"\\\\F0F4\\\"}.fa-cutlery:before{content:\\\"\\\\F0F5\\\"}.fa-file-text-o:before{content:\\\"\\\\F0F6\\\"}.fa-building-o:before{content:\\\"\\\\F0F7\\\"}.fa-hospital-o:before{content:\\\"\\\\F0F8\\\"}.fa-ambulance:before{content:\\\"\\\\F0F9\\\"}.fa-medkit:before{content:\\\"\\\\F0FA\\\"}.fa-fighter-jet:before{content:\\\"\\\\F0FB\\\"}.fa-beer:before{content:\\\"\\\\F0FC\\\"}.fa-h-square:before{content:\\\"\\\\F0FD\\\"}.fa-plus-square:before{content:\\\"\\\\F0FE\\\"}.fa-angle-double-left:before{content:\\\"\\\\F100\\\"}.fa-angle-double-right:before{content:\\\"\\\\F101\\\"}.fa-angle-double-up:before{content:\\\"\\\\F102\\\"}.fa-angle-double-down:before{content:\\\"\\\\F103\\\"}.fa-angle-left:before{content:\\\"\\\\F104\\\"}.fa-angle-right:before{content:\\\"\\\\F105\\\"}.fa-angle-up:before{content:\\\"\\\\F106\\\"}.fa-angle-down:before{content:\\\"\\\\F107\\\"}.fa-desktop:before{content:\\\"\\\\F108\\\"}.fa-laptop:before{content:\\\"\\\\F109\\\"}.fa-tablet:before{content:\\\"\\\\F10A\\\"}.fa-mobile-phone:before,.fa-mobile:before{content:\\\"\\\\F10B\\\"}.fa-circle-o:before{content:\\\"\\\\F10C\\\"}.fa-quote-left:before{content:\\\"\\\\F10D\\\"}.fa-quote-right:before{content:\\\"\\\\F10E\\\"}.fa-spinner:before{content:\\\"\\\\F110\\\"}.fa-circle:before{content:\\\"\\\\F111\\\"}.fa-mail-reply:before,.fa-reply:before{content:\\\"\\\\F112\\\"}.fa-github-alt:before{content:\\\"\\\\F113\\\"}.fa-folder-o:before{content:\\\"\\\\F114\\\"}.fa-folder-open-o:before{content:\\\"\\\\F115\\\"}.fa-smile-o:before{content:\\\"\\\\F118\\\"}.fa-frown-o:before{content:\\\"\\\\F119\\\"}.fa-meh-o:before{content:\\\"\\\\F11A\\\"}.fa-gamepad:before{content:\\\"\\\\F11B\\\"}.fa-keyboard-o:before{content:\\\"\\\\F11C\\\"}.fa-flag-o:before{content:\\\"\\\\F11D\\\"}.fa-flag-checkered:before{content:\\\"\\\\F11E\\\"}.fa-terminal:before{content:\\\"\\\\F120\\\"}.fa-code:before{content:\\\"\\\\F121\\\"}.fa-mail-reply-all:before,.fa-reply-all:before{content:\\\"\\\\F122\\\"}.fa-star-half-empty:before,.fa-star-half-full:before,.fa-star-half-o:before{content:\\\"\\\\F123\\\"}.fa-location-arrow:before{content:\\\"\\\\F124\\\"}.fa-crop:before{content:\\\"\\\\F125\\\"}.fa-code-fork:before{content:\\\"\\\\F126\\\"}.fa-chain-broken:before,.fa-unlink:before{content:\\\"\\\\F127\\\"}.fa-question:before{content:\\\"\\\\F128\\\"}.fa-info:before{content:\\\"\\\\F129\\\"}.fa-exclamation:before{content:\\\"\\\\F12A\\\"}.fa-superscript:before{content:\\\"\\\\F12B\\\"}.fa-subscript:before{content:\\\"\\\\F12C\\\"}.fa-eraser:before{content:\\\"\\\\F12D\\\"}.fa-puzzle-piece:before{content:\\\"\\\\F12E\\\"}.fa-microphone:before{content:\\\"\\\\F130\\\"}.fa-microphone-slash:before{content:\\\"\\\\F131\\\"}.fa-shield:before{content:\\\"\\\\F132\\\"}.fa-calendar-o:before{content:\\\"\\\\F133\\\"}.fa-fire-extinguisher:before{content:\\\"\\\\F134\\\"}.fa-rocket:before{content:\\\"\\\\F135\\\"}.fa-maxcdn:before{content:\\\"\\\\F136\\\"}.fa-chevron-circle-left:before{content:\\\"\\\\F137\\\"}.fa-chevron-circle-right:before{content:\\\"\\\\F138\\\"}.fa-chevron-circle-up:before{content:\\\"\\\\F139\\\"}.fa-chevron-circle-down:before{content:\\\"\\\\F13A\\\"}.fa-html5:before{content:\\\"\\\\F13B\\\"}.fa-css3:before{content:\\\"\\\\F13C\\\"}.fa-anchor:before{content:\\\"\\\\F13D\\\"}.fa-unlock-alt:before{content:\\\"\\\\F13E\\\"}.fa-bullseye:before{content:\\\"\\\\F140\\\"}.fa-ellipsis-h:before{content:\\\"\\\\F141\\\"}.fa-ellipsis-v:before{content:\\\"\\\\F142\\\"}.fa-rss-square:before{content:\\\"\\\\F143\\\"}.fa-play-circle:before{content:\\\"\\\\F144\\\"}.fa-ticket:before{content:\\\"\\\\F145\\\"}.fa-minus-square:before{content:\\\"\\\\F146\\\"}.fa-minus-square-o:before{content:\\\"\\\\F147\\\"}.fa-level-up:before{content:\\\"\\\\F148\\\"}.fa-level-down:before{content:\\\"\\\\F149\\\"}.fa-check-square:before{content:\\\"\\\\F14A\\\"}.fa-pencil-square:before{content:\\\"\\\\F14B\\\"}.fa-external-link-square:before{content:\\\"\\\\F14C\\\"}.fa-share-square:before{content:\\\"\\\\F14D\\\"}.fa-compass:before{content:\\\"\\\\F14E\\\"}.fa-caret-square-o-down:before,.fa-toggle-down:before{content:\\\"\\\\F150\\\"}.fa-caret-square-o-up:before,.fa-toggle-up:before{content:\\\"\\\\F151\\\"}.fa-caret-square-o-right:before,.fa-toggle-right:before{content:\\\"\\\\F152\\\"}.fa-eur:before,.fa-euro:before{content:\\\"\\\\F153\\\"}.fa-gbp:before{content:\\\"\\\\F154\\\"}.fa-dollar:before,.fa-usd:before{content:\\\"\\\\F155\\\"}.fa-inr:before,.fa-rupee:before{content:\\\"\\\\F156\\\"}.fa-cny:before,.fa-jpy:before,.fa-rmb:before,.fa-yen:before{content:\\\"\\\\F157\\\"}.fa-rouble:before,.fa-rub:before,.fa-ruble:before{content:\\\"\\\\F158\\\"}.fa-krw:before,.fa-won:before{content:\\\"\\\\F159\\\"}.fa-bitcoin:before,.fa-btc:before{content:\\\"\\\\F15A\\\"}.fa-file:before{content:\\\"\\\\F15B\\\"}.fa-file-text:before{content:\\\"\\\\F15C\\\"}.fa-sort-alpha-asc:before{content:\\\"\\\\F15D\\\"}.fa-sort-alpha-desc:before{content:\\\"\\\\F15E\\\"}.fa-sort-amount-asc:before{content:\\\"\\\\F160\\\"}.fa-sort-amount-desc:before{content:\\\"\\\\F161\\\"}.fa-sort-numeric-asc:before{content:\\\"\\\\F162\\\"}.fa-sort-numeric-desc:before{content:\\\"\\\\F163\\\"}.fa-thumbs-up:before{content:\\\"\\\\F164\\\"}.fa-thumbs-down:before{content:\\\"\\\\F165\\\"}.fa-youtube-square:before{content:\\\"\\\\F166\\\"}.fa-youtube:before{content:\\\"\\\\F167\\\"}.fa-xing:before{content:\\\"\\\\F168\\\"}.fa-xing-square:before{content:\\\"\\\\F169\\\"}.fa-youtube-play:before{content:\\\"\\\\F16A\\\"}.fa-dropbox:before{content:\\\"\\\\F16B\\\"}.fa-stack-overflow:before{content:\\\"\\\\F16C\\\"}.fa-instagram:before{content:\\\"\\\\F16D\\\"}.fa-flickr:before{content:\\\"\\\\F16E\\\"}.fa-adn:before{content:\\\"\\\\F170\\\"}.fa-bitbucket:before{content:\\\"\\\\F171\\\"}.fa-bitbucket-square:before{content:\\\"\\\\F172\\\"}.fa-tumblr:before{content:\\\"\\\\F173\\\"}.fa-tumblr-square:before{content:\\\"\\\\F174\\\"}.fa-long-arrow-down:before{content:\\\"\\\\F175\\\"}.fa-long-arrow-up:before{content:\\\"\\\\F176\\\"}.fa-long-arrow-left:before{content:\\\"\\\\F177\\\"}.fa-long-arrow-right:before{content:\\\"\\\\F178\\\"}.fa-apple:before{content:\\\"\\\\F179\\\"}.fa-windows:before{content:\\\"\\\\F17A\\\"}.fa-android:before{content:\\\"\\\\F17B\\\"}.fa-linux:before{content:\\\"\\\\F17C\\\"}.fa-dribbble:before{content:\\\"\\\\F17D\\\"}.fa-skype:before{content:\\\"\\\\F17E\\\"}.fa-foursquare:before{content:\\\"\\\\F180\\\"}.fa-trello:before{content:\\\"\\\\F181\\\"}.fa-female:before{content:\\\"\\\\F182\\\"}.fa-male:before{content:\\\"\\\\F183\\\"}.fa-gittip:before,.fa-gratipay:before{content:\\\"\\\\F184\\\"}.fa-sun-o:before{content:\\\"\\\\F185\\\"}.fa-moon-o:before{content:\\\"\\\\F186\\\"}.fa-archive:before{content:\\\"\\\\F187\\\"}.fa-bug:before{content:\\\"\\\\F188\\\"}.fa-vk:before{content:\\\"\\\\F189\\\"}.fa-weibo:before{content:\\\"\\\\F18A\\\"}.fa-renren:before{content:\\\"\\\\F18B\\\"}.fa-pagelines:before{content:\\\"\\\\F18C\\\"}.fa-stack-exchange:before{content:\\\"\\\\F18D\\\"}.fa-arrow-circle-o-right:before{content:\\\"\\\\F18E\\\"}.fa-arrow-circle-o-left:before{content:\\\"\\\\F190\\\"}.fa-caret-square-o-left:before,.fa-toggle-left:before{content:\\\"\\\\F191\\\"}.fa-dot-circle-o:before{content:\\\"\\\\F192\\\"}.fa-wheelchair:before{content:\\\"\\\\F193\\\"}.fa-vimeo-square:before{content:\\\"\\\\F194\\\"}.fa-try:before,.fa-turkish-lira:before{content:\\\"\\\\F195\\\"}.fa-plus-square-o:before{content:\\\"\\\\F196\\\"}.fa-space-shuttle:before{content:\\\"\\\\F197\\\"}.fa-slack:before{content:\\\"\\\\F198\\\"}.fa-envelope-square:before{content:\\\"\\\\F199\\\"}.fa-wordpress:before{content:\\\"\\\\F19A\\\"}.fa-openid:before{content:\\\"\\\\F19B\\\"}.fa-bank:before,.fa-institution:before,.fa-university:before{content:\\\"\\\\F19C\\\"}.fa-graduation-cap:before,.fa-mortar-board:before{content:\\\"\\\\F19D\\\"}.fa-yahoo:before{content:\\\"\\\\F19E\\\"}.fa-google:before{content:\\\"\\\\F1A0\\\"}.fa-reddit:before{content:\\\"\\\\F1A1\\\"}.fa-reddit-square:before{content:\\\"\\\\F1A2\\\"}.fa-stumbleupon-circle:before{content:\\\"\\\\F1A3\\\"}.fa-stumbleupon:before{content:\\\"\\\\F1A4\\\"}.fa-delicious:before{content:\\\"\\\\F1A5\\\"}.fa-digg:before{content:\\\"\\\\F1A6\\\"}.fa-pied-piper:before{content:\\\"\\\\F1A7\\\"}.fa-pied-piper-alt:before{content:\\\"\\\\F1A8\\\"}.fa-drupal:before{content:\\\"\\\\F1A9\\\"}.fa-joomla:before{content:\\\"\\\\F1AA\\\"}.fa-language:before{content:\\\"\\\\F1AB\\\"}.fa-fax:before{content:\\\"\\\\F1AC\\\"}.fa-building:before{content:\\\"\\\\F1AD\\\"}.fa-child:before{content:\\\"\\\\F1AE\\\"}.fa-paw:before{content:\\\"\\\\F1B0\\\"}.fa-spoon:before{content:\\\"\\\\F1B1\\\"}.fa-cube:before{content:\\\"\\\\F1B2\\\"}.fa-cubes:before{content:\\\"\\\\F1B3\\\"}.fa-behance:before{content:\\\"\\\\F1B4\\\"}.fa-behance-square:before{content:\\\"\\\\F1B5\\\"}.fa-steam:before{content:\\\"\\\\F1B6\\\"}.fa-steam-square:before{content:\\\"\\\\F1B7\\\"}.fa-recycle:before{content:\\\"\\\\F1B8\\\"}.fa-automobile:before,.fa-car:before{content:\\\"\\\\F1B9\\\"}.fa-cab:before,.fa-taxi:before{content:\\\"\\\\F1BA\\\"}.fa-tree:before{content:\\\"\\\\F1BB\\\"}.fa-spotify:before{content:\\\"\\\\F1BC\\\"}.fa-deviantart:before{content:\\\"\\\\F1BD\\\"}.fa-soundcloud:before{content:\\\"\\\\F1BE\\\"}.fa-database:before{content:\\\"\\\\F1C0\\\"}.fa-file-pdf-o:before{content:\\\"\\\\F1C1\\\"}.fa-file-word-o:before{content:\\\"\\\\F1C2\\\"}.fa-file-excel-o:before{content:\\\"\\\\F1C3\\\"}.fa-file-powerpoint-o:before{content:\\\"\\\\F1C4\\\"}.fa-file-image-o:before,.fa-file-photo-o:before,.fa-file-picture-o:before{content:\\\"\\\\F1C5\\\"}.fa-file-archive-o:before,.fa-file-zip-o:before{content:\\\"\\\\F1C6\\\"}.fa-file-audio-o:before,.fa-file-sound-o:before{content:\\\"\\\\F1C7\\\"}.fa-file-movie-o:before,.fa-file-video-o:before{content:\\\"\\\\F1C8\\\"}.fa-file-code-o:before{content:\\\"\\\\F1C9\\\"}.fa-vine:before{content:\\\"\\\\F1CA\\\"}.fa-codepen:before{content:\\\"\\\\F1CB\\\"}.fa-jsfiddle:before{content:\\\"\\\\F1CC\\\"}.fa-life-bouy:before,.fa-life-buoy:before,.fa-life-ring:before,.fa-life-saver:before,.fa-support:before{content:\\\"\\\\F1CD\\\"}.fa-circle-o-notch:before{content:\\\"\\\\F1CE\\\"}.fa-ra:before,.fa-rebel:before{content:\\\"\\\\F1D0\\\"}.fa-empire:before,.fa-ge:before{content:\\\"\\\\F1D1\\\"}.fa-git-square:before{content:\\\"\\\\F1D2\\\"}.fa-git:before{content:\\\"\\\\F1D3\\\"}.fa-hacker-news:before,.fa-y-combinator-square:before,.fa-yc-square:before{content:\\\"\\\\F1D4\\\"}.fa-tencent-weibo:before{content:\\\"\\\\F1D5\\\"}.fa-qq:before{content:\\\"\\\\F1D6\\\"}.fa-wechat:before,.fa-weixin:before{content:\\\"\\\\F1D7\\\"}.fa-paper-plane:before,.fa-send:before{content:\\\"\\\\F1D8\\\"}.fa-paper-plane-o:before,.fa-send-o:before{content:\\\"\\\\F1D9\\\"}.fa-history:before{content:\\\"\\\\F1DA\\\"}.fa-circle-thin:before{content:\\\"\\\\F1DB\\\"}.fa-header:before{content:\\\"\\\\F1DC\\\"}.fa-paragraph:before{content:\\\"\\\\F1DD\\\"}.fa-sliders:before{content:\\\"\\\\F1DE\\\"}.fa-share-alt:before{content:\\\"\\\\F1E0\\\"}.fa-share-alt-square:before{content:\\\"\\\\F1E1\\\"}.fa-bomb:before{content:\\\"\\\\F1E2\\\"}.fa-futbol-o:before,.fa-soccer-ball-o:before{content:\\\"\\\\F1E3\\\"}.fa-tty:before{content:\\\"\\\\F1E4\\\"}.fa-binoculars:before{content:\\\"\\\\F1E5\\\"}.fa-plug:before{content:\\\"\\\\F1E6\\\"}.fa-slideshare:before{content:\\\"\\\\F1E7\\\"}.fa-twitch:before{content:\\\"\\\\F1E8\\\"}.fa-yelp:before{content:\\\"\\\\F1E9\\\"}.fa-newspaper-o:before{content:\\\"\\\\F1EA\\\"}.fa-wifi:before{content:\\\"\\\\F1EB\\\"}.fa-calculator:before{content:\\\"\\\\F1EC\\\"}.fa-paypal:before{content:\\\"\\\\F1ED\\\"}.fa-google-wallet:before{content:\\\"\\\\F1EE\\\"}.fa-cc-visa:before{content:\\\"\\\\F1F0\\\"}.fa-cc-mastercard:before{content:\\\"\\\\F1F1\\\"}.fa-cc-discover:before{content:\\\"\\\\F1F2\\\"}.fa-cc-amex:before{content:\\\"\\\\F1F3\\\"}.fa-cc-paypal:before{content:\\\"\\\\F1F4\\\"}.fa-cc-stripe:before{content:\\\"\\\\F1F5\\\"}.fa-bell-slash:before{content:\\\"\\\\F1F6\\\"}.fa-bell-slash-o:before{content:\\\"\\\\F1F7\\\"}.fa-trash:before{content:\\\"\\\\F1F8\\\"}.fa-copyright:before{content:\\\"\\\\F1F9\\\"}.fa-at:before{content:\\\"\\\\F1FA\\\"}.fa-eyedropper:before{content:\\\"\\\\F1FB\\\"}.fa-paint-brush:before{content:\\\"\\\\F1FC\\\"}.fa-birthday-cake:before{content:\\\"\\\\F1FD\\\"}.fa-area-chart:before{content:\\\"\\\\F1FE\\\"}.fa-pie-chart:before{content:\\\"\\\\F200\\\"}.fa-line-chart:before{content:\\\"\\\\F201\\\"}.fa-lastfm:before{content:\\\"\\\\F202\\\"}.fa-lastfm-square:before{content:\\\"\\\\F203\\\"}.fa-toggle-off:before{content:\\\"\\\\F204\\\"}.fa-toggle-on:before{content:\\\"\\\\F205\\\"}.fa-bicycle:before{content:\\\"\\\\F206\\\"}.fa-bus:before{content:\\\"\\\\F207\\\"}.fa-ioxhost:before{content:\\\"\\\\F208\\\"}.fa-angellist:before{content:\\\"\\\\F209\\\"}.fa-cc:before{content:\\\"\\\\F20A\\\"}.fa-ils:before,.fa-shekel:before,.fa-sheqel:before{content:\\\"\\\\F20B\\\"}.fa-meanpath:before{content:\\\"\\\\F20C\\\"}.fa-buysellads:before{content:\\\"\\\\F20D\\\"}.fa-connectdevelop:before{content:\\\"\\\\F20E\\\"}.fa-dashcube:before{content:\\\"\\\\F210\\\"}.fa-forumbee:before{content:\\\"\\\\F211\\\"}.fa-leanpub:before{content:\\\"\\\\F212\\\"}.fa-sellsy:before{content:\\\"\\\\F213\\\"}.fa-shirtsinbulk:before{content:\\\"\\\\F214\\\"}.fa-simplybuilt:before{content:\\\"\\\\F215\\\"}.fa-skyatlas:before{content:\\\"\\\\F216\\\"}.fa-cart-plus:before{content:\\\"\\\\F217\\\"}.fa-cart-arrow-down:before{content:\\\"\\\\F218\\\"}.fa-diamond:before{content:\\\"\\\\F219\\\"}.fa-ship:before{content:\\\"\\\\F21A\\\"}.fa-user-secret:before{content:\\\"\\\\F21B\\\"}.fa-motorcycle:before{content:\\\"\\\\F21C\\\"}.fa-street-view:before{content:\\\"\\\\F21D\\\"}.fa-heartbeat:before{content:\\\"\\\\F21E\\\"}.fa-venus:before{content:\\\"\\\\F221\\\"}.fa-mars:before{content:\\\"\\\\F222\\\"}.fa-mercury:before{content:\\\"\\\\F223\\\"}.fa-intersex:before,.fa-transgender:before{content:\\\"\\\\F224\\\"}.fa-transgender-alt:before{content:\\\"\\\\F225\\\"}.fa-venus-double:before{content:\\\"\\\\F226\\\"}.fa-mars-double:before{content:\\\"\\\\F227\\\"}.fa-venus-mars:before{content:\\\"\\\\F228\\\"}.fa-mars-stroke:before{content:\\\"\\\\F229\\\"}.fa-mars-stroke-v:before{content:\\\"\\\\F22A\\\"}.fa-mars-stroke-h:before{content:\\\"\\\\F22B\\\"}.fa-neuter:before{content:\\\"\\\\F22C\\\"}.fa-genderless:before{content:\\\"\\\\F22D\\\"}.fa-facebook-official:before{content:\\\"\\\\F230\\\"}.fa-pinterest-p:before{content:\\\"\\\\F231\\\"}.fa-whatsapp:before{content:\\\"\\\\F232\\\"}.fa-server:before{content:\\\"\\\\F233\\\"}.fa-user-plus:before{content:\\\"\\\\F234\\\"}.fa-user-times:before{content:\\\"\\\\F235\\\"}.fa-bed:before,.fa-hotel:before{content:\\\"\\\\F236\\\"}.fa-viacoin:before{content:\\\"\\\\F237\\\"}.fa-train:before{content:\\\"\\\\F238\\\"}.fa-subway:before{content:\\\"\\\\F239\\\"}.fa-medium:before{content:\\\"\\\\F23A\\\"}.fa-y-combinator:before,.fa-yc:before{content:\\\"\\\\F23B\\\"}.fa-optin-monster:before{content:\\\"\\\\F23C\\\"}.fa-opencart:before{content:\\\"\\\\F23D\\\"}.fa-expeditedssl:before{content:\\\"\\\\F23E\\\"}.fa-battery-4:before,.fa-battery-full:before{content:\\\"\\\\F240\\\"}.fa-battery-3:before,.fa-battery-three-quarters:before{content:\\\"\\\\F241\\\"}.fa-battery-2:before,.fa-battery-half:before{content:\\\"\\\\F242\\\"}.fa-battery-1:before,.fa-battery-quarter:before{content:\\\"\\\\F243\\\"}.fa-battery-0:before,.fa-battery-empty:before{content:\\\"\\\\F244\\\"}.fa-mouse-pointer:before{content:\\\"\\\\F245\\\"}.fa-i-cursor:before{content:\\\"\\\\F246\\\"}.fa-object-group:before{content:\\\"\\\\F247\\\"}.fa-object-ungroup:before{content:\\\"\\\\F248\\\"}.fa-sticky-note:before{content:\\\"\\\\F249\\\"}.fa-sticky-note-o:before{content:\\\"\\\\F24A\\\"}.fa-cc-jcb:before{content:\\\"\\\\F24B\\\"}.fa-cc-diners-club:before{content:\\\"\\\\F24C\\\"}.fa-clone:before{content:\\\"\\\\F24D\\\"}.fa-balance-scale:before{content:\\\"\\\\F24E\\\"}.fa-hourglass-o:before{content:\\\"\\\\F250\\\"}.fa-hourglass-1:before,.fa-hourglass-start:before{content:\\\"\\\\F251\\\"}.fa-hourglass-2:before,.fa-hourglass-half:before{content:\\\"\\\\F252\\\"}.fa-hourglass-3:before,.fa-hourglass-end:before{content:\\\"\\\\F253\\\"}.fa-hourglass:before{content:\\\"\\\\F254\\\"}.fa-hand-grab-o:before,.fa-hand-rock-o:before{content:\\\"\\\\F255\\\"}.fa-hand-paper-o:before,.fa-hand-stop-o:before{content:\\\"\\\\F256\\\"}.fa-hand-scissors-o:before{content:\\\"\\\\F257\\\"}.fa-hand-lizard-o:before{content:\\\"\\\\F258\\\"}.fa-hand-spock-o:before{content:\\\"\\\\F259\\\"}.fa-hand-pointer-o:before{content:\\\"\\\\F25A\\\"}.fa-hand-peace-o:before{content:\\\"\\\\F25B\\\"}.fa-trademark:before{content:\\\"\\\\F25C\\\"}.fa-registered:before{content:\\\"\\\\F25D\\\"}.fa-creative-commons:before{content:\\\"\\\\F25E\\\"}.fa-gg:before{content:\\\"\\\\F260\\\"}.fa-gg-circle:before{content:\\\"\\\\F261\\\"}.fa-tripadvisor:before{content:\\\"\\\\F262\\\"}.fa-odnoklassniki:before{content:\\\"\\\\F263\\\"}.fa-odnoklassniki-square:before{content:\\\"\\\\F264\\\"}.fa-get-pocket:before{content:\\\"\\\\F265\\\"}.fa-wikipedia-w:before{content:\\\"\\\\F266\\\"}.fa-safari:before{content:\\\"\\\\F267\\\"}.fa-chrome:before{content:\\\"\\\\F268\\\"}.fa-firefox:before{content:\\\"\\\\F269\\\"}.fa-opera:before{content:\\\"\\\\F26A\\\"}.fa-internet-explorer:before{content:\\\"\\\\F26B\\\"}.fa-television:before,.fa-tv:before{content:\\\"\\\\F26C\\\"}.fa-contao:before{content:\\\"\\\\F26D\\\"}.fa-500px:before{content:\\\"\\\\F26E\\\"}.fa-amazon:before{content:\\\"\\\\F270\\\"}.fa-calendar-plus-o:before{content:\\\"\\\\F271\\\"}.fa-calendar-minus-o:before{content:\\\"\\\\F272\\\"}.fa-calendar-times-o:before{content:\\\"\\\\F273\\\"}.fa-calendar-check-o:before{content:\\\"\\\\F274\\\"}.fa-industry:before{content:\\\"\\\\F275\\\"}.fa-map-pin:before{content:\\\"\\\\F276\\\"}.fa-map-signs:before{content:\\\"\\\\F277\\\"}.fa-map-o:before{content:\\\"\\\\F278\\\"}.fa-map:before{content:\\\"\\\\F279\\\"}.fa-commenting:before{content:\\\"\\\\F27A\\\"}.fa-commenting-o:before{content:\\\"\\\\F27B\\\"}.fa-houzz:before{content:\\\"\\\\F27C\\\"}.fa-vimeo:before{content:\\\"\\\\F27D\\\"}.fa-black-tie:before{content:\\\"\\\\F27E\\\"}.fa-fonticons:before{content:\\\"\\\\F280\\\"}.fa-reddit-alien:before{content:\\\"\\\\F281\\\"}.fa-edge:before{content:\\\"\\\\F282\\\"}.fa-credit-card-alt:before{content:\\\"\\\\F283\\\"}.fa-codiepie:before{content:\\\"\\\\F284\\\"}.fa-modx:before{content:\\\"\\\\F285\\\"}.fa-fort-awesome:before{content:\\\"\\\\F286\\\"}.fa-usb:before{content:\\\"\\\\F287\\\"}.fa-product-hunt:before{content:\\\"\\\\F288\\\"}.fa-mixcloud:before{content:\\\"\\\\F289\\\"}.fa-scribd:before{content:\\\"\\\\F28A\\\"}.fa-pause-circle:before{content:\\\"\\\\F28B\\\"}.fa-pause-circle-o:before{content:\\\"\\\\F28C\\\"}.fa-stop-circle:before{content:\\\"\\\\F28D\\\"}.fa-stop-circle-o:before{content:\\\"\\\\F28E\\\"}.fa-shopping-bag:before{content:\\\"\\\\F290\\\"}.fa-shopping-basket:before{content:\\\"\\\\F291\\\"}.fa-hashtag:before{content:\\\"\\\\F292\\\"}.fa-bluetooth:before{content:\\\"\\\\F293\\\"}.fa-bluetooth-b:before{content:\\\"\\\\F294\\\"}.fa-percent:before{content:\\\"\\\\F295\\\"}\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader!./~/font-awesome/css/font-awesome.min.css\n ** module id = 56\n ** module chunks = 0\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n// css base code, injected by the css-loader\r\nmodule.exports = function() {\r\n\tvar list = [];\r\n\r\n\t// return the list of modules as css string\r\n\tlist.toString = function toString() {\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar item = this[i];\r\n\t\t\tif(item[2]) {\r\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(item[1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result.join(\"\");\r\n\t};\r\n\r\n\t// import a list of modules into the list\r\n\tlist.i = function(modules, mediaQuery) {\r\n\t\tif(typeof modules === \"string\")\r\n\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\tvar alreadyImportedModules = {};\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar id = this[i][0];\r\n\t\t\tif(typeof id === \"number\")\r\n\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t}\r\n\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\tvar item = modules[i];\r\n\t\t\t// skip already imported module\r\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t}\r\n\t\t\t\tlist.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn list;\r\n};\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader/lib/css-base.js\n ** module id = 57\n ** module chunks = 0\n **/","module.exports = __webpack_public_path__ + \"fonts/fontawesome-webfont.eot\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/font-awesome/fonts/fontawesome-webfont.eot?v=4.5.0\n ** module id = 58\n ** module chunks = 0\n **/","module.exports = __webpack_public_path__ + \"fonts/fontawesome-webfont.eot\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/font-awesome/fonts/fontawesome-webfont.eot\n ** module id = 59\n ** module chunks = 0\n **/","module.exports = __webpack_public_path__ + \"fonts/fontawesome-webfont.woff2\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/font-awesome/fonts/fontawesome-webfont.woff2?v=4.5.0\n ** module id = 60\n ** module chunks = 0\n **/","module.exports = __webpack_public_path__ + \"fonts/fontawesome-webfont.woff\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/font-awesome/fonts/fontawesome-webfont.woff?v=4.5.0\n ** module id = 61\n ** module chunks = 0\n **/","module.exports = __webpack_public_path__ + \"fonts/fontawesome-webfont.ttf\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/font-awesome/fonts/fontawesome-webfont.ttf?v=4.5.0\n ** module id = 62\n ** module chunks = 0\n **/","module.exports = __webpack_public_path__ + \"fonts/fontawesome-webfont.svg\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/font-awesome/fonts/fontawesome-webfont.svg?v=4.5.0\n ** module id = 63\n ** module chunks = 0\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar stylesInDom = {},\r\n\tmemoize = function(fn) {\r\n\t\tvar memo;\r\n\t\treturn function () {\r\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\r\n\t\t\treturn memo;\r\n\t\t};\r\n\t},\r\n\tisOldIE = memoize(function() {\r\n\t\treturn /msie [6-9]\\b/.test(window.navigator.userAgent.toLowerCase());\r\n\t}),\r\n\tgetHeadElement = memoize(function () {\r\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\r\n\t}),\r\n\tsingletonElement = null,\r\n\tsingletonCounter = 0,\r\n\tstyleElementsInsertedAtTop = [];\r\n\r\nmodule.exports = function(list, options) {\r\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\r\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\r\n\t}\r\n\r\n\toptions = options || {};\r\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\r\n\t// tags it will allow on a page\r\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\r\n\r\n\t// By default, add <style> tags to the bottom of <head>.\r\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\r\n\r\n\tvar styles = listToStyles(list);\r\n\taddStylesToDom(styles, options);\r\n\r\n\treturn function update(newList) {\r\n\t\tvar mayRemove = [];\r\n\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\tvar item = styles[i];\r\n\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\tdomStyle.refs--;\r\n\t\t\tmayRemove.push(domStyle);\r\n\t\t}\r\n\t\tif(newList) {\r\n\t\t\tvar newStyles = listToStyles(newList);\r\n\t\t\taddStylesToDom(newStyles, options);\r\n\t\t}\r\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\r\n\t\t\tvar domStyle = mayRemove[i];\r\n\t\t\tif(domStyle.refs === 0) {\r\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\r\n\t\t\t\t\tdomStyle.parts[j]();\r\n\t\t\t\tdelete stylesInDom[domStyle.id];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction addStylesToDom(styles, options) {\r\n\tfor(var i = 0; i < styles.length; i++) {\r\n\t\tvar item = styles[i];\r\n\t\tvar domStyle = stylesInDom[item.id];\r\n\t\tif(domStyle) {\r\n\t\t\tdomStyle.refs++;\r\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\r\n\t\t\t}\r\n\t\t\tfor(; j < item.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar parts = [];\r\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\r\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction listToStyles(list) {\r\n\tvar styles = [];\r\n\tvar newStyles = {};\r\n\tfor(var i = 0; i < list.length; i++) {\r\n\t\tvar item = list[i];\r\n\t\tvar id = item[0];\r\n\t\tvar css = item[1];\r\n\t\tvar media = item[2];\r\n\t\tvar sourceMap = item[3];\r\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\r\n\t\tif(!newStyles[id])\r\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\r\n\t\telse\r\n\t\t\tnewStyles[id].parts.push(part);\r\n\t}\r\n\treturn styles;\r\n}\r\n\r\nfunction insertStyleElement(options, styleElement) {\r\n\tvar head = getHeadElement();\r\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\r\n\tif (options.insertAt === \"top\") {\r\n\t\tif(!lastStyleElementInsertedAtTop) {\r\n\t\t\thead.insertBefore(styleElement, head.firstChild);\r\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\r\n\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\r\n\t\t} else {\r\n\t\t\thead.appendChild(styleElement);\r\n\t\t}\r\n\t\tstyleElementsInsertedAtTop.push(styleElement);\r\n\t} else if (options.insertAt === \"bottom\") {\r\n\t\thead.appendChild(styleElement);\r\n\t} else {\r\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\r\n\t}\r\n}\r\n\r\nfunction removeStyleElement(styleElement) {\r\n\tstyleElement.parentNode.removeChild(styleElement);\r\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\r\n\tif(idx >= 0) {\r\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\r\n\t}\r\n}\r\n\r\nfunction createStyleElement(options) {\r\n\tvar styleElement = document.createElement(\"style\");\r\n\tstyleElement.type = \"text/css\";\r\n\tinsertStyleElement(options, styleElement);\r\n\treturn styleElement;\r\n}\r\n\r\nfunction createLinkElement(options) {\r\n\tvar linkElement = document.createElement(\"link\");\r\n\tlinkElement.rel = \"stylesheet\";\r\n\tinsertStyleElement(options, linkElement);\r\n\treturn linkElement;\r\n}\r\n\r\nfunction addStyle(obj, options) {\r\n\tvar styleElement, update, remove;\r\n\r\n\tif (options.singleton) {\r\n\t\tvar styleIndex = singletonCounter++;\r\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\r\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\r\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\r\n\t} else if(obj.sourceMap &&\r\n\t\ttypeof URL === \"function\" &&\r\n\t\ttypeof URL.createObjectURL === \"function\" &&\r\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\r\n\t\ttypeof Blob === \"function\" &&\r\n\t\ttypeof btoa === \"function\") {\r\n\t\tstyleElement = createLinkElement(options);\r\n\t\tupdate = updateLink.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t\tif(styleElement.href)\r\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\r\n\t\t};\r\n\t} else {\r\n\t\tstyleElement = createStyleElement(options);\r\n\t\tupdate = applyToTag.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t};\r\n\t}\r\n\r\n\tupdate(obj);\r\n\r\n\treturn function updateStyle(newObj) {\r\n\t\tif(newObj) {\r\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\r\n\t\t\t\treturn;\r\n\t\t\tupdate(obj = newObj);\r\n\t\t} else {\r\n\t\t\tremove();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nvar replaceText = (function () {\r\n\tvar textStore = [];\r\n\r\n\treturn function (index, replacement) {\r\n\t\ttextStore[index] = replacement;\r\n\t\treturn textStore.filter(Boolean).join('\\n');\r\n\t};\r\n})();\r\n\r\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\r\n\tvar css = remove ? \"\" : obj.css;\r\n\r\n\tif (styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\r\n\t} else {\r\n\t\tvar cssNode = document.createTextNode(css);\r\n\t\tvar childNodes = styleElement.childNodes;\r\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\r\n\t\tif (childNodes.length) {\r\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\r\n\t\t} else {\r\n\t\t\tstyleElement.appendChild(cssNode);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction applyToTag(styleElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar media = obj.media;\r\n\tvar sourceMap = obj.sourceMap;\r\n\r\n\tif(media) {\r\n\t\tstyleElement.setAttribute(\"media\", media)\r\n\t}\r\n\r\n\tif(styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = css;\r\n\t} else {\r\n\t\twhile(styleElement.firstChild) {\r\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\r\n\t\t}\r\n\t\tstyleElement.appendChild(document.createTextNode(css));\r\n\t}\r\n}\r\n\r\nfunction updateLink(linkElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar media = obj.media;\r\n\tvar sourceMap = obj.sourceMap;\r\n\r\n\tif(sourceMap) {\r\n\t\t// http://stackoverflow.com/a/26603875\r\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\r\n\t}\r\n\r\n\tvar blob = new Blob([css], { type: \"text/css\" });\r\n\r\n\tvar oldSrc = linkElement.href;\r\n\r\n\tlinkElement.href = URL.createObjectURL(blob);\r\n\r\n\tif(oldSrc)\r\n\t\tURL.revokeObjectURL(oldSrc);\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/style-loader/addStyles.js\n ** module id = 64\n ** module chunks = 0\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../node_modules/css-loader/index.js!./style.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../node_modules/css-loader/index.js!./style.css\", function() {\n\t\t\tvar newContent = require(\"!!./../../node_modules/css-loader/index.js!./style.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/css/style.css\n ** module id = 65\n ** module chunks = 0\n **/","exports = module.exports = require(\"./../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"body{color:#c5debf;background-color:#000;padding:0;margin:0;overflow:hidden}canvas#LIBRARY{width:100%;height:100%;display:block}label,p{font-size:14pt;margin:0;margin-bottom:5px}h1,h2,h3,label{color:#3cb371}p{color:#c5debf}a{color:#9582ff;font-size:14pt;text-decoration:none;cursor:pointer}table{width:100%}.uiPanel{cursor:default;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.block-ui-overlay,.ngdialog-content,.uiPanel{overflow:hidden;border-radius:20px;background:linear-gradient(180deg,rgba(50,50,50,.7) 0,rgba(0,0,0,.7))}.ngdialog-content{background:linear-gradient(180deg,rgba(50,50,50,.9) 0,rgba(0,0,0,.9))}.uiPanel{margin:10px;padding:15px}.block-ui-message{background-color:transparent;font-size:14px}.tooltip{position:absolute;top:0;left:0}.tooltip p{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:10pt}.inventory{position:absolute;top:0;right:0;width:330px;float:right}.inventory li{font-size:10pt;margin:0}.inventoryItem{background:linear-gradient(180deg,rgba(50,100,50,.5) 0,rgba(0,0,0,.5));border-radius:10px;padding:5px;white-space:nowrap;overflow:hidden}.selected{background:linear-gradient(180deg,rgba(14,179,35,.5) 0,rgba(0,0,0,.5))}.cover span.fa{float:right}.navigation{text-align:center}.search input{text-indent:25px!important;margin-bottom:5px}.search .fa-search{position:absolute;font-size:20px;color:grey}.welcomePage{position:absolute;left:0;top:0;width:50%;margin-left:25%}.welcomePage>p{text-align:justify}.welcomeControl{margin:30px;padding:10px;text-align:center;background-color:rgba(20,70,20,.4);cursor:pointer;border-radius:8px}.welcomeControl:hover{background-color:rgba(20,100,20,.4)}ul.loginProviders{text-align:center;margin-bottom:20px}ul.loginProviders>li{display:inline-block;cursor:pointer;background-color:rgba(20,70,20,.4)}ul.loginProviders>li:hover{background-color:rgba(20,100,20,.4)}ul.loginProviders>li>.fa{display:inline-block;width:50px;height:50px;line-height:50px;text-align:center;vertical-align:bottom;font-size:40px;margin:0}.registration>table{margin:10px 0}span.fa{color:#90ee90;cursor:default}span.fa:hover{color:lime}i.fa{margin:0 5px 0 0}.mainMenu{position:absolute;left:0;bottom:0}.submitButton{float:right;margin-left:20px}.submitButton>span.fa{margin-left:10px}.button{display:inline-block;padding:6px 12px;color:#90ee90;background-color:rgba(20,70,20,.4);border-radius:8px;cursor:pointer}.button:hover{background-color:rgba(20,100,20,.4)}input[type=email],input[type=text],textarea{display:block;font-size:large;width:100%;padding:0;border:none;outline:none;background:linear-gradient(180deg,rgba(0,0,0,.5) 0,rgba(50,50,50,.5));color:#c5debf;text-indent:5px}ul{margin:0;padding:0;cursor:default}ul li{margin:5px;padding:3px;list-style:none;border-radius:5px}ul.select li{cursor:pointer}ul.select li:hover:not(.selectedItem){background-color:rgba(20,50,20,.4)}ul.select li.selectedItem{background-color:rgba(0,100,0,.4)}.tools{position:absolute;bottom:0;right:0;text-align:center}.tools ul{margin-bottom:10px}.tools h3,.tools h4{margin:auto}.tools h4{width:200px;word-wrap:break-word}.tools .sub{display:block;color:lime;font-size:small;font-weight:700}.previewImg{width:128px;height:128px;border:solid #2f4f4f;border-radius:30px;float:right}ul.pagination>li{display:inline;margin:0}input.ng-invalid,textarea.ng-invalid,vb-select.ng-invalid ul{border:thin solid red}.ngdialog h2{margin-top:0}.buttons{float:right;margin-top:15px}.alert{padding:15px;margin-bottom:20px;border:1px solid transparent;border-radius:4px;background:linear-gradient(180deg,rgba(50,50,50,.7) 0,rgba(0,0,0,.7))}.alert h4{margin-top:0;color:inherit}.alert .alert-link{font-weight:700}.alert>p,.alert>ul{margin-bottom:0}.alert>p+p{margin-top:5px}.alert-dismissable,.alert-dismissible{padding-right:35px}.alert-dismissable .close,.alert-dismissible .close{position:relative;top:-2px;right:-21px;color:inherit}.alert-success{color:#3c763d;background-color:#dff0d8;border-color:#d6e9c6}.alert-success hr{border-top-color:#c9e2b3}.alert-success .alert-link{color:#2b542c}.alert-info{color:#31708f;background-color:#d9edf7;border-color:#bce8f1}.alert-info hr{border-top-color:#a6e1ec}.alert-info .alert-link{color:#245269}.alert-warning{color:#8a6d3b;background-color:#fcf8e3;border-color:#faebcc}.alert-warning hr{border-top-color:#f7e1b5}.alert-warning .alert-link{color:#66512c}.alert-danger{color:#a94442;background-color:#f2dede;border-color:#ebccd1}.alert-danger hr{border-top-color:#e4b9c0}.alert-danger .alert-link{color:#843534}.close{float:right;font-size:21px;font-weight:700;line-height:1;color:#000;text-shadow:0 1px 0 #fff;filter:alpha(opacity=20);opacity:.2}.close:focus,.close:hover{color:#000;text-decoration:none;cursor:pointer;filter:alpha(opacity=50);opacity:.5}button.close{-webkit-appearance:none;padding:0;cursor:pointer;background:transparent;border:0}\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader!./src/css/style.css\n ** module id = 66\n ** module chunks = 0\n **/"],"sourceRoot":""}